(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+/WI":function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("HqZk");class i{constructor(t,e,s,n,i,r){this._itemId=t,this._category=e,this._wallLocation=s,this._x=n,this._y=i,this._direction=r}getMessageArray(){switch(this._category){case n.a.FLOOR:return[`${this._itemId} ${this._x} ${this._y} ${this._direction}`];case n.a.WALL:return[`${this._itemId} ${this._wallLocation} `];default:return[]}}dispose(){}}},"+IGW":function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("3r1x");let i=(()=>{class t extends n.a{constructor(t,e){super(t),this._connection=e}get connection(){return this._connection}}return t.CONNECTION_OPENED="SCE_OPEN",t.CONNECTION_CLOSED="SCE_CLOSED",t.CONNECTION_ERROR="SCE_ERROR",t.CONNECTION_MESSAGE="SCE_MESSAGE",t})()},"+IZ6":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("1+1A");class r{flush(){return this._owners=new Map,this._items=[],!0}parse(t){if(!t)return!1;if(!this.parseOwners(t))return!1;let e=t.readInt();for(;e>0;){const s=new i.a(t);if(!s)continue;const n=this._owners.get(s.userId);n&&(s.username=n),this._items.push(s),e--}return!0}parseOwners(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._owners.set(t.readInt(),t.readString()),e--;return!0}get owners(){return this._owners}get items(){return this._items}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"+LbQ":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._type=null,this._parameters=new Map,!0}parse(t){if(!t)return!1;this._type=t.readString();let e=t.readInt();for(;e>0;)this._parameters.set(t.readString(),t.readString()),e--;return!0}get type(){return this._type}get parameters(){return this._parameters}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"+LxV":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},"+ana":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},"+gkD":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},"+kDp":function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{}return t.USER=1,t.PET=2,t.BOT=3,t.RENTABLE_BOT=4,t})()},"+lr5":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"/3sV":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._webId=-1,this._id=-1,this._newName="",!0}parse(t){return!!t&&(this._webId=t.readInt(),this._id=t.readInt(),this._newName=t.readString(),!0)}get webId(){return this._webId}get id(){return this._id}get newName(){return this._newName}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"/52j":function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{}return t.NONE=0,t.HEART=1,t.SMILE=2,t.BOBBA=3,t.RELATIONSHIP_TYPES=[0,1,2,3],t.RELATIONSHIP_NAMES=["Aucun","Coeur","Sourire","Bobba"],t})()},"/FfH":function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{constructor(t){this.reset(),this.parse(t)}reset(){this._allowMute=0,this._allowKick=0,this._allowBan=0}parse(t){this._allowMute=t.readInt(),this._allowKick=t.readInt(),this._allowBan=t.readInt()}get allowMute(){return this._allowMute}get allowKick(){return this._allowKick}get allowBan(){return this._allowBan}}return t._Str_10707=0,t._Str_5047=1,t._Str_11537=2,t})()},"/OJ4":function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{static _Str_22614(e){switch(e){case t._Str_9173:return"${trading.mode.free}";case t._Str_14475:return"${trading.mode.controller}";case t._Str_12752:return"${trading.mode.not.allowed}"}return""}}return t._Str_12752=0,t._Str_14475=1,t._Str_9173=2,t})()},"/PsI":function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{static getExpressionTimeout(t){switch(t=parseInt(t)){case 1:return 5e3;case 2:return 1400;case 3:case 4:return 2e3;case 5:return 0;case 6:return 700;case 7:return 2e3;case 8:case 9:case 10:return 1500;default:return 0}}static getExpressionId(e){return t.EXPRESSION_MAP.indexOf(e)}static getExpression(e){return e>t.EXPRESSION_MAP.length?null:t.EXPRESSION_MAP[e]}static getGestureId(e){return t.GESTURE_MAP.indexOf(e)}static getGesture(e){return e>t.GESTURE_MAP.length?null:t.GESTURE_MAP[e]}static idToAvatarActionState(t){return"Lay"===t?"lay":"Float"===t?"float":"Swim"===t?"swim":"Sit"===t?"sit":"Respect"===t?"respect":"Wave"===t?"wave":"Idle"===t?"idle":"Dance"===t?"dance":"UseItem"===t?"usei":"CarryItem"===t?"cri":"Talk"===t?"talk":"Sleep"===t?"Sleep":"Move"===t?"mv":"std"}}return t.CARRY_OBJECT="cri",t.DANCE="dance",t.EFFECT="fx",t.EXPRESSION="expression",t.EXPRESSION_BLOW_A_KISS="blow",t.EXPRESSION_CRY="cry",t.EXPRESSION_IDLE="idle",t.EXPRESSION_LAUGH="laugh",t.EXPRESSION_RESPECT="respect",t.EXPRESSION_RIDE_JUMP="ridejump",t.EXPRESSION_SNOWBOARD_OLLIE="sbollie",t.EXPRESSION_SNOWBORD_360="sb360",t.EXPRESSION_WAVE="wave",t.GESTURE="gest",t.GESTURE_AGGRAVATED="agr",t.GESTURE_SAD="sad",t.GESTURE_SMILE="sml",t.GESTURE_SURPRISED="srp",t.GUIDE_STATUS="guide",t.MUTED="muted",t.PET_GESTURE_BLINK="eyb",t.PET_GESTURE_CRAZY="crz",t.PET_GESTURE_JOY="joy",t.PET_GESTURE_MISERABLE="mis",t.PET_GESTURE_PUZZLED="puz",t.PET_GESTURE_TONGUE="tng",t.PLAYING_GAME="playing_game",t.POSTURE="posture",t.POSTURE_FLOAT="float",t.POSTURE_LAY="lay",t.POSTURE_SIT="sit",t.POSTURE_STAND="std",t.POSTURE_SWIM="swim",t.POSTURE_WALK="mv",t.SIGN="sign",t.SLEEP="sleep",t.SNOWWAR_DIE_BACK="swdieback",t.SNOWWAR_DIE_FRONT="swdiefront",t.SNOWWAR_PICK="swpick",t.SNOWWAR_RUN="swrun",t.SNOWWAR_THROW="swthrow",t.TALK="talk",t.BLINK="blink",t.TYPING="typing",t.USE_OBJECT="usei",t.VOTE="vote",t.GESTURE_MAP=["",t.GESTURE_SMILE,t.GESTURE_AGGRAVATED,t.GESTURE_SURPRISED,t.GESTURE_SAD,t.PET_GESTURE_JOY,t.PET_GESTURE_CRAZY,t.PET_GESTURE_TONGUE,t.PET_GESTURE_BLINK,t.PET_GESTURE_MISERABLE,t.PET_GESTURE_PUZZLED],t.EXPRESSION_MAP=["",t.EXPRESSION_WAVE,t.EXPRESSION_BLOW_A_KISS,t.EXPRESSION_LAUGH,t.EXPRESSION_CRY,t.EXPRESSION_IDLE,t.DANCE,t.EXPRESSION_RESPECT,t.EXPRESSION_SNOWBOARD_OLLIE,t.EXPRESSION_SNOWBORD_360,t.EXPRESSION_RIDE_JUMP],t})()},"/icx":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO");class i{constructor(t){this._id=0,this._type=0,this._color=0,this._intensity=0,this._isParsed=!1,this._htmlColor=null,this._id=t}parsed(){this._isParsed=!0}get id(){return this._id}get type(){return this._type}set type(t){this._isParsed||(this._type=t)}get color(){return this._color}set color(t){this._isParsed||(this._color=t)}get intensity(){return this._intensity}set intensity(t){this._isParsed||(this._intensity=t)}set htmlColor(t){this._htmlColor=t}get htmlColor(){return this._htmlColor}}class r{constructor(){this._selectedPresetId=0,this._presets=[]}get _Str_10888(){return this._presets.length}get _Str_6226(){return this._selectedPresetId}_Str_14989(t){return t<0||t>=this._Str_10888?null:this._presets[t]}flush(){return this._presets=[],!0}parse(t){const e=t.readInt();this._selectedPresetId=t.readInt();let s=0;for(;s<e;){const e=t.readInt(),n=t.readInt(),r=t.readString(),a=parseInt(r.substr(1),16),o=t.readInt(),c=new i(e);c.type=n,c.color=a,c.intensity=o,c.parsed(),c.htmlColor=r,this._presets.push(c),s++}return!0}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"/niJ":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._parts=new Map,this.parseFigure(t)}_Str_1016(){return this.partSets().keys()}_Str_744(t){return null!==this.partSets().get(t)}getPartSetId(t){const e=this.partSets().get(t);return e?e.get("setid"):0}_Str_815(t){const e=this.partSets().get(t);return e?e.get("colorids"):null}_Str_830(t,e,s){const n=new Map;n.set("type",t),n.set("setid",e),n.set("colorids",s);const i=this.partSets();i.delete(t),i.set(t,n)}_Str_923(t){this.partSets().delete(t)}_Str_1008(){const t=[];for(const e of this.partSets().keys()){if(!e)continue;let s=[];s.push(e),s.push(this.getPartSetId(e)),s=s.concat(this._Str_815(e)),t.push(s.join("-"))}return t.join(".")}partSets(){return this._parts||(this._parts=new Map),this._parts}parseFigure(t){t||(t="");for(const e of t.split(".")){const t=e.split("-");if(t.length>=2){const e=t[0],s=parseInt(t[1]),n=[];let i=2;for(;i<t.length;)n.push(parseInt(t[i])),i++;this._Str_830(e,s,n)}}}}},0:function(t,e,s){t.exports=s("zUnb")},"0/8l":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{flush(){return this._count=0,!0}parse(t){return!!t&&(this._count=t.readInt(),!0)}get count(){return this._count}}},"00/2":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},"00EK":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._userName=null,!0}parse(t){return!!t&&(this._userName=t.readString(),!0)}get userName(){return this._userName}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}get userName(){return this.getParser().userName}}},"00eG":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._typeCode=-1,this._avatarId=0,this._message=null,!0}parse(t){return!!t&&(this._typeCode=t.readInt(),this._avatarId=t.readInt(),this._message=t.readString(),!0)}get typeCode(){return this._typeCode}get avatarId(){return this._avatarId}get message(){return this._message}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"01lY":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._itemId=0,!0}parse(t){return!!t&&(this._itemId=t.readInt(),!0)}get itemId(){return this._itemId}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"07Tz":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},"0BWK":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},"0DoP":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"0EkW":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},"0LNC":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._id=-1,this._Str_4460=[],!0}parse(t){if(!t)return!1;this._id=t.readInt(),this._name=t.readString(),this._level=t.readInt(),this._maximumLevel=t.readInt(),this._experience=t.readInt(),this._levelExperienceGoal=t.readInt(),this._energy=t.readInt(),this._maximumEnergy=t.readInt(),this._happyness=t.readInt(),this._maximumHappyness=t.readInt(),this._respect=t.readInt(),this._ownerId=t.readInt(),this._age=t.readInt(),this._ownerName=t.readString(),this._rarityLevel=t.readInt(),this._saddle=t.readBoolean(),this._rider=t.readBoolean();let e=t.readInt();for(;e>0;)this._Str_4460.push(t.readInt()),e--;return this._Str_4460.sort(),this._publiclyRideable=t.readInt(),this._breedable=t.readBoolean(),this._fullyGrown=t.readBoolean(),this._dead=t.readBoolean(),this._unknownRarity=t.readInt(),this._maximumTimeToLive=t.readInt(),this._remainingTimeToLive=t.readInt(),this._remainingGrowTime=t.readInt(),this._publiclyBreedable=t.readBoolean(),!0}get id(){return this._id}get name(){return this._name}get level(){return this._level}get maximumLevel(){return this._maximumLevel}get experience(){return this._experience}get energy(){return this._energy}get happyness(){return this._happyness}get levelExperienceGoal(){return this._levelExperienceGoal}get maximumEnergy(){return this._maximumEnergy}get maximumHappyness(){return this._maximumHappyness}get respect(){return this._respect}get ownerId(){return this._ownerId}get ownerName(){return this._ownerName}get age(){return this._age}get rarityLevel(){return this._rarityLevel}get saddle(){return this._saddle}get rider(){return this._rider}get breedable(){return this._breedable}get fullyGrown(){return this._fullyGrown}get dead(){return this._dead}get maximumTimeToLive(){return this._maximumTimeToLive}get remainingTimeToLive(){return this._remainingTimeToLive}get remainingGrowTime(){return this._remainingGrowTime}get _Str_3307(){return this._Str_4460}get publiclyRideable(){return this._publiclyRideable}get unknownRarity(){return this._unknownRarity}get publiclyBreedable(){return this._publiclyBreedable}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"0gOM":function(t,e,s){"use strict";s.d(e,"a",function(){return Qa});var n=s("Fv14"),i=s("+IGW"),r=s("P7Cj"),a=s("vzKh"),o=s("5+UO");class c{flush(){return!0}parse(t){return!!t}}class l extends o.a{constructor(t){super(t,c)}getParser(){return this.parser}}class h{flush(){return!0}parse(t){return!!t}}class u extends o.a{constructor(t){super(t,h)}getParser(){return this.parser}}class _{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}let d=(()=>{class t{}return t.UNKNOWN=0,t.BROWSER=1,t})(),g=(()=>{class t{}return t.UNKNOWN=0,t.FLASH=1,t.HTML5=2,t})();class m{constructor(t,e,s,n){this._data=[r.a.RELEASE_VERSION,"HTML5",g.HTML5,d.BROWSER]}getMessageArray(){return this._data}dispose(){}}class p{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}class f{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}var E=s("z6mw");class S extends n.a{constructor(t){super(),this._communication=t,this._sso=null,this._handShaking=!1,this._didConnect=!1,this._pongInterval=null,this.onConnectionOpenedEvent=this.onConnectionOpenedEvent.bind(this),this.onConnectionClosedEvent=this.onConnectionClosedEvent.bind(this),this.onConnectionErrorEvent=this.onConnectionErrorEvent.bind(this),this.sendPong=this.sendPong.bind(this)}onInit(){const t=this._communication.connection;t&&(t.addEventListener(i.a.CONNECTION_OPENED,this.onConnectionOpenedEvent),t.addEventListener(i.a.CONNECTION_CLOSED,this.onConnectionClosedEvent),t.addEventListener(i.a.CONNECTION_ERROR,this.onConnectionErrorEvent)),this._communication.registerMessageEvent(new l(this.onClientPingEvent.bind(this))),this._communication.registerMessageEvent(new u(this.onAuthenticatedEvent.bind(this)))}onDispose(){const t=this._communication.connection;t&&(t.removeEventListener(i.a.CONNECTION_OPENED,this.onConnectionOpenedEvent),t.removeEventListener(i.a.CONNECTION_CLOSED,this.onConnectionClosedEvent),t.removeEventListener(i.a.CONNECTION_ERROR,this.onConnectionErrorEvent)),this._sso=null,this._handShaking=!1,this.stopPonging(),super.onDispose()}onConnectionOpenedEvent(t){const e=this._communication.connection;e&&(this._didConnect=!0,this.dispatchCommunicationDemoEvent(E.a.CONNECTION_ESTABLISHED,e),r.a.instance.getConfiguration("communication.pong.manually",!1)&&this.startPonging(),this.startHandshake(e),e.send(new m(null,null,null,null)),this.tryAuthentication(e))}onConnectionClosedEvent(t){const e=this._communication.connection;e&&(this.stopPonging(),this._didConnect&&this.dispatchCommunicationDemoEvent(E.a.CONNECTION_CLOSED,e))}onConnectionErrorEvent(t){const e=this._communication.connection;e&&(this.stopPonging(),this.dispatchCommunicationDemoEvent(E.a.CONNECTION_ERROR,e))}tryAuthentication(t){if(!t||!this._sso)return this._sso||a.a.log("Login without an SSO ticket is not supported"),void this.dispatchCommunicationDemoEvent(E.a.CONNECTION_HANDSHAKE_FAILED,t);t.send(new f(this._sso,r.a.instance.time))}onClientPingEvent(t){t&&t.connection&&this.sendPong(t.connection)}onAuthenticatedEvent(t){t&&t.connection&&(this.completeHandshake(t.connection),this.dispatchCommunicationDemoEvent(E.a.CONNECTION_AUTHENTICATED,t.connection),t.connection.send(new p))}setSSO(t){t&&""!==t&&!this._sso&&(this._sso=t)}startHandshake(t){this.dispatchCommunicationDemoEvent(E.a.CONNECTION_HANDSHAKING,t),this._handShaking=!0}completeHandshake(t){this.dispatchCommunicationDemoEvent(E.a.CONNECTION_HANDSHAKED,t),this._handShaking=!1}startPonging(){this.stopPonging(),this._pongInterval=setInterval(this.sendPong,r.a.instance.getConfiguration("communication.pong.interval.ms",2e4))}stopPonging(){this._pongInterval&&(clearInterval(this._pongInterval),this._pongInterval=null)}sendPong(t=null){(t=t||this._communication.connection||null)&&t.send(new _)}dispatchCommunicationDemoEvent(t,e){r.a.instance.events.dispatchEvent(new E.a(t,e))}}var b=s("3xex"),v=s("S+Gq"),I=s("9NDz"),R=s("asXX"),T=s("Byou"),y=s("wGhc"),O=s("x7td"),C=s("qLWH"),A=s("SS1c"),M=s("t0/d"),w=s("sxwv"),U=s("u5n9"),D=s("Zq74"),N=s("ReTp"),L=s("j7DG"),P=s("U4HJ"),x=s("Ftck"),F=s("liWC"),k=s("b+vr"),W=s("hJEQ"),B=s("4Xjj"),V=s("qD21"),G=s("dIbu"),K=s("oMvi"),H=s("q4z0"),j=s("dwRb"),z=s("Pox2"),Y=s("kZQz"),q=s("WM79"),X=s("YN1x"),Z=s("00eG"),Q=s("t1CI"),J=s("G3dz"),$=s("gOUc"),tt=s("81IQ"),et=s("X26Z"),st=s("P0eX"),nt=s("i/ye"),it=s("wW/F"),rt=s("YaSm"),at=s("I5LT"),ot=s("qQgg"),ct=s("UTIc"),lt=s("e9/N"),ht=s("Zm+c"),ut=s("bR4k"),_t=s("IqqQ"),dt=s("D5bJ"),gt=s("HujO"),mt=s("7sb4");let pt=(()=>{class t{}return t.ACHIEVEMENT_LIST=305,t.AUTHENTICATED=2491,t.AVAILABILITY_STATUS=2033,t.BUILDERS_CLUB_EXPIRED=1452,t.CAMERA_PRICE=3878,t.CAMERA_THUMBNAIL_SAVED=3595,t.CAMERA_URL=3696,t.CATALOG_CLUB=2405,t.CATALOG_MODE=3828,t.CATALOG_PAGE=804,t.CATALOG_PAGES=1032,t.CATALOG_PURCHASE=869,t.CATALOG_PURCHASE_FAILED=1404,t.CATALOG_PURCHASE_UNAVAILABLE=3770,t.CATALOG_SEARCH=3388,t.CATALOG_SOLD_OUT=377,t.CATALOG_UPDATED=1866,t.CFH_RESULT_MESSAGE=934,t.CLIENT_LATENCY=10,t.CLIENT_PING=3928,t.DESKTOP_CAMPAIGN=1745,t.DESKTOP_NEWS=286,t.DESKTOP_VIEW=122,t.DISCOUNT_CONFIG=2347,t.FIRST_LOGIN_OF_DAY=793,t.FURNITURE_ALIASES=1723,t.FURNITURE_DATA=2547,t.FURNITURE_FLOOR=1778,t.FURNITURE_FLOOR_ADD=1534,t.FURNITURE_FLOOR_REMOVE=2703,t.FURNITURE_FLOOR_UPDATE=3776,t.FURNITURE_ITEMDATA=2202,t.FURNITURE_STATE=2376,t.GAME_CENTER_ACHIEVEMENTS=2265,t.GAME_CENTER_GAME_LIST=222,t.GAME_CENTER_STATUS=2893,t.GENERIC_ALERT=3801,t.GENERIC_ALERT_LINK=2030,t.GENERIC_ERROR=1600,t.GIFT_CONFIG=2234,t.GROUP_BADGES=2402,t.GROUP_CREATE_OPTIONS=2159,t.GROUP_FORUM_INFO=3011,t.GROUP_FORUM_LIST=3001,t.GROUP_FORUM_THREADS=1073,t.GROUP_INFO=1702,t.GROUP_LIST=420,t.GROUP_MEMBER=265,t.GROUP_MEMBERS=1200,t.GROUP_MEMBERS_REFRESH=2445,t.GROUP_MEMBER_REMOVE_CONFIRM=1876,t.GROUP_SETTINGS=3965,t.GROUP_BADGE_PARTS=2238,t.ITEM_DIMMER_SETTINGS=2710,t.ITEM_STACK_HELPER=2816,t.ITEM_WALL=1369,t.ITEM_WALL_ADD=2187,t.ITEM_WALL_REMOVE=3208,t.ITEM_WALL_UPDATE=2009,t.LOAD_GAME_URL=2624,t.MARKETPLACE_CONFIG=1823,t.MESSENGER_ACCEPT_FRIENDS=896,t.MESSENGER_CHAT=1587,t.MESSENGER_FIND_FRIENDS=1210,t.MESSENGER_FOLLOW_FAILED=3048,t.MESSENGER_FRIEND_NOTIFICATION=3082,t.MESSENGER_FRIENDS=3130,t.MESSENGER_INIT=1605,t.MESSENGER_INSTANCE_MESSAGE_ERROR=3359,t.MESSENGER_INVITE=3870,t.MESSENGER_INVITE_ERROR=462,t.MESSENGER_MESSAGE_ERROR=892,t.MESSENGER_MINIMAIL_COUNT=2803,t.MESSENGER_MINIMAIL_NEW=1911,t.MESSENGER_RELATIONSHIPS=2016,t.MESSENGER_REQUEST=2219,t.MESSENGER_REQUEST_ERROR=892,t.MESSENGER_REQUESTS=280,t.MESSENGER_ROOM_INVITE=3870,t.MESSENGER_SEARCH=973,t.MESSENGER_UPDATE=2800,t.MODERATION_REPORT_DISABLED=1651,t.MODERATION_TOOL=2696,t.MODERATION_TOPICS=325,t.MODERATION_USER_INFO=2866,t.MOTD_MESSAGES=2035,t.NAVIGATOR_CATEGORIES=1562,t.NAVIGATOR_COLLAPSED=1543,t.NAVIGATOR_EVENT_CATEGORIES=3244,t.NAVIGATOR_LIFTED=3104,t.NAVIGATOR_METADATA=3052,t.NAVIGATOR_OPEN_ROOM_CREATOR=2064,t.NAVIGATOR_SEARCH=2690,t.NAVIGATOR_SEARCHES=3984,t.NAVIGATOR_SETTINGS=518,t.NOTIFICATION_LIST=1992,t.PET_FIGURE_UPDATE=1924,t.PET_INFO=2901,t.RECYCLER_PRIZES=3164,t.ROOM_BAN_LIST=1869,t.ROOM_BAN_REMOVE=3429,t.ROOM_CREATED=1304,t.ROOM_DOORBELL=2309,t.ROOM_DOORBELL_ACCEPTED=3783,t.ROOM_DOORBELL_REJECTED=878,t.ROOM_ENTER=758,t.ROOM_ENTER_ERROR=899,t.ROOM_FORWARD=160,t.ROOM_HEIGHT_MAP=2753,t.ROOM_HEIGHT_MAP_UPDATE=558,t.ROOM_INFO=687,t.ROOM_INFO_OWNER=749,t.ROOM_MODEL=1301,t.ROOM_MODEL_BLOCKED_TILES=3990,t.ROOM_MODEL_DOOR=1664,t.ROOM_MODEL_NAME=2031,t.ROOM_MUTED=2533,t.ROOM_MUTE_USER=826,t.ROOM_PAINT=2454,t.ROOM_PROMOTION=2274,t.ROOM_QUEUE_STATUS=2208,t.ROOM_RIGHTS=780,t.ROOM_RIGHTS_CLEAR=2392,t.ROOM_RIGHTS_LIST=1284,t.ROOM_RIGHTS_LIST_ADD=2088,t.ROOM_RIGHTS_LIST_REMOVE=1327,t.ROOM_RIGHTS_OWNER=339,t.ROOM_ROLLING=3207,t.ROOM_SCORE=482,t.ROOM_SETTINGS=1498,t.ROOM_SETTINGS_CHAT=1191,t.ROOM_SETTINGS_SAVE=948,t.ROOM_SETTINGS_SAVE_ERROR=1555,t.ROOM_SETTINGS_UPDATED=3297,t.ROOM_SPECTATOR=1033,t.ROOM_THICKNESS=3547,t.SECURITY_DEBUG=3284,t.SECURITY_MACHINE=1488,t.SECURITY_UNKNOWN2=2833,t.TRADE_ACCEPTED=2568,t.TRADE_CLOSED=1373,t.TRADE_COMPLETED=1001,t.TRADE_CONFIRMATION=2720,t.TRADE_LIST_ITEM=2024,t.TRADE_NOT_OPEN=3128,t.TRADE_OPEN=2505,t.TRADE_OPEN_FAILED=217,t.TRADE_OTHER_NOT_ALLOWED=2154,t.TRADE_YOU_NOT_ALLOWED=3058,t.UNIT=374,t.UNIT_CHANGE_NAME=2182,t.UNIT_CHAT=1446,t.UNIT_CHAT_SHOUT=1036,t.UNIT_CHAT_WHISPER=2704,t.UNIT_DANCE=2233,t.UNIT_EFFECT=1167,t.UNIT_EXPRESSION=1631,t.UNIT_HAND_ITEM=1474,t.UNIT_IDLE=1797,t.UNIT_INFO=3920,t.UNIT_NUMBER=2324,t.UNIT_REMOVE=2661,t.UNIT_STATUS=1640,t.UNIT_TYPING=1717,t.UNSEEN_ITEMS=2103,t.USER_ACHIEVEMENT_SCORE=1968,t.USER_BADGES=717,t.USER_BADGES_ADD=2493,t.USER_BADGES_CURRENT=1087,t.USER_BOT_ADD=1352,t.USER_BOT_REMOVE=233,t.USER_BOTS=3086,t.USER_CHANGE_NAME=118,t.USER_CLOTHING=1450,t.USER_CREDITS=3475,t.USER_CURRENCY=2018,t.USER_CURRENCY_UPDATE=2275,t.USER_EFFECTS=340,t.USER_FAVORITE_ROOM=2524,t.USER_FAVORITE_ROOM_COUNT=151,t.USER_FIGURE=2429,t.USER_FURNITURE=994,t.USER_FURNITURE_ADD=104,t.USER_FURNITURE_POSTIT_PLACED=1501,t.USER_FURNITURE_REFRESH=3151,t.USER_FURNITURE_REMOVE=159,t.USER_HOME_ROOM=2875,t.USER_IGNORED=126,t.USER_IGNORED_RESULT=207,t.USER_INFO=2725,t.USER_OUTFITS=3315,t.USER_PERKS=2586,t.USER_PERMISSIONS=411,t.USER_PET_ADD=2101,t.USER_PET_REMOVE=3253,t.USER_PETS=3522,t.USER_PROFILE=3898,t.USER_RESPECT=2815,t.USER_SANCTION_STATUS=3679,t.USER_SETTINGS=513,t.USER_SUBSCRIPTION=954,t.USER_WARDROBE_PAGE=3315,t.WIRED_ACTION=1434,t.WIRED_CONDITION=1108,t.WIRED_ERROR=156,t.WIRED_OPEN=1830,t.WIRED_REWARD=178,t.WIRED_SAVE=1155,t.WIRED_TRIGGER=383,t.PLAYING_GAME=448,t.FURNITURE_STATE_2=3431,t.REMOVE_BOT_FROM_INVENTORY=233,t.ADD_BOT_TO_INVENTORY=1352,t.ACHIEVEMENT_PROGRESSED=2107,t.MODTOOL_ROOM_INFO=1333,t.MODTOOL_USER_CHATLOG=3377,t.MODTOOL_ROOM_CHATLOG=3434,t.LOVELOCK_FURNI_START=3753,t.LOVELOCK_FURNI_FRIEND_COMFIRMED=382,t.LOVELOCK_FURNI_FINISHED=770,t.GIFT_RECEIVER_NOT_FOUND=1517,t.GIFT_OPENED=56,t.HOTEL_WILL_SHUTDOWN=1050,t.FLOOD_CONTROL=566,t.REMAINING_MUTE=826,t.USER_EFFECT_LIST=340,t.USER_EFFECT_LIST_ADD=2867,t.USER_EFFECT_LIST_REMOVE=2228,t.USER_EFFECT_ACTIVATE=1959,t.CATALOG_CLUB_GIFTS=619,t.REDEEM_VOUCHER_ERROR=714,t.REDEEM_VOUCHER_OK=3336,t.MODTOOL_VISITED_ROOMS_USER=1752,t.IN_CLIENT_LINK=2023,t.BOT_COMMAND_CONFIGURATION=1618,t.HAND_ITEM_RECEIVED=354,t.PET_PLACING_ERROR=2913,t.BOT_ERROR=639,t.MARKETPLACE_SELL_ITEM=54,t.MARKETPLACE_ITEM_STATS=725,t.MARKETPLACE_OWN_ITEMS=3884,t.MARKETPLACE_CANCEL_SALE=3264,t.MARKETPLACE_ITEM_POSTED=1359,t.MARKETPLACE_ITEMS_SEARCHED=680,t.MARKETPLACE_AFTER_ORDER_STATUS=2032,t})();var ft=s("tVIE"),Et=s("a9Mt"),St=s("qZ7S");class bt{flush(){return this._type=0,this._duration=0,this._isPermanent=!1,!0}parse(t){return!!t&&(this._type=t.readInt(),this._duration=t.readInt(),this._isPermanent=t.readBoolean(),!0)}get type(){return this._type}get duration(){return this._duration}get isPermanent(){return this._isPermanent}}class vt extends o.a{constructor(t){super(t,bt)}getParser(){return this.parser}}class It{flush(){return this._type=0,this._subType=0,this._duration=0,this._permanent=!1,!0}parse(t){return!!t&&(this._type=t.readInt(),this._subType=t.readInt(),this._duration=t.readInt(),this._permanent=t.readBoolean(),!0)}get type(){return this._type}get _Str_3882(){return this._subType}get duration(){return this._duration}get _Str_4010(){return this._permanent}}class Rt extends o.a{constructor(t){super(t,It)}getParser(){return this.parser}}class Tt{flush(){return this._type=0,!0}parse(t){return!!t&&(this._type=t.readInt(),!0)}get type(){return this._type}}class yt extends o.a{constructor(t){super(t,Tt)}getParser(){return this.parser}}class Ot{get type(){return this._type}set type(t){this._type=t}get _Str_3882(){return this._subType}set _Str_3882(t){this._subType=t}get duration(){return this._duration}set duration(t){this._duration=t}get _Str_18572(){return this._inactiveEffectsInInventory}set _Str_18572(t){this._inactiveEffectsInInventory=t}get _Str_12185(){return this._secondsLeftIfActive}set _Str_12185(t){this._secondsLeftIfActive=t}get _Str_4010(){return this._permanent}set _Str_4010(t){this._permanent=t}}class Ct{flush(){return this._effects=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;){const s=new Ot;s.type=t.readInt(),s._Str_3882=t.readInt(),s.duration=t.readInt(),s._Str_18572=t.readInt(),s._Str_12185=t.readInt(),s._Str_4010=t.readBoolean(),this._effects.push(s),e--}return!0}get effects(){return this._effects}}class At extends o.a{constructor(t){super(t,Ct)}getParser(){return this.parser}}var Mt=s("BIDA"),wt=s("qexY"),Ut=s("feea"),Dt=s("01lY"),Nt=s("1mUs"),Lt=s("5RE+"),Pt=s("ulbO"),xt=s("9loD"),Ft=s("5Cat"),kt=s("Bbk2"),Wt=s("kgJd"),Bt=s("eOyb"),Vt=s("pvKa"),Gt=s("GBA0"),Kt=s("746L"),Ht=s("9Nxx"),jt=s("IVZI"),zt=s("4hT9"),Yt=s("4gvq"),qt=s("uHXo"),Xt=s("8qmW"),Zt=s("iv6j"),Qt=s("8KaG"),Jt=s("lN2i"),$t=s("lrbo"),te=s("sM2B"),ee=s("i+XF"),se=s("SRjU"),ne=s("Fq7D"),ie=s("1GrJ"),re=s("iGiK"),ae=s("w2uK"),oe=s("e2zs"),ce=s("owLk"),le=s("oHxB"),he=s("JDjE"),ue=s("5BHI"),_e=s("443f"),de=s("JCII"),ge=s("vx5b"),me=s("6vif"),pe=s("xycO"),fe=s("c7QS"),Ee=s("V1nr"),Se=s("AKqU"),be=s("QjCb"),ve=s("KJ3T"),Ie=s("4NUc"),Re=s("+LbQ"),Te=s("lDeN"),ye=s("QXLr"),Oe=s("pRZV"),Ce=s("pDhE"),Ae=s("00EK"),Me=s("8lyR"),we=s("HkHk"),Ue=s("Cyol"),De=s("EAxq"),Ne=s("KsdP"),Le=s("AFd5"),Pe=s("qKi6"),xe=s("pIFH"),Fe=s("6etz"),ke=s("fFOI");class We{flush(){return this._chat=null,!0}parse(t){return!!t&&(this._chat=new ke.a(t),!0)}get chat(){return this._chat}}class Be extends o.a{constructor(t){super(t,We)}getParser(){return this.parser}}var Ve=s("10wl"),Ge=s("8lyl"),Ke=s("zRn8");class He{flush(){return this._roomId=0,this._code=0,this._message=null,!0}parse(t){return!!t&&(this._roomId=t.readInt(),this._code=t.readInt(),this._message=t.readString(),!0)}get roomId(){return this._roomId}get code(){return this._code}get message(){return this._message}}class je extends o.a{constructor(t){super(t,He)}getParser(){return this.parser}}var ze=s("yqT3");class Ye{flush(){return this._roomId=0,!0}parse(t){return!!t&&(this._roomId=t.readInt(),!0)}get roomId(){return this._roomId}}class qe extends o.a{constructor(t){super(t,Ye)}getParser(){return this.parser}}var Xe=s("zWsf"),Ze=s("GlfS"),Qe=s("yydM"),Je=s("S5/W"),$e=s("JODW"),ts=s("sR+E"),es=s("zVPj"),ss=s("Wzp3"),ns=s("Ie/D"),is=s("Nakt"),rs=s("Wamt"),as=s("uaI9"),os=s("ArMw"),cs=s("ObWd"),ls=s("10Jd"),hs=s("ipbj"),us=s("BTXg"),_s=s("/icx"),ds=s("QZfg"),gs=s("+IZ6"),ms=s("Xe8L"),ps=s("Njml"),fs=s("v66B"),Es=s("mQ1q"),Ss=s("ebaN"),bs=s("Prlr"),vs=s("bmMM"),Is=s("zTkZ"),Rs=s("lbEV"),Ts=s("CzV9"),ys=s("f1eJ"),Os=s("0LNC"),Cs=s("1QEa"),As=s("HY2+"),Ms=s("bXGL"),ws=s("sRv6"),Us=s("xq+5"),Ds=s("jFxZ"),Ns=s("sCRD"),Ls=s("mGgu"),Ps=s("BVCN"),xs=s("fVO9"),Fs=s("Yx/o"),ks=s("D/zE"),Ws=s("HPzH"),Bs=s("KjXG"),Vs=s("jzpY"),Gs=s("NpwP"),Ks=s("n7CB"),Hs=s("jdh6");class js{flush(){return!0}parse(t){return!!t&&(this._isMuted=t.readBoolean(),!0)}get isMuted(){return this._isMuted}}class zs extends o.a{constructor(t){super(t,js)}getParser(){return this.parser}}var Ys=s("m7hj"),qs=s("WEUE"),Xs=s("9Jti"),Zs=s("XNkd"),Qs=s("Ahnc"),Js=s("nQsh"),$s=s("29Gn");class tn{flush(){return!0}parse(t){return!!t}}class en extends o.a{constructor(t){super(t,tn)}getParser(){return this.parser}}var sn=s("8Dbs"),nn=s("xB90"),rn=s("3md2"),an=s("uMJ2"),on=s("/3sV"),cn=s("Tp0E"),ln=s("9/2a"),hn=s("uHVT"),un=s("Eb1Y"),_n=s("O/2Q"),dn=s("cu+P"),gn=s("2y6h"),mn=s("IRIx"),pn=s("DpKJ"),fn=s("oKt9"),En=s("GJWb"),Sn=s("UufK"),bn=s("rQEl"),vn=s("BG3s"),In=s("2H63"),Rn=s("8ZkN"),Tn=s("Z50b"),yn=s("+gkD"),On=s("yt9a"),Cn=s("3CL9"),An=s("BgaL"),Mn=s("qOv/"),wn=s("AlQl"),Un=s("m5sF"),Dn=s("Up4E"),Nn=s("Wifn"),Ln=s("fPSk"),Pn=s("De5v"),xn=s("E+Qe"),Fn=s("pjvS"),kn=s("NjFb"),Wn=s("6RUH"),Bn=s("SzgH"),Vn=s("OLXM");class Gn{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}var Kn=s("Fcb+");class Hn{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}var jn=s("YQyq"),zn=s("fubZ"),Yn=s("eXwK"),qn=s("4k6Q"),Xn=s("tLSS"),Zn=s("jNJ0");class Qn{constructor(t,...e){this._data=[t,e.length,...e]}getMessageArray(){return this._data}dispose(){}}var Jn=s("FV0X");class $n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}var ti=s("mEdh"),ei=s("xwkN"),si=s("eJ6k"),ni=s("fsQ+"),ii=s("8PZm"),ri=s("ZHGj"),ai=s("LSEE"),oi=s("gEiT"),ci=s("16el"),li=s("KQVX"),hi=s("GBmB"),ui=s("00/2"),_i=s("xAfD"),di=s("o4d6"),gi=s("btSX"),mi=s("C1pE"),pi=s("w+79"),fi=s("NLfn"),Ei=s("0BWK"),Si=s("LWqD"),bi=s("WjEe");class vi{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}var Ii=s("J0cl"),Ri=s("qL7v"),Ti=s("iUEO"),yi=s("TQha"),Oi=s("sGp+"),Ci=s("07Tz"),Ai=s("oe6/"),Mi=s("0EkW"),wi=s("Q612"),Ui=s("porQ"),Di=s("gnch"),Ni=s("zeoL"),Li=s("r7iz"),Pi=s("SylX"),xi=s("aBXB"),Fi=s("H/4j"),ki=s("B62z"),Wi=s("LRPw"),Bi=s("Y1Bc"),Vi=s("q5XJ"),Gi=s("AYkW"),Ki=s("vd+k"),Hi=s("SbyL"),ji=s("DicI"),zi=s("EEQp"),Yi=s("KAV2"),qi=s("vA8V"),Xi=s("V5Lx");class Zi{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}var Qi=s("S8Tn");class Ji{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}var $i=s("UdUS");class tr{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}class er{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}var sr=s("lulp");class nr{constructor(t,e,s,n,i,r){this._data=[t,e,s,n,i,r]}getMessageArray(){return this._data}dispose(){}}let ir=(()=>{class t{}return t.ACHIEVEMENT_LIST=219,t.BOT_CONFIGURATION=1986,t.BOT_PICKUP=3323,t.BOT_PLACE=1592,t.BOT_SKILL_SAVE=2624,t.CAMERA_PRICE=796,t.CAMERA_SAVE=3226,t.CAMERA_THUMBNAIL=1982,t.CATALOG_CLUB=3285,t.CATALOG_CLUB_GIFTS=487,t.CATALOG_MODE=1195,t.CATALOG_PAGE=412,t.CATALOG_PURCHASE=3492,t.CATALOG_PURCHASE_GIFT=1411,t.CATALOG_SEARCH=2594,t.CLIENT_LATENCY=295,t.CLIENT_LATENCY_MEASURE=96,t.CLIENT_POLICY=26979,t.CLIENT_PONG=2596,t.CLIENT_TOOLBAR_TOGGLE=2313,t.CLIENT_VARIABLES=1053,t.DESKTOP_CAMPAIGNS=2912,t.DESKTOP_NEWS=1827,t.DESKTOP_VIEW=105,t.DISCOUNT_CONFIG=223,t.EVENT_TRACKER=3457,t.FIND_FRIENDS=516,t.FURNITURE_ALIASES=3898,t.FURNITURE_FLOOR_UPDATE=248,t.FURNITURE_MULTISTATE=99,t.FURNITURE_PICKUP=3456,t.FURNITURE_PLACE=1258,t.FURNITURE_POSTIT_PLACE=2248,t.FURNITURE_RANDOMSTATE=3617,t.FURNITURE_WALL_MULTISTATE=210,t.FURNITURE_WALL_UPDATE=168,t.GAMES_INIT=2914,t.GAMES_LIST=741,t.GIFT_CONFIG=418,t.GROUP_ADMIN_ADD=2894,t.GROUP_ADMIN_REMOVE=722,t.GROUP_CREATE_OPTIONS=798,t.GROUP_FORUM_INFO=3149,t.GROUP_FORUM_LIST=873,t.GROUP_FORUM_THREADS=436,t.GROUP_INFO=2991,t.GROUP_DELETE=1134,t.GROUP_MEMBER_REMOVE_CONFIRM=3593,t.GROUP_MEMBER_REMOVE=593,t.GROUP_MEMBERS=312,t.GROUP_MEMBERSHIPS=367,t.GROUP_REQUEST=998,t.GROUP_REQUEST_ACCEPT=3386,t.GROUP_REQUEST_DECLINE=1894,t.GROUP_SETTINGS=1004,t.GROUP_PARTS=813,t.GROUP_BUY=230,t.GROUP_SAVE_INFORMATION=3137,t.GROUP_SAVE_BADGE=1991,t.GROUP_SAVE_COLORS=1764,t.GROUP_SAVE_PREFERENCES=3435,t.INVENTORY_UNKNOWN=1371,t.ITEM_CLOTHING_REDEEM=3374,t.ITEM_COLOR_WHEEL_CLICK=2144,t.ITEM_DICE_CLICK=1990,t.ITEM_DICE_CLOSE=1533,t.ITEM_DIMMER_SAVE=1648,t.ITEM_DIMMER_SETTINGS=2813,t.ITEM_DIMMER_TOGGLE=2296,t.ITEM_EXCHANGE_REDEEM=3115,t.ITEM_PAINT=711,t.ITEM_SAVE_BACKGROUND=3608,t.ITEM_STACK_HELPER=3839,t.ITEM_WALL_CLICK=210,t.ITEM_WALL_UPDATE=168,t.MARKETPLACE_CONFIG=2597,t.MESSENGER_ACCEPT=137,t.MESSENGER_CHAT=3567,t.MESSENGER_DECLINE=2890,t.MESSENGER_FOLLOW=3997,t.MESSENGER_FRIENDS=1523,t.MESSENGER_INIT=2781,t.MESSENGER_RELATIONSHIPS=2138,t.MESSENGER_RELATIONSHIPS_UPDATE=3768,t.MESSENGER_REMOVE=1689,t.MESSENGER_REQUEST=3157,t.MESSENGER_REQUESTS=2448,t.MESSENGER_ROOM_INVITE=1276,t.MESSENGER_SEARCH=1210,t.MESSENGER_UPDATES=1419,t.MOD_TOOL_USER_INFO=3295,t.NAVIGATOR_CATEGORIES=3027,t.NAVIGATOR_INIT=2110,t.NAVIGATOR_SEARCH=249,t.NAVIGATOR_SEARCH_CLOSE=1834,t.NAVIGATOR_SEARCH_OPEN=637,t.NAVIGATOR_SEARCH_SAVE=2226,t.NAVIGATOR_SETTINGS=1782,t.NAVIGATOR_SETTINGS_SAVE=3159,t.NAVIGATOR_CATEGORY_LIST_MODE=1202,t.PET_INFO=2934,t.PET_PICKUP=1581,t.PET_PLACE=2647,t.PET_RESPECT=3202,t.PET_RIDE=1036,t.PET_MOVE=3449,t.RECYCLER_PRIZES=398,t.RELEASE_VERSION=4e3,t.REPORT=1691,t.ROOM_AMBASSADOR_ALERT=2996,t.ROOM_BAN_GIVE=1477,t.ROOM_BAN_LIST=2267,t.ROOM_BAN_REMOVE=992,t.ROOM_CREATE=2752,t.ROOM_DELETE=532,t.ROOM_DOORBELL=1644,t.ROOM_ENTER=2312,t.ROOM_FAVORITE=3817,t.ROOM_FAVORITE_REMOVE=309,t.ROOM_INFO=2230,t.ROOM_KICK=1320,t.ROOM_LIKE=3582,t.ROOM_MODEL=2300,t.ROOM_MODEL_BLOCKED_TILES=1687,t.ROOM_MODEL_DOOR=3559,t.ROOM_MODEL_SAVE=875,t.ROOM_MUTE=3637,t.ROOM_MUTE_USER=3485,t.ROOM_RIGHTS_GIVE=808,t.ROOM_RIGHTS_LIST=3385,t.ROOM_RIGHTS_REMOVE=2064,t.ROOM_RIGHTS_REMOVE_ALL=2683,t.ROOM_RIGHTS_REMOVE_OWN=3182,t.ROOM_SETTINGS=3129,t.ROOM_SETTINGS_SAVE=1969,t.ROOM_STAFF_PICK=1918,t.SECURITY_MACHINE=2490,t.SECURITY_TICKET=2419,t.TRADE=1481,t.TRADE_ACCEPT=3863,t.TRADE_CANCEL=2341,t.TRADE_CLOSE=2551,t.TRADE_CONFIRM=2760,t.TRADE_ITEM=3107,t.TRADE_ITEM_REMOVE=3845,t.TRADE_ITEMS=1263,t.TRADE_UNACCEPT=1444,t.UNIT_ACTION=2456,t.UNIT_CHAT=1314,t.UNIT_CHAT_SHOUT=2085,t.UNIT_CHAT_WHISPER=1543,t.UNIT_DANCE=2080,t.UNIT_DROP_HAND_ITEM=2814,t.UNIT_GIVE_HANDITEM=2941,t.UNIT_LOOK=3301,t.UNIT_POSTURE=2235,t.UNIT_SIGN=1975,t.UNIT_TYPING=1597,t.UNIT_TYPING_STOP=1474,t.UNIT_WALK=3320,t.USER_BADGES=2769,t.USER_BADGES_CURRENT=2091,t.USER_BADGES_CURRENT_UPDATE=644,t.USER_BOTS=3848,t.USER_CURRENCY=273,t.USER_EFFECT_ACTIVATE=2959,t.USER_EFFECT_ENABLE=1752,t.USER_FIGURE=2730,t.USER_FURNITURE=3150,t.USER_FURNITURE2=3500,t.USER_HOME_ROOM=1740,t.USER_INFO=357,t.USER_MOTTO=2228,t.USER_IGNORED=3878,t.USER_OUTFIT_SAVE=800,t.USER_OUTFITS=2742,t.USER_PETS=3095,t.USER_PROFILE=3265,t.USER_RESPECT=2694,t.USER_SETTINGS=2388,t.USER_SETTINGS_CAMERA=1461,t.USER_SETTINGS_CHAT_STYLE=1030,t.USER_SETTINGS_INVITES=1086,t.USER_SETTINGS_OLD_CHAT=1262,t.USER_SETTINGS_VOLUME=1367,t.USER_SUBSCRIPTION=3166,t.USER_WARDROBE_PAGE=2742,t.USER_WARDROBE_SAVE=800,t.USER_TAGS=17,t.USER_VISIT=2970,t.WIRED_ACTION_SAVE=2281,t.WIRED_APPLY_SNAPSHOT=3373,t.WIRED_CONDITION_SAVE=3203,t.WIRED_OPEN=768,t.WIRED_TRIGGER_SAVE=1520,t.GET_ITEM_DATA=3964,t.ONE_WAY_DOOR_CLICK=2765,t.REMOVE_WALL_ITEM=3336,t.MODIFY_WALL_ITEM_DATA=3666,t.CATALOG_REDEEM_VOUCHER=339,t.ROOM_TONER_APPLY=2880,t.LOVELOCK_START_CONFIRM=3775,t.MANNEQUIN_SAVE_NAME=2850,t.MANNEQUIN_SAVE_LOOK=2209,t.PRESENT_OPEN_PRESENT=3558,t.CATALOG_SELECT_VIP_GIFT=2276,t.USER_IGNORE_ID=3314,t.USER_IGNORE=1117,t.USER_UNIGNORE=2061,t.MODTOOL_REQUEST_ROOM_INFO=707,t.MODTOOL_CHANGE_ROOM_SETTINGS=3260,t.MODTOOL_REQUEST_USER_CHATLOG=1391,t.MODTOOL_REQUEST_ROOM_CHATLOG=2587,t.MODTOOL_SANCTION_ALERT=229,t.MODTOOL_SANCTION_BAN=2766,t.MODTOOL_SANCTION_KICK=2582,t.MODTOOL_SANCTION_TRADELOCK=3742,t.MODTOOL_ALERTEVENT=1840,t.MODTOOL_SANCTION_MUTE=1945,t.MODTOOL_REQUEST_USER_ROOMS=3526,t.MODTOOL_ROOM_ALERT=3842,t.CONVERT_GLOBAL_ROOM_ID=314,t.REQUEST_SELL_ITEM=848,t.REQUEST_MARKETPLACE_ITEM_STATS=3288,t.MARKETPLACE_SELL_ITEM=3447,t.MARKETPLACE_REQUEST_OWN_ITEMS=2105,t.MARKETPLACE_TAKE_BACK_ITEM=434,t.MARKETPLACE_REDEEM_CREDITS=2650,t.MARKETPLACE_REQUEST_OFFERS=2407,t.MARKETPLACE_BUY_OFFER=1603,t})();var rr=s("itFj"),ar=s("CsHF"),or=s("tfDB"),cr=s("5TOT"),lr=s("LKhd"),hr=s("j8oG"),ur=s("nlEz"),_r=s("QZVO"),dr=s("4hNi"),gr=s("kRfe"),mr=s("J4cl"),pr=s("GFvZ"),fr=s("0qJb"),Er=s("mHKk"),Sr=s("lsmK"),br=s("Mixc"),vr=s("9RxG"),Ir=s("YTIQ"),Rr=s("h5lc"),Tr=s("Oh4I"),yr=s("SULm"),Or=s("V2Y4"),Cr=s("YQxP"),Ar=s("h2l6"),Mr=s("+ana"),wr=s("toFP"),Ur=s("+LxV"),Dr=s("Poml"),Nr=s("7d3m"),Lr=s("X+hw"),Pr=s("p0wa"),xr=s("2Rep"),Fr=s("YlMy"),kr=s("Sb1T"),Wr=s("4Yln"),Br=s("jgc/"),Vr=s("+/WI"),Gr=s("bmkm"),Kr=s("PSU1"),Hr=s("PJYa"),jr=s("fuks"),zr=s("Nd6c"),Yr=s("6X5G"),qr=s("v1R/"),Xr=s("jdue"),Zr=s("gHKk"),Qr=s("OGjZ"),Jr=s("wSNj"),$r=s("AAYK"),ta=s("o1ML"),ea=s("q25d"),sa=s("vUGd"),na=s("AzHa"),ia=s("wyCi"),ra=s("r2VG"),aa=s("yAmi"),oa=s("rlQL"),ca=s("4R/C"),la=s("VYTg"),ha=s("Aavw"),ua=s("OxVo"),_a=s("enVn"),da=s("gnow"),ga=s("UJeg"),ma=s("lMbP"),pa=s("j7GY"),fa=s("ekex"),Ea=s("pGYl"),Sa=s("0DoP"),ba=s("hFyr"),va=s("Gb7F"),Ia=s("kiCC"),Ra=s("qXDh");class Ta{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}class ya{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}var Oa=s("gegF"),Ca=s("amIx"),Aa=s("Yp13"),Ma=s("FXkd"),wa=s("oc9L"),Ua=s("iQVN"),Da=s("7KS0"),Na=s("Sfl4"),La=s("nMRu"),Pa=s("rbNg");class xa{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}var Fa=s("o4p4"),ka=s("4pnK"),Wa=s("75Vd"),Ba=s("zIYo");class Va{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}var Ga=s("RH6c"),Ka=s("hUfz"),Ha=s("SqPf"),ja=s("asTc"),za=s("dmof"),Ya=s("+lr5"),qa=s("w9Dd"),Xa=s("0/8l");class Za{constructor(){this._events=new Map,this._composers=new Map,this.registerEvents(),this.registerComposers()}registerEvents(){this._events.set(pt.AVAILABILITY_STATUS,b.a),this._events.set(pt.GENERIC_ERROR,ct.a),this._events.set(pt.USER_CHANGE_NAME,v.a),this._events.set(pt.CATALOG_CLUB,I.a),this._events.set(pt.CATALOG_MODE,C.a),this._events.set(pt.CATALOG_PAGE,A.a),this._events.set(pt.CATALOG_PAGES,M.a),this._events.set(pt.CATALOG_PURCHASE,w.a),this._events.set(pt.CATALOG_PURCHASE_FAILED,U.a),this._events.set(pt.CATALOG_PURCHASE_UNAVAILABLE,D.a),this._events.set(pt.CATALOG_SEARCH,P.a),this._events.set(pt.CATALOG_SOLD_OUT,x.a),this._events.set(pt.CATALOG_UPDATED,F.a),this._events.set(pt.CATALOG_CLUB_GIFTS,R.a),this._events.set(pt.GROUP_LIST,O.a),this._events.set(pt.GIFT_CONFIG,T.a),this._events.set(pt.REDEEM_VOUCHER_ERROR,N.a),this._events.set(pt.REDEEM_VOUCHER_OK,L.a),this._events.set(pt.CLIENT_PING,l),this._events.set(pt.DESKTOP_VIEW,H.a),this._events.set(pt.MESSENGER_ACCEPT_FRIENDS,j.a),this._events.set(pt.MESSENGER_FIND_FRIENDS,z.a),this._events.set(pt.MESSENGER_FOLLOW_FAILED,Y.a),this._events.set(pt.MESSENGER_FRIENDS,q.a),this._events.set(pt.MESSENGER_UPDATE,X.a),this._events.set(pt.MESSENGER_FRIEND_NOTIFICATION,Z.a),this._events.set(pt.MESSENGER_REQUESTS,Q.a),this._events.set(pt.MESSENGER_SEARCH,J.a),this._events.set(pt.MESSENGER_INSTANCE_MESSAGE_ERROR,$.a),this._events.set(pt.MESSENGER_MESSAGE_ERROR,tt.a),this._events.set(pt.MESSENGER_INIT,et.a),this._events.set(pt.MESSENGER_MINIMAIL_NEW,st.a),this._events.set(pt.MESSENGER_MINIMAIL_COUNT,Xa.a),this._events.set(pt.MESSENGER_CHAT,nt.a),this._events.set(pt.MESSENGER_REQUEST,it.a),this._events.set(pt.MESSENGER_INVITE_ERROR,rt.a),this._events.set(pt.MESSENGER_INVITE,at.a),this._events.set(pt.GROUP_INFO,_t.a),this._events.set(pt.GROUP_MEMBER_REMOVE_CONFIRM,ut.a),this._events.set(pt.GROUP_MEMBERS,dt.a),this._events.set(pt.GROUP_CREATE_OPTIONS,ht.a),this._events.set(pt.GROUP_BADGE_PARTS,lt.a),this._events.set(pt.GROUP_SETTINGS,gt.a),this._events.set(pt.CFH_RESULT_MESSAGE,mt.a),this._events.set(pt.ACHIEVEMENT_PROGRESSED,ft.a),this._events.set(pt.ACHIEVEMENT_LIST,Et.a),this._events.set(pt.USER_ACHIEVEMENT_SCORE,St.a),this._events.set(pt.USER_EFFECT_ACTIVATE,vt),this._events.set(pt.USER_EFFECT_LIST_ADD,Rt),this._events.set(pt.USER_EFFECT_LIST_REMOVE,yt),this._events.set(pt.USER_EFFECT_LIST,At),this._events.set(pt.USER_CLOTHING,Nt.a),this._events.set(pt.USER_FURNITURE_ADD,Lt.a),this._events.set(pt.USER_FURNITURE,Pt.a),this._events.set(pt.USER_FURNITURE_REFRESH,xt.a),this._events.set(pt.USER_FURNITURE_REMOVE,Ft.a),this._events.set(pt.USER_FURNITURE_POSTIT_PLACED,kt.a),this._events.set(pt.TRADE_ACCEPTED,jt.a),this._events.set(pt.TRADE_CLOSED,zt.a),this._events.set(pt.TRADE_COMPLETED,Yt.a),this._events.set(pt.TRADE_CONFIRMATION,qt.a),this._events.set(pt.TRADE_LIST_ITEM,Xt.a),this._events.set(pt.TRADE_NOT_OPEN,Zt.a),this._events.set(pt.TRADE_OPEN_FAILED,Jt.a),this._events.set(pt.TRADE_OPEN,Qt.a),this._events.set(pt.TRADE_OTHER_NOT_ALLOWED,$t.a),this._events.set(pt.TRADE_YOU_NOT_ALLOWED,te.a),this._events.set(pt.GENERIC_ALERT_LINK,ee.a),this._events.set(pt.MODTOOL_ROOM_INFO,ae.a),this._events.set(pt.MODTOOL_USER_CHATLOG,oe.a),this._events.set(pt.MODTOOL_ROOM_CHATLOG,re.a),this._events.set(pt.NAVIGATOR_CATEGORIES,le.a),this._events.set(pt.NAVIGATOR_COLLAPSED,he.a),this._events.set(pt.NAVIGATOR_EVENT_CATEGORIES,ue.a),this._events.set(pt.USER_HOME_ROOM,_e.a),this._events.set(pt.NAVIGATOR_LIFTED,de.a),this._events.set(pt.NAVIGATOR_METADATA,ge.a),this._events.set(pt.NAVIGATOR_OPEN_ROOM_CREATOR,me.a),this._events.set(pt.NAVIGATOR_SEARCHES,pe.a),this._events.set(pt.NAVIGATOR_SEARCH,fe.a),this._events.set(pt.NAVIGATOR_SETTINGS,Ee.a),this._events.set(pt.GENERIC_ALERT,be.a),this._events.set(pt.MOTD_MESSAGES,Ie.a),this._events.set(pt.NOTIFICATION_LIST,Re.a),this._events.set(pt.USER_RESPECT,ye.a),this._events.set(pt.UNSEEN_ITEMS,Oe.a),this._events.set(pt.HOTEL_WILL_SHUTDOWN,ve.a),this._events.set(pt.ROOM_ENTER_ERROR,Ne.a),this._events.set(pt.ROOM_ENTER,Le.a),this._events.set(pt.ROOM_FORWARD,Pe.a),this._events.set(pt.ROOM_DOORBELL,Ae.a),this._events.set(pt.ROOM_DOORBELL_ACCEPTED,Ce.a),this._events.set(pt.ROOM_DOORBELL_REJECTED,Me.a),this._events.set(pt.ROOM_RIGHTS_CLEAR,we.a),this._events.set(pt.ROOM_RIGHTS_OWNER,De.a),this._events.set(pt.ROOM_RIGHTS,Ue.a),this._events.set(pt.ROOM_SETTINGS_CHAT,Be),this._events.set(pt.ROOM_INFO,Ve.a),this._events.set(pt.ROOM_INFO_OWNER,Ge.a),this._events.set(pt.ROOM_SCORE,Ke.a),this._events.set(pt.ROOM_SETTINGS_SAVE_ERROR,je),this._events.set(pt.ROOM_SETTINGS,ze.a),this._events.set(pt.ROOM_SETTINGS_SAVE,qe),this._events.set(pt.ROOM_SETTINGS_UPDATED,Xe.a),this._events.set(pt.ROOM_RIGHTS_LIST,Ze.a),this._events.set(pt.ROOM_BAN_LIST,Fe.a),this._events.set(pt.ROOM_ROLLING,Qe.a),this._events.set(pt.ROOM_CREATED,Je.a),this._events.set(pt.BOT_COMMAND_CONFIGURATION,xe.a),this._events.set(pt.BOT_ERROR,Se.a),this._events.set(pt.FURNITURE_ALIASES,ns.a),this._events.set(pt.FURNITURE_DATA,is.a),this._events.set(pt.FURNITURE_ITEMDATA,rs.a),this._events.set(pt.ITEM_STACK_HELPER,as.a),this._events.set(pt.FURNITURE_STATE,cs.a),this._events.set(pt.ITEM_DIMMER_SETTINGS,_s.a),this._events.set(pt.FURNITURE_STATE_2,os.a),this._events.set(pt.LOVELOCK_FURNI_FINISHED,ls.a),this._events.set(pt.LOVELOCK_FURNI_FRIEND_COMFIRMED,hs.a),this._events.set(pt.LOVELOCK_FURNI_START,us.a),this._events.set(pt.FURNITURE_FLOOR_ADD,$e.a),this._events.set(pt.FURNITURE_FLOOR,ts.a),this._events.set(pt.FURNITURE_FLOOR_REMOVE,es.a),this._events.set(pt.FURNITURE_FLOOR_UPDATE,ss.a),this._events.set(pt.ITEM_WALL_ADD,ds.a),this._events.set(pt.ITEM_WALL,gs.a),this._events.set(pt.ITEM_WALL_REMOVE,ms.a),this._events.set(pt.ITEM_WALL_UPDATE,ps.a),this._events.set(pt.ROOM_MODEL_DOOR,Es.a),this._events.set(pt.ROOM_HEIGHT_MAP,Ss.a),this._events.set(pt.ROOM_HEIGHT_MAP_UPDATE,bs.a),this._events.set(pt.ROOM_MODEL,vs.a),this._events.set(pt.ROOM_MODEL_NAME,Is.a),this._events.set(pt.ROOM_PAINT,Rs.a),this._events.set(pt.ROOM_THICKNESS,Ts.a),this._events.set(pt.ROOM_MODEL_BLOCKED_TILES,fs.a),this._events.set(pt.PET_FIGURE_UPDATE,ys.a),this._events.set(pt.PET_INFO,Os.a),this._events.set(pt.PLAYING_GAME,Cs.a),this._events.set(pt.UNIT_DANCE,Ls.a),this._events.set(pt.UNIT_EFFECT,Ps.a),this._events.set(pt.UNIT,xs.a),this._events.set(pt.UNIT_EXPRESSION,Fs.a),this._events.set(pt.UNIT_HAND_ITEM,ks.a),this._events.set(pt.UNIT_IDLE,Bs.a),this._events.set(pt.UNIT_INFO,Vs.a),this._events.set(pt.UNIT_NUMBER,Gs.a),this._events.set(pt.UNIT_REMOVE,Ks.a),this._events.set(pt.UNIT_STATUS,Hs.a),this._events.set(pt.HAND_ITEM_RECEIVED,Ws.a),this._events.set(pt.FLOOD_CONTROL,As.a),this._events.set(pt.REMAINING_MUTE,Ms.a),this._events.set(pt.UNIT_CHAT,ws.a),this._events.set(pt.UNIT_CHAT_SHOUT,Us.a),this._events.set(pt.UNIT_CHAT_WHISPER,Ds.a),this._events.set(pt.UNIT_TYPING,Ns.a),this._events.set(pt.WIRED_ACTION,Ys.a),this._events.set(pt.WIRED_CONDITION,qs.a),this._events.set(pt.WIRED_TRIGGER,Xs.a),this._events.set(pt.WIRED_OPEN,Zs.a),this._events.set(pt.WIRED_REWARD,Qs.a),this._events.set(pt.WIRED_SAVE,Js.a),this._events.set(pt.WIRED_ERROR,$s.a),this._events.set(pt.ROOM_MUTED,zs),this._events.set(pt.AUTHENTICATED,u),this._events.set(pt.IN_CLIENT_LINK,dn.a),this._events.set(pt.USER_IGNORED,un.a),this._events.set(pt.USER_IGNORED_RESULT,_n.a),this._events.set(pt.USER_BADGES,Mt.a),this._events.set(pt.USER_PERKS,en),this._events.set(pt.USER_PERMISSIONS,sn.a),this._events.set(pt.USER_BADGES_CURRENT,nn.a),this._events.set(pt.USER_FIGURE,rn.a),this._events.set(pt.USER_INFO,an.a),this._events.set(pt.UNIT_CHANGE_NAME,on.a),this._events.set(pt.USER_SETTINGS,hn.a),this._events.set(pt.USER_PROFILE,cn.a),this._events.set(pt.MESSENGER_RELATIONSHIPS,ln.a),this._events.set(pt.GIFT_OPENED,Wt.a),this._events.set(pt.GIFT_RECEIVER_NOT_FOUND,y.a),this._events.set(pt.USER_BOTS,Ut.a),this._events.set(pt.REMOVE_BOT_FROM_INVENTORY,Dt.a),this._events.set(pt.ADD_BOT_TO_INVENTORY,wt.a),this._events.set(pt.USER_CREDITS,gn.a),this._events.set(pt.USER_CURRENCY,mn.a),this._events.set(pt.USER_CURRENCY_UPDATE,pn.a),this._events.set(pt.USER_SUBSCRIPTION,fn.a),this._events.set(pt.LOAD_GAME_URL,ot.a),this._events.set(pt.USER_WARDROBE_PAGE,En.a),this._events.set(pt.USER_PETS,Kt.a),this._events.set(pt.USER_PET_REMOVE,Ht.a),this._events.set(pt.USER_PET_ADD,Gt.a),this._events.set(pt.PET_PLACING_ERROR,Te.a),this._events.set(pt.MODERATION_USER_INFO,ce.a),this._events.set(pt.MODERATION_TOPICS,se.a),this._events.set(pt.MODERATION_TOOL,ne.a),this._events.set(pt.MODTOOL_VISITED_ROOMS_USER,ie.a),this._events.set(pt.MARKETPLACE_SELL_ITEM,Vt.a),this._events.set(pt.MARKETPLACE_CONFIG,G.a),this._events.set(pt.MARKETPLACE_ITEM_STATS,K.a),this._events.set(pt.MARKETPLACE_OWN_ITEMS,V.a),this._events.set(pt.MARKETPLACE_CANCEL_SALE,W.a),this._events.set(pt.MARKETPLACE_ITEM_POSTED,Bt.a),this._events.set(pt.MARKETPLACE_ITEMS_SEARCHED,B.a),this._events.set(pt.MARKETPLACE_AFTER_ORDER_STATUS,k.a)}registerComposers(){this._composers.set(ir.CATALOG_MODE,vn.a),this._composers.set(ir.CATALOG_PAGE,In.a),this._composers.set(ir.CATALOG_PURCHASE,Rn.a),this._composers.set(ir.CATALOG_PURCHASE_GIFT,Tn.a),this._composers.set(ir.CATALOG_SEARCH,An.a),this._composers.set(ir.CATALOG_CLUB,Cn.a),this._composers.set(ir.CATALOG_CLUB_GIFTS,On.a),this._composers.set(ir.CATALOG_REDEEM_VOUCHER,kn.a),this._composers.set(ir.LOVELOCK_START_CONFIRM,$r.a),this._composers.set(ir.GROUP_MEMBERSHIPS,bn.a),this._composers.set(ir.GIFT_CONFIG,yn.a),this._composers.set(ir.CATALOG_SELECT_VIP_GIFT,Mn.a),this._composers.set(ir.CLIENT_PONG,_),this._composers.set(ir.RELEASE_VERSION,m),this._composers.set(ir.DESKTOP_VIEW,Wn.a),this._composers.set(ir.MESSENGER_ACCEPT,Bn.a),this._composers.set(ir.MESSENGER_DECLINE,Vn.a),this._composers.set(ir.FIND_FRIENDS,Gn),this._composers.set(ir.MESSENGER_FOLLOW,Kn.a),this._composers.set(ir.MESSENGER_UPDATES,Hn),this._composers.set(ir.MESSENGER_REQUESTS,jn.a),this._composers.set(ir.MESSENGER_SEARCH,zn.a),this._composers.set(ir.MESSENGER_INIT,Yn.a),this._composers.set(ir.MESSENGER_REMOVE,qn.a),this._composers.set(ir.MESSENGER_REQUEST,Xn.a),this._composers.set(ir.MESSENGER_CHAT,Zn.a),this._composers.set(ir.MESSENGER_ROOM_INVITE,Qn),this._composers.set(ir.MESSENGER_RELATIONSHIPS_UPDATE,Jn.a),this._composers.set(ir.USER_VISIT,$n),this._composers.set(ir.GROUP_INFO,oi.a),this._composers.set(ir.GROUP_REQUEST,ci.a),this._composers.set(ir.GROUP_MEMBER_REMOVE_CONFIRM,ri.a),this._composers.set(ir.GROUP_MEMBER_REMOVE,_i.a),this._composers.set(ir.GROUP_MEMBERS,li.a),this._composers.set(ir.GROUP_ADMIN_ADD,ti.a),this._composers.set(ir.GROUP_ADMIN_REMOVE,ei.a),this._composers.set(ir.GROUP_REQUEST_ACCEPT,hi.a),this._composers.set(ir.GROUP_REQUEST_DECLINE,ui.a),this._composers.set(ir.GROUP_DELETE,ai.a),this._composers.set(ir.GROUP_CREATE_OPTIONS,ii.a),this._composers.set(ir.GROUP_PARTS,si.a),this._composers.set(ir.GROUP_BUY,ni.a),this._composers.set(ir.GROUP_SETTINGS,fi.a),this._composers.set(ir.GROUP_SAVE_BADGE,di.a),this._composers.set(ir.GROUP_SAVE_COLORS,gi.a),this._composers.set(ir.GROUP_SAVE_INFORMATION,mi.a),this._composers.set(ir.GROUP_SAVE_PREFERENCES,pi.a),this._composers.set(ir.SECURITY_TICKET,f),this._composers.set(ir.USER_INFO,p),this._composers.set(ir.NAVIGATOR_CATEGORIES,Xi.a),this._composers.set(ir.NAVIGATOR_INIT,Qi.a),this._composers.set(ir.NAVIGATOR_SEARCH_CLOSE,Ji),this._composers.set(ir.NAVIGATOR_SEARCH,$i.a),this._composers.set(ir.NAVIGATOR_SEARCH_OPEN,tr),this._composers.set(ir.NAVIGATOR_SEARCH_SAVE,er),this._composers.set(ir.NAVIGATOR_SETTINGS,sr.a),this._composers.set(ir.NAVIGATOR_SETTINGS_SAVE,nr),this._composers.set(ir.NAVIGATOR_CATEGORY_LIST_MODE,Zi),this._composers.set(ir.CONVERT_GLOBAL_ROOM_ID,qi.a),this._composers.set(ir.REQUEST_SELL_ITEM,Ti.a),this._composers.set(ir.REQUEST_MARKETPLACE_ITEM_STATS,Dn.a),this._composers.set(ir.MARKETPLACE_REDEEM_CREDITS,Un.a),this._composers.set(ir.USER_FURNITURE,Ii.a),this._composers.set(ir.USER_FURNITURE2,vi),this._composers.set(ir.ITEM_SAVE_BACKGROUND,Lr.a),this._composers.set(ir.TRADE_ACCEPT,Oi.a),this._composers.set(ir.TRADE_CANCEL,Ci.a),this._composers.set(ir.TRADE_CLOSE,Ai.a),this._composers.set(ir.TRADE_CONFIRM,Mi.a),this._composers.set(ir.TRADE_ITEM,wi.a),this._composers.set(ir.TRADE_ITEMS,Ui.a),this._composers.set(ir.TRADE_ITEM_REMOVE,Di.a),this._composers.set(ir.TRADE,Ni.a),this._composers.set(ir.TRADE_UNACCEPT,Li.a),this._composers.set(ir.ACHIEVEMENT_LIST,Sn.a),this._composers.set(ir.PET_RESPECT,rr.a),this._composers.set(ir.PET_INFO,ar.a),this._composers.set(ir.ROOM_CREATE,la.a),this._composers.set(ir.ROOM_ENTER,cr.a),this._composers.set(ir.ROOM_DOORBELL,or.a),this._composers.set(ir.ROOM_AMBASSADOR_ALERT,lr.a),this._composers.set(ir.ROOM_BAN_GIVE,hr.a),this._composers.set(ir.ROOM_BAN_REMOVE,Er.a),this._composers.set(ir.ROOM_RIGHTS_GIVE,_r.a),this._composers.set(ir.ROOM_KICK,dr.a),this._composers.set(ir.ROOM_MUTE_USER,mr.a),this._composers.set(ir.ROOM_RIGHTS_REMOVE,fr.a),this._composers.set(ir.ROOM_LIKE,gr.a),this._composers.set(ir.ROOM_DELETE,ur.a),this._composers.set(ir.ROOM_STAFF_PICK,pr.a),this._composers.set(ir.ROOM_INFO,vr.a),this._composers.set(ir.ROOM_SETTINGS,Ir.a),this._composers.set(ir.ROOM_SETTINGS_SAVE,Tr.a),this._composers.set(ir.ROOM_RIGHTS_LIST,Rr.a),this._composers.set(ir.ROOM_BAN_LIST,br.a),this._composers.set(ir.BOT_CONFIGURATION,Sr.a),this._composers.set(ir.GET_ITEM_DATA,Ar.a),this._composers.set(ir.REMOVE_WALL_ITEM,Nr.a),this._composers.set(ir.MODIFY_WALL_ITEM_DATA,Mr.a),this._composers.set(ir.BOT_PLACE,yr.a),this._composers.set(ir.BOT_PICKUP,Or.a),this._composers.set(ir.BOT_SKILL_SAVE,Cr.a),this._composers.set(ir.PET_PLACE,Ur.a),this._composers.set(ir.PET_MOVE,wr.a),this._composers.set(ir.PET_PICKUP,Dr.a),this._composers.set(ir.FURNITURE_ALIASES,Wr.a),this._composers.set(ir.FURNITURE_PICKUP,Br.a),this._composers.set(ir.FURNITURE_PLACE,Vr.a),this._composers.set(ir.ITEM_PAINT,Gr.a),this._composers.set(ir.FURNITURE_POSTIT_PLACE,Kr.a),this._composers.set(ir.FURNITURE_FLOOR_UPDATE,kr.a),this._composers.set(ir.FURNITURE_WALL_UPDATE,ia.a),this._composers.set(ir.ITEM_DIMMER_SETTINGS,Pr.a),this._composers.set(ir.ITEM_DIMMER_SAVE,xr.a),this._composers.set(ir.ITEM_DIMMER_TOGGLE,Fr.a),this._composers.set(ir.ROOM_TONER_APPLY,na.a),this._composers.set(ir.ITEM_COLOR_WHEEL_CLICK,Hr.a),this._composers.set(ir.ITEM_DICE_CLICK,jr.a),this._composers.set(ir.ITEM_DICE_CLOSE,zr.a),this._composers.set(ir.FURNITURE_MULTISTATE,qr.a),this._composers.set(ir.FURNITURE_RANDOMSTATE,Zr.a),this._composers.set(ir.ITEM_STACK_HELPER,Qr.a),this._composers.set(ir.FURNITURE_WALL_MULTISTATE,Jr.a),this._composers.set(ir.ONE_WAY_DOOR_CLICK,Xr.a),this._composers.set(ir.ITEM_EXCHANGE_REDEEM,Yr.a),this._composers.set(ir.ITEM_CLOTHING_REDEEM,Fn.a),this._composers.set(ir.ROOM_MODEL,oa.a),this._composers.set(ir.ROOM_MODEL_BLOCKED_TILES,ra.a),this._composers.set(ir.ROOM_MODEL_DOOR,aa.a),this._composers.set(ir.ROOM_MODEL_SAVE,ca.a),this._composers.set(ir.UNIT_ACTION,pa.a),this._composers.set(ir.UNIT_DANCE,fa.a),this._composers.set(ir.UNIT_DROP_HAND_ITEM,Ea.a),this._composers.set(ir.UNIT_GIVE_HANDITEM,Sa.a),this._composers.set(ir.UNIT_LOOK,ba.a),this._composers.set(ir.UNIT_SIGN,Ia.a),this._composers.set(ir.UNIT_POSTURE,va.a),this._composers.set(ir.UNIT_WALK,Ra.a),this._composers.set(ir.UNIT_CHAT,ha.a),this._composers.set(ir.UNIT_CHAT_SHOUT,ua.a),this._composers.set(ir.USER_SETTINGS_CHAT_STYLE,_a.a),this._composers.set(ir.UNIT_CHAT_WHISPER,da.a),this._composers.set(ir.UNIT_TYPING,ga.a),this._composers.set(ir.UNIT_TYPING_STOP,ma.a),this._composers.set(ir.WIRED_APPLY_SNAPSHOT,Ta),this._composers.set(ir.WIRED_OPEN,ya),this._composers.set(ir.WIRED_ACTION_SAVE,Ca.a),this._composers.set(ir.WIRED_CONDITION_SAVE,Aa.a),this._composers.set(ir.WIRED_TRIGGER_SAVE,Ma.a),this._composers.set(ir.ROOM_MUTE,Oa.a),this._composers.set(ir.USER_RESPECT,za.a),this._composers.set(ir.USER_IGNORED,wa.a),this._composers.set(ir.USER_IGNORE,Ua.a),this._composers.set(ir.USER_IGNORE_ID,Da.a),this._composers.set(ir.USER_UNIGNORE,Na.a),this._composers.set(ir.USER_BADGES_CURRENT,La.a),this._composers.set(ir.USER_FIGURE,Pa.a),this._composers.set(ir.USER_HOME_ROOM,xa),this._composers.set(ir.USER_MOTTO,Fa.a),this._composers.set(ir.USER_PROFILE,ka.a),this._composers.set(ir.MESSENGER_RELATIONSHIPS,Wa.a),this._composers.set(ir.MANNEQUIN_SAVE_NAME,ea.a),this._composers.set(ir.MANNEQUIN_SAVE_LOOK,ta.a),this._composers.set(ir.PRESENT_OPEN_PRESENT,sa.a),this._composers.set(ir.MARKETPLACE_CONFIG,Nn.a),this._composers.set(ir.MARKETPLACE_SELL_ITEM,Ri.a),this._composers.set(ir.MARKETPLACE_REQUEST_OWN_ITEMS,Pn.a),this._composers.set(ir.MARKETPLACE_TAKE_BACK_ITEM,xn.a),this._composers.set(ir.MARKETPLACE_REQUEST_OFFERS,Ln.a),this._composers.set(ir.MARKETPLACE_BUY_OFFER,wn.a),this._composers.set(ir.USER_BOTS,bi.a),this._composers.set(ir.USER_BADGES,Ei.a),this._composers.set(ir.USER_BADGES_CURRENT_UPDATE,Si.a),this._composers.set(ir.USER_PETS,yi.a),this._composers.set(ir.USER_CURRENCY,Ba.a),this._composers.set(ir.USER_SUBSCRIPTION,Va),this._composers.set(ir.MODTOOL_REQUEST_ROOM_INFO,ki.a),this._composers.set(ir.MODTOOL_CHANGE_ROOM_SETTINGS,Pi.a),this._composers.set(ir.MODTOOL_REQUEST_USER_CHATLOG,Wi.a),this._composers.set(ir.MODTOOL_REQUEST_ROOM_CHATLOG,Fi.a),this._composers.set(ir.MOD_TOOL_USER_INFO,Bi.a),this._composers.set(ir.MODTOOL_SANCTION_ALERT,Ki.a),this._composers.set(ir.MODTOOL_SANCTION_BAN,Hi.a),this._composers.set(ir.MODTOOL_SANCTION_KICK,ji.a),this._composers.set(ir.MODTOOL_SANCTION_TRADELOCK,Yi.a),this._composers.set(ir.MODTOOL_ALERTEVENT,xi.a),this._composers.set(ir.MODTOOL_SANCTION_MUTE,zi.a),this._composers.set(ir.MODTOOL_REQUEST_USER_ROOMS,Vi.a),this._composers.set(ir.MODTOOL_ROOM_ALERT,Gi.a),this._composers.set(ir.USER_WARDROBE_PAGE,Ya.a),this._composers.set(ir.USER_WARDROBE_SAVE,qa.a),this._composers.set(ir.USER_SETTINGS_CAMERA,Ga.a),this._composers.set(ir.USER_SETTINGS_OLD_CHAT,Ka.a),this._composers.set(ir.USER_SETTINGS_INVITES,Ha.a),this._composers.set(ir.USER_SETTINGS_VOLUME,ja.a)}get events(){return this._events}get composers(){return this._composers}}class Qa extends n.a{constructor(t){super(),this._communication=t,this._connection=null,this._messages=new Za,this._demo=new S(this),this.onConnectionOpenedEvent=this.onConnectionOpenedEvent.bind(this),this.onConnectionClosedEvent=this.onConnectionClosedEvent.bind(this),this.onConnectionErrorEvent=this.onConnectionErrorEvent.bind(this),this.onConnectionAuthenticatedEvent=this.onConnectionAuthenticatedEvent.bind(this)}onInit(){this._connection||(r.a.instance.events.addEventListener(E.a.CONNECTION_AUTHENTICATED,this.onConnectionAuthenticatedEvent),this._connection=this._communication.createConnection(this),this._connection.registerMessages(this._messages),this._connection.addEventListener(i.a.CONNECTION_OPENED,this.onConnectionOpenedEvent),this._connection.addEventListener(i.a.CONNECTION_CLOSED,this.onConnectionClosedEvent),this._connection.addEventListener(i.a.CONNECTION_ERROR,this.onConnectionErrorEvent),this._demo&&this._demo.init(),new URLSearchParams(window.location.search).get("local")?this._connection.init(r.a.instance.getConfiguration("socket.url.local")):this._connection.init(r.a.instance.getConfiguration("socket.url")))}onDispose(){this._demo&&this._demo.dispose(),this._connection&&(this._connection.removeEventListener(i.a.CONNECTION_OPENED,this.onConnectionOpenedEvent),this._connection.removeEventListener(i.a.CONNECTION_CLOSED,this.onConnectionClosedEvent),this._connection.removeEventListener(i.a.CONNECTION_ERROR,this.onConnectionErrorEvent)),r.a.instance.events.removeEventListener(E.a.CONNECTION_AUTHENTICATED,this.onConnectionAuthenticatedEvent),super.onDispose()}onConnectionOpenedEvent(t){this.logger.log("Connection Initialized")}onConnectionClosedEvent(t){this.logger.log("Connection Closed")}onConnectionErrorEvent(t){this.logger.log("Connection Error")}onConnectionAuthenticatedEvent(t){this.logger.log("Connection Authenticated"),this._connection&&this._connection.authenticated()}connectionInit(t){this.logger.log("Initializing Connection: "+t)}registerMessageEvent(t){return this._connection&&this._connection.addMessageEvent(t),t}removeMessageEvent(t){this._connection&&this._connection.removeMessageEvent(t)}get demo(){return this._demo}get connection(){return this._connection}}},"0qJb":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(...t){this._data=[t.length,...t]}getMessageArray(){return this._data}dispose(){}}},"0wjC":function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("P5vI");class i{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._offerId=-1,this._localizationId=null,this._rent=!1,this._priceCredits=0,this._priceActivityPoints=0,this._priceActivityPointsType=0,this._clubLevel=0,this._giftable=!1,this._bundlePurchaseAllowed=!1,this._isPet=!1,this._previewImage=null,this._products=[],!0}parse(t){if(!t)return!1;this._offerId=t.readInt(),this._localizationId=t.readString(),this._rent=t.readBoolean(),this._priceCredits=t.readInt(),this._priceActivityPoints=t.readInt(),this._priceActivityPointsType=t.readInt(),this._giftable=t.readBoolean();let e=t.readInt();for(;e>0;)this._products.push(new n.a(t)),e--;return this._clubLevel=t.readInt(),this._bundlePurchaseAllowed=t.readBoolean(),this._isPet=t.readBoolean(),this._previewImage=t.readString(),!0}get offerId(){return this._offerId}get localizationId(){return this._localizationId}get rent(){return this._rent}get priceCredits(){return this._priceCredits}get priceActivityPoints(){return this._priceActivityPoints}get priceActivityPointsType(){return this._priceActivityPointsType}get clubLevel(){return this._clubLevel}get giftable(){return this._giftable}get bundlePurchaseAllowed(){return this._bundlePurchaseAllowed}get isPet(){return this._isPet}get previewImage(){return this._previewImage}get products(){return this._products}}},"1+1A":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._itemId=0,this._spriteId=0,this._location=null,this._stuffData=null,this._state=0,this._secondsToExpiration=0,this._usagePolicy=-1,this._userId=0,this._username=null,this._width=0,this._height=0,this._localX=0,this._localY=0,this._y=0,this._z=0,this._direction=null,this._Str_19875=!1,!0}parse(t){if(!t)return!1;this._itemId=parseInt(t.readString()),this._spriteId=t.readInt(),this._location=t.readString(),this._stuffData=t.readString(),this._secondsToExpiration=t.readInt(),this._usagePolicy=t.readInt(),this._userId=t.readInt(),this._username=null;const e=parseFloat(this._stuffData);if(isNaN(e)||(this._state=e),0===this._location.indexOf(":")){this._Str_19875=!1;let t=this._location.split(" ");if(t.length>=3){let e=t[0],s=t[1];const n=t[2];if(e.length>3&&s.length>2&&(e=e.substr(3),s=s.substr(2),t=e.split(","),t.length>=2)){const e=parseInt(t[0]),i=parseInt(t[1]);if(t=s.split(","),t.length>=2){const s=parseInt(t[0]),r=parseInt(t[1]);this._width=e,this._height=i,this._localX=s,this._localY=r,this._direction=n}}}}else this._Str_19875=!0;return!0}get itemId(){return this._itemId}get spriteId(){return this._spriteId}get wallPosition(){return this._location}get stuffData(){return this._stuffData}get state(){return this._state}get secondsToExpiration(){return this._secondsToExpiration}get usagePolicy(){return this._usagePolicy}get userId(){return this._userId}get username(){return this._username}set username(t){this._username=t}get width(){return this._width}get height(){return this._height}get localX(){return this._localX}get localY(){return this._localY}get direction(){return this._direction}get _Str_22379(){return this._Str_19875}}},"10Jd":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{get furniId(){return this._furniId}flush(){return this._furniId=-1,!0}parse(t){return this._furniId=t.readInt(),!0}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"10wl":function(t,e,s){"use strict";s.d(e,"a",function(){return c});var n=s("5+UO"),i=s("fFOI"),r=s("o/0e"),a=s("/FfH");class o{flush(){return this._roomEnter=!1,this._roomForward=!1,this._staffPick=!1,this._data=null,this._isGroupMember=!1,this._moderation=null,this._chat=null,!0}parse(t){return!!t&&(this._roomEnter=t.readBoolean(),this._data=new r.a(t),this._roomForward=t.readBoolean(),this.data.roomPicker=t.readBoolean(),this._isGroupMember=t.readBoolean(),this.data.allInRoomMuted=t.readBoolean(),this._moderation=new a.a(t),this.data.canMute=t.readBoolean(),this._chat=new i.a(t),!0)}get roomEnter(){return this._roomEnter}get roomForward(){return this._roomForward}get data(){return this._data}get isGroupMember(){return this._isGroupMember}get moderation(){return this._moderation}get chat(){return this._chat}}class c extends n.a{constructor(t){super(t,o)}getParser(){return this.parser}}},"16el":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"1GrJ":function(t,e,s){"use strict";s.d(e,"a",function(){return o});var n=s("5+UO");class i{constructor(t){this._roomId=t.readInt(),this._roomName=t.readString(),this._Str_20266=t.readInt(),this._Str_20472=t.readInt()}get roomId(){return this._roomId}get roomName(){return this._roomName}get _Str_22929(){return this._Str_20266}get _Str_25550(){return this._Str_20472}}class r{constructor(t){this._rooms=[],this._userId=t.readInt(),this._userName=t.readString();const e=t.readInt();let s=0;for(;s<e;)this._rooms.push(new i(t)),s++}get userId(){return this._userId}get userName(){return this._userName}get rooms(){return this._rooms}}class a{flush(){return!0}parse(t){return this._data=new r(t),!0}get data(){return this._data}}class o extends n.a{constructor(t){super(t,a)}getParser(){return this.parser}}},"1QEa":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._isPlaying=!1,!0}parse(t){return!!t&&(this._isPlaying=t.readBoolean(),!0)}get isPlaying(){return this._isPlaying}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"1cH2":function(t,e,s){"use strict";s.d(e,"a",function(){return T});var n=s("kiYJ"),i=s("Xr/m"),r=s("P7Cj"),a=s("vzKh"),o=s("vuPI"),c=s("lVe0");class l{constructor(){this._buffer=new Uint8Array}writeByte(t){const e=new Uint8Array(1);return e[0]=t,this.appendArray(e),this}writeBytes(t){const e=new Uint8Array(t);return this.appendArray(e),this}writeShort(t){const e=new Uint8Array(2);return e[0]=t>>8,e[1]=255&t,this.appendArray(e),this}writeInt(t){const e=new Uint8Array(4);return e[0]=t>>24,e[1]=t>>16,e[2]=t>>8,e[3]=255&t,this.appendArray(e),this}writeString(t,e=!0){const s=(new TextEncoder).encode(t);return e?(this.writeShort(s.length),this.appendArray(s)):this.appendArray(s),this}appendArray(t){if(!t)return;const e=new Uint8Array(this._buffer.length+t.length);e.set(this._buffer),e.set(t,this._buffer.length),this._buffer=e}getBuffer(){return this._buffer.buffer}toString(t){return new TextDecoder(t).decode(this._buffer)}}class h{constructor(t){this._value=t}get value(){return this._value}}class u{constructor(t){this._value=t}get value(){return this._value}}class _{constructor(t,e){this._header=t,this._buffer=e}readByte(){return this._buffer?this._buffer.readByte():-1}readBytes(t){return this._buffer?this._buffer.readBytes(t):null}readBoolean(){return 1===this.readByte()}readShort(){return this._buffer?this._buffer.readShort():-1}readInt(){return this._buffer?this._buffer.readInt():-1}readString(){const t=this.readShort();return this._buffer.readBytes(t).toString("utf8")}get header(){return this._header}get bytesAvailable(){return this._buffer&&this._buffer.remaining()>0}}class d{encode(t,e){const s=new l;s.writeShort(t);for(const i of e){let t=typeof i;switch("object"===t&&(null===i?t="null":i instanceof h?t="byte":i instanceof u&&(t="short")),t){case"null":s.writeShort(0);break;case"byte":s.writeByte(i.value);break;case"short":s.writeShort(i.value);break;case"number":s.writeInt(i);break;case"boolean":s.writeByte(i?1:0);break;case"string":i?s.writeString(i,!0):s.writeShort(0)}}const n=s.getBuffer();return n?(new l).writeInt(n.byteLength).writeBytes(n):null}decode(t){if(!t||!t.dataBuffer||!t.dataBuffer.byteLength)return null;const e=[];for(;t.dataBuffer.byteLength&&!(t.dataBuffer.byteLength<4);){const s=new c.a(t.dataBuffer),n=s.readInt();if(n>t.dataBuffer.byteLength-4)break;const i=s.readBytes(n);e.push(new _(i.readShort(),i)),t.dataBuffer=t.dataBuffer.slice(n+4)}return e}}var g=s("+IGW"),m=s("5+UO");class p{constructor(){this._messageIdByEvent=new Map,this._messageIdByComposer=new Map,this._messageInstancesById=new Map}dispose(){this._messageIdByEvent.clear(),this._messageIdByComposer.clear(),this._messageInstancesById.clear()}registerMessages(t){for(const[e,s]of t.events)this.registerMessageEventClass(e,s);for(const[e,s]of t.composers)this.registerMessageComposerClass(e,s)}registerMessageEventClass(t,e){t&&e&&(this._messageIdByEvent.get(e)||this._messageIdByEvent.set(e,t))}registerMessageComposerClass(t,e){t&&e&&(this._messageIdByComposer.get(e)||this._messageIdByComposer.set(e,t))}registerMessageEvent(t){if(!t)return;const e=this.getEventId(t);if(!e)return;let s=this._messageInstancesById.get(e);s&&s.length?t.parser=s[0].parser:(s=[],this._messageInstancesById.set(e,s),t.parser=new t.parserClass),s.push(t)}removeMessageEvent(t){if(!t)return;const e=this.getEventId(t);if(!e)return;const s=this._messageInstancesById.get(e);if(s)for(const[n,i]of s.entries())if(i&&i===t)return s.splice(n,1),0===s.length&&this._messageInstancesById.delete(e),void i.dispose()}getEvents(t){if(t)return this._messageInstancesById.get(t)||void 0}getEventId(t){return t&&this._messageIdByEvent.get(t instanceof m.a?t.constructor:t)||-1}getComposerId(t){return t&&this._messageIdByComposer.get(t.constructor)||-1}}let f=(()=>{class t{}return t.CONNECTION_OPENED="open",t.CONNECTION_CLOSED="close",t.CONNECTION_ERROR="error",t.CONNECTION_MESSAGE="message",t})();class E extends o.a{constructor(t,e){super(),this._communicationManager=t,this._stateListener=e,this._socket=null,this._messages=new p,this._codec=new d,this._dataBuffer=null,this._isReady=!1,this._pendingClientMessages=[],this._pendingServerMessages=[],this._isAuthenticated=!1,this.onOpen=this.onOpen.bind(this),this.onClose=this.onClose.bind(this),this.onError=this.onError.bind(this),this.onMessage=this.onMessage.bind(this)}init(t){this._stateListener&&this._stateListener.connectionInit(t),this.createSocket(t)}onDispose(){super.onDispose(),this.destroySocket(),this._communicationManager=null,this._stateListener=null,this._messages=null,this._codec=null,this._dataBuffer=null}onReady(){this._isReady||(this._isReady=!0,this._pendingServerMessages&&this._pendingServerMessages.length&&this.processWrappers(...this._pendingServerMessages),this._pendingClientMessages&&this._pendingClientMessages.length&&this.send(...this._pendingClientMessages),this._pendingServerMessages=[],this._pendingClientMessages=[])}createSocket(t){t&&(this.destroySocket(),this._dataBuffer=new ArrayBuffer(0),this._socket=new WebSocket(t),this._socket.addEventListener(f.CONNECTION_OPENED,this.onOpen),this._socket.addEventListener(f.CONNECTION_CLOSED,this.onClose),this._socket.addEventListener(f.CONNECTION_ERROR,this.onError),this._socket.addEventListener(f.CONNECTION_MESSAGE,this.onMessage))}destroySocket(){this._socket&&(this._socket.removeEventListener(f.CONNECTION_OPENED,this.onOpen),this._socket.removeEventListener(f.CONNECTION_CLOSED,this.onClose),this._socket.removeEventListener(f.CONNECTION_ERROR,this.onError),this._socket.removeEventListener(f.CONNECTION_MESSAGE,this.onMessage),this._socket.readyState===WebSocket.OPEN&&this._socket.close(),this._socket=null)}onOpen(t){this.dispatchConnectionEvent(g.a.CONNECTION_OPENED,t)}onClose(t){this.dispatchConnectionEvent(g.a.CONNECTION_CLOSED,t)}onError(t){this.dispatchConnectionEvent(g.a.CONNECTION_ERROR,t)}onMessage(t){if(!t)return;this.dispatchConnectionEvent(g.a.CONNECTION_MESSAGE,t);const e=new FileReader;e.readAsArrayBuffer(t.data),e.onloadend=()=>{this._dataBuffer=this.concatArrayBuffers(this._dataBuffer,e.result),this.processReceivedData()}}dispatchConnectionEvent(t,e){this.dispatchEvent(new g.a(t,this))}authenticated(){this._isAuthenticated=!0}send(...t){if(this.disposed||!t)return!1;if(t=[...t],this._isAuthenticated&&!this._isReady)return this._pendingClientMessages||(this._pendingClientMessages=[]),this._pendingClientMessages.push(...t),!1;for(const e of t){if(!e)continue;const t=this._messages.getComposerId(e);if(-1===t){a.a.log("Unknown Composer: "+e.constructor.name);continue}const s=e.getMessageArray(),n=this._codec.encode(t,s);n?(r.a.instance.getConfiguration("communication.packet.log")&&console.log(`OutgoingComposer: [${t}] ${e.constructor.name}`,s),this.write(n.getBuffer())):r.a.instance.getConfiguration("communication.packet.log")&&console.log("Encoding Failed: "+e.constructor.name)}return!0}write(t){this._socket.readyState===WebSocket.OPEN&&this._socket.send(t)}processReceivedData(){try{this.processData()}catch(t){a.a.log(t)}}processData(){const t=this.splitReceivedMessages();if(t&&t.length)return this._isAuthenticated&&!this._isReady?(this._pendingServerMessages||(this._pendingServerMessages=[]),void this._pendingServerMessages.push(...t)):void this.processWrappers(...t)}processWrappers(...t){if(t&&t.length)for(const e of t){if(!e)continue;const t=this.getMessagesForWrapper(e);t&&t.length&&(r.a.instance.getConfiguration("communication.packet.log")&&console.log(`IncomingMessage: [${e.header}] ${t[0].constructor.name}`,t[0].parser),this.handleMessages(...t))}}splitReceivedMessages(){return this._dataBuffer&&this._dataBuffer.byteLength?this._codec.decode(this):null}concatArrayBuffers(t,e){const s=new Uint8Array(t.byteLength+e.byteLength);return s.set(new Uint8Array(t),0),s.set(new Uint8Array(e),t.byteLength),s.buffer}getMessagesForWrapper(t){if(!t)return null;const e=this._messages.getEvents(t.header);if(e&&e.length){try{const s=e[0].parser;if(!s||!s.flush()||!s.parse(t))return null}catch(s){return a.a.log("Error parsing message: "+s,e[0].constructor.name),null}return e}r.a.instance.getConfiguration("communication.packet.log")&&console.log(`IncomingMessage: [${t.header}] UNREGISTERED`,t)}handleMessages(...t){t=[...t];for(const e of t)e&&(e.connection=this,e.callBack&&e.callBack(e))}registerMessages(t){t&&this._messages.registerMessages(t)}addMessageEvent(t){t&&this._messages&&this._messages.registerMessageEvent(t)}removeMessageEvent(t){t&&this._messages&&this._messages.removeMessageEvent(t)}get isAuthenticated(){return this._isAuthenticated}get dataBuffer(){return this._dataBuffer}set dataBuffer(t){this._dataBuffer=t}}class S extends i.a{constructor(){super(),this._connections=[]}onDispose(){if(this._connections&&this._connections.length)for(const t of this._connections.values())t&&t.dispose()}createConnection(t=null){const e=new E(this,t);if(e)return this._connections.push(e),e}update(t){let e=0;for(;e<this._connections.length;){const t=this._connections[e];if(t.processReceivedData(),this.disposed)return;t.disposed?this._connections.splice(e,1):e++}}}var b=s("Fv14"),v=s("hTzv"),I=s("C6IL");class R extends b.a{constructor(){super(),this._definitions=new v.a,this.onConfigurationLoaded=this.onConfigurationLoaded.bind(this)}onInit(){this.loadConfigurationFromUrl(NitroConfig.configurationUrl)}loadConfigurationFromUrl(t){if(!t||""===t)return void this.dispatchConfigurationEvent(I.a.FAILED);const e=new XMLHttpRequest;try{e.open("GET",t),e.onloadend=this.onConfigurationLoaded,e.onerror=this.onConfigurationFailed,e.send()}catch(s){this.logger.error(s)}}onConfigurationLoaded(t){t&&(this.parseConfiguration(t.target.response)?this.dispatchConfigurationEvent(I.a.LOADED):this.dispatchConfigurationEvent(I.a.FAILED))}onConfigurationFailed(t){this.dispatchConfigurationEvent(I.a.FAILED)}dispatchConfigurationEvent(t){this.events&&this.events.dispatchEvent(new I.a(t))}parseConfiguration(t){if(!t||""===t)return!1;try{const e=JSON.parse(t),s=new RegExp(/\${(.*?)}/g);for(const t in e){let n=e[t];"string"==typeof n&&(n=this.interpolate(n,s)),this._definitions.add(t,n)}return!0}catch(e){return this.logger.error(e.stack),!1}}interpolate(t,e=null){e||(e=new RegExp(/\${(.*?)}/g));const s=t.match(e);if(s&&s.length)for(const n of s){const e=this._definitions.getValue(this.removeInterpolateKey(n));e&&(t=t.replace(n,e))}return t}removeInterpolateKey(t){return t.replace("${","").replace("}","")}getValue(t,e=null){let s=this._definitions.getValue(t);return void 0===s&&(this.logger.warn("Missing configuration key: "+t),s=e),s}setValue(t,e){this._definitions.add(t,e)}}class T extends i.a{constructor(){super(),window.console.log.apply(console,["\n%c       _   ___ __              \n      / | / (_) /__________    \n     /  |/ / / __/ ___/ __ \\   \n    / /|  / / /_/ /  / /_/ /   \n   /_/ |_/_/\\__/_/   \\____/    \n                               \n Thanks for using Nitro        \n To report bugs or issues      \n join us on Discord            \n https://discord.gg/66UR68FPgy \n                               \n","color: #FFFFFF; background: #000000; padding:0px 0;"]),this._configuration=new R,this._communication=new S,this._asset=new n.a}onDispose(){this._asset&&(this._asset.dispose(),this._asset=null),this._communication&&(this._communication.dispose(),this._communication=null)}get configuration(){return this._configuration}get communication(){return this._communication}get asset(){return this._asset}}},"1mUs":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._figureSetIds=[],this._boundFurnitureNames=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._figureSetIds.push(t.readInt()),e--;let s=t.readInt();for(;s>0;)this._boundFurnitureNames.push(t.readString()),s--;return!0}get figureSetIds(){return this._figureSetIds}get boundsFurnitureNames(){return this._boundFurnitureNames}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"29Gn":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._info=null,!0}parse(t){return!!t&&(this._info=t.readString(),!0)}get info(){return this._info}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"2FAY":function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("WRyM");let i=(()=>{class t extends n.a{constructor(e,s,n){super(t.ANIMATE_ICON),this._image=e,this._x=s,this._y=n}get image(){return this._image}get x(){return this._x}get y(){return this._y}}return t.ANIMATE_ICON="NTAIE_ANIMATE_ICON",t})()},"2H63":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},"2L69":function(t,e,s){"use strict";s.d(e,"a",function(){return g});var n=s("XMGm"),i=s("MeCd"),r=s("KQk8");let a=(()=>{class t extends i.a{constructor(){super(),this._state="",this._hits=0,this._target=0}parseWrapper(t){t&&(this._state=t.readString(),this._hits=t.readInt(),this._target=t.readInt(),super.parseWrapper(t))}initializeFromRoomObjectModel(t){super.initializeFromRoomObjectModel(t),this._state=t.getValue(n.a.FURNITURE_CRACKABLE_STATE),this._hits=t.getValue(n.a.FURNITURE_CRACKABLE_HITS),this._target=t.getValue(n.a.FURNITURE_CRACKABLE_TARGET)}writeRoomObjectModel(e){super.writeRoomObjectModel(e),e.setValue(n.a.FURNITURE_DATA_FORMAT,t.FORMAT_KEY),e.setValue(n.a.FURNITURE_CRACKABLE_STATE,this._state),e.setValue(n.a.FURNITURE_CRACKABLE_HITS,this._hits),e.setValue(n.a.FURNITURE_CRACKABLE_TARGET,this._target)}getLegacyString(){return this._state}compare(t){return!0}get hits(){return this._hits}get target(){return this._target}}return t.FORMAT_KEY=r.a.CRACKABLE_KEY,t})(),o=(()=>{class t extends i.a{parseWrapper(t){t&&(this._state="",super.parseWrapper(t))}writeRoomObjectModel(e){super.writeRoomObjectModel(e),e.setValue(n.a.FURNITURE_DATA_FORMAT,t.FORMAT_KEY)}getLegacyString(){return this._state}compare(t){return super.compare(t)}}return t.FORMAT_KEY=r.a.EMPTY_KEY,t})();var c=s("Xe1u"),l=s("v12S"),h=s("tWLA"),u=s("uUF/"),_=s("PJfP"),d=s("VZrs");class g{static getData(t){let e=null;switch(255&t){case a.FORMAT_KEY:e=new a;break;case o.FORMAT_KEY:e=new o;break;case c.a.FORMAT_KEY:e=new c.a;break;case l.a.FORMAT_KEY:e=new l.a;break;case h.a.FORMAT_KEY:e=new h.a;break;case u.a.FORMAT_KEY:e=new u.a;break;case _.a.FORMAT_KEY:e=new _.a;break;case d.a.FORMAT_KEY:e=new d.a}return e?(e.flags=65280&t,e):null}}},"2Rep":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s,n,i){this._data=[t,e,s,n,i]}getMessageArray(){return this._data}dispose(){}}},"2y6h":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._credits=null,!0}parse(t){return!!t&&(this._credits=t.readString(),!0)}get credits(){return this._credits}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"38Mq":function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{static getTypeNumber(e){return t.AVATAR_TYPES[e]}static getTypeString(e){for(const s in t.AVATAR_TYPES)if(s&&t.AVATAR_TYPES[s]===e)return s;return null}static getRealType(e){switch(e){case t.BOT:case t.RENTABLE_BOT:return t.USER;default:return e}}}return t.USER="user",t.PET="pet",t.BOT="bot",t.RENTABLE_BOT="rentable_bot",t.MONSTER_PLANT="monsterplant",t.AVATAR_TYPES={user:1,pet:2,bot:3,rentable_bot:4},t})()},"3CL9":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){this._data=null}}},"3h45":function(t,e,s){"use strict";s.d(e,"a",function(){return Mr});var n=s("IqKQ"),i=s("vzKh"),r=s("Fv14"),a=s("y81I");let o=(()=>{class t extends a.a{constructor(t,e,s,n=!1,i=!1,r=!1,a=!1){super(t,e),this._eventId="",this._eventId=s,this._altKey=n,this._ctrlKey=i,this._shiftKey=r,this._buttonDown=a}get eventId(){return this._eventId}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get shiftKey(){return this._shiftKey}get buttonDown(){return this._buttonDown}get localX(){return this._localX}set localX(t){this._localX=t}get localY(){return this._localY}set localY(t){this._localY=t}get spriteOffsetX(){return this._spriteOffsetX}set spriteOffsetX(t){this._spriteOffsetX=t}get spriteOffsetY(){return this._spriteOffsetY}set spriteOffsetY(t){this._spriteOffsetY=t}}return t.CLICK="ROE_MOUSE_CLICK",t.DOUBLE_CLICK="ROE_MOUSE_DOUBLE_CLICK",t.MOUSE_MOVE="ROE_MOUSE_MOVE",t.MOUSE_DOWN="ROE_MOUSE_DOWN",t.MOUSE_UP="ROE_MOUSE_UP",t.MOUSE_ENTER="ROE_MOUSE_ENTER",t.MOUSE_LEAVE="ROE_MOUSE_LEAVE",t})();var c=s("yF7E"),l=s("P7Cj"),h=s("ySDW");class u{constructor(t,e,s,n,i,r,a=0,o=0,c=!1,l=!1,h=!1,u=!1){this._type=t,this._eventId=e,this._canvasId=s,this._spriteTag=n,this._screenX=i,this._screenY=r,this._localX=a,this._localY=o,this._ctrlKey=c,this._altKey=l,this._shiftKey=h,this._buttonDown=u,this._spriteOffsetX=0,this._spriteOffsetY=0}get type(){return this._type}get _Str_3463(){return this._eventId}get canvasId(){return this._canvasId}get spriteTag(){return this._spriteTag}get screenX(){return this._screenX}get screenY(){return this._screenY}get localX(){return this._localX}get localY(){return this._localY}get ctrlKey(){return this._ctrlKey}get altKey(){return this._altKey}get shiftKey(){return this._shiftKey}get buttonDown(){return this._buttonDown}get spriteOffsetX(){return this._spriteOffsetX}set spriteOffsetX(t){this._spriteOffsetX=t}get spriteOffsetY(){return this._spriteOffsetY}set spriteOffsetY(t){this._spriteOffsetY=t}}let _=(()=>{class t{}return t.DEFAULT=1,t._Str_8616=2,t._Str_11629=3,t._Str_10494=4,t})();var d=s("vqvB"),g=s("DACI"),m=s("DFHD"),p=s("kXXe");class f{constructor(t){this._roomObjectVariableAccurateZ=t||"",this._location=new m.a,this._screenLocation=new m.a,this._locationChanged=!1,this._geometryUpdateId=-1,this._objectUpdateId=-1}dispose(){this._screenLocation=null}updateLocation(t,e){if(!t||!e)return null;let s=!1;const n=t.getLocation();if(e.updateId===this._geometryUpdateId&&t.updateCounter===this._objectUpdateId||(this._objectUpdateId=t.updateCounter,e.updateId===this._geometryUpdateId&&n.x===this._location.x&&n.y===this._location.y&&n.z===this._location.z||(this._geometryUpdateId=e.updateId,this._location.assign(n),s=!0)),this._locationChanged=s,this._locationChanged){const s=e.getScreenPosition(n);if(!s)return null;const i=t.model.getValue(this._roomObjectVariableAccurateZ);if(isNaN(i)||0===i){const t=new m.a(Math.round(n.x),Math.round(n.y),n.z);if(t.x!==n.x||t.y!==n.y){const n=e.getScreenPosition(t);this._screenLocation.assign(s),n&&(this._screenLocation.z=n.z)}else this._screenLocation.assign(s)}else this._screenLocation.assign(s);this._screenLocation.x=Math.round(this._screenLocation.x),this._screenLocation.y=Math.round(this._screenLocation.y)}return this._screenLocation}get locationChanged(){return this._locationChanged}}class E{constructor(){this._sprites=[],this._updateId1=-1,this._updateId2=-1,this._isEmpty=!1}get _Str_3008(){return this._sprites.length}get isEmpty(){return this._isEmpty}dispose(){this._Str_20276(0)}_Str_12937(t){this._sprites.push(t)}_Str_2505(t){return this._sprites[t]}get _Str_9272(){return this._sprites}_Str_17574(t,e){return(t!==this._updateId1||e!==this._updateId2)&&(this._updateId1=t,this._updateId2=e,!0)}_Str_20276(t){if(t<this._sprites.length){let e=t;for(;e<this._sprites.length;){const t=this._sprites[e];t&&t.dispose(),e++}this._sprites.splice(t,this._sprites.length-t)}this._isEmpty=!this._sprites.length}}class S{constructor(t){this._location=new f(t),this._sprites=new E}get location(){return this._location}get sprites(){return this._sprites}dispose(){this._location&&(this._location.dispose(),this._location=null),this._sprites&&(this._sprites.dispose(),this._sprites=null)}get _Str_1577(){return this._objectId}set _Str_1577(t){this._objectId=t}}let b=(()=>{class t{constructor(t){this._data=new Map,this._roomObjectVariableAccurateZ=t}dispose(){if(this._data){for(const[t,e]of this._data.entries())e&&(this._data.delete(t),e.dispose());this._data=null}}getObjectCache(t){let e=this._data.get(t);return e||(e=new S(this._roomObjectVariableAccurateZ),this._data.set(t,e)),e}removeObjectCache(t){const e=this._data.get(t);e&&(this._data.delete(t),e.dispose())}getSortableSpriteList(){const e=[];for(const s of this._data.values()){if(!s)continue;const n=s.sprites&&s.sprites._Str_9272;if(n&&n.length)for(const i of n)if(i&&i.sprite.spriteType!==_._Str_8616&&""!==i.sprite.name){const n=new p.a;n.objectId=s._Str_1577,n.x=i.x,n.y=i.y,n.z=i.z,n.name=i.sprite.name||"",n.flipH=i.sprite.flipH,n.alpha=i.sprite.alpha,n.color=i.sprite.color.toString(),n.blendMode=i.sprite.blendMode.toString(),n.width=i.sprite.width,n.height=i.sprite.height,n.type=i.sprite.type,n.posture=i.sprite.posture;const r=this.isSkewedSprite(i.sprite);r&&(n.skew=i.sprite.direction%4==0?-.5:.5),(r||i.name.indexOf("%image.library.url%")>=0||i.name.indexOf("%group.badge.url%")>=0)&&n.width<=t.MAX_SIZE_FOR_AVG_COLOR&&n.height<=t.MAX_SIZE_FOR_AVG_COLOR&&0===i.sprite.name.indexOf("external_image_wallitem")&&(n.frame=!0),e.push(n)}}return e&&e.length?e:null}isSkewedSprite(t){return!!t.type&&(0===t.type.indexOf("external_image_wallitem")&&"THUMBNAIL"===t.tag||0===t.type.indexOf("guild_forum")&&"THUMBNAIL"===t.tag)}getPlaneSortableSprites(){const t=[];for(const e of this._data.values())for(const s of e.sprites._Str_9272)s.sprite.spriteType===_._Str_8616&&t.push(s);return t}}return t.MAX_SIZE_FOR_AVG_COLOR=200,t})();class v extends n.Sprite{constructor(t=null){super(t),this._offsetX=0,this._offsetY=0,this._tag="",this._alphaTolerance=128,this._Str_8253=!1,this._clickHandling=!1,this._pairedSpriteId=-1,this._pairedSpriteUpdateCounter=-1}needsUpdate(t,e){return(this._pairedSpriteId!==t||this._pairedSpriteUpdateCounter!==e)&&(this._pairedSpriteId=t,this._pairedSpriteUpdateCounter=e,!0)}render(t){try{if(!this._texture||!this._texture._uvs||!this._texture._uvs.uvsFloat32)return}catch(e){return}super.render(t)}setTexture(t){t||(t=n.Texture.EMPTY),t!==this.texture&&(t===n.Texture.EMPTY&&(this._pairedSpriteId=-1,this._pairedSpriteUpdateCounter=-1),this.texture=t)}containsPoint(t){return v.containsPoint(this,t)}static containsPoint(t,e){if(!t||!e||t.alphaTolerance>255)return!1;if(!(t instanceof n.Sprite))return!1;if(t.texture===n.Texture.EMPTY||t.blendMode!==n.BLEND_MODES.NORMAL)return;const s=t.texture,i=s.baseTexture;if(!s||!i||!i.valid)return!1;const r=e.x*t.scale.x,a=e.y*t.scale.y;if(!t.getLocalBounds().contains(r,a))return!1;if(!i.hitMap){let t=null;if(!i.resource)if(s.getLocalBounds)t=l.a.instance.renderer.extract.canvas(s);else{const e=n.Sprite.from(s);t=l.a.instance.renderer.extract.canvas(e),e.destroy()}if(!v.generateHitMap(i,t))return!1}const o=i.hitMap,c=i.hitMapWidth,h=i.resolution,u=Math.round((r+s.frame.x)*h),_=4*(Math.round((a+s.frame.y)*h)*c+u);return void 0!==o[_+3]&&o[_+3]>t.alphaTolerance}static generateHitMap(t,e=null){let s=null,n=null;if(e)s=e,n=s.getContext("2d");else{if(!t.resource)return!1;const e=t.resource.source;if(!e)return!1;if(e.getContext)s=e,n=s.getContext("2d");else{if(!(e instanceof Image))return!1;s=document.createElement("canvas"),s.width=e.width,s.height=e.height,n=s.getContext("2d"),n.drawImage(e,0,0)}}const i=s.width,r=n.getImageData(0,0,i,s.height);return t.hitMap=r.data,t.hitMapWidth=i,!0}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t}get tag(){return this._tag}set tag(t){this._tag=t}get alphaTolerance(){return this._alphaTolerance}set alphaTolerance(t){this._alphaTolerance=t}get _Str_4593(){return this._Str_8253}set _Str_4593(t){this._Str_8253=t}get clickHandling(){return this._clickHandling}set clickHandling(t){this._clickHandling=t}}class I{constructor(){this._objectId="",this._spriteTag=""}get objectId(){return this._objectId}set objectId(t){this._objectId=t}get spriteTag(){return this._spriteTag}set spriteTag(t){this._spriteTag=t}}let R=(()=>{class t{constructor(){this._name="",this._sprite=null,this._x=0,this._y=0,this._z=0}dispose(){this._z=-t._Str_17154,this._sprite=null}get name(){return this._name}set name(t){this._name=t}get sprite(){return this._sprite}set sprite(t){this._sprite=t}get x(){return this._x}set x(t){this._x=t}get y(){return this._y}set y(t){this._y=t}get z(){return this._z}set z(t){this._z=t}}return t._Str_17154=1e8,t})();class T{constructor(t,e,s,i,r){this._id=e,this._container=t,this._geometry=new g.a(r,new m.a(-135,30,0),new m.a(11,11,5),new m.a(-135,.5,0)),this._renderTimestamp=0,this._master=null,this._display=null,this._mask=null,this._sortableSprites=[],this._spriteCount=0,this._activeSpriteCount=0,this._spritePool=[],this._skipObjectUpdate=!1,this._runningSlow=!1,this._width=0,this._height=0,this._renderedWidth=0,this._renderedHeight=0,this._screenOffsetX=0,this._screenOffsetY=0,this._mouseLocation=new n.Point,this._mouseOldX=0,this._mouseOldY=0,this._mouseCheckCount=0,this._mouseSpriteWasHit=!1,this._mouseActiveObjects=new Map,this._eventCache=new Map,this._eventId=0,this._scale=1,this._restrictsScaling=!1,this._noSpriteVisibilityChecking=!1,this._usesExclusionRectangles=!1,this._usesMask=!0,this._canvasUpdated=!1,this._objectCache=new b(this._container.roomObjectVariableAccurateZ),this._mouseListener=null,this.setupCanvas(),this.initialize(s,i)}setupCanvas(){if(this._master||(this._master=new n.Sprite,this._master.interactiveChildren=!1),!this._display){const t=new n.Container;t.name="canvas",this._master.addChild(t),this._display=t}}dispose(){if(this._Str_20677(0,!0),this._geometry&&(this._geometry.dispose(),this._geometry=null),this._mask&&(this._mask=null),this._objectCache&&(this._objectCache.dispose(),this._objectCache=null),this._master){for(;this._master.children.length;)this._master.removeChildAt(0).destroy();this._master.parent&&this._master.parent.removeChild(this._master),this._master.destroy(),this._master=null}if(this._display=null,this._sortableSprites=[],this._mouseActiveObjects&&(this._mouseActiveObjects.clear(),this._mouseActiveObjects=null),this._spritePool){for(const t of this._spritePool)this._Str_21974(t,!0);this._spritePool=[]}this._eventCache&&(this._eventCache.clear(),this._eventCache=null),this._mouseListener=null}initialize(t,e){if(t=t<1?1:t,e=e<1?1:e,this._usesMask&&(this._mask?this._mask.clear().beginFill(16711680).drawRect(0,0,t,e).endFill():(this._mask=(new n.Graphics).beginFill(16711680).drawRect(0,0,t,e).endFill(),this._mask.name="mask",this._master&&(this._master.addChild(this._mask),this._display&&(this._display.mask=this._mask)))),this._master){if(this._master.hitArea){const s=this._master.hitArea;s.width=t,s.height=e}else this._master.hitArea=new n.Rectangle(0,0,t,e);if(this._master.filterArea){const s=this._master.filterArea;s.width=t,s.height=e}else this._master.filterArea=new n.Rectangle(0,0,t,e)}this._width=t,this._height=e}setMask(t){t&&!this._usesMask?(this._usesMask=!0,this._mask&&this._mask.parent!==this._master&&(this._master.addChild(this._mask),this._display.mask=this._mask)):!t&&this._usesMask&&(this._usesMask=!1,this._mask&&this._mask.parent===this._master&&(this._master.removeChild(this._mask),this._display.mask=null))}setScale(t,e=null,s=null,i=!1,r=!1){this._master&&this._display&&(this._restrictsScaling&&!i||(e||(e=new n.Point(this._width/2,this._height/2)),s||(s=e),e=this._display.toLocal(e),r?this._scale*=t:this._scale=t,this.screenOffsetX=s.x-e.x*this._scale,this.screenOffsetY=s.y-e.y*this._scale))}render(t,e=!1){if(this._canvasUpdated=!1,-1===t&&(t=this._renderTimestamp+1),!this._container||!this._geometry)return;if(t===this._renderTimestamp)return;this._width===this._renderedWidth&&this._height===this._renderedHeight||(e=!0),this._display.x===this._screenOffsetX&&this._display.y===this._screenOffsetY||(this._display.x=this._screenOffsetX,this._display.y=this._screenOffsetY,e=!0),this._display.scale.x!==this._scale&&(this._display.scale.set(this._scale),e=!0);let s=0;const n=this._container.objects;if(n.size)for(const r of n.values())r&&(s+=this.renderObject(r,r.instanceId.toString(),t,e,s));this._sortableSprites.sort((t,e)=>e.z-t.z),s<this._sortableSprites.length&&this._sortableSprites.splice(s);let i=0;for(;i<s;){const t=this._sortableSprites[i];t&&t.sprite&&this.renderSprite(i,t),i++}this._Str_20677(s),e&&(this._canvasUpdated=!0),this._renderTimestamp=t,this._renderedWidth=this._width,this._renderedHeight=this._height}_Str_20787(){this._noSpriteVisibilityChecking=!0,this.render(-1,!0)}_Str_22174(){this._noSpriteVisibilityChecking=!1}getSortableSpriteList(){return this._objectCache.getSortableSpriteList()}_Str_14588(){return this._objectCache.getPlaneSortableSprites()}removeFromCache(t){this._objectCache.removeObjectCache(t)}renderObject(t,e,s,n,i){if(!t)return 0;const r=t.visualization;if(!r)return this.removeFromCache(e),0;const a=this.getCacheItem(e);a._Str_1577=t.instanceId;const o=a.location,c=a.sprites,l=o.updateLocation(t,this._geometry);if(!l)return this.removeFromCache(e),0;if(r.update(this._geometry,s,!c.isEmpty||n,this._skipObjectUpdate&&this._runningSlow),o.locationChanged&&(n=!0),!c._Str_17574(r.instanceId,r.updateSpriteCounter)&&!n)return c._Str_3008;let h=l.x,u=l.y,d=l.z;d+=h>0?12e-8*h:12e-8*-h,h+=Math.trunc(this._width/2),u+=Math.trunc(this._height/2);let g=0;for(const m of r.sprites.values()){if(!m||!m.visible)continue;const s=m.texture,n=s&&s.baseTexture;if(!s||!n)continue;const r=h+m.offsetX+this._screenOffsetX,a=u+m.offsetY+this._screenOffsetY;if(m.flipH){if(!this.isSpriteVisible(h+-(s.width+-m.offsetX)+this._screenOffsetX,a,s.width,s.height))continue}else if(m.flipV){if(!this.isSpriteVisible(r,u+-(s.height+-m.offsetY)+this._screenOffsetY,s.width,s.height))continue}else if(!this.isSpriteVisible(r,a,s.width,s.height))continue;let o=c._Str_2505(g);o||(o=new R,c._Str_12937(o),this._sortableSprites.push(o),o.name=e),o.sprite=m,m.spriteType!==_._Str_11629&&m.spriteType!==_._Str_10494||(o.sprite._Str_3582="avatar_"+t.id),o.x=r-this._screenOffsetX,o.y=a-this._screenOffsetY,o.z=d+m.relativeDepth+37e-12*i,g++,i++}return c._Str_20276(g),this._canvasUpdated=!0,g}getExtendedSprite(t){return t<0||t>=this._spriteCount?null:this._display.getChildAt(t)||null}getExtendedSpriteIdentifier(t){return t?t.name:""}renderSprite(t,e){if(t>=this._spriteCount)return this.createAndAddSprite(e),!0;if(!e)return!1;const s=e.sprite,n=this.getExtendedSprite(t);if(!s||!n)return!1;if(n._Str_4593!==s._Str_4593)return n._Str_4593&&!s._Str_4593?(this._display.removeChildAt(t),this._spritePool.push(n),this.renderSprite(t,e)):(this.createAndAddSprite(e,t),!0);if(n.needsUpdate(s.id,s.updateCounter)||d.a.isVisualizationOn()){n.tag=s.tag,n.alphaTolerance=s.alphaTolerance,n.name=e.name,n._Str_4593=s._Str_4593,n.clickHandling=s.clickHandling,n.filters=s.filters;const t=s.alpha/255;n.alpha!==t&&(n.alpha=t),n.tint!==s.color&&(n.tint=s.color),n.blendMode!==s.blendMode&&(n.blendMode=s.blendMode),n.texture!==s.texture&&n.setTexture(s.texture),s.updateContainer&&(1===n.children.length&&n.removeChildAt(0),n.addChild(s.container),s.updateContainer=!1),s.flipH?-1!==n.scale.x&&(n.scale.x=-1):1!==n.scale.x&&(n.scale.x=1),s.flipV?-1!==n.scale.y&&(n.scale.y=-1):1!==n.scale.y&&(n.scale.y=1),this._Str_21914(n,s)}return n.x!==e.x&&(n.x=e.x),n.y!==e.y&&(n.y=e.y),n.offsetX=s.offsetX,n.offsetY=s.offsetY,!0}createAndAddSprite(t,e=-1){const s=t.sprite;if(!s)return;let n=null;this._spritePool.length>0&&(n=this._spritePool.pop()),n||(n=new v),n.children.length&&n.removeChildren(),n.tag=s.tag,n.alphaTolerance=s.alphaTolerance,n.alpha=s.alpha/255,n.tint=s.color,n.x=t.x,n.y=t.y,n.offsetX=s.offsetX,n.offsetY=s.offsetY,n.name=s.name,n._Str_4593=s._Str_4593,n.clickHandling=s.clickHandling,n.blendMode=s.blendMode,n.filters=s.filters,n.setTexture(s.texture),s.updateContainer&&(n.addChild(s.container),s.updateContainer=!1),s.flipH&&(n.scale.x=-1),s.flipV&&(n.scale.y=-1),this._Str_21914(n,s),e<0||e>=this._spriteCount?(this._display.addChild(n),this._spriteCount++):this._display.addChildAt(n,e),this._activeSpriteCount++}_Str_20677(t,e=!1){if(this._display){if(t<0&&(t=0),t<this._activeSpriteCount||!this._activeSpriteCount){let s=this._spriteCount-1;for(;s>=t;)this._Str_21974(this.getExtendedSprite(s),e),s--}this._activeSpriteCount=t}}_Str_21914(t,e){if(d.a.isVisualizationOn()&&e)switch(e.spriteType){case _._Str_10494:return;case _._Str_8616:return void(t.alpha=d.a.getDelta(.9));case _._Str_11629:return void(t.alpha=d.a.getDelta(.5));default:t.alpha=d.a.getDelta(.1)}}_Str_21974(t,e){t&&(e?(t.parent&&t.parent.removeChild(t),t.destroy({children:!0})):t.setTexture(null))}update(){this._mouseCheckCount=0,this._eventId++}setMouseListener(t){this._mouseListener=t}getCacheItem(t){return this._objectCache.getObjectCache(t)}isSpriteVisible(t,e,s,n){return!!this._noSpriteVisibilityChecking||(e=(e-this._screenOffsetY)*this._scale+this._screenOffsetY,(t=(t-this._screenOffsetX)*this._scale+this._screenOffsetX)<this._width&&t+(s*=this._scale)>=0&&e<this._height&&e+(n*=this._scale)>=0&&!this._usesExclusionRectangles)}_Str_21232(t,e,s,n,i,r,a){return e-=this._screenOffsetY,this._mouseLocation.x=(t-=this._screenOffsetX)/this._scale,this._mouseLocation.y=e/this._scale,this._mouseCheckCount>0&&s==h.a.MOUSE_MOVE||(this._mouseSpriteWasHit=this._Str_19207(Math.trunc(t/this._scale),Math.trunc(e/this._scale),s,n,i,r,a),this._mouseCheckCount++),this._mouseSpriteWasHit}_Str_19207(t,e,s,i=!1,r=!1,a=!1,o=!1){const c=[];let l=!1,u=null,_=this._activeSpriteCount-1;for(;_>=0;){const d=this.getExtendedSprite(_);if(d&&d.containsPoint(new n.Point(t-d.x,e-d.y))&&(!d.clickHandling||s!==h.a.MOUSE_CLICK&&s!==h.a.DOUBLE_CLICK)){const n=this.getExtendedSpriteIdentifier(d);if(-1===c.indexOf(n)){const l=d.tag;let _=this._mouseActiveObjects.get(n);_&&_.spriteTag!==l&&(u=this._Str_11609(0,0,0,0,h.a.ROLL_OUT,_.spriteTag,i,r,a,o),this._Str_14715(u,n)),s!==h.a.MOUSE_MOVE||_&&_.spriteTag===l?(u=this._Str_11609(t,e,t-d.x,e-d.y,s,l,i,r,a,o),u.spriteOffsetX=d.offsetX,u.spriteOffsetY=d.offsetY):u=this._Str_11609(t,e,t-d.x,e-d.y,h.a.ROLL_OVER,l,i,r,a,o),_||(_=new I,_.objectId=n,this._mouseActiveObjects.set(n,_)),_.spriteTag=l,s===h.a.MOUSE_MOVE&&t===this._mouseOldX&&e===this._mouseOldY||this._Str_14715(u,n),c.push(n)}l=!0}_--}const d=[];for(const n of this._mouseActiveObjects.keys())n&&d.push(n);let g=0;for(;g<d.length;)c.indexOf(d[g])>=0&&(d[g]=null),g++;for(g=0;g<d.length;){const t=d[g];if(null!==t){const e=this._mouseActiveObjects.get(t);e&&this._mouseActiveObjects.delete(t);const s=this._Str_11609(0,0,0,0,h.a.ROLL_OUT,e.spriteTag,i,r,a,o);this._Str_14715(s,t)}g++}return this._Str_20604(),this._mouseOldX=t,this._mouseOldY=e,l}_Str_11609(t,e,s,n,i,r,a,o,c,l){const h="canvas_"+this._id;return new u(i,h+"_"+this._eventId,h,r,t-this._width/2,e-this._height/2,s,n,o,a,c,l)}_Str_14715(t,e){t&&this._eventCache&&(this._eventCache.delete(e),this._eventCache.set(e,t))}_Str_20604(){if(this._container&&this._eventCache){for(const[t,e]of this._eventCache.entries()){if(!this._eventCache)return;if(!e)continue;const s=this._container.getRoomObject(parseInt(t));if(s)if(this._mouseListener)this._mouseListener._Str_20330(e,s,this._geometry);else{const t=s.mouseHandler;t&&t.mouseEvent(e,this._geometry)}}this._eventCache&&this._eventCache.clear()}}getDisplayAsTexture(){this._noSpriteVisibilityChecking=!0;const t=this._scale,e=this._screenOffsetX,s=this._screenOffsetY;this.setScale(1,null,null,!0),this._screenOffsetX=0,this._screenOffsetY=0,this.render(-1,!0);const i=this._display.getBounds(),r=n.RenderTexture.create({width:this._display.width,height:this._display.height});return l.a.instance.renderer.render(this._display,r,!0,new n.Matrix(1,0,0,1,-i.x,-i.y)),this._noSpriteVisibilityChecking=!1,this.setScale(t,null,null,!0),this._screenOffsetX=e,this._screenOffsetY=s,this._display.mask=this._mask,r}get id(){return this._id}get geometry(){return this._geometry}get master(){return this._master}get display(){return this._display}get screenOffsetX(){return this._screenOffsetX}set screenOffsetX(t){t=Math.trunc(t),this._mouseLocation.x=this._mouseLocation.x-(t-this._screenOffsetX),this._screenOffsetX=t}get screenOffsetY(){return this._screenOffsetY}set screenOffsetY(t){t=Math.trunc(t),this._mouseLocation.y=this._mouseLocation.y-(t-this._screenOffsetY),this._screenOffsetY=t}get scale(){return this._scale}get width(){return this._width*this._scale}get height(){return this._height*this._scale}get restrictsScaling(){return this._restrictsScaling}set restrictsScaling(t){this._restrictsScaling=t}get canvasUpdated(){return this._canvasUpdated}}class y{constructor(){this._objects=new Map,this._canvases=new Map,this._disposed=!1,this._roomObjectVariableAccurateZ=null}dispose(){if(!this._disposed){if(this._canvases){for(const[t,e]of this._canvases.entries())this._canvases.delete(t),e&&e.dispose();this._canvases=null}this._objects&&(this._objects=null),this._disposed=!0}}reset(){this._objects.clear()}getInstanceId(t){return t?t.instanceId:-1}getRoomObject(t){return this._objects.get(t)}addObject(t){t&&this._objects.set(this.getInstanceId(t),t)}removeObject(t){const e=this.getInstanceId(t);this._objects.delete(e);for(const s of this._canvases.values())s&&s.removeFromCache(e.toString())}render(t,e=!1){if(this._canvases&&this._canvases.size)for(const s of this._canvases.values())s&&s.render(t,e)}update(t,e=!1){if(this._canvases&&this._canvases.size){this.render(t,e);for(const t of this._canvases.values())t&&t.update()}}getCanvas(t){const e=this._canvases.get(t);if(e)return e}createCanvas(t,e,s,n){const i=this._canvases.get(t);if(i)return i.initialize(e,s),i.geometry&&(i.geometry.scale=n),i;const r=this.createSpriteCanvas(t,e,s,n);return r?(this._canvases.set(t,r),r):void 0}createSpriteCanvas(t,e,s,n){return new T(this,t,e,s,n)}removeCanvas(t){const e=this._canvases.get(t);e&&(this._canvases.delete(t),e.dispose())}get objects(){return this._objects}get disposed(){return this._disposed}get roomObjectVariableAccurateZ(){return this._roomObjectVariableAccurateZ}set roomObjectVariableAccurateZ(t){this._roomObjectVariableAccurateZ=t}}class O{createRenderer(){return new y}}class C{constructor(t){t<0&&(t=0),this._reservedNumbers=[],this._freeNumbers=[];let e=0;for(;e<t;)this._freeNumbers.push(e),e++}dispose(){this._reservedNumbers=null,this._freeNumbers=null}_Str_19709(){if(this._freeNumbers.length>0){const t=this._freeNumbers.pop();return this._reservedNumbers.push(t),t}return-1}_Str_15187(t){const e=this._reservedNumbers.indexOf(t);e>=0&&(this._reservedNumbers.splice(e,1),this._freeNumbers.push(t))}}var A=s("Ays+"),M=s("mP1c"),w=s("2FAY"),U=s("9vQN"),D=s("JKJw"),N=s("Ns5P");let L=(()=>{class t{static isBuilderClubId(e){return e>=t.BUILDER_CLUB_FURNI_ID_BASE}}return t.BUILDER_CLUB_FURNI_ID_BASE=2147418112,t})();var P=s("ZWGQ"),x=s("G0tw"),F=s("Hs+C");let k=(()=>{class t extends a.a{}return t.DICE_OFF="ROFCAE_DICE_OFF",t.DICE_ACTIVATE="ROFCAE_DICE_ACTIVATE",t.USE_HABBOWHEEL="ROFCAE_USE_HABBOWHEEL",t.STICKIE="ROFCAE_STICKIE",t.ENTER_ONEWAYDOOR="ROFCAE_ENTER_ONEWAYDOOR",t.SOUND_MACHINE_INIT="ROFCAE_SOUND_MACHINE_INIT",t.SOUND_MACHINE_START="ROFCAE_SOUND_MACHINE_START",t.SOUND_MACHINE_STOP="ROFCAE_SOUND_MACHINE_STOP",t.SOUND_MACHINE_DISPOSE="ROFCAE_SOUND_MACHINE_DISPOSE",t.JUKEBOX_INIT="ROFCAE_JUKEBOX_INIT",t.JUKEBOX_START="ROFCAE_JUKEBOX_START",t.JUKEBOX_MACHINE_STOP="ROFCAE_JUKEBOX_MACHINE_STOP",t.JUKEBOX_DISPOSE="ROFCAE_JUKEBOX_DISPOSE",t.MOUSE_BUTTON="ROFCAE_MOUSE_BUTTON",t.MOUSE_ARROW="ROFCAE_MOUSE_ARROW",t})();var W=s("3r1x");class B extends W.a{constructor(t){super(t)}}let V=(()=>{class t extends B{constructor(t,e){super(t),this._targetLocation=e}get targetLocation(){return this._targetLocation}}return t.ROAME_MOVE_TO="ROAME_MOVE_TO",t})();var G=s("IxQr");class K{constructor(){this.id=0,this.data=null,this.image=null}getImage(){return this.image?this.image:this.data?G.a.generateImage(this.data):null}}class H extends c.a{constructor(){super(null,null)}}class j extends H{constructor(t,e){super(),this._itemType=t,this._itemName=e}get itemType(){return this._itemType}get itemName(){return this._itemName}}class z extends H{constructor(t=0){super(),this._numberOfWords=t}get numberOfWords(){return this._numberOfWords}}class Y extends H{constructor(t=0){super(),this._danceStyle=t}get danceStyle(){return this._danceStyle}}class q extends H{constructor(t,e=0){super(),this._effect=t,this._delayMilliseconds=e}get effect(){return this._effect}get delayMilliseconds(){return this._delayMilliseconds}}class X extends H{constructor(t){super(),this._gainedExperience=t}get gainedExperience(){return this._gainedExperience}}class Z extends H{constructor(t=0){super(),this._expressionType=t}get expressionType(){return this._expressionType}}class Q extends H{constructor(t,e=null,s=null,n=!1){super(),this._figure=t,this._gender=e,this._subType=s,this._isRiding=n}get figure(){return this._figure}get gender(){return this._gender}get subType(){return this._subType}get isRiding(){return this._isRiding}}class J extends H{constructor(t=0){super(),this._level=t}get level(){return this._level}}class $ extends H{constructor(t=0){super(),this._gesture=t}get gesture(){return this._gesture}}class tt extends H{constructor(t){super(),this._guideStatus=t}get guideStatus(){return this._guideStatus}}class et extends H{constructor(t=!1){super(),this._isMuted=t}get isMuted(){return this._isMuted}}class st extends H{}class nt extends H{constructor(t){super(),this._gesture=t}get gesture(){return this._gesture}}class it extends H{constructor(t){super(),this._value=t}get value(){return this._value}}class rt extends H{constructor(t){super(),this._isPlayingGame=t}get isPlayingGame(){return this._isPlayingGame}}class at extends H{constructor(t,e=""){super(),this._postureType=t,this._parameter=e}get postureType(){return this._postureType}get parameter(){return this._parameter}}class ot extends H{constructor(t=0){super(),this._signType=t}get signType(){return this._signType}}class ct extends H{constructor(t=!1){super(),this._isSleeping=t}get isSleeping(){return this._isSleeping}}class lt extends H{constructor(t=!1){super(),this._isTyping=t}get isTyping(){return this._isTyping}}class ht extends c.a{constructor(t,e,s,n=!1){super(t,s),this._targetLocation=e,this._isSlide=n}get targetLocation(){return this._targetLocation?this._targetLocation:this.location}get isSlide(){return this._isSlide}}class ut extends ht{constructor(t,e,s,n,i,r){super(t,e,s),this._headDirection=n,this._canStandUp=i,this._baseY=r}get headDirection(){return this._headDirection}get canStandUp(){return this._canStandUp}get baseY(){return this._baseY}}class _t extends H{constructor(t){super(),this._itemType=t}get itemType(){return this._itemType}}class dt extends c.a{constructor(t,e,s=NaN){super(null,null),this._state=t,this._data=e,this._extra=s}get state(){return this._state}get data(){return this._data}get extra(){return this._extra}}let gt=(()=>{class t extends c.a{constructor(t,e){super(null,null),this._badgeId=t,this._assetName=e}get badgeId(){return this._badgeId}get assetName(){return this._assetName}}return t.BADGE_LOADED="ROGBUM_BADGE_LOADED",t})();class mt extends c.a{constructor(t,e,s){super(t,e),this._height=s}get height(){return this._height}}class pt extends c.a{constructor(t){super(null,null),this._data=t}get data(){return this._data}}class ft extends c.a{constructor(t,e){super(null,null),this._numberKey=t,this._numberValue=e}get numberKey(){return this._numberKey}get numberValue(){return this._numberValue}}let Et=(()=>{class t extends c.a{constructor(t,e,s,n){super(null,null),this._type=t,this._color=e,this._light=s,this._backgroundOnly=n}get type(){return this._type}get color(){return this._color}get light(){return this._light}get backgroundOnly(){return this._backgroundOnly}}return t.BACKGROUND_COLOR="RORCUM_BACKGROUND_COLOR",t})(),St=(()=>{class t extends c.a{constructor(t,e,s=0,n=0,i=0,r=0){super(null,null),this._type=t,this._id=e,this._x=s,this._y=n,this._width=i,this._height=r}get type(){return this._type}get id(){return this._id}get x(){return this._x}get y(){return this._y}get width(){return this._width}get height(){return this._height}}return t.ADD="ORPFHUM_ADD",t.REMOVE="ORPFHUM_REMOVE",t})(),bt=(()=>{class t extends c.a{constructor(t,e,s=null,n=null,i="window"){super(null,null),this._type=t,this._maskId=e,this._maskType=s,this._maskLocation=n?new m.a(n.x,n.y,n.z):null,this._maskCategory=i}get type(){return this._type}get maskId(){return this._maskId}get maskType(){return this._maskType}get maskLocation(){return this._maskLocation}get maskCategory(){return this._maskCategory}}return t.ADD_MASK="RORMUM_ADD_MASK",t._Str_10260="RORMUM_ADD_MASK",t.DOOR="door",t.WINDOW="window",t.HOLE="hole",t})(),vt=(()=>{class t extends c.a{constructor(t,e){super(null,null),this._type=t,this._value=e}get type(){return this._type}get value(){return this._value}}return t.WALL_THICKNESS="RORPPUM_WALL_THICKNESS",t.FLOOR_THICKNESS="RORPVUM_FLOOR_THICKNESS",t})(),It=(()=>{class t extends c.a{constructor(t,e){super(null,null),this._type=t,this._visible=e}get type(){return this._type}get visible(){return this._visible}}return t.WALL_VISIBILITY="RORPVUM_WALL_VISIBILITY",t.FLOOR_VISIBILITY="RORPVUM_FLOOR_VISIBILITY",t})(),Rt=(()=>{class t extends c.a{constructor(t,e){super(null,null),this._type=t,this._value=e}get type(){return this._type}get value(){return this._value}}return t.ROOM_WALL_UPDATE="RORUM_ROOM_WALL_UPDATE",t.ROOM_FLOOR_UPDATE="RORUM_ROOM_FLOOR_UPDATE",t.ROOM_LANDSCAPE_UPDATE="RORUM_ROOM_LANDSCAPE_UPDATE",t})();var Tt=s("2L69"),yt=s("v12S"),Ot=s("HqZk"),Ct=s("38Mq"),At=s("XMGm"),Mt=s("IqYK"),wt=s("hTzv");let Ut=(()=>{class t{}return t._Str_16646=-1,t._Str_9735=128,t._Str_9268=256,t})(),Dt=(()=>{class t{constructor(){this._id=t.SPRITE_COUNTER++,this._name="",this._type="",this._spriteType=_.DEFAULT,this._texture=null,this._container=null,this._width=0,this._height=0,this._offsetX=0,this._offsetY=0,this._flipH=!1,this._flipV=!1,this._direction=0,this._alpha=255,this._blendMode=n.BLEND_MODES.NORMAL,this._color=16777215,this._relativeDepth=0,this._Str_8253=!1,this._Str_11397="",this._clickHandling=!1,this._visible=!0,this._tag="",this._posture=null,this._alphaTolerance=Ut._Str_9735,this._filters=[],this._updateCounter=0,this._updateContainer=!1}dispose(){this._texture=null,this._width=0,this._height=0}get id(){return this._id}set id(t){this._id=t}get name(){return this._name}set name(t){this._name!==t&&(this._name=t,this._updateCounter++)}get type(){return this._type}set type(t){this._type=t}get spriteType(){return this._spriteType}set spriteType(t){this._spriteType=t}get texture(){return this._texture}set texture(t){this._texture!==t&&(t&&(this._width=t.width,this._height=t.height),this._texture=t,this._updateCounter++)}get container(){return this._container}set container(t){this._container!==t&&(this.texture=n.Texture.EMPTY,t&&(this._width=t.width,this._height=t.height),this._container=t,this._updateCounter++,this._updateContainer=!0)}get width(){return this._width}get height(){return this._height}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX!==t&&(this._offsetX=t,this._updateCounter++)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY!==t&&(this._offsetY=t,this._updateCounter++)}get flipH(){return this._flipH}set flipH(t){this._flipH!==t&&(this._flipH=t,this._updateCounter++)}get flipV(){return this._flipV}set flipV(t){this._flipV!==t&&(this._flipV=t,this._updateCounter++)}get direction(){return this._direction}set direction(t){this._direction=t}get alpha(){return this._alpha}set alpha(t){this._alpha!==(t&=255)&&(this._alpha=t,this._updateCounter++)}get blendMode(){return this._blendMode}set blendMode(t){this._blendMode!==t&&(this._blendMode=t,this._updateCounter++)}get color(){return this._color}set color(t){this._color!==(t&=16777215)&&(this._color=t,this._updateCounter++)}get relativeDepth(){return this._relativeDepth}set relativeDepth(t){this._relativeDepth!==t&&(this._relativeDepth=t,this._updateCounter++)}get _Str_4593(){return this._Str_8253}set _Str_4593(t){t!==this._Str_8253&&(this._Str_8253=t,this._updateCounter++)}get _Str_3582(){return this._Str_11397}set _Str_3582(t){this._Str_11397=t}get clickHandling(){return this._clickHandling}set clickHandling(t){this._clickHandling=t}get visible(){return this._visible}set visible(t){this._visible!==t&&(this._visible=t,this._updateCounter++)}get tag(){return this._tag}set tag(t){this._tag!==t&&(this._tag=t,this._updateCounter++)}get posture(){return this._posture}set posture(t){this._posture!==t&&(this._posture=t,this._updateCounter++)}get alphaTolerance(){return this._alphaTolerance}set alphaTolerance(t){this._alphaTolerance!==t&&(this._alphaTolerance=t,this._updateCounter++)}get filters(){return this._filters}set filters(t){this._filters=t,this._updateCounter++}get updateCounter(){return this._updateCounter}get updateContainer(){return this._updateContainer}set updateContainer(t){this._updateContainer=t}}return t.SPRITE_COUNTER=0,t})(),Nt=(()=>{class t{constructor(){this._id=t.VISUALIZATION_COUNTER++,this._object=null,this._asset=null,this._sprites=[],this._scale=-1,this._updateObjectCounter=-1,this._updateModelCounter=-1,this._updateSpriteCounter=-1}initialize(t){return!1}update(t,e,s,n){}reset(){this._scale=-1}dispose(){if(this._sprites){for(;this._sprites.length;){const t=this._sprites[0];t&&t.dispose(),this._sprites.pop()}this._sprites=null}this._object=null,this._asset=null}getSprite(t){return t>=0&&t<this._sprites.length?this._sprites[t]:null}getSpriteList(){return null}createSprite(){return this.createSpriteAtIndex(this._sprites.length)}createSpriteAtIndex(t){const e=new Dt;return t>=this._sprites.length?this._sprites.push(e):this._sprites.splice(t,0,e),e}setSpriteCount(t){for(;this._sprites.length>t;){const t=this._sprites[this._sprites.length-1];t&&t.dispose(),this._sprites.pop()}for(;this._sprites.length<t;)this._sprites.push(new Dt)}get image(){return this.getImage(0,-1)}getImage(t,e){const s=this.getBoundingRectangle();if(s.width*s.height==0)return null;const i=this.totalSprites,r=[];let a=0;for(;a<i;){const t=this.getSprite(a);t&&t.visible&&t.texture&&r.push(t),a++}r.sort((t,e)=>e.relativeDepth-t.relativeDepth);const o=new n.Container;for(a=0;a<r.length;){const t=r[a],e=t.texture;if(e){const s=n.Sprite.from(e);s.alpha=t.alpha/255,s.tint=t.color,s.x=t.offsetX,s.y=t.offsetY,s.blendMode=t.blendMode,s.filters=t.filters,t.flipH&&(s.scale.x=-1),t.flipV&&(s.scale.y=-1),o.addChild(s)}a++}return G.a.generateTexture(o)||null}getBoundingRectangle(){const t=this.totalSprites,e=new n.Rectangle;let s=0;for(;s<t;){const t=this.getSprite(s);if(t&&t.texture&&t.visible){const i=new n.Point(t.flipH?-t.width+t.offsetX:t.offsetX,t.flipV?-t.height+t.offsetY:t.offsetY);0===s?(e.x=i.x,e.y=i.y,e.width=t.width,e.height=t.height):(i.x<e.x&&(e.x=i.x),i.y<e.y&&(e.y=i.y),i.x+t.width>e.right&&(e.width=i.x+t.width-e.x),i.y+t.height>e.bottom&&(e.height=i.y+t.height-e.y))}s++}return e}get instanceId(){return this._id}get object(){return this._object}set object(t){this._object=t}get asset(){return this._asset}set asset(t){this._asset&&this._asset.removeReference(),this._asset=t,this._asset&&this._asset.addReference()}get sprites(){return this._sprites}get totalSprites(){return this._sprites.length}get updateObjectCounter(){return this._updateObjectCounter}set updateObjectCounter(t){this._updateObjectCounter=t}get updateModelCounter(){return this._updateModelCounter}set updateModelCounter(t){this._updateModelCounter=t}get updateSpriteCounter(){return this._updateSpriteCounter}set updateSpriteCounter(t){this._updateSpriteCounter=t}get spriteCount(){return this._sprites.length}}return t.VISUALIZATION_COUNTER=0,t})();var Lt=s("/PsI"),Pt=s("Kx+W");class xt{constructor(t,e,s){this._id=t,this._type=e,this._visualization=s}dispose(){this._visualization=null}update(t,e){}animate(t){return!1}get id(){return this._id}get type(){return this._type}get visualization(){return this._visualization}}let Ft=(()=>{class t extends xt{constructor(t,e,s){super(t,e,s),this._asset=null,this._startTime=l.a.instance.time,this._delta=0,this._offsetY=0,this._scale=0,this._state=0}update(t,e){if(!t)return;this._scale=e;let s=64,n=0;if(e<48?(this._asset=this.visualization.getAvatarRenderAsset("user_blowkiss_small"),n=90===this.visualization.angle||270===this.visualization.angle?0:135===this.visualization.angle||180===this.visualization.angle||225===this.visualization.angle?6:-6,this._offsetY=-38,s=32):(this._asset=this.visualization.getAvatarRenderAsset("user_blowkiss"),n=90===this.visualization.angle||270===this.visualization.angle?-3:135===this.visualization.angle||180===this.visualization.angle||225===this.visualization.angle?22:-30,this._offsetY=-70),"sit"===this.visualization.posture?this._offsetY+=s/2:"lay"===this.visualization.posture&&(this._offsetY+=s),this._asset){t.texture=this._asset,t.offsetX=n,t.offsetY=this._offsetY,t.relativeDepth=-.02,t.alpha=0;const e=this._delta;this.animate(t),this._delta=e}}animate(e){if(!e)return!1;if(this._asset&&(e.texture=this._asset),this._state===t.STATE_DELAY)return!(l.a.instance.time-this._startTime<t.DELAY_BEFORE_ANIMATION||(this._state=t.STATE_FADE_IN,e.alpha=0,e.visible=!0,this._delta=0,0));if(this._state===t.STATE_FADE_IN)return this._delta+=.1,e.offsetY=this._offsetY,e.alpha=255*Math.pow(this._delta,.9),this._delta>=1&&(e.alpha=255,this._delta=0,this._state=t.STATE_FLOAT),!0;if(this._state===t.STATE_FLOAT){const s=Math.pow(this._delta,.9);return this._delta+=.05,e.offsetY=this._offsetY+(this._delta<1?s:1)*(this._scale<48?-30:-40),e.alpha=255*(1-s),e.alpha<=0&&(e.visible=!1,this._state=t.STATE_COMPLETE),!0}return!1}}return t.DELAY_BEFORE_ANIMATION=300,t.STATE_DELAY=0,t.STATE_FADE_IN=1,t.STATE_FLOAT=2,t.STATE_COMPLETE=3,t})(),kt=(()=>{class t{static getExpressionAddition(t,e,s){switch(e){case this.BLOW:return new Ft(t,this.BLOW,s);default:return new xt(t,e,s)}}}return t.WAVE=1,t.BLOW=2,t.LAUGH=3,t.CRY=4,t.IDLE=5,t})(),Wt=(()=>{class t{constructor(t,e){this._id=t,this._visualization=e,this._asset=null,this._startTime=l.a.instance.time,this._offsetY=0,this._scale=0,this._state=0}dispose(){this._visualization=null,this._asset=null}getSpriteAssetName(t){let e="left";return 135!==this._visualization.angle&&180!==this._visualization.angle&&225!==this._visualization.angle&&270!==this._visualization.angle||(e="right"),"user_idle_"+e+"_"+t+(this._scale<48?"_small":"")}update(e,s){if(!e)return;this._scale=s,this._asset=this._visualization.getAvatarRenderAsset(this.getSpriteAssetName(this._state===t.STATE_FRAME_A?1:2));let n=64,i=0;s<48?(i=135===this._visualization.angle||180===this._visualization.angle||225===this._visualization.angle||270===this._visualization.angle?10:-16,this._offsetY=-38,n=32):(i=135===this._visualization.angle||180===this._visualization.angle||225===this._visualization.angle||270===this._visualization.angle?22:-30,this._offsetY=-70),"sit"===this._visualization.posture?this._offsetY+=n/2:"lay"===this._visualization.posture&&(this._offsetY+=n-.3*n),this._asset&&(e.texture=this._asset,e.offsetX=i,e.offsetY=this._offsetY,e.relativeDepth=-.02,e.alpha=0)}animate(e){if(!e)return!1;const s=l.a.instance.time;return this._state===t.STATE_DELAY&&s-this._startTime>=t.DELAY_BEFORE_ANIMATION&&(this._state=t.STATE_FRAME_A,this._startTime=s,this._asset=this._visualization.getAvatarRenderAsset(this.getSpriteAssetName(1))),this._state===t.STATE_FRAME_A&&s-this._startTime>=t.DELAY_PER_FRAME&&(this._state=t.STATE_FRAME_B,this._startTime=s,this._asset=this._visualization.getAvatarRenderAsset(this.getSpriteAssetName(2))),this._state===t.STATE_FRAME_B&&s-this._startTime>=t.DELAY_PER_FRAME&&(this._state=t.STATE_FRAME_A,this._startTime=s,this._asset=this._visualization.getAvatarRenderAsset(this.getSpriteAssetName(1))),this._asset?(e.texture=this._asset,e.alpha=255,e.visible=!0):e.visible=!1,!1}get id(){return this._id}}return t.DELAY_BEFORE_ANIMATION=2e3,t.DELAY_PER_FRAME=2e3,t.STATE_DELAY=0,t.STATE_FRAME_A=1,t.STATE_FRAME_B=2,t})();class Bt{constructor(t,e){this._id=t,this._visualization=e,this._asset=null}dispose(){this._visualization=null,this._asset=null}update(t,e){if(!t)return;let s=64,n=0,i=0;e<48?(this._asset=this._visualization.getAvatarRenderAsset("user_muted_small"),s=32,n=-12,i=-66):(this._asset=this._visualization.getAvatarRenderAsset("user_muted"),n=-15,i=-110),"sit"===this._visualization.posture?i+=s/2:"lay"===this._visualization.posture&&(i+=e),this._asset?(t.visible=!0,t.texture=this._asset,t.offsetX=n,t.offsetY=i,t.relativeDepth=-.02):t.visible=!1}animate(t){return this._asset&&t&&(t.texture=this._asset),!1}get id(){return this._id}}class Vt{constructor(t,e,s){this._id=t,this._visualization=s,this._asset=null,this._scale=0,this._number=e,this._numberValueFadeDirection=0,this._numberValueMoving=!1,this._numberValueMoveCounter=0}dispose(){this._visualization=null,this._asset=null}update(t,e){if(!t)return;this._scale=e;let s=64,n=0,i=0;this._number>0?(e<48?(this._asset=this._visualization.getAvatarRenderAsset("number_"+this._number+"_small"),s=32,n=-6,i=-52):(this._asset=this._visualization.getAvatarRenderAsset("number_"+this._number),n=-8,i=-105),"sit"===this._visualization.posture?i+=s/2:"lay"===this._visualization.posture&&(i+=e),this._asset?(t.visible=!0,t.texture=this._asset,t.offsetX=n,t.offsetY=i,t.relativeDepth=-.01,t.alpha=0,this._numberValueFadeDirection=1,this._numberValueMoving=!0,this._numberValueMoveCounter=0):t.visible=!1):t.visible&&(this._numberValueFadeDirection=-1)}animate(t){if(!t)return!1;this._asset&&(t.texture=this._asset);let e=t.alpha,s=!1;if(this._numberValueMoving){if(this._numberValueMoveCounter++,this._numberValueMoveCounter<10)return!1;if(this._numberValueFadeDirection<0)t.offsetY-=this._scale<48?2:4;else{let e=4;this._scale<48&&(e=8),this._numberValueMoveCounter%e||(t.offsetY--,s=!0)}}return this._numberValueFadeDirection>0?(e<255&&(e+=32),e>=255&&(e=255,this._numberValueFadeDirection=0),t.alpha=e,!0):this._numberValueFadeDirection<0?(e>=0&&(e-=32),e<=0&&(this._numberValueFadeDirection=0,this._numberValueMoving=!1,e=0,t.visible=!1),t.alpha=e,!0):s}get id(){return this._id}}class Gt{constructor(t,e){this._id=t,this._visualization=e,this._asset=null,this._relativeDepth=0}dispose(){this._visualization=null,this._asset=null}update(t,e){if(!t)return;t.visible=!0,t.relativeDepth=this._relativeDepth,t.alpha=255;let s=64,n=0,i=0;e<48?(this._asset=this._visualization.getAvatarRenderAsset("user_typing_small"),n=3,i=-42,s=32):(this._asset=this._visualization.getAvatarRenderAsset("user_typing"),n=14,i=-83),"sit"===this._visualization.posture?i+=s/2:"lay"===this._visualization.posture&&(i+=e),this._asset&&(t.texture=this._asset,t.offsetX=n,t.offsetY=i,t.relativeDepth=-.02)}animate(t){return this._asset&&t&&(t.texture=this._asset),!1}get id(){return this._id}get relativeDepth(){return this._relativeDepth}set relativeDepth(t){this._relativeDepth=t}}var Kt=s("Xr/m"),Ht=s("uEox");class jt extends Kt.a{constructor(){super()}initialize(t){return!0}onDispose(){this._avatarRenderer=null}createAvatarImage(t,e,s=null,n=null,i=null){let r=null;return r=this._avatarRenderer.createAvatarImage(t,e>48?Ht.a.LARGE:Ht.a.SMALL,s,n,i),r}getAvatarRendererAsset(t){return this._avatarRenderer?this._avatarRenderer.assets.getTexture(t):null}get avatarManager(){return this._avatarRenderer}set avatarManager(t){this._avatarRenderer=t}get layerCount(){return 0}}let zt=(()=>{class t extends Nt{constructor(){super(),this._data=null,this._avatarImage=null,this._cachedAvatars=new wt.a,this._cachedAvatarEffects=new wt.a,this._shadow=null,this._lastUpdate=-1e3,this._disposed=!1,this._figure=null,this._gender=null,this._direction=-1,this._headDirection=-1,this._posture="",this._postureParameter="",this._canStandUp=!1,this._postureOffset=0,this._verticalOffset=0,this._angle=-1,this._headAngle=-1,this._talk=!1,this._expression=0,this._sleep=!1,this._blink=!1,this._gesture=0,this._sign=-1,this._highlightEnabled=!1,this._highlight=!1,this._dance=0,this._effect=0,this._carryObject=0,this._useObject=0,this._ownUser=!1,this._Str_8935=!1,this._Str_17860=!1,this._Str_1222=!1,this._Str_16697=2,this._Str_12697=0,this._Str_14276=0,this._isAvatarReady=!1,this._needsUpdate=!1,this._geometryUpdateCounter=-1,this._additions=new Map}initialize(e){return e instanceof jt&&(this._data=e,this.setSpriteCount(t._Str_11587),super.initialize(e),!0)}dispose(){this._disposed||(super.dispose(),this._avatarImage&&this._avatarImage.dispose(),this._shadow=null,this._disposed=!0)}update(e,s,i,r){if(!this.object||!e||!this._data)return;if(s<this._lastUpdate+t.UPDATE_TIME_INCREASER)return;this._lastUpdate+=t.UPDATE_TIME_INCREASER,this._lastUpdate+t.UPDATE_TIME_INCREASER<s&&(this._lastUpdate=s-t.UPDATE_TIME_INCREASER);const a=e.scale,o=this._effect;let c=!1,l=!1,h=!1,u=!1;const d=this.updateModel(this.object.model,a);if(d||a!==this._scale||!this._avatarImage){if(a!==this._scale&&(c=!0,this.updateScale(a)),o!==this._effect&&(l=!0),c||!this._avatarImage||l){if(this._avatarImage=this.createAvatarImage(a,this._effect),!this._avatarImage)return;h=!0;const e=this.getSprite(t.AVATAR_LAYER_ID);e&&this._avatarImage&&this._avatarImage.isPlaceholder()?e.alpha=150:e&&(e.alpha=255)}if(!this._avatarImage)return;if(l&&this._avatarImage.animationHasResetOnToggle&&this._avatarImage.resetAnimationFrameCounter(),this.updateShadow(a),u=this.updateObject(this.object,e,i,!0),this.processActionsForAvatar(this._avatarImage),this._additions){let t=this._Str_16697;for(const e of this._additions.values())e.update(this.getSprite(t++),a)}this._scale=a}else u=this.updateObject(this.object,e,i);if(this._additions){let t=this._Str_16697;for(const e of this._additions.values())e.animate(this.getSprite(t++))&&this.updateSpriteCounter++}const g=u||d||c,m=(this._Str_1222||this._Str_12697>0)&&i;if(g&&(this._Str_12697=t._Str_14491),g||m){if(this.updateSpriteCounter++,this._Str_12697--,this._Str_14276--,!(this._Str_14276<=0||c||d||h))return;this._avatarImage.updateAnimationByFrames(1),this._Str_14276=t._Str_14491;let e=this._avatarImage.getCanvasOffsets();(!e||e.length<3)&&(e=t._Str_18338);const s=this.getSprite(t._Str_9540);if(s){const n=1===this.object.model.getValue(At.a.FIGURE_HIGHLIGHT_ENABLE)&&1===this.object.model.getValue(At.a.FIGURE_HIGHLIGHT),i=this._avatarImage.getImage(Pt.a.FULL,n);i&&(s.texture=i,n||(s.filters=[])),s.texture&&(s.offsetX=-1*a/2+e[0]-(s.texture.width-a)/2,s.offsetY=a/4-s.texture.height+e[1]+this._postureOffset),s.relativeDepth=this._Str_8935?this._Str_17860?-.5:t._Str_9235+e[2]:t._Str_11358+e[2],this._ownUser?(s.relativeDepth-=t._Str_17708,s.spriteType=_._Str_10494):s.spriteType=_._Str_11629}const i=this.getAddition(t.TYPING_BUBBLE_ID);i&&(i.relativeDepth=this._Str_8935?t._Str_9235-.01+e[2]:t._Str_11358-.01+e[2]),this._Str_1222=this._avatarImage.isAnimating();let r=t._Str_11587;const o=this._avatarImage.getDirection();for(const c of this._avatarImage.getSprites())if(c.id===t.AVATAR){const e=this.getSprite(t._Str_9540);if(e){const t=this._avatarImage.getLayerData(c);let s=c._Str_809(o),n=c._Str_739(o);t&&(s+=t.dx,n+=t.dy),a<48&&(s/=2,n/=2),this._canStandUp||(e.offsetX+=s,e.offsetY+=n)}}else{const e=this.getSprite(r);if(e){e.alphaTolerance=Ut._Str_9268,e.visible=!0;const s=this._avatarImage.getLayerData(c);let i=0,r=c._Str_809(o),l=c._Str_739(o);const h=c._Str_839(o);let u=0;c._Str_949&&(u=o),s&&(i=s._Str_891,r+=s.dx,l+=s.dy,u+=s.dd),a<48&&(r/=2,l/=2),u<0?u+=8:u>7&&(u-=8);const _=this._avatarImage.getScale()+"_"+c.member+"_"+u+"_"+i,d=this._avatarImage.getAsset(_);if(!d)continue;e.texture=d.texture,e.offsetX=d.offsetX-a/2+r,e.offsetY=d.offsetY+l,e.flipH=d.flipH,e.offsetY+=c._Str_767?this._verticalOffset*a/(2*t._Str_12370):this._postureOffset,e.relativeDepth=this._Str_8935?t._Str_9235-.001*this.totalSprites*h:t._Str_11358-.001*this.totalSprites*h,e.blendMode=33===c.ink?n.BLEND_MODES.ADD:n.BLEND_MODES.NORMAL}r++}}}createAvatarImage(e,s){let n=null,i="avatarImage"+e.toString();if(s?(i+="-"+s,n=this._cachedAvatarEffects.getValue(i)):n=this._cachedAvatars.getValue(i),!n&&(n=this._data.createAvatarImage(this._figure,e,this._gender,this,this),n))if(s){if(this._cachedAvatarEffects.length>=t.MAX_EFFECT_CACHE){const t=this._cachedAvatarEffects.remove(this._cachedAvatarEffects.getKey(0));t&&t.dispose()}this._cachedAvatarEffects.add(i,n)}else this._cachedAvatars.add(i,n);return n}updateObject(t,e,s,n=!1){if(!n&&this.updateObjectCounter===t.updateCounter&&this._geometryUpdateCounter===e.updateId)return!1;let i=t.getDirection().x-e.direction.x,r=this._headDirection-e.direction.x;return"float"===this._posture&&(r=i),i=(i%360+360)%360,r=(r%360+360)%360,"sit"===this._posture&&this._canStandUp&&(i-=i%90-45,r-=r%90-45),(i!==this._angle||n)&&(s=!0,this._angle=i,i-=112.5,i=(i+360)%360,this._avatarImage.setDirectionAngle(Pt.a.FULL,i)),(r!==this._headAngle||n)&&(s=!0,this._headAngle=r,this._headAngle!==this._angle&&(r-=112.5,r=(r+360)%360,this._avatarImage.setDirectionAngle(Pt.a.HEAD,r))),this._geometryUpdateCounter=e.updateId,this.updateObjectCounter=this.object.updateCounter,s}updateModel(e,s){if(!e)return!1;if(this.updateModelCounter===e.updateCounter)return!1;let n=!1;const i=e.getValue(At.a.FIGURE_TALK)>0;i!==this._talk&&(this._talk=i,n=!0);const r=e.getValue(At.a.FIGURE_EXPRESSION);r!==this._expression&&(this._expression=r,n=!0);const a=e.getValue(At.a.FIGURE_SLEEP)>0;a!==this._sleep&&(this._sleep=a,n=!0);const o=e.getValue(At.a.FIGURE_BLINK)>0;o!==this._blink&&(this._blink=o,n=!0);const c=e.getValue(At.a.FIGURE_GESTURE)||0;c!==this._gesture&&(this._gesture=c,n=!0);const l=e.getValue(At.a.FIGURE_POSTURE);l!==this._posture&&(this._posture=l,n=!0);const h=e.getValue(At.a.FIGURE_POSTURE_PARAMETER);h!==this._postureParameter&&(this._postureParameter=h,n=!0);const u=e.getValue(At.a.FIGURE_CAN_STAND_UP);u!==this._canStandUp&&(this._canStandUp=u,n=!0);const _=e.getValue(At.a.FIGURE_VERTICAL_OFFSET)*t.OFFSET_MULTIPLIER;_!==this._verticalOffset&&(this._verticalOffset=_,n=!0);const d=e.getValue(At.a.FIGURE_DANCE)||0;d!==this._dance&&(this._dance=d,n=!0);const g=e.getValue(At.a.FIGURE_EFFECT)||0;g!==this._effect&&(this._effect=g,n=!0);const m=e.getValue(At.a.FIGURE_CARRY_OBJECT)||0;m!==this._carryObject&&(this._carryObject=m,n=!0);const p=e.getValue(At.a.FIGURE_USE_OBJECT)||0;p!==this._useObject&&(this._useObject=p,n=!0);const f=e.getValue(At.a.HEAD_DIRECTION);f!==this._headDirection&&(this._headDirection=f,n=!0),this._carryObject>0&&p>0?this._useObject!==this._carryObject&&(this._useObject=this._carryObject,n=!0):0!==this._useObject&&(this._useObject=0,n=!0);let E=this.getAddition(t.FLOATING_IDLE_Z_ID);this._sleep?(E||(E=this.addAddition(new Wt(t.FLOATING_IDLE_Z_ID,this))),n=!0):E&&this.removeAddition(t.FLOATING_IDLE_Z_ID);const S=e.getValue(At.a.FIGURE_IS_MUTED)>0;let b=this.getAddition(t.MUTED_BUBBLE_ID);if(S)b||(b=this.addAddition(new Bt(t.MUTED_BUBBLE_ID,this))),n=!0;else{b&&(this.removeAddition(t.MUTED_BUBBLE_ID),n=!0);const s=e.getValue(At.a.FIGURE_IS_TYPING)>0;let i=this.getAddition(t.TYPING_BUBBLE_ID);s?(i||(i=this.addAddition(new Gt(t.TYPING_BUBBLE_ID,this))),n=!0):i&&this.removeAddition(t.TYPING_BUBBLE_ID)}const v=e.getValue(At.a.FIGURE_NUMBER_VALUE);let I=this.getAddition(t.NUMBER_BUBBLE_ID);v>0?(I||(I=this.addAddition(new Vt(t.NUMBER_BUBBLE_ID,v,this))),n=!0):I&&this.removeAddition(t.NUMBER_BUBBLE_ID);let R=this.getAddition(t.EXPRESSION_ID);this._expression>0?R||(R=kt.getExpressionAddition(t.EXPRESSION_ID,this._expression,this),R&&this.addAddition(R)):R&&this.removeAddition(t.EXPRESSION_ID),this.updateScale(s);const T=e.getValue(At.a.GENDER);T!==this._gender&&(this._gender=T,n=!0),this.updateFigure(e.getValue(At.a.FIGURE))&&(n=!0);let y=e.getValue(At.a.FIGURE_SIGN);null===y&&(y=-1),this._sign!==y&&(this._sign=y,n=!0);const O=e.getValue(At.a.FIGURE_HIGHLIGHT_ENABLE)>0;if(O!==this._highlightEnabled&&(this._highlightEnabled=O,n=!0),this._highlightEnabled){const t=e.getValue(At.a.FIGURE_HIGHLIGHT)>0;t!==this._highlight&&(this._highlight=t,n=!0)}const C=e.getValue(At.a.OWN_USER)>0;return C!==this._ownUser&&(this._ownUser=C,n=!0),this.updateModelCounter=e.updateCounter,n}setDirection(t){this._direction!==t&&(this._direction=t,this._needsUpdate=!0)}updateScale(t){t<48&&(this._blink=!1),this._postureOffset="sit"===this._posture||"lay"===this._posture?t/2:0,this._Str_17860=!1,this._Str_8935=!1,"lay"===this._posture&&(this._Str_8935=!0,parseInt(this._postureParameter)<0&&(this._Str_17860=!0))}processActionsForAvatar(e){if(!e)return;if(e.initActionAppends(),e.appendAction(Lt.a.POSTURE,this._posture,this._postureParameter),this._gesture>0&&this._avatarImage.appendAction(Lt.a.GESTURE,Lt.a.getGesture(this._gesture)),this._dance>0&&this._avatarImage.appendAction(Lt.a.DANCE,this._dance),this._sign>-1&&this._avatarImage.appendAction(Lt.a.SIGN,this._sign),this._carryObject>0&&this._avatarImage.appendAction(Lt.a.CARRY_OBJECT,this._carryObject),this._useObject>0&&this._avatarImage.appendAction(Lt.a.USE_OBJECT,this._useObject),this._talk&&this._avatarImage.appendAction(Lt.a.TALK),(this._sleep||this._blink)&&this._avatarImage.appendAction(Lt.a.SLEEP),this._expression>0){const t=Lt.a.getExpression(this._expression);if(""!==t)switch(t){case Lt.a.DANCE:this._avatarImage.appendAction(Lt.a.DANCE,2);break;default:this._avatarImage.appendAction(t)}}this._effect>0&&this._avatarImage.appendAction(Lt.a.EFFECT,this._effect),e.endActionAppends(),this._Str_1222=e.isAnimating();let s=t._Str_11587;for(const n of this._avatarImage.getSprites())n.id!==t.AVATAR&&s++;if(s!==this.totalSprites&&this.setSpriteCount(s),this._Str_16697=s,this._additions)for(const t of this._additions.values())this.createSprite()}updateFigure(t){return this._figure!==t&&(this._figure=t,this.clearAvatar(),!0)}resetFigure(t){this.clearAvatar()}resetEffect(t){this.clearAvatar()}clearAvatar(){for(const t of this._cachedAvatars.getValues())t&&t.dispose();for(const t of this._cachedAvatarEffects.getValues())t&&t.dispose();this._cachedAvatars.reset(),this._cachedAvatarEffects.reset(),this._avatarImage=null;const e=this.getSprite(t.AVATAR_LAYER_ID);e&&(e.texture=n.Texture.EMPTY,e.alpha=255)}getAddition(t){return this._additions&&this._additions.get(t)||null}addAddition(t){if(!this.getAddition(t.id))return this._additions.set(t.id,t),t}removeAddition(t){const e=this.getAddition(t);e&&(this._additions.delete(e.id),e.dispose())}updateShadow(e){this._shadow=null;const s=this.getSprite(t.SHADOW_LAYER_ID);if(!s)return;let n="mv"===this._posture||"std"===this._posture||"sit"===this._posture&&this._canStandUp;if(this._effect===t._Str_17502&&(n=!1),n){if(s.visible=!0,!this._shadow||e!==this._scale){let t=0,n=0;e<48?(s._Str_3582="sh_std_sd_1_0_0",this._shadow=this._avatarImage.getAsset(s._Str_3582),t=-8,n=this._canStandUp?6:-3):(s._Str_3582="h_std_sd_1_0_0",this._shadow=this._avatarImage.getAsset(s._Str_3582),t=-17,n=this._canStandUp?10:-7),this._shadow?(s.texture=this._shadow.texture,s.offsetX=t,s.offsetY=n,s.alpha=50,s.relativeDepth=1):s.visible=!1}}else this._shadow=null,s.visible=!1}getAvatarRenderAsset(t){const e=l.a.instance.getConfiguration("images.url")+"/additions/"+t+".png";return this._data?this._data.getAvatarRendererAsset(e):null}get direction(){return this._direction}get posture(){return this._posture}get angle(){return this._angle}get disposed(){return this._disposed}}return t.AVATAR="avatar",t.FLOATING_IDLE_Z_ID=1,t.TYPING_BUBBLE_ID=2,t.EXPRESSION_ID=3,t.NUMBER_BUBBLE_ID=4,t.MUTED_BUBBLE_ID=6,t.OWN_USER_ID=4,t.UPDATE_TIME_INCREASER=41,t.OFFSET_MULTIPLIER=1e3,t.AVATAR_LAYER_ID=0,t.SHADOW_LAYER_ID=1,t._Str_17502=97,t._Str_11587=2,t._Str_14491=2,t._Str_18338=[0,0,0],t.MAX_EFFECT_CACHE=2,t._Str_9540=0,t._Str_12370=1e3,t._Str_11358=-.01,t._Str_17708=.001,t._Str_9235=-.409,t})(),Yt=(()=>{class t{static allocate(e,s,n,i,r,a,o=-1,c=0){const l=t.POOL.length?t.POOL.pop():new t;return i<1&&(i=1),r<0&&(r=t.FRAME_REPEAT_FOREVER),l._id=e,l._x=s||0,l._y=n||0,l._repeats=i,l._frameRepeats=r,l._remainingFrameRepeats=r,l._isLastFrame=a,l._isRecycled=!1,o>=0?(l._activeSequence=o,l._activeSequenceOffset=c):(l._activeSequence=-1,l._activeSequenceOffset=0),l}get id(){return this._id>=0?this._id:-this._id*Math.random()}get x(){return this._x}get y(){return this._y}get repeats(){return this._repeats}get frameRepeats(){return this._frameRepeats}get isLastFrame(){return this._isLastFrame}get remainingFrameRepeats(){return this._frameRepeats<0?t.FRAME_REPEAT_FOREVER:this._remainingFrameRepeats}set remainingFrameRepeats(t){t<0&&(t=0),this._frameRepeats>0&&t>this._frameRepeats&&(t=this._frameRepeats),this._remainingFrameRepeats=t}get activeSequence(){return this._activeSequence}get activeSequenceOffset(){return this._activeSequenceOffset}recycle(){this._isRecycled||(this._isRecycled=!0,t.POOL.length<t.POOL_SIZE_LIMIT&&t.POOL.push(this))}}return t.FRAME_REPEAT_FOREVER=-1,t.SEQUENCE_NOT_DEFINED=-1,t.POOL_SIZE_LIMIT=3e3,t.POOL=[],t})();class qt{constructor(t,e,s,n,i,r){this._id=0,this._x=0,this._y=0,this._randomX=0,this._randomY=0,this._repeats=1,this._id=t,this._x=e,this._y=s,this._randomX=n,this._randomY=i,this._repeats=r}get id(){return this._id}hasDirectionalOffsets(){return!1}getX(t){return this._x}getY(t){return this._y}get x(){return this._x}get y(){return this._x}get randomX(){return this._randomX}get randomY(){return this._randomY}get repeats(){return this._repeats}}class Xt extends qt{constructor(t,e,s,n,i,r,a){super(t,e,s,n,i,a),this._directionalOffsets=r}hasDirectionalOffsets(){return null!==this._directionalOffsets}getX(t){return this._directionalOffsets?this._directionalOffsets.getXOffset(t,super.getX(t)):super.getX(t)}getY(t){return this._directionalOffsets?this._directionalOffsets.getYOffset(t,super.getY(t)):super.getY(t)}}class Zt{constructor(t,e){this._frames=[],this._frameIndexes=[],this._frameRepeats=[],this._isRandom=e,this._loopCount=t<1?1:t}get isRandom(){return this._isRandom}get frameCount(){return this._frameIndexes.length*this._loopCount}dispose(){this._frames=[]}initialize(){let t=this._frameIndexes.length-1,e=-1,s=1;for(;t>=0;)this._frameIndexes[t]===e?s++:(e=this._frameIndexes[t],s=1),this._frameRepeats[t]=s,t--}addFrame(t,e,s,n,i,r){let a=1;if(this._frames.length>0){const r=this._frames[this._frames.length-1];r.id!==t||r.hasDirectionalOffsets()||r.x!==e||r.y!==s||r.randomX!==n||0!==n||r.randomY!==i||0!==i||(a+=r.repeats,this._frames.pop())}const o=r?new Xt(t,e,s,n,i,r,a):new qt(t,e,s,n,i,a);this._frames.push(o),this._frameIndexes.push(this._frames.length-1),this._frameRepeats.push(1)}getFrame(t){return!this._frames.length||t<0||t>=this.frameCount?null:this._frames[this._frameIndexes[t%this._frameIndexes.length]]}getFrameIndex(t){return t<0||t>=this.frameCount?-1:(this._isRandom&&(t=Math.round(Math.random()*this._frameIndexes.length))===this._frameIndexes.length&&t--,t)}getRepeats(t){return t<0||t>=this.frameCount?0:this._frameRepeats[t%this._frameRepeats.length]}}class Qt{constructor(t,e,s){this._frameSequences=[],this._frameCount=-1,this._loopCount=t<0?0:t,this._frameRepeat=e<1?1:e,this._isRandom=s}get frameCount(){return this._frameCount<0&&this.calculateLength(),this._frameCount}dispose(){if(this._frameSequences&&this._frameSequences.length){for(const t of this._frameSequences)t&&t.dispose();this._frameSequences=[]}}addFrameSequence(t,e){const s=new Zt(t,e);return this._frameSequences.push(s),s}calculateLength(){this._frameCount=0;for(const t of this._frameSequences)t&&(this._frameCount+=t.frameCount)}getFrame(t,e){if(this._frameCount<1)return null;if(e/=this._frameRepeat,!this._isRandom){const s=Math.floor(e/this._frameCount);e=Math.floor(e%this._frameCount);let n=!1,i=null;(this._loopCount>0&&s>=this._loopCount||this._loopCount<=0&&1===this._frameCount)&&(e=this._frameCount-1,n=!0);let r=0,a=0;for(;a<this._frameSequences.length;){if(i=this._frameSequences[a],i){if(e<r+i.frameCount)break;r+=i.frameCount}a++}return this.getFrameFromSpecificSequence(t,i,a,e-r,n)}const s=Math.trunc(this._frameSequences.length*Math.random()),n=this._frameSequences[s];return n.frameCount<1?null:this.getFrameFromSpecificSequence(t,n,s,0,!1)}getFrameFromSequence(t,e,s,n){if(e<0||e>=this._frameSequences.length)return null;const i=this._frameSequences[e];return i?s>=i.frameCount?this.getFrame(t,n):this.getFrameFromSpecificSequence(t,i,e,s,!1):null}getFrameFromSpecificSequence(t,e,s,n,i){if(!e)return null;const r=e.getFrameIndex(n),a=e.getFrame(r);if(!a)return null;let o=a.getX(t),c=a.getY(t);const l=a.randomX,h=a.randomY;let u=a.repeats,_=!1;l&&(o=Math.trunc(o+l*Math.random())),h&&(c=Math.trunc(c+h*Math.random())),u>1&&(u=e.getRepeats(r));let d=this._frameRepeat*u;return i&&(d=Yt.FRAME_REPEAT_FOREVER),this._isRandom||e.isRandom||s===this._frameSequences.length-1&&n===e.frameCount-1&&(_=!0),Yt.allocate(a.id,o,c,u,d,_,s,n)}}class Jt{constructor(){this._offsetX=new Map,this._offsetY=new Map}getXOffset(t,e){const s=this._offsetX.get(t);return null==s?e:s}getYOffset(t,e){const s=this._offsetY.get(t);return null==s?e:s}setDirection(t,e,s){this._offsetX.set(t,e),this._offsetY.set(t,s)}}let $t=(()=>{class t{constructor(){this._layers=new Map,this._frameCount=-1,this._randomStart=!1,this._immediateChanges=null}static getTransitionToAnimationId(e){return t.TRANSITION_TO_ANIMATION_OFFSET+e}static getTransitionFromAnimationId(e){return t.TRANSITION_FROM_ANIMATION_OFFSET+e}static isTransitionToAnimation(e){return e>=t.TRANSITION_TO_ANIMATION_OFFSET&&e<t.TRANSITION_FROM_ANIMATION_OFFSET}static isTransitionFromAnimation(e){return e>=t.TRANSITION_FROM_ANIMATION_OFFSET}dispose(){for(const t of this._layers.values())t&&t.dispose();this._layers.clear(),this._immediateChanges=null}setImmediateChanges(t){this._immediateChanges=t}isImmediateChange(t){return!(!this._immediateChanges||-1===this._immediateChanges.indexOf(t))}getStartFrame(t){return this._randomStart?Math.random()*this._frameCount:0}initialize(t){if(t.randomStart&&(this._randomStart=!0),t.layers)for(const e in t.layers){const s=t.layers[e];if(!s)return!1;const n=parseInt(e);if(!this.addLayer(n,void 0!==s.loopCount?s.loopCount:1,void 0!==s.frameRepeat?s.frameRepeat:1,void 0!==s.random&&0!==s.random,s))return!1}return!0}addLayer(t,e,s,n,i){const r=new Qt(e,s,n);if(i.frameSequences)for(const o in i.frameSequences){const t=i.frameSequences[o];if(!t)continue;const e=r.addFrameSequence(void 0!==t.loopCount?t.loopCount:1,void 0!==t.random&&0!==t.random);if(t.frames)for(const s in t.frames){const n=t.frames[s];if(!n)return r.dispose(),!1;e.addFrame(n.id,n.x||0,n.y||0,n.randomX||0,n.randomY||0,this.readDirectionalOffsets(n))}e.initialize()}r.calculateLength(),this._layers.set(t,r);const a=r.frameCount;return a>this._frameCount&&(this._frameCount=a),!0}readDirectionalOffsets(t){let e=null;if(t&&t.offsets)for(const s in t.offsets){const n=t.offsets[s];n&&(e||(e=new Jt),e.setDirection(n.direction,n.x,n.y))}return e}getFrame(t,e,s){const n=this._layers.get(e);return n?n.getFrame(t,s):null}getFrameFromSequence(t,e,s,n,i){const r=this._layers.get(e);return r?r.getFrameFromSequence(t,s,n,i):null}}return t.TRANSITION_TO_ANIMATION_OFFSET=1e6,t.TRANSITION_FROM_ANIMATION_OFFSET=2e6,t.DEFAULT_FRAME_NUMBER=0,t})();class te{constructor(){this._animationId=-1,this._animationAfterTransitionId=0,this._animationOver=!1,this._frameCounter=0,this._frames=[],this._lastFramePlayed=[],this._animationPlayed=[],this._layerCount=0}get animationOver(){return this._animationOver}set animationOver(t){this._animationOver=t}get frameCounter(){return this._frameCounter}set frameCounter(t){this._frameCounter=t}get animationId(){return this._animationId}set animationId(t){t!==this._animationId&&(this._animationId=t,this.resetAnimationFrames(!1))}get animationAfterTransitionId(){return this._animationAfterTransitionId}set animationAfterTransitionId(t){this._animationAfterTransitionId=t}dispose(){this.recycleFrames(),this._frames=null,this._lastFramePlayed=null,this._animationPlayed=null}setLayerCount(t){this._layerCount=t,this.resetAnimationFrames()}resetAnimationFrames(t=!0){!t&&this._frames||(this.recycleFrames(),this._frames=[]),this._lastFramePlayed=[],this._animationPlayed=[],this._animationOver=!1,this._frameCounter=0;let e=0;for(;e<this._layerCount;){if(t||this._frames.length<=e)this._frames[e]=null;else{const t=this._frames[e];t&&(t.recycle(),this._frames[e]=Yt.allocate(t.id,t.x,t.y,t.repeats,0,t.isLastFrame))}this._lastFramePlayed[e]=!1,this._animationPlayed[e]=!1,e++}}recycleFrames(){if(this._frames&&this._frames.length)for(const t of this._frames)t&&t.recycle()}getFrame(t){return t<0||t>=this._layerCount?null:this._frames[t]}setFrame(t,e){if(t<0||t>=this._layerCount)return;const s=this._frames[t];s&&s.recycle(),this._frames[t]=e}getAnimationPlayed(t){return t<0||t>=this._layerCount||this._animationPlayed[t]}setAnimationPlayed(t,e){t<0||t>=this._layerCount||(this._animationPlayed[t]=e)}getLastFramePlayed(t){return t<0||t>=this._layerCount||this._lastFramePlayed[t]}setLastFramePlayed(t,e){t<0||t>=this._layerCount||(this._lastFramePlayed[t]=e)}}class ee{static hex2int(t){return parseInt(t,16)}static inkToBlendMode(t){return"ADD"==t||33==t?n.BLEND_MODES.ADD:n.BLEND_MODES.NORMAL}}let se=(()=>{class t{constructor(t){this._colors=[],this.createColors(t)}createColors(e){if(e)for(let s=0;s<e;s++)this._colors.push(t.DEFAULT_COLOR)}dispose(){this._colors=[]}getLayerColor(e){const s=this._colors[e];return s||0==s?s:t.DEFAULT_COLOR}setColorLayer(t,e){this._colors[t]&&(this._colors[t]=e)}}return t.DEFAULT_COLOR=16777215,t})(),ne=(()=>{class t{constructor(){this._tag=t.DEFAULT_TAG,this._ink=t.DEFAULT_INK,this._alpha=t.DEFAULT_ALPHA,this._ignoreMouse=t.DEFAULT_IGNORE_MOUSE,this._xOffset=t.DEFAULT_XOFFSET,this._yOffset=t.DEFAULT_YOFFSET,this._zOffset=t.DEFAULT_ZOFFSET}setFromLayer(t){t&&(this._tag=t.tag,this._ink=t.ink,this._alpha=t.alpha,this._ignoreMouse=t.ignoreMouse,this._xOffset=t.xOffset,this._yOffset=t.yOffset,this._zOffset=t.zOffset)}get tag(){return this._tag}set tag(t){this._tag=t}get ink(){return this._ink}set ink(t){this._ink=t}get alpha(){return this._alpha}set alpha(t){this._alpha=t}get ignoreMouse(){return this._ignoreMouse}set ignoreMouse(t){this._ignoreMouse=t}get xOffset(){return this._xOffset}set xOffset(t){this._xOffset=t}get yOffset(){return this._yOffset}set yOffset(t){this._yOffset=t}get zOffset(){return this._zOffset}set zOffset(t){this._zOffset=t}}return t.DEFAULT_COUNT=0,t.DEFAULT_DIRECTION=0,t.DEFAULT_TAG="",t.DEFAULT_INK=n.BLEND_MODES.NORMAL,t.DEFAULT_ALPHA=255,t.DEFAULT_IGNORE_MOUSE=!1,t.DEFAULT_XOFFSET=0,t.DEFAULT_YOFFSET=0,t.DEFAULT_ZOFFSET=0,t.ADD_INK=n.BLEND_MODES.ADD,t.SUBTRACT_INK=n.BLEND_MODES.NORMAL,t.DARKEN_INK=n.BLEND_MODES.NORMAL,t})(),ie=(()=>{class t{constructor(t){this._layers=[],this.createLayers(t)}createLayers(t){if(t)for(let e=0;e<t;e++)this._layers.push(new ne)}dispose(){this._layers=[]}setFromDirection(t){if(!t)return;const e=this.layerCount;if(e===t.layerCount)for(let s=0;s<e;s++){const e=this.getLayer(s),n=t.getLayer(s);e&&e.setFromLayer(n)}}getLayer(t){return this._layers[t]||null}getLayerTag(t){const e=this.getLayer(t);return e?e.tag:ne.DEFAULT_TAG}setLayerTag(t,e){const s=this.getLayer(t);s&&(s.tag=e)}getLayerInk(t){const e=this.getLayer(t);return e?e.ink:ne.DEFAULT_INK}setLayerInk(t,e){const s=this.getLayer(t);s&&(isNaN(e)||(s.ink=e))}getLayerAlpha(t){const e=this.getLayer(t);return e?e.alpha:ne.DEFAULT_ALPHA}setLayerAlpha(t,e){const s=this.getLayer(t);s&&(isNaN(e)||(s.alpha=e))}getLayerIgnoreMouse(t){const e=this.getLayer(t);return e?e.ignoreMouse:ne.DEFAULT_IGNORE_MOUSE}setLayerIgnoreMouse(t,e){const s=this.getLayer(t);s&&(s.ignoreMouse=e||!1)}getLayerXOffset(t){const e=this.getLayer(t);return e?e.xOffset:ne.DEFAULT_XOFFSET}setLayerXOffset(t,e){const s=this.getLayer(t);s&&(isNaN(e)||(s.xOffset=e))}getLayerYOffset(t){const e=this.getLayer(t);return e?e.yOffset:ne.DEFAULT_YOFFSET}setLayerYOffset(t,e){const s=this.getLayer(t);s&&(isNaN(e)||(s.yOffset=e))}getLayerZOffset(t){const e=this.getLayer(t);return e?e.zOffset:ne.DEFAULT_ZOFFSET}setLayerZOffset(t,e){const s=this.getLayer(t);s&&(isNaN(e)||(s.zOffset=e))}get layerCount(){return this._layers.length}}return t._Str_9471=-1,t})(),re=(()=>{class t{constructor(e,s){this._layerCount=e<0?0:e>t.MAX_LAYERS?t.MAX_LAYERS:e,this._angle=s<1?1:s>360?360:s,this._defaultDirection=new ie(this._layerCount),this._directions=new Map,this._colors=[],this._lastDirectionData=null,this._lastDirection=-1}dispose(){this._defaultDirection&&this._defaultDirection.dispose();for(const t of this._directions.values())t&&t.dispose();for(const t of this._colors)t&&t.dispose();this.reset()}reset(){this._defaultDirection=null,this._colors=[],this._lastDirectionData=null,this._lastDirection=-1,this._directions.clear()}processLayers(t){return!!t&&this.setDirectionLayers(this._defaultDirection,t)}processDirections(t){if(!t)return!1;for(const e in t){const s=t[e];if(!s)continue;const n=parseInt(e);if(this._directions.get(n))return!1;const i=new ie(this._layerCount);i.setFromDirection(this._defaultDirection),this.setDirectionLayers(i,s.layers),this._directions.set(n,i),this._lastDirectionData=null,this._lastDirection=-1}return!0}processColors(t){if(!t)return!1;for(const e in t){const s=t[e];if(!s&&0!=s)continue;const n=parseInt(e);if(this._colors[n])return!1;const i=new se(this._layerCount);for(const t in s.layers){const e=s.layers[t];if(!e&&0!=e)continue;const n=parseInt(t);i.setColorLayer(n,e.color)}this._colors[n]=i}return!0}setDirectionLayers(t,e){if(!t||!e)return!1;for(const s in e){const n=e[s];if(!n)continue;const i=parseInt(s);if(i<0||i>=this._layerCount)return!1;void 0!==n.ink&&t.setLayerInk(i,ee.inkToBlendMode(n.ink)),void 0!==n.tag&&t.setLayerTag(i,n.tag),void 0!==n.alpha&&t.setLayerAlpha(i,n.alpha),void 0!==n.ignoreMouse&&t.setLayerIgnoreMouse(i,n.ignoreMouse),void 0!==n.x&&t.setLayerXOffset(i,n.x),void 0!==n.y&&t.setLayerYOffset(i,n.y),void 0!==n.z&&t.setLayerZOffset(i,n.z/-1e3)}return!0}getValidDirection(t){if(this._directions.get(t))return t;t=(t%360+360)%360;let e=-1,s=-1;for(const n of this._directions.keys()){let i=(n*this._angle-t+360)%360;i>180&&(i=360-i),(i<e||e<0)&&(e=i,s=n)}return s>=0?Math.trunc(s):0}getDirectionData(t){if(t===this._lastDirection&&this._lastDirectionData)return this._lastDirectionData;let e=this._directions.get(t);return e||(e=this._defaultDirection),this._lastDirection=t,this._lastDirectionData=e,this._lastDirectionData}getLayerTag(t,e){const s=this.getDirectionData(t);return s?s.getLayerTag(e):ne.DEFAULT_TAG}getLayerInk(t,e){const s=this.getDirectionData(t);return s?s.getLayerInk(e):ne.DEFAULT_INK}getLayerAlpha(t,e){const s=this.getDirectionData(t);return s?s.getLayerAlpha(e):ne.DEFAULT_ALPHA}getLayerColor(t,e){const s=this._colors[e];return s?s.getLayerColor(t):se.DEFAULT_COLOR}getLayerIgnoreMouse(t,e){const s=this.getDirectionData(t);return s?s.getLayerIgnoreMouse(e):ne.DEFAULT_IGNORE_MOUSE}getLayerXOffset(t,e){const s=this.getDirectionData(t);return s?s.getLayerXOffset(e):ne.DEFAULT_XOFFSET}getLayerYOffset(t,e){const s=this.getDirectionData(t);return s?s.getLayerYOffset(e):ne.DEFAULT_YOFFSET}getLayerZOffset(t,e){const s=this.getDirectionData(t);return s?s.getLayerZOffset(e):ne.DEFAULT_ZOFFSET}get layerCount(){return this._layerCount}}return t.MAX_LAYERS=26,t})();class ae extends re{constructor(t,e){super(t,e),this._animations=new Map,this._animationIds=[]}dispose(){super.dispose();for(const t of this._animations.values())t&&t.dispose();this._animations.clear(),this._animationIds=[]}defineAnimations(t){if(!t)return!0;for(const e in t){const s=t[e];if(!s)return!1;let n=parseInt(e),i=!1;const r=s.transitionTo,a=s.transitionFrom;void 0!==r&&(n=$t.getTransitionToAnimationId(r),i=!0),void 0!==a&&(n=$t.getTransitionFromAnimationId(a),i=!0);const o=this.createAnimationData();if(!o.initialize(s))return o.dispose(),!1;const c=s.immediateChangeFrom;if(void 0!==c){const t=c.split(","),e=[];for(const s of t){const t=parseInt(s);-1===e.indexOf(t)&&e.push(t)}o.setImmediateChanges(e)}this._animations.set(n,o),i||this._animationIds.push(n)}return!0}createAnimationData(){return new $t}hasAnimation(t){return!!this._animations.get(t)}getAnimationCount(){return this._animationIds.length||0}getAnimationId(t){const e=this.getAnimationCount();return t<0||e<=0?0:this._animationIds[t%e]}isImmediateChange(t,e){const s=this._animations.get(t);return!!s&&s.isImmediateChange(e)}getStartFrame(t,e){const s=this._animations.get(t);return s?s.getStartFrame(e):0}getFrame(t,e,s,n){const i=this._animations.get(t);return i?i.getFrame(e,s,n):null}getFrameFromSequence(t,e,s,n,i,r){const a=this._animations.get(t);return a?a.getFrameFromSequence(e,s,n,i,r):null}}let oe=(()=>{class t{constructor(){this._type="",this._sizes=[],this._sizeDatas=new Map,this._lastSize=-1,this._lastSizeScale=-1,this._lastSizeData=null,this._lastSizeDataScale=-1}initialize(t){return this.reset(),!!t&&(this._type=t.name,!!this.defineVisualizations(t.visualizations)||(this.reset(),!1))}dispose(){if(this._sizeDatas&&this._sizeDatas.size){for(const t of this._sizeDatas.values())t&&t.dispose();this._sizeDatas=null}this._lastSizeData=null,this._sizes=null}reset(){if(this._type="",this._sizeDatas&&this._sizeDatas.size)for(const t of this._sizeDatas.values())t&&t.dispose();this._sizeDatas.clear(),this._sizes=[],this._lastSizeData=null,this._lastSizeDataScale=-1}createSizeData(t,e,s){return new re(e,s)}defineVisualizations(t){if(!t)return!1;for(const e in t){const s=t[e],n=s.layerCount,i=s.angle;let r=s.size;if(r<1&&(r=1),this._sizeDatas.get(r))return!1;const a=this.createSizeData(r,n,i);if(!a)return!1;for(const t in s)if(!this.processVisualElement(a,t,s[t]))return a.dispose(),!1;this._sizeDatas.set(r,a),this._sizes.push(r)}return this._sizes.sort(),!0}processVisualElement(t,e,s){if(!t||!e||!s)return!1;switch(e){case"layers":if(!t.processLayers(s))return!1;break;case"directions":if(!t.processDirections(s))return!1;break;case"colors":if(!t.processColors(s))return!1}return!0}getValidSize(t){if(t===this._lastSizeScale)return this._lastSize;const e=this.getSizeIndex(t);let s=-1;return e<this._sizes.length&&(s=this._sizes[e]),this._lastSizeScale=t,this._lastSize=s,s}getSizeIndex(t){if(t<=0)return 0;let e=0,s=1;for(;s<this._sizes.length;){if(this._sizes[s]>t){this._sizes[s]/t<t/this._sizes[s-1]&&(e=s);break}e=s,s++}return e}getSizeData(t){if(t===this._lastSizeDataScale)return this._lastSizeData;const e=this.getSizeIndex(t);return this._lastSizeData=e<this._sizes.length?this._sizeDatas.get(this._sizes[e]):null,this._lastSizeDataScale=t,this._lastSizeData}getLayerCount(t){const e=this.getSizeData(t);return e?e.layerCount:ne.DEFAULT_COUNT}getValidDirection(t,e){const s=this.getSizeData(t);return s?s.getValidDirection(e):ne.DEFAULT_DIRECTION}getLayerTag(t,e,s){const n=this.getSizeData(t);return n?n.getLayerTag(e,s):ne.DEFAULT_TAG}getLayerInk(t,e,s){const n=this.getSizeData(t);return n?n.getLayerInk(e,s):ne.DEFAULT_INK}getLayerAlpha(t,e,s){const n=this.getSizeData(t);return n?n.getLayerAlpha(e,s):ne.DEFAULT_ALPHA}getLayerColor(t,e,s){const n=this.getSizeData(t);return n?n.getLayerColor(e,s):se.DEFAULT_COLOR}getLayerIgnoreMouse(t,e,s){const n=this.getSizeData(t);return n?n.getLayerIgnoreMouse(e,s):ne.DEFAULT_IGNORE_MOUSE}getLayerXOffset(t,e,s){const n=this.getSizeData(t);return n?n.getLayerXOffset(e,s):ne.DEFAULT_XOFFSET}getLayerYOffset(t,e,s){const n=this.getSizeData(t);return n?n.getLayerYOffset(e,s):ne.DEFAULT_YOFFSET}getLayerZOffset(t,e,s){const n=this.getSizeData(t);return n?n.getLayerZOffset(e,s):ne.DEFAULT_ZOFFSET}get type(){return this._type}}return t.LAYER_LETTERS=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t})();class ce extends oe{createSizeData(t,e,s){return new ae(e,s)}processVisualElement(t,e,s){if(!t||!e||!s)return!1;switch(e){case"animations":if(!(t instanceof ae&&t.defineAnimations(s)))return!1;break;default:if(!super.processVisualElement(t,e,s))return!1}return!0}hasAnimation(t,e){const s=this.getSizeData(t);return s?s.hasAnimation(e):null}getAnimationCount(t){const e=this.getSizeData(t);return e?e.getAnimationCount():null}getAnimationId(t,e){const s=this.getSizeData(t);return s?s.getAnimationId(e):null}isImmediateChange(t,e,s){const n=this.getSizeData(t);return n?n.isImmediateChange(e,s):null}getStartFrame(t,e,s){const n=this.getSizeData(t);return n?n.getStartFrame(e,s):null}getFrame(t,e,s,n,i){const r=this.getSizeData(t);return r?r.getFrame(e,s,n,i):null}getFrameFromSequence(t,e,s,n,i,r,a){const o=this.getSizeData(t);return o?o.getFrameFromSequence(e,s,n,i,r,a):null}}let le=(()=>{class t extends Nt{constructor(){super(),this._data=null,this._type=null,this._direction=0,this._lastCameraAngle=NaN,this._selectedColor=0,this._furnitureLift=0,this._alphaMultiplier=1,this._alphaChanged=!1,this._clickUrl=null,this._cacheDirection=-1,this._cacheScale=0,this._cacheSize=-1,this._layerCount=0,this._shadowLayerIndex=-1,this._updatedLayers=[],this._assetNames=[],this._spriteTags=[],this._spriteInks=[],this._spriteAlphas=[],this._spriteColors=[],this._spriteMouseCaptures=[],this._spriteXOffsets=[],this._spriteYOffsets=[],this._spriteZOffsets=[],this._animationNumber=0}initialize(t){return this.reset(),t instanceof oe&&(this._type=t.type,this._data=t,!0)}dispose(){super.dispose(),this._data=null,this._updatedLayers=null,this._assetNames=null,this._spriteTags=null,this._spriteInks=null,this._spriteAlphas=null,this._spriteColors=null,this._spriteMouseCaptures=null,this._spriteXOffsets=null,this._spriteYOffsets=null,this._spriteZOffsets=null}reset(){super.reset(),this.setDirection(-1),this._data=null,this._updatedLayers=[],this._assetNames=[],this._spriteTags=[],this._spriteInks=[],this._spriteAlphas=[],this._spriteColors=[],this._spriteMouseCaptures=[],this._spriteXOffsets=[],this._spriteYOffsets=[],this._spriteZOffsets=[],this.setSpriteCount(0)}resetLayers(t,e){this._cacheDirection===e&&this._cacheScale===t||(this._updatedLayers=[],this._assetNames=[],this._spriteTags=[],this._spriteInks=[],this._spriteAlphas=[],this._spriteColors=[],this._spriteMouseCaptures=[],this._spriteXOffsets=[],this._spriteYOffsets=[],this._spriteZOffsets=[],this._cacheDirection=e,this._cacheScale=t,this._cacheSize=this.getValidSize(t),this.setLayerCount((this._data&&this._data.getLayerCount(t)||0)+this.getAdditionalLayerCount()))}update(t,e,s,n){if(!t)return;const i=t.scale;let r=!1;this.updateObject(i,t.direction.x)&&(r=!0),this.updateModel(i)&&(r=!0);let a=0;n?this._animationNumber=this._animationNumber|this.updateAnimation(i):(a=this.updateAnimation(i)|this._animationNumber,this._animationNumber=0),(r||0!==a)&&(this.updateSprites(i,r,a),this._scale=i,this.updateSpriteCounter++)}updateObject(t,e){if(!this.object)return!1;if(this.updateObjectCounter===this.object.updateCounter&&t===this._scale&&this._lastCameraAngle===e)return!1;let s=this.object.getDirection().x-(e+135);if(s=(s%360+360)%360,this._data){const e=this._data.getValidDirection(t,s);this.setDirection(e)}return this._lastCameraAngle=e,this._scale=t,this.updateObjectCounter=this.object.updateCounter,this.resetLayers(t,this._direction),!0}updateModel(t){const e=this.object&&this.object.model;if(!e)return!1;if(this.updateModelCounter===e.updateCounter)return!1;this._selectedColor=e.getValue(At.a.FURNITURE_COLOR),this._clickUrl=e.getValue(At.a.FURNITURE_AD_URL),this._furnitureLift=e.getValue(At.a.FURNITURE_LIFT_AMOUNT)||0;let s=e.getValue(At.a.FURNITURE_ALPHA_MULTIPLIER);return isNaN(s)&&(s=1),this._alphaMultiplier!==s&&(this._alphaMultiplier=s,this._alphaChanged=!0),this.updateModelCounter=e.updateCounter,!0}updateSprites(t,e,s){if(this._layerCount!==this.totalSprites&&this.setSpriteCount(this._layerCount),e){let e=this.totalSprites-1;for(;e>=0;)this.updateSprite(t,e),e--}else{let e=0;for(;s>0;)s&&this.updateSprite(t,e),e++,s>>=1}this._alphaChanged=!1}updateSprite(e,s){const n=this.getSpriteAssetName(e,s),i=this.getSprite(s);if(n&&i){const r=this.getAsset(n,s);if(r&&r.texture){i.visible=!0,i.type=this._type,i.texture=r.texture,i.flipH=r.flipH,i.flipV=r.flipV,i.direction=this._direction;let a=0;s!==this._shadowLayerIndex?(i.tag=this.getLayerTag(e,this._direction,s),i.alpha=this.getLayerAlpha(e,this._direction,s),i.color=this.getLayerColor(e,s,this._selectedColor),i.offsetX=r.offsetX+this.getLayerXOffset(e,this._direction,s),i.offsetY=r.offsetY+this.getLayerYOffset(e,this._direction,s),i.blendMode=this.getLayerInk(e,this._direction,s),i.alphaTolerance=this.getLayerIgnoreMouse(e,this._direction,s)?Ut._Str_9268:Ut._Str_9735,a=this.getLayerZOffset(e,this._direction,s),a-=.001*s):(i.offsetX=r.offsetX,i.offsetY=r.offsetY+this.getLayerYOffset(e,this._direction,s),i.alpha=48*this._alphaMultiplier,i.alphaTolerance=Ut._Str_9268,a=1),i.relativeDepth=a*t.DEPTH_MULTIPLIER,i.name=n,i._Str_3582=this.getLibraryAssetNameForSprite(r,i),i.posture=this.getPostureForAsset(e,r.source),i.clickHandling=!1}else this.resetSprite(i)}else i&&this.resetSprite(i)}getLibraryAssetNameForSprite(t,e){return t.source}getPostureForAssetFile(t,e){return null}resetSprite(t){t&&(t.texture=null,t.offsetX=0,t.offsetY=0,t.flipH=!1,t.flipV=!1,t.relativeDepth=0)}getSpriteAssetName(t,e){if(!this._data||e>=oe.LAYER_LETTERS.length)return"";let s=this._assetNames[e],n=this._updatedLayers[e];return s&&s.length||(s=this.cacheSpriteAssetName(t,e,!0),n=1!==this._cacheSize),n&&(s+=this.getFrameNumber(t,e)),s}cacheSpriteAssetName(t,e,s){const n=s?this._cacheSize:this.getValidSize(t);let i="";const r=1!==n;if(i=e!==this._shadowLayerIndex?oe.LAYER_LETTERS[e]||"":"sd",""===i)return null;const a=this._type+(r?"_"+n+"_"+i+"_"+this._direction+"_":"_icon_"+i);return s&&(this._assetNames[e]=a,this._updatedLayers[e]=r),a}getLayerTag(t,e,s){const n=this._spriteTags[s];if(void 0!==n)return n;if(!this._data)return ne.DEFAULT_TAG;const i=this._data.getLayerTag(t,e,s);return this._spriteTags[s]=i,i}getLayerInk(t,e,s){const n=this._spriteInks[s];if(void 0!==n)return n;if(!this._data)return ne.DEFAULT_INK;const i=this._data.getLayerInk(t,e,s);return this._spriteInks[s]=i,i}getLayerAlpha(t,e,s){if(!this._alphaChanged){const t=this._spriteAlphas[s];if(void 0!==t)return t}if(!this._data)return ne.DEFAULT_ALPHA;let n=this._data.getLayerAlpha(t,e,s);return null!==this._alphaMultiplier&&(n*=this._alphaMultiplier),this._spriteAlphas[s]=n,n}getLayerColor(t,e,s){const n=this._spriteColors[e];if(void 0!==n)return n;if(!this._data)return se.DEFAULT_COLOR;const i=this._data.getLayerColor(t,e,s);return this._spriteColors[e]=i,i}getLayerIgnoreMouse(t,e,s){const n=this._spriteMouseCaptures[s];if(void 0!==n)return n;if(!this._data)return ne.DEFAULT_IGNORE_MOUSE;const i=this._data.getLayerIgnoreMouse(t,e,s);return this._spriteMouseCaptures[s]=i,i}getLayerXOffset(t,e,s){const n=this._spriteXOffsets[s];if(void 0!==n)return n;if(!this._data)return ne.DEFAULT_XOFFSET;const i=this._data.getLayerXOffset(t,e,s);return this._spriteXOffsets[s]=i,i}getLayerYOffset(t,e,s){if(s===this._shadowLayerIndex)return Math.ceil(32*this._furnitureLift);const n=this._spriteYOffsets[s];if(void 0!==n)return n;if(!this._data)return ne.DEFAULT_YOFFSET;const i=this._data.getLayerYOffset(t,e,s);return this._spriteYOffsets[s]=i,i}getLayerZOffset(t,e,s){const n=this._spriteZOffsets[s];if(void 0!==n)return n;if(!this._data)return ne.DEFAULT_ZOFFSET;const i=this._data.getLayerZOffset(t,e,s);return this._spriteZOffsets[s]=i,i}getValidSize(t){return this._data?this._data.getValidSize(t):t}setLayerCount(t){this._layerCount=t,this._shadowLayerIndex=t-this.getAdditionalLayerCount()}setDirection(t){this._direction!==t&&(this._direction=t)}getAdditionalLayerCount(){return 1}updateAnimation(t){return 0}getFrameNumber(t,e){return 0}getPostureForAsset(t,e){return null}getAsset(t,e=-1){return this.asset?this.asset.getAsset(t):null}get direction(){return this._direction}}return t.DEPTH_MULTIPLIER=Math.sqrt(.5),t.TYPE=Mt.a.FURNITURE_STATIC,t})(),he=(()=>{class t extends le{constructor(){super(),this._state=-1,this._animationData=new te,this._animationScale=0,this._animationChangeTime=0,this._animatedLayerCount=0,this._directionChanged=!1}initialize(t){return t instanceof ce&&super.initialize(t)}dispose(){super.dispose(),this._animationData&&(this._animationData.dispose(),this._animationData=null)}get animatedLayerCount(){return this._animatedLayerCount}get animationId(){return this._animationData.animationId}getAnimationId(e){return this.animationId!==t.DEFAULT_ANIMATION_ID&&this._data.hasAnimation(this._animationScale,this.animationId)?this.animationId:t.DEFAULT_ANIMATION_ID}updateObject(t,e){if(super.updateObject(t,e)){const t=this.object.getState(0);return t!==this._state&&(this.setAnimation(t),this._state=t,this._animationChangeTime=this.object.model.getValue(At.a.FURNITURE_STATE_UPDATE_TIME)||0),!0}return!1}updateModel(t){if(super.updateModel(t)){if(this.usesAnimationResetting()){const t=this.object.model.getValue(At.a.FURNITURE_STATE_UPDATE_TIME);t>this._animationChangeTime&&(this._animationChangeTime=t,this.setAnimation(this._state))}const t=this.object.model.getValue(At.a.FURNITURE_AUTOMATIC_STATE_INDEX);if(!isNaN(t)){const e=this._data.getAnimationId(this._animationScale,t);this.setAnimation(e)}return!0}return!1}isPlayingTransition(t,e){return!(!$t.isTransitionFromAnimation(t.animationId)&&!$t.isTransitionToAnimation(t.animationId)||e!==t.animationAfterTransitionId||t.animationOver)}getCurrentState(t){const e=t.animationId;return $t.isTransitionFromAnimation(e)||$t.isTransitionToAnimation(e)?t.animationAfterTransitionId:e}setAnimation(t){this._data&&this.setSubAnimation(this._animationData,t,this._state>=0)}setSubAnimation(t,e,s=!0){const n=t.animationId;if(s){if(this.isPlayingTransition(t,e))return!1;const s=this.getCurrentState(t);if(e!==s){if(!this._data.isImmediateChange(this._animationScale,e,s)){let n=$t.getTransitionFromAnimationId(s);this._data.hasAnimation(this._animationScale,n)?(t.animationAfterTransitionId=e,e=n):(n=$t.getTransitionToAnimationId(e),this._data.hasAnimation(this._animationScale,n)&&(t.animationAfterTransitionId=e,e=n))}}else if($t.isTransitionFromAnimation(t.animationId)){const s=$t.getTransitionToAnimationId(e);this._data.hasAnimation(this._animationScale,s)&&(t.animationAfterTransitionId=e,e=s)}else if(!$t.isTransitionToAnimation(t.animationId)&&this.usesAnimationResetting()){const n=$t.getTransitionFromAnimationId(s);if(this._data.hasAnimation(this._animationScale,n))t.animationAfterTransitionId=e,e=n;else{const s=$t.getTransitionToAnimationId(e);this._data.hasAnimation(this._animationScale,s)&&(t.animationAfterTransitionId=e,e=s)}}}return n!==e&&(t.animationId=e,!0)}getLastFramePlayed(t){return this._animationData.getLastFramePlayed(t)}resetAllAnimationFrames(){this._animationData&&this._animationData.setLayerCount(this._animatedLayerCount)}updateAnimation(t){if(!this._data)return 0;t!==this._animationScale&&(this._animationScale=t,this._animatedLayerCount=this._data.getLayerCount(t),this.resetAllAnimationFrames());const e=this.updateAnimations(t);return this._directionChanged=!1,e}updateAnimations(t){if(this._animationData.animationOver&&!this._directionChanged)return 0;const e=this.updateFramesForAnimation(this._animationData,t);return this._animationData.animationOver&&($t.isTransitionFromAnimation(this._animationData.animationId)||$t.isTransitionToAnimation(this._animationData.animationId))&&(this.setAnimation(this._animationData.animationAfterTransitionId),this._animationData.animationOver=!1),e}updateFramesForAnimation(e,s){if(e.animationOver&&!this._directionChanged)return 0;const n=this.getAnimationId(e);let i=e.frameCounter;i||(i=this._data.getStartFrame(s,n,this._direction)),i+=t.FRAME_INCREASE_AMOUNT,e.frameCounter=i,e.animationOver=!0;let r=!1,a=this._animatedLayerCount-1,o=0,c=1<<this._animatedLayerCount-1;for(;a>=0;){let l=0;if(r=e.getAnimationPlayed(a),!r||this._directionChanged){let h=e.getLastFramePlayed(a),u=e.getFrame(a);u&&u.isLastFrame&&u.remainingFrameRepeats<=t.FRAME_INCREASE_AMOUNT&&(h=!0),(this._directionChanged||!u||u.remainingFrameRepeats>=0&&(u.remainingFrameRepeats=u.remainingFrameRepeats-t.FRAME_INCREASE_AMOUNT)<=0)&&(l=Yt.SEQUENCE_NOT_DEFINED,u&&(l=u.activeSequence),u=l===Yt.SEQUENCE_NOT_DEFINED?this._data.getFrame(s,n,this._direction,a,i):this._data.getFrameFromSequence(s,n,this._direction,a,l,u.activeSequenceOffset+u.repeats,i),e.setFrame(a,u),o|=c),u&&u.remainingFrameRepeats!=Yt.FRAME_REPEAT_FOREVER?e.animationOver=!1:(h=!0,r=!0),e.setLastFramePlayed(a,h),e.setAnimationPlayed(a,r)}c>>=1,a--}return o}getFrameNumber(t,e){const s=this._animationData.getFrame(e);return s?s.id:super.getFrameNumber(t,e)}getLayerXOffset(t,e,s){const n=super.getLayerXOffset(t,e,s),i=this._animationData.getFrame(s);return i?n+i.x:n}getLayerYOffset(t,e,s){const n=super.getLayerYOffset(t,e,s),i=this._animationData.getFrame(s);return i?n+i.y:n}usesAnimationResetting(){return!1}setDirection(t){this._direction!==t&&(super.setDirection(t),this._directionChanged=!0)}}return t.FRAME_INCREASE_AMOUNT=1,t.TYPE=Mt.a.FURNITURE_ANIMATED,t.DEFAULT_ANIMATION_ID=0,t})(),ue=(()=>{class t extends he{constructor(){super(),this._badgeAssetNameNormalScale="",this._badgeAssetNameSmallScale="",this._badgeVisibleInState=-1}updateModel(t){let e=super.updateModel(t);if(!isNaN(this.object.model.getValue(At.a.FURNITURE_BADGE_IMAGE_STATUS))&&0!==this.object.model.getValue(At.a.FURNITURE_BADGE_IMAGE_STATUS)&&""===this._badgeAssetNameNormalScale){this._badgeAssetNameNormalScale=this.object.model.getValue(At.a.FURNITURE_BADGE_ASSET_NAME),""===this._badgeAssetNameSmallScale&&(this._badgeAssetNameSmallScale=this._badgeAssetNameNormalScale+"_32");const t=this.object.model.getValue(At.a.FURNITURE_BADGE_VISIBLE_IN_STATE);isNaN||(this._badgeVisibleInState=t),e=!0}return e}getSpriteAssetName(e,s){return this.getLayerTag(e,this.direction,s)!==t.BADGE||-1!==this._badgeVisibleInState&&this.object.getState(0)!==this._badgeVisibleInState?super.getSpriteAssetName(e,s):32===e?this._badgeAssetNameSmallScale:this._badgeAssetNameNormalScale}getLayerXOffset(e,s,n){let i=super.getLayerXOffset(e,s,n);if(this.getLayerTag(e,s,n)===t.BADGE){const t=this.getAsset(32===e?this._badgeAssetNameSmallScale:this._badgeAssetNameNormalScale,n);t&&(i+=64===e?(40-t.width)/2:(20-t.width)/2)}return i}getLayerYOffset(e,s,n){let i=super.getLayerYOffset(e,s,n);if(this.getLayerTag(e,s,n)===t.BADGE){const t=this.getAsset(32===e?this._badgeAssetNameSmallScale:this._badgeAssetNameNormalScale,n);t&&(i+=64===e?(40-t.height)/2:(20-t.height)/2)}return i}}return t.BADGE="BADGE",t})(),_e=(()=>{class t extends le{constructor(){super(),this._imageUrl=null,this._shortUrl=null,this._imageReady=!1,this._offsetX=0,this._offsetY=0,this._offsetZ=0}dispose(){super.dispose(),this._imageUrl&&this.asset&&this.asset.disposeAsset(this._imageUrl)}updateObject(t,e){return!!super.updateObject(t,e)&&(this._imageReady&&this.checkAndCreateImageForCurrentState(),!0)}updateModel(t){const e=super.updateModel(t);if(e&&(this._offsetX=this.object.model.getValue(At.a.FURNITURE_BRANDING_OFFSET_X),this._offsetY=this.object.model.getValue(At.a.FURNITURE_BRANDING_OFFSET_Y),this._offsetZ=this.object.model.getValue(At.a.FURNITURE_BRANDING_OFFSET_Z)),this._imageReady){if(this.checkIfImageChanged())return this._imageReady=!1,this._imageUrl=null,!0}else if(this._imageReady=this.checkIfImageReady(),this._imageReady)return this.checkAndCreateImageForCurrentState(),!0;return e}imageReady(t,e){this._imageUrl=t?e:null}checkIfImageChanged(){const t=this.object.model.getValue(At.a.FURNITURE_BRANDING_IMAGE_URL);return!(t&&t===this._imageUrl||(this.asset&&this.asset.disposeAsset(this._imageUrl),0))}checkIfImageReady(){if(!this.object||!this.object.model)return!1;const t=this.object.model.getValue(At.a.FURNITURE_BRANDING_IMAGE_URL);if(!t)return!1;if(this._imageUrl&&this._imageUrl===t)return!1;if(1===this.object.model.getValue(At.a.FURNITURE_BRANDING_IMAGE_STATUS)){const e=l.a.instance.core.asset.getTexture(t);return!!e&&(this.imageReady(e,t),!0)}return!1}checkAndCreateImageForCurrentState(){if(!this._imageUrl)return;const t=l.a.instance.core.asset.getTexture(this._imageUrl);t&&this.asset.addAsset(this._imageUrl,t,!0,0,0,!1,!1)}getSpriteAssetName(e,s){return this.getLayerTag(e,this._direction,s)===t.BRANDED_IMAGE&&this._imageUrl?this._imageUrl:super.getSpriteAssetName(e,s)}getLayerIgnoreMouse(e,s,n){return this.getLayerTag(e,s,n)===t.BRANDED_IMAGE||super.getLayerIgnoreMouse(e,s,n)}}return t.BRANDED_IMAGE="branded_image",t})();class de extends _e{getAdClickUrl(t){return t.getValue(At.a.FURNITURE_BRANDING_URL)}getLayerXOffset(t,e,s){return super.getLayerXOffset(t,e,s)+this._offsetX}getLayerYOffset(t,e,s){return super.getLayerYOffset(t,e,s)+this._offsetY}getLayerZOffset(t,e,s){return super.getLayerZOffset(t,e,s)}}let ge=(()=>{class t extends he{constructor(){super(),this._stateQueue=[],this._running=!1}setAnimation(e){if(-1===e&&!this._running)return this._running=!0,this._stateQueue=[],void this._stateQueue.push(t._Str_4186);if(e>=0&&e<=7){if(this._running)return this._running=!1,this._stateQueue=[],this._stateQueue.push(t.ANIMATION_ID_OFFSET_SLOW1),this._stateQueue.push(t.ANIMATION_ID_OFFSET_SLOW2+e),void this._stateQueue.push(e);super.setAnimation(e)}}updateAnimation(t){return this.getLastFramePlayed(0)&&this._stateQueue.length&&super.setAnimation(this._stateQueue.shift()),super.updateAnimation(t)}}return t.ANIMATION_ID_OFFSET_SLOW1=20,t.ANIMATION_ID_OFFSET_SLOW2=9,t._Str_4186=-1,t})();class me extends le{}let pe=(()=>{class t extends he{getFrameNumber(e,s){const n=this.getLayerTag(e,this.direction,s),i=this.object.getState(0);switch(n){case t.SECONDS_SPRITE:return Math.floor(i%60%10);case t.TEN_SECONDS_SPRITE:return Math.floor(i%60/10);case t.MINUTES_SPRITE:return Math.floor(i/60%10);case t.TEN_MINUTES_SPRITE:return Math.floor(i/60/10%10);default:return super.getFrameNumber(e,s)}}get animationId(){return 0}}return t.SECONDS_SPRITE="seconds_sprite",t.TEN_SECONDS_SPRITE="ten_seconds_sprite",t.MINUTES_SPRITE="minutes_sprite",t.TEN_MINUTES_SPRITE="ten_minutes_sprite",t})();class fe extends Nt{}let Ee=(()=>{class t extends he{constructor(){super(),this._Str_22237=null,this._Str_10040=null,this._Str_21698=-1,this._Str_16232=!1}get _Str_23660(){return!(null==this._Str_10040)}_Str_6645(t){this._Str_10040=t,this._Str_16232=!0}updateModel(t){const e=super.updateModel(t);return this._Str_16232||this._Str_21698!==this.direction?(this._Str_25236(),!0):e}_Str_25236(){null!=this.asset&&(this._Str_10040?this._Str_20857(this._Str_10040,64):this.asset.disposeAsset(this._Str_15493(64)),this._Str_16232=!1,this._Str_21698=this.direction)}_Str_20857(e,s){let n=0;for(;n<this.totalSprites;){if(this.getLayerTag(s,this.direction,n)===t.THUMBNAIL){const t=this.cacheSpriteAssetName(s,n,!1)+this.getFrameNumber(s,n),i=this.getAsset(t,n);if(i){const t=this._Str_25562(e,i),n=this._Str_15493(s);this.asset.disposeAsset(n),this.asset.addAsset(n,t,!0,i.offsetX,i.offsetY,!1,!1)}return}n++}}_Str_25562(t,e){const s=new n.Matrix,i=e.width/t.width;switch(this.direction){case 2:s.a=i,s.b=-.5*i,s.c=0,s.d=1.1*i,s.tx=0,s.ty=.5*i*t.width;break;case 0:case 4:s.a=i,s.b=.5*i,s.c=0,s.d=1.1*i,s.tx=0,s.ty=0;break;default:s.a=i,s.b=0,s.c=0,s.d=i,s.tx=0,s.ty=0}const r=n.Sprite.from(t);return r.transform.setFromMatrix(s),G.a.generateTexture(r,new n.Rectangle(0,0,e.width,e.height))}getSpriteAssetName(e,s){return this._Str_10040&&this.getLayerTag(e,this.direction,s)===t.THUMBNAIL?this._Str_15493(e):super.getSpriteAssetName(e,s)}_Str_15493(t){return this._Str_22237=this._Str_12961(this.object.id,64),this._Str_22237}_Str_12961(t,e){return[this._type,t,"thumb",e].join("_")}}return t.THUMBNAIL="THUMBNAIL",t})();class Se extends Ee{constructor(){super(),this._cachedUrl=null}updateModel(t){if(this.object){const t=this.getThumbnailURL();if(this._cachedUrl!==t)if(this._cachedUrl=t,this._cachedUrl&&""!==this._cachedUrl){const e=new Image;e.src=t,e.crossOrigin="*",e.onload=()=>{const t=n.Texture.from(e);t.baseTexture.scaleMode=n.SCALE_MODES.LINEAR,this._Str_6645(t)}}else this._Str_6645(null)}return super.updateModel(t)}getThumbnailURL(){throw new Error("This method must be overridden!")}}class be extends Se{constructor(){super(),this._url=null,this._typePrefix=null}getThumbnailURL(){if(!this.object)return null;if(this._url)return this._url;const t=this.object.model.getValue(At.a.FURNITURE_DATA);if(!t||""===t)return null;this.object.type.indexOf("")>=0&&(this._typePrefix=this.object.type.indexOf("")>=0?"":"postcards/selfie/");let e=JSON.parse(t).w||"";return e=this._Str_18056(e),this._url=e,this._url}_Str_18056(t){return-1===(t=t.replace(".png","_small.png")).indexOf(".png")&&(t+="_small.png"),l.a.instance.getConfiguration("cdn.url")+t}}class ve extends he{}let Ie=(()=>{class t extends ve{constructor(){super(...arguments),this._packetType=0,this._ribbonType=0,this._lastAnimationId=0}update(t,e,s,n){this.updatePresentWrap(),super.update(t,e,s,n)}updatePresentWrap(){if(!this.object)return;const e=this.object.model.getValue(At.a.FURNITURE_EXTRAS),s=parseInt(e),n=Math.floor(s/1e3),i=s%1e3;this._packetType=n>t.MAX_PACKET_TYPE_VALUE?0:n,this._ribbonType=i>t.MAX_RIBBON_TYPE_VALUE?0:i}getFrameNumber(e,s){if(this._lastAnimationId===t.PRESENT_DEFAULT_STATE){if(s<=1)return this._packetType;if(2===s)return this._ribbonType}return super.getFrameNumber(e,s)}getSpriteAssetName(t,e){const s=this.getValidSize(t);let n=this._type,i="";i=e<this.spriteCount-1?String.fromCharCode("a".charCodeAt(0)+e):"sd";const r=this.getFrameNumber(t,e);return n=n+"_"+s+"_"+i+"_"+this.direction,n=n+"_"+r,n}setAnimation(t){this._lastAnimationId=t,super.setAnimation(t)}}return t.PRESENT_DEFAULT_STATE=0,t.MAX_PACKET_TYPE_VALUE=9,t.MAX_RIBBON_TYPE_VALUE=11,t})();class Re extends le{constructor(){super(...arguments),this._packetType=0,this._ribbonType=0}update(t,e,s,n){this.updatePresentWrap(),super.update(t,e,s,n)}updatePresentWrap(){if(!this.object)return;const t=this.object.model.getValue(At.a.FURNITURE_EXTRAS),e=parseInt(t);this._packetType=Math.floor(e/1e3),this._ribbonType=e%1e3}getFrameNumber(t,e){return e<=1?this._packetType:this._ribbonType}getSpriteAssetName(t,e){const s=this.getValidSize(t);let n=this._type,i="";i=e<this.spriteCount-1?String.fromCharCode("a".charCodeAt(0)+e):"sd";const r=this.getFrameNumber(t,e);return n=n+"_"+s+"_"+i+"_"+this.direction,n=n+"_"+r,n}}let Te=(()=>{class t extends he{constructor(){super(),this._color1=t.DEFAULT_COLOR_1,this._color2=t.DEFAULT_COLOR_2}updateModel(t){const e=super.updateModel(t);return!!e&&(this._color1=this.object.model.getValue(At.a.FURNITURE_GUILD_CUSTOMIZED_COLOR_1),this._color2=this.object.model.getValue(At.a.FURNITURE_GUILD_CUSTOMIZED_COLOR_2),e)}getLayerColor(t,e,s){switch(this.getLayerTag(t,this._direction,e)){case"COLOR1":return this._color1;case"COLOR2":return this._color2}return super.getLayerColor(t,e,s)}}return t.DEFAULT_COLOR_1=15658734,t.DEFAULT_COLOR_2=4934475,t})();class ye extends Ee{}let Oe=(()=>{class t extends he{constructor(){super(),this._stateQueue=[],this._running=!1}setAnimation(e){if(-1===e&&!this._running)return this._running=!0,this._stateQueue=[],this._stateQueue.push(t._Str_7627),void this._stateQueue.push(t._Str_4186);if(e>0&&e<=t.ANIMATION_ID_OFFSET_SLOW1){if(this._running)return this._running=!1,this._stateQueue=[],this._stateQueue.push(t.ANIMATION_ID_OFFSET_SLOW1+e),this._stateQueue.push(t.ANIMATION_ID_OFFSET_SLOW2+e),void this._stateQueue.push(e);super.setAnimation(e)}}updateAnimation(t){return this.getLastFramePlayed(1)&&this.getLastFramePlayed(2)&&this.getLastFramePlayed(3)&&this._stateQueue.length&&super.setAnimation(this._stateQueue.shift()),super.updateAnimation(t)}}return t.ANIMATION_ID_OFFSET_SLOW1=10,t.ANIMATION_ID_OFFSET_SLOW2=20,t._Str_7627=31,t._Str_4186=32,t})();class Ce extends oe{constructor(){super(),this._avatarData=new jt}dispose(){super.dispose(),this._avatarData&&(this._avatarData.dispose(),this._avatarData=null)}createAvatarImage(t,e,s=null,n=null,i=null){return this._avatarData.createAvatarImage(t,e,s,n,i)}set avatarManager(t){this._avatarData.avatarManager=t}}let Ae=(()=>{class t extends le{constructor(){super(),this._mannequinScale=-1,this._figure=null,this._gender=null,this._dynamicAssetName=null,this._needsUpdate=!1,this._placeHolderFigure="hd-99999-99998",this._disposed=!1}initialize(t){return t instanceof Ce&&super.initialize(t)}dispose(){this._disposed||(this._disposed=!0,this._dynamicAssetName&&this.asset&&(this.asset.disposeAsset(this._dynamicAssetName),this._dynamicAssetName=null),super.dispose())}updateObject(t,e){const s=super.updateObject(t,e);return s&&this._mannequinScale!==t&&(this._mannequinScale=t,this.updateAvatar()),s}updateModel(t){let e=super.updateModel(t);if(e){const t=this.object.model.getValue(At.a.FURNITURE_MANNEQUIN_FIGURE)||null;t&&(this._figure=t+"."+this._placeHolderFigure,this._gender=this.object.model.getValue(At.a.FURNITURE_MANNEQUIN_GENDER)||null,this.updateAvatar())}return e=e||this._needsUpdate,this._needsUpdate=!1,e}updateAvatar(t=!1){if(!this.avatarExists()||t){const t=this._data.createAvatarImage(this._figure,this._mannequinScale,this._gender,this);t&&(t.setDirection(Pt.a.FULL,this.direction),this._dynamicAssetName&&this.asset.disposeAsset(this._dynamicAssetName),this.asset.addAsset(this._Str_10185(),t.getImage(Pt.a.FULL,!1,1,!1),!0),this._dynamicAssetName=this._Str_10185(),this._needsUpdate=!0,t.dispose())}}avatarExists(){return this._figure&&null!==this.getAsset(this._Str_10185())}_Str_10185(){return"mannequin_"+this._figure+"_"+this._mannequinScale+"_"+this.direction+"_"+this.object.id}resetFigure(t){t===this._figure&&this.updateAvatar(!0)}getSpriteAssetName(e,s){const n=this.getLayerTag(e,this.direction,s);return this._figure&&n===t.AVATAR_IMAGE_SPRITE_TAG&&this.avatarExists()?this._Str_10185():super.getSpriteAssetName(e,s)}getLayerXOffset(e,s,n){return this.getLayerTag(e,s,n)===t.AVATAR_IMAGE_SPRITE_TAG&&this.avatarExists()?-this.getSprite(n).width/2:super.getLayerXOffset(e,s,n)}getLayerYOffset(e,s,n){return this.getLayerTag(e,s,n)===t.AVATAR_IMAGE_SPRITE_TAG&&this.avatarExists()?-this.getSprite(n).height:super.getLayerYOffset(e,s,n)}get disposed(){return this._disposed}}return t.AVATAR_IMAGE_SPRITE_TAG="avatar_image",t})();class Me extends he{}class we extends he{}class Ue extends le{}let De=(()=>{class t extends he{constructor(){super(),this._stateQueue=[],this._animationCounter=-1}setAnimation(e){return e===t._Str_18395&&(this._stateQueue=[],this._stateQueue.push(t._Str_15915),this._animationCounter=t._Str_16054),super.setAnimation(e)}updateAnimation(t){return this._animationCounter>0&&this._animationCounter--,this._animationCounter||this._stateQueue.length&&super.setAnimation(this._stateQueue.shift()),super.updateAnimation(t)}usesAnimationResetting(){return!0}}return t._Str_4186=3,t._Str_18395=2,t._Str_15915=1,t._Str_16054=15,t})();class Ne extends he{usesAnimationResetting(){return!0}}class Le extends _e{imageReady(t,e){super.imageReady(t,e),t&&this.setImageOffset(t.width,t.height)}setImageOffset(t,e){const s=new Jt;s.setDirection(1,0,-e),s.setDirection(3,0,0),s.setDirection(5,-t,0),s.setDirection(7,-t,-e),s.setDirection(4,-t/2,-e/2),this._imageOffset=s}getLayerXOffset(t,e,s){if(this._imageOffset){const t=this._imageOffset.getXOffset(e,0);if(void 0!==t)return t+this._offsetX}return super.getLayerXOffset(t,e,s)+this._offsetX}getLayerYOffset(t,e,s){if(this._imageOffset){const t=this._imageOffset.getYOffset(e,0);if(void 0!==t)return t+this._offsetY}return super.getLayerYOffset(t,e,s)+this._offsetY}getLayerZOffset(t,e,s){return super.getLayerZOffset(t,e,s)+-this._offsetZ}}let Pe=(()=>{class t extends he{getFrameNumber(e,s){const n=this.getLayerTag(e,this.direction,s),i=this.object.getState(0);switch(n){case t.ONES_SPRITE:return Math.floor(i%10);case t.TENS_SPRITE:return Math.floor(i/10%10);case t.HUNDREDS_SPRITE:return Math.floor(i/100%10);case t.THOUSANDS_SPRITE:return Math.floor(i/1e3%10);default:return super.getFrameNumber(e,s)}}}return t.ONES_SPRITE="ones_sprite",t.TENS_SPRITE="tens_sprite",t.HUNDREDS_SPRITE="hundreds_sprite",t.THOUSANDS_SPRITE="thousands_sprite",t})();class xe extends he{}class Fe extends le{getLayerColor(t,e,s){return this._data?this._data.getLayerColor(t,e,s):se.DEFAULT_COLOR}}let ke=(()=>{class t extends he{constructor(){super(),this._stateQueue=[],this._running=!1,super.setAnimation(t._Str_11236)}setAnimation(e){if(0===e&&!this._running)return this._running=!0,this._stateQueue=[],this._stateQueue.push(t._Str_7627),void this._stateQueue.push(t._Str_4186);if(e>0&&e<=t.ANIMATION_ID_OFFSET_SLOW2){if(this._running)return this._running=!1,this._stateQueue=[],2===this.direction?(this._stateQueue.push(t.ANIMATION_ID_OFFSET_SLOW1+5),this._stateQueue.push(t.ANIMATION_ID_OFFSET_SLOW2+5)):(this._stateQueue.push(t.ANIMATION_ID_OFFSET_SLOW1+e),this._stateQueue.push(t.ANIMATION_ID_OFFSET_SLOW2+e)),void this._stateQueue.push(t._Str_11236);super.setAnimation(t._Str_11236)}}updateAnimation(t){return this.getLastFramePlayed(11)&&this._stateQueue.length&&super.setAnimation(this._stateQueue.shift()),super.updateAnimation(t)}}return t.ANIMATION_ID_OFFSET_SLOW1=20,t.ANIMATION_ID_OFFSET_SLOW2=10,t._Str_7627=31,t._Str_4186=32,t._Str_11236=30,t})(),We=(()=>{class t extends he{updateObject(t,e){return super.updateObject(t,e),!0}getFrameNumber(e,s){const n=this.object.model.getValue(At.a.FURNITURE_VOTE_COUNTER_COUNT);switch(this.getLayerTag(e,this.direction,s)){case t.ONES_SPRITE:return n%10;case t.TENS_SPRITE:return n/10%10;case t.HUNDREDS_SPRITE:return n/100%10;default:return super.getFrameNumber(e,s)}}getLayerAlpha(e,s,n){if(this.object.model.getValue(At.a.FURNITURE_VOTE_COUNTER_COUNT)===t._Str_17839)switch(this.getLayerTag(e,s,n)){case t.ONES_SPRITE:case t.TENS_SPRITE:case t.HUNDREDS_SPRITE:return 0}return super.getLayerAlpha(e,s,n)}}return t.ONES_SPRITE="ones_sprite",t.TENS_SPRITE="tens_sprite",t.HUNDREDS_SPRITE="hundreds_sprite",t._Str_17839=-1,t})(),Be=(()=>{class t extends he{getFrameNumber(e,s){const n=this.object.model.getValue(At.a.FURNITURE_VOTE_MAJORITY_RESULT);switch(this.getLayerTag(e,this.direction,s)){case t.ONES_SPRITE:return n%10;case t.TENS_SPRITE:return n/10%10;case t.HUNDREDS_SPRITE:return n/100%10;default:return super.getFrameNumber(e,s)}}getLayerAlpha(e,s,n){const i=this.object.model.getValue(At.a.FURNITURE_VOTE_MAJORITY_RESULT);if(-1!==t._Str_16109.indexOf(this.object.getState(0))||i===t._Str_17618)switch(this.getLayerTag(e,s,n)){case t.ONES_SPRITE:case t.TENS_SPRITE:case t.HUNDREDS_SPRITE:return 0}return super.getLayerAlpha(e,s,n)}}return t.ONES_SPRITE="ones_sprite",t.TENS_SPRITE="tens_sprite",t.HUNDREDS_SPRITE="hundreds_sprite",t._Str_16109=[-1,1],t._Str_17618=-1,t})();class Ve extends he{}let Ge=(()=>{class t extends Se{getThumbnailURL(){return this.object?this.object.model.getValue(At.a.FURNITURE_DATA)[t.THUMBNAIL_URL]:null}}return t.THUMBNAIL_URL="THUMBNAIL_URL",t})(),Ke=(()=>{class t extends ae{constructor(t,e){super(t,e),this._posturesToAnimations=new Map,this._gesturesToAnimations=new Map,this._defaultPosture=null}processPostures(t){if(!t)return!1;for(const e in t){const s=t[e];s&&(this._posturesToAnimations.get(s.id)||(null===this._defaultPosture&&(this._defaultPosture=s.id),this._posturesToAnimations.set(s.id,s.animationId)))}return void 0!==this._posturesToAnimations.get(this._defaultPosture)}processGestures(t){if(!t)return!1;for(const e in t){const s=t[e];s&&(this._gesturesToAnimations.get(s.id)||this._gesturesToAnimations.set(s.id,s.animationId))}return!0}postureToAnimation(t){return this._posturesToAnimations.get(t)||(t=this._defaultPosture),this._posturesToAnimations.get(t)}_Str_18284(t){return"ded"===t}gestureToAnimation(e){return this._gesturesToAnimations.get(e)?this._gesturesToAnimations.get(e):t.DEFAULT}_Str_14207(t,e){if(t>=0&&t<this._posturesToAnimations.size){const e=this._posturesToAnimations.keys();for(;;){const s=e.next();if(s.done)return null;if(t<=0)return s.value;--t}}return e?this._defaultPosture:null}_Str_17844(t){if(t>=0&&t<this._gesturesToAnimations.size){const e=this._gesturesToAnimations.keys();for(;;){const s=e.next();if(s.done)return null;if(t<=0)return s.value;--t}}return null}_Str_17976(t){for(const e of this._gesturesToAnimations.keys())if(this._gesturesToAnimations.get(e)===t)return e;return null}get totalPostures(){return this._posturesToAnimations.size}get totalGestures(){return this._gesturesToAnimations.size}}return t.DEFAULT=-1,t})();class He extends ce{constructor(){super(),this._isAllowedToTurnHead=!0}createSizeData(t,e,s){return t>1?new Ke(e,s):new ae(e,s)}defineVisualizations(t){return this._isAllowedToTurnHead=!0,super.defineVisualizations(t)}processVisualElement(t,e,s){if(!t||!e||!s)return!1;switch(e){case"postures":if(!(t instanceof Ke&&t.processPostures(s)))return!1;break;case"gestures":if(!(t instanceof Ke&&t.processGestures(s)))return!1;break;default:if(!super.processVisualElement(t,e,s))return!1}return!0}postureToAnimation(t,e){const s=this.getSizeData(t);return s?s.postureToAnimation(e):Ke.DEFAULT}_Str_18284(t,e){const s=this.getSizeData(t);return!!s&&s._Str_18284(e)}gestureToAnimation(t,e){const s=this.getSizeData(t);return s?s.gestureToAnimation(e):Ke.DEFAULT}_Str_14207(t,e,s){const n=this.getSizeData(t);return n?n._Str_14207(e,s):null}_Str_17844(t,e){const s=this.getSizeData(t);return s?s._Str_17844(e):null}_Str_17976(t,e){const s=this.getSizeData(t);return s?s._Str_17976(e):null}totalPostures(t){const e=this.getSizeData(t);return e?e.totalPostures:0}totalGestures(t){const e=this.getSizeData(t);return e?e.totalGestures:0}get isAllowedToTurnHead(){return this._isAllowedToTurnHead}}let je=(()=>{class t extends he{constructor(){for(super(),this._data=null,this._posture="",this._gesture="",this._isSleeping=!1,this._headDirection=-1,this._headOnly=!1,this._nonHeadSprites=[],this._headSprites=[],this._saddleSprites=[],this._animationOver=!1,this._paletteIndex=-1,this._paletteName="",this._customLayerIds=[],this._customPartIds=[],this._customPaletteIds=[],this._isRiding=!1,this._color=16777215,this._previousAnimationDirection=-1,this._animationStates=[];this._animationStates.length<t._Str_16677;)this._animationStates.push(new te)}initialize(t){return t instanceof He&&super.initialize(t)}dispose(){if(super.dispose(),this._animationStates){for(;this._animationStates.length;){const t=this._animationStates[0];t&&t.dispose(),this._animationStates.pop()}this._animationStates=null}}getAnimationId(t){return t.animationId}update(t,e,s,n){super.update(t,e,s,n)}updateModel(t){const e=this.object&&this.object.model;if(!e)return!1;if(this.updateModelCounter===e.updateCounter)return!1;const s=e.getValue(At.a.FIGURE_POSTURE),n=e.getValue(At.a.FIGURE_GESTURE);e.getValue(At.a.FIGURE_POSTURE),this.setPostureAndGesture(s,n);let i=e.getValue(At.a.FURNITURE_ALPHA_MULTIPLIER)||null;(null===i||isNaN(i))&&(i=1),this._alphaMultiplier!==i&&(this._alphaMultiplier=i,this._alphaChanged=!0),this._isSleeping=e.getValue(At.a.FIGURE_SLEEP)>0;const r=e.getValue(At.a.HEAD_DIRECTION);this._headDirection=!isNaN(r)&&this._data.isAllowedToTurnHead?r:this.object.getDirection().x;const a=e.getValue(At.a.PET_PALETTE_INDEX),o=e.getValue(At.a.PET_CUSTOM_LAYER_IDS),c=e.getValue(At.a.PET_CUSTOM_PARTS_IDS),l=e.getValue(At.a.PET_CUSTOM_PALETTE_IDS),h=e.getValue(At.a.PET_IS_RIDING),u=e.getValue(At.a.PET_HEAD_ONLY),_=e.getValue(At.a.PET_COLOR);return a!==this._paletteIndex&&(this._paletteIndex=a,this._paletteName=this._paletteIndex.toString()),this._customLayerIds=o||[],this._customPartIds=c||[],this._customPaletteIds=l||[],this._isRiding=!isNaN(h)&&h>0,this._headOnly=!isNaN(u)&&u>0,isNaN(_)||this._color===_||(this._color=_),this.updateModelCounter=e.updateCounter,!0}updateAnimation(t){if(this.object){const t=this.object.getDirection().x;t!==this._previousAnimationDirection&&(this._previousAnimationDirection=t,this.resetAllAnimationFrames())}return super.updateAnimation(t)}setPostureAndGesture(e,s){e!==this._posture&&(this._posture=e,this._Str_16058(t._Str_16082,this._data.postureToAnimation(this._scale,e))),this._data._Str_18284(this._scale,e)&&(s=null),s!==this._gesture&&(this._gesture=s,this._Str_16058(t._Str_17658,this._data.gestureToAnimation(this._scale,s)))}_Str_22634(t){return t>=0&&t<this._animationStates.length?this._animationStates[t]:null}_Str_16058(t,e){const s=this._Str_22634(t);s&&this.setSubAnimation(s,e)&&(this._animationOver=!1)}resetAllAnimationFrames(){this._animationOver=!1;let t=this._animationStates.length-1;for(;t>=0;){const e=this._animationStates[t];e&&e.setLayerCount(this.animatedLayerCount),t--}}updateAnimations(t){if(this._animationOver)return 0;let e=!0,s=0,n=0;for(;n<this._animationStates.length;){const i=this._animationStates[n];i&&!i.animationOver&&(s|=this.updateFramesForAnimation(i,t),i.animationOver?($t.isTransitionFromAnimation(i.animationId)||$t.isTransitionToAnimation(i.animationId))&&(this._Str_16058(n,i.animationAfterTransitionId),e=!1):e=!1),n++}return this._animationOver=e,s}getSpriteAssetName(e,s){if(this._headOnly&&this._Str_24824(s))return null;if(this._isRiding&&this._parser3(s))return null;const n=this.totalSprites;if(s<n-t._Str_7490){const i=this.getValidSize(e);if(s<n-(1+t._Str_7490)){if(s>=oe.LAYER_LETTERS.length)return null;const t=oe.LAYER_LETTERS[s];return 1===i?this._type+"_icon_"+t:this._type+"_"+i+"_"+t+"_"+this.getDirection(e,s)+"_"+this.getFrameNumber(i,s)}return this._type+"_"+i+"_sd_"+this.getDirection(e,s)+"_0"}return null}getLayerColor(e,s,n){return s<this.totalSprites-t._Str_7490?this._color:16777215}getLayerXOffset(t,e,s){let n=super.getLayerXOffset(t,e,s),i=this._animationStates.length-1;for(;i>=0;){const t=this._animationStates[i];if(t){const e=t.getFrame(s);e&&(n+=e.x)}i--}return n}getLayerYOffset(t,e,s){let n=super.getLayerYOffset(t,e,s),i=this._animationStates.length-1;for(;i>=0;){const t=this._animationStates[i];if(t){const e=t.getFrame(s);e&&(n+=e.y)}i--}return n}getLayerZOffset(t,e,s){return this._data?this._data.getLayerZOffset(t,this.getDirection(t,s),s):ne.DEFAULT_ZOFFSET}getDirection(t,e){return this._Str_23973(e)?this._data.getValidDirection(t,this._headDirection):this._direction}getFrameNumber(t,e){let s=this._animationStates.length-1;for(;s>=0;){const t=this._animationStates[s];if(t){const s=t.getFrame(e);if(s)return s.id}s--}return super.getFrameNumber(t,e)}_Str_23973(e){if(void 0===this._headSprites[e]){const s=this._data.getLayerTag(this._scale,ie._Str_9471,e)===t.HEAD,n=this._data.getLayerTag(this._scale,ie._Str_9471,e)===t.HAIR;this._headSprites[e]=!(!s&&!n)}return this._headSprites[e]}_Str_24824(e){if(void 0===this._nonHeadSprites[e])if(e<this.totalSprites-(1+t._Str_7490)){const s=this._data.getLayerTag(this._scale,ie._Str_9471,e);this._nonHeadSprites[e]=!!(s&&s.length>0&&s!==t.HEAD&&s!==t.HAIR)}else this._nonHeadSprites[e]=!0;return this._nonHeadSprites[e]}_parser3(e){return void 0===this._saddleSprites[e]&&(this._saddleSprites[e]=this._data.getLayerTag(this._scale,ie._Str_9471,e)===t.SADDLE),this._saddleSprites[e]}getAsset(t,e=-1){if(!this.asset)return null;const s=this._customLayerIds.indexOf(e);let n=this._paletteName,i=-1,r=-1;return s>-1&&(i=this._customPartIds[s],r=this._customPaletteIds[s],n=r>-1?r.toString():this._paletteName),!isNaN(i)&&i>-1&&(t=t+"_"+i),this.asset.getAssetWithPalette(t,n)}getAdditionalLayerCount(){return super.getAdditionalLayerCount()+t._Str_7490}setLayerCount(t){super.setLayerCount(t),this._headSprites=[]}getPostureForAsset(t,e){const s=e.split("_");let n=s.length,i=0;for(;i<s.length;){if("64"===s[i]||"32"===s[i]){n=i+3;break}i++}let r=null;if(n<s.length){let e=s[n];e=e.split("@")[0],r=this._data._Str_14207(t,parseInt(e)/100,!1),r||(r=this._data._Str_17976(t,parseInt(e)/100))}return r}}return t.TYPE=Mt.a.PET_ANIMATED,t.HEAD="head",t.SADDLE="saddle",t.HAIR="hair",t._Str_7490=1,t._Str_13277=1e3,t.PET_EXPERIENCE_BUBBLE_PNG="pet_experience_bubble_png",t._Str_16082=0,t._Str_17658=1,t._Str_16677=2,t})(),ze=(()=>{class t{constructor(t,e,s){this.type=t,this.loc=e,this.category=s}get loc(){return this._loc}set loc(t){this._loc||(this._loc=new m.a),this._loc.assign(t)}get type(){return this._type}set type(t){this._type=t}get category(){return this._category}set category(t){this._category=t}dispose(){this._loc=null}}return t.WINDOW="window",t.HOLE="hole",t})();class Ye{constructor(){this._masks=[]}get masks(){return this._masks}}class qe{constructor(){this._masks=new Map}get _Str_6845(){return this._masks.size}dispose(){this._masks&&(this.reset(),this._masks=null)}initialize(t){if(!t)return!1;if(this._masks.clear(),t.masks.length)for(const e of t.masks){if(!e)continue;const t=e.locations.length?e.locations[0]:null;t&&this._masks.set(e.id,new ze(e.type,t,e.category))}return!0}reset(){for(const t of this._masks.values())t&&t.dispose();this._masks.clear()}addMask(t,e,s,n){const i=new ze(e,s,n);this._masks.delete(t),this._masks.set(t,i)}_Str_23574(t){const e=this._masks.get(t);return!!e&&(this._masks.delete(t),e.dispose(),!0)}_Str_5598(){const t=new Ye;for(const[e,s]of this._masks.entries()){if(!s)continue;const n=this._Str_21678(s),i=this._Str_21644(s),r=this._Str_19038(s);n&&i&&r&&t.masks.push({id:e,type:n,category:i,locations:[{x:r.x,y:r.y,z:r.z}]})}return t}_Str_19038(t){return t?t.loc:null}_Str_21678(t){return t?t.type:null}_Str_21644(t){return t?t.category:null}get masks(){return this._masks}}var Xe=s("mkz/"),Ze=s("BFtu");class Qe{constructor(t=null,e=0,s=!1){this._assetNames=[],this._maskAssetNames=[],this._maskAssetLocations=[],this._maskAssetFlipHs=[],this._maskAssetFlipVs=[],null!=t&&(this._maskAssetNames=t._maskAssetNames,this._maskAssetLocations=t._maskAssetLocations,this._maskAssetFlipHs=t._maskAssetFlipHs,this._maskAssetFlipVs=t._maskAssetFlipVs),this._color=e,this._alignBottom=s}addMask(t,e,s,n){this._maskAssetNames.push(t),this._maskAssetLocations.push(e),this._maskAssetFlipHs.push(s),this._maskAssetFlipVs.push(n)}_Str_22862(t){this._assetNames.push(t)}set z(t){this._z=t}get z(){return this._z}set cornerPoints(t){this._points=t}get cornerPoints(){return this._points}get color(){return this._color}get _Str_21807(){return this._maskAssetNames}get _Str_20731(){return this._maskAssetLocations}get _Str_21810(){return this._maskAssetFlipHs}get _Str_19044(){return this._maskAssetFlipVs}_Str_14945(){return this._alignBottom}get _Str_17636(){return this._assetNames}}class Je{constructor(t,e,s){this._type=t,this._leftSideLoc=e,this._rightSideLoc=s}get type(){return this._type}get _Str_5120(){return this._leftSideLoc}get _Str_4659(){return this._rightSideLoc}}class $e{constructor(t,e,s,n){this._leftSideLoc=t,this._rightSideLoc=e,this._leftSideLength=s,this._rightSideLength=n}get _Str_5120(){return this._leftSideLoc}get _Str_4659(){return this._rightSideLoc}get _Str_9124(){return this._leftSideLength}get _Str_12156(){return this._rightSideLength}}class ts{constructor(t,e){this._bitmap=t,this._timeStamp=e}dispose(){this._bitmap=null}get bitmap(){return this._bitmap}get timeStamp(){return this._timeStamp}}let es=(()=>{class t{constructor(){this._Str_16737=1,this._Str_16979=16777216,this._Str_25697=69069,this._Str_23320=5}static _Str_17384(e=1){t._Str_3699||(t._Str_3699=new t),t._Str_3699._Str_15634=e}static _Str_26085(e=16777216){t._Str_3699||(t._Str_3699=new t),t._Str_3699._Str_25321=e}static _Str_1612(e,s,n){return t._Str_3699||(t._Str_3699=new t),t._Str_3699._Str_24535(e,s,n)}static _Str_23572(e,s){return t._Str_3699||(t._Str_3699=new t),t._Str_3699._Str_24231(e,s)}set _Str_15634(t){this._Str_16737=t}set _Str_25321(t){t<1&&(t=1),this._Str_16979=t}dispose(){}_Str_24535(t,e,s){const n=[];let i=0;for(;i<t;)n.push(this._Str_19361(e,s-e)),i++;return n}_Str_24231(t,e){if(t>e||e>1e3)return null;const s=[];let n=0;for(;n<=e;)s.push(n),n++;const i=[];let r=0;for(;r<t;){const t=this._Str_19361(0,s.length-1);i.push(s[t]),s.splice(t,1),r++}return i}_Str_24980(){let t=this._Str_25697*this._Str_16737+this._Str_23320;return t<0&&(t=-t),t%=this._Str_16979,this._Str_16737=t,t}_Str_19361(t,e){let s=this._Str_24980();return e<1?t:(s=t+s/this._Str_16979*e,s)}}return t._Str_21045=1,t._Str_20078=16777216,t._Str_3699=null,t})(),ss=(()=>{class t{constructor(e,s,i,r,a,o,c,l,h=0,u=0,_=0,d=0){if(this._Str_4795=null,this._Str_1720=0,this._height=0,this._Str_5886=[],this._Str_4047=[],this._Str_5088=[],this._Str_8341=[],this._Str_14495=[],this._Str_16308=l,this._Str_1049=null,this._Str_2730=null,this._Str_4891=!1,this._Str_5545=null,this._Str_5221=new m.a,this._Str_5221.assign(e),this._location=new m.a,this._location.assign(s),this._Str_2920=new m.a,this._Str_2920.assign(i),this._Str_2943=new m.a,this._Str_2943.assign(r),this._normal=m.a.crossProduct(this._Str_2920,this._Str_2943),this._normal.length>0&&this._normal.multiply(1/this._normal.length),null!=c)for(const t of c){if(!t)continue;const e=new m.a;e.assign(t),this._Str_5886.push(e)}this._disposed=!1,this._Str_3816=!1,this._Str_576=null,this._Str_13946=!0,this._Str_3406=-1,this._offset=new n.Point,this._relativeDepth=0,this._type=a,this._color=0,this._rasterizer=null,this._Str_7367=!0,this._Str_2708=new Map,this._Str_2820=new m.a,this._Str_2745=new m.a,this._Str_2639=new m.a,this._Str_2766=new m.a,this._Str_1720=0,this._height=0,this._Str_20541=h,this._Str_19707=u,this._Str_21079=_,this._Str_22024=d,this._Str_4542=o,this._uniqueId=++t._uniqueIdCounter}static blend(t,e){return 0}set _Str_14801(t){t!==this._Str_7367&&(this._Str_7367||this._Str_11000(),this._Str_7367=t)}get _Str_14801(){return this._Str_7367}get bitmapData(){if(!this.visible||!this._Str_1049)return null;let t=Cs.getTextureCache(this._Str_1049);return t||(t=G.a.generateTexture(this._Str_1049,new n.Rectangle(0,0,this._Str_1720,this._height)),Cs.addTextureCache(this._Str_1049,t)),t}get visible(){return this._Str_3816&&this._Str_7367}get offset(){return this._offset}get relativeDepth(){return this._relativeDepth}get color(){return this._color}set color(t){this._color=t}get type(){return this._type}get _Str_5424(){return this._Str_2920}get _Str_4968(){return this._Str_2943}get location(){return this._location}get normal(){return this._normal}get _Str_18448(){return this._Str_13946}set _Str_18448(t){this._Str_13946=t}set rasterizer(t){this._rasterizer=t}set _Str_16279(t){this._Str_4795=t}set id(t){t!==this._Str_576&&(this._Str_11000(),this._Str_576=t)}get uniqueId(){return this._uniqueId}dispose(){if(this._Str_1049&&(this._Str_1049.destroy(),this._Str_1049=null),this._Str_2708){for(const t of this._Str_2708.values())t&&(t.bitmap&&t.bitmap.destroy(),t.dispose());this._Str_2708=null}this._Str_5545=null,this._location=null,this._Str_5221=null,this._Str_2920=null,this._Str_2943=null,this._normal=null,this._rasterizer=null,this._Str_2820=null,this._Str_2745=null,this._Str_2639=null,this._Str_2766=null,this._Str_4047=null,this._Str_5088=null,this._Str_2730&&(this._Str_2730.destroy(),this._Str_2730=null),this._disposed=!0}_Str_24896(t){return this.visible&&this._Str_1049&&t?this._Str_1049.width!==t.width||this._Str_1049.height!==t.height?null:t:null}_Str_17642(t,e){const s=this._Str_2708.get(t);return s&&(this._Str_2708.delete(t),s.dispose()),this._Str_5545=e,this._Str_2708.set(t,e),!0}_Str_11000(t=null){if(this._Str_2708&&this._Str_2708.size){for(const t of this._Str_2708.values())t&&t.dispose();this._Str_2708.clear()}this._Str_5545=null}getTextureIdentifier(t){return this._rasterizer?this._rasterizer.getTextureIdentifier(t,this.normal):t.toString()}_Str_10518(t,e){if(!t)return!1;let s=this._Str_5545;return s||(s=this._Str_2708.get(this.getTextureIdentifier(t.scale))),this._Str_19336(),!(!this._Str_7367||!(!s||s.timeStamp>=0&&e>s.timeStamp||this._Str_4891))}_Str_10114(t,e){if(!t)return null;let s=null;if(this._Str_10518(t,e)){const i=this.getTextureIdentifier(t.scale),r=this._Str_2920.length*t.scale,a=this._Str_2943.length*t.scale,o=t.getCoordinatePosition(this._normal);s=this._Str_5545?this._Str_5545:this._Str_2708.get(i);let c=null;if(s&&(c=s.bitmap),this._rasterizer)s=this._rasterizer.render(c,this._Str_576,r,a,t.scale,o,this._Str_13946,this._Str_20541,this._Str_19707,this._Str_21079,this._Str_22024,e),s&&c&&s.bitmap!==c&&c.destroy();else{const t=new n.Graphics;t.beginFill(16777215),t.drawRect(0,0,r,a),t.endFill(),s=new ts(t,-1)}s&&(this._Str_17859(s.bitmap,t),this._Str_17642(i,s))}else s=this._Str_5545?this._Str_5545:this._Str_2708.get(this.getTextureIdentifier(t.scale));return s?(this._Str_5545=s,s.bitmap):null}_Str_23649(t){if(!this._Str_4542)return null;const e=new Qe;for(;0<this._Str_4047.length;){const s=this._Str_4047[0];if(s){const i=this._Str_4795._Str_8361(s.type);if(i){const r=i._Str_2125(t.scale);if(r){const a=t.getCoordinatePosition(this._normal),o=i._Str_21021(t.scale,a);if(o){const t=new n.Point(this._Str_2730.width*(1-s._Str_5120/this._Str_2920.length)+o.offsetX,this._Str_2730.height*(1-s._Str_4659/this._Str_2943.length)+o.offsetY);e.addMask(r,t,o.flipH,o.flipV)}}}}}return e}_Str_24802(t){const e=t.getScreenPoint(new m.a(0,0,0)),s=t.getScreenPoint(new m.a(0,1,0));return Math.round(this._Str_2920.length*Math.abs(e.x-s.x))}_Str_22136(t){const e=[];if(this._Str_3816){const s=this._Str_23649(t),n=this._rasterizer._Str_8988(this._Str_576);let i=0;for(;i<n.length;){const r=n[i];if(r)if(this._Str_13946&&r._Str_8547()){const n=t.getCoordinatePosition(this._normal),i=r._Str_8547()._Str_21968(n),a=new Qe(s,this._color,i._Str_14945());es._Str_17384(this._Str_16308);for(const e of i._Str_23721(this._Str_24802(t))){const t=[];for(const s of e._Str_22299()){const e=s._Str_2125(n);e&&t.push(e)}t.length>0&&(e._Str_24523()||t.push(""),a._Str_22862(t))}a._Str_17636.length>0&&e.push(a)}else{const t=new Qe(s,this._color);e.push(t)}i++}e.length||e.push(new Qe(s,this._color))}return e}update(e,s){if(!e||this._disposed)return!1;let i=!1;if(this._Str_3406!=e.updateId&&(i=!0),!(i&&this._Str_7367||this.visible))return!1;if(i){this._Str_5545=null;let s=0;if(s=m.a.cosAngle(e.directionAxis,this.normal),s>-.001)return!!this._Str_3816&&(this._Str_3816=!1,!0);let n=0;for(;n<this._Str_5886.length;){if(s=m.a.cosAngle(e.directionAxis,this._Str_5886[n]),s>-.001)return!!this._Str_3816&&(this._Str_3816=!1,!0);n++}this._Str_18702(e);const i=e.getScreenPosition(this._Str_5221).z;let r=Math.max(this._Str_2820.z,this._Str_2745.z,this._Str_2639.z,this._Str_2766.z)-i;this._type===t.TYPE_FLOOR&&(r-=8*(this._location.z+Math.min(0,this._Str_2920.z,this._Str_2943.z))),this._type===t.TYPE_LANDSCAPE&&(r+=.02),this._relativeDepth=r,this._Str_3816=!0,this._Str_3406=e.updateId}if(i||this._Str_10518(e,s)){if(!this._Str_1049||this._Str_1720!==this._Str_1049.width||this._height!==this._Str_1049.height){if(this._Str_1049){if(this._Str_1049.destroy(),this._Str_1049=null,this._Str_1720<1||this._height<1)return!0}else if(this._Str_1720<1||this._height<1)return!1;const t=new n.Graphics;if(t.beginFill(16777215,0),t.drawRect(0,0,this._Str_1720,this._height),t.endFill(),this._Str_1049=t,!this._Str_1049)return!1}es._Str_17384(this._Str_16308);const t=this._Str_10114(e,s);return t?(this._Str_17000(e,t),null!==t||i):(this.dispose(),!1)}return!1}_Str_18702(t){this._Str_2820.assign(t.getScreenPosition(this._location)),this._Str_2745.assign(t.getScreenPosition(m.a.sum(this._location,this._Str_2943))),this._Str_2639.assign(t.getScreenPosition(m.a.sum(m.a.sum(this._location,this._Str_2920),this._Str_2943))),this._Str_2766.assign(t.getScreenPosition(m.a.sum(this._location,this._Str_2920))),this._offset=t.getScreenPoint(this._Str_5221),this._Str_2820.x=Math.round(this._Str_2820.x),this._Str_2820.y=Math.round(this._Str_2820.y),this._Str_2745.x=Math.round(this._Str_2745.x),this._Str_2745.y=Math.round(this._Str_2745.y),this._Str_2639.x=Math.round(this._Str_2639.x),this._Str_2639.y=Math.round(this._Str_2639.y),this._Str_2766.x=Math.round(this._Str_2766.x),this._Str_2766.y=Math.round(this._Str_2766.y),this._offset.x=Math.round(this._offset.x),this._offset.y=Math.round(this._offset.y);const e=Math.min(this._Str_2820.x,this._Str_2745.x,this._Str_2639.x,this._Str_2766.x);let s=Math.max(this._Str_2820.x,this._Str_2745.x,this._Str_2639.x,this._Str_2766.x);const n=Math.min(this._Str_2820.y,this._Str_2745.y,this._Str_2639.y,this._Str_2766.y);let i=Math.max(this._Str_2820.y,this._Str_2745.y,this._Str_2639.y,this._Str_2766.y);s-=e,this._offset.x=this._offset.x-e,this._Str_2820.x=this._Str_2820.x-e,this._Str_2745.x=this._Str_2745.x-e,this._Str_2639.x=this._Str_2639.x-e,this._Str_2766.x=this._Str_2766.x-e,i-=n,this._offset.y=this._offset.y-n,this._Str_2820.y=this._Str_2820.y-n,this._Str_2745.y=this._Str_2745.y-n,this._Str_2639.y=this._Str_2639.y-n,this._Str_2766.y=this._Str_2766.y-n,this._Str_1720=s,this._height=i}_Str_17000(e,s){if(null==this._Str_2820||null==this._Str_2745||null==this._Str_2639||null==this._Str_2766||null==s||null==this._Str_1049)return;let i=this._Str_2766.x-this._Str_2639.x,r=this._Str_2766.y-this._Str_2639.y,a=this._Str_2745.x-this._Str_2639.x,o=this._Str_2745.y-this._Str_2639.y;this._type!=t.TYPE_WALL&&this._type!=t.TYPE_LANDSCAPE||(Math.abs(a-s.width)<=1&&(a=s.width),Math.abs(o-s.width)<=1&&(o=s.width),Math.abs(i-s.height)<=1&&(i=s.height),Math.abs(r-s.height)<=1&&(r=s.height));const c=a/s.width,l=o/s.width,h=i/s.height,u=r/s.height,_=new n.Matrix;_.a=c,_.b=l,_.c=h,_.d=u,_.translate(this._Str_2639.x,this._Str_2639.y),this.draw(s,_)}draw(t,e){const s=t.clone();s.transform.setFromMatrix(e),this._Str_1049=s}_Str_25213(){!this._disposed&&this._Str_4542&&this._Str_4047.length&&(this._Str_4891=!0,this._Str_4047=[])}_Str_24569(t,e,s){if(!this._Str_4542)return!1;let n=0;for(;n<this._Str_4047.length;){const i=this._Str_4047[n];if(i&&i.type===t&&i._Str_5120===e&&i._Str_4659===s)return!1;n++}const i=new Je(t,e,s);return this._Str_4047.push(i),this._Str_4891=!0,!0}_Str_25934(){this._Str_4542&&this._Str_5088.length&&(this._Str_4891=!0,this._Str_5088=[])}_Str_24758(t,e,s,n){if(this._Str_4542){for(const r of this._Str_5088)if(r&&r._Str_5120===t&&r._Str_4659===e&&r._Str_9124===s&&r._Str_12156===n)return!1;const i=new $e(t,e,s,n);return this._Str_5088.push(i),this._Str_4891=!0,!0}return!1}_Str_19336(){if(!this._Str_4891)return;let t,e=!0;if(this._Str_4047.length===this._Str_8341.length){for(const s of this._Str_4047)if(s){t=!1;for(const e of this._Str_8341)if(e&&e.type===s.type&&e._Str_5120===s._Str_5120&&e._Str_4659===s._Str_4659){t=!0;break}if(!t){e=!1;break}}}else e=!1;this._Str_5088.length>this._Str_14495.length&&(e=!1),e&&(this._Str_4891=!1)}_Str_17859(t,e){if(!t||!e)return;if(!this._Str_4542||!this._Str_4047.length&&!this._Str_5088.length&&!this._Str_4891||!this._Str_4795)return;const s=t.width,i=t.height;if(this._Str_19336(),!this._Str_2730||this._Str_2730.width!==s||this._Str_2730.height!==i){this._Str_2730&&(this._Str_2730.destroy(),this._Str_2730=null);const t=new n.Graphics;t.beginFill(16777215,0).drawRect(0,0,s,i).endFill(),this._Str_2730=t,this._Str_4891=!0}if(this._Str_4891){this._Str_8341=[],this._Str_14495=[],this._Str_2730&&this._Str_2730.beginFill(16777215,0).drawRect(0,0,s,i).endFill(),this._Str_11000(t);const n=e.getCoordinatePosition(this._normal);let r=null,a=0,o=0,c=0;for(;c<this._Str_4047.length;){const t=this._Str_4047[c];t&&(r=t.type,a=this._Str_2730.width-this._Str_2730.width*t._Str_5120/this._Str_2920.length,o=this._Str_2730.height-this._Str_2730.height*t._Str_4659/this._Str_2943.length,this._Str_4795._Str_17859(this._Str_2730,r,e.scale,n,a,o),this._Str_8341.push(new Je(r,t._Str_5120,t._Str_4659))),c++}for(c=0;c<this._Str_5088.length;){const t=this._Str_5088[c];if(t){a=this._Str_2730.width-this._Str_2730.width*t._Str_5120/this._Str_2920.length,o=this._Str_2730.height-this._Str_2730.height*t._Str_4659/this._Str_2943.length;const e=this._Str_2730.width*t._Str_9124/this._Str_2920.length,s=this._Str_2730.height*t._Str_12156/this._Str_2943.length;this._Str_2730.beginFill(16711680).drawRect(a-e,o-s,e,s).endFill(),this._Str_14495.push(new $e(t._Str_9124,t._Str_4659,t._Str_9124,t._Str_12156))}c++}this._Str_4891=!1}this._Str_24790(t,this._Str_2730)}_Str_24790(t,e){if(!t||!e)return;const s=l.a.instance.renderer.extract.canvas(e),i=l.a.instance.renderer.extract.canvas(t),r=i.getContext("2d");r.drawImage(s,0,0);const a=r.getImageData(0,0,i.width,i.height),o=a.data;for(let n=0;n<o.length;n+=4){const t=o[n+1],e=o[n+2];o[n]||t||e||(o[n+3]=0)}r.putImageData(a,0,0);const c=n.Texture.from(i);c&&t.clear().beginTextureFill({texture:c}).drawRect(0,0,c.width,c.height).endFill()}}return t.ZERO_POINT=new n.Point(0,0),t.TYPE_UNDEFINED=0,t.TYPE_WALL=1,t.TYPE_FLOOR=2,t.TYPE_LANDSCAPE=3,t._uniqueIdCounter=1,t})(),ns=(()=>{class t{constructor(t,e=-1,s=1,n=-1,i=1){this._normalMinX=e,this._normalMaxX=s,this._normalMinY=n,this._normalMaxY=i,this._asset=t}get asset(){return this._asset}get normalMinX(){return this._normalMinX}get normalMaxX(){return this._normalMaxX}get normalMinY(){return this._normalMinY}get normalMaxY(){return this._normalMaxY}dispose(){this._asset=null}}return t._Str_3268=-1,t._Str_3271=1,t})(),is=(()=>{class t{constructor(){this._bitmaps=[]}dispose(){for(const t of this._bitmaps)t&&t.dispose();this._bitmaps=null}_Str_16790(t,e=-1,s=1,n=-1,i=1){this._bitmaps.push(new ns(t,e,s,n,i))}getAsset(t){if(!t)return null;for(const e of this._bitmaps)if(e&&t.x>=e.normalMinX&&t.x<=e.normalMaxX&&t.y>=e.normalMinY&&t.y<=e.normalMaxY)return e.asset;return null}}return t._Str_3268=-1,t._Str_3271=1,t})();class rs{constructor(){this._sizes=[],this._maskVisualizations=new Map,this._assetNames=new Map,this._lastMaskVisualization=null,this._lastSize=-1}dispose(){if(this._maskVisualizations){for(const t of this._maskVisualizations.values())t&&t.dispose();this._maskVisualizations=null}this._lastMaskVisualization=null,this._sizes=null}_Str_24540(t){if(this._maskVisualizations.get(t))return null;const e=new is;return this._maskVisualizations.set(t,e),this._sizes.push(t),this._sizes.sort(),e}_Str_8560(t){let e=0;for(;1<this._sizes.length;){if(this._sizes[1]>t){this._sizes[1]-t<t-this._sizes[0]&&(e=1);break}e=1}return e}_Str_24650(t){if(t===this._lastSize)return this._lastMaskVisualization;const e=this._Str_8560(t);return this._lastMaskVisualization=e<this._sizes.length?this._maskVisualizations.get(this._sizes[e]):null,this._lastSize=t,this._lastMaskVisualization}_Str_21021(t,e){const s=this._Str_24650(t);return s?s.getAsset(e):null}_Str_2125(t){return this._assetNames&&this._assetNames.get(t)||null}_Str_24425(t,e){this._assetNames&&this._assetNames.set(t,e)}}class as{constructor(){this._assetCollection=null,this._masks=new Map,this._data=null}get data(){return this._data}dispose(){if(this._assetCollection=null,this._data=null,this._masks&&this._masks.size){for(const t of this._masks.values())t&&t.dispose();this._masks.clear()}}initialize(t){this._data=t}_Str_6703(t){this.data&&(this._assetCollection=t,this._Str_22834(this.data,t))}_Str_22834(t,e){if(t&&e&&t.masks&&t.masks.length){let s=0;for(;s<t.masks.length;){const n=t.masks[s];if(n){const t=n.id;if(this._masks.get(t))continue;const s=new rs;if(n.visualizations&&n.visualizations.length){let t=0;for(;t<n.visualizations.length;){const i=n.visualizations[t];if(i){const t=i.size,n=s._Str_24540(t);if(n){const r=this._Str_25815(i.bitmaps,n,e);s._Str_24425(t,r)}}t++}}this._masks.set(t,s)}s++}}}_Str_25815(t,e,s){if(!t||!t.length)return null;let n=null;for(const i of t){if(!i)continue;const t=i.assetName,r=s.getAsset(t);if(!r)continue;let a=is._Str_3268,o=is._Str_3271,c=is._Str_3268,l=is._Str_3271;void 0!==i.normalMinX&&(a=i.normalMinX),void 0!==i.normalMaxX&&(o=i.normalMaxX),void 0!==i.normalMinY&&(c=i.normalMinY),void 0!==i.normalMaxY&&(l=i.normalMaxY),r.flipH||(n=t),e._Str_16790(r,a,o,c,l)}return n}_Str_17859(t,e,s,i,r,a){const o=this._masks.get(e);if(!o)return!0;const c=o._Str_21021(s,i);if(!c)return!0;const l=c.texture;if(!l)return!0;const h=new n.Point(r+c.offsetX,a+c.offsetY),u=new n.Matrix;let _=1,d=1,g=0,m=0;return c.flipH&&(_=-1,g=-l.width),c.flipV&&(d=-1,m=-l.height),u.scale(_,d),u.translate(h.x+g,h.y+m),t.beginTextureFill({texture:l,matrix:u}).drawRect(u.tx,u.ty,l.width,l.height).endFill(),!0}_Str_8361(t){return this._masks&&this._masks.size&&this._masks.get(t)||null}}class os{static _Str_16640(t){if(!t)return null;const e=new n.Matrix;e.scale(-1,1),e.translate(t.width,0);const s=new n.Graphics;return s.beginTextureFill({texture:t,matrix:e}).drawRect(0,0,t.width,t.height).endFill(),G.a.generateTexture(s)}static _Str_20706(t){if(!t)return null;const e=new n.Matrix;e.scale(1,-1),e.translate(0,t.height);const s=new n.Graphics;return s.beginTextureFill({texture:t,matrix:e}).drawRect(0,0,t.width,t.height).endFill(),G.a.generateTexture(s)}static _Str_20356(t){if(!t)return null;const e=new n.Matrix;e.scale(-1,-1),e.translate(t.width,t.height);const s=new n.Graphics;return s.beginTextureFill({texture:t,matrix:e}).drawRect(0,0,t.width,t.height).endFill(),G.a.generateTexture(s)}}class cs{constructor(t,e,s,n,i){this._x=t,this._y=e,this._speedX=s,this._speedY=n,this._bitmapData=i,isNaN(this._x)&&(this._x=0),isNaN(this._y)&&(this._y=0),isNaN(this._speedX)&&(this._speedX=0),isNaN(this._speedY)&&(this._speedY=0)}get bitmapData(){return this._bitmapData}dispose(){this._bitmapData=null}_Str_6729(t,e,s,i,r){let a=this._x,o=this._y;return s>0&&(a+=this._speedX/s*r/1e3),i>0&&(o+=this._speedY/i*r/1e3),new n.Point(a%1*t,o%1*e)}}class ls{constructor(t,e){if(this._color=0,this._bitmapData=null,this._isDisposed=!1,this._color=0,this._bitmapData=null,this._isDisposed=!1,this._items=[],t&&e)for(const s of t){if(!s)continue;const t=s.asset;if(t){const n=e.getAsset(t);n&&this._items.push(new cs(s.x,s.y,s.speedX,s.speedY,n))}}}get disposed(){return this._isDisposed}dispose(){if(this._isDisposed=!0,this._bitmapData&&(this._bitmapData.destroy(),this._bitmapData=null),this._items){for(const t of this._items)t&&t.dispose();this._items=[]}}_Str_3355(){this._bitmapData&&(this._bitmapData.destroy(),this._bitmapData=null)}render(t,e,s,i,r,a,o,c,l,h,u){if(null!=t&&t.width==e&&t.height==s||(null==this._bitmapData||this._bitmapData.width!=e||this._bitmapData.height!=s?(null!=this._bitmapData&&this._bitmapData.destroy(),this._bitmapData=(new n.Graphics).drawRect(0,0,e,s)):this._bitmapData.beginFill(16777215).drawRect(0,0,this._bitmapData.width,this._bitmapData.height).endFill(),t=this._bitmapData),o>0&&c>0){let e=0;for(;e<this._items.length;){const s=this._items[e];if(null!=s){const e=s._Str_6729(o,c,l,h,u);if(e.x=e.x-r,e.y=e.y-a,s.bitmapData)if(e.x>0&&e.x+s.bitmapData.width<t.width)t.beginFill(65280).beginTextureFill({texture:s.bitmapData.texture,matrix:new n.Matrix(1,0,0,1,e.x,e.y)}).drawRect(e.x,e.y,s.bitmapData.width,s.bitmapData.height).endFill();else if(e.x>0){const i=t.width-e.x;t.beginFill(65280).beginTextureFill({texture:s.bitmapData.texture,matrix:new n.Matrix(1,0,0,1,e.x,e.y)}).drawRect(e.x,e.y,i,s.bitmapData.height).endFill()}else{const i=s.bitmapData.width+e.x;t.beginFill(65280).beginTextureFill({texture:s.bitmapData.texture,matrix:new n.Matrix(1,0,0,1,e.x,e.y)}).drawRect(0,e.y,i,s.bitmapData.height).endFill()}}e++}}return t}}let hs=(()=>{class t{constructor(t,e,s,n=0){this._material=t,this._offset=n,this._align=s,this._color=e,this._bitmapData=null,this._isDisposed=!1}get offset(){return this._offset}get align(){return this._align}get disposed(){return this._isDisposed}dispose(){this._isDisposed=!0,this._material=null,this._Str_3355()}_Str_3355(){this._bitmapData&&(this._bitmapData.destroy(),this._bitmapData=null)}render(e,s,i,r,a,o,c){e&&e.width===s&&e.height===i||(e=null);let l=null;if(this._material)l=this._material.render(null,s,i,r,a,o,c+this.offset,this.align===t.ALIGN_TOP),l&&l!==e&&(this._bitmapData&&this._bitmapData.destroy(),this._bitmapData=l.clone(),l=this._bitmapData);else if(e)e.beginFill(16777215).drawRect(0,0,s,i).endFill(),l=e;else{if(this._bitmapData&&this._bitmapData.width===s&&this._bitmapData.height===i)return this._bitmapData;this._bitmapData&&this._bitmapData.destroy();const t=(new n.Graphics).beginFill(16777215).drawRect(0,0,s,i).endFill();this._bitmapData=t,l=this._bitmapData}if(l&&(l.tint=this._color,e&&l!==e)){let t=Cs.getTextureCache(l);t||(t=G.a.generateTexture(l,new n.Rectangle(0,0,s,i)),Cs.addTextureCache(l,t)),e.beginTextureFill({texture:t}).drawRect(0,0,s,i).endFill(),l=e}return l}_Str_8547(){return this._material}_Str_751(){return this._color}}return t._Str_1934=0,t.ALIGN_TOP=1,t._Str_3606=2,t._Str_6914=t.ALIGN_TOP,t})();class us{constructor(t,e,s){this._layers=[],this._geometry=s,this._cachedBitmapData=null,this._cachedBitmapNormal=new m.a,this._isCached=!1,this._hasAnimationLayers=!1,e<0&&(e=0);let n=0;for(;n<e;)this._layers.push(null),n++}get geometry(){return this._geometry}get _Str_20530(){return this._hasAnimationLayers}dispose(){if(this._layers&&this._layers.length){for(const t of this._layers)t&&t.dispose();this._layers=null}this._geometry=null,this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._cachedBitmapNormal&&(this._cachedBitmapNormal=null)}_Str_3355(){if(this._isCached){if(this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._cachedBitmapNormal&&this._cachedBitmapNormal.assign(new m.a),this._layers&&this._layers.length)for(const t of this._layers)t&&t._Str_3355();this._isCached=!1}}_Str_21464(t,e,s,n,i=0){if(t<0||t>this._layers.length)return!1;let r=this._layers[t];return r&&r.dispose(),r=new hs(e,s,n,i),this._layers[t]=r,!0}_Str_23489(t,e,s){if(t<0||t>this._layers.length)return!1;let n=this._layers[t];return n&&n.dispose(),n=new ls(e,s),this._layers[t]=n,this._hasAnimationLayers=!0,!0}_Str_8988(){return this._layers}render(t,e,s,i,r,a=0,o=0,c=0,l=0,h=0,u=0,_=0){if(e<1&&(e=1),s<1&&(s=1),t&&t.width===e&&t.height===s||(t=null),this._cachedBitmapData)if(this._cachedBitmapData.width===e&&this._cachedBitmapData.height===s&&m.a.isEqual(this._cachedBitmapNormal,i)){if(!this._Str_20530){if(t){const i=G.a.generateTexture(this._cachedBitmapData,new n.Rectangle(0,0,e,s));if(i)return t.beginTextureFill({texture:i}).drawRect(0,0,i.width,i.height).endFill(),t}return this._cachedBitmapData}}else this._cachedBitmapData.destroy(),this._cachedBitmapData=null;if(this._isCached=!0,this._cachedBitmapData)this._cachedBitmapData.beginFill(16777215).drawRect(0,0,e,s).endFill();else{const t=(new n.Graphics).beginFill(16777215).drawRect(0,0,e,s).endFill();this._cachedBitmapData=t}if(t||(t=this._cachedBitmapData),this._cachedBitmapNormal.assign(i),this._layers&&this._layers.length)for(const n of this._layers)n&&(n instanceof hs?n.render(t,e,s,i,r,a,o):n instanceof ls&&n.render(t,e,s,i,a,o,c,l,h,u,_));if(t&&t!==this._cachedBitmapData){const e=G.a.generateTexture(t,new n.Rectangle(0,0,t.width,t.height));return this._cachedBitmapData.beginTextureFill({texture:e}).drawRect(0,0,t.width,t.height).endFill(),t}return this._cachedBitmapData}}class _s{constructor(){this._planeVisualizations=new Map,this._sizes=[],this._lastPlaneVisualization=null,this._lastSize=-1}isStatic(t){return!0}dispose(){for(const t of this._planeVisualizations.values())t&&t.dispose();this._planeVisualizations=null,this._lastPlaneVisualization=null,this._sizes=null,this._lastSize=-1}_Str_3355(){for(const t of this._planeVisualizations.values())t&&t._Str_3355()}_Str_20305(t,e,s){if(this._planeVisualizations.get(t.toString()))return null;const n=new us(t,e,s);return this._planeVisualizations.set(t.toString(),n),this._sizes.push(t),this._sizes.sort(),n}_Str_8560(t){let e=0,s=1;for(;s<this._sizes.length;){if(this._sizes[s]>t){this._sizes[s]-t<t-this._sizes[s-1]&&(e=s);break}e=s,s++}return e}_Str_6009(t){if(t===this._lastSize)return this._lastPlaneVisualization;const e=this._Str_8560(t);return this._lastPlaneVisualization=e<this._sizes.length?this._planeVisualizations.get(this._sizes[e].toString()):null,this._lastSize=t,this._lastPlaneVisualization}_Str_8988(){return this._Str_6009(this._lastSize)._Str_8988()}}let ds=(()=>{class t extends _s{render(t,e,s,n,i,r,a,o){const c=this._Str_6009(n);if(!c||!c.geometry)return null;const l=c.geometry.getScreenPoint(new m.a(0,0,0)),h=c.geometry.getScreenPoint(new m.a(0,s/c.geometry.scale,0)),u=c.geometry.getScreenPoint(new m.a(e/c.geometry.scale,0,0));let _=0,d=0;if(l&&h&&u){e=Math.round(Math.abs(l.x-u.x)),s=Math.round(Math.abs(l.x-h.x));const t=l.x-c.geometry.getScreenPoint(new m.a(1,0,0)).x;_=a*Math.trunc(Math.abs(t)),d=o*Math.trunc(Math.abs(t))}return c.render(t,e,s,i,r,_,d)}}return t._Str_2531=16777215,t._Str_5433=45,t._Str_5509=30,t})(),gs=(()=>{class t{constructor(t,e,s=1){if(this._cells=[],this._repeatMode=s,this._width=t<1?1:t,this._cachedBitmapData=null,this._cachedBitmapNormal=null,this._cachedBitmapDataOffsetX=0,this._cachedBitmapDataOffsetY=0,this._isCached=!1,this._isStatic=!0,e&&e.length){let t=0;for(;t<e.length;){const s=e[t];s&&(this._cells.push(s),s.isStatic||(this._isStatic=!1)),t++}}}get isStatic(){return this._isStatic}_Str_24523(){return!(this._repeatMode===t._Str_9685)}get width(){return this._width}dispose(){if(this._cells&&this._cells.length){for(const t of this._cells)t&&t.dispose();this._cells=null}this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._cachedBitmapNormal&&(this._cachedBitmapNormal=null)}_Str_3355(){if(this._isCached){if(this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._cachedBitmapNormal&&(this._cachedBitmapNormal.x=0,this._cachedBitmapNormal.y=0,this._cachedBitmapNormal.z=0),this._cells&&this._cells.length)for(const t of this._cells)t&&t._Str_3355();this._isCached=!1}}render(e,s,i,r){let a=0;if(this._repeatMode==t._Str_9685&&(a=this._Str_19857(this._cells,s),e=a),this._cachedBitmapNormal||(this._cachedBitmapNormal=new m.a),this.isStatic){if(this._cachedBitmapData){if(this._cachedBitmapData.height===e&&m.a.isEqual(this._cachedBitmapNormal,s)&&this._cachedBitmapDataOffsetX===i&&this._cachedBitmapDataOffsetY===r)return this._cachedBitmapData;this._cachedBitmapData.destroy(),this._cachedBitmapData=null}}else this._cachedBitmapData&&(this._cachedBitmapData.height===e?this._cachedBitmapData.beginFill(16777215).drawRect(0,0,this._cachedBitmapData.width,e).endFill():(this._cachedBitmapData.destroy(),this._cachedBitmapData=null));if(this._isCached=!0,this._cachedBitmapData||(this._cachedBitmapData=(new n.Graphics).beginFill(16777215).drawRect(0,0,this._width,e).endFill()),this._cachedBitmapNormal.assign(s),this._cachedBitmapDataOffsetX=i,this._cachedBitmapDataOffsetY=r,!this._cells.length)return this._cachedBitmapData;switch(this._repeatMode){case t._Str_9685:this._Str_25839(s);break;case t._Str_6087:case t._Str_6114:case t._Str_6187:case t._Str_6063:break;default:this._Str_18711(s,i,r)}return this._cachedBitmapData}_Str_19857(t,e){if(!t||!t.length)return 0;let s=0,n=0;for(;n<t.length;){const i=t[n];i&&(s+=i._Str_9599(e)),n++}return s}_Str_4757(t,e,s,n,i=0,r=0){if(!t||!t.length||!this._cachedBitmapData)return e;let a=0;for(;a<t.length;){let o=null;if(o=s?t[a]:t[t.length-1-a],o){const t=o.render(n,i,r);if(t&&(s||(e-=t.height),t.y=e,this._cachedBitmapData.addChild(t),s&&(e+=t.height),s&&e>=this._cachedBitmapData.height||!s&&e<=0))return e}a++}return e}_Str_25839(t){this._cells.length&&this._cachedBitmapData&&this._Str_4757(this._cells,0,!0,t)}_Str_18711(t,e,s){if(!this._cells.length||!this._cachedBitmapData)return;let n=0;for(;n<this._cachedBitmapData.height;)if(n=this._Str_4757(this._cells,n,!0,t,e,s),!n)return}_Str_22299(){return this._cells}}return t._Str_9685=0,t._Str_7916=1,t._Str_6087=2,t._Str_6114=3,t._Str_6187=4,t._Str_6063=5,t})(),ms=(()=>{class t{constructor(e,s=1,n=1,i=-1,r=1,a=-1,o=1){this._repeatMode=1,this._align=1,this._cachedBitmapNormal=null,this._cachedBitmapHeight=0,this._isCached=!1,this._isStatic=!0,this._normalMinX=-1,this._normalMaxX=1,this._normalMinY=-1,this._normalMaxY=1,this._columns=[],e<1&&(e=1);let c=0;for(;c<e;)this._columns.push(null),c++;this._repeatMode=s,this._align=n,this._normalMinX=i,this._normalMaxX=r,this._normalMinY=a,this._normalMaxY=o,this._repeatMode==t._Str_9127&&(this._isStatic=!1)}static _Str_12526(t){return es._Str_1612(1,0,17631*t)[0]%t}get normalMinX(){return this._normalMinX}get normalMaxX(){return this._normalMaxX}get normalMinY(){return this._normalMinY}get normalMaxY(){return this._normalMaxY}_Str_14945(){return this._align===t._Str_3606}get isStatic(){return this._isStatic}dispose(){this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._cachedBitmapNormal&&(this._cachedBitmapNormal=null)}_Str_3355(){if(this._isCached){if(this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._cachedBitmapNormal&&(this._cachedBitmapNormal.x=0,this._cachedBitmapNormal.y=0,this._cachedBitmapNormal.z=0),this._columns&&this._columns.length)for(const t of this._columns)t&&t._Str_3355();this._isCached=!1}}_Str_22372(t,e,s,n=1){if(t<0||t>=this._columns.length)return!1;const i=new gs(e,s,n),r=this._columns[t];return r&&r.dispose(),this._columns[t]=i,i&&!i.isStatic&&(this._isStatic=!1),!0}render(e,s,i,r,a,o,c,l){if(s<1&&(s=1),i<1&&(i=1),e&&e.width===s&&e.height===i||(e=null),this._cachedBitmapNormal||(this._cachedBitmapNormal=new m.a),this.isStatic){if(this._cachedBitmapData){if(this._cachedBitmapData.width===s&&this._cachedBitmapData.height==i&&m.a.isEqual(this._cachedBitmapNormal,r))return e?(this._Str_17578(e,this._cachedBitmapHeight,c,l),e):this._cachedBitmapData;this._cachedBitmapData.destroy(),this._cachedBitmapData=null}}else this._cachedBitmapData&&(this._cachedBitmapData.width===s&&this._cachedBitmapData.height===i?this._cachedBitmapData.beginFill(16777215).drawRect(0,0,s,i).endFill():(this._cachedBitmapData.destroy(),this._cachedBitmapData=null));if(this._isCached=!0,this._cachedBitmapNormal.assign(r),!a){if(this._cachedBitmapHeight=i,this._cachedBitmapData)this._cachedBitmapData.beginFill(16777215).drawRect(0,0,s,i).endFill();else{const t=(new n.Graphics).beginFill(16777215).drawRect(0,0,s,i).endFill();this._cachedBitmapData=t}return e?(this._Str_17578(e,i,c,l),e):this._cachedBitmapData}if(!this._cachedBitmapData){this._cachedBitmapHeight=i;const t=(new n.Graphics).beginFill(16777215).drawRect(0,0,s,i).endFill();this._cachedBitmapData=t}const h=[];let u=0;for(;u<this._columns.length;){const t=this._columns[u];if(t){const e=t.render(i,r,o,c);e&&h.push(e)}u++}if(!h.length)return e||this._cachedBitmapData;let _=0;switch(this._repeatMode){case t._Str_6087:case t._Str_6114:case t._Str_6187:case t._Str_6063:case t._Str_9127:break;default:_=this._Str_18711(this._cachedBitmapData,h)}return this._cachedBitmapHeight=_,e?(this._Str_17578(e,_,c,l),e):this._cachedBitmapData}_Str_17578(e,s,i,r){if(!e||!this._cachedBitmapData||e===this._cachedBitmapData)return;let a;r||(i=e.height-s-i),a=new n.Rectangle(0,this._align==t.ALIGN_TOP?0:this._cachedBitmapData.height-this._cachedBitmapHeight,this._cachedBitmapData.width,this._cachedBitmapHeight);const o=G.a.generateTexture(this._cachedBitmapData,a);o&&e.beginTextureFill({texture:o}).drawRect(0,i,a.width,a.height).endFill()}_Str_25859(t){if(!t||!t.length)return 0;let e=0;for(const s of t)s&&(e+=s.width);return e}_Str_4606(e,s,i,r){if(!e||!s||!s.length)return new n.Point(i,0);let a=0,o=null,c=0;for(;c<s.length;){if(o=r?s[c]:s[s.length-1-c],null!=o){r||(i-=o.width);let s=0;this._align==t._Str_3606&&(s=e.height-o.height);let c=Cs.getTextureCache(o);if(c||(c=G.a.generateTexture(o,new n.Rectangle(0,0,o.width,o.height)),Cs.addTextureCache(o,c)),e.beginTextureFill({texture:c}),e.drawRect(i,s,c.width,c.height),e.endFill(),o.height>a&&(a=o.height),r&&(i+=o.width),r&&i>=e.width||!r&&i<=0)return new n.Point(i,a)}c++}return new n.Point(i,a)}_Str_18711(t,e){if(!t||!e||!e.length)return 0;this._Str_25859(e);let s=0,n=0;for(;s<t.width;){const i=this._Str_4606(t,e,s,!0);if(s=i.x,i.y>n&&(n=i.y),!i.x)return n}return n}_Str_23721(e){if(this._repeatMode===t._Str_9127){const s=[];let n=0;for(;n<e;){const e=this._columns[t._Str_12526(this._columns.length)];if(e){if(s.push(e),!(e.width>1))break;n+=e.width}}return s}return this._columns}}return t._Str_7916=1,t._Str_6087=2,t._Str_6114=3,t._Str_6187=4,t._Str_6063=5,t._Str_9127=6,t._Str_18632=t._Str_7916,t._Str_3268=-1,t._Str_3271=1,t.ALIGN_TOP=1,t._Str_3606=2,t._Str_6914=t.ALIGN_TOP,t})(),ps=(()=>{class t{constructor(){this._planeMaterialItems=[],this._isCached=!1}dispose(){if(this._planeMaterialItems&&this._planeMaterialItems.length){for(const t of this._planeMaterialItems)t&&t.dispose();this._planeMaterialItems=null}this._isCached=!1}_Str_3355(){if(this._isCached){if(this._planeMaterialItems&&this._planeMaterialItems.length)for(const t of this._planeMaterialItems)t&&t._Str_3355();this._isCached=!1}}_Str_24503(t,e,s,n=-1,i=1,r=-1,a=1){const o=new ms(t,e,s,n,i,r,a);return this._planeMaterialItems.push(o),o}_Str_21968(t){if(!t)return null;if(this._planeMaterialItems&&this._planeMaterialItems.length)for(const e of this._planeMaterialItems)if(e&&t.x>=e.normalMinX&&t.x<=e.normalMaxX&&t.y>=e.normalMinY&&t.y<=e.normalMaxY)return e;return null}render(t,e,s,n,i,r,a,o){e<1&&(e=1),s<1&&(s=1);const c=this._Str_21968(n);return c?(this._isCached=!0,c.render(t,e,s,n,i,r,a,o)):null}}return t._Str_3268=-1,t._Str_3271=1,t})();class fs{constructor(t,e=null,s=null,i=0){if(this._extraItemCount=0,this._cachedBitmapData=null,this._texture=t,this._extraItemOffsets=[],this._extraItemAssets=[],this._extraItemCount=0,e&&e.length&&i>0){let t=0;for(;t<e.length;){const s=e[t];s&&this._extraItemAssets.push(s),t++}if(this._extraItemAssets.length){if(s){let t=0;for(;t<s.length;){const e=s[t];e&&this._extraItemOffsets.push(new n.Point(e.x,e.y)),t++}}this._extraItemCount=i}}}get isStatic(){return 0==this._extraItemCount}dispose(){this._texture&&(this._texture.dispose(),this._texture=null),this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._extraItemAssets=null,this._extraItemOffsets=null,this._extraItemCount=0}_Str_3355(){this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null)}_Str_9599(t){if(this._texture){const e=this._texture._Str_4913(t);if(e)return e.height}return 0}render(t,e,s){if(!this._texture)return null;const i=this._texture._Str_4913(t);if(!i)return null;let r=null;if(0!==e||0!==s){for(;e<0;)e+=i.width;for(;s<0;)s+=i.height;const t=new n.TilingSprite(i,i.width,i.height);t.tilePosition.x=e%i.width,t.tilePosition.y=s%i.height,t.uvRespectAnchor=!0,e&&(t.anchor.x=1,t.scale.x=-1),s&&(t.anchor.y=1,t.scale.y=-1),r=t}else r=new n.Sprite(i);return r||null}_Str_2125(t){return null==this._texture?null:this._texture._Str_2125(t)}}let Es=(()=>{class t{constructor(t,e=-1,s=1,n=-1,i=1,r=null){this._normalMinX=e,this._normalMaxX=s,this._normalMinY=n,this._normalMaxY=i,this._assetName=r,this._bitmap=t}get bitmap(){return this._bitmap}get normalMinX(){return this._normalMinX}get normalMaxX(){return this._normalMaxX}get normalMinY(){return this._normalMinY}get normalMaxY(){return this._normalMaxY}get assetName(){return this._assetName}dispose(){this._bitmap=null}}return t._Str_3268=-1,t._Str_3271=1,t})(),Ss=(()=>{class t{constructor(){this._bitmaps=[]}dispose(){if(this._bitmaps){for(const t of this._bitmaps)t&&t.dispose();this._bitmaps=null}}_Str_16790(t,e=-1,s=1,n=-1,i=1,r=null){this._bitmaps.push(new Es(t,e,s,n,i,r))}_Str_4913(t){const e=this._Str_21702(t);return e?e.bitmap:null}_Str_21702(t){if(!t)return null;for(const e of this._bitmaps)if(e&&t.x>=e.normalMinX&&t.x<=e.normalMaxX&&t.y>=e.normalMinY&&t.y<=e.normalMaxY)return e;return null}_Str_2125(t){const e=this._Str_21702(t);return e?e.assetName:null}}return t._Str_3268=-1,t._Str_3271=1,t})(),bs=(()=>{class t{constructor(){this._assetCollection=null,this._textures=new Map,this._materials=new Map,this._planes=new Map,this._geometries=new Map,this._data=null}get data(){return this._data}get _Str_2697(){return this._assetCollection}initializeDimensions(t,e){return!0}dispose(){if(this._planes){for(const t of this._planes.values())t&&t.dispose();this._planes=null}if(this._materials&&(this._Str_21781(),this._materials=null),this._textures&&(this._Str_21447(),this._textures=null),this._geometries){for(const t of this._geometries.values())t&&t.dispose();this._geometries=null}this._data=null,this._assetCollection=null}_Str_3355(){for(const t of this._planes.values())t&&t._Str_3355();for(const t of this._materials.values())t&&t._Str_3355()}initialize(t){this._data=t}_Str_24005(){this._Str_21447(),this._Str_21781(),this._Str_22054()}_Str_21781(){for(const t of this._materials.values())t&&t.dispose();this._materials.clear()}_Str_21447(){for(const t of this._textures.values())t&&t.dispose();this._textures.clear()}_Str_10114(t){return this._textures.get(t)}_Str_8547(t){return this._materials.get(t)}_Str_3491(t){return this._planes.get(t)}_Str_3453(t,e){return!!e&&!this._planes.get(t)&&(this._planes.set(t,e),!0)}_Str_6703(t){this._data&&(this._assetCollection=t,this._Str_22054())}_Str_22054(){this._data&&(this._Str_25281(),this.initializePlanes())}_Str_25281(){this._data.textures&&this._data.textures.length&&this._Str_24250(this._data.textures,this._Str_2697),this._data.materials&&this._data.materials.length&&this._Str_22388(this._data.materials)}initializePlanes(){}_Str_24250(t,e){if(t&&e&&t.length)for(const s of t){if(!s)continue;const t=s.id;if(!this._textures.get(t)){const n=new Ss;if(s.bitmaps&&s.bitmaps.length)for(const t of s.bitmaps){if(!t)continue;const s=t.assetName;let i=Ss._Str_3268,r=Ss._Str_3271,a=Ss._Str_3268,o=Ss._Str_3271;void 0!==t.normalMinX&&(i=t.normalMinX),void 0!==t.normalMaxX&&(r=t.normalMaxX),void 0!==t.normalMinY&&(a=t.normalMinY),void 0!==t.normalMaxY&&(o=t.normalMaxY);const c=e.getAsset(s);if(c){const t=c.texture;if(t){let e=t;c.flipH&&(e=os._Str_16640(t)),n._Str_16790(e,i,r,a,o,s)}}}this._textures.set(t,n)}}}_Str_22388(t){if(t&&t.length)for(const e of t){if(!e)continue;const t=e.id,s=new ps;if(e.matrices&&e.matrices.length)for(const n of e.matrices){if(!n)continue;let t=n.repeatMode,e=n.align;const i=ms._Str_3268,r=ms._Str_3271,a=ms._Str_3268,o=ms._Str_3271;switch(t){case"borders":t=ms._Str_6087;break;case"center":t=ms._Str_6114;break;case"first":t=ms._Str_6187;break;case"last":t=ms._Str_6063;break;case"random":t=ms._Str_9127;break;default:t=ms._Str_18632}switch(e){case"top":e=ms.ALIGN_TOP;break;case"bottom":e=ms._Str_3606;break;default:e=ms._Str_6914}if(n.columns&&n.columns.length){const c=s._Str_24503(n.columns.length,t,e,i,r,a,o);let l=0;for(;l<n.columns.length;){const t=n.columns[l];t&&this._Str_24431(t,c,l),l++}}}this._materials.set(t,s)}}_Str_24431(t,e,s){if(!t||!e)return;let n=gs._Str_7916;const i=t.width,r=this._Str_25217(t);switch(t.repeatMode){case"borders":n=gs._Str_6087;break;case"center":n=gs._Str_6114;break;case"first":n=gs._Str_6187;break;case"last":n=gs._Str_6063;break;case"none":n=gs._Str_9685;break;default:n=gs._Str_7916}e._Str_22372(s,i,r,n)}_Str_25217(t){if(!t||!t.cells||!t.cells.length)return null;const e=[];let s=0;for(;s<t.cells.length;){const n=t.cells[s];if(n){const t=n.textureId;let s=null,i=null,r=null,a=0;if(n.extras&&n.extras.length){const t=n.extras[0],e=t.types,r=t.offsets;if(e&&r&&e.length&&r.length){const n=r[0];s=this._Str_25465(e[0]),i=this._Str_24448(n),a=i.length,t.limitMax&&(a=t.limitMax)}}if(s&&s.length){r=[];for(const t of s){if(!t)continue;const e=this._assetCollection.getAsset(t);e&&r.push(e)}}const o=this._Str_10114(t),c=new fs(o,r,i,a);e.push(c)}s++}return e&&e.length?e:null}_Str_25465(t){const e=[];if(t&&t.types&&t.types.length){let s=0;for(;s<t.types.length;){const n=t.types[s].assetName;n&&e.push(n),s++}}return e}_Str_24448(t){const e=[];if(t&&t.offsets&&t.offsets.length){let s=0;for(;s<t.offsets.length;){const i=t.offsets[s];e.push(new n.Point(i.x,i.y)),s++}}return e}_Str_17204(t,e,s){(e=Math.abs(e))>90&&(e=90),(s=Math.abs(s))>90&&(s=90);const n=`${t}_${Math.round(e)}_${Math.round(s)}`;let i=this._geometries.get(n);return i||(i=new g.a(t,new m.a(e,s),new m.a(-10,0,0)),this._geometries.set(n,i),i)}_Str_9137(t,e){if(t&&e&&e&&e.length)for(const s of e){if(!s)continue;const e=s.size;let n=ds._Str_5433,i=ds._Str_5509;s.horizontalAngle&&(n=s.horizontalAngle),s.verticalAngle&&(i=s.verticalAngle);const r=s.layers,a=t._Str_20305(e,r&&r.length||0,this._Str_17204(e,n,i));if(a&&r&&r.length){let t=0;for(;t<r.length;){const e=r[t];if(e){let s=null,n=hs._Str_6914,i=ds._Str_2531,r=hs._Str_1934;e.materialId&&(s=this._Str_8547(e.materialId)),e.color&&(i=e.color),e.offset&&(r=e.offset),e.align&&("bottom"===e.align?n=hs._Str_3606:"top"==e.align&&(n=hs.ALIGN_TOP)),a._Str_21464(t,s,i,n,r)}t++}}}}render(t,e,s,n,i,r,a,o=0,c=0,l=0,h=0,u=0){return null}getTextureIdentifier(t,e){return t.toString()}_Str_8988(e){let s=this._Str_3491(e);return s||(s=this._Str_3491(t.DEFAULT)),s._Str_8988()}}return t.DEFAULT="default",t})(),vs=(()=>{class t extends _s{constructor(){super(...arguments),this._width=0,this._height=0}isStatic(t){const e=this._Str_6009(t);return e?!e._Str_20530:super.isStatic(t)}initializeDimensions(t,e){t<0&&(t=0),e<0&&(e=0),t===this._width&&e===this._height||(this._width=t,this._height=e)}render(t,e,s,n,i,r,a,o,c,l,h){const u=this._Str_6009(n);if(!u||!u.geometry)return null;const _=u.geometry.getScreenPoint(new m.a(0,0,0)),d=u.geometry.getScreenPoint(new m.a(0,0,1)),g=u.geometry.getScreenPoint(new m.a(0,1,0));if(_&&d&&g){e=Math.round(Math.abs((_.x-g.x)*e/u.geometry.scale)),s=Math.round(Math.abs((_.y-d.y)*s/u.geometry.scale));const n=a*Math.abs(_.x-g.x),m=o*Math.abs(_.y-d.y),p=c*Math.abs(_.x-g.x),f=l*Math.abs(_.y-d.y);return u.render(t,e,s,i,r,n,m,p,f,c,l,h)}return null}}return t._Str_2531=16777215,t._Str_5433=45,t._Str_5509=30,t})(),Is=(()=>{class t extends bs{constructor(){super(...arguments),this._landscapeWidth=0,this._landscapeHeight=0}initializeDimensions(t,e){return t<0&&(t=0),e<0&&(e=0),this._landscapeWidth=t,this._landscapeHeight=e,!0}initializePlanes(){if(!this.data)return;const t=this.data.landscapes;t&&t.length&&this._Str_25478(t)}_Str_25478(t){if(!t)return;const e=Math.trunc(654321*Math.random());for(const s in t){const n=t[s];if(!n)continue;const i=n.id,r=n.animatedVisualizations,a=new vs;for(const t of r){if(!t)continue;const s=t.size;let n=vs._Str_5433,i=vs._Str_5509;t.horizontalAngle&&(n=t.horizontalAngle),t.verticalAngle&&(i=t.verticalAngle);const r=t.layers,o=t.animationLayers,c=r&&r.length||0,h=o&&o.length||0,u=a._Str_20305(s,c+h||0,this._Str_17204(s,n,i));if(u){es._Str_17384(e);let t=0;if(c)for(;t<r.length;){const e=r[t];if(e){let s=null,n=hs._Str_6914,i=vs._Str_2531,r=hs._Str_1934;e.materialId&&(s=this._Str_8547(e.materialId)),e.color&&(i=e.color),e.offset&&(r=e.offset),e.align&&("bottom"===e.align?n=hs._Str_3606:"top"===e.align&&(n=hs.ALIGN_TOP)),u._Str_21464(t,s,i,n,r)}t++}if(t=0,h){const e=[];for(;t<o.length;){const s=o[t];if(s){const t=s.animationItems;if(t&&t.length)for(const s of t)if(s){const t=s.assetId,n=this._Str_21504(s.x||"",s.randomX||""),i=this._Str_21504(s.y||"",s.randomY||""),r=s.speedX?s.speedX/l.a.instance.getConfiguration("animation.fps"):0,a=s.speedY?s.speedY/l.a.instance.getConfiguration("animation.fps"):0;e.push({asset:t,x:n,y:i,speedX:r,speedY:a})}}t++}u._Str_23489(t,e,this._Str_2697)}}}this._Str_3453(i,a)||a.dispose()}}_Str_21504(t,e){let s=0;if(t.length>0&&"%"===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1),s=parseFloat(t)/100),e.length>0){const t=1e4,n=es._Str_1612(1,0,t)[0]/t;"%"===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1),s+=n*parseFloat(e)/100)}return s}render(e,s,n,i,r,a,o,c=0,l=0,h=0,u=0,_=0){let d=this._Str_3491(s);if(d||(d=this._Str_3491(t.DEFAULT)),!d)return null;e&&e.clear();let g=d.render(e,n,i,r,a,o,c,l,h,u,_);if(g&&g!==e&&(g=g.clone(),!g))return null;let m=null;return m=!d.isStatic(r)&&t._Str_3536>0?new ts(g,Math.round(_/t._Str_3536)*t._Str_3536+t._Str_3536):new ts(g,-1),m}getTextureIdentifier(t,e){return e?e.x<0?t+"_0":t+"_1":super.getTextureIdentifier(t,e)}}return t._Str_3536=500,t})();class Rs extends bs{initializePlanes(){if(!this.data)return;const t=this.data.floors;t&&t.length&&this._Str_24495(t)}_Str_24495(t){if(t)for(const e in t){const s=t[e];if(!s)continue;const n=s.id,i=s.visualizations,r=new ds;this._Str_9137(r,i),this._Str_3453(n,r)||r.dispose()}}render(t,e,s,n,i,r,a,o=0,c=0,l=0,h=0,u=0){let _=this._Str_3491(e);if(_||(_=this._Str_3491(bs.DEFAULT)),!_)return null;t&&t.beginFill(16777215).drawRect(0,0,t.width,t.height).endFill();let d=_.render(t,s,n,i,r,a,o,c);return d&&d!==t&&(d=d.clone(),!d)?null:new ts(d,-1)}}let Ts=(()=>{class t extends _s{render(t,e,s,n,i,r){const a=this._Str_6009(n);if(!a||!a.geometry)return null;const o=a.geometry.getScreenPoint(new m.a(0,0,0)),c=a.geometry.getScreenPoint(new m.a(0,0,s/a.geometry.scale)),l=a.geometry.getScreenPoint(new m.a(0,e/a.geometry.scale,0));return o&&c&&l&&(e=Math.round(Math.abs(o.x-l.x)),s=Math.round(Math.abs(o.y-c.y))),a.render(t,e,s,i,r)}}return t._Str_2531=16777215,t._Str_5433=45,t._Str_5509=30,t})();class ys extends bs{initializePlanes(){if(!this.data)return;const t=this.data.walls;t&&t.length&&this._Str_24495(t)}_Str_24495(t){if(t)for(const e in t){const s=t[e];if(!s)continue;const n=s.id,i=s.visualizations,r=new Ts;this._Str_9137(r,i),this._Str_3453(n,r)||r.dispose()}}render(t,e,s,n,i,r,a,o=0,c=0,l=0,h=0,u=0){let _=this._Str_3491(e);if(_||(_=this._Str_3491(bs.DEFAULT)),!_)return null;if(t){const e=t.getBounds();t.clear(),t.drawRect(e.x,e.y,e.width,e.height)}let d=_.render(t,s,n,i,r,a);return d&&d!==t&&(d=d.clone(),!d)?null:new ts(d,-1)}getTextureIdentifier(t,e){return e?`${t}_${e.x}_${e.y}_${e.z}`:super.getTextureIdentifier(t,e)}}class Os extends Kt.a{constructor(){super(),this._wallRasterizer=new ys,this._floorRasterizer=new Rs,this._landscapeRasterizer=new Is,this._maskManager=new as,this._initialized=!1}initialize(t){const e=t.wallData;e&&this._wallRasterizer.initialize(e);const s=t.floorData;s&&this._floorRasterizer.initialize(s);const n=t.landscapeData;n&&this._landscapeRasterizer.initialize(n);const i=t.maskData;return i&&this._maskManager.initialize(i),!0}onDispose(){this._wallRasterizer&&(this._wallRasterizer.dispose(),this._wallRasterizer=null),this._floorRasterizer&&(this._floorRasterizer.dispose(),this._floorRasterizer=null),this._landscapeRasterizer&&(this._landscapeRasterizer.dispose(),this._landscapeRasterizer=null),this._maskManager&&(this._maskManager.dispose(),this._maskManager=null),super.onDispose()}setGraphicAssetCollection(t){this._initialized||(this._wallRasterizer._Str_6703(t),this._floorRasterizer._Str_6703(t),this._landscapeRasterizer._Str_6703(t),this._maskManager._Str_6703(t),this._initialized=!0)}_Str_3355(){this._wallRasterizer&&this._wallRasterizer._Str_3355(),this._floorRasterizer&&this._floorRasterizer._Str_3355(),this._landscapeRasterizer&&this._landscapeRasterizer._Str_3355()}get wallRasterizer(){return this._wallRasterizer}get floorRasterizer(){return this._floorRasterizer}get landscapeRasterizer(){return this._landscapeRasterizer}get maskManager(){return this._maskManager}}let Cs=(()=>{class t extends Nt{constructor(){super(),this._data=null,this._roomPlaneParser=new Ze.a,this._roomPlaneBitmapMaskParser=new qe,this._geometryUpdateId=-1,this._directionX=0,this._directionY=0,this._directionZ=0,this._floorThickness=1,this._wallThickness=1,this._holeUpdateTime=NaN,this._Str_2540=[],this._Str_4864=[],this._Str_6648=[],this._roomScale=0,this._lastUpdateTime=-1e3,this._updateIntervalTime=250,this._wallType=null,this._floorType=null,this._landscapeType=null,this._colorBackgroundOnly=!0,this._color=16777215,this._redColor=255,this._greenColor=255,this._blueColor=255,this._typeVisibility=[],this._Str_5928=0,this._maskData=null,this._isPlaneSet=!1,this._typeVisibility[ss.TYPE_UNDEFINED]=!1,this._typeVisibility[ss.TYPE_FLOOR]=!0,this._typeVisibility[ss.TYPE_WALL]=!0,this._typeVisibility[ss.TYPE_LANDSCAPE]=!0}static getTextureCache(e){const s=t.RENDER_TEXTURE_CACHE.get(t.LAST_VISUALIZATION);return s?s.getValue(e):null}static addTextureCache(e,s){if(!t.LAST_VISUALIZATION)return;let n=t.RENDER_TEXTURE_CACHE.get(t.LAST_VISUALIZATION);n||(n=new wt.a,t.RENDER_TEXTURE_CACHE.set(t.LAST_VISUALIZATION,n)),n.add(e,s)}initialize(t){return t instanceof Os&&(this._data=t,super.initialize(t),this._data.setGraphicAssetCollection(this.asset),!0)}dispose(){super.dispose(),this.clearPlanes(),this._Str_2540=null,this._Str_4864=null,this._Str_6648=null,this._roomPlaneParser&&(this._roomPlaneParser.dispose(),this._roomPlaneParser=null),this._roomPlaneBitmapMaskParser&&(this._roomPlaneBitmapMaskParser.dispose(),this._roomPlaneBitmapMaskParser=null),this._data&&(this._data._Str_3355(),this._data=null);const e=t.RENDER_TEXTURE_CACHE.get(this);if(e){for(const t of e.getValues())t.destroy(!0);e.dispose(),t.RENDER_TEXTURE_CACHE.delete(this)}}reset(){super.reset(),this._floorType=null,this._wallType=null,this._landscapeType=null,this._maskData=null,this._geometryUpdateId=-1,this._roomScale=0}update(e,s,n,i){if(!this.object||!e)return;t.LAST_VISUALIZATION=this;let r=0;const a=t.RENDER_TEXTURE_CACHE.get(t.LAST_VISUALIZATION);a&&(r=a.length);const o=this.updateGeometry(e),c=this.object.model;let l=!1;if(this.updateThickness(c)&&(l=!0),this.updateHole(c)&&(l=!0),this._Str_25732()&&a&&r&&setTimeout(()=>{for(;r;){const t=a.getWithIndex(0);t&&(t.destroy(!0),a.remove(a.getKey(0))),r--}},0),l=this.updateMasks(c),!(s<this._lastUpdateTime+this._updateIntervalTime)||o||l){if(this.updatePlanes(c)&&(l=!0),this._Str_16913(e,o,s)&&(l=!0),l){let t=0;for(;t<this._Str_4864.length;){const e=this.getSprite(this._Str_6648[t]),s=this._Str_4864[t];if(e&&s&&s.type!==ss.TYPE_LANDSCAPE)if(this._colorBackgroundOnly){let t=s.color;t=(t>>24<<24)+((t>>16&255)*this._blueColor/255<<16)+((t>>8&255)*this._greenColor/255<<8)+(255&t)*this._redColor/255,e.color=t}else e.color=s.color;t++}this.updateSpriteCounter++}this.updateModelCounter=c.updateCounter,this._lastUpdateTime=s}}updateGeometry(t){if(!t)return!1;if(this._geometryUpdateId===t.updateId)return!1;this._geometryUpdateId=t.updateId,this._boundingRectangle=null;const e=t.direction;return!(!e||e.x===this._directionX&&e.y===this._directionY&&e.z===this._directionZ&&t.scale===this._roomScale||(this._directionX=e.x,this._directionY=e.y,this._directionZ=e.z,this._roomScale=t.scale,0))}updateThickness(t){if(this.updateModelCounter===t.updateCounter)return!1;const e=t.getValue(At.a.ROOM_FLOOR_THICKNESS),s=t.getValue(At.a.ROOM_WALL_THICKNESS);return!(isNaN(e)||isNaN(s)||e===this._floorThickness&&s===this._wallThickness||(this._floorThickness=e,this._wallThickness=s,this.clearPlanes(),0))}updateHole(t){if(this.updateModelCounter===t.updateCounter)return!1;const e=t.getValue(At.a.ROOM_FLOOR_HOLE_UPDATE_TIME);return!isNaN(e)&&e!==this._holeUpdateTime&&(this._holeUpdateTime=e,this.clearPlanes(),!0)}updateMasks(t){if(this.updateModelCounter===t.updateCounter)return!1;let e=!1;const s=t.getValue(At.a.ROOM_PLANE_MASK_XML);s!==this._maskData&&(this._Str_15935(s),this._maskData=s,e=!0);const n=t.getValue(At.a.ROOM_BACKGROUND_COLOR);n!==this._color&&(this._color=n,this._redColor=255&this._color,this._greenColor=this._color>>8&255,this._blueColor=this._color>>16&255,e=!0);const i=t.getValue(At.a.ROOM_COLORIZE_BG_ONLY)||!1;return i!==this._colorBackgroundOnly&&(this._colorBackgroundOnly=i,e=!0),e}updatePlanes(t){if(this.updateModelCounter===t.updateCounter)return!1;const e=t.getValue(At.a.ROOM_FLOOR_TYPE),s=t.getValue(At.a.ROOM_WALL_TYPE),n=t.getValue(At.a.ROOM_LANDSCAPE_TYPE);this.updatePlaneTypes(e,s,n);const i=1===t.getValue(At.a.ROOM_FLOOR_VISIBILITY),r=1===t.getValue(At.a.ROOM_WALL_VISIBILITY),a=1===t.getValue(At.a.ROOM_LANDSCAPE_VISIBILITY);return this.updatePlaneVisibility(i,r,a),!0}clearPlanes(){if(this._Str_2540){for(;this._Str_2540.length;){const t=this._Str_2540[0];t&&t.dispose(),this._Str_2540.pop()}this._Str_2540=[],this._Str_2540=[]}this._isPlaneSet=!1,this._Str_5928=this._Str_5928+1,this.reset()}_Str_25732(){if(!this.object||this._isPlaneSet)return!1;isNaN(this._floorThickness)||(this._roomPlaneParser.floorThicknessMultiplier=this._floorThickness),isNaN(this._wallThickness)||(this._roomPlaneParser.wallThicknessMultiplier=this._wallThickness);const e=this.object.model.getValue(At.a.ROOM_MAP_DATA);if(!this._roomPlaneParser.initializeFromMapData(e))return;const s=this._Str_23949(),n=this._Str_23063();let i=0,r=this.object.model.getValue(At.a.ROOM_RANDOM_SEED),a=0;for(;a<this._roomPlaneParser.planeCount;){const e=this._roomPlaneParser.getPlaneLocation(a),o=this._roomPlaneParser.getPlaneLeftSide(a),c=this._roomPlaneParser.getPlaneRightSide(a),l=this._roomPlaneParser.getPlaneSecondaryNormals(a),h=this._roomPlaneParser.getPlaneType(a);let u=null;if(!(e&&o&&c))return;{const _=m.a.crossProduct(o,c);if(r=7613*r+517,u=null,h===Xe.a.PLANE_FLOOR){const s=e.x+o.x+.5,n=e.y+c.y+.5,i=Math.trunc(s)-s,a=Math.trunc(n)-n;u=new ss(this.object.getLocation(),e,o,c,ss.TYPE_FLOOR,!0,l,r,-i,-a),u.color=0!==_.z?t._Str_18544:0!==_.x?t._Str_16664:t._Str_18640,this._data&&(u.rasterizer=this._data.floorRasterizer)}else h===Xe.a.PLANE_WALL?(u=new ss(this.object.getLocation(),e,o,c,ss.TYPE_WALL,!0,l,r),(o.length<1||c.length<1)&&(u._Str_18448=!1),u.color=0===_.x&&0===_.y?t._Str_14868:_.y>0?t._Str_14503:0===_.y?t._Str_15851:t._Str_13715,this._data&&(u.rasterizer=this._data.wallRasterizer)):h===Xe.a.PLANE_LANDSCAPE?(u=new ss(this.object.getLocation(),e,o,c,ss.TYPE_LANDSCAPE,!0,l,r,i,0,s,n),u.color=_.y>0?t._Str_17403:0==_.y?t._Str_16113:t._Str_18370,this._data&&(u.rasterizer=this._data.landscapeRasterizer),i+=o.length):h==Xe.a.PLANE_BILLBOARD&&(u=new ss(this.object.getLocation(),e,o,c,ss.TYPE_WALL,!0,l,r),(o.length<1||c.length<1)&&(u._Str_18448=!1),u.color=0==_.x&&0==_.y?t._Str_14868:_.y>0?t._Str_14503:0==_.y?t._Str_15851:t._Str_13715);if(u){u._Str_16279=this._data.maskManager;let t=0;for(;t<this._roomPlaneParser.getPlaneMaskCount(a);){const e=this._roomPlaneParser.getPlaneMaskLeftSideLoc(a,t),s=this._roomPlaneParser.getPlaneMaskRightSideLoc(a,t),n=this._roomPlaneParser.getPlaneMaskLeftSideLength(a,t),i=this._roomPlaneParser.getPlaneMaskRightSideLength(a,t);u._Str_24758(e,s,n,i),t++}this._Str_2540.push(u)}}a++}return this._isPlaneSet=!0,this._Str_18024(),!0}_Str_18024(){this.setSpriteCount(this._Str_2540.length);let t=0;for(;t<this._Str_2540.length;){const e=this._Str_2540[t],s=this.getSprite(t);e&&s&&e._Str_5424&&e._Str_4968&&(s.alphaTolerance=e.type===ss.TYPE_WALL&&(e._Str_5424.length<1||e._Str_4968.length<1)?Ut._Str_9268:Ut._Str_9735,s.tag=e.type===ss.TYPE_WALL?"plane.wall@"+(t+1):e.type===ss.TYPE_FLOOR?"plane.floor@"+(t+1):"plane@"+(t+1),s.spriteType=_._Str_8616),t++}}_Str_23949(){let t=0,e=0;for(;e<this._roomPlaneParser.planeCount;)this._roomPlaneParser.getPlaneType(e)===Xe.a.PLANE_LANDSCAPE&&(t+=this._roomPlaneParser.getPlaneLeftSide(e).length),e++;return t}_Str_23063(){let t=0,e=0;for(;e<this._roomPlaneParser.planeCount;){if(this._roomPlaneParser.getPlaneType(e)===Xe.a.PLANE_LANDSCAPE){const s=this._roomPlaneParser.getPlaneRightSide(e);s.length>t&&(t=s.length)}e++}return t>5&&(t=5),t}updatePlaneTypes(t,e,s){if(t!==this._floorType?this._floorType=t:t=null,e!==this._wallType?this._wallType=e:e=null,s!==this._landscapeType?this._landscapeType=s:s=null,!t&&!e&&!s)return!1;let n=0;for(;n<this._Str_2540.length;){const i=this._Str_2540[n];i&&(i.type===ss.TYPE_FLOOR&&t?i.id=t:i.type===ss.TYPE_WALL&&e?i.id=e:i.type===ss.TYPE_LANDSCAPE&&s&&(i.id=s)),n++}return!0}updatePlaneVisibility(t,e,s){t===this._typeVisibility[ss.TYPE_FLOOR]&&e===this._typeVisibility[ss.TYPE_WALL]&&s===this._typeVisibility[ss.TYPE_LANDSCAPE]||(this._typeVisibility[ss.TYPE_FLOOR]=t,this._typeVisibility[ss.TYPE_WALL]=e,this._typeVisibility[ss.TYPE_LANDSCAPE]=s,this._Str_4864=[],this._Str_6648=[])}_Str_16913(e,s,n){if(!e||!this.object)return;this._Str_5928++,s&&(this._Str_4864=[],this._Str_6648=[]);const i=this._Str_4864.length>0;let r=this._Str_4864;this._Str_4864.length||(r=this._Str_2540);let a=0,o=!1,c=0;for(;c<r.length;){let s=c;i&&(s=this._Str_6648[c]);const l=this.getSprite(s);if(l){const h=r[c];h?(l.id=h.uniqueId,h.update(e,n)&&(h.visible&&(a=h.relativeDepth+this._Str_24891+s/1e3,h.type!==ss.TYPE_FLOOR&&(a=h.relativeDepth+this._Str_25403+s/1e3,(h._Str_5424.length<1||h._Str_4968.length<1)&&(a+=.5*t._Str_8621)),this._Str_7421(l,h,"plane "+s+" "+e.scale,a)),o=!0),l.visible!=(h.visible&&this._typeVisibility[h.type])&&(l.visible=!l.visible,o=!0),l.visible&&(i||(this._Str_4864.push(h),this._Str_6648.push(c)))):(l.id=0,l.visible&&(l.visible=!1,o=!0))}c++}return o}_Str_15935(t){if(!t)return;this._roomPlaneBitmapMaskParser.initialize(t);const e=[],s=[];let n=!1,i=0;for(;i<this._Str_2540.length;){const t=this._Str_2540[i];t&&(t._Str_25213(),t.type===ss.TYPE_LANDSCAPE&&e.push(i)),i++}for(const r of this._roomPlaneBitmapMaskParser.masks.values()){const t=this._roomPlaneBitmapMaskParser._Str_21678(r),e=this._roomPlaneBitmapMaskParser._Str_19038(r),i=this._roomPlaneBitmapMaskParser._Str_21644(r);if(e){let r=0;for(;r<this._Str_2540.length;){const a=this._Str_2540[r];if((a.type===ss.TYPE_WALL||a.type===ss.TYPE_LANDSCAPE)&&a&&a.location&&a.normal){const o=m.a.dif(e,a.location);if(Math.abs(m.a.scalarProjection(o,a.normal))<.01&&a._Str_5424&&a._Str_4968){const e=m.a.scalarProjection(o,a._Str_5424),c=m.a.scalarProjection(o,a._Str_4968);a.type===ss.TYPE_WALL||a.type===ss.TYPE_LANDSCAPE&&i===ze.HOLE?a._Str_24569(t,e,c):a.type===ss.TYPE_LANDSCAPE&&(a._Str_14801||(n=!0),a._Str_14801=!0,s.push(r))}}r++}}}for(i=0;i<e.length;){const t=e[i];s.indexOf(t)<0&&(this._Str_2540[t]._Str_14801=!1,n=!0),i++}n&&(this._Str_4864=[],this._Str_6648=[])}_Str_7421(t,e,s,n){const i=e.offset;t.offsetX=-i.x,t.offsetY=-i.y,t.relativeDepth=n,t.color=e.color,t.texture=this._Str_22446(e,s),t.name=s+"_"+this._Str_5928}_Str_22446(t,e){return t.bitmapData}getBoundingRectangle(){return this._boundingRectangle||(this._boundingRectangle=super.getBoundingRectangle()),new n.Rectangle(this._boundingRectangle.x,this._boundingRectangle.y,this._boundingRectangle.width,this._boundingRectangle.height)}get _Str_19113(){const t=[];for(const e of this._Str_4864)t.push(e);return t}get _Str_24891(){return t._Str_8621+.1}get _Str_25403(){return t._Str_8621+.5}}return t.LAST_VISUALIZATION=null,t.RENDER_TEXTURE_CACHE=new Map,t._Str_18544=16777215,t._Str_18640=14540253,t._Str_16664=12303291,t._Str_14503=16777215,t._Str_15851=13421772,t._Str_13715=10066329,t._Str_14868=10066329,t._Str_17403=16777215,t._Str_16113=13421772,t._Str_18370=10066329,t._Str_8621=1e3,t})();class As extends he{constructor(){super(),this._tileHeight=0}getLayerYOffset(t,e,s){return 1===s?(this._tileHeight=this.object.model.getValue(At.a.TILE_CURSOR_HEIGHT),32*-this._tileHeight):super.getLayerYOffset(t,e,s)}}let Ms=(()=>{class t{constructor(){this._visualizationDatas=new Map}getVisualization(t){const e=this.getVisualizationType(t);return e?new e:null}getVisualizationType(t){if(!t)return null;let e=null;switch(t){case Mt.a.ROOM:e=Cs;break;case Mt.a.TILE_CURSOR:e=As;break;case Mt.a.USER:case Mt.a.BOT:case Mt.a.RENTABLE_BOT:e=zt;break;case Mt.a.PET_ANIMATED:e=je;break;case Mt.a.FURNITURE_STATIC:e=le;break;case Mt.a.FURNITURE_ANIMATED:e=he;break;case Mt.a.FURNITURE_RESETTING_ANIMATED:e=Ne;break;case Mt.a.FURNITURE_BADGE_DISPLAY:e=ue;break;case Mt.a.FURNITURE_BG:e=Le;break;case Mt.a.FURNITURE_BB:e=de;break;case Mt.a.FURNITURE_BOTTLE:e=ge;break;case Mt.a.FURNITURE_BUILDER_PLACEHOLDER:e=me;break;case Mt.a.FURNITURE_COUNTER_CLOCK:e=pe;break;case Mt.a.FURNITURE_CUBOID:e=fe;break;case Mt.a.FURNITURE_EXTERNAL_IMAGE:e=be;break;case Mt.a.FURNITURE_FIREWORKS:e=ve;break;case Mt.a.FURNITURE_GIFT_WRAPPED_FIREWORKS:e=Ie;break;case Mt.a.FURNITURE_GIFT_WRAPPED:e=Re;break;case Mt.a.FURNITURE_GUILD_CUSTOMIZED:e=Te;break;case Mt.a.FURNITURE_GUILD_ISOMETRIC_BADGE:e=ye;break;case Mt.a.FURNITURE_HABBOWHEEL:e=Oe;break;case Mt.a.FURNITURE_MANNEQUIN:e=Ae;break;case Mt.a.FURNITURE_PARTY_BEAMER:e=Me;break;case Mt.a.FURNITURE_PLANET_SYSTEM:e=we;break;case Mt.a.FURNITURE_POSTER:e=Ue;break;case Mt.a.FURNITURE_QUEUE_TILE:e=De;break;case Mt.a.FURNITURE_SCORE_BOARD:e=Pe;break;case Mt.a.FURNITURE_SOUNDBLOCK:e=xe;break;case Mt.a.FURNITURE_STICKIE:e=Fe;break;case Mt.a.FURNITURE_VAL_RANDOMIZER:e=ke;break;case Mt.a.FURNITURE_VOTE_COUNTER:e=We;break;case Mt.a.FURNITURE_VOTE_MAJORITY:e=Be;break;case Mt.a.FURNITURE_WATER_AREA:e=Ve;break;case Mt.a.FURNITURE_YOUTUBE:e=Ge}return e||(i.a.log("Unknown Visualization: "+t),null)}getVisualizationData(e,s,n){const i=this._visualizationDatas.get(e);if(i)return i;let r=null;switch(s){case Mt.a.FURNITURE_STATIC:case Mt.a.FURNITURE_GIFT_WRAPPED:case Mt.a.FURNITURE_BB:case Mt.a.FURNITURE_BG:case Mt.a.FURNITURE_STICKIE:case Mt.a.FURNITURE_BUILDER_PLACEHOLDER:r=new oe;break;case Mt.a.FURNITURE_ANIMATED:case Mt.a.FURNITURE_RESETTING_ANIMATED:case Mt.a.FURNITURE_POSTER:case Mt.a.FURNITURE_HABBOWHEEL:case Mt.a.FURNITURE_VAL_RANDOMIZER:case Mt.a.FURNITURE_BOTTLE:case Mt.a.FURNITURE_PLANET_SYSTEM:case Mt.a.FURNITURE_QUEUE_TILE:case Mt.a.FURNITURE_PARTY_BEAMER:case Mt.a.FURNITURE_COUNTER_CLOCK:case Mt.a.FURNITURE_WATER_AREA:case Mt.a.FURNITURE_SCORE_BOARD:case Mt.a.FURNITURE_FIREWORKS:case Mt.a.FURNITURE_GIFT_WRAPPED_FIREWORKS:case Mt.a.FURNITURE_GUILD_CUSTOMIZED:case Mt.a.FURNITURE_GUILD_ISOMETRIC_BADGE:case Mt.a.FURNITURE_VOTE_COUNTER:case Mt.a.FURNITURE_VOTE_MAJORITY:case Mt.a.FURNITURE_SOUNDBLOCK:case Mt.a.FURNITURE_BADGE_DISPLAY:case Mt.a.FURNITURE_EXTERNAL_IMAGE:case Mt.a.FURNITURE_YOUTUBE:case Mt.a.TILE_CURSOR:r=new ce;break;case Mt.a.FURNITURE_MANNEQUIN:r=new Ce;break;case Mt.a.ROOM:r=new Os;break;case Mt.a.USER:case Mt.a.BOT:case Mt.a.RENTABLE_BOT:r=new jt;break;case Mt.a.PET_ANIMATED:r=new He}return r?r.initialize(n)?((r instanceof jt||r instanceof Ce)&&(r.avatarManager=l.a.instance.avatar),t.CACHING_ENABLED&&this._visualizationDatas.set(e,r),r):(r.dispose(),null):null}}return t.CACHING_ENABLED=!0,t})();var ws=s("ZQhZ"),Us=s("whnG"),Ds=s("yydM"),Ns=s("JODW"),Ls=s("sR+E"),Ps=s("zVPj"),xs=s("Wzp3"),Fs=s("Ie/D"),ks=s("Nakt"),Ws=s("Wamt"),Bs=s("ArMw"),Vs=s("ObWd"),Gs=s("QZfg"),Ks=s("+IZ6"),Hs=s("Xe8L"),js=s("Njml"),zs=s("mQ1q"),Ys=s("ebaN"),qs=s("Prlr"),Xs=s("bmMM"),Zs=s("zTkZ"),Qs=s("lbEV"),Js=s("CzV9"),$s=s("f1eJ"),tn=s("1QEa"),en=s("sRv6"),sn=s("xq+5"),nn=s("jFxZ"),rn=s("sCRD"),an=s("mGgu"),on=s("BVCN"),cn=s("fVO9"),ln=s("Yx/o"),hn=s("D/zE"),un=s("KjXG"),_n=s("jzpY"),dn=s("NpwP"),gn=s("n7CB"),mn=s("jdh6"),pn=s("uMJ2"),fn=s("O/2Q"),En=s("4Yln"),Sn=s("rlQL"),bn=s("BrMT");class vn{constructor(t,e){this._width=t,this._height=e,this._heights=[],this._isNotStackable=[],this._isRoomTile=[];let s=t*e;for(;s>0;)this._heights.push(0),this._isNotStackable.push(!1),this._isRoomTile.push(!1),s--}dispose(){this._width=0,this._height=0,this._height=null,this._isNotStackable=null,this._isRoomTile=null}validPosition(t,e){return t>=0&&t<this._width&&e>=0&&e<this._height}getTileHeight(t,e){return this.validPosition(t,e)?this._heights[e*this._width+t]:0}setTileHeight(t,e,s){this.validPosition(t,e)&&(this._heights[e*this._width+t]=s)}setStackingBlocked(t,e,s){this.validPosition(t,e)&&(this._isNotStackable[e*this._width+t]=s)}setIsRoomTile(t,e,s){this.validPosition(t,e)&&(this._isRoomTile[e*this._width+t]=s)}validateLocation(t,e,s,n,i,r,a,o,c,l=-1){let h=0,u=0;if(!this.validPosition(t,e)||!this.validPosition(t+s-1,e+n-1))return!1;(i<0||i>=this._width)&&(i=0),(r<0||r>=this._height)&&(r=0),a=Math.min(a,this._width-i),o=Math.min(o,this._height-r),-1===l&&(l=this.getTileHeight(t,e));let _=e;for(;_<e+n;){for(h=t;h<t+s;){if(h<i||h>=i+a||_<r||_>=r+o)if(u=_*this._width+h,c){if(!this._isRoomTile[u])return!1}else if(this._isNotStackable[u]||!this._isRoomTile[u]||Math.abs(this._heights[u]-l)>.01)return!1;h++}_++}return!0}get width(){return this._width}get height(){return this._height}}var In=s("9mJe");class Rn extends Kt.a{constructor(t){super(),this._connection=null,this._roomCreator=t,this._planeParser=new Ze.a,this._latestEntryTileEvent=null,this._currentRoomId=0,this._ownUserId=0,this._initialConnection=!0}onDispose(){super.onDispose(),this._connection=null,this._roomCreator=null,this._latestEntryTileEvent=null,this._planeParser&&(this._planeParser.dispose(),this._planeParser=null)}setConnection(t){!this._connection&&t&&(this._connection=t,this._connection.addMessageEvent(new pn.a(this.onUserInfoEvent.bind(this))),this._connection.addMessageEvent(new Zs.a(this.onRoomModelNameEvent.bind(this))),this._connection.addMessageEvent(new Qs.a(this.onRoomPaintEvent.bind(this))),this._connection.addMessageEvent(new Xs.a(this.onRoomModelEvent.bind(this))),this._connection.addMessageEvent(new Ys.a(this.onRoomHeightMapEvent.bind(this))),this._connection.addMessageEvent(new qs.a(this.onRoomHeightMapUpdateEvent.bind(this))),this._connection.addMessageEvent(new Js.a(this.onRoomThicknessEvent.bind(this))),this._connection.addMessageEvent(new zs.a(this.onRoomDoorEvent.bind(this))),this._connection.addMessageEvent(new Ds.a(this.onRoomRollingEvent.bind(this))),this._connection.addMessageEvent(new Fs.a(this.onFurnitureAliasesEvent.bind(this))),this._connection.addMessageEvent(new Ns.a(this.onFurnitureFloorAddEvent.bind(this))),this._connection.addMessageEvent(new Ls.a(this.onFurnitureFloorEvent.bind(this))),this._connection.addMessageEvent(new Ps.a(this.onFurnitureFloorRemoveEvent.bind(this))),this._connection.addMessageEvent(new xs.a(this.onFurnitureFloorUpdateEvent.bind(this))),this._connection.addMessageEvent(new Gs.a(this.onFurnitureWallAddEvent.bind(this))),this._connection.addMessageEvent(new Ks.a(this.onFurnitureWallEvent.bind(this))),this._connection.addMessageEvent(new Hs.a(this.onFurnitureWallRemoveEvent.bind(this))),this._connection.addMessageEvent(new js.a(this.onFurnitureWallUpdateEvent.bind(this))),this._connection.addMessageEvent(new ks.a(this.onFurnitureDataEvent.bind(this))),this._connection.addMessageEvent(new Ws.a(this.onFurnitureItemDataEvent.bind(this))),this._connection.addMessageEvent(new Vs.a(this.onFurnitureStateEvent.bind(this))),this._connection.addMessageEvent(new an.a(this.onRoomUnitDanceEvent.bind(this))),this._connection.addMessageEvent(new on.a(this.onRoomUnitEffectEvent.bind(this))),this._connection.addMessageEvent(new cn.a(this.onRoomUnitEvent.bind(this))),this._connection.addMessageEvent(new ln.a(this.onRoomUnitExpressionEvent.bind(this))),this._connection.addMessageEvent(new hn.a(this.onRoomUnitHandItemEvent.bind(this))),this._connection.addMessageEvent(new un.a(this.onRoomUnitIdleEvent.bind(this))),this._connection.addMessageEvent(new _n.a(this.onRoomUnitInfoEvent.bind(this))),this._connection.addMessageEvent(new dn.a(this.onRoomUnitNumberEvent.bind(this))),this._connection.addMessageEvent(new gn.a(this.onRoomUnitRemoveEvent.bind(this))),this._connection.addMessageEvent(new mn.a(this.onRoomUnitStatusEvent.bind(this))),this._connection.addMessageEvent(new en.a(this.onRoomUnitChatEvent.bind(this))),this._connection.addMessageEvent(new sn.a(this.onRoomUnitChatEvent.bind(this))),this._connection.addMessageEvent(new nn.a(this.onRoomUnitChatEvent.bind(this))),this._connection.addMessageEvent(new rn.a(this.onRoomUnitTypingEvent.bind(this))),this._connection.addMessageEvent(new $s.a(this.onPetFigureUpdateEvent.bind(this))),this._connection.addMessageEvent(new tn.a(this.onYouArePlayingGameEvent.bind(this))),this._connection.addMessageEvent(new Bs.a(this.onFurnitureState2Event.bind(this))),this._connection.addMessageEvent(new fn.a(this.onIgnoreResultEvent.bind(this))))}setRoomId(t){0!==this._currentRoomId&&this._roomCreator&&this._roomCreator.destroyRoom(this._currentRoomId),this._currentRoomId=t,this._latestEntryTileEvent=null}clearRoomId(){this._currentRoomId=0,this._latestEntryTileEvent=null}onUserInfoEvent(t){if(!(t instanceof pn.a&&t.connection))return;const e=t.getParser();e&&(this._ownUserId=e.userInfo.userId)}onRoomModelNameEvent(t){if(t instanceof Zs.a&&t.connection){if(this._currentRoomId!==t.getParser().roomId&&this.setRoomId(t.getParser().roomId),this._roomCreator&&this._roomCreator.setRoomInstanceModelName(t.getParser().roomId,t.getParser().name),this._initialConnection)return t.connection.send(new En.a),void(this._initialConnection=!1);t.connection.send(new Sn.a)}}onRoomPaintEvent(t){if(!(t instanceof Qs.a))return;const e=t.getParser();e&&this._roomCreator&&this._roomCreator.updateRoomInstancePlaneType(this._currentRoomId,e.floorType,e.wallType,e.landscapeType)}onRoomModelEvent(t){if(!(t instanceof Xs.a&&t.connection&&this._roomCreator))return;const e=t.getParser();if(!e)return;const s=this._roomCreator.getLegacyWallGeometry(this._currentRoomId);if(!s)return;this._planeParser.reset();const n=e.width,i=e.height;this._planeParser.initializeTileMap(n,i);let r=null;this._latestEntryTileEvent&&(r=this._latestEntryTileEvent.getParser());let a=-1,o=-1,c=0,l=0,h=0;for(;h<i;){let t=0;for(;t<n;){const s=e.getHeight(t,h);(h>0&&h<i-1||t>0&&t<n-1)&&s!=Ze.a.TILE_BLOCKED&&(null==r||t==r.x&&h==r.y)&&(e.getHeight(t,h-1)==Ze.a.TILE_BLOCKED&&e.getHeight(t-1,h)==Ze.a.TILE_BLOCKED&&e.getHeight(t,h+1)==Ze.a.TILE_BLOCKED&&(a=t+.5,o=h,c=s,l=90),e.getHeight(t,h-1)==Ze.a.TILE_BLOCKED&&e.getHeight(t-1,h)==Ze.a.TILE_BLOCKED&&e.getHeight(t+1,h)==Ze.a.TILE_BLOCKED&&(a=t,o=h+.5,c=s,l=180)),this._planeParser.setTileHeight(t,h,s),t++}h++}this._planeParser.setTileHeight(Math.floor(a),Math.floor(o),c),this._planeParser.initializeFromTileData(e.wallHeight),this._planeParser.setTileHeight(Math.floor(a),Math.floor(o),c+this._planeParser.wallHeight),this._planeParser.restrictsDragging=!1,this._planeParser.restrictsScaling=!1,this._planeParser.restrictedScale=1,s.scale=e.scale,s.initialize(n,i,this._planeParser.floorHeight);let u=e.height-1;for(;u>=0;){let t=e.width-1;for(;t>=0;)s.setHeight(t,u,this._planeParser.getTileHeight(t,u)),t--;u--}const _=this._planeParser.getMapData();_.doors.push({x:a,y:o,z:c,dir:l}),this._roomCreator.createRoomInstance(this._currentRoomId,_)}onRoomHeightMapEvent(t){if(!(t instanceof Ys.a&&t.connection&&this._roomCreator))return;const e=t.getParser();if(!e)return;const s=e.width,n=e.height,i=new vn(s,n);let r=0;for(;r<n;){let t=0;for(;t<s;)i.setTileHeight(t,r,e.getTileHeight(t,r)),i.setStackingBlocked(t,r,e.getStackingBlocked(t,r)),i.setIsRoomTile(t,r,e.isRoomTile(t,r)),t++;r++}this._roomCreator.setFurnitureStackingHeightMap(this._currentRoomId,i)}onRoomHeightMapUpdateEvent(t){if(!(t instanceof qs.a&&t.connection&&this._roomCreator))return;const e=t.getParser();if(!e)return;const s=this._roomCreator.getFurnitureStackingHeightMap(this._currentRoomId);if(s){for(;e.next();)s.setTileHeight(e.x,e.y,e.tileHeight()),s.setStackingBlocked(e.x,e.y,e.isStackingBlocked()),s.setIsRoomTile(e.x,e.y,e.isRoomTile());this._roomCreator._Str_17722(this._currentRoomId,"RoomMessageHandler.onRoomHeightMapUpdateEvent()")}}onRoomThicknessEvent(t){if(!(t instanceof Js.a))return;const e=t.getParser();if(!e)return;const s=e.thicknessWall,n=e.thicknessFloor;this._roomCreator&&(this._roomCreator.updateRoomInstancePlaneVisibility(this._currentRoomId,!e.hideWalls,!0),this._roomCreator.updateRoomInstancePlaneThickness(this._currentRoomId,s,n))}onRoomDoorEvent(t){t instanceof zs.a&&(this._latestEntryTileEvent=t)}onRoomRollingEvent(t){if(!(t instanceof Ds.a&&t.connection&&this._roomCreator))return;const e=t.getParser();this._roomCreator.updateRoomObjectFloor(this._currentRoomId,e.rollerId,null,null,1,null),this._roomCreator.updateRoomObjectFloor(this._currentRoomId,e.rollerId,null,null,2,null);const s=e.itemsRolling;if(s&&s.length)for(const i of s)i&&this._roomCreator.rollRoomObjectFloor(this._currentRoomId,i.id,i.location,i.targetLocation);const n=e.unitRolling;if(n){this._roomCreator.updateRoomObjectUserLocation(this._currentRoomId,n.id,n.location,n.targetLocation);const t=this._roomCreator.getRoomObjectUser(this._currentRoomId,n.id);if(t&&t.type!==Ct.a.MONSTER_PLANT){let t="std";switch(n.movementType){case In.a.MOVE:t="mv";break;case In.a.SLIDE:t="std"}this._roomCreator.updateRoomObjectUserPosture(this._currentRoomId,n.id,t)}}}onFurnitureAliasesEvent(t){t instanceof Fs.a&&t.connection&&this._roomCreator&&(t.getParser(),this._connection.send(new Sn.a))}onFurnitureFloorAddEvent(t){if(!(t instanceof Ns.a&&t.connection&&this._roomCreator))return;const e=t.getParser().item;e&&this.addRoomObjectFurnitureFloor(this._currentRoomId,e)}onFurnitureFloorEvent(t){if(!(t instanceof Ls.a&&t.connection&&this._roomCreator))return;const e=t.getParser();if(!e)return;const s=e.items.length;let n=0;for(;n<s;){const t=e.items[n];t&&this.addRoomObjectFurnitureFloor(this._currentRoomId,t),n++}}onFurnitureFloorRemoveEvent(t){if(!(t instanceof Ps.a&&t.connection&&this._roomCreator))return;const e=t.getParser();e&&(e.delay>0?setTimeout(()=>{this._roomCreator.removeRoomObjectFloor(this._currentRoomId,e.itemId,e.isExpired?-1:e.userId,!0)},e.delay):this._roomCreator.removeRoomObjectFloor(this._currentRoomId,e.itemId,e.isExpired?-1:e.userId,!0))}onFurnitureFloorUpdateEvent(t){if(!(t instanceof xs.a&&t.connection&&this._roomCreator))return;const e=t.getParser().item;if(!e)return;const s=new m.a(e.x,e.y,e.z),n=new m.a(e.direction);this._roomCreator.updateRoomObjectFloor(this._currentRoomId,e.itemId,s,n,e.data.state,e.data,e.extra),this._roomCreator.updateRoomObjectFloorHeight(this._currentRoomId,e.itemId,e.stackHeight),this._roomCreator.updateRoomObjectFloorExpiration(this._currentRoomId,e.itemId,e.expires)}onFurnitureWallAddEvent(t){if(!(t instanceof Gs.a&&t.connection&&this._roomCreator))return;const e=t.getParser().item;e&&this.addRoomObjectFurnitureWall(this._currentRoomId,e)}onFurnitureWallEvent(t){if(!(t instanceof Ks.a&&t.connection&&this._roomCreator))return;const e=t.getParser();if(!e)return;const s=e.items.length;let n=0;for(;n<s;){const t=e.items[n];t&&this.addRoomObjectFurnitureWall(this._currentRoomId,t),n++}}onFurnitureWallRemoveEvent(t){if(!(t instanceof Hs.a&&t.connection&&this._roomCreator))return;const e=t.getParser();e&&this._roomCreator.removeRoomObjectWall(this._currentRoomId,e.itemId,e.userId)}onFurnitureWallUpdateEvent(t){if(!(t instanceof js.a&&t.connection&&this._roomCreator))return;const e=this._roomCreator.getLegacyWallGeometry(this._currentRoomId);if(!e)return;const s=t.getParser().item;if(!s)return;const n=e.getLocation(s.width,s.height,s.localX,s.localY,s.direction),i=new m.a(e.getDirection(s.direction));this._roomCreator.updateRoomObjectWall(this._currentRoomId,s.itemId,n,i,s.state,s.stuffData),this._roomCreator.updateRoomObjectWallExpiration(this._currentRoomId,s.itemId,s.secondsToExpiration)}onFurnitureDataEvent(t){if(!(t instanceof ks.a&&t.connection&&this._roomCreator))return;const e=t.getParser();this._roomCreator.updateRoomObjectFloor(this._currentRoomId,e.furnitureId,null,null,e.objectData.state,e.objectData)}onFurnitureItemDataEvent(t){if(!(t instanceof Ws.a&&t.connection&&this._roomCreator))return;const e=t.getParser();this._roomCreator.updateRoomObjectWallItemData(this._currentRoomId,e.furnitureId,e.data)}onFurnitureStateEvent(t){if(!(t instanceof Vs.a&&t.connection&&this._roomCreator))return;const e=t.getParser();this._roomCreator.updateRoomObjectFloor(this._currentRoomId,e.itemId,null,null,e.state,new yt.a)}onFurnitureState2Event(t){if(!(t instanceof Bs.a&&t.connection&&this._roomCreator))return;const e=t.getParser();this._roomCreator.updateRoomObjectFloor(this._currentRoomId,e.itemId,null,null,e.value,new yt.a)}onRoomUnitDanceEvent(t){t instanceof an.a&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,t.getParser().unitId,At.a.FIGURE_DANCE,t.getParser().danceId)}onRoomUnitEffectEvent(t){t instanceof on.a&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserEffect(this._currentRoomId,t.getParser().unitId,t.getParser().effectId,t.getParser().delay)}onRoomUnitEvent(t){if(!(t instanceof cn.a&&t.connection&&this._roomCreator))return;const e=t.getParser().users;if(e&&e.length)for(const s of e){if(!s)continue;const t=new m.a(s.x,s.y,s.z),e=new m.a(s.dir);this._roomCreator.addRoomObjectUser(this._currentRoomId,s.roomIndex,t,e,s.dir,s.userType,s.figure),s.webID===this._ownUserId&&(this._roomCreator.setRoomSessionOwnUser(this._currentRoomId,s.roomIndex),this._roomCreator.updateRoomObjectUserOwn(this._currentRoomId,s.roomIndex)),this._roomCreator.updateRoomObjectUserFigure(this._currentRoomId,s.roomIndex,s.figure,s.sex,s.subType,s.isRiding),Ct.a.getTypeString(s.userType)===Ct.a.PET&&this._roomCreator.getPetTypeId(s.figure)===Us.a.MONSTERPLANT&&this._roomCreator.updateRoomObjectUserPosture(this._currentRoomId,s.roomIndex,s.petPosture),this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,s.roomIndex,At.a.FIGURE_IS_MUTED,this._roomCreator.sessionDataManager.isUserIgnored(s.name)?1:0)}}onRoomUnitExpressionEvent(t){t instanceof ln.a&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,t.getParser().unitId,At.a.FIGURE_EXPRESSION,t.getParser().expression)}onRoomUnitHandItemEvent(t){t instanceof hn.a&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,t.getParser().unitId,At.a.FIGURE_CARRY_OBJECT,t.getParser().handId)}onRoomUnitIdleEvent(t){t instanceof un.a&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,t.getParser().unitId,At.a.FIGURE_SLEEP,t.getParser().isIdle?1:0)}onRoomUnitInfoEvent(t){t instanceof _n.a&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserFigure(this._currentRoomId,t.getParser().unitId,t.getParser().figure,t.getParser().gender)}onRoomUnitNumberEvent(t){if(!(t instanceof dn.a&&t.connection&&this._roomCreator))return;const e=t.getParser();e&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,e.unitId,At.a.FIGURE_NUMBER_VALUE,e.value)}onRoomUnitRemoveEvent(t){t instanceof gn.a&&t.connection&&this._roomCreator&&this._roomCreator.removeRoomObjectUser(this._currentRoomId,t.getParser().unitId)}onRoomUnitStatusEvent(t){if(!(t instanceof mn.a&&t.connection&&this._roomCreator))return;const e=t.getParser().statuses;if(!e||!e.length)return;const s=this._roomCreator.getRoomInstance(this._currentRoomId);if(!s)return;const n=s.model.getValue(bn.a.ROOM_Z_SCALE)||1;for(const i of e){if(!i)continue;let t=i.height;t&&(t/=n);const e=new m.a(i.x,i.y,i.z+t),s=new m.a(i.direction);let r=null;i.didMove&&(r=new m.a(i.targetX,i.targetY,i.targetZ)),this._roomCreator.updateRoomObjectUserLocation(this._currentRoomId,i.id,e,r,i.canStandUp,t,s,i.headDirection),this._roomCreator.updateRoomObjectUserFlatControl(this._currentRoomId,i.id,"0");let a=!0,o=!1,c=At.a.STD,l="";if(i.actions&&i.actions.length)for(const n of i.actions)if(n)switch(n.action){case"flatctrl":this._roomCreator.updateRoomObjectUserFlatControl(this._currentRoomId,i.id,n.value);break;case"sign":1===i.actions.length&&(a=!1),this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,i.id,At.a.FIGURE_SIGN,parseInt(n.value));break;case"gst":1===i.actions.length&&(a=!1),this._roomCreator.updateRoomObjectUserPetGesture(this._currentRoomId,i.id,n.value);break;case"wav":case"mv":o=!0,c=n.action,l=n.value;break;case"trd":break;default:o=!0,c=n.action,l=n.value}o?this._roomCreator.updateRoomObjectUserPosture(this._currentRoomId,i.id,c,l):a&&this._roomCreator.updateRoomObjectUserPosture(this._currentRoomId,i.id,At.a.STD,"")}}onRoomUnitChatEvent(t){if(!t.connection||!this._roomCreator)return;const e=t.getParser();e&&(this._roomCreator.updateRoomObjectUserGesture(this._currentRoomId,e.roomIndex,e.gesture),this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,e.roomIndex,At.a.FIGURE_TALK,e.message.length/10))}onRoomUnitTypingEvent(t){t instanceof rn.a&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,t.getParser().unitId,At.a.FIGURE_IS_TYPING,t.getParser().isTyping?1:0)}onPetFigureUpdateEvent(t){if(!(t instanceof $s.a&&t.connection&&this._roomCreator))return;const e=t.getParser();e&&this._roomCreator.updateRoomObjectUserFigure(this._currentRoomId,e.roomIndex,e.figureData.figuredata,"","",e.isRiding)}onYouArePlayingGameEvent(t){if(!t)return;const e=t.getParser();e&&this._roomCreator.setRoomEngineGameMode(this._currentRoomId,e.isPlaying)}addRoomObjectFurnitureFloor(t,e){if(!e||!this._roomCreator)return;const s=new m.a(e.x,e.y,e.z),n=new m.a(e.direction);e.spriteName?this._roomCreator.addFurnitureFloorByTypeName(t,e.itemId,e.spriteName,s,n,e.state,e.data,e.extra,e.expires,e.usagePolicy,e.userId,e.username,!0,!0,e.stackHeight):this._roomCreator.addFurnitureFloor(t,e.itemId,e.spriteId,s,n,e.state,e.data,e.extra,e.expires,e.usagePolicy,e.userId,e.username,!0,!0,e.stackHeight)}addRoomObjectFurnitureWall(t,e){if(!e||!this._roomCreator)return;const s=this._roomCreator.getLegacyWallGeometry(t);if(!s)return;let n=null;e._Str_22379||(n=s.getLocation(e.width,e.height,e.localX,e.localY,e.direction));const i=new m.a(s.getDirection(e.direction));this._roomCreator.addFurnitureWall(t,e.itemId,e.spriteId,n,i,e.state,e.stuffData,e.secondsToExpiration,e.usagePolicy,e.userId,e.username)}onIgnoreResultEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=this._roomCreator.roomSessionManager.getSession(this._currentRoomId);if(!s)return;const n=s.userDataManager.getUserDataByName(e.name);if(n)switch(e.result){case 1:case 2:return void this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,n.roomIndex,At.a.FIGURE_IS_MUTED,1);case 3:return void this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,n.roomIndex,At.a.FIGURE_IS_MUTED,0)}}get currentRoomId(){return this._currentRoomId}}var Tn=s("SULm"),yn=s("h2l6"),On=s("+ana"),Cn=s("toFP"),An=s("+LxV"),Mn=s("7d3m"),wn=s("Sb1T"),Un=s("jgc/"),Dn=s("+/WI"),Nn=s("PSU1"),Ln=s("PJYa"),Pn=s("fuks"),xn=s("Nd6c"),Fn=s("v1R/"),kn=s("jdue"),Wn=s("gHKk"),Bn=s("wSNj"),Vn=s("wyCi"),Gn=s("hFyr"),Kn=s("qXDh"),Hn=s("k0R1"),jn=s("dPj3");class zn extends F.a{constructor(t,e,s,n,i,r,a,o,c,l,h,u,_){super(t,e,s,n),this._wallLocation="",this._x=0,this._y=0,this._z=0,this._direction=0,this._placedInRoom=!1,this._placedOnFloor=!1,this._placedOnWall=!1,this._instanceData=null,this._wallLocation=i,this._x=r,this._y=a,this._z=o,this._direction=c,this._placedInRoom=l,this._placedOnFloor=h,this._placedOnWall=u,this._instanceData=_}get _Str_7031(){return this._wallLocation}get x(){return this._x}get y(){return this._y}get z(){return this._z}get direction(){return this._direction}get _Str_4057(){return this._placedInRoom}get _Str_23888(){return this._placedOnFloor}get _Str_23432(){return this._placedOnWall}get _Str_4766(){return this._instanceData}}class Yn extends F.a{constructor(t,e,s,n,i,r){super(t,e,s,n),this._droppedObjectId=i,this._droppedObjectCategory=r}get droppedObjectId(){return this._droppedObjectId}get droppedObjectCategory(){return this._droppedObjectCategory}}var qn=s("ScQb"),Xn=s("5r5K");let Zn=(()=>{class t extends a.a{constructor(t,e,s,n=!0){super(t,e),this._badgeId=s,this._groupBadge=n}get badgeId(){return this._badgeId}get groupBadge(){return this._groupBadge}}return t.LOAD_BADGE="ROBAE_LOAD_BADGE",t})(),Qn=(()=>{class t extends a.a{constructor(t,e){super(t,e)}}return t.RODRE_CURRENT_USER_ID="RODRE_CURRENT_USER_ID",t.RODRE_URL_PREFIX="RODRE_URL_PREFIX",t})(),Jn=(()=>{class t extends a.a{constructor(e,s,n,i,r,a){super(t.DIMMER_STATE,e),this._state=s,this._presetId=n,this._effectId=i,this._color=r,this._brightness=a}get state(){return this._state}get _Str_14686(){return this._presetId}get _Str_6815(){return this._effectId}get color(){return this._color}get _Str_5123(){return this._brightness}}return t.DIMMER_STATE="RODSUE_DIMMER_STATE",t})(),$n=(()=>{class t extends a.a{constructor(t,e){super(t,e)}}return t.ADD_HOLE="ROFHO_ADD_HOLE",t.REMOVE_HOLE="ROFHO_REMOVE_HOLE",t})();var ti=s("GfbW");let ei=(()=>{class t extends a.a{constructor(t,e,s,n,i,r){super(t,e),this._enable=s,this._hue=n,this._saturation=i,this._lightness=r}get enable(){return this._enable}get hue(){return this._hue}get saturation(){return this._saturation}get lightness(){return this._lightness}}return t.ROOM_BACKGROUND_COLOR="ROHSLCEE_ROOM_BACKGROUND_COLOR",t})(),si=(()=>{class t extends a.a{constructor(t,e){super(t,e)}}return t.POSITION_CHANGED="ROME_POSITION_CHANGED",t.OBJECT_REMOVED="ROME_OBJECT_REMOVED",t})(),ni=(()=>{class t extends a.a{constructor(t,e,s,n=1){super(t,e),this._sampleId=s,this._pitch=n}get sampleId(){return this._sampleId}get pitch(){return this._pitch}}return t.ROOM_OBJECT_INITIALIZED="ROPSPE_ROOM_OBJECT_INITIALIZED",t.ROOM_OBJECT_DISPOSED="ROPSPE_ROOM_OBJECT_DISPOSED",t.PLAY_SAMPLE="ROPSPE_PLAY_SAMPLE",t.CHANGE_PITCH="ROPSPE_CHANGE_PITCH",t})(),ii=(()=>{class t extends a.a{constructor(t,e,s=0){super(t,e),this._state=s}get state(){return this._state}}return t.STATE_CHANGE="ROSCE_STATE_CHANGE",t.STATE_RANDOM="ROSCE_STATE_RANDOM",t})();class ri extends o{constructor(t,e,s,n,i,r,a=!1,o=!1,c=!1,l=!1){super(t,e,s,a,o,c,l),this._tileX=n,this._tileY=i,this._tileZ=r}get tileX(){return this._tileX}get tileY(){return this._tileY}get tileZ(){return this._tileZ}get _Str_16836(){return Math.trunc(this._tileX+.499)}get _Str_17676(){return Math.trunc(this._tileY+.499)}get _Str_21459(){return Math.trunc(this._tileZ+.499)}}class ai extends o{constructor(t,e,s,n,i,r,a,o,c,l=!1,h=!1,u=!1,_=!1){super(t,e,s,l,h,u,_),this._wallLocation=new m.a,this._wallWd=new m.a,this._wallHt=new m.a,this._wallLocation.assign(n),this._wallWd.assign(i),this._wallHt.assign(r),this._x=a,this._y=o,this._direction=c}get wallLocation(){return this._wallLocation}get wallWidth(){return this._wallWd}get wallHeight(){return this._wallHt}get x(){return this._x}get y(){return this._y}get direction(){return this._direction}}var oi=s("6u0Z");class ci extends H{constructor(t){super(),this._selected=t}get selected(){return this._selected}}class li extends H{constructor(t){super(),this._selected=t}get selected(){return this._selected}}class hi extends c.a{constructor(t,e,s,n,i=!1){super(t,null),this._height=e,this._visible=s,this._sourceEventId=n,this._toggleVisibility=i}get height(){return this._height}get visible(){return this._visible}get _Str_20637(){return this._sourceEventId}get toggleVisibility(){return this._toggleVisibility}}let ui=(()=>{class t extends c.a{constructor(t){super(null,null),this._type=t}get type(){return this._type}}return t.ENABLED="ROVUM_ENABLED",t.DISABLED="ROVUM_DISABLED",t})();var _i=s("UTUL"),di=s("+kDp");class gi{constructor(t,e,s,n,i,r=0,a=null,o=null,c=-1,l=-1,h=null){this._id=0,this._category=0,this._operation="",this._loc=null,this._dir=null,this._typeId=0,this._instanceData=null,this._stuffData=null,this._state=-1,this._animFrame=-1,this._posture=null,this._id=t,this._category=e,this._operation=s,this._loc=new m.a,this._loc.assign(n),this._dir=new m.a,this._dir.assign(i),this._typeId=r,this._instanceData=a,this._stuffData=o,this._state=c,this._animFrame=l,this._posture=h}get id(){return this._id}get category(){return this._category}get operation(){return this._operation}get loc(){return this._loc}get dir(){return this._dir}get typeId(){return this._typeId}get _Str_4766(){return this._instanceData}get stuffData(){return this._stuffData}get state(){return this._state}get _Str_15896(){return this._animFrame}get posture(){return this._posture}dispose(){this._loc=null,this._dir=null}}class mi extends Kt.a{constructor(t){super(),this._roomEngine=t,this._eventIds=new Map,this._selectedAvatarId=-1,this._selectedObjectId=-1,this._selectedObjectCategory=-2,this._whereYouClickIsWhereYouGo=!1,this._objectPlacementSource=null,this.onRoomEngineObjectEvent=this.onRoomEngineObjectEvent.bind(this),this._roomEngine.events.addEventListener(F.a.ADDED,this.onRoomEngineObjectEvent)}dispose(){this._eventIds&&(this._eventIds=null),this._roomEngine.events.removeEventListener(F.a.ADDED,this.onRoomEngineObjectEvent),this._roomEngine=null}onRoomEngineObjectEvent(t){let e=this.getSelectedRoomObjectData(t.roomId);if(e&&e.operation===_i.a.OBJECT_PLACE&&e.id===t.objectId){const s=this._roomEngine.getRoomObject(t.roomId,e.id,e.category);if(s&&s.model&&e.category===Ot.a.FLOOR){const n=s.model.getValue(At.a.FURNITURE_ALLOWED_DIRECTIONS);if(n&&n.length){const i=new m.a(n[0]);if(s.setDirection(i),this._Str_16022(t.roomId,e.id,e.category,e.loc,i,e.operation,e.typeId,e._Str_4766,e.stuffData,e.state,e._Str_15896,e.posture),e=this.getSelectedRoomObjectData(t.roomId),!e)return}}this.setFurnitureAlphaMultiplier(s,.5)}}_Str_20330(t,e,s){if(!t||!e)return;if(d.a.isRunning())return;let n=this._roomEngine.getRoomObjectCategoryForType(e.type);if(n===Ot.a.ROOM||this._roomEngine.isPlayingGame()&&n===Ot.a.UNIT||(n=Ot.a.MINIMUM),this._Str_18648(n,t.type)===t._Str_3463){if(t.type===h.a.MOUSE_CLICK||t.type===h.a.DOUBLE_CLICK||t.type===h.a.MOUSE_DOWN||t.type===h.a.MOUSE_UP||t.type===h.a.MOUSE_MOVE)return}else t._Str_3463&&this._Str_11142(n,t.type,t._Str_3463);e.mouseHandler&&e.mouseHandler.mouseEvent(t,s)}processRoomObjectPlacement(t,e,s,n,i,r=null,a=null,o=-1,c=-1,l=null){this._objectPlacementSource=t;const h=new m.a(-100,-100),u=new m.a(0);return this.setSelectedRoomObjectData(e,s,n,h,u,_i.a.OBJECT_PLACE,i,r,a,o,c,l),this._roomEngine&&(this._roomEngine._Str_16645(i,n,!1,r,a,o,c,l),this._roomEngine._Str_7972(!1)),!0}_Str_8675(t){return this._Str_13199(t),!0}_Str_18648(t,e){const s=this._eventIds.get(t);return s&&s.get(e)||null}_Str_11142(t,e,s){let n=this._eventIds.get(t);n||(n=new Map,this._eventIds.set(t,n)),n.delete(e),n.set(e,s)}handleRoomObjectEvent(t,e){if(t)if(t instanceof o)this.handleRoomObjectMouseEvent(t,e);else switch(t.type){case ii.STATE_CHANGE:case ii.STATE_RANDOM:return void this.onRoomObjectStateChangedEvent(t,e);case Jn.DIMMER_STATE:return void this.onRoomObjectDimmerStateUpdateEvent(t,e);case si.POSITION_CHANGED:case si.OBJECT_REMOVED:return void this.onRoomObjectMoveEvent(t,e);case oi.a.OPEN_WIDGET:case oi.a.CLOSE_WIDGET:case oi.a.OPEN_FURNI_CONTEXT_MENU:case oi.a.CLOSE_FURNI_CONTEXT_MENU:case oi.a.PLACEHOLDER:case oi.a.CREDITFURNI:case oi.a.STICKIE:case oi.a.PRESENT:case oi.a.TROPHY:case oi.a.TEASER:case oi.a.ECOTRONBOX:case oi.a.DIMMER:case oi.a.WIDGET_REMOVE_DIMMER:case oi.a.CLOTHING_CHANGE:case oi.a.JUKEBOX_PLAYLIST_EDITOR:case oi.a.MANNEQUIN:case oi.a.PET_PRODUCT_MENU:case oi.a.GUILD_FURNI_CONTEXT_MENU:case oi.a.MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG:case oi.a.PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG:case oi.a.BACKGROUND_COLOR:case oi.a.MYSTERYBOX_OPEN_DIALOG:case oi.a.EFFECTBOX_OPEN_DIALOG:case oi.a.MYSTERYTROPHY_OPEN_DIALOG:case oi.a.ACHIEVEMENT_RESOLUTION_OPEN:case oi.a.ACHIEVEMENT_RESOLUTION_ENGRAVING:case oi.a.ACHIEVEMENT_RESOLUTION_FAILED:case oi.a.FRIEND_FURNITURE_CONFIRM:case oi.a.FRIEND_FURNITURE_ENGRAVING:case oi.a.BADGE_DISPLAY_ENGRAVING:case oi.a.HIGH_SCORE_DISPLAY:case oi.a.HIDE_HIGH_SCORE_DISPLAY:case oi.a.INERNAL_LINK:case oi.a.ROOM_LINK:return void this.onRoomObjectWidgetRequestEvent(t,e);case k.DICE_ACTIVATE:case k.DICE_OFF:case k.USE_HABBOWHEEL:case k.STICKIE:case k.ENTER_ONEWAYDOOR:return void this.onRoomObjectFurnitureActionEvent(t,e);case $n.ADD_HOLE:case $n.REMOVE_HOLE:return void this.onRoomObjectFloorHoleEvent(t,e);case Zn.LOAD_BADGE:return void this.onRoomObjectBadgeAssetEvent(t,e);case k.MOUSE_ARROW:case k.MOUSE_BUTTON:return void this.handleMousePointer(t,e);case ni.ROOM_OBJECT_INITIALIZED:case ni.ROOM_OBJECT_DISPOSED:case ni.PLAY_SAMPLE:case ni.CHANGE_PITCH:return void this.handleRoomObjectSamplePlaybackEvent(t,e);case ei.ROOM_BACKGROUND_COLOR:return void this.onHSLColorEnableEvent(t,e);case Qn.RODRE_CURRENT_USER_ID:case Qn.RODRE_URL_PREFIX:return void this.onRoomObjectDataRequestEvent(t,e);default:return void i.a.log("Unhandled Event: "+t.constructor.name,"Object ID: "+t.object.id)}}handleRoomObjectMouseEvent(t,e){if(t&&t.type)switch(t.type){case o.CLICK:return void this.handleRoomObjectMouseClickEvent(t,e);case o.MOUSE_MOVE:return void this.handleRoomObjectMouseMoveEvent(t,e);case o.MOUSE_DOWN:return void this.handleRoomObjectMouseDownEvent(t,e);case o.MOUSE_ENTER:return void this.handleRoomObjectMouseEnterEvent(t,e);case o.MOUSE_LEAVE:return void this.handleRoomObjectMouseLeaveEvent(t,e)}}handleRoomObjectMouseClickEvent(t,e){if(!t)return;let s=_i.a.OBJECT_UNDEFINED;const n=this.getSelectedRoomObjectData(e);n&&(s=n.operation);let i=!1,r=!1;this._whereYouClickIsWhereYouGo&&(s&&s!==_i.a.OBJECT_UNDEFINED||(i=this._Str_23423(e,t)));const a=this._roomEngine.getRoomObjectCategoryForType(t.objectType);switch(s){case _i.a.OBJECT_MOVE:a===Ot.a.ROOM?n&&this.processRoomObjectOperation(e,n.id,n.category,_i.a.OBJECT_MOVE_TO):a===Ot.a.UNIT&&(n&&t.objectType===Ct.a.MONSTER_PLANT&&this.processRoomObjectOperation(e,n.id,n.category,_i.a.OBJECT_MOVE_TO),t.eventId||this._Str_11142(Ot.a.ROOM,h.a.MOUSE_CLICK,t.eventId),this._Str_19253(e,t.objectId,a)),r=!0,-1!==t.objectId&&this._Str_17481(e,t.objectId,a);break;case _i.a.OBJECT_PLACE:if(a===Ot.a.ROOM)this._Str_19271(e,t instanceof ri,t instanceof ai);else if(a===Ot.a.UNIT)switch(t.objectType){case Ct.a.MONSTER_PLANT:case Ct.a.RENTABLE_BOT:this._Str_19271(e,t instanceof ri,t instanceof ai);break;default:t.eventId&&this._Str_11142(Ot.a.ROOM,h.a.MOUSE_CLICK,t.eventId),this._Str_19253(e,t.objectId,a)}break;case _i.a.OBJECT_UNDEFINED:a===Ot.a.ROOM?!i&&t instanceof ri&&this.onRoomObjectTileMouseEvent(e,t):(this._Str_17481(e,t.objectId,a),r=!1,a===Ot.a.UNIT?(!t.ctrlKey||t.altKey||t.shiftKey||t.objectType!==Ct.a.RENTABLE_BOT?!t.ctrlKey||t.altKey||t.shiftKey||t.objectType!==Ct.a.MONSTER_PLANT?t.ctrlKey||t.altKey||!t.shiftKey||t.objectType!==Ct.a.MONSTER_PLANT||this.processRoomObjectOperation(e,t.objectId,a,_i.a.OBJECT_ROTATE_POSITIVE):this.processRoomObjectOperation(e,t.objectId,a,_i.a.OBJECT_PICKUP_PET):this.processRoomObjectOperation(e,t.objectId,a,_i.a.OBJECT_PICKUP_BOT),this._roomEngine.isPlayingGame()?r=!0:i=!0):a!==Ot.a.FLOOR&&a!==Ot.a.WALL||(t.altKey||t.ctrlKey||t.shiftKey)&&(t.ctrlKey||t.altKey||!t.shiftKey?!t.ctrlKey||t.altKey||t.shiftKey||this.processRoomObjectOperation(e,t.objectId,a,_i.a.OBJECT_PICKUP):a===Ot.a.FLOOR&&this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new F.a(F.a.REQUEST_ROTATE,e,t.objectId,a)),this._roomEngine.isPlayingGame()?r=!0:i=!0),t.eventId&&(i&&this._Str_11142(Ot.a.ROOM,h.a.MOUSE_CLICK,t.eventId),r&&this._Str_11142(Ot.a.MINIMUM,h.a.MOUSE_CLICK,t.eventId)))}if(a===Ot.a.ROOM){const s=this._Str_18648(Ot.a.MINIMUM,h.a.MOUSE_CLICK),n=this._Str_18648(Ot.a.UNIT,h.a.MOUSE_CLICK);s===t.eventId||n===t.eventId||r||(this._Str_16209(e),this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new F.a(F.a.DESELECTED,e,-1,Ot.a.MINIMUM)),this._Str_12227(e,0,!1))}}handleRoomObjectMouseMoveEvent(t,e){if(!t)return;let s=_i.a.OBJECT_UNDEFINED;const n=this.getSelectedRoomObjectData(e);n&&(s=n.operation);const i=this._roomEngine.getRoomObjectCategoryForType(t.objectType);if(this._roomEngine){const s=this._roomEngine.getRoomObjectCursor(e);if(s&&s.logic){let n=null;t instanceof ri?n=this._Str_23824(t,e):t.object&&-1!==t.object.id?this._whereYouClickIsWhereYouGo&&(n=this._Str_25124(i,e,t)):n=new hi(null,0,!1,t.eventId),s.processUpdateMessage(n)}}switch(s){case _i.a.OBJECT_MOVE:return void(i===Ot.a.ROOM&&this._Str_24048(t,e));case _i.a.OBJECT_PLACE:return void(i===Ot.a.ROOM&&this._Str_22548(t,e))}}handleRoomObjectMouseDownEvent(t,e){if(!t)return;let s=_i.a.OBJECT_UNDEFINED;const n=this.getSelectedRoomObjectData(e);n&&(s=n.operation);const i=this._roomEngine.getRoomObjectCategoryForType(t.objectType);switch(s){case _i.a.OBJECT_UNDEFINED:return void(i!==Ot.a.FLOOR&&i!==Ot.a.WALL&&t.objectType!==Ct.a.MONSTER_PLANT||(t.altKey&&!t.ctrlKey&&!t.shiftKey||this._Str_25211(t))&&this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new F.a(F.a.REQUEST_MOVE,e,t.objectId,i)))}}handleRoomObjectMouseEnterEvent(t,e){const s=t.objectId,n=this._roomEngine.getRoomObjectCategoryForType(t.objectType);this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new F.a(F.a.MOUSE_ENTER,e,s,n))}handleRoomObjectMouseLeaveEvent(t,e){const s=t.objectId,n=this._roomEngine.getRoomObjectCategoryForType(t.objectType);if(n!==Ot.a.ROOM&&n===Ot.a.UNIT){const t=this._roomEngine.getRoomObjectCursor(e);t&&t.processUpdateMessage(new dt(0,null))}this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new F.a(F.a.MOUSE_LEAVE,e,s,n))}onRoomObjectStateChangedEvent(t,e){if(t)switch(t.type){case ii.STATE_CHANGE:return void this.updateRoomObjectState(e,t.object.id,t.object.type,t.state,!1);case ii.STATE_RANDOM:return void this.updateRoomObjectState(e,t.object.id,t.object.type,t.state,!0)}}onRoomObjectDimmerStateUpdateEvent(t,e){if(t)switch(t.type){case Jn.DIMMER_STATE:return void this._roomEngine.events.dispatchEvent(new jn.a(e,t.state,t._Str_14686,t._Str_6815,t.color,t._Str_5123))}}onRoomObjectMoveEvent(t,e){if(t&&this._roomEngine)switch(t.type){case si.POSITION_CHANGED:{const s=t.objectId,n=this._roomEngine.getRoomObjectCategoryForType(t.objectType),i=this._roomEngine.getRoomObject(e,s,n),r=this._roomEngine.getRoomObjectSelectionArrow(e);if(i&&r&&r.logic){const t=i.getLocation();r.logic.processUpdateMessage(new c.a(t,null))}return}case si.OBJECT_REMOVED:return void this._Str_12227(e,0,!1)}}onRoomObjectWidgetRequestEvent(t,e){if(!t||!this._roomEngine)return;const s=t.objectId,n=this._roomEngine.getRoomObjectCategoryForType(t.objectType),i=this._roomEngine.events;if(i)switch(t.type){case oi.a.OPEN_WIDGET:return void i.dispatchEvent(new Xn.a(Xn.a.OPEN_WIDGET,e,s,n,t.object.logic.widget));case oi.a.CLOSE_WIDGET:return void i.dispatchEvent(new Xn.a(Xn.a.CLOSE_WIDGET,e,s,n,t.object.logic.widget));case oi.a.TROPHY:return void i.dispatchEvent(new Xn.a(Xn.a.REQUEST_TROPHY,e,s,n));case oi.a.CREDITFURNI:return void i.dispatchEvent(new Xn.a(Xn.a.REQUEST_CREDITFURNI,e,s,n));case oi.a.INERNAL_LINK:return void i.dispatchEvent(new Xn.a(Xn.a.REQUEST_INTERNAL_LINK,e,s,n));case oi.a.ROOM_LINK:return void i.dispatchEvent(new Xn.a(Xn.a.REQUEST_ROOM_LINK,e,s,n));case oi.a.HIGH_SCORE_DISPLAY:return void i.dispatchEvent(new Xn.a(Xn.a.REQUEST_HIGH_SCORE_DISPLAY,e,s,n));case oi.a.HIDE_HIGH_SCORE_DISPLAY:return void i.dispatchEvent(new Xn.a(Xn.a.REQUEST_HIDE_HIGH_SCORE_DISPLAY,e,s,n));case oi.a.STICKIE:return void i.dispatchEvent(new Xn.a(Xn.a.REQUEST_STICKIE,e,s,n));case oi.a.DIMMER:return void i.dispatchEvent(new Xn.a(Xn.a.REQUEST_DIMMER,e,s,n));case oi.a.PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG:i.dispatchEvent(new Xn.a(Xn.a.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,e,s,n));break;case oi.a.MYSTERYBOX_OPEN_DIALOG:i.dispatchEvent(new Xn.a(Xn.a.REQUEST_MYSTERYBOX_OPEN_DIALOG,e,s,n));break;case oi.a.MYSTERYTROPHY_OPEN_DIALOG:i.dispatchEvent(new Xn.a(Xn.a.REQUEST_MYSTERYTROPHY_OPEN_DIALOG,e,s,n));break;case oi.a.EFFECTBOX_OPEN_DIALOG:i.dispatchEvent(new Xn.a(Xn.a.REQUEST_EFFECTBOX_OPEN_DIALOG,e,s,n));break;case oi.a.MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG:i.dispatchEvent(new Xn.a(Xn.a.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,e,s,n));break;case oi.a.MANNEQUIN:i.dispatchEvent(new Xn.a(Xn.a.REQUEST_MANNEQUIN,e,s,n));break;case oi.a.BACKGROUND_COLOR:i.dispatchEvent(new Xn.a(Xn.a.REQUEST_BACKGROUND_COLOR,e,s,n));break;case oi.a.FRIEND_FURNITURE_ENGRAVING:i.dispatchEvent(new Xn.a(Xn.a.REQUEST_FRIEND_FURNITURE_ENGRAVING,e,s,n));break;case oi.a.PRESENT:i.dispatchEvent(new Xn.a(Xn.a.REQUEST_PRESENT,e,s,n))}}onRoomObjectFurnitureActionEvent(t,e){t&&this.useObject(e,t.object.id,t.object.type,t.type)}onRoomObjectFloorHoleEvent(t,e){if(t)switch(t.type){case $n.ADD_HOLE:return void this._roomEngine.addRoomInstanceFloorHole(e,t.objectId);case $n.REMOVE_HOLE:return void this._roomEngine.removeRoomInstanceFloorHole(e,t.objectId)}}onRoomObjectBadgeAssetEvent(t,e){if(t&&this._roomEngine)switch(t.type){case Zn.LOAD_BADGE:{const s=t.objectId,n=this._roomEngine.getRoomObjectCategoryForType(t.objectType);return void this._roomEngine.loadRoomObjectBadgeImage(e,s,n,t.badgeId,t.groupBadge)}}}handleMousePointer(t,e){t&&this._roomEngine.updateMousePointer(t.type,t.objectId,t.objectType)}handleRoomObjectSamplePlaybackEvent(t,e){if(!t)return;const s=this._roomEngine.getRoomObjectCategoryForType(t.objectType);switch(t.type){case ni.ROOM_OBJECT_INITIALIZED:this._roomEngine.events.dispatchEvent(new qn.a(qn.a.ROOM_OBJECT_INITIALIZED,e,t.objectId,s,t.sampleId,t.pitch));break;case ni.ROOM_OBJECT_DISPOSED:this._roomEngine.events.dispatchEvent(new qn.a(qn.a.ROOM_OBJECT_DISPOSED,e,t.objectId,s,t.sampleId,t.pitch));break;case ni.PLAY_SAMPLE:this._roomEngine.events.dispatchEvent(new qn.a(qn.a.PLAY_SAMPLE,e,t.objectId,s,t.sampleId,t.pitch));break;case ni.CHANGE_PITCH:this._roomEngine.events.dispatchEvent(new qn.a(qn.a.CHANGE_PITCH,e,t.objectId,s,t.sampleId,t.pitch))}}onHSLColorEnableEvent(t,e){if(t&&this._roomEngine)switch(t.type){case ei.ROOM_BACKGROUND_COLOR:return void this._roomEngine.events.dispatchEvent(new ti.a(ti.a.ROOM_BACKGROUND_COLOR,e,t.enable,t.hue,t.saturation,t.lightness))}}onRoomObjectDataRequestEvent(t,e){if(t&&this._roomEngine&&t.object)switch(t.type){case Qn.RODRE_CURRENT_USER_ID:return void t.object.model.setValue(At.a.SESSION_CURRENT_USER_ID,this._roomEngine.sessionDataManager.userId);case Qn.RODRE_URL_PREFIX:return void t.object.model.setValue(At.a.SESSION_CURRENT_USER_ID,l.a.instance.getConfiguration("url.prefix"))}}onRoomObjectTileMouseEvent(t,e){if(!this._roomEngine||this._roomEngine.isDecorating||!this._roomEngine.roomSessionManager)return;const s=this._roomEngine.roomSessionManager.getSession(t);s&&!s.isSpectator&&this.sendWalkUpdate(e._Str_16836,e._Str_17676)}_Str_24048(t,e){if(!t||!this._roomEngine)return;if(!this._roomEngine.events)return;const s=this.getSelectedRoomObjectData(e);if(!s)return;const n=this._roomEngine.getRoomObject(e,s.id,s.category);if(!n)return;let i=!0;if(s.category===Ot.a.FLOOR||s.category===Ot.a.UNIT){const r=this._roomEngine.getFurnitureStackingHeightMap(e);t instanceof ri&&this._Str_18155(n,s,Math.trunc(t.tileX+.5),Math.trunc(t.tileY+.5),r)||(this._Str_18155(n,s,s.loc.x,s.loc.y,r),i=!1)}else s.category===Ot.a.WALL&&(i=!1,t instanceof ai&&this._Str_22090(n,s,t.wallLocation,t.wallWidth,t.wallHeight,t.x,t.y,t.direction)&&(i=!0),i||(n.setLocation(s.loc),n.setDirection(s.dir)),this._roomEngine.updateRoomObjectMask(e,s.id,i));i?(this.setFurnitureAlphaMultiplier(n,.5),this._roomEngine._Str_7972(!1)):(this.setFurnitureAlphaMultiplier(n,0),this._roomEngine._Str_7972(!0))}_Str_22548(t,e){if(!t||!this._roomEngine)return;if(!this._roomEngine.events)return;let s=this.getSelectedRoomObjectData(e);if(!s)return;let n=this._roomEngine.getRoomObject(e,s.id,s.category);if(!n){if(t instanceof ri){if(s.category===Ot.a.FLOOR)this._roomEngine.addFurnitureFloor(e,s.id,s.typeId,s.loc,s.dir,0,s.stuffData,parseFloat(s._Str_4766),-1,0,0,"",!1);else if(s.category===Ot.a.UNIT){this._roomEngine.addRoomObjectUser(e,s.id,new m.a,new m.a(180),180,s.typeId,s._Str_4766);const t=this._roomEngine.getRoomObject(e,s.id,s.category);t&&s.posture&&t.model.setValue(At.a.FIGURE_POSTURE,s.posture)}}else t instanceof ai&&s.category===Ot.a.WALL&&this._roomEngine.addFurnitureWall(e,s.id,s.typeId,s.loc,s.dir,0,s._Str_4766,0);if(n=this._roomEngine.getRoomObject(e,s.id,s.category),n&&s.category===Ot.a.FLOOR){const t=n.model.getValue(At.a.FURNITURE_ALLOWED_DIRECTIONS);if(t&&t.length){const i=new m.a(t[0]);if(n.setDirection(i),this._Str_16022(e,s.id,s.category,s.loc,i,s.operation,s.typeId,s._Str_4766,s.stuffData,s.state,s._Str_15896,s.posture),s=this.getSelectedRoomObjectData(e),!s)return}}this.setFurnitureAlphaMultiplier(n,.5),this._roomEngine._Str_7972(!0)}if(n){let i=!0;const r=this._roomEngine.getFurnitureStackingHeightMap(e);s.category===Ot.a.FLOOR?t instanceof ri&&this._Str_18155(n,s,Math.trunc(t.tileX+.5),Math.trunc(t.tileY+.5),r)||(this._roomEngine.removeRoomObjectFloor(e,s.id),i=!1):s.category===Ot.a.WALL?(i=!1,t instanceof ai&&this._Str_22090(n,s,t.wallLocation,t.wallWidth,t.wallHeight,t.x,t.y,t.direction)&&(i=!0),i||this._roomEngine.removeRoomObjectWall(e,s.id),this._roomEngine.updateRoomObjectMask(e,s.id,i)):s.category===Ot.a.UNIT&&(t instanceof ri&&this._Str_25586(n,Math.trunc(t.tileX+.5),Math.trunc(t.tileY+.5),this._roomEngine.getLegacyWallGeometry(e))||(this._roomEngine.removeRoomObjectUser(e,s.id),i=!1)),this._roomEngine._Str_7972(!i)}}_Str_18155(t,e,s,n,i){if(!t||!e)return!1;const r=new m.a;r.assign(t.getDirection()),t.setDirection(e.dir);const a=new m.a(s,n,0),o=new m.a;o.assign(t.getDirection());let c=this._Str_21004(t,a,e.loc,e.dir,i);return c||(o.x=this._Str_17555(t,!0),t.setDirection(o),c=this._Str_21004(t,a,e.loc,e.dir,i)),c?(t.setLocation(c),o&&t.setDirection(o),!0):(t.setDirection(r),!1)}_Str_22090(t,e,s,n,i,r,a,o){if(!t||!e)return!1;const c=new m.a(o),l=this._Str_25568(t,s,n,i,r,a,e);return!!l&&(t.setLocation(l),t.setDirection(c),!0)}_Str_21004(t,e,s,n,i){if(!t||!t.model||!e)return null;let r=null;const a=t.getDirection();if(!a)return null;if(!s||!n)return null;if(e.x===s.x&&e.y===s.y&&a.x===n.x)return r=new m.a,r.assign(s),r;let o=t.model.getValue(At.a.FURNITURE_SIZE_X),c=t.model.getValue(At.a.FURNITURE_SIZE_Y);o<1&&(o=1),c<1&&(c=1);const l=s.x,h=s.y;let u=o,_=c,d=0,g=Math.trunc(Math.trunc(a.x+45)%360/90);if(1!==g&&3!==g||(d=o,o=c,c=d),g=Math.trunc(Math.trunc(n.x+45)%360/90),1!==g&&3!==g||(d=u,u=_,_=d),i&&e){const s=1===t.model.getValue(At.a.FURNITURE_ALWAYS_STACKABLE);return i.validateLocation(e.x,e.y,o,c,l,h,u,_,s)?new m.a(e.x,e.y,i.getTileHeight(e.x,e.y)):null}return null}_Str_25568(t,e,s,n,i,r,a){if(null==t||null==t.model||null==e||null==s||null==n||null==a)return null;const o=t.model.getValue(At.a.FURNITURE_SIZE_X),c=t.model.getValue(At.a.FURNITURE_SIZE_Z),l=t.model.getValue(At.a.FURNITURE_CENTER_Z);if((i<o/2||i>s.length-o/2||r<l||r>n.length-(c-l))&&(i<o/2&&i<=s.length-o/2?i=o/2:i>=o/2&&i>s.length-o/2&&(i=s.length-o/2),r<l&&r<=n.length-(c-l)?r=l:r>=l&&r>n.length-(c-l)&&(r=n.length-(c-l))),i<o/2||i>s.length-o/2||r<l||r>n.length-(c-l))return null;let h=m.a.sum(m.a.product(s,i/s.length),m.a.product(n,r/n.length));return h=m.a.sum(e,h),h}updateRoomObjectState(t,e,s,n,i){const r=this._roomEngine.getRoomObjectCategoryForType(s);this.sendStateUpdate(t,e,r,n,i)}useObject(t,e,s,n){if(this._roomEngine&&this._roomEngine.connection)switch(n){case k.DICE_ACTIVATE:return void this._roomEngine.connection.send(new Pn.a(e));case k.DICE_OFF:return void this._roomEngine.connection.send(new xn.a(e));case k.USE_HABBOWHEEL:return void this._roomEngine.connection.send(new Ln.a(e));case k.STICKIE:return void this._roomEngine.connection.send(new yn.a(e));case k.ENTER_ONEWAYDOOR:return void this._roomEngine.connection.send(new kn.a(e))}}sendStateUpdate(t,e,s,n,i){return!this._roomEngine||!this._roomEngine.connection||(s===Ot.a.FLOOR?this._roomEngine.connection.send(i?new Wn.a(e,n):new Fn.a(e,n)):s===Ot.a.WALL&&this._roomEngine.connection.send(new Bn.a(e,n)),!0)}sendWalkUpdate(t,e){this._roomEngine&&this._roomEngine.connection&&this._roomEngine.connection.send(new Kn.a(t,e))}_Str_25124(t,e,s){if(t!==Ot.a.FLOOR)return null;const n=this._roomEngine.getRoomObject(e,s.objectId,Ot.a.FLOOR);if(!n)return null;const i=this._Str_21925(n,s);if(!i)return null;if(!this._roomEngine.getFurnitureStackingHeightMap(e))return null;const r=i.z;return new hi(new m.a(i.x,i.y,n.getLocation().z),r,!0,s.eventId)}_Str_23423(t,e){const s=this._roomEngine.getRoomObject(t,e.objectId,Ot.a.FLOOR),n=this._Str_21925(s,e);return!!n&&(this.sendWalkUpdate(n.x,n.y),!0)}_Str_21925(t,e){if(!t||!e)return null;const s=this._roomEngine.sessionDataManager.getFloorItemDataByName(t.type);if(!s)return null;if(!s.canStandOn&&!s.canSitOn&&!s.canLayOn)return null;const n=t.model;if(!n)return null;const i=t.getLocation(),r=t.getDirection();let a=n.getValue(At.a.FURNITURE_SIZE_X),o=n.getValue(At.a.FURNITURE_SIZE_Y);const c=n.getValue(At.a.FURNITURE_SIZE_Z);90!==r.x&&270!==r.x||([a,o]=[o,a]),a<1&&(a=1),o<1&&(o=1);const l=this._roomEngine.getActiveRoomInstanceRenderingCanvas();if(!l)return null;const h=l.geometry.scale,u=(h/2+e.spriteOffsetX+e.localX)/(h/4),_=(e.spriteOffsetY+e.localY+(c-(s.canSitOn?.5:0))*h/2)/(h/4),d=(u-2*_)/4,g=Math.floor(i.x+(u+2*_)/4),p=Math.floor(i.y-d+1);let f=!1;return(g<i.x||g>=i.x+a||p<i.y||p>=i.y+o)&&(f=!0),f?null:new m.a(g,p,s.canSitOn?c-.5:c)}_Str_23824(t,e){if(this._whereYouClickIsWhereYouGo)return new hi(new m.a(t._Str_16836,t._Str_17676,t._Str_21459),0,!0,t.eventId);const s=this._roomEngine.getRoomObjectCursor(e);if(s&&s.visualization){const s=t._Str_16836,n=t._Str_17676,i=t._Str_21459;if(this._roomEngine.getRoomInstance(e)){const r=this._roomEngine.getRoomTileObjectMap(e);if(r){const a=r._Str_19056(s,n),o=this._roomEngine.getFurnitureStackingHeightMap(e);if(o){if(a&&a.model&&a.model.getValue(At.a.FURNITURE_IS_VARIABLE_HEIGHT)>0){const r=o.getTileHeight(s,n),a=this._roomEngine.getLegacyWallGeometry(e).getHeight(s,n);return new hi(new m.a(s,n,i),r-a,!0,t.eventId)}return new hi(new m.a(s,n,i),0,!0,t.eventId)}}}}return null}_Str_19271(t,e,s){const n=this.getSelectedRoomObjectData(t);if(!n)return;let i=null,r=n.id;const a=n.category;let o=0,c=0,l=0,h=0,u="";if(this._roomEngine&&this._roomEngine.connection&&(i=this._roomEngine.getRoomObject(t,r,a),i)){const e=i.getLocation();if(h=i.getDirection().x,a===Ot.a.FLOOR||a===Ot.a.UNIT)o=e.x,c=e.y,l=e.z;else if(a===Ot.a.WALL){o=e.x,c=e.y,l=e.z;const s=this._roomEngine.getLegacyWallGeometry(t);s&&(u=s._Str_21860(e,h))}h=(h/45%8+8)%8,r<0&&a===Ot.a.UNIT&&(r*=-1),this._objectPlacementSource!==Hn.a.CATALOG&&(a===Ot.a.UNIT?n.typeId===di.a.PET?this._roomEngine.connection.send(new An.a(r,Math.trunc(o),Math.trunc(c))):n.typeId===di.a.RENTABLE_BOT&&this._roomEngine.connection.send(new Tn.a(r,Math.trunc(o),Math.trunc(c))):void 0!==i.model.getValue(At.a.FURNITURE_IS_STICKIE)?this._roomEngine.connection.send(new Nn.a(r,u)):this._roomEngine.connection.send(new Dn.a(r,a,u,Math.trunc(o),Math.trunc(c),h)))}this._roomEngine.setPlacedRoomObjectData(t,new gi(n.id,n.category,null,n.dir,null)),this._Str_13199(t),this._roomEngine&&this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new zn(F.a.PLACED,t,r,a,u,o,c,l,h,i&&i.id===n.id,e,s,n._Str_4766))}processRoomObjectWallOperation(t,e,s,n,i){return!!this._roomEngine&&!!this._roomEngine.getRoomObject(t,e,s)}processRoomObjectFloorOperation(t,e,s,n){return!!this._roomEngine}processRoomObjectOperation(t,e,s,n){if(!this._roomEngine)return!1;const i=this._roomEngine.getRoomObject(t,e,s);if(!i)return!1;let r=!0;switch(n){case _i.a.OBJECT_ROTATE_POSITIVE:case _i.a.OBJECT_ROTATE_NEGATIVE:if(this._roomEngine.connection){let s=0;s=this._Str_17555(i,n!=_i.a.OBJECT_ROTATE_NEGATIVE);const r=i.getLocation().x,a=i.getLocation().y;if(this.isValidLocation(i,new m.a(s),this._roomEngine.getFurnitureStackingHeightMap(t)))if(s=Math.trunc(s/45),i.type===Ct.a.MONSTER_PLANT){const n=this._roomEngine.roomSessionManager.getSession(t);if(n){const t=n.userDataManager.getUserDataByIndex(e);t&&this._roomEngine.connection.send(new Cn.a(t.webID,Math.trunc(r),Math.trunc(a),s))}}else this._roomEngine.connection.send(new wn.a(e,r,a,s))}break;case _i.a.OBJECT_EJECT:case _i.a.OBJECT_PICKUP:this._roomEngine.connection&&this._roomEngine.connection.send(new Un.a(s,e));break;case _i.a.OBJECT_PICKUP_PET:if(this._roomEngine.connection){const s=this._roomEngine.roomSessionManager.getSession(t);if(s){const t=s.userDataManager.getUserDataByIndex(e);s.pickupPet(t.webID)}}break;case _i.a.OBJECT_PICKUP_BOT:if(this._roomEngine.connection){const s=this._roomEngine.roomSessionManager.getSession(t);if(s){const t=s.userDataManager.getUserDataByIndex(e);s.pickupBot(t.webID)}}break;case _i.a.OBJECT_MOVE:r=!1,this.setFurnitureAlphaMultiplier(i,.5),this.setSelectedRoomObjectData(t,i.id,s,i.getLocation(),i.getDirection(),n),this._roomEngine._Str_16645(i.id,s,!0),this._roomEngine._Str_7972(!1);break;case _i.a.OBJECT_MOVE_TO:{const n=this.getSelectedRoomObjectData(t);if(this._Str_16022(t,n.id,n.category,n.loc,n.dir,_i.a.OBJECT_MOVE_TO,n.typeId,n._Str_4766,n.stuffData,n.state,n._Str_15896,n.posture),this.setFurnitureAlphaMultiplier(i,1),this._roomEngine._Str_17948(),this._roomEngine.connection)if(s===Ot.a.FLOOR){const t=i.getDirection().x%360,s=i.getLocation();this._roomEngine.connection.send(new wn.a(e,s.x,s.y,t/45))}else if(s===Ot.a.WALL){const s=i.getDirection().x%360,n=this._roomEngine.getLegacyWallGeometry(t);if(n){const t=n._Str_21860(i.getLocation(),s);t&&this._roomEngine.connection.send(new Vn.a(e,t))}}else if(s===Ot.a.UNIT){const s=i.getDirection().x%360,n=i.getLocation(),r=s/45,a=(parseInt(i.model.getValue(At.a.RACE)),this._roomEngine.roomSessionManager.getSession(t));if(a){const t=a.userDataManager.getUserDataByIndex(e);t&&this._roomEngine.connection.send(new Cn.a(t.webID,n.x,n.y,r))}}break}}return r&&this._Str_13199(t),!0}_Str_17555(t,e){if(!t||!t.model)return 0;let s=0,n=0,i=[];i=t.model.getValue(t.type===Ct.a.MONSTER_PLANT?At.a.PET_ALLOWED_DIRECTIONS:At.a.FURNITURE_ALLOWED_DIRECTIONS);let r=t.getDirection().x;if(i&&i.length){if(s=i.indexOf(r),s<0){for(s=0,n=0;n<i.length&&!(r<=i[n]);)s++,n++;s%=i.length}s=e?(s+1)%i.length:(s-1+i.length)%i.length,r=i[s]}return r}isValidLocation(t,e,s){if(!t||!t.model||!e)return!1;const n=t.getDirection(),i=t.getLocation();if(!n||!i)return!1;if(n.x%180==e.x%180)return!0;let r=t.model.getValue(At.a.FURNITURE_SIZE_X),a=t.model.getValue(At.a.FURNITURE_SIZE_Y);r<1&&(r=1),a<1&&(a=1);let o=r,c=a,l=Math.trunc(Math.trunc(e.x+45)%360/90);if(1!==l&&3!==l||([r,a]=[a,r]),l=Math.trunc(Math.trunc(n.x+45)%360/90),1!==l&&3!==l||([o,c]=[c,o]),s&&i){const e=1===t.model.getValue(At.a.FURNITURE_ALWAYS_STACKABLE);if(s.validateLocation(i.x,i.y,r,a,i.x,i.y,o,c,e,i.z))return!0}return!1}_Str_19253(t,e,s){const n=this.getSelectedRoomObjectData(t);n&&this._roomEngine.getRoomObject(t,e,s)&&this._roomEngine&&this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new Yn(F.a.PLACED_ON_USER,t,e,s,n.id,n.category))}_Str_17481(t,e,s){if(!this._roomEngine)return;const n=this._roomEngine.events;if(n)switch(s){case Ot.a.UNIT:case Ot.a.FLOOR:case Ot.a.WALL:if(s===Ot.a.UNIT)this._Str_16209(t),this._Str_12227(t,e,!0);else if(this._Str_12227(t,0,!1),e!==this._selectedObjectId){this._Str_16209(t);const n=this._roomEngine.getRoomObject(t,e,s);n&&n.logic&&(n.logic.processUpdateMessage(new li(!0)),this._selectedObjectId=e,this._selectedObjectCategory=s)}return void n.dispatchEvent(new F.a(F.a.SELECTED,t,e,s))}}_Str_16209(t){if(-1===this._selectedObjectId)return;const e=this._roomEngine.getRoomObject(t,this._selectedObjectId,this._selectedObjectCategory);e&&e.logic&&(e.logic.processUpdateMessage(new li(!1)),this._selectedObjectId=-1,this._selectedObjectCategory=Ot.a.MINIMUM)}_Str_12227(t,e,s){if(!this._roomEngine)return;const n=Ot.a.UNIT,i=this._roomEngine.getRoomObject(t,this._selectedAvatarId,n);i&&i.logic&&(i.logic.processUpdateMessage(new ci(!1)),this._selectedAvatarId=-1);let r=!1;if(s){const s=this._roomEngine.getRoomObject(t,e,n);if(s&&s.logic){s.logic.processUpdateMessage(new ci(!0)),r=!0,this._selectedAvatarId=e;const t=s.getLocation();t&&this._roomEngine.connection.send(new Gn.a(~~t.x,~~t.y))}}const a=this._roomEngine.getRoomObjectSelectionArrow(t);a&&a.logic&&(r&&!this._roomEngine.isPlayingGame()?a.logic.processUpdateMessage(new ui(ui.ENABLED)):a.logic.processUpdateMessage(new ui(ui.DISABLED)))}_Str_13199(t){if(!this._roomEngine)return;this._roomEngine._Str_17948();const e=this.getSelectedRoomObjectData(t);if(e){if(e.operation===_i.a.OBJECT_MOVE||e.operation===_i.a.OBJECT_MOVE_TO){const s=this._roomEngine.getRoomObject(t,e.id,e.category);s&&e.operation!==_i.a.OBJECT_MOVE_TO&&(s.setLocation(e.loc),s.setDirection(e.dir)),this.setFurnitureAlphaMultiplier(s,1),e.category===Ot.a.WALL&&this._roomEngine.updateRoomObjectMask(t,e.id,!0),this._Str_16022(t,e.id,e.category,e.loc,e.dir,_i.a.OBJECT_MOVE,e.typeId,e._Str_4766,e.stuffData,e.state,e._Str_15896,e.posture)}else if(e.operation===_i.a.OBJECT_PLACE){const s=e.id;switch(e.category){case Ot.a.FLOOR:this._roomEngine.removeRoomObjectFloor(t,s);break;case Ot.a.WALL:this._roomEngine.removeRoomObjectWall(t,s);break;case Ot.a.UNIT:this._roomEngine.removeRoomObjectUser(t,s)}}this._roomEngine.setSelectedRoomObjectData(t,null)}}getSelectedRoomObjectData(t){return this._roomEngine?this._roomEngine.getSelectedRoomObjectData(t):null}setFurnitureAlphaMultiplier(t,e){t&&t.model&&t.model.setValue(At.a.FURNITURE_ALPHA_MULTIPLIER,e)}_Str_25211(t){return this._roomEngine.isDecorating&&!(t.ctrlKey||t.shiftKey)}cancelRoomObjectPlacement(t){return this._Str_13199(t),!0}setSelectedRoomObjectData(t,e,s,n,i,r,a=0,o=null,c=null,l=-1,h=-1,u=null){if(this._Str_13199(t),!this._roomEngine)return;const _=new gi(e,s,r,n,i,a,o,c,l,h,u);this._roomEngine.setSelectedRoomObjectData(t,_)}_Str_16022(t,e,s,n,i,r,a=0,o=null,c=null,l=-1,h=-1,u=null){if(!this._roomEngine)return null;const _=new gi(e,s,r,n,i,a,o,c,l,h,u);this._roomEngine.setSelectedRoomObjectData(t,_)}_Str_25586(t,e,s,n){return!!n._Str_10375(e,s)&&(t.setLocation(new m.a(e,s,n.getHeight(e,s))),!0)}modifyWallItemData(t,e,s,n){return!(!this._roomEngine||!this._roomEngine.connection||(this._roomEngine.connection.send(new On.a(e,s,n)),0))}deleteWallItem(t,e){return!(!this._roomEngine||!this._roomEngine.connection||(this._roomEngine.connection.send(new Mn.a(e)),0))}get engine(){return this._roomEngine}get selectedAvatarId(){return this._selectedAvatarId}}var pi=s("vuPI");class fi extends Kt.a{constructor(){super(),this._object=null,this._events=null,this._time=0}initialize(t){}onDispose(){this._object=null}update(t){this._time=t}processUpdateMessage(t){t&&this._object&&(this._object.setLocation(t.location),this._object.setDirection(t.direction))}getEventTypes(){return[]}mergeTypes(t,e){const s=t.concat();for(const n of e)!n||s.indexOf(n)>=0||s.push(n);return s}mouseEvent(t,e){}useObject(){}setObject(t){if(this._object!==t){if(this._object&&this._object.setLogic(null),!t)return this.dispose(),void(this._object=null);this._object=t,this._object.setLogic(this)}}tearDown(){}get object(){return this._object}get eventDispatcher(){return this._events}set eventDispatcher(t){this._events=t}get widget(){return null}get contextMenu(){return null}get time(){return this._time}}let Ei=(()=>{class t extends fi{constructor(){super(),this._liftAmount=0,this._location=new m.a,this._locationDelta=new m.a,this._lastUpdateTime=0,this._changeTime=0,this._updateInterval=500}dispose(){this._liftAmount=0,super.dispose()}update(e){super.update(e);const s=this.getLocationOffset(),n=this.object&&this.object.model;if(n&&(s?this._liftAmount!==s.z&&(this._liftAmount=s.z,n.setValue(At.a.FURNITURE_LIFT_AMOUNT,this._liftAmount)):0!==this._liftAmount&&(this._liftAmount=0,n.setValue(At.a.FURNITURE_LIFT_AMOUNT,this._liftAmount))),this._locationDelta.length>0||s){const e=t.TEMP_VECTOR;let n=this.time-this._changeTime;n===this._updateInterval>>1&&n++,n>this._updateInterval&&(n=this._updateInterval),this._locationDelta.length>0?(e.assign(this._locationDelta),e.multiply(n/this._updateInterval),e.add(this._location)):e.assign(this._location),s&&e.add(s),this.object.setLocation(e),n===this._updateInterval&&(this._locationDelta.x=0,this._locationDelta.y=0,this._locationDelta.z=0)}this._lastUpdateTime=this.time}setObject(t){super.setObject(t),t&&this._location.assign(t.getLocation())}processUpdateMessage(t){if(t)return super.processUpdateMessage(t),t.location&&this._location.assign(t.location),t instanceof ht?this.processMoveMessage(t):void 0}processMoveMessage(t){t&&this.object&&t.location&&(this._changeTime=this._lastUpdateTime,this._locationDelta.assign(t.targetLocation),this._locationDelta.subtract(this._location))}getLocationOffset(){return null}get lastUpdateTime(){return this._lastUpdateTime}}return t.TEMP_VECTOR=new m.a,t})(),Si=(()=>{class t extends Ei{constructor(){super(),this._selected=!1,this._reportedLocation=null,this._effectChangeTimeStamp=0,this._newEffect=0,this._blinkingStartTimestamp=l.a.instance.time+this.randomBlinkStartTimestamp(),this._blinkingEndTimestamp=0,this._talkingEndTimestamp=0,this._talkingPauseStartTimestamp=0,this._talkingPauseEndTimestamp=0,this._carryObjectStartTimestamp=0,this._carryObjectEndTimestamp=0,this._allowUseCarryObject=!1,this._animationEndTimestamp=0,this._signEndTimestamp=0,this._gestureEndTimestamp=0,this._numberValueEndTimestamp=0}getEventTypes(){const t=[o.CLICK,si.POSITION_CHANGED,o.MOUSE_ENTER,o.MOUSE_LEAVE,k.MOUSE_BUTTON,k.MOUSE_ARROW];return this.mergeTypes(super.getEventTypes(),t)}dispose(){this._selected&&this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new si(si.OBJECT_REMOVED,this.object)),super.dispose(),this._reportedLocation=null}update(t){if(super.update(t),this._selected&&this.object&&this.eventDispatcher){const t=this.object.getLocation();this._reportedLocation&&this._reportedLocation.x===t.x&&this._reportedLocation.y===t.y&&this._reportedLocation.z===t.z||(this._reportedLocation||(this._reportedLocation=new m.a),this._reportedLocation.assign(t),this.eventDispatcher.dispatchEvent(new si(si.POSITION_CHANGED,this.object)))}const e=this.object&&this.object.model;e&&this.updateModel(this.time,e)}updateModel(t,e){this._talkingEndTimestamp>0&&(t>this._talkingEndTimestamp?(e.setValue(At.a.FIGURE_TALK,0),this._talkingEndTimestamp=0,this._talkingPauseStartTimestamp=0,this._talkingPauseEndTimestamp=0):this._talkingPauseEndTimestamp||this._talkingPauseStartTimestamp?this._talkingPauseStartTimestamp>0&&t>this._talkingPauseStartTimestamp?(e.setValue(At.a.FIGURE_TALK,0),this._talkingPauseStartTimestamp=0):this._talkingPauseEndTimestamp>0&&t>this._talkingPauseEndTimestamp&&(e.setValue(At.a.FIGURE_TALK,1),this._talkingPauseEndTimestamp=0):(this._talkingPauseStartTimestamp=t+this.randomTalkingPauseStartTimestamp(),this._talkingPauseEndTimestamp=this._talkingPauseStartTimestamp+this.randomTalkingPauseEndTimestamp())),this._animationEndTimestamp>0&&t>this._animationEndTimestamp&&(e.setValue(At.a.FIGURE_EXPRESSION,0),this._animationEndTimestamp=0),this._gestureEndTimestamp>0&&t>this._gestureEndTimestamp&&(e.setValue(At.a.FIGURE_GESTURE,0),this._gestureEndTimestamp=0),this._signEndTimestamp>0&&t>this._signEndTimestamp&&(e.setValue(At.a.FIGURE_SIGN,-1),this._signEndTimestamp=0),this._carryObjectEndTimestamp>0&&t>this._carryObjectEndTimestamp&&(e.setValue(At.a.FIGURE_CARRY_OBJECT,0),e.setValue(At.a.FIGURE_USE_OBJECT,0),this._carryObjectStartTimestamp=0,this._carryObjectEndTimestamp=0,this._allowUseCarryObject=!1),this._allowUseCarryObject&&t-this._carryObjectStartTimestamp>5e3&&e.setValue(At.a.FIGURE_USE_OBJECT,(t-this._carryObjectStartTimestamp)%1e4<1e3?1:0),this._blinkingStartTimestamp>-1&&t>this._blinkingStartTimestamp&&(e.setValue(At.a.FIGURE_BLINK,1),this._blinkingStartTimestamp=t+this.randomBlinkStartTimestamp(),this._blinkingEndTimestamp=t+this.randomBlinkEndTimestamp()),this._blinkingEndTimestamp>0&&t>this._blinkingEndTimestamp&&(e.setValue(At.a.FIGURE_BLINK,0),this._blinkingEndTimestamp=0),this._effectChangeTimeStamp>0&&t>this._effectChangeTimeStamp&&(e.setValue(At.a.FIGURE_EFFECT,this._newEffect),this._effectChangeTimeStamp=0),this._numberValueEndTimestamp>0&&t>this._numberValueEndTimestamp&&(e.setValue(At.a.FIGURE_NUMBER_VALUE,0),this._numberValueEndTimestamp=0)}processUpdateMessage(e){if(!e||!this.object)return;super.processUpdateMessage(e);const s=this.object&&this.object.model;if(s){if(e instanceof at)return s.setValue(At.a.FIGURE_POSTURE,e.postureType),void s.setValue(At.a.FIGURE_POSTURE_PARAMETER,e.parameter);if(e instanceof z)return s.setValue(At.a.FIGURE_TALK,1),void(this._talkingEndTimestamp=this.time+1e3*e.numberOfWords);if(e instanceof lt)s.setValue(At.a.FIGURE_IS_TYPING,e.isTyping?1:0);else if(e instanceof et)s.setValue(At.a.FIGURE_IS_MUTED,e.isMuted?1:0);else if(e instanceof rt)s.setValue(At.a.FIGURE_IS_PLAYING_GAME,e.isPlayingGame?1:0);else{if(e instanceof ut)return s.setValue(At.a.HEAD_DIRECTION,e.headDirection),s.setValue(At.a.FIGURE_CAN_STAND_UP,e.canStandUp),void s.setValue(At.a.FIGURE_VERTICAL_OFFSET,e.baseY);if(e instanceof $)return s.setValue(At.a.FIGURE_GESTURE,e.gesture),void(this._gestureEndTimestamp=this.time+3e3);if(e instanceof Z)return s.setValue(At.a.FIGURE_EXPRESSION,e.expressionType),this._animationEndTimestamp=Lt.a.getExpressionTimeout(s.getValue(At.a.FIGURE_EXPRESSION)),void(this._animationEndTimestamp>-1&&(this._animationEndTimestamp+=this.time));if(e instanceof Y)s.setValue(At.a.FIGURE_DANCE,e.danceStyle);else{if(e instanceof ct)return s.setValue(At.a.FIGURE_SLEEP,e.isSleeping?1:0),void(this._blinkingStartTimestamp=e.isSleeping?-1:this.time+this.randomBlinkStartTimestamp());if(e instanceof it)return s.setValue(At.a.FIGURE_NUMBER_VALUE,e.value),void(this._numberValueEndTimestamp=this.time+3e3);if(e instanceof q)this.updateAvatarEffect(e.effect,e.delayMilliseconds,s);else{if(e instanceof j)return s.setValue(At.a.FIGURE_CARRY_OBJECT,e.itemType),s.setValue(At.a.FIGURE_USE_OBJECT,0),void(0===e.itemType?(this._carryObjectStartTimestamp=0,this._carryObjectEndTimestamp=0,this._allowUseCarryObject=!1):(this._carryObjectStartTimestamp=this.time,e.itemType<t.MAX_HAND_ID?(this._carryObjectEndTimestamp=0,this._allowUseCarryObject=e.itemType<=t.MAX_HAND_USE_ID):(this._carryObjectEndTimestamp=this._carryObjectStartTimestamp+1500,this._allowUseCarryObject=!1)));if(e instanceof _t)s.setValue(At.a.FIGURE_USE_OBJECT,e.itemType);else{if(e instanceof ot)return s.setValue(At.a.FIGURE_SIGN,e.signType),void(this._signEndTimestamp=this.time+5e3);if(!(e instanceof J))return e instanceof Q?(s.setValue(At.a.FIGURE,e.figure),void s.setValue(At.a.GENDER,e.gender)):e instanceof ci?(this._selected=e.selected,void(this._reportedLocation=null)):void(e instanceof st&&s.setValue(At.a.OWN_USER,1));s.setValue(At.a.FIGURE_FLAT_CONTROL,e.level)}}}}}}updateAvatarEffect(e,s,n){if(e===t._Str_13364)this._effectChangeTimeStamp=l.a.instance.time+t._Str_8860,this._newEffect=t._Str_15351;else if(e===t._Str_13733)this._effectChangeTimeStamp=l.a.instance.time+t._Str_8860,this._newEffect=t._Str_13094;else if(n.getValue(At.a.FIGURE_EFFECT)===t._Str_15351)this._effectChangeTimeStamp=l.a.instance.time+t._Str_8860,this._newEffect=e,e=t._Str_13364;else if(n.getValue(At.a.FIGURE_EFFECT)===t._Str_13094)this._effectChangeTimeStamp=l.a.instance.time+t._Str_8860,this._newEffect=e,e=t._Str_13733;else{if(0!==s)return this._effectChangeTimeStamp=l.a.instance.time+s,void(this._newEffect=e);this._effectChangeTimeStamp=0}n.setValue(At.a.FIGURE_EFFECT,e)}mouseEvent(t,e){let s=null;switch(t.type){case h.a.MOUSE_CLICK:s=o.CLICK;break;case h.a.ROLL_OVER:s=o.MOUSE_ENTER,this.object.model&&this.object.model.setValue(At.a.FIGURE_HIGHLIGHT,1),this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new k(k.MOUSE_BUTTON,this.object));break;case h.a.ROLL_OUT:s=o.MOUSE_LEAVE,this.object.model&&this.object.model.setValue(At.a.FIGURE_HIGHLIGHT,0),this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new k(k.MOUSE_ARROW,this.object))}s&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new o(s,this.object,t._Str_3463,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown))}randomTalkingPauseStartTimestamp(){return 100+200*Math.random()}randomTalkingPauseEndTimestamp(){return 75+75*Math.random()}randomBlinkStartTimestamp(){return 4500+1e3*Math.random()}randomBlinkEndTimestamp(){return 50+200*Math.random()}}return t.MAX_HAND_ID=999999999,t.MAX_HAND_USE_ID=999,t._Str_13364=28,t._Str_8860=500,t._Str_15351=29,t._Str_13733=184,t._Str_13094=185,t})();var bi=s("PJfP");let vi=(()=>{class t extends Ei{constructor(){super(),this._sizeX=0,this._sizeY=0,this._sizeZ=0,this._centerX=0,this._centerY=0,this._centerZ=0,this._directions=[],this._mouseOver=!1,this._locationOffset=new m.a,this._bouncingStep=0,this._storedRotateMessage=null,this._directionInitialized=!1}getEventTypes(){const t=[ii.STATE_CHANGE,o.CLICK,o.MOUSE_DOWN];return this.widget&&t.push(oi.a.OPEN_WIDGET,oi.a.CLOSE_WIDGET),this.contextMenu&&t.push(oi.a.OPEN_FURNI_CONTEXT_MENU,oi.a.CLOSE_FURNI_CONTEXT_MENU),this.mergeTypes(super.getEventTypes(),t)}initialize(t){if(!t)return;const e=this.object&&this.object.model;if(!e)return;const s=t.dimensions;if(!s)return;this._sizeX=s.x,this._sizeY=s.y,this._sizeZ=s.z,this._centerX=this._sizeX/2,this._centerY=this._sizeY/2,this._centerZ=this._sizeZ/2;const n=t.directions;if(n&&n.length){for(const t of n)this._directions.push(t);this._directions.sort((t,e)=>t-e)}e.setValue(At.a.FURNITURE_SIZE_X,this._sizeX),e.setValue(At.a.FURNITURE_SIZE_Y,this._sizeY),e.setValue(At.a.FURNITURE_SIZE_Z,this._sizeZ),e.setValue(At.a.FURNITURE_CENTER_X,this._centerX),e.setValue(At.a.FURNITURE_CENTER_Y,this._centerY),e.setValue(At.a.FURNITURE_CENTER_Z,this._centerZ),e.setValue(At.a.FURNITURE_ALLOWED_DIRECTIONS,this._directions),e.setValue(At.a.FURNITURE_ALPHA_MULTIPLIER,1)}dispose(){super.dispose(),this._storedRotateMessage=null,this._directions=null}setObject(t){super.setObject(t),t&&t.getLocation().length&&(this._directionInitialized=!0)}getAdClickUrl(t){return t.getValue(At.a.FURNITURE_AD_URL)}update(e){super.update(e),this._bouncingStep>0&&(this._bouncingStep++,this._bouncingStep>t.BOUNCING_STEPS&&(this._bouncingStep=0))}processUpdateMessage(t){if(t instanceof dt)this.processDataUpdateMessage(t);else if(t instanceof mt)this.processObjectHeightUpdateMessage(t);else if(t instanceof pt)this.processItemDataUpdateMessage(t);else{if(this._mouseOver=!1,t.location&&t.direction){if(!(t instanceof ht)){const e=this.object.getDirection(),s=this.object.getLocation();e.x!==t.direction.x&&this._directionInitialized&&s.x===t.location.x&&s.y===t.location.y&&s.z===t.location.z&&(this._bouncingStep=1,this._storedRotateMessage=new c.a(t.location,t.direction),t=null)}this._directionInitialized=!0}t instanceof li&&this.contextMenu&&this.eventDispatcher&&this.object&&this.eventDispatcher.dispatchEvent(new oi.a(t.selected?oi.a.OPEN_FURNI_CONTEXT_MENU:oi.a.CLOSE_FURNI_CONTEXT_MENU,this.object)),super.processUpdateMessage(t)}}processDataUpdateMessage(t){t&&(this.object.setState(t.state,0),t.data&&t.data.writeRoomObjectModel(this.object.model),isNaN(t.extra)||this.object.model.setValue(At.a.FURNITURE_EXTRAS,t.extra.toString()),this.object.model.setValue(At.a.FURNITURE_STATE_UPDATE_TIME,this.lastUpdateTime))}processObjectHeightUpdateMessage(t){t&&this.object.model.setValue(At.a.FURNITURE_SIZE_Z,t.height)}processItemDataUpdateMessage(t){t&&this.object.model.setValue(At.a.FURNITURE_ITEMDATA,t.data)}mouseEvent(t,e){const s=this.getAdClickUrl(this.object.model);switch(t.type){case h.a.MOUSE_MOVE:if(this.eventDispatcher){const e=new o(o.MOUSE_MOVE,this.object,t._Str_3463,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown);e.localX=t.localX,e.localY=t.localY,e.spriteOffsetX=t.spriteOffsetX,e.spriteOffsetY=t.spriteOffsetY,this.eventDispatcher.dispatchEvent(e)}return;case h.a.ROLL_OVER:if(!this._mouseOver){if(this.eventDispatcher){const e=new o(o.MOUSE_ENTER,this.object,t._Str_3463,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown);e.localX=t.localX,e.localY=t.localY,e.spriteOffsetX=t.spriteOffsetX,e.spriteOffsetY=t.spriteOffsetY,this.eventDispatcher.dispatchEvent(e)}this._mouseOver=!0}return;case h.a.ROLL_OUT:if(this._mouseOver){if(this.eventDispatcher){const e=new o(o.MOUSE_LEAVE,this.object,t._Str_3463,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown);e.localX=t.localX,e.localY=t.localY,e.spriteOffsetX=t.spriteOffsetX,e.spriteOffsetY=t.spriteOffsetY,this.eventDispatcher.dispatchEvent(e)}this._mouseOver=!1}return;case h.a.DOUBLE_CLICK:return void this.useObject();case h.a.MOUSE_CLICK:if(this.eventDispatcher){const e=new o(o.CLICK,this.object,t._Str_3463,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown);e.localX=t.localX,e.localY=t.localY,e.spriteOffsetX=t.spriteOffsetX,e.spriteOffsetY=t.spriteOffsetY,this.eventDispatcher.dispatchEvent(e)}return this.eventDispatcher&&s&&this.handleAdClick(this.object.id,this.object.type,s),void(this.eventDispatcher&&this.object&&this.contextMenu&&this.eventDispatcher.dispatchEvent(new oi.a(oi.a.OPEN_FURNI_CONTEXT_MENU,this.object)));case h.a.MOUSE_DOWN:if(this.eventDispatcher){const e=new o(o.MOUSE_DOWN,this.object,t._Str_3463,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown);this.eventDispatcher.dispatchEvent(e)}return}}handleAdClick(t,e,s){}getLocationOffset(){return this._bouncingStep<=0?null:(this._locationOffset.x=0,this._locationOffset.y=0,this._bouncingStep<=t.BOUNCING_STEPS/2?this._locationOffset.z=t.BOUNCING_Z*this._bouncingStep:this._bouncingStep<=t.BOUNCING_STEPS&&(this._storedRotateMessage&&(super.processUpdateMessage(this._storedRotateMessage),this._storedRotateMessage=null),this._locationOffset.z=t.BOUNCING_Z*(t.BOUNCING_STEPS-this._bouncingStep)),this._locationOffset)}useObject(){this.object&&(this.getAdClickUrl(this.object.model),this.eventDispatcher&&(this.widget&&this.eventDispatcher.dispatchEvent(new oi.a(oi.a.OPEN_WIDGET,this.object)),this.eventDispatcher.dispatchEvent(new ii(ii.STATE_CHANGE,this.object))))}tearDown(){this.widget&&1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&this.eventDispatcher.dispatchEvent(new oi.a(oi.a.CLOSE_WIDGET,this.object)),super.tearDown()}}return t.BOUNCING_STEPS=8,t.BOUNCING_Z=.0625,t})();class Ii extends vi{getEventTypes(){const t=[Zn.LOAD_BADGE];return this.mergeTypes(super.getEventTypes(),t)}processUpdateMessage(t){if(super.processUpdateMessage(t),this.object)if(t instanceof dt){const e=t.data;e instanceof bi.a&&this.updateBadge(e.getValue(1))}else t instanceof gt&&"loading_icon"!==t.assetName&&(this.object.model.setValue(At.a.FURNITURE_BADGE_ASSET_NAME,t.assetName),this.object.model.setValue(At.a.FURNITURE_BADGE_IMAGE_STATUS,1),this.update(l.a.instance.time))}mouseEvent(t,e){if(t&&e&&this.object)switch(t.type){case h.a.DOUBLE_CLICK:return void this.useObject();default:return void super.mouseEvent(t,e)}}useObject(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new oi.a(oi.a.BADGE_DISPLAY_ENGRAVING,this.object))}updateBadge(t){""!==t&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new Zn(Zn.LOAD_BADGE,this.object,t,!1))}}class Ri extends vi{constructor(){super(),this.onRoomToObjectOwnAvatarMoveEvent=this.onRoomToObjectOwnAvatarMoveEvent.bind(this)}initialize(t){super.initialize(t),this.eventDispatcher&&this.eventDispatcher.addEventListener(V.ROAME_MOVE_TO,this.onRoomToObjectOwnAvatarMoveEvent)}tearDown(){this.eventDispatcher&&this.eventDispatcher.removeEventListener(V.ROAME_MOVE_TO,this.onRoomToObjectOwnAvatarMoveEvent),super.tearDown()}onRoomToObjectOwnAvatarMoveEvent(t){if(!t||!this.object)return;const e=this.object.getLocation(),s=t.targetLocation;if(!s)return;let n=this.object.model.getValue(At.a.FURNITURE_SIZE_X),i=this.object.model.getValue(At.a.FURNITURE_SIZE_Y);const r=(Math.floor(this.object.getDirection().x)+45)%360/90;1!==r&&3!==r||([n,i]=[i,n]),this.object.setState(s.x>=e.x&&s.x<e.x+n&&s.y>=e.y&&s.y<e.y+i?1:0,0)}}class Ti extends vi{getEventTypes(){const t=[ii.STATE_CHANGE];return this.mergeTypes(super.getEventTypes(),t)}mouseEvent(t,e){if(!t||!e||!this.object)return;let s=null;switch(t.type){case h.a.DOUBLE_CLICK:switch(t.spriteTag){case"start_stop":s=new ii(ii.STATE_CHANGE,this.object,1);break;case"reset":s=new ii(ii.STATE_CHANGE,this.object,2)}if(this.eventDispatcher&&s)return void this.eventDispatcher.dispatchEvent(s)}super.mouseEvent(t,e)}useObject(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new ii(ii.STATE_CHANGE,this.object,1))}}var yi=s("6j78");class Oi extends vi{processUpdateMessage(t){super.processUpdateMessage(t),this.object&&1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&this.object.model.setValue(yi.a.INFOSTAND_EXTRA_PARAM,yi.a.CRACKABLE_FURNI)}}class Ci extends vi{getEventTypes(){const t=[oi.a.CREDITFURNI];return this.mergeTypes(super.getEventTypes(),t)}initialize(t){super.initialize(t);let e=0;t.credits&&""!==t.credits&&(e=parseInt(t.credits)),this.object.model.setValue(At.a.FURNITURE_CREDIT_VALUE,e)}mouseEvent(t,e){if(t&&e&&this.object)switch(t.type){case h.a.DOUBLE_CLICK:return void this.useObject();default:super.mouseEvent(t,e)}}useObject(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new oi.a(oi.a.CREDITFURNI,this.object))}}var Ai=s("f6o4");class Mi extends vi{getEventTypes(){const t=[k.MOUSE_BUTTON,k.MOUSE_ARROW];return this.mergeTypes(super.getEventTypes(),t)}mouseEvent(t,e){if(t&&e&&this.object){switch(t.type){case h.a.ROLL_OVER:this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new k(k.MOUSE_BUTTON,this.object));break;case h.a.ROLL_OUT:this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new k(k.MOUSE_ARROW,this.object))}super.mouseEvent(t,e)}}}class wi extends Mi{initialize(t){super.initialize(t),this.object&&this.object.model&&this.object.model.setValue(At.a.FURNITURE_ALWAYS_STACKABLE,1)}get widget(){return Ai.a.CUSTOM_STACK_HEIGHT}}class Ui extends vi{constructor(){super(),this._noTags=!1,this._noTagsLastStateActivate=!1}getEventTypes(){const t=[k.DICE_ACTIVATE,k.DICE_OFF];return this.mergeTypes(super.getEventTypes(),t)}mouseEvent(t,e){if(!t||!e||!this.object)return;let s=null;switch(t.type){case h.a.DOUBLE_CLICK:return this._noTags?this._noTagsLastStateActivate&&0!==this.object.getState(0)&&100!==this.object.getState(0)?(s=new k(k.DICE_OFF,this.object),this._noTagsLastStateActivate=!1):(s=new k(k.DICE_ACTIVATE,this.object),this._noTagsLastStateActivate=!0):"activate"===t.spriteTag||0===this.object.getState(0)||100===this.object.getState(0)?s=new k(k.DICE_ACTIVATE,this.object):"deactivate"===t.spriteTag&&(s=new k(k.DICE_OFF,this.object)),void(s&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(s))}super.mouseEvent(t,e)}}class Di extends vi{constructor(){super(),this._showStateOnceRendered=!1,this._updateCount=0}getEventTypes(){const t=[oi.a.INERNAL_LINK];return this.mergeTypes(super.getEventTypes(),t)}initialize(t){super.initialize(t),t.action&&1===t.action.startState&&(this._showStateOnceRendered=!0)}update(t){super.update(t),this._showStateOnceRendered&&(this._updateCount++,this._showStateOnceRendered&&this._updateCount>20&&(this.setAutomaticStateIndex(1),this._showStateOnceRendered=!1))}setAutomaticStateIndex(t){this.object&&this.object.model&&this.object.model.setValue(At.a.FURNITURE_AUTOMATIC_STATE_INDEX,t)}mouseEvent(t,e){t&&e&&(t.type===h.a.DOUBLE_CLICK&&this.setAutomaticStateIndex(0),super.mouseEvent(t,e))}useObject(){this.eventDispatcher&&this.object&&this.eventDispatcher.dispatchEvent(new oi.a(oi.a.INERNAL_LINK,this.object))}}class Ni extends vi{getEventTypes(){const t=[oi.a.ROOM_LINK];return this.mergeTypes(super.getEventTypes(),t)}initialize(t){super.initialize(t),t.action&&t.action.link&&""!==t.action.link&&t.action.link.length>0&&this.object&&this.object.model&&this.object.model.setValue(At.a.FURNITURE_INTERNAL_LINK,t.action.link)}dispose(){super.dispose(),this._timer&&(clearTimeout(this._timer),this._timer=null)}setAutomaticStateIndex(t){this.object&&this.object.model&&this.object.model.setValue(At.a.FURNITURE_AUTOMATIC_STATE_INDEX,t)}useObject(){this.setAutomaticStateIndex(1),this._timer&&(clearTimeout(this._timer),this._timer=null),this._timer=setTimeout(()=>{this.setAutomaticStateIndex(0),this._timer=null},2500),this.eventDispatcher&&this.object&&this.eventDispatcher.dispatchEvent(new oi.a(oi.a.ROOM_LINK,this.object))}}class Li extends Mi{initialize(t){if(super.initialize(t),t&&this.object&&this.object.model){let e="";t.maskType&&""!==t.maskType&&t.maskType.length>0&&(e=t.maskType),this.object.model.setValue(At.a.FURNITURE_USES_PLANE_MASK,0),this.object.model.setValue(At.a.FURNITURE_PLANE_MASK_TYPE,e)}}mouseEvent(t,e){if(t&&e&&this.object){switch(t.type){case h.a.DOUBLE_CLICK:this.useObject()}super.mouseEvent(t,e)}}get widget(){return Ai.a.EXTERNAL_IMAGE}}class Pi extends vi{}let xi=(()=>{class t extends Mi{constructor(){super(),this._currentState=-1,this._currentLocation=null}getEventTypes(){const t=[$n.ADD_HOLE,$n.REMOVE_HOLE];return this.mergeTypes(super.getEventTypes(),t)}dispose(){this._currentState===t._Str_9306&&this.eventDispatcher.dispatchEvent(new $n($n.REMOVE_HOLE,this.object)),super.dispose()}update(t){super.update(t),this._Str_25016()}processUpdateMessage(e){if(super.processUpdateMessage(e),!this.object)return;e instanceof dt&&this._Str_21445(this.object.getState(0));const s=this.object.getLocation();this._currentLocation?s.x===this._currentLocation.x&&s.y===this._currentLocation.y||this._currentState===t._Str_9306&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new $n($n.ADD_HOLE,this.object)):this._currentLocation=new m.a,this._currentLocation.assign(s)}_Str_21445(e){e!==this._currentState&&(this.eventDispatcher&&(e===t._Str_9306?this.eventDispatcher.dispatchEvent(new $n($n.ADD_HOLE,this.object)):this._currentState===t._Str_9306&&this.eventDispatcher.dispatchEvent(new $n($n.REMOVE_HOLE,this.object))),this._currentState=e)}_Str_25016(){if(!this.object)return;const t=this.object.model;if(!t)return;const e=t.getValue(At.a.FURNITURE_AUTOMATIC_STATE_INDEX);isNaN(e)||this._Str_21445(e%2)}}return t._Str_9306=0,t})(),Fi=(()=>{class t extends Mi{constructor(){super(...arguments),this._state=-1}get engravingDialogType(){return 0}initialize(t){super.initialize(t),this.object&&this.object.model.setValue(At.a.FURNITURE_FRIENDFURNI_ENGRAVING,this.engravingDialogType)}processUpdateMessage(t){if(t instanceof dt){const e=t.data;this._state=e?e.state:t.state}super.processUpdateMessage(t)}getEventTypes(){const t=[oi.a.FRIEND_FURNITURE_ENGRAVING];return this.mergeTypes(super.getEventTypes(),t)}useObject(){this._state==t.STATE_LOCKED?this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new oi.a(oi.a.FRIEND_FURNITURE_ENGRAVING,this.object)):super.useObject()}}return t.STATE_UNINITIALIZED=-1,t.STATE_UNLOCKED=0,t.STATE_LOCKED=1,t})(),ki=(()=>{class t extends Mi{processUpdateMessage(e){if(super.processUpdateMessage(e),e instanceof dt){const s=e.data;s instanceof bi.a&&(this.updateGroupId(s.getValue(t.GROUPID_KEY)),this.updateBadge(s.getValue(t.BADGE_KEY)),this.updateColors(s.getValue(t.COLOR1_KEY),s.getValue(t.COLOR2_KEY)))}}updateGroupId(t){this.object.model.setValue(At.a.FURNITURE_GUILD_CUSTOMIZED_GUILD_ID,parseInt(t))}updateBadge(t){this.object.model.setValue(At.a.FURNITURE_GUILD_CUSTOMIZED_BADGE,t)}updateColors(t,e){this.object.model.setValue(At.a.FURNITURE_GUILD_CUSTOMIZED_COLOR_1,parseInt(t,16)),this.object.model.setValue(At.a.FURNITURE_GUILD_CUSTOMIZED_COLOR_2,parseInt(e,16))}}return t.GROUPID_KEY=1,t.BADGE_KEY=2,t.COLOR1_KEY=3,t.COLOR2_KEY=4,t})(),Wi=(()=>{class t extends vi{constructor(){super(...arguments),this._state=-1}getEventTypes(){return[oi.a.HIGH_SCORE_DISPLAY,oi.a.HIDE_HIGH_SCORE_DISPLAY]}tearDown(){1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&this.eventDispatcher.dispatchEvent(new oi.a(oi.a.HIDE_HIGH_SCORE_DISPLAY,this.object)),super.tearDown()}processUpdateMessage(e){super.processUpdateMessage(e),1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&e instanceof dt&&(this.eventDispatcher.dispatchEvent(new oi.a(e.state===t.SHOW_WIDGET_IN_STATE?oi.a.HIGH_SCORE_DISPLAY:oi.a.HIDE_HIGH_SCORE_DISPLAY,this.object)),this._state=e.state)}mouseEvent(t,e){if(t&&e&&this.object)switch(t.type){case h.a.DOUBLE_CLICK:return void this.useObject();default:super.mouseEvent(t,e)}}}return t.SHOW_WIDGET_IN_STATE=1,t})();class Bi extends vi{getEventTypes(){const t=[ii.STATE_CHANGE];return this.mergeTypes(super.getEventTypes(),t)}mouseEvent(t,e){if(!t||!e||!this.object)return;let s=null;switch(t.type){case h.a.DOUBLE_CLICK:switch(t.spriteTag){case"off":s=new ii(ii.STATE_CHANGE,this.object,3)}break;case h.a.MOUSE_CLICK:switch(t.spriteTag){case"inc":s=new ii(ii.STATE_CHANGE,this.object,2);break;case"dec":s=new ii(ii.STATE_CHANGE,this.object,1)}}this.eventDispatcher&&s?this.eventDispatcher.dispatchEvent(s):super.mouseEvent(t,e)}useObject(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new ii(ii.STATE_CHANGE,this.object,3))}}class Vi extends Mi{constructor(){super(),this._nextState=0,this._nextStateTimestamp=0}update(t){if(this._nextStateTimestamp>0&&t>=this._nextStateTimestamp){this._nextStateTimestamp=0;const t=new yt.a;t.setString(this._nextState.toString()),super.processUpdateMessage(new dt(this._nextState,t))}super.update(t)}processUpdateMessage(t){if(t instanceof dt)return this.processUpdate(t);super.processUpdateMessage(t)}processUpdate(t){if(!t)return;const e=t.state/1e3,s=t.state%1e3;if(s)this._nextState=e,this._nextStateTimestamp=this.time+s;else{this._nextStateTimestamp=0;const t=new yt.a;t.setString(e.toString()),super.processUpdateMessage(new dt(e,t))}}}var Gi=s("tWLA");let Ki=(()=>{class t extends vi{getEventTypes(){const t=[oi.a.MANNEQUIN];return this.mergeTypes(super.getEventTypes(),t)}processUpdateMessage(t){super.processUpdateMessage(t),t instanceof dt&&(t.data.writeRoomObjectModel(this.object.model),this.processObjectData())}processObjectData(){if(!this.object||!this.object.model)return;const e=new Gi.a;e.initializeFromRoomObjectModel(this.object.model),this.object.model.setValue(At.a.FURNITURE_MANNEQUIN_GENDER,e.getValue(t.GENDER)),this.object.model.setValue(At.a.FURNITURE_MANNEQUIN_FIGURE,e.getValue(t.FIGURE)),this.object.model.setValue(At.a.FURNITURE_MANNEQUIN_NAME,e.getValue(t.OUTFIT_NAME))}mouseEvent(t,e){if(t&&e&&this.object){switch(t.type){case h.a.DOUBLE_CLICK:return void this.useObject()}super.mouseEvent(t,e)}}useObject(){this.eventDispatcher&&this.object&&this.eventDispatcher.dispatchEvent(new oi.a(oi.a.MANNEQUIN,this.object))}}return t.GENDER="GENDER",t.FIGURE="FIGURE",t.OUTFIT_NAME="OUTFIT_NAME",t})();class Hi extends Mi{initialize(t){super.initialize(t),this.object&&this.object.model&&this.object.model.setValue(At.a.FURNITURE_IS_VARIABLE_HEIGHT,1)}}class ji extends vi{getEventTypes(){const t=[k.ENTER_ONEWAYDOOR];return this.mergeTypes(super.getEventTypes(),t)}mouseEvent(t,e){if(t&&e&&this.object){switch(t.type){case h.a.DOUBLE_CLICK:return void this.useObject()}super.mouseEvent(t,e)}}useObject(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new k(k.ENTER_ONEWAYDOOR,this.object))}}class zi extends vi{}let Yi=(()=>{class t extends vi{getEventTypes(){const t=[oi.a.PRESENT];return this.mergeTypes(super.getEventTypes(),t)}initialize(t){super.initialize(t)}processUpdateMessage(t){super.processUpdateMessage(t),t instanceof dt&&(t.data.writeRoomObjectModel(this.object.model),this.updateStuffData()),t instanceof ft&&t.numberKey===At.a.FURNITURE_DISABLE_PICKING_ANIMATION&&this.object.model.setValue(At.a.FURNITURE_DISABLE_PICKING_ANIMATION,t.numberValue)}updateStuffData(){if(!this.object||!this.object.model)return;const e=new Gi.a;e.initializeFromRoomObjectModel(this.object.model);const s=e.getValue(t.MESSAGE),n=this.object.model.getValue(At.a.FURNITURE_DATA);this.object.model.setValue(At.a.FURNITURE_DATA,s||"string"!=typeof n?e.getValue(t.MESSAGE):n.substr(1)),this.writeToModel(At.a.FURNITURE_TYPE_ID,e.getValue(t.PRODUCT_CODE)),this.writeToModel(At.a.FURNITURE_PURCHASER_NAME,e.getValue(t.PURCHASER_NAME)),this.writeToModel(At.a.FURNITURE_PURCHASER_FIGURE,e.getValue(t.PURCHASER_FIGURE))}writeToModel(t,e){e&&this.object.model.setValue(t,e)}mouseEvent(t,e){if(t&&e&&this.object)switch(t.type){case h.a.ROLL_OVER:this.eventDispatcher.dispatchEvent(new k(k.MOUSE_BUTTON,this.object));break;case h.a.ROLL_OUT:this.eventDispatcher.dispatchEvent(new k(k.MOUSE_ARROW,this.object));break;case h.a.DOUBLE_CLICK:return void this.useObject();default:super.mouseEvent(t,e)}}useObject(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new oi.a(oi.a.PRESENT,this.object))}}return t.MESSAGE="MESSAGE",t.PRODUCT_CODE="PRODUCT_CODE",t.EXTRA_PARAM="EXTRA_PARAM",t.PURCHASER_NAME="PURCHASER_NAME",t.PURCHASER_FIGURE="PURCHASER_FIGURE",t})();class qi extends Mi{getEventTypes(){const t=[oi.a.PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG];return this.mergeTypes(super.getEventTypes(),t)}useObject(){this.eventDispatcher.dispatchEvent(new oi.a(oi.a.PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,this.object))}}class Xi extends Mi{}var Zi=s("uUF/");class Qi extends Mi{constructor(){super(),this._roomColorUpdated=!1}getEventTypes(){const t=[oi.a.BACKGROUND_COLOR,ei.ROOM_BACKGROUND_COLOR];return this.mergeTypes(super.getEventTypes(),t)}dispose(){this._roomColorUpdated&&(this.eventDispatcher&&this.object&&1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&this.eventDispatcher.dispatchEvent(new ei(ei.ROOM_BACKGROUND_COLOR,this.object,!1,0,0,0)),this._roomColorUpdated=!1),super.dispose()}processUpdateMessage(t){super.processUpdateMessage(t),t instanceof dt&&(t.data.writeRoomObjectModel(this.object.model),1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&this.processColorUpdate())}processColorUpdate(){if(!this.object||!this.object.model)return;const t=new Zi.a;t.initializeFromRoomObjectModel(this.object.model);const e=t.getValue(0),s=t.getValue(1),n=t.getValue(2),i=t.getValue(3);e>-1&&s>-1&&n>-1&&i>-1&&(this.object.model.setValue(At.a.FURNITURE_ROOM_BACKGROUND_COLOR_HUE,s),this.object.model.setValue(At.a.FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION,n),this.object.model.setValue(At.a.FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS,i),this.object.setState(e,0),this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new ei(ei.ROOM_BACKGROUND_COLOR,this.object,1===e,s,n,i)),this._roomColorUpdated=!0)}mouseEvent(t,e){if(t&&e&&this.object)switch(t.type){case h.a.DOUBLE_CLICK:return void(this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new oi.a(oi.a.BACKGROUND_COLOR,this.object)));default:super.mouseEvent(t,e)}}}let Ji=(()=>{class t extends c.a{constructor(t){super(null,null),this._type=t}get type(){return this._type}}return t.IMAGE_LOADED="ROAUM_IMAGE_LOADED",t.IMAGE_LOADING_FAILED="ROAUM_IMAGE_FAILED",t})(),$i=(()=>{class t extends vi{constructor(){super(),this._hasClickUrl=!1}processUpdateMessage(t){super.processUpdateMessage(t),t instanceof dt&&this.processAdDataUpdateMessage(t),t instanceof Ji&&this.processAdUpdate(t)}processAdDataUpdateMessage(e){if(!e)return;const s=new Gi.a;s.initializeFromRoomObjectModel(this.object.model);const n=parseInt(s.getValue(t.STATE));isNaN(n)||this.object.getState(0)===n||this.object.setState(n,0);const i=s.getValue(t.IMAGEURL_KEY),r=this.object.model.getValue(At.a.FURNITURE_BRANDING_IMAGE_URL);r&&r===i||(this.object.model.setValue(At.a.FURNITURE_BRANDING_IMAGE_URL,i),this.object.model.setValue(At.a.FURNITURE_BRANDING_IMAGE_STATUS,0),this.downloadBackground());const a=s.getValue(t.CLICKURL_KEY);if(a){const t=this.object.model.getValue(At.a.FURNITURE_BRANDING_URL);t&&t===a||this.object.model&&this.object.model.setValue(At.a.FURNITURE_BRANDING_URL,a)}const o=parseInt(s.getValue(t.OFFSETX_KEY)),c=parseInt(s.getValue(t.OFFSETY_KEY)),l=parseInt(s.getValue(t.OFFSETZ_KEY));isNaN(o)||this.object.model.setValue(At.a.FURNITURE_BRANDING_OFFSET_X,o),isNaN(c)||this.object.model.setValue(At.a.FURNITURE_BRANDING_OFFSET_Y,c),isNaN(l)||this.object.model.setValue(At.a.FURNITURE_BRANDING_OFFSET_Z,l);let h=t.IMAGEURL_KEY+"="+(null!==i?i:"")+"\t";this._hasClickUrl&&(h=h+(t.CLICKURL_KEY+"=")+(null!==a?a:"")+"\t"),h=h+(t.OFFSETX_KEY+"=")+o+"\t",h=h+(t.OFFSETY_KEY+"=")+c+"\t",h=h+(t.OFFSETZ_KEY+"=")+l+"\t",this.object.model.setValue(yi.a.INFOSTAND_EXTRA_PARAM,yi.a.BRANDING_OPTIONS+h)}processAdUpdate(t){if(t&&this.object)switch(t.type){case Ji.IMAGE_LOADED:this.object.model.setValue(At.a.FURNITURE_BRANDING_IMAGE_STATUS,1);break;case Ji.IMAGE_LOADING_FAILED:this.object.model.setValue(At.a.FURNITURE_BRANDING_IMAGE_STATUS,-1)}}downloadBackground(){const t=this.object&&this.object.model;if(!t)return;const e=t.getValue(At.a.FURNITURE_BRANDING_IMAGE_URL),s=t.getValue(At.a.FURNITURE_BRANDING_IMAGE_STATUS);if(!e||""===e||1===s)return;const n=l.a.instance.core&&l.a.instance.core.asset;n&&(n.getTexture(e)?this.processUpdateMessage(new Ji(Ji.IMAGE_LOADED)):n.downloadAsset(e,t=>{this.processUpdateMessage(new Ji(t?Ji.IMAGE_LOADED:Ji.IMAGE_LOADING_FAILED))}))}}return t.STATE="state",t.IMAGEURL_KEY="imageUrl",t.CLICKURL_KEY="clickUrl",t.OFFSETX_KEY="offsetX",t.OFFSETY_KEY="offsetY",t.OFFSETZ_KEY="offsetZ",t})();class tr extends $i{getAdClickUrl(t){return null}}class er extends $i{constructor(){super(),this._hasClickUrl=!0}getAdClickUrl(t){return t.getValue(At.a.FURNITURE_BRANDING_URL)}handleAdClick(t,e,s){s.startsWith("http")&&window.open(s)}}class sr extends vi{constructor(){super(),this._roomColorUpdated=!1}getEventTypes(){const t=[oi.a.DIMMER,oi.a.WIDGET_REMOVE_DIMMER,Jn.DIMMER_STATE];return this.mergeTypes(super.getEventTypes(),t)}dispose(){this._roomColorUpdated&&this.eventDispatcher&&this.object&&(1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&(this.eventDispatcher.dispatchEvent(new Jn(this.object,0,1,1,16777215,255)),this.eventDispatcher.dispatchEvent(new oi.a(oi.a.WIDGET_REMOVE_DIMMER,this.object))),this._roomColorUpdated=!1),super.dispose()}processUpdateMessage(t){if(t instanceof dt){if(t.data){const e=t.data.getLegacyString();1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&this.processDimmerData(e),super.processUpdateMessage(new dt(this.getStateFromDimmerData(e),t.data))}}else super.processUpdateMessage(t)}getStateFromDimmerData(t){if(!t)return 0;const e=t.split(",");return e.length>=5?parseInt(e[0])-1:0}processDimmerData(t){if(!t)return;const e=t.split(",");if(e.length>=5){const s=this.getStateFromDimmerData(t),n=parseInt(e[1]),i=parseInt(e[2]);let r=parseInt(e[3].substr(1),16),a=parseInt(e[4]);s||(r=16777215,a=255),this.eventDispatcher&&this.object&&(this.eventDispatcher.dispatchEvent(new Jn(this.object,s,n,i,r,a)),this._roomColorUpdated=!0)}}useObject(){this.eventDispatcher.dispatchEvent(new oi.a(oi.a.DIMMER,this.object))}update(t){if(super.update(t),this.object&&this.object.model&&1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)){const t=this.object.model.getValue(At.a.FURNITURE_DATA);t&&t.length>0&&(this.object.model.setValue(At.a.FURNITURE_DATA,""),this.processDimmerData(t))}}}let nr=(()=>{class t extends vi{constructor(){super(),this._score=0,this._scoreIncreaser=50,this._scoreTimer=0}processUpdateMessage(t){if(t instanceof dt)return this.updateScore(t.state);super.processUpdateMessage(t)}updateScore(e){this._score=e;const s=this.object.getState(0);if(this._score!==s){let e=this._score-s;e<0&&(e=-e),this._scoreIncreaser=e*t._Str_3536>t._Str_5967?t._Str_5967/e:t._Str_3536,this._scoreTimer=l.a.instance.time}}update(t){super.update(t);const e=this.object.getState(0);if(e!==this._score&&t>=this._scoreTimer+this._scoreIncreaser){const s=t-this._scoreTimer;let n=s/this._scoreIncreaser,i=1;this._score<e&&(i=-1),n>i*(this._score-e)&&(n=i*(this._score-e)),this.object.setState(e+i*n,0),this._scoreTimer=t-(s-n*this._scoreIncreaser)}}}return t._Str_3536=50,t._Str_5967=3e3,t})(),ir=(()=>{class t extends Mi{constructor(){super(),this._state=-1,this._sampleId=-1,this._noPitch=!1,this._lastLocZ=0}getEventTypes(){const t=[ni.ROOM_OBJECT_INITIALIZED,ni.ROOM_OBJECT_DISPOSED,ni.PLAY_SAMPLE,ni.CHANGE_PITCH];return this.mergeTypes(super.getEventTypes(),t)}initialize(t){super.initialize(t),t.soundSample&&t.soundSample.id&&(this._sampleId=t.soundSample.id,t.soundSample.noPitch&&(this._noPitch=t.soundSample.noPitch),this.updateModel())}dispose(){super.dispose(),this._state!==t.STATE_UNINITIALIZED&&this.eventDispatcher.dispatchEvent(new ni(ni.ROOM_OBJECT_DISPOSED,this.object,this._sampleId))}processUpdateMessage(t){super.processUpdateMessage(t),t instanceof dt&&this.updateSoundBlockMessage(t)}updateSoundBlockMessage(e){if(!e)return;const s=this.object&&this.object.model,n=this.object&&this.object.location;s&&n&&(this._state===t.STATE_UNINITIALIZED&&1===s.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&(this._lastLocZ=n.z,this.eventDispatcher.dispatchEvent(new ni(ni.ROOM_OBJECT_INITIALIZED,this.object,this._sampleId,this._Str_17428(n.z)))),this._state!==t.STATE_UNINITIALIZED&&1===s.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&this._lastLocZ!==n.z&&(this._lastLocZ=n.z,this.eventDispatcher.dispatchEvent(new ni(ni.CHANGE_PITCH,this.object,this._sampleId,this._Str_17428(n.z)))),this._state!==t.STATE_UNINITIALIZED&&e.state!==this._state&&this._Str_18183(n.z),this._state=e.state)}updateModel(){const t=this.object&&this.object.model;if(!t)return!1;t.setValue(At.a.FURNITURE_SOUNDBLOCK_RELATIVE_ANIMATION_SPEED,1)}_Str_18183(t){const e=this.object&&this.object.model;if(!e)return;const s=this._Str_17428(t);e.setValue(At.a.FURNITURE_SOUNDBLOCK_RELATIVE_ANIMATION_SPEED,s),this.eventDispatcher.dispatchEvent(new ni(ni.PLAY_SAMPLE,this.object,this._sampleId,s))}_Str_17428(e){let s=2*e;return s>t.HIGHEST_SEMITONE&&(s=Math.min(0,t.LOWEST_SEMITONE+(s-t.HIGHEST_SEMITONE-1))),this._noPitch?1:Math.pow(2,s/12)}}return t.HIGHEST_SEMITONE=12,t.LOWEST_SEMITONE=-12,t.STATE_UNINITIALIZED=-1,t})(),rr=(()=>{class t extends vi{getEventTypes(){const t=[oi.a.STICKIE,k.STICKIE];return this.mergeTypes(super.getEventTypes(),t)}initialize(t){super.initialize(t),this.updateColor(),this.object&&this.object.model.setValue(At.a.FURNITURE_IS_STICKIE,"")}processUpdateMessage(t){super.processUpdateMessage(t),t instanceof pt&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new oi.a(oi.a.STICKIE,this.object)),this.updateColor()}updateColor(){if(!this.object)return;const e=this.object.model.getValue(At.a.FURNITURE_DATA);let s=t.STICKIE_COLORS.indexOf(e);s<0&&(s=3),this.object.model.setValue(At.a.FURNITURE_COLOR,s+1)}mouseEvent(t,e){if(t&&e&&this.object)switch(t.type){case h.a.DOUBLE_CLICK:return void this.useObject();default:super.mouseEvent(t,e)}}useObject(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new k(k.STICKIE,this.object))}}return t.STICKIE_COLORS=["9CCEFF","FF9CFF","9CFF9C","FFFF33"],t})();class ar extends vi{getEventTypes(){const t=[oi.a.TROPHY];return this.mergeTypes(super.getEventTypes(),t)}mouseEvent(t,e){if(t&&e&&this.object){switch(t.type){case h.a.DOUBLE_CLICK:return void this.useObject()}super.mouseEvent(t,e)}}useObject(){this.eventDispatcher&&this.object&&this.eventDispatcher.dispatchEvent(new oi.a(oi.a.TROPHY,this.object))}}let or=(()=>{class t extends Mi{constructor(){super(),this._total=0,this._lastUpdate=0,this._interval=33}processUpdateMessage(t){if(super.processUpdateMessage(t),t instanceof dt){const e=t.data;if(!e)return;this._Str_24990(e.result)}}_Str_24990(e){if(this._total=e,!this._lastUpdate)return this.object.model.setValue(At.a.FURNITURE_VOTE_COUNTER_COUNT,e),void(this._lastUpdate=l.a.instance.time);if(this._total!==this._Str_8221){const e=Math.abs(this._total-this._Str_8221);this._interval=e*t._Str_3536>t._Str_5967?t._Str_5967/e:t._Str_3536,this._lastUpdate=l.a.instance.time}}update(t){if(super.update(t),this.object&&this._Str_8221!==this._total&&t>=this._lastUpdate+this._interval){const e=t-this._lastUpdate;let s=e/this._interval,n=1;this._total<this._Str_8221&&(n=-1),s>n*(this._total-this._Str_8221)&&(s=n*(this._total-this._Str_8221)),this.object.model.setValue(At.a.FURNITURE_VOTE_COUNTER_COUNT,this._Str_8221+n*s),this._lastUpdate=t-(e-s*this._interval)}}get _Str_8221(){return this.object.model.getValue(At.a.FURNITURE_VOTE_COUNTER_COUNT)}}return t._Str_3536=33,t._Str_5967=1e3,t})();var cr=s("VZrs");class lr extends Mi{processUpdateMessage(t){if(super.processUpdateMessage(t),this.object&&t instanceof dt){const e=t.data;e instanceof cr.a&&this.object.model.setValue(At.a.FURNITURE_VOTE_MAJORITY_RESULT,e.result)}}}class hr extends Mi{initialize(t){super.initialize(t);let e="";t.maskType&&""!==t.maskType&&t.maskType.length>0&&(e=t.maskType),this.object.model.setValue(At.a.FURNITURE_USES_PLANE_MASK,0),this.object.model.setValue(At.a.FURNITURE_PLANE_MASK_TYPE,e)}}class ur extends vi{getEventTypes(){const t=[Qn.RODRE_URL_PREFIX];return this.mergeTypes(super.getEventTypes(),t)}update(t){super.update(t),this.object.model.getValue(At.a.SESSION_URL_PREFIX)||this.eventDispatcher.dispatchEvent(new Qn(Qn.RODRE_URL_PREFIX,this.object))}get widget(){return Ai.a.YOUTUBE}}class _r extends Ei{constructor(){super(),this._selected=!1,this._reportedLocation=null,this._postureIndex=0,this._gestureIndex=0,this._headDirectionDelta=0,this._directions=[],this._talkingEndTimestamp=0,this._gestureEndTimestamp=0,this._expressionEndTimestamp=0}getEventTypes(){const t=[o.CLICK,si.POSITION_CHANGED];return this.mergeTypes(super.getEventTypes(),t)}initialize(t){if(!t)return;const e=this.object&&this.object.model;if(!e)return;const s=t.directions;if(s&&s.length){for(const t of s)this._directions.push(t);this._directions.sort((t,e)=>t-e)}e.setValue(At.a.PET_ALLOWED_DIRECTIONS,this._directions)}dispose(){this._selected&&this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new si(si.OBJECT_REMOVED,this.object)),this._directions=null,this._reportedLocation=null}update(t){if(super.update(t),this._selected&&this.object&&this.eventDispatcher){const t=this.object.getLocation();this._reportedLocation&&this._reportedLocation.x===t.x&&this._reportedLocation.y===t.y&&this._reportedLocation.z===t.z||(this._reportedLocation||(this._reportedLocation=new m.a),this._reportedLocation.assign(t),this.eventDispatcher.dispatchEvent(new si(si.POSITION_CHANGED,this.object)))}this.object&&this.object.model&&this.updateModel(t,this.object.model)}updateModel(t,e){this._gestureEndTimestamp>0&&t>this._gestureEndTimestamp&&(e.setValue(At.a.FIGURE_GESTURE,null),this._gestureEndTimestamp=0),this._talkingEndTimestamp>0&&t>this._talkingEndTimestamp&&(e.setValue(At.a.FIGURE_TALK,0),this._talkingEndTimestamp=0),this._expressionEndTimestamp>0&&t>this._expressionEndTimestamp&&(e.setValue(At.a.FIGURE_EXPRESSION,0),this._expressionEndTimestamp=0)}processUpdateMessage(t){if(!t||!this.object)return;super.processUpdateMessage(t);const e=this.object&&this.object.model;if(e)if(t instanceof ut)e.setValue(At.a.HEAD_DIRECTION,t.headDirection);else{if(t instanceof Q){const s=new A.a(t.figure);return e.setValue(At.a.FIGURE,t.figure),e.setValue(At.a.RACE,t.subType),e.setValue(At.a.PET_PALETTE_INDEX,s.paletteId),e.setValue(At.a.PET_COLOR,s.color),e.setValue(At.a.PET_TYPE,s.typeId),e.setValue(At.a.PET_CUSTOM_LAYER_IDS,s.customLayerIds),e.setValue(At.a.PET_CUSTOM_PARTS_IDS,s.customPartIds),e.setValue(At.a.PET_CUSTOM_PALETTE_IDS,s.customPaletteIds),void e.setValue(At.a.PET_IS_RIDING,t.isRiding?1:0)}if(t instanceof at)e.setValue(At.a.FIGURE_POSTURE,t.postureType);else{if(t instanceof z)return e.setValue(At.a.FIGURE_TALK,1),void(this._talkingEndTimestamp=this.time+1e3*t.numberOfWords);if(!(t instanceof ct))return t instanceof nt?(e.setValue(At.a.FIGURE_GESTURE,t.gesture),void(this._gestureEndTimestamp=this.time+3e3)):t instanceof ci?(this._selected=t.selected,void(this._reportedLocation=null)):void 0;e.setValue(At.a.FIGURE_SLEEP,t.isSleeping?1:0)}}}mouseEvent(t,e){let s=null;switch(t.type){case h.a.MOUSE_CLICK:s=o.CLICK;break;case h.a.DOUBLE_CLICK:break;case h.a.MOUSE_DOWN:this.object.model.getValue(At.a.PET_TYPE)==Us.a.MONSTERPLANT&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new o(o.MOUSE_DOWN,this.object,t._Str_3463,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown))}s&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new o(s,this.object,t._Str_3463,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown))}}var dr=s("z3Rz"),gr=s("AUxQ"),mr=s("QzjD");class pr extends fi{constructor(){super(),this._planeParser=new Ze.a,this._planeBitmapMaskParser=new qe,this._color=16777215,this._Str_3576=255,this._Str_14932=16777215,this._Str_17003=255,this._Str_11287=16777215,this._Str_16460=255,this._Str_9785=0,this._Str_17191=1500,this._lastHoleUpdate=0,this._needsMapUpdate=!1}getEventTypes(){const t=[o.MOUSE_MOVE,o.CLICK];return this.mergeTypes(super.getEventTypes(),t)}dispose(){super.dispose(),this._planeParser&&(this._planeParser.dispose(),this._planeParser=null),this._planeBitmapMaskParser&&(this._planeBitmapMaskParser.dispose(),this._planeBitmapMaskParser=null)}initialize(t){t&&this.object&&t instanceof mr.a&&this._planeParser.initializeFromMapData(t)&&(this.object.model.setValue(At.a.ROOM_MAP_DATA,t),this.object.model.setValue(At.a.ROOM_BACKGROUND_COLOR,16777215),this.object.model.setValue(At.a.ROOM_FLOOR_VISIBILITY,1),this.object.model.setValue(At.a.ROOM_WALL_VISIBILITY,1),this.object.model.setValue(At.a.ROOM_LANDSCAPE_VISIBILITY,1))}update(t){if(super.update(t),this._Str_24703(t),this._needsMapUpdate){if(this._lastHoleUpdate&&t-this._lastHoleUpdate<5)return;const e=this.object&&this.object.model;if(e){const s=this._planeParser.getMapData();e.setValue(At.a.ROOM_MAP_DATA,s),e.setValue(At.a.ROOM_FLOOR_HOLE_UPDATE_TIME,t),this._planeParser.initializeFromMapData(s)}this._lastHoleUpdate=0,this._needsMapUpdate=!1}}_Str_24703(t){if(!this.object||!this._Str_9785)return;let e=this._color,s=this._Str_3576;if(t-this._Str_9785>=this._Str_17191)e=this._Str_11287,s=this._Str_16460,this._Str_9785=0;else{let n=this._Str_14932>>16&255,i=this._Str_14932>>8&255,r=255&this._Str_14932;const a=(t-this._Str_9785)/this._Str_17191;n+=((this._Str_11287>>16&255)-n)*a,i+=((this._Str_11287>>8&255)-i)*a,r+=((255&this._Str_11287)-r)*a,e=(n<<16)+(i<<8)+r,s=this._Str_17003+(this._Str_16460-this._Str_17003)*a,this._color=e,this._Str_3576=s}let n=dr.a._Str_22130(e);n=(16776960&n)+s,e=dr.a._Str_13949(n),this.object.model&&this.object.model.setValue(At.a.ROOM_BACKGROUND_COLOR,e)}processUpdateMessage(t){if(!t||!this.object)return;const e=this.object.model;e&&(t instanceof Rt?this.onObjectRoomUpdateMessage(t,e):t instanceof bt?this.onObjectRoomMaskUpdateMessage(t,e):t instanceof It?this.onObjectRoomPlaneVisibilityUpdateMessage(t,e):t instanceof vt?this.onObjectRoomPlanePropertyUpdateMessage(t,e):t instanceof St?this.onObjectRoomFloorHoleUpdateMessage(t,e):t instanceof Et?this.onObjectRoomColorUpdateMessage(t,e):t instanceof gr.a&&this.onObjectRoomMapUpdateMessage(t))}onObjectRoomUpdateMessage(t,e){switch(t.type){case Rt.ROOM_FLOOR_UPDATE:return void e.setValue(At.a.ROOM_FLOOR_TYPE,t.value);case Rt.ROOM_WALL_UPDATE:return void e.setValue(At.a.ROOM_WALL_TYPE,t.value);case Rt.ROOM_LANDSCAPE_UPDATE:return void e.setValue(At.a.ROOM_LANDSCAPE_TYPE,t.value)}}onObjectRoomMaskUpdateMessage(t,e){let s=null,n=!1;switch(t.type){case bt.ADD_MASK:s=ze.WINDOW,t.maskCategory===bt.HOLE&&(s=ze.HOLE),this._planeBitmapMaskParser.addMask(t.maskId,t.maskType,t.maskLocation,s),n=!0;break;case bt._Str_10260:n=this._planeBitmapMaskParser._Str_23574(t.maskId)}n&&e.setValue(At.a.ROOM_PLANE_MASK_XML,this._planeBitmapMaskParser._Str_5598())}onObjectRoomPlaneVisibilityUpdateMessage(t,e){let s=0;switch(t.visible&&(s=1),t.type){case It.FLOOR_VISIBILITY:return void e.setValue(At.a.ROOM_FLOOR_VISIBILITY,s);case It.WALL_VISIBILITY:return e.setValue(At.a.ROOM_WALL_VISIBILITY,s),void e.setValue(At.a.ROOM_LANDSCAPE_VISIBILITY,s)}}onObjectRoomPlanePropertyUpdateMessage(t,e){switch(t.type){case vt.FLOOR_THICKNESS:return void e.setValue(At.a.ROOM_FLOOR_THICKNESS,t.value);case vt.WALL_THICKNESS:return void e.setValue(At.a.ROOM_WALL_THICKNESS,t.value)}}onObjectRoomFloorHoleUpdateMessage(t,e){switch(t.type){case St.ADD:return this._planeParser.addFloorHole(t.id,t.x,t.y,t.width,t.height),void(this._needsMapUpdate=!0);case St.REMOVE:return this._planeParser.removeFloorHole(t.id),void(this._needsMapUpdate=!0)}this._lastHoleUpdate=this.time}onObjectRoomColorUpdateMessage(t,e){t&&e&&(this._Str_14932=this._color,this._Str_17003=this._Str_3576,this._Str_11287=t.color,this._Str_16460=t.light,this._Str_9785=this.time,this._Str_17191=1500,e.setValue(At.a.ROOM_COLORIZE_BG_ONLY,t.backgroundOnly))}onObjectRoomMapUpdateMessage(t){t&&t.mapData&&(this.object.model.setValue(At.a.ROOM_MAP_DATA,t.mapData),this.object.model.setValue(At.a.ROOM_FLOOR_HOLE_UPDATE_TIME,this.time),this._planeParser.initializeFromMapData(t.mapData))}mouseEvent(t,e){if(!(t&&e&&this.object&&this.object.model))return;const s=t.spriteTag;let i=0;if(s&&s.indexOf("@")>=0&&(i=parseInt(s.substr(s.indexOf("@")+1))),i<1||i>this._planeParser.planeCount)return void(t.type===h.a.ROLL_OUT&&this.object.model.setValue(At.a.ROOM_SELECTED_PLANE,0));i--;let r=null;const a=this._planeParser.getPlaneLocation(i),c=this._planeParser.getPlaneLeftSide(i),l=this._planeParser.getPlaneRightSide(i),u=this._planeParser.getPlaneNormalDirection(i),_=this._planeParser.getPlaneType(i);if(null==a||null==c||null==l||null==u)return;const d=c.length,g=l.length;if(0==d||0==g)return;const p=new n.Point(t.screenX,t.screenY);if(r=e.getPlanePosition(p,a,c,l),!r)return void this.object.model.setValue(At.a.ROOM_SELECTED_PLANE,0);const f=m.a.product(c,r.x/d);f.add(m.a.product(l,r.y/g)),f.add(a);const E=f.x,S=f.y,b=f.z;if(!(r.x>=0&&r.x<d&&r.y>=0&&r.y<g))return void this.object.model.setValue(At.a.ROOM_SELECTED_PLANE,0);this.object.model.setValue(At.a.ROOM_SELECTED_X,E),this.object.model.setValue(At.a.ROOM_SELECTED_Y,S),this.object.model.setValue(At.a.ROOM_SELECTED_Z,b),this.object.model.setValue(At.a.ROOM_SELECTED_PLANE,i+1);let v=null;switch(t.type===h.a.MOUSE_MOVE||t.type===h.a.ROLL_OVER?v=o.MOUSE_MOVE:t.type===h.a.MOUSE_CLICK&&(v=o.CLICK),t.type){case h.a.MOUSE_MOVE:case h.a.ROLL_OVER:case h.a.MOUSE_CLICK:{let e=null;if(_===Xe.a.PLANE_FLOOR)e=new ri(v,this.object,t._Str_3463,E,S,b,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown);else if(_===Xe.a.PLANE_WALL||_===Xe.a.PLANE_LANDSCAPE){let s=90;u&&(s=u.x+90,s>360&&(s-=360)),e=new ai(v,this.object,t._Str_3463,a,c,l,c.length*r.x/d,l.length*r.y/g,s,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown)}return void(this.eventDispatcher&&this.eventDispatcher.dispatchEvent(e))}}}}class fr extends fi{initialize(t){this.object&&(this.object.model.setValue(At.a.FURNITURE_ALPHA_MULTIPLIER,1),this.object.setState(1,0))}processUpdateMessage(t){if(super.processUpdateMessage(t),t instanceof ui&&this.object)switch(t.type){case ui.ENABLED:return void this.object.setState(0,0);case ui.DISABLED:return void this.object.setState(1,0)}}}let Er=(()=>{class t extends fi{constructor(){super(),this._lastEventId=null,this._isHidden=!1}initialize(e){this.object&&(this.object.model.setValue(At.a.FURNITURE_ALPHA_MULTIPLIER,1),this.object.setState(t.CURSOR_HIDDEN_STATE,0))}processUpdateMessage(e){e instanceof hi&&(this._lastEventId&&this._lastEventId===e._Str_20637||(e.toggleVisibility&&(this._isHidden=!this._isHidden),super.processUpdateMessage(e),this.object&&(this._isHidden?this.object.setState(t.CURSOR_HIDDEN_STATE,0):e.visible?(this.object.model.setValue(At.a.TILE_CURSOR_HEIGHT,e.height),this.object.setState(e.height>.8?t.CURSOR_HEIGHT_STATE:t.CURSOR_VISIBLE_STATE)):this.object.setState(t.CURSOR_HIDDEN_STATE,0)),this._lastEventId=e._Str_20637))}}return t.CURSOR_VISIBLE_STATE=0,t.CURSOR_HIDDEN_STATE=1,t.CURSOR_HEIGHT_STATE=6,t})(),Sr=(()=>{class t{}return t.FURNITURE_BASIC="furniture_basic",t.FURNITURE_MULTISTATE="furniture_multistate",t.FURNITURE_MULTIHEIGHT="furniture_multiheight",t.FURNITURE_RANDOMSTATE="furniture_randomstate",t.FURNITURE_PLACEHOLDER="furniture_placeholder",t.FURNITURE_CREDIT="furniture_credit",t.FURNITURE_STICKIE="furniture_stickie",t.FURNITURE_PRESENT="furniture_present",t.FURNITURE_TROPHY="furniture_trophy",t.FURNITURE_ECOTRON_BOX="furniture_ecotron_box",t.FURNITURE_DICE="furniture_dice",t.FURNITURE_HOCKEY_SCORE="furniture_hockey_score",t.FURNITURE_HABBOWHEEL="furniture_habbowheel",t.FURNITURE_ONE_WAY_DOOR="furniture_one_way_door",t.FURNITURE_PLANET_SYSTEM="furniture_planet_system",t.FURNITURE_WINDOW="furniture_window",t.FURNITURE_EXTERNAL_IMAGE_WALLITEM="furniture_external_image_wallitem",t.FURNITURE_ROOMDIMMER="furniture_roomdimmer",t.FURNITURE_SOUND_MACHINE="furniture_sound_machine",t.FURNITURE_JUKEBOX="furniture_jukebox",t.FURNITURE_CRACKABLE="furniture_crackable",t.FURNITURE_PUSHABLE="furniture_pushable",t.FURNITURE_CLOTHING_CHANGE="furniture_clothing_change",t.FURNITURE_COUNTER_CLOCK="furniture_counter_clock",t.FURNITURE_SCORE="furniture_score",t.FURNITURE_ES="furniture_es",t.FURNITURE_FIREWORKS="furniture_fireworks",t.FURNITURE_SONG_DISK="furniture_song_disk",t.FURNITURE_BB="furniture_bb",t.FURNITURE_BG="furniture_bg",t.FURNITURE_WELCOME_GIFT="furniture_welcome_gift",t.FURNITURE_FLOOR_HOLE="furniture_floor_hole",t.FURNITURE_MANNEQUIN="furniture_mannequin",t.FURNITURE_GUILD_CUSTOMIZED="furniture_guild_customized",t.FURNITURE_GROUP_FORUM_TERMINAL="furniture_group_forum_terminal",t.FURNITURE_PET_CUSTOMIZATION="furniture_pet_customization",t.FURNITURE_CUCKOO_CLOCK="furniture_cuckoo_clock",t.FURNITURE_VOTE_COUNTER="furniture_vote_counter",t.FURNITURE_VOTE_MAJORITY="furniture_vote_majority",t.FURNITURE_SOUNDBLOCK="furniture_soundblock",t.FURNITURE_RANDOM_TELEPORT="furniture_random_teleport",t.FURNITURE_MONSTERPLANT_SEED="furniture_monsterplant_seed",t.FURNITURE_PURCHASABLE_CLOTHING="furniture_purchasable_clothing",t.FURNITURE_BACKGROUND_COLOR="furniture_background_color",t.FURNITURE_MYSTERYBOX="furniture_mysterybox",t.FURNITURE_EFFECTBOX="furniture_effectbox",t.FURNITURE_MYSTERYTROPHY="furniture_mysterytrophy",t.FURNITURE_ACHIEVEMENT_RESOLUTION="furniture_achievement_resolution",t.FURNITURE_LOVELOCK="furniture_lovelock",t.FURNITURE_WILDWEST_WANTED="furniture_wildwest_wanted",t.FURNITURE_HWEEN_LOVELOCK="furniture_hween_lovelock",t.FURNITURE_BADGE_DISPLAY="furniture_badge_display",t.FURNITURE_HIGH_SCORE="furniture_high_score",t.FURNITURE_INTERNAL_LINK="furniture_internal_link",t.FURNITURE_CUSTOM_STACK_HEIGHT="furniture_custom_stack_height",t.FURNITURE_YOUTUBE="furniture_youtube",t.FURNITURE_RENTABLE_SPACE="furniture_rentable_space",t.FURNITURE_CHANGE_STATE_WHEN_STEP_ON="furniture_change_state_when_step_on",t.FURNITURE_VIMEO="furniture_vimeo",t.FURNITURE_EDITABLE_INTERNAL_LINK="furniture_editable_internal_link",t.FURNITURE_EDITABLE_ROOM_LINK="furniture_editable_room_link",t.FURNITURE_CRAFTING_GIZMO="furniture_crafting_gizmo",t.ROOM="room",t.USER="user",t.BOT="bot",t.RENTABLE_BOT="rentable_bot",t.PET="pet",t.TILE_CURSOR="tile_cursor",t.SELECTION_ARROW="selection_arrow",t.GAME_SNOWBALL="game_snowball",t.GAME_SNOWSPLASH="game_snowsplash",t})();class br{constructor(){this._events=new pi.a,this._cachedEvents=new Map,this._registeredEvents=new Map,this._functions=[]}getLogic(t){const e=this.getLogicType(t);if(!e)return null;const s=new e;if(!s)return null;if(s.eventDispatcher=this._events,!this._cachedEvents.get(t)){this._cachedEvents.set(t,!0);const e=s.getEventTypes();for(const t of e)t&&this.registerEventType(t)}return s}registerEventType(t){if(!this._registeredEvents.get(t)){this._registeredEvents.set(t,!0);for(const e of this._functions)e&&this._events.addEventListener(t,e)}}registerEventFunction(t){if(t&&!(this._functions.indexOf(t)>=0)){this._functions.push(t);for(const e of this._registeredEvents.keys())e&&this._events.addEventListener(e,t)}}removeEventFunction(t){if(!t)return;const e=this._functions.indexOf(t);if(-1!==e){this._functions.splice(e,1);for(const e of this._registeredEvents.keys())e&&this._events.removeEventListener(e,t)}}getLogicType(t){if(!t)return null;let e=null;switch(t){case Sr.ROOM:e=pr;break;case Sr.TILE_CURSOR:e=Er;break;case Sr.SELECTION_ARROW:e=fr;break;case Sr.USER:case Sr.BOT:case Sr.RENTABLE_BOT:e=Si;break;case Sr.PET:e=_r;break;case Sr.FURNITURE_BASIC:e=vi;break;case Sr.FURNITURE_BADGE_DISPLAY:e=Ii;break;case Sr.FURNITURE_CHANGE_STATE_WHEN_STEP_ON:e=Ri;break;case Sr.FURNITURE_COUNTER_CLOCK:e=Ti;break;case Sr.FURNITURE_CRACKABLE:e=Oi;break;case Sr.FURNITURE_CREDIT:e=Ci;break;case Sr.FURNITURE_CUSTOM_STACK_HEIGHT:e=wi;break;case Sr.FURNITURE_DICE:e=Ui;break;case Sr.FURNITURE_EDITABLE_INTERNAL_LINK:e=Di;break;case Sr.FURNITURE_EDITABLE_ROOM_LINK:e=Ni;break;case Sr.FURNITURE_EXTERNAL_IMAGE_WALLITEM:e=Li;break;case Sr.FURNITURE_FIREWORKS:e=Pi;break;case Sr.FURNITURE_FLOOR_HOLE:e=xi;break;case Sr.FURNITURE_GUILD_CUSTOMIZED:e=ki;break;case Sr.FURNITURE_HIGH_SCORE:e=Wi;break;case Sr.FURNITURE_HOCKEY_SCORE:e=Bi;break;case Sr.FURNITURE_ES:e=Vi;break;case Sr.FURNITURE_MANNEQUIN:e=Ki;break;case Sr.FURNITURE_MULTIHEIGHT:e=Hi;break;case Sr.FURNITURE_MULTISTATE:e=Mi;break;case Sr.FURNITURE_ONE_WAY_DOOR:e=ji;break;case Sr.FURNITURE_PET_CUSTOMIZATION:e=zi;break;case Sr.FURNITURE_PRESENT:e=Yi;break;case Sr.FURNITURE_PURCHASABLE_CLOTHING:e=qi;break;case Sr.FURNITURE_PUSHABLE:e=Xi;break;case Sr.FURNITURE_BACKGROUND_COLOR:e=Qi;break;case Sr.FURNITURE_BG:e=tr;break;case Sr.FURNITURE_BB:e=er;break;case Sr.FURNITURE_ROOMDIMMER:e=sr;break;case Sr.FURNITURE_SCORE:e=nr;break;case Sr.FURNITURE_SOUNDBLOCK:e=ir;break;case Sr.FURNITURE_STICKIE:e=rr;break;case Sr.FURNITURE_TROPHY:e=ar;break;case Sr.FURNITURE_VOTE_COUNTER:e=or;break;case Sr.FURNITURE_VOTE_MAJORITY:e=lr;break;case Sr.FURNITURE_WINDOW:e=hr;break;case Sr.FURNITURE_LOVELOCK:e=Fi;break;case Sr.FURNITURE_YOUTUBE:e=ur;break;default:e=vi}return e||(i.a.log("Unknown Logic: "+t),null)}get events(){return this._events}}class vr{constructor(t,e,s,n,i,r,a,o=NaN,c=-1,l=0,h=0,u="",_=!0,d=!0,g=-1){this._id=t,this._typeId=e,this._type=s,this._state=r,this._data=a,this._extra=o,this._expiryTime=c,this._usagePolicy=l,this._ownerId=h,this._ownerName=u,this._synchronized=_,this._realRoomObject=d,this._sizeZ=g,this._location=new m.a,this._direction=new m.a,this._location.assign(n),this._direction.assign(i)}get id(){return this._id}get typeId(){return this._typeId}get type(){return this._type}get location(){return this._location}get direction(){return this._direction}get state(){return this._state}get data(){return this._data}get extra(){return this._extra}get expiryTime(){return this._expiryTime}get usagePolicy(){return this._usagePolicy}get ownerId(){return this._ownerId}get ownerName(){return this._ownerName}get synchronized(){return this._synchronized}get realRoomObject(){return this._realRoomObject}get sizeZ(){return this._sizeZ}}class Ir{constructor(t,e){this._roomId=t,this._data=e,this._floorType=null,this._wallType=null,this._landscapeType=null}get roomId(){return this._roomId}get data(){return this._data}get floorType(){return this._floorType}set floorType(t){this._floorType=t}get wallType(){return this._wallType}set wallType(t){this._wallType=t}get landscapeType(){return this._landscapeType}set landscapeType(t){this._landscapeType=t}}var Rr=s("SBJG");let Tr=(()=>{class t{constructor(){this._targetId=-1,this._targetCategory=-2,this._targetLoc=null,this._moveDistance=0,this._previousMoveSpeed=0,this._maintainPreviousMoveSpeed=!1,this._currentLoc=null,this._limitedLocX=!1,this._limitedLocY=!1,this._centeredLocX=!1,this._centeredLocY=!1,this._screenWd=0,this._screenHt=0,this._scale=0,this._roomWd=0,this._roomHt=0,this._geometryUpdateId=-1,this._scaleChanged=!1,this._targetObjectLoc=new m.a}get location(){return this._currentLoc}get _Str_10760(){return this._targetId}set _Str_10760(t){this._targetId=t}get _Str_16562(){return this._targetCategory}set _Str_16562(t){this._targetCategory=t}get _Str_16185(){return this._targetObjectLoc}set _Str_16185(t){this._targetObjectLoc.assign(t)}get _Str_10235(){return this._limitedLocX}set _Str_10235(t){this._limitedLocX=t}get _Str_10446(){return this._limitedLocY}set _Str_10446(t){this._limitedLocY=t}get _Str_8564(){return this._centeredLocX}set _Str_8564(t){this._centeredLocX=t}get _Str_8690(){return this._centeredLocY}set _Str_8690(t){this._centeredLocY=t}get _Str_7609(){return this._screenWd}set _Str_7609(t){this._screenWd=t}get _Str_7902(){return this._screenHt}set _Str_7902(t){this._screenHt=t}get scale(){return this._scale}set scale(t){this._scale!=t&&(this._scale=t,this._scaleChanged=!0)}get _Str_18975(){return this._roomWd}set _Str_18975(t){this._roomWd=t}get _Str_15953(){return this._roomHt}set _Str_15953(t){this._roomHt=t}get _Str_16377(){return this._geometryUpdateId}set _Str_16377(t){this._geometryUpdateId=t}get _Str_12536(){return null!=this._targetLoc&&null!=this._currentLoc}set target(t){let e;null==this._targetLoc&&(this._targetLoc=new m.a),this._targetLoc.x==t.x&&this._targetLoc.y==t.y&&this._targetLoc.z==t.z||(this._targetLoc.assign(t),e=m.a.dif(this._targetLoc,this._currentLoc),this._moveDistance=e.length,this._maintainPreviousMoveSpeed=!0)}dispose(){this._targetLoc=null,this._currentLoc=null}_Str_20685(t){null==this._currentLoc&&(this._currentLoc=new m.a,this._currentLoc.assign(t))}_Str_25467(t){null==this._currentLoc&&(this._currentLoc=new m.a),this._currentLoc.assign(t)}update(e,s){let n,i,r,a,o;if(this._followDuration>0&&null!=this._targetLoc&&null!=this._currentLoc){if(this._scaleChanged)return this._scaleChanged=!1,this._currentLoc=this._targetLoc,void(this._targetLoc=null);n=m.a.dif(this._targetLoc,this._currentLoc),n.length>this._moveDistance&&(this._moveDistance=n.length),n.length<=s?(this._currentLoc=this._targetLoc,this._targetLoc=null,this._previousMoveSpeed=0):(i=Math.sin(Math.PI*n.length/this._moveDistance),r=.5*s,a=this._moveDistance/t.MOVE_SPEED_DENOMINATOR,o=r+(a-r)*i,this._maintainPreviousMoveSpeed&&(o<this._previousMoveSpeed?(o=this._previousMoveSpeed,o>n.length&&(o=n.length)):this._maintainPreviousMoveSpeed=!1),this._previousMoveSpeed=o,n.divide(n.length),n.multiply(o),this._currentLoc=m.a.sum(this._currentLoc,n))}}reset(){this._geometryUpdateId=-1}_Str_19465(t){this._followDuration=t}}return t.MOVE_SPEED_DENOMINATOR=12,t})();class yr{constructor(t,e){this._tileObjectMap=new Map;let s=0;for(;s<e;)this._tileObjectMap.set(s,new Map),s++;this._width=t,this._height=e}clear(){for(const t of this._tileObjectMap.values())t&&t.clear();this._tileObjectMap.clear()}populate(t){this.clear();for(const e of t)this._Str_21192(e)}dispose(){this._tileObjectMap=null,this._width=0,this._height=0}_Str_19056(t,e){if(t>=0&&t<this._width&&e>=0&&e<this._height){const s=this._tileObjectMap.get(e);if(s)return s.get(t)}return null}_Str_23932(t,e,s){if(s.isReady){if(t>=0&&t<this._width&&e>=0&&e<this._height){const n=this._tileObjectMap.get(e);n&&n.set(t,s)}}else i.a.log("Assigning non initialized object to tile object map!")}_Str_21192(t){if(!t||!t.model||!t.isReady)return;const e=t.getLocation(),s=t.getDirection();if(!e||!s)return;let n=t.model.getValue(At.a.FURNITURE_SIZE_X),i=t.model.getValue(At.a.FURNITURE_SIZE_Y);n<1&&(n=1),i<1&&(i=1);const r=Math.trunc(s.x+45)%360/90;1!==r&&3!==r||([n,i]=[i,n]);let a=e.y;for(;a<e.y+i;){let s=e.x;for(;s<e.x+n;){const n=this._Str_19056(s,a);(!n||n!==t&&n.getLocation().z<=e.z)&&this._Str_23932(s,a,t),s++}a++}}}class Or{constructor(t){this._roomId=t,this._modelName=null,this._legacyGeometry=new Rr.a,this._tileObjectMap=null,this._roomCamera=new Tr,this._selectedObject=null,this._placedObject=null,this._furnitureStackingHeightMap=null,this._floorStack=new Map,this._wallStack=new Map,this._mouseButtonCursorOwners=[]}dispose(){}setModelName(t){this._modelName=t}setSelectedObject(t){this._selectedObject&&this._selectedObject.dispose(),this._selectedObject=t}setPlacedObject(t){this._placedObject&&this._placedObject.dispose(),this._placedObject=t}setFurnitureStackingHeightMap(t){this._furnitureStackingHeightMap&&this._furnitureStackingHeightMap.dispose(),this._furnitureStackingHeightMap=t,this._tileObjectMap&&this._tileObjectMap.dispose(),this._furnitureStackingHeightMap&&(this._tileObjectMap=new yr(this._furnitureStackingHeightMap.width,this._furnitureStackingHeightMap.height))}addPendingFurnitureFloor(t){t&&(this._floorStack.delete(t.id),this._floorStack.set(t.id,t))}removePendingFunitureFloor(t){const e=this._floorStack.get(t);return e?(this._floorStack.delete(t),e):null}getPendingFurnitureFloor(t){const e=this._floorStack.get(t);return e?(this._floorStack.delete(t),e):null}getNextPendingFurnitureFloor(){if(!this._floorStack.size)return null;const t=this._floorStack.keys();return this.getPendingFurnitureFloor(t.next().value)}addPendingFurnitureWall(t){t&&(this._wallStack.delete(t.id),this._wallStack.set(t.id,t))}removePendingFurnitureWall(t){const e=this._wallStack.get(t);return e?(this._wallStack.delete(t),e):null}getPendingFurnitureWall(t){const e=this._wallStack.get(t);return e?(this._wallStack.delete(t),e):null}getNextPendingFurnitureWall(){if(!this._wallStack.size)return null;const t=this._wallStack.keys();return this.getPendingFurnitureWall(t.next().value)}_Str_16810(t){return-1===this._mouseButtonCursorOwners.indexOf(t)&&(this._mouseButtonCursorOwners.push(t),!0)}_Str_11959(t){const e=this._mouseButtonCursorOwners.indexOf(t);return e>-1&&(this._mouseButtonCursorOwners.splice(e,1),!0)}_Str_22598(){return this._mouseButtonCursorOwners.length>0}get roomId(){return this._roomId}get modelName(){return this._modelName}get legacyGeometry(){return this._legacyGeometry}get tileObjectMap(){return this._tileObjectMap}get roomCamera(){return this._roomCamera}get selectedObject(){return this._selectedObject}get placedObject(){return this._placedObject}get furnitureStackingHeightMap(){return this._furnitureStackingHeightMap}}class Cr{constructor(t,e){this._object=t,this._groupBadge=e}get object(){return this._object}get groupBadge(){return this._groupBadge}}let Ar=(()=>{class t{constructor(){this._Str_3008=0,this._Str_18433=0}static _Str_22230(e,s){const n=[];for(const i of e)if(i)if("boutique_mannequin1"===i.type&&0===i.name.indexOf("mannequin_")){const e=s.getRoomObject(s.activeRoomId,i.objectId,Ot.a.FLOOR);if(e){const s=e.visualization.getSpriteList();if(s)for(const e of s)e.x=e.x+(i.x+i.width/2+t._Str_16967),e.y=e.y+(i.y+i.height+t._Str_18197),e.z=e.z+i.z,n.push(e)}}else n.push(i);return n}static _Str_22564(t,e){return t.z<e.z?1:-1}static _Str_20789(t,e,s){return!0}static _Str_14110(t,e,s,n){const i=[];if(t.x==e.x?i.push(t,s,e,n):t.x==s.x?i.push(t,e,s,n):e.x<t.x&&e.y>t.y||e.x>t.x&&e.y<t.y?i.push(t,s,e,n):i.push(t,e,s,n),i[0].x<i[1].x){let t=i[0];i[0]=i[1],i[1]=t,t=i[2],i[2]=i[3],i[3]=t}if(i[0].y<i[2].y){let t=i[0];i[0]=i[2],i[2]=t,t=i[1],i[1]=i[3],i[3]=t}return i}_Str_4536(e,s,n,i){const r=[];let a=s.getSortableSpriteList();const o=n._Str_21072(n.activeRoomId,Ot.a.UNIT);for(const c of o)if(c.id!==i){const e=c.visualization.getSpriteList();if(e){let i=0,r=0;for(const t of a)if(t.name==="avatar_"+c.id){i=t.z,r=t.y+t.height-s.geometry.scale/4;break}const o=n.getRoomObjectScreenLocation(n.activeRoomId,c.id,Ot.a.UNIT,s.id);if(o){0===r&&(r=o.y);for(const n of e)n.x=n.x+(o.x-s.screenOffsetX),n.y=n.y+r,n.z=n.z+i,0!==n.name.indexOf("h_std_fx29_")&&0!==n.name.indexOf("h_std_fx185_")||(n.y=n.y+t._Str_18565),a.push(n)}}}a=t._Str_22230(a,n),a.sort(t._Str_22564);for(const c of a)null!==c.name&&c.name.length>0&&0!==c.name.indexOf("tile_cursor_")&&t._Str_20789(c,e,s)&&(i<0||c.objectId!=i)&&(r.push(this._Str_25132(c,e,s,n)),this._Str_6409||(this._Str_6409=c.z),this._Str_3008++);return JSON.stringify(r)}_Str_24177(t){return JSON.stringify(new Object)}_Str_25132(e,s,n,i){let r=[];const a={};let o=e.name;return-1!==e.name.indexOf("@")&&(r=e.name.split("@"),o=r[0]),a.name=o,a.x=e.x-s.x,a.y=e.y-s.y,a.x=a.x+n.screenOffsetX,a.y=a.y+n.screenOffsetY,a.z=e.z,e.alpha&&"255"!==e.alpha.toString()&&(a.alpha=e.alpha),e.flipH&&(a.flipH=e.flipH),e.skew&&(a.skew=e.skew),e.frame&&(a.frame=e.frame),e.color&&e.color.length>0&&(a.color=parseInt(e.color)),e.blendMode&&"normal"!==e.blendMode&&(a.blendMode=e.blendMode),0===o.indexOf("http")&&(a.width=e.width,a.height=e.height,this._Str_18433++,this._Str_18433>t._Str_17558&&(a.name="box")),e.posture&&(a.posture=e.posture),a}_Str_25196(e,s,i){const r=new n.Point(0,0),a=new n.Point(e.width,0),o=new n.Point(0,e.height),c=new n.Point(e.width,e.height),l=t._Str_14110(r,a,o,c);let h=0;i.length>0?(h=i[0].z,this._Str_6409&&(h=Math.max(this._Str_6409,h))):h=this._Str_6409?this._Str_6409:0,h+=1.776104*this._Str_3008+2.31743*i.length;const u=new Qe(null,s);return u.cornerPoints=l,u.z=h,u}_Str_25623(t,e,s){const n=new Map;let i=1;this._Str_6409&&(i+=this._Str_6409);for(const o of t)n.set(o.uniqueId,{plane:o,z:i});const r=e._Str_14588();r.sort((t,e)=>e.z-t.z),r.reverse();let a=[];for(const o of r){const t=o.sprite;if(t){const e=n.get(t.id);e&&(n.delete(t.id),e.z=o.z,a.push(e))}}return a=a.concat(Array.from(n.values())),a}_Str_22985(e,s,n,i){const r=[],a=n.getRoomObject(n.activeRoomId,Mr.ROOM_OBJECT_ID,Ot.a.ROOM).visualization;if(a){const o=s.geometry,c=this._Str_25623(a._Str_19113,s,n),h=l.a.instance.stage;for(const n of c){const i=n.plane,a=[],c=m.a.sum(i.location,i._Str_5424),l=o.getScreenPoint(i.location),u=o.getScreenPoint(c),_=o.getScreenPoint(m.a.sum(i.location,i._Str_4968)),d=o.getScreenPoint(m.a.sum(c,i._Str_4968));a.push(l,u,_,d);let g=0,p=0;for(const t of a)t.x+=h.width/2,t.y+=h.height/2,t.x+=s.screenOffsetX,t.y+=s.screenOffsetY,t.x+=-e.x,t.y+=-e.y,t.x<0?g--:t.x>=e.width&&g++,t.y<0?p--:t.y>=e.height&&p++;if(4===Math.abs(g)||4===Math.abs(p));else{const e=t._Str_14110(l,u,_,d);for(const t of i._Str_22136(o))t.cornerPoints=e,t.z=n.z,r.push(t)}}r.unshift(this._Str_25196(e,i,r))}return r}}return t._Str_16967=1,t._Str_18197=-16,t._Str_18565=-52,t._Str_17558=30,t})(),Mr=(()=>{class t extends r.a{constructor(t){super(),this._communication=t,this._sessionDataManager=null,this._roomSessionManager=null,this._roomManager=null,this._roomObjectEventHandler=new mi(this),this._roomMessageHandler=new Rn(this),this._roomContentLoader=new ws.a,this._ready=!1,this._roomContentLoaderReady=!1,this._activeRoomId=-1,this._activeRoomActiveCanvas=-1,this._roomInstanceDatas=new Map,this._roomDatas=new Map,this._roomRendererFactory=new O,this._visualizationFactory=new Ms,this._logicFactory=new br,this._activeRoomActiveCanvasMouseX=0,this._activeRoomActiveCanvasMouseY=0,this._activeRoomIsDragged=!1,this._activeRoomWasDragged=!1,this._activeRoomDragStartX=0,this._activeRoomDragStartY=0,this._activeRoomDragX=0,this._activeRoomDragY=0,this._skipFurnitureCreationForNextFrame=!1,this._mouseCursorUpdate=!1,this._imageObjectIdBank=null,this._imageCallbacks=new Map,this._thumbnailCallbacks=new Map,this._roomDraggingAlwaysCenters=!1,this._roomAllowsDragging=!0,this._badgeListenerObjects=new Map,this.runVisibilityUpdate=this.runVisibilityUpdate.bind(this),this.processRoomObjectEvent=this.processRoomObjectEvent.bind(this),this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.onRoomContentLoaderReadyEvent=this.onRoomContentLoaderReadyEvent.bind(this),this.onBadgeImageReadyEvent=this.onBadgeImageReadyEvent.bind(this)}onInit(){this._ready||(this._imageObjectIdBank=new C(1e3),this._thumbnailObjectIdBank=new C(1e3),this._logicFactory.registerEventFunction(this.processRoomObjectEvent),this._roomManager&&(this._roomManager.setContentLoader(this._roomContentLoader),this._roomManager.addUpdateCategory(Ot.a.FLOOR),this._roomManager.addUpdateCategory(Ot.a.WALL),this._roomManager.addUpdateCategory(Ot.a.UNIT),this._roomManager.addUpdateCategory(Ot.a.CURSOR),this._roomManager.addUpdateCategory(Ot.a.ROOM)),this._roomMessageHandler.setConnection(this._communication.connection),this._roomContentLoader.initialize(this.events),this._roomContentLoader.setSessionDataManager(this._sessionDataManager),this._roomContentLoader.setIconListener(this),this._roomSessionManager&&(this._roomSessionManager.events.addEventListener(N.a.STARTED,this.onRoomSessionEvent),this._roomSessionManager.events.addEventListener(N.a.ENDED,this.onRoomSessionEvent)),this.events.addEventListener(ws.a.LOADER_READY,this.onRoomContentLoaderReadyEvent),l.a.instance.ticker.add(this.update,this),document.addEventListener("visibilitychange",this.runVisibilityUpdate))}onDispose(){if(this._ready){for(const[t,e]of this._roomInstanceDatas)this.removeRoomInstance(t);document.removeEventListener("visibilitychange",this.runVisibilityUpdate),l.a.instance.ticker.remove(this.update,this),this._roomObjectEventHandler&&this._roomObjectEventHandler.dispose(),this._roomMessageHandler&&this._roomMessageHandler.dispose(),this._roomContentLoader&&this._roomContentLoader.dispose(),this.events.removeEventListener(ws.a.LOADER_READY,this.onRoomContentLoaderReadyEvent),this._roomSessionManager&&(this._roomSessionManager.events.removeEventListener(N.a.STARTED,this.onRoomSessionEvent),this._roomSessionManager.events.removeEventListener(N.a.ENDED,this.onRoomSessionEvent)),super.onDispose()}}onRoomSessionEvent(t){if(t instanceof N.a)switch(t.type){case N.a.STARTED:return void(this._roomMessageHandler&&this._roomMessageHandler.setRoomId(t.session.roomId));case N.a.ENDED:return void(this._roomMessageHandler&&(this._roomMessageHandler.clearRoomId(),this.removeRoomInstance(t.session.roomId)))}}onRoomContentLoaderReadyEvent(t){this._roomContentLoaderReady=!0,this._roomManager.init()}setActiveRoomId(t){this._activeRoomId=t}destroyRoom(t){this.removeRoomInstance(t)}getRoomInstance(t){return this._roomManager&&this._roomManager.getRoomInstance(this.getRoomId(t))||null}removeRoomInstance(t){this.getRoomInstance(t)&&this._roomManager&&this._roomManager.removeRoomInstance(this.getRoomId(t));const e=this._roomInstanceDatas.get(t);e&&(this._roomInstanceDatas.delete(e.roomId),e.dispose()),this.events.dispatchEvent(new x.a(x.a.DISPOSED,t))}createRoomInstance(t,e){let s="111",n="201",r="1";if(!this._ready){let a=this._roomDatas.get(t);return a&&(this._roomDatas.delete(t),s=a.floorType,n=a.wallType,r=a.landscapeType),a=new Ir(t,e),a.floorType=s,a.wallType=n,a.landscapeType=r,this._roomDatas.set(t,a),void i.a.log("Room Engine not initilized yet, can not create room. Room data stored for later initialization.")}if(!e)return void i.a.log("Room property messages received before floor height map, will initialize when floor height map received.");const a=this._roomDatas.get(t);a&&(this._roomDatas.delete(t),a.floorType&&(s=a.floorType),a.wallType&&(n=a.wallType),a.landscapeType&&(r=a.landscapeType)),this.setupRoomInstance(t,e,s,n,r,this.getRoomInstanceModelName(t))&&(this._roomAllowsDragging=!e.restrictsDragging,this.events.dispatchEvent(new x.a(x.a.INITIALIZED,t)))}setupRoomInstance(e,s,n,i,r,a){if(!this._ready||!this._roomManager)return;const o=this._roomManager.createRoomInstance(this.getRoomId(e));if(!o)return null;const c=o.createRoomObjectAndInitalize(t.ROOM_OBJECT_ID,t.ROOM_OBJECT_TYPE,Ot.a.ROOM);if(o.model.setValue(bn.a.ROOM_IS_PUBLIC,0),o.model.setValue(bn.a.ROOM_Z_SCALE,1),s&&(o.model.setValue(bn.a.RESTRICTS_DRAGGING,s.restrictsDragging),o.model.setValue(bn.a.RESTRICTS_SCALING,s.restrictsScaling),o.model.setValue(bn.a.RESTRICTED_SCALE,s.restrictedScale),s.dimensions)){const t=s.dimensions.minX,e=s.dimensions.maxX,n=s.dimensions.minY,i=s.dimensions.maxY;o.model.setValue(bn.a.ROOM_MIN_X,t),o.model.setValue(bn.a.ROOM_MAX_X,e),o.model.setValue(bn.a.ROOM_MIN_Y,n),o.model.setValue(bn.a.ROOM_MAX_Y,i);const r=423*t+671*e+913*n+7509*i;c&&c.model&&c.model.setValue(At.a.ROOM_RANDOM_SEED,r)}const l=c&&c.logic||null;if(l&&(l.initialize(s),n&&(l.processUpdateMessage(new Rt(Rt.ROOM_FLOOR_UPDATE,n)),o.model.setValue(At.a.ROOM_FLOOR_TYPE,n)),i&&(l.processUpdateMessage(new Rt(Rt.ROOM_WALL_UPDATE,i)),o.model.setValue(At.a.ROOM_WALL_TYPE,i)),r&&(l.processUpdateMessage(new Rt(Rt.ROOM_LANDSCAPE_UPDATE,r)),o.model.setValue(At.a.ROOM_LANDSCAPE_TYPE,r))),s&&s.doors.length){let t=0;for(;t<s.doors.length;){const e=s.doors[t];if(e){const s=e.x,n=e.y,i=e.z,r=e.dir,a=bt.DOOR,c="door_"+t,h=new m.a(s,n,i);l.processUpdateMessage(new bt(bt.ADD_MASK,c,a,h,bt.HOLE)),90!==r&&180!==r||(90===r&&(o.model.setValue(At.a.ROOM_DOOR_X,s-.5),o.model.setValue(At.a.ROOM_DOOR_Y,n)),180===r&&(o.model.setValue(At.a.ROOM_DOOR_X,s),o.model.setValue(At.a.ROOM_DOOR_Y,n-.5)),o.model.setValue(At.a.ROOM_DOOR_Z,i),o.model.setValue(At.a.ROOM_DOOR_DIR,r))}t++}}return o.createRoomObjectAndInitalize(t.CURSOR_OBJECT_ID,t.CURSOR_OBJECT_TYPE,Ot.a.CURSOR),o}getRoomInstanceDisplay(e,s,i,r,a){const o=this.getRoomInstance(e);if(!o)return null;let c=o.renderer;if(!c&&(c=this._roomRendererFactory.createRenderer(),!c))return null;c.roomObjectVariableAccurateZ=At.a.OBJECT_ACCURATE_Z_VALUE,o.setRenderer(c);const l=c.createCanvas(s,i,r,a);if(!l)return null;if(o.model.getValue(bn.a.RESTRICTS_SCALING)){let t=o.model.getValue(bn.a.RESTRICTED_SCALE);t||(t=1),l.setScale(t),l.restrictsScaling=!0}else l.restrictsScaling=!1;if(l.setMouseListener(this._roomObjectEventHandler),l.geometry){l.geometry.z_scale=o.model.getValue(bn.a.ROOM_Z_SCALE);const e=o.model.getValue(At.a.ROOM_DOOR_X),s=o.model.getValue(At.a.ROOM_DOOR_Y),i=o.model.getValue(At.a.ROOM_DOOR_Z),r=o.model.getValue(At.a.ROOM_DOOR_DIR),a=new m.a(e,s,i);let c=null;90===r&&(c=new m.a(-2e3,0,0)),180===r&&(c=new m.a(0,-2e3,0)),l.geometry.setDisplacement(a,c);const h=l.master;if(h){const e=n.Sprite.from(n.Texture.EMPTY);e.name=t.OVERLAY,e.interactive=!1,h.addChild(e)}}return l.master}setRoomInstanceRenderingCanvasMask(t,e,s){const n=this.getRoomInstanceRenderingCanvas(t,e);n&&n.setMask(s)}setRoomInstanceRenderingCanvasScale(t,e,s,n=null,i=null,r=!1,a=!1){const o=this.getRoomInstanceRenderingCanvas(t,e);if(o){if(o.restrictsScaling&&!r)return;o.setScale(s,n,i,r,a),this.events.dispatchEvent(new x.a(x.a.ROOM_ZOOMED,t))}}getRoomInstanceRenderingCanvas(t,e=-1){const s=this.getRoomInstance(t);if(!s)return null;const n=s.renderer;return n?(-1===e&&(e=this._activeRoomActiveCanvas),n.getCanvas(e)||null):null}getActiveRoomInstanceRenderingCanvas(){return this.getRoomInstanceRenderingCanvas(this._activeRoomId,this._activeRoomActiveCanvas)}getRoomInstanceRenderingCanvasOffset(t,e=-1){-1===e&&(e=this._activeRoomActiveCanvas);const s=this.getRoomInstanceRenderingCanvas(t,e);return s?new n.Point(s.screenOffsetX,s.screenOffsetY):null}setRoomInstanceRenderingCanvasOffset(t,e,s){const n=this.getRoomInstanceRenderingCanvas(t,e);return!(!n||!s||(n.screenOffsetX=s.x,n.screenOffsetY=s.y,0))}getRoomInstanceRenderingCanvasScale(t=-1e3,e=-1){-1e3===t&&(t=this._activeRoomId),-1===e&&(e=this._activeRoomActiveCanvas);const s=this.getRoomInstanceRenderingCanvas(t,e);return s?s.scale:1}initializeRoomInstanceRenderingCanvas(t,e,s,n){const i=this.getRoomInstanceRenderingCanvas(t,e);i&&i.initialize(s,n)}getRoomInstanceGeometry(t,e=-1){const s=this.getRoomInstance(t);if(!s)return null;const n=s.renderer;if(!n)return null;-1===e&&(e=this._activeRoomActiveCanvas);const i=n.getCanvas(e);return i?i.geometry:null}getRoomInstanceVariable(t,e){const s=this.getRoomInstance(t);return s&&s.model&&s.model.getValue(e)||null}updateRoomInstancePlaneVisibility(t,e,s=!0){const n=this.getRoomOwnObject(t);return!!n&&(n.processUpdateMessage(new It(It.WALL_VISIBILITY,e)),n.processUpdateMessage(new It(It.FLOOR_VISIBILITY,s)),!0)}updateRoomInstancePlaneThickness(t,e,s){const n=this.getRoomOwnObject(t);return!!n&&(n.processUpdateMessage(new vt(vt.WALL_THICKNESS,e)),n.processUpdateMessage(new vt(vt.FLOOR_THICKNESS,s)),!0)}updateRoomInstancePlaneType(t,e=null,s=null,n=null,i=!1){const r=this.getRoomOwnObject(t),a=this.getRoomInstance(t);if(!r){let i=this._roomDatas.get(t);return i||(i=new Ir(t,null),this._roomDatas.set(t,i)),e&&(i.floorType=e),s&&(i.wallType=s),n&&(i.landscapeType=n),!0}return e&&(a&&!i&&a.model.setValue(At.a.ROOM_FLOOR_TYPE,e),r.processUpdateMessage(new Rt(Rt.ROOM_FLOOR_UPDATE,e))),s&&(a&&!i&&a.model.setValue(At.a.ROOM_WALL_TYPE,s),r.processUpdateMessage(new Rt(Rt.ROOM_WALL_UPDATE,s))),n&&(a&&!i&&a.model.setValue(At.a.ROOM_LANDSCAPE_TYPE,n),r.processUpdateMessage(new Rt(Rt.ROOM_LANDSCAPE_UPDATE,n))),!0}_Str_17804(t,e,s,n){const i=this.getRoomOwnObject(t);if(!i||!i.logic)return!1;const r=new Et(Et.BACKGROUND_COLOR,e,s,n);return i.logic.processUpdateMessage(r),this.events.dispatchEvent(new P.a(t,e,s,n)),!0}addRoomInstanceFloorHole(t,e){if(e<0)return;const s=this.getRoomOwnObject(t),n=this.getRoomObjectFloor(t,e);if(s&&s.logic&&n&&n.model){const t=n.getLocation(),i=n.model.getValue(At.a.FURNITURE_SIZE_X),r=n.model.getValue(At.a.FURNITURE_SIZE_Y);s.processUpdateMessage(new St(St.ADD,e,t.x,t.y,i,r))}}removeRoomInstanceFloorHole(t,e){if(e<0)return;const s=this.getRoomOwnObject(t);s&&s.processUpdateMessage(new St(St.REMOVE,e))}setRoomEngineGameMode(t,e){const s=this.getRoomInstance(t);if(!s)return;const n=e?1:0;s.model.setValue(bn.a.IS_PLAYING_GAME,n),this.events.dispatchEvent(new x.a(0===n?x.a.NORMAL_MODE:x.a.GAME_MODE,t))}isRoomIdPlayingGame(t){const e=this.getRoomInstance(t);return!!e&&e.model.getValue(bn.a.IS_PLAYING_GAME)>0}isPlayingGame(){return this.isRoomIdPlayingGame(this._activeRoomId)}disableUpdate(t){t?l.a.instance.ticker.remove(this.update,this):(l.a.instance.ticker.remove(this.update,this),l.a.instance.ticker.add(this.update,this))}runUpdate(){this.update(1)}runVisibilityUpdate(){document.hidden||this.update(1,!0)}update(t,e=!1){this._roomManager&&(t=l.a.instance.time,d.a.turnVisualizationOn(),this.processPendingFurniture(),this._roomManager.update(t,e),this._Str_22919(t),this._mouseCursorUpdate&&this.setPointer(),d.a.turnVisualizationOff())}setPointer(){this._mouseCursorUpdate=!1;const t=this.getRoomInstanceData(this._activeRoomId);t&&t._Str_22598()?document.body.style.cursor="pointer":document.body.style.cursor="auto"}processPendingFurniture(){if(this._skipFurnitureCreationForNextFrame)return void(this._skipFurnitureCreationForNextFrame=!1);const t=(new Date).valueOf();for(const e of this._roomInstanceDatas.values()){if(!e)continue;let s=null,n=0,i=!1;for(;s=e.getNextPendingFurnitureFloor();)if(i=this.processPendingFurnitureFloor(e.roomId,s.id,s),!(++n%5)&&(new Date).valueOf()-t>=40){this._skipFurnitureCreationForNextFrame=!0;break}for(;!this._skipFurnitureCreationForNextFrame&&(s=e.getNextPendingFurnitureWall());)if(i=this.processPendingFurnitureWall(e.roomId,s.id,s),!(++n%5)&&(new Date).valueOf()-t>=40){this._skipFurnitureCreationForNextFrame=!0;break}if(i&&this._roomManager&&(this._roomManager.getRoomInstance(this.getRoomId(e.roomId)).hasUninitializedObjects()||this.objectsInitialized(e.roomId.toString())),this._skipFurnitureCreationForNextFrame)return}}onRoomEngineInitalized(t){if(t){this._ready=!0,this.events.dispatchEvent(new x.a(x.a.ENGINE_INITIALIZED,0));for(const t of this._roomDatas.values())t&&this.createRoomInstance(t.roomId,t.data)}}processPendingFurnitureFloor(t,e,s){if(!s){const n=this.getRoomInstanceData(t);if(n&&(s=n.getPendingFurnitureFloor(e)),!s)return!1}let n=s.type;n||(n=this.getFurnitureFloorName(s.typeId));const i=this.createRoomObjectFloor(t,e,n);if(!i)return!1;const r=i.model;if(r&&(r.setValue(At.a.FURNITURE_COLOR,this.getFurnitureFloorColorIndex(s.typeId)),r.setValue(At.a.FURNITURE_TYPE_ID,s.typeId),r.setValue(At.a.FURNITURE_REAL_ROOM_OBJECT,s.realRoomObject?1:0),r.setValue(At.a.FURNITURE_EXPIRY_TIME,s.expiryTime),r.setValue(At.a.FURNITURE_EXPIRTY_TIMESTAMP,l.a.instance.time),r.setValue(At.a.FURNITURE_USAGE_POLICY,s.usagePolicy),r.setValue(At.a.FURNITURE_OWNER_ID,s.ownerId),r.setValue(At.a.FURNITURE_OWNER_NAME,s.ownerName)),!this.updateRoomObjectFloor(t,e,s.location,s.direction,s.state,s.data,s.extra))return!1;if(s.sizeZ>=0&&!this.updateRoomObjectFloorHeight(t,e,s.sizeZ))return!1;this.events&&this.events.dispatchEvent(new F.a(F.a.ADDED,t,e,Ot.a.FLOOR));const a=this.getPlacedRoomObjectData(t);return a&&a.id===e&&a.category===Ot.a.FLOOR&&this.selectRoomObject(t,e,Ot.a.FLOOR),i.isReady&&s.synchronized&&this._Str_21543(t,i),!0}processPendingFurnitureWall(t,e,s){if(!s){const n=this.getRoomInstanceData(t);if(n&&(s=n.getPendingFurnitureWall(e)),!s)return!1}let n="";s.data&&(n=s.data.getLegacyString());let i=this.getFurnitureWallName(s.typeId,n);i||(i="");const r=this.createRoomObjectWall(t,e,i);if(!r)return!1;const a=r.model;if(a&&(a.setValue(At.a.FURNITURE_COLOR,this.getFurnitureWallColorIndex(s.typeId)),a.setValue(At.a.FURNITURE_TYPE_ID,s.typeId),a.setValue(At.a.FURNITURE_REAL_ROOM_OBJECT,s.realRoomObject?1:0),a.setValue(At.a.OBJECT_ACCURATE_Z_VALUE,1),a.setValue(At.a.FURNITURE_EXPIRY_TIME,s.expiryTime),a.setValue(At.a.FURNITURE_EXPIRTY_TIMESTAMP,l.a.instance.time),a.setValue(At.a.FURNITURE_USAGE_POLICY,s.usagePolicy),a.setValue(At.a.FURNITURE_OWNER_ID,s.ownerId),a.setValue(At.a.FURNITURE_OWNER_NAME,s.ownerName)),!this.updateRoomObjectWall(t,e,s.location,s.direction,s.state,n))return!1;this.events&&this.events.dispatchEvent(new F.a(F.a.ADDED,t,e,Ot.a.WALL));const o=this.getPlacedRoomObjectData(t);return o&&Math.abs(o.id)===e&&o.category===Ot.a.WALL&&this.selectRoomObject(t,e,Ot.a.WALL),!0}setRoomSessionOwnUser(t,e){if(!this._roomSessionManager)return;const s=this._roomSessionManager.getSession(t);s&&s.setOwnRoomIndex(e);const n=this.getRoomCamera(t);n&&(n._Str_10760=e,n._Str_16562=Ot.a.UNIT,n._Str_19465(this._Str_19549))}get _Str_19549(){return 1e3}_Str_22919(t){for(const s of this._roomInstanceDatas.values()){if(!s)continue;const e=s.roomCamera;if(!e)continue;const n=this.getRoomObject(s.roomId,e._Str_10760,e._Str_16562);n&&(s.roomId===this._activeRoomId&&this._activeRoomIsDragged||this._Str_25242(s.roomId,1,n.getLocation(),t))}const e=this.getRoomInstanceRenderingCanvas(this._activeRoomId,1);e&&this._activeRoomIsDragged&&(e.screenOffsetX=e.screenOffsetX+this._activeRoomDragX,e.screenOffsetY=e.screenOffsetY+this._activeRoomDragY,this._activeRoomDragX=0,this._activeRoomDragY=0)}_Str_25242(t,e,s,i){const r=this.getRoomInstanceRenderingCanvas(t,e),a=this.getRoomInstanceData(t);if(!r||!a||1!==r.scale)return;const o=r.geometry,c=a.roomCamera,l=this.getRoomInstance(t);if(!o||!c||!l)return;const h=this._Str_25261(t,e);if(!h)return;let u=Math.floor(s.z)+1;const _=Math.round(h.width),d=Math.round(h.height),g=this.getCanvasBoundingRectangle(e);if(g&&(g.right<0||g.bottom<0||g.left>=_||g.top>=d)&&c.reset(),c._Str_7609!==_||c._Str_7902!==d||c.scale!==o.scale||c._Str_16377!==o.updateId||!m.a.isEqual(s,c._Str_16185)||c._Str_12536){c._Str_16185=s;const t=new m.a;t.assign(s),t.x=Math.round(t.x),t.y=Math.round(t.y);const e=l.model.getValue(bn.a.ROOM_MIN_X)-.5,a=l.model.getValue(bn.a.ROOM_MIN_Y)-.5,p=l.model.getValue(bn.a.ROOM_MAX_X)+.5,f=l.model.getValue(bn.a.ROOM_MAX_Y)+.5,E=Math.round((e+p)/2),S=Math.round((a+f)/2),b=2;let v=new n.Point(t.x-E,t.y-S);const I=o.scale/Math.sqrt(2),R=I/2,T=new n.Matrix;T.rotate(-(o.direction.x+90)/180*Math.PI),v=T.apply(v),v.y=v.y*(R/I);const y=h.width/2/I-1,O=h.height/2/R-1;let C=0,A=0,M=0,w=0,U=o.getScreenPoint(new m.a(E,S,b));if(!U)return;if(U.x=U.x+Math.round(h.width/2),U.y=U.y+Math.round(h.height/2),!g)return void o.adjustLocation(new m.a(0,0),25);if(g.x+=-r.screenOffsetX,g.y+=-r.screenOffsetY,!(g.width>1&&g.height>1))return void o.adjustLocation(new m.a(-30,-30),25);C=(g.left-U.x-.25*o.scale)/I,M=(g.right-U.x+.25*o.scale)/I,A=(g.top-U.y-.5*o.scale)/R,w=(g.bottom-U.y+.5*o.scale)/R;let D=!1,N=!1,L=!1,P=!1;Math.round((M-C)*I)<h.width?(u=2,v.x=(M+C)/2,L=!0):(v.x>M-y&&(v.x=M-y,D=!0),v.x<C+y&&(v.x=C+y,D=!0)),Math.round((w-A)*R)<h.height?(u=2,v.y=(w+A)/2,P=!0):(v.y>w-O&&(v.y=w-O,N=!0),v.y<A+O&&(v.y=A+O,N=!0),N&&(v.y=v.y/(R/I))),T.invert(),v=T.apply(v),v.x=v.x+E,v.y=v.y+S;let x=.35,F=.2,k=.2;const W=10,B=10;if(k*_>100&&(k=100/_),x*d>150&&(x=150/d),F*d>150&&(F=150/d),c._Str_10235&&c._Str_7609==_&&c._Str_7902==d&&(k=0),c._Str_10446&&c._Str_7609==_&&c._Str_7902==d&&(x=0,F=0),h.width=h.width*(1-2*k),h.height=h.height*(1-(x+F)),h.width<W&&(h.width=W),h.height<B&&(h.height=B),x+F>0?(h.x+=-h.width/2,h.y+=F/(x+F)*-h.height):(h.x+=-h.width/2,h.y+=-h.height/2),U=o.getScreenPoint(t),!U)return;if(U){U.x=U.x+r.screenOffsetX,U.y=U.y+r.screenOffsetY,t.z=u,t.x=Math.round(2*v.x)/2,t.y=Math.round(2*v.y)/2,c.location||(o.location=t,c._Str_20685(this._Str_11555?new m.a(0,0,0):t));const e=o.getScreenPoint(t),s=new m.a(0,0,0);e&&(s.x=e.x,s.y=e.y),(U.x<h.left||U.x>h.right)&&!c._Str_8564||(U.y<h.top||U.y>h.bottom)&&!c._Str_8690||L&&!c._Str_8564&&c._Str_7609!=_||P&&!c._Str_8690&&c._Str_7902!=d||c._Str_18975!=g.width||c._Str_15953!=g.height||c._Str_7609!=_||c._Str_7902!=d?(c._Str_10235=D,c._Str_10446=N,c.target=this._Str_11555?s:t):(D||(c._Str_10235=!1),N||(c._Str_10446=!1))}c._Str_8564=L,c._Str_8690=P,c._Str_7609=_,c._Str_7902=d,c.scale=o.scale,c._Str_16377=o.updateId,c._Str_18975=g.width,c._Str_15953=g.height,this._sessionDataManager.isCameraFollowDisabled||c.update(i,this._Str_11555?8:.5),this._Str_11555?(r.screenOffsetX=-c.location.x,r.screenOffsetY=-c.location.y):o.adjustLocation(c.location,25)}else c._Str_10235=!1,c._Str_10446=!1,c._Str_8564=!1,c._Str_8690=!1}_Str_25261(t,e){const s=this.getRoomInstanceRenderingCanvas(t,e);return s?new n.Rectangle(0,0,s.width,s.height):null}getRoomObjectBoundingRectangle(t,e,s,n){const i=this.getRoomInstanceGeometry(t,n);if(!i)return null;const r=this.getRoomObject(t,e,s);if(!r)return null;const a=r.visualization;if(!a)return null;const o=a.getBoundingRectangle(),c=this.getRoomInstanceRenderingCanvas(t,n),l=c?c.scale:1,h=i.getScreenPoint(r.getLocation());return h?(o.x=o.x*l,o.y=o.y*l,o.width=o.width*l,o.height=o.height*l,h.x=h.x*l,h.y=h.y*l,o.x+=h.x,o.y+=h.y,c?(o.x+=c.width/2+c.screenOffsetX,o.y+=c.height/2+c.screenOffsetY,o):null):null}getCanvasBoundingRectangle(e){return this.getRoomObjectBoundingRectangle(this._activeRoomId,t.ROOM_OBJECT_ID,Ot.a.ROOM,e)}getFurnitureFloorName(t){return this._roomContentLoader?this._roomContentLoader.getFurnitureFloorNameForTypeId(t):null}getFurnitureWallName(t,e=null){return this._roomContentLoader?this._roomContentLoader.getFurnitureWallNameForTypeId(t,e):null}getFurnitureFloorColorIndex(t){return this._roomContentLoader?this._roomContentLoader.getFurnitureFloorColorIndex(t):null}getFurnitureWallColorIndex(t){return this._roomContentLoader?this._roomContentLoader.getFurnitureWallColorIndex(t):null}getRoomInstanceData(t){const e=this._roomInstanceDatas.get(t);if(e)return e;const s=new Or(t);return this._roomInstanceDatas.set(s.roomId,s),s}getRoomInstanceModelName(t){const e=this.getRoomInstanceData(t);return e?e.modelName:null}setRoomInstanceModelName(t,e){const s=this.getRoomInstanceData(t);s&&s.setModelName(e)}getRoomTileObjectMap(t){const e=this.getRoomInstanceData(t);return e?e.tileObjectMap:null}getCurrentRoomCamera(){return this.getRoomCamera(this._activeRoomId)}getRoomCamera(t){const e=this.getRoomInstanceData(t);return e?e.roomCamera:null}getSelectedRoomObjectData(t){const e=this.getRoomInstanceData(t);return e?e.selectedObject:null}setSelectedRoomObjectData(t,e){const s=this.getRoomInstanceData(t);if(!s)return null;s.setSelectedObject(e),e&&s.setPlacedObject(null)}getPlacedRoomObjectData(t){const e=this.getRoomInstanceData(t);return e?e.placedObject:null}setPlacedRoomObjectData(t,e){const s=this.getRoomInstanceData(t);if(!s)return null;s.setPlacedObject(e)}cancelRoomObjectPlacement(){this._roomObjectEventHandler&&this._roomObjectEventHandler.cancelRoomObjectPlacement(this._activeRoomId)}getFurnitureStackingHeightMap(t){const e=this.getRoomInstanceData(t);return e?e.furnitureStackingHeightMap:null}setFurnitureStackingHeightMap(t,e){const s=this.getRoomInstanceData(t);if(!s)return null;s.setFurnitureStackingHeightMap(e)}getLegacyWallGeometry(t){const e=this.getRoomInstanceData(t);return e?e.legacyGeometry:null}createRoomObjectAndInitialize(t,e,s,n){const i=this.getRoomInstance(t);return i?i.createRoomObjectAndInitalize(e,s,n):null}getTotalObjectsForManager(t,e){const s=this.getRoomInstance(t);return s?s.getTotalObjectsForManager(e):0}getRoomObject(e,s,n){if(!this._ready)return null;let i=this.getRoomId(e);return 0===e&&(i=t.TEMPORARY_ROOM),this.getObject(i,s,n)}getObject(t,e,s){let n=null;if(this._roomManager&&(n=this._roomManager.getRoomInstance(t)),!n)return null;let i=n.getRoomObject(e,s);if(!i)switch(s){case Ot.a.FLOOR:this.processPendingFurnitureFloor(this.getRoomIdFromString(t),e,null),i=n.getRoomObject(e,s);break;case Ot.a.WALL:this.processPendingFurnitureWall(this.getRoomIdFromString(t),e,null),i=n.getRoomObject(e,s)}return i}getRoomObjectByIndex(t,e,s){const n=this.getRoomInstance(t);return n?n.getRoomObjectByIndex(e,s):null}getRoomObjectCategoryForType(t){return t&&this._roomContentLoader?this._roomContentLoader.getCategoryForType(t):Ot.a.MINIMUM}getRoomObjectCursor(e){return this.getObject(this.getRoomId(e),t.CURSOR_OBJECT_ID,Ot.a.CURSOR)}getRoomObjectSelectionArrow(e){return this.getObject(this.getRoomId(e),t.ARROW_OBJECT_ID,Ot.a.CURSOR)}getRoomOwnObject(e){return this.getObject(this.getRoomId(e),t.ROOM_OBJECT_ID,Ot.a.ROOM)}getRoomObjectUser(t,e){return this.getObject(this.getRoomId(t),e,Ot.a.UNIT)}removeRoomObjectUser(t,e){return this.removeRoomObject(t,e,Ot.a.UNIT)}createRoomObjectUser(t,e,s){return this.createRoomObjectAndInitialize(t,e,s,Ot.a.UNIT)}getRoomObjectFloor(t,e){return this.getObject(this.getRoomId(t),e,Ot.a.FLOOR)}createRoomObjectFloor(t,e,s){return this.createRoomObjectAndInitialize(t,e,s,Ot.a.FLOOR)}removeRoomObjectFloor(t,e,s=-1,n=!1){const i=this.getRoomInstanceData(t);if(i&&i.removePendingFunitureFloor(e),this._sessionDataManager&&s===this._sessionDataManager.userId&&!L.isBuilderClubId(e)){const s=this.getRoomObject(t,e,Ot.a.FLOOR);if(s){const n=this.getRoomObjectScreenLocation(t,e,Ot.a.FLOOR,this._activeRoomActiveCanvas);if(n&&1!==s.model.getValue(At.a.FURNITURE_DISABLE_PICKING_ANIMATION)){const t=s.model.getValue(At.a.FURNITURE_TYPE_ID),e=s.model.getValue(At.a.FURNITURE_EXTRAS),i=s.model.getValue(At.a.FURNITURE_DATA_FORMAT),r=Tt.a.getData(i),a=this.getFurnitureFloorIcon(t,null,e,r).data;if(a){const t=l.a.instance.renderer.extract.image(a);if(this.events){const e=new w.a(t,n.x,n.y);e.iconName=M.a.INVENTORY,this.events.dispatchEvent(e)}}}}}this.removeRoomObject(t,e,Ot.a.FLOOR),this.setMouseDefault(t,Ot.a.FLOOR,e),n&&this._Str_17722(t,"RoomEngine.disposeObjectFurniture()")}getRoomObjectWall(t,e){return this.getObject(this.getRoomId(t),e,Ot.a.WALL)}removeRoomObjectWall(t,e,s=-1){if(this._sessionDataManager&&s===this._sessionDataManager.userId&&!L.isBuilderClubId(e)){const s=this.getRoomObject(t,e,Ot.a.WALL);if(s&&-1===s.type.indexOf("post_it")&&-1===s.type.indexOf("external_image_wallitem")){const n=this.getRoomObjectScreenLocation(t,e,Ot.a.WALL,this._activeRoomActiveCanvas);if(n){const t=s.model.getValue(At.a.FURNITURE_TYPE_ID),e=s.model.getValue(At.a.FURNITURE_DATA),i=this.getFurnitureWallIcon(t,null,e).data;if(i){const t=l.a.instance.renderer.extract.image(i);if(this.events){const e=new w.a(t,n.x,n.y);e.iconName=M.a.INVENTORY,this.events.dispatchEvent(e)}}}}}this.removeRoomObject(t,e,Ot.a.WALL),this.updateRoomObjectMask(t,e,!1),this.setMouseDefault(t,Ot.a.WALL,e)}createRoomObjectWall(t,e,s){return this.createRoomObjectAndInitialize(t,e,s,Ot.a.WALL)}removeRoomObject(t,e,s){const n=this.getRoomInstance(t);if(!n)return null;n.removeRoomObject(e,s),this.events&&this.events.dispatchEvent(new F.a(F.a.REMOVED,t,e,s))}addFurnitureFloor(t,e,s,n,i,r,a,o=NaN,c=-1,l=0,h=0,u="",_=!0,d=!0,g=-1){const m=this.getRoomInstanceData(t);if(!m)return!1;const p=new vr(e,s,null,n,i,r,a,o,c,l,h,u,_,d,g);return m.addPendingFurnitureFloor(p),!0}addFurnitureFloorByTypeName(t,e,s,n,i,r,a,o=NaN,c=-1,l=0,h=0,u="",_=!0,d=!0,g=-1){const m=this.getRoomInstanceData(t);if(!m)return!1;const p=new vr(e,0,s,n,i,r,a,o,c,l,h,u,_,d,g);return m.addPendingFurnitureFloor(p),!0}addFurnitureWall(t,e,s,n,i,r,a,o=-1,c=0,l=0,h="",u=!0){const _=this.getRoomInstanceData(t);if(!_)return!1;const d=new yt.a;d.setString(a);const g=new vr(e,s,null,n,i,r,d,NaN,o,c,l,h,!0,u);return _.addPendingFurnitureWall(g),!0}updateRoomObjectFloor(t,e,s,n,i,r,a=NaN){const o=this.getRoomObjectFloor(t,e);return!!o&&(o.processUpdateMessage(new c.a(s,n)),o.processUpdateMessage(new dt(i,r,a)),!0)}updateRoomObjectWall(t,e,s,n,i,r=null){const a=this.getRoomObjectWall(t,e);if(!a||!a.logic)return!1;const o=new c.a(s,n),l=new yt.a,h=new dt(i,l);return l.setString(r),a.logic.processUpdateMessage(o),a.logic.processUpdateMessage(h),this.updateRoomObjectMask(t,e),!0}updateRoomObjectWallItemData(t,e,s){const n=this.getRoomObjectWall(t,e);return!(!n||!n.logic||(n.logic.processUpdateMessage(new pt(s)),0))}updateRoomObjectFloorHeight(t,e,s){const n=this.getRoomObjectFloor(t,e);return!!n&&(n.processUpdateMessage(new mt(null,null,s)),!0)}updateRoomObjectFloorExpiration(t,e,s){const n=this.getRoomObjectFloor(t,e);return!!n&&(n.model.setValue(At.a.FURNITURE_EXPIRY_TIME,s),n.model.setValue(At.a.FURNITURE_EXPIRTY_TIMESTAMP,l.a.instance.time),!0)}updateRoomObjectWallExpiration(t,e,s){const n=this.getRoomObjectWall(t,e);return!!n&&(n.model.setValue(At.a.FURNITURE_EXPIRY_TIME,s),n.model.setValue(At.a.FURNITURE_EXPIRTY_TIMESTAMP,l.a.instance.time),!0)}updateRoomObjectMask(t,e,s=!0){const n=Ot.a.WALL+"_"+e,i=this.getRoomObjectWall(t,e);let r=null;if(i&&i.model){if(i.model.getValue(At.a.FURNITURE_USES_PLANE_MASK)>0){const t=i.model.getValue(At.a.FURNITURE_PLANE_MASK_TYPE),e=i.getLocation();r=s?new bt(bt.ADD_MASK,n,t,e):new bt(bt._Str_10260,n)}}else r=new bt(bt._Str_10260,n);const a=this.getRoomOwnObject(t);a&&a.logic&&r&&a.logic.processUpdateMessage(r)}rollRoomObjectFloor(t,e,s,n){const i=this.getRoomObjectFloor(t,e);i&&i.processUpdateMessage(new ht(s,n,null,!!n))}updateRoomObjectWallLocation(t,e,s){const n=this.getRoomObjectWall(t,e);return!!n&&(n.logic&&n.logic.processUpdateMessage(new ht(s,null,null)),this.updateRoomObjectMask(t,e),!0)}addRoomObjectUser(t,e,s,n,i,r,a){if(this.getRoomObjectUser(t,e))return!1;let o=Ct.a.getTypeString(r);o===Ct.a.PET&&(o=this.getPetType(a));const c=this.createRoomObjectUser(t,e,o);return!!c&&(c.processUpdateMessage(new ut(this.fixedUserLocation(t,s),null,n,i,!1,0)),a&&c.processUpdateMessage(new Q(a)),this.events&&this.events.dispatchEvent(new F.a(F.a.ADDED,t,e,Ot.a.UNIT)),!0)}updateRoomObjectUserLocation(t,e,s,n,i=!1,r=0,a=null,o=NaN){const c=this.getRoomObjectUser(t,e);if(!c)return!1;s||(s=c.getLocation()),a||(a=c.getDirection()),isNaN(o)&&(o=c.model.getValue(At.a.HEAD_DIRECTION)),c.processUpdateMessage(new ut(this.fixedUserLocation(t,s),this.fixedUserLocation(t,n),a,o,i,r));const l=this._roomSessionManager&&this._roomSessionManager.getSession(t)||null;return l&&l.ownRoomIndex===e&&this._logicFactory.events.dispatchEvent(new V(V.ROAME_MOVE_TO,n)),!0}fixedUserLocation(t,e){if(!e)return null;const s=this.getFurnitureStackingHeightMap(t),n=this.getLegacyWallGeometry(t);if(!s||!n)return e;let i=e.z;const r=s.getTileHeight(e.x,e.y),a=n.getHeight(e.x,e.y);return Math.abs(i-r)<.1&&Math.abs(r-a)<.1&&(i=n._Str_24141(e.x,e.y)),new m.a(e.x,e.y,i)}updateRoomObjectUserAction(t,e,s,n,i=null){const r=this.getRoomObjectUser(t,e);if(!r)return!1;let a=null;switch(s){case At.a.FIGURE_TALK:a=new z(n);break;case At.a.FIGURE_SLEEP:a=new ct(1===n);break;case At.a.FIGURE_IS_TYPING:a=new lt(1===n);break;case At.a.FIGURE_IS_MUTED:a=new et(1===n);break;case At.a.FIGURE_CARRY_OBJECT:a=new j(n,i);break;case At.a.FIGURE_USE_OBJECT:a=new _t(n);break;case At.a.FIGURE_DANCE:a=new Y(n);break;case At.a.FIGURE_GAINED_EXPERIENCE:a=new X(n);break;case At.a.FIGURE_NUMBER_VALUE:a=new it(n);break;case At.a.FIGURE_SIGN:a=new ot(n);break;case At.a.FIGURE_EXPRESSION:a=new Z(n);break;case At.a.FIGURE_IS_PLAYING_GAME:a=new rt(1===n);break;case At.a.FIGURE_GUIDE_STATUS:a=new tt(n)}return!!a&&(r.processUpdateMessage(a),!0)}updateRoomObjectUserFigure(t,e,s,n=null,i=null,r=!1){const a=this.getRoomObjectUser(t,e);return!!a&&(a.processUpdateMessage(new Q(s,n,i,r)),!0)}updateRoomObjectUserFlatControl(t,e,s){const n=this.getRoomObjectUser(t,e);if(!n)return!1;let i=parseInt(s);return isNaN(i)&&(i=0),n.processUpdateMessage(new J(i)),!0}updateRoomObjectUserEffect(t,e,s,n=0){const i=this.getRoomObjectUser(t,e);return!!i&&(i.processUpdateMessage(new q(s,n)),!0)}updateRoomObjectUserGesture(t,e,s){const n=this.getRoomObjectUser(t,e);return!!n&&(n.processUpdateMessage(new $(s)),!0)}updateRoomObjectUserPetGesture(t,e,s){const n=this.getRoomObjectUser(t,e);return!!n&&(n.processUpdateMessage(new nt(s)),!0)}updateRoomObjectUserPosture(t,e,s,n=null){const i=this.getRoomObjectUser(t,e);return!!i&&(i.processUpdateMessage(new at(s,n)),!0)}updateRoomObjectUserOwn(t,e){const s=this.getRoomObjectUser(t,e);s&&s.processUpdateMessage(new st)}useRoomObject(t,e){const s=this.getRoomObject(this._activeRoomId,t,e);if(s){const t=s.logic;if(t)return t.useObject(),!0}return!1}objectInitialized(e,s,n){const i=this.getRoomIdFromString(e);n===Ot.a.WALL&&this.updateRoomObjectMask(i,s);const r=this.getRoomObject(i,s,n);if(r&&r.model&&r.logic){const t=r.model.getValue(At.a.FURNITURE_DATA_FORMAT);if(!isNaN(t)){const e=Tt.a.getData(t);e.initializeFromRoomObjectModel(r.model),r.processUpdateMessage(new dt(r.getState(0),e))}this.events.dispatchEvent(new F.a(F.a.CONTENT_UPDATED,i,s,n))}e!==t.TEMPORARY_ROOM&&this._Str_21543(i,r)}changeObjectModelData(t,e,s,n,i){const r=this.getObject(this.getRoomId(t),e,s);if(!r||!r.logic)return!1;const a=new ft(n,i);return r.processUpdateMessage(a),!0}changeObjectState(t,e,s){const n=this.getObject(this.getRoomId(t),e,s);if(!n||!n.model)return;let i=n.model.getValue(At.a.FURNITURE_AUTOMATIC_STATE_INDEX);isNaN(i)?i=1:i+=1,n.model.setValue(At.a.FURNITURE_AUTOMATIC_STATE_INDEX,i);const r=n.model.getValue(At.a.FURNITURE_DATA_FORMAT),a=Tt.a.getData(r);a.initializeFromRoomObjectModel(n.model),n.logic&&n.logic.processUpdateMessage(new dt(i,a))}loadRoomObjectBadgeImage(t,e,s,n,i=!0){if(!this._sessionDataManager)return;const r=this.getRoomObjectFloor(t,e);if(!r||!r.logic)return;let a=i?this._sessionDataManager.loadGroupBadgeImage(n):this._sessionDataManager.loadBadgeImage(n);if(a)this.putBadgeInObjectAssets(r,n,i);else{a="loading_icon",this._badgeListenerObjects||(this._badgeListenerObjects=new Map),this._badgeListenerObjects.size||this._sessionDataManager.events.addEventListener(D.a.IMAGE_READY,this.onBadgeImageReadyEvent);let t=this._badgeListenerObjects.get(n);t||(t=[]),t.push(new Cr(r,i)),this._badgeListenerObjects.set(n,t)}r.logic.processUpdateMessage(new gt(n,a))}onBadgeImageReadyEvent(t){if(!this._sessionDataManager)return;const e=this._badgeListenerObjects&&this._badgeListenerObjects.get(t.badgeId);if(e){for(const s of e){if(!s)continue;this.putBadgeInObjectAssets(s.object,t.badgeId,s.groupBadge);const e=s.groupBadge?this._sessionDataManager.loadGroupBadgeImage(t.badgeId):this._sessionDataManager.loadBadgeImage(t.badgeId);s.object&&s.object.logic&&s.object.logic.processUpdateMessage(new gt(t.badgeId,e))}this._badgeListenerObjects.delete(t.badgeId),this._badgeListenerObjects.size||this._sessionDataManager.events.removeEventListener(D.a.IMAGE_READY,this.onBadgeImageReadyEvent)}}putBadgeInObjectAssets(t,e,s=!1){if(!this._roomContentLoader||!this._sessionDataManager)return;const n=s?this._sessionDataManager.loadGroupBadgeImage(e):this._sessionDataManager.loadBadgeImage(e),i=s?this._sessionDataManager.getGroupBadgeImage(e):this._sessionDataManager.getBadgeImage(e);i&&this._roomContentLoader.addAssetToCollection(t.type,n,i)}dispatchMouseEvent(e,s,n,i,r,a,c,l){const u=this.getRoomInstanceRenderingCanvas(this._activeRoomId,e);if(!u)return;const _=this.getRenderingCanvasOverlay(u),d=this._Str_16498(_,t.OBJECT_ICON_SPRITE);if(d){const t=d.getLocalBounds();d.x=s-t.width/2,d.y=n-t.height/2}if(!this._Str_25871(u,s,n,i,r,a,c)&&!u._Str_21232(s,n,i,r,a,c,l)){let e=null;i===h.a.MOUSE_CLICK?(this.events&&this.events.dispatchEvent(new F.a(F.a.DESELECTED,this._activeRoomId,-1,Ot.a.MINIMUM)),e=o.CLICK):i===h.a.MOUSE_MOVE?e=o.MOUSE_MOVE:i===h.a.MOUSE_DOWN?e=o.MOUSE_DOWN:i===h.a.MOUSE_UP&&(e=o.MOUSE_UP),this._roomObjectEventHandler.handleRoomObjectEvent(new o(e,this.getRoomObject(this._activeRoomId,t.ROOM_OBJECT_ID,Ot.a.ROOM),null,r),this._activeRoomId)}this._activeRoomActiveCanvas=e,this._activeRoomActiveCanvasMouseX=s,this._activeRoomActiveCanvasMouseY=n}_Str_25871(e,s,n,i,r,a,o){let c=s-this._activeRoomActiveCanvasMouseX,l=n-this._activeRoomActiveCanvasMouseY;if(i===h.a.MOUSE_DOWN)r||a||o||this.isDecorating||this._roomAllowsDragging&&(this._activeRoomIsDragged=!0,this._activeRoomWasDragged=!1,this._activeRoomDragStartX=this._activeRoomActiveCanvasMouseX,this._activeRoomDragStartY=this._activeRoomActiveCanvasMouseY);else if(i===h.a.MOUSE_UP){if(this._activeRoomIsDragged&&(this._activeRoomIsDragged=!1,this._activeRoomWasDragged)){const t=this.getRoomInstanceData(this._activeRoomId);if(t){const s=t.roomCamera;s&&(this._Str_11555&&(s._Str_12536||(s._Str_8564=!1,s._Str_8690=!1),s._Str_25467(new m.a(-e.screenOffsetX,-e.screenOffsetY))),this._roomDraggingAlwaysCenters&&s.reset())}}}else if(i===h.a.MOUSE_MOVE)this._activeRoomIsDragged&&(this._activeRoomWasDragged||(c=s-this._activeRoomDragStartX,l=n-this._activeRoomDragStartY,(c<=-t.DRAG_THRESHOLD||c>=t.DRAG_THRESHOLD||l<=-t.DRAG_THRESHOLD||l>=t.DRAG_THRESHOLD)&&(this._activeRoomWasDragged=!0),c=0,l=0),0==c&&0==l||(this._activeRoomDragX+=c,this._activeRoomDragY+=l,this._activeRoomWasDragged=!0));else if((i===h.a.MOUSE_CLICK||i===h.a.DOUBLE_CLICK)&&(this._activeRoomIsDragged=!1,this._activeRoomWasDragged))return this._activeRoomWasDragged=!1,!0;return!1}updateMousePointer(t,e,s){const n=this.getRoomObjectCategoryForType(s);switch(t){case k.MOUSE_BUTTON:return void this.setMouseButton(this._activeRoomId,n,e);default:return void this.setMouseDefault(this._activeRoomId,n,e)}}setMouseButton(t,e,s){if(!this._roomSessionManager)return;const n=this._roomSessionManager.getSession(t);if(n&&(e!==Ot.a.FLOOR&&e!==Ot.a.WALL||n.controllerLevel>=U.a.GUEST)){const n=this.getRoomInstanceData(t);n&&n._Str_16810(e+"_"+s)&&(this._mouseCursorUpdate=!0)}}setMouseDefault(t,e,s){if(!this._roomSessionManager)return;const n=this.getRoomInstanceData(t);n&&n._Str_11959(e+"_"+s)&&(this._mouseCursorUpdate=!0)}processRoomObjectOperation(t,e,s){if(!this._roomObjectEventHandler)return!1;this._roomObjectEventHandler.processRoomObjectOperation(this._activeRoomId,t,e,s)}processRoomObjectWallOperation(t,e,s,n){if(!this._roomObjectEventHandler)return!1;e===Ot.a.WALL&&this._roomObjectEventHandler.processRoomObjectWallOperation(this._activeRoomId,t,e,s,n)}processRoomObjectFloorOperation(t,e,s,n){if(!this._roomObjectEventHandler)return!1;e===Ot.a.FLOOR&&this._roomObjectEventHandler.processRoomObjectFloorOperation(this._activeRoomId,t,s,n)}processRoomObjectEvent(t){if(!this._roomObjectEventHandler)return;const e=this.getRoomObjectRoomId(t.object);if(!e)return;const s=this.getRoomIdFromString(e);this._roomObjectEventHandler.handleRoomObjectEvent(t,s)}processRoomObjectPlacement(t,e,s,n,i=null,r=null,a=-1,o=-1,c=null){const l=this.getRoomInstance(this._activeRoomId);return!(!l||0!==l.model.getValue(bn.a.ROOM_IS_PUBLIC))&&!!this._roomObjectEventHandler&&this._roomObjectEventHandler.processRoomObjectPlacement(t,this._activeRoomId,e,s,n,i,r,a,o,c)}getRoomObjectScreenLocation(t,e,s,n=-1){-1==n&&(n=this._activeRoomActiveCanvas);const i=this.getRoomInstanceGeometry(t,n);if(!i)return null;const r=this.getRoomObject(t,e,s);if(!r)return null;const a=i.getScreenPoint(r.getLocation());if(!a)return null;const o=this.getRoomInstanceRenderingCanvas(t,n);return o?(a.x=a.x*o.scale,a.y=a.y*o.scale,a.x+=o.width/2+o.screenOffsetX,a.y+=o.height/2+o.screenOffsetY,a):null}selectRoomObject(t,e,s){this._roomObjectEventHandler&&this._roomObjectEventHandler._Str_17481(t,e,s)}_Str_8675(){this._roomObjectEventHandler&&this._roomObjectEventHandler._Str_8675(this._activeRoomId)}_Str_24651(t,e,s,i=1){if(!t||!s)return;let r=this._Str_16498(t,e);return r?null:(r=n.Sprite.from(s),r.name=e,r.scale.set(i),t.addChild(r),r)}onRoomContentLoaded(t,e,s){if(!this._roomContentLoader||-1===t)return;this._thumbnailObjectIdBank._Str_15187(t-1);const n=this._thumbnailCallbacks.get(e);if(n){this._thumbnailCallbacks.delete(e);const s=this._roomContentLoader.getImage(e);if(s)for(const e of n)e&&e.imageReady(t,null,s)}}_Str_16645(e,s,n,i=null,r=null,a=-1,o=-1,c=null){let l=null,h=0,u=null;if(n)u=this.getRoomObjectImage(this._activeRoomId,e,s,new m.a,1,null);else if(this._roomContentLoader)if(s===Ot.a.FLOOR?(l=this._roomContentLoader.getFurnitureFloorNameForTypeId(e),h=this._roomContentLoader.getFurnitureFloorColorIndex(e)):s===Ot.a.WALL&&(l=this._roomContentLoader.getFurnitureWallNameForTypeId(e,i),h=this._roomContentLoader.getFurnitureWallColorIndex(e)),s===Ot.a.UNIT)if(l=Ct.a.getTypeString(e),"pet"===l){l=this.getPetType(i);const t=new A.a(i);u=this.getRoomObjectPetImage(t.typeId,t.paletteId,t.color,new m.a(180),64,null,!0,0,t.customParts,c)}else u=this.getGenericRoomObjectImage(l,i,new m.a(180),64,null,0,null,r,a,o,c);else u=this.getGenericRoomObjectImage(l,h.toString(),new m.a,1,null,0,i,r,a,o,c);if(!u||!u.data)return;const _=this.getActiveRoomInstanceRenderingCanvas();if(!_)return;const d=this.getRenderingCanvasOverlay(_);this._Str_21215(d,t.OBJECT_ICON_SPRITE);const g=this._Str_24651(d,t.OBJECT_ICON_SPRITE,u.data,1);g&&(g.x=this._activeRoomActiveCanvasMouseX-u.data.width/2,g.y=this._activeRoomActiveCanvasMouseY-u.data.height/2)}getRoomObjectImage(t,e,s,n,i,r,a=0){if(!this._roomManager)return null;let o=-1,c=null,l=null,h="",u=null;const _=this.getRoomId(t),d=this._roomManager.getRoomInstance(_);if(d){const t=d.getRoomObject(e,s);if(t&&t.model)switch(o=t.id,c=t.type,s){case Ot.a.FLOOR:case Ot.a.WALL:{h=t.model.getValue(At.a.FURNITURE_COLOR).toString(),u=t.model.getValue(At.a.FURNITURE_EXTRAS);const e=t.model.getValue(At.a.FURNITURE_DATA_FORMAT);e!==yt.a.FORMAT_KEY&&(l=Tt.a.getData(e),l.initializeFromRoomObjectModel(t.model));break}case Ot.a.UNIT:h=t.model.getValue(At.a.FIGURE)}}return this.getGenericRoomObjectImage(c,h,n,i,r,a,u,l,-1,-1,null,o)}getFurnitureFloorIconUrl(t){let e=null,s="";return this._roomContentLoader?(e=this._roomContentLoader.getFurnitureFloorNameForTypeId(t),s=this._roomContentLoader.getFurnitureFloorColorIndex(t).toString(),this._roomContentLoader.getAssetIconUrl(e,s)):null}getFurnitureFloorIcon(t,e,s=null,n=null){return this.getFurnitureFloorImage(t,new m.a,1,e,0,s,-1,-1,n)}getFurnitureWallIconUrl(t,e=null){let s=null,n="";return this._roomContentLoader?(s=this._roomContentLoader.getFurnitureWallNameForTypeId(t,e),n=this._roomContentLoader.getFurnitureWallColorIndex(t).toString(),this._roomContentLoader.getAssetIconUrl(s,n)):null}getFurnitureWallIcon(t,e,s=null){return this.getFurnitureWallImage(t,new m.a,1,e,0,s)}getFurnitureFloorImage(t,e,s,n,i=0,r=null,a=-1,o=-1,c=null){let l=null,h="";return this._roomContentLoader&&(l=this._roomContentLoader.getFurnitureFloorNameForTypeId(t),h=this._roomContentLoader.getFurnitureFloorColorIndex(t).toString()),1===s&&n?this.getGenericRoomObjectThumbnail(l,h,n,r,c):this.getGenericRoomObjectImage(l,h,e,s,n,i,r,c,a,o)}getFurnitureWallImage(t,e,s,n,i=0,r=null,a=-1,o=-1){let c=null,l="";return this._roomContentLoader&&(c=this._roomContentLoader.getFurnitureWallNameForTypeId(t),l=this._roomContentLoader.getFurnitureWallColorIndex(t).toString()),1===s&&n?this.getGenericRoomObjectThumbnail(c,l,n,r,null):this.getGenericRoomObjectImage(c,l,e,s,n,i,r,null,a,o)}getRoomObjectPetImage(t,e,s,n,i,r,a=!1,o=0,c=null,l=null){let h=null,u=t+" "+e+" "+s.toString(16);if(a&&(u+=" head"),c){u=u+" "+c.length;for(const t of c)u=u+" "+t.layerId+" "+t.partId+" "+t.paletteId}return this._roomContentLoader&&(h=this._roomContentLoader.getPetNameForType(t)),this.getGenericRoomObjectImage(h,u,n,i,r,o,null,null,-1,-1,l)}getGenericRoomObjectImage(e,s,n,i,r,a=0,o=null,c=null,l=-1,h=-1,u=null,_=-1){if(!this._roomManager)return null;const d=new K;if(d.id=-1,!this._ready||!e)return d;let p=this._roomManager.getRoomInstance(t.TEMPORARY_ROOM);if(!p&&(p=this._roomManager.createRoomInstance(t.TEMPORARY_ROOM),!p))return d;let f=this._imageObjectIdBank._Str_19709();const E=this.getRoomObjectCategoryForType(e);if(f<0)return d;f++;const S=p.createRoomObjectAndInitalize(f,e,E);if(!S||!S.model||!S.logic)return d;const b=S.model;switch(E){case Ot.a.FLOOR:case Ot.a.WALL:b.setValue(At.a.FURNITURE_COLOR,parseInt(s)),b.setValue(At.a.FURNITURE_EXTRAS,o);break;case Ot.a.UNIT:if(e===Ct.a.USER||e===Ct.a.BOT||e===Ct.a.RENTABLE_BOT||e===Ct.a.PET)b.setValue(At.a.FIGURE,s);else{const t=new A.a(s);b.setValue(At.a.PET_PALETTE_INDEX,t.paletteId),b.setValue(At.a.PET_COLOR,t.color),t.headOnly&&b.setValue(At.a.PET_HEAD_ONLY,1),t.hasCustomParts&&(b.setValue(At.a.PET_CUSTOM_LAYER_IDS,t.customLayerIds),b.setValue(At.a.PET_CUSTOM_PARTS_IDS,t.customPartIds),b.setValue(At.a.PET_CUSTOM_PALETTE_IDS,t.customPaletteIds)),u&&b.setValue(At.a.FIGURE_POSTURE,u)}}S.setDirection(n);const v=S.visualization;if(!v)return p.removeRoomObject(f,E),d;(l>-1||c)&&(c&&""!==c.getLegacyString()?S.logic.processUpdateMessage(new dt(parseInt(c.getLegacyString()),c)):S.logic.processUpdateMessage(new dt(l,c)));const I=new g.a(i,new m.a(-135,30,0),new m.a(11,11,5));if(v.update(I,0,!0,!1),h>0){let t=0;for(;t<h;)v.update(I,0,!0,!1),t++}const R=v.getImage(a,_);if(d.data=R,d.id=f,!this.isRoomContentTypeLoaded(e)&&r){let t=this._imageCallbacks.get(f.toString());t||(t=[],this._imageCallbacks.set(f.toString(),t)),t.push(r),b.setValue(At.a.IMAGE_QUERY_SCALE,i)}else p.removeRoomObject(f,E),this._imageObjectIdBank._Str_15187(f-1),d.id=0;return I.dispose(),d}getGenericRoomObjectThumbnail(e,s,n,i=null,r=null){if(!this._roomManager)return null;const a=new K;if(a.id=-1,!this._ready||!e)return a;let o=this._roomManager.getRoomInstance(t.TEMPORARY_ROOM);if(!o&&(o=this._roomManager.createRoomInstance(t.TEMPORARY_ROOM),!o))return a;let c=this._thumbnailObjectIdBank._Str_19709();if(this.getRoomObjectCategoryForType(e),c<0)return a;c++,a.id=c,a.data=null,a.image=null;const l=[e,s].join("_"),h=this._roomContentLoader.getImage(l);if(!h&&n){let t=this._thumbnailCallbacks.get(l);t||(t=[],this._thumbnailCallbacks.set(l,t),this._roomContentLoader.downloadImage(c,e,s,null)),t.push(n)}else h&&(a.image=h),this._thumbnailObjectIdBank._Str_15187(c-1),a.id=0;return a}initalizeTemporaryObjectsByType(e,s){const n=this._roomManager.getRoomInstance(t.TEMPORARY_ROOM);if(!n||!this._roomContentLoader)return;const i=this._roomContentLoader.getCategoryForType(e),r=n.getManager(i);let a=null,o=0;if(r&&r.objects.length)for(const t of r.objects.getValues())if(t&&t.model&&t.type===e){const e=t.id,s=t.visualization;let r=null;if(s){const e=t.model.getValue(At.a.IMAGE_QUERY_SCALE);a&&o!==e&&(a.dispose(),a=null),a||(o=e,a=new g.a(e,new m.a(-135,30,0),new m.a(11,11,5))),s.update(a,0,!0,!1),r=s.image}n.removeRoomObject(e,i),this._imageObjectIdBank._Str_15187(e-1);const c=this._imageCallbacks.get(e.toString());if(c){this._imageCallbacks.delete(e.toString());for(const t of c)t&&(r?t.imageReady(e,r):t.imageFailed(e))}}a&&a.dispose()}_Str_7972(e){const s=this.getActiveRoomInstanceRenderingCanvas();if(!s)return;const n=this.getRenderingCanvasOverlay(s),i=this._Str_16498(n,t.OBJECT_ICON_SPRITE);i&&(i.visible=e)}_Str_17948(){const e=this.getActiveRoomInstanceRenderingCanvas();if(!e)return;const s=this.getRenderingCanvasOverlay(e);this._Str_21215(s,t.OBJECT_ICON_SPRITE)}getRenderingCanvasOverlay(e){if(!e)return null;const s=e.master;return s&&s.getChildByName(t.OVERLAY)||null}_Str_21215(t,e){if(!t)return!1;let s=t.children.length-1;for(;s>=0;){const n=t.getChildAt(s);if(n&&n.name===e){if(t.removeChildAt(s),n.children.length){const t=n.getChildAt(0);t.parent.removeChild(t),t.destroy()}return!0}s--}return!1}_Str_16498(t,e){if(!t)return null;let s=t.children.length-1;for(;s>=0;){const n=t.getChildAt(s);if(n&&n.name===e)return n;s--}return null}_Str_21072(t,e){if(this._ready){const s=this.getRoomId(t),n=this._roomManager.getRoomInstance(s);if(n)return n.getRoomObjectsForCategory(e)}return[]}_Str_21543(t,e){const s=this.getRoomInstanceData(t).tileObjectMap;s&&s._Str_21192(e)}_Str_17722(t,e){const s=this.getRoomInstanceData(t).tileObjectMap;s&&s.populate(this._Str_21072(t,Ot.a.FLOOR))}_Str_9972(t,e,s=!1,n=!0,i=!1,r=-1){let a=null;if(a=r>-1?this.getRoomInstanceRenderingCanvas(this._activeRoomId,r):this.getActiveRoomInstanceRenderingCanvas(),!a)return null;i&&a._Str_20787();let o=-1;n||null==this._roomSessionManager.getSession(this._activeRoomId)||(o=this._roomSessionManager.getSession(this._activeRoomId).ownRoomIndex);const c=new Ar;return c._Str_4536(t,a,this,o),c._Str_24177(this),c._Str_22985(t,a,this,e),i&&a._Str_22174(),null}createRoomScreenshot(t,e){const s=this.getRoomInstanceRenderingCanvas(t,e);if(!s)return;const n=s.getDisplayAsTexture(),i=l.a.instance.renderer.extract.base64(n),r=new Image;r.src=i,window.open("").document.write(r.outerHTML)}objectsInitialized(t){const e=this.getRoomIdFromString(t);this.events.dispatchEvent(new x.a(x.a.OBJECTS_INITIALIZED,e))}getRoomId(t){return t.toString()}getRoomIdFromString(t){if(!t)return-1;const e=t.split("_");return e.length<=0?-1:parseInt(e[0])}getRoomObjectRoomId(t){return t&&t.model?t.model.getValue(At.a.OBJECT_ROOM_ID):null}getPetTypeId(t){let e=-1;if(t){const s=t.split(" ");s.length>1&&(e=parseInt(s[0]))}return e}getPetType(t){if(!t)return null;const e=t.split(" ");if(e.length>1){const t=parseInt(e[0]);return this._roomContentLoader?this._roomContentLoader.getPetNameForType(t):"pet"}return null}isRoomContentTypeLoaded(t){return!!this._roomContentLoader&&null!==this._roomContentLoader.getCollection(t)}modifyRoomObjectData(t,e,s,n){return!(!this._roomObjectEventHandler||e!==Ot.a.WALL)&&this._roomObjectEventHandler.modifyWallItemData(this._activeRoomId,t,s,n)}deleteRoomObject(t,e){return!(!this._roomObjectEventHandler||e!==Ot.a.WALL)&&this._roomObjectEventHandler.deleteWallItem(this._activeRoomId,t)}get connection(){return this._communication.connection}get sessionDataManager(){return this._sessionDataManager}set sessionDataManager(t){this._sessionDataManager=t}get roomSessionManager(){return this._roomSessionManager}set roomSessionManager(t){this._roomSessionManager=t}get roomManager(){return this._roomManager}set roomManager(t){this._roomManager=t}get objectEventHandler(){return this._roomObjectEventHandler}get roomRendererFactory(){return this._roomRendererFactory}get visualizationFactory(){return this._visualizationFactory}get logicFactory(){return this._logicFactory}get activeRoomId(){return this._activeRoomId}get ready(){return this._ready}get roomContentLoader(){return this._roomContentLoader}get isDecorating(){if(!this._roomSessionManager)return!1;const t=this._roomSessionManager.getSession(this._activeRoomId);return t&&t.isDecorating||!1}get _Str_11555(){return!0}get selectedAvatarId(){return this._roomObjectEventHandler?this._roomObjectEventHandler.selectedAvatarId:-1}getRoomObjectCount(t,e){return null==this._roomManager?0:this._roomManager.getRoomInstance(t.toString()).getRoomObjectsForCategory(e).length}}return t.ROOM_OBJECT_ID=-1,t.ROOM_OBJECT_TYPE="room",t.CURSOR_OBJECT_ID=-2,t.CURSOR_OBJECT_TYPE="tile_cursor",t.ARROW_OBJECT_ID=-3,t.ARROW_OBJECT_TYPE="selection_arrow",t.OVERLAY="overlay",t.OBJECT_ICON_SPRITE="object_icon_sprite",t.DRAG_THRESHOLD=15,t.TEMPORARY_ROOM="temporary_room",t})()},"3md2":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._figure=null,this._gender=null,!0}parse(t){return!!t&&(this._figure=t.readString(),this._gender=t.readString(),!0)}get figure(){return this._figure}get gender(){return this._gender}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"3r1x":function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t extends Event{}return t.COMPLETE="NITRO_COMPLETE",t})()},"3xex":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._isOpen=!1,this._onShutdown=!1,this._isAuthenticUser=!1,!0}parse(t){return!!t&&(this._isOpen=t.readBoolean(),this._onShutdown=t.readBoolean(),t.bytesAvailable&&(this._isAuthenticUser=t.readBoolean()),!0)}get isOpen(){return this._isOpen}get onShutdown(){return this._onShutdown}get isAuthenticUser(){return this._isAuthenticUser}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"443f":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._homeRoomId=-1,this._roomIdToEnter=-1,!0}parse(t){return!!t&&(this._homeRoomId=t.readInt(),this._roomIdToEnter=t.readInt(),!0)}get homeRoomId(){return this._homeRoomId}get roomIdToEnter(){return this._roomIdToEnter}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"4NUc":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._messages=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._messages.push(t.readString()),e--;return!0}get messages(){return this._messages}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"4R/C":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s,n,i,r,a){this._data=[t,e,s,n,i,r,a]}getMessageArray(){return this._data}dispose(){}}},"4Xjj":function(t,e,s){"use strict";s.d(e,"a",function(){return c});var n=s("5+UO"),i=s("2L69"),r=s("v12S");class a{constructor(t,e,s,n,i,r,a,o,c,l=-1){this._Str_12399=-1,this._offerId=t,this._furniId=e,this._furniType=s,this._extraData=n,this._stuffData=i,this._price=r,this._status=a,this._Str_12399=o,this._Str_5049=c,this._Str_4620=l}get offerId(){return this._offerId}get furniId(){return this._furniId}get furniType(){return this._furniType}get extraData(){return this._extraData}get stuffData(){return this._stuffData}get price(){return this._price}get status(){return this._status}get _Str_5853(){return this._Str_12399}get _Str_3925(){return this._Str_5049}get _Str_4121(){return this._Str_4620}get isUniqueLimitedItem(){return!(null==this.stuffData)&&this.stuffData.uniqueSeries>0}}class o{constructor(){this._Str_8964=1,this._Str_13000=2,this._Str_14245=3,this._Str_18070=500}flush(){return this._offers=[],!0}parse(t){if(!t)return!1;this._offers=[];const e=t.readInt();let s=0;for(;s<e;){const e=t.readInt(),n=t.readInt();let o,c,l,h=t.readInt();h===this._Str_8964?(o=t.readInt(),l=this.getStuffData(t)):h==this._Str_13000?(o=t.readInt(),c=t.readString()):h==this._Str_14245&&(o=t.readInt(),l=i.a.getData(r.a.FORMAT_KEY),l.uniqueNumber=t.readInt(),l.uniqueSeries=t.readInt(),h=this._Str_8964);const u=t.readInt(),_=t.readInt(),d=t.readInt(),g=t.readInt(),m=new a(e,o,h,c,l,u,n,_,d,g);s<this._Str_18070&&this._offers.push(m),s++}return this._Str_11687=t.readInt(),!0}get offers(){return this._offers}get totalItemsFound(){return this._Str_11687}getStuffData(t){const e=t.readInt(),s=i.a.getData(e);return s.parseWrapper(t),s}}class c extends n.a{constructor(t){super(t,o)}getParser(){return this.parser}}},"4Yln":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},"4gvq":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return!0}parse(t){return!!t}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"4hNi":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"4hT9":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO"),i=s("QQU2");class r extends n.a{constructor(t){super(t,i.a)}get _Str_4963(){return this.getParser()._Str_4963}getParser(){return this.parser}}},"4k6Q":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(...t){this._data=[t.length,...t]}getMessageArray(){return this._data}dispose(){}}},"4pnK":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"4vrv":function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("Ns5P");let i=(()=>{class t extends n.a{constructor(t,e,s=null){super(t,e),this._message=s}get message(){return this._message}}return t.RSEME_KICKED="RSEME_KICKED",t.RSEME_PETS_FORBIDDEN_IN_HOTEL="RSEME_PETS_FORBIDDEN_IN_HOTEL",t.RSEME_PETS_FORBIDDEN_IN_FLAT="RSEME_PETS_FORBIDDEN_IN_FLAT",t.RSEME_MAX_PETS="RSEME_MAX_PETS",t.RSEME_MAX_NUMBER_OF_OWN_PETS="RSEME_MAX_NUMBER_OF_OWN_PETS",t.RSEME_NO_FREE_TILES_FOR_PET="RSEME_NO_FREE_TILES_FOR_PET",t.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET="RSEME_SELECTED_TILE_NOT_FREE_FOR_PET",t.RSEME_BOTS_FORBIDDEN_IN_HOTEL="RSEME_BOTS_FORBIDDEN_IN_HOTEL",t.RSEME_BOTS_FORBIDDEN_IN_FLAT="RSEME_BOTS_FORBIDDEN_IN_FLAT",t.RSEME_BOT_LIMIT_REACHED="RSEME_BOT_LIMIT_REACHED",t.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT="RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT",t.RSEME_BOT_NAME_NOT_ACCEPTED="RSEME_BOT_NAME_NOT_ACCEPTED",t})()},"5+UO":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._callBack=t,this._parserClass=e,this._parser=null,this._connection=null}dispose(){this._callBack=null,this._parserClass=null,this._parser=null,this._connection=null}get callBack(){return this._callBack}get parserClass(){return this._parserClass}get parser(){return this._parser}set parser(t){this._parser=t}get connection(){return this._connection}set connection(t){this._connection=t}}},"5BHI":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO");class i{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._id=-1,this._name=null,this._visible=!1,!0}parse(t){return!!t&&(this._id=t.readInt(),this._name=t.readString(),this._visible=t.readBoolean(),!0)}get id(){return this._id}get name(){return this._name}get visible(){return this._visible}}class r{flush(){return this._categories=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._categories.push(new i(t)),e--;return!0}get categories(){return this._categories}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"5Cat":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._itemId=0,!0}parse(t){return!!t&&(this._itemId=t.readInt(),!0)}get itemId(){return this._itemId}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"5F4d":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._id=-1,this._code=null,this._filter=null,this._localization=null,!0}parse(t){return!!t&&(this._id=t.readInt(),this._code=t.readString(),this._filter=t.readString(),this._localization=t.readString(),!0)}get id(){return this._id}get code(){return this._code}get filter(){return this._filter}get localization(){return this._localization}}},"5RE+":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("J0ap");class r{flush(){return this._items=[],!0}parse(t){return!!t&&(this._items.push(new i.a(t)),!0)}get items(){return this._items}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"5TOT":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e=null){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},"5r5K":function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("Hs+C");let i=(()=>{class t extends n.a{constructor(t,e,s,n,i=null){super(t,e,s,n),this._widget=i}get widget(){return this._widget}}return t.OPEN_WIDGET="RETWE_OPEN_WIDGET",t.CLOSE_WIDGET="RETWE_CLOSE_WIDGET",t.OPEN_FURNI_CONTEXT_MENU="RETWE_OPEN_FURNI_CONTEXT_MENU",t.CLOSE_FURNI_CONTEXT_MENU="RETWE_CLOSE_FURNI_CONTEXT_MENU",t.REQUEST_PLACEHOLDER="RETWE_REQUEST_PLACEHOLDER",t.REQUEST_CREDITFURNI="RETWE_REQUEST_CREDITFURNI",t.REQUEST_STICKIE="RETWE_REQUEST_STICKIE",t.REQUEST_PRESENT="RETWE_REQUEST_PRESENT",t.REQUEST_TROPHY="RETWE_REQUEST_TROPHY",t.REQUEST_TEASER="RETWE_REQUEST_TEASER",t.REQUEST_ECOTRONBOX="RETWE_REQUEST_ECOTRONBOX",t.REQUEST_DIMMER="RETWE_REQUEST_DIMMER",t.REMOVE_DIMMER="RETWE_REMOVE_DIMMER",t.REQUEST_CLOTHING_CHANGE="RETWE_REQUEST_CLOTHING_CHANGE",t.REQUEST_PLAYLIST_EDITOR="RETWE_REQUEST_PLAYLIST_EDITOR",t.REQUEST_MANNEQUIN="RETWE_REQUEST_MANNEQUIN",t.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG="ROWRE_REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG",t.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG="ROWRE_REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG",t.REQUEST_BACKGROUND_COLOR="RETWE_REQUEST_BACKGROUND_COLOR",t.REQUEST_MYSTERYBOX_OPEN_DIALOG="RETWE_REQUEST_MYSTERYBOX_OPEN_DIALOG",t.REQUEST_EFFECTBOX_OPEN_DIALOG="RETWE_REQUEST_EFFECTBOX_OPEN_DIALOG",t.REQUEST_MYSTERYTROPHY_OPEN_DIALOG="RETWE_REQUEST_MYSTERYTROPHY_OPEN_DIALOG",t.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING="RETWE_REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING",t.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED="RETWE_REQUEST_ACHIEVEMENT_RESOLUTION_FAILED",t.REQUEST_FRIEND_FURNITURE_CONFIRM="RETWE_REQUEST_FRIEND_FURNITURE_CONFIRM",t.REQUEST_FRIEND_FURNITURE_ENGRAVING="RETWE_REQUEST_FRIEND_FURNITURE_ENGRAVING",t.REQUEST_BADGE_DISPLAY_ENGRAVING="RETWE_REQUEST_BADGE_DISPLAY_ENGRAVING",t.REQUEST_HIGH_SCORE_DISPLAY="RETWE_REQUEST_HIGH_SCORE_DISPLAY",t.REQUEST_HIDE_HIGH_SCORE_DISPLAY="RETWE_REQUEST_HIDE_HIGH_SCORE_DISPLAY",t.REQUEST_INTERNAL_LINK="RETWE_REQUEST_INTERNAL_LINK",t.REQUEST_ROOM_LINK="RETWE_REQUEST_ROOM_LINK",t})()},"6RUH":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},"6X5G":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"6etz":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO"),i=s("DV2U");class r extends n.a{constructor(t){super(t,i.a)}getParser(){return this.parser}}},"6j78":function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{}return t.INFOSTAND_EXTRA_PARAM="RWEIEP_INFOSTAND_EXTRA_PARAM",t.JUKEBOX="RWEIEP_JUKEBOX",t.USABLE_PRODUCT="RWEIEP_USABLE_PRODUCT",t.SONGDISK="RWEIEP_SONGDISK",t.CRACKABLE_FURNI="RWEIEP_CRACKABLE_FURNI",t.BRANDING_OPTIONS="RWEIEP_BRANDING_OPTIONS",t.USABLE="RWEIEP_USABLE",t})()},"6u0Z":function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("y81I");let i=(()=>{class t extends n.a{constructor(t,e){super(t,e)}}return t.OPEN_WIDGET="ROWRE_OPEN_WIDGET",t.CLOSE_WIDGET="ROWRE_CLOSE_WIDGET",t.OPEN_FURNI_CONTEXT_MENU="ROWRE_OPEN_FURNI_CONTEXT_MENU",t.CLOSE_FURNI_CONTEXT_MENU="ROWRE_CLOSE_FURNI_CONTEXT_MENU",t.PLACEHOLDER="ROWRE_PLACEHOLDER",t.CREDITFURNI="ROWRE__CREDITFURNI",t.STICKIE="ROWRE__STICKIE",t.PRESENT="ROWRE_PRESENT",t.TROPHY="ROWRE_TROPHY",t.TEASER="ROWRE_TEASER",t.ECOTRONBOX="ROWRE_ECOTRONBOX",t.DIMMER="ROWRE_DIMMER",t.WIDGET_REMOVE_DIMMER="ROWRE_WIDGET_REMOVE_DIMMER",t.CLOTHING_CHANGE="ROWRE_CLOTHING_CHANGE",t.JUKEBOX_PLAYLIST_EDITOR="ROWRE_JUKEBOX_PLAYLIST_EDITOR",t.MANNEQUIN="ROWRE_MANNEQUIN",t.PET_PRODUCT_MENU="ROWRE_PET_PRODUCT_MENU",t.GUILD_FURNI_CONTEXT_MENU="ROWRE_GUILD_FURNI_CONTEXT_MENU",t.MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG="ROWRE_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG",t.PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG="ROWRE_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG",t.BACKGROUND_COLOR="ROWRE_BACKGROUND_COLOR",t.MYSTERYBOX_OPEN_DIALOG="ROWRE_MYSTERYBOX_OPEN_DIALOG",t.EFFECTBOX_OPEN_DIALOG="ROWRE_EFFECTBOX_OPEN_DIALOG",t.MYSTERYTROPHY_OPEN_DIALOG="ROWRE_MYSTERYTROPHY_OPEN_DIALOG",t.ACHIEVEMENT_RESOLUTION_OPEN="ROWRE_ACHIEVEMENT_RESOLUTION_OPEN",t.ACHIEVEMENT_RESOLUTION_ENGRAVING="ROWRE_ACHIEVEMENT_RESOLUTION_ENGRAVING",t.ACHIEVEMENT_RESOLUTION_FAILED="ROWRE_ACHIEVEMENT_RESOLUTION_FAILED",t.FRIEND_FURNITURE_CONFIRM="ROWRE_FRIEND_FURNITURE_CONFIRM",t.FRIEND_FURNITURE_ENGRAVING="ROWRE_FRIEND_FURNITURE_ENGRAVING",t.BADGE_DISPLAY_ENGRAVING="ROWRE_BADGE_DISPLAY_ENGRAVING",t.HIGH_SCORE_DISPLAY="ROWRE_HIGH_SCORE_DISPLAY",t.HIDE_HIGH_SCORE_DISPLAY="ROWRE_HIDE_HIGH_SCORE_DISPLAY",t.INERNAL_LINK="ROWRE_INTERNAL_LINK",t.ROOM_LINK="ROWRE_ROOM_LINK",t})()},"6vif":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return!0}parse(t){return!!t}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"746L":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("OiFD");class r{flush(){return this._fragment=null,!0}parse(t){this._totalFragments=t.readInt(),this._fragmentNumber=t.readInt();let e=t.readInt();for(this._fragment=new Map;e>0;){const s=new i.a(t);this._fragment.set(s.id,s),e--}return!0}get totalFragments(){return this._totalFragments}get fragmentNumber(){return this._fragmentNumber}get fragment(){return this._fragment}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"75Vd":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"7KS0":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"7d3m":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"7sb4":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._resultType=0,this._messageText=null,!0}parse(t){return!!t&&(this._resultType=t.readInt(),this._messageText=t.readString(),!0)}get resultType(){return this._resultType}get messageText(){return this._messageText}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"81IQ":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._clientMessageId=0,this._errorCode=0,!0}parse(t){return!!t&&(this._clientMessageId=t.readInt(),this._errorCode=t.readInt(),!0)}get clientMessageId(){return this._clientMessageId}get errorCode(){return this._errorCode}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"8Dbs":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._clubLevel=0,this._securityLevel=0,this._isAmbassador=!1,!0}parse(t){return!!t&&(this._clubLevel=t.readInt(),this._securityLevel=t.readInt(),this._isAmbassador=t.readBoolean(),!0)}get clubLevel(){return this._clubLevel}get securityLevel(){return this._securityLevel}get isAmbassador(){return this._isAmbassador}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"8KaG":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._userId=-1,this._userCanTrade=!1,this._otherUserId=-1,this._otherUserCanTrade=!1,!0}parse(t){return!!t&&(this._userId=t.readInt(),this._userCanTrade=1===t.readInt(),this._otherUserId=t.readInt(),this._otherUserCanTrade=1===t.readInt(),!0)}get _Str_4963(){return this._userId}get _Str_16764(){return this._userCanTrade}get _Str_17613(){return this._otherUserId}get _Str_13374(){return this._otherUserCanTrade}}class r extends n.a{constructor(t){super(t,i)}get _Str_4963(){return this.getParser()._Str_4963}get _Str_16764(){return this.getParser()._Str_16764}get _Str_17613(){return this.getParser()._Str_17613}get _Str_13374(){return this.getParser()._Str_13374}getParser(){return this.parser}}},"8PZm":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},"8ZkN":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s,n){this._data=[t,e,s,n]}getMessageArray(){return this._data}dispose(){}}},"8lyR":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._userName=null,!0}parse(t){return!!t&&(this._userName=t.readString(),!0)}get userName(){return this._userName}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"8lyl":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._roomId=0,this._isOwner=!1,!0}parse(t){return!!t&&(this._roomId=t.readInt(),this._isOwner=t.readBoolean(),!0)}get roomId(){return this._roomId}get isOwner(){return this._isOwner}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"8qmW":function(t,e,s){"use strict";s.d(e,"a",function(){return c});var n=s("5+UO"),i=s("P7Cj"),r=s("jBuC");class a{constructor(t){this._itemId=t.readInt(),this._furniType=t.readString().toUpperCase(),this._ref=t.readInt(),this._spriteId=t.readInt(),this._category=t.readInt(),this._isGroupable=t.readBoolean(),this._stuffData=r.a.parseObjectData(t),this._secondsToExpiration=-1,this._Str_5390=i.a.instance.time,this._hasRentPeriodStarted=!1,this._Str_9291=t.readInt(),this._Str_8744=t.readInt(),this._Str_9700=t.readInt(),this._Str_3182="S"===this.furniType?t.readInt():-1,this._flatId=-1,this._rentable=!1,this._isWallItem="I"===this._furniType}get itemId(){return this._itemId}get furniType(){return this._furniType}get ref(){return this._ref}get spriteId(){return this._spriteId}get category(){return this._category}get stuffData(){return this._stuffData}get _Str_2794(){return this._Str_3182}get secondsToExpiration(){return this._secondsToExpiration}get _Str_8932(){return this._Str_9291}get _Str_9050(){return this._Str_8744}get _Str_9408(){return this._Str_9700}get isGroupable(){return this._isGroupable}get _Str_3951(){return this._Str_3182}get flatId(){return this._flatId}get rentable(){return this._rentable}get isWallItem(){return this._isWallItem}get hasRentPeriodStarted(){return this._hasRentPeriodStarted}get _Str_10616(){return this._Str_5390}get isRecycleable(){return!0}get tradable(){return!0}get sellable(){return!0}get slotId(){return null}get _Str_19297(){return-1!==this._furniType.indexOf("external_image")}}class o{flush(){return this._firstUserID=-1,this._firstUserItemArray=null,this._firstUserNumItems=0,this._firstUserNumCredits=0,this._secondUserID=-1,this._secondUserItemArray=null,this._secondUserNumItems=0,this._secondUserNumCredits=0,!0}parse(t){return!(!t||(this._firstUserID=t.readInt(),this._firstUserItemArray=[],!this.parseItems(t,this._firstUserItemArray)||(this._firstUserNumItems=t.readInt(),this._firstUserNumCredits=t.readInt(),this._secondUserID=t.readInt(),this._secondUserItemArray=[],!this.parseItems(t,this._secondUserItemArray)||(this._secondUserNumItems=t.readInt(),this._secondUserNumCredits=t.readInt(),0))))}parseItems(t,e){let s=t.readInt();for(;s>0;)e.push(new a(t)),s--;return!0}get _Str_15162(){return this._firstUserID}get _Str_17841(){return this._firstUserItemArray}get _Str_14946(){return this._firstUserNumItems}get _Str_15709(){return this._firstUserNumCredits}get _Str_18215(){return this._secondUserID}get _Str_17465(){return this._secondUserItemArray}get _Str_13801(){return this._secondUserNumItems}get _Str_9138(){return this._secondUserNumCredits}}class c extends n.a{constructor(t){super(t,o)}get _Str_15162(){return this.getParser()._Str_15162}get _Str_18215(){return this.getParser()._Str_18215}get _Str_14946(){return this.getParser()._Str_14946}get _Str_13801(){return this.getParser()._Str_13801}get _Str_15709(){return this.getParser()._Str_15709}get _Str_9138(){return this.getParser()._Str_9138}get _Str_17841(){return this.getParser()._Str_17841}get _Str_17465(){return this.getParser()._Str_17465}getParser(){return this.parser}}},"9/2a":function(t,e,s){"use strict";s.d(e,"a",function(){return o});var n=s("5+UO"),i=s("/52j");class r{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._level=i.a.NONE,this._userId=0,this._username=null,this._figure=null,!0}parse(t){return!!t&&(this._level=t.readInt(),t.readInt(),this._userId=t.readInt(),this._username=t.readString(),this._figure=t.readString(),!0)}get level(){return this._level}get userId(){return this._userId}get username(){return this._username}get figure(){return this._figure}}class a{flush(){return this._id=0,this._hearts=[],this._smiles=[],this._bobbas=[],!0}parse(t){if(!t)return!1;this._id=t.readInt();let e=t.readInt();for(;e>0;){const s=new r(t);s.level===i.a.HEART?this._hearts.push(s):s.level===i.a.SMILE?this._smiles.push(s):s.level===i.a.BOBBA&&this._bobbas.push(s),e--}return!0}get id(){return this._id}get hearts(){return this._hearts}get smiles(){return this._smiles}get bobbas(){return this._bobbas}}class o extends n.a{constructor(t){super(t,a)}getParser(){return this.parser}}},"9Bkc":function(t,e,s){"use strict";s.d(e,"a",function(){return r});class n{constructor(t,e,s,n){this._id=t,this._type=e,this._color=s,this._light=n}get id(){return this._id}get type(){return this._type}get color(){return this._color}get _Str_4272(){return this._light}}var i=s("Ns5P");let r=(()=>{class t extends i.a{constructor(t,e){super(t,e),this._selectedPresetId=0,this._presets=[]}get _Str_10888(){return this._presets.length}get selectedPresetId(){return this._selectedPresetId}set selectedPresetId(t){this._selectedPresetId=t}_Str_17287(t,e,s,i){const r=new n(t,e,s,i);this._presets[t-1]=r}_Str_14989(t){return t<0||t>=this._presets.length?null:this._presets[t]}}return t.RSDPE_PRESETS="RSDPE_PRESETS",t})()},"9Jti":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("vKkO");class r{flush(){return this._definition=null,!0}parse(t){return!!t&&(this._definition=new i.a(t),!0)}get definition(){return this._definition}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"9L9n":function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("3r1x");let i=(()=>{class t extends n.a{constructor(t){super(t)}get volumeSystem(){return this._volumeSystem}set volumeSystem(t){this._volumeSystem=t}get volumeFurni(){return this._volumeFurni}set volumeFurni(t){this._volumeFurni=t}get volumeTrax(){return this._volumeTrax}set volumeTrax(t){this._volumeTrax=t}get oldChat(){return this._oldChat}set oldChat(t){this._oldChat=t}get roomInvites(){return this._roomInvites}set roomInvites(t){this._roomInvites=t}get cameraFollow(){return this._cameraFollow}set cameraFollow(t){this._cameraFollow=t}get flags(){return this._flags}set flags(t){this._flags=t}get chatType(){return this._chatType}set chatType(t){this._chatType=t}}return t.SETTINGS_UPDATED="NSE_SETTINGS_UPDATED",t})()},"9NDz":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO");class i{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._offerId=-1,this._productCode=null,this._priceCredits=0,this._priceActivityPoints=0,this._priceActivityPointsType=0,this._vip=!1,this._months=0,this._extraDays=0,this._daysLeftAfterPurchase=0,this._year=0,this._month=0,this._day=0,this._giftable=!1,!0}parse(t){return!!t&&(this._offerId=t.readInt(),this._productCode=t.readString(),t.readBoolean(),this._priceCredits=t.readInt(),this._priceActivityPoints=t.readInt(),this._priceActivityPointsType=t.readInt(),this._vip=t.readBoolean(),this._months=t.readInt(),this._extraDays=t.readInt(),this._giftable=t.readBoolean(),this._daysLeftAfterPurchase=t.readInt(),this._year=t.readInt(),this._month=t.readInt(),this._day=t.readInt(),!0)}get offerId(){return this._offerId}get productCode(){return this._productCode}get priceCredits(){return this._priceCredits}get priceActivityPoints(){return this._priceActivityPoints}get priceActivityPointsType(){return this._priceActivityPointsType}get vip(){return this._vip}get months(){return this._months}get extraDays(){return this._extraDays}get daysLeftAfterPurchase(){return this._daysLeftAfterPurchase}get year(){return this._year}get month(){return this._month}get day(){return this._day}get giftable(){return this._giftable}}class r{flush(){return this._offers=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._offers.push(new i(t)),e--;return!0}get offers(){return this._offers}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"9Nxx":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return!0}parse(t){return!!t&&(this._petId=t.readInt(),!0)}get petId(){return this._petId}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"9RxG":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s){this._data=[t,e?1:0,s?1:0]}getMessageArray(){return this._data}dispose(){}}},"9loD":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return!0}parse(t){return!!t}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"9mJe":function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{constructor(t,e,s,n=null){this._id=t,this._location=e,this._targetLocation=s,this._movementType=n}get id(){return this._id}get location(){return this._location}get targetLocation(){return this._targetLocation}get movementType(){return this._movementType}}return t.MOVE="mv",t.SLIDE="sld",t})()},"9vQN":function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{}return t.NONE=0,t.GUEST=1,t.GUILD_MEMBER=2,t.GUILD_ADMIN=3,t.ROOM_OWNER=4,t.MODERATOR=5,t})()},AAYK:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},AFd5:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return!0}parse(t){return!!t}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},AKqU:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._errorCode=-1,!0}parse(t){return!!t&&(this._errorCode=t.readInt(),!0)}get errorCode(){return this._errorCode}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},AUxQ:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("yF7E");let i=(()=>{class t extends n.a{constructor(e){super(null,null),this._type=t.UPDATE_MAP,this._mapData=e}get type(){return this._type}get mapData(){return this._mapData}}return t.UPDATE_MAP="RORMUM_UPDATE_MAP",t})()},AYkW:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s){this._data=[],this._data.push(t),this._data.push(e),this._data.push(s)}getMessageArray(){return this._data}dispose(){}}},Aavw:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e=0){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},Ahnc:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._reason=0,!0}parse(t){return!!t&&(this._reason=t.readInt(),!0)}get reason(){return this._reason}}let r=(()=>{class t extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}return t._Str_18436=6,t._Str_17787=7,t})()},AlQl:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){this._data=null}}},ArMw:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._itemId=0,this._value=0,!0}parse(t){return!!t&&(this._itemId=t.readInt(),this._value=t.readInt(),!0)}get itemId(){return this._itemId}get value(){return this._value}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"Ays+":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class n{constructor(t,e,s){this._layerId=t,this._partId=e,this._paletteId=s}get layerId(){return this._layerId}set layerId(t){this._layerId=t}get partId(){return this._partId}set partId(t){this._partId=t}get paletteId(){return this._paletteId}set paletteId(t){this._paletteId=t}}class i{constructor(t){this._typeId=this.getTypeId(t),this._paletteId=this.getPaletteId(t),this._color=this.getColor(t),this._headOnly=this.getHeadOnly(t);const e=this.getCustomData(t);this._customLayerIds=this.getCustomLayerIds(e),this._customPartIds=this.getCustomPartIds(e),this._customPaletteIds=this.getCustomPaletteIds(e),this._customParts=[];let s=0;for(;s<this._customLayerIds.length;)this._customParts.push(new n(this._customLayerIds[s],this._customPartIds[s],this._customPaletteIds[s])),s++}get typeId(){return this._typeId}get paletteId(){return this._paletteId}get color(){return this._color}get customLayerIds(){return this._customLayerIds}get customPartIds(){return this._customPartIds}get customPaletteIds(){return this._customPaletteIds}get customParts(){return this._customParts}getCustomPart(t){if(this._customParts)for(const e of this._customParts)if(e.layerId===t)return e;return null}get hasCustomParts(){return!(null==this._customLayerIds)&&this._customLayerIds.length>0}get headOnly(){return this._headOnly}get figureString(){let t=this.typeId+" "+this.paletteId+" "+this.color.toString(16);t=t+" "+this.customParts.length;for(const e of this.customParts)t=t+" "+e.layerId+" "+e.partId+" "+e.paletteId;return t}getCustomData(t){let e=[];if(t){const s=t.split(" "),n=this._headOnly?1:0,i=4+n;if(s.length>i){const t=parseInt(s[3+n]);e=s.slice(i,i+3*t)}}return e}getCustomLayerIds(t){const e=[];let s=0;for(;s<t.length;)e.push(parseInt(t[s+0])),s+=3;return e}getCustomPartIds(t){const e=[];let s=0;for(;s<t.length;)e.push(parseInt(t[s+1])),s+=3;return e}getCustomPaletteIds(t){const e=[];let s=0;for(;s<t.length;)e.push(parseInt(t[s+2])),s+=3;return e}getTypeId(t){if(t){const e=t.split(" ");if(e.length>=1)return parseInt(e[0])}return 0}getPaletteId(t){if(t){const e=t.split(" ");if(e.length>=2)return parseInt(e[1])}return 0}getColor(t){if(t){const e=t.split(" ");if(e.length>=3)return parseInt(e[2],16)}return 16777215}getHeadOnly(t){if(t){const e=t.split(" ");if(e.length>=4)return"head"===e[3]}return!1}}},AzHa:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s,n){this._data=[t,e,s,n]}getMessageArray(){return this._data}dispose(){}}},B62z:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},BFtu:function(t,e,s){"use strict";s.d(e,"a",function(){return l});var n=s("IqKQ"),i=s("DFHD");class r{constructor(t,e,s,n){this._x=t,this._y=e,this._width=s,this._height=n}get x(){return this._x}get y(){return this._y}get width(){return this._width}get height(){return this._height}}var a=s("QzjD"),o=s("mkz/");let c=(()=>{class t{constructor(){this._corners=[],this._endPoints=[],this._directions=[],this._lengths=[],this._leftTurns=[],this._borders=[],this._hideWalls=[],this._manuallyLeftCut=[],this._manuallyRightCut=[],this._addDuplicates=!1,this._count=0}_Str_17862(t,e,s,n,i){(this._addDuplicates||this._Str_22484(t,e,s,n,i))&&(this._corners.push(t),this._directions.push(e),this._lengths.push(s),this._borders.push(n),this._leftTurns.push(i),this._hideWalls.push(!1),this._manuallyLeftCut.push(!1),this._manuallyRightCut.push(!1),this._count++)}_Str_22484(t,e,s,n,i){let r=0;for(;r<this._count;){if(this._corners[r].x==t.x&&this._corners[r].y==t.y&&this._directions[r]==e&&this._lengths[r]==s&&this._borders[r]==n&&this._leftTurns[r]==i)return!1;r++}return!0}get count(){return this._count}_Str_10778(t){return this._corners[t]}_Str_19138(t){return this._Str_23674(),this._endPoints[t]}_Str_13743(t){return this._lengths[t]}getDirection(t){return this._directions[t]}_Str_25208(t){return this._borders[t]}_Str_10019(t){return this._hideWalls[t]}_Str_17084(t){return this._leftTurns[t]}_Str_25455(t){return this._manuallyLeftCut[t]}_Str_24163(t){return this._manuallyRightCut[t]}_Str_15901(t,e){this._hideWalls[t]=e}_Str_24531(t,e){e<this._lengths[t]&&(this._lengths[t]=e,this._manuallyRightCut[t]=!0)}_Str_23976(e,s){let i;if(s>0&&s<this._lengths[e]){const r=this._corners[e];i=t.WALL_DIRECTION_VECTORS[this.getDirection(e)],this._corners[e]=new n.Point(r.x+s*i.x,r.y+s*i.y),this._lengths[e]=this._lengths[e]-s,this._manuallyLeftCut[e]=!0}}_Str_23674(){let e,s,i,r,a;if(this._endPoints.length!=this.count)for(this._endPoints=[],e=0;e<this.count;)s=this._Str_10778(e),i=new n.Point(s.x,s.y),r=t.WALL_DIRECTION_VECTORS[this.getDirection(e)],a=this._Str_13743(e),i.x=i.x+r.x*a,i.y=i.y+r.y*a,this._endPoints.push(i),e++}}return t.WALL_DIRECTION_VECTORS=[new i.a(1,0,0),new i.a(0,1,0),new i.a(-1,0,0),new i.a(0,-1,0)],t.WALL_NORMAL_VECTORS=[new i.a(0,1,0),new i.a(-1,0,0),new i.a(0,-1,0),new i.a(1,0,0)],t})(),l=(()=>{class t{constructor(){this._width=0,this._height=0,this._minX=0,this._maxX=0,this._minY=0,this._maxY=0,this._fixedWallHeight=-1,this._floorHeight=0,this._restrictsScaling=!1,this._restrictedScale=1,this._tileMatrix=[],this._tileMatrixOriginal=[],this._planes=[],this._floorHoleMatrix=[],this._wallHeight=3.6,this._wallThicknessMultiplier=1,this._floorThicknessMultiplier=1,this._floorHoles=new Map}static getFloorHeight(t){const e=t.length;if(!e)return 0;let s=0,n=0;for(;n<e;){const e=t[n];let i=0;for(;i<e.length;){const t=e[i];t>s&&(s=t),i++}n++}return s}static findEntranceTile(t){if(!t)return null;const e=t.length;if(!e)return null;const s=[];let i=0;for(;i<e;){const e=t[i];if(!e||!e.length)return null;let n=0;for(;n<e.length;){if(e[n]>=0){s.push(n);break}n++}s.length<i+1&&s.push(e.length+1),i++}for(i=1;i<s.length-1;){if(Math.trunc(s[i])<=Math.trunc(s[i-1])-1&&Math.trunc(s[i])<=Math.trunc(s[i+1])-1)return new n.Point(Math.trunc(0|s[i]),i);i++}return null}static expandFloorTiles(t){let e,s,n,i,r,a,o,c,l,h,u,_;const d=t.length,g=t[0].length,m=[];for(s=0;s<4*d;)m[s]=[],s++;let p=0;for(s=0;s<d;){for(r=0,e=0;e<g;){if(a=t[s][e],a<0||a<=255)for(i=0;i<4;){for(n=0;n<4;)void 0===m[p+i]&&(m[p+i]=[]),m[p+i][r+n]=a<0?a:4*a,n++;i++}else{for(o=4*(255&a),c=o+3*(a>>11&1),l=o+3*(a>>10&1),h=o+3*(a>>9&1),u=o+3*(a>>8&1),n=0;n<3;)_=n+1,m[p][r+n]=(c*(3-n)+l*n)/3,m[p+3][r+_]=(h*(3-_)+u*_)/3,m[p+_][r]=(c*(3-_)+h*_)/3,m[p+n][r+3]=(l*(3-n)+u*n)/3,n++;m[p+1][r+1]=c>o?o+2:o+1,m[p+1][r+2]=l>o?o+2:o+1,m[p+2][r+1]=h>o?o+2:o+1,m[p+2][r+2]=u>o?o+2:o+1}r+=4,e++}p+=4,s++}return m}static addTileTypes(t){let e,s,n,i,r,a,o,c,l,h,u,_,d,g;const m=t.length-1,p=t[0].length-1;for(s=1;s<m;){for(e=1;e<p;)n=t[s][e],n<0||(i=255&t[s-1][e-1],r=255&t[s-1][e],a=255&t[s-1][e+1],o=255&t[s][e-1],c=255&t[s][e+1],l=255&t[s+1][e-1],h=255&t[s+1][e],u=255&t[s+1][e+1],_=n+1,d=n-1,g=(i==_||r==_||o==_?8:0)|(a==_||r==_||c==_?4:0)|(l==_||h==_||o==_?2:0)|(u==_||h==_||c==_?1:0),15==g&&(g=0),t[s][e]=n|g<<8),e++;s++}}static unpadHeightMap(t){t.shift(),t.pop();for(const e of t)e.shift(),e.pop()}static padHeightMap(e){const s=[],n=[];for(const i of e)i.push(t.TILE_BLOCKED),i.unshift(t.TILE_BLOCKED);for(const i of e[0])s.push(t.TILE_BLOCKED),n.push(t.TILE_BLOCKED);e.push(n),e.unshift(s)}get minX(){return this._minX}get maxX(){return this._maxX}get minY(){return this._minY}get maxY(){return this._maxY}get tileMapWidth(){return this._width}get tileMapHeight(){return this._height}get planeCount(){return this._planes.length}get floorHeight(){return-1!=this._fixedWallHeight?this._fixedWallHeight:this._floorHeight}get wallHeight(){return-1!=this._fixedWallHeight?this._fixedWallHeight+3.6:this._wallHeight}set wallHeight(t){t<0&&(t=0),this._wallHeight=t}get wallThicknessMultiplier(){return this._wallThicknessMultiplier}set wallThicknessMultiplier(t){t<0&&(t=0),this._wallThicknessMultiplier=t}get floorThicknessMultiplier(){return this._floorThicknessMultiplier}set floorThicknessMultiplier(t){t<0&&(t=0),this._floorThicknessMultiplier=t}dispose(){this._planes=null,this._tileMatrix=null,this._tileMatrixOriginal=null,this._floorHoleMatrix=null,null!=this._floorHoles&&(this._floorHoles.clear(),this._floorHoles=null)}reset(){this._planes=[],this._tileMatrix=[],this._tileMatrixOriginal=[],this._width=0,this._height=0,this._minX=0,this._maxX=0,this._minY=0,this._maxY=0,this._floorHeight=0,this._floorHoleMatrix=[]}initializeTileMap(e,s){e<0&&(e=0),s<0&&(s=0),this._tileMatrix=[],this._tileMatrixOriginal=[],this._floorHoleMatrix=[];let n=0;for(;n<s;){const s=[],i=[],r=[];let a=0;for(;a<e;)s[a]=t.TILE_BLOCKED,i[a]=t.TILE_BLOCKED,r[a]=!1,a++;this._tileMatrix.push(s),this._tileMatrixOriginal.push(i),this._floorHoleMatrix.push(r),n++}return this._width=e,this._height=s,this._minX=this._width,this._maxX=-1,this._minY=this._height,this._maxY=-1,!0}setTileHeight(t,e,s){let n,i,r,a,o;if(t>=0&&t<this._width&&e>=0&&e<this._height){if(n=this._tileMatrix[e],n[t]=s,s>=0)t<this._minX&&(this._minX=t),t>this._maxX&&(this._maxX=t),e<this._minY&&(this._minY=e),e>this._maxY&&(this._maxY=e);else{if(t==this._minX||t==this._maxX){for(i=!1,r=this._minY;r<this._maxY;){if(this.getTileHeightInternal(t,r)>=0){i=!0;break}r++}i||(t==this._minX&&this._minX++,t==this._maxX&&this._maxX--)}if(e==this._minY||e==this._maxY){for(a=!1,o=this._minX;o<this._maxX;){if(this.getTileHeight(o,e)>=0){a=!0;break}o++}a||(e==this._minY&&this._minY++,e==this._maxY&&this._maxY--)}}return!0}return!1}getTileHeight(e,s){if(e<0||e>=this._width||s<0||s>=this._height)return t.TILE_BLOCKED;const n=this._tileMatrix[s];return void 0===n[e]?0:Math.abs(n[e])}getTileHeightOriginal(e,s){return e<0||e>=this._width||s<0||s>=this._height?t.TILE_BLOCKED:this._floorHoleMatrix[s][e]?t.TILE_HOLE:this._tileMatrixOriginal[s][e]}getTileHeightInternal(e,s){return e<0||e>=this._width||s<0||s>=this._height?t.TILE_BLOCKED:this._tileMatrix[s][e]}initializeFromTileData(e=-1){let s,n;for(this._fixedWallHeight=e,n=0;n<this._height;){for(s=0;s<this._width;)void 0===this._tileMatrixOriginal[n]&&(this._tileMatrixOriginal[n]=[]),this._tileMatrixOriginal[n][s]=this._tileMatrix[n][s],s++;n++}const i=t.findEntranceTile(this._tileMatrix);for(n=0;n<this._height;){for(s=0;s<this._width;)void 0===this._floorHoleMatrix[n]&&(this._floorHoleMatrix[n]=[]),this._floorHoleMatrix[n][s]&&this.setTileHeight(s,n,t.TILE_HOLE),s++;n++}return this.initialize(i)}initialize(e){let s=0;null!=e&&(s=this.getTileHeight(e.x,e.y),this.setTileHeight(e.x,e.y,t.TILE_BLOCKED)),this._floorHeight=t.getFloorHeight(this._tileMatrix),this.createWallPlanes();const n=[];for(const t of this._tileMatrix)n.push(t.concat());t.padHeightMap(n),t.addTileTypes(n),t.unpadHeightMap(n);const r=t.expandFloorTiles(n);return this.extractPlanes(r),null!=e&&(this.setTileHeight(e.x,e.y,s),this.addFloor(new i.a(e.x+.5,e.y+.5,s),new i.a(-1,0,0),new i.a(0,-1,0),!1,!1,!1,!1)),!0}generateWallData(t,e){let s,i,r,a,o;const l=new c,h=[this.extractTopWall.bind(this),this.extractRightWall.bind(this),this.extractBottomWall.bind(this),this.extractLeftWall.bind(this)];let u=0,_=new n.Point(t.x,t.y),d=0;for(;d++<1e3;){if(s=!1,i=!1,r=u,(_.x<this.minX||_.x>this.maxX||_.y<this.minY||_.y>this.maxY)&&(s=!0),a=h[u](_,e),null==a)return null;if(o=Math.abs(a.x-_.x)+Math.abs(a.y-_.y),_.x==a.x||_.y==a.y?(u=(u-1+h.length)%h.length,o+=1,i=!0):(u=(u+1)%h.length,o--),l._Str_17862(_,r,o,s,i),a.x==t.x&&a.y==t.y&&(a.x!=_.x||a.y!=_.y))break;_=a}return 0==l.count?null:l}hidePeninsulaWallChains(t){let e,s,n,i,r=0;const a=t.count;for(;r<a;){const o=r;for(e=r,s=0,n=!1;!t._Str_25208(r)&&r<a;)t._Str_17084(r)?s++:s>0&&s--,s>1&&(n=!0),e=r,r++;if(n)for(i=o;i<=e;)t._Str_15901(i,!0),i++;r++}}updateWallsNextToHoles(e){let s,n,i,r,a,o,l;const h=e.count;let u=0;for(;u<h;){if(!e._Str_10019(u)){for(s=e._Str_10778(u),n=e.getDirection(u),i=e._Str_13743(u),r=c.WALL_DIRECTION_VECTORS[n],a=c.WALL_NORMAL_VECTORS[n],o=0,l=0;l<i;){if(this.getTileHeightInternal(s.x+l*r.x-a.x,s.y+l*r.y-a.y)==t.TILE_HOLE){if(l>0&&0==o){e._Str_24531(u,l);break}o++}else if(o>0){e._Str_23976(u,o);break}l++}o==i&&e._Str_15901(u,!0)}u++}}resolveOriginalWallIndex(t,e,s){let n,i,r,a,o,c;const l=Math.min(t.y,e.y),h=Math.max(t.y,e.y),u=Math.min(t.x,e.x),_=Math.max(t.x,e.x),d=s.count;let g=0;for(;g<d;){if(n=s._Str_10778(g),i=s._Str_19138(g),t.x==e.x){if(n.x==t.x&&i.x==t.x&&(r=Math.min(n.y,i.y),a=Math.max(n.y,i.y),r<=l&&h<=a))return g}else if(t.y==e.y&&n.y==t.y&&i.y==t.y&&(o=Math.min(n.x,i.x),c=Math.max(n.x,i.x),o<=u&&_<=c))return g;g++}return-1}hideOriginallyHiddenWalls(t,e){let s,i,r,a,o;const l=t.count;let h=0;for(;h<l;)t._Str_10019(h)||(s=t._Str_10778(h),i=new n.Point(s.x,s.y),r=c.WALL_DIRECTION_VECTORS[t.getDirection(h)],a=t._Str_13743(h),i.x=i.x+r.x*a,i.y=i.y+r.y*a,o=this.resolveOriginalWallIndex(s,i,e),o>=0?e._Str_10019(o)&&t._Str_15901(h,!0):t._Str_15901(h,!0)),h++}checkWallHiding(t,e){this.hidePeninsulaWallChains(e),this.updateWallsNextToHoles(t),this.hideOriginallyHiddenWalls(t,e)}addWalls(e,s){const n=e.count,r=s.count;let a=0;for(;a<n;){if(!e._Str_10019(a)){const o=e._Str_10778(a),l=e.getDirection(a),h=e._Str_13743(a),u=c.WALL_DIRECTION_VECTORS[l],_=c.WALL_NORMAL_VECTORS[l];let d=-1,g=0;for(;g<h;){const t=this.getTileHeightInternal(o.x+g*u.x+_.x,o.y+g*u.y+_.y);t>=0&&(t<d||d<0)&&(d=t),g++}let m=new i.a(o.x,o.y,d);m=i.a.sum(m,i.a.product(_,.5)),m=i.a.sum(m,i.a.product(u,-.5));const p=this.wallHeight+Math.min(t.MAX_WALL_ADDITIONAL_HEIGHT,this.floorHeight)-d,f=i.a.product(u,-h),E=new i.a(0,0,p);m=i.a.dif(m,f);const S=this.resolveOriginalWallIndex(o,e._Str_19138(a),s);let b=0,v=0;S>=0?(b=s.getDirection((S+1)%r),v=s.getDirection((S-1+r)%r)):(b=e.getDirection((a+1)%n),v=e.getDirection((a-1+n)%n));let I=null;(b-l+4)%4==3?I=c.WALL_NORMAL_VECTORS[b]:(l-v+4)%4==3&&(I=c.WALL_NORMAL_VECTORS[v]);const R=e._Str_17084(a),T=e._Str_17084((a-1+n)%n),y=e._Str_10019((a+1)%n),O=e._Str_25455(a),C=e._Str_24163(a);this.addWall(m,f,E,I,!T||O,!R||C,!y)}a++}}createWallPlanes(){let e,s;const i=this._tileMatrix;if(null==i)return!1;let r,a,o;const c=i.length;let l=0;if(0==c)return!1;for(r=0;r<c;){if(o=i[r],null==o||0==o.length)return!1;l=l>0?Math.min(l,o.length):o.length,r++}const h=Math.min(t.MAX_WALL_ADDITIONAL_HEIGHT,-1!=this._fixedWallHeight?this._fixedWallHeight:t.getFloorHeight(i)),u=this.minX;let _=this.minY;for(_=this.minY;_<=this.maxY;){if(this.getTileHeightInternal(u,_)>t.TILE_HOLE){_--;break}_++}if(_>this.maxY)return!1;const d=new n.Point(u,_),g=this.generateWallData(d,!0),m=this.generateWallData(d,!1);for(null!=g&&(e=g.count,s=m.count,this.checkWallHiding(g,m),this.addWalls(g,m)),a=0;a<this.tileMapHeight;){for(r=0;r<this.tileMapWidth;)this.getTileHeightInternal(r,a)<0&&this.setTileHeight(r,a,-(h+this.wallHeight)),r++;a++}return!0}extractTopWall(e,s){if(null==e)return null;let i=1,r=t.TILE_HOLE;for(s||(r=t.TILE_BLOCKED);i<1e3;){if(this.getTileHeightInternal(e.x+i,e.y)>r)return new n.Point(e.x+i-1,e.y);if(this.getTileHeightInternal(e.x+i,e.y+1)<=r)return new n.Point(e.x+i,e.y+1);i++}return null}extractRightWall(e,s){if(null==e)return null;let i=1,r=t.TILE_HOLE;for(s||(r=t.TILE_BLOCKED);i<1e3;){if(this.getTileHeightInternal(e.x,e.y+i)>r)return new n.Point(e.x,e.y+(i-1));if(this.getTileHeightInternal(e.x-1,e.y+i)<=r)return new n.Point(e.x-1,e.y+i);i++}return null}extractBottomWall(e,s){if(null==e)return null;let i=1,r=t.TILE_HOLE;for(s||(r=t.TILE_BLOCKED);i<1e3;){if(this.getTileHeightInternal(e.x-i,e.y)>r)return new n.Point(e.x-(i-1),e.y);if(this.getTileHeightInternal(e.x-i,e.y-1)<=r)return new n.Point(e.x-i,e.y-1);i++}return null}extractLeftWall(e,s){if(null==e)return null;let i=1,r=t.TILE_HOLE;for(s||(r=t.TILE_BLOCKED);i<1e3;){if(this.getTileHeightInternal(e.x,e.y-i)>r)return new n.Point(e.x,e.y-(i-1));if(this.getTileHeightInternal(e.x+1,e.y-i)<=r)return new n.Point(e.x+1,e.y-i);i++}return null}addWall(e,s,n,r,a,c,l){this.addPlane(o.a.PLANE_WALL,e,s,n,[r]);const h=t.WALL_THICKNESS*this._wallThicknessMultiplier,u=t.FLOOR_THICKNESS*this._floorThicknessMultiplier,_=i.a.crossProduct(s,n),d=i.a.product(_,1/_.length*-h);if(this.addPlane(o.a.PLANE_WALL,i.a.sum(e,n),s,d,[_,r]),a&&this.addPlane(o.a.PLANE_WALL,i.a.sum(i.a.sum(e,s),n),i.a.product(n,-(n.length+u)/n.length),d,[_,r]),c&&(this.addPlane(o.a.PLANE_WALL,i.a.sum(e,i.a.product(n,-u/n.length)),i.a.product(n,(n.length+u)/n.length),d,[_,r]),l)){const t=i.a.product(s,h/s.length);this.addPlane(o.a.PLANE_WALL,i.a.sum(i.a.sum(e,n),i.a.product(t,-1)),t,d,[_,s,r])}}addFloor(e,s,n,r,a,c,l){let h,u,_;null!=this.addPlane(o.a.PLANE_FLOOR,e,s,n)&&(h=t.FLOOR_THICKNESS*this._floorThicknessMultiplier,u=new i.a(0,0,h),_=i.a.dif(e,u),c&&this.addPlane(o.a.PLANE_FLOOR,_,s,u),l&&this.addPlane(o.a.PLANE_FLOOR,i.a.sum(_,i.a.sum(s,n)),i.a.product(s,-1),u),r&&this.addPlane(o.a.PLANE_FLOOR,i.a.sum(_,n),i.a.product(n,-1),u),a&&this.addPlane(o.a.PLANE_FLOOR,i.a.sum(_,s),n,u))}initializeFromMapData(t){if(!t)return!1;this.reset(),this.resetFloorHoles();const e=t.wallHeight,s=t.fixedWallsHeight;if(this.initializeTileMap(t.width,t.height),t.tileMap){let e=0;for(;e<t.tileMap.length;){const s=t.tileMap[e];if(s){let t=0;for(;t<s.length;){const n=s[t];n&&this.setTileHeight(t,e,n.height),t++}}e++}}if(t.holeMap&&t.holeMap.length){let e=0;for(;e<t.holeMap.length;){const s=t.holeMap[e];s&&(this.addFloorHole(s.id,s.x,s.y,s.width,s.height),e++)}this.initializeHoleMap()}return this.wallHeight=e,this.restrictsDragging=t.restrictsDragging,this.restrictsScaling=t.restrictsScaling,this.restrictedScale=t.restrictedScale,this.initializeFromTileData(s),!0}addPlane(t,e,s,n,i=null){if(0==s.length||0==n.length)return null;const r=new o.a(t,e,s,n,i);return this._planes.push(r),r}getMapData(){const t=new a.a;t.width=this._width,t.height=this._height,t.wallHeight=this._wallHeight,t.fixedWallsHeight=this._fixedWallHeight,t.dimensions.minX=this.minX,t.dimensions.maxX=this.maxX,t.dimensions.minY=this.minY,t.dimensions.maxY=this.maxY,t.restrictsDragging=this.restrictsDragging,t.restrictsScaling=this.restrictsScaling,t.restrictedScale=this.restrictedScale;let e=0;for(;e<this._height;){const s=[],n=this._tileMatrixOriginal[e];let i=0;for(;i<this._width;)s.push({height:n[i]}),i++;t.tileMap.push(s),e++}for(const[s,n]of this._floorHoles.entries())n&&t.holeMap.push({id:s,x:n.x,y:n.y,width:n.width,height:n.height});return t}getPlaneLocation(t){if(t<0||t>=this.planeCount)return null;const e=this._planes[t];return e?e.loc:null}getPlaneNormal(t){if(t<0||t>=this.planeCount)return null;const e=this._planes[t];return e?e.normal:null}getPlaneLeftSide(t){if(t<0||t>=this.planeCount)return null;const e=this._planes[t];return e?e._Str_5424:null}getPlaneRightSide(t){if(t<0||t>=this.planeCount)return null;const e=this._planes[t];return e?e._Str_4968:null}getPlaneNormalDirection(t){if(t<0||t>=this.planeCount)return null;const e=this._planes[t];return e?e._Str_25207:null}getPlaneSecondaryNormals(t){let e,s;if(t<0||t>=this.planeCount)return null;const n=this._planes[t];if(null!=n){for(e=[],s=0;s<n._Str_20277;)e.push(n._Str_22585(s)),s++;return e}return null}getPlaneType(t){if(t<0||t>=this.planeCount)return o.a.PLANE_UNDEFINED;const e=this._planes[t];return e?e.type:o.a.PLANE_UNDEFINED}getPlaneMaskCount(t){if(t<0||t>=this.planeCount)return 0;const e=this._planes[t];return e?e._Str_6845:0}getPlaneMaskLeftSideLoc(t,e){if(t<0||t>=this.planeCount)return-1;const s=this._planes[t];return s?s._Str_25133(e):-1}getPlaneMaskRightSideLoc(t,e){if(t<0||t>=this.planeCount)return-1;const s=this._planes[t];return s?s._Str_23609(e):-1}getPlaneMaskLeftSideLength(t,e){if(t<0||t>=this.planeCount)return-1;const s=this._planes[t];return s?s._Str_25097(e):-1}getPlaneMaskRightSideLength(t,e){if(t<0||t>=this.planeCount)return-1;const s=this._planes[t];return s?s._Str_25617(e):-1}addFloorHole(t,e,s,n,i){this.removeFloorHole(t),this._floorHoles.set(t,new r(e,s,n,i))}removeFloorHole(t){this._floorHoles.delete(t)}resetFloorHoles(){this._floorHoles.clear()}initializeHoleMap(){let t,e,s,n,i,r,a,o;for(e=0;e<this._height;){for(s=this._floorHoleMatrix[e],t=0;t<this._width;)s[t]=!1,t++;e++}for(const c of this._floorHoles.values())if(n=c,null!=n)for(i=n.x,r=n.x+n.width-1,a=n.y,o=n.y+n.height-1,i=i<0?0:i,r=r>=this._width?this._width-1:r,a=a<0?0:a,o=o>=this._height?this._height-1:o,e=a;e<=o;){for(s=this._floorHoleMatrix[e],t=i;t<=r;)s[t]=!0,t++;e++}}extractPlanes(t){let e,s,n,r,a,o,c,l,h,u,_,d,g,m,p;const f=t.length,E=t[0].length,S=[];let b=0;for(;b<f;)S[b]=[],b++;let v=0;for(;v<f;){for(e=0;e<E;){if(s=t[v][e],s<0||S[v][e]);else{for(a=0==e||!(t[v][e-1]==s),o=0==v||!(t[v-1][e]==s),n=e+1;n<E&&!(t[v][n]!=s||S[v][n]||v>0&&t[v-1][n]==s==o);)n++;for(c=n==E||!(t[v][n]==s),_=!1,r=v+1;r<f&&!_;){for(l=!(t[r][e]==s),_=l||e>0&&t[r][e-1]==s==a||n<E&&t[r][n]==s==c,h=e;h<n;){if(t[r][h]==s==l){_=!0,n=h;break}h++}if(_)break;r++}for(l=l||r==f,c=n==E||!(t[v][n]==s),u=v;u<r;){for(h=e;h<n;)S[u][h]=!0,h++;u++}d=e/4-.5,g=v/4-.5,m=(n-e)/4,p=(r-v)/4,this.addFloor(new i.a(d+m,g+p,s/4),new i.a(-m,0,0),new i.a(0,-p,0),c,a,l,o)}e++}v++}}get restrictsDragging(){return this._restrictsDragging}set restrictsDragging(t){this._restrictsDragging=t}get restrictsScaling(){return this._restrictsScaling}set restrictsScaling(t){this._restrictsScaling=t}get restrictedScale(){return this._restrictedScale}set restrictedScale(t){this._restrictedScale=t}}return t.FLOOR_THICKNESS=.25,t.WALL_THICKNESS=.25,t.MAX_WALL_ADDITIONAL_HEIGHT=20,t.TILE_BLOCKED=-110,t.TILE_HOLE=-100,t})()},BG3s:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},BIDA:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("hTzv");class r{flush(){return this._allBadgeCodes=[],this._activeBadgeCodes=[],this._badgeIds=null,!0}parse(t){if(!t)return!1;this._allBadgeCodes=[],this._activeBadgeCodes=[],this._badgeIds=new i.a;let e=t.readInt();for(;e>0;){const s=t.readInt(),n=t.readString();this._badgeIds.add(n,s),this._allBadgeCodes.push(n),e--}for(e=t.readInt();e>0;){const s=t.readInt(),n=t.readString();this._activeBadgeCodes[s]=n,e--}return!0}getBadgeId(t){return this._badgeIds.getValue(t)}getAllBadgeCodes(){return this._allBadgeCodes}getActiveBadgeCodes(){return this._activeBadgeCodes}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},BTXg:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{get furniId(){return this._furniId}get start(){return this._start}flush(){return this._furniId=-1,this._start=!1,!0}parse(t){return this._furniId=t.readInt(),this._start=t.readBoolean(),!0}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},BVCN:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._unitId=null,this._effectId=0,this._delay=0,!0}parse(t){return!!t&&(this._unitId=t.readInt(),this._effectId=t.readInt(),this._delay=t.readInt(),!0)}get unitId(){return this._unitId}get effectId(){return this._effectId}get delay(){return this._delay}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},Bbk2:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._itemId=0,this._itemsLeft=0,!0}parse(t){return!!t&&(this._itemId=t.readInt(),this._itemsLeft=t.readInt(),!0)}get itemId(){return this._itemId}get itemsLeft(){return this._itemsLeft}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},BgaL:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},BrMT:function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{}return t.ROOM_MIN_X="room_min_x",t.ROOM_MAX_X="room_max_x",t.ROOM_MIN_Y="room_min_y",t.ROOM_MAX_Y="room_max_y",t.ROOM_IS_PUBLIC="room_is_public",t.ROOM_Z_SCALE="room_z_scale",t.AD_DISPLAY_DELAY="ad_display_delay",t.IS_PLAYING_GAME="is_playing_game",t.RESTRICTS_DRAGGING="restricts_dragging",t.RESTRICTS_SCALING="restricts_scaling",t.RESTRICTED_SCALE="room_scale",t})()},Byou:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{constructor(){this._isEnabled=!1,this._price=null,this._giftWrappers=null,this._boxTypes=null,this._ribbonTypes=null,this._giftFurnis=null}flush(){return this._boxTypes=null,this._giftFurnis=null,this._giftWrappers=null,this._ribbonTypes=null,this._isEnabled=null,this._price=null,!0}parse(t){if(!t)return!1;const e=[],s=[],n=[],i=[];this._isEnabled=t.readBoolean(),this._price=t.readInt();let r=t.readInt(),a=0;for(;a<r;)e.push(t.readInt()),a++;for(r=t.readInt(),a=0;a<r;)s.push(t.readInt()),a++;for(r=t.readInt(),a=0;a<r;)n.push(t.readInt()),a++;for(r=t.readInt(),a=0;a<r;)i.push(t.readInt()),a++;return this._giftWrappers=e,this._ribbonTypes=n,this._giftFurnis=i,this._boxTypes=s,!0}get giftWrappers(){return this._giftWrappers}get ribbonTypes(){return this._ribbonTypes}get giftFurnis(){return this._giftFurnis}get boxTypes(){return this._boxTypes}get isEnabled(){return this._isEnabled}get price(){return this._price}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},C1pE:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},C6IL:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("3r1x");let i=(()=>{class t extends n.a{constructor(t){super(t)}}return t.LOADED="NCE_LOADED",t.FAILED="NCE_FAILED",t})()},CsHF:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},Cyol:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("9vQN");class r{flush(){return this._controllerLevel=i.a.NONE,!0}parse(t){return!!t&&(this._controllerLevel=t.readInt(),!0)}get controllerLevel(){return this._controllerLevel}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},CzV9:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._hideWalls=!1,this._thicknessWall=0,this._thicknessFloor=0,!0}parse(t){if(!t)return!1;this._hideWalls=t.readBoolean();let e=t.readInt(),s=t.readInt();return e=e<-2?-2:e>1?1:e,s=s<-2?-2:s>1?1:s,this._thicknessWall=Math.pow(2,e),this._thicknessFloor=Math.pow(2,s),!0}get hideWalls(){return this._hideWalls}get thicknessWall(){return this._thicknessWall}get thicknessFloor(){return this._thicknessFloor}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"D/zE":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._unitId=null,this._handId=0,!0}parse(t){return!!t&&(this._unitId=t.readInt(),this._handId=t.readInt(),!0)}get unitId(){return this._unitId}get handId(){return this._handId}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},D5bJ:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO");class i{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._rank=-1,this._id=0,this._name=null,this._figure=null,this._joinedAt=null,!0}parse(t){return!!t&&(this._rank=t.readInt(),this._id=t.readInt(),this._name=t.readString(),this._figure=t.readString(),this._joinedAt=t.readString(),!0)}get id(){return this._id}get name(){return this._name}get figure(){return this._figure}get rank(){return this._rank}get joinedAt(){return this._joinedAt}}class r{flush(){return this._groupId=0,this._groupTitle=null,this._roomId=0,this._badge=null,this._totalMembersCount=0,this._result=[],this._admin=!1,this._pageSize=0,this._pageIndex=0,this._level=0,this._query=null,!0}parse(t){if(!t)return!1;this._groupId=t.readInt(),this._groupTitle=t.readString(),this._roomId=t.readInt(),this._badge=t.readString(),this._totalMembersCount=t.readInt();let e=t.readInt();for(;e>0;)this._result.push(new i(t)),e--;return this._admin=t.readBoolean(),this._pageSize=t.readInt(),this._pageIndex=t.readInt(),this._level=t.readInt(),this._query=t.readString(),!0}get groupId(){return this._groupId}get groupTitle(){return this._groupTitle}get roomId(){return this._roomId}get badge(){return this._badge}get totalMembersCount(){return this._totalMembersCount}get result(){return this._result}get admin(){return this._admin}get pageSize(){return this._pageSize}get pageIndex(){return this._pageIndex}get level(){return this._level}get query(){return this._query}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},DACI:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("IqKQ"),i=s("DFHD");let r=(()=>{class t{constructor(t,e,s,n=null){this._updateId=0,this._scale=1,this._x_scale=1,this._y_scale=1,this._z_scale=1,this._x_scale_internal=1,this._y_scale_internal=1,this._z_scale_internal=1,this._clipNear=-500,this._clipFar=500,this._displacements=null,this.scale=t,this._x=new i.a,this._y=new i.a,this._z=new i.a,this._directionAxis=new i.a,this._location=new i.a,this._direction=new i.a,this._depth=new i.a,this._x_scale_internal=1,this._y_scale_internal=1,this.x_scale=1,this.y_scale=1,this._z_scale_internal=Math.sqrt(.5)/Math.sqrt(3/4),this.z_scale=1,this.location=new i.a(s.x,s.y,s.z),this.direction=new i.a(e.x,e.y,e.z),this.setDepthVector(null!=n?n:e),this._displacements=new Map}static getIntersectionVector(t,e,s,n){const r=i.a.dotProduct(e,n);if(Math.abs(r)<1e-5)return null;const a=i.a.dif(t,s),o=-i.a.dotProduct(n,a)/r;return i.a.sum(t,i.a.product(e,o))}get updateId(){return this._updateId}get scale(){return this._scale/Math.sqrt(.5)}set scale(t){t<=1&&(t=1),(t*=Math.sqrt(.5))!=this._scale&&(this._scale=t,this._updateId++)}get directionAxis(){return this._directionAxis}get location(){return this._location.assign(this._loc),this._location.x=this._location.x*this._x_scale,this._location.y=this._location.y*this._y_scale,this._location.z=this._location.z*this._z_scale,this._location}set location(t){if(null==t)return;null==this._loc&&(this._loc=new i.a);const e=this._loc.x,s=this._loc.y,n=this._loc.z;this._loc.assign(t),this._loc.x=this._loc.x/this._x_scale,this._loc.y=this._loc.y/this._y_scale,this._loc.z=this._loc.z/this._z_scale,this._loc.x==e&&this._loc.y==s&&this._loc.z==n||this._updateId++}get direction(){return this._direction}set direction(t){let e,s,n,r,a;if(null==t)return;null==this._dir&&(this._dir=new i.a);const o=this._dir.x,c=this._dir.y,l=this._dir.z;this._dir.assign(t),this._direction.assign(t),this._dir.x==o&&this._dir.y==c&&this._dir.z==l||this._updateId++;const h=new i.a(0,1,0),u=new i.a(0,0,1),_=new i.a(1,0,0),d=t.x/180*Math.PI,g=t.y/180*Math.PI,m=t.z/180*Math.PI,p=Math.cos(d),f=Math.sin(d),E=i.a.sum(i.a.product(h,p),i.a.product(_,-f)),S=new i.a(u.x,u.y,u.z),b=i.a.sum(i.a.product(h,f),i.a.product(_,p)),v=Math.cos(g),I=Math.sin(g),R=new i.a(E.x,E.y,E.z),T=i.a.sum(i.a.product(S,v),i.a.product(b,I)),y=i.a.sum(i.a.product(S,-I),i.a.product(b,v));0!=m?(e=Math.cos(m),s=Math.sin(m),n=i.a.sum(i.a.product(R,e),i.a.product(T,s)),r=i.a.sum(i.a.product(R,-s),i.a.product(T,e)),a=new i.a(y.x,y.y,y.z),this._x.assign(n),this._y.assign(r),this._z.assign(a),this._directionAxis.assign(this._z)):(this._x.assign(R),this._y.assign(T),this._z.assign(y),this._directionAxis.assign(this._z))}set x_scale(t){this._x_scale!=t*this._x_scale_internal&&(this._x_scale=t*this._x_scale_internal,this._updateId++)}set y_scale(t){this._y_scale!=t*this._y_scale_internal&&(this._y_scale=t*this._y_scale_internal,this._updateId++)}set z_scale(t){this._z_scale!=t*this._z_scale_internal&&(this._z_scale=t*this._z_scale_internal,this._updateId++)}dispose(){this._x=null,this._y=null,this._z=null,this._loc=null,this._dir=null,this._directionAxis=null,this._location=null,null!=this._displacements&&(this._displacements.clear(),this._displacements=null)}setDisplacement(t,e){let s,n;null!=t&&null!=e&&null!=this._displacements&&(s=Math.trunc(Math.round(t.x))+"_"+Math.trunc(Math.round(t.y))+"_"+Math.trunc(Math.round(t.z)),this._displacements.delete(s),n=new i.a,n.assign(e),this._displacements.set(s,n),this._updateId++)}getDisplacenent(t){let e;return null!=this._displacements?(e=Math.trunc(Math.round(t.x))+"_"+Math.trunc(Math.round(t.y))+"_"+Math.trunc(Math.round(t.z)),this._displacements.get(e)):null}setDepthVector(t){let e,s,n,r,a;const o=new i.a(0,1,0),c=new i.a(0,0,1),l=new i.a(1,0,0),h=t.x/180*Math.PI,u=t.y/180*Math.PI,_=t.z/180*Math.PI,d=Math.cos(h),g=Math.sin(h),m=i.a.sum(i.a.product(o,d),i.a.product(l,-g)),p=new i.a(c.x,c.y,c.z),f=i.a.sum(i.a.product(o,g),i.a.product(l,d)),E=Math.cos(u),S=Math.sin(u),b=new i.a(m.x,m.y,m.z),v=i.a.sum(i.a.product(p,E),i.a.product(f,S)),I=i.a.sum(i.a.product(p,-S),i.a.product(f,E));0!=_?(e=Math.cos(_),s=Math.sin(_),n=i.a.sum(i.a.product(b,e),i.a.product(v,s)),r=i.a.sum(i.a.product(b,-s),i.a.product(v,e)),a=new i.a(I.x,I.y,I.z),this._depth.assign(a)):this._depth.assign(I),this._updateId++}adjustLocation(t,e){if(null==t||null==this._z)return;const s=i.a.product(this._z,-e),n=new i.a(t.x+s.x,t.y+s.y,t.z+s.z);this.location=n}getCoordinatePosition(t){if(null==t)return null;const e=i.a.scalarProjection(t,this._x),s=i.a.scalarProjection(t,this._y),n=i.a.scalarProjection(t,this._z);return new i.a(e,s,n)}getScreenPosition(t){let e=i.a.dif(t,this._loc);e.x=e.x*this._x_scale,e.y=e.y*this._y_scale,e.z=e.z*this._z_scale;let s=i.a.scalarProjection(e,this._depth);if(s<this._clipNear||s>this._clipFar)return null;let n=i.a.scalarProjection(e,this._x),r=-i.a.scalarProjection(e,this._y);n*=this._scale,r*=this._scale;const a=this.getDisplacenent(t);return null!=a&&(e=i.a.dif(t,this._loc),e.add(a),e.x=e.x*this._x_scale,e.y=e.y*this._y_scale,e.z=e.z*this._z_scale,s=i.a.scalarProjection(e,this._depth)),e.x=n,e.y=r,e.z=s,e}getScreenPoint(t){const e=this.getScreenPosition(t);return null==e?null:new n.Point(e.x,e.y)}getPlanePosition(e,s,r,a){let o,c;const l=-e.y/this._scale,h=i.a.product(this._x,e.x/this._scale);h.add(i.a.product(this._y,l));const u=new i.a(this._loc.x*this._x_scale,this._loc.y*this._y_scale,this._loc.z*this._z_scale);u.add(h);const _=this._z,d=new i.a(s.x*this._x_scale,s.y*this._y_scale,s.z*this._z_scale),g=new i.a(r.x*this._x_scale,r.y*this._y_scale,r.z*this._z_scale),m=new i.a(a.x*this._x_scale,a.y*this._y_scale,a.z*this._z_scale),p=i.a.crossProduct(g,m),f=new i.a;return f.assign(t.getIntersectionVector(u,_,d,p)),null!=f?(f.subtract(d),o=i.a.scalarProjection(f,r)/g.length*r.length,c=i.a.scalarProjection(f,a)/m.length*a.length,new n.Point(o,c)):null}performZoom(){this.scale=this.isZoomedIn()?t.SCALE_ZOOMED_OUT:t.SCALE_ZOOMED_IN}isZoomedIn(){return this.scale==t.SCALE_ZOOMED_IN}performZoomOut(){this.scale=t.SCALE_ZOOMED_OUT}performZoomIn(){this.scale=t.SCALE_ZOOMED_IN}}return t.SCALE_ZOOMED_IN=64,t.SCALE_ZOOMED_OUT=32,t})()},DFHD:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t=0,e=0,s=0){this._x=t,this._y=e,this._z=s,this._length=NaN}static sum(t,e){return t&&e?new n(t.x+e.x,t.y+e.y,t.z+e.z):null}static dif(t,e){return t&&e?new n(t.x-e.x,t.y-e.y,t.z-e.z):null}static product(t,e){return t?new n(t.x*e,t.y*e,t.z*e):null}static dotProduct(t,e){return t&&e?t.x*e.x+t.y*e.y+t.z*e.z:0}static crossProduct(t,e){return t&&e?new n(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x):null}static scalarProjection(t,e){if(!t||!e)return-1;const s=e.length;return s>0?(t.x*e.x+t.y*e.y+t.z*e.z)/s:-1}static cosAngle(t,e){if(!t||!e)return 0;const s=t.length*e.length;return s?n.dotProduct(t,e)/s:0}static isEqual(t,e){return!(!t||!e)&&t.x===e.x&&t.y===e.y&&t.z===e.z}negate(){this._x=-this._x,this._y=-this._y,this._z=-this._z}add(t){t&&(this._x+=t.x,this._y+=t.y,this._z+=t.z,this._length=NaN)}subtract(t){t&&(this._x-=t.x,this._y-=t.y,this._z-=t.z,this._length=NaN)}multiply(t){this._x*=t,this._y*=t,this._z*=t,this._length=NaN}divide(t){this._x/=t,this._y/=t,this._z/=t,this._length=NaN}assign(t){t&&(this._x=t.x,this._y=t.y,this._z=t.z,this._length=NaN)}get x(){return this._x}set x(t){this._x=t,this._length=NaN}get y(){return this._y}set y(t){this._y=t,this._length=NaN}get z(){return this._z}set z(t){this._z=t,this._length=NaN}get length(){return isNaN(this._length)&&(this._length=Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z)),this._length}toString(){return`[Vector3d: ${this._x}, ${this._y}, ${this._z}]`}}},DV2U:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{flush(){return this._roomId=0,this._users=new Map,!0}parse(t){if(!t)return!1;this._roomId=t.readInt();let e=t.readInt();for(;e>0;){const s=t.readInt(),n=t.readString();this._users.set(s,n),e--}return!0}get roomId(){return this._roomId}get users(){return this._users}}},De5v:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){this._data=null}}},DicI:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s,n=-1){this._data=[],this._data.push(t),this._data.push(e),this._data.push(s),-1!=n&&this._data.push(n)}getMessageArray(){return this._data}dispose(){}}},DpKJ:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._amount=0,this._amountChanged=0,this._type=-1,!0}parse(t){return!!t&&(this._amount=t.readInt(),this._amountChanged=t.readInt(),this._type=t.readInt(),!0)}get amount(){return this._amount}get amountChanged(){return this._amountChanged}get type(){return this._type}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"E+Qe":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){this._data=null}}},EAxq:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return!0}parse(t){return!!t}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},EEQp:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s,n=-1){this._data=[],this._data.push(t),this._data.push(e),this._data.push(s),-1!=n&&this._data.push(n)}getMessageArray(){return this._data}dispose(){}}},EHDF:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("Ns5P");let i=(()=>{class t extends n.a{constructor(e,s){super(t.USER_DATA_UPDATED,e),this._addedUsers=s}get addedUsers(){return this._addedUsers}}return t.USER_DATA_UPDATED="RMUDUE_USER_DATA_UPDATED",t})()},Eb1Y:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._ignoredUsers=[],!0}parse(t){if(!t)return!1;this._ignoredUsers=[];let e=t.readInt();for(;e>0;)this._ignoredUsers.push(t.readString()),e--;return!0}get ignoredUsers(){return this._ignoredUsers}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},FV0X:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},FXkd:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s,n,i){this._data=[t,e.length,...e,s,n.length,...n,i]}getMessageArray(){return this._data}dispose(){}}},"Fcb+":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},Fq7D:function(t,e,s){"use strict";s.d(e,"a",function(){return l});var n=s("5+UO");let i=(()=>{class t{constructor(t,e,s,n,i,r,a,o,c,l,h,u,_,d,g,m){this._disposed=!1,this._Str_6036=t,this._state=e,this._Str_2629=s,this._Str_21044=n,this._issueAgeInMilliseconds=i,this._priority=r,this._Str_9559=a,this._Str_21130=o,this._Str_19722=c,this._Str_2797=l,this._Str_5502=h,this._Str_9859=u,this._Str_21393=_,this._message=d,this._Str_10679=g,this._Str_15205=m,this._Str_19084=0}get _Str_2869(){return this._Str_6036}get state(){return this._state}get _Str_2712(){return this._Str_2629}get _Str_7437(){return this._Str_21044}get issueAgeInMilliseconds(){return this._issueAgeInMilliseconds}get priority(){return this._priority}get _Str_16842(){return this._Str_9559}get _Str_19929(){return this._Str_21130}get _Str_19615(){return this._Str_19722}get _Str_2662(){return this._Str_2797}get _Str_5842(){return this._Str_5502}get _Str_5547(){return this._Str_9859}get _Str_22164(){return this._Str_21393}get message(){return this._message}get _Str_20325(){return this._Str_10679}get _Str_26050(){return this._Str_15205}dispose(){if(!this.disposed){for(const t of this._Str_15205)t.dispose();this._Str_15205=[],this._disposed=!0}}get disposed(){return this._disposed}_Str_15885(t){const e=(this._issueAgeInMilliseconds+t-this._Str_19084)/1e3/60,s=e%60,n=e/60;return(n<10?"0":"")+n+":"+(s<10?"0":"")+s}}return t._Str_5035=1,t._Str_8056=2,t._Str_17136=3,t})();class r{constructor(t){this._disposed=!1,this._pattern=t.readString(),this._startIndex=t.readInt(),this._endIndex=t.readInt()}dispose(){this._disposed=!0,this._pattern="",this._startIndex=-1,this._endIndex=-1}get disposed(){return this._disposed}get pattern(){return this._pattern}get startIndex(){return this._startIndex}get endIndex(){return this._endIndex}}class a{get _Str_22192(){return this._Str_13730}flush(){return this._Str_13730=null,!0}parse(t){const e=t.readInt(),s=t.readInt(),n=t.readInt(),a=t.readInt(),o=t.readInt(),c=t.readInt(),l=t.readInt(),h=t.readInt(),u=t.readString(),_=t.readInt(),d=t.readString(),g=t.readInt(),m=t.readString(),p=t.readString(),f=t.readInt(),E=t.readInt(),S=[];let b=0;for(;b<E;)S.push(new r(t)),b++;return this._Str_13730=new i(e,s,n,a,o,c,l,h,u,_,d,g,m,p,f,S),!0}}class o{constructor(t){this._disposed=!1;const e=new a;this._issues=[],this._Str_12818=[],this._Str_14428=[];let s=t.readInt(),n=0;for(;n<s;)e.parse(t)&&this._issues.push(e._Str_22192),n++;for(s=t.readInt(),n=0;n<s;)this._Str_12818.push(t.readString()),n++;for(s=t.readInt(),n=0;n<s;)t.readString(),n++;for(this._Str_21327=t.readBoolean(),this._Str_20034=t.readBoolean(),this._Str_21542=t.readBoolean(),this._Str_22205=t.readBoolean(),this._Str_22169=t.readBoolean(),this._Str_19231=t.readBoolean(),this._Str_19156=t.readBoolean(),s=t.readInt(),n=0;n<s;)this._Str_14428.push(t.readString()),n++}dispose(){this._disposed||(this._disposed=!0,this._Str_12818=null,this._Str_14428=null,this._issues=null)}get disposed(){return this._disposed}get _Str_15690(){return this._Str_12818}get _Str_18336(){return this._Str_14428}get issues(){return this._issues}get _Str_24070(){return this._Str_21327}get _Str_12765(){return this._Str_20034}get _Str_18465(){return this._Str_21542}get _Str_20397(){return this._Str_22205}get _Str_21242(){return this._Str_22169}get _Str_24851(){return this._Str_19231}get _Str_24333(){return this._Str_19156}}class c{constructor(){this._data=null}flush(){return this._data=null,!0}parse(t){return this._data=new o(t),!0}get data(){return this._data}}class l extends n.a{constructor(t){super(t,c)}getParser(){return this.parser}}},Ftck:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return!0}parse(t){return!!t}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},Fv14:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("vuPI"),i=s("Xr/m"),r=s("vzKh");class a extends i.a{constructor(t=null){super(),this._logger=t instanceof r.a?t:new r.a(this.constructor.name),this._events=new n.a,this._isLoaded=!1,this._isLoading=!1}init(){this._isLoaded||this._isLoading||this.isDisposing||(this._isLoading=!0,this.onInit(),this._isLoaded=!0,this._isLoading=!1)}onInit(){}onDispose(){this._events&&this._events.dispose(),super.onDispose()}reload(){this.dispose(),this.init()}get logger(){return this._logger}get events(){return this._events}get isLoaded(){return this._isLoaded}get isLoading(){return this._isLoading}}},Fwdp:function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{flush(){return this._name=null,this._days=0,this._int1=0,this._months=0,this._years=0,this._hasEverBeenMember=!1,this._isVip=!1,this._pastClubDays=0,this._pastVIPDays=0,this._totalSeconds=0,!0}parse(t){return!!t&&(this._name=t.readString(),this._days=t.readInt(),this._int1=t.readInt(),this._months=t.readInt(),this._years=t.readInt(),this._hasEverBeenMember=t.readBoolean(),this._isVip=t.readBoolean(),this._pastClubDays=t.readInt(),this._pastVIPDays=t.readInt(),this._totalSeconds=t.readInt(),!0)}get name(){return this._name}get days(){return this._days}get int1(){return this._int1}get months(){return this._months}get years(){return this._years}get hasEverBeenMember(){return this._hasEverBeenMember}get isVip(){return this._isVip}get pastClubDays(){return this._pastClubDays}get pastVIPDays(){return this._pastVIPDays}get totalSeconds(){return this._totalSeconds}}return t._Str_14729=3,t})()},G0tw:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("3r1x");let i=(()=>{class t extends n.a{constructor(t,e){super(t),this._roomId=e}get roomId(){return this._roomId}}return t.INITIALIZED="REE_INITIALIZED",t.ENGINE_INITIALIZED="REE_ENGINE_INITIALIZED",t.OBJECTS_INITIALIZED="REE_OBJECTS_INITIALIZED",t.NORMAL_MODE="REE_NORMAL_MODE",t.GAME_MODE="REE_GAME_MODE",t.ROOM_ZOOMED="REE_ROOM_ZOOMED",t.DISPOSED="REE_DISPOSED",t})()},G3dz:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO");class i{constructor(t){if(!t)throw new Error("invalid_wrapper");this._avatarId=t.readInt(),this._avatarName=t.readString(),this._avatarMotto=t.readString(),this._isAvatarOnline=t.readBoolean(),this._canFollow=t.readBoolean(),this._lastOnlineData=t.readString(),this._avatarGender=t.readInt(),this._avatarFigure=t.readString(),this._realName=t.readString()}get avatarId(){return this._avatarId}get avatarName(){return this._avatarName}get avatarMotto(){return this._avatarMotto}get isAvatarOnline(){return this._isAvatarOnline}get canFollow(){return this._canFollow}get avatarGender(){return this._avatarGender}get avatarFigure(){return this._avatarFigure}get lastOnlineData(){return this._lastOnlineData}get realName(){return this._realName}}class r{flush(){return this._friends=[],this._others=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._friends.push(new i(t)),e--;let s=t.readInt();for(;s>0;)this._others.push(new i(t)),s--;return!0}get friends(){return this._friends}get others(){return this._others}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},GBA0:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("OiFD");class r{flush(){return this._pet=null,this._boughtAsGift=!1,!0}parse(t){return this._pet=new i.a(t),this._boughtAsGift=t.readBoolean(),!0}get pet(){return this._pet}get boughtAsGift(){return this._boughtAsGift}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},GBmB:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},GFvZ:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},GJWb:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._looks=new Map,!0}parse(t){if(!t)return!1;t.readInt();let e=t.readInt();for(;e>0;){const s=t.readInt(),n=t.readString(),i=t.readString();this._looks.set(s,[n,i]),e--}return!0}get looks(){return this._looks}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"GN+4":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("vzKh"),i=s("M98o");let r=(()=>{class t{static logEventLog(t){try{i.a.available&&i.a.call("logEventLog",t)}catch(e){n.a.log("External interface not working, failed to log event log.")}}static openPage(t){try{i.a.available?i.a.call("openPage",t):n.a.log("External interface not available, openPage failed.")}catch(e){n.a.log("Failed to open web page "+t)}}static sendHeartBeat(){try{i.a.available&&i.a.call("heartBeat")}catch(t){n.a.log("Failed to send heartbeat")}}static openWebPageAndMinimizeClient(e){try{i.a.available&&t.openPage(e)}catch(s){n.a.log("Failed to open web page "+e)}}static closeWebPageAndRestoreClient(){try{i.a.available&&i.a.call("closeWebPageAndRestoreClient")}catch(t){n.a.log("Failed to close web page and restore client!")}}static openHabblet(t,e=null){try{i.a.available&&i.a.call("openHabblet",t,e)}catch(s){n.a.log("Failed to open Habblet "+t)}}static closeHabblet(t,e=null){try{i.a.available&&i.a.call("closeHabblet",t,e)}catch(s){n.a.log("Failed to close Habblet "+t)}}static send(t,e){try{i.a.available&&i.a.call("disconnect",t,e)}catch(s){n.a.log("Failed to close send ")}}static showGame(t){try{i.a.available&&i.a.callGame("showGame",t)}catch(e){n.a.log("Failed to open game: "+e)}}static hideGame(){try{i.a.available&&i.a.callGame("hideGame")}catch(t){n.a.log("Failed to hide game")}}static open(t){try{i.a.available?i.a.call("openExternalLink",escape(t)):n.a.log("External interface not available. Could not request to open: "+t)}catch(e){n.a.log("External interface not working. Could not request to open: "+t)}}static roomVisited(t){try{i.a.available?i.a.call("roomVisited",t):n.a.log("External interface not available. Could not store last room visit.")}catch(e){n.a.log("External interface not working. Could not store last room visit.")}}static openMinimail(t){try{i.a.available?i.a.call("openMinimail",t):n.a.log("External interface not available. Could not open minimail.")}catch(e){n.a.log("External interface not working. Could not open minimail.")}}static openNews(){try{i.a.available?i.a.call("openNews"):n.a.log("External interface not available. Could not open news.")}catch(t){n.a.log("External interface not working. Could not open news.")}}static closeNews(){try{i.a.available?i.a.call("closeNews"):n.a.log("External interface not available. Could not close news.")}catch(t){n.a.log("External interface not working. Could not close news.")}}static openAvatars(){try{i.a.available?i.a.call("openAvatars"):n.a.log("External interface not available. Could not open avatars.")}catch(t){n.a.log("External interface not working. Could not open avatars.")}}static openRoomEnterAd(){try{i.a.available?i.a.call("openRoomEnterAd"):n.a.log("External interface not available. Could not open roomenterad.")}catch(t){n.a.log("External interface not working. Could not open roomenterad.")}}static updateFigure(t){try{i.a.available?i.a.call("updateFigure",t):n.a.log("External interface not available. Could not update figure.")}catch(e){n.a.log("External interface not working. Could not update figure.")}}}return t.ADVERTISEMENT="advertisement",t.OPENLINK="openlink",t.OPENROOM="openroom",t})()},Gb7F:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},GfbW:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("G0tw");let i=(()=>{class t extends n.a{constructor(t,e,s,n,i,r){super(t,e),this._enable=s,this._hue=n,this._saturation=i,this._lightness=r}get enable(){return this._enable}get hue(){return this._hue}get saturation(){return this._saturation}get lightness(){return this._lightness}}return t.ROOM_BACKGROUND_COLOR="ROHSLCEE_ROOM_BACKGROUND_COLOR",t})()},GlfS:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO"),i=s("DV2U");class r extends n.a{constructor(t){super(t,i.a)}getParser(){return this.parser}}},"H/4j":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e=0){this._data=[e,t]}getMessageArray(){return this._data}dispose(){}}},"H/Ns":function(t,e,s){"use strict";s.d(e,"a",function(){return Ft});var n=s("Fv14"),i=s("G0tw"),r=s("Ns5P"),a=s("UTIc");let o=(()=>{class t{}return t.KICKED_OUT_OF_ROOM=4008,t._Str_19451=-13001,t})();var c=s("4vrv"),l=s("Xr/m");class h extends l.a{constructor(t,e){super(),this._connection=t,this._listener=e,this._roomId=0}onDispose(){this._connection=null,this._listener=null}setRoomId(t){this._roomId=t}get connection(){return this._connection}get listener(){return this._listener}get roomId(){return this._roomId}}class u extends h{constructor(t,e){super(t,e),t.addMessageEvent(new a.a(this.onRoomGenericError.bind(this)))}onRoomGenericError(t){if(!(t instanceof a.a))return;const e=t.getParser();if(!e)return;const s=this.listener.getSession(this.roomId);if(!s)return;let n=null;switch(e.errorCode){case o.KICKED_OUT_OF_ROOM:n=c.a.RSEME_KICKED;break;default:return}n&&0!=n.length&&this.listener.events.dispatchEvent(new c.a(n,s))}}var _=s("QXLr"),d=s("HY2+"),g=s("bXGL"),m=s("sRv6"),p=s("xq+5"),f=s("jFxZ"),E=s("HPzH"),S=s("gLCd"),b=s("Z0XG");class v extends h{constructor(t,e){super(t,e),t.addMessageEvent(new m.a(this.onRoomUnitChatEvent.bind(this))),t.addMessageEvent(new p.a(this.onRoomUnitChatEvent.bind(this))),t.addMessageEvent(new f.a(this.onRoomUnitChatEvent.bind(this))),t.addMessageEvent(new E.a(this.onRoomUnitHandItemReceivedEvent.bind(this))),t.addMessageEvent(new _.a(this.onRespectReceivedEvent.bind(this))),t.addMessageEvent(new d.a(this.onFloodControlEvent.bind(this))),t.addMessageEvent(new g.a(this.onRemainingMuteEvent.bind(this)))}onRoomUnitChatEvent(t){if(!this.listener)return;const e=this.listener.getSession(this.roomId);if(!e)return;const s=t.getParser();if(!s)return;let n=b.a.CHAT_NORMAL;t instanceof p.a?n=b.a.CHAT_SHOUT:t instanceof f.a&&(n=b.a.CHAT_WHISPER);const i=new b.a(b.a.CHAT_EVENT,e,s.roomIndex,s.message,n,s.bubble);this.listener.events.dispatchEvent(i)}onRoomUnitHandItemReceivedEvent(t){if(!this.listener)return;const e=this.listener.getSession(this.roomId);if(!e)return;const s=t.getParser();s&&this.listener.events.dispatchEvent(new b.a(b.a.CHAT_EVENT,e,s.giverUserId,"",b.a._Str_8971,S.a.GENERIC,null,s.handItemType))}onRespectReceivedEvent(t){if(!this.listener)return;const e=this.listener.getSession(this.roomId);if(!e)return;const s=t.getParser();if(!s)return;const n=e.userDataManager.getUserData(s.userId);n&&this.listener.events.dispatchEvent(new b.a(b.a.CHAT_EVENT,e,n.roomIndex,"",b.a._Str_5821,S.a.GENERIC))}onFloodControlEvent(t){if(!this.listener)return;const e=this.listener.getSession(this.roomId);if(!e)return;const s=t.getParser();s&&this.listener.events.dispatchEvent(new b.a(b.a.FLOOD_EVENT,e,-1,s.seconds.toString(),0,0))}onRemainingMuteEvent(t){if(!this.listener)return;const e=this.listener.getSession(this.roomId);if(!e)return;const s=t.getParser();s&&this.listener.events.dispatchEvent(new b.a(b.a.CHAT_EVENT,e,e.ownRoomIndex,"",b.a._Str_8909,S.a.GENERIC,null,s.seconds))}}var I=s("10wl");let R=(()=>{class t extends r.a{constructor(t,e){super(t,e)}}return t.RSDUE_ALLOW_PETS="RSDUE_ALLOW_PETS",t})();class T extends h{constructor(t,e){super(t,e),t.addMessageEvent(new I.a(this.onRoomInfoEvent.bind(this)))}onRoomInfoEvent(t){if(!(t instanceof I.a))return;const e=t.getParser();if(!e)return;if(e.roomForward)return;const s=this.listener.getSession(this.roomId);if(!s)return;const n=e.data;s.tradeMode=n.tradeMode,s.isGuildRoom=0!==n.habboGroupId,s.doorMode=n.doorMode,s.allowPets=n.allowPets,s.moderationSettings=e.moderation,this.listener.events.dispatchEvent(new R(R.RSDUE_ALLOW_PETS,s)),this.listener.events.dispatchEvent(new r.a(r.a.ROOM_DATA,s))}}var y=s("/icx"),O=s("9Bkc");class C extends h{constructor(t,e){super(t,e),t.addMessageEvent(new y.a(this._Str_25786.bind(this)))}_Str_25786(t){if(!t)return;const e=t.getParser();if(!e)return;const s=this.listener.getSession(this.roomId);if(!s)return;const n=new O.a(O.a.RSDPE_PRESETS,s);n.selectedPresetId=e._Str_6226;let i=0;for(;i<e._Str_10888;){const t=e._Str_14989(i);t&&n._Str_17287(t.id,t.type,t.color,t.intensity),i++}this.listener&&this.listener.events.dispatchEvent(n)}}var A=s("HkHk"),M=s("Cyol"),w=s("EAxq"),U=s("9vQN");class D extends h{constructor(t,e){super(t,e),t.addMessageEvent(new M.a(this.onRoomRightsEvent.bind(this))),t.addMessageEvent(new A.a(this.onRoomRightsClearEvent.bind(this))),t.addMessageEvent(new w.a(this.onRoomRightsOwnerEvent.bind(this)))}onRoomRightsEvent(t){if(!(t instanceof M.a))return;const e=this.listener.getSession(this.roomId);e&&e.setControllerLevel(t.getParser().controllerLevel)}onRoomRightsClearEvent(t){if(!(t instanceof A.a))return;const e=this.listener.getSession(this.roomId);e&&e.setControllerLevel(U.a.NONE)}onRoomRightsOwnerEvent(t){if(!(t instanceof w.a))return;const e=this.listener.getSession(this.roomId);e&&e.setRoomOwner()}}var N=s("kgJd"),L=s("yd16");class P extends h{constructor(t,e){super(t,e),t&&t.addMessageEvent(new N.a(this.onFurnitureGiftOpenedEvent.bind(this)))}onFurnitureGiftOpenedEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=this.listener.getSession(this.roomId);s&&this.listener&&this.listener.events&&this.listener.events.dispatchEvent(new L.a(L.a.RSPE_PRESENT_OPENED,s,e.classId,e._Str_2887,e.productCode,e.placedItemId,e.placedItemType,e._Str_4057,e.petFigureString))}}var x=s("q4z0"),F=s("pDhE"),k=s("8lyR"),W=s("AFd5"),B=s("zTkZ"),V=s("vrkx");let G=(()=>{class t extends h{constructor(t,e){super(t,e),t.addMessageEvent(new W.a(this.onRoomEnterEvent.bind(this))),t.addMessageEvent(new B.a(this.onRoomModelNameEvent.bind(this))),t.addMessageEvent(new x.a(this.onDesktopViewEvent.bind(this))),t.addMessageEvent(new F.a(this.onRoomDoorbellAcceptedEvent.bind(this))),t.addMessageEvent(new k.a(this.onRoomDoorbellRejectedEvent.bind(this)))}onRoomEnterEvent(e){e instanceof W.a&&this.listener&&this.listener.sessionUpdate(this.roomId,t.RS_CONNECTED)}onRoomModelNameEvent(e){if(!(e instanceof B.a))return;const s=this.roomId,n=e.getParser().roomId;this.listener&&(this.listener.sessionReinitialize(s,n),this.listener.sessionUpdate(this.roomId,t.RS_READY))}onDesktopViewEvent(e){e instanceof x.a&&this.listener&&this.listener.sessionUpdate(this.roomId,t.RS_DISCONNECTED)}onRoomDoorbellAcceptedEvent(t){if(!(t instanceof F.a&&this.listener))return;const e=t.getParser();if(!e)return;const s=e.userName;if(s&&s.length&&this.listener.events){const t=this.listener.getSession(this.roomId);if(!t)return;this.listener.events.dispatchEvent(new V.a(V.a.RSDE_ACCEPTED,t,s))}}onRoomDoorbellRejectedEvent(e){if(!(e instanceof k.a&&this.listener))return;const s=e.getParser();if(!s)return;const n=s.userName;if(n&&n.length){if(this.listener.events){const t=this.listener.getSession(this.roomId);if(!t)return;this.listener.events.dispatchEvent(new V.a(V.a.RSDE_REJECTED,t,n))}}else this.listener.sessionUpdate(this.roomId,t.RS_DISCONNECTED)}}return t.RS_CONNECTED="RS_CONNECTED",t.RS_READY="RS_READY",t.RS_DISCONNECTED="RS_DISCONNECTED",t})();var K=s("wW/F"),H=s("AKqU"),j=s("lDeN"),z=s("00EK"),Y=s("0LNC"),q=s("mGgu"),X=s("fVO9"),Z=s("jzpY"),Q=s("n7CB"),J=s("xB90"),$=s("/3sV"),tt=s("TPa8"),et=s("Qi++"),st=s("e6Xd"),nt=s("hXx8"),it=s("EHDF");class rt{constructor(){this._Str_24910=7}get id(){return this._id}set id(t){this._id=t}get level(){return this._level}set level(t){this._level=t}get maximumLevel(){return this._maximumLevel}set maximumLevel(t){this._maximumLevel=t}get experience(){return this._experience}set experience(t){this._experience=t}get levelExperienceGoal(){return this._levelExperienceGoal}set levelExperienceGoal(t){this._levelExperienceGoal=t}get energy(){return this._energy}set energy(t){this._energy=t}get maximumEnergy(){return this._maximumEnergy}set maximumEnergy(t){this._maximumEnergy=t}get happyness(){return this._happyness}set happyness(t){this._happyness=t}get maximumHappyness(){return this._maximumHappyness}set maximumHappyness(t){this._maximumHappyness=t}get ownerId(){return this._ownerId}set ownerId(t){this._ownerId=t}get ownerName(){return this._ownerName}set ownerName(t){this._ownerName=t}get respect(){return this._respect}set respect(t){this._respect=t}get age(){return this._age}set age(t){this._age=t}get unknownRarity(){return this._unknownRarity}set unknownRarity(t){this._unknownRarity=t}get saddle(){return this._saddle}set saddle(t){this._saddle=t}get rider(){return this._rider}set rider(t){this._rider=t}get _Str_3307(){return this._Str_4460}set _Str_3307(t){this._Str_4460=t}get publiclyRideable(){return this._publiclyRideable}set publiclyRideable(t){this._publiclyRideable=t}get breedable(){return this._breedable}set breedable(t){this._breedable=t}get fullyGrown(){return this._fullyGrown}set fullyGrown(t){this._fullyGrown=t}get dead(){return this._dead}set dead(t){this._dead=t}get rarityLevel(){return this._rarityLevel}set rarityLevel(t){this._rarityLevel=t}get maximumTimeToLive(){return this._maximumTimeToLive}set maximumTimeToLive(t){this._maximumTimeToLive=t}get remainingTimeToLive(){return this._remainingTimeToLive}set remainingTimeToLive(t){this._remainingTimeToLive=t}get remainingGrowTime(){return this._remainingGrowTime}set remainingGrowTime(t){this._remainingGrowTime=t}get publiclyBreedable(){return this._publiclyBreedable}set publiclyBreedable(t){this._publiclyBreedable=t}get _Str_20651(){return this._Str_24910}}class at{constructor(t){this._roomIndex=-1,this._name="",this._type=0,this._sex="",this._figure="",this._custom="",this._webID=0,this._groupID="",this._groupStatus=0,this._groupName="",this._ownerId=0,this._ownerName="",this._petLevel=0,this._rarityLevel=0,this._roomIndex=t}get roomIndex(){return this._roomIndex}get activityPoints(){return this._activityPoints}set activityPoints(t){this._activityPoints=t}get name(){return this._name}set name(t){this._name=t}get type(){return this._type}set type(t){this._type=t}get sex(){return this._sex}set sex(t){this._sex=t}get figure(){return this._figure}set figure(t){this._figure=t}get custom(){return this._custom}set custom(t){this._custom=t}get webID(){return this._webID}set webID(t){this._webID=t}get guildId(){return this._groupID}set guildId(t){this._groupID=t}get groupName(){return this._groupName}set groupName(t){this._groupName=t}get groupStatus(){return this._groupStatus}set groupStatus(t){this._groupStatus=t}get ownerId(){return this._ownerId}set ownerId(t){this._ownerId=t}get ownerName(){return this._ownerName}set ownerName(t){this._ownerName=t}get rarityLevel(){return this._rarityLevel}set rarityLevel(t){this._rarityLevel=t}get hasSaddle(){return this._hasSaddle}set hasSaddle(t){this._hasSaddle=t}get isRiding(){return this._isRiding}set isRiding(t){this._isRiding=t}get canBreed(){return this._canBreed}set canBreed(t){this._canBreed=t}get canHarvest(){return this._canHarvest}set canHarvest(t){this._canHarvest=t}get canRevive(){return this._canRevive}set canRevive(t){this._canRevive=t}get hasBreedingPermission(){return this._hasBreedingPermission}set hasBreedingPermission(t){this._hasBreedingPermission=t}get petLevel(){return this._petLevel}set petLevel(t){this._petLevel=t}get botSkills(){return this._botSkills}set botSkills(t){this._botSkills=t}get isModerator(){return this._Str_9831}set isModerator(t){this._Str_9831=t}}class ot extends h{constructor(t,e){super(t,e),t.addMessageEvent(new X.a(this.onRoomUnitEvent.bind(this))),t.addMessageEvent(new Z.a(this.onRoomUnitInfoEvent.bind(this))),t.addMessageEvent(new Q.a(this.onRoomUnitRemoveEvent.bind(this))),t.addMessageEvent(new q.a(this.onRoomUnitDanceEvent.bind(this))),t.addMessageEvent(new J.a(this.onUserCurrentBadgesEvent.bind(this))),t.addMessageEvent(new z.a(this.onRoomDoorbellEvent.bind(this))),t.addMessageEvent(new $.a(this.onUserNameChangeMessageEvent.bind(this))),t.addMessageEvent(new K.a(this.onNewFriendRequestEvent.bind(this))),t.addMessageEvent(new Y.a(this.onPetInfoEvent.bind(this))),t.addMessageEvent(new j.a(this.onPetPlacingError.bind(this))),t.addMessageEvent(new H.a(this.onBotError.bind(this)))}onRoomUnitEvent(t){if(!this.listener)return;const e=this.listener.getSession(this.roomId);if(!e)return;const s=t.getParser().users,n=[];if(s&&s.length)for(const i of s){if(!i)continue;const t=new at(i.roomIndex);t.name=i.name,t.custom=i.custom,t.activityPoints=i.activityPoints,t.figure=i.figure,t.type=i.userType,t.webID=i.webID,t.guildId=i.groupID,t.groupName=i.groupName,t.groupStatus=i.groupStatus,t.sex=i.sex,t.ownerId=i.ownerId,t.ownerName=i.ownerName,t.rarityLevel=i.rarityLevel,t.hasSaddle=i.hasSaddle,t.isRiding=i.isRiding,t.canBreed=i.canBreed,t.canHarvest=i.canHarvest,t.canRevive=i.canRevive,t.hasBreedingPermission=i.hasBreedingPermission,t.petLevel=i.petLevel,t.botSkills=i.botSkills,t.isModerator=i.isModerator,e.userDataManager.getUserData(i.roomIndex)||n.push(t),e.userDataManager.updateUserData(t)}this.listener.events.dispatchEvent(new it.a(e,n))}onRoomUnitInfoEvent(t){if(!this.listener)return;const e=this.listener.getSession(this.roomId);if(!e)return;const s=t.getParser();s&&(e.userDataManager.updateFigure(s.unitId,s.figure,s.gender,!1,!1),e.userDataManager.updateMotto(s.unitId,s.motto))}onRoomUnitRemoveEvent(t){if(!this.listener)return;const e=this.listener.getSession(this.roomId);e&&e.userDataManager.removeUserData(t.getParser().unitId)}onRoomUnitDanceEvent(t){if(!this.listener)return;const e=t.getParser();if(!e)return;const s=this.listener.getSession(this.roomId);s&&this.listener.events.dispatchEvent(new tt.a(s,e.unitId,e.danceId))}onUserCurrentBadgesEvent(t){if(!this.listener)return;const e=t.getParser();if(!e)return;const s=this.listener.getSession(this.roomId);s&&(s.userDataManager.setUserBadges(e.userId,e.badges),this.listener.events.dispatchEvent(new nt.a(s,e.userId,e.badges)))}onRoomDoorbellEvent(t){if(!this.listener)return;const e=t.getParser();if(!e)return;const s=e.userName;if(!s||!s.length)return;const n=this.listener.getSession(this.roomId);n&&this.listener.events.dispatchEvent(new V.a(V.a.DOORBELL,n,s))}onUserNameChangeMessageEvent(t){if(!this.listener)return;const e=t.getParser();if(!e)return;const s=this.listener.getSession(this.roomId);s&&s.userDataManager.updateName(e.id,e.newName)}onNewFriendRequestEvent(t){if(!this.listener)return;const e=t.getParser();if(!e)return;const s=this.listener.getSession(this.roomId);if(!s)return;const n=e.request;this.listener.events.dispatchEvent(new et.a(s,n.requestId,n.requesterUserId,n.requesterName))}onPetInfoEvent(t){if(!this.listener)return;const e=t.getParser();if(!e)return;const s=this.listener.getSession(this.roomId);if(!s)return;const n=new rt;n.id=e.id,n.level=e.level,n.maximumLevel=e.maximumLevel,n.experience=e.experience,n.levelExperienceGoal=e.levelExperienceGoal,n.energy=e.energy,n.maximumEnergy=e.maximumEnergy,n.happyness=e.happyness,n.maximumHappyness=e.maximumHappyness,n.ownerId=e.ownerId,n.ownerName=e.ownerName,n.respect=e.respect,n.age=e.age,n.unknownRarity=e.unknownRarity,n.saddle=e.saddle,n.rider=e.rider,n.breedable=e.breedable,n.fullyGrown=e.fullyGrown,n.rarityLevel=e.rarityLevel,n.dead=e.dead,n._Str_3307=e._Str_3307,n.publiclyRideable=e.publiclyRideable,n.maximumTimeToLive=e.maximumTimeToLive,n.remainingTimeToLive=e.remainingTimeToLive,n.remainingGrowTime=e.remainingGrowTime,n.publiclyBreedable=e.publiclyBreedable,this.listener.events.dispatchEvent(new st.a(s,n))}onPetPlacingError(t){if(!t)return;if(!this.listener)return;const e=t.getParser();if(!e)return;const s=this.listener.getSession(this.roomId);if(!s)return;let n=null;switch(e.errorCode){case 0:n=c.a.RSEME_PETS_FORBIDDEN_IN_HOTEL;break;case 1:n=c.a.RSEME_PETS_FORBIDDEN_IN_FLAT;break;case 2:n=c.a.RSEME_MAX_PETS;break;case 3:n=c.a.RSEME_NO_FREE_TILES_FOR_PET;break;case 4:n=c.a.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET;break;case 5:n=c.a.RSEME_MAX_NUMBER_OF_OWN_PETS}n&&0!=n.length&&this.listener.events.dispatchEvent(new c.a(n,s))}onBotError(t){if(!t)return;if(!this.listener)return;const e=t.getParser();if(!e)return;const s=this.listener.getSession(this.roomId);if(!s)return;let n=null;switch(e.errorCode){case 0:n=c.a.RSEME_BOTS_FORBIDDEN_IN_HOTEL;break;case 1:n=c.a.RSEME_BOTS_FORBIDDEN_IN_FLAT;break;case 2:n=c.a.RSEME_BOT_LIMIT_REACHED;break;case 3:n=c.a.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT;break;case 4:n=c.a.RSEME_BOT_NAME_NOT_ACCEPTED}n&&0!=n.length&&this.listener.events.dispatchEvent(new c.a(n,s))}}var ct=s("tfDB"),lt=s("5TOT"),ht=s("LKhd"),ut=s("j8oG"),_t=s("QZVO"),dt=s("4hNi"),gt=s("J4cl"),mt=s("0qJb"),pt=s("V2Y4"),ft=s("Poml"),Et=s("p0wa"),St=s("2Rep"),bt=s("YlMy"),vt=s("vUGd"),It=s("Aavw"),Rt=s("OxVo"),Tt=s("gnow"),yt=s("UJeg"),Ot=s("lMbP"),Ct=s("j7GY"),At=s("ekex"),Mt=s("Gb7F"),wt=s("kiCC"),Ut=s("o4p4"),Dt=s("/OJ4"),Nt=s("CsHF"),Lt=s("nMRu");let Pt=(()=>{class t extends l.a{constructor(){super(),this._connection=null,this._userDataByType=new Map,this._userDataByRoomIndex=new Map,this._userBadges=new Map}onDispose(){this._connection=null}setConnection(t){this._connection=t}getUserData(e){return this.getDataByType(e,t.TYPE_USER)}getPetData(e){return this.getDataByType(e,t.TYPE_PET)}getBotData(e){return this.getDataByType(e,t.TYPE_BOT)}getRentableBotData(e){return this.getDataByType(e,t.TYPE_RENTABLE_BOT)}getDataByType(t,e){const s=this._userDataByType.get(e);return s&&s.get(t)||null}getUserDataByIndex(t){return this._userDataByRoomIndex.get(t)||null}getUserDataByName(t){for(const e of this._userDataByRoomIndex.values())if(e&&e.name===t)return e;return null}updateUserData(t){if(!t)return;this.removeUserData(t.roomIndex);let e=this._userDataByType.get(t.type);e||(e=new Map,this._userDataByType.set(t.type,e)),e.set(t.webID,t),this._userDataByRoomIndex.set(t.roomIndex,t)}removeUserData(t){const e=this.getUserDataByIndex(t);if(!e)return;this._userDataByRoomIndex.delete(t);const s=this._userDataByType.get(e.type);s&&s.delete(e.webID)}getUserBadges(t){return this._connection&&this._connection.send(new Lt.a(t)),this._userBadges.get(t)||[]}setUserBadges(t,e){this._userBadges.set(t,e)}updateFigure(t,e,s,n,i){const r=this.getUserDataByIndex(t);r&&(r.figure=e,r.sex=s,r.hasSaddle=n,r.isRiding=i)}updateName(t,e){const s=this.getUserDataByIndex(t);s&&(s.name=e)}updateMotto(t,e){const s=this.getUserDataByIndex(t);s&&(s.custom=e)}requestPetInfo(t){this._connection&&this.getPetData(t)&&this._connection.send(new Nt.a(t))}get connection(){return this._connection}}return t.TYPE_USER=1,t.TYPE_PET=2,t.TYPE_BOT=3,t.TYPE_RENTABLE_BOT=4,t})();class xt extends l.a{constructor(){super(),this._connection=null,this._userData=new Pt,this._roomId=0,this._password=null,this._state=r.a.CREATED,this._tradeMode=Dt.a._Str_12752,this._doorMode=0,this._controllerLevel=U.a.NONE,this._ownRoomIndex=-1,this._isGuildRoom=!1,this._isRoomOwner=!1,this._isDecorating=!1,this._isSpectator=!1,this._moderationSettings=null}onDispose(){this._userData&&(this._userData.dispose(),this._userData=null),this._connection=null}setConnection(t){!this._connection&&t&&(this._connection=t,this._userData&&this._userData.setConnection(t))}setControllerLevel(t){this._controllerLevel=t>=U.a.NONE&&t<=U.a.MODERATOR?t:U.a.NONE}setOwnRoomIndex(t){this._ownRoomIndex=t}setRoomOwner(){this._isRoomOwner=!0}start(){return!(this._state!==r.a.CREATED||!this._connection)&&(this._state=r.a.STARTED,this.enterRoom())}enterRoom(){return!!this._connection&&(this._connection.send(new lt.a(this._roomId,this._password)),!0)}reset(t){t!==this._roomId&&(this._roomId=t)}sendChatMessage(t,e){this._connection.send(new It.a(t,e))}sendShoutMessage(t,e){this._connection.send(new Rt.a(t,e))}sendWhisperMessage(t,e,s){this._connection.send(new Tt.a(t,e,s))}sendChatTypingMessage(t){this._connection.send(t?new yt.a:new Ot.a)}sendMottoMessage(t){this._connection.send(new Ut.a(t))}sendDanceMessage(t){this._connection.send(new At.a(t))}sendExpressionMessage(t){this._connection.send(new Ct.a(t))}sendSignMessage(t){t<0||t>17||this._connection.send(new wt.a(t))}sendPostureMessage(t){this._connection.send(new Mt.a(t))}sendDoorbellApprovalMessage(t,e){this._connection.send(new ct.a(t,e))}sendAmbassadorAlertMessage(t){this._connection.send(new ht.a(t))}sendKickMessage(t){this._connection.send(new dt.a(t))}sendMuteMessage(t,e){this._connection.send(new gt.a(t,e,this._roomId))}sendBanMessage(t,e){this._connection.send(new ut.a(t,this._roomId,e))}sendGiveRightsMessage(t){this._connection.send(new _t.a(t))}sendTakeRightsMessage(t){this._connection.send(new mt.a(t))}updateMoodlightData(t,e,s,n,i){const r="000000"+s.toString(16).toUpperCase(),a="#"+r.substring(r.length-6);this.connection.send(new St.a(t,e,a,n,i))}toggleMoodlightState(){this.connection.send(new bt.a)}pickupPet(t){this._connection&&this._connection.send(new ft.a(t))}pickupBot(t){this._connection&&this._connection.send(new pt.a(t))}requestMoodlightSettings(){this._connection&&this._connection.send(new Et.a)}openGift(t){this._connection.send(new vt.a(t))}get connection(){return this._connection}get userDataManager(){return this._userData}get roomId(){return this._roomId}set roomId(t){this._roomId=t}get password(){return this._password}set password(t){this._password=t}get state(){return this._state}get _Str_7411(){return!0}get tradeMode(){return this._tradeMode}set tradeMode(t){this._tradeMode=t}get doorMode(){return this._doorMode}set doorMode(t){this._doorMode=t}get allowPets(){return this._allowPets}set allowPets(t){this._allowPets=t}get controllerLevel(){return this._controllerLevel}get ownRoomIndex(){return this._ownRoomIndex}get isGuildRoom(){return this._isGuildRoom}set isGuildRoom(t){this._isGuildRoom=t}get isRoomOwner(){return this._isRoomOwner}get isDecorating(){return this._isDecorating}set isDecorating(t){this._isDecorating=t}get isSpectator(){return this._isSpectator}set isSpectator(t){this._isSpectator=t}get moderationSettings(){return this._moderationSettings}set moderationSettings(t){this._moderationSettings=t}}class Ft extends n.a{constructor(t,e){super(),this._communication=t,this._roomEngine=e,this._handlers=[],this._sessions=new Map,this._pendingSession=null,this._sessionStarting=!1,this._viewerSession=null,this.onRoomEngineEvent=this.onRoomEngineEvent.bind(this)}onInit(){this.createHandlers(),this.processPendingSession(),this._roomEngine.events.addEventListener(i.a.ENGINE_INITIALIZED,this.onRoomEngineEvent)}onDispose(){this._roomEngine.events.removeEventListener(i.a.ENGINE_INITIALIZED,this.onRoomEngineEvent),super.onDispose()}createHandlers(){const t=this._communication&&this._communication.connection;t&&this._handlers.push(new v(t,this),new T(t,this),new C(t,this),new D(t,this),new G(t,this),new ot(t,this),new P(t,this),new u(t,this))}setHandlers(t){if(this._handlers&&this._handlers.length)for(const e of this._handlers)e&&e.setRoomId(t.roomId)}onRoomEngineEvent(t){this.processPendingSession()}processPendingSession(){this._pendingSession&&this._roomEngine.ready&&(this.addSession(this._pendingSession),this._pendingSession=null)}getSession(t){return this._sessions.get(this.getRoomId(t))||null}createSession(t,e=null){const s=new xt;return s.roomId=t,s.password=e,this.addSession(s)}addSession(t){return this._roomEngine.ready?(this._sessionStarting=!0,this._sessions.get(this.getRoomId(t.roomId))&&this.removeSession(t.roomId,!1),t.setConnection(this._communication.connection),this._sessions.set(this.getRoomId(t.roomId),t),this.events.dispatchEvent(new r.a(r.a.CREATED,t)),this._viewerSession=t,this.startSession(this._viewerSession),!0):(this._pendingSession=t,!1)}startSession(t){return t.state!==r.a.STARTED&&(this._sessionStarting=!1,t.start()?(this.events.dispatchEvent(new r.a(r.a.STARTED,t)),this.setHandlers(t),!0):(this.removeSession(t.roomId),!1))}removeSession(t,e=!0){const s=this.getSession(t);s&&(this._sessions.delete(this.getRoomId(t)),this.events.dispatchEvent(new r.a(r.a.ENDED,s,e)),s.dispose())}sessionUpdate(t,e){if(this.getSession(t))switch(e){case G.RS_CONNECTED:case G.RS_READY:return;case G.RS_DISCONNECTED:return void this.removeSession(t)}}sessionReinitialize(t,e){const s=this.getSession(t);s&&(this._sessions.delete(this.getRoomId(t)),s.reset(e),this._sessions.set(this.getRoomId(e),s),this.setHandlers(s))}getRoomId(t){return"hard_coded_room_id"}get communication(){return this._communication}get roomEngine(){return this._roomEngine}get viewerSession(){return this._viewerSession}}},HPzH:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._giverUserId=-1,this._handItemType=-1,!0}parse(t){return!!t&&(this._giverUserId=t.readInt(),this._handItemType=t.readInt(),!0)}get giverUserId(){return this._giverUserId}get handItemType(){return this._handItemType}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"HY2+":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._seconds=0,!0}parse(t){return!!t&&(this._seconds=t.readInt(),!0)}get seconds(){return this._seconds}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},HkHk:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return!0}parse(t){return!!t}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},HqZk:function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{}return t.MINIMUM=-2,t.ROOM=0,t.FLOOR=10,t.WALL=20,t.UNIT=100,t.CURSOR=200,t})()},"Hs+C":function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("G0tw");let i=(()=>{class t extends n.a{constructor(t,e,s,n){super(t,e),this._objectId=s,this._category=n}get objectId(){return this._objectId}get category(){return this._category}}return t.SELECTED="REOE_SELECTED",t.DESELECTED="REOE_DESELECTED",t.ADDED="REOE_ADDED",t.REMOVED="REOE_REMOVED",t.PLACED="REOE_PLACED",t.PLACED_ON_USER="REOE_PLACED_ON_USER",t.CONTENT_UPDATED="REOE_CONTENT_UPDATED",t.REQUEST_MOVE="REOE_REQUEST_MOVE",t.REQUEST_ROTATE="REOE_REQUEST_ROTATE",t.MOUSE_ENTER="REOE_MOUSE_ENTER",t.MOUSE_LEAVE="REOE_MOUSE_LEAVE",t})()},HujO:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("zQEY");class r{flush(){return this._roomId=0,this._roomName=null,this._id=0,this._title=null,this._description=null,this._colorA=0,this._colorB=0,this._state=0,this._canMembersDecorate=!1,this._badgeParts=new Map,this._badgeCode=null,this._membersCount=0,!0}parse(t){if(!t)return!1;1===t.readInt()&&(this._roomId=t.readInt(),this._roomName=t.readString(),t.readBoolean()),t.readBoolean(),this._id=t.readInt(),this._title=t.readString(),this._description=t.readString(),t.readInt(),this._colorA=t.readInt(),this._colorB=t.readInt(),this._state=t.readInt(),this._canMembersDecorate=0===t.readInt(),t.readBoolean(),t.readString();const e=t.readInt();for(let s=0;s<e;s++){const e=new i.a(0===s);e.key=t.readInt(),e.color=t.readInt(),e.position=t.readInt(),0===e.key&&(e.position=4),this._badgeParts.set(s,e)}return this._badgeCode=t.readString(),this._membersCount=t.readInt(),!0}get roomId(){return this._roomId}get roomName(){return this._roomName}get id(){return this._id}get title(){return this._title}get description(){return this._description}get colorA(){return this._colorA}get colorB(){return this._colorB}get state(){return this._state}get canMembersDecorate(){return this._canMembersDecorate}get badgeParts(){return this._badgeParts}get badgeCode(){return this._badgeCode}get membersCount(){return this._membersCount}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},I5LT:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._senderId=0,this._messageText=null,!0}parse(t){return!!t&&(this._senderId=t.readInt(),this._messageText=t.readString(),!0)}get senderId(){return this._senderId}get messageText(){return this._messageText}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},IGSi:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("3r1x");let i=(()=>{class t extends n.a{constructor(t,e){super(t),this._contentType=e}get contentType(){return this._contentType}}return t.RCLE_SUCCESS="RCLE_SUCCESS",t.RCLE_FAILURE="RCLE_FAILURE",t.RCLE_CANCEL="RCLE_CANCEL",t})()},IRIx:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._currencies=new Map,!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._currencies.set(t.readInt(),t.readInt()),e--;return!0}get currencies(){return this._currencies}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},IVZI:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._userID=-1,this._userAccepts=!1,!0}parse(t){return!!t&&(this._userID=t.readInt(),this._userAccepts=t.readInt()>0,!0)}get _Str_4963(){return this._userID}get _Str_15794(){return this._userAccepts}}class r extends n.a{constructor(t){super(t,i)}get _Str_4963(){return this.getParser()._Str_4963}get _Str_15794(){return this.getParser()._Str_15794}getParser(){return this.parser}}},"Ie/D":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._aliases=new Map,!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._aliases.set(t.readString(),t.readString()),e--;return!0}get aliases(){return this._aliases}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},IqYK:function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{}return t.FURNITURE_STATIC="furniture_static",t.FURNITURE_ANIMATED="furniture_animated",t.FURNITURE_RESETTING_ANIMATED="furniture_resetting_animated",t.FURNITURE_POSTER="furniture_poster",t.FURNITURE_EXTERNAL_IMAGE="furniture_external_image",t.FURNITURE_HABBOWHEEL="furniture_habbowheel",t.FURNITURE_VAL_RANDOMIZER="furniture_val_randomizer",t.FURNITURE_BOTTLE="furniture_bottle",t.FURNITURE_PLANET_SYSTEM="furniture_planet_system",t.FURNITURE_QUEUE_TILE="furniture_queue_tile",t.FURNITURE_PARTY_BEAMER="furniture_party_beamer",t.FURNITURE_CUBOID="furniture_cuboid",t.FURNITURE_GIFT_WRAPPED="furniture_gift_wrapped",t.FURNITURE_GIFT_WRAPPED_FIREWORKS="furniture_gift_wrapped_fireworks",t.FURNITURE_COUNTER_CLOCK="furniture_counter_clock",t.FURNITURE_WATER_AREA="furniture_water_area",t.FURNITURE_SCORE_BOARD="furniture_score_board",t.FURNITURE_FIREWORKS="furniture_fireworks",t.FURNITURE_BB="furniture_bb",t.FURNITURE_BG="furniture_bg",t.FURNITURE_STICKIE="furniture_stickie",t.FURNITURE_MANNEQUIN="furniture_mannequin",t.FURNITURE_GUILD_CUSTOMIZED="furniture_guild_customized",t.FURNITURE_GUILD_ISOMETRIC_BADGE="furniture_guild_isometric_badge",t.FURNITURE_VOTE_COUNTER="furniture_vote_counter",t.FURNITURE_VOTE_MAJORITY="furniture_vote_majority",t.FURNITURE_SOUNDBLOCK="furniture_soundblock",t.FURNITURE_BADGE_DISPLAY="furniture_badge_display",t.FURNITURE_YOUTUBE="furniture_youtube",t.FURNITURE_BUILDER_PLACEHOLDER="furniture_builder_placeholder",t.ROOM="room",t.USER="user",t.PET_ANIMATED="pet_animated",t.BOT="bot",t.RENTABLE_BOT="rentable_bot",t.TILE_CURSOR="tile_cursor",t})()},IqqQ:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._id=0,this._type=0,this._title=null,this._description=null,this._badge=null,this._roomId=0,this._roomName=null,this._membershipType=0,this._membersCount=0,this._createdAt=null,this._isOwner=!1,this._isAdmin=!1,this._ownerName=null,this._flag=!1,this._canMembersDecorate=!1,this._pendingRequestsCount=0,!0}parse(t){return!!t&&(this._id=t.readInt(),t.readBoolean(),this._type=t.readInt(),this._title=t.readString(),this._description=t.readString(),this._badge=t.readString(),this._roomId=t.readInt(),this._roomName=t.readString(),this._membershipType=t.readInt(),this._membersCount=t.readInt(),t.readBoolean(),this._createdAt=t.readString(),this._isOwner=t.readBoolean(),this._isAdmin=t.readBoolean(),this._ownerName=t.readString(),this._flag=t.readBoolean(),this._canMembersDecorate=t.readBoolean(),this._pendingRequestsCount=t.readInt(),!0)}get id(){return this._id}get type(){return this._type}get title(){return this._title}get description(){return this._description}get badge(){return this._badge}get roomId(){return this._roomId}get roomName(){return this._roomName}get membershipType(){return this._membershipType}get membersCount(){return this._membersCount}get createdAt(){return this._createdAt}get isOwner(){return this._isOwner}get isAdmin(){return this._isAdmin}get ownerName(){return this._ownerName}get flag(){return this._flag}get canMembersDecorate(){return this._canMembersDecorate}get pendingRequestsCount(){return this._pendingRequestsCount}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},IxQr:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("IqKQ"),i=s("P7Cj");let r=(()=>{class t{static generateTexture(e,s=null,i=n.SCALE_MODES.NEAREST,r=1){return e?t.getRenderer().generateTexture(e,i,r,s):null}static generateTextureFromImage(t){return t?n.Texture.from(t):null}static generateImage(e){return e?t.getRenderer().extract.image(e):null}static generateImageUrl(e){return e?t.getRenderer().extract.base64(e):null}static getRenderer(){return t._renderer?t._renderer:i.a.instance.renderer}static setRenderer(e){t._renderer=e}}return t._renderer=null,t})()},J0ap:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("P7Cj"),i=s("jBuC");let r=(()=>{class t{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._rentable=!1,this._itemId=0,this._furniType=null,this._ref=0,this._spriteId=0,this._category=0,this._stuffData=null,this._isGroupable=!1,this._isRecyclable=!1,this._tradable=!1,this._sellable=!1,this._secondsToExpiration=0,this._Str_3182=0,this._flatId=0,this._isWallItem=!1,this._hasRentPeriodStarted=!1,this._Str_5390=0,this._slotId="",this._Str_2808=-1,!0}parse(e){return!!e&&(this._itemId=e.readInt(),this._furniType=e.readString(),this._ref=e.readInt(),this._spriteId=e.readInt(),this._category=e.readInt(),this._stuffData=i.a.parseObjectData(e),this._isRecyclable=e.readBoolean(),this._tradable=e.readBoolean(),this._isGroupable=e.readBoolean(),this._sellable=e.readBoolean(),this._secondsToExpiration=e.readInt(),this._Str_5390=n.a.instance.time,this.secondsToExpiration>-1?this._rentable=!0:(this._rentable=!1,this._secondsToExpiration=-1),this._hasRentPeriodStarted=e.readBoolean(),this._flatId=e.readInt(),this._isWallItem=this._furniType===t.WALL_ITEM,this._furniType===t.FLOOR_ITEM&&(this._slotId=e.readString(),this._Str_3182=e.readInt()),!0)}get itemId(){return this._itemId}get furniType(){return this._furniType}get ref(){return this._ref}get spriteId(){return this._spriteId}get category(){return this._category}get stuffData(){return this._stuffData}get isGroupable(){return this._isGroupable}get isRecycleable(){return this._isRecyclable}get tradable(){return this._tradable}get sellable(){return this._sellable}get secondsToExpiration(){return this._secondsToExpiration}get flatId(){return this._flatId}get slotId(){return this._slotId}get _Str_3951(){return this._Str_2808}get _Str_2794(){return this._Str_3182}get rentable(){return this._rentable}get isWallItem(){return this._isWallItem}get hasRentPeriodStarted(){return this._hasRentPeriodStarted}get _Str_10616(){return this._Str_5390}get _Str_8932(){return 0}get _Str_9050(){return 0}get _Str_9408(){return 0}get _Str_19297(){return!(-1===this._furniType.indexOf("external_image"))}}return t.WALL_ITEM="I",t.FLOOR_ITEM="S",t})()},J0cl:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},J4cl:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s=0){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},JCII:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO");class i{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._roomId=-1,this._areaId=-1,this._image=null,this._caption=null,!0}parse(t){return!!t&&(this._roomId=t.readInt(),this._areaId=t.readInt(),this._image=t.readString(),this._caption=t.readString(),!0)}get roomId(){return this._roomId}get areaId(){return this._areaId}get image(){return this._image}get caption(){return this._caption}}class r{flush(){return this._rooms=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._rooms.push(new i(t)),e--;return!0}get rooms(){return this._rooms}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},JDjE:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._categories=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._categories.push(t.readString()),e--;return!0}get categories(){return this._categories}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},JKJw:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("3r1x");let i=(()=>{class t extends n.a{constructor(e,s){super(t.IMAGE_READY),this._badgeId=e,this._image=s}get badgeId(){return this._badgeId}get image(){return this._image}}return t.IMAGE_READY="BIME_BADGE_IMAGE_READY",t})()},JODW:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("iAsj");class r{flush(){return this._item=null,!0}parse(t){return!!t&&(this._item=new i.a(t),this._item.username=t.readString(),!0)}get item(){return this._item}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},JY8D:function(t){t.exports=JSON.parse('{"a":{"direction":0,"camera":{"x":0,"y":0,"z":10},"canvases":[{"scale":"h","geometries":[{"id":"vertical","width":90,"height":130,"dx":0,"dy":0},{"id":"sitting","width":90,"height":130,"dx":0,"dy":0},{"id":"horizontal","width":128,"height":80,"dx":30,"dy":0},{"id":"swhorizontal","width":192,"height":120,"dx":0,"dy":-40}]},{"scale":"sh","geometries":[{"id":"vertical","width":45,"height":72,"dx":0,"dy":0},{"id":"sitting","width":45,"height":72,"dx":0,"dy":0},{"id":"horizontal","width":64,"height":50,"dx":15,"dy":-10},{"id":"swhorizontal","width":96,"height":70,"dx":0,"dy":-20},{"id":"swim","width":64,"height":70,"dx":25,"dy":10}]}],"avatarSets":[{"id":"full","avatarSets":[{"id":"body","main":true,"bodyParts":[{"id":"top"},{"id":"bottom"},{"id":"behind"},{"id":"torso"},{"id":"leftitem"},{"id":"rightitem"},{"id":"leftarm"},{"id":"rightarm"}]},{"id":"head","bodyParts":[{"id":"head"}]}]}],"types":[{"id":"vertical","bodyParts":[{"id":"top","x":0,"y":0,"z":0,"radius":2},{"id":"bottom","x":0,"y":0,"z":0,"radius":0.001},{"id":"behind","x":0,"y":0,"z":0.2,"radius":0.3},{"id":"torso","x":0,"y":0,"z":0,"radius":0.4,"items":[{"id":"bd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"bds","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"ch","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"sh","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lg","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ss","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"cp","x":0,"y":0,"z":0,"radius":0.045,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"wa","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"cc","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ca","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"leftitem","x":0,"y":0,"z":-0.29,"radius":0.3,"items":[{"id":"li","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"rightitem","x":0,"y":0,"z":-0.29,"radius":0.3,"items":[{"id":"ri","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"leftarm","x":-1,"y":0,"z":-0.51,"radius":0.5,"items":[{"id":"lh","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lhs","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ls","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lc","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"rightarm","x":1,"y":0,"z":-0.51,"radius":0.5,"items":[{"id":"rh","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rhs","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rs","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rc","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"head","x":0,"y":0,"z":0,"radius":0.5,"items":[{"id":"hd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fc","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ey","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"hr","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"hrb","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fa","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ea","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ha","x":0,"y":0,"z":0,"radius":0.08,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"he","x":0,"y":0,"z":0,"radius":0.09,"nx":0,"ny":0,"nz":-1,"double":false}]}]},{"id":"sitting","bodyParts":[{"id":"top","x":0,"y":0,"z":0,"radius":2},{"id":"bottom","x":0,"y":0,"z":0,"radius":0.001},{"id":"behind","x":0,"y":0,"z":0.2,"radius":0.3},{"id":"torso","x":0,"y":0,"z":0,"radius":0.4,"items":[{"id":"bd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"bds","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"ch","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"sh","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lg","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ss","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"cp","x":0,"y":0,"z":0,"radius":0.045,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"wa","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"cc","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ca","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"leftitem","x":0,"y":0,"z":-0.29,"radius":0.3,"items":[{"id":"li","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"rightitem","x":0,"y":0,"z":-0.29,"radius":0.3,"items":[{"id":"ri","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"leftarm","x":-1,"y":0,"z":-0.51,"radius":0.5,"items":[{"id":"lh","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lhs","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ls","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lc","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"rightarm","x":1,"y":0,"z":-0.51,"radius":0.5,"items":[{"id":"rh","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rhs","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rs","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rc","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"head","x":0,"y":0,"z":0,"radius":0.5,"items":[{"id":"hd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fc","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ey","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"hr","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"hrb","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fa","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ea","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ha","x":0,"y":0,"z":0,"radius":0.08,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"he","x":0,"y":0,"z":0,"radius":0.09,"nx":0,"ny":0,"nz":-1,"double":false}]}]},{"id":"horizontal","bodyParts":[{"id":"torso","x":0,"y":0,"z":0,"radius":0.4,"items":[{"id":"bd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"bds","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"ch","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"cp","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"sh","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lg","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ss","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"wa","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"cc","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ca","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"leftitem","x":0,"y":0,"z":-0.29,"radius":0.3,"items":[{"id":"li","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"rightitem","x":0,"y":0,"z":-0.29,"radius":0.3,"items":[{"id":"ri","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"leftarm","x":-1,"y":0,"z":-0.51,"radius":0.6,"items":[{"id":"lh","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lhs","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ls","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lc","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"rightarm","x":1,"y":0,"z":-0.51,"radius":0.6,"items":[{"id":"rh","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rhs","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rs","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rc","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"head","x":0,"y":0,"z":0,"radius":0.5,"items":[{"id":"hd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fc","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ey","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"hr","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"hrb","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fa","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ea","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ha","x":0,"y":0,"z":0,"radius":0.08,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"he","x":0,"y":0,"z":0,"radius":0.09,"nx":0,"ny":0,"nz":-1,"double":false}]}]},{"id":"swhorizontal","bodyParts":[{"id":"torso","x":0,"y":0,"z":0,"radius":0.4,"items":[{"id":"bd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"bds","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"ch","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"cp","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"sh","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lg","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ss","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"wa","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"cc","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ca","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"leftitem","x":0,"y":0,"z":-0.29,"radius":0.3,"items":[{"id":"li","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"rightitem","x":0,"y":0,"z":-0.29,"radius":0.3,"items":[{"id":"ri","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"leftarm","x":-1,"y":0,"z":-0.51,"radius":0.6,"items":[{"id":"lh","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lhs","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ls","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lc","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"rightarm","x":1,"y":0,"z":-0.51,"radius":0.6,"items":[{"id":"rh","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rhs","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rs","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rc","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"head","x":0,"y":0,"z":0,"radius":0.5,"items":[{"id":"hd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fc","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ey","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"hr","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"hrb","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fa","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ea","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ha","x":0,"y":0,"z":0,"radius":0.08,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"he","x":0,"y":0,"z":0,"radius":0.09,"nx":0,"ny":0,"nz":-1,"double":false}]}]},{"id":"swim","bodyParts":[{"id":"torso","x":0,"y":0,"z":0,"radius":0.4,"items":[{"id":"bds","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"ss","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"head","x":0,"y":0,"z":0,"radius":0.5,"items":[{"id":"hd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fc","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ey","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"hr","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"hrb","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fa","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ea","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ha","x":0,"y":0,"z":0,"radius":0.08,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"he","x":0,"y":0,"z":0,"radius":0.09,"nx":0,"ny":0,"nz":-1,"double":false}]}]}]}}')},KAV2:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s,n,i=-1){this._data=[],this._data.push(t),this._data.push(e),this._data.push(s),this._data.push(n),-1!=i&&this._data.push(i)}getMessageArray(){return this._data}dispose(){}}},KJ3T:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._minutes=null,!0}parse(t){return!!t&&(this._minutes=t.readInt(),!0)}get minutes(){return this._minutes}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},KQVX:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s,n){this._data=[t,e,s,n]}getMessageArray(){return this._data}dispose(){}}},KQk8:function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{}return t.LEGACY_KEY=0,t.MAP_KEY=1,t.STRING_KEY=2,t.VOTE_KEY=3,t.EMPTY_KEY=4,t.NUMBER_KEY=5,t.HIGHSCORE_KEY=6,t.CRACKABLE_KEY=7,t})()},KjXG:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._unitId=null,this._isIdle=!1,!0}parse(t){return!!t&&(this._unitId=t.readInt(),this._isIdle=t.readBoolean(),!0)}get unitId(){return this._unitId}get isIdle(){return this._isIdle}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},KsdP:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO"),i=s("Zim7");class r extends n.a{constructor(t){super(t,i.a)}getParser(){return this.parser}}},"Kx+W":function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{}return t.FULL="full",t.HEAD="head",t.BODY="body",t})()},LKhd:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},LPTP:function(t){t.exports=JSON.parse('{"a":{"partSet":[{"setType":"ri","flippedSetType":"ri"},{"setType":"ri","flippedSetType":"ri"},{"setType":"rh","flippedSetType":"lh"},{"setType":"rhs","flippedSetType":"lhs"},{"setType":"rs","swim":"0","flippedSetType":"ls"},{"setType":"rc","flippedSetType":"lc"},{"setType":"bd"},{"setType":"bds"},{"setType":"ss"},{"setType":"sh"},{"setType":"lg"},{"setType":"ch"},{"setType":"cp"},{"setType":"cc"},{"setType":"hd"},{"setType":"fc"},{"setType":"ey"},{"setType":"hr"},{"setType":"hrb","removeSetType":"hr"},{"setType":"li","flippedSetType":"li"},{"setType":"lh","flippedSetType":"rh"},{"setType":"lhs","flippedSetType":"rhs"},{"setType":"ls","flippedSetType":"rs"},{"setType":"lc","flippedSetType":"rc"},{"setType":"wa"},{"setType":"ea"},{"setType":"ca"},{"setType":"fa"},{"setType":"ha"},{"setType":"he"}],"activePartSets":[{"id":"figure","activeParts":[{"setType":"rh"},{"setType":"rh"},{"setType":"rhs"},{"setType":"rs"},{"setType":"rc"},{"setType":"bd"},{"setType":"bds"},{"setType":"ss"},{"setType":"sh"},{"setType":"lg"},{"setType":"ch"},{"setType":"cp"},{"setType":"cc"},{"setType":"wa"},{"setType":"hd"},{"setType":"fc"},{"setType":"ey"},{"setType":"hr"},{"setType":"hrb"},{"setType":"lh"},{"setType":"lhs"},{"setType":"ls"},{"setType":"lc"},{"setType":"ea"},{"setType":"ca"},{"setType":"fa"},{"setType":"ha"},{"setType":"he"}]},{"id":"head","activeParts":[{"setType":"hd"},{"setType":"fc"},{"setType":"ey"},{"setType":"hr"},{"setType":"hrb"},{"setType":"ea"},{"setType":"fa"},{"setType":"ha"},{"setType":"he"}]},{"id":"speak","activeParts":[{"setType":"hd"},{"setType":"hr"},{"setType":"hrb"},{"setType":"fc"},{"setType":"fa"},{"setType":"ha"}]},{"id":"gesture","activeParts":[{"setType":"ey"},{"setType":"fc"}]},{"id":"eye","activeParts":[{"setType":"ey"}]},{"id":"handRight","activeParts":[{"setType":"rh"},{"setType":"rhs"},{"setType":"rs"},{"setType":"rc"},{"setType":"ri"}]},{"id":"handRightAndHead","activeParts":[{"setType":"rh"},{"setType":"rhs"},{"setType":"rs"},{"setType":"rc"},{"setType":"ri"},{"setType":"ey"},{"setType":"fc"},{"setType":"hd"}]},{"id":"handLeft","activeParts":[{"setType":"lh"},{"setType":"lhs"},{"setType":"ls"},{"setType":"lc"},{"setType":"li"}]},{"id":"walk","activeParts":[{"setType":"bd"},{"setType":"bds"},{"setType":"ss"},{"setType":"lg"},{"setType":"lh"},{"setType":"lhs"},{"setType":"rh"},{"setType":"rhs"},{"setType":"ls"},{"setType":"lc"},{"setType":"rs"},{"setType":"rc"},{"setType":"sh"}]},{"id":"sit","activeParts":[{"setType":"bd"},{"setType":"bds"},{"setType":"ss"},{"setType":"lg"},{"setType":"sh"},{"setType":"cc"}]},{"id":"itemRight","activeParts":[{"setType":"ri"}]}]}}')},LRPw:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},LSEE:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},LWqD:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._badges=[]}getMessageArray(){const t=[];let e=1;for(;e<=8;)e<=this._badges.length?(t.push(e),t.push(this._badges[e-1])):(t.push(e),t.push("")),e++;return t}dispose(){}addActivatedBadge(t){this._badges.length>=8||this._badges.push(t)}}},Ly0c:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("BFtu");class i{flush(){return this._model=null,this._width=0,this._height=0,this._wallHeight=-1,this._heightMap=[],this._scale=64,this._model=null,!0}parse(t){if(!t)return!1;const e=t.readBoolean(),s=t.readInt(),n=t.readString();return this.parseExplicitly(n,s,e)}parseModel(t,e,s=!0){return this.parseExplicitly(t,e,s)}parseExplicitly(t,e,s=!0){this._scale=s?32:64,this._wallHeight=e,this._model=t;const i=this._model.split("\r"),r=i.length;let a=0,o=0;for(;o<r;){const t=i[o];t.length>a&&(a=t.length),o++}for(this._heightMap=[],o=0;o<r;){const t=[];let e=0;for(;e<a;)t.push(n.a.TILE_BLOCKED),e++;this._heightMap.push(t),o++}for(this._width=a,this._height=r,o=0;o<r;){const t=this._heightMap[o],e=i[o];if(e.length>0){let s=0;for(;s<e.length;){const i=e.charAt(s);let r=n.a.TILE_BLOCKED;"x"!==i&&"X"!==i&&(r=parseInt(i,36)),t[s]=r,s++}}o++}return!0}getHeight(t,e){if(t<0||t>=this._width||e<0||e>=this._height)return-110;const s=this._heightMap[e];if(void 0===s)return-110;const n=s[t];return void 0===n?-110:n}get model(){return this._model}get width(){return this._width}get height(){return this._height}get heightMap(){return this._heightMap}get wallHeight(){return this._wallHeight}get scale(){return this._scale}}},M98o:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{static get available(){return!0}static call(t,...e){if(window.top!==window&&window.top.postMessage("Nitro_LegacyExternalInterface"+JSON.stringify({method:t,params:e}),"*"),!("FlashExternalInterface"in window))return;const s=window.FlashExternalInterface[t];return void 0!==s?s(...e):void 0}static callGame(t,...e){if(window.top!==window&&window.top.postMessage("Nitro_LegacyExternalGameInterface"+JSON.stringify({method:t,params:e}),"*"),!("FlashExternalGameInterface"in window))return;const s=window.FlashExternalGameInterface[t];return void 0!==s?s(...e):void 0}static addCallback(t,e){window[t]=e}}},MeCd:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("XMGm");let i=(()=>{class t{}return t.UNIQUE_SET=256,t})();class r{constructor(){this._flags=0,this._uniqueNumber=0,this._uniqueSeries=0}parseWrapper(t){(this._flags&i.UNIQUE_SET)>0&&(this._uniqueNumber=t.readInt(),this._uniqueSeries=t.readInt())}initializeFromRoomObjectModel(t){this._uniqueNumber=t.getValue(n.a.FURNITURE_UNIQUE_SERIAL_NUMBER),this._uniqueSeries=t.getValue(n.a.FURNITURE_UNIQUE_EDITION_SIZE)}writeRoomObjectModel(t){t&&(t.setValue(n.a.FURNITURE_UNIQUE_SERIAL_NUMBER,this._uniqueNumber),t.setValue(n.a.FURNITURE_UNIQUE_EDITION_SIZE,this._uniqueSeries))}getLegacyString(){return""}compare(t){return!1}get state(){const t=parseInt(this.getLegacyString());return isNaN(t)?0:t}get isUnique(){return this._uniqueSeries>0}get uniqueNumber(){return this._uniqueNumber}get uniqueSeries(){return this._uniqueSeries}get flags(){return this._flags}set flags(t){this._flags=t}}},Mixc:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"N+Yd":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._typeId=t.readInt(),this._paletteId=t.readInt(),this._color=t.readString(),this._breedId=t.readInt(),this._customParts=[],this._customPartCount=t.readInt();let e=0;for(;e<this._customPartCount;)this._customParts.push(t.readInt()),this._customParts.push(t.readInt()),this._customParts.push(t.readInt()),e++}get typeId(){return this._typeId}get paletteId(){return this._paletteId}get color(){return this._color}get breedId(){return this._breedId}get figuredata(){let t=this.typeId+" "+this.paletteId+" "+this.color;t=t+" "+this.custompartCount;for(const e of this.customParts)t=t+" "+e;return t}get customParts(){return this._customParts}get custompartCount(){return this._customPartCount}}},NLfn:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},NUif:function(t,e,s){t.exports=s.p+"0.1e354392783b7d7e25bf.worker.js"},Nakt:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO"),i=s("jBuC");class r extends n.a{constructor(t){super(t,i.a)}getParser(){return this.parser}}},Nd6c:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},NjFb:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},Njml:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("1+1A");class r{flush(){return this._item=null,!0}parse(t){return!!t&&(this._item=new i.a(t),!0)}get item(){return this._item}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},NpwP:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._unitId=null,this._value=0,!0}parse(t){return!!t&&(this._unitId=t.readInt(),this._value=t.readInt(),!0)}get unitId(){return this._unitId}get value(){return this._value}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},Ns5P:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("3r1x");let i=(()=>{class t extends n.a{constructor(t,e,s=!0){super(t),this._session=e,this._openLandingView=s}get session(){return this._session}get openLandingView(){return this._openLandingView}}return t.CREATED="RSE_CREATED",t.STARTED="RSE_STARTED",t.ENDED="RSE_ENDED",t.ROOM_DATA="RSE_ROOM_DATA",t})()},"O/2Q":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._result=-1,this._name=null,!0}parse(t){return!!t&&(this._result=t.readInt(),this._name=t.readString(),!0)}get result(){return this._result}get name(){return this._name}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},OGjZ:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e=-100){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},OLXM:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,...e){this._data=[t,e.length,...e]}getMessageArray(){return this._data}dispose(){}}},ObWd:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._itemId=0,this._state=0,!0}parse(t){return!!t&&(this._itemId=t.readInt(),this._state=t.readInt(),!0)}get itemId(){return this._itemId}get state(){return this._state}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},Oh4I:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s,n,i,r,a,o,c,l,h,u,_,d,g,m,p,f,E,S,b,v,I,R){this._data=[t,e,s,n,i,r,a,o,c,l,h,u,_,d,g,m,p,f,E,S,b,v,I,R]}getMessageArray(){return this._data}dispose(){}}},OiFD:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("N+Yd");class i{constructor(t){if(!t)throw new Error("invalid_wrapper");this._id=t.readInt(),this._name=t.readString(),this._figureData=new n.a(t),this._level=t.readInt()}get id(){return this._id}get name(){return this._name}get typeId(){return this._figureData.typeId}get paletteId(){return this._figureData.paletteId}get color(){return this._figureData.color}get _Str_3343(){return this._figureData.breedId}get _Str_13619(){return this._figureData.custompartCount}get _Str_4217(){return this._figureData.figuredata}get figureData(){return this._figureData}get level(){return this._level}}},OxVo:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},P0eX:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return!0}parse(t){return!!t}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},P5vI:function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._productType=null,this._furniClassId=-1,this._extraParam=null,this._productCount=0,this._uniqueLimitedItem=!1,this._uniqueLimitedItemSeriesSize=0,this._uniqueLimitedItemsLeft=0,!0}parse(e){switch(this._productType=e.readString(),this._productType){case t.B:return this._extraParam=e.readString(),this._productCount=1,!0;default:return this._furniClassId=e.readInt(),this._extraParam=e.readString(),this._productCount=e.readInt(),this._uniqueLimitedItem=e.readBoolean(),this._uniqueLimitedItem&&(this._uniqueLimitedItemSeriesSize=e.readInt(),this._uniqueLimitedItemsLeft=e.readInt()),!0}}get productType(){return this._productType}get furniClassId(){return this._furniClassId}get extraParam(){return this._extraParam}get productCount(){return this._productCount}get uniqueLimitedItem(){return this._uniqueLimitedItem}get uniqueLimitedSeriesSize(){return this._uniqueLimitedItemSeriesSize}get uniqueLimitedItemsLeft(){return this._uniqueLimitedItemsLeft}}return t.I="i",t.S="s",t.E="e",t.B="b",t})()},P7Cj:function(t,e,s){"use strict";(function(t){s.d(e,"a",function(){return S});var n=s("IqKQ"),i=s("C6IL"),r=s("vuPI"),a=s("3r1x"),o=s("1cH2"),c=s("R5Ri"),l=s("Xmmk"),h=s("XpxF"),u=s("0gOM"),_=(s("M98o"),s("vkSA")),d=s("hBKr"),g=s("G0tw"),m=s("3h45"),p=s("H/Ns"),f=s("i7vr"),E=s("GN+4");n.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,n.settings.SCALE_MODE=n.SCALE_MODES.NEAREST;let S=(()=>{class e extends n.Application{constructor(s,n){super(n),e.INSTANCE||(e.INSTANCE=this),this._nitroTimer=new c.a,this._worker=new Worker(t,void 0),this._core=s,this._events=new r.a,this._localization=new d.a,this._communication=new u.a(s.communication),this._avatar=new h.a,this._roomEngine=new m.a(this._communication),this._sessionDataManager=new f.a(this._communication),this._roomSessionManager=new p.a(this._communication,this._roomEngine),this._roomManager=new l.a(this._roomEngine,this._roomEngine.visualizationFactory,this._roomEngine.logicFactory),this._linkTrackers=[],this._workerTrackers=[],this._isReady=!1,this._isDisposed=!1,this._core.configuration.events.addEventListener(i.a.LOADED,this.onConfigurationLoadedEvent.bind(this)),this._roomEngine.events.addEventListener(g.a.ENGINE_INITIALIZED,this.onRoomEngineReady.bind(this)),this._worker.onmessage=this.createWorkerEvent.bind(this)}static bootstrap(){e.INSTANCE&&(e.INSTANCE.dispose(),e.INSTANCE=null);const t=document.createElement("canvas");t.id="client-wrapper",t.className="client-canvas";const s=new this(new o.a,{transparent:!0,autoDensity:!0,resolution:window.devicePixelRatio,width:window.innerWidth,height:window.innerHeight,view:t});t.addEventListener("webglcontextlost",()=>s.events.dispatchEvent(new a.a(e.WEBGL_CONTEXT_LOST)));const n=NitroConfig.sso;s.communication.demo.setSSO(n)}init(){if(!this._isReady&&!this._isDisposed){if(this._avatar&&this._avatar.init(),this._roomEngine&&(this._roomEngine.sessionDataManager=this._sessionDataManager,this._roomEngine.roomSessionManager=this._roomSessionManager,this._roomEngine.roomManager=this._roomManager,this._sessionDataManager&&this._sessionDataManager.init(),this._roomSessionManager&&this._roomSessionManager.init(),this._roomEngine.init()),new _.a(this._communication.connection),!this._communication.connection)throw new Error("No connection found");this._isReady=!0}}dispose(){this._isDisposed||(this._roomManager&&(this._roomManager.dispose(),this._roomManager=null),this._roomSessionManager&&(this._roomSessionManager.dispose(),this._roomSessionManager=null),this._sessionDataManager&&(this._sessionDataManager.dispose(),this._sessionDataManager=null),this._roomEngine&&(this._roomEngine.dispose(),this._roomEngine=null),this._avatar&&(this._avatar.dispose(),this._avatar=null),this._communication&&(this._communication.dispose(),this._communication=null),super.destroy(),this._isDisposed=!0,this._isReady=!1)}onConfigurationLoadedEvent(t){const s=this.getConfiguration("animation.fps",24);this.getConfiguration("limits.fps",!0),e.instance.ticker.maxFPS=s}onRoomEngineReady(t){this.startSendingHeartBeat()}getConfiguration(t,e=null){return this._core.configuration.getValue(t,e)}getLocalization(t){return this._localization.getValue(t)}getLocalizationWithParameter(t,e,s){return this._localization.getValueWithParameter(t,e,s)}getLocalizationWithParameters(t,e,s){return this._localization.getValueWithParameters(t,e,s)}addWorkerEventTracker(t){this._workerTrackers.indexOf(t)>=0||this._workerTrackers.push(t)}removeWorkerEventTracker(t){const e=this._workerTrackers.indexOf(t);-1!==e&&this._workerTrackers.splice(e,1)}createWorkerEvent(t){if(!t)return;const e=t.data;for(const s of this._workerTrackers)s&&s.workerMessageReceived(e)}sendWorkerEvent(t){t&&this._worker&&this._worker.postMessage(t)}addLinkEventTracker(t){this._linkTrackers.indexOf(t)>=0||this._linkTrackers.push(t)}removeLinkEventTracker(t){const e=this._linkTrackers.indexOf(t);-1!==e&&this._linkTrackers.splice(e,1)}createLinkEvent(t){if(t&&""!==t)for(const e of this._linkTrackers){if(!e)continue;const s=e.eventUrlPrefix;s.length>0?t.substr(0,s.length)===s&&e.linkReceived(t):e.linkReceived(t)}}startSendingHeartBeat(){this.sendHeartBeat(),setInterval(this.sendHeartBeat,1e4)}sendHeartBeat(){E.a.sendHeartBeat()}get nitroTimer(){return this._nitroTimer}get core(){return this._core}get events(){return this._events}get localization(){return this._localization}get communication(){return this._communication}get avatar(){return this._avatar}get roomEngine(){return this._roomEngine}get sessionDataManager(){return this._sessionDataManager}get roomSessionManager(){return this._roomSessionManager}get roomManager(){return this._roomManager}get width(){return this.renderer.width/this.renderer.resolution}get height(){return this.renderer.height/this.renderer.resolution}get time(){return this.ticker.lastTime}get isReady(){return this._isReady}get isDisposed(){return this._isDisposed}static get instance(){return this.INSTANCE||null}}return e.WEBGL_CONTEXT_LOST="NE_WEBGL_CONTEXT_LOST",e.WEBGL_UNAVAILABLE="NE_WEBGL_UNAVAILABLE",e.RELEASE_VERSION="NITRO-0-4-0",e.READY="NE_READY",e.INSTANCE=null,e})()}).call(this,s("NUif"))},PJYa:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},PJfP:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("XMGm"),i=s("MeCd"),r=s("KQk8");let a=(()=>{class t extends i.a{constructor(){super(),this._data=[]}parseWrapper(t){if(!t)return;this._data=[];const e=t.readInt();if(e)for(let s=0;s<e;s++)this._data.push(t.readString());super.parseWrapper(t)}initializeFromRoomObjectModel(t){super.initializeFromRoomObjectModel(t),this._data=t.getValue(n.a.FURNITURE_DATA)}writeRoomObjectModel(e){super.writeRoomObjectModel(e),e.setValue(n.a.FURNITURE_DATA_FORMAT,t.FORMAT_KEY),e.setValue(n.a.FURNITURE_DATA,this._data)}getLegacyString(){return this._data&&this._data.length?this._data[t.STATE]:""}compare(e){if(!(e instanceof t))return!1;let s=0;for(;s<this._data.length;){if(0===s);else if(this._data[s]!==e.getValue(s))return!1;s++}return!0}getValue(t){return this._data[t]||""}setValue(t){this._data=t}}return t.FORMAT_KEY=r.a.STRING_KEY,t.STATE=0,t})()},PSU1:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},Poml:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},Pox2:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._success=!1,!0}parse(t){return!!t&&(this._success=t.readBoolean(),!0)}get success(){return this._success}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},Prlr:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("Wgf2");class r{flush(){return this._wrapper=null,this._count=0,this._x=0,this._y=0,this._value=0,!0}tileHeight(){return i.a.decodeTileHeight(this._value)}isStackingBlocked(){return i.a.decodeIsStackingBlocked(this._value)}isRoomTile(){return i.a.decodeIsRoomTile(this._value)}next(){return!!this._count&&(this._count--,this._x=this._wrapper.readByte(),this._y=this._wrapper.readByte(),this._value=this._wrapper.readShort(),!0)}parse(t){return!!t&&(this._wrapper=t,this._count=t.readByte(),!0)}get x(){return this._x}get y(){return this._y}get height(){return this._value}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},Q612:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},QQU2:function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{flush(){return!0}parse(t){return!!t&&(this._userId=t.readInt(),this._reason=t.readInt(),!0)}get _Str_4963(){return this._userId}get reason(){return this._reason}}return t._Str_16410=1,t})()},QXLr:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._userId=0,this._respectsReceived=0,!0}parse(t){return!!t&&(this._userId=t.readInt(),this._respectsReceived=t.readInt(),!0)}get userId(){return this._userId}get respectsReceived(){return this._respectsReceived}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},QZVO:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},QZfg:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("1+1A");class r{flush(){return this._item=null,!0}parse(t){return!!t&&(this._item=new i.a(t),this._item.username=t.readString(),!0)}get item(){return this._item}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"Qi++":function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("Ns5P");let i=(()=>{class t extends n.a{constructor(e,s,n,i){super(t.RSFRE_FRIEND_REQUEST,e),this._requestId=0,this._userId=0,this._requestId=s,this._userId=n,this._userName=i}get requestId(){return this._requestId}get userId(){return this._userId}get userName(){return this._userName}}return t.RSFRE_FRIEND_REQUEST="RSFRE_FRIEND_REQUEST",t})()},QjCb:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._message=null,!0}parse(t){return!!t&&(this._message=t.readString(),!0)}get message(){return this._message}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},QzjD:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._width=0,this._height=0,this._wallHeight=0,this._fixedWallsHeight=0,this._tileMap=[],this._holeMap=[],this._doors=[],this._dimensions={minX:0,maxX:0,minY:0,maxY:0},this._restrictsDragging=!1,this._restrictedScale=1,this._restrictsScaling=!1}get width(){return this._width}set width(t){this._width=t}get height(){return this._height}set height(t){this._height=t}get wallHeight(){return this._wallHeight}set wallHeight(t){this._wallHeight=t}get fixedWallsHeight(){return this._fixedWallsHeight}set fixedWallsHeight(t){this._fixedWallsHeight=t}get tileMap(){return this._tileMap}get holeMap(){return this._holeMap}get doors(){return this._doors}get dimensions(){return this._dimensions}get restrictsDragging(){return this._restrictsDragging}set restrictsDragging(t){this._restrictsDragging=t}get restrictsScaling(){return this._restrictsScaling}set restrictsScaling(t){this._restrictsScaling=t}get restrictedScale(){return this._restrictedScale}set restrictedScale(t){this._restrictedScale=t}}},R5Ri:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t=1){this._elapsedTime=0,this._percision=t,this._timer=null,this.start()}start(){this._elapsedTime=0,this._timer||(this._timer=window.setInterval(()=>this.increase(),this._percision))}stop(){this._timer&&clearTimeout(this._timer)}increase(){this._elapsedTime+=this._percision}getTimer(){return this._elapsedTime}}},RH6c:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},ReTp:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{constructor(){this._errorCode=""}flush(){return this._errorCode="",!0}parse(t){return!!t&&(this._errorCode=t.readString(),!0)}get errorCode(){return this._errorCode}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"S+Gq":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._resultCode=-1,this._name="",this._nameSuggestions=[],!0}parse(t){if(!t)return!1;this._resultCode=t.readInt(),this._name=t.readString();let e=t.readInt();for(;e>0;)this._nameSuggestions.push(t.readString()),e--;return!0}get resultCode(){return this._resultCode}get name(){return this._name}get nameSuggestions(){return this._nameSuggestions}}let r=(()=>{class t extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}return t._Str_5797=0,t._Str_7005=1,t._Str_7389=2,t._Str_7137=3,t._Str_7836=4,t._Str_7721=5,t._Str_8620=6,t._Str_9429=7,t})()},"S5/W":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._roomId=-1,this._roomName=null,!0}parse(t){if(t)return this._roomId=t.readInt(),this._roomName=t.readString(),!0}get roomId(){return this._roomId}get roomName(){return this._roomName}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},S8Tn:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},SBJG:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("DFHD");let i=(()=>{class t{constructor(){this._isDisposed=!1,this._scale=64,this._heightMap=[],this._width=0,this._height=0,this._floorHeight=0}get disposed(){return this._isDisposed}get scale(){return this._scale}set scale(t){this._scale=t}dispose(){this.reset(),this._isDisposed=!0}initialize(t,e,s){if(t<=this._width&&e<=this._height)return this._width=t,this._height=e,void(this._floorHeight=s);this.reset();let n=0;for(;n<e;){const e=[];this._heightMap.push(e);let s=0;for(;s<t;)e.push(0),s++;n++}this._width=t,this._height=e,this._floorHeight=s}reset(){this._heightMap=[]}setHeight(t,e,s){if(t<0||t>=this._width||e<0||e>=this._height)return!1;const n=this._heightMap[e];return!!n&&(n[t]=s,!0)}getHeight(t,e){if(t<0||t>=this._width||e<0||e>=this._height)return 0;const s=this._heightMap[e];return s?s[t]:0}getLocation(e,s,i,r,a){let o,c,l;if(0==e&&0==s)if(e=this._width,s=this._height,o=Math.round(this.scale/10),a==t.R){for(l=this._width-1;l>=0;){for(c=1;c<this._height;){if(this.getHeight(l,c)<=this._floorHeight){c-1<s&&(e=l,s=c-1);break}c++}l--}r+=this.scale/4-o/2,i+=this.scale/2}else{for(c=this._height-1;c>=0;){for(l=1;l<this._width;){if(this.getHeight(l,c)<=this._floorHeight){l-1<e&&(e=l-1,s=c);break}l++}c--}r+=this.scale/4-o/2,i-=o}let h=e,u=s,_=this.getHeight(e,s);return a==t.R?(h+=i/(this._scale/2)-.5,u+=.5,_-=(r-i/2)/(this._scale/2)):(u+=(this._scale/2-i)/(this._scale/2)-.5,h+=.5,_-=(r-(this._scale/2-i)/2)/(this._scale/2)),new n.a(h,u,_)}_Str_24084(e,s,n){let i,r,a,o,c,l=0,h=0;r=Math.ceil(e),l=r-e;let u=0;for(i=0;i<this._width;){if(r>=0&&r<this._height){if(this.getHeight(i,r)<=this._floorHeight){a=i-1,o=r,h=i,n=t.L;break}if(this.getHeight(i,r+1)<=this._floorHeight){a=i,o=r,h=o-e,n=t.R;break}}r++,i++}const _=this.scale/2*l;let d=-h*this.scale/2;return d+=18*-s/32*this.scale/2,u=this.getHeight(a,o),c=u*this.scale/2+d,c+=n==t.R?l*this.scale/4:(1-l)*this.scale/4,this.getLocation(a,o,_,c,n)}_Str_22875(e,s){if(null==e)return null;let n=0,i=0,r=0,a=0,o="",c=0;if(90==s)n=Math.floor(e.x-.5),i=Math.floor(e.y+.5),c=this.getHeight(n,i),r=this._scale/2-this._scale/2*(e.y-i+.5),a=this._scale/2*(c-e.z)+(this._scale/2-r)/2,o=t.L;else{if(180!=s)return null;n=Math.floor(e.x+.5),i=Math.floor(e.y-.5),c=this.getHeight(n,i),r=this._scale/2*(e.x+.5-n),a=this._scale/2*(c-e.z)+r/2,o=t.R}return[n,i,r,a,o]}_Str_21860(t,e){const s=this._Str_22875(t,e);return null==s?null:":w="+Math.trunc(s[0])+","+Math.trunc(s[1])+" l="+Math.trunc(s[2])+","+Math.trunc(s[3])+" "+s[4]}getDirection(e){return e==t.R?180:90}_Str_24141(t,e){const s=this.getHeight(t,e),n=s+1;return s+(Math.trunc(this.getHeight(t-1,e-1))==n||Math.trunc(this.getHeight(t,e-1))==n||Math.trunc(this.getHeight(t+1,e-1))==n||Math.trunc(this.getHeight(t-1,e))==n||Math.trunc(this.getHeight(t+1,e))==n||Math.trunc(this.getHeight(t-1,e+1))==n||Math.trunc(this.getHeight(t,e+1))==n||Math.trunc(this.getHeight(t+1,e+1))==n?.5:0)}_Str_10375(t,e){return t>=0&&t<this._width&&e>=0&&e<this._height&&this._heightMap[e][t]>=0}}return t.DEFAULT_SCALE=32,t.L="l",t.R="r",t})()},SRjU:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO");class i{constructor(t){this._topics=[],this._name=t.readString();const e=t.readInt();let s=0;for(;s<e;){const e=t.readString(),n=t.readInt(),i=t.readString();this._topics.push({name:e,id:n,_Str_18308:i}),s++}}get topics(){return this._topics}}class r{flush(){return!0}parse(t){this._callForHelpCategories=[];const e=t.readInt();let s=0;for(;s<e;)this._callForHelpCategories.push(new i(t)),s++;return!0}get callForHelpCategories(){return this._callForHelpCategories}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},SS1c:function(t,e,s){"use strict";s.d(e,"a",function(){return l});var n=s("5+UO"),i=s("P7Cj");let r=(()=>{class t{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._type=-1,this._position=null,this._itemName=null,this._itemPromoImage=null,this._catalogPageLocation=null,this._productCode=null,this._productOfferId=0,this._expirationTime=0,!0}parse(e){if(!e)return!1;switch(this._position=e.readInt(),this._itemName=e.readString(),this._itemPromoImage=e.readString(),this._type=e.readInt(),this._type){case t.ITEM_CATALOGUE_PAGE:this._catalogPageLocation=e.readString();break;case t.ITEM_PRODUCT_OFFER:this._productOfferId=e.readInt();break;case t.ITEM_IAP:this._productCode=e.readString()}const s=e.readInt();return this._expirationTime=s>0?1e3*s+i.a.instance.time:0,!0}get type(){return this._type}get position(){return this._position}get itemName(){return this._itemName}get itemPromoImage(){return this._itemPromoImage}get catalogPageLocation(){return this._catalogPageLocation}get productCode(){return this._productCode}get productOfferId(){return this._productOfferId}get expirationTime(){return this._expirationTime}}return t.ITEM_CATALOGUE_PAGE=0,t.ITEM_PRODUCT_OFFER=1,t.ITEM_IAP=2,t})();class a{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._images=[],this._texts=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._images.push(t.readString()),e--;let s=t.readInt();for(;s>0;)this._texts.push(t.readString()),s--;return!0}get images(){return this._images}get texts(){return this._texts}}var o=s("0wjC");class c{flush(){return this._pageId=-1,this._catalogType=null,this._layoutCode=null,this._localization=null,this._offers=[],this._offerId=-1,this._acceptSeasonCurrencyAsCredits=!1,this._frontPageItems=[],!0}parse(t){if(!t)return!1;this._pageId=t.readInt(),this._catalogType=t.readString(),this._layoutCode=t.readString(),this._localization=new a(t);let e=t.readInt();for(;e>0;)this._offers.push(new o.a(t)),e--;if(this._offerId=t.readInt(),this._acceptSeasonCurrencyAsCredits=t.readBoolean(),t.bytesAvailable){let e=t.readInt();for(;e>0;)this._frontPageItems.push(new r(t)),e--}return!0}get pageId(){return this._pageId}get catalogType(){return this._catalogType}get layoutCode(){return this._layoutCode}get localization(){return this._localization}get offers(){return this._offers}get offerId(){return this._offerId}get acceptSeasonCurrencyAsCredits(){return this._acceptSeasonCurrencyAsCredits}get frontPageItems(){return this._frontPageItems}}class l extends n.a{constructor(t){super(t,c)}getParser(){return this.parser}}},SULm:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},Sb1T:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s,n){this._data=[t,e,s,n]}getMessageArray(){return this._data}dispose(){}}},SbyL:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s,n,i,r=-1){this._data=[],this._data.push(t),this._data.push(e),this._data.push(s),this._data.push(n),this._data.push(i),-1!=r&&this._data.push(r)}getMessageArray(){return this._data}dispose(){}}},ScQb:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("Hs+C");let i=(()=>{class t extends n.a{constructor(t,e,s,n,i,r=1){super(t,e,s,n),this._sampleId=i,this._pitch=r}get sampleId(){return this._sampleId}get pitch(){return this._pitch}}return t.ROOM_OBJECT_INITIALIZED="ROPSPE_ROOM_OBJECT_INITIALIZED",t.ROOM_OBJECT_DISPOSED="ROPSPE_ROOM_OBJECT_DISPOSED",t.PLAY_SAMPLE="ROPSPE_PLAY_SAMPLE",t.CHANGE_PITCH="ROPSPE_CHANGE_PITCH",t})()},Sfl4:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},SqPf:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},SylX:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s,n){this._data=[t,e,s,n]}getMessageArray(){return this._data}dispose(){}}},SzgH:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(...t){this._data=[t.length,...t]}getMessageArray(){return this._data}dispose(){}}},TPa8:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("Ns5P");let i=(()=>{class t extends n.a{constructor(e,s,n){super(t.RSDE_DANCE,e),this._roomIndex=s,this._danceId=n}get roomIndex(){return this._roomIndex}get danceId(){return this._danceId}}return t.RSDE_DANCE="RSDE_DANCE",t})()},TQha:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},Tp0E:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO");class i{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._id=0,this._title=null,this._badge=null,this._colorA=null,this._colorB=null,this._ownerOrFavorite=null,this._ownerId=0,this._hasForum=!1,!0}parse(t){return!!t&&(this._id=t.readInt(),this._title=t.readString(),this._badge=t.readString(),this._colorA=t.readString(),this._colorB=t.readString(),this._ownerOrFavorite=t.readBoolean(),this._ownerId=t.readInt(),this._hasForum=t.readBoolean(),!0)}get id(){return this._id}get title(){return this._title}get badge(){return this._badge}get colorA(){return this._colorA}get colorB(){return this._colorB}get ownerOrFavorite(){return this._ownerOrFavorite}get ownerId(){return this._ownerId}get hasForum(){return this._hasForum}}class r{flush(){return this._id=0,this._username=null,this._figure=null,this._motto=null,this._registration=null,this._achievementPoints=0,this._friendsCount=0,this._isMyFriend=!1,this._requestSent=!1,this._isOnline=!1,this._groups=[],this._lastVisit=0,!0}parse(t){if(!t)return!1;this._id=t.readInt(),this._username=t.readString(),this._figure=t.readString(),this._motto=t.readString(),this._registration=t.readString(),this._achievementPoints=t.readInt(),this._friendsCount=t.readInt(),this._isMyFriend=t.readBoolean(),this._requestSent=t.readBoolean(),this._isOnline=t.readBoolean();let e=t.readInt();for(;e>0;)this._groups.push(new i(t)),e--;return this._lastVisit=t.readInt(),!0}get id(){return this._id}get username(){return this._username}get figure(){return this._figure}get motto(){return this._motto}get registration(){return this._registration}get achievementPoints(){return this._achievementPoints}get friendsCount(){return this._friendsCount}get isMyFriend(){return this._isMyFriend}get requestSent(){return this._requestSent}get isOnline(){return this._isOnline}get groups(){return this._groups}get lastVisit(){return this._lastVisit}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},U4HJ:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("0wjC");class r{flush(){return this._offer=null,!0}parse(t){return!!t&&(this._offer=new i.a(t),!0)}get offer(){return this._offer}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},UJeg:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},UTIc:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._errorCode=0,!0}parse(t){return!!t&&(this._errorCode=t.readInt(),!0)}get errorCode(){return this._errorCode}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},UTUL:function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{}return t.OBJECT_UNDEFINED="OBJECT_UNDEFINED",t.OBJECT_MOVE="OBJECT_MOVE",t.OBJECT_PLACE="OBJECT_PLACE",t.OBJECT_ROTATE_POSITIVE="OBJECT_ROTATE_POSITIVE",t.OBJECT_ROTATE_NEGATIVE="OBJECT_ROTATE_NEGATIVE",t.OBJECT_MOVE_TO="OBJECT_MOVE_TO",t.OBJECT_PLACE_TO="OBJECT_PLACE_TO",t.OBJECT_PICKUP="OBJECT_PICKUP",t.OBJECT_PICKUP_BOT="OBJECT_PICKUP_BOT",t.OBJECT_PICKUP_PET="OBJECT_PICKUP_PET",t.OBJECT_EJECT="OBJECT_EJECT",t.OBJECT_SAVE_STUFF_DATA="OBJECT_SAVE_STUFF_DATA",t})()},UdUS:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},Up4E:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){this._data=null}}},UufK:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},V1nr:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._windowX=0,this._windowY=0,this._windowWidth=0,this._windowHeight=0,this._leftPanelHidden=!1,this._resultsMode=0,!0}parse(t){return!!t&&(this._windowX=t.readInt(),this._windowY=t.readInt(),this._windowWidth=t.readInt(),this._windowHeight=t.readInt(),this._leftPanelHidden=t.readBoolean(),this._resultsMode=t.readInt(),!0)}get windowX(){return this._windowX}get windowY(){return this._windowY}get windowWidth(){return this._windowWidth}get windowHeight(){return this._windowHeight}get leftPanelHidden(){return this._leftPanelHidden}get resultsMode(){return this._resultsMode}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},V2Y4:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},V5Lx:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},VYTg:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s,n,i,r){this._data=[t,e,s,n,i,r]}getMessageArray(){return this._data}dispose(){}}},VZrs:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("XMGm"),i=s("MeCd"),r=s("KQk8");let a=(()=>{class t extends i.a{constructor(){super(),this._state="",this._result=0}parseWrapper(t){t&&(this._state=t.readString(),this._result=t.readInt(),super.parseWrapper(t))}writeRoomObjectModel(e){super.writeRoomObjectModel(e),e.setValue(n.a.FURNITURE_DATA_FORMAT,t.FORMAT_KEY);const s={};s.S=this._state,s.R=this._result.toString(),e.setValue(n.a.FURNITURE_DATA,s)}getLegacyString(){return this._state}compare(t){return!0}setString(t){this._state=t}get result(){return this._result}}return t.FORMAT_KEY=r.a.VOTE_KEY,t})()},WEUE:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("XxiA");class r{flush(){return this._definition=null,!0}parse(t){return!!t&&(this._definition=new i.a(t),!0)}get definition(){return this._definition}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},WM79:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("ndLt");class r{flush(){return this._totalFragments=0,this._fragmentNumber=0,this._fragment=[],!0}parse(t){if(!t)return!1;this._totalFragments=t.readInt(),this._fragmentNumber=t.readInt();let e=t.readInt();for(;e>0;)this._fragment.push(new i.a(t)),e--;return!0}get totalFragments(){return this._totalFragments}get fragmentNumber(){return this._fragmentNumber}get fragment(){return this._fragment}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},WRyM:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("3r1x");let i=(()=>{class t extends n.a{constructor(t){super(t)}get iconId(){return this._iconId}set iconId(t){this._iconId=t}get iconName(){return this._iconName}set iconName(t){this._iconName=t}}return t.TOOLBAR_CLICK="NTE_TOOLBAR_CLICK",t.SELECT_OWN_AVATAR="NTE_SELECT_OWN_AVATAR",t})()},Wamt:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._itemId=0,this._data="",!0}parse(t){return!!t&&(this._itemId=parseInt(t.readString()),this._data=t.readString(),!0)}get furnitureId(){return this._itemId}get data(){return this._data}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},Wgf2:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{static decodeTileHeight(t){return t<0?-1:(16383&t)/256}static decodeIsStackingBlocked(t){return!!(16384&t)}static decodeIsRoomTile(t){return t>=0}getTileHeight(t,e){return t<0||t>=this._width||e<0||e>=this._height?-1:n.decodeTileHeight(this._heights[e*this._width+t])}getStackingBlocked(t,e){return t<0||t>=this._width||e<0||e>=this._height||n.decodeIsStackingBlocked(this._heights[e*this._width+t])}isRoomTile(t,e){return!(t<0||t>=this._width||e<0||e>=this._height)&&n.decodeIsRoomTile(this._heights[e*this._width+t])}flush(){return this._width=0,this._height=0,this._heights=[],!0}parse(t){if(!t)return!1;this._width=t.readInt();const e=t.readInt();this._height=e/this._width;let s=0;for(;s<e;)this._heights[s]=t.readShort(),s++;return!0}get width(){return this._width}get height(){return this._height}get heights(){return this._heights}}},Wifn:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){this._data=null}}},WjEe:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},Wzp3:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("iAsj");class r{flush(){return this._item=null,!0}parse(t){return!!t&&(this._item=new i.a(t),!0)}get item(){return this._item}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"X+hw":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,2*e.size];for(const[s,n]of e.entries())this._data.push(s,n)}getMessageArray(){return this._data}dispose(){}}},X26Z:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("jfHZ");class r{flush(){return this._userFriendLimit=0,this._normalFriendLimit=0,this._extendedFriendLimit=0,this._categories=[],!0}parse(t){if(!t)return!1;this._userFriendLimit=t.readInt(),this._normalFriendLimit=t.readInt(),this._extendedFriendLimit=t.readInt();let e=t.readInt();for(;e>0;)this._categories.push(new i.a(t)),e--;return!0}get userFriendLimit(){return this._userFriendLimit}get normalFriendLimit(){return this._normalFriendLimit}get extendedFriendLimit(){return this._extendedFriendLimit}get categories(){return this._categories}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},XMGm:function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{}return t.OBJECT_ROOM_ID="object_room_id",t.OBJECT_ACCURATE_Z_VALUE="object_accurate_z_value",t.TILE_CURSOR_HEIGHT="tile_cursor_height",t.FIGURE="figure",t.GENDER="gender",t.OWN_USER="own_user",t.FIGURE_CAN_STAND_UP="figure_can_stand_up",t.FIGURE_VERTICAL_OFFSET="figure_vertical_offset",t.FIGURE_TALK="figure_talk",t.FIGURE_DANCE="figure_dance",t.FIGURE_SLEEP="figure_sleep",t.FIGURE_BLINK="figure_blink",t.FIGURE_EFFECT="figure_effect",t.FIGURE_CARRY_OBJECT="figure_carry_object",t.FIGURE_USE_OBJECT="figure_use_object",t.FIGURE_GESTURE="figure_gesture",t.FIGURE_POSTURE="figure_posture",t.FIGURE_POSTURE_PARAMETER="figure_posture_parameter",t.FIGURE_HIGHLIGHT_ENABLE="figure_highlight_enable",t.FIGURE_HIGHLIGHT="figure_highlight",t.FURNITURE_PURCHASER_NAME="furniture_purchaser_name",t.FURNITURE_PURCHASER_FIGURE="furniture_purchaser_figure",t.STD="std",t.FIGURE_SIGN="figure_sign",t.FIGURE_FLAT_CONTROL="figure_flat_control",t.FIGURE_IS_TYPING="figure_is_typing",t.FIGURE_IS_MUTED="figure_is_muted",t.FIGURE_GAINED_EXPERIENCE="figure_gained_experience",t.FIGURE_NUMBER_VALUE="figure_number_value",t.FIGURE_IS_PLAYING_GAME="figure_is_playing_game",t.FIGURE_GUIDE_STATUS="figure_guide_status",t.FIGURE_EXPRESSION="figure_expression",t.HEAD_DIRECTION="head_direction",t.FURNITURE_AUTOMATIC_STATE_INDEX="furniture_automatic_state_index",t.FURNITURE_ALWAYS_STACKABLE="furniture_always_stackable",t.FURNITURE_DISABLE_PICKING_ANIMATION="furniture_disable_picking_animation",t.FURNITURE_DATA_FORMAT="furniture_data_format",t.FURNITURE_UNIQUE_SERIAL_NUMBER="furniture_unique_serial_number",t.FURNITURE_UNIQUE_EDITION_SIZE="furniture_unique_edition_size",t.FURNITURE_CRACKABLE_STATE="furniture_crackable_state",t.FURNITURE_CRACKABLE_HITS="furniture_crackable_hits",t.FURNITURE_CRACKABLE_TARGET="furniture_crackable_target",t.FURNITURE_CREDIT_VALUE="furniture_credit_value",t.FURNITURE_DATA="furniture_data",t.FURNITURE_ITEMDATA="furniture_itemdata",t.FURNITURE_COLOR="furniture_color",t.FURNITURE_LIFT_AMOUNT="furniure_lift_amount",t.FURNITURE_GUILD_CUSTOMIZED_GUILD_ID="furniture_guild_customized_guild_id",t.FURNITURE_GUILD_CUSTOMIZED_BADGE="furniture_guild_customized_badge",t.FURNITURE_GUILD_CUSTOMIZED_COLOR_1="furniture_guild_customized_color_1",t.FURNITURE_GUILD_CUSTOMIZED_COLOR_2="furniture_guild_customized_color_2",t.FURNITURE_STATE_UPDATE_TIME="furniture_state_update_time",t.FURNITURE_SELECTION_DISABLED="furniture_selection_disabled",t.FURNITURE_SIZE_X="furniture_size_x",t.FURNITURE_SIZE_Y="furniture_size_y",t.FURNITURE_SIZE_Z="furniture_size_z",t.FURNITURE_CENTER_X="furniture_center_x",t.FURNITURE_CENTER_Y="furniture_center_y",t.FURNITURE_CENTER_Z="furniture_center_z",t.FURNITURE_ALLOWED_DIRECTIONS="furniture_allowed_directions",t.FURNITURE_AD_URL="furniture_ad_url",t.FURNITURE_TYPE_ID="furniture_type_id",t.FURNITURE_EXTRAS="furniture_extras",t.FURNITURE_EXPIRY_TIME="furniture_expiry_time",t.FURNITURE_EXPIRTY_TIMESTAMP="furniture_expiry_timestamp",t.FURNITURE_REAL_ROOM_OBJECT="furniture_real_room_object",t.FURNITURE_IS_STICKIE="furniture_is_stickie",t.FURNITURE_BRANDING_IMAGE_STATUS="furniture_branding_image_status",t.FURNITURE_BRANDING_IMAGE_URL="furniture_branding_image_url",t.FURNITURE_BRANDING_URL="furniture_branding_url",t.FURNITURE_BRANDING_OFFSET_X="furniture_branding_offset_x",t.FURNITURE_BRANDING_OFFSET_Y="furniture_branding_offset_y",t.FURNITURE_BRANDING_OFFSET_Z="furniture_branding_offset_z",t.FURNITURE_BADGE_IMAGE_STATUS="furniture_badge_image_status",t.FURNITURE_BADGE_ASSET_NAME="furniture_badge_asset_name",t.FURNITURE_BADGE_VISIBLE_IN_STATE="furniture_badge_visible_in_state",t.FURNITURE_ALPHA_MULTIPLIER="furniture_alpha_multiplier",t.FURNITURE_USAGE_POLICY="furniture_usage_policy",t.FURNITURE_OWNER_ID="furniture_owner_id",t.FURNITURE_OWNER_NAME="furniture_owner_name",t.FURNITURE_ROOM_BACKGROUND_COLOR_HUE="furniture_room_background_color_hue",t.FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION="furniture_room_background_color_saturation",t.FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS="furniture_room_background_color_lightness",t.FURNITURE_USES_PLANE_MASK="furniture_uses_plane_mask",t.FURNITURE_PLANE_MASK_TYPE="furniture_plane_mask_type",t.FURNITURE_IS_VARIABLE_HEIGHT="furniture_is_variable_height",t.FURNITURE_VOTE_MAJORITY_RESULT="furniture_vote_majority_result",t.FURNITURE_VOTE_COUNTER_COUNT="furniture_vote_counter_count",t.FURNITURE_SOUNDBLOCK_RELATIVE_ANIMATION_SPEED="furniture_soundblock_relative_animation_speed",t.FURNITURE_MANNEQUIN_NAME="furniture_mannequin_name",t.FURNITURE_MANNEQUIN_GENDER="furniture_mannequin_gender",t.FURNITURE_MANNEQUIN_FIGURE="furniture_mannequin_figure",t.FURNITURE_HIGHSCORE_SCORE_TYPE="furniture_highscore_score_type",t.FURNITURE_HIGHSCORE_CLEAR_TYPE="furniture_highscore_clear_type",t.FURNITURE_HIGHSCORE_DATA_ENTRY_COUNT="furniture_highscore_data_entry_count",t.FURNITURE_HIGHSCORE_DATA_ENTRY_BASE_USERS_="furniture_highscore_data_entry_base_users_",t.FURNITURE_HIGHSCORE_DATA_ENTRY_BASE_SCORE_="furniture_highscore_data_entry_base_score_",t.FURNITURE_INTERNAL_LINK="furniture_internal_link",t.PET_PALETTE_INDEX="pet_palette_index",t.PET_COLOR="pet_color",t.PET_HEAD_ONLY="pet_head_only",t.PET_CUSTOM_LAYER_IDS="pet_custom_layer_ids",t.PET_CUSTOM_PARTS_IDS="pet_custom_part_ids",t.PET_CUSTOM_PALETTE_IDS="pet_custom_palette_ids",t.PET_IS_RIDING="pet_is_riding",t.PET_TYPE="pet_type",t.PET_ALLOWED_DIRECTIONS="pet_allowed_directions",t.RACE="race",t.ROOM_MAP_DATA="room_map_data",t.ROOM_PLANE_MASK_XML="room_plane_mask_xml",t.ROOM_FLOOR_TYPE="room_floor_type",t.ROOM_WALL_TYPE="room_wall_type",t.ROOM_LANDSCAPE_TYPE="room_landscape_type",t.ROOM_WALL_THICKNESS="room_wall_thickness",t.ROOM_FLOOR_THICKNESS="room_floor_thickness",t.ROOM_FLOOR_HOLE_UPDATE_TIME="room_floor_hole_update_time",t.ROOM_FLOOR_VISIBILITY="room_floor_visibility",t.ROOM_WALL_VISIBILITY="room_wall_visibility",t.ROOM_LANDSCAPE_VISIBILITY="room_landscape_visibility",t.ROOM_DOOR_X="room_door_x",t.ROOM_DOOR_Y="room_door_y",t.ROOM_DOOR_Z="room_door_z",t.ROOM_DOOR_DIR="room_door_dir",t.ROOM_BACKGROUND_COLOR="room_background_color",t.ROOM_COLORIZE_BG_ONLY="room_colorize_bg_only",t.ROOM_RANDOM_SEED="room_random_seed",t.ROOM_WORLD_TYPE="room_world_type",t.ROOM_SELECTED_X="room_selected_x",t.ROOM_SELECTED_Y="room_selected_y",t.ROOM_SELECTED_Z="room_selected_z",t.ROOM_SELECTED_PLANE="room_selected_plane",t.IMAGE_QUERY_SCALE="image_query_scale",t.FURNITURE_FRIENDFURNI_ENGRAVING="furniture_friendfurni_engraving_type",t.SESSION_URL_PREFIX="session_url_prefix",t.SESSION_CURRENT_USER_ID="session_current_user_id",t})()},XNkd:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._stuffId=0,!0}parse(t){return!!t&&(this._stuffId=t.readInt(),!0)}get stuffId(){return this._stuffId}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},Xe1u:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var n=s("XMGm"),i=s("MeCd"),r=s("KQk8");class a{constructor(){this._score=-1,this._users=[]}get score(){return this._score}set score(t){this._score=t}get users(){return this._users}set users(t){this._users=t}addUsername(t){this._users.push(t)}}let o=(()=>{class t extends i.a{constructor(){super(),this._state="",this._scoreType=-1,this._clearType=-1,this._entries=[]}parseWrapper(t){if(!t)return;this._state=t.readString(),this._scoreType=t.readInt(),this._clearType=t.readInt();let e=t.readInt();for(;e>0;){const s=new a;s.score=t.readInt();let n=t.readInt();for(;n>0;)s.addUsername(t.readString()),n--;this._entries.push(s),e--}super.parseWrapper(t)}initializeFromRoomObjectModel(t){this._scoreType=t.getValue(n.a.FURNITURE_HIGHSCORE_SCORE_TYPE),this._clearType=t.getValue(n.a.FURNITURE_HIGHSCORE_CLEAR_TYPE),this._entries=[];const e=t.getValue(n.a.FURNITURE_HIGHSCORE_DATA_ENTRY_COUNT);let s=0;for(;s<e;){const e=new a;e.score=t.getValue(n.a.FURNITURE_HIGHSCORE_DATA_ENTRY_BASE_SCORE_+s),e.users=t.getValue(n.a.FURNITURE_HIGHSCORE_DATA_ENTRY_BASE_USERS_+s),this._entries.push(e),s++}super.initializeFromRoomObjectModel(t)}writeRoomObjectModel(e){if(super.writeRoomObjectModel(e),e.setValue(n.a.FURNITURE_DATA_FORMAT,t.FORMAT_KEY),e.setValue(n.a.FURNITURE_HIGHSCORE_SCORE_TYPE,this._scoreType),e.setValue(n.a.FURNITURE_HIGHSCORE_CLEAR_TYPE,this._clearType),this._entries){e.setValue(n.a.FURNITURE_HIGHSCORE_DATA_ENTRY_COUNT,this._entries.length);let t=0;for(;t<this._entries.length;){const s=this._entries[t];e.setValue(n.a.FURNITURE_HIGHSCORE_DATA_ENTRY_BASE_SCORE_+t,s.score),e.setValue(n.a.FURNITURE_HIGHSCORE_DATA_ENTRY_BASE_USERS_+t,s.users),t++}}}getLegacyString(){return this._state}get entries(){return this._entries}get clearType(){return this._clearType}get scoreType(){return this._scoreType}}return t.FORMAT_KEY=r.a.HIGHSCORE_KEY,t})()},Xe8L:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._itemId=0,this._userId=0,!0}parse(t){return!!t&&(this._itemId=parseInt(t.readString()),this._userId=t.readInt(),!0)}get itemId(){return this._itemId}get userId(){return this._userId}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},Xmmk:function(t,e,s){"use strict";s.d(e,"a",function(){return d});var n=s("Fv14"),i=s("ZQhZ"),r=s("IGSi"),a=s("Xr/m");class o{constructor(){this._map=new Map,this._updateCounter=0}dispose(){this._map.clear(),this._updateCounter=0}getValue(t){return this._map.get(t)}setValue(t,e){this._map.set(t,e),this._updateCounter++}removeKey(t){t&&(this._map.delete(t),this._updateCounter++)}get updateCounter(){return this._updateCounter}}class c extends a.a{constructor(t,e){super(),this._id=t,this._container=e,this._renderer=null,this._managers=new Map,this._updateCategories=[],this._model=new o}onDispose(){this.removeAllManagers(),this.destroyRenderer(),this._container=null,this._model.dispose()}setRenderer(t){if(t!==this._renderer&&(this._renderer&&this.destroyRenderer(),this._renderer=t,this._renderer&&(this._renderer.reset(),this._managers.size)))for(const e of this._managers.values()){if(!e)continue;const t=e.objects;if(t.length)for(const e of t.getValues())e&&this._renderer.addObject(e)}}destroyRenderer(){this._renderer&&(this._renderer.dispose(),this._renderer=null)}getManager(t){return this._managers.get(t)||null}getManagerOrCreate(t){let e=this.getManager(t);return e||(e=this._container.createRoomObjectManager(t),e?(this._managers.set(t,e),e):null)}getTotalObjectsForManager(t){const e=this.getManager(t);return e?e.totalObjects:0}getRoomObject(t,e){const s=this.getManager(e);return s&&s.getObject(t)||null}getRoomObjectsForCategory(t){const e=this.getManager(t);return e?e.objects.getValues():[]}getRoomObjectByIndex(t,e){const s=this.getManager(e);return s&&s.getObjectByIndex(t)||null}createRoomObject(t,e,s,n){const i=this.getManagerOrCreate(n);if(!i)return null;const r=i.createObject(t,e,s);return r?(this._renderer&&this._renderer.addObject(r),r):null}createRoomObjectAndInitalize(t,e,s){return this._container?this._container.createRoomObjectAndInitalize(this._id,t,e,s):null}removeRoomObject(t,e){const s=this.getManager(e);if(!s)return;const n=s.getObject(t);n&&(n.tearDown(),this._renderer&&this._renderer.removeObject(n),s.removeObject(t))}removeAllManagers(){for(const t of this._managers.values())if(t){if(this._renderer){const e=t.objects;if(e.length)for(const t of e.getValues())t&&this._renderer.removeObject(t)}t.dispose()}this._managers.clear()}addUpdateCategory(t){this._updateCategories.indexOf(t)>=0||this._updateCategories.push(t)}removeUpdateCategory(t){const e=this._updateCategories.indexOf(t);-1!==e&&this._updateCategories.splice(e,1)}update(t,e=!1){for(const s of this._updateCategories){const e=this.getManager(s);if(!e)continue;const n=e.objects;if(n.length)for(const s of n.getValues()){if(!s)continue;const e=s.logic;e&&e.update(t)}}this._renderer&&this._renderer.update(t,e)}hasUninitializedObjects(){for(const t of this._managers.values())if(t)for(const e of t.objects.getValues())if(e&&!e.isReady)return!0;return!1}get id(){return this._id}get container(){return this._container}get renderer(){return this._renderer}get managers(){return this._managers}get model(){return this._model}}var l=s("hTzv"),h=s("DFHD");let u=(()=>{class t extends a.a{constructor(e,s,n){super(),this._id=e,this._instanceId=t.OBJECT_COUNTER++,this._type=n,this._model=new o,this._location=new h.a,this._direction=new h.a,this._states=[],this._visualization=null,this._logic=null,this._pendingLogicMessages=[],this._updateCounter=0,this._isReady=!1;let i=s-1;for(;i>=0;)this._states[i]=0,i--}onDispose(){this._pendingLogicMessages=[],this.setVisualization(null),this.setLogic(null),this._model&&this._model.dispose(),super.onDispose()}getLocation(){return this._location}setLocation(t){t&&(t.x===this._location.x&&t.y===this._location.y&&t.z===this._location.z||(this._location.x=t.x,this._location.y=t.y,this._location.z=t.z,this._updateCounter++))}getDirection(){return this._direction}setDirection(t){t&&(t.x===this._direction.x&&t.y===this._direction.y&&t.z===this._direction.z||(this._direction.x=(t.x%360+360)%360,this._direction.y=(t.y%360+360)%360,this._direction.z=(t.z%360+360)%360,this._updateCounter++))}getState(t=0){return t>=0&&t<this._states.length?this._states[t]:-1}setState(t,e=0){return e>=0&&e<this._states.length&&(this._states[e]!==t&&(this._states[e]=t,this._updateCounter++),!0)}setVisualization(t){this._visualization!==t&&(this._visualization&&this._visualization.dispose(),this._visualization=t,this._visualization&&(this._visualization.object=this))}setLogic(t){if(this._logic===t)return;const e=this._logic;if(e&&(this._logic=null,e.setObject(null)),this._logic=t,this._logic)for(this._logic.setObject(this);this._pendingLogicMessages.length;){const t=this._pendingLogicMessages.shift();this._logic.processUpdateMessage(t)}}processUpdateMessage(t){if(this._logic)return this._logic.processUpdateMessage(t);this._pendingLogicMessages.push(t)}tearDown(){this._logic&&this._logic.tearDown()}get id(){return this._id}get instanceId(){return this._instanceId}get type(){return this._type}get model(){return this._model}get visualization(){return this._visualization}get mouseHandler(){return this._logic}get logic(){return this._logic}get location(){return this._location}get direction(){return this._direction}get updateCounter(){return this._updateCounter}set updateCounter(t){this._updateCounter=t}get isReady(){return this._isReady}set isReady(t){this._isReady=t}}return t.OBJECT_COUNTER=0,t})();class _{constructor(){this._objects=new l.a,this._objectsPerType=new l.a}dispose(){this.removeAllObjects()}getObject(t){return this._objects.getValue(t)||null}getObjectByIndex(t){return this._objects.getWithIndex(t)||null}createObject(t,e,s){const n=new u(t,e,s);return this.addObject(t,s,n)}addObject(t,e,s){if(this._objects.getValue(t))return s.dispose(),null;this._objects.add(t,s);const n=this.getTypeMap(e);return n&&n.add(t,s),s}removeObject(t){const e=this._objects.remove(t);if(e){const t=this.getTypeMap(e.type);t&&t.remove(e.id),e.dispose()}}removeAllObjects(){let t=0;for(;t<this._objects.length;){const e=this._objects.getWithIndex(t);e&&e.dispose(),t++}for(this._objects.reset(),t=0;t<this._objectsPerType.length;){const e=this._objectsPerType.getWithIndex(t);e&&e.dispose(),t++}this._objectsPerType.reset()}getTypeMap(t,e=!0){let s=this._objectsPerType.getValue(t);return!s&&e&&(s=new l.a,this._objectsPerType.add(t,s)),s}get objects(){return this._objects}get totalObjects(){return this._objects.length}}let d=(()=>{class t extends n.a{constructor(e,s,n){super(),this._state=t._Str_16443,this._rooms=new Map,this._contentLoader=null,this._updateCategories=[],this._listener=e,this._visualizationFactory=s,this._logicFactory=n,this._initialLoadList=[],this._pendingContentTypes=[],this._skipContentProcessing=!1,this._disposed=!1,this.onRoomContentLoadedEvent=this.onRoomContentLoadedEvent.bind(this),this.events.addEventListener(r.a.RCLE_SUCCESS,this.onRoomContentLoadedEvent),this.events.addEventListener(r.a.RCLE_FAILURE,this.onRoomContentLoadedEvent),this.events.addEventListener(r.a.RCLE_CANCEL,this.onRoomContentLoadedEvent)}onInit(){if(this._state>=t._Str_13904||!this._contentLoader)return;const e=i.a.MANDATORY_LIBRARIES;for(const t of e)t&&-1===this._initialLoadList.indexOf(t)&&(this._contentLoader.downloadAsset(t,this.events),this._initialLoadList.push(t));this._state=t._Str_13904}getRoomInstance(t){return this._rooms.get(t)||null}createRoomInstance(t){if(this._rooms.get(t))return null;const e=new c(t,this);if(this._rooms.set(e.id,e),this._updateCategories.length)for(const s of this._updateCategories)e.addUpdateCategory(s);return e}removeRoomInstance(t){const e=this._rooms.get(t);return!!e&&(this._rooms.delete(t),e.dispose(),!0)}createRoomObjectAndInitalize(t,e,s,n){const i=this.getRoomInstance(t);if(!i)return null;let r=s,a=s,o=s,c=null,l=!1;if(this._contentLoader.isLoaderType(s)){if(c=this._contentLoader.getCollection(s),!c&&(l=!0,this._contentLoader.downloadAsset(s,this.events),o=this._contentLoader.getPlaceholderName(s),c=this._contentLoader.getCollection(o),!c))return null;r=c.data.visualizationType,a=c.data.logicType}const h=i.createRoomObject(e,1,s,n);if(!h)return null;if(this._visualizationFactory){const t=this._visualizationFactory.getVisualization(r);if(!t)return i.removeRoomObject(e,n),null;t.asset=c;const s=this._visualizationFactory.getVisualizationData(o,r,c&&c.data||null);if(!s||!t.initialize(s))return i.removeRoomObject(e,n),null;h.setVisualization(t)}if(this._logicFactory){const t=this._logicFactory.getLogic(a);h.setLogic(t),t&&t.initialize(c&&c.data||null)}return l||(h.isReady=!0),this._contentLoader.setRoomObjectRoomId(h,t),h}reinitializeRoomObjectsByType(t){if(!(t&&this._contentLoader&&this._visualizationFactory&&this._logicFactory))return;const e=this._contentLoader.getCollection(t);if(!e)return;const s=e.data.visualizationType,n=e.data.logicType,i=this._visualizationFactory.getVisualizationData(t,s,e.data);for(const r of this._rooms.values())if(r)for(const[a,o]of r.managers.entries())if(o)for(const c of o.objects.getValues()){if(!c||c.type!==t)continue;const l=this._visualizationFactory.getVisualization(s);if(l)if(l.asset=e,i&&l.initialize(i)){c.setVisualization(l);const t=this._logicFactory.getLogic(n);c.setLogic(t),t&&t.initialize(e.data),c.isReady=!0,this._listener&&this._listener.objectInitialized(r.id,c.id,a)}else o.removeObject(c.id);else o.removeObject(c.id)}}addUpdateCategory(t){if(!(this._updateCategories.indexOf(t)>=0)&&(this._updateCategories.push(t),this._rooms.size))for(const e of this._rooms.values())e&&e.addUpdateCategory(t)}removeUpdateCategory(t){const e=this._updateCategories.indexOf(t);if(-1!==e&&(this._updateCategories.splice(e,1),this._rooms.size))for(const s of this._rooms.values())s&&s.removeUpdateCategory(t)}setContentLoader(t){this._contentLoader&&this._contentLoader.dispose(),this._contentLoader=t}processPendingContentTypes(t){if(this._skipContentProcessing)this._skipContentProcessing=!1;else for(;this._pendingContentTypes.length;){const t=this._pendingContentTypes.shift();this._contentLoader.getCollection(t)?(this.reinitializeRoomObjectsByType(t),this._listener&&this._listener.initalizeTemporaryObjectsByType(t,!0),this._initialLoadList.length>0&&this.removeFromInitialLoad(t)):(this._listener&&this._listener.initalizeTemporaryObjectsByType(t,!1),this.logger.log("Invalid Collection: "+t))}}removeFromInitialLoad(e){if(e&&this._state!==t._Str_9994)if(this._contentLoader||(this._state=t._Str_9994),this._contentLoader.getCollection(e)){const s=this._initialLoadList.indexOf(e);s>=0&&this._initialLoadList.splice(s,1),this._initialLoadList.length||(this._state=t._Str_9846,this._listener&&this._listener.onRoomEngineInitalized(!0))}else this._state=t._Str_9994,this._listener&&this._listener.onRoomEngineInitalized(!1)}onRoomContentLoadedEvent(t){if(!this._contentLoader)return;const e=t.contentType;this._pendingContentTypes.indexOf(e)>=0||this._pendingContentTypes.push(e)}update(t,e=!1){if(this.processPendingContentTypes(t),this._rooms.size)for(const s of this._rooms.values())s&&s.update(t,e)}createRoomObjectManager(t){return new _}get rooms(){return this._rooms}get disposed(){return this._disposed}}return t._Str_9994=-1,t._Str_16337=0,t._Str_16443=1,t._Str_13904=2,t._Str_9846=3,t._Str_18280=40,t})()},XpxF:function(t,e,s){"use strict";s.d(e,"a",function(){return It});var n=s("CDzl"),i=s("Fv14"),r=s("3r1x"),a=s("P7Cj");let o=(()=>{class t{constructor(){this._gender="M",this._avatarEffectType=-1}_Str_2153(t,e){this._data=new Map,this._colors=new Map,this._gender=e,this._Str_958(t)}dispose(){this._data=null,this._colors=null,this._isDisposed=!0}get disposed(){return this._isDisposed}_Str_958(t){if(t)for(const e of t.split(".")){const t=e.split("-");if(t.length>0){const e=t[0],s=parseInt(t[1]),n=[];let i=2;for(;i<t.length;)n.push(parseInt(t[i])),i++;n.length||n.push(0),this._Str_1876(e,s,!1),this.savePartSetColourId(e,n,!1)}}}_Str_2131(t){return!!this._data.get(t)}getPartSetId(t){return this._Str_2131(t)?this._data.get(t):-1}getColourIds(t){return this._colors.get(t)?this._colors.get(t):[]}_Str_1008(){let t="";const e=[];for(const[n,i]of this._data.entries()){let t=n+"-"+i;const s=this._colors.get(n);if(s)for(const e of s)t=t+"-"+e;e.push(t)}let s=0;for(;s<e.length;)t+=e[s],s<e.length-1&&(t+="."),s++;return t}_Str_2088(t,e,s,n=!1){this._Str_1876(t,e,n),this.savePartSetColourId(t,s,n)}_Str_1876(e,s,n=!0){switch(e){case t.HD:case t.HR:case t.HA:case t.HE:case t.EA:case t.FA:case t.CH:case t.CC:case t.CA:case t.CP:case t.LG:case t.SH:case t.WA:s>=0?this._data.set(e,s):this._data.delete(e)}}savePartSetColourId(e,s,n=!0){switch(e){case t.HD:case t.HR:case t.HA:case t.HE:case t.EA:case t.FA:case t.CH:case t.CC:case t.CA:case t.CP:case t.LG:case t.SH:case t.WA:return void this._colors.set(e,s)}}getFigureStringWithFace(e){const s=[t.HD];let n="";const i=[];for(const a of s){const s=this._colors.get(a);if(s){let n=this._data.get(a);a===t.HD&&(n=e);let r=a+"-"+n;if(n>=0){let t=0;for(;t<s.length;)r=r+"-"+s[t],t++}i.push(r)}}let r=0;for(;r<i.length;)n+=i[r],r<i.length-1&&(n+="."),r++;return n}get gender(){return this._gender}}return t.M="M",t.F="F",t.U="U",t.H="h",t.STD="std",t._Str_2028="0",t.HD="hd",t.HR="hr",t.HA="ha",t.HE="he",t.EA="ea",t.FA="fa",t.CC="cc",t.CH="ch",t.CA="ca",t.CP="cp",t.LG="lg",t.SH="sh",t.WA="wa",t._Str_1329=[28,29,30,33,34,35,36,37,38,39,40,41,42,43,68],t})();class c{constructor(t,e){this._name=t,this._link=e.link,this._flipH=e.flipH,this._flipV=e.flipV}get name(){return this._name}get link(){return this._link}get flipH(){return this._flipH}get flipV(){return this._flipV}}class l{constructor(t,e){this._avatarRenderManager=t,this._aliases=new Map,this._assets=e,this._missingAssetNames=[]}dispose(){this._assets=null,this._aliases=null}reset(){this.init()}init(){for(const t of this._assets.collections.values()){if(!t)continue;const e=t.data&&t.data.aliases;if(e)for(const t in e){const s=e[t];s&&this._aliases.set(t,new c(t,s))}}}_Str_1044(t){return!!this._aliases.get(t)}_Str_2125(t){let e=t,s=5;for(;this._Str_1044(e)&&s>=0;)e=this._aliases.get(e).link,s--;return e}getAsset(t){return this._assets?(t=this._Str_2125(t),this._assets.getAsset(t)||null):null}}var h=s("vzKh"),u=s("vuPI");let _=(()=>{class t extends r.a{constructor(t,e){super(t),this._library=e}get library(){return this._library}}return t.DOWNLOAD_COMPLETE="ARLE_DOWNLOAD_COMPLETE",t})(),d=(()=>{class t extends u.a{constructor(e,s,n,i){super(),this._state=t.NOT_LOADED,this._libraryName=e,this._revision=s,this._downloadUrl=i,this._assets=n,this._downloadUrl=this._downloadUrl.replace(/%libname%/gi,this._libraryName),this._downloadUrl=this._downloadUrl.replace(/%revision%/gi,this._revision),this._assets.getCollection(this._libraryName)&&(this._state=t.LOADED)}downloadAsset(){if(this._assets&&this._state!==t.LOADING&&this._state!==t.LOADED)return this._assets.getCollection(this._libraryName)?(this._state=t.LOADED,void this.dispatchEvent(new _(_.DOWNLOAD_COMPLETE,this))):(this._state=t.LOADING,void this._assets.downloadAsset(this._downloadUrl,e=>{e&&(this._state=t.LOADED,this.dispatchEvent(new _(_.DOWNLOAD_COMPLETE,this)))}))}get libraryName(){return this._libraryName}get isLoaded(){return this._state===t.LOADED}}return t.DOWNLOAD_COMPLETE="AADL_DOWNLOAD_COMPLETE",t.NOT_LOADED=0,t.LOADING=1,t.LOADED=2,t})(),g=(()=>{class t{}return t.AVATAR_RENDER_READY="AVATAR_RENDER_READY",t})(),m=(()=>{class t extends u.a{constructor(t,e){super(),this._assets=t,this._structure=e,this._missingMandatoryLibs=a.a.instance.getConfiguration("avatar.mandatory.libraries"),this._figureMap=new Map,this._pendingContainers=[],this._figureListeners=new Map,this._incompleteFigures=new Map,this._pendingDownloadQueue=[],this._currentDownloads=[],this._libraryNames=[],this._isReady=!1,this.onLibraryLoaded=this.onLibraryLoaded.bind(this),this.onAvatarRenderReady=this.onAvatarRenderReady.bind(this),this.loadFigureMap(),this._structure.renderManager.events.addEventListener(g.AVATAR_RENDER_READY,this.onAvatarRenderReady)}loadFigureMap(){const e=new XMLHttpRequest;try{e.open("GET",a.a.instance.getConfiguration("avatar.figuremap.url")),e.send(),e.onloadend=s=>{if(e.responseText){const s=JSON.parse(e.responseText);this.processFigureMap(s.libraries),this.processMissingLibraries(),this._isReady=!0,this.dispatchEvent(new r.a(t.DOWNLOADER_READY))}},e.onerror=t=>{throw new Error("invalid_avatar_figure_map")}}catch(s){h.a.log(s)}}processFigureMap(t){if(t)for(const e of t){if(!e)continue;const t=e.id,s=e.revision||"";if(this._libraryNames.indexOf(t)>=0)continue;this._libraryNames.push(t);const n=new d(t,s,this._assets,a.a.instance.getConfiguration("avatar.asset.url"));n.addEventListener(_.DOWNLOAD_COMPLETE,this.onLibraryLoaded);for(const i of e.parts){const t=i.type+":"+i.id;let e=this._figureMap.get(t);e||(e=[]),e.push(n),this._figureMap.set(t,e)}}}onAvatarRenderReady(t){if(t){for(const[t,e]of this._pendingContainers)this.downloadAvatarFigure(t,e);this._pendingContainers=[]}}onLibraryLoaded(e){if(!e||!e.library)return;const s=[];for(const[i,a]of this._incompleteFigures.entries()){let e=!0;for(const t of a)if(t&&!t.isLoaded){e=!1;break}if(e){s.push(i);const e=this._figureListeners.get(i);if(e)for(const t of e)t&&!t.disposed&&t.resetFigure(i);this._figureListeners.delete(i),this.dispatchEvent(new r.a(t.LIBRARY_LOADED))}}for(const t of s)t&&this._incompleteFigures.delete(t);let n=0;for(;n<this._currentDownloads.length;){const t=this._currentDownloads[n];t&&t.libraryName===e.library.libraryName&&this._currentDownloads.splice(n,1),n++}}processMissingLibraries(){const t=this._missingMandatoryLibs.slice();for(const e of t){if(!e)continue;const t=this._figureMap.get(e);if(t)for(const e of t)e&&this.downloadLibrary(e)}}isAvatarFigureContainerReady(t){return!(!this._isReady||!this._structure.renderManager.isReady||this.getAvatarFigurePendingLibraries(t).length)}getAvatarFigurePendingLibraries(t){const e=[];if(!t||!this._structure)return e;const s=this._structure.figureData;if(!s)return e;const n=t._Str_1016();for(const i of n){const n=s._Str_740(i);if(!n)continue;const r=n._Str_1020(t.getPartSetId(i));if(r)for(const t of r._Str_806){if(!t)continue;const s=this._figureMap.get(t.type+":"+t.id);if(void 0!==s)for(const t of s)t&&!t.isLoaded&&(e.indexOf(t)>=0||e.push(t))}}return e}downloadAvatarFigure(t,e){if(!this._isReady||!this._structure.renderManager.isReady)return void this._pendingContainers.push([t,e]);const s=t._Str_1008(),n=this.getAvatarFigurePendingLibraries(t);if(n&&n.length){if(e&&!e.disposed){let t=this._figureListeners.get(s);t||(t=[],this._figureListeners.set(s,t)),t.push(e)}this._incompleteFigures.set(s,n);for(const t of n)t&&this.downloadLibrary(t)}else e&&!e.disposed&&e.resetFigure(s)}downloadLibrary(t){t&&!t.isLoaded&&(this._pendingDownloadQueue.indexOf(t)>=0||this._currentDownloads.indexOf(t)>=0||(this._pendingDownloadQueue.push(t),this.processDownloadQueue()))}processDownloadQueue(){for(;this._pendingDownloadQueue.length;)this._pendingDownloadQueue[0].downloadAsset(),this._currentDownloads.push(this._pendingDownloadQueue.shift())}}return t.DOWNLOADER_READY="AADM_DOWNLOADER_READY",t.LIBRARY_LOADED="AADM_LIBRARY_LOADED",t.MAX_DOWNLOADS=2,t})();var p=s("/niJ"),f=s("IqKQ"),E=s("hTzv"),S=s("IxQr");class b{constructor(t,e="",s=0){this._actionType=t||"",this._actionParameter=e||"",this._definition=null,this._startFrame=s||0,this._overridingAction=null}dispose(){this._actionType=null,this._actionParameter=null,this._definition=null}get id(){return this._definition?this._definition.id+"_"+this._actionParameter:""}get _Str_695(){return this._actionType}get _Str_727(){return this._actionParameter}set _Str_727(t){this._actionParameter=t}get _Str_742(){return this._definition}set _Str_742(t){this._definition=t}get _Str_664(){return this._startFrame}get _Str_707(){return this._overridingAction}set _Str_707(t){this._overridingAction=t}}var v=s("kXXe");let I=(()=>{class t{constructor(t,e,s){if(this._id=t.id,this._animationFrame=t.frame||0,this._dx=t.dx||0,this._dy=t.dy||0,this._dz=t.dz||0,this._directionOffset=t.dd||0,this._type=e,this._base=t.base||"",this._items=new Map,t.items)for(const n of t.items)this._items.set(n.id,n.base);""!==this._base&&this._Str_2108().toString(),s&&(this._action=new b(s.state,this.base),this._action._Str_742=s)}get items(){return this._items}_Str_2108(){let t=0,e=0;for(;e<this._base.length;)t+=this._base.charCodeAt(e),e++;return t}get id(){return this._id}get _Str_891(){return this._animationFrame}get dx(){return this._dx}get dy(){return this._dy}get dz(){return this._dz}get dd(){return this._directionOffset}get type(){return this._type}get base(){return this._base}get action(){return this._action}}return t.BODYPART="bodypart",t.FX="fx",t})();class R{constructor(t,e,s){this._image=t,this._regPoint=e,this._offset=new f.Point(0,0),this._regPoint=e,this._isCacheable=s,this._Str_1225()}dispose(){this._image&&this._image.destroy({children:!0}),this._image=null,this._regPoint=null,this._offset=null}_Str_1225(){}_Str_1387(t){this._regPoint=t,this._Str_1225()}get image(){return this._image}set image(t){this._image&&this._image!==t&&this._image.destroy({children:!0}),this._image=t}get _Str_1076(){const t=this._regPoint.clone();return t.x+=this._offset.x,t.y+=this._offset.y,t}set offset(t){this._offset=t,this._Str_1225()}get _Str_1807(){return this._isCacheable}}var T=s("sRxW"),y=s("tHQF"),O=s("uEox");let C=(()=>{class t{}return t.VERTICAL="vertical",t.SITTING="sitting",t.HORIZONTAL="horizontal",t.SWIM="swim",t.SNOWWARS_HORIZONTAL="swhorizontal",t})();class A{constructor(){this._Str_586=new Map}_Str_1565(t,e){this._Str_1233||(this._Str_1233=t);const s=this._Str_1961(this._Str_1233);s&&s._Str_1108(e),this._Str_1233=t}dispose(){if(!this._disposed){if(!this._Str_586)return;this._Str_2089(0,2147483647),this._Str_586.clear(),this._Str_586=null,this._disposed=!0}}_Str_2089(t,e){if(this._Str_586&&!this._disposed)for(const[s,n]of this._Str_586.entries())n&&e-n._Str_1815()>=t&&(n.dispose(),this._Str_586.delete(s))}_Str_2244(){return this._Str_1233}setDirection(t){this._Str_1188=t}getDirection(){return this._Str_1188}_Str_1961(t=null){return this._Str_1233?(t||(t=this._Str_1233),this._Str_586.get(t._Str_707?t._Str_707:t.id)):null}_Str_1765(t,e){this._Str_586.set(t._Str_707?t._Str_707:t.id,e)}_Str_587(t){}}class M{constructor(){this._Str_586=new Map,this._Str_1108(a.a.instance.time)}dispose(){if(this._Str_587("[dispose]"),this._Str_586){for(const t of this._Str_586.values())t&&t.dispose();this._Str_586.clear()}}_Str_2070(t){return this._Str_586.get(t.toString())||null}_Str_2168(t,e){this._Str_586.set(t.toString(),e)}_Str_1108(t){this._Str_1509=t}_Str_1815(){return this._Str_1509}_Str_587(t){}}class w{constructor(t){this._partList=t,this._images=new Map}dispose(){for(const t of this._images.values())t&&t.dispose();this._images=null}_Str_1699(){return this._partList}_Str_1629(t){return this._images.get(this._Str_2219(t))||null}_Str_1924(t,e){const s=this._Str_2219(e),n=this._images.get(s);n&&n.dispose(),this._images.set(s,t)}_Str_2219(t){let e="";for(const s of this._partList)e+=s._Str_1206(t)+"/";return e}_Str_587(t){}}class U{constructor(t,e,s,n,i,r=null){this._texture=t,this._container=r,this._rect=e,this._regPoint=s,this._flipH=n,this._color=i,n&&(this._regPoint.x=-this._regPoint.x+e.width)}dispose(){this._texture=null,this._regPoint=null,this._color=null}get texture(){return this._texture}get container(){return this._container}get rect(){return this._rect}get _Str_1076(){return this._regPoint}get flipH(){return this._flipH}get color(){return this._color}get _Str_1567(){return new f.Rectangle(-this._regPoint.x,-this._regPoint.y,this._rect.width,this._rect.height)}}let D=(()=>{class t{constructor(t,e,s,n){this._structure=t,this._avatar=e,this._assets=s,this._scale=n,this._cache=new Map,this._canvas=null,this._disposed=!1,this._unionImages=[],this._matrix=new f.Matrix,this._serverRenderData=[]}dispose(){if(!this._disposed){if(this._structure=null,this._avatar=null,this._assets=null,this._canvas=null,this._disposed=!0,this._cache){for(const t of this._cache.values())t&&t.dispose();this._cache=null}if(this._unionImages){for(const t of this._unionImages)t&&t.dispose();this._unionImages=[]}}}_Str_1086(t=6e4){const e=a.a.instance.time;if(this._cache)for(const s of this._cache.values())s&&s._Str_2089(t,e)}_Str_741(t){if(this._cache)for(const e of this._cache.values())e&&e._Str_1565(t,0)}setDirection(t,e){const s=this._structure._Str_1695(t);if(s)for(const n of s){const t=this._Str_1050(n);t&&t.setDirection(e)}}_Str_1565(t,e){const s=this._structure._Str_2021(t,this._avatar);for(const n of s){const s=this._Str_1050(n);s&&s._Str_1565(t,e)}}_Str_2014(t){if(this._geometryType!==t){if(this._geometryType===C.SITTING&&t===C.VERTICAL||this._geometryType===C.VERTICAL&&t===C.SITTING||this._geometryType===C.SNOWWARS_HORIZONTAL&&(t=C.SNOWWARS_HORIZONTAL))return this._geometryType=t,void(this._canvas=null);this._Str_1086(0),this._geometryType=t,this._canvas=null}}_Str_1629(t,e,s=!1){let n=this._Str_1050(t);n||(n=new A,this._cache.set(t,n));let i=n.getDirection(),r=n._Str_2244(),a=e;r._Str_742._Str_812&&(a-=r._Str_664);let o=r,c=[],l=new Map;const h=new f.Point;if(r&&r._Str_742&&r._Str_742._Str_861){let s=i;const n=this._structure._Str_720(r._Str_742.state+"."+r._Str_727),u=e-r._Str_664;if(n){const e=n._Str_607(u,t,r._Str_707);e&&(s=i+e.dd,e.dd<0?s<0?s=8+s:s>7&&(s=8-s):s<0?s+=8:s>7&&(s-=8),this._scale===O.a.LARGE?(h.x=e.dx,h.y=e.dy):(h.x=e.dx/2,h.y=e.dy/2),a=e._Str_891,e.action&&(r=e.action),e.type===I.BODYPART?(null!=e.action&&(o=e.action),i=s):e.type===I.FX&&(i=s),l=e.items),c=n._Str_652}}let u=n._Str_1961(o);u&&!s||(u=new M,n._Str_1765(o,u));let _=u._Str_2070(i);if(!_||s){const e=this._structure._Str_713(t,this._avatar.getFigure(),o,this._geometryType,i,c,this._avatar,l);_=new w(e),u._Str_2168(i,_)}let d=_._Str_1629(a);if(!d||s){const t=_._Str_1699();if(d=this._Str_1834(i,t,a,r,s),!d||s)return null;d._Str_1807&&_._Str_1924(d,a)}const g=this._structure._Str_1888(o,i,a,t);return h.x+=g.x,h.y+=g.y,d.offset=h,d}_Str_1009(){return this._serverRenderData=[],this._serverRenderData}_Str_1050(t){let e=this._cache.get(t);return e||(e=new A,this._cache.set(t,e)),e}_Str_1834(t,e,s,n,i=!1){if(!e||!e.length)return null;if(!this._canvas&&(this._canvas=this._structure._Str_1664(this._scale,this._geometryType),!this._canvas))return null;const r=T.a.DIRECTION_IS_FLIPPED[t]||!1;let a=n._Str_742._Str_778,o=!0,c=e.length-1;for(;c>=0;){const n=e[c];let l=16777215;if((7!=t||"fc"!==n._Str_1669&&"ey"!==n._Str_1669)&&("ri"!==n._Str_1669||n._Str_1502)){const e=n._Str_1502,c=n._Str_2258(s);let h=n._Str_1669,u=0;c?(u=c.number,c._Str_778&&""!==c._Str_778&&(a=c._Str_778)):u=n._Str_1674(s);let _=t,d=!1;r&&("wav"===a&&(h===y.a.LEFT_HAND||h===y.a.LEFT_SLEEVE||h===y.a.LEFT_COAT_SLEEVE)||"drk"===a&&(h===y.a.RIGHT_HAND||h===y.a.RIGHT_SLEEVE||h===y.a.RIGHT_COAT_SLEEVE)||"blw"===a&&h===y.a.RIGHT_HAND||"sig"===a&&h===y.a.LEFT_HAND||"respect"===a&&h===y.a.LEFT_HAND||h===y.a.RIGHT_HAND_ITEM||h===y.a.LEFT_HAND_ITEM||h===y.a.CHEST_PRINT?d=!0:(4===t?_=2:5===t?_=1:6===t&&(_=0),n._Str_1666!==h&&(h=n._Str_1666)));let g=this._scale+"_"+a+"_"+h+"_"+e+"_"+_+"_"+u,m=this._assets.getAsset(g);if(m||(g=this._scale+"_std_"+h+"_"+e+"_"+_+"_0",m=this._assets.getAsset(g)),m){const t=m.texture;if(t&&t.valid&&t.baseTexture){n.isColorable&&n.color&&(l=n.color._Str_915);const e=new f.Point(-m.x,-m.y);if(d&&(e.x=e.x+(this._scale===O.a.LARGE?65:31)),i){const s=new v.a;s.name=this._assets._Str_2125(g),s.x=-e.x-33,s.y=-e.y,s.z=-1e-4*this._serverRenderData.length,s.width=m.rectangle.width,s.height=m.rectangle.height,s.flipH=d,"lay"===a&&(s.x=s.x+53),r&&(s.flipH=!s.flipH,s.x=s.flipH?-s.x-t.width:s.x+65),n.isColorable&&(s.color=""+l),this._serverRenderData.push(s)}this._unionImages.push(new U(t,m.rectangle,e,d,l))}else o=!1}}c--}if(!this._unionImages.length)return null;const l=this._Str_1236(this._unionImages,r),h=new f.Point(-l._Str_1076.x,(this._scale===O.a.LARGE?this._canvas.height-16:this._canvas.height-8)-l._Str_1076.y);r&&"lay"!==a&&(h.x=h.x+(this._scale===O.a.LARGE?67:31));let u=this._unionImages.length-1;for(;u>=0;){const t=this._unionImages.pop();t&&t.dispose(),u--}return new R(l.container,h,o)}_Str_1652(t){let e=(255*t).toString(16);return e.length<2&&(e="0"+e),e}_Str_1236(t,e){const s=new f.Rectangle;for(const a of t)a&&s.enlarge(a._Str_1567);const n=new f.Point(-s.x,-s.y),i=new f.Container,r=new f.Sprite(f.Texture.EMPTY);r.width=s.width,r.height=s.height,i.addChild(r);for(const a of t){if(!a)continue;const t=a.texture,s=a.color,r=!(e&&a.flipH)&&(e||a.flipH),o=n.clone();o.x-=a._Str_1076.x,o.y-=a._Str_1076.y,e&&(o.x=i.width-(o.x+a.rect.width)),r?(this._matrix.a=-1,this._matrix.tx=a.rect.x+a.rect.width+o.x,this._matrix.ty=o.y-a.rect.y):(this._matrix.a=1,this._matrix.tx=o.x-a.rect.x,this._matrix.ty=o.y-a.rect.y);const c=new f.Sprite(t);c.tint=s,c.transform.setFromMatrix(this._matrix),i.addChild(c)}return new U(null,i.getLocalBounds(),n,e,null,i)}}return t._Str_2189=6e4,t})();var N=s("/PsI"),L=s("Kx+W");let P=(()=>{class t{constructor(e,s,n,i,r,a=null){this._frameCounter=0,this._directionOffset=0,this._isAnimating=!1,this._animationHasResetOnToggle=!1,this._actionsSorted=!1,this._fullImageCacheSize=5,this._isCachedImage=!1,this._useFullImageCache=!1,this._effectIdInUse=-1,this._cachedBodyPartsDirection=-1,this._cachedBodyPartsGeometryType=null,this._cachedBodyPartsAvatarSet=null,this._canvasOffsets=[],this._actions=[],this._cachedBodyParts=[],this._changes=!0,this._disposed=!1,this._effectManager=r,this._structure=e,this._assets=s,this._scale=i,this._effectListener=a,null==this._scale&&(this._scale=O.a.LARGE),null==n&&(n=new p.a("hr-893-45.hd-180-2.ch-210-66.lg-270-82.sh-300-91.wa-2007-.ri-1-")),this._figure=n,this._cache=new D(this._structure,this,this._assets,this._scale),this.setDirection(t.DEFAULT_AVATAR_SET,t.DEFAULT_DIRECTION),this._actions=[],this._defaultAction=new b(N.a.POSTURE_STAND),this._defaultAction._Str_742=this._structure._Str_1675(t.DEFAULT_ACTION),this.resetActions(),this._fullImageCache=new E.a,this._animationFrameCount=0}getServerRenderData(){return this.getAvatarPartsForCamera(L.a.FULL),this._cache._Str_1009()}dispose(){if(!this._disposed){if(this._structure=null,this._assets=null,this._mainAction=null,this._figure=null,this._avatarSpriteData=null,this._actions=null,this._image&&(this._image.destroy(),this._image=null),this._cache&&(this._cache.dispose(),this._cache=null),this._fullImageCache){for(const t of this._fullImageCache.getValues())t&&t.destroy();this._fullImageCache=null}this._image=null,this._canvasOffsets=null,this._disposed=!0}}get disposed(){return this._disposed}getFigure(){return this._figure}getScale(){return this._scale}getPartColor(t){return this._structure._Str_867(this._figure,t)}setDirection(t,e){(e+=this._directionOffset)<T.a.MIN_DIRECTION&&(e=T.a.MAX_DIRECTION+(e+1)),e>T.a.MAX_DIRECTION&&(e-=T.a.MAX_DIRECTION+1),this._structure._Str_1939(t)&&(this._mainDirection=e),t!==L.a.HEAD&&t!==L.a.FULL||(t===L.a.HEAD&&this.isHeadTurnPreventedByAction()&&(e=this._mainDirection),this._headDirection=e),this._cache.setDirection(t,e),this._changes=!0}setDirectionAngle(t,e){this.setDirection(t,Math.floor(e/45))}getSprites(){return this._sprites}getCanvasOffsets(){return this._canvasOffsets}getLayerData(t){return this._structure._Str_1881(t.animation.id,this._frameCounter,t.id)}updateAnimationByFrames(t=1){this._frameCounter+=t,this._changes=!0}resetAnimationFrameCounter(){this._frameCounter=0,this._changes=!0}getFullImageCacheKey(){if(!this._useFullImageCache)return null;if(1==this._sortedActions.length&&this._mainDirection==this._headDirection)return this._mainDirection+this._currentActionsString+this._frameCounter%4;if(2==this._sortedActions.length)for(const t of this._sortedActions){if("fx"==t._Str_695&&("33"==t._Str_727||"34"==t._Str_727||"35"==t._Str_727||"36"==t._Str_727))return this._mainDirection+this._currentActionsString+0;if("fx"==t._Str_695&&("38"==t._Str_727||"39"==t._Str_727))return this._mainDirection+"_"+this._headDirection+this._currentActionsString+this._frameCounter%11;if("dance"===t._Str_695&&("1"===t._Str_727||"2"===t._Str_727||"3"===t._Str_727||"4"===t._Str_727)){let e=this._frameCounter%8;return"3"===t._Str_727&&(e=this._frameCounter%10),"4"===t._Str_727&&(e=this._frameCounter%16),this._mainDirection+t._Str_695+t._Str_727+e}}return null}getBodyParts(t,e,s){return s==this._cachedBodyPartsDirection&&e==this._cachedBodyPartsGeometryType&&t==this._cachedBodyPartsAvatarSet||(this._cachedBodyPartsDirection=s,this._cachedBodyPartsGeometryType=e,this._cachedBodyPartsAvatarSet=t,this._cachedBodyParts=this._structure._Str_755(t,e,s)),this._cachedBodyParts}getAvatarPartsForCamera(t){let e;if(null==this._mainAction)return;if(null==this._structure._Str_1664(this._scale,this._mainAction._Str_742._Str_868))return;const s=this.getBodyParts(t,this._mainAction._Str_742._Str_868,this._mainDirection);let n=s.length-1;for(;n>=0;)e=s[n],this._cache._Str_1629(e,this._frameCounter,!0),n--}getImage(t,e,s=1,n=!0){if(!this._changes)return this._image;if(!this._mainAction)return null;this._actionsSorted||this.endActionAppends();const i=this._structure._Str_1664(this._scale,this._mainAction._Str_742._Str_868);if(!i)return null;!this._image||this._image.width===i.width&&this._image.height===i.height||(this._reusableTexture&&(this._reusableTexture.destroy(!0),this._reusableTexture=null),this._image=null,this._isCachedImage=!1);const r=this.getBodyParts(t,this._mainAction._Str_742._Str_868,this._mainDirection);this._image=null;const o=new f.Container;let c=!0,l=r.length-1;for(;l>=0;){const t=this._cache._Str_1629(r[l],this._frameCounter);if(t){const e=t.image;if(!e)return o.destroy({children:!0}),null;c=c&&t._Str_1807;const s=t._Str_1076.clone();if(s){s.x+=i.offset.x,s.y+=i.offset.y,s.x+=i._Str_1076.x,s.y+=i._Str_1076.y;const t=new f.Container;t.addChild(e),t&&(t.position.set(s.x,s.y),o.addChild(t))}}l--}return this._avatarSpriteData&&this._avatarSpriteData._Str_832&&this.convertToGrayscale(o),n?(this._reusableTexture?a.a.instance.renderer.render(o,this._reusableTexture,!0):this._reusableTexture=S.a.generateTexture(o,new f.Rectangle(0,0,i.width,i.height)),this._reusableTexture?(this._image=this._reusableTexture,this._changes=!1,this._image):null):S.a.generateTexture(o,new f.Rectangle(0,0,i.width,i.height))}getImageAsSprite(t,e=1){if(!this._mainAction)return null;this._actionsSorted||this.endActionAppends();const s=this._structure._Str_1664(this._scale,this._mainAction._Str_742._Str_868);if(!s)return null;const n=this.getBodyParts(t,this._mainAction._Str_742._Str_868,this._mainDirection),i=new f.Sprite,r=new f.Sprite(f.Texture.EMPTY);r.width=s.width,r.height=s.height,i.addChild(r);let a=n.length-1;for(;a>=0;){const t=this._cache._Str_1629(n[a],this._frameCounter);if(t){const e=t.image;if(!e)return i.destroy({children:!0}),null;const n=t._Str_1076.clone();if(n){n.x+=s.offset.x,n.y+=s.offset.y,n.x+=s._Str_1076.x,n.y+=s._Str_1076.y;const t=new f.Container;t.addChild(e),t.position.set(n.x,n.y),i.addChild(t)}}a--}return i}getCroppedImage(t,e=1){if(!this._mainAction)return null;this._actionsSorted||this.endActionAppends();const s=this._structure._Str_1664(this._scale,this._mainAction._Str_742._Str_868);if(!s)return null;const n=this.getBodyParts(t,this._mainAction._Str_742._Str_868,this._mainDirection),i=new f.Container,r=new f.Sprite(f.Texture.EMPTY);r.width=s.width,r.height=s.height,i.addChild(r);let o=n.length-1;for(;o>=0;){const t=this._cache._Str_1629(n[o],this._frameCounter);if(t){const e=t.image;if(!e)return i.destroy({children:!0}),null;const n=t._Str_1076.clone();if(n){n.x+=s.offset.x,n.y+=s.offset.y,n.x+=s._Str_1076.x,n.y+=s._Str_1076.y;const t=new f.Container;t.addChild(e),t&&(t.position.set(n.x,n.y),i.addChild(t))}}o--}return a.a.instance.renderer.extract.image(i)||null}getFullImage(t){const e=this._fullImageCache.getValue(t);return e?(e.valid||(this._fullImageCache.remove(t),e.destroy(!0)),e):null}cacheFullImage(t,e){const s=this._fullImageCache.getValue(t);if(s&&(this._fullImageCache.remove(t),s.destroy(!0)),this._fullImageCache.length===this._fullImageCacheSize){const t=this._fullImageCache.getKey(0);t&&this._fullImageCache.remove(t).destroy(!0)}this._fullImageCache.add(t,e)}getAsset(t){return this._assets.getAsset(t)}getDirection(){return this._mainDirection}initActionAppends(){this._actions=[],this._actionsSorted=!1,this._currentActionsString="",this._useFullImageCache=!1}endActionAppends(){if(this.sortActions()){for(const t of this._sortedActions)t._Str_695===N.a.EFFECT&&(this._effectManager.isAvatarEffectReady(parseInt(t._Str_727))||this._effectManager.downloadAvatarEffect(parseInt(t._Str_727),this));this.resetActions(),this.setActionsToParts()}}appendAction(t,...e){let s="";switch(this._actionsSorted=!1,e&&e.length>0&&(s=e[0]),null!=s&&(s=s.toString()),t){case N.a.POSTURE:switch(s){case N.a.POSTURE_LAY:this.setDirection(L.a.FULL,0==this._mainDirection?4:2);case N.a.POSTURE_WALK:case N.a.POSTURE_STAND:this._useFullImageCache=!0,this._useFullImageCache=!0;case N.a.POSTURE_SWIM:case N.a.POSTURE_FLOAT:case N.a.POSTURE_SIT:case N.a.SNOWWAR_RUN:case N.a.SNOWWAR_DIE_FRONT:case N.a.SNOWWAR_DIE_BACK:case N.a.SNOWWAR_PICK:case N.a.SNOWWAR_THROW:this.addActionData(s)}break;case N.a.GESTURE:switch(s){case N.a.GESTURE_AGGRAVATED:case N.a.GESTURE_SAD:case N.a.GESTURE_SMILE:case N.a.GESTURE_SURPRISED:this.addActionData(s)}break;case N.a.EFFECT:"33"!==s&&"34"!==s&&"35"!==s&&"36"!==s&&"38"!==s&&"39"!==s||(this._useFullImageCache=!0);case N.a.DANCE:case N.a.TALK:case N.a.EXPRESSION_WAVE:case N.a.SLEEP:case N.a.SIGN:case N.a.EXPRESSION_RESPECT:case N.a.EXPRESSION_BLOW_A_KISS:case N.a.EXPRESSION_LAUGH:case N.a.EXPRESSION_CRY:case N.a.EXPRESSION_IDLE:case N.a.EXPRESSION_SNOWBOARD_OLLIE:case N.a.EXPRESSION_SNOWBORD_360:case N.a.EXPRESSION_RIDE_JUMP:this.addActionData(t,s);break;case N.a.CARRY_OBJECT:case N.a.USE_OBJECT:{const e=this._structure._Str_2018(t);e&&(s=e._Str_1350(s)),this.addActionData(t,s);break}}return!0}addActionData(t,e=""){let s;this._actions||(this._actions=[]);let n=0;for(;n<this._actions.length;){if(s=this._actions[n],s._Str_695==t&&s._Str_727==e)return;n++}this._actions.push(new b(t,e,this._frameCounter))}isAnimating(){return this._isAnimating||this._animationFrameCount>1}resetActions(){return this._animationHasResetOnToggle=!1,this._isAnimating=!1,this._sprites=[],this._avatarSpriteData=null,this._directionOffset=0,this._structure._Str_2101(this),this._mainAction=this._defaultAction,this._mainAction._Str_742=this._defaultAction._Str_742,this.resetBodyPartCache(this._defaultAction),!0}isHeadTurnPreventedByAction(){let t,e;if(null==this._sortedActions)return!1;for(const s of this._sortedActions)t=this._structure._Str_2018(s._Str_695),null!=t&&t._Str_715(s._Str_727)&&(e=!0);return e}sortActions(){let t,e,s;if(this._currentActionsString="",this._sortedActions=this._structure._Str_711(this._actions),this._animationFrameCount=this._structure._Str_1936(this._sortedActions),this._sortedActions){this._canvasOffsets=this._structure._Str_781(this._sortedActions,this._scale,this._mainDirection);for(const s of this._sortedActions)if(this._currentActionsString=this._currentActionsString+(s._Str_695+s._Str_727),s._Str_695===N.a.EFFECT){const n=parseInt(s._Str_727);this._effectIdInUse!==n&&(t=!0),this._effectIdInUse=n,e=!0}e||(this._effectIdInUse>-1&&(t=!0),this._effectIdInUse=-1),t&&this._cache._Str_1086(0),this._lastActionsString!=this._currentActionsString&&(s=!0,this._lastActionsString=this._currentActionsString)}else this._canvasOffsets=[0,0,0],""!==this._lastActionsString&&(s=!0,this._lastActionsString="");return this._actionsSorted=!0,s}setActionsToParts(){if(null==!this._sortedActions)return;const t=a.a.instance.time,e=[];for(const s of this._sortedActions)e.push(s._Str_695);for(const s of this._sortedActions)if(s&&s._Str_742&&s._Str_742._Str_861){const t=this._structure._Str_720(s._Str_742.state+"."+s._Str_727);if(t&&t._Str_1892()){const n=t._Str_1571();if(n)for(const i of n)e.indexOf(i)>=0&&(s._Str_707=t._Str_707(i))}t&&t.resetOnToggle&&(this._animationHasResetOnToggle=!0)}for(const s of this._sortedActions)if(s&&s._Str_742&&(s._Str_742._Str_861&&""===s._Str_727&&(s._Str_727="1"),this.setActionToParts(s,t),s._Str_742._Str_861)){this._isAnimating=s._Str_742._Str_801(s._Str_727);const t=this._structure._Str_720(s._Str_742.state+"."+s._Str_727);t&&(this._sprites=this._sprites.concat(t._Str_786),t._Str_776()&&(this._directionOffset=t._Str_1493.offset),t._Str_872()&&(this._avatarSpriteData=t._Str_1475))}}setActionToParts(t,e){null!=t&&null!=t._Str_742&&""!=t._Str_742._Str_778&&(t._Str_742._Str_779&&(this._mainAction=t,this._cache._Str_2014(t._Str_742._Str_868)),this._cache._Str_1565(t,e),this._changes=!0)}resetBodyPartCache(t){t&&""!==t._Str_742._Str_778&&(t._Str_742._Str_779&&(this._mainAction=t,this._cache._Str_2014(t._Str_742._Str_868)),this._cache._Str_741(t),this._changes=!0)}get avatarSpriteData(){return this._avatarSpriteData}convertToGrayscale(e,s="CHANNELS_EQUAL"){let n=.33,i=.33,r=.33;switch(s){case t.CHANNELS_UNIQUE:n=.3,i=.59,r=.11;break;case t.CHANNELS_RED:n=1,i=0,r=0;break;case t.CHANNELS_GREEN:n=0,i=1,r=0;break;case t.CHANNELS_BLUE:n=0,i=0,r=1;break;case t.CHANNELS_DESATURATED:n=.3086,i=.6094,r=.082}const a=new f.filters.ColorMatrixFilter;return a.matrix=[n,i,r,0,0,n,i,r,0,0,n,i,r,0,0,0,0,0,1,0],e.filters=[a],e}errorThis(t){}logThis(t){}isPlaceholder(){return!1}forceActionUpdate(){this._lastActionsString=""}get animationHasResetOnToggle(){return this._animationHasResetOnToggle}get mainAction(){return this._mainAction._Str_695}resetEffect(t){t===this._effectIdInUse&&(this.resetActions(),this.setActionsToParts(),this._animationHasResetOnToggle=!0,this._changes=!0,this._effectListener&&this._effectListener.resetEffect(t))}}return t.CHANNELS_EQUAL="CHANNELS_EQUAL",t.CHANNELS_UNIQUE="CHANNELS_UNIQUE",t.CHANNELS_RED="CHANNELS_RED",t.CHANNELS_GREEN="CHANNELS_GREEN",t.CHANNELS_BLUE="CHANNELS_BLUE",t.CHANNELS_DESATURATED="CHANNELS_DESATURATED",t.DEFAULT_ACTION="Default",t.DEFAULT_DIRECTION=2,t.DEFAULT_AVATAR_SET=L.a.FULL,t})();class x{constructor(t){this._id=parseInt(t.id),this._value=parseInt(t.id),this._prevents=t.prevents||[],this._preventHeadTurn=t.preventHeadTurn||!1,this._isAnimated=!0,void 0!==t.animated&&!1===t.animated&&(this._isAnimated=!1)}get id(){return this._id}get value(){return this._value}get prevents(){return this._prevents}get _Str_1891(){return this._preventHeadTurn}get _Str_801(){return this._isAnimated}}class F{constructor(t){if(this._id=t.id,this._state=t.state,this._precedence=t.precedence,this._activePartSet=t.activePartSet,this._assetPartDefinition=t.assetPartDefinition,this._lay=t.lay,this._geometryType=t.geometryType,this._isMain=t.main||!1,this._isDefault=t.isDefault||!1,this._isAnimation=t.animation||!1,this._startFromFrameZero=t.startFromFrameZero||!1,this._prevents=t.prevents||[],this._preventHeadTurn=t.preventHeadTurn||!1,this._types=new Map,this._params=new Map,this._defaultParameterValue="",this._canvasOffsets=null,t.params&&t.params.length>0)for(const e of t.params)e&&("default"===e.id?this._defaultParameterValue=e.value:this._params.set(e.id,e.value));if(t.types&&t.types.length>0)for(const e of t.types){if(!e)continue;const t=new x(e);this._types.set(t.id,t)}}_Str_772(t,e,s){this._canvasOffsets||(this._canvasOffsets=new Map);let n=this._canvasOffsets.get(t);n||(n=new Map,this._canvasOffsets.set(t,n)),n.set(e,s)}_Str_805(t,e){if(!this._canvasOffsets)return null;const s=this._canvasOffsets.get(t);return s?s.get(e):null}getType(t){return t&&this._types.get(parseInt(t))||null}_Str_1350(t){return t?this._params.get(t)||this._defaultParameterValue:""}_Str_733(t){return this._prevents.concat(this._Str_1889(t))}_Str_1889(t){if(!t)return[];const e=this._types.get(parseInt(t));return e?e.prevents:[]}_Str_715(t){if(!t)return this._preventHeadTurn;const e=this.getType(t);return e?e._Str_1891:this._preventHeadTurn}_Str_801(t){if(!t)return!0;const e=this.getType(t);return!e||e._Str_801}get id(){return this._id}get state(){return this._state}get precedence(){return this._precedence}get activePartSet(){return this._activePartSet}get _Str_778(){return this._assetPartDefinition}get lay(){return this._lay}get _Str_868(){return this._geometryType}get _Str_779(){return this._isMain}get _Str_804(){return this._isDefault}get _Str_861(){return this._isAnimation}get _Str_812(){return this._startFromFrameZero}get prevents(){return this._prevents}get preventHeadTurn(){return this._preventHeadTurn}get params(){return this._params}}class k{constructor(t,e){this._assets=t,this._actions=new Map,this._defaultAction=null,this._Str_1620(e)}_Str_1620(t){if(t){for(const e of t.actions){if(!e||!e.state)continue;const t=new F(e);this._actions.set(t.state,t)}t.actionOffsets&&this._Str_1767(t.actionOffsets)}}_Str_1767(t){if(t&&t.length)for(const e of t){const t=this._actions.get(e.action);if(t)for(const s of e.offsets){const e=s.size||"",n=s.direction;""!==e&&void 0!==n&&t._Str_772(e,n,[s.x||0,s.y||0,s.z||0])}}}_Str_1675(t){if(!t)return null;for(const e of this._actions.values())if(e&&e.id===t)return e;return null}_Str_2018(t){return this._actions.get(t)||null}_Str_1027(){if(this._defaultAction)return this._defaultAction;for(const t of this._actions.values())if(t&&t._Str_804)return this._defaultAction=t,t;return null}_Str_781(t,e,s){let n=[];for(const i of t){if(!i)continue;const t=this._actions.get(i._Str_695),r=t&&t._Str_805(e,s);r&&(n=r)}return n}_Str_711(t){if(!t)return null;t=this._Str_1247(t);const e=[];for(const s of t){if(!s)continue;const t=this._actions.get(s._Str_695);t&&(s._Str_742=t,e.push(s))}return e.sort(this.sortByPrecedence),e}_Str_1247(t){let e=[];const s=[];for(const n of t){if(!n)continue;const t=this._actions.get(n._Str_695);t&&(e=e.concat(t._Str_733(n._Str_727)))}for(const n of t){if(!n)continue;let t=n._Str_695;"fx"===n._Str_695&&(t=t+"."+n._Str_727),e.indexOf(t)>=0||s.push(n)}return s}sortByPrecedence(t,e){if(!t||!e)return 0;const s=t._Str_742.precedence,n=e._Str_742.precedence;return s<n?1:s>n?-1:0}}class W{constructor(t){this._id=t.id||"",this._align=t.align||"",this._base=t.base||"",this._ink=t.ink||0,this._blend=0;const e=t.blend;e&&e.length>0&&(this._blend=parseInt(e),this._blend>1&&(this._blend=this._blend/100))}get id(){return this._id}get align(){return this._align}get base(){return this._base}get ink(){return this._ink}get blend(){return this._blend}get _Str_1096(){return 1!==this._blend}}class B{constructor(t){this._ink=t.ink;let e=t.foreground,s=t.background;e=e.replace("#",""),s=s.replace("#",""),this._foreGround=parseInt(e,16),this._backGround=parseInt(s,16),this._colorTransform=null,this._rgb=parseInt(e,16),this._r=this._rgb>>16&255,this._g=this._rgb>>8&255,this._b=this._rgb>>0&255,this._redMultiplier=this._r/255*1,this._greenMultiplier=this._g/255*1,this._blueMultiplier=this._b/255*1,this._alphaMultiplier=1,this._paletteIsGrayscale=!0,37===this._ink&&(this._alphaMultiplier=.5,this._paletteIsGrayscale=!1),this._colorMap=this._Str_1181(this._backGround,this._foreGround)}get ink(){return this._ink}get colorTransform(){return this._colorTransform}get reds(){return this._colorMap.get("reds")}get greens(){return this._colorMap.get("greens")}get blues(){return this._colorMap.get("blues")}get alphas(){return this._colorMap.get("alphas")}get _Str_832(){return this._paletteIsGrayscale}_Str_1181(t,e){const s=t>>24&255,n=t>>16&255,i=t>>8&255,r=t>>0&255,a=((e>>24&255)-s)/255,o=((e>>16&255)-n)/255,c=((e>>8&255)-i)/255,l=((e>>0&255)-r)/255,h=new Map,u=[],_=[],d=[],g=[];let m=s,p=n,f=i,E=r,S=0;for(;S<256;)p==n&&f==i&&E==r&&(m=0),m+=a,p+=o,f+=c,E+=l,g.push(m<<24),u.push(m<<24|p<<16|f<<8|E),_.push(m<<24|p<<16|f<<8|E),d.push(m<<24|p<<16|f<<8|E),S++;return h.set("alphas",u),h.set("reds",u),h.set("greens",_),h.set("blues",d),h}}class V{constructor(t){this._offset=t.offset}get offset(){return this._offset}}class G{constructor(t,e){this._animation=t,this._id=e.id,this._ink=e.ink,this._member=e.member,this._hasStaticY=!!e.staticY,this._hasDirections=!!e.directions,this._dx=[],this._dy=[],this._dz=[];const s=e.directionList;if(s&&s.length)for(const n of s){const t=n.id;void 0!==t&&(this._dx[t]=n.dx||0,this._dy[t]=n.dy||0,this._dz[t]=n.dz||0)}}_Str_809(t){return t<this._dx.length?this._dx[t]:0}_Str_739(t){return t<this._dy.length?this._dy[t]:0}_Str_839(t){return t<this._dz.length?this._dz[t]:0}get animation(){return this._animation}get id(){return this._id}get ink(){return this._ink}get member(){return this._member}get _Str_949(){return this._hasDirections}get _Str_767(){return this._hasStaticY}}let K=(()=>{class t{constructor(t,e){if(this._id=e.name,this._description=this._id,this._frames=[],this._spriteData=null,this._avatarData=null,this._directionData=null,this._removeData=null,this._addData=null,this._overriddenActions=null,this._overrideFrames=null,this._resetOnToggle=e.resetOnToggle||!1,e.sprites&&e.sprites.length){this._spriteData=[];for(const t of e.sprites)this._spriteData.push(new G(this,t))}if(e.avatars&&e.avatars.length&&(this._avatarData=new B(e.avatars[0])),e.directions&&e.directions.length&&(this._directionData=new V(e.directions[0])),e.removes&&e.removes.length){this._removeData=[];for(const t of e.removes)this._removeData.push(t.id)}if(e.adds&&e.adds.length){this._addData=[];for(const t of e.adds)this._addData.push(new W(t))}if(e.overrides&&e.overrides.length){this._overrideFrames=new Map,this._overriddenActions=new Map;for(const s of e.overrides){const e=s.name;this._overriddenActions.set(s.override,e);const n=[];this._Str_1031(n,s.frames,t),this._overrideFrames.set(e,n)}}this._Str_1031(this._frames,e.frames,t)}_Str_1031(t,e,s){if(e&&e.length)for(const n of e){let e=1;n.repeats&&n.repeats>1&&(e=n.repeats);let i=0;for(;i<e;){const e=[];if(n.bodyparts&&n.bodyparts.length)for(const t of n.bodyparts){const n=s._Str_1675(t.action),i=new I(t,I.BODYPART,n);e.push(i)}if(n.fxs&&n.fxs.length)for(const t of n.fxs){const n=s._Str_1675(t.action),i=new I(t,I.FX,n);e.push(i)}t.push(e),i++}}}_Str_2185(t=null){if(!t)return this._frames.length;if(this._overrideFrames){const e=this._overrideFrames.get(t);if(e)return e.length}return 0}_Str_1892(){return!!this._overriddenActions&&this._overriddenActions.size>0}_Str_1571(){if(!this._overriddenActions)return null;const t=[];for(const e of this._overriddenActions.keys())t.push(e);return t}_Str_707(t){return this._overriddenActions?this._overriddenActions.get(t):null}_Str_2259(t,e=null){t<0&&(t=0);let s=[];if(e){const n=this._overrideFrames.get(e);n&&n.length>0&&(s=n[t%n.length])}else this._frames.length>0&&(s=this._frames[t%this._frames.length]);return s}_Str_1065(t,e=null){const s=[];for(const n of this._Str_2259(t,e))if(n.type===I.BODYPART)s.push(n.id);else if(n.type===I.FX&&this._addData&&this._addData.length)for(const t of this._addData)t.id===n.id&&s.push(t.align);return s}_Str_607(t,e,s=null){for(const n of this._Str_2259(t,s)){if(n.id===e)return n;if(n.type===I.FX&&this._addData&&this._addData.length)for(const t of this._addData)if(t.align===e&&t.id===n.id)return n}return null}_Str_872(){return null!==this._avatarData}_Str_776(){return null!==this._directionData}_Str_706(){return null!==this._addData}_Str_1550(t){if(this._addData)for(const e of this._addData)if(e.id===t)return e;return null}get id(){return this._id}get _Str_786(){return this._spriteData||t._Str_2211}get _Str_1475(){return this._avatarData}get _Str_1493(){return this._directionData}get _Str_652(){return this._removeData||t._Str_2211}get _Str_687(){return this._addData||t._Str_2211}toString(){return this._description}get resetOnToggle(){return this._resetOnToggle}}return t._Str_2211=[],t})();class H{constructor(){this._animations=new Map}_Str_2061(t,e){const s=e[Object.keys(e)[0]],n=new K(t,s);return this._animations.set(s.name,n),!0}_Str_720(t){return this._animations.get(t)||null}_Str_607(t,e,s){const n=this._Str_720(t);return n?n._Str_607(e,s):null}get animations(){return this._animations}}class j{constructor(t){this._number=t.number,this._assetPartDefinition=t.assetPartDefinition||null}get number(){return this._number}get _Str_778(){return this._assetPartDefinition}}class z{constructor(t,e,s,n,i,r,a,o,c="",l=!1,h=1){this._bodyPartId=t,this._partType=e,this._partId=s,this._color=n,this._frames=i,this._action=r,this._isColorable=a,this._paletteMapId=o,this._flippedPartType=c,this._isBlendable=l,this._blendTransform=null,"ey"===this._partType&&(this._isColorable=!1)}_Str_1674(t){if(!this._frames||!this._frames.length)return 0;const e=t%this._frames.length;return this._frames[e]instanceof j?this._frames[e].number:e}_Str_2258(t){const e=t%this._frames.length;return this._frames&&this._frames.length>e&&this._frames[e]instanceof j?this._frames[e]:null}_Str_1206(t){const e=t%this._frames.length;if(this._frames&&this._frames.length>e&&this._frames[e]instanceof j){const t=this._frames[e];return this._Str_1502+":"+t._Str_778+":"+t.number}return this._Str_1502+":"+e}get _Str_1360(){return this._bodyPartId}get _Str_1669(){return this._partType}get _Str_1502(){return this._partId}get color(){return this._color}get action(){return this._action}get isColorable(){return this._isColorable}set isColorable(t){this._isColorable=t}get _Str_1406(){return this._paletteMapId}get _Str_1666(){return this._flippedPartType}get _Str_1184(){return this._isBlendable}toString(){return[this._bodyPartId,this._partType,this._partId].join(":")}}class Y{constructor(t,e){this._id=t.id,this._width=t.width,this._height=t.height,this._offset=new f.Point(t.dx,t.dy),this._regPoint=new f.Point(e==O.a.LARGE?(this._width-64)/2:(this._width-32)/2,0)}get width(){return this._width}get height(){return this._height}get offset(){return this._offset}get id(){return this._id}get _Str_1076(){return this._regPoint}}class q{constructor(t){if(this._id=t.id,this._isMain=t.main||!1,this._avatarSets=new Map,this._bodyParts=[],this._allBodyParts=[],t.avatarSets&&t.avatarSets.length>0)for(const s of t.avatarSets){if(!s)continue;const t=new q(s);this._avatarSets.set(t.id,t)}if(t.bodyParts&&t.bodyParts.length>0)for(const s of t.bodyParts)s&&this._bodyParts.push(s.id);let e=this._bodyParts.concat();for(const s of this._avatarSets.values())s&&(e=e.concat(s._Str_755()));this._allBodyParts=e}_Str_1498(t){if(t===this._id)return this;for(const e of this._avatarSets.values())if(e&&e._Str_1498(t))return e;return null}_Str_755(){return this._allBodyParts.concat()}get id(){return this._id}get _Str_779(){if(this._isMain)return!0;for(const t of this._avatarSets.values())if(t&&t._Str_779)return!0;return!1}}class X{constructor(t=0,e=0,s=0){this._x=t,this._y=e,this._z=s}static _Str_2224(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}static _Str_1645(t,e){const s=new X;return s.x=t.y*e.z-t.z*e.y,s.y=t.z*e.x-t.x*e.z,s.z=t.x*e.y-t.y*e.x,s}static subtract(t,e){return new X(t.x-e.x,t.y-e.y,t.z-e.z)}_Str_2224(t){return this._x*t.x+this._y*t.y+this._z*t.z}_Str_1645(t){const e=new X;return e.x=this._y*t.z-this._z*t.y,e.y=this._z*t.x-this._x*t.z,e.z=this._x*t.y-this._y*t.x,e}subtract(t){this._x=this._x-t.x,this._y=this._y-t.y,this._z=this._z-t.z}add(t){this._x=this._x+t.x,this._y=this._y+t.y,this._z=this._z+t.z}normalize(){const t=1/this.length();this._x=this._x*t,this._y=this._y*t,this._z=this._z*t}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z)}toString(){return"Vector3D: ("+this._x+","+this._y+","+this._z+")"}get x(){return this._x}set x(t){this._x=t}get y(){return this._y}set y(t){this._y=t}get z(){return this._z}set z(t){this._z=t}}class Z{constructor(t,e,s){this._location=new X(t,e,s),this._transformedLocation=new X,this._needsTransformation=!1,0==t&&0==e&&0==s||(this._needsTransformation=!0)}get location(){return this._location}get _Str_1604(){return this._transformedLocation}_Str_1101(t){this._needsTransformation&&(this._transformedLocation=t._Str_2186(this._location))}}class Q extends Z{constructor(t,e=!1){super(parseFloat(t.x),parseFloat(t.y),parseFloat(t.z)),this._id=t.id,this._radius=parseFloat(t.radius),this._normal=new X(parseFloat(t.nx),parseFloat(t.ny),parseFloat(t.nz)),this._isDoubleSided=t.double||!1,this._isDynamic=e}_Str_1522(t){const e=Math.abs(t.z-this._Str_1604.z-this._radius),s=Math.abs(t.z-this._Str_1604.z+this._radius);return Math.min(e,s)}get id(){return this._id}get normal(){return this._normal}get _Str_2207(){return this._isDoubleSided}toString(){return this._id+": "+this.location+" - "+this._Str_1604}get _Str_1457(){return this._isDynamic}}class J extends Z{constructor(t){if(super(parseFloat(t.x),parseFloat(t.y),parseFloat(t.z)),this._id=t.id,this._radius=parseFloat(t.radius),this._parts=new Map,this._dynamicParts=new Map,t.items&&t.items.length>0)for(const e of t.items){if(!e)continue;const t=new Q(e);this._parts.set(t.id,t)}}_Str_1883(t){const e=this._dynamicParts.get(t),s=[];if(e)for(const n in e){const t=e[n];t&&s.push(t)}return s}_Str_1456(t){const e=[];for(const s of this._parts.values())s&&e.push(s.id);if(t){const s=this._dynamicParts.get(t);if(s)for(const t in s){const n=s[t];n&&e.push(n.id)}}return e}_Str_2004(t){return this._dynamicParts.delete(t),!0}_Str_2020(t,e){if(this._Str_2030(t.id,e))return!1;let s=this._dynamicParts.get(e);return s||(s={},this._dynamicParts.set(e,s)),s[t.id]=new Q(t,!0),!0}_Str_2030(t,e){let s=this._parts.get(t)||null;return s||void 0===this._dynamicParts.get(e)||(s=this._dynamicParts.get(e)[t]||null),null!==s}_Str_713(t,e,s,n){const i=[];for(const o of this._parts.values())o&&(o._Str_1101(t),i.push([o._Str_1522(e),o]));const r=this._dynamicParts.get(n);if(r)for(const o in r){const s=r[o];s&&(s._Str_1101(t),i.push([s._Str_1522(e),s]))}i.sort((t,e)=>{const s=t[0],n=e[0];return s<n?-1:s>n?1:0});const a=[];for(const o of i)o&&a.push(o[1].id);return a}_Str_1522(t){const e=Math.abs(t.z-this._Str_1604.z-this._radius),s=Math.abs(t.z-this._Str_1604.z+this._radius);return Math.min(e,s)}get id(){return this._id}get radius(){return this._radius}}let $=(()=>{class t{constructor(t=0,e=0,s=0,n=0,i=0,r=0,a=0,o=0,c=0){this._data=[t,e,s,n,i,r,a,o,c]}static _Str_1869(e){const s=e*Math.PI/180,n=Math.cos(s),i=Math.sin(s);return new t(1,0,0,0,n,-i,0,i,n)}static _Str_1560(e){const s=e*Math.PI/180,n=Math.cos(s),i=Math.sin(s);return new t(n,0,i,0,1,0,-i,0,n)}static _Str_1368(e){const s=e*Math.PI/180,n=Math.cos(s),i=Math.sin(s);return new t(n,-i,0,i,n,0,0,0,1)}identity(){return this._data=[1,0,0,0,1,0,0,0,1],this}_Str_2186(t){return new X(t.x*this._data[0]+t.y*this._data[3]+t.z*this._data[6],t.x*this._data[1]+t.y*this._data[4]+t.z*this._data[7],t.x*this._data[2]+t.y*this._data[5]+t.z*this._data[8])}_Str_1186(e){return new t(this._data[0]*e.data[0]+this._data[1]*e.data[3]+this._data[2]*e.data[6],this._data[0]*e.data[1]+this._data[1]*e.data[4]+this._data[2]*e.data[7],this._data[0]*e.data[2]+this._data[1]*e.data[5]+this._data[2]*e.data[8],this._data[3]*e.data[0]+this._data[4]*e.data[3]+this._data[5]*e.data[6],this._data[3]*e.data[1]+this._data[4]*e.data[4]+this._data[5]*e.data[7],this._data[3]*e.data[2]+this._data[4]*e.data[5]+this._data[5]*e.data[8],this._data[6]*e.data[0]+this._data[7]*e.data[3]+this._data[8]*e.data[6],this._data[6]*e.data[1]+this._data[7]*e.data[4]+this._data[8]*e.data[7],this._data[6]*e.data[2]+this._data[7]*e.data[5]+this._data[8]*e.data[8])}_Str_1157(t){let e=0;for(;e<this._data.length;)this._data[e]=this._data[e]*t,e++}_Str_1089(e){const s=e*Math.PI/180,n=Math.cos(s),i=Math.sin(s);return new t(1,0,0,0,n,-i,0,i,n)._Str_1186(this)}_Str_2123(e){const s=e*Math.PI/180,n=Math.cos(s),i=Math.sin(s);return new t(n,0,i,0,1,0,-i,0,n)._Str_1186(this)}_Str_2232(e){const s=e*Math.PI/180,n=Math.cos(s),i=Math.sin(s);return new t(n,-i,0,i,n,0,0,0,1)._Str_1186(this)}skew(){}_Str_1779(){return new t(this._data[0],this._data[3],this._data[6],this._data[1],this._data[4],this._data[7],this._data[2],this._data[5],this._data[8])}_Str_1451(t){return!1}get data(){return this._data}}return t.IDENTITY=new t(1,0,0,0,1,0,0,0,1),t.TOLERANS=1e-18,t})();class tt{constructor(t){this._camera=new X(0,0,10),this._avatarSet=new q(t.avatarSets[0]),this._geometryTypes=new Map,this._itemIdToBodyPartMap=new Map,this._transformation=new $,this._canvases=new Map;const e=t.camera;if(e&&(this._camera.x=parseFloat(e.x),this._camera.y=parseFloat(e.y),this._camera.z=parseFloat(e.z)),t.canvases&&t.canvases.length>0)for(const s of t.canvases){if(!s)continue;const t=s.scale,e=new Map;if(s.geometries&&s.geometries.length>0)for(const n of s.geometries){if(!n)continue;const s=new Y(n,t);e.set(s.id,s)}this._canvases.set(t,e)}if(t.types&&t.types.length>0)for(const s of t.types){if(!s)continue;const t=new Map,e=new Map;if(s.bodyParts&&s.bodyParts.length>0)for(const n of s.bodyParts){if(!n)continue;const s=new J(n);t.set(s.id,s);for(const t of s._Str_1456(null))e.set(t,s)}this._geometryTypes.set(s.id,t),this._itemIdToBodyPartMap.set(s.id,e)}}_Str_2101(t){for(const e of this._geometryTypes.values())if(e)for(const s of e.values())s&&s._Str_2004(t)}_Str_1307(t){const e=this._avatarSet._Str_1498(t);return e?e._Str_755():[]}_Str_1939(t){const e=this._avatarSet._Str_1498(t);return!!e&&e._Str_779}_Str_1664(t,e){const s=this._canvases.get(t);return s&&s.get(e)||null}_Str_1342(t){return!!this._geometryTypes.get(t)}_Str_1332(t,e){if(this._Str_1342(t)){const s=this._geometryTypes.get(t);if(s&&s.get(e))return!0}return!1}_Str_2072(t){const e=this._Str_1280(t),s=[];if(e)for(const n of e.values())n&&s.push(n.id);return s}_Str_1280(t){return this._Str_1342(t)?this._geometryTypes.get(t):new Map}_Str_1919(t,e){return this._Str_1280(t).get(e)||null}_Str_1701(t,e,s){const n=this._itemIdToBodyPartMap.get(t);if(n){const i=n.get(e);if(i)return i;const r=this._Str_1280(t);if(r)for(const t of r.values())if(t&&t._Str_2030(e,s))return t}return null}_Str_1787(t,e){const s=this._Str_1307(e),n=[];for(const i of s){if(!i)continue;const e=t.get(i);e&&n.push(e)}return n}_Str_2250(t,e,s){if(!s)return[];const n=this._Str_1280(s),i=this._Str_1787(n,t),r=[],a=[];this._transformation=$._Str_1560(e);for(const o of i.values())o&&(o._Str_1101(this._transformation),r.push([o._Str_1522(this._camera),o]));r.sort((t,e)=>{const s=t[0],n=e[0];return s<n?-1:s>n?1:0});for(const o of r)o&&a.push(o[1].id);return a}_Str_713(t,e,s,n,i){if(this._Str_1332(t,e)){const r=this._Str_1280(t).get(e);return this._transformation=$._Str_1560(s),r._Str_713(this._transformation,this._camera,n,i)}return[]}}class et{constructor(t){if(this._frames=[],t.frames&&t.frames.length>0)for(const e of t.frames){if(!e)continue;this._frames.push(new j(e));let t=e.repeats||0;if(t>1)for(;--t>0;)this._frames.push(this._frames[this._frames.length-1])}}get frames(){return this._frames}}let st=(()=>{class t{constructor(t){if(this._id=t.id,this._actionParts=new Map,this._bodyPartOffsets=new Map,this._frameCount=0,this._frameIndexes=[],t.parts&&t.parts.length>0)for(const e of t.parts){if(!e)continue;const t=new et(e);this._actionParts.set(e.setType,t),this._frameCount=Math.max(this._frameCount,t.frames.length)}if(t.offsets&&t.offsets.frames&&t.offsets.frames.length>0)for(const e of t.offsets.frames){if(!e)continue;const t=e.id;this._frameCount=Math.max(this._frameCount,t);const s=new Map;if(this._bodyPartOffsets.set(t,s),e.directions&&e.directions.length>0)for(const n of e.directions){if(!n)continue;const t=n.id,e=new Map;if(s.set(t,e),n.bodyParts&&n.bodyParts.length>0)for(const s of n.bodyParts){if(!s)continue;let t=0,n=0;void 0!==s.dx&&(t=s.dx),void 0!==s.dy&&(n=s.dy),e.set(s.id,new f.Point(t,n))}}if(this._frameIndexes.push(t),void 0!==e.repeats){let s=e.repeats||0;if(s>1)for(;--s>0;)this._frameIndexes.push(t)}}}_Str_989(t){return t&&this._actionParts.get(t)||null}_Str_1888(e,s,n){const i=this._bodyPartOffsets.get(this._frameIndexes[s%this._frameIndexes.length]);if(!i)return t._Str_1934;const r=i.get(e);return r&&r.get(n)||t._Str_1934}get id(){return this._id}get _Str_806(){return this._actionParts}get _Str_2185(){return this._frameCount}}return t._Str_1934=new f.Point(0,0),t})();class nt{constructor(){this._actions=new Map}parse(t){if(t&&t.length>0)for(const e of t){if(!e)continue;const t=new st(e);this._actions.set(t.id,t)}return!0}_Str_1017(t){for(const e of t.action)this._actions.set(e.id,new st(e));return!0}_Str_2244(t){return this._actions.get(t.id)||null}_Str_1408(t){const e=this._Str_2244(t);return e?e._Str_2185:0}}class it{constructor(t){if(!t)throw new Error("invalid_data");this._id=parseInt(t.$.id),this._index=parseInt(t.$.index),this._clubLevel=parseInt(t.$.club),this._isSelectable=1===parseInt(t.$.selectable),this._rgb=parseInt("0x"+t._,16)}get id(){return this._id}get index(){return this._index}get clubLevel(){return this._clubLevel}get isSelectable(){return this._isSelectable}get _Str_915(){return this._rgb}}class rt{constructor(t){if(!t)throw new Error("invalid_data");this._id=parseInt(t.$.id),this._colors=new Map,this._Str_2015(t)}_Str_2015(t){for(const e of t.color){const t=new it(e);this._colors.set(e.$.id.toString(),t)}}_Str_751(t){return void 0===t||t<0?null:this._colors.get(t.toString())||null}get id(){return this._id}get colors(){return this._colors}}class at{constructor(t){if(!t)throw new Error("invalid_data");this._id=parseInt(t.$.id),this._type=t.$.type,this._index=parseInt(t.$.index),this._colorLayerIndex=parseInt(t.$.colorindex);const e=t.$.palettemapid;this._paletteMapId=isNaN(e)?-1:parseInt(e);const s=t.$.palettemapid;this._breed=isNaN(s)?-1:parseInt(s)}dispose(){}get id(){return this._id}get type(){return this._type}get breed(){return this._breed}get index(){return this._index}get _Str_827(){return this._colorLayerIndex}get paletteMap(){return this._paletteMapId}}class ot{constructor(t,e){if(!t||!e)throw new Error("invalid_data");this._id=parseInt(e.$.id),this._type=t,this._gender=e.$.gender,this._clubLevel=parseInt(e.$.club),this._isColorable=1===parseInt(e.$.colorable),this._isSelectable=1===parseInt(e.$.selectable),this._parts=[],this._hiddenLayers=[],this._isPreSelectable=1===parseInt(e.$.preselectable),this._isSellable=1===parseInt(e.$.sellable);for(const s of e.part){const t=new at(s),e=this.getPartIndex(t);-1!==e?this._parts.splice(e,0,t):this._parts.push(t)}if(e.hiddenlayers){const t=e.hiddenlayers[0];for(const e of t.layer)this._hiddenLayers.push(e.$.parttype)}}dispose(){for(const t of this._parts)t.dispose();this._parts=null,this._hiddenLayers=null}getPartIndex(t){const e=this._parts.length;if(!e)return-1;for(let s=0;s<e;s++){const e=this._parts[s];if(e&&!(e.type!==t.type||e.index>t.index))return s}return-1}_Str_989(t,e){for(const s of this._parts)if(s.type===t&&s.id===e)return s;return null}get id(){return this._id}get type(){return this._type}get gender(){return this._gender}get clubLevel(){return this._clubLevel}get isColorable(){return this._isColorable}get _Str_608(){return this._isSelectable}get _Str_806(){return this._parts}get _Str_790(){return this._hiddenLayers}get _Str_653(){return this._isPreSelectable}get _Str_651(){return this._isSellable}}class ct{constructor(t){if(!t)throw new Error("invalid_data");this._type=t.$.type,this._paletteId=parseInt(t.$.paletteid),this._isMandatory={},this._isMandatory.F=[1===parseInt(t.$.mand_f_0),1===parseInt(t.$.mand_f_1)],this._isMandatory.M=[1===parseInt(t.$.mand_m_0),1===parseInt(t.$.mand_m_1)],this._partSets=new E.a,this._Str_2015(t)}dispose(){for(const t of this._partSets.getValues())t.dispose();this._partSets=null}_Str_1874(t){for(const e of t){const t=e.id,s=this._partSets.getValue(t);s&&(s.dispose(),this._partSets.remove(t))}}_Str_2015(t){if(t&&t.set)for(const e of t.set)this._partSets.add(e.$.id,new ot(this._type,e))}_Str_2264(t){for(const e of this._partSets.getValues())if(e&&0===e.clubLevel&&(e.gender===t||"U"===e.gender))return e;return null}_Str_1020(t){return this._partSets.getValue(t.toString())}get type(){return this._type}get _Str_734(){return this._paletteId}_Str_895(t,e){return this._isMandatory[t.toUpperCase()][Math.min(e,1)]}_Str_1002(t){return this._isMandatory[t.toUpperCase()].indexOf(!1)}get _Str_710(){return this._partSets}}class lt{constructor(){this._palettes=new Map,this._setTypes=new Map}dispose(){}parse(t){if(!t)return!1;for(const e of t.colors[0].palette){const t=new rt(e);t&&this._palettes.set(t.id.toString(),t)}for(const e of t.sets[0].settype){const t=new ct(e);t&&this._setTypes.set(t.type,t)}return!0}_Str_1133(t){for(const e of t.sets[0].settype){const t=this._setTypes.get(e.$.type);t?t._Str_1874(e):this._setTypes.set(e.$.type,new ct(e))}this._Str_1017(t)}_Str_1017(t){if(!t)return!1;for(const e of t.colors[0].palette){const t=e.$.id.toString(),s=this._palettes.get(t);s?s._Str_2015(e):this._palettes.set(t,new rt(e))}for(const e of t.sets[0].settype){const t=e.$.type,s=this._setTypes.get(t);s?s._Str_2015(e):this._setTypes.set(t,new ct(e))}return!1}_Str_1733(t,e){const s=[];for(const n of this._setTypes.values())n&&n._Str_895(t,e)&&s.push(n.type);return s}_Str_2264(t,e){const s=this._setTypes.get(t);return s?s._Str_2264(e):null}_Str_740(t){return this._setTypes.get(t)||null}_Str_783(t){return this._palettes.get(t.toString())||null}_Str_938(t){for(const e of this._setTypes.values()){const s=e._Str_1020(t);if(s)return s}return null}}class ht{constructor(t){if(this._id=t.id,this._parts=[],t.activeParts&&t.activeParts.length>0)for(const e of t.activeParts)e&&this._parts.push(e.setType)}get _Str_806(){return this._parts}}class ut{constructor(t){if(!t)throw new Error("invalid_data");this._setType=t.setType,this._flippedSetType=t.flippedSetType||null,this._removeSetType=t.removeSetType||null,this._appendToFigure=!1,this._staticId=-1}_Str_2234(){return this._staticId>=0}get _Str_1734(){return this._staticId}set _Str_1734(t){this._staticId=t}get _Str_2174(){return this._setType}get _Str_1693(){return this._flippedSetType}set _Str_1693(t){this._flippedSetType=t}get _Str_1209(){return this._removeSetType}get _Str_1583(){return this._appendToFigure}set _Str_1583(t){this._appendToFigure=t}}class _t{constructor(){this._parts=new Map,this._activePartSets=new Map}parse(t){if(t.partSet&&t.partSet.length>0)for(const e of t.partSet)e&&this._parts.set(e.setType,new ut(e));if(t.activePartSets&&t.activePartSets.length>0)for(const e of t.activePartSets)e&&this._activePartSets.set(e.id,new ht(e));return!0}_Str_1017(t){if(t.partSet&&t.partSet.length>0)for(const e of t.partSet)e&&this._parts.set(e.setType,new ut(e));if(t.activePartSets&&t.activePartSets.length>0)for(const e of t.activePartSets)e&&this._activePartSets.set(e.id,new ht(e));return!1}_Str_1795(t){const e=this._activePartSets.get(t.activePartSet);return e?e._Str_806:[]}_Str_1102(t){return this._parts.get(t)||null}_Str_1520(t){const e=t.setType;let s=this._parts.get(e);return s||(s=new ut(t),this._parts.set(e,s)),s}_Str_1113(t){return this._activePartSets.get(t.activePartSet)||null}get _Str_806(){return this._parts}get _Str_1979(){return this._activePartSets}}class dt extends u.a{constructor(t){super(),this._renderManager=t,this._geometry=null,this._figureData=new lt,this._partSetsData=new _t,this._animationData=new nt,this._animationManager=new H,this._mandatorySetTypeIds={},this._actionManager=null,this._defaultAction=null}init(){}dispose(){this.disposed||(super.dispose(),this._renderManager=null,this._figureData=null,this._partSetsData=null,this._animationData=null,this._mandatorySetTypeIds=null)}_Str_1825(t){t&&(this._geometry=new tt(t))}_Str_1060(t,e){e&&(this._actionManager=new k(t,e),this._defaultAction=this._actionManager._Str_1027())}_Str_1620(t){this._actionManager._Str_1620(t),this._defaultAction=this._actionManager._Str_1027()}_Str_1296(t){return!!t&&!!this._partSetsData.parse(t)&&(this._partSetsData._Str_1102("ri")._Str_1583=!0,this._partSetsData._Str_1102("li")._Str_1583=!0,!0)}_Str_2229(t){return!!t&&this._animationData.parse(t)}_Str_1569(t){return!!t&&this._figureData.parse(t)}_Str_882(t){this._figureData._Str_1133(t)}_Str_1849(t,e="fx",s=200){let n=0;for(;n<s;){const s=t.getCollection(e+n);s&&this._animationManager._Str_2061(this,s.data.animations),n++}}_Str_2061(t){this._animationManager._Str_2061(this,t)}_Str_867(t,e,s=0){const n=t._Str_815(e);if(!n||n.length<s)return null;const i=this._figureData._Str_740(e);if(null==i)return null;const r=this._figureData._Str_783(i._Str_734);return r?r._Str_751(n[s]):null}_Str_1881(t,e,s){return this._animationManager._Str_607(t,e,s)}_Str_720(t){return this._animationManager._Str_720(t)}_Str_1675(t){return this._actionManager._Str_1675(t)}_Str_2018(t){return this._actionManager._Str_2018(t)}_Str_1939(t){return this._geometry._Str_1939(t)}_Str_711(t){return this._actionManager._Str_711(t)}_Str_1936(t){let e=0;for(const s of t)e=Math.max(e,this._animationData._Str_1408(s._Str_742));return e}_Str_1733(t,e){return this._mandatorySetTypeIds[t]||(this._mandatorySetTypeIds[t]=[]),this._mandatorySetTypeIds[t][e]||(this._mandatorySetTypeIds[t][e]=this._figureData._Str_1733(t,e)),this._mandatorySetTypeIds[t][e]}_Str_2264(t,e){return this._figureData._Str_2264(t,e)}_Str_781(t,e,s){return this._actionManager._Str_781(t,e,s)}_Str_1664(t,e){return this._geometry._Str_1664(t,e)}_Str_2101(t){this._geometry._Str_2101(t)}_Str_2021(t,e){let s=[];const n=[],i=t._Str_742._Str_868;if(t._Str_742._Str_861){const r=this._animationManager._Str_720(t._Str_742.state+"."+t._Str_727);if(r&&(s=r._Str_1065(0,t._Str_707),r._Str_706())){const t={id:"",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:1},s={setType:""};for(const a of r._Str_687){const r=this._geometry._Str_1919(i,a.align);if(r){t.id=a.id,r._Str_2020(t,e),s.setType=a.id;const i=this._partSetsData._Str_1520(s);i._Str_1583=!0,""===a.base&&(i._Str_1734=1),-1===n.indexOf(r.id)&&n.push(r.id)}}}for(const t of s){const e=this._geometry._Str_1919(i,t);e&&-1===n.indexOf(e.id)&&n.push(e.id)}}else{s=this._partSetsData._Str_1795(t._Str_742);for(const t of s){const s=this._geometry._Str_1701(i,t,e);s&&-1===n.indexOf(s.id)&&n.push(s.id)}}return n}_Str_1695(t){return this._geometry._Str_1307(t)}_Str_755(t,e,s){return this._geometry._Str_2250(t,T.a.DIRECTION_TO_ANGLE[s],e)}_Str_1888(t,e,s,n){const i=this._animationData._Str_2244(t._Str_742);return i?i._Str_1888(e,s,n):st._Str_1934}_Str_713(t,e,s,n,i,r,a,o=null){let c=null,l=[],h=null;if(null==!s)return[];const u=this._partSetsData._Str_1795(s._Str_742),_=[];let d=[0];const g=this._animationData._Str_2244(s._Str_742);if(s._Str_742._Str_861){const e=this._animationManager._Str_720(s._Str_742.state+"."+s._Str_727);if(e){d=this._Str_1768(e._Str_2185(s._Str_707));for(const i of e._Str_1065(0,s._Str_707))if(i===t){const t=this._geometry._Str_1919(n,i);if(t)for(const e of t._Str_1883(a))u.push(e.id)}}}const m=this._geometry._Str_713(n,t,i,u,a),p=e._Str_1016();for(const E of p){if(o&&o.get(E))continue;const n=e.getPartSetId(E),i=e._Str_815(E),a=this._figureData._Str_740(E);if(a){const e=this._figureData._Str_783(a._Str_734);if(e){const o=a._Str_1020(n);if(o){r=r.concat(o._Str_790);for(const n of o._Str_806)if(m.indexOf(n.type)>-1){if(g){const t=g._Str_989(n.type);l=t?t.frames:d}else l=d;c=s._Str_742,-1===u.indexOf(n.type)&&(c=this._defaultAction);const r=this._partSetsData._Str_1102(n.type);let a=r?r._Str_1693:n.type;a&&""!==a||(a=n.type),i&&i.length>n._Str_827-1&&(h=e._Str_751(i[n._Str_827-1]));const o=n._Str_827>0,m=new z(t,n.type,n.id.toString(),h,l,c,o,n.paletteMap,a);_.push(m)}}}}}const f=[];for(const E of m){let e=null,i=!1;const c=o&&o.get(E);for(const t of _)t._Str_1669===E&&(c?e=t.color:(i=!0,-1===r.indexOf(E)&&f.push(t)));if(!i)if(c){const n=o.get(E);let i=0,r=0;for(;r<n.length;)i+=n.charCodeAt(r),r++;if(g){const t=g._Str_989(E);l=t?t.frames:d}else l=d;const a=new z(t,E,n,e,l,s._Str_742,!(null==e),-1,E,!1,1);f.push(a)}else if(u.indexOf(E)>-1)if(t!==this._geometry._Str_1701(n,E,a).id);else{const e=this._partSetsData._Str_1102(E);let n=!1,i=1;if(e._Str_1583){let r="1";if(""!==s._Str_727&&(r=s._Str_727),e._Str_2234()&&(r=e._Str_1734.toString()),g){const t=g._Str_989(E);l=t?t.frames:d}else l=d;const a=new z(t,E,r,null,l,s._Str_742,!1,-1,E,n,i);f.push(a)}}}return f}_Str_1768(t){const e=[];let s=0;for(;s<t;)e.push(s),s++;return e}_Str_672(){if(this._actionManager){const t=this._actionManager._Str_1675("CarryItem").params,e=[];for(const s of t.values())e.push(s);return e}return[]}get renderManager(){return this._renderManager}get figureData(){return this._figureData}get partData(){return this._partSetsData}get animationManager(){return this._animationManager}}var gt=s("yp5t"),mt=s("JY8D"),pt=s("LPTP");let ft=(()=>{class t extends r.a{constructor(t,e){super(t),this._library=e}get library(){return this._library}}return t.DOWNLOAD_COMPLETE="ARELE_DOWNLOAD_COMPLETE",t})(),Et=(()=>{class t extends u.a{constructor(e,s,n,i){super(),this._state=t.NOT_LOADED,this._libraryName=e,this._revision=s,this._downloadUrl=i,this._assets=n,this._animation=null,this._downloadUrl=this._downloadUrl.replace(/%libname%/gi,this._libraryName),this._downloadUrl=this._downloadUrl.replace(/%revision%/gi,this._revision),this._assets.getCollection(this._libraryName)&&(this._state=t.LOADED)}downloadAsset(){if(this._assets&&this._state!==t.LOADING&&this._state!==t.LOADED)return this._assets.getCollection(this._libraryName)?(this._state=t.LOADED,void this.dispatchEvent(new ft(ft.DOWNLOAD_COMPLETE,this))):(this._state=t.LOADING,void this._assets.downloadAsset(this._downloadUrl,e=>{if(e){this._state=t.LOADED;const e=this._assets.getCollection(this._libraryName);e&&(this._animation=e.data.animations),this.dispatchEvent(new ft(ft.DOWNLOAD_COMPLETE,this))}}))}get libraryName(){return this._libraryName}get animation(){return this._animation}get isLoaded(){return this._state===t.LOADED}}return t.DOWNLOAD_COMPLETE="EADL_DOWNLOAD_COMPLETE",t.NOT_LOADED=0,t.LOADING=1,t.LOADED=2,t})(),St=(()=>{class t extends u.a{constructor(t,e){super(),this._assets=t,this._structure=e,this._missingMandatoryLibs=a.a.instance.getConfiguration("avatar.mandatory.effect.libraries"),this._effectMap=new Map,this._effectListeners=new Map,this._incompleteEffects=new Map,this._initDownloadBuffer=[],this._pendingDownloadQueue=[],this._currentDownloads=[],this._libraryNames=[],this._isReady=!1,this.onLibraryLoaded=this.onLibraryLoaded.bind(this),this.onAvatarRenderReady=this.onAvatarRenderReady.bind(this),this.loadEffectMap(),this._structure.renderManager.events.addEventListener(g.AVATAR_RENDER_READY,this.onAvatarRenderReady)}loadEffectMap(){const e=new XMLHttpRequest;try{e.open("GET",a.a.instance.getConfiguration("avatar.effectmap.url")),e.send(),e.onloadend=s=>{if(e.responseText){const s=JSON.parse(e.responseText);this.processEffectMap(s.effects),this.processMissingLibraries(),this._isReady=!0,this.dispatchEvent(new r.a(t.DOWNLOADER_READY))}},e.onerror=t=>{throw new Error("invalid_avatar_effect_map")}}catch(s){h.a.log(s)}}processEffectMap(t){if(t)for(const e of t){if(!e)continue;const t=e.id,s=e.lib,n=e.revision||"";if(this._libraryNames.indexOf(s)>=0)continue;this._libraryNames.push(s);const i=new Et(s,n,this._assets,a.a.instance.getConfiguration("avatar.asset.effect.url"));i.addEventListener(ft.DOWNLOAD_COMPLETE,this.onLibraryLoaded);let r=this._effectMap.get(t);r||(r=[]),r.push(i),this._effectMap.set(t,r)}}downloadAvatarEffect(t,e){if(!this._isReady||!this._structure.renderManager.isReady)return void this._initDownloadBuffer.push([t,e]);const s=this.getAvatarEffectPendingLibraries(t);if(s&&s.length){if(e&&!e.disposed){let s=this._effectListeners.get(t.toString());s||(s=[]),s.push(e),this._effectListeners.set(t.toString(),s)}this._incompleteEffects.set(t.toString(),s);for(const t of s)t&&this.downloadLibrary(t)}else e&&!e.disposed&&e.resetEffect(t)}onAvatarRenderReady(t){if(t){for(const[t,e]of this._initDownloadBuffer)this.downloadAvatarEffect(t,e);this._initDownloadBuffer=[]}}onLibraryLoaded(e){if(!e||!e.library)return;const s=[];this._structure._Str_2061(e.library.animation);for(const[i,a]of this._incompleteEffects.entries()){let e=!0;for(const t of a)if(t&&!t.isLoaded){e=!1;break}if(e){s.push(i);const e=this._effectListeners.get(i);for(const t of e)t&&!t.disposed&&t.resetEffect(parseInt(i));this._effectListeners.delete(i),this.dispatchEvent(new r.a(t.LIBRARY_LOADED))}}for(const t of s)this._incompleteEffects.delete(t);let n=0;for(;n<this._currentDownloads.length;){const t=this._currentDownloads[n];t&&t.libraryName===e.library.libraryName&&this._currentDownloads.splice(n,1),n++}}processMissingLibraries(){const t=this._missingMandatoryLibs.slice();for(const e of t){if(!e)continue;const t=this._effectMap.get(e);if(t)for(const e of t)e&&this.downloadLibrary(e)}}isAvatarEffectReady(t){return!(!this._isReady||!this._structure.renderManager.isReady||this.getAvatarEffectPendingLibraries(t).length)}getAvatarEffectPendingLibraries(t){const e=[];if(!this._structure)return e;const s=this._effectMap.get(t.toString());if(s)for(const n of s)n&&!n.isLoaded&&-1===e.indexOf(n)&&e.push(n);return e}downloadLibrary(t){t&&!t.isLoaded&&(this._pendingDownloadQueue.indexOf(t)>=0||this._currentDownloads.indexOf(t)>=0||(this._pendingDownloadQueue.push(t),this.processDownloadQueue()))}processDownloadQueue(){for(;this._pendingDownloadQueue.length;)this._pendingDownloadQueue[0].downloadAsset(),this._currentDownloads.push(this._pendingDownloadQueue.shift())}}return t.DOWNLOADER_READY="EADM_DOWNLOADER_READY",t.LIBRARY_LOADED="EADM_LIBRARY_LOADED",t.MAX_DOWNLOADS=2,t})();class bt extends P{constructor(t,e,s,n,i){super(t,e,s,n,i,null)}isPlaceholder(){return!0}}let vt=(()=>{class t extends u.a{constructor(t,e){super(),this._dataReceiver=e,this.download(t)}download(e){const s=new XMLHttpRequest;try{s.open("GET",e),s.send(),s.onloadend=e=>{(new n.Parser).parseString(s.responseText,(e,s)=>{if(e||!s||!s.figuredata)throw new Error("invalid_figure_data");this._dataReceiver&&this._dataReceiver._Str_1017(s.figuredata),this.dispatchEvent(new r.a(t.AVATAR_STRUCTURE_DONE))})},s.onerror=t=>{throw new Error("invalid_avatar_figure_data")}}catch(i){h.a.log(i)}}}return t.AVATAR_STRUCTURE_DONE="AVATAR_STRUCTURE_DONE",t})(),It=(()=>{class t extends i.a{constructor(){super(),this._structure=null,this._avatarAssetDownloadManager=null,this._placeHolderFigure=null,this._figureMapReady=!1,this._effectMapReady=!1,this._actionsReady=!1,this._geometryReady=!1,this._partSetsReady=!1,this._animationsReady=!1,this._isReady=!1,this.onAvatarAssetDownloaderReady=this.onAvatarAssetDownloaderReady.bind(this),this.onAvatarAssetDownloaded=this.onAvatarAssetDownloaded.bind(this),this.onEffectAssetDownloaderReady=this.onEffectAssetDownloaderReady.bind(this),this.onEffectAssetDownloaded=this.onEffectAssetDownloaded.bind(this),this.onAvatarStructureDownloadDone=this.onAvatarStructureDownloadDone.bind(this)}onInit(){this._structure=new dt(this),this.loadGeometry(),this.loadPartSets(),this.loadActions(),this.loadAnimations(),this.loadFigureData(),this._aliasCollection=new l(this,a.a.instance.core.asset),this._aliasCollection.init(),this._avatarAssetDownloadManager||(this._avatarAssetDownloadManager=new m(a.a.instance.core.asset,this._structure),this._avatarAssetDownloadManager.addEventListener(m.DOWNLOADER_READY,this.onAvatarAssetDownloaderReady),this._avatarAssetDownloadManager.addEventListener(m.LIBRARY_LOADED,this.onAvatarAssetDownloaded)),this._effectAssetDownloadManager||(this._effectAssetDownloadManager=new St(a.a.instance.core.asset,this._structure),this._effectAssetDownloadManager.addEventListener(St.DOWNLOADER_READY,this.onEffectAssetDownloaderReady),this._effectAssetDownloadManager.addEventListener(St.LIBRARY_LOADED,this.onEffectAssetDownloaded)),this.checkReady()}onDispose(){this._avatarAssetDownloadManager&&(this._avatarAssetDownloadManager.removeEventListener(m.DOWNLOADER_READY,this.onAvatarAssetDownloaderReady),this._avatarAssetDownloadManager.removeEventListener(m.LIBRARY_LOADED,this.onAvatarAssetDownloaded)),this._effectAssetDownloadManager&&(this._effectAssetDownloadManager.removeEventListener(St.DOWNLOADER_READY,this.onEffectAssetDownloaderReady),this._effectAssetDownloadManager.removeEventListener(St.LIBRARY_LOADED,this.onEffectAssetDownloaded))}loadGeometry(){this._structure&&(this._structure._Str_1825(mt.a),this._geometryReady=!0,this.checkReady())}loadPartSets(){this._structure&&(this._structure._Str_1296(pt.a),this._partSetsReady=!0,this.checkReady())}loadActions(){const t=a.a.instance.getConfiguration("avatar.default.actions");t&&this._structure._Str_1060(a.a.instance.core.asset,t);const e=new XMLHttpRequest;try{e.open("GET",a.a.instance.getConfiguration("avatar.actions.url")),e.send(),e.onloadend=t=>{this._structure&&(this._structure._Str_1620(JSON.parse(e.responseText)),this._actionsReady=!0,this.checkReady())},e.onerror=t=>{throw new Error("invalid_avatar_actions")}}catch(s){this.logger.error(s)}}loadAnimations(){this._structure&&(this._structure._Str_2229(gt.a),this._animationsReady=!0,this.checkReady())}loadFigureData(){const t=a.a.instance.getConfiguration("avatar.default.figuredata");t&&(new n.Parser).parseString(t,(t,e)=>{if(t||!e||!e.figuredata)throw new Error("invalid_default_figure_data");this._structure&&this._structure._Str_1569(e.figuredata)}),new vt(a.a.instance.getConfiguration("avatar.figuredata.url"),this._structure.figureData).addEventListener(vt.AVATAR_STRUCTURE_DONE,this.onAvatarStructureDownloadDone)}onAvatarStructureDownloadDone(t){this._structureReady=!0,this._structure.init(),this.checkReady()}onAvatarAssetDownloaderReady(t){t&&(this._figureMapReady=!0,this.checkReady())}onAvatarAssetDownloaded(t){t&&this._aliasCollection.reset()}onEffectAssetDownloaderReady(t){t&&(this._effectMapReady=!0,this.checkReady())}onEffectAssetDownloaded(t){t&&this._aliasCollection.reset()}checkReady(){this._isReady||this._geometryReady&&this._partSetsReady&&this._actionsReady&&this._animationsReady&&this._figureMapReady&&this._effectMapReady&&this._structureReady&&(this._isReady=!0,this.events&&this.events.dispatchEvent(new r.a(g.AVATAR_RENDER_READY)))}createFigureContainer(t){return new p.a(t)}isFigureContainerReady(t){return!!this._avatarAssetDownloadManager&&this._avatarAssetDownloadManager.isAvatarFigureContainerReady(t)}createAvatarImage(e,s,n,i=null,r=null){if(!this._structure||!this._avatarAssetDownloadManager)return null;const a=new p.a(e);return n&&this.validateAvatarFigure(a,n),this._avatarAssetDownloadManager.isAvatarFigureContainerReady(a)?new P(this._structure,this._aliasCollection,a,s,this._effectAssetDownloadManager,r):(this._placeHolderFigure||(this._placeHolderFigure=new p.a(t.DEFAULT_FIGURE)),this._avatarAssetDownloadManager.downloadAvatarFigure(a,i),new bt(this._structure,this._aliasCollection,this._placeHolderFigure,s,this._effectAssetDownloadManager))}downloadAvatarFigure(t,e){this._avatarAssetDownloadManager&&this._avatarAssetDownloadManager.downloadAvatarFigure(t,e)}validateAvatarFigure(t,e){let s=!1;const n=this._structure._Str_1733(e,2);if(n){const i=this._structure.figureData;for(const r of n)if(t._Str_744(r)){const n=i._Str_740(r);if(n&&!n._Str_1020(t.getPartSetId(r))){const n=this._structure._Str_2264(r,e);n&&(t._Str_830(r,n.id,[0]),s=!0)}}else{const n=this._structure._Str_2264(r,e);n&&(t._Str_830(r,n.id,[0]),s=!0)}}return!s}getFigureClubLevel(t,e,s){if(!this._structure)return 0;const n=this._structure.figureData,i=Array.from(t._Str_1016());let r=0;for(const a of i){const e=n._Str_740(a),s=t.getPartSetId(a),i=e._Str_1020(s);if(i){r=Math.max(i.clubLevel,r);const s=n._Str_783(e._Str_734),o=t._Str_815(a);for(const t of o){const e=s._Str_751(t);r=Math.max(e.clubLevel,r)}}}s||(s=this._structure._Str_1695(L.a.FULL));for(const a of s){const t=n._Str_740(a);-1===i.indexOf(a)&&(r=Math.max(t._Str_1002(e),r))}return r}isValidFigureSetForGender(t,e){const s=this.structureData._Str_938(t);return!(!s||"U"!==s.gender.toUpperCase()&&s.gender.toUpperCase()!==e.toUpperCase())}getFigureStringWithFigureIds(t,e,s){const n=new o;n._Str_2153(t,e);const i=this._Str_1667(s);for(const r of i)n._Str_2088(r.type,r.id,n.getColourIds(r.type));return n._Str_1008()}_Str_1667(t){const e=this.structureData,s=[];for(const n of t){const t=e._Str_938(n);t&&s.push(t)}return s}_Str_838(t,e){return this._structure?this._structure._Str_1733(t,e):null}getAssetByName(t){return this._aliasCollection.getAsset(t)}get assets(){return a.a.instance.core.asset}get isReady(){return this._isReady}get structure(){return this._structure}get structureData(){return this._structure?this._structure.figureData:null}get downloadManager(){return this._avatarAssetDownloadManager}}return t.DEFAULT_FIGURE="hd-99999-99999",t})()},"Xr/m":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._isDisposed=!1,this._isDisposing=!1}dispose(){this._isDisposed||this._isDisposing||(this._isDisposing=!0,this.onDispose(),this._isDisposed=!0,this._isDisposing=!1)}onDispose(){}get disposed(){return this._isDisposed}get isDisposing(){return this._isDisposing}}},XxiA:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("nL9H");class i extends n.a{constructor(t){super(t),this._type=t.readInt()}get type(){return this._type}get code(){return this._type}}},Y1Bc:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},YN1x:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var n=s("5+UO"),i=s("jfHZ"),r=s("ndLt");class a{flush(){return this._categories=[],this._removedFriendIds=[],this._addedFriends=[],this._updatedFriends=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._categories.push(new i.a(t)),e--;let s=t.readInt();for(;s>0;){const e=t.readInt();-1===e?this._removedFriendIds.push(t.readInt()):0===e?this._updatedFriends.push(new r.a(t)):1===e&&this._addedFriends.push(new r.a(t)),s--}return!0}get categories(){return this._categories}get removedFriendIds(){return this._removedFriendIds}get addedFriends(){return this._addedFriends}get updatedFriends(){return this._updatedFriends}}class o extends n.a{constructor(t){super(t,a)}getParser(){return this.parser}}},YQxP:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},YQyq:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},YTIQ:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},YaSm:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._errorCode=0,this._failedRecipients=[],!0}parse(t){if(!t)return!1;this._errorCode=t.readInt();let e=t.readInt();for(;e>0;)this._failedRecipients.push(t.readInt()),e--;return!0}get errorCode(){return this._errorCode}get failedRecipients(){return this._failedRecipients}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},YlMy:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},Yp13:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s,n,i){this._data=[t,e.length,...e,s,n.length,...n,i]}getMessageArray(){return this._data}dispose(){}}},"Yx/o":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._unitId=null,this._expression=0,!0}parse(t){return!!t&&(this._unitId=t.readInt(),this._expression=t.readInt(),!0)}get unitId(){return this._unitId}get expression(){return this._expression}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},Z0XG:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("Ns5P");let i=(()=>{class t extends n.a{constructor(t,e,s,n,i,r=0,a=null,o=-1){super(t,e),this._objectId=s,this._message=n,this._chatType=i,this._links=a,this._extraParam=o,this._style=r}get objectId(){return this._objectId}get message(){return this._message}get chatType(){return this._chatType}get links(){return this._links}get extraParam(){return this._extraParam}get style(){return this._style}}return t.CHAT_EVENT="RSCE_CHAT_EVENT",t.FLOOD_EVENT="RSCE_FLOOD_EVENT",t.CHAT_NORMAL=0,t.CHAT_WHISPER=1,t.CHAT_SHOUT=2,t._Str_5821=3,t._Str_6081=4,t._Str_8971=5,t._Str_5958=6,t._Str_6065=7,t._Str_5998=8,t._Str_5904=9,t._Str_8909=10,t})()},Z50b:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s,n,i,r,a,o,c){this._data=[t,e,s,n,i,r,a,o,c]}getMessageArray(){return this._data}dispose(){}}},ZHGj:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},ZLse:function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{constructor(t){if(this._unseen=0,!t)throw new Error("invalid_parser");this._achievementId=t.readInt(),this._level=t.readInt(),this._badgeId=t.readString(),this._Str_6791=t.readInt(),this._Str_18274=Math.max(1,t.readInt()),this._Str_10280=t.readInt(),this._Str_12282=t.readInt(),this._Str_19007=t.readInt(),this._Str_16081=t.readBoolean(),this._category=t.readString(),this._Str_21707=t.readString(),this._Str_20339=t.readInt(),this._Str_19099=t.readInt()}get achievementId(){return this._achievementId}get badgeId(){return this._badgeId}get level(){return this._level}get _Str_25209(){return this._Str_6791}get _Str_24142(){return this._Str_18274-this._Str_6791}get rewardAmount(){return this._Str_10280}get rewardType(){return this._Str_12282}get _Str_22939(){return this._Str_19007-this._Str_6791}get _Str_7518(){return this._Str_16081}get category(){return this._category}get _Str_25896(){return this._Str_21707}get totalLevels(){return this._Str_20339}get _Str_10438(){return this._level>1||this._Str_16081}_Str_24410(){this._Str_19007=this._Str_18274}get _Str_24874(){return this._Str_19099}get progress(){return this._Str_19007}get toNextProgress(){return this._Str_18274}set unseen(t){this._unseen=t}get unseen(){return this._unseen}reset(t){this._achievementId=t._achievementId,this._level=t._level,this._badgeId=t._badgeId,this._Str_6791=t._Str_6791,this._Str_18274=t._Str_18274,this._Str_10280=t._Str_10280,this._Str_12282=t._Str_12282,this._Str_19007=t._Str_19007,this._Str_16081=t._Str_16081,this._category=t.category,this._Str_21707=t._Str_21707,this._Str_20339=t._Str_20339,this._Str_19099=t._Str_19099}}return t._Str_21736=-1,t._Str_21318=0,t._Str_15908=1,t._Str_20384=2,t})()},ZQhZ:function(t,e,s){"use strict";s.d(e,"a",function(){return m});var n=s("IqKQ"),i=s("awbM"),r=s("vzKh"),a=s("3r1x"),o=s("IGSi"),c=s("auym"),l=s("P7Cj"),h=s("z20u"),u=s("HqZk"),_=s("38Mq"),d=s("XMGm"),g=s("IqYK");let m=(()=>{class t{constructor(){this._logger=new r.a(this.constructor.name),this._stateEvents=null,this._sessionDataManager=null,this._waitingForSessionDataManager=!1,this._iconListener=null,this._collections=new Map,this._images=new Map,this._events=new Map,this._activeObjects={},this._activeObjectTypes=new Map,this._activeObjectTypeIds=new Map,this._objectTypeAdUrls=new Map,this._wallItems={},this._wallItemTypes=new Map,this._wallItemTypeIds=new Map,this._furniRevisions=new Map,this._pets={},this._objectAliases=new Map,this._objectOriginalNames=new Map,this._pendingContentTypes=[],this._dataInitialized=!1}initialize(t){this._stateEvents=t,this.setFurnitureData();for(const[e,s]of l.a.instance.getConfiguration("pet.types").entries())this._pets[s]=e}dispose(){}setSessionDataManager(t){this._sessionDataManager=t,this._waitingForSessionDataManager&&(this._waitingForSessionDataManager=!1,this.setFurnitureData())}loadFurnitureData(){this.setFurnitureData()}setFurnitureData(){if(!this._sessionDataManager)return void(this._waitingForSessionDataManager=!0);const e=this._sessionDataManager.getAllFurnitureData(this);e&&(this._sessionDataManager.removePendingFurniDataListener(this),this.processFurnitureData(e),this._stateEvents.dispatchEvent(new a.a(t.LOADER_READY)))}processFurnitureData(t){if(t)for(const e of t){if(!e)continue;const t=e.id;let s=e.className;e.hasIndexedColor&&(s=s+"*"+e.colorIndex);const n=e.revision,i=e.adUrl;i&&i.length>0&&this._objectTypeAdUrls.set(s,i);let r=e.className;e.type===h.a.FLOOR?(this._activeObjectTypes.set(t,s),this._activeObjectTypeIds.set(s,t),this._activeObjects[r]||(this._activeObjects[r]=1)):e.type===h.a.WALL&&("post.it"===r&&(s="post_it",r="post_it"),"post.it.vd"===r&&(s="post_it_vd",r="post_id_vd"),this._wallItemTypes.set(t,s),this._wallItemTypeIds.set(s,t),this._wallItems[r]||(this._wallItems[r]=1)),n>this._furniRevisions.get(r)&&(this._furniRevisions.delete(r),this._furniRevisions.set(r,n))}}getFurnitureFloorNameForTypeId(t){const e=this._activeObjectTypes.get(t);return this.removeColorIndex(e)}getFurnitureWallNameForTypeId(t,e=null){let s=this._wallItemTypes.get(t);return"poster"===s&&null!==e&&(s+=e),this.removeColorIndex(s)}getFurnitureFloorColorIndex(t){const e=this._activeObjectTypes.get(t);return e?this.getColorIndexFromName(e):-1}getFurnitureWallColorIndex(t){const e=this._wallItemTypes.get(t);return e?this.getColorIndexFromName(e):-1}getColorIndexFromName(t){if(!t)return-1;const e=t.indexOf("*");return-1===e?0:parseInt(t.substr(e+1))}removeColorIndex(t){if(!t)return null;const e=t.indexOf("*");return-1===e?t:t.substr(0,e)}getCollection(t){if(!t)return null;const e=this._collections.get(t);if(!e){const e=l.a.instance.core.asset.getCollection(t);return e?(this._collections.set(t,e),e):null}return e}getImage(t){if(!t)return null;const e=this._images.get(t);if(!e)return null;const s=new Image;return s.src=e.src,s}addAssetToCollection(t,e,s){const n=this.getCollection(t);return!!n&&n.addAsset(e,s,!0,0,0,!1,!1)}createCollection(t,e){if(!t||!e)return null;const s=new c.a(t,e);this._collections.set(s.name,s)}getPlaceholderName(e){switch(this.getCategoryForType(e)){case u.a.FLOOR:return t.PLACE_HOLDER;case u.a.WALL:return t.PLACE_HOLDER_WALL;default:return void 0!==this._pets[e]?t.PLACE_HOLDER_PET:t.PLACE_HOLDER_DEFAULT}}getCategoryForType(t){return t?void 0!==this._activeObjects[t]?u.a.FLOOR:void 0!==this._wallItems[t]?u.a.WALL:void 0!==this._pets[t]?u.a.UNIT:0===t.indexOf("poster")?u.a.WALL:"room"===t?u.a.ROOM:t===_.a.USER||t===_.a.PET||t===_.a.BOT||t===_.a.RENTABLE_BOT?u.a.UNIT:"tile_cursor"===t||"selection_arrow"===t?u.a.CURSOR:u.a.MINIMUM:u.a.MINIMUM}getPetNameForType(t){return l.a.instance.getConfiguration("pet.types")[t]||null}isLoaderType(t){return(t=_.a.getRealType(t))!==g.a.USER}downloadImage(t,e,s,n=null){let i=null,r=[];if(e&&e.indexOf(",")>=0&&(i=e,e=i.split(",")[0]),r=this.getAssetUrls(i||e,s,!0),r&&r.length){const n=r[0],i=new Image;return i.src=n,i.onload=()=>{i.onerror=null,this._images.set([e,s].join("_"),i),this._iconListener.onRoomContentLoaded(t,[e,s].join("_"),!0)},i.onerror=()=>{i.onload=null,this._logger.error("Failed to download asset: "+n),this._iconListener.onRoomContentLoaded(t,[e,s].join("_"),!1)},!0}return!1}downloadAsset(t,e){const s=this.getAssetUrls(t);if(!s||!s.length)return!1;if(this._pendingContentTypes.indexOf(t)>=0||this.getOrRemoveEventDispatcher(t))return!1;this._pendingContentTypes.push(t),this._events.set(t,e);const i=s.length;let r=0;const a=(s,n,a)=>{if(s&&s.destroy(),!a)return this._logger.error("Failed to download asset: "+n.url),void e.dispatchEvent(new o.a(o.a.RCLE_FAILURE,t));if(r++,r===i){const e=this._events.get(t);if(!e)return;e.dispatchEvent(new o.a(o.a.RCLE_SUCCESS,t))}};for(const o of s){if(!o)continue;const t=new n.Loader,e={crossOrigin:!1,xhrType:o.endsWith(".nitro")?"arraybuffer":"json"};t.use((e,s)=>this.assetLoader(t,e,s,a)).add(o,e).load()}return!0}assetLoader(t,e,s,r){if(!e||e.error)return e&&e.texture&&e.texture.destroy(!0),void r(t,e,!1);if("nitro"===e.extension){const s=new i.a(e.data),a=s.jsonFile;if(!a||!a.type)return void r(t,e,!1);if(a.spritesheet&&Object.keys(a.spritesheet).length){const i=s.baseTexture;if(!i)return void r(t,e,!1);if(i.valid){const s=new n.Spritesheet(i,a.spritesheet);s.parse(n=>{this.createCollection(a,s),r(t,e,!0)})}else i.once("loaded",()=>{i.removeAllListeners();const s=new n.Spritesheet(i,a.spritesheet);s.parse(n=>{this.createCollection(a,s),r(t,e,!0)})}),i.once("error",()=>{i.removeAllListeners(),r(t,e,!1)});return}this.createCollection(a,null),r(t,e,!0)}else if(e.type===n.LoaderResource.TYPE.JSON){const s=e.data;if(!s.type)return void r(t,e,!1);if(s.spritesheet&&Object.keys(s.spritesheet).length){const i=s.spritesheet.meta&&s.spritesheet.meta.image;if(!i||!i.length)return void r(t,e,!1);const a=e.url.substring(0,e.url.lastIndexOf("/")+1)+i,o=n.BaseTexture.from(a);if(o.valid){const i=new n.Spritesheet(o,s.spritesheet);i.parse(n=>{this.createCollection(s,i),r(t,e,!0)})}else o.once("loaded",()=>{o.removeAllListeners();const i=new n.Spritesheet(o,s.spritesheet);i.parse(n=>{this.createCollection(s,i),r(t,e,!0)})}),o.once("error",()=>{o.removeAllListeners(),r(t,e,!1)});return}this.createCollection(s,null),r(t,e,!0)}else r(t,e,!1)}setAssetAliasName(t,e){this._objectAliases.set(t,e),this._objectOriginalNames.set(e,t)}getAssetAliasName(t){return this._objectAliases.get(t)||t}getAssetOriginalName(t){return this._objectOriginalNames.get(t)||t}getAssetUrls(e,s=null,n=!1){switch(e){case t.PLACE_HOLDER:return[this.getAssetUrlWithRoomBase("place_holder")];case t.PLACE_HOLDER_WALL:return[this.getAssetUrlWithRoomBase("place_holder_wall")];case t.PLACE_HOLDER_PET:return[this.getAssetUrlWithRoomBase("place_holder_pet")];case t.ROOM:return[this.getAssetUrlWithRoomBase("room")];case t.TILE_CURSOR:return[this.getAssetUrlWithRoomBase("tile_cursor")];case t.SELECTION_ARROW:return[this.getAssetUrlWithRoomBase("selection_arrow")];default:{const t=this.getCategoryForType(e);if(t===u.a.FLOOR||t===u.a.WALL){const t=this.getAssetAliasName(e);let i=n?this.getAssetUrlWithFurniIconBase(t):this.getAssetUrlWithFurniBase(e);if(n){const e=s&&""!==s&&this._activeObjectTypeIds.has(t+"*"+s);i=i.replace(/%param%/gi,e?"_"+s:"")}return[i]}return t===u.a.UNIT?[this.getAssetUrlWithPetBase(e)]:null}}}getAssetIconUrl(t,e){let s=null,n=[];return t&&t.indexOf(",")>=0&&(s=t,t=s.split(",")[0]),n=this.getAssetUrls(s||t,e,!0),n&&n.length?n[0]:null}getAssetUrlWithRoomBase(t){return l.a.instance.getConfiguration("room.asset.url").replace(/%libname%/gi,t)}getAssetUrlWithFurniBase(t){return l.a.instance.getConfiguration("furni.asset.url").replace(/%libname%/gi,t)}getAssetUrlWithFurniIconBase(t){return l.a.instance.getConfiguration("furni.asset.icon.url").replace(/%libname%/gi,t)}getAssetUrlWithPetBase(t){return l.a.instance.getConfiguration("pet.asset.url").replace(/%libname%/gi,t)}setRoomObjectRoomId(t,e){const s=t&&t.model;s&&s.setValue(d.a.OBJECT_ROOM_ID,e)}getOrRemoveEventDispatcher(t,e=!1){const s=this._events.get(t);return e&&this._events.delete(t),s}setIconListener(t){this._iconListener=t}}return t.PLACE_HOLDER="place_holder",t.PLACE_HOLDER_WALL="place_holder_wall",t.PLACE_HOLDER_PET="place_holder_pet",t.PLACE_HOLDER_DEFAULT=t.PLACE_HOLDER,t.ROOM="room",t.TILE_CURSOR="tile_cursor",t.SELECTION_ARROW="selection_arrow",t.LOADER_READY="RCL_LOADER_READY",t.MANDATORY_LIBRARIES=[t.PLACE_HOLDER,t.PLACE_HOLDER_WALL,t.PLACE_HOLDER_PET,t.ROOM,t.TILE_CURSOR,t.SELECTION_ARROW],t})()},ZRgm:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s){this._roomName=t,this._roomId=e,this._chatlogs=s}get roomName(){return this._roomName}get roomId(){return this._roomId}get chatlogs(){return this._chatlogs}}},ZWGQ:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("G0tw");let i=(()=>{class t extends n.a{constructor(e,s,n,i){super(t.ROOM_COLOR,e),this._color=s,this._Str_21672=n,this._Str_6930=i}get color(){return this._color}get _Str_5123(){return this._Str_21672}get _Str_11464(){return this._Str_6930}}return t.ROOM_COLOR="REE_ROOM_COLOR",t})()},Zim7:function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{flush(){return this._reason=0,this._parameter="",!0}parse(t){return!!t&&(this._reason=t.readInt(),this._parameter=t.readString(),!0)}get reason(){return this._reason}get parameter(){return this._parameter}}return t.FULL_ERROR=1,t._Str_19431=2,t.QUEUE_ERROR=3,t.BANNED=4,t})()},"Zm+c":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._groupCost=0,this._availableRooms=new Map,!0}parse(t){if(!t)return!1;this._groupCost=t.readInt();let e=t.readInt();for(;e>0;){const s=t.readInt(),n=t.readString();t.readBoolean(),this._availableRooms.set(s,n),e--}return!0}get groupCost(){return this._groupCost}get availableRooms(){return this._availableRooms}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},Zq74:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._code=0,!0}parse(t){return!!t&&(this._code=t.readInt(),!0)}get code(){return this._code}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},a9Mt:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("ZLse");class r{flush(){return this._achievements=[],this._Str_19269=null,!0}parse(t){if(!t)return!1;this._achievements=[];let e=t.readInt();for(;e>0;)this._achievements.push(new i.a(t)),e--;return this._Str_19269=t.readString(),!0}get achievements(){return this._achievements}get _Str_16300(){return this._Str_19269}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},aBXB:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s,n=-1){this._data=[],this._data.push(t),this._data.push(e),this._data.push(s),-1!=n&&this._data.push(n)}getMessageArray(){return this._data}dispose(){}}},amIx:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s,n,i,r){this._data=[t,e.length,...e,s,n.length,...n,i,r]}getMessageArray(){return this._data}dispose(){}}},asTc:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},asXX:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var n=s("5+UO"),i=s("0wjC");class r{constructor(t){if(!t)throw new Error("invalid_wrapper");this.parse(t)}parse(t){return!!t&&(this._Str_2507=t.readInt(),this._Str_6052=t.readBoolean(),this._Str_19803=t.readInt(),this._Str_693=t.readBoolean(),!0)}get offerId(){return this._Str_2507}get _Str_12313(){return this._Str_6052}get isClubOnly(){return this._Str_6052}get isSelectable(){return this._Str_693}get _Str_21146(){return this._Str_19803}get availableInDays(){return this._Str_19803}get isAvailable(){return this._Str_693}}class a{flush(){return!0}parse(t){if(!t)return!1;this._offers=[],this._Str_5759=new Map,this._daysUntilNextGift=t.readInt(),this._giftsAvailable=t.readInt();let e=t.readInt(),s=0;for(;s<e;)this._offers.push(new i.a(t)),s++;for(e=t.readInt(),s=0;s<e;){const e=new r(t);this._Str_5759.set(e.offerId,e),s++}return!0}get offers(){return this._offers}get daysUntilNextGift(){return this._daysUntilNextGift}get giftsAvailable(){return this._giftsAvailable}set giftsAvailable(t){this._giftsAvailable=t}getOfferExtraData(t){return t?this._Str_5759.get(t):null}get _Str_24398(){return this._Str_5759}}class o extends n.a{constructor(t){super(t,a)}getParser(){return this.parser}}},auym:function(t,e,s){"use strict";s.d(e,"a",function(){return c});var n=s("kiYJ"),i=s("P7Cj"),r=s("IqKQ");let a=(()=>{class t{static createAsset(e,s,n,i,r,a=!1,o=!1,c=!1){const l=t.GRAPHIC_POOL.length?t.GRAPHIC_POOL.pop():new t;return l._name=e,l._source=s||null,n?(l._texture=n,l._initialized=!1):(l._texture=null,l._initialized=!0),l._usesPalette=c,l._x=i,l._y=r,l._flipH=a,l._flipV=o,l._rectangle=null,l}recycle(){this._texture=null,t.GRAPHIC_POOL.push(this)}initialize(){!this._initialized&&this._texture&&(this._width=this._texture.width,this._height=this._texture.height,this._initialized=!0)}get name(){return this._name}get source(){return this._source}get texture(){return this._texture}get usesPalette(){return this._usesPalette}get x(){return this._x}get y(){return this._y}get width(){return this.initialize(),this._width}get height(){return this.initialize(),this._height}get offsetX(){return this._flipH?-this._x:this._x}get offsetY(){return this._flipV?-this._y:this._y}get flipH(){return this._flipH}get flipV(){return this._flipV}get rectangle(){return this._rectangle||(this._rectangle=new r.Rectangle(0,0,this.width,this.height)),this._rectangle}}return t.GRAPHIC_POOL=[],t})();class o{constructor(t,e,s){for(this._palette=t;this._palette.length<256;)this._palette.push([0,0,0]);this._primaryColor=e,this._secondaryColor=s}dispose(){}applyPalette(t){const e=r.Sprite.from(t),s=i.a.instance.renderer.extract.canvas(e),n=s.getContext("2d"),a=n.getImageData(0,0,s.width,s.height),o=a.data;for(let i=0;i<o.length;i+=4){let t=this._palette[o[i+1]];void 0===t&&(t=[0,0,0]),o[i]=t[0],o[i+1]=t[1],o[i+2]=t[2]}return n.putImageData(a,0,0),r.Texture.from(s)}get primaryColor(){return this._primaryColor}get secondaryColor(){return this._secondaryColor}}let c=(()=>{class t{constructor(t,e){if(!t)throw new Error("invalid_collection");this._name=t.name,this._data=t,this._textures=new Map,this._assets=new Map,this._palettes=new Map,this._paletteAssetNames=[],e&&this.addLibraryAsset(e.textures),this.define(t)}dispose(){if(this._palettes){for(const t of this._palettes.values())t.dispose();this._palettes.clear()}if(this._paletteAssetNames&&(this.disposePaletteAssets(),this._paletteAssetNames=null),this._assets){for(const t of this._assets.values())t.recycle();this._assets.clear()}}addReference(){this._referenceCount++,this._referenceTimestamp=i.a.instance.time}removeReference(){this._referenceCount--,this._referenceCount<=0&&(this._referenceCount=0,this._referenceTimestamp=i.a.instance.time,this.disposePaletteAssets(!1))}define(t){const e=t.assets,s=t.palettes;e&&this.defineAssets(e),s&&this.definePalettes(s)}defineAssets(t){if(t)for(const e in t){const s=t[e];if(!s)continue;const n=-s.x||0,i=-s.y||0;let r=!1;const a=!1,o=s.usesPalette||!1;let c=s.source||"";s.flipH&&c.length&&(r=!0),c.length||(c=e);const l=this.getLibraryAsset(c);if(!l)continue;let h=this.createAsset(e,c,l,r,a,n,i,o);if(!h){const t=this.getAsset(e);t&&t.name!==t.source&&(h=this.replaceAsset(e,c,l,r,a,n,i,o))}}}definePalettes(t){if(t)for(const e in t){const s=t[e];if(!s)continue;const n=s.id.toString();if(this._palettes.get(n))continue;let i=16777215,r=16777215,a=s.color1;a&&a.length>0&&(i=parseInt(a,16)),a=s.color2,a&&a.length>0&&(r=parseInt(a,16)),this._palettes.set(n,new o(s.rgb,i,r))}}createAsset(t,e,s,n,i,r,o,c){if(this._assets.get(t))return!1;const l=a.createAsset(t,e,s,r,o,n,i,c);return this._assets.set(t,l),!0}replaceAsset(t,e,s,n,i,r,a,o){const c=this._assets.get(t);return c&&(this._assets.delete(t),c.recycle()),this.createAsset(t,e,s,n,i,r,a,o)}getAsset(t){return t&&this._assets.get(t)||null}getAssetWithPalette(t,e){const s=t+"@"+e;let n=this.getAsset(s);if(!n){if(n=this.getAsset(t),!n||!n.usesPalette)return n;const i=this.getPalette(e);if(i){const t=i.applyPalette(n.texture);t&&(this._paletteAssetNames.push(s),this.createAsset(s,n.source+"@"+e,t,n.flipH,n.flipV,n.x,n.y,!1),n=this.getAsset(s))}}return n}getPaletteNames(){return Array.from(this._palettes.keys())}getPaletteColors(t){const e=this.getPalette(t);return e?[e.primaryColor,e.secondaryColor]:null}getPalette(t){return t&&this._palettes.get(t)||null}addAsset(t,e,s,n=0,i=0,r=!1,a=!1){if(!t||!e)return!1;const o=this.getLibraryAsset(t);return o?!!s&&(o.baseTexture=e.baseTexture,o.frame=e.frame,o.trim=e.trim,o.updateUvs(),!0):(this._textures.set(t,e),this.createAsset(t,t,e,r,a,n,i,!1))}disposeAsset(t){const e=this._assets.get(t);if(!e)return;this._assets.delete(t);const s=this.getLibraryAsset(e.source);s&&(this._textures.delete(e.source),s.destroy(!0)),e.recycle()}getLibraryAsset(t){return t&&this._textures.get(t=this._name+"_"+t)||null}addLibraryAsset(t){if(t)for(const e in t){const s=t[e];s&&this._textures.set(n.a.removeFileExtension(e),s)}}disposePaletteAssets(e=!0){if(this._paletteAssetNames&&(e||this._paletteAssetNames.length>t.PALETTE_ASSET_DISPOSE_THRESHOLD)){for(const t of this._paletteAssetNames)this.disposeAsset(t);this._paletteAssetNames=[]}}get referenceCount(){return this._referenceCount}get referenceTimestamp(){return this._referenceTimestamp}get name(){return this._name}get data(){return this._data}get textures(){return this._textures}get assets(){return this._assets}}return t.PALETTE_ASSET_DISPOSE_THRESHOLD=10,t})()},awbM:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("rP9a"),i=s("IqKQ"),r=s("lVe0");let a=(()=>{class t{constructor(t){this._jsonFile=null,this._image=null,this._imageData=null,this._baseTexture=null,this.parse(t)}static arrayBufferToBase64(t){let e="";const s=new Uint8Array(t),n=s.byteLength;for(let i=0;i<n;i++)e+=String.fromCharCode(s[i]);return window.btoa(e)}parse(e){const s=new r.a(e);let a=s.readShort();for(;a>0;){const e=s.readShort(),r=s.readBytes(e).toString(),o=s.readInt(),c=s.readBytes(o);if(r.endsWith(".json")){const e=Object(n.a)(c.toArrayBuffer());this._jsonFile=JSON.parse(t.TEXT_DECODER.decode(e))}else{const e=Object(n.a)(c.toArrayBuffer()),s=t.arrayBufferToBase64(e);this._baseTexture=new i.BaseTexture("data:image/png;base64,"+s)}a--}}get jsonFile(){return this._jsonFile}get baseTexture(){return this._baseTexture}}return t.TEXT_DECODER=new TextDecoder("utf-8"),t})()},"b+vr":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{constructor(){this._offerId=-1,this._Str_20780=-1,this._Str_8508=-1}flush(){return!0}parse(t){return!!t&&(this._result=t.readInt(),this._offerId=t.readInt(),this._Str_20780=t.readInt(),this._Str_8508=t.readInt(),!0)}get result(){return this._result}get offerId(){return this._offerId}get _Str_24839(){return this._Str_20780}get _Str_7501(){return this._Str_8508}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},bR4k:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._userId=0,this._furnitureCount=0,!0}parse(t){return!!t&&(this._userId=t.readInt(),this._furnitureCount=t.readInt(),!0)}get userId(){return this._userId}get furnitureCount(){return this._furnitureCount}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},bXGL:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._seconds=0,!0}parse(t){return!!t&&(this._seconds=t.readInt(),!0)}get seconds(){return this._seconds}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},bakE:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("nL9H");class i extends n.a{constructor(t){super(t),this._conflictingTriggers=[],this._type=t.readInt(),this._delayInPulses=t.readInt();let e=t.readInt();for(;e>0;)this._conflictingTriggers.push(t.readInt()),e--}get type(){return this._type}get code(){return this._type}get delayInPulses(){return this._delayInPulses}get conflictingTriggers(){return this._conflictingTriggers}}},bmMM:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO"),i=s("Ly0c");class r extends n.a{constructor(t){super(t,i.a)}getParser(){return this.parser}}},bmkm:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},btSX:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},c746:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{flush(){return this._roomIndex=null,this._message=null,this._gesture=0,this._bubble=0,this._urls=[],this._messageLength=0,!0}parse(t){return!!t&&(this._roomIndex=t.readInt(),this._message=t.readString(),this._gesture=t.readInt(),this._bubble=t.readInt(),this.parseUrls(t),this._messageLength=t.readInt(),!0)}parseUrls(t){if(!t)return!1;this._urls=[];let e=t.readInt();for(;e>0;)this._urls.push(t.readString()),e--;return!0}get roomIndex(){return this._roomIndex}get message(){return this._message}get gesture(){return this._gesture}get bubble(){return this._bubble}get urls(){return this._urls}get messageLength(){return this._messageLength}}},c7QS:function(t,e,s){"use strict";s.d(e,"a",function(){return c});var n=s("5+UO"),i=s("o/0e");class r{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._code=null,this._data=null,this._action=-1,this._closed=!1,this._mode=-1,this._rooms=[],!0}parse(t){if(!t)return!1;this._code=t.readString(),this._data=t.readString(),this._action=t.readInt(),this._closed=t.readBoolean(),this._mode=t.readInt();let e=t.readInt();for(;e>0;)this._rooms.push(new i.a(t)),e--;return!0}get code(){return this._code}get data(){return this._data}get action(){return this._action}get closed(){return this._closed}get mode(){return this._mode}get rooms(){return this._rooms}}class a{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._code=null,this._data=null,this._results=[],!0}parse(t){if(!t)return!1;this._code=t.readString(),this._data=t.readString();let e=t.readInt();for(;e>0;)this._results.push(new r(t)),e--;return!0}get code(){return this._code}get data(){return this._data}get results(){return this._results}}class o{flush(){return this._result=null,!0}parse(t){return!!t&&(this._result=new a(t),!0)}get result(){return this._result}}class c extends n.a{constructor(t){super(t,o)}getParser(){return this.parser}}},"cu+P":function(t,e,s){"use strict";s.d(e,"a",function(){return r});class n{flush(){return this._link=null,!0}parse(t){return!!t&&(this._link=t.readString(),!0)}get link(){return this._link}}var i=s("5+UO");class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},dEqu:function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{}return t.SUPER_USER=9,t.ADMINISTRATOR=8,t.COMMUNITY=7,t.PLAYER_SUPPORT=6,t.MODERATOR=5,t.EMPLOYEE=4,t.BUS_PARTNER=3,t.PARTNER=2,t.CELEBRITY=1,t.NONE=0,t})()},dIbu:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{get enabled(){return this._enabled}get commission(){return this._commission}get credits(){return this._credits}get advertisements(){return this._advertisements}get minimumPrice(){return this._minimumPrice}get maximumPrice(){return this._maximumPrice}get offerTime(){return this._offerTime}get displayTime(){return this._displayTime}flush(){return!0}parse(t){return!!t&&(this._enabled=t.readBoolean(),this._commission=t.readInt(),this._credits=t.readInt(),this._advertisements=t.readInt(),this._minimumPrice=t.readInt(),this._maximumPrice=t.readInt(),this._offerTime=t.readInt(),this._displayTime=t.readInt(),!0)}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},dPj3:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("G0tw");let i=(()=>{class t extends n.a{constructor(e,s,n,i,r,a){super(t.ROOM_COLOR,e),this._state=s,this._presetId=n,this._effectId=i,this._color=r,this._brightness=a}get state(){return this._state}get _Str_14686(){return this._presetId}get _Str_6815(){return this._effectId}get color(){return this._color}get _Str_5123(){return this._brightness}}return t.ROOM_COLOR="REDSE_ROOM_COLOR",t})()},dmof:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},dwRb:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO");class i{constructor(t){if(!t)throw new Error("invalid_wrapper");this._senderId=t.readInt(),this._errorCode=t.readInt()}get senderId(){return this._senderId}get errorCode(){return this._errorCode}}class r{flush(){return this._failuers=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._failuers.push(new i(t)),e--;return!0}get failures(){return this._failuers}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},e2zs:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var n=s("5+UO"),i=s("ZRgm");class r{constructor(t,e,s,n,i){this._timestamp=t,this._userId=e,this._userName=s,this._message=n,this._bool=i}get timestamp(){return this._timestamp}get userId(){return this._userId}get userName(){return this._userName}get message(){return this._message}get bool(){return this._bool}}class a{constructor(){this._roomVisits=[]}flush(){return this._id=null,this._username=null,this._size=null,this._roomVisits=[],!0}parse(t){if(!t)return!1;this._id=t.readInt(),this._username=t.readString(),this._size=t.readInt();for(let e=0;e<this._size;e++){t.readByte(),t.readShort(),t.readString(),t.readByte();const e=t.readString();t.readString(),t.readByte();const s=t.readInt(),n=[],a=t.readShort();for(let i=0;i<a;i++){const e=t.readString(),s=t.readInt(),i=t.readString(),a=t.readString(),o=t.readBoolean();n.push(new r(e,s,i,a,o))}this._roomVisits.push(new i.a(e,s,n))}return!0}get id(){return this._id}get username(){return this._username}get roomVisits(){return this._roomVisits}}class o extends n.a{constructor(t){super(t,a)}getParser(){return this.parser}}},e6Xd:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("Ns5P");let i=(()=>{class t extends n.a{constructor(e,s){super(t.PET_INFO,e),this._petInfo=s}get _Str_24727(){return this._petInfo}}return t.PET_INFO="RSPIUE_PET_INFO",t})()},"e9/N":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._bases=new Map,this._symbols=new Map,this._partColors=new Map,this._colorsA=new Map,this._colorsB=new Map,!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;){const s=t.readInt(),n=t.readString(),i=t.readString();this._bases.set(s,[n,i]),e--}let s=t.readInt();for(;s>0;){const e=t.readInt(),n=t.readString(),i=t.readString();this._symbols.set(e,[n,i]),s--}let n=t.readInt();for(;n>0;){const e=t.readInt(),s=t.readString();this._partColors.set(e,s),n--}let i=t.readInt();for(;i>0;){const e=t.readInt(),s=t.readString();this._colorsA.set(e,s),i--}let r=t.readInt();for(;r>0;){const e=t.readInt(),s=t.readString();this._colorsB.set(e,s),r--}return!0}get bases(){return this._bases}get symbols(){return this._symbols}get partColors(){return this._partColors}get colorsA(){return this._colorsA}get colorsB(){return this._colorsB}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},eJ6k:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},eOyb:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._result=null,!0}parse(t){return!!t&&(this._result=t.readInt(),!0)}get result(){return this._result}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},eXwK:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},ebaN:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("Wgf2"),i=s("5+UO");class r extends i.a{constructor(t){super(t,n.a)}getParser(){return this.parser}}},ekex:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},enVn:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},f1eJ:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("N+Yd");class r{flush(){return!0}parse(t){return!!t&&(this._roomIndex=t.readInt(),this._petId=t.readInt(),this._figureData=new i.a(t),this._hasSaddle=t.readBoolean(),this._isRiding=t.readBoolean(),!0)}get roomIndex(){return this._roomIndex}get petId(){return this._petId}get figureData(){return this._figureData}get hasSaddle(){return this._hasSaddle}get isRiding(){return this._isRiding}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},f6Tv:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this._requestId=t.readInt(),this._requesterName=t.readString(),this._figureString=t.readString(),this._requesterUserId=this._requestId}get requestId(){return this._requestId}get requesterName(){return this._requesterName}get requesterUserId(){return this._requesterUserId}get figureString(){return this._figureString}}},f6o4:function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{}return t.CHAT_WIDGET="RWE_CHAT_WIDGET",t.INFOSTAND="RWE_INFOSTAND",t.ME_MENU="RWE_ME_MENU",t.CHAT_INPUT_WIDGET="RWE_CHAT_INPUT_WIDGET",t.FURNI_PLACEHOLDER="RWE_FURNI_PLACEHOLDER",t.FURNI_CREDIT_WIDGET="RWE_FURNI_CREDIT_WIDGET",t.FURNI_STICKIE_WIDGET="RWE_FURNI_STICKIE_WIDGET",t.FURNI_TROPHY_WIDGET="RWE_FURNI_TROPHY_WIDGET",t.FURNI_LOVELOCK_WIDGET="RWE_FURNI_LOVELOCK_WIDGET",t.FURNI_PRESENT_WIDGET="RWE_FURNI_PRESENT_WIDGET",t.FURNI_ECOTRONBOX_WIDGET="RWE_FURNI_ECOTRONBOX_WIDGET",t.FURNI_PET_PACKAGE_WIDGET="RWE_FURNI_PET_PACKAGE_WIDGET",t.PLAYLIST_EDITOR_WIDGET="RWE_PLAYLIST_EDITOR_WIDGET",t.DOORBELL="RWE_DOORBELL",t.LOADINGBAR="RWE_LOADINGBAR",t.ROOM_QUEUE="RWE_ROOM_QUEUE",t.ROOM_POLL="RWE_ROOM_POLL",t.ROOM_VOTE="RWE_ROOM_VOTE",t.USER_CHOOSER="RWE_USER_CHOOSER",t.FURNI_CHOOSER="RWE_FURNI_CHOOSER",t.ROOM_DIMMER="RWE_ROOM_DIMMER",t.FRIEND_REQUEST="RWE_FRIEND_REQUEST",t.CLOTHING_CHANGE="RWE_CLOTHING_CHANGE",t.CONVERSION_TRACKING="RWE_CONVERSION_TRACKING",t.USER_NOTIFICATION="RWE_USER_NOTIFICATION",t.FRIENDS_BAR="RWE_FRIENDS_BAR",t.PURSE_WIDGET="RWE_PURSE_WIDGET",t.AVATAR_INFO="RWE_AVATAR_INFO",t.WELCOME_GIFT="RWE_WELCOME_GIFT",t.SPAMWALL_POSTIT_WIDGET="RWE_SPAMWALL_POSTIT_WIDGET",t.EFFECTS="RWE_EFFECTS",t.MANNEQUIN="RWE_MANNEQUIN",t.FURNITURE_CONTEXT_MENU="RWE_FURNITURE_CONTEXT_MENU",t.LOCATION_WIDGET="RWE_LOCATION_WIDGET",t.CAMERA="RWE_CAMERA",t.ROOM_THUMBNAIL_CAMERA="RWE_ROOM_THUMBNAIL_CAMERA",t.ROOM_BACKGROUND_COLOR="RWE_ROOM_BACKGROUND_COLOR",t.CUSTOM_USER_NOTIFICATION="RWE_CUSTOM_USER_NOTIFICATION",t.FURNI_ACHIEVEMENT_RESOLUTION_ENGRAVING="RWE_FURNI_ACHIEVEMENT_RESOLUTION_ENGRAVING",t.FRIEND_FURNI_CONFIRM="RWE_FRIEND_FURNI_CONFIRM",t.FRIEND_FURNI_ENGRAVING="RWE_FRIEND_FURNI_ENGRAVING",t.HIGH_SCORE_DISPLAY="RWE_HIGH_SCORE_DISPLAY",t.INTERNAL_LINK="RWE_INTERNAL_LINK",t.CUSTOM_STACK_HEIGHT="RWE_CUSTOM_STACK_HEIGHT",t.YOUTUBE="RWE_YOUTUBE",t.RENTABLESPACE="RWE_RENTABLESPACE",t.VIMEO="RWE_VIMEO",t.ROOM_TOOLS="RWE_ROOM_TOOLS",t.EXTERNAL_IMAGE="RWE_EXTERNAL_IMAGE",t.WORD_QUIZZ="RWE_WORD_QUIZZ",t.UI_HELP_BUBBLE="RWE_UI_HELP_BUBBLE",t.ROOM_LINK="RWE_ROOM_LINK",t.CRAFTING="RWE_CRAFTING",t.ROOMGAME_CHECKERS="RWE_GAME_CHECKERS",t})()},fFOI:function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._mode=0,this._weight=0,this._speed=0,this._distance=0,this._protection=0,!0}parse(t){return!!t&&(this._mode=t.readInt(),this._weight=t.readInt(),this._speed=t.readInt(),this._distance=t.readInt(),this._protection=t.readInt(),!0)}get mode(){return this._mode}get weight(){return this._weight}get speed(){return this._speed}get distance(){return this._distance}get protection(){return this._protection}}return t._Str_19408=0,t._Str_12787=1,t._Str_16907=0,t._Str_12581=1,t._Str_16484=2,t._Str_18404=0,t._Str_17874=1,t._Str_16469=2,t._Str_21099=0,t._Str_20763=1,t._Str_22060=2,t})()},fPSk:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s,n){this._data=[t,e,s,n]}getMessageArray(){return this._data}dispose(){this._data=null}}},fVO9:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var n=s("5+UO"),i=s("+kDp");let r=(()=>{class t{constructor(t){this._roomIndex=0,this._x=0,this._y=0,this._z=0,this._dir=0,this._name="",this._userType=0,this._sex="",this._figure="",this._custom="",this._activityPoints=0,this._webID=0,this._groupID="",this._groupStatus=0,this._groupName="",this._subType="",this._ownerId=0,this._ownerName="",this._rarityLevel=0,this._hasSaddle=!1,this._isRiding=!1,this._canBreed=!1,this._canHarvest=!1,this._canRevive=!1,this._hasBreedingPermission=!1,this._petLevel=0,this._petPosture="",this._botSkills=[],this._isModerator=!1,this._isReadOnly=!1,this._roomIndex=t}_Str_4710(){this._isReadOnly=!0}get roomIndex(){return this._roomIndex}get x(){return this._x}set x(t){this._isReadOnly||(this._x=t)}get y(){return this._y}set y(t){this._isReadOnly||(this._y=t)}get z(){return this._z}set z(t){this._isReadOnly||(this._z=t)}get dir(){return this._dir}set dir(t){this._isReadOnly||(this._dir=t)}get name(){return this._name}set name(t){this._isReadOnly||(this._name=t)}get userType(){return this._userType}set userType(t){this._isReadOnly||(this._userType=t)}get sex(){return this._sex}set sex(t){this._isReadOnly||(this._sex=t)}get figure(){return this._figure}set figure(t){this._isReadOnly||(this._figure=t)}get custom(){return this._custom}set custom(t){this._isReadOnly||(this._custom=t)}get activityPoints(){return this._activityPoints}set activityPoints(t){this._isReadOnly||(this._activityPoints=t)}get webID(){return this._webID}set webID(t){this._isReadOnly||(this._webID=t)}get groupID(){return this._groupID}set groupID(t){this._isReadOnly||(this._groupID=t)}get groupName(){return this._groupName}set groupName(t){this._isReadOnly||(this._groupName=t)}get groupStatus(){return this._groupStatus}set groupStatus(t){this._isReadOnly||(this._groupStatus=t)}get subType(){return this._subType}set subType(t){this._isReadOnly||(this._subType=t)}get ownerId(){return this._ownerId}set ownerId(t){this._isReadOnly||(this._ownerId=t)}get ownerName(){return this._ownerName}set ownerName(t){this._isReadOnly||(this._ownerName=t)}get rarityLevel(){return this._rarityLevel}set rarityLevel(t){this._isReadOnly||(this._rarityLevel=t)}get hasSaddle(){return this._hasSaddle}set hasSaddle(t){this._isReadOnly||(this._hasSaddle=t)}get isRiding(){return this._isRiding}set isRiding(t){this._isReadOnly||(this._isRiding=t)}get canBreed(){return this._canBreed}set canBreed(t){this._isReadOnly||(this._canBreed=t)}get canHarvest(){return this._canHarvest}set canHarvest(t){this._isReadOnly||(this._canHarvest=t)}get canRevive(){return this._canRevive}set canRevive(t){this._isReadOnly||(this._canRevive=t)}get hasBreedingPermission(){return this._hasBreedingPermission}set hasBreedingPermission(t){this._isReadOnly||(this._hasBreedingPermission=t)}get petLevel(){return this._petLevel}set petLevel(t){this._isReadOnly||(this._petLevel=t)}get petPosture(){return this._petPosture}set petPosture(t){this._isReadOnly||(this._petPosture=t)}get botSkills(){return this._botSkills}set botSkills(t){this._botSkills=t}get isModerator(){return this._isModerator}set isModerator(t){this._isReadOnly||(this._isModerator=t)}}return t.M="M",t.F="F",t})();class a{flush(){return this._users=[],!0}parse(t){if(!t)return!1;this._users=[];const e=t.readInt();let s=0;for(;s<e;){const e=t.readInt(),n=t.readString(),a=t.readString();let o=t.readString();const c=t.readInt(),l=t.readInt(),h=t.readInt(),u=parseFloat(t.readString()),_=t.readInt(),d=t.readInt(),g=new r(c);if(g.dir=_,g.name=n,g.custom=a,g.x=l,g.y=h,g.z=u,this._users.push(g),1===d){g.webID=e,g.userType=i.a.USER,g.sex=this.resolveSex(t.readString()),g.groupID=""+t.readInt(),g.groupStatus=t.readInt(),g.groupName=t.readString();const s=t.readString();""!==s&&(o=this.convertSwimFigure(s,o,g.sex)),g.figure=o,g.activityPoints=t.readInt(),g.isModerator=t.readBoolean()}else if(2===d)g.userType=i.a.PET,g.figure=o,g.webID=e,g.subType=t.readInt().toString(),g.ownerId=t.readInt(),g.ownerName=t.readString(),g.rarityLevel=t.readInt(),g.hasSaddle=t.readBoolean(),g.isRiding=t.readBoolean(),g.canBreed=t.readBoolean(),g.canHarvest=t.readBoolean(),g.canRevive=t.readBoolean(),g.hasBreedingPermission=t.readBoolean(),g.petLevel=t.readInt(),g.petPosture=t.readString();else if(3===d)g.userType=i.a.BOT,g.webID=-1*c,g.figure=-1===o.indexOf("/")?o:"hr-100-.hd-180-1.ch-876-66.lg-270-94.sh-300-64",g.sex=r.M;else if(4===d){g.userType=i.a.RENTABLE_BOT,g.webID=e,g.sex=this.resolveSex(t.readString()),g.figure=o,g.ownerId=t.readInt(),g.ownerName=t.readString();const s=t.readInt();if(s){const e=[];let n=0;for(;n<s;)e.push(t.readShort()),n++;g.botSkills=e}}s++}return!0}resolveSex(t){return"f"===t.substr(0,1).toLowerCase()?r.F:r.M}convertSwimFigure(t,e,s){const n=e.split(".");let i=1,r=1,a=1,o=0;for(;o<n.length;){const t=n[o].split("-");t.length>2&&"hd"===t[0]&&(i=parseInt(t[2])),o++}const c=["238,238,238","250,56,49","253,146,160","42,199,210","53,51,44","239,255,146","198,255,152","255,146,90","157,89,126","182,243,255","109,255,51","51,120,201","255,182,49","223,161,233","249,251,50","202,175,143","197,198,197","71,98,61","138,131,97","255,140,51","84,198,39","30,108,153","152,79,136","119,200,255","255,192,142","60,75,135","124,44,71","215,255,227","143,63,28","255,99,147","31,155,121","253,255,51"],l=t.split("=");if(l.length>1){const t=l[1].split("/");a="F"===s?10010:10011,r=1e4+c.indexOf(t[1])+1}return e+".bds-10001-"+i+".ss-"+a+"-"+r}get users(){return this._users}}class o extends n.a{constructor(t){super(t,a)}getParser(){return this.parser}}},feea:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("qg1l");class r{flush(){return this._items=null,!0}parse(t){this._items=new Map;let e=t.readInt();for(;e>0;){const s=new i.a(t);this._items.set(s.id,s),e--}return!0}get items(){return this._items}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"fsQ+":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s,n,i,r){this._data=[t,e,s,n,i,r.length,r]}getMessageArray(){return this._data}dispose(){}}},fubZ:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},fuks:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},gEiT:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},gHKk:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},gLCd:function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{}return t.NORMAL=0,t.GENERIC=1,t.BOT=2,t})()},gOUc:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._errorCode=0,this._userId=0,this._message=null,!0}parse(t){return!!t&&(this._errorCode=t.readInt(),this._userId=t.readInt(),this._message=t.readString(),!0)}get errorCode(){return this._errorCode}get userId(){return this._userId}get message(){return this._message}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},gegF:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},gnch:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},gnow:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s){this._data=[t+" "+e,s]}getMessageArray(){return this._data}dispose(){}}},h2l6:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},h5lc:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},hBKr:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var n=s("Fv14"),i=s("P7Cj");class r{constructor(t){this._badgeId="",this._level=1,this._base="",this._badgeId=t,this.parseText()}parseText(){let t=this._badgeId.length-1;for(;t>0&&this.isNumber(this._badgeId.charAt(t));)t--;this._base=this._badgeId.substr(0,t+1);const e=this._badgeId.substr(t+1,this._badgeId.length);e&&""!==e&&(this._level=Number.parseInt(e))}isNumber(t){const e=t.charCodeAt(0);return e>=48&&e<=57}get level(){return this._level}set level(t){this._level=Math.max(1,t)}get getBadgeId(){return this._base+this._level}get base(){return this._base}}var a=s("ry6F");class o extends n.a{constructor(){super(),this._definitions=new Map,this._parameters=new Map,this._romanNumerals=["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII","XIII","XIV","XV","XVI","XVII","XVIII","XIX","XX","XXI","XXII","XXIII","XXIV","XXV","XXVI","XXVII","XXVIII","XXIX","XXX"]}onInit(){this.loadLocalizationFromURL(i.a.instance.getConfiguration("external.texts.url"))}loadLocalizationFromURL(t){const e=new XMLHttpRequest;try{e.open("GET",t),e.onloadend=this.onLocalizationLoaded.bind(this),e.onerror=this.onLocalizationFailed.bind(this),e.send()}catch(s){this.logger.error(s)}}onLocalizationLoaded(t){t&&(this.parseLocalization(t.target.response),this.events&&this.events.dispatchEvent(new a.a(a.a.LOADED)))}onLocalizationFailed(t){this.events&&this.events.dispatchEvent(new a.a(a.a.FAILED))}parseLocalization(t){if(t){t=JSON.parse(t);for(const e in t)this._definitions.set(e,t[e])}}getRomanNumeral(t){return this._romanNumerals[Math.max(0,t-1)]}getBadgeBaseAndLevel(t){const e=new r(t);return e.level--,e.getBadgeId}getValue(t,e=!0){t.startsWith("${")&&(t=t.substr(2,t.length-3));let s=this._definitions.get(t)||null;if(s&&e){const e=this._parameters.get(t);if(e)for(const[t,n]of e)s=s.replace("%"+t+"%",n)}return s||t}getValueWithParameter(t,e,s){const n=this.getValue(t,!1),i=n.replace("%"+e+"%",s);if(n.startsWith("%{")){const t=new RegExp("%{"+e.toUpperCase()+"\\|([^|]*)\\|([^|]*)\\|([^|]*)}"),r=n.match(t);if(!r)return i;let a=-1,o=!1;switch(Number.parseInt(s)){case 0:a=1;break;case 1:a=2;break;default:case 2:a=3,o=!0}if(-1==a||void 0===r[a])return i;const c=r[a];if(c)return c.replace("%%",s)}return i}getValueWithParameters(t,e,s){let n=this.getValue(t,!1);for(let i=0;i<e.length;i++)n=n.replace("%"+e[i]+"%",s[i]);return n}setValue(t,e){this._definitions.set(t,e)}registerParameter(t,e,s){if(!t||0===t.length||!e||0===e.length)return;let n=this._parameters.get(t);n||(n=new Map,this._parameters.set(t,n)),n.set(e,s)}getBadgeName(t){const e=new r(t);return this._Str_2103(this.getExistingKey(["badge_name_"+t,"badge_name_"+e.base])).replace("%roman%",this.getRomanNumeral(e.level))}getBadgeDesc(t){return""}getExistingKey(t){for(const e of t){const t=this.getValue(e);if(t!=e)return t}return""}_Str_2103(t){return t.replace("${","$").replace("{","$").replace("}","$")}}},hFyr:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},hJEQ:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return!0}parse(t){return!!t&&(this._offerId=t.readInt(),this._success=t.readBoolean(),!0)}get offerId(){return this._offerId}get success(){return this._success}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},hTzv:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._length=0,this._dictionary=new Map,this._array=[],this._keys=[]}get length(){return this._length}get disposed(){return!this._dictionary}dispose(){if(!this._dictionary){for(const t of this._dictionary.keys())this._dictionary.delete(t);this._dictionary=null}this._length=0,this._array=null,this._keys=null}reset(){for(const t of this._dictionary.keys())this._dictionary.delete(t);this._length=0,this._array=[],this._keys=[]}unshift(t,e){return null===this._dictionary.get(t)&&(this._dictionary.set(t,e),this._array.unshift(e),this._keys.unshift(t),this._length++,!0)}add(t,e){return void 0===this._dictionary.get(t)&&(this._dictionary.set(t,e),this._array[this._length]=e,this._keys[this._length]=t,this._length++,!0)}remove(t){const e=this._dictionary.get(t);if(!e)return null;const s=this._array.indexOf(e);return s>=0&&(this._array.splice(s,1),this._keys.splice(s,1),this._length--),this._dictionary.delete(t),e}getWithIndex(t){return t<0||t>=this._length?null:this._array[t]}getKey(t){return t<0||t>=this._length?null:this._keys[t]}getKeys(){return this._keys.slice()}hasKey(t){return this._keys.indexOf(t)>-1}getValue(t){return this._dictionary.get(t)}getValues(){return this._array.slice()}hasValue(t){return this._array.indexOf(t)>-1}indexOf(t){return this._array.indexOf(t)}concatenate(t){for(const e of t._keys)this.add(e,t.getValue(e))}clone(){const t=new n;return t.concatenate(this),t}}},hUfz:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},hXx8:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("Ns5P");let i=(()=>{class t extends n.a{constructor(e,s,n){super(t.RSUBE_BADGES,e),this._userId=0,this._badges=[],this._userId=s,this._badges=n}get userId(){return this._userId}get badges(){return this._badges}}return t.RSUBE_BADGES="RSUBE_BADGES",t})()},"i+XF":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._message=null,this._link=null,!0}parse(t){return!!t&&(this._message=t.readString(),this._link=t.readString(),!0)}get message(){return this._message}get link(){return this._link}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"i/ye":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._senderId=0,this._messageText=null,this._secondsSinceSent=0,this._extraData=null,!0}parse(t){return!!t&&(this._senderId=t.readInt(),this._messageText=t.readString(),this._secondsSinceSent=t.readInt(),t.bytesAvailable&&(this._extraData=t.readString()),!0)}get senderId(){return this._senderId}get messageText(){return this._messageText}get secondsSinceSent(){return this._secondsSinceSent}get extraData(){return this._extraData}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},i7vr:function(t,e,s){"use strict";s.d(e,"a",function(){return B});var n=s("Fv14"),i=s("3xex"),r=s("S+Gq"),a=s("zTkZ"),o=s("8Dbs"),c=s("3md2"),l=s("uMJ2"),h=s("/3sV"),u=s("itFj"),_=s("Aavw"),d=s("enVn"),g=s("dmof"),m=s("9L9n"),p=s("P7Cj"),f=s("GN+4"),E=s("cu+P");class S{constructor(t,e){this._image=t,this._placeHolder=e}get image(){return this._image}get placeHolder(){return this._placeHolder}}var b=s("JKJw");let v=(()=>{class t{constructor(t,e){this._assets=t,this._events=e,this._requestedBadges=new Map}dispose(){this._assets=null}getBadgeImage(t,e="normal_badge",s=!0){let n=this.getBadgeTexture(t,e);return!n&&s&&(n=this.getBadgePlaceholder()),n}getBadgeInfo(t){const e=this.getBadgeTexture(t);return e?new S(e,!1):new S(this.getBadgePlaceholder(),!0)}loadBadgeImage(t,e="normal_badge"){return this._assets.getTexture(t)?t:(this.getBadgeTexture(t,e),null)}getBadgeTexture(t,e="normal_badge"){const s=this._assets.getTexture(t);if(s)return s.clone();if(this._requestedBadges.get(t))return null;const n=this.getBadgeUrl(t,e);return n&&(this._requestedBadges.set(t,!0),this._assets.downloadAsset(n,e=>{if(e){const e=this._assets.getTexture(t);e&&this._events&&this._events.dispatchEvent(new b.a(t,e.clone()))}})),null}getBadgePlaceholder(){const t=this._assets.getTexture("loading_icon");return t?t.clone():null}getBadgeUrl(e,s="normal_badge"){let n=null;switch(s){case t.NORMAL_BADGE:n=p.a.instance.getConfiguration("badge.asset.url").replace("%badgename%",e);break;case t.GROUP_BADGE:n=p.a.instance.getConfiguration("badge.asset.group.url").replace("%badgedata%",e)}return n}}return t.GROUP_BADGE="group_badge",t.NORMAL_BADGE="normal_badge",t})();var I=s("dEqu"),R=s("3r1x");let T=(()=>{class t extends R.a{constructor(e){super(t.APUE_UPDATED),this._uiFlags=e}get _Str_8444(){return this._uiFlags}}return t.APUE_UPDATED="APUE_UPDATED",t})();var y=s("lvFG"),O=s("vuPI");class C{constructor(t,e,s,n,i,r,a,o,c,l,h,u,_,d,g,m,p,f,E,S,b,v,I,R,T,y,O,C,A){this._type=t,this._id=e,this._fullName=s,this._className=n,this._category=i,this._revision=o,this._tileSizeX=c,this._tileSizeY=l,this._tileSizeZ=h,this._colors=u,this._hasIndexedColor=_,this._colourIndex=d,this._localizedName=r,this._description=a,this._adUrl=g,this._purchaseOfferId=m,this._purchaseCouldBeUsedForBuyout=p,this._rentOfferId=f,this._rentCouldBeUsedForBuyout=E,this._customParams=b,this._specialType=v,this._availableForBuildersClub=S,this._canStandOn=I,this._canSitOn=R,this._canLayOn=T,this._excludedFromDynamic=y,this._furniLine=O,this._environment=C,this._rare=A}get type(){return this._type}get id(){return this._id}get className(){return this._className}set className(t){this._className=t}get fullName(){return this._fullName}get category(){return this._category}get hasIndexedColor(){return this._hasIndexedColor}get colorIndex(){return this._colourIndex}get revision(){return this._revision}get tileSizeX(){return this._tileSizeX}get tileSizeY(){return this._tileSizeY}get tileSizeZ(){return this._tileSizeZ}get colors(){return this._colors}get name(){return this._localizedName}get description(){return this._description}get adUrl(){return this._adUrl}get purchaseOfferId(){return this._purchaseOfferId}get customParams(){return this._customParams}get specialType(){return this._specialType}get rentOfferId(){return this._rentOfferId}get purchaseCouldBeUsedForBuyout(){return this._purchaseCouldBeUsedForBuyout}get rentCouldBeUsedForBuyout(){return this._rentCouldBeUsedForBuyout}get availableForBuildersClub(){return this._availableForBuildersClub}get canStandOn(){return this._canStandOn}get canSitOn(){return this._canSitOn}get canLayOn(){return this._canLayOn}get isExternalImage(){return!(-1===this._className.indexOf("external_image"))}get excludeDynamic(){return this._excludedFromDynamic}get furniLine(){return this._furniLine}get environment(){return this._environment}get rare(){return this._rare}}var A=s("z20u"),M=s("vzKh");let w=(()=>{class t extends O.a{constructor(t,e,s){super(),this._floorItems=t,this._wallItems=e,this._localization=s,this._nitroLogger=new M.a(this.constructor.name)}loadFurnitureData(t){t&&fetch(t).then(t=>t.json()).then(t=>this.onFurnitureDataLoaded(t)).catch(t=>this.onFurnitureDataError(t))}onFurnitureDataLoaded(e){e&&(void 0!==e.roomitemtypes&&void 0!==e.wallitemtypes||this._nitroLogger.error("There is an error with your furnidata JSON and it is preventing the client from connecting. You need to reconvert it with the node converter."),e.roomitemtypes&&this.parseFloorItems(e.roomitemtypes),e.wallitemtypes&&this.parseWallItems(e.wallitemtypes),this.dispatchEvent(new R.a(t.FURNITURE_DATA_READY)))}onFurnitureDataError(e){e&&(console.error(e),this.dispatchEvent(new R.a(t.FURNITURE_DATA_ERROR)))}parseFloorItems(t){if(t&&t.furnitype)for(const e of t.furnitype){if(!e)continue;const t=[];if(e.partcolors)for(const a of e.partcolors.color){let e=a;"#"===e.charAt(0)?(e=e.replace("#",""),t.push(parseInt(e,16))):t.push(parseInt(e,16))}const s=e.classname.split("*"),n=s[0],i=s.length>1?parseInt(s[1]):0,r=new C(A.a.FLOOR,e.id,e.classname,n,e.category,e.name,e.description,e.revision,e.xdim,e.ydim,0,t,s.length>1,i,e.adurl,e.offerid,e.buyout,e.rentofferid,e.rentbuyout,e.bc,e.customparams,e.specialtype,e.canstandon,e.cansiton,e.canlayon,e.excludeddynamic,e.furniline,e.environment,e.rare);this._floorItems.set(r.id,r),this.updateLocalizations(r)}}parseWallItems(t){if(t&&t.furnitype)for(const e of t.furnitype){if(!e)continue;const t=new C(A.a.WALL,e.id,e.classname,e.classname,e.category,e.name,e.description,e.revision,0,0,0,null,!1,0,e.adurl,e.offerid,e.buyout,e.rentofferid,e.rentbuyout,e.bc,null,e.specialtype,!1,!1,!1,e.excludeddynamic,e.furniline,e.environment,e.rare);this._wallItems.set(t.id,t),this.updateLocalizations(t)}}updateLocalizations(t){if(this._localization)switch(t.type){case A.a.FLOOR:return this._localization.setValue("roomItem.name."+t.id,t.name),void this._localization.setValue("roomItem.desc."+t.id,t.description);case A.a.WALL:return this._localization.setValue("wallItem.name."+t.id,t.name),void this._localization.setValue("wallItem.desc."+t.id,t.description)}}}return t.FURNITURE_DATA_READY="FDP_FURNITURE_DATA_READY",t.FURNITURE_DATA_ERROR="FDP_FURNITURE_DATA_ERROR",t})();var U=s("Eb1Y"),D=s("O/2Q"),N=s("oc9L"),L=s("iQVN"),P=s("7KS0"),x=s("Sfl4");class F{constructor(t){this._sessionDataManager=t,this._ignoredUsers=[]}init(){if(this._sessionDataManager&&this._sessionDataManager.communication){this._messages=[new U.a(this.onIgnoredUsersEvent.bind(this)),new D.a(this.onIgnoreResultEvent.bind(this))];for(const t of this._messages)this._sessionDataManager.communication.registerMessageEvent(t)}}dispose(){if(!this.disposed){if(this._messages&&this._messages.length){for(const t of this._messages)this._sessionDataManager.communication.removeMessageEvent(t);this._messages=null}this._sessionDataManager=null}}requestIgnoredUsers(){this._sessionDataManager.send(new N.a(this._sessionDataManager.userName))}onIgnoredUsersEvent(t){if(!t)return;const e=t.getParser();e&&(this._ignoredUsers=e.ignoredUsers)}onIgnoreResultEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=e.name;switch(e.result){case 0:return;case 1:return void this._Str_19721(s);case 2:return this._Str_19721(s),void this._ignoredUsers.shift();case 3:return void this._Str_23631(s)}}_Str_19721(t){this._ignoredUsers.indexOf(t)<0&&this._ignoredUsers.push(t)}_Str_23631(t){const e=this._ignoredUsers.indexOf(t);e>=0&&this._ignoredUsers.splice(e,1)}ignoreUserId(t){this._sessionDataManager.send(new P.a(t))}ignoreUser(t){this._sessionDataManager.send(new L.a(t))}unignoreUser(t){this._sessionDataManager.send(new x.a(t))}isIgnored(t){return this._ignoredUsers.indexOf(t)>=0}get disposed(){return!!this._sessionDataManager}}class k{constructor(t,e,s){this._type=t,this._name=e,this._description=s}get type(){return this._type}get name(){return this._name}get description(){return this._description}}let W=(()=>{class t extends O.a{constructor(t){super(),this._products=t}dispose(){this._products=null}loadProductData(t){t&&fetch(t).then(t=>t.json()).then(t=>this.onProductDataLoadedEvent(t)).catch(t=>this.onProductDataError(t))}onProductDataLoadedEvent(e){e&&(this.parseProducts(e.productdata),this.dispatchEvent(new R.a(t.PDP_PRODUCT_DATA_READY)))}onProductDataError(e){e&&this.dispatchEvent(new R.a(t.PDP_PRODUCT_DATA_FAILED))}parseProducts(t){if(t)for(const e of t.product)e&&this._products.set(e.code,new k(e.code,e.name,e.description))}}return t.PDP_PRODUCT_DATA_READY="PDP_PRODUCT_DATA_READY",t.PDP_PRODUCT_DATA_FAILED="PDP_PRODUCT_DATA_FAILED",t})();class B extends n.a{constructor(t){super(),this._communication=t,this.resetUserInfo(),this._ignoredUsersManager=new F(this),this._clubLevel=0,this._securityLevel=0,this._isAmbassador=!1,this._systemOpen=!1,this._systemShutdown=!1,this._isAuthenticHabbo=!1,this._isRoomCameraFollowDisabled=!1,this._chatStyle=0,this._uiFlags=0,this._floorItems=new Map,this._wallItems=new Map,this._products=new Map,this._furnitureData=null,this._furnitureReady=!1,this._productsReady=!1,this._furnitureListenersNotified=!1,this._pendingFurnitureListeners=[],this._pendingProductListeners=[],this._badgeImageManager=null,this.onFurnitureDataReadyEvent=this.onFurnitureDataReadyEvent.bind(this),this.onProductDataReadyEvent=this.onProductDataReadyEvent.bind(this),this.onNitroSettingsEvent=this.onNitroSettingsEvent.bind(this)}onInit(){this.loadFurnitureData(),this.loadProductData(),this.loadBadgeImageManager(),this._ignoredUsersManager&&this._ignoredUsersManager.init(),this._communication.registerMessageEvent(new c.a(this.onUserFigureEvent.bind(this))),this._communication.registerMessageEvent(new l.a(this.onUserInfoEvent.bind(this))),this._communication.registerMessageEvent(new o.a(this.onUserPermissionsEvent.bind(this))),this._communication.registerMessageEvent(new i.a(this.onAvailabilityStatusMessageEvent.bind(this))),this._communication.registerMessageEvent(new r.a(this.onChangeNameUpdateEvent.bind(this))),this._communication.registerMessageEvent(new h.a(this.onUserNameChangeMessageEvent.bind(this))),this._communication.registerMessageEvent(new a.a(this.onRoomModelNameEvent.bind(this))),this._communication.registerMessageEvent(new E.a(this.onInClientLinkEvent.bind(this))),p.a.instance.events.addEventListener(m.a.SETTINGS_UPDATED,this.onNitroSettingsEvent)}onDispose(){this.destroyFurnitureData(),this._ignoredUsersManager&&(this._ignoredUsersManager.dispose(),this._ignoredUsersManager=null),p.a.instance.events.removeEventListener(m.a.SETTINGS_UPDATED,this.onNitroSettingsEvent),super.onDispose()}resetUserInfo(){this._userId=0,this._name=null,this._figure=null,this._gender=null,this._realName=null,this._canChangeName=!1}loadFurnitureData(){this.destroyFurnitureData(),this._furnitureData=new w(this._floorItems,this._wallItems,p.a.instance.localization),this._furnitureData.addEventListener(w.FURNITURE_DATA_READY,this.onFurnitureDataReadyEvent),this._furnitureData.loadFurnitureData(p.a.instance.getConfiguration("furnidata.url"))}loadProductData(){this.destroyProductData(),this._productData=new W(this._products),this._productData.addEventListener(W.PDP_PRODUCT_DATA_READY,this.onProductDataReadyEvent),this._productData.loadProductData(p.a.instance.getConfiguration("productdata.url"))}loadBadgeImageManager(){this._badgeImageManager||(this._badgeImageManager=new v(p.a.instance.core.asset,this.events))}hasProductData(t){return!!this._productsReady||(t&&-1===this._pendingProductListeners.indexOf(t)&&this._pendingProductListeners.push(t),!1)}getAllFurnitureData(t){if(!this._furnitureReady)return-1===this._pendingFurnitureListeners.indexOf(t)&&this._pendingFurnitureListeners.push(t),null;const e=[];for(const s of this._floorItems.values())s&&e.push(s);for(const s of this._wallItems.values())s&&e.push(s);return e}removePendingFurniDataListener(t){if(!this._pendingFurnitureListeners)return;const e=this._pendingFurnitureListeners.indexOf(t);-1!==e&&this._pendingFurnitureListeners.splice(e,1)}onUserFigureEvent(t){t&&t.connection&&(this._figure=t.getParser().figure,this._gender=t.getParser().gender,f.a.updateFigure(this._figure))}onUserInfoEvent(t){if(!t||!t.connection)return;this.resetUserInfo();const e=t.getParser().userInfo;e&&(this._userId=e.userId,this._name=e.username,this._figure=e.figure,this._gender=e.gender,this._realName=e.realName,this._respectsReceived=e.respectsReceived,this._respectsLeft=e.respectsRemaining,this._respectsPetLeft=e.respectsPetRemaining,this._canChangeName=e.canChangeName,this._ignoredUsersManager&&this._ignoredUsersManager.requestIgnoredUsers())}onUserPermissionsEvent(t){t&&t.connection&&(this._clubLevel=t.getParser().clubLevel,this._securityLevel=t.getParser().securityLevel,this._isAmbassador=t.getParser().isAmbassador)}onAvailabilityStatusMessageEvent(t){if(!t||!t.connection)return;const e=t.getParser();e&&(this._systemOpen=e.isOpen,this._systemShutdown=e.onShutdown,this._isAuthenticHabbo=e.isAuthenticUser)}onChangeNameUpdateEvent(t){if(!t||!t.connection)return;const e=t.getParser();e&&e.resultCode===r.a._Str_5797&&(this._canChangeName=!1,this.events.dispatchEvent(new y.a(e.name)))}onUserNameChangeMessageEvent(t){if(!t||!t.connection)return;const e=t.getParser();e&&e.webId===this.userId&&(this._name=e.newName,this._canChangeName=!1,this.events.dispatchEvent(new y.a(this._name)))}onRoomModelNameEvent(t){if(!t)return;const e=t.getParser();e&&f.a.roomVisited(e.roomId)}onFurnitureDataReadyEvent(t){if(this._furnitureData.removeEventListener(w.FURNITURE_DATA_READY,this.onFurnitureDataReadyEvent),this._furnitureReady=!0,!this._furnitureListenersNotified&&(this._furnitureListenersNotified=!0,this._pendingFurnitureListeners&&this._pendingFurnitureListeners.length))for(const e of this._pendingFurnitureListeners)e&&e.loadFurnitureData();this._pendingProductListeners=[]}onProductDataReadyEvent(t){this._productData.removeEventListener(W.PDP_PRODUCT_DATA_READY,this.onProductDataReadyEvent),this._productsReady=!0;for(const e of this._pendingProductListeners)e&&e.loadProductData();this._pendingProductListeners=[]}onInClientLinkEvent(t){if(!t)return;const e=t.getParser();e&&p.a.instance.createLinkEvent(e.link)}onNitroSettingsEvent(t){this._isRoomCameraFollowDisabled=t.cameraFollow,this._chatStyle=t.chatType,this._uiFlags=t.flags,this.events.dispatchEvent(new T(this._uiFlags))}destroyFurnitureData(){this._furnitureData&&(this._furnitureData.dispose(),this._furnitureData=null)}destroyProductData(){this._productData&&(this._productData.dispose(),this._productData=null)}getFloorItemData(t){return this._floorItems.get(t)||null}getFloorItemDataByName(t){if(!t||!this._floorItems||!this._floorItems.size)return null;for(const e of this._floorItems.values())if(e&&e.className===t)return e}getWallItemData(t){return this._wallItems.get(t)||null}getWallItemDataByName(t){if(!t||!this._wallItems||!this._wallItems.size)return null;for(const e of this._wallItems.values())if(e&&e.className===t)return e}getProductData(t){return this._productsReady||this.loadProductData(),this._products.get(t)}getBadgeUrl(t){return this._badgeImageManager.getBadgeUrl(t)}getGroupBadgeUrl(t){return this._badgeImageManager.getBadgeUrl(t,v.GROUP_BADGE)}getBadgeImage(t){return this._badgeImageManager.getBadgeImage(t)}getGroupBadgeImage(t){return this._badgeImageManager.getBadgeImage(t,v.GROUP_BADGE)}loadBadgeImage(t){return this._badgeImageManager.loadBadgeImage(t)}loadGroupBadgeImage(t){return this._badgeImageManager.loadBadgeImage(t,v.GROUP_BADGE)}hasSecurity(t){return this._securityLevel>=t}giveRespect(t){t<0||this._respectsLeft<=0||(this.send(new g.a(t)),this._respectsLeft--)}givePetRespect(t){t<0||this._respectsPetLeft<=0||(this.send(new u.a(t)),this._respectsPetLeft--)}sendSpecialCommandMessage(t,e=0){this.send(new _.a(t))}sendChatStyleUpdate(t){this._chatStyle=t,this.send(new d.a(t))}ignoreUser(t){this._ignoredUsersManager&&this._ignoredUsersManager.ignoreUser(t)}unignoreUser(t){this._ignoredUsersManager&&this._ignoredUsersManager.unignoreUser(t)}isUserIgnored(t){return this._ignoredUsersManager&&this._ignoredUsersManager.isIgnored(t)}send(t){this._communication.connection.send(t)}get communication(){return this._communication}get userId(){return this._userId}get userName(){return this._name}get figure(){return this._figure}get gender(){return this._gender}get realName(){return this._realName}get ignoredUsersManager(){return this._ignoredUsersManager}get respectsReceived(){return this._respectsReceived}get respectsLeft(){return this._respectsLeft}get respectsPetLeft(){return this._respectsPetLeft}get canChangeName(){return this._canChangeName}get clubLevel(){return this._clubLevel}get securityLevel(){return this._securityLevel}get isAmbassador(){return this._isAmbassador}get isSystemOpen(){return this._systemOpen}get isSystemShutdown(){return this._systemShutdown}get isAuthenticHabbo(){return this._isAuthenticHabbo}get isModerator(){return this._securityLevel>=I.a.MODERATOR}get isGodMode(){return this.securityLevel>=I.a.MODERATOR}get isCameraFollowDisabled(){return this._isRoomCameraFollowDisabled}get chatStyle(){return this._chatStyle}get uiFlags(){return this._uiFlags}}},iAsj:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("jBuC");class i{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._itemId=0,this._spriteId=0,this._spriteName=null,this._x=0,this._y=0,this._direction=0,this._z=0,this._stackHeight=0,this._extra=0,this._data=null,this._state=0,this._expires=0,this._usagePolicy=0,this._userId=0,this._username=null,!0}parse(t){return!!t&&(this._itemId=t.readInt(),this._spriteId=t.readInt(),this._x=t.readInt(),this._y=t.readInt(),this._direction=t.readInt()%8*45,this._z=parseFloat(t.readString()),this._stackHeight=parseFloat(t.readString()),this._extra=t.readInt(),this._data=n.a.parseObjectData(t),this._state=parseFloat(this._data&&this._data.getLegacyString())||0,this._expires=t.readInt(),this._usagePolicy=t.readInt(),this._userId=t.readInt(),this._username=null,this._spriteId<0&&(this._spriteName=t.readString()),!0)}get itemId(){return this._itemId}get spriteId(){return this._spriteId}get x(){return this._x}get y(){return this._y}get direction(){return this._direction}get z(){return isNaN(this._z)?0:this._z}get stackHeight(){return isNaN(this._stackHeight)?0:this._stackHeight}get extra(){return this._extra}get data(){return this._data}get state(){return this._state}get expires(){return this._expires}get usagePolicy(){return this._usagePolicy}get userId(){return this._userId}get username(){return this._username}set username(t){this._username=t}get spriteName(){return this._spriteName}set spriteName(t){this._spriteName=t}}},iGiK:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO");class i{constructor(t,e,s,n,i){this._timestamp=t,this._habboId=e,this._username=s,this._message=n,this._boolean=i}get timestamp(){return this._timestamp}get userId(){return this._habboId}get userName(){return this._username}get message(){return this._message}}class r{constructor(){this._chatlogs=[]}flush(){return this._id=null,this._name=null,this._chatlogCount=0,this._chatlogs=[],!0}parse(t){if(!t)return!1;t.readByte(),t.readShort(),t.readString(),t.readByte(),this._name=t.readString(),t.readString(),t.readByte(),this._id=t.readInt(),this._chatlogCount=t.readShort();for(let e=0;e<this._chatlogCount;e++){const e=t.readString(),s=t.readInt(),n=t.readString(),r=t.readString(),a=t.readBoolean();this._chatlogs.push(new i(e,s,n,r,a))}return!0}get id(){return this._id}get name(){return this._name}get chatlogs(){return this._chatlogs}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},iK4q:function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{flush(){return!0}parse(t){return!!t&&(this._reason=t.readInt(),this._Str_10068=t.readString(),!0)}get reason(){return this._reason}get _Str_17035(){return this._Str_10068}}return t._Str_18150=7,t._Str_18383=8,t})()},iQVN:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},iUEO:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},ipbj:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{get furniId(){return this._furniId}flush(){return this._furniId=-1,!0}parse(t){return this._furniId=t.readInt(),!0}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},itFj:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},iv6j:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return!0}parse(t){return!!t}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},j7DG:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{constructor(){this._productName="",this._productDescription=""}flush(){return this._productDescription="",this._productName="",!0}parse(t){return!!t&&(this._productDescription=t.readString(),this._productName=t.readString(),!0)}get productName(){return this._productName}get productDescription(){return this._productDescription}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},j7GY:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},j8oG:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e=0,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},jBuC:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("2L69");class i{flush(){return this._itemId=0,this._data=null,!0}parse(t){return!!t&&(this._itemId=parseInt(t.readString()),this._data=i.parseObjectData(t),!0)}static parseObjectData(t){if(!t)return null;const e=n.a.getData(t.readInt());return e?(e.parseWrapper(t),e):null}get furnitureId(){return this._itemId}get objectData(){return this._data}}},jFxZ:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO"),i=s("c746");class r extends n.a{constructor(t){super(t,i.a)}getParser(){return this.parser}}},jNJ0:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},jdh6:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var n=s("5+UO");class i{constructor(t,e){this._action=t,this._value=e}get action(){return this._action}get value(){return this._value}}class r{constructor(t,e,s,n,i,r,a,o=0,c=0,l=0,h,u,_){this._id=t,this._x=e,this._y=s,this._z=n,this._height=i,this._headDirection=r,this._direction=a,this._targetX=o,this._targetY=c,this._targetZ=l,this._didMove=h,this._canStandUp=u,this._actions=_||[]}get id(){return this._id}get x(){return this._x}get y(){return this._y}get z(){return this._z}get height(){return this._height}get headDirection(){return this._headDirection}get direction(){return this._direction}get targetX(){return this._targetX}get targetY(){return this._targetY}get targetZ(){return this._targetZ}get didMove(){return this._didMove}get canStandUp(){return this._canStandUp}get actions(){return this._actions}}class a{flush(){return this._statuses=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;){const s=this.parseStatus(t);s?(this._statuses.push(s),e--):e--}return!0}parseStatus(t){if(!t)return null;const e=t.readInt(),s=t.readInt(),n=t.readInt(),a=parseFloat(t.readString()),o=t.readInt()%8*45,c=t.readInt()%8*45,l=t.readString();let h=0,u=0,_=0,d=0,g=!1,m=!1;if(l){const t=l.split("/"),p=t.length,f=[];if(p)for(let e=0;e<p;e++){const s=t[e];if(!s)continue;const[n,r,a]=s.split(" ");if(n&&r){switch(n){case"mv":[h,u,_]=r.split(",").map(t=>parseFloat(t)),m=!0;break;case"sit":void 0!==a&&(g="1"===r),d=parseFloat(r);break;case"lay":d=parseFloat(r)}f.push(new i(n,r))}}this._statuses.push(new r(e,s,n,a,d,o,c,h,u,_,m,g,f))}}get statuses(){return this._statuses}}class o extends n.a{constructor(t){super(t,a)}getParser(){return this.parser}}},jdue:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},jfHZ:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this._id=t.readInt(),this._name=t.readString()}get id(){return this._id}get name(){return this._name}}},"jgc/":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},jzpY:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._unitId=null,this._figure=null,this._gender="M",this._motto=null,this._achievementScore=0,!0}parse(t){return!!t&&(this._unitId=t.readInt(),this._figure=t.readString(),this._gender=t.readString().toLocaleUpperCase(),this._motto=t.readString(),this._achievementScore=t.readInt(),!0)}get unitId(){return this._unitId}get figure(){return this._figure}get gender(){return this._gender}get motto(){return this._motto}get achievementScore(){return this._achievementScore}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},k0R1:function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{}return t.CATALOG="catalog",t.INVENTORY="inventory",t})()},kRfe:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},kXXe:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{}},kZQz:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._errorCode=0,!0}parse(t){return!!t&&(this._errorCode=t.readInt(),!0)}get errorCode(){return this._errorCode}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},kgJd:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._Str_2625="",this._Str_2825=0,this._Str_2570="",!0}parse(t){return!!t&&(this._Str_2625=t.readString(),this._Str_2825=t.readInt(),this._Str_2570=t.readString(),this._Str_3054=t.readInt(),this._Str_3970=t.readString(),this._Str_3224=t.readBoolean(),this._Str_10229=t.readString(),!0)}get _Str_2887(){return this._Str_2625}get classId(){return this._Str_2825}get productCode(){return this._Str_2570}get placedItemId(){return this._Str_3054}get placedItemType(){return this._Str_3970}get _Str_4057(){return this._Str_3224}get petFigureString(){return this._Str_10229}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},kiCC:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},kiYJ:function(t,e,s){"use strict";s.d(e,"a",function(){return c});var n=s("IqKQ"),i=s("auym"),r=s("Xr/m"),a=s("vzKh"),o=s("awbM");class c extends r.a{constructor(){super(),this._logger=new a.a(this.constructor.name),this._textures=new Map,this._collections=new Map,this._pendingUrls=new Map}static removeFileExtension(t){return t.substring(0,t.lastIndexOf("."))||t}getTexture(t){return t&&this._textures.get(t)||null}setTexture(t,e){t&&e&&this._textures.set(t,e)}getAsset(t){if(!t)return null;for(const e of this._collections.values()){if(!e)continue;const s=e.getAsset(t);if(s)return s}return null}getCollection(t){return t&&this._collections.get(t)||null}createCollection(t,e){if(!t)return null;const s=new i.a(t,e);if(s){for(const[t,e]of s.textures.entries())this.setTexture(t,e);this._collections.set(s.name,s)}}downloadAsset(t,e){return this.downloadAssets([t],e)}downloadAssets(t,e){if(!t||!t.length)return e(!0),!0;const s=t.length;let i=0;const r=(t,n,r)=>{if(t&&t.destroy(),!r)return this._logger.error("Failed to download asset: "+n.url),void e(!1);i++,i===s&&e(!0)};for(const a of t){if(!a)continue;const t=new n.Loader,e={crossOrigin:!1,xhrType:a.endsWith(".nitro")?"arraybuffer":"json"};t.use((e,s)=>this.assetLoader(t,e,s,r)).add(a,e).load()}return!0}assetLoader(t,e,s,i){if(!e||e.error)return e&&e.texture&&e.texture.destroy(!0),void i(t,e,!1);if("nitro"===e.extension){const s=new o.a(e.data),r=s.jsonFile;if(!r||!r.type)return void i(t,e,!1);if(r.spritesheet&&Object.keys(r.spritesheet).length){const a=s.baseTexture;if(!a)return void i(t,e,!1);if(a.valid){const s=new n.Spritesheet(a,r.spritesheet);s.parse(n=>{this.createCollection(r,s),i(t,e,!0)})}else a.once("loaded",()=>{a.removeAllListeners();const s=new n.Spritesheet(a,r.spritesheet);s.parse(n=>{this.createCollection(r,s),i(t,e,!0)})}),a.once("error",()=>{a.removeAllListeners(),i(t,e,!1)});return}this.createCollection(r,null),i(t,e,!0)}else if(e.type===n.LoaderResource.TYPE.JSON){const s=e.data;if(!s||!s.type)return void i(t,e,!1);if(s.spritesheet&&Object.keys(s.spritesheet).length){const r=s.spritesheet.meta&&s.spritesheet.meta.image;if(!r||!r.length)return void i(t,e,!1);const a=e.url.substring(0,e.url.lastIndexOf("/")+1)+r,o=n.BaseTexture.from(a);if(o.valid){const r=new n.Spritesheet(o,s.spritesheet);r.parse(n=>{this.createCollection(s,r),i(t,e,!0)})}else o.once("loaded",()=>{o.removeAllListeners();const r=new n.Spritesheet(o,s.spritesheet);r.parse(n=>{this.createCollection(s,r),i(t,e,!0)})}),o.once("error",()=>{o.removeAllListeners(),i(t,e,!1)});return}return this.createCollection(s,null),void i(t,e,!0)}e.type!==n.LoaderResource.TYPE.IMAGE||(e.texture.valid?(this.setTexture(e.name,e.texture),i(t,e,!0)):i(t,e,!1))}get collections(){return this._collections}}},lDeN:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._errorCode=-1,!0}parse(t){return!!t&&(this._errorCode=t.readInt(),!0)}get errorCode(){return this._errorCode}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},lMbP:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},lN2i:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO"),i=s("iK4q");class r extends n.a{constructor(t){super(t,i.a)}getParser(){return this.parser}}},lVe0:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._position=0,this._dataView=new DataView(t)}readByte(){const t=this._dataView.getInt8(this._position);return this._position++,t}readBytes(t){const e=new n(this._dataView.buffer.slice(this._position,this._position+t));return this._position+=t,e}readShort(){const t=this._dataView.getInt16(this._position);return this._position+=2,t}readInt(){const t=this._dataView.getInt32(this._position);return this._position+=4,t}remaining(){return this._dataView.byteLength-this._position}toString(t){return(new TextDecoder).decode(this._dataView.buffer)}toArrayBuffer(){return this._dataView.buffer}}},lbEV:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._floorType=null,this._wallType=null,this._landscapeType=null,this._landscapeAnimation=null,!0}parse(t){if(!t)return!1;const e=t.readString(),s=t.readString();switch(e){case"floor":this._floorType=s;break;case"wallpaper":this._wallType=s;break;case"landscape":this._landscapeType=s;break;case"landscapeanim":this._landscapeAnimation=s}return!0}get floorType(){return this._floorType}get wallType(){return this._wallType}get landscapeType(){return this._landscapeType}get landscapeAnimation(){return this._landscapeAnimation}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},liWC:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._instantlyRefreshCatalogue=!1,this._newFurniDataHash=null,!0}parse(t){return!!t&&(this._instantlyRefreshCatalogue=t.readBoolean(),t.bytesAvailable&&(this._newFurniDataHash=t.readString()),!0)}get instantlyRefreshCatalogue(){return this._instantlyRefreshCatalogue}get newFurniDataHash(){return this._newFurniDataHash}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},lrbo:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return!0}parse(t){return!!t}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},lsmK:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},lulp:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},lvFG:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("3r1x");let i=(()=>{class t extends n.a{constructor(e){super(t.UNUE_NAME_UPDATED),this._name=e}get name(){return this._name}}return t.UNUE_NAME_UPDATED="unue_name_updated",t})()},m5sF:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){this._data=null}}},m7hj:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("bakE");class r{flush(){return this._definition=null,!0}parse(t){return!!t&&(this._definition=new i.a(t),!0)}get definition(){return this._definition}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},mEdh:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},mGgu:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._unitId=null,this._danceId=0,!0}parse(t){return!!t&&(this._unitId=t.readInt(),this._danceId=t.readInt(),!0)}get unitId(){return this._unitId}get danceId(){return this._danceId}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},mHKk:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},mP1c:function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{}return t.HOTEL_VIEW="hotel_view",t.HOME_ROOM="home_room",t.NAVIGATOR="navigator",t.CATALOG="catalog",t.INVENTORY="inventory",t.ME_MENU="me_menu",t.FRIEND_LIST="friendlist",t})()},mQ1q:function(t,e,s){"use strict";s.d(e,"a",function(){return r});class n{flush(){return this._x=0,this._y=0,this._direction=0,!0}parse(t){return!!t&&(this._x=t.readInt(),this._y=t.readInt(),this._direction=t.readInt(),!0)}get x(){return this._x}get y(){return this._y}get direction(){return this._direction}}var i=s("5+UO");class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"mkz/":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("DFHD");class i{constructor(t,e,s,n){this._leftSideLoc=0,this._rightSideLoc=0,this._leftSideLength=0,this._rightSideLength=0,this._leftSideLoc=t,this._rightSideLoc=e,this._leftSideLength=s,this._rightSideLength=n}get _Str_5120(){return this._leftSideLoc}get _Str_4659(){return this._rightSideLoc}get _Str_9124(){return this._leftSideLength}get _Str_12156(){return this._rightSideLength}}let r=(()=>{class t{constructor(t,e,s,i,r){let a,o,c,l,h,u,_,d;if(this._type=0,this._loc=null,this._leftSide=null,this._rightSide=null,this._normal=null,this._normalDirection=null,this._secondaryNormals=[],this._masks=[],this._loc=new n.a,this._loc.assign(e),this._leftSide=new n.a,this._leftSide.assign(s),this._rightSide=new n.a,this._rightSide.assign(i),this._type=t,null!=s&&null!=i&&(this._normal=n.a.crossProduct(s,i),a=0,o=0,c=0,l=0,h=0,0!=this.normal.x||0!=this.normal.y?(l=this.normal.x,h=this.normal.y,a=360+Math.atan2(h,l)/Math.PI*180,a>=360&&(a-=360),l=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y),h=this.normal.z,o=360+Math.atan2(h,l)/Math.PI*180,o>=360&&(o-=360)):o=this.normal.z<0?90:270,this._normalDirection=new n.a(a,o,0)),null!=r&&r.length>0)for(u=0;u<r.length;)_=r[u],null!=_&&_.length>0&&(d=new n.a,d.assign(_),d.multiply(1/d.length),this._secondaryNormals.push(d)),u++}get type(){return this._type}get loc(){return this._loc}get _Str_5424(){return this._leftSide}get _Str_4968(){return this._rightSide}get normal(){return this._normal}get _Str_25207(){return this._normalDirection}get _Str_20277(){return this._secondaryNormals.length}get _Str_6845(){return this._masks.length}_Str_22585(t){if(t<0||t>=this._Str_20277)return null;const e=new n.a;return e.assign(this._secondaryNormals[t]),e}addMask(t,e,s,n){const r=new i(t,e,s,n);this._masks.push(r)}_Str_8361(t){return t<0||t>=this._Str_6845?null:this._masks[t]}_Str_25133(t){const e=this._Str_8361(t);return null!=e?e._Str_5120:-1}_Str_23609(t){const e=this._Str_8361(t);return null!=e?e._Str_4659:-1}_Str_25097(t){const e=this._Str_8361(t);return null!=e?e._Str_9124:-1}_Str_25617(t){const e=this._Str_8361(t);return null!=e?e._Str_12156:-1}}return t.PLANE_UNDEFINED=0,t.PLANE_FLOOR=1,t.PLANE_WALL=2,t.PLANE_LANDSCAPE=3,t.PLANE_BILLBOARD=4,t})()},n7CB:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._unitId=null,!0}parse(t){return!!t&&(this._unitId=parseInt(t.readString()),!0)}get unitId(){return this._unitId}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},nL9H:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._stuffIds=[],this._intParams=[],this._stuffTypeSelectionEnabled=t.readBoolean(),this._furniLimit=t.readInt();let e=t.readInt();for(;e>0;)this._stuffIds.push(t.readInt()),e--;for(this._stuffTypeId=t.readInt(),this._id=t.readInt(),this._stringParam=t.readString(),e=t.readInt();e>0;)this._intParams.push(t.readInt()),e--;this._stuffTypeSelectionCode=t.readInt()}getBoolean(t){return 1===this._intParams[t]}get _Str_21824(){return this._stuffTypeSelectionEnabled}get _Str_6040(){return this._stuffTypeSelectionCode}set _Str_6040(t){this._stuffTypeSelectionCode=t}get maximumItemSelectionCount(){return this._furniLimit}get selectedItems(){return this._stuffIds}get id(){return this._id}get stringData(){return this._stringParam}get intData(){return this._intParams}get code(){return 0}get spriteId(){return this._stuffTypeId}}},nMRu:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},nQsh:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return!0}parse(t){return!!t}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},ndLt:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this._id=t.readInt(),this._name=t.readString(),this._gender=t.readInt(),this._online=t.readBoolean(),this._followingAllowed=t.readBoolean(),this._figure=t.readString(),this._categoryId=t.readInt(),this._motto=t.readString(),this._realName=t.readString(),this._lastAccess=t.readString(),this._persistedMessageUser=t.readBoolean(),this._vipMember=t.readBoolean(),this._pocketHabboUser=t.readBoolean(),this._relationshipStatus=t.readShort()}get id(){return this._id}get name(){return this._name}get gender(){return this._gender}get online(){return this._online}get followingAllowed(){return this._followingAllowed}get figure(){return this._figure}get categoryId(){return this._categoryId}get motto(){return this._motto}get lastAccess(){return this._lastAccess}get realName(){return this._realName}get persistedMessageUser(){return this._persistedMessageUser}get vipMember(){return this._vipMember}get pocketHabboUser(){return this._pocketHabboUser}get relationshipStatus(){return this._relationshipStatus}}},nlEz:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"o/0e":function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._roomId=0,this._roomName=null,this._ownerId=0,this._ownerName=null,this._doorMode=0,this._userCount=0,this._maxUserCount=0,this._description=null,this._tradeMode=2,this._score=0,this._ranking=0,this._categoryId=0,this._totalStars=0,this._groupId=0,this._groupName=null,this._groupBadge=null,this._tags=[],this._bitMask=0,this._thumbnail=null,this._allowPets=!1,this._showOwner=!0,this._displayAd=!1,this._adName=null,this._adDescription=null,this._adExpiresIn=0,this._allInRoomMuted=!1,this._canMute=!1,this._roomPicker=!1,this._officialRoomPicRef=null,!0}parse(t){return!!t&&(this._roomId=t.readInt(),this._roomName=t.readString(),this._ownerId=t.readInt(),this._ownerName=t.readString(),this._doorMode=t.readInt(),this._userCount=t.readInt(),this._maxUserCount=t.readInt(),this._description=t.readString(),this._tradeMode=t.readInt(),this._score=t.readInt(),this._ranking=t.readInt(),this._categoryId=t.readInt(),this.parseTags(t),this.parseBitMask(t),!0)}parseTags(t){if(!t)return!1;this._tags=[];let e=t.readInt();for(;e>0;)this._tags.push(t.readString()),e--;return!0}parseBitMask(e){return!!e&&(this._bitMask=e.readInt(),this._bitMask&t.THUMBNAIL_BITMASK&&(this._officialRoomPicRef=e.readString()),this._bitMask&t.GROUPDATA_BITMASK&&(this._groupId=e.readInt(),this._groupName=e.readString(),this._groupBadge=e.readString()),this._bitMask&t.ROOMAD_BITMASK&&(this._adName=e.readString(),this._adDescription=e.readString(),this._adExpiresIn=e.readInt()),this._showOwner=(this._bitMask&t.SHOWOWNER_BITMASK)>0,this._allowPets=(this._bitMask&t.ALLOW_PETS_BITMASK)>0,this._displayAd=(this._bitMask&t.DISPLAY_ROOMAD_BITMASK)>0,this._thumbnail=null,!0)}get roomId(){return this._roomId}get roomName(){return this._roomName}set roomName(t){this._roomName=t}get ownerId(){return this._ownerId}get ownerName(){return this._ownerName}get doorMode(){return this._doorMode}get userCount(){return this._userCount}get maxUserCount(){return this._maxUserCount}get description(){return this._description}get tradeMode(){return this._tradeMode}get score(){return this._score}get ranking(){return this._ranking}get categoryId(){return this._categoryId}get tags(){return this._tags}get officialRoomPicRef(){return this._officialRoomPicRef}get habboGroupId(){return this._groupId}get groupName(){return this._groupName}get groupBadgeCode(){return this._groupBadge}get roomAdName(){return this._adName}get roomAdDescription(){return this._adDescription}get roomAdExpiresInMin(){return this._adExpiresIn}get showOwner(){return this._showOwner}get allowPets(){return this._allowPets}get displayRoomEntryAd(){return this._displayAd}get roomPicker(){return this._roomPicker}set roomPicker(t){this._roomPicker=t}get canMute(){return this._canMute}set canMute(t){this._canMute=t}get allInRoomMuted(){return this._allInRoomMuted}set allInRoomMuted(t){this._allInRoomMuted=t}}return t.THUMBNAIL_BITMASK=1,t.GROUPDATA_BITMASK=2,t.ROOMAD_BITMASK=4,t.SHOWOWNER_BITMASK=8,t.ALLOW_PETS_BITMASK=16,t.DISPLAY_ROOMAD_BITMASK=32,t.OPEN_STATE=0,t.DOORBELL_STATE=1,t.PASSWORD_STATE=2,t.INVISIBLE_STATE=4,t})()},o1ML:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},o4d6:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e.length,...e]}getMessageArray(){return this._data}dispose(){}}},o4p4:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},oHxB:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO");class i{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._id=-1,this._name=null,this._visible=!1,this._automatic=!1,this._automaticCategoryKey=null,this._globalCategoryKey=null,this._staffOnly=!1,!0}parse(t){return!!t&&(this._id=t.readInt(),this._name=t.readString(),this._visible=t.readBoolean(),this._automatic=t.readBoolean(),this._automaticCategoryKey=t.readString(),this._globalCategoryKey=t.readString(),this._staffOnly=t.readBoolean(),!0)}get id(){return this._id}get name(){return this._name}get visible(){return this._visible}get automatic(){return this._automatic}get automaticCategoryKey(){return this._automaticCategoryKey}get globalCategoryKey(){return this._globalCategoryKey}get staffOnly(){return this._staffOnly}}class r{flush(){return this._categories=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._categories.push(new i(t)),e--;return!0}get categories(){return this._categories}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},oKt9:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO"),i=s("Fwdp");class r extends n.a{constructor(t){super(t,i.a)}getParser(){return this.parser}}},oMvi:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{get _Str_3925(){return this._Str_5049}get _Str_4121(){return this._Str_10039}get _Str_10461(){return this._Str_10803}get _Str_9174(){return this._Str_8270}get _Str_11365(){return this._Str_9670}get _Str_11956(){return this._Str_8961}get _Str_8798(){return this._Str_10894}get _Str_9431(){return this._Str_10644}flush(){return!0}parse(t){if(!t)return!1;this._Str_5049=t.readInt(),this._Str_10039=t.readInt(),this._Str_10803=t.readInt();const e=t.readInt();this._Str_8270=[],this._Str_9670=[],this._Str_8961=[];let s=0;for(;s<e;)this._Str_8270.push(t.readInt()),this._Str_9670.push(t.readInt()),this._Str_8961.push(t.readInt()),s++;return this._Str_10644=t.readInt(),this._Str_10894=t.readInt(),!0}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},oc9L:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"oe6/":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},owLk:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO");class i{constructor(t){this._Str_19116="",this._Str_20729=0,this._userId=t.readInt(),this._userName=t.readString(),this._figure=t.readString(),this._Str_19258=t.readInt(),this._Str_20876=t.readInt(),this._online=t.readBoolean(),this._Str_21621=t.readInt(),this._Str_20013=t.readInt(),this._Str_20917=t.readInt(),this._Str_20349=t.readInt(),this._Str_21386=t.readInt(),this._Str_20848=t.readString(),this._Str_21819=t.readString(),this._Str_20982=t.readInt(),this._Str_19460=t.readInt(),this._Str_22254=t.readString(),this._Str_20625=t.readString(),t.bytesAvailable&&(this._Str_19116=t.readString(),this._Str_20729=t.readInt())}get userId(){return this._userId}get userName(){return this._userName}get figure(){return this._figure}get _Str_24334(){return this._Str_19258}get _Str_23276(){return this._Str_20876}get online(){return this._online}get _Str_24656(){return this._Str_21621}get _Str_22987(){return this._Str_20013}get _Str_16987(){return this._Str_20917}get _Str_20373(){return this._Str_20349}get _Str_24526(){return this._Str_21386}get _Str_23969(){return this._Str_20848}get _Str_22786(){return this._Str_21819}get _Str_25657(){return this._Str_20982}get _Str_22700(){return this._Str_19460}get _Str_20219(){return this._Str_22254}get _Str_22262(){return this._Str_20625}get _Str_24447(){return this._Str_19116}get _Str_19137(){return this._Str_20729}}class r{flush(){return this._data=null,!0}parse(t){return!!t&&(this._data=new i(t),!0)}get data(){return this._data}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},p0wa:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},pDhE:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._userName=null,!0}parse(t){return!!t&&(this._userName=t.readString(),!0)}get userName(){return this._userName}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},pGYl:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},pIFH:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._botId=-1,this._commandId=-1,this._data="",!0}parse(t){return!!t&&(this._botId=t.readInt(),this._commandId=t.readInt(),this._data=t.readString(),!0)}get botId(){return this._botId}get commandId(){return this._commandId}get data(){return this._data}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},pRZV:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("hTzv");class r{flush(){return this._items=new i.a,!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;){const s=t.readInt();let n=t.readInt();const i=[];for(;n>0;)i.push(t.readInt()),n--;this._items.add(s,i),e--}return!0}getItemsByCategory(t){return this._items.getValue(t)}get categories(){return this._items.getKeys()}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},pjvS:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},porQ:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(...t){this._data=[t.length,...t]}getMessageArray(){return this._data}dispose(){}}},pvKa:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{constructor(){this._Str_19825=null,this._result=null}flush(){return this._Str_19825=null,this._result=null,!0}parse(t){return!!t&&(this._result=t.readInt(),this._Str_19825=t.readInt(),!0)}get _Str_24601(){return this._Str_19825}get _Str_3278(){return this._result}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},q25d:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},q4z0:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return!0}parse(t){return!!t}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},q5XJ:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},qD21:function(t,e,s){"use strict";s.d(e,"a",function(){return c});var n=s("5+UO"),i=s("2L69"),r=s("v12S");class a{constructor(t,e,s,n,i,r,a,o,c,l=-1){this._Str_12399=-1,this._offerId=t,this._furniId=e,this._furniType=s,this._extraData=n,this._stuffData=i,this._price=r,this._status=a,this._Str_12399=o,this._Str_5049=c,this._Str_4620=l}get offerId(){return this._offerId}get furniId(){return this._furniId}get furniType(){return this._furniType}get extraData(){return this._extraData}get stuffData(){return this._stuffData}get price(){return this._price}get status(){return this._status}get _Str_5853(){return this._Str_12399}get _Str_3925(){return this._Str_5049}get _Str_4121(){return this._Str_4620}}let o=(()=>{class t{flush(){return this._offers=[],!0}parse(e){if(!e)return!1;this._offers=[],this._Str_11581=e.readInt();const s=e.readInt();let n=0;for(;n<s;){const s=e.readInt(),o=e.readInt();let c,l,h,u=e.readInt();1==u?(c=e.readInt(),h=this.getStuffData(e)):2==u?(c=e.readInt(),l=e.readString()):3==u&&(c=e.readInt(),h=i.a.getData(r.a.FORMAT_KEY),h.uniqueNumber=e.readInt(),h.uniqueSeries=e.readInt(),u=1);const _=e.readInt(),d=e.readInt(),g=e.readInt(),m=new a(s,c,u,l,h,_,o,d,g);n<t._Str_18070&&this._offers.push(m),n++}return!0}get offers(){return this._offers}get creditsWaiting(){return this._Str_11581}getStuffData(t){const e=t.readInt(),s=i.a.getData(e);return s.parseWrapper(t),s}}return t._Str_18070=500,t})();class c extends n.a{constructor(t){super(t,o)}getParser(){return this.parser}}},qKi6:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._roomId=0,!0}parse(t){return!!t&&(this._roomId=t.readInt(),!0)}get roomId(){return this._roomId}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},qL7v:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},qLWH:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._mode=-1,!0}parse(t){return!!t&&(this._mode=t.readInt(),!0)}get mode(){return this._mode}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"qOv/":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},qQgg:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._gameTypeId=0,this._url=null,this._gameClientId=null,!0}parse(t){return!!t&&(this._gameTypeId=t.readInt(),this._gameClientId=t.readString(),this._url=t.readString(),!0)}get gameTypeId(){return this._gameTypeId}get url(){return this._url}get gameClientId(){return this._gameClientId}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},qXDh:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},qZ7S:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._score=0,!0}parse(t){return!!t&&(this._score=t.readInt(),!0)}get score(){return this._score}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},qexY:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("qg1l");class r{flush(){return this._item=null,this._openInventory=!1,!0}parse(t){return!!t&&(this._item=new i.a(t),this._openInventory=t.readBoolean(),!0)}get item(){return this._item}openInventory(){return this._openInventory}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},qg1l:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){if(!t)throw new Error("invalid_parser");this._id=t.readInt(),this._name=t.readString(),this._motto=t.readString(),this._gender=t.readString(),this._figure=t.readString()}get id(){return this._id}get name(){return this._name}get motto(){return this._motto}get figure(){return this._figure}get gender(){return this._gender}}},r2VG:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},r7iz:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},rQEl:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},rbNg:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},rlQL:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},ry6F:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("3r1x");let i=(()=>{class t extends n.a{constructor(t){super(t)}}return t.LOADED="NLE_LOADED",t.FAILED="NLE_FAILED",t})()},sCRD:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._unitId=null,this._isTyping=!1,!0}parse(t){return!!t&&(this._unitId=t.readInt(),this._isTyping=1===t.readInt(),!0)}get unitId(){return this._unitId}get isTyping(){return this._isTyping}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"sGp+":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},sM2B:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return!0}parse(t){return!!t}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"sR+E":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("iAsj");class r{flush(){return this._owners=new Map,this._items=[],!0}parse(t){if(!t)return!1;if(!this.parseOwners(t))return!1;let e=t.readInt();for(;e>0;){const s=new i.a(t);if(!s)continue;const n=this._owners.get(s.userId);n&&(s.username=n),this._items.push(s),e--}return!0}parseOwners(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._owners.set(t.readInt(),t.readString()),e--;return!0}get owners(){return this._owners}get items(){return this._items}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},sRv6:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO"),i=s("c746");class r extends n.a{constructor(t){super(t,i.a)}getParser(){return this.parser}}},sRxW:function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{}return t.DIRECTION_TO_ANGLE=[45,90,135,180,225,270,315,0],t.DIRECTION_IS_FLIPPED=[!1,!1,!1,!1,!0,!0,!0,!1],t.MIN_DIRECTION=0,t.MAX_DIRECTION=7,t})()},sxwv:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var n=s("5+UO"),i=s("P5vI");class r{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._offerId=-1,this._localizationId=null,this._rent=!1,this._priceCredits=0,this._priceActivityPoints=0,this._priceActivityPointsType=0,this._clubLevel=0,this._giftable=!1,this._bundlePurchaseAllowed=!1,this._products=[],!0}parse(t){if(!t)return!1;this._offerId=t.readInt(),this._localizationId=t.readString(),this._rent=t.readBoolean(),this._priceCredits=t.readInt(),this._priceActivityPoints=t.readInt(),this._priceActivityPointsType=t.readInt(),this._giftable=t.readBoolean();let e=t.readInt();for(;e>0;)this._products.push(new i.a(t)),e--;return this._clubLevel=t.readInt(),this._bundlePurchaseAllowed=t.readBoolean(),!0}get offerId(){return this._offerId}get localizationId(){return this._localizationId}get rent(){return this._rent}get priceCredits(){return this._priceCredits}get priceActivityPoints(){return this._priceActivityPoints}get priceActivityPointsType(){return this._priceActivityPointsType}get clubLevel(){return this._clubLevel}get giftable(){return this._giftable}get bundlePurchaseAllowed(){return this._bundlePurchaseAllowed}get products(){return this._products}}class a{flush(){return this._offer=null,!0}parse(t){return!!t&&(this._offer=new r(t),!0)}get offer(){return this._offer}}class o extends n.a{constructor(t){super(t,a)}getParser(){return this.parser}}},"t0/d":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO");class i{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._visible=!1,this._icon=0,this._pageId=-1,this._pageName=null,this._localization=null,this._children=[],this._offerIds=[],!0}parse(t){if(!t)return!1;this._visible=t.readBoolean(),this._icon=t.readInt(),this._pageId=t.readInt(),this._pageName=t.readString(),this._localization=t.readString();let e=t.readInt();for(;e>0;)this._offerIds.push(t.readInt()),e--;let s=t.readInt();for(;s>0;)this._children.push(new i(t)),s--;return!0}get visible(){return this._visible}get icon(){return this._icon}get pageId(){return this._pageId}get pageName(){return this._pageName}get localization(){return this._localization}get children(){return this._children}get offerIds(){return this._offerIds}}class r{flush(){return this._root=null,!0}parse(t){return!!t&&(this._root=new i(t),this._newAdditionsAvailable=t.readBoolean(),this._catalogType=t.readString(),!0)}get root(){return this._root}get newAdditionsAvailable(){return this._newAdditionsAvailable}get catalogType(){return this._catalogType}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},t1CI:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("f6Tv");class r{flush(){return this._totalRequests=0,this._requests=[],!0}parse(t){if(!t)return!1;this._totalRequests=t.readInt();let e=t.readInt();for(;e>0;)this._requests.push(new i.a(t)),e--;return!0}get totalRequests(){return this._totalRequests}get requests(){return this._requests}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},tHQF:function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{}return t.BODY="bd",t.SHOES="sh",t.LEGS="lg",t.CHEST="ch",t.WAIST_ACCESSORY="wa",t.CHEST_ACCESSORY="ca",t.HEAD="hd",t.HAIR="hr",t.FACE_ACCESSORY="fa",t.EYE_ACCESSORY="ea",t.HEAD_ACCESSORY="ha",t.HEAD_ACCESSORY_EXTRA="he",t.COAT_CHEST="cc",t.CHEST_PRINT="cp",t.LEFT_HAND_ITEM="li",t.LEFT_HAND="lh",t.LEFT_SLEEVE="ls",t.RIGHT_HAND="rh",t.RIGHT_SLEEVE="rs",t.FACE="fc",t.EYES="ey",t.HAIR_BIG="hrb",t.RIGHT_HAND_ITEM="ri",t.LEFT_COAT_SLEEVE="lc",t.RIGHT_COAT_SLEEVE="rc",t._Str_1286=[t.SHOES,t.LEGS,t.CHEST,t.WAIST_ACCESSORY,t.CHEST_ACCESSORY,t.HEAD,t.HAIR,t.FACE_ACCESSORY,t.EYE_ACCESSORY,t.HEAD_ACCESSORY,t.HEAD_ACCESSORY_EXTRA,t.COAT_CHEST,t.CHEST_PRINT],t})()},tLSS:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},tVIE:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("ZLse");class r{flush(){return this._achievement=null,!0}parse(t){return!!t&&(this._achievement=new i.a(t),!0)}get achievement(){return this._achievement}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},tWLA:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("XMGm"),i=s("MeCd"),r=s("KQk8");let a=(()=>{class t extends i.a{constructor(){super(),this._data={}}parseWrapper(t){if(!t)return;this._data={};const e=t.readInt();if(e)for(let s=0;s<e;s++)this._data[t.readString()]=t.readString();super.parseWrapper(t)}initializeFromRoomObjectModel(t){super.initializeFromRoomObjectModel(t),this._data=t.getValue(n.a.FURNITURE_DATA)||{}}writeRoomObjectModel(e){super.writeRoomObjectModel(e),e.setValue(n.a.FURNITURE_DATA_FORMAT,t.FORMAT_KEY),e.setValue(n.a.FURNITURE_DATA,this._data)}getLegacyString(){if(!this._data||!this._data.length)return"";const e=this._data[t.STATE];return null==e?"":e}compare(t){return!1}getValue(t){return this._data[t]}get data(){return this._data}}return t.FORMAT_KEY=r.a.MAP_KEY,t.STATE="state",t.RARITY="rarity",t})()},tfDB:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},toFP:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s,n){this._data=[t,e,s,n]}getMessageArray(){return this._data}dispose(){}}},u5n9:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._code=0,!0}parse(t){return!!t&&(this._code=t.readInt(),!0)}get code(){return this._code}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},uEox:function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{}return t.LARGE="h",t.SMALL="sh",t})()},uHVT:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._volumeSystem=0,this._volumeFurni=0,this._volumeTrax=0,this._oldChat=!1,this._roomInvites=!1,this._cameraFollow=!1,this._flags=0,this._chatType=0,!0}parse(t){return!!t&&(this._volumeSystem=t.readInt(),this._volumeFurni=t.readInt(),this._volumeTrax=t.readInt(),this._oldChat=t.readBoolean(),this._roomInvites=t.readBoolean(),this._cameraFollow=t.readBoolean(),this._flags=t.readInt(),this._chatType=t.readInt(),!0)}get volumeSystem(){return this._volumeSystem}get volumeFurni(){return this._volumeFurni}get volumeTrax(){return this._volumeTrax}get oldChat(){return this._oldChat}get roomInvites(){return this._roomInvites}get cameraFollow(){return this._cameraFollow}get flags(){return this._flags}get chatType(){return this._chatType}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},uHXo:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return!0}parse(t){return!!t}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},uMJ2:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO");class i{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._userId=0,this._username=null,this._figure=null,this._gender=null,this._motto=null,this._realName=null,this._directMail=!1,this._respectsReceived=0,this._respectsRemaining=0,this._respectsPetRemaining=0,this._streamPublishingAllowed=!1,this._lastAccessDate=null,this._canChangeName=!1,this._safetyLocked=!1,!0}parse(t){return!!t&&(this._userId=t.readInt(),this._username=t.readString(),this._figure=t.readString(),this._gender=t.readString(),this._motto=t.readString(),this._realName=t.readString(),this._directMail=t.readBoolean(),this._respectsReceived=t.readInt(),this._respectsRemaining=t.readInt(),this._respectsPetRemaining=t.readInt(),this._streamPublishingAllowed=t.readBoolean(),this._lastAccessDate=t.readString(),this._canChangeName=t.readBoolean(),this._safetyLocked=t.readBoolean(),!0)}get userId(){return this._userId}get username(){return this._username}get figure(){return this._figure}get gender(){return this._gender}get motto(){return this._motto}get realName(){return this._realName}get directMail(){return this._directMail}get respectsReceived(){return this._respectsReceived}get respectsRemaining(){return this._respectsRemaining}get respectsPetRemaining(){return this._respectsPetRemaining}get streamPublishingAllowed(){return this._streamPublishingAllowed}get lastAccessedDate(){return this._lastAccessDate}get canChangeName(){return this._canChangeName}get safetyLocked(){return this._safetyLocked}}class r{flush(){return this._userInfo=null,!0}parse(t){return!!t&&(this._userInfo=new i(t),!!this._userInfo)}get userInfo(){return this._userInfo}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"uUF/":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("XMGm"),i=s("MeCd"),r=s("KQk8");let a=(()=>{class t extends i.a{constructor(){super(),this._data=[]}parseWrapper(t){if(!t)return;this._data=[];const e=t.readInt();if(e)for(let s=0;s<e;s++)this._data.push(t.readInt());super.parseWrapper(t)}initializeFromRoomObjectModel(t){super.initializeFromRoomObjectModel(t),this._data=t.getValue(n.a.FURNITURE_DATA)}writeRoomObjectModel(e){super.writeRoomObjectModel(e),e.setValue(n.a.FURNITURE_DATA_FORMAT,t.FORMAT_KEY),e.setValue(n.a.FURNITURE_DATA,this._data)}getLegacyString(){return this._data&&this._data.length?this._data[t.STATE].toString():""}compare(e){if(!(e instanceof t))return!1;let s=0;for(;s<this._data.length;){if(0===s);else if(this._data[s]!==e.getValue(s))return!1;s++}return!0}getValue(t){if(!this._data||!this._data.length)return-1;const e=this._data[t];return null==e?-1:e}}return t.FORMAT_KEY=r.a.NUMBER_KEY,t.STATE=0,t})()},uaI9:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._furniId=-1,this._height=0,!0}parse(t){return!!t&&(this._furniId=t.readInt(),this._height=t.readInt()/100,!0)}get furniId(){return this._furniId}get height(){return this._height}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},ulbO:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("J0ap");class r{flush(){return this._totalFragments=0,this._fragmentNumber=0,this._fragment=new Map,!0}parse(t){if(!t)return!1;this._totalFragments=t.readInt(),this._fragmentNumber=t.readInt();let e=t.readInt();for(;e>0;){const s=new i.a(t);s&&this._fragment.set(s.itemId,s),e--}return!0}get totalFragments(){return this._totalFragments}get fragmentNumber(){return this._fragmentNumber}get fragment(){return this._fragment}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},v12S:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("XMGm"),i=s("MeCd"),r=s("KQk8");let a=(()=>{class t extends i.a{constructor(){super(),this._data=""}parseWrapper(t){t&&(this._data=t.readString(),super.parseWrapper(t))}initializeFromRoomObjectModel(t){super.initializeFromRoomObjectModel(t),this._data=t.getValue(n.a.FURNITURE_DATA)}writeRoomObjectModel(e){super.writeRoomObjectModel(e),e.setValue(n.a.FURNITURE_DATA_FORMAT,t.FORMAT_KEY),e.setValue(n.a.FURNITURE_DATA,this._data)}getLegacyString(){return this._data}compare(t){return this._data===t.getLegacyString()}setString(t){this._data=t}}return t.FORMAT_KEY=r.a.LEGACY_KEY,t})()},"v1R/":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e=0){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},v66B:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._blockedTilesMap=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;){const s=t.readInt(),n=t.readInt();this._blockedTilesMap[n]||(this._blockedTilesMap[n]=[]),this._blockedTilesMap[n][s]=!0,e--}return!0}get blockedTilesMap(){return this._blockedTilesMap}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},vA8V:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},vKkO:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("nL9H");class i extends n.a{constructor(t){super(t),this._conflictingActions=[],this._triggerConf=t.readInt();let e=t.readInt();for(;e>0;)this._conflictingActions.push(t.readInt()),e--}get type(){return this._triggerConf}get code(){return this._triggerConf}get _Str_21837(){return this._conflictingActions}}},vUGd:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"vd+k":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s,n=-1){this._data=[],this._data.push(t),this._data.push(e),this._data.push(s),-1!=n&&this._data.push(n)}getMessageArray(){return this._data}dispose(){}}},vkSA:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("qQgg"),i=s("M98o");class r{constructor(t){t.addMessageEvent(new n.a(this.onLoadGameUrl.bind(this)))}onLoadGameUrl(t){if(!t)return;const e=t.getParser();e&&i.a.callGame("showGame",e.url)}}},vqvB:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("P7Cj");let i=(()=>{class t{static init(e,s){t._currentDelta=0,t._startDelayMs=e,t._effectDurationMs=s,t._initializationTimeMs=n.a.instance.time,t._state=t.STATE_START_DELAY}static turnVisualizationOn(){if(t._state===t.STATE_NOT_INITIALIZED||t._state===t.STATE_OVER)return;const e=n.a.instance.time-t._initializationTimeMs;e>t._startDelayMs+t._effectDurationMs?t._state=t.STATE_OVER:(t._visualizationOn=!0,e<t._startDelayMs?t._state=t.STATE_START_DELAY:(t._state=t.STATE_RUNNING,t._currentDelta=(e-t._startDelayMs)/t._effectDurationMs))}static turnVisualizationOff(){t._visualizationOn=!1}static isVisualizationOn(){return t._visualizationOn&&t.isRunning()}static isRunning(){return t._state===t.STATE_START_DELAY||t._state===t.STATE_RUNNING}static getDelta(e=0,s=1){return Math.min(Math.max(t._currentDelta,e),s)}static get totalRunningTime(){return t._startDelayMs+t._effectDurationMs}}return t.STATE_NOT_INITIALIZED=0,t.STATE_START_DELAY=1,t.STATE_RUNNING=2,t.STATE_OVER=3,t._state=t.STATE_NOT_INITIALIZED,t._visualizationOn=!1,t._currentDelta=0,t._initializationTimeMs=0,t._startDelayMs=2e4,t._effectDurationMs=2e3,t})()},vrkx:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("Ns5P");let i=(()=>{class t extends n.a{constructor(t,e,s){super(t,e),this._userName="",this._userName=s}get userName(){return this._userName}}return t.DOORBELL="RSDE_DOORBELL",t.RSDE_REJECTED="RSDE_REJECTED",t.RSDE_ACCEPTED="RSDE_ACCEPTED",t})()},vuPI:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("P7Cj"),i=s("Xr/m"),r=s("vzKh");class a extends i.a{constructor(){super(),this._logger=new r.a(this.constructor.name),this._listeners=new Map}onDispose(){this.removeAllListeners(),super.onDispose()}addEventListener(t,e){if(!t||!e)return;const s=this._listeners.get(t);s?s.push(e):this._listeners.set(t,[e])}removeEventListener(t,e){if(!t||!e)return;const s=this._listeners.get(t);if(s&&s.length)for(const[n,i]of s.entries())if(i&&i===e)return s.splice(n,1),void(s.length||this._listeners.delete(t))}dispatchEvent(t){return!!t&&(n.a.instance.getConfiguration("system.dispatcher.log")&&this._logger.log("DISPATCHED: "+t.type),this.processEvent(t),!0)}processEvent(t){const e=this._listeners.get(t.type);if(!e||!e.length)return;const s=[];for(const i of e)i&&s.push(i);for(;s.length;){const e=s.shift();try{e(t)}catch(n){return void this._logger.error(n.stack)}}}removeAllListeners(){this._listeners.clear()}}},vx5b:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var n=s("5+UO"),i=s("5F4d");class r{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._code=null,this._savedSearches=[],!0}parse(t){if(!t)return!1;this._code=t.readString();let e=t.readInt();for(;e>0;)this._savedSearches.push(new i.a(t)),e--;return!0}get code(){return this._code}get savedSearches(){return this._savedSearches}}class a{flush(){return this._topLevelContexts=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._topLevelContexts.push(new r(t)),e--;return!0}get topLevelContexts(){return this._topLevelContexts}}class o extends n.a{constructor(t){super(t,a)}getParser(){return this.parser}}},vzKh:function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{constructor(t,e=null){this._name=t,this._description=e,this._print=!0}log(t){this.printMessage(t,"log")}error(t,e){this.printMessage(e||t,"error")}warn(t){this.printMessage(t,"warn")}printMessage(e,s){this._print&&t.log(e,this._name,s)}static log(t,e="Nitro",s=null){const n=`[Nitro] ${(new Date).toDateString()} [${e}] ${t} ${this.getTimestamp()}`;switch(s){case"error":console.error(n);break;case"warn":console.warn(n);break;case"log":default:console.log(n)}}static getTimestamp(){const e=Date.now(),s=` +${e-t.LAST_TIMESTAMP||0}ms`;return this.LAST_TIMESTAMP=e,s}get description(){return this._description}set description(t){this._description=t}get print(){return this._print}set print(t){this._print=t}}return t.LAST_TIMESTAMP=Date.now(),t})()},"w+79":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},w2uK:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._id=null,!0}parse(t){return!!t&&(this._id=t.readInt(),this._playerAmount=t.readInt(),this._owner=t.readBoolean(),this._ownerId=t.readInt(),this._ownerName=t.readString(),this._bool=t.readBoolean(),this._name=t.readString(),this._description=t.readString(),this._tagsTotal=t.readInt(),!0)}get id(){return this._id}get playerAmount(){return this._playerAmount}get owner(){return this._owner}get ownerId(){return this._ownerId}get ownerName(){return this._ownerName}get name(){return this._name}get description(){return this._description}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},w9Dd:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},wGhc:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return!0}parse(t){return!!t}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},wSNj:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},"wW/F":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("f6Tv");class r{flush(){return this._request=null,!0}parse(t){return!!t&&(this._request=new i.a(t),!0)}get request(){return this._request}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},whnG:function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{}return t.DOG=0,t.CAT=1,t.CROCODILE=2,t.TERRIER=3,t.BEAR=4,t.PIG=5,t.LION=6,t.RHINO=7,t.SPIDER=8,t.TURTLE=9,t.CHICKEN=10,t.FROG=11,t.DRAGON=12,t.MONSTER=13,t.MONKEY=14,t.HORSE=15,t.MONSTERPLANT=16,t.BUNNY=17,t.BUNNYEVIL=18,t.BUNNYDEPRESSED=19,t.BUNNYLOVE=20,t.PIGEONGOOD=21,t.PIGEONEVIL=22,t.DEMONMONKEY=23,t.BABYBEAR=24,t.BABYTERRIER=25,t.GNOME=26,t.LEPRECHAUN=27,t.KITTENBABY=28,t.PUPPYBABY=29,t.PIGLETNBABY=30,t.HALOOMPA=31,t.FOOLS=32,t.PTEROSAUR=33,t.VELOCIRAPTOR=34,t})()},wyCi:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},x7td:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO");class i{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._id=0,this._title=null,this._badge=null,this._colorA=null,this._colorB=null,this._isOwner=!1,this._ownerId=0,this._hasForum=!1,!0}parse(t){return!!t&&(this._id=t.readInt(),this._title=t.readString(),this._badge=t.readString(),this._colorA=t.readString(),this._colorB=t.readString(),this._isOwner=t.readBoolean(),this._ownerId=t.readInt(),this._hasForum=t.readBoolean(),!0)}get id(){return this._id}get title(){return this._title}get badge(){return this._badge}get colorA(){return this._colorA}get colorB(){return this._colorB}get isOwner(){return this._isOwner}get ownerId(){return this._ownerId}get hasForum(){return this._hasForum}}class r{flush(){return this._groups=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._groups.push(new i(t)),e--;return!0}get groups(){return this._groups}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},xAfD:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},xB90:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._userId=null,this._badges=[],!0}parse(t){if(!t)return!1;this._userId=t.readInt();let e=t.readInt();for(;e>0;){t.readInt();const s=t.readString();this._badges.push(s),e--}return!0}get userId(){return this._userId}get badges(){return this._badges}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"xq+5":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO"),i=s("c746");class r extends n.a{constructor(t){super(t,i.a)}getParser(){return this.parser}}},xwkN:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},xycO:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s("5+UO"),i=s("5F4d");class r{flush(){return this._searches=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._searches.push(new i.a(t)),e--;return!0}get searches(){return this._searches}}class a extends n.a{constructor(t){super(t,r)}getParser(){return this.parser}}},y81I:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("3r1x");class i extends n.a{constructor(t,e){super(t),this._object=e}get object(){return this._object}get objectId(){return this._object?this._object.id:-1}get objectType(){return this._object?this._object.type:null}}},yAmi:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},yF7E:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t,e){this._location=t,this._direction=e}get location(){return this._location}get direction(){return this._direction}}},ySDW:function(t,e,s){"use strict";s.d(e,"a",function(){return n});let n=(()=>{class t{}return t.MOUSE_CLICK="click",t.DOUBLE_CLICK="double_click",t.MOUSE_MOVE="mousemove",t.MOUSE_DOWN="mousedown",t.MOUSE_UP="mouseup",t.ROLL_OVER="mouseover",t.ROLL_OUT="mouseout",t})()},yd16:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("Ns5P");let i=(()=>{class t extends n.a{constructor(t,e,s,n,i,r,a,o,c){super(t,e),this._classId=0,this._itemType="",this._placedItemId=0,this._placedItemType="",this._classId=s,this._itemType=n,this._productCode=i,this._placedItemId=r,this._placedItemType=a,this._placedInRoom=o,this._petFigureString=c}get classId(){return this._classId}get itemType(){return this._itemType}get productCode(){return this._productCode}get placedItemId(){return this._placedItemId}get placedInRoom(){return this._placedInRoom}get placedItemType(){return this._placedItemType}get petFigureString(){return this._petFigureString}}return t.RSPE_PRESENT_OPENED="RSPE_PRESENT_OPENED",t})()},yp5t:function(t){t.exports=JSON.parse('{"a":[{"id":"Move","parts":[{"setType":"bd","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"bds","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"ss","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"lg","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"sh","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"lh","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"lhs","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"ls","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"lc","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"rh","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"rhs","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"rs","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"rc","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"ch","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]}]},{"id":"Wave","parts":[{"setType":"lh","frames":[{"number":0,"assetPartDefinition":"wav"},{"number":1,"assetPartDefinition":"wav"}]},{"setType":"lhs","frames":[{"number":0,"assetPartDefinition":"wav"},{"number":1,"assetPartDefinition":"wav"}]},{"setType":"ls","frames":[{"number":0,"assetPartDefinition":"wav"},{"number":1,"assetPartDefinition":"wav"}]},{"setType":"lc","frames":[{"number":0,"assetPartDefinition":"wav"},{"number":1,"assetPartDefinition":"wav"}]},{"setType":"ch","frames":[{"number":0,"assetPartDefinition":"wav"},{"number":1,"assetPartDefinition":"wav"},{"number":2,"assetPartDefinition":"wav"},{"number":3,"assetPartDefinition":"wav"}]}]},{"id":"Talk","parts":[{"setType":"hd","frames":[{"number":0,"assetPartDefinition":"spk"},{"number":1,"assetPartDefinition":"spk"}]},{"setType":"fc","frames":[{"number":0,"assetPartDefinition":"spk"},{"number":1,"assetPartDefinition":"spk"}]},{"setType":"fa","frames":[{"number":0,"assetPartDefinition":"spk"},{"number":1,"assetPartDefinition":"spk"}]}]},{"id":"Sign","parts":[{"setType":"lh","frames":[{"number":0,"assetPartDefinition":"sig"}]},{"setType":"li","frames":[{"number":0,"assetPartDefinition":"sig"}]},{"setType":"ls","frames":[{"number":0,"assetPartDefinition":"wav"}]},{"setType":"lc","frames":[{"number":0,"assetPartDefinition":"wav"}]}]},{"id":"Respect","parts":[{"setType":"lh","frames":[{"number":0,"assetPartDefinition":"respect","repeats":15},{"number":1,"assetPartDefinition":"respect","repeats":15}]},{"setType":"ls","frames":[{"number":0,"assetPartDefinition":"wav","repeats":15},{"number":1,"assetPartDefinition":"wav","repeats":15}]},{"setType":"lc","frames":[{"number":0,"assetPartDefinition":"wav","repeats":15},{"number":1,"assetPartDefinition":"wav","repeats":15}]}]},{"id":"Blow","parts":[{"setType":"rh","frames":[{"number":0,"assetPartDefinition":"blw","repeats":10},{"number":1,"assetPartDefinition":"blw","repeats":10}]},{"setType":"rs","frames":[{"number":0,"assetPartDefinition":"drk"}]},{"setType":"rc","frames":[{"number":0,"assetPartDefinition":"drk"}]},{"setType":"ri","frames":[{"number":0,"assetPartDefinition":""}]},{"setType":"ey","frames":[{"number":0,"assetPartDefinition":"std","repeats":10},{"number":0,"assetPartDefinition":"eyb","repeats":10}]},{"setType":"fc","frames":[{"number":0,"assetPartDefinition":"std","repeats":10},{"number":0,"assetPartDefinition":"blw","repeats":10}]}]},{"id":"Laugh","parts":[{"setType":"rh","frames":[{"number":0,"assetPartDefinition":"blw"}]},{"setType":"rs","frames":[{"number":0,"assetPartDefinition":"drk"}]},{"setType":"rc","frames":[{"number":0,"assetPartDefinition":"drk"}]},{"setType":"ri","frames":[{"number":0,"assetPartDefinition":""}]},{"setType":"ey","frames":[{"number":0,"assetPartDefinition":"std","repeats":2}]},{"setType":"fc","frames":[{"number":0,"assetPartDefinition":"sml"}]}],"offsets":{"frames":[{"id":0,"directions":[{"id":0,"bodyParts":[{"id":"head","dx":0,"dy":1}]},{"id":1,"bodyParts":[{"id":"head","dx":0,"dy":1}]},{"id":2,"bodyParts":[{"id":"head","dx":0,"dy":1}]},{"id":3,"bodyParts":[{"id":"head","dx":0,"dy":1}]},{"id":4,"bodyParts":[{"id":"head","dx":0,"dy":1}]},{"id":5,"bodyParts":[{"id":"head","dx":0,"dy":1}]},{"id":6,"bodyParts":[{"id":"head","dx":0,"dy":1}]},{"id":7,"bodyParts":[{"id":"head","dx":0,"dy":1}]}]},{"id":1,"directions":[{"id":0,"bodyParts":[{"id":"head","dx":0,"dy":0}]},{"id":1,"bodyParts":[{"id":"head","dx":0,"dy":0}]},{"id":2,"bodyParts":[{"id":"head","dx":0,"dy":0}]},{"id":3,"bodyParts":[{"id":"head","dx":0,"dy":0}]},{"id":4,"bodyParts":[{"id":"head","dx":0,"dy":0}]},{"id":5,"bodyParts":[{"id":"head","dx":0,"dy":0}]},{"id":6,"bodyParts":[{"id":"head","dx":0,"dy":0}]},{"id":7,"bodyParts":[{"id":"head","dx":0,"dy":0}]}]}]}}]}')},yqT3:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var n=s("5+UO"),i=s("fFOI"),r=s("/FfH");class a{flush(){return this._roomId=0,!0}parse(t){return!!t&&(this._roomId=t.readInt(),this._name=t.readString(),this._description=t.readString(),this._state=t.readInt(),this._categoryId=t.readInt(),this._userCount=t.readInt(),this._maxUserCount=t.readInt(),this.parseTags(t),this._tradeMode=t.readInt(),this._allowPets=t.readInt(),this._allowPetsEat=t.readInt(),this._allowWalkthrough=t.readInt(),this._hideWalls=t.readInt(),this._thicknessWall=t.readInt(),this._thicknessFloor=t.readInt(),this._chat=new i.a(t),t.readBoolean(),this._moderation=new r.a(t),!0)}parseTags(t){if(!t)return!1;this._tags=[];let e=t.readInt();for(;e>0;)this._tags.push(t.readString()),e--;return!0}get roomId(){return this._roomId}get name(){return this._name}get description(){return this._description}get state(){return this._state}get categoryId(){return this._categoryId}get userCount(){return this._userCount}get maxUserCount(){return this._maxUserCount}get tags(){return this._tags}get tradeMode(){return this._tradeMode}get allowPets(){return 1===this._allowPets}get allowPetsEat(){return 1===this._allowPetsEat}get allowWalkthrough(){return 1===this._allowWalkthrough}get hideWalls(){return 1===this._hideWalls}get thicknessWall(){return this._thicknessWall}get thicknessFloor(){return this._thicknessFloor}get chatSettings(){return this._chat}get moderationSettings(){return this._moderation}}class o extends n.a{constructor(t){super(t,a)}getParser(){return this.parser}}},yt9a:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){this._data=null}}},yydM:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var n=s("5+UO"),i=s("DFHD"),r=s("9mJe");class a{flush(){return this._rollerId=0,this._itemsRolling=[],this._unitRolling=null,!0}parse(t){if(!t)return;const e=t.readInt(),s=t.readInt(),n=t.readInt(),a=t.readInt();let o=t.readInt();for(;o>0;){const c=t.readInt(),l=parseFloat(t.readString()),h=parseFloat(t.readString()),u=new r.a(c,new i.a(e,s,l),new i.a(n,a,h));this._itemsRolling.push(u),o--}if(this._rollerId=t.readInt(),!t.bytesAvailable)return!0;const c=t.readInt(),l=t.readInt(),h=parseFloat(t.readString()),u=parseFloat(t.readString());switch(c){case 0:break;case 1:this._unitRolling=new r.a(l,new i.a(e,s,h),new i.a(n,a,u),r.a.MOVE);break;case 2:this._unitRolling=new r.a(l,new i.a(e,s,h),new i.a(n,a,u),r.a.SLIDE)}return!0}get rollerId(){return this._rollerId}get itemsRolling(){return this._itemsRolling}get unitRolling(){return this._unitRolling}}class o extends n.a{constructor(t){super(t,a)}getParser(){return this.parser}}},z20u:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var n=function(t){return t.FLOOR="S",t.WALL="I",t.EFFECT="E",t.BADGE="B",t.ROBOT="R",t.HABBO_CLUB="H",t.PET="P",t}({})},z3Rz:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("DFHD");let i=(()=>{class t{static rgbStringToHex(e){const s=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+t.getHex(s[1])+t.getHex(s[2])+t.getHex(s[3])}static getHex(e){return isNaN(e)?"00":t.HEX_DIGITS[(e-e%16)/16]+t.HEX_DIGITS[e%16]}static int2rgb(t){return"rgba("+[(16711680&(t>>>=0))>>>16,(65280&t)>>>8,255&t,1].join(",")+")"}static _Str_22130(t){const e=(t>>16&255)/255,s=(t>>8&255)/255,n=(255&t)/255,i=Math.max(e,s,n),r=Math.min(e,s,n),a=i-r;let o=0,c=0,l=0;return 0==a?o=0:i==e?o=s>n?60*(s-n)/a:60*(s-n)/a+360:i==s?o=60*(n-e)/a+120:i==n&&(o=60*(e-s)/a+240),c=.5*(i+r),l=0==a?0:c<=.5?a/c*.5:a/(1-c)*.5,(Math.round(o/360*255)<<16)+(Math.round(255*l)<<8)+Math.round(255*c)}static _Str_13949(t){let e,s,n,i,r;const a=(t>>16&255)/255,o=(t>>8&255)/255,c=(255&t)/255;let l=0,h=0,u=0;return o>0?(e=0,s=0,e=c<.5?c*(1+o):c+o-c*o,s=2*c-e,n=a+1/3,i=a,r=a-1/3,n<0?n+=1:n>1&&n--,i<0?i+=1:i>1&&i--,r<0?r+=1:r>1&&r--,l=6*n<1?s+6*(e-s)*n:2*n<1?e:3*n<2?s+6*(e-s)*(2/3-n):s,h=6*i<1?s+6*(e-s)*i:2*i<1?e:3*i<2?s+6*(e-s)*(2/3-i):s,u=6*r<1?s+6*(e-s)*r:2*r<1?e:3*r<2?s+6*(e-s)*(2/3-r):s):(l=c,h=c,u=c),(Math.round(255*l)<<16)+(Math.round(255*h)<<8)+Math.round(255*u)}static rgb2xyz(t){let e=(t>>16&255)/255,s=(t>>8&255)/255,i=(t>>0&255)/255;return e>.04045?e=Math.pow((e+.055)/1.055,2.4):e/=12.92,s>.04045?s=Math.pow((s+.055)/1.055,2.4):s/=12.92,i>.04045?i=Math.pow((i+.055)/1.055,2.4):i/=12.92,e*=100,s*=100,i*=100,new n.a(.4124*e+.3576*s+.1805*i,.2126*e+.7152*s+.0722*i,.0193*e+.1192*s+.9505*i)}static _Str_22784(t){let e=t.x/95.047,s=t.y/100,i=t.z/108.883;return e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,new n.a(116*s-16,500*(e-s),200*(s-i))}static rgb2CieLab(e){return t._Str_22784(t.rgb2xyz(e))}}return t.HEX_DIGITS=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],t})()},z6mw:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("3r1x");let i=(()=>{class t extends n.a{constructor(t,e){super(t),this._connection=e}get connection(){return this._connection}}return t.CONNECTION_ESTABLISHED="NCE_ESTABLISHED",t.CONNECTION_CLOSED="NCE_CLOSED",t.CONNECTION_ERROR="NCE_ERROR",t.CONNECTION_HANDSHAKING="NCE_HANDSHAKING",t.CONNECTION_HANDSHAKED="NCE_HANDSHAKED",t.CONNECTION_HANDSHAKE_FAILED="NCE_HANDSHAKE_FAILED",t.CONNECTION_AUTHENTICATED="NCE_AUTHENTICATED",t})()},zIYo:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},zQEY:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this.isBase=t,this.key=0,this.color=0,this.position=4}get code(){return 0===this.key?null:(this.isBase?"b":"s")+(this.key<100?"0":"")+(this.key<10?"0":"")+this.key+(this.color<10?"0":"")+this.color+this.position}}},zRn8:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._totalLikes=0,this._canLike=!1,!0}parse(t){return!!t&&(this._totalLikes=t.readInt(),this._canLike=t.readBoolean(),!0)}get totalLikes(){return this._totalLikes}get canLike(){return this._canLike}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},zTkZ:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._name=null,this._roomId=0,!0}parse(t){return!!t&&(this._name=t.readString(),this._roomId=t.readInt(),!0)}get name(){return this._name}get roomId(){return this._roomId}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},zUnb:function(t,e,s){"use strict";s.r(e);var n=s("fXoL"),i=s("jhN1"),r=s("R1ws"),a=s("C6IL"),o=s("3r1x"),c=s("z6mw"),l=s("M98o"),h=s("ry6F"),u=s("P7Cj"),_=s("G0tw"),d=s("IqKQ");let g=(()=>{class t{constructor(){this._isReady=!1,this._avatarEditorVisible=!1,this._navigatorVisible=!1,this._catalogVisible=!1,this._inventoryVisible=!1,this._friendlistVisible=!1,this._userProfileVisible=!1,this._achievementsVisible=!1,this._meMenuVisible=!1,this._chatHistoryVisible=!1,this._userSettingsVisible=!1,this._userContextVisible=!0,this._floorPlanVisible=!1}showAvatarEditor(){this._avatarEditorVisible=!0}hideAvatarEditor(){this._avatarEditorVisible=!1}showNavigator(){this._navigatorVisible=!0}hideNavigator(){this._navigatorVisible=!1}toggleAvatarEditor(){this._avatarEditorVisible=!this._avatarEditorVisible}toggleNavigator(){this._navigatorVisible=!this._navigatorVisible}showCatalog(){this._catalogVisible=!0}hideCatalog(){this._catalogVisible=!1}toggleCatalog(){this._catalogVisible=!this._catalogVisible}showInventory(){this._inventoryVisible=!0}hideInventory(){this._inventoryVisible=!1}toggleInventory(){this._inventoryVisible=!this._inventoryVisible}showFriendList(){this._friendlistVisible=!0}hideFriendList(){this._friendlistVisible=!1}toggleFriendList(){this._friendlistVisible=!this._friendlistVisible}showUserProfile(){this._userProfileVisible=!0}hideUserProfile(){this._userProfileVisible=!1}toggleUserProfile(){this._userProfileVisible=!this._userProfileVisible}showAchievements(){this._achievementsVisible=!0}hideAchievements(){this._achievementsVisible=!1}toggleAchievements(){this._achievementsVisible=!this._achievementsVisible}showMeMenu(){this._meMenuVisible=!0}hideMeMenu(){this._meMenuVisible=!1}toggleMeMenu(){this._meMenuVisible=!this._meMenuVisible}showChatHistory(){this._chatHistoryVisible=!0}hideChatHistory(){this._chatHistoryVisible=!1}toggleChatHistory(){this._chatHistoryVisible=!this._chatHistoryVisible}showUserSettings(){this._userSettingsVisible=!0}hideUserSettings(){this._userSettingsVisible=!1}toggleUserSettings(){this._userSettingsVisible=!this._userSettingsVisible}toggleUserContextVisible(){this._userContextVisible=!this._userContextVisible}get avatarEditorVisible(){return this._avatarEditorVisible}get navigatorVisible(){return this._navigatorVisible}get catalogVisible(){return this._catalogVisible}get inventoryVisible(){return this._inventoryVisible}get friendListVisible(){return this._friendlistVisible}get userProfileVisible(){return this._userProfileVisible}get achievementsVisible(){return this._achievementsVisible}get meMenuVisible(){return this._meMenuVisible}get chatHistoryVisible(){return this._chatHistoryVisible}get userSettingsVisible(){return this._userSettingsVisible}get userContextVisible(){return this._userContextVisible}set isReady(t){this._isReady=t}get isReady(){return this._isReady}set floorPlanVisible(t){this._floorPlanVisible=t}get floorPlanVisible(){return this._floorPlanVisible}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})();var m=s("ofXK"),p=s("R0Ic"),f=s("ZWGQ"),E=s("dPj3"),S=s("Hs+C"),b=s("5r5K"),v=s("GfbW"),I=s("6u0Z");let R=(()=>{class t extends _.a{constructor(e,s,n=!1,i=!1){super(t.ROOM_ZOOM,e),this._level=s,this._forceFlip=n,this._asDelta=i}get level(){return this._level}get forceFlip(){return this._forceFlip}get asDelta(){return this._asDelta}}return t.ROOM_ZOOM="REE_ROOM_ZOOM",t})();var T=s("Z0XG"),y=s("TPa8"),O=s("9Bkc"),C=s("vrkx"),A=s("4vrv"),M=s("Ns5P"),w=s("Qi++"),U=s("yd16"),D=s("hXx8"),N=s("f6o4"),L=s("GN+4");let P=(()=>{class t{static makeRoomPreviewerId(e){return(65535&e)+t.PREVIEW_ROOM_ID_BASE}static isRoomPreviewerId(e){return e>=t.PREVIEW_ROOM_ID_BASE}}return t.PREVIEW_ROOM_ID_BASE=2147418112,t})();var x=s("Vvah"),F=s("vuPI"),k=s("HqZk"),W=s("UTUL"),B=s("+kDp"),V=s("XMGm"),G=s("BrMT"),K=s("9vQN"),H=s("ySDW");let j=(()=>{class t{}return t.TOUCH_START="touchstart",t.TOUCH_MOVE="touchmove",t.TOUCH_CANCEL="touchcancel",t.TOUCH_END="touchend",t})();var z=s("z3Rz"),Y=s("DACI"),q=s("DFHD");let X=(()=>{class t extends o.a{constructor(t,e){super(t),this._requestId=e}get requestId(){return this._requestId}}return t.ACCEPTED="FRE_ACCEPTED",t.DECLINED="FRE_DECLINED",t})();class Z extends o.a{constructor(t){super(t)}}let Q=(()=>{class t extends Z{constructor(t,e){super(t),this._roomId=0,this._roomId=e}get roomId(){return this._roomId}}return t.RWREUE_GAME_MODE="RWREUE_GAME_MODE",t.RWREUE_NORMAL_MODE="RWREUE_NORMAL_MODE",t})(),J=(()=>{class t extends Z{constructor(t,e,s,n){super(t),this._id=e,this._category=s,this._roomId=n}get id(){return this._id}get category(){return this._category}get roomId(){return this._roomId}}return t.OBJECT_SELECTED="RWROUE_OBJECT_SELECTED",t.OBJECT_DESELECTED="RWROUE_OBJECT_DESELECTED",t.USER_REMOVED="RWROUE_USER_REMOVED",t.FURNI_REMOVED="RWROUE_FURNI_REMOVED",t.FURNI_ADDED="RWROUE_FURNI_ADDED",t.USER_ADDED="RWROUE_USER_ADDED",t.OBJECT_ROLL_OVER="RWROUE_OBJECT_ROLL_OVER",t.OBJECT_ROLL_OUT="RWROUE_OBJECT_ROLL_OUT",t})(),$=(()=>{class t extends Z{constructor(t,e=null,s=null,n=0){super(t),this._roomViewRectangle=e,this._positionDelta=s,this._scale=n}get roomViewRectangle(){return this._roomViewRectangle?this._roomViewRectangle.clone():null}get positionDelta(){return this._positionDelta?this._positionDelta.clone():null}get scale(){return this._scale}}return t.SIZE_CHANGED="RWRVUE_ROOM_VIEW_SIZE_CHANGED",t.SCALE_CHANGED="RWRVUE_ROOM_VIEW_SCALE_CHANGED",t.POSITION_CHANGED="RWRVUE_ROOM_VIEW_POSITION_CHANGED",t})();var tt=s("WRyM"),et=s("EHDF"),st=s("lvFG");let nt=(()=>{class t extends Z{constructor(e,s,n,i,r){super(t.RWAIE_AVATAR_INFO),this._userId=e,this._userName=s,this._Str_3021=n,this._Str_2775=i,this._Str_3947=r}get userId(){return this._userId}get userName(){return this._userName}get _Str_2908(){return this._Str_3021}get _Str_2707(){return this._Str_2775}get _Str_4330(){return this._Str_3947}}return t.RWAIE_AVATAR_INFO="RWAIE_AVATAR_INFO",t})(),it=(()=>{class t extends Z{constructor(){super(t.RWUDUE_USER_DATA_UPDATED)}}return t.RWUDUE_USER_DATA_UPDATED="rwudue_user_data_updated",t})();class rt{constructor(t){this._type=t}get type(){return this._type}}let at=(()=>{class t extends rt{constructor(e){super(t.RWCM_MESSAGE_AVATAR_EXPRESSION),this._animation=e}get animation(){return this._animation}}return t.RWCM_MESSAGE_AVATAR_EXPRESSION="RWCM_MESSAGE_AVATAR_EXPRESSION",t})(),ot=(()=>{class t extends rt{constructor(e){super(t.RWCPM_MESSAGE_CHANGE_POSTURE),this._posture=e}get posture(){return this._posture}}return t.RWCPM_MESSAGE_CHANGE_POSTURE="RWCPM_MESSAGE_CHANGE_POSTURE",t._Str_1553=0,t._Str_2016=1,t})(),ct=(()=>{class t extends rt{constructor(e){super(t.RWCM_MESSAGE_DANCE),this._style=0,this._style=e}get style(){return this._style}}return t.RWCM_MESSAGE_DANCE="RWCM_MESSAGE_DANCE",t._Str_13814=0,t._Str_17699=[2,3,4],t})(),lt=(()=>{class t extends rt{constructor(t,e,s){super(t),this._id=e,this._category=s}get id(){return this._id}get category(){return this._category}}return t.GET_OBJECT_INFO="RWROM_GET_OBJECT_INFO",t.GET_OBJECT_NAME="RWROM_GET_OBJECT_NAME",t.SELECT_OBJECT="RWROM_SELECT_OBJECT",t.GET_OWN_CHARACTER_INFO="RWROM_GET_OWN_CHARACTER_INFO",t.GET_AVATAR_LIST="RWROM_GET_AVATAR_LIST",t})(),ht=(()=>{class t extends rt{constructor(t,e=0){super(t),this._userId=e}get userId(){return this._userId}}return t.RWUAM_WHISPER_USER="RWUAM_WHISPER_USER",t.RWUAM_IGNORE_USER="RWUAM_IGNORE_USER",t.RWUAM_IGNORE_USER_BUBBLE="RWUAM_IGNORE_USER_BUBBLE",t.RWUAM_UNIGNORE_USER="RWUAM_UNIGNORE_USER",t.RWUAM_KICK_USER="RWUAM_KICK_USER",t.RWUAM_BAN_USER_HOUR="RWUAM_BAN_USER_HOUR",t.RWUAM_BAN_USER_DAY="RWUAM_BAN_USER_DAY",t.RWUAM_BAN_USER_PERM="RWUAM_BAN_USER_PERM",t.MUTE_USER_2MIN="RWUAM_MUTE_USER_2MIN",t.MUTE_USER_5MIN="RWUAM_MUTE_USER_5MIN",t.MUTE_USER_10MIN="RWUAM_MUTE_USER_10MIN",t.RWUAM_SEND_FRIEND_REQUEST="RWUAM_SEND_FRIEND_REQUEST",t.RWUAM_RESPECT_USER="RWUAM_RESPECT_USER",t.RWUAM_GIVE_RIGHTS="RWUAM_GIVE_RIGHTS",t.RWUAM_TAKE_RIGHTS="RWUAM_TAKE_RIGHTS",t.RWUAM_START_TRADING="RWUAM_START_TRADING",t.RWUAM_OPEN_HOME_PAGE="RWUAM_OPEN_HOME_PAGE",t.RWUAM_REPORT="RWUAM_REPORT",t.RWUAM_PICKUP_PET="RWUAM_PICKUP_PET",t.RWUAM_MOUNT_PET="RWUAM_MOUNT_PET",t.RWUAM_TOGGLE_PET_RIDING_PERMISSION="RWUAM_TOGGLE_PET_RIDING_PERMISSION",t.RWUAM_TOGGLE_PET_BREEDING_PERMISSION="RWUAM_TOGGLE_PET_BREEDING_PERMISSION",t.RWUAM_DISMOUNT_PET="RWUAM_DISMOUNT_PET",t.RWUAM_SADDLE_OFF="RWUAM_SADDLE_OFF",t.RWUAM_TRAIN_PET="RWUAM_TRAIN_PET",t.RWUAM_RESPECT_PET=" RWUAM_RESPECT_PET",t.RWUAM_TREAT_PET="RWUAM_TREAT_PET",t.RWUAM_REQUEST_PET_UPDATE="RWUAM_REQUEST_PET_UPDATE",t.RWUAM_START_NAME_CHANGE="RWUAM_START_NAME_CHANGE",t.RWUAM_PASS_CARRY_ITEM="RWUAM_PASS_CARRY_ITEM",t.RWUAM_DROP_CARRY_ITEM="RWUAM_DROP_CARRY_ITEM",t.RWUAM_GIVE_CARRY_ITEM_TO_PET="RWUAM_GIVE_CARRY_ITEM_TO_PET",t.RWUAM_GIVE_WATER_TO_PET="RWUAM_GIVE_WATER_TO_PET",t.RWUAM_GIVE_LIGHT_TO_PET="RWUAM_GIVE_LIGHT_TO_PET",t.RWUAM_REQUEST_BREED_PET="RWUAM_REQUEST_BREED_PET",t.RWUAM_HARVEST_PET="RWUAM_HARVEST_PET",t.RWUAM_REVIVE_PET="RWUAM_REVIVE_PET",t.RWUAM_COMPOST_PLANT="RWUAM_COMPOST_PLANT",t.RWUAM_GET_BOT_INFO="RWUAM_GET_BOT_INFO",t.RWUAM_REPORT_CFH_OTHER="RWUAM_REPORT_CFH_OTHER",t.RWUAM_AMBASSADOR_ALERT_USER="RWUAM_AMBASSADOR_ALERT_USER",t.RWUAM_AMBASSADOR_KICK_USER="RWUAM_AMBASSADOR_KICK_USER",t.AMBASSADOR_MUTE_USER_2MIN="RWUAM_AMBASSADOR_MUTE_2MIN",t.AMBASSADOR_MUTE_USER_10MIN="RWUAM_AMBASSADOR_MUTE_10MIN",t.AMBASSADOR_MUTE_USER_60MIN="RWUAM_AMBASSADOR_MUTE_60MIN",t.AMBASSADOR_MUTE_USER_18HOUR="RWUAM_AMBASSADOR_MUTE_18HOUR",t})();class ut{constructor(){this._container=null,this._container=null,this._widget=null,this._disposed=!1,this.onUserNameUpdateEvent=this.onUserNameUpdateEvent.bind(this),this.onNitroToolbarEvent=this.onNitroToolbarEvent.bind(this)}dispose(){this.disposed||(this.container=null,this._widget=null,this._disposed=!0)}update(){}processWidgetMessage(t){if(!t)return null;switch(t.type){case lt.GET_OWN_CHARACTER_INFO:this.getOwnCharacterInfo();break;case ht.RWUAM_REQUEST_PET_UPDATE:this._widget.handlePetInfo=!1;break;case ct.RWCM_MESSAGE_DANCE:{const e=t;this._container&&this._container.roomSession&&this._container.roomSession.sendDanceMessage(e.style);break}case at.RWCM_MESSAGE_AVATAR_EXPRESSION:{const e=t;this._container&&this._container.roomSession&&this._container.roomSession.sendExpressionMessage(e.animation._Str_6677);break}case ot.RWCPM_MESSAGE_CHANGE_POSTURE:{const e=t;this._container&&this._container.roomSession&&this._container.roomSession.sendPostureMessage(e.posture);break}}return null}processEvent(t){if(t)switch(t.type){case et.a.USER_DATA_UPDATED:return void this._container.events.dispatchEvent(new it);case y.a.RSDE_DANCE:{const e=t;if(this._widget&&this._container&&this._container.roomSession&&this._container.roomSession.userDataManager){const t=this._container.roomSession.userDataManager.getUserData(this._container.sessionDataManager.userId);t&&t.roomIndex===e.roomIndex&&(this.widget.isDancing=0!==e.danceId)}return}}}getOwnCharacterInfo(){const t=this._container.sessionDataManager.userId,e=this._container.sessionDataManager.userName,s=this._container.roomSession.userDataManager.getUserData(t);s&&this._container.events.dispatchEvent(new nt(t,e,s.type,s.roomIndex,!1))}getObjectFurnitureData(t){if(!t)return null;const e=t.model.getValue(V.a.FURNITURE_TYPE_ID);return this._container.sessionDataManager.getFloorItemData(e)}getPetUserData(t){const e=this._container.roomSession.roomId,s=this._container.roomEngine.getTotalObjectsForManager(e,k.a.UNIT);let n=0;for(;n<s;){const s=this._container.roomEngine.getRoomObjectByIndex(e,n,k.a.UNIT),i=this._container.roomSession.userDataManager.getUserDataByIndex(s.id);if(i&&i.type===B.a.PET&&i.webID===t)return i;n++}return null}onUserNameUpdateEvent(t){this.widget.close()}onNitroToolbarEvent(t){switch(t.type){case tt.a.SELECT_OWN_AVATAR:return void this.getOwnCharacterInfo()}}get type(){return N.a.AVATAR_INFO}get messageTypes(){return[lt.GET_OWN_CHARACTER_INFO,ct.RWCM_MESSAGE_DANCE,at.RWCM_MESSAGE_AVATAR_EXPRESSION,ot.RWCPM_MESSAGE_CHANGE_POSTURE,ht.RWUAM_REQUEST_PET_UPDATE]}get eventTypes(){return[et.a.USER_DATA_UPDATED,y.a.RSDE_DANCE]}get container(){return this._container}set container(t){this._container&&this._container.sessionDataManager&&this._container.sessionDataManager.events&&(this._container.sessionDataManager.events.removeEventListener(st.a.UNUE_NAME_UPDATED,this.onUserNameUpdateEvent),this._container.roomEngine.events.removeEventListener(tt.a.SELECT_OWN_AVATAR,this.onNitroToolbarEvent)),this._container=t,t&&this._container.sessionDataManager&&this._container.sessionDataManager.events&&(this._container.sessionDataManager.events.addEventListener(st.a.UNUE_NAME_UPDATED,this.onUserNameUpdateEvent),this._container.roomEngine.events.addEventListener(tt.a.SELECT_OWN_AVATAR,this.onNitroToolbarEvent))}get widget(){return this._widget}set widget(t){this._widget=t}get roomEngine(){return this._container&&this._container.roomEngine||null}get roomSession(){return this._container&&this._container.roomSession||null}get disposed(){return this._disposed}}var _t=s("YTIQ");let dt=(()=>{class t{}return t._Str_3159=0,t._Str_2964=1,t._Str_2575=2,t})(),gt=(()=>{class t{constructor(t){this._ordinal=t}get _Str_6677(){return this._ordinal}_Str_1451(t){return t&&t._ordinal==this._ordinal}}return t.NONE=new t(0),t._Str_6268=new t(1),t._Str_5579=new t(2),t._Str_7336=new t(3),t._Str_10353=new t(4),t._Str_6989=new t(5),t._Str_16682=new t(6),t._Str_6325=new t(7),t})(),mt=(()=>{class t extends Z{constructor(e){super(t.RWFCE_FLOOD_CONTROL),this._seconds=0,this._seconds=e}get seconds(){return this._seconds}}return t.RWFCE_FLOOD_CONTROL="RWFCE_FLOOD_CONTROL",t})(),pt=(()=>{class t extends rt{constructor(t,e,s,n,i){super(t),this._text=e,this._chatType=s,this._recipientName=n,this._styleId=i}get text(){return this._text}get chatType(){return this._chatType}get recipientName(){return this._recipientName}get styleId(){return this._styleId}}return t.MESSAGE_CHAT="RWCM_MESSAGE_CHAT",t.CHAT_DEFAULT=0,t.CHAT_WHISPER=1,t.CHAT_SHOUT=2,t})(),ft=(()=>{class t extends rt{constructor(t,e,s,n){super(t),this._objectId=e,this._userName=s,this._roomId=n}get objectId(){return this._objectId}get userName(){return this._userName}get roomId(){return this._roomId}}return t.MESSAGE_SELECT_AVATAR="RWCSAM_MESSAGE_SELECT_AVATAR",t})(),Et=(()=>{class t extends rt{constructor(e){super(t.TYPING_STATUS),this._isTyping=e}get isTyping(){return this._isTyping}}return t.TYPING_STATUS="RWCTM_TYPING_STATUS",t})(),St=(()=>{class t extends rt{constructor(t){super(t)}}return t.RWRWM_USER_CHOOSER="RWRWM_USER_CHOOSER",t.RWRWM_FURNI_CHOOSER="RWRWM_FURNI_CHOOSER",t.RWRWM_ME_MENU="RWRWM_ME_MENU",t.RWRWM_EFFECTS="RWRWM_EFFECTS",t})();class bt{constructor(){this._container=null,this._widget=null,this._disposed=!1}dispose(){this._disposed||(this._container=null,this._widget=null,this._disposed=!0)}update(){}processWidgetMessage(t){if(!t||this.disposed)return null;let e=null;switch(t.type){case Et.TYPING_STATUS:this._container.roomSession.sendChatTypingMessage(t.isTyping);break;case pt.MESSAGE_CHAT:{const e=t;if(""===e.text)return null;let s=e.text;const n=e.text.split(" ");if(n.length>0){const t=n[0];let i="";if(n.length>1&&(i=n[1]),":"===t.charAt(0)&&"x"===i){const t=this._container.roomEngine.selectedAvatarId;if(t>-1){const n=this._container.roomSession.userDataManager.getUserDataByIndex(t);n&&(i=n.name,s=e.text.replace(" x"," "+n.name))}}switch(t.toLowerCase()){case":d":case";d":this._container.sessionDataManager.clubLevel===dt._Str_2575&&this._container.roomSession.sendExpressionMessage(gt._Str_7336._Str_6677);break;case"o/":case"_o/":return this._container.roomSession.sendExpressionMessage(gt._Str_6268._Str_6677),null;case":kiss":if(this._container.sessionDataManager.clubLevel==dt._Str_2575)return this._container.roomSession.sendExpressionMessage(gt._Str_5579._Str_6677),null;break;case":jump":if(this._container.sessionDataManager.clubLevel==dt._Str_2575)return this._container.roomSession.sendExpressionMessage(gt._Str_16682._Str_6677),null;break;case":idle":return this._container.roomSession.sendExpressionMessage(gt._Str_6989._Str_6677),null;case"_b":return this._container.roomSession.sendExpressionMessage(gt._Str_6325._Str_6677),null;case":sign":return this._container.roomSession.sendSignMessage(parseInt(i)),null;case":kick":if(this._container.roomSession.controllerLevel>=K.a.GUEST){const t=this._container.roomEngine.selectedAvatarId;if(t>-1){const e=this._container.roomSession.userDataManager.getUserDataByIndex(t);e&&this._container.roomSession.sendKickMessage(e.webID)}}return null;case":shutup":case":mute":if(this._container.roomSession.controllerLevel>=K.a.GUEST){const t=this._container.roomEngine.selectedAvatarId;if(t>-1){const e=this._container.roomSession.userDataManager.getUserDataByIndex(t);e&&this._container.roomSession.sendMuteMessage(e.webID,2)}}return null;case":iddqd":return this._container.roomEngine.events.dispatchEvent(new R(this._container.roomEngine.activeRoomId,-1,!0)),null;case":zoom":return this._container.roomEngine.events.dispatchEvent(new R(this._container.roomEngine.activeRoomId,parseInt(i),!1)),null;case":screenshot":return this._container.roomEngine.createRoomScreenshot(this._container.roomSession.roomId,this._container.getFirstCanvasId()),null;case":pickall":return this._container.notificationService.alertWithConfirm("${room.confirm.pick_all}","${generic.alert.title}",()=>{this._container.sessionDataManager.sendSpecialCommandMessage(":pickall")}),null;case":furni":return this._container.processWidgetMessage(new St(St.RWRWM_FURNI_CHOOSER)),null;case":chooser":return this._container.processWidgetMessage(new St(St.RWRWM_USER_CHOOSER)),null;case":floor":case":bcfloor":return this._container.roomSession.controllerLevel>=K.a.ROOM_OWNER&&this._container.showFloorPlan(),null;case":client":case":nitro":case":billsonnn":return this._container.notificationService.alertWithScrollableMessages(['<div class="d-flex flex-column justify-content-center align-items-center"><div style="width: 350px; height: 120px; margin: 10px; background: transparent url(\'https://assets-1.nitrots.co/nitro-dark.svg\') no-repeat center; filter: drop-shadow(2px 1px 0 white) drop-shadow(-2px 1px 0 white) drop-shadow(0 -2px 0 white);"></div><b>Version: '+u.a.RELEASE_VERSION+'</b><br />This client is powered by Nitro HTML5<br /><br /><div class="d-flex"><a class="btn btn-primary" href="https://discord.gg/66UR68FPgy" target="_blank">Discord</a><a class="btn btn-primary" href="https://git.krews.org/nitro" target="_blank">Git</a></div><br /></div>'],"Nitro HTML5"),null;case":settings":return(this._container.roomSession.isRoomOwner||this._container.sessionDataManager.isModerator)&&u.a.instance.communication.connection.send(new _t.a(this._container.roomSession.roomId)),null}}const i=e.styleId;if(this._container&&this._container.roomSession)switch(e.chatType){case pt.CHAT_DEFAULT:this._container.roomSession.sendChatMessage(s,i);break;case pt.CHAT_SHOUT:this._container.roomSession.sendShoutMessage(s,i);break;case pt.CHAT_WHISPER:this._container.roomSession.sendWhisperMessage(e.recipientName,s,i)}break}case ft.MESSAGE_SELECT_AVATAR:e=t}return null}processEvent(t){if(t&&!this._disposed)switch(t.type){case T.a.FLOOD_EVENT:{const e=parseInt(t.message);return void this._container.events.dispatchEvent(new mt(e))}}}get type(){return N.a.CHAT_INPUT_WIDGET}get messageTypes(){return[Et.TYPING_STATUS,pt.MESSAGE_CHAT,ft.MESSAGE_SELECT_AVATAR]}get eventTypes(){return[T.a.FLOOD_EVENT]}get container(){return this._container}set container(t){this._container=t}get widget(){return this._widget}set widget(t){this._widget=t}get disposed(){return this._disposed}}var vt=s("tHQF"),It=s("uEox"),Rt=s("Kx+W"),Tt=s("Ays+"),yt=s("gLCd");class Ot{static sum(t,e){return new d.Point(t.x+e.x,t.y+e.y)}static _Str_15193(t,e){return new d.Point(t.x-e.x,t.y-e.y)}static _Str_6038(t,e){return new d.Point(t.x*e,t.y*e)}}let Ct=(()=>{class t{constructor(){this._id=++t.ITEM_COUNTER,this._senderId=-1,this._senderName="",this._senderColor=0,this._senderImageUrl=null,this._content="",this._chatType=0,this._chatStyle=0,this._date=new Date}get id(){return this._id}get senderId(){return this._senderId}set senderId(t){this._senderId=t}get senderName(){return this._senderName}set senderName(t){this._senderName=t}get senderColorString(){return this._senderColor&&"#"+this._senderColor.toString(16).padStart(6,"0")||null}set senderColor(t){this._senderColor=t}get senderImageUrl(){return this._senderImageUrl}set senderImageUrl(t){this._senderImageUrl=t}get content(){return this._content}set content(t){this._content=t}get chatType(){return this._chatType}set chatType(t){this._chatType=t}get chatStyle(){return this._chatStyle}set chatStyle(t){this._chatStyle=t}get date(){return this._date}}return t.ITEM_COUNTER=0,t})(),At=(()=>{class t extends Z{constructor(t,e,s,n,i,r,a,o,c,l,h,u,_=0,d=0,g=null){super(t),this._userId=e,this._text=s,this._chatType=_,this._userName=n,this._userCategory=i,this._userType=r,this._petType=a,this._links=g,this._userX=o,this._userY=c,this._userImage=l,this._userColor=h,this._roomId=u,this._styleId=d}get userId(){return this._userId}get text(){return this._text}get chatType(){return this._chatType}get userName(){return this._userName}get userCategory(){return this._userCategory}get userType(){return this._userType}get petType(){return this._petType}get links(){return this._links}get userX(){return this._userX}get userY(){return this._userY}get userImage(){return this._userImage}get userColor(){return this._userColor}get roomId(){return this._roomId}get styleId(){return this._styleId}}return t.RWCUE_EVENT_CHAT="RWCUE_EVENT_CHAT",t.CHAT_TYPE_SPEAK=0,t.CHAT_TYPE_WHISPER=1,t.CHAT_TYPE_SHOUT=2,t.CHAT_TYPE_RESPECT=3,t.CHAT_TYPE_PETRESPECT=4,t.CHAT_TYPE_NOTIFY=5,t.CHAT_TYPE_PETTREAT=6,t.CHAT_TYPE_PETREVIVE=7,t.CHAT_TYPE_PET_REBREED_FERTILIZE=8,t.CHAT_TYPE_PET_SPEED_FERTILIZE=9,t.CHAT_TYPE_BOT_SPEAK=10,t.CHAT_TYPE_BOT_SHOUT=11,t.CHAT_TYPE_BOT_WHISPER=12,t})();class Mt{constructor(t){this._chatHistoryService=t,this._container=null,this._widget=null,this._connection=null,this._avatarColorCache=new Map,this._avatarImageCache=new Map,this._petImageCache=new Map,this._primaryCanvasScale=0,this._primaryCanvasOriginPos=null,this._tempScreenPosVector=new q.a,this._disposed=!1}dispose(){this._disposed||(this._container=null,this._widget=null,this._disposed=!0)}update(){this._Str_20006()}_Str_20006(){if(!(this._container&&this._container.roomSession&&this._container.roomEngine&&this._container.events))return;const t=this._container.getFirstCanvasId(),e=this._container.roomSession.roomId,s=this._container.roomEngine.getRoomInstanceRenderingCanvas(e,t);if(!s)return;const n=s.geometry;if(!n)return;let i=1;this._primaryCanvasScale>0&&(i=n.scale/this._primaryCanvasScale),this._primaryCanvasOriginPos||(this._tempScreenPosVector.x=0,this._tempScreenPosVector.y=0,this._tempScreenPosVector.z=0,this._primaryCanvasOriginPos=n.getScreenPoint(this._tempScreenPosVector),this._primaryCanvasScale=n.scale-10);let r="",a=null;this._tempScreenPosVector.x=0,this._tempScreenPosVector.y=0,this._tempScreenPosVector.z=0;const o=n.getScreenPoint(this._tempScreenPosVector);if(o){const s=this._container.roomEngine.getRoomInstanceRenderingCanvasOffset(e,t);if(s&&o.set(o.x+s.x,o.y+s.y),o.x!=this._primaryCanvasOriginPos.x||o.y!=this._primaryCanvasOriginPos.y){const t=Ot._Str_15193(o,Ot._Str_6038(this._primaryCanvasOriginPos,i));0==t.x&&0==t.y||(r=$.POSITION_CHANGED,a=new $(r,null,t),this._container.events.dispatchEvent(a)),this._primaryCanvasOriginPos=o}}n.scale!==this._primaryCanvasScale&&(r=$.SCALE_CHANGED,a=new $(r,null,null,n.scale),this._container.events.dispatchEvent(a),this._primaryCanvasScale=n.scale)}getBubbleLocation(t,e){const s=this._container.roomEngine.getRoomInstanceGeometry(t,this._container.getFirstCanvasId()),n=this._container.roomEngine.getRoomInstanceRenderingCanvasScale(t,this._container.getFirstCanvasId());let i=document.body.offsetWidth*n/2,r=document.body.offsetHeight*n/2;if(s&&e){const a=s.getScreenPoint(e);if(a){i+=a.x*n,r+=a.y*n;const e=this._container.roomEngine.getRoomInstanceRenderingCanvasOffset(t,this._container.getFirstCanvasId());e&&(i+=e.x,r+=e.y)}}return new d.Point(i,r)}processWidgetMessage(t){return null}processEvent(t){if(t&&!this._disposed)switch(t.type){case T.a.CHAT_EVENT:{const e=t,s=this._container.roomEngine.getRoomObject(e.session.roomId,e.objectId,k.a.UNIT);if(s&&this._container.roomEngine.getRoomInstanceGeometry(e.session.roomId,this._container.getFirstCanvasId())){this._Str_20006();const t=s.getLocation(),n=this.getBubbleLocation(e.session.roomId,t),i=this._container.roomSession.userDataManager.getUserDataByIndex(e.objectId);let r="",a=0,o=null;const c=e.chatType;let l=e.style,h=0,_=-1;if(i){h=i.type;const t=i.figure;switch(h){case B.a.PET:o=this.getPetImage(t,2,!0,64,s.model.getValue(V.a.FIGURE_POSTURE)),_=new Tt.a(t).typeId;break;case B.a.USER:o=this.getUserImage(t);break;case B.a.RENTABLE_BOT:case B.a.BOT:l=yt.a.BOT}a=this._avatarColorCache.get(t),r=i.name}let d=e.message;switch(c){case T.a._Str_5821:d=u.a.instance.getLocalizationWithParameter("widgets.chatbubble.respect","username",r);break;case T.a._Str_6081:d=u.a.instance.getLocalizationWithParameter("widget.chatbubble.petrespect","petname",r);break;case T.a._Str_5958:d=u.a.instance.getLocalizationWithParameter("widget.chatbubble.pettreat","petname",r);break;case T.a._Str_8971:d=u.a.instance.getLocalizationWithParameters("widget.chatbubble.handitem",["username","handitem"],[r,u.a.instance.getLocalization("handitem"+e.extraParam)]);break;case T.a._Str_8909:{const t=(e.extraParam>0?Math.floor(e.extraParam/3600):0).toString(),s=(e.extraParam>0?Math.floor(e.extraParam%3600/60):0).toString(),n=(e.extraParam%60).toString();d=u.a.instance.getLocalizationWithParameters("widget.chatbubble.mutetime",["hours","minutes","seconds"],[t,s,n]);break}}const g=new Ct;g.senderId=e.objectId,g.senderName=i.name+":",g.senderColor=a,o&&o.src&&(g.senderImageUrl=o.src),g.content=d,g.chatType=c,g.chatStyle=l,this._chatHistoryService.addItem(e.session.roomId,g),this._container&&this._container.events&&this._container.events.dispatchEvent(new At(At.RWCUE_EVENT_CHAT,i.roomIndex,d,r,k.a.UNIT,h,_,n.x,n.y,o,a,e.session.roomId,c,l,[]))}return}}}getUserImage(t){let e=this._avatarImageCache.get(t);return e||(e=this.setFigureImage(t)),e}setFigureImage(t){const e=this._container.avatarRenderManager.createAvatarImage(t,It.a.LARGE,null,this);if(!e)return;const s=e.getCroppedImage(Rt.a.HEAD),n=e.getPartColor(vt.a.CHEST);return this._avatarColorCache.set(t,n&&n._Str_915||16777215),e.dispose(),this._avatarImageCache.set(t,s),s}getPetImage(t,e,s,n=64,i=null){let r=this._petImageCache.get(t+i);if(r)return r;const a=new Tt.a(t),o=this._container.roomEngine.getRoomObjectPetImage(a.typeId,a.paletteId,a.color,new q.a(45*e),n,null,!1,0,a.customParts,i);return o&&(r=u.a.instance.renderer.extract.image(o.data),this._petImageCache.set(t+i,r)),r}resetFigure(t){this.setFigureImage(t)}get type(){return N.a.CHAT_WIDGET}get messageTypes(){return[]}get eventTypes(){return[T.a.CHAT_EVENT]}get container(){return this._container}set container(t){this._container=t}get widget(){return this._widget}set widget(t){this._widget=t}get connection(){return this._connection}set connection(t){this._connection=t}get disposed(){return this._disposed}}let wt=(()=>{class t extends rt{constructor(e,s){super(t.RWLUIM_LET_USER_IN),this._userName=e,this._canEnter=s}get userName(){return this._userName}get _Str_23117(){return this._canEnter}}return t.RWLUIM_LET_USER_IN="RWLUIM_LET_USER_IN",t})(),Ut=(()=>{class t extends Z{constructor(t,e){super(t),this._userName="",this._userName=e}get userName(){return this._userName}}return t.RWDE_RINGING="RWDE_RINGING",t.REJECTED="RWDE_REJECTED",t.RWDE_ACCEPTED="RWDE_ACCEPTED",t})();class Dt{constructor(){this._isDisposed=!1,this._container=null}dispose(){this._isDisposed=!0,this._container=null}processWidgetMessage(t){return t&&this._container&&t&&t.type==wt.RWLUIM_LET_USER_IN?(this._container.roomSession.sendDoorbellApprovalMessage(t.userName,t._Str_23117),null):null}processEvent(t){if(!t)return;const e=t;if(e)switch(t.type){case C.a.RSDE_REJECTED:return void this._container.events.dispatchEvent(new Ut(Ut.REJECTED,e.userName));case C.a.DOORBELL:return void this._container.events.dispatchEvent(new Ut(Ut.RWDE_RINGING,e.userName));case C.a.RSDE_ACCEPTED:return void this._container.events.dispatchEvent(new Ut(Ut.RWDE_ACCEPTED,e.userName))}}update(){}get disposed(){return this._isDisposed}get type(){return N.a.DOORBELL}set container(t){this._container=t}get messageTypes(){return[wt.RWLUIM_LET_USER_IN]}get eventTypes(){return[C.a.DOORBELL,C.a.RSDE_REJECTED,C.a.RSDE_ACCEPTED]}}var Nt=s("AAYK"),Lt=s("BTXg"),Pt=s("ipbj"),xt=s("10Jd");class Ft{constructor(){this._container=null,this._disposed=!1,this._roomId=0,this._roomId=Math.floor(11*Math.random()),this.onLoveLockFurniFinishedEvent=this.onLoveLockFurniFinishedEvent.bind(this),this.onLoveLockFurniFriendConfirmedEvent=this.onLoveLockFurniFriendConfirmedEvent.bind(this),this.onLoveLockFurniStartEvent=this.onLoveLockFurniStartEvent.bind(this)}dispose(){for(const t of this._messages)this._container.connection.removeMessageEvent(t);this._messages=[],this._container=null,this._disposed=!0}processEvent(t){}processWidgetMessage(t){return null}_Str_17138(t,e){null==this._container||this._disposed||this._container.connection.send(new Nt.a(t,e))}update(){}get disposed(){return this._disposed}get type(){return""}get container(){return this._container}set container(t){if(this._container=t,this._container){this._messages=[new Lt.a(this.onLoveLockFurniStartEvent),new Pt.a(this.onLoveLockFurniFriendConfirmedEvent),new xt.a(this.onLoveLockFurniFinishedEvent)];for(const e of this._messages)t.connection.addMessageEvent(e)}}onLoveLockFurniStartEvent(t){if(!this._widget||!t||!t.getParser())return;const e=t.getParser();this._widget.open(e.furniId,e.start)}onLoveLockFurniFinishedEvent(t){this._widget&&t&&t.getParser()&&t.getParser()}onLoveLockFurniFriendConfirmedEvent(t){}sendStart(t,e){this._container.connection.send(new Nt.a(t,e))}get messageTypes(){return[]}get eventTypes(){return[]}get widget(){return this._widget}set widget(t){this._widget=t}}var kt=s("PJfP");class Wt{constructor(){this._isDisposed=!1,this._container=null,this._widget=null}get disposed(){return this._isDisposed}get type(){return N.a.FRIEND_FURNI_ENGRAVING}get container(){return this._container}set container(t){this._container=t}set widget(t){this._widget=t}dispose(){this._container=null,this._widget=null,this._isDisposed=!0}processEvent(t){if(this.disposed||null==t)return;let e=null;switch(t.type){case b.a.REQUEST_FRIEND_FURNITURE_ENGRAVING:if(e=t,e&&this._container.roomEngine&&this._widget){const t=this._container.roomEngine.getRoomObject(e.roomId,e.objectId,e.category);if(t){const e=t.model;if(e){const s=new kt.a;s.initializeFromRoomObjectModel(e),this._widget.open(t.id,e.getValue(V.a.FURNITURE_FRIENDFURNI_ENGRAVING),s)}}}return}}processWidgetMessage(t){return null}get eventTypes(){return[b.a.REQUEST_FRIEND_FURNITURE_ENGRAVING]}get messageTypes(){return[]}update(){}}let Bt=(()=>{class t extends Z{constructor(t,e,s=0,n=null){super(t),this._requestId=e,this._userId=s,this._userName=n}get requestId(){return this._requestId}get userId(){return this._userId}get userName(){return this._userName}}return t.RWFRUE_SHOW_FRIEND_REQUEST="RWFRUE_SHOW_FRIEND_REQUEST",t.RWFRUE_HIDE_FRIEND_REQUEST="RWFRUE_HIDE_FRIEND_REQUEST",t})(),Vt=(()=>{class t extends rt{constructor(t,e=0){super(t),this._requestId=0,this._requestId=e}get _Str_2951(){return this._requestId}}return t.RWFRM_ACCEPT="RWFRM_ACCEPT",t.RWFRM_DECLINE="RWFRM_DECLINE",t})();class Gt{constructor(){this._container=null,this._isDisposed=!1}dispose(){this._container=null,this._isDisposed=!0}processWidgetMessage(t){if(!t)return null;switch(t.type){case Vt.RWFRM_ACCEPT:if(!this._container.friendService)return null;this._container.friendService.acceptFriendRequestById(t._Str_2951);break;case Vt.RWFRM_DECLINE:if(!this._container.friendService)return null;this._container.friendService.removeFriendRequestById(t._Str_2951)}return null}processEvent(t){if(t)switch(t.type){case w.a.RSFRE_FRIEND_REQUEST:return void this._container.events.dispatchEvent(new Bt(Bt.RWFRUE_SHOW_FRIEND_REQUEST,t.requestId,t.userId,t.userName));case X.ACCEPTED:case X.DECLINED:return void this._container.events.dispatchEvent(new Bt(Bt.RWFRUE_HIDE_FRIEND_REQUEST,t.requestId))}}update(){}get disposed(){return this._isDisposed}get type(){return N.a.FRIEND_REQUEST}set container(t){this._container=t}get messageTypes(){return[Vt.RWFRM_ACCEPT,Vt.RWFRM_DECLINE]}get eventTypes(){return[w.a.RSFRE_FRIEND_REQUEST,X.ACCEPTED,X.DECLINED]}}function Kt(t){let e=1;return"-"===t[0]&&(e=-1,t=t.substr(1)),function(s,n){return(s[t]<n[t]?-1:s[t]>n[t]?1:0)*e}}class Ht{constructor(t,e,s){this._id=t,this._category=e,this._name=s}get id(){return this._id}get category(){return this._category}get name(){return this._name}}let jt=(()=>{class t extends Z{constructor(t,e,s=!1){super(t),this._items=e.slice(),this._Str_10043=s}get items(){return this._items}get _Str_2799(){return this._Str_10043}}return t.RWCCE_USER_CHOOSER_CONTENT="RWCCE_USER_CHOOSER_CONTENT",t.RWCCE_FURNI_CHOOSER_CONTENT="RWCCE_FURNI_CHOOSER_CONTENT",t})();class zt{constructor(){this._isDisposed=!1,this._container=null}dispose(){this._isDisposed=!0,this._container=null}processWidgetMessage(t){if(!t)return null;switch(t.type){case St.RWRWM_FURNI_CHOOSER:this.processFurniChooser();break;case lt.SELECT_OBJECT:this.selectFurni(t)}return null}selectFurni(t){null!=t&&(t.category!=k.a.WALL&&t.category!=k.a.FLOOR||this._container.roomEngine.selectRoomObject(this._container.roomSession.roomId,t.id,t.category))}processFurniChooser(){if(null==this._container||null==this._container.roomSession||null==this._container.roomEngine||null==this._container.roomSession.userDataManager)return;const t=this._container.roomSession.roomId,e=[];this.processFloorFurni(t,e),this.processWallFurni(t,e),e.sort(Kt("name")),this._container.events.dispatchEvent(new jt(jt.RWCCE_FURNI_CHOOSER_CONTENT,e,!1))}processWallFurni(t,e){const s=this._container.roomEngine.getRoomObjectCount(t,k.a.WALL);for(let n=0;n<s;n++){const s=this._container.roomEngine.getRoomObjectByIndex(t,n,k.a.WALL);if(null==s)continue;const i=s.type;let r=null;if(i.startsWith("poster")){const t=Number.parseInt(i.replace("poster",""));r=u.a.instance.localization.getValue("poster_"+t+"_name")}else{const t=Number.parseInt(s.model.getValue(V.a.FURNITURE_TYPE_ID)),e=this._container.sessionDataManager.getWallItemData(t);r=null!=e&&e.name.length>0?e.name:i}e.push(new Ht(s.id,k.a.WALL,r))}}processFloorFurni(t,e){const s=this._container.roomEngine.getRoomObjectCount(t,k.a.FLOOR);for(let n=0;n<s;n++){const s=this._container.roomEngine.getRoomObjectByIndex(t,n,k.a.FLOOR);if(null==s)continue;const i=Number.parseInt(s.model.getValue(V.a.FURNITURE_TYPE_ID)),r=this._container.sessionDataManager.getFloorItemData(i);e.push(new Ht(s.id,k.a.FLOOR,null!=r?r.name:s.type))}}processEvent(t){}update(){}get disposed(){return this._isDisposed}get type(){return N.a.FURNI_CHOOSER}set container(t){this._container=t}get messageTypes(){return[St.RWRWM_FURNI_CHOOSER,lt.SELECT_OBJECT]}get eventTypes(){return[]}}class Yt{constructor(){this._isDisposed=!1,this._container=null,this._widget=null}dispose(){this._isDisposed=!0,this._container=null,this._widget=null}processWidgetMessage(t){return null}processEvent(t){switch(t.type){case b.a.REQUEST_BACKGROUND_COLOR:{if(!this.canOpenBackgroundToner())return;const e=this._container.roomEngine.getRoomObject(t.roomId,t.objectId,t.category),s=e.model,n=Number.parseInt(s.getValue(V.a.FURNITURE_ROOM_BACKGROUND_COLOR_HUE)),i=Number.parseInt(s.getValue(V.a.FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION)),r=Number.parseInt(s.getValue(V.a.FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS));this._widget.open(e.id,n,i,r)}}}canOpenBackgroundToner(){return this._container.roomSession.isRoomOwner||this._container.roomSession.controllerLevel>=K.a.GUEST||this._container.sessionDataManager.isGodMode}set widget(t){this._widget=t}get widget(){return this._widget}update(){}get disposed(){return this._isDisposed}get type(){return N.a.ROOM_BACKGROUND_COLOR}set container(t){this._container=t}get container(){return this._container}get messageTypes(){return[]}get eventTypes(){return[b.a.REQUEST_BACKGROUND_COLOR]}}let qt=(()=>{class t extends rt{constructor(t,e,s=-1){super(t),this._roomObjectId=0,this._petId=-1,this._roomObjectId=e,this._petId=s}get _Str_2713(){return this._roomObjectId}get _Str_2508(){return this._petId}}return t.RWUPM_PET_PRODUCT="RWUPM_PET_PRODUCT",t.MONSTERPLANT_SEED="RWUPM_MONSTERPLANT_SEED",t})();class Xt{constructor(){this._container=null,this._isDisposed=!1,this.handleMonsterSeedPlant=this.handleMonsterSeedPlant.bind(this),this.handlePurchasableClothing=this.handlePurchasableClothing.bind(this),this.handleMysterybox=this.handleMysterybox.bind(this),this.handleEffectBox=this.handleEffectBox.bind(this),this.handleMysteryTrophy=this.handleMysteryTrophy.bind(this)}dispose(){this._container=null,this._isDisposed=!0}processWidgetMessage(t){return null}processEvent(t){}update(){}get disposed(){return this._isDisposed}get type(){return N.a.FURNI_STICKIE_WIDGET}set container(t){this._container&&this._container.sessionDataManager&&this._container.sessionDataManager.events&&(this._container.roomEngine.events.removeEventListener(b.a.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,this.handleMonsterSeedPlant),this._container.roomEngine.events.removeEventListener(b.a.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,this.handlePurchasableClothing),this._container.roomEngine.events.removeEventListener(b.a.REQUEST_MYSTERYBOX_OPEN_DIALOG,this.handleMysterybox),this._container.roomEngine.events.removeEventListener(b.a.REQUEST_EFFECTBOX_OPEN_DIALOG,this.handleEffectBox),this._container.roomEngine.events.removeEventListener(b.a.REQUEST_MYSTERYTROPHY_OPEN_DIALOG,this.handleMysteryTrophy)),this._container=t,t&&this._container.sessionDataManager&&this._container.sessionDataManager.events&&(this._container.roomEngine.events.addEventListener(b.a.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,this.handleMonsterSeedPlant),this._container.roomEngine.events.addEventListener(b.a.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,this.handlePurchasableClothing),this._container.roomEngine.events.addEventListener(b.a.REQUEST_MYSTERYBOX_OPEN_DIALOG,this.handleMysterybox),this._container.roomEngine.events.addEventListener(b.a.REQUEST_EFFECTBOX_OPEN_DIALOG,this.handleEffectBox),this._container.roomEngine.events.addEventListener(b.a.REQUEST_MYSTERYTROPHY_OPEN_DIALOG,this.handleMysteryTrophy))}get container(){return this._container}getRoomObject(t){return this._container?this._container.roomEngine.getRoomObject(this._container.roomSession.roomId,t,k.a.FLOOR):null}getFurniData(t){if(!t)return null;const e=Number.parseInt(t.model.getValue(V.a.FURNITURE_TYPE_ID));return this._container.sessionDataManager.getFloorItemData(e)}handlePurchasableClothing(t){if(!this._widget)return;const e=this.getRoomObject(t.objectId);e&&this._container.isOwnerOfFurniture(e)&&this._widget._Str_24748(e)}handleMonsterSeedPlant(t){}handleMysterybox(t){}handleEffectBox(t){}handleMysteryTrophy(t){}get widget(){return this._widget}set widget(t){this._widget=t}get messageTypes(){return[qt.MONSTERPLANT_SEED]}get eventTypes(){return[b.a.OPEN_FURNI_CONTEXT_MENU,b.a.CLOSE_FURNI_CONTEXT_MENU]}}var Zt=s("6X5G");let Qt=(()=>{class t extends Z{constructor(t,e,s,n){super(t),this._value=n,this._objectId=s,this._furniType=e}get value(){return this._value}get objectId(){return this._objectId}get furniType(){return this._furniType}}return t.RWCFUE_CREDIT_FURNI_UPDATE="RWCFUE_CREDIT_FURNI_UPDATE",t})(),Jt=(()=>{class t extends rt{constructor(t,e){super(t),this._objectId=e}get objectId(){return this._objectId}}return t.RWFCRM_REDEEM="RWFCRM_REDEEM",t})(),$t=(()=>{class t extends rt{constructor(t,e,s,n){super(t),this._objectId=e,this._category=s,this._roomId=n}get objectId(){return this._objectId}get category(){return this._category}get roomId(){return this._roomId}}return t.REQUEST_CREDITFURNI="RWFWM_MESSAGE_REQUEST_CREDITFURNI",t.REQUEST_STICKIE="RWFWM_MESSAGE_REQUEST_STICKIE",t.REQUEST_PRESENT="RWFWM_MESSAGE_REQUEST_PRESENT",t.REQUEST_TROPHY="RWFWM_MESSAGE_REQUEST_TROPHY",t.REQUEST_TEASER="RWFWM_MESSAGE_REQUEST_TEASER",t.REQUEST_ECOTRONBOX="RWFWM_MESSAGE_REQUEST_ECOTRONBOX",t.REQUEST_DIMMER="RWFWM_MESSAGE_REQUEST_DIMMER",t.REQUEST_PLACEHOLDER="RWFWM_MESSAGE_REQUEST_PLACEHOLDER",t.REQUEST_CLOTHING_CHANGE="RWFWM_MESSAGE_REQUEST_CLOTHING_CHANGE",t.REQUEST_PLAYLIST_EDITOR="RWFWM_MESSAGE_REQUEST_PLAYLIST_EDITOR",t.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING="RWFWM_WIDGET_MESSAGE_REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING",t.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED="RWFWM_WIDGET_MESSAGE_REQUEST_ACHIEVEMENT_RESOLUTION_FAILED",t.REQUEST_BADGE_DISPLAY_ENGRAVING="RWFWM_WIDGET_MESSAGE_REQUEST_BADGE_DISPLAY_ENGRAVING",t})();class te{constructor(){this._container=null}dispose(){this._container=null}processWidgetMessage(t){if(!t||!this.container)return null;switch(t.type){case $t.REQUEST_CREDITFURNI:{const e=t,s=this._container.roomEngine.getRoomObject(e.roomId,e.objectId,e.category);if(s&&this._container.isOwnerOfFurniture(s)){const t=s.model.getValue(V.a.FURNITURE_CREDIT_VALUE);this._container.events.dispatchEvent(new Qt(Qt.RWCFUE_CREDIT_FURNI_UPDATE,s.model.getValue(V.a.FURNITURE_TYPE_ID)+"_"+e.type+"_"+e.objectId,e.objectId,t))}break}case Jt.RWFCRM_REDEEM:{const e=t;this.container.roomSession&&this.container.roomSession.connection.send(new Zt.a(e.objectId));break}}return null}processEvent(t){}update(){}get disposed(){return!!this._container}get type(){return N.a.FURNI_CREDIT_WIDGET}get container(){return this._container}set container(t){this._container=t}get messageTypes(){return[$t.REQUEST_CREDITFURNI,Jt.RWFCRM_REDEEM]}get eventTypes(){return[]}}var ee=s("uaI9");class se{constructor(){this._container=null,this._widget=null,this._lastFurniId=-1,this._messages=[]}dispose(){this.container=null,this._widget=null}processWidgetMessage(t){return null}processEvent(t){if(!t)return;let e=null;switch(t.type){case b.a.OPEN_WIDGET:if(e=t,e&&this._container.roomEngine&&this._widget){this._lastFurniId=e.objectId;const t=this._container.roomEngine.getRoomObject(e.roomId,e.objectId,e.category);t&&this.canManipulateRoomObject(t)&&this._widget.open(this._lastFurniId,t.getLocation().z)}return;case b.a.CLOSE_WIDGET:return e=t,void(e&&this._container.roomEngine&&this._widget&&this._lastFurniId===e.objectId&&this._widget.hide())}}update(){}get disposed(){return!!this._container}get type(){return N.a.CUSTOM_STACK_HEIGHT}get container(){return this._container}set container(t){if(t!==this._container&&this._container){for(const t of this._messages)this._container.connection.removeMessageEvent(t);this._messages=[]}if(this._container=t,this._container){this._messages=[new ee.a(this.onFurnitureStackHeightEvent.bind(this))];for(const e of this._messages)t.connection.addMessageEvent(e)}}get messageTypes(){return[]}get eventTypes(){return[]}get widget(){return this._widget}set widget(t){this._widget=t}onFurnitureStackHeightEvent(t){if(!t)return;const e=t.getParser();e&&this._widget&&this.canManipulateRoomObject()&&this._widget.update(e.furniId,e.height)}canManipulateRoomObject(t=null){const e=this._container.roomSession.isRoomOwner,s=this._container.roomSession.controllerLevel>=K.a.GUEST,n=this._container.sessionDataManager.isModerator,i=t&&this._container.isOwnerOfFurniture(t);return e||n||s||i}}let ne=(()=>{class t extends Z{constructor(e,s,n,i,r){super(t.RWDSUE_DIMMER_STATE),this._state=e,this._presetId=s,this._effectId=n,this._color=i,this._brightness=r}get state(){return this._state}get _Str_14686(){return this._presetId}get _Str_6815(){return this._effectId}get color(){return this._color}get _Str_5123(){return this._brightness}}return t.RWDSUE_DIMMER_STATE="RWDSUE_DIMMER_STATE",t})();class ie{constructor(t,e,s,n){this._id=0,this._type=0,this._color=0,this._intensity=0,this._id=t,this._type=e,this._color=s,this._intensity=n}get id(){return this._id}get type(){return this._type}get color(){return this._color}get _Str_4272(){return this._intensity}}let re=(()=>{class t extends Z{constructor(t){super(t),this._selectedPresetId=0,this._presets=[]}get _Str_10888(){return this._presets.length}get presets(){return this._presets}get selectedPresetId(){return this._selectedPresetId}set selectedPresetId(t){this._selectedPresetId=t}setPresetValues(t,e,s,n){const i=new ie(t,e,s,n);this._presets[t-1]=i}getPresetNumber(t){return t<0||t>=this._presets.length?null:this._presets[t]}}return t.RWDUE_PRESETS="RWDUE_PRESETS",t.RWDUE_HIDE="RWDUE_HIDE",t})(),ae=(()=>{class t extends rt{constructor(){super(t.RWCDSM_CHANGE_STATE)}}return t.RWCDSM_CHANGE_STATE="RWCDSM_CHANGE_STATE",t})(),oe=(()=>{class t extends rt{constructor(e,s,n){super(t.RWDPM_PREVIEW_DIMMER_PRESET),this._color=e,this._brightness=s,this._bgOnly=n}get color(){return this._color}get _Str_5123(){return this._brightness}get _Str_11464(){return this._bgOnly}}return t.RWDPM_PREVIEW_DIMMER_PRESET="RWDPM_PREVIEW_DIMMER_PRESET",t})(),ce=(()=>{class t extends rt{constructor(e,s,n,i,r){super(t.RWSDPM_SAVE_PRESET),this._presetNumber=e,this._effectTypeId=s,this._color=n,this._brightness=i,this._apply=r}get _Str_25037(){return this._presetNumber}get _Str_24446(){return this._effectTypeId}get color(){return this._color}get _Str_5123(){return this._brightness}get apply(){return this._apply}}return t.RWSDPM_SAVE_PRESET="RWSDPM_SAVE_PRESET",t})();class le{constructor(){this._isDisposed=!1,this._container=null}dispose(){this._isDisposed=!0,this._container=null}processWidgetMessage(t){switch(t.type){case $t.REQUEST_DIMMER:this.canOpenWidget()&&this._container.roomSession.requestMoodlightSettings();break;case ce.RWSDPM_SAVE_PRESET:this.canOpenWidget()&&this._container.roomSession.updateMoodlightData(t._Str_25037,t._Str_24446,t.color,t._Str_5123,t.apply);break;case ae.RWCDSM_CHANGE_STATE:this.canOpenWidget()&&this._container.roomSession.toggleMoodlightState();break;case oe.RWDPM_PREVIEW_DIMMER_PRESET:if(!t||!this._container.roomEngine)return null;this._container.roomEngine._Str_17804(this._container.roomSession.roomId,t.color,t._Str_5123,t._Str_11464)}return null}processEvent(t){switch(t.type){case O.a.RSDPE_PRESETS:{const e=t,s=new re(re.RWDUE_PRESETS);s.selectedPresetId=e.selectedPresetId;let n=0;for(;n<e._Str_10888;){const t=e._Str_14989(n);t&&s.setPresetValues(t.id,t.type,t.color,t._Str_4272),n++}return void this._container.events.dispatchEvent(s)}case E.a.ROOM_COLOR:return void this._container.events.dispatchEvent(new ne(t.state,t._Str_14686,t._Str_6815,t.color,t._Str_5123));case b.a.REMOVE_DIMMER:return void this._container.events.dispatchEvent(new re(re.RWDUE_HIDE))}}update(){}canOpenWidget(){return this._container.roomSession.isRoomOwner||this._container.roomSession.controllerLevel>=K.a.GUEST||this._container.sessionDataManager.isModerator}get disposed(){return this._isDisposed}get type(){return N.a.ROOM_DIMMER}set container(t){this._container=t}get messageTypes(){return[$t.REQUEST_DIMMER,ce.RWSDPM_SAVE_PRESET,ae.RWCDSM_CHANGE_STATE,oe.RWDPM_PREVIEW_DIMMER_PRESET]}get eventTypes(){return[O.a.RSDPE_PRESETS,E.a.ROOM_COLOR,b.a.REMOVE_DIMMER]}}var he=s("Xe1u");class ue{constructor(){this._container=null,this._widget=null,this._cachedRequest=null,this._isDisposed=!1}dispose(){this._isDisposed=!0,this._container=null,this._widget=null,this._cachedRequest=null}processWidgetMessage(t){return null}processEvent(t){if(!t||this.disposed)return;const e=t;switch(t.type){case b.a.REQUEST_HIGH_SCORE_DISPLAY:{const t=this._container.roomEngine.getRoomObject(e.roomId,e.objectId,e.category);if(t){const s=new he.a;s.initializeFromRoomObjectModel(t.model),this._widget.open(e.objectId,e.roomId,s),this._cachedRequest=e}return}case b.a.REQUEST_HIDE_HIGH_SCORE_DISPLAY:return void(e.roomId===this._widget.roomId&&e.objectId===this._widget.objectId&&(this._widget.hide(),this._cachedRequest=null))}}update(){if(!this._cachedRequest||!this.widget.visible||this._widget.roomId!==this._cachedRequest.roomId||this._widget.objectId!==this._cachedRequest.objectId)return;const t=this._container.roomEngine.getRoomObjectScreenLocation(this._cachedRequest.roomId,this._cachedRequest.objectId,this._cachedRequest.category);t&&this._widget.updatePoint(t.x,t.y)}get disposed(){return this._isDisposed}get type(){return N.a.HIGH_SCORE_DISPLAY}set container(t){this._container=t}get messageTypes(){return[]}get eventTypes(){return[b.a.REQUEST_HIGH_SCORE_DISPLAY,b.a.REQUEST_HIDE_HIGH_SCORE_DISPLAY]}get widget(){return this._widget}set widget(t){this._widget=t}}let _e=(()=>{class t{constructor(){this._container=null}dispose(){this._container=null}processWidgetMessage(t){return null}processEvent(e){if(!e)return;let s=null;switch(e.type){case b.a.REQUEST_INTERNAL_LINK:if(s=e,s&&this._container.roomEngine){const e=this._container.roomEngine.getRoomObject(s.roomId,s.objectId,s.category);if(e&&e.model){let s=e.model.getValue(V.a.FURNITURE_DATA)[t.INTERNALLINK];if(s&&""!==s&&0!==s.length||(s=e.model.getValue(V.a.FURNITURE_INTERNAL_LINK)),!s||0===s.length)return;u.a.instance.createLinkEvent(s)}}return}}update(){}get disposed(){return!!this._container}get type(){return N.a.INTERNAL_LINK}get container(){return this._container}set container(t){this._container=t}get messageTypes(){return[]}get eventTypes(){return[b.a.REQUEST_INTERNAL_LINK]}}return t.INTERNALLINK="internalLink",t})();class de{constructor(){this._isDisposed=!1,this._container=null}dispose(){this._isDisposed=!0,this._container=null}processWidgetMessage(t){return null}processEvent(t){switch(t.type){case b.a.REQUEST_MANNEQUIN:{const e=this._container.roomEngine.getRoomObject(t.roomId,t.objectId,t.category);if(!e)return;const s=e.model,n=s.getValue(V.a.FURNITURE_MANNEQUIN_FIGURE),i=s.getValue(V.a.FURNITURE_MANNEQUIN_GENDER),r=s.getValue(V.a.FURNITURE_MANNEQUIN_NAME);return void(n&&i&&this._widget.open(e.id,n,i,r))}}}update(){}get widget(){return this._widget}set widget(t){this._widget=t}get disposed(){return this._isDisposed}get type(){return N.a.MANNEQUIN}set container(t){this._container=t}get container(){return this._container}get messageTypes(){return[]}get eventTypes(){return[b.a.REQUEST_MANNEQUIN]}}let ge=(()=>{class t{}return t.WALL="i",t.FLOOR="s",t.EFFECT="e",t.HABBO_CLUB="h",t.BADGE="b",t.GAME_TOKEN="GAME_TOKEN",t.PET="p",t.ROBOT="r",t})(),me=(()=>{class t extends Z{constructor(t,e,s,n=!1,i=null,r=null,a=null){super(t),this._objectId=-1,this._classId=0,this._itemType="",this._giftMessage="",this._extra=null,this._placedItemId=-1,this._placedItemType="",this._objectId=e,this._giftMessage=s,this._extra=i,this._isController=n,this._purchaserName=r,this._purchaserFigure=a}get objectId(){return this._objectId}get classId(){return this._classId}set classId(t){this._classId=t}get itemType(){return this._itemType}set itemType(t){this._itemType=t}get giftMessage(){return this._giftMessage}get extra(){return this._extra}get isController(){return this._isController}get purchaserName(){return this._purchaserName}get purchaserFigure(){return this._purchaserFigure}get placedItemId(){return this._placedItemId}set placedItemId(t){this._placedItemId=t}get placedInRoom(){return this._placedInRoom}set placedInRoom(t){this._placedInRoom=t}get placedItemType(){return this._placedItemType}set placedItemType(t){this._placedItemType=t}}return t.RWPDUE_PACKAGEINFO="RWPDUE_PACKAGEINFO",t.RWPDUE_CONTENTS="RWPDUE_CONTENTS",t.RWPDUE_CONTENTS_CLUB="RWPDUE_CONTENTS_CLUB",t.RWPDUE_CONTENTS_FLOOR="RWPDUE_CONTENTS_FLOOR",t.RWPDUE_CONTENTS_LANDSCAPE="RWPDUE_CONTENTS_LANDSCAPE",t.RWPDUE_CONTENTS_WALLPAPER="RWPDUE_CONTENTS_WALLPAPER",t.RWPDUE_CONTENTS_IMAGE="RWPDUE_CONTENTS_IMAGE",t})(),pe=(()=>{class t extends rt{constructor(t,e){super(t),this._objectId=e}get objectId(){return this._objectId}}return t.RWPOM_OPEN_PRESENT="RWPOM_OPEN_PRESENT",t})(),fe=(()=>{class t{constructor(){this._name=null,this._objectId=-1,this._isDisposed=!1,this._container=null}dispose(){this._name=null,this._objectId=-1,this._container=null,this._isDisposed=!0}processWidgetMessage(t){if(!t)return null;switch(t.type){case $t.REQUEST_PRESENT:{const e=t,s=this._container.roomEngine.getRoomObject(e.roomId,e.objectId,e.category);if(!s)return null;this._objectId=e.objectId;const n=s.model.getValue(V.a.FURNITURE_DATA)||"",i=s.model.getValue(V.a.FURNITURE_PURCHASER_NAME),r=s.model.getValue(V.a.FURNITURE_PURCHASER_FIGURE),a=(s.model.getValue(V.a.FURNITURE_TYPE_ID),s.model.getValue(V.a.FURNITURE_EXTRAS));this._container.events.dispatchEvent(new me(me.RWPDUE_PACKAGEINFO,e.objectId,n,this._container.isOwnerOfFurniture(s),a,i,r));break}case pe.RWPOM_OPEN_PRESENT:{const e=t;if(e.objectId!==this._objectId)return null;this._container&&(this._container.roomSession.openGift(e.objectId),this._container.roomEngine.changeObjectModelData(this._container.roomEngine.activeRoomId,e.objectId,k.a.FLOOR,V.a.FURNITURE_DISABLE_PICKING_ANIMATION,1));break}}return null}processEvent(e){if(e&&this._container&&this._container.events)switch(e.type){case U.a.RSPE_PRESENT_OPENED:{const s=e;let n=null;s.itemType===ge.FLOOR?n=this._container.sessionDataManager.getFloorItemData(s.classId):s.itemType===ge.WALL&&(n=this._container.sessionDataManager.getWallItemData(s.classId));let i=!1;if(s.placedInRoom){const t=this._container.roomEngine.getRoomObject(this._container.roomSession.roomId,s.placedItemId,k.a.FLOOR);t&&(i=this._container.isOwnerOfFurniture(t))}let r=null;switch(s.itemType){case ge.WALL:if(n)switch(n.className){case t.LANDSCAPE:r=new me(me.RWPDUE_CONTENTS_LANDSCAPE,0,u.a.instance.localization.getValue("inventory.furni.item.landscape.name"),i);break;case t.WALLPAPER:r=new me(me.RWPDUE_CONTENTS_WALLPAPER,0,u.a.instance.localization.getValue("inventory.furni.item.wallpaper.name"),i);break;case t.POSTER:{const t=s.productCode;let e=null;0===t.indexOf("poster")&&(e=t.replace("poster",""));const a=this._container.sessionDataManager.getProductData(t);let o="";a?o=a.name:n&&(o=n.name),r=new me(me.RWPDUE_CONTENTS,0,o,i,e);break}default:r=new me(me.RWPDUE_CONTENTS,0,n.name||"",i)}break;case ge.HABBO_CLUB:r=new me(me.RWPDUE_CONTENTS_CLUB,0,u.a.instance.localization.getValue("widget.furni.present.hc"),!1);break;default:{const t=this._container.sessionDataManager.getFloorItemData(s.classId);let e="";t?e=t.name:n&&(e=n.name),r=new me(me.RWPDUE_CONTENTS,0,e,i);break}}r&&(r.classId=s.classId,r.itemType=s.itemType,r.placedItemId=s.placedItemId,r.placedInRoom=s.placedInRoom,r.placedItemType=s.placedItemType,this._container.events.dispatchEvent(r));break}}}update(){}get disposed(){return this._isDisposed}get type(){return N.a.FURNI_PRESENT_WIDGET}set container(t){this._container=t}get messageTypes(){return[$t.REQUEST_PRESENT,pe.RWPOM_OPEN_PRESENT]}get eventTypes(){return[U.a.RSPE_PRESENT_OPENED]}imageFailed(t){}imageReady(t,e,s){}}return t.FLOOR="floor",t.WALLPAPER="wallpaper",t.LANDSCAPE="landscape",t.POSTER="poster",t})();var Ee=s("10wl"),Se=s("9RxG");let be=(()=>{class t{constructor(){this._container=null,this._messages=[],this._link=null,this._roomIdToEnter=0,this._confirmDialog=null}dispose(){this.container=null,this._link=null,this._roomIdToEnter=0,this.closeConfirmDialog()}processWidgetMessage(t){return null}processEvent(e){if(!e)return;let s=null;switch(e.type){case b.a.REQUEST_ROOM_LINK:if(s=e,s&&this._container.roomEngine){const e=this._container.roomEngine.getRoomObject(s.roomId,s.objectId,s.category);if(e&&e.model){let s=e.model.getValue(V.a.FURNITURE_DATA)[t.INTERNALLINK];if(s&&""!==s&&0!==s.length||(s=e.model.getValue(V.a.FURNITURE_INTERNAL_LINK)),!s||0===s.length)return;this.closeConfirmDialog(),this._link=s,this._roomIdToEnter=parseInt(s,10),this._container&&this._container.connection&&this._container.connection.send(new Se.a(this._roomIdToEnter,!1,!1))}}return}}onRoomInfoEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=e.data;if(!s)return;if(s.roomId!==this._roomIdToEnter)return;this._roomIdToEnter=0;const n=s.roomName,i=s.ownerName;let r=u.a.instance.getLocalization("room.link.confirmation.message");r&&r.indexOf("%%room_name%%")>-1&&(r=r.replace("%%room_name%%",n)),r&&r.indexOf("%%owner_name%%")>-1&&(r=r.replace("%%owner_name%%",i)),this.closeConfirmDialog(),this._container&&this._container.notificationService&&(this._confirmDialog=this._container.notificationService.alertWithConfirm(r,null,()=>{u.a.instance.createLinkEvent("navigator/goto/"+this._link)}))}closeConfirmDialog(){this._confirmDialog&&(this._confirmDialog.close(),this._confirmDialog=null)}update(){}get disposed(){return!!this._container}get type(){return N.a.ROOM_LINK}get container(){return this._container}set container(t){if(t!==this._container&&this._container){for(const t of this._messages)this._container.connection.removeMessageEvent(t);this._messages=[]}if(this._container=t,this._container){this._messages=[new Ee.a(this.onRoomInfoEvent.bind(this))];for(const e of this._messages)t.connection.addMessageEvent(e)}}get messageTypes(){return[]}get eventTypes(){return[b.a.REQUEST_ROOM_LINK]}}return t.INTERNALLINK="internalLink",t})(),ve=(()=>{class t extends Z{constructor(t,e,s,n,i,r){super(t),this._Str_2319=-1,this._Str_2319=e,this._Str_3796=s,this._text=n,this._Str_3062=i,this._controller=r}get _Str_1577(){return this._Str_2319}get _Str_1723(){return this._Str_3796}get text(){return this._text}get _Str_10471(){return this._Str_3062}get controller(){return this._controller}}return t.RWSDUE_STICKIE_DATA="RWSDUE_STICKIE_DATA",t})(),Ie=(()=>{class t extends rt{constructor(t,e,s="",n=""){super(t),this._objectId=e,this._text=s,this._colorHex=n}get objectId(){return this._objectId}get text(){return this._text}get colorHex(){return this._colorHex}}return t.SEND_UPDATE="RWSUM_STICKIE_SEND_UPDATE",t.SEND_DELETE="RWSUM_STICKIE_SEND_DELETE",t})();class Re{constructor(){this._container=null,this._isDisposed=!1}dispose(){this._container=null,this._isDisposed=!0}processWidgetMessage(t){if(!t)return null;switch(t.type){case $t.REQUEST_STICKIE:{const e=t,s=this._container.roomEngine.getRoomObject(e.roomId,e.objectId,e.category);if(s){const t=s.model.getValue(V.a.FURNITURE_ITEMDATA);if(t.length<6)return null;let n=null,i=null;t.indexOf(" ")>0?(n=t.slice(0,t.indexOf(" ")),i=t.slice(t.indexOf(" ")+1,t.length)):n=t,this._container.events.dispatchEvent(new ve(ve.RWSDUE_STICKIE_DATA,e.objectId,s.type,i,n,this._container.roomSession.isRoomOwner||this._container.sessionDataManager.isModerator))}break}case Ie.SEND_UPDATE:this._container.roomEngine.modifyRoomObjectData(t.objectId,k.a.WALL,t.colorHex,t.text);break;case Ie.SEND_DELETE:this._container.roomEngine.deleteRoomObject(t.objectId,k.a.WALL)}return null}processEvent(t){}update(){}get disposed(){return this._isDisposed}get type(){return N.a.FURNI_STICKIE_WIDGET}set container(t){this._container=t}get messageTypes(){return[$t.REQUEST_STICKIE,Ie.SEND_DELETE,Ie.SEND_UPDATE]}get eventTypes(){return[]}}let Te=(()=>{class t extends Z{constructor(t,e,s,n,i,r){super(t),this._name=e,this._date=s,this._message=n,this._color=i,this._viewType=r}get name(){return this._name}get date(){return this._date}get message(){return this._message}get color(){return this._color}get viewType(){return this._viewType}}return t.TROPHY_DATA="RWTDUE_TROPHY_DATA",t})();class ye{constructor(){this._container=null}dispose(){this._container=null}processWidgetMessage(t){if(!t||!this.container)return null;switch(t.type){case $t.REQUEST_TROPHY:{const e=this._container.roomEngine.getRoomObject(t.roomId,t.objectId,t.category);if(e){let t=e.model.getValue(V.a.FURNITURE_DATA),s=e.model.getValue(V.a.FURNITURE_EXTRAS);s||(s="0");const n=e.model.getValue(V.a.FURNITURE_COLOR),i=t.substring(0,t.indexOf("\t"));t=t.substring(i.length+1,t.length);const r=t.substring(0,t.indexOf("\t")),a=t.substr(r.length+1,t.length);this._container.events.dispatchEvent(new Te(Te.TROPHY_DATA,i,r,a,parseInt(n),parseInt(s)))}break}}return null}processEvent(t){}update(){}get disposed(){return!!this._container}get type(){return N.a.FURNI_TROPHY_WIDGET}get container(){return this._container}set container(t){this._container=t}get messageTypes(){return[$t.REQUEST_TROPHY]}get eventTypes(){return[]}}s("whnG");var Oe=s("X+hw"),Ce=s("pGYl"),Ae=s("0DoP"),Me=s("/FfH"),we=s("2L69"),Ue=s("/OJ4"),De=s("e6Xd"),Ne=s("6j78");let Le=(()=>{class t extends Z{constructor(e,s,n,i,r){super(t.RWONE_TYPE),this._userId=e,this._category=s,this._userName=n,this._userType=i,this._roomIndex=r}get userId(){return this._userId}get category(){return this._category}get userName(){return this._userName}get userType(){return this._userType}get roomIndex(){return this._roomIndex}}return t.RWONE_TYPE="RWONE_TYPE",t})(),Pe=(()=>{class t extends Z{constructor(e,s){super(t.RWWCIDE_CHAT_INPUT_CONTENT),this._Str_21134="",this._userName="",this._Str_21134=e,this._userName=s}get _Str_23621(){return this._Str_21134}get userName(){return this._userName}}return t.RWWCIDE_CHAT_INPUT_CONTENT="RWWCIDE_CHAT_INPUT_CONTENT",t.WHISPER="whisper",t.SHOUT="shout",t})(),xe=(()=>{class t extends Z{constructor(t){super(t),this._id=0,this._category=0,this._name="",this._description="",this._image=null,this._isWallItem=!1,this._isStickie=!1,this._isRoomOwner=!1,this._roomControllerLevel=0,this._isAnyRoomController=!1,this._expiration=-1,this._purchaseCatalogPageId=-1,this._purchaseOfferId=-1,this._extraParam="",this._isOwner=!1,this._stuffData=null,this._groupId=0,this._ownerId=0,this._ownerName="",this._usagePolicy=0,this._rentCatalogPageId=-1,this._rentOfferId=-1,this._purchaseCouldBeUsedForBuyout=!1,this._rentCouldBeUsedForBuyout=!1,this._availableForBuildersClub=!1}set id(t){this._id=t}get id(){return this._id}set category(t){this._category=t}get category(){return this._category}set name(t){this._name=t}get name(){return this._name}set description(t){this._description=t}get description(){return this._description}set image(t){this._image=t}get image(){return this._image}set isWallItem(t){this._isWallItem=t}get isWallItem(){return this._isWallItem}set isStickie(t){this._isStickie=t}get isStickie(){return this._isStickie}set isRoomOwner(t){this._isRoomOwner=t}get isRoomOwner(){return this._isRoomOwner}set roomControllerLevel(t){this._roomControllerLevel=t}get roomControllerLevel(){return this._roomControllerLevel}set isAnyRoomOwner(t){this._isAnyRoomController=t}get isAnyRoomOwner(){return this._isAnyRoomController}set expiration(t){this._expiration=t}get expiration(){return this._expiration}set purchaseOfferId(t){this._purchaseOfferId=t}get purchaseOfferId(){return this._purchaseOfferId}set extraParam(t){this._extraParam=t}get extraParam(){return this._extraParam}set isOwner(t){this._isOwner=t}get isOwner(){return this._isOwner}set stuffData(t){this._stuffData=t}get stuffData(){return this._stuffData}set groupId(t){this._groupId=t}get groupId(){return this._groupId}set ownerId(t){this._ownerId=t}get ownerId(){return this._ownerId}set ownerName(t){this._ownerName=t}get ownerName(){return this._ownerName}set usagePolicy(t){this._usagePolicy=t}get usagePolicy(){return this._usagePolicy}set rentOfferId(t){this._rentOfferId=t}get rentOfferId(){return this._rentOfferId}get purchaseCouldBeUsedForBuyout(){return this._purchaseCouldBeUsedForBuyout}set purchaseCouldBeUsedForBuyout(t){this._purchaseCouldBeUsedForBuyout=t}get rentCouldBeUsedForBuyout(){return this._rentCouldBeUsedForBuyout}set rentCouldBeUsedForBuyout(t){this._rentCouldBeUsedForBuyout=t}get availableForBuildersClub(){return this._availableForBuildersClub}set availableForBuildersClub(t){this._availableForBuildersClub=t}}return t.FURNI="RWFIUE_FURNI",t})(),Fe=(()=>{class t extends Z{constructor(e,s,n,i,r,a,o,c,l,h){super(t.PET_INFO),this._Str_6689=e,this._Str_20932=s,this._name=n,this._id=i,this._petFigureData=r,this._Str_10121=a,this._ownerId=o,this._ownerName=c,this._Str_2775=l,this._unknownRarityLevel=h}get name(){return this._name}get petFigureData(){return this._petFigureData}get id(){return this._id}get _Str_4355(){return this._Str_6689}get _Str_14767(){return this._Str_20932}get _Str_5175(){return this._Str_10121}get ownerId(){return this._ownerId}get ownerName(){return this._ownerName}get _Str_2707(){return this._Str_2775}get unknownRarityLevel(){return this._unknownRarityLevel}get level(){return this._level}set level(t){this._level=t}get maximumLevel(){return this._maximumLevel}set maximumLevel(t){this._maximumLevel=t}get experience(){return this._experience}set experience(t){this._experience=t}get levelExperienceGoal(){return this._levelExperienceGoal}set levelExperienceGoal(t){this._levelExperienceGoal=t}get energy(){return this._energy}set energy(t){this._energy=t}get maximumEnergy(){return this._maximumEnergy}set maximumEnergy(t){this._maximumEnergy=t}get happyness(){return this._happyness}set happyness(t){this._happyness=t}get maximumHappyness(){return this._maximumHappyness}set maximumHappyness(t){this._maximumHappyness=t}get _Str_2985(){return this._Str_3973}set _Str_2985(t){this._Str_3973=t}get _Str_5114(){return this._Str_11149}set _Str_5114(t){this._Str_11149=t}get respect(){return this._respect}set respect(t){this._respect=t}get age(){return this._age}set age(t){this._age=t}get saddle(){return this._saddle}set saddle(t){this._saddle=t}get rider(){return this._rider}set rider(t){this._rider=t}get breedable(){return this._breedable}set breedable(t){this._breedable=t}get _Str_3307(){return this._Str_4460}set _Str_3307(t){this._Str_4460=t}get publiclyRideable(){return this._publiclyRideable}set publiclyRideable(t){this._publiclyRideable=t}get fullyGrown(){return this._fullyGrown}set fullyGrown(t){this._fullyGrown=t}get dead(){return this._dead}set dead(t){this._dead=t}get rarityLevel(){return this._rarityLevel}set rarityLevel(t){this._rarityLevel=t}get maximumTimeToLive(){return this._maximumTimeToLive}set maximumTimeToLive(t){this._maximumTimeToLive=t}get remainingTimeToLive(){return this._remainingTimeToLive}set remainingTimeToLive(t){this._remainingTimeToLive=t}get remainingGrowTime(){return this._remainingGrowTime}set remainingGrowTime(t){this._remainingGrowTime=t}get publiclyBreedable(){return this._publiclyBreedable}set publiclyBreedable(t){this._publiclyBreedable=t}}return t.PET_INFO="RWPIUE_PET_INFO",t})(),ke=(()=>{class t extends Z{constructor(){super(t.RENTABLE_BOT),this._name="",this._motto="",this._Str_4900=0,this._figure="",this._caryId=0,this._Str_5131=0,this._Str_4026=!1,this._Str_4028=!1,this._roomControllerLevel=0,this._badges=[]}set name(t){this._name=t}get name(){return this._name}set motto(t){this._motto=t}get motto(){return this._motto}set id(t){this._Str_4900=t}get id(){return this._Str_4900}set figure(t){this._figure=t}get figure(){return this._figure}set badges(t){this._badges=t}get badges(){return this._badges}get ownerId(){return this._ownerId}set ownerId(t){this._ownerId=t}get ownerName(){return this._ownerName}set ownerName(t){this._ownerName=t}set _Str_3246(t){this._Str_4026=t}get _Str_3246(){return this._Str_4026}set roomControllerLevel(t){this._roomControllerLevel=t}get roomControllerLevel(){return this._roomControllerLevel}set _Str_3529(t){this._Str_4028=t}get _Str_3529(){return this._Str_4028}set carryId(t){this._caryId=t}get carryId(){return this._caryId}set roomIndex(t){this._Str_5131=t}get roomIndex(){return this._Str_5131}get botSkills(){return this._Str_3986}set botSkills(t){this._Str_3986=t}}return t.RENTABLE_BOT="RWRBIUE_RENTABLE_BOT",t._Str_7492="RENTABLE_BOT",t})(),We=(()=>{class t extends Z{constructor(t){super(t),this._name="",this._motto="",this._Str_4900=0,this._xp=0,this._figure="",this._groupId=0,this._groupName="",this._Str_11289="",this._Str_5228=0,this._Str_5131=0,this._Str_8522=!1,this._realName="",this._Str_3947=!1,this._Str_4026=!1,this._Str_4028=!1,this._roomControllerLevel=0,this._canBeAskedForAFriend=!1,this._Str_9070=!1,this._Str_8457=!1,this._Str_8831=!1,this._Str_3437=0,this._Str_6028=!1,this._Str_6139=!1,this._Str_8973=!1,this._Str_8910=0,this._Str_8858=0,this._isFriend=!1,this._Str_4890=!1,this._badges=[]}set name(t){this._name=t}get name(){return this._name}set motto(t){this._motto=t}get motto(){return this._motto}set activityPoints(t){this._activityPoints=t}get activityPoints(){return this._activityPoints}set webID(t){this._Str_4900=t}get webID(){return this._Str_4900}set xp(t){this._xp=t}get xp(){return this._xp}set userType(t){this._Str_3021=t}get userType(){return this._Str_3021}set figure(t){this._figure=t}get figure(){return this._figure}set badges(t){this._badges=t}get badges(){return this._badges}set groupId(t){this._groupId=t}get groupId(){return this._groupId}set groupName(t){this._groupName=t}get groupName(){return this._groupName}set groupBadgeId(t){this._Str_11289=t}get groupBadgeId(){return this._Str_11289}set canBeAskedForAFriend(t){this._canBeAskedForAFriend=t}get canBeAskedForAFriend(){return this._canBeAskedForAFriend}set respectLeft(t){this._Str_3437=t}get respectLeft(){return this._Str_3437}set isIgnored(t){this._Str_6028=t}get isIgnored(){return this._Str_6028}set isRoomOwner(t){this._Str_4026=t}get isRoomOwner(){return this._Str_4026}set isGuildRoom(t){this._Str_6139=t}get isGuildRoom(){return this._Str_6139}set roomControllerLevel(t){this._roomControllerLevel=t}get roomControllerLevel(){return this._roomControllerLevel}set isModerator(t){this._Str_4028=t}get isModerator(){return this._Str_4028}set canTrade(t){this._Str_8973=t}get canTrade(){return this._Str_8973}set _Str_6622(t){this._Str_8910=t}get _Str_6622(){return this._Str_8910}set _Str_5990(t){this._Str_9070=t}get _Str_5990(){return this._Str_9070}set _Str_6701(t){this._Str_8457=t}get _Str_6701(){return this._Str_8457}get _Str_6394(){return this._Str_8831}set _Str_6394(t){this._Str_8831=t}set flatControl(t){this._Str_8858=t}get flatControl(){return this._Str_8858}set carryId(t){this._Str_5228=t}get carryId(){return this._Str_5228}set roomIndex(t){this._Str_5131=t}get roomIndex(){return this._Str_5131}set isSpectator(t){this._Str_8522=t}get isSpectator(){return this._Str_8522}set realName(t){this._realName=t}get realName(){return this._realName}set _Str_4330(t){this._Str_3947=t}get _Str_4330(){return this._Str_3947}get isFriend(){return this._isFriend}set isFriend(t){this._isFriend=t}get isAmbassador(){return this._Str_4890}set isAmbassador(t){this._Str_4890=t}}return t.OWN_USER="RWUIUE_OWN_USER",t.BOT="RWUIUE_BOT",t.PEER="RWUIUE_PEER",t._Str_18400=0,t._Str_14161=2,t._Str_13798=3,t._Str_7492="BOT",t})(),Be=(()=>{class t extends rt{constructor(e){super(t.RWVM_CHANGE_MOTTO_MESSAGE),this._motto=e}get motto(){return this._motto}}return t.RWVM_CHANGE_MOTTO_MESSAGE="RWVM_CHANGE_MOTTO_MESSAGE",t})(),Ve=(()=>{class t extends rt{constructor(t,e,s,n=-1,i=null){super(t),this._furniId=e,this._furniCategory=s,this._offerId=n,this._objectData=i}get furniId(){return this._furniId}get furniCategory(){return this._furniCategory}get objectData(){return this._objectData}get _Str_2451(){return this._offerId}}return t.RWFUAM_ROTATE="RWFUAM_ROTATE",t.RWFAM_MOVE="RWFAM_MOVE",t.RWFAM_PICKUP="RWFAM_PICKUP",t.RWFAM_EJECT="RWFAM_EJECT",t.RWFAM_USE="RWFAM_USE",t.RWFAM_OPEN_WELCOME_GIFT="RWFAM_OPEN_WELCOME_GIFT",t.RWFAM_SAVE_STUFF_DATA="RWFAM_SAVE_STUFF_DATA",t})(),Ge=(()=>{class t{constructor(){this.container=null,this._widget=null,this._disposed=!1,this.onRoomSessionPetInfoUpdateEvent=this.onRoomSessionPetInfoUpdateEvent.bind(this)}dispose(){this.disposed||(this.container=null,this._disposed=!0)}update(){}processWidgetMessage(t){if(!t||!this._container)return null;let e=0,s=null;if(t instanceof ht&&(e=t.userId,s=[ht.RWUAM_REQUEST_PET_UPDATE,ht.RWUAM_RESPECT_PET,ht.RWUAM_PICKUP_PET,ht.RWUAM_MOUNT_PET,ht.RWUAM_TOGGLE_PET_RIDING_PERMISSION,ht.RWUAM_TOGGLE_PET_BREEDING_PERMISSION,ht.RWUAM_DISMOUNT_PET,ht.RWUAM_SADDLE_OFF,ht.RWUAM_GIVE_CARRY_ITEM_TO_PET,ht.RWUAM_GIVE_WATER_TO_PET,ht.RWUAM_GIVE_LIGHT_TO_PET,ht.RWUAM_TREAT_PET].indexOf(t.type)>=0?this._container.roomSession.userDataManager.getPetData(e):this._container.roomSession.userDataManager.getUserData(e),!s))return null;let n=0,i=0;switch(t instanceof Ve&&(n=t.furniId,i=t.furniCategory),t.type){case lt.GET_OBJECT_INFO:return this.processObjectInfoMessage(t);case lt.GET_OBJECT_NAME:return this.processObjectNameMessage(t);case ht.RWUAM_SEND_FRIEND_REQUEST:this._container.friendService.sendFriendRequest(e,s.name);break;case ht.RWUAM_RESPECT_USER:this._container.sessionDataManager.giveRespect(e);break;case ht.RWUAM_RESPECT_PET:this._container.sessionDataManager.givePetRespect(e);break;case ht.RWUAM_WHISPER_USER:this._container.events.dispatchEvent(new Pe(Pe.WHISPER,s.name));break;case ht.RWUAM_IGNORE_USER:this._container.sessionDataManager.ignoreUser(s.name);break;case ht.RWUAM_UNIGNORE_USER:this._container.sessionDataManager.unignoreUser(s.name);break;case ht.RWUAM_KICK_USER:this._container.roomSession.sendKickMessage(t.userId);break;case ht.RWUAM_BAN_USER_DAY:case ht.RWUAM_BAN_USER_HOUR:case ht.RWUAM_BAN_USER_PERM:this._container.roomSession.sendBanMessage(t.userId,t.type);break;case ht.MUTE_USER_2MIN:this._container.roomSession.sendMuteMessage(t.userId,2);break;case ht.MUTE_USER_5MIN:this._container.roomSession.sendMuteMessage(t.userId,5);break;case ht.MUTE_USER_10MIN:this._container.roomSession.sendMuteMessage(t.userId,10);break;case ht.RWUAM_GIVE_RIGHTS:this._container.roomSession.sendGiveRightsMessage(t.userId);break;case ht.RWUAM_TAKE_RIGHTS:this._container.roomSession.sendTakeRightsMessage(t.userId);break;case ht.RWUAM_START_TRADING:s&&this._widget.inventoryTrading.startTrade(s.roomIndex,s.name);break;case ht.RWUAM_PASS_CARRY_ITEM:this._container.connection.send(new Ae.a(e));break;case ht.RWUAM_GIVE_CARRY_ITEM_TO_PET:case ht.RWUAM_GIVE_WATER_TO_PET:case ht.RWUAM_GIVE_LIGHT_TO_PET:case ht.RWUAM_TREAT_PET:break;case ht.RWUAM_DROP_CARRY_ITEM:this._container.connection.send(new Ce.a);break;case Ve.RWFUAM_ROTATE:this._container.roomEngine.processRoomObjectOperation(n,i,W.a.OBJECT_ROTATE_POSITIVE);break;case Ve.RWFAM_MOVE:this._container.roomEngine.processRoomObjectOperation(n,i,W.a.OBJECT_MOVE);break;case Ve.RWFAM_PICKUP:this._container.roomEngine.processRoomObjectOperation(n,i,W.a.OBJECT_PICKUP);break;case Ve.RWFAM_EJECT:this._container.roomEngine.processRoomObjectOperation(n,i,W.a.OBJECT_EJECT);break;case Ve.RWFAM_USE:this._container.roomEngine.useRoomObject(n,i);break;case Be.RWVM_CHANGE_MOTTO_MESSAGE:return void this._container.roomSession.sendMottoMessage(t.motto);case Ve.RWFAM_SAVE_STUFF_DATA:{const e=t.objectData;if(e){const t=new Map,s=e.split("\t");if(s)for(const e of s){const s=e.split("=",2);s&&2===s.length&&t.set(s[0],s[1])}this._container.roomEngine.processRoomObjectWallOperation(n,i,W.a.OBJECT_SAVE_STUFF_DATA,t),this._Str_23922(t),t.clear()}break}case ht.RWUAM_REQUEST_PET_UPDATE:this._container.roomSession&&this._container.roomSession.userDataManager&&this._container.roomSession.userDataManager.requestPetInfo(e);break;case ht.RWUAM_REPORT:case ht.RWUAM_REPORT_CFH_OTHER:break;case ht.RWUAM_AMBASSADOR_ALERT_USER:this._container.roomSession.sendAmbassadorAlertMessage(t.userId);break;case ht.RWUAM_AMBASSADOR_KICK_USER:this._container.roomSession.sendKickMessage(t.userId);break;case ht.AMBASSADOR_MUTE_USER_2MIN:this._container.roomSession.sendMuteMessage(t.userId,2);break;case ht.AMBASSADOR_MUTE_USER_10MIN:this._container.roomSession.sendMuteMessage(t.userId,10);break;case ht.AMBASSADOR_MUTE_USER_60MIN:this._container.roomSession.sendMuteMessage(t.userId,60);break;case ht.AMBASSADOR_MUTE_USER_18HOUR:this._container.roomSession.sendMuteMessage(t.userId,1080)}return null}processEvent(t){if(event)switch(t.type){case D.a.RSUBE_BADGES:return void this.widget.updateUserBadges(t.userId,t.badges)}}processObjectInfoMessage(t){const e=this._container.roomSession.roomId;switch(t.category){case k.a.FLOOR:case k.a.WALL:this._Str_23142(t,e);break;case k.a.UNIT:{if(!(this._container.roomSession&&this._container.sessionDataManager&&this._container.events&&this._container.roomEngine))return null;const s=this._container.roomSession.userDataManager.getUserDataByIndex(t.id);if(!s)return null;switch(s.type){case B.a.PET:this.selectPet(s.webID);break;case B.a.USER:this._Str_22722(e,t.id,t.category,s);break;case B.a.BOT:this._Str_22312(e,t.id,t.category,s);break;case B.a.RENTABLE_BOT:this._Str_23115(e,t.id,t.category,s)}break}}return null}processObjectNameMessage(t){const e=this._container.roomSession.roomId;let s=0,n=null,i=0,r=0;switch(t.category){case k.a.FLOOR:case k.a.WALL:{if(!this._container.events||!this._container.roomEngine)return null;const i=this._container.roomEngine.getRoomObject(e,t.id,t.category),a=i.type;if(0===a.indexOf("poster"))s=-1,n="${poster_"+parseInt(a.replace("poster",""))+"_name}",r=i.id;else{let e=null;const a=i.model.getValue(V.a.FURNITURE_TYPE_ID);if(t.category===k.a.FLOOR?e=this._container.sessionDataManager.getFloorItemData(a):t.category===k.a.WALL&&(e=this._container.sessionDataManager.getWallItemData(a)),!e)return null;s=e.id,n=e.name,r=i.id}break}case k.a.UNIT:{if(!this._container.roomSession||!this._container.roomSession.userDataManager)return null;const e=this._container.roomSession.userDataManager.getUserDataByIndex(t.id);if(!e)return null;s=e.webID,n=e.name,i=e.type,r=e.roomIndex;break}}return n&&this._container.events.dispatchEvent(new Le(s,t.category,n,i,r)),null}_Str_23142(t,e){if(!this._container||!this._container.events||!this._container.roomEngine)return;if(t.id<0)return;const s=new xe(xe.FURNI);s.id=t.id,s.category=t.category;const n=this._container.roomEngine.getRoomObject(e,t.id,t.category);if(!n)return;const i=n.model;i.getValue(Ne.a.INFOSTAND_EXTRA_PARAM)&&(s.extraParam=i.getValue(Ne.a.INFOSTAND_EXTRA_PARAM));const r=i.getValue(V.a.FURNITURE_DATA_FORMAT),a=we.a.getData(r);a.initializeFromRoomObjectModel(i),s.stuffData=a;const o=n.type;if(0===o.indexOf("poster")){const t=parseInt(o.replace("poster",""));s.name="${poster_"+t+"_name}",s.description="${poster_"+t+"_desc}"}else{const e=i.getValue(V.a.FURNITURE_TYPE_ID);let r=null;t.category===k.a.FLOOR?r=this._container.sessionDataManager.getFloorItemData(e):t.category==k.a.WALL&&(r=this._container.sessionDataManager.getWallItemData(e)),r&&(s.name=r.name,s.description=r.description,s.purchaseOfferId=r.purchaseOfferId,s.purchaseCouldBeUsedForBuyout=r.purchaseCouldBeUsedForBuyout,s.rentOfferId=r.rentOfferId,s.rentCouldBeUsedForBuyout=r.rentCouldBeUsedForBuyout,s.availableForBuildersClub=r.availableForBuildersClub,this._container.wiredService&&t.category===k.a.FLOOR&&this._container.wiredService.selectFurniture(n.id,r.name))}o.indexOf("post_it")>-1&&(s.isStickie=!0);const c=i.getValue(V.a.FURNITURE_EXPIRY_TIME),l=i.getValue(V.a.FURNITURE_EXPIRTY_TIMESTAMP);s.expiration=c<0?c:Math.max(0,c-(u.a.instance.time-l)/1e3);let h=this._container.roomEngine.getRoomObjectImage(e,t.id,t.category,new q.a(180),64,null);if((!h.data||h.data.width>140||h.data.height>200)&&(h=this._container.roomEngine.getRoomObjectImage(e,t.id,t.category,new q.a(180),1,null)),h&&h.data){const t=u.a.instance.renderer.extract.image(h.data);t&&(s.image=t)}s.isWallItem=t.category===k.a.WALL,s.isRoomOwner=this._container.roomSession.isRoomOwner,s.roomControllerLevel=this._container.roomSession.controllerLevel,s.isAnyRoomOwner=this._container.sessionDataManager.isModerator,s.ownerId=i.getValue(V.a.FURNITURE_OWNER_ID),s.ownerName=i.getValue(V.a.FURNITURE_OWNER_NAME),s.usagePolicy=i.getValue(V.a.FURNITURE_USAGE_POLICY);const _=i.getValue(V.a.FURNITURE_GUILD_CUSTOMIZED_GUILD_ID);0!==_&&(s.groupId=_),this._container.isOwnerOfFurniture(n)&&(s.isOwner=!0),this._container.events.dispatchEvent(s)}selectPet(t){this._container.roomSession.userDataManager.requestPetInfo(t)}_Str_22722(e,s,n,i){let r=We.OWN_USER;i.webID!==this._container.sessionDataManager.userId&&(r=We.PEER);const a=new We(r);a.isSpectator=this._container.roomSession.isSpectator,a.name=i.name,a.motto=i.custom,t.ACTIVITY_POINTS_DISPLAY_ENABLED&&(a.activityPoints=i.activityPoints),a.webID=i.webID,a.roomIndex=s,a.userType=B.a.USER;const o=this._container.roomEngine.getRoomObject(e,s,n);if(o&&(a.carryId=o.model.getValue(V.a.FIGURE_CARRY_OBJECT)),r==We.OWN_USER&&(a.realName=this._container.sessionDataManager.realName,a._Str_4330=this._container.sessionDataManager.canChangeName),a.isRoomOwner=this._container.roomSession.isRoomOwner,a.isGuildRoom=this._container.roomSession.isGuildRoom,a.roomControllerLevel=this._container.roomSession.controllerLevel,a.isModerator=this._container.sessionDataManager.isModerator,a.isAmbassador=this._container.sessionDataManager.isAmbassador,r===We.PEER){a.canBeAskedForAFriend=this._container.friendService.canBeAskedForAFriend(i.webID);const t=this._container.friendService.getFriend(i.webID);if(t&&(a.realName=t.realName,a.isFriend=!0),o){const t=o.model.getValue(V.a.FIGURE_FLAT_CONTROL);null!==t&&(a.flatControl=t),a._Str_6394=this._Str_23100(a),a._Str_5990=this._Str_22729(a),a._Str_6701=this._Str_23573(a)}a.isIgnored=this._container.sessionDataManager.isUserIgnored(i.name),a.respectLeft=this._container.sessionDataManager.respectsLeft;const e=this._container.sessionDataManager.isSystemShutdown,s=this._container.roomSession.tradeMode;if(e)a.canTrade=!1;else switch(s){case Ue.a._Str_14475:{const t=a.flatControl!==K.a.NONE&&a.flatControl!==K.a.GUILD_MEMBER;a.canTrade=a.roomControllerLevel!==K.a.NONE&&a.roomControllerLevel!==K.a.GUILD_MEMBER||t;break}case Ue.a._Str_9173:a.canTrade=!0;break;default:a.canTrade=!1}a._Str_6622=We._Str_18400,e&&(a._Str_6622=We._Str_14161),s!==Ue.a._Str_9173&&(a._Str_6622=We._Str_13798)}a.groupId=parseInt(i.guildId),a.groupName=i.groupName,a.badges=this._container.roomSession.userDataManager.getUserBadges(i.webID),a.figure=i.figure,this._container.events.dispatchEvent(a)}_Str_22312(t,e,s,n){const i=new We(We.BOT);i.name=n.name,i.motto=n.custom,i.webID=n.webID,i.roomIndex=e,i.userType=n.type;const r=this._container.roomEngine.getRoomObject(t,e,s);r&&(i.carryId=r.model.getValue(V.a.FIGURE_CARRY_OBJECT)),i.isRoomOwner=this._container.roomSession.isRoomOwner,i.isGuildRoom=this._container.roomSession.isGuildRoom,i.roomControllerLevel=this._container.roomSession.controllerLevel,i.isModerator=this._container.sessionDataManager.isModerator,i._Str_5990=this._container.roomSession.isRoomOwner,i.badges=[We._Str_7492],i.figure=n.figure,this._container.events.dispatchEvent(i)}_Str_23115(t,e,s,n){const i=new ke;i.name=n.name,i.motto=n.custom,i.id=n.webID,i.roomIndex=e,i.ownerId=n.ownerId,i.ownerName=n.ownerName,i.botSkills=n.botSkills;const r=this._container.roomEngine.getRoomObject(t,e,s);r&&(i.carryId=r.model.getValue(V.a.FIGURE_CARRY_OBJECT)),i._Str_3246=this._container.roomSession.isRoomOwner,i.roomControllerLevel=this._container.roomSession.controllerLevel,i._Str_3529=this._container.sessionDataManager.isModerator,i.badges=[We._Str_7492],i.figure=n.figure,this._container.events.dispatchEvent(i)}_Str_9213(t){return t.isGuildRoom?t.roomControllerLevel>=K.a.GUILD_ADMIN:t.roomControllerLevel>=K.a.GUEST}_Str_23100(t){const e=(function(t,e){switch(e.allowMute){case Me.a._Str_5047:return this._Str_9213(t);default:return t.roomControllerLevel>=K.a.ROOM_OWNER}}).bind(this);return this._Str_18027(t,e)}_Str_22729(t){const e=(function(t,e){switch(e.allowKick){case Me.a._Str_11537:return!0;case Me.a._Str_5047:return this._Str_9213(t);default:return t.roomControllerLevel>=K.a.ROOM_OWNER}}).bind(this);return this._Str_18027(t,e)}_Str_23573(t){const e=(function(t,e){switch(e.allowBan){case Me.a._Str_5047:return this._Str_9213(t);default:return t.roomControllerLevel>=K.a.ROOM_OWNER}}).bind(this);return this._Str_18027(t,e)}_Str_18027(t,e){if(!this._container.roomSession._Str_7411)return!1;const s=this._container.roomSession.moderationSettings;let n=!1;return s&&(n=e(t,s)),n&&t.flatControl<K.a.ROOM_OWNER}_Str_23922(t){this._widget&&this._container.sessionDataManager.hasSecurity(5)&&this._container.connection.send(new Oe.a(this._widget.furniData.id,t))}onRoomSessionPetInfoUpdateEvent(t){if(!t||!this._container||!this._container.events)return;const e=t._Str_24727;if(!e)return;const s=this._container.roomSession.userDataManager.getPetData(e.id);if(!s)return;const n=s.figure,i=new Tt.a(n),r=this.getPetType(n),a=this.getPetBreed(n);const o=e.ownerId===this._container.sessionDataManager.userId,c=new Fe(r,a,s.name,e.id,i,o,e.ownerId,e.ownerName,s.roomIndex,e.rarityLevel);c.level=e.level,c.maximumLevel=e.maximumLevel,c.experience=e.experience,c.levelExperienceGoal=e.levelExperienceGoal,c.energy=e.energy,c.maximumEnergy=e.maximumEnergy,c.happyness=e.happyness,c.maximumHappyness=e.maximumHappyness,c.respect=e.respect,c._Str_2985=this._container.sessionDataManager.respectsPetLeft,c.age=e.age,c.saddle=e.saddle,c.rider=e.rider,c.breedable=e.breedable,c.fullyGrown=e.fullyGrown,c.dead=e.dead,c.rarityLevel=e.rarityLevel,c._Str_3307=e._Str_3307,c._Str_5114=!1,c.publiclyRideable=e.publiclyRideable,c.maximumTimeToLive=e.maximumTimeToLive,c.remainingTimeToLive=e.remainingTimeToLive,c.remainingGrowTime=e.remainingGrowTime,c.publiclyBreedable=e.publiclyBreedable;const l=this._container.roomSession;(o||l.isRoomOwner||this._container.sessionDataManager.isModerator||l.controllerLevel>=K.a.GUEST)&&(c._Str_5114=!0),this._container.events.dispatchEvent(c)}getPetType(t){return this.getPetFigurePart(t,0)}getPetBreed(t){return this.getPetFigurePart(t,1)}getPetFigurePart(t,e){if(!t||!t.length)return-1;const s=t.split(" ");return s.length>0?parseInt(s[e]):-1}get type(){return N.a.INFOSTAND}get messageTypes(){return[lt.GET_OBJECT_INFO,lt.GET_OBJECT_NAME,ht.RWUAM_SEND_FRIEND_REQUEST,ht.RWUAM_RESPECT_USER,ht.RWUAM_WHISPER_USER,ht.RWUAM_IGNORE_USER,ht.RWUAM_UNIGNORE_USER,ht.RWUAM_KICK_USER,ht.RWUAM_BAN_USER_DAY,ht.RWUAM_BAN_USER_HOUR,ht.RWUAM_BAN_USER_PERM,ht.MUTE_USER_2MIN,ht.MUTE_USER_5MIN,ht.MUTE_USER_10MIN,ht.RWUAM_GIVE_RIGHTS,ht.RWUAM_TAKE_RIGHTS,ht.RWUAM_START_TRADING,ht.RWUAM_OPEN_HOME_PAGE,ht.RWUAM_PASS_CARRY_ITEM,ht.RWUAM_GIVE_CARRY_ITEM_TO_PET,ht.RWUAM_DROP_CARRY_ITEM,Ve.RWFAM_MOVE,Ve.RWFUAM_ROTATE,Ve.RWFAM_EJECT,Ve.RWFAM_PICKUP,Ve.RWFAM_USE,Ve.RWFAM_SAVE_STUFF_DATA,ht.RWUAM_REPORT,ht.RWUAM_PICKUP_PET,ht.RWUAM_MOUNT_PET,ht.RWUAM_TOGGLE_PET_RIDING_PERMISSION,ht.RWUAM_TOGGLE_PET_BREEDING_PERMISSION,ht.RWUAM_DISMOUNT_PET,ht.RWUAM_SADDLE_OFF,ht.RWUAM_TRAIN_PET,ht.RWUAM_RESPECT_PET,ht.RWUAM_REQUEST_PET_UPDATE,Be.RWVM_CHANGE_MOTTO_MESSAGE,ht.RWUAM_GIVE_LIGHT_TO_PET,ht.RWUAM_GIVE_WATER_TO_PET,ht.RWUAM_TREAT_PET,ht.RWUAM_REPORT_CFH_OTHER,ht.RWUAM_AMBASSADOR_ALERT_USER,ht.RWUAM_AMBASSADOR_KICK_USER,ht.AMBASSADOR_MUTE_USER_2MIN,ht.AMBASSADOR_MUTE_USER_10MIN,ht.AMBASSADOR_MUTE_USER_60MIN,ht.AMBASSADOR_MUTE_USER_18HOUR]}get eventTypes(){return[D.a.RSUBE_BADGES]}get container(){return this._container}set container(t){this._container&&this._container.roomSessionManager&&this._container.roomSessionManager.events.removeEventListener(De.a.PET_INFO,this.onRoomSessionPetInfoUpdateEvent),this._container=t,this._container&&this._container.roomSessionManager&&this._container.roomSessionManager.events.addEventListener(De.a.PET_INFO,this.onRoomSessionPetInfoUpdateEvent)}get widget(){return this._widget}set widget(t){this._widget=t}get disposed(){return this._disposed}}return t.ACTIVITY_POINTS_DISPLAY_ENABLED=!0,t})(),Ke=(()=>{class t extends Z{constructor(e,s,n){super(t.RWULUE_USER_LOCATION_UPDATE),this._userId=e,this._rectangle=s,this._Str_20775=n}get userId(){return this._userId}get rectangle(){return this._rectangle}get _Str_9337(){return this._Str_20775}}return t.RWULUE_USER_LOCATION_UPDATE="RWULUE_USER_LOCATION_UPDATE",t})(),He=(()=>{class t extends rt{constructor(t,e,s){super(t),this._objectId=e,this._objectType=s}get _Str_1577(){return this._objectId}get _Str_1723(){return this._objectType}}return t.RWGOI_MESSAGE_GET_OBJECT_LOCATION="RWGOI_MESSAGE_GET_OBJECT_LOCATION",t.RWGOI_MESSAGE_GET_GAME_OBJECT_LOCATION="RWGOI_MESSAGE_GET_GAME_OBJECT_LOCATION",t})();class je{constructor(){this._disposed=!1,this._container=null}dispose(){this._disposed=!0,this._container=null}get disposed(){return this._disposed}get type(){return null}set container(t){this._container=t}get messageTypes(){return[He.RWGOI_MESSAGE_GET_OBJECT_LOCATION,He.RWGOI_MESSAGE_GET_GAME_OBJECT_LOCATION]}processWidgetMessage(t){if(!(t&&this._container&&t instanceof He))return null;const e=this._container.roomSession;switch(t.type){case He.RWGOI_MESSAGE_GET_OBJECT_LOCATION:{if(!e||!e.userDataManager)return null;const s=e.userDataManager.getDataByType(t._Str_1577,t._Str_1723);let n=null,i=null;if(s){n=this._container.roomEngine.getRoomObjectBoundingRectangle(e.roomId,s.roomIndex,k.a.UNIT,this._container.getFirstCanvasId()),i=this._container.roomEngine.getRoomObjectScreenLocation(e.roomId,s.roomIndex,k.a.UNIT,this._container.getFirstCanvasId());const t=this._container.getRoomViewRect();n&&i&&t&&(n.x+=t.x,n.y+=t.y,i.x+=t.x,i.y+=t.y)}return new Ke(t._Str_1577,n,i)}}return null}get eventTypes(){return[]}processEvent(t){}update(){}}var ze=s("kRfe");let Ye=(()=>{class t extends rt{constructor(){super(t.RWZTM_ZOOM_TOGGLE)}}return t.RWZTM_ZOOM_TOGGLE="RWZTM_ZOOM_TOGGLE",t})();class qe{constructor(){this._zoomed=!1,this._communicationManager=u.a.instance.communication,this._container=null,this._widget=null,this._messages=[],this._disposed=!1,this.onRoomInfoEvent=this.onRoomInfoEvent.bind(this)}dispose(){if(!this._disposed){this._communicationManager=null,this._widget=null;for(const t of this._messages)this._container.connection.removeMessageEvent(t);this._container=null,this._messages=[],this._disposed=!0}}update(){}processWidgetMessage(t){return t instanceof Ye&&(this._container.roomEngine.events.dispatchEvent(new R(this._container.roomEngine.activeRoomId,this._zoomed?1:0,!1)),this._zoomed=!this._zoomed),null}processEvent(t){}onRoomInfoEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=e.data;if(s&&e.roomEnter){this._widget.updateRoomInfo(s);const t=s.showOwner?u.a.instance.getLocalization("room.tool.room.owner.prefix")+" "+s.ownerName:u.a.instance.getLocalization("room.tool.public.room");this._widget.updateRoomTools(s.roomName,t,s.tags),this._widget.addVisitedRoom(s),this._widget.updateRoomCurrentIndex(s.roomId)}}rateRoom(){this._container&&this._container.connection.send(new ze.a(1))}get disposed(){return this._disposed}get type(){return N.a.ROOM_TOOLS}get widget(){return this._widget}set widget(t){this._widget=t}get container(){return this._container}set container(t){if(this._container=t,this._container){this._messages=[new Ee.a(this.onRoomInfoEvent)];for(const e of this._messages)t.connection.addMessageEvent(e)}}get messageTypes(){return[]}get eventTypes(){return[]}}class Xe{constructor(){this._isDisposed=!1,this._container=null}dispose(){this._isDisposed=!0,this.container=null}processWidgetMessage(t){if(!t)return null;switch(t.type){case St.RWRWM_USER_CHOOSER:this.processUserChooser();break;case lt.SELECT_OBJECT:this.selectUnit(t)}return null}selectUnit(t){null!=t&&t.category==k.a.UNIT&&this._container.roomEngine.selectRoomObject(this._container.roomSession.roomId,t.id,t.category)}processUserChooser(){if(null==this._container||null==this._container.roomSession||null==this._container.roomEngine||null==this._container.roomSession.userDataManager)return;const t=this._container.roomSession.roomId,e=k.a.UNIT,s=[],n=this._container.roomEngine.getRoomObjectCount(t,e);for(let i=0;i<n;i++){const n=this._container.roomEngine.getRoomObjectByIndex(t,i,e);if(null==n)continue;const r=this._container.roomSession.userDataManager.getUserDataByIndex(n.id);null!=r&&s.push(new Ht(r.roomIndex,e,r.name))}s.sort(Kt("name")),this._container.events.dispatchEvent(new jt(jt.RWCCE_USER_CHOOSER_CONTENT,s))}processEvent(t){}update(){}get disposed(){return this._isDisposed}get type(){return N.a.USER_CHOOSER}set container(t){this._container=t}get messageTypes(){return[St.RWRWM_USER_CHOOSER,lt.SELECT_OBJECT]}get eventTypes(){return[]}}var Ze=s("+LbQ"),Qe=s("i+XF"),Je=s("QjCb"),$e=s("4NUc"),ts=s("KJ3T");let es=(()=>{class t{constructor(t){this._ngZone=t,this._alertCenter=null,this._notificationCenter=null,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages&&this.unregisterMessages(),this._messages=[new Je.a(this.onHabboBroadcastMessageEvent.bind(this)),new Qe.a(this.onModeratorMessageEvent.bind(this)),new $e.a(this.onMOTDNotificationEvent.bind(this)),new Ze.a(this.onNotificationDialogMessageEvent.bind(this)),new ts.a(this.onHotelWillShutdownEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onHabboBroadcastMessageEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this.alert(e.message))}onNotificationDialogMessageEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this.displayNotification(e.type,e.parameters))}onModeratorMessageEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this.alertWithLink(e.message,e.link))}onMOTDNotificationEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this.alertWithScrollableMessages(e.messages))}onHotelWillShutdownEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=u.a.instance.localization.getValueWithParameter("opening.hours.shutdown","m",e.minutes.toString());this._ngZone.run(()=>this.alert(s))}alert(t,e=null){return this._alertCenter?this._alertCenter.alert(t,e):null}alertWithLink(t,e,s=null){return this._alertCenter?this._alertCenter.alertWithLink(t,e,s):null}alertWithConfirm(t,e=null,s=null){return this._alertCenter?this._alertCenter.alertWithConfirm(t,e,s):null}alertWithChoices(t,e,s=null){return this._alertCenter?this._alertCenter.alertWithChoices(t,e,s):null}alertWithScrollableMessages(t,e=null){return this._alertCenter?this._alertCenter.alertWithScrollableMessages(t,e):null}displayNotification(t,e){return this._notificationCenter?this._notificationCenter.displayNotification(t,e):null}closeAlert(t){t&&this._alertCenter&&this._alertCenter.closeAlert(t)}closeNotification(t){t&&this._notificationCenter&&this._notificationCenter.closeNotification(t)}closeAll(){this._alertCenter&&(this._alertCenter.closeAllAlerts(),this._notificationCenter.closeAllNotifications())}get alertCenter(){return this._alertCenter}set alertCenter(t){this._alertCenter=t}get notificationCenter(){return this._notificationCenter}set notificationCenter(t){this._notificationCenter=t}}return t.\u0275fac=function(e){return new(e||t)(n.kc(n.H))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})();var ss=s("q4z0"),ns=s("m7hj"),is=s("WEUE"),rs=s("9Jti"),as=s("XNkd"),os=s("Ahnc"),cs=s("nQsh"),ls=s("29Gn");let hs=(()=>{class t{constructor(t,e){this._settingsService=t,this._ngZone=e,this._messages=[],this._component=null,this._roomSession=null,this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomSessionManager.events.addEventListener(M.a.CREATED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(M.a.STARTED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(M.a.ENDED,this.onRoomSessionEvent),this._messages=[new ns.a(this.onWiredFurniActionEvent.bind(this)),new is.a(this.onWiredFurniConditionEvent.bind(this)),new rs.a(this.onWiredFurniTriggerEvent.bind(this)),new as.a(this.onWiredOpenEvent.bind(this)),new os.a(this.onWiredRewardResultMessageEvent.bind(this)),new cs.a(this.onWiredSaveSuccessEvent.bind(this)),new ls.a(this.onWiredValidationErrorEvent.bind(this)),new ss.a(this.onDesktopViewEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomSessionManager.events.removeEventListener(M.a.CREATED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(M.a.STARTED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(M.a.ENDED,this.onRoomSessionEvent);for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomSessionEvent(t){if(t)switch(t.type){case M.a.CREATED:case M.a.STARTED:return void(this._roomSession=t.session);case M.a.ENDED:return this._roomSession=null,void this._ngZone.run(()=>this._component&&this._component.close())}}onWiredFurniActionEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this._component.setupTrigger(e.definition))}onWiredFurniConditionEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this._component.setupTrigger(e.definition))}onWiredFurniTriggerEvent(t){if(!t||!this._component)return;const e=t.getParser();e&&this._ngZone.run(()=>this._component.setupTrigger(e.definition))}onWiredOpenEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onWiredRewardResultMessageEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onWiredSaveSuccessEvent(t){t&&t.getParser()&&this._ngZone.run(()=>this._component&&this._component.close())}onWiredValidationErrorEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onDesktopViewEvent(t){t&&this._ngZone.run(()=>this._component&&this._component.close())}selectFurniture(t,e){const s=u.a.instance.roomEngine,n=s.getSelectedRoomObjectData(this.roomId);n&&n.id===-t?s.setPlacedRoomObjectData(this.roomId,null):this._component&&this._component.toggleFurniSelected(t,e)}get component(){return this._component}set component(t){this._component=t}get roomId(){return this._roomSession?this._roomSession.roomId:0}}return t.\u0275fac=function(e){return new(e||t)(n.kc(g),n.kc(n.H))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})();var us=s("dwRb"),_s=s("Pox2"),ds=s("kZQz"),gs=s("WM79"),ms=s("YN1x"),ps=s("00eG"),fs=s("t1CI"),Es=s("G3dz"),Ss=s("gOUc"),bs=s("81IQ"),vs=s("X26Z"),Is=s("P0eX"),Rs=s("5+UO"),Ts=s("0/8l");class ys extends Rs.a{constructor(t){super(t,Ts.a)}getParser(){return this.parser}}var Os=s("i/ye"),Cs=s("wW/F"),As=s("YaSm"),Ms=s("I5LT"),ws=s("SzgH"),Us=s("OLXM"),Ds=s("YQyq"),Ns=s("tLSS");let Ls=(()=>{class t{}return t.CALL_FOR_HELP="call_for_help",t.CATALOG_PURCHASE="catalog_purchase",t.CATALOG_DUCKETS="catalog_duckets",t.MESSAGE_SENT="console_message_sent",t.MESSAGE_RECEIVED="console_new_message",t.GUIDE_INVITATION="guide_received_invitation",t.GUIDE_REQUEST="guide_help_requested",t.CAMERA_SHUTTER="camera_shutter",t})(),Ps=(()=>{class t{constructor(t,e,s=0,n=null,i=0){this._type=i,this._senderId=t,this._message=e,this._secondsSinceSent=s,this._extraData=n,this._date=new Date}get type(){return this._type}get senderId(){return this._senderId}get message(){return this._message}get secondsSinceSent(){return this._secondsSinceSent}get extraData(){return this._extraData}get date(){return this._date}}return t.CHAT=0,t.ROOM_INVITE=1,t.STATUS_NOTIFICATION=2,t})();class xs{constructor(){this._id=-1,this._name=null,this._gender=0,this._online=!1,this._followingAllowed=!1,this._figure=null,this._categoryId=0,this._motto=null,this._realName=null,this._lastAccess=null,this._persistedMessageUser=!1,this._vipMember=!1,this._pocketHabboUser=!1,this._relationshipStatus=-1,this._unread=0}populate(t){return!!t&&(this._id=t.id,this._name=t.name,this._gender=t.gender,this._online=t.online,this._followingAllowed=t.followingAllowed,this._figure=t.figure,this._categoryId=t.categoryId,this._motto=t.motto,this._realName=t.realName,this._lastAccess=t.lastAccess,this._persistedMessageUser=t.persistedMessageUser,this._vipMember=t.vipMember,this._pocketHabboUser=t.pocketHabboUser,this._relationshipStatus=t.relationshipStatus,!0)}get id(){return this._id}set id(t){this._id=t}get name(){return this._name}set name(t){this._name=t}get gender(){return this._gender}set gender(t){this._gender=t}get online(){return this._online}set online(t){this._online=t}get followingAllowed(){return this._followingAllowed}set followingAllowed(t){this._followingAllowed=t}get figure(){return this._figure}set figure(t){this._figure=t}get categoryId(){return this._categoryId}set categoryId(t){this._categoryId=t}get motto(){return this._motto}set motto(t){this._motto=t}get lastAccess(){return this._lastAccess}set lastAccess(t){this._lastAccess=t}get realName(){return this._realName}set realName(t){this._realName=t}get persistedMessageUser(){return this._persistedMessageUser}set persistedMessageUser(t){this._persistedMessageUser=t}get vipMember(){return this._vipMember}set vipMember(t){this._vipMember=t}get pocketHabboUser(){return this._pocketHabboUser}set pocketHabboUser(t){this._pocketHabboUser=t}get relationshipStatus(){return this._relationshipStatus}set relationshipStatus(t){this._relationshipStatus=t}get unread(){return this._unread}set unread(t){this._unread=t}}class Fs{populate(t){return!!t&&(this._requestId=t.requestId,this._requesterName=t.requesterName,this._figureString=t.figureString,this._requesterUserId=t.requesterUserId,!0)}get requestId(){return this._requestId}get requesterName(){return this._requesterName}get requesterUserId(){return this._requesterUserId}get figureString(){return this._figureString}}let ks=(()=>{class t{constructor(t){this._participant=t,this._chats=[],this._lastUpdated=new Date,this._unread=!1,this._emitter=new n.r}insertChat(e,s,n=0,i=null,r=0){const a=new Ps(e,s,n,i,r);return this._chats.push(a),this._lastUpdated=new Date,this._unread=!0,this._emitter.emit(t.MESSAGE_RECEIVED),a}setRead(){this._unread=!1}get participant(){return this._participant}get chats(){return this._chats}get lastUpdated(){return this._lastUpdated}get unread(){return this._unread}get emitter(){return this._emitter}}return t.MESSAGE_RECEIVED="MT_MESSAGE_RECEIVED",t})();class Ws{constructor(){this._sentRequests=new Map}getResult(t){for(const e of this._friends)if(e.avatarId===t)return e;for(const e of this._others)if(e.avatarId===t)return e;return null}searchReceived(t,e){this._friends=t,this._others=e}setFriendRequestSent(t){this._sentRequests[t]=!0}isRequestFriend(t){return this._sentRequests[t]}get friends(){return this._friends}get others(){return this._others}}var Bs=s("hTzv"),Vs=s("9L9n"),Gs=s("ScQb");let Ks=(()=>{class t{constructor(t){this._ngZone=t,this._volumeSystem=0,this._volumeFurni=0,this._volumeTrax=0,this._internalSamples=new Bs.a,this._externalSamples=new Bs.a,this._furniSoundObjects=new Bs.a,this.onRoomEngineSamplePlaybackEvent=this.onRoomEngineSamplePlaybackEvent.bind(this),this.onRoomEngineObjectRemovedEvent=this.onRoomEngineObjectRemovedEvent.bind(this),this.onRoomEngineDisposedEvent=this.onRoomEngineDisposedEvent.bind(this),this.onNitroSettingsEvent=this.onNitroSettingsEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomEngine.events.addEventListener(Gs.a.PLAY_SAMPLE,this.onRoomEngineSamplePlaybackEvent),u.a.instance.roomEngine.events.addEventListener(S.a.REMOVED,this.onRoomEngineObjectRemovedEvent),u.a.instance.roomEngine.events.addEventListener(_.a.DISPOSED,this.onRoomEngineDisposedEvent),u.a.instance.events.addEventListener(Vs.a.SETTINGS_UPDATED,this.onNitroSettingsEvent)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomEngine.events.removeEventListener(Gs.a.PLAY_SAMPLE,this.onRoomEngineSamplePlaybackEvent),u.a.instance.roomEngine.events.removeEventListener(S.a.REMOVED,this.onRoomEngineObjectRemovedEvent),u.a.instance.roomEngine.events.addEventListener(_.a.DISPOSED,this.onRoomEngineDisposedEvent),u.a.instance.events.removeEventListener(Vs.a.SETTINGS_UPDATED,this.onNitroSettingsEvent)})}onRoomEngineSamplePlaybackEvent(t){t&&this.playFurniSample(t.objectId,t.sampleId,this._volumeFurni,t.pitch)}onRoomEngineObjectRemovedEvent(t){t&&this.killFurniAudio(t.objectId)}onRoomEngineDisposedEvent(t){t&&this._furniSoundObjects.getKeys().forEach(t=>{this.killFurniAudio(t)})}onNitroSettingsEvent(t){if(!t)return;const e=t.volumeFurni!==this._volumeFurni;this._volumeSystem=t.volumeSystem,this._volumeFurni=t.volumeFurni,this._volumeTrax=t.volumeTrax,e&&this.updateFurniSoundObjectsVolume()}playInternalSample(t){this._internalSamples.hasKey(t)||this._internalSamples.add(t,new Audio("assets/sounds/"+t+".mp3")),this.generateAudio(this._internalSamples.getValue(t),this._volumeSystem).play()}playFurniSample(t,e,s,n=1){if(!this._externalSamples.hasKey(e)){const t=u.a.instance.getConfiguration("external.samples.url");this._externalSamples.add(e,new Audio(t.replace("%sample%",e.toString())))}this.killFurniAudio(t);const i=this.generateAudio(this._externalSamples.getValue(e),s,n);this._furniSoundObjects.add(t,i),i.play()}generateAudio(t,e,s=1){const n=t.cloneNode();return n.volume=e,n}killFurniAudio(t){this._furniSoundObjects.hasKey(t)&&(this._furniSoundObjects.getValue(t).pause(),this._furniSoundObjects.remove(t))}updateFurniSoundObjectsVolume(){this._furniSoundObjects.getKeys().forEach(t=>{this._furniSoundObjects.getValue(t).volume=this._volumeFurni})}}return t.\u0275fac=function(e){return new(e||t)(n.kc(n.H))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})(),Hs=(()=>{class t{constructor(t,e,s){this._notificationService=t,this._soundService=e,this._ngZone=s,this._friendListReady=!1,this._component=null,this._events=new F.a,this._friends=new Map,this._requests=new Map,this._threads=new Map,this._requestFriend=[],this._userFriendLimit=0,this._normalFriendLimit=0,this._extendedFriendLimit=0,this._avatarSearchResults=new Ws,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages&&this.unregisterMessages(),this._messages=[new us.a(this.onAcceptFriendResultEvent.bind(this)),new _s.a(this.onFindFriendsProcessResultEvent.bind(this)),new ds.a(this.onFollowFriendFailedEvent.bind(this)),new gs.a(this.onFriendListFragmentEvent.bind(this)),new ms.a(this.onFriendListUpdateEvent.bind(this)),new ps.a(this.onFriendNotificationEvent.bind(this)),new fs.a(this.onFriendRequestsEvent.bind(this)),new Es.a(this.onHabboSearchResultEvent.bind(this)),new Ss.a(this.onInstantMessageErrorEvent.bind(this)),new bs.a(this.onMessageErrorEvent.bind(this)),new vs.a(this.onMessengerInitEvent.bind(this)),new Is.a(this.onMiniMailNewMessageEvent.bind(this)),new ys(this.onMiniMailUnreadCountEvent.bind(this)),new Os.a(this.onNewConsoleMessageEvent.bind(this)),new Cs.a(this.onNewFriendRequestEvent.bind(this)),new As.a(this.onRoomInviteErrorEvent.bind(this)),new Ms.a(this.onRoomInviteEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(this._messages&&this._messages.length)for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=null})}onAcceptFriendResultEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onFindFriendsProcessResultEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onFollowFriendFailedEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onFriendListFragmentEvent(t){if(!t)return;const e=t.getParser();e&&(this._friendListReady=!1,this._ngZone.run(()=>{for(const t of e.fragment)this.updateFriend(t);e.fragmentNumber+1===e.totalFragments&&(this._friendListReady=!0)}))}onFriendListUpdateEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{for(const t of e.addedFriends)this.updateFriend(t);for(const t of e.updatedFriends)this.updateFriend(t);for(const t of e.removedFriendIds)this.removeFriend(t)})}onFriendNotificationEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onFriendRequestsEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{for(const t of e.requests)this.updateFriendRequest(t)})}onHabboSearchResultEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._avatarSearchResults.searchReceived(e.friends,e.others)})}onInstantMessageErrorEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onMessageErrorEvent(t){if(!t)return;const e=t.getParser();if(!e)return;let s="";switch(e.errorCode){case 1:s="${friendlist.error.friendlistownlimit}";break;case 2:s="${friendlist.error.friendlistlimitofrequester}";break;case 3:s="${friendlist.error.friend_requests_disabled}";break;case 4:s="${friendlist.error.requestnotfound}";break;default:s=`Received messenger error: msg: ${e.clientMessageId}, errorCode: ${e.errorCode}`}this._ngZone.run(()=>this._notificationService.alert(s,"${friendlist.alert.title}"))}onMessengerInitEvent(t){if(!t)return;const e=t.getParser();e&&(this._ngZone.run(()=>{this._userFriendLimit=e.userFriendLimit,this._normalFriendLimit=e.normalFriendLimit,this._extendedFriendLimit=e.extendedFriendLimit}),this.requestFriendRequests())}onMiniMailNewMessageEvent(t){t&&t.getParser()}onMiniMailUnreadCountEvent(t){t&&t.getParser()}onNewConsoleMessageEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=this.getMessageThread(e.senderId);s&&(this._ngZone.run(()=>{s.insertChat(e.senderId,e.messageText,e.secondsSinceSent,e.extraData),this._component&&this._component.currentThread===s&&s.setRead()}),this._soundService.playInternalSample(Ls.MESSAGE_RECEIVED))}onNewFriendRequestEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this.updateFriendRequest(e.request))}onRoomInviteErrorEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onRoomInviteEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=this.getMessageThread(e.senderId);s&&this._ngZone.run(()=>{s.insertChat(e.senderId,e.messageText,0,null,Ps.ROOM_INVITE),this._component&&this._component.currentThread===s&&s.setRead()})}getFriend(t){return this._friends.get(t)||null}updateFriend(t){if(!t)return;let e=this._friends.get(t.id);e||(e=new xs,this._friends.set(t.id,e)),e.populate(t)}removeFriend(t){this._requestFriend=this._requestFriend.filter(e=>e!==t),this._friends.delete(t)}updateFriendRequest(t){if(!t)return;let e=this._requests.get(t.requestId);e||(e=new Fs,this._requests.set(t.requestId,e)),e.populate(t)}acceptFriendRequest(t){this._requests.delete(t.requestId),this._events.dispatchEvent(new X(X.ACCEPTED,t.requestId)),u.a.instance.communication.connection.send(new ws.a(t.requestId))}acceptFriendRequestById(t){this.acceptFriendRequest(this._requests.get(t))}removeFriendRequest(t){this._requests.delete(t.requestId),this._events.dispatchEvent(new X(X.DECLINED,t.requestId)),u.a.instance.communication.connection.send(new Us.a(!1,t.requestId))}removeFriendRequestById(t){this.removeFriendRequest(this._requests.get(t))}removeAllFriendRequests(){for(const t of this._requests.values())t&&this._events.dispatchEvent(new X(X.DECLINED,t.requestId));this._requests.clear(),u.a.instance.communication.connection.send(new Us.a(!0))}getMessageThread(t){let e=this._threads.get(t);if(!e){const s=this.getFriend(t);if(!s)return;e=new ks(s),this._threads.set(t,e),this._soundService.playInternalSample(Ls.MESSAGE_SENT)}return e}requestFriendRequests(){u.a.instance.communication.connection.send(new Ds.a)}canBeAskedForAFriend(t){return!this._friends.get(t)&&!this._requests.get(t)&&!this._requestFriend.includes(t)}sendFriendRequest(t,e){this.canBeAskedForAFriend(t)&&(this._requestFriend.push(t),u.a.instance.communication.connection.send(new Ns.a(e)))}getFriendNames(){const t=[];for(const e of this._friends.values())t.push(e.name);return t}get events(){return this._events}get component(){return this._component}set component(t){this._component=t}get friends(){return this._friends}get requests(){return this._requests}get threads(){return this._threads}get unreadCount(){let t=0;for(const e of this._threads.values())e&&e.unread&&t++;return t}get notificationCount(){return this.requests.size+this.unreadCount}get avatarSearchResults(){return this._avatarSearchResults}}return t.\u0275fac=function(e){return new(e||t)(n.kc(es),n.kc(Ks),n.kc(n.H))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})(),js=(()=>{class t{constructor(t){this._ngZone=t,this._lastRoomId=-1,this._maxHistoryItems=100,this._historyItems=[],this._maxHistoryItems=u.a.instance.getConfiguration("chat.history.max.items",100),this._queuedItems=new Bs.a,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),this._messages=[new Ee.a(this.onRoomInfoEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(this._messages&&this._messages.length){for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]}})}onRoomInfoEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=e.data;this._lastRoomId!==s.roomId&&this._ngZone.run(()=>{this._lastRoomId=s.roomId;const t=new Ct;t.content=e.data.roomName+"",this.addItem(this._lastRoomId,t),this.processQueue(this._lastRoomId)})}addItem(t,e){e&&this._ngZone.run(()=>{if(t===this._lastRoomId)this._historyItems.length>=this._maxHistoryItems&&this._historyItems.shift(),this._historyItems.push(e);else{const s=this.getQueuedSet(t);s&&s.push(e)}})}getQueuedSet(t){let e=this._queuedItems.getValue(t);return e||(e=[],this._queuedItems.add(t,e)),e}processQueue(t){const e=this._queuedItems.getValue(t);if(e){for(const s of e)s&&this.addItem(t,s);this._queuedItems.remove(t)}}get historyItems(){return this._historyItems}}return t.MESSAGE_RECEIVED="CHS_MESSAGE_RECEIVED",t.\u0275fac=function(e){return new(e||t)(n.kc(n.H))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})();var zs=s("w2uK"),Ys=s("B62z"),qs=s("uMJ2");class Xs{constructor(t,e,s=null,n=null){this._id=t,this._username=e,this._figure=s,this._gender=n}get id(){return this._id}get username(){return this._username}get figure(){return this._figure}get gender(){return this._gender}}var Zs=s("e2zs"),Qs=s("iGiK"),Js=s("SRjU"),$s=s("Fq7D"),tn=s("1GrJ"),en=s("8lyl"),sn=s("H/4j");let nn=(()=>{class t{constructor(t,e){this._notificationService=t,this._ngZone=e,this._users=[],this._currentSelectedUser=null,this._showModActionOnUser=!1,this._showVisitedRoomsForUser=!1,this._showSendUserMessage=!1,this._showSendUserChatlogs=!1,this._showRoomTools=!1,this._showRoomChatLogs=!1,this._Str_20687=null,this._component=null,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._messages&&this.unregisterMessages(),this._messages=[new zs.a(this.onRoomInfoEvent.bind(this)),new qs.a(this.onUserInfoEvent.bind(this)),new Zs.a(this.onModtoolUserChatlogEvent.bind(this)),new Qs.a(this.onModtoolRoomChatlogEvent.bind(this)),new Js.a(this.onModToolsCFHCategoriesEvent.bind(this)),new $s.a(this.onModtoolsMainEvent.bind(this)),new tn.a(this.onRoomsReceivedForUserEvent.bind(this)),new en.a(this.onRoomInfoOwnerEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)}unregisterMessages(){if(this._messages&&this._messages.length)for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t)}get component(){return this._component}set component(t){this._component=t}onModtoolsMainEvent(t){if(!t)return;const e=t.getParser();e&&(this._Str_20687=e.data)}onRoomInfoOwnerEvent(t){if(!t)return;const e=t.getParser();e&&(this._currentRoomInfo=e)}onRoomsReceivedForUserEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this._userRoomVisitedData=e.data)}onModToolsCFHCategoriesEvent(t){if(!t)return;const e=t.getParser();e&&(this._callForHelpCategories=e.callForHelpCategories)}onRoomInfoEvent(t){if(!u.a.instance.sessionDataManager.isModerator)return;if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._modToolRoomInfo=e})}onUserInfoEvent(t){const e=t.getParser().userInfo;this._ngZone.run(()=>{this._users.push(new Xs(e.userId,e.username))})}onModtoolUserChatlogEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._roomVisits=e.roomVisits})}onModtoolRoomChatlogEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._userChatlogs=e.chatlogs})}openRoomTool(t=null){this._currentRoomInfo&&(this._modToolRoomInfo=null,u.a.instance.communication.connection.send(new Ys.a(t||this._currentRoomInfo.roomId)),this._showRoomTools=!0)}openChatlogTool(){this._modToolRoomInfo=null,u.a.instance.communication.connection.send(new Ys.a(this._currentRoomInfo.roomId)),u.a.instance.communication.connection.send(new sn.a(this._currentRoomInfo.roomId)),this.showRoomChatLogs=!0}closeUserTool(){this._component&&(this._component.userToolVisible=!1)}closeRoomVisitedTool(){this._showVisitedRoomsForUser=!1}get users(){return this._users}get roomVisits(){return this._roomVisits}get userChatlogs(){return this._userChatlogs}selectUser(t,e,s=null,n=null){this._currentSelectedUser=new Xs(t,e,s,n)}get selectedUser(){return this._currentSelectedUser}get showModActionOnUser(){return this._showModActionOnUser}set showModActionOnUser(t){this._showModActionOnUser=t}get showVisitedRoomsForUser(){return this._showVisitedRoomsForUser}set showVisitedRoomsForUser(t){this._showVisitedRoomsForUser=t}get showSendUserMessage(){return this._showSendUserMessage}set showSendUserMessage(t){this._showSendUserMessage=t}get showSendUserChatlogs(){return this._showSendUserChatlogs}set showSendUserChatlogs(t){this._showSendUserChatlogs=t}get showRoomTools(){return this._showRoomTools}set showRoomTools(t){this._showRoomTools=t}get showRoomChatLogs(){return this._showRoomChatLogs}set showRoomChatLogs(t){this._showRoomChatLogs=t}get callForHelpCategories(){return this._callForHelpCategories}get _Str_3325(){return this._Str_20687}get roomUserVisitedData(){return this._userRoomVisitedData}get currentRoom(){return this._currentRoomInfo}get currentRoomModData(){return this._modToolRoomInfo}}return t.\u0275fac=function(e){return new(e||t)(n.kc(es),n.kc(n.H))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})();var rn=s("r2VG"),an=s("yAmi"),on=s("Ly0c"),cn=s("AUxQ"),ln=s("v12S"),hn=s("38Mq"),un=s("BFtu"),_n=s("3h45"),dn=s("SBJG");let gn=(()=>{class t{constructor(t,e=1){this._previewRoomId=1,this._currentPreviewObjectType=0,this._currentPreviewObjectCategory=0,this._currentPreviewObjectData="",this._currentPreviewRectangle=null,this._currentPreviewCanvasWidth=0,this._currentPreviewCanvasHeight=0,this._currentPreviewScale=64,this._backgroundColor=305148561,this._disableUpdate=!1,this._roomEngine=t,this._planeParser=new un.a,this._previewRoomId=P.makeRoomPreviewerId(e),this._addViewOffset=new d.Point(0,0),this.onRoomObjectAdded=this.onRoomObjectAdded.bind(this),this.onRoomInitializedonRoomInitialized=this.onRoomInitializedonRoomInitialized.bind(this),this.isRoomEngineReady&&this._roomEngine.events&&(this._roomEngine.events.addEventListener(S.a.ADDED,this.onRoomObjectAdded),this._roomEngine.events.addEventListener(S.a.CONTENT_UPDATED,this.onRoomObjectAdded),this._roomEngine.events.addEventListener(_.a.INITIALIZED,this.onRoomInitializedonRoomInitialized)),this.createRoomForPreview()}dispose(){this.reset(!0),this.isRoomEngineReady&&this._roomEngine.events&&(this._roomEngine.events.removeEventListener(S.a.ADDED,this.onRoomObjectAdded),this._roomEngine.events.removeEventListener(S.a.CONTENT_UPDATED,this.onRoomObjectAdded),this._roomEngine.events.removeEventListener(_.a.INITIALIZED,this.onRoomInitializedonRoomInitialized)),this._planeParser&&(this._planeParser.dispose(),this._planeParser=null)}createRoomForPreview(){if(this.isRoomEngineReady){const t=7,e=new un.a;e.initializeTileMap(t+2,t+2);let s=1;for(;s<1+t;){let n=1;for(;n<1+t;)e.setTileHeight(n,s,0),n++;s++}e.initializeFromTileData(),this._roomEngine.createRoomInstance(this._previewRoomId,e.getMapData()),e.dispose()}}reset(e){this.isRoomEngineReady&&(this._roomEngine.removeRoomObjectFloor(this._previewRoomId,t.PREVIEW_OBJECT_ID),this._roomEngine.removeRoomObjectWall(this._previewRoomId,t.PREVIEW_OBJECT_ID),this._roomEngine.removeRoomObjectUser(this._previewRoomId,t.PREVIEW_OBJECT_ID),e||this.updatePreviewRoomView()),this._currentPreviewObjectCategory=k.a.MINIMUM}updatePreviewModel(t,e,s=!0){const n=new on.a;n.flush(),n.parseModel(t,e,s);const i=this._roomEngine.getLegacyWallGeometry(this._previewRoomId);if(!i)return;this._planeParser.reset();const r=n.width,a=n.height;this._planeParser.initializeTileMap(r,a);let o=-1,c=-1,l=0,h=0,u=0;for(;u<a;){let t=0;for(;t<r;){const e=n.getHeight(t,u);(u>0&&u<a-1||t>0&&t<r-1)&&e!=un.a.TILE_BLOCKED&&(n.getHeight(t,u-1)==un.a.TILE_BLOCKED&&n.getHeight(t-1,u)==un.a.TILE_BLOCKED&&n.getHeight(t,u+1)==un.a.TILE_BLOCKED&&(o=t+.5,c=u,l=e,h=90),n.getHeight(t,u-1)==un.a.TILE_BLOCKED&&n.getHeight(t-1,u)==un.a.TILE_BLOCKED&&n.getHeight(t+1,u)==un.a.TILE_BLOCKED&&(o=t,c=u+.5,l=e,h=180)),this._planeParser.setTileHeight(t,u,e),t++}u++}this._planeParser.setTileHeight(Math.floor(o),Math.floor(c),l),this._planeParser.initializeFromTileData(n.wallHeight),this._planeParser.setTileHeight(Math.floor(o),Math.floor(c),l+this._planeParser.wallHeight),i.scale=dn.a.DEFAULT_SCALE,i.initialize(r,a,this._planeParser.floorHeight);let _=n.height-1;for(;_>=0;){let t=n.width-1;for(;t>=0;)i.setHeight(t,_,this._planeParser.getTileHeight(t,_)),t--;_--}const d=this._planeParser.getMapData();d.doors.push({x:o,y:c,z:l,dir:h});const g=this.getRoomPreviewOwnRoomObject();g&&g.processUpdateMessage(new cn.a(d))}addFurnitureIntoRoom(e,s,n=null,i=null){if(n||(n=new ln.a),this.isRoomEngineReady){if(this._currentPreviewObjectCategory===k.a.FLOOR&&this._currentPreviewObjectType===e)return t.PREVIEW_OBJECT_ID;if(this.reset(!1),this._currentPreviewObjectType=e,this._currentPreviewObjectCategory=k.a.FLOOR,this._currentPreviewObjectData="",this._roomEngine.addFurnitureFloor(this._previewRoomId,t.PREVIEW_OBJECT_ID,e,new q.a(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y,0),s,0,n,NaN,-1,0,-1,"",!0,!1)){this._previousAutomaticStateChangeTime=u.a.instance.time,this._automaticStateChange=!0;const e=this._roomEngine.getRoomObject(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory);return e&&i&&e.model.setValue(V.a.FURNITURE_EXTRAS,i),this.updatePreviewRoomView(),t.PREVIEW_OBJECT_ID}}return-1}addWallItemIntoRoom(e,s,n){if(this.isRoomEngineReady){if(this._currentPreviewObjectCategory===k.a.WALL&&this._currentPreviewObjectType===e&&this._currentPreviewObjectData===n)return t.PREVIEW_OBJECT_ID;if(this.reset(!1),this._currentPreviewObjectType=e,this._currentPreviewObjectCategory=k.a.WALL,this._currentPreviewObjectData=n,this._roomEngine.addFurnitureWall(this._previewRoomId,t.PREVIEW_OBJECT_ID,e,new q.a(.5,2.3,1.8),s,0,n,0,0,-1,"",!1))return this._previousAutomaticStateChangeTime=u.a.instance.time,this._automaticStateChange=!0,this.updatePreviewRoomView(),t.PREVIEW_OBJECT_ID}return-1}addAvatarIntoRoom(e,s){return this.isRoomEngineReady?(this.reset(!1),this._currentPreviewObjectType=1,this._currentPreviewObjectCategory=k.a.UNIT,this._currentPreviewObjectData=e,this._roomEngine.addRoomObjectUser(this._previewRoomId,t.PREVIEW_OBJECT_ID,new q.a(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y,0),new q.a(90,0,0),135,hn.a.getTypeNumber(hn.a.USER),e)&&(this._previousAutomaticStateChangeTime=u.a.instance.time,this._automaticStateChange=!0,this.updateUserGesture(1),this.updateUserEffect(s),this.updateUserPosture("std")),this.updatePreviewRoomView(),t.PREVIEW_OBJECT_ID):-1}addPetIntoRoom(e){return this.isRoomEngineReady?(this.reset(!1),this._currentPreviewObjectType=1,this._currentPreviewObjectCategory=k.a.UNIT,this._currentPreviewObjectData=e,this._roomEngine.addRoomObjectUser(this._previewRoomId,t.PREVIEW_OBJECT_ID,new q.a(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y,0),new q.a(90,0,0),90,hn.a.getTypeNumber(hn.a.PET),e)&&(this._previousAutomaticStateChangeTime=u.a.instance.time,this._automaticStateChange=!1,this.updateUserGesture(1),this.updateUserPosture("std")),this.updatePreviewRoomView(),t.PREVIEW_OBJECT_ID):-1}updateUserPosture(e,s=""){this.isRoomEngineReady&&this._roomEngine.updateRoomObjectUserPosture(this._previewRoomId,t.PREVIEW_OBJECT_ID,e,s)}updateUserGesture(e){this.isRoomEngineReady&&this._roomEngine.updateRoomObjectUserGesture(this._previewRoomId,t.PREVIEW_OBJECT_ID,e)}updateUserEffect(e){this.isRoomEngineReady&&this._roomEngine.updateRoomObjectUserEffect(this._previewRoomId,t.PREVIEW_OBJECT_ID,e)}updateObjectUserFigure(e,s=null,n=null,i=!1){return!!this.isRoomEngineReady&&this._roomEngine.updateRoomObjectUserFigure(this._previewRoomId,t.PREVIEW_OBJECT_ID,e,s,n,i)}updateObjectUserAction(e,s,n=null){this.isRoomEngineReady&&this._roomEngine.updateRoomObjectUserAction(this._previewRoomId,t.PREVIEW_OBJECT_ID,e,s,n)}changeRoomObjectState(){this.isRoomEngineReady&&(this._automaticStateChange=!1,this._currentPreviewObjectCategory!==k.a.UNIT&&this._roomEngine.changeObjectState(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory))}changeRoomObjectDirection(){if(this.isRoomEngineReady){const e=this._roomEngine.getRoomObject(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory);if(!e)return;const s=this._roomEngine.objectEventHandler._Str_17555(e,!0);switch(this._currentPreviewObjectCategory){case k.a.FLOOR:{const e=new q.a(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y),n=new q.a(s,s,s);return void this._roomEngine.updateRoomObjectFloor(this._previewRoomId,t.PREVIEW_OBJECT_ID,e,n,null,null)}case k.a.WALL:return}}}checkAutomaticRoomObjectStateChange(){if(this._automaticStateChange){const e=u.a.instance.time;e>this._previousAutomaticStateChangeTime+t.AUTOMATIC_STATE_CHANGE_INTERVAL&&(this._previousAutomaticStateChangeTime=e,this.isRoomEngineReady&&this._roomEngine.changeObjectState(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory))}}getRoomCanvas(e,s){if(this.isRoomEngineReady){const n=this._roomEngine.getRoomInstanceDisplay(this._previewRoomId,t.PREVIEW_CANVAS_ID,e,s,this._currentPreviewScale);if(n&&null!==this._backgroundColor){const t=new d.Sprite(d.Texture.WHITE);t.width=e,t.height=s,t.tint=this._backgroundColor,n.addChildAt(t,0)}this._roomEngine.setRoomInstanceRenderingCanvasMask(this._previewRoomId,t.PREVIEW_CANVAS_ID,!0);const i=this._roomEngine.getRoomInstanceGeometry(this._previewRoomId,t.PREVIEW_CANVAS_ID);return i&&i.adjustLocation(new q.a(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y,0),30),this._currentPreviewCanvasWidth=e,this._currentPreviewCanvasHeight=s,n}return null}modifyRoomCanvas(e,s){this.isRoomEngineReady&&(this._currentPreviewCanvasWidth=e,this._currentPreviewCanvasHeight=s,this._roomEngine.initializeRoomInstanceRenderingCanvas(this._previewRoomId,t.PREVIEW_CANVAS_ID,e,s))}set addViewOffset(t){this._addViewOffset=t}get addViewOffset(){return this._addViewOffset}updatePreviewObjectBoundingRectangle(e){const s=this._roomEngine.getRoomObjectBoundingRectangle(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory,t.PREVIEW_CANVAS_ID);if(s&&e)if(s.x+=-(this._currentPreviewCanvasWidth>>1),s.y+=-(this._currentPreviewCanvasHeight>>1),s.x+=-e.x,s.y+=-e.y,this._currentPreviewRectangle){const t=this._currentPreviewRectangle.clone().enlarge(s);(t.width-this._currentPreviewRectangle.width>this._currentPreviewCanvasWidth-this._currentPreviewRectangle.width>>1||t.height-this._currentPreviewRectangle.height>this._currentPreviewCanvasHeight-this._currentPreviewRectangle.height>>1||this._currentPreviewRectangle.width<1||this._currentPreviewRectangle.height<1)&&(this._currentPreviewRectangle=t)}else this._currentPreviewRectangle=s}validatePreviewSize(e){if(this._currentPreviewRectangle.width<1||this._currentPreviewRectangle.height<1)return e;if(this.isRoomEngineReady){const s=this._roomEngine.getRoomInstanceGeometry(this._previewRoomId,t.PREVIEW_CANVAS_ID);this._currentPreviewRectangle.width>this._currentPreviewCanvasWidth*(1+t.ALLOWED_IMAGE_CUT)||this._currentPreviewRectangle.height>this._currentPreviewCanvasHeight*(1+t.ALLOWED_IMAGE_CUT)?t.ZOOM_ENABLED?.5!==this._roomEngine.getRoomInstanceRenderingCanvasScale(this._previewRoomId,t.PREVIEW_CANVAS_ID)&&(this._roomEngine.setRoomInstanceRenderingCanvasScale(this._previewRoomId,t.PREVIEW_CANVAS_ID,.5,null,null),this._currentPreviewScale=t.SCALE_SMALL,this._currentPreviewNeedsZoomOut=!0,e.x=e.x>>1,e.y=e.y>>1,this._currentPreviewRectangle.x=this._currentPreviewRectangle.x>>2,this._currentPreviewRectangle.y=this._currentPreviewRectangle.y>>2,this._currentPreviewRectangle.width=this._currentPreviewRectangle.width>>2,this._currentPreviewRectangle.height=this._currentPreviewRectangle.height>>2):s.isZoomedIn()&&(s.performZoomOut(),this._currentPreviewScale=t.SCALE_SMALL,this._currentPreviewNeedsZoomOut=!0):this._currentPreviewNeedsZoomOut||(t.ZOOM_ENABLED?1!==this._roomEngine.getRoomInstanceRenderingCanvasScale(this._previewRoomId,t.PREVIEW_CANVAS_ID)&&(this._roomEngine.setRoomInstanceRenderingCanvasScale(this._previewRoomId,t.PREVIEW_CANVAS_ID,1,null,null),this._currentPreviewScale=t.SCALE_NORMAL):s.isZoomedIn()||(s.performZoomIn(),this._currentPreviewScale=t.SCALE_NORMAL))}return e}zoomIn(){this.isRoomEngineReady&&(t.ZOOM_ENABLED?this._roomEngine.setRoomInstanceRenderingCanvasScale(this._previewRoomId,t.PREVIEW_CANVAS_ID,1):this._roomEngine.getRoomInstanceGeometry(this._previewRoomId,t.PREVIEW_CANVAS_ID).performZoomIn()),this._currentPreviewScale=t.SCALE_NORMAL}zoomOut(){this.isRoomEngineReady&&(t.ZOOM_ENABLED?this._roomEngine.setRoomInstanceRenderingCanvasScale(this._previewRoomId,t.PREVIEW_CANVAS_ID,.5):this._roomEngine.getRoomInstanceGeometry(this._previewRoomId,t.PREVIEW_CANVAS_ID).performZoomOut()),this._currentPreviewScale=t.SCALE_SMALL}updateAvatarDirection(e,s){this.isRoomEngineReady&&this._roomEngine.updateRoomObjectUserLocation(this._previewRoomId,t.PREVIEW_OBJECT_ID,new q.a(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y,0),new q.a(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y,0),!1,0,new q.a(45*e,0,0),45*s)}updateObjectRoom(t=null,e=null,s=null,n=!1){return!!this.isRoomEngineReady&&this._roomEngine.updateRoomInstancePlaneType(this._previewRoomId,t,e,s,n)}updateRoomWallsAndFloorVisibility(t,e=!0){this.isRoomEngineReady&&this._roomEngine.updateRoomInstancePlaneVisibility(this._previewRoomId,t,e)}getCanvasOffset(t){if(this._currentPreviewRectangle.width<1||this._currentPreviewRectangle.height<1)return t;let e=-(this._currentPreviewRectangle.left+this._currentPreviewRectangle.right)>>1,s=-(this._currentPreviewRectangle.top+this._currentPreviewRectangle.bottom)>>1;const n=this._currentPreviewCanvasHeight-this._currentPreviewRectangle.height>>1;n>10?s+=Math.min(15,n-10):this._currentPreviewObjectCategory!==k.a.UNIT?s+=5-Math.max(0,n/2):s-=5-Math.min(0,n/2),s+=this._addViewOffset.y,e+=this._addViewOffset.x;const i=e-t.x,r=s-t.y;if(0!==i||0!==r){const n=Math.sqrt(i*i+r*r);return n>10&&(e=t.x+10*i/n,s=t.y+10*r/n),new d.Point(e,s)}return null}updatePreviewRoomView(e=!1){if((!this._disableUpdate||e)&&(this.checkAutomaticRoomObjectStateChange(),this.isRoomEngineReady)){let e=this._roomEngine.getRoomInstanceRenderingCanvasOffset(this._previewRoomId,t.PREVIEW_CANVAS_ID);if(e&&(this.updatePreviewObjectBoundingRectangle(e),this._currentPreviewRectangle)){const s=this._currentPreviewScale;e=this.validatePreviewSize(e);const n=this.getCanvasOffset(e);n&&this._roomEngine.setRoomInstanceRenderingCanvasOffset(this._previewRoomId,t.PREVIEW_CANVAS_ID,n),this._currentPreviewScale!==s&&(this._currentPreviewRectangle=null)}}}set disableUpdate(t){this._disableUpdate=t}set disableRoomEngineUpdate(t){this.isRoomEngineReady&&this._roomEngine.disableUpdate(t)}onRoomInitializedonRoomInitialized(t){if(t)switch(t.type){case _.a.INITIALIZED:return void(t.roomId===this._previewRoomId&&this.isRoomEngineReady&&this._roomEngine.updateRoomInstancePlaneType(this._previewRoomId,"110","99999"))}}onRoomObjectAdded(e){if(e.roomId===this._previewRoomId&&e.objectId===t.PREVIEW_OBJECT_ID&&e.category===this._currentPreviewObjectCategory){this._currentPreviewRectangle=null,this._currentPreviewNeedsZoomOut=!1;const t=this._roomEngine.getRoomObject(e.roomId,e.objectId,e.category);if(t&&t.model&&e.category===k.a.WALL){const s=t.model.getValue(V.a.FURNITURE_SIZE_Z),n=t.model.getValue(V.a.FURNITURE_CENTER_Z);null===s&&null===n||this._roomEngine.updateRoomObjectWallLocation(e.roomId,e.objectId,new q.a(.5,2.3,(3.6-s)/2+n))}}}updateRoomEngine(){this.isRoomEngineReady&&this._roomEngine.runUpdate()}getRenderingCanvas(){return this._roomEngine.getRoomInstanceRenderingCanvas(this._previewRoomId,t.PREVIEW_CANVAS_ID)||null}getGenericRoomObjectImage(t,e,s,n,i,r=0,a=null,o=null,c=-1,l=-1,h=null){return this.isRoomEngineReady?this._roomEngine.getGenericRoomObjectImage(t,e,s,n,i,r,a,o,c,l,h):null}getRoomObjectImage(e,s,n,i=0){return this.isRoomEngineReady?this._roomEngine.getRoomObjectImage(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory,e,s,n,i):null}getRoomObjectCurrentImage(){if(this.isRoomEngineReady){const e=this._roomEngine.getRoomObject(this._previewRoomId,t.PREVIEW_OBJECT_ID,k.a.UNIT);if(e&&e.visualization)return e.visualization.getImage(16777215,-1)}return null}getRoomPreviewObject(){if(this.isRoomEngineReady){const e=this._roomEngine.getRoomObject(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory);if(e)return e}return null}getRoomPreviewOwnRoomObject(){if(this.isRoomEngineReady){const t=this._roomEngine.getRoomObject(this._previewRoomId,_n.a.ROOM_OBJECT_ID,k.a.ROOM);if(t)return t}return null}get isRoomEngineReady(){return this._roomEngine&&this._roomEngine.ready}get roomId(){return this._previewRoomId}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){this._backgroundColor=t}}return t.SCALE_NORMAL=64,t.SCALE_SMALL=32,t.PREVIEW_COUNTER=0,t.PREVIEW_CANVAS_ID=1,t.PREVIEW_OBJECT_ID=1,t.PREVIEW_OBJECT_LOCATION_X=2,t.PREVIEW_OBJECT_LOCATION_Y=2,t.ALLOWED_IMAGE_CUT=.25,t.AUTOMATIC_STATE_CHANGE_INTERVAL=2500,t.ZOOM_ENABLED=!0,t})();window.PIXI=d;const mn=window.PIXI.CanvasRenderer;mn&&(console.warn("REGISTER"),mn.registerPlugin("tilemap",class{constructor(t){this.tileAnim=[0,0],this.dontUseTransform=!1,this.renderer=t,this.tileAnim=[0,0]}}));const pn={maxTextures:16,bufferSize:2048,boundSize:1024,boundCountPerBuffer:1,use32bitIndex:!1,SCALE_MODE:d.SCALE_MODES.LINEAR,DO_CLEAR:!0};var fn=function(t){return t[t.U=0]="U",t[t.V=1]="V",t[t.X=2]="X",t[t.Y=3]="Y",t[t.TileWidth=4]="TileWidth",t[t.TileHeight=5]="TileHeight",t[t.Rotate=6]="Rotate",t[t.AnimX=7]="AnimX",t[t.AnimY=8]="AnimY",t[t.TextureIndex=9]="TextureIndex",t[t.AnimCountX=10]="AnimCountX",t[t.AnimCountY=11]="AnimCountY",t[t.Alpha=12]="Alpha",t[t.YAxis=13]="YAxis",t[t.XAxis=14]="XAxis",t}({});const En=Object.keys(fn).length/2;class Sn extends d.Container{constructor(t,e){super(),this.zIndex=0,this.modificationMarker=0,this._$_localBounds=new PIXI.Bounds,this.shadowColor=new Float32Array([0,0,0,.5]),this._globalMat=null,this.pointsBuf=[],this.hasAnim=!1,this.offsetX=0,this.offsetY=0,this.compositeParent=!1,this.vbId=0,this.vb=null,this.vbBuffer=null,this.vbArray=null,this.vbInts=null,this.initialize(t,e)}initialize(t,e){e?e instanceof Array||!e.baseTexture||(e=[e]):e=[],this.textures=e,this.zIndex=t}clear(){this.pointsBuf.length=0,this.modificationMarker=0,this._$_localBounds.clear(),this.hasAnim=!1}addFrame(t,e,s,n,i){let r,a=0;if("number"==typeof t)a=t,r=this.textures[a];else{r="string"==typeof t?d.Texture.from(t):t;let e=!1;const s=this.textures;for(let t=0;t<s.length;t++)if(s[t].baseTexture===r.baseTexture){a=t,e=!0;break}if(!e)return!1}return this.addRect(a,r.frame.x,r.frame.y,e,s,r.orig.width,r.orig.height,n,i,r.rotate),!0}addRect(t,e,s,n,i,r,a,o=0,c=0,l=0,h=1024,u=1024,_=1,d,g){const m=this.pointsBuf;return this.hasAnim=this.hasAnim||o>0||c>0,m.push(e),m.push(s),m.push(n),m.push(i),m.push(r),m.push(a),m.push(l),m.push(0|o),m.push(0|c),m.push(t),m.push(h),m.push(u),m.push(_),m.push(d),m.push(g),this._$_localBounds.addFramePad(n,i,n+r,i+a,0,0),this}tileRotate(t){const e=this.pointsBuf;e[e.length-(En-fn.TextureIndex)]=t}tileAnimX(t,e){const s=this.pointsBuf;s[s.length-(En-fn.AnimX)]=t,s[s.length-(En-fn.AnimCountX)]=e}tileAnimY(t,e){const s=this.pointsBuf;s[s.length-(En-fn.AnimY)]=t,s[s.length-(En-fn.AnimCountY)]=e}tileAlpha(t){const e=this.pointsBuf;e[e.length-(En-fn.Alpha)]=t}renderCanvas(t){if(!t.plugins.tilemap.dontUseTransform){const e=this.worldTransform;t.context.setTransform(e.a,e.b,e.c,e.d,e.tx*t.resolution,e.ty*t.resolution)}this.renderCanvasCore(t)}renderCanvasCore(t){if(0===this.textures.length)return;const e=this.pointsBuf;t.context.fillStyle="#000000";for(let s=0,n=e.length;s<n;s+=En){let n=e[s+fn.U],i=e[s+fn.V];const r=e[s+fn.X],a=e[s+fn.Y],o=e[s+fn.TileWidth],c=e[s+fn.TileHeight];n+=e[s+fn.AnimX]*t.plugins.tilemap.tileAnim[0],i+=e[s+fn.AnimY]*t.plugins.tilemap.tileAnim[1];const l=e[s+fn.TextureIndex],h=e[s+fn.Alpha];l>=0?(t.context.globalAlpha=h,t.context.drawImage(this.textures[l].baseTexture.getDrawableSource(),n,i,o,c,r,a,o,c)):(t.context.globalAlpha=.5,t.context.fillRect(r,a,o,c),t.context.globalAlpha=1),t.context.globalAlpha=1}}destroyVb(){this.vb&&(this.vb.destroy(),this.vb=null)}render(t){const e=t.plugins.tilemap,s=e.getShader();t.batch.setObjectRenderer(e),this._globalMat=s.uniforms.projTransMatrix,t.globalUniforms.uniforms.projectionMatrix.copyTo(this._globalMat).append(this.worldTransform),s.uniforms.shadowColor=this.shadowColor,s.uniforms.animationFrame=e.tileAnim,this.renderWebGLCore(t,e)}renderWebGLCore(t,e){const s=this.pointsBuf;if(0===s.length)return;const n=s.length/En,i=e.getShader(),r=this.textures;if(0===r.length)return;e.bindTextures(t,i,r),t.shader.bind(i,!1);let a=this.vb;a||(a=e.createVb(),this.vb=a,this.vbId=a.id,this.vbBuffer=null,this.modificationMarker=0),e.checkIndexBuffer(n,a);const o=pn.boundCountPerBuffer,c=a.getBuffer("aVertexPosition"),l=n*a.vertPerQuad;if(0!==l){if(this.modificationMarker!==l){this.modificationMarker=l;const t=a.stride*l;if(!this.vbBuffer||this.vbBuffer.byteLength<t){
//!@#$ happens, need resize
let e=a.stride;for(;e<t;)e*=2;this.vbBuffer=new ArrayBuffer(e),this.vbArray=new Float32Array(this.vbBuffer),this.vbInts=new Uint32Array(this.vbBuffer),c.update(this.vbBuffer)}const e=this.vbArray;let n=0,i=0,r=this.offsetX,h=this.offsetY;for(let a=0;a<s.length;a+=En){const t=.5;if(this.compositeParent){const t=s[a+fn.TextureIndex];o>1?(i=t>>2,r=this.offsetX*(1&t),h=this.offsetY*(t>>1&1)):(i=t,r=0,h=0)}const c=s[a+fn.X],l=s[a+fn.Y],u=s[a+fn.TileWidth],_=s[a+fn.TileHeight],g=s[a+fn.U]+r,m=s[a+fn.V]+h;let p=s[a+fn.Rotate];const f=s[a+fn.AnimX]+2048*(s[a+fn.AnimCountX]||1024),E=s[a+fn.AnimY]+2048*(s[a+fn.AnimCountY]||1024),S=s[a+fn.Alpha];let b,v,I,R,T,y,O,C;if(0===p)b=g,v=m,I=g+u,R=m,T=g+u,y=m+_,O=g,C=m+_;else{let t=u/2,e=_/2;p%4!=0&&(t=_/2,e=u/2);const s=g+t,n=m+e;p=d.groupD8.add(p,d.groupD8.NW),b=s+t*d.groupD8.uX(p),v=n+e*d.groupD8.uY(p),p=d.groupD8.add(p,2),I=s+t*d.groupD8.uX(p),R=n+e*d.groupD8.uY(p),p=d.groupD8.add(p,2),T=s+t*d.groupD8.uX(p),y=n+e*d.groupD8.uY(p),p=d.groupD8.add(p,2),O=s+t*d.groupD8.uX(p),C=n+e*d.groupD8.uY(p)}const A=!0;e[n++]=c,e[n++]=l,e[n++]=b,e[n++]=v,e[n++]=g+t,e[n++]=m+t,e[n++]=g+u-t,e[n++]=m+_-t,e[n++]=f,e[n++]=E,e[n++]=i,A&&(e[n++]=S),e[n++]=c+u,e[n++]=l,e[n++]=I,e[n++]=R,e[n++]=g+t,e[n++]=m+t,e[n++]=g+u-t,e[n++]=m+_-t,e[n++]=f,e[n++]=E,e[n++]=i,A&&(e[n++]=S),e[n++]=c+u,e[n++]=l+_,e[n++]=T,e[n++]=y,e[n++]=g+t,e[n++]=m+t,e[n++]=g+u-t,e[n++]=m+_-t,e[n++]=f,e[n++]=E,e[n++]=i,A&&(e[n++]=S),e[n++]=c,e[n++]=l+_,e[n++]=O,e[n++]=C,e[n++]=g+t,e[n++]=m+t,e[n++]=g+u-t,e[n++]=m+_-t,e[n++]=f,e[n++]=E,e[n++]=i,A&&(e[n++]=S)}c.update(e)}t.geometry.bind(a,i),t.geometry.draw(d.DRAW_MODES.TRIANGLES,6*n,0)}}isModified(t){return!!(this.modificationMarker!==this.pointsBuf.length||t&&this.hasAnim)}clearModify(){this.modificationMarker=this.pointsBuf.length}_calculateBounds(){const{minX:t,minY:e,maxX:s,maxY:n}=this._$_localBounds;this._bounds.addFrame(this.transform,t,e,s,n)}getLocalBounds(t){return 0===this.children.length?this._$_localBounds.getRectangle(t):super.getLocalBounds.call(this,t)}destroy(t){super.destroy(t),this.destroyVb()}}class bn extends d.Container{constructor(t,e,s,n){super(),this.modificationMarker=0,this.shadowColor=new Float32Array([0,0,0,.5]),this._globalMat=null,this._lastLayer=null,this.initialize.apply(this,arguments)}initialize(t,e,s,n){!0===s&&(s=0),this.z=this.zIndex=t,this.alpha=null!=n?n:1,this.texPerChild=s||pn.boundCountPerBuffer*pn.maxTextures,e&&this.setBitmaps(e)}setBitmaps(t){for(let r=0;r<t.length;r++)if(t[r]&&!t[r].baseTexture)throw new Error("pixi-tilemap cannot use destroyed textures. Probably, you passed resources['myAtlas'].texture in pixi > 5.2.1, it does not exist there.");const e=this.texPerChild,s=this.children.length,n=Math.ceil(t.length/e);let i;for(i=0;i<s;i++)this.children[i].textures=t.slice(i*e,(i+1)*e);for(i=s;i<n;i++){const s=new Sn(this.zIndex,t.slice(i*e,(i+1)*e));s.compositeParent=!0,s.offsetX=pn.boundSize,s.offsetY=pn.boundSize,this.addChild(s)}}clear(){for(let t=0;t<this.children.length;t++)this.children[t].clear();this.modificationMarker=0}addRect(t,e,s,n,i,r,a,o,c,l,h,u,_){const d=t/this.texPerChild>>0,g=t%this.texPerChild;return this.children[d]&&this.children[d].textures?(this._lastLayer=this.children[d],this._lastLayer.addRect(g,e,s,n,i,r,a,o,c,l,h,u,this.worldAlpha*(null!=_?_:1))):this._lastLayer=null,this}tileRotate(t){return this._lastLayer&&this._lastLayer.tileRotate(t),this}tileAnimX(t,e){return this._lastLayer&&this._lastLayer.tileAnimX(t,e),this}tileAnimY(t,e){return this._lastLayer&&this._lastLayer.tileAnimY(t,e),this}addFrame(t,e,s,n,i,r,a,o,c,l){let h,u=null,_=0;const g=this.children;if(this._lastLayer=null,"number"==typeof t){if(u=g[t/this.texPerChild>>0],u)_=t%this.texPerChild;else{if(u=g[0],!u)return this;_=0}h=u.textures[_]}else{h="string"==typeof t?d.Texture.from(t):t;for(let t=0;t<g.length;t++){const e=g[t],s=e.textures;for(let t=0;t<s.length;t++)if(s[t].baseTexture===h.baseTexture){u=e,_=t;break}if(u)break}if(!u){for(let t=0;t<g.length;t++){const e=g[t];if(e.textures.length<this.texPerChild){u=e,_=e.textures.length,e.textures.push(h);break}}u||(u=new Sn(this.zIndex,h),u.compositeParent=!0,u.offsetX=pn.boundSize,u.offsetY=pn.boundSize,this.addChild(u),_=0)}}return this._lastLayer=u,u.addRect(_,h.frame.x,h.frame.y,e,s,h.orig.width,h.orig.height,n,i,h.rotate,r,a,this.worldAlpha*(null!=o?o:1),c,l),this}renderCanvas(t){if(!this.visible||this.worldAlpha<=0||!this.renderable)return;if(!t.plugins.tilemap.dontUseTransform){const e=this.worldTransform;t.context.setTransform(e.a,e.b,e.c,e.d,e.tx*t.resolution,e.ty*t.resolution)}const e=this.children;for(let s=0;s<e.length;s++)e[s].renderCanvasCore(t)}render(t){if(!this.visible||this.worldAlpha<=0||!this.renderable)return;const e=t.plugins.tilemap,s=e.getShader();t.batch.setObjectRenderer(e),this._globalMat=s.uniforms.projTransMatrix,t.globalUniforms.uniforms.projectionMatrix.copyTo(this._globalMat).append(this.worldTransform),s.uniforms.shadowColor=this.shadowColor,s.uniforms.animationFrame=e.tileAnim,t.shader.bind(s,!1);const n=this.children;for(let i=0;i<n.length;i++)n[i].renderWebGLCore(t,e)}isModified(t){const e=this.children;if(this.modificationMarker!==e.length)return!0;for(let s=0;s<e.length;s++)if(e[s].isModified(t))return!0;return!1}clearModify(){const t=this.children;this.modificationMarker=t.length;for(let e=0;e<t.length;e++)t[e].clearModify()}}var vn=s("wp0G");class In extends vn.P.Resource{constructor(t){super(t.bufferSize,t.bufferSize),this.DO_CLEAR=!1,this.boundSize=0,this._clearBuffer=null,this.baseTex=null,this.boundSprites=[],this.dirties=[];const e=this.boundSprites,s=this.dirties;this.boundSize=t.boundSize;for(let n=0;n<t.boundCountPerBuffer;n++){const i=new d.Sprite;i.position.x=t.boundSize*(1&n),i.position.y=t.boundSize*(n>>1),e.push(i),s.push(0)}this.DO_CLEAR=!!t.DO_CLEAR}bind(t){if(this.baseTex)throw new Error("Only one baseTexture is allowed for this resource!");this.baseTex=t,super.bind(t)}setTexture(t,e){const s=this.boundSprites[t];s.texture.baseTexture!==e.baseTexture&&(s.texture=e,this.baseTex.update(),this.dirties[t]=this.baseTex.dirtyId)}}function Rn(t,e){const s=[];for(let i=0;i<e;i++)s[i]=i;t.uniforms.uSamplers=s;const n=[];for(let i=0;i<e;i++)n.push(1/pn.bufferSize),n.push(1/pn.bufferSize);t.uniforms.uSamplerSize=n}class Tn extends d.Shader{constructor(t,e,s){super(new PIXI.Program(e,s),{animationFrame:new Float32Array(2),uSamplers:[],uSamplerSize:[],projTransMatrix:new d.Matrix}),this.maxTextures=0,this.maxTextures=t,Rn(this,this.maxTextures)}}class yn extends Tn{constructor(t){super(t,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aFrame;\nattribute vec2 aAnim;\nattribute float aTextureId;\nattribute float aAlpha;\n\nuniform mat3 projTransMatrix;\nuniform vec2 animationFrame;\n\nvarying vec2 vTextureCoord;\nvarying float vTextureId;\nvarying vec4 vFrame;\nvarying float vAlpha;\n\nvoid main(void){\n   gl_Position = vec4((projTransMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vec2 animCount = floor((aAnim + 0.5) / 2048.0);\n   vec2 animFrameOffset = aAnim - animCount * 2048.0;\n   vec2 animOffset = animFrameOffset * floor(mod(animationFrame + 0.5, animCount));\n\n   vTextureCoord = aTextureCoord + animOffset;\n   vFrame = aFrame + vec4(animOffset, animOffset);\n   vTextureId = aTextureId;\n   vAlpha = aAlpha;\n}\n",function(t,e){return"\nvarying vec2 vTextureCoord;\nvarying vec4 vFrame;\nvarying float vTextureId;\nvarying float vAlpha;\nuniform vec4 shadowColor;\nuniform sampler2D uSamplers[%count%];\nuniform vec2 uSamplerSize[%count%];\n\nvoid main(void){\n\n\n   vec2 textureCoord = clamp(vTextureCoord, vFrame.xy, vFrame.zw);\n   float textureId = floor(vTextureId + 0.5);\n\n   vec4 color;\n   vec3 tint = vec3(1, 0.8, 0.5);  // reddish\n   %forloop%\n  gl_FragColor = (color * vAlpha) + (gl_FragColor * (1.0 - vAlpha));\n}\n".replace(/%count%/gi,t+"").replace(/%forloop%/gi,function(t){let e="";e+="\n",e+="\n",e+="if(vTextureId <= -1.0) {",e+="\n\tcolor = shadowColor;",e+="\n}";for(let s=0;s<t;s++)e+="\nelse ",s<t-1&&(e+="if(textureId == "+s+".0)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+s+"], textureCoord * uSamplerSize["+s+"]);",e+="\n}";return e+="\n",e+="\n",e}(t))}(t)),Rn(this,this.maxTextures)}}class On extends d.Geometry{constructor(){super(),this.vertSize=12,this.vertPerQuad=4,this.stride=4*this.vertSize,this.lastTimeAccess=0;const t=this.buf=new d.Buffer(new Float32Array(2),!0,!1);this.addAttribute("aVertexPosition",t,0,!1,0,this.stride,0).addAttribute("aTextureCoord",t,0,!1,0,this.stride,8).addAttribute("aFrame",t,0,!1,0,this.stride,16).addAttribute("aAnim",t,0,!1,0,this.stride,32).addAttribute("aTextureId",t,0,!1,0,this.stride,40).addAttribute("aTextureId",t,0,!1,0,this.stride,40).addAttribute("aAlpha",t,0,!1,0,this.stride,44)}}d.Renderer.registerPlugin("tilemap",class extends d.ObjectRenderer{constructor(t){super(t),this.sn=-1,this.indexBuffer=null,this.ibLen=0,this.tileAnim=[0,0],this.texLoc=[],this.texResources=[],this.rectShader=new yn(pn.maxTextures),this.indexBuffer=new d.Buffer(void 0,!0,!0),this.checkIndexBuffer(2e3),this.initBounds()}initBounds(){if(pn.boundCountPerBuffer<=1)return;const t=pn.maxTextures;for(let e=0;e<t;e++){const t=new In(pn),e=new d.BaseTexture(t);e.scaleMode=pn.SCALE_MODE,e.wrapMode=d.WRAP_MODES.CLAMP,this.texResources.push(t)}}bindTexturesWithoutRT(t,e,s){const n=e.uniforms.uSamplerSize;this.texLoc.length=0;for(let i=0;i<s.length;i++){const e=s[i];if(!e||!e.valid)return;t.texture.bind(s[i],i),n[2*i]=1/s[i].baseTexture.width,n[2*i+1]=1/s[i].baseTexture.height}e.uniforms.uSamplerSize=n}bindTextures(t,e,s){const n=s.length;if(n>pn.boundCountPerBuffer*pn.maxTextures)return;if(pn.boundCountPerBuffer<=1)return void this.bindTexturesWithoutRT(t,e,s);let i=0;for(;i<n;i++){const t=s[i];t&&t.valid&&this.texResources[i>>2].setTexture(3&i,t)}const r=i+3>>2;for(i=0;i<r;i++)t.texture.bind(this.texResources[i].baseTex,i)}start(){}createVb(){const t=new On;return t.addIndex(this.indexBuffer),t.lastTimeAccess=Date.now(),t}checkIndexBuffer(t,e=null){const s=6*t;if(s<=this.ibLen)return;let n=s;for(;n<s;)n<<=1;this.ibLen=s,this.indexBuffer.update(PIXI.utils.createIndicesForQuads(t,pn.use32bitIndex?new Uint32Array(6*t):void 0))}getShader(){return this.rectShader}destroy(){super.destroy(),this.rectShader=null}});var Cn=s("XNiG"),An=s("Kj3r"),Mn=s("/uUt"),wn=s("Cyol"),Un=s("v66B"),Dn=s("mQ1q"),Nn=s("bmMM"),Ln=s("CzV9"),Pn=s("4R/C");class xn{constructor(){this.heightMap=[],this.heightMapString=null,this.doorX=0,this.doorY=0,this.doorDirection=0,this.thicknessWall=0,this.thicknessFloor=0}}class Fn{constructor(t,e){this.height=t,this.blocked=e}}let kn=(()=>{class t{constructor(t,e){this._ngZone=t,this._settingsService=e,this._maxFloorLength=64,this._tileSize=32,this._colorMap={x:"0x101010",0:"0x0065ff",1:"0x0091ff",2:"0x00bcff",3:"0x00e8ff",4:"0x00ffea",5:"0x00ffbf",6:"0x00ff93",7:"0x00ff68",8:"0x00ff3d",9:"0x19ff00",a:"0x44ff00",b:"0x70ff00",c:"0x9bff00",d:"0xf2ff00",e:"0xffe000",f:"0xffb500",g:"0xff8900",h:"0xff5e00",i:"0xff3200",j:"0xff0700",k:"0xff0023",l:"0xff007a",m:"0xff00a5",n:"0xff00d1",o:"0xff00fc",p:"0xd600ff",q:"0xaa00ff"},this._heightScheme="x0123456789abcdefghijklmnopq",this._updates=0,this._showImportExport=!1,this._lastUsedTile={x:-1,y:-1},this.preveiwerUpdate=new Cn.a,this.component=null,this._messages=[],this._model=null,this._doorX=0,this._doorY=0,this._doorDirection=0,this._blockedTilesMap=[],this._thicknessWall=0,this._thicknessFloor=0,this._doorSettingsReceived=!1,this._blockedTilesMapReceived=!1,this._RoomThicknessReceived=!1,this._changesMade=!1,this.registerMessages(),this.loader=new d.Loader,this.loader.add("atlas","assets/images/floorplaneditor/tiles.json"),this.loader.load(),this.preveiwerUpdate.pipe(Object(An.a)(500),Object(Mn.a)()).subscribe(t=>{this.updatePreviewer()})}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),u.a.instance.roomEngine.events.addEventListener(_.a.DISPOSED,this.onRoomEngineDisposedEvent.bind(this)),this._messages=[new Nn.a(this.onRoomModelEvent.bind(this)),new Dn.a(this.onRoomDoorEvent.bind(this)),new Un.a(this.onRoomBlockedTilesEvent.bind(this)),new Ln.a(this.onRoomThicknessEvent.bind(this)),new wn.a(this.onRoomRightsEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(u.a.instance.roomEngine.events.removeEventListener(_.a.DISPOSED,this.onRoomEngineDisposedEvent.bind(this)),this._messages&&this._messages.length){for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]}})}onRoomEngineDisposedEvent(t){t&&this.component&&this.component.close()}onRoomRightsEvent(t){if(!this._settingsService.floorPlanVisible)return;if(!(t instanceof wn.a))return;const e=t.getParser();e&&this._ngZone.run(()=>{this._settingsService.floorPlanVisible=e.controllerLevel>=K.a.ROOM_OWNER})}onRoomModelEvent(t){if(!t)return;const e=t.getParser();e&&(this._model=e.model,this._wallHeight=e.wallHeight+1,u.a.instance.communication.connection.send(new an.a),u.a.instance.communication.connection.send(new rn.a),this.tryEmit())}onRoomDoorEvent(t){if(!t)return;const e=t.getParser();e&&(this._doorX=e.x,this._doorY=e.y,this._doorDirection=e.direction,this._doorSettingsReceived=!0,this.tryEmit())}onRoomBlockedTilesEvent(t){if(!t)return;const e=t.getParser();e&&(this._blockedTilesMap=e.blockedTilesMap,this._blockedTilesMapReceived=!0,this.tryEmit())}onRoomThicknessEvent(t){if(!t)return;const e=t.getParser();e&&(this._thicknessFloor=this.convertSettingnToNumber(e.thicknessFloor),this._thicknessWall=this.convertSettingnToNumber(e.thicknessWall),this._RoomThicknessReceived=!0,this.tryEmit())}reset(){this._model=null,this._doorSettingsReceived=!1,this._blockedTilesMapReceived=!1}tryEmit(){this.component&&this.component.visible&&this._model&&this._doorSettingsReceived&&this._blockedTilesMapReceived&&this._ngZone.run(()=>this.component.init(this._model,this._blockedTilesMap,this._doorX,this._doorY,this._doorDirection,this._thicknessWall,this._thicknessFloor))}render(){this.tryEmit()}save(t){u.a.instance.communication.connection.send(new Pn.a(t.heightMapString,t.doorX,t.doorY,t.doorDirection,this.convertNumbersForSaving(t.thicknessWall),this.convertNumbersForSaving(t.thicknessFloor),this._wallHeight-1)),this.reset()}convertNumbersForSaving(t){switch(t=parseInt(t.toString())){case 0:return-2;case 1:return-1;case 3:return 1;default:return 0}}clear(){this._floorMapSettings=new xn,this.__originalFloorMapSettings=new xn,this._highestX=0,this._highestY=0,this._coloredTilesCount=0,this._isHolding=!1,this._blockedTilesMap=[],this._changesMade=!1,this._currentAction="set",this._currentHeight=this._heightScheme[1]}generateTileMapString(){if("x"===this.floorMapSettings.heightMap[this._highestY][this._highestX].height){this._highestX=-1,this._highestY=-1;for(let t=this._maxFloorLength-1;t>=0;t--)if(this.floorMapSettings.heightMap[t])for(let e=this._maxFloorLength-1;e>=0;e--)this.floorMapSettings.heightMap[t][e]&&"x"!==this.floorMapSettings.heightMap[t][e].height&&(e>this._highestX&&(this._highestX=e),t>this._highestY&&(this._highestY=t))}const t=[];for(let e=0;e<=this._highestY;e++){const s=[];for(let t=0;t<=this._highestX;t++)s[t]=this.floorMapSettings.heightMap[e][t].height;t[e]=s.join("")}return t.join("\r")}readTileMapString(t){let e=t.split("\r");const s=[];let n=0,i=0;for(;n<e.length;){if(0===e[n].length){n--,e=e.splice(n,1);continue}const t=e[n].split("");for(s[n]=[],i=0;i<t.length;)s[n][i]=new Fn(t[i],this._blockedTilesMap[n]&&this._blockedTilesMap[n][i]||!1),i++;for(;i<this._maxFloorLength;)s[n][i]=new Fn("x",!1),i++;n++}for(;n<this._maxFloorLength;){for(s[n]=[],i=0;i<this._maxFloorLength;)s[n][i]=new Fn("x",!1),i++;n++}return this._highestY=s.length-1,this._highestX=s[this._highestY].length-1,s}convertSettingnToNumber(t){switch(t){case.25:return 0;case.5:return 1;case 2:return 3;default:return 2}}renderTileMap(){this.component.tileMap.clear();let e=0;for(let s=0;s<this.floorMapSettings.heightMap.length;s++)for(let n=0;n<this.floorMapSettings.heightMap[s].length;n++){let i=!1;n===this.floorMapSettings.doorX&&s===this.floorMapSettings.doorY&&(i=!0);let r=this.floorMapSettings.heightMap[s][n].height;i&&(r=t.TILE_DOOR),"x"!==r&&e++;const a=n*this._tileSize/2-s*this._tileSize/2,o=n*this._tileSize/4+s*this._tileSize/4;this._ngZone.runOutsideAngular(()=>{this.component.tileMap.addFrame(r+".png",a+1024,o,null,null,null,null,1,s,n)})}this._ngZone.run(()=>this._coloredTilesCount=e),this._updates++,this.preveiwerUpdate.next(this._updates.toString())}updatePreviewer(){this._ngZone.run(()=>this.floorMapSettings.heightMapString=this.generateTileMapString())}handleTileClick(t,e){const s=this.floorMapSettings.heightMap[e][t],n=this._heightScheme.indexOf(s.height);let i=0;switch(this._currentAction){case"door":return void("x"!=s.height&&(this.floorMapSettings.doorX=t,this.floorMapSettings.doorY=e,this._changesMade=!0,this.renderTileMap()));case"up":i=n+1;break;case"down":i=n-1;break;case"set":i=this._heightScheme.indexOf(this._currentHeight);break;case"unset":i=0}if(-1===i)return;if(n===i)return;i>0&&(t>this.highestX&&(this.highestX=t),e>this.highestY&&(this.highestY=e));const r=this._heightScheme[i];r&&(this.floorMapSettings.heightMap[e][t].height=r,this._changesMade=!0,this.renderTileMap())}revertChanges(){this._ngZone.runOutsideAngular(()=>{this._floorMapSettings=JSON.parse(JSON.stringify(this.__originalFloorMapSettings)),this.renderTileMap()}),this._changesMade=!1}set floorMapSettings(t){this._floorMapSettings=t}get floorMapSettings(){return this._floorMapSettings}set originalMapSettings(t){this.__originalFloorMapSettings=JSON.parse(JSON.stringify(t))}get originalMapSettings(){return this.__originalFloorMapSettings}get highestY(){return this._highestY}set highestY(t){this._highestY=t}get highestX(){return this._highestX}set highestX(t){this._highestX=t}get maxTilesCount(){return this._maxFloorLength*this._maxFloorLength}decrementDoorDirection(){0===this.floorMapSettings.doorDirection?this.floorMapSettings.doorDirection=7:this.floorMapSettings.doorDirection--}incrementDoorDirection(){7===this.floorMapSettings.doorDirection?this.floorMapSettings.doorDirection=0:this.floorMapSettings.doorDirection++}decrementWallheight(){0===this.wallHeight?this.wallHeight=16:this.wallHeight--}incrementWallheight(){16===this.wallHeight?this.wallHeight=0:this.wallHeight++}get coloredTilesCount(){return this._coloredTilesCount}get tileSize(){return this._tileSize}get currentAction(){return this._currentAction}set currentAction(t){this._currentAction=t}get currentHeight(){return this._currentHeight}set currentHeight(t){this._currentHeight=t}get colorMap(){return this._colorMap}get blockedTilesMap(){return this._blockedTilesMap}set blockedTilesMap(t){this._blockedTilesMap=t}decrementHeight(){const t=this._heightScheme.indexOf(this.currentHeight);1!==t&&this.selectHeight(this._heightScheme[t-1])}selectHeight(t){this.currentHeight=t,this.currentAction="set"}incrementHeight(){const t=this._heightScheme.indexOf(this.currentHeight);t!==this._heightScheme.length-1&&this.selectHeight(this._heightScheme[t+1])}get changesMade(){return this._changesMade}get wallHeight(){return this._wallHeight}set wallHeight(t){this._wallHeight=t}detectPoints(){const t=this.component.tileMap,e=new d.Point;t.containsPoint=s=>(t.worldTransform.applyInverse(s,e),this.tileHitDettection(t,e,!1)),t.on("pointerup",()=>{this._isHolding=!1}),t.on("pointerout",()=>{this._isHolding=!1}),t.on("pointerdown",e=>{e.data.originalEvent instanceof PointerEvent&&2!==e.data.originalEvent.button&&this.tileHitDettection(t,e.data.global,!0)}),t.on("click",e=>{e.data.originalEvent instanceof PointerEvent&&2!==e.data.originalEvent.button&&this.tileHitDettection(t,e.data.global,!0,!0)})}tileHitDettection(t,e,s,n=!1){const i=t.children[0].pointsBuf,r=En,a=i.length;s&&(this._isHolding=!0);for(let o=0;o<a;o+=r){const t=i.slice(o,o+r),s=t[4],a=t[5],c=Math.floor(e.x),l=Math.floor(e.y),h=t[3]+a/2;if(Math.abs(c-(t[2]+s/2)-2)/(.5*s)+Math.abs(l-h-2)/(.5*a)<=1){if(this._isHolding){const e=t[13],s=t[14];n?this.handleTileClick(s,e):this._lastUsedTile.x==s&&this._lastUsedTile.y==e||(this._lastUsedTile={x:s,y:e},this.handleTileClick(s,e))}return!0}}return!1}get showImportExport(){return this._showImportExport}set showImportExport(t){this._showImportExport=t}}return t.TILE_BLOCKED="r_blocked",t.TILE_DOOR="r_door",t.\u0275fac=function(e){return new(e||t)(n.kc(n.H),n.kc(g))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})();var Wn=s("3md2");let Bn=(()=>{class t{constructor(t){this._ngZone=t,this._userId=-1,this._userName=null,this._figure=null,this._gender=null,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new qs.a(this.onUserInfoEvent.bind(this)),new Wn.a(this.onUserFigureEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onUserInfoEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=e.userInfo;this._ngZone.run(()=>{this._userId=s.userId,this._userName=s.username,this._figure=s.figure,this._gender=s.gender})}onUserFigureEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._figure=e.figure,this._gender=e.gender})}get userId(){return this._userId}get userName(){return this._userName}get figure(){return this._figure}get gender(){return this._gender}}return t.\u0275fac=function(e){return new(e||t)(n.kc(n.H))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})();const Vn=["floorplanElement"],Gn=["floorplanPreviewer"],Kn=function(t){return{selected:t}},Hn=function(t){return{backgroundColor:t}};function jn(t,e){if(1&t){const t=n.ec();n.dc(0,"button",40),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc(2).selectHeight(s.key)}),n.cc()}if(2&t){const t=e.$implicit,s=n.qc(2);n.yc("ngClass",n.Cc(2,Kn,s.currentHeight===t.key))("ngStyle",n.Cc(4,Hn,s.getColor(t.value)))}}function zn(t,e){if(1&t&&(n.dc(0,"div",22),n.dc(1,"div",41,42),n.Zb(3,"div",43),n.cc(),n.cc()),2&t){const t=n.qc(2);n.Kb(3),n.yc("roomPreviewer",t.roomPreviewer)("width",1e3)("height",1e3)("modelScale",!1)("model",t.currentModel)("wallHeight",t.wallHeight)}}const Yn=function(t){return{active:t}},qn=function(t,e){return{"col-7":t,"col-12":e}};function Xn(t,e){if(1&t){const t=n.ec();n.dc(0,"div",2),n.dc(1,"div",3),n.dc(2,"h6",4),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",5),n.nc("click",function(){return n.Lc(t),n.qc().close()}),n.Zb(6,"i",6),n.cc(),n.cc(),n.dc(7,"div",7),n.dc(8,"div",8),n.dc(9,"div",9),n.dc(10,"div",10),n.Wc(11),n.rc(12,"translate"),n.cc(),n.dc(13,"div",11),n.dc(14,"button",12),n.nc("click",function(){return n.Lc(t),n.qc().changeAction("set")}),n.Zb(15,"i",13),n.cc(),n.dc(16,"button",12),n.nc("click",function(){return n.Lc(t),n.qc().changeAction("unset")}),n.Zb(17,"i",14),n.cc(),n.dc(18,"button",12),n.nc("click",function(){return n.Lc(t),n.qc().changeAction("up")}),n.Zb(19,"i",15),n.cc(),n.dc(20,"button",12),n.nc("click",function(){return n.Lc(t),n.qc().changeAction("down")}),n.Zb(21,"i",16),n.cc(),n.dc(22,"button",12),n.nc("click",function(){return n.Lc(t),n.qc().changeAction("door")}),n.Zb(23,"i",17),n.cc(),n.cc(),n.dc(24,"div",10),n.Wc(25),n.rc(26,"translate"),n.cc(),n.dc(27,"div",11),n.dc(28,"button",18),n.nc("click",function(){return n.Lc(t),n.qc().decrementHeight()}),n.Zb(29,"i",19),n.cc(),n.Uc(30,jn,1,6,"button",20),n.rc(31,"keyvalue"),n.dc(32,"button",18),n.nc("click",function(){return n.Lc(t),n.qc().incrementHeight()}),n.Zb(33,"i",21),n.cc(),n.cc(),n.cc(),n.dc(34,"div",22),n.dc(35,"div",23),n.dc(36,"div",24),n.dc(37,"div",10),n.Wc(38),n.rc(39,"translate"),n.cc(),n.dc(40,"div",25),n.dc(41,"button",18),n.nc("click",function(){return n.Lc(t),n.qc().decrementDoorDirection()}),n.Zb(42,"i",19),n.cc(),n.Zb(43,"button",26),n.dc(44,"button",18),n.nc("click",function(){return n.Lc(t),n.qc().incrementDoorDirection()}),n.Zb(45,"i",21),n.cc(),n.cc(),n.cc(),n.dc(46,"div",24),n.dc(47,"div",10),n.Wc(48),n.rc(49,"translate"),n.cc(),n.dc(50,"div",25),n.dc(51,"button",18),n.nc("click",function(){return n.Lc(t),n.qc().decrementWallheight()}),n.Zb(52,"i",19),n.cc(),n.dc(53,"button",27),n.Wc(54),n.cc(),n.dc(55,"button",18),n.nc("click",function(){return n.Lc(t),n.qc().incrementWallheight()}),n.Zb(56,"i",21),n.cc(),n.cc(),n.cc(),n.cc(),n.dc(57,"div",10),n.Wc(58),n.rc(59,"translate"),n.cc(),n.dc(60,"div",23),n.dc(61,"div",24),n.dc(62,"select",28),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().thicknessWall=e}),n.dc(63,"option",29),n.Wc(64),n.rc(65,"translate"),n.cc(),n.dc(66,"option",29),n.Wc(67),n.rc(68,"translate"),n.cc(),n.dc(69,"option",29),n.Wc(70),n.rc(71,"translate"),n.cc(),n.dc(72,"option",29),n.Wc(73),n.rc(74,"translate"),n.cc(),n.cc(),n.cc(),n.dc(75,"div",24),n.dc(76,"select",28),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().thicknessFloor=e}),n.dc(77,"option",29),n.Wc(78),n.rc(79,"translate"),n.cc(),n.dc(80,"option",29),n.Wc(81),n.rc(82,"translate"),n.cc(),n.dc(83,"option",29),n.Wc(84),n.rc(85,"translate"),n.cc(),n.dc(86,"option",29),n.Wc(87),n.rc(88,"translate"),n.cc(),n.cc(),n.cc(),n.cc(),n.cc(),n.cc(),n.dc(89,"div",23),n.dc(90,"div",30),n.dc(91,"div",31),n.Wc(92),n.cc(),n.Zb(93,"div",32,33),n.cc(),n.Uc(95,zn,4,6,"div",34),n.cc(),n.dc(96,"div",35),n.dc(97,"button",36),n.nc("click",function(){return n.Lc(t),n.qc().revertChanges()}),n.Wc(98),n.rc(99,"translate"),n.cc(),n.dc(100,"div",37),n.dc(101,"button",38),n.nc("click",function(){return n.Lc(t),n.qc().togglePreviewer()}),n.Wc(102),n.cc(),n.dc(103,"button",38),n.nc("click",function(){return n.Lc(t),n.qc().openImportExport()}),n.Wc(104),n.rc(105,"translate"),n.cc(),n.dc(106,"button",39),n.nc("click",function(){return n.Lc(t),n.qc().save()}),n.Wc(107),n.rc(108,"translate"),n.cc(),n.cc(),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(3),n.Xc(n.sc(4,45,"floor.plan.editor.title")),n.Kb(8),n.Xc(n.sc(12,47,"floor.plan.editor.draw.mode")),n.Kb(3),n.yc("ngClass",n.Cc(81,Yn,"set"===t.currentAction)),n.Kb(2),n.yc("ngClass",n.Cc(83,Yn,"unset"===t.currentAction)),n.Kb(2),n.yc("ngClass",n.Cc(85,Yn,"up"===t.currentAction)),n.Kb(2),n.yc("ngClass",n.Cc(87,Yn,"down"===t.currentAction)),n.Kb(2),n.yc("ngClass",n.Cc(89,Yn,"door"===t.currentAction)),n.Kb(3),n.Xc(n.sc(26,49,"floor.plan.editor.tile.height")),n.Kb(5),n.yc("ngForOf",n.sc(31,51,t.colorMap)),n.Kb(8),n.Xc(n.sc(39,53,"floor.plan.editor.enter.direction")),n.Kb(5),n.yc("headOnly",!0)("scale",4)("asBackground",!0)("figure",t.currentAvatarFigure)("direction",t.doorDirection),n.Kb(5),n.Xc(n.sc(49,55,"floor.editor.wall.height")),n.Kb(6),n.Xc(t.wallHeight),n.Kb(4),n.Xc(n.sc(59,57,"floor.plan.editor.room.options")),n.Kb(4),n.yc("ngModel",t.thicknessWall),n.Kb(1),n.yc("value",0),n.Kb(1),n.Xc(n.sc(65,59,"navigator.roomsettings.wall_thickness.thinnest")),n.Kb(2),n.yc("value",1),n.Kb(1),n.Xc(n.sc(68,61,"navigator.roomsettings.wall_thickness.thin")),n.Kb(2),n.yc("value",2),n.Kb(1),n.Xc(n.sc(71,63,"navigator.roomsettings.wall_thickness.normal")),n.Kb(2),n.yc("value",3),n.Kb(1),n.Xc(n.sc(74,65,"navigator.roomsettings.wall_thickness.thick")),n.Kb(3),n.yc("ngModel",t.thicknessFloor),n.Kb(1),n.yc("value",0),n.Kb(1),n.Xc(n.sc(79,67,"navigator.roomsettings.floor_thickness.thinnest")),n.Kb(2),n.yc("value",1),n.Kb(1),n.Xc(n.sc(82,69,"navigator.roomsettings.floor_thickness.thin")),n.Kb(2),n.yc("value",2),n.Kb(1),n.Xc(n.sc(85,71,"navigator.roomsettings.floor_thickness.normal")),n.Kb(2),n.yc("value",3),n.Kb(1),n.Xc(n.sc(88,73,"navigator.roomsettings.floor_thickness.thick")),n.Kb(3),n.yc("ngClass",n.Dc(91,qn,t.showPreviewer,!t.showPreviewer)),n.Kb(2),n.Zc(" ",t.coloredTilesCount," / ",t.maxTilesCount," "),n.Kb(3),n.yc("ngIf",t.showPreviewer),n.Kb(2),n.yc("disabled",!t.ableToRevertChanges),n.Kb(1),n.Xc(n.sc(99,75,"floor.plan.editor.reload")),n.Kb(4),n.Xc(t.togglePreviewButton),n.Kb(2),n.Xc(n.sc(105,77,"floor.plan.editor.import.export")),n.Kb(3),n.Xc(n.sc(108,79,"floor.plan.editor.save"))}}function Zn(t,e){1&t&&n.Zb(0,"nitro-floorplan-import-export-component")}let Qn=(()=>{class t{constructor(t,e,s,n){this._ngZone=t,this._floorPlanService=e,this._settingsService=s,this._sessionService=n,this.visible=!1,this.showPreviewer=!1,this._previewerEventsSet=!1,this._floorPlanService.component=this,this._clear()}ngOnInit(){this._roomPreviewer=new gn(u.a.instance.roomEngine,++gn.PREVIEW_COUNTER),this._roomPreviewer.zoomOut(),this._roomPreviewer.zoomOut()}ngOnChanges(t){t.visible.currentValue?(u.a.instance.communication.connection.send(new an.a),u.a.instance.communication.connection.send(new rn.a)):this._clear()}ngOnDestroy(){this._roomPreviewer&&(this._roomPreviewer.dispose(),this._roomPreviewer=null)}_clear(){this._floorPlanService.clear(),this._ngZone.runOutsideAngular(()=>{this._app&&(this._app.destroy(!0),this._app=null,this._tileMap.destroy(),this._tileMap=null)})}close(){this._settingsService.floorPlanVisible=!1}preview(t){const{doorX:e,doorY:s,doorDirection:n,thicknessWall:i,thicknessFloor:r}=this._floorPlanService.floorMapSettings;this.init(t,this._floorPlanService.blockedTilesMap,e,s,n,i,r)}render(){this._app&&this._app.stage.removeChildren(),this._ngZone.runOutsideAngular(()=>{}),this._floorPlanService.render()}init(t,e,s,n,i,r,a){this._clear(),this._floorPlanService.floorMapSettings.heightMapString=t,this._floorPlanService.floorMapSettings.doorX=s,this._floorPlanService.floorMapSettings.doorY=n,this._floorPlanService.floorMapSettings.doorDirection=i,this._floorPlanService.blockedTilesMap=e,this._floorPlanService.floorMapSettings.thicknessWall=r,this._floorPlanService.floorMapSettings.thicknessFloor=a,this._ngZone.run(()=>{this._floorPlanService.floorMapSettings.doorDirection=i}),this._floorPlanService.floorMapSettings.heightMap=this._floorPlanService.readTileMapString(t);const o=this._floorPlanService.tileSize,c=o*this._floorPlanService.floorMapSettings.heightMap.length+20,l=o*this._floorPlanService.floorMapSettings.heightMap.length/2+100;this._floorPlanService.originalMapSettings=this._floorPlanService.floorMapSettings,this._ngZone.runOutsideAngular(()=>{this._buildApp(c,l),this._floorPlanService.renderTileMap()})}_buildApp(t,e){if(!this._app){this._app=new d.Application({width:t,height:e,backgroundColor:2829099,antialias:!0,autoDensity:!0,resolution:1}),this._tileMap=new bn,this._tileMap.interactive=!0,this._ngZone.runOutsideAngular(()=>this._floorPlanService.detectPoints()),this._app.stage.addChild(this._tileMap),this.floorplanElement.nativeElement.appendChild(this._app.view);let s={top:0,left:0,x:0,y:0};const n=this.floorplanElement.nativeElement,i=function(t){2===t.button&&(n.style.cursor="grabbing",n.style.userSelect="none",s={left:n.scrollLeft,top:n.scrollTop,x:t.clientX,y:t.clientY},n.addEventListener("mousemove",r),n.addEventListener("mouseup",a))},r=function(t){const e=t.clientX-s.x;n.scrollTop=s.top-(t.clientY-s.y),n.scrollLeft=s.left-e},a=function(){n.style.cursor="default",n.removeEventListener("mousemove",r),n.removeEventListener("mouseup",a)};n.addEventListener("mousedown",i),n.oncontextmenu=function(){return!1},this.setPreviewerEvents(),this.floorplanElement.nativeElement.scrollTo(t/3,0)}}setPreviewerEvents(){if(!this.showPreviewer||this._previewerEventsSet)return;const t=this.floorplanPreviewer.nativeElement;let e={top:0,left:0,x:0,y:0};const s=s=>{const n=s.clientX-e.x;t.scrollTop=e.top-(s.clientY-e.y),t.scrollLeft=e.left-n},n=()=>{t.style.cursor="default",t.removeEventListener("mousemove",s),t.removeEventListener("mouseup",n)};t.addEventListener("mousedown",function(i){t.style.cursor="grabbing",t.style.userSelect="none",e={left:t.scrollLeft,top:t.scrollTop,x:i.clientX,y:i.clientY},t.addEventListener("mousemove",s),t.addEventListener("mouseup",n)}),t.oncontextmenu=()=>!1,t.scrollTo(250,250),this._previewerEventsSet=!0}changeAction(t){this._floorPlanService.currentAction=t}selectHeight(t){this._floorPlanService.currentHeight=t,this.changeAction("set")}getColor(t){return t.replace("0x","#")}save(){this._floorPlanService.floorMapSettings.heightMapString=this._floorPlanService.generateTileMapString(),this._floorPlanService.save(this._floorPlanService.floorMapSettings)}decrementHeight(){this._floorPlanService.decrementHeight()}incrementHeight(){this._floorPlanService.incrementHeight()}decrementDoorDirection(){this._floorPlanService.decrementDoorDirection()}incrementDoorDirection(){this._floorPlanService.incrementDoorDirection()}decrementWallheight(){this._floorPlanService.decrementWallheight()}incrementWallheight(){this._floorPlanService.incrementWallheight()}openImportExport(){this._floorPlanService.showImportExport=!0}revertChanges(){this._floorPlanService.revertChanges()}toggleEditor(){this.minimize=!this.minimize}get colorMap(){return Object.keys(this._floorPlanService.colorMap).filter(t=>"x"!==t).reduce((t,e)=>(t[e]=this._floorPlanService.colorMap[e],t),{})}get currentAction(){return this._floorPlanService.currentAction}get currentHeight(){return this._floorPlanService.currentHeight}get coloredTilesCount(){return this._floorPlanService.coloredTilesCount}get maxTilesCount(){return this._floorPlanService.maxTilesCount}get roomPreviewer(){return this._roomPreviewer}get currentModel(){return this._floorPlanService.floorMapSettings.heightMapString}get doorDirection(){return this._floorPlanService.floorMapSettings.doorDirection}get wallHeight(){return this._floorPlanService.wallHeight}get thicknessWall(){return this._floorPlanService.floorMapSettings.thicknessWall}set thicknessWall(t){this._floorPlanService.floorMapSettings.thicknessWall=t}get thicknessFloor(){return this._floorPlanService.floorMapSettings.thicknessFloor}set thicknessFloor(t){this._floorPlanService.floorMapSettings.thicknessFloor=t}get ableToRevertChanges(){return this._floorPlanService.changesMade}get tileMap(){return this._tileMap}get showImportExport(){return this._floorPlanService.showImportExport}togglePreviewer(){this.showPreviewer=!this.showPreviewer,this.showPreviewer||(this._previewerEventsSet=!1),setTimeout(()=>{this.setPreviewerEvents()},200)}get togglePreviewButton(){const t=this.showPreviewer?"Hide Preview":"Show Preview",e=u.a.instance.localization.getValue(this.showPreviewer?"nitro.floorplan.previewer.hide":"nitro.floorplan.previewer.show");return e==e?t:e}get currentAvatarFigure(){return this._sessionService.figure}get heightMap(){return this._floorPlanService.floorMapSettings.heightMapString}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(n.H),n.Yb(kn),n.Yb(g),n.Yb(Bn))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-floorplan-main-component"]],viewQuery:function(t,e){if(1&t&&(n.cd(Vn,1),n.cd(Gn,1)),2&t){let t;n.Hc(t=n.oc())&&(e.floorplanElement=t.first),n.Hc(t=n.oc())&&(e.floorplanPreviewer=t.first)}},inputs:{visible:"visible"},features:[n.Ib],decls:2,vars:2,consts:[["class","card nitro-floorplan-editor-component",3,"bringToTop","draggable",4,"ngIf"],[4,"ngIf"],[1,"card","nitro-floorplan-editor-component",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"row"],[1,"col-7"],[1,"mb-1"],[1,"btn-group","w-100","mb-3"],[1,"btn","btn-primary","btn-sm",3,"ngClass","click"],[1,"icon","icon-floorplaneditor-tile-set"],[1,"icon","icon-floorplaneditor-tile-unset"],[1,"icon","icon-floorplaneditor-tile-up"],[1,"icon","icon-floorplaneditor-tile-down"],[1,"icon","icon-floorplaneditor-door"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-chevron-left"],["class","btn btn-sm btn-primary floorplan-height-option",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[1,"fas","fa-chevron-right"],[1,"col-5"],[1,"row","mb-3"],[1,"col-6"],[1,"btn-group","w-100",2,"height","50px"],["avatar-image","",1,"btn","btn-primary","btn-sm","w-100","floorplan-door-button",3,"headOnly","scale","asBackground","figure","direction"],[1,"btn","btn-primary","btn-sm","w-100"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"value"],[3,"ngClass"],[1,"text-right"],[1,"editor-area"],["floorplanElement",""],["class","col-5",4,"ngIf"],[1,"d-flex","flex-row","justify-content-between","w-100"],[1,"btn","btn-secondary",3,"disabled","click"],[1,"btn-group"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-sm","btn-primary","floorplan-height-option",3,"ngClass","ngStyle","click"],[1,"editor-area",2,"text-align","center"],["floorplanPreviewer",""],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","width","height","modelScale","model","wallHeight"]],template:function(t,e){1&t&&(n.Uc(0,Xn,109,94,"div",0),n.Uc(1,Zn,1,0,"nitro-floorplan-import-export-component",1)),2&t&&(n.yc("ngIf",e.visible),n.Kb(1),n.yc("ngIf",e.showImportExport))},encapsulation:2}),t})();const Jn=["roomCanvas"],$n=["widgetContainer"];function ti(t,e){}let ei=(()=>{class t{constructor(t,e,s,n,i,r,a,o){this._notificationService=t,this._wiredService=e,this._friendService=s,this._chatHistoryService=n,this._componentFactoryResolver=i,this._modToolsService=r,this._settingsService=a,this._ngZone=o,this._events=new F.a,this._handlers=[],this._widgets=new Map,this._widgetHandlerMessageMap=new Map,this._widgetHandlerEventMap=new Map,this._roomColorAdjustor=null,this._roomBackground=null,this._roomBackgroundColor=0,this._roomColorizerColor=0,this._roomScale=1,this._resizeTimer=null,this._didMouseMove=!1,this._lastClick=0,this._clickCount=0,this._lastMouseMove=0,this._isMouseMove=!1,this._scrollCount=0,this._lastScrollTime=0,this.processEvent=this.processEvent.bind(this)}ngOnDestroy(){this.endRoom(),this._events.dispose()}prepareRoom(t){if(!t)return;const e=this.getFirstCanvasId(),s=u.a.instance.roomEngine.getRoomInstanceDisplay(t.roomId,e,u.a.instance.width,u.a.instance.height,Y.a.SCALE_ZOOMED_IN);if(!s)return;const n=u.a.instance.roomEngine.getRoomInstanceGeometry(t.roomId,e);if(n){let e=((u.a.instance.roomEngine.getRoomInstanceVariable(t.roomId,G.a.ROOM_MIN_X)||0)+(u.a.instance.roomEngine.getRoomInstanceVariable(t.roomId,G.a.ROOM_MAX_X)||0))/2,s=((u.a.instance.roomEngine.getRoomInstanceVariable(t.roomId,G.a.ROOM_MIN_Y)||0)+(u.a.instance.roomEngine.getRoomInstanceVariable(t.roomId,G.a.ROOM_MAX_Y)||0))/2;const i=20;e+=i-1,s+=i-1;const r=Math.sqrt(i*i+i*i)*Math.tan(30/180*Math.PI);n.location=new q.a(e,s,r)}const i=u.a.instance.stage;i&&(i.addChild(s),this._roomSession=t,this.insertCanvas(),this.onWindowResizeEvent(null),u.a.instance.ticker.add(this.update,this),this._friendService.events.addEventListener(X.ACCEPTED,this.processEvent),this._friendService.events.addEventListener(X.DECLINED,this.processEvent))}endRoom(){if(this._roomSession){this._friendService.events.removeEventListener(X.ACCEPTED,this.processEvent),this._friendService.events.removeEventListener(X.DECLINED,this.processEvent),u.a.instance.ticker.remove(this.update,this),this._resizeTimer&&(clearTimeout(this._resizeTimer),this._resizeTimer=null);for(const t of this._widgets.values())t&&(t.instance&&t.instance.dispose(),this._ngZone.run(()=>t.destroy()));for(const t of this._handlers)t&&t.dispose();this._roomColorAdjustor=null,this._roomBackground=null,this._roomBackgroundColor=0,this._roomColorizerColor=0,this._roomScale=1,t.COLOR_ADJUSTMENT.red=1,t.COLOR_ADJUSTMENT.green=1,t.COLOR_ADJUSTMENT.blue=1,this._handlers=[],this._widgets.clear(),this._widgetHandlerMessageMap.clear(),this._widgetHandlerEventMap.clear(),this._events.removeAllListeners(),this._roomSession=null,this.removeCanvas(),l.a.call("logDebug","Navigator: exiting room")}}insertCanvas(){const t=u.a.instance.renderer.view;t&&(t.onclick=this.onMouseEvent.bind(this),t.onmousemove=this.onMouseEvent.bind(this),t.onmousedown=this.onMouseEvent.bind(this),t.onmouseup=this.onMouseEvent.bind(this),t.ontouchstart=this.onTouchEvent.bind(this),t.ontouchmove=this.onTouchEvent.bind(this),t.ontouchend=this.onTouchEvent.bind(this),t.ontouchcancel=this.onTouchEvent.bind(this),window.onresize=this.onWindowResizeEvent.bind(this),window.onmousewheel=this.onWindowMouseWheelEvent.bind(this),this.roomCanvasReference.nativeElement.appendChild(t))}removeCanvas(){const t=u.a.instance.renderer.view;t&&(t.onclick=null,t.onmousemove=null,t.onmousedown=null,t.onmouseup=null,t.ontouchstart=null,t.ontouchmove=null,t.ontouchend=null,t.ontouchcancel=null,window.onresize=null,window.onmousewheel=null,t.parentElement&&t.parentElement.removeChild(t))}onMouseEvent(t){if(!t||!this._roomSession)return;const e=t.clientX,s=t.clientY;let n=t.type;switch(n===H.a.MOUSE_CLICK&&(this._lastClick&&(this._clickCount=1,this._lastClick>=Date.now()-300&&this._clickCount++),this._lastClick=Date.now(),2===this._clickCount&&(this._didMouseMove||(n=H.a.DOUBLE_CLICK),this._clickCount=0,this._lastClick=null)),n){case H.a.MOUSE_CLICK:case H.a.DOUBLE_CLICK:break;case H.a.MOUSE_MOVE:this._didMouseMove=!0;break;case H.a.MOUSE_DOWN:this._didMouseMove=!1;break;case H.a.MOUSE_UP:break;default:return}u.a.instance.roomEngine.setActiveRoomId(this._roomSession.roomId),u.a.instance.roomEngine.dispatchMouseEvent(this.getFirstCanvasId(),e,s,n,t.altKey,t.ctrlKey||t.metaKey,t.shiftKey,!1)}onTouchEvent(t){if(!t||!this._roomSession)return;let e=t.type;switch(e!==j.TOUCH_END||this._didMouseMove||(e=H.a.MOUSE_CLICK,this._lastClick&&(this._clickCount=1,this._lastClick>=Date.now()-300&&this._clickCount++),this._lastClick=Date.now(),2===this._clickCount&&(e=H.a.DOUBLE_CLICK,this._clickCount=0,this._lastClick=null)),e){case j.TOUCH_END:e=H.a.MOUSE_CLICK;break;case j.TOUCH_START:e=H.a.MOUSE_DOWN,this._didMouseMove=!1;break;case j.TOUCH_MOVE:e=H.a.MOUSE_MOVE,this._didMouseMove=!0;break;case j.TOUCH_CANCEL:e=H.a.MOUSE_UP}let s=0,n=0;t.touches[0]?(s=t.touches[0].clientX,n=t.touches[0].clientY):t.changedTouches[0]&&(s=t.changedTouches[0].clientX,n=t.changedTouches[0].clientY),u.a.instance.roomEngine.setActiveRoomId(this._roomSession.roomId),u.a.instance.roomEngine.dispatchMouseEvent(this.getFirstCanvasId(),s,n,e,t.altKey,t.ctrlKey||t.metaKey,t.shiftKey,!1)}onWindowResizeEvent(t){this._roomSession&&(this._resizeTimer&&clearTimeout(this._resizeTimer),this._resizeTimer=setTimeout(()=>{u.a.instance.renderer.resize(window.innerWidth,window.innerHeight),u.a.instance.roomEngine.initializeRoomInstanceRenderingCanvas(this._roomSession.roomId,this.getFirstCanvasId(),u.a.instance.width,u.a.instance.height),this._events.dispatchEvent(new $($.SIZE_CHANGED,this.getRoomViewRect())),this.setRoomBackground(),u.a.instance.render()},1))}onWindowMouseWheelEvent(t){if(!t||!this._roomSession)return;if(t.target!==u.a.instance.renderer.view)return;const e=-1/40*(t.wheelDeltaY||t.deltaY)<0?1:-1;if(this._lastScrollTime&&(this._lastScrollTime<Date.now()-300&&(this._scrollCount=0),this._scrollCount++),this._lastScrollTime=Date.now(),15!==this._scrollCount)return;this._scrollCount=0,this._lastScrollTime=null;let s=this._roomScale;switch(e){case 1:s>=.5&&(s+=.5);break;case-1:s<=1?s=.5:s-=.5}this._roomScale=s,u.a.instance.roomEngine.events.dispatchEvent(new R(this._roomSession.roomId,s,!1))}update(){for(const t of this._widgets.values())t.instance.widgetHandler&&t.instance.widgetHandler.update()}createWidget(t,e){if(this._widgets.get(t))return;let s=null,n=!1;switch(t){case N.a.CHAT_WIDGET:{n=!0;const t=new Mt(this._chatHistoryService);t.connection=u.a.instance.communication.connection,s=t;break}case N.a.CHAT_INPUT_WIDGET:n=!0,s=new bt;break;case N.a.AVATAR_INFO:s=new ut;break;case N.a.INFOSTAND:s=new Ge;break;case N.a.LOCATION_WIDGET:s=new je;break;case N.a.INTERNAL_LINK:s=new _e;break;case N.a.ROOM_LINK:s=new be;break;case N.a.ROOM_DIMMER:s=new le;break;case N.a.CUSTOM_STACK_HEIGHT:s=new se;break;case N.a.FURNI_CHOOSER:s=new zt;break;case N.a.USER_CHOOSER:s=new Xe;break;case N.a.FURNI_STICKIE_WIDGET:s=new Re;break;case N.a.DOORBELL:s=new Dt;break;case N.a.FURNI_TROPHY_WIDGET:s=new ye;break;case N.a.FURNI_CREDIT_WIDGET:s=new te;break;case N.a.FURNITURE_CONTEXT_MENU:s=new Xt;break;case N.a.MANNEQUIN:s=new de;break;case N.a.ROOM_BACKGROUND_COLOR:s=new Yt;break;case N.a.FRIEND_FURNI_CONFIRM:s=new Ft;break;case N.a.FRIEND_FURNI_ENGRAVING:s=new Wt;break;case N.a.ROOM_TOOLS:s=new qe;break;case N.a.FURNI_PRESENT_WIDGET:s=new fe;break;case N.a.FRIEND_REQUEST:s=new Gt;break;case N.a.HIGH_SCORE_DISPLAY:s=new ue}if(s){const n=s.messageTypes;if(n&&n.length)for(const t of n){if(!t)continue;let e=this._widgetHandlerMessageMap.get(t);e||(e=[],this._widgetHandlerMessageMap.set(t,e)),e.push(s)}const i=s.eventTypes;if(i.push(b.a.OPEN_WIDGET,b.a.CLOSE_WIDGET),i&&i.length)for(const t of i){if(!t)continue;let e=this._widgetHandlerEventMap.get(t);e||(e=[],this._widgetHandlerEventMap.set(t,e)),e.push(s)}if(this._handlers.push(s),e){let n=null,i=null;if(this._ngZone.run(()=>{const t=this._componentFactoryResolver.resolveComponentFactory(e);n=this.widgetContainer.createComponent(t),i=n.instance}),!i)return;i.widgetHandler=s,i.messageListener=this,i.registerUpdateEvents(this._events),this._widgets.set(t,n)}s.container=this}n&&this._events.dispatchEvent(new $($.SIZE_CHANGED,this.getRoomViewRect()))}showFloorPlan(){this._ngZone.run(()=>this._settingsService.floorPlanVisible=!0)}processEvent(t){if(!t||!this._widgetHandlerEventMap)return;const e=this._widgetHandlerEventMap.get(t.type);if(!e)return;let s=!1;for(const n of e)n&&(s=!0,t.type!==b.a.OPEN_WIDGET&&t.type!==b.a.CLOSE_WIDGET||t instanceof b.a&&(s=n.type===t.widget),s&&n.processEvent(t))}processWidgetMessage(t){if(!t||!t.type)return null;const e=this._widgetHandlerMessageMap.get(t.type);if(!e||!e.length)return null;for(const s of e){if(!s)continue;const e=s.processWidgetMessage(t);if(e)return e}return null}onRoomEngineEvent(t){if(t)switch(t.type){case _.a.NORMAL_MODE:return void this._events.dispatchEvent(new Q(Q.RWREUE_NORMAL_MODE,t.roomId));case _.a.GAME_MODE:return void this._events.dispatchEvent(new Q(Q.RWREUE_GAME_MODE,t.roomId))}}onRoomEngineObjectEvent(t){if(!t)return;const e=t.objectId,s=t.category;let n=null;switch(t.type){case S.a.SELECTED:if(this.isFurnitureSelectionDisabled(t)||(n=new J(J.OBJECT_SELECTED,e,s,t.roomId)),s==k.a.UNIT){const t=this._roomSession.userDataManager.getUserDataByIndex(e);t&&t.type==B.a.USER&&this._modToolsService.selectUser(t.webID,t.name)}break;case S.a.DESELECTED:n=new J(J.OBJECT_DESELECTED,e,s,t.roomId);break;case S.a.ADDED:{let i=null;switch(s){case k.a.FLOOR:case k.a.WALL:i=J.FURNI_ADDED;break;case k.a.UNIT:i=J.USER_ADDED}i&&(n=new J(i,e,s,t.roomId));break}case S.a.REMOVED:{let i=null;switch(s){case k.a.FLOOR:case k.a.WALL:i=J.FURNI_REMOVED;break;case k.a.UNIT:i=J.USER_REMOVED}i&&(n=new J(i,e,s,t.roomId));break}case S.a.MOUSE_ENTER:n=new J(J.OBJECT_ROLL_OVER,e,s,t.roomId);break;case S.a.MOUSE_LEAVE:n=new J(J.OBJECT_ROLL_OUT,e,s,t.roomId);break;case S.a.REQUEST_MOVE:this.checkFurniManipulationRights(t.roomId,e,s)&&u.a.instance.roomEngine.processRoomObjectOperation(e,s,W.a.OBJECT_MOVE);break;case S.a.REQUEST_ROTATE:this.checkFurniManipulationRights(t.roomId,e,s)&&u.a.instance.roomEngine.processRoomObjectOperation(e,s,W.a.OBJECT_ROTATE_POSITIVE);break;case b.a.REQUEST_STICKIE:this.processWidgetMessage(new $t($t.REQUEST_STICKIE,e,s,t.roomId));break;case b.a.REQUEST_TROPHY:this.processWidgetMessage(new $t($t.REQUEST_TROPHY,e,s,t.roomId));break;case b.a.REQUEST_CREDITFURNI:this.processWidgetMessage(new $t($t.REQUEST_CREDITFURNI,e,s,t.roomId));break;case b.a.REQUEST_DIMMER:this.processWidgetMessage(new $t($t.REQUEST_DIMMER,e,s,t.roomId));break;case b.a.REQUEST_PRESENT:this.processWidgetMessage(new $t($t.REQUEST_PRESENT,e,s,t.roomId));break;case b.a.OPEN_WIDGET:case b.a.CLOSE_WIDGET:case b.a.OPEN_FURNI_CONTEXT_MENU:case b.a.CLOSE_FURNI_CONTEXT_MENU:case b.a.REMOVE_DIMMER:case b.a.REQUEST_MANNEQUIN:case b.a.REQUEST_BACKGROUND_COLOR:case b.a.REQUEST_FRIEND_FURNITURE_ENGRAVING:case b.a.REQUEST_HIGH_SCORE_DISPLAY:case b.a.REQUEST_HIDE_HIGH_SCORE_DISPLAY:case b.a.REQUEST_INTERNAL_LINK:case b.a.REQUEST_ROOM_LINK:this.processEvent(t)}if(n){let t=!0;n instanceof J&&(t=!P.isRoomPreviewerId(n.roomId)),t&&this._events.dispatchEvent(n)}}isFurnitureSelectionDisabled(t){let e=!1;const s=u.a.instance.roomEngine.getRoomObject(t.roomId,t.objectId,t.category);return s&&1===s.model.getValue(V.a.FURNITURE_SELECTION_DISABLED)&&(e=!0,u.a.instance.sessionDataManager.isModerator&&(e=!1)),e}checkFurniManipulationRights(t,e,s){return this._roomSession.controllerLevel>=K.a.GUEST||u.a.instance.sessionDataManager.isModerator||this.isOwnerOfFurniture(u.a.instance.roomEngine.getRoomObject(t,e,s))}isOwnerOfFurniture(t){return!(!t||!t.model)&&u.a.instance.sessionDataManager.userId===t.model.getValue(V.a.FURNITURE_OWNER_ID)}_Str_2485(t){if(!t||!this._widgetHandlerEventMap)return;const e=this._widgetHandlerEventMap.get(t.type);if(e&&e.length){let s=!0;for(const n of e)(t.type===b.a.OPEN_WIDGET||b.a.CLOSE_WIDGET)&&t instanceof b.a&&(s=n.type===t.widget),s&&n.processEvent(t)}}getRoomBackground(){if(this._roomBackground)return this._roomBackground;const t=this.roomEngine.getRoomInstanceRenderingCanvas(this.roomSession.roomId,this.getFirstCanvasId());if(!t)return null;const e=t.master,s=new d.Sprite(d.Texture.WHITE);return e.addChildAt(s,0),this._roomBackground=s,this._roomBackground}getRoomColorizer(){if(this._roomColorAdjustor)return this._roomColorAdjustor;const e=this.roomEngine.getRoomInstanceRenderingCanvas(this.roomSession.roomId,this.getFirstCanvasId());if(!e)return null;const s=e.master;return s?(this._roomColorAdjustor=t.COLOR_ADJUSTMENT,s.filters=[this._roomColorAdjustor],this._roomColorAdjustor):null}setRoomBackgroundColor(t,e,s){this._roomBackgroundColor=z.a._Str_13949(((255&t)<<16)+((255&e)<<8)+(255&s));const n=this.getRoomBackground();n&&(t||e||s?(n.visible=!0,this.setRoomBackground()):n.visible=!1)}setRoomColorizerColor(t,e){this._roomColorizerColor=z.a._Str_13949((16776960&z.a._Str_22130(t))+e),this.setRoomColorizer()}setRoomBackground(){const t=this.getRoomBackground();t&&(t.tint=this._roomBackgroundColor,t.width=u.a.instance.width,t.height=u.a.instance.height)}setRoomColorizer(){const t=this.getRoomColorizer();if(!t)return;const e=this._roomColorizerColor>>8&255,s=255&this._roomColorizerColor;t.red=(this._roomColorizerColor>>16&255)/255,t.green=e/255,t.blue=s/255}getFirstCanvasId(){return 1}getRoomViewRect(){const t=this.roomCanvasReference.nativeElement.getBoundingClientRect();return new d.Rectangle(t.x||0,t.y||0,t.width||0,t.height||0)}get events(){return this._events}get connection(){return u.a.instance.communication.connection}get roomEngine(){return u.a.instance.roomEngine}get avatarRenderManager(){return u.a.instance.avatar}get roomSessionManager(){return u.a.instance.roomSessionManager}get sessionDataManager(){return u.a.instance.sessionDataManager}get roomSession(){return this._roomSession}get notificationService(){return this._notificationService}get wiredService(){return this._wiredService}get friendService(){return this._friendService}get floorPlanVisible(){return this._settingsService.floorPlanVisible}get settingsService(){return this._settingsService}}return t.COLOR_ADJUSTMENT=new x.a,t.\u0275fac=function(e){return new(e||t)(n.Yb(es),n.Yb(hs),n.Yb(Hs),n.Yb(js),n.Yb(n.m),n.Yb(nn),n.Yb(g),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-room-component"]],viewQuery:function(t,e){if(1&t&&(n.cd(Jn,1),n.cd($n,1,n.Z)),2&t){let t;n.Hc(t=n.oc())&&(e.roomCanvasReference=t.first),n.Hc(t=n.oc())&&(e.widgetContainer=t.first)}},decls:6,vars:1,consts:[[1,"nitro-room-component"],[3,"visible"],[1,"room-view"],["roomCanvas",""],["widgetContainer",""]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Zb(1,"nitro-floorplan-main-component",1),n.Zb(2,"div",2,3),n.Uc(4,ti,0,0,"ng-template",null,4,n.Vc),n.cc()),2&t&&(n.Kb(1),n.yc("visible",e.floorPlanVisible))},directives:[Qn],encapsulation:2}),t})();var si=s("/PsI");class ni{constructor(){this._widgetHandler=null,this._messageListener=null,this._events=null,this._disposed=!1}initialize(t=0){}dispose(){this.disposed||(this._messageListener=null,this._events&&!this._events.disposed&&this.unregisterUpdateEvents(this._events),this._widgetHandler&&(this._widgetHandler.dispose(),this._widgetHandler=null),this._events=null,this._disposed=!0)}registerUpdateEvents(t){this._events=t}unregisterUpdateEvents(t){this._events=null}get disposed(){return this._disposed}get widgetHandler(){return this._widgetHandler}set widgetHandler(t){this._widgetHandler=t,this._widgetHandler.widget||(this._widgetHandler.widget=this)}get messageListener(){return this._messageListener}set messageListener(t){this._messageListener=t}}var ii=s("vqvB");class ri{constructor(){this._isIgnored=!1,this._canTrade=!1,this._canTradeReason=0,this._canBeKicked=!1,this._canBeBanned=!1,this._canBeMuted=!1,this._canBeAskedAsFriend=!1,this._amIOwner=!1,this._amIAnyRoomController=!1,this._respectLeft=0,this._isOwnUser=!1,this._allowNameChange=!1,this._isGuildRoom=!1,this._carryItemType=0,this._myRoomControllerLevel=0,this._targetRoomControllerLevel=0,this._isFriend=!1,this._isAmbassador=!1}get _Str_3655(){return this._isIgnored}set _Str_3655(t){this._isIgnored=t}get _Str_5751(){return this._canTrade}set _Str_5751(t){this._canTrade=t}get _Str_6622(){return this._canTradeReason}set _Str_6622(t){this._canTradeReason=t}get _Str_5990(){return this._canBeKicked}set _Str_5990(t){this._canBeKicked=t}get _Str_6701(){return this._canBeBanned}set _Str_6701(t){this._canBeBanned=t}get _Str_6394(){return this._canBeMuted}set _Str_6394(t){this._canBeMuted=t}get canBeAskedForAFriend(){return this._canBeAskedAsFriend}set canBeAskedForAFriend(t){this._canBeAskedAsFriend=t}get _Str_3246(){return this._amIOwner}set _Str_3246(t){this._amIOwner=t}get _Str_3529(){return this._amIAnyRoomController}set _Str_3529(t){this._amIAnyRoomController=t}get _Str_3577(){return this._respectLeft}set _Str_3577(t){this._respectLeft=t}get _Str_11453(){return this._isOwnUser}set _Str_11453(t){this._isOwnUser=t}get allowNameChange(){return this._allowNameChange}set allowNameChange(t){this._allowNameChange=t}get _Str_3672(){return this._isGuildRoom}set _Str_3672(t){this._isGuildRoom=t}get _Str_8826(){return this._carryItemType}set _Str_8826(t){this._carryItemType=t}get roomControllerLevel(){return this._myRoomControllerLevel}set roomControllerLevel(t){this._myRoomControllerLevel=t}get _Str_5599(){return this._targetRoomControllerLevel}set _Str_5599(t){this._targetRoomControllerLevel=t}get isFriend(){return this._isFriend}get _Str_4050(){return this._isAmbassador}populate(t){this._amIAnyRoomController=t.isModerator,this._myRoomControllerLevel=t.roomControllerLevel,this._amIOwner=t.isRoomOwner,this._canBeAskedAsFriend=t.canBeAskedForAFriend,this._canBeKicked=t._Str_5990,this._canBeBanned=t._Str_6701,this._canBeMuted=t._Str_6394,this._canTrade=t.canTrade,this._canTradeReason=t._Str_6622,this._isIgnored=t.isIgnored,this._respectLeft=t.respectLeft,this._isOwnUser=t.type===We.OWN_USER,this._allowNameChange=t._Str_4330,this._isGuildRoom=t.isGuildRoom,this._targetRoomControllerLevel=t.flatControl,this._carryItemType=t.carryId,this._isFriend=t.isFriend,this._isAmbassador=t.isAmbassador}}class ai{constructor(){this.age=0,this.rarityLevel=0,this._Str_5114=!1,this.energy=0,this.maximumEnergy=0,this.experience=0,this.levelExperienceGoal=0,this.id=0,this._Str_5175=!1,this.level=0,this.maximumLevel=0,this.name="",this.happyness=0,this.maximumHappyness=0,this.ownerId=0,this.ownerName="",this._Str_14767=0,this.respect=0,this._Str_2985=0,this._Str_4355=0,this.saddle=!1,this.rider=!1,this.breedable=!1,this.fullyGrown=!1,this.dead=!1,this.publiclyRideable=0,this.maximumTimeToLive=0,this.remainingTimeToLive=0,this.remainingGrowTime=0,this.publiclyBreedable=!1,this._Str_3307=[]}populate(t){this.age=t.age,this.rarityLevel=t.rarityLevel,this._Str_5114=t._Str_5114,this.energy=t.energy,this.maximumEnergy=t.maximumEnergy,this.experience=t.experience,this.levelExperienceGoal=t.levelExperienceGoal,this.id=t.id,this._Str_5175=t._Str_5175,this.level=t.level,this.maximumLevel=t.maximumLevel,this.name=t.name,this.happyness=t.happyness,this.maximumHappyness=t.maximumHappyness,this.ownerId=t.ownerId,this.ownerName=t.ownerName,this._Str_14767=t._Str_14767,this.respect=t.respect,this._Str_2985=t._Str_2985,this._Str_4355=t._Str_4355,this.saddle=t.saddle,this.rider=t.rider,this.breedable=t.breedable,this.dead=t.dead,this.fullyGrown=t.fullyGrown,this._Str_3307=t._Str_3307,this.publiclyRideable=t.publiclyRideable,this.maximumTimeToLive=t.maximumTimeToLive,this.remainingTimeToLive=t.remainingTimeToLive,this.remainingGrowTime=t.remainingGrowTime,this.publiclyBreedable=t.publiclyBreedable}}class oi{constructor(){this._id=-1,this._isIgnored=!1,this._amIOwner=!1,this._amIAnyRoomController=!1,this._carryItemType=0}get id(){return this._id}set id(t){this._id=t}get _Str_2707(){return this._roomIndex}set _Str_2707(t){this._roomIndex=t}get _Str_3655(){return this._isIgnored}set _Str_3655(t){this._isIgnored=t}get _Str_3246(){return this._amIOwner}set _Str_3246(t){this._amIOwner=t}get _Str_3529(){return this._amIAnyRoomController}set _Str_3529(t){this._amIAnyRoomController=t}get _Str_8826(){return this._carryItemType}set _Str_8826(t){this._carryItemType=t}get _Str_2899(){return this._botSkills}set _Str_2899(t){this._botSkills=t}get _Str_10833(){return this._botSkillsWithCommands}set _Str_10833(t){this._botSkillsWithCommands=t}get name(){return this._name}populate(t){t.id!=this.id&&(this._botSkillsWithCommands=new Array(0)),this.id=t.id,this._Str_2707=t.roomIndex,this._Str_3246=t._Str_3246,this._Str_3529=t._Str_3529,this._Str_8826=t.carryId,this._Str_2899=t.botSkills,this._name=t.name}_Str_19891(t){this._botSkills=[];for(const e of t)this._Str_2899.push(e);this._botSkillsWithCommands=t.concat()}}class ci{constructor(t){this._data=[],this._maxSize=t,this._index=0}reset(){this._data=[],this._index=0}_Str_22775(t){this._data.length<this._maxSize?this._data.push(t):this._data[this._index]=t,this._index=(this._index+1)%this._maxSize}_Str_25797(){let t=Number.MIN_VALUE,e=0;for(;e<this._maxSize;)this._data[e]>t&&(t=this._data[e]),e++;return t}_Str_26219(){let t=Number.MAX_VALUE,e=0;for(;e<this._maxSize;)this._data[e]<t&&(t=this._data[e]),e++;return t}}let li=(()=>{class t{constructor(){this.parent=null,this.componentRef=null,this.activeView=null,this.stack=new ci(t.LOCATION_STACK_SIZE),this.opacity=0,this.currentDeltaY=-1e6,this.willFade=!1,this.firstFadeStarted=!1,this.fadeAfterDelay=!0,this.fadeLength=500,this.fadeTime=0,this.fadeStartDelay=3e3,this.fadingOut=!1,this.fadeStartTimer=null}completeSetup(){this.firstFadeStarted=!1,this.fadeLength=75,this.fadingOut=!1,this.opacity=1,this.onTimerComplete=this.onTimerComplete.bind(this),this.fadeAfterDelay&&this.willFade&&(this.fadeStartTimer&&(clearTimeout(this.fadeStartTimer),this.fadeStartTimer=null),this.fadeStartTimer=setTimeout(this.onTimerComplete,this.fadeStartDelay))}ngOnDestroy(){this.fadeStartTimer&&(clearTimeout(this.fadeStartTimer),this.fadeStartTimer=null)}update(e,s,n){if(!e)return;if(this.fadingOut?(this.fadeTime=this.fadeTime+n,this.opacity=(1-this.fadeTime/this.fadeLength)*this.maximumOpacity):this.opacity=this.maximumOpacity,this.opacity<=0)return void this.parent.removeView(this.componentRef,!1);const i=this.getOffset(e);this.stack._Str_22775(s.y-e.top);let r=this.stack._Str_25797();r<this.currentDeltaY-t.BUBBLE_DROP_SPEED&&(r=this.currentDeltaY-t.BUBBLE_DROP_SPEED);const a=s.y-r;this.currentDeltaY=r;let o=Math.round(s.x-this.activeViewElement.offsetWidth/2),c=Math.round(a+i)-5;c<=0&&(c=t.SPACE_AROUND_EDGES),c>=u.a.instance.height-this.activeViewElement.offsetHeight&&(c=u.a.instance.height-this.activeViewElement.offsetHeight-t.SPACE_AROUND_EDGES),o>=u.a.instance.width-this.activeViewElement.offsetWidth&&(o=u.a.instance.width-this.activeViewElement.offsetWidth-t.SPACE_AROUND_EDGES),o<0&&(o=0+t.BUBBLE_DROP_SPEED),this.activeViewElement.style.left=o+"px",this.activeViewElement.style.top=c+"px",this.activeViewElement.style.opacity=this.opacity.toString()}hide(t){this.activeView&&(!this.firstFadeStarted&&t?(this.firstFadeStarted=!0,this.fadeStartTimer&&(clearTimeout(this.fadeStartTimer),this.fadeStartTimer=null),this.fadeStartTimer=setTimeout(this.onTimerComplete,this.fadeStartDelay)):this.parent.removeView(this.componentRef,!1))}onTimerComplete(){this.fadingOut=!0,this.hide(!0)}getOffset(t){let e=-this.activeViewElement.offsetHeight;return e-=4,e}get maximumOpacity(){return 1}get activeViewElement(){return this.activeView&&this.activeView.nativeElement||null}}return t.LOCATION_STACK_SIZE=25,t.BUBBLE_DROP_SPEED=3,t.SPACE_AROUND_EDGES=5,t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=n.Tb({type:t}),t})();class hi extends li{constructor(){super(...arguments),this.userId=-1,this.userName="",this.userType=-1,this.roomIndex=-1}static extendedSetup(t,e,s,n,i){t.userId=e,t.userName=s,t.userType=n,t.roomIndex=i,t.completeSetup()}getOffset(t){let e=-this.activeViewElement.offsetHeight;return this.userType===B.a.USER||this.userType===B.a.BOT||this.userType===B.a.RENTABLE_BOT?e+=t.height>50?25:0:e-=4,e}}let ui=(()=>{class t{transform(t,e=null,s=null){return e&&Array.isArray(e)&&s&&Array.isArray(s)&&e.length===s.length?u.a.instance.getLocalizationWithParameters(t,e,s):e&&s?u.a.instance.getLocalizationWithParameter(t,e,s):u.a.instance.getLocalization(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=n.Xb({name:"translate",type:t,pure:!0}),t})();const _i=["activeView"];function di(t,e){if(1&t&&(n.dc(0,"div",5),n.dc(1,"p",6),n.Wc(2),n.cc(),n.cc()),2&t){const t=n.qc();n.Kb(2),n.Xc(t.userName)}}function gi(t,e){if(1&t){const t=n.ec();n.dc(0,"li",15),n.nc("click",function(){n.Lc(t);const e=n.qc(2).$implicit;return n.qc(4).processAction(e.name)}),n.Wc(1),n.rc(2,"translate"),n.cc()}if(2&t){const t=n.qc(2).$implicit,e=n.qc(4);n.Kb(1),n.Xc(n.uc(2,1,t.localization,"count",e.avatarData._Str_3577))}}function mi(t,e){if(1&t){const t=n.ec();n.dc(0,"li",15),n.nc("click",function(){n.Lc(t);const e=n.qc(2).$implicit;return n.qc(4).processAction(e.name)}),n.Wc(1),n.rc(2,"translate"),n.cc()}if(2&t){const t=n.qc(2).$implicit;n.Kb(1),n.Xc(n.sc(2,1,t.localization))}}function pi(t,e){if(1&t&&(n.bc(0,12),n.Uc(1,gi,3,5,"li",13),n.Uc(2,mi,3,3,"li",14),n.ac()),2&t){const t=n.qc().$implicit;n.yc("ngSwitch",t.name),n.Kb(1),n.yc("ngSwitchCase","respect")}}function fi(t,e){if(1&t&&(n.bc(0),n.Uc(1,pi,3,2,"ng-container",11),n.ac()),2&t){const t=e.$implicit;n.Kb(1),n.yc("ngIf",t.visible)}}function Ei(t,e){if(1&t&&(n.dc(0,"ul",10),n.Uc(1,fi,2,1,"ng-container",8),n.cc()),2&t){const t=n.qc().$implicit;n.Kb(1),n.yc("ngForOf",t.items)}}function Si(t,e){if(1&t&&(n.bc(0),n.Uc(1,Ei,2,1,"ul",9),n.ac()),2&t){const t=e.$implicit,s=n.qc(2);n.Kb(1),n.yc("ngIf",s.mode===t.mode)}}function bi(t,e){if(1&t&&(n.dc(0,"div",7),n.Uc(1,Si,2,1,"ng-container",8),n.cc()),2&t){const t=n.qc();n.Kb(1),n.yc("ngForOf",t.menu)}}let vi=(()=>{class t extends hi{constructor(t){super(),this._settingsService=t,this.avatarData=null,this.mode=0,this.menu=[]}static setup(t,e,s,n,i,r){t.avatarData=r,hi.extendedSetup(t,e,s,n,i),t.setupButtons()}setupButtons(){let e=!1;const s=this.widget.handler,n=s.container.roomEngine.getRoomObject(s.roomSession.roomId,s.container.roomSession.ownRoomIndex,k.a.UNIT);if(n){const t=n.model.getValue(V.a.FIGURE_CARRY_OBJECT);t>0&&t<999999&&(e=!0)}this.menu=[{mode:t.MODE_NORMAL,items:[{name:"friend",localization:"infostand.button.friend",visible:this.avatarData.canBeAskedForAFriend},{name:"trade",localization:"infostand.button.trade",visible:!0},{name:"whisper",localization:"infostand.button.whisper",visible:!0},{name:"respect",localization:"infostand.button.respect",visible:this.avatarData._Str_3577>0},{name:"ignore",localization:"infostand.button.ignore",visible:!this.avatarData._Str_3655},{name:"unignore",localization:"infostand.button.unignore",visible:this.avatarData._Str_3655},{name:"report",localization:"infostand.button.report",visible:!0},{name:"moderate",localization:"infostand.link.moderate",visible:this.moderateMenuHasContent()},{name:"ambassador",localization:"infostand.link.ambassador",visible:this.ambassadorMenuHasContent()},{name:"pass_handitem",localization:"avatar.widget.pass_hand_item",visible:e}]},{mode:t.MODE_MODERATE,items:[{name:"kick",localization:"infostand.button.kick",visible:!0},{name:"mute",localization:"infostand.button.mute",visible:!0},{name:"ban",localization:"infostand.button.ban",visible:!0},{name:"give_rights",localization:"infostand.button.giverights",visible:this.isShowGiveRights()},{name:"remove_rights",localization:"infostand.button.removerights",visible:this.isShowRemoveRights()},{name:"back",localization:"generic.back",visible:!0}]},{mode:t.MODE_MODERATE_BAN,items:[{name:"ban_hour",localization:"infostand.button.ban_hour",visible:!0},{name:"ban_day",localization:"infostand.button.ban_day",visible:!0},{name:"ban_perm",localization:"infostand.button.ban_perm",visible:!0},{name:"back_moderate",localization:"generic.back",visible:!0}]},{mode:t.MODE_MODERATE_MUTE,items:[{name:"mute_2min",localization:"infostand.button.mute_2min",visible:!0},{name:"mute_5min",localization:"infostand.button.mute_5min",visible:!0},{name:"mute_10min",localization:"infostand.button.mute_10min",visible:!0},{name:"back_moderate",localization:"generic.back",visible:!0}]},{mode:t.MODE_AMBASSADOR,items:[{name:"ambassador_alert",localization:"infostand.button.alert",visible:!0},{name:"ambassador_kick",localization:"infostand.button.kick",visible:!0},{name:"ambassador_mute",localization:"infostand.button.mute",visible:!0},{name:"back",localization:"generic.back",visible:!0}]},{mode:t.MODE_AMBASSADOR_MUTE,items:[{name:"ambassador_mute_2min",localization:"infostand.button.mute_2min",visible:!0},{name:"ambassador_mute_10min",localization:"infostand.button.mute_10min",visible:!0},{name:"ambassador_mute_60min",localization:"infostand.button.mute_60min",visible:!0},{name:"ambassador_mute_18hr",localization:"infostand.button.mute_18hr",visible:!0},{name:"back_ambassador",localization:"generic.back",visible:!0}]}]}processAction(e){let s=null,n=null,i=!0;if(e){switch(e){case"moderate":i=!1,this.setMode(t.MODE_MODERATE);break;case"ban":i=!1,this.setMode(t.MODE_MODERATE_BAN);break;case"mute":i=!1,this.setMode(t.MODE_MODERATE_MUTE);break;case"ambassador":i=!1,this.setMode(t.MODE_AMBASSADOR);break;case"ambassador_mute":i=!1,this.setMode(t.MODE_AMBASSADOR_MUTE);break;case"back_moderate":i=!1,this.setMode(t.MODE_MODERATE);break;case"back_ambassador":i=!1,this.setMode(t.MODE_AMBASSADOR);break;case"back":i=!1,this.setMode(t.MODE_NORMAL);break;case"whisper":s=ht.RWUAM_WHISPER_USER;break;case"friend":this.avatarData.canBeAskedForAFriend=!1,s=ht.RWUAM_SEND_FRIEND_REQUEST;break;case"respect":this.avatarData._Str_3577--,s=ht.RWUAM_RESPECT_USER,this.avatarData._Str_3577>0&&(i=!1);break;case"ignore":this.avatarData._Str_3655=!0,s=ht.RWUAM_IGNORE_USER;break;case"unignore":this.avatarData._Str_3655=!1,s=ht.RWUAM_UNIGNORE_USER;break;case"kick":s=ht.RWUAM_KICK_USER;break;case"ban_hour":s=ht.RWUAM_BAN_USER_HOUR;break;case"ban_day":s=ht.RWUAM_BAN_USER_DAY;break;case"perm_ban":s=ht.RWUAM_BAN_USER_PERM;break;case"mute_2min":s=ht.MUTE_USER_2MIN;break;case"mute_5min":s=ht.MUTE_USER_5MIN;break;case"mute_10min":s=ht.MUTE_USER_10MIN;break;case"give_rights":this.avatarData.roomControllerLevel=K.a.GUEST,s=ht.RWUAM_GIVE_RIGHTS;break;case"remove_rights":this.avatarData.roomControllerLevel=K.a.NONE,s=ht.RWUAM_TAKE_RIGHTS;break;case"trade":s=ht.RWUAM_START_TRADING;break;case"report":s=ht.RWUAM_REPORT_CFH_OTHER;break;case"pass_handitem":s=ht.RWUAM_PASS_CARRY_ITEM;break;case"ambassador_alert":s=ht.RWUAM_AMBASSADOR_ALERT_USER;break;case"ambassador_kick":s=ht.RWUAM_AMBASSADOR_KICK_USER;break;case"ambassador_mute_2min":s=ht.AMBASSADOR_MUTE_USER_2MIN;break;case"ambassador_mute_10min":s=ht.AMBASSADOR_MUTE_USER_10MIN;break;case"ambassador_mute_60min":s=ht.AMBASSADOR_MUTE_USER_60MIN;break;case"ambassador_mute_18hour":s=ht.AMBASSADOR_MUTE_USER_18HOUR}s&&(n=new ht(s,this.userId)),n&&this.parent.messageListener.processWidgetMessage(n)}i&&this.parent.removeView(this.componentRef,!1)}setMode(t){t!==this.mode&&(this.mode=t)}ambassadorMenuHasContent(){return this.avatarData._Str_4050}moderateMenuHasContent(){return this.avatarData._Str_5990||this.avatarData._Str_6701||this.avatarData._Str_6394||this.isShowGiveRights()||this.isShowRemoveRights()}isShowGiveRights(){return this.avatarData._Str_3246&&this.avatarData._Str_5599<K.a.GUEST}isShowRemoveRights(){return this.avatarData._Str_3246&&this.avatarData._Str_5599===K.a.GUEST}toggleVisibility(){this._settingsService.toggleUserContextVisible()}get visible(){return this._settingsService.userContextVisible}get widget(){return this.parent}}return t.MODE_NORMAL=0,t.MODE_MODERATE=1,t.MODE_MODERATE_BAN=2,t.MODE_MODERATE_MUTE=3,t.MODE_AMBASSADOR=4,t.MODE_AMBASSADOR_MUTE=5,t.\u0275fac=function(e){return new(e||t)(n.Yb(g))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-room-avatarinfo-avatar-component"]],viewQuery:function(t,e){if(1&t&&n.cd(_i,1),2&t){let t;n.Hc(t=n.oc())&&(e.activeView=t.first)}},features:[n.Hb],decls:5,vars:3,consts:[[1,"nitro-room-avatarinfo-component","context-menu","card","align-items-center"],["activeView",""],["class","drag-handler d-flex justify-content-center align-items-center p-1 px-2 w-100",4,"ngIf"],["class","d-flex flex-column mb-1 w-100",4,"ngIf"],[1,"fas","small","visibility-toggle","mb-1","w-100","text-center",3,"ngClass","click"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","p-1","px-2","w-100"],[1,"m-0"],[1,"d-flex","flex-column","mb-1","w-100"],[4,"ngFor","ngForOf"],["class","list-group list-group-flush",4,"ngIf"],[1,"list-group","list-group-flush"],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],["class","list-group-item",3,"click",4,"ngSwitchCase"],["class","list-group-item",3,"click",4,"ngSwitchDefault"],[1,"list-group-item",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0,1),n.Uc(2,di,3,1,"div",2),n.Uc(3,bi,2,1,"div",3),n.dc(4,"i",4),n.nc("click",function(){return e.toggleVisibility()}),n.cc(),n.cc()),2&t&&(n.Kb(2),n.yc("ngIf",e.visible),n.Kb(1),n.yc("ngIf",e.visible),n.Kb(1),n.yc("ngClass",e.visible?"fa-chevron-down":"fa-chevron-up m-2"))},directives:[m.n,m.l,m.m,m.p,m.q,m.r],pipes:[ui],encapsulation:2}),t})();const Ii=["activeView"];let Ri=(()=>{class t extends hi{static setup(t,e,s,n,i){t.willFade=!1,hi.extendedSetup(t,e,s,n,i)}stopDecorating(){this.widget.isDecorating=!1}get widget(){return this.parent}get maximumOpacity(){return.8}}return t.\u0275fac=function(e){return Ti(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-room-avatarinfo-decorate-component"]],viewQuery:function(t,e){if(1&t&&n.cd(Ii,1),2&t){let t;n.Hc(t=n.oc())&&(e.activeView=t.first)}},features:[n.Hb],decls:7,vars:3,consts:[[1,"nitro-room-avatarinfo-component","context-menu","card","align-items-center"],["activeView",""],[1,"d-flex","flex-column","w-100","py-1"],[1,"list-group","list-group-flush"],[1,"list-group-item",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0,1),n.dc(2,"div",2),n.dc(3,"ul",3),n.dc(4,"li",4),n.nc("click",function(){return e.stopDecorating()}),n.Wc(5),n.rc(6,"translate"),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(5),n.Xc(n.sc(6,1,"widget.avatar.stop_decorating")))},pipes:[ui],encapsulation:2}),t})();const Ti=n.fc(Ri),yi=["activeView"],Oi=function(){return["bg-success"]};let Ci=(()=>{class t extends hi{constructor(){super(...arguments),this.isFriend=!1}static setup(t,e,s,n,i,r=!1){t.willFade=r,hi.extendedSetup(t,e,s,n,i)}}return t.\u0275fac=function(e){return Ai(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-room-avatarinfo-name-component"]],viewQuery:function(t,e){if(1&t&&n.cd(yi,1),2&t){let t;n.Hc(t=n.oc())&&(e.activeView=t.first)}},features:[n.Hb],decls:5,vars:3,consts:[[1,"nitro-room-avatarinfo-component","context-menu","card","align-items-center",3,"ngClass"],["activeView",""],[1,"drag-handler","d-flex","justify-content-center","align-items-center","p-1","px-2","w-100"],[1,"m-0"]],template:function(t,e){1&t&&(n.dc(0,"div",0,1),n.dc(2,"div",2),n.dc(3,"p",3),n.Wc(4),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("ngClass",e.isFriend&&n.Bc(2,Oi)),n.Kb(4),n.Xc(e.userName))},directives:[m.l],encapsulation:2}),t})();const Ai=n.fc(Ci);let Mi=(()=>{class t{constructor(t){this._sanitizer=t}transform(t){return this._sanitizer.bypassSecurityTrustHtml(t)}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(i.b))},t.\u0275pipe=n.Xb({name:"keepHtml",type:t,pure:!1}),t})();const wi=["activeView"];function Ui(t,e){if(1&t&&(n.dc(0,"div",5),n.dc(1,"p",6),n.Wc(2),n.cc(),n.cc()),2&t){const t=n.qc();n.Kb(2),n.Xc(t.userName)}}function Di(t,e){if(1&t){const t=n.ec();n.dc(0,"li",13),n.nc("click",function(){n.Lc(t);const e=n.qc().$implicit;return n.qc(4).processAction(e.name)}),n.rc(1,"keepHtml"),n.rc(2,"translate"),n.cc()}if(2&t){const t=n.qc().$implicit;n.yc("innerHTML","11"===t.name||"12"===t.name||"13"===t.name||"14"===t.name||"15"===t.name?n.sc(1,1,t.localization):n.sc(2,3,t.localization),n.Mc)}}function Ni(t,e){if(1&t&&(n.bc(0),n.Uc(1,Di,3,5,"li",12),n.ac()),2&t){const t=e.$implicit;n.Kb(1),n.yc("ngIf",t.visible)}}const Li=function(t){return{"columns-3":t}};function Pi(t,e){if(1&t&&(n.dc(0,"ul",11),n.Uc(1,Ni,2,1,"ng-container",8),n.cc()),2&t){const t=n.qc().$implicit;n.yc("ngClass",n.Cc(2,Li,4===t.mode)),n.Kb(1),n.yc("ngForOf",t.items)}}function xi(t,e){if(1&t&&(n.bc(0),n.Uc(1,Pi,2,4,"ul",10),n.ac()),2&t){const t=e.$implicit,s=n.qc(2);n.Kb(1),n.yc("ngIf",s.mode===t.mode)}}function Fi(t,e){if(1&t){const t=n.ec();n.dc(0,"ul",14),n.dc(1,"li",15),n.nc("click",function(){return n.Lc(t),n.qc(2).processAction("back")}),n.Wc(2),n.rc(3,"translate"),n.cc(),n.cc()}2&t&&(n.Kb(2),n.Xc(n.sc(3,1,"generic.back")))}function ki(t,e){if(1&t&&(n.dc(0,"div",7),n.Uc(1,xi,2,1,"ng-container",8),n.Uc(2,Fi,4,3,"ul",9),n.cc()),2&t){const t=n.qc();n.Kb(1),n.yc("ngForOf",t.menu),n.Kb(1),n.yc("ngIf",4===t.mode)}}let Wi=(()=>{class t extends hi{constructor(t){super(),this._settingsService=t,this.avatarData=null,this.mode=0,this.menu=[]}static setup(e,s,n,i,r,a){e.avatarData=a,e.widget.isDancing&&e.widget.hasClub&&(e.mode=t.MODE_CLUB_DANCES),hi.extendedSetup(e,s,n,i,r),e.setupButtons()}setupButtons(){const e=this.widget._Str_25831;this.menu=[{mode:t.MODE_NORMAL,items:[{name:"decorate",localization:"widget.avatar.decorate",visible:this.widget.hasClub&&this.avatarData.roomControllerLevel>=K.a.GUEST||this.avatarData._Str_3246},{name:"change_looks",localization:"widget.memenu.myclothes",visible:!0},{name:"dance_menu",localization:"widget.memenu.dance",visible:this.widget.hasClub&&!e},{name:"dance",localization:"widget.memenu.dance",visible:!this.widget.isDancing&&!this.widget.hasClub&&!e},{name:"dance_stop",localization:"widget.memenu.dance.stop",visible:this.widget.isDancing&&!this.widget.hasClub&&!e},{name:"expressions",localization:"infostand.link.expressions",visible:!0},{name:"signs",localization:"infostand.show.signs",visible:!0},{name:"drop_hand_item",localization:"avatar.widget.drop_hand_item",visible:this.avatarData._Str_8826>0&&this.avatarData._Str_8826<999999}]},{mode:t.MODE_CLUB_DANCES,items:[{name:"dance_stop",localization:"widget.memenu.dance.stop",visible:this.widget.isDancing},{name:"dance_1",localization:"widget.memenu.dance1",visible:!0},{name:"dance_2",localization:"widget.memenu.dance2",visible:!0},{name:"dance_3",localization:"widget.memenu.dance3",visible:!0},{name:"dance_4",localization:"widget.memenu.dance4",visible:!0},{name:"back",localization:"generic.back",visible:!0}]},{mode:t.MODE_EXPRESSIONS,items:[{name:"sit",localization:"widget.memenu.sit",visible:this.widget.getOwnPosture===si.a.POSTURE_STAND},{name:"stand",localization:"widget.memenu.stand",visible:this.widget.getCanStandUp},{name:"wave",localization:"widget.memenu.wave",visible:!this.widget._Str_12708},{name:"laugh",localization:"widget.memenu.laugh",visible:!this.widget._Str_12708&&this.widget.hasVip},{name:"blow",localization:"widget.memenu.blow",visible:!this.widget._Str_12708&&this.widget.hasVip},{name:"idle",localization:"widget.memenu.idle",visible:!0},{name:"back",localization:"generic.back",visible:!0}]},{mode:t.MODE_SIGNS,items:[{name:"sign_1",localization:"1",visible:!0},{name:"sign_4",localization:"4",visible:!0},{name:"sign_7",localization:"7",visible:!0},{name:"sign_10",localization:"10",visible:!0},{name:"sign_0",localization:"0",visible:!0},{name:"sign_14",localization:'<i class="icon icon-sign-soccer"></i>',visible:!0},{name:"sign_2",localization:"2",visible:!0},{name:"sign_5",localization:"5",visible:!0},{name:"sign_8",localization:"8",visible:!0},{name:"sign_11",localization:'<i class="icon icon-sign-heart"></i>',visible:!0},{name:"sign_13",localization:'<i class="icon icon-sign-exclamation"></i>',visible:!0},{name:"sign_17",localization:'<i class="icon icon-sign-yellow"></i>',visible:!0},{name:"sign_3",localization:"3",visible:!0},{name:"sign_6",localization:"6",visible:!0},{name:"sign_9",localization:"9",visible:!0},{name:"sign_12",localization:'<i class="icon icon-sign-skull"></i>',visible:!0},{name:"sign_15",localization:'<i class="icon icon-sign-smile"></i>',visible:!0},{name:"sign_16",localization:'<i class="icon icon-sign-red"></i>',visible:!0}]}]}processAction(e){let s=null,n=!0;if(e){if(e.startsWith("sign_")){const t=parseInt(e.split("_")[1]);this.widget.useSign(t)}else switch(e){case"decorate":this.widget.hasClub&&(this.widget.isDecorating=!0);break;case"change_looks":this.widget.openAvatarEditor();break;case"expressions":n=!1,this.setMode(t.MODE_EXPRESSIONS);break;case"sit":s=new ot(ot._Str_2016);break;case"stand":s=new ot(ot._Str_1553);break;case"wave":s=new at(gt._Str_6268);break;case"blow":s=new at(gt._Str_5579);break;case"laugh":s=new at(gt._Str_7336);break;case"idle":s=new at(gt._Str_6989);break;case"dance_menu":n=!1,this.setMode(t.MODE_CLUB_DANCES);break;case"dance":s=new ct(1);break;case"dance_stop":s=new ct(0);break;case"dance_1":case"dance_2":case"dance_3":case"dance_4":s=new ct(parseInt(e.charAt(e.length-1)));break;case"signs":n=!1,this.setMode(t.MODE_SIGNS);break;case"back":case"more":n=!1,this.setMode(t.MODE_NORMAL);break;case"drop_hand_item":s=new ht(ht.RWUAM_DROP_CARRY_ITEM,this.userId)}s&&this.parent.messageListener.processWidgetMessage(s)}n&&this.parent.removeView(this.componentRef,!1)}setMode(t){t!==this.mode&&(this.mode=t)}toggleVisibility(){this._settingsService.toggleUserContextVisible()}get visible(){return this._settingsService.userContextVisible}get widget(){return this.parent}}return t.MODE_NORMAL=0,t.MODE_CLUB_DANCES=1,t.MODE_NAME_CHANGE=2,t.MODE_EXPRESSIONS=3,t.MODE_SIGNS=4,t.MODE_CHANGE_LOOKS=5,t.\u0275fac=function(e){return new(e||t)(n.Yb(g))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-room-avatarinfo-ownavatar-component"]],viewQuery:function(t,e){if(1&t&&n.cd(wi,1),2&t){let t;n.Hc(t=n.oc())&&(e.activeView=t.first)}},features:[n.Hb],decls:5,vars:4,consts:[[1,"nitro-room-avatarinfo-component","context-menu","card","align-items-center",3,"ngClass"],["activeView",""],["class","drag-handler d-flex justify-content-center align-items-center p-1 px-2 w-100",4,"ngIf"],["class","d-flex flex-column mb-1 w-100",4,"ngIf"],[1,"fas","small","visibility-toggle","mb-1","w-100","text-center",3,"ngClass","click"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","p-1","px-2","w-100"],[1,"m-0","text-truncate"],[1,"d-flex","flex-column","mb-1","w-100"],[4,"ngFor","ngForOf"],["class","list-group list-group-flush",4,"ngIf"],["class","list-group list-group-flush",3,"ngClass",4,"ngIf"],[1,"list-group","list-group-flush",3,"ngClass"],["class","list-group-item",3,"innerHTML","click",4,"ngIf"],[1,"list-group-item",3,"innerHTML","click"],[1,"list-group","list-group-flush"],[1,"list-group-item",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0,1),n.Uc(2,Ui,3,1,"div",2),n.Uc(3,ki,3,2,"div",3),n.dc(4,"i",4),n.nc("click",function(){return e.toggleVisibility()}),n.cc(),n.cc()),2&t&&(n.yc("ngClass",e.visible?"":"has-hidden"),n.Kb(2),n.yc("ngIf",e.visible),n.Kb(1),n.yc("ngIf",e.visible),n.Kb(1),n.yc("ngClass",e.visible?"fa-chevron-down":"fa-chevron-up m-2"))},directives:[m.l,m.n,m.m],pipes:[Mi,ui],encapsulation:2}),t})();const Bi=["activeView"];function Vi(t,e){if(1&t&&(n.dc(0,"div",5),n.dc(1,"p",6),n.Wc(2),n.cc(),n.cc()),2&t){const t=n.qc();n.Kb(2),n.Xc(t.userName)}}function Gi(t,e){if(1&t){const t=n.ec();n.dc(0,"li",15),n.nc("click",function(){n.Lc(t);const e=n.qc(2).$implicit;return n.qc(4).processAction(e.name)}),n.Wc(1),n.rc(2,"translate"),n.cc()}if(2&t){const t=n.qc(2).$implicit,e=n.qc(4);n.Kb(1),n.Xc(n.uc(2,1,t.localization,"count",e.avatarData._Str_3577))}}function Ki(t,e){if(1&t){const t=n.ec();n.dc(0,"li",15),n.nc("click",function(){n.Lc(t);const e=n.qc(2).$implicit;return n.qc(4).processAction(e.name)}),n.Wc(1),n.rc(2,"translate"),n.cc()}if(2&t){const t=n.qc(2).$implicit;n.Kb(1),n.Xc(n.sc(2,1,t.localization))}}function Hi(t,e){if(1&t&&(n.bc(0,12),n.Uc(1,Gi,3,5,"li",13),n.Uc(2,Ki,3,3,"li",14),n.ac()),2&t){const t=n.qc().$implicit;n.yc("ngSwitch",t.name),n.Kb(1),n.yc("ngSwitchCase","respect")}}function ji(t,e){if(1&t&&(n.bc(0),n.Uc(1,Hi,3,2,"ng-container",11),n.ac()),2&t){const t=e.$implicit;n.Kb(1),n.yc("ngIf",t.visible)}}function zi(t,e){if(1&t&&(n.dc(0,"ul",10),n.Uc(1,ji,2,1,"ng-container",8),n.cc()),2&t){const t=n.qc().$implicit;n.Kb(1),n.yc("ngForOf",t.items)}}function Yi(t,e){if(1&t&&(n.bc(0),n.Uc(1,zi,2,1,"ul",9),n.ac()),2&t){const t=e.$implicit,s=n.qc(2);n.Kb(1),n.yc("ngIf",s.mode===t.mode)}}function qi(t,e){if(1&t&&(n.dc(0,"div",7),n.Uc(1,Yi,2,1,"ng-container",8),n.cc()),2&t){const t=n.qc();n.Kb(1),n.yc("ngForOf",t.menu)}}let Xi=(()=>{class t extends hi{constructor(t){super(),this._settingsService=t,this.avatarData=null,this.mode=0,this.menu=[]}static setup(t,e,s,n,i,r){t.avatarData=r,hi.extendedSetup(t,e,s,n,i),t.setupButtons()}setupButtons(){let e=!1;const s=this.widget.handler,n=s.container.roomEngine.getRoomObject(s.roomSession.roomId,s.container.roomSession.ownRoomIndex,k.a.UNIT);if(n){const t=n.model.getValue(V.a.FIGURE_CARRY_OBJECT);t>0&&t<999999&&(e=!0)}this.menu=[{mode:t.MODE_NORMAL,items:[{name:"test",localization:"infostand.button.test",visible:!0}]}]}processAction(t){let e=!0;if(t)switch(t){case"moderate":e=!1}e&&this.parent.removeView(this.componentRef,!1)}toggleVisibility(){this._settingsService.toggleUserContextVisible()}get visible(){return this._settingsService.userContextVisible}get widget(){return this.parent}}return t.MODE_NORMAL=0,t.\u0275fac=function(e){return new(e||t)(n.Yb(g))},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&n.cd(Bi,1),2&t){let t;n.Hc(t=n.oc())&&(e.activeView=t.first)}},features:[n.Hb],decls:5,vars:3,consts:[[1,"nitro-room-avatarinfo-component","context-menu","card","align-items-center"],["activeView",""],["class","drag-handler d-flex justify-content-center align-items-center p-1 px-2 w-100",4,"ngIf"],["class","d-flex flex-column mb-1 w-100",4,"ngIf"],[1,"fas","small","visibility-toggle","mb-1","w-100","text-center",3,"ngClass","click"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","p-1","px-2","w-100"],[1,"m-0"],[1,"d-flex","flex-column","mb-1","w-100"],[4,"ngFor","ngForOf"],["class","list-group list-group-flush",4,"ngIf"],[1,"list-group","list-group-flush"],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],["class","list-group-item",3,"click",4,"ngSwitchCase"],["class","list-group-item",3,"click",4,"ngSwitchDefault"],[1,"list-group-item",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0,1),n.Uc(2,Vi,3,1,"div",2),n.Uc(3,qi,2,1,"div",3),n.dc(4,"i",4),n.nc("click",function(){return e.toggleVisibility()}),n.cc(),n.cc()),2&t&&(n.Kb(2),n.yc("ngIf",e.visible),n.Kb(1),n.yc("ngIf",e.visible),n.Kb(1),n.yc("ngClass",e.visible?"fa-chevron-down":"fa-chevron-up m-2"))},directives:[m.n,m.l,m.m,m.p,m.q,m.r],pipes:[ui],encapsulation:2}),t})();const Zi=["activeView"];function Qi(t,e){if(1&t&&(n.dc(0,"div",5),n.dc(1,"p",6),n.Wc(2),n.cc(),n.cc()),2&t){const t=n.qc();n.Kb(2),n.Xc(t.userName)}}function Ji(t,e){if(1&t){const t=n.ec();n.dc(0,"li",15),n.nc("click",function(){n.Lc(t);const e=n.qc(2).$implicit;return n.qc(4).processAction(e.name)}),n.Wc(1),n.rc(2,"translate"),n.cc()}if(2&t){const t=n.qc(2).$implicit,e=n.qc(4);n.Kb(1),n.Xc(n.uc(2,1,t.localization,"count",e.avatarData._Str_3577))}}function $i(t,e){if(1&t){const t=n.ec();n.dc(0,"li",15),n.nc("click",function(){n.Lc(t);const e=n.qc(2).$implicit;return n.qc(4).processAction(e.name)}),n.Wc(1),n.rc(2,"translate"),n.cc()}if(2&t){const t=n.qc(2).$implicit;n.Kb(1),n.Xc(n.sc(2,1,t.localization))}}function tr(t,e){if(1&t&&(n.bc(0,12),n.Uc(1,Ji,3,5,"li",13),n.Uc(2,$i,3,3,"li",14),n.ac()),2&t){const t=n.qc().$implicit;n.yc("ngSwitch",t.name),n.Kb(1),n.yc("ngSwitchCase","respect")}}function er(t,e){if(1&t&&(n.bc(0),n.Uc(1,tr,3,2,"ng-container",11),n.ac()),2&t){const t=e.$implicit;n.Kb(1),n.yc("ngIf",t.visible)}}function sr(t,e){if(1&t&&(n.dc(0,"ul",10),n.Uc(1,er,2,1,"ng-container",8),n.cc()),2&t){const t=n.qc().$implicit;n.Kb(1),n.yc("ngForOf",t.items)}}function nr(t,e){if(1&t&&(n.bc(0),n.Uc(1,sr,2,1,"ul",9),n.ac()),2&t){const t=e.$implicit,s=n.qc(2);n.Kb(1),n.yc("ngIf",s.mode===t.mode)}}function ir(t,e){if(1&t&&(n.dc(0,"div",7),n.Uc(1,nr,2,1,"ng-container",8),n.cc()),2&t){const t=n.qc();n.Kb(1),n.yc("ngForOf",t.menu)}}let rr=(()=>{class t extends hi{constructor(t){super(),this._settingsService=t,this.avatarData=null,this.mode=0,this.menu=[]}static setup(t,e,s,n,i,r){t.avatarData=r,hi.extendedSetup(t,e,s,n,i),t.setupButtons()}setupButtons(){let e=!1;const s=this.widget.handler,n=s.container.roomEngine.getRoomObject(s.roomSession.roomId,s.container.roomSession.ownRoomIndex,k.a.UNIT);if(n){const t=n.model.getValue(V.a.FIGURE_CARRY_OBJECT);t>0&&t<999999&&(e=!0)}this.menu=[{mode:t.MODE_NORMAL,items:[{name:"test",localization:"infostand.button.test",visible:!0}]}]}processAction(t){let e=!0;if(t)switch(t){case"moderate":e=!1}e&&this.parent.removeView(this.componentRef,!1)}toggleVisibility(){this._settingsService.toggleUserContextVisible()}get visible(){return this._settingsService.userContextVisible}get widget(){return this.parent}}return t.MODE_NORMAL=0,t.\u0275fac=function(e){return new(e||t)(n.Yb(g))},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&n.cd(Zi,1),2&t){let t;n.Hc(t=n.oc())&&(e.activeView=t.first)}},features:[n.Hb],decls:5,vars:3,consts:[[1,"nitro-room-avatarinfo-component","context-menu","card","align-items-center"],["activeView",""],["class","drag-handler d-flex justify-content-center align-items-center p-1 px-2 w-100",4,"ngIf"],["class","d-flex flex-column mb-1 w-100",4,"ngIf"],[1,"fas","small","visibility-toggle","mb-1","w-100","text-center",3,"ngClass","click"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","p-1","px-2","w-100"],[1,"m-0"],[1,"d-flex","flex-column","mb-1","w-100"],[4,"ngFor","ngForOf"],["class","list-group list-group-flush",4,"ngIf"],[1,"list-group","list-group-flush"],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],["class","list-group-item",3,"click",4,"ngSwitchCase"],["class","list-group-item",3,"click",4,"ngSwitchDefault"],[1,"list-group-item",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0,1),n.Uc(2,Qi,3,1,"div",2),n.Uc(3,ir,2,1,"div",3),n.dc(4,"i",4),n.nc("click",function(){return e.toggleVisibility()}),n.cc(),n.cc()),2&t&&(n.Kb(2),n.yc("ngIf",e.visible),n.Kb(1),n.yc("ngIf",e.visible),n.Kb(1),n.yc("ngClass",e.visible?"fa-chevron-down":"fa-chevron-up m-2"))},directives:[m.n,m.l,m.m,m.p,m.q,m.r],pipes:[ui],encapsulation:2}),t})();var ar=s("pIFH"),or=s("lsmK"),cr=s("V2Y4"),lr=s("YQxP");let hr=(()=>{class t{}return t._Str_19584=0,t.DRESS_UP=1,t.SETUP_CHAT=2,t.RANDOM_WALK=3,t.DANCE=4,t.CHANGE_BOT_NAME=5,t._Str_20280=6,t._Str_18934=7,t._Str_14917=8,t.CHANGE_BOT_MOTTO=9,t.NUX_TAKE_TOUR=10,t._Str_17261=12,t._Str_18173=14,t.DONATE_TO_USER=24,t.DONATE_TO_ALL=25,t})();var ur=s("3Pt+");const _r=["activeView"];function dr(t,e){if(1&t&&(n.dc(0,"div",5),n.dc(1,"p",6),n.Wc(2),n.cc(),n.cc()),2&t){const t=n.qc();n.Kb(2),n.Xc(t.userName)}}function gr(t,e){if(1&t){const t=n.ec();n.dc(0,"li",15),n.nc("click",function(){n.Lc(t);const e=n.qc(2).$implicit;return n.qc(4).processAction(e.name)}),n.Wc(1),n.rc(2,"translate"),n.cc()}if(2&t){const t=n.qc(2).$implicit,e=n.qc(4);n.Kb(1),n.Xc(n.uc(2,1,t.localization,"count",e.avatarData._Str_3577))}}function mr(t,e){if(1&t){const t=n.ec();n.dc(0,"li",15),n.nc("click",function(){n.Lc(t);const e=n.qc(2).$implicit;return n.qc(4).processAction(e.name)}),n.Wc(1),n.rc(2,"translate"),n.cc()}if(2&t){const t=n.qc(2).$implicit;n.Kb(1),n.Xc(n.sc(2,1,t.localization))}}function pr(t,e){if(1&t&&(n.bc(0,8),n.Uc(1,gr,3,5,"li",13),n.Uc(2,mr,3,3,"li",14),n.ac()),2&t){const t=n.qc().$implicit;n.yc("ngSwitch",t.name),n.Kb(1),n.yc("ngSwitchCase","respect")}}function fr(t,e){if(1&t&&(n.bc(0),n.Uc(1,pr,3,2,"ng-container",12),n.ac()),2&t){const t=e.$implicit;n.Kb(1),n.yc("ngIf",t.visible)}}function Er(t,e){if(1&t&&(n.bc(0),n.dc(1,"ul",11),n.Uc(2,fr,2,1,"ng-container",10),n.cc(),n.ac()),2&t){const t=e.$implicit;n.Kb(2),n.yc("ngForOf",t.items)}}function Sr(t,e){if(1&t&&(n.bc(0),n.Uc(1,Er,3,1,"ng-container",10),n.ac()),2&t){const t=n.qc(2);n.Kb(1),n.yc("ngForOf",t.menu)}}function br(t,e){if(1&t){const t=n.ec();n.bc(0),n.dc(1,"div",16),n.dc(2,"p",17),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"input",18),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc(2).newName=e}),n.cc(),n.dc(6,"div",19),n.dc(7,"button",20),n.nc("click",function(){return n.Lc(t),n.qc(2).processAction("")}),n.Wc(8),n.rc(9,"translate"),n.cc(),n.dc(10,"button",21),n.nc("click",function(){return n.Lc(t),n.qc(2).processAction("save_bot_name")}),n.Wc(11),n.rc(12,"translate"),n.cc(),n.cc(),n.cc(),n.ac()}if(2&t){const t=n.qc(2);n.Kb(3),n.Xc(n.sc(4,4,"bot.skill.name.configuration.new.name")),n.Kb(2),n.yc("ngModel",t.newName),n.Kb(3),n.Xc(n.sc(9,6,"cancel")),n.Kb(3),n.Xc(n.sc(12,8,"save"))}}function vr(t,e){if(1&t){const t=n.ec();n.bc(0),n.dc(1,"div",16),n.dc(2,"p",17),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"input",18),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc(2).newMotto=e}),n.cc(),n.dc(6,"div",19),n.dc(7,"button",20),n.nc("click",function(){return n.Lc(t),n.qc(2).processAction("")}),n.Wc(8),n.rc(9,"translate"),n.cc(),n.dc(10,"button",21),n.nc("click",function(){return n.Lc(t),n.qc(2).processAction("save_bot_motto")}),n.Wc(11),n.rc(12,"translate"),n.cc(),n.cc(),n.cc(),n.ac()}if(2&t){const t=n.qc(2);n.Kb(3),n.Xc(n.sc(4,4,"bot.skill.name.configuration.new.motto")),n.Kb(2),n.yc("ngModel",t.newMotto),n.Kb(3),n.Xc(n.sc(9,6,"cancel")),n.Kb(3),n.Xc(n.sc(12,8,"save"))}}function Ir(t,e){if(1&t){const t=n.ec();n.bc(0),n.dc(1,"div",16),n.dc(2,"div",22),n.dc(3,"p",17),n.Wc(4),n.rc(5,"translate"),n.cc(),n.dc(6,"textarea",23),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc(2).newText=e}),n.rc(7,"translate"),n.cc(),n.cc(),n.dc(8,"div",24),n.dc(9,"p",25),n.Wc(10),n.rc(11,"translate"),n.cc(),n.dc(12,"div",26),n.dc(13,"input",27),n.nc("click",function(){n.Lc(t);const e=n.qc(2);return e.automaticChat=!e.automaticChat}),n.cc(),n.cc(),n.cc(),n.dc(14,"div",24),n.dc(15,"p",25),n.Wc(16),n.rc(17,"translate"),n.cc(),n.dc(18,"div",26),n.dc(19,"input",27),n.nc("click",function(){n.Lc(t);const e=n.qc(2);return e.mixSentences=!e.mixSentences}),n.cc(),n.cc(),n.cc(),n.dc(20,"div",24),n.dc(21,"p",25),n.Wc(22),n.rc(23,"translate"),n.cc(),n.dc(24,"div",26),n.dc(25,"input",28),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc(2).chatDelay=e}),n.cc(),n.cc(),n.cc(),n.dc(26,"div",29),n.dc(27,"button",20),n.nc("click",function(){return n.Lc(t),n.qc(2).processAction("")}),n.Wc(28),n.rc(29,"translate"),n.cc(),n.dc(30,"button",21),n.nc("click",function(){return n.Lc(t),n.qc(2).processAction("save_bot_motto")}),n.Wc(31),n.rc(32,"translate"),n.cc(),n.cc(),n.cc(),n.ac()}if(2&t){const t=n.qc(2);n.Kb(4),n.Xc(n.sc(5,11,"bot.skill.chatter.configuration.chat.text")),n.Kb(2),n.yc("placeholder",n.sc(7,13,"bot.skill.chatter.configuration.text.placeholder"))("ngModel",t.newText),n.Kb(4),n.Xc(n.sc(11,15,"bot.skill.chatter.configuration.automatic.chat")),n.Kb(3),n.yc("checked",t.automaticChat),n.Kb(3),n.Xc(n.sc(17,17,"bot.skill.chatter.configuration.markov")),n.Kb(3),n.yc("checked",t.mixSentences),n.Kb(3),n.Xc(n.sc(23,19,"bot.skill.chatter.configuration.chat.delay")),n.Kb(3),n.yc("ngModel",t.chatDelay),n.Kb(3),n.Xc(n.sc(29,21,"cancel")),n.Kb(3),n.Xc(n.sc(32,23,"save"))}}function Rr(t,e){if(1&t&&(n.dc(0,"div",7),n.bc(1,8),n.Uc(2,Sr,2,1,"ng-container",9),n.Uc(3,br,13,10,"ng-container",9),n.Uc(4,vr,13,10,"ng-container",9),n.Uc(5,Ir,33,25,"ng-container",9),n.ac(),n.cc()),2&t){const t=n.qc();n.Kb(1),n.yc("ngSwitch",t.mode),n.Kb(1),n.yc("ngSwitchCase",0),n.Kb(1),n.yc("ngSwitchCase",1),n.Kb(1),n.yc("ngSwitchCase",2),n.Kb(1),n.yc("ngSwitchCase",3)}}let Tr=(()=>{class t extends hi{constructor(t,e){super(),this._settingsService=t,this._ngZone=e,this._messageListener=null,this.avatarData=null,this.mode=0,this.menu=[],this.newName="",this.newMotto="",this.newText="",this.automaticChat=!1,this.mixSentences=!1,this.chatDelay=5}static setup(t,e,s,n,i,r){t.avatarData=r,hi.extendedSetup(t,e,s,n,i),t.setupButtons()}ngOnDestroy(){this._messageListener&&(u.a.instance.communication.connection.removeMessageEvent(this._messageListener),this._messageListener=null)}requestBotCommandConfiguration(t){this._messageListener||(this._messageListener=new ar.a(this.onBotCommandConfigurationEvent.bind(this)),u.a.instance.communication.connection.addMessageEvent(this._messageListener)),u.a.instance.communication.connection.send(new or.a(this.userId,t))}onBotCommandConfigurationEvent(t){if(!t)return;const e=t.getParser();e&&e.botId===this.userId&&this._ngZone.run(()=>{switch(e.commandId){case hr.CHANGE_BOT_NAME:return void(this.newName=e.data);case hr.CHANGE_BOT_MOTTO:return void(this.newMotto=e.data);case hr.SETUP_CHAT:{const t=e.data,s=t.split(-1===t.indexOf(";#;")?";":";#;");return void(3!==s.length&&4!==s.length||(this.newText=s[0],this.automaticChat="true"===s[1].toLowerCase()||"1"===s[1],this.chatDelay=parseInt(s[2]),this.mixSentences=!!s[3]&&("true"===s[3].toLowerCase()||"1"===s[3])))}}})}setupButtons(){const e=this.avatarData._Str_3246||this.avatarData._Str_3529;this.menu=[{mode:t.MODE_NORMAL,items:[{name:"donate_to_all",localization:"avatar.widget.donate_to_all",visible:this.avatarData._Str_2899.indexOf(hr.DONATE_TO_ALL)>=0&&e},{name:"donate_to_user",localization:"avatar.widget.donate_to_user",visible:this.avatarData._Str_2899.indexOf(hr.DONATE_TO_USER)>=0&&e},{name:"change_bot_name",localization:"avatar.widget.change_bot_name",visible:this.avatarData._Str_2899.indexOf(hr.CHANGE_BOT_NAME)>=0&&e},{name:"change_bot_motto",localization:"avatar.widget.change_bot_motto",visible:this.avatarData._Str_2899.indexOf(hr.CHANGE_BOT_MOTTO)>=0&&e},{name:"dress_up",localization:"avatar.widget.dress_up",visible:this.avatarData._Str_2899.indexOf(hr.DRESS_UP)>=0&&e},{name:"random_walk",localization:"avatar.widget.random_walk",visible:this.avatarData._Str_2899.indexOf(hr.RANDOM_WALK)>=0&&e},{name:"setup_chat",localization:"avatar.widget.setup_chat",visible:this.avatarData._Str_2899.indexOf(hr.SETUP_CHAT)>=0&&e},{name:"dance",localization:"avatar.widget.dance",visible:this.avatarData._Str_2899.indexOf(hr.DANCE)>=0&&e},{name:"pick",localization:"avatar.widget.pick_up",visible:-1===this.avatarData._Str_2899.indexOf(hr._Str_17261)&&e}]}]}processAction(e){let s=!0;if(e)switch(e){case"donate_to_all":this.widget.handler.container.connection.send(new lr.a(this.avatarData.id,hr.DONATE_TO_ALL,""));break;case"donate_to_user":this.widget.handler.container.connection.send(new lr.a(this.avatarData.id,hr.DONATE_TO_USER,""));break;case"change_bot_name":this.requestBotCommandConfiguration(hr.CHANGE_BOT_NAME),s=!1,this.setMode(t.MODE_CHANGE_NAME);break;case"save_bot_name":this.widget.handler.container.connection.send(new lr.a(this.avatarData.id,hr.CHANGE_BOT_NAME,this.newName));break;case"change_bot_motto":this.requestBotCommandConfiguration(hr.CHANGE_BOT_MOTTO),s=!1,this.setMode(t.MODE_CHANGE_MOTTO);break;case"save_bot_motto":this.widget.handler.container.connection.send(new lr.a(this.avatarData.id,hr.CHANGE_BOT_MOTTO,this.newMotto));break;case"dress_up":this.widget.handler.container.connection.send(new lr.a(this.avatarData.id,hr.DRESS_UP,""));break;case"random_walk":this.widget.handler.container.connection.send(new lr.a(this.avatarData.id,hr.RANDOM_WALK,""));break;case"setup_chat":this.requestBotCommandConfiguration(hr.SETUP_CHAT),s=!1,this.setMode(t.MODE_CHANGE_SPEECH);break;case"dance":this.widget.handler.container.connection.send(new lr.a(this.avatarData.id,hr.DANCE,""));break;case"nux_take_tour":u.a.instance.createLinkEvent("help/tour"),this.widget.handler.container.connection.send(new lr.a(this.avatarData.id,hr.NUX_TAKE_TOUR,""));break;case"pick":this.widget.handler.container.connection.send(new cr.a(this.avatarData.id))}s&&this.parent.removeView(this.componentRef,!1)}setMode(t){t!==this.mode&&(this.mode=t)}toggleVisibility(){this._settingsService.toggleUserContextVisible()}get visible(){return this._settingsService.userContextVisible}get widget(){return this.parent}}return t.MODE_NORMAL=0,t.MODE_CHANGE_NAME=1,t.MODE_CHANGE_MOTTO=2,t.MODE_CHANGE_SPEECH=3,t.\u0275fac=function(e){return new(e||t)(n.Yb(g),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&n.cd(_r,1),2&t){let t;n.Hc(t=n.oc())&&(e.activeView=t.first)}},features:[n.Hb],decls:5,vars:3,consts:[[1,"nitro-room-avatarinfo-component","context-menu","card","align-items-center"],["activeView",""],["class","drag-handler d-flex justify-content-center align-items-center p-1 px-2 w-100",4,"ngIf"],["class","d-flex flex-column mb-1 w-100",4,"ngIf"],[1,"fas","small","visibility-toggle","mb-1","w-100","text-center",3,"ngClass","click"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","p-1","px-2","w-100"],[1,"m-0"],[1,"d-flex","flex-column","mb-1","w-100"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngFor","ngForOf"],[1,"list-group","list-group-flush"],[3,"ngSwitch",4,"ngIf"],["class","list-group-item",3,"click",4,"ngSwitchCase"],["class","list-group-item",3,"click",4,"ngSwitchDefault"],[1,"list-group-item",3,"click"],[1,"px-2"],[1,"mb-1"],["type","text",1,"form-control","form-control-sm","mb-2",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-between","align-items-center"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"d-flex","flex-column"],[1,"form-control","form-control-sm","mb-2",3,"placeholder","ngModel","ngModelChange"],[1,"d-flex","flex-row"],[1,"col","m-0","p-0"],[1,"col-3","m-0","p-0"],["type","checkbox",1,"form-check-input","m-0",3,"checked","click"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"d-flex","flex-row","justify-content-between","mt-1"]],template:function(t,e){1&t&&(n.dc(0,"div",0,1),n.Uc(2,dr,3,1,"div",2),n.Uc(3,Rr,6,5,"div",3),n.dc(4,"i",4),n.nc("click",function(){return e.toggleVisibility()}),n.cc(),n.cc()),2&t&&(n.Kb(2),n.yc("ngIf",e.visible),n.Kb(1),n.yc("ngIf",e.visible),n.Kb(1),n.yc("ngClass",e.visible?"fa-chevron-down":"fa-chevron-up m-2"))},directives:[m.n,m.l,m.p,m.q,m.m,m.r,ur.b,ur.l,ur.n],pipes:[ui],encapsulation:2}),t})();var yr=s("GJWb"),Or=s("+lr5"),Cr=s("w9Dd");let Ar=(()=>{class t{constructor(t,e,s){this._notificationService=t,this._settingsService=e,this._ngZone=s,this._component=null,this._wardrobeComponent=null,this._messages=[],this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new yr.a(this.onUserWardrobePageEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onUserWardrobePageEvent(t){if(!this._wardrobeComponent)return;if(!t)return;const e=t.getParser();e&&e.looks.forEach((t,e)=>{this._ngZone.run(()=>{this._wardrobeComponent.setLook(e,t[0],t[1])})})}loadOwnAvatarInEditor(){if(!this._component)return;const t=u.a.instance.sessionDataManager;this._component.loadAvatarInEditor(t.figure,t.gender,t.clubLevel)}loadAvatarInEditor(t,e){this._component&&this._component.loadAvatarInEditor(t,e,u.a.instance.sessionDataManager.clubLevel)}requestWardrobePage(t){u.a.instance.communication.connection.send(new Or.a(t))}setWardrobeSlot(t){u.a.instance.communication.connection.send(new Cr.a(t,this.currentEditorLook,this.currentEditorGender))}get component(){return this._component}set component(t){this._component=t}set wardrobeComponent(t){this._wardrobeComponent=t}get currentEditorLook(){return this._component.figureData.view.figureString}get currentEditorGender(){return this._component.figureData.gender}}return t.\u0275fac=function(e){return new(e||t)(n.kc(es),n.kc(g),n.kc(n.H))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})();const Mr=["contextsContainer"];function wr(t,e){}let Ur=(()=>{class t extends ni{constructor(t,e,s,n,i){super(),this._avatarEditorService=t,this._settingsService=e,this._friendListService=s,this._componentFactoryResolver=n,this._ngZone=i,this.view=null,this.cachedNameView=null,this.cachedOwnAvatarMenuView=null,this.cachedAvatarMenuView=null,this.cachedDecorateModeView=null,this.cachedRentableBotMenuView=null,this.cachedPetMenuView=null,this.cachedOwnPetMenuView=null,this.cachedNameBubbles=new Map,this.lastRollOverId=-1,this.userInfoData=new ri,this.petInfoData=new ai,this.rentableBotInfoData=new oi,this.isDancing=!1,this.handlePetInfo=!0,this._isInitialized=!1,this._isRoomEnteredOwnAvatarHighlight=!1,this._isGameMode=!1,this._isUpdating=!1,this._Str_2557=this._Str_2557.bind(this),this.onRoomEngineObjectEvent=this.onRoomEngineObjectEvent.bind(this)}ngOnDestroy(){u.a.instance.ticker.remove(this.update,this)}registerUpdateEvents(t){t&&(u.a.instance.roomEngine.events.addEventListener(S.a.ADDED,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(S.a.REMOVED,this.onRoomEngineObjectEvent),t.addEventListener(nt.RWAIE_AVATAR_INFO,this._Str_2557),t.addEventListener(Le.RWONE_TYPE,this._Str_2557),t.addEventListener(We.OWN_USER,this._Str_2557),t.addEventListener(We.PEER,this._Str_2557),t.addEventListener(it.RWUDUE_USER_DATA_UPDATED,this._Str_2557),t.addEventListener(J.USER_REMOVED,this._Str_2557),t.addEventListener(xe.FURNI,this._Str_2557),t.addEventListener(We.BOT,this._Str_2557),t.addEventListener(ke.RENTABLE_BOT,this._Str_2557),t.addEventListener(Fe.PET_INFO,this._Str_2557),t.addEventListener(J.OBJECT_SELECTED,this._Str_2557),t.addEventListener(J.OBJECT_DESELECTED,this._Str_2557),t.addEventListener(J.OBJECT_ROLL_OVER,this._Str_2557),t.addEventListener(J.OBJECT_ROLL_OUT,this._Str_2557),t.addEventListener(Q.RWREUE_NORMAL_MODE,this._Str_2557),t.addEventListener(Q.RWREUE_GAME_MODE,this._Str_2557),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(u.a.instance.roomEngine.events.removeEventListener(S.a.ADDED,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(S.a.REMOVED,this.onRoomEngineObjectEvent),t.removeEventListener(nt.RWAIE_AVATAR_INFO,this._Str_2557),t.removeEventListener(Le.RWONE_TYPE,this._Str_2557),t.removeEventListener(We.OWN_USER,this._Str_2557),t.removeEventListener(We.PEER,this._Str_2557),t.removeEventListener(it.RWUDUE_USER_DATA_UPDATED,this._Str_2557),t.removeEventListener(J.USER_REMOVED,this._Str_2557),t.removeEventListener(xe.FURNI,this._Str_2557),t.removeEventListener(We.BOT,this._Str_2557),t.removeEventListener(ke.RENTABLE_BOT,this._Str_2557),t.removeEventListener(Fe.PET_INFO,this._Str_2557),t.removeEventListener(J.OBJECT_SELECTED,this._Str_2557),t.removeEventListener(J.OBJECT_DESELECTED,this._Str_2557),t.removeEventListener(J.OBJECT_ROLL_OVER,this._Str_2557),t.removeEventListener(J.OBJECT_ROLL_OUT,this._Str_2557),t.removeEventListener(Q.RWREUE_NORMAL_MODE,this._Str_2557),t.removeEventListener(Q.RWREUE_GAME_MODE,this._Str_2557),super.unregisterUpdateEvents(t))}onRoomEngineObjectEvent(t){switch(t.type){case S.a.ADDED:{if(t.category!==k.a.UNIT)return;const e=this.handler.roomSession.userDataManager.getUserDataByIndex(t.objectId);if(!e)return;if(-1==this._friendListService.getFriendNames().indexOf(e.name))return;return void this.showFriendNameBubble(e,t.objectId)}case S.a.REMOVED:if(t.category===k.a.UNIT)for(const e of this.cachedNameBubbles.values())e.instance.roomIndex===t.objectId&&this.removeView(e,!1);return}}showFriendNameBubble(t,e){if(!t)return;if(this.cachedNameBubbles.has(t.name))return;const s=this.createView(Ci);s.instance.isFriend=!0,this._ngZone.run(()=>Ci.setup(s.instance,t.webID,t.name,B.a.USER,e,!0)),this.cachedNameBubbles.set(t.name,s),this.toggleUpdateReceiver()}_Str_2557(t){const e=this.view&&this.view.instance||null;switch(t.type){case nt.RWAIE_AVATAR_INFO:{const e=t;this._isRoomEnteredOwnAvatarHighlight=!this._isInitialized&&this.handler.container.roomSession&&e._Str_2707===this.handler.container.roomSession.ownRoomIndex,this._Str_12674(e.userId,e.userName,e._Str_2908,e._Str_2707,e._Str_4330,null),this._isInitialized=!0;break}case Le.RWONE_TYPE:{const e=t;e.category===k.a.UNIT&&this._Str_12674(e.userId,e.userName,e.userType,e.roomIndex,!1,null);break}case We.OWN_USER:case We.PEER:{const e=t;this.userInfoData.populate(e),this._Str_12674(e.webID,e.name,e.userType,e.roomIndex,!1,e.isSpectator?null:this.userInfoData);break}case Fe.PET_INFO:if(this.handlePetInfo){const e=t;this.petInfoData.populate(e),this._Str_24751(e.id,e.name,e._Str_2707,this.petInfoData)}break;case ke.RENTABLE_BOT:{const e=t;this.rentableBotInfoData||(this.rentableBotInfoData=new oi),this.rentableBotInfoData.populate(e);const s=this.handler.container.roomSessionManager.getSession(0);if(!s)return;const n=s.userDataManager.getRentableBotData(e.id);if(!n)return;this.rentableBotInfoData&&n.botSkills&&this.rentableBotInfoData._Str_19891(n.botSkills),this._Str_16991(e.id,e.name,e.roomIndex,this.rentableBotInfoData);break}case it.RWUDUE_USER_DATA_UPDATED:this._isInitialized||this._Str_25716();break;case J.USER_REMOVED:{const s=t;e&&e.roomIndex===s.id&&this.removeView(this.view,!1);for(const t of this.cachedNameBubbles.values())if(t.instance.roomIndex==s.id){this.removeView(t,!1);break}break}case xe.FURNI:this.view&&this.removeView(this.view,!1);break;case J.OBJECT_SELECTED:t.category===k.a.UNIT&&(this.handlePetInfo=!0);break;case J.OBJECT_DESELECTED:this.view&&this.removeView(this.view,!1);break;case J.OBJECT_ROLL_OVER:{if(this._isRoomEnteredOwnAvatarHighlight)return;const s=t;e&&(e instanceof vi||e instanceof Wi||e instanceof Tr||e instanceof Xi)||(this.lastRollOverId=s.id,this.messageListener.processWidgetMessage(new lt(lt.GET_OBJECT_NAME,s.id,s.category)));break}case J.OBJECT_ROLL_OUT:{if(this._isRoomEnteredOwnAvatarHighlight)return;const s=t;e&&(e instanceof vi||e instanceof Wi||e instanceof Tr||e instanceof Xi)||s.id===this.lastRollOverId&&(this.removeView(this.view,!1),this.lastRollOverId=-1);break}case Q.RWREUE_NORMAL_MODE:this._isGameMode=!1;break;case Q.RWREUE_GAME_MODE:this._isGameMode=!0}this.toggleUpdateReceiver()}_Str_12674(t,e,s,n,i,r){const a=!!r;let o=this.view&&this.view.instance;if(a&&o&&(o instanceof vi||o instanceof Wi||o instanceof rr||o instanceof Xi||o instanceof Tr||(this.removeView(this.view,!1),o=null)),o&&o.userId===t&&o.userName===e&&o.userType===s&&o.roomIndex===n)o&&(o instanceof vi||o instanceof Wi)&&o.userId===t&&this.removeView(this.view,!1);else if(this.view&&this.removeView(this.view,!1),!this._isGameMode)if(a)if(r._Str_11453){if(this.isDecorating)return;if(ii.a.isRunning())return;this.cachedOwnAvatarMenuView||(this.cachedOwnAvatarMenuView=this.createView(Wi)),this.view=this.cachedOwnAvatarMenuView,this._ngZone.run(()=>Wi.setup(this.view.instance,t,e,s,n,r))}else{this.cachedAvatarMenuView||(this.cachedAvatarMenuView=this.createView(vi)),this.view=this.cachedAvatarMenuView,this._ngZone.run(()=>vi.setup(this.view.instance,t,e,s,n,r));for(const e of this.cachedNameBubbles.values())if(e.instance.userId===t){this.removeView(e,!1);break}}else this.handler.roomEngine.isDecorating||(this.cachedNameView||(this.cachedNameView=this.createView(Ci)),this.view=this.cachedNameView,this._ngZone.run(()=>{this._ngZone.run(this.handler.container.sessionDataManager.userId===t?()=>Ci.setup(this.view.instance,t,e,s,n):()=>Ci.setup(this.view.instance,t,e,s,n,!0))}))}_Str_16991(t,e,s,n){const i=!!n;let r=this.view&&this.view.instance;i&&r&&(r instanceof vi||r instanceof Wi||r instanceof Tr||r instanceof rr||r instanceof Xi||(this.removeView(this.view,!1),r=null)),r&&r.userId===t&&r.userName===e&&r.userType===B.a.RENTABLE_BOT&&r.roomIndex===s?r&&r instanceof Tr&&r.userId===t&&this.removeView(this.view,!1):(this.view&&this.removeView(this.view,!1),this._isGameMode||i&&(this.cachedRentableBotMenuView||(this.cachedRentableBotMenuView=this.createView(Tr)),this.view=this.cachedRentableBotMenuView,this._ngZone.run(()=>Tr.setup(this.view.instance,t,e,B.a.RENTABLE_BOT,s,n))))}_Str_24751(t,e,s,n){const i=!!n;let r=this.view&&this.view.instance;i&&r&&(r instanceof vi||r instanceof Wi||r instanceof rr||r instanceof Xi||r instanceof Tr||(this.removeView(this.view,!1),r=null)),r&&r.userId===t&&r.userName===e&&r.userType===B.a.PET&&r.roomIndex===s?r&&(r instanceof vi||r instanceof Wi)&&r.userId===t&&this.removeView(this.view,!1):(this.view&&this.removeView(this.view,!1),this._isGameMode||i&&(n._Str_5175?(this.cachedOwnPetMenuView||(this.cachedOwnPetMenuView=this.createView(Xi)),this.view=this.cachedOwnPetMenuView,this._ngZone.run(()=>Xi.setup(this.view.instance,t,e,B.a.PET,s,n))):(this.cachedPetMenuView||(this.cachedPetMenuView=this.createView(rr)),this.view=this.cachedPetMenuView,this._ngZone.run(()=>rr.setup(this.view.instance,t,e,B.a.PET,s,n)))))}createView(t){if(!t)return null;let e=null,s=null;return this._ngZone.run(()=>{const n=this._componentFactoryResolver.resolveComponentFactory(t);e=this.contextsContainer.createComponent(n),s=e.instance}),s&&e?(s.parent=this,s.componentRef=e,e):null}close(){this.removeView(this.view,!1)}removeView(t,e){if(this._isRoomEnteredOwnAvatarHighlight=!1,!t)return;const s=this.contextsContainer.indexOf(t.hostView);-1!==s&&(this.cachedNameView=null,this.cachedOwnAvatarMenuView=null,this.cachedAvatarMenuView=null,this.cachedRentableBotMenuView=null,this.cachedPetMenuView=null,this.cachedOwnPetMenuView=null,t===this.view&&(this.view=null),t instanceof Ci&&(this.cachedNameBubbles.delete(t.instance.userName),this.toggleUpdateReceiver()),this._ngZone.run(()=>this.contextsContainer.remove(s)))}toggleUpdateReceiver(){if(this.view||this.cachedNameBubbles.size>0||this.cachedDecorateModeView){if(this._isUpdating)return;u.a.instance.ticker.add(this.update,this),this._isUpdating=!0}else u.a.instance.ticker.remove(this.update,this),this._isUpdating=!1}update(t){if(this.view){const e=this.view.instance,s=this.messageListener.processWidgetMessage(new He(He.RWGOI_MESSAGE_GET_OBJECT_LOCATION,e.userId,e.userType));s&&e.update(s.rectangle,s._Str_9337,t)}if(this.cachedDecorateModeView){const e=this.cachedDecorateModeView.instance,s=this.messageListener.processWidgetMessage(new He(He.RWGOI_MESSAGE_GET_OBJECT_LOCATION,e.userId,e.userType));s&&e.update(s.rectangle,s._Str_9337,t)}for(const e of this.cachedNameBubbles.values()){if(!e)continue;const s=e.instance,n=this.messageListener.processWidgetMessage(new He(He.RWGOI_MESSAGE_GET_OBJECT_LOCATION,s.userId,s.userType));n&&s.update(n.rectangle,n._Str_9337,t)}}getOwnRoomObject(){const t=this.handler.container.sessionDataManager.userId,e=this.handler.roomEngine.activeRoomId,s=k.a.UNIT,n=this.handler.roomEngine.getTotalObjectsForManager(e,s);let i=0;for(;i<n;){const n=this.handler.roomEngine.getRoomObjectByIndex(e,i,s);if(n){const e=this.handler.roomSession.userDataManager.getUserDataByIndex(n.id);if(e&&e.webID===t)return n}i++}return null}_Str_25716(){this.messageListener.processWidgetMessage(new lt(lt.GET_OWN_CHARACTER_INFO,0,0))}openAvatarEditor(){this._avatarEditorService.loadOwnAvatarInEditor(),this._settingsService.showAvatarEditor()}useSign(t){this.widgetHandler.container.roomSession.sendSignMessage(t)}get getOwnPosture(){const t=this.getOwnRoomObject();if(t){const e=t.model;if(e)return e.getValue(V.a.FIGURE_POSTURE)}return si.a.POSTURE_STAND}get getCanStandUp(){const t=this.getOwnRoomObject();if(t){const e=t.model;if(e)return e.getValue(V.a.FIGURE_CAN_STAND_UP)}return!1}get _Str_12708(){const e=this.getOwnRoomObject();if(e){const s=e.model;if(s){const e=s.getValue(V.a.FIGURE_EFFECT);return e===t._Str_18968||e===t._Str_16970||e===t._Str_18857}}return!1}get _Str_25831(){const e=this.getOwnRoomObject();if(e){const s=e.model;if(s)return s.getValue(V.a.FIGURE_EFFECT)===t._Str_17951}return!1}get handler(){return this.widgetHandler}get isDecorating(){return this.handler.roomSession.isDecorating}set isDecorating(t){if(this.handler.roomSession.isDecorating=t,t){this.cachedDecorateModeView||(this.cachedDecorateModeView=this.createView(Ri));const t=this.handler.roomSession.ownRoomIndex;Ri.setup(this.cachedDecorateModeView.instance,this.handler.container.sessionDataManager.userId,this.handler.container.sessionDataManager.userName,hn.a.getTypeNumber(hn.a.USER),t)}else this.cachedDecorateModeView&&(this.removeView(this.cachedDecorateModeView,!1),this.cachedDecorateModeView=null)}get hasClub(){return this.handler.container.sessionDataManager.clubLevel>=dt._Str_2964}get hasVip(){return this.handler.container.sessionDataManager.clubLevel>=dt._Str_2575}}return t._Str_17951=77,t._Str_18968=29,t._Str_16970=30,t._Str_18857=185,t._Str_18641=5e3,t.\u0275fac=function(e){return new(e||t)(n.Yb(Ar),n.Yb(g),n.Yb(Hs),n.Yb(n.m),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-room-avatarinfo-component"]],viewQuery:function(t,e){if(1&t&&n.cd(Mr,1,n.Z),2&t){let t;n.Hc(t=n.oc())&&(e.contextsContainer=t.first)}},features:[n.Hb],decls:3,vars:0,consts:[[1,"nitro-room-avatarinfo-component"],["contextsContainer",""]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Uc(1,wr,0,0,"ng-template",null,1,n.Vc),n.cc())},encapsulation:2}),t})(),Dr=(()=>{class t{constructor(t,e){this.elementRef=t,this.ngZone=e,this.target=null,this.bringToFront=this.bringToFront.bind(this)}ngAfterViewInit(){const t=this.elementRef.nativeElement;t&&(this.target=t,this.addTarget(),this.registerEvents(),this.bringToFront())}ngOnDestroy(){this.unregisterEvents(),this.removeTarget(),this.bringToFront()}addTarget(){this.target&&(t.TOP_TARGETS.indexOf(this.target)>=0||t.TOP_TARGETS.push(this.target))}removeTarget(){if(!this.target)return;const e=t.TOP_TARGETS.indexOf(this.target);-1!==e&&t.TOP_TARGETS.splice(e,1)}registerEvents(){this.ngZone.runOutsideAngular(()=>{this.target&&this.target.addEventListener("mousedown",this.bringToFront)})}unregisterEvents(){this.ngZone.runOutsideAngular(()=>{this.target&&this.target.removeEventListener("mousedown",this.bringToFront)})}bringToFront(e=null){this.moveTarget();let s=t.Z_INDEX_START;for(const n of t.TOP_TARGETS)n&&(s+=t.Z_INDEX_INCREASE,n.style.zIndex=s.toString())}moveTarget(){const e=t.TOP_TARGETS.indexOf(this.target);if(-1===e)return;const s=t.TOP_TARGETS.splice(e,1);t.TOP_TARGETS.push(...s)}isTopTarget(){if(!this.target)return!1;const e=t.TOP_TARGETS.indexOf(this.target);return!(-1===e||e<t.TOP_TARGETS.length-1)}}return t.TOP_TARGETS=[],t.Z_INDEX_START=400,t.Z_INDEX_INCREASE=1,t.\u0275fac=function(e){return new(e||t)(n.Yb(n.p),n.Yb(n.H))},t.\u0275dir=n.Tb({type:t,selectors:[["","bringToTop",""]],inputs:{bringToTop:"bringToTop"}}),t})();const Nr=function(t){return[t]};function Lr(t,e){if(1&t){const t=n.ec();n.dc(0,"div",6),n.dc(1,"div",7),n.dc(2,"div",8),n.dc(3,"div",9),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().selectStyle(s)}),n.Wc(4,"\xa0"),n.cc(),n.cc(),n.cc(),n.cc()}if(2&t){const t=e.$implicit,s=n.qc();n.Kb(1),n.yc("ngClass",n.Cc(4,Nr,s.lastSelectedId===t?"bg-primary":"bg-secondary")),n.Kb(2),n.Nb("chat-bubble bubble-",t," w-100")}}const Pr=function(t){return{active:t}};let xr=(()=>{class t{constructor(t,e){this.changeDetector=t,this.ngZone=e,this.styleSelected=new n.r,this.showStyles=!1,this.lastSelectedId=0,this.styleIds=[]}ngOnInit(){this.lastSelectedId=u.a.instance.sessionDataManager.chatStyle;const t=u.a.instance.getConfiguration("chat.styles");for(const e of t)e&&(e.minRank>0?u.a.instance.sessionDataManager.hasSecurity(e.minRank)&&this.styleIds.push(e.styleId):e.isSystemStyle&&u.a.instance.sessionDataManager.hasSecurity(K.a.MODERATOR)?this.styleIds.push(e.styleId):u.a.instance.getConfiguration("chat.styles.disabled").indexOf(e.styleId)>=0||(e.isHcOnly&&u.a.instance.sessionDataManager.clubLevel>=dt._Str_2964||e.isAmbassadorOnly&&u.a.instance.sessionDataManager.isAmbassador?this.styleIds.push(e.styleId):e.isHcOnly||e.isAmbassadorOnly||this.styleIds.push(e.styleId)))}ngOnDestroy(){this.hideSelector()}showSelector(){this.showStyles=!0}hideSelector(){this.showStyles=!1}toggleSelector(){this.showStyles?this.hideSelector():this.showSelector()}selectStyle(t){this.lastSelectedId=t,this.styleSelected.emit(t),this.hideSelector()}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(n.j),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-room-chatinput-styleselector-component"]],outputs:{styleSelected:"styleSelected"},decls:6,vars:4,consts:[[1,"nitro-room-chatinput-styleselector-component"],[1,"icon","chatstyles-icon",3,"click"],[1,"nitro-chatstyle-selector","card","p-3",3,"bringToTop","ngClass"],[1,"grid-container","w-100"],[1,"grid-items","grid-3"],["class","d-flex flex-column item-detail justify-content-center align-items-center",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center"],[1,"d-flex","detail-info","rounded","justify-content-center","align-items-center",3,"ngClass"],[1,"bubble-container"],[3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"i",1),n.nc("click",function(){return e.toggleSelector()}),n.cc(),n.dc(2,"div",2),n.dc(3,"div",3),n.dc(4,"div",4),n.Uc(5,Lr,5,6,"div",5),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(2),n.yc("ngClass",n.Cc(2,Pr,e.showStyles)),n.Kb(3),n.yc("ngForOf",e.styleIds))},directives:[Dr,m.l,m.m],encapsulation:2}),t})();const Fr=["chatInputView"];let kr=(()=>{class t extends ni{constructor(t){super(),this._ngZone=t,this.selectedUsername="",this.floodBlocked=!1,this.floodBlockedSeconds=0,this.lastContent="",this.isTyping=!1,this.typingStartedSent=!1,this.typingTimer=null,this.idleTimer=null,this.floodTimer=null,this.floodInterval=null,this.currentStyle=-1,this.needsStyleUpdate=!1,this._chatModeIdWhisper=null,this._chatModeIdShout=null,this._chatModeIdSpeak=null,this._maxChatLength=0,this.onKeyDownEvent=this.onKeyDownEvent.bind(this),this.onInputMouseDownEvent=this.onInputMouseDownEvent.bind(this),this.onInputChangeEvent=this.onInputChangeEvent.bind(this),this.onRoomWidgetRoomObjectUpdateEvent=this.onRoomWidgetRoomObjectUpdateEvent.bind(this),this.onRoomWidgetUpdateInfostandUserEvent=this.onRoomWidgetUpdateInfostandUserEvent.bind(this),this.onRoomWidgetChatInputContentUpdateEvent=this.onRoomWidgetChatInputContentUpdateEvent.bind(this),this.onRoomWidgetFloodControlEvent=this.onRoomWidgetFloodControlEvent.bind(this)}ngOnInit(){this._chatModeIdWhisper=u.a.instance.getLocalization("widgets.chatinput.mode.whisper"),this._chatModeIdShout=u.a.instance.getLocalization("widgets.chatinput.mode.shout"),this._chatModeIdSpeak=u.a.instance.getLocalization("widgets.chatinput.mode.speak"),this._maxChatLength=u.a.instance.getConfiguration("chat.input.maxlength",100),this.currentStyle=u.a.instance.sessionDataManager.chatStyle}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{document.body.addEventListener("keydown",this.onKeyDownEvent),this.inputView&&(this.inputView.addEventListener("mousedown",this.onInputMouseDownEvent),this.inputView.addEventListener("input",this.onInputChangeEvent))})}ngOnDestroy(){this._ngZone.runOutsideAngular(()=>{document.body.removeEventListener("keydown",this.onKeyDownEvent),this.inputView&&(this.inputView.removeEventListener("mousedown",this.onInputMouseDownEvent),this.inputView.removeEventListener("input",this.onInputChangeEvent))}),this.resetTypingTimer(),this.resetIdleTimer(),this.resetFloodInterval()}registerUpdateEvents(t){t&&(t.addEventListener(J.OBJECT_DESELECTED,this.onRoomWidgetRoomObjectUpdateEvent),t.addEventListener(We.PEER,this.onRoomWidgetUpdateInfostandUserEvent),t.addEventListener(Pe.RWWCIDE_CHAT_INPUT_CONTENT,this.onRoomWidgetChatInputContentUpdateEvent),t.addEventListener(mt.RWFCE_FLOOD_CONTROL,this.onRoomWidgetFloodControlEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(J.OBJECT_DESELECTED,this.onRoomWidgetRoomObjectUpdateEvent),t.removeEventListener(We.PEER,this.onRoomWidgetUpdateInfostandUserEvent),t.removeEventListener(Pe.RWWCIDE_CHAT_INPUT_CONTENT,this.onRoomWidgetChatInputContentUpdateEvent),t.removeEventListener(mt.RWFCE_FLOOD_CONTROL,this.onRoomWidgetFloodControlEvent))}onRoomWidgetRoomObjectUpdateEvent(t){this.selectedUsername=""}onRoomWidgetUpdateInfostandUserEvent(t){t&&(this.selectedUsername=t.name)}onRoomWidgetChatInputContentUpdateEvent(t){if(t)switch(t._Str_23621){case Pe.WHISPER:{const e=u.a.instance.getLocalization("widgets.chatinput.mode.whisper");return void this.changeInputValue(e+" "+t.userName+" ")}case Pe.SHOUT:return}}onRoomWidgetFloodControlEvent(t){t&&this._ngZone.run(()=>{this.floodBlocked=!0,this.floodBlockedSeconds=t.seconds,this.changeInputValue(u.a.instance.getLocalizationWithParameter("chat.input.alert.flood","time",this.floodBlockedSeconds.toString())),this.startFloodInterval()})}decreaseFloodBlockSeconds(){if(!this.floodBlockedSeconds)return this.resetFloodInterval(),this.floodBlocked=!1,void this.changeInputValue("");this.floodBlockedSeconds=this.floodBlockedSeconds-1,this.changeInputValue(u.a.instance.getLocalizationWithParameter("chat.input.alert.flood","time",this.floodBlockedSeconds.toString()))}sendChat(t,e,s="",n=0){!this.floodBlocked&&this.messageListener&&(this.changeInputValue(""),this.messageListener.processWidgetMessage(new pt(pt.MESSAGE_CHAT,t,e,s,n)))}changeInputValue(t){const e=this.chatInputView&&this.chatInputView.nativeElement||null;e&&(e.parentElement.dataset.value=e.value=t)}onKeyDownEvent(t){if(!t)return;if(this.anotherInputHasFocus())return;document.activeElement!==(this.chatInputView&&this.chatInputView.nativeElement)&&this.setInputFocus();const e=t.shiftKey;switch(t.keyCode){case 32:return void this.checkSpecialKeywordForInput();case 13:return void this.sendChatFromInputField(e);case 8:if(this.inputView){const t=this.inputView.value.split(" ");t[0]===this._chatModeIdWhisper&&3===t.length&&""===t[2]&&(this.changeInputValue(""),this.lastContent="")}return;default:return}}onInputMouseDownEvent(t){this.setInputFocus()}onInputChangeEvent(t){const e=t.target;if(!e)return;const s=e.value;s.length?(this.lastContent=s,this.isTyping||(this.isTyping=!0,this.startTypingTimer()),this.startIdleTimer()):(this.isTyping=!1,this.startTypingTimer())}onStyleSelected(t){t!==this.currentStyle&&(this.currentStyle=t,this.needsStyleUpdate=!0)}sendChatFromInputField(t=!1){if(!this.inputView||""===this.inputView.value)return;let e=t?pt.CHAT_SHOUT:pt.CHAT_DEFAULT,s=this.inputView.value;const n=s.split(" ");let i="",r="";switch(n[0]){case this._chatModeIdWhisper:e=pt.CHAT_WHISPER,i=n[1],r=this._chatModeIdWhisper+" "+i+" ",n.shift(),n.shift();break;case this._chatModeIdShout:e=pt.CHAT_SHOUT,n.shift();break;case this._chatModeIdSpeak:e=pt.CHAT_DEFAULT,n.shift()}s=n.join(" "),this.typingTimer&&this.resetTypingTimer(),this.idleTimer&&this.resetIdleTimer(),s.length<=this._maxChatLength&&(this.needsStyleUpdate&&(u.a.instance.sessionDataManager.sendChatStyleUpdate(this.currentStyle),this.needsStyleUpdate=!1),this.sendChat(s,e,i,this.currentStyle)),this.isTyping=!1,this.typingStartedSent&&this.sendTypingMessage(),this.typingStartedSent=!1,this.changeInputValue(r),this.lastContent=r}sendTypingMessage(){!this.floodBlocked&&this.messageListener&&this.messageListener.processWidgetMessage(new Et(this.isTyping))}anotherInputHasFocus(){const t=document.activeElement;return!(!t||this.chatInputView&&this.chatInputView.nativeElement&&this.chatInputView.nativeElement===t||!(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement))}setInputFocus(){const t=this.chatInputView&&this.chatInputView.nativeElement;t&&(t.focus(),t.setSelectionRange(2*t.value.length,2*t.value.length))}checkSpecialKeywordForInput(){const t=this.chatInputView&&this.chatInputView.nativeElement||null;t&&""!==t.value&&t.value===this._chatModeIdWhisper&&0!==this.selectedUsername.length&&this.changeInputValue(`${t.value} ${this.selectedUsername}`)}startIdleTimer(){this.resetIdleTimer(),this.idleTimer=setTimeout(this.onIdleTimerComplete.bind(this),1e4)}resetIdleTimer(){this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null)}onIdleTimerComplete(){this.isTyping&&(this.typingStartedSent=!1),this.isTyping=!1,this.sendTypingMessage()}startTypingTimer(){this.resetTypingTimer(),this.typingTimer=setTimeout(this.onTypingTimerComplete.bind(this),1e3)}resetTypingTimer(){this.typingTimer&&(clearTimeout(this.typingTimer),this.typingTimer=null)}onTypingTimerComplete(){this.isTyping&&(this.typingStartedSent=!0),this.sendTypingMessage()}startFloodInterval(){this.resetFloodInterval(),this.floodInterval=setInterval(this.decreaseFloodBlockSeconds.bind(this),1e3)}resetFloodInterval(){this.floodInterval&&(clearInterval(this.floodInterval),this.floodInterval=null)}get inputMaxLength(){return this._maxChatLength}get inputView(){return this.chatInputView&&this.chatInputView.nativeElement||null}get handler(){return this.widgetHandler}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-room-chatinput-component"]],viewQuery:function(t,e){if(1&t&&n.cd(Fr,1),2&t){let t;n.Hc(t=n.oc())&&(e.chatInputView=t.first)}},features:[n.Hb],decls:7,vars:5,consts:[[1,"nitro-room-chatinput-component"],[1,"chatinput-container"],[1,"input-sizer"],["type","text",1,"chat-input",3,"placeholder","disabled","maxLength","input"],["chatInputView",""],[3,"styleSelected"]],template:function(t,e){if(1&t){const t=n.ec();n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"div",2),n.dc(3,"input",3,4),n.nc("input",function(){n.Lc(t);const e=n.Ic(4);return e.parentElement.dataset.value=e.value}),n.rc(5,"translate"),n.cc(),n.cc(),n.cc(),n.dc(6,"nitro-room-chatinput-styleselector-component",5),n.nc("styleSelected",function(t){return e.onStyleSelected(t)}),n.cc(),n.cc()}2&t&&(n.Kb(3),n.zc("placeholder",n.sc(5,3,"widgets.chatinput.default")),n.yc("disabled",e.floodBlocked)("maxLength",e.inputMaxLength))},directives:[xr],pipes:[ui],encapsulation:2}),t})();var Wr=s("xgIS"),Br=s("eIep"),Vr=s("lJxs"),Gr=s("1G5W");let Kr=(()=>{class t{constructor(t,e,s){this._viewContainerRef=t,this._elementRef=e,this._ngZone=s,this.dragHandle=".drag-handler",this.center=!1,this.topCenter=!0,this.noMemory=!1,this._name=null,this._target=null,this._handle=null,this._isDragging=!1,this._delta={x:0,y:0},this._offset={x:0,y:0},this._destroy=new Cn.a}ngAfterViewInit(){this._name=this._viewContainerRef._hostTNode.classesWithoutHost;const e=this._elementRef.nativeElement;if(!e)return;this._handle=this.dragHandle?e.querySelector(this.dragHandle):e,this._target=this.dragTarget?e.querySelector(this.dragTarget):e,this._handle&&(this._handle.classList.add("header-draggable"),this._handle.parentElement.classList.add("header-draggable")),this.topCenter&&(e.style.top="50px",e.style.left=`calc(50vw - ${e.offsetWidth/2}px)`),this.center&&(e.style.top=`calc(50vh - ${e.offsetHeight/2}px)`,e.style.left=`calc(50vw - ${e.offsetWidth/2}px)`);const s=t.POS_MEMORY.get(this._name);s&&(this._offset.x=s.offset.x,this._offset.y=s.offset.y,this.translate()),this.setupEvents()}ngOnDestroy(){this._destroy.next(),this._handle&&(this._handle.classList.remove("header-draggable"),this._handle.parentElement.classList.remove("header-draggable"))}setupEvents(){this._ngZone.runOutsideAngular(()=>{const e=Object(Wr.a)(this._handle,"mousedown"),s=Object(Wr.a)(document,"mousemove"),n=Object(Wr.a)(document,"mouseup");e.pipe(Object(Br.a)(t=>{const e=t.clientX,i=t.clientY;return s.pipe(Object(Vr.a)(t=>{t.preventDefault(),this._delta={x:t.clientX-e,y:t.clientY-i}}),Object(Gr.a)(n))}),Object(Gr.a)(this._destroy)).subscribe(()=>{this._isDragging=!0,0===this._delta.x&&0===this._delta.y||this.translate()}),n.pipe(Object(Gr.a)(this._destroy)),n.subscribe(()=>{if(!this._isDragging)return;this._isDragging=!1,this._offset.x+=this._delta.x,this._offset.y+=this._delta.y,this._delta={x:0,y:0};const e=this._target.offsetLeft+this._offset.x,s=this._target.offsetTop+this._offset.y;s<t.BOUNDS_THRESHOLD_TOP?this._offset.y=-this._target.offsetTop:s+this._handle.offsetHeight>=document.body.offsetHeight-t.BOUNDS_THRESHOLD_TOP&&(this._offset.y=document.body.offsetHeight-this._target.offsetHeight-this._target.offsetTop),e+this._target.offsetWidth<t.BOUNDS_THRESHOLD_LEFT?this._offset.x=-this._target.offsetLeft:e>=document.body.offsetWidth-t.BOUNDS_THRESHOLD_LEFT&&(this._offset.x=document.body.offsetWidth-this._target.offsetWidth-this._target.offsetLeft),this.translate(),this.noMemory||t.POS_MEMORY.set(this._name,{offset:{x:this._offset.x+0,y:this._offset.y+0}})})})}translate(){this._target.style.transform=`translate(${this._offset.x+this._delta.x}px, ${this._offset.y+this._delta.y}px)`}}return t.POS_MEMORY=new Map,t.BOUNDS_THRESHOLD_TOP=0,t.BOUNDS_THRESHOLD_LEFT=0,t.\u0275fac=function(e){return new(e||t)(n.Yb(n.Z),n.Yb(n.p),n.Yb(n.H))},t.\u0275dir=n.Tb({type:t,selectors:[["","draggable",""]],inputs:{dragHandle:"dragHandle",dragTarget:"dragTarget",center:"center",topCenter:"topCenter",noMemory:"noMemory"}}),t})();var Hr=s("Kdsb");let jr=(()=>{class t{transform(t,e){return t?e?t.filter(t=>t.name.toLocaleLowerCase().includes(e.toLocaleLowerCase())):t:[]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=n.Xb({name:"roomObjectItemSearch",type:t,pure:!0}),t})();function zr(t,e){if(1&t&&(n.dc(0,"p",13),n.Wc(1),n.cc()),2&t){const t=n.qc().$implicit;n.Kb(1),n.Xc(t.id)}}function Yr(t,e){if(1&t){const t=n.ec();n.dc(0,"li",12),n.nc("click",function(){n.Lc(t);const s=e.$implicit,i=e.index;return n.qc(2).selectItem(s,i)}),n.dc(1,"p",13),n.Wc(2),n.cc(),n.Uc(3,zr,2,1,"p",14),n.cc()}if(2&t){const t=e.$implicit,s=e.index,i=n.qc(2);n.yc("ngClass",i.selectedItemIndex==s?"selected":""),n.Kb(2),n.Xc(t.name),n.Kb(1),n.yc("ngIf","widget.chooser.furni.title"===i.title)}}function qr(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"h6",3),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",4),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(6,"i",5),n.cc(),n.cc(),n.dc(7,"div",6),n.dc(8,"input",7),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().searchValue=e}),n.rc(9,"translate"),n.cc(),n.cc(),n.dc(10,"div",8),n.dc(11,"perfect-scrollbar",9),n.dc(12,"ul",10),n.Uc(13,Yr,4,3,"li",11),n.rc(14,"roomObjectItemSearch"),n.cc(),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(3),n.Xc(n.sc(4,4,t.title)),n.Kb(5),n.zc("placeholder",n.sc(9,6,"generic.search")),n.yc("ngModel",t.searchValue),n.Kb(5),n.yc("ngForOf",n.tc(14,8,t.items,t.searchValue))}}let Xr=(()=>{class t extends ni{constructor(t){super(),this._ngZone=t,this._visible=!1,this._items=[],this._title=null,this._timeout=null,this._selectedItemIndex=-1}ngOnDestroy(){this.clearTimeout()}hide(){this._visible=!1}selectItem(t,e){t&&this.items&&this.items.length&&(this._selectedItemIndex=e,this._ngZone.runOutsideAngular(()=>this.messageListener.processWidgetMessage(new lt(lt.SELECT_OBJECT,t.id,t.category))))}clearTimeout(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null)}get visible(){return this._visible}set visible(t){this._visible=t}get title(){return this._title}set title(t){this._title=t}get items(){return this._items}set items(t){this._items=t}get selectedItemIndex(){return this._selectedItemIndex}get searchValue(){return this._searchValue}set searchValue(t){this._selectedItemIndex=-1,this._searchValue=t}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-room-chooser-base-component"]],features:[n.Hb],decls:1,vars:1,consts:[["class","nitro-chooser-component card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-chooser-component","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","px-3","pt-3","input-group"],["type","text",1,"form-control","form-control-sm","chooser-search",3,"ngModel","placeholder","ngModelChange"],[1,"d-flex","p-3"],[2,"min-height","180px","max-height","180px","height","180px"],[1,"list-group"],["class","d-flex justify-content-between align-items-center bg-secondary rounded mb-1 px-2 py-1 chooser-item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","bg-secondary","rounded","mb-1","px-2","py-1","chooser-item",3,"ngClass","click"],[1,"mb-0"],["class","mb-0",4,"ngIf"]],template:function(t,e){1&t&&n.Uc(0,qr,15,11,"div",0),2&t&&n.yc("ngIf",e.visible)},directives:[m.n,Dr,Kr,ur.b,ur.l,ur.n,Hr.b,m.m,m.l],pipes:[ui,jr],encapsulation:2}),t})();function Zr(t,e){if(1&t&&(n.dc(0,"p",13),n.Wc(1),n.cc()),2&t){const t=n.qc().$implicit;n.Kb(1),n.Xc(t.id)}}function Qr(t,e){if(1&t){const t=n.ec();n.dc(0,"li",12),n.nc("click",function(){n.Lc(t);const s=e.$implicit,i=e.index;return n.qc(2).selectItem(s,i)}),n.dc(1,"p",13),n.Wc(2),n.cc(),n.Uc(3,Zr,2,1,"p",14),n.cc()}if(2&t){const t=e.$implicit,s=e.index,i=n.qc(2);n.yc("ngClass",i.selectedItemIndex==s?"selected":""),n.Kb(2),n.Xc(t.name),n.Kb(1),n.yc("ngIf","widget.chooser.furni.title"===i.title)}}function Jr(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"h6",3),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",4),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(6,"i",5),n.cc(),n.cc(),n.dc(7,"div",6),n.dc(8,"input",7),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().searchValue=e}),n.rc(9,"translate"),n.cc(),n.cc(),n.dc(10,"div",8),n.dc(11,"perfect-scrollbar",9),n.dc(12,"ul",10),n.Uc(13,Qr,4,3,"li",11),n.rc(14,"roomObjectItemSearch"),n.cc(),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(3),n.Xc(n.sc(4,4,t.title)),n.Kb(5),n.zc("placeholder",n.sc(9,6,"generic.search")),n.yc("ngModel",t.searchValue),n.Kb(5),n.yc("ngForOf",n.tc(14,8,t.items,t.searchValue))}}let $r=(()=>{class t extends Xr{constructor(t){super(t),this._ngZone=t,this._title="widget.chooser.furni.title",this.onRoomWidgetChooserContentEvent=this.onRoomWidgetChooserContentEvent.bind(this),this.onRoomWidgetRoomObjectUpdateEvent=this.onRoomWidgetRoomObjectUpdateEvent.bind(this)}registerUpdateEvents(t){t&&(t.addEventListener(jt.RWCCE_FURNI_CHOOSER_CONTENT,this.onRoomWidgetChooserContentEvent),t.addEventListener(J.FURNI_ADDED,this.onRoomWidgetRoomObjectUpdateEvent),t.addEventListener(J.FURNI_REMOVED,this.onRoomWidgetRoomObjectUpdateEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(jt.RWCCE_FURNI_CHOOSER_CONTENT,this.onRoomWidgetChooserContentEvent),t.removeEventListener(J.FURNI_ADDED,this.onRoomWidgetRoomObjectUpdateEvent),t.removeEventListener(J.FURNI_REMOVED,this.onRoomWidgetRoomObjectUpdateEvent),super.unregisterUpdateEvents(t))}onRoomWidgetChooserContentEvent(t){t&&this._ngZone.run(()=>{this._items=t.items,this.visible=!0})}onRoomWidgetRoomObjectUpdateEvent(t){t&&this.visible&&(this.clearTimeout(),this._timeout=setTimeout(()=>{this.messageListener.processWidgetMessage(new St(St.RWRWM_FURNI_CHOOSER))},100))}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-room-chooser-furni"]],features:[n.Hb],decls:1,vars:1,consts:[["class","nitro-chooser-component card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-chooser-component","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","px-3","pt-3","input-group"],["type","text",1,"form-control","form-control-sm","chooser-search",3,"ngModel","placeholder","ngModelChange"],[1,"d-flex","p-3"],[2,"min-height","180px","max-height","180px","height","180px"],[1,"list-group"],["class","d-flex justify-content-between align-items-center bg-secondary rounded mb-1 px-2 py-1 chooser-item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","bg-secondary","rounded","mb-1","px-2","py-1","chooser-item",3,"ngClass","click"],[1,"mb-0"],["class","mb-0",4,"ngIf"]],template:function(t,e){1&t&&n.Uc(0,Jr,15,11,"div",0),2&t&&n.yc("ngIf",e.visible)},directives:[m.n,Dr,Kr,ur.b,ur.l,ur.n,Hr.b,m.m,m.l],pipes:[ui,jr],encapsulation:2}),t})();function ta(t,e){if(1&t&&(n.dc(0,"p",13),n.Wc(1),n.cc()),2&t){const t=n.qc().$implicit;n.Kb(1),n.Xc(t.id)}}function ea(t,e){if(1&t){const t=n.ec();n.dc(0,"li",12),n.nc("click",function(){n.Lc(t);const s=e.$implicit,i=e.index;return n.qc(2).selectItem(s,i)}),n.dc(1,"p",13),n.Wc(2),n.cc(),n.Uc(3,ta,2,1,"p",14),n.cc()}if(2&t){const t=e.$implicit,s=e.index,i=n.qc(2);n.yc("ngClass",i.selectedItemIndex==s?"selected":""),n.Kb(2),n.Xc(t.name),n.Kb(1),n.yc("ngIf","widget.chooser.furni.title"===i.title)}}function sa(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"h6",3),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",4),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(6,"i",5),n.cc(),n.cc(),n.dc(7,"div",6),n.dc(8,"input",7),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().searchValue=e}),n.rc(9,"translate"),n.cc(),n.cc(),n.dc(10,"div",8),n.dc(11,"perfect-scrollbar",9),n.dc(12,"ul",10),n.Uc(13,ea,4,3,"li",11),n.rc(14,"roomObjectItemSearch"),n.cc(),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(3),n.Xc(n.sc(4,4,t.title)),n.Kb(5),n.zc("placeholder",n.sc(9,6,"generic.search")),n.yc("ngModel",t.searchValue),n.Kb(5),n.yc("ngForOf",n.tc(14,8,t.items,t.searchValue))}}let na=(()=>{class t extends Xr{constructor(t){super(t),this._ngZone=t,this.title="widget.chooser.user.title",this.onRoomWidgetChooserContentEvent=this.onRoomWidgetChooserContentEvent.bind(this),this.onRoomWidgetRoomObjectUpdateEvent=this.onRoomWidgetRoomObjectUpdateEvent.bind(this)}registerUpdateEvents(t){null!=t&&(t.addEventListener(jt.RWCCE_USER_CHOOSER_CONTENT,this.onRoomWidgetChooserContentEvent),t.addEventListener(J.USER_REMOVED,this.onRoomWidgetRoomObjectUpdateEvent.bind(this)),t.addEventListener(J.USER_ADDED,this.onRoomWidgetRoomObjectUpdateEvent.bind(this)),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){null!=t&&(t.removeEventListener(jt.RWCCE_USER_CHOOSER_CONTENT,this.onRoomWidgetChooserContentEvent),t.removeEventListener(J.USER_REMOVED,this.onRoomWidgetRoomObjectUpdateEvent.bind(this)),t.removeEventListener(J.USER_ADDED,this.onRoomWidgetRoomObjectUpdateEvent.bind(this)),super.unregisterUpdateEvents(t))}onRoomWidgetChooserContentEvent(t){t&&this._ngZone.run(()=>{this._items=t.items,this.visible=!0})}onRoomWidgetRoomObjectUpdateEvent(t){this.visible&&(this.clearTimeout(),this._timeout=setTimeout(()=>{this.messageListener.processWidgetMessage(new St(St.RWRWM_USER_CHOOSER))},100))}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-room-chooser-user"]],features:[n.Hb],decls:1,vars:1,consts:[["class","nitro-chooser-component card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-chooser-component","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","px-3","pt-3","input-group"],["type","text",1,"form-control","form-control-sm","chooser-search",3,"ngModel","placeholder","ngModelChange"],[1,"d-flex","p-3"],[2,"min-height","180px","max-height","180px","height","180px"],[1,"list-group"],["class","d-flex justify-content-between align-items-center bg-secondary rounded mb-1 px-2 py-1 chooser-item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","bg-secondary","rounded","mb-1","px-2","py-1","chooser-item",3,"ngClass","click"],[1,"mb-0"],["class","mb-0",4,"ngIf"]],template:function(t,e){1&t&&n.Uc(0,sa,15,11,"div",0),2&t&&n.yc("ngIf",e.visible)},directives:[m.n,Dr,Kr,ur.b,ur.l,ur.n,Hr.b,m.m,m.l],pipes:[ui,jr],encapsulation:2}),t})();const ia=["activeView"];let ra=(()=>{class t{constructor(){this.parent=null,this.requestId=0,this.userId=0,this.userName=""}update(t,e){if(!t)return void this.hide();let s=Math.round(t.left+t.width/2-this.activeViewElement.offsetWidth/2),n=Math.round(t.top-this.activeViewElement.offsetHeight+10);n<=0&&(n=li.SPACE_AROUND_EDGES),n>=u.a.instance.height-this.activeViewElement.offsetHeight&&(n=u.a.instance.height-this.activeViewElement.offsetHeight-li.SPACE_AROUND_EDGES),s>=u.a.instance.width-this.activeViewElement.offsetWidth&&(s=u.a.instance.width-this.activeViewElement.offsetWidth-li.SPACE_AROUND_EDGES),this.activeViewElement.style.left=s+"px",this.activeViewElement.style.top=n+"px"}hide(){this.parent&&this.parent.removeFriendRequest(this.requestId)}acceptFriendRequest(){this.parent&&this.parent.acceptFriendRequest(this.requestId)}declineFriendRequest(){this.parent&&this.parent.declineFriendRequest(this.requestId)}get activeViewElement(){return this.activeView&&this.activeView.nativeElement||null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&n.cd(ia,1),2&t){let t;n.Hc(t=n.oc())&&(e.activeView=t.first)}},decls:15,vars:11,consts:[[1,"nitro-widget-friendrequest-dialog","context-menu","card","align-items-center","p-2"],["activeView",""],[1,"drag-handler","d-flex","justify-content-between","align-items-center","mb-1","w-100",2,"font-size","14px"],[1,"m-0","text-wrap","w-100",2,"max-width","95%"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","justify-content-between","align-items-center","w-100"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["type","button",1,"btn","btn-sm","btn-success",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0,1),n.dc(2,"div",2),n.dc(3,"p",3),n.Wc(4),n.rc(5,"translate"),n.cc(),n.dc(6,"button",4),n.nc("click",function(){return e.hide()}),n.Zb(7,"i",5),n.cc(),n.cc(),n.dc(8,"div",6),n.dc(9,"button",7),n.nc("click",function(){return e.declineFriendRequest()}),n.Wc(10),n.rc(11,"translate"),n.cc(),n.dc(12,"button",8),n.nc("click",function(){return e.acceptFriendRequest()}),n.Wc(13),n.rc(14,"translate"),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(4),n.Xc(n.uc(5,3,"widget.friendrequest.from","username",e.userName)),n.Kb(6),n.Xc(n.sc(11,7,"widget.friendrequest.decline")),n.Kb(3),n.Xc(n.sc(14,9,"widget.friendrequest.accept")))},pipes:[ui],encapsulation:2}),t})();const aa=["contextsContainer"];function oa(t,e){}let ca=(()=>{class t extends ni{constructor(t,e){super(),this._componentFactoryResolver=t,this._ngZone=e,this.cachedFriendRequestDialogs=new Map,this.onRoomWidgetFriendRequestUpdateEvent=this.onRoomWidgetFriendRequestUpdateEvent.bind(this)}ngOnDestroy(){u.a.instance.ticker.remove(this.update,this)}registerUpdateEvents(t){t&&(t.addEventListener(Bt.RWFRUE_SHOW_FRIEND_REQUEST,this.onRoomWidgetFriendRequestUpdateEvent),t.addEventListener(Bt.RWFRUE_HIDE_FRIEND_REQUEST,this.onRoomWidgetFriendRequestUpdateEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(Bt.RWFRUE_SHOW_FRIEND_REQUEST,this.onRoomWidgetFriendRequestUpdateEvent),t.removeEventListener(Bt.RWFRUE_HIDE_FRIEND_REQUEST,this.onRoomWidgetFriendRequestUpdateEvent),super.unregisterUpdateEvents(t))}onRoomWidgetFriendRequestUpdateEvent(t){if(t){switch(t.type){case Bt.RWFRUE_SHOW_FRIEND_REQUEST:this.createFriendRequest(t.requestId,t.userId,t.userName);break;case Bt.RWFRUE_HIDE_FRIEND_REQUEST:this.removeFriendRequest(t.requestId)}this.toggleUpdateReceiver()}}createFriendRequest(t,e,s){const n=this.createView(ra);n&&(n.instance.requestId=t,n.instance.userId=e,n.instance.userName=s,this.cachedFriendRequestDialogs.set(n.instance,n))}removeFriendRequest(t){for(const e of this.cachedFriendRequestDialogs.values()){if(!e)continue;const s=e.instance;if(s&&s.requestId===t)return void this.removeView(e)}}toggleUpdateReceiver(){this.cachedFriendRequestDialogs&&this.cachedFriendRequestDialogs.size?u.a.instance.ticker.add(this.update,this):u.a.instance.ticker.remove(this.update,this)}createView(t){if(!t)return null;let e=null,s=null;return this._ngZone.run(()=>{const n=this._componentFactoryResolver.resolveComponentFactory(t);e=this.contextsContainer.createComponent(n),s=e.instance}),s&&e?(s.parent=this,e):null}removeView(t){if(!t)return;const e=this.contextsContainer.indexOf(t.hostView);-1!==e&&(this.cachedFriendRequestDialogs.delete(t.instance),this.toggleUpdateReceiver(),this._ngZone.run(()=>this.contextsContainer.remove(e)))}update(t){for(const e of this.cachedFriendRequestDialogs.values()){if(!e)continue;const t=e.instance,s=this.messageListener.processWidgetMessage(new He(He.RWGOI_MESSAGE_GET_OBJECT_LOCATION,t.userId,B.a.USER));s&&t.update(s.rectangle,s._Str_9337)}}acceptFriendRequest(t){this.messageListener&&(this.messageListener.processWidgetMessage(new Vt(Vt.RWFRM_ACCEPT,t)),this.removeFriendRequest(t))}declineFriendRequest(t){this.messageListener&&(this.messageListener.processWidgetMessage(new Vt(Vt.RWFRM_DECLINE,t)),this.removeFriendRequest(t))}get handler(){return this.widgetHandler}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(n.m),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-room-friendrequest-component"]],viewQuery:function(t,e){if(1&t&&n.cd(aa,1,n.Z),2&t){let t;n.Hc(t=n.oc())&&(e.contextsContainer=t.first)}},features:[n.Hb],decls:3,vars:0,consts:[[1,"nitro-widget-friendrequest"],["contextsContainer",""]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Uc(1,oa,0,0,"ng-template",null,1,n.Vc),n.cc())},encapsulation:2}),t})();var la=s("v1R/"),ha=s("AzHa"),ua=s("eaoH");function _a(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"h6",3),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"div",4),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(6,"i",5),n.cc(),n.cc(),n.dc(7,"div",6),n.dc(8,"div",7),n.dc(9,"color-chrome",8),n.nc("onChangeComplete",function(e){return n.Lc(t),n.qc().handleChangeComplete(e)}),n.cc(),n.cc(),n.dc(10,"div",9),n.dc(11,"button",10),n.nc("click",function(){return n.Lc(t),n.qc().handleButton("apply")}),n.Wc(12),n.rc(13,"translate"),n.cc(),n.dc(14,"button",10),n.nc("click",function(){return n.Lc(t),n.qc().handleButton("on_off")}),n.Wc(15),n.rc(16,"translate"),n.cc(),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(3),n.Xc(n.sc(4,5,"widget.backgroundcolor.title")),n.Kb(6),n.yc("color",t.hsl)("disableAlpha",!0),n.Kb(3),n.Xc(n.sc(13,7,"widget.backgroundcolor.button.apply")),n.Kb(3),n.Xc(n.sc(16,9,"widget.backgroundcolor.button.on"))}}let da=(()=>{class t extends ni{constructor(t){super(),this._ngZone=t,this._furniId=-1,this._visible=!1,this.saturation=0,this.hue=0,this.lightness=0,this.hsl={h:0,s:0,l:0}}open(t,e,s,n){this._ngZone.run(()=>{this._furniId=t,this._visible=!0,this.hue=Math.max(e,0),this.saturation=Math.max(s,0),this.lightness=Math.max(n,0),this.hsl={h:this.hue/255*360,s:this.saturation/255,l:this.lightness/255}})}hide(){this._visible=!1,this._furniId=-1}handleChangeComplete(t){if(!t)return;const e=z.a._Str_22130(parseInt(t.color.hex.replace("#",""),16));this.hue=e>>16&255,this.saturation=e>>8&255,this.lightness=255&e}handleButton(t){switch(t){case"apply":this.handler.container.connection.send(new ha.a(this._furniId,this.hue,this.saturation,this.lightness));break;case"on_off":this.handler.container.connection.send(new la.a(this._furniId))}}get handler(){return this.widgetHandler}get visible(){return this._visible}get delaySliderOptions(){return{floor:0,ceil:255,step:1,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-room-furniture-backgroundcolor-component"]],features:[n.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-dimmer card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-dimmer","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","align-items-center","justify-content-between","pt-3","px-3","w-100"],[1,"m-0"],[1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"d-flex","justify-content-center","align-items-center"],[3,"color","disableAlpha","onChangeComplete"],[1,"d-flex","justify-content-between","align-items-center","mt-2"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(t,e){1&t&&n.Uc(0,_a,17,11,"div",0),2&t&&n.yc("ngIf",e.visible)},directives:[m.n,Dr,Kr,ua.a],pipes:[ui],encapsulation:2}),t})();var ga=s("pjvS"),ma=s("rbNg");let pa=(()=>{class t{}return t.DEFAULT=1,t.WALL_PAPER=2,t.FLOOR=3,t.LANDSCAPE=4,t.POST_IT=5,t.POSTER=6,t.SOUND_SET=7,t.TRAX_SONG=8,t.PRESENT=9,t.ECOTRON_BOX=10,t.TROPHY=11,t.CREDIT_FURNI=12,t.PET_SHAMPOO=13,t.PET_CUSTOM_PART=14,t.PET_CUSTOM_PART_SHAMPOO=15,t.PET_SADDLE=16,t.GUILD_FURNI=17,t.GAME_FURNI=18,t.MONSTERPLANT_SEED=19,t.MONSTERPLANT_REVIVAL=20,t.MONSTERPLANT_REBREED=21,t.MONSTERPLANT_FERTILIZE=22,t.FIGURE_PURCHASABLE_SET=23,t})(),fa=(()=>{class t{constructor(t){this.elementRef=t}ngOnInit(){const t=this.elementRef.nativeElement;t&&(t.onerror=()=>{t.src="",t.onerror=null})}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(n.p))},t.\u0275dir=n.Tb({type:t,selectors:[["","image-placeholder",""]]}),t})();const Ea=["nitro-avatar-image",""];function Sa(t,e){if(1&t&&n.Zb(0,"img",1),2&t){const t=n.qc();n.Nb("avatar-image scale-",t.scale,""),n.yc("src",t.avatarUrl,n.Nc)}}let ba=(()=>{class t{constructor(t){this._ngZone=t,this.figure="",this.gender="M",this.headOnly=!1,this.direction=0,this.scale=1,this._avatarImageCache=new Bs.a,this.avatarUrl=null,this.disposed=!1,this.needsUpdate=!0}ngOnInit(){this.needsUpdate&&this.buildAvatar()}ngOnDestroy(){this.dispose()}ngOnChanges(t){const e=t.figure;e&&e.previousValue!==e.currentValue&&(this.needsUpdate=!0);const s=t.gender;s&&s.previousValue!==s.currentValue&&(this.needsUpdate=!0);const n=t.headOnly;n&&n.previousValue!==n.currentValue&&(this.needsUpdate=!0);const i=t.direction;i&&i.previousValue!==i.currentValue&&(this.needsUpdate=!0),this.needsUpdate&&this.buildAvatar()}dispose(){}resetFigure(t){this._avatarImageCache.remove(this.getAvatarBuildString()),this.buildAvatar()}buildAvatar(){this._ngZone.runOutsideAngular(()=>{this.needsUpdate=!1;const t=this.getUserImageUrl();t&&this._ngZone.run(()=>this.avatarUrl=t)})}getUserImageUrl(){const t=this.getAvatarBuildString();let e=this._avatarImageCache.getValue(t);if(!e){const s=u.a.instance.avatar.createAvatarImage(this.figure,It.a.LARGE,this.gender,this,null);if(s){let t=Rt.a.FULL;this.headOnly&&(t=Rt.a.HEAD),s.setDirection(t,this.direction);const n=s.getCroppedImage(t);n&&(e=n.src),s.dispose()}e&&this.putInCache(t,e)}return e}putInCache(e,s){this._avatarImageCache.length===t.MAX_CACHE_SIZE&&this._avatarImageCache.remove(this._avatarImageCache.getKey(0)),this._avatarImageCache.add(e,s)}getAvatarBuildString(){return`${this.figure}:${this.gender}:${this.direction}:${this.headOnly}`}}return t.MAX_CACHE_SIZE=10,t.\u0275fac=function(e){return new(e||t)(n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-avatar-image",""]],inputs:{figure:"figure",gender:"gender",headOnly:"headOnly",direction:"direction",scale:"scale"},features:[n.Ib],attrs:Ea,decls:1,vars:1,consts:[["image-placeholder","",3,"class","src",4,"ngIf"],["image-placeholder","",3,"src"]],template:function(t,e){1&t&&n.Uc(0,Sa,1,4,"img",0),2&t&&n.yc("ngIf",e.avatarUrl)},directives:[m.n,fa],encapsulation:2}),t})();function va(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"h6",3),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",4),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(6,"i",5),n.cc(),n.cc(),n.dc(7,"div",6),n.dc(8,"div",7),n.Zb(9,"div",8),n.cc(),n.dc(10,"div",9),n.dc(11,"p"),n.Wc(12),n.rc(13,"translate"),n.cc(),n.dc(14,"p"),n.Wc(15),n.rc(16,"translate"),n.cc(),n.cc(),n.cc(),n.dc(17,"div",10),n.dc(18,"button",11),n.nc("click",function(){return n.Lc(t),n.qc().handleButton("cancel")}),n.Wc(19),n.rc(20,"translate"),n.cc(),n.dc(21,"button",12),n.nc("click",function(){return n.Lc(t),n.qc().handleButton("use")}),n.Wc(22),n.rc(23,"translate"),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(3),n.Xc(n.sc(4,7,"useproduct.widget.title.bind_clothing")),n.Kb(6),n.yc("figure",t.newFigureString)("direction",2),n.Kb(3),n.Xc(n.sc(13,9,"useproduct.widget.text.bind_clothing")),n.Kb(3),n.Xc(n.sc(16,11,"useproduct.widget.info.bind_clothing")),n.Kb(4),n.Xc(n.sc(20,13,"useproduct.widget.cancel")),n.Kb(3),n.Xc(n.sc(23,15,"useproduct.widget.bind_clothing"))}}let Ia=(()=>{class t{constructor(){this.contextWidget=null,this.objectId=null,this.visible=!1,this._furniData=null,this._requestObjectId=-1,this.caption=null}hide(){this.contextWidget&&this.contextWidget.closeClothing()}open(t){if(!this.contextWidget)return;const e=this.contextWidget.handler.container.roomEngine.getRoomObject(this.contextWidget.handler.container.roomSession.roomId,t,k.a.FLOOR);if(!e)return;this._furniData=this.contextWidget.handler.getFurniData(e),this._requestObjectId=e.id;let s=-1;const n=[],i=this.contextWidget.handler.container.sessionDataManager.gender;switch(this._furniData.specialType){case pa.FIGURE_PURCHASABLE_SET:{s=0;const t=this._furniData.customParams.split(",");for(let e=0;e<t.length;e++){const s=Number.parseInt(t[e]);this.contextWidget.handler.container.avatarRenderManager.isValidFigureSetForGender(s,i)&&n.push(s)}}}this.newFigureString=this.contextWidget.handler.container.avatarRenderManager.getFigureStringWithFigureIds(this.contextWidget.handler.container.sessionDataManager.figure,i,n),this.contextWidget.inventoryService.hasBoundFigureSetFurniture(this.newFigureString)?this.contextWidget.handler.container.connection.send(new ma.a(i,this.newFigureString)):this.showWindow(s)}handleButton(t){switch(t){case"cancel":this.hide();break;case"use":{const t=this.contextWidget.handler.container.sessionDataManager.gender;this.contextWidget.handler.container.connection.send(new ga.a(this._requestObjectId)),this.contextWidget.handler.container.connection.send(new ma.a(t,this.newFigureString)),this.hide()}}}showWindow(t){this.caption=u.a.instance.localization.getValueWithParameter("useproduct.widget.text.bind_clothing","productName",this._furniData.name),this.visible=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],inputs:{contextWidget:"contextWidget",objectId:"objectId"},decls:1,vars:1,consts:[["class","nitro-furniture-purchasable-clothing card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-purchasable-clothing","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-3"],[1,"col-4","d-flex","align-items-center","justify-content-center"],["nitro-avatar-image","",1,"bg-secondary","rounded",3,"figure","direction"],[1,"col-8","d-flex","flex-column","align-items-center","justify-content-center"],[1,"d-flex","justify-content-between","align-items-center","p-3"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&n.Uc(0,va,24,17,"div",0),2&t&&n.yc("ngIf",e.visible)},directives:[m.n,Dr,Kr,ba],pipes:[ui],encapsulation:2}),t})();var Ra=s("1mUs");let Ta=(()=>{class t{}return t.FURNI=1,t.RENTABLE=2,t.PET=3,t.BADGE=4,t.BOT=5,t.GAMES=6,t._Str_12463=[t.FURNI,t.RENTABLE,t.PET,t.BADGE,t.BOT],t})();var ya=s("pRZV");class Oa{constructor(t,e){this._communication=t,this._inventoryService=e,this._unseenItems=[],this._messages=[],this.registerMessages()}dispose(){this.unregisterMessages(),this._communication=null,this._unseenItems=null}registerMessages(){this.unregisterMessages(),this._messages=[new ya.a(this.onUnseenItemsEvent.bind(this))];for(const t of this._messages)this._communication.registerMessageEvent(t)}unregisterMessages(){for(const t of this._messages)this._communication.removeMessageEvent(t);this._messages=[]}_Str_8813(t){return!!this._Str_5621(t)&&(delete this._unseenItems[t],this._Str_20981(t),!0)}_Str_18075(t,e){if(!this._Str_5621(t))return!1;const s=this._unseenItems[t];for(const n of e)s.splice(s.indexOf(n),1);return this._Str_23994(t,e),!0}_Str_17159(t){return!this._Str_5621(t)&&(delete this._unseenItems[t],this._Str_20981(t),!0)}_Str_3613(t,e){return!!this._unseenItems[t]&&this._unseenItems[t].indexOf(e)>=0}_Str_16745(t,e){if(!this._unseenItems[t])return!1;const s=this._unseenItems[t],n=s.indexOf(e);return-1!==n&&(s.splice(n,1),!0)}_Str_11239(t){return this._unseenItems?this._unseenItems[t]:[]}_Str_5621(t){return this._unseenItems[t]?this._unseenItems[t].length:0}onUnseenItemsEvent(t){if(!t)return;const e=t.getParser();if(e){for(const t of e.categories){const s=e.getItemsByCategory(t);this._Str_18112(t,s)}this._inventoryService.updateUnseenCount()}}_Str_18112(t,e){if(!e)return;let s=this._unseenItems[t];s||(s=[],this._unseenItems[t]=s);for(const n of e)-1===s.indexOf(n)&&s.push(n)}_Str_20981(t){}_Str_23994(t,e){}}let Ca=(()=>{class t{constructor(t,e){this._settingsService=t,this._ngZone=e,this._messages=[],this._events=null,this._botsController=null,this._badgesController=null,this._furniController=null,this._controller=null,this._petsController=null,this._tradeController=null,this._roomSession=null,this._unseenCount=0,this._botsVisible=!1,this._furnitureVisible=!0,this._badgesVisible=!1,this._petsVisible=!1,this._tradingVisible=!1,this._marketPlaceOfferVisible=!1,this._figureSetIds=[],this._boundFurnitureNames=[],this._events=new n.r,this._unseenTracker=new Oa(u.a.instance.communication,this),this._unseenCounts=new Map,this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages(),this._unseenTracker&&(this._unseenTracker.dispose(),this._unseenTracker=null)}registerMessages(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomSessionManager.events.addEventListener(M.a.STARTED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(M.a.ENDED,this.onRoomSessionEvent),this._messages=[new Ra.a(this.onFigureSetIdsMessageEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomSessionManager.events.removeEventListener(M.a.STARTED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(M.a.ENDED,this.onRoomSessionEvent);for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomSessionEvent(t){if(t)switch(t.type){case M.a.STARTED:return void(this._roomSession=t.session);case M.a.ENDED:return this._roomSession=null,void this._ngZone.run(()=>this.hideWindow())}}onFigureSetIdsMessageEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._figureSetIds=e.figureSetIds,this._boundFurnitureNames=e.boundsFurnitureNames})}updateUnseenCount(){setTimeout(()=>{this._ngZone.run(()=>{let t=0;const e=this._unseenTracker._Str_5621(Ta.FURNI);t+=e;const s=this._unseenTracker._Str_5621(Ta.BOT);t+=s;const n=this._unseenTracker._Str_5621(Ta.PET);t+=n;const i=this._unseenTracker._Str_5621(Ta.BADGE);t+=i,this._unseenCounts.set(Ta.FURNI,e),this._unseenCounts.set(Ta.BOT,s),this._unseenCounts.set(Ta.BADGE,i),this._unseenCounts.set(Ta.PET,n),this._unseenCount=t})},1)}updateItemLocking(){this.controller&&this.controller.updateItemLocking()}showWindow(){this._settingsService.showInventory()}hideWindow(){this.furniController&&(this.furniController.mouseDown=!1),this._settingsService.hideInventory()}hasFigureSetId(t){return this._figureSetIds.indexOf(t)>-1}hasBoundFigureSetFurniture(t){return this._boundFurnitureNames.indexOf(t)>-1}hideAllControllers(){this.furnitureVisible=!1,this.botsVisible=!1,this.petsVisible=!1,this.badgesVisible=!1}get events(){return this._events}get botsController(){return this._botsController}set botsController(t){this._botsController=t}set badgesController(t){this._badgesController=t}get furniController(){return this._furniController}set furniController(t){this._furniController=t}get controller(){return this._controller}set controller(t){this._controller=t}get petsController(){return this._petsController}set petsController(t){this._petsController=t}get tradeController(){return this._tradeController}set tradeController(t){this._tradeController=t}get unseenTracker(){return this._unseenTracker}get roomSession(){return this._roomSession}get furniUnseenCount(){return this._unseenCounts.get(Ta.FURNI)}get botUnseenCount(){return this._unseenCounts.get(Ta.BOT)}get petUnseenCount(){return this._unseenCounts.get(Ta.PET)}get badgeUnseenCount(){return this._unseenCounts.get(Ta.BADGE)}get unseenCount(){return this._unseenCount}get botsVisible(){return this._botsVisible}set botsVisible(t){this._botsVisible=t}get furnitureVisible(){return this._furnitureVisible}set furnitureVisible(t){this._furnitureVisible=t}get badgesVisible(){return this._badgesVisible}set badgesVisible(t){this._badgesVisible=t}get petsVisible(){return this._petsVisible}set petsVisible(t){this._petsVisible=t}get tradingVisible(){return this._tradingVisible}set tradingVisible(t){this._tradingVisible=t}get marketPlaceOfferVisible(){return this._marketPlaceOfferVisible}set marketPlaceOfferVisible(t){this._marketPlaceOfferVisible=t}get figureSetIds(){return this._figureSetIds}get boundFurnitureNames(){return this._boundFurnitureNames}}return t.\u0275fac=function(e){return new(e||t)(n.kc(g),n.kc(n.H))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})();const Aa=["purchaseClothing"];let Ma=(()=>{class t extends ni{constructor(t,e,s){super(),this._ngZone=t,this._resolver=e,this.inventoryService=s,this._visible=!1,this._selectedObject=null}registerUpdateEvents(t){t&&super.registerUpdateEvents(t)}unregisterUpdateEvents(t){t&&super.unregisterUpdateEvents(t)}_Str_24748(t){this._selectedObject=t,this._ngZone.run(()=>{this.purchaseClothingContainer.clear();const e=this._resolver.resolveComponentFactory(Ia);this._purchaseClothingContainerRef=this.purchaseClothingContainer.createComponent(e),this._purchaseClothingContainerRef.instance.contextWidget=this,this._purchaseClothingContainerRef.instance.open(t.id)})}closeClothing(){this._ngZone.run(()=>this.purchaseClothingContainer.clear())}hide(){this._visible=!1}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(t){this._visible=t}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(n.H),n.Yb(n.m),n.Yb(Ca))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-room-furniture-context-menu-component"]],viewQuery:function(t,e){if(1&t&&n.cd(Aa,1,n.Z),2&t){let t;n.Hc(t=n.oc())&&(e.purchaseClothingContainer=t.first)}},features:[n.Hb],decls:2,vars:0,consts:[["purchaseClothing",""]],template:function(t,e){1&t&&n.Zb(0,"template",null,0)},encapsulation:2}),t})();function wa(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"h6",3),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",4),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(6,"i",5),n.cc(),n.cc(),n.dc(7,"div",6),n.dc(8,"p"),n.Wc(9),n.rc(10,"translate"),n.cc(),n.dc(11,"div",7),n.dc(12,"button",8),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Wc(13),n.rc(14,"translate"),n.cc(),n.dc(15,"button",9),n.nc("click",function(){return n.Lc(t),n.qc().sendRedeem()}),n.Wc(16),n.rc(17,"translate"),n.cc(),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(3),n.Xc(n.sc(4,4,"catalog.redeem.dialog.title")),n.Kb(6),n.Xc(n.uc(10,6,"widgets.furniture.credit.redeem.value","value",t.value)),n.Kb(4),n.Xc(n.sc(14,10,"generic.cancel")),n.Kb(3),n.Xc(n.sc(17,12,"catalog.redeem.dialog.button.exchange"))}}let Ua=(()=>{class t extends ni{constructor(t){super(),this._ngZone=t,this._objectId=-1,this._value="0",this._visible=!1,this.onRoomWidgetCreditFurniUpdateEvent=this.onRoomWidgetCreditFurniUpdateEvent.bind(this)}registerUpdateEvents(t){t&&(t.addEventListener(Qt.RWCFUE_CREDIT_FURNI_UPDATE,this.onRoomWidgetCreditFurniUpdateEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(Qt.RWCFUE_CREDIT_FURNI_UPDATE,this.onRoomWidgetCreditFurniUpdateEvent),super.unregisterUpdateEvents(t))}onRoomWidgetCreditFurniUpdateEvent(t){t&&(this._objectId=t.objectId,this._ngZone.run(()=>{this._value=t.value.toString(),this._visible=!0}))}sendRedeem(){-1!==this._objectId&&(this.messageListener.processWidgetMessage(new Jt(Jt.RWFCRM_REDEEM,this._objectId)),this.hide())}hide(){this._visible=!1}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(t){this._visible=t}get value(){return this._value}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-room-furniture-credit-compontent"]],features:[n.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-credit card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-credit","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"d-flex","justify-content-between"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&n.Uc(0,wa,18,14,"div",0),2&t&&n.yc("ngIf",e.visible)},directives:[m.n,Dr,Kr],pipes:[ui],encapsulation:2}),t})();var Da=s("OGjZ");function Na(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"h6",3),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",4),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(6,"i",5),n.cc(),n.cc(),n.dc(7,"div",6),n.dc(8,"p",7),n.Wc(9),n.rc(10,"translate"),n.cc(),n.dc(11,"div",8),n.dc(12,"input",9),n.nc("input",function(e){return n.Lc(t),n.qc().slideToHeight(e.target.value)}),n.cc(),n.dc(13,"input",10),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().height=e}),n.cc(),n.cc(),n.dc(14,"div",11),n.dc(15,"button",12),n.nc("click",function(){return n.Lc(t),n.qc().placeAboveStack()}),n.Wc(16),n.rc(17,"translate"),n.cc(),n.dc(18,"button",12),n.nc("click",function(){return n.Lc(t),n.qc().placeAtFloor()}),n.Wc(19),n.rc(20,"translate"),n.cc(),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(3),n.Xc(n.sc(4,10,"widget.custom.stack.height.title")),n.Kb(6),n.Xc(n.sc(10,12,"widget.custom.stack.height.text")),n.Kb(3),n.zc("value",t.height),n.yc("min",t.minHeight)("max",t.maxHeight),n.Kb(1),n.yc("ngModel",t.height)("min",t.minHeight)("max",t.maxHeight),n.Kb(3),n.Xc(n.sc(17,14,"furniture.above.stack")),n.Kb(3),n.Xc(n.sc(20,16,"furniture.floor.level"))}}let La=(()=>{class t extends ni{constructor(t){super(),this._ngZone=t,this._visible=!1,this._furniId=-1,this._height=0,this._saveTimeout=null}open(t,e){this._ngZone.run(()=>{this._furniId=t,this._height=e,this._visible=!0,this.setHeight(e,!0)})}update(t,e){this._ngZone.run(()=>this._furniId===t&&this.setHeight(e,!0))}hide(){this._visible=!1,this._furniId=-1,this._height=0}setHeight(e,s=!1){e=Math.abs(e),s||e>t.MAX_HEIGHT&&(e=t.MAX_HEIGHT),this._height=parseFloat(e.toFixed(2)),s||this.scheduleUpdate(100*this._height)}scheduleUpdate(t){this._saveTimeout&&(clearTimeout(this._saveTimeout),this._saveTimeout=null),this._saveTimeout=setTimeout(()=>this.sendUpdate(t),5)}sendUpdate(t){this.widgetHandler.container.connection.send(new Da.a(this._furniId,~~t))}placeAboveStack(){this.sendUpdate(-100)}placeAtFloor(){this.sendUpdate(0)}slideToHeight(t){this.height=t}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(t){this._visible=t}get furniId(){return this._furniId}get height(){return this._height}set height(t){this.setHeight(t,!1)}get minHeight(){return 0}get maxHeight(){return t.MAX_HEIGHT}}return t.MAX_HEIGHT=40,t.MAX_RANGE_HEIGHT=10,t.STEP_VALUE=.01,t.\u0275fac=function(e){return new(e||t)(n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-room-furniture-customstackheight-component"]],features:[n.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-customstackheight card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-customstackheight","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"text-justify","mb-2"],[1,"d-flex","justify-content-center","align-items-center","mb-2"],["type","range",1,"custom-range","ml-1",3,"value","min","max","input"],["name","heightInput","type","number",1,"form-control","form-control-sm",3,"ngModel","min","max","ngModelChange"],[1,"d-flex","justify-content-between","align-items-center"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(t,e){1&t&&n.Uc(0,Na,21,18,"div",0),2&t&&n.yc("ngIf",e.visible)},directives:[m.n,Dr,Kr,ur.p,ur.b,ur.l,ur.n],pipes:[ui],encapsulation:2}),t})();var Pa=s("mgaL");function xa(t,e){if(1&t){const t=n.ec();n.dc(0,"button",21),n.nc("click",function(){n.Lc(t);const s=e.index;return n.qc(3).selectPreset(s+1)}),n.Wc(1),n.rc(2,"translate"),n.cc()}if(2&t){const t=e.index;n.Kb(1),n.Xc(n.sc(2,1,"widget.dimmer.tab."+(t+1)))}}const Fa=function(t){return{"color-selected":t}},ka=function(t){return{"background-color":t}};function Wa(t,e){if(1&t){const t=n.ec();n.dc(0,"button",22),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc(3).selectColor(s)}),n.cc()}if(2&t){const t=e.$implicit,s=e.index,i=n.qc(3);n.yc("ngClass",n.Cc(2,Fa,i.getSelectedPreset().color==t))("ngStyle",n.Cc(4,ka,i.htmlColors[s]))}}function Ba(t,e){if(1&t){const t=n.ec();n.bc(0),n.dc(1,"div",9),n.Uc(2,xa,3,3,"button",10),n.cc(),n.dc(3,"div",11),n.dc(4,"div",12),n.Uc(5,Wa,1,6,"button",13),n.cc(),n.dc(6,"div",14),n.dc(7,"ngx-slider",15),n.nc("valueChange",function(){return n.Lc(t),n.qc(2).onSliderChange()})("valueChange",function(e){return n.Lc(t),n.qc(2).getSelectedPreset().intensity=e}),n.cc(),n.cc(),n.cc(),n.dc(8,"div",16),n.dc(9,"div",17),n.dc(10,"input",18),n.nc("change",function(e){return n.Lc(t),n.qc(2).changeCheckbox(e)}),n.cc(),n.dc(11,"label",19),n.Wc(12),n.rc(13,"translate"),n.cc(),n.cc(),n.cc(),n.dc(14,"div",9),n.dc(15,"button",20),n.nc("click",function(){return n.Lc(t),n.qc(2).handleButton("on_off")}),n.Wc(16),n.rc(17,"translate"),n.cc(),n.dc(18,"button",20),n.nc("click",function(){return n.Lc(t),n.qc(2).handleButton("apply")}),n.Wc(19),n.rc(20,"translate"),n.cc(),n.cc(),n.ac()}if(2&t){const t=n.qc(2);n.Kb(2),n.yc("ngForOf",t.presets),n.Kb(3),n.yc("ngForOf",t.availableColors),n.Kb(2),n.yc("options",t.delaySliderOptions)("value",t.getSelectedPreset().intensity),n.Kb(3),n.yc("ngModel",t.getSelectedPreset().backgroundOnly),n.Kb(2),n.Xc(n.sc(13,8,"widget.dimmer.type.checkbox")),n.Kb(4),n.Xc(n.sc(17,10,t.isOn?"widget.dimmer.button.off":"widget.dimmer.button.on")),n.Kb(3),n.Xc(n.sc(20,12,"widget.dimmer.button.apply"))}}function Va(t,e){if(1&t){const t=n.ec();n.bc(0),n.Wc(1),n.rc(2,"translate"),n.dc(3,"button",23),n.nc("click",function(){return n.Lc(t),n.qc(2).handleButton("on_off")}),n.Wc(4),n.rc(5,"translate"),n.cc(),n.ac()}if(2&t){const t=n.qc(2);n.Kb(1),n.Yc(" ",n.sc(2,2,"widget.dimmer.info.off")," "),n.Kb(3),n.Xc(n.sc(5,4,t.isOn?"widget.dimmer.button.off":"widget.dimmer.button.on"))}}function Ga(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"h6",3),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"div",4),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(6,"i",5),n.cc(),n.cc(),n.dc(7,"div",6),n.dc(8,"div",7),n.Uc(9,Ba,21,14,"ng-container",8),n.Uc(10,Va,6,6,"ng-container",8),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(3),n.Xc(n.sc(4,3,"widget.dimmer.title")),n.Kb(6),n.yc("ngIf",t.isOn),n.Kb(1),n.yc("ngIf",!t.isOn)}}let Ka=(()=>{class t extends ni{constructor(t){super(),this._ngZone=t,this._visible=!1,this._dimmerState=0,this._effectId=0,this._color=16777215,this._brightness=255,this.presets=[],this.selectedPresetId=0,this.isOn=!1,this.availableColors=[7665141,21495,15161822,15353138,15923281,8581961,0],this.htmlColors=["#74F5F5","#0053F7","#E759DE","#EA4532","#F2F851","#82F349","#000000"],this.onDimmerPresetsEvent=this.onDimmerPresetsEvent.bind(this),this.onDimmerStateEvent=this.onDimmerStateEvent.bind(this)}registerUpdateEvents(t){t&&(t.addEventListener(re.RWDUE_PRESETS,this.onDimmerPresetsEvent),t.addEventListener(ne.RWDSUE_DIMMER_STATE,this.onDimmerStateEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(re.RWDUE_PRESETS,this.onDimmerPresetsEvent),t.removeEventListener(ne.RWDSUE_DIMMER_STATE,this.onDimmerStateEvent),super.unregisterUpdateEvents(t))}getSelectedPreset(){return this.presets[this.selectedPresetId-1]}selectPreset(t){this.selectedPresetId=t}selectColor(t){this.getSelectedPreset().color=t,this.previewSettings()}onDimmerPresetsEvent(t){this.presets=t.presets.map(t=>({color:t.color,id:t.id,intensity:t._Str_4272,backgroundOnly:2==t.type})),this.selectedPresetId=t.selectedPresetId,this._ngZone.run(()=>{this._visible=!0})}onDimmerStateEvent(t){this._ngZone.run(()=>{this.isOn=1==t.state,this._effectId=t._Str_6815,this._color=t.color,this._brightness=t._Str_5123}),this.messageListener.processWidgetMessage(new oe(this._color,this._brightness,2===this._effectId))}get handler(){return this.widgetHandler}hide(){this._visible=!1}get visible(){return this._visible&&this.selectedPresetId>0&&this.presets.length>0}set visible(t){this._visible=t}onSliderChange(){this.previewSettings()}changeCheckbox(t){this.getSelectedPreset().backgroundOnly=t.target.checked,this.previewSettings()}previewSettings(){if(!this.messageListener)return;const t=this.getSelectedPreset();this.messageListener.processWidgetMessage(new oe(t.color,t.intensity,t.backgroundOnly))}handleButton(t){switch(t){case"on_off":this.toggleState();break;case"apply":this.apply()}}toggleState(){this.messageListener&&this.messageListener.processWidgetMessage(new ae)}apply(){if(!this.isOn||!this.messageListener||null==this.presets||0==this.presets.length)return;const t=this.getSelectedPreset();t&&this.messageListener.processWidgetMessage(new ce(t.id,t.backgroundOnly?2:1,t.color,t.intensity,!0))}get delaySliderOptions(){return{floor:75,ceil:255,step:1,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-room-furniture-dimmer-component"]],features:[n.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-dimmer card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-dimmer","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","align-items-center","justify-content-between","pt-3","px-3","w-100"],[1,"m-0"],[1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"dimmer-inner","bg-secondary","p-2"],[4,"ngIf"],[1,"d-flex","flex-row","justify-content-between"],["type","button","class","btn btn-sm btn-primary w-100",3,"click",4,"ngFor","ngForOf"],[1,"py-2"],[1,"d-flex","flex-row","dimmer-colour-list"],["type","button","class","btn btn-sm dimmer-colour py-3",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[1,"custom-slider"],[3,"options","value","valueChange"],[1,"d-block","mb-1"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","change"],[1,"form-check-label"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],["type","button",1,"btn","btn-sm","btn-primary","w-100",3,"click"],["type","button",1,"btn","btn-sm","dimmer-colour","py-3",3,"ngClass","ngStyle","click"],["type","button",1,"btn","btn-primary","btn-sm","w-100",3,"click"]],template:function(t,e){1&t&&n.Uc(0,Ga,11,5,"div",0),2&t&&n.yc("ngIf",e.visible)},directives:[m.n,Dr,Kr,m.m,Pa.b,ur.a,ur.l,ur.n,m.l,m.o],pipes:[ui],encapsulation:2}),t})();function Ha(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"h6",3),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",4),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(6,"i",5),n.cc(),n.cc(),n.dc(7,"div",6),n.dc(8,"div",7),n.dc(9,"p"),n.Wc(10),n.rc(11,"translate"),n.cc(),n.cc(),n.cc(),n.dc(12,"div",8),n.dc(13,"button",9),n.nc("click",function(){return n.Lc(t),n.qc().handleButton("cancel")}),n.Wc(14),n.rc(15,"translate"),n.cc(),n.dc(16,"button",10),n.nc("click",function(){return n.Lc(t),n.qc().handleButton("confirm")}),n.Wc(17),n.rc(18,"translate"),n.cc(),n.cc(),n.cc()}2&t&&(n.Kb(3),n.Xc(n.sc(4,4,"friend.furniture.confirm.lock.caption")),n.Kb(7),n.Xc(n.sc(11,6,"friend.furniture.confirm.lock.subtitle")),n.Kb(4),n.Xc(n.sc(15,8,"friend.furniture.confirm.lock.button.cancel")),n.Kb(3),n.Xc(n.sc(18,10,"friend.furniture.confirm.lock.button.confirm")))}let ja=(()=>{class t extends ni{constructor(t){super(),this._ngZone=t,this._visible=!1,this._furniId=-1}open(t,e){this._visible&&-1!=this._furniId&&this.sendStart(this._furniId,!1),this._ngZone.run(()=>{this._furniId=t,this._visible=!0})}handleButton(t){switch(t){case"confirm":this.sendStart(this._furniId,!0),this.hide();break;case"cancel":this.sendStart(this._furniId,!1),this.hide()}}sendStart(t,e){u.a.instance.communication.connection.send(new Nt.a(t,e))}hide(){this._visible=!1,this._furniId=-1}get visible(){return this._visible}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-purchasable-clothing card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-purchasable-clothing","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-6"],[1,"col-4","d-flex","align-items-center","justify-content-center"],[1,"d-flex","justify-content-between","align-items-center","p-3"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&n.Uc(0,Ha,19,12,"div",0),2&t&&n.yc("ngIf",e.visible)},directives:[m.n,Dr,Kr],pipes:[ui],encapsulation:2}),t})(),za=(()=>{class t{}return t._Str_13451=0,t._Str_17498=1,t._Str_18746=2,t._Str_15230=3,t._Str_15778=4,t})();const Ya=function(t){return{backgroundImage:t}};function qa(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"div",3),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.cc(),n.dc(3,"div",4),n.dc(4,"div",5),n.Zb(5,"div",6),n.cc(),n.dc(6,"div",5),n.Zb(7,"div",6),n.cc(),n.cc(),n.dc(8,"p",7),n.Wc(9),n.rc(10,"translate"),n.cc(),n.dc(11,"p",8),n.Wc(12),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.yc("ngStyle",n.Cc(11,Ya,"url("+t.image+")")),n.Kb(5),n.yc("figure",t.firstFigure)("direction",2),n.Kb(2),n.yc("figure",t.secondFigure)("direction",4),n.Kb(2),n.Xc(n.sc(10,9,"lovelock.engraving.caption")),n.Kb(3),n.ad("",t.firstName," | ",t.secondName," | ",t.engravedDate,"")}}let Xa=(()=>{class t extends ni{constructor(t){super(),this._ngZone=t,this.engravingView=null,this.visible=!1,this.firstFigure=null,this.firstName=null,this.secondFigure=null,this.secondName=null,this.engravedDate=null}open(t,e,s){switch(e){case za._Str_13451:this.engravingView="engraving";break;case za._Str_17498:case za._Str_18746:break;case za._Str_15230:this.engravingView="wildwest";break;case za._Str_15778:this.engravingView="hween14"}this.engravingView&&this._ngZone.run(()=>{this.firstName=s.getValue(1),this.secondName=s.getValue(2),this.firstFigure=s.getValue(3),this.secondFigure=s.getValue(4),this.engravedDate=s.getValue(5),this.visible=!0})}hide(){this.visible=!1}get image(){return u.a.instance.getConfiguration("furni.extras.url").toString().replace("%image%","loveLock_"+this.engravingView)}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-friends-engraving",3,"bringToTop","draggable","ngStyle",4,"ngIf"],[1,"nitro-furniture-friends-engraving",3,"bringToTop","draggable","ngStyle"],[1,"drag-handler","d-flex","flex-column","small","h-100"],[1,"friend-close","position-absolute",3,"click"],[1,"row","justify-content-center"],[1,"col-2","d-flex","justify-content-center"],["nitro-avatar-image","",3,"figure","direction"],[1,"w-100","text-center"],[1,"w-100","text-center","mt-auto"]],template:function(t,e){1&t&&n.Uc(0,qa,13,13,"div",0),2&t&&n.yc("ngIf",e.visible)},directives:[m.n,Dr,Kr,m.o,ba],pipes:[ui],encapsulation:2}),t})(),Za=(()=>{class t{}return t.DEFAULT=1,t._Str_3639=2,t._Str_3683=3,t._Str_3432=4,t._Str_12351=5,t._Str_5186=6,t._Str_21911=7,t._Str_9125=8,t._Str_5922=9,t._Str_18231=10,t._Str_4255=11,t._Str_19933=12,t._Str_7696=13,t._Str_7297=14,t._Str_7954=15,t._Str_6096=16,t._Str_12454=17,t._Str_19144=18,t.MONSTERPLANT_SEED=19,t._Str_6915=20,t._Str_8726=21,t._Str_9449=22,t._Str_12534=23,t})();var Qa=s("9NDz"),Ja=s("asXX"),$a=s("Byou"),to=s("wGhc"),eo=s("x7td"),so=s("qLWH"),no=s("SS1c"),io=s("t0/d"),ro=s("sxwv"),ao=s("u5n9"),oo=s("Zq74"),co=s("ReTp"),lo=s("j7DG"),ho=s("U4HJ"),uo=s("Ftck"),_o=s("liWC"),go=s("oKt9"),mo=s("rQEl"),po=s("BG3s"),fo=s("2H63"),Eo=s("8ZkN"),So=s("Z50b"),bo=s("+gkD"),vo=s("yt9a"),Io=s("3CL9"),Ro=s("BgaL"),To=s("NjFb");class yo{constructor(t){this._children=t}get children(){return this._children}get icon(){return-1}get localization(){return""}get offerIds(){return[]}get pageId(){return-1}get pageName(){return""}get visible(){return!0}}var Oo=s("Fwdp"),Co=s("z20u"),Ao=s("De5v"),Mo=s("qD21");let wo=(()=>{class t{constructor(t,e,s,n,i,r,a,o,c=-1){this._timeLeftMinutes=-1,this._offerId=t,this._furniId=e,this._furniType=s,this._extraData=n,this._stuffData=i,this._price=r,this._status=a,this._averagePrice=o,this._offerCount=c}get offerId(){return this._offerId}set offerId(t){this._offerId=t}get furniId(){return this._furniId}get furniType(){return this._furniType}get extraData(){return this._extraData}get stuffData(){return this._stuffData}get price(){return this._price}set price(t){this._price=t}get _Str_3925(){return this._averagePrice}get image(){return this._image}set image(t){this._image=t}set _Str_4774(t){this._imageCallback=t}get _Str_4774(){return this._imageCallback}get status(){return this._status}get _Str_5853(){return this._timeLeftMinutes}set _Str_5853(t){this._timeLeftMinutes=t}get _Str_4121(){return this._offerCount}set _Str_4121(t){this._offerCount=t}get isUniqueLimitedItem(){return!(null==this.stuffData)&&this.stuffData.uniqueSeries>0}}return t.TYPE_LANDSCAPE=1,t.TYPE_FLOOR=2,t})();var Uo=s("E+Qe"),Do=s("hJEQ"),No=s("m5sF"),Lo=s("fPSk"),Po=s("4Xjj"),xo=s("AlQl"),Fo=s("b+vr");let ko=(()=>{class t{constructor(t,e){this._ngZone=t,this._notificationService=e,this._totalOffersFound=0,this._creditsWaiting=0,this._lastSearchRequest=null,this._activeOfferToBuy=null,this._messages=[],this.registerMessages(),this._lastOwnOffers=new Bs.a}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new Mo.a(this.onMarketplaceOwnItemsEvent.bind(this)),new Do.a(this.onMarketplaceCancelItemEvent.bind(this)),new Po.a(this.onMarketplaceOffersReceivedEvent.bind(this)),new Fo.a(this.onMarketplaceAfterOrderStatusEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}ngOnDestroy(){this.unregisterMessages()}onMarketplaceOwnItemsEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._creditsWaiting=e.creditsWaiting;for(const t of e.offers){const e=new wo(t.offerId,t.furniId,t.furniType,t.extraData,t.stuffData,t.price,t.status,t._Str_3925);e._Str_5853=t._Str_5853,this._lastOwnOffers.add(t.offerId,e)}})}onMarketplaceAfterOrderStatusEvent(t){if(!t)return;const e=t.getParser();if(e)if(1==e.result&&this._lastSearchRequest)this.requestOffers(this._lastSearchRequest);else{if(2==e.result){const t=e._Str_7501,s=[];for(const e of this._offerOnMarket)e.offerId!=t&&s.push(e);return this._ngZone.run(()=>this._offerOnMarket=s),void this._notificationService.alert(u.a.instance.localization.getValue("catalog.marketplace.not_available_header"),u.a.instance.localization.getValue("catalog.marketplace.not_available_title"))}3==e.result&&this._lastSearchRequest?this.requestOffers(this._lastSearchRequest):4!=e.result||this._notificationService.alert(u.a.instance.localization.getValue("catalog.alert.notenough.credits.description"),u.a.instance.localization.getValue("catalog.alert.notenough.title"))}}onMarketplaceOffersReceivedEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._totalOffersFound=e.totalItemsFound,this._offerOnMarket=e.offers})}onMarketplaceCancelItemEvent(t){if(!t)return;const e=t.getParser();e&&(e.success?this._ngZone.run(()=>{this._lastOwnOffers.remove(e.offerId)}):this._notificationService.alert(u.a.instance.localization.getValue("catalog.marketplace.cancel_failed"),u.a.instance.localization.getValue("catalog.marketplace.operation_failed.topic")))}requestOwnItem(){u.a.instance.communication.connection.send(new Ao.a)}get lastOwnOffers(){return this._lastOwnOffers}get publicOffers(){return this._offerOnMarket}get totalOffersFound(){return this._totalOffersFound}get creditsWaiting(){return this._creditsWaiting}redeemExpiredMarketPlaceOffer(t){u.a.instance.communication.connection.send(new Uo.a(t))}redeemCredits(){const e=[];for(const s of this._lastOwnOffers.getValues())s.status===t._Str_8295&&e.push(s.offerId);for(const t of e)this._lastOwnOffers.remove(t);u.a.instance.communication.connection.send(new No.a)}requestOffers(t){this._lastSearchRequest=t,u.a.instance.communication.connection.send(new Lo.a(t.minPrice,t.maxPrice,t.query,t.type))}buyOffer(t){this._activeOfferToBuy=t}get currentMarketplaceOfferToBuy(){return this._activeOfferToBuy}buyMarketplaceOffer(t){this._activeOfferToBuy=null,u.a.instance.communication.connection.send(new xo.a(t))}}return t._Str_20923=1,t._Str_15376=1,t._Str_8295=2,t._Str_6495=3,t.\u0275fac=function(e){return new(e||t)(n.kc(n.H),n.kc(es))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})(),Wo=(()=>{class t{constructor(t,e,s){this._catalogService=t,this._marketService=e,this._ngZone=s,this.activePage=null,this.roomPreviewerVisible=!0}getText(t=0){let e=this.activePage.localization.texts[t]||"";return e&&e.length&&(e=e.replace(/\r\n|\r|\n/g,"<br />")),e||""}getImage(t=0){const e=this.activePage.localization.images&&this.activePage.localization.images[t];if(!e||!e.length)return null;let s=u.a.instance.getConfiguration("catalog.asset.image.url");return s=s.replace("%name%",e),s}getCurrencyUrl(t){return u.a.instance.getConfiguration("currency.asset.icon.url").replace("%type%",t.toString())}getProductFurniData(t){return t?this._catalogService.getFurnitureDataForProductOffer(t):null}offerImage(t){if(!t)return"";const e=t.products[0];if(!e)return"";switch(e.productType.toUpperCase()){case Co.a.BADGE:return u.a.instance.sessionDataManager.getBadgeUrl(e.extraParam);case Co.a.FLOOR:return u.a.instance.roomEngine.getFurnitureFloorIconUrl(e.furniClassId);case Co.a.WALL:return u.a.instance.roomEngine.getFurnitureWallIconUrl(e.furniClassId,e.extraParam)}return""}hasMultipleProducts(t){return t.products.length>1}offerName(t){const e=this._catalogService.getProductDataForLocalization(t.localizationId);return e?e.name:t.localizationId}getFirstProduct(t){return t&&t.products[0]||null}get headerText(){return this._catalogService.catalogRoot.localization||null}get offers(){return this._catalogService.activePage.offers}get activeOffer(){return this._catalogService.component&&this._catalogService.component.activeOffer||null}get roomPreviewer(){return this._catalogService.component&&this._catalogService.component.roomPreviewer||null}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(gc),n.Yb(ko),n.Yb(n.H))},t.\u0275dir=n.Tb({type:t}),t})();function Bo(t,e){if(1&t&&n.Zb(0,"img",9),2&t){const t=n.qc(2);n.yc("src",t.getImage(1),n.Nc)}}function Vo(t,e){if(1&t&&(n.dc(0,"div",7),n.Uc(1,Bo,1,1,"img",8),n.cc()),2&t){const t=n.qc();n.Kb(1),n.yc("ngIf",t.getImage(1))}}function Go(t,e){if(1&t&&(n.dc(0,"div",15),n.dc(1,"div"),n.Zb(2,"div",16),n.rc(3,"uniqueNumber"),n.Wc(4),n.rc(5,"translate"),n.cc(),n.dc(6,"div"),n.Zb(7,"div",16),n.rc(8,"uniqueNumber"),n.Wc(9),n.rc(10,"translate"),n.cc(),n.cc()),2&t){const t=n.qc(2);n.Kb(2),n.yc("innerHtml",n.sc(3,4,t.activeOffer.products[0].uniqueLimitedItemsLeft),n.Mc),n.Kb(2),n.Yc(" ",n.sc(5,6,"unique.items.left")," "),n.Kb(3),n.yc("innerHtml",n.sc(8,8,t.activeOffer.products[0].uniqueLimitedSeriesSize),n.Mc),n.Kb(2),n.Yc(" ",n.sc(10,10,"unique.items.number.sold")," ")}}function Ko(t,e){if(1&t&&n.Zb(0,"div",17),2&t){const t=n.qc(2);n.yc("roomPreviewer",t.roomPreviewer)("width",366)("height",180)}}function Ho(t,e){if(1&t&&(n.dc(0,"div",18),n.Zb(1,"img",9),n.cc()),2&t){const t=n.qc(2);n.Kb(1),n.yc("src",t.offerImage(t.activeOffer),n.Nc)}}function jo(t,e){if(1&t&&(n.dc(0,"div",10),n.dc(1,"div",11),n.Wc(2),n.cc(),n.Uc(3,Go,11,12,"div",12),n.Uc(4,Ko,1,3,"div",13),n.Uc(5,Ho,2,1,"div",14),n.cc()),2&t){const t=n.qc();n.Kb(2),n.Xc(t.offerName(t.activeOffer)),n.Kb(1),n.yc("ngIf",t.activeOffer.products[0].uniqueLimitedItem),n.Kb(1),n.yc("ngIf",t.roomPreviewerVisible),n.Kb(1),n.yc("ngIf",!t.roomPreviewerVisible)}}function zo(t,e){if(1&t&&(n.dc(0,"div",25),n.Wc(1),n.cc()),2&t){const t=n.qc(2).$implicit,e=n.qc();n.Kb(1),n.Xc(e.offerCount(t))}}function Yo(t,e){if(1&t&&(n.Zb(0,"div",26),n.rc(1,"uniqueNumber")),2&t){const t=n.qc(2).$implicit;n.yc("innerHtml",n.sc(1,1,t.products[0].uniqueLimitedSeriesSize),n.Mc)}}const qo=function(t,e,s){return{active:t,unique:e,"sold-out":s}},Xo=function(t){return{"background-image":t}};function Zo(t,e){if(1&t){const t=n.ec();n.dc(0,"div",20),n.nc("click",function(){n.Lc(t);const e=n.qc().$implicit;return n.qc().selectOffer(e)}),n.dc(1,"button",21),n.Zb(2,"div",22),n.Uc(3,zo,2,1,"div",23),n.Uc(4,Yo,2,3,"div",24),n.cc(),n.cc()}if(2&t){const t=n.qc().$implicit,e=n.qc();n.Kb(1),n.yc("ngClass",n.Ec(4,qo,e.activeOffer===t,t.products[0].uniqueLimitedItem,t.products[0].uniqueLimitedItem&&!t.products[0].uniqueLimitedItemsLeft)),n.Kb(1),n.yc("ngStyle",n.Cc(8,Xo,"url("+e.offerImage(t)+")")),n.Kb(1),n.yc("ngIf",e.offerCount(t)>1),n.Kb(1),n.yc("ngIf",t.products[0].uniqueLimitedItem)}}function Qo(t,e){if(1&t&&(n.bc(0),n.Uc(1,Zo,5,10,"div",19),n.ac()),2&t){const t=e.$implicit;n.Kb(1),n.yc("ngIf",t.products[0])}}function Jo(t,e){if(1&t&&n.Zb(0,"div",27),2&t){const t=n.qc();n.yc("activePage",t.activePage)("activeOffer",t.activeOffer)("quantityEnabled",t.activeOffer.bundlePurchaseAllowed)}}let $o=(()=>{class t extends Wo{selectOffer(t){if(!t)return;const e=t.products[0];e&&(this.roomPreviewerVisible=-1==[ge.BADGE].indexOf(e.productType),this._catalogService.component&&this._catalogService.component.selectOffer(t))}offerCount(t){if(!this.hasMultipleProducts(t)){const e=this.getFirstProduct(t);if(e)return e.productCount}return 1}}return t.CODE="default_3x3",t.\u0275fac=function(e){return tc(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:7,vars:4,consts:[[1,"d-flex","flex-column","w-100","h-100"],["class","d-flex flex-column justify-content-center align-items-center w-100 h-100 mb-2",4,"ngIf"],["class","position-relative d-flex flex-column justify-content-center align-items-center w-100 mb-2",4,"ngIf"],[1,"grid-container","w-100",2,"min-height","209px","max-height","209px","height","209px"],[1,"grid-items","grid-6"],[4,"ngFor","ngForOf"],["class","d-flex align-items-end flex-grow-1 w-100 mt-1","nitro-catalog-purchase-component","",3,"activePage","activeOffer","quantityEnabled",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","mb-2"],["image-placeholder","",3,"src",4,"ngIf"],["image-placeholder","",3,"src"],[1,"position-relative","d-flex","flex-column","justify-content-center","align-items-center","w-100","mb-2"],[1,"position-absolute","bg-secondary","rounded","text-center","m-2","p-2","t-0","l-0",2,"z-index","1"],["class","unique-counter-complete position-absolute","style","z-index:1;",4,"ngIf"],["class","room-preview","nitro-room-preview-component","",3,"roomPreviewer","width","height",4,"ngIf"],["class","d-flex justify-content-center align-items-center h-100 w-100",4,"ngIf"],[1,"unique-counter-complete","position-absolute",2,"z-index","1"],[3,"innerHtml"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","width","height"],[1,"d-flex","justify-content-center","align-items-center","h-100","w-100"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngIf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info",3,"ngClass"],[1,"position-absolute","detail-info","has-image",3,"ngStyle"],["class","position-absolute bg-danger px-1 py-0 rounded shadow count",4,"ngIf"],["class","position-absolute unique-counter",3,"innerHtml",4,"ngIf"],[1,"position-absolute","bg-danger","px-1","py-0","rounded","shadow","count"],[1,"position-absolute","unique-counter",3,"innerHtml"],["nitro-catalog-purchase-component","",1,"d-flex","align-items-end","flex-grow-1","w-100","mt-1",3,"activePage","activeOffer","quantityEnabled"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Uc(1,Vo,2,1,"div",1),n.Uc(2,jo,6,4,"div",2),n.dc(3,"perfect-scrollbar",3),n.dc(4,"div",4),n.Uc(5,Qo,2,1,"ng-container",5),n.cc(),n.cc(),n.Uc(6,Jo,1,3,"div",6),n.cc()),2&t&&(n.Kb(1),n.yc("ngIf",!e.activeOffer),n.Kb(1),n.yc("ngIf",e.activeOffer&&e.activeOffer.products[0]),n.Kb(3),n.yc("ngForOf",e.offers),n.Kb(1),n.yc("ngIf",e.activeOffer))},encapsulation:2}),t})();const tc=n.fc($o);function ec(t,e){if(1&t&&n.Zb(0,"img",9),2&t){const t=n.qc(2);n.yc("src",t.getImage(1),n.Nc)}}function sc(t,e){if(1&t&&(n.dc(0,"div",7),n.Uc(1,ec,1,1,"img",8),n.cc()),2&t){const t=n.qc();n.Kb(1),n.yc("ngIf",t.getImage(1))}}function nc(t,e){if(1&t&&n.Zb(0,"div",14),2&t){const t=n.qc(2);n.yc("roomPreviewer",t.roomPreviewer)("width",364)("height",182)}}function ic(t,e){if(1&t&&(n.dc(0,"div",15),n.Zb(1,"img",9),n.cc()),2&t){const t=n.qc(2);n.Kb(1),n.yc("src",t.offerImage(t.activeOffer),n.Nc)}}function rc(t,e){if(1&t&&(n.dc(0,"div",10),n.dc(1,"div",11),n.Wc(2),n.cc(),n.Uc(3,nc,1,3,"div",12),n.Uc(4,ic,2,1,"div",13),n.cc()),2&t){const t=n.qc();n.Kb(2),n.Xc(t.offerName(t.activeOffer)),n.Kb(1),n.yc("ngIf",t.roomPreviewerVisible),n.Kb(1),n.yc("ngIf",!t.roomPreviewerVisible)}}const ac=function(t){return{"background-image":t}};function oc(t,e){if(1&t){const t=n.ec();n.dc(0,"div",16),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().requestOfferData(s)}),n.Zb(1,"button",17),n.cc()}if(2&t){const t=e.$implicit,s=n.qc();n.Kb(1),n.yc("ngStyle",n.Cc(1,ac,"url("+s.searchItemImage(t)+")"))}}function cc(t,e){if(1&t&&n.Zb(0,"div",18),2&t){const t=n.qc();n.yc("activePage",t.activePage)("activeOffer",t.activeOffer)("quantityEnabled",t.activeOffer.bundlePurchaseAllowed)}}let lc=(()=>{class t extends $o{requestOfferData(t){this._catalogService.requestOfferData(t.purchaseOfferId)}searchItemImage(t){return t?this._catalogService.getFurnitureDataIconUrl(t):null}get searchItems(){return this._catalogService.activePage instanceof uc?this._catalogService.activePage.furni:[]}}return t.CODE="search_results",t.\u0275fac=function(e){return hc(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:7,vars:4,consts:[[1,"d-flex","flex-column","w-100","h-100"],["class","d-flex flex-column justify-content-center align-items-center w-100 h-100 mb-2",4,"ngIf"],["class","position-relative d-flex flex-column justify-content-center align-items-center w-100 h-100 mb-2",4,"ngIf"],[1,"grid-container","w-100",2,"min-height","209px","max-height","209px","height","209px"],[1,"grid-items","grid-6"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],["class","d-flex align-items-center flex-grow-1 w-100 mt-1","nitro-catalog-purchase-component","",3,"activePage","activeOffer","quantityEnabled",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","mb-2"],["image-placeholder","",3,"src",4,"ngIf"],["image-placeholder","",3,"src"],[1,"position-relative","d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","mb-2"],[1,"position-absolute","bg-secondary","rounded","text-center","m-2","p-2","t-0","l-0",2,"z-index","1"],["class","room-preview","nitro-room-preview-component","",3,"roomPreviewer","width","height",4,"ngIf"],["class","d-flex justify-content-center align-items-center h-100 w-100",4,"ngIf"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","width","height"],[1,"d-flex","justify-content-center","align-items-center","h-100","w-100"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image",3,"ngStyle"],["nitro-catalog-purchase-component","",1,"d-flex","align-items-center","flex-grow-1","w-100","mt-1",3,"activePage","activeOffer","quantityEnabled"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Uc(1,sc,2,1,"div",1),n.Uc(2,rc,5,3,"div",2),n.dc(3,"perfect-scrollbar",3),n.dc(4,"div",4),n.Uc(5,oc,2,3,"div",5),n.cc(),n.cc(),n.Uc(6,cc,1,3,"div",6),n.cc()),2&t&&(n.Kb(1),n.yc("ngIf",!e.activeOffer),n.Kb(1),n.yc("ngIf",e.activeOffer),n.Kb(3),n.yc("ngForOf",e.searchItems),n.Kb(1),n.yc("ngIf",e.activeOffer))},encapsulation:2}),t})();const hc=n.fc(lc);class uc{constructor(t){this._furni=null,this._offer=null,this._furni=t}get searchOffer(){return this._offer}selectSearchResult(t,e){e&&(this._offer=e.offer)}get acceptSeasonCurrencyAsCredits(){return!1}get catalogType(){return lc.CODE}get frontPageItems(){return[]}get layoutCode(){return lc.CODE}get localization(){return{images:[],texts:[]}}get offerId(){return null}get offers(){return[]}get furni(){return this._furni}get pageId(){return-1}}class _c{constructor(t){if(this._isEnabled=!1,this._price=null,this._stuffTypes=null,this._boxTypes=null,this._ribbonTypes=null,this._defaultStuffTypes=null,!t)return;const e=t.getParser();e&&(this._isEnabled=e.isEnabled,this._price=e.price,this._boxTypes=e.boxTypes,this._ribbonTypes=e.ribbonTypes,this._stuffTypes=e.giftWrappers,this._defaultStuffTypes=e.giftFurnis)}get isEnabled(){return this._isEnabled}get price(){return this._price}get stuffTypes(){return this._stuffTypes}get boxTypes(){return this._boxTypes}get ribbonTypes(){return this._ribbonTypes}get defaultStuffTypes(){return this._defaultStuffTypes}}class dc{}let gc=(()=>{class t{constructor(t,e,s,n){this._settingsService=t,this._notificationService=e,this._soundService=s,this._ngZone=n,this._messages=[],this._component=null,this._giftConfiguratorComponent=null,this._catalogMode=-1,this._catalogRoot=null,this._activePage=null,this._clubGiftsParser=null,this._activePageData=null,this._manuallyCollapsed=[],this._isLoading=!1,this._purse=new dc,this._clubOffers=[],this._vipTemplate=null,this._groupFurniTemplate=null,this._loaded=!1,this._giftWrappingConfiguration=null,this._offersToRoots=null,this.registerMessages()}ngOnDestroy(){this.unregisterMessages(),this._vipTemplate=null,this._groupFurniTemplate=null}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new Qa.a(this.onCatalogClubEvent.bind(this)),new so.a(this.onCatalogModeEvent.bind(this)),new no.a(this.onCatalogPageEvent.bind(this)),new io.a(this.onCatalogPagesEvent.bind(this)),new ro.a(this.onCatalogPurchaseEvent.bind(this)),new ao.a(this.onCatalogPurchaseFailedEvent.bind(this)),new oo.a(this.onCatalogPurchaseUnavailableEvent.bind(this)),new ho.a(this.onCatalogSearchEvent.bind(this)),new uo.a(this.onCatalogSoldOutEvent.bind(this)),new _o.a(this.onCatalogUpdatedEvent.bind(this)),new eo.a(this.onCatalogGroupsEvent.bind(this)),new go.a(this.onUserSubscriptionEvent.bind(this)),new go.a(this.onUserSubscriptionEvent.bind(this)),new $a.a(this.onGiftConfigurationEvent.bind(this)),new to.a(this.onGiftUsernameUnavailableEvent.bind(this)),new Ja.a(this.onCatalogClubGiftsEvent.bind(this)),new co.a(this.onCatalogRedeemVoucherError.bind(this)),new lo.a(this.onCatalogRedeemVoucherOk.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t);u.a.instance.communication.connection.send(new bo.a)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onCatalogClubEvent(t){if(!t||!t.getParser()||!this._vipTemplate)return;const e=t.getParser().offers;this._clubOffers=e,this._vipTemplate.setOffers(e)}onCatalogClubGiftsEvent(t){if(!t)return;const e=t.getParser();e&&(this._clubGiftsParser=e)}registerVipBuyTemplate(t){this._vipTemplate=t}registerGroupFurniTemplate(t){this._groupFurniTemplate=t}onGiftConfigurationEvent(t){this._giftWrappingConfiguration=new _c(t)}onGiftUsernameUnavailableEvent(t){this._giftConfiguratorComponent&&this._giftConfiguratorComponent.showUsernameNotFoundDialog()}onCatalogModeEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this._catalogMode=e.mode)}onCatalogPageEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._activePage=e,this._component&&this._component.setupLayout(),this._isLoading=!1})}onCatalogPagesEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._catalogRoot=e.root,this.setOffersToNodes(this._catalogRoot),this._isLoading=!1,this._component&&this._component.selectFirstTab()})}onCatalogPurchaseEvent(t){t&&t.getParser()&&(this._ngZone.run(()=>this._component&&this._component.hidePurchaseConfirmation()),this._soundService.playInternalSample(Ls.CATALOG_PURCHASE))}onCatalogPurchaseFailedEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._notificationService.alert("${catalog.alert.purchaseerror.description."+e.code+"}","${catalog.alert.purchaseerror.title}"),this._component&&this._component.hidePurchaseConfirmation()})}onCatalogPurchaseUnavailableEvent(t){t&&t.getParser()}onCatalogSearchEvent(t){if(!(this._activePage instanceof uc))return;if(!t)return;const e=t.getParser();e&&e.offer&&this._ngZone.run(()=>this._component&&this._component.selectOffer(e.offer))}onCatalogSoldOutEvent(t){t&&t.getParser()&&this._ngZone.run(()=>{this._notificationService.alert("${catalog.alert.limited_edition_sold_out.message}","${catalog.alert.limited_edition_sold_out.title}"),this._component&&this._component.hidePurchaseConfirmation()})}onCatalogGroupsEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._groupFurniTemplate.groups=e.groups})}onUserSubscriptionEvent(t){if(!t)return;const e=t.getParser();e&&(this._purse.clubDays=Math.max(0,e.days),this._purse.clubPeriods=Math.max(0,e.months),this._purse.isVip=e.isVip,this._purse.pastClubDays=e.pastVIPDays,this._purse.Str_14389=e.years==Oo.a._Str_14729,this._purse.minutesUntilExpiration=e.totalSeconds)}onCatalogUpdatedEvent(t){t&&t.getParser()&&this._ngZone.run(()=>{this._isLoading=!1,this._catalogMode=-1,this._catalogRoot=null,this._activePage=null,this._activePageData=null,this._component&&this._component.reset(),this._settingsService.catalogVisible&&(this._component.hide(),this._notificationService.alert("${catalog.alert.published.description}","${catalog.alert.published.title}"))})}onCatalogRedeemVoucherError(t){if(!t)return;const e=t.getParser();e&&this._settingsService.catalogVisible&&this._notificationService.alert("${catalog.alert.voucherredeem.error.description."+e.errorCode+"}","${catalog.alert.voucherredeem.error.title}")}onCatalogRedeemVoucherOk(t){t&&t.getParser()&&this._settingsService.catalogVisible&&this._notificationService.alert("${catalog.alert.voucherredeem.ok.description}","${catalog.alert.voucherredeem.ok.title}")}setupCatalog(t){t&&(this._isLoading=!0,this._catalogRoot=null,this._activePage=null,this._activePageData=null,this._component&&this._component.reset(),u.a.instance.communication.connection.send(new po.a(t)))}requestGroups(){u.a.instance.communication.connection.send(new mo.a)}requestPage(e){e&&this.canSelectPage(e)&&(this._activePageData=e,-1!==e.pageId&&(this._isLoading=!0,this.requestPageData(e.pageId,-1,t.MODE_NORMAL)))}requestPageData(t,e,s){u.a.instance.communication.connection.send(new fo.a(t,e,s))}isDescendant(t,e){if(!t||!e)return!1;if(t===e)return!0;if(t.children.length)for(const s of t.children)if(s){if(s===e)return!0;if(this.isDescendant(s,e))return!0}return!1}getFurnitureDataForProductOffer(t){if(!t)return null;let e=null;switch(t.productType.toUpperCase()){case Co.a.FLOOR:e=u.a.instance.sessionDataManager.getFloorItemData(t.furniClassId);break;case Co.a.WALL:e=u.a.instance.sessionDataManager.getWallItemData(t.furniClassId)}return e}getProductDataForLocalization(t){return t?u.a.instance.sessionDataManager.getProductData(t):null}getFurnitureDataIconUrl(t){if(!t)return null;const e=u.a.instance.roomEngine.roomContentLoader.getAssetUrls(t.className,t.colorIndex.toString(),!0);return e&&e[0]||null}purchase(t,e,s,n=null){t&&e&&s&&this.purchaseById(t.pageId,e.offerId,s,n)}purchaseGiftOffer(t,e,s,n,i,r,a,o,c){u.a.instance.communication.connection.send(new So.a(t.pageId,e.offerId,s,n,i,r,a,o,c))}purchaseById(t,e,s,n=null){if(t&&e&&s){if(-1==t){const s=this.getOfferPages(e);if(!s)return;t=s[0].pageId}u.a.instance.communication.connection.send(new Eo.a(t,e,n,s))}}requestOffers(t){u.a.instance.communication.connection.send(new Io.a(t))}requestClubGifts(){u.a.instance.communication.connection.send(new vo.a)}redeemVoucher(t){t&&0!==t.trim().length&&u.a.instance.communication.connection.send(new To.a(t))}manuallyCollapsePage(t){const e=this._manuallyCollapsed.indexOf(t);-1===e?this._manuallyCollapsed.push(t):this._manuallyCollapsed.splice(e,1)}canSelectPage(t){return!(!t||!t.visible)}get component(){return this._component}set component(t){this._component=t}set giftConfiguratorComponent(t){this._giftConfiguratorComponent=t}get catalogMode(){return this._catalogMode}get catalogRoot(){return this._catalogRoot}get activePage(){return this._activePage}get activePageData(){return this._activePageData}get manuallyCollapsed(){return this._manuallyCollapsed}get purse(){return this._purse}get vipOffers(){return this._clubOffers}get giftWrapperConfiguration(){return this._giftWrappingConfiguration}getOfferPages(t){if(!this._catalogRoot||!this._offersToRoots)return null;const e=this._offersToRoots.getValue(t);if(!e||!e.length)return null;const s=[];for(const n of e)n&&n.visible&&s.push(n);return s.length?s:null}setOffersToNodes(t){if(t){if(this._offersToRoots||(this._offersToRoots=new Bs.a),t.offerIds&&t.offerIds.length)for(const e of t.offerIds){let s=this._offersToRoots.getValue(e);s||(s=[],this._offersToRoots.add(e,s)),s.indexOf(t)>=0||s.push(t)}if(t.children&&t.children.length)for(const e of t.children)e&&this.setOffersToNodes(e)}}setSearchPage(t){const e=new Bs.a;for(const s of t){const t=[this.getOfferPages(s.purchaseOfferId),this.getOfferPages(s.rentOfferId)];for(const s of t)if(s&&s.length>0)for(const t of s)e.hasKey(t.pageId)||e.add(t.pageId,t)}this._searchResultsPages=new yo(e.getValues()),this._activePage=new uc(t)}requestOfferData(t){u.a.instance.communication.connection.send(new Ro.a(t))}get clubGiftsParser(){return this._clubGiftsParser}hasClubDays(){return!!this._purse&&this._purse.clubDays>0}get searchResults(){return this._searchResultsPages}clearSearchResults(){this._searchResultsPages=null,this.component&&this.component.reselectCurrentTab()}}return t.MODE_NORMAL="NORMAL",t.\u0275fac=function(e){return new(e||t)(n.kc(g),n.kc(es),n.kc(Ks),n.kc(n.H))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})();var mc=s("IxQr");const pc=["nitro-furniture-image",""];function fc(t,e){if(1&t&&n.Zb(0,"img",1),2&t){const t=n.qc();n.yc("src",t.imageUrl,n.Nc)}}let Ec=(()=>{class t{constructor(t){this._ngZone=t,this.type="s",this.spriteId=-1,this.direction=0,this.extras="",this.imageUrl=null,this.needsUpdate=!0}ngOnInit(){this.needsUpdate&&this.buildImage()}ngOnChanges(t){const e=t.type;e&&e.previousValue!==e.currentValue&&(this.needsUpdate=!0);const s=t.spriteId;s&&s.previousValue!==s.currentValue&&(this.needsUpdate=!0);const n=t.direction;n&&n.previousValue!==n.currentValue&&(this.needsUpdate=!0);const i=t.extras;i&&i.previousValue!==i.currentValue&&(this.needsUpdate=!0),this.needsUpdate&&this.buildImage()}buildImage(){this._ngZone.runOutsideAngular(()=>{this.needsUpdate=!1;let t=null;switch(this.type.toLocaleLowerCase()){case ge.FLOOR:t=u.a.instance.roomEngine.getFurnitureFloorImage(this.spriteId,new q.a(this.direction),64,this,0,this.extras);break;case ge.WALL:t=u.a.instance.roomEngine.getFurnitureWallImage(this.spriteId,new q.a(this.direction),64,this,0,this.extras)}if(t){const e=t.getImage();e&&this._ngZone.run(()=>this.imageUrl=e.src)}})}imageReady(t,e,s){if(e)if(s)this._ngZone.run(()=>this.imageUrl=s.src);else if(e){const t=mc.a.generateImageUrl(e);t&&this._ngZone.run(()=>this.imageUrl=t)}}imageFailed(t){}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-furniture-image",""]],inputs:{type:"type",spriteId:"spriteId",direction:"direction",extras:"extras"},features:[n.Ib],attrs:pc,decls:1,vars:1,consts:[["class","d-block","image-placeholder","",3,"src",4,"ngIf"],["image-placeholder","",1,"d-block",3,"src"]],template:function(t,e){1&t&&n.Uc(0,fc,1,1,"img",0),2&t&&n.yc("ngIf",e.imageUrl)},directives:[m.n,fa],encapsulation:2}),t})();function Sc(t,e){if(1&t&&n.Zb(0,"div",17),2&t){const t=n.qc(3);n.yc("headOnly",!0)("figure",t.figure)("direction",2)}}function bc(t,e){1&t&&n.Zb(0,"div",18)}function vc(t,e){if(1&t){const t=n.ec();n.bc(0),n.dc(1,"div",9),n.dc(2,"div",10),n.Uc(3,Sc,1,3,"div",11),n.Uc(4,bc,1,0,"div",12),n.cc(),n.dc(5,"div",13),n.dc(6,"p",14),n.Wc(7),n.cc(),n.cc(),n.cc(),n.dc(8,"div",15),n.dc(9,"button",16),n.nc("click",function(){return n.Lc(t),n.qc(2).handleButton("accept")}),n.Wc(10),n.rc(11,"translate"),n.cc(),n.cc(),n.ac()}if(2&t){const t=n.qc(2);n.Kb(3),n.yc("ngIf",!t.isAnonymousGift),n.Kb(1),n.yc("ngIf",t.isAnonymousGift),n.Kb(3),n.Xc(t.text),n.Kb(3),n.Xc(n.sc(11,4,"widget.furni.present.open_gift"))}}function Ic(t,e){if(1&t){const t=n.ec();n.dc(0,"button",16),n.nc("click",function(){return n.Lc(t),n.qc(3).handleButton("furni_place_in_room")}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"widget.furni.present.place_in_room")))}function Rc(t,e){if(1&t){const t=n.ec();n.bc(0),n.dc(1,"div",9),n.dc(2,"div",10),n.Zb(3,"div",19),n.cc(),n.dc(4,"div",13),n.dc(5,"p",14),n.Wc(6),n.cc(),n.cc(),n.cc(),n.dc(7,"div",15),n.Uc(8,Ic,3,3,"button",20),n.dc(9,"button",16),n.nc("click",function(){return n.Lc(t),n.qc(2).handleButton("furni_place_in_inventory")}),n.Wc(10),n.rc(11,"translate"),n.cc(),n.cc(),n.ac()}if(2&t){const t=n.qc(2);n.Kb(3),n.yc("type",t.type)("spriteId",t.spriteId)("extras",t.extras),n.Kb(3),n.Xc(t.text),n.Kb(2),n.yc("ngIf",!t.isWallItem),n.Kb(2),n.Xc(n.sc(11,6,"widget.furni.present.put_in_inventory"))}}function Tc(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"h6",3),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"div",4),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(6,"i",5),n.cc(),n.cc(),n.dc(7,"div",6),n.bc(8,7),n.Uc(9,vc,12,6,"ng-container",8),n.Uc(10,Rc,12,8,"ng-container",8),n.ac(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(3),n.Xc(n.uc(4,4,t.getGiftTitle(),"name",t.senderName)),n.Kb(5),n.yc("ngSwitch",t.currentView),n.Kb(1),n.yc("ngSwitchCase","open_present"),n.Kb(1),n.yc("ngSwitchCase","present_opened")}}let yc=(()=>{class t extends ni{constructor(t,e,s){super(),this._ngZone=t,this._catalogService=e,this._inventoryService=s,this._lastEvent=null,this._needsOpen=!1,this._currentView="",this._type=null,this._spriteId=-1,this._extras=null,this._text=null,this._isWallItem=!1,this._visible=!1,this.onObjectUpdate=this.onObjectUpdate.bind(this),this.onFurniRemoved=this.onFurniRemoved.bind(this)}registerUpdateEvents(t){t&&(t.addEventListener(me.RWPDUE_PACKAGEINFO,this.onObjectUpdate),t.addEventListener(me.RWPDUE_CONTENTS,this.onObjectUpdate),t.addEventListener(me.RWPDUE_CONTENTS_FLOOR,this.onObjectUpdate),t.addEventListener(me.RWPDUE_CONTENTS_LANDSCAPE,this.onObjectUpdate),t.addEventListener(me.RWPDUE_CONTENTS_WALLPAPER,this.onObjectUpdate),t.addEventListener(J.FURNI_REMOVED,this.onFurniRemoved),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(me.RWPDUE_PACKAGEINFO,this.onObjectUpdate),t.removeEventListener(me.RWPDUE_CONTENTS,this.onObjectUpdate),t.removeEventListener(me.RWPDUE_CONTENTS_FLOOR,this.onObjectUpdate),t.removeEventListener(me.RWPDUE_CONTENTS_LANDSCAPE,this.onObjectUpdate),t.removeEventListener(me.RWPDUE_CONTENTS_WALLPAPER,this.onObjectUpdate),t.removeEventListener(J.FURNI_REMOVED,this.onFurniRemoved),super.unregisterUpdateEvents(t))}onObjectUpdate(t){t&&(this.reset(),this._ngZone.run(()=>{switch(this._lastEvent=t,t.type){case me.RWPDUE_PACKAGEINFO:this.showOpeningPresent();break;case me.RWPDUE_CONTENTS:case me.RWPDUE_CONTENTS_FLOOR:case me.RWPDUE_CONTENTS_LANDSCAPE:case me.RWPDUE_CONTENTS_WALLPAPER:case me.RWPDUE_CONTENTS_CLUB:this._type=t.itemType,this._spriteId=t.classId,this._isWallItem="i"===t.itemType,this.showOpenPresent()}}))}onFurniRemoved(t){this._lastEvent&&this._lastEvent.objectId===t.id&&this.hide()}hide(){this._visible=!1,this.reset()}reset(){this._type=null,this._spriteId=-1,this._extras=null,this._text=null,this._isWallItem=!1,this._lastEvent=null,this._currentView=null}showOpeningPresent(){!this._lastEvent||this._lastEvent.objectId<0||(this._text=this._lastEvent.giftMessage||"",this._currentView="open_present",this._visible=!0)}showOpenPresent(){!this._lastEvent||this._lastEvent.objectId<0||(this._text=u.a.instance.localization.getValueWithParameter("widget.furni.present.message_opened","product",this._lastEvent.giftMessage),this.isSpacesFurniture()&&(this._text=u.a.instance.localization.getValueWithParameter("widget.furni.present.spaces.message_opened","product",this._lastEvent.giftMessage)),this._currentView="present_opened",this._visible=!0)}isSpacesFurniture(){if(!this._lastEvent||this._lastEvent.itemType!==ge.WALL)return!1;const e=u.a.instance.sessionDataManager.getWallItemData(this._lastEvent.classId);if(!e)return!1;const s=e.className;return s==t.FLOOR||s==t.LANDSCAPE||s==t.WALLPAPER}handleButton(t){if(t)switch(t){case"accept":this.acceptAndOpenPresent();break;case"return":break;case"furni_place_in_room":this.placeItemInRoom();break;case"furni_place_in_inventory":this.hide()}}acceptAndOpenPresent(){this.messageListener.processWidgetMessage(new pe(pe.RWPOM_OPEN_PRESENT,this._lastEvent.objectId)),this.hide()}placeItemInRoom(){const t=this._lastEvent&&this._lastEvent.placedItemId;if(t>0&&(!this._lastEvent||!this._lastEvent.placedInRoom))switch(this._lastEvent&&this._lastEvent.placedItemType){case ge.FLOOR:{const e=this._inventoryService.controller.furnitureService.getFurnitureItem(-t);this.canMoveItem(e);break}case ge.WALL:{const e=this._inventoryService.controller.furnitureService.getFurnitureItem(t);this.canMoveItem(e);break}}this.hide()}canMoveItem(t){if(!t)return!1;let e=!0;return e=t.category!=Za._Str_3683&&t.category!=Za._Str_3639&&t.category!=Za._Str_3432&&this._inventoryService.controller.furnitureService.startRoomObjectPlacementWithoutRequest(t),e}getGiftTitle(){return this.isAnonymousGift?"widget.furni.present.window.title":"widget.furni.present.window.title_from"}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(t){this._visible=t}get currentView(){return this._currentView}get figure(){return this._lastEvent.purchaserFigure}get senderText(){return this._lastEvent.giftMessage}get senderName(){return this._lastEvent.purchaserName}get type(){return this._type}get spriteId(){return this._spriteId}get extras(){return this._extras}get text(){return this._text}get isWallItem(){return this._isWallItem}get isAnonymousGift(){return!this.senderName||0==this.senderName.length}}return t.FLOOR="floor",t.WALLPAPER="wallpaper",t.LANDSCAPE="landscape",t.\u0275fac=function(e){return new(e||t)(n.Yb(n.H),n.Yb(gc),n.Yb(Ca))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-room-furniture-gift-opening-component"]],features:[n.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-gift-opening card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-gift-opening","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","align-items-center","justify-content-between","pt-3","px-3","w-100"],[1,"m-0"],[1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"row"],[1,"col-5"],["class","d-flex justify-content-center align-items-center bg-secondary rounded h-100 overflow-hidden p-3","nitro-avatar-image","",3,"headOnly","figure","direction",4,"ngIf"],["class","d-flex justify-content-center align-items-center bg-secondary rounded h-100 overflow-hidden p-3",4,"ngIf"],[1,"col-7","d-flex","justify-content-center","align-items-center"],[1,"h5","m-0","p-0"],[1,"d-flex","align-items-center","mt-2","btn-group"],["type","button",1,"btn","btn-secondary",3,"click"],["nitro-avatar-image","",1,"d-flex","justify-content-center","align-items-center","bg-secondary","rounded","h-100","overflow-hidden","p-3",3,"headOnly","figure","direction"],[1,"d-flex","justify-content-center","align-items-center","bg-secondary","rounded","h-100","overflow-hidden","p-3"],["nitro-furniture-image","",1,"d-flex","justify-content-center","align-items-center","bg-secondary","rounded","h-100","overflow-hidden","p-3",3,"type","spriteId","extras"],["type","button","class","btn btn-secondary",3,"click",4,"ngIf"]],template:function(t,e){1&t&&n.Uc(0,Tc,11,8,"div",0),2&t&&n.yc("ngIf",e.visible)},directives:[m.n,Dr,Kr,m.p,m.q,ba,Ec],pipes:[ui],encapsulation:2}),t})();const Oc=["activeView"];function Cc(t,e){if(1&t&&(n.dc(0,"div"),n.Wc(1),n.cc()),2&t){const t=e.$implicit;n.Kb(1),n.Xc(t)}}function Ac(t,e){if(1&t&&(n.dc(0,"tr"),n.dc(1,"td"),n.Wc(2),n.cc(),n.dc(3,"td"),n.Uc(4,Cc,2,1,"div",13),n.cc(),n.dc(5,"td"),n.Wc(6),n.cc(),n.cc()),2&t){const t=e.$implicit,s=e.index;n.Kb(2),n.Xc(s+1),n.Kb(2),n.yc("ngForOf",t.users),n.Kb(2),n.Xc(t.score)}}function Mc(t,e){if(1&t&&(n.dc(0,"div",6),n.dc(1,"div",7),n.dc(2,"p",8),n.Wc(3),n.cc(),n.cc(),n.dc(4,"div",9),n.dc(5,"perfect-scrollbar",10),n.dc(6,"table",11),n.dc(7,"thead"),n.dc(8,"tr",12),n.dc(9,"th"),n.Wc(10,"#"),n.cc(),n.dc(11,"th"),n.Wc(12),n.rc(13,"translate"),n.cc(),n.dc(14,"th"),n.Wc(15),n.rc(16,"translate"),n.cc(),n.cc(),n.cc(),n.dc(17,"tbody"),n.Uc(18,Ac,7,3,"tr",13),n.cc(),n.cc(),n.cc(),n.dc(19,"div",14),n.Wc(20),n.rc(21,"translate"),n.cc(),n.cc(),n.cc()),2&t){const t=n.qc(2);n.Kb(3),n.Xc(t.title),n.Kb(9),n.Xc(n.sc(13,5,"high.score.display.users.header")),n.Kb(3),n.Xc(n.sc(16,7,"high.score.display.score.header")),n.Kb(3),n.yc("ngForOf",t.entries),n.Kb(2),n.Xc(n.sc(21,9,"high.score.display.congratulations.footer"))}}const wc=function(t,e){return{top:t,left:e}},Uc=function(t,e){return{"pb-1":t,"py-1":e}},Dc=function(t,e){return{"fa-chevron-up":t,"fa-chevron-down":e}};function Nc(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1,2),n.Uc(2,Mc,22,11,"div",3),n.dc(3,"div",4),n.dc(4,"i",5),n.nc("click",function(){return n.Lc(t),n.qc().toggle()}),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.yc("ngStyle",n.Dc(4,wc,t.topValue+"px",t.leftValue+"px")),n.Kb(2),n.yc("ngIf",!t.toggled),n.Kb(1),n.yc("ngClass",n.Dc(7,Uc,!t.toggled,t.toggled)),n.Kb(1),n.yc("ngClass",n.Dc(10,Dc,t.toggled,!t.toggled))}}let Lc=(()=>{class t extends ni{constructor(t){super(),this._ngZone=t,this.view=null,this._visible=!1,this._toggled=!1,this._objectId=-1,this._roomId=-1,this._stuffData=null,this.topValue=0,this.leftValue=0,this.scoreTypes=["perteam","mostwins","classic"],this.clearTypes=["alltime","daily","weekly","monthly"]}open(t,e,s){this._ngZone.run(()=>{this._objectId=t,this._roomId=e,this._stuffData=s,this._visible=!0})}updatePoint(t,e){this._visible&&this._ngZone.run(()=>{const s=this.view&&this.view.nativeElement||null;s&&(this.leftValue=t-s.offsetWidth/2,this.topValue=e-(s.offsetHeight+60))})}openProfile(t){u.a.instance.createLinkEvent("profile/name/"+t)}toggle(){this._ngZone.run(()=>{this._toggled=!this._toggled})}hide(){this._ngZone.run(()=>{this._visible=!1,this._objectId=-1,this._roomId=-1,this._stuffData=null})}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(t){this._visible=t}get toggled(){return this._toggled}get objectId(){return this._objectId}get roomId(){return this._roomId}get entries(){return this._stuffData?this._stuffData.entries:[]}get clearTypeCode(){return this._stuffData?"high.score.display.cleartype."+this.clearTypes[this._stuffData.clearType]:null}get scoreTypeCode(){return this._stuffData?"high.score.display.scoretype."+this.scoreTypes[this._stuffData.scoreType]:null}get title(){if(!this.scoreTypeCode||!this.clearTypeCode)return null;const t=u.a.instance.getLocalization(this.scoreTypeCode),e=u.a.instance.getLocalization(this.clearTypeCode);return u.a.instance.getLocalizationWithParameters("high.score.display.caption",["scoretype","cleartype"],[t,e])}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-room-furniture-highscore-component"]],viewQuery:function(t,e){if(1&t&&n.cd(Oc,1),2&t){let t;n.Hc(t=n.oc())&&(e.view=t.first)}},features:[n.Hb],decls:1,vars:1,consts:[["class","nitro-widget-highscore context-menu card align-items-center",3,"ngStyle",4,"ngIf"],[1,"nitro-widget-highscore","context-menu","card","align-items-center",3,"ngStyle"],["activeView",""],["class","p-2","style","padding-bottom: 0px !important",4,"ngIf"],[1,"text-center=","px-2",3,"ngClass"],[1,"fas",3,"ngClass","click"],[1,"p-2",2,"padding-bottom","0px !important"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","mb-1",2,"font-size","14px"],[1,"m-0","text-wrap","text-center","w-100"],[1,"w-100"],[2,"min-height","255px","max-height","255px","height","255px","width","282px"],[1,"table","table-sm"],[2,"position","sticky"],[4,"ngFor","ngForOf"],[1,"mt-2","text-center"]],template:function(t,e){1&t&&n.Uc(0,Nc,5,13,"div",0),2&t&&n.yc("ngIf",e.visible)},directives:[m.n,m.o,m.l,Hr.b,m.m],pipes:[ui],encapsulation:2}),t})();var Pc=s("/niJ"),xc=s("o1ML"),Fc=s("q25d");function kc(t,e){1&t&&(n.dc(0,"div",14),n.Wc(1,"\xa0"),n.cc())}function Wc(t,e){if(1&t){const t=n.ec();n.dc(0,"div",15),n.Wc(1),n.rc(2,"translate"),n.dc(3,"button",16),n.nc("click",function(){return n.Lc(t),n.qc(2).handleButton("close")}),n.Wc(4),n.rc(5,"translate"),n.cc(),n.Zb(6,"br"),n.cc()}2&t&&(n.Kb(1),n.Yc(" ",n.sc(2,2,"mannequin.widget.wronggender")," "),n.Kb(3),n.Xc(n.sc(5,4,"generic.ok")))}function Bc(t,e){if(1&t){const t=n.ec();n.dc(0,"div",15),n.Wc(1),n.rc(2,"translate"),n.dc(3,"button",16),n.nc("click",function(){return n.Lc(t),n.qc(2).handleButton("close")}),n.Wc(4),n.rc(5,"translate"),n.cc(),n.Zb(6,"br"),n.cc()}2&t&&(n.Kb(1),n.Yc(" ",n.sc(2,2,"mannequin.widget.clubnotification")," "),n.Kb(3),n.Xc(n.sc(5,4,"generic.ok")))}function Vc(t,e){if(1&t){const t=n.ec();n.dc(0,"div",15),n.dc(1,"i"),n.Wc(2),n.cc(),n.Zb(3,"br"),n.Zb(4,"br"),n.Wc(5),n.rc(6,"translate"),n.dc(7,"button",16),n.nc("click",function(){return n.Lc(t),n.qc(2).handleButton("wear")}),n.Wc(8),n.rc(9,"translate"),n.cc(),n.Zb(10,"br"),n.cc()}if(2&t){const t=n.qc(2);n.Kb(2),n.Xc(t.outfitName),n.Kb(3),n.Yc(" ",n.sc(6,3,"mannequin.widget.weartext")," "),n.Kb(3),n.Xc(n.sc(9,5,"mannequin.widget.wear"))}}function Gc(t,e){if(1&t){const t=n.ec();n.dc(0,"div",15),n.dc(1,"input",17),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc(2).outfitName=e})("keyup.enter",function(){return n.Lc(t),n.qc(2).saveName()}),n.cc(),n.Zb(2,"br"),n.dc(3,"button",18),n.nc("click",function(){return n.Lc(t),n.qc(2).handleButton("re_style")}),n.Wc(4),n.rc(5,"translate"),n.cc(),n.dc(6,"button",18),n.nc("click",function(){return n.Lc(t),n.qc(2).handleButton("wear")}),n.Wc(7),n.rc(8,"translate"),n.cc(),n.Zb(9,"br"),n.cc()}if(2&t){const t=n.qc(2);n.Kb(1),n.yc("ngModel",t.outfitName),n.Kb(3),n.Xc(n.sc(5,3,"mannequin.widget.style")),n.Kb(3),n.Xc(n.sc(8,5,"mannequin.widget.wear"))}}function Kc(t,e){if(1&t){const t=n.ec();n.dc(0,"div",15),n.Wc(1),n.rc(2,"translate"),n.Zb(3,"br"),n.dc(4,"button",19),n.nc("click",function(){return n.Lc(t),n.qc(2).handleButton("save_outfit")}),n.Wc(5),n.rc(6,"translate"),n.cc(),n.dc(7,"button",19),n.nc("click",function(){return n.Lc(t),n.qc(2).handleButton("main")}),n.Wc(8),n.rc(9,"translate"),n.cc(),n.Zb(10,"br"),n.cc()}2&t&&(n.Kb(1),n.Yc(" ",n.sc(2,3,"mannequin.widget.savetext"),""),n.Kb(4),n.Xc(n.sc(6,5,"mannequin.widget.save")),n.Kb(3),n.Xc(n.sc(9,7,"mannequin.widget.back")))}function Hc(t,e){if(1&t&&(n.dc(0,"div",20),n.Wc(1),n.cc()),2&t){const t=n.qc(2);n.Kb(1),n.Yc(" ",t.view," ")}}function jc(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"h6",3),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"div",4),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(6,"i",5),n.cc(),n.cc(),n.dc(7,"div",6),n.dc(8,"div",7),n.dc(9,"div",8),n.dc(10,"div",9),n.Wc(11,"\xa0"),n.cc(),n.Uc(12,kc,2,0,"div",10),n.cc(),n.cc(),n.bc(13,11),n.Uc(14,Wc,7,6,"div",12),n.Uc(15,Bc,7,6,"div",12),n.Uc(16,Vc,11,7,"div",12),n.Uc(17,Gc,10,7,"div",12),n.Uc(18,Kc,11,9,"div",12),n.Uc(19,Hc,2,1,"div",13),n.ac(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(3),n.Xc(n.sc(4,10,"mannequin.widget.title")),n.Kb(7),n.yc("direction",2)("figure",t.figure),n.Kb(2),n.yc("ngIf",t.hasHabboClub),n.Kb(1),n.yc("ngSwitch",t.view),n.Kb(1),n.yc("ngSwitchCase","wrong-gender"),n.Kb(1),n.yc("ngSwitchCase","no-club"),n.Kb(1),n.yc("ngSwitchCase","peer-main"),n.Kb(1),n.yc("ngSwitchCase","main"),n.Kb(1),n.yc("ngSwitchCase","save")}}let zc=(()=>{class t extends ni{constructor(t){super(),this._ngZone=t,this._visible=!1,this.hasHabboClub=!1}open(e,s,n,i){this._furniId=e,this._figure=s,this._gender=n,this.outfitName=i;const r=this.handler.container.roomSession,a=this.handler.container.sessionDataManager,o=r.isRoomOwner||r.controllerLevel>=K.a.GUEST||a.isGodMode,c=u.a.instance.avatar,l=c.createFigureContainer(s);this._mannequinClubLevel=c.getFigureClubLevel(l,n,t.parts);const h=this.getViewType(o,a.gender,a.clubLevel,n,this._mannequinClubLevel);this.setView(h)}get handler(){return this.widgetHandler}hide(){this._visible=!1}get visible(){return this._visible}set visible(t){this._visible=t}getViewType(e,s,n,i,r){return e?t.EditorView:s.toLowerCase()!=i.toLowerCase()?t.WrongGender:n<r?t.WrongClubLevel:t.UseMannequin}setView(e){const s=this.handler.container.avatarRenderManager;this._view=this.createView(e);let n=null;switch(e){case t.PreviewAndSave:case t.WrongClubLevel:case t.WrongGender:n=s.createFigureContainer(this._figure),this.removeSectionsFromAvatar(n),this._renderedFigure=n._Str_1008();break;case t.UseMannequin:this._renderedFigure=this.mergeFigures(this._figure);break;case t.EditorView:n=s.createFigureContainer(this._figure),this.removeSectionsFromAvatar(n),this._renderedFigure=n._Str_1008()}this.showOrHideHabboClubLevel(this._mannequinClubLevel),this._ngZone.run(()=>{this._visible=!0})}saveName(){this.changeOutfitName()}removeSectionsFromAvatar(e){for(const s of e._Str_1016())-1==t.parts.indexOf(s)&&e._Str_923(s);e._Str_830(t._Str_10597[0],t._Str_10597[1],t._Str_10597[2])}mergeFigures(e){const s=new Pc.a(this.widgetHandler.container.sessionDataManager.figure),n=new Pc.a(e);for(const i of t.parts)s._Str_923(i);for(const t of n._Str_1016())s._Str_830(t,n.getPartSetId(t),n._Str_815(t));return s._Str_1008()}createView(e){switch(e){case t.EditorView:return"main";case t.PreviewAndSave:return"save";case t.UseMannequin:return"peer-main";case t.WrongClubLevel:return"no-club";case t.WrongGender:return"wrong-gender"}return""}showOrHideHabboClubLevel(t){switch(t){case dt._Str_3159:this.hasHabboClub=!1;break;case dt._Str_2964:case dt._Str_2575:this.hasHabboClub=!0}}handleButton(e){switch(e){case"wear":this.wearOutfit();break;case"re_style":this.changeOutfitName(),this.setView(t.PreviewAndSave);break;case"save_outfit":this.handler.container.connection.send(new xc.a(this._furniId)),this._visible=!1;break;case"main":this.setView(t.EditorView);break;case"close":this._visible=!1}}wearOutfit(){const e=this.widgetHandler.container.sessionDataManager;e.clubLevel<this._mannequinClubLevel?this.setView(t.WrongClubLevel):e.gender.toLowerCase()==this._gender.toLowerCase()?(this.handler.container.connection.send(new la.a(this._furniId)),this._visible=!1):this.setView(t.WrongGender)}changeOutfitName(){this.handler.container.connection.send(new Fc.a(this._furniId,this.outfitName))}get figure(){return this._renderedFigure}get view(){return this._view}}return t.EditorView=0,t.PreviewAndSave=1,t.UseMannequin=2,t.WrongClubLevel=3,t.WrongGender=4,t.parts=[vt.a.CHEST_ACCESSORY,vt.a.COAT_CHEST,vt.a.CHEST,vt.a.LEGS,vt.a.SHOES,vt.a.WAIST_ACCESSORY],t._Str_9071=0,t._Str_8000=1,t._Str_8218=2,t._Str_10597=["hd",99999,[99998]],t.\u0275fac=function(e){return new(e||t)(n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-room-furniture-mannequin-component"]],features:[n.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-mannequin card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-mannequin","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","align-items-center","justify-content-between","pt-3","px-3","w-100"],[1,"m-0"],[1,"close",3,"click"],[1,"fas","fa-times"],[1,"row"],[1,"col-4"],[1,"mannequin-background"],["nitro-avatar-image","",1,"mannequin-figure",3,"direction","figure"],["class","hc-icon",4,"ngIf"],[3,"ngSwitch"],["class","col-8",4,"ngSwitchCase"],["class","list-group-item",4,"ngSwitchDefault"],[1,"hc-icon"],[1,"col-8"],["type","button",1,"btn","btn-primary",3,"click"],["type","text",3,"ngModel","ngModelChange","keyup.enter"],["type","button",1,"btn","btn-primary",2,"width","177px","margin-top","10px",3,"click"],["type","button",1,"btn","btn-primary",2,"margin-top","10px",3,"click"],[1,"list-group-item"]],template:function(t,e){1&t&&n.Uc(0,jc,20,12,"div",0),2&t&&n.yc("ngIf",e.visible)},directives:[m.n,Dr,Kr,ba,m.p,m.q,m.r,ur.b,ur.l,ur.n],pipes:[ui],encapsulation:2}),t})();const Yc=function(t){return{"background-color":t}};function qc(t,e){if(1&t){const t=n.ec();n.dc(0,"button",12),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc(3).processAction(s)}),n.cc()}2&t&&n.yc("ngStyle",n.Cc(1,Yc,"#"+e.$implicit))}function Xc(t,e){if(1&t){const t=n.ec();n.dc(0,"div",8),n.dc(1,"button",9),n.nc("click",function(){return n.Lc(t),n.qc(2).processAction("delete")}),n.Zb(2,"i",10),n.cc(),n.Uc(3,qc,1,3,"button",11),n.cc()}if(2&t){const t=n.qc(2);n.Kb(3),n.yc("ngForOf",t.AVAILABLE_COLORS)}}const Zc=function(t,e){return{"background-color":t,color:e}};function Qc(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.Uc(2,Xc,4,1,"div",3),n.dc(3,"button",4),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(4,"i",5),n.cc(),n.cc(),n.dc(5,"div",6),n.dc(6,"textarea",7),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().text=e}),n.Wc(7),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.yc("ngStyle",n.Dc(5,Zc,"#"+t.colorHex,t.colorHex)),n.Kb(2),n.yc("ngIf",t.isController),n.Kb(4),n.yc("disabled",!t.isController)("ngModel",t.text),n.Kb(1),n.Xc(t.text)}}let Jc=(()=>{class t extends ni{constructor(t){super(),this._ngZone=t,this.AVAILABLE_COLORS=["9CCEFF","FF9CFF","9CFF9C","FFFF33"],this._objectId=-1,this._colorHex=null,this._text=null,this._isController=!1,this._visible=!1,this.onRoomWidgetStickieDataUpdateEvent=this.onRoomWidgetStickieDataUpdateEvent.bind(this)}dispose(){this.updateStickie(),super.dispose()}registerUpdateEvents(t){t&&(t.addEventListener(ve.RWSDUE_STICKIE_DATA,this.onRoomWidgetStickieDataUpdateEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(ve.RWSDUE_STICKIE_DATA,this.onRoomWidgetStickieDataUpdateEvent),super.unregisterUpdateEvents(t))}onRoomWidgetStickieDataUpdateEvent(t){t&&this._ngZone.run(()=>{this._objectId=t._Str_1577,this._colorHex=t._Str_10471,this._text=t.text,this._isController=t.controller,this._visible=!0})}processAction(t){if(t&&""!==t){if(this.AVAILABLE_COLORS.indexOf(t)>=0)return this._colorHex=t,void this.updateStickie();switch(t){case"delete":return void this.deleteStickie()}}}hide(){this.updateStickie(),this._objectId=-1,this._colorHex=null,this._text=null,this._isController=!1,this._visible=!1}updateStickie(){-1!==this._objectId&&this.messageListener.processWidgetMessage(new Ie(Ie.SEND_UPDATE,this._objectId,this._text,this._colorHex))}deleteStickie(){-1!==this._objectId&&(this.messageListener.processWidgetMessage(new Ie(Ie.SEND_DELETE,this._objectId)),this.hide())}get visible(){return this._visible}set visible(t){this._visible=t}get handler(){return this.widgetHandler}get objectId(){return this._objectId}get colorHex(){return this._colorHex}get text(){return this._text}set text(t){this._text=t}get isController(){return this._isController}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-room-furniture-sticky"]],features:[n.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-stickie",3,"bringToTop","draggable","ngStyle",4,"ngIf"],[1,"nitro-furniture-stickie",3,"bringToTop","draggable","ngStyle"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","py-1","px-2"],["class"," d-flex align-items-center",4,"ngIf"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","p-1"],["name","sticky-text","rows","11","maxlength","500",1,"sticky-text",3,"disabled","ngModel","ngModelChange"],[1,"d-flex","align-items-center"],["type","button",1,"sticky-trash","mr-2",3,"click"],[1,"fas","fa-trash-alt"],["type","button","class","sticky-button rounded p-2 mr-2",3,"ngStyle","click",4,"ngFor","ngForOf"],["type","button",1,"sticky-button","rounded","p-2","mr-2",3,"ngStyle","click"]],template:function(t,e){1&t&&n.Uc(0,Qc,8,8,"div",0),2&t&&n.yc("ngIf",e.visible)},directives:[m.n,Dr,Kr,m.o,ur.b,ur.i,ur.l,ur.n,m.m],encapsulation:2}),t})();function $c(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"h6",3),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",4),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(6,"i",5),n.cc(),n.cc(),n.dc(7,"div",6),n.dc(8,"p",7),n.Wc(9),n.cc(),n.dc(10,"div",8),n.Zb(11,"hr",9),n.dc(12,"div",10),n.dc(13,"p",11),n.Wc(14),n.cc(),n.dc(15,"p",11),n.Wc(16),n.cc(),n.cc(),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Nb("nitro-furniture-trophy card trophy-",t.color,""),n.Kb(3),n.Xc(n.sc(4,7,"widget.furni.trophy.title")),n.Kb(6),n.Xc(t.message),n.Kb(5),n.Xc(t.ownerName),n.Kb(2),n.Xc(t.date)}}let tl=(()=>{class t extends ni{constructor(t){super(),this._ngZone=t,this._visible=!1,this._color=null,this._ownerName=null,this._date=null,this._message=null,this._viewType=null,this.onRoomWidgetTrophyUpdateEvent=this.onRoomWidgetTrophyUpdateEvent.bind(this)}registerUpdateEvents(t){t&&(t.addEventListener(Te.TROPHY_DATA,this.onRoomWidgetTrophyUpdateEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(Te.TROPHY_DATA,this.onRoomWidgetTrophyUpdateEvent),super.unregisterUpdateEvents(t))}onRoomWidgetTrophyUpdateEvent(t){t&&this._ngZone.run(()=>{this._visible=!0,this._color=t.color-1,this._ownerName=t.name,this._date=t.date,this._message=t.message,this._viewType=t.viewType,(this._color<0||this._color>2)&&(this._color=0)})}hide(){this._visible=!1}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(t){this._visible=t}get color(){return this._color}get ownerName(){return this._ownerName}get date(){return this._date}get message(){return this._message}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-room-furniture-trophy-compontent"]],features:[n.Hb],decls:1,vars:1,consts:[["noMemory","true",3,"bringToTop","draggable","class",4,"ngIf"],["noMemory","true",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3","d-flex","flex-column"],[1,"p-0","trophy-message"],[1,"mt-auto"],[1,"mb-1"],[1,"d-flex","justify-content-between","align-items-center"],[1,"p-0","mb-0"]],template:function(t,e){1&t&&n.Uc(0,$c,17,9,"div",0),2&t&&n.yc("ngIf",e.visible)},directives:[m.n,Dr,Kr],pipes:[ui],encapsulation:2}),t})();class el{constructor(){this._id=0,this._category=0,this._name="",this._description="",this._imageUrl="",this._purchaseOfferId=-1,this._extraParam="",this._stuffData=null,this._ownerId=0,this._ownerName="",this._rentOfferId=-1,this._availableForBuildersClub=!1}get id(){return this._id}set id(t){this._id=t}get category(){return this._category}set category(t){this._category=t}get name(){return this._name}set name(t){this._name=t}get description(){return this._description}set description(t){this._description=t}get imageUrl(){return this._imageUrl}set imageUrl(t){this._imageUrl=t}get purchaseOfferId(){return this._purchaseOfferId}set purchaseOfferId(t){this._purchaseOfferId=t}get extraParam(){return this._extraParam}set extraParam(t){this._extraParam=t}get stuffData(){return this._stuffData}set stuffData(t){this._stuffData=t}set groupId(t){this._groupId=t}get groupId(){return this._groupId}get ownerId(){return this._ownerId}set ownerId(t){this._ownerId=t}get ownerName(){return this._ownerName}set ownerName(t){this._ownerName=t}get rentOfferId(){return this._rentOfferId}set rentOfferId(t){this._rentOfferId=t}get availableForBuildersClub(){return this._availableForBuildersClub}set availableForBuildersClub(t){this._availableForBuildersClub=t}populate(t){this.id=t.id,this.category=t.category,this.name=t.name,this.description=t.description,this.imageUrl=t.image&&t.image.src||null,this.purchaseOfferId=t.purchaseOfferId,this.extraParam=t.extraParam,this.stuffData=t.stuffData,this.groupId=t.groupId,this.ownerName=t.ownerName,this.ownerId=t.ownerId,this.rentOfferId=t.rentOfferId,this.availableForBuildersClub=t.availableForBuildersClub}}class sl{constructor(){this._name="",this._petId=-1}get name(){return this._name}get id(){return this._petId}get type(){return this._type}get race(){return this._race}get petFigureData(){return this._petFigureData}get _Str_5175(){return this._isOwnPet}get _Str_2481(){return this._ownerId}get ownerName(){return this._ownerName}get _Str_5114(){return this._canRemovePet}get age(){return this._age}get unknownRarityLevel(){return this._breedId}get _Str_3307(){return this._skillTresholds}get publiclyRideable(){return this._accessRights}get level(){return this._level}get _Str_4276(){return this._levelMax}get experience(){return this._experience}get _Str_4095(){return this._experienceMax}get energy(){return this._energy}get _Str_3966(){return this._energyMax}get happyness(){return this._nutrition}get _Str_4448(){return this._nutritionMax}get _Str_6943(){return this._petRespect}get _Str_2707(){return this._roomIndex}get rarityLevel(){return this._rarityLevel}get maximumTimeToLive(){return this._maxWellBeingSeconds}get remainingTimeToLive(){return this._remainingWellBeingSeconds}get remainingGrowTime(){return this._remainingGrowingSeconds}get publiclyBreedable(){return this._hasBreedingPermission}populate(t){this._name=t.name,this._petId=t.id,this._type=t._Str_4355,this._race=t._Str_14767,this._petFigureData=t.petFigureData,this._isOwnPet=t._Str_5175,this._ownerId=t.ownerId,this._ownerName=t.ownerName,this._canRemovePet=t._Str_5114,this._level=t.level,this._levelMax=t.maximumLevel,this._experience=t.experience,this._experienceMax=t.levelExperienceGoal,this._energy=t.energy,this._energyMax=t.maximumEnergy,this._nutrition=t.happyness,this._nutritionMax=t.maximumHappyness,this._petRespect=t.respect,this._roomIndex=t._Str_2707,this._age=t.age,this._breedId=t.unknownRarityLevel,this._skillTresholds=t._Str_3307,this._accessRights=t.publiclyRideable,this._maxWellBeingSeconds=t.maximumTimeToLive,this._remainingWellBeingSeconds=t.remainingTimeToLive,this._remainingGrowingSeconds=t.remainingGrowTime,this._rarityLevel=t.rarityLevel,this._hasBreedingPermission=t.publiclyBreedable}}class nl{constructor(){this._id=0,this._name="",this._figure="",this._motto="",this._badges=[],this._carryItem=0,this._roomIndex=-1,this._ownerId=-1,this._ownerName="",this._amIOwner=!1,this._amIAnyRoomController=!1,this._botSkills=[]}get id(){return this._id}set id(t){this._id=t}get name(){return this._name}set name(t){this._name=t}get figure(){return this._figure}set figure(t){this._figure=t}get motto(){return this._motto}set motto(t){this._motto=t}get badges(){return this._badges.slice()}set badges(t){this._badges=t}get carryItem(){return this._carryItem}set carryItem(t){this._carryItem=t}get roomIndex(){return this._roomIndex}set roomIndex(t){this._roomIndex=t}get ownerId(){return this._ownerId}set ownerId(t){this._ownerId=t}get ownerName(){return this._ownerName}set ownerName(t){this._ownerName=t}get amIOwner(){return this._amIOwner}set amIOwner(t){this._amIOwner=t}get amIAnyRoomController(){return this._amIAnyRoomController}set amIAnyRoomController(t){this._amIAnyRoomController=t}get botSkills(){return this._botSkills.slice()}set botSkills(t){this._botSkills=t}populate(t){this.id=t.id,this.name=t.name,this.figure=t.figure,this.motto=t.motto,this.badges=t.badges,this.carryItem=t.carryId,this.roomIndex=t.roomIndex,this.ownerId=t.ownerId,this.ownerName=t.ownerName,this.amIOwner=t._Str_3246,this.amIAnyRoomController=t._Str_3529,this.botSkills=t.botSkills}}class il{constructor(){this._id=0,this._name="",this._figure="",this._motto="",this._badges=[],this._groupId=0,this._groupName="",this._groupBadgeId="",this._activityPoints=0,this._respectLeft=0,this._petRespectLeft=0,this._carryItem=0,this._roomIndex=-1,this._type=""}get id(){return this._id}set id(t){this._id=t}get name(){return this._name}set name(t){this._name=t}get figure(){return this._figure}set figure(t){this._figure=t}get motto(){return this._motto}set motto(t){this._motto=t}get badges(){return this._badges.slice()}set badges(t){this._badges=t}get groupId(){return this._groupId}set groupId(t){this._groupId=t}get groupName(){return this._groupName}set groupName(t){this._groupName=t}get groupBadgeId(){return this._groupBadgeId}set groupBadgeId(t){this._groupBadgeId=t}get activityPoints(){return this._activityPoints}set activityPoints(t){this._activityPoints=t}get respectLeft(){return this._respectLeft}set respectLeft(t){this._respectLeft=t}get petRespectLeft(){return this._petRespectLeft}set petRespectLeft(t){this._petRespectLeft=t}get carryItem(){return this._carryItem}set carryItem(t){this._carryItem=t}get roomIndex(){return this._roomIndex}set roomIndex(t){this._roomIndex=t}get type(){return this._type}set type(t){this._type=t}getIsBot(){return this.type===We.BOT}populate(t){this.id=t.webID,this.name=t.name,this.figure=t.figure,this.motto=t.motto,this.badges=t.badges,this.groupId=t.groupId,this.groupName=t.groupName,this.groupBadgeId=t.groupBadgeId,this.activityPoints=t.activityPoints,this.respectLeft=t.respectLeft,this.petRespectLeft=0,this.carryItem=t.carryId,this.roomIndex=t.roomIndex,this.type=t.type}}let rl=(()=>{class t{}return t.USER=1,t.BOT=2,t.RENTABLE_BOT=3,t.PET=4,t.FURNI=5,t})();class al{constructor(){this.widget=null}hide(){this.widget.close()}update(t){}get type(){return-1}}let ol=(()=>{class t{constructor(t){this.elementRef=t,this.figure="",this.gender="M",this.headOnly=!1,this.direction=0,this.scale=1,this.asBackground=!1,this._avatarImageCache=new Bs.a,this.avatarUrl=null,this.disposed=!1,this.needsUpdate=!0}ngOnInit(){this.needsUpdate&&this.buildAvatar()}ngOnChanges(t){const e=t.figure;e&&e.previousValue!==e.currentValue&&(this.needsUpdate=!0);const s=t.gender;s&&s.previousValue!==s.currentValue&&(this.needsUpdate=!0);const n=t.headOnly;n&&n.previousValue!==n.currentValue&&(this.needsUpdate=!0);const i=t.direction;i&&i.previousValue!==i.currentValue&&(this.needsUpdate=!0),this.needsUpdate&&this.buildAvatar()}dispose(){}resetFigure(t){this._avatarImageCache.remove(this.getAvatarBuildString()),this.buildAvatar()}buildAvatar(){this.needsUpdate=!1;const t=this.getUserImageUrl();if(!t||!t.length)return;const e=this.elementRef.nativeElement;if(e)if(this.asBackground)e.style.backgroundImage=`url(${t})`,e.style.backgroundPositionY="-31px";else{const s=e.getElementsByClassName("avatar-image");let n=s.length;for(;n<0;)s[n].remove(),n--;const i=document.createElement("img");i.className="avatar-image scale-"+this.scale,i.src=t}}getUserImageUrl(){const t=this.getAvatarBuildString();let e=this._avatarImageCache.getValue(t);if(!e){const s=u.a.instance.avatar.createAvatarImage(this.figure,It.a.LARGE,this.gender,this,null);if(s){let t=Rt.a.FULL;this.headOnly&&(t=Rt.a.HEAD),s.setDirection(t,this.direction);const n=s.getCroppedImage(t);n&&(e=n.src),s.dispose()}e&&e.length&&this.putInCache(t,e)}return e}putInCache(e,s){this._avatarImageCache.length===t.MAX_CACHE_SIZE&&this._avatarImageCache.remove(this._avatarImageCache.getKey(0)),this._avatarImageCache.add(e,s)}getAvatarBuildString(){return`${this.figure}:${this.gender}:${this.direction}:${this.headOnly}`}}return t.MAX_CACHE_SIZE=10,t.\u0275fac=function(e){return new(e||t)(n.Yb(n.p))},t.\u0275dir=n.Tb({type:t,selectors:[["","avatar-image",""]],inputs:{figure:"figure",gender:"gender",headOnly:"headOnly",direction:"direction",scale:"scale",asBackground:"asBackground"},features:[n.Ib]}),t})(),cl=(()=>{class t{constructor(){this.badge="",this.isGroup=!1,this.hover=!0}get badgeUrl(){return this.isGroup?u.a.instance.getConfiguration("badge.asset.group.url").replace("%badgedata%",this.badge):u.a.instance.getConfiguration("badge.asset.url").replace("%badgename%",this.badge)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-badge"]],inputs:{badge:"badge",isGroup:"isGroup",hover:"hover"},decls:1,vars:1,consts:[["image-placeholder","",3,"src"]],template:function(t,e){1&t&&n.Zb(0,"img",0),2&t&&n.yc("src",e.badgeUrl,n.Nc)},directives:[fa],encapsulation:2}),t})();function ll(t,e){if(1&t&&n.Zb(0,"nitro-badge",17),2&t){const t=n.qc().$implicit;n.yc("badge",t)}}function hl(t,e){if(1&t&&(n.dc(0,"div",15),n.Uc(1,ll,1,1,"nitro-badge",16),n.cc()),2&t){const t=e.$implicit;n.Kb(1),n.yc("ngIf",""!==t)}}function ul(t,e){if(1&t&&(n.dc(0,"div",18),n.dc(1,"span",19),n.Wc(2),n.cc(),n.cc()),2&t){const t=n.qc();n.Kb(2),n.Xc(t.userData.motto)}}function _l(t,e){if(1&t&&(n.dc(0,"p",20),n.Wc(1),n.cc()),2&t){const t=n.qc();n.Kb(1),n.Xc(t.carryText)}}let dl=(()=>{class t extends al{constructor(){super(...arguments),this.userData=null,this.carryText=""}update(t){t&&t.carryId>0&&(this.carryText=u.a.instance.getLocalizationWithParameter("infostand.text.handitem","item",u.a.instance.getLocalization("handitem"+t.carryId)))}get type(){return rl.BOT}}return t.\u0275fac=function(e){return gl(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:17,vars:7,consts:[[1,"nitro-infostand","card"],[1,"d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3","w-100"],[1,"d-flex","flex-nowrap"],[1,"body-image","bot","overflow-hidden"],["avatar-image","",1,"avatar-image",3,"figure","direction","asBackground"],[1,"flex-grow-1"],[1,"badge-container"],["class","badge-item",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","mt-2"],["class","motto-container",4,"ngIf"],["class","badge badge-secondary mb-0",4,"ngIf"],[1,"badge-item"],[3,"badge",4,"ngIf"],[3,"badge"],[1,"motto-container"],[1,"motto"],[1,"badge","badge-secondary","mb-0"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"h6",2),n.Wc(3),n.cc(),n.dc(4,"button",3),n.nc("click",function(){return e.hide()}),n.Zb(5,"i",4),n.cc(),n.cc(),n.dc(6,"div",5),n.dc(7,"div",6),n.dc(8,"div",7),n.Zb(9,"div",8),n.cc(),n.dc(10,"div",9),n.dc(11,"div",10),n.Uc(12,hl,2,1,"div",11),n.cc(),n.cc(),n.cc(),n.dc(13,"div",12),n.Uc(14,ul,3,1,"div",13),n.dc(15,"div",12),n.Uc(16,_l,2,1,"p",14),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(3),n.Xc(e.userData.name),n.Kb(6),n.yc("figure",e.userData.figure)("direction",4)("asBackground",!0),n.Kb(3),n.yc("ngForOf",e.userData.badges),n.Kb(2),n.yc("ngIf",""!==e.userData.motto),n.Kb(2),n.yc("ngIf",e.userData.carryItem>0))},directives:[ol,m.m,m.n,cl],encapsulation:2}),t})();const gl=n.fc(dl);let ml=(()=>{class t{}return t._Str_21805=0,t._Str_18194=1,t._Str_18353=2,t})(),pl=(()=>{class t{transform(t){const e=t.toString().split("");let s="";for(let n=0;n<e.length;n++)s=s+'<i class="unique-number n-'+e[n]+'"></i>';return s}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=n.Xb({name:"uniqueNumber",type:t,pure:!0}),t})();function fl(t,e){if(1&t&&(n.dc(0,"div",19),n.Zb(1,"div",20),n.rc(2,"uniqueNumber"),n.Zb(3,"div",20),n.rc(4,"uniqueNumber"),n.cc()),2&t){const t=n.qc();n.Kb(1),n.yc("innerHTML",n.sc(2,2,t.furniData.stuffData.uniqueNumber),n.Mc),n.Kb(2),n.yc("innerHTML",n.sc(4,4,t.furniData.stuffData.uniqueSeries),n.Mc)}}function El(t,e){if(1&t&&n.Zb(0,"img",21),2&t){const t=n.qc();n.yc("src",t.furniData.imageUrl,n.Nc)}}const Sl=function(){return["hits","target"]},bl=function(t,e){return[t,e]};function vl(t,e){if(1&t&&(n.dc(0,"p",12),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t){const t=n.qc();n.Kb(1),n.Xc(n.uc(2,1,"infostand.crackable_furni.hits_remaining",n.Bc(5,Sl),n.Dc(6,bl,t.crackableHits,t.crackableTarget)))}}function Il(t,e){if(1&t){const t=n.ec();n.dc(0,"div",22),n.nc("click",function(){return n.Lc(t),n.qc().openFurniGroupInfo()}),n.Zb(1,"nitro-badge",23),n.cc()}if(2&t){const t=n.qc();n.Kb(1),n.yc("badge",t.getStuffDataAsStringDataType.getValue(2))("isGroup",!0)}}function Rl(t,e){if(1&t){const t=n.ec();n.bc(0),n.dc(1,"p",26),n.Wc(2),n.cc(),n.dc(3,"input",27),n.nc("ngModelChange",function(s){n.Lc(t);const i=e.index;return n.qc(2).furniSettingsValues[i]=s}),n.cc(),n.ac()}if(2&t){const t=e.index,s=n.qc(2);n.Kb(2),n.Xc(s.furniSettingsKeys[t]),n.Kb(1),n.yc("ngModel",s.furniSettingsValues[t])}}function Tl(t,e){if(1&t&&(n.dc(0,"div",24),n.Uc(1,Rl,4,2,"ng-container",25),n.cc()),2&t){const t=n.qc();n.Kb(1),n.yc("ngForOf",t.furniSettingsKeys)}}function yl(t,e){if(1&t){const t=n.ec();n.dc(0,"button",28),n.nc("click",function(){return n.Lc(t),n.qc().processButtonAction("move")}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"infostand.button.move")))}function Ol(t,e){if(1&t){const t=n.ec();n.dc(0,"button",28),n.nc("click",function(){return n.Lc(t),n.qc().processButtonAction("rotate")}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"infostand.button.rotate")))}function Cl(t,e){if(1&t){const t=n.ec();n.dc(0,"button",28),n.nc("click",function(){return n.Lc(t),n.qc().processButtonAction("pickup")}),n.Wc(1),n.rc(2,"translate"),n.cc()}if(2&t){const t=n.qc();n.Kb(1),n.Xc(n.sc(2,1,1===t.pickupMode?"infostand.button.eject":"infostand.button.pickup"))}}function Al(t,e){if(1&t){const t=n.ec();n.dc(0,"button",28),n.nc("click",function(){return n.Lc(t),n.qc().processButtonAction("use")}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"infostand.button.use")))}function Ml(t,e){if(1&t){const t=n.ec();n.dc(0,"button",29),n.nc("click",function(){return n.Lc(t),n.qc().processButtonAction("save_branding_configuration")}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"save")))}let wl=(()=>{class t extends al{constructor(){super(...arguments),this.furniData=null,this.pickupMode=0,this.canMove=!1,this.canRotate=!1,this.canUse=!1,this.furniSettingsKeys=[],this.furniSettingsValues=[],this.isCrackable=!1,this.crackableHits=0,this.crackableTarget=0}update(t){this.furniSettingsKeys=[],this.furniSettingsValues=[],this.isCrackable=!1,this.crackableHits=0,this.crackableTarget=0;let e=!1,s=!1,n=!1,i=!1;const r=t.roomControllerLevel>=K.a.GUEST;if((r||t.isOwner||t.isRoomOwner||t.isAnyRoomOwner)&&(e=!0,s=!t.isWallItem,t.roomControllerLevel>=K.a.MODERATOR&&(i=!0)),(t.usagePolicy===ml._Str_18353||t.usagePolicy===ml._Str_18194&&r||t.extraParam===Ne.a.JUKEBOX&&r||t.extraParam==Ne.a.USABLE_PRODUCT&&r)&&(n=!0),t.extraParam){if(t.extraParam===Ne.a.CRACKABLE_FURNI){const e=t.stuffData;n=!0,this.isCrackable=!0,this.crackableHits=e.hits,this.crackableTarget=e.target}if(i){const e=t.extraParam.substr(Ne.a.BRANDING_OPTIONS.length);if(e){const t=e.split("\t");for(const e of t){const t=e.split("=");t&&2===t.length&&(this.furniSettingsKeys.push(t[0]),this.furniSettingsValues.push(t[1]))}}}}this.canMove=e,this.canRotate=s,this.canUse=n,this.togglePickupButton(t)}togglePickupButton(e){e&&(this.pickupMode=t.PICKUP_MODE_NONE,e.isOwner||e.isAnyRoomOwner?this.pickupMode=t.PICKUP_MODE_FULL:(e.isRoomOwner||e.roomControllerLevel>=K.a.GUILD_ADMIN)&&(this.pickupMode=t.PICKUP_MODE_EJECT),e.isStickie&&(this.pickupMode=t.PICKUP_MODE_NONE))}processButtonAction(e){if(!e||""===e)return;let s=null,n=null;switch(e){case"move":s=Ve.RWFAM_MOVE;break;case"rotate":s=Ve.RWFUAM_ROTATE;break;case"pickup":s=this.pickupMode===t.PICKUP_MODE_FULL?Ve.RWFAM_PICKUP:Ve.RWFAM_EJECT;break;case"use":s=Ve.RWFAM_USE;break;case"save_branding_configuration":s=Ve.RWFAM_SAVE_STUFF_DATA,n=this.getSettingsAsString()}s&&this.widget.messageListener.processWidgetMessage(new Ve(s,this.furniData.id,this.furniData.category,this.furniData.purchaseOfferId,n))}getSettingsAsString(){if(!this.furniSettingsKeys.length||!this.furniSettingsValues.length)return"";let t="",e=0;for(;e<this.furniSettingsKeys.length;)t=t+(this.furniSettingsKeys[e]+"=")+this.furniSettingsValues[e]+"\t",e++;return t}openFurniGroupInfo(){this.furniData.groupId&&u.a.instance.createLinkEvent("groups/info/"+this.furniData.groupId)}get getStuffDataAsStringDataType(){return this.furniData?this.furniData.stuffData:null}get type(){return rl.FURNI}}return t.PICKUP_MODE_NONE=0,t.PICKUP_MODE_EJECT=1,t.PICKUP_MODE_FULL=2,t.\u0275fac=function(e){return Ul(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:28,vars:21,consts:[[1,"d-flex","flex-column","align-items-end"],[1,"nitro-infostand","card"],[1,"d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3","w-100"],[1,"w-100",2,"min-height","50px"],["class","unique-counter-compact",4,"ngIf"],["class","d-block mx-auto","image-placeholder","",3,"src",4,"ngIf"],[1,"d-flex","flex-column","mt-2"],[1,"badge","badge-secondary","mb-0","text-wrap"],[1,"badge","badge-secondary","mt-2","mb-0","text-wrap"],["class","badge badge-secondary mt-2 mb-0 text-wrap",4,"ngIf"],["class","badge badge-secondary mt-2 mb-0",3,"click",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"button-container","btn-group","mt-2"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"unique-counter-compact"],[3,"innerHTML"],["image-placeholder","",1,"d-block","mx-auto",3,"src"],[1,"badge","badge-secondary","mt-2","mb-0",3,"click"],[3,"badge","isGroup"],[1,"mt-3"],[4,"ngFor","ngForOf"],[1,"badge","badge-secondary","mb-2"],["type","text",1,"form-control","rounded","mb-2",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"div",2),n.dc(3,"h6",3),n.Wc(4),n.rc(5,"translate"),n.cc(),n.dc(6,"button",4),n.nc("click",function(){return e.hide()}),n.Zb(7,"i",5),n.cc(),n.cc(),n.dc(8,"div",6),n.dc(9,"div",7),n.Uc(10,fl,5,6,"div",8),n.Uc(11,El,1,1,"img",9),n.cc(),n.dc(12,"div",10),n.dc(13,"p",11),n.Wc(14),n.rc(15,"translate"),n.cc(),n.dc(16,"p",12),n.Wc(17),n.rc(18,"translate"),n.cc(),n.Uc(19,vl,3,9,"p",13),n.Uc(20,Il,2,2,"div",14),n.cc(),n.Uc(21,Tl,2,1,"div",15),n.cc(),n.cc(),n.dc(22,"div",16),n.Uc(23,yl,3,3,"button",17),n.Uc(24,Ol,3,3,"button",17),n.Uc(25,Cl,3,3,"button",17),n.Uc(26,Al,3,3,"button",17),n.Uc(27,Ml,3,3,"button",18),n.cc(),n.cc()),2&t&&(n.Kb(4),n.Xc(n.sc(5,13,e.furniData.name)),n.Kb(6),n.yc("ngIf",e.furniData.stuffData.isUnique),n.Kb(1),n.yc("ngIf",e.furniData.imageUrl),n.Kb(3),n.Xc(n.sc(15,15,e.furniData.description)),n.Kb(3),n.Xc(n.uc(18,17,"furni.owner","name",e.furniData.ownerName)),n.Kb(2),n.yc("ngIf",e.isCrackable),n.Kb(1),n.yc("ngIf",e.furniData.groupId),n.Kb(1),n.yc("ngIf",e.furniSettingsKeys.length&&e.furniSettingsValues.length&&e.furniSettingsKeys.length===e.furniSettingsValues.length),n.Kb(2),n.yc("ngIf",e.canMove),n.Kb(1),n.yc("ngIf",e.canRotate),n.Kb(1),n.yc("ngIf",0!==e.pickupMode),n.Kb(1),n.yc("ngIf",e.canUse),n.Kb(1),n.yc("ngIf",e.furniSettingsKeys.length&&e.furniSettingsValues.length&&e.furniSettingsKeys.length===e.furniSettingsValues.length))},directives:[m.n,fa,cl,m.m,ur.b,ur.l,ur.n],pipes:[ui,pl],encapsulation:2}),t})();const Ul=n.fc(wl);let Dl=(()=>{class t{constructor(t,e){this._elementRef=t,this._ngZone=e,this.petFigureData=null,this.headOnly=!1,this.direction=0,this.scale=1,this.asBackground=!1,this._petImageCache=new Bs.a,this.petUrl=null,this.disposed=!1,this.needsUpdate=!0}ngOnInit(){this.needsUpdate&&this.buildImage()}ngOnChanges(t){const e=t.petFigureData;e&&e.previousValue!==e.currentValue&&(this.needsUpdate=!0);const s=t.headOnly;s&&s.previousValue!==s.currentValue&&(this.needsUpdate=!0);const n=t.direction;n&&n.previousValue!==n.currentValue&&(this.needsUpdate=!0),this.needsUpdate&&this.buildImage()}dispose(){}buildImage(){this.needsUpdate=!1;const t=this.getPetImageUrl();if(!t||!t.length)return;const e=this._elementRef.nativeElement;if(e)if(this.asBackground)e.style.backgroundImage=`url(${t})`;else{const s=e.getElementsByClassName("pet-image");let n=s.length;for(;n<0;)s[n].remove(),n--;const i=document.createElement("img");i.className="pet-image scale-"+this.scale,i.src=t}}getPetImageUrl(){const t=this.getPetBuildString();let e=this._petImageCache.getValue(t);if(e&&e.length)return e;let s=null;return this._ngZone.runOutsideAngular(()=>{if(s=u.a.instance.roomEngine.getRoomObjectPetImage(this.petFigureData.typeId,this.petFigureData.paletteId,this.petFigureData.color,new q.a(45*this.direction),64,this,this.headOnly,0,this.petFigureData.customParts,"std"),s){const t=s.getImage();t&&(e=t.src)}}),e?(this.putInCache(t,e),e):null}imageReady(t,e,s){let n=null;s?n=s.src:e&&(n=mc.a.generateImageUrl(e)),n&&n.length&&this.putInCache(this.getPetBuildString(),n),this.buildImage()}imageFailed(t){}putInCache(e,s){this._petImageCache.length===t.MAX_CACHE_SIZE&&this._petImageCache.remove(this._petImageCache.getKey(0)),this._petImageCache.remove(e),this._petImageCache.add(e,s)}getPetBuildString(){return`${this.petFigureData}:${this.headOnly}:${this.direction}`}}return t.MAX_CACHE_SIZE=10,t.\u0275fac=function(e){return new(e||t)(n.Yb(n.p),n.Yb(n.H))},t.\u0275dir=n.Tb({type:t,selectors:[["","pet-image",""]],inputs:{petFigureData:"petFigureData",headOnly:"headOnly",direction:"direction",scale:"scale",asBackground:"asBackground"},features:[n.Ib]}),t})(),Nl=(()=>{class t extends al{processButtonAction(t){}get type(){return rl.PET}}return t.\u0275fac=function(e){return Ll(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:20,vars:15,consts:[[1,"d-flex","flex-column","align-items-end"],[1,"nitro-infostand","card"],[1,"d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3","w-100"],[1,"d-flex","col-5","justify-content-center","align-items-center","bg-secondary","rounded","overflow-hidden"],["pet-image","",1,"pet-image",3,"petFigureData","direction","asBackground"],[1,"button-container","btn-group","mt-2"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"div",2),n.dc(3,"h6",3),n.Wc(4),n.cc(),n.dc(5,"button",4),n.nc("click",function(){return e.hide()}),n.Zb(6,"i",5),n.cc(),n.cc(),n.dc(7,"div",6),n.dc(8,"div",7),n.Zb(9,"div",8),n.cc(),n.cc(),n.cc(),n.dc(10,"div",9),n.dc(11,"button",10),n.nc("click",function(){return e.processButtonAction("buyfood")}),n.Wc(12),n.rc(13,"translate"),n.cc(),n.dc(14,"button",10),n.nc("click",function(){return e.processButtonAction("respect")}),n.Wc(15),n.rc(16,"translate"),n.cc(),n.dc(17,"button",10),n.nc("click",function(){return e.processButtonAction("kick")}),n.Wc(18),n.rc(19,"translate"),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(4),n.Xc(e.petData.name),n.Kb(5),n.yc("petFigureData",e.petData.petFigureData)("direction",2)("asBackground",!0),n.Kb(3),n.Xc(n.sc(13,7,"infostand.button.buyfood")),n.Kb(3),n.Xc(n.uc(16,9,"infostand.button.petrespect","count","0")),n.Kb(3),n.Xc(n.sc(19,13,"infostand.button.kick")))},directives:[Dl],pipes:[ui],encapsulation:2}),t})();const Ll=n.fc(Nl);function Pl(t,e){if(1&t&&n.Zb(0,"nitro-badge",18),2&t){const t=n.qc().$implicit;n.yc("badge",t)}}function xl(t,e){if(1&t&&(n.dc(0,"div",16),n.Uc(1,Pl,1,1,"nitro-badge",17),n.cc()),2&t){const t=e.$implicit;n.Kb(1),n.yc("ngIf",""!==t)}}function Fl(t,e){if(1&t&&(n.dc(0,"div",19),n.dc(1,"span",20),n.Wc(2),n.cc(),n.cc()),2&t){const t=n.qc();n.Kb(2),n.Xc(t.botData.motto)}}function kl(t,e){if(1&t&&(n.dc(0,"p",21),n.Wc(1),n.cc()),2&t){const t=n.qc();n.Kb(1),n.Xc(t.ownerText)}}function Wl(t,e){if(1&t&&(n.dc(0,"p",21),n.Wc(1),n.cc()),2&t){const t=n.qc();n.Kb(1),n.Xc(t.carryText)}}let Bl=(()=>{class t extends al{constructor(){super(...arguments),this.botData=null,this.ownerText="",this.carryText=""}update(t){t&&(this.ownerText=u.a.instance.getLocalizationWithParameter("infostand.text.botowner","name",this.botData.ownerName),t.carryId>0&&(this.carryText=u.a.instance.getLocalizationWithParameter("infostand.text.handitem","item",u.a.instance.getLocalization("handitem"+t.carryId))))}get type(){return rl.RENTABLE_BOT}pickup(){this.hide(),u.a.instance.communication.connection.send(new cr.a(this.botData.id))}}return t.\u0275fac=function(e){return Vl(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:18,vars:8,consts:[[1,"nitro-infostand","card"],[1,"d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3","w-100"],[1,"d-flex","flex-nowrap"],[1,"body-image","bot","overflow-hidden"],["avatar-image","",1,"avatar-image",3,"figure","direction","asBackground"],[1,"flex-grow-1"],[1,"badge-container"],["class","badge-item",4,"ngFor","ngForOf"],[1,"d-flex","mt-2"],["class","motto-container",4,"ngIf"],[1,"d-flex","flex-column","mt-2"],["class","badge badge-secondary mb-0",4,"ngIf"],[1,"badge-item"],[3,"badge",4,"ngIf"],[3,"badge"],[1,"motto-container"],[1,"motto"],[1,"badge","badge-secondary","mb-0"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"h6",2),n.Wc(3),n.cc(),n.dc(4,"button",3),n.nc("click",function(){return e.hide()}),n.Zb(5,"i",4),n.cc(),n.cc(),n.dc(6,"div",5),n.dc(7,"div",6),n.dc(8,"div",7),n.Zb(9,"div",8),n.cc(),n.dc(10,"div",9),n.dc(11,"div",10),n.Uc(12,xl,2,1,"div",11),n.cc(),n.cc(),n.cc(),n.dc(13,"div",12),n.Uc(14,Fl,3,1,"div",13),n.cc(),n.dc(15,"div",14),n.Uc(16,kl,2,1,"p",15),n.Uc(17,Wl,2,1,"p",15),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(3),n.Xc(e.botData.name),n.Kb(6),n.yc("figure",e.botData.figure)("direction",4)("asBackground",!0),n.Kb(3),n.yc("ngForOf",e.botData.badges),n.Kb(2),n.yc("ngIf",""!==e.botData.motto),n.Kb(2),n.yc("ngIf",e.botData.ownerId>0),n.Kb(1),n.yc("ngIf",e.botData.carryItem>0))},directives:[ol,m.m,m.n,cl],encapsulation:2}),t})();const Vl=n.fc(Bl);function Gl(t,e){if(1&t&&n.Zb(0,"nitro-badge",21),2&t){const t=n.qc().$implicit;n.yc("badge",t)}}function Kl(t,e){if(1&t&&(n.dc(0,"div",19),n.Uc(1,Gl,1,1,"nitro-badge",20),n.cc()),2&t){const t=e.$implicit;n.Kb(1),n.yc("ngIf",""!==t)}}function Hl(t,e){if(1&t){const t=n.ec();n.dc(0,"div",22),n.Zb(1,"i",23),n.dc(2,"textarea",24),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().userData.motto=e})("keyup",function(e){return n.Lc(t),n.qc().resizeTextArea(e)})("keydown.enter",function(e){return n.Lc(t),n.qc().saveMotto(e)}),n.rc(3,"translate"),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(2),n.zc("placeholder",n.sc(3,2,"infostand.motto.change")),n.yc("ngModel",t.userData.motto)}}function jl(t,e){if(1&t&&(n.dc(0,"div",22),n.dc(1,"span",25),n.Wc(2),n.cc(),n.cc()),2&t){const t=n.qc();n.Kb(2),n.Xc(t.userData.motto)}}function zl(t,e){if(1&t&&(n.dc(0,"p",26),n.Wc(1),n.cc()),2&t){const t=n.qc();n.Kb(1),n.Xc(t.carryText)}}let Yl=(()=>{class t extends al{constructor(){super(...arguments),this.userData=null,this.carryText=""}update(t){t&&t.carryId>0&&(this.carryText=u.a.instance.getLocalizationWithParameter("infostand.text.handitem","item",u.a.instance.getLocalization("handitem"+t.carryId)))}resizeTextArea(t){if(!t)return;const e=t.target;e&&(e.style.height="0px",e.style.height=e.scrollHeight+"px")}saveMotto(t){this.userData.motto.length>38||(t.target.blur(),this.widget.messageListener.processWidgetMessage(new Be(this.userData.motto)))}visitProfile(){u.a.instance.createLinkEvent("profile/goto/"+this.userData.id)}get isOwnProfile(){return this.userData.type===We.OWN_USER}get type(){return rl.USER}}return t.\u0275fac=function(e){return ql(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:23,vars:12,consts:[[1,"nitro-infostand","card"],[1,"d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],[1,"badge","badge-secondary","badge-sm",3,"click"],[1,"fas","fa-user"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3","w-100"],[1,"d-flex","flex-nowrap"],[1,"body-image","overflow-hidden"],["avatar-image","",1,"avatar-image",3,"figure","direction","asBackground"],[1,"flex-grow-1"],[1,"badge-container"],["class","badge-item",4,"ngFor","ngForOf"],[1,"d-flex","mt-2"],["class","motto-container",4,"ngIf"],[1,"d-flex","flex-column","mt-2"],[1,"badge","badge-secondary","mb-0"],["class","badge badge-secondary mt-2 mb-0",4,"ngIf"],[1,"badge-item"],[3,"badge",4,"ngIf"],[3,"badge"],[1,"motto-container"],[1,"icon","pencil-icon"],["maxlength","38","wrap","soft","rows","1",1,"motto-input",3,"ngModel","placeholder","ngModelChange","keyup","keydown.enter"],[1,"motto"],[1,"badge","badge-secondary","mt-2","mb-0"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"h6",2),n.dc(3,"div",3),n.nc("click",function(){return e.visitProfile()}),n.Zb(4,"i",4),n.cc(),n.Wc(5),n.cc(),n.dc(6,"button",5),n.nc("click",function(){return e.hide()}),n.Zb(7,"i",6),n.cc(),n.cc(),n.dc(8,"div",7),n.dc(9,"div",8),n.dc(10,"div",9),n.Zb(11,"div",10),n.cc(),n.dc(12,"div",11),n.dc(13,"div",12),n.Uc(14,Kl,2,1,"div",13),n.cc(),n.cc(),n.cc(),n.dc(15,"div",14),n.Uc(16,Hl,4,4,"div",15),n.Uc(17,jl,3,1,"div",15),n.cc(),n.dc(18,"div",16),n.dc(19,"p",17),n.Wc(20),n.rc(21,"translate"),n.cc(),n.Uc(22,zl,2,1,"p",18),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(5),n.Yc(" ",e.userData.name," "),n.Kb(6),n.yc("figure",e.userData.figure)("direction",4)("asBackground",!0),n.Kb(3),n.yc("ngForOf",e.userData.badges),n.Kb(2),n.yc("ngIf",e.isOwnProfile),n.Kb(1),n.yc("ngIf",!e.isOwnProfile),n.Kb(3),n.Zc("",n.sc(21,10,"extendedprofile.achievementscore")," ",e.userData.activityPoints,""),n.Kb(2),n.yc("ngIf",e.userData.carryItem>0))},directives:[ol,m.m,m.n,cl,ur.b,ur.i,ur.l,ur.n],pipes:[ui],encapsulation:2}),t})();const ql=n.fc(Yl),Xl=["infostandsContainer"];let Zl=(()=>{class t extends ni{constructor(t,e,s){super(),this._inventoryService=t,this._componentFactoryResolver=e,this._ngZone=s,this._lastComponent=null,this._furniData=new el,this._userData=new il,this._petData=new sl,this._botData=new nl,this.objectSelectedHandler=this.objectSelectedHandler.bind(this),this.objectDeselectedHandler=this.objectDeselectedHandler.bind(this),this.objectRemovedHandler=this.objectRemovedHandler.bind(this),this.userInfostandUpdateHandler=this.userInfostandUpdateHandler.bind(this),this.botInfostandUpdateHandler=this.botInfostandUpdateHandler.bind(this),this.furniInfostandUpdateHandler=this.furniInfostandUpdateHandler.bind(this),this.rentableBotInfostandUpdateHandler=this.rentableBotInfostandUpdateHandler.bind(this),this.petInfostandUpdateHandler=this.petInfostandUpdateHandler.bind(this)}registerUpdateEvents(t){t&&(t.addEventListener(J.OBJECT_SELECTED,this.objectSelectedHandler),t.addEventListener(J.OBJECT_DESELECTED,this.objectDeselectedHandler),t.addEventListener(J.USER_REMOVED,this.objectRemovedHandler),t.addEventListener(J.FURNI_REMOVED,this.objectRemovedHandler),t.addEventListener(We.OWN_USER,this.userInfostandUpdateHandler),t.addEventListener(We.PEER,this.userInfostandUpdateHandler),t.addEventListener(We.BOT,this.botInfostandUpdateHandler),t.addEventListener(xe.FURNI,this.furniInfostandUpdateHandler),t.addEventListener(ke.RENTABLE_BOT,this.rentableBotInfostandUpdateHandler),t.addEventListener(Fe.PET_INFO,this.petInfostandUpdateHandler),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(J.OBJECT_SELECTED,this.objectSelectedHandler),t.removeEventListener(J.OBJECT_DESELECTED,this.objectDeselectedHandler),t.removeEventListener(J.USER_REMOVED,this.objectRemovedHandler),t.removeEventListener(J.FURNI_REMOVED,this.objectRemovedHandler),t.removeEventListener(We.OWN_USER,this.userInfostandUpdateHandler),t.removeEventListener(We.PEER,this.userInfostandUpdateHandler),t.removeEventListener(We.BOT,this.botInfostandUpdateHandler),t.removeEventListener(xe.FURNI,this.furniInfostandUpdateHandler),t.removeEventListener(ke.RENTABLE_BOT,this.rentableBotInfostandUpdateHandler),t.removeEventListener(Fe.PET_INFO,this.petInfostandUpdateHandler),super.unregisterUpdateEvents(t))}close(){this.infostandsContainer.length&&this.infostandsContainer.remove(),this._lastComponent=null}objectSelectedHandler(t){this.messageListener.processWidgetMessage(new lt(lt.GET_OBJECT_INFO,t.id,t.category))}objectDeselectedHandler(t){this._ngZone.run(()=>this.close())}objectRemovedHandler(t){let e=!1;const s=this._lastComponent&&this._lastComponent.instance.type||-1;if(-1===s&&(e=!0),s>0)switch(t.type){case J.FURNI_REMOVED:s===rl.FURNI&&t.id===this._furniData.id&&(e=!0);break;case J.USER_REMOVED:(s===rl.USER&&t.id===this._userData.id||s===rl.PET&&t.id===this._petData._Str_2707||s===rl.BOT&&t.id===this._userData.id||s===rl.RENTABLE_BOT&&t.id===this._botData.id)&&(e=!0)}e&&this._ngZone.run(()=>this.close())}userInfostandUpdateHandler(t){t&&this._ngZone.run(()=>{this._userData.populate(t);const e=this.getInfoStand(t);e&&(e.userData=this._userData,e.update(t))})}botInfostandUpdateHandler(t){t&&this._ngZone.run(()=>{this._userData.populate(t);const e=this.getInfoStand(t);e&&(e.userData=this._userData,e.update(t))})}furniInfostandUpdateHandler(t){t&&this._ngZone.run(()=>{this._furniData.populate(t);const e=this.getInfoStand(t);e&&(e.furniData=this._furniData,e.update(t))})}rentableBotInfostandUpdateHandler(t){t&&this._ngZone.run(()=>{this._botData.populate(t);const e=this.getInfoStand(t);e&&(e.botData=this._botData,e.update(t))})}petInfostandUpdateHandler(t){t&&this._ngZone.run(()=>{this._petData.populate(t);const e=this.getInfoStand(t);e&&(e.petData=this._petData,e.update(t))})}updateUserBadges(t,e){t===this._userData.id&&(this._userData.getIsBot()||this._ngZone.run(()=>this._userData.badges=e))}getInfoStand(t){const e=this.getInfoStandComponentType(t);if(!e)return null;if(this._lastComponent&&this._lastComponent.instance instanceof e)return this._lastComponent.instance;this.infostandsContainer.length&&this.infostandsContainer.remove();const s=this._componentFactoryResolver.resolveComponentFactory(e);let n=null;return s&&(n=this.infostandsContainer.createComponent(s)),this._lastComponent=n,n?(n.instance.widget=this,n.instance):null}get furniData(){return this._furniData}getInfoStandComponentType(t){if(!t)return null;switch(t.type){case We.BOT:return dl;case xe.FURNI:return wl;case Fe.PET_INFO:return Nl;case ke.RENTABLE_BOT:return Bl;case We.OWN_USER:case We.PEER:return Yl}return null}get handler(){return this.widgetHandler}get inventoryTrading(){return this._inventoryService.controller.tradeService}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(Ca),n.Yb(n.m),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&n.cd(Xl,1,n.Z),2&t){let t;n.Hc(t=n.oc())&&(e.infostandsContainer=t.first)}},features:[n.Hb],decls:3,vars:0,consts:[[1,"nitro-room-infostand-component"],["infostandsContainer",""]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Zb(1,"div",null,1),n.cc())},encapsulation:2}),t})();function Ql(t,e){if(1&t){const t=n.ec();n.bc(0),n.dc(1,"div",9),n.dc(2,"button",10),n.Wc(3),n.cc(),n.dc(4,"button",11),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc(2).accept(s)}),n.Zb(5,"i",12),n.cc(),n.dc(6,"button",13),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc(2).deny(s)}),n.Zb(7,"i",5),n.cc(),n.cc(),n.ac()}if(2&t){const t=e.$implicit;n.Kb(3),n.Xc(t)}}function Jl(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"h6",3),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",4),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(6,"i",5),n.cc(),n.cc(),n.dc(7,"div",6),n.dc(8,"perfect-scrollbar",7),n.Uc(9,Ql,8,1,"ng-container",8),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(3),n.Xc(n.sc(4,2,"widgets.doorbell.title")),n.Kb(6),n.yc("ngForOf",t.users)}}let $l=(()=>{class t extends ni{constructor(t){super(),this._ngZone=t,this._visible=!1,this._users=[],this.onRoomRinging=this.onRoomRinging.bind(this),this.onRoomAcceptedAndRejected=this.onRoomAcceptedAndRejected.bind(this)}registerUpdateEvents(t){t&&(t.addEventListener(Ut.RWDE_RINGING,this.onRoomRinging),t.addEventListener(Ut.REJECTED,this.onRoomAcceptedAndRejected),t.addEventListener(Ut.RWDE_ACCEPTED,this.onRoomAcceptedAndRejected),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(Ut.RWDE_RINGING,this.onRoomRinging),t.removeEventListener(Ut.REJECTED,this.onRoomAcceptedAndRejected),t.removeEventListener(Ut.RWDE_ACCEPTED,this.onRoomAcceptedAndRejected),super.unregisterUpdateEvents(t))}onRoomRinging(t){t&&this._ngZone.run(()=>this.addUser(t.userName))}onRoomAcceptedAndRejected(t){t&&this._ngZone.run(()=>this.removeUser(t.userName))}addUser(t){this._users.indexOf(t)>=0||(this._users.length>=50?this.deny(t):(this._visible=!0,this._users.push(t)))}removeUser(t){const e=this._users.indexOf(t);-1!==e&&(this._users.splice(e,1),this._users.length||(this._visible=!1))}deny(t){this.messageListener.processWidgetMessage(new wt(t,!1)),this.removeUser(t)}accept(t){this.messageListener.processWidgetMessage(new wt(t,!0)),this.removeUser(t)}hide(){this._visible=!1}get visible(){return this._visible}get users(){return this._users}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-room-doorbell-component"]],features:[n.Hb],decls:1,vars:1,consts:[["class","nitro-room-doorbell card","noMemory","true",3,"bringToTop","draggable",4,"ngIf"],["noMemory","true",1,"nitro-room-doorbell","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"position-relative","w-100",2,"min-height","200px","max-height","200px","height","200px"],[4,"ngFor","ngForOf"],[1,"btn-group","w-100","mb-1"],["type","button",1,"btn","btn-secondary","w-100"],["type","button",1,"btn","btn-success",3,"click"],[1,"fas","fa-check"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,e){1&t&&n.Uc(0,Jl,10,4,"div",0),2&t&&n.yc("ngIf",e.visible)},directives:[m.n,Dr,Kr,Hr.b,m.m],pipes:[ui],encapsulation:2}),t})();var th=s("te8b");let eh=(()=>{class t{constructor(t){this._sanitizer=t}transform(t){return th.shortnameToUnicode(t)}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(i.b))},t.\u0275pipe=n.Xb({name:"nitroEmoji",type:t,pure:!1}),t})(),sh=(()=>{class t{constructor(t,e){this._sanitizer=t,this._emojiPipe=e,this._allowedColors=new Map,this._allowedColors.set("r","red"),this._allowedColors.set("b","blue"),this._allowedColors.set("g","green"),this._allowedColors.set("y","yellow"),this._allowedColors.set("w","white"),this._allowedColors.set("o","orange"),this._allowedColors.set("c","cyan"),this._allowedColors.set("br","brown"),this._allowedColors.set("pr","purple"),this._allowedColors.set("pk","pink"),this._allowedColors.set("red","red"),this._allowedColors.set("blue","blue"),this._allowedColors.set("green","green"),this._allowedColors.set("yellow","yellow"),this._allowedColors.set("white","white"),this._allowedColors.set("orange","orange"),this._allowedColors.set("cyan","cyan"),this._allowedColors.set("brown","brown"),this._allowedColors.set("purple","purple"),this._allowedColors.set("pink","pink")}transform(t){let e="";if(t=t.replace(/<[^>]*>/g,""),(t=(t=this._emojiPipe.transform(t)).replace(/\[tag\](.*?)\[\/tag\]/g,'<span class="chat-tag"><b>$1</b></span>')).startsWith("@")&&t.indexOf("@",1)>-1){let s=null;for(;null!==(s=/@[a-zA-Z]+@/g.exec(t));){const n=s[0].toString(),i=n.substr(1,n.length-2),r=t.replace(n,"");e=this._allowedColors.has(i)?'<span style="color: '+this._allowedColors.get(i)+'">'+r+"</span>":r;break}}else e=t;return this._sanitizer.bypassSecurityTrustHtml(e)}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(i.b),n.Yb(eh))},t.\u0275pipe=n.Xb({name:"roomChatFormatter",type:t,pure:!1}),t})();const nh=["chatContainer"],ih=function(t){return{"background-color":t}};function rh(t,e){if(1&t&&n.Zb(0,"div",10),2&t){const t=n.qc();n.yc("ngStyle",n.Cc(1,ih,t.senderColorString))}}const ah=function(t){return{"background-image":t,transform:"scale(0.2)",top:"-53px"}},oh=function(t){return{"background-image":t}};function ch(t,e){if(1&t&&n.Zb(0,"div",11),2&t){const t=n.qc();n.yc("ngStyle",t.petType>=0?n.Cc(1,ah,"url("+t.senderImageUrl+")"):n.Cc(3,oh,"url("+t.senderImageUrl+")"))}}let lh=(()=>{class t{update(t){this.chatType=t.chatType,this.chatStyle=t.styleId,this.senderId=t.userId,this.senderName=t.userName,this.senderCategory=t.userCategory,this.message=t.text,this.messageLinks=t.links,this.senderX=t.userX,this.senderImageUrl=t.userImage&&t.userImage.src||null,this.senderColor=t.userColor,this.senderColorString=this.senderColor&&"#"+this.senderColor.toString(16).padStart(6,"0")||"#eeeeee",this.roomId=t.roomId,this.userType=t.userType,this.petType=t.petType}ready(){this.makeVisible(),this.chatContainerElement&&(this.chatContainerElement.style.minWidth=this.width+"px")}makeVisible(){this.chatContainerElement&&(this.chatContainerElement.style.visibility="visible")}getX(){return this.x}setX(t){this.chatContainerElement&&(this.x=t,this.chatContainerElement.style.left=t+"px")}getY(){return this.y}setY(t){this.chatContainerElement&&(this.y=t,this.chatContainerElement.style.top=t+"px")}selectUser(){u.a.instance.roomEngine.selectRoomObject(this.roomId,this.senderId,this.senderCategory)}get width(){return this.chatContainerElement&&this.chatContainerElement.clientWidth||0}get height(){return this.chatContainerElement&&this.chatContainerElement.clientHeight||0}get chatContainerElement(){return this.chatContainer&&this.chatContainer.nativeElement||null}get decoratedUsername(){return this.senderName+":"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&n.cd(nh,1),2&t){let t;n.Hc(t=n.oc())&&(e.chatContainer=t.first)}},inputs:{id:"id"},decls:11,vars:10,consts:[[1,"bubble-container"],["chatContainer",""],["class","user-container-bg",3,"ngStyle",4,"ngIf"],[3,"click"],[1,"user-container"],["class","user-image",3,"ngStyle",4,"ngIf"],[1,"chat-content"],[1,"username","mr-1",3,"innerHTML"],[1,"message",3,"innerHTML"],[1,"pointer"],[1,"user-container-bg",3,"ngStyle"],[1,"user-image",3,"ngStyle"]],template:function(t,e){1&t&&(n.dc(0,"div",0,1),n.Uc(2,rh,1,3,"div",2),n.dc(3,"div",3),n.nc("click",function(){return e.selectUser()}),n.dc(4,"div",4),n.Uc(5,ch,1,5,"div",5),n.cc(),n.dc(6,"div",6),n.Zb(7,"b",7),n.Zb(8,"span",8),n.rc(9,"roomChatFormatter"),n.cc(),n.Zb(10,"div",9),n.cc(),n.cc()),2&t&&(n.Kb(2),n.yc("ngIf",0===e.chatStyle),n.Kb(1),n.Ob("chat-bubble bubble-",e.chatStyle," type-",e.chatType,""),n.Kb(2),n.yc("ngIf",e.senderImageUrl),n.Kb(2),n.yc("innerHTML",e.decoratedUsername,n.Mc),n.Kb(1),n.yc("innerHTML",n.sc(9,8,e.message),n.Mc))},directives:[m.n,m.o],pipes:[sh],encapsulation:2}),t})();const hh=["chatView"],uh=["chatContainer"];function _h(t,e){}let dh=(()=>{class t extends ni{constructor(e,s){super(),this.ngZone=e,this.componentFactoryResolver=s,this.timerId=++t.TIMER_TRACKER,this.cameraOffset=new d.Point,this.chats=[],this.tempChats=[],this.pendingChats=[],this.processingChats=!1,this._skipNextMove=!1,this.onChatMessage=this.onChatMessage.bind(this),this.onRoomViewUpdate=this.onRoomViewUpdate.bind(this)}ngOnInit(){u.a.instance.addWorkerEventTracker(this),this.ngZone.runOutsideAngular(()=>{u.a.instance.sendWorkerEvent({type:"CREATE_INTERVAL",time:5e3,timerId:this.timerId,response:{type:"MOVE_CHATS"}})})}ngOnDestroy(){this.ngZone.runOutsideAngular(()=>{u.a.instance.sendWorkerEvent({type:"REMOVE_INTERVAL",timerId:this.timerId})}),u.a.instance.removeWorkerEventTracker(this)}registerUpdateEvents(t){t&&(t.addEventListener(At.RWCUE_EVENT_CHAT,this.onChatMessage),t.addEventListener($.SIZE_CHANGED,this.onRoomViewUpdate),t.addEventListener($.POSITION_CHANGED,this.onRoomViewUpdate),t.addEventListener($.SCALE_CHANGED,this.onRoomViewUpdate),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(At.RWCUE_EVENT_CHAT,this.onChatMessage),t.removeEventListener($.SIZE_CHANGED,this.onRoomViewUpdate),t.removeEventListener($.POSITION_CHANGED,this.onRoomViewUpdate),t.removeEventListener($.SCALE_CHANGED,this.onRoomViewUpdate))}updateChatViewForDimensions(t,e){const s=this.chatViewElement;if(!s)return;const n=u.a.instance.getConfiguration("chat.viewer.height.percentage",.4);s.style.height=e*n+"px"}onChatMessage(t){!t||ii.a.isRunning()&&t.chatType!==At.CHAT_TYPE_WHISPER||(this.pendingChats.push(t),this.processPendingChats())}onRoomViewUpdate(t){t.positionDelta&&(this.cameraOffset.x=this.cameraOffset.x+t.positionDelta.x,this.cameraOffset.y=this.cameraOffset.y+t.positionDelta.y,this.resetAllChatLocations()),t.roomViewRectangle&&this.updateChatViewForDimensions(t.roomViewRectangle.width,t.roomViewRectangle.height)}processPendingChats(t=!1){if(!t&&this.processingChats)return;this.processingChats=!0;const e=this.pendingChats.shift();if(!e)return void(this.processingChats=!1);let s=null,n=null;this.ngZone.run(()=>{const t=this.componentFactoryResolver.resolveComponentFactory(lh);s=this.chatContainer.createComponent(t),n=s.instance,n&&(n.id=this.getFreeItemId(),n.update(e))}),this.addChat(s),this._skipNextMove=!0}getFreeItemId(){return"chat_item_"+t.CHAT_COUNTER}addChat(e){if(!e)return;const s=e.instance;s.senderX=s.senderX-this.cameraOffset.x,s.setY(this.chatViewElement.offsetHeight-s.height),this.resetChatItemLocation(e),this.makeRoomForChat(e),this.chats.push(e),s.ready(),t.CHAT_COUNTER++,this.processPendingChats(!0)}hideChat(t){if(!t)return;const e=this.chats.indexOf(t);e>=0&&this.chats.splice(e,1);const s=this.chatContainer.indexOf(t.hostView);s>=0&&this.chatContainer.remove(s)}moveChatUp(t,e=0){if(!t)return;const s=t.instance;let n=s.height;e&&(n=e),s.setY(s.getY()-n),s.getY()<-2*s.height&&this.hideChat(t)}moveAllChatsUp(){if(this._skipNextMove)return void(this._skipNextMove=!1);let t=this.chats.length-1;for(;t>=0;)this.moveChatUp(this.chats[t],15),t--}makeRoomForChat(t){if(!t)return;const e=t.instance,s=this.chats[this.chats.length-1],n=s&&s.instance;if(!n)return;const i=n.getY()+n.height-1,r=e.height+1,a=this.chatViewElement.offsetHeight-i;if(a<r)for(const o of this.chats)this.moveChatUp(o,r-a)}resetAllChatLocations(){let t=this.chats.length-1;for(;t>=0;){const e=this.chats[t];e&&this.resetChatItemLocation(e),t--}}resetChatItemLocation(t){const e=t.instance;let s=e.senderX+this.cameraOffset.x;s-=e.width/2,e.setX(s)}workerMessageReceived(t){if(t)switch(t.type){case"MOVE_CHATS":return void this.moveAllChatsUp()}}get chatViewElement(){return this.chatViewReference&&this.chatViewReference.nativeElement||null}get handler(){return this.widgetHandler}}return t.TIMER_TRACKER=0,t.CHAT_COUNTER=0,t.\u0275fac=function(e){return new(e||t)(n.Yb(n.H),n.Yb(n.m))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-room-chat-component"]],viewQuery:function(t,e){if(1&t&&(n.cd(hh,1),n.cd(uh,1,n.Z)),2&t){let t;n.Hc(t=n.oc())&&(e.chatViewReference=t.first),n.Hc(t=n.oc())&&(e.chatContainer=t.first)}},features:[n.Hb],decls:4,vars:0,consts:[[1,"nitro-room-chat-component"],["chatView",""],["chatContainer",""]],template:function(t,e){1&t&&(n.dc(0,"div",0,1),n.Uc(2,_h,0,0,"ng-template",null,2,n.Vc),n.cc())},encapsulation:2}),t})();var gh=s("UTIc"),mh=s("oHxB"),ph=s("JDjE"),fh=s("5BHI"),Eh=s("443f"),Sh=s("JCII"),bh=s("vx5b"),vh=s("6vif"),Ih=s("xycO"),Rh=s("c7QS"),Th=s("V1nr"),yh=s("pDhE"),Oh=s("00EK"),Ch=s("8lyR"),Ah=s("KsdP"),Mh=s("qKi6"),wh=s("zRn8"),Uh=s("zWsf"),Dh=s("S5/W"),Nh=s("6RUH"),Lh=s("vA8V"),Ph=s("V5Lx"),xh=s("S8Tn"),Fh=s("UdUS"),kh=s("lulp"),Wh=s("Zim7"),Bh=s("o/0e"),Vh=s("mP1c");class Gh{constructor(){this._enteredGuestRoom=null,this._staffPick=!1,this._createdRoomId=0,this._currentRoomId=0,this._currentRoomOwner=!1,this._canRate=!1}get enteredGuestRoom(){return this._enteredGuestRoom}set enteredGuestRoom(t){this._enteredGuestRoom=t}get staffPick(){return this._staffPick}set staffPick(t){this._staffPick=t}get createdRoomId(){return this._createdRoomId}set createdRoomId(t){this._createdRoomId=t}get currentRoomId(){return this._currentRoomId}set currentRoomId(t){this._currentRoomId=t}get currentRoomOwner(){return this._currentRoomOwner}set currentRoomOwner(t){this._currentRoomOwner=t}get canRate(){return this._canRate}set canRate(t){this._canRate=t}}let Kh=(()=>{class t{constructor(e,s,n){this._notificationService=e,this._settingsService=s,this._ngZone=n,this._roomInfoShowing=!1,this._messages=[],this._component=null,this._topLevelContexts=[],this._topLevelContext=null,this._categories=[],this._filter=t.SEARCH_FILTERS[0],this._lastSearchResults=[],this._lastSearch="",this._data=new Gh,this._tradeSettings=[],this._homeRoomId=-1,this._isSearching=!1,this._isLoaded=!1,this._isLoading=!1,this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.setTradeSettings(),this.registerMessages(),u.a.instance.addLinkEventTracker(this),l.a.available&&l.a.addCallback(L.a.OPENROOM,this.enterRoomWebRequest)}ngOnDestroy(){this.unregisterMessages(),u.a.instance.removeLinkEventTracker(this)}registerMessages(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomSessionManager.events.addEventListener(M.a.CREATED,this.onRoomSessionEvent),this._messages=[new qs.a(this.onUserInfoEvent.bind(this)),new Mh.a(this.onRoomForwardEvent.bind(this)),new en.a(this.onRoomInfoOwnerEvent.bind(this)),new Ee.a(this.onRoomInfoEvent.bind(this)),new Ah.a(this.onRoomEnterErrorEvent.bind(this)),new Dh.a(this.onRoomCreatedEvent.bind(this)),new Oh.a(this.onRoomDoorbellEvent.bind(this)),new yh.a(this.onRoomDoorbellAcceptedEvent.bind(this)),new wh.a(this.onRoomScoreEvent.bind(this)),new Uh.a(this.onRoomSettingsUpdatedEvent.bind(this)),new gh.a(this.onGenericErrorEvent.bind(this)),new Ch.a(this.onRoomDoorbellRejectedEvent.bind(this)),new mh.a(this.onNavigatorCategoriesEvent.bind(this)),new ph.a(this.onNavigatorCollapsedEvent.bind(this)),new fh.a(this.onNavigatorEventCategoriesEvent.bind(this)),new Sh.a(this.onNavigatorLiftedEvent.bind(this)),new bh.a(this.onNavigatorMetadataEvent.bind(this)),new vh.a(this.onNavigatorOpenRoomCreatorEvent.bind(this)),new Ih.a(this.onNavigatorSearchesEvent.bind(this)),new Rh.a(this.onNavigatorSearchEvent.bind(this)),new Th.a(this.onNavigatorSettingsEvent.bind(this)),new Eh.a(this.onNavigatorHomeRoomEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomSessionManager.events.removeEventListener(M.a.CREATED,this.onRoomSessionEvent);for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomSessionEvent(t){if(t)switch(t.type){case M.a.CREATED:return void this._ngZone.run(()=>this._settingsService.hideNavigator())}}onUserInfoEvent(t){t&&t.getParser()&&(u.a.instance.communication.connection.send(new Ph.a),u.a.instance.communication.connection.send(new kh.a))}onRoomForwardEvent(t){if(!(t instanceof Mh.a))return;const e=t.getParser();e&&u.a.instance.communication.connection.send(new Se.a(e.roomId,!1,!0))}onRoomInfoOwnerEvent(t){if(!(t instanceof en.a))return;const e=t.getParser();e&&(this._ngZone.run(()=>{this._data.currentRoomOwner=!1,this._data.currentRoomOwner=e.isOwner,this._data.currentRoomId=e.roomId}),u.a.instance.communication.connection.send(new Se.a(e.roomId,!0,!1)),l.a.call("legacyTrack","navigator","private",[e.roomId]))}onRoomInfoEvent(t){if(!(t instanceof Ee.a))return;const e=t.getParser();e&&this._ngZone.run(()=>{if(e.roomEnter)this._data.enteredGuestRoom=e.data,this._data.staffPick=e.data.roomPicker,this._data.createdRoomId=0;else if(e.roomForward){if(e.data.ownerName!==u.a.instance.sessionDataManager.userName&&!e.isGroupMember)switch(e.data.doorMode){case Bh.a.DOORBELL_STATE:return void this.openRoomDoorbell(e.data);case Bh.a.PASSWORD_STATE:return void this.openRoomPassword(e.data)}this.goToRoom(e.data.roomId)}else this._data.enteredGuestRoom=e.data,this._data.staffPick=e.data.roomPicker})}onRoomEnterErrorEvent(t){if(!(t instanceof Ah.a))return;const e=t.getParser();if(!e)return;this._ngZone.run(()=>{switch(e.reason){case Wh.a.FULL_ERROR:this._notificationService.alert("${navigator.guestroomfull.text}","${navigator.guestroomfull.title}");break;case Wh.a.QUEUE_ERROR:this._notificationService.alert("${room.queue.error. "+e.parameter+"}","${room.queue.error.title}");break;case Wh.a.BANNED:this._notificationService.alert("${navigator.banned.text}","${navigator.banned.title}");break;default:this._notificationService.alert("${room.queue.error.title}","${room.queue.error.title}")}}),u.a.instance.communication.connection.send(new Nh.a);const s=new tt.a(tt.a.TOOLBAR_CLICK);s.iconName=Vh.a.HOTEL_VIEW,u.a.instance.roomEngine.events.dispatchEvent(s)}onRoomCreatedEvent(t){if(!t)return;const e=t.getParser();e&&(this._ngZone.run(()=>{this._data.createdRoomId=e.roomId,this._roomInfoShowing=!1}),this.goToRoom(e.roomId))}onRoomDoorbellEvent(t){if(!t)return;const e=t.getParser();e&&(e.userName&&0!==e.userName.length||this._ngZone.run(()=>this._component&&this._component.openRoomDoorbell(null,!0)))}onRoomDoorbellAcceptedEvent(t){if(!t)return;const e=t.getParser();e&&(e.userName&&0!==e.userName.length||this._ngZone.run(()=>this._component&&this._component.closeRoomDoorbell()))}onRoomScoreEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this._data.canRate=e.canLike)}onRoomSettingsUpdatedEvent(t){if(!t)return;const e=t.getParser();e&&u.a.instance.communication.connection.send(new Se.a(e.roomId,!1,!1))}onGenericErrorEvent(t){if(!t)return;const e=t.getParser();if(e)switch(e.errorCode){case-100002:this._ngZone.run(()=>this._component&&this._component.openRoomPassword(null,!0));break;case 4009:this._notificationService.alert("${navigator.alert.need.to.be.vip}","${generic.alert.title}");break;case 4010:this._notificationService.alert("${navigator.alert.invalid_room_name}","${generic.alert.title}");break;case 4011:this._notificationService.alert("${navigator.alert.cannot_perm_ban}","${generic.alert.title}");break;case 4013:this._notificationService.alert("${navigator.alert.room_in_maintenance}","${generic.alert.title}")}}onRoomDoorbellRejectedEvent(t){if(!t)return;const e=t.getParser();e&&(e.userName&&0!==e.userName.length||this._ngZone.run(()=>this._component&&this._component.openRoomDoorbell(null,!1,!0)))}onNavigatorCategoriesEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this._categories=e.categories)}onNavigatorCollapsedEvent(t){t&&t.getParser()}onNavigatorEventCategoriesEvent(t){t&&t.getParser()}onNavigatorLiftedEvent(t){t&&t.getParser()}onNavigatorMetadataEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._topLevelContexts=e.topLevelContexts,this._topLevelContexts.length>0&&this.setCurrentContext(this._topLevelContexts[0]),this.clearSearch()})}onNavigatorOpenRoomCreatorEvent(t){t&&t.getParser()&&this._component&&this._ngZone.run(()=>this._component.openRoomCreator())}onNavigatorSearchesEvent(t){t&&t.getParser()}onNavigatorSearchEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=e.result;s&&this._ngZone.run(()=>{this.setCurrentContextByCode(s.code),this._lastSearchResults=s.results,this._isSearching=!1})}onNavigatorSettingsEvent(t){t&&t.getParser()}onNavigatorHomeRoomEvent(t){if(!t)return;const e=t.getParser();!e||(this._homeRoomId=e.homeRoomId,e.roomIdToEnter<=0)||(e.roomIdToEnter!==this._homeRoomId?this.goToPrivateRoom(this._homeRoomId):this.goToHomeRoom())}getMaxVisitors(e){const s=[];let n=t.MAX_VISITOR_STEPPER;for(;n<=e;)s.push(n),n+=t.MAX_VISITOR_INCREMENTOR;return s}setTradeSettings(){this._tradeSettings=[],this._tradeSettings.push("${navigator.roomsettings.trade_not_allowed}","${navigator.roomsettings.trade_not_with_Controller}","${navigator.roomsettings.trade_allowed}")}goToRoom(t,e=null){u.a.instance.roomSessionManager.createSession(t,e)}goToPrivateRoom(t){u.a.instance.communication.connection.send(new Se.a(t,!1,!0))}goToHomeRoom(){return!(this._homeRoomId<1||(this.goToRoom(this._homeRoomId),0))}getContextByCode(t){if(!t)return null;for(const e of this._topLevelContexts)if(e&&e.code===t)return e;return null}setCurrentContext(t,e=!0){t&&this._topLevelContext!==t&&(this._topLevelContext=t)}setCurrentContextByCode(t,e=!0){if(!t)return;const s=this.getContextByCode(t);s&&this.setCurrentContext(s,e)}setCurrentFilter(t){t&&this._filter!==t&&(this._filter=t)}search(e=null){if(!this._topLevelContext||this._isSearching)return;this._filter||this.setCurrentFilter(t.SEARCH_FILTERS[0]);const s=this._filter&&this._filter.query?this._filter.query+":":"";let n=e;null===n&&(n=this._lastSearch),this._lastSearch=n||"",this.sendSearch(this._topLevelContext.code,s+this._lastSearch)}clearSearch(){this.setCurrentFilter(t.SEARCH_FILTERS[0]),this._lastSearch=null,this.isLoaded&&this.search()}sendSearch(t,e){t&&(this._isSearching=!0,this._ngZone.runOutsideAngular(()=>u.a.instance.communication.connection.send(new Fh.a(t,e))))}loadNavigator(){this._ngZone.runOutsideAngular(()=>u.a.instance.communication.connection.send(new xh.a)),this._isLoaded=!0}openRoomDoorbell(t){t&&this._component&&this._component.openRoomDoorbell(t)}openRoomPassword(t){t&&this._component&&this._component.openRoomPassword(t)}toggleRoomInfo(){this._roomInfoShowing=!this._roomInfoShowing}linkReceived(t){const e=t.split("/");if(!(e.length<2))switch(e[1]){case"goto":if(e.length>2)switch(e[2]){case"home":this.goToHomeRoom();break;default:{const t=parseInt(e[2]);t>0&&this.goToPrivateRoom(t)}}return}}enterRoomWebRequest(t,e=!1,s=null){u.a.instance.communication.connection.send(new Lh.a(t))}get eventUrlPrefix(){return"navigator"}get component(){return this._component}set component(t){this._component=t}get topLevelContexts(){return this._topLevelContexts}get topLevelContext(){return this._topLevelContext}get categories(){return this._categories}get filter(){return this._filter}get lastSearch(){return this._lastSearch}set lastSearch(t){this._lastSearch=t}get lastSearchResults(){return this._lastSearchResults}get isSearching(){return this._isSearching}get isLoaded(){return this._isLoaded}get isLoading(){return this._isLoading}get tradeSettings(){return this._tradeSettings}get data(){return this._data}get roomInfoShowing(){return this._roomInfoShowing}set roomInfoShowing(t){this._roomInfoShowing=t}}return t.SEARCH_FILTERS=[{name:"anything",query:null},{name:"room.name",query:"roomname"},{name:"owner",query:"owner"},{name:"tag",query:"tag"},{name:"group",query:"group"}],t.MAX_VISITOR_STEPPER=10,t.MAX_VISITOR_INCREMENTOR=5,t.\u0275fac=function(e){return new(e||t)(n.kc(es),n.kc(g),n.kc(n.H))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})();function Hh(t,e){if(1&t&&(n.dc(0,"div",22),n.Wc(1),n.cc()),2&t){const t=e.$implicit;n.Kb(1),n.Yc("#",t,"")}}function jh(t,e){if(1&t&&(n.dc(0,"div",20),n.Uc(1,Hh,2,1,"div",21),n.cc()),2&t){const t=n.qc(2);n.Kb(1),n.yc("ngForOf",t.tags)}}function zh(t,e){if(1&t){const t=n.ec();n.dc(0,"button",3),n.nc("click",function(){return n.Lc(t),n.qc(2).likeRoom()}),n.Zb(1,"i",23),n.cc()}}const Yh=function(t){return[t]};function qh(t,e){if(1&t){const t=n.ec();n.dc(0,"div",6),n.dc(1,"div",7),n.dc(2,"p",8),n.Wc(3),n.cc(),n.dc(4,"p",9),n.Wc(5),n.cc(),n.Uc(6,jh,2,1,"div",10),n.dc(7,"div",11),n.dc(8,"div",12),n.dc(9,"button",3),n.nc("click",function(){return n.Lc(t),n.qc().toggleRoomTools()}),n.Zb(10,"i",13),n.cc(),n.dc(11,"button",3),n.nc("click",function(){return n.Lc(t),n.qc().toggleZoom()}),n.Zb(12,"i",4),n.cc(),n.Uc(13,zh,2,0,"button",14),n.dc(14,"button",3),n.nc("click",function(){return n.Lc(t),n.qc().toggleChatHistory()}),n.Zb(15,"i",15),n.cc(),n.cc(),n.dc(16,"div",16),n.dc(17,"button",17),n.nc("click",function(){return n.Lc(t),n.qc().goInDirection(-1)}),n.Zb(18,"i",18),n.cc(),n.dc(19,"button",17),n.nc("click",function(){return n.Lc(t),n.qc().goInDirection(1)}),n.Zb(20,"i",19),n.cc(),n.cc(),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.yc("@inOutAnimation",void 0),n.Kb(3),n.Xc(t.roomName),n.Kb(2),n.Xc(t.ownerName),n.Kb(1),n.yc("ngIf",t.tags.length),n.Kb(6),n.yc("ngClass",n.Cc(8,Yh,t.zoomed?"fa-search-minus":"fa-search-plus")),n.Kb(1),n.yc("ngIf",t.canRate),n.Kb(4),n.yc("disabled",!t.hasDirection(-1)),n.Kb(2),n.yc("disabled",!t.hasDirection(1))}}let Xh=(()=>{class t extends ni{constructor(t,e,s,n){super(),this._componentFactoryResolver=t,this._ngZone=e,this._settingsService=s,this._navigatorService=n,this._lastRoomId=-1,this._roomData=null,this._currentRoomIndex=-1,this._roomName="",this._ownerName="",this._tags=[],this._zoomed=!0,this._roomOptionsVisible=!1,this._roomToolsVisible=!1,this._roomOptionsTimeout=null}ngOnDestroy(){this._navigatorService.roomInfoShowing=!1,this.stopRoomOptionsTimeout()}updateRoomInfo(e){e&&this._ngZone.run(()=>{for(const s of t.VISITED_ROOMS)s.roomId===e.roomId&&(s.roomName=e.roomName)})}updateRoomTools(t,e,s){this._ngZone.run(()=>{this._roomName=t,this._ownerName=e,this._tags=s,this.showRoomOptions()})}addVisitedRoom(e){this._ngZone.run(()=>{for(const s of t.VISITED_ROOMS)if(s&&s.roomId===e.roomId)return;t.VISITED_ROOMS.push(e),t.VISITED_ROOMS.length>t.MAX_VISIT_HISTORY&&t.VISITED_ROOMS.shift(),this._currentRoomIndex=t.VISITED_ROOMS.length-1})}updateRoomCurrentIndex(e){this._ngZone.run(()=>{let s=0;for(;s<t.VISITED_ROOMS.length;){const n=t.VISITED_ROOMS[s];if(n&&n.roomId===e)return void(this._currentRoomIndex=s);s++}})}likeRoom(){this.handler.rateRoom()}hasDirection(e){const s=this._currentRoomIndex+e;return s>=0&&s<t.VISITED_ROOMS.length}goInDirection(e){const s=this._currentRoomIndex+e;if(s<0||s>t.VISITED_ROOMS.length-1)return;const n=t.VISITED_ROOMS[s];n&&this._navigatorService.goToPrivateRoom(n.roomId)}toggleChatHistory(){this._settingsService.toggleChatHistory()}toggleZoom(){this.widgetHandler.processWidgetMessage(new Ye),this._zoomed=!this._zoomed}toggleRoomOptions(){this._roomOptionsVisible=!this._roomOptionsVisible,this._roomOptionsVisible&&this.showRoomOptions(!1)}showRoomOptions(t=!0){this._roomOptionsVisible=!0,this.stopRoomOptionsTimeout(),t&&(this._roomOptionsTimeout=setTimeout(()=>{this.stopRoomOptionsTimeout(),this._roomOptionsVisible=!1},5e3))}stopRoomOptionsTimeout(){this._roomOptionsTimeout&&(clearTimeout(this._roomOptionsTimeout),this._roomOptionsTimeout=null)}toggleRoomTools(){this._navigatorService.toggleRoomInfo()}get handler(){return this.widgetHandler}get roomName(){return this._roomName}get ownerName(){return this._ownerName}get tags(){return this._tags}get zoomed(){return this._zoomed}get roomOptionsVisible(){return this._roomOptionsVisible}get roomToolsVisible(){return this._roomToolsVisible}set roomToolsVisible(t){this._roomToolsVisible=t}get roomData(){return this._roomData}get canRate(){return this._navigatorService.data.canRate}}return t.VISITED_ROOMS=[],t.MAX_VISIT_HISTORY=10,t.\u0275fac=function(e){return new(e||t)(n.Yb(n.m),n.Yb(n.H),n.Yb(g),n.Yb(Kh))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-room-tools-component"]],features:[n.Hb],decls:6,vars:4,consts:[[1,"nitro-room-tools"],[1,"row","m-0","p-0"],[1,"d-flex","align-items-end"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas",3,"ngClass"],["class","card ml-2",4,"ngIf"],[1,"card","ml-2"],[1,"d-flex","flex-column","p-3"],[1,"h5","text-truncate",2,"max-width","80%"],[1,"h6","room-owner","m-0"],["class","d-block mt-2",4,"ngIf"],[1,"d-flex","mt-2"],[1,"btn-group"],[1,"fas","fa-cog"],["type","button","class","btn btn-sm btn-secondary",3,"click",4,"ngIf"],[1,"fas","fa-comment-alt"],[1,"btn-group","ml-2"],["type","button",1,"btn","btn-sm","btn-secondary",3,"disabled","click"],[1,"fas","fa-arrow-left"],[1,"fas","fa-arrow-right"],[1,"d-block","mt-2"],["class","badge badge-secondary badge-sm mr-2",4,"ngFor","ngForOf"],[1,"badge","badge-secondary","badge-sm","mr-2"],[1,"fas","fa-heart"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"div",2),n.dc(3,"button",3),n.nc("click",function(){return e.toggleRoomOptions()}),n.Zb(4,"i",4),n.cc(),n.cc(),n.Uc(5,qh,21,10,"div",5),n.cc(),n.cc()),2&t&&(n.Kb(4),n.yc("ngClass",n.Cc(2,Yh,e.roomOptionsVisible?"fa-chevron-left":"fa-chevron-right")),n.Kb(1),n.yc("ngIf",e.roomOptionsVisible))},directives:[m.l,m.n,m.m],encapsulation:2,data:{animation:[Object(p.j)("inOutAnimation",[Object(p.i)(":enter",[Object(p.h)({transform:"translateX(-50%)"}),Object(p.e)(".1s ease-in",Object(p.h)({transform:"translateX(0%)"}))]),Object(p.i)(":leave",[Object(p.h)({transform:"translateX(0%)"}),Object(p.e)(".1s ease-out",Object(p.h)({transform:"translateX(-50%)"}))])])]}}),t})(),Zh=(()=>{class t{constructor(t){this._notificationService=t,this.title="",this.message="",this.choices=[]}close(){this._notificationService.closeAlert(this)}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(es))},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],decls:11,vars:5,consts:[["noMemory","true","center","true",1,"nitro-alert","d-flex","flex-column","bg-primary","border","border-black","shadow","rounded",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","px-3","pt-3"],[1,"m-0"],[1,"d-flex","flex-column","p-3"],[1,"position-relative","w-100",2,"min-height","65px","max-height","275px"],[1,"d-block",3,"innerHTML"],[1,"d-flex","flex-column","align-items-center","justify-content-center","mt-3"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"h6",2),n.Wc(3),n.cc(),n.cc(),n.dc(4,"div",3),n.dc(5,"perfect-scrollbar",4),n.Zb(6,"div",5),n.cc(),n.dc(7,"div",6),n.dc(8,"button",7),n.nc("click",function(){return e.close()}),n.Wc(9),n.rc(10,"translate"),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(3),n.Xc(e.title),n.Kb(3),n.yc("innerHTML",e.message,n.Mc),n.Kb(3),n.Xc(n.sc(10,3,"generic.close")))},directives:[Dr,Kr,Hr.b],pipes:[ui],encapsulation:2}),t})();var Qh=s("vzKh");function Jh(t,e){if(1&t){const t=n.ec();n.dc(0,"button",6),n.nc("click",function(){n.Lc(t);const s=e.index;return n.qc().choose(s)}),n.Wc(1),n.rc(2,"translate"),n.cc()}if(2&t){const t=e.$implicit;n.yc("ngClass",t.classes),n.Kb(1),n.Xc(n.sc(2,2,t.localizationKey))}}let $h=(()=>{class t extends Zh{constructor(){super(...arguments),this.callback=null,this.choices=[]}choose(t){try{this.choices[t].callback()}catch(e){Qh.a.log(e)}this.close()}}return t.\u0275fac=function(e){return tu(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:8,vars:5,consts:[["dragHandle",".card-header","noMemory","true","center","true",1,"card","nitro-alert","nitro-alert-generic-component",3,"bringToTop","draggable"],[1,"card-header","text-center"],[1,"card-body"],[1,"mb-3",3,"innerHTML"],[1,"btn-group","w-100"],["type","button","class","btn w-100",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"btn","w-100",3,"ngClass","click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.Wc(2),n.cc(),n.dc(3,"div",2),n.Zb(4,"div",3),n.rc(5,"keepHtml"),n.dc(6,"div",4),n.Uc(7,Jh,3,4,"button",5),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(2),n.Yc(" ",e.title," "),n.Kb(2),n.yc("innerHTML",n.sc(5,3,e.message),n.Mc),n.Kb(3),n.yc("ngForOf",e.choices))},directives:[Dr,Kr,m.m,m.l],pipes:[Mi,ui],encapsulation:2}),t})();const tu=n.fc($h);class eu{constructor(t,e,s=[]){this._localizationKey=t,this._callback=e,this._classes=s}get localizationKey(){return this._localizationKey}get callback(){return this._callback}get classes(){return this._classes}}let su=(()=>{class t extends Zh{constructor(){super(...arguments),this.callback=null}confirm(){if(this.callback)try{this.callback()}catch(t){Qh.a.log(t)}this.close()}}return t.\u0275fac=function(e){return nu(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:13,vars:8,consts:[["noMemory","true","center","true",1,"nitro-alert","d-flex","flex-column","bg-primary","border","border-black","shadow","rounded",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","px-3","pt-3"],[1,"m-0"],[1,"d-flex","flex-column","p-3"],[1,"d-flex","flex-column",3,"innerHTML"],[1,"d-flex","align-items-center","justify-content-center","mt-3"],["type","button",1,"btn","btn-link","mr-1",3,"click"],["type","button",1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"h6",2),n.Wc(3),n.cc(),n.cc(),n.dc(4,"div",3),n.Zb(5,"div",4),n.dc(6,"div",5),n.dc(7,"button",6),n.nc("click",function(){return e.close()}),n.Wc(8),n.rc(9,"translate"),n.cc(),n.dc(10,"button",7),n.nc("click",function(){return e.confirm()}),n.Wc(11),n.rc(12,"translate"),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(3),n.Xc(e.title),n.Kb(2),n.yc("innerHTML",e.message,n.Mc),n.Kb(3),n.Xc(n.sc(9,4,"generic.cancel")),n.Kb(3),n.Xc(n.sc(12,6,"generic.ok")))},directives:[Dr,Kr],pipes:[ui],encapsulation:2}),t})();const nu=n.fc(su);function iu(t,e){if(1&t){const t=n.ec();n.dc(0,"button",9),n.nc("click",function(){return n.Lc(t),n.qc().openLink()}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"mod.alert.link")))}let ru=(()=>{class t extends Zh{constructor(){super(...arguments),this.link=""}openLink(){window.open(this.link,"_blank")}get hasLink(){return this.link.length>0}}return t.\u0275fac=function(e){return au(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:12,vars:6,consts:[["noMemory","true","center","true",1,"nitro-alert","d-flex","flex-column","bg-primary","border","border-black","shadow","rounded",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","px-3","pt-3"],[1,"m-0"],[1,"d-flex","flex-column","p-3"],[1,"position-relative","w-100",2,"min-height","65px","max-height","275px"],[1,"d-block",3,"innerHTML"],[1,"d-flex","align-items-center","justify-content-center","mt-3"],["type","button","class","btn btn-link mr-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-link","mr-1",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"h6",2),n.Wc(3),n.cc(),n.cc(),n.dc(4,"div",3),n.dc(5,"perfect-scrollbar",4),n.Zb(6,"div",5),n.cc(),n.dc(7,"div",6),n.Uc(8,iu,3,3,"button",7),n.dc(9,"button",8),n.nc("click",function(){return e.close()}),n.Wc(10),n.rc(11,"translate"),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(3),n.Xc(e.title),n.Kb(3),n.yc("innerHTML",e.message,n.Mc),n.Kb(2),n.yc("ngIf",e.hasLink),n.Kb(2),n.Xc(n.sc(11,4,"generic.close")))},directives:[Dr,Kr,Hr.b,m.n],pipes:[ui],encapsulation:2}),t})();const au=n.fc(ru);function ou(t,e){if(1&t&&(n.bc(0),n.Zb(1,"div",8),n.ac()),2&t){const t=e.$implicit;n.Kb(1),n.yc("innerHTML",t,n.Mc)}}let cu=(()=>{class t extends Zh{constructor(){super(...arguments),this.messages=[]}}return t.\u0275fac=function(e){return lu(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:11,vars:5,consts:[["noMemory","true","center","true",1,"nitro-alert","multiple-messages","d-flex","flex-column","bg-primary","border","border-black","shadow","rounded",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","px-3","pt-3"],[1,"m-0"],[1,"d-flex","flex-column","p-3"],[1,"position-relative","w-100",2,"min-height","65px","max-height","275px","height","275px"],[4,"ngFor","ngForOf"],[1,"d-flex","flex-column","align-items-center","justify-content-center","mt-3"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"d-block",3,"innerHTML"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"h6",2),n.Wc(3),n.cc(),n.cc(),n.dc(4,"div",3),n.dc(5,"perfect-scrollbar",4),n.Uc(6,ou,2,1,"ng-container",5),n.cc(),n.dc(7,"div",6),n.dc(8,"button",7),n.nc("click",function(){return e.close()}),n.Wc(9),n.rc(10,"translate"),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(3),n.Xc(e.title),n.Kb(3),n.yc("ngForOf",e.messages),n.Kb(3),n.Xc(n.sc(10,3,"generic.close")))},directives:[Dr,Kr,Hr.b,m.m],pipes:[ui],encapsulation:2}),t})();const lu=n.fc(cu),hu=["alertsContainer"];function uu(t,e){}function _u(t,e){}let du=(()=>{class t{constructor(t,e,s){this._notificationService=t,this._componentFactoryResolver=e,this._ngZone=s,this._alerts=new Map}ngOnInit(){this._notificationService.alertCenter=this}ngOnDestroy(){this.closeAllAlerts(),this._notificationService.alertCenter=null}alert(t,e=null){return this.buildAlert(Zh,t,e)}alertWithLink(t,e=null,s=null){const n=this.buildAlert(ru,t,s);return n?(n.link=e,n):null}alertWithConfirm(t,e=null,s=null){const n=this.buildAlert(su,t,e);return n?(n.callback=s,n):null}alertWithChoices(t,e,s=null){let n=null;return this._ngZone.run(()=>{n=this.createAlertComponent($h),s?s.startsWith("${")&&(s=u.a.instance.getLocalization(s)):s=u.a.instance.getLocalization("${mod.alert.title}"),t&&(t.startsWith("${")&&(t=u.a.instance.getLocalization(t)),t=t.replace(/\r\n|\r|\n/g,"<br />")),n.title=s,n.message=t,n.choices=e}),n||null}alertWithScrollableMessages(t,e=null){const s=this.buildAlert(cu,null,e);if(!s)return;const n=[];for(const i of t)i&&n.push(i.replace(/\r\n|\r|\n/g,"<br />"));return s.messages=n,s}buildAlert(t,e,s=null){let n=null;return this._ngZone.run(()=>{n=this.createAlertComponent(t),s?s.startsWith("${")&&(s=u.a.instance.getLocalization(s)):s=u.a.instance.getLocalization("${mod.alert.title}"),e&&(e.startsWith("${")&&(e=u.a.instance.getLocalization(e)),e=e.replace(/\r\n|\r|\n/g,"<br />")),n.title=s,n.message=e}),n||null}createAlertComponent(t){if(!t)return null;let e=null;const s=this._componentFactoryResolver.resolveComponentFactory(t);let n=null;return s&&(n=this.alertsContainer.createComponent(s),this._alerts.set(n.instance,n)),e=n.instance,e}closeAlert(t){if(!t)return;const e=this._alerts.get(t);e&&(this._alerts.delete(t),this.removeAlertView(e.hostView))}closeAllAlerts(){for(const t of this._alerts.keys())this.closeAlert(t)}removeAlertView(t){if(!t)return;const e=this.alertsContainer.indexOf(t);-1!==e&&this.alertsContainer.remove(e)}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(es),n.Yb(n.m),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-alert-center-component"]],viewQuery:function(t,e){if(1&t&&n.cd(hu,1,n.Z),2&t){let t;n.Hc(t=n.oc())&&(e.alertsContainer=t.first)}},decls:5,vars:0,consts:[[1,"d-flex","flex-column-reverse"],["notificationsContainer",""],["alertsContainer",""]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Uc(1,uu,0,0,"ng-template",null,1,n.Vc),n.cc(),n.Uc(3,_u,0,0,"ng-template",null,2,n.Vc))},encapsulation:2}),t})(),gu=(()=>{class t{static format(e,s="",n=3){return e>n*t.YEAR?t.getLocalization("friendlytime.years"+s,Math.round(e/t.YEAR)):e>n*t.MONTH?t.getLocalization("friendlytime.months"+s,Math.round(e/t.MONTH)):e>n*t.DAY?t.getLocalization("friendlytime.days"+s,Math.round(e/t.DAY)):e>n*t.HOUR?t.getLocalization("friendlytime.hours"+s,Math.round(e/t.HOUR)):e>n*t.MINUTE?t.getLocalization("friendlytime.minutes"+s,Math.round(e/t.MINUTE)):t.getLocalization("friendlytime.seconds"+s,Math.round(e))}static shortFormat(e,s="",n=3){return e>n*t.YEAR?t.getLocalization("friendlytime.years.short"+s,Math.round(e/t.YEAR)):e>n*t.MONTH?t.getLocalization("friendlytime.months.short"+s,Math.round(e/t.MONTH)):e>n*t.DAY?t.getLocalization("friendlytime.days.short"+s,Math.round(e/t.DAY)):e>n*t.HOUR?t.getLocalization("friendlytime.hours.short"+s,Math.round(e/t.HOUR)):e>n*t.MINUTE?t.getLocalization("friendlytime.minutes.short"+s,Math.round(e/t.MINUTE)):t.getLocalization("friendlytime.seconds.short"+s,Math.round(e))}static getLocalization(t,e){return u.a.instance.getLocalizationWithParameter(t,"amount",e.toString())}}return t.MINUTE=60,t.HOUR=60*t.MINUTE,t.DAY=24*t.HOUR,t.WEEK=7*t.DAY,t.MONTH=30*t.DAY,t.YEAR=365*t.DAY,t})();var mu=s("2y6h"),pu=s("IRIx"),fu=s("DpKJ"),Eu=s("zIYo");let Su=(()=>{class t{constructor(t){this._ngZone=t,this._isReady=!1,this._messages=[],this._currencies=new Map,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),this._messages=[new mu.a(this.onUserCreditsEvent.bind(this)),new pu.a(this.onUserCurrencyEvent.bind(this)),new fu.a(this.onUserCurrencyUpdateEvent.bind(this)),new go.a(this.onUserSubscriptionEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(this._messages&&this._messages.length){for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]}})}requestUpdate(){u.a.instance.communication.connection.send(new Eu.a)}onUserCreditsEvent(t){if(!t)return;const e=t.getParser();this._isReady=!0,this._ngZone.run(()=>this.setCurrency(-1,parseFloat(e.credits)))}onUserCurrencyEvent(t){if(!t)return;const e=t.getParser();this._ngZone.run(()=>{for(const[t,s]of e.currencies)this.setCurrency(t,s)})}onUserCurrencyUpdateEvent(t){if(!t)return;const e=t.getParser();this._ngZone.run(()=>this.setCurrency(e.type,e.amount))}onUserSubscriptionEvent(t){if(!t)return;const e=t.getParser();if(e)switch(e.name){case"habbo_club":return void(this._habboClubSubscription=e);default:return}}setCurrency(t,e){this._currencies.set(t,e)}get currencies(){return this._currencies}get visibleCurrencies(){return u.a.instance.getConfiguration("system.currency.types",[])}get hcSub(){return this._habboClubSubscription}get isReady(){return this._isReady}}return t.\u0275fac=function(e){return new(e||t)(n.kc(n.H))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})();const bu=["nitro-currency-icon",""],vu=function(t){return{"background-image":t}};let Iu=(()=>{class t{constructor(){this.type=null}get iconUrl(){if(null===this.type)return null;let t=u.a.instance.getConfiguration("currency.asset.icon.url","");return t=t.replace("%type%",this.type.toString()),`url('${t}')`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-currency-icon",""]],inputs:{type:"type"},attrs:bu,decls:1,vars:3,consts:[[1,"nitro-currency-icon",3,"ngStyle"]],template:function(t,e){1&t&&n.Zb(0,"div",0),2&t&&n.yc("ngStyle",n.Cc(1,vu,e.iconUrl))},directives:[m.o],encapsulation:2}),t})(),Ru=(()=>{class t{transform(t,e){if(isNaN(t))return 0;if(null===t)return 0;if(0===t)return 0;let s=Math.abs(t);const n=Math.pow(10,1),i=t<0;let r="";const a=[{key:"Q",value:Math.pow(10,15)},{key:"T",value:Math.pow(10,12)},{key:"B",value:Math.pow(10,9)},{key:"M",value:Math.pow(10,6)},{key:"K",value:1e3}];for(let o=0;o<a.length;o++){let t=s/a[o].value;if(t=Math.round(t*n)/n,t>=1){s=t,r=a[o].key;break}}return(i?"-":"")+s+r}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=n.Xb({name:"shortNumber",type:t,pure:!0}),t})();const Tu=function(t,e,s){return{"bg-pink":t,"bg-warning":e,"bg-skyBlue":s}};function yu(t,e){if(1&t&&(n.dc(0,"div",5),n.dc(1,"div",6),n.Wc(2),n.rc(3,"shortNumber"),n.cc(),n.dc(4,"div",7),n.Zb(5,"div",8),n.cc(),n.cc()),2&t){const t=n.qc().$implicit;n.Kb(2),n.Yc(" ",n.sc(3,3,t.value),""),n.Kb(2),n.yc("ngClass",n.Ec(5,Tu,0==t.key,-1==t.key,5==t.key)),n.Kb(1),n.yc("type",t.key)}}function Ou(t,e){if(1&t&&(n.bc(0),n.Uc(1,yu,6,9,"div",4),n.ac()),2&t){const t=e.$implicit,s=n.qc();n.Kb(1),n.yc("ngIf",s.isVisible(t.key))}}let Cu=(()=>{class t{constructor(t){this._purseService=t}ngOnInit(){this._purseService.requestUpdate()}isVisible(t){return-1!==this._purseService.visibleCurrencies.indexOf(t)}getCurrencyUrl(t){return u.a.instance.getConfiguration("currency.asset.icon.url").replace("%type%",t)}get currencies(){return this._purseService.currencies}get hcDay(){if(!this._purseService.hcSub)return;const t=gu.shortFormat(60*this._purseService.hcSub.totalSeconds);return this._purseService.hcSub.totalSeconds?t:u.a.instance.localization.getValue("purse.clubdays.zero.amount.text")}get isReady(){return this._purseService.isReady}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(Su))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-purse-main-component"]],decls:5,vars:3,consts:[[1,"nitro-purse-component","float-right"],[1,"position-relative","mb-1"],[1,"row","px-0","mx-0"],[4,"ngFor","ngForOf"],["class","col item-detail btn btn-primary rounded d-flex nohover",4,"ngIf"],[1,"col","item-detail","btn","btn-primary","rounded","d-flex","nohover"],[1,"d-flex","flex-grow-1","align-items-center","justify-content-end","detail-value"],[1,"detail-icon","bg-secondary",3,"ngClass"],["nitro-currency-icon","",1,"w-100","h-100",3,"type"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"div",2),n.Uc(3,Ou,2,1,"ng-container",3),n.rc(4,"keyvalue"),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(3),n.yc("ngForOf",n.sc(4,1,e.currencies)))},directives:[m.m,m.n,m.l,Iu],pipes:[m.h,Ru],encapsulation:2}),t})();var Au=s("e9/N"),Mu=s("Zm+c"),wu=s("bR4k"),Uu=s("IqqQ"),Du=s("D5bJ"),Nu=s("HujO"),Lu=s("mEdh"),Pu=s("xwkN"),xu=s("eJ6k"),Fu=s("fsQ+"),ku=s("8PZm"),Wu=s("ZHGj"),Bu=s("LSEE"),Vu=s("gEiT"),Gu=s("16el"),Ku=s("KQVX"),Hu=s("GBmB"),ju=s("00/2"),zu=s("o4d6"),Yu=s("btSX"),qu=s("C1pE"),Xu=s("w+79"),Zu=s("NLfn"),Qu=s("4pnK"),Ju=s("zQEY");class $u{constructor(){this._id=0,this._name="",this._description="",this._roomId="0",this._badgeParts=new Map,this._colorA=0,this.colorB=0,this._state=0,this._canMembersDecorate=!1,this._badgeParts.set(0,new Ju.a(!0)),this._badgeParts.set(1,new Ju.a(!1)),this._badgeParts.set(2,new Ju.a(!1)),this._badgeParts.set(3,new Ju.a(!1)),this._badgeParts.set(4,new Ju.a(!1))}getBadgePart(t){return this._badgeParts.get(t)}setPartsColor(t){this._badgeParts.forEach(e=>{e.color=t})}get id(){return this._id}set id(t){this._id=t}get name(){return this._name}set name(t){this._name=t}get description(){return this._description}set description(t){this._description=t}get roomId(){return this._roomId}set roomId(t){this._roomId=t}get badgeParts(){return this._badgeParts}set badgeParts(t){this._badgeParts=t}get colorA(){return this._colorA}set colorA(t){this._colorA=t}get colorB(){return this._colorB}set colorB(t){this._colorB=t}get currentBadgeCode(){let t="";return this._badgeParts.forEach(e=>{e.code&&(t+=e.code)}),t}get currentBadgeArray(){const t=[];return this._badgeParts.forEach(e=>{e.code&&(t.push(e.key),t.push(e.color),t.push(e.position))}),t}get state(){return this._state}set state(t){this._state=t}get canMembersDecorate(){return this._canMembersDecorate}set canMembersDecorate(t){this._canMembersDecorate=t}}var t_=s("1kSV");const e_=["nitro-group-creator-component",""];function s_(t,e){if(1&t){const t=n.ec();n.dc(0,"nitro-group-creator-tab-info-component",16),n.nc("groupSettingsChange",function(e){return n.Lc(t),n.qc().groupSettings=e}),n.cc()}if(2&t){const t=n.qc();n.yc("groupSettings",t.groupSettings)("showNameError",t.showNameError)("showDescriptionError",t.showDescriptionError)("showRoomError",t.showRoomError)("availableRooms",t.availableRooms)}}function n_(t,e){if(1&t){const t=n.ec();n.dc(0,"nitro-group-creator-tab-badge-component",17),n.nc("groupSettingsChange",function(e){return n.Lc(t),n.qc().groupSettings=e}),n.cc()}if(2&t){const t=n.qc();n.yc("groupSettings",t.groupSettings)("setDefaultValues",!0)}}function i_(t,e){if(1&t){const t=n.ec();n.dc(0,"nitro-group-creator-tab-colors-component",17),n.nc("groupSettingsChange",function(e){return n.Lc(t),n.qc().groupSettings=e}),n.cc()}if(2&t){const t=n.qc();n.yc("groupSettings",t.groupSettings)("setDefaultValues",!0)}}function r_(t,e){if(1&t&&n.Zb(0,"nitro-group-creator-tab-confirmation-component",18),2&t){const t=n.qc();n.yc("groupSettings",t.groupSettings)("groupCost",t.groupCost)}}function a_(t,e){if(1&t){const t=n.ec();n.dc(0,"button",19),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"generic.cancel")))}function o_(t,e){if(1&t){const t=n.ec();n.dc(0,"button",20),n.nc("click",function(){return n.Lc(t),n.qc().previousStep()}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"group.create.previousstep")))}function c_(t,e){if(1&t){const t=n.ec();n.dc(0,"button",20),n.nc("click",function(){return n.Lc(t),n.qc().nextStep()}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"group.create.nextstep")))}function l_(t,e){if(1&t){const t=n.ec();n.dc(0,"button",21),n.nc("click",function(){return n.Lc(t),n.qc().buyGroup()}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"group.create.confirm.buy")))}let h_=(()=>{class t{constructor(t,e){this._groupsService=t,this._activeModal=e,this._clear()}_clear(){this.groupSettings=new $u,this._currentStep=1,this._showNameError=!1,this._showDescriptionError=!1,this._showRoomError=!1,this._availableRooms=new Map,this._groupCost=0}ngOnInit(){this._clear()}ngOnDestroy(){this._clear()}previousStep(){1!==this._currentStep&&this._currentStep--}nextStep(){4!==this._currentStep&&(1===this._currentStep&&(this._showNameError=0===this.groupSettings.name.length||this.groupSettings.name.length>29,this._showDescriptionError=this.groupSettings.description.length>254,this._showRoomError="0"===this.groupSettings.roomId,this._showNameError||this._showDescriptionError||this._showRoomError)||this._currentStep++)}hide(){this._activeModal.close()}buyGroup(){this._groupsService.buyGroup(this.groupSettings)}get currentStep(){return this._currentStep}get showNameError(){return this._showNameError}get showDescriptionError(){return this._showDescriptionError}get showRoomError(){return this._showRoomError}get availableRooms(){return this._availableRooms}set availableRooms(t){this._availableRooms=t}get groupCost(){return this._groupCost}set groupCost(t){this._groupCost=t}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(u_),n.Yb(t_.a))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-group-creator-component",""]],attrs:e_,decls:30,vars:27,consts:[[1,"nitro-group-creator-component"],[1,"d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"btn-group","mb-3","w-100"],[1,"btn","btn-primary",3,"disabled"],[1,"btn","btn-success",3,"disabled"],[3,"groupSettings","showNameError","showDescriptionError","showRoomError","availableRooms","groupSettingsChange",4,"ngIf"],[3,"groupSettings","setDefaultValues","groupSettingsChange",4,"ngIf"],[3,"groupSettings","groupCost",4,"ngIf"],[1,"d-flex","flex-row","justify-content-between"],["class","btn btn-secondary",3,"click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-success",3,"click",4,"ngIf"],[3,"groupSettings","showNameError","showDescriptionError","showRoomError","availableRooms","groupSettingsChange"],[3,"groupSettings","setDefaultValues","groupSettingsChange"],[3,"groupSettings","groupCost"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"h6",2),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",3),n.nc("click",function(){return e.hide()}),n.Zb(6,"i",4),n.cc(),n.cc(),n.dc(7,"div",5),n.dc(8,"div",6),n.dc(9,"button",7),n.Wc(10),n.rc(11,"translate"),n.cc(),n.dc(12,"button",7),n.Wc(13),n.rc(14,"translate"),n.cc(),n.dc(15,"button",7),n.Wc(16),n.rc(17,"translate"),n.cc(),n.dc(18,"button",8),n.Wc(19),n.rc(20,"translate"),n.cc(),n.cc(),n.Uc(21,s_,1,5,"nitro-group-creator-tab-info-component",9),n.Uc(22,n_,1,2,"nitro-group-creator-tab-badge-component",10),n.Uc(23,i_,1,2,"nitro-group-creator-tab-colors-component",10),n.Uc(24,r_,1,2,"nitro-group-creator-tab-confirmation-component",11),n.dc(25,"div",12),n.Uc(26,a_,3,3,"button",13),n.Uc(27,o_,3,3,"button",14),n.Uc(28,c_,3,3,"button",14),n.Uc(29,l_,3,3,"button",15),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(3),n.Xc(n.sc(4,17,"group.window.title")),n.Kb(6),n.yc("disabled",1!==e.currentStep),n.Kb(1),n.Xc(n.sc(11,19,"group.create.steplabel.1")),n.Kb(2),n.yc("disabled",2!==e.currentStep),n.Kb(1),n.Xc(n.sc(14,21,"group.create.steplabel.2")),n.Kb(2),n.yc("disabled",3!==e.currentStep),n.Kb(1),n.Xc(n.sc(17,23,"group.create.steplabel.3")),n.Kb(2),n.yc("disabled",4!==e.currentStep),n.Kb(1),n.Xc(n.sc(20,25,"group.create.steplabel.4")),n.Kb(2),n.yc("ngIf",1===e.currentStep),n.Kb(1),n.yc("ngIf",2===e.currentStep),n.Kb(1),n.yc("ngIf",3===e.currentStep),n.Kb(1),n.yc("ngIf",4===e.currentStep),n.Kb(2),n.yc("ngIf",1===e.currentStep),n.Kb(1),n.yc("ngIf",e.currentStep>1),n.Kb(1),n.yc("ngIf",e.currentStep<4),n.Kb(1),n.yc("ngIf",4===e.currentStep))},encapsulation:2}),t})(),u_=(()=>{class t{constructor(t,e,s){this._notificationService=t,this._modalService=e,this._ngZone=s,this._messages=[],this._badgeBases=new Map,this._badgeSymbols=new Map,this._badgePartColors=new Map,this._groupColorsA=new Map,this._groupColorsB=new Map,this._leavingGroupId=0,this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.registerMessages(),u.a.instance.addLinkEventTracker(this)}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),u.a.instance.roomSessionManager.events.addEventListener(M.a.ENDED,this.onRoomSessionEvent),this._messages=[new Ee.a(this.onRoomInfoEvent.bind(this)),new Uu.a(this.onGroupInformationEvent.bind(this)),new Du.a(this.onGroupMembersEvent.bind(this)),new wu.a(this.onGroupConfirmMemberRemoveEvent.bind(this)),new Mu.a(this.onGroupBuyDataEvent.bind(this)),new Au.a(this.onGroupBadgePartsEvent.bind(this)),new ro.a(this.onCatalogPurchaseEvent.bind(this)),new Nu.a(this.onGroupSettingsEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(u.a.instance.roomSessionManager.events.removeEventListener(M.a.ENDED,this.onRoomSessionEvent),this._messages&&this._messages.length){for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]}})}onRoomSessionEvent(t){if(t)switch(t.type){case M.a.ENDED:return void this._ngZone.run(()=>{this._roomInfoComponent.clear()})}}onRoomInfoEvent(t){if(!t)return;const e=t.getParser();e&&(this._ngZone.run(()=>{this._roomInfoComponent.groupId=e.data.habboGroupId,this._roomInfoComponent.groupName=e.data.groupName,this._roomInfoComponent.groupBadgeCode=e.data.groupBadgeCode,this._roomInfoComponent.groupMember=e.isGroupMember}),u.a.instance.communication.connection.send(new Vu.a(e.data.habboGroupId,!1)))}onGroupInformationEvent(t){if(!t)return;const e=t.getParser();e&&((e.flag||e.id===this._groupInfoComponent.groupId)&&this._ngZone.run(()=>{this._groupInfoComponent.groupId=e.id,this._groupInfoComponent.groupName=e.title,this._groupInfoComponent.groupBadgeCode=e.badge,this._groupInfoComponent.groupDescription=e.description,this._groupInfoComponent.groupType=e.type,this._groupInfoComponent.groupMembershipType=e.membershipType,this._groupInfoComponent.groupCreationDate=e.createdAt,this._groupInfoComponent.groupOwnerName=e.ownerName,this._groupInfoComponent.groupMembersCount=e.membersCount,this._groupInfoComponent.groupMembershipRequestsCount=e.pendingRequestsCount,this._groupInfoComponent.groupHomeRoomId=e.roomId,this._groupInfoComponent.isOwner=e.isOwner}),this._roomInfoComponent.groupId===e.id&&this._ngZone.run(()=>{this._roomInfoComponent.groupType=e.type,this._roomInfoComponent.groupMembershipType=e.membershipType}))}onGroupMembersEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._groupMembersComponent.groupId=e.groupId,this._groupMembersComponent.groupName=e.groupTitle,this._groupMembersComponent.groupBadgeCode=e.badge,this._groupMembersComponent.totalMembersCount=e.totalMembersCount,this._groupMembersComponent.result=e.result,this._groupMembersComponent.admin=e.admin,this._groupMembersComponent.pageSize=e.pageSize,this._groupMembersComponent.pageIndex=e.pageIndex,this._groupMembersComponent.level=e.level.toString()})}onGroupConfirmMemberRemoveEvent(t){if(!t)return;const e=t.getParser();if(!e)return;let s=[];if(e.userId===u.a.instance.sessionDataManager.userId)s=this._groupInfoComponent.confirmLeave();else{if(!this._groupMembersComponent.admin)return;s=this._groupMembersComponent.confirmRemove(e.userId,e.furnitureCount)}this._notificationService.alertWithChoices(s[1],s[2],s[0])}onGroupBuyDataEvent(t){if(!t)return;const e=t.getParser();if(e&&this._groupCreatorModal){const t=this._groupCreatorModal.componentInstance;t&&this._ngZone.run(()=>{t.groupCost=e.groupCost,t.availableRooms=e.availableRooms})}}onGroupBadgePartsEvent(t){if(!t)return;const e=t.getParser();e&&(this._badgeBases=e.bases,this._badgeSymbols=e.symbols,this._badgePartColors=e.partColors,this._groupColorsA=e.colorsA,this._groupColorsB=e.colorsB)}onCatalogPurchaseEvent(t){t&&t.getParser()&&this._ngZone.run(()=>{this.closeGroupCreator()})}onGroupSettingsEvent(t){if(!t)return;const e=t.getParser();e&&this._groupManagerComponent&&(this._groupManagerComponent.load(e),u.a.instance.communication.connection.send(new xu.a))}linkReceived(t){const e=t.split("/");if(!(e.length<2))switch(e[1]){case"create":return void this.openGroupCreator();case"manage":if(!e[2])return;return void this.requestGroupSettings(parseInt(e[2]));case"info":if(!e[2])return;return void this.getInfo(parseInt(e[2]))}}getInfo(t){u.a.instance.communication.connection.send(new Vu.a(t,!0))}getMembers(t,e,s,n){u.a.instance.communication.connection.send(new Ku.a(t,e,s,n))}join(t){0===this._roomInfoComponent.groupType&&this._ngZone.run(()=>{this._roomInfoComponent.groupMember=!0}),u.a.instance.communication.connection.send(new Gu.a(t))}giveAdmin(t,e){u.a.instance.communication.connection.send(new Lu.a(t,e))}takeAdmin(t,e){u.a.instance.communication.connection.send(new Pu.a(t,e))}acceptMembership(t,e){u.a.instance.communication.connection.send(new Hu.a(t,e))}declineMembership(t,e){u.a.instance.communication.connection.send(new ju.a(t,e))}removeMember(t,e){u.a.instance.communication.connection.send(new Wu.a(t,e))}deleteGroup(t){u.a.instance.communication.connection.send(new Bu.a(t))}openProfile(t){u.a.instance.communication.connection.send(new Qu.a(t))}save(t){u.a.instance.communication.connection.send(new qu.a(t.id,t.name,t.description)),u.a.instance.communication.connection.send(new zu.a(t.id,t.currentBadgeArray)),u.a.instance.communication.connection.send(new Yu.a(t.id,t.colorA,t.colorB)),u.a.instance.communication.connection.send(new Xu.a(t.id,t.state,t.canMembersDecorate?0:1))}buyGroup(t){u.a.instance.communication.connection.send(new Fu.a(t.name,t.description,parseInt(t.roomId),t.colorA,t.colorB,t.currentBadgeArray))}openGroupCreator(){this._groupCreatorModal||(this._groupCreatorModal=this._modalService.open(h_,{backdrop:"static",centered:!0,keyboard:!1}),this._groupCreatorModal&&this._groupCreatorModal.result.then(()=>this._groupCreatorModal=null),u.a.instance.communication.connection.send(new ku.a),u.a.instance.communication.connection.send(new xu.a))}closeGroupCreator(){this._groupCreatorModal&&(this._groupCreatorModal.close(),this._groupCreatorModal=null)}requestGroupSettings(t){u.a.instance.communication.connection.send(new Zu.a(t))}get eventUrlPrefix(){return"groups"}set groupRoomInfoComponent(t){this._roomInfoComponent=t}set groupInfoComponent(t){this._groupInfoComponent=t}set groupMembersComponent(t){this._groupMembersComponent=t}set groupManagerComponent(t){this._groupManagerComponent=t}get badgeBases(){return this._badgeBases}get badgeSymbols(){return this._badgeSymbols}get badgePartColors(){return this._badgePartColors}get groupColorsA(){return this._groupColorsA}get groupColorsB(){return this._groupColorsB}}return t.\u0275fac=function(e){return new(e||t)(n.kc(es),n.kc(t_.h),n.kc(n.H))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})();function __(t,e){if(1&t){const t=n.ec();n.dc(0,"button",15),n.nc("click",function(){return n.Lc(t),n.qc(3).join()}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"group.join")))}function d_(t,e){if(1&t){const t=n.ec();n.dc(0,"button",15),n.nc("click",function(){return n.Lc(t),n.qc(4).join()}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"group.requestmembership")))}function g_(t,e){1&t&&(n.dc(0,"button",17),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"group.membershippending")))}function m_(t,e){if(1&t&&(n.dc(0,"div"),n.Uc(1,d_,3,3,"button",13),n.Uc(2,g_,3,3,"button",16),n.cc()),2&t){const t=n.qc(3);n.Kb(1),n.yc("ngIf",0===t.groupMembershipType),n.Kb(1),n.yc("ngIf",2===t.groupMembershipType)}}function p_(t,e){if(1&t){const t=n.ec();n.dc(0,"div",10),n.dc(1,"div",4),n.nc("click",function(){return n.Lc(t),n.qc(2).openInfo()}),n.Zb(2,"nitro-badge",11),n.dc(3,"div",12),n.Wc(4),n.cc(),n.cc(),n.Uc(5,__,3,3,"button",13),n.Uc(6,m_,3,2,"div",14),n.cc()}if(2&t){const t=n.qc(2);n.Kb(2),n.yc("badge",t.groupBadgeCode)("isGroup",!0),n.Kb(2),n.Xc(t.groupName),n.Kb(1),n.yc("ngIf",0===t.groupType&&0===t.groupMembershipType),n.Kb(1),n.yc("ngIf",1===t.groupType)}}function f_(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"div",3),n.dc(3,"div",4),n.nc("click",function(){return n.Lc(t),n.qc().toggleOpen()}),n.dc(4,"div",5),n.Zb(5,"i",6),n.Wc(6),n.rc(7,"translate"),n.cc(),n.dc(8,"div",7),n.Zb(9,"i",8),n.cc(),n.cc(),n.Uc(10,p_,7,5,"div",9),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(6),n.Xc(n.sc(7,3,"group.homeroominfo.title")),n.Kb(3),n.yc("ngClass",t.open?"fa-chevron-down":"fa-chevron-left"),n.Kb(1),n.yc("ngIf",t.open)}}let E_=(()=>{class t{constructor(t){this._groupService=t,this._groupService.groupRoomInfoComponent=this,this._open=!1,this.clear()}clear(){this._groupId=0,this._groupName=null,this._groupBadgeCode=null,this._groupType=-1,this._groupMembershipType=-1,this._groupMember=!1}toggleOpen(){this._open=!this._open}join(){this._groupId&&0===this._groupMembershipType&&this._groupService.join(this.groupId)}openInfo(){this._groupService.getInfo(this._groupId)}get visible(){return this._groupId>0}get open(){return this._open}get groupId(){return this._groupId}set groupId(t){this._groupId=t}get groupName(){return this._groupName}set groupName(t){this._groupName=t}get groupBadgeCode(){return this._groupBadgeCode}set groupBadgeCode(t){this._groupBadgeCode=t}get groupType(){return this._groupType}set groupType(t){this._groupType=t}get groupMembershipType(){return this._groupMembershipType}set groupMembershipType(t){this._groupMembershipType=t}get isGroupMember(){return this._groupMember}set groupMember(t){this._groupMember=t}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(u_))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-group-room-info-component"]],decls:1,vars:1,consts:[["class","nitro-group-room-info-component mb-2 float-right",4,"ngIf"],[1,"nitro-group-room-info-component","mb-2","float-right"],[1,"card","w-100"],[1,"d-flex","flex-column","p-2","w-100"],[1,"d-flex","flex-row","justify-content-between","w-100",3,"click"],[1,"w-100"],[1,"fas","fa-users","mr-2"],[1,"toggler"],[1,"fas",3,"ngClass"],["class","d-flex flex-column w-100 mt-2",4,"ngIf"],[1,"d-flex","flex-column","w-100","mt-2"],[1,"mr-2",3,"badge","isGroup"],[1,"group-name","w-100"],["class","btn btn-success btn-block btn-sm mt-2",3,"click",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-success","btn-block","btn-sm","mt-2",3,"click"],["class","btn btn-primary disabled btn-block btn-sm mt-2","disabled","",4,"ngIf"],["disabled","",1,"btn","btn-primary","disabled","btn-block","btn-sm","mt-2"]],template:function(t,e){1&t&&n.Uc(0,f_,11,5,"div",0),2&t&&n.yc("ngIf",e.visible)},directives:[m.n,m.l,cl],pipes:[ui],encapsulation:2}),t})(),S_=(()=>{class t{constructor(t){this._notificationService=t,this.type=null,this.parameters=null,this.removing=!1}hide(){this.removing=!0,setTimeout(()=>this.close(),300)}close(){this._notificationService.closeNotification(this)}interpolate(t,e=null){e||(e=new RegExp(/%(.*?)%/g));const s=t.match(e);if(s&&s.length)for(const n of s){const e=this.parameters.get(this.removeInterpolateKey(n));e&&(t=t.replace(n,e))}return t}removeInterpolateKey(t){return t.replace(/%/g,"")}getDefaultImage(){const t=this.notificationLocaleKey+".image";let e=u.a.instance.getLocalization(t)||null;return e===t?(e=u.a.instance.getConfiguration("image.library.notifications.url"),e=e.replace("%image%",this.type),e):(e&&e.length&&(e=this.interpolate(e),e=u.a.instance.core.configuration.interpolate(e)),e)}getDefaultLinkTitle(){let t=u.a.instance.getLocalization(this.notificationLocaleKey+".linkTitle")||null;return t&&t.length&&(t=this.interpolate(t)),t}getDefaultLinkUrl(){let t=u.a.instance.getLocalization(this.notificationLocaleKey+".linkUrl")||null;return t&&t.length&&(t=this.interpolate(t)),t}getDefaultMessage(){let t=u.a.instance.getLocalization(this.notificationLocaleKey+".message")||null;return t&&t.length&&(t=this.interpolate(t)),t}getDefaultTitle(){let t=u.a.instance.getLocalization(this.notificationLocaleKey+".title")||null;return t&&t.length&&(t=this.interpolate(t)),t}get notificationLocaleKey(){return"notification."+this.type}get timeout(){return 0}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(es))},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();const b_=function(t){return{"background-image":t}};function v_(t,e){if(1&t&&n.Zb(0,"div",3),2&t){const t=n.qc();n.yc("ngStyle",n.Cc(1,b_,"url("+t.getDefaultImage()+")"))}}let I_=(()=>{class t extends S_{clickNotification(){this.visitUrl(),this.hide()}visitUrl(){const t=this.getDefaultLinkUrl();if(!t||!t.length)return;const e=t.split(":");!e||e.length<2||("event"===e[0]?u.a.instance.createLinkEvent(e[1]):window.open(t,"_blank"))}getDefaultImage(){let t=this.parameters.get("image")||null;return t?(t=u.a.instance.core.configuration.interpolate(t),t):super.getDefaultImage()}getDefaultLinkTitle(){let t=this.parameters.get("linkTitle")||null;return t?(t=u.a.instance.getLocalization(t),t):super.getDefaultLinkTitle()}getDefaultLinkUrl(){return this.parameters.get("linkUrl")||super.getDefaultLinkUrl()}getDefaultMessage(){let t=this.parameters.get("message")||null;return t?(t=u.a.instance.getLocalization(t),t):super.getDefaultMessage()}getDefaultTitle(){let t=this.parameters.get("title")||null;return t?(t=u.a.instance.getLocalization(t),t):super.getDefaultTitle()}get timeout(){return 5e3}}return t.\u0275fac=function(e){return R_(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:3,vars:4,consts:[[1,"d-flex","justify-content-center","align-items-center","nitro-notification-bubble","bg-primary","rounded","border","border-black","shadow",3,"click"],[1,"bubble-message","text-center","w-100","mb-0",3,"innerHTML"],["class","bubble-image bg-secondary rounded",3,"ngStyle",4,"ngIf"],[1,"bubble-image","bg-secondary","rounded",3,"ngStyle"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.nc("click",function(){return e.clickNotification()}),n.Zb(1,"p",1),n.Uc(2,v_,1,3,"div",2),n.cc()),2&t&&(n.Qb("removing",e.removing),n.Kb(1),n.yc("innerHTML",e.getDefaultMessage(),n.Mc),n.Kb(1),n.yc("ngIf",e.getDefaultImage()))},directives:[m.n,m.o],encapsulation:2}),t})();const R_=n.fc(I_),T_=function(t){return{"background-image":t}};function y_(t,e){if(1&t&&n.Zb(0,"div",7),2&t){const t=n.qc();n.yc("ngStyle",n.Cc(1,T_,"url("+t.getDefaultImage()+")"))}}let O_=(()=>{class t extends I_{get timeout(){return 0}}return t.\u0275fac=function(e){return C_(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:10,vars:8,consts:[[1,"d-flex","flex-column","justify-content-center","align-items-center","nitro-notification-bubble","bubble-event","bg-primary","rounded","border","shadow"],[1,"d-flex","w-100"],[1,"bubble-message","text-center","w-100","mb-0",3,"innerHTML"],["class","bubble-image bg-secondary rounded",3,"ngStyle",4,"ngIf"],[1,"d-flex","btn-group","w-100","mt-2"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["type","button",1,"btn","btn-sm","btn-success",3,"click"],[1,"bubble-image","bg-secondary","rounded",3,"ngStyle"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.Zb(2,"p",2),n.Uc(3,y_,1,3,"div",3),n.cc(),n.dc(4,"div",4),n.dc(5,"button",5),n.nc("click",function(){return e.hide()}),n.Wc(6),n.rc(7,"translate"),n.cc(),n.dc(8,"button",6),n.nc("click",function(){return e.clickNotification()}),n.Wc(9),n.cc(),n.cc(),n.cc()),2&t&&(n.Qb("removing",e.removing),n.Kb(2),n.yc("innerHTML",e.getDefaultMessage(),n.Mc),n.Kb(1),n.yc("ngIf",e.getDefaultImage()),n.Kb(3),n.Xc(n.sc(7,6,"alert.close.button")),n.Kb(3),n.Xc(e.getDefaultLinkTitle()))},directives:[m.n,m.o],pipes:[ui],encapsulation:2}),t})();const C_=n.fc(O_),A_=["notificationsContainer"];function M_(t,e){}let w_=(()=>{class t{constructor(t,e,s){this._notificationService=t,this._componentFactoryResolver=e,this._ngZone=s,this._notifications=new Map}ngOnInit(){this._notificationService.notificationCenter=this}ngOnDestroy(){this.closeAllNotifications(),this._notificationService.notificationCenter=null}displayNotification(t,e){let s=null;switch(t){case"hotel.event":s=O_;break;default:s=I_}const n=this.buildNotification(s);return n?(n.type=t,n.parameters=e,n.timeout>0&&setTimeout(()=>n&&n.hide(),n.timeout),n):null}buildNotification(t){let e=null;return this._ngZone.run(()=>{e=this.createNotificationComponent(t)}),e||null}createNotificationComponent(t){if(!t)return null;let e=null;const s=this._componentFactoryResolver.resolveComponentFactory(t);let n=null;return s&&(n=this.notificationsContainer.createComponent(s),this._notifications.set(n.instance,n)),e=n.instance,e}closeNotification(t){if(!t)return;const e=this._notifications.get(t);e&&(this._notifications.delete(t),this.removeNotificationView(e.hostView))}closeAllNotifications(){for(const t of this._notifications.keys())this.closeNotification(t)}removeNotificationView(t){if(!t)return;const e=this.notificationsContainer.indexOf(t);-1!==e&&this.notificationsContainer.remove(e)}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(es),n.Yb(n.m),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-notification-center-component"]],viewQuery:function(t,e){if(1&t&&n.cd(A_,1,n.Z),2&t){let t;n.Hc(t=n.oc())&&(e.notificationsContainer=t.first)}},decls:3,vars:0,consts:[[1,"d-flex","flex-column-reverse"],["notificationsContainer",""]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Uc(1,M_,0,0,"ng-template",null,1,n.Vc),n.cc())},encapsulation:2}),t})();var U_=s("tVIE"),D_=s("a9Mt"),N_=s("qZ7S"),L_=s("UufK");class P_{constructor(t){this._name=t,this._achievements=[]}get name(){return this._name}set name(t){this._name=t}get achievements(){return this._achievements}set achievements(t){this._achievements=t}}let x_=(()=>{class t{constructor(t,e){this._settingsService=t,this._ngZone=e,this._messages=[],this._categories=[],this._selectedCategory=null,this._achievementScore=0,this._isInitalized=!1,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new D_.a(this.onAchievementsMessageEvent.bind(this)),new N_.a(this.onAchievementsScoreEvent.bind(this)),new U_.a(this.onAchievementEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onAchievementsScoreEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this._achievementScore=e.score)}onAchievementsMessageEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=[];for(const n of e.achievements){if(!n)continue;let t=null;for(const e of s)if(e&&e.name===n.category){t=e;break}t||(t=new P_(n.category),s.push(t)),t.achievements.push(n)}this._ngZone.run(()=>{this._categories=s,this._selectedCategory=this._categories[0],this._isInitalized=!0})}onAchievementEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=e.achievement;s&&this._ngZone.run(()=>{for(const t of this._categories){if(!t||t.name!==s.category)continue;let e=!1;for(const n of t.achievements)if(n&&n.achievementId===s.achievementId){e=!0,n.progress!==s.progress&&(n.reset(s),this.isIgnoredAchievement(n)||this._selectedCategory!==t&&n.unseen++);break}if(e)break}})}isIgnoredAchievement(t){if(!t)return!1;const e=u.a.instance.getConfiguration("achievements.unseen.ignored"),s=t.badgeId.replace(/[0-9]/g,"");return e.indexOf(s)>=0}loadAchievements(){u.a.instance.communication.connection.send(new L_.a)}get categories(){return this._categories}get selectedCategory(){return this._selectedCategory}set selectedCategory(t){this._selectedCategory=t}get achievementScore(){return this._achievementScore}get isInitalized(){return this._isInitalized}get unseenCount(){let t=0;for(const e of this._categories)if(e)for(const s of e.achievements)s&&(t+=s.unseen);return t}}return t.\u0275fac=function(e){return new(e||t)(n.kc(g),n.kc(n.H))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})();const F_=["progressBar"],k_=["nitro-achievements-category-list-component",""];function W_(t,e){if(1&t&&(n.dc(0,"div",13),n.Wc(1),n.cc()),2&t){const t=n.qc().$implicit,e=n.qc();n.Kb(1),n.Xc(e.getUnseenCount(t))}}const B_=function(t){return[t]},V_=function(t){return{"background-image":t}};function G_(t,e){if(1&t){const t=n.ec();n.dc(0,"div",9),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().selectCategory(s)}),n.dc(1,"div",10),n.Uc(2,W_,2,1,"div",11),n.dc(3,"div",12),n.Wc(4),n.cc(),n.cc(),n.cc()}if(2&t){const t=e.$implicit,s=n.qc();n.Kb(1),n.yc("ngClass",n.Cc(4,B_,s.selectedCategory===t?"bg-primary":"bg-secondary"))("ngStyle",n.Cc(6,V_,"url("+s.getCategoryImage(t.name,t.achievements)+")")),n.Kb(1),n.yc("ngIf",s.getUnseenCount(t)),n.Kb(2),n.Xc(s.getCategoryProgress(t.achievements))}}const K_=function(t){return{width:t}};let H_=(()=>{class t{constructor(t,e,s){this._settingsService=t,this._achivementsService=e,this._ngZone=s,this.visible=!1}selectCategory(t){this._achivementsService.selectedCategory=t}getProgressNumbers(){let t=0,e=0;for(const s of this.categories)if(s)for(const n of s.achievements)n&&(t+=n._Str_7518?n.level:n.level-1,e+=n.totalLevels);return[t,e]}getProgressPercentageString(){const[t,e]=this.getProgressNumbers();return Math.trunc(t/e*100)+"%"}getProgressString(){const[t,e]=this.getProgressNumbers();return t+"/"+e}getCategoryImage(t,e,s=!1){if(s)return u.a.instance.getConfiguration("achievements.images.url",u.a.instance.core.configuration.getValue("image.library.url")+`quests/achcategory_${t}.png`).toString().replace("%image%",t);let n=0;for(const r of e)n+=r._Str_7518?r.level:r.level-1;const i=n>0?"active":"inactive";return u.a.instance.getConfiguration("achievements.images.url",u.a.instance.core.configuration.getValue("image.library.url")+`quests/achcategory_${t}_${i}.png`).toString().replace("%image%",`achcategory_${t}_${i}`)}getCategoryProgress(t){let e=0,s=0;for(const n of t)n&&(n._Str_7518&&(e=e+1+n.level),s+=n.totalLevels);return e+"/"+s}getUnseenCount(t){let e=0;if(t)for(const s of t.achievements)s&&(e+=s.unseen);return e}get categories(){return this._achivementsService.categories}get selectedCategory(){return this._achivementsService.selectedCategory}get achievementScore(){return this._achivementsService.achievementScore}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(g),n.Yb(x_),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-achievements-category-list-component",""]],viewQuery:function(t,e){if(1&t&&n.cd(F_,1),2&t){let t;n.Hc(t=n.oc())&&(e.progressBar=t.first)}},inputs:{visible:"visible"},attrs:k_,decls:12,vars:10,consts:[[1,"grid-container","achievement-category-container","w-100","mb-2"],[1,"grid-items","grid-3"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","w-100"],[1,"achievement-progress-bar","bg-secondary","rounded","p-1","position-relative"],[1,"achievement-progress-bar-inner","bg-success","rounded","py-3",3,"ngStyle"],[1,"achievement-progress-bar-content","text-center","d-flex","justify-content-center"],[1,"align-self-center"],[1,"text-center","bg-secondary","rounded","px-2","mt-2"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],[1,"detail-info","has-image","rounded",3,"ngClass","ngStyle"],["class","position-absolute btn btn-sm btn-primary px-1 py-0 rounded count",4,"ngIf"],[1,"achievement-progress"],[1,"position-absolute","btn","btn-sm","btn-primary","px-1","py-0","rounded","count"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.Uc(2,G_,5,8,"div",2),n.cc(),n.cc(),n.dc(3,"div",3),n.dc(4,"div",4),n.Zb(5,"div",5),n.dc(6,"div",6),n.dc(7,"span",7),n.Wc(8),n.cc(),n.cc(),n.cc(),n.dc(9,"div",8),n.Wc(10),n.rc(11,"translate"),n.cc(),n.cc()),2&t&&(n.Kb(2),n.yc("ngForOf",e.categories),n.Kb(3),n.yc("ngStyle",n.Cc(8,K_,e.getProgressPercentageString())),n.Kb(3),n.Xc(e.getProgressString()),n.Kb(2),n.Xc(n.uc(11,4,"achievements.categories.score","score",e.achievementScore)))},directives:[m.m,m.o,m.l,m.n],pipes:[ui],encapsulation:2}),t})();class j_{constructor(t){this.badgeId=t,this._base="",this._level=1,this.parseText()}parseText(){let t=this.badgeId.length-1;for(;t>0&&this.isNumber(this.badgeId.charAt(t));)t--;this._base=this.badgeId.substr(0,t+1);const e=this.badgeId.substr(t+1,this.badgeId.length);e&&""!=e&&(this._level=Number.parseInt(e))}isNumber(t){const e=t.charCodeAt(0);return e>=49&&e<=57}set level(t){this._level=Math.max(1,t)}get level(){return this._level}get getBadgeId(){return this._base+this._level}get base(){return this._base}}const z_=["nitro-achievements-category-component",""];function Y_(t,e){if(1&t&&(n.dc(0,"div",8),n.Wc(1),n.cc()),2&t){const t=n.qc().$implicit;n.Kb(1),n.Xc(t.count)}}const q_=function(t,e){return[t,e]},X_=function(t){return{"background-image":t}};function Z_(t,e){if(1&t){const t=n.ec();n.dc(0,"div",5),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().selectAchievement(s)}),n.dc(1,"div",6),n.Uc(2,Y_,2,1,"div",7),n.cc(),n.cc()}if(2&t){const t=e.$implicit,s=n.qc();n.Kb(1),n.yc("ngClass",n.Dc(3,q_,s.selectedAchievement===t?"bg-primary":"bg-secondary",t&&t._Str_10438?"":"greyscale"))("ngStyle",n.Cc(6,X_,"url("+s.getBadgeImageUrl(t)+")")),n.Kb(1),n.yc("ngIf",t.count)}}function Q_(t,e){if(1&t&&(n.dc(0,"span",19),n.Wc(1),n.rc(2,"translate"),n.dc(3,"b"),n.Wc(4),n.cc(),n.Zb(5,"img",20),n.cc()),2&t){const t=n.qc(2);n.Kb(1),n.Yc("",n.sc(2,3,"achievements.details.reward")," "),n.Kb(3),n.Xc(t.selectedAchievement.rewardAmount),n.Kb(1),n.yc("src",t.getCurrencyUrl(t.selectedAchievement.rewardType),n.Nc)}}const J_=function(t){return{width:t}};function $_(t,e){if(1&t&&(n.dc(0,"div",21),n.Zb(1,"div",22),n.dc(2,"div",23),n.dc(3,"span",24),n.Wc(4),n.cc(),n.cc(),n.cc()),2&t){const t=n.qc(2);n.Kb(1),n.yc("ngStyle",n.Cc(2,J_,t.getProgress(t.selectedAchievement))),n.Kb(3),n.Xc(t.getProgress(t.selectedAchievement,!0))}}const td=function(t){return[t]};function ed(t,e){if(1&t&&(n.dc(0,"div",9),n.dc(1,"div",10),n.dc(2,"div",11),n.Zb(3,"img",12),n.cc(),n.dc(4,"span",13),n.Wc(5),n.cc(),n.cc(),n.dc(6,"div",14),n.dc(7,"span",15),n.Wc(8),n.cc(),n.dc(9,"span",16),n.Wc(10),n.cc(),n.Uc(11,Q_,6,5,"span",17),n.Uc(12,$_,5,4,"div",18),n.cc(),n.cc()),2&t){const t=n.qc();n.Kb(3),n.yc("ngClass",n.Cc(7,td,t.selectedAchievement._Str_10438?"":"greyscale"))("src",t.getBadgeImageUrl(t.selectedAchievement),n.Nc),n.Kb(2),n.Xc(t.getBadgeLevelString(t.selectedAchievement)),n.Kb(3),n.Xc(t.getBadgeText(t.selectedAchievement)),n.Kb(2),n.Xc(t.getBadgeText(t.selectedAchievement,!0)),n.Kb(1),n.yc("ngIf",!t.selectedAchievement._Str_7518),n.Kb(1),n.yc("ngIf",!t.selectedAchievement._Str_7518)}}let sd=(()=>{class t{constructor(t){this._achivementsService=t,this.category=null,this._selectedAchievement=null}ngOnChanges(t){const e=t.category.currentValue;e&&e!==t.category.previousValue&&(this._selectedAchievement=null)}selectAchievement(t){t.unseen=0,this._selectedAchievement=t}getAchievedBadgeId(t){return t._Str_7518?t.badgeId:u.a.instance.localization.getBadgeBaseAndLevel(t.badgeId)}getBadgeText(t,e=!1){const s=this.getAchievedBadgeId(t),n=new j_(s);let i;return i=this.getText(e?["badge_desc_"+s,"badge_desc_"+n.base]:["badge_name_"+s,"badge_name_"+n.base]),i.replace("%roman%",this.getRomanNumeral(n.level)).replace("%limit%",t._Str_24142.toString())}getText(t){let e="",s=0;for(;s<t.length;){const n=t[s];if(e=u.a.instance.getLocalization(n),e!==n)return e;s++}return""}getProgress(t,e=!1){if(t)return e?t.progress+"/"+t.toNextProgress:Math.trunc(t.progress/t.toNextProgress*100)+"%"}getBadgeLevelString(t){if(!t)return;let e=u.a.instance.getLocalization("achievements.details.level");return e=e.replace("%level%",Math.max(1,t.level-1).toString()),e=e.replace("%limit%",t.totalLevels.toString()),e}getRomanNumeral(t){return u.a.instance.localization.getRomanNumeral(t)}getBadgeImageUrl(t){let e=t.badgeId;return t.totalLevels>1&&(e=e.replace(/[0-9]/g,""),e+=t.level-1>0?t.level-1:t.level),u.a.instance.sessionDataManager.getBadgeUrl(e)}getCurrencyUrl(t){return u.a.instance.getConfiguration("currency.asset.icon.url").replace("%type%",t.toString())}get selectedAchievement(){return this._selectedAchievement}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(x_))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-achievements-category-component",""]],inputs:{category:"category"},features:[n.Ib],attrs:z_,decls:7,vars:5,consts:[[1,"text-center","bg-secondary","rounded","px-2","mb-2"],[1,"grid-container","w-100","mb-2",2,"min-height","156px","max-height","156px","height","156px"],[1,"grid-items","grid-5"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],["class","bg-secondary mb-auto w-100 p-1 rounded d-flex flex-row",4,"ngIf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],[1,"detail-info","has-image","rounded",3,"ngClass","ngStyle"],["class","position-absolute btn btn-sm btn-danger px-1 py-0 rounded count",4,"ngIf"],[1,"position-absolute","btn","btn-sm","btn-danger","px-1","py-0","rounded","count"],[1,"bg-secondary","mb-auto","w-100","p-1","rounded","d-flex","flex-row"],[1,"text-center"],[1,"badge_preview","flex-shrink-0","justify-content-center","d-flex"],["image-placeholder","",1,"badge_preview_image","align-self-center",3,"ngClass","src"],[1,"font-weight-bolder","text-center","small"],[1,"badge_info","w-100","small"],[1,"mb-1","font-weight-bolder"],[1,"mb-1","d-block",2,"min-height","42px"],["class","mb-1 d-block",4,"ngIf"],["class","achievement-progress-bar bg-primary rounded p-1 position-relative",4,"ngIf"],[1,"mb-1","d-block"],["image-placeholder","",1,"pl-1",3,"src"],[1,"achievement-progress-bar","bg-primary","rounded","p-1","position-relative"],[1,"achievement-progress-bar-inner","bg-success","rounded","py-3",3,"ngStyle"],[1,"achievement-progress-bar-content","text-center","d-flex","justify-content-center"],[1,"align-self-center"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Wc(1),n.rc(2,"translate"),n.cc(),n.dc(3,"perfect-scrollbar",1),n.dc(4,"div",2),n.Uc(5,Z_,3,8,"div",3),n.cc(),n.cc(),n.Uc(6,ed,13,9,"div",4)),2&t&&(n.Kb(1),n.Xc(n.sc(2,3,"quests."+e.category.name+".name")),n.Kb(4),n.yc("ngForOf",e.category.achievements),n.Kb(1),n.yc("ngIf",e.selectedAchievement))},directives:[Hr.b,m.m,m.n,m.l,m.o,fa],pipes:[ui],encapsulation:2}),t})();function nd(t,e){if(1&t&&n.Zb(0,"div",9),2&t){const t=n.qc(2);n.yc("category",t.selectedCategory)}}function id(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"h6",3),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",4),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(6,"i",5),n.cc(),n.cc(),n.dc(7,"div",6),n.Zb(8,"div",7),n.Uc(9,nd,1,1,"div",8),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(3),n.Xc(n.sc(4,2,"inventory.achievements")),n.Kb(6),n.yc("ngIf",t.selectedCategory)}}let rd=(()=>{class t{constructor(t,e,s){this._settingsService=t,this._achivementsService=e,this._ngZone=s,this.visible=!1}ngOnChanges(t){const e=t.visible.currentValue;e&&e!==(t.visible.previousValue||!1)&&this.prepareAchievements()}prepareAchievements(){this._achivementsService.isInitalized||this._achivementsService.loadAchievements()}hide(){this._settingsService.hideAchievements()}get selectedCategory(){return this._achivementsService.selectedCategory}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(g),n.Yb(x_),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-achievements-main-component"]],inputs:{visible:"visible"},features:[n.Ib],decls:1,vars:1,consts:[["class","nitro-achievements card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-achievements","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-3"],["nitro-achievements-category-list-component","",1,"col-6","d-flex","flex-column"],["class","col-6 d-flex flex-column","nitro-achievements-category-component","",3,"category",4,"ngIf"],["nitro-achievements-category-component","",1,"col-6","d-flex","flex-column",3,"category"]],template:function(t,e){1&t&&n.Uc(0,id,10,4,"div",0),2&t&&n.yc("ngIf",e.visible)},directives:[m.n,Dr,Kr,H_,sd],pipes:[ui],encapsulation:2}),t})();var ad=s("7sb4");let od=(()=>{class t{constructor(t,e){this._notificationService=t,this._ngZone=e,this._component=null,this.registerMessages()}static getReasonAsString(t){switch(t){case 1:return"useless";case 2:return"abusive";default:return"resolved"}}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._messages&&this.unregisterMessages(),this._messages=[new ad.a(this.onCallForHelpResultMessageEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)}unregisterMessages(){if(this._messages&&this._messages.length)for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t)}onCallForHelpResultMessageEvent(e){if(!e)return;const s=e.getParser();if(!s)return;let n=s.messageText;""===n&&(n=u.a.instance.getLocalization("${help.cfh.closed."+t.getReasonAsString(s.resultType)+"}")),this._ngZone.run(()=>this._notificationService.alert(n,"${mod.alert.title}"))}get component(){return this._component}set component(t){this._component=t}}return t.\u0275fac=function(e){return new(e||t)(n.kc(es),n.kc(n.H))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})(),cd=(()=>{class t{constructor(t,e){this._callForHelpService=t,this._ngZone=e}ngOnInit(){this._callForHelpService.component=this}ngOnDestroy(){this._callForHelpService.component=null}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(od),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-call-for-help-main-component"]],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})(),ld=(()=>{class t{openPage(t){}closePage(t){t&&this._component&&this._component.close(t)}closeAll(){this._component&&this._component.closeAll()}get component(){return this._component}set component(t){this._component=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})(),hd=(()=>{class t{constructor(t){this._habbopediaService=t,this.url=""}close(){this._habbopediaService.closePage(this)}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(ld))},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();const ud=["pagesContainer"];function _d(t,e){}let dd=(()=>{class t{constructor(t,e,s){this._habbopediaService=t,this._componentFactoryResolver=e,this._ngZone=s,this._pages=new Map}ngOnInit(){this._habbopediaService.component=this,u.a.instance.addLinkEventTracker(this)}ngOnDestroy(){u.a.instance.removeLinkEventTracker(this),this._habbopediaService.component=null}openPage(t){this.buildPage(hd,t)}buildPage(t,e){const s=this.createComponent(t);return s?(s.url=e,s):null}createComponent(t){if(!t)return null;const e=this._componentFactoryResolver.resolveComponentFactory(t);let s=null;return e&&(s=this.pagesContainer.createComponent(e),this._pages.set(s.instance,s)),s.instance}close(t){if(!t)return;const e=this._pages.get(t);e&&(this._pages.delete(t),this.removeView(e.hostView))}closeAll(){for(const t of this._pages.keys())this.close(t)}removeView(t){if(!t)return;const e=this.pagesContainer.indexOf(t);-1!==e&&this.pagesContainer.remove(e)}linkReceived(t){const e=t.split("/");e.length<2||(e.shift(),this.openPage(e.join("/")))}get eventUrlPrefix(){return"habbopages/"}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(ld),n.Yb(n.m),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-pedia-main-component"]],viewQuery:function(t,e){if(1&t&&n.cd(ud,1,n.Z),2&t){let t;n.Hc(t=n.oc())&&(e.pagesContainer=t.first)}},decls:2,vars:0,consts:[["pagesContainer",""]],template:function(t,e){1&t&&n.Uc(0,_d,0,0,"ng-template",null,0,n.Vc)},encapsulation:2}),t})();var gd=s("sRxW");let md=(()=>{class t{}return t.GENERIC="hd",t.HEAD="head",t.TORSO="torso",t.LEGS="legs",t.HOTLOOKS="hotlooks",t.WARDROBE="wardrobe",t.EFFECTS="effects",t})(),pd=(()=>{class t{constructor(t){this._model=t,this._figureString=null,this._isDisposed=!1}dispose(){this._isDisposed=!0}update(t,e=0,s=4){this._figureString=t}resetFigure(t){}get disposed(){return this._isDisposed}get figureString(){return this._figureString}}return t._Str_9887=4,t})(),fd=(()=>{class t{constructor(){this._gender="M",this._direction=4,this._avatarEffectType=-1,this._direction=pd._Str_9887,this._view=new pd(this)}loadAvatarData(t,e){this._data=new Map,this._colors=new Map,this._gender=e,this.parseFigureString(t),this.updateView()}dispose(){this._data=null,this._colors=null,this._isDisposed=!0,this._view&&(this._view.dispose(),this._view=null)}get disposed(){return this._isDisposed}parseFigureString(t){if(!t)return;const e=t.split(".");if(e&&e.length)for(const s of e){const t=s.split("-");if(!t.length)continue;const e=t[0],n=parseInt(t[1]),i=[];let r=2;for(;r<t.length;)i.push(parseInt(t[r])),r++;i.length||i.push(0),this.savePartSetId(e,n,!1),this.savePartSetColourId(e,i,!1)}}getPartSetId(t){const e=this._data.get(t);return void 0!==e?e:-1}getColourIds(t){const e=this._colors.get(t);return void 0!==e?e:[]}getFigureString(){let t="";const e=[];for(const[n,i]of this._data.entries()){const t=this._colors.get(n);let s=n+"-"+i;if(t&&t.length){let e=0;for(;e<t.length;)s=s+"-"+t[e],e++}e.push(s)}let s=0;for(;s<e.length;)t+=e[s],s<e.length-1&&(t+="."),s++;return t}savePartData(t,e,s,n=!1){this.savePartSetId(t,e,n),this.savePartSetColourId(t,s,n)}savePartSetId(e,s,n=!0){switch(e){case t.FACE:case t.HR:case t.HA:case t.HE:case t.EA:case t.FA:case t.CH:case t.CC:case t.CHEST_ACCESSORIES:case t.CHEST_PRINTS:case t.LG:case t.SH:case t.WA:s>=0?this._data.set(e,s):this._data.delete(e)}n&&this.updateView()}savePartSetColourId(e,s,n=!0){switch(e){case t.FACE:case t.HR:case t.HA:case t.HE:case t.EA:case t.FA:case t.CH:case t.CC:case t.CHEST_ACCESSORIES:case t.CHEST_PRINTS:case t.LG:case t.SH:case t.WA:this._colors.set(e,s)}n&&this.updateView()}getFigureStringWithFace(e,s=!0){let n="";const i=[t.FACE],r=[];for(const o of i){const n=this._colors.get(o);if(void 0===n)continue;let i=this._data.get(o);o===t.FACE&&s&&(i=e);let a=o+"-"+i;if(i>=0){let t=0;for(;t<n.length;)a=a+"-"+n[t],t++}r.push(a)}let a=0;for(;a<r.length;)n+=r[a],a<r.length-1&&(n+="."),a++;return n}updateView(){this._view.update(this.getFigureString(),this._avatarEffectType,this._direction)}get view(){return this._view}get gender(){return this._gender}resetFigure(t){this.updateView()}set avatarEffectType(t){this._avatarEffectType=t}get avatarEffectType(){return this._avatarEffectType}get direction(){return this._direction}set direction(t){this._direction=t,this.updateView()}}return t.M="M",t.F="F",t.U="U",t.H="h",t.STD="std",t._Str_2028="0",t.FACE="hd",t.HR="hr",t.HA="ha",t.HE="he",t.EA="ea",t.FA="fa",t.CC="cc",t.CH="ch",t.CHEST_ACCESSORIES="ca",t.CHEST_PRINTS="cp",t.LG="lg",t.SH="sh",t.WA="wa",t})();class Ed{constructor(t,e,s=!1){this._model=t,this._partColor=e,this._isSelected=!1,this._isDisabledForWearing=s,this._Str_22595()}dispose(){this._model=null,this._partColor=null}get isSelected(){return this._isSelected}set isSelected(t){this._isSelected=t}_Str_22595(){this._isHC=!!this._partColor&&this._partColor.clubLevel>0}get _Str_3420(){return this._partColor}get color(){return z.a.int2rgb(this._partColor._Str_915)}get _Str_14863(){return this._isDisabledForWearing}get isHC(){return this._isHC}}let Sd=(()=>{class t{constructor(t,e,s,n=!0,i=!1){if(this._renderManager=u.a.instance.avatar,this._model=t,this._partSet=e,this._colors=s,this._useColors=n,this._isDisabledForWearing=i,this._thumbContainer=null,this._imageUrl=null,this._maxColorIndex=0,this._isValidFigure=!1,this._isSelected=!1,this._isHC=!1,this._isSellable=!1,this._isClear=!1,this._disposed=!1,this._isInitalized=!1,e){const t=e._Str_806;for(const e of t)this._maxColorIndex=Math.max(this._maxColorIndex,e._Str_827)}}init(){this._isInitalized||(this._isInitalized=!0,this.update())}dispose(){this._disposed||(this._renderManager=null,this._model=null,this._partSet=null,this._colors=null,this._imageUrl=null,this._disposed=!0,this._isInitalized=!1,this._thumbContainer&&(this._thumbContainer.destroy(),this._thumbContainer=null))}update(){this.updateThumbVisualization()}analyzeFigure(){if(!(this._renderManager&&this._model&&this.partSet&&this.partSet._Str_806&&this.partSet._Str_806.length))return!1;const t=this._renderManager.createFigureContainer(this.partSet.type+"-"+this.partSet.id);return this._renderManager.isFigureContainerReady(t)?(this._isValidFigure=!0,!0):(this._renderManager.downloadAvatarFigure(t,this),!1)}renderThumb(){if(!this._renderManager||!this.partSet||!this._model)return null;if(!this._isValidFigure&&!this.analyzeFigure())return null;const e=this.partSet._Str_806.concat().sort(this.sortByDrawOrder),s=new d.Container;for(const n of e){if(!n)continue;let e=null,i=0,r=!1;for(;!r&&i<t.THUMB_DIRECTIONS.length;)e=this._renderManager.getAssetByName(fd.H+"_"+fd.STD+"_"+n.type+"_"+n.id+"_"+t.THUMB_DIRECTIONS[i]+"_"+fd._Str_2028),e&&e.texture?r=!0:i++;if(!r)continue;const a=e.offsetX,o=e.offsetY;let c=null;if(this._useColors&&n._Str_827>0){const t=this._colors[n._Str_827-1];t&&(c=t)}const l=new d.Sprite(e.texture);l.position.set(a,o),c&&(l.tint=c._Str_915),s.addChild(l)}return s}updateThumbVisualization(){if(!this._isInitalized)return;let t=this._thumbContainer;t||(t=this.renderThumb()),t&&(this._partSet?(this._isHC=this._partSet.clubLevel>0,this._isSellable=this._partSet._Str_651):(this._isHC=!1,this._isSellable=!1),this._isDisabledForWearing&&this.setAlpha(t,.2),this._imageUrl=mc.a.generateImageUrl(t))}setAlpha(t,e){return t.alpha=e,t}sortByDrawOrder(e,s){const n=t.DRAW_ORDER.indexOf(e.type),i=t.DRAW_ORDER.indexOf(s.type);return n<i?-1:n>i?1:e.index<s.index?-1:e.index>s.index?1:0}resetFigure(t){this.analyzeFigure()&&this.update()}get disposed(){return this._disposed}get id(){return this._partSet?this._partSet.id:-1}get partSet(){return this._partSet}set colors(t){this._colors=t,this.update()}get isDisabledForWearing(){return this._isDisabledForWearing}set iconImage(t){this._thumbContainer=t,this.update()}get imageUrl(){return this._imageUrl}get colorLayerCount(){return this._maxColorIndex}get isSelected(){return this._isSelected}set isSelected(t){this._isSelected=t}get isHC(){return this._isHC}get isSellable(){return this._isSellable}get isClear(){return this._isClear}set isClear(t){this._isClear=t}}return t.THUMB_DIRECTIONS=[2,6,0,4,3,1],t.DRAW_ORDER=[vt.a.LEFT_HAND_ITEM,vt.a.LEFT_HAND,vt.a.LEFT_SLEEVE,vt.a.LEFT_COAT_SLEEVE,vt.a.BODY,vt.a.SHOES,vt.a.LEGS,vt.a.CHEST,vt.a.CHEST_ACCESSORY,vt.a.COAT_CHEST,vt.a.CHEST_PRINT,vt.a.WAIST_ACCESSORY,vt.a.RIGHT_HAND,vt.a.RIGHT_SLEEVE,vt.a.RIGHT_COAT_SLEEVE,vt.a.HEAD,vt.a.FACE,vt.a.EYES,vt.a.HAIR,vt.a.HAIR_BIG,vt.a.FACE_ACCESSORY,vt.a.EYE_ACCESSORY,vt.a.HEAD_ACCESSORY,vt.a.HEAD_ACCESSORY_EXTRA,vt.a.RIGHT_HAND_ITEM],t})();class bd{constructor(t,e,s){this.MAX_PALETTES=2,this._selectedPartIndex=-1,this._name=t,this._parts=e,this._palettes=s,this._selectedPartIndex=-1}static defaultColorId(t,e){if(!t||!t.length)return-1;let s=0;for(;s<t.length;){const n=t[s];if(n._Str_3420&&n._Str_3420.clubLevel<=e)return n._Str_3420.id;s++}return-1}init(){for(const t of this._parts)t&&t.init()}dispose(){if(this._parts){for(const t of this._parts)t.dispose();this._parts=null}if(this._palettes){for(const t of this._palettes)if(t)for(const e of t)e.dispose();this._palettes=null}this._selectedPartIndex=-1,this._paletteIndexes=null}selectPartId(t){if(!this._parts)return;let e=0;for(;e<this._parts.length;){if(this._parts[e].id===t)return void this.selectPartIndex(e);e++}}selectColorIds(t){if(!t||!this._palettes)return;this._paletteIndexes=new Array(t.length);let e=0;for(;e<this._palettes.length;){const s=this.getPalette(e);if(s){let n=0;if(t.length>e)n=t[e];else{const t=s[0];t&&t._Str_3420&&(n=t._Str_3420.id)}let i=0;for(;i<s.length;){const t=s[i];t._Str_3420.id===n?(this._paletteIndexes[e]=i,t.isSelected=!0):t.isSelected=!1,i++}}e++}this.updatePartColors()}selectPartIndex(t){if(!this._parts)return null;if(this._selectedPartIndex>=0&&this._parts.length>this._selectedPartIndex){const t=this._parts[this._selectedPartIndex];t&&(t.isSelected=!1)}if(this._parts.length>t){const e=this._parts[t];if(e)return e.isSelected=!0,this._selectedPartIndex=t,e}return null}selectColorIndex(t,e){const s=this.getPalette(e);if(!s)return null;if(s.length<=t)return null;this.deselectColorIndex(this._paletteIndexes[e],e),this._paletteIndexes[e]=t;const n=s[t];return n?(n.isSelected=!0,this.updatePartColors(),n):null}getCurrentColorIndex(t){return this._paletteIndexes[t]}deselectColorIndex(t,e){const s=this.getPalette(e);if(!s)return;if(s.length<=t)return;const n=s[t];n&&(n.isSelected=!1)}getSelectedColorIds(){if(!this._paletteIndexes||!this._paletteIndexes.length)return null;if(!this._palettes||!this._palettes.length)return null;const t=this._palettes[0];if(!t||!t.length)return null;const e=t[0];if(!e||!e._Str_3420)return null;const s=e._Str_3420.id,n=[];let i=0;for(;i<this._paletteIndexes.length;){const t=this._palettes[i];if(t&&!(t.length<=i))if(t.length>this._paletteIndexes[i]){const e=t[this._paletteIndexes[i]];n.push(e&&e._Str_3420?e._Str_3420.id:s)}else n.push(s);i++}const r=this.getCurrentPart();return r?n.slice(0,Math.max(r.colorLayerCount,1)):null}getSelectedColors(){const t=[];let e=0;for(;e<this._paletteIndexes.length;){const s=this.getSelectedColor(e);t.push(s?s._Str_3420:null),e++}return t}getSelectedColor(t){const e=this.getPalette(t);return!e||e.length<=this._paletteIndexes[t]?null:e[this._paletteIndexes[t]]}getSelectedColorId(t){const e=this.getSelectedColor(t);return e&&e._Str_3420?e._Str_3420.id:0}get parts(){return this._parts}getPalette(t){return!this._paletteIndexes||!this._palettes||this._palettes.length<=t?null:this._palettes[t]}getCurrentPart(){return this._parts[this._selectedPartIndex]}updatePartColors(){const t=this.getSelectedColors();for(const e of this._parts)e&&(e.colors=t)}hasClubSelectionsOverLevel(t){let e=!1;const s=this.getSelectedColors();if(s){let n=0;for(;n<s.length;){const i=s[n];i&&i.clubLevel>t&&(e=!0),n++}}let n=!1;const i=this.getCurrentPart();if(i&&i.partSet){const e=i.partSet;e&&e.clubLevel>t&&(n=!0)}return e||n}hasInvalidSelectedItems(t){const e=this.getCurrentPart();if(!e)return!1;const s=e.partSet;return s&&s._Str_651?!t.hasFigureSetId(s.id):void 0}stripClubItemsOverLevel(t){const e=this.getCurrentPart();if(e&&e.partSet&&e.partSet.clubLevel>t){const t=this.selectPartIndex(0);return t&&!t.partSet&&this.selectPartIndex(1),!0}return!1}stripClubColorsOverLevel(t){const e=[],s=this.getSelectedColors();let n=!1;const i=this.getPalette(0),r=bd.defaultColorId(i,t);if(-1===r)return!1;let a=0;for(;a<s.length;){const i=s[a];i?i.clubLevel>t?(e.push(r),n=!0):e.push(i.id):(e.push(r),n=!0),a++}return n&&this.selectColorIds(e),n}get name(){return this._name}get selectedPartIndex(){return this._selectedPartIndex}}class vd{constructor(t){this._editor=t,this._isInitalized=!1,this._maxPaletteCount=0}dispose(){this._categories=null,this._editor=null,this._disposed=!0}get disposed(){return this._disposed}init(){this._categories||(this._categories=new Bs.a)}reset(){if(this._isInitalized=!1,this._categories)for(const t of this._categories.getValues())t&&t.dispose();this._categories=new Bs.a,this._viewer&&this._viewer.prepareModel()}setViewer(t){this._viewer=t}addCategory(t){let e=this._categories.getValue(t);e||(e=this._editor._Str_24037(this,t),e&&(this._categories.add(t,e),this.updateSelectionsFromFigure(t)))}updateSelectionsFromFigure(t){if(!this._categories||!this._editor||!this._editor.figureData)return;const e=this._categories.getValue(t);if(!e)return;const s=this._editor.figureData.getPartSetId(t);let n=this._editor.figureData.getColourIds(t);n||(n=[]),e.selectPartId(s),e.selectColorIds(n)}hasClubSelectionsOverLevel(t){if(!this._categories)return!1;for(const e of this._categories.getValues())if(e&&e.hasClubSelectionsOverLevel(t))return!0;return!1}hasInvalidSelectedItems(t){if(!this._categories)return!1;for(const e of this._categories.getValues())if(e&&e.hasInvalidSelectedItems(t))return!0;return!1}_Str_15298(t){if(!this._categories)return!1;let e=!1;for(const s of this._categories.getKeys()){const n=this._categories.getValue(s);if(!n)continue;let i=!1;if(n.stripClubItemsOverLevel(t)&&(i=!0),n.stripClubColorsOverLevel(t)&&(i=!0),i){const t=n.getCurrentPart();t&&this._editor&&this._editor.figureData&&n&&this._editor.figureData.savePartData(s,t.id,n.getSelectedColorIds(),!0),e=!0}}return e}_Str_8360(){if(!this._categories)return!1;for(const t of this._categories.getKeys())this._categories.getValue(t);return!1}selectPart(t,e){const s=this._categories.getValue(t);if(!s)return;const n=s.selectedPartIndex;s.selectPartIndex(e);const i=s.getCurrentPart();if(i){if(i.isDisabledForWearing)return s.selectPartIndex(n),void this._editor.openHabboClubAdWindow();this._maxPaletteCount=i.colorLayerCount,this._editor&&this._editor.figureData&&this._editor.figureData.savePartData(t,i.id,s.getSelectedColorIds(),!0)}}selectColor(t,e,s){const n=this._categories.getValue(t);if(!n)return;const i=n.getCurrentColorIndex(s);if(n.selectColorIndex(e,s),this._editor&&this._editor.figureData){if(n.getSelectedColor(s)._Str_14863)return n.selectColorIndex(i,s),void this._editor.openHabboClubAdWindow();this._editor.figureData.savePartSetColourId(t,n.getSelectedColorIds(),!0)}}get controller(){return this._editor}getCategoryData(t){return this._isInitalized||this.init(),this._categories?this._categories.getValue(t):null}get categories(){return this._categories}get canSetGender(){return!1}get maxPaletteCount(){return this._maxPaletteCount}set maxPaletteCount(t){this._maxPaletteCount=t}get name(){return null}}class Id extends vd{constructor(){super(...arguments),this._imageCallBackHandled=!1}init(){super.init(),this.addCategory(fd.FACE),this._isInitalized=!0}selectColor(t,e,s){super.selectColor(t,e,s),this.updateSelectionsFromFigure(fd.FACE)}updateSelectionsFromFigure(t){if(!this._categories||!this._editor||!this._editor.figureData)return;const e=this._categories.getValue(t);if(!e)return;const s=this._editor.figureData.getPartSetId(t);let n=this._editor.figureData.getColourIds(t);n||(n=[]),e.selectPartId(s),e.selectColorIds(n);for(const i of e.parts){const t=this.controller.figureData.getFigureStringWithFace(i.id),e=u.a.instance.avatar.createAvatarImage(t,It.a.LARGE,null,this),s=e.getImageAsSprite(Rt.a.HEAD);s&&(s.y=10,i.iconImage=s,setTimeout(()=>e.dispose(),0))}}resetFigure(t){this._imageCallBackHandled||(this._imageCallBackHandled=!0,this.updateSelectionsFromFigure(fd.FACE))}get canSetGender(){return!0}get name(){return md.GENERIC}}class Rd extends vd{init(){super.init(),this.addCategory(fd.HR),this.addCategory(fd.HA),this.addCategory(fd.HE),this.addCategory(fd.EA),this.addCategory(fd.FA),this._isInitalized=!0}get name(){return md.HEAD}}class Td extends vd{init(){super.init(),this.addCategory(fd.LG),this.addCategory(fd.SH),this.addCategory(fd.WA),this._isInitalized=!0}get name(){return md.LEGS}}class yd extends vd{init(){super.init(),this.addCategory(fd.CH),this.addCategory(fd.CHEST_PRINTS),this.addCategory(fd.CC),this.addCategory(fd.CHEST_ACCESSORIES),this._isInitalized=!0}get name(){return md.TORSO}}const Od=function(t){return{active:t}};function Cd(t,e){if(1&t){const t=n.ec();n.dc(0,"button",13),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc(2).selectCategory(s.name)}),n.Wc(1),n.rc(2,"translate"),n.cc()}if(2&t){const t=e.$implicit,s=n.qc(2);n.yc("ngClass",n.Cc(4,Od,s.activeCategory===t)),n.Kb(1),n.Xc(n.sc(2,2,"avatareditor.category."+t.name))}}function Ad(t,e){if(1&t&&n.Zb(0,"div",14),2&t){const t=n.qc(2);n.yc("model",t.activeCategory)("gender",t.gender)}}function Md(t,e){if(1&t){const t=n.ec();n.dc(0,"div",15),n.dc(1,"div",16),n.Zb(2,"div",17),n.Zb(3,"div",18),n.Zb(4,"div",19),n.dc(5,"div",20),n.dc(6,"i",21),n.nc("click",function(){n.Lc(t);const e=n.qc(2);return e.rotateAvatar(e.figureData.direction+1)}),n.cc(),n.dc(7,"i",22),n.nc("click",function(){n.Lc(t);const e=n.qc(2);return e.rotateAvatar(e.figureData.direction-1)}),n.cc(),n.cc(),n.cc(),n.dc(8,"div",23),n.dc(9,"button",24),n.nc("click",function(){return n.Lc(t),n.qc(2).resetFigure()}),n.Zb(10,"i",25),n.cc(),n.dc(11,"button",24),n.nc("click",function(){return n.Lc(t),n.qc(2).clearFigure()}),n.Zb(12,"i",26),n.cc(),n.cc(),n.dc(13,"button",27),n.nc("click",function(){return n.Lc(t),n.qc(2).saveFigure()}),n.Wc(14),n.rc(15,"translate"),n.cc(),n.cc()}if(2&t){const t=n.qc(2);n.Kb(4),n.yc("figure",t.figureData.view.figureString)("direction",t.figureData.direction)("scale",2),n.Kb(10),n.Xc(n.sc(15,4,"avatareditor.save"))}}function wd(t,e){if(1&t&&n.Zb(0,"div",28),2&t){const t=n.qc(2);n.yc("figureData",t.figureData)}}function Ud(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"h6",3),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",4),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(6,"i",5),n.cc(),n.cc(),n.dc(7,"div",6),n.dc(8,"div",7),n.dc(9,"div",8),n.Uc(10,Cd,3,6,"button",9),n.cc(),n.Uc(11,Ad,1,2,"div",10),n.cc(),n.Uc(12,Md,16,6,"div",11),n.Uc(13,wd,1,1,"div",12),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(3),n.Xc(n.sc(4,5,"avatareditor.title")),n.Kb(7),n.yc("ngForOf",t.categories.getValues()),n.Kb(1),n.yc("ngIf",t.activeCategory),n.Kb(1),n.yc("ngIf",t.figureData),n.Kb(1),n.yc("ngIf",t.figureData)}}let Dd=(()=>{class t{constructor(t,e,s){this._inventoryService=t,this._settingsService=e,this._avatarEditorService=s,this.visible=!1}ngOnInit(){this._avatarEditorService.component=this,this._figureStructureData=u.a.instance.avatar.structureData,this._categories=new Bs.a,this._figures=new Map,this._gender=fd.M,this._clubMemberLevel=0,this._lastSavedFigure="",this._lastSavedGender=fd.M;const e=new fd,s=new fd;e.loadAvatarData(t._Str_18590,fd.M),s.loadAvatarData(t._Str_18820,fd.F),this._figures.set(fd.M,e),this._figures.set(fd.F,s),this._categories.add(md.GENERIC,new Id(this)),this._categories.add(md.HEAD,new Rd(this)),this._categories.add(md.TORSO,new yd(this)),this._categories.add(md.LEGS,new Td(this)),this.selectFirstCategory()}ngOnDestroy(){this._avatarEditorService.component=null}hide(){this._settingsService.hideAvatarEditor()}selectFirstCategory(){const t=this._categories.getWithIndex(0);t&&this.selectCategory(t.name)}selectCategory(t){if(!t)return;const e=this._categories.getValue(t);e&&(this._aciveCategory=e)}loadAvatarInEditor(t,e,s,n=!0){switch(e){case fd.M:case"m":case"M":e=fd.M;break;case fd.F:case"f":case"F":e=fd.F;break;default:e=fd.M}let i=!1;this._clubMemberLevel=s;const r=this._figures.get(e);if(r){if(t!==r.getFigureString()&&(i=!0),e!==this._gender&&(this._gender=e,i=!0),r.loadAvatarData(t,e),i)for(const t of this._categories.getValues())t&&t.reset();n&&(this._lastSavedFigure=t,this._lastSavedGender=this._gender)}}_Str_24037(e,s){if(!e||!s)return null;const n=[],i=[];let r=0;for(;r<t._Str_6331;)i.push([]),r++;const a=this._Str_20100(s);if(!a)return null;const o=this._Str_783(a._Str_734);if(!o)return null;let c=this.figureData.getColourIds(s);c||(c=[]);const l=new Array(c.length),h=this._Str_24175;for(const u of o.colors.values())if(u.isSelectable&&(h||this.clubMemberLevel>=u.clubLevel)){let n=0;for(;n<t._Str_6331;){const t=new Ed(e,u,this.clubMemberLevel<u.clubLevel);i[n].push(t),n++}if(s!==fd.FACE){let t=0;for(;t<c.length;)u.id===c[t]&&(l[t]=u),t++}}let _=0,d=[];if(h?(_=2,d=u.a.instance.avatar._Str_838(this.gender,_)):d=u.a.instance.avatar._Str_838(this.gender,this.clubMemberLevel),-1==d.indexOf(s)){const t=new Sd(e,null,null,!1);t.isClear=!0,n.push(t)}const g=s!==fd.FACE,m=a._Str_710;let p=m.length-1;for(;p>=0;){const t=m.getWithIndex(p);let s=!1;if((t.gender===fd.U||t.gender==this.gender)&&(s=!0),t._Str_608&&s&&(h||this.clubMemberLevel>=t.clubLevel)){const s=this.clubMemberLevel<t.clubLevel;let i=!0;if(t._Str_651&&(i=this._inventoryService&&this._inventoryService.hasFigureSetId(t.id)),i){const i=new Sd(e,t,l,g,s);n.push(i)}}p--}for(n.sort(this._Str_25757?this._Str_25189:this._Str_23935),r=0;r<t._Str_6331;)i[r].sort(this._Str_23625),r++;return new bd(s,n,i)}openHabboClubAdWindow(){}_Str_20100(t){return this._figureStructureData?this._figureStructureData._Str_740(t):null}_Str_783(t){return this._figureStructureData?this._figureStructureData._Str_783(t):null}_Str_25189(t,e){const s=t.partSet?t.partSet.clubLevel:9999999999,n=e.partSet?e.partSet.clubLevel:9999999999,i=!!t.partSet&&t.partSet._Str_651,r=!!e.partSet&&e.partSet._Str_651;return i&&!r?1:r&&!i||s>n?-1:s<n?1:t.partSet.id>e.partSet.id?-1:t.partSet.id<e.partSet.id?1:0}_Str_23935(t,e){const s=t.partSet?t.partSet.clubLevel:-1,n=e.partSet?e.partSet.clubLevel:-1,i=!!t.partSet&&t.partSet._Str_651,r=!!e.partSet&&e.partSet._Str_651;return i&&!r?1:r&&!i||s<n?-1:s>n?1:t.partSet.id<e.partSet.id?-1:t.partSet.id>e.partSet.id?1:0}_Str_23625(t,e){const s=t._Str_3420?t._Str_3420.clubLevel:-1,n=e._Str_3420?e._Str_3420.clubLevel:-1;return s<n?-1:s>n?1:t._Str_3420.index<e._Str_3420.index?-1:t._Str_3420.index>e._Str_3420.index?1:0}rotateAvatar(t){let e=t;e<gd.a.MIN_DIRECTION&&(e=gd.a.MAX_DIRECTION+(e+1)),e>gd.a.MAX_DIRECTION&&(e-=gd.a.MAX_DIRECTION+1),this.figureData.direction=e}saveFigure(){const t=this.figureData;t&&(this._lastSavedFigure=t.getFigureString(),this._lastSavedGender=t.gender,u.a.instance.communication.connection.send(new ma.a(t.gender,this._lastSavedFigure)),this.hide())}clearFigure(){const t=this.figureData;t&&this.loadAvatarInEditor(t.getFigureStringWithFace(0,!1),t.gender,this._clubMemberLevel,!1)}resetFigure(){this.loadAvatarInEditor(this._lastSavedFigure,this._gender,this._clubMemberLevel)}get _Str_25757(){return u.a.instance.getConfiguration("avatareditor.show.clubitems.first",!0)}get _Str_24175(){return u.a.instance.getConfiguration("avatareditor.show.clubitems.dimmed",!0)}get clubMemberLevel(){return this._clubMemberLevel?this._clubMemberLevel:u.a.instance.sessionDataManager.clubLevel}set clubMemberLevel(t){this._clubMemberLevel=t}get figureStructureData(){return this._figureStructureData}get figureData(){return this._figures.get(this._gender)}get gender(){return this._gender}set gender(t){if(this._gender!==t){switch(t){case fd.M:case"m":case"M":t=fd.M;break;case fd.F:case"f":case"F":t=fd.F;break;default:t=fd.M}this._gender=t;for(const t of this._categories.getValues())t.reset();this.selectFirstCategory()}}get categories(){return this._categories}get activeCategory(){return this._aciveCategory}}return t._Str_18590="hr-100.hd-180-7.ch-215-66.lg-270-79.sh-305-62.ha-1002-70.wa-2007",t._Str_18820="hr-515-33.hd-600-1.ch-635-70.lg-716-66-62.sh-735-68",t._Str_6331=2,t.\u0275fac=function(e){return new(e||t)(n.Yb(Ca),n.Yb(g),n.Yb(Ar))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-avatar-editor-main-component"]],inputs:{visible:"visible"},decls:1,vars:1,consts:[["class","nitro-avatar-editor card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-avatar-editor","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-3"],[1,"col","d-flex","flex-column"],[1,"btn-group"],["type","button","class","btn btn-secondary",3,"ngClass","click",4,"ngFor","ngForOf"],["class","d-flex flex-column","nitro-avatar-model-viewer-component","",3,"model","gender",4,"ngIf"],["class","col-4 d-flex flex-column",4,"ngIf"],["nitro-avatar-wardrobe-component","","class","col-12 nitro-avatar-wardrobe-component mt-1",3,"figureData",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"ngClass","click"],["nitro-avatar-model-viewer-component","",1,"d-flex","flex-column",3,"model","gender"],[1,"col-4","d-flex","flex-column"],[1,"d-flex","position-relative","flex-grow-1","justify-content-center"],[1,"avatar-spotlight","position-absolute"],[1,"avatar-shadow","position-absolute"],["nitro-avatar-image","",1,"d-flex","justify-content-center","position-absolute","w-100","h-100","avatar-container",3,"figure","direction","scale"],[1,"arrow-container"],[1,"icon","arrow-left-icon",3,"click"],[1,"icon","arrow-right-icon",3,"click"],[1,"btn-group","mb-1"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-undo"],[1,"fas","fa-trash"],["type","button",1,"btn","btn-sm","btn-success","mb-1",3,"click"],["nitro-avatar-wardrobe-component","",1,"col-12","nitro-avatar-wardrobe-component","mt-1",3,"figureData"]],template:function(t,e){1&t&&n.Uc(0,Ud,14,7,"div",0),2&t&&n.yc("ngIf",e.visible)},encapsulation:2}),t})();var Nd=s("2FAY");class Ld{constructor(t){this._complete=!0,this._target=t}get running(){return this._running&&!!this._target}get complete(){return this._complete}set target(t){this._target=t}get target(){return this._target}set tag(t){this._tag=t}get tag(){return this._tag}start(){this._running=!0}update(t){}stop(){this._target=null,this._running=!1}tick(t){}}class Pd extends Ld{constructor(t){super(t)}tick(t){super.tick(t),this.target&&(this.target.remove(),this.target=null)}}class xd extends Ld{constructor(t,e){super(t),this._complete=!1,this._duration=e}get duration(){return this._duration}start(){super.start(),this._complete=!1,this._startTimeMs=u.a.instance.time}tick(t){super.tick(t);const e=(t-this._startTimeMs)/this._duration;e<1?this.update(e):(this.update(1),this._complete=!0)}}class Fd extends xd{constructor(t,e,s){super(t,e),this._height=s}start(){super.start(),this._offset=0,this.target.style.top=this._offset-this._height+"px"}update(t){super.update(t),this.target.style.top=this._offset-this._height+this.getBounceOffset(t)*this._height+"px"}getBounceOffset(t){return t<.364?7.5625*t*t:t<.727?7.5625*(t-=.545)*t+.75:t<.909?7.5625*(t-=.9091)*t+.9375:7.5625*(t-=.955)*t+.984375}stop(){this.target.style.top=this._offset+"px",super.stop()}}class kd extends xd{constructor(t){super(t.target,t.duration),this._interval=t}start(){super.start(),this._interval.start()}update(t){super.update(t),this._interval.update(t)}stop(){super.stop(),this._interval.stop()}}class Wd extends kd{constructor(t,e){super(t),this._Str_21638=e}}class Bd extends Wd{constructor(t,e){super(t,e)}update(t){this._interval.update(Math.pow(t,1/this._Str_21638))}}class Vd extends xd{constructor(t,e,s,n,i,r){super(t,e),this._deltaX=s,this._deltaY=n,this._height=-i,this._numJumps=r}start(){super.start(),this._startX=this.target.offsetLeft,this._startY=this.target.offsetTop}update(t){super.update(t),this.target.style.left=this._startX+this._deltaX*t+"px",this.target.style.top=this._startY+this._height*Math.abs(Math.sin(t*Math.PI*this._numJumps))+this._deltaY*t+"px"}}let Gd=(()=>{class t{static get TIMER_TIME(){return 1e3/u.a.instance.ticker.FPS}static _Str_4598(e){return-1===t._Str_3932.indexOf(e)&&-1===t._Str_5358.indexOf(e)&&(t._Str_7507?t._Str_5358.push(e):(t._Str_3932.push(e),e.start()),t._Str_12757()),e}static _Str_15790(e){let s=t._Str_3932.indexOf(e);s>-1?t._Str_7507?(s=t._Str_10731.indexOf(e),-1==s&&t._Str_10731.push(e)):(t._Str_3932.splice(s,1),e.running&&e.stop(),t._Str_3932.length||t._Str_7465()):(s=t._Str_5358.indexOf(e),s>-1&&t._Str_5358.splice(s,1))}static _Str_19320(e){for(const s of t._Str_3932)if(s.tag==e)return s;for(const s of t._Str_5358)if(s.tag==e)return s;return null}static _Str_9810(e){for(const s of t._Str_3932)if(s.target==e)return s;for(const s of t._Str_5358)if(s.target==e)return s;return null}static _Str_26365(e,s){for(const n of t._Str_3932)if(n.tag==e&&n.target==s)return n;for(const n of t._Str_5358)if(n.tag==e&&n.target==s)return n;return null}static get _Str_1349(){return!!t._Str_5307}static get _Str_26314(){return t._Str_7507}static _Str_21055(){t._Str_7507=!0;const e=u.a.instance.time;let s=null;for(;s=t._Str_5358.pop();)t._Str_3932.push(s);for(;s=t._Str_10731.pop();)t._Str_3932.splice(t._Str_3932.indexOf(s),1),s.running&&s.stop();for(s of t._Str_3932)s.running?(s.tick(e),s.complete&&t._Str_15790(s)):t._Str_15790(s);t._Str_3932.length||t._Str_7465(),t._Str_7507=!1}static _Str_12757(){t._Str_5307||(t._Str_5307=setInterval(t._Str_21055,t.TIMER_TIME))}static _Str_7465(){t._Str_5307&&(clearInterval(t._Str_5307),t._Str_5307=null)}_Str_25883(e){let s=0;for(const n of t._Str_3932)n.target===e&&s++;return s}}return t._Str_5358=[],t._Str_3932=[],t._Str_10731=[],t._Str_5307=null,t._Str_7507=!1,t})();class Kd extends Ld{constructor(...t){super(t?t[0].target:null),this._queue=[];for(const e of t)this._queue.push(e);this._motion=t[0],this._complete=!this._motion}get running(){return!(!this._running||!this._motion)&&this._motion.running}start(){super.start(),this._motion.start()}update(t){super.update(t),this._motion.running&&this._motion.update(t)}stop(){super.stop(),this._motion.stop()}tick(t){if(super.tick(t),this._motion.tick(t),this._motion.complete){this._motion.stop();const t=this._queue.indexOf(this._motion);t<this._queue.length-1?(this._motion=this._queue[t+1],this._target=this._motion.target,this._motion.start()):this._complete=!0}}}class Hd extends Ld{constructor(t){super(null),this._waitTimeMs=t}get running(){return this._running}start(){super.start(),this._complete=!1,this._startTimeMs=u.a.instance.time}tick(t){super.tick(t),this._complete=t-this._startTimeMs>=this._waitTimeMs,this._complete&&this.stop()}}function jd(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"ul",2),n.dc(2,"li",3),n.nc("click",function(){return n.Lc(t),n.qc().toggleAvatarEditor()}),n.Zb(3,"i",4),n.dc(4,"span"),n.Wc(5),n.rc(6,"translate"),n.cc(),n.cc(),n.dc(7,"li",3),n.nc("click",function(){return n.Lc(t),n.qc().toggleAchievements()}),n.Zb(8,"i",5),n.dc(9,"span"),n.Wc(10),n.rc(11,"translate"),n.cc(),n.cc(),n.dc(12,"li",3),n.nc("click",function(){return n.Lc(t),n.qc().toggleNavigator()}),n.Zb(13,"i",6),n.dc(14,"span"),n.Wc(15),n.rc(16,"translate"),n.cc(),n.cc(),n.dc(17,"li",3),n.nc("click",function(){return n.Lc(t),n.qc().toggleUserSettings()}),n.Zb(18,"i",7),n.dc(19,"span"),n.Wc(20),n.rc(21,"translate"),n.cc(),n.cc(),n.cc(),n.cc()}2&t&&(n.yc("@inOutAnimation",void 0),n.Kb(5),n.Xc(n.sc(6,5,"widget.memenu.editavatar")),n.Kb(5),n.Xc(n.sc(11,7,"widget.memenu.achievements")),n.Kb(5),n.Xc(n.sc(16,9,"widget.memenu.myrooms")),n.Kb(5),n.Xc(n.sc(21,11,"toolbar.icon.tooltip.settings")))}let zd=(()=>{class t{constructor(t,e,s,n,i){this._avatarEditorService=t,this.settingsService=e,this.navigatorService=s,this._achievementService=n,this._ngZone=i}ngOnInit(){}ngOnDestroy(){}get isVisible(){return this.settingsService.meMenuVisible||!1}toggleAvatarEditor(){this._avatarEditorService.loadOwnAvatarInEditor(),this.settingsService.toggleAvatarEditor()}toggleAchievements(){this.settingsService.toggleAchievements()}toggleNavigator(){this.settingsService.toggleNavigator(),this.navigatorService.setCurrentContextByCode("myworld_view")}toggleUserSettings(){this.settingsService.toggleUserSettings()}get unseenAchievementsCount(){return this._achievementService.unseenCount}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(Ar),n.Yb(g),n.Yb(Kh),n.Yb(x_),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-toolbar-me-menu-component"]],decls:1,vars:1,consts:[["class","card bg-secondary nitro-toolbar-me-menu",4,"ngIf"],[1,"card","bg-secondary","nitro-toolbar-me-menu"],[1,"list-group","list-group-horizontal","p-1"],[1,"d-flex","flex-column","list-group-item",3,"click"],[1,"icon","icon-me-clothing","d-block"],[1,"icon","icon-me-achievements","d-block"],[1,"icon","icon-me-rooms","d-block"],[1,"icon","icon-me-settings","d-block"]],template:function(t,e){1&t&&n.Uc(0,jd,22,13,"div",0),2&t&&n.yc("ngIf",e.isVisible)},directives:[m.n],pipes:[ui],encapsulation:2,data:{animation:[Object(p.j)("inOutAnimation",[Object(p.i)(":enter",[Object(p.h)({bottom:10,opacity:0}),Object(p.e)(".3s ease-out",Object(p.h)({bottom:77,opacity:1}))]),Object(p.i)(":leave",[Object(p.h)({bottom:77,opacity:1}),Object(p.e)(".3s ease-in",Object(p.h)({bottom:10,opacity:0}))])])]}}),t})();const Yd=["navigationList"];function qd(t,e){if(1&t){const t=n.ec();n.dc(0,"li",5),n.nc("click",function(){return n.Lc(t),n.qc().clickIcon("hotel_view")}),n.Zb(1,"i",13),n.cc()}}function Xd(t,e){if(1&t){const t=n.ec();n.dc(0,"li",5),n.nc("click",function(){return n.Lc(t),n.qc().clickIcon("home_room")}),n.Zb(1,"i",14),n.cc()}}function Zd(t,e){if(1&t&&(n.dc(0,"div",15),n.Wc(1),n.cc()),2&t){const t=n.qc();n.Kb(1),n.Xc(t.unseenInventoryCount)}}function Qd(t,e){if(1&t&&(n.dc(0,"div",15),n.Wc(1),n.cc()),2&t){const t=n.qc();n.Kb(1),n.Xc(t.unseenFriendListCount)}}function Jd(t,e){if(1&t&&(n.dc(0,"div",15),n.Wc(1),n.cc()),2&t){const t=n.qc();n.Kb(1),n.Xc(t.unseenAchievementsCount)}}const $d=function(t){return{"is-unseen":t}};let tg=(()=>{class t{constructor(t,e,s,n,i,r,a,o){this._inventoryService=t,this._navigatorService=e,this._friendListService=s,this._achievementService=n,this.sessionService=i,this.settingsService=r,this._modToolsService=a,this.ngZone=o,this.isInRoom=!1,this.onNitroToolbarEvent=this.onNitroToolbarEvent.bind(this)}ngOnInit(){this.ngZone.runOutsideAngular(()=>{u.a.instance.roomEngine.events.addEventListener(tt.a.TOOLBAR_CLICK,this.onNitroToolbarEvent),u.a.instance.roomEngine.events.addEventListener(Nd.a.ANIMATE_ICON,this.onNitroToolbarEvent)})}ngOnDestroy(){this.ngZone.runOutsideAngular(()=>{u.a.instance.roomEngine.events.removeEventListener(tt.a.TOOLBAR_CLICK,this.onNitroToolbarEvent),u.a.instance.roomEngine.events.removeEventListener(Nd.a.ANIMATE_ICON,this.onNitroToolbarEvent)})}onNitroToolbarEvent(t){if(t)switch(t.type){case tt.a.TOOLBAR_CLICK:return void this.clickIcon(t.iconName);case Nd.a.ANIMATE_ICON:return void this.animateToIcon(t.iconName,t.image,t.x,t.y)}}clickIcon(t){if(t&&""!==t)switch(t){case Vh.a.HOTEL_VIEW:return void this.visitDesktop();case Vh.a.HOME_ROOM:return void this.visitHomeRoom();case Vh.a.NAVIGATOR:return void this.toggleNavigator();case Vh.a.CATALOG:return void this.toggleCatalog();case Vh.a.INVENTORY:return void this.toggleInventory();case Vh.a.FRIEND_LIST:return void this.toggleFriendList();case Vh.a.ME_MENU:return this.toggleMeMenu(),void u.a.instance.roomEngine.events.dispatchEvent(new tt.a(tt.a.SELECT_OWN_AVATAR))}}animateToIcon(t,e,s,n){if(!t||!e||!this.navigationListElement)return;if(""===(t=this.getIconName(t)))return;const i=this.navigationListElement.getElementsByClassName(t)[0];if(i){e.className="toolbar-icon-animation",e.style.visibility="visible",e.style.left=s+"px",e.style.top=n+"px",document.body.append(e);const r=i.getBoundingClientRect(),a=e.getBoundingClientRect(),o=a.x-r.x,c=a.y-r.y,l=Math.sqrt(o*o+c*c),h=500-Math.abs(1/l*100*500*.5),u=20,_=`ToolbarBouncing[${t}]`;Gd._Str_19320(_)||(Gd._Str_4598(new Kd(new Hd(h+8),new Fd(i,400,12))).tag=_);const d=new Kd(new Bd(new Vd(e,h,r.x-a.x+u,r.y-a.y,100,1),1),new Pd(e));Gd._Str_4598(d)}}getIconName(t){switch(t){case Vh.a.HOTEL_VIEW:return"icon-hotelview";case Vh.a.NAVIGATOR:return"icon-navigator";case Vh.a.CATALOG:return"icon-catalog";case Vh.a.INVENTORY:return"icon-inventory";default:return""}}toggleCatalog(){this.settingsService.toggleCatalog()}toggleInventory(){this.settingsService.toggleInventory()}toggleFriendList(){this.settingsService.toggleFriendList()}toggleNavigator(){this.settingsService.toggleNavigator()}toggleMeMenu(){this.settingsService.toggleMeMenu()}visitDesktop(){u.a.instance.roomSessionManager.getSession(-1)&&(u.a.instance.communication.connection.send(new Nh.a),u.a.instance.roomSessionManager.removeSession(-1))}visitHomeRoom(){this._navigatorService.goToHomeRoom()}get figure(){return this.sessionService.figure}get navigationListElement(){return this.navigationList&&this.navigationList.nativeElement||null}get unseenInventoryCount(){return this._inventoryService.unseenCount}get friendChatUnseen(){return this._friendListService.unreadCount>0}get unseenFriendListCount(){return this._friendListService.notificationCount}get unseenAchievementsCount(){return this._achievementService.unseenCount}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(Ca),n.Yb(Kh),n.Yb(Hs),n.Yb(x_),n.Yb(Bn),n.Yb(g),n.Yb(nn),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-toolbar-component"]],viewQuery:function(t,e){if(1&t&&n.cd(Yd,1),2&t){let t;n.Hc(t=n.oc())&&(e.navigationList=t.first)}},inputs:{isInRoom:"isInRoom"},decls:20,vars:12,consts:[[1,"nitro-toolbar-component"],[1,"card","p-0","overflow-hidden"],[1,"list-group","list-group-horizontal","p-1"],["navigationList",""],["class","list-group-item",3,"click",4,"ngIf"],[1,"list-group-item",3,"click"],[1,"icon","icon-rooms"],[1,"icon","icon-catalog"],[1,"icon","icon-inventory"],["class","position-absolute bg-danger px-1 py-0 rounded shadow count",4,"ngIf"],[1,"icon","icon-message",3,"ngClass"],[1,"list-group-item","avatar-image",3,"click"],["nitro-avatar-image","",3,"figure","headOnly","direction"],[1,"icon","icon-hotelview","icon-habbo"],[1,"icon","icon-house"],[1,"position-absolute","bg-danger","px-1","py-0","rounded","shadow","count"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"ul",2,3),n.Uc(4,qd,2,0,"li",4),n.Uc(5,Xd,2,0,"li",4),n.dc(6,"li",5),n.nc("click",function(){return e.clickIcon("navigator")}),n.Zb(7,"i",6),n.cc(),n.dc(8,"li",5),n.nc("click",function(){return e.clickIcon("catalog")}),n.Zb(9,"i",7),n.cc(),n.dc(10,"li",5),n.nc("click",function(){return e.clickIcon("inventory")}),n.Zb(11,"i",8),n.Uc(12,Zd,2,1,"div",9),n.cc(),n.dc(13,"li",5),n.nc("click",function(){return e.clickIcon("friendlist")}),n.Zb(14,"i",10),n.Uc(15,Qd,2,1,"div",9),n.cc(),n.dc(16,"li",11),n.nc("click",function(){return e.clickIcon("me_menu")}),n.Zb(17,"div",12),n.Uc(18,Jd,2,1,"div",9),n.cc(),n.cc(),n.cc(),n.Zb(19,"nitro-toolbar-me-menu-component"),n.cc()),2&t&&(n.yc("@inOutAnimation",void 0),n.Kb(4),n.yc("ngIf",e.isInRoom),n.Kb(1),n.yc("ngIf",!e.isInRoom),n.Kb(7),n.yc("ngIf",e.unseenInventoryCount),n.Kb(2),n.yc("ngClass",n.Cc(10,$d,e.friendChatUnseen)),n.Kb(1),n.yc("ngIf",e.unseenFriendListCount),n.Kb(2),n.yc("figure",e.figure)("headOnly",!0)("direction",2),n.Kb(1),n.yc("ngIf",e.unseenAchievementsCount))},directives:[m.n,m.l,ba,zd],encapsulation:2,data:{animation:[Object(p.j)("inOutAnimation",[Object(p.i)(":enter",[Object(p.h)({bottom:"-100%"}),Object(p.e)("1s ease-out",Object(p.h)({bottom:10}))])])]}}),t})();var eg=s("eXwK");function sg(t,e){if(1&t&&(n.dc(0,"span",17),n.Wc(1),n.cc()),2&t){const t=n.qc(2);n.Kb(1),n.Xc(t.totalFriendRequests)}}function ng(t,e){if(1&t&&n.Zb(0,"div",18),2&t){const t=n.qc(2);n.yc("threadSelector",t.selectThread)}}function ig(t,e){if(1&t&&n.Zb(0,"div",19),2&t){const t=n.qc(2);n.yc("thread",t.currentThread)}}const rg=function(t){return{active:t}};function ag(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"h6",3),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",4),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(6,"i",5),n.cc(),n.cc(),n.dc(7,"div",6),n.dc(8,"div",7),n.dc(9,"button",8),n.nc("click",function(){return n.Lc(t),n.qc().displayFriends()}),n.Wc(10),n.rc(11,"translate"),n.Uc(12,sg,2,1,"span",9),n.cc(),n.dc(13,"h6",10),n.dc(14,"span",11),n.Wc(15),n.rc(16,"translate"),n.cc(),n.cc(),n.dc(17,"perfect-scrollbar",12),n.Zb(18,"div",13),n.cc(),n.cc(),n.dc(19,"div",14),n.Uc(20,ng,1,1,"div",15),n.Uc(21,ig,1,1,"div",16),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(3),n.Xc(n.sc(4,9,"messenger.title")),n.Kb(6),n.yc("ngClass",n.Cc(15,rg,t.friendsVisible)),n.Kb(1),n.Yc(" ",n.sc(11,11,"friendlist.friends"),""),n.Kb(2),n.yc("ngIf",t.totalFriendRequests>0),n.Kb(3),n.Xc(n.sc(16,13,"toolbar.icon.label.messenger")),n.Kb(3),n.yc("currentThread",t.currentThread)("threadSelector",t.selectThread),n.Kb(2),n.yc("ngIf",t.friendsVisible),n.Kb(1),n.yc("ngIf",t.currentThread)}}let og=(()=>{class t{constructor(t,e,s){this._settingsService=t,this._friendListService=e,this._ngZone=s,this.visible=!1,this._friendsVisible=!0,this._currentThread=null,this.selectThread=this.selectThread.bind(this)}ngOnInit(){this._friendListService.component=this,u.a.instance.communication.connection.send(new eg.a)}ngOnChanges(t){const e=t.visible.currentValue;e||e===t.visible.previousValue||this.selectThread(null)}ngOnDestroy(){this._friendListService.component=null}hide(){this._settingsService.hideFriendList()}displayFriends(){this._friendsVisible=!0,this._currentThread=null}selectThread(t){if(t)return this._friendsVisible=!1,this._currentThread=t,void t.setRead();this._friendsVisible=!0,this._currentThread=null}get currentThread(){return this._currentThread}get friendsVisible(){return this._friendsVisible&&!this._currentThread}get totalFriendRequests(){return this._friendListService.requests.size}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(g),n.Yb(Hs),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-friendlist-main-component"]],inputs:{visible:"visible"},features:[n.Ib],decls:1,vars:1,consts:[["class","nitro-friendlist card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-friendlist","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-3"],[1,"col-4","d-flex","flex-column"],[1,"btn","btn-secondary","w-100","mb-1",3,"ngClass","click"],["class","badge badge-danger ml-1","style","font-size:12px;",4,"ngIf"],[1,"mt-2","mb-1"],[1,"badge","text-uppercase"],[1,"position-relative","w-100",2,"min-height","320px","max-height","320px","height","320px"],["nitro-friendlist-thread-list-component","",3,"currentThread","threadSelector"],[1,"col","d-flex","flex-column"],["nitro-friendlist-friends-viewer-component","",3,"threadSelector",4,"ngIf"],["nitro-friendlist-thread-viewer-component","",3,"thread",4,"ngIf"],[1,"badge","badge-danger","ml-1",2,"font-size","12px"],["nitro-friendlist-friends-viewer-component","",3,"threadSelector"],["nitro-friendlist-thread-viewer-component","",3,"thread"]],template:function(t,e){1&t&&n.Uc(0,ag,22,17,"div",0),2&t&&n.yc("ngIf",e.visible)},encapsulation:2}),t})();function cg(t,e){if(1&t&&n.Zb(0,"img",9),2&t){const t=n.qc(2);n.yc("src",t.getImage(1),n.Nc)}}function lg(t,e){if(1&t&&(n.dc(0,"div",7),n.Uc(1,cg,1,1,"img",8),n.cc()),2&t){const t=n.qc();n.Kb(1),n.yc("ngIf",t.getImage(1))}}function hg(t,e){if(1&t&&n.Zb(0,"div",14),2&t){const t=n.qc(2);n.yc("roomPreviewer",t.roomPreviewer)("width",366)("height",180)}}function ug(t,e){if(1&t&&(n.dc(0,"div",15),n.Zb(1,"img",9),n.cc()),2&t){const t=n.qc(2);n.Kb(1),n.yc("src",t.offerImage(t.activeOffer),n.Nc)}}function _g(t,e){if(1&t&&(n.dc(0,"div",10),n.dc(1,"div",11),n.Wc(2),n.cc(),n.Uc(3,hg,1,3,"div",12),n.Uc(4,ug,2,1,"div",13),n.cc()),2&t){const t=n.qc();n.Kb(2),n.Xc(t.offerName(t.activeOffer)),n.Kb(1),n.yc("ngIf",t.roomPreviewerVisible),n.Kb(1),n.yc("ngIf",!t.roomPreviewerVisible)}}const dg=function(t){return{active:t}};function gg(t,e){if(1&t){const t=n.ec();n.dc(0,"div",16),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().selectOffer(s)}),n.Zb(1,"button",17),n.cc()}if(2&t){const t=e.$implicit,s=n.qc();n.Kb(1),n.yc("ngClass",n.Cc(6,dg,s.activeOffer===t))("scale",4)("figure",t&&t.products[0]&&t.products[0].extraParam)("direction",3)("headOnly",!0)("asBackground",!0)}}function mg(t,e){if(1&t&&n.Zb(0,"div",18),2&t){const t=n.qc();n.yc("activePage",t.activePage)("activeOffer",t.activeOffer)("quantityEnabled",t.activeOffer.bundlePurchaseAllowed)}}let pg=(()=>{class t extends $o{}return t.CODE="bots",t.\u0275fac=function(e){return fg(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:7,vars:4,consts:[[1,"d-flex","flex-column","w-100","h-100"],["class","d-flex flex-column justify-content-center align-items-center w-100 h-100 mb-2",4,"ngIf"],["class","position-relative d-flex flex-column justify-content-center align-items-center w-100 mb-2",4,"ngIf"],[1,"grid-container","w-100",2,"min-height","209px","max-height","209px","height","209px"],[1,"grid-items","grid-6"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],["class","d-flex align-items-end flex-grow-1 w-100 mt-1","nitro-catalog-purchase-component","",3,"activePage","activeOffer","quantityEnabled",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","mb-2"],["image-placeholder","",3,"src",4,"ngIf"],["image-placeholder","",3,"src"],[1,"position-relative","d-flex","flex-column","justify-content-center","align-items-center","w-100","mb-2"],[1,"position-absolute","bg-secondary","rounded","text-center","m-2","p-2","t-0","l-0",2,"z-index","1"],["class","room-preview","nitro-room-preview-component","",3,"roomPreviewer","width","height",4,"ngIf"],["class","d-flex justify-content-center align-items-center h-100 w-100",4,"ngIf"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","width","height"],[1,"d-flex","justify-content-center","align-items-center","h-100","w-100"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button","avatar-image","",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image",3,"ngClass","scale","figure","direction","headOnly","asBackground"],["nitro-catalog-purchase-component","",1,"d-flex","align-items-end","flex-grow-1","w-100","mt-1",3,"activePage","activeOffer","quantityEnabled"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Uc(1,lg,2,1,"div",1),n.Uc(2,_g,5,3,"div",2),n.dc(3,"perfect-scrollbar",3),n.dc(4,"div",4),n.Uc(5,gg,2,8,"div",5),n.cc(),n.cc(),n.Uc(6,mg,1,3,"div",6),n.cc()),2&t&&(n.Kb(1),n.yc("ngIf",!e.activeOffer),n.Kb(1),n.yc("ngIf",e.activeOffer),n.Kb(3),n.yc("ngForOf",e.offers),n.Kb(1),n.yc("ngIf",e.activeOffer))},encapsulation:2}),t})();const fg=n.fc(pg);let Eg=(()=>{class t extends Wo{}return t.CODE="frontpage_featured",t.\u0275fac=function(e){return Sg(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:2,vars:0,consts:[[1,"nitro-catalog-layout-frontpagefeatured-component"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Wc(1," frontpage\n"),n.cc())},encapsulation:2}),t})();const Sg=n.fc(Eg),bg=function(t){return{"background-image":t}};function vg(t,e){if(1&t&&(n.dc(0,"div",8),n.dc(1,"div",9),n.Wc(2),n.cc(),n.cc()),2&t){const t=n.qc();n.yc("ngStyle",n.Cc(2,bg,"url("+t.getImagesUrl()+t.activePage.frontPageItems[0].itemPromoImage+")")),n.Kb(2),n.Xc(t.activePage.frontPageItems[0].itemName)}}function Ig(t,e){if(1&t&&(n.dc(0,"div",10),n.dc(1,"div",9),n.Wc(2),n.cc(),n.cc()),2&t){const t=n.qc();n.yc("ngStyle",n.Cc(2,bg,"url("+t.getImagesUrl()+t.activePage.frontPageItems[1].itemPromoImage+")")),n.Kb(2),n.Xc(t.activePage.frontPageItems[1].itemName)}}function Rg(t,e){if(1&t&&(n.dc(0,"div",10),n.dc(1,"div",9),n.Wc(2),n.cc(),n.cc()),2&t){const t=n.qc();n.yc("ngStyle",n.Cc(2,bg,"url("+t.getImagesUrl()+t.activePage.frontPageItems[2].itemPromoImage+")")),n.Kb(2),n.Xc(t.activePage.frontPageItems[2].itemName)}}function Tg(t,e){if(1&t&&(n.dc(0,"div",11),n.dc(1,"div",9),n.Wc(2),n.cc(),n.cc()),2&t){const t=n.qc();n.yc("ngStyle",n.Cc(2,bg,"url("+t.getImagesUrl()+t.activePage.frontPageItems[3].itemPromoImage+")")),n.Kb(2),n.Xc(t.activePage.frontPageItems[3].itemName)}}let yg=(()=>{class t extends Wo{getImagesUrl(){return u.a.instance.core.configuration.getValue("image.library.url")}}return t.CODE="frontpage4",t.\u0275fac=function(e){return Og(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:9,vars:5,consts:[[1,"nitro-catalog-layout-frontpage4-component","row"],[1,"col-4"],["class","front-page-item tall",3,"ngStyle",4,"ngIf"],[1,"col-8"],[1,"d-flex","flex-column","w-100","mb-3"],["class","front-page-item wide mb-3",3,"ngStyle",4,"ngIf"],["class","front-page-item wide mb-0",3,"ngStyle",4,"ngIf"],[3,"localization"],[1,"front-page-item","tall",3,"ngStyle"],[1,"front-page-item-caption"],[1,"front-page-item","wide","mb-3",3,"ngStyle"],[1,"front-page-item","wide","mb-0",3,"ngStyle"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.Uc(2,vg,3,4,"div",2),n.cc(),n.dc(3,"div",3),n.dc(4,"div",4),n.Uc(5,Ig,3,4,"div",5),n.Uc(6,Rg,3,4,"div",5),n.Uc(7,Tg,3,4,"div",6),n.cc(),n.Zb(8,"redeem-voucher-component",7),n.cc(),n.cc()),2&t&&(n.Kb(2),n.yc("ngIf",e.activePage.frontPageItems[0]),n.Kb(3),n.yc("ngIf",e.activePage.frontPageItems[1]),n.Kb(1),n.yc("ngIf",e.activePage.frontPageItems[2]),n.Kb(1),n.yc("ngIf",e.activePage.frontPageItems[3]),n.Kb(1),n.yc("localization",e.activePage.localization))},encapsulation:2}),t})();const Og=n.fc(yg);function Cg(t,e){if(1&t&&n.Zb(0,"img",14),2&t){const t=n.qc(2);n.yc("src",t.getImage(1),n.Nc)}}function Ag(t,e){if(1&t&&(n.dc(0,"div",12),n.Uc(1,Cg,1,1,"img",13),n.cc()),2&t){const t=n.qc();n.Kb(1),n.yc("ngIf",t.getImage(1))}}function Mg(t,e){if(1&t&&(n.dc(0,"div",15),n.Zb(1,"nitro-badge",16),n.dc(2,"div",17),n.Wc(3),n.cc(),n.Zb(4,"div",18),n.cc()),2&t){const t=n.qc();n.Kb(1),n.yc("badge",t.selectedGroup.badge)("isGroup",!0),n.Kb(2),n.Xc(t.offerName(t.activeOffer)),n.Kb(1),n.yc("roomPreviewer",t.roomPreviewer)("width",364)("height",182)}}function wg(t,e){if(1&t&&(n.dc(0,"option",19),n.Wc(1),n.cc()),2&t){const t=e.$implicit;n.yc("value",t.id),n.Kb(1),n.Xc(t.title)}}function Ug(t,e){if(1&t&&(n.dc(0,"div",24),n.Wc(1),n.cc()),2&t){const t=n.qc().$implicit,e=n.qc();n.Kb(1),n.Xc(e.offerCount(t))}}const Dg=function(t){return{active:t}},Ng=function(t){return{"background-image":t}};function Lg(t,e){if(1&t){const t=n.ec();n.dc(0,"div",20),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().selectOffer(s)}),n.dc(1,"button",21),n.Zb(2,"div",22),n.Uc(3,Ug,2,1,"div",23),n.cc(),n.cc()}if(2&t){const t=e.$implicit,s=n.qc();n.Kb(1),n.yc("ngClass",n.Cc(3,Dg,s.activeOffer===t)),n.Kb(1),n.yc("ngStyle",n.Cc(5,Ng,"url("+s.offerImage(t)+")")),n.Kb(1),n.yc("ngIf",s.offerCount(t)>1)}}function Pg(t,e){if(1&t&&n.Zb(0,"div",25),2&t){const t=n.qc();n.yc("activePage",t.activePage)("activeOffer",t.activeOffer)("quantityEnabled",t.activeOffer.bundlePurchaseAllowed)("forcedExtra",t.selectedGroupId)}}const xg=function(t){return{backgroundColor:t}};let Fg=(()=>{class t extends Wo{constructor(t,e,s){super(t,e,s),this._catalogService=t,this._marketService=e,this._ngZone=s,this._groups=[],this._selectedGroupId=null,this._selectedGroup=null,this._lastOfferSelected=null,t.registerGroupFurniTemplate(this)}ngOnInit(){this._catalogService.requestGroups()}ngOnDestroy(){this._catalogService.component.previewStuffData=null}selectOffer(t){if(!t)return void this._catalogService.component.selectOffer(null);this._lastOfferSelected=t;const e=[];e.push("0"),e.push(this.selectedGroupId),e.push(this._selectedGroup.badge),e.push(this.selectedGroupColorA),e.push(this.selectedGroupColorB);const s=new kt.a;s.setValue(e),this._catalogService.component&&(this._catalogService.component.previewStuffData=s,this._catalogService.component.selectOffer(t))}getFirstProduct(t){return t&&t.products[0]||null}hasMultipleProducts(t){return t.products.length>1}offerName(t){let e="";const s=this.getFirstProduct(t);if(s)switch(s.productType){case ge.FLOOR:e="roomItem.name."+s.furniClassId;break;case ge.WALL:e="wallItem.name."+s.furniClassId}return""===e?e:u.a.instance.getLocalization(e)}getProductFurniData(t){return t?this._catalogService.getFurnitureDataForProductOffer(t):null}offerImage(t){if(!t)return"";const e=t.products[0];if(!e)return"";const s=this.getProductFurniData(e);if(!s)return"";switch(e.productType){case ge.FLOOR:case ge.WALL:return this._catalogService.getFurnitureDataIconUrl(s)}return""}offerCount(t){if(!this.hasMultipleProducts(t)){const e=this.getFirstProduct(t);if(e)return e.productCount}return 1}get groups(){return this._groups}set groups(t){this._groups=t,t.length>0&&this._ngZone.run(()=>{this.selectedGroupId=t[0].id.toString()})}get selectedGroup(){return this._selectedGroup}get selectedGroupId(){return this._selectedGroupId}set selectedGroupId(t){this._selectedGroupId=t,this._selectedGroup=this.groups.filter(e=>e.id.toString()===t)[0],this.selectOffer(null),this.selectOffer(this._lastOfferSelected)}get selectedGroupColorA(){return this._selectedGroup?this._selectedGroup.colorA:"fff"}get selectedGroupColorB(){return this._selectedGroup?this._selectedGroup.colorB:"fff"}}return t.CODE="guild_custom_furni",t.\u0275fac=function(e){return new(e||t)(n.Yb(gc),n.Yb(ko),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:13,vars:12,consts:[[1,"d-flex","flex-column","w-100","h-100"],["class","d-flex flex-column justify-content-center align-items-center w-100 h-100 mb-2",4,"ngIf"],["class","position-relative mb-2",4,"ngIf"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"btn","btn-primary",3,"ngStyle"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"grid-container","w-100",2,"min-height","156px","max-height","156px","height","156px"],[1,"grid-items","grid-6"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],["class","d-flex align-items-center mt-2 flex-grow-1 w-100","nitro-catalog-purchase-component","",3,"activePage","activeOffer","quantityEnabled","forcedExtra",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","mb-2"],["image-placeholder","",3,"src",4,"ngIf"],["image-placeholder","",3,"src"],[1,"position-relative","mb-2"],[1,"position-absolute",2,"right","10px","z-index","1",3,"badge","isGroup"],[1,"position-absolute","bg-secondary","rounded","text-center","px-2",2,"z-index","1"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","width","height"],[3,"value"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info",3,"ngClass"],[1,"position-absolute","detail-info","has-image",3,"ngStyle"],["class","position-absolute bg-danger px-1 py-0 rounded shadow count",4,"ngIf"],[1,"position-absolute","bg-danger","px-1","py-0","rounded","shadow","count"],["nitro-catalog-purchase-component","",1,"d-flex","align-items-center","mt-2","flex-grow-1","w-100",3,"activePage","activeOffer","quantityEnabled","forcedExtra"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Uc(1,Ag,2,1,"div",1),n.Uc(2,Mg,5,6,"div",2),n.dc(3,"div",3),n.dc(4,"div",4),n.Zb(5,"button",5),n.Zb(6,"button",5),n.cc(),n.dc(7,"select",6),n.nc("ngModelChange",function(t){return e.selectedGroupId=t}),n.Uc(8,wg,2,2,"option",7),n.cc(),n.cc(),n.dc(9,"perfect-scrollbar",8),n.dc(10,"div",9),n.Uc(11,Lg,4,7,"div",10),n.cc(),n.cc(),n.Uc(12,Pg,1,4,"div",11),n.cc()),2&t&&(n.Kb(1),n.yc("ngIf",!e.activeOffer),n.Kb(1),n.yc("ngIf",e.activeOffer),n.Kb(3),n.yc("ngStyle",n.Cc(8,xg,"#"+e.selectedGroupColorA)),n.Kb(1),n.yc("ngStyle",n.Cc(10,xg,"#"+e.selectedGroupColorB)),n.Kb(1),n.yc("ngModel",e.selectedGroupId),n.Kb(1),n.yc("ngForOf",e.groups),n.Kb(3),n.yc("ngForOf",e.offers),n.Kb(1),n.yc("ngIf",e.activeOffer))},encapsulation:2}),t})(),kg=(()=>{class t extends Wo{openGroupCreator(){u.a.instance.createLinkEvent("groups/create")}}return t.CODE="guild_frontpage",t.\u0275fac=function(e){return Wg(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:9,vars:7,consts:[[1,"nitro-catalog-layout-guildfrontpage-component"],[1,"mb-2",3,"innerHtml"],[1,"small","mb-2",3,"innerHtml"],[1,"small","mb-3",3,"innerHtml"],[1,"text-center"],[1,"btn","btn-primary","mb-3",3,"click"],["image-placeholder","",3,"src"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Zb(1,"div",1),n.Zb(2,"div",2),n.Zb(3,"div",3),n.dc(4,"div",4),n.dc(5,"button",5),n.nc("click",function(){return e.openGroupCreator()}),n.Wc(6),n.rc(7,"translate"),n.cc(),n.Zb(8,"img",6),n.cc(),n.cc()),2&t&&(n.Kb(1),n.yc("innerHtml",e.getText(2),n.Mc),n.Kb(1),n.yc("innerHtml",e.getText(0),n.Mc),n.Kb(1),n.yc("innerHtml",e.getText(1),n.Mc),n.Kb(3),n.Xc(n.sc(7,5,"catalog.start.guild.purchase.button")),n.Kb(2),n.yc("src",e.getImage(1),n.Nc))},directives:[fa],pipes:[ui],encapsulation:2}),t})();const Wg=n.fc(kg),Bg=["nitro-marketplace-sub-activity",""];function Vg(t,e){if(1&t&&(n.dc(0,"option",4),n.Wc(1),n.cc()),2&t){const t=e.$implicit,s=n.qc();n.yc("selected",t.value==s.sortType)("value",t.value),n.Kb(1),n.Xc(t.name)}}let Gg=(()=>{class t{constructor(){this.sortChanged=new n.r,this.sortType=0}getFilters(){const t=[];for(const e of this.sortTypes){const s=this.translateKey("catalog.marketplace.sort."+e);t.push({name:s,value:e})}return t}ngOnInit(){this.sortType=this.sortTypes[0]}translateKey(t){return u.a.instance.localization.getValue(t)}onOptionSelect(t){const e=parseInt(t.target.value);this.sortType=e,this.sortChanged.emit(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-marketplace-sub-activity",""]],inputs:{sortTypes:"sortTypes"},outputs:{sortChanged:"sortChanged"},attrs:Bg,decls:6,vars:4,consts:[[1,"d-flex","flex-row"],[1,"mr-2","align-self-center",2,"white-space","nowrap"],[1,"form-control","form-control-sm",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],[3,"selected","value"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.Wc(2),n.rc(3,"translate"),n.cc(),n.dc(4,"select",2),n.nc("change",function(t){return e.onOptionSelect(t)}),n.Uc(5,Vg,2,3,"option",3),n.cc(),n.cc()),2&t&&(n.Kb(2),n.Xc(n.sc(3,2,"catalog.marketplace.sort_order")),n.Kb(3),n.yc("ngForOf",e.getFilters()))},directives:[m.m,ur.o,ur.v],pipes:[ui],encapsulation:2}),t})();const Kg=["nitro-marketplace-sub-advanced",""];function Hg(t,e){if(1&t&&(n.dc(0,"option",12),n.Wc(1),n.cc()),2&t){const t=e.$implicit,s=n.qc();n.yc("selected",t.value==s.sortType)("value",t.value),n.Kb(1),n.Xc(t.name)}}let jg=(()=>{class t{constructor(){this.sortType=0,this.searchQuery="",this.searchPriceBetweenStart=null,this.searchPriceBetweenEnd=null,this.onSearch=new n.r}getFilters(){const t=[];for(const e of this.sortTypes){const s=this.translateKey("catalog.marketplace.sort."+e);t.push({name:s,value:e})}return t}ngOnInit(){this.sortType=this.sortTypes[0]}translateKey(t){return u.a.instance.localization.getValue(t)}onOptionSelect(t){const e=parseInt(t.target.value);this.sortType=e}search(){this.onSearch.emit({minPrice:this.searchPriceBetweenStart,maxPrice:this.searchPriceBetweenEnd,query:this.searchQuery,type:this.sortType})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-marketplace-sub-advanced",""]],inputs:{sortTypes:"sortTypes"},outputs:{onSearch:"onSearch"},attrs:Kg,decls:20,vars:13,consts:[[1,"row","mb-1"],[1,"col-7"],["type","text",1,"form-control","form-control-sm","mb-1",3,"ngModel","placeholder","ngModelChange"],[1,"col-5"],[1,"mt-2"],[1,"row","mb-2"],[1,"form-control","form-control-sm","w-100",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],[1,"input-group"],["type","number","placeholder","0",1,"form-control","form-control-sm","mb-1",3,"ngModel","ngModelChange"],["type","number","placeholder","0",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"btn","btn-secondary","btn-block","btn-sm",3,"click"],[3,"selected","value"]],template:function(t,e){1&t&&(n.dc(0,"div"),n.dc(1,"div",0),n.dc(2,"div",1),n.dc(3,"input",2),n.nc("ngModelChange",function(t){return e.searchQuery=t}),n.rc(4,"translate"),n.cc(),n.cc(),n.dc(5,"div",3),n.dc(6,"div",4),n.Wc(7),n.rc(8,"translate"),n.cc(),n.cc(),n.cc(),n.dc(9,"div",5),n.dc(10,"div",1),n.dc(11,"select",6),n.nc("change",function(t){return e.onOptionSelect(t)}),n.Uc(12,Hg,2,3,"option",7),n.cc(),n.cc(),n.dc(13,"div",3),n.dc(14,"div",8),n.dc(15,"input",9),n.nc("ngModelChange",function(t){return e.searchPriceBetweenStart=t}),n.cc(),n.dc(16,"input",10),n.nc("ngModelChange",function(t){return e.searchPriceBetweenEnd=t}),n.cc(),n.cc(),n.cc(),n.cc(),n.dc(17,"button",11),n.nc("click",function(){return e.search()}),n.Wc(18),n.rc(19,"translate"),n.cc(),n.cc()),2&t&&(n.Kb(3),n.yc("ngModel",e.searchQuery)("placeholder",n.sc(4,7,"catalog.marketplace.search_name")),n.Kb(4),n.Xc(n.sc(8,9,"catalog.marketplace.search_price")),n.Kb(5),n.yc("ngForOf",e.getFilters()),n.Kb(3),n.yc("ngModel",e.searchPriceBetweenStart),n.Kb(1),n.yc("ngModel",e.searchPriceBetweenEnd),n.Kb(2),n.Xc(n.sc(19,11,"generic.search")))},directives:[ur.b,ur.l,ur.n,m.m,ur.p,ur.o,ur.v],pipes:[ui],encapsulation:2}),t})();const zg=["nitro-marketplace-offer",""];function Yg(t,e){if(1&t&&(n.Zb(0,"div",12),n.rc(1,"uniqueNumber")),2&t){const t=n.qc();n.yc("innerHtml",n.sc(1,1,t.offer.stuffData.uniqueNumber),n.Mc)}}const qg=function(t){return{unique:t}},Xg=function(t){return{"background-image":t}};let Zg=(()=>{class t{constructor(t,e,s,n){this._marketplaceService=t,this._notificationService=e,this._ngZone=s,this._purseService=n}get imageUrlOffer(){if(!this.offer)return"";switch(this.offer.furniType){case 1:return u.a.instance.roomEngine.getFurnitureFloorIconUrl(this.offer.furniId);case 2:return u.a.instance.roomEngine.getFurnitureWallIconUrl(this.offer.furniId,this.offer.extraData)}return""}get marketplaceOfferTitle(){return this.offer?u.a.instance.localization.getValue(2==this.offer.furniType?"wallItem.name."+this.offer.furniId:"roomItem.name."+this.offer.furniId):""}get marketplaceOfferDescription(){if(!this.offer)return"";const t=this.offer;return u.a.instance.localization.getValue(2==t.furniType?"wallItem.desc."+t.furniId:"roomItem.desc."+t.furniId)}get marketplacePrice(){return this.offer?u.a.instance.localization.getValueWithParameter("catalog.marketplace.offer.price_own_item","price",this.offer.price.toString()):""}get averagePrice(){const t=this.offer.price,e=this.offer._Str_3925,s=0!=e?e.toString():" - ";return u.a.instance.localization.getValueWithParameters("catalog.marketplace.offer.price_public_item",["price","average"],[t.toString(),s])}get offerCount(){return u.a.instance.localization.getValueWithParameter("catalog.marketplace.offer_count","count",this.offer._Str_4121.toString())}get description(){return this.offer?u.a.instance.localization.getValue(2==this.offer.furniType?"wallItem.desc."+this.offer.furniId:"roomItem.desc."+this.offer.furniId):""}buy(){this._purseService.currencies.get(105)<this.offer.price?this._notificationService.alert(u.a.instance.localization.getValue("catalog.alert.notenough.credits.description"),u.a.instance.localization.getValue("catalog.alert.notenough.title")):this._ngZone.run(()=>this._marketplaceService.buyOffer(this.offer))}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(ko),n.Yb(es),n.Yb(n.H),n.Yb(Su))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-marketplace-offer",""]],inputs:{offer:"offer"},attrs:zg,decls:19,vars:14,consts:[[1,"rounded","bg-secondary","mb-2","p-2"],[1,"d-flex","flex-row","mb-1"],[1,"position-relative","align-self-center","align-items-end","mr-2","flex-shrink-0",2,"width","36px","height","36px",3,"ngClass"],[1,"position-absolute","w-100","h-100",2,"background-repeat","no-repeat","background-position","center",3,"ngStyle"],["class","position-absolute unique-counter","style","bottom:0px;",3,"innerHtml",4,"ngIf"],[1,"align-self-center"],[1,"small"],[1,"badge","badge-primary","badge-sm","text-wrap","w-100","mb-1"],[1,"d-flex","flex-row"],[1,"badge","badge-primary","badge-sm","text-wrap","w-100","d-flex"],[1,"align-self-center","w-100"],[1,"btn","btn-primary","btn-sm","ml-2","w-100",2,"white-space","nowrap",3,"click"],[1,"position-absolute","unique-counter",2,"bottom","0px",3,"innerHtml"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"div",2),n.Zb(3,"div",3),n.Uc(4,Yg,2,3,"div",4),n.cc(),n.dc(5,"div",5),n.dc(6,"div"),n.Wc(7),n.cc(),n.dc(8,"div",6),n.Wc(9),n.cc(),n.cc(),n.cc(),n.dc(10,"div",7),n.Wc(11),n.cc(),n.dc(12,"div",8),n.dc(13,"div",9),n.dc(14,"div",10),n.Wc(15),n.cc(),n.cc(),n.dc(16,"button",11),n.nc("click",function(){return e.buy()}),n.Wc(17),n.rc(18,"translate"),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(2),n.yc("ngClass",n.Cc(10,qg,e.offer.isUniqueLimitedItem)),n.Kb(1),n.yc("ngStyle",n.Cc(12,Xg,"url("+e.imageUrlOffer+")")),n.Kb(1),n.yc("ngIf",e.offer.isUniqueLimitedItem),n.Kb(3),n.Xc(e.marketplaceOfferTitle),n.Kb(2),n.Xc(e.averagePrice),n.Kb(2),n.Xc(e.description),n.Kb(4),n.Xc(e.offerCount),n.Kb(2),n.Xc(n.sc(18,8,"buy")))},directives:[m.l,m.o,m.n],pipes:[ui,pl],encapsulation:2}),t})();function Qg(t,e){if(1&t){const t=n.ec();n.dc(0,"div",6),n.nc("sortChanged",function(e){return n.Lc(t),n.qc().onSortChanged(e)}),n.cc()}if(2&t){const t=n.qc();n.yc("sortTypes",t.SORT_TYPES_ACTIVITY)}}function Jg(t,e){if(1&t){const t=n.ec();n.dc(0,"div",6),n.nc("sortChanged",function(e){return n.Lc(t),n.qc().onSortChanged(e)}),n.cc()}if(2&t){const t=n.qc();n.yc("sortTypes",t.SORT_TYPES_VALUE)}}function $g(t,e){if(1&t){const t=n.ec();n.dc(0,"div",7),n.nc("onSearch",function(e){return n.Lc(t),n.qc().onSearch(e)}),n.cc()}if(2&t){const t=n.qc();n.yc("sortTypes",t.SORT_TYPES_ADVANCED)}}function tm(t,e){1&t&&n.Zb(0,"div",11),2&t&&n.yc("offer",e.$implicit)}const em=function(t,e){return{"view-big":t,"view-short":e}};function sm(t,e){if(1&t&&(n.dc(0,"div"),n.dc(1,"div",8),n.Wc(2),n.cc(),n.dc(3,"perfect-scrollbar",9),n.Uc(4,tm,1,1,"div",10),n.cc(),n.cc()),2&t){const t=n.qc();n.Kb(2),n.Xc(t.foundText),n.Kb(1),n.yc("ngClass",n.Dc(3,em,"activity"===t.view||"value"===t.view,"advanced"===t.view)),n.Kb(1),n.yc("ngForOf",t.marketOffers)}}const nm=function(t){return{active:t}};let im=(()=>{class t extends Wo{constructor(){super(...arguments),this.SORT_TYPES_VALUE=[1,2],this.SORT_TYPES_ACTIVITY=[3,4,5,6],this.SORT_TYPES_ADVANCED=[1,2,3,4,5,6],this.view="activity",this.sortType=3}ngOnInit(){this.searchOffers()}selectView(t){this.view=t;let e=!1;switch(t){case"activity":this.sortType=this.SORT_TYPES_ACTIVITY[0],e=!0;break;case"value":this.sortType=this.SORT_TYPES_VALUE[0],e=!0;break;case"advanced":this.sortType=this.SORT_TYPES_ADVANCED[0]}e&&this.onSearch({minPrice:-1,maxPrice:-1,query:"",type:this.sortType})}onSortChanged(t){this._ngZone.run(()=>this.sortType=t),this.searchOffers()}onSearch(t){const e=0!=t.maxPrice&&t.maxPrice?t.maxPrice:-1;t.minPrice=0!=t.minPrice&&t.minPrice?t.minPrice:-1,t.maxPrice=e,this._marketService.requestOffers(t)}searchOffers(){this._marketService.requestOffers({minPrice:-1,maxPrice:-1,query:"",type:this.sortType})}get marketOffers(){return this._marketService.publicOffers}get totalOffersFound(){return this._marketService.totalOffersFound}get foundText(){return u.a.instance.localization.getValueWithParameter("catalog.marketplace.items_found","count",this.totalOffersFound.toString())}get hasOffers(){return this.marketOffers&&this.marketOffers.length>0}}return t.CODE="marketplace",t.\u0275fac=function(e){return rm(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:15,vars:22,consts:[[1,"w-100","h-100","px-1","nitro-catalog-layout-marketplace-own-items-component"],[1,"btn-group","w-100","mb-3"],["type","button",1,"btn","btn-secondary",3,"ngClass","click"],["class","mb-2","nitro-marketplace-sub-activity","",3,"sortTypes","sortChanged",4,"ngIf"],["class","mb-2","nitro-marketplace-sub-advanced","",3,"sortTypes","onSearch",4,"ngIf"],[4,"ngIf"],["nitro-marketplace-sub-activity","",1,"mb-2",3,"sortTypes","sortChanged"],["nitro-marketplace-sub-advanced","",1,"mb-2",3,"sortTypes","onSearch"],[1,"mb-1"],[3,"ngClass"],["nitro-marketplace-offer","",3,"offer",4,"ngFor","ngForOf"],["nitro-marketplace-offer","",3,"offer"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"button",2),n.nc("click",function(){return e.selectView("activity")}),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",2),n.nc("click",function(){return e.selectView("value")}),n.Wc(6),n.rc(7,"translate"),n.cc(),n.dc(8,"button",2),n.nc("click",function(){return e.selectView("advanced")}),n.Wc(9),n.rc(10,"translate"),n.cc(),n.cc(),n.Uc(11,Qg,1,1,"div",3),n.Uc(12,Jg,1,1,"div",3),n.Uc(13,$g,1,1,"div",4),n.Uc(14,sm,5,6,"div",5),n.cc()),2&t&&(n.Kb(2),n.yc("ngClass",n.Cc(16,nm,"activity"===e.view)),n.Kb(1),n.Xc(n.sc(4,10,"catalog.marketplace.search_by_activity")),n.Kb(2),n.yc("ngClass",n.Cc(18,nm,"value"===e.view)),n.Kb(1),n.Xc(n.sc(7,12,"catalog.marketplace.search_by_value")),n.Kb(2),n.yc("ngClass",n.Cc(20,nm,"advanced"===e.view)),n.Kb(1),n.Xc(n.sc(10,14,"catalog.marketplace.search_advanced")),n.Kb(2),n.yc("ngIf","activity"===e.view),n.Kb(1),n.yc("ngIf","value"===e.view),n.Kb(1),n.yc("ngIf","advanced"===e.view),n.Kb(1),n.yc("ngIf",e.hasOffers))},directives:[m.l,m.n,Gg,jg,Hr.b,m.m,Zg],pipes:[ui],styles:[".view-big[_ngcontent-%COMP%]{height:373px;min-height:373px;max-height:373px}.view-short[_ngcontent-%COMP%]{height:291px;min-height:291px;max-height:291px}"]}),t})();const rm=n.fc(im);function am(t,e){if(1&t){const t=n.ec();n.dc(0,"button",4),n.nc("click",function(){return n.Lc(t),n.qc().redeemCredits()}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"catalog.marketplace.offer.redeem")))}function om(t,e){if(1&t&&(n.Zb(0,"div",20),n.rc(1,"uniqueNumber")),2&t){const t=n.qc().$implicit;n.yc("innerHtml",n.sc(1,1,t.stuffData.uniqueSeries),n.Mc)}}function cm(t,e){if(1&t&&(n.dc(0,"div",21),n.dc(1,"div",22),n.Wc(2),n.cc(),n.cc()),2&t){const t=n.qc().$implicit,e=n.qc(2);n.Kb(2),n.Xc(e.offerTime(t))}}function lm(t,e){if(1&t&&(n.dc(0,"div",23),n.dc(1,"div",22),n.Wc(2),n.cc(),n.cc()),2&t){const t=n.qc().$implicit,e=n.qc(2);n.Kb(2),n.Xc(e.offerExpiredText(t))}}function hm(t,e){if(1&t){const t=n.ec();n.dc(0,"button",24),n.nc("click",function(){n.Lc(t);const e=n.qc().$implicit;return n.qc(2).takeBack(e)}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"catalog.marketplace.offer.pick")))}function um(t,e){if(1&t&&(n.dc(0,"div",25),n.Wc(1),n.cc()),2&t){const t=n.qc().$implicit,e=n.qc(2);n.Kb(1),n.Xc(e.offerSoldText(t))}}const _m=function(t){return{unique:t}},dm=function(t){return{"background-image":t}};function gm(t,e){if(1&t&&(n.dc(0,"div",7),n.dc(1,"div",8),n.dc(2,"div",9),n.Zb(3,"div",10),n.Uc(4,om,2,3,"div",11),n.cc(),n.dc(5,"div",12),n.dc(6,"div"),n.Wc(7),n.cc(),n.dc(8,"div",13),n.Wc(9),n.cc(),n.cc(),n.cc(),n.dc(10,"div",14),n.Wc(11),n.cc(),n.dc(12,"div",15),n.Uc(13,cm,3,1,"div",16),n.Uc(14,lm,3,1,"div",17),n.Uc(15,hm,3,3,"button",18),n.cc(),n.Uc(16,um,2,1,"div",19),n.cc()),2&t){const t=e.$implicit,s=n.qc(2);n.Kb(2),n.yc("ngClass",n.Cc(10,_m,t.isUniqueLimitedItem)),n.Kb(1),n.yc("ngStyle",n.Cc(12,dm,"url("+s.imageUrlOffer(t)+")")),n.Kb(1),n.yc("ngIf",t.isUniqueLimitedItem),n.Kb(3),n.Xc(s.getMarketplaceOfferTitle(t)),n.Kb(2),n.Xc(s.getMarketplacePrice(t)),n.Kb(2),n.Xc(s.getMarketplaceOfferDescription(t)),n.Kb(2),n.yc("ngIf",s.offerIsOnGoing(t)),n.Kb(1),n.yc("ngIf",s.offerIsExpired(t)),n.Kb(1),n.yc("ngIf",s.canTakeBack(t)),n.Kb(1),n.yc("ngIf",s.offerIsSold(t))}}function mm(t,e){if(1&t&&(n.dc(0,"div"),n.dc(1,"perfect-scrollbar",5),n.Uc(2,gm,17,14,"div",6),n.cc(),n.cc()),2&t){const t=n.qc();n.Kb(2),n.yc("ngForOf",t.ownOffers)}}let pm=(()=>{class t extends Wo{constructor(){super(...arguments),this.redeemButtonActive=!1}ngOnInit(){u.a.instance.communication.connection.send(new Ao.a)}get statusText(){const t=this._marketService.lastOwnOffers,e=u.a.instance.localization.getValue("catalog.marketplace.no_items");return t&&0!==t.length?u.a.instance.localization.getValueWithParameter("catalog.marketplace.items_found","count",t.length.toString()):e}get topText(){const t=this._marketService.lastOwnOffers,e=u.a.instance.localization.getValue("catalog.marketplace.redeem.no_sold_items");if(!t||0===t.length)return e;let s=0;for(const n of t.getValues())n.status==ko._Str_8295&&s++;if(s>0){const t=this._marketService.creditsWaiting;return this.redeemButtonActive=!0,u.a.instance.localization.getValueWithParameters("catalog.marketplace.redeem.get_credits",["count","credits"],[s.toString(),t.toString()])}return e}imageUrlOffer(t){if(!t)return"";switch(t.furniType){case 1:return u.a.instance.roomEngine.getFurnitureFloorIconUrl(t.furniId);case 2:return u.a.instance.roomEngine.getFurnitureWallIconUrl(t.furniId,t.extraData)}return""}getMarketplaceOfferTitle(t){return t?u.a.instance.localization.getValue(2==t.furniType?"wallItem.name."+t.furniId:"roomItem.name."+t.furniId):""}getMarketplaceOfferDescription(t){return t?u.a.instance.localization.getValue(2==t.furniType?"wallItem.desc."+t.furniId:"roomItem.desc."+t.furniId):""}getMarketplacePrice(t){return t?u.a.instance.localization.getValueWithParameter("catalog.marketplace.offer.price_own_item","price",t.price.toString()):""}offerIsOnGoing(t){return!!t&&t.status===ko._Str_15376}offerIsSold(t){return!!t&&t.status===ko._Str_8295}offerIsExpired(t){return!!t&&t.status===ko._Str_6495}canTakeBack(t){if(!t)return!1;const e=this.offerIsSold(t),s=this.offerIsExpired(t);return!e||s}offerExpiredText(t){return t?u.a.instance.localization.getValue("catalog.marketplace.offer.expired"):""}takeBack(t){t&&this._marketService.redeemExpiredMarketPlaceOffer(t.offerId)}offerSoldText(t){return t?u.a.instance.localization.getValue("catalog.marketplace.offer.sold"):""}offerTime(t){if(!t)return"";const e=Math.max(1,t._Str_5853),s=Math.floor(e/60);let n=e-60*s+" "+u.a.instance.localization.getValue("catalog.marketplace.offer.minutes");return s>0&&(n=s+" "+u.a.instance.localization.getValue("catalog.marketplace.offer.hours")+" "+n),u.a.instance.localization.getValueWithParameter("catalog.marketplace.offer.time_left","time",n)}redeemCredits(){this.redeemButtonActive=!1,this._marketService.redeemCredits()}get hasOwnOffersOnMarketplace(){return!(!this._marketService.lastOwnOffers||0===this._marketService.lastOwnOffers.length)}get ownOffers(){return this._marketService.lastOwnOffers.getValues()}}return t.CODE="marketplace_own_items",t.\u0275fac=function(e){return fm(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:6,vars:4,consts:[[1,"w-100","h-100","px-1","nitro-catalog-layout-marketplace-own-items-component"],[1,"badge","badge-secondary","badge-sm","text-wrap","mb-2"],["type","button","class","btn btn-block btn-success btn-sm mb-2",3,"click",4,"ngIf"],[4,"ngIf"],["type","button",1,"btn","btn-block","btn-success","btn-sm","mb-2",3,"click"],[2,"height","381px","min-height","381px","max-height","381px"],["class","rounded bg-secondary mb-2 p-2",4,"ngFor","ngForOf"],[1,"rounded","bg-secondary","mb-2","p-2"],[1,"d-flex","flex-row","mb-1"],[1,"position-relative","align-self-center","align-items-end","mr-2","flex-shrink-0",2,"width","36px","height","36px",3,"ngClass"],[1,"position-absolute","w-100","h-100",2,"background-repeat","no-repeat","background-position","center",3,"ngStyle"],["class","position-absolute unique-counter","style","bottom:0px;",3,"innerHtml",4,"ngIf"],[1,"align-self-center"],[1,"small"],[1,"badge","badge-primary","badge-sm","text-wrap","w-100","mb-1"],[1,"d-flex","flex-row"],["class","badge badge-primary badge-sm text-wrap w-100 d-flex",4,"ngIf"],["class","badge badge-danger badge-sm text-wrap w-100 d-flex",4,"ngIf"],["class","btn btn-primary btn-sm ml-2","style","white-space: nowrap;",3,"click",4,"ngIf"],["class","badge badge-success badge-sm text-wrap w-100",4,"ngIf"],[1,"position-absolute","unique-counter",2,"bottom","0px",3,"innerHtml"],[1,"badge","badge-primary","badge-sm","text-wrap","w-100","d-flex"],[1,"align-self-center","w-100"],[1,"badge","badge-danger","badge-sm","text-wrap","w-100","d-flex"],[1,"btn","btn-primary","btn-sm","ml-2",2,"white-space","nowrap",3,"click"],[1,"badge","badge-success","badge-sm","text-wrap","w-100"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.Wc(2),n.cc(),n.Uc(3,am,3,3,"button",2),n.Wc(4),n.Uc(5,mm,3,1,"div",3),n.cc()),2&t&&(n.Kb(2),n.Xc(e.topText),n.Kb(1),n.yc("ngIf",e.redeemButtonActive),n.Kb(1),n.Yc(" ",e.statusText," "),n.Kb(1),n.yc("ngIf",e.hasOwnOffersOnMarketplace))},directives:[m.n,Hr.b,m.m,m.l,m.o],pipes:[ui,pl],encapsulation:2}),t})();const fm=n.fc(pm);let Em=(()=>{class t extends Wo{}return t.CODE="pets",t.\u0275fac=function(e){return Sm(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:1,vars:0,consts:[[1,"d-flex","flex-column","w-100","h-100","card","nitro-catalog-layout-pets2-component"]],template:function(t,e){1&t&&n.Zb(0,"div",0)},encapsulation:2}),t})();const Sm=n.fc(Em);let bm=(()=>{class t extends Wo{}return t.CODE="pets2",t.\u0275fac=function(e){return vm(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:10,vars:4,consts:[[1,"d-flex","flex-column","w-100","h-100","card","nitro-catalog-layout-pets3-component","small","p-1"],[1,"position-relative","w-100",2,"min-height","422px","max-height","422px","height","422px"],[1,"overflow-hidden","d-flex","flex-column",2,"min-height","422px"],[1,"row","m-3"],[1,"col-sm-3","overflow-hidden","d-flex","justify-content-center","px-1"],["image-placeholder","",1,"align-self-center",3,"src"],[1,"col-sm","d-flex","justify-content-center","px-2"],[1,"align-self-center",3,"innerHtml"],[1,"mx-3",3,"innerHtml"],[1,"mx-3","mt-auto","mb-3",3,"innerHtml"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"perfect-scrollbar",1),n.dc(2,"div",2),n.dc(3,"div",3),n.dc(4,"div",4),n.Zb(5,"img",5),n.cc(),n.dc(6,"div",6),n.Zb(7,"h6",7),n.cc(),n.cc(),n.Zb(8,"div",8),n.Zb(9,"span",9),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(5),n.yc("src",e.getImage(1),n.Nc),n.Kb(2),n.yc("innerHtml",e.getText(1),n.Mc),n.Kb(1),n.yc("innerHtml",e.getText(2),n.Mc),n.Kb(1),n.yc("innerHtml",e.getText(3),n.Mc))},directives:[Hr.b,fa],encapsulation:2}),t})();const vm=n.fc(bm);let Im=(()=>{class t extends Wo{}return t.CODE="pets3",t.\u0275fac=function(e){return Rm(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:11,vars:4,consts:[[1,"nitro-catalog-layout-pets3-component","d-flex","flex-column","w-100","h-100"],[1,"position-relative","w-100",2,"min-height","422px","max-height","422px","height","422px"],[1,"d-flex","flex-column"],[1,"d-flex","mb-2"],[1,"d-flex","justify-content-center","align-items-center"],["image-placeholder","",3,"src"],[1,"d-flex","justify-content-center","align-items-center","flex-grow-1"],[1,"h5","m-0",3,"innerHtml"],[1,"h6","m-0","mb-2",3,"innerHtml"],[1,"h6","m-0",3,"innerHtml"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"perfect-scrollbar",1),n.dc(2,"div",2),n.dc(3,"div",3),n.dc(4,"div",4),n.Zb(5,"img",5),n.cc(),n.dc(6,"div",6),n.Zb(7,"p",7),n.cc(),n.cc(),n.Zb(8,"p",8),n.dc(9,"p",9),n.Wc(10,"sdfgsdfgsdfg"),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(5),n.yc("src",e.getImage(1),n.Nc),n.Kb(2),n.yc("innerHtml",e.getText(1),n.Mc),n.Kb(1),n.yc("innerHtml",e.getText(2),n.Mc),n.Kb(1),n.yc("innerHtml",e.getText(3),n.Mc))},directives:[Hr.b,fa],encapsulation:2}),t})();const Rm=n.fc(Im);function Tm(t,e){if(1&t&&n.Zb(0,"img",9),2&t){const t=n.qc();n.yc("src",t.getImage(1),n.Nc)}}function ym(t,e){if(1&t&&(n.dc(0,"div",10),n.Zb(1,"div",11),n.Zb(2,"div",12),n.cc()),2&t){const t=n.qc();n.Kb(1),n.yc("roomPreviewer",t.roomPreviewer)("width",243)("height",240),n.Kb(1),n.yc("vertical",!0)("activePage",t.activePage)("activeOffer",t.activeOffer)}}function Om(t,e){if(1&t&&(n.dc(0,"div",16),n.Wc(1),n.cc()),2&t){const t=n.qc().$implicit,e=n.qc();n.Kb(1),n.Xc(e.offerCount(t))}}const Cm=function(t){return{active:t}},Am=function(t){return{"background-image":t}};function Mm(t,e){if(1&t){const t=n.ec();n.dc(0,"div",13),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().selectOffer(s)}),n.dc(1,"button",14),n.Uc(2,Om,2,1,"div",15),n.cc(),n.cc()}if(2&t){const t=e.$implicit,s=n.qc();n.Kb(1),n.yc("ngClass",n.Cc(3,Cm,s.activeOffer===t))("ngStyle",n.Cc(5,Am,"url("+s.offerImage(t)+")")),n.Kb(1),n.yc("ngIf",s.offerCount(t)>1)}}let wm=(()=>{class t extends $o{constructor(){super(...arguments),this._groupNames=["wallpaper","floor","landscape"],this._groups=[],this._activeGroupIndex=-1}ngOnInit(){this.sortOffers(),this.selectFirstSpace()}sortOffers(){for(const t of this.offers){if(!t)continue;const e=this.getFirstProduct(t);if(e&&(e.productType===ge.WALL||e.productType===ge.FLOOR)){const s=this.getProductFurniData(e);if(s){const e=s.className,n=this._groupNames.indexOf(e);for(-1===n&&this._groupNames.push(e);this._groups.length<this._groupNames.length;)this._groups.push([]);switch(e){case"floor":case"wallpaper":case"landscape":this._groups[n].push(t)}}}}this.switchCategory("walls")}switchCategory(t){let e=-1;switch(t){case"walls":e=0;break;case"floor":e=1;break;case"landscape":e=2}this._activeGroupIndex=e}selectFirstSpace(){if(-1===this._activeGroupIndex)return;const t=this._groups[this.activeGroupIndex];t&&t.length&&this.selectOffer(t[0])}offerName(t){let e="";const s=this.getFirstProduct(t);if(s)switch(s.productType){case ge.FLOOR:e="roomItem.name."+s.furniClassId;break;case ge.WALL:e="wallItem.name."+s.furniClassId}return""===e?e:u.a.instance.getLocalization(e)}offerImage(t){if(!t)return"";const e=t.products[0];if(!e)return"";const s=this.getProductFurniData(e);if(!s)return"";const n=u.a.instance.getConfiguration("catalog.asset.url");let i="";switch(e.productType){case ge.WALL:switch(s.className){case"floor":i=["th",s.className,e.extraParam].join("_");break;case"wallpaper":i=["th","wall",e.extraParam].join("_");break;case"landscape":i=["th",s.className,e.extraParam.replace(".","_"),"001"].join("_")}break;default:return super.offerImage(t)}return n+"/"+i+".png"}get groups(){return this._groups}get activeGroupIndex(){return this._activeGroupIndex}}return t.CODE="spaces_new",t.\u0275fac=function(e){return Um(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:17,vars:21,consts:[[1,"d-flex","flex-column","w-100","h-100","nitro-catalog-layout-spaces-component"],[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","mb-2"],["image-placeholder","",3,"src",4,"ngIf"],["class","d-flex position-relative w-100 h-100",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-cente","btn-group","mt-2"],["type","button",1,"btn","btn-primary","btn-sm",3,"ngClass","click"],[1,"grid-container","w-100",2,"min-height","209px","max-height","209px","height","209px"],[1,"grid-items","grid-6"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],["image-placeholder","",3,"src"],[1,"d-flex","position-relative","w-100","h-100"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","width","height"],["nitro-catalog-purchase-component","",1,"d-flex","flex-grow-1","ml-2",3,"vertical","activePage","activeOffer"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image",3,"ngClass","ngStyle"],["class","position-absolute bg-danger px-1 py-0 rounded shadow count",4,"ngIf"],[1,"position-absolute","bg-danger","px-1","py-0","rounded","shadow","count"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.Uc(2,Tm,1,1,"img",2),n.Uc(3,ym,3,6,"div",3),n.dc(4,"div",4),n.dc(5,"button",5),n.nc("click",function(){return e.switchCategory("walls")}),n.Wc(6),n.rc(7,"translate"),n.cc(),n.dc(8,"button",5),n.nc("click",function(){return e.switchCategory("floor")}),n.Wc(9),n.rc(10,"translate"),n.cc(),n.dc(11,"button",5),n.nc("click",function(){return e.switchCategory("landscape")}),n.Wc(12),n.rc(13,"translate"),n.cc(),n.cc(),n.cc(),n.dc(14,"perfect-scrollbar",6),n.dc(15,"div",7),n.Uc(16,Mm,3,7,"div",8),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(2),n.yc("ngIf",!e.activeOffer&&e.getImage(1)),n.Kb(1),n.yc("ngIf",e.activeOffer),n.Kb(2),n.yc("ngClass",n.Cc(15,Cm,0===e.activeGroupIndex)),n.Kb(1),n.Xc(n.sc(7,9,"catalog.spaces.tab.walls")),n.Kb(2),n.yc("ngClass",n.Cc(17,Cm,1===e.activeGroupIndex)),n.Kb(1),n.Xc(n.sc(10,11,"catalog.spaces.tab.floors")),n.Kb(2),n.yc("ngClass",n.Cc(19,Cm,2===e.activeGroupIndex)),n.Kb(1),n.Xc(n.sc(13,13,"catalog.spaces.tab.views")),n.Kb(4),n.yc("ngForOf",e.groups[e.activeGroupIndex]))},encapsulation:2}),t})();const Um=n.fc(wm);function Dm(t,e){1&t&&n.Zb(0,"p",17),2&t&&n.yc("innerHtml",e.$implicit,n.Mc)}function Nm(t,e){if(1&t&&(n.dc(0,"b"),n.Wc(1),n.Zb(2,"img",18),n.cc()),2&t){const t=n.qc();n.Kb(1),n.Yc("",t.currentTrophyOffer.priceCredits," "),n.Kb(1),n.yc("src",t.getCurrencyUrl(-1),n.Nc)}}function Lm(t,e){if(1&t&&(n.dc(0,"b"),n.Wc(1),n.Zb(2,"img",18),n.cc()),2&t){const t=n.qc();n.Kb(1),n.Yc(" + ",t.currentTrophyOffer.priceActivityPoints," "),n.Kb(1),n.yc("src",t.getCurrencyUrl(t.currentTrophyOffer.priceActivityPointsType),n.Nc)}}let Pm=(()=>{class t extends Wo{constructor(){super(...arguments),this.textPages=[],this._allTrophyOffers=new Bs.a,this.currentTrophyOffer=null,this._imageUrl=null,this._currentTrophy=null,this._availableColorsForCurrentTrophy=null,this._currentTrophyIndex=0,this._orderOfColors=["g","s","b"],this.enteredText=""}ngOnInit(){const t=this.activePage.offers;if(this.textPages=this.activePage.localization.texts.filter(t=>t&&t.length>0),t&&t.length)for(const e of t){if(!e)continue;const t=this.getTrophyNameWithoutColors(e.localizationId),s=this.getTrophyColorCharacter(e.localizationId);let n=this._allTrophyOffers.getValue(t);n||(n=new Bs.a,this._allTrophyOffers.add(t,n)),n.add(s,e)}this.selectOfferByIndex(this._currentTrophyIndex)}selectOfferByIndex(t){const e=this._allTrophyOffers.getWithIndex(this._currentTrophyIndex);e&&this.selectOffer(e)}selectOffer(t){if(!t)return;let e=null;const s=[];this._orderOfColors.map(n=>{const i=t.getValue(n);i&&s.push(n),e||(e=i)}),e||(e=t.getWithIndex(0)),e&&(this._currentTrophyColor=this.getTrophyColorCharacter(e.localizationId)),this._availableColorsForCurrentTrophy=s,this.selectTrophyColor(e)}selectTrophyColor(t){if(!t)return;this.currentTrophyOffer=t;const e=t.products[0];if(!e)return;const s=u.a.instance.roomEngine.getFurnitureFloorImage(e.furniClassId,new q.a(2,0,0),64,this,0,e.extraParam);if(s){const t=s.getImage();t&&(this._imageUrl=t.src)}this._currentTrophy=e}handleTrophyColor(t){if(this._availableColorsForCurrentTrophy.indexOf(t)<0)return;const e=this._allTrophyOffers.getWithIndex(this._currentTrophyIndex).getValue(t);e&&(this._currentTrophyColor=t,this.selectTrophyColor(e))}getActiveClass(t){return this._availableColorsForCurrentTrophy.indexOf(t)>=0&&this._currentTrophyColor==t?"selected":""}imageReady(t,e,s){if(e){const t=mc.a.generateImageUrl(e);t&&this._ngZone.run(()=>this._imageUrl=t)}}handleButton(t){switch(t){case"next":this._allTrophyOffers.length-1==this._currentTrophyIndex?this._currentTrophyIndex=0:this._currentTrophyIndex++;break;case"previous":0==this._currentTrophyIndex?this._currentTrophyIndex=this._allTrophyOffers.length-1:this._currentTrophyIndex--}this.selectOfferByIndex(this._currentTrophyIndex)}imageFailed(t){}hasMultipleOffers(){return this._allTrophyOffers&&this._allTrophyOffers.length>0}trophyHasColor(t){return this._availableColorsForCurrentTrophy.indexOf(t)>-1}getTrophyNameWithoutColors(t){const e=this.getTrophyColorCharacter(t);return e.length>0?t.slice(0,t.length-1-e.length):t}getTrophyColorCharacter(t){if(-1!=t.indexOf("prizetrophy_2011_"))return"";const e=t.lastIndexOf("_")+1;if(e<=0)return"";const s=t.substr(e);return s.length>1||"g"!=s&&"s"!=s&&"b"!=s?"":s}buyCurrentItem(){this._catalogService.component&&this._catalogService.component.confirmPurchase(this.activePage,this.currentTrophyOffer,1,this.enteredText)}getText(){return""}get imageUrl(){return this._imageUrl}}return t.CODE="trophies",t.\u0275fac=function(e){return xm(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:26,vars:15,consts:[[1,"w-100","h-100","nitro-catalog-layout-trophies-component"],[1,"d-flex","flex-column"],["class","small",3,"innerHtml",4,"ngFor","ngForOf"],[1,"w-100","bg-secondary","rounded","nitro-catalog-layout-trophies-selector","row","mx-0","py-2","mb-2"],[1,"col-sm","d-flex","flex-row","justify-content-end"],["type","button",1,"btn","btn-sm","btn-secondary","align-self-end",3,"click"],[1,"col-sm","d-flex","flex-row","justify-content-center"],["image-placeholder","",1,"align-self-center",3,"src"],[1,"col-sm","d-flex","flex-row"],[1,"d-flex","flex-row","nitro-catalog-layout-trophies-types","mb-2"],["type","button",3,"ngClass","disabled","click"],["autofocus","","name","trophie","maxlength","300",1,"w-100","bg-secondary","rounded","mb-2",3,"ngModel","ngModelChange"],[1,"d-flex","flex-row","justify-content-between","px-2","py-1","bg-emperor","rounded","mt-auto"],[1,"align-self-center"],[4,"ngIf"],[1,"d-flex","flex-row"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"small",3,"innerHtml"],["image-placeholder","",1,"pl-1",3,"src"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.Uc(2,Dm,1,1,"p",2),n.dc(3,"div",3),n.dc(4,"div",4),n.dc(5,"button",5),n.nc("click",function(){return e.handleButton("previous")}),n.Wc(6,"Previous"),n.cc(),n.cc(),n.dc(7,"div",6),n.Zb(8,"img",7),n.cc(),n.dc(9,"div",8),n.dc(10,"button",5),n.nc("click",function(){return e.handleButton("next")}),n.Wc(11,"Next"),n.cc(),n.cc(),n.cc(),n.dc(12,"div",9),n.dc(13,"button",10),n.nc("click",function(){return e.handleTrophyColor("g")}),n.cc(),n.dc(14,"button",10),n.nc("click",function(){return e.handleTrophyColor("s")}),n.cc(),n.dc(15,"button",10),n.nc("click",function(){return e.handleTrophyColor("b")}),n.cc(),n.cc(),n.dc(16,"textarea",11),n.nc("ngModelChange",function(t){return e.enteredText=t}),n.Wc(17),n.cc(),n.dc(18,"div",12),n.dc(19,"div",13),n.Uc(20,Nm,3,2,"b",14),n.Uc(21,Lm,3,2,"b",14),n.cc(),n.dc(22,"div",15),n.dc(23,"button",16),n.nc("click",function(){return e.buyCurrentItem()}),n.Wc(24),n.rc(25,"translate"),n.cc(),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(2),n.yc("ngForOf",e.textPages),n.Kb(6),n.yc("src",e.imageUrl,n.Nc),n.Kb(5),n.yc("ngClass","btn btn-sm color-gold p-0 w-100 rounded mr-2 "+e.getActiveClass("g"))("disabled",!e.trophyHasColor("g")),n.Kb(1),n.yc("ngClass","btn btn-sm color-silver p-0 w-100 rounded mr-2 "+e.getActiveClass("s"))("disabled",!e.trophyHasColor("s")),n.Kb(1),n.yc("ngClass","btn btn-sm color-bronze p-0 w-100 rounded mr-2 "+e.getActiveClass("b"))("disabled",!e.trophyHasColor("b")),n.Kb(1),n.yc("ngModel",e.enteredText),n.Kb(1),n.Xc(e.enteredText),n.Kb(3),n.yc("ngIf",e.currentTrophyOffer.priceCredits),n.Kb(1),n.yc("ngIf",e.currentTrophyOffer.priceActivityPoints),n.Kb(3),n.Xc(n.sc(25,13,"buy")))},directives:[m.m,fa,m.l,ur.b,ur.i,ur.l,ur.n,m.n],pipes:[ui],encapsulation:2}),t})();const xm=n.fc(Pm);let Fm=(()=>{class t extends Wo{}return t.CODE="UNSUPPORTED",t.\u0275fac=function(e){return km(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:2,vars:0,consts:[[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","nitro-catalog-layout-unsupported-component"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Wc(1," This layout is not yet implemented\n"),n.cc())},encapsulation:2}),t})();const km=n.fc(Fm);function Wm(t,e){if(1&t&&n.Zb(0,"img",8),2&t){const t=n.qc();n.yc("src",t.getImage(1),n.Nc)}}function Bm(t,e){if(1&t&&(n.dc(0,"div",17),n.Zb(1,"i",18),n.dc(2,"span"),n.Wc(3),n.cc(),n.cc()),2&t){const t=n.qc().$implicit,e=n.qc();n.Kb(3),n.Xc(e.getOfferText(t))}}function Vm(t,e){if(1&t&&(n.dc(0,"b"),n.Wc(1),n.Zb(2,"img",19),n.cc()),2&t){const t=n.qc().$implicit,e=n.qc();n.Kb(1),n.Yc("",t.priceCredits," "),n.Kb(1),n.yc("src",e.getCurrencyUrl(-1),n.Nc)}}function Gm(t,e){if(1&t&&(n.dc(0,"b"),n.Wc(1),n.Zb(2,"img",19),n.cc()),2&t){const t=n.qc().$implicit,e=n.qc();n.Kb(1),n.Yc(" + ",t.priceActivityPoints," "),n.Kb(1),n.yc("src",e.getCurrencyUrl(t.priceActivityPointsType),n.Nc)}}function Km(t,e){if(1&t&&(n.dc(0,"b"),n.Wc(1),n.Zb(2,"img",19),n.cc()),2&t){const t=n.qc().$implicit,e=n.qc();n.Kb(1),n.Yc("",t.priceActivityPoints," "),n.Kb(1),n.yc("src",e.getCurrencyUrl(t.priceActivityPointsType),n.Nc)}}function Hm(t,e){if(1&t){const t=n.ec();n.dc(0,"button",20),n.nc("click",function(){n.Lc(t);const e=n.qc().$implicit;return n.qc().buyVip(e)}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"catalog.purchase_confirmation.gift")))}function jm(t,e){if(1&t){const t=n.ec();n.bc(0),n.dc(1,"div",9),n.Uc(2,Bm,4,1,"div",10),n.dc(3,"div",11),n.dc(4,"div",12),n.Uc(5,Vm,3,2,"b",13),n.Uc(6,Gm,3,2,"b",13),n.Uc(7,Km,3,2,"b",13),n.cc(),n.dc(8,"div",14),n.Uc(9,Hm,3,3,"button",15),n.dc(10,"button",16),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().buyVip(s)}),n.Wc(11),n.rc(12,"translate"),n.cc(),n.cc(),n.cc(),n.cc(),n.ac()}if(2&t){const t=e.$implicit;n.Kb(2),n.yc("ngIf",t.productCode),n.Kb(3),n.yc("ngIf",t.priceCredits),n.Kb(1),n.yc("ngIf",t.priceActivityPoints&&t.priceCredits),n.Kb(1),n.yc("ngIf",t.priceActivityPoints&&!t.priceCredits),n.Kb(2),n.yc("ngIf",t.giftable),n.Kb(2),n.Xc(n.sc(12,6,"buy"))}}let zm=(()=>{class t extends Wo{constructor(t,e,s){super(t,e,s),this._catalogService=t,this._marketService=e,this._ngZone=s,this.vipOffers=[],t.registerVipBuyTemplate(this),t.requestOffers(6)}setOffers(t){this._ngZone.run(()=>{this.vipOffers=t.reverse()})}getPurseContent(){const t=this._catalogService.purse;return u.a.instance.localization.getValueWithParameter("catalog.vip.extend.info","days",(31*t.clubPeriods+t.clubDays).toString())}buyVip(t){this._catalogService.component&&this._catalogService.component.confirmVipSubscription(t)}getOfferText(t){return t.months>0?u.a.instance.getLocalizationWithParameter("catalog.vip.item.header.months","num_months",t.months.toString()):u.a.instance.getLocalizationWithParameter("catalog.vip.item.header.days","num_days",t.extraDays.toString())}}return t.CODE="vip_buy",t.\u0275fac=function(e){return new(e||t)(n.Yb(gc),n.Yb(ko),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:11,vars:6,consts:[[1,"w-100","h-100","nitro-catalog-layout-default-component"],[1,"row"],[1,"col-5"],["image-placeholder","",3,"src",4,"ngIf"],[1,"col-7"],[1,"small",3,"innerHtml"],[1,"col-12","mt-1"],[4,"ngFor","ngForOf"],["image-placeholder","",3,"src"],[1,"bg-secondary","rounded","mb-2","p-1"],["class","bg-primary rounded p-1 w-100 mb-1 d-flex flex-row",4,"ngIf"],[1,"d-flex","flex-row","justify-content-between","px-2","py-1"],[1,"align-self-center"],[4,"ngIf"],[1,"d-flex","flex-row"],["type","button","class","btn btn-success btn-sm mr-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"bg-primary","rounded","p-1","w-100","mb-1","d-flex","flex-row"],[1,"icon","icon-catalogue-hc_small","mr-2","d-block","align-self-center"],["image-placeholder","",1,"pl-1",3,"src"],["type","button",1,"btn","btn-success","btn-sm","mr-1",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"div",2),n.Uc(3,Wm,1,1,"img",3),n.cc(),n.dc(4,"div",4),n.dc(5,"h6"),n.Wc(6),n.rc(7,"translate"),n.cc(),n.Zb(8,"p",5),n.cc(),n.dc(9,"div",6),n.Uc(10,jm,13,8,"ng-container",7),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(3),n.yc("ngIf",!e.activeOffer&&e.getImage(1)),n.Kb(3),n.Xc(n.sc(7,4,"catalog.vip.extend.title")),n.Kb(2),n.yc("innerHtml",e.getPurseContent(),n.Mc),n.Kb(2),n.yc("ngForOf",e.vipOffers))},directives:[m.n,m.m,fa],pipes:[ui],encapsulation:2}),t})();var Ym=s("qOv/");function qm(t,e){if(1&t){const t=n.ec();n.dc(0,"div",13),n.dc(1,"span",9),n.Wc(2),n.rc(3,"translate"),n.cc(),n.dc(4,"button",14),n.nc("click",function(){n.Lc(t);const e=n.qc().$implicit;return n.qc(2).selectOffer(e)}),n.Wc(5),n.rc(6,"translate"),n.cc(),n.cc()}2&t&&(n.Kb(2),n.Xc(n.sc(3,2,"catalog.club_gift.selectable")),n.Kb(3),n.Xc(n.sc(6,4,"catalog.club_gift.select")))}function Xm(t,e){if(1&t&&(n.dc(0,"div",9),n.Wc(1),n.cc()),2&t){const t=n.qc().$implicit,e=n.qc(2);n.Kb(1),n.Yc(" ",e.nonAvailableText(t.offerId)," ")}}const Zm=function(t){return{"background-image":t}};function Qm(t,e){if(1&t&&(n.dc(0,"div",7),n.Zb(1,"div",8),n.dc(2,"div",9),n.dc(3,"p",10),n.Wc(4),n.cc(),n.Uc(5,qm,7,6,"div",11),n.Uc(6,Xm,2,1,"div",12),n.cc(),n.cc()),2&t){const t=e.$implicit,s=n.qc(2);n.Kb(1),n.yc("ngStyle",n.Cc(4,Zm,"url("+s.offerImage(t)+")")),n.Kb(3),n.Xc(s.getProductFurniData(t.products[0]).name),n.Kb(1),n.yc("ngIf",s.getAvailability(t.offerId)),n.Kb(1),n.yc("ngIf",!s.getAvailability(t.offerId))}}function Jm(t,e){if(1&t&&(n.dc(0,"div",2),n.dc(1,"p",3),n.Wc(2),n.cc(),n.dc(3,"perfect-scrollbar",4),n.Uc(4,Qm,7,6,"div",5),n.cc(),n.dc(5,"p",6),n.Wc(6),n.cc(),n.cc()),2&t){const t=n.qc();n.Kb(2),n.Xc(t.giftsAvailable),n.Kb(2),n.yc("ngForOf",t.gifts),n.Kb(2),n.Xc(t.pastClubDays)}}function $m(t,e){if(1&t){const t=n.ec();n.dc(0,"div",15),n.dc(1,"div",16),n.dc(2,"h6",17),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",18),n.nc("click",function(){return n.Lc(t),n.qc().hidePopup()}),n.Zb(6,"i",19),n.cc(),n.cc(),n.dc(7,"div",20),n.dc(8,"div",21),n.Zb(9,"div",22),n.cc(),n.dc(10,"div",23),n.dc(11,"div",24),n.Wc(12),n.cc(),n.cc(),n.cc(),n.dc(13,"div",25),n.dc(14,"div",26),n.dc(15,"button",27),n.nc("click",function(){return n.Lc(t),n.qc().confirmGift()}),n.Wc(16),n.rc(17,"translate"),n.cc(),n.dc(18,"button",28),n.nc("click",function(){return n.Lc(t),n.qc().hidePopup()}),n.Wc(19),n.rc(20,"translate"),n.cc(),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(3),n.Xc(n.sc(4,5,"catalog.club_gift.confirm")),n.Kb(6),n.yc("ngStyle",n.Cc(11,Zm,"url("+t.getGiftImage()+")")),n.Kb(3),n.Xc(t.giftName()),n.Kb(4),n.Xc(n.sc(17,7,"catalog.club_gift.select")),n.Kb(3),n.Xc(n.sc(20,9,"cancel"))}}let tp=(()=>{class t extends Wo{constructor(t,e,s){super(t,e,s),this._catalogService=t,this._marketService=e,this._ngZone=s,this.showPopup=!1,this.vipOffers=[],this._currentSelectedVipOffer=null}get visible(){return null!==this._catalogService.clubGiftsParser}hidePopup(){this.showPopup=!1}getAvailability(t){return this._catalogService.clubGiftsParser.getOfferExtraData(t).isSelectable&&this._catalogService.clubGiftsParser.giftsAvailable>0}get gifts(){return this.visible?this._catalogService.clubGiftsParser.offers:[]}get direction(){return new q.a(90)}selectOffer(t){this._currentSelectedVipOffer=t,this.showPopup=!0}getGiftImage(){return this.offerImage(this._currentSelectedVipOffer)}giftName(){return this.getProductFurniData(this._currentSelectedVipOffer.products[0]).name}confirmGift(){u.a.instance.communication.connection.send(new Ym.a(this._currentSelectedVipOffer.localizationId)),this._catalogService.clubGiftsParser.giftsAvailable--,this.showPopup=!1}get pastClubDays(){const t=this._catalogService.purse.pastClubDays,e=t>31?"catalog.club_gift.past_club.long":"catalog.club_gift.past_club",s=Math.floor(t%31),n=Math.floor(t/31);let i=u.a.instance.localization.getValue(e);return i=i.replace("%days%",s.toString()),i=i.replace("%months%",n.toString()),i}nonAvailableText(t){const e=this._catalogService.clubGiftsParser.getOfferExtraData(t),s=e.availableInDays-this._catalogService.purse.pastClubDays;if(s<=0)return"";let n="";n=e._Str_12313?"catalog.club_gift.vip_missing":"catalog.club_gift.club_missing",s>31&&(n+=".long");const i=s%31,r=s/31;let a=u.a.instance.localization.getValue(n);return a=a.replace("%days%",i.toString()),a=a.replace("%months%",r.toString()),a}get giftsAvailable(){if(!this.visible)return"";const t=this._catalogService.clubGiftsParser;return t.giftsAvailable>0?u.a.instance.localization.getValueWithParameter("catalog.club_gift.available","amount",t.giftsAvailable.toString()):t.daysUntilNextGift>0?u.a.instance.localization.getValueWithParameter("catalog.club_gift.days_until_next","days",t.daysUntilNextGift.toString()):this._catalogService.hasClubDays()?u.a.instance.localization.getValue("catalog.club_gift.not_available"):u.a.instance.localization.getValue("catalog.club_gift.no_club")}}return t.CODE="club_gifts",t.\u0275fac=function(e){return new(e||t)(n.Yb(gc),n.Yb(ko),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:2,vars:2,consts:[["class","w-100 h-100 nitro-catalog-layout-vip-gifts-component px-1",4,"ngIf"],["class","nitro-catalog-confirm-purchase-component card",3,"bringToTop","draggable",4,"ngIf"],[1,"w-100","h-100","nitro-catalog-layout-vip-gifts-component","px-1"],[1,"text-center","w-100"],[2,"min-height","450px","max-height","450px","height","450px"],["class","gift-item rounded bg-secondary mb-2 d-flex flex-row p-1",4,"ngFor","ngForOf"],[1,"w-100","text-center","p-0","m-0"],[1,"gift-item","rounded","bg-secondary","mb-2","d-flex","flex-row","p-1"],[1,"gift-image","align-self-center","mr-2","flex-shrink-0",3,"ngStyle"],[1,"w-100"],[1,"mb-0","pb-0","d-block"],["class","w-100 d-flex flex-row justify-content-between",4,"ngIf"],["class","w-100",4,"ngIf"],[1,"w-100","d-flex","flex-row","justify-content-between"],["type","button",1,"btn","btn-sm","btn-primary","align-self-center",3,"click"],[1,"nitro-catalog-confirm-purchase-component","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-3"],[1,"col-6","d-flex","flex-column"],[1,"product-preview","bg-secondary","rounded",3,"ngStyle"],[1,"col-6","d-flex","flex-column","align-items-center","justify-content-center"],[1,"offer-name"],[1,"row","align-items-end","pt-0","px-3","pb-3"],[1,"col","btn-group"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(n.Uc(0,Jm,7,3,"div",0),n.Uc(1,$m,21,13,"div",1)),2&t&&(n.yc("ngIf",e.visible),n.Kb(1),n.yc("ngIf",e.showPopup))},directives:[m.n,Hr.b,m.m,m.o,Dr,Kr],pipes:[ui],encapsulation:2}),t})();class ep{getLayoutForType(t){switch(t){case Eg.CODE:return Eg;case yg.CODE:return yg;case pg.CODE:return pg;case Em.CODE:return Em;case bm.CODE:return bm;case Im.CODE:return Im;case wm.CODE:return wm;case $o.CODE:return $o;case zm.CODE:return zm;case kg.CODE:return kg;case Fg.CODE:return Fg;case Pm.CODE:return Pm;case lc.CODE:return lc;case tp.CODE:return tp;case pm.CODE:return pm;case im.CODE:return im;default:return Fm}}}const sp=["layoutsContainer"],np=function(t){return{active:t}};function ip(t,e){if(1&t){const t=n.ec();n.bc(0),n.dc(1,"button",18),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc(3).selectTab(s)}),n.Wc(2),n.cc(),n.ac()}if(2&t){const t=e.$implicit,s=n.qc(3);n.Kb(1),n.yc("ngClass",n.Cc(2,np,s.activeTab===t)),n.Kb(1),n.Xc(t.localization)}}function rp(t,e){if(1&t&&(n.dc(0,"div",15),n.dc(1,"div",16),n.Uc(2,ip,3,4,"ng-container",17),n.cc(),n.cc()),2&t){const t=n.qc(2);n.Kb(2),n.yc("ngForOf",t.catalogRoot.children)}}function ap(t,e){1&t&&n.Zb(0,"div",19)}function op(t,e){}function cp(t,e){if(1&t){const t=n.ec();n.dc(0,"div",5),n.dc(1,"div",6),n.dc(2,"h6",7),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",8),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(6,"i",9),n.cc(),n.cc(),n.Uc(7,rp,3,1,"div",10),n.dc(8,"div",11),n.Uc(9,ap,1,0,"div",12),n.dc(10,"div",13),n.Uc(11,op,0,0,"ng-template",null,14,n.Vc),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(3),n.Xc(n.sc(4,3,"catalog.title")),n.Kb(4),n.yc("ngIf",t.catalogRoot&&t.catalogRoot.children.length>0),n.Kb(2),n.yc("ngIf",t.activeTab&&t.activeTab.children.length>0)}}function lp(t,e){if(1&t&&n.Zb(0,"nitro-catalog-confirm-marketplace-purchase-component",20),2&t){const t=n.qc();n.yc("offer",t.currentMarketplaceOfferToBuy)}}function hp(t,e){if(1&t&&n.Zb(0,"nitro-catalog-confirm-purchase-component",21),2&t){const t=n.qc();n.yc("giftOffer",t.giftOffer)("page",t.purchaseOfferPage)("offer",t.purchaseOffer)("quantity",t.purchaseOfferQuantity)("extra",t.purchaseOfferExtra)("completed",t.purchaseCompleted)}}function up(t,e){if(1&t&&n.Zb(0,"nitro-catalog-confirm-vip-subscription-component",22),2&t){const t=n.qc();n.yc("subscription",t.purchaseVipSubscription)}}function _p(t,e){1&t&&n.Zb(0,"nitro-catalog-confirm-purchase-insufficient-funds")}function dp(t,e){1&t&&n.Zb(0,"nitro-catalog-customize-gift-component")}let gp=(()=>{class t{constructor(t,e,s,n,i,r,a){this._settingsService=t,this._notificationService=e,this._catalogService=s,this._marketplaceService=n,this._componentFactoryResolver=i,this._purseService=r,this._ngZone=a,this.visible=!1,this._roomPreviewer=null,this._previewStuffData=null,this._lastComponent=null,this._layoutFactory=null,this._activeTab=null,this._activeOffer=null,this._purchaseOfferPage=null,this._purchaseOffer=null,this._purchaseGiftOffer=null,this._purchaseVipSubscription=null,this._purchaseOfferQuantity=1,this._purchaseOfferExtra=null,this._purchaseCompleted=!1,this._showInsufficientFunds=!1,this._showGiftConfigurator=!1,s.requestClubGifts()}ngOnInit(){this._catalogService.component=this,this._layoutFactory=new ep,this._roomPreviewer||(this._roomPreviewer=new gn(u.a.instance.roomEngine,++gn.PREVIEW_COUNTER))}ngOnChanges(t){const e=t.visible.currentValue;e!==t.visible.previousValue&&(e?this.prepareCatalog():this.removeLastComponent())}ngOnDestroy(){this._roomPreviewer&&this._roomPreviewer.dispose(),this.reset(),this._catalogService.component=null,this._layoutFactory=null}reset(){this.removeLastComponent(),this._activeTab=null,this._activeOffer=null,this.hidePurchaseConfirmation()}hide(){this._settingsService.hideCatalog(),this._catalogService.clearSearchResults()}hidePurchaseConfirmation(){this._purchaseOfferPage=null,this._purchaseOffer=null,this._purchaseOfferQuantity=1,this._purchaseOfferExtra=null,this._purchaseVipSubscription=null,this._purchaseGiftOffer=null,this._showGiftConfigurator=!1}prepareCatalog(){this._catalogService.catalogRoot?setTimeout(()=>{this._activeTab?this._catalogService.activePage?this.setupLayout():this.selectFirstPage(this._activeTab):this.selectFirstTab()},0):this._catalogService.setupCatalog(gc.MODE_NORMAL)}setupLayout(){const t=this._catalogService.activePage;if(!t)return;const e=this._layoutFactory.getLayoutForType(t.layoutCode);e?(this.createComponent(e),this._lastComponent&&(this._lastComponent.instance.activePage=t),this.selectOffer(null)):this.removeLastComponent()}createComponent(t){if(!t||!this.layoutsContainer)return;this.removeLastComponent();const e=this._componentFactoryResolver.resolveComponentFactory(t);let s=null;e&&(s=this.layoutsContainer.createComponent(e)),this._lastComponent=s}removeLastComponent(){this.layoutsContainer&&this.layoutsContainer.remove(),this._lastComponent=null,this._activeOffer=null}selectTab(t){t&&(this._activeTab=t,this.selectFirstPage(t))}reselectCurrentTab(){this.selectFirstPage(this._activeTab)}selectPage(t){t&&this._catalogService.requestPage(t)}selectFirstPage(t,e=!1){t&&this.selectPage(e||!t.children.length?t:t.children&&t.children[0])}selectFirstTab(){if(!this.catalogRoot)return;const t=this.catalogRoot.children&&this.catalogRoot.children[0];t&&this.selectTab(t)}selectOffer(t){if(this._activeOffer=t,this._activeOffer){const t=this._activeOffer.products[0];if(!t)return;if(!this._roomPreviewer)return;const e=this._catalogService.getFurnitureDataForProductOffer(t);if(!e&&t.productType!==ge.ROBOT)return;this._ngZone.runOutsideAngular(()=>{switch(t.productType){case ge.ROBOT:{this._roomPreviewer.updateObjectRoom("default","default","default");const e=u.a.instance.avatar.getFigureStringWithFigureIds(t.extraParam,"m",[]);this._roomPreviewer.addAvatarIntoRoom(e,0)}break;case ge.FLOOR:if(this._roomPreviewer.updateObjectRoom("default","default","default"),e.specialType===pa.FIGURE_PURCHASABLE_SET){const t=[],s=e.customParams.split(",");for(const e of s){const s=parseInt(e);u.a.instance.avatar.isValidFigureSetForGender(s,u.a.instance.sessionDataManager.gender)&&t.push(s)}const n=u.a.instance.avatar.getFigureStringWithFigureIds(u.a.instance.sessionDataManager.figure,u.a.instance.sessionDataManager.gender,t);this._roomPreviewer.addAvatarIntoRoom(n,0)}else this._roomPreviewer.addFurnitureIntoRoom(t.furniClassId,new q.a(90),this._previewStuffData);return;case ge.WALL:switch(e.className){case"floor":this._roomPreviewer.reset(!1),this._roomPreviewer.updateObjectRoom(t.extraParam);break;case"wallpaper":this._roomPreviewer.reset(!1),this._roomPreviewer.updateObjectRoom(null,t.extraParam);break;case"landscape":this._roomPreviewer.reset(!1),this._roomPreviewer.updateObjectRoom(null,null,t.extraParam);break;default:return this._roomPreviewer.updateObjectRoom("default","default","default"),void this._roomPreviewer.addWallItemIntoRoom(t.furniClassId,new q.a(90),t.extraParam)}return}})}else this._ngZone.runOutsideAngular(()=>this._roomPreviewer&&this._roomPreviewer.reset(!1))}hasSufficientFunds(t,e,s,n=1){if(!this._purseService)return!1;const i=this._purseService.currencies,r=i.get(-1),a=i.get(e);return!(r<t*n||a<s*n)}confirmPurchase(t,e,s=1,n=null,i=!1){this.hasSufficientFunds(e.priceCredits,e.priceActivityPointsType,e.priceActivityPoints,s)?(this._purchaseOfferPage=t,this._purchaseOffer=e,this._purchaseOfferQuantity=s,this._purchaseOfferExtra=n,i&&(this._purchaseGiftOffer=e)):this.setInsufficientFunds(!0)}confirmVipSubscription(t){this.hasSufficientFunds(t.priceCredits,t.priceActivityPointsType,t.priceActivityPoints,1)?this._purchaseVipSubscription=t:this.setInsufficientFunds(!0)}get previewStuffData(){return this._previewStuffData}set previewStuffData(t){this._previewStuffData=t}get roomPreviewer(){return this._roomPreviewer}get catalogRoot(){return this._catalogService.catalogRoot}get activeTab(){return this._activeTab}get activeOffer(){return this._activeOffer}get activePage(){return this._catalogService.activePage}get activePageData(){return this._catalogService.activePageData}get purchaseOfferPage(){return this._purchaseOfferPage}get purchaseOffer(){return this._purchaseOffer}get giftOffer(){return this._purchaseGiftOffer}get showGiftConfigurator(){return this._showGiftConfigurator}makeGiftConfiguratorVisible(){this._showGiftConfigurator=!0}get purchaseOfferQuantity(){return this._purchaseOfferQuantity}get purchaseOfferExtra(){return this._purchaseOfferExtra}get purchaseCompleted(){return this._purchaseCompleted}get purchaseVipSubscription(){return this._purchaseVipSubscription}get currentMarketplaceOfferToBuy(){return this._marketplaceService.currentMarketplaceOfferToBuy}setInsufficientFunds(t){this._showInsufficientFunds=t}get showInsufficientFunds(){return this._showInsufficientFunds}handleSearchResults(t){this._catalogService.setSearchPage(t),this.setupLayout()}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(g),n.Yb(es),n.Yb(gc),n.Yb(ko),n.Yb(n.m),n.Yb(Su),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-catalog-main-component"]],viewQuery:function(t,e){if(1&t&&n.cd(sp,1,n.Z),2&t){let t;n.Hc(t=n.oc())&&(e.layoutsContainer=t.first)}},inputs:{visible:"visible"},features:[n.Ib],decls:6,vars:6,consts:[["class","nitro-catalog card",3,"bringToTop","draggable",4,"ngIf"],[3,"offer",4,"ngIf"],[3,"giftOffer","page","offer","quantity","extra","completed",4,"ngIf"],[3,"subscription",4,"ngIf"],[4,"ngIf"],[1,"nitro-catalog","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],["class","d-flex px-3 pt-3",4,"ngIf"],[1,"row","p-3"],["nitro-catalog-navigation-component","","class","col-4",4,"ngIf"],[1,"col"],["layoutsContainer",""],[1,"d-flex","px-3","pt-3"],[1,"btn-group","w-100"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-secondary","btn-sm",3,"ngClass","click"],["nitro-catalog-navigation-component","",1,"col-4"],[3,"offer"],[3,"giftOffer","page","offer","quantity","extra","completed"],[3,"subscription"]],template:function(t,e){1&t&&(n.Uc(0,cp,13,5,"div",0),n.Uc(1,lp,1,1,"nitro-catalog-confirm-marketplace-purchase-component",1),n.Uc(2,hp,1,6,"nitro-catalog-confirm-purchase-component",2),n.Uc(3,up,1,1,"nitro-catalog-confirm-vip-subscription-component",3),n.Uc(4,_p,1,0,"nitro-catalog-confirm-purchase-insufficient-funds",4),n.Uc(5,dp,1,0,"nitro-catalog-customize-gift-component",4)),2&t&&(n.yc("ngIf",e.visible),n.Kb(1),n.yc("ngIf",e.currentMarketplaceOfferToBuy),n.Kb(1),n.yc("ngIf",(null!==e.purchaseOffer||null!==e.giftOffer)&&!e.showGiftConfigurator),n.Kb(1),n.yc("ngIf",null!==e.purchaseVipSubscription),n.Kb(1),n.yc("ngIf",e.showInsufficientFunds),n.Kb(1),n.yc("ngIf",null!==e.giftOffer&&e.showGiftConfigurator))},encapsulation:2}),t})();var mp=s("VYTg");class pp{constructor(t,e,s){this._level=t,this._tileSize=e,this._name=s}get level(){return this._level}get tileSize(){return this._tileSize}get name(){return this._name}}const fp=["nitro-navigator-room-creator-component",""],Ep=function(t){return{active:t}},Sp=function(t){return{"background-image":t}};function bp(t,e){if(1&t){const t=n.ec();n.dc(0,"div",21),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().setRoomLayout(s.name)}),n.dc(1,"button",22),n.dc(2,"div",23),n.Wc(3),n.rc(4,"translate"),n.cc(),n.cc(),n.cc()}if(2&t){const t=e.$implicit,s=n.qc();n.Kb(1),n.yc("ngClass",n.Cc(6,Ep,s.roomLayoutControl.value===t.name))("ngStyle",n.Cc(8,Sp,"url("+s.getRoomLayoutImageUrl(t.name)+")")),n.Kb(2),n.Zc("",t.tileSize," ",n.sc(4,4,"navigator.createroom.tilesize"),"")}}function vp(t,e){if(1&t&&(n.dc(0,"option",24),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t){const t=e.$implicit;n.yc("value",t.id),n.Kb(1),n.Xc(n.sc(2,2,t.name))}}function Ip(t,e){if(1&t&&(n.dc(0,"option",24),n.Wc(1),n.cc()),2&t){const t=e.$implicit;n.yc("value",t),n.Kb(1),n.Xc(t)}}function Rp(t,e){if(1&t&&(n.dc(0,"option",24),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t){const t=e.$implicit;n.yc("value",t.key),n.Kb(1),n.Xc(n.sc(2,2,t.value))}}let Tp=(()=>{class t{constructor(t,e,s){this._navigatorService=t,this._activeModal=e,this._formBuilder=s,this._layouts=[],this._maxVisitors=[],this._tradeSettings=[],this._roomCreateListener=null}ngOnInit(){this.setRoomLayouts(),this.setMaxVisitors(50),this.setTradeSettings(),this.createForm(),this._roomCreateListener=new Dh.a(this.onRoomCreatedEvent.bind(this)),u.a.instance.communication.registerMessageEvent(this._roomCreateListener)}ngOnDestroy(){u.a.instance.communication.removeMessageEvent(this._roomCreateListener)}onRoomCreatedEvent(t){this.hide()}createForm(){let t=0;const e=this.categories[0];e&&(t=e.id),this._form=this._formBuilder.group({roomName:["",ur.u.required],roomDesc:[""],roomLayout:[this.layouts[0].name,ur.u.required],roomCategory:[t.toString(),ur.u.required],roomVisitors:[this.maxVisitors[0].toString(),ur.u.required],roomTrade:["0",ur.u.required]})}submit(){if(!this.form.valid)return;const t=this.roomNameControl.value,e=this.roomDescControl.value,s="model_"+this.roomLayoutControl.value,n=parseInt(this.roomCategoryControl.value),i=parseInt(this.roomVisitorsControl.value),r=parseInt(this.roomTradeControl.value);t&&""!==t&&u.a.instance.communication.connection.send(new mp.a(t,e,s,n,i,r))}hide(){this._activeModal.close()}setRoomLayouts(){this._layouts=[new pp(dt._Str_3159,104,"a"),new pp(dt._Str_3159,94,"b"),new pp(dt._Str_3159,36,"c"),new pp(dt._Str_3159,84,"d"),new pp(dt._Str_3159,80,"e"),new pp(dt._Str_3159,80,"f"),new pp(dt._Str_3159,416,"i"),new pp(dt._Str_3159,320,"j"),new pp(dt._Str_3159,448,"k"),new pp(dt._Str_3159,352,"l"),new pp(dt._Str_3159,384,"m"),new pp(dt._Str_3159,372,"n"),new pp(dt._Str_2964,80,"g"),new pp(dt._Str_2964,74,"h"),new pp(dt._Str_2964,416,"o"),new pp(dt._Str_2964,352,"p"),new pp(dt._Str_2964,304,"q"),new pp(dt._Str_2964,336,"r"),new pp(dt._Str_2964,748,"u"),new pp(dt._Str_2964,438,"v"),new pp(dt._Str_2575,540,"t"),new pp(dt._Str_2575,512,"w"),new pp(dt._Str_2575,396,"x"),new pp(dt._Str_2575,440,"y"),new pp(dt._Str_2575,456,"z"),new pp(dt._Str_2575,208,"0"),new pp(dt._Str_2575,1009,"1"),new pp(dt._Str_2575,1044,"2"),new pp(dt._Str_2575,183,"3"),new pp(dt._Str_2575,254,"4"),new pp(dt._Str_2575,1024,"5"),new pp(dt._Str_2575,801,"6"),new pp(dt._Str_2575,354,"7"),new pp(dt._Str_2575,888,"8"),new pp(dt._Str_2575,926,"9")]}setMaxVisitors(e){this._maxVisitors=[];let s=t.MAX_VISITOR_STEPPER;for(;s<=e;)this._maxVisitors.push(s),s+=t.MAX_VISITOR_INCREMENTOR}setTradeSettings(){this._tradeSettings=[],this._tradeSettings.push("${navigator.roomsettings.trade_not_allowed}","${navigator.roomsettings.trade_not_with_Controller}","${navigator.roomsettings.trade_allowed}")}setRoomLayout(t){const e=this.roomLayoutControl;e&&e.setValue(t)}getRoomLayoutImageUrl(t){let e=u.a.instance.getConfiguration("images.url");return e+=`/navigator/models/model_${t}.png`,e}get form(){return this._form}get categories(){return this._navigatorService.categories}get layouts(){return this._layouts}get maxVisitors(){return this._maxVisitors}get tradeSettings(){return this._tradeSettings}get roomNameControl(){return this._form.controls.roomName}get roomDescControl(){return this._form.controls.roomDesc}get roomLayoutControl(){return this._form.controls.roomLayout}get roomCategoryControl(){return this._form.controls.roomCategory}get roomVisitorsControl(){return this._form.controls.roomVisitors}get roomTradeControl(){return this._form.controls.roomTrade}get isLoading(){return!1}}return t.MAX_VISITOR_STEPPER=10,t.MAX_VISITOR_INCREMENTOR=5,t.\u0275fac=function(e){return new(e||t)(n.Yb(Kh),n.Yb(t_.a),n.Yb(ur.c))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-navigator-room-creator-component",""]],attrs:fp,decls:49,vars:32,consts:[[1,"d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","row","p-3"],[1,"col-7"],[1,"grid-container",2,"height","479px","min-height","479px","max-height","479px"],[1,"grid-items","grid-2"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"col-5"],[3,"formGroup"],[1,"form-group"],["type","text","formControlName","roomName",1,"form-control","form-control-sm"],["formControlName","roomDesc",1,"form-control","form-control-sm"],["formControlName","roomCategory",1,"form-control","form-control-sm"],[3,"value",4,"ngFor","ngForOf"],["formControlName","roomVisitors",1,"form-control","form-control-sm"],["formControlName","roomTrade",1,"form-control","form-control-sm"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-success",3,"disabled","click"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button",1,"btn","btn-secondary","align-items-end","detail-info","has-image",3,"ngClass","ngStyle"],[1,"badge","badge-primary"],[3,"value"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"h6",1),n.Wc(2),n.rc(3,"translate"),n.cc(),n.dc(4,"button",2),n.nc("click",function(){return e.hide()}),n.Zb(5,"i",3),n.cc(),n.cc(),n.dc(6,"div",4),n.dc(7,"div",5),n.dc(8,"perfect-scrollbar",6),n.dc(9,"div",7),n.Uc(10,bp,5,10,"div",8),n.cc(),n.cc(),n.cc(),n.dc(11,"div",9),n.dc(12,"form",10),n.dc(13,"div",11),n.dc(14,"label"),n.Wc(15),n.rc(16,"translate"),n.cc(),n.Zb(17,"input",12),n.cc(),n.dc(18,"div",11),n.dc(19,"label"),n.Wc(20),n.rc(21,"translate"),n.cc(),n.Zb(22,"textarea",13),n.cc(),n.dc(23,"div",11),n.dc(24,"label"),n.Wc(25),n.rc(26,"translate"),n.cc(),n.dc(27,"select",14),n.Uc(28,vp,3,4,"option",15),n.cc(),n.cc(),n.dc(29,"div",11),n.dc(30,"label"),n.Wc(31),n.rc(32,"translate"),n.cc(),n.dc(33,"select",16),n.Uc(34,Ip,2,2,"option",15),n.cc(),n.cc(),n.dc(35,"div",11),n.dc(36,"label"),n.Wc(37),n.rc(38,"translate"),n.cc(),n.dc(39,"select",17),n.Uc(40,Rp,3,4,"option",15),n.rc(41,"keyvalue"),n.cc(),n.cc(),n.cc(),n.dc(42,"div",18),n.dc(43,"button",19),n.nc("click",function(){return e.submit()}),n.Wc(44),n.rc(45,"translate"),n.cc(),n.dc(46,"button",20),n.nc("click",function(){return e.hide()}),n.Wc(47),n.rc(48,"translate"),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(2),n.Xc(n.sc(3,14,"navigator.createroom.title")),n.Kb(8),n.yc("ngForOf",e.layouts),n.Kb(2),n.yc("formGroup",e.form),n.Kb(3),n.Xc(n.sc(16,16,"navigator.createroom.roomnameinfo")),n.Kb(5),n.Xc(n.sc(21,18,"navigator.createroom.roomdescinfo")),n.Kb(5),n.Xc(n.sc(26,20,"navigator.category")),n.Kb(3),n.yc("ngForOf",e.categories),n.Kb(3),n.Xc(n.sc(32,22,"navigator.maxvisitors")),n.Kb(3),n.yc("ngForOf",e.maxVisitors),n.Kb(3),n.Xc(n.sc(38,24,"navigator.tradesettings")),n.Kb(3),n.yc("ngForOf",n.sc(41,26,e.tradeSettings)),n.Kb(3),n.yc("disabled",e.form.pristine||e.form.invalid),n.Kb(1),n.Xc(n.sc(45,28,"navigator.createroom.create")),n.Kb(3),n.Xc(n.sc(48,30,"generic.cancel")))},directives:[Hr.b,m.m,ur.w,ur.m,ur.g,ur.b,ur.l,ur.f,ur.t,m.l,m.o,ur.o,ur.v],pipes:[ui,m.h],encapsulation:2}),t})();const yp=["nitro-navigator-room-doorbell-component",""];function Op(t,e){1&t&&(n.dc(0,"span"),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"navigator.doorbell.info")))}function Cp(t,e){1&t&&(n.dc(0,"span"),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"navigator.doorbell.waiting")))}function Ap(t,e){1&t&&(n.dc(0,"span"),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"navigator.doorbell.no.answer")))}function Mp(t,e){if(1&t){const t=n.ec();n.dc(0,"button",10),n.nc("click",function(){return n.Lc(t),n.qc().ring()}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"navigator.doorbell.button.ring")))}let wp=(()=>{class t{constructor(t,e){this._navigatorService=t,this._activeModal=e,this.room=null,this.isWaiting=!1,this.noAnswer=!1}ring(){!this.room||this.isWaiting||this.noAnswer||(this._navigatorService.goToRoom(this.room.roomId),this.hide())}close(){this._navigatorService.component.closeRoomDoorbell(),this.isWaiting&&u.a.instance.communication.connection.send(new Nh.a)}hide(){this._activeModal.close()}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(Kh),n.Yb(t_.a))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-navigator-room-doorbell-component",""]],inputs:{room:"room",isWaiting:"isWaiting",noAnswer:"noAnswer"},attrs:yp,decls:18,vars:10,consts:[[1,"modal-header"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"row"],[1,"col-12"],[4,"ngIf"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Wc(1),n.rc(2,"translate"),n.dc(3,"button",1),n.nc("click",function(){return e.close()}),n.Zb(4,"i",2),n.cc(),n.cc(),n.dc(5,"div",3),n.dc(6,"div",4),n.dc(7,"div",5),n.Uc(8,Op,3,3,"span",6),n.Uc(9,Cp,3,3,"span",6),n.Uc(10,Ap,3,3,"span",6),n.cc(),n.cc(),n.dc(11,"div",4),n.dc(12,"div",5),n.dc(13,"div",7),n.dc(14,"button",8),n.nc("click",function(){return e.close()}),n.Wc(15),n.rc(16,"translate"),n.cc(),n.Uc(17,Mp,3,3,"button",9),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(1),n.Yc(" ",n.sc(2,6,"navigator.doorbell.title")," "),n.Kb(7),n.yc("ngIf",!e.isWaiting&&!e.noAnswer),n.Kb(1),n.yc("ngIf",e.isWaiting&&!e.noAnswer),n.Kb(1),n.yc("ngIf",e.noAnswer),n.Kb(5),n.Xc(n.sc(16,8,"generic.cancel")),n.Kb(2),n.yc("ngIf",!e.isWaiting&&!e.noAnswer))},directives:[m.n],pipes:[ui],encapsulation:2}),t})();const Up=["nitro-navigator-room-password-component",""];function Dp(t,e){if(1&t&&(n.dc(0,"div",12),n.Wc(1),n.cc()),2&t){const t=n.qc();n.Kb(1),n.Xc(t.room.roomName)}}function Np(t,e){1&t&&(n.dc(0,"div"),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"navigator.password.info")))}function Lp(t,e){1&t&&(n.dc(0,"div"),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"navigator.password.retryinfo")))}let Pp=(()=>{class t{constructor(t,e){this._navigatorService=t,this._activeModal=e,this.room=null,this.isWrongPassword=!1,this.password=""}tryPassword(){this.room&&this.password&&(this._navigatorService.goToRoom(this.room.roomId,this.password),this.hide())}close(){this._navigatorService.component.closeRoomPassword()}hide(){this._activeModal.close()}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(Kh),n.Yb(t_.a))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-navigator-room-password-component",""]],inputs:{room:"room",isWrongPassword:"isWrongPassword"},attrs:Up,decls:25,vars:16,consts:[[1,"modal-header"],["type","button",1,"close",3,"click"],[1,"modal-body"],[1,"row"],[1,"col-12"],["class","font-weight-bold",4,"ngIf"],[4,"ngIf"],[1,"form-group"],["autocomplete","new-password","type","password","placeholder","*****",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"font-weight-bold"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Wc(1),n.rc(2,"translate"),n.dc(3,"button",1),n.nc("click",function(){return e.close()}),n.cc(),n.cc(),n.dc(4,"div",2),n.dc(5,"div",3),n.dc(6,"div",4),n.Uc(7,Dp,2,1,"div",5),n.Uc(8,Np,3,3,"div",6),n.Uc(9,Lp,3,3,"div",6),n.Zb(10,"br"),n.dc(11,"div",7),n.dc(12,"label"),n.Wc(13),n.rc(14,"translate"),n.cc(),n.dc(15,"input",8),n.nc("ngModelChange",function(t){return e.password=t}),n.cc(),n.cc(),n.cc(),n.cc(),n.dc(16,"div",3),n.dc(17,"div",4),n.dc(18,"div",9),n.dc(19,"button",10),n.nc("click",function(){return e.close()}),n.Wc(20),n.rc(21,"translate"),n.cc(),n.dc(22,"button",11),n.nc("click",function(){return e.tryPassword()}),n.Wc(23),n.rc(24,"translate"),n.cc(),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(1),n.Yc(" ",n.sc(2,8,"navigator.password.title")," "),n.Kb(6),n.yc("ngIf",e.room),n.Kb(1),n.yc("ngIf",!e.isWrongPassword),n.Kb(1),n.yc("ngIf",e.isWrongPassword),n.Kb(4),n.Xc(n.sc(14,10,"navigator.password.enter")),n.Kb(2),n.yc("ngModel",e.password),n.Kb(5),n.Xc(n.sc(21,12,"generic.cancel")),n.Kb(3),n.Xc(n.sc(24,14,"navigator.password.button.try")))},directives:[m.n,ur.b,ur.l,ur.n],pipes:[ui],encapsulation:2}),t})();const xp=function(t){return{active:t}};function Fp(t,e){if(1&t){const t=n.ec();n.dc(0,"button",16),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc(2).setCurrentContext(s)}),n.Wc(1),n.rc(2,"translate"),n.cc()}if(2&t){const t=e.$implicit,s=n.qc(2);n.yc("ngClass",n.Cc(4,xp,s.topLevelContext===t)),n.Kb(1),n.Xc(n.sc(2,2,"navigator.toplevelview."+t.code))}}function kp(t,e){1&t&&n.Zb(0,"div",17),2&t&&n.yc("result",e.$implicit)}function Wp(t,e){1&t&&n.Zb(0,"div",18)}function Bp(t,e){if(1&t){const t=n.ec();n.dc(0,"div",2),n.dc(1,"div",3),n.dc(2,"h6",4),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",5),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(6,"i",6),n.cc(),n.cc(),n.dc(7,"div",7),n.dc(8,"div",8),n.Uc(9,Fp,3,6,"button",9),n.dc(10,"button",10),n.nc("click",function(){return n.Lc(t),n.qc().openRoomCreator()}),n.Zb(11,"i",11),n.cc(),n.cc(),n.Zb(12,"div",12),n.dc(13,"perfect-scrollbar",13),n.Uc(14,kp,1,1,"div",14),n.cc(),n.Uc(15,Wp,1,0,"div",15),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(3),n.Xc(n.sc(4,4,t.isLoading?"navigator.title.is.busy":"navigator.title")),n.Kb(6),n.yc("ngForOf",t.topLevelContexts),n.Kb(5),n.yc("ngForOf",t.lastSearchResults),n.Kb(1),n.yc("ngIf",t.sliderVisible)}}function Vp(t,e){1&t&&n.Zb(0,"nitro-navigator-room-info-component")}let Gp=(()=>{class t{constructor(t,e,s){this._settingsService=t,this._navigatorService=e,this._modalService=s,this.visible=!1}ngOnInit(){this._navigatorService.component=this}ngOnChanges(t){const e=t.visible.currentValue;e&&e!==t.visible.previousValue&&this.prepareNavigator()}ngOnDestroy(){this._roomCreatorModal&&this._roomCreatorModal.close(),this._navigatorService.component=null}prepareNavigator(){this._navigatorService.isLoaded?this._navigatorService.search():this._navigatorService.loadNavigator()}setCurrentContext(t){this._navigatorService.setCurrentContext(t),this._navigatorService.clearSearch()}hide(){this._settingsService.hideNavigator()}openRoomCreator(){this._roomCreatorModal||(this._roomCreatorModal=this._modalService.open(Tp,{backdrop:"static",size:"lg",centered:!0,keyboard:!1}),this._roomCreatorModal&&this._roomCreatorModal.result.then(()=>this._roomCreatorModal=null))}openRoomDoorbell(t,e=!1,s=!1){this._roomPasswordModal&&this._roomPasswordModal.close(),t||(t=this._lastRoom),this._lastRoom=t;let n=this._roomDoorbellModal;if(n||(n=this._roomDoorbellModal=this._modalService.open(wp,{backdrop:"static",size:"sm",centered:!0,keyboard:!1}),n.result.then(()=>this._roomDoorbellModal=null)),this._roomDoorbellModal=n,this._roomDoorbellModal){const i=n.componentInstance;i&&(i.room=t,i.isWaiting=e,i.noAnswer=s)}}closeRoomDoorbell(){this._roomDoorbellModal&&(this._roomDoorbellModal.close(),this._lastRoom=null)}openRoomPassword(t,e=!1){this._roomDoorbellModal&&this._roomDoorbellModal.close(),t||(t=this._lastRoom),this._lastRoom=t;let s=this._roomPasswordModal;if(s||(s=this._roomPasswordModal=this._modalService.open(Pp,{backdrop:"static",size:"sm",centered:!0,keyboard:!1}),s.result.then(()=>this._roomPasswordModal=null)),this._roomPasswordModal=s,this._roomPasswordModal){const n=s.componentInstance;if(!n)return;n.room=t,n.isWrongPassword=e}}closeRoomPassword(){this._roomPasswordModal&&(this._roomPasswordModal.close(),this._lastRoom=null)}get topLevelContext(){return this._navigatorService&&this._navigatorService.topLevelContext||null}get topLevelContexts(){return this._navigatorService&&this._navigatorService.topLevelContexts||null}get lastSearchResults(){return this._navigatorService.lastSearchResults}get isLoading(){return this._navigatorService&&(this._navigatorService.isLoading||this._navigatorService.isSearching)}get sliderVisible(){return u.a.instance.core.configuration.getValue("navigator.slider.enabled")}get roomInfoShowing(){return this._navigatorService.roomInfoShowing}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(g),n.Yb(Kh),n.Yb(t_.h))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-navigator-main-component"]],inputs:{visible:"visible"},features:[n.Ib],decls:3,vars:2,consts:[["class","nitro-navigator card",3,"bringToTop","draggable",4,"ngIf"],[4,"ngIf"],[1,"nitro-navigator","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"btn-group","w-100","mb-2"],["type","button","class","btn btn-secondary",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-plus"],["nitro-navigator-search-component",""],[1,"results-container","position-relative","w-100","pr-1",2,"min-height","350px","max-height","350px","height","350px"],["class","mb-1","nitro-navigator-search-result-component","",3,"result",4,"ngFor","ngForOf"],["nitro-navigator-slider-component","",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"ngClass","click"],["nitro-navigator-search-result-component","",1,"mb-1",3,"result"],["nitro-navigator-slider-component",""]],template:function(t,e){1&t&&(n.Uc(0,Bp,16,6,"div",0),n.Uc(1,Vp,1,0,"nitro-navigator-room-info-component",1),n.Zb(2,"nitro-navigator-roomsettings-component")),2&t&&(n.yc("ngIf",e.visible),n.Kb(1),n.yc("ngIf",e.roomInfoShowing))},encapsulation:2}),t})();var Kp=s("dIbu"),Hp=s("oMvi"),jp=s("5RE+"),zp=s("ulbO"),Yp=s("9loD"),qp=s("5Cat"),Xp=s("Bbk2"),Zp=s("eOyb"),Qp=s("pvKa"),Jp=s("Up4E"),$p=s("Wifn"),tf=s("J0cl"),ef=s("iUEO"),sf=s("bmkm"),nf=s("k0R1");class rf{constructor(t){this._locked=!1,this._id=t.itemId,this._type=t.spriteId,this._ref=t.ref,this._category=t.category,this._groupable=t.isGroupable&&!t.rentable,this._tradeable=t.tradable,this._recyclable=t.isRecycleable,this._sellable=t.sellable,this._stuffData=t.stuffData,this._extra=t._Str_2794,this._secondsToExpiration=t.secondsToExpiration,this._expirationTimeStamp=t._Str_10616,this._hasRentPeriodStarted=t.hasRentPeriodStarted,this._creationDay=t._Str_8932,this._creationMonth=t._Str_9050,this._creationYear=t._Str_9408,this._slotId=t.slotId,this._songId=t._Str_3951,this._flatId=t.flatId,this._isRented=t.rentable,this._isWallItem=t.isWallItem}get rentable(){return this._isRented}get id(){return this._id}get ref(){return this._ref}get category(){return this._category}get type(){return this._type}get stuffData(){return this._stuffData}set stuffData(t){this._stuffData=t}get extra(){return this._extra}get _Str_16260(){return this._recyclable}get isTradable(){return this._tradeable}get isGroupable(){return this._groupable}get sellable(){return this._sellable}get secondsToExpiration(){if(-1===this._secondsToExpiration)return-1;let t=-1;return this._hasRentPeriodStarted?(t=this._secondsToExpiration-(u.a.instance.time-this._expirationTimeStamp)/1e3,t<0&&(t=0)):t=this._secondsToExpiration,t}get _Str_8932(){return this._creationDay}get _Str_9050(){return this._creationMonth}get _Str_9408(){return this._creationYear}get slotId(){return this._slotId}get _Str_3951(){return this._songId}get locked(){return this._locked}set locked(t){this._locked=t}get flatId(){return this._flatId}get isWallItem(){return this._isWallItem}get hasRentPeriodStarted(){return this._hasRentPeriodStarted}get _Str_10616(){return this._expirationTimeStamp}update(t){this._type=t.spriteId,this._ref=t.ref,this._category=t.category,this._groupable=t.isGroupable&&!t.rentable,this._tradeable=t.tradable,this._recyclable=t.isRecycleable,this._sellable=t.sellable,this._stuffData=t.stuffData,this._extra=t._Str_2794,this._secondsToExpiration=t.secondsToExpiration,this._expirationTimeStamp=t._Str_10616,this._hasRentPeriodStarted=t.hasRentPeriodStarted,this._creationDay=t._Str_8932,this._creationMonth=t._Str_9050,this._creationYear=t._Str_9408,this._slotId=t.slotId,this._songId=t._Str_3951,this._flatId=t.flatId,this._isRented=t.rentable,this._isWallItem=t.isWallItem}}let af=(()=>{class t{constructor(t,e,s,n,i){this._Str_18094=1,this._Str_18535=.2,this._type=t,this._category=e,this._roomEngine=s,this._stuffData=n,this._extra=i,this._isWallItem=!1,this._iconUrl=null,this._name=null,this._description=null,this._locked=!1,this._selected=!1,this._hasUnseenItems=!1,this._items=new Bs.a}prepareGroup(){this.setIcon(),this.setName(),this.setDescription()}dispose(){}getItemByIndex(t){return this._items.getWithIndex(t)}getItemById(t){return this._items.getValue(t)}getTradeItems(t){const e=[],s=this.getLastItem();if(!s)return e;let n=0,i=0;for(;i<this._items.length&&!(n>=t);){const t=this.getItemByIndex(i);!t.locked&&t.isTradable&&t.type===s.type&&(e.push(t),n++),i++}return e}push(t,e=!1){const s=this._items.getValue(t.id);s?s.locked=!1:this._items.add(t.id,t),1===this._items.length&&this.prepareGroup()}pop(){let t=null;return this._items.length>0&&(t=this._items.getWithIndex(this._items.length-1),this._items.remove(t.id)),t}remove(t){const e=this._items.getValue(t);return e?(this._items.remove(t),e):null}getTotalCount(){if(this._category===Za._Str_12351){let t=0,e=0;for(;e<this._items.length;){const s=this._items.getWithIndex(e);t+=parseInt(s.stuffData.getLegacyString()),e++}return t}return this._items.length}getUnlockedCount(){if(this.category===Za._Str_12351)return this.getTotalCount();let t=0,e=0;for(;e<this._items.length;)this._items.getWithIndex(e).locked||t++,e++;return t}getLastItem(){return this._items.length?this._items.getWithIndex(this._items.length-1):null}unlockAllItems(){if(this._items.length)for(const t of this._items.getValues())t&&t.locked&&(t.locked=!1)}lockItemIds(t){for(const e of this._items.getValues()){const s=t.indexOf(e.ref)>=0;e.locked!==s&&(e.locked=s)}}setName(){const t=this.getLastItem();if(!t)return void(this._name="");let e="";switch(this._category){case Za._Str_5186:e="poster_"+t.stuffData.getLegacyString()+"_name";break;case Za._Str_9125:return void(this._name="SONG_NAME");default:e=this.isWallItem?"wallItem.name."+t.type:"roomItem.name."+t.type}this._name=u.a.instance.getLocalization(e)}setDescription(){this._description=""}setIcon(){if(this._iconUrl)return;let t=null;t=this.isWallItem?this._roomEngine.getFurnitureWallIconUrl(this._type,this._stuffData.getLegacyString()):this._roomEngine.getFurnitureFloorIconUrl(this._type),t&&(this._iconUrl=t)}get type(){return this._type}get category(){return this._category}get stuffData(){return this._stuffData}get extra(){return this._extra}get iconUrl(){return this._iconUrl}get name(){return this._name}get description(){return this._description}get hasUnseenItems(){return this._hasUnseenItems}set hasUnseenItems(t){this._hasUnseenItems=t}get locked(){return this._locked}set locked(t){this._locked=t}get selected(){return this._selected}set selected(t){this._selected=t}get isWallItem(){const t=this.getItemByIndex(0);return!!t&&t.isWallItem}get isGroupable(){const t=this.getItemByIndex(0);return!!t&&t.isGroupable}get isSellable(){const t=this.getItemByIndex(0);return!!t&&t.sellable}get items(){return this._items}}return t.INVENTORY_THUMB_XML="inventory_thumb_xml",t._Str_4072=13421772,t._Str_4169=10275685,t})(),of=(()=>{class t{constructor(t,e,s){this._inventoryService=t,this._notificationService=e,this._ngZone=s,this._messages=[],this._furniMsgFragments=null,this._groupItems=[],this._search="",this._searchType="",this._itemIdInFurniPlacing=-1,this._isObjectMoverRequested=!1,this._isInitialized=!1,this._needsUpdate=!1,this.onRoomEngineObjectPlacedEvent=this.onRoomEngineObjectPlacedEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomEngine.events.addEventListener(S.a.PLACED,this.onRoomEngineObjectPlacedEvent),this._messages=[new jp.a(this.onFurnitureListAddOrUpdateEvent.bind(this)),new zp.a(this.onFurnitureListEvent.bind(this)),new Yp.a(this.onFurnitureListInvalidateEvent.bind(this)),new qp.a(this.onFurnitureListRemovedEvent.bind(this)),new Xp.a(this.onFurniturePostItPlacedEvent.bind(this)),new Qp.a(this.onMarketplaceSellEvent.bind(this)),new Kp.a(this.onMarketplaceConfigEvent.bind(this)),new Hp.a(this.onMarketplaceItemStatsEvent.bind(this)),new Zp.a(this.onMarketplaceItemPostedEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t);u.a.instance.communication.connection.send(new $p.a)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomEngine.events.removeEventListener(S.a.PLACED,this.onRoomEngineObjectPlacedEvent);for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomEngineObjectPlacedEvent(t){t&&this._isObjectMoverRequested&&t.type===S.a.PLACED&&(this._isObjectMoverRequested=!1,t._Str_4057||this._ngZone.run(()=>this._inventoryService.showWindow()))}onFurnitureListAddOrUpdateEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=e.items;this._ngZone.run(()=>{for(const t of s){const e=this.getGroupItemForFurnitureId(t.itemId);if(e){const s=e.getItemById(t.itemId);s&&(s.update(t),e.hasUnseenItems=!0)}else{const e=new rf(t);this.addFurnitureItem(e,!1)}}})}onFurnitureListEvent(t){if(!t)return;const e=t.getParser();if(!e)return;this._furniMsgFragments||(this._furniMsgFragments=new Array(e.totalFragments));const s=new Map([...e.fragment]),n=this.mergeFragments(s,e.totalFragments,e.fragmentNumber,this._furniMsgFragments);n&&(this._ngZone.run(()=>this.processFragment(n)),this._furniMsgFragments=null)}onFurnitureListInvalidateEvent(t){t&&t.getParser()&&(this._inventoryService.furnitureVisible?this.requestLoad():this._needsUpdate=!0)}onFurnitureListRemovedEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this.removeItemById(e.itemId)&&this.setAllFurnitureSeen()})}onFurniturePostItPlacedEvent(t){t&&t.getParser()}onMarketplaceItemPostedEvent(t){if(!t)return;const e=t.getParser();if(!e)return;let s=null;s=1==e.result?"inventory.marketplace.result.title.success":"inventory.marketplace.result.title.failure",s=u.a.instance.localization.getValue(s);const n=u.a.instance.localization.getValue("inventory.marketplace.result."+e.result);this._notificationService.alert(n,s)}onMarketplaceItemStatsEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this._marketPlaceItemStats=e)}onMarketplaceConfigEvent(t){if(!t)return;const e=t.getParser();e&&(this._marketPlaceConfig=e)}onMarketplaceSellEvent(t){if(!t)return;const e=t.getParser();if(e){switch(e._Str_3278){case 2:return void this._notificationService.alert(this.getTranslation("inventory.marketplace.no_trading_privilege.info"),this.getTranslation("inventory.marketplace.no_trading_privilege.title"));case 3:return void this._notificationService.alert(this.getTranslation("inventory.marketplace.no_trading_pass.info"),this.getTranslation("inventory.marketplace.no_trading_pass.title"));case 5:return;case 6:return void this._notificationService.alert(this.getTranslation("inventory.marketplace.trading_lock.info"),this.getTranslation("inventory.marketplace.trading_lock.title"))}this._ngZone.run(()=>this._inventoryService.marketPlaceOfferVisible=!0)}}getTranslation(t){return u.a.instance.localization.getValue(t)}mergeFragments(t,e,s,n){if(1===e)return t;n[s]=t;for(const r of n)if(!r)return null;const i=new Map;for(const r of n){for(const[t,e]of r)i.set(t,e);r.clear()}return n=null,i}processFragment(e){const s=this.getAllItemIds(),n=[],i=[];for(const t of e.keys())-1===s.indexOf(t)&&n.push(t);for(const t of s)e.get(t)||i.push(t);const r=0===s.length;for(const t of i)this.removeItemById(t);for(const t of n){const s=e.get(t);if(!s)continue;const n=new rf(s);this.addFurnitureItem(n,!0)}r||n.length&&this._inventoryService.updateItemLocking(),n.length&&this._inventoryService.furniController&&(this._inventoryService.furniController.paginateConfig.currentPage=1),this._isInitialized=!0,this._inventoryService.events.next(t.INVENTORY_UPDATED),this._inventoryService.furniController&&this._inventoryService.furniController.selectExistingGroupOrDefault()}getAllItemIds(){const t=[];for(const e of this._groupItems){let s=e.getTotalCount();e.category===Za._Str_12351&&(s=1);let n=0;for(;n<s;)t.push(e.getItemByIndex(n).id),n++}return t}getFurnitureItem(t){for(const e of this._groupItems){if(!e)continue;const s=e.getItemById(t);if(s)return s}return null}addFurnitureItem(t,e){let s=null;s=t.isGroupable?this.addGroupableFurnitureItem(t,e):this.addSingleFurnitureItem(t,e),e||(s.hasUnseenItems=!0)}addSingleFurnitureItem(t,e){const s=[];for(const r of this._groupItems)r.type===t.type&&s.push(r);for(const r of s)if(r.getItemById(t.id))return r;const n=this.isFurnitureUnseen(t),i=this.createGroupItem(t.type,t.category,t.stuffData,t.extra,e);return i.push(t,n),n?(i.hasUnseenItems=!0,this.unshiftGroupitem(i)):this.pushGroupItem(i),i}addGroupableFurnitureItem(t,e){let s=null;for(const i of this._groupItems)if(i.type===t.type&&i.isWallItem==t.isWallItem&&i.isGroupable)if(t.category===Za._Str_5186){if(i.stuffData.getLegacyString()===t.stuffData.getLegacyString()){s=i;break}}else{if(t.category!==Za._Str_12454){s=i;break}if(t.stuffData.compare(i.stuffData)){s=i;break}}const n=this.isFurnitureUnseen(t);return s?(s.push(t,n),n&&(s.hasUnseenItems=!0,this.removeAndUnshiftGroupitem(s)),s):(s=this.createGroupItem(t.type,t.category,t.stuffData,t.extra,e),s.push(t,n),n?(s.hasUnseenItems=!0,this.unshiftGroupitem(s)):this.pushGroupItem(s),s)}createGroupItem(t,e,s,n=NaN,i=!1){return new af(t,e,u.a.instance.roomEngine,s,n)}removeItemById(t){let e=0;for(;e<this._groupItems.length;){const s=this._groupItems[e],n=s.remove(t);if(n)return this._itemIdInFurniPlacing===n.ref&&(this.cancelRoomObjectPlacement(),this.attemptItemPlacement()||this._inventoryService.showWindow()),s.getTotalCount()<=0&&(this._groupItems.splice(e,1),s.dispose()),s;e++}return null}isFurnitureUnseen(t){let e=0;return e=t.rentable?Ta.RENTABLE:Ta.FURNI,this._inventoryService.unseenTracker._Str_3613(e,t.id)}setAllFurnitureSeen(){this._inventoryService.unseenTracker._Str_8813(Ta.FURNI);for(const t of this._groupItems)t.hasUnseenItems&&(t.hasUnseenItems=!1);this._inventoryService.updateUnseenCount()}offerOnMarketplace(){const t=this.getSelectedGroup();if(!t)return;const e=t.getItemByIndex(0);e&&e.sellable&&(this._offerOnMarketPlaceItem=e,u.a.instance.communication.connection.send(new ef.a),u.a.instance.communication.connection.send(new Jp.a(-1,e.type)))}attemptItemPlacement(t=!1){const e=this.getSelectedGroup();if(!e)return!1;if(!e.getUnlockedCount())return!1;const s=e.getLastItem();if(!s)return!1;if(s.category===Za._Str_3683||s.category===Za._Str_3639||s.category===Za._Str_3432){if(t)return!1;u.a.instance.communication.connection.send(new sf.a(s.id))}else this._inventoryService.hideWindow(),this.startRoomObjectPlacement(s);return!0}startRoomObjectPlacementWithoutRequest(t){let e=0,s=!1;return e=t.isWallItem?k.a.WALL:k.a.FLOOR,s=t.category===Za._Str_5186?u.a.instance.roomEngine.processRoomObjectPlacement(nf.a.INVENTORY,t.id,e,t.type,t.stuffData.getLegacyString()):u.a.instance.roomEngine.processRoomObjectPlacement(nf.a.INVENTORY,t.id,e,t.type,t.extra.toString(),t.stuffData),s}startRoomObjectPlacement(t){let e=0,s=!1;e=t.isWallItem?k.a.WALL:k.a.FLOOR,s=t.category===Za._Str_5186?u.a.instance.roomEngine.processRoomObjectPlacement(nf.a.INVENTORY,t.id,e,t.type,t.stuffData.getLegacyString()):u.a.instance.roomEngine.processRoomObjectPlacement(nf.a.INVENTORY,t.id,e,t.type,t.extra.toString(),t.stuffData),s&&(this._itemIdInFurniPlacing=t.ref,this.setObjectMoverRequested(!0))}cancelRoomObjectPlacement(){this._itemIdInFurniPlacing>-1&&(u.a.instance.roomEngine.cancelRoomObjectPlacement(),this.setObjectMoverRequested(!1),this._itemIdInFurniPlacing=-1)}getGroupItemForFurnitureId(t){for(const e of this._groupItems)if(e.getItemById(t))return e;return null}getSelectedGroup(){for(const t of this._groupItems)if(t&&t.selected)return t;return null}unshiftGroupitem(t){this._groupItems.unshift(t)}pushGroupItem(t){this._groupItems.push(t)}removeGroupItem(t){const e=this._groupItems.indexOf(t);e>-1&&this._groupItems.splice(e,1)}removeAndUnshiftGroupitem(t){this.removeGroupItem(t),this.unshiftGroupitem(t)}unlockAllItems(){for(const t of this._groupItems)t.unlockAllItems()}unselectAllGroupItems(){for(const t of this._groupItems)t.selected=!1}requestLoad(){this._needsUpdate=!1,u.a.instance.communication.connection.send(new tf.a)}setObjectMoverRequested(t){this._isObjectMoverRequested!==t&&this._ngZone.run(()=>this._isObjectMoverRequested=t)}get controller(){return this._inventoryService.controller}get isInitalized(){return this._isInitialized}get needsUpdate(){return this._needsUpdate}get groupItems(){return this._groupItems}get isObjectMoverRequested(){return this._isObjectMoverRequested}get search(){return this._search}set search(t){this._search=t}get searchType(){return this._searchType}set searchType(t){this._searchType=t}get offerOnMarketPlaceItem(){return this._offerOnMarketPlaceItem}get marketPlaceConfig(){return this._marketPlaceConfig}get marketPlaceItemStats(){return this._marketPlaceItemStats}set marketPlaceItemStats(t){this._marketPlaceItemStats=t}}return t.INVENTORY_UPDATED="IFS_INVENTORY_UPDATED",t.SELECT_FIRST_GROUP="IFS_SELECT_FIRST_GROUP",t.SELECT_EXISTING_GROUP_DEFAULT="IFS_SELECT_EXISTING_GROUP_DEFAULT",t.\u0275fac=function(e){return new(e||t)(n.kc(Ca),n.kc(es),n.kc(n.H))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})();var cf=s("qexY"),lf=s("feea"),hf=s("01lY"),uf=s("WjEe");class _f{constructor(t){this._botData=t,this._selected=!1,this._isUnseen=!1}get id(){return this._botData.id}get botData(){return this._botData}get selected(){return this._selected}set selected(t){this._selected=t}get isUnseen(){return this._isUnseen}set isUnseen(t){this._isUnseen=t}}let df=(()=>{class t{constructor(t,e){this._inventoryService=t,this._ngZone=e,this._messages=[],this._bots=new Bs.a,this._botIdInBotPlacing=-1,this._isObjectMoverRequested=!1,this._isInitialized=!1,this._needsUpdate=!1,this.onRoomEngineObjectPlacedEvent=this.onRoomEngineObjectPlacedEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomEngine.events.addEventListener(S.a.PLACED,this.onRoomEngineObjectPlacedEvent),this._messages=[new lf.a(this.onBotInventoryMessageEvent.bind(this)),new hf.a(this.onBotRemovedFromInventoryEvent.bind(this)),new cf.a(this.onBotAddedToInventoryEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomEngine.events.removeEventListener(S.a.PLACED,this.onRoomEngineObjectPlacedEvent);for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomEngineObjectPlacedEvent(t){t&&this._isObjectMoverRequested&&t.type===S.a.PLACED&&(this._isObjectMoverRequested=!1,t._Str_4057||this._ngZone.run(()=>this._inventoryService.showWindow()))}onBotInventoryMessageEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{for(const t of e.items.values())this.addSingleBotItem(t);this._isInitialized=!0,this._inventoryService.botsController&&this._inventoryService.botsController.selectExistingGroupOrDefault()})}onBotRemovedFromInventoryEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this.removeItemById(e.itemId))}onBotAddedToInventoryEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{const t=this.addSingleBotItem(e.item);t&&(t.isUnseen=!0)})}getAllItemIds(){const t=[];for(const e of this._bots.getValues())t.push(e.id);return t}getBotItem(t){return this._bots.getValue(t)||null}addSingleBotItem(t){this._bots||(this._bots=new Bs.a);const e=new _f(t);return this.isBotUnseen(t)?(e.isUnseen=!0,this.unshiftBotItem(e)):this.pushBotItem(e),e}removeItemById(t){if(!this._bots.length)return null;const e=this._bots.remove(t);return e?(this._botIdInBotPlacing===e.id&&(this.cancelRoomObjectPlacement(),this._inventoryService.showWindow()),e):null}isBotUnseen(t){return this._inventoryService.unseenTracker._Str_3613(Ta.BOT,t.id)}setAllBotsSeen(){this._inventoryService.unseenTracker._Str_8813(Ta.BOT);for(const t of this._bots.getValues())t.isUnseen&&(t.isUnseen=!1);this._inventoryService.updateUnseenCount()}attemptBotPlacement(t=!1){const e=this.getSelectedBot();if(!e)return!1;const s=e.botData;if(!s)return!1;const n=u.a.instance.roomSessionManager.getSession(1);return!(!n||!n.isRoomOwner||(this._inventoryService.hideWindow(),this.startRoomObjectPlacement(s),0))}startRoomObjectPlacement(t){u.a.instance.roomEngine.processRoomObjectPlacement(nf.a.INVENTORY,-t.id,k.a.UNIT,B.a.RENTABLE_BOT,t.figure)&&(this._botIdInBotPlacing=t.id,this.setObjectMoverRequested(!0))}cancelRoomObjectPlacement(){this._botIdInBotPlacing>-1&&(u.a.instance.roomEngine.cancelRoomObjectPlacement(),this.setObjectMoverRequested(!1),this._botIdInBotPlacing=-1)}getSelectedBot(){for(const t of this._bots.getValues())if(t&&t.selected)return t;return null}unshiftBotItem(t){this._bots.unshift(t.id,t)}pushBotItem(t){this._bots.add(t.id,t)}removeBotItem(t){this._bots.remove(t.id)}removeAndUnshiftGroupitem(t){this.removeBotItem(t),this.unshiftBotItem(t)}unselectAllBotItems(){for(const t of this._bots.getValues())t.selected=!1}requestLoad(){this._needsUpdate=!1,u.a.instance.communication.connection.send(new uf.a)}setObjectMoverRequested(t){this._isObjectMoverRequested!==t&&this._ngZone.run(()=>this._isObjectMoverRequested=t)}get controller(){return this._inventoryService.controller}get isInitalized(){return this._isInitialized}get needsUpdate(){return this._needsUpdate}get bots(){return this._bots.getValues()}get isObjectMoverRequested(){return this._isObjectMoverRequested}}return t.INVENTORY_UPDATED="IBS_INVENTORY_UPDATED",t.SELECT_FIRST_GROUP="IBS_SELECT_FIRST_GROUP",t.SELECT_EXISTING_GROUP_DEFAULT="IBS_SELECT_EXISTING_GROUP_DEFAULT",t.\u0275fac=function(e){return new(e||t)(n.kc(Ca),n.kc(n.H))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})();var gf=s("GBA0"),mf=s("746L"),pf=s("9Nxx"),ff=s("TQha");class Ef{constructor(t){this._petData=t,this._selected=!1,this._isUnseen=!1}get id(){return this._petData.id}get petData(){return this._petData}get selected(){return this._selected}set selected(t){this._selected=t}get isUnseen(){return this._isUnseen}set isUnseen(t){this._isUnseen=t}}let Sf=(()=>{class t{constructor(t,e){this._inventoryService=t,this._ngZone=e,this._messages=[],this._petMsgFragments=null,this._pets=[],this._petIdInPetPlacing=-1,this._isObjectMoverRequested=!1,this._isInitialized=!1,this._needsUpdate=!1,this.onRoomEngineObjectPlacedEvent=this.onRoomEngineObjectPlacedEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomEngine.events.addEventListener(S.a.PLACED,this.onRoomEngineObjectPlacedEvent),this._messages=[new mf.a(this.onPetsReceivedEvent.bind(this)),new gf.a(this.onPetAddedEvent.bind(this)),new pf.a(this.onPetRemovedEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomEngine.events.removeEventListener(S.a.PLACED,this.onRoomEngineObjectPlacedEvent);for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomEngineObjectPlacedEvent(t){t&&this._isObjectMoverRequested&&t.type===S.a.PLACED&&(this._isObjectMoverRequested=!1,t._Str_4057||this._ngZone.run(()=>this._inventoryService.showWindow()))}onPetsReceivedEvent(t){if(!t)return;const e=t.getParser();if(!e)return;this._petMsgFragments||(this._petMsgFragments=new Array(e.totalFragments));const s=new Map([...e.fragment]),n=this.mergeFragments(s,e.totalFragments,e.fragmentNumber,this._petMsgFragments);n&&this._ngZone.run(()=>this.processFragment(n))}onPetRemovedEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this.removeItemById(e.petId)&&this.setAllPetsSeen()})}onPetAddedEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=e.pet;this._ngZone.run(()=>{const t=this.getPetItem(s.id);t?t.isUnseen=!0:this.addSinglePetItem(s)})}mergeFragments(t,e,s,n){if(1===e)return t;n[s]=t;for(const r of n)if(!r)return null;const i=new Map;for(const r of n){for(const[t,e]of r)i.set(t,e);r.clear()}return n=null,i}processFragment(e){const s=this.getAllItemIds(),n=[],i=[];for(const t of e.keys())-1===s.indexOf(t)&&n.push(t);for(const t of s)e.get(t)||i.push(t);const r=0===s.length;for(const t of i)this.removeItemById(t);for(const t of n){const s=e.get(t);s&&this.addSinglePetItem(s)}r||n.length&&this._inventoryService.updateItemLocking(),this._isInitialized=!0,this._inventoryService.events.next(t.INVENTORY_UPDATED),this._inventoryService.petsController&&this._inventoryService.petsController.selectExistingGroupOrDefault()}getAllItemIds(){const t=[];for(const e of this._pets)t.push(e.id);return t}getPetItem(t){for(const e of this._pets)if(e&&e.id===t)return e;return null}addSinglePetItem(t){const e=new Ef(t);return this.isPetUnseen(t)?(e.isUnseen=!0,this.unshiftPetItem(e)):this.pushPetItem(e),e}removeItemById(t){let e=0;for(;e<this._pets.length;){const s=this._pets[e];if(s&&s.id===t)return this._petIdInPetPlacing===s.id&&(this.cancelRoomObjectPlacement(),this._inventoryService.showWindow()),this._pets.splice(e,1),s;e++}return null}isPetUnseen(t){return this._inventoryService.unseenTracker._Str_3613(Ta.PET,t.id)}setAllPetsSeen(){this._inventoryService.unseenTracker._Str_8813(Ta.PET);for(const t of this._pets)t.isUnseen&&(t.isUnseen=!1);this._inventoryService.updateUnseenCount()}attemptPetPlacement(t=!1){const e=this.getSelectedPet();if(!e)return!1;const s=e.petData;if(!s)return!1;const n=u.a.instance.roomSessionManager.getSession(1);return!(!n||!n.isRoomOwner&&!n.allowPets||(this._inventoryService.hideWindow(),this.startRoomObjectPlacement(s),0))}startRoomObjectPlacement(t){u.a.instance.roomEngine.processRoomObjectPlacement(nf.a.INVENTORY,-t.id,k.a.UNIT,B.a.PET,t.figureData.figuredata)&&(this._petIdInPetPlacing=t.id,this.setObjectMoverRequested(!0))}cancelRoomObjectPlacement(){this._petIdInPetPlacing>-1&&(u.a.instance.roomEngine.cancelRoomObjectPlacement(),this.setObjectMoverRequested(!1),this._petIdInPetPlacing=-1)}getSelectedPet(){for(const t of this._pets)if(t&&t.selected)return t;return null}unshiftPetItem(t){this._pets.unshift(t)}pushPetItem(t){this._pets.push(t)}removePetItem(t){const e=this._pets.indexOf(t);e>-1&&this._pets.splice(e,1)}removeAndUnshiftGroupitem(t){this.removePetItem(t),this.unshiftPetItem(t)}unselectAllPetItems(){for(const t of this._pets)t.selected=!1}requestLoad(){this._needsUpdate=!1,u.a.instance.communication.connection.send(new ff.a)}setObjectMoverRequested(t){this._isObjectMoverRequested!==t&&this._ngZone.run(()=>this._isObjectMoverRequested=t)}get controller(){return this._inventoryService.controller}get isInitalized(){return this._isInitialized}get needsUpdate(){return this._needsUpdate}get pets(){return this._pets}get isObjectMoverRequested(){return this._isObjectMoverRequested}}return t.INVENTORY_UPDATED="IPS_INVENTORY_UPDATED",t.SELECT_FIRST_GROUP="IPS_SELECT_FIRST_GROUP",t.SELECT_EXISTING_GROUP_DEFAULT="IPS_SELECT_EXISTING_GROUP_DEFAULT",t.\u0275fac=function(e){return new(e||t)(n.kc(Ca),n.kc(n.H))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})();var bf=s("BIDA"),vf=s("0BWK");let If=(()=>{class t{constructor(t,e){this._inventoryService=t,this._ngZone=e,this._messages=[],this._badges=[],this._badgesInUse=[],this._isInitialized=!1,this._needsUpdate=!1,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new bf.a(this.onBadgesListEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onBadgesListEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._badgesInUse=[],this._badges=[];const t=e.getAllBadgeCodes(),s=e.getActiveBadgeCodes();for(const e of t)-1===s.indexOf(e)?this._badges.push(e):this._badgesInUse.push(e);this._isInitialized=!0,this._inventoryService.badgesController&&this._inventoryService.badgesController.selectExistingGroupOrDefault()})}setAllBadgesSeen(){this._inventoryService.unseenTracker._Str_8813(Ta.BADGE),this._inventoryService.updateUnseenCount()}isWearingBadge(t){return this._badgesInUse.indexOf(t)>=0}badgeLimitReached(){return 8===this._badgesInUse.length}wearOrClearBadge(t){const e=this._badgesInUse.indexOf(t);if(-1===e){this._badgesInUse.push(t);const e=this._badges.indexOf(t);e>=0&&this._badges.splice(e,1)}else this._badgesInUse.splice(e,1),-1===this._badges.indexOf(t)&&this._badges.push(t)}requestLoad(){this._needsUpdate=!1,u.a.instance.communication.connection.send(new vf.a)}get controller(){return this._inventoryService.controller}get isInitalized(){return this._isInitialized}get needsUpdate(){return this._needsUpdate}get badges(){return this._badges}get activeBadges(){return this._badgesInUse}}return t.\u0275fac=function(e){return new(e||t)(n.kc(Ca),n.kc(n.H))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})();var Rf=s("IVZI"),Tf=s("4hT9"),yf=s("4gvq"),Of=s("uHXo"),Cf=s("8qmW"),Af=s("iv6j"),Mf=s("8KaG"),wf=s("lN2i"),Uf=s("lrbo"),Df=s("sM2B"),Nf=s("sGp+"),Lf=s("07Tz"),Pf=s("oe6/"),xf=s("0EkW"),Ff=s("Q612"),kf=s("porQ"),Wf=s("gnch"),Bf=s("zeoL"),Vf=s("r7iz"),Gf=s("QQU2"),Kf=s("iK4q");const Hf=["nitro-inventory-trading-component",""];function jf(t,e){if(1&t&&(n.dc(0,"div",23),n.Wc(1),n.cc()),2&t){const t=n.qc(2).index,e=n.qc();n.Kb(1),n.Xc(e.ownUserItems[t].getUnlockedCount())}}function zf(t,e){if(1&t&&(n.Zb(0,"div",24),n.rc(1,"uniqueNumber")),2&t){const t=n.qc(2).index,e=n.qc();n.yc("innerHtml",n.sc(1,1,e.ownUserItems[t].stuffData.uniqueNumber),n.Mc)}}const Yf=function(t){return{unique:t}},qf=function(t){return{"background-image":t}};function Xf(t,e){if(1&t&&(n.dc(0,"button",19),n.Zb(1,"div",20),n.Uc(2,jf,2,1,"div",21),n.Uc(3,zf,2,3,"div",22),n.cc()),2&t){const t=n.qc().index,e=n.qc();n.yc("ngClass",n.Cc(4,Yf,e.ownUserItems[t].stuffData.uniqueNumber)),n.Kb(1),n.yc("ngStyle",n.Cc(6,qf,"url("+e.getIconUrl(e.ownUserItems[t])+")")),n.Kb(1),n.yc("ngIf",!e.ownUserItems[t].stuffData.uniqueNumber),n.Kb(1),n.yc("ngIf",e.ownUserItems[t].stuffData.uniqueNumber)}}function Zf(t,e){1&t&&n.Zb(0,"button",25)}function Qf(t,e){if(1&t){const t=n.ec();n.dc(0,"div",16),n.nc("click",function(){n.Lc(t);const s=e.index;return n.qc().removeItem(s)}),n.Uc(1,Xf,4,8,"button",17),n.Uc(2,Zf,1,0,"button",18),n.cc()}if(2&t){const t=e.index,s=n.qc();n.Kb(1),n.yc("ngIf",s.ownUserItems[t]),n.Kb(1),n.yc("ngIf",!s.ownUserItems[t])}}function Jf(t,e){if(1&t&&(n.dc(0,"div",23),n.Wc(1),n.cc()),2&t){const t=n.qc(2).index,e=n.qc();n.Kb(1),n.Xc(e.otherUserItems[t].getUnlockedCount())}}function $f(t,e){if(1&t&&(n.Zb(0,"div",24),n.rc(1,"uniqueNumber")),2&t){const t=n.qc(2).index,e=n.qc();n.yc("innerHtml",n.sc(1,1,e.otherUserItems[t].stuffData.uniqueNumber),n.Mc)}}function tE(t,e){if(1&t&&(n.dc(0,"button",19),n.Zb(1,"div",20),n.Uc(2,Jf,2,1,"div",21),n.Uc(3,$f,2,3,"div",22),n.cc()),2&t){const t=n.qc().index,e=n.qc();n.yc("ngClass",n.Cc(4,Yf,e.otherUserItems[t].stuffData.uniqueNumber)),n.Kb(1),n.yc("ngStyle",n.Cc(6,qf,"url("+e.getIconUrl(e.otherUserItems[t])+")")),n.Kb(1),n.yc("ngIf",!e.otherUserItems[t].stuffData.uniqueNumber),n.Kb(1),n.yc("ngIf",e.otherUserItems[t].stuffData.uniqueNumber)}}function eE(t,e){1&t&&n.Zb(0,"button",25)}function sE(t,e){if(1&t){const t=n.ec();n.dc(0,"div",16),n.nc("click",function(){n.Lc(t);const s=e.index;return n.qc().removeItem(s)}),n.Uc(1,tE,4,8,"button",17),n.Uc(2,eE,1,0,"button",18),n.cc()}if(2&t){const t=e.index,s=n.qc();n.Kb(1),n.yc("ngIf",s.otherUserItems[t]),n.Kb(1),n.yc("ngIf",!s.otherUserItems[t])}}function nE(t,e){if(1&t){const t=n.ec();n.dc(0,"button",26),n.nc("click",function(){return n.Lc(t),n.qc().progressTrade()}),n.Wc(1),n.rc(2,"translate"),n.cc()}if(2&t){const t=n.qc();n.yc("disabled",!t.ownUserNumItems&&!t.otherUserNumItems),n.Kb(1),n.Xc(n.sc(2,2,"inventory.trading.accept"))}}function iE(t,e){if(1&t){const t=n.ec();n.dc(0,"button",26),n.nc("click",function(){return n.Lc(t),n.qc().progressTrade()}),n.Wc(1),n.rc(2,"translate"),n.cc()}if(2&t){const t=n.qc();n.yc("disabled",!t.ownUserNumItems&&!t.otherUserNumItems),n.Kb(1),n.Xc(n.sc(2,2,t.ownUserAccepts?"inventory.trading.modify":"inventory.trading.accept"))}}function rE(t,e){if(1&t&&(n.dc(0,"button",27),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t){const t=n.qc();n.Kb(1),n.Xc(n.uc(2,1,"inventory.trading.countdown","counter",t.timerTick))}}function aE(t,e){if(1&t){const t=n.ec();n.dc(0,"button",28),n.nc("click",function(){return n.Lc(t),n.qc().progressTrade()}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"inventory.trading.confirm")))}function oE(t,e){1&t&&(n.dc(0,"button",27),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"inventory.trading.info.waiting")))}function cE(t,e){1&t&&(n.dc(0,"button",27),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"inventory.trading.accept")))}const lE=function(t,e){return{"trade-unlocked-icon":t,"trade-locked-icon":e}};let hE=(()=>{class t{constructor(t,e,s){this._notificationService=t,this._inventoryService=e,this._ngZone=s,this.indexs=[0,1,2,3,4,5,6,7,8],this._timerTick=3}ngOnInit(){this._inventoryService.tradeController=this}ngOnDestroy(){this._inventoryService.tradeController=null}startTimer(){this._timer&&(clearInterval(this._timer),this._timer=null),this._timerTick=3,this._timer=setInterval(this.progressTimer.bind(this),1e3)}resetTimer(){this._timer&&clearInterval(this._timer),this._timerTick=-1}progressTimer(){-1!==this._timerTick?(this._timerTick--,0===this._timerTick&&this._inventoryService.controller.tradeService.onTimerFinished()):this.resetTimer()}getIconUrl(t){return t&&t.iconUrl||null}removeItem(t){this._inventoryService.controller.tradeService.removeItem(t)}progressTrade(){switch(this._inventoryService.controller.tradeService.state){case uE.TRADING_STATE_RUNNING:this.otherUserItems.length||this.ownUserAccepts||this._notificationService.alert("${inventory.trading.warning.other_not_offering}"),this.ownUserAccepts?this._inventoryService.controller.tradeService.sendTradingUnacceptComposer():this._inventoryService.controller.tradeService.sendTradingAcceptComposer();break;case uE.TRADING_STATE_CONFIRMING:this._inventoryService.controller.tradeService.sendTradingConfirmComposer()}}cancelTrade(){switch(this._inventoryService.controller.tradeService.state){case uE.TRADING_STATE_RUNNING:this._inventoryService.controller.tradeService.sendTradingCloseComposer();break;case uE.TRADING_STATE_CONFIRMING:this._inventoryService.controller.tradeService.sendTradingCancelComposer()}}get timerTick(){return this._timerTick}get state(){return this._inventoryService.controller.tradeService.state}get ownUserName(){return this._inventoryService.controller.tradeService.ownUserName}get ownUserItems(){return this._inventoryService.controller.tradeService.ownUserItems.getValues()}get ownUserNumItems(){return this._inventoryService.controller.tradeService.ownUserNumItems}get ownUserNumCredits(){return this._inventoryService.controller.tradeService.ownUserNumCredits}get ownUserAccepts(){return this._inventoryService.controller.tradeService.ownUserAccepts}get otherUserName(){return this._inventoryService.controller.tradeService.otherUserName}get otherUserItems(){return this._inventoryService.controller.tradeService.otherUserItems.getValues()}get otherUserNumItems(){return this._inventoryService.controller.tradeService.otherUserNumItems}get otherUserNumCredits(){return this._inventoryService.controller.tradeService.otherUserNumCredits}get otherUserAccepts(){return this._inventoryService.controller.tradeService.otherUserAccepts}}return t.COLOR_LOCKED=4284532064,t.COLOR_UNLOCKED=2577770,t.ALERT_SCAM=0,t.ALERT_OTHER_CANCELLED=1,t.ALERT_ALREADY_OPEN=2,t.\u0275fac=function(e){return new(e||t)(n.Yb(es),n.Yb(Ca),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-inventory-trading-component",""]],attrs:Hf,decls:40,vars:28,consts:[[1,"row","mt-3"],[1,"d-flex","flex-column","col-6"],[1,"badge","badge-secondary","w-100","p-1","mb-1"],[1,"d-flex","mb-1"],[1,"grid-container","position-relative"],[1,"grid-items","grid-3"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"d-flex"],[1,"icon","w-100",3,"ngClass"],[1,"d-flex","justify-content-center","align-items-center","badge","badge-secondary","w-100","p-1","m-1"],[1,"d-flex","col-12","justify-content-between"],[3,"ngSwitch"],["type","button","class","btn btn-secondary",3,"disabled","click",4,"ngSwitchCase"],["type","button","class","btn btn-secondary","disabled","",4,"ngSwitchCase"],["type","button","class","btn btn-secondary",3,"click",4,"ngSwitchCase"],["type","button",1,"btn","btn-danger",3,"click"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button","class","position-relative btn btn-secondary align-items-end detail-info",3,"ngClass",4,"ngIf"],["type","button","class","position-relative btn btn-secondary align-items-end detail-info has-image",4,"ngIf"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info",3,"ngClass"],[1,"position-absolute","detail-info","has-image",3,"ngStyle"],["class","position-absolute btn btn-sm btn-primary px-1 py-0 rounded count",4,"ngIf"],["class","position-absolute unique-counter",3,"innerHtml",4,"ngIf"],[1,"position-absolute","btn","btn-sm","btn-primary","px-1","py-0","rounded","count"],[1,"position-absolute","unique-counter",3,"innerHtml"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image"],["type","button",1,"btn","btn-secondary",3,"disabled","click"],["type","button","disabled","",1,"btn","btn-secondary"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"div",2),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"div",3),n.dc(6,"div",4),n.dc(7,"div",5),n.Uc(8,Qf,3,2,"div",6),n.cc(),n.cc(),n.cc(),n.dc(9,"div",7),n.Zb(10,"i",8),n.dc(11,"div",9),n.Wc(12),n.cc(),n.dc(13,"div",9),n.Wc(14),n.cc(),n.cc(),n.cc(),n.dc(15,"div",1),n.dc(16,"div",2),n.Wc(17),n.cc(),n.dc(18,"div",3),n.dc(19,"div",4),n.dc(20,"div",5),n.Uc(21,sE,3,2,"div",6),n.cc(),n.cc(),n.cc(),n.dc(22,"div",7),n.Zb(23,"i",8),n.dc(24,"div",9),n.Wc(25),n.cc(),n.dc(26,"div",9),n.Wc(27),n.cc(),n.cc(),n.cc(),n.cc(),n.dc(28,"div",0),n.dc(29,"div",10),n.bc(30,11),n.Uc(31,nE,3,4,"button",12),n.Uc(32,iE,3,4,"button",12),n.Uc(33,rE,3,5,"button",13),n.Uc(34,aE,3,3,"button",14),n.Uc(35,oE,3,3,"button",13),n.Uc(36,cE,3,3,"button",13),n.ac(),n.dc(37,"button",15),n.nc("click",function(){return e.cancelTrade()}),n.Wc(38),n.rc(39,"translate"),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(3),n.Xc(n.sc(4,18,"inventory.trading.you")),n.Kb(5),n.yc("ngForOf",e.indexs),n.Kb(2),n.yc("ngClass",n.Dc(22,lE,!e.ownUserAccepts,e.ownUserAccepts)),n.Kb(2),n.Yc("",e.ownUserNumItems," items"),n.Kb(2),n.Yc("",e.ownUserNumCredits," credits"),n.Kb(3),n.Xc(e.otherUserName),n.Kb(4),n.yc("ngForOf",e.indexs),n.Kb(2),n.yc("ngClass",n.Dc(25,lE,!e.otherUserAccepts,e.otherUserAccepts)),n.Kb(2),n.Yc("",e.otherUserNumItems," items"),n.Kb(2),n.Yc("",e.otherUserNumCredits," credits"),n.Kb(3),n.yc("ngSwitch",e.state),n.Kb(1),n.yc("ngSwitchCase",0),n.Kb(1),n.yc("ngSwitchCase",1),n.Kb(1),n.yc("ngSwitchCase",2),n.Kb(1),n.yc("ngSwitchCase",3),n.Kb(1),n.yc("ngSwitchCase",4),n.Kb(1),n.yc("ngSwitchCase",5),n.Kb(2),n.Xc(n.sc(39,20,"generic.cancel")))},directives:[m.m,m.l,m.p,m.q,m.n,m.o],pipes:[ui,pl],encapsulation:2}),t})(),uE=(()=>{class t{constructor(t,e,s){this._notificationService=t,this._inventoryService=e,this._ngZone=s,this._messages=[],this._state=0,this._running=!1,this._ownUserIndex=-1,this._ownUserName="",this._ownUserNumItems=0,this._ownUserNumCredits=0,this._ownUserAccepts=!1,this._ownUserCanTrade=!1,this._otherUserIndex=-1,this._otherUserName="",this._otherUserNumItems=0,this._otherUserNumCredits=0,this._otherUserAccepts=!1,this._otherUserCanTrade=!1,this._offeredItemIds=[],this.registerMessages()}static _Str_16998(t,e){let s=t.toString();const n=e;if(!(e instanceof kt.a))return s;let i=1;for(;i<5;)s=s+","+n.getValue(i),i++;return s}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new Rf.a(this.onTradingAcceptEvent.bind(this)),new Tf.a(this.onTradingCloseEvent.bind(this)),new yf.a(this.onTradingCompletedEvent.bind(this)),new Of.a(this.onTradingConfirmationEvent.bind(this)),new Cf.a(this.onTradingListItemEvent.bind(this)),new Af.a(this.onTradingNotOpenEvent.bind(this)),new Mf.a(this.onTradingOpenEvent.bind(this)),new wf.a(this.onTradingOpenFailedEvent.bind(this)),new Uf.a(this.onTradingOtherNotAllowedEvent.bind(this)),new Df.a(this.onTradingYouAreNotAllowedEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onTradingAcceptEvent(t){t&&t.getParser()&&this._ngZone.run(()=>{t._Str_4963===this._ownUserIndex?this._ownUserAccepts=t._Str_15794:this._otherUserAccepts=t._Str_15794})}tradingNotificationMessage(t){switch(t){case hE.ALERT_SCAM:return void this._notificationService.alert("${inventory.trading.warning.other_not_offering}","${inventory.trading.notification.title}");case hE.ALERT_OTHER_CANCELLED:return void this._notificationService.alert("${inventory.trading.info.closed}","${inventory.trading.notification.title}");case hE.ALERT_ALREADY_OPEN:return void this._notificationService.alert("${inventory.trading.info.already_open}","${inventory.trading.notification.title}")}}onTradingCloseEvent(t){if(!t)return;const e=t.getParser();e&&this._running&&this._ngZone.run(()=>{e.reason===Gf.a._Str_16410?this._notificationService.alert("${inventory.trading.notification.caption}, ${inventory.trading.notification.commiterror.info}","${inventory.trading.notification.title}"):e._Str_4963!==this._ownUserIndex&&this.tradingNotificationMessage(hE.ALERT_OTHER_CANCELLED),this.close()})}onTradingCompletedEvent(e){e&&e.getParser()&&this._ngZone.run(()=>this.state=t.TRADING_STATE_COMPLETED)}onTradingConfirmationEvent(e){e&&e.getParser()&&this._ngZone.run(()=>this.state=t.TRADING_STATE_COUNTDOWN)}onTradingListItemEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{const t=new Bs.a,s=new Bs.a;this.parseItems(e._Str_17841,t),this.parseItems(e._Str_17465,s),this.updateTrade(e,t,s)})}onTradingNotOpenEvent(t){}onTradingOpenEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=u.a.instance.sessionDataManager,n=this._inventoryService.roomSession;if(!s||!n)return;let i=e._Str_4963;const r=n.userDataManager.getUserData(i);if(!r)return;let a=r.name,o=e._Str_16764,c=e._Str_17613;const l=n.userDataManager.getUserData(c);if(!l)return;let h=l.name,_=e._Str_13374;if(c===s.userId){const t=i,e=a,s=o;i=c,a=h,o=_,c=t,h=e,_=s}this._ngZone.run(()=>{this._inventoryService.hideAllControllers(),this._inventoryService.showWindow(),this._inventoryService.furnitureVisible=!0,this._inventoryService.tradingVisible=!0,this._Str_23457(i,a,o,c,h,_)})}onTradingOpenFailedEvent(t){if(!t)return;const e=t.getParser();e&&(e.reason!==Kf.a._Str_18150&&e.reason!==Kf.a._Str_18383||this._ngZone.run(()=>{this.tradingNotificationMessage(hE.ALERT_ALREADY_OPEN)}))}onTradingOtherNotAllowedEvent(t){t&&this._ngZone.run(()=>{this._notificationService.alert("${inventory.trading.warning.others_account_disabled}","${inventory.trading.notification.title}")})}onTradingYouAreNotAllowedEvent(t){t&&this._ngZone.run(()=>{this._notificationService.alert("${inventory.trading.warning.own_account_disabled}","${inventory.trading.notification.title}")})}close(){this._running&&(this._state!==t.TRADING_STATE_READY&&this._state!==t.TRADING_STATE_COMPLETED&&(this.sendTradingCloseComposer(),this.state=t.TRADING_STATE_CANCELLED),this._inventoryService.controller.furnitureService.unlockAllItems(),this.state=t.TRADING_STATE_READY,this._running=!1,this._inventoryService.tradingVisible=!1)}startTrade(t,e){this.controller&&(this.controller.furnitureService.isInitalized||this.controller.furnitureService.requestLoad(),this.sendTradingOpenComposer(t))}_Str_23457(e,s,n,i,r,a){this._ownUserIndex=e,this._ownUserName=s,this._ownUserItems=new Bs.a,this._ownUserAccepts=!1,this._ownUserCanTrade=n,this._otherUserIndex=i,this._otherUserName=r,this._otherUserItems=new Bs.a,this._otherUserAccepts=!1,this._otherUserCanTrade=a,this._running=!0,this.state=t.TRADING_STATE_RUNNING}parseItems(t,e){if(!this.controller)return;const s=t.length;let n=0;for(;n<s;){const s=t[n];if(s){const t=s.spriteId,n=s.category;let i=s.furniType+t;s.isGroupable&&!this.isExternalImage(t)||(i="itemid"+s.itemId),s.category===Za._Str_5186?i=s.itemId+"poster"+s.stuffData.getLegacyString():s.category===Za._Str_12454&&(i="");let r=s.isGroupable&&!this.isExternalImage(s.spriteId)?e.getValue(i):null;r||(r=this.controller.furnitureService.createGroupItem(t,n,s.stuffData),e.add(i,r)),r.push(new rf(s))}n++}}isExternalImage(t){const e=u.a.instance.sessionDataManager.getWallItemData(t);return e&&e.isExternalImage}updateTrade(t,e,s){this._ownUserItems&&this._ownUserItems.reset(),this._otherUserItems&&this._otherUserItems.reset(),t._Str_15162===this._ownUserIndex?(this._ownUserItems=e,this._ownUserNumItems=t._Str_14946,this._ownUserNumCredits=t._Str_15709,this._otherUserItems=s,this._otherUserNumItems=t._Str_13801,this._otherUserNumCredits=t._Str_9138):(this._ownUserItems=s,this._ownUserNumItems=t._Str_13801,this._ownUserNumCredits=t._Str_9138,this._otherUserItems=e,this._otherUserNumItems=t._Str_14946,this._otherUserNumCredits=t._Str_15709),this._ownUserAccepts=!1,this._otherUserAccepts=!1,this._inventoryService.updateItemLocking()}offerItems(t,e,s,n,i,r){if(!i&&t.length)u.a.instance.communication.connection.send(new Ff.a(t.pop()));else{const a=[];for(const o of t)this.canTradeItem(e,s,n,i,r)&&a.push(o);a.length&&u.a.instance.communication.connection.send(1===a.length?new Ff.a(a.pop()):new kf.a(...a))}}canTradeItem(e,s,n,i,r){if(this._ownUserAccepts)return!1;if(null==this._ownUserItems)return!1;if(this._ownUserItems.length<t.MAX_ITEMS_TO_TRADE)return!0;if(!i)return!1;let a=s.toString();return a=n===Za._Str_5186?a+"poster"+r.getLegacyString():n===Za._Str_12454?t._Str_16998(s,r):(e?"I":"S")+a,!!this._ownUserItems.getValue(a)}removeItem(t){const e=this._ownUserItems.getWithIndex(t);if(!e)return;const s=e.getLastItem();s&&u.a.instance.communication.connection.send(new Wf.a(s.id))}getOwnTradingItemIds(){const t=[];if(!this._ownUserItems||!this._ownUserItems.length)return t;for(const e of this._ownUserItems.getValues()){let s=0;for(;s<e.getTotalCount();){const n=e.getItemByIndex(s);n&&t.push(n.ref),s++}}return t}onTimerFinished(){this._state===t.TRADING_STATE_COUNTDOWN&&(this.state=t.TRADING_STATE_CONFIRMING)}sendTradingAcceptComposer(){u.a.instance.communication.connection.send(new Nf.a)}sendTradingUnacceptComposer(){u.a.instance.communication.connection.send(new Vf.a)}sendTradingConfirmComposer(){this.state=t.TRADING_STATE_CONFIRMED,u.a.instance.communication.connection.send(new xf.a)}sendTradingCloseComposer(){u.a.instance.communication.connection.send(new Pf.a)}sendTradingCancelComposer(){u.a.instance.communication.connection.send(new Lf.a)}sendTradingOpenComposer(t){u.a.instance.communication.connection.send(new Bf.a(t))}get controller(){return this._inventoryService.controller}get state(){return this._state}set state(e){if(this._state===e)return;let s=!1;switch(this._state){case t.TRADING_STATE_READY:e!==t.TRADING_STATE_RUNNING&&e!==t.TRADING_STATE_COMPLETED||(this._state=e,s=!0);break;case t.TRADING_STATE_RUNNING:e===t.TRADING_STATE_COUNTDOWN?(this._state=e,s=!0,this._inventoryService.tradeController.startTimer()):e===t.TRADING_STATE_CANCELLED&&(this._state=e,s=!0);break;case t.TRADING_STATE_COUNTDOWN:(e===t.TRADING_STATE_CONFIRMING||e===t.TRADING_STATE_CANCELLED||e===t.TRADING_STATE_RUNNING)&&(this._state=e,s=!0);break;case t.TRADING_STATE_CONFIRMING:e===t.TRADING_STATE_CONFIRMED?(this._state=e,s=!0):(e===t.TRADING_STATE_COMPLETED||e===t.TRADING_STATE_CANCELLED)&&(this._state=e,s=!0,this.close());break;case t.TRADING_STATE_CONFIRMED:(e===t.TRADING_STATE_COMPLETED||e===t.TRADING_STATE_CANCELLED)&&(this._state=e,s=!0,this.close());break;case t.TRADING_STATE_COMPLETED:e===t.TRADING_STATE_READY&&(this._state=e,s=!0);break;case t.TRADING_STATE_CANCELLED:(e===t.TRADING_STATE_READY||e===t.TRADING_STATE_RUNNING)&&(this._state=e,s=!0)}}get running(){return this._running}get ownUserName(){return this._ownUserName}get ownUserItems(){return this._ownUserItems}get ownUserNumItems(){return this._ownUserNumItems}get ownUserNumCredits(){return this._ownUserNumCredits}get ownUserAccepts(){return this._ownUserAccepts}get ownUserCanTrade(){return this._ownUserCanTrade}get otherUserName(){return this._otherUserName}get otherUserItems(){return this._otherUserItems}get otherUserNumItems(){return this._otherUserNumItems}get otherUserNumCredits(){return this._otherUserNumCredits}get otherUserAccepts(){return this._otherUserAccepts}get otherUserCanTrade(){return this._otherUserCanTrade}}return t.MAX_ITEMS_TO_TRADE=9,t.TRADING_STATE_READY=0,t.TRADING_STATE_RUNNING=1,t.TRADING_STATE_COUNTDOWN=2,t.TRADING_STATE_CONFIRMING=3,t.TRADING_STATE_CONFIRMED=4,t.TRADING_STATE_COMPLETED=5,t.TRADING_STATE_CANCELLED=6,t.\u0275fac=function(e){return new(e||t)(n.kc(es),n.kc(Ca),n.kc(n.H))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})();function _E(t,e){if(1&t&&(n.dc(0,"div",16),n.Wc(1),n.cc()),2&t){const t=n.qc(2);n.Kb(1),n.Xc(t.furniUnseenCount)}}function dE(t,e){if(1&t&&(n.dc(0,"div",16),n.Wc(1),n.cc()),2&t){const t=n.qc(2);n.Kb(1),n.Xc(t.botUnseenCount)}}function gE(t,e){if(1&t&&(n.dc(0,"div",16),n.Wc(1),n.cc()),2&t){const t=n.qc(2);n.Kb(1),n.Xc(t.petUnseenCount)}}function mE(t,e){if(1&t&&(n.dc(0,"div",16),n.Wc(1),n.cc()),2&t){const t=n.qc(2);n.Kb(1),n.Xc(t.badgeUnseenCount)}}function pE(t,e){if(1&t&&n.Zb(0,"div",17),2&t){const t=n.qc(2);n.yc("roomPreviewer",t.roomPreviewer)}}function fE(t,e){if(1&t&&n.Zb(0,"div",18),2&t){const t=n.qc(2);n.yc("roomPreviewer",t.roomPreviewer)}}function EE(t,e){if(1&t&&n.Zb(0,"div",19),2&t){const t=n.qc(2);n.yc("roomPreviewer",t.roomPreviewer)}}function SE(t,e){1&t&&n.Zb(0,"div",20)}function bE(t,e){1&t&&n.Zb(0,"div",21)}const vE=function(t){return{active:t}};function IE(t,e){if(1&t){const t=n.ec();n.dc(0,"div",2),n.dc(1,"div",3),n.dc(2,"h6",4),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",5),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(6,"i",6),n.cc(),n.cc(),n.dc(7,"div",7),n.dc(8,"div",8),n.dc(9,"button",9),n.nc("click",function(){return n.Lc(t),n.qc().showFurniture()}),n.Wc(10),n.rc(11,"translate"),n.Uc(12,_E,2,1,"div",10),n.cc(),n.dc(13,"button",9),n.nc("click",function(){return n.Lc(t),n.qc().showBots()}),n.Wc(14),n.rc(15,"translate"),n.Uc(16,dE,2,1,"div",10),n.cc(),n.dc(17,"button",9),n.nc("click",function(){return n.Lc(t),n.qc().showPets()}),n.Wc(18),n.rc(19,"translate"),n.Uc(20,gE,2,1,"div",10),n.cc(),n.dc(21,"button",9),n.nc("click",function(){return n.Lc(t),n.qc().showBadges()}),n.Wc(22),n.rc(23,"translate"),n.Uc(24,mE,2,1,"div",10),n.cc(),n.cc(),n.Uc(25,pE,1,1,"div",11),n.Uc(26,fE,1,1,"div",12),n.Uc(27,EE,1,1,"div",13),n.Uc(28,SE,1,0,"div",14),n.Uc(29,bE,1,0,"div",15),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(3),n.Xc(n.sc(4,18,"inventory.title")),n.Kb(6),n.yc("ngClass",n.Cc(28,vE,t.furnitureVisible||t.tradingVisible)),n.Kb(1),n.Xc(n.sc(11,20,"inventory.furni")),n.Kb(2),n.yc("ngIf",t.furniUnseenCount),n.Kb(1),n.yc("ngClass",n.Cc(30,vE,t.botsVisible)),n.Kb(1),n.Xc(n.sc(15,22,"inventory.bots")),n.Kb(2),n.yc("ngIf",t.botUnseenCount),n.Kb(1),n.yc("ngClass",n.Cc(32,vE,t.petsVisible)),n.Kb(1),n.Xc(n.sc(19,24,"inventory.furni.tab.pets")),n.Kb(2),n.yc("ngIf",t.petUnseenCount),n.Kb(1),n.yc("ngClass",n.Cc(34,vE,t.badgesVisible)),n.Kb(1),n.Xc(n.sc(23,26,"inventory.badges")),n.Kb(2),n.yc("ngIf",t.badgeUnseenCount),n.Kb(1),n.yc("ngIf",t.botsVisible),n.Kb(1),n.yc("ngIf",t.petsVisible),n.Kb(1),n.yc("ngIf",t.furnitureVisible),n.Kb(1),n.yc("ngIf",t.badgesVisible),n.Kb(1),n.yc("ngIf",t.tradingVisible)}}let RE=(()=>{class t{constructor(t,e,s,n,i,r,a){this._settingsService=t,this._inventoryService=e,this._inventoryFurnitureService=s,this._inventoryBotService=n,this._inventoryPetService=i,this._inventoryBadgeService=r,this._inventoryTradingService=a,this.visible=!1,this._roomPreviewer=null}ngOnInit(){this._roomPreviewer||(this._roomPreviewer=new gn(u.a.instance.roomEngine,++gn.PREVIEW_COUNTER)),this._inventoryService.controller=this}ngOnDestroy(){this._roomPreviewer&&this._roomPreviewer.dispose(),this._inventoryService.controller=null}ngOnChanges(t){const e=t.visible.currentValue;e!==t.visible.previousValue&&(e||this._inventoryTradingService.close())}hide(){this._inventoryService.hideWindow()}showFurniture(){this._inventoryService.furnitureVisible=!0,this._inventoryService.botsVisible=!1,this._inventoryService.petsVisible=!1,this._inventoryService.badgesVisible=!1}showBots(){this._inventoryService.furnitureVisible=!1,this._inventoryService.botsVisible=!0,this._inventoryService.petsVisible=!1,this._inventoryService.badgesVisible=!1}showPets(){this._inventoryService.furnitureVisible=!1,this._inventoryService.botsVisible=!1,this._inventoryService.petsVisible=!0,this._inventoryService.badgesVisible=!1}showBadges(){this._inventoryService.furnitureVisible=!1,this._inventoryService.botsVisible=!1,this._inventoryService.petsVisible=!1,this._inventoryService.badgesVisible=!0}updateItemLocking(){const t=[];if(t.push(...this._inventoryTradingService.getOwnTradingItemIds()),t.length)for(const e of this._inventoryFurnitureService.groupItems)e.lockItemIds(t);else this._inventoryFurnitureService.unlockAllItems()}setAllFurnitureSeen(){this._inventoryFurnitureService.setAllFurnitureSeen()}setAllBotsSeen(){this._inventoryBotService.setAllBotsSeen()}setAllPetsSeen(){this._inventoryPetService.setAllPetsSeen()}setAllBadgesSeen(){this._inventoryBadgeService.setAllBadgesSeen()}get roomPreviewer(){return this._roomPreviewer}get furnitureVisible(){return this._inventoryService.furnitureVisible}get badgesVisible(){return this._inventoryService.badgesVisible}get tradingVisible(){return this._inventoryService.tradingVisible}get marketPlaceOfferVisible(){return this._inventoryService.marketPlaceOfferVisible}get offerForMarketplace(){return this.furnitureService.offerOnMarketPlaceItem}get offerStatsIsCorrect(){return this.offerForMarketplace&&this._inventoryFurnitureService.marketPlaceItemStats&&this.offerForMarketplace.type===this._inventoryFurnitureService.marketPlaceItemStats._Str_8798}get botsVisible(){return this._inventoryService.botsVisible}get petsVisible(){return this._inventoryService.petsVisible}get furnitureService(){return this._inventoryFurnitureService}get botService(){return this._inventoryBotService}get petService(){return this._inventoryPetService}get badgeService(){return this._inventoryBadgeService}get tradeService(){return this._inventoryTradingService}get furniUnseenCount(){return this._inventoryService.furniUnseenCount}get botUnseenCount(){return this._inventoryService.botUnseenCount}get petUnseenCount(){return this._inventoryService.petUnseenCount}get badgeUnseenCount(){return this._inventoryService.badgeUnseenCount}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(g),n.Yb(Ca),n.Yb(of),n.Yb(df),n.Yb(Sf),n.Yb(If),n.Yb(uE))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-inventory-main-component"]],inputs:{visible:"visible"},features:[n.Ib],decls:2,vars:3,consts:[["class","nitro-inventory card",3,"bringToTop","draggable",4,"ngIf"],["nitro-inventory-offer-marketplace-component","",3,"showMainWindow","item"],[1,"nitro-inventory","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"btn-group","w-100","mb-2"],["type","button",1,"btn","btn-secondary",3,"ngClass","click"],["class","bg-danger px-1 py-0 rounded notification-count ml-1",4,"ngIf"],["nitro-inventory-bots-component","",3,"roomPreviewer",4,"ngIf"],["nitro-inventory-pets-component","",3,"roomPreviewer",4,"ngIf"],["nitro-inventory-furniture-component","",3,"roomPreviewer",4,"ngIf"],["nitro-inventory-badges-component","",4,"ngIf"],["nitro-inventory-trading-component","",4,"ngIf"],[1,"bg-danger","px-1","py-0","rounded","notification-count","ml-1"],["nitro-inventory-bots-component","",3,"roomPreviewer"],["nitro-inventory-pets-component","",3,"roomPreviewer"],["nitro-inventory-furniture-component","",3,"roomPreviewer"],["nitro-inventory-badges-component",""],["nitro-inventory-trading-component",""]],template:function(t,e){1&t&&(n.Uc(0,IE,30,36,"div",0),n.Zb(1,"div",1)),2&t&&(n.yc("ngIf",e.visible),n.Kb(1),n.yc("showMainWindow",e.marketPlaceOfferVisible&&e.offerForMarketplace&&e.offerStatsIsCorrect)("item",e.offerForMarketplace))},encapsulation:2}),t})();var TE=s("xB90"),yE=s("Tp0E"),OE=s("9/2a"),CE=s("nMRu"),AE=s("75Vd");let ME=(()=>{class t{constructor(t,e){this._ngZone=t,this._settingsService=e,this.onRoomEngineObjectEvent=this.onRoomEngineObjectEvent.bind(this),this.flush(),this.registerMessages(),u.a.instance.addLinkEventTracker(this)}ngOnDestroy(){u.a.instance.removeLinkEventTracker(this),this.unregisterMessages()}flush(){this._userLoadedProfile=null,this._userBadges=[],this._heartRelationships=[],this._smileRelationships=[],this._bobbaRelationships=[],this._selectedGroup=null}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),u.a.instance.roomEngine.events.addEventListener(S.a.SELECTED,this.onRoomEngineObjectEvent),this._messages=[new yE.a(this.onUserProfileEvent.bind(this)),new TE.a(this.onUserCurrentBadgesEvent.bind(this)),new OE.a(this.onUserRelationshipsEvent.bind(this)),new Uu.a(this.onGroupInformationEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(u.a.instance.roomEngine.events.removeEventListener(S.a.SELECTED,this.onRoomEngineObjectEvent),this._messages&&this._messages.length)for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomEngineObjectEvent(t){if(t)switch(t.type){case S.a.SELECTED:return}}onUserProfileEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this.flush(),this._userLoadedProfile=e,u.a.instance.communication.connection.send(new CE.a(this._userLoadedProfile.id)),u.a.instance.communication.connection.send(new AE.a(this._userLoadedProfile.id)),e.groups.length>0&&u.a.instance.communication.connection.send(new Vu.a(this._userLoadedProfile.groups[0].id,!1)),this._settingsService.showUserProfile()})}onUserCurrentBadgesEvent(t){if(!t||!this._userLoadedProfile)return;const e=t.getParser();e&&e.userId===this._userLoadedProfile.id&&this._ngZone.run(()=>this._userBadges=e.badges)}onUserRelationshipsEvent(t){if(!t||!this._userLoadedProfile)return;const e=t.getParser();e&&e.id===this._userLoadedProfile.id&&this._ngZone.run(()=>{this._heartRelationships=e.hearts,this._smileRelationships=e.smiles,this._bobbaRelationships=e.bobbas,this._component&&this._component.getRandomRelationships()})}onGroupInformationEvent(t){if(!t)return;const e=t.getParser();e&&(this._selectedGroup&&e.id!==this._selectedGroup.id||this._ngZone.run(()=>this._selectedGroup=e))}selectGroup(t){u.a.instance.communication.connection.send(new Vu.a(t,!1))}loadUserProfile(t){u.a.instance.communication.connection.send(new Qu.a(t))}linkReceived(t){const e=t.split("/");if(!(e.length<2))switch(e[1]){case"goto":if(e.length>2){const t=parseInt(e[2]);t>0&&this.loadUserProfile(t)}return}}get eventUrlPrefix(){return"profile"}set component(t){this._component=t}get userLoadedProfile(){return this._userLoadedProfile}get userBadges(){return this._userBadges}get heartRelationships(){return this._heartRelationships}get smileRelationships(){return this._smileRelationships}get bobbaRelationships(){return this._bobbaRelationships}get selectedGroup(){return this._selectedGroup}}return t.\u0275fac=function(e){return new(e||t)(n.kc(n.H),n.kc(g))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})(),wE=(()=>{class t{constructor(t){this.changeDetector=t,this._time=0,this._timer=null,this.updateTime=this.updateTime.bind(this)}ngOnDestroy(){this.clearInterval()}transform(t){return this._time=t,this.setupInterval(),gu.format(this._time)}clearInterval(){this._timer&&(clearInterval(this._timer),this._timer=null)}setupInterval(){this._timer||(this._timer=setInterval(this.updateTime,3e4))}updateTime(){this.changeDetector.markForCheck()}}return t.\u0275fac=function(e){return new(e||t)(n.mc())},t.\u0275pipe=n.Xb({name:"timeAgo",type:t,pure:!0}),t})();function UE(t,e){1&t&&(n.dc(0,"button",53),n.Zb(1,"i",54),n.cc())}function DE(t,e){if(1&t&&(n.dc(0,"div",56),n.Zb(1,"nitro-badge",57),n.cc()),2&t){const t=e.$implicit;n.Kb(1),n.yc("badge",t)}}function NE(t,e){if(1&t&&(n.dc(0,"div",9),n.Uc(1,DE,2,1,"div",55),n.cc()),2&t){const t=n.qc(2);n.Kb(1),n.yc("ngForOf",t.userBadges)}}const LE=function(t){return{active:t}};function PE(t,e){if(1&t){const t=n.ec();n.dc(0,"div",60),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc(3).selectGroup(s.id)}),n.Zb(1,"nitro-badge",61),n.cc()}if(2&t){const t=e.$implicit,s=n.qc(3);n.yc("ngClass",n.Cc(3,LE,s.selectedGroup&&s.selectedGroup.id===t.id)),n.Kb(1),n.yc("badge",t.badge)("isGroup",!0)}}function xE(t,e){if(1&t&&(n.bc(0),n.dc(1,"perfect-scrollbar",58),n.dc(2,"div",59),n.Uc(3,PE,2,5,"div",51),n.cc(),n.cc(),n.ac()),2&t){const t=n.qc(2);n.Kb(3),n.yc("ngForOf",t.userProfile.groups)}}function FE(t,e){if(1&t&&n.Zb(0,"div",69),2&t){const t=n.qc(3);n.yc("headOnly",!0)("figure",t.currentRandomHeartRelationship.figure)("direction",4)}}function kE(t,e){if(1&t&&n.Zb(0,"div",69),2&t){const t=n.qc(3);n.yc("headOnly",!0)("figure",t.currentRandomSmileRelationship.figure)("direction",4)}}function WE(t,e){if(1&t&&n.Zb(0,"div",69),2&t){const t=n.qc(3);n.yc("headOnly",!0)("figure",t.currentRandomBobbaRelationship.figure)("direction",4)}}function BE(t,e){if(1&t){const t=n.ec();n.bc(0),n.dc(1,"div",62),n.Wc(2),n.rc(3,"translate"),n.cc(),n.dc(4,"div",39),n.nc("click",function(){n.Lc(t);const e=n.qc(2);return e.openRelationshipProfile(e.currentRandomHeartRelationship)}),n.dc(5,"div",63),n.Zb(6,"i",64),n.cc(),n.dc(7,"div",65),n.Uc(8,FE,1,3,"div",43),n.dc(9,"div",44),n.Wc(10),n.rc(11,"translate"),n.cc(),n.dc(12,"div",45),n.Wc(13),n.rc(14,"translate"),n.cc(),n.cc(),n.cc(),n.dc(15,"div",39),n.nc("click",function(){n.Lc(t);const e=n.qc(2);return e.openRelationshipProfile(e.currentRandomSmileRelationship)}),n.dc(16,"div",63),n.Zb(17,"i",66),n.cc(),n.dc(18,"div",65),n.Uc(19,kE,1,3,"div",43),n.dc(20,"div",44),n.Wc(21),n.rc(22,"translate"),n.cc(),n.dc(23,"div",45),n.Wc(24),n.rc(25,"translate"),n.cc(),n.cc(),n.cc(),n.dc(26,"div",39),n.nc("click",function(){n.Lc(t);const e=n.qc(2);return e.openRelationshipProfile(e.currentRandomBobbaRelationship)}),n.dc(27,"div",63),n.Zb(28,"i",67),n.cc(),n.dc(29,"div",68),n.Uc(30,WE,1,3,"div",43),n.dc(31,"div",44),n.Wc(32),n.rc(33,"translate"),n.cc(),n.dc(34,"div",45),n.Wc(35),n.rc(36,"translate"),n.cc(),n.cc(),n.cc(),n.ac()}if(2&t){const t=n.qc(2);n.Kb(2),n.Xc(n.sc(3,10,"extendedprofile.relstatus")),n.Kb(6),n.yc("ngIf",t.currentRandomHeartRelationship),n.Kb(2),n.Yc(" ",t.currentRandomHeartRelationship?t.currentRandomHeartRelationship.username:n.sc(11,12,"extendedprofile.no.friends.in.this.category")," "),n.Kb(3),n.Yc(" ",t.heartRelationships.length>1?n.uc(14,14,"extendedprofile.relstatus.others.heart","count",t.heartRelationships.length-1):""," "),n.Kb(6),n.yc("ngIf",t.currentRandomSmileRelationship),n.Kb(2),n.Yc(" ",t.currentRandomSmileRelationship?t.currentRandomSmileRelationship.username:n.sc(22,18,"extendedprofile.no.friends.in.this.category")," "),n.Kb(3),n.Yc(" ",t.smileRelationships.length>1?n.uc(25,20,"extendedprofile.relstatus.others.smile","count",t.smileRelationships.length-1):""," "),n.Kb(6),n.yc("ngIf",t.currentRandomBobbaRelationship),n.Kb(2),n.Yc(" ",t.currentRandomBobbaRelationship?t.currentRandomBobbaRelationship.username:n.sc(33,24,"extendedprofile.no.friends.in.this.category")," "),n.Kb(3),n.Yc(" ",t.bobbaRelationships.length>1?n.uc(36,26,"extendedprofile.relstatus.others.bobba","count",t.bobbaRelationships.length-1):""," ")}}function VE(t,e){1&t&&(n.dc(0,"div",70),n.Zb(1,"i",71),n.Wc(2),n.rc(3,"translate"),n.cc()),2&t&&(n.Kb(2),n.Yc(" ",n.sc(3,1,"extendedprofile.me")," "))}function GE(t,e){if(1&t&&n.Zb(0,"div",69),2&t){const t=n.qc(2);n.yc("headOnly",!0)("figure",t.currentRandomHeartRelationship.figure)("direction",4)}}function KE(t,e){if(1&t&&n.Zb(0,"div",69),2&t){const t=n.qc(2);n.yc("headOnly",!0)("figure",t.currentRandomSmileRelationship.figure)("direction",4)}}function HE(t,e){if(1&t&&n.Zb(0,"div",69),2&t){const t=n.qc(2);n.yc("headOnly",!0)("figure",t.currentRandomBobbaRelationship.figure)("direction",4)}}function jE(t,e){if(1&t){const t=n.ec();n.dc(0,"div",60),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc(2).selectGroup(s.id)}),n.Zb(1,"nitro-badge",61),n.cc()}if(2&t){const t=e.$implicit,s=n.qc(2);n.yc("ngClass",n.Cc(3,LE,s.selectedGroup&&s.selectedGroup.id===t.id)),n.Kb(1),n.yc("badge",t.badge)("isGroup",!0)}}function zE(t,e){1&t&&(n.dc(0,"button",84),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"group.join")))}function YE(t,e){1&t&&(n.dc(0,"button",84),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"group.requestmembership")))}function qE(t,e){1&t&&(n.dc(0,"button",86),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"group.membershippending")))}function XE(t,e){if(1&t&&(n.dc(0,"div"),n.Uc(1,YE,3,3,"button",83),n.Uc(2,qE,3,3,"button",85),n.cc()),2&t){const t=n.qc(4);n.Kb(1),n.yc("ngIf",0===t.selectedGroup.membershipType),n.Kb(1),n.yc("ngIf",2===t.selectedGroup.membershipType)}}function ZE(t,e){if(1&t&&(n.dc(0,"div"),n.Uc(1,zE,3,3,"button",83),n.Uc(2,XE,3,2,"div",26),n.cc()),2&t){const t=n.qc(3);n.Kb(1),n.yc("ngIf",0===t.selectedGroup.type),n.Kb(1),n.yc("ngIf",1===t.selectedGroup.type)}}function QE(t,e){1&t&&(n.dc(0,"button",87),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"group.leave")))}const JE=function(){return["date","owner"]},$E=function(t,e){return[t,e]},tS=function(t,e){return["group.created",null,null,t,e]};function eS(t,e){if(1&t&&(n.dc(0,"div"),n.dc(1,"div",72),n.dc(2,"div",73),n.dc(3,"div",74),n.Zb(4,"i",36),n.Wc(5),n.cc(),n.dc(6,"div",75),n.Wc(7),n.rc(8,"translate"),n.cc(),n.dc(9,"div",76),n.Wc(10),n.cc(),n.cc(),n.dc(11,"div",77),n.dc(12,"div",78),n.Zb(13,"nitro-badge",61),n.cc(),n.dc(14,"div",79),n.Zb(15,"i",80),n.Wc(16),n.cc(),n.cc(),n.cc(),n.dc(17,"div",81),n.Uc(18,ZE,3,2,"div",26),n.Uc(19,QE,3,3,"button",82),n.cc(),n.cc()),2&t){const t=n.qc(2);n.Kb(4),n.yc("ngClass","icon-group-type-"+t.selectedGroup.type),n.Kb(1),n.Yc(" ",t.selectedGroup.title," "),n.Kb(2),n.Xc(n.vc(8,9,n.Dc(19,tS,n.Bc(15,JE),n.Dc(16,$E,t.selectedGroup.createdAt,t.selectedGroup.ownerName)))),n.Kb(3),n.Xc(t.selectedGroup.description),n.Kb(3),n.yc("badge",t.selectedGroup.badge)("isGroup",!0),n.Kb(3),n.Yc(" ",t.selectedGroup.membersCount,""),n.Kb(2),n.yc("ngIf",1!==t.selectedGroup.membershipType),n.Kb(1),n.yc("ngIf",1===t.selectedGroup.membershipType)}}const sS=function(t){return[t]};function nS(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"h6",3),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",4),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(6,"i",5),n.cc(),n.cc(),n.dc(7,"div",6),n.dc(8,"div",7),n.dc(9,"div",8),n.dc(10,"div",9),n.dc(11,"div",10),n.Wc(12),n.cc(),n.Uc(13,UE,2,0,"button",11),n.cc(),n.dc(14,"div",12),n.dc(15,"div",13),n.Zb(16,"div",14),n.cc(),n.dc(17,"div",15),n.dc(18,"div",16),n.Wc(19),n.cc(),n.dc(20,"div",17),n.Zb(21,"div",18),n.rc(22,"translate"),n.Zb(23,"div",18),n.rc(24,"translate"),n.rc(25,"timeAgo"),n.dc(26,"div",19),n.Wc(27),n.rc(28,"translate"),n.cc(),n.cc(),n.cc(),n.cc(),n.cc(),n.dc(29,"div",20),n.dc(30,"div",21),n.dc(31,"div",22),n.nc("click",function(){return n.Lc(t),n.qc().selectTab(0)}),n.Wc(32),n.rc(33,"translate"),n.cc(),n.dc(34,"div",23),n.nc("click",function(){return n.Lc(t),n.qc().selectTab(1)}),n.Wc(35),n.rc(36,"translate"),n.cc(),n.dc(37,"div",23),n.nc("click",function(){return n.Lc(t),n.qc().selectTab(2)}),n.Wc(38),n.rc(39,"translate"),n.cc(),n.cc(),n.dc(40,"div",24),n.Uc(41,NE,2,1,"div",25),n.Uc(42,xE,4,1,"ng-container",26),n.Uc(43,BE,37,30,"ng-container",26),n.cc(),n.cc(),n.cc(),n.cc(),n.dc(44,"div",27),n.dc(45,"div",7),n.dc(46,"div",8),n.dc(47,"div",28),n.dc(48,"div",29),n.Zb(49,"div",30),n.cc(),n.dc(50,"div",31),n.dc(51,"div",32),n.Wc(52),n.cc(),n.dc(53,"div",33),n.Wc(54),n.cc(),n.Zb(55,"div",34),n.rc(56,"translate"),n.Zb(57,"div",34),n.rc(58,"translate"),n.rc(59,"timeAgo"),n.Zb(60,"div",34),n.rc(61,"translate"),n.dc(62,"div"),n.dc(63,"div",35),n.Zb(64,"i",36),n.cc(),n.Uc(65,VE,4,3,"div",37),n.cc(),n.cc(),n.cc(),n.Zb(66,"div",38),n.cc(),n.dc(67,"div",8),n.Zb(68,"div",34),n.rc(69,"translate"),n.dc(70,"div",32),n.Wc(71),n.rc(72,"translate"),n.cc(),n.dc(73,"div",39),n.nc("click",function(){n.Lc(t);const e=n.qc();return e.openRelationshipProfile(e.currentRandomHeartRelationship)}),n.dc(74,"div",40),n.Zb(75,"i",41),n.cc(),n.dc(76,"div",42),n.Uc(77,GE,1,3,"div",43),n.dc(78,"div",44),n.Wc(79),n.rc(80,"translate"),n.cc(),n.dc(81,"div",45),n.Wc(82),n.rc(83,"translate"),n.cc(),n.cc(),n.cc(),n.dc(84,"div",39),n.nc("click",function(){n.Lc(t);const e=n.qc();return e.openRelationshipProfile(e.currentRandomSmileRelationship)}),n.dc(85,"div",40),n.Zb(86,"i",46),n.cc(),n.dc(87,"div",42),n.Uc(88,KE,1,3,"div",43),n.dc(89,"div",44),n.Wc(90),n.rc(91,"translate"),n.cc(),n.dc(92,"div",45),n.Wc(93),n.rc(94,"translate"),n.cc(),n.cc(),n.cc(),n.dc(95,"div",39),n.nc("click",function(){n.Lc(t);const e=n.qc();return e.openRelationshipProfile(e.currentRandomBobbaRelationship)}),n.dc(96,"div",40),n.Zb(97,"i",47),n.cc(),n.dc(98,"div",42),n.Uc(99,HE,1,3,"div",43),n.dc(100,"div",44),n.Wc(101),n.rc(102,"translate"),n.cc(),n.dc(103,"div",45),n.Wc(104),n.rc(105,"translate"),n.cc(),n.cc(),n.cc(),n.cc(),n.cc(),n.Zb(106,"hr"),n.dc(107,"div",7),n.dc(108,"div",48),n.Zb(109,"div",34),n.rc(110,"translate"),n.dc(111,"perfect-scrollbar",49),n.dc(112,"div",50),n.Uc(113,jE,2,5,"div",51),n.cc(),n.cc(),n.cc(),n.dc(114,"div",52),n.Uc(115,eS,20,22,"div",26),n.cc(),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(3),n.Xc(n.sc(4,45,"extendedprofile.caption")),n.Kb(8),n.yc("ngClass",n.Cc(107,sS,t.isMe||t.isFriend?"rounded":"rounded-left")),n.Kb(1),n.Xc(t.userProfile.username),n.Kb(1),n.yc("ngIf",!t.isMe&&!t.isFriend),n.Kb(3),n.yc("figure",t.userProfile.figure)("direction",2),n.Kb(3),n.Xc(t.userProfile.motto),n.Kb(2),n.yc("innerHTML",n.uc(22,47,"extendedprofile.created","created",t.userProfile.registration),n.Mc),n.Kb(2),n.yc("innerHTML",n.uc(24,51,"extendedprofile.last.login","lastlogin",n.sc(25,55,t.userProfile.lastVisit)),n.Mc),n.Kb(4),n.Zc(" ",n.sc(28,57,"extendedprofile.achievementscore")," ",t.userProfile.achievementPoints," "),n.Kb(4),n.yc("ngClass",n.Cc(109,sS,0==t.tabId?"bg-emperor":"bg-secondary")),n.Kb(1),n.Yc(" ",n.sc(33,59,"inventory.badges.inactivebadges")," "),n.Kb(2),n.yc("ngClass",n.Cc(111,sS,1==t.tabId?"bg-emperor":"bg-secondary")),n.Kb(1),n.Zc(" ",n.sc(36,61,"avatar.profile.groups")," ",t.userProfile.groups.length," "),n.Kb(2),n.yc("ngClass",n.Cc(113,sS,2==t.tabId?"bg-emperor":"bg-secondary")),n.Kb(1),n.Zc(" ",n.sc(39,63,"friendlist.friends"),": ",t.userProfile.friendsCount," "),n.Kb(3),n.yc("ngIf",0==t.tabId),n.Kb(1),n.yc("ngIf",1==t.tabId),n.Kb(1),n.yc("ngIf",2==t.tabId),n.Kb(6),n.yc("figure",t.userProfile.figure)("direction",2),n.Kb(3),n.Xc(t.userProfile.username),n.Kb(2),n.Xc(t.userProfile.motto),n.Kb(1),n.yc("innerHTML",n.uc(56,65,"extendedprofile.created","created",t.userProfile.registration),n.Mc),n.Kb(2),n.yc("innerHTML",n.uc(58,69,"extendedprofile.last.login","lastlogin",n.sc(59,73,t.userProfile.lastVisit)),n.Mc),n.Kb(3),n.yc("innerHTML",n.uc(61,75,"extendedprofile.activitypoints","activitypoints",t.userProfile.achievementPoints),n.Mc),n.Kb(4),n.yc("ngClass",t.userProfile.isOnline?"icon-online":"icon-offline"),n.Kb(1),n.yc("ngIf",t.isMe),n.Kb(3),n.yc("innerHTML",n.uc(69,79,"extendedprofile.friends.count","count",t.userProfile.friendsCount),n.Mc),n.Kb(3),n.Xc(n.sc(72,83,"extendedprofile.relstatus")),n.Kb(6),n.yc("ngIf",t.currentRandomHeartRelationship),n.Kb(2),n.Yc(" ",t.currentRandomHeartRelationship?t.currentRandomHeartRelationship.username:n.sc(80,85,"extendedprofile.no.friends.in.this.category")," "),n.Kb(3),n.Yc(" ",t.heartRelationships.length>1?n.uc(83,87,"extendedprofile.relstatus.others.heart","count",t.heartRelationships.length-1):""," "),n.Kb(6),n.yc("ngIf",t.currentRandomSmileRelationship),n.Kb(2),n.Yc(" ",t.currentRandomSmileRelationship?t.currentRandomSmileRelationship.username:n.sc(91,91,"extendedprofile.no.friends.in.this.category")," "),n.Kb(3),n.Yc(" ",t.smileRelationships.length>1?n.uc(94,93,"extendedprofile.relstatus.others.smile","count",t.smileRelationships.length-1):""," "),n.Kb(6),n.yc("ngIf",t.currentRandomBobbaRelationship),n.Kb(2),n.Yc(" ",t.currentRandomBobbaRelationship?t.currentRandomBobbaRelationship.username:n.sc(102,97,"extendedprofile.no.friends.in.this.category")," "),n.Kb(3),n.Yc(" ",t.bobbaRelationships.length>1?n.uc(105,99,"extendedprofile.relstatus.others.bobba","count",t.bobbaRelationships.length-1):""," "),n.Kb(5),n.yc("innerHTML",n.uc(110,103,"extendedprofile.groups.count","count",t.userProfile.groups.length),n.Mc),n.Kb(4),n.yc("ngForOf",t.userProfile.groups),n.Kb(2),n.yc("ngIf",t.selectedGroup)}}let iS=(()=>{class t{constructor(t,e,s){this._userProfileService=t,this._sessionService=e,this._settingsService=s,this._currentRandomHeartRelationship=null,this._currentRandomSmileRelationship=null,this._currentRandomBobbaRelationship=null,this._tabId=0}ngOnInit(){this._userProfileService.component=this}ngOnDestroy(){this._userProfileService.component=null}hide(){this._settingsService.hideUserProfile()}openRelationshipProfile(t){t&&u.a.instance.communication.connection.send(new Qu.a(t.userId))}getRandomRelationships(){this._currentRandomHeartRelationship=this.heartRelationships[Math.floor(Math.random()*this.heartRelationships.length)],this._currentRandomSmileRelationship=this.smileRelationships[Math.floor(Math.random()*this.smileRelationships.length)],this._currentRandomBobbaRelationship=this.bobbaRelationships[Math.floor(Math.random()*this.bobbaRelationships.length)]}selectGroup(t){this._userProfileService.selectGroup(t)}selectTab(t){this._tabId=t}get visible(){return this._settingsService.userProfileVisible}get userProfile(){return this._userProfileService.userLoadedProfile}get userBadges(){return this._userProfileService.userBadges}get isMe(){return!!this.userProfile&&this._sessionService.userId===this.userProfile.id}get isFriend(){return!!this.userProfile&&this.userProfile.isMyFriend}get heartRelationships(){return this._userProfileService.heartRelationships}get currentRandomHeartRelationship(){return this._currentRandomHeartRelationship}get smileRelationships(){return this._userProfileService.smileRelationships}get currentRandomSmileRelationship(){return this._currentRandomSmileRelationship}get bobbaRelationships(){return this._userProfileService.bobbaRelationships}get currentRandomBobbaRelationship(){return this._currentRandomBobbaRelationship}get selectedGroup(){return this._userProfileService.selectedGroup}get tabId(){return this._tabId}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(ME),n.Yb(Bn),n.Yb(g))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-user-profile-component"]],decls:1,vars:1,consts:[["class","card nitro-user-profile-component",3,"bringToTop","draggable",4,"ngIf"],[1,"card","nitro-user-profile-component",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3","header-draggable"],[1,"mb-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"row"],[1,"col-6"],[1,"d-flex","flex-row"],[1,"bg-emperor","w-100","mb-1","font-bold","text-center",3,"ngClass"],["class","btn btn-sm btn-success rounded-right mb-1 px-2 py-0",4,"ngIf"],[1,"row","mx-0"],[1,"profile-avatar-container","col-3","px-0","mx-0"],["nitro-avatar-image","",1,"avatar-img","bg-emperor","rounded-left",3,"figure","direction"],[1,"col-9","px-0","mx-0","bg-emperor","profile-user-right","p-2"],[1,"profile-user-motto","font-italic","small"],[1,"mt-auto","small"],[1,"p-1","bg-primary","rounded","mb-1",3,"innerHTML"],[1,"p-1","bg-primary","rounded"],[1,"col-6","d-flex","flex-column"],[1,"d-flex","flex-row","small"],[1,"rounded-top","p-1","mr-1",3,"ngClass","click"],[1,"rounded-top","bg-secondary","p-1","mr-1",3,"ngClass","click"],[1,"bg-emperor","profile-info-bg","p-1"],["class","d-flex flex-row",4,"ngIf"],[4,"ngIf"],[1,"d-none"],[1,"profile-upper-container"],[1,"profile-avatar-container"],["nitro-avatar-image","",1,"avatar-img",3,"figure","direction"],[1,"profile-info-container"],[1,"font-weight-bold"],[1,"profile-info-motto","font-italic"],[3,"innerHTML"],[2,"float","left"],[1,"icon",3,"ngClass"],["class","its-me",4,"ngIf"],[1,"badges-container"],[1,"profile-relationship",3,"click"],[1,"icon-container"],[1,"icon","icon-relationship-heart"],[1,"profile-relationship-information"],["class","relationship-avatar","nitro-avatar-image","",3,"headOnly","figure","direction",4,"ngIf"],[1,"profile-relationship-name"],[1,"profile-relationship-extra"],[1,"icon","icon-relationship-smile"],[1,"icon","icon-relationship-bobba"],[1,"col-3"],[1,"grid-container","position-relative","w-100",2,"min-height","160px","max-height","160px"],[1,"grid-items","grid-1"],["class","item-detail",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-9"],[1,"btn","btn-sm","btn-success","rounded-right","mb-1","px-2","py-0"],[1,"fas","fa-user-plus"],["class","bg-primary p-1 rounded user-profile-badge",4,"ngFor","ngForOf"],[1,"bg-primary","p-1","rounded","user-profile-badge"],[1,"h-100","d-flex","justify-content-center",3,"badge"],[1,"d-flex","flex-column","w-100",2,"min-height","160px","height","160px","max-height","160px"],[1,"bg-primary","w-100","rounded","mb-1"],[1,"item-detail",3,"ngClass","click"],[3,"badge","isGroup"],[1,"font-weight-bold","small"],[1,"icon-container","mr-1"],[1,"fas","fa-heart","text-pink"],[1,"profile-relationship-information","bg-primary","rounded","w-100","mb-1","p-1"],[1,"fas","fa-smile","text-warning"],[1,"fas","fa-skull","text-black"],[1,"profile-relationship-information","bg-primary","rounded","w-100","p-1"],["nitro-avatar-image","",1,"relationship-avatar",3,"headOnly","figure","direction"],[1,"its-me"],[1,"icon","icon-check"],[1,"group-detail"],[1,"left-side"],[1,"group-title","font-weight-bold"],[1,"group-created-at"],[1,"group-description"],[1,"right-side"],[1,"group-badge"],[1,"group-members"],[1,"icon","icon-group-members"],[1,"group-membership-action"],["class","btn btn-danger btn-block",4,"ngIf"],["class","btn btn-primary btn-block",4,"ngIf"],[1,"btn","btn-primary","btn-block"],["class","btn btn-primary disabled btn-block",4,"ngIf"],[1,"btn","btn-primary","disabled","btn-block"],[1,"btn","btn-danger","btn-block"]],template:function(t,e){1&t&&n.Uc(0,nS,116,115,"div",0),2&t&&n.yc("ngIf",e.visible)},directives:[m.n,Dr,Kr,m.l,ba,Hr.b,m.m,cl],pipes:[ui,wE],encapsulation:2}),t})();const rS=["historyScroller"],aS=function(t){return{"background-color":t}};function oS(t,e){if(1&t&&n.Zb(0,"div",23),2&t){const t=n.qc(2).$implicit;n.yc("ngStyle",n.Cc(1,aS,t.senderColorString))}}const cS=function(t){return{"background-image":t}};function lS(t,e){if(1&t&&n.Zb(0,"div",24),2&t){const t=n.qc(2).$implicit;n.yc("ngStyle",n.Cc(1,cS,"url("+t.senderImageUrl+")"))}}function hS(t,e){if(1&t){const t=n.ec();n.dc(0,"div",16),n.nc("click",function(){n.Lc(t);const e=n.qc().$implicit;return n.qc(2).selectUser(e.senderId)}),n.Uc(1,oS,1,3,"div",17),n.dc(2,"div"),n.dc(3,"div",18),n.Uc(4,lS,1,3,"div",19),n.cc(),n.dc(5,"div",20),n.Zb(6,"b",21),n.Zb(7,"span",22),n.rc(8,"roomChatFormatter"),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc().$implicit;n.Kb(1),n.yc("ngIf",0===t.chatStyle),n.Kb(1),n.Ob("chat-bubble bubble-",t.chatStyle," type-",t.chatType,""),n.Kb(2),n.yc("ngIf",t.senderImageUrl),n.Kb(2),n.yc("innerHTML",t.senderName,n.Mc),n.Kb(1),n.yc("innerHTML",n.sc(8,8,t.content),n.Mc)}}function uS(t,e){if(1&t&&(n.dc(0,"div",25),n.Wc(1),n.cc()),2&t){const t=n.qc().$implicit;n.Kb(1),n.Xc(t.content)}}function _S(t,e){if(1&t&&(n.bc(0),n.dc(1,"div",10),n.dc(2,"div",11),n.dc(3,"div",12),n.Wc(4),n.rc(5,"date"),n.cc(),n.cc(),n.dc(6,"div",13),n.Uc(7,hS,9,10,"div",14),n.Uc(8,uS,2,1,"div",15),n.cc(),n.cc(),n.ac()),2&t){const t=e.$implicit;n.Kb(4),n.Xc(n.tc(5,3,t.date,"HH:mm:ss")),n.Kb(3),n.yc("ngIf",-1!==t.senderId),n.Kb(1),n.yc("ngIf",-1===t.senderId)}}function dS(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"h6",3),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",4),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(6,"i",5),n.cc(),n.cc(),n.dc(7,"perfect-scrollbar",6,7),n.dc(9,"div",8),n.Uc(10,_S,9,6,"ng-container",9),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.yc("topCenter",!1)("center",!1)("noMemory",!0),n.Kb(3),n.Xc(n.sc(4,6,"room.chathistory.button.text")),n.Kb(7),n.yc("ngForOf",t.historyItems)("ngForTrackBy",t.trackById)}}let gS=(()=>{class t{constructor(t,e){this._settingsService=t,this._chatHistoryService=e}ngOnChanges(t){const e=t.visible.currentValue;e&&e!==t.visible.previousValue&&setTimeout(()=>this.scrollToBottom(),1)}hide(){this._settingsService.hideChatHistory()}selectUser(t){t&&u.a.instance.roomEngine.selectRoomObject(u.a.instance.roomEngine.activeRoomId,t,k.a.UNIT)}trackById(t,e){return e.id}scrollToBottom(){this.historyScroller&&this.historyScroller.directiveRef.scrollToBottom(0)}get historyItems(){return this._chatHistoryService.historyItems}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(g),n.Yb(js))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-chat-history-component"]],viewQuery:function(t,e){if(1&t&&n.cd(rS,1),2&t){let t;n.Hc(t=n.oc())&&(e.historyScroller=t.first)}},inputs:{visible:"visible"},features:[n.Ib],decls:1,vars:1,consts:[["class","card nitro-chat-history-component",3,"bringToTop","draggable","topCenter","center","noMemory",4,"ngIf"],[1,"card","nitro-chat-history-component",3,"bringToTop","draggable","topCenter","center","noMemory"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"position-relative","w-100","h-100","mb-1"],["historyScroller",""],[1,"d-flex","flex-column","pt-3","px-3"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"row","mb-2"],[1,"d-flex","col-3","justify-content-end","align-items-center"],[1,"badge","badge-secondary","badge-sm"],[1,"d-flex","col-9","align-items-center","pl-0"],["class","bubble-container",3,"click",4,"ngIf"],["class","badge badge-success badge-sm",4,"ngIf"],[1,"bubble-container",3,"click"],["class","user-container-bg",3,"ngStyle",4,"ngIf"],[1,"user-container"],["class","user-image",3,"ngStyle",4,"ngIf"],[1,"chat-content"],[1,"username-container","mr-1",3,"innerHTML"],[1,"message",3,"innerHTML"],[1,"user-container-bg",3,"ngStyle"],[1,"user-image",3,"ngStyle"],[1,"badge","badge-success","badge-sm"]],template:function(t,e){1&t&&n.Uc(0,dS,11,8,"div",0),2&t&&n.yc("ngIf",e.visible)},directives:[m.n,Dr,Kr,Hr.b,m.m,m.o],pipes:[ui,m.d,sh],encapsulation:2}),t})();var mS=s("uHVT"),pS=s("RH6c"),fS=s("hUfz"),ES=s("SqPf"),SS=s("asTc");let bS=(()=>{class t{constructor(t){this._ngZone=t,this._messages=[],this._volumeSystem=0,this._volumeFurni=0,this._volumeTrax=0,this._oldChat=!1,this._roomInvites=!1,this._cameraFollow=!0,this._flags=0,this._chatType=0,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),this._messages=[new mS.a(this.onUserSettingsEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(this._messages&&this._messages.length){for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]}})}onUserSettingsEvent(t){if(!t)return;const e=t.getParser();e&&(this._volumeSystem=e.volumeSystem/100,this._volumeFurni=e.volumeFurni/100,this._volumeTrax=e.volumeTrax/100,this._oldChat=e.oldChat,this._roomInvites=e.roomInvites,this._cameraFollow=e.cameraFollow,this._flags=e.flags,this._chatType=e.chatType,this.sendUpdateEvent())}sendSound(){u.a.instance.communication.connection.send(new SS.a(Math.round(100*this._volumeSystem),Math.round(100*this._volumeFurni),Math.round(100*this._volumeTrax)))}sendUpdateEvent(){const t=new Vs.a(Vs.a.SETTINGS_UPDATED);t.volumeSystem=this._volumeSystem,t.volumeFurni=this._volumeFurni,t.volumeTrax=this._volumeTrax,t.oldChat=this._oldChat,t.roomInvites=this._roomInvites,t.cameraFollow=this._cameraFollow,t.flags=this._flags,t.chatType=this._chatType,u.a.instance.events.dispatchEvent(t)}_sendOldChat(){u.a.instance.communication.connection.send(new fS.a(this._oldChat))}_sendRoomInvites(){u.a.instance.communication.connection.send(new ES.a(this._roomInvites))}_sendCameraFollow(){u.a.instance.communication.connection.send(new pS.a(this._cameraFollow))}get volumeSystem(){return this._volumeSystem}set volumeSystem(t){t>1&&(t=1),t<0&&(t=0),this._volumeSystem=t,this.sendUpdateEvent()}get volumeFurni(){return this._volumeFurni}set volumeFurni(t){t>1&&(t=1),t<0&&(t=0),this._volumeFurni=t,this.sendUpdateEvent()}get volumeTrax(){return this._volumeTrax}set volumeTrax(t){t>1&&(t=1),t<0&&(t=0),this._volumeTrax=t,this.sendUpdateEvent()}get oldChat(){return this._oldChat}set oldChat(t){this._oldChat=t,this._sendOldChat()}get roomInvites(){return this._roomInvites}set roomInvites(t){this._roomInvites=t,this._sendRoomInvites()}get cameraFollow(){return this._cameraFollow}set cameraFollow(t){this._cameraFollow=t,this._sendCameraFollow(),this.sendUpdateEvent()}get flags(){return this._flags}set flags(t){this._flags=t,this.sendUpdateEvent()}get chatType(){return this._chatType}set chatType(t){this._chatType=t,this.sendUpdateEvent()}}return t.\u0275fac=function(e){return new(e||t)(n.kc(n.H))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})();const vS=function(t){return{"text-muted":t}},IS=function(t,e){return{"fa-volume-mute":t,"fa-volume-down":e}};function RS(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"h6",3),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",4),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(6,"i",5),n.cc(),n.cc(),n.dc(7,"div",6),n.dc(8,"div",7),n.dc(9,"input",8),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().oldChat=e}),n.cc(),n.dc(10,"label",9),n.Wc(11),n.rc(12,"translate"),n.cc(),n.cc(),n.dc(13,"div",7),n.dc(14,"input",10),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().roomInvites=e}),n.cc(),n.dc(15,"label",11),n.Wc(16),n.rc(17,"translate"),n.cc(),n.cc(),n.dc(18,"div",7),n.dc(19,"input",12),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().cameraFollow=e}),n.cc(),n.dc(20,"label",13),n.Wc(21),n.rc(22,"translate"),n.cc(),n.cc(),n.dc(23,"div",14),n.Wc(24),n.rc(25,"translate"),n.cc(),n.dc(26,"div",15),n.dc(27,"label",16),n.Wc(28),n.rc(29,"translate"),n.cc(),n.dc(30,"div",17),n.dc(31,"div",18),n.Zb(32,"i",19),n.cc(),n.dc(33,"div",20),n.dc(34,"input",21),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().volumeSystem=e})("mouseup",function(){return n.Lc(t),n.qc().saveSound()}),n.cc(),n.cc(),n.dc(35,"div",18),n.Zb(36,"i",22),n.cc(),n.cc(),n.cc(),n.dc(37,"div",15),n.dc(38,"label",23),n.Wc(39),n.rc(40,"translate"),n.cc(),n.dc(41,"div",17),n.dc(42,"div",18),n.Zb(43,"i",19),n.cc(),n.dc(44,"div",20),n.dc(45,"input",24),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().volumeFurni=e})("mouseup",function(){return n.Lc(t),n.qc().saveSound()}),n.cc(),n.cc(),n.dc(46,"div",18),n.Zb(47,"i",22),n.cc(),n.cc(),n.cc(),n.dc(48,"div"),n.dc(49,"label",25),n.Wc(50),n.rc(51,"translate"),n.cc(),n.dc(52,"div",17),n.dc(53,"div",18),n.Zb(54,"i",19),n.cc(),n.dc(55,"div",20),n.dc(56,"input",26),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().volumeTrax=e})("mouseup",function(){return n.Lc(t),n.qc().saveSound()}),n.cc(),n.cc(),n.dc(57,"div",18),n.Zb(58,"i",22),n.cc(),n.cc(),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(3),n.Xc(n.sc(4,23,"widget.memenu.settings.title")),n.Kb(6),n.yc("ngModel",t.oldChat),n.Kb(2),n.Yc(" ",n.sc(12,25,"memenu.settings.chat.prefer.old.chat")," "),n.Kb(3),n.yc("ngModel",t.roomInvites),n.Kb(2),n.Yc(" ",n.sc(17,27,"memenu.settings.other.ignore.room.invites")," "),n.Kb(3),n.yc("ngModel",t.cameraFollow),n.Kb(2),n.Yc(" ",n.sc(22,29,"memenu.settings.other.disable.room.camera.follow")," "),n.Kb(3),n.Xc(n.sc(25,31,"widget.memenu.settings.volume")),n.Kb(4),n.Xc(n.sc(29,33,"widget.memenu.settings.volume.ui")),n.Kb(3),n.yc("ngClass",n.Cc(39,vS,t.volumeSystem>=50)),n.Kb(1),n.yc("ngClass",n.Dc(41,IS,0===t.volumeSystem,t.volumeSystem>0)),n.Kb(2),n.yc("ngModel",t.volumeSystem),n.Kb(1),n.yc("ngClass",n.Cc(44,vS,t.volumeSystem<50)),n.Kb(4),n.Xc(n.sc(40,35,"widget.memenu.settings.volume.furni")),n.Kb(3),n.yc("ngClass",n.Cc(46,vS,t.volumeFurni>=50)),n.Kb(1),n.yc("ngClass",n.Dc(48,IS,0===t.volumeFurni,t.volumeFurni>0)),n.Kb(2),n.yc("ngModel",t.volumeFurni),n.Kb(1),n.yc("ngClass",n.Cc(51,vS,t.volumeFurni<50)),n.Kb(4),n.Xc(n.sc(51,37,"widget.memenu.settings.volume.trax")),n.Kb(3),n.yc("ngClass",n.Cc(53,vS,t.volumeTrax>=50)),n.Kb(1),n.yc("ngClass",n.Dc(55,IS,0===t.volumeTrax,t.volumeTrax>0)),n.Kb(2),n.yc("ngModel",t.volumeTrax),n.Kb(1),n.yc("ngClass",n.Cc(58,vS,t.volumeTrax<50))}}let TS=(()=>{class t{constructor(t,e){this._userSettingsService=t,this._settingsService=e,this.visible=!1}hide(){this._settingsService.hideUserSettings()}saveSound(){this._userSettingsService.sendSound()}get volumeSystem(){return 100*this._userSettingsService.volumeSystem}set volumeSystem(t){this._userSettingsService.volumeSystem=t/100}get volumeFurni(){return 100*this._userSettingsService.volumeFurni}set volumeFurni(t){this._userSettingsService.volumeFurni=t/100}get volumeTrax(){return 100*this._userSettingsService.volumeTrax}set volumeTrax(t){this._userSettingsService.volumeTrax=t/100}get oldChat(){return this._userSettingsService.oldChat}set oldChat(t){this._userSettingsService.oldChat=t}get roomInvites(){return this._userSettingsService.roomInvites}set roomInvites(t){this._userSettingsService.roomInvites=t}get cameraFollow(){return this._userSettingsService.cameraFollow}set cameraFollow(t){this._userSettingsService.cameraFollow=t}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(bS),n.Yb(g))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-user-settings-component"]],inputs:{visible:"visible"},decls:1,vars:1,consts:[["class","nitro-user-settings-component card position-absolute",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-user-settings-component","card","position-absolute",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"form-check"],["type","checkbox","id","oldChat",1,"form-check-input",3,"ngModel","ngModelChange"],["for","oldChat",1,"form-check-label"],["type","checkbox","id","roomInvites",1,"form-check-input",3,"ngModel","ngModelChange"],["for","roomInvites",1,"form-check-label"],["type","checkbox","id","cameraFollow",1,"form-check-input",3,"ngModel","ngModelChange"],["for","cameraFollow",1,"form-check-label"],[1,"mt-3","mb-2"],[1,"mb-2"],["for","volumeSystem"],[1,"d-flex","flex-row"],[3,"ngClass"],[1,"fas",3,"ngClass"],[1,"w-100","ml-2","mr-2"],["type","range","min","0","max","100","step","1","id","volumeSystem",1,"custom-range",3,"ngModel","ngModelChange","mouseup"],[1,"fas","fa-volume-up"],["for","volumeFurni"],["type","range","min","0","max","100","step","1","id","volumeFurni",1,"custom-range",3,"ngModel","ngModelChange","mouseup"],["for","volumeTrax"],["type","range","min","0","max","100","step","1","id","volumeTrax",1,"custom-range",3,"ngModel","ngModelChange","mouseup"]],template:function(t,e){1&t&&n.Uc(0,RS,59,60,"div",0),2&t&&n.yc("ngIf",e.visible)},directives:[m.n,Dr,Kr,ur.a,ur.l,ur.n,m.l,ur.r,ur.b],pipes:[ui],encapsulation:2}),t})();var yS=s("bakE"),OS=s("XxiA"),CS=s("vKkO"),AS=s("amIx"),MS=s("Yp13"),wS=s("FXkd"),US=s("qoEl");class DS extends d.Filter{constructor(t,e){super("\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec3 lineColor;\nuniform vec3 color;\nvoid main(void) {\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n    vec3 colorLine = lineColor * currentColor.a;\n    vec3 colorOverlay = color * currentColor.a;\n\n    if(currentColor.r == 0.0 && currentColor.g == 0.0 && currentColor.b == 0.0 && currentColor.a > 0.0) {\n        gl_FragColor = vec4(colorLine.r, colorLine.g, colorLine.b, currentColor.a);\n    } else if(currentColor.a > 0.0) {\n        gl_FragColor = vec4(colorOverlay.r, colorOverlay.g, colorOverlay.b, currentColor.a);\n    }\n}"),this.uniforms.lineColor=new Float32Array(3),this.uniforms.color=new Float32Array(3),this.lineColor=t,this.color=e}get lineColor(){return this._lineColor}set lineColor(t){const e=this.uniforms.lineColor;"number"==typeof t?(Object(US.hex2rgb)(t,e),this._lineColor=t):(e[0]=t[0],e[1]=t[1],e[2]=t[2],this._lineColor=Object(US.rgb2hex)(e))}get color(){return this._color}set color(t){const e=this.uniforms.color;"number"==typeof t?(Object(US.hex2rgb)(t,e),this._color=t):(e[0]=t[0],e[1]=t[1],e[2]=t[2],this._color=Object(US.rgb2hex)(e))}}class NS{constructor(t){this._component=t;const e=new DS([1,1,1],[.6,.6,.6]);this._selectionShader=e}show(t){this.applySelectionShader(this.getRoomObject(t))}hide(t){this.clearSelectionShader(this.getRoomObject(t))}clearSelectionShaderFromFurni(t){for(const e of t)this.clearSelectionShader(this.getRoomObject(e))}applySelectionShaderToFurni(t){for(const e of t)this.applySelectionShader(this.getRoomObject(e))}getRoomObject(t){return this._component?u.a.instance.roomEngine.getRoomObject(this._component.roomId,t,k.a.FLOOR):null}applySelectionShader(t){if(!t)return;const e=t.visualization;if(e)for(const s of e.sprites)s.blendMode!==d.BLEND_MODES.ADD&&(s.filters=[this._selectionShader])}clearSelectionShader(t){if(!t)return;const e=t.visualization;if(e)for(const s of e.sprites)s.filters=[]}}let LS=(()=>{class t{constructor(t,e){this._wiredService=t,this._formBuilder=e}get code(){return-1}get negativeCode(){return-1}get requiresFurni(){return tI._Str_5431}get hasStateSnapshot(){return!1}readIntegerParamsFromForm(){return[]}readStringParamFromForm(){return""}onInitStart(){}onEditStart(t){}get hasSpecialInputs(){return!1}validate(){return null}static getLocaleName(t){const e=Math.floor(t/2);return t%2?(e+.5).toString():e.toString()}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(hs),n.Yb(ur.c))},t.\u0275dir=n.Tb({type:t}),t})();class PS extends LS{constructor(){super(...arguments),this.delay=0}onEditStart(t){this.delay=t.delayInPulses}}class xS extends LS{}let FS=(()=>{class t{}return t.STATES_MATCH=0,t.FURNIS_HAVE_AVATARS=1,t.TRIGGERER_IS_ON_FURNI=2,t.TIME_ELAPSED_MORE=3,t.TIME_ELAPSED_LESS=4,t.USER_COUNT_IN=5,t.ACTOR_IS_IN_TEAM=6,t.HAS_STACKED_FURNIS=7,t.STUFF_TYPE_MATCHES=8,t.STUFFS_IN_FORMATION=9,t.ACTOR_IS_GROUP_MEMBER=10,t.ACTOR_IS_WEARING_BADGE=11,t.ACTOR_IS_WEARING_EFFECT=12,t.NOT_STATES_MATCH=13,t.FURNI_NOT_HAVE_HABBO=14,t.NOT_ACTOR_ON_FURNI=15,t.NOT_USER_COUNT_IN=16,t.NOT_ACTOR_IN_TEAM=17,t.NOT_HAS_STACKED_FURNIS=18,t.NOT_FURNI_IS_OF_TYPE=19,t.NOT_STUFFS_IN_FORMATION=20,t.NOT_ACTOR_IN_GROUP=21,t.NOT_ACTOR_WEARS_BADGE=22,t.NOT_ACTOR_WEARING_EFFECT=23,t.DATE_RANGE_ACTIVE=24,t.ACTOR_HAS_HANDITEM=25,t})(),kS=(()=>{class t extends xS{constructor(){super(...arguments),this.allowedHanditemIds=["2","5","7","8","9","10","27"],this.handitemId="0"}get code(){return t.CODE}onEditStart(t){this.handitemId=t.intData.length>0&&this.allowedHanditemIds.includes(t.intData[0].toString())?t.intData[0].toString():"0"}readIntegerParamsFromForm(){return[parseInt(this.handitemId)]}get hasSpecialInputs(){return!0}}return t.CODE=FS.ACTOR_HAS_HANDITEM,t.\u0275fac=function(e){return WS(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:30,vars:36,consts:[[1,"form-group"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","0",3,"selected"],["value","2",3,"selected"],["value","5",3,"selected"],["value","7",3,"selected"],["value","8",3,"selected"],["value","9",3,"selected"],["value","10",3,"selected"],["value","27",3,"selected"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-base-component"),n.dc(1,"div",0),n.dc(2,"label"),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"select",1),n.nc("ngModelChange",function(t){return e.handitemId=t}),n.dc(6,"option",2),n.Wc(7),n.rc(8,"translate"),n.cc(),n.dc(9,"option",3),n.Wc(10),n.rc(11,"translate"),n.cc(),n.dc(12,"option",4),n.Wc(13),n.rc(14,"translate"),n.cc(),n.dc(15,"option",5),n.Wc(16),n.rc(17,"translate"),n.cc(),n.dc(18,"option",6),n.Wc(19),n.rc(20,"translate"),n.cc(),n.dc(21,"option",7),n.Wc(22),n.rc(23,"translate"),n.cc(),n.dc(24,"option",8),n.Wc(25),n.rc(26,"translate"),n.cc(),n.dc(27,"option",9),n.Wc(28),n.rc(29,"translate"),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(3),n.Xc(n.sc(4,18,"wiredfurni.params.handitem")),n.Kb(2),n.yc("ngModel",e.handitemId),n.Kb(1),n.yc("selected","0"==e.handitemId),n.Kb(1),n.Xc(n.sc(8,20,"wiredfurni.tooltip.handitem")),n.Kb(2),n.yc("selected","2"==e.handitemId),n.Kb(1),n.Xc(n.sc(11,22,"handitem2")),n.Kb(2),n.yc("selected","5"==e.handitemId),n.Kb(1),n.Xc(n.sc(14,24,"handitem5")),n.Kb(2),n.yc("selected","7"==e.handitemId),n.Kb(1),n.Xc(n.sc(17,26,"handitem7")),n.Kb(2),n.yc("selected","8"==e.handitemId),n.Kb(1),n.Xc(n.sc(20,28,"handitem8")),n.Kb(2),n.yc("selected","9"==e.handitemId),n.Kb(1),n.Xc(n.sc(23,30,"handitem9")),n.Kb(2),n.yc("selected","10"==e.handitemId),n.Kb(1),n.Xc(n.sc(26,32,"handitem10")),n.Kb(2),n.yc("selected","27"==e.handitemId),n.Kb(1),n.Xc(n.sc(29,34,"handitem27")))},encapsulation:2}),t})();const WS=n.fc(kS);let BS=(()=>{class t extends xS{get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}}return t.CODE=FS.ACTOR_IS_GROUP_MEMBER,t.NEGATIVE_CODE=FS.NOT_ACTOR_IN_GROUP,t.\u0275fac=function(e){return VS(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:1,vars:0,template:function(t,e){1&t&&n.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const VS=n.fc(BS);let GS=(()=>{class t extends xS{constructor(){super(...arguments),this.team="1"}get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}onEditStart(t){this.team=t.intData[0].toString()}readIntegerParamsFromForm(){return[Number.parseInt(this.team)]}get hasSpecialInputs(){return!0}}return t.CODE=FS.ACTOR_IS_IN_TEAM,t.NEGATIVE_CODE=FS.NOT_ACTOR_IN_TEAM,t.\u0275fac=function(e){return KS(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:23,vars:19,consts:[[1,"form-check"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","radio","value","3",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","radio","value","4",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-base-component"),n.Wc(1),n.rc(2,"translate"),n.dc(3,"div",0),n.dc(4,"input",1),n.nc("ngModelChange",function(t){return e.team=t}),n.cc(),n.dc(5,"label",2),n.Wc(6),n.rc(7,"translate"),n.cc(),n.cc(),n.dc(8,"div",0),n.dc(9,"input",3),n.nc("ngModelChange",function(t){return e.team=t}),n.cc(),n.dc(10,"label",2),n.Wc(11),n.rc(12,"translate"),n.cc(),n.cc(),n.dc(13,"div",0),n.dc(14,"input",4),n.nc("ngModelChange",function(t){return e.team=t}),n.cc(),n.dc(15,"label",2),n.Wc(16),n.rc(17,"translate"),n.cc(),n.cc(),n.dc(18,"div",0),n.dc(19,"input",5),n.nc("ngModelChange",function(t){return e.team=t}),n.cc(),n.dc(20,"label",2),n.Wc(21),n.rc(22,"translate"),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(1),n.Yc(" ",n.sc(2,9,"wiredfurni.params.team")," "),n.Kb(3),n.yc("ngModel",e.team),n.Kb(2),n.Xc(n.sc(7,11,"wiredfurni.params.team.1")),n.Kb(3),n.yc("ngModel",e.team),n.Kb(2),n.Xc(n.sc(12,13,"wiredfurni.params.team.2")),n.Kb(3),n.yc("ngModel",e.team),n.Kb(2),n.Xc(n.sc(17,15,"wiredfurni.params.team.3")),n.Kb(3),n.yc("ngModel",e.team),n.Kb(2),n.Xc(n.sc(22,17,"wiredfurni.params.team.4")))},encapsulation:2}),t})();const KS=n.fc(GS);let HS=(()=>{class t extends xS{get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}readIntegerParamsFromForm(){const t=parseInt(this.effectId);return isNaN(t)?[]:[t]}onEditStart(t){this.effectId=t.stringData.length>0?t.stringData:"0"}get hasSpecialInputs(){return!0}}return t.CODE=FS.ACTOR_IS_WEARING_EFFECT,t.NEGATIVE_CODE=FS.NOT_ACTOR_WEARING_EFFECT,t.\u0275fac=function(e){return jS(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:6,vars:4,consts:[[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-base-component"),n.dc(1,"div",0),n.dc(2,"label"),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"input",1),n.nc("ngModelChange",function(t){return e.effectId=t}),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(3),n.Xc(n.sc(4,2,"wiredfurni.params.effectid")),n.Kb(2),n.yc("ngModel",e.effectId))},encapsulation:2}),t})();const jS=n.fc(HS);let zS=(()=>{class t extends xS{get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}get requiresFurni(){return tI._Str_4873}}return t.CODE=FS.TRIGGERER_IS_ON_FURNI,t.NEGATIVE_CODE=FS.NOT_ACTOR_ON_FURNI,t.\u0275fac=function(e){return YS(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:1,vars:0,template:function(t,e){1&t&&n.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const YS=n.fc(zS);let qS=(()=>{class t extends xS{get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}readStringParamFromForm(){return this.botName}onEditStart(t){this.botName=t.stringData}get hasSpecialInputs(){return!0}}return t.CODE=FS.ACTOR_IS_WEARING_BADGE,t.NEGATIVE_CODE=FS.NOT_ACTOR_WEARS_BADGE,t.\u0275fac=function(e){return XS(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:6,vars:4,consts:[[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-base-component"),n.dc(1,"div",0),n.dc(2,"label"),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"input",1),n.nc("ngModelChange",function(t){return e.botName=t}),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(3),n.Xc(n.sc(4,2,"wiredfurni.params.badgecode")),n.Kb(2),n.yc("ngModel",e.botName))},encapsulation:2}),t})();const XS=n.fc(qS);let ZS=(()=>{class t extends xS{get code(){return t.CODE}test(){return t.CODE}readIntegerParamsFromForm(){const t=[],e=new Date(this.startDate).getTime();if(!isNaN(e)){t.push(e/1e3);const s=new Date(this.endDate).getTime();isNaN(s)||t.push(s/1e3)}return t}onEditStart(t){let e,s;e=t.intData.length>0?new Date(1e3*t.intData[0]):new Date(0),s=t.intData.length>1?new Date(1e3*t.intData[1]):new Date(0),this.startDate=this.dateToString(e),this.endDate=this.dateToString(s)}get hasSpecialInputs(){return!0}dateToString(t){return`${t.getFullYear()}/${("0"+(t.getMonth()+1)).slice(-2)}/${("0"+t.getDate()).slice(-2)} ${("0"+t.getHours()).slice(-2)}:${("0"+t.getMinutes()).slice(-2)}`}}return t.CODE=FS.DATE_RANGE_ACTIVE,t.\u0275fac=function(e){return QS(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:11,vars:8,consts:[[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-base-component"),n.dc(1,"div",0),n.dc(2,"label"),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"input",1),n.nc("ngModelChange",function(t){return e.startDate=t}),n.cc(),n.cc(),n.dc(6,"div",0),n.dc(7,"label"),n.Wc(8),n.rc(9,"translate"),n.cc(),n.dc(10,"input",1),n.nc("ngModelChange",function(t){return e.endDate=t}),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(3),n.Xc(n.sc(4,4,"wiredfurni.params.startdate")),n.Kb(2),n.yc("ngModel",e.startDate),n.Kb(3),n.Xc(n.sc(9,6,"wiredfurni.params.enddate")),n.Kb(2),n.yc("ngModel",e.endDate))},encapsulation:2}),t})();const QS=n.fc(ZS);let JS=(()=>{class t extends xS{constructor(){super(...arguments),this.requireAll="0"}get code(){return t.CODE}get requiresFurni(){return tI._Str_4873}onEditStart(t){this.requireAll=t.intData.length>0&&1===t.intData[0]?"1":"0"}readIntegerParamsFromForm(){return["1"===this.requireAll?1:0]}get hasSpecialInputs(){return!0}}return t.CODE=FS.NOT_HAS_STACKED_FURNIS,t.\u0275fac=function(e){return $S(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:13,vars:11,consts:[[1,"form-check"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-base-component"),n.Wc(1),n.rc(2,"translate"),n.dc(3,"div",0),n.dc(4,"input",1),n.nc("ngModelChange",function(t){return e.requireAll=t}),n.cc(),n.dc(5,"label",2),n.Wc(6),n.rc(7,"translate"),n.cc(),n.cc(),n.dc(8,"div",0),n.dc(9,"input",3),n.nc("ngModelChange",function(t){return e.requireAll=t}),n.cc(),n.dc(10,"label",2),n.Wc(11),n.rc(12,"translate"),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(1),n.Yc(" ",n.sc(2,5,"wiredfurni.params.not_requireall")," "),n.Kb(3),n.yc("ngModel",e.requireAll),n.Kb(2),n.Xc(n.sc(7,7,"wiredfurni.params.not_requireall.0")),n.Kb(3),n.yc("ngModel",e.requireAll),n.Kb(2),n.Xc(n.sc(12,9,"wiredfurni.params.not_requireall.1")))},encapsulation:2}),t})();const $S=n.fc(JS);let tb=(()=>{class t extends xS{get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}get requiresFurni(){return tI._Str_4873}}return t.CODE=FS.FURNIS_HAVE_AVATARS,t.NEGATIVE_CODE=FS.FURNI_NOT_HAVE_HABBO,t.\u0275fac=function(e){return eb(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:1,vars:0,template:function(t,e){1&t&&n.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const eb=n.fc(tb);let sb=(()=>{class t extends xS{get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}get requiresFurni(){return tI._Str_4991}}return t.CODE=FS.STUFF_TYPE_MATCHES,t.NEGATIVE_CODE=FS.NOT_FURNI_IS_OF_TYPE,t.\u0275fac=function(e){return nb(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:1,vars:0,template:function(t,e){1&t&&n.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const nb=n.fc(sb);let ib=(()=>{class t extends xS{constructor(){super(...arguments),this.requireAll="0"}get code(){return t.CODE}get requiresFurni(){return tI._Str_4873}onEditStart(t){this.requireAll=t.intData.length>0&&1===t.intData[0]?"1":"0"}readIntegerParamsFromForm(){return["1"===this.requireAll?1:0]}get hasSpecialInputs(){return!0}}return t.CODE=FS.HAS_STACKED_FURNIS,t.\u0275fac=function(e){return rb(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:13,vars:11,consts:[[1,"form-check"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-base-component"),n.Wc(1),n.rc(2,"translate"),n.dc(3,"div",0),n.dc(4,"input",1),n.nc("ngModelChange",function(t){return e.requireAll=t}),n.cc(),n.dc(5,"label",2),n.Wc(6),n.rc(7,"translate"),n.cc(),n.cc(),n.dc(8,"div",0),n.dc(9,"input",3),n.nc("ngModelChange",function(t){return e.requireAll=t}),n.cc(),n.dc(10,"label",2),n.Wc(11),n.rc(12,"translate"),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(1),n.Yc(" ",n.sc(2,5,"wiredfurni.params.requireall")," "),n.Kb(3),n.yc("ngModel",e.requireAll),n.Kb(2),n.Xc(n.sc(7,7,"wiredfurni.params.requireall.0")),n.Kb(3),n.yc("ngModel",e.requireAll),n.Kb(2),n.Xc(n.sc(12,9,"wiredfurni.params.requireall.1")))},encapsulation:2}),t})();const rb=n.fc(ib);let ab=(()=>{class t extends xS{get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}get requiresFurni(){return tI._Str_4873}get hasStateSnapshot(){return!0}onEditStart(t){this.state=t.getBoolean(0),this.direction=t.getBoolean(1),this.position=t.getBoolean(2)}readIntegerParamsFromForm(){return[this.state?1:0,this.direction?1:0,this.position?1:0]}get hasSpecialInputs(){return!0}}return t.CODE=FS.STATES_MATCH,t.NEGATIVE_CODE=FS.NOT_STATES_MATCH,t.\u0275fac=function(e){return ob(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:18,vars:15,consts:[[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-base-component"),n.Wc(1),n.rc(2,"translate"),n.dc(3,"div",0),n.dc(4,"input",1),n.nc("ngModelChange",function(t){return e.state=t}),n.cc(),n.dc(5,"label",2),n.Wc(6),n.rc(7,"translate"),n.cc(),n.cc(),n.dc(8,"div",0),n.dc(9,"input",1),n.nc("ngModelChange",function(t){return e.direction=t}),n.cc(),n.dc(10,"label",2),n.Wc(11),n.rc(12,"translate"),n.cc(),n.cc(),n.dc(13,"div",0),n.dc(14,"input",1),n.nc("ngModelChange",function(t){return e.position=t}),n.cc(),n.dc(15,"label",2),n.Wc(16),n.rc(17,"translate"),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(1),n.Yc(" ",n.sc(2,7,"wiredfurni.params.conditions")," "),n.Kb(3),n.yc("ngModel",e.state),n.Kb(2),n.Xc(n.sc(7,9,"wiredfurni.params.condition.state")),n.Kb(3),n.yc("ngModel",e.direction),n.Kb(2),n.Xc(n.sc(12,11,"wiredfurni.params.condition.direction")),n.Kb(3),n.yc("ngModel",e.position),n.Kb(2),n.Xc(n.sc(17,13,"wiredfurni.params.condition.position")))},encapsulation:2}),t})();const ob=n.fc(ab);let cb=(()=>{class t extends xS{get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}get requiresFurni(){return tI._Str_4873}onInit(){}onEditStart(t){}get hasSpecialInputs(){return!0}}return t.CODE=FS.STUFFS_IN_FORMATION,t.NEGATIVE_CODE=FS.NOT_STUFFS_IN_FORMATION,t.\u0275fac=function(e){return lb(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:2,vars:0,template:function(t,e){1&t&&(n.dc(0,"nitro-wired-base-component"),n.Wc(1,"STUFFS_IN_FORMATION"),n.cc())},encapsulation:2}),t})();const lb=n.fc(cb);let hb=(()=>{class t extends xS{constructor(){super(...arguments),this.time=0,this.timeLocale=""}get code(){return t.CODE}onEditStart(t){this.time=t.intData[0]||1,this.updateLocaleParameter()}readIntegerParamsFromForm(){return[this.time]}onSliderChange(){this.updateLocaleParameter()}decrease(){this.time-=1,this.time<t.MINIMUM_VALUE&&(this.time=t.MINIMUM_VALUE)}increase(){this.time+=1,this.time>t.MAXIMUM_VALUE&&(this.time=t.MAXIMUM_VALUE)}updateLocaleParameter(){this.timeLocale=u.a.instance.getLocalizationWithParameter("wiredfurni.params.allowbefore","seconds",LS.getLocaleName(this.time))}get hasSpecialInputs(){return!0}get sliderOptions(){return{floor:t.MINIMUM_VALUE,ceil:t.MAXIMUM_VALUE,step:t.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.CODE=FS.TIME_ELAPSED_LESS,t.MINIMUM_VALUE=1,t.MAXIMUM_VALUE=1200,t.STEPPER_VALUE=1,t.\u0275fac=function(e){return ub(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:9,vars:3,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","time",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-base-component"),n.dc(1,"p",0),n.Wc(2),n.cc(),n.dc(3,"div",1),n.dc(4,"button",2),n.nc("click",function(){return e.decrease()}),n.Zb(5,"i",3),n.cc(),n.dc(6,"ngx-slider",4),n.nc("valueChange",function(t){return e.time=t})("valueChange",function(){return e.onSliderChange()}),n.cc(),n.dc(7,"button",2),n.nc("click",function(){return e.increase()}),n.Zb(8,"i",5),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(2),n.Xc(e.timeLocale),n.Kb(4),n.yc("options",e.sliderOptions)("value",e.time))},encapsulation:2}),t})();const ub=n.fc(hb);let _b=(()=>{class t extends hb{get code(){return t.CODE}decrease(){this.time-=1,this.time<t.MINIMUM_VALUE&&(this.time=t.MINIMUM_VALUE)}increase(){this.time+=1,this.time>t.MAXIMUM_VALUE&&(this.time=t.MAXIMUM_VALUE)}updateLocaleParameter(){this.timeLocale=u.a.instance.getLocalizationWithParameter("wiredfurni.params.allowafter","seconds",LS.getLocaleName(this.time))}get hasSpecialInputs(){return!0}get sliderOptions(){return{floor:t.MINIMUM_VALUE,ceil:t.MAXIMUM_VALUE,step:t.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.CODE=FS.TIME_ELAPSED_MORE,t.\u0275fac=function(e){return db(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:9,vars:3,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","time",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-base-component"),n.dc(1,"p",0),n.Wc(2),n.cc(),n.dc(3,"div",1),n.dc(4,"button",2),n.nc("click",function(){return e.decrease()}),n.Zb(5,"i",3),n.cc(),n.dc(6,"ngx-slider",4),n.nc("valueChange",function(t){return e.time=t})("valueChange",function(){return e.onSliderChange()}),n.cc(),n.dc(7,"button",2),n.nc("click",function(){return e.increase()}),n.Zb(8,"i",5),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(2),n.Xc(e.timeLocale),n.Kb(4),n.yc("options",e.sliderOptions)("value",e.time))},encapsulation:2}),t})();const db=n.fc(_b);let gb=(()=>{class t extends xS{constructor(){super(...arguments),this.minUsers=0,this.maxUsers=0}get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}onEditStart(t){this.minUsers=t.intData[0]||1,this.maxUsers=t.intData[1]||50}readIntegerParamsFromForm(){return[this.minUsers,this.maxUsers]}decreaseMin(){this.minUsers-=1,this.minUsers<t.MINIMUM_VALUE&&(this.minUsers=t.MINIMUM_VALUE)}decreaseMax(){this.maxUsers-=1,this.maxUsers<t.MINIMUM_VALUE&&(this.maxUsers=t.MINIMUM_VALUE)}increaseMin(){this.minUsers+=1,this.minUsers>t.MAXIMUM_VALUE&&(this.minUsers=t.MAXIMUM_VALUE)}increaseMax(){this.maxUsers+=1,this.maxUsers>t.MAXIMUM_VALUE&&(this.maxUsers=t.MAXIMUM_VALUE)}get hasSpecialInputs(){return!0}get sliderOptions(){return{floor:t.MINIMUM_VALUE,ceil:t.MAXIMUM_VALUE,step:t.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.CODE=FS.USER_COUNT_IN,t.NEGATIVE_CODE=FS.NOT_USER_COUNT_IN,t.MINIMUM_VALUE=1,t.MAXIMUM_VALUE=50,t.STEPPER_VALUE=1,t.\u0275fac=function(e){return mb(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:19,vars:14,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","minUsers",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"],["name","maxUsers",3,"options","value","valueChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-base-component"),n.dc(1,"p",0),n.Wc(2),n.rc(3,"translate"),n.cc(),n.dc(4,"div",1),n.dc(5,"button",2),n.nc("click",function(){return e.decreaseMin()}),n.Zb(6,"i",3),n.cc(),n.dc(7,"ngx-slider",4),n.nc("valueChange",function(t){return e.minUsers=t}),n.cc(),n.dc(8,"button",2),n.nc("click",function(){return e.increaseMin()}),n.Zb(9,"i",5),n.cc(),n.cc(),n.dc(10,"p",0),n.Wc(11),n.rc(12,"translate"),n.cc(),n.dc(13,"div",1),n.dc(14,"button",2),n.nc("click",function(){return e.decreaseMax()}),n.Zb(15,"i",3),n.cc(),n.dc(16,"ngx-slider",6),n.nc("valueChange",function(t){return e.maxUsers=t}),n.cc(),n.dc(17,"button",2),n.nc("click",function(){return e.increaseMax()}),n.Zb(18,"i",5),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(2),n.Xc(n.uc(3,6,"wiredfurni.params.usercountmin","value",e.minUsers)),n.Kb(5),n.yc("options",e.sliderOptions)("value",e.minUsers),n.Kb(4),n.Xc(n.uc(12,10,"wiredfurni.params.usercountmax","value",e.maxUsers)),n.Kb(5),n.yc("options",e.sliderOptions)("value",e.maxUsers))},encapsulation:2}),t})();const mb=n.fc(gb);class pb{_Str_9781(t){switch(t){case zS.CODE:case zS.NEGATIVE_CODE:return zS;case tb.CODE:case tb.NEGATIVE_CODE:return tb;case ab.CODE:case ab.NEGATIVE_CODE:return ab;case _b.CODE:return _b;case hb.CODE:return hb;case gb.CODE:case gb.NEGATIVE_CODE:return gb;case GS.CODE:case GS.NEGATIVE_CODE:return GS;case ib.CODE:return ib;case sb.CODE:case sb.NEGATIVE_CODE:return sb;case cb.CODE:case cb.NEGATIVE_CODE:return cb;case BS.CODE:case BS.NEGATIVE_CODE:return BS;case qS.CODE:case qS.NEGATIVE_CODE:return qS;case HS.CODE:case HS.NEGATIVE_CODE:return HS;case JS.CODE:return JS;case ZS.CODE:return ZS;case kS.CODE:return kS}return null}_Str_15652(t){return this._Str_9781(t)}_Str_14545(t){return t instanceof OS.a}_Str_1196(){return"condition"}}class fb extends LS{}let Eb=(()=>{class t{}return t.AVATAR_SAYS_SOMETHING=0,t.AVATAR_WALKS_ON_FURNI=1,t.AVATAR_WALKS_OFF_FURNI=2,t.TRIGGER_ONCE=3,t.TOGGLE_FURNI=4,t.TRIGGER_PERIODICALLY=6,t.AVATAR_ENTERS_ROOM=7,t.GAME_STARTS=8,t.GAME_ENDS=9,t.SCORE_ACHIEVED=10,t.COLLISION=11,t.TRIGGER_PERIODICALLY_LONG=12,t.BOT_REACHED_STUFF=13,t.BOT_REACHED_AVATAR=14,t})();function Sb(t,e){if(1&t){const t=n.ec();n.dc(0,"div",5),n.dc(1,"input",6),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().keyword=e}),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(1),n.yc("ngModel",t.keyword)}}let bb=(()=>{class t extends fb{constructor(){super(...arguments),this.keyword="",this.avatar="0"}get code(){return t.CODE}onEditStart(t){this.keyword=t.stringData||"",this.avatar=this.keyword.length>0?"1":"0"}readStringParamFromForm(){return"1"===this.avatar&&this.keyword.length>0?this.keyword:""}get hasSpecialInputs(){return!0}}return t.CODE=Eb.AVATAR_ENTERS_ROOM,t.\u0275fac=function(e){return vb(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:14,vars:12,consts:[[1,"form-check"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["class","form-group",4,"ngIf"],[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-base-component"),n.Wc(1),n.rc(2,"translate"),n.dc(3,"div",0),n.dc(4,"input",1),n.nc("ngModelChange",function(t){return e.avatar=t}),n.cc(),n.dc(5,"label",2),n.Wc(6),n.rc(7,"translate"),n.cc(),n.cc(),n.dc(8,"div",0),n.dc(9,"input",3),n.nc("ngModelChange",function(t){return e.avatar=t}),n.cc(),n.dc(10,"label",2),n.Wc(11),n.rc(12,"translate"),n.cc(),n.cc(),n.Uc(13,Sb,2,1,"div",4),n.cc()),2&t&&(n.Kb(1),n.Yc(" ",n.sc(2,6,"wiredfurni.params.picktriggerer")," "),n.Kb(3),n.yc("ngModel",e.avatar),n.Kb(2),n.Xc(n.sc(7,8,"wiredfurni.params.anyavatar")),n.Kb(3),n.yc("ngModel",e.avatar),n.Kb(2),n.Xc(n.sc(12,10,"wiredfurni.params.certainavatar")),n.Kb(2),n.yc("ngIf","1"===e.avatar))},encapsulation:2}),t})();const vb=n.fc(bb);let Ib=(()=>{class t extends fb{constructor(){super(...arguments),this.keyword="",this.avatar="0"}get code(){return t.CODE}onEditStart(t){this.keyword=t.stringData||"",this.avatar=t.intData.length>0&&1===t.intData[0]?"1":"0"}readIntegerParamsFromForm(){return["1"===this.avatar?1:0]}readStringParamFromForm(){return this.keyword}get hasSpecialInputs(){return!0}get username(){return u.a.instance.sessionDataManager.userName}}return t.CODE=Eb.AVATAR_SAYS_SOMETHING,t.\u0275fac=function(e){return Rb(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:17,vars:13,consts:[[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"form-check"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-base-component"),n.dc(1,"div",0),n.dc(2,"label"),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"input",1),n.nc("ngModelChange",function(t){return e.keyword=t}),n.cc(),n.cc(),n.Wc(6),n.rc(7,"translate"),n.dc(8,"div",2),n.dc(9,"input",3),n.nc("ngModelChange",function(t){return e.avatar=t}),n.cc(),n.dc(10,"label",4),n.Wc(11),n.rc(12,"translate"),n.cc(),n.cc(),n.dc(13,"div",2),n.dc(14,"input",5),n.nc("ngModelChange",function(t){return e.avatar=t}),n.cc(),n.dc(15,"label",4),n.Wc(16),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(3),n.Xc(n.sc(4,7,"wiredfurni.params.whatissaid")),n.Kb(2),n.yc("ngModel",e.keyword),n.Kb(1),n.Yc(" ",n.sc(7,9,"wiredfurni.params.picktriggerer")," "),n.Kb(3),n.yc("ngModel",e.avatar),n.Kb(2),n.Xc(n.sc(12,11,"wiredfurni.params.anyavatar")),n.Kb(3),n.yc("ngModel",e.avatar),n.Kb(2),n.Xc(e.username))},encapsulation:2}),t})();const Rb=n.fc(Ib);let Tb=(()=>{class t extends fb{get code(){return t.CODE}get requiresFurni(){return tI._Str_4991}}return t.CODE=Eb.AVATAR_WALKS_OFF_FURNI,t.\u0275fac=function(e){return yb(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:1,vars:0,template:function(t,e){1&t&&n.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const yb=n.fc(Tb);let Ob=(()=>{class t extends fb{get code(){return t.CODE}get requiresFurni(){return tI._Str_4991}}return t.CODE=Eb.AVATAR_WALKS_ON_FURNI,t.\u0275fac=function(e){return Cb(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:1,vars:0,template:function(t,e){1&t&&n.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const Cb=n.fc(Ob);let Ab=(()=>{class t extends fb{constructor(){super(...arguments),this.keyword=""}get code(){return t.CODE}get requiresFurni(){return tI._Str_5431}onEditStart(t){this.keyword=t.stringData}readStringParamFromForm(){return this.keyword}get hasSpecialInputs(){return!0}}return t.CODE=Eb.BOT_REACHED_AVATAR,t.\u0275fac=function(e){return Mb(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:6,vars:4,consts:[[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-base-component"),n.dc(1,"div",0),n.dc(2,"label"),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"input",1),n.nc("ngModelChange",function(t){return e.keyword=t}),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(3),n.Xc(n.sc(4,2,"wiredfurni.params.bot.name")),n.Kb(2),n.yc("ngModel",e.keyword))},encapsulation:2}),t})();const Mb=n.fc(Ab);let wb=(()=>{class t extends fb{constructor(){super(...arguments),this.keyword=""}get code(){return t.CODE}get requiresFurni(){return tI._Str_4991}onEditStart(t){this.keyword=t.stringData}readStringParamFromForm(){return this.keyword}get hasSpecialInputs(){return!0}}return t.CODE=Eb.BOT_REACHED_STUFF,t.\u0275fac=function(e){return Ub(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:6,vars:4,consts:[[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-base-component"),n.dc(1,"div",0),n.dc(2,"label"),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"input",1),n.nc("ngModelChange",function(t){return e.keyword=t}),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(3),n.Xc(n.sc(4,2,"wiredfurni.params.bot.name")),n.Kb(2),n.yc("ngModel",e.keyword))},encapsulation:2}),t})();const Ub=n.fc(wb);let Db=(()=>{class t extends fb{get code(){return t.CODE}}return t.CODE=Eb.COLLISION,t.\u0275fac=function(e){return Nb(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:1,vars:0,template:function(t,e){1&t&&n.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const Nb=n.fc(Db);let Lb=(()=>{class t extends fb{get code(){return t.CODE}}return t.CODE=Eb.GAME_ENDS,t.\u0275fac=function(e){return Pb(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:1,vars:0,template:function(t,e){1&t&&n.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const Pb=n.fc(Lb);let xb=(()=>{class t extends fb{get code(){return t.CODE}}return t.CODE=Eb.GAME_STARTS,t.\u0275fac=function(e){return Fb(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:1,vars:0,template:function(t,e){1&t&&n.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const Fb=n.fc(xb);let kb=(()=>{class t extends fb{constructor(){super(...arguments),this.score=0}get code(){return t.CODE}onEditStart(t){this.score=t.intData[0]||0}readIntegerParamsFromForm(){return[this.score]}decrease(){this.score-=1,this.score<t.MINIMUM_VALUE&&(this.score=t.MINIMUM_VALUE)}increase(){this.score+=1,this.score>t.MAXIMUM_VALUE&&(this.score=t.MAXIMUM_VALUE)}get hasSpecialInputs(){return!0}get sliderOptions(){return{floor:t.MINIMUM_VALUE,ceil:t.MAXIMUM_VALUE,step:t.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.MINIMUM_VALUE=1,t.MAXIMUM_VALUE=1e3,t.STEPPER_VALUE=1,t.CODE=Eb.SCORE_ACHIEVED,t.\u0275fac=function(e){return Wb(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:10,vars:7,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","time",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-base-component"),n.dc(1,"p",0),n.Wc(2),n.rc(3,"translate"),n.cc(),n.dc(4,"div",1),n.dc(5,"button",2),n.nc("click",function(){return e.decrease()}),n.Zb(6,"i",3),n.cc(),n.dc(7,"ngx-slider",4),n.nc("valueChange",function(t){return e.score=t}),n.cc(),n.dc(8,"button",2),n.nc("click",function(){return e.increase()}),n.Zb(9,"i",5),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(2),n.Xc(n.uc(3,3,"wiredfurni.params.setscore","points",e.score)),n.Kb(5),n.yc("options",e.sliderOptions)("value",e.score))},encapsulation:2}),t})();const Wb=n.fc(kb);let Bb=(()=>{class t extends fb{get code(){return t.CODE}get requiresFurni(){return tI._Str_4991}}return t.CODE=Eb.TOGGLE_FURNI,t.\u0275fac=function(e){return Vb(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:1,vars:0,template:function(t,e){1&t&&n.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const Vb=n.fc(Bb);let Gb=(()=>{class t extends fb{constructor(){super(...arguments),this.time=0,this.timeLocale=""}get code(){return t.CODE}onEditStart(t){this.time=t.intData[0]||1,this.updateLocaleParameter()}readIntegerParamsFromForm(){return[this.time]}onSliderChange(){this.updateLocaleParameter()}decrease(){this.time-=1,this.time<t.MINIMUM_VALUE&&(this.time=t.MINIMUM_VALUE)}increase(){this.time+=1,this.time>t.MAXIMUM_VALUE&&(this.time=t.MAXIMUM_VALUE)}updateLocaleParameter(){this.timeLocale=u.a.instance.getLocalizationWithParameter("wiredfurni.params.settime","seconds",LS.getLocaleName(this.time))}get hasSpecialInputs(){return!0}get sliderOptions(){return{floor:t.MINIMUM_VALUE,ceil:t.MAXIMUM_VALUE,step:t.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.MINIMUM_VALUE=1,t.MAXIMUM_VALUE=1200,t.STEPPER_VALUE=1,t.CODE=Eb.TRIGGER_ONCE,t.\u0275fac=function(e){return Kb(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:9,vars:3,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","time",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-base-component"),n.dc(1,"p",0),n.Wc(2),n.cc(),n.dc(3,"div",1),n.dc(4,"button",2),n.nc("click",function(){return e.decrease()}),n.Zb(5,"i",3),n.cc(),n.dc(6,"ngx-slider",4),n.nc("valueChange",function(t){return e.time=t})("valueChange",function(){return e.onSliderChange()}),n.cc(),n.dc(7,"button",2),n.nc("click",function(){return e.increase()}),n.Zb(8,"i",5),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(2),n.Xc(e.timeLocale),n.Kb(4),n.yc("options",e.sliderOptions)("value",e.time))},encapsulation:2}),t})();const Kb=n.fc(Gb);let Hb=(()=>{class t extends Gb{get code(){return t.CODE}increase(){this.time+=1,this.time>t.MAXIMUM_VALUE&&(this.time=t.MAXIMUM_VALUE)}get sliderOptions(){return{floor:t.MINIMUM_VALUE,ceil:t.MAXIMUM_VALUE,step:t.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.MAXIMUM_VALUE=120,t.CODE=Eb.TRIGGER_PERIODICALLY,t.\u0275fac=function(e){return jb(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:9,vars:3,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","time",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-base-component"),n.dc(1,"p",0),n.Wc(2),n.cc(),n.dc(3,"div",1),n.dc(4,"button",2),n.nc("click",function(){return e.decrease()}),n.Zb(5,"i",3),n.cc(),n.dc(6,"ngx-slider",4),n.nc("valueChange",function(t){return e.time=t})("valueChange",function(){return e.onSliderChange()}),n.cc(),n.dc(7,"button",2),n.nc("click",function(){return e.increase()}),n.Zb(8,"i",5),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(2),n.Xc(e.timeLocale),n.Kb(4),n.yc("options",e.sliderOptions)("value",e.time))},encapsulation:2}),t})();const jb=n.fc(Hb);let zb=(()=>{class t extends Hb{get code(){return t.CODE}updateLocaleParameter(){this.timeLocale=u.a.instance.getLocalizationWithParameter("wiredfurni.params.setlongtime","time",gu.format(5*this.time))}}return t.CODE=Eb.TRIGGER_PERIODICALLY_LONG,t.\u0275fac=function(e){return Yb(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:9,vars:3,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","time",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-base-component"),n.dc(1,"p",0),n.Wc(2),n.cc(),n.dc(3,"div",1),n.dc(4,"button",2),n.nc("click",function(){return e.decrease()}),n.Zb(5,"i",3),n.cc(),n.dc(6,"ngx-slider",4),n.nc("valueChange",function(t){return e.time=t})("valueChange",function(){return e.onSliderChange()}),n.cc(),n.dc(7,"button",2),n.nc("click",function(){return e.increase()}),n.Zb(8,"i",5),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(2),n.Xc(e.timeLocale),n.Kb(4),n.yc("options",e.sliderOptions)("value",e.time))},encapsulation:2}),t})();const Yb=n.fc(zb);class qb{_Str_9781(t){switch(t){case Ib.CODE:return Ib;case Ob.CODE:return Ob;case Tb.CODE:return Tb;case Gb.CODE:return Gb;case Bb.CODE:return Bb;case Hb.CODE:return Hb;case bb.CODE:return bb;case xb.CODE:return xb;case Lb.CODE:return Lb;case kb.CODE:return kb;case Db.CODE:return Db;case zb.CODE:return zb;case wb.CODE:return wb;case Ab.CODE:return Ab}return null}_Str_15652(t){return this._Str_9781(t)}_Str_14545(t){return t instanceof CS.a}_Str_1196(){return"trigger"}}let Xb=(()=>{class t{}return t.TOGGLE_FURNI_STATE=0,t.RESET=1,t.SET_FURNI_STATE=3,t.MOVE_FURNI=4,t.GIVE_SCORE=6,t.CHAT=7,t.TELEPORT=8,t.JOIN_TEAM=9,t.LEAVE_TEAM=10,t.CHASE=11,t.FLEE=12,t.MOVE_TO_DIRECTION=13,t.GIVE_SCORE_TO_PREDEFINED_TEAM=14,t.TOGGLE_TO_RANDOM_STATE=15,t.MOVE_FURNI_TO=16,t.GIVE_REWARD=17,t.CALL_ANOTHER_STACK=18,t.KICK_FROM_ROOM=19,t.MUTE_USER=20,t.BOT_TELEPORT=21,t.BOT_MOVE=22,t.BOT_TALK=23,t.BOT_GIVE_HAND_ITEM=24,t.BOT_FOLLOW_AVATAR=25,t.BOT_CHANGE_FIGURE=26,t.BOT_TALK_DIRECT_TO_AVTR=27,t})(),Zb=(()=>{class t extends PS{constructor(){super(...arguments),this.defaultFigure="hd-180-1.ch-210-66.lg-270-82.sh-290-81"}get code(){return t.CODE}onEditStart(e){const s=e.stringData.split(t.DELIMETER);s.length>0&&(this.botName=s[0]),s.length>1&&(this.figure=s[1].length>0?s[1]:this.defaultFigure),super.onEditStart(e)}readStringParamFromForm(){return this.botName+t.DELIMETER+this.figure}get hasSpecialInputs(){return!0}get requiresFurni(){return tI._Str_5431}copyLook(){this.figure=u.a.instance.sessionDataManager.figure}}return t.CODE=Xb.BOT_CHANGE_FIGURE,t.DELIMETER="\t",t.\u0275fac=function(e){return Qb(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:13,vars:10,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"row","mb-1"],[1,"col-md-6"],["nitro-avatar-image","",3,"figure","direction"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-action-base-component",0),n.nc("delayChange",function(t){return e.delay=t}),n.dc(1,"div",1),n.dc(2,"label"),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"input",2),n.nc("ngModelChange",function(t){return e.botName=t}),n.cc(),n.cc(),n.dc(6,"div",3),n.dc(7,"div",4),n.Zb(8,"div",5),n.cc(),n.dc(9,"div",4),n.dc(10,"button",6),n.nc("click",function(){return e.copyLook()}),n.Wc(11),n.rc(12,"translate"),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("delay",e.delay),n.Kb(3),n.Xc(n.sc(4,6,"wiredfurni.params.bot.name")),n.Kb(2),n.yc("ngModel",e.botName),n.Kb(3),n.yc("figure",e.figure)("direction",2),n.Kb(3),n.Xc(n.sc(12,8,"wiredfurni.params.capture.figure")))},encapsulation:2}),t})();const Qb=n.fc(Zb);let Jb=(()=>{class t extends PS{constructor(){super(...arguments),this.followMode="0"}get code(){return t.CODE}onEditStart(t){this.botName=t.stringData,this.followMode=t.intData.length>0?t.intData[0].toString():"0",super.onEditStart(t)}readStringParamFromForm(){return this.botName}readIntegerParamsFromForm(){return[Number.parseInt(this.followMode)]}get hasSpecialInputs(){return!0}}return t.CODE=Xb.BOT_FOLLOW_AVATAR,t.\u0275fac=function(e){return $b(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:16,vars:13,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"form-check"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-action-base-component",0),n.nc("delayChange",function(t){return e.delay=t}),n.dc(1,"div",1),n.dc(2,"label"),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"input",2),n.nc("ngModelChange",function(t){return e.botName=t}),n.cc(),n.cc(),n.dc(6,"div",3),n.dc(7,"input",4),n.nc("ngModelChange",function(t){return e.followMode=t}),n.cc(),n.dc(8,"label",5),n.Wc(9),n.rc(10,"translate"),n.cc(),n.cc(),n.dc(11,"div",3),n.dc(12,"input",6),n.nc("ngModelChange",function(t){return e.followMode=t}),n.cc(),n.dc(13,"label",5),n.Wc(14),n.rc(15,"translate"),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("delay",e.delay),n.Kb(3),n.Xc(n.sc(4,7,"wiredfurni.params.bot.name")),n.Kb(2),n.yc("ngModel",e.botName),n.Kb(2),n.yc("ngModel",e.followMode),n.Kb(2),n.Xc(n.sc(10,9,"wiredfurni.params.start.following")),n.Kb(3),n.yc("ngModel",e.followMode),n.Kb(2),n.Xc(n.sc(15,11,"wiredfurni.params.stop.following")))},encapsulation:2}),t})();const $b=n.fc(Jb);let tv=(()=>{class t extends PS{constructor(){super(...arguments),this.allowedHanditemIds=["2","5","7","8","9","10","27"],this.handitemId="0"}get code(){return t.CODE}onEditStart(t){this.botName=t.stringData,this.handitemId=t.intData.length>0&&this.allowedHanditemIds.includes(t.intData[0].toString())?t.intData[0].toString():"0",super.onEditStart(t)}readStringParamFromForm(){return this.botName}readIntegerParamsFromForm(){return[Number.parseInt(this.handitemId)]}get hasSpecialInputs(){return!0}}return t.CODE=Xb.BOT_GIVE_HAND_ITEM,t.\u0275fac=function(e){return ev(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:35,vars:41,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","0",3,"selected"],["value","2",3,"selected"],["value","5",3,"selected"],["value","7",3,"selected"],["value","8",3,"selected"],["value","9",3,"selected"],["value","10",3,"selected"],["value","27",3,"selected"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-action-base-component",0),n.nc("delayChange",function(t){return e.delay=t}),n.dc(1,"div",1),n.dc(2,"label"),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"input",2),n.nc("ngModelChange",function(t){return e.botName=t}),n.cc(),n.cc(),n.dc(6,"div",1),n.dc(7,"label"),n.Wc(8),n.rc(9,"translate"),n.cc(),n.dc(10,"select",3),n.nc("ngModelChange",function(t){return e.handitemId=t}),n.dc(11,"option",4),n.Wc(12),n.rc(13,"translate"),n.cc(),n.dc(14,"option",5),n.Wc(15),n.rc(16,"translate"),n.cc(),n.dc(17,"option",6),n.Wc(18),n.rc(19,"translate"),n.cc(),n.dc(20,"option",7),n.Wc(21),n.rc(22,"translate"),n.cc(),n.dc(23,"option",8),n.Wc(24),n.rc(25,"translate"),n.cc(),n.dc(26,"option",9),n.Wc(27),n.rc(28,"translate"),n.cc(),n.dc(29,"option",10),n.Wc(30),n.rc(31,"translate"),n.cc(),n.dc(32,"option",11),n.Wc(33),n.rc(34,"translate"),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("delay",e.delay),n.Kb(3),n.Xc(n.sc(4,21,"wiredfurni.params.bot.name")),n.Kb(2),n.yc("ngModel",e.botName),n.Kb(3),n.Xc(n.sc(9,23,"wiredfurni.params.handitem")),n.Kb(2),n.yc("ngModel",e.handitemId),n.Kb(1),n.yc("selected","0"==e.handitemId),n.Kb(1),n.Xc(n.sc(13,25,"wiredfurni.tooltip.handitem")),n.Kb(2),n.yc("selected","2"==e.handitemId),n.Kb(1),n.Xc(n.sc(16,27,"handitem2")),n.Kb(2),n.yc("selected","5"==e.handitemId),n.Kb(1),n.Xc(n.sc(19,29,"handitem5")),n.Kb(2),n.yc("selected","7"==e.handitemId),n.Kb(1),n.Xc(n.sc(22,31,"handitem7")),n.Kb(2),n.yc("selected","8"==e.handitemId),n.Kb(1),n.Xc(n.sc(25,33,"handitem8")),n.Kb(2),n.yc("selected","9"==e.handitemId),n.Kb(1),n.Xc(n.sc(28,35,"handitem9")),n.Kb(2),n.yc("selected","10"==e.handitemId),n.Kb(1),n.Xc(n.sc(31,37,"handitem10")),n.Kb(2),n.yc("selected","27"==e.handitemId),n.Kb(1),n.Xc(n.sc(34,39,"handitem27")))},encapsulation:2}),t})();const ev=n.fc(tv);let sv=(()=>{class t extends PS{get code(){return t.CODE}onEditStart(t){this.botName=t.stringData,super.onEditStart(t)}readStringParamFromForm(){return this.botName}get hasSpecialInputs(){return!0}get requiresFurni(){return tI._Str_4873}}return t.CODE=Xb.BOT_MOVE,t.\u0275fac=function(e){return nv(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:6,vars:5,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-action-base-component",0),n.nc("delayChange",function(t){return e.delay=t}),n.dc(1,"div",1),n.dc(2,"label"),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"input",2),n.nc("ngModelChange",function(t){return e.botName=t}),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("delay",e.delay),n.Kb(3),n.Xc(n.sc(4,3,"wiredfurni.params.bot.name")),n.Kb(2),n.yc("ngModel",e.botName))},encapsulation:2}),t})();const nv=n.fc(sv);let iv=(()=>{class t extends PS{get code(){return t.CODE}onEditStart(e){const s=e.stringData.split(t.DELIMETER);this.botName=s.length>=1?s[0]:"",this.message=2==s.length?s[1]:"",this.mode=e.intData.length>0?e.intData[0].toString():"0",super.onEditStart(e)}get hasSpecialInputs(){return!0}get requiresFurni(){return tI._Str_5431}readStringParamFromForm(){return this.botName+t.DELIMETER+this.message}readIntegerParamsFromForm(){return[Number.parseInt(this.mode)]}}return t.CODE=Xb.BOT_TALK_DIRECT_TO_AVTR,t.DELIMETER="\t",t.\u0275fac=function(e){return rv(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:21,vars:17,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","text","maxlength","64",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"form-check"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-action-base-component",0),n.nc("delayChange",function(t){return e.delay=t}),n.dc(1,"div",1),n.dc(2,"label"),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"input",2),n.nc("ngModelChange",function(t){return e.botName=t}),n.cc(),n.cc(),n.dc(6,"div",1),n.dc(7,"label"),n.Wc(8),n.rc(9,"translate"),n.cc(),n.dc(10,"input",3),n.nc("ngModelChange",function(t){return e.message=t}),n.cc(),n.cc(),n.dc(11,"div",4),n.dc(12,"input",5),n.nc("ngModelChange",function(t){return e.mode=t}),n.cc(),n.dc(13,"label",6),n.Wc(14),n.rc(15,"translate"),n.cc(),n.cc(),n.dc(16,"div",4),n.dc(17,"input",7),n.nc("ngModelChange",function(t){return e.mode=t}),n.cc(),n.dc(18,"label",6),n.Wc(19),n.rc(20,"translate"),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("delay",e.delay),n.Kb(3),n.Xc(n.sc(4,9,"wiredfurni.params.bot.name")),n.Kb(2),n.yc("ngModel",e.botName),n.Kb(3),n.Xc(n.sc(9,11,"wiredfurni.params.message")),n.Kb(2),n.yc("ngModel",e.message),n.Kb(2),n.yc("ngModel",e.mode),n.Kb(2),n.Xc(n.sc(15,13,"wiredfurni.params.whisper")),n.Kb(3),n.yc("ngModel",e.mode),n.Kb(2),n.Xc(n.sc(20,15,"wiredfurni.params.talk")))},encapsulation:2}),t})();const rv=n.fc(iv);let av=(()=>{class t extends PS{get code(){return t.CODE}onEditStart(e){const s=e.stringData.split(t.DELIMETER);this.botName=s.length>=1?s[0]:"",this.message=2==s.length?s[1]:"",this.mode=e.intData.length>0?e.intData[0].toString():"0",super.onEditStart(e)}get hasSpecialInputs(){return!0}get requiresFurni(){return tI._Str_5431}readStringParamFromForm(){return this.botName+t.DELIMETER+this.message}readIntegerParamsFromForm(){return[Number.parseInt(this.mode)]}}return t.CODE=Xb.BOT_TALK,t.DELIMETER="\t",t.\u0275fac=function(e){return ov(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:21,vars:17,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","text","maxlength","64",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"form-check"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-action-base-component",0),n.nc("delayChange",function(t){return e.delay=t}),n.dc(1,"div",1),n.dc(2,"label"),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"input",2),n.nc("ngModelChange",function(t){return e.botName=t}),n.cc(),n.cc(),n.dc(6,"div",1),n.dc(7,"label"),n.Wc(8),n.rc(9,"translate"),n.cc(),n.dc(10,"input",3),n.nc("ngModelChange",function(t){return e.message=t}),n.cc(),n.cc(),n.dc(11,"div",4),n.dc(12,"input",5),n.nc("ngModelChange",function(t){return e.mode=t}),n.cc(),n.dc(13,"label",6),n.Wc(14),n.rc(15,"translate"),n.cc(),n.cc(),n.dc(16,"div",4),n.dc(17,"input",7),n.nc("ngModelChange",function(t){return e.mode=t}),n.cc(),n.dc(18,"label",6),n.Wc(19),n.rc(20,"translate"),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("delay",e.delay),n.Kb(3),n.Xc(n.sc(4,9,"wiredfurni.params.bot.name")),n.Kb(2),n.yc("ngModel",e.botName),n.Kb(3),n.Xc(n.sc(9,11,"wiredfurni.params.message")),n.Kb(2),n.yc("ngModel",e.message),n.Kb(2),n.yc("ngModel",e.mode),n.Kb(2),n.Xc(n.sc(15,13,"wiredfurni.params.talk")),n.Kb(3),n.yc("ngModel",e.mode),n.Kb(2),n.Xc(n.sc(20,15,"wiredfurni.params.shout")))},encapsulation:2}),t})();const ov=n.fc(av);let cv=(()=>{class t extends PS{get code(){return t.CODE}onEditStart(t){this.botName=t.stringData,super.onEditStart(t)}readStringParamFromForm(){return this.botName}get hasSpecialInputs(){return!0}get requiresFurni(){return tI._Str_4873}}return t.CODE=Xb.BOT_TELEPORT,t.\u0275fac=function(e){return lv(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:6,vars:5,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-action-base-component",0),n.nc("delayChange",function(t){return e.delay=t}),n.dc(1,"div",1),n.dc(2,"label"),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"input",2),n.nc("ngModelChange",function(t){return e.botName=t}),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("delay",e.delay),n.Kb(3),n.Xc(n.sc(4,3,"wiredfurni.params.bot.name")),n.Kb(2),n.yc("ngModel",e.botName))},encapsulation:2}),t})();const lv=n.fc(cv);let hv=(()=>{class t extends PS{get code(){return t.CODE}get requiresFurni(){return tI._Str_5430}}return t.CODE=Xb.CALL_ANOTHER_STACK,t.\u0275fac=function(e){return uv(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-action-base-component",0),n.nc("delayChange",function(t){return e.delay=t}),n.cc()),2&t&&n.yc("delay",e.delay)},encapsulation:2}),t})();const uv=n.fc(hv);let _v=(()=>{class t extends PS{get code(){return t.CODE}get requiresFurni(){return tI._Str_5430}}return t.CODE=Xb.CHASE,t.\u0275fac=function(e){return dv(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-action-base-component",0),n.nc("delayChange",function(t){return e.delay=t}),n.cc()),2&t&&n.yc("delay",e.delay)},encapsulation:2}),t})();const dv=n.fc(_v);let gv=(()=>{class t extends PS{get code(){return t.CODE}get hasSpecialInputs(){return!0}readStringParamFromForm(){return this.message}onEditStart(t){this.message=t.stringData,super.onEditStart(t)}validate(){return this.message.length>100?u.a.instance.localization.getValue("wiredfurni.chatmsgtoolong",!1):null}}return t.CODE=Xb.CHAT,t.\u0275fac=function(e){return mv(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:6,vars:5,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-action-base-component",0),n.nc("delayChange",function(t){return e.delay=t}),n.dc(1,"div",1),n.dc(2,"label"),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"input",2),n.nc("ngModelChange",function(t){return e.message=t}),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("delay",e.delay),n.Kb(3),n.Xc(n.sc(4,3,"wiredfurni.params.message")),n.Kb(2),n.yc("ngModel",e.message))},encapsulation:2}),t})();const mv=n.fc(gv);let pv=(()=>{class t extends PS{get code(){return t.CODE}get requiresFurni(){return tI._Str_5430}}return t.CODE=Xb.FLEE,t.\u0275fac=function(e){return fv(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-action-base-component",0),n.nc("delayChange",function(t){return e.delay=t}),n.cc()),2&t&&n.yc("delay",e.delay)},encapsulation:2}),t})();const fv=n.fc(pv);function Ev(t,e){if(1&t){const t=n.ec();n.dc(0,"div",16),n.dc(1,"button",17),n.nc("click",function(){return n.Lc(t),n.qc().decreaseLimit()}),n.Zb(2,"i",18),n.cc(),n.dc(3,"ngx-slider",19),n.nc("valueChange",function(e){return n.Lc(t),n.qc().rewardsLimit=e}),n.cc(),n.dc(4,"button",17),n.nc("click",function(){return n.Lc(t),n.qc().increaseLimit()}),n.Zb(5,"i",20),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(3),n.yc("options",t.limitSliderOptions)("value",t.rewardsLimit)}}function Sv(t,e){if(1&t){const t=n.ec();n.dc(0,"div",21),n.dc(1,"label"),n.Wc(2,"Interval value"),n.cc(),n.dc(3,"input",22),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().limitationInterval=e}),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(3),n.yc("ngModel",t.limitationInterval)}}function bv(t,e){1&t&&(n.dc(0,"td"),n.dc(1,"small"),n.Wc(2,"Probability"),n.cc(),n.cc())}function vv(t,e){if(1&t){const t=n.ec();n.dc(0,"td"),n.dc(1,"input",22),n.nc("ngModelChange",function(e){n.Lc(t);const s=n.qc().index;return n.qc().rewardRows[s].probability=e}),n.cc(),n.cc()}if(2&t){const t=n.qc().index,e=n.qc();n.Kb(1),n.yc("ngModel",e.rewardRows[t].probability)}}function Iv(t,e){if(1&t){const t=n.ec();n.dc(0,"tr"),n.dc(1,"td"),n.dc(2,"input",23),n.nc("ngModelChange",function(s){n.Lc(t);const i=e.index;return n.qc().rewardRows[i].badge=s}),n.cc(),n.cc(),n.dc(3,"td"),n.dc(4,"input",22),n.nc("ngModelChange",function(s){n.Lc(t);const i=e.index;return n.qc().rewardRows[i].itemCode=s}),n.cc(),n.cc(),n.Uc(5,vv,2,1,"td",12),n.cc()}if(2&t){const t=e.index,s=n.qc();n.Kb(2),n.yc("ngModel",s.rewardRows[t].badge),n.Kb(2),n.yc("ngModel",s.rewardRows[t].itemCode),n.Kb(1),n.yc("ngIf",0==s.uniqueRewards)}}let Rv=(()=>{class t extends PS{constructor(){super(...arguments),this.SETTING_ONCE="0",this.SETTING_N_MINS="3",this.SETTING_N_HOURS="2",this.SETTING_N_DAYS="1",this.limitationInterval="1",this.uniqueRewards=!1,this.rewardRows=[]}get code(){return t.CODE}onEditStart(t){if(this.rewardTime=(t.intData.length>0?t.intData[0]:0).toString(),this.uniqueRewards=t.intData.length>1&&1==t.intData[1],this.rewardsLimit=t.intData.length>2?t.intData[2]:0,this.limitationInterval=t.intData.length>3?t.intData[3].toString():"",this.limitEnabled=this.limitationInterval.length>0,t.stringData.length>0&&t.stringData.includes(";")&&t.stringData.split(";").forEach(t=>{if(t.length>0&&t.includes(",")){const e=t.split(",");3==e.length&&this.rewardRows.push({badge:"0"==e[0],itemCode:e[1],probability:e[2]})}}),this.rewardRows.length<4)for(let e=this.rewardRows.length;e<4;e++)this.rewardRows.push({badge:!1,itemCode:"",probability:""});super.onEditStart(t)}readIntegerParamsFromForm(){return[Number.parseInt(this.rewardTime),this.uniqueRewards?1:0,this.rewardsLimit,Number.parseInt(this.limitationInterval)]}readStringParamFromForm(){let t="";for(let e=0;e<this.rewardRows.length;e++){const s=this.rewardRows[e];if(""==s.itemCode)continue;const n=s.probability.toString();t=t+(""==t?"":";")+[s.badge?0:1,s.itemCode,n.length>0?n:0].join(",")}return t}decreaseLimit(){this.rewardsLimit-=1,this.rewardsLimit<t.LIMIT_MINIMUM_VALUE&&(this.rewardsLimit=t.LIMIT_MINIMUM_VALUE)}increaseLimit(){this.rewardsLimit+=1,this.rewardsLimit>t.LIMIT_MAXIMUM_VALUE&&(this.rewardsLimit=t.LIMIT_MAXIMUM_VALUE)}increaseRewardsCount(){this.rewardRows.push({badge:!1,itemCode:"",probability:""})}get limitSliderOptions(){return{floor:t.LIMIT_MINIMUM_VALUE,ceil:t.LIMIT_MAXIMUM_VALUE,step:t.LIMIT_STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}get hasIntervalValue(){return this.rewardTime==this.SETTING_N_DAYS||this.rewardTime==this.SETTING_N_HOURS||this.rewardTime==this.SETTING_N_MINS}validate(){let t=0;if(this.limitationInterval.trim().length>0&&isNaN(Number.parseInt(this.limitationInterval)))return"The interval value has to be a number.";for(let e=0;e<this.rewardRows.length;e++){const s=this.rewardRows[e];if(0!=s.itemCode.trim().length||0!=s.probability.trim().length){if(s.itemCode.includes(","))return"Product/badge codes must not contain ',' characters.";if(s.itemCode.includes(";"))return"Product/badge codes must not contain ';' characters.";if(s.itemCode.length>100)return"Product/badge codes cannot contain more than 100 characters.";if(""==s.itemCode)return"Remember to define product/badge codes for all rewards (fill all fields or leave all fields empty).";if(!this.uniqueRewards){if(""==s.probability)return"Remember to define probabilities for all rewards (fill all fields or leave all fields empty).";const e=Number.parseInt(s.probability);if(isNaN(e))return"Make sure all probabilities are numbers.";if(e<1||e>100)return"Make sure all probabilities are numbers between 1 and 100.";t+=e}}}return t>100?`The sum of probabilities cannot exceed 100. You now have ${t}.`:null}}return t.LIMIT_MINIMUM_VALUE=1,t.LIMIT_MAXIMUM_VALUE=1e3,t.LIMIT_STEPPER_VALUE=1,t.CODE=Xb.GIVE_REWARD,t.\u0275fac=function(e){return Tv(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:40,vars:23,consts:[[3,"delay","delayChange"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["class","d-flex align-items-center justify-content-center my-2 custom-slider mb-2",4,"ngIf"],[1,"form-group"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"value","selected"],["class","form-group mb-2",4,"ngIf"],[1,"w-100","text-center","mb-2"],[1,"form-row","mb-2"],[2,"min-height","200px","max-height","200px","height","200px"],[4,"ngIf"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary","btn-sm","mb-2",3,"click"],[1,"fas","fa-plus"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider","mb-2"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","limit",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"],[1,"form-group","mb-2"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","checkbox",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-action-base-component",0),n.nc("delayChange",function(t){return e.delay=t}),n.dc(1,"div",1),n.dc(2,"input",2),n.nc("ngModelChange",function(t){return e.limitEnabled=t}),n.cc(),n.dc(3,"label",3),n.Wc(4),n.rc(5,"translate"),n.cc(),n.cc(),n.Uc(6,Ev,6,2,"div",4),n.dc(7,"div",5),n.dc(8,"label"),n.Wc(9,"How often can a user be rewarded"),n.cc(),n.dc(10,"select",6),n.nc("ngModelChange",function(t){return e.rewardTime=t}),n.dc(11,"option",7),n.Wc(12,"Once"),n.cc(),n.dc(13,"option",7),n.Wc(14,"1/n minutes"),n.cc(),n.dc(15,"option",7),n.Wc(16,"1/n hours"),n.cc(),n.dc(17,"option",7),n.Wc(18,"1/n days"),n.cc(),n.cc(),n.cc(),n.Uc(19,Sv,4,1,"div",8),n.dc(20,"div",1),n.dc(21,"input",2),n.nc("ngModelChange",function(t){return e.uniqueRewards=t}),n.cc(),n.dc(22,"label",3),n.Wc(23,"Unique Rewards"),n.cc(),n.cc(),n.dc(24,"p",9),n.Wc(25,"If checked each reward will be given once to each user. This will disable the probabilities option."),n.cc(),n.dc(26,"div",10),n.dc(27,"perfect-scrollbar",11),n.dc(28,"table"),n.dc(29,"tr"),n.dc(30,"td"),n.dc(31,"small"),n.Wc(32,"Badge"),n.cc(),n.cc(),n.dc(33,"td"),n.dc(34,"small"),n.Wc(35,"Item code"),n.cc(),n.cc(),n.Uc(36,bv,3,0,"td",12),n.cc(),n.Uc(37,Iv,6,3,"tr",13),n.cc(),n.cc(),n.cc(),n.dc(38,"button",14),n.nc("click",function(){return e.increaseRewardsCount()}),n.Zb(39,"i",15),n.cc(),n.cc()),2&t&&(n.yc("delay",e.delay),n.Kb(2),n.yc("ngModel",e.limitEnabled),n.Kb(2),n.Xc(n.uc(5,19,"wiredfurni.params.prizelimit","amount",e.rewardsLimit>0?e.rewardsLimit:"")),n.Kb(2),n.yc("ngIf",e.limitEnabled),n.Kb(4),n.Qb("mb-2",!e.hasIntervalValue),n.yc("ngModel",e.rewardTime),n.Kb(1),n.yc("value",e.SETTING_ONCE)("selected",e.rewardTime==e.SETTING_ONCE),n.Kb(2),n.yc("value",e.SETTING_N_MINS)("selected",e.rewardTime==e.SETTING_N_MINS),n.Kb(2),n.yc("value",e.SETTING_N_HOURS)("selected",e.rewardTime==e.SETTING_N_HOURS),n.Kb(2),n.yc("value",e.SETTING_N_DAYS)("selected",e.rewardTime==e.SETTING_N_DAYS),n.Kb(2),n.yc("ngIf",e.hasIntervalValue),n.Kb(2),n.yc("ngModel",e.uniqueRewards),n.Kb(15),n.yc("ngIf",0==e.uniqueRewards),n.Kb(1),n.yc("ngForOf",e.rewardRows))},encapsulation:2}),t})();const Tv=n.fc(Rv);let yv=(()=>{class t extends PS{constructor(){super(...arguments),this.points=1,this.times=1}get code(){return t.CODE}onEditStart(t){this.points=t.intData.length>0?t.intData[0]:1,this.times=t.intData.length>1?t.intData[1]:1,super.onEditStart(t)}readIntegerParamsFromForm(){return[this.points,this.times]}get hasSpecialInputs(){return!0}decreasePoints(){this.points-=1,this.points<t.MINIMUM_VALUE&&(this.points=t.MINIMUM_VALUE)}increasePoints(){this.points+=1,this.points>t.POINTS_MAXIMUM_VALUE&&(this.points=t.POINTS_MAXIMUM_VALUE)}decreaseTimes(){this.times-=1,this.times<t.MINIMUM_VALUE&&(this.times=t.MINIMUM_VALUE)}increaseTimes(){this.times+=1,this.times>t.TIMES_MAXIMUM_VALUE&&(this.times=t.TIMES_MAXIMUM_VALUE)}get pointsSliderOptions(){return{floor:t.MINIMUM_VALUE,ceil:t.POINTS_MAXIMUM_VALUE,step:t.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}get timesSliderOptions(){return{floor:t.MINIMUM_VALUE,ceil:t.TIMES_MAXIMUM_VALUE,step:t.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.MINIMUM_VALUE=1,t.STEPPER_VALUE=1,t.POINTS_MAXIMUM_VALUE=100,t.TIMES_MAXIMUM_VALUE=10,t.CODE=Xb.GIVE_SCORE,t.\u0275fac=function(e){return Ov(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:19,vars:15,consts:[[3,"delay","delayChange"],[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","points",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"],["name","times",3,"options","value","valueChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-action-base-component",0),n.nc("delayChange",function(t){return e.delay=t}),n.dc(1,"p",1),n.Wc(2),n.rc(3,"translate"),n.cc(),n.dc(4,"div",2),n.dc(5,"button",3),n.nc("click",function(){return e.decreasePoints()}),n.Zb(6,"i",4),n.cc(),n.dc(7,"ngx-slider",5),n.nc("valueChange",function(t){return e.points=t}),n.cc(),n.dc(8,"button",3),n.nc("click",function(){return e.increasePoints()}),n.Zb(9,"i",6),n.cc(),n.cc(),n.dc(10,"p",1),n.Wc(11),n.rc(12,"translate"),n.cc(),n.dc(13,"div",2),n.dc(14,"button",3),n.nc("click",function(){return e.decreaseTimes()}),n.Zb(15,"i",4),n.cc(),n.dc(16,"ngx-slider",7),n.nc("valueChange",function(t){return e.times=t}),n.cc(),n.dc(17,"button",3),n.nc("click",function(){return e.increaseTimes()}),n.Zb(18,"i",6),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("delay",e.delay),n.Kb(2),n.Xc(n.uc(3,7,"wiredfurni.params.setpoints","points",e.points)),n.Kb(5),n.yc("options",e.pointsSliderOptions)("value",e.points),n.Kb(4),n.Xc(n.uc(12,11,"wiredfurni.params.settimesingame","times",e.times)),n.Kb(5),n.yc("options",e.timesSliderOptions)("value",e.times))},encapsulation:2}),t})();const Ov=n.fc(yv);let Cv=(()=>{class t extends yv{get code(){return t.CODE}onEditStart(t){this.team=(t.intData.length>2?t.intData[2]:1).toString(),super.onEditStart(t)}readIntegerParamsFromForm(){return[this.points,this.times,parseInt(this.team)]}}return t.CODE=Xb.GIVE_SCORE_TO_PREDEFINED_TEAM,t.\u0275fac=function(e){return Av(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:36,vars:35,consts:[[3,"delay","delayChange"],[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","points",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"],["name","times",3,"options","value","valueChange"],[1,"form-group"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","1",3,"selected"],["value","2",3,"selected"],["value","3",3,"selected"],["value","4",3,"selected"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-action-base-component",0),n.nc("delayChange",function(t){return e.delay=t}),n.dc(1,"p",1),n.Wc(2),n.rc(3,"translate"),n.cc(),n.dc(4,"div",2),n.dc(5,"button",3),n.nc("click",function(){return e.decreasePoints()}),n.Zb(6,"i",4),n.cc(),n.dc(7,"ngx-slider",5),n.nc("valueChange",function(t){return e.points=t}),n.cc(),n.dc(8,"button",3),n.nc("click",function(){return e.increasePoints()}),n.Zb(9,"i",6),n.cc(),n.cc(),n.dc(10,"p",1),n.Wc(11),n.rc(12,"translate"),n.cc(),n.dc(13,"div",2),n.dc(14,"button",3),n.nc("click",function(){return e.decreaseTimes()}),n.Zb(15,"i",4),n.cc(),n.dc(16,"ngx-slider",7),n.nc("valueChange",function(t){return e.times=t}),n.cc(),n.dc(17,"button",3),n.nc("click",function(){return e.increaseTimes()}),n.Zb(18,"i",6),n.cc(),n.cc(),n.dc(19,"div",8),n.dc(20,"label"),n.Wc(21),n.rc(22,"translate"),n.cc(),n.dc(23,"select",9),n.nc("ngModelChange",function(t){return e.team=t}),n.dc(24,"option",10),n.Wc(25),n.rc(26,"translate"),n.cc(),n.dc(27,"option",11),n.Wc(28),n.rc(29,"translate"),n.cc(),n.dc(30,"option",12),n.Wc(31),n.rc(32,"translate"),n.cc(),n.dc(33,"option",13),n.Wc(34),n.rc(35,"translate"),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("delay",e.delay),n.Kb(2),n.Xc(n.uc(3,17,"wiredfurni.params.setpoints","points",e.points)),n.Kb(5),n.yc("options",e.pointsSliderOptions)("value",e.points),n.Kb(4),n.Xc(n.uc(12,21,"wiredfurni.params.settimesingame","times",e.times)),n.Kb(5),n.yc("options",e.timesSliderOptions)("value",e.times),n.Kb(5),n.Xc(n.sc(22,25,"wiredfurni.params.team")),n.Kb(2),n.yc("ngModel",e.team),n.Kb(1),n.yc("selected","1"==e.team),n.Kb(1),n.Xc(n.sc(26,27,"wiredfurni.params.team.1")),n.Kb(2),n.yc("selected","2"==e.team),n.Kb(1),n.Xc(n.sc(29,29,"wiredfurni.params.team.2")),n.Kb(2),n.yc("selected","3"==e.team),n.Kb(1),n.Xc(n.sc(32,31,"wiredfurni.params.team.3")),n.Kb(2),n.yc("selected","4"==e.team),n.Kb(1),n.Xc(n.sc(35,33,"wiredfurni.params.team.4")))},encapsulation:2}),t})();const Av=n.fc(Cv);let Mv=(()=>{class t extends PS{get code(){return t.CODE}onEditStart(t){this.team=(t.intData.length>0?t.intData[0]:1).toString(),super.onEditStart(t)}readIntegerParamsFromForm(){return[Number.parseInt(this.team)]}get hasSpecialInputs(){return!0}}return t.CODE=Xb.JOIN_TEAM,t.\u0275fac=function(e){return wv(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:18,vars:21,consts:[[3,"delay","delayChange"],[1,"form-group"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","1",3,"selected"],["value","2",3,"selected"],["value","3",3,"selected"],["value","4",3,"selected"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-action-base-component",0),n.nc("delayChange",function(t){return e.delay=t}),n.dc(1,"div",1),n.dc(2,"label"),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"select",2),n.nc("ngModelChange",function(t){return e.team=t}),n.dc(6,"option",3),n.Wc(7),n.rc(8,"translate"),n.cc(),n.dc(9,"option",4),n.Wc(10),n.rc(11,"translate"),n.cc(),n.dc(12,"option",5),n.Wc(13),n.rc(14,"translate"),n.cc(),n.dc(15,"option",6),n.Wc(16),n.rc(17,"translate"),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("delay",e.delay),n.Kb(3),n.Xc(n.sc(4,11,"wiredfurni.params.team")),n.Kb(2),n.yc("ngModel",e.team),n.Kb(1),n.yc("selected","1"==e.team),n.Kb(1),n.Xc(n.sc(8,13,"wiredfurni.params.team.1")),n.Kb(2),n.yc("selected","2"==e.team),n.Kb(1),n.Xc(n.sc(11,15,"wiredfurni.params.team.2")),n.Kb(2),n.yc("selected","3"==e.team),n.Kb(1),n.Xc(n.sc(14,17,"wiredfurni.params.team.3")),n.Kb(2),n.yc("selected","4"==e.team),n.Kb(1),n.Xc(n.sc(17,19,"wiredfurni.params.team.4")))},encapsulation:2}),t})();const wv=n.fc(Mv);let Uv=(()=>{class t extends PS{get code(){return t.CODE}get hasSpecialInputs(){return!0}readStringParamFromForm(){return this.message}onEditStart(t){this.message=t.stringData,super.onEditStart(t)}validate(){return this.message.length>100?u.a.instance.localization.getValue("wiredfurni.chatmsgtoolong",!1):null}}return t.CODE=Xb.KICK_FROM_ROOM,t.\u0275fac=function(e){return Dv(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:6,vars:5,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-action-base-component",0),n.nc("delayChange",function(t){return e.delay=t}),n.dc(1,"div",1),n.dc(2,"label"),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"input",2),n.nc("ngModelChange",function(t){return e.message=t}),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("delay",e.delay),n.Kb(3),n.Xc(n.sc(4,3,"wiredfurni.params.message")),n.Kb(2),n.yc("ngModel",e.message))},encapsulation:2}),t})();const Dv=n.fc(Uv);let Nv=(()=>{class t extends PS{get code(){return t.CODE}}return t.CODE=Xb.LEAVE_TEAM,t.\u0275fac=function(e){return Lv(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-action-base-component",0),n.nc("delayChange",function(t){return e.delay=t}),n.cc()),2&t&&n.yc("delay",e.delay)},encapsulation:2}),t})();const Lv=n.fc(Nv);let Pv=(()=>{class t extends PS{get code(){return t.CODE}onEditStart(t){this.movement=(t.intData.length>0?t.intData[0]:0).toString(),this.spacing=t.intData.length>1?t.intData[1]:1,super.onEditStart(t)}readIntegerParamsFromForm(){return[Number.parseInt(this.movement),this.spacing]}get hasSpecialInputs(){return!0}get requiresFurni(){return tI._Str_4991}decreaseSpacing(){this.spacing-=1,this.spacing<t.SPACING_MINIMUM_VALUE&&(this.spacing=t.SPACING_MINIMUM_VALUE)}increaseSpacing(){this.spacing+=1,this.spacing>t.SPACING_MAXIMUM_VALUE&&(this.spacing=t.SPACING_MAXIMUM_VALUE)}get spacingSliderOptions(){return{floor:t.SPACING_MINIMUM_VALUE,ceil:t.SPACING_MAXIMUM_VALUE,step:t.SPACING_STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.SPACING_MINIMUM_VALUE=1,t.SPACING_MAXIMUM_VALUE=5,t.SPACING_STEPPER_VALUE=1,t.CODE=Xb.MOVE_FURNI_TO,t.\u0275fac=function(e){return xv(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:29,vars:15,consts:[[3,"delay","delayChange"],[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","spacing",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"],[1,"form-row","mb-2"],[1,"form-check"],["type","radio","name","movement","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[1,"icon","icon-ne"],["type","radio","name","movement","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-se"],["type","radio","name","movement","value","4",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-sw"],["type","radio","name","movement","value","6",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-nw"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-action-base-component",0),n.nc("delayChange",function(t){return e.delay=t}),n.dc(1,"p",1),n.Wc(2),n.rc(3,"translate"),n.cc(),n.dc(4,"div",2),n.dc(5,"button",3),n.nc("click",function(){return e.decreaseSpacing()}),n.Zb(6,"i",4),n.cc(),n.dc(7,"ngx-slider",5),n.nc("valueChange",function(t){return e.spacing=t}),n.cc(),n.dc(8,"button",3),n.nc("click",function(){return e.increaseSpacing()}),n.Zb(9,"i",6),n.cc(),n.cc(),n.Wc(10),n.rc(11,"translate"),n.dc(12,"div",7),n.dc(13,"div",8),n.dc(14,"input",9),n.nc("ngModelChange",function(t){return e.movement=t}),n.cc(),n.dc(15,"label",10),n.Zb(16,"i",11),n.cc(),n.cc(),n.dc(17,"div",8),n.dc(18,"input",12),n.nc("ngModelChange",function(t){return e.movement=t}),n.cc(),n.dc(19,"label",10),n.Zb(20,"i",13),n.cc(),n.cc(),n.dc(21,"div",8),n.dc(22,"input",14),n.nc("ngModelChange",function(t){return e.movement=t}),n.cc(),n.dc(23,"label",10),n.Zb(24,"i",15),n.cc(),n.cc(),n.dc(25,"div",8),n.dc(26,"input",16),n.nc("ngModelChange",function(t){return e.movement=t}),n.cc(),n.dc(27,"label",10),n.Zb(28,"i",17),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("delay",e.delay),n.Kb(2),n.Xc(n.uc(3,9,"wiredfurni.params.emptytiles","tiles",e.spacing)),n.Kb(5),n.yc("options",e.spacingSliderOptions)("value",e.spacing),n.Kb(3),n.Yc(" ",n.sc(11,13,"wiredfurni.params.startdir")," "),n.Kb(4),n.yc("ngModel",e.movement),n.Kb(4),n.yc("ngModel",e.movement),n.Kb(4),n.yc("ngModel",e.movement),n.Kb(4),n.yc("ngModel",e.movement))},encapsulation:2}),t})();const xv=n.fc(Pv);let Fv=(()=>{class t extends PS{get code(){return t.CODE}onEditStart(t){this.movement=(t.intData.length>0?t.intData[0]:0).toString(),this.rotation=(t.intData.length>1?t.intData[1]:0).toString(),super.onEditStart(t)}readIntegerParamsFromForm(){return[Number.parseInt(this.movement),Number.parseInt(this.rotation)]}get hasSpecialInputs(){return!0}get requiresFurni(){return tI._Str_5430}}return t.CODE=Xb.MOVE_FURNI,t.\u0275fac=function(e){return kv(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:62,vars:34,consts:[[3,"delay","delayChange"],[1,"form-row"],[1,"form-check"],["type","radio","name","movement","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[1,"form-row","mb-2"],["type","radio","name","movement","value","4",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-ne"],["type","radio","name","movement","value","5",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-se"],["type","radio","name","movement","value","6",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-sw"],["type","radio","name","movement","value","7",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-mv-7"],["type","radio","name","movement","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-mv-2"],["type","radio","name","movement","value","3",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-mv-3"],["type","radio","name","movement","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-mv-1"],["type","radio","name","rotation","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-rot-1"],["type","radio","name","rotation","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-rot-2"],["type","radio","name","rotation","value","3",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-action-base-component",0),n.nc("delayChange",function(t){return e.delay=t}),n.Wc(1),n.rc(2,"translate"),n.dc(3,"div",1),n.dc(4,"div",2),n.dc(5,"input",3),n.nc("ngModelChange",function(t){return e.movement=t}),n.cc(),n.dc(6,"label",4),n.Wc(7),n.rc(8,"translate"),n.cc(),n.cc(),n.cc(),n.dc(9,"div",5),n.dc(10,"div",2),n.dc(11,"input",6),n.nc("ngModelChange",function(t){return e.movement=t}),n.cc(),n.dc(12,"label",4),n.Zb(13,"i",7),n.cc(),n.cc(),n.dc(14,"div",2),n.dc(15,"input",8),n.nc("ngModelChange",function(t){return e.movement=t}),n.cc(),n.dc(16,"label",4),n.Zb(17,"i",9),n.cc(),n.cc(),n.dc(18,"div",2),n.dc(19,"input",10),n.nc("ngModelChange",function(t){return e.movement=t}),n.cc(),n.dc(20,"label",4),n.Zb(21,"i",11),n.cc(),n.cc(),n.dc(22,"div",2),n.dc(23,"input",12),n.nc("ngModelChange",function(t){return e.movement=t}),n.cc(),n.dc(24,"label",4),n.Zb(25,"i",13),n.cc(),n.cc(),n.dc(26,"div",2),n.dc(27,"input",14),n.nc("ngModelChange",function(t){return e.movement=t}),n.cc(),n.dc(28,"label",4),n.Zb(29,"i",15),n.cc(),n.cc(),n.dc(30,"div",2),n.dc(31,"input",16),n.nc("ngModelChange",function(t){return e.movement=t}),n.cc(),n.dc(32,"label",4),n.Zb(33,"i",17),n.cc(),n.cc(),n.dc(34,"div",2),n.dc(35,"input",18),n.nc("ngModelChange",function(t){return e.movement=t}),n.cc(),n.dc(36,"label",4),n.Zb(37,"i",19),n.cc(),n.cc(),n.cc(),n.Wc(38),n.rc(39,"translate"),n.dc(40,"div",2),n.dc(41,"input",20),n.nc("ngModelChange",function(t){return e.rotation=t}),n.cc(),n.dc(42,"label",4),n.Wc(43),n.rc(44,"translate"),n.cc(),n.cc(),n.dc(45,"div",2),n.dc(46,"input",21),n.nc("ngModelChange",function(t){return e.rotation=t}),n.cc(),n.dc(47,"label",4),n.Zb(48,"i",22),n.Wc(49),n.rc(50,"translate"),n.cc(),n.cc(),n.dc(51,"div",2),n.dc(52,"input",23),n.nc("ngModelChange",function(t){return e.rotation=t}),n.cc(),n.dc(53,"label",4),n.Zb(54,"i",24),n.Wc(55),n.rc(56,"translate"),n.cc(),n.cc(),n.dc(57,"div",2),n.dc(58,"input",25),n.nc("ngModelChange",function(t){return e.rotation=t}),n.cc(),n.dc(59,"label",4),n.Wc(60),n.rc(61,"translate"),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("delay",e.delay),n.Kb(1),n.Yc(" ",n.sc(2,20,"wiredfurni.params.movefurni")," "),n.Kb(4),n.yc("ngModel",e.movement),n.Kb(2),n.Xc(n.sc(8,22,"wiredfurni.params.movefurni.0")),n.Kb(4),n.yc("ngModel",e.movement),n.Kb(4),n.yc("ngModel",e.movement),n.Kb(4),n.yc("ngModel",e.movement),n.Kb(4),n.yc("ngModel",e.movement),n.Kb(4),n.yc("ngModel",e.movement),n.Kb(4),n.yc("ngModel",e.movement),n.Kb(4),n.yc("ngModel",e.movement),n.Kb(3),n.Yc(" ",n.sc(39,24,"wiredfurni.params.rotatefurni")," "),n.Kb(3),n.yc("ngModel",e.rotation),n.Kb(2),n.Xc(n.sc(44,26,"wiredfurni.params.rotatefurni.0")),n.Kb(3),n.yc("ngModel",e.rotation),n.Kb(3),n.Yc(" ",n.sc(50,28,"wiredfurni.params.rotatefurni.1"),""),n.Kb(3),n.yc("ngModel",e.rotation),n.Kb(3),n.Yc(" ",n.sc(56,30,"wiredfurni.params.rotatefurni.2"),""),n.Kb(3),n.yc("ngModel",e.rotation),n.Kb(2),n.Xc(n.sc(61,32,"wiredfurni.params.rotatefurni.3")))},encapsulation:2}),t})();const kv=n.fc(Fv);let Wv=(()=>{class t extends PS{get code(){return t.CODE}onEditStart(t){this.movement=(t.intData.length>0?t.intData[0]:0).toString(),this.rotation=(t.intData.length>1?t.intData[1]:0).toString(),super.onEditStart(t)}readIntegerParamsFromForm(){return[Number.parseInt(this.movement),Number.parseInt(this.rotation)]}get hasSpecialInputs(){return!0}get requiresFurni(){return tI._Str_5430}}return t.CODE=Xb.MOVE_TO_DIRECTION,t.\u0275fac=function(e){return Bv(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:57,vars:39,consts:[[3,"delay","delayChange"],[1,"form-row","mb-2"],[1,"form-check"],["type","radio","name","movement","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[1,"icon","icon-ne"],["type","radio","name","movement","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-se"],["type","radio","name","movement","value","4",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-sw"],["type","radio","name","movement","value","6",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-nw"],["type","radio","name","rotation","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","3",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","4",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","5",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","6",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-action-base-component",0),n.nc("delayChange",function(t){return e.delay=t}),n.Wc(1),n.rc(2,"translate"),n.dc(3,"div",1),n.dc(4,"div",2),n.dc(5,"input",3),n.nc("ngModelChange",function(t){return e.movement=t}),n.cc(),n.dc(6,"label",4),n.Zb(7,"i",5),n.cc(),n.cc(),n.dc(8,"div",2),n.dc(9,"input",6),n.nc("ngModelChange",function(t){return e.movement=t}),n.cc(),n.dc(10,"label",4),n.Zb(11,"i",7),n.cc(),n.cc(),n.dc(12,"div",2),n.dc(13,"input",8),n.nc("ngModelChange",function(t){return e.movement=t}),n.cc(),n.dc(14,"label",4),n.Zb(15,"i",9),n.cc(),n.cc(),n.dc(16,"div",2),n.dc(17,"input",10),n.nc("ngModelChange",function(t){return e.movement=t}),n.cc(),n.dc(18,"label",4),n.Zb(19,"i",11),n.cc(),n.cc(),n.cc(),n.Wc(20),n.rc(21,"translate"),n.dc(22,"div",2),n.dc(23,"input",12),n.nc("ngModelChange",function(t){return e.rotation=t}),n.cc(),n.dc(24,"label",4),n.Wc(25),n.rc(26,"translate"),n.cc(),n.cc(),n.dc(27,"div",2),n.dc(28,"input",13),n.nc("ngModelChange",function(t){return e.rotation=t}),n.cc(),n.dc(29,"label",4),n.Wc(30),n.rc(31,"translate"),n.cc(),n.cc(),n.dc(32,"div",2),n.dc(33,"input",14),n.nc("ngModelChange",function(t){return e.rotation=t}),n.cc(),n.dc(34,"label",4),n.Wc(35),n.rc(36,"translate"),n.cc(),n.cc(),n.dc(37,"div",2),n.dc(38,"input",15),n.nc("ngModelChange",function(t){return e.rotation=t}),n.cc(),n.dc(39,"label",4),n.Wc(40),n.rc(41,"translate"),n.cc(),n.cc(),n.dc(42,"div",2),n.dc(43,"input",16),n.nc("ngModelChange",function(t){return e.rotation=t}),n.cc(),n.dc(44,"label",4),n.Wc(45),n.rc(46,"translate"),n.cc(),n.cc(),n.dc(47,"div",2),n.dc(48,"input",17),n.nc("ngModelChange",function(t){return e.rotation=t}),n.cc(),n.dc(49,"label",4),n.Wc(50),n.rc(51,"translate"),n.cc(),n.cc(),n.dc(52,"div",2),n.dc(53,"input",18),n.nc("ngModelChange",function(t){return e.rotation=t}),n.cc(),n.dc(54,"label",4),n.Wc(55),n.rc(56,"translate"),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("delay",e.delay),n.Kb(1),n.Yc(" ",n.sc(2,21,"wiredfurni.params.startdir")," "),n.Kb(4),n.yc("ngModel",e.movement),n.Kb(4),n.yc("ngModel",e.movement),n.Kb(4),n.yc("ngModel",e.movement),n.Kb(4),n.yc("ngModel",e.movement),n.Kb(3),n.Yc(" ",n.sc(21,23,"wiredfurni.params.turn")," "),n.Kb(3),n.yc("ngModel",e.rotation),n.Kb(2),n.Xc(n.sc(26,25,"wiredfurni.params.turn.0")),n.Kb(3),n.yc("ngModel",e.rotation),n.Kb(2),n.Xc(n.sc(31,27,"wiredfurni.params.turn.1")),n.Kb(3),n.yc("ngModel",e.rotation),n.Kb(2),n.Xc(n.sc(36,29,"wiredfurni.params.turn.2")),n.Kb(3),n.yc("ngModel",e.rotation),n.Kb(2),n.Xc(n.sc(41,31,"wiredfurni.params.turn.3")),n.Kb(3),n.yc("ngModel",e.rotation),n.Kb(2),n.Xc(n.sc(46,33,"wiredfurni.params.turn.4")),n.Kb(3),n.yc("ngModel",e.rotation),n.Kb(2),n.Xc(n.sc(51,35,"wiredfurni.params.turn.5")),n.Kb(3),n.yc("ngModel",e.rotation),n.Kb(2),n.Xc(n.sc(56,37,"wiredfurni.params.turn.6")))},encapsulation:2}),t})();const Bv=n.fc(Wv);let Vv=(()=>{class t extends PS{constructor(){super(...arguments),this.length=0}get code(){return t.CODE}get hasSpecialInputs(){return!0}readStringParamFromForm(){return this.message}readIntegerParamsFromForm(){return[this.length]}onEditStart(t){this.message=t.stringData,this.length=t.intData.length>0?t.intData[0]:10,super.onEditStart(t)}validate(){return this.message.length>100?u.a.instance.localization.getValue("wiredfurni.chatmsgtoolong",!1):null}decreaseLength(){this.length-=1,this.length<t.LENGTH_MINIMUM_VALUE&&(this.length=t.LENGTH_MINIMUM_VALUE)}increaseLength(){this.length+=1,this.length>t.LENGTH_MAXIMUM_VALUE&&(this.length=t.LENGTH_MAXIMUM_VALUE)}get lengthSliderOptions(){return{floor:t.LENGTH_MINIMUM_VALUE,ceil:t.LENGTH_MAXIMUM_VALUE,step:t.LENGTH_STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.LENGTH_MINIMUM_VALUE=1,t.LENGTH_MAXIMUM_VALUE=10,t.LENGTH_STEPPER_VALUE=1,t.CODE=Xb.MUTE_USER,t.\u0275fac=function(e){return Gv(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:15,vars:12,consts:[[3,"delay","delayChange"],[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","length",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"],[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-action-base-component",0),n.nc("delayChange",function(t){return e.delay=t}),n.dc(1,"p",1),n.Wc(2),n.rc(3,"translate"),n.cc(),n.dc(4,"div",2),n.dc(5,"button",3),n.nc("click",function(){return e.decreaseLength()}),n.Zb(6,"i",4),n.cc(),n.dc(7,"ngx-slider",5),n.nc("valueChange",function(t){return e.length=t}),n.cc(),n.dc(8,"button",3),n.nc("click",function(){return e.increaseLength()}),n.Zb(9,"i",6),n.cc(),n.cc(),n.dc(10,"div",7),n.dc(11,"label"),n.Wc(12),n.rc(13,"translate"),n.cc(),n.dc(14,"input",8),n.nc("ngModelChange",function(t){return e.message=t}),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("delay",e.delay),n.Kb(2),n.Xc(n.uc(3,6,"wiredfurni.params.length.minutes","minutes",e.length)),n.Kb(5),n.yc("options",e.lengthSliderOptions)("value",e.length),n.Kb(5),n.Xc(n.sc(13,10,"wiredfurni.params.message")),n.Kb(2),n.yc("ngModel",e.message))},encapsulation:2}),t})();const Gv=n.fc(Vv);let Kv=(()=>{class t extends PS{get code(){return t.CODE}}return t.CODE=Xb.RESET,t.\u0275fac=function(e){return Hv(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-action-base-component",0),n.nc("delayChange",function(t){return e.delay=t}),n.cc()),2&t&&n.yc("delay",e.delay)},encapsulation:2}),t})();const Hv=n.fc(Kv);let jv=(()=>{class t extends PS{get code(){return t.CODE}onEditStart(t){this.state=t.getBoolean(0),this.direction=t.getBoolean(1),this.position=t.getBoolean(2),super.onEditStart(t)}readIntegerParamsFromForm(){return[this.state?1:0,this.direction?1:0,this.position?1:0]}get requiresFurni(){return tI._Str_4873}get hasStateSnapshot(){return!0}}return t.CODE=Xb.SET_FURNI_STATE,t.\u0275fac=function(e){return zv(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:18,vars:16,consts:[[3,"delay","delayChange"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-action-base-component",0),n.nc("delayChange",function(t){return e.delay=t}),n.Wc(1),n.rc(2,"translate"),n.dc(3,"div",1),n.dc(4,"input",2),n.nc("ngModelChange",function(t){return e.state=t}),n.cc(),n.dc(5,"label",3),n.Wc(6),n.rc(7,"translate"),n.cc(),n.cc(),n.dc(8,"div",1),n.dc(9,"input",2),n.nc("ngModelChange",function(t){return e.direction=t}),n.cc(),n.dc(10,"label",3),n.Wc(11),n.rc(12,"translate"),n.cc(),n.cc(),n.dc(13,"div",1),n.dc(14,"input",2),n.nc("ngModelChange",function(t){return e.position=t}),n.cc(),n.dc(15,"label",3),n.Wc(16),n.rc(17,"translate"),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("delay",e.delay),n.Kb(1),n.Yc(" ",n.sc(2,8,"wiredfurni.params.conditions")," "),n.Kb(3),n.yc("ngModel",e.state),n.Kb(2),n.Xc(n.sc(7,10,"wiredfurni.params.condition.state")),n.Kb(3),n.yc("ngModel",e.direction),n.Kb(2),n.Xc(n.sc(12,12,"wiredfurni.params.condition.direction")),n.Kb(3),n.yc("ngModel",e.position),n.Kb(2),n.Xc(n.sc(17,14,"wiredfurni.params.condition.position")))},encapsulation:2}),t})();const zv=n.fc(jv);let Yv=(()=>{class t extends PS{get code(){return t.CODE}get requiresFurni(){return tI._Str_5430}}return t.CODE=Xb.TELEPORT,t.\u0275fac=function(e){return qv(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-action-base-component",0),n.nc("delayChange",function(t){return e.delay=t}),n.cc()),2&t&&n.yc("delay",e.delay)},encapsulation:2}),t})();const qv=n.fc(Yv);let Xv=(()=>{class t extends PS{get code(){return t.CODE}get requiresFurni(){return tI._Str_5430}}return t.CODE=Xb.TOGGLE_FURNI_STATE,t.\u0275fac=function(e){return Zv(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(t,e){1&t&&(n.dc(0,"nitro-wired-action-base-component",0),n.nc("delayChange",function(t){return e.delay=t}),n.cc()),2&t&&n.yc("delay",e.delay)},encapsulation:2}),t})();const Zv=n.fc(Xv);class Qv{_Str_9781(t){switch(t){case Xv.CODE:return Xv;case Yv.CODE:return Yv;case _v.CODE:return _v;case pv.CODE:return pv;case hv.CODE:return hv;case gv.CODE:return gv;case tv.CODE:return tv;case Jb.CODE:return Jb;case Nv.CODE:return Nv;case Kv.CODE:return Kv;case Uv.CODE:return Uv;case cv.CODE:return cv;case jv.CODE:return jv;case sv.CODE:return sv;case Vv.CODE:return Vv;case Zb.CODE:return Zb;case iv.CODE:return iv;case av.CODE:return av;case Fv.CODE:return Fv;case Wv.CODE:return Wv;case Mv.CODE:return Mv;case Cv.CODE:return Cv;case yv.CODE:return yv;case Pv.CODE:return Pv;case Rv.CODE:return Rv}return null}_Str_15652(t){return this._Str_9781(t)}_Str_14545(t){return t instanceof yS.a}_Str_1196(){return"action"}}const Jv=["inputsContainer"];function $v(t,e){}let tI=(()=>{class t{constructor(t,e,s,n,i){this._settingsService=t,this._notificationService=e,this._wiredService=s,this._componentFactoryResolver=n,this._ngZone=i,this._updated=null,this._lastComponent=null,this._furniSelectedIds=[]}ngOnInit(){this._wiredService.component=this,this._triggerConfs=new qb,this._actionTypes=new Qv,this._conditionTypes=new pb,this._selectionVisualizer=new NS(this)}ngOnDestroy(){this._wiredService.component=null}setupTrigger(t){this._updated=t;const e=this._Str_3959();this._selectionVisualizer.clearSelectionShaderFromFurni(this._furniSelectedIds),this._furniSelectedIds=[...this._updated.selectedItems],e.onEditStart(this._updated),this._selectionVisualizer.applySelectionShaderToFurni(this._furniSelectedIds)}_Str_19071(){return this._updated instanceof CS.a?this._triggerConfs:this._updated instanceof yS.a?this._actionTypes:this._updated instanceof OS.a?this._conditionTypes:null}_Str_3959(){const t=this._Str_19071()._Str_15652(this._updated.code);if(!t)return null;if(this._lastComponent&&this._lastComponent.instance instanceof t)return this._lastComponent.instance;this.inputsContainer.length&&this.inputsContainer.remove();const e=this._componentFactoryResolver.resolveComponentFactory(t);let s=null;return e&&(s=this.inputsContainer.createComponent(e)),this._lastComponent=s,s?(s.instance.onInitStart(),s.instance):null}close(){this.inputsContainer.length&&this.inputsContainer.remove(),this._selectionVisualizer.clearSelectionShaderFromFurni(this._furniSelectedIds),this._updated=null,this._lastComponent=null,this._furniSelectedIds=[]}save(){this.isOwnerOfFurniture(this._updated.id)?this.update():this._notificationService.alertWithConfirm("${wiredfurni.nonowner.change.confirm.body}","${wiredfurni.nonowner.change.confirm.title}",()=>{this.update()})}update(){const t=this._Str_3959().validate();t?this._notificationService.alert(t,"Update failed"):this._updated instanceof CS.a?u.a.instance.communication.connection.send(new wS.a(this._updated.id,this.readIntegerParams(),this.readStringParam(),this.readFurniSelectionIds(),this.readFurniSelectionCode())):this._updated instanceof yS.a?u.a.instance.communication.connection.send(new AS.a(this._updated.id,this.readIntegerParams(),this.readStringParam(),this.readFurniSelectionIds(),this.getActionDelay(),this.readFurniSelectionCode())):this._updated instanceof OS.a&&u.a.instance.communication.connection.send(new MS.a(this._updated.id,this.readIntegerParams(),this.readStringParam(),this.readFurniSelectionIds(),this.readFurniSelectionCode()))}getActionDelay(){const t=this._Str_3959();return t&&t instanceof PS?t.delay:0}readIntegerParams(){const t=this._Str_3959();return t?t.readIntegerParamsFromForm():[]}readStringParam(){const t=this._Str_3959();return t?t.readStringParamFromForm():""}readFurniSelectionIds(){return[...this._furniSelectedIds]}readFurniSelectionCode(){if(!this._updated._Str_21824)return 0;const e=this._Str_3959();return!e||e.requiresFurni!==t._Str_4991&&e.requiresFurni!==t._Str_5430?0:this._updated._Str_6040}getFurniName(){const t=this._updated&&this._updated.spriteId||-1,e=u.a.instance.sessionDataManager.getFloorItemData(t);return e?e.name:"NAME: "+t}getFurniDescription(){const t=this._updated&&this._updated.spriteId||-1,e=u.a.instance.sessionDataManager.getFloorItemData(t);return e?e.description:"NAME: "+t}_Str_19885(){return this._Str_3959().requiresFurni!==t._Str_5431}toggleFurniSelected(t,e){if(!this._updated||!this._Str_19885())return;const s=this._furniSelectedIds.indexOf(t);s>=0?(this._furniSelectedIds.splice(s,1),this._selectionVisualizer.hide(t)):this._furniSelectedIds.length<this._updated.maximumItemSelectionCount&&(this._furniSelectedIds.push(t),this._selectionVisualizer.show(t)),u.a.instance.localization.registerParameter("wiredfurni.pickfurnis.caption","count",this._furniSelectedIds.length.toString())}isOwnerOfFurniture(t){const e=u.a.instance.roomEngine.getRoomObject(this._wiredService.roomId,t,k.a.FLOOR);return!!e&&e.model.getValue(V.a.FURNITURE_OWNER_ID)===u.a.instance.sessionDataManager.userId}get roomId(){return this._wiredService.roomId}get furniSelectedIds(){return this._furniSelectedIds}get maximumItemSelectionCount(){return this._updated.maximumItemSelectionCount}}return t._Str_5431=0,t._Str_4873=1,t._Str_4991=2,t._Str_5430=3,t.\u0275fac=function(e){return new(e||t)(n.Yb(g),n.Yb(es),n.Yb(hs),n.Yb(n.m),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-wired-main-component"]],viewQuery:function(t,e){if(1&t&&n.cd(Jv,1,n.Z),2&t){let t;n.Hc(t=n.oc())&&(e.inputsContainer=t.first)}},decls:2,vars:0,consts:[["inputsContainer",""]],template:function(t,e){1&t&&n.Uc(0,$v,0,0,"ng-template",null,0,n.Vc)},encapsulation:2}),t})();var eI=s("xAfD");function sI(t,e){if(1&t){const t=n.ec();n.dc(0,"div",23),n.nc("click",function(){return n.Lc(t),n.qc(2).getMembers(!0)}),n.Wc(1),n.rc(2,"translate"),n.cc()}if(2&t){const t=n.qc(2);n.Kb(1),n.Xc(n.uc(2,1,"group.members.pendingmembers","count",t.groupMembershipRequestsCount))}}function nI(t,e){if(1&t){const t=n.ec();n.dc(0,"button",24),n.nc("click",function(){return n.Lc(t),n.qc(2).manage()}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"group.manage")))}function iI(t,e){if(1&t){const t=n.ec();n.dc(0,"button",25),n.nc("click",function(){return n.Lc(t),n.qc(2).leave()}),n.Wc(1),n.rc(2,"translate"),n.cc()}if(2&t){const t=n.qc(2);n.yc("disabled",t.isOwner),n.Kb(1),n.Xc(n.sc(2,2,"group.leave"))}}function rI(t,e){if(1&t){const t=n.ec();n.dc(0,"button",26),n.nc("click",function(){return n.Lc(t),n.qc(2).join()}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"group.join")))}function aI(t,e){if(1&t){const t=n.ec();n.dc(0,"button",26),n.nc("click",function(){return n.Lc(t),n.qc(3).join()}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"group.requestmembership")))}function oI(t,e){1&t&&(n.dc(0,"button",28),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"group.membershippending")))}function cI(t,e){if(1&t&&(n.dc(0,"div"),n.Uc(1,aI,3,3,"button",21),n.Uc(2,oI,3,3,"button",27),n.cc()),2&t){const t=n.qc(2);n.Kb(1),n.yc("ngIf",0===t.groupMembershipType),n.Kb(1),n.yc("ngIf",2===t.groupMembershipType)}}const lI=function(t,e,s){return{"fa-user-plus":t,"fa-key":e,"fa-ban":s}},hI=function(){return["date","owner"]},uI=function(t,e){return[t,e]};function _I(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"div",3),n.dc(3,"h6",4),n.Wc(4),n.rc(5,"translate"),n.cc(),n.dc(6,"button",5),n.nc("click",function(){return n.Lc(t),n.qc().clear()}),n.Zb(7,"i",6),n.cc(),n.cc(),n.dc(8,"div",7),n.dc(9,"div",8),n.dc(10,"div",9),n.Zb(11,"nitro-badge",10),n.dc(12,"div",11),n.nc("click",function(){return n.Lc(t),n.qc().getMembers(!1)}),n.Wc(13),n.rc(14,"translate"),n.cc(),n.Uc(15,sI,3,5,"div",12),n.cc(),n.dc(16,"div",13),n.dc(17,"div"),n.Zb(18,"i",14),n.Wc(19),n.cc(),n.dc(20,"div",15),n.Wc(21),n.rc(22,"translate"),n.cc(),n.dc(23,"div",16),n.Wc(24),n.cc(),n.dc(25,"button",17),n.nc("click",function(){return n.Lc(t),n.qc().goToHomeRoom()}),n.Wc(26),n.rc(27,"translate"),n.cc(),n.Uc(28,nI,3,3,"button",18),n.cc(),n.cc(),n.dc(29,"div",19),n.Uc(30,iI,3,4,"button",20),n.Uc(31,rI,3,3,"button",21),n.Uc(32,cI,3,2,"div",22),n.cc(),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(4),n.Xc(n.sc(5,14,"group.window.title")),n.Kb(7),n.yc("badge",t.groupBadgeCode)("isGroup",!0),n.Kb(2),n.Xc(n.uc(14,16,"group.members.members","count",t.groupMembersCount)),n.Kb(2),n.yc("ngIf",t.groupMembershipRequestsCount>0),n.Kb(3),n.yc("ngClass",n.Ec(26,lI,0===t.groupType,1===t.groupType,2===t.groupType)),n.Kb(1),n.Xc(t.groupName),n.Kb(2),n.Xc(n.uc(22,20,"group.created",n.Bc(30,hI),n.Dc(31,uI,t.groupCreationDate,t.groupOwnerName))),n.Kb(3),n.Xc(t.groupDescription),n.Kb(2),n.Xc(n.sc(27,24,"group.linktobase")),n.Kb(2),n.yc("ngIf",t.isOwner),n.Kb(2),n.yc("ngIf",1===t.groupMembershipType),n.Kb(1),n.yc("ngIf",0===t.groupType&&0===t.groupMembershipType),n.Kb(1),n.yc("ngIf",1===t.groupType)}}let dI=(()=>{class t{constructor(t,e,s){this._ngZone=t,this._navigatorService=e,this._groupService=s,this._groupService.groupInfoComponent=this,this.clear()}clear(){this._ngZone.run(()=>{this._groupId=0,this._groupName=null,this._groupBadgeCode=null,this._groupDescription=null,this._groupType=-1,this._groupMembershipType=-1,this._groupCreationDate=null,this._groupOwnerName=null,this._groupMembersCount=0,this._groupMembershipRequestsCount=0,this._groupHomeRoomId=0,this._isOwner=!1})}goToHomeRoom(){this._navigatorService.goToRoom(this._groupHomeRoomId)}manage(){u.a.instance.createLinkEvent("groups/manage/"+this.groupId)}getMembers(t){this._groupService.getMembers(this._groupId,0,null,t?2:0)}join(){this.groupId&&0===this._groupMembershipType&&this._groupService.join(this.groupId)}leave(){this.groupId&&1===this._groupMembershipType&&!this.isOwner&&this._groupService.removeMember(this.groupId,u.a.instance.sessionDataManager.userId)}confirmLeave(){return[u.a.instance.localization.getValue("group.leaveconfirm.title"),u.a.instance.localization.getValue("group.leaveconfirm.desc"),[new eu("group.leave",()=>{u.a.instance.communication.connection.send(new eI.a(this.groupId,u.a.instance.sessionDataManager.userId))},["btn-danger"]),new eu("generic.close",()=>{},["btn-primary"])]]}get visible(){return this._groupId>0}get groupId(){return this._groupId}set groupId(t){this._groupId=t}get groupName(){return this._groupName}set groupName(t){this._groupName=t}get groupBadgeCode(){return this._groupBadgeCode}set groupBadgeCode(t){this._groupBadgeCode=t}get groupDescription(){return this._groupDescription}set groupDescription(t){this._groupDescription=t}get groupType(){return this._groupType}set groupType(t){this._groupType=t}get groupMembershipType(){return this._groupMembershipType}set groupMembershipType(t){this._groupMembershipType=t}get groupCreationDate(){return this._groupCreationDate}set groupCreationDate(t){this._groupCreationDate=t}get groupOwnerName(){return this._groupOwnerName}set groupOwnerName(t){this._groupOwnerName=t}get groupMembersCount(){return this._groupMembersCount}set groupMembersCount(t){this._groupMembersCount=t}get groupMembershipRequestsCount(){return this._groupMembershipRequestsCount}set groupMembershipRequestsCount(t){this._groupMembershipRequestsCount=t}get groupHomeRoomId(){return this._groupHomeRoomId}set groupHomeRoomId(t){this._groupHomeRoomId=t}get isOwner(){return this._isOwner}set isOwner(t){this._isOwner=t}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(n.H),n.Yb(Kh),n.Yb(u_))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-group-info-component"]],decls:1,vars:1,consts:[["class","nitro-group-info-component","dragHandle",".drag-handler",3,"bringToTop","draggable",4,"ngIf"],["dragHandle",".drag-handler",1,"nitro-group-info-component",3,"bringToTop","draggable"],[1,"card"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"d-flex","flex-row","justify-content-between","w-100","mb-2"],[1,"mr-3"],[3,"badge","isGroup"],[1,"group-members-count","mt-3","text-center",3,"click"],["class","group-members-count mt-1 text-center",3,"click",4,"ngIf"],[1,"w-100"],[1,"fas","mr-2",3,"ngClass"],[1,"small","mb-2"],[1,"small","mb-3"],[1,"btn","btn-primary","btn-sm","mt-1",3,"click"],["class","btn btn-primary btn-sm mt-2",3,"click",4,"ngIf"],[1,"mt-3"],["class","btn btn-danger btn-block",3,"disabled","click",4,"ngIf"],["class","btn btn-success btn-block",3,"click",4,"ngIf"],[4,"ngIf"],[1,"group-members-count","mt-1","text-center",3,"click"],[1,"btn","btn-primary","btn-sm","mt-2",3,"click"],[1,"btn","btn-danger","btn-block",3,"disabled","click"],[1,"btn","btn-success","btn-block",3,"click"],["class","btn btn-primary disabled btn-block","disabled","",4,"ngIf"],["disabled","",1,"btn","btn-primary","disabled","btn-block"]],template:function(t,e){1&t&&n.Uc(0,_I,33,34,"div",0),2&t&&n.yc("ngIf",e.visible)},directives:[m.n,Dr,Kr,cl,m.l],pipes:[ui],encapsulation:2}),t})();function gI(t,e){1&t&&(n.dc(0,"option",25),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"group.members.search.pending")))}function mI(t,e){if(1&t&&n.Zb(0,"i",33),2&t){const t=n.qc().$implicit,e=n.qc(2);n.yc("ngClass",e.getRankIcon(t.rank))}}function pI(t,e){if(1&t){const t=n.ec();n.dc(0,"div",34),n.nc("click",function(){n.Lc(t);const e=n.qc().$implicit;return n.qc(2).removeOrDeclineMember(e.id,e.rank)}),n.Zb(1,"i",6),n.cc()}}function fI(t,e){1&t&&(n.dc(0,"button",35),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"group.members.owner")))}function EI(t,e){if(1&t){const t=n.ec();n.dc(0,"span",34),n.nc("click",function(){n.Lc(t);const e=n.qc(2).$implicit;return n.qc(2).takeAdmin(e.id)}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"group.members.removerights")))}function SI(t,e){if(1&t){const t=n.ec();n.dc(0,"span",34),n.nc("click",function(){n.Lc(t);const e=n.qc(2).$implicit;return n.qc(2).giveAdmin(e.id)}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"group.members.giverights")))}function bI(t,e){if(1&t){const t=n.ec();n.dc(0,"span",34),n.nc("click",function(){n.Lc(t);const e=n.qc(2).$implicit;return n.qc(2).acceptMembership(e.id)}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"group.members.accept")))}function vI(t,e){if(1&t&&(n.dc(0,"button",35),n.Uc(1,EI,3,3,"span",31),n.Uc(2,SI,3,3,"span",31),n.Uc(3,bI,3,3,"span",31),n.cc()),2&t){const t=n.qc().$implicit;n.Kb(1),n.yc("ngIf",1===t.rank),n.Kb(1),n.yc("ngIf",2===t.rank),n.Kb(1),n.yc("ngIf",3===t.rank)}}function II(t,e){if(1&t){const t=n.ec();n.dc(0,"div",26),n.dc(1,"div",27),n.dc(2,"div",28),n.dc(3,"div",29),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc(2).openProfile(s.id)}),n.Uc(4,mI,1,1,"i",30),n.Wc(5),n.cc(),n.Uc(6,pI,2,0,"div",31),n.cc(),n.Uc(7,fI,3,3,"button",32),n.Uc(8,vI,4,3,"button",32),n.cc(),n.cc()}if(2&t){const t=e.$implicit,s=n.qc(2);n.Kb(4),n.yc("ngIf",t.rank<3),n.Kb(1),n.Xc(t.name),n.Kb(1),n.yc("ngIf",s.admin&&t.rank>0),n.Kb(1),n.yc("ngIf",0===t.rank),n.Kb(1),n.yc("ngIf",s.admin&&t.id!==s.myId&&0!==t.rank)}}const RI=function(){return["amount","page","totalPages"]},TI=function(t,e,s){return[t,e,s]};function yI(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"div",3),n.dc(3,"h6",4),n.Wc(4),n.rc(5,"translate"),n.cc(),n.dc(6,"button",5),n.nc("click",function(){return n.Lc(t),n.qc().clear()}),n.Zb(7,"i",6),n.cc(),n.cc(),n.dc(8,"div",7),n.dc(9,"div",8),n.dc(10,"div",9),n.Zb(11,"nitro-badge",10),n.cc(),n.dc(12,"div",11),n.dc(13,"input",12),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().query=e})("keyup.enter",function(){return n.Lc(t),n.qc().searchMembers()}),n.rc(14,"translate"),n.cc(),n.dc(15,"select",13),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().level=e})("ngModelChange",function(){return n.Lc(t),n.qc().searchMembers()}),n.dc(16,"option",14),n.Wc(17),n.rc(18,"translate"),n.cc(),n.dc(19,"option",15),n.Wc(20),n.rc(21,"translate"),n.cc(),n.Uc(22,gI,3,3,"option",16),n.cc(),n.cc(),n.cc(),n.dc(23,"div",17),n.dc(24,"div",18),n.Uc(25,II,9,5,"div",19),n.cc(),n.cc(),n.dc(26,"div",20),n.dc(27,"button",21),n.nc("click",function(){return n.Lc(t),n.qc().previousPage()}),n.Zb(28,"i",22),n.cc(),n.dc(29,"div",23),n.Wc(30),n.rc(31,"translate"),n.cc(),n.dc(32,"button",21),n.nc("click",function(){return n.Lc(t),n.qc().nextPage()}),n.Zb(33,"i",24),n.cc(),n.cc(),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(4),n.Xc(n.uc(5,13,"group.members.title","groupName",t.groupName)),n.Kb(7),n.yc("badge",t.groupBadgeCode)("isGroup",!0),n.Kb(2),n.yc("placeholder",n.sc(14,17,"group.members.searchinfo"))("ngModel",t.query),n.Kb(2),n.yc("ngModel",t.level),n.Kb(2),n.Xc(n.sc(18,19,"group.members.search.all")),n.Kb(3),n.Xc(n.sc(21,21,"group.members.search.admins")),n.Kb(2),n.yc("ngIf",t.admin),n.Kb(3),n.yc("ngForOf",t.result),n.Kb(2),n.yc("disabled",0===t.pageIndex),n.Kb(3),n.Xc(n.uc(31,23,"group.members.pageinfo",n.Bc(27,RI),n.Ec(28,TI,t.totalMembersCount,t.pageIndex+1,t.totalPages))),n.Kb(2),n.yc("disabled",t.pageIndex+1===t.totalPages)}}let OI=(()=>{class t{constructor(t,e){this._ngZone=t,this._groupService=e,this._groupService.groupMembersComponent=this,this.clear()}clear(){this._ngZone.run(()=>{this._groupId=0,this._groupName=null,this._groupBadgeCode=null,this._totalMembersCount=0,this._result=[],this._admin=!1,this._pageSize=1,this._pageIndex=0,this.level="0",this.query=null})}getMembers(){this._groupService.getMembers(this._groupId,this._pageIndex,this.query,parseInt(this.level))}searchMembers(){this._ngZone.run(()=>{this._pageSize=1,this._pageIndex=0,this._totalMembersCount=0}),this.getMembers()}nextPage(){this._pageIndex+1!==this.totalPages&&(this._pageIndex++,this.getMembers())}previousPage(){0!==this._pageIndex&&(this._pageIndex--,this.getMembers())}giveAdmin(t){this._groupId&&this._admin&&(this._groupService.giveAdmin(this._groupId,t),this.getMembers())}takeAdmin(t){this._groupId&&this._admin&&(this._groupService.takeAdmin(this._groupId,t),this.getMembers())}acceptMembership(t){this._groupId&&this._admin&&(this._groupService.acceptMembership(this._groupId,t),this.getMembers())}removeOrDeclineMember(t,e){this._groupId&&this._admin&&(3===e?this._groupService.declineMembership(this._groupId,t):(this._groupService.removeMember(this._groupId,t),this.getMembers()))}confirmRemove(t,e){const s=u.a.instance.localization.getValue("group.kickconfirm.title");let n=null;return n=e?u.a.instance.localization.getValueWithParameters("group.kickconfirm.desc",["user","amount"],["<b>"+t+"</b>","<b>"+e+"</b>"]):u.a.instance.localization.getValueWithParameter("group.kickconfirm_nofurni.desc","user","<b>"+t+"</b>"),[s,n,[new eu("group.kickconfirm.title",()=>{u.a.instance.communication.connection.send(new eI.a(this.groupId,t)),this.getMembers()},["btn-danger"]),new eu("generic.close",()=>{},["btn-primary"])]]}openProfile(t){this._groupService.openProfile(t)}getRankIcon(t){return 0===t?"fas fa-crown":1===t?"fas fa-star":"far fa-star"}get visible(){return this._groupId>0}get groupId(){return this._groupId}set groupId(t){this._groupId=t}get groupName(){return this._groupName}set groupName(t){this._groupName=t}get groupBadgeCode(){return this._groupBadgeCode}set groupBadgeCode(t){this._groupBadgeCode=t}get totalMembersCount(){return this._totalMembersCount}set totalMembersCount(t){this._totalMembersCount=t}get result(){return this._result}set result(t){this._result=t}get admin(){return this._admin}set admin(t){this._admin=t}get pageSize(){return this._pageSize}set pageSize(t){this._pageSize=t}get pageIndex(){return this._pageIndex}set pageIndex(t){this._pageIndex=t}get totalPages(){return Math.ceil(this._totalMembersCount/this._pageSize)}get myId(){return u.a.instance.sessionDataManager.userId}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(n.H),n.Yb(u_))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-group-members-component"]],decls:1,vars:1,consts:[["class","nitro-group-members-component","dragHandle",".drag-handler",3,"bringToTop","draggable",4,"ngIf"],["dragHandle",".drag-handler",1,"nitro-group-members-component",3,"bringToTop","draggable"],[1,"card"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"d-flex","flex-row","justify-content-between","w-100","mb-2"],[1,"mr-3"],[3,"badge","isGroup"],[1,"w-100"],["type","text",1,"form-control","form-control-sm","mb-1",3,"placeholder","ngModel","ngModelChange","keyup.enter"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","2",4,"ngIf"],[1,"grid-container","mt-3"],[1,"grid-items","grid-3"],["class","d-flex flex-row justify-content-between item-detail",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","justify-content-between","mt-3"],[1,"btn","btn-primary","btn-sm",3,"disabled","click"],[1,"fas","fa-chevron-left"],[1,"text-center","w-100","pagination-counter"],[1,"fas","fa-chevron-right"],["value","2"],[1,"d-flex","flex-row","justify-content-between","item-detail"],[1,"bg-emperor","w-100","p-2","rounded"],[1,"d-flex","flex-row","justify-content-between"],[1,"w-100",3,"click"],["class","mr-2",3,"ngClass",4,"ngIf"],[3,"click",4,"ngIf"],["class","btn btn-primary btn-sm w-100 mt-1",4,"ngIf"],[1,"mr-2",3,"ngClass"],[3,"click"],[1,"btn","btn-primary","btn-sm","w-100","mt-1"]],template:function(t,e){1&t&&n.Uc(0,yI,34,32,"div",0),2&t&&n.yc("ngIf",e.visible)},directives:[m.n,Dr,Kr,cl,ur.b,ur.l,ur.n,ur.t,ur.o,ur.v,m.m,m.l],pipes:[ui],encapsulation:2}),t})();function CI(t,e){if(1&t){const t=n.ec();n.dc(0,"nitro-group-manager-tab-info-component",18),n.nc("groupSettingsChange",function(e){return n.Lc(t),n.qc(2).groupSettings=e}),n.cc()}if(2&t){const t=n.qc(2);n.yc("groupSettings",t.groupSettings)("showNameError",t.showNameError)("showDescriptionError",t.showDescriptionError)}}function AI(t,e){if(1&t){const t=n.ec();n.dc(0,"nitro-group-creator-tab-badge-component",19),n.nc("groupSettingsChange",function(e){return n.Lc(t),n.qc(2).groupSettings=e}),n.cc()}if(2&t){const t=n.qc(2);n.yc("groupSettings",t.groupSettings)("setDefaultValues",!1)}}function MI(t,e){if(1&t){const t=n.ec();n.dc(0,"nitro-group-creator-tab-colors-component",19),n.nc("groupSettingsChange",function(e){return n.Lc(t),n.qc(2).groupSettings=e}),n.cc()}if(2&t){const t=n.qc(2);n.yc("groupSettings",t.groupSettings)("setDefaultValues",!1)}}function wI(t,e){if(1&t){const t=n.ec();n.dc(0,"nitro-group-manager-tab-preferences-component",20),n.nc("groupSettingsChange",function(e){return n.Lc(t),n.qc(2).groupSettings=e}),n.cc()}if(2&t){const t=n.qc(2);n.yc("groupSettings",t.groupSettings)}}const UI=function(t){return{active:t}};function DI(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"div",3),n.dc(3,"h6",4),n.Wc(4),n.rc(5,"translate"),n.cc(),n.dc(6,"button",5),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(7,"i",6),n.cc(),n.cc(),n.dc(8,"div",7),n.dc(9,"div",8),n.dc(10,"button",9),n.nc("click",function(){return n.Lc(t),n.qc().setTab(1)}),n.Wc(11),n.rc(12,"translate"),n.cc(),n.dc(13,"button",9),n.nc("click",function(){return n.Lc(t),n.qc().setTab(2)}),n.Wc(14),n.rc(15,"translate"),n.cc(),n.dc(16,"button",9),n.nc("click",function(){return n.Lc(t),n.qc().setTab(3)}),n.Wc(17),n.rc(18,"translate"),n.cc(),n.dc(19,"button",9),n.nc("click",function(){return n.Lc(t),n.qc().setTab(4)}),n.Wc(20),n.rc(21,"translate"),n.cc(),n.cc(),n.Uc(22,CI,1,3,"nitro-group-manager-tab-info-component",10),n.Uc(23,AI,1,2,"nitro-group-creator-tab-badge-component",11),n.Uc(24,MI,1,2,"nitro-group-creator-tab-colors-component",11),n.Uc(25,wI,1,1,"nitro-group-manager-tab-preferences-component",12),n.dc(26,"div",13),n.dc(27,"div",14),n.dc(28,"button",15),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Wc(29),n.rc(30,"translate"),n.cc(),n.dc(31,"button",16),n.nc("click",function(){return n.Lc(t),n.qc().delete()}),n.Wc(32),n.rc(33,"translate"),n.cc(),n.cc(),n.dc(34,"button",17),n.nc("click",function(){return n.Lc(t),n.qc().save()}),n.Wc(35),n.rc(36,"translate"),n.cc(),n.cc(),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(4),n.Xc(n.sc(5,16,"group.window.title")),n.Kb(6),n.yc("ngClass",n.Cc(32,UI,1===t.currentTab)),n.Kb(1),n.Xc(n.sc(12,18,"group.edit.tab.1")),n.Kb(2),n.yc("ngClass",n.Cc(34,UI,2===t.currentTab)),n.Kb(1),n.Xc(n.sc(15,20,"group.edit.tab.2")),n.Kb(2),n.yc("ngClass",n.Cc(36,UI,3===t.currentTab)),n.Kb(1),n.Xc(n.sc(18,22,"group.edit.tab.3")),n.Kb(2),n.yc("ngClass",n.Cc(38,UI,4===t.currentTab)),n.Kb(1),n.Xc(n.sc(21,24,"group.edit.tab.5")),n.Kb(2),n.yc("ngIf",1===t.currentTab),n.Kb(1),n.yc("ngIf",2===t.currentTab),n.Kb(1),n.yc("ngIf",3===t.currentTab),n.Kb(1),n.yc("ngIf",4===t.currentTab),n.Kb(4),n.Xc(n.sc(30,26,"generic.cancel")),n.Kb(3),n.Xc(n.sc(33,28,"group.delete")),n.Kb(3),n.Xc(n.sc(36,30,"save"))}}let NI=(()=>{class t{constructor(t,e,s){this._groupService=t,this._notificationService=e,this._ngZone=s,this._groupService.groupManagerComponent=this,this._clear()}_clear(){this.groupSettings=new $u,this.visible=!1,this._currentTab=1,this._showNameError=!1,this._showDescriptionError=!1}ngOnInit(){this._clear()}ngOnDestroy(){this._clear()}load(t){this._clear(),this._ngZone.run(()=>{this.groupSettings.id=t.id,this.groupSettings.name=t.title,this.groupSettings.description=t.description,this.groupSettings.roomId=t.roomId.toString(),this.groupSettings.badgeParts=t.badgeParts,this.groupSettings.colorA=t.colorA,this.groupSettings.colorB=t.colorB,this.groupSettings.state=t.state,this.groupSettings.canMembersDecorate=t.canMembersDecorate,this.visible=!0})}setTab(t){this._currentTab=t}hide(){this.visible=!1}save(){this._showNameError=0===this.groupSettings.name.length||this.groupSettings.name.length>29,this._showDescriptionError=this.groupSettings.description.length>254,this._showNameError||this._showDescriptionError?this._currentTab=1:this._groupService.save(this.groupSettings)}delete(){const t=u.a.instance.localization.getValue("group.deleteconfirm.title"),e=u.a.instance.localization.getValue("group.deleteconfirm.desc"),s=[new eu("group.delete",()=>{this._groupService.deleteGroup(this.groupSettings.id),this.hide(),this._groupService.groupInfoComponent.clear()},["btn-danger"]),new eu("generic.close",()=>{},["btn-primary"])];this._notificationService.alertWithChoices(e,s,t)}get currentTab(){return this._currentTab}get showNameError(){return this._showNameError}get showDescriptionError(){return this._showDescriptionError}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(u_),n.Yb(es),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-group-manager-component"]],decls:1,vars:1,consts:[["class","nitro-group-manager-component","dragHandle",".drag-handler",3,"draggable","bringToTop",4,"ngIf"],["dragHandle",".drag-handler",1,"nitro-group-manager-component",3,"draggable","bringToTop"],[1,"card"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"btn-group","mb-3","w-100"],[1,"btn","btn-primary",3,"ngClass","click"],[3,"groupSettings","showNameError","showDescriptionError","groupSettingsChange",4,"ngIf"],[3,"groupSettings","setDefaultValues","groupSettingsChange",4,"ngIf"],[3,"groupSettings","groupSettingsChange",4,"ngIf"],[1,"d-flex","flex-row","justify-content-between"],[1,"btn-group"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-success",3,"click"],[3,"groupSettings","showNameError","showDescriptionError","groupSettingsChange"],[3,"groupSettings","setDefaultValues","groupSettingsChange"],[3,"groupSettings","groupSettingsChange"]],template:function(t,e){1&t&&n.Uc(0,DI,37,40,"div",0),2&t&&n.yc("ngIf",e.visible)},encapsulation:2}),t})(),LI=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-group-main-component"]],decls:3,vars:0,template:function(t,e){1&t&&(n.Zb(0,"nitro-group-info-component"),n.Zb(1,"nitro-group-members-component"),n.Zb(2,"nitro-group-manager-component"))},directives:[dI,OI,NI],encapsulation:2}),t})();var PI=s("Y1Bc"),xI=s("owLk");let FI=(()=>{class t{constructor(t,e){this._notificationService=t,this._ngZone=e,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._messages&&this.unregisterMessages(),this._messages=[new xI.a(this.onUserInfoEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)}unregisterMessages(){if(this._messages&&this._messages.length)for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t)}load(t){u.a.instance.communication.connection.send(new PI.a(t))}onUserInfoEvent(t){if(!t)return;const e=t.getParser();e&&e.data&&this._ngZone.run(()=>this._currentUserInfo=e.data)}get currentUserInfo(){return this._currentUserInfo}}return t.\u0275fac=function(e){return new(e||t)(n.kc(es),n.kc(n.H))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})();function kI(t,e){if(1&t&&(n.dc(0,"span",16),n.Wc(1),n.cc()),2&t){const t=n.qc(2);n.Kb(1),n.Xc(t.selectedUser.username)}}function WI(t,e){1&t&&n.Zb(0,"nitro-mod-tool-room-component")}function BI(t,e){1&t&&n.Zb(0,"nitro-mod-tool-room-chatlogs-component")}function VI(t,e){if(1&t&&n.Zb(0,"nitro-mod-tool-user-component",17),2&t){const t=n.qc(2);n.yc("user",t.clickedUser)}}function GI(t,e){if(1&t&&n.Zb(0,"nitro-mod-tool-mod-action-user-component",17),2&t){const t=n.qc(2);n.yc("user",t.clickedUser)}}function KI(t,e){if(1&t&&n.Zb(0,"nitro-mod-tool-user-visited-rooms-component",17),2&t){const t=n.qc(2);n.yc("user",t.clickedUser)}}function HI(t,e){if(1&t&&n.Zb(0,"nitro-mod-tool-user-send-message-component",17),2&t){const t=n.qc(2);n.yc("user",t.clickedUser)}}function jI(t,e){if(1&t&&n.Zb(0,"nitro-mod-tool-user-chatlogs-component",17),2&t){const t=n.qc(2);n.yc("user",t.clickedUser)}}function zI(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"h6",3),n.Wc(3,"Mod tools"),n.cc(),n.cc(),n.dc(4,"div",4),n.dc(5,"div",5),n.dc(6,"button",6),n.nc("click",function(){return n.Lc(t),n.qc().openRoomTool()}),n.Zb(7,"i",7),n.Wc(8," Room Tool "),n.cc(),n.dc(9,"button",6),n.nc("click",function(){return n.Lc(t),n.qc().openChatlogTool()}),n.Zb(10,"i",8),n.Wc(11," Chatlog Tool "),n.cc(),n.dc(12,"button",6),n.nc("click",function(){return n.Lc(t),n.qc().selectUser()}),n.Zb(13,"i",9),n.Wc(14," User: "),n.Uc(15,kI,2,1,"span",10),n.cc(),n.dc(16,"button",11),n.nc("click",function(){return n.Lc(t),n.qc().toggleReportsTool()}),n.Zb(17,"i",12),n.Wc(18," Reports Tool "),n.cc(),n.cc(),n.cc(),n.Uc(19,WI,1,0,"nitro-mod-tool-room-component",13),n.Uc(20,BI,1,0,"nitro-mod-tool-room-chatlogs-component",13),n.Uc(21,VI,1,1,"nitro-mod-tool-user-component",14),n.dc(22,"nitro-mod-tool-reports-component",15),n.nc("visibleChange",function(e){return n.Lc(t),n.qc().reportsToolVisible=e}),n.cc(),n.Uc(23,GI,1,1,"nitro-mod-tool-mod-action-user-component",14),n.Uc(24,KI,1,1,"nitro-mod-tool-user-visited-rooms-component",14),n.Uc(25,HI,1,1,"nitro-mod-tool-user-send-message-component",14),n.Uc(26,jI,1,1,"nitro-mod-tool-user-chatlogs-component",14),n.cc()}if(2&t){const t=n.qc();n.yc("topCenter",!1),n.Kb(6),n.yc("disabled",!t.hasRoomInfo()),n.Kb(3),n.yc("disabled",!t.hasRoomInfo()),n.Kb(3),n.yc("disabled",!t.selectedUser),n.Kb(3),n.yc("ngIf",t.selectedUser),n.Kb(4),n.yc("ngIf",t.showRoomTool),n.Kb(1),n.yc("ngIf",t.showRoomChatlogs),n.Kb(1),n.yc("ngIf",t.userToolVisible),n.Kb(1),n.yc("visible",t.reportsToolVisible),n.Kb(1),n.yc("ngIf",t.showModActionOnUser),n.Kb(1),n.yc("ngIf",t.showVisitedRoomsForUser),n.Kb(1),n.yc("ngIf",t.showSendUserMessage),n.Kb(1),n.yc("ngIf",t.showSendUserChatlogs)}}let YI=(()=>{class t{constructor(t,e,s,n){this._settingsService=t,this._modToolService=e,this._modToolsUserService=s,this._ngZone=n,this.visible=!1,this.roomToolVisible=!1,this.chatlogToolVisible=!1,this.userToolVisible=!1,this.reportsToolVisible=!1,this.clickedUser=null}ngOnInit(){this._modToolService.component=this}ngOnDestroy(){this._modToolService.component=null}toggleRoomTool(){this.roomToolVisible=!this.roomToolVisible}openRoomTool(){this._modToolService.openRoomTool()}openChatlogTool(){this._modToolService.openChatlogTool()}selectUser(){this.clickedUser=this.selectedUser,this._modToolsUserService.load(this.selectedUser.id),this.userToolVisible=!0}toggleReportsTool(){this.reportsToolVisible=!this.reportsToolVisible}hasRoomInfo(){return!!this._modToolService.currentRoom}get users(){return this._modToolService.users}get selectedUser(){return this._modToolService.selectedUser}get showModActionOnUser(){return this._modToolService.showModActionOnUser}get showVisitedRoomsForUser(){return this._modToolService.showVisitedRoomsForUser}get showSendUserMessage(){return this._modToolService.showSendUserMessage}get showSendUserChatlogs(){return this._modToolService.showSendUserChatlogs}get showRoomChatlogs(){return this._modToolService.showRoomChatLogs}get showRoomTool(){return this._modToolService.showRoomTools}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(g),n.Yb(nn),n.Yb(FI),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-mod-tool-main-component"]],inputs:{visible:"visible"},decls:1,vars:1,consts:[["class","nitro-mod-tool-component card",3,"bringToTop","draggable","topCenter",4,"ngIf"],[1,"nitro-mod-tool-component","card",3,"bringToTop","draggable","topCenter"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],[1,"d-flex","flex-column","p-3"],[1,"btn-group","btn-group-vertical","w-100"],[1,"btn","btn-sm","btn-secondary",3,"disabled","click"],[1,"icon","modtool-room-icon","mr-1"],[1,"icon","modtool-chatlog-icon","mr-1"],[1,"icon","modtool-user-icon","mr-1"],["class","username",4,"ngIf"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"icon","modtool-reports-icon","mr-1"],[4,"ngIf"],[3,"user",4,"ngIf"],[3,"visible","visibleChange"],[1,"username"],[3,"user"]],template:function(t,e){1&t&&n.Uc(0,zI,27,13,"div",0),2&t&&n.yc("ngIf",e.visible)},encapsulation:2}),t})();const qI=function(t){return{background:t}},XI=function(t){return{backgroundImage:t}};let ZI=(()=>{class t{constructor(t){this.sessionService=t,this._background=u.a.instance.core.configuration.interpolate(u.a.instance.getConfiguration("hotelview.images").background),this._backgroundColour=u.a.instance.getConfiguration("hotelview.images")["background.colour"],this._sun=u.a.instance.core.configuration.interpolate(u.a.instance.getConfiguration("hotelview.images").sun),this._drape=u.a.instance.core.configuration.interpolate(u.a.instance.getConfiguration("hotelview.images").drape),this._left=u.a.instance.core.configuration.interpolate(u.a.instance.getConfiguration("hotelview.images").left),this._right=u.a.instance.core.configuration.interpolate(u.a.instance.getConfiguration("hotelview.images").right),this._rightRepeat=u.a.instance.core.configuration.interpolate(u.a.instance.getConfiguration("hotelview.images")["right.repeat"])}get figure(){return this.sessionService.figure}get background(){return this._background||null}get backgroundColour(){return this._backgroundColour||null}get sun(){return this._sun||null}get drape(){return this._drape||null}get left(){return this._left||null}get right(){return this._right||null}get rightRepeat(){return this._rightRepeat||null}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(Bn))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-hotelview-component"]],decls:7,vars:11,consts:[[1,"nitro-hotelview-component",3,"ngStyle"],[1,"background","position-absolute",3,"ngStyle"],["image-placeholder","",1,"sun","position-absolute",3,"src"],["image-placeholder","",1,"drape","position-absolute",3,"src"],["image-placeholder","",1,"left","position-absolute",3,"src"],["image-placeholder","",1,"rightRepeat","position-absolute",3,"src"],["image-placeholder","",1,"right","position-absolute",3,"src"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Zb(1,"div",1),n.Zb(2,"img",2),n.Zb(3,"img",3),n.Zb(4,"img",4),n.Zb(5,"img",5),n.Zb(6,"img",6),n.cc()),2&t&&(n.yc("ngStyle",n.Cc(7,qI,e.backgroundColour)),n.Kb(1),n.yc("ngStyle",n.Cc(9,XI,"url("+e.background+")")),n.Kb(1),n.yc("src",e.sun,n.Nc),n.Kb(1),n.yc("src",e.drape,n.Nc),n.Kb(1),n.yc("src",e.left,n.Nc),n.Kb(1),n.yc("src",e.rightRepeat,n.Nc),n.Kb(1),n.yc("src",e.right,n.Nc))},directives:[m.o,fa],encapsulation:2}),t})();function QI(t,e){1&t&&n.Zb(0,"nitro-hotelview-component")}let JI=(()=>{class t{constructor(t,e,s){this._notificationService=t,this._settingsService=e,this._ngZone=s,this.roomComponent=null,this._landingViewVisible=!0,this.onRoomEngineEvent=this.onRoomEngineEvent.bind(this),this.onInterstitialEvent=this.onInterstitialEvent.bind(this),this.onRoomEngineObjectEvent=this.onRoomEngineObjectEvent.bind(this),this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.onRoomErrorEvent=this.onRoomErrorEvent.bind(this),u.a.instance.addLinkEventTracker(this)}ngOnInit(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomEngine.events&&(u.a.instance.roomEngine.events.addEventListener(_.a.INITIALIZED,this.onRoomEngineEvent),u.a.instance.roomEngine.events.addEventListener(_.a.DISPOSED,this.onRoomEngineEvent),u.a.instance.roomEngine.events.addEventListener(_.a.ENGINE_INITIALIZED,this.onInterstitialEvent),u.a.instance.roomEngine.events.addEventListener(_.a.OBJECTS_INITIALIZED,this.onInterstitialEvent),u.a.instance.roomEngine.events.addEventListener(_.a.NORMAL_MODE,this.onInterstitialEvent),u.a.instance.roomEngine.events.addEventListener(_.a.GAME_MODE,this.onInterstitialEvent),u.a.instance.roomEngine.events.addEventListener(R.ROOM_ZOOM,this.onRoomEngineEvent),u.a.instance.roomEngine.events.addEventListener(v.a.ROOM_BACKGROUND_COLOR,this.onRoomEngineEvent),u.a.instance.roomEngine.events.addEventListener(f.a.ROOM_COLOR,this.onRoomEngineEvent),u.a.instance.roomEngine.events.addEventListener(E.a.ROOM_COLOR,this.onRoomEngineEvent),u.a.instance.roomEngine.events.addEventListener(S.a.SELECTED,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(S.a.DESELECTED,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(S.a.ADDED,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(S.a.REMOVED,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(S.a.PLACED,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(S.a.REQUEST_MOVE,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(S.a.REQUEST_ROTATE,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(S.a.MOUSE_ENTER,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(S.a.MOUSE_LEAVE,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(b.a.OPEN_WIDGET,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(b.a.CLOSE_WIDGET,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(b.a.REQUEST_INTERNAL_LINK,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(b.a.REQUEST_ROOM_LINK,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(b.a.REQUEST_TROPHY,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(b.a.REQUEST_CREDITFURNI,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(I.a.OPEN_FURNI_CONTEXT_MENU,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(b.a.REQUEST_STICKIE,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(b.a.REQUEST_DIMMER,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(b.a.REQUEST_BACKGROUND_COLOR,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(b.a.REQUEST_FRIEND_FURNITURE_ENGRAVING,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(b.a.REQUEST_MANNEQUIN,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(b.a.REQUEST_PRESENT,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(b.a.REQUEST_HIGH_SCORE_DISPLAY,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(b.a.REQUEST_HIDE_HIGH_SCORE_DISPLAY,this.onRoomEngineObjectEvent)),u.a.instance.roomSessionManager.events&&(u.a.instance.roomSessionManager.events.addEventListener(M.a.CREATED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(M.a.STARTED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(M.a.ROOM_DATA,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(M.a.ENDED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(T.a.CHAT_EVENT,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(T.a.FLOOD_EVENT,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(y.a.RSDE_DANCE,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(D.a.RSUBE_BADGES,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(C.a.DOORBELL,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(C.a.RSDE_REJECTED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(C.a.RSDE_ACCEPTED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(O.a.RSDPE_PRESETS,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(w.a.RSFRE_FRIEND_REQUEST,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(U.a.RSPE_PRESENT_OPENED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(A.a.RSEME_KICKED,this.onRoomErrorEvent),u.a.instance.roomSessionManager.events.addEventListener(A.a.RSEME_PETS_FORBIDDEN_IN_HOTEL,this.onRoomErrorEvent),u.a.instance.roomSessionManager.events.addEventListener(A.a.RSEME_PETS_FORBIDDEN_IN_FLAT,this.onRoomErrorEvent),u.a.instance.roomSessionManager.events.addEventListener(A.a.RSEME_MAX_PETS,this.onRoomErrorEvent),u.a.instance.roomSessionManager.events.addEventListener(A.a.RSEME_MAX_NUMBER_OF_OWN_PETS,this.onRoomErrorEvent),u.a.instance.roomSessionManager.events.addEventListener(A.a.RSEME_NO_FREE_TILES_FOR_PET,this.onRoomErrorEvent),u.a.instance.roomSessionManager.events.addEventListener(A.a.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET,this.onRoomErrorEvent),u.a.instance.roomSessionManager.events.addEventListener(A.a.RSEME_BOTS_FORBIDDEN_IN_HOTEL,this.onRoomErrorEvent),u.a.instance.roomSessionManager.events.addEventListener(A.a.RSEME_BOTS_FORBIDDEN_IN_FLAT,this.onRoomErrorEvent),u.a.instance.roomSessionManager.events.addEventListener(A.a.RSEME_BOT_LIMIT_REACHED,this.onRoomErrorEvent),u.a.instance.roomSessionManager.events.addEventListener(A.a.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT,this.onRoomErrorEvent),u.a.instance.roomSessionManager.events.addEventListener(A.a.RSEME_BOT_NAME_NOT_ACCEPTED,this.onRoomErrorEvent))})}ngOnDestroy(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomEngine.events&&(u.a.instance.roomEngine.events.removeEventListener(_.a.INITIALIZED,this.onRoomEngineEvent),u.a.instance.roomEngine.events.removeEventListener(_.a.DISPOSED,this.onRoomEngineEvent),u.a.instance.roomEngine.events.removeEventListener(_.a.ENGINE_INITIALIZED,this.onInterstitialEvent),u.a.instance.roomEngine.events.removeEventListener(_.a.OBJECTS_INITIALIZED,this.onInterstitialEvent),u.a.instance.roomEngine.events.removeEventListener(_.a.NORMAL_MODE,this.onInterstitialEvent),u.a.instance.roomEngine.events.removeEventListener(_.a.GAME_MODE,this.onInterstitialEvent),u.a.instance.roomEngine.events.removeEventListener(R.ROOM_ZOOM,this.onRoomEngineEvent),u.a.instance.roomEngine.events.removeEventListener(v.a.ROOM_BACKGROUND_COLOR,this.onRoomEngineEvent),u.a.instance.roomEngine.events.removeEventListener(f.a.ROOM_COLOR,this.onRoomEngineEvent),u.a.instance.roomEngine.events.removeEventListener(E.a.ROOM_COLOR,this.onRoomEngineEvent),u.a.instance.roomEngine.events.removeEventListener(S.a.SELECTED,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(S.a.DESELECTED,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(S.a.ADDED,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(S.a.REMOVED,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(S.a.PLACED,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(S.a.REQUEST_MOVE,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(S.a.REQUEST_ROTATE,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(S.a.MOUSE_ENTER,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(S.a.MOUSE_LEAVE,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(b.a.OPEN_WIDGET,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(b.a.CLOSE_WIDGET,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(b.a.REQUEST_INTERNAL_LINK,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(b.a.REQUEST_ROOM_LINK,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(b.a.REQUEST_TROPHY,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(b.a.REQUEST_CREDITFURNI,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(I.a.OPEN_FURNI_CONTEXT_MENU,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(b.a.REQUEST_STICKIE,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(b.a.REQUEST_DIMMER,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(b.a.REQUEST_BACKGROUND_COLOR,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(b.a.REQUEST_FRIEND_FURNITURE_ENGRAVING,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(b.a.REQUEST_PRESENT,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(b.a.REQUEST_HIGH_SCORE_DISPLAY,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(b.a.REQUEST_HIDE_HIGH_SCORE_DISPLAY,this.onRoomEngineObjectEvent)),u.a.instance.roomSessionManager.events&&(u.a.instance.roomSessionManager.events.removeEventListener(M.a.CREATED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(M.a.STARTED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(M.a.ROOM_DATA,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(M.a.ENDED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(T.a.CHAT_EVENT,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(y.a.RSDE_DANCE,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(D.a.RSUBE_BADGES,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(C.a.DOORBELL,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(C.a.RSDE_REJECTED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(C.a.RSDE_ACCEPTED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(O.a.RSDPE_PRESETS,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(w.a.RSFRE_FRIEND_REQUEST,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(U.a.RSPE_PRESENT_OPENED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(A.a.RSEME_KICKED,this.onRoomErrorEvent),u.a.instance.roomSessionManager.events.removeEventListener(A.a.RSEME_PETS_FORBIDDEN_IN_HOTEL,this.onRoomErrorEvent),u.a.instance.roomSessionManager.events.removeEventListener(A.a.RSEME_PETS_FORBIDDEN_IN_FLAT,this.onRoomErrorEvent),u.a.instance.roomSessionManager.events.removeEventListener(A.a.RSEME_MAX_PETS,this.onRoomErrorEvent),u.a.instance.roomSessionManager.events.removeEventListener(A.a.RSEME_MAX_NUMBER_OF_OWN_PETS,this.onRoomErrorEvent),u.a.instance.roomSessionManager.events.removeEventListener(A.a.RSEME_NO_FREE_TILES_FOR_PET,this.onRoomErrorEvent),u.a.instance.roomSessionManager.events.removeEventListener(A.a.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET,this.onRoomErrorEvent),u.a.instance.roomSessionManager.events.removeEventListener(A.a.RSEME_BOTS_FORBIDDEN_IN_HOTEL,this.onRoomErrorEvent),u.a.instance.roomSessionManager.events.removeEventListener(A.a.RSEME_BOTS_FORBIDDEN_IN_FLAT,this.onRoomErrorEvent),u.a.instance.roomSessionManager.events.removeEventListener(A.a.RSEME_BOT_LIMIT_REACHED,this.onRoomErrorEvent),u.a.instance.roomSessionManager.events.removeEventListener(A.a.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT,this.onRoomErrorEvent),u.a.instance.roomSessionManager.events.removeEventListener(A.a.RSEME_BOT_NAME_NOT_ACCEPTED,this.onRoomErrorEvent))}),u.a.instance.removeLinkEventTracker(this)}ngAfterContentInit(){u.a.instance.communication.connection.onReady()}onRoomEngineEvent(t){if(!t)return;if(P.isRoomPreviewerId(t.roomId))return;const e=u.a.instance.roomSessionManager.getSession(t.roomId);if(e)switch(t.type){case _.a.INITIALIZED:return void(this.roomComponent&&(this.roomComponent.prepareRoom(e),u.a.instance.roomEngine.setActiveRoomId(t.roomId),this.roomComponent.createWidget(N.a.CHAT_WIDGET,dh),this.roomComponent.createWidget(N.a.INFOSTAND,Zl),this.roomComponent.createWidget(N.a.LOCATION_WIDGET,null),this.roomComponent.createWidget(N.a.INTERNAL_LINK,null),this.roomComponent.createWidget(N.a.ROOM_LINK,null),this.roomComponent.createWidget(N.a.CUSTOM_STACK_HEIGHT,La),this.roomComponent.createWidget(N.a.ROOM_DIMMER,Ka),this.roomComponent.createWidget(N.a.FURNI_STICKIE_WIDGET,Jc),this.roomComponent.createWidget(N.a.DOORBELL,$l),this.roomComponent.createWidget(N.a.FURNI_TROPHY_WIDGET,tl),this.roomComponent.createWidget(N.a.FURNI_CREDIT_WIDGET,Ua),this.roomComponent.createWidget(N.a.FURNITURE_CONTEXT_MENU,Ma),this.roomComponent.createWidget(N.a.ROOM_BACKGROUND_COLOR,da),this.roomComponent.createWidget(N.a.FRIEND_FURNI_CONFIRM,ja),this.roomComponent.createWidget(N.a.FRIEND_FURNI_ENGRAVING,Xa),this.roomComponent.createWidget(N.a.ROOM_TOOLS,Xh),this.roomComponent.createWidget(N.a.MANNEQUIN,zc),this.roomComponent.createWidget(N.a.FURNI_PRESENT_WIDGET,yc),this.roomComponent.createWidget(N.a.FRIEND_REQUEST,ca),this.roomComponent.createWidget(N.a.HIGH_SCORE_DISPLAY,Lc),this.roomComponent.roomSession.isSpectator||(this.roomComponent.createWidget(N.a.CHAT_INPUT_WIDGET,kr),this.roomComponent.createWidget(N.a.AVATAR_INFO,Ur),this.roomComponent.createWidget(N.a.FURNI_CHOOSER,$r),this.roomComponent.createWidget(N.a.USER_CHOOSER,na))));case _.a.DISPOSED:return void(this.roomComponent&&this.roomComponent.endRoom());case R.ROOM_ZOOM:{const e=t;let s=e.level<1?.5:1<<Math.floor(e.level)-1;return(e.forceFlip||e.asDelta)&&(s=e.level),void(this.roomComponent&&u.a.instance.roomEngine.setRoomInstanceRenderingCanvasScale(this.roomComponent.roomSession.roomId,this.roomComponent.getFirstCanvasId(),s,null,null,!1,e.asDelta))}case f.a.ROOM_COLOR:if(this.roomComponent){const e=t;e._Str_11464?this.roomComponent.setRoomColorizerColor(16711680,255):this.roomComponent.setRoomColorizerColor(e.color,e._Str_5123)}return;case E.a.ROOM_COLOR:return void(this.roomComponent&&this.roomComponent._Str_2485(t));case v.a.ROOM_BACKGROUND_COLOR:if(this.roomComponent){const e=t;e.enable?this.roomComponent.setRoomBackgroundColor(e.hue,e.saturation,e.lightness):this.roomComponent.setRoomBackgroundColor(0,0,0)}return}}onInterstitialEvent(t){t&&(t.type!==_.a.GAME_MODE&&t.type!==_.a.NORMAL_MODE||this.roomComponent&&this.roomComponent.onRoomEngineEvent(t))}onRoomEngineObjectEvent(t){this.roomComponent&&this.roomComponent.onRoomEngineObjectEvent(t)}onRoomErrorEvent(t){if(!t)return;let e,s="${error.title}";switch(t.type){case A.a.RSEME_MAX_PETS:e="${room.error.max_pets}";break;case A.a.RSEME_MAX_NUMBER_OF_OWN_PETS:e="${room.error.max_own_pets}";break;case A.a.RSEME_KICKED:e="${room.error.kicked}",s="${generic.alert.title}";break;case A.a.RSEME_PETS_FORBIDDEN_IN_HOTEL:e="${room.error.pets.forbidden_in_hotel}";break;case A.a.RSEME_PETS_FORBIDDEN_IN_FLAT:e="${room.error.pets.forbidden_in_flat}";break;case A.a.RSEME_NO_FREE_TILES_FOR_PET:e="${room.error.pets.no_free_tiles}";break;case A.a.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET:e="${room.error.pets.selected_tile_not_free}";break;case A.a.RSEME_BOTS_FORBIDDEN_IN_HOTEL:e="${room.error.bots.forbidden_in_hotel}";break;case A.a.RSEME_BOTS_FORBIDDEN_IN_FLAT:e="${room.error.bots.forbidden_in_flat}";break;case A.a.RSEME_BOT_LIMIT_REACHED:e="${room.error.max_bots}";break;case A.a.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT:e="${room.error.bots.selected_tile_not_free}";break;case A.a.RSEME_BOT_NAME_NOT_ACCEPTED:e="${room.error.bots.name.not.accepted}";break;default:return}this._notificationService.alert(e,s)}onRoomSessionEvent(t){if(t)switch(t.type){case M.a.CREATED:return this._ngZone.run(()=>{this._landingViewVisible=!1}),void u.a.instance.roomSessionManager.startSession(t.session);case M.a.STARTED:case M.a.ROOM_DATA:return;case M.a.ENDED:return this.roomComponent&&this.roomComponent.endRoom(),void this._ngZone.run(()=>{this._landingViewVisible=t.openLandingView});default:return void(this.roomComponent&&this.roomComponent.processEvent(t))}}linkReceived(t){const e=t.split("/");if(!(e.length<2))switch(e[1]){case"open":if(e.length>2)switch(e[2]){case"credits":break;default:L.a.openHabblet(e[2])}return}}get eventUrlPrefix(){return"habblet"}get landingViewVisible(){return this._landingViewVisible}get avatarEditorVisible(){return this._settingsService.avatarEditorVisible}get catalogVisible(){return this._settingsService.catalogVisible}get navigatorVisible(){return this._settingsService.navigatorVisible}get inventoryVisible(){return this._settingsService.inventoryVisible}get friendListVisible(){return this._settingsService.friendListVisible}get achievementsVisible(){return this._settingsService.achievementsVisible}get chatHistoryVisible(){return this._settingsService.chatHistoryVisible}get modToolVisible(){return u.a.instance.sessionDataManager.isModerator}get userSettingsVisible(){return this._settingsService.userSettingsVisible}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(es),n.Yb(g),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-main-component"]],viewQuery:function(t,e){if(1&t&&n.cd(ei,1),2&t){let t;n.Hc(t=n.oc())&&(e.roomComponent=t.first)}},decls:24,vars:12,consts:[[1,"nitro-main-component"],[1,"nitro-right-side"],[1,"d-flex","flex-column"],[3,"visible"],[4,"ngIf"],[3,"isInRoom"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Zb(1,"nitro-alert-center-component"),n.dc(2,"div",1),n.dc(3,"div",2),n.Zb(4,"nitro-purse-main-component"),n.Zb(5,"nitro-group-room-info-component"),n.Zb(6,"nitro-notification-center-component"),n.cc(),n.cc(),n.Zb(7,"nitro-achievements-main-component",3),n.Zb(8,"nitro-call-for-help-main-component"),n.Zb(9,"nitro-pedia-main-component"),n.Zb(10,"nitro-avatar-editor-main-component",3),n.Uc(11,QI,1,0,"nitro-hotelview-component",4),n.Zb(12,"nitro-toolbar-component",5),n.Zb(13,"nitro-friendlist-main-component",3),n.Zb(14,"nitro-catalog-main-component",3),n.Zb(15,"nitro-navigator-main-component",3),n.Zb(16,"nitro-inventory-main-component",3),n.Zb(17,"nitro-user-profile-component"),n.Zb(18,"nitro-chat-history-component",3),n.Zb(19,"nitro-user-settings-component",3),n.Zb(20,"nitro-wired-main-component"),n.Zb(21,"nitro-group-main-component"),n.Zb(22,"nitro-mod-tool-main-component",3),n.Zb(23,"nitro-room-component"),n.cc()),2&t&&(n.Kb(2),n.yc("@inOutAnimation",void 0),n.Kb(5),n.yc("visible",e.achievementsVisible),n.Kb(3),n.yc("visible",e.avatarEditorVisible),n.Kb(1),n.yc("ngIf",e.landingViewVisible),n.Kb(1),n.yc("isInRoom",!e.landingViewVisible),n.Kb(1),n.yc("visible",e.friendListVisible),n.Kb(1),n.yc("visible",e.catalogVisible),n.Kb(1),n.yc("visible",e.navigatorVisible),n.Kb(1),n.yc("visible",e.inventoryVisible),n.Kb(2),n.yc("visible",e.chatHistoryVisible),n.Kb(1),n.yc("visible",e.userSettingsVisible),n.Kb(3),n.yc("visible",e.modToolVisible))},directives:[du,Cu,E_,w_,rd,cd,dd,Dd,m.n,tg,og,gp,Gp,RE,iS,gS,TS,tI,LI,YI,ei,ZI],encapsulation:2,data:{animation:[Object(p.j)("inOutAnimation",[Object(p.i)(":enter",[Object(p.h)({top:"-100%"}),Object(p.e)("1s ease-out",Object(p.h)({top:0}))])])]}}),t})();function $I(t,e){if(1&t&&(n.dc(0,"div",7),n.Wc(1),n.cc()),2&t){const t=n.qc(2);n.Kb(1),n.Xc(t.message)}}function tR(t,e){1&t&&(n.dc(0,"div",8),n.Zb(1,"div"),n.Zb(2,"div"),n.Zb(3,"div"),n.Zb(4,"div"),n.cc())}function eR(t,e){if(1&t&&(n.dc(0,"div",3),n.Zb(1,"div",4),n.Uc(2,$I,2,1,"div",5),n.Uc(3,tR,5,0,"div",6),n.cc()),2&t){const t=n.qc();n.Kb(2),n.yc("ngIf",t.message&&t.message.length),n.Kb(1),n.yc("ngIf",!t.isError)}}function sR(t,e){1&t&&n.Zb(0,"nitro-main-component")}let nR=(()=>{class t{constructor(t,e){this._settingsService=t,this._ngZone=e,this.message="Getting Ready",this.percentage=0,this.hideProgress=!0,this.isLocalizationReady=!1,this.isAvatarRenderReady=!1,this.isError=!1,this._isReady=!1,this.onNitroEvent=this.onNitroEvent.bind(this)}ngOnInit(){this._ngZone.runOutsideAngular(()=>{if(!NitroConfig)throw new Error("NitroConfig is not defined!");(class{static isWebGLAvailable(){return d.utils.isWebGLSupported()}}).isWebGLAvailable()?(u.a.instance||u.a.bootstrap(),u.a.instance.events.addEventListener(c.a.CONNECTION_HANDSHAKING,this.onNitroEvent),u.a.instance.events.addEventListener(c.a.CONNECTION_HANDSHAKE_FAILED,this.onNitroEvent),u.a.instance.events.addEventListener(c.a.CONNECTION_AUTHENTICATED,this.onNitroEvent),u.a.instance.events.addEventListener(c.a.CONNECTION_ERROR,this.onNitroEvent),u.a.instance.events.addEventListener(c.a.CONNECTION_CLOSED,this.onNitroEvent),u.a.instance.roomEngine.events.addEventListener(_.a.ENGINE_INITIALIZED,this.onNitroEvent),u.a.instance.localization.events.addEventListener(h.a.LOADED,this.onNitroEvent),u.a.instance.core.configuration.events.addEventListener(a.a.LOADED,this.onNitroEvent),u.a.instance.core.configuration.events.addEventListener(a.a.FAILED,this.onNitroEvent),u.a.instance.core.configuration.init(),this._connectionTimeout=setTimeout(this.onConnectionTimeout,15e3)):this.onNitroEvent(new o.a(u.a.WEBGL_UNAVAILABLE))})}ngOnDestroy(){this._ngZone.runOutsideAngular(()=>{u.a.instance.events.removeEventListener(c.a.CONNECTION_HANDSHAKING,this.onNitroEvent),u.a.instance.events.removeEventListener(c.a.CONNECTION_HANDSHAKE_FAILED,this.onNitroEvent),u.a.instance.events.removeEventListener(c.a.CONNECTION_AUTHENTICATED,this.onNitroEvent),u.a.instance.events.removeEventListener(c.a.CONNECTION_ERROR,this.onNitroEvent),u.a.instance.events.removeEventListener(c.a.CONNECTION_CLOSED,this.onNitroEvent),u.a.instance.localization.events.removeEventListener(h.a.LOADED,this.onNitroEvent),u.a.instance.core.configuration.events.removeEventListener(a.a.LOADED,this.onNitroEvent),u.a.instance.core.configuration.events.removeEventListener(a.a.FAILED,this.onNitroEvent),clearTimeout(this._connectionTimeout)})}getPreloadAssetUrls(){const t=[],e=u.a.instance.getConfiguration("preload.assets.urls");if(e&&e.length)for(const s of e)t.push(u.a.instance.core.configuration.interpolate(s));return t}onNitroEvent(t){if(t)switch(t.type){case a.a.LOADED:return void u.a.instance.localization.init();case a.a.FAILED:return void this._ngZone.run(()=>{this.isError=!0,this.message="Configuration Failed"});case u.a.WEBGL_UNAVAILABLE:return void this._ngZone.run(()=>{this.isError=!0,this.message="WebGL Required"});case u.a.WEBGL_CONTEXT_LOST:return this._ngZone.run(()=>{this.isError=!0,this.message="WebGL Context Lost - Reloading"}),void setTimeout(()=>location.reload(),1500);case c.a.CONNECTION_HANDSHAKING:return clearTimeout(this._connectionTimeout),void(this._connectionTimeout=null);case c.a.CONNECTION_HANDSHAKE_FAILED:return void this._ngZone.run(()=>{this.isError=!0,this.message="Handshake Failed"});case c.a.CONNECTION_AUTHENTICATED:return this._ngZone.run(()=>{this.message="Finishing Up"}),u.a.instance.init(),clearTimeout(this._connectionTimeout),void(this._connectionTimeout=null);case c.a.CONNECTION_ERROR:return void this._ngZone.run(()=>{this.isError=!0,this.message="Connection Error"});case c.a.CONNECTION_CLOSED:return u.a.instance.roomEngine&&u.a.instance.roomEngine.dispose(),this._ngZone.run(()=>{this.isError=!0,this.message="Connection Closed"}),void l.a.call("disconnect",-1,"client.init.handshake.fail");case _.a.ENGINE_INITIALIZED:return void this._ngZone.run(()=>this._isReady=!0);case h.a.LOADED:return void u.a.instance.core.asset.downloadAssets(this.getPreloadAssetUrls(),t=>{t?(this._ngZone.run(()=>{this.message="Connecting"}),u.a.instance.communication.init()):this._ngZone.run(()=>{this.isError=!0,this.message="Assets Failed"})})}}onConnectionTimeout(){l.a.call("logDebug","TcpAuth control socket security error")}get isReady(){return this._isReady}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(g),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["app-root"]],decls:3,vars:2,consts:[["id","nitro"],["class","d-flex flex-column justify-content-center align-items-center w-100 h-100",4,"ngIf"],[4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100"],[1,"logo","mb-4"],["class","h4 m-0",4,"ngIf"],["class","lds-ellipsis",4,"ngIf"],[1,"h4","m-0"],[1,"lds-ellipsis"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Uc(1,eR,4,2,"div",1),n.Uc(2,sR,1,0,"nitro-main-component",2),n.cc()),2&t&&(n.Kb(1),n.yc("ngIf",!e.isReady||e.isError),n.Kb(1),n.yc("ngIf",e.isReady&&!e.isError))},directives:[m.n,JI],encapsulation:2}),t})();var iR=s("dbUT"),rR=s("oOf3"),aR=s("5eHb");const oR={suppressScrollX:!0};let cR=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},providers:[{provide:Hr.a,useValue:oR},Ks,eh],imports:[[i.a,r.a,m.b,ur.h,ur.s,aR.a.forRoot(),t_.f,t_.l,t_.i,rR.a,Pa.a,Hr.c,iR.b.forRoot(),ua.b],m.b,ur.h,ur.s,aR.a,t_.f,t_.l,t_.i,rR.a,Pa.a,Hr.c,iR.b,ua.b]}),t})(),lR=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},providers:[x_],imports:[[cR]]}),t})();const hR=["nitro-avatar-model-viewer-component",""],uR=function(t){return{active:t}},_R=function(t){return{selected:t}};function dR(t,e){if(1&t){const t=n.ec();n.dc(0,"button",3),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc(2).selectCategory(s.name)}),n.Zb(1,"i",4),n.cc()}if(2&t){const t=e.$implicit,s=n.qc(2);n.yc("ngClass",n.Cc(5,uR,s.activeCategory===t)),n.Kb(1),n.Nb("icon ",t.name,"-icon"),n.yc("ngClass",n.Cc(7,_R,s.activeCategory===t))}}function gR(t,e){if(1&t&&(n.bc(0),n.Uc(1,dR,2,9,"button",2),n.ac()),2&t){const t=n.qc();n.Kb(1),n.yc("ngForOf",t.categories.getValues())}}function mR(t,e){if(1&t){const t=n.ec();n.bc(0),n.dc(1,"button",3),n.nc("click",function(){return n.Lc(t),n.qc().selectGender("M")}),n.Zb(2,"i",5),n.cc(),n.dc(3,"button",3),n.nc("click",function(){return n.Lc(t),n.qc().selectGender("F")}),n.Zb(4,"i",6),n.cc(),n.ac()}if(2&t){const t=n.qc();n.Kb(1),n.yc("ngClass",n.Cc(4,uR,"M"===t.gender)),n.Kb(1),n.yc("ngClass",n.Cc(6,_R,"M"===t.gender)),n.Kb(1),n.yc("ngClass",n.Cc(8,uR,"F"===t.gender)),n.Kb(1),n.yc("ngClass",n.Cc(10,_R,"F"===t.gender))}}const pR=function(t,e){return{"col-6 pr-1":t,"flex-grow-1":e}};function fR(t,e){if(1&t&&(n.dc(0,"div",12),n.Zb(1,"div",13),n.cc()),2&t){const t=n.qc(2);n.yc("ngClass",n.Dc(6,pR,t.maxPaletteCount>=2,t.maxPaletteCount<=1)),n.Kb(1),n.yc("model",t.model)("category",t.activeCategory)("paletteSet",t.activeCategory.getPalette(0))("paletteIndex",0)("maxPaletteCount",t.maxPaletteCount)}}function ER(t,e){if(1&t&&(n.dc(0,"div",14),n.Zb(1,"div",13),n.cc()),2&t){const t=n.qc(2);n.Kb(1),n.yc("model",t.model)("category",t.activeCategory)("paletteSet",t.activeCategory.getPalette(1))("paletteIndex",1)("maxPaletteCount",t.maxPaletteCount)}}function SR(t,e){if(1&t&&(n.bc(0),n.dc(1,"div",7),n.Zb(2,"div",8),n.cc(),n.dc(3,"div",9),n.Uc(4,fR,2,9,"div",10),n.Uc(5,ER,2,5,"div",11),n.cc(),n.ac()),2&t){const t=n.qc();n.Kb(2),n.yc("model",t.model)("category",t.activeCategory)("partSet",t.activeCategory.parts),n.Kb(2),n.yc("ngIf",t.maxPaletteCount>=1),n.Kb(1),n.yc("ngIf",2===t.maxPaletteCount)}}let bR=(()=>{class t{constructor(t){this._avatarEditorService=t,this.model=null,this.gender=null}ngOnChanges(t){this.prepareModel()}prepareModel(){this.model&&(this.model.setViewer(this),this.model.init(),this._activeCategory=null,this.selectFirstCategory())}selectFirstCategory(){if(this.model)for(const t of this.model.categories.getKeys())if(t)return void this.selectCategory(t)}selectCategory(t){if(!this.model||!t)return;const e=this.model.categories.getValue(t);if(e){e.init(),this._activeCategory=e;for(const t of this._activeCategory.parts)if(t&&t.isSelected){this.model.maxPaletteCount=t.colorLayerCount;break}}}selectGender(t){this.model&&t&&this._avatarEditorService.component&&(this._avatarEditorService.component.gender=t)}get categories(){return this.model.categories}get activeCategory(){return this._activeCategory}get canSetGender(){return this.model&&this.model.canSetGender}get maxPaletteCount(){return this.model&&this.model.maxPaletteCount||1}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(Ar))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-avatar-model-viewer-component",""]],inputs:{model:"model",gender:"gender"},features:[n.Ib],attrs:hR,decls:4,vars:3,consts:[[1,"btn-group","w-100","my-1",2,"min-height","45px"],[4,"ngIf"],["type","button","class","btn btn-secondary d-flex justify-content-center align-items-center",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-secondary","d-flex","justify-content-center","align-items-center",3,"ngClass","click"],[3,"ngClass"],[1,"icon","male-icon",3,"ngClass"],[1,"icon","female-icon",3,"ngClass"],[1,"d-flex"],["nitro-avatar-set-viewer-component","",1,"w-100",3,"model","category","partSet"],[1,"d-flex","no-gutters","mt-1"],["class","d-flex flex-column",3,"ngClass",4,"ngIf"],["class","d-flex col-6 pl-1 flex-column",4,"ngIf"],[1,"d-flex","flex-column",3,"ngClass"],["nitro-avatar-palette-viewer-component","",3,"model","category","paletteSet","paletteIndex","maxPaletteCount"],[1,"d-flex","col-6","pl-1","flex-column"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Uc(1,gR,2,1,"ng-container",1),n.Uc(2,mR,5,12,"ng-container",1),n.cc(),n.Uc(3,SR,6,5,"ng-container",1)),2&t&&(n.Kb(1),n.yc("ngIf",e.categories.length>1),n.Kb(1),n.yc("ngIf",e.canSetGender),n.Kb(1),n.yc("ngIf",e.activeCategory))},encapsulation:2}),t})();const vR=["nitro-avatar-palette-viewer-component",""],IR=function(t){return{active:t}},RR=function(t){return{"background-color":t}};function TR(t,e){if(1&t){const t=n.ec();n.dc(0,"div",3),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().selectPalette(s)}),n.Zb(1,"button",4),n.cc()}if(2&t){const t=e.$implicit;n.Kb(1),n.yc("ngClass",n.Cc(2,IR,t.isSelected))("ngStyle",n.Cc(4,RR,t.color))}}const yR=function(t,e){return{"grid-6":t,"grid-12":e}};let OR=(()=>{class t{constructor(){this.model=null,this.category=null,this.paletteSet=[],this.paletteIndex=-1,this.maxPaletteCount=1}ngOnChanges(t){t.category&&this.perfectScrollBar&&this.perfectScrollBar.directiveRef&&this.perfectScrollBar.directiveRef.scrollToTop()}selectPalette(t){if(!(this.model&&this.category&&this.paletteSet&&t))return;if(!t||!this.model)return;const e=this.paletteSet.indexOf(t);-1!==e&&this.model.selectColor(this.category.name,e,this.paletteIndex)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-avatar-palette-viewer-component",""]],viewQuery:function(t,e){if(1&t&&n.cd(Hr.b,1),2&t){let t;n.Hc(t=n.oc())&&(e.perfectScrollBar=t.first)}},inputs:{model:"model",category:"category",paletteSet:"paletteSet",paletteIndex:"paletteIndex",maxPaletteCount:"maxPaletteCount"},features:[n.Ib],attrs:vR,decls:3,vars:5,consts:[[1,"grid-container","palette-grid",2,"min-height","84px","max-height","84px","height","84px"],[1,"grid-items",3,"ngClass"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button",1,"btn","btn-primary","detail-info",3,"ngClass","ngStyle"]],template:function(t,e){1&t&&(n.dc(0,"perfect-scrollbar",0),n.dc(1,"div",1),n.Uc(2,TR,2,6,"div",2),n.cc(),n.cc()),2&t&&(n.Kb(1),n.yc("ngClass",n.Dc(2,yR,e.maxPaletteCount>=2,e.maxPaletteCount<=1)),n.Kb(1),n.yc("ngForOf",e.paletteSet))},directives:[Hr.b,m.l,m.m,m.o],encapsulation:2}),t})();const CR=["nitro-avatar-set-viewer-component",""];function AR(t,e){1&t&&n.Zb(0,"i",6)}const MR=function(t){return{active:t}},wR=function(t){return{"background-image":t}};function UR(t,e){if(1&t){const t=n.ec();n.dc(0,"div",3),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().selectPart(s)}),n.dc(1,"button",4),n.Uc(2,AR,1,0,"i",5),n.cc(),n.cc()}if(2&t){const t=e.$implicit;n.Kb(1),n.yc("ngClass",n.Cc(3,MR,t.isSelected))("ngStyle",t.imageUrl&&n.Cc(5,wR,"url("+t.imageUrl+")")),n.Kb(1),n.yc("ngIf",t.isClear)}}let DR=(()=>{class t{constructor(){this.model=null,this.category=null,this.partSet=[]}ngOnChanges(t){t.category&&this.perfectScrollBar&&this.perfectScrollBar.directiveRef&&this.perfectScrollBar.directiveRef.scrollToTop()}selectPart(t){if(!(this.model&&this.category&&this.partSet&&t))return;const e=this.partSet.indexOf(t);-1!==e&&this.model.selectPart(this.category.name,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-avatar-set-viewer-component",""]],viewQuery:function(t,e){if(1&t&&n.cd(Hr.b,1),2&t){let t;n.Hc(t=n.oc())&&(e.perfectScrollBar=t.first)}},inputs:{model:"model",category:"category",partSet:"partSet"},features:[n.Ib],attrs:CR,decls:3,vars:1,consts:[[1,"grid-container",2,"min-height","158px","max-height","158px","height","158px"],[1,"grid-items","grid-6"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button",1,"btn","btn-secondary","detail-info","has-image",3,"ngClass","ngStyle"],["class","fas fa-times h5 m-0",4,"ngIf"],[1,"fas","fa-times","h5","m-0"]],template:function(t,e){1&t&&(n.dc(0,"perfect-scrollbar",0),n.dc(1,"div",1),n.Uc(2,UR,3,7,"div",2),n.cc(),n.cc()),2&t&&(n.Kb(2),n.yc("ngForOf",e.partSet))},directives:[Hr.b,m.m,m.l,m.o,m.n],encapsulation:2}),t})();const NR=["nitro-avatar-wardrobe-component",""];function LR(t,e){if(1&t){const t=n.ec();n.dc(0,"div",6),n.dc(1,"div",7),n.dc(2,"button",8),n.nc("click",function(){n.Lc(t);const s=e.index;return n.qc().updateLook(s+1)}),n.Zb(3,"i",5),n.cc(),n.dc(4,"button",8),n.nc("click",function(){n.Lc(t);const s=e.index;return n.qc().loadLook(s+1)}),n.Zb(5,"i",3),n.cc(),n.cc(),n.dc(6,"button",9),n.Zb(7,"div",10),n.cc(),n.cc()}if(2&t){const t=e.index,s=n.qc();n.Kb(7),n.yc("figure",s.getLook(t+1))("direction",4)}}let PR=(()=>{class t{constructor(t){this._avatarEditorService=t,this.maxServerPage=1,this.maxClientPage=2,this.looksPerClientPage=5,this.figureData=null,this._currentServerPage=1,this._currentClientPage=1,this._maxLoadedServerPage=1,this._looks=new Map,this._avatarEditorService.wardrobeComponent=this,this._requestLooks(this._currentServerPage)}previousPage(){1!==this._currentClientPage&&this._currentClientPage--}nextPage(){if(this._currentClientPage!==this.maxClientPage&&(this._currentClientPage++,(this._currentClientPage-1)%2==0&&this._currentServerPage<this.maxServerPage)){if(this._currentServerPage++,this._currentServerPage<this._maxLoadedServerPage)return;this._maxLoadedServerPage=this._currentServerPage,this._requestLooks(this._currentServerPage)}}getLook(t){const e=this.getRealIndex(t);return this._looks.has(e)?this._looks.get(e)[0]:null}setLook(t,e,s){this._looks.set(t,[e,s])}updateLook(t){const e=this.getRealIndex(t);this._looks.set(e,[this._avatarEditorService.currentEditorLook,this._avatarEditorService.currentEditorGender]),this._avatarEditorService.setWardrobeSlot(e)}loadLook(t){const e=this.getRealIndex(t);if(!this._looks.has(e))return;const s=this._looks.get(e);this._avatarEditorService.loadAvatarInEditor(s[0],s[1])}counter(){return new Array(this.looksPerClientPage)}getRealIndex(t){return t+(this._currentClientPage-1)*this.looksPerClientPage}_requestLooks(t){this._avatarEditorService.requestWardrobePage(t)}get currentPage(){return this._currentClientPage}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(Ar))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-avatar-wardrobe-component",""]],inputs:{figureData:"figureData"},attrs:NR,decls:8,vars:3,consts:[[1,"d-flex","flex-row","justify-content-between"],[1,"d-flex"],[1,"btn","btn-secondary","btn-sm","h-100",3,"disabled","click"],[1,"fas","fa-chevron-left"],["class","d-flex flex-row",4,"ngFor","ngForOf"],[1,"fas","fa-chevron-right"],[1,"d-flex","flex-row"],[1,"d-flex","flex-column"],[1,"btn","btn-secondary","btn-sm","h-100",3,"click"],[1,"btn","btn-secondary","btn-sm"],["nitro-avatar-image","",1,"d-flex","justify-content-center","nitro-avatar-image",3,"figure","direction"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"button",2),n.nc("click",function(){return e.previousPage()}),n.Zb(3,"i",3),n.cc(),n.cc(),n.Uc(4,LR,8,2,"div",4),n.dc(5,"div",1),n.dc(6,"button",2),n.nc("click",function(){return e.nextPage()}),n.Zb(7,"i",5),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(2),n.yc("disabled",1===e.currentPage),n.Kb(2),n.yc("ngForOf",e.counter()),n.Kb(2),n.yc("disabled",e.currentPage===e.maxClientPage))},directives:[m.m,ba],encapsulation:2}),t})(),xR=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},providers:[Ar],imports:[[cR]]}),t})();n.Oc(Dd,[m.n,Dr,Kr,m.m,m.l,bR,ba,PR],[ui]),n.Oc(bR,[m.n,m.m,m.l,DR,OR],[]);let FR=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},providers:[od],imports:[[cR]]}),t})();const kR=["imageElement"];function WR(t,e){if(1&t&&(n.dc(0,"div",21),n.Zb(1,"div",22),n.rc(2,"uniqueNumber"),n.Zb(3,"div",22),n.rc(4,"uniqueNumber"),n.cc()),2&t){const t=n.qc();n.Kb(1),n.yc("innerHTML",n.sc(2,2,t.offer.stuffData.uniqueNumber),n.Mc),n.Kb(2),n.yc("innerHTML",n.sc(4,4,t.offer.stuffData.uniqueSeries),n.Mc)}}const BR=function(t){return{"background-image":t}};let VR=(()=>{class t{constructor(t,e,s,n){this._catalogService=t,this._marketplaceService=e,this._inventoryFurniService=s,this._ngZone=n,this._imageUrl=""}ngOnChanges(t){const e=t.offer.currentValue;e&&t.offer.previousValue!==e&&this.refresh()}hide(){this._marketplaceService.buyOffer(null)}refresh(){this.refreshImage()}refreshImage(){this._ngZone.runOutsideAngular(()=>{var t,e;this._imageUrl="";const s=this.offer;let n;if(n=1===this.offer.furniType?u.a.instance.roomEngine.getFurnitureFloorImage(s.furniId,new q.a(90,0,0),64,this,4293848814,null===(t=this.offer.extraData)||void 0===t?void 0:t.toString()):u.a.instance.roomEngine.getFurnitureWallImage(s.furniType,new q.a(90,0,0),64,this,4293848814,null===(e=this.offer.extraData)||void 0===e?void 0:e.toString()),n){const t=n.getImage();t&&this._ngZone.run(()=>this._imageUrl=t.src)}})}purchase(){}completePurchase(){this._ngZone.runOutsideAngular(()=>{const t=new HTMLImageElement;t.className="toolbar-icon-animation",t.src=this._imageUrl,t.style.visibility="hidden",this.imageElement&&this.imageElement.nativeElement.appendChild(t);const e=t.getBoundingClientRect(),s=new Nd.a(t,e.x,e.y);s.iconName=Vh.a.INVENTORY,u.a.instance.roomEngine.events.dispatchEvent(s)})}imageReady(t,e,s){if(e)if(s)this._ngZone.run(()=>this._imageUrl=s.src);else if(e){const t=mc.a.generateImageUrl(e);t&&this._ngZone.run(()=>this._imageUrl=t)}}get costCredits(){return this.offer.price}imageFailed(t){}get imageUrl(){return this._imageUrl}getFurniTitle(){const t=this.offer;return u.a.instance.localization.getValue(2==t.furniType?"wallItem.name."+t.furniId:"roomItem.name."+t.furniId)}getFurniDescription(){const t=this.offer;return u.a.instance.localization.getValue(2==t.furniType?"wallItem.desc."+t.furniId:"roomItem.desc."+t.furniId)}getAveragePrice(){let t=u.a.instance.localization.getValue("catalog.marketplace.offer_details.average_price");const e=0==this.offer._Str_3925?" - ":this.offer._Str_3925.toString();return t=t.replace("%days%",this._inventoryFurniService.marketPlaceConfig.displayTime.toString()),t=t.replace("%average%",e),t}getOfferCount(){return u.a.instance.localization.getValueWithParameter("catalog.marketplace.offer_details.offer_count","count",this.offer._Str_4121.toString())}buy(){this._marketplaceService.buyMarketplaceOffer(this.offer.offerId)}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(gc),n.Yb(ko),n.Yb(of),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-catalog-confirm-marketplace-purchase-component"]],viewQuery:function(t,e){if(1&t&&n.cd(kR,1),2&t){let t;n.Hc(t=n.oc())&&(e.imageElement=t.first)}},inputs:{offer:"offer"},features:[n.Ib],decls:35,vars:20,consts:[[1,"nitro-inventory-offer-marketplace-component","card",3,"bringToTop","draggable","center"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"d-flex","flex-row","mb-3"],[1,"position-relative","bg-secondary","rounded"],["class","unique-counter-compact","style","right: 0px;",4,"ngIf"],[1,"product-preview","bg-secondary",3,"ngStyle"],["imageElement",""],[1,"ml-2","align-self-center"],[1,"badge","badge-secondary","badge-sm","text-wrap"],[1,"badge","badge-secondary","d-flex","align-items-center","justify-content-center","text-wrap","mb-2","w-100"],["nitro-currency-icon","",1,"mr-1",2,"width","20px","height","20px",3,"type"],[1,"badge","badge-secondary","badge-sm","text-wrap","mr-2","w-100"],[1,"badge","badge-secondary","badge-sm","text-wrap","w-100","d-flex"],[1,"align-self-center","w-100"],[1,"btn-group","w-100"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"unique-counter-compact",2,"right","0px"],[3,"innerHTML"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"h6",2),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",3),n.nc("click",function(){return e.hide()}),n.Zb(6,"i",4),n.cc(),n.cc(),n.dc(7,"div",5),n.dc(8,"div",6),n.dc(9,"div",7),n.Uc(10,WR,5,6,"div",8),n.Zb(11,"div",9,10),n.cc(),n.dc(13,"div",11),n.dc(14,"div"),n.Wc(15),n.cc(),n.dc(16,"div",12),n.Wc(17),n.cc(),n.cc(),n.cc(),n.dc(18,"div",13),n.Zb(19,"div",14),n.dc(20,"div"),n.Wc(21),n.cc(),n.cc(),n.dc(22,"div",6),n.dc(23,"div",15),n.Wc(24),n.cc(),n.dc(25,"div",16),n.dc(26,"div",17),n.Wc(27),n.cc(),n.cc(),n.cc(),n.dc(28,"div",18),n.dc(29,"button",19),n.nc("click",function(){return e.buy()}),n.Wc(30),n.rc(31,"translate"),n.cc(),n.dc(32,"button",20),n.nc("click",function(){return e.hide()}),n.Wc(33),n.rc(34,"translate"),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("center",!0),n.Kb(3),n.Xc(n.sc(4,12,"catalog.marketplace.confirm_title")),n.Kb(7),n.yc("ngIf",e.offer&&e.offer.stuffData.uniqueNumber),n.Kb(1),n.yc("ngStyle",n.Cc(18,BR,"url("+e.imageUrl+")")),n.Kb(4),n.Xc(e.getFurniTitle()),n.Kb(2),n.Xc(e.getFurniDescription()),n.Kb(2),n.yc("type",105),n.Kb(2),n.Xc(e.costCredits),n.Kb(3),n.Yc(" ",e.getAveragePrice()," "),n.Kb(3),n.Xc(e.getOfferCount()),n.Kb(3),n.Xc(n.sc(31,14,"catalog.purchase_confirmation.buy")),n.Kb(3),n.Xc(n.sc(34,16,"catalog.purchase_confirmation.cancel")))},directives:[Dr,Kr,m.n,m.o,Iu],pipes:[ui,pl],encapsulation:2}),t})(),GR=(()=>{class t{constructor(t,e){this._catalogService=t,this._ngZone=e}hide(){this._catalogService.component&&this._catalogService.component.setInsufficientFunds(!1)}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(gc),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-catalog-confirm-purchase-insufficient-funds"]],decls:16,vars:10,consts:[["dragHandle",".card-header",1,"card","nitro-catalog-confirm-purchase-component",3,"bringToTop","draggable","center"],[1,"card-header"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","card-body"],[1,"d-flex","flex-grow-1","flex-column","justify-content-center","p-2"],[1,"card-footer"],[1,"d-flex","justify-space-between","button-container","btn-group"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.Wc(2),n.rc(3,"translate"),n.dc(4,"button",2),n.nc("click",function(){return e.hide()}),n.Zb(5,"i",3),n.cc(),n.cc(),n.dc(6,"div",4),n.dc(7,"div",5),n.dc(8,"p"),n.Wc(9),n.rc(10,"translate"),n.cc(),n.cc(),n.cc(),n.dc(11,"div",6),n.dc(12,"div",7),n.dc(13,"button",8),n.nc("click",function(){return e.hide()}),n.Wc(14),n.rc(15,"translate"),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("center",!0),n.Kb(2),n.Yc(" ",n.sc(3,4,"catalog.alert.notenough.title")," "),n.Kb(7),n.Xc(n.sc(10,6,"catalog.alert.notenough.credits.description")),n.Kb(5),n.Xc(n.sc(15,8,"catalog.purchase_confirmation.cancel")))},directives:[Dr,Kr],pipes:[ui],encapsulation:2}),t})();const KR=["imageElement"];function HR(t,e){if(1&t&&(n.dc(0,"div",19),n.Wc(1),n.cc()),2&t){const t=n.qc();n.Kb(1),n.Yc("X ",t.quantity,"")}}function jR(t,e){if(1&t&&(n.dc(0,"div",20),n.Zb(1,"div",21),n.Wc(2),n.cc()),2&t){const t=n.qc();n.Kb(1),n.yc("type",-1),n.Kb(1),n.Yc(" ",t.costCredits," ")}}function zR(t,e){1&t&&(n.dc(0,"p",22),n.Wc(1,"+"),n.cc())}function YR(t,e){if(1&t&&(n.dc(0,"div",20),n.Zb(1,"div",21),n.Wc(2),n.cc()),2&t){const t=n.qc();n.Kb(1),n.yc("type",t.pointsType),n.Kb(1),n.Yc(" ",t.costPoints," ")}}const qR=function(t){return{"background-image":t}};let XR=(()=>{class t{constructor(t,e){this._catalogService=t,this._ngZone=e,this.page=null,this.offer=null,this.giftOffer=null,this.quantity=1,this.extra=null,this.completed=!1,this._imageUrl=""}ngOnChanges(t){const e=t.offer.currentValue;e&&t.offer.previousValue!==e&&this.refresh()}hide(){this._catalogService.component&&this._catalogService.component.hidePurchaseConfirmation()}refresh(){this.refreshImage()}refreshImage(){this._ngZone.runOutsideAngular(()=>{this._imageUrl="";const t=this._catalogService.component&&this._catalogService.component.roomPreviewer;if(!t)return;const e=t.getRoomPreviewObject();if(e){const t=e.visualization.getImage(16711680,-1),s=mc.a.generateImage(t);s&&(this._imageUrl=s.src)}})}purchase(){this.giftOffer?this._catalogService.component&&this._catalogService.component.makeGiftConfiguratorVisible():this._catalogService.purchase(this.page,this.offer,this.quantity,this.extra)}completePurchase(){this._ngZone.runOutsideAngular(()=>{const t=new HTMLImageElement;t.className="toolbar-icon-animation",t.src=this._imageUrl,t.style.visibility="hidden",this.imageElement&&this.imageElement.nativeElement.appendChild(t);const e=t.getBoundingClientRect(),s=new Nd.a(t,e.x,e.y);s.iconName=Vh.a.INVENTORY,u.a.instance.roomEngine.events.dispatchEvent(s)})}get costCredits(){return this.offer.priceCredits*this.quantity}get costPoints(){return this.offer.priceActivityPoints*this.quantity}get pointsType(){return this.offer.priceActivityPointsType}get imageUrl(){return this._imageUrl}getOfferTitle(){const t=this.offer.localizationId,e=u.a.instance.sessionDataManager.getProductData(t);return e?e.name:t}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(gc),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-catalog-confirm-purchase-component"]],viewQuery:function(t,e){if(1&t&&n.cd(KR,1),2&t){let t;n.Hc(t=n.oc())&&(e.imageElement=t.first)}},inputs:{page:"page",offer:"offer",giftOffer:"giftOffer",quantity:"quantity",extra:"extra",completed:"completed"},features:[n.Ib],decls:27,vars:18,consts:[[1,"nitro-catalog-confirm-purchase-component","card",3,"bringToTop","draggable","center"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-3"],[1,"col-6","d-flex","flex-column"],[1,"product-preview","bg-secondary","rounded",3,"ngStyle"],["imageElement",""],[1,"col-6","d-flex","flex-column","align-items-center","justify-content-center"],[1,"offer-name"],["class","offer-quantity",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-center","bg-secondary","rounded","w-100"],["class","d-flex align-items-center mb-0",4,"ngIf"],["class","mx-2 mb-0",4,"ngIf"],[1,"row","align-items-end","pt-0","px-3","pb-3"],[1,"col","btn-group"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[1,"offer-quantity"],[1,"d-flex","align-items-center","mb-0"],["nitro-currency-icon","",1,"mr-1",2,"width","20px","height","20px",3,"type"],[1,"mx-2","mb-0"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"h6",2),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",3),n.nc("click",function(){return e.hide()}),n.Zb(6,"i",4),n.cc(),n.cc(),n.dc(7,"div",5),n.dc(8,"div",6),n.Zb(9,"div",7,8),n.cc(),n.dc(11,"div",9),n.dc(12,"div",10),n.Wc(13),n.cc(),n.Uc(14,HR,2,1,"div",11),n.dc(15,"div",12),n.Uc(16,jR,3,2,"div",13),n.Uc(17,zR,2,0,"p",14),n.Uc(18,YR,3,2,"div",13),n.cc(),n.cc(),n.cc(),n.dc(19,"div",15),n.dc(20,"div",16),n.dc(21,"button",17),n.nc("click",function(){return e.hide()}),n.Wc(22),n.rc(23,"translate"),n.cc(),n.dc(24,"button",18),n.nc("click",function(){return e.purchase()}),n.Wc(25),n.rc(26,"translate"),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("center",!0),n.Kb(3),n.Xc(n.sc(4,10,null!=e.giftOffer?"catalog.purchase_confirmation.gift.title":"catalog.purchase_confirmation.title")),n.Kb(6),n.yc("ngStyle",n.Cc(16,qR,"url("+e.imageUrl+")")),n.Kb(4),n.Xc(e.getOfferTitle()),n.Kb(1),n.yc("ngIf",e.quantity),n.Kb(2),n.yc("ngIf",e.costCredits),n.Kb(1),n.yc("ngIf",e.costCredits&&e.costPoints),n.Kb(1),n.yc("ngIf",e.costPoints),n.Kb(4),n.Xc(n.sc(23,12,"catalog.purchase_confirmation.cancel")),n.Kb(3),n.Xc(n.sc(26,14,null!=e.giftOffer?"catalog.purchase_confirmation.gift":"catalog.purchase_confirmation.buy")))},directives:[Dr,Kr,m.o,m.n,Iu],pipes:[ui],encapsulation:2}),t})();function ZR(t,e){if(1&t&&(n.dc(0,"p",13),n.Wc(1),n.Zb(2,"img",14),n.cc()),2&t){const t=n.qc();n.Kb(1),n.Yc("",t.subscription.priceCredits," "),n.Kb(1),n.yc("src",t.getCurrencyUrl(-1),n.Nc)}}function QR(t,e){if(1&t&&(n.dc(0,"p",13),n.Wc(1),n.Zb(2,"img",15),n.cc()),2&t){const t=n.qc();n.Kb(1),n.Yc(" + ",t.subscription.priceActivityPoints," "),n.Kb(1),n.yc("src",t.getCurrencyUrl(t.subscription.priceActivityPointsType),n.Nc)}}let JR=(()=>{class t{constructor(t,e){this._catalogService=t,this._ngZone=e,this.subscription=null}getSubscriptionText(){let t=u.a.instance.localization.getValue("catalog.vip.buy.confirm.end_date");return t=t.replace("%month%",this.subscription.month.toString()),t=t.replace("%day%",this.subscription.day.toString()),t=t.replace("%year%",this.subscription.year.toString()),t}getSubscriptionHeader(){const t=this._catalogService.purse,e=0==this.subscription.months?"days":"months",s=u.a.instance.localization.getValue("catalog.vip.buy.confirm."+(t.clubDays>0||t.clubPeriods>0?"extension.":"subscription.")+e),n=0==this.subscription.months?this.subscription.extraDays:this.subscription.months;return s.replace("%NUM_"+e.toUpperCase()+"%",n.toString())}getCurrencyUrl(t){return u.a.instance.getConfiguration("currency.asset.icon.url").replace("%type%",t.toString())}hide(){this._catalogService.component&&this._catalogService.component.hidePurchaseConfirmation()}purchase(){this._catalogService.purchaseById(this._catalogService.activePage.pageId,this.subscription.offerId,1)}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(gc),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-catalog-confirm-vip-subscription-component"]],inputs:{subscription:"subscription"},decls:24,vars:14,consts:[["dragHandle",".card-header",1,"card","nitro-catalog-confirm-vip-subscription-component",3,"bringToTop","draggable","center"],[1,"card-header"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","card-body","flex-row"],[1,"icon","icon-catalogue-hc_big"],[1,"ml-3"],[1,"d-flex","align-items-center","justify-content-center","bg-secondary","rounded","p-1"],["class","mb-0",4,"ngIf"],[1,"card-footer"],[1,"d-flex","justify-space-between","button-container","btn-group"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[1,"mb-0"],["image-placeholder","",1,"px-1",3,"src"],["image-placeholder","",1,"pl-1",3,"src"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.Wc(2),n.rc(3,"translate"),n.dc(4,"button",2),n.nc("click",function(){return e.hide()}),n.Zb(5,"i",3),n.cc(),n.cc(),n.dc(6,"div",4),n.Zb(7,"i",5),n.dc(8,"div",6),n.dc(9,"h6"),n.Wc(10),n.cc(),n.dc(11,"p"),n.Wc(12),n.cc(),n.dc(13,"div",7),n.Uc(14,ZR,3,2,"p",8),n.Uc(15,QR,3,2,"p",8),n.cc(),n.cc(),n.cc(),n.dc(16,"div",9),n.dc(17,"div",10),n.dc(18,"button",11),n.nc("click",function(){return e.hide()}),n.Wc(19),n.rc(20,"translate"),n.cc(),n.dc(21,"button",12),n.nc("click",function(){return e.purchase()}),n.Wc(22),n.rc(23,"translate"),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("center",!0),n.Kb(2),n.Yc(" ",n.sc(3,8,"catalog.club.buy.confirm")," "),n.Kb(8),n.Xc(e.getSubscriptionHeader()),n.Kb(2),n.Xc(e.getSubscriptionText()),n.Kb(2),n.yc("ngIf",e.subscription.priceCredits),n.Kb(1),n.yc("ngIf",e.subscription.priceActivityPoints),n.Kb(4),n.Xc(n.sc(20,10,"catalog.purchase_confirmation.cancel")),n.Kb(3),n.Xc(n.sc(23,12,"catalog.club.buy.subscribe")))},directives:[Dr,Kr,m.n,fa],pipes:[ui],encapsulation:2}),t})();function $R(t,e){if(1&t&&n.Zb(0,"div",32),2&t){const t=n.qc();n.yc("headOnly",!0)("direction",2)("figure",t.habboFace)}}function tT(t,e){1&t&&n.Zb(0,"div",33)}function eT(t,e){if(1&t&&(n.dc(0,"span"),n.Wc(1),n.cc()),2&t){const t=n.qc();n.Kb(1),n.Xc(t.priceText)}}const sT=function(t){return{backgroundColor:t,height:"40px"}};function nT(t,e){if(1&t){const t=n.ec();n.dc(0,"button",34),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().selectTypeId(s)}),n.cc()}if(2&t){const t=e.$implicit,s=n.qc();n.yc("disabled",!s.hasColors)("ngStyle",n.Cc(2,sT,s.getColor(t)))}}function iT(t,e){if(1&t){const t=n.ec();n.dc(0,"div",35),n.dc(1,"div",1),n.dc(2,"h6",2),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",3),n.nc("click",function(){return n.Lc(t),n.qc().hideUsernameDialog()}),n.Zb(6,"i",4),n.cc(),n.cc(),n.dc(7,"div",36),n.dc(8,"p"),n.Wc(9),n.rc(10,"translate"),n.cc(),n.cc(),n.dc(11,"div",37),n.dc(12,"div",38),n.dc(13,"button",39),n.nc("click",function(){return n.Lc(t),n.qc().hideUsernameDialog()}),n.Wc(14),n.rc(15,"translate"),n.cc(),n.cc(),n.cc(),n.cc()}2&t&&(n.Kb(3),n.Xc(n.sc(4,3,"catalog.gift_wrapping.receiver_not_found.title")),n.Kb(6),n.Xc(n.sc(10,5,"catalog.gift_wrapping.receiver_not_found.info")),n.Kb(5),n.Xc(n.sc(15,7,"generic.ok")))}const rT=function(t){return{"is-unavailable":t}};let aT=(()=>{class t{constructor(t,e){this._catalogService=t,this._ngZone=e,this.visible=!1,this.showUsernameErrorDialog=!1,this.receiverName="",this.message="",this.showFace=!0,this.habboFace="",this.hasColors=!1,this.boxSpriteId=-1,this.extras="",this._stuffColors=new Map,t.giftConfiguratorComponent=this;const s=this._catalogService.giftWrapperConfiguration,n=s.defaultStuffTypes;if(n.length>0){const t=Math.floor(Math.random()*n.length);this._defaultStuffType=n[t]}this._stuffTypes=s.stuffTypes,this._boxTypes=s.boxTypes,this._boxTypes.push(this._defaultStuffType),this._ribbonTypes=s.ribbonTypes,this._boxPrice=s.price,this._selectedTypeId=this._stuffTypes[2],this._ribbonIndex=this._ribbonTypes[0],this._boxIndex=0,this.updateIndexesAndSetUI(),this.loadColors()}get colors(){return this._stuffTypes}handleButton(t){switch(t){case"previous_box":this._boxIndex--,this.updateIndexesAndSetUI();break;case"next_box":this._boxIndex++,this.updateIndexesAndSetUI();break;case"previous_ribbon":this._ribbonIndex--,this.updateIndexesAndSetUI();break;case"next_ribbon":this._ribbonIndex++,this.updateIndexesAndSetUI();break;case"give_gift":this.giveGift()}}changeCheckbox(t){this.updateIndexesAndSetUI()}get isDefaultBox(){return this._isDefaultBox()}hide(){this._catalogService.component&&this._catalogService.component.hidePurchaseConfirmation()}getColor(t){const e=this._stuffColors.get(t);return e?"#"+e.toString(16):"#FFFFFF"}typeHasColors(t){return this._stuffColors.has(t)}selectTypeId(t){this._selectedTypeId=t,this.updateIndexesAndSetUI()}hideUsernameDialog(){this.showUsernameErrorDialog=!1}showUsernameNotFoundDialog(){this._ngZone.run(()=>this.showUsernameErrorDialog=!0)}loadColors(){for(const t of this._stuffTypes){const e=u.a.instance.sessionDataManager.getFloorItemData(t);e&&e.colors&&e.colors.length>0&&this._stuffColors.set(t,e.colors[0])}}updateIndexesAndSetUI(){this._ribbonIndex<0&&(this._ribbonIndex=this._ribbonTypes.length-1),this._ribbonIndex>this._ribbonTypes.length-1&&(this._ribbonIndex=0),this._boxIndex<0&&(this._boxIndex=this._boxTypes.length-1),this._boxIndex>this._boxTypes.length-1&&(this._boxIndex=0);const t=this._boxTypes[this._boxIndex];8==t&&(this._ribbonIndex=10,this._ribbonIndex>this._ribbonTypes.length-1&&(this._ribbonIndex=0));let e=(1e3*t+this._ribbonTypes[this._ribbonIndex]).toString(),s=this._selectedTypeId;this._isDefaultBox()?(this.setHasColors(!1),s=this._defaultStuffType,e=""):8==t?this.setHasColors(!1):(this.setHasColors(!0),t>=3&&t<=6&&this.setHasColors(!1)),this.extras=e,this.boxSpriteId=s,this.setBoxTitles(),this.habboFace=u.a.instance.sessionDataManager.figure}setHasColors(t){this.hasColors=t}setBoxTitles(){const t=this._isDefaultBox(),e=t?"catalog.gift_wrapping_new.freeprice":"catalog.gift_wrapping_new.price",s="catalog.gift_wrapping_new.ribbon."+this._ribbonIndex;this.boxText=u.a.instance.localization.getValue(t?"catalog.gift_wrapping_new.box.default":"catalog.gift_wrapping_new.box."+this._boxTypes[this._boxIndex]),this.priceText=u.a.instance.localization.getValueWithParameter(e,"price",this._boxPrice.toString()),this.ribbonText=u.a.instance.localization.getValue(s)}giveGift(){if(!this.receiverName||0==this.receiverName.trim().length)return;const t=this.receiverName,e=this.message,s=this._isDefaultBox();this._catalogService.purchaseGiftOffer(this._catalogService.component.activePage,this._catalogService.component.activeOffer,this._catalogService.component.purchaseOfferExtra,t,e,s?this._defaultStuffType:this._selectedTypeId,s?0:this._boxTypes[this._boxIndex],s?0:this._ribbonTypes[this._ribbonIndex],this.showFace)}_isDefaultBox(){return this._boxTypes[this._boxIndex]==this._defaultStuffType}ngOnDestroy(){this._catalogService.giftConfiguratorComponent=null}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(gc),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-catalog-customize-gift-component"]],inputs:{visible:"visible"},decls:56,vars:37,consts:[[1,"nitro-catalog-customize-gift-component","card",3,"bringToTop","draggable","center"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],["type","text",1,"form-control","form-control-sm",3,"ngModel","placeholder","ngModelChange"],[1,"d-flex","mt-2"],["nitro-avatar-image","",3,"headOnly","direction","figure",4,"ngIf"],["class","ingognito",4,"ngIf"],[1,"d-flex","flex-grow-1"],[1,"form-control","w-200",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-center","align-items-center","mt-2"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"d-flex","justify-content-center","mt-2"],["nitro-furniture-image","",1,"d-flex","justify-content-center","align-items-center","bg-secondary","rounded",2,"width","100px","height","100px",3,"type","spriteId","extras"],[1,"d-flex","flex-column","flex-grow-1","ml-2"],[1,"d-flex","align-items-center"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-chevron-left"],[1,"fas","fa-chevron-right"],[1,"d-flex","flex-column","ml-2"],[4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"disabled","click"],[3,"ngClass"],[1,"d-flex","flex-column","mt-2"],[1,"btn-group","w-100"],["class","btn btn-sm btn-primary",3,"disabled","ngStyle","click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-success",3,"click"],["class","nitro-catalog-customize-gift-component card",3,"bringToTop","draggable",4,"ngIf"],["nitro-avatar-image","",3,"headOnly","direction","figure"],[1,"ingognito"],[1,"btn","btn-sm","btn-primary",3,"disabled","ngStyle","click"],[1,"nitro-catalog-customize-gift-component","card",3,"bringToTop","draggable"],[1,"row","p-3"],[1,"row","align-items-end","pt-0","px-3","pb-3"],[1,"col","btn-group"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"h6",2),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",3),n.nc("click",function(){return e.hide()}),n.Zb(6,"i",4),n.cc(),n.cc(),n.dc(7,"div",5),n.dc(8,"input",6),n.nc("ngModelChange",function(t){return e.receiverName=t}),n.rc(9,"translate"),n.cc(),n.dc(10,"div",7),n.Uc(11,$R,1,3,"div",8),n.Uc(12,tT,1,0,"div",9),n.dc(13,"div",10),n.dc(14,"textarea",11),n.nc("ngModelChange",function(t){return e.message=t}),n.cc(),n.cc(),n.cc(),n.dc(15,"div",12),n.dc(16,"div",13),n.dc(17,"input",14),n.nc("ngModelChange",function(t){return e.showFace=t})("change",function(t){return e.changeCheckbox(t)}),n.cc(),n.dc(18,"label",15),n.Wc(19),n.rc(20,"translate"),n.cc(),n.cc(),n.cc(),n.dc(21,"div",16),n.Zb(22,"div",17),n.dc(23,"div",18),n.dc(24,"div",19),n.dc(25,"button",20),n.nc("click",function(){return e.handleButton("previous_box")}),n.Zb(26,"i",21),n.cc(),n.dc(27,"button",20),n.nc("click",function(){return e.handleButton("next_box")}),n.Zb(28,"i",22),n.cc(),n.dc(29,"div",23),n.dc(30,"span"),n.Wc(31),n.cc(),n.Uc(32,eT,2,1,"span",24),n.cc(),n.cc(),n.dc(33,"div",19),n.dc(34,"button",25),n.nc("click",function(){return e.handleButton("previous_ribbon")}),n.Zb(35,"i",21),n.cc(),n.dc(36,"button",25),n.nc("click",function(){return e.handleButton("next_ribbon")}),n.Zb(37,"i",22),n.cc(),n.dc(38,"div",23),n.dc(39,"span",26),n.Wc(40),n.cc(),n.cc(),n.cc(),n.cc(),n.cc(),n.dc(41,"div",27),n.dc(42,"span"),n.Wc(43),n.rc(44,"translate"),n.cc(),n.dc(45,"div",28),n.Uc(46,nT,1,4,"button",29),n.cc(),n.cc(),n.dc(47,"div",7),n.dc(48,"div",28),n.dc(49,"button",20),n.nc("click",function(){return e.hide()}),n.Wc(50),n.rc(51,"translate"),n.cc(),n.dc(52,"button",30),n.nc("click",function(){return e.handleButton("give_gift")}),n.Wc(53),n.rc(54,"translate"),n.cc(),n.cc(),n.cc(),n.cc(),n.cc(),n.Uc(55,iT,16,9,"div",31)),2&t&&(n.yc("center",!0),n.Kb(3),n.Xc(n.sc(4,23,"catalog.gift_wrapping.title")),n.Kb(5),n.zc("placeholder",n.sc(9,25,"catalog.gift_wrapping.receiver")),n.yc("ngModel",e.receiverName),n.Kb(3),n.yc("ngIf",e.showFace),n.Kb(1),n.yc("ngIf",!e.showFace),n.Kb(2),n.yc("ngModel",e.message),n.Kb(3),n.yc("ngModel",e.showFace),n.Kb(2),n.Xc(n.sc(20,27,"catalog.gift_wrapping.show_face.title")),n.Kb(3),n.yc("type","s")("spriteId",e.boxSpriteId)("extras",e.extras),n.Kb(9),n.Xc(e.boxText),n.Kb(1),n.yc("ngIf",e.priceText&&e.priceText.length>0),n.Kb(2),n.yc("disabled",e.isDefaultBox),n.Kb(2),n.yc("disabled",e.isDefaultBox),n.Kb(3),n.yc("ngClass",n.Cc(35,rT,e.isDefaultBox)),n.Kb(1),n.Xc(e.ribbonText),n.Kb(3),n.Xc(n.sc(44,29,"catalog.gift_wrapping.pick_color")),n.Kb(3),n.yc("ngForOf",e.colors),n.Kb(4),n.Xc(n.sc(51,31,"catalog.purchase_confirmation.cancel")),n.Kb(3),n.Xc(n.sc(54,33,"catalog.gift_wrapping.give_gift")),n.Kb(2),n.yc("ngIf",e.showUsernameErrorDialog))},directives:[Dr,Kr,ur.b,ur.l,ur.n,m.n,ur.a,Ec,m.l,m.m,ba,m.o],pipes:[ui],encapsulation:2}),t})();function oT(t,e){if(1&t&&n.Zb(0,"nitro-catalog-navigation-item-component",3),2&t){const t=n.qc().$implicit;n.yc("catalogPage",t)}}function cT(t,e){if(1&t&&(n.bc(0),n.Uc(1,oT,1,1,"nitro-catalog-navigation-item-component",2),n.ac()),2&t){const t=e.$implicit;n.Kb(1),n.yc("ngIf",t.visible)}}let lT=(()=>{class t{constructor(t){this._catalogService=t,this.catalogPage=null}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(gc))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-catalog-navigation-set-component"]],inputs:{catalogPage:"catalogPage"},decls:2,vars:1,consts:[[1,"list-group","list-group-flush"],[4,"ngFor","ngForOf"],[3,"catalogPage",4,"ngIf"],[3,"catalogPage"]],template:function(t,e){1&t&&(n.dc(0,"ul",0),n.Uc(1,cT,2,1,"ng-container",1),n.cc()),2&t&&(n.Kb(1),n.yc("ngForOf",e.catalogPage.children))},encapsulation:2}),t})();const hT=function(t,e){return{"fa-sort-down":t,"fa-sort-up":e}};function uT(t,e){if(1&t&&n.Zb(0,"i",8),2&t){const t=n.qc();n.yc("ngClass",n.Dc(1,hT,!t.isToggled,t.isToggled))}}function _T(t,e){if(1&t&&n.Zb(0,"nitro-catalog-navigation-set-component",9),2&t){const t=n.qc();n.yc("catalogPage",t.catalogPage)}}const dT=function(t){return{"bg-dark":t}};let gT=(()=>{class t{constructor(t){this._catalogService=t,this.catalogPage=null}selectPage(){this.isActive&&this._catalogService.manuallyCollapsePage(this.catalogPage),this._catalogService.component&&this._catalogService.component.selectPage(this.catalogPage)}get activePage(){return this._catalogService.activePage}get activePageData(){return this._catalogService.activePageData}get isDescendant(){return this._catalogService.isDescendant(this.catalogPage,this.activePageData)}get isActive(){return this.catalogPage.pageId===(this.activePage&&this.activePage.pageId)||this.isDescendant}get isCollapsed(){return this._catalogService.manuallyCollapsed.indexOf(this.catalogPage)>=0}get isToggled(){return!this.isCollapsed&&!!this.isActive}get iconUrl(){return u.a.instance.getConfiguration("catalog.asset.icon.url").replace("%name%",(this.catalogPage.icon||0).toString())}get isInSearchView(){return this._catalogService.searchResults instanceof yo}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(gc))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-catalog-navigation-item-component"]],inputs:{catalogPage:"catalogPage"},decls:9,vars:7,consts:[[1,"nav-item"],[1,"d-flex","list-group-item","align-items-center","bg-secondary","rounded","mb-1","overflow-hidden",3,"ngClass","click"],[1,"d-flex","flex-grow-1"],[1,"icon-container"],[1,"icon",3,"src"],[1,"flex-grow-1","mb-0","w-100","text-nowrap"],["class","fas",3,"ngClass",4,"ngIf"],[3,"catalogPage",4,"ngIf"],[1,"fas",3,"ngClass"],[3,"catalogPage"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"li",1),n.nc("click",function(){return e.selectPage()}),n.dc(2,"div",2),n.dc(3,"div",3),n.Zb(4,"img",4),n.cc(),n.dc(5,"p",5),n.Wc(6),n.cc(),n.cc(),n.Uc(7,uT,1,4,"i",6),n.cc(),n.Uc(8,_T,1,1,"nitro-catalog-navigation-set-component",7),n.cc()),2&t&&(n.Kb(1),n.yc("ngClass",n.Cc(5,dT,e.isActive)),n.Kb(3),n.yc("src",e.iconUrl,n.Nc),n.Kb(2),n.Xc(e.catalogPage.localization),n.Kb(1),n.yc("ngIf",!e.isInSearchView&&e.catalogPage.children&&e.catalogPage.children.length),n.Kb(1),n.yc("ngIf",!e.isInSearchView&&e.isToggled&&e.catalogPage.children&&e.catalogPage.children.length>0))},directives:[m.l,m.n,lT],encapsulation:2}),t})();const mT=["nitro-catalog-navigation-component",""];function pT(t,e){if(1&t){const t=n.ec();n.dc(0,"i",6),n.nc("click",function(){return n.Lc(t),n.qc().clearResults()}),n.cc()}}let fT=(()=>{class t{constructor(t){this._catalogService=t,this.searchControl=new ur.d}ngOnInit(){this.subscribe()}ngOnDestroy(){this.unsubscribe()}subscribe(){this.unsubscribe(),this._subscription=this.searchControl.valueChanges.pipe(Object(Mn.a)(),Object(An.a)(500)).subscribe(t=>this.search(t))}unsubscribe(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}search(t){if(!t||!t.length)return void this._catalogService.clearSearchResults();t=t.toLocaleLowerCase();const e=u.a.instance.sessionDataManager.getAllFurnitureData(this);if(!e)return;const s=[];for(const n of e){const e=this._catalogService.getOfferPages(n.purchaseOfferId),i=this._catalogService.getOfferPages(n.rentOfferId);if((e||i)&&-1!==[n.className,n.name,n.description].join(" ").toLocaleLowerCase().indexOf(t)&&(s.push(n),200===s.length))break}this._catalogService.component.handleSearchResults(s)}loadFurnitureData(){}get hasSearchResults(){return this._catalogService.activePage instanceof uc}get catalogPage(){return this._catalogService.component&&this._catalogService.component.activeTab||null}get searchResults(){return this._catalogService.searchResults}clearResults(){this._catalogService.clearSearchResults(),this.searchControl.setValue("")}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(gc))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-catalog-navigation-component",""]],attrs:mT,decls:7,vars:6,consts:[[1,"nitro-catalog-navigation-component","overflow-hidden"],[1,"btn-group","rounded","bg-secondary","mb-1","w-100"],["type","text",1,"form-control","form-control-sm","bg-secondary","rounded","border-0","shadow-none","text-white",3,"placeholder","formControl"],["class","d-flex justify-content-center align-items-center mr-2 fas fa-times-circle",3,"click",4,"ngIf"],[2,"min-height","463px","max-height","463px","height","463px"],[3,"catalogPage"],[1,"d-flex","justify-content-center","align-items-center","mr-2","fas","fa-times-circle",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.Zb(2,"input",2),n.rc(3,"translate"),n.Uc(4,pT,1,0,"i",3),n.cc(),n.dc(5,"perfect-scrollbar",4),n.Zb(6,"nitro-catalog-navigation-set-component",5),n.cc(),n.cc()),2&t&&(n.Kb(2),n.zc("placeholder",n.sc(3,4,"catalog.search")),n.yc("formControl",e.searchControl),n.Kb(2),n.yc("ngIf",e.searchControl.value),n.Kb(2),n.yc("catalogPage",e.searchResults||e.catalogPage))},directives:[ur.b,ur.l,ur.e,m.n,Hr.b,lT],pipes:[ui],encapsulation:2}),t})();const ET=["nitro-catalog-purchase-component",""];function ST(t,e){if(1&t){const t=n.ec();n.dc(0,"div",12),n.dc(1,"p",13),n.Wc(2),n.rc(3,"translate"),n.cc(),n.dc(4,"div",14),n.dc(5,"div",15),n.dc(6,"button",16),n.nc("click",function(){return n.Lc(t),n.qc(2).decrease()}),n.Zb(7,"i",17),n.cc(),n.cc(),n.dc(8,"input",18),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc(2).quantity=e}),n.cc(),n.dc(9,"div",19),n.dc(10,"button",16),n.nc("click",function(){return n.Lc(t),n.qc(2).increase()}),n.Zb(11,"i",20),n.cc(),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc(2);n.Kb(2),n.Xc(n.sc(3,3,"catalog.bundlewidget.quantity")),n.Kb(6),n.yc("ngModel",t.quantity)("max",t.maxQuantity)}}function bT(t,e){if(1&t&&(n.dc(0,"div",21),n.Zb(1,"div",22),n.Wc(2),n.cc()),2&t){const t=n.qc(2);n.Kb(1),n.yc("type",-1),n.Kb(1),n.Yc(" ",t.costCredits," ")}}function vT(t,e){1&t&&(n.dc(0,"div",23),n.Wc(1,"+"),n.cc())}function IT(t,e){if(1&t&&(n.dc(0,"div",21),n.Zb(1,"div",22),n.Wc(2),n.cc()),2&t){const t=n.qc(2);n.Kb(1),n.yc("type",t.pointsType),n.Kb(1),n.Yc(" ",t.costPoints," ")}}function RT(t,e){if(1&t){const t=n.ec();n.dc(0,"button",24),n.nc("click",function(){return n.Lc(t),n.qc(2).purchase(!0)}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"catalog.purchase_confirmation.gift")))}const TT=function(t,e){return{"flex-column h-100 ":t,"justify-content-between":e}},yT=function(t){return[t]},OT=function(t){return{"justify-content-end":t}};function CT(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.Uc(1,ST,12,5,"div",2),n.dc(2,"div",3),n.dc(3,"div",4),n.dc(4,"p",5),n.Wc(5),n.rc(6,"translate"),n.cc(),n.dc(7,"div",6),n.Uc(8,bT,3,2,"div",7),n.Uc(9,vT,2,0,"div",8),n.Uc(10,IT,3,2,"div",7),n.cc(),n.cc(),n.dc(11,"div",9),n.dc(12,"button",10),n.nc("click",function(){return n.Lc(t),n.qc().purchase()}),n.Wc(13),n.rc(14,"translate"),n.cc(),n.Uc(15,RT,3,3,"button",11),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.yc("ngClass",n.Dc(15,TT,t.vertical,t.quantityEnabled)),n.Kb(1),n.yc("ngIf",t.quantityEnabled),n.Kb(1),n.yc("ngClass",n.Cc(18,yT,t.vertical||t.quantityEnabled?"flex-column justify-content-end h-100":"justify-content-between w-100")),n.Kb(1),n.yc("ngClass",n.Cc(20,OT,t.vertical)),n.Kb(2),n.Xc(n.sc(6,11,"catalog.bundlewidget.price")),n.Kb(3),n.yc("ngIf",t.costCredits),n.Kb(1),n.yc("ngIf",t.costCredits&&t.costPoints),n.Kb(1),n.yc("ngIf",t.costPoints),n.Kb(1),n.yc("ngClass",n.Cc(22,yT,t.vertical?"flex-column":"")),n.Kb(2),n.Xc(n.sc(14,13,"buy")),n.Kb(2),n.yc("ngIf",t.isGiftable)}}let AT=(()=>{class t{constructor(t){this._catalogService=t,this.activePage=null,this.activeOffer=null,this.quantityEnabled=!1,this.vertical=!1,this.quantity=1,this.forcedExtra=null}ngOnChanges(t){if(!t.activeOffer)return;const e=t.activeOffer.currentValue;e&&e!==t.activeOffer.previousValue&&this.resetOffer()}resetOffer(){this.quantity=1}purchase(t=!1){this._catalogService.component&&this._catalogService.component.confirmPurchase(this.activePage,this.activeOffer,this.quantity,this.extra,t)}increase(){this.quantity>=this.maxQuantity||this.quantity++}decrease(){this.quantity--,this.quantity<1&&(this.quantity=1)}get costCredits(){return this.activeOffer.priceCredits*this.quantity}get costPoints(){return this.activeOffer.priceActivityPoints*this.quantity}get pointsType(){return this.activeOffer.priceActivityPointsType}get extra(){return this.forcedExtra?this.forcedExtra:this.activeOffer.products[0]&&this.activeOffer.products[0].extraParam}get maxQuantity(){return 99}get isGiftable(){return this.activeOffer.giftable}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(gc))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-catalog-purchase-component",""]],inputs:{activePage:"activePage",activeOffer:"activeOffer",quantityEnabled:"quantityEnabled",vertical:"vertical",forcedExtra:"forcedExtra"},features:[n.Ib],attrs:ET,decls:1,vars:1,consts:[["class","d-flex w-100",3,"ngClass",4,"ngIf"],[1,"d-flex","w-100",3,"ngClass"],["class","d-flex flex-column justify-content-end mr-3 quantity-area",4,"ngIf"],[1,"d-flex",3,"ngClass"],[1,"d-flex","flex-column","justify-content-center","align-items-end","price-area",3,"ngClass"],[1,"mb-0"],[1,"d-flex","mb-1"],["class","d-flex align-items-center mb-0",4,"ngIf"],["class","mx-2 mb-0",4,"ngIf"],[1,"d-flex","btn-group",3,"ngClass"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],["type","button","class","btn btn-secondary btn-sm",3,"click",4,"ngIf"],[1,"d-flex","flex-column","justify-content-end","mr-3","quantity-area"],[1,"mb-1"],[1,"d-flex","input-group"],[1,"input-group-prepend"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["type","number","min","1",1,"form-control","form-control-sm",3,"ngModel","max","ngModelChange"],[1,"input-group-append"],[1,"fas","fa-arrow-right"],[1,"d-flex","align-items-center","mb-0"],["nitro-currency-icon","",1,"mr-1",2,"width","20px","height","20px",3,"type"],[1,"mx-2","mb-0"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(t,e){1&t&&n.Uc(0,CT,16,24,"div",0),2&t&&n.yc("ngIf",!e.activeOffer.products[0].uniqueLimitedItem||e.activeOffer.products[0].uniqueLimitedItemsLeft>0)},directives:[m.n,m.l,ur.p,ur.b,ur.l,ur.n,Iu],pipes:[ui],encapsulation:2}),t})(),MT=(()=>{class t{constructor(t){this._catalogService=t,this.localization=null,this.voucherCode=""}ngOnInit(){}redeem(){this._catalogService.redeemVoucher(this.voucherCode),this.voucherCode=""}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(gc))},t.\u0275cmp=n.Sb({type:t,selectors:[["redeem-voucher-component"]],inputs:{localization:"localization"},decls:7,vars:5,consts:[[1,"d-flex","flex-column","justify-content-center"],[1,"input-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","placeholder","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"input",2),n.nc("ngModelChange",function(t){return e.voucherCode=t}),n.cc(),n.dc(3,"div",3),n.dc(4,"button",4),n.nc("click",function(){return e.redeem()}),n.Wc(5),n.rc(6,"translate"),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(2),n.zc("placeholder",e.localization.texts[1]),n.yc("ngModel",e.voucherCode),n.Kb(3),n.Xc(n.sc(6,3,"redeem")))},directives:[ur.b,ur.l,ur.n],pipes:[ui],encapsulation:2}),t})();const wT=["previewImage"],UT=["nitro-room-preview-component",""];let DT=(()=>{class t{constructor(t,e){this._elementRef=t,this.ngZone=e,this.roomPreviewer=null,this.width=1,this.height=1,this.model=null,this.wallHeight=-1,this.modelScale=!0,this.renderingCanvas=null,this.displayObject=null,this.imageUrl=null,this.isRunning=!1,this.onClick=this.onClick.bind(this)}ngOnChanges(t){if(t.model){const e=t.model.previousValue,s=t.model.currentValue;s&&s!==e&&this.updateModel()}if(t.wallHeight){const e=t.wallHeight.previousValue,s=t.wallHeight.currentValue;s&&s!==e&&this.updateModel()}}ngOnDestroy(){this.stop()}ngAfterViewInit(){if(this.roomPreviewer){if(1===this.width&&(this.width=Math.trunc(this.previewImageElement.offsetWidth)),1===this.height&&(this.height=Math.trunc(this.previewImageElement.offsetHeight)),this.previewImageElement.style.minWidth=this.width+"px",this.previewImageElement.style.minHeight=this.height+"px",this.roomPreviewer){let t=document.defaultView.getComputedStyle(this.previewImageElement,null).backgroundColor;t=z.a.rgbStringToHex(t),t=t.replace("#","0x"),this.roomPreviewer.backgroundColor=parseInt(t,16),this.model&&this.updateModel(),this.displayObject=this.roomPreviewer.getRoomCanvas(this.width,this.height),this.renderingCanvas=this.roomPreviewer.getRenderingCanvas()}this.start()}}start(){this.isRunning||(this.ngZone.runOutsideAngular(()=>{this.previewImageElement.addEventListener("click",this.onClick),u.a.instance.ticker.add(this.update,this)}),this.isRunning=!0)}stop(){this.isRunning&&(this.ngZone.runOutsideAngular(()=>{this.previewImageElement.removeEventListener("click",this.onClick),u.a.instance.ticker.remove(this.update,this)}),this.isRunning=!1)}update(t){if(this.roomPreviewer&&this.renderingCanvas&&this.displayObject&&(this.roomPreviewer.updatePreviewRoomView(),this.renderingCanvas.canvasUpdated)){const t=u.a.instance.renderer.extract.base64(this.displayObject);this.previewImageElement.style.backgroundImage=`url(${t})`}}onClick(t){t&&this.isRunning&&this.roomPreviewer&&(t.shiftKey?this.roomPreviewer.changeRoomObjectDirection():this.roomPreviewer.changeRoomObjectState())}updateModel(){this.roomPreviewer&&this.roomPreviewer.updatePreviewModel(this.model,this.wallHeight,this.modelScale)}get previewImageElement(){return this.previewImage&&this.previewImage.nativeElement||null}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(n.p),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-room-preview-component",""]],viewQuery:function(t,e){if(1&t&&n.cd(wT,1),2&t){let t;n.Hc(t=n.oc())&&(e.previewImage=t.first)}},inputs:{roomPreviewer:"roomPreviewer",width:"width",height:"height",model:"model",wallHeight:"wallHeight",modelScale:"modelScale"},features:[n.Ib],attrs:UT,decls:2,vars:0,consts:[[1,"room-preview-image"],["previewImage",""]],template:function(t,e){1&t&&n.Zb(0,"div",0,1)},encapsulation:2}),t})(),NT=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},providers:[gc,ko],imports:[[cR]]}),t})();n.Oc($o,[m.n,fa,DT,Hr.b,m.m,m.l,m.o,AT],[pl,ui]),n.Oc(yg,[m.n,m.o,MT],[]),n.Oc(pg,[m.n,fa,DT,Hr.b,m.m,ol,m.l,AT],[]),n.Oc(wm,[m.n,fa,DT,AT,m.l,Hr.b,m.m,m.o],[ui]),n.Oc(Fg,[m.n,fa,cl,DT,m.o,ur.t,ur.l,ur.n,m.m,ur.o,ur.v,Hr.b,m.l,AT],[]),n.Oc(gp,[m.n,Dr,Kr,m.m,m.l,fT,VR,XR,JR,GR,aT],[ui]),n.Oc(lT,[m.m,m.n,gT],[]),n.Oc(lc,[m.n,fa,DT,Hr.b,m.m,m.o,AT],[]);let LT=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},providers:[js],imports:[[cR]]}),t})();var PT=s("4k6Q");const xT=["nitro-friendlist-friends-list-component",""];function FT(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"button",2),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().selectThread(s)}),n.Wc(2),n.cc(),n.dc(3,"button",3),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().openFriendProfile(s)}),n.Zb(4,"i",4),n.cc(),n.dc(5,"button",5),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().removeFriend(s)}),n.Zb(6,"i",6),n.cc(),n.cc()}if(2&t){const t=e.$implicit;n.Kb(2),n.Xc(t.name)}}let kT=(()=>{class t{constructor(t,e){this._friendListService=t,this._ngZone=e,this.threadSelector=null,this.onlineOnly=!1}selectThread(t){if(!t)return;const e=this._friendListService.getMessageThread(t.id);e&&this.threadSelector&&this.threadSelector(e)}removeFriend(t){t&&(u.a.instance.communication.connection.send(new PT.a(t.id)),this._friendListService.friends.delete(t.id))}openFriendProfile(t){t&&u.a.instance.communication.connection.send(new Qu.a(t.id))}get friends(){const t=Array.from(this._friendListService.friends.values());return this.onlineOnly?t.filter(t=>t.online):t}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(Hs),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-friendlist-friends-list-component",""]],inputs:{threadSelector:"threadSelector",onlineOnly:"onlineOnly"},attrs:xT,decls:1,vars:1,consts:[["class","btn-group w-100 mb-1",4,"ngFor","ngForOf"],[1,"btn-group","w-100","mb-1"],["type","button",1,"btn","btn-secondary","w-100",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-id-card"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fas","fa-times"]],template:function(t,e){1&t&&n.Uc(0,FT,7,1,"div",0),2&t&&n.yc("ngForOf",e.friends)},directives:[m.m],encapsulation:2}),t})();const WT=["nitro-friendlist-requests-list-component",""];function BT(t,e){if(1&t){const t=n.ec();n.bc(0),n.dc(1,"div",3),n.dc(2,"button",4),n.Wc(3),n.cc(),n.dc(4,"button",5),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc(2).acceptRequest(s.value)}),n.Zb(5,"i",6),n.cc(),n.dc(6,"button",7),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc(2).declineRequest(s.value)}),n.Zb(7,"i",8),n.cc(),n.cc(),n.ac()}if(2&t){const t=e.$implicit;n.Kb(3),n.Xc(t.value.requesterName)}}function VT(t,e){if(1&t){const t=n.ec();n.bc(0),n.dc(1,"button",1),n.nc("click",function(){return n.Lc(t),n.qc().declineAllRequests()}),n.Wc(2),n.rc(3,"translate"),n.cc(),n.Uc(4,BT,8,1,"ng-container",2),n.rc(5,"keyvalue"),n.ac()}if(2&t){const t=n.qc();n.Kb(2),n.Xc(n.sc(3,2,"friendbar.requests.discard")),n.Kb(2),n.yc("ngForOf",n.sc(5,4,t.requests))}}let GT=(()=>{class t{constructor(t){this._friendListService=t}acceptRequest(t){t&&this._friendListService.acceptFriendRequest(t)}declineRequest(t){t&&this._friendListService.removeFriendRequest(t)}declineAllRequests(){this._friendListService.removeAllFriendRequests()}get requests(){return this._friendListService.requests}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(Hs))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-friendlist-requests-list-component",""]],attrs:WT,decls:1,vars:1,consts:[[4,"ngIf"],["type","button",1,"btn","btn-danger","mb-1","w-100",3,"click"],[4,"ngFor","ngForOf"],[1,"btn-group","w-100","mb-1"],["type","button",1,"btn","btn-primary","w-100"],["type","button",1,"btn","btn-success",3,"click"],[1,"fas","fa-check"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fas","fa-times"]],template:function(t,e){1&t&&n.Uc(0,VT,6,6,"ng-container",0),2&t&&n.yc("ngIf",e.requests.size>0)},directives:[m.n,m.m],pipes:[ui,m.h],encapsulation:2}),t})();var KT=s("fubZ");const HT=["nitro-friendlist-search-component",""];function jT(t,e){if(1&t){const t=n.ec();n.dc(0,"div",9),n.dc(1,"button",10),n.Wc(2),n.cc(),n.dc(3,"button",11),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().openProfile(s)}),n.Zb(4,"i",12),n.cc(),n.dc(5,"button",13),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().removeFriend(s)}),n.Zb(6,"i",14),n.cc(),n.cc()}if(2&t){const t=e.$implicit;n.Kb(2),n.Xc(t.avatarName)}}function zT(t,e){1&t&&(n.dc(0,"p"),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t&&(n.Kb(1),n.Yc(" ",n.sc(2,1,"friendlist.search.nofriendsfound"),""))}function YT(t,e){if(1&t){const t=n.ec();n.dc(0,"div",9),n.dc(1,"button",10),n.Wc(2),n.cc(),n.dc(3,"button",11),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().openProfile(s)}),n.Zb(4,"i",12),n.cc(),n.dc(5,"button",15),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().sendFriendRequest(s)}),n.Zb(6,"i",16),n.cc(),n.cc()}if(2&t){const t=e.$implicit,s=n.qc();n.Kb(2),n.Xc(t.avatarName),n.Kb(3),n.yc("disabled",!s.isFriendRequestAllowed(t.avatarId))}}function qT(t,e){1&t&&(n.dc(0,"p"),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t&&(n.Kb(1),n.Yc(" ",n.sc(2,1,"friendlist.search.noothersfound"),""))}let XT=(()=>{class t{constructor(t){this._friendListService=t,this.friendsCollapsed=!0,this.othersCollapsed=!0}searchAvatar(){0!==this.searchQuery.trim().length&&u.a.instance.communication.connection.send(new KT.a(this.searchQuery))}removeFriend(t){t&&(u.a.instance.communication.connection.send(new PT.a(t.avatarId)),this._friendListService.friends.delete(t.avatarId))}openProfile(t){t&&u.a.instance.communication.connection.send(new Qu.a(t.avatarId))}sendFriendRequest(t){this._friendListService.avatarSearchResults.setFriendRequestSent(t.avatarId),this._friendListService.sendFriendRequest(t.avatarId,t.avatarName)}isFriendRequestAllowed(t){return!this._friendListService.avatarSearchResults.isRequestFriend(t)}get searchQuery(){return this._searchQuery}set searchQuery(t){this._searchQuery=t}get friends(){return this._friendListService.avatarSearchResults.friends}get others(){return this._friendListService.avatarSearchResults.others}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(Hs))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-friendlist-search-component",""]],attrs:HT,decls:17,vars:22,consts:[[1,"text-center",2,"margin","5px"],["type","text",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-success","btn-sm",2,"display","inline-block","margin-left","5px",3,"click"],["type","button","aria-controls","collapseFriends",1,"btn","btn-primary","w-100",3,"click"],["id","collapseFriends",3,"ngbCollapse","ngbCollapseChange"],["class","btn-group w-100 mb-1",4,"ngFor","ngForOf"],[4,"ngIf"],["type","button","aria-controls","collapseOthers",1,"btn","btn-primary","w-100",3,"click"],["id","collapseOthers",3,"ngbCollapse","ngbCollapseChange"],[1,"btn-group","w-100","mb-1"],["type","button",1,"btn","btn-secondary","w-100"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-id-card"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fas","fa-times"],["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"fas","fa-plus"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"input",1),n.nc("ngModelChange",function(t){return e.searchQuery=t}),n.cc(),n.dc(2,"button",2),n.nc("click",function(){return e.searchAvatar()}),n.Wc(3),n.rc(4,"translate"),n.cc(),n.cc(),n.dc(5,"button",3),n.nc("click",function(){return e.friendsCollapsed=!e.friendsCollapsed}),n.Wc(6),n.rc(7,"translate"),n.cc(),n.dc(8,"div",4),n.nc("ngbCollapseChange",function(t){return e.friendsCollapsed=t}),n.Uc(9,jT,7,1,"div",5),n.Uc(10,zT,3,3,"p",6),n.cc(),n.dc(11,"button",7),n.nc("click",function(){return e.othersCollapsed=!e.othersCollapsed}),n.Wc(12),n.rc(13,"translate"),n.cc(),n.dc(14,"div",8),n.nc("ngbCollapseChange",function(t){return e.othersCollapsed=t}),n.Uc(15,YT,7,2,"div",5),n.Uc(16,qT,3,3,"p",6),n.cc()),2&t&&(n.Kb(1),n.yc("ngModel",e.searchQuery),n.Kb(2),n.Xc(n.sc(4,12,"generic.search")),n.Kb(2),n.Lb("aria-expanded",!e.friendsCollapsed),n.Kb(1),n.Yc(" ",n.uc(7,14,"friendlist.search.friendscaption","cnt",e.friends?e.friends.length.toString():"0")," "),n.Kb(2),n.yc("ngbCollapse",e.friendsCollapsed),n.Kb(1),n.yc("ngForOf",e.friends),n.Kb(1),n.yc("ngIf",0===(null==e.friends?null:e.friends.length)),n.Kb(1),n.Lb("aria-expanded",!e.othersCollapsed),n.Kb(1),n.Yc(" ",n.uc(13,18,"friendlist.search.otherscaption","cnt",e.others?e.others.length.toString():"0")," "),n.Kb(2),n.yc("ngbCollapse",e.othersCollapsed),n.Kb(1),n.yc("ngForOf",e.others),n.Kb(1),n.yc("ngIf",0===(null==e.others?null:e.others.length)))},directives:[ur.b,ur.l,ur.n,t_.b,m.m,m.n],pipes:[ui],encapsulation:2}),t})();const ZT=["nitro-friendlist-friends-viewer-component",""];function QT(t,e){if(1&t&&(n.dc(0,"span",9),n.Wc(1),n.cc()),2&t){const t=n.qc();n.Kb(1),n.Xc(t.totalFriendRequests)}}function JT(t,e){if(1&t&&n.Zb(0,"div",10),2&t){const t=n.qc();n.yc("threadSelector",t.threadSelector)("onlineOnly",t.onlineOnly)}}function $T(t,e){1&t&&n.Zb(0,"div",11)}function ty(t,e){1&t&&n.Zb(0,"div",12)}const ey=function(t){return{active:t}};let sy=(()=>{class t{constructor(t,e){this._friendListService=t,this._ngZone=e,this.threadSelector=null,this._searchShowing=!1,this._requestsShowing=!1,this._friendsShowing=!0,this._onlineOnly=!0}showOnlineFriends(){this.showFriends(),this._onlineOnly=!0}showFriends(){this._searchShowing=!1,this._requestsShowing=!1,this._friendsShowing=!0,this._onlineOnly=!1}showRequests(){this._searchShowing=!1,this._requestsShowing=!0,this._friendsShowing=!1,this._onlineOnly=!1}showSearch(){this._searchShowing=!0,this._requestsShowing=!1,this._friendsShowing=!1,this._onlineOnly=!1}get searchShowing(){return this._searchShowing}get requestsShowing(){return this._requestsShowing}get friendsShowing(){return this._friendsShowing}get onlineOnly(){return this._onlineOnly}get totalFriendRequests(){return this._friendListService.requests.size}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(Hs),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-friendlist-friends-viewer-component",""]],inputs:{threadSelector:"threadSelector"},attrs:ZT,decls:19,vars:28,consts:[[1,"btn-group","w-100","mb-1"],["type","button",1,"btn","btn-secondary",3,"ngClass","click"],["class","badge badge-danger ml-1","style","font-size:12px;",4,"ngIf"],["type","button",1,"btn","btn-success",3,"ngClass","click"],[1,"d-flex","w-100"],[1,"position-relative","w-100",2,"min-height","350px","max-height","350px","height","350px"],["nitro-friendlist-friends-list-component","","class","w-100",3,"threadSelector","onlineOnly",4,"ngIf"],["nitro-friendlist-requests-list-component","","class","w-100",4,"ngIf"],["nitro-friendlist-search-component","","class","w-100",4,"ngIf"],[1,"badge","badge-danger","ml-1",2,"font-size","12px"],["nitro-friendlist-friends-list-component","",1,"w-100",3,"threadSelector","onlineOnly"],["nitro-friendlist-requests-list-component","",1,"w-100"],["nitro-friendlist-search-component","",1,"w-100"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"button",1),n.nc("click",function(){return e.showOnlineFriends()}),n.Wc(2),n.rc(3,"translate"),n.cc(),n.dc(4,"button",1),n.nc("click",function(){return e.showFriends()}),n.Wc(5),n.rc(6,"translate"),n.cc(),n.dc(7,"button",1),n.nc("click",function(){return e.showRequests()}),n.Wc(8),n.rc(9,"translate"),n.Uc(10,QT,2,1,"span",2),n.cc(),n.dc(11,"button",3),n.nc("click",function(){return e.showSearch()}),n.Wc(12),n.rc(13,"translate"),n.cc(),n.cc(),n.dc(14,"div",4),n.dc(15,"perfect-scrollbar",5),n.Uc(16,JT,1,2,"div",6),n.Uc(17,$T,1,0,"div",7),n.Uc(18,ty,1,0,"div",8),n.cc(),n.cc()),2&t&&(n.Kb(1),n.yc("ngClass",n.Cc(20,ey,e.friendsShowing&&e.onlineOnly)),n.Kb(1),n.Xc(n.sc(3,12,"friendlist.online")),n.Kb(2),n.yc("ngClass",n.Cc(22,ey,e.friendsShowing&&!e.onlineOnly)),n.Kb(1),n.Xc(n.sc(6,14,"friendlist.friends.all")),n.Kb(2),n.yc("ngClass",n.Cc(24,ey,e.requestsShowing)),n.Kb(1),n.Xc(n.sc(9,16,"friendbar.requests.title")),n.Kb(2),n.yc("ngIf",e.totalFriendRequests>0),n.Kb(1),n.yc("ngClass",n.Cc(26,ey,e.searchShowing)),n.Kb(1),n.Xc(n.sc(13,18,"generic.search")),n.Kb(4),n.yc("ngIf",e.friendsShowing),n.Kb(1),n.yc("ngIf",e.requestsShowing),n.Kb(1),n.yc("ngIf",e.searchShowing))},directives:[m.l,m.n,Hr.b,kT,GT,XT],pipes:[ui],encapsulation:2}),t})();const ny=["nitro-friendlist-thread-list-component",""],iy=function(t){return{active:t}};function ry(t,e){if(1&t){const t=n.ec();n.dc(0,"button",1),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().selectThread(s)}),n.Wc(1),n.cc()}if(2&t){const t=e.$implicit,s=n.qc();n.yc("ngClass",n.Cc(2,iy,s.currentThread===t)),n.Kb(1),n.Xc(t.participant.name)}}let ay=(()=>{class t{constructor(t,e){this._friendListService=t,this._ngZone=e,this.currentThread=null,this.threadSelector=null}selectThread(t){t&&this.threadSelector&&this.threadSelector(t)}get threads(){const t=Array.from(this._friendListService.threads.values());return t.sort((t,e)=>e.lastUpdated-t.lastUpdated),t}}return t.THREAD_SELECTED="FLTLC_THREAD_SELECTED",t.\u0275fac=function(e){return new(e||t)(n.Yb(Hs),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-friendlist-thread-list-component",""]],inputs:{currentThread:"currentThread",threadSelector:"threadSelector"},attrs:ny,decls:1,vars:1,consts:[["type","button","class","btn btn-secondary w-100 mb-1",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-secondary","w-100","mb-1",3,"ngClass","click"]],template:function(t,e){1&t&&n.Uc(0,ry,2,4,"button",0),2&t&&n.yc("ngForOf",e.threads)},directives:[m.m,m.l],encapsulation:2}),t})();var oy=s("3E0/"),cy=s("Fcb+"),ly=s("jNJ0"),hy=s("FV0X"),uy=s("/52j");const _y=["threadScroller"],dy=["nitro-friendlist-thread-viewer-component",""];function gy(t,e){if(1&t){const t=n.ec();n.dc(0,"div",19),n.nc("click",function(){return n.Lc(t),n.qc().followParticipant()}),n.Zb(1,"i",20),n.cc()}}function my(t,e){if(1&t){const t=n.ec();n.dc(0,"button",21),n.nc("click",function(){n.Lc(t);const s=e.index;return n.qc().changeRelation(s)}),n.Wc(1),n.cc()}if(2&t){const t=e.$implicit;n.Kb(1),n.Xc(t)}}function py(t,e){1&t&&(n.dc(0,"b"),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t&&(n.Kb(1),n.Yc("",n.sc(2,1,"messenger.invitation")," "))}const fy=function(t){return[t]};function Ey(t,e){if(1&t&&(n.dc(0,"div",22),n.dc(1,"div",23),n.dc(2,"div",24),n.Uc(3,py,3,3,"b",25),n.Wc(4),n.cc(),n.cc(),n.dc(5,"div",23),n.dc(6,"span",6),n.Wc(7),n.cc(),n.cc(),n.cc()),2&t){const t=e.$implicit,s=n.qc();n.Kb(1),n.yc("ngClass",n.Cc(5,fy,t.senderId===s.participant.id?"thread-viewer-list-left":"thread-viewer-list-right")),n.Kb(2),n.yc("ngIf",1==t.type),n.Kb(1),n.Xc(t.message),n.Kb(1),n.yc("ngClass",n.Cc(7,fy,t.senderId===s.participant.id?"thread-viewer-list-left":"thread-viewer-list-right")),n.Kb(2),n.Xc(s.timeAgo(t.date,t.secondsSinceSent))}}let Sy=(()=>{class t{constructor(t,e,s){this._friendListService=t,this._settingsService=e,this._ngZone=s,this.thread=null,this._subscription=null}ngOnChanges(t){const e=t.thread.previousValue,s=t.thread.currentValue;s&&s!==e?this.prepareThread():s||s===e||this.unsubscribe()}ngOnDestroy(){this.unsubscribe()}ngAfterViewInit(){this.scrollToBottom()}unsubscribe(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}prepareThread(){this.unsubscribe(),this._subscription=this.thread.emitter.asObservable().pipe(Object(oy.a)(1)).subscribe(t=>{switch(t){case ks.MESSAGE_RECEIVED:return void this.messageReceived()}})}messageReceived(){this.scrollToBottom()}sendMessage(t){t&&t.length&&(this._ngZone.run(()=>{this.thread.insertChat(u.a.instance.sessionDataManager.userId,t,0,null),this.thread.setRead()}),u.a.instance.communication.connection.send(new ly.a(this.participant.id,t)))}changeRelation(t){this.participant&&-1!==uy.a.RELATIONSHIP_TYPES.indexOf(t)&&u.a.instance.communication.connection.send(new hy.a(this.participant.id,t))}followParticipant(){this.participant&&(this._settingsService.toggleFriendList(),u.a.instance.communication.connection.send(new cy.a(this.participant.id)))}onKeyDownEvent(t){if(!t)return;const e=t.target;if(e)switch(t.key){case"Enter":return this.sendMessage(e.value),void(e.value="")}}scrollToBottom(){this.threadScroller&&this.threadScroller.directiveRef.scrollToBottom(0,200)}timeAgo(t,e){const s=Date.now()/1e3-t.getTime()/1e3+e;return gu.format(s,".ago",1)}get participant(){return this.thread.participant}get chats(){return this.thread.chats}get relations(){return uy.a.RELATIONSHIP_NAMES}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(Hs),n.Yb(g),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-friendlist-thread-viewer-component",""]],viewQuery:function(t,e){if(1&t&&n.cd(_y,1),2&t){let t;n.Hc(t=n.oc())&&(e.threadScroller=t.first)}},inputs:{thread:"thread"},features:[n.Ib],attrs:dy,decls:24,vars:17,consts:[[1,"nitro-friendlist-thread-viewer-component"],[1,"d-flex","flex-row","thread-viewer-user","mb-1","justify-content-between"],[1,"d-flex","flex-row"],["nitro-avatar-image","",1,"avatar-img",3,"headOnly","figure","direction"],[1,"thread-viewer-user-info"],[1,"ml-2","p-1","rounded-circle","align-self-center",3,"ngClass"],[1,"d-block","text-muted","small","text-truncate"],["ngbDropdown","",1,"input-group-prepend","align-self-start"],[1,"btn-group"],["class","btn btn-sm btn-dgreen align-self-center",3,"click",4,"ngIf"],["type","button","ngbDropdownToggle","",1,"btn","btn-primary","btn-sm"],["ngbDropdownMenu","",1,"dropdown-menu"],["class","dropdown-item small","ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],[1,"position-relative","w-100","my-1",2,"min-height","299px","max-height","299px","height","299px"],["threadScroller",""],[1,"thread-viewer-list"],["class","d-flex flex-column",4,"ngFor","ngForOf"],[1,"thread-viewer-input"],["type","text","maxLength","420",1,"thread-viewer-input","form-control",3,"placeholder","keydown.enter"],[1,"btn","btn-sm","btn-dgreen","align-self-center",3,"click"],[1,"fas","fa-arrow-right"],["ngbDropdownItem","",1,"dropdown-item","small",3,"click"],[1,"d-flex","flex-column"],[1,"thread-viewer-list-item","mb-1",3,"ngClass"],[1,"thread-viewer-list-item-message","p-2"],[4,"ngIf"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"div",2),n.Zb(3,"div",3),n.dc(4,"div",4),n.dc(5,"b",2),n.Wc(6),n.Zb(7,"div",5),n.cc(),n.dc(8,"span",6),n.Wc(9),n.cc(),n.cc(),n.cc(),n.dc(10,"div",7),n.dc(11,"div",8),n.Uc(12,gy,2,0,"div",9),n.dc(13,"button",10),n.Wc(14),n.cc(),n.dc(15,"div",11),n.Uc(16,my,2,1,"button",12),n.cc(),n.cc(),n.cc(),n.cc(),n.dc(17,"perfect-scrollbar",13,14),n.dc(19,"div",15),n.Uc(20,Ey,8,9,"div",16),n.cc(),n.cc(),n.dc(21,"div",17),n.dc(22,"input",18),n.nc("keydown.enter",function(t){return e.onKeyDownEvent(t)}),n.rc(23,"translate"),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(3),n.yc("headOnly",1)("figure",e.thread.participant.figure)("direction",2),n.Kb(3),n.Xc(e.participant.name),n.Kb(1),n.yc("ngClass",n.Cc(15,fy,e.participant.online?"bg-success":"bg-danger")),n.Kb(2),n.Xc(e.participant.motto),n.Kb(3),n.yc("ngIf",e.participant.online),n.Kb(2),n.Xc(e.relations[e.thread.participant.relationshipStatus]),n.Kb(2),n.yc("ngForOf",e.relations),n.Kb(4),n.yc("ngForOf",e.chats),n.Kb(2),n.yc("placeholder",n.uc(23,11,"messenger.window.input.default","FRIEND_NAME",e.thread.participant.name)))},directives:[ba,m.l,t_.c,m.n,t_.g,t_.e,m.m,Hr.b,t_.d],pipes:[ui],encapsulation:2}),t})(),by=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},providers:[Hs],imports:[[cR,t_.j]]}),t})();n.Oc(og,[m.n,Dr,Kr,m.l,Hr.b,ay,sy,Sy],[ui]);const vy=["nitro-group-image-selector-component",""],Iy=function(t){return{active:t}};function Ry(t,e){if(1&t){const t=n.ec();n.dc(0,"button",6),n.nc("click",function(){return n.Lc(t),n.qc().selectPart(0)}),n.Zb(1,"i",7),n.cc()}if(2&t){const t=n.qc();n.yc("ngClass",n.Cc(1,Iy,0===t.part.key))}}function Ty(t,e){if(1&t){const t=n.ec();n.dc(0,"button",6),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().selectPart(s.key)}),n.Zb(1,"nitro-badge",8),n.cc()}if(2&t){const t=e.$implicit,s=n.qc();n.yc("ngClass",n.Cc(3,Iy,s.part.key===t.key)),n.Kb(1),n.yc("badge",s.getBadgeCode(t.key))("isGroup",!0)}}let yy=(()=>{class t{constructor(){this.onSelect=new n.r}getBadgeCode(t){return(this.part.isBase?"b":"s")+(t<100?"0":"")+(t<10?"0":"")+t+(this.part.color<10?"0"+this.part.color:this.part.color)+4}selectPart(t){this.onSelect.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-group-image-selector-component",""]],inputs:{items:"items",part:"part"},outputs:{onSelect:"onSelect"},attrs:vy,decls:7,vars:4,consts:[[1,"nitro-group-image-selector-component","mb-3"],[2,"min-height","414px","max-height","414px","height","414px"],[1,"grid-container"],[1,"grid-items","grid-8"],["class","item-detail btn btn-primary btn-sm p-0",3,"ngClass","click",4,"ngIf"],["class","item-detail btn btn-primary btn-sm p-0",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"item-detail","btn","btn-primary","btn-sm","p-0",3,"ngClass","click"],[1,"fas","fa-times"],[3,"badge","isGroup"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"perfect-scrollbar",1),n.dc(2,"div",2),n.dc(3,"div",3),n.Uc(4,Ry,2,3,"button",4),n.Uc(5,Ty,2,5,"button",5),n.rc(6,"keyvalue"),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(4),n.yc("ngIf",!e.part.isBase),n.Kb(1),n.yc("ngForOf",n.sc(6,2,e.items)))},directives:[Hr.b,m.n,m.m,m.l,cl],pipes:[m.h],encapsulation:2}),t})();function Oy(t,e){if(1&t&&n.Zb(0,"nitro-badge",4),2&t){const t=n.qc().$implicit;n.yc("badge",t.value.code)("isGroup",!0)}}function Cy(t,e){1&t&&n.Zb(0,"i",19)}function Ay(t,e){if(1&t){const t=n.ec();n.dc(0,"button",20),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().$implicit.value.position=s}),n.cc()}if(2&t){const t=e.$implicit,s=n.qc().$implicit;n.yc("ngClass",s.value.position===t?"btn-light":"btn-primary")}}const My=function(t){return{backgroundColor:t}};function wy(t,e){if(1&t){const t=n.ec();n.dc(0,"button",21),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().$implicit.value.color=s.key}),n.cc()}2&t&&n.Qc(n.Cc(2,My,"#"+e.$implicit.value))}const Uy=function(t){return{opacity:t}};function Dy(t,e){if(1&t){const t=n.ec();n.dc(0,"div",9),n.dc(1,"button",10),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc(2).openPartSelector(s.value)}),n.Uc(2,Oy,1,2,"nitro-badge",11),n.Uc(3,Cy,1,0,"i",12),n.cc(),n.dc(4,"div",13),n.dc(5,"div",14),n.Uc(6,Ay,1,1,"button",15),n.cc(),n.cc(),n.dc(7,"div",16),n.dc(8,"div",17),n.Uc(9,wy,1,4,"button",18),n.rc(10,"keyvalue"),n.cc(),n.cc(),n.cc()}if(2&t){const t=e.$implicit,s=n.qc(2);n.Kb(2),n.yc("ngIf",t.value.code),n.Kb(1),n.yc("ngIf",!t.value.code),n.Kb(1),n.yc("ngStyle",n.Cc(7,Uy,t.value.isBase?0:1)),n.Kb(2),n.yc("ngForOf",s.positions),n.Kb(3),n.yc("ngForOf",n.sc(10,5,s.badgePartColors))}}function Ny(t,e){if(1&t&&(n.dc(0,"div"),n.Uc(1,Dy,11,9,"div",8),n.rc(2,"keyvalue"),n.cc()),2&t){const t=n.qc();n.Kb(1),n.yc("ngForOf",n.sc(2,1,t.groupSettings.badgeParts))}}function Ly(t,e){if(1&t){const t=n.ec();n.dc(0,"div",22),n.nc("onSelect",function(e){return n.Lc(t),n.qc().onPartSelected(e)}),n.cc()}if(2&t){const t=n.qc();n.yc("items",t.badgePartBeingSelected&&t.badgePartBeingSelected.isBase?t.badgeBases:t.badgeSymbols)("part",t.badgePartBeingSelected)}}let Py=(()=>{class t{constructor(t){this._groupsService=t,this._clear()}_clear(){this._badgeBases=new Map,this._badgeSymbols=new Map,this._badgePartColors=new Map,this._badgePartBeingSelected=null,this._selectorVisible=!1,this._positions=[];for(let t=0;t<9;t++)this._positions.push(t)}ngOnInit(){this._clear(),this.loadBadgeData()}loadBadgeData(){this._badgeBases=this._groupsService.badgeBases,this._badgeSymbols=this._groupsService.badgeSymbols,this._badgePartColors=this._groupsService.badgePartColors,this.setDefaultValues&&(this.groupSettings.getBadgePart(0).key=this._badgeSymbols.keys().next().value,this.groupSettings.setPartsColor(this._badgePartColors.keys().next().value))}openPartSelector(t){this._badgePartBeingSelected=t,this._selectorVisible=!0}onPartSelected(t){this._badgePartBeingSelected.key=t,this._badgePartBeingSelected=null,this._selectorVisible=!1}get badgePartBeingSelected(){return this._badgePartBeingSelected}get selectorVisible(){return this._selectorVisible}get positions(){return this._positions}get badgeBases(){return this._badgeBases}get badgeSymbols(){return this._badgeSymbols}get badgePartColors(){return this._badgePartColors}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(u_))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-group-creator-tab-badge-component"]],inputs:{groupSettings:"groupSettings",setDefaultValues:"setDefaultValues"},outputs:{groupSettings:"groupSettings"},decls:10,vars:7,consts:[[1,"mb-3"],[1,"row"],[1,"col-3"],[1,"btn","btn-primary",2,"width","120px","height","67px"],[3,"badge","isGroup"],[1,"col-9"],[4,"ngIf"],["nitro-group-image-selector-component","",3,"items","part","onSelect",4,"ngIf"],["class","d-flex flex-row justify-content-between mb-3",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","justify-content-between","mb-3"],[1,"btn","btn-primary",2,"width","120px","height","67px",3,"click"],[3,"badge","isGroup",4,"ngIf"],["class","fas fa-plus","style","width: 39px",4,"ngIf"],[1,"grid-container","ml-3",3,"ngStyle"],[1,"grid-items","grid-3","pb-1"],["class","item-detail btn btn-sm",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"grid-container","ml-3"],[1,"grid-items","grid-8","pb-1"],["class","item-detail btn btn-primary btn-sm",3,"style","click",4,"ngFor","ngForOf"],[1,"fas","fa-plus",2,"width","39px"],[1,"item-detail","btn","btn-sm",3,"ngClass","click"],[1,"item-detail","btn","btn-primary","btn-sm",3,"click"],["nitro-group-image-selector-component","",3,"items","part","onSelect"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Wc(1),n.rc(2,"translate"),n.cc(),n.dc(3,"div",1),n.dc(4,"div",2),n.dc(5,"button",3),n.Zb(6,"nitro-badge",4),n.cc(),n.cc(),n.dc(7,"div",5),n.Uc(8,Ny,3,3,"div",6),n.Uc(9,Ly,1,2,"div",7),n.cc(),n.cc()),2&t&&(n.Kb(1),n.Xc(n.sc(2,5,"group.edit.badge.badge")),n.Kb(5),n.yc("badge",e.groupSettings.currentBadgeCode)("isGroup",!0),n.Kb(2),n.yc("ngIf",!e.selectorVisible),n.Kb(1),n.yc("ngIf",e.selectorVisible))},directives:[cl,m.n,m.m,m.o,m.l,yy],pipes:[ui,m.h],encapsulation:2}),t})();const xy=function(t){return{backgroundColor:t}};function Fy(t,e){if(1&t){const t=n.ec();n.dc(0,"button",10),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().groupSettings.colorA=s.key}),n.cc()}2&t&&n.Qc(n.Cc(2,xy,"#"+e.$implicit.value))}function ky(t,e){if(1&t){const t=n.ec();n.dc(0,"button",10),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().groupSettings.colorB=s.key}),n.cc()}2&t&&n.Qc(n.Cc(2,xy,"#"+e.$implicit.value))}let Wy=(()=>{class t{constructor(t){this._groupsService=t}ngOnInit(){this.loadColorsData()}loadColorsData(){this._groupColorsA=this._groupsService.groupColorsA,this._groupColorsB=this._groupsService.groupColorsB,this.setDefaultValues&&(this.groupSettings.colorA=this._groupColorsA.keys().next().value,this.groupSettings.colorB=this._groupColorsB.keys().next().value)}get groupColorsA(){return this._groupColorsA}get groupColorsB(){return this._groupColorsB}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(u_))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-group-creator-tab-colors-component"]],inputs:{groupSettings:"groupSettings",setDefaultValues:"setDefaultValues"},outputs:{groupSettings:"groupSettings"},decls:27,vars:26,consts:[[1,"mb-3"],[1,"d-flex","justify-content-between","mb-3"],[1,"mr-3"],[1,"mb-1"],[1,"btn-group",2,"height","67px","width","110px"],[1,"btn","btn-primary","btn-lg"],[1,"grid-container"],[1,"grid-items","grid-9","pb-1"],["class","item-detail btn btn-primary btn-sm",3,"style","click",4,"ngFor","ngForOf"],[1,"grid-items","grid-6","pb-1"],[1,"item-detail","btn","btn-primary","btn-sm",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Wc(1),n.rc(2,"translate"),n.cc(),n.dc(3,"div",1),n.dc(4,"div",2),n.dc(5,"div",3),n.Wc(6),n.rc(7,"translate"),n.cc(),n.dc(8,"div",4),n.Zb(9,"button",5),n.Zb(10,"button",5),n.cc(),n.cc(),n.dc(11,"div",2),n.dc(12,"div",3),n.Wc(13),n.rc(14,"translate"),n.cc(),n.dc(15,"div",6),n.dc(16,"div",7),n.Uc(17,Fy,1,4,"button",8),n.rc(18,"keyvalue"),n.cc(),n.cc(),n.cc(),n.dc(19,"div"),n.dc(20,"div",3),n.Wc(21),n.rc(22,"translate"),n.cc(),n.dc(23,"div",6),n.dc(24,"div",9),n.Uc(25,ky,1,4,"button",8),n.rc(26,"keyvalue"),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(1),n.Xc(n.sc(2,10,"group.create.stepcaption.3")),n.Kb(5),n.Xc(n.sc(7,12,"group.edit.color.guild.color")),n.Kb(3),n.Qc(n.Cc(22,xy,"#"+e.groupColorsA.get(e.groupSettings.colorA))),n.Kb(1),n.Qc(n.Cc(24,xy,"#"+e.groupColorsB.get(e.groupSettings.colorB))),n.Kb(3),n.Xc(n.sc(14,14,"group.edit.color.primary.color")),n.Kb(4),n.yc("ngForOf",n.sc(18,16,e.groupColorsA)),n.Kb(4),n.Xc(n.sc(22,18,"group.edit.color.secondary.color")),n.Kb(4),n.yc("ngForOf",n.sc(26,20,e.groupColorsB)))},directives:[m.m],pipes:[ui,m.h],encapsulation:2}),t})();const By=function(t){return{backgroundColor:t}};let Vy=(()=>{class t{constructor(t){this._groupsService=t}ngOnInit(){this.loadColorsData()}loadColorsData(){this._groupColorsA=this._groupsService.groupColorsA,this._groupColorsB=this._groupsService.groupColorsB}get groupColorsA(){return this._groupColorsA}get groupColorsB(){return this._groupColorsB}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(u_))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-group-creator-tab-confirmation-component"]],inputs:{groupSettings:"groupSettings",groupCost:"groupCost"},decls:26,vars:29,consts:[[1,"mb-3"],[1,"row"],[1,"col-4"],[1,"mb-1"],[1,"btn","btn-primary","mb-3",2,"width","120px","height","67px"],[3,"badge","isGroup"],[1,"btn-group",2,"height","67px","width","120px"],[1,"btn","btn-primary","btn-lg"],[1,"col-8"],[1,"small","mb-3"],[1,"mb-2",3,"innerHtml"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Wc(1),n.rc(2,"translate"),n.cc(),n.dc(3,"div",1),n.dc(4,"div",2),n.dc(5,"div",3),n.Wc(6),n.rc(7,"translate"),n.cc(),n.dc(8,"button",4),n.Zb(9,"nitro-badge",5),n.cc(),n.dc(10,"div",3),n.Wc(11),n.rc(12,"translate"),n.cc(),n.dc(13,"div",6),n.Zb(14,"button",7),n.Zb(15,"button",7),n.cc(),n.cc(),n.dc(16,"div",8),n.dc(17,"div"),n.Wc(18),n.cc(),n.dc(19,"div",9),n.Wc(20),n.cc(),n.Zb(21,"div",10),n.rc(22,"translate"),n.dc(23,"div"),n.Wc(24),n.rc(25,"translate"),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(1),n.Xc(n.sc(2,13,"group.create.stepcaption.4")),n.Kb(5),n.Xc(n.sc(7,15,"group.create.confirm.guildbadge")),n.Kb(3),n.yc("badge",e.groupSettings.currentBadgeCode)("isGroup",!0),n.Kb(2),n.Xc(n.sc(12,17,"group.create.confirm.guildcolors")),n.Kb(3),n.Qc(n.Cc(25,By,"#"+e.groupColorsA.get(e.groupSettings.colorA))),n.Kb(1),n.Qc(n.Cc(27,By,"#"+e.groupColorsB.get(e.groupSettings.colorB))),n.Kb(3),n.Xc(e.groupSettings.name),n.Kb(2),n.Xc(e.groupSettings.description),n.Kb(1),n.yc("innerHtml",n.sc(22,19,"group.create.confirm.info"),n.Mc),n.Kb(3),n.Xc(n.uc(25,21,"group.create.confirm.buyinfo","amount",e.groupCost)))},directives:[cl],pipes:[ui],encapsulation:2}),t})();function Gy(t,e){1&t&&(n.dc(0,"small",8),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"group.edit.error.no.name.or.room.selected")))}function Ky(t,e){if(1&t&&(n.dc(0,"option",9),n.Wc(1),n.cc()),2&t){const t=e.$implicit;n.yc("value",t.key),n.Kb(1),n.Xc(t.value)}}const Hy=function(t){return{"is-invalid":t}};let jy=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-group-creator-tab-info-component"]],inputs:{groupSettings:"groupSettings",showNameError:"showNameError",showDescriptionError:"showDescriptionError",showRoomError:"showRoomError",availableRooms:"availableRooms"},outputs:{groupSettings:"groupSettings"},decls:27,vars:34,consts:[[1,"mb-3"],["class","form-text text-muted invalid-feedback mb-3",4,"ngIf"],[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngClass","ngModel","ngModelChange"],[1,"form-control","form-control-sm",3,"ngClass","ngModel","ngModelChange"],["selected","","disabled","","value","0"],[3,"value",4,"ngFor","ngForOf"],[1,"form-text","text-muted"],[1,"form-text","text-muted","invalid-feedback","mb-3"],[3,"value"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Wc(1),n.rc(2,"translate"),n.cc(),n.Uc(3,Gy,3,3,"small",1),n.dc(4,"div",2),n.dc(5,"label"),n.Wc(6),n.rc(7,"translate"),n.cc(),n.dc(8,"input",3),n.nc("ngModelChange",function(t){return e.groupSettings.name=t}),n.cc(),n.cc(),n.dc(9,"div",2),n.dc(10,"label"),n.Wc(11),n.rc(12,"translate"),n.cc(),n.dc(13,"textarea",4),n.nc("ngModelChange",function(t){return e.groupSettings.description=t}),n.cc(),n.cc(),n.dc(14,"div",2),n.dc(15,"label"),n.Wc(16),n.rc(17,"translate"),n.cc(),n.dc(18,"select",4),n.nc("ngModelChange",function(t){return e.groupSettings.roomId=t}),n.dc(19,"option",5),n.Wc(20),n.rc(21,"translate"),n.cc(),n.Uc(22,Ky,2,2,"option",6),n.rc(23,"keyvalue"),n.cc(),n.dc(24,"small",7),n.Wc(25),n.rc(26,"translate"),n.cc(),n.cc()),2&t&&(n.Kb(1),n.Xc(n.sc(2,14,"group.edit.tabcaption.1")),n.Kb(2),n.yc("ngIf",e.showNameError||e.showRoomError),n.Kb(3),n.Xc(n.sc(7,16,"group.edit.name")),n.Kb(2),n.yc("ngClass",n.Cc(28,Hy,e.showNameError))("ngModel",e.groupSettings.name),n.Kb(3),n.Xc(n.sc(12,18,"group.edit.desc")),n.Kb(2),n.yc("ngClass",n.Cc(30,Hy,e.showDescriptionError))("ngModel",e.groupSettings.description),n.Kb(3),n.Xc(n.sc(17,20,"group.edit.base")),n.Kb(2),n.yc("ngClass",n.Cc(32,Hy,e.showRoomError))("ngModel",e.groupSettings.roomId),n.Kb(2),n.Xc(n.sc(21,22,"group.edit.base.select.room")),n.Kb(2),n.yc("ngForOf",n.sc(23,24,e.availableRooms)),n.Kb(3),n.Xc(n.sc(26,26,"group.edit.base.warning")))},directives:[m.n,ur.b,m.l,ur.l,ur.n,ur.t,ur.o,ur.v,m.m],pipes:[ui,m.h],encapsulation:2}),t})();const zy=function(t){return{"is-invalid":t}};let Yy=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-group-manager-tab-info-component"]],inputs:{groupSettings:"groupSettings",showNameError:"showNameError",showDescriptionError:"showDescriptionError"},outputs:{groupSettings:"groupSettings"},decls:13,vars:17,consts:[[1,"mb-3"],[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngClass","ngModel","ngModelChange"],[1,"form-control","form-control-sm",3,"ngClass","ngModel","ngModelChange"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Wc(1),n.rc(2,"translate"),n.cc(),n.dc(3,"div",1),n.dc(4,"label"),n.Wc(5),n.rc(6,"translate"),n.cc(),n.dc(7,"input",2),n.nc("ngModelChange",function(t){return e.groupSettings.name=t}),n.cc(),n.cc(),n.dc(8,"div",1),n.dc(9,"label"),n.Wc(10),n.rc(11,"translate"),n.cc(),n.dc(12,"textarea",3),n.nc("ngModelChange",function(t){return e.groupSettings.description=t}),n.cc(),n.cc()),2&t&&(n.Kb(1),n.Xc(n.sc(2,7,"group.edit.tabcaption.1")),n.Kb(4),n.Xc(n.sc(6,9,"group.edit.name")),n.Kb(2),n.yc("ngClass",n.Cc(13,zy,e.showNameError))("ngModel",e.groupSettings.name),n.Kb(3),n.Xc(n.sc(11,11,"group.edit.desc")),n.Kb(2),n.yc("ngClass",n.Cc(15,zy,e.showDescriptionError))("ngModel",e.groupSettings.description))},directives:[ur.b,m.l,ur.l,ur.n],pipes:[ui],encapsulation:2}),t})(),qy=(()=>{class t{constructor(){this._groupSettings=null,this._state="0",this._canMembersDecorate=!1}get groupSettings(){return this._groupSettings}set groupSettings(t){this._groupSettings=t,this._state=this.groupSettings.state.toString(),this._canMembersDecorate=this.groupSettings.canMembersDecorate}get state(){return this._state}set state(t){this._state=t,this._groupSettings.state=parseInt(t)}get canMembersDecorate(){return this._canMembersDecorate}set canMembersDecorate(t){this._canMembersDecorate=t,this._groupSettings.canMembersDecorate=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-group-manager-tab-preferences-component"]],inputs:{groupSettings:"groupSettings"},decls:41,vars:34,consts:[[1,"mb-3"],[1,"mb-1"],[1,"form-check","mb-1"],["type","radio","name","state","id","radioState0","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],["for","radioState0",1,"form-check-label"],[1,"fas","fa-user-plus","mr-2"],["id","passwordHelpBlock",1,"form-text","text-muted"],["type","radio","name","state","id","radioState1","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["for","radioState1",1,"form-check-label"],[1,"fas","fa-key","mr-2"],[1,"form-check","mb-3"],["type","radio","name","state","id","radioState2","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["for","radioState2",1,"form-check-label"],[1,"fas","fa-ban","mr-2"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Wc(1),n.rc(2,"translate"),n.cc(),n.dc(3,"div",1),n.Wc(4),n.rc(5,"translate"),n.cc(),n.dc(6,"div",2),n.dc(7,"input",3),n.nc("ngModelChange",function(t){return e.state=t}),n.cc(),n.dc(8,"label",4),n.Zb(9,"i",5),n.Wc(10),n.rc(11,"translate"),n.cc(),n.dc(12,"small",6),n.Wc(13),n.rc(14,"translate"),n.cc(),n.cc(),n.dc(15,"div",2),n.dc(16,"input",7),n.nc("ngModelChange",function(t){return e.state=t}),n.cc(),n.dc(17,"label",8),n.Zb(18,"i",9),n.Wc(19),n.rc(20,"translate"),n.cc(),n.dc(21,"small",6),n.Wc(22),n.rc(23,"translate"),n.cc(),n.cc(),n.dc(24,"div",10),n.dc(25,"input",11),n.nc("ngModelChange",function(t){return e.state=t}),n.cc(),n.dc(26,"label",12),n.Zb(27,"i",13),n.Wc(28),n.rc(29,"translate"),n.cc(),n.dc(30,"small",6),n.Wc(31),n.rc(32,"translate"),n.cc(),n.cc(),n.dc(33,"div",1),n.Wc(34),n.rc(35,"translate"),n.cc(),n.dc(36,"div",10),n.dc(37,"input",14),n.nc("ngModelChange",function(t){return e.canMembersDecorate=t}),n.cc(),n.dc(38,"label",15),n.Wc(39),n.rc(40,"translate"),n.cc(),n.cc()),2&t&&(n.Kb(1),n.Xc(n.sc(2,14,"group.edit.tabcaption.5")),n.Kb(3),n.Xc(n.sc(5,16,"group.edit.settings.type.caption")),n.Kb(3),n.yc("ngModel",e.state),n.Kb(3),n.Yc("",n.sc(11,18,"group.edit.settings.type.regular.label")," "),n.Kb(3),n.Xc(n.sc(14,20,"group.edit.settings.type.regular.help")),n.Kb(3),n.yc("ngModel",e.state),n.Kb(3),n.Yc("",n.sc(20,22,"group.edit.settings.type.exclusive.label")," "),n.Kb(3),n.Xc(n.sc(23,24,"group.edit.settings.type.exclusive.help")),n.Kb(3),n.yc("ngModel",e.state),n.Kb(3),n.Yc("",n.sc(29,26,"group.edit.settings.type.private.label")," "),n.Kb(3),n.Xc(n.sc(32,28,"group.edit.settings.type.private.help")),n.Kb(3),n.Xc(n.sc(35,30,"group.edit.settings.rights.caption")),n.Kb(3),n.yc("ngModel",e.canMembersDecorate),n.Kb(2),n.Xc(n.sc(40,32,"group.edit.settings.rights.members.help")))},directives:[ur.q,ur.b,ur.l,ur.n,ur.a],pipes:[ui],encapsulation:2}),t})(),Xy=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},providers:[u_],imports:[[cR]]}),t})();n.Oc(h_,[m.n,jy,Py,Wy,Vy],[ui]),n.Oc(NI,[m.n,Kr,Dr,m.l,Yy,Py,Wy,qy],[ui]);let Zy=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},providers:[ld],imports:[[]]}),t})(),Qy=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},imports:[[cR]]}),t})();var Jy=s("LWqD");class $y{constructor(t,e){this._inventoryService=t,this._ngZone=e}get canPlace(){return!!this._inventoryService.roomSession}get tradeRunning(){return this._inventoryService.controller.tradeService.running}offerOnMarketplace(){this._inventoryService.controller.furnitureService.offerOnMarketplace()}attemptItemPlacement(){this.canPlace&&!this.tradeRunning&&this._ngZone.runOutsideAngular(()=>this._inventoryService.controller.furnitureService.attemptItemPlacement())}attemptBotPlacement(){this.canPlace&&!this.tradeRunning&&this._ngZone.runOutsideAngular(()=>this._inventoryService.controller.botService.attemptBotPlacement())}attemptPetPlacement(){this.canPlace&&!this.tradeRunning&&this._ngZone.runOutsideAngular(()=>this._inventoryService.controller.petService.attemptPetPlacement())}}let tO=(()=>{class t{constructor(t){this.elementRef=t,this.badge="",this.isGroup=!1,this.asBackground=!1,this.needsUpdate=!0}ngOnInit(){this.needsUpdate&&this.buildBadge()}ngOnChanges(t){const e=t.badge;e&&e.previousValue!==e.currentValue&&(this.needsUpdate=!0);const s=t.isGroup;s&&s.previousValue!==s.currentValue&&(this.needsUpdate=!0),this.needsUpdate&&this.buildBadge()}buildBadge(){this.needsUpdate=!1;const t=this.badgeUrl;if(!t||!t.length)return;const e=this.elementRef.nativeElement;if(e)if(this.asBackground)e.style.backgroundImage=`url(${t})`;else{const s=e.getElementsByClassName("badge-image");let n=s.length;for(;n<0;)s[n].remove(),n--;const i=document.createElement("img");i.className="badge-image",i.src=t}}get badgeUrl(){return this.isGroup?u.a.instance.getConfiguration("badge.asset.group.url").replace("%badgedata%",this.badge):u.a.instance.getConfiguration("badge.asset.url").replace("%badgename%",this.badge)}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(n.p))},t.\u0275dir=n.Tb({type:t,selectors:[["","badge-image",""]],inputs:{badge:"badge",isGroup:"isGroup",asBackground:"asBackground"},features:[n.Ib]}),t})();const eO=["nitro-inventory-badges-component",""];function sO(t,e){1&t&&(n.dc(0,"div",3),n.dc(1,"div",4),n.dc(2,"div",5),n.Zb(3,"div",6),n.cc(),n.dc(4,"div",7),n.dc(5,"b"),n.Wc(6),n.rc(7,"translate"),n.cc(),n.Zb(8,"br"),n.Wc(9),n.rc(10,"translate"),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(6),n.Xc(n.sc(7,2,"inventory.empty.title")),n.Kb(3),n.Yc(" ",n.sc(10,4,"inventory.effects.defaultdescription")," "))}const nO=function(t){return{active:t}};function iO(t,e){if(1&t){const t=n.ec();n.dc(0,"div",20),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc(2).selectBadge(s)}),n.Zb(1,"button",21),n.cc()}if(2&t){const t=e.$implicit,s=n.qc(2);n.Kb(1),n.yc("ngClass",n.Cc(3,nO,s.selectedBadge===t))("badge",t)("asBackground",!0)}}function rO(t,e){if(1&t){const t=n.ec();n.dc(0,"div",20),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc(2).selectBadge(s)}),n.Zb(1,"button",21),n.cc()}if(2&t){const t=e.$implicit,s=n.qc(2);n.Kb(1),n.yc("ngClass",n.Cc(3,nO,s.selectedBadge===t))("badge",t)("asBackground",!0)}}function aO(t,e){if(1&t){const t=n.ec();n.dc(0,"div",17),n.dc(1,"div",18),n.dc(2,"div",22),n.dc(3,"div",23),n.Zb(4,"nitro-badge",24),n.dc(5,"div",25),n.dc(6,"p",26),n.Wc(7),n.cc(),n.cc(),n.cc(),n.dc(8,"div",27),n.dc(9,"button",28),n.nc("click",function(){return n.Lc(t),n.qc(2).wearBadge()}),n.Wc(10),n.rc(11,"translate"),n.cc(),n.cc(),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc(2);n.Kb(4),n.yc("badge",t.selectedBadge)("isGroup",!1),n.Kb(3),n.Xc(t.selectedBadgeName),n.Kb(2),n.yc("disabled",t.badgeButtonDisabled),n.Kb(1),n.Xc(n.sc(11,5,t.isWearingBadge(t.selectedBadge)?"inventory.badges.clearbadge":"inventory.badges.wearbadge"))}}function oO(t,e){if(1&t&&(n.bc(0),n.dc(1,"div",8),n.dc(2,"perfect-scrollbar",9),n.dc(3,"div",10),n.Uc(4,iO,2,5,"div",11),n.cc(),n.cc(),n.cc(),n.dc(5,"div",12),n.dc(6,"p",13),n.Wc(7),n.rc(8,"translate"),n.cc(),n.dc(9,"div",14),n.dc(10,"div",15),n.Uc(11,rO,2,5,"div",11),n.cc(),n.cc(),n.cc(),n.Uc(12,aO,12,7,"div",16),n.dc(13,"div",17),n.dc(14,"div",18),n.dc(15,"div",19),n.Wc(16),n.rc(17,"translate"),n.cc(),n.cc(),n.cc(),n.ac()),2&t){const t=n.qc();n.Kb(4),n.yc("ngForOf",t.badges),n.Kb(3),n.Xc(n.sc(8,5,"inventory.badges.activebadges")),n.Kb(4),n.yc("ngForOf",t.activeBadges),n.Kb(1),n.yc("ngIf",t.selectedBadge),n.Kb(4),n.Yc("",n.uc(17,7,"achievements_score_description","score",t.achievementsScore)," ")}}let cO=(()=>{class t extends $y{constructor(t,e,s,n){super(s,n),this._notificationService=t,this._achievementService=e,this._inventoryService=s,this._ngZone=n,this.selectedBadge=null}ngOnInit(){this._inventoryService.badgesController=this,this._inventoryService.controller.botService.isInitalized&&this.selectExistingGroupOrDefault(),this.prepareInventory()}ngOnDestroy(){this._inventoryService.controller.setAllBadgesSeen(),this._inventoryService.badgesController=null}prepareInventory(){!this._inventoryService.controller.badgeService.isInitalized||this._inventoryService.controller.badgeService.needsUpdate?this._inventoryService.controller.badgeService.requestLoad():this.selectExistingGroupOrDefault()}selectExistingGroupOrDefault(){this.selectedBadge&&this.badges.indexOf(this.selectedBadge)>-1?this.selectBadge(this.selectedBadge):this.selectFirstBadge()}selectFirstBadge(){let t=null;for(const e of this.badges)if(t){t=e;break}this.selectBadge(t)}selectBadge(t){this.selectedBadge!==t&&(this.selectedBadge=t)}wearBadge(){const t=this.selectedBadge;if(!t)return;this._inventoryService.controller.badgeService.wearOrClearBadge(t);const e=new Jy.a;for(const s of this.activeBadges)e.addActivatedBadge(s);u.a.instance.communication.connection.send(e)}isWearingBadge(t){return this._inventoryService.controller.badgeService.isWearingBadge(t)}get hasBadgeItems(){return this.badges&&this.badges.length>0}get badges(){return this._inventoryService.controller.badgeService.badges}get activeBadges(){return this._inventoryService.controller.badgeService.activeBadges}get selectedBadgeName(){return this.selectedBadge&&u.a.instance.localization.getBadgeName(this.selectedBadge)||null}get badgeButtonDisabled(){const t=this._inventoryService.controller.badgeService.badgeLimitReached();return(!this.selectedBadge||!this.isWearingBadge(this.selectedBadge))&&t}get achievementsScore(){return this._achievementService.achievementScore}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(es),n.Yb(x_),n.Yb(Ca),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-inventory-badges-component",""]],features:[n.Hb],attrs:eO,decls:3,vars:2,consts:[[1,"row","nitro-inventory-bots-component"],["class","col-12",4,"ngIf"],[4,"ngIf"],[1,"col-12"],[1,"row","pt-2"],[1,"col-4","d-flex","justify-content-center","align-items-center"],[1,"empty-image"],[1,"col-8","pt-3"],[1,"col-7","d-flex","flex-column",2,"z-index","1"],[1,"grid-container","w-100",2,"min-height","209px","max-height","209px","height","209px"],[1,"grid-items","grid-5"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"col-5","d-flex","flex-column"],[1,"mb-1"],[1,"grid-container","w-100"],[1,"grid-items","grid-3"],["class","row w-100 m-0 mt-2",4,"ngIf"],[1,"row","w-100","m-0","mt-2"],[1,"col"],[1,"d-flex","justify-content-center","align-items-center","bg-secondary","rounded","text-center","p-1"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button","badge-image","",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image",3,"ngClass","badge","asBackground"],[1,"d-flex","justify-content-between","align-items-center","bg-secondary","rounded","p-2"],[1,"d-flex","flex-grow-1"],[1,"d-flex","justify-content-center","align-items-center",2,"min-height","50px",3,"badge","isGroup"],[1,"d-flex","flex-column","justify-content-center","flex-grow-1","ml-2"],[1,"mb-0"],[1,"d-flex"],["type","button",1,"btn","btn-secondary",3,"disabled","click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Uc(1,sO,11,6,"div",1),n.Uc(2,oO,18,11,"ng-container",2),n.cc()),2&t&&(n.Kb(1),n.yc("ngIf",!e.hasBadgeItems),n.Kb(1),n.yc("ngIf",e.hasBadgeItems))},directives:[m.n,Hr.b,m.m,tO,m.l,cl],pipes:[ui],encapsulation:2}),t})();const lO=["nitro-inventory-bots-component",""];function hO(t,e){1&t&&(n.dc(0,"div",3),n.dc(1,"div",4),n.dc(2,"div",5),n.Zb(3,"div",6),n.cc(),n.dc(4,"div",7),n.dc(5,"b"),n.Wc(6),n.rc(7,"translate"),n.cc(),n.Zb(8,"br"),n.Wc(9),n.rc(10,"translate"),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(6),n.Xc(n.sc(7,2,"inventory.empty.bots.title")),n.Kb(3),n.Yc(" ",n.sc(10,4,"inventory.empty.bots.desc")," "))}const uO=function(t,e){return{active:t,"bg-success":e}};function _O(t,e){if(1&t){const t=n.ec();n.dc(0,"div",15),n.nc("mousedown",function(){n.Lc(t);const s=e.$implicit;return n.qc(2).onMouseDown(s)})("mouseout",function(){n.Lc(t);const s=e.$implicit;return n.qc(2).onMouseOut(s)}),n.Zb(1,"button",16),n.cc()}if(2&t){const t=e.$implicit,s=n.qc(2);n.Kb(1),n.yc("ngClass",n.Dc(6,uO,s.selectedItem===t,t.isUnseen))("scale",4)("figure",t.botData.figure)("direction",3)("headOnly",!0)("asBackground",!0)}}function dO(t,e){if(1&t){const t=n.ec();n.dc(0,"button",21),n.nc("click",function(){return n.Lc(t),n.qc(3).attemptBotPlacement()}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"inventory.furni.placetoroom")))}function gO(t,e){if(1&t&&(n.dc(0,"div",17),n.dc(1,"div",18),n.Wc(2),n.cc(),n.dc(3,"div",19),n.Uc(4,dO,3,3,"button",20),n.cc(),n.cc()),2&t){const t=n.qc(2);n.Kb(2),n.Xc(t.selectedItem.botData.name),n.Kb(2),n.yc("ngIf",!t.tradeRunning&&t.canPlace)}}function mO(t,e){if(1&t&&(n.bc(0),n.dc(1,"div",8),n.dc(2,"perfect-scrollbar",9),n.dc(3,"div",10),n.Uc(4,_O,2,9,"div",11),n.cc(),n.cc(),n.cc(),n.dc(5,"div",12),n.Zb(6,"div",13),n.Uc(7,gO,5,2,"div",14),n.cc(),n.ac()),2&t){const t=n.qc();n.Kb(4),n.yc("ngForOf",t.botItems)("ngForTrackBy",t.trackByType),n.Kb(2),n.yc("roomPreviewer",t.roomPreviewer)("height",140),n.Kb(1),n.yc("ngIf",t.selectedItem)}}let pO=(()=>{class t extends $y{constructor(t,e,s){super(e,s),this._notificationService=t,this._inventoryService=e,this._ngZone=s,this.roomPreviewer=null,this.selectedItem=null,this.mouseDown=!1}ngOnInit(){this._inventoryService.botsController=this,this._inventoryService.controller.botService.isInitalized&&this.selectExistingGroupOrDefault(),this.prepareInventory()}ngOnDestroy(){this._inventoryService.controller.setAllBotsSeen(),this._inventoryService.botsController=null}prepareInventory(){!this._inventoryService.controller.botService.isInitalized||this._inventoryService.controller.botService.needsUpdate?this._inventoryService.controller.botService.requestLoad():this.selectExistingGroupOrDefault()}selectExistingGroupOrDefault(){this.selectedItem&&this.botItems.indexOf(this.selectedItem)>-1?this.selectBotItem(this.selectedItem):this.selectFirstBot()}selectFirstBot(){let t=null;for(const e of this.botItems)if(e){t=e;break}this.selectBotItem(t)}selectBotItem(t){if(this.selectedItem!==t)if(this._inventoryService.controller.botService.unselectAllBotItems(),this.selectedItem=t,this.selectedItem){this.selectedItem.selected=!0,this.selectedItem.isUnseen&&(this.selectedItem.isUnseen=!1);const t=this.selectedItem.botData;if(!t)return;this._ngZone.runOutsideAngular(()=>{if(this.roomPreviewer){let e=u.a.instance.roomEngine.getRoomInstanceVariable(u.a.instance.roomEngine.activeRoomId,V.a.ROOM_WALL_TYPE),s=u.a.instance.roomEngine.getRoomInstanceVariable(u.a.instance.roomEngine.activeRoomId,V.a.ROOM_FLOOR_TYPE),n=u.a.instance.roomEngine.getRoomInstanceVariable(u.a.instance.roomEngine.activeRoomId,V.a.ROOM_LANDSCAPE_TYPE);e=e&&e.length?e:"101",s=s&&s.length?s:"101",n=n&&n.length?n:"1.1",this.roomPreviewer.reset(!1),this.roomPreviewer.updateRoomWallsAndFloorVisibility(!1,!0),this.roomPreviewer.updateObjectRoom(s,e,n),this.roomPreviewer.addAvatarIntoRoom(t.figure,0)}})}else this._ngZone.runOutsideAngular(()=>this.roomPreviewer&&this.roomPreviewer.reset(!1))}onMouseDown(t){t&&(this.selectBotItem(t),this.mouseDown=!0)}onMouseUp(){this.mouseDown=!1}onMouseOut(t){this.mouseDown&&this.selectedItem===t&&this.attemptBotPlacement()}trackByType(t,e){return e.id}get botItems(){return this._inventoryService.controller.botService.bots}get hasBotItems(){return!!this.botItems.length}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(es),n.Yb(Ca),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-inventory-bots-component",""]],inputs:{roomPreviewer:"roomPreviewer"},features:[n.Hb],attrs:lO,decls:3,vars:2,consts:[[1,"row","nitro-inventory-bots-component",3,"mouseup"],["class","col-12",4,"ngIf"],[4,"ngIf"],[1,"col-12"],[1,"row","pt-2"],[1,"col-4","d-flex","justify-content-center","align-items-center"],[1,"empty-image"],[1,"col-8","pt-3"],[1,"col-7","d-flex","flex-column",2,"z-index","1"],[1,"grid-container","w-100",2,"min-height","209px","max-height","209px","height","209px"],[1,"grid-items","grid-5"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"mousedown","mouseout",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-5","d-flex","flex-column"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","height"],["class","d-flex flex-column flex-grow-1 justify-content-between","style","z-index: 1;",4,"ngIf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"mousedown","mouseout"],["type","button","avatar-image","",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image",3,"ngClass","scale","figure","direction","headOnly","asBackground"],[1,"d-flex","flex-column","flex-grow-1","justify-content-between",2,"z-index","1"],[1,"d-flex","justify-content-center","align-items-center","w-100","h-100"],[1,"btn-group-vertical","w-100"],["type","button","class","btn btn-secondary w-100",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary","w-100",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.nc("mouseup",function(){return e.onMouseUp()}),n.Uc(1,hO,11,6,"div",1),n.Uc(2,mO,8,5,"ng-container",2),n.cc()),2&t&&(n.Kb(1),n.yc("ngIf",!e.hasBotItems),n.Kb(1),n.yc("ngIf",e.hasBotItems))},directives:[m.n,Hr.b,m.m,DT,ol,m.l],pipes:[ui],encapsulation:2}),t})();const fO=["nitro-inventory-furniture-component",""];function EO(t,e){1&t&&(n.dc(0,"div",3),n.dc(1,"div",4),n.dc(2,"div",5),n.Zb(3,"div",6),n.cc(),n.dc(4,"div",7),n.dc(5,"b"),n.Wc(6),n.rc(7,"translate"),n.cc(),n.Zb(8,"br"),n.Wc(9),n.rc(10,"translate"),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(6),n.Xc(n.sc(7,2,"inventory.empty.title")),n.Kb(3),n.Yc(" ",n.sc(10,4,"inventory.empty.desc")," "))}function SO(t,e){if(1&t&&(n.dc(0,"div",28),n.Wc(1),n.cc()),2&t){const t=n.qc().$implicit;n.Kb(1),n.Xc(t.getUnlockedCount())}}function bO(t,e){if(1&t&&(n.Zb(0,"div",29),n.rc(1,"uniqueNumber")),2&t){const t=n.qc().$implicit;n.yc("innerHtml",n.sc(1,1,t.stuffData.uniqueNumber),n.Mc)}}const vO=function(t){return{opacity:t}},IO=function(t,e,s){return{active:t,"bg-success":e,unique:s}},RO=function(t){return{"background-image":t}};function TO(t,e){if(1&t){const t=n.ec();n.dc(0,"div",23),n.nc("mousedown",function(){n.Lc(t);const s=e.$implicit;return n.qc(2).onMouseDown(s)})("mouseout",function(){n.Lc(t);const s=e.$implicit;return n.qc(2).onMouseOut(s)}),n.dc(1,"button",24),n.Zb(2,"div",25),n.Uc(3,SO,2,1,"div",26),n.Uc(4,bO,2,3,"div",27),n.cc(),n.cc()}if(2&t){const t=e.$implicit,s=n.qc(2);n.yc("ngStyle",n.Cc(5,vO,t.getUnlockedCount()?"1":"0.5")),n.Kb(1),n.yc("ngClass",n.Ec(7,IO,s.selectedGroup===t,t.hasUnseenItems,t.stuffData.uniqueNumber)),n.Kb(1),n.yc("ngStyle",n.Cc(11,RO,"url("+s.getIconUrl(t)+")")),n.Kb(1),n.yc("ngIf",!t.stuffData.uniqueNumber),n.Kb(1),n.yc("ngIf",t.stuffData.uniqueNumber)}}function yO(t,e){if(1&t){const t=n.ec();n.dc(0,"div",37),n.nc("click",function(){n.Lc(t);const e=n.qc().$implicit;return n.qc(),n.Ic(1).setCurrent(e.value)}),n.Wc(1),n.cc()}if(2&t){const t=n.qc().$implicit;n.Kb(1),n.Yc(" ",t.label,"")}}function OO(t,e){if(1&t&&(n.dc(0,"div",38),n.Wc(1),n.cc()),2&t){const t=n.qc().$implicit;n.Kb(1),n.Xc(t.label)}}function CO(t,e){if(1&t&&(n.dc(0,"li",34),n.Uc(1,yO,2,1,"div",35),n.Uc(2,OO,2,1,"div",36),n.cc()),2&t){const t=e.$implicit;n.qc();const s=n.Ic(1);n.Qb("active",s.getCurrent()===t.value),n.Kb(1),n.yc("ngIf",s.getCurrent()!==t.value),n.Kb(1),n.yc("ngIf",s.getCurrent()===t.value)}}function AO(t,e){if(1&t){const t=n.ec();n.dc(0,"pagination-template",30,31),n.nc("pageChange",function(e){return n.Lc(t),n.qc(2).paginateConfig.currentPage=e}),n.dc(2,"ul",32),n.Uc(3,CO,3,4,"li",33),n.cc(),n.cc()}if(2&t){const t=n.Ic(1),e=n.qc(2);n.yc("id",e.paginateConfig.id)("maxSize",11),n.Kb(3),n.yc("ngForOf",t.pages)}}function MO(t,e){if(1&t&&(n.dc(0,"div",39),n.Zb(1,"div",40),n.rc(2,"uniqueNumber"),n.Zb(3,"div",40),n.rc(4,"uniqueNumber"),n.cc()),2&t){const t=n.qc(2);n.Kb(1),n.yc("innerHTML",n.sc(2,2,t.selectedGroup.stuffData.uniqueNumber),n.Mc),n.Kb(2),n.yc("innerHTML",n.sc(4,4,t.selectedGroup.stuffData.uniqueSeries),n.Mc)}}function wO(t,e){if(1&t){const t=n.ec();n.dc(0,"button",46),n.nc("click",function(){return n.Lc(t),n.qc(3).attemptItemPlacement()}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"inventory.furni.placetoroom")))}function UO(t,e){if(1&t){const t=n.ec();n.dc(0,"button",46),n.nc("click",function(){return n.Lc(t),n.qc(3).offerOnMarketplace()}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"inventory.marketplace.sell")))}const DO=function(t){return{disabled:t}};function NO(t,e){if(1&t){const t=n.ec();n.dc(0,"button",47),n.nc("click",function(){return n.Lc(t),n.qc(3).attemptItemOffer()}),n.Wc(1),n.rc(2,"translate"),n.cc()}if(2&t){const t=n.qc(3);n.yc("ngClass",n.Cc(4,DO,!t.selectedGroup.getUnlockedCount())),n.Kb(1),n.Xc(n.sc(2,2,"inventory.trading.offer"))}}function LO(t,e){if(1&t&&(n.dc(0,"div",41),n.dc(1,"div",42),n.Wc(2),n.cc(),n.dc(3,"div",43),n.Uc(4,wO,3,3,"button",44),n.Uc(5,UO,3,3,"button",44),n.Uc(6,NO,3,6,"button",45),n.cc(),n.cc()),2&t){const t=n.qc(2);n.Kb(2),n.Xc(t.selectedGroup.name),n.Kb(2),n.yc("ngIf",!t.tradeRunning&&t.canPlace),n.Kb(1),n.yc("ngIf",t.selectedGroup.isSellable),n.Kb(1),n.yc("ngIf",t.tradeRunning)}}function PO(t,e){if(1&t){const t=n.ec();n.bc(0),n.dc(1,"div",8),n.dc(2,"div",9),n.dc(3,"div",10),n.Zb(4,"i",11),n.cc(),n.dc(5,"input",12),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().search=e}),n.cc(),n.dc(6,"select",13),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().searchType=e}),n.dc(7,"option",14),n.Wc(8),n.rc(9,"translate"),n.cc(),n.dc(10,"option",14),n.Wc(11),n.rc(12,"translate"),n.cc(),n.dc(13,"option",14),n.Wc(14),n.rc(15,"translate"),n.cc(),n.cc(),n.cc(),n.dc(16,"perfect-scrollbar",15),n.dc(17,"div",16),n.Uc(18,TO,5,13,"div",17),n.rc(19,"paginate"),n.cc(),n.cc(),n.Uc(20,AO,4,3,"pagination-template",18),n.cc(),n.dc(21,"div",19),n.Uc(22,MO,5,6,"div",20),n.Zb(23,"div",21),n.Uc(24,LO,7,4,"div",22),n.cc(),n.ac()}if(2&t){const t=n.qc();n.Kb(5),n.yc("ngModel",t.search),n.Kb(1),n.yc("ngModel",t.searchType),n.Kb(1),n.yc("value",""),n.Kb(1),n.Xc(n.sc(9,15,"inventory.filter.option.everything")),n.Kb(2),n.yc("value","s"),n.Kb(1),n.Xc(n.sc(12,17,"inventory.furni.tab.floor")),n.Kb(2),n.yc("value","i"),n.Kb(1),n.Xc(n.sc(15,19,"inventory.furni.tab.wall")),n.Kb(4),n.yc("ngForOf",t.groupItems)("ngForTrackBy",n.tc(19,21,t.trackByType,t.paginateConfig)),n.Kb(2),n.yc("ngIf",t.groupItems.length>t.paginateConfig.itemsPerPage),n.Kb(2),n.yc("ngIf",t.selectedGroup&&t.selectedGroup.stuffData.uniqueNumber),n.Kb(1),n.yc("roomPreviewer",t.roomPreviewer)("height",140),n.Kb(1),n.yc("ngIf",t.selectedGroup)}}let xO=(()=>{class t extends $y{constructor(t,e,s){super(e,s),this._notificationService=t,this._inventoryService=e,this._ngZone=s,this.roomPreviewer=null,this.selectedGroup=null,this.mouseDown=!1,this._filteredItems=[],this._subscription=null,this._hasGroupItems=!1}ngOnInit(){this._inventoryService.controller.furnitureService.isInitalized&&this.selectExistingGroupOrDefault(),this._inventoryService.furniController=this,this._subscription=this._inventoryService.events.subscribe(t=>{switch(t){case of.INVENTORY_UPDATED:return void this.refreshInventory()}}),this.prepareInventory()}ngOnDestroy(){this._inventoryService.controller.setAllFurnitureSeen(),this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._inventoryService.furniController=null}refreshInventory(){let t=this._inventoryService.controller.furnitureService.groupItems;if(t.length&&(this._hasGroupItems=!0),this.search&&this.search.length||this.searchType&&this.searchType.length){const e=this.search.toLocaleLowerCase();t=t.filter(t=>{let s=!0;return this.searchType&&1===this.searchType.length&&("s"===this.searchType?s=!t.isWallItem:"i"===this.searchType&&(s=t.isWallItem)),e&&e.length&&(s=t.name.toLocaleLowerCase().includes(e)),s})}this._filteredItems=t}prepareInventory(){!this._inventoryService.controller.furnitureService.isInitalized||this._inventoryService.controller.furnitureService.needsUpdate?this._inventoryService.controller.furnitureService.requestLoad():(this.refreshInventory(),this.selectExistingGroupOrDefault())}selectExistingGroupOrDefault(){this.selectedGroup&&this.groupItems.indexOf(this.selectedGroup)>-1?this.selectGroup(this.selectedGroup):this.selectFirstGroup()}selectFirstGroup(){let t=null;for(const e of this.groupItems)if(e&&!e.locked){t=e;break}this.selectGroup(t)}selectGroup(t){if(this.selectedGroup!==t)if(this._inventoryService.controller.furnitureService.unselectAllGroupItems(),this.selectedGroup=t,this.selectedGroup){this.selectedGroup.selected=!0,this.selectedGroup.hasUnseenItems&&(this.selectedGroup.hasUnseenItems=!1);const e=this.selectedGroup.getLastItem();if(!e)return;this._ngZone.runOutsideAngular(()=>{if(this.roomPreviewer){let s=u.a.instance.roomEngine.getRoomInstanceVariable(u.a.instance.roomEngine.activeRoomId,V.a.ROOM_WALL_TYPE),n=u.a.instance.roomEngine.getRoomInstanceVariable(u.a.instance.roomEngine.activeRoomId,V.a.ROOM_FLOOR_TYPE),i=u.a.instance.roomEngine.getRoomInstanceVariable(u.a.instance.roomEngine.activeRoomId,V.a.ROOM_LANDSCAPE_TYPE);s=s&&s.length?s:"101",n=n&&n.length?n:"101",i=i&&i.length?i:"1.1",this.roomPreviewer.reset(!1),this.roomPreviewer.updateObjectRoom(n,s,i),e.category===Za._Str_3639||e.category===Za._Str_3683||e.category===Za._Str_3432?(this.roomPreviewer.updateRoomWallsAndFloorVisibility(!0,!0),n=e.category===Za._Str_3683?this.selectedGroup.stuffData.getLegacyString():n,s=e.category===Za._Str_3639?this.selectedGroup.stuffData.getLegacyString():s,i=e.category===Za._Str_3432?this.selectedGroup.stuffData.getLegacyString():i,this.roomPreviewer.updateObjectRoom(n,s,i)):t.isWallItem?(this.roomPreviewer.updateRoomWallsAndFloorVisibility(!0,!0),this.roomPreviewer.addWallItemIntoRoom(this.selectedGroup.type,new q.a(90),e.stuffData.getLegacyString())):(this.roomPreviewer.updateRoomWallsAndFloorVisibility(!1,!0),this.roomPreviewer.addFurnitureIntoRoom(this.selectedGroup.type,new q.a(90),this.selectedGroup.stuffData,e.extra.toString()))}})}else this._ngZone.runOutsideAngular(()=>this.roomPreviewer&&this.roomPreviewer.reset(!1))}onMouseDown(t){t&&(this.selectGroup(t),this.mouseDown=!0)}onMouseUp(){this.mouseDown=!1}onMouseOut(t){this.mouseDown&&this.selectedGroup===t&&this.attemptItemPlacement()}attemptItemOffer(t=1){if(!this.selectedGroup||!this.tradeRunning)return;const e=this.selectedGroup;if(!e)return;const s=e.getTradeItems(t);if(!s||!s.length)return;let n=null;const i=[];for(const r of s)i.push(r.id),n||(n=r);n&&this.tradeRunning&&(this._inventoryService.controller.tradeService.getOwnTradingItemIds().length+i.length<=1500?this._inventoryService.controller.tradeService.offerItems(i,n.isWallItem,n.type,n.category,n.isGroupable,n.stuffData):this._notificationService.alert("${trading.items.too_many_items.desc}","${trading.items.too_many_items.title}"))}getIconUrl(t){return t&&t.iconUrl||null}trackByType(t,e){return e.type}get groupItems(){return this._filteredItems}get paginateConfig(){return{id:"custom",itemsPerPage:5,currentPage:1}}get search(){return this._inventoryService.controller.furnitureService.search}set search(t){this._inventoryService.controller.furnitureService.search=t,this.refreshInventory()}get searchType(){return this._inventoryService.controller.furnitureService.searchType}set searchType(t){this._inventoryService.controller.furnitureService.searchType=t,this.refreshInventory()}get hasGroupItems(){return this._hasGroupItems}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(es),n.Yb(Ca),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-inventory-furniture-component",""]],inputs:{roomPreviewer:"roomPreviewer"},features:[n.Hb],attrs:fO,decls:3,vars:2,consts:[[1,"row","nitro-inventory-furni-component",3,"mouseup"],["class","col-12",4,"ngIf"],[4,"ngIf"],[1,"col-12"],[1,"row","pt-2"],[1,"col-4","d-flex","justify-content-center","align-items-center"],[1,"empty-image"],[1,"col-8","pt-3"],[1,"col-7","d-flex","flex-column",2,"z-index","1"],[1,"d-flex","mb-2"],[1,"d-flex","justify-content-center","align-items-center","bg-secondary","border","shadow","px-2"],[1,"fas","fa-search"],["type","text",1,"form-control","form-control-sm","flex-grow-1",3,"ngModel","ngModelChange"],[1,"form-control","form-control-sm","w-auto",3,"ngModel","ngModelChange"],[3,"value"],[1,"grid-container","w-100",2,"min-height","209px","max-height","209px","height","209px"],[1,"grid-items","grid-5"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"ngStyle","mousedown","mouseout",4,"ngFor","ngForOf","ngForTrackBy"],[3,"id","maxSize","pageChange",4,"ngIf"],[1,"col-5","d-flex","flex-column"],["class","unique-counter-compact",4,"ngIf"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","height"],["class","d-flex flex-column flex-grow-1 justify-content-between","style","z-index: 1;",4,"ngIf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"ngStyle","mousedown","mouseout"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info",3,"ngClass"],[1,"position-absolute","detail-info","has-image",3,"ngStyle"],["class","position-absolute btn btn-sm btn-primary px-1 py-0 rounded count",4,"ngIf"],["class","position-absolute unique-counter",3,"innerHtml",4,"ngIf"],[1,"position-absolute","btn","btn-sm","btn-primary","px-1","py-0","rounded","count"],[1,"position-absolute","unique-counter",3,"innerHtml"],[3,"id","maxSize","pageChange"],["p","paginationApi"],[1,"pagination","pagination-sm","custom-pagination"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"page-item"],["class","page-link",3,"click",4,"ngIf"],["class","page-link",4,"ngIf"],[1,"page-link",3,"click"],[1,"page-link"],[1,"unique-counter-compact"],[3,"innerHTML"],[1,"d-flex","flex-column","flex-grow-1","justify-content-between",2,"z-index","1"],[1,"d-flex","justify-content-center","align-items-center","w-100","h-100"],[1,"btn-group-vertical","w-100"],["type","button","class","btn btn-secondary w-100",3,"click",4,"ngIf"],["type","button","class","btn btn-secondary w-100",3,"ngClass","click",4,"ngIf"],["type","button",1,"btn","btn-secondary","w-100",3,"click"],["type","button",1,"btn","btn-secondary","w-100",3,"ngClass","click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.nc("mouseup",function(){return e.onMouseUp()}),n.Uc(1,EO,11,6,"div",1),n.Uc(2,PO,25,24,"ng-container",2),n.cc()),2&t&&(n.Kb(1),n.yc("ngIf",!e.hasGroupItems),n.Kb(1),n.yc("ngIf",e.hasGroupItems))},directives:[m.n,ur.b,ur.l,ur.n,ur.t,ur.o,ur.v,Hr.b,m.m,DT,m.o,m.l,rR.c],pipes:[ui,rR.b,pl],encapsulation:2}),t})();var FO=s("qL7v");const kO=["imageElement"],WO=["nitro-inventory-offer-marketplace-component",""];function BO(t,e){if(1&t&&(n.dc(0,"div",21),n.Zb(1,"div",22),n.rc(2,"uniqueNumber"),n.Zb(3,"div",22),n.rc(4,"uniqueNumber"),n.cc()),2&t){const t=n.qc(2);n.Kb(1),n.yc("innerHTML",n.sc(2,2,t.item.stuffData.uniqueNumber),n.Mc),n.Kb(2),n.yc("innerHTML",n.sc(4,4,t.item.stuffData.uniqueSeries),n.Mc)}}const VO=function(t){return{"background-image":t}};function GO(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"h6",3),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",4),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(6,"i",5),n.cc(),n.cc(),n.dc(7,"div",6),n.dc(8,"div",7),n.dc(9,"div",8),n.Uc(10,BO,5,6,"div",9),n.Zb(11,"div",10,11),n.cc(),n.dc(13,"div",12),n.dc(14,"div"),n.Wc(15),n.cc(),n.dc(16,"div",13),n.Wc(17),n.cc(),n.cc(),n.cc(),n.dc(18,"div",7),n.dc(19,"div",14),n.Wc(20),n.rc(21,"translate"),n.cc(),n.dc(22,"input",15),n.nc("input",function(e){return n.Lc(t),n.qc().updateInterface(e)})("ngModelChange",function(e){return n.Lc(t),n.qc().askingPrice=e}),n.cc(),n.cc(),n.dc(23,"div",16),n.Wc(24),n.cc(),n.dc(25,"div",17),n.Wc(26),n.cc(),n.dc(27,"div",18),n.dc(28,"button",19),n.nc("click",function(){return n.Lc(t),n.qc().postOffer()}),n.Wc(29),n.rc(30,"translate"),n.cc(),n.dc(31,"button",20),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Wc(32),n.rc(33,"translate"),n.cc(),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.yc("center",!0),n.Kb(3),n.Xc(n.sc(4,14,"inventory.marketplace.make_offer.title")),n.Kb(7),n.yc("ngIf",t.item&&t.item.stuffData.uniqueNumber),n.Kb(1),n.yc("ngStyle",n.Cc(22,VO,"url("+t.imageUrl+")")),n.Kb(4),n.Xc(t.getFurniTitle()),n.Kb(2),n.Xc(t.getFurniDescription()),n.Kb(3),n.Xc(n.sc(21,16,"inventory.marketplace.make_offer.price_request")),n.Kb(2),n.yc("ngModel",t.askingPrice),n.Kb(2),n.Yc(" ",t.getAveragePrice()," "),n.Kb(1),n.yc("ngClass",t.canPostItem?"badge-success":"badge-secondary"),n.Kb(1),n.Xc(t.creditsPrice()),n.Kb(2),n.yc("disabled",!t.canPostItem),n.Kb(1),n.Xc(n.sc(30,18,"inventory.marketplace.make_offer.post")),n.Kb(3),n.Xc(n.sc(33,20,"inventory.marketplace.no_credits.cancel"))}}function KO(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"h6",3),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",4),n.nc("click",function(){return n.Lc(t),n.qc().closeConfirmDialog()}),n.Zb(6,"i",5),n.cc(),n.cc(),n.dc(7,"div",6),n.dc(8,"div",23),n.Wc(9),n.cc(),n.dc(10,"div",18),n.dc(11,"button",24),n.nc("click",function(){return n.Lc(t),n.qc().doPostOffer()}),n.Wc(12),n.rc(13,"translate"),n.cc(),n.dc(14,"button",20),n.nc("click",function(){return n.Lc(t),n.qc().closeConfirmDialog()}),n.Wc(15),n.rc(16,"translate"),n.cc(),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.yc("center",!0),n.Kb(3),n.Xc(n.sc(4,5,"inventory.marketplace.confirm_offer.title")),n.Kb(6),n.Xc(t.confirmationText()),n.Kb(3),n.Xc(n.sc(13,7,"inventory.marketplace.make_offer.post")),n.Kb(3),n.Xc(n.sc(16,9,"inventory.marketplace.confirm_offer.cancel"))}}let HO=(()=>{class t{constructor(t,e,s,n){this._catalogService=t,this._inventoryFurniService=e,this._inventoryService=s,this._ngZone=n,this.showMainWindow=!1,this.askingPrice=null,this.showConfirmDialog=!1,this._imageUrl="",this._text=null,this.canPostItem=!1}ngOnChanges(t){if(!t.item)return;const e=t.item.currentValue;e&&t.item.previousValue!==e&&this.refresh()}hide(){this.closeMainWindow()}refresh(){this.updateInterface(null),this.refreshImage()}refreshImage(){this._ngZone.runOutsideAngular(()=>{this._imageUrl="";const t=this.item;let e;if(e=this.item.isWallItem?u.a.instance.roomEngine.getFurnitureWallImage(t.type,new q.a(90,0,0),64,this,4293848814,this.item.extra.toString()):u.a.instance.roomEngine.getFurnitureFloorImage(t.type,new q.a(90,0,0),64,this,4293848814,this.item.extra.toString()),e){const t=e.getImage();t&&this._ngZone.run(()=>this._imageUrl=t.src)}})}purchase(){}completePurchase(){this._ngZone.runOutsideAngular(()=>{const t=new HTMLImageElement;t.className="toolbar-icon-animation",t.src=this._imageUrl,t.style.visibility="hidden",this.imageElement&&this.imageElement.nativeElement.appendChild(t);const e=t.getBoundingClientRect(),s=new Nd.a(t,e.x,e.y);s.iconName=Vh.a.INVENTORY,u.a.instance.roomEngine.events.dispatchEvent(s)})}get imageUrl(){return this._imageUrl}getFurniTitle(){const t=this.item;return u.a.instance.localization.getValue(t.isWallItem?"wallItem.name."+t.type:"roomItem.name."+t.type)}getFurniDescription(){const t=this.item;return u.a.instance.localization.getValue(t.isWallItem?"wallItem.desc."+t.type:"roomItem.desc."+t.type)}confirmationText(){const t=this.item,e=u.a.instance.localization.getValue(t.isWallItem?"wallItem.name."+t.type:"roomItem.name."+t.type);return u.a.instance.localization.getValueWithParameters("inventory.marketplace.confirm_offer.info",["furniname","price"],[e,this.askingPrice.toString()])}getAveragePrice(){let t=u.a.instance.localization.getValue("inventory.marketplace.make_offer.average_price");const e=this._inventoryFurniService.marketPlaceConfig.commission;t=t.replace("%days%",this._inventoryFurniService.marketPlaceConfig.displayTime.toString());const s=this._inventoryFurniService.marketPlaceItemStats._Str_3925,n=0==s?" - ":s.toString();t=t.replace("%price%",n);const i=Math.floor(this._inventoryFurniService.marketPlaceItemStats._Str_3925/(1+.01*e)),r=0==i?" - ":i.toString();t=t.replace("%price_no_commission%",r);const a=this._inventoryFurniService.marketPlaceItemStats._Str_3925,o=0==a?" - ":a.toString();return t=t.replace("%average%",o),t}imageReady(t,e,s){if(e)if(s)this._ngZone.run(()=>this._imageUrl=s.src);else if(e){const t=mc.a.generateImageUrl(e);t&&this._ngZone.run(()=>this._imageUrl=t)}}updateInterface(t){var e;const s=this._inventoryFurniService.marketPlaceConfig;let n=t?parseInt(t.target.value):null!==(e=this.askingPrice)&&void 0!==e?e:0;const i=9999;n>i&&(this.askingPrice=i,n=i,t&&(t.target.value=i));const r=Math.max(Math.ceil(.01*s.commission*n),1),a=n+r;if(n<s.minimumPrice)this.canPostItem=!1,this._text=u.a.instance.localization.getValueWithParameter("inventory.marketplace.make_offer.min_price","minprice",s.minimumPrice.toString());else{this.canPostItem=!0;let t=u.a.instance.localization.getValue("inventory.marketplace.make_offer.final_price");t=t.replace("%commission%",r.toString()),t=t.replace("%finalprice%",a.toString()),this._text=t}u.a.instance.localization.getValue("inventory.marketplace.make_offer.min_price")}closeMainWindow(){this.askingPrice=null,this.updateInterface(null),this._inventoryService.marketPlaceOfferVisible=!1,this._inventoryFurniService.marketPlaceItemStats=null}creditsPrice(){return this._text}imageFailed(t){}postOffer(){this._inventoryService.marketPlaceOfferVisible=!1,this.showConfirmDialog=!0}doPostOffer(){u.a.instance.communication.connection.send(new FO.a(this.askingPrice,this.item.isWallItem?2:1,this.item.ref)),this.showConfirmDialog=!1,this.closeMainWindow()}closeConfirmDialog(){this.showConfirmDialog=!1}get offerTime(){return this._inventoryFurniService.marketPlaceConfig.offerTime}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(gc),n.Yb(of),n.Yb(Ca),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-inventory-offer-marketplace-component",""]],viewQuery:function(t,e){if(1&t&&n.cd(kO,1),2&t){let t;n.Hc(t=n.oc())&&(e.imageElement=t.first)}},inputs:{item:"item",showMainWindow:"showMainWindow"},features:[n.Ib],attrs:WO,decls:2,vars:2,consts:[["class","nitro-inventory-offer-marketplace-component card",3,"bringToTop","draggable","center",4,"ngIf"],[1,"nitro-inventory-offer-marketplace-component","card",3,"bringToTop","draggable","center"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"d-flex","flex-row","mb-3"],[1,"position-relative","bg-secondary","rounded"],["class","unique-counter-compact","style","right: 0px;",4,"ngIf"],[1,"product-preview","bg-secondary",3,"ngStyle"],["imageElement",""],[1,"ml-2","align-self-center"],[1,"badge","badge-secondary","badge-sm","text-wrap"],[1,"align-self-center",2,"white-space","nowrap"],["type","number",1,"form-control","form-control-sm","w-100","ml-2",3,"ngModel","input","ngModelChange"],[1,"badge","badge-secondary","badge-sm","text-wrap","mb-2","w-100"],[1,"badge","badge-sm","text-wrap","mb-3","w-100",3,"ngClass"],[1,"btn-group","w-100"],["type","button",1,"btn","btn-success",3,"disabled","click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"unique-counter-compact",2,"right","0px"],[3,"innerHTML"],[1,"mb-3"],["type","button",1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&(n.Uc(0,GO,34,24,"div",0),n.Uc(1,KO,17,11,"div",0)),2&t&&(n.yc("ngIf",e.showMainWindow),n.Kb(1),n.yc("ngIf",e.showConfirmDialog))},directives:[m.n,Dr,Kr,m.o,ur.p,ur.b,ur.l,ur.n,m.l],pipes:[ui,pl],encapsulation:2}),t})();const jO=["nitro-inventory-pets-component",""];function zO(t,e){1&t&&(n.dc(0,"div",3),n.dc(1,"div",4),n.dc(2,"div",5),n.Zb(3,"div",6),n.cc(),n.dc(4,"div",7),n.dc(5,"b"),n.Wc(6),n.rc(7,"translate"),n.cc(),n.Zb(8,"br"),n.Wc(9),n.rc(10,"translate"),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(6),n.Xc(n.sc(7,2,"inventory.empty.pets.title")),n.Kb(3),n.Yc(" ",n.sc(10,4,"inventory.empty.pets.desc")," "))}const YO=function(t,e){return{active:t,"bg-success":e}};function qO(t,e){if(1&t){const t=n.ec();n.dc(0,"div",15),n.nc("mousedown",function(){n.Lc(t);const s=e.$implicit;return n.qc(2).onMouseDown(s)})("mouseout",function(){n.Lc(t);const s=e.$implicit;return n.qc(2).onMouseOut(s)}),n.Zb(1,"button",16),n.cc()}if(2&t){const t=e.$implicit,s=n.qc(2);n.Kb(1),n.yc("ngClass",n.Dc(5,YO,s.selectedItem===t,t.isUnseen))("petFigureData",t.petData.figureData)("direction",2)("headOnly",!0)("asBackground",!0)}}function XO(t,e){if(1&t){const t=n.ec();n.dc(0,"button",21),n.nc("click",function(){return n.Lc(t),n.qc(3).attemptPetPlacement()}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"inventory.furni.placetoroom")))}function ZO(t,e){if(1&t&&(n.dc(0,"div",17),n.dc(1,"div",18),n.Wc(2),n.cc(),n.dc(3,"div",19),n.Uc(4,XO,3,3,"button",20),n.cc(),n.cc()),2&t){const t=n.qc(2);n.Kb(2),n.Xc(t.selectedItem.petData.name),n.Kb(2),n.yc("ngIf",!t.tradeRunning&&t.canPlace)}}function QO(t,e){if(1&t&&(n.bc(0),n.dc(1,"div",8),n.dc(2,"perfect-scrollbar",9),n.dc(3,"div",10),n.Uc(4,qO,2,8,"div",11),n.cc(),n.cc(),n.cc(),n.dc(5,"div",12),n.Zb(6,"div",13),n.Uc(7,ZO,5,2,"div",14),n.cc(),n.ac()),2&t){const t=n.qc();n.Kb(4),n.yc("ngForOf",t.petItems)("ngForTrackBy",t.trackByType),n.Kb(2),n.yc("roomPreviewer",t.roomPreviewer)("height",140),n.Kb(1),n.yc("ngIf",t.selectedItem)}}let JO=(()=>{class t extends $y{constructor(t,e,s){super(e,s),this._notificationService=t,this._inventoryService=e,this._ngZone=s,this.roomPreviewer=null,this.selectedItem=null,this.mouseDown=!1}ngOnInit(){this._inventoryService.petsController=this,this._inventoryService.controller.petService.isInitalized&&this.selectExistingGroupOrDefault(),this.prepareInventory()}ngOnDestroy(){this._inventoryService.controller.setAllPetsSeen(),this._inventoryService.petsController=null}prepareInventory(){!this._inventoryService.controller.petService.isInitalized||this._inventoryService.controller.petService.needsUpdate?this._inventoryService.controller.petService.requestLoad():this.selectExistingGroupOrDefault()}selectExistingGroupOrDefault(){this.selectedItem&&this.petItems.indexOf(this.selectedItem)>-1?this.selectPetItem(this.selectedItem):this.selectFirstPet()}selectFirstPet(){let t=null;for(const e of this.petItems)if(e){t=e;break}this.selectPetItem(t)}selectPetItem(t){if(this.selectedItem!==t)if(this._inventoryService.controller.petService.unselectAllPetItems(),this.selectedItem=t,this.selectedItem){this.selectedItem.selected=!0,this.selectedItem.isUnseen&&(this.selectedItem.isUnseen=!1);const t=this.selectedItem.petData;if(!t)return;this._ngZone.runOutsideAngular(()=>{if(this.roomPreviewer){let e=u.a.instance.roomEngine.getRoomInstanceVariable(u.a.instance.roomEngine.activeRoomId,V.a.ROOM_WALL_TYPE),s=u.a.instance.roomEngine.getRoomInstanceVariable(u.a.instance.roomEngine.activeRoomId,V.a.ROOM_FLOOR_TYPE),n=u.a.instance.roomEngine.getRoomInstanceVariable(u.a.instance.roomEngine.activeRoomId,V.a.ROOM_LANDSCAPE_TYPE);e=e&&e.length?e:"101",s=s&&s.length?s:"101",n=n&&n.length?n:"1.1",this.roomPreviewer.reset(!1),this.roomPreviewer.updateRoomWallsAndFloorVisibility(!1,!0),this.roomPreviewer.updateObjectRoom(s,e,n),this.roomPreviewer.addPetIntoRoom(t.figureData.figuredata)}})}else this._ngZone.runOutsideAngular(()=>this.roomPreviewer&&this.roomPreviewer.reset(!1))}onMouseDown(t){t&&(this.selectPetItem(t),this.mouseDown=!0)}onMouseUp(){this.mouseDown=!1}onMouseOut(t){this.mouseDown&&this.selectedItem===t&&this.attemptPetPlacement()}trackByType(t,e){return e.id}get petItems(){return this._inventoryService.controller.petService.pets}get hasPetItems(){return!!this.petItems.length}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(es),n.Yb(Ca),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-inventory-pets-component",""]],inputs:{roomPreviewer:"roomPreviewer"},features:[n.Hb],attrs:jO,decls:3,vars:2,consts:[[1,"row","nitro-inventory-pets-component",3,"mouseup"],["class","col-12",4,"ngIf"],[4,"ngIf"],[1,"col-12"],[1,"row","pt-2"],[1,"col-4","d-flex","justify-content-center","align-items-center"],[1,"empty-image"],[1,"col-8","pt-3"],[1,"col-7","d-flex","flex-column",2,"z-index","1"],[1,"grid-container","w-100",2,"min-height","209px","max-height","209px","height","209px"],[1,"grid-items","grid-5"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"mousedown","mouseout",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-5","d-flex","flex-column"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","height"],["class","d-flex flex-column flex-grow-1 justify-content-between","style","z-index: 1;",4,"ngIf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"mousedown","mouseout"],["type","button","pet-image","",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image",3,"ngClass","petFigureData","direction","headOnly","asBackground"],[1,"d-flex","flex-column","flex-grow-1","justify-content-between",2,"z-index","1"],[1,"d-flex","justify-content-center","align-items-center","w-100","h-100"],[1,"btn-group-vertical","w-100"],["type","button","class","btn btn-secondary w-100",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary","w-100",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.nc("mouseup",function(){return e.onMouseUp()}),n.Uc(1,zO,11,6,"div",1),n.Uc(2,QO,8,5,"ng-container",2),n.cc()),2&t&&(n.Kb(1),n.yc("ngIf",!e.hasPetItems),n.Kb(1),n.yc("ngIf",e.hasPetItems))},directives:[m.n,Hr.b,m.m,DT,Dl,m.l],pipes:[ui],encapsulation:2}),t})(),$O=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},providers:[If,df,of,Ca,Sf,uE],imports:[[cR]]}),t})();n.Oc(RE,[m.n,Dr,Kr,m.l,pO,JO,xO,cO,hE,HO],[ui]);var tC=s("GFvZ"),eC=s("gegF"),sC=s("dEqu");function nC(t,e){if(1&t&&(n.dc(0,"p",9),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t){const t=n.qc();n.Kb(1),n.Zc("",n.sc(2,2,"navigator.roomownercaption")," ",t.ownerName,"")}}function iC(t,e){if(1&t){const t=n.ec();n.dc(0,"button",17),n.nc("click",function(){return n.Lc(t),n.qc().handleButton("settings")}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"navigator.room.popup.info.room.settings")))}function rC(t,e){if(1&t){const t=n.ec();n.dc(0,"button",18),n.nc("click",function(){return n.Lc(t),n.qc().handleButton("filter")}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"navigator.roomsettings.roomfilter")))}function aC(t,e){if(1&t){const t=n.ec();n.dc(0,"button",17),n.nc("click",function(){return n.Lc(t),n.qc().handleButton("floor-plan")}),n.Wc(1),n.rc(2,"translate"),n.cc()}2&t&&(n.Kb(1),n.Xc(n.sc(2,1,"open.floor.plan.editor")))}function oC(t,e){if(1&t){const t=n.ec();n.dc(0,"button",19),n.nc("click",function(){return n.Lc(t),n.qc().handleButton("staff-pick")}),n.Wc(1),n.rc(2,"translate"),n.cc()}if(2&t){const t=n.qc();n.Kb(1),n.Xc(n.sc(2,1,t.staffPickVisible?"navigator.staffpicks.unpick":"navigator.staffpicks.pick"))}}function cC(t,e){if(1&t){const t=n.ec();n.dc(0,"button",17),n.nc("click",function(){return n.Lc(t),n.qc().handleButton("room-mute")}),n.Wc(1),n.rc(2,"translate"),n.cc()}if(2&t){const t=n.qc();n.Kb(1),n.Yc(" ",n.sc(2,1,t.mutedVisible?"navigator.muteall_on":"navigator.muteall_off"),"")}}let lC=(()=>{class t{constructor(t,e){this._navigatorService=t,this._settingsService=e}hide(){this._navigatorService.roomInfoShowing=!1}handleButton(t){if(t)switch(t){case"settings":return void this.openRoomSettings();case"filter":return;case"floor-plan":return void(this._settingsService.floorPlanVisible=!0);case"staff-pick":return void this.staffPick();case"room-mute":this.muteRoom();break;case"report":return}}openRoomSettings(){u.a.instance.communication.connection.send(new _t.a(this.roomData.roomId))}staffPick(){this.roomData&&(this.roomData.roomPicker=!this.roomData.roomPicker,u.a.instance.communication.connection.send(new tC.a(this.roomData.roomId)))}muteRoom(){this.roomData&&(this.roomData.allInRoomMuted=!this.roomData.allInRoomMuted,u.a.instance.communication.connection.send(new eC.a))}get data(){return this._navigatorService.data}get roomData(){return this.data&&this.data.enteredGuestRoom||null}get roomName(){return this.roomData&&this.roomData.roomName||""}get ownerName(){return this.roomData&&this.roomData.ownerName||""}get showOwner(){return this.roomData&&this.roomData.showOwner}get ranking(){return this.roomData&&this.roomData.ranking||0}get roomSettingsVisible(){return!!this.roomData&&(this.data.currentRoomOwner||u.a.instance.sessionDataManager.securityLevel>=sC.a.MODERATOR)}get roomFilterVisible(){return!!this.roomData&&(this.data.currentRoomOwner||u.a.instance.sessionDataManager.securityLevel>=sC.a.MODERATOR)}get floorPlanVisible(){if(!this.roomData)return!1;const t=u.a.instance.roomSessionManager.getSession(this.roomData.roomId);return!!t&&t.controllerLevel>=K.a.ROOM_OWNER}get addStaffPickedVisible(){return!!this.roomData&&u.a.instance.sessionDataManager.securityLevel>=sC.a.COMMUNITY}get hoomRegionVisible(){return!!this.roomData&&this.roomData.showOwner}get staffPickVisible(){return!!this.roomData&&this.roomData.roomPicker}get canMuteVisible(){return!!this.roomData&&this.roomData.canMute}get mutedVisible(){return!!this.roomData&&this.roomData.allInRoomMuted}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(Kh),n.Yb(g))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-navigator-room-info-component"]],decls:26,vars:17,consts:[[1,"nitro-navigator-room-info","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"d-flex","flex-column"],[1,"h5","m-0","text-break"],["class","h6 m-0",4,"ngIf"],[1,"h6","m-0"],[1,"room-thumbnail"],["src","","image-placeholder",""],[1,"btn-group-vertical","w-100","mt-2"],["type","button","class","btn btn-secondary mb-1",3,"click",4,"ngIf"],["type","button","class","btn btn-secondary mb-1","disabled","",3,"click",4,"ngIf"],["type","button","class","btn btn-secondary",3,"click",4,"ngIf"],["type","button","disabled","",1,"btn","btn-danger","mb-1",3,"click"],["type","button",1,"btn","btn-secondary","mb-1",3,"click"],["type","button","disabled","",1,"btn","btn-secondary","mb-1",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"h6",2),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",3),n.nc("click",function(){return e.hide()}),n.Zb(6,"i",4),n.cc(),n.cc(),n.dc(7,"div",5),n.dc(8,"div",6),n.dc(9,"p",7),n.Wc(10),n.cc(),n.Uc(11,nC,3,4,"p",8),n.dc(12,"p",9),n.Wc(13),n.rc(14,"translate"),n.cc(),n.cc(),n.dc(15,"div",10),n.Zb(16,"img",11),n.cc(),n.dc(17,"div",12),n.Uc(18,iC,3,3,"button",13),n.Uc(19,rC,3,3,"button",14),n.Uc(20,aC,3,3,"button",13),n.Uc(21,oC,3,3,"button",15),n.dc(22,"button",16),n.nc("click",function(){return e.handleButton("report")}),n.Wc(23),n.rc(24,"translate"),n.cc(),n.Uc(25,cC,3,3,"button",13),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(3),n.Xc(n.sc(4,11,"navigator.room.info.popup.title")),n.Kb(7),n.Xc(e.roomName),n.Kb(1),n.yc("ngIf",e.showOwner),n.Kb(2),n.Zc("",n.sc(14,13,"navigator.roomrating")," ",e.roomData.ranking,""),n.Kb(5),n.yc("ngIf",e.roomSettingsVisible),n.Kb(1),n.yc("ngIf",e.roomFilterVisible),n.Kb(1),n.yc("ngIf",e.floorPlanVisible),n.Kb(1),n.yc("ngIf",e.addStaffPickedVisible),n.Kb(2),n.Xc(n.sc(24,15,"help.emergency.main.report.room")),n.Kb(2),n.yc("ngIf",e.canMuteVisible))},directives:[Dr,Kr,m.n,fa],pipes:[ui],encapsulation:2}),t})();var hC=s("6etz"),uC=s("yqT3"),_C=s("GlfS"),dC=s("nlEz"),gC=s("QZVO"),mC=s("0qJb"),pC=s("mHKk"),fC=s("Mixc"),EC=s("h5lc"),SC=s("Oh4I");class bC{constructor(t){this._ngZone=t,this.roomName=null,this.roomDescription=null,this.categoryId="0",this.userCount="0",this.tags=[],this.tradeState="0",this.allowWalkthrough=!1,this.lockState="0",this.password=null,this.confirmPassword=null,this.allowPets=!1,this.allowPetsEat=!1,this.usersWithRights=new Map,this.friendsWithoutRights=new Map,this.hideWalls=!1,this.wallThickness="0",this.floorThickness="0",this.chatBubbleMode="0",this.chatBubbleWeight="0",this.chatBubbleSpeed="0",this.chatFloodProtection="0",this.chatDistance=0,this.muteState="0",this.kickState="0",this.banState="0",this.bannedUsers=new Map,this.selectedUserToUnban=0}selectUserToUnban(t){this._ngZone.run(()=>{this.selectedUserToUnban=this.selectedUserToUnban===t?0:t})}get isValidPassword(){return"2"!==this.lockState||this.password&&this.password.length>0&&this.password===this.confirmPassword}get selectedUsernameToUnban(){return this.selectedUserToUnban>0?this.bannedUsers.get(this.selectedUserToUnban):null}}function vC(t,e){if(1&t&&(n.dc(0,"option",9),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t){const t=e.$implicit;n.yc("value",t.id),n.Kb(1),n.Xc(n.sc(2,2,t.name))}}function IC(t,e){if(1&t&&(n.dc(0,"option",9),n.Wc(1),n.cc()),2&t){const t=e.$implicit;n.yc("value",t),n.Kb(1),n.Xc(t)}}function RC(t,e){if(1&t&&(n.dc(0,"option",9),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t){const t=e.$implicit;n.yc("value",t.key),n.Kb(1),n.Xc(n.sc(2,2,t.value))}}let TC=(()=>{class t{constructor(){this.onSave=new n.r,this.onDeleteRoom=new n.r}save(){this.onSave.emit(this.roomSettings)}deleteRoom(){this.onDeleteRoom.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-navigator-roomsettings-tab-basic-component"]],inputs:{roomSettings:"roomSettings",categories:"categories",maxVisitors:"maxVisitors",tradeSettings:"tradeSettings"},outputs:{onSave:"onSave",onDeleteRoom:"onDeleteRoom"},decls:37,vars:32,consts:[[1,"form-group","mb-2"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","blur"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","blur"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"form-check","mb-3"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[1,"btn","btn-danger","btn-block",3,"click"],[3,"value"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"label"),n.Wc(2),n.rc(3,"translate"),n.cc(),n.dc(4,"input",1),n.nc("ngModelChange",function(t){return e.roomSettings.roomName=t})("blur",function(){return e.save()}),n.cc(),n.cc(),n.dc(5,"div",0),n.dc(6,"label"),n.Wc(7),n.rc(8,"translate"),n.cc(),n.dc(9,"textarea",2),n.nc("ngModelChange",function(t){return e.roomSettings.roomDescription=t})("blur",function(){return e.save()}),n.cc(),n.cc(),n.dc(10,"div",0),n.dc(11,"label"),n.Wc(12),n.rc(13,"translate"),n.cc(),n.dc(14,"select",3),n.nc("ngModelChange",function(t){return e.roomSettings.categoryId=t})("ngModelChange",function(){return e.save()}),n.Uc(15,vC,3,4,"option",4),n.cc(),n.cc(),n.dc(16,"div",0),n.dc(17,"label"),n.Wc(18),n.rc(19,"translate"),n.cc(),n.dc(20,"select",3),n.nc("ngModelChange",function(t){return e.roomSettings.userCount=t})("ngModelChange",function(){return e.save()}),n.Uc(21,IC,2,2,"option",4),n.cc(),n.cc(),n.dc(22,"div",0),n.dc(23,"label"),n.Wc(24),n.rc(25,"translate"),n.cc(),n.dc(26,"select",3),n.nc("ngModelChange",function(t){return e.roomSettings.tradeState=t})("ngModelChange",function(){return e.save()}),n.Uc(27,RC,3,4,"option",4),n.rc(28,"keyvalue"),n.cc(),n.cc(),n.dc(29,"div",5),n.dc(30,"input",6),n.nc("ngModelChange",function(t){return e.roomSettings.allowWalkthrough=t})("ngModelChange",function(){return e.save()}),n.cc(),n.dc(31,"label",7),n.Wc(32),n.rc(33,"translate"),n.cc(),n.cc(),n.dc(34,"button",8),n.nc("click",function(){return e.deleteRoom()}),n.Wc(35),n.rc(36,"translate"),n.cc()),2&t&&(n.Kb(2),n.Xc(n.sc(3,16,"navigator.roomname")),n.Kb(2),n.yc("ngModel",e.roomSettings.roomName),n.Kb(3),n.Xc(n.sc(8,18,"navigator.roomsettings.desc")),n.Kb(2),n.yc("ngModel",e.roomSettings.roomDescription),n.Kb(3),n.Xc(n.sc(13,20,"navigator.category")),n.Kb(2),n.yc("ngModel",e.roomSettings.categoryId),n.Kb(1),n.yc("ngForOf",e.categories),n.Kb(3),n.Xc(n.sc(19,22,"navigator.maxvisitors")),n.Kb(2),n.yc("ngModel",e.roomSettings.userCount),n.Kb(1),n.yc("ngForOf",e.maxVisitors),n.Kb(3),n.Xc(n.sc(25,24,"navigator.tradesettings")),n.Kb(2),n.yc("ngModel",e.roomSettings.tradeState),n.Kb(1),n.yc("ngForOf",n.sc(28,26,e.tradeSettings)),n.Kb(3),n.yc("ngModel",e.roomSettings.allowWalkthrough),n.Kb(2),n.Xc(n.sc(33,28,"navigator.roomsettings.allow_walk_through")),n.Kb(3),n.Xc(n.sc(36,30,"navigator.roomsettings.delete")))},directives:[ur.b,ur.l,ur.n,ur.t,m.m,ur.a,ur.o,ur.v],pipes:[ui,m.h],encapsulation:2}),t})();function yC(t,e){1&t&&(n.dc(0,"small",15),n.Wc(1),n.rc(2,"translate"),n.cc()),2&t&&(n.Kb(1),n.Yc(" ",n.sc(2,1,"navigator.roomsettings.invalidconfirm")," "))}function OC(t,e){if(1&t){const t=n.ec();n.dc(0,"div"),n.dc(1,"div",11),n.dc(2,"label"),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"input",12),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().roomSettings.password=e})("blur",function(){return n.Lc(t),n.qc().save()}),n.cc(),n.cc(),n.dc(6,"div",13),n.dc(7,"label"),n.Wc(8),n.rc(9,"translate"),n.cc(),n.dc(10,"input",12),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().roomSettings.confirmPassword=e})("blur",function(){return n.Lc(t),n.qc().save()}),n.cc(),n.Uc(11,yC,3,3,"small",14),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(3),n.Xc(n.sc(4,5,"navigator.roomsettings.password")),n.Kb(2),n.yc("ngModel",t.roomSettings.password),n.Kb(3),n.Xc(n.sc(9,7,"navigator.roomsettings.passwordconfirm")),n.Kb(2),n.yc("ngModel",t.roomSettings.confirmPassword),n.Kb(1),n.yc("ngIf",!t.roomSettings.isValidPassword)}}let CC=(()=>{class t{constructor(){this.onSave=new n.r}save(){this.onSave.emit(this.roomSettings)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-navigator-roomsettings-tab-access-component"]],inputs:{roomSettings:"roomSettings"},outputs:{onSave:"onSave"},decls:43,vars:37,consts:[[1,"font-weight-bold"],[1,"mb-3"],[1,"form-check"],["type","radio","name","doormode","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","doormode","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","doormode","value","3",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check","mb-2"],["type","radio","name","doormode","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],[4,"ngIf"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-group","mb-2"],["type","password","placeholder","*****",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","blur"],[1,"form-group","mb-3"],["class","form-text text-muted font-weight-bold","style","color: red !important",4,"ngIf"],[1,"form-text","text-muted","font-weight-bold",2,"color","red !important"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Wc(1),n.rc(2,"translate"),n.cc(),n.dc(3,"div",1),n.Wc(4),n.rc(5,"translate"),n.cc(),n.dc(6,"div",0),n.Wc(7),n.rc(8,"translate"),n.cc(),n.dc(9,"div",2),n.dc(10,"input",3),n.nc("ngModelChange",function(t){return e.roomSettings.lockState=t})("ngModelChange",function(){return e.save()}),n.cc(),n.dc(11,"label",4),n.Wc(12),n.rc(13,"translate"),n.cc(),n.cc(),n.dc(14,"div",2),n.dc(15,"input",5),n.nc("ngModelChange",function(t){return e.roomSettings.lockState=t})("ngModelChange",function(){return e.save()}),n.cc(),n.dc(16,"label",4),n.Wc(17),n.rc(18,"translate"),n.cc(),n.cc(),n.dc(19,"div",2),n.dc(20,"input",6),n.nc("ngModelChange",function(t){return e.roomSettings.lockState=t})("ngModelChange",function(){return e.save()}),n.cc(),n.dc(21,"label",4),n.Wc(22),n.rc(23,"translate"),n.cc(),n.cc(),n.dc(24,"div",7),n.dc(25,"input",8),n.nc("ngModelChange",function(t){return e.roomSettings.lockState=t}),n.cc(),n.dc(26,"label",4),n.Wc(27),n.rc(28,"translate"),n.cc(),n.cc(),n.Uc(29,OC,12,9,"div",9),n.dc(30,"div",0),n.Wc(31),n.rc(32,"translate"),n.cc(),n.dc(33,"div",7),n.dc(34,"input",10),n.nc("ngModelChange",function(t){return e.roomSettings.allowPets=t})("ngModelChange",function(){return e.save()}),n.cc(),n.dc(35,"label",4),n.Wc(36),n.rc(37,"translate"),n.cc(),n.cc(),n.dc(38,"div",2),n.dc(39,"input",10),n.nc("ngModelChange",function(t){return e.roomSettings.allowPetsEat=t})("ngModelChange",function(){return e.save()}),n.cc(),n.dc(40,"label",4),n.Wc(41),n.rc(42,"translate"),n.cc(),n.cc()),2&t&&(n.Kb(1),n.Xc(n.sc(2,17,"navigator.roomsettings.roomaccess.caption")),n.Kb(3),n.Xc(n.sc(5,19,"navigator.roomsettings.roomaccess.info")),n.Kb(3),n.Xc(n.sc(8,21,"navigator.roomsettings.doormode")),n.Kb(3),n.yc("ngModel",e.roomSettings.lockState),n.Kb(2),n.Xc(n.sc(13,23,"navigator.roomsettings.doormode.open")),n.Kb(3),n.yc("ngModel",e.roomSettings.lockState),n.Kb(2),n.Xc(n.sc(18,25,"navigator.roomsettings.doormode.doorbell")),n.Kb(3),n.yc("ngModel",e.roomSettings.lockState),n.Kb(2),n.Xc(n.sc(23,27,"navigator.roomsettings.doormode.invisible")),n.Kb(3),n.yc("ngModel",e.roomSettings.lockState),n.Kb(2),n.Xc(n.sc(28,29,"navigator.roomsettings.doormode.password")),n.Kb(2),n.yc("ngIf","2"==e.roomSettings.lockState),n.Kb(2),n.Xc(n.sc(32,31,"navigator.roomsettings.pets")),n.Kb(3),n.yc("ngModel",e.roomSettings.allowPets),n.Kb(2),n.Xc(n.sc(37,33,"navigator.roomsettings.allowpets")),n.Kb(3),n.yc("ngModel",e.roomSettings.allowPetsEat),n.Kb(2),n.Xc(n.sc(42,35,"navigator.roomsettings.allowfoodconsume")))},directives:[ur.q,ur.b,ur.l,ur.n,m.n,ur.a],pipes:[ui],encapsulation:2}),t})();function AC(t,e){if(1&t){const t=n.ec();n.dc(0,"div",6),n.dc(1,"button",7),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().openProfile(s.key)}),n.Wc(2),n.cc(),n.dc(3,"button",8),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().takeRights(s.key)}),n.Zb(4,"i",9),n.cc(),n.cc()}if(2&t){const t=e.$implicit;n.Kb(2),n.Xc(t.value)}}function MC(t,e){if(1&t){const t=n.ec();n.dc(0,"div",6),n.dc(1,"button",8),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().giveRights(s.key)}),n.Zb(2,"i",10),n.cc(),n.dc(3,"button",7),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().openProfile(s.key)}),n.Wc(4),n.cc(),n.cc()}if(2&t){const t=e.$implicit;n.Kb(4),n.Xc(t.value)}}const wC=function(){return["displayed","total"]},UC=function(t,e){return[t,e]};let DC=(()=>{class t{constructor(){this.onSave=new n.r,this.onGiveRights=new n.r,this.onTakeRights=new n.r,this.onOpenProfile=new n.r}save(){this.onSave.emit(this.roomSettings)}giveRights(t){this.onGiveRights.emit(t)}takeRights(t){this.onTakeRights.emit(t)}openProfile(t){this.onOpenProfile.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-navigator-roomsettings-tab-rights-component"]],inputs:{roomSettings:"roomSettings"},outputs:{onSave:"onSave",onGiveRights:"onGiveRights",onTakeRights:"onTakeRights",onOpenProfile:"onOpenProfile"},decls:18,vars:24,consts:[[1,"row"],[1,"col-6"],[1,"font-weight-bold","mb-2"],[1,"grid-container","position-relativ","mb-1",2,"min-height","400px","max-height","400px"],["class","btn-group mb-1 w-100",4,"ngFor","ngForOf"],[1,"grid-container","position-relative","mb-1",2,"min-height","400px","max-height","400px"],[1,"btn-group","mb-1","w-100"],[1,"btn","btn-primary","btn-sm","w-100",3,"click"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-chevron-right"],[1,"fas","fa-chevron-left"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"div",2),n.Wc(3),n.rc(4,"translate"),n.cc(),n.cc(),n.dc(5,"div",1),n.dc(6,"div",2),n.Wc(7),n.rc(8,"translate"),n.cc(),n.cc(),n.cc(),n.dc(9,"div",0),n.dc(10,"div",1),n.dc(11,"perfect-scrollbar",3),n.Uc(12,AC,5,1,"div",4),n.rc(13,"keyvalue"),n.cc(),n.cc(),n.dc(14,"div",1),n.dc(15,"perfect-scrollbar",5),n.Uc(16,MC,5,1,"div",4),n.rc(17,"keyvalue"),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(3),n.Xc(n.uc(4,4,"navigator.flatctrls.userswithrights",n.Bc(16,wC),n.Dc(17,UC,e.roomSettings.usersWithRights.size.toString(),e.roomSettings.usersWithRights.size.toString()))),n.Kb(4),n.Xc(n.uc(8,8,"navigator.flatctrls.friends",n.Bc(20,wC),n.Dc(21,UC,e.roomSettings.friendsWithoutRights.size.toString(),e.roomSettings.friendsWithoutRights.size.toString()))),n.Kb(5),n.yc("ngForOf",n.sc(13,12,e.roomSettings.usersWithRights)),n.Kb(4),n.yc("ngForOf",n.sc(17,14,e.roomSettings.friendsWithoutRights)))},directives:[Hr.b,m.m],pipes:[ui,m.h],encapsulation:2}),t})(),NC=(()=>{class t{constructor(){this.onSave=new n.r}save(){this.onSave.emit(this.roomSettings)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-navigator-roomsettings-tab-vipchat-component"]],inputs:{roomSettings:"roomSettings"},outputs:{onSave:"onSave"},decls:88,vars:86,consts:[[1,"font-weight-bold"],[1,"mb-3"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[1,"form-control","form-control-sm","mb-3",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","-1"],["value","-2"],[1,"mb-2"],[1,"form-control","form-control-sm","mb-2",3,"ngModel","ngModelChange"],["value","2"],[1,"form-group","mb-0"],["type","number","min","0",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","blur"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Wc(1),n.rc(2,"translate"),n.cc(),n.dc(3,"div",1),n.Wc(4),n.rc(5,"translate"),n.cc(),n.dc(6,"div",0),n.Wc(7),n.rc(8,"translate"),n.cc(),n.dc(9,"div",2),n.dc(10,"input",3),n.nc("ngModelChange",function(t){return e.roomSettings.hideWalls=t})("ngModelChange",function(){return e.save()}),n.cc(),n.dc(11,"label",4),n.Wc(12),n.rc(13,"translate"),n.cc(),n.cc(),n.dc(14,"select",5),n.nc("ngModelChange",function(t){return e.roomSettings.wallThickness=t})("ngModelChange",function(){return e.save()}),n.dc(15,"option",6),n.Wc(16),n.rc(17,"translate"),n.cc(),n.dc(18,"option",7),n.Wc(19),n.rc(20,"translate"),n.cc(),n.dc(21,"option",8),n.Wc(22),n.rc(23,"translate"),n.cc(),n.dc(24,"option",9),n.Wc(25),n.rc(26,"translate"),n.cc(),n.cc(),n.dc(27,"select",5),n.nc("ngModelChange",function(t){return e.roomSettings.floorThickness=t})("ngModelChange",function(){return e.save()}),n.dc(28,"option",6),n.Wc(29),n.rc(30,"translate"),n.cc(),n.dc(31,"option",7),n.Wc(32),n.rc(33,"translate"),n.cc(),n.dc(34,"option",8),n.Wc(35),n.rc(36,"translate"),n.cc(),n.dc(37,"option",9),n.Wc(38),n.rc(39,"translate"),n.cc(),n.cc(),n.dc(40,"div",0),n.Wc(41),n.rc(42,"translate"),n.cc(),n.dc(43,"div",10),n.Wc(44),n.rc(45,"translate"),n.cc(),n.dc(46,"select",11),n.nc("ngModelChange",function(t){return e.roomSettings.chatBubbleMode=t})("ngModelChange",function(){return e.save()}),n.dc(47,"option",6),n.Wc(48),n.rc(49,"translate"),n.cc(),n.dc(50,"option",7),n.Wc(51),n.rc(52,"translate"),n.cc(),n.cc(),n.dc(53,"select",11),n.nc("ngModelChange",function(t){return e.roomSettings.chatBubbleWeight=t})("ngModelChange",function(){return e.save()}),n.dc(54,"option",6),n.Wc(55),n.rc(56,"translate"),n.cc(),n.dc(57,"option",7),n.Wc(58),n.rc(59,"translate"),n.cc(),n.dc(60,"option",12),n.Wc(61),n.rc(62,"translate"),n.cc(),n.cc(),n.dc(63,"select",11),n.nc("ngModelChange",function(t){return e.roomSettings.chatBubbleSpeed=t})("ngModelChange",function(){return e.save()}),n.dc(64,"option",6),n.Wc(65),n.rc(66,"translate"),n.cc(),n.dc(67,"option",7),n.Wc(68),n.rc(69,"translate"),n.cc(),n.dc(70,"option",12),n.Wc(71),n.rc(72,"translate"),n.cc(),n.cc(),n.dc(73,"select",11),n.nc("ngModelChange",function(t){return e.roomSettings.chatFloodProtection=t})("ngModelChange",function(){return e.save()}),n.dc(74,"option",6),n.Wc(75),n.rc(76,"translate"),n.cc(),n.dc(77,"option",7),n.Wc(78),n.rc(79,"translate"),n.cc(),n.dc(80,"option",12),n.Wc(81),n.rc(82,"translate"),n.cc(),n.cc(),n.dc(83,"div",13),n.dc(84,"label"),n.Wc(85),n.rc(86,"translate"),n.cc(),n.dc(87,"input",14),n.nc("ngModelChange",function(t){return e.roomSettings.chatDistance=t})("blur",function(){return e.save()}),n.cc(),n.cc()),2&t&&(n.Kb(1),n.Xc(n.sc(2,34,"navigator.roomsettings.vip.caption")),n.Kb(3),n.Xc(n.sc(5,36,"navigator.roomsettings.vip.info")),n.Kb(3),n.Xc(n.sc(8,38,"navigator.roomsettings.vip_settings")),n.Kb(3),n.yc("ngModel",e.roomSettings.hideWalls),n.Kb(2),n.Xc(n.sc(13,40,"navigator.roomsettings.hide_walls")),n.Kb(2),n.yc("ngModel",e.roomSettings.wallThickness),n.Kb(2),n.Xc(n.sc(17,42,"navigator.roomsettings.wall_thickness.normal")),n.Kb(3),n.Xc(n.sc(20,44,"navigator.roomsettings.wall_thickness.thick")),n.Kb(3),n.Xc(n.sc(23,46,"navigator.roomsettings.wall_thickness.thin")),n.Kb(3),n.Xc(n.sc(26,48,"navigator.roomsettings.wall_thickness.thinnest")),n.Kb(2),n.yc("ngModel",e.roomSettings.floorThickness),n.Kb(2),n.Xc(n.sc(30,50,"navigator.roomsettings.floor_thickness.normal")),n.Kb(3),n.Xc(n.sc(33,52,"navigator.roomsettings.floor_thickness.thick")),n.Kb(3),n.Xc(n.sc(36,54,"navigator.roomsettings.floor_thickness.thin")),n.Kb(3),n.Xc(n.sc(39,56,"navigator.roomsettings.floor_thickness.thinnest")),n.Kb(3),n.Xc(n.sc(42,58,"navigator.roomsettings.chat_settings")),n.Kb(3),n.Xc(n.sc(45,60,"navigator.roomsettings.chat_settings.info")),n.Kb(2),n.yc("ngModel",e.roomSettings.chatBubbleMode),n.Kb(2),n.Xc(n.sc(49,62,"navigator.roomsettings.chat.mode.free.flow")),n.Kb(3),n.Xc(n.sc(52,64,"navigator.roomsettings.chat.mode.line.by.line")),n.Kb(2),n.yc("ngModel",e.roomSettings.chatBubbleWeight),n.Kb(2),n.Xc(n.sc(56,66,"navigator.roomsettings.chat.bubbles.width.normal")),n.Kb(3),n.Xc(n.sc(59,68,"navigator.roomsettings.chat.bubbles.width.thin")),n.Kb(3),n.Xc(n.sc(62,70,"navigator.roomsettings.chat.bubbles.width.wide")),n.Kb(2),n.yc("ngModel",e.roomSettings.chatBubbleSpeed),n.Kb(2),n.Xc(n.sc(66,72,"navigator.roomsettings.chat.speed.fast")),n.Kb(3),n.Xc(n.sc(69,74,"navigator.roomsettings.chat.speed.normal")),n.Kb(3),n.Xc(n.sc(72,76,"navigator.roomsettings.chat.speed.slow")),n.Kb(2),n.yc("ngModel",e.roomSettings.chatFloodProtection),n.Kb(2),n.Xc(n.sc(76,78,"navigator.roomsettings.chat.flood.loose")),n.Kb(3),n.Xc(n.sc(79,80,"navigator.roomsettings.chat.flood.normal")),n.Kb(3),n.Xc(n.sc(82,82,"navigator.roomsettings.chat.flood.strict")),n.Kb(4),n.Xc(n.sc(86,84,"navigator.roomsettings.chat_settings.hearing.distance")),n.Kb(2),n.yc("ngModel",e.roomSettings.chatDistance))},directives:[ur.a,ur.l,ur.n,ur.t,ur.o,ur.v,ur.p,ur.b],pipes:[ui],encapsulation:2}),t})();function LC(t,e){if(1&t){const t=n.ec();n.dc(0,"div",18),n.dc(1,"button",19),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().openProfile(s.key)}),n.Wc(2),n.cc(),n.dc(3,"button",20),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().roomSettings.selectUserToUnban(s.key)}),n.Zb(4,"i",21),n.cc(),n.cc()}if(2&t){const t=e.$implicit;n.Kb(2),n.Xc(t.value)}}const PC=function(t){return{disabled:t}};let xC=(()=>{class t{constructor(){this.onSave=new n.r,this.onUnban=new n.r,this.onOpenProfile=new n.r}save(){this.onSave.emit(this.roomSettings)}unban(){this.onUnban.emit()}openProfile(t){this.onOpenProfile.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-navigator-roomsettings-tab-mod-component"]],inputs:{roomSettings:"roomSettings"},outputs:{onSave:"onSave",onUnban:"onUnban",onOpenProfile:"onOpenProfile"},decls:59,vars:54,consts:[[1,"mb-3"],[1,"font-weight-bold"],[1,"form-check","form-check-inline"],["type","radio","name","moderation_mute","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","moderation_mute","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"font-weight-bold","mt-2"],["type","radio","name","moderation_kick","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","moderation_kick","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","moderation_kick","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","moderation_ban","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","moderation_ban","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"font-weight-bold","mt-3","mb-1"],[1,"row"],[1,"col-6"],[1,"grid-container","position-relativ","mb-1",2,"min-height","150px","max-height","150px"],["class","btn-group mb-1 w-100",4,"ngFor","ngForOf"],[1,"btn","btn-primary","btn-sm","w-100",3,"ngClass","click"],[1,"btn-group","mb-1","w-100"],[1,"btn","btn-primary","btn-sm","w-100",3,"click"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-chevron-right"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.Wc(1),n.rc(2,"translate"),n.cc(),n.dc(3,"div",1),n.Wc(4),n.rc(5,"translate"),n.cc(),n.dc(6,"div",2),n.dc(7,"input",3),n.nc("ngModelChange",function(t){return e.roomSettings.muteState=t})("ngModelChange",function(){return e.save()}),n.cc(),n.dc(8,"label",4),n.Wc(9),n.rc(10,"translate"),n.cc(),n.cc(),n.dc(11,"div",2),n.dc(12,"input",5),n.nc("ngModelChange",function(t){return e.roomSettings.muteState=t})("ngModelChange",function(){return e.save()}),n.cc(),n.dc(13,"label",4),n.Wc(14),n.rc(15,"translate"),n.cc(),n.cc(),n.dc(16,"div",6),n.Wc(17),n.rc(18,"translate"),n.cc(),n.dc(19,"div",2),n.dc(20,"input",7),n.nc("ngModelChange",function(t){return e.roomSettings.kickState=t})("ngModelChange",function(){return e.save()}),n.cc(),n.dc(21,"label",4),n.Wc(22),n.rc(23,"translate"),n.cc(),n.cc(),n.dc(24,"div",2),n.dc(25,"input",8),n.nc("ngModelChange",function(t){return e.roomSettings.kickState=t})("ngModelChange",function(){return e.save()}),n.cc(),n.dc(26,"label",4),n.Wc(27),n.rc(28,"translate"),n.cc(),n.cc(),n.dc(29,"div",2),n.dc(30,"input",9),n.nc("ngModelChange",function(t){return e.roomSettings.kickState=t})("ngModelChange",function(){return e.save()}),n.cc(),n.dc(31,"label",4),n.Wc(32),n.rc(33,"translate"),n.cc(),n.cc(),n.dc(34,"div",6),n.Wc(35),n.rc(36,"translate"),n.cc(),n.dc(37,"div",2),n.dc(38,"input",10),n.nc("ngModelChange",function(t){return e.roomSettings.banState=t})("ngModelChange",function(){return e.save()}),n.cc(),n.dc(39,"label",4),n.Wc(40),n.rc(41,"translate"),n.cc(),n.cc(),n.dc(42,"div",2),n.dc(43,"input",11),n.nc("ngModelChange",function(t){return e.roomSettings.banState=t})("ngModelChange",function(){return e.save()}),n.cc(),n.dc(44,"label",4),n.Wc(45),n.rc(46,"translate"),n.cc(),n.cc(),n.dc(47,"div",12),n.Wc(48),n.rc(49,"translate"),n.cc(),n.dc(50,"div",13),n.dc(51,"div",14),n.dc(52,"perfect-scrollbar",15),n.Uc(53,LC,5,1,"div",16),n.rc(54,"keyvalue"),n.cc(),n.cc(),n.dc(55,"div",14),n.dc(56,"button",17),n.nc("click",function(){return e.unban()}),n.Wc(57),n.rc(58,"translate"),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(1),n.Xc(n.sc(2,24,"navigator.roomsettings.moderation.header")),n.Kb(3),n.Xc(n.sc(5,26,"navigator.roomsettings.moderation.mute.header")),n.Kb(3),n.yc("ngModel",e.roomSettings.muteState),n.Kb(2),n.Xc(n.sc(10,28,"navigator.roomsettings.moderation.none")),n.Kb(3),n.yc("ngModel",e.roomSettings.muteState),n.Kb(2),n.Xc(n.sc(15,30,"navigator.roomsettings.moderation.rights")),n.Kb(3),n.Xc(n.sc(18,32,"navigator.roomsettings.moderation.kick.header")),n.Kb(3),n.yc("ngModel",e.roomSettings.kickState),n.Kb(2),n.Xc(n.sc(23,34,"navigator.roomsettings.moderation.all")),n.Kb(3),n.yc("ngModel",e.roomSettings.kickState),n.Kb(2),n.Xc(n.sc(28,36,"navigator.roomsettings.moderation.rights")),n.Kb(3),n.yc("ngModel",e.roomSettings.kickState),n.Kb(2),n.Xc(n.sc(33,38,"navigator.roomsettings.moderation.none")),n.Kb(3),n.Xc(n.sc(36,40,"navigator.roomsettings.moderation.ban.header")),n.Kb(3),n.yc("ngModel",e.roomSettings.banState),n.Kb(2),n.Xc(n.sc(41,42,"navigator.roomsettings.moderation.none")),n.Kb(3),n.yc("ngModel",e.roomSettings.banState),n.Kb(2),n.Xc(n.sc(46,44,"navigator.roomsettings.moderation.rights")),n.Kb(3),n.Zc("",n.sc(49,46,"navigator.roomsettings.moderation.banned.users")," (",e.roomSettings.bannedUsers.size,")"),n.Kb(5),n.yc("ngForOf",n.sc(54,48,e.roomSettings.bannedUsers)),n.Kb(3),n.yc("ngClass",n.Cc(52,PC,0===e.roomSettings.selectedUserToUnban)),n.Kb(1),n.Zc("",n.sc(58,50,"navigator.roomsettings.moderation.unban")," ",e.roomSettings.selectedUsernameToUnban,""))},directives:[ur.q,ur.b,ur.l,ur.n,Hr.b,m.m,m.l],pipes:[ui,m.h],encapsulation:2}),t})();function FC(t,e){if(1&t){const t=n.ec();n.dc(0,"nitro-navigator-roomsettings-tab-basic-component",12),n.nc("onSave",function(e){return n.Lc(t),n.qc(2).onSave(e)})("onDeleteRoom",function(){return n.Lc(t),n.qc(2).onDeleteRoom()}),n.cc()}if(2&t){const t=n.qc(2);n.yc("roomSettings",t.roomSettings)("categories",t.categories)("maxVisitors",t.maxVisitors)("tradeSettings",t.tradeSettings)}}function kC(t,e){if(1&t){const t=n.ec();n.dc(0,"nitro-navigator-roomsettings-tab-access-component",13),n.nc("onSave",function(e){return n.Lc(t),n.qc(2).onSave(e)}),n.cc()}if(2&t){const t=n.qc(2);n.yc("roomSettings",t.roomSettings)}}function WC(t,e){if(1&t){const t=n.ec();n.dc(0,"nitro-navigator-roomsettings-tab-rights-component",14),n.nc("onSave",function(e){return n.Lc(t),n.qc(2).onSave(e)})("onGiveRights",function(e){return n.Lc(t),n.qc(2).onGiveRights(e)})("onTakeRights",function(e){return n.Lc(t),n.qc(2).onTakeRights(e)})("onOpenProfile",function(e){return n.Lc(t),n.qc(2).onOpenProfile(e)}),n.cc()}if(2&t){const t=n.qc(2);n.yc("roomSettings",t.roomSettings)}}function BC(t,e){if(1&t){const t=n.ec();n.dc(0,"nitro-navigator-roomsettings-tab-vipchat-component",13),n.nc("onSave",function(e){return n.Lc(t),n.qc(2).onSave(e)}),n.cc()}if(2&t){const t=n.qc(2);n.yc("roomSettings",t.roomSettings)}}function VC(t,e){if(1&t){const t=n.ec();n.dc(0,"nitro-navigator-roomsettings-tab-mod-component",15),n.nc("onSave",function(e){return n.Lc(t),n.qc(2).onSave(e)})("onUnban",function(e){return n.Lc(t),n.qc(2).onUnban(e)})("onOpenProfile",function(e){return n.Lc(t),n.qc(2).onOpenProfile(e)}),n.cc()}if(2&t){const t=n.qc(2);n.yc("roomSettings",t.roomSettings)}}const GC=function(t){return{active:t}};function KC(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.Wc(2),n.rc(3,"translate"),n.dc(4,"button",3),n.nc("click",function(){return n.Lc(t),n.qc().hide()}),n.Zb(5,"i",4),n.cc(),n.cc(),n.dc(6,"div",5),n.dc(7,"div",6),n.dc(8,"button",7),n.nc("click",function(){return n.Lc(t),n.qc().changeTab(1)}),n.Wc(9),n.rc(10,"translate"),n.cc(),n.dc(11,"button",7),n.nc("click",function(){return n.Lc(t),n.qc().changeTab(2)}),n.Wc(12),n.rc(13,"translate"),n.cc(),n.dc(14,"button",7),n.nc("click",function(){return n.Lc(t),n.qc().changeTab(3)}),n.Wc(15),n.rc(16,"translate"),n.cc(),n.dc(17,"button",7),n.nc("click",function(){return n.Lc(t),n.qc().changeTab(4)}),n.Wc(18),n.rc(19,"translate"),n.cc(),n.dc(20,"button",7),n.nc("click",function(){return n.Lc(t),n.qc().changeTab(5)}),n.Wc(21),n.rc(22,"translate"),n.cc(),n.cc(),n.Uc(23,FC,1,4,"nitro-navigator-roomsettings-tab-basic-component",8),n.Uc(24,kC,1,1,"nitro-navigator-roomsettings-tab-access-component",9),n.Uc(25,WC,1,1,"nitro-navigator-roomsettings-tab-rights-component",10),n.Uc(26,BC,1,1,"nitro-navigator-roomsettings-tab-vipchat-component",9),n.Uc(27,VC,1,1,"nitro-navigator-roomsettings-tab-mod-component",11),n.cc(),n.cc()}if(2&t){const t=n.qc();n.Kb(2),n.Yc(" ",n.sc(3,16,"navigator.roomsettings")," "),n.Kb(6),n.yc("ngClass",n.Cc(28,GC,1===t.currentTab)),n.Kb(1),n.Xc(n.sc(10,18,"navigator.roomsettings.tab.1")),n.Kb(2),n.yc("ngClass",n.Cc(30,GC,2===t.currentTab)),n.Kb(1),n.Xc(n.sc(13,20,"navigator.roomsettings.tab.2")),n.Kb(2),n.yc("ngClass",n.Cc(32,GC,3===t.currentTab)),n.Kb(1),n.Xc(n.sc(16,22,"navigator.roomsettings.tab.3")),n.Kb(2),n.yc("ngClass",n.Cc(34,GC,4===t.currentTab)),n.Kb(1),n.Xc(n.sc(19,24,"navigator.roomsettings.tab.4")),n.Kb(2),n.yc("ngClass",n.Cc(36,GC,5===t.currentTab)),n.Kb(1),n.Xc(n.sc(22,26,"navigator.roomsettings.tab.5")),n.Kb(2),n.yc("ngIf",1===t.currentTab),n.Kb(1),n.yc("ngIf",2===t.currentTab),n.Kb(1),n.yc("ngIf",3===t.currentTab),n.Kb(1),n.yc("ngIf",4===t.currentTab),n.Kb(1),n.yc("ngIf",5===t.currentTab)}}let HC=(()=>{class t{constructor(t,e,s,n){this._navigatorService=t,this._friendListService=e,this._notificationService=s,this._ngZone=n,this._currentTab=1,this._messages=[],this._maxVisitors=[],this.onRoomSettingsEvent=this.onRoomSettingsEvent.bind(this),this.onRoomUsersWithRightsEvent=this.onRoomUsersWithRightsEvent.bind(this),this.onRoomBannedUsersEvent=this.onRoomBannedUsersEvent.bind(this),this.clear(),this.registerMessages()}clear(){this._currentTab=1,this.roomSettings=new bC(this._ngZone),this._roomId=0,this._oldRoomName=null,this._visible=!1}ngOnDestroy(){this.clear(),this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new uC.a(this.onRoomSettingsEvent),new _C.a(this.onRoomUsersWithRightsEvent),new hC.a(this.onRoomBannedUsersEvent)];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomSettingsEvent(t){if(!(t instanceof uC.a))return;const e=t.getParser();e&&(this.clear(),this._roomId=e.roomId,this._ngZone.run(()=>{this.roomSettings.roomName=e.name,this.roomSettings.roomDescription=e.description,this.roomSettings.categoryId=e.categoryId.toString(),this.roomSettings.userCount=e.userCount.toString(),this.roomSettings.tradeState=e.tradeMode.toString(),this.roomSettings.allowWalkthrough=e.allowWalkthrough,this.roomSettings.lockState=e.state.toString(),this.roomSettings.allowPets=e.allowPets,this.roomSettings.hideWalls=e.hideWalls,this.roomSettings.wallThickness=e.thicknessWall.toString(),this.roomSettings.floorThickness=e.thicknessFloor.toString(),this.roomSettings.chatBubbleMode=e.chatSettings.mode.toString(),this.roomSettings.chatBubbleWeight=e.chatSettings.weight.toString(),this.roomSettings.chatBubbleSpeed=e.chatSettings.speed.toString(),this.roomSettings.chatFloodProtection=e.chatSettings.protection.toString(),this.roomSettings.chatDistance=e.chatSettings.distance,this.roomSettings.muteState=e.moderationSettings.allowMute.toString(),this.roomSettings.kickState=e.moderationSettings.allowKick.toString(),this.roomSettings.banState=e.moderationSettings.allowBan.toString(),this._maxVisitors=this._navigatorService.getMaxVisitors(50),this._oldRoomName=e.name,this._oldLockState=e.state.toString(),this._visible=!0}),u.a.instance.communication.connection.send(new EC.a(this._roomId)),u.a.instance.communication.connection.send(new fC.a(this._roomId)))}onRoomUsersWithRightsEvent(t){if(!(t instanceof _C.a))return;const e=t.getParser();e&&(this.roomSettings.usersWithRights=new Map(e.users),this.getFriendsWithoutRights())}onRoomBannedUsersEvent(t){if(!(t instanceof hC.a))return;const e=t.getParser();e&&(this.roomSettings.bannedUsers=new Map(e.users))}getFriendsWithoutRights(){this._friendListService.friends.forEach((t,e)=>{this.roomSettings.usersWithRights.has(e)||this.roomSettings.friendsWithoutRights.set(e,t.name)})}changeTab(t){this._currentTab=t}onDeleteRoom(){const t=u.a.instance.localization.getValue("navigator.roomsettings.deleteroom.confirm.title"),e=u.a.instance.localization.getValueWithParameter("navigator.roomsettings.deleteroom.confirm.message","room_name","<b>"+this.roomSettings.roomName+"</b>"),s=[new eu("navigator.roomsettings.delete",()=>{u.a.instance.communication.connection.send(new dC.a(this._roomId)),this.hide()},["btn-danger"]),new eu("generic.close",()=>{},["btn-primary"])];this._notificationService.alertWithChoices(e,s,t)}onOpenProfile(t){}onGiveRights(t){this.roomSettings.friendsWithoutRights.has(t)&&(this._ngZone.run(()=>{this.roomSettings.usersWithRights.set(t,this.roomSettings.friendsWithoutRights.get(t)),this.roomSettings.friendsWithoutRights.delete(t)}),u.a.instance.communication.connection.send(new gC.a(t)))}onTakeRights(t){this.roomSettings.usersWithRights.has(t)&&(this._ngZone.run(()=>{this.roomSettings.friendsWithoutRights.set(t,this.roomSettings.usersWithRights.get(t)),this.roomSettings.usersWithRights.delete(t)}),u.a.instance.communication.connection.send(new mC.a(t)))}onUnban(){if(0===this.roomSettings.selectedUserToUnban)return;if(!this.roomSettings.bannedUsers.has(this.roomSettings.selectedUserToUnban))return;const t=this.roomSettings.selectedUserToUnban;this._ngZone.run(()=>{this.roomSettings.bannedUsers.delete(this.roomSettings.selectedUserToUnban),this.roomSettings.selectedUserToUnban=0}),u.a.instance.communication.connection.send(new pC.a(t,this._roomId))}hide(){this._visible=!1,this.clear()}onSave(t){this._ngZone.run(()=>{this.roomSettings=t});let e=t.lockState,s=t.password;t.isValidPassword?this._oldLockState=e:(e=this._oldLockState,s=null),t.roomName.length<1&&(t.roomName=this._oldRoomName),parseInt(t.userCount)<0&&(t.userCount="10");const n=new SC.a(this._roomId,t.roomName,t.roomDescription,parseInt(e),s,parseInt(t.userCount),parseInt(t.categoryId),t.tags.length,t.tags,parseInt(t.tradeState),t.allowPets,t.allowPetsEat,t.allowWalkthrough,t.hideWalls,parseInt(t.wallThickness),parseInt(t.floorThickness),parseInt(t.muteState),parseInt(t.kickState),parseInt(t.banState),parseInt(t.chatBubbleMode),parseInt(t.chatBubbleWeight),parseInt(t.chatBubbleSpeed),t.chatDistance,parseInt(t.chatFloodProtection));u.a.instance.communication.connection.send(n)}get currentTab(){return this._currentTab}get categories(){return this._navigatorService.categories}get maxVisitors(){return this._maxVisitors}get tradeSettings(){return this._navigatorService.tradeSettings}get visible(){return this._visible}get usersWithRights(){return this.roomSettings.usersWithRights}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(Kh),n.Yb(Hs),n.Yb(es),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-navigator-roomsettings-component"]],decls:1,vars:1,consts:[["dragHandle",".card-header","class","card nitro-navigator-roomsettings-component",3,"bringToTop","draggable",4,"ngIf"],["dragHandle",".card-header",1,"card","nitro-navigator-roomsettings-component",3,"bringToTop","draggable"],[1,"card-header"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"btn-group","w-100","mb-3"],["type","button",1,"btn","btn-sm","btn-primary",3,"ngClass","click"],[3,"roomSettings","categories","maxVisitors","tradeSettings","onSave","onDeleteRoom",4,"ngIf"],[3,"roomSettings","onSave",4,"ngIf"],[3,"roomSettings","onSave","onGiveRights","onTakeRights","onOpenProfile",4,"ngIf"],[3,"roomSettings","onSave","onUnban","onOpenProfile",4,"ngIf"],[3,"roomSettings","categories","maxVisitors","tradeSettings","onSave","onDeleteRoom"],[3,"roomSettings","onSave"],[3,"roomSettings","onSave","onGiveRights","onTakeRights","onOpenProfile"],[3,"roomSettings","onSave","onUnban","onOpenProfile"]],template:function(t,e){1&t&&n.Uc(0,KC,28,38,"div",0),2&t&&n.yc("ngIf",e.visible)},directives:[m.n,Dr,Kr,m.l,TC,CC,DC,NC,xC],pipes:[ui],encapsulation:2}),t})();const jC=["nitro-navigator-search-component",""];function zC(t,e){if(1&t){const t=n.ec();n.dc(0,"button",6),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().changeFilter(s)}),n.Wc(1),n.rc(2,"translate"),n.cc()}if(2&t){const t=e.$implicit;n.Kb(1),n.Xc(n.sc(2,1,"navigator.filter."+t.name))}}let YC=(()=>{class t{constructor(t,e){this._formBuilder=t,this._navigatorService=e}ngOnInit(){this._form=this._formBuilder.group({search:[""]})}changeFilter(t){this._navigatorService.setCurrentFilter(t)}search(t){this._navigatorService.search(this.searchValue)}clearSearch(){}get form(){return this._form}get searchValue(){return this._navigatorService.lastSearch}set searchValue(t){this._navigatorService.lastSearch=t}get currentFilter(){return this._navigatorService.filter}get searchFilters(){return Kh.SEARCH_FILTERS}get hasSearchResults(){return this._navigatorService.lastSearchResults&&this._navigatorService.lastSearchResults.length>0}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(ur.c),n.Yb(Kh))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-navigator-search-component",""]],attrs:jC,decls:9,vars:8,consts:[[1,"input-group","mb-2"],["ngbDropdown","",1,"input-group-prepend"],["type","button","ngbDropdownToggle","",1,"btn","btn-secondary"],["ngbDropdownMenu","",1,"dropdown-menu"],["class","dropdown-item","ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],["type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange","keydown.enter"],["ngbDropdownItem","",1,"dropdown-item",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"button",2),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"div",3),n.Uc(6,zC,3,3,"button",4),n.cc(),n.cc(),n.dc(7,"input",5),n.nc("ngModelChange",function(t){return e.searchValue=t})("keydown.enter",function(t){return e.search(t)}),n.rc(8,"translate"),n.cc(),n.cc()),2&t&&(n.Kb(3),n.Xc(n.sc(4,4,"navigator.filter."+e.currentFilter.name)),n.Kb(3),n.yc("ngForOf",e.searchFilters),n.Kb(1),n.yc("ngModel",e.searchValue)("placeholder",n.sc(8,6,"navigator.filter.input.placeholder")))},directives:[t_.c,t_.g,t_.e,m.m,ur.b,ur.l,ur.n,t_.d],pipes:[ui],encapsulation:2}),t})(),qC=(()=>{class t{}return t.LIST=0,t.THUMBNAILS=1,t.FORCED_THUMBNAILS=2,t})();const XC=["nitro-navigator-search-result-item-component",""];function ZC(t,e){1&t&&n.Zb(0,"i",12)}function QC(t,e){1&t&&n.Zb(0,"i",13)}function JC(t,e){1&t&&n.Zb(0,"i",14)}function $C(t,e){if(1&t&&(n.dc(0,"span",16),n.Zb(1,"i",3),n.Wc(2),n.cc()),2&t){const t=n.qc(2);n.Kb(2),n.Xc(t.room.ownerName)}}function tA(t,e){if(1&t&&(n.dc(0,"div",15),n.dc(1,"span",16),n.Wc(2),n.cc(),n.dc(3,"span",17),n.Wc(4),n.cc(),n.Uc(5,$C,3,1,"span",18),n.cc()),2&t){const t=n.qc();n.Kb(2),n.Xc(t.room.roomName),n.Kb(2),n.Yc('"',t.room.description,'"'),n.Kb(1),n.yc("ngIf",null!=t.room.ownerName)}}let eA=(()=>{class t{constructor(t,e){this._navigatorService=t,this._ngZone=e,this._thumbnailUrl=null,this._didRequestUrl=!1}visit(){if(this.room.ownerId!==u.a.instance.sessionDataManager.userId){if(0!==this.room.habboGroupId)return void this._navigatorService.goToPrivateRoom(this.room.roomId);switch(this.room.doorMode){case Bh.a.DOORBELL_STATE:return void this._navigatorService.openRoomDoorbell(this.room);case Bh.a.PASSWORD_STATE:return void this._navigatorService.openRoomPassword(this.room)}}this._navigatorService.goToRoom(this.room.roomId)}get isGroup(){return this.room&&this.room.habboGroupId>0}get isDoorbell(){return this.room&&this.room.doorMode===Bh.a.DOORBELL_STATE}get isPassword(){return this.room&&this.room.doorMode===Bh.a.PASSWORD_STATE}get thumbnail(){if(this._thumbnailUrl)return this._thumbnailUrl;if(!this.room||this._didRequestUrl)return null;let t=u.a.instance.core.configuration.getValue("thumbnails.url");t=t.replace("%thumbnail%",this.room.roomId.toString());const e=new XMLHttpRequest;return e.open("GET",t,!0),e.onreadystatechange=()=>{4===e.readyState&&200===e.status&&(this._thumbnailUrl=t)},e.send(),this._didRequestUrl=!0,null}get entryBg(){const t=this.room.userCount/this.room.maxUserCount*100;let e="badge-secondary";return t>=92?e="badge-danger":t>=50?e="badge-warning text-white":t>0&&(e="badge-success"),e}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(Kh),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-navigator-search-result-item-component",""]],inputs:{room:"room",displayMode:"displayMode"},attrs:XC,decls:15,vars:7,consts:[["type","button",1,"btn","btn-secondary","btn-sm","justify-content-between","detail-info",3,"click"],[1,"d-flex","justify-content-center","flex-grow-1","overflow-hidden"],[1,"d-flex","justify-content-center","align-items-center","badge","badge-secondary","text-center",3,"ngClass"],[1,"fas","fa-user","mr-1"],[1,"d-flex","flex-column","justify-content-center","align-items-start","flex-grow-1","px-2","overflow-hidden"],[1,"d-block","text-truncate",2,"max-width","95%"],[1,"d-flex","flex-row-reverse","align-items-center"],["tooltipClass","search-result-item-tooltip","placement","right","container","body",1,"fas","fa-info-circle",3,"ngbTooltip"],["class","fas fa-users mr-2",4,"ngIf"],["class","fas fa-lock mr-2",4,"ngIf"],["class","fas fa-key mr-2",4,"ngIf"],["roomInfoTooltip",""],[1,"fas","fa-users","mr-2"],[1,"fas","fa-lock","mr-2"],[1,"fas","fa-key","mr-2"],[1,"container"],[1,"d-block"],[1,"d-block","small","text-muted"],["class","d-block",4,"ngIf"]],template:function(t,e){if(1&t&&(n.dc(0,"button",0),n.nc("click",function(){return e.visit()}),n.dc(1,"div",1),n.dc(2,"div",2),n.Zb(3,"i",3),n.Wc(4),n.cc(),n.dc(5,"div",4),n.dc(6,"span",5),n.Wc(7),n.cc(),n.cc(),n.cc(),n.dc(8,"div",6),n.Zb(9,"i",7),n.Uc(10,ZC,1,0,"i",8),n.Uc(11,QC,1,0,"i",9),n.Uc(12,JC,1,0,"i",10),n.cc(),n.Uc(13,tA,6,3,"ng-template",null,11,n.Vc),n.cc()),2&t){const t=n.Ic(14);n.Kb(2),n.yc("ngClass",e.entryBg),n.Kb(2),n.Xc(e.room.userCount),n.Kb(3),n.Xc(e.room.roomName),n.Kb(2),n.yc("ngbTooltip",t),n.Kb(1),n.yc("ngIf",e.isGroup),n.Kb(1),n.yc("ngIf",e.isDoorbell),n.Kb(1),n.yc("ngIf",e.isPassword)}},directives:[m.l,t_.k,m.n],encapsulation:2}),t})();const sA=["nitro-navigator-search-result-component",""],nA=function(t,e){return{"fa-bars":t,"fa-th":e}};function iA(t,e){if(1&t){const t=n.ec();n.dc(0,"h6",1),n.nc("click",function(){return n.Lc(t),n.qc().toggleListMode()}),n.Zb(1,"i",2),n.cc()}if(2&t){const t=n.qc();n.Kb(1),n.yc("ngClass",n.Dc(1,nA,1===t.displayMode,0===t.displayMode))}}const rA=function(t){return{"tall-detail":t}};function aA(t,e){if(1&t&&n.Zb(0,"div",8),2&t){const t=e.$implicit,s=n.qc(2);n.yc("room",t)("displayMode",s.displayMode)("ngClass",n.Cc(3,rA,s.displayMode>=1))}}const oA=function(t,e){return{"grid-2":t,"grid-1":e}};function cA(t,e){if(1&t&&(n.dc(0,"div",5),n.dc(1,"div",6),n.Uc(2,aA,1,5,"div",7),n.cc(),n.cc()),2&t){const t=n.qc();n.Kb(1),n.yc("ngClass",n.Dc(2,oA,t.displayMode>=1,0===t.displayMode)),n.Kb(1),n.yc("ngForOf",t.result.rooms)}}const lA=function(t,e){return{"fa-minus":t,"fa-plus":e}};let hA=(()=>{class t{ngOnInit(){this._displayMode=this.result.mode,this._isCollapsed=this.result.closed}toggleListMode(){this._displayMode!==qC.FORCED_THUMBNAILS&&(this._displayMode=this._displayMode!==qC.LIST?qC.LIST:qC.THUMBNAILS)}toggleCollapsed(){this._isCollapsed=!this._isCollapsed}get resultCode(){let t=this.result.code;return(!t||0==t.length)&&this.result.data&&this.result.data.length>0?this.result.data:(t=this.result.code.startsWith("${")?t.substr(2,t.length-3):"navigator.searchcode.title."+t,t)}get displayMode(){return this._displayMode}get isCollapsed(){return!this._isCollapsed}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-navigator-search-result-component",""]],inputs:{result:"result"},attrs:sA,decls:7,vars:9,consts:[[1,"d-flex","justify-content-between","align-items-center","pt-2"],[1,"m-0",3,"click"],[1,"fas",3,"ngClass"],["class","m-0",3,"click",4,"ngIf"],["class","d-flex flex-column pt-2 grid-container",4,"ngIf"],[1,"d-flex","flex-column","pt-2","grid-container"],[1,"grid-items",3,"ngClass"],["nitro-navigator-search-result-item-component","","class","d-flex flex-column item-detail justify-content-center align-items-center",3,"room","displayMode","ngClass",4,"ngFor","ngForOf"],["nitro-navigator-search-result-item-component","",1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"room","displayMode","ngClass"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"h6",1),n.nc("click",function(){return e.toggleCollapsed()}),n.Zb(2,"i",2),n.Wc(3),n.rc(4,"translate"),n.cc(),n.Uc(5,iA,2,4,"h6",3),n.cc(),n.Uc(6,cA,3,5,"div",4)),2&t&&(n.Kb(2),n.yc("ngClass",n.Dc(6,lA,e.isCollapsed,!e.isCollapsed)),n.Kb(1),n.Yc(" ",n.sc(4,4,e.resultCode)," "),n.Kb(2),n.yc("ngIf",2!==e.displayMode),n.Kb(1),n.yc("ngIf",e.isCollapsed&&e.result.rooms.length>0))},directives:[m.l,m.n,m.m,eA],pipes:[ui],encapsulation:2}),t})();const uA=["nitro-navigator-slider-component",""];function _A(t,e){if(1&t){const t=n.ec();n.dc(0,"mdb-carousel-item"),n.dc(1,"div",3),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().visit(s.roomId)}),n.dc(2,"div",4),n.Wc(3),n.cc(),n.cc(),n.dc(4,"img",5),n.nc("click",function(){return e.$implicit.roomId}),n.cc(),n.cc()}if(2&t){const t=e.$implicit;n.Kb(1),n.Qc("background:url("+t.image+")"),n.Kb(2),n.Xc(t.title),n.Kb(1),n.yc("src",t.image,n.Nc)}}let dA=(()=>{class t{constructor(t,e){this._navigatorService=t,this._ngZone=e}ngOnInit(){this._sliderContent=u.a.instance.core.configuration.getValue("navigator.slider.content")}visit(t){this._navigatorService.goToPrivateRoom(t)}get sliderContent(){return this._sliderContent}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(Kh),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["","nitro-navigator-slider-component",""]],attrs:uA,decls:3,vars:4,consts:[[1,"w-100","card","nitro-navigator-slider-component","mt-2","d-flex","flex-column"],[3,"isControls","animation"],[4,"ngFor","ngForOf"],[1,"nitro-navigator-slider-image-component","py-2","px-0","h-100",3,"click"],[1,"johnsshitblackbar","p-1","small"],["image-placeholder","",1,"d-block","w-100",3,"src","click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"mdb-carousel",1),n.Uc(2,_A,5,4,"mdb-carousel-item",2),n.cc(),n.cc()),2&t&&(n.Kb(1),n.yc("isControls",!1)("animation","slide")("isControls",!0),n.Kb(1),n.yc("ngForOf",e.sliderContent))},directives:[iR.a,m.m,iR.c,fa],encapsulation:2}),t})(),gA=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},providers:[Kh],imports:[[cR]]}),t})();n.Oc(Gp,[m.n,Dr,Kr,m.m,m.l,YC,Hr.b,hA,dA,lC,HC],[ui]);let mA=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},providers:[es],imports:[[cR]]}),t})(),pA=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},providers:[Su],imports:[[cR]]}),t})();const fA=function(t,e){return{fontSize:t,letterSpacing:e}};let EA=(()=>{class t{constructor(t,e){this._floorPlanService=t,this._ngZone=e,this._map=null,this._backupMap=null,this.fontSize="12",this.letterSpacing="3",this.mapChanged=!1,this._ngZone.run(()=>{this.map=this._floorPlanService.floorMapSettings.heightMapString})}revert(){this._ngZone.run(()=>{this._map=this._backupMap})}save(){this._floorPlanService.floorMapSettings.heightMapString=this._map.split("\n").join("\r"),this._floorPlanService.save(this._floorPlanService.floorMapSettings)}close(){this._floorPlanService.showImportExport=!1}set map(t){this._map=t,this._backupMap||(this._backupMap=t.replace(/\r\n|\r|\n/g,"\r").toLowerCase()),this.mapChanged=this._map!==this._backupMap}get map(){return this._map}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(kn),n.Yb(n.H))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-floorplan-import-export-component"]],decls:15,vars:16,consts:[["dragHandle",".card-header",1,"card","nitro-floorplan-editor-component",3,"bringToTop","draggable"],[1,"card-header"],[1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],["spellcheck","false",1,"form-control","mb-3",2,"font-family","'Roboto Mono', monospace","height","350px",3,"ngStyle","ngModel","ngModelChange"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary",3,"disabled","click"],["type","button",1,"btn","btn-success",3,"disabled","click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.Wc(2),n.rc(3,"translate"),n.dc(4,"div",2),n.nc("click",function(){return e.close()}),n.Zb(5,"i",3),n.cc(),n.cc(),n.dc(6,"div",4),n.dc(7,"textarea",5),n.nc("ngModelChange",function(t){return e.map=t}),n.cc(),n.dc(8,"div",6),n.dc(9,"button",7),n.nc("click",function(){return e.revert()}),n.Wc(10),n.rc(11,"translate"),n.cc(),n.dc(12,"button",8),n.nc("click",function(){return e.save()}),n.Wc(13),n.rc(14,"translate"),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(2),n.Yc(" ",n.sc(3,7,"floor.plan.editor.import.export")," "),n.Kb(5),n.yc("ngStyle",n.Dc(13,fA,e.fontSize+"px",e.letterSpacing+"px"))("ngModel",e.map),n.Kb(2),n.yc("disabled",!e.mapChanged),n.Kb(1),n.Xc(n.sc(11,9,"floor.plan.editor.revert.to.last.received.map")),n.Kb(2),n.yc("disabled",!e.mapChanged),n.Kb(1),n.Xc(n.sc(14,11,"floor.plan.editor.save")))},directives:[Dr,Kr,ur.b,m.o,ur.l,ur.n],pipes:[ui],encapsulation:2}),t})(),SA=(()=>{class t{ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac}),t})(),bA=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},providers:[kn,SA],imports:[[cR]]}),t})();n.Oc(Qn,[m.n,Dr,Kr,m.l,m.m,m.o,ol,ur.t,ur.l,ur.n,ur.o,ur.v,DT,EA],[ui,m.h]);let vA=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},imports:[[cR,bA]]}),t})(),IA=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},providers:[],imports:[[cR]]}),t})(),RA=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},providers:[ME],imports:[[cR]]}),t})(),TA=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},providers:[bS],imports:[[cR]]}),t})();const yA=function(){return["count","limit"]},OA=function(t,e){return[t,e]};function CA(t,e){if(1&t&&(n.dc(0,"div",16),n.dc(1,"div",17),n.Wc(2),n.rc(3,"translate"),n.cc(),n.dc(4,"div",18),n.Wc(5),n.rc(6,"translate"),n.cc(),n.cc()),2&t){const t=n.qc();n.Kb(2),n.Xc(n.uc(3,2,"wiredfurni.pickfurnis.caption",n.Bc(8,yA),n.Dc(9,OA,t.furniSelectionCount,t.maximumFurniSelectionCount))),n.Kb(3),n.Xc(n.sc(6,6,"wiredfurni.pickfurnis.desc"))}}const AA=["*"];let MA=(()=>{class t{constructor(t){this._wiredService=t}save(){this._wiredService.component.save()}hide(){this._wiredService.component.close()}get furniName(){return this._wiredService.component.getFurniName()}get furniDescription(){return this._wiredService.component.getFurniDescription()}get requiresFurni(){return this._wiredService.component._Str_19885()}get furniSelectionCount(){return this._wiredService.component.furniSelectedIds.length}get maximumFurniSelectionCount(){return this._wiredService.component.maximumItemSelectionCount}get wiredType(){const t=this._wiredService.component._Str_19071();return t?t._Str_1196():""}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(hs))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-wired-base-component"]],ngContentSelectors:AA,decls:26,vars:15,consts:[[1,"card","nitro-wired-component",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","px-3","pt-3"],[1,"mr-2"],[1,"d-flex","justify-content-center","align-items-center","badge","badge-secondary","badge-sm"],[1,"d-flex","flex-grow-1","flex-column"],[1,"badge","badge-secondary","badge-sm","text-wrap","mb-2"],[1,"badge","badge-secondary","badge-sm","text-wrap"],[1,"d-flex","flex-column","p-3"],["class","mt-2",4,"ngIf"],[1,"btn-group","w-100","mt-2"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"mt-2"],[1,"badge","badge-secondary","badge-sm","text-wrap","text-center","w-100","mb-2"],[1,"badge","badge-secondary","badge-sm","text-wrap","text-center","w-100"]],template:function(t,e){1&t&&(n.xc(),n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"h6",2),n.Wc(3),n.rc(4,"translate"),n.cc(),n.dc(5,"button",3),n.nc("click",function(){return e.hide()}),n.Zb(6,"i",4),n.cc(),n.cc(),n.dc(7,"div",5),n.dc(8,"div",6),n.dc(9,"div",7),n.Zb(10,"i"),n.cc(),n.cc(),n.dc(11,"div",8),n.dc(12,"div",9),n.Wc(13),n.cc(),n.dc(14,"div",10),n.Wc(15),n.cc(),n.cc(),n.cc(),n.dc(16,"div",11),n.wc(17),n.Uc(18,CA,7,12,"div",12),n.dc(19,"div",13),n.dc(20,"button",14),n.nc("click",function(){return e.save()}),n.Wc(21),n.rc(22,"translate"),n.cc(),n.dc(23,"button",15),n.nc("click",function(){return e.hide()}),n.Wc(24),n.rc(25,"translate"),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(3),n.Xc(n.sc(4,9,"wiredfurni.title")),n.Kb(7),n.Nb("icon icon-wired-",e.wiredType,""),n.Kb(3),n.Xc(e.furniName),n.Kb(2),n.Xc(e.furniDescription),n.Kb(3),n.yc("ngIf",e.requiresFurni),n.Kb(3),n.Xc(n.sc(22,11,"wiredfurni.ready")),n.Kb(3),n.Xc(n.sc(25,13,"cancel")))},directives:[Dr,Kr,m.n],pipes:[ui],encapsulation:2}),t})();const wA=["*"];let UA=(()=>{class t{constructor(){this.delay=0,this.delayChange=new n.r,this.delayLocale=""}ngOnChanges(t){t.delay.currentValue!==t.delay.previousValue&&this.updateLocaleParameter()}onSliderChange(){this.delayChange.emit(this.delay)}decreaseDelay(){this.delay-=1,this.delay<t.DELAY_MINIMUM_VALUE&&(this.delay=t.DELAY_MINIMUM_VALUE),this.delayChange.emit(this.delay)}increaseDelay(){this.delay+=1,this.delay>t.DELAY_MAXIMUM_VALUE&&(this.delay=t.DELAY_MAXIMUM_VALUE),this.delayChange.emit(this.delay)}updateLocaleParameter(){this.delayLocale=u.a.instance.getLocalizationWithParameter("wiredfurni.params.delay","seconds",LS.getLocaleName(this.delay))}get delaySliderOptions(){return{floor:t.DELAY_MINIMUM_VALUE,ceil:t.DELAY_MAXIMUM_VALUE,step:t.DELAY_STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.DELAY_MINIMUM_VALUE=0,t.DELAY_MAXIMUM_VALUE=20,t.DELAY_STEPPER_VALUE=1,t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-wired-action-base-component"]],inputs:{delay:"delay"},outputs:{delayChange:"delayChange"},features:[n.Ib],ngContentSelectors:wA,decls:10,vars:3,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","delay",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(t,e){1&t&&(n.xc(),n.dc(0,"nitro-wired-base-component"),n.wc(1),n.dc(2,"p",0),n.Wc(3),n.cc(),n.dc(4,"div",1),n.dc(5,"button",2),n.nc("click",function(){return e.decreaseDelay()}),n.Zb(6,"i",3),n.cc(),n.dc(7,"ngx-slider",4),n.nc("valueChange",function(t){return e.delay=t})("valueChange",function(){return e.onSliderChange()}),n.cc(),n.dc(8,"button",2),n.nc("click",function(){return e.increaseDelay()}),n.Zb(9,"i",5),n.cc(),n.cc(),n.cc()),2&t&&(n.Kb(3),n.Xc(e.delayLocale),n.Kb(4),n.yc("options",e.delaySliderOptions)("value",e.delay))},directives:[MA,Pa.b],encapsulation:2}),t})(),DA=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},providers:[hs],imports:[[cR,m.b]]}),t})();n.Oc(kS,[MA,ur.t,ur.l,ur.n,ur.o,ur.v],[ui]),n.Oc(BS,[MA],[]),n.Oc(GS,[MA,ur.q,ur.b,ur.l,ur.n],[ui]),n.Oc(HS,[MA,ur.b,ur.l,ur.n],[ui]),n.Oc(zS,[MA],[]),n.Oc(qS,[MA,ur.b,ur.l,ur.n],[ui]),n.Oc(ZS,[MA,ur.b,ur.l,ur.n],[ui]),n.Oc(JS,[MA,ur.q,ur.b,ur.l,ur.n],[ui]),n.Oc(tb,[MA],[]),n.Oc(sb,[MA],[]),n.Oc(ib,[MA,ur.q,ur.b,ur.l,ur.n],[ui]),n.Oc(ab,[MA,ur.a,ur.l,ur.n],[ui]),n.Oc(cb,[MA],[]),n.Oc(hb,[MA,Pa.b],[]),n.Oc(_b,[MA,Pa.b],[]),n.Oc(gb,[MA,Pa.b],[ui]),n.Oc(bb,[MA,ur.q,ur.b,ur.l,ur.n,m.n],[ui]),n.Oc(Ib,[MA,ur.b,ur.l,ur.n,ur.q],[ui]),n.Oc(Tb,[MA],[]),n.Oc(Ob,[MA],[]),n.Oc(Ab,[MA,ur.b,ur.l,ur.n],[ui]),n.Oc(wb,[MA,ur.b,ur.l,ur.n],[ui]),n.Oc(Db,[MA],[]),n.Oc(Lb,[MA],[]),n.Oc(xb,[MA],[]),n.Oc(kb,[MA,Pa.b],[ui]),n.Oc(Bb,[MA],[]),n.Oc(Gb,[MA,Pa.b],[]),n.Oc(Hb,[MA,Pa.b],[]),n.Oc(zb,[MA,Pa.b],[]),n.Oc(Xv,[UA],[]),n.Oc(Yv,[UA],[]),n.Oc(_v,[UA],[]),n.Oc(pv,[UA],[]),n.Oc(hv,[UA],[]),n.Oc(gv,[UA,ur.b,ur.l,ur.n],[ui]),n.Oc(tv,[UA,ur.b,ur.i,ur.l,ur.n,ur.t,ur.o,ur.v],[ui]),n.Oc(Jb,[UA,ur.b,ur.i,ur.l,ur.n,ur.q],[ui]),n.Oc(Nv,[UA],[]),n.Oc(Kv,[UA],[]),n.Oc(Uv,[UA,ur.b,ur.l,ur.n],[ui]),n.Oc(cv,[UA,ur.b,ur.i,ur.l,ur.n],[ui]),n.Oc(jv,[UA,ur.a,ur.l,ur.n],[ui]),n.Oc(sv,[UA,ur.b,ur.i,ur.l,ur.n],[ui]),n.Oc(Vv,[UA,Pa.b,ur.b,ur.l,ur.n],[ui]),n.Oc(Zb,[UA,ur.b,ur.i,ur.l,ur.n,ba],[ui]),n.Oc(iv,[UA,ur.b,ur.i,ur.l,ur.n,ur.q],[ui]),n.Oc(av,[UA,ur.b,ur.i,ur.l,ur.n,ur.q],[ui]),n.Oc(Fv,[UA,ur.q,ur.b,ur.l,ur.n],[ui]),n.Oc(Wv,[UA,ur.q,ur.b,ur.l,ur.n],[ui]),n.Oc(Mv,[UA,ur.t,ur.l,ur.n,ur.o,ur.v],[ui]),n.Oc(Cv,[UA,Pa.b,ur.t,ur.l,ur.n,ur.o,ur.v],[ui]),n.Oc(yv,[UA,Pa.b],[ui]),n.Oc(Pv,[UA,Pa.b,ur.q,ur.b,ur.l,ur.n],[ui]),n.Oc(Rv,[UA,ur.a,ur.l,ur.n,m.n,Pa.b,ur.t,ur.o,ur.v,ur.b,Hr.b,m.m],[ui]);let NA=(()=>{class t{constructor(){this.visible=!1,this.visibleChange=new n.r,this._logger=new Qh.a(this.constructor.name)}ngOnInit(){}ngOnDestroy(){}hideTool(){this.visible=!1}getTranslatedForKey(t,e){const s="modtools.nitro."+t,n=u.a.instance.localization.getValue(s);return n!==s?n:e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],inputs:{visible:"visible"},outputs:{visibleChange:"visibleChange"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();var LA=s("SylX"),PA=s("AYkW");function xA(t,e){if(1&t&&(n.dc(0,"option",26),n.Wc(1),n.cc()),2&t){const t=e.$implicit;n.yc("value",e.index),n.Kb(1),n.Xc(t)}}function FA(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"span"),n.Zb(3,"i",3),n.Wc(4," Room Tool "),n.cc(),n.dc(5,"button",4),n.nc("click",function(){return n.Lc(t),n.qc().close()}),n.Zb(6,"i",5),n.cc(),n.cc(),n.dc(7,"div",6),n.dc(8,"div",7),n.dc(9,"div",8),n.dc(10,"div",7),n.dc(11,"div",9),n.dc(12,"div",10),n.dc(13,"div",11),n.dc(14,"span",12),n.Wc(15,"Name:"),n.cc(),n.dc(16,"div"),n.Wc(17),n.cc(),n.cc(),n.dc(18,"div",11),n.dc(19,"span",12),n.Wc(20,"Description:"),n.cc(),n.dc(21,"div"),n.Wc(22),n.cc(),n.cc(),n.cc(),n.cc(),n.cc(),n.dc(23,"div",7),n.dc(24,"div",9),n.dc(25,"div",10),n.dc(26,"div",11),n.dc(27,"span",12),n.Wc(28,"Owner:"),n.cc(),n.dc(29,"div"),n.Wc(30),n.cc(),n.cc(),n.dc(31,"div",11),n.dc(32,"span",12),n.Wc(33,"Players in room:"),n.cc(),n.dc(34,"div"),n.Wc(35),n.cc(),n.cc(),n.dc(36,"div",11),n.dc(37,"span",12),n.Wc(38,"Owner in room:"),n.cc(),n.dc(39,"div"),n.Wc(40),n.cc(),n.cc(),n.cc(),n.cc(),n.dc(41,"div",9),n.dc(42,"div",13),n.dc(43,"div",11),n.dc(44,"button",14),n.nc("click",function(){return n.Lc(t),n.qc().enterRoom()}),n.Wc(45,"Enter "),n.cc(),n.cc(),n.dc(46,"div",11),n.dc(47,"button",14),n.nc("click",function(){return n.Lc(t),n.qc().openChatlog()}),n.Wc(48,"Chatlogs "),n.cc(),n.cc(),n.cc(),n.cc(),n.cc(),n.dc(49,"div",7),n.dc(50,"div",9),n.dc(51,"div",15),n.dc(52,"div",16),n.dc(53,"div",17),n.dc(54,"input",18),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().changeTitle=e}),n.cc(),n.dc(55,"label",19),n.Wc(56,"Change title to inappropriate"),n.cc(),n.cc(),n.dc(57,"div",17),n.dc(58,"input",20),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().kickUsers=e}),n.cc(),n.dc(59,"label",21),n.Wc(60,"Kick users(stops event)"),n.cc(),n.cc(),n.dc(61,"div",17),n.dc(62,"input",22),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().lockDoor=e}),n.cc(),n.dc(63,"label",23),n.Wc(64,"Lock room"),n.cc(),n.cc(),n.dc(65,"div",17),n.dc(66,"div",24),n.dc(67,"select",25),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().optionId=e})("change",function(){n.Lc(t);const e=n.qc();return e.selectMessage(e.optionId)}),n.dc(68,"option",26),n.Wc(69,"Select from messsage templates"),n.cc(),n.Uc(70,xA,2,2,"option",27),n.cc(),n.cc(),n.dc(71,"div",24),n.dc(72,"textarea",28),n.nc("ngModelChange",function(e){return n.Lc(t),n.qc().message=e}),n.cc(),n.cc(),n.cc(),n.dc(73,"div",29),n.dc(74,"button",30),n.nc("click",function(){return n.Lc(t),n.qc().send()}),n.Wc(75," Send caution "),n.cc(),n.cc(),n.cc(),n.cc(),n.cc(),n.cc(),n.cc(),n.cc(),n.cc(),n.cc()}if(2&t){const t=n.qc();n.yc("center",!1),n.Kb(17),n.Xc(t.room.name),n.Kb(5),n.Xc(t.room.description),n.Kb(8),n.Xc(t.room.ownerName),n.Kb(5),n.Xc(t.room.playerAmount),n.Kb(5),n.Xc(t.room.owner?"yes":"no"),n.Kb(14),n.yc("ngModel",t.changeTitle),n.Kb(4),n.yc("ngModel",t.kickUsers),n.Kb(4),n.yc("ngModel",t.lockDoor),n.Kb(5),n.yc("ngModel",t.optionId),n.Kb(1),n.yc("value",-1),n.Kb(2),n.yc("ngForOf",t.options),n.Kb(2),n.yc("ngModel",t.message),n.Kb(2),n.yc("disabled",!t.isInCurrentRoom())}}let kA=(()=>{class t extends NA{constructor(t,e,s){super(),this._modToolService=t,this._navigatorService=e,this._notificationService=s,this.lockDoor=!1,this.changeTitle=!1,this.kickUsers=!1,this.optionId="-1",this.message=""}ngOnInit(){}ngOnDestroy(){}close(){this._modToolService.showRoomTools=!1}send(){0!=this.message.trim().length?(u.a.instance.communication.connection.send(new PA.a(1,this.message,"")),(this.kickUsers||this.changeTitle||this.lockDoor)&&u.a.instance.communication.connection.send(new LA.a(this.room.id,this.lockDoor?1:0,this.changeTitle?1:0,this.kickUsers?1:0)),this._modToolService.showRoomTools=!1):this._notificationService.alert("You must input a message to the user")}isInCurrentRoom(){return this._modToolService.currentRoom.roomId==this._modToolService.currentRoomModData.id}enterRoom(){this._navigatorService.goToPrivateRoom(this.room.id)}openChatlog(){u.a.instance.communication.connection.send(new sn.a(this.room.id)),this._modToolService.showRoomChatLogs=!0}get room(){return this._modToolService.currentRoomModData}get options(){return this._modToolService._Str_3325?this._modToolService._Str_3325._Str_18336:[]}selectMessage(t){if("-1"==t)return void(this.message="");const e=parseInt(t);this.message=this.options[e]}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(nn),n.Yb(Kh),n.Yb(es))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-mod-tool-room-component"]],features:[n.Hb],decls:1,vars:1,consts:[["dragHandle",".card-header","class","card room-tool-card",3,"draggable","center",4,"ngIf"],["dragHandle",".card-header",1,"card","room-tool-card",3,"draggable","center"],[1,"card-header"],[1,"icon","modtool-room-icon",2,"margin-right","5px"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body","pl-3","pr-3"],[1,"row"],[1,"col","pr-2"],[1,"col"],[1,"badge","badge-secondary","mb-1","d-flex","flex-column","justify-content-between","w-100"],[1,"d-flex","flex-row","justify-content-between"],[1,"font-weight-bold","mr-2"],[1,"mb-1","d-flex","flex-column","justify-content-between","w-100"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"badge","badge-secondary","mb-1"],[1,"btn-group","btn-group-vertical"],[1,"mb-1"],["id","change-title","type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],["for","change-title",1,"form-check-label"],["id","kick-users","type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],["for","kick-users",1,"form-check-label"],["id","lock-room","type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],["for","lock-room",1,"form-check-label"],[1,"form-group","mb-2"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"form-control",3,"ngModel","ngModelChange"],[1,"btn-group","w-100"],[1,"btn","btn-sm","btn-primary",3,"disabled","click"]],template:function(t,e){1&t&&n.Uc(0,FA,76,14,"div",0),2&t&&n.yc("ngIf",e.room)},directives:[m.n,Kr,ur.a,ur.l,ur.n,ur.t,ur.o,ur.v,m.m,ur.b],encapsulation:2}),t})();var WA=s("q5XJ"),BA=s("LRPw");function VA(t,e){if(1&t&&(n.dc(0,"tr"),n.dc(1,"th",12),n.Wc(2),n.cc(),n.dc(3,"td"),n.Wc(4),n.cc(),n.cc()),2&t){const t=e.$implicit,s=n.qc();n.Kb(2),n.Xc(s.getTranslatedForKey(t.nameKey,t.nameKeyFallback)),n.Kb(2),n.Xc(t.value)}}let GA=(()=>{class t extends NA{constructor(t,e){super(),this._modToolService=t,this._modToolUserInfoService=e,this.user=null}ngOnInit(){}ngOnDestroy(){}close(){this._modToolService.closeUserTool()}userData(){return this._modToolUserInfoService.currentUserInfo}get userProperties(){const e=this._modToolUserInfoService.currentUserInfo;return e?[{nameKey:"name",nameKeyFallback:"Name",value:e.userName},{nameKey:"cfhs",nameKeyFallback:"CFHs",value:e._Str_24656.toString()},{nameKey:"abusive_cfhs",nameKeyFallback:"Abusive CFHs",value:e._Str_22987.toString()},{nameKey:"cautions",nameKeyFallback:"Cautions",value:e._Str_16987.toString()},{nameKey:"bans",nameKeyFallback:"Bans",value:e._Str_20373.toString()},{nameKey:"last_sanction",nameKeyFallback:"Last sanction",value:e._Str_24447},{nameKey:"trade_locks",nameKeyFallback:"Trade locks",value:e._Str_24526.toString()},{nameKey:"lock_expires",nameKeyFallback:"Lock expires",value:e._Str_23969},{nameKey:"last_login",nameKeyFallback:"Last login",value:t._Str_12797(60*e._Str_23276)},{nameKey:"purchase",nameKeyFallback:"Purchases",value:e._Str_22786},{nameKey:"email",nameKeyFallback:"Email",value:e._Str_20219},{nameKey:"acc_bans",nameKeyFallback:"Banned Accs.",value:e._Str_22700.toString()},{nameKey:"registered",nameKeyFallback:"Registered",value:t._Str_12797(60*e._Str_24334)},{nameKey:"rank",nameKeyFallback:"Rank",value:e._Str_22262}]:[]}handleClick(t){switch(t){case"roomchat":this._modToolService.showSendUserChatlogs=!0,u.a.instance.communication.connection.send(new BA.a(this.user.id));break;case"send_message":this._modToolService.showSendUserMessage=!0;break;case"room_visits":this._modToolService.showVisitedRoomsForUser=!0,u.a.instance.communication.connection.send(new WA.a(this.user.id));break;case"mod_action":this._modToolService.showModActionOnUser=!0}}static _Str_12797(t){return t<120?t+" secs ago":t<7200?Math.round(t/60)+" mins ago":t<172800?Math.round(t/3600)+" hours ago":t<63072e3?Math.round(t/86400)+" days ago":Math.round(t/31536e3)+" years ago"}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(nn),n.Yb(FI))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-mod-tool-user-component"]],inputs:{user:"user"},features:[n.Hb],decls:22,vars:7,consts:[["dragHandle",".card-header",1,"card","user-tool-card",3,"draggable","center"],[1,"card-header"],[1,"icon","modtool-user-icon",2,"margin-right","5px"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"row"],[1,"col-6"],[1,"d-flex","flex-column","table","table-striped","table-sm","table-text-small"],[4,"ngFor","ngForOf"],[1,"col-5","p-3"],["type","button",1,"btn","btn-sm","btn-primary","w-100",3,"click"],["scope","row"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"span"),n.Zb(3,"i",2),n.Wc(4),n.cc(),n.dc(5,"button",3),n.nc("click",function(){return e.close()}),n.Zb(6,"i",4),n.cc(),n.cc(),n.dc(7,"div",5),n.dc(8,"div",6),n.dc(9,"div",7),n.dc(10,"table",8),n.dc(11,"tbody"),n.Uc(12,VA,5,2,"tr",9),n.cc(),n.cc(),n.cc(),n.dc(13,"div",10),n.dc(14,"button",11),n.nc("click",function(){return e.handleClick("roomchat")}),n.Wc(15),n.cc(),n.dc(16,"button",11),n.nc("click",function(){return e.handleClick("send_message")}),n.Wc(17),n.cc(),n.dc(18,"button",11),n.nc("click",function(){return e.handleClick("room_visits")}),n.Wc(19),n.cc(),n.dc(20,"button",11),n.nc("click",function(){return e.handleClick("mod_action")}),n.Wc(21),n.cc(),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("center",!1),n.Kb(4),n.Yc(" ",e.user.username," "),n.Kb(8),n.yc("ngForOf",e.userProperties),n.Kb(3),n.Xc(e.getTranslatedForKey("roomchat","Room Chat")),n.Kb(2),n.Xc(e.getTranslatedForKey("send_message","Send Message")),n.Kb(2),n.Xc(e.getTranslatedForKey("room_visits","Room Visits")),n.Kb(2),n.Xc(e.getTranslatedForKey("mod_action","Mod Action")))},directives:[Kr,m.m],encapsulation:2}),t})();function KA(t,e){1&t&&(n.dc(0,"table",10),n.dc(1,"thead"),n.dc(2,"tr"),n.dc(3,"th"),n.Wc(4,"Category"),n.cc(),n.dc(5,"th"),n.Wc(6,"Type"),n.cc(),n.dc(7,"th"),n.Wc(8,"Player"),n.cc(),n.dc(9,"th"),n.Wc(10,"Open"),n.cc(),n.cc(),n.cc(),n.Zb(11,"tbody"),n.cc())}function HA(t,e){if(1&t){const t=n.ec();n.dc(0,"div",1),n.dc(1,"div",2),n.dc(2,"span"),n.Zb(3,"i",3),n.Wc(4," Reports "),n.cc(),n.dc(5,"button",4),n.nc("click",function(){return n.Lc(t),n.qc().hideTool()}),n.Zb(6,"i",5),n.cc(),n.cc(),n.dc(7,"div",6),n.dc(8,"div",7),n.dc(9,"button",8),n.nc("click",function(){return n.Lc(t),n.qc().setTab(0)}),n.Wc(10,"Open Issues"),n.cc(),n.dc(11,"button",8),n.nc("click",function(){return n.Lc(t),n.qc().setTab(1)}),n.Wc(12,"My Issues"),n.cc(),n.dc(13,"button",8),n.nc("click",function(){return n.Lc(t),n.qc().setTab(2)}),n.Wc(14,"Picked Issues"),n.cc(),n.cc(),n.Uc(15,KA,12,0,"table",9),n.cc(),n.cc()}if(2&t){const t=n.qc();n.yc("center",!1),n.Kb(15),n.yc("ngIf",0===t.tab)}}let jA=(()=>{class t extends NA{constructor(){super(),this._tab=0}ngOnInit(){}ngOnDestroy(){}get tab(){return this._tab}set tab(t){this._tab=t}setTab(t){this.tab=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-mod-tool-reports-component"]],features:[n.Hb],decls:1,vars:1,consts:[["dragHandle",".card-header","class","card reports-tool-card",3,"draggable","center",4,"ngIf"],["dragHandle",".card-header",1,"card","reports-tool-card",3,"draggable","center"],[1,"card-header"],[1,"icon","modtool-reports-icon",2,"margin-right","5px"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"btn-group","w-100"],[1,"btn","btn-sm","btn-secondary",3,"click"],["class","table table-striped",4,"ngIf"],[1,"table","table-striped"]],template:function(t,e){1&t&&n.Uc(0,HA,16,2,"div",0),2&t&&n.yc("ngIf",e.visible)},directives:[m.n,Kr],encapsulation:2}),t})(),zA=(()=>{class t{constructor(t,e,s,n,i){this._actionId=t,this._name=e,this._actionType=s,this._sanctionTypeId=n,this._actionLengthHours=i}get actionId(){return this._actionId}get name(){return this._name}get actionType(){return this._actionType}get _Str_22995(){return this._sanctionTypeId}get _Str_25670(){return this._actionLengthHours}}return t.ALERT=1,t.MUTE=2,t.BAN=3,t.KICK=4,t.TRADE_LOCK=5,t.MESSAGE=6,t})();var YA=s("SbyL"),qA=s("DicI"),XA=s("KAV2"),ZA=s("aBXB"),QA=s("vd+k"),JA=s("EEQp");function $A(t,e){if(1&t&&(n.dc(0,"option",8),n.Wc(1),n.cc()),2&t){const t=e.$implicit;n.yc("value",e.index),n.Kb(1),n.Xc(t)}}function tM(t,e){if(1&t&&(n.dc(0,"option",8),n.Wc(1),n.cc()),2&t){const t=e.$implicit;n.yc("value",e.index),n.Kb(1),n.Xc(t.name)}}let eM=(()=>{class t extends NA{constructor(t,e){super(),this._modToolService=t,this._notifications=e,this.user=null,this.cfhType="-1",this.sanction="-1",this.message="",this._actions=[],this._actions=[new zA(1,"Alert",zA.ALERT,1,0),new zA(2,"Mute 1h",zA.MUTE,2,0),new zA(4,"Ban 7 days",zA.BAN,4,0),new zA(3,"Ban 18h",zA.BAN,3,0),new zA(5,"Ban 30 days (step 1)",zA.BAN,5,0),new zA(7,"Ban 30 days (step 2)",zA.BAN,7,0),new zA(6,"Ban 100 years",zA.BAN,6,0),new zA(106,"Ban avatar-only 100 years",zA.BAN,6,0),new zA(101,"Kick",zA.KICK,0,0),new zA(102,"Lock trade 1 week",zA.TRADE_LOCK,0,168),new zA(104,"Lock trade permanent",zA.TRADE_LOCK,0,876e3),new zA(105,"Message",zA.MESSAGE,0,0)]}ngOnInit(){}ngOnDestroy(){}sendSanction(){if("-1"==this.sanction)return void this._notifications.alert("Please select a sanction.");if("-1"==this.cfhType)return void this._notifications.alert("Please select a topic.");parseInt(this.cfhType);const t=this._actions[parseInt(this.sanction)];switch(t.actionType){case zA.ALERT:if(!this._modToolService._Str_3325._Str_18465)return void this._notifications.alert("You have insufficient permissions.");u.a.instance.communication.connection.send(new QA.a(this.user.id,this.message,parseInt(this.cfhType)));break;case zA.MUTE:u.a.instance.communication.connection.send(new JA.a(this.user.id,this.message,parseInt(this.cfhType)));break;case zA.BAN:if(!this._modToolService._Str_3325._Str_21242)return void this._notifications.alert("You have insufficient permissions.");u.a.instance.communication.connection.send(new YA.a(this.user.id,this.message,parseInt(this.cfhType),parseInt(this.sanction),106==t.actionId));break;case zA.KICK:if(!this._modToolService._Str_3325._Str_20397)return void this._notifications.alert("You have insufficient permissions.");u.a.instance.communication.connection.send(new qA.a(this.user.id,this.message,parseInt(this.cfhType)));break;case zA.TRADE_LOCK:u.a.instance.communication.connection.send(new XA.a(this.user.id,this.message,60*t._Str_25670,parseInt(this.cfhType)));break;case zA.MESSAGE:if(0==this.message.trim().length)return void this._notifications.alert("Please write a message to user.");u.a.instance.communication.connection.send(new ZA.a(this.user.id,this.message,parseInt(this.cfhType)))}this._modToolService.showModActionOnUser=!1}close(){this._modToolService.showModActionOnUser=!1}get categories(){const t=this._modToolService.callForHelpCategories,e=[];for(const s of t)for(const t of s.topics)e.push(u.a.instance.localization.getValue("help.cfh.topic."+t.id));return e}get actions(){return this._actions}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(nn),n.Yb(es))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-mod-tool-mod-action-user-component"]],inputs:{user:"user"},features:[n.Hb],decls:25,vars:9,consts:[["dragHandle",".card-header",1,"card","room-tool-card",3,"draggable","center"],[1,"card-header"],[1,"icon","modtool-room-icon",2,"margin-right","5px"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"form-group","mb-2"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"span"),n.Zb(3,"i",2),n.Wc(4),n.cc(),n.dc(5,"button",3),n.nc("click",function(){return e.close()}),n.Zb(6,"i",4),n.cc(),n.cc(),n.dc(7,"div",5),n.dc(8,"div",6),n.dc(9,"select",7),n.nc("ngModelChange",function(t){return e.cfhType=t}),n.dc(10,"option",8),n.Wc(11,"CFH Topic:"),n.cc(),n.Uc(12,$A,2,2,"option",9),n.cc(),n.cc(),n.dc(13,"div",6),n.dc(14,"select",7),n.nc("ngModelChange",function(t){return e.sanction=t}),n.dc(15,"option",8),n.Wc(16,"Sanction type:"),n.cc(),n.Uc(17,tM,2,2,"option",9),n.cc(),n.cc(),n.dc(18,"div",6),n.dc(19,"label"),n.Wc(20,"Optional message type, overrides default"),n.cc(),n.dc(21,"textarea",10),n.nc("ngModelChange",function(t){return e.message=t}),n.cc(),n.cc(),n.dc(22,"div",6),n.dc(23,"button",11),n.nc("click",function(){return e.sendSanction()}),n.Wc(24,"Sanction"),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("center",!1),n.Kb(4),n.Yc(" Mod Actions on ",e.user.username," "),n.Kb(5),n.yc("ngModel",e.cfhType),n.Kb(1),n.yc("value",-1),n.Kb(2),n.yc("ngForOf",e.categories),n.Kb(2),n.yc("ngModel",e.sanction),n.Kb(1),n.yc("value",-1),n.Kb(2),n.yc("ngForOf",e.actions),n.Kb(4),n.yc("ngModel",e.message))},directives:[Kr,ur.t,ur.l,ur.n,ur.o,ur.v,m.m,ur.b],encapsulation:2}),t})();function sM(t,e){if(1&t){const t=n.ec();n.dc(0,"div",8),n.dc(1,"div"),n.Wc(2),n.cc(),n.dc(3,"div",9),n.dc(4,"div",10),n.Wc(5),n.cc(),n.dc(6,"button",11),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().goToRoom(s)}),n.Wc(7,"Enter"),n.cc(),n.cc(),n.cc()}if(2&t){const t=e.$implicit,s=n.qc();n.Kb(2),n.Yc(" ",t.roomName," "),n.Kb(3),n.Xc(s.showTime(t))}}let nM=(()=>{class t extends NA{constructor(t,e,s){super(),this._modToolService=t,this._modToolUserInfoService=e,this._navigatorService=s,this.user=null}ngOnInit(){}ngOnDestroy(){}close(){this._modToolService.closeRoomVisitedTool()}get roomVisitedForUser(){return this._modToolService.roomUserVisitedData?this._modToolService.roomUserVisitedData.rooms:[]}showTime(t){const e=t._Str_25550;return this.prependZero(t._Str_22929)+":"+this.prependZero(e)}prependZero(t){return t<10?"0"+t:t.toString()}goToRoom(t){this._navigatorService.goToPrivateRoom(t.roomId)}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(nn),n.Yb(FI),n.Yb(Kh))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-mod-tool-user-visited-rooms-component"]],inputs:{user:"user"},features:[n.Hb],decls:10,vars:3,consts:[["dragHandle",".card-header",1,"card","user-tool-card",3,"draggable","center"],[1,"card-header"],[1,"icon","modtool-user-icon",2,"margin-right","5px"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"position-relative","w-100",2,"min-height","200px","max-height","200px","height","200px"],["class","d-flex flex-row justify-content-between w-100",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","justify-content-between","w-100"],[1,"d-flex","flex-row"],[1,"mr-2"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"span"),n.Zb(3,"i",2),n.Wc(4),n.cc(),n.dc(5,"button",3),n.nc("click",function(){return e.close()}),n.Zb(6,"i",4),n.cc(),n.cc(),n.dc(7,"div",5),n.dc(8,"perfect-scrollbar",6),n.Uc(9,sM,8,2,"div",7),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("center",!1),n.Kb(4),n.Yc(" Room visits: ",e.user.username," "),n.Kb(5),n.yc("ngForOf",e.roomVisitedForUser))},directives:[Kr,Hr.b,m.m],encapsulation:2}),t})();function iM(t,e){if(1&t&&(n.dc(0,"option",8),n.Wc(1),n.cc()),2&t){const t=e.$implicit;n.yc("value",e.index),n.Kb(1),n.Xc(t)}}let rM=(()=>{class t extends NA{constructor(t,e,s){super(),this._modToolService=t,this._modToolUserInfoService=e,this._notificationService=s,this.user=null,this.optionId="-1",this.message=""}ngOnInit(){}ngOnDestroy(){}close(){this._modToolService.showSendUserMessage=!1}get options(){return this._modToolService._Str_3325?this._modToolService._Str_3325._Str_15690:[]}selectMessage(t){if("-1"==t)return void(this.message="");const e=parseInt(t);this.message=this.options[e]}sendMessage(){0!=this.message.trim().length?(u.a.instance.communication.connection.send(new ZA.a(this.user.id,this.message,-999)),this._modToolService.showSendUserMessage=!1):this._notificationService.alert("Please enter a message")}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(nn),n.Yb(FI),n.Yb(es))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-mod-tool-user-send-message-component"]],inputs:{user:"user"},features:[n.Hb],decls:18,vars:6,consts:[["dragHandle",".card-header",1,"card","user-tool-card",3,"draggable","center"],[1,"card-header"],[1,"icon","modtool-user-icon",2,"margin-right","5px"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"form-group","mb-2"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"span"),n.Zb(3,"i",2),n.Wc(4),n.cc(),n.dc(5,"button",3),n.nc("click",function(){return e.close()}),n.Zb(6,"i",4),n.cc(),n.cc(),n.dc(7,"div",5),n.dc(8,"div",6),n.dc(9,"select",7),n.nc("ngModelChange",function(t){return e.optionId=t})("change",function(){return e.selectMessage(e.optionId)}),n.dc(10,"option",8),n.Wc(11,"Message :"),n.cc(),n.Uc(12,iM,2,2,"option",9),n.cc(),n.cc(),n.dc(13,"div",6),n.dc(14,"textarea",10),n.nc("ngModelChange",function(t){return e.message=t}),n.cc(),n.cc(),n.dc(15,"div",6),n.dc(16,"button",11),n.nc("click",function(){return e.sendMessage()}),n.Wc(17,"Send message"),n.cc(),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("center",!1),n.Kb(4),n.Yc(" Message to: ",e.user.username," "),n.Kb(5),n.yc("ngModel",e.optionId),n.Kb(1),n.yc("value",-1),n.Kb(2),n.yc("ngForOf",e.options),n.Kb(2),n.yc("ngModel",e.message))},directives:[Kr,ur.t,ur.l,ur.n,ur.o,ur.v,m.m,ur.b],encapsulation:2}),t})(),aM=(()=>{class t extends NA{constructor(t,e){super(),this._modToolService=t,this._navigatorService=e}goToRoom(t){this._navigatorService.goToPrivateRoom(t)}openRoomTools(t){this._modToolService.openRoomTool(t)}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(nn),n.Yb(Kh))},t.\u0275cmp=n.Sb({type:t,selectors:[["ng-component"]],features:[n.Hb],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();function oM(t,e){if(1&t&&(n.dc(0,"div",13),n.dc(1,"div",14),n.dc(2,"div",15),n.Wc(3),n.cc(),n.dc(4,"div"),n.Wc(5),n.cc(),n.cc(),n.dc(6,"div"),n.Wc(7),n.cc(),n.cc()),2&t){const t=e.$implicit;n.Kb(3),n.Xc(t.timestamp),n.Kb(2),n.Xc(t.userName),n.Kb(2),n.Xc(t.message)}}function cM(t,e){if(1&t){const t=n.ec();n.dc(0,"div",8),n.dc(1,"div",9),n.dc(2,"div"),n.Wc(3),n.cc(),n.dc(4,"div",10),n.dc(5,"button",11),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().goToRoom(s.roomId)}),n.Wc(6,"View Room"),n.cc(),n.dc(7,"button",11),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().openRoomTools(s.roomId)}),n.Wc(8,"Room Tools"),n.cc(),n.cc(),n.cc(),n.Uc(9,oM,8,3,"div",12),n.cc()}if(2&t){const t=e.$implicit;n.Kb(3),n.Yc(" Room: ",t.roomName," "),n.Kb(6),n.yc("ngForOf",t.chatlogs)}}let lM=(()=>{class t extends aM{constructor(t,e,s){super(t,s),this._modToolService=t,this._modToolUserInfoService=e,this._navigatorService=s}get title(){return this.user?"Chatlogs: "+this.user.username:""}getData(){return this._modToolService.roomVisits?this._modToolService.roomVisits:[]}close(){this._modToolService.showSendUserChatlogs=!1}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(nn),n.Yb(FI),n.Yb(Kh))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-mod-tool-user-chatlogs-component"]],inputs:{user:"user"},features:[n.Hb],decls:10,vars:3,consts:[["dragHandle",".card-header",1,"card","user-tool-card-chatlogs",3,"draggable","center"],[1,"card-header"],[1,"icon","modtool-user-icon",2,"margin-right","5px"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"position-relative","w-100",2,"min-height","200px","max-height","200px","height","200px"],["class","d-flex flex-column justify-content-between w-100",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","justify-content-between","w-100"],[1,"d-flex","bg-secondary","flex-row","justify-content-between","w-100"],[1,"d-flex","flex-row"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["class","d-flex flex-row justify-content-between w-100",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","justify-content-between","w-100"],[1,"d-flex","flex-row","mr-2"],[1,"mr-2"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"span"),n.Zb(3,"i",2),n.Wc(4),n.cc(),n.dc(5,"button",3),n.nc("click",function(){return e.close()}),n.Zb(6,"i",4),n.cc(),n.cc(),n.dc(7,"div",5),n.dc(8,"perfect-scrollbar",6),n.Uc(9,cM,10,2,"div",7),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("center",!1),n.Kb(4),n.Yc(" ",e.title," "),n.Kb(5),n.yc("ngForOf",e.getData()))},directives:[Kr,Hr.b,m.m],encapsulation:2}),t})();var hM=s("ZRgm");function uM(t,e){if(1&t&&(n.dc(0,"div",13),n.dc(1,"div",14),n.dc(2,"div",15),n.Wc(3),n.cc(),n.dc(4,"div"),n.Wc(5),n.cc(),n.cc(),n.dc(6,"div"),n.Wc(7),n.cc(),n.cc()),2&t){const t=e.$implicit;n.Kb(3),n.Xc(t.timestamp),n.Kb(2),n.Xc(t.userName),n.Kb(2),n.Xc(t.message)}}function _M(t,e){if(1&t){const t=n.ec();n.dc(0,"div",8),n.dc(1,"div",9),n.dc(2,"div"),n.Wc(3),n.cc(),n.dc(4,"div",10),n.dc(5,"button",11),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().goToRoom(s.roomId)}),n.Wc(6,"View Room"),n.cc(),n.dc(7,"button",11),n.nc("click",function(){n.Lc(t);const s=e.$implicit;return n.qc().openRoomTools(s.roomId)}),n.Wc(8,"Room Tools"),n.cc(),n.cc(),n.cc(),n.Uc(9,uM,8,3,"div",12),n.cc()}if(2&t){const t=e.$implicit;n.Kb(3),n.Yc(" Room: ",t.roomName," "),n.Kb(6),n.yc("ngForOf",t.chatlogs)}}let dM=(()=>{class t extends aM{constructor(t,e,s){super(t,s),this._modToolService=t,this._modToolUserInfoService=e,this._navigatorService=s}get title(){return this._modToolService.currentRoomModData?"Room Chatlog: "+this._modToolService.currentRoomModData.name:""}getData(){return this._modToolService.userChatlogs&&this._modToolService.currentRoomModData?[new hM.a(this._modToolService.currentRoomModData.name,this._modToolService.currentRoom.roomId,this._modToolService.userChatlogs)]:[]}close(){this._modToolService.showRoomChatLogs=!1}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(nn),n.Yb(FI),n.Yb(Kh))},t.\u0275cmp=n.Sb({type:t,selectors:[["nitro-mod-tool-room-chatlogs-component"]],features:[n.Hb],decls:10,vars:3,consts:[["dragHandle",".card-header",1,"card","user-tool-card-chatlogs",3,"draggable","center"],[1,"card-header"],[1,"icon","modtool-user-icon",2,"margin-right","5px"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"position-relative","w-100",2,"min-height","200px","max-height","200px","height","200px"],["class","d-flex flex-column justify-content-between w-100",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","justify-content-between","w-100"],[1,"d-flex","bg-secondary","flex-row","justify-content-between","w-100"],[1,"d-flex","flex-row"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["class","d-flex flex-row justify-content-between w-100",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","justify-content-between","w-100"],[1,"d-flex","flex-row","mr-2"],[1,"mr-2"]],template:function(t,e){1&t&&(n.dc(0,"div",0),n.dc(1,"div",1),n.dc(2,"span"),n.Zb(3,"i",2),n.Wc(4),n.cc(),n.dc(5,"button",3),n.nc("click",function(){return e.close()}),n.Zb(6,"i",4),n.cc(),n.cc(),n.dc(7,"div",5),n.dc(8,"perfect-scrollbar",6),n.Uc(9,_M,10,2,"div",7),n.cc(),n.cc(),n.cc()),2&t&&(n.yc("center",!1),n.Kb(4),n.Yc(" ",e.title," "),n.Kb(5),n.yc("ngForOf",e.getData()))},directives:[Kr,Hr.b,m.m],encapsulation:2}),t})(),gM=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},providers:[nn,FI],imports:[[cR,i.a]]}),t})();n.Oc(YI,[m.n,Dr,Kr,kA,dM,GA,jA,eM,nM,rM,lM],[]);let mM=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},imports:[[cR,lR,xR,FR,NT,by,Zy,Qy,$O,gA,mA,pA,vA,IA,DA,gM,RA,DA,LT,Xy,TA]]}),t})(),pM=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},providers:[g]}),t})(),fM=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},providers:[Bn]}),t})(),EM=(()=>{class t{}return t.\u0275mod=n.Wb({type:t,bootstrap:[nR]}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},imports:[[cR,pM,fM,mM,i.a,r.a]]}),t})();Object(n.cb)(),i.c().bootstrapModule(EM).catch(t=>console.log(t))},zVPj:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._itemId=0,this._isExpired=!0,this._userId=0,this._delay=0,!0}parse(t){return!!t&&(this._itemId=parseInt(t.readString()),this._isExpired=t.readBoolean(),this._userId=t.readInt(),this._delay=t.readInt(),!0)}get itemId(){return this._itemId}get isExpired(){return this._isExpired}get userId(){return this._userId}get delay(){return this._delay}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},zWsf:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s("5+UO");class i{flush(){return this._roomId=0,!0}parse(t){return!!t&&(this._roomId=t.readInt(),!0)}get roomId(){return this._roomId}}class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},zeoL:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},zn8P:function(t,e){function s(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}s.keys=function(){return[]},s.resolve=s,t.exports=s,s.id="zn8P"}},[[0,0,4]]]);