(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+/WI":function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("HqZk");class n{constructor(t,e,s,i,n,r){this._itemId=t,this._category=e,this._wallLocation=s,this._x=i,this._y=n,this._direction=r}getMessageArray(){switch(this._category){case i.a.FLOOR:return[`${this._itemId} ${this._x} ${this._y} ${this._direction}`];case i.a.WALL:return[`${this._itemId} ${this._wallLocation} `];default:return[]}}dispose(){}}},"+IGW":function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("3r1x");let n=(()=>{class t extends i.a{constructor(t,e,s){super(t),this._connection=e,this._originalEvent=event}get connection(){return this._connection}get originalEvent(){return this._originalEvent}}return t.CONNECTION_OPENED="SCE_OPEN",t.CONNECTION_CLOSED="SCE_CLOSED",t.CONNECTION_ERROR="SCE_ERROR",t.CONNECTION_MESSAGE="SCE_MESSAGE",t})()},"+IZ6":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("1+1A");class r{flush(){return this._owners=new Map,this._items=[],!0}parse(t){if(!t)return!1;if(!this.parseOwners(t))return!1;let e=t.readInt();for(;e>0;){const s=new n.a(t);if(!s)continue;const i=this._owners.get(s.userId);i&&(s.username=i),this._items.push(s),e--}return!0}parseOwners(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._owners.set(t.readInt(),t.readString()),e--;return!0}get owners(){return this._owners}get items(){return this._items}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"+LbQ":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._type=null,this._parameters=new Map,!0}parse(t){if(!t)return!1;this._type=t.readString();let e=t.readInt();for(;e>0;)this._parameters.set(t.readString(),t.readString()),e--;return!0}get type(){return this._type}get parameters(){return this._parameters}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"+ana":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},"+kDp":function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.USER=1,t.PET=2,t.BOT=3,t.RENTABLE_BOT=4,t})()},"/3sV":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._webId=-1,this._id=-1,this._newName="",!0}parse(t){return!!t&&(this._webId=t.readInt(),this._id=t.readInt(),this._newName=t.readString(),!0)}get webId(){return this._webId}get id(){return this._id}get newName(){return this._newName}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"/52j":function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.NONE=0,t.HEART=1,t.SMILE=2,t.BOBBA=3,t.RELATIONSHIP_TYPES=[0,1,2,3],t.RELATIONSHIP_NAMES=["None","Heart","Smile","Bobba"],t})()},"/FfH":function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{constructor(t){this.reset(),this.parse(t)}reset(){this._allowMute=0,this._allowKick=0,this._allowBan=0}parse(t){this._allowMute=t.readInt(),this._allowKick=t.readInt(),this._allowBan=t.readInt()}get allowMute(){return this._allowMute}get allowKick(){return this._allowKick}get allowBan(){return this._allowBan}}return t._Str_10707=0,t._Str_5047=1,t._Str_11537=2,t})()},"/OJ4":function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{static _Str_22614(e){switch(e){case t._Str_9173:return"${trading.mode.free}";case t._Str_14475:return"${trading.mode.controller}";case t._Str_12752:return"${trading.mode.not.allowed}"}return""}}return t._Str_12752=0,t._Str_14475=1,t._Str_9173=2,t})()},"/PsI":function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{static getExpressionTimeout(t){switch(t=parseInt(t)){case 1:return 5e3;case 2:return 1400;case 3:case 4:return 2e3;case 5:return 0;case 6:return 700;case 7:return 2e3;case 8:case 9:case 10:return 1500;default:return 0}}static getExpressionId(e){return t.EXPRESSION_MAP.indexOf(e)}static getExpression(e){return e>t.EXPRESSION_MAP.length?null:t.EXPRESSION_MAP[e]}static getGestureId(e){return t.GESTURE_MAP.indexOf(e)}static getGesture(e){return e>t.GESTURE_MAP.length?null:t.GESTURE_MAP[e]}static idToAvatarActionState(t){return"Lay"===t?"lay":"Float"===t?"float":"Swim"===t?"swim":"Sit"===t?"sit":"Respect"===t?"respect":"Wave"===t?"wave":"Idle"===t?"idle":"Dance"===t?"dance":"UseItem"===t?"usei":"CarryItem"===t?"cri":"Talk"===t?"talk":"Sleep"===t?"Sleep":"Move"===t?"mv":"std"}}return t.CARRY_OBJECT="cri",t.DANCE="dance",t.EFFECT="fx",t.EXPRESSION="expression",t.EXPRESSION_BLOW_A_KISS="blow",t.EXPRESSION_CRY="cry",t.EXPRESSION_IDLE="idle",t.EXPRESSION_LAUGH="laugh",t.EXPRESSION_RESPECT="respect",t.EXPRESSION_RIDE_JUMP="ridejump",t.EXPRESSION_SNOWBOARD_OLLIE="sbollie",t.EXPRESSION_SNOWBORD_360="sb360",t.EXPRESSION_WAVE="wave",t.GESTURE="gest",t.GESTURE_AGGRAVATED="agr",t.GESTURE_SAD="sad",t.GESTURE_SMILE="sml",t.GESTURE_SURPRISED="srp",t.GUIDE_STATUS="guide",t.MUTED="muted",t.PET_GESTURE_BLINK="eyb",t.PET_GESTURE_CRAZY="crz",t.PET_GESTURE_JOY="joy",t.PET_GESTURE_MISERABLE="mis",t.PET_GESTURE_PUZZLED="puz",t.PET_GESTURE_TONGUE="tng",t.PLAYING_GAME="playing_game",t.POSTURE="posture",t.POSTURE_FLOAT="float",t.POSTURE_LAY="lay",t.POSTURE_SIT="sit",t.POSTURE_STAND="std",t.POSTURE_SWIM="swim",t.POSTURE_WALK="mv",t.SIGN="sign",t.SLEEP="sleep",t.SNOWWAR_DIE_BACK="swdieback",t.SNOWWAR_DIE_FRONT="swdiefront",t.SNOWWAR_PICK="swpick",t.SNOWWAR_RUN="swrun",t.SNOWWAR_THROW="swthrow",t.TALK="talk",t.BLINK="blink",t.TYPING="typing",t.USE_OBJECT="usei",t.VOTE="vote",t.GESTURE_MAP=["",t.GESTURE_SMILE,t.GESTURE_AGGRAVATED,t.GESTURE_SURPRISED,t.GESTURE_SAD,t.PET_GESTURE_JOY,t.PET_GESTURE_CRAZY,t.PET_GESTURE_TONGUE,t.PET_GESTURE_BLINK,t.PET_GESTURE_MISERABLE,t.PET_GESTURE_PUZZLED],t.EXPRESSION_MAP=["",t.EXPRESSION_WAVE,t.EXPRESSION_BLOW_A_KISS,t.EXPRESSION_LAUGH,t.EXPRESSION_CRY,t.EXPRESSION_IDLE,t.DANCE,t.EXPRESSION_RESPECT,t.EXPRESSION_SNOWBOARD_OLLIE,t.EXPRESSION_SNOWBORD_360,t.EXPRESSION_RIDE_JUMP],t})()},"/icx":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t){this._id=0,this._type=0,this._color=0,this._intensity=0,this._isParsed=!1,this._htmlColor=null,this._id=t}parsed(){this._isParsed=!0}get id(){return this._id}get type(){return this._type}set type(t){this._isParsed||(this._type=t)}get color(){return this._color}set color(t){this._isParsed||(this._color=t)}get intensity(){return this._intensity}set intensity(t){this._isParsed||(this._intensity=t)}set htmlColor(t){this._htmlColor=t}get htmlColor(){return this._htmlColor}}class r{constructor(){this._selectedPresetId=0,this._presets=[]}get _Str_10888(){return this._presets.length}get _Str_6226(){return this._selectedPresetId}_Str_14989(t){return t<0||t>=this._Str_10888?null:this._presets[t]}flush(){return this._presets=[],!0}parse(t){const e=t.readInt();this._selectedPresetId=t.readInt();let s=0;for(;s<e;){const e=t.readInt(),i=t.readInt(),r=t.readString(),a=parseInt(r.substr(1),16),o=t.readInt(),c=new n(e);c.type=i,c.color=a,c.intensity=o,c.parsed(),c.htmlColor=r,this._presets.push(c),s++}return!0}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},0:function(t,e,s){t.exports=s("zUnb")},"0/8l":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{flush(){return this._count=0,!0}parse(t){return!!t&&(this._count=t.readInt(),!0)}get count(){return this._count}}},"00EK":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._userName=null,!0}parse(t){return!!t&&(this._userName=t.readString(),!0)}get userName(){return this._userName}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}get userName(){return this.getParser().userName}}},"00eG":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._typeCode=-1,this._avatarId=0,this._message=null,!0}parse(t){return!!t&&(this._typeCode=t.readInt(),this._avatarId=t.readInt(),this._message=t.readString(),!0)}get typeCode(){return this._typeCode}get avatarId(){return this._avatarId}get message(){return this._message}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"07Tz":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},"0DoP":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"0EkW":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},"0gOM":function(t,e,s){"use strict";s.d(e,"a",function(){return Fn});var i=s("Fv14"),n=s("+IGW"),r=s("P7Cj"),a=s("vzKh"),o=s("5+UO");class c{flush(){return!0}parse(t){return!!t}}class _ extends o.a{constructor(t){super(t,c)}getParser(){return this.parser}}class h{flush(){return!0}parse(t){return!!t}}class l extends o.a{constructor(t){super(t,h)}getParser(){return this.parser}}class u{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}let d=(()=>{class t{}return t.UNKNOWN=0,t.BROWSER=1,t})(),g=(()=>{class t{}return t.UNKNOWN=0,t.FLASH=1,t.HTML5=2,t})();class m{constructor(t,e,s,i){this._data=[r.a.RELEASE_VERSION,"HTML5",g.HTML5,d.BROWSER]}getMessageArray(){return this._data}dispose(){}}class p{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}class f{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}var E=s("z6mw");class S extends i.a{constructor(t){super(),this._communication=t,this._sso=null,this._handShaking=!1,this._didConnect=!1,this._pongInterval=null,this.onConnectionOpenedEvent=this.onConnectionOpenedEvent.bind(this),this.onConnectionClosedEvent=this.onConnectionClosedEvent.bind(this),this.onConnectionErrorEvent=this.onConnectionErrorEvent.bind(this),this.sendPong=this.sendPong.bind(this)}onInit(){const t=this._communication.connection;t&&(t.addEventListener(n.a.CONNECTION_OPENED,this.onConnectionOpenedEvent),t.addEventListener(n.a.CONNECTION_CLOSED,this.onConnectionClosedEvent),t.addEventListener(n.a.CONNECTION_ERROR,this.onConnectionErrorEvent)),this._communication.registerMessageEvent(new _(this.onClientPingEvent.bind(this))),this._communication.registerMessageEvent(new l(this.onAuthenticatedEvent.bind(this)))}onDispose(){const t=this._communication.connection;t&&(t.removeEventListener(n.a.CONNECTION_OPENED,this.onConnectionOpenedEvent),t.removeEventListener(n.a.CONNECTION_CLOSED,this.onConnectionClosedEvent),t.removeEventListener(n.a.CONNECTION_ERROR,this.onConnectionErrorEvent)),this._sso=null,this._handShaking=!1,this.stopPonging(),super.onDispose()}onConnectionOpenedEvent(t){const e=this._communication.connection;e&&(this._didConnect=!0,this.dispatchCommunicationDemoEvent(E.a.CONNECTION_ESTABLISHED,e),r.a.instance.getConfiguration("communication.pong.manually",!1)&&this.startPonging(),this.startHandshake(e),e.send(new m(null,null,null,null)),this.tryAuthentication(e))}onConnectionClosedEvent(t){const e=this._communication.connection;e&&(this.stopPonging(),this._didConnect&&this.dispatchCommunicationDemoEvent(E.a.CONNECTION_CLOSED,e))}onConnectionErrorEvent(t){const e=this._communication.connection;e&&(this.stopPonging(),this.dispatchCommunicationDemoEvent(E.a.CONNECTION_ERROR,e))}tryAuthentication(t){if(!t||!this._sso)return this._sso||a.a.log("Login without an SSO ticket is not supported"),void this.dispatchCommunicationDemoEvent(E.a.CONNECTION_HANDSHAKE_FAILED,t);t.send(new f(this._sso,r.a.instance.time))}onClientPingEvent(t){t instanceof _&&t.connection&&this.sendPong(t.connection)}onAuthenticatedEvent(t){t instanceof l&&t.connection&&(this.completeHandshake(t.connection),this.dispatchCommunicationDemoEvent(E.a.CONNECTION_AUTHENTICATED,t.connection),t.connection.send(new p))}setSSO(t){t&&""!==t&&!this._sso&&(this._sso=t)}startHandshake(t){this.dispatchCommunicationDemoEvent(E.a.CONNECTION_HANDSHAKING,t),this._handShaking=!0}completeHandshake(t){this.dispatchCommunicationDemoEvent(E.a.CONNECTION_HANDSHAKED,t),this._handShaking=!1}startPonging(){this.stopPonging(),this._pongInterval=setInterval(this.sendPong,r.a.instance.getConfiguration("communication.pong.interval.ms",2e4))}stopPonging(){this._pongInterval&&(clearInterval(this._pongInterval),this._pongInterval=null)}sendPong(t=null){(t=t||this._communication.connection||null)&&t.send(new u)}dispatchCommunicationDemoEvent(t,e){r.a.instance.events.dispatchEvent(new E.a(t,e))}}var I=s("3xex"),R=s("S+Gq"),b=s("9NDz"),v=s("qLWH"),T=s("SS1c"),O=s("t0/d"),y=s("sxwv"),A=s("u5n9"),C=s("Zq74"),M=s("U4HJ"),U=s("Ftck"),D=s("liWC"),w=s("q4z0"),N=s("dwRb"),L=s("Pox2"),x=s("kZQz"),P=s("WM79"),F=s("YN1x"),k=s("00eG"),W=s("t1CI"),V=s("G3dz"),G=s("gOUc"),H=s("81IQ"),B=s("X26Z"),j=s("P0eX"),K=s("i/ye"),z=s("wW/F"),Y=s("YaSm"),X=s("I5LT"),Z=s("qQgg"),q=s("UTIc"),Q=s("IqqQ"),J=s("7sb4");let $=(()=>{class t{}return t.ACHIEVEMENT_LIST=305,t.AUTHENTICATED=2491,t.AVAILABILITY_STATUS=2033,t.BUILDERS_CLUB_EXPIRED=1452,t.CAMERA_PRICE=3878,t.CAMERA_THUMBNAIL_SAVED=3595,t.CAMERA_URL=3696,t.CATALOG_CLUB=2405,t.CATALOG_MODE=3828,t.CATALOG_PAGE=804,t.CATALOG_PAGES=1032,t.CATALOG_PURCHASE=869,t.CATALOG_PURCHASE_FAILED=1404,t.CATALOG_PURCHASE_UNAVAILABLE=3770,t.CATALOG_SEARCH=3388,t.CATALOG_SOLD_OUT=377,t.CATALOG_UPDATED=1866,t.CFH_RESULT_MESSAGE=934,t.CLIENT_LATENCY=10,t.CLIENT_PING=3928,t.DESKTOP_CAMPAIGN=1745,t.DESKTOP_NEWS=286,t.DESKTOP_VIEW=122,t.DISCOUNT_CONFIG=2347,t.FIRST_LOGIN_OF_DAY=793,t.FURNITURE_ALIASES=1723,t.FURNITURE_DATA=2547,t.FURNITURE_FLOOR=1778,t.FURNITURE_FLOOR_ADD=1534,t.FURNITURE_FLOOR_REMOVE=2703,t.FURNITURE_FLOOR_UPDATE=3776,t.FURNITURE_ITEMDATA=2202,t.FURNITURE_STATE=2376,t.GAME_CENTER_ACHIEVEMENTS=2265,t.GAME_CENTER_GAME_LIST=222,t.GAME_CENTER_STATUS=2893,t.GENERIC_ALERT=3801,t.GENERIC_ALERT_LINK=2030,t.GENERIC_ERROR=1600,t.GIFT_CONFIG=2234,t.GROUP_BADGES=2402,t.GROUP_CREATE_OPTIONS=2159,t.GROUP_FORUM_INFO=3011,t.GROUP_FORUM_LIST=3001,t.GROUP_FORUM_THREADS=1073,t.GROUP_INFO=1702,t.GROUP_LIST=420,t.GROUP_MEMBER=265,t.GROUP_MEMBERS=1200,t.GROUP_MEMBERS_REFRESH=2445,t.GROUP_SETTINGS=3965,t.ITEM_DIMMER_SETTINGS=2710,t.ITEM_STACK_HELPER=2816,t.ITEM_WALL=1369,t.ITEM_WALL_ADD=2187,t.ITEM_WALL_REMOVE=3208,t.ITEM_WALL_UPDATE=2009,t.LOAD_GAME_URL=2624,t.MARKETPLACE_CONFIG=1823,t.MESSENGER_ACCEPT_FRIENDS=896,t.MESSENGER_CHAT=1587,t.MESSENGER_FIND_FRIENDS=1210,t.MESSENGER_FOLLOW_FAILED=3048,t.MESSENGER_FRIEND_NOTIFICATION=3082,t.MESSENGER_FRIENDS=3130,t.MESSENGER_INIT=1605,t.MESSENGER_INSTANCE_MESSAGE_ERROR=3359,t.MESSENGER_INVITE=3870,t.MESSENGER_INVITE_ERROR=462,t.MESSENGER_MESSAGE_ERROR=892,t.MESSENGER_MINIMAIL_COUNT=2803,t.MESSENGER_MINIMAIL_NEW=1911,t.MESSENGER_RELATIONSHIPS=2016,t.MESSENGER_REQUEST=2219,t.MESSENGER_REQUEST_ERROR=892,t.MESSENGER_REQUESTS=280,t.MESSENGER_ROOM_INVITE=3870,t.MESSENGER_SEARCH=973,t.MESSENGER_UPDATE=2800,t.MODERATION_REPORT_DISABLED=1651,t.MODERATION_TOOL=2696,t.MODERATION_TOPICS=325,t.MODERATION_USER_INFO=2866,t.MOTD_MESSAGES=2035,t.NAVIGATOR_CATEGORIES=1562,t.NAVIGATOR_COLLAPSED=1543,t.NAVIGATOR_EVENT_CATEGORIES=3244,t.NAVIGATOR_LIFTED=3104,t.NAVIGATOR_METADATA=3052,t.NAVIGATOR_OPEN_ROOM_CREATOR=2064,t.NAVIGATOR_SEARCH=2690,t.NAVIGATOR_SEARCHES=3984,t.NAVIGATOR_SETTINGS=518,t.NOTIFICATION_LIST=1992,t.PET_FIGURE_UPDATE=1924,t.PET_INFO=2901,t.RECYCLER_PRIZES=3164,t.ROOM_BAN_LIST=1869,t.ROOM_BAN_REMOVE=3429,t.ROOM_CREATED=1304,t.ROOM_DOORBELL=2309,t.ROOM_DOORBELL_ACCEPTED=3783,t.ROOM_DOORBELL_REJECTED=878,t.ROOM_ENTER=758,t.ROOM_ENTER_ERROR=899,t.ROOM_FORWARD=160,t.ROOM_HEIGHT_MAP=2753,t.ROOM_HEIGHT_MAP_UPDATE=558,t.ROOM_INFO=687,t.ROOM_INFO_OWNER=749,t.ROOM_MODEL=1301,t.ROOM_MODEL_BLOCKED_TILES=3990,t.ROOM_MODEL_DOOR=1664,t.ROOM_MODEL_NAME=2031,t.ROOM_MUTE=2533,t.ROOM_MUTE_USER=826,t.ROOM_PAINT=2454,t.ROOM_PROMOTION=2274,t.ROOM_QUEUE_STATUS=2208,t.ROOM_RIGHTS=780,t.ROOM_RIGHTS_CLEAR=2392,t.ROOM_RIGHTS_LIST=1284,t.ROOM_RIGHTS_LIST_ADD=2088,t.ROOM_RIGHTS_LIST_REMOVE=1327,t.ROOM_RIGHTS_OWNER=339,t.ROOM_ROLLING=3207,t.ROOM_SCORE=482,t.ROOM_SETTINGS=1498,t.ROOM_SETTINGS_CHAT=1191,t.ROOM_SETTINGS_SAVE=948,t.ROOM_SETTINGS_SAVE_ERROR=1555,t.ROOM_SETTINGS_UPDATED=3297,t.ROOM_SPECTATOR=1033,t.ROOM_THICKNESS=3547,t.SECURITY_DEBUG=3284,t.SECURITY_MACHINE=1488,t.SECURITY_UNKNOWN2=2833,t.TRADE_ACCEPTED=2568,t.TRADE_CLOSED=1373,t.TRADE_COMPLETED=1001,t.TRADE_CONFIRMATION=2720,t.TRADE_LIST_ITEM=2024,t.TRADE_NOT_OPEN=3128,t.TRADE_OPEN=2505,t.TRADE_OPEN_FAILED=217,t.TRADE_OTHER_NOT_ALLOWED=2154,t.TRADE_YOU_NOT_ALLOWED=3058,t.UNIT=374,t.UNIT_CHANGE_NAME=2182,t.UNIT_CHAT=1446,t.UNIT_CHAT_SHOUT=1036,t.UNIT_CHAT_WHISPER=2704,t.UNIT_DANCE=2233,t.UNIT_EFFECT=1167,t.UNIT_EXPRESSION=1631,t.UNIT_HAND_ITEM=1474,t.UNIT_IDLE=1797,t.UNIT_INFO=3920,t.UNIT_NUMBER=2324,t.UNIT_REMOVE=2661,t.UNIT_STATUS=1640,t.UNIT_TYPING=1717,t.UNSEEN_ITEMS=2103,t.USER_ACHIEVEMENT_SCORE=1968,t.USER_BADGES=717,t.USER_BADGES_ADD=2493,t.USER_BADGES_CURRENT=1087,t.USER_BOT_ADD=1352,t.USER_BOT_REMOVE=233,t.USER_BOTS=3086,t.USER_CHANGE_NAME=118,t.USER_CLOTHING=1450,t.USER_CREDITS=3475,t.USER_CURRENCY=2018,t.USER_CURRENCY_UPDATE=2275,t.USER_EFFECTS=340,t.USER_FAVORITE_ROOM=2524,t.USER_FAVORITE_ROOM_COUNT=151,t.USER_FIGURE=2429,t.USER_FURNITURE=994,t.USER_FURNITURE_ADD=104,t.USER_FURNITURE_POSTIT_PLACED=1501,t.USER_FURNITURE_REFRESH=3151,t.USER_FURNITURE_REMOVE=159,t.USER_HOME_ROOM=2875,t.USER_IGNORED=126,t.USER_INFO=2725,t.USER_OUTFITS=3315,t.USER_PERKS=2586,t.USER_PERMISSIONS=411,t.USER_PET_ADD=2101,t.USER_PET_REMOVE=3253,t.USER_PETS=3522,t.USER_PROFILE=3898,t.USER_RESPECT=2815,t.USER_SANCTION_STATUS=3679,t.USER_SETTINGS=513,t.USER_SUBSCRIPTION=954,t.WIRED_ACTION=1434,t.WIRED_CONDITION=1108,t.WIRED_ERROR=156,t.WIRED_OPEN=1830,t.WIRED_REWARD=178,t.WIRED_SAVE=1155,t.WIRED_TRIGGER=383,t.PLAYING_GAME=448,t.FURNITURE_STATE_2=3431,t.REMOVE_BOT_FROM_INVENTORY=233,t.ADD_BOT_TO_INVENTORY=1352,t.ACHIEVEMENT_PROGRESSED=2107,t.LOVELOCK_FURNI_START=3753,t.LOVELOCK_FURNI_FRIEND_COMFIRMED=382,t.LOVELOCK_FURNI_FINISHED=770,t.HOTEL_WILL_SHUTDOWN=1050,t})();var tt=s("tVIE"),et=s("a9Mt"),st=s("qZ7S");class it{constructor(t){if(!t)throw new Error("invalid_parser");this._id=t.readInt(),this._name=t.readString(),this._motto=t.readString(),this._gender=t.readString(),this._figure=t.readString()}get id(){return this._id}get name(){return this._name}get motto(){return this._motto}get figure(){return this._figure}get gender(){return this._gender}}class nt{flush(){return this._item=null,this._openInventory=!1,!0}parse(t){return!!t&&(this._item=new it(t),this._openInventory=t.readBoolean(),!0)}get item(){return this._item}openInventory(){return this._openInventory}}class rt extends o.a{constructor(t){super(t,nt)}getParser(){return this.parser}}var at=s("hTzv");class ot{flush(){return this._items&&(this._items.dispose(),this._items=null),!0}parse(t){this._items=new at.a;let e=t.readInt();for(;e>0;){const s=new it(t);this._items.add(s.id,s),e--}return!0}get items(){return this._items}}class ct extends o.a{constructor(t){super(t,ot)}getParser(){return this.parser}}class _t{flush(){return this._itemId=0,!0}parse(t){return!!t&&(this._itemId=t.readInt(),!0)}get itemId(){return this._itemId}}class ht extends o.a{constructor(t){super(t,_t)}getParser(){return this.parser}}var lt=s("1mUs"),ut=s("5RE+"),dt=s("ulbO"),gt=s("9loD"),mt=s("5Cat"),pt=s("Bbk2"),ft=s("IVZI"),Et=s("4hT9"),St=s("4gvq"),It=s("uHXo"),Rt=s("8qmW"),bt=s("iv6j"),vt=s("8KaG"),Tt=s("lN2i"),Ot=s("lrbo"),yt=s("sM2B"),At=s("i+XF"),Ct=s("oHxB"),Mt=s("JDjE"),Ut=s("5BHI"),Dt=s("443f"),wt=s("JCII"),Nt=s("vx5b"),Lt=s("6vif"),xt=s("xycO"),Pt=s("c7QS"),Ft=s("V1nr"),kt=s("QjCb"),Wt=s("4NUc"),Vt=s("+LbQ"),Gt=s("QXLr"),Ht=s("pRZV"),Bt=s("pDhE"),jt=s("00EK"),Kt=s("8lyR"),zt=s("HkHk"),Yt=s("Cyol"),Xt=s("EAxq"),Zt=s("KsdP"),qt=s("AFd5"),Qt=s("qKi6"),Jt=s("6etz"),$t=s("fFOI");class te{flush(){return this._chat=null,!0}parse(t){return!!t&&(this._chat=new $t.a(t),!0)}get chat(){return this._chat}}class ee extends o.a{constructor(t){super(t,te)}getParser(){return this.parser}}var se=s("10wl"),ie=s("8lyl"),ne=s("zRn8");class re{flush(){return this._roomId=0,this._code=0,this._message=null,!0}parse(t){return!!t&&(this._roomId=t.readInt(),this._code=t.readInt(),this._message=t.readString(),!0)}get roomId(){return this._roomId}get code(){return this._code}get message(){return this._message}}class ae extends o.a{constructor(t){super(t,re)}getParser(){return this.parser}}var oe=s("yqT3");class ce{flush(){return this._roomId=0,!0}parse(t){return!!t&&(this._roomId=t.readInt(),!0)}get roomId(){return this._roomId}}class _e extends o.a{constructor(t){super(t,ce)}getParser(){return this.parser}}var he=s("zWsf"),le=s("GlfS"),ue=s("yydM"),de=s("S5/W"),ge=s("JODW"),me=s("sR+E"),pe=s("zVPj"),fe=s("Wzp3"),Ee=s("Ie/D"),Se=s("Nakt"),Ie=s("Wamt"),Re=s("uaI9"),be=s("ArMw"),ve=s("ObWd"),Te=s("/icx"),Oe=s("QZfg"),ye=s("+IZ6"),Ae=s("Xe8L"),Ce=s("Njml"),Me=s("mQ1q"),Ue=s("ebaN"),De=s("Prlr"),we=s("bmMM"),Ne=s("zTkZ"),Le=s("lbEV"),xe=s("CzV9"),Pe=s("f1eJ"),Fe=s("1QEa"),ke=s("sRv6"),We=s("xq+5"),Ve=s("jFxZ"),Ge=s("sCRD"),He=s("mGgu"),Be=s("BVCN"),je=s("fVO9"),Ke=s("Yx/o"),ze=s("D/zE"),Ye=s("KjXG"),Xe=s("jzpY"),Ze=s("NpwP"),qe=s("n7CB"),Qe=s("jdh6"),Je=s("m7hj"),$e=s("WEUE"),ts=s("9Jti"),es=s("XNkd"),ss=s("Ahnc"),is=s("nQsh"),ns=s("29Gn");class rs{flush(){return!0}parse(t){return!!t}}class as extends o.a{constructor(t){super(t,rs)}getParser(){return this.parser}}var os=s("8Dbs"),cs=s("xB90"),_s=s("3md2"),hs=s("uMJ2"),ls=s("/3sV"),us=s("Tp0E"),ds=s("9/2a"),gs=s("uHVT"),ms=s("2y6h"),ps=s("IRIx"),fs=s("DpKJ"),Es=s("oKt9"),Ss=s("UufK"),Is=s("BG3s"),Rs=s("2H63"),bs=s("8ZkN"),vs=s("3CL9"),Ts=s("BgaL"),Os=s("pjvS"),ys=s("NjFb"),As=s("6RUH"),Cs=s("SzgH"),Ms=s("OLXM");class Us{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}var Ds=s("Fcb+");class ws{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}var Ns=s("YQyq");class Ls{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}var xs=s("eXwK"),Ps=s("4k6Q"),Fs=s("tLSS"),ks=s("jNJ0");class Ws{constructor(t,...e){this._data=[t,e.length,...e]}getMessageArray(){return this._data}dispose(){}}var Vs=s("FV0X");class Gs{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}var Hs=s("gEiT");class Bs{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}class js{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}var Ks=s("J0cl"),zs=s("sGp+"),Ys=s("07Tz"),Xs=s("oe6/"),Zs=s("0EkW"),qs=s("Q612"),Qs=s("porQ"),Js=s("gnch"),$s=s("zeoL"),ti=s("r7iz"),ei=s("V5Lx");class si{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}var ii=s("S8Tn");class ni{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}var ri=s("UdUS");class ai{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}class oi{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}var ci=s("lulp");class _i{constructor(t,e,s,i,n,r){this._data=[t,e,s,i,n,r]}getMessageArray(){return this._data}dispose(){}}let hi=(()=>{class t{}return t.ACHIEVEMENT_LIST=219,t.BOT_INFO=1986,t.BOT_PICKUP=3323,t.BOT_PLACE=1592,t.BOT_SETTINGS_SAVE=2624,t.CAMERA_PRICE=796,t.CAMERA_SAVE=3226,t.CAMERA_THUMBNAIL=1982,t.CATALOG_CLUB=3285,t.CATALOG_MODE=1195,t.CATALOG_PAGE=412,t.CATALOG_PURCHASE=3492,t.CATALOG_SEARCH=2594,t.CLIENT_LATENCY=295,t.CLIENT_LATENCY_MEASURE=96,t.CLIENT_POLICY=26979,t.CLIENT_PONG=2596,t.CLIENT_TOOLBAR_TOGGLE=2313,t.CLIENT_VARIABLES=1053,t.DESKTOP_CAMPAIGNS=2912,t.DESKTOP_NEWS=1827,t.DESKTOP_VIEW=105,t.DISCOUNT_CONFIG=223,t.EVENT_TRACKER=3457,t.FIND_FRIENDS=516,t.FURNITURE_ALIASES=3898,t.FURNITURE_FLOOR_UPDATE=248,t.FURNITURE_MULTISTATE=99,t.FURNITURE_PICKUP=3456,t.FURNITURE_PLACE=1258,t.FURNITURE_POSTIT_PLACE=2248,t.FURNITURE_RANDOMSTATE=3617,t.FURNITURE_WALL_MULTISTATE=210,t.FURNITURE_WALL_UPDATE=168,t.GAMES_INIT=2914,t.GAMES_LIST=741,t.GIFT_CONFIG=418,t.GROUP_ADMIN_ADD=2894,t.GROUP_ADMIN_REMOVE=722,t.GROUP_CREATE_OPTIONS=798,t.GROUP_FORUM_INFO=3149,t.GROUP_FORUM_LIST=873,t.GROUP_FORUM_THREADS=436,t.GROUP_INFO=2991,t.GROUP_MEMBER_REMOVE=3593,t.GROUP_MEMBERS=312,t.GROUP_MEMBERSHIPS=367,t.GROUP_REQUEST=998,t.GROUP_REQUEST_ACCEPT=3386,t.GROUP_REQUEST_DECLINE=1894,t.GROUP_SETTINGS=1004,t.INVENTORY_UNKNOWN=1371,t.ITEM_CLOTHING_REDEEM=3374,t.ITEM_COLOR_WHEEL_CLICK=2144,t.ITEM_DICE_CLICK=1990,t.ITEM_DICE_CLOSE=1533,t.ITEM_DIMMER_SAVE=1648,t.ITEM_DIMMER_SETTINGS=2813,t.ITEM_DIMMER_TOGGLE=2296,t.ITEM_EXCHANGE_REDEEM=3115,t.ITEM_PAINT=711,t.ITEM_SAVE_BACKGROUND=3608,t.ITEM_STACK_HELPER=3839,t.ITEM_WALL_CLICK=210,t.ITEM_WALL_UPDATE=168,t.MARKETPLACE_CONFIG=2597,t.MESSENGER_ACCEPT=137,t.MESSENGER_CHAT=3567,t.MESSENGER_DECLINE=2890,t.MESSENGER_FOLLOW=3997,t.MESSENGER_FRIENDS=1523,t.MESSENGER_INIT=2781,t.MESSENGER_RELATIONSHIPS=2138,t.MESSENGER_RELATIONSHIPS_UPDATE=3768,t.MESSENGER_REMOVE=1689,t.MESSENGER_REQUEST=3157,t.MESSENGER_REQUESTS=2448,t.MESSENGER_ROOM_INVITE=1276,t.MESSENGER_SEARCH=1210,t.MESSENGER_UPDATES=1419,t.MOD_TOOL_USER_INFO=3295,t.NAVIGATOR_CATEGORIES=3027,t.NAVIGATOR_INIT=2110,t.NAVIGATOR_SEARCH=249,t.NAVIGATOR_SEARCH_CLOSE=1834,t.NAVIGATOR_SEARCH_OPEN=637,t.NAVIGATOR_SEARCH_SAVE=2226,t.NAVIGATOR_SETTINGS=1782,t.NAVIGATOR_SETTINGS_SAVE=3159,t.NAVIGATOR_CATEGORY_LIST_MODE=1202,t.PET_INFO=2934,t.PET_PICKUP=1581,t.PET_PLACE=2647,t.PET_RESPECT=3202,t.PET_RIDE=1036,t.RECYCLER_PRIZES=398,t.RELEASE_VERSION=4e3,t.REPORT=1691,t.ROOM_AMBASSADOR_ALERT=2996,t.ROOM_BAN_GIVE=1477,t.ROOM_BAN_LIST=2267,t.ROOM_BAN_REMOVE=992,t.ROOM_CREATE=2752,t.ROOM_DELETE=532,t.ROOM_DOORBELL=1644,t.ROOM_ENTER=2312,t.ROOM_FAVORITE=3817,t.ROOM_FAVORITE_REMOVE=309,t.ROOM_INFO=2230,t.ROOM_KICK=1320,t.ROOM_LIKE=3582,t.ROOM_MODEL=2300,t.ROOM_MODEL_BLOCKED_TILES=1687,t.ROOM_MODEL_DOOR=3559,t.ROOM_MODEL_SAVE=875,t.ROOM_MUTE=3637,t.ROOM_MUTE_USER=3485,t.ROOM_RIGHTS_GIVE=808,t.ROOM_RIGHTS_LIST=3385,t.ROOM_RIGHTS_REMOVE=2064,t.ROOM_RIGHTS_REMOVE_ALL=2683,t.ROOM_RIGHTS_REMOVE_OWN=3182,t.ROOM_SETTINGS=3129,t.ROOM_SETTINGS_SAVE=1969,t.SECURITY_MACHINE=2490,t.SECURITY_TICKET=2419,t.TRADE=1481,t.TRADE_ACCEPT=3863,t.TRADE_CANCEL=2341,t.TRADE_CLOSE=2551,t.TRADE_CONFIRM=2760,t.TRADE_ITEM=3107,t.TRADE_ITEM_REMOVE=3845,t.TRADE_ITEMS=1263,t.TRADE_UNACCEPT=1444,t.UNIT_ACTION=2456,t.UNIT_CHAT=1314,t.UNIT_CHAT_SHOUT=2085,t.UNIT_CHAT_WHISPER=1543,t.UNIT_DANCE=2080,t.UNIT_DROP_HAND_ITEM=2814,t.UNIT_GIVE_HANDITEM=2941,t.UNIT_LOOK=3301,t.UNIT_POSTURE=2235,t.UNIT_SIGN=1975,t.UNIT_TYPING=1597,t.UNIT_TYPING_STOP=1474,t.UNIT_WALK=3320,t.USER_BADGES=2769,t.USER_BADGES_CURRENT=2091,t.USER_BADGES_CURRENT_UPDATE=644,t.USER_BOTS=3848,t.USER_CURRENCY=273,t.USER_EFFECT_ACTIVATE=2959,t.USER_EFFECT_ENABLE=1752,t.USER_FIGURE=2730,t.USER_FURNITURE=3150,t.USER_FURNITURE2=3500,t.USER_HOME_ROOM=1740,t.USER_INFO=357,t.USER_MOTTO=2228,t.USER_ONLINE=3878,t.USER_OUTFIT_SAVE=800,t.USER_OUTFITS=2742,t.USER_PETS=3095,t.USER_PROFILE=3265,t.USER_RESPECT=2694,t.USER_SETTINGS=2388,t.USER_SETTINGS_CAMERA=1461,t.USER_SETTINGS_CHAT_STYLE=1030,t.USER_SETTINGS_INVITES=1086,t.USER_SETTINGS_OLD_CHAT=1262,t.USER_SETTINGS_VOLUME=1367,t.USER_SUBSCRIPTION=3166,t.USER_TAGS=17,t.USER_VISIT=2970,t.WIRED_ACTION_SAVE=2281,t.WIRED_APPLY_SNAPSHOT=3373,t.WIRED_CONDITION_SAVE=3203,t.WIRED_OPEN=768,t.WIRED_TRIGGER_SAVE=1520,t.GET_ITEM_DATA=3964,t.ONE_WAY_DOOR_CLICK=2765,t.REMOVE_WALL_ITEM=3336,t.MODIFY_WALL_ITEM_DATA=3666,t.CATALOG_REDEEM_VOUCHER=339,t.ROOM_TONER_APPLY=2880,t.LOVELOCK_START_CONFIRM=3775,t})();var li=s("itFj"),ui=s("tfDB"),di=s("5TOT"),gi=s("LKhd"),mi=s("j8oG"),pi=s("nlEz"),fi=s("QZVO"),Ei=s("4hNi"),Si=s("J4cl"),Ii=s("0qJb"),Ri=s("mHKk"),bi=s("Mixc"),vi=s("9RxG"),Ti=s("YTIQ"),Oi=s("h5lc"),yi=s("Oh4I"),Ai=s("h2l6"),Ci=s("+ana"),Mi=s("H7M9"),Ui=s("xdKJ"),Di=s("7d3m"),wi=s("X+hw"),Ni=s("p0wa"),Li=s("2Rep"),xi=s("YlMy"),Pi=s("Sb1T"),Fi=s("4Yln"),ki=s("jgc/"),Wi=s("+/WI"),Vi=s("bmkm"),Gi=s("PSU1"),Hi=s("PJYa"),Bi=s("fuks"),ji=s("Nd6c"),Ki=s("6X5G"),zi=s("v1R/"),Yi=s("jdue"),Xi=s("gHKk"),Zi=s("OGjZ"),qi=s("wSNj"),Qi=s("wyCi"),Ji=s("rlQL"),$i=s("VYTg"),tn=s("Aavw"),en=s("OxVo"),sn=s("gnow"),nn=s("UJeg"),rn=s("lMbP"),an=s("j7GY"),on=s("ekex"),cn=s("pGYl"),_n=s("0DoP"),hn=s("hFyr"),ln=s("Gb7F"),un=s("kiCC"),dn=s("qXDh");class gn{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}class mn{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}var pn=s("amIx"),fn=s("Yp13"),En=s("FXkd"),Sn=s("nMRu"),In=s("rbNg");class Rn{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}var bn=s("o4p4"),vn=s("4pnK"),Tn=s("75Vd"),On=s("zIYo");class yn{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}var An=s("dmof"),Cn=s("0/8l"),Mn=s("AzHa"),Un=s("10Jd"),Dn=s("ipbj"),wn=s("BTXg"),Nn=s("AAYK"),Ln=s("kRfe"),xn=s("KJ3T");class Pn{constructor(){this._events=new Map,this._composers=new Map,this.registerEvents(),this.registerComposers()}registerEvents(){this._events.set($.AVAILABILITY_STATUS,I.a),this._events.set($.GENERIC_ERROR,q.a),this._events.set($.USER_CHANGE_NAME,R.a),this._events.set($.CATALOG_CLUB,b.a),this._events.set($.CATALOG_MODE,v.a),this._events.set($.CATALOG_PAGE,T.a),this._events.set($.CATALOG_PAGES,O.a),this._events.set($.CATALOG_PURCHASE,y.a),this._events.set($.CATALOG_PURCHASE_FAILED,A.a),this._events.set($.CATALOG_PURCHASE_UNAVAILABLE,C.a),this._events.set($.CATALOG_SEARCH,M.a),this._events.set($.CATALOG_SOLD_OUT,U.a),this._events.set($.CATALOG_UPDATED,D.a),this._events.set($.CLIENT_PING,_),this._events.set($.DESKTOP_VIEW,w.a),this._events.set($.MESSENGER_ACCEPT_FRIENDS,N.a),this._events.set($.MESSENGER_FIND_FRIENDS,L.a),this._events.set($.MESSENGER_FOLLOW_FAILED,x.a),this._events.set($.MESSENGER_FRIENDS,P.a),this._events.set($.MESSENGER_UPDATE,F.a),this._events.set($.MESSENGER_FRIEND_NOTIFICATION,k.a),this._events.set($.MESSENGER_REQUESTS,W.a),this._events.set($.MESSENGER_SEARCH,V.a),this._events.set($.MESSENGER_INSTANCE_MESSAGE_ERROR,G.a),this._events.set($.MESSENGER_MESSAGE_ERROR,H.a),this._events.set($.MESSENGER_INIT,B.a),this._events.set($.MESSENGER_MINIMAIL_NEW,j.a),this._events.set($.MESSENGER_MINIMAIL_COUNT,Cn.a),this._events.set($.MESSENGER_CHAT,K.a),this._events.set($.MESSENGER_REQUEST,z.a),this._events.set($.MESSENGER_INVITE_ERROR,Y.a),this._events.set($.MESSENGER_INVITE,X.a),this._events.set($.GROUP_INFO,Q.a),this._events.set($.CFH_RESULT_MESSAGE,J.a),this._events.set($.USER_CLOTHING,lt.a),this._events.set($.USER_FURNITURE_ADD,ut.a),this._events.set($.USER_FURNITURE,dt.a),this._events.set($.USER_FURNITURE_REFRESH,gt.a),this._events.set($.USER_FURNITURE_REMOVE,mt.a),this._events.set($.USER_FURNITURE_POSTIT_PLACED,pt.a),this._events.set($.TRADE_ACCEPTED,ft.a),this._events.set($.TRADE_CLOSED,Et.a),this._events.set($.TRADE_COMPLETED,St.a),this._events.set($.TRADE_CONFIRMATION,It.a),this._events.set($.TRADE_LIST_ITEM,Rt.a),this._events.set($.TRADE_NOT_OPEN,bt.a),this._events.set($.TRADE_OPEN_FAILED,Tt.a),this._events.set($.TRADE_OPEN,vt.a),this._events.set($.TRADE_OTHER_NOT_ALLOWED,Ot.a),this._events.set($.TRADE_YOU_NOT_ALLOWED,yt.a),this._events.set($.GENERIC_ALERT_LINK,At.a),this._events.set($.NAVIGATOR_CATEGORIES,Ct.a),this._events.set($.NAVIGATOR_COLLAPSED,Mt.a),this._events.set($.NAVIGATOR_EVENT_CATEGORIES,Ut.a),this._events.set($.USER_HOME_ROOM,Dt.a),this._events.set($.NAVIGATOR_LIFTED,wt.a),this._events.set($.NAVIGATOR_METADATA,Nt.a),this._events.set($.NAVIGATOR_OPEN_ROOM_CREATOR,Lt.a),this._events.set($.NAVIGATOR_SEARCHES,xt.a),this._events.set($.NAVIGATOR_SEARCH,Pt.a),this._events.set($.NAVIGATOR_SETTINGS,Ft.a),this._events.set($.GENERIC_ALERT,kt.a),this._events.set($.MOTD_MESSAGES,Wt.a),this._events.set($.NOTIFICATION_LIST,Vt.a),this._events.set($.USER_RESPECT,Gt.a),this._events.set($.UNSEEN_ITEMS,Ht.a),this._events.set($.HOTEL_WILL_SHUTDOWN,xn.a),this._events.set($.ROOM_ENTER_ERROR,Zt.a),this._events.set($.ROOM_ENTER,qt.a),this._events.set($.ROOM_FORWARD,Qt.a),this._events.set($.ROOM_DOORBELL,jt.a),this._events.set($.ROOM_DOORBELL_ACCEPTED,Bt.a),this._events.set($.ROOM_DOORBELL_REJECTED,Kt.a),this._events.set($.ROOM_RIGHTS_CLEAR,zt.a),this._events.set($.ROOM_RIGHTS_OWNER,Xt.a),this._events.set($.ROOM_RIGHTS,Yt.a),this._events.set($.ROOM_SETTINGS_CHAT,ee),this._events.set($.ROOM_INFO,se.a),this._events.set($.ROOM_INFO_OWNER,ie.a),this._events.set($.ROOM_SCORE,ne.a),this._events.set($.ROOM_SETTINGS_SAVE_ERROR,ae),this._events.set($.ROOM_SETTINGS,oe.a),this._events.set($.ROOM_SETTINGS_SAVE,_e),this._events.set($.ROOM_SETTINGS_UPDATED,he.a),this._events.set($.ROOM_RIGHTS_LIST,le.a),this._events.set($.ROOM_BAN_LIST,Jt.a),this._events.set($.ROOM_ROLLING,ue.a),this._events.set($.ROOM_CREATED,de.a),this._events.set($.FURNITURE_ALIASES,Ee.a),this._events.set($.FURNITURE_DATA,Se.a),this._events.set($.FURNITURE_ITEMDATA,Ie.a),this._events.set($.ITEM_STACK_HELPER,Re.a),this._events.set($.FURNITURE_STATE,ve.a),this._events.set($.ITEM_DIMMER_SETTINGS,Te.a),this._events.set($.FURNITURE_STATE_2,be.a),this._events.set($.LOVELOCK_FURNI_FINISHED,Un.a),this._events.set($.LOVELOCK_FURNI_FRIEND_COMFIRMED,Dn.a),this._events.set($.LOVELOCK_FURNI_START,wn.a),this._events.set($.FURNITURE_FLOOR_ADD,ge.a),this._events.set($.FURNITURE_FLOOR,me.a),this._events.set($.FURNITURE_FLOOR_REMOVE,pe.a),this._events.set($.FURNITURE_FLOOR_UPDATE,fe.a),this._events.set($.ITEM_WALL_ADD,Oe.a),this._events.set($.ITEM_WALL,ye.a),this._events.set($.ITEM_WALL_REMOVE,Ae.a),this._events.set($.ITEM_WALL_UPDATE,Ce.a),this._events.set($.ROOM_MODEL_DOOR,Me.a),this._events.set($.ROOM_HEIGHT_MAP,Ue.a),this._events.set($.ROOM_HEIGHT_MAP_UPDATE,De.a),this._events.set($.ROOM_MODEL,we.a),this._events.set($.ROOM_MODEL_NAME,Ne.a),this._events.set($.ROOM_PAINT,Le.a),this._events.set($.ROOM_THICKNESS,xe.a),this._events.set($.PET_FIGURE_UPDATE,Pe.a),this._events.set($.PLAYING_GAME,Fe.a),this._events.set($.UNIT_DANCE,He.a),this._events.set($.UNIT_EFFECT,Be.a),this._events.set($.UNIT,je.a),this._events.set($.UNIT_EXPRESSION,Ke.a),this._events.set($.UNIT_HAND_ITEM,ze.a),this._events.set($.UNIT_IDLE,Ye.a),this._events.set($.UNIT_INFO,Xe.a),this._events.set($.UNIT_NUMBER,Ze.a),this._events.set($.UNIT_REMOVE,qe.a),this._events.set($.UNIT_STATUS,Qe.a),this._events.set($.UNIT_CHAT,ke.a),this._events.set($.UNIT_CHAT_SHOUT,We.a),this._events.set($.UNIT_CHAT_WHISPER,Ve.a),this._events.set($.UNIT_TYPING,Ge.a),this._events.set($.WIRED_ACTION,Je.a),this._events.set($.WIRED_CONDITION,$e.a),this._events.set($.WIRED_TRIGGER,ts.a),this._events.set($.WIRED_OPEN,es.a),this._events.set($.WIRED_REWARD,ss.a),this._events.set($.WIRED_SAVE,is.a),this._events.set($.WIRED_ERROR,ns.a),this._events.set($.AUTHENTICATED,l),this._events.set($.USER_PERKS,as),this._events.set($.USER_PERMISSIONS,os.a),this._events.set($.USER_BADGES_CURRENT,cs.a),this._events.set($.USER_FIGURE,_s.a),this._events.set($.USER_INFO,hs.a),this._events.set($.UNIT_CHANGE_NAME,ls.a),this._events.set($.USER_SETTINGS,gs.a),this._events.set($.USER_PROFILE,us.a),this._events.set($.MESSENGER_RELATIONSHIPS,ds.a),this._events.set($.USER_BOTS,ct),this._events.set($.REMOVE_BOT_FROM_INVENTORY,ht),this._events.set($.ADD_BOT_TO_INVENTORY,rt),this._events.set($.USER_CREDITS,ms.a),this._events.set($.USER_CURRENCY,ps.a),this._events.set($.USER_CURRENCY_UPDATE,fs.a),this._events.set($.USER_SUBSCRIPTION,Es.a),this._events.set($.LOAD_GAME_URL,Z.a),this._events.set($.ACHIEVEMENT_PROGRESSED,tt.a),this._events.set($.ACHIEVEMENT_LIST,et.a),this._events.set($.USER_ACHIEVEMENT_SCORE,st.a)}registerComposers(){this._composers.set(hi.CATALOG_MODE,Is.a),this._composers.set(hi.CATALOG_PAGE,Rs.a),this._composers.set(hi.CATALOG_PURCHASE,bs.a),this._composers.set(hi.CATALOG_SEARCH,Ts.a),this._composers.set(hi.CATALOG_CLUB,vs.a),this._composers.set(hi.CATALOG_REDEEM_VOUCHER,ys.a),this._composers.set(hi.LOVELOCK_START_CONFIRM,Nn.a),this._composers.set(hi.CLIENT_PONG,u),this._composers.set(hi.RELEASE_VERSION,m),this._composers.set(hi.DESKTOP_VIEW,As.a),this._composers.set(hi.MESSENGER_ACCEPT,Cs.a),this._composers.set(hi.MESSENGER_DECLINE,Ms.a),this._composers.set(hi.FIND_FRIENDS,Us),this._composers.set(hi.MESSENGER_FOLLOW,Ds.a),this._composers.set(hi.MESSENGER_UPDATES,ws),this._composers.set(hi.MESSENGER_REQUESTS,Ns.a),this._composers.set(hi.MESSENGER_SEARCH,Ls),this._composers.set(hi.MESSENGER_INIT,xs.a),this._composers.set(hi.MESSENGER_REMOVE,Ps.a),this._composers.set(hi.MESSENGER_REQUEST,Fs.a),this._composers.set(hi.MESSENGER_CHAT,ks.a),this._composers.set(hi.MESSENGER_ROOM_INVITE,Ws),this._composers.set(hi.MESSENGER_RELATIONSHIPS_UPDATE,Vs.a),this._composers.set(hi.USER_VISIT,Gs),this._composers.set(hi.GROUP_INFO,Hs.a),this._composers.set(hi.SECURITY_TICKET,f),this._composers.set(hi.USER_INFO,p),this._composers.set(hi.NAVIGATOR_CATEGORIES,ei.a),this._composers.set(hi.NAVIGATOR_INIT,ii.a),this._composers.set(hi.NAVIGATOR_SEARCH_CLOSE,ni),this._composers.set(hi.NAVIGATOR_SEARCH,ri.a),this._composers.set(hi.NAVIGATOR_SEARCH_OPEN,ai),this._composers.set(hi.NAVIGATOR_SEARCH_SAVE,oi),this._composers.set(hi.NAVIGATOR_SETTINGS,ci.a),this._composers.set(hi.NAVIGATOR_SETTINGS_SAVE,_i),this._composers.set(hi.NAVIGATOR_CATEGORY_LIST_MODE,si),this._composers.set(hi.USER_FURNITURE,Ks.a),this._composers.set(hi.USER_FURNITURE2,js),this._composers.set(hi.ITEM_SAVE_BACKGROUND,wi.a),this._composers.set(hi.TRADE_ACCEPT,zs.a),this._composers.set(hi.TRADE_CANCEL,Ys.a),this._composers.set(hi.TRADE_CLOSE,Xs.a),this._composers.set(hi.TRADE_CONFIRM,Zs.a),this._composers.set(hi.TRADE_ITEM,qs.a),this._composers.set(hi.TRADE_ITEMS,Qs.a),this._composers.set(hi.TRADE_ITEM_REMOVE,Js.a),this._composers.set(hi.TRADE,$s.a),this._composers.set(hi.TRADE_UNACCEPT,ti.a),this._composers.set(hi.ACHIEVEMENT_LIST,Ss.a),this._composers.set(hi.PET_RESPECT,li.a),this._composers.set(hi.ROOM_CREATE,$i.a),this._composers.set(hi.ROOM_ENTER,di.a),this._composers.set(hi.ROOM_DOORBELL,ui.a),this._composers.set(hi.ROOM_AMBASSADOR_ALERT,gi.a),this._composers.set(hi.ROOM_BAN_GIVE,mi.a),this._composers.set(hi.ROOM_BAN_REMOVE,Ri.a),this._composers.set(hi.ROOM_RIGHTS_GIVE,fi.a),this._composers.set(hi.ROOM_KICK,Ei.a),this._composers.set(hi.ROOM_MUTE_USER,Si.a),this._composers.set(hi.ROOM_RIGHTS_REMOVE,Ii.a),this._composers.set(hi.ROOM_LIKE,Ln.a),this._composers.set(hi.ROOM_DELETE,pi.a),this._composers.set(hi.ROOM_INFO,vi.a),this._composers.set(hi.ROOM_SETTINGS,Ti.a),this._composers.set(hi.ROOM_SETTINGS_SAVE,yi.a),this._composers.set(hi.ROOM_RIGHTS_LIST,Oi.a),this._composers.set(hi.ROOM_BAN_LIST,bi.a),this._composers.set(hi.GET_ITEM_DATA,Ai.a),this._composers.set(hi.REMOVE_WALL_ITEM,Di.a),this._composers.set(hi.MODIFY_WALL_ITEM_DATA,Ci.a),this._composers.set(hi.BOT_PLACE,Mi.a),this._composers.set(hi.BOT_PICKUP,Ui.a),this._composers.set(hi.FURNITURE_ALIASES,Fi.a),this._composers.set(hi.FURNITURE_PICKUP,ki.a),this._composers.set(hi.FURNITURE_PLACE,Wi.a),this._composers.set(hi.ITEM_PAINT,Vi.a),this._composers.set(hi.FURNITURE_POSTIT_PLACE,Gi.a),this._composers.set(hi.FURNITURE_FLOOR_UPDATE,Pi.a),this._composers.set(hi.FURNITURE_WALL_UPDATE,Qi.a),this._composers.set(hi.ITEM_DIMMER_SETTINGS,Ni.a),this._composers.set(hi.ITEM_DIMMER_SAVE,Li.a),this._composers.set(hi.ITEM_DIMMER_TOGGLE,xi.a),this._composers.set(hi.ROOM_TONER_APPLY,Mn.a),this._composers.set(hi.ITEM_COLOR_WHEEL_CLICK,Hi.a),this._composers.set(hi.ITEM_DICE_CLICK,Bi.a),this._composers.set(hi.ITEM_DICE_CLOSE,ji.a),this._composers.set(hi.FURNITURE_MULTISTATE,zi.a),this._composers.set(hi.FURNITURE_RANDOMSTATE,Xi.a),this._composers.set(hi.ITEM_STACK_HELPER,Zi.a),this._composers.set(hi.FURNITURE_WALL_MULTISTATE,qi.a),this._composers.set(hi.ONE_WAY_DOOR_CLICK,Yi.a),this._composers.set(hi.ITEM_EXCHANGE_REDEEM,Ki.a),this._composers.set(hi.ITEM_CLOTHING_REDEEM,Os.a),this._composers.set(hi.ROOM_MODEL,Ji.a),this._composers.set(hi.UNIT_ACTION,an.a),this._composers.set(hi.UNIT_DANCE,on.a),this._composers.set(hi.UNIT_DROP_HAND_ITEM,cn.a),this._composers.set(hi.UNIT_GIVE_HANDITEM,_n.a),this._composers.set(hi.UNIT_LOOK,hn.a),this._composers.set(hi.UNIT_SIGN,un.a),this._composers.set(hi.UNIT_POSTURE,ln.a),this._composers.set(hi.UNIT_WALK,dn.a),this._composers.set(hi.UNIT_CHAT,tn.a),this._composers.set(hi.UNIT_CHAT_SHOUT,en.a),this._composers.set(hi.UNIT_CHAT_WHISPER,sn.a),this._composers.set(hi.UNIT_TYPING,nn.a),this._composers.set(hi.UNIT_TYPING_STOP,rn.a),this._composers.set(hi.WIRED_APPLY_SNAPSHOT,gn),this._composers.set(hi.WIRED_OPEN,mn),this._composers.set(hi.WIRED_ACTION_SAVE,pn.a),this._composers.set(hi.WIRED_CONDITION_SAVE,fn.a),this._composers.set(hi.WIRED_TRIGGER_SAVE,En.a),this._composers.set(hi.USER_RESPECT,An.a),this._composers.set(hi.USER_BADGES_CURRENT,Sn.a),this._composers.set(hi.USER_FIGURE,In.a),this._composers.set(hi.USER_HOME_ROOM,Rn),this._composers.set(hi.USER_MOTTO,bn.a),this._composers.set(hi.USER_PROFILE,vn.a),this._composers.set(hi.MESSENGER_RELATIONSHIPS,Tn.a),this._composers.set(hi.USER_BOTS,Bs),this._composers.set(hi.USER_CURRENCY,On.a),this._composers.set(hi.USER_SUBSCRIPTION,yn)}get events(){return this._events}get composers(){return this._composers}}class Fn extends i.a{constructor(t){super(),this._communication=t,this._connection=null,this._messages=new Pn,this._demo=new S(this),this.onConnectionOpenedEvent=this.onConnectionOpenedEvent.bind(this),this.onConnectionClosedEvent=this.onConnectionClosedEvent.bind(this),this.onConnectionErrorEvent=this.onConnectionErrorEvent.bind(this),this.onConnectionAuthenticatedEvent=this.onConnectionAuthenticatedEvent.bind(this)}onInit(){this._connection||(r.a.instance.events.addEventListener(E.a.CONNECTION_AUTHENTICATED,this.onConnectionAuthenticatedEvent),this._connection=this._communication.createConnection(this),this._connection.registerMessages(this._messages),this._connection.addEventListener(n.a.CONNECTION_OPENED,this.onConnectionOpenedEvent),this._connection.addEventListener(n.a.CONNECTION_CLOSED,this.onConnectionClosedEvent),this._connection.addEventListener(n.a.CONNECTION_ERROR,this.onConnectionErrorEvent),this._demo&&this._demo.init(),this._connection.init(r.a.instance.getConfiguration("socket.url")))}onDispose(){this._demo&&this._demo.dispose(),this._connection&&(this._connection.removeEventListener(n.a.CONNECTION_OPENED,this.onConnectionOpenedEvent),this._connection.removeEventListener(n.a.CONNECTION_CLOSED,this.onConnectionClosedEvent),this._connection.removeEventListener(n.a.CONNECTION_ERROR,this.onConnectionErrorEvent)),r.a.instance.events.removeEventListener(E.a.CONNECTION_AUTHENTICATED,this.onConnectionAuthenticatedEvent),super.onDispose()}onConnectionOpenedEvent(t){this.logger.log("Connection Initialized")}onConnectionClosedEvent(t){this.logger.log("Connection Closed")}onConnectionErrorEvent(t){this.logger.log("Connection Error")}onConnectionAuthenticatedEvent(t){this.logger.log("Connection Authenticated"),this._connection&&this._connection.authenticated()}connectionInit(t){this.logger.log("Initializing Connection: "+t)}registerMessageEvent(t){return this._connection&&this._connection.addMessageEvent(t),t}removeMessageEvent(t){this._connection&&this._connection.removeMessageEvent(t)}get demo(){return this._demo}get connection(){return this._connection}}},"0qJb":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(...t){this._data=[t.length,...t]}getMessageArray(){return this._data}dispose(){}}},"0wjC":function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("P5vI");class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._offerId=-1,this._localizationId=null,this._rent=!1,this._priceCredits=0,this._priceActivityPoints=0,this._priceActivityPointsType=0,this._clubLevel=0,this._giftable=!1,this._bundlePurchaseAllowed=!1,this._isPet=!1,this._previewImage=null,this._products=[],!0}parse(t){if(!t)return!1;this._offerId=t.readInt(),this._localizationId=t.readString(),this._rent=t.readBoolean(),this._priceCredits=t.readInt(),this._priceActivityPoints=t.readInt(),this._priceActivityPointsType=t.readInt(),this._giftable=t.readBoolean();let e=t.readInt();for(;e>0;)this._products.push(new i.a(t)),e--;return this._clubLevel=t.readInt(),this._bundlePurchaseAllowed=t.readBoolean(),this._isPet=t.readBoolean(),this._previewImage=t.readString(),!0}get offerId(){return this._offerId}get localizationId(){return this._localizationId}get rent(){return this._rent}get priceCredits(){return this._priceCredits}get priceActivityPoints(){return this._priceActivityPoints}get priceActivityPointsType(){return this._priceActivityPointsType}get clubLevel(){return this._clubLevel}get giftable(){return this._giftable}get bundlePurchaseAllowed(){return this._bundlePurchaseAllowed}get isPet(){return this._isPet}get previewImage(){return this._previewImage}get products(){return this._products}}},"1+1A":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._itemId=0,this._spriteId=0,this._location=null,this._stuffData=null,this._state=0,this._secondsToExpiration=0,this._usagePolicy=-1,this._userId=0,this._username=null,this._width=0,this._height=0,this._localX=0,this._localY=0,this._y=0,this._z=0,this._direction=null,this._Str_19875=!1,!0}parse(t){if(!t)return!1;this._itemId=parseInt(t.readString()),this._spriteId=t.readInt(),this._location=t.readString(),this._stuffData=t.readString(),this._secondsToExpiration=t.readInt(),this._usagePolicy=t.readInt(),this._userId=t.readInt(),this._username=null;const e=parseFloat(this._stuffData);if(isNaN(e)||(this._state=e),0===this._location.indexOf(":")){this._Str_19875=!1;let t=this._location.split(" ");if(t.length>=3){let e=t[0],s=t[1];const i=t[2];if(e.length>3&&s.length>2&&(e=e.substr(3),s=s.substr(2),t=e.split(","),t.length>=2)){const e=parseInt(t[0]),n=parseInt(t[1]);if(t=s.split(","),t.length>=2){const s=parseInt(t[0]),r=parseInt(t[1]);this._width=e,this._height=n,this._localX=s,this._localY=r,this._direction=i}}}}else this._Str_19875=!0;return!0}get itemId(){return this._itemId}get spriteId(){return this._spriteId}get wallPosition(){return this._location}get stuffData(){return this._stuffData}get state(){return this._state}get secondsToExpiration(){return this._secondsToExpiration}get usagePolicy(){return this._usagePolicy}get userId(){return this._userId}get username(){return this._username}set username(t){this._username=t}get width(){return this._width}get height(){return this._height}get localX(){return this._localX}get localY(){return this._localY}get direction(){return this._direction}get _Str_22379(){return this._Str_19875}}},"10Jd":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{get furniId(){return this._furniId}flush(){return this._furniId=-1,!0}parse(t){return this._furniId=t.readInt(),!0}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"10wl":function(t,e,s){"use strict";s.d(e,"a",function(){return c});var i=s("5+UO"),n=s("fFOI"),r=s("o/0e"),a=s("/FfH");class o{flush(){return this._roomEnter=!1,this._roomForward=!1,this._staffPick=!1,this._data=null,this._isGroupMember=!1,this._isMuted=!1,this._moderation=null,this._allowMuteAll=!1,this._chat=null,!0}parse(t){return!!t&&(this._roomEnter=t.readBoolean(),this._data=new r.a(t),this._roomForward=t.readBoolean(),this._staffPick=t.readBoolean(),this._isGroupMember=t.readBoolean(),this._isMuted=t.readBoolean(),this._moderation=new a.a(t),this._allowMuteAll=t.readBoolean(),this._chat=new n.a(t),!0)}get roomEnter(){return this._roomEnter}get roomForward(){return this._roomForward}get staffPick(){return this._staffPick}get data(){return this._data}get isGroupMember(){return this._isGroupMember}get isMuted(){return this._isMuted}get moderation(){return this._moderation}get allowMuteAll(){return this._allowMuteAll}get chat(){return this._chat}}class c extends i.a{constructor(t){super(t,o)}getParser(){return this.parser}}},"1QEa":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._isPlaying=!1,!0}parse(t){return!!t&&(this._isPlaying=t.readBoolean(),!0)}get isPlaying(){return this._isPlaying}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"1TD8":function(t,e,s){"use strict";s.d(e,"a",function(){return m});var i=s("vzKh"),n=s("vuPI"),r=s("lVe0");class a{constructor(){this._buffer=new Uint8Array}writeByte(t){const e=new Uint8Array(1);return e[0]=t,this.appendArray(e),this}writeBytes(t){const e=new Uint8Array(t);return this.appendArray(e),this}writeShort(t){const e=new Uint8Array(2);return e[0]=t>>8,e[1]=255&t,this.appendArray(e),this}writeInt(t){const e=new Uint8Array(4);return e[0]=t>>24,e[1]=t>>16,e[2]=t>>8,e[3]=255&t,this.appendArray(e),this}writeString(t,e=!0){const s=(new TextEncoder).encode(t);return e?(this.writeShort(s.length),this.appendArray(s)):this.appendArray(s),this}appendArray(t){if(!t)return;const e=new Uint8Array(this._buffer.length+t.length);e.set(this._buffer),e.set(t,this._buffer.length),this._buffer=e}getBuffer(){return this._buffer.buffer}toString(t){return new TextDecoder(t).decode(this._buffer)}}class o{constructor(t){this._value=t}get value(){return this._value}}class c{constructor(t){this._value=t}get value(){return this._value}}class _{constructor(t,e){this._header=t,this._buffer=e}readByte(){return this._buffer?this._buffer.readByte():-1}readBytes(t){return this._buffer?this._buffer.readBytes(t):null}readBoolean(){return 1===this.readByte()}readShort(){return this._buffer?this._buffer.readShort():-1}readInt(){return this._buffer?this._buffer.readInt():-1}readString(){const t=this.readShort();return this._buffer.readBytes(t).toString("utf8")}get header(){return this._header}get bytesAvailable(){return this._buffer&&this._buffer.remaining()>0}}class h{encode(t,e){const s=new a;s.writeShort(t);for(const n of e){let t=typeof n;switch("object"===t&&(null===n?t="null":n instanceof o?t="byte":n instanceof c&&(t="short")),t){case"null":s.writeShort(0);break;case"byte":s.writeByte(n.value);break;case"short":s.writeShort(n.value);break;case"number":s.writeInt(n);break;case"boolean":s.writeByte(n?1:0);break;case"string":n?s.writeString(n,!0):s.writeShort(0)}}const i=s.getBuffer();return i?(new a).writeInt(i.byteLength).writeBytes(i):null}decode(t){if(!t||!t.dataBuffer||!t.dataBuffer.byteLength)return null;const e=[];for(;t.dataBuffer.byteLength&&!(t.dataBuffer.byteLength<4);){const s=new r.a(t.dataBuffer),i=s.readInt();if(i>t.dataBuffer.byteLength-4)break;const n=s.readBytes(i);e.push(new _(n.readShort(),n)),t.dataBuffer=t.dataBuffer.slice(i+4)}return e}}var l=s("+IGW"),u=s("5+UO");class d{constructor(){this._messageIdByEvent=new Map,this._messageIdByComposer=new Map,this._messageInstancesById=new Map}dispose(){this._messageIdByEvent.clear(),this._messageIdByComposer.clear(),this._messageInstancesById.clear()}registerMessages(t){for(const[e,s]of t.events)this.registerMessageEventClass(e,s);for(const[e,s]of t.composers)this.registerMessageComposerClass(e,s)}registerMessageEventClass(t,e){t&&e&&(this._messageIdByEvent.get(e)||this._messageIdByEvent.set(e,t))}registerMessageComposerClass(t,e){t&&e&&(this._messageIdByComposer.get(e)||this._messageIdByComposer.set(e,t))}registerMessageEvent(t){if(!t)return;const e=this.getEventId(t);if(!e)return;let s=this._messageInstancesById.get(e);s&&s.length?t.parser=s[0].parser:(s=[],this._messageInstancesById.set(e,s),t.parser=new t.parserClass),s.push(t)}removeMessageEvent(t){if(!t)return;const e=this.getEventId(t);if(!e)return;const s=this._messageInstancesById.get(e);if(s)for(const[i,n]of s.entries())if(n&&n===t)return s.splice(i,1),0===s.length&&this._messageInstancesById.delete(e),void n.dispose()}getEvents(t){if(t)return this._messageInstancesById.get(t)||void 0}getEventId(t){return t&&this._messageIdByEvent.get(t instanceof u.a?t.constructor:t)||-1}getComposerId(t){return t&&this._messageIdByComposer.get(t.constructor)||-1}}let g=(()=>{class t{}return t.CONNECTION_OPENED="open",t.CONNECTION_CLOSED="close",t.CONNECTION_ERROR="error",t.CONNECTION_MESSAGE="message",t})(),m=(()=>{class t extends n.a{constructor(t,e){super(),this._communicationManager=t,this._stateListener=e,this._socket=null,this._messages=new d,this._codec=new h,this._dataBuffer=null,this._isReady=!1,this._pendingClientMessages=[],this._pendingServerMessages=[],this._isAuthenticated=!1,this.onOpen=this.onOpen.bind(this),this.onClose=this.onClose.bind(this),this.onError=this.onError.bind(this),this.onMessage=this.onMessage.bind(this)}init(t){this._stateListener&&this._stateListener.connectionInit(t),this.createSocket(t)}onDispose(){super.onDispose(),this.destroySocket(),this._communicationManager=null,this._stateListener=null,this._messages=null,this._codec=null,this._dataBuffer=null}onReady(){this._isReady||(this._isReady=!0,this._pendingServerMessages&&this._pendingServerMessages.length&&this.processWrappers(...this._pendingServerMessages),this._pendingClientMessages&&this._pendingClientMessages.length&&this.send(...this._pendingClientMessages),this._pendingServerMessages=[],this._pendingClientMessages=[])}createSocket(t){t&&(this.destroySocket(),this._dataBuffer=new ArrayBuffer(0),this._socket=new WebSocket(t),this._socket.addEventListener(g.CONNECTION_OPENED,this.onOpen),this._socket.addEventListener(g.CONNECTION_CLOSED,this.onClose),this._socket.addEventListener(g.CONNECTION_ERROR,this.onError),this._socket.addEventListener(g.CONNECTION_MESSAGE,this.onMessage))}destroySocket(){this._socket&&(this._socket.removeEventListener(g.CONNECTION_OPENED,this.onOpen),this._socket.removeEventListener(g.CONNECTION_CLOSED,this.onClose),this._socket.removeEventListener(g.CONNECTION_ERROR,this.onError),this._socket.removeEventListener(g.CONNECTION_MESSAGE,this.onMessage),this._socket.readyState===WebSocket.OPEN&&this._socket.close(),this._socket=null)}onOpen(t){this.dispatchConnectionEvent(l.a.CONNECTION_OPENED,t)}onClose(t){this.dispatchConnectionEvent(l.a.CONNECTION_CLOSED,t)}onError(t){this.dispatchConnectionEvent(l.a.CONNECTION_ERROR,t)}onMessage(t){if(!t)return;this.dispatchConnectionEvent(l.a.CONNECTION_MESSAGE,t);const e=new FileReader;e.readAsArrayBuffer(t.data),e.onloadend=()=>{this._dataBuffer=this.concatArrayBuffers(this._dataBuffer,e.result),this.processReceivedData()}}dispatchConnectionEvent(t,e){this.dispatchEvent(new l.a(t,this,e))}authenticated(){this._isAuthenticated=!0}send(...e){if(this.disposed||!e)return!1;if(e=[...e],this._isAuthenticated&&!this._isReady)return this._pendingClientMessages||(this._pendingClientMessages=[]),this._pendingClientMessages.push(...e),!1;for(const s of e){if(!s)continue;const e=this._messages.getComposerId(s);if(-1===e){i.a.log("Unknown Composer: "+s.constructor.name);continue}const n=s.getMessageArray(),r=this._codec.encode(e,n);r?(t.PACKET_LOG_ENABLED&&console.log(`OutgoingComposer: [${e}] ${s.constructor.name}`,n),this.write(r.getBuffer())):t.PACKET_LOG_ENABLED&&console.log("Encoding Failed: "+s.constructor.name)}return!0}write(t){this._socket.readyState===WebSocket.OPEN&&this._socket.send(t)}processReceivedData(){try{this.processData()}catch(t){i.a.log(t)}}processData(){const t=this.splitReceivedMessages();if(t&&t.length)return this._isAuthenticated&&!this._isReady?(this._pendingServerMessages||(this._pendingServerMessages=[]),void this._pendingServerMessages.push(...t)):void this.processWrappers(...t)}processWrappers(...e){if(e&&e.length)for(const s of e){if(!s)continue;const e=this.getMessagesForWrapper(s);e&&e.length&&(t.PACKET_LOG_ENABLED&&console.log(`IncomingMessage: [${s.header}] ${e[0].constructor.name}`,e[0].parser),this.handleMessages(...e))}}splitReceivedMessages(){return this._dataBuffer&&this._dataBuffer.byteLength?this._codec.decode(this):null}concatArrayBuffers(t,e){const s=new Uint8Array(t.byteLength+e.byteLength);return s.set(new Uint8Array(t),0),s.set(new Uint8Array(e),t.byteLength),s.buffer}getMessagesForWrapper(e){if(!e)return null;const s=this._messages.getEvents(e.header);if(s&&s.length){try{const t=s[0].parser;if(!t||!t.flush()||!t.parse(e))return null}catch(n){return i.a.log("Error parsing message: "+n,s[0].constructor.name),null}return s}t.PACKET_LOG_ENABLED&&console.log(`IncomingMessage: [${e.header}] NOT REGISTERED`,e)}handleMessages(...t){t=[...t];for(const e of t)e&&(e.connection=this,e.callBack&&e.callBack(e))}registerMessages(t){t&&this._messages.registerMessages(t)}addMessageEvent(t){t&&this._messages&&this._messages.registerMessageEvent(t)}removeMessageEvent(t){t&&this._messages&&this._messages.removeMessageEvent(t)}get isAuthenticated(){return this._isAuthenticated}get dataBuffer(){return this._dataBuffer}set dataBuffer(t){this._dataBuffer=t}}return t.PACKET_LOG_ENABLED=!1,t})()},"1cH2":function(t,e,s){"use strict";s.d(e,"a",function(){return l});var i=s("kiYJ"),n=s("Xr/m"),r=s("1TD8");class a extends n.a{constructor(){super(),this._connections=[]}onDispose(){if(this._connections&&this._connections.length)for(const t of this._connections.values())t&&t.dispose()}createConnection(t=null){const e=new r.a(this,t);if(e)return this._connections.push(e),e}update(t){let e=0;for(;e<this._connections.length;){const t=this._connections[e];if(t.processReceivedData(),this.disposed)return;t.disposed?this._connections.splice(e,1):e++}}}var o=s("Fv14"),c=s("hTzv"),_=s("C6IL");class h extends o.a{constructor(){super(),this._definitions=new c.a,this.onConfigurationLoaded=this.onConfigurationLoaded.bind(this)}onInit(){this.loadConfigurationFromUrl(NitroConfig.configurationUrl)}loadConfigurationFromUrl(t){if(!t||""===t)return void this.dispatchConfigurationEvent(_.a.FAILED);const e=new XMLHttpRequest;try{e.open("GET",t),e.onloadend=this.onConfigurationLoaded,e.onerror=this.onConfigurationFailed,e.send()}catch(s){this.logger.error(s)}}onConfigurationLoaded(t){t&&(this.parseConfiguration(t.target.response)?this.dispatchConfigurationEvent(_.a.LOADED):this.dispatchConfigurationEvent(_.a.FAILED))}onConfigurationFailed(t){this.dispatchConfigurationEvent(_.a.FAILED)}dispatchConfigurationEvent(t){this.events&&this.events.dispatchEvent(new _.a(t))}parseConfiguration(t){if(!t||""===t)return!1;try{const e=JSON.parse(t),s=new RegExp(/\${(.*?)}/g);for(const t in e){let i=e[t];"string"==typeof i&&(i=this.interpolate(i,s)),this._definitions.add(t,i)}return!0}catch(e){return this.logger.error(e.stack),!1}}interpolate(t,e=null){e||(e=new RegExp(/\${(.*?)}/g));const s=t.match(e);if(s&&s.length)for(const i of s){const e=this._definitions.getValue(this.removeInterpolateKey(i));e&&(t=t.replace(i,e))}return t}removeInterpolateKey(t){return t.replace("${","").replace("}","")}getValue(t,e=null){let s=this._definitions.getValue(t);return void 0===s&&(this.logger.warn("Missing configuration key: "+t),s=e),s}setValue(t,e){this._definitions.add(t,e)}}class l extends n.a{constructor(){super(),window.console.log.apply(console,["\n%c       _   ___ __              \n      / | / (_) /__________    \n     /  |/ / / __/ ___/ __ \\   \n    / /|  / / /_/ /  / /_/ /   \n   /_/ |_/_/\\__/_/   \\____/    \n                               \n Thanks for using Nitro        \n To report bugs or issues      \n join us on Discord            \n https://discord.gg/66UR68FPgy \n                               \n","color: #FFFFFF; background: #000000; padding:0px 0;"]),this._configuration=new h,this._communication=new a,this._asset=new i.a}onDispose(){this._asset&&(this._asset.dispose(),this._asset=null),this._communication&&(this._communication.dispose(),this._communication=null)}get configuration(){return this._configuration}get communication(){return this._communication}get asset(){return this._asset}}},"1mUs":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._figureSetIds=[],this._boundFurnitureNames=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._figureSetIds.push(t.readInt()),e--;let s=t.readInt();for(;s>0;)this._boundFurnitureNames.push(t.readString()),s--;return!0}get figureSetIds(){return this._figureSetIds}get boundsFurnitureNames(){return this._boundFurnitureNames}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"29Gn":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._info=null,!0}parse(t){return!!t&&(this._info=t.readString(),!0)}get info(){return this._info}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"2FAY":function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("WRyM");let n=(()=>{class t extends i.a{constructor(e,s,i){super(t.ANIMATE_ICON),this._image=e,this._x=s,this._y=i}get image(){return this._image}get x(){return this._x}get y(){return this._y}}return t.ANIMATE_ICON="NTAIE_ANIMATE_ICON",t})()},"2H63":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},"2L69":function(t,e,s){"use strict";s.d(e,"a",function(){return m});var i=s("XMGm"),n=s("MeCd"),r=s("KQk8");let a=(()=>{class t extends n.a{constructor(){super(),this._state="",this._hits=0,this._target=0}parseWrapper(t){t&&(this._state=t.readString(),this._hits=t.readInt(),this._target=t.readInt(),super.parseWrapper(t))}initializeFromRoomObjectModel(t){super.initializeFromRoomObjectModel(t),this._state=t.getValue(i.a.FURNITURE_CRACKABLE_STATE),this._hits=t.getValue(i.a.FURNITURE_CRACKABLE_HITS),this._target=t.getValue(i.a.FURNITURE_CRACKABLE_TARGET)}writeRoomObjectModel(e){super.writeRoomObjectModel(e),e.setValue(i.a.FURNITURE_DATA_FORMAT,t.FORMAT_KEY),e.setValue(i.a.FURNITURE_CRACKABLE_STATE,this._state),e.setValue(i.a.FURNITURE_CRACKABLE_HITS,this._hits),e.setValue(i.a.FURNITURE_CRACKABLE_TARGET,this._target)}getLegacyString(){return this._state}compare(t){return!0}get hits(){return this._hits}get target(){return this._target}}return t.FORMAT_KEY=r.a.CRACKABLE_KEY,t})(),o=(()=>{class t extends n.a{parseWrapper(t){t&&(this._state="",super.parseWrapper(t))}writeRoomObjectModel(e){super.writeRoomObjectModel(e),e.setValue(i.a.FURNITURE_DATA_FORMAT,t.FORMAT_KEY)}getLegacyString(){return this._state}compare(t){return super.compare(t)}}return t.FORMAT_KEY=r.a.EMPTY_KEY,t})();class c{constructor(){this._score=-1,this._users=[]}get score(){return this._score}set score(t){this._score=t}get users(){return this._users}set users(t){this._users=t}addUsername(t){this._users.push(t)}}let _=(()=>{class t extends n.a{constructor(){super(),this._state="",this._scoreType=-1,this._clearType=-1,this._entries=[]}parseWrapper(t){if(!t)return;this._state=t.readString(),this._scoreType=t.readInt(),this._clearType=t.readInt();let e=t.readInt();for(;e>0;){const s=new c;s.score=t.readInt();let i=t.readInt();for(;i>0;)s.addUsername(t.readString()),i--;this._entries.push(s),e--}super.parseWrapper(t)}initializeFromRoomObjectModel(t){this._scoreType=t.getValue(i.a.FURNITURE_HIGHSCORE_SCORE_TYPE),this._clearType=t.getValue(i.a.FURNITURE_HIGHSCORE_CLEAR_TYPE),this._entries=[];const e=t.getValue(i.a.FURNITURE_HIGHSCORE_DATA_ENTRY_COUNT);let s=0;for(;s<e;){const e=new c;e.score=t.getValue(i.a.FURNITURE_HIGHSCORE_DATA_ENTRY_BASE_SCORE_+s),e.users=t.getValue(i.a.FURNITURE_HIGHSCORE_DATA_ENTRY_BASE_USERS_+s),this._entries.push(e),s++}super.initializeFromRoomObjectModel(t)}writeRoomObjectModel(e){if(super.writeRoomObjectModel(e),e.setValue(i.a.FURNITURE_DATA_FORMAT,t.FORMAT_KEY),e.setValue(i.a.FURNITURE_HIGHSCORE_SCORE_TYPE,this._scoreType),e.setValue(i.a.FURNITURE_HIGHSCORE_CLEAR_TYPE,this._clearType),this._entries){e.setValue(i.a.FURNITURE_HIGHSCORE_DATA_ENTRY_COUNT,this._entries.length);let t=0;for(;t<this._entries.length;){const s=this._entries[t];e.setValue(i.a.FURNITURE_HIGHSCORE_DATA_ENTRY_BASE_SCORE_+t,s.score),e.setValue(i.a.FURNITURE_HIGHSCORE_DATA_ENTRY_BASE_USERS_+t,s.users),t++}}}getLegacyString(){return this._state}get entries(){return this._entries}}return t.FORMAT_KEY=r.a.HIGHSCORE_KEY,t})();var h=s("v12S"),l=s("tWLA"),u=s("uUF/"),d=s("PJfP"),g=s("VZrs");class m{static getData(t){let e=null;switch(255&t){case a.FORMAT_KEY:e=new a;break;case o.FORMAT_KEY:e=new o;break;case _.FORMAT_KEY:e=new _;break;case h.a.FORMAT_KEY:e=new h.a;break;case l.a.FORMAT_KEY:e=new l.a;break;case u.a.FORMAT_KEY:e=new u.a;break;case d.a.FORMAT_KEY:e=new d.a;break;case g.a.FORMAT_KEY:e=new g.a}return e?(e.flags=65280&t,e):null}}},"2Rep":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i,n){this._data=[t,e,s,i,n]}getMessageArray(){return this._data}dispose(){}}},"2y6h":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._credits=null,!0}parse(t){return!!t&&(this._credits=t.readString(),!0)}get credits(){return this._credits}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"38Mq":function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{static getTypeNumber(e){return t.AVATAR_TYPES[e]}static getTypeString(e){for(const s in t.AVATAR_TYPES)if(s&&t.AVATAR_TYPES[s]===e)return s;return null}static getRealType(e){switch(e){case t.BOT:case t.RENTABLE_BOT:return t.USER;default:return e}}}return t.USER="user",t.PET="pet",t.BOT="bot",t.RENTABLE_BOT="rentable_bot",t.MONSTER_PLANT="monsterplant",t.AVATAR_TYPES={user:1,pet:2,bot:3,rentable_bot:4},t})()},"3CL9":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){this._data=null}}},"3h45":function(t,e,s){"use strict";s.d(e,"a",function(){return fr});var i=s("IqKQ"),n=s("vzKh"),r=s("Fv14"),a=s("y81I");let o=(()=>{class t extends a.a{constructor(t,e,s,i=!1,n=!1,r=!1,a=!1){super(t,e),this._eventId="",this._eventId=s,this._altKey=i,this._ctrlKey=n,this._shiftKey=r,this._buttonDown=a}get eventId(){return this._eventId}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get shiftKey(){return this._shiftKey}get buttonDown(){return this._buttonDown}get localX(){return this._localX}set localX(t){this._localX=t}get localY(){return this._localY}set localY(t){this._localY=t}get spriteOffsetX(){return this._spriteOffsetX}set spriteOffsetX(t){this._spriteOffsetX=t}get spriteOffsetY(){return this._spriteOffsetY}set spriteOffsetY(t){this._spriteOffsetY=t}}return t.CLICK="ROE_MOUSE_CLICK",t.DOUBLE_CLICK="ROE_MOUSE_DOUBLE_CLICK",t.MOUSE_MOVE="ROE_MOUSE_MOVE",t.MOUSE_DOWN="ROE_MOUSE_DOWN",t.MOUSE_UP="ROE_MOUSE_UP",t.MOUSE_ENTER="ROE_MOUSE_ENTER",t.MOUSE_LEAVE="ROE_MOUSE_LEAVE",t})();class c{constructor(t,e){this._location=t,this._direction=e}get location(){return this._location}get direction(){return this._direction}}var _=s("P7Cj"),h=s("ySDW");class l{constructor(t,e,s,i,n,r,a=0,o=0,c=!1,_=!1,h=!1,l=!1){this._type=t,this._eventId=e,this._canvasId=s,this._spriteTag=i,this._screenX=n,this._screenY=r,this._localX=a,this._localY=o,this._ctrlKey=c,this._altKey=_,this._shiftKey=h,this._buttonDown=l,this._spriteOffsetX=0,this._spriteOffsetY=0}get type(){return this._type}get _Str_3463(){return this._eventId}get canvasId(){return this._canvasId}get spriteTag(){return this._spriteTag}get screenX(){return this._screenX}get screenY(){return this._screenY}get localX(){return this._localX}get localY(){return this._localY}get ctrlKey(){return this._ctrlKey}get altKey(){return this._altKey}get shiftKey(){return this._shiftKey}get buttonDown(){return this._buttonDown}get spriteOffsetX(){return this._spriteOffsetX}set spriteOffsetX(t){this._spriteOffsetX=t}get spriteOffsetY(){return this._spriteOffsetY}set spriteOffsetY(t){this._spriteOffsetY=t}}let u=(()=>{class t{}return t.DEFAULT=1,t._Str_8616=2,t._Str_11629=3,t._Str_10494=4,t})();var d=s("vqvB"),g=s("DACI"),m=s("DFHD"),p=s("kXXe");class f{constructor(t){this._roomObjectVariableAccurateZ=t||"",this._location=new m.a,this._screenLocation=new m.a,this._locationChanged=!1,this._geometryUpdateId=-1,this._objectUpdateId=-1}dispose(){this._screenLocation=null}updateLocation(t,e){if(!t||!e)return null;let s=!1;const i=t.getLocation();if(e.updateId===this._geometryUpdateId&&t.updateCounter===this._objectUpdateId||(this._objectUpdateId=t.updateCounter,e.updateId===this._geometryUpdateId&&i.x===this._location.x&&i.y===this._location.y&&i.z===this._location.z||(this._geometryUpdateId=e.updateId,this._location.assign(i),s=!0)),this._locationChanged=s,this._locationChanged){const s=e.getScreenPosition(i);if(!s)return null;const n=t.model.getValue(this._roomObjectVariableAccurateZ);if(isNaN(n)||0===n){const t=new m.a(Math.round(i.x),Math.round(i.y),i.z);if(t.x!==i.x||t.y!==i.y){const i=e.getScreenPosition(t);this._screenLocation.assign(s),i&&(this._screenLocation.z=i.z)}else this._screenLocation.assign(s)}else this._screenLocation.assign(s);this._screenLocation.x=Math.round(this._screenLocation.x),this._screenLocation.y=Math.round(this._screenLocation.y)}return this._screenLocation}get locationChanged(){return this._locationChanged}}class E{constructor(){this._sprites=[],this._updateId1=-1,this._updateId2=-1,this._isEmpty=!1}get _Str_3008(){return this._sprites.length}get isEmpty(){return this._isEmpty}dispose(){this._Str_20276(0)}_Str_12937(t){this._sprites.push(t)}_Str_2505(t){return this._sprites[t]}get _Str_9272(){return this._sprites}_Str_17574(t,e){return(t!==this._updateId1||e!==this._updateId2)&&(this._updateId1=t,this._updateId2=e,!0)}_Str_20276(t){if(t<this._sprites.length){let e=t;for(;e<this._sprites.length;){const t=this._sprites[e];t&&t.dispose(),e++}this._sprites.splice(t,this._sprites.length-t)}this._isEmpty=!this._sprites.length}}class S{constructor(t){this._location=new f(t),this._sprites=new E}get location(){return this._location}get sprites(){return this._sprites}dispose(){this._location&&(this._location.dispose(),this._location=null),this._sprites&&(this._sprites.dispose(),this._sprites=null)}get _Str_1577(){return this._objectId}set _Str_1577(t){this._objectId=t}}let I=(()=>{class t{constructor(t){this._data=new Map,this._roomObjectVariableAccurateZ=t}dispose(){if(this._data){for(const[t,e]of this._data.entries())e&&(this._data.delete(t),e.dispose());this._data=null}}getObjectCache(t){let e=this._data.get(t);return e||(e=new S(this._roomObjectVariableAccurateZ),this._data.set(t,e)),e}removeObjectCache(t){const e=this._data.get(t);e&&(this._data.delete(t),e.dispose())}getSortableSpriteList(){const e=[];for(const s of this._data.values()){if(!s)continue;const i=s.sprites&&s.sprites._Str_9272;if(i&&i.length)for(const n of i)if(n&&n.sprite.spriteType!==u._Str_8616&&""!==n.sprite.name){const i=new p.a;i.objectId=s._Str_1577,i.x=n.x,i.y=n.y,i.z=n.z,i.name=n.sprite.name||"",i.flipH=n.sprite.flipH,i.alpha=n.sprite.alpha,i.color=n.sprite.color.toString(),i.blendMode=n.sprite.blendMode.toString(),i.width=n.sprite.width,i.height=n.sprite.height,i.type=n.sprite.type,i.posture=n.sprite.posture;const r=this.isSkewedSprite(n.sprite);r&&(i.skew=n.sprite.direction%4==0?-.5:.5),(r||n.name.indexOf("%image.library.url%")>=0||n.name.indexOf("%group.badge.url%")>=0)&&i.width<=t.MAX_SIZE_FOR_AVG_COLOR&&i.height<=t.MAX_SIZE_FOR_AVG_COLOR&&0===n.sprite.name.indexOf("external_image_wallitem")&&(i.frame=!0),e.push(i)}}return e&&e.length?e:null}isSkewedSprite(t){return!!t.type&&(0===t.type.indexOf("external_image_wallitem")&&"THUMBNAIL"===t.tag||0===t.type.indexOf("guild_forum")&&"THUMBNAIL"===t.tag)}getPlaneSortableSprites(){const t=[];for(const e of this._data.values())for(const s of e.sprites._Str_9272)s.sprite.spriteType===u._Str_8616&&t.push(s);return t}}return t.MAX_SIZE_FOR_AVG_COLOR=200,t})();class R extends i.n{constructor(t=null){super(t),this._offsetX=0,this._offsetY=0,this._tag="",this._alphaTolerance=128,this._Str_8253=!1,this._clickHandling=!1,this._pairedSpriteId=-1,this._pairedSpriteUpdateCounter=-1}needsUpdate(t,e){return(this._pairedSpriteId!==t||this._pairedSpriteUpdateCounter!==e)&&(this._pairedSpriteId=t,this._pairedSpriteUpdateCounter=e,!0)}render(t){super.render(t)}setTexture(t){t||(t=i.p.EMPTY),t!==this.texture&&(t===i.p.EMPTY&&(this._pairedSpriteId=-1,this._pairedSpriteUpdateCounter=-1),this.texture=t)}containsPoint(t){return R.containsPoint(this,t)}static containsPoint(t,e){if(!t||!e||t.alphaTolerance>255)return!1;if(!(t instanceof i.n))return!1;if(t.texture===i.p.EMPTY||t.blendMode!==i.b.NORMAL)return;const s=t.texture,n=s.baseTexture;if(!s||!n||!n.valid)return!1;const r=e.x*t.scale.x,a=e.y*t.scale.y;if(!t.getLocalBounds().contains(r,a))return!1;if(!n.hitMap){let t=null;if(!n.resource)if(s.getLocalBounds)t=_.a.instance.renderer.extract.canvas(s);else{const e=i.n.from(s);t=_.a.instance.renderer.extract.canvas(e),e.destroy()}if(!R.generateHitMap(n,t))return!1}const o=n.hitMap,c=n.hitMapWidth,h=n.resolution,l=Math.round((r+s.frame.x)*h),u=4*(Math.round((a+s.frame.y)*h)*c+l);return void 0!==o[u+3]&&o[u+3]>t.alphaTolerance}static generateHitMap(t,e=null){let s=null,i=null;if(e)s=e,i=s.getContext("2d");else{if(!t.resource)return!1;const e=t.resource.source;if(!e)return!1;if(e.getContext)s=e,i=s.getContext("2d");else{if(!(e instanceof Image))return!1;s=document.createElement("canvas"),s.width=e.width,s.height=e.height,i=s.getContext("2d"),i.drawImage(e,0,0)}}const n=s.width,r=i.getImageData(0,0,n,s.height);return t.hitMap=r.data,t.hitMapWidth=n,!0}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t}get tag(){return this._tag}set tag(t){this._tag=t}get alphaTolerance(){return this._alphaTolerance}set alphaTolerance(t){this._alphaTolerance=t}get _Str_4593(){return this._Str_8253}set _Str_4593(t){this._Str_8253=t}get clickHandling(){return this._clickHandling}set clickHandling(t){this._clickHandling=t}}class b{constructor(){this._objectId="",this._spriteTag=""}get objectId(){return this._objectId}set objectId(t){this._objectId=t}get spriteTag(){return this._spriteTag}set spriteTag(t){this._spriteTag=t}}let v=(()=>{class t{constructor(){this._name="",this._sprite=null,this._x=0,this._y=0,this._z=0}dispose(){this._z=-t._Str_17154,this._sprite=null}get name(){return this._name}set name(t){this._name=t}get sprite(){return this._sprite}set sprite(t){this._sprite=t}get x(){return this._x}set x(t){this._x=t}get y(){return this._y}set y(t){this._y=t}get z(){return this._z}set z(t){this._z=t}}return t._Str_17154=1e8,t})();class T{constructor(t,e,s,n,r){this._id=e,this._container=t,this._geometry=new g.a(r,new m.a(-135,30,0),new m.a(11,11,5),new m.a(-135,.5,0)),this._renderTimestamp=0,this._master=null,this._display=null,this._mask=null,this._sortableSprites=[],this._spriteCount=0,this._activeSpriteCount=0,this._spritePool=[],this._skipObjectUpdate=!1,this._runningSlow=!1,this._width=0,this._height=0,this._renderedWidth=0,this._renderedHeight=0,this._screenOffsetX=0,this._screenOffsetY=0,this._mouseLocation=new i.j,this._mouseOldX=0,this._mouseOldY=0,this._mouseCheckCount=0,this._mouseSpriteWasHit=!1,this._mouseActiveObjects=new Map,this._eventCache=new Map,this._eventId=0,this._scale=1,this._restrictsScaling=!1,this._noSpriteVisibilityChecking=!1,this._usesExclusionRectangles=!1,this._usesMask=!0,this._canvasUpdated=!1,this._objectCache=new I(this._container.roomObjectVariableAccurateZ),this._mouseListener=null,this.setupCanvas(),this.initialize(s,n)}setupCanvas(){if(this._master||(this._master=new i.n,this._master.interactiveChildren=!1),!this._display){const t=new i.d;t.name="canvas",this._master.addChild(t),this._display=t}}dispose(){if(this._Str_20677(0,!0),this._geometry&&(this._geometry.dispose(),this._geometry=null),this._mask&&(this._mask=null),this._objectCache&&(this._objectCache.dispose(),this._objectCache=null),this._master){for(;this._master.children.length;)this._master.removeChildAt(0).destroy();this._master.parent&&this._master.parent.removeChild(this._master),this._master.destroy(),this._master=null}if(this._display=null,this._sortableSprites=[],this._mouseActiveObjects&&(this._mouseActiveObjects.clear(),this._mouseActiveObjects=null),this._spritePool){for(const t of this._spritePool)this._Str_21974(t,!0);this._spritePool=[]}this._eventCache&&(this._eventCache.clear(),this._eventCache=null),this._mouseListener=null}initialize(t,e){if(t=t<1?1:t,e=e<1?1:e,this._usesMask&&(this._mask?this._mask.clear().beginFill(16711680).drawRect(0,0,t,e).endFill():(this._mask=(new i.f).beginFill(16711680).drawRect(0,0,t,e).endFill(),this._mask.name="mask",this._master&&(this._master.addChild(this._mask),this._display&&(this._display.mask=this._mask)))),this._master){if(this._master.hitArea){const s=this._master.hitArea;s.width=t,s.height=e}else this._master.hitArea=new i.k(0,0,t,e);if(this._master.filterArea){const s=this._master.filterArea;s.width=t,s.height=e}else this._master.filterArea=new i.k(0,0,t,e)}this._width=t,this._height=e}setMask(t){t&&!this._usesMask?(this._usesMask=!0,this._mask&&this._mask.parent!==this._master&&(this._master.addChild(this._mask),this._display.mask=this._mask)):!t&&this._usesMask&&(this._usesMask=!1,this._mask&&this._mask.parent===this._master&&(this._master.removeChild(this._mask),this._display.mask=null))}setScale(t,e=null,s=null,n=!1,r=!1){this._master&&this._display&&(this._restrictsScaling&&!n||(e||(e=new i.j(this._width/2,this._height/2)),s||(s=e),e=this._display.toLocal(e),r?this._scale*=t:this._scale=t,this.screenOffsetX=s.x-e.x*this._scale,this.screenOffsetY=s.y-e.y*this._scale))}render(t,e=!1){if(this._canvasUpdated=!1,-1===t&&(t=this._renderTimestamp+1),!this._container||!this._geometry)return;if(t===this._renderTimestamp)return;this._width===this._renderedWidth&&this._height===this._renderedHeight||(e=!0),this._display.x===this._screenOffsetX&&this._display.y===this._screenOffsetY||(this._display.x=this._screenOffsetX,this._display.y=this._screenOffsetY,e=!0),this._display.scale.x!==this._scale&&(this._display.scale.set(this._scale),e=!0);let s=0;const i=this._container.objects;if(i.size)for(const r of i.values())r&&(s+=this.renderObject(r,r.instanceId.toString(),t,e,s));this._sortableSprites.sort((t,e)=>e.z-t.z),s<this._sortableSprites.length&&this._sortableSprites.splice(s);let n=0;for(;n<s;){const t=this._sortableSprites[n];t&&t.sprite&&this.renderSprite(n,t),n++}this._Str_20677(s),e&&(this._canvasUpdated=!0),this._renderTimestamp=t,this._renderedWidth=this._width,this._renderedHeight=this._height}_Str_20787(){this._noSpriteVisibilityChecking=!0,this.render(-1,!0)}_Str_22174(){this._noSpriteVisibilityChecking=!1}getSortableSpriteList(){return this._objectCache.getSortableSpriteList()}_Str_14588(){return this._objectCache.getPlaneSortableSprites()}removeFromCache(t){this._objectCache.removeObjectCache(t)}renderObject(t,e,s,i,n){if(!t)return 0;const r=t.visualization;if(!r)return this.removeFromCache(e),0;const a=this.getCacheItem(e);a._Str_1577=t.instanceId;const o=a.location,c=a.sprites,_=o.updateLocation(t,this._geometry);if(!_)return this.removeFromCache(e),0;if(r.update(this._geometry,s,!c.isEmpty||i,this._skipObjectUpdate&&this._runningSlow),o.locationChanged&&(i=!0),!c._Str_17574(r.instanceId,r.updateSpriteCounter)&&!i)return c._Str_3008;let h=_.x,l=_.y,d=_.z;d+=h>0?12e-8*h:12e-8*-h,h+=Math.trunc(this._width/2),l+=Math.trunc(this._height/2);let g=0;for(const m of r.sprites.values()){if(!m||!m.visible)continue;const s=m.texture,i=s&&s.baseTexture;if(!s||!i)continue;const r=h+m.offsetX+this._screenOffsetX,a=l+m.offsetY+this._screenOffsetY;if(m.flipH){if(!this.isSpriteVisible(h+-(s.width+-m.offsetX)+this._screenOffsetX,a,s.width,s.height))continue}else if(m.flipV){if(!this.isSpriteVisible(r,l+-(s.height+-m.offsetY)+this._screenOffsetY,s.width,s.height))continue}else if(!this.isSpriteVisible(r,a,s.width,s.height))continue;let o=c._Str_2505(g);o||(o=new v,c._Str_12937(o),this._sortableSprites.push(o),o.name=e),o.sprite=m,m.spriteType!==u._Str_11629&&m.spriteType!==u._Str_10494||(o.sprite._Str_3582="avatar_"+t.id),o.x=r-this._screenOffsetX,o.y=a-this._screenOffsetY,o.z=d+m.relativeDepth+37e-12*n,g++,n++}return c._Str_20276(g),this._canvasUpdated=!0,g}getExtendedSprite(t){return t<0||t>=this._spriteCount?null:this._display.getChildAt(t)||null}getExtendedSpriteIdentifier(t){return t?t.name:""}renderSprite(t,e){if(t>=this._spriteCount)return this.createAndAddSprite(e),!0;if(!e)return!1;const s=e.sprite,i=this.getExtendedSprite(t);if(!s||!i)return!1;if(i._Str_4593!==s._Str_4593)return i._Str_4593&&!s._Str_4593?(this._display.removeChildAt(t),this._spritePool.push(i),this.renderSprite(t,e)):(this.createAndAddSprite(e,t),!0);if(i.needsUpdate(s.id,s.updateCounter)||d.a.isVisualizationOn()){i.tag=s.tag,i.alphaTolerance=s.alphaTolerance,i.name=e.name,i._Str_4593=s._Str_4593,i.clickHandling=s.clickHandling,i.filters=s.filters;const t=s.alpha/255;i.alpha!==t&&(i.alpha=t),i.tint!==s.color&&(i.tint=s.color),i.blendMode!==s.blendMode&&(i.blendMode=s.blendMode),i.texture!==s.texture&&i.setTexture(s.texture),s.updateContainer&&(1===i.children.length&&i.removeChildAt(0),i.addChild(s.container),s.updateContainer=!1),s.flipH?-1!==i.scale.x&&(i.scale.x=-1):1!==i.scale.x&&(i.scale.x=1),s.flipV?-1!==i.scale.y&&(i.scale.y=-1):1!==i.scale.y&&(i.scale.y=1),this._Str_21914(i,s)}return i.x!==e.x&&(i.x=e.x),i.y!==e.y&&(i.y=e.y),i.offsetX=s.offsetX,i.offsetY=s.offsetY,!0}createAndAddSprite(t,e=-1){const s=t.sprite;if(!s)return;let i=null;this._spritePool.length>0&&(i=this._spritePool.pop()),i||(i=new R),i.children.length&&i.removeChildren(),i.tag=s.tag,i.alphaTolerance=s.alphaTolerance,i.alpha=s.alpha/255,i.tint=s.color,i.x=t.x,i.y=t.y,i.offsetX=s.offsetX,i.offsetY=s.offsetY,i.name=s.name,i._Str_4593=s._Str_4593,i.clickHandling=s.clickHandling,i.blendMode=s.blendMode,i.filters=s.filters,i.setTexture(s.texture),s.updateContainer&&(i.addChild(s.container),s.updateContainer=!1),s.flipH&&(i.scale.x=-1),s.flipV&&(i.scale.y=-1),this._Str_21914(i,s),e<0||e>=this._spriteCount?(this._display.addChild(i),this._spriteCount++):this._display.addChildAt(i,e),this._activeSpriteCount++}_Str_20677(t,e=!1){if(this._display){if(t<0&&(t=0),t<this._activeSpriteCount||!this._activeSpriteCount){let s=this._spriteCount-1;for(;s>=t;)this._Str_21974(this.getExtendedSprite(s),e),s--}this._activeSpriteCount=t}}_Str_21914(t,e){if(d.a.isVisualizationOn()&&e)switch(e.spriteType){case u._Str_10494:return;case u._Str_8616:return void(t.alpha=d.a.getDelta(.9));case u._Str_11629:return void(t.alpha=d.a.getDelta(.5));default:t.alpha=d.a.getDelta(.1)}}_Str_21974(t,e){t&&(e?(t.parent&&t.parent.removeChild(t),t.destroy({children:!0})):t.setTexture(null))}update(){this._mouseCheckCount=0,this._eventId++}setMouseListener(t){this._mouseListener=t}getCacheItem(t){return this._objectCache.getObjectCache(t)}isSpriteVisible(t,e,s,i){return!!this._noSpriteVisibilityChecking||(e=(e-this._screenOffsetY)*this._scale+this._screenOffsetY,(t=(t-this._screenOffsetX)*this._scale+this._screenOffsetX)<this._width&&t+(s*=this._scale)>=0&&e<this._height&&e+(i*=this._scale)>=0&&!this._usesExclusionRectangles)}_Str_21232(t,e,s,i,n,r,a){return e-=this._screenOffsetY,this._mouseLocation.x=(t-=this._screenOffsetX)/this._scale,this._mouseLocation.y=e/this._scale,this._mouseCheckCount>0&&s==h.a.MOUSE_MOVE||(this._mouseSpriteWasHit=this._Str_19207(Math.trunc(t/this._scale),Math.trunc(e/this._scale),s,i,n,r,a),this._mouseCheckCount++),this._mouseSpriteWasHit}_Str_19207(t,e,s,n=!1,r=!1,a=!1,o=!1){const c=[];let _=!1,l=null,u=this._activeSpriteCount-1;for(;u>=0;){const d=this.getExtendedSprite(u);if(d&&d.containsPoint(new i.j(t-d.x,e-d.y))&&(!d.clickHandling||s!==h.a.MOUSE_CLICK&&s!==h.a.DOUBLE_CLICK)){const i=this.getExtendedSpriteIdentifier(d);if(-1===c.indexOf(i)){const _=d.tag;let u=this._mouseActiveObjects.get(i);u&&u.spriteTag!==_&&(l=this._Str_11609(0,0,0,0,h.a.ROLL_OUT,u.spriteTag,n,r,a,o),this._Str_14715(l,i)),s!==h.a.MOUSE_MOVE||u&&u.spriteTag===_?(l=this._Str_11609(t,e,t-d.x,e-d.y,s,_,n,r,a,o),l.spriteOffsetX=d.offsetX,l.spriteOffsetY=d.offsetY):l=this._Str_11609(t,e,t-d.x,e-d.y,h.a.ROLL_OVER,_,n,r,a,o),u||(u=new b,u.objectId=i,this._mouseActiveObjects.set(i,u)),u.spriteTag=_,s===h.a.MOUSE_MOVE&&t===this._mouseOldX&&e===this._mouseOldY||this._Str_14715(l,i),c.push(i)}_=!0}u--}const d=[];for(const i of this._mouseActiveObjects.keys())i&&d.push(i);let g=0;for(;g<d.length;)c.indexOf(d[g])>=0&&(d[g]=null),g++;for(g=0;g<d.length;){const t=d[g];if(null!==t){const e=this._mouseActiveObjects.get(t);e&&this._mouseActiveObjects.delete(t);const s=this._Str_11609(0,0,0,0,h.a.ROLL_OUT,e.spriteTag,n,r,a,o);this._Str_14715(s,t)}g++}return this._Str_20604(),this._mouseOldX=t,this._mouseOldY=e,_}_Str_11609(t,e,s,i,n,r,a,o,c,_){const h="canvas_"+this._id;return new l(n,h+"_"+this._eventId,h,r,t-this._width/2,e-this._height/2,s,i,o,a,c,_)}_Str_14715(t,e){t&&this._eventCache&&(this._eventCache.delete(e),this._eventCache.set(e,t))}_Str_20604(){if(this._container&&this._eventCache){for(const[t,e]of this._eventCache.entries()){if(!this._eventCache)return;if(!e)continue;const s=this._container.getRoomObject(parseInt(t));if(s)if(this._mouseListener)this._mouseListener._Str_20330(e,s,this._geometry);else{const t=s.mouseHandler;t&&t.mouseEvent(e,this._geometry)}}this._eventCache&&this._eventCache.clear()}}getDisplayAsTexture(){this._noSpriteVisibilityChecking=!0;const t=this._scale,e=this._screenOffsetX,s=this._screenOffsetY;this.setScale(1,null,null,!0),this._screenOffsetX=0,this._screenOffsetY=0,this.render(-1,!0);const n=this._display.getBounds(),r=i.l.create({width:this._display.width,height:this._display.height});return _.a.instance.renderer.render(this._display,r,!0,new i.i(1,0,0,1,-n.x,-n.y)),this._noSpriteVisibilityChecking=!1,this.setScale(t,null,null,!0),this._screenOffsetX=e,this._screenOffsetY=s,r}get id(){return this._id}get geometry(){return this._geometry}get master(){return this._master}get display(){return this._display}get screenOffsetX(){return this._screenOffsetX}set screenOffsetX(t){t=Math.trunc(t),this._mouseLocation.x=this._mouseLocation.x-(t-this._screenOffsetX),this._screenOffsetX=t}get screenOffsetY(){return this._screenOffsetY}set screenOffsetY(t){t=Math.trunc(t),this._mouseLocation.y=this._mouseLocation.y-(t-this._screenOffsetY),this._screenOffsetY=t}get scale(){return this._scale}get width(){return this._width*this._scale}get height(){return this._height*this._scale}get restrictsScaling(){return this._restrictsScaling}set restrictsScaling(t){this._restrictsScaling=t}get canvasUpdated(){return this._canvasUpdated}}class O{constructor(){this._objects=new Map,this._canvases=new Map,this._disposed=!1,this._roomObjectVariableAccurateZ=null}dispose(){if(!this._disposed){if(this._canvases){for(const[t,e]of this._canvases.entries())this._canvases.delete(t),e&&e.dispose();this._canvases=null}this._objects&&(this._objects=null),this._disposed=!0}}reset(){this._objects.clear()}getInstanceId(t){return t?t.instanceId:-1}getRoomObject(t){return this._objects.get(t)}addObject(t){t&&this._objects.set(this.getInstanceId(t),t)}removeObject(t){const e=this.getInstanceId(t);this._objects.delete(e);for(const s of this._canvases.values())s&&s.removeFromCache(e.toString())}render(t,e=!1){if(this._canvases&&this._canvases.size)for(const s of this._canvases.values())s&&s.render(t,e)}update(t,e=!1){if(this._canvases&&this._canvases.size){this.render(t,e);for(const t of this._canvases.values())t&&t.update()}}getCanvas(t){const e=this._canvases.get(t);if(e)return e}createCanvas(t,e,s,i){const n=this._canvases.get(t);if(n)return n.initialize(e,s),n.geometry&&(n.geometry.scale=i),n;const r=this.createSpriteCanvas(t,e,s,i);return r?(this._canvases.set(t,r),r):void 0}createSpriteCanvas(t,e,s,i){return new T(this,t,e,s,i)}removeCanvas(t){const e=this._canvases.get(t);e&&(this._canvases.delete(t),e.dispose())}get objects(){return this._objects}get disposed(){return this._disposed}get roomObjectVariableAccurateZ(){return this._roomObjectVariableAccurateZ}set roomObjectVariableAccurateZ(t){this._roomObjectVariableAccurateZ=t}}class y{createRenderer(){return new O}}class A{constructor(t){t<0&&(t=0),this._reservedNumbers=[],this._freeNumbers=[];let e=0;for(;e<t;)this._freeNumbers.push(e),e++}dispose(){this._reservedNumbers=null,this._freeNumbers=null}_Str_19709(){if(this._freeNumbers.length>0){const t=this._freeNumbers.pop();return this._reservedNumbers.push(t),t}return-1}_Str_15187(t){const e=this._reservedNumbers.indexOf(t);e>=0&&(this._reservedNumbers.splice(e,1),this._freeNumbers.push(t))}}var C=s("Ays+"),M=s("mP1c"),U=s("2FAY"),D=s("9vQN"),w=s("JKJw"),N=s("Ns5P");let L=(()=>{class t{static isBuilderClubId(e){return e>=t.BUILDER_CLUB_FURNI_ID_BASE}}return t.BUILDER_CLUB_FURNI_ID_BASE=2147418112,t})();var x=s("ZWGQ"),P=s("G0tw"),F=s("Hs+C");let k=(()=>{class t extends a.a{}return t.DICE_OFF="ROFCAE_DICE_OFF",t.DICE_ACTIVATE="ROFCAE_DICE_ACTIVATE",t.USE_HABBOWHEEL="ROFCAE_USE_HABBOWHEEL",t.STICKIE="ROFCAE_STICKIE",t.ENTER_ONEWAYDOOR="ROFCAE_ENTER_ONEWAYDOOR",t.SOUND_MACHINE_INIT="ROFCAE_SOUND_MACHINE_INIT",t.SOUND_MACHINE_START="ROFCAE_SOUND_MACHINE_START",t.SOUND_MACHINE_STOP="ROFCAE_SOUND_MACHINE_STOP",t.SOUND_MACHINE_DISPOSE="ROFCAE_SOUND_MACHINE_DISPOSE",t.JUKEBOX_INIT="ROFCAE_JUKEBOX_INIT",t.JUKEBOX_START="ROFCAE_JUKEBOX_START",t.JUKEBOX_MACHINE_STOP="ROFCAE_JUKEBOX_MACHINE_STOP",t.JUKEBOX_DISPOSE="ROFCAE_JUKEBOX_DISPOSE",t.MOUSE_BUTTON="ROFCAE_MOUSE_BUTTON",t.MOUSE_ARROW="ROFCAE_MOUSE_ARROW",t})();var W=s("3r1x");class V extends W.a{constructor(t){super(t)}}let G=(()=>{class t extends V{constructor(t,e){super(t),this._targetLocation=e}get targetLocation(){return this._targetLocation}}return t.ROAME_MOVE_TO="ROAME_MOVE_TO",t})();var H=s("IxQr");class B{constructor(){this.id=0,this.data=null,this.image=null}getImage(){return this.image?this.image:this.data?H.a.generateImage(this.data):null}}class j extends c{constructor(){super(null,null)}}class K extends j{constructor(t,e){super(),this._itemType=t,this._itemName=e}get itemType(){return this._itemType}get itemName(){return this._itemName}}class z extends j{constructor(t=0){super(),this._numberOfWords=t}get numberOfWords(){return this._numberOfWords}}class Y extends j{constructor(t=0){super(),this._danceStyle=t}get danceStyle(){return this._danceStyle}}class X extends j{constructor(t,e=0){super(),this._effect=t,this._delayMilliseconds=e}get effect(){return this._effect}get delayMilliseconds(){return this._delayMilliseconds}}class Z extends j{constructor(t){super(),this._gainedExperience=t}get gainedExperience(){return this._gainedExperience}}class q extends j{constructor(t=0){super(),this._expressionType=t}get expressionType(){return this._expressionType}}class Q extends j{constructor(t,e=null,s=null,i=!1){super(),this._figure=t,this._gender=e,this._subType=s,this._isRiding=i}get figure(){return this._figure}get gender(){return this._gender}get subType(){return this._subType}get isRiding(){return this._isRiding}}class J extends j{constructor(t=0){super(),this._level=t}get level(){return this._level}}class $ extends j{constructor(t=0){super(),this._gesture=t}get gesture(){return this._gesture}}class tt extends j{constructor(t){super(),this._guideStatus=t}get guideStatus(){return this._guideStatus}}class et extends j{constructor(t=!1){super(),this._isMuted=t}get isMuted(){return this._isMuted}}class st extends j{}class it extends j{constructor(t){super(),this._gesture=t}get gesture(){return this._gesture}}class nt extends j{constructor(t){super(),this._value=t}get value(){return this._value}}class rt extends j{constructor(t){super(),this._isPlayingGame=t}get isPlayingGame(){return this._isPlayingGame}}class at extends j{constructor(t,e=""){super(),this._postureType=t,this._parameter=e}get postureType(){return this._postureType}get parameter(){return this._parameter}}class ot extends j{constructor(t=0){super(),this._signType=t}get signType(){return this._signType}}class ct extends j{constructor(t=!1){super(),this._isSleeping=t}get isSleeping(){return this._isSleeping}}class _t extends j{constructor(t=!1){super(),this._isTyping=t}get isTyping(){return this._isTyping}}class ht extends c{constructor(t,e,s,i=!1){super(t,s),this._targetLocation=e,this._isSlide=i}get targetLocation(){return this._targetLocation?this._targetLocation:this.location}get isSlide(){return this._isSlide}}class lt extends ht{constructor(t,e,s,i,n,r){super(t,e,s),this._headDirection=i,this._canStandUp=n,this._baseY=r}get headDirection(){return this._headDirection}get canStandUp(){return this._canStandUp}get baseY(){return this._baseY}}class ut extends j{constructor(t){super(),this._itemType=t}get itemType(){return this._itemType}}class dt extends c{constructor(t,e,s=NaN){super(null,null),this._state=t,this._data=e,this._extra=s}get state(){return this._state}get data(){return this._data}get extra(){return this._extra}}let gt=(()=>{class t extends c{constructor(t,e){super(null,null),this._badgeId=t,this._assetName=e}get badgeId(){return this._badgeId}get assetName(){return this._assetName}}return t.BADGE_LOADED="ROGBUM_BADGE_LOADED",t})();class mt extends c{constructor(t,e,s){super(t,e),this._height=s}get height(){return this._height}}class pt extends c{constructor(t){super(null,null),this._data=t}get data(){return this._data}}let ft=(()=>{class t extends c{constructor(t,e,s,i){super(null,null),this._type=t,this._color=e,this._light=s,this._backgroundOnly=i}get type(){return this._type}get color(){return this._color}get light(){return this._light}get backgroundOnly(){return this._backgroundOnly}}return t.BACKGROUND_COLOR="RORCUM_BACKGROUND_COLOR",t})(),Et=(()=>{class t extends c{constructor(t,e,s=0,i=0,n=0,r=0){super(null,null),this._type=t,this._id=e,this._x=s,this._y=i,this._width=n,this._height=r}get type(){return this._type}get id(){return this._id}get x(){return this._x}get y(){return this._y}get width(){return this._width}get height(){return this._height}}return t.ADD="ORPFHUM_ADD",t.REMOVE="ORPFHUM_REMOVE",t})(),St=(()=>{class t extends c{constructor(t,e,s=null,i=null,n="window"){super(null,null),this._type=t,this._maskId=e,this._maskType=s,this._maskLocation=i?new m.a(i.x,i.y,i.z):null,this._maskCategory=n}get type(){return this._type}get maskId(){return this._maskId}get maskType(){return this._maskType}get maskLocation(){return this._maskLocation}get maskCategory(){return this._maskCategory}}return t.ADD_MASK="RORMUM_ADD_MASK",t._Str_10260="RORMUM_ADD_MASK",t.DOOR="door",t.WINDOW="window",t.HOLE="hole",t})(),It=(()=>{class t extends c{constructor(t,e){super(null,null),this._type=t,this._value=e}get type(){return this._type}get value(){return this._value}}return t.WALL_THICKNESS="RORPPUM_WALL_THICKNESS",t.FLOOR_THICKNESS="RORPVUM_FLOOR_THICKNESS",t})(),Rt=(()=>{class t extends c{constructor(t,e){super(null,null),this._type=t,this._visible=e}get type(){return this._type}get visible(){return this._visible}}return t.WALL_VISIBILITY="RORPVUM_WALL_VISIBILITY",t.FLOOR_VISIBILITY="RORPVUM_FLOOR_VISIBILITY",t})(),bt=(()=>{class t extends c{constructor(t,e){super(null,null),this._type=t,this._value=e}get type(){return this._type}get value(){return this._value}}return t.ROOM_WALL_UPDATE="RORUM_ROOM_WALL_UPDATE",t.ROOM_FLOOR_UPDATE="RORUM_ROOM_FLOOR_UPDATE",t.ROOM_LANDSCAPE_UPDATE="RORUM_ROOM_LANDSCAPE_UPDATE",t})();var vt=s("2L69"),Tt=s("v12S"),Ot=s("HqZk"),yt=s("38Mq"),At=s("XMGm"),Ct=s("IqYK"),Mt=s("hTzv");let Ut=(()=>{class t{}return t._Str_16646=-1,t._Str_9735=128,t._Str_9268=256,t})(),Dt=(()=>{class t{constructor(){this._id=t.SPRITE_COUNTER++,this._name="",this._type="",this._spriteType=u.DEFAULT,this._texture=null,this._container=null,this._width=0,this._height=0,this._offsetX=0,this._offsetY=0,this._flipH=!1,this._flipV=!1,this._direction=0,this._alpha=255,this._blendMode=i.b.NORMAL,this._color=16777215,this._relativeDepth=0,this._Str_8253=!1,this._Str_11397="",this._clickHandling=!1,this._visible=!0,this._tag="",this._posture=null,this._alphaTolerance=Ut._Str_9735,this._filters=[],this._updateCounter=0,this._updateContainer=!1}dispose(){this._texture=null,this._width=0,this._height=0}get id(){return this._id}set id(t){this._id=t}get name(){return this._name}set name(t){this._name!==t&&(this._name=t,this._updateCounter++)}get type(){return this._type}set type(t){this._type=t}get spriteType(){return this._spriteType}set spriteType(t){this._spriteType=t}get texture(){return this._texture}set texture(t){this._texture!==t&&(t&&(this._width=t.width,this._height=t.height),this._texture=t,this._updateCounter++)}get container(){return this._container}set container(t){this._container!==t&&(this.texture=i.p.EMPTY,t&&(this._width=t.width,this._height=t.height),this._container=t,this._updateCounter++,this._updateContainer=!0)}get width(){return this._width}get height(){return this._height}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX!==t&&(this._offsetX=t,this._updateCounter++)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY!==t&&(this._offsetY=t,this._updateCounter++)}get flipH(){return this._flipH}set flipH(t){this._flipH!==t&&(this._flipH=t,this._updateCounter++)}get flipV(){return this._flipV}set flipV(t){this._flipV!==t&&(this._flipV=t,this._updateCounter++)}get direction(){return this._direction}set direction(t){this._direction=t}get alpha(){return this._alpha}set alpha(t){this._alpha!==(t&=255)&&(this._alpha=t,this._updateCounter++)}get blendMode(){return this._blendMode}set blendMode(t){this._blendMode!==t&&(this._blendMode=t,this._updateCounter++)}get color(){return this._color}set color(t){this._color!==(t&=16777215)&&(this._color=t,this._updateCounter++)}get relativeDepth(){return this._relativeDepth}set relativeDepth(t){this._relativeDepth!==t&&(this._relativeDepth=t,this._updateCounter++)}get _Str_4593(){return this._Str_8253}set _Str_4593(t){t!==this._Str_8253&&(this._Str_8253=t,this._updateCounter++)}get _Str_3582(){return this._Str_11397}set _Str_3582(t){this._Str_11397=t}get clickHandling(){return this._clickHandling}set clickHandling(t){this._clickHandling=t}get visible(){return this._visible}set visible(t){this._visible!==t&&(this._visible=t,this._updateCounter++)}get tag(){return this._tag}set tag(t){this._tag!==t&&(this._tag=t,this._updateCounter++)}get posture(){return this._posture}set posture(t){this._posture!==t&&(this._posture=t,this._updateCounter++)}get alphaTolerance(){return this._alphaTolerance}set alphaTolerance(t){this._alphaTolerance!==t&&(this._alphaTolerance=t,this._updateCounter++)}get filters(){return this._filters}set filters(t){this._filters=t,this._updateCounter++}get updateCounter(){return this._updateCounter}get updateContainer(){return this._updateContainer}set updateContainer(t){this._updateContainer=t}}return t.SPRITE_COUNTER=0,t})(),wt=(()=>{class t{constructor(){this._id=t.VISUALIZATION_COUNTER++,this._object=null,this._asset=null,this._sprites=[],this._scale=-1,this._updateObjectCounter=-1,this._updateModelCounter=-1,this._updateSpriteCounter=-1}initialize(t){return!1}update(t,e,s,i){}reset(){this._scale=-1}dispose(){if(this._sprites){for(;this._sprites.length;){const t=this._sprites[0];t&&t.dispose(),this._sprites.pop()}this._sprites=null}this._object=null,this._asset=null}getSprite(t){return t>=0&&t<this._sprites.length?this._sprites[t]:null}getSpriteList(){return null}createSprite(){return this.createSpriteAtIndex(this._sprites.length)}createSpriteAtIndex(t){const e=new Dt;return t>=this._sprites.length?this._sprites.push(e):this._sprites.splice(t,0,e),e}setSpriteCount(t){for(;this._sprites.length>t;){const t=this._sprites[this._sprites.length-1];t&&t.dispose(),this._sprites.pop()}for(;this._sprites.length<t;)this._sprites.push(new Dt)}get image(){return this.getImage(0,-1)}getImage(t,e){const s=this.getBoundingRectangle();if(s.width*s.height==0)return null;const n=this.totalSprites,r=[];let a=0;for(;a<n;){const t=this.getSprite(a);t&&t.visible&&t.texture&&r.push(t),a++}r.sort((t,e)=>e.relativeDepth-t.relativeDepth);const o=new i.d;for(a=0;a<r.length;){const t=r[a],e=t.texture;if(e){const s=i.n.from(e);s.alpha=t.alpha/255,s.tint=t.color,s.x=t.offsetX,s.y=t.offsetY,s.blendMode=t.blendMode,s.filters=t.filters,t.flipH&&(s.scale.x=-1),t.flipV&&(s.scale.y=-1),o.addChild(s)}a++}return H.a.generateTexture(o)||null}getBoundingRectangle(){const t=this.totalSprites,e=new i.k;let s=0;for(;s<t;){const t=this.getSprite(s);if(t&&t.texture&&t.visible){const n=new i.j(t.flipH?-t.width+t.offsetX:t.offsetX,t.flipV?-t.height+t.offsetY:t.offsetY);0===s?(e.x=n.x,e.y=n.y,e.width=t.width,e.height=t.height):(n.x<e.x&&(e.x=n.x),n.y<e.y&&(e.y=n.y),n.x+t.width>e.right&&(e.width=n.x+t.width-e.x),n.y+t.height>e.bottom&&(e.height=n.y+t.height-e.y))}s++}return e}get instanceId(){return this._id}get object(){return this._object}set object(t){this._object=t}get asset(){return this._asset}set asset(t){this._asset&&this._asset.removeReference(),this._asset=t,this._asset&&this._asset.addReference()}get sprites(){return this._sprites}get totalSprites(){return this._sprites.length}get updateObjectCounter(){return this._updateObjectCounter}set updateObjectCounter(t){this._updateObjectCounter=t}get updateModelCounter(){return this._updateModelCounter}set updateModelCounter(t){this._updateModelCounter=t}get updateSpriteCounter(){return this._updateSpriteCounter}set updateSpriteCounter(t){this._updateSpriteCounter=t}}return t.VISUALIZATION_COUNTER=0,t})();var Nt=s("/PsI"),Lt=s("Kx+W");class xt{constructor(t,e,s){this._id=t,this._type=e,this._visualization=s}dispose(){this._visualization=null}update(t,e){}animate(t){return!1}get id(){return this._id}get type(){return this._type}get visualization(){return this._visualization}}let Pt=(()=>{class t extends xt{constructor(t,e,s){super(t,e,s),this._asset=null,this._startTime=_.a.instance.time,this._delta=0,this._offsetY=0,this._scale=0,this._state=0}update(t,e){if(!t)return;this._scale=e;let s=64,i=0;if(e<48?(this._asset=this.visualization.getAvatarRenderAsset("user_blowkiss_small"),i=90===this.visualization.angle||270===this.visualization.angle?0:135===this.visualization.angle||180===this.visualization.angle||225===this.visualization.angle?6:-6,this._offsetY=-38,s=32):(this._asset=this.visualization.getAvatarRenderAsset("user_blowkiss"),i=90===this.visualization.angle||270===this.visualization.angle?-3:135===this.visualization.angle||180===this.visualization.angle||225===this.visualization.angle?22:-30,this._offsetY=-70),"sit"===this.visualization.posture?this._offsetY+=s/2:"lay"===this.visualization.posture&&(this._offsetY+=s),this._asset){t.texture=this._asset,t.offsetX=i,t.offsetY=this._offsetY,t.relativeDepth=-.02,t.alpha=0;const e=this._delta;this.animate(t),this._delta=e}}animate(e){if(!e)return!1;if(this._asset&&(e.texture=this._asset),this._state===t.STATE_DELAY)return!(_.a.instance.time-this._startTime<t.DELAY_BEFORE_ANIMATION||(this._state=t.STATE_FADE_IN,e.alpha=0,e.visible=!0,this._delta=0,0));if(this._state===t.STATE_FADE_IN)return this._delta+=.1,e.offsetY=this._offsetY,e.alpha=255*Math.pow(this._delta,.9),this._delta>=1&&(e.alpha=255,this._delta=0,this._state=t.STATE_FLOAT),!0;if(this._state===t.STATE_FLOAT){const s=Math.pow(this._delta,.9);return this._delta+=.05,e.offsetY=this._offsetY+(this._delta<1?s:1)*(this._scale<48?-30:-40),e.alpha=255*(1-s),e.alpha<=0&&(e.visible=!1,this._state=t.STATE_COMPLETE),!0}return!1}}return t.DELAY_BEFORE_ANIMATION=300,t.STATE_DELAY=0,t.STATE_FADE_IN=1,t.STATE_FLOAT=2,t.STATE_COMPLETE=3,t})(),Ft=(()=>{class t{static getExpressionAddition(t,e,s){switch(e){case this.BLOW:return new Pt(t,this.BLOW,s);default:return new xt(t,e,s)}}}return t.WAVE=1,t.BLOW=2,t.LAUGH=3,t.CRY=4,t.IDLE=5,t})(),kt=(()=>{class t{constructor(t,e){this._id=t,this._visualization=e,this._asset=null,this._startTime=_.a.instance.time,this._offsetY=0,this._scale=0,this._state=0}dispose(){this._visualization=null,this._asset=null}getSpriteAssetName(t){let e="left";return 135!==this._visualization.angle&&180!==this._visualization.angle&&225!==this._visualization.angle&&270!==this._visualization.angle||(e="right"),"user_idle_"+e+"_"+t+(this._scale<48?"_small":"")}update(e,s){if(!e)return;this._scale=s,this._asset=this._visualization.getAvatarRenderAsset(this.getSpriteAssetName(this._state===t.STATE_FRAME_A?1:2));let i=64,n=0;s<48?(n=135===this._visualization.angle||180===this._visualization.angle||225===this._visualization.angle||270===this._visualization.angle?10:-16,this._offsetY=-38,i=32):(n=135===this._visualization.angle||180===this._visualization.angle||225===this._visualization.angle||270===this._visualization.angle?22:-30,this._offsetY=-70),"sit"===this._visualization.posture?this._offsetY+=i/2:"lay"===this._visualization.posture&&(this._offsetY+=i-.3*i),this._asset&&(e.texture=this._asset,e.offsetX=n,e.offsetY=this._offsetY,e.relativeDepth=-.02,e.alpha=0)}animate(e){if(!e)return!1;const s=_.a.instance.time;return this._state===t.STATE_DELAY&&s-this._startTime>=t.DELAY_BEFORE_ANIMATION&&(this._state=t.STATE_FRAME_A,this._startTime=s,this._asset=this._visualization.getAvatarRenderAsset(this.getSpriteAssetName(1))),this._state===t.STATE_FRAME_A&&s-this._startTime>=t.DELAY_PER_FRAME&&(this._state=t.STATE_FRAME_B,this._startTime=s,this._asset=this._visualization.getAvatarRenderAsset(this.getSpriteAssetName(2))),this._state===t.STATE_FRAME_B&&s-this._startTime>=t.DELAY_PER_FRAME&&(this._state=t.STATE_FRAME_A,this._startTime=s,this._asset=this._visualization.getAvatarRenderAsset(this.getSpriteAssetName(1))),this._asset?(e.texture=this._asset,e.alpha=255,e.visible=!0):e.visible=!1,!1}get id(){return this._id}}return t.DELAY_BEFORE_ANIMATION=2e3,t.DELAY_PER_FRAME=2e3,t.STATE_DELAY=0,t.STATE_FRAME_A=1,t.STATE_FRAME_B=2,t})();class Wt{constructor(t,e,s){this._id=t,this._visualization=s,this._asset=null,this._scale=0,this._number=e,this._numberValueFadeDirection=0,this._numberValueMoving=!1,this._numberValueMoveCounter=0}dispose(){this._visualization=null,this._asset=null}update(t,e){if(!t)return;this._scale=e;let s=64,i=0,n=0;this._number>0?(e<48?(this._asset=this._visualization.getAvatarRenderAsset("number_"+this._number+"_small"),s=32,i=-6,n=-52):(this._asset=this._visualization.getAvatarRenderAsset("number_"+this._number),i=-8,n=-105),"sit"===this._visualization.posture?n+=s/2:"lay"===this._visualization.posture&&(n+=e),this._asset?(t.visible=!0,t.texture=this._asset,t.offsetX=i,t.offsetY=n,t.relativeDepth=-.01,t.alpha=0,this._numberValueFadeDirection=1,this._numberValueMoving=!0,this._numberValueMoveCounter=0):t.visible=!1):t.visible&&(this._numberValueFadeDirection=-1)}animate(t){if(!t)return!1;this._asset&&(t.texture=this._asset);let e=t.alpha,s=!1;if(this._numberValueMoving){if(this._numberValueMoveCounter++,this._numberValueMoveCounter<10)return!1;if(this._numberValueFadeDirection<0)t.offsetY-=this._scale<48?2:4;else{let e=4;this._scale<48&&(e=8),this._numberValueMoveCounter%e||(t.offsetY--,s=!0)}}return this._numberValueFadeDirection>0?(e<255&&(e+=32),e>=255&&(e=255,this._numberValueFadeDirection=0),t.alpha=e,!0):this._numberValueFadeDirection<0?(e>=0&&(e-=32),e<=0&&(this._numberValueFadeDirection=0,this._numberValueMoving=!1,e=0,t.visible=!1),t.alpha=e,!0):s}get id(){return this._id}}class Vt{constructor(t,e){this._id=t,this._visualization=e,this._asset=null,this._relativeDepth=0}dispose(){this._visualization=null,this._asset=null}update(t,e){if(!t)return;t.visible=!0,t.relativeDepth=this._relativeDepth,t.alpha=255;let s=64,i=0,n=0;e<48?(this._asset=this._visualization.getAvatarRenderAsset("user_typing_small"),i=3,n=-42,s=32):(this._asset=this._visualization.getAvatarRenderAsset("user_typing"),i=14,n=-83),"sit"===this._visualization.posture?n+=s/2:"lay"===this._visualization.posture&&(n+=e),this._asset&&(t.texture=this._asset,t.offsetX=i,t.offsetY=n,t.relativeDepth=-.02)}animate(t){return this._asset&&t&&(t.texture=this._asset),!1}get id(){return this._id}get relativeDepth(){return this._relativeDepth}set relativeDepth(t){this._relativeDepth=t}}var Gt=s("Xr/m"),Ht=s("uEox");class Bt extends Gt.a{constructor(){super()}initialize(t){return!0}onDispose(){this._avatarRenderer=null}createAvatarImage(t,e,s=null,i=null,n=null){let r=null;return r=this._avatarRenderer.createAvatarImage(t,e>48?Ht.a.LARGE:Ht.a.SMALL,s,i,n),r}getAvatarRendererAsset(t){return this._avatarRenderer?this._avatarRenderer.assets.getTexture(t):null}get avatarManager(){return this._avatarRenderer}set avatarManager(t){this._avatarRenderer=t}get layerCount(){return 0}}let jt=(()=>{class t extends wt{constructor(){super(),this._data=null,this._avatarImage=null,this._cachedAvatars=new Mt.a,this._cachedAvatarEffects=new Mt.a,this._shadow=null,this._lastUpdate=-1e3,this._disposed=!1,this._figure=null,this._gender=null,this._direction=-1,this._headDirection=-1,this._posture="",this._postureParameter="",this._canStandUp=!1,this._postureOffset=0,this._verticalOffset=0,this._angle=-1,this._headAngle=-1,this._talk=!1,this._expression=0,this._sleep=!1,this._blink=!1,this._gesture=0,this._sign=-1,this._highlightEnabled=!1,this._highlight=!1,this._dance=0,this._effect=0,this._carryObject=0,this._useObject=0,this._ownUser=!1,this._Str_8935=!1,this._Str_17860=!1,this._Str_1222=!1,this._Str_16697=2,this._Str_12697=0,this._Str_14276=0,this._isAvatarReady=!1,this._needsUpdate=!1,this._geometryUpdateCounter=-1,this._additions=new Map}initialize(e){return e instanceof Bt&&(this._data=e,this.setSpriteCount(t._Str_11587),super.initialize(e),!0)}dispose(){this._disposed||(super.dispose(),this._avatarImage&&this._avatarImage.dispose(),this._shadow=null,this._disposed=!0)}update(e,s,n,r){if(!this.object||!e||!this._data)return;if(s<this._lastUpdate+t.UPDATE_TIME_INCREASER)return;this._lastUpdate+=t.UPDATE_TIME_INCREASER,this._lastUpdate+t.UPDATE_TIME_INCREASER<s&&(this._lastUpdate=s-t.UPDATE_TIME_INCREASER);const a=e.scale,o=this._effect;let c=!1,_=!1,h=!1,l=!1;const d=this.updateModel(this.object.model,a);if(d||a!==this._scale||!this._avatarImage){if(a!==this._scale&&(c=!0,this.updateScale(a)),o!==this._effect&&(_=!0),c||!this._avatarImage||_){if(this._avatarImage=this.createAvatarImage(a,this._effect),!this._avatarImage)return;h=!0;const e=this.getSprite(t.AVATAR_LAYER_ID);e&&this._avatarImage&&this._avatarImage.isPlaceholder()?e.alpha=150:e&&(e.alpha=255)}if(!this._avatarImage)return;if(_&&this._avatarImage.animationHasResetOnToggle&&this._avatarImage.resetAnimationFrameCounter(),this.updateShadow(a),l=this.updateObject(this.object,e,n,!0),this.processActionsForAvatar(this._avatarImage),this._additions){let t=this._Str_16697;for(const e of this._additions.values())e.update(this.getSprite(t++),a)}this._scale=a}else l=this.updateObject(this.object,e,n);if(this._additions){let t=this._Str_16697;for(const e of this._additions.values())e.animate(this.getSprite(t++))&&this.updateSpriteCounter++}const g=l||d||c,m=(this._Str_1222||this._Str_12697>0)&&n;if(g&&(this._Str_12697=t._Str_14491),g||m){if(this.updateSpriteCounter++,this._Str_12697--,this._Str_14276--,!(this._Str_14276<=0||c||d||h))return;this._avatarImage.updateAnimationByFrames(1),this._Str_14276=t._Str_14491;let e=this._avatarImage.getCanvasOffsets();(!e||e.length<3)&&(e=t._Str_18338);const s=this.getSprite(t._Str_9540);if(s){const i=1===this.object.model.getValue(At.a.FIGURE_HIGHLIGHT_ENABLE)&&1===this.object.model.getValue(At.a.FIGURE_HIGHLIGHT),n=this._avatarImage.getImage(Lt.a.FULL,i);n&&(s.texture=n,i||(s.filters=[])),s.texture&&(s.offsetX=-1*a/2+e[0]-(s.texture.width-a)/2,s.offsetY=a/4-s.texture.height+e[1]+this._postureOffset),s.relativeDepth=this._Str_8935?this._Str_17860?-.5:t._Str_9235+e[2]:t._Str_11358+e[2],this._ownUser?(s.relativeDepth-=t._Str_17708,s.spriteType=u._Str_10494):s.spriteType=u._Str_11629}const n=this.getAddition(t.TYPING_BUBBLE_ID);n&&(n.relativeDepth=this._Str_8935?t._Str_9235-.01+e[2]:t._Str_11358-.01+e[2]),this._Str_1222=this._avatarImage.isAnimating();let r=t._Str_11587;const o=this._avatarImage.getDirection();for(const c of this._avatarImage.getSprites())if(c.id===t.AVATAR){const e=this.getSprite(t._Str_9540);if(e){const t=this._avatarImage.getLayerData(c);let s=c._Str_809(o),i=c._Str_739(o);t&&(s+=t.dx,i+=t.dy),a<48&&(s/=2,i/=2),this._canStandUp||(e.offsetX+=s,e.offsetY+=i)}}else{const e=this.getSprite(r);if(e){e.alphaTolerance=Ut._Str_9268,e.visible=!0;const s=this._avatarImage.getLayerData(c);let n=0,r=c._Str_809(o),_=c._Str_739(o);const h=c._Str_839(o);let l=0;c._Str_949&&(l=o),s&&(n=s._Str_891,r+=s.dx,_+=s.dy,l+=s.dd),a<48&&(r/=2,_/=2),l<0?l+=8:l>7&&(l-=8);const u=this._avatarImage.getScale()+"_"+c.member+"_"+l+"_"+n,d=this._avatarImage.getAsset(u);if(!d)continue;e.texture=d.texture,e.offsetX=d.offsetX-a/2+r,e.offsetY=d.offsetY+_,e.flipH=d.flipH,e.offsetY+=c._Str_767?this._verticalOffset*a/(2*t._Str_12370):this._postureOffset,e.relativeDepth=this._Str_8935?t._Str_9235-.001*this.totalSprites*h:t._Str_11358-.001*this.totalSprites*h,e.blendMode=33===c.ink?i.b.ADD:i.b.NORMAL}r++}}}createAvatarImage(e,s){let i=null,n="avatarImage"+e.toString();if(s?(n+="-"+s,i=this._cachedAvatarEffects.getValue(n)):i=this._cachedAvatars.getValue(n),!i&&(i=this._data.createAvatarImage(this._figure,e,this._gender,this,this),i))if(s){if(this._cachedAvatarEffects.length>=t.MAX_EFFECT_CACHE){const t=this._cachedAvatarEffects.remove(this._cachedAvatarEffects.getKey(0));t&&t.dispose()}this._cachedAvatarEffects.add(n,i)}else this._cachedAvatars.add(n,i);return i}updateObject(t,e,s,i=!1){if(!i&&this.updateObjectCounter===t.updateCounter&&this._geometryUpdateCounter===e.updateId)return!1;let n=t.getDirection().x-e.direction.x,r=this._headDirection-e.direction.x;return"float"===this._posture&&(r=n),n=(n%360+360)%360,r=(r%360+360)%360,"sit"===this._posture&&this._canStandUp&&(n-=n%90-45,r-=r%90-45),(n!==this._angle||i)&&(s=!0,this._angle=n,n-=112.5,n=(n+360)%360,this._avatarImage.setDirectionAngle(Lt.a.FULL,n)),(r!==this._headAngle||i)&&(s=!0,this._headAngle=r,this._headAngle!==this._angle&&(r-=112.5,r=(r+360)%360,this._avatarImage.setDirectionAngle(Lt.a.HEAD,r))),this._geometryUpdateCounter=e.updateId,this.updateObjectCounter=this.object.updateCounter,s}updateModel(e,s){if(!e)return!1;if(this.updateModelCounter===e.updateCounter)return!1;let i=!1;const n=e.getValue(At.a.FIGURE_TALK)>0;n!==this._talk&&(this._talk=n,i=!0);const r=e.getValue(At.a.FIGURE_EXPRESSION);r!==this._expression&&(this._expression=r,i=!0);const a=e.getValue(At.a.FIGURE_SLEEP)>0;a!==this._sleep&&(this._sleep=a,i=!0);const o=e.getValue(At.a.FIGURE_BLINK)>0;o!==this._blink&&(this._blink=o,i=!0);const c=e.getValue(At.a.FIGURE_GESTURE)||0;c!==this._gesture&&(this._gesture=c,i=!0);const _=e.getValue(At.a.FIGURE_POSTURE);_!==this._posture&&(this._posture=_,i=!0);const h=e.getValue(At.a.FIGURE_POSTURE_PARAMETER);h!==this._postureParameter&&(this._postureParameter=h,i=!0);const l=e.getValue(At.a.FIGURE_CAN_STAND_UP);l!==this._canStandUp&&(this._canStandUp=l,i=!0);const u=e.getValue(At.a.FIGURE_VERTICAL_OFFSET)*t.OFFSET_MULTIPLIER;u!==this._verticalOffset&&(this._verticalOffset=u,i=!0);const d=e.getValue(At.a.FIGURE_DANCE)||0;d!==this._dance&&(this._dance=d,i=!0);const g=e.getValue(At.a.FIGURE_EFFECT)||0;g!==this._effect&&(this._effect=g,i=!0);const m=e.getValue(At.a.FIGURE_CARRY_OBJECT)||0;m!==this._carryObject&&(this._carryObject=m,i=!0);const p=e.getValue(At.a.FIGURE_USE_OBJECT)||0;p!==this._useObject&&(this._useObject=p,i=!0);const f=e.getValue(At.a.HEAD_DIRECTION);f!==this._headDirection&&(this._headDirection=f,i=!0),this._carryObject>0&&p>0?this._useObject!==this._carryObject&&(this._useObject=this._carryObject,i=!0):0!==this._useObject&&(this._useObject=0,i=!0);let E=this.getAddition(t.FLOATING_IDLE_Z_ID);this._sleep?(E||(E=this.addAddition(new kt(t.FLOATING_IDLE_Z_ID,this))),i=!0):E&&this.removeAddition(t.FLOATING_IDLE_Z_ID);const S=e.getValue(At.a.FIGURE_IS_TYPING)>0;let I=this.getAddition(t.TYPING_BUBBLE_ID);S?(I||(I=this.addAddition(new Vt(t.TYPING_BUBBLE_ID,this))),i=!0):I&&this.removeAddition(t.TYPING_BUBBLE_ID);const R=e.getValue(At.a.FIGURE_NUMBER_VALUE);let b=this.getAddition(t.NUMBER_BUBBLE_ID);R>0?(b||(b=this.addAddition(new Wt(t.NUMBER_BUBBLE_ID,R,this))),i=!0):b&&this.removeAddition(t.NUMBER_BUBBLE_ID);let v=this.getAddition(t.EXPRESSION_ID);this._expression>0?v||(v=Ft.getExpressionAddition(t.EXPRESSION_ID,this._expression,this),v&&this.addAddition(v)):v&&this.removeAddition(t.EXPRESSION_ID),this.updateScale(s);const T=e.getValue(At.a.GENDER);T!==this._gender&&(this._gender=T,i=!0),this.updateFigure(e.getValue(At.a.FIGURE))&&(i=!0);let O=e.getValue(At.a.FIGURE_SIGN);null===O&&(O=-1),this._sign!==O&&(this._sign=O,i=!0);const y=e.getValue(At.a.FIGURE_HIGHLIGHT_ENABLE)>0;if(y!==this._highlightEnabled&&(this._highlightEnabled=y,i=!0),this._highlightEnabled){const t=e.getValue(At.a.FIGURE_HIGHLIGHT)>0;t!==this._highlight&&(this._highlight=t,i=!0)}const A=e.getValue(At.a.OWN_USER)>0;return A!==this._ownUser&&(this._ownUser=A,i=!0),this.updateModelCounter=e.updateCounter,i}setDirection(t){this._direction!==t&&(this._direction=t,this._needsUpdate=!0)}updateScale(t){t<48&&(this._blink=!1),this._postureOffset="sit"===this._posture||"lay"===this._posture?t/2:0,this._Str_17860=!1,this._Str_8935=!1,"lay"===this._posture&&(this._Str_8935=!0,parseInt(this._postureParameter)<0&&(this._Str_17860=!0))}processActionsForAvatar(e){if(!e)return;if(e.initActionAppends(),e.appendAction(Nt.a.POSTURE,this._posture,this._postureParameter),this._gesture>0&&this._avatarImage.appendAction(Nt.a.GESTURE,Nt.a.getGesture(this._gesture)),this._dance>0&&this._avatarImage.appendAction(Nt.a.DANCE,this._dance),this._sign>-1&&this._avatarImage.appendAction(Nt.a.SIGN,this._sign),this._carryObject>0&&this._avatarImage.appendAction(Nt.a.CARRY_OBJECT,this._carryObject),this._useObject>0&&this._avatarImage.appendAction(Nt.a.USE_OBJECT,this._useObject),this._talk&&this._avatarImage.appendAction(Nt.a.TALK),(this._sleep||this._blink)&&this._avatarImage.appendAction(Nt.a.SLEEP),this._expression>0){const t=Nt.a.getExpression(this._expression);if(""!==t)switch(t){case Nt.a.DANCE:this._avatarImage.appendAction(Nt.a.DANCE,2);break;default:this._avatarImage.appendAction(t)}}this._effect>0&&this._avatarImage.appendAction(Nt.a.EFFECT,this._effect),e.endActionAppends(),this._Str_1222=e.isAnimating();let s=t._Str_11587;for(const i of this._avatarImage.getSprites())i.id!==t.AVATAR&&s++;if(s!==this.totalSprites&&this.setSpriteCount(s),this._Str_16697=s,this._additions)for(const t of this._additions.values())this.createSprite()}updateFigure(t){return this._figure!==t&&(this._figure=t,this.clearAvatar(),!0)}resetFigure(t){this.clearAvatar()}resetEffect(t){this.clearAvatar()}clearAvatar(){for(const t of this._cachedAvatars.getValues())t&&t.dispose();for(const t of this._cachedAvatarEffects.getValues())t&&t.dispose();this._cachedAvatars.reset(),this._cachedAvatarEffects.reset(),this._avatarImage=null;const e=this.getSprite(t.AVATAR_LAYER_ID);e&&(e.texture=i.p.EMPTY,e.alpha=255)}getAddition(t){return this._additions&&this._additions.get(t)||null}addAddition(t){if(!this.getAddition(t.id))return this._additions.set(t.id,t),t}removeAddition(t){const e=this.getAddition(t);e&&(this._additions.delete(e.id),e.dispose())}updateShadow(e){this._shadow=null;const s=this.getSprite(t.SHADOW_LAYER_ID);if(!s)return;let i="mv"===this._posture||"std"===this._posture||"sit"===this._posture&&this._canStandUp;if(this._effect===t._Str_17502&&(i=!1),i){if(s.visible=!0,!this._shadow||e!==this._scale){let t=0,i=0;e<48?(s._Str_3582="sh_std_sd_1_0_0",this._shadow=this._avatarImage.getAsset(s._Str_3582),t=-8,i=this._canStandUp?6:-3):(s._Str_3582="h_std_sd_1_0_0",this._shadow=this._avatarImage.getAsset(s._Str_3582),t=-17,i=this._canStandUp?10:-7),this._shadow?(s.texture=this._shadow.texture,s.offsetX=t,s.offsetY=i,s.alpha=50,s.relativeDepth=1):s.visible=!1}}else this._shadow=null,s.visible=!1}getAvatarRenderAsset(t){const e=_.a.instance.getConfiguration("images.url")+"/additions/"+t+".png";return this._data?this._data.getAvatarRendererAsset(e):null}get direction(){return this._direction}get posture(){return this._posture}get angle(){return this._angle}get disposed(){return this._disposed}}return t.AVATAR="avatar",t.FLOATING_IDLE_Z_ID=1,t.TYPING_BUBBLE_ID=2,t.EXPRESSION_ID=3,t.NUMBER_BUBBLE_ID=4,t.OWN_USER_ID=4,t.UPDATE_TIME_INCREASER=41,t.OFFSET_MULTIPLIER=1e3,t.AVATAR_LAYER_ID=0,t.SHADOW_LAYER_ID=1,t._Str_17502=97,t._Str_11587=2,t._Str_14491=2,t._Str_18338=[0,0,0],t.MAX_EFFECT_CACHE=2,t._Str_9540=0,t._Str_12370=1e3,t._Str_11358=-.01,t._Str_17708=.001,t._Str_9235=-.409,t})(),Kt=(()=>{class t{static allocate(e,s,i,n,r,a,o=-1,c=0){const _=t.POOL.length?t.POOL.pop():new t;return n<1&&(n=1),r<0&&(r=t.FRAME_REPEAT_FOREVER),_._id=e,_._x=s||0,_._y=i||0,_._repeats=n,_._frameRepeats=r,_._remainingFrameRepeats=r,_._isLastFrame=a,_._isRecycled=!1,o>=0?(_._activeSequence=o,_._activeSequenceOffset=c):(_._activeSequence=-1,_._activeSequenceOffset=0),_}get id(){return this._id>=0?this._id:-this._id*Math.random()}get x(){return this._x}get y(){return this._y}get repeats(){return this._repeats}get frameRepeats(){return this._frameRepeats}get isLastFrame(){return this._isLastFrame}get remainingFrameRepeats(){return this._frameRepeats<0?t.FRAME_REPEAT_FOREVER:this._remainingFrameRepeats}set remainingFrameRepeats(t){t<0&&(t=0),this._frameRepeats>0&&t>this._frameRepeats&&(t=this._frameRepeats),this._remainingFrameRepeats=t}get activeSequence(){return this._activeSequence}get activeSequenceOffset(){return this._activeSequenceOffset}recycle(){this._isRecycled||(this._isRecycled=!0,t.POOL.length<t.POOL_SIZE_LIMIT&&t.POOL.push(this))}}return t.FRAME_REPEAT_FOREVER=-1,t.SEQUENCE_NOT_DEFINED=-1,t.POOL_SIZE_LIMIT=3e3,t.POOL=[],t})();class zt{constructor(t,e,s,i,n,r){this._id=0,this._x=0,this._y=0,this._randomX=0,this._randomY=0,this._repeats=1,this._id=t,this._x=e,this._y=s,this._randomX=i,this._randomY=n,this._repeats=r}get id(){return this._id}hasDirectionalOffsets(){return!1}getX(t){return this._x}getY(t){return this._y}get x(){return this._x}get y(){return this._x}get randomX(){return this._randomX}get randomY(){return this._randomY}get repeats(){return this._repeats}}class Yt extends zt{constructor(t,e,s,i,n,r,a){super(t,e,s,i,n,a),this._directionalOffsets=r}hasDirectionalOffsets(){return null!==this._directionalOffsets}getX(t){return this._directionalOffsets?this._directionalOffsets.getXOffset(t,super.getX(t)):super.getX(t)}getY(t){return this._directionalOffsets?this._directionalOffsets.getYOffset(t,super.getY(t)):super.getY(t)}}class Xt{constructor(t,e){this._frames=[],this._frameIndexes=[],this._frameRepeats=[],this._isRandom=e,this._loopCount=t<1?1:t}get isRandom(){return this._isRandom}get frameCount(){return this._frameIndexes.length*this._loopCount}dispose(){this._frames=[]}initialize(){let t=this._frameIndexes.length-1,e=-1,s=1;for(;t>=0;)this._frameIndexes[t]===e?s++:(e=this._frameIndexes[t],s=1),this._frameRepeats[t]=s,t--}addFrame(t,e,s,i,n,r){let a=1;if(this._frames.length>0){const r=this._frames[this._frames.length-1];r.id!==t||r.hasDirectionalOffsets()||r.x!==e||r.y!==s||r.randomX!==i||0!==i||r.randomY!==n||0!==n||(a+=r.repeats,this._frames.pop())}const o=r?new Yt(t,e,s,i,n,r,a):new zt(t,e,s,i,n,a);this._frames.push(o),this._frameIndexes.push(this._frames.length-1),this._frameRepeats.push(1)}getFrame(t){return!this._frames.length||t<0||t>=this.frameCount?null:this._frames[this._frameIndexes[t%this._frameIndexes.length]]}getFrameIndex(t){return t<0||t>=this.frameCount?-1:(this._isRandom&&(t=Math.round(Math.random()*this._frameIndexes.length))===this._frameIndexes.length&&t--,t)}getRepeats(t){return t<0||t>=this.frameCount?0:this._frameRepeats[t%this._frameRepeats.length]}}class Zt{constructor(t,e,s){this._frameSequences=[],this._frameCount=-1,this._loopCount=t<0?0:t,this._frameRepeat=e<1?1:e,this._isRandom=s}get frameCount(){return this._frameCount<0&&this.calculateLength(),this._frameCount}dispose(){if(this._frameSequences&&this._frameSequences.length){for(const t of this._frameSequences)t&&t.dispose();this._frameSequences=[]}}addFrameSequence(t,e){const s=new Xt(t,e);return this._frameSequences.push(s),s}calculateLength(){this._frameCount=0;for(const t of this._frameSequences)t&&(this._frameCount+=t.frameCount)}getFrame(t,e){if(this._frameCount<1)return null;if(e/=this._frameRepeat,!this._isRandom){const s=Math.floor(e/this._frameCount);e=Math.floor(e%this._frameCount);let i=!1,n=null;(this._loopCount>0&&s>=this._loopCount||this._loopCount<=0&&1===this._frameCount)&&(e=this._frameCount-1,i=!0);let r=0,a=0;for(;a<this._frameSequences.length;){if(n=this._frameSequences[a],n){if(e<r+n.frameCount)break;r+=n.frameCount}a++}return this.getFrameFromSpecificSequence(t,n,a,e-r,i)}const s=Math.trunc(this._frameSequences.length*Math.random()),i=this._frameSequences[s];return i.frameCount<1?null:this.getFrameFromSpecificSequence(t,i,s,0,!1)}getFrameFromSequence(t,e,s,i){if(e<0||e>=this._frameSequences.length)return null;const n=this._frameSequences[e];return n?s>=n.frameCount?this.getFrame(t,i):this.getFrameFromSpecificSequence(t,n,e,s,!1):null}getFrameFromSpecificSequence(t,e,s,i,n){if(!e)return null;const r=e.getFrameIndex(i),a=e.getFrame(r);if(!a)return null;let o=a.getX(t),c=a.getY(t);const _=a.randomX,h=a.randomY;let l=a.repeats,u=!1;_&&(o=Math.trunc(o+_*Math.random())),h&&(c=Math.trunc(c+h*Math.random())),l>1&&(l=e.getRepeats(r));let d=this._frameRepeat*l;return n&&(d=Kt.FRAME_REPEAT_FOREVER),this._isRandom||e.isRandom||s===this._frameSequences.length-1&&i===e.frameCount-1&&(u=!0),Kt.allocate(a.id,o,c,l,d,u,s,i)}}class qt{constructor(){this._offsetX=new Map,this._offsetY=new Map}getXOffset(t,e){const s=this._offsetX.get(t);return null==s?e:s}getYOffset(t,e){const s=this._offsetY.get(t);return null==s?e:s}setDirection(t,e,s){this._offsetX.set(t,e),this._offsetY.set(t,s)}}let Qt=(()=>{class t{constructor(){this._layers=new Map,this._frameCount=-1,this._randomStart=!1,this._immediateChanges=null}static getTransitionToAnimationId(e){return t.TRANSITION_TO_ANIMATION_OFFSET+e}static getTransitionFromAnimationId(e){return t.TRANSITION_FROM_ANIMATION_OFFSET+e}static isTransitionToAnimation(e){return e>=t.TRANSITION_TO_ANIMATION_OFFSET&&e<t.TRANSITION_FROM_ANIMATION_OFFSET}static isTransitionFromAnimation(e){return e>=t.TRANSITION_FROM_ANIMATION_OFFSET}dispose(){for(const t of this._layers.values())t&&t.dispose();this._layers.clear(),this._immediateChanges=null}setImmediateChanges(t){this._immediateChanges=t}isImmediateChange(t){return!(!this._immediateChanges||-1===this._immediateChanges.indexOf(t))}getStartFrame(t){return this._randomStart?Math.random()*this._frameCount:0}initialize(t){if(this._randomStart=!1,t.layers)for(const e in t.layers){const s=t.layers[e];if(!s)return!1;const i=parseInt(e);if(!this.addLayer(i,void 0!==s.loopCount?s.loopCount:1,void 0!==s.frameRepeat?s.frameRepeat:1,void 0!==s.random&&0!==s.random,s))return!1}return!0}addLayer(t,e,s,i,n){const r=new Zt(e,s,i);if(n.frameSequences)for(const o in n.frameSequences){const t=n.frameSequences[o];if(!t)continue;const e=r.addFrameSequence(void 0!==t.loopCount?t.loopCount:1,void 0!==t.random&&0!==t.random);if(t.frames)for(const s in t.frames){const i=t.frames[s];if(!i)return r.dispose(),!1;e.addFrame(i.id,i.x||0,i.y||0,i.randomX||0,i.randomY||0,this.readDirectionalOffsets(i))}e.initialize()}r.calculateLength(),this._layers.set(t,r);const a=r.frameCount;return a>this._frameCount&&(this._frameCount=a),!0}readDirectionalOffsets(t){let e=null;if(t&&t.offsets)for(const s in t.offsets){const i=t.offsets[s];i&&(e||(e=new qt),e.setDirection(i.direction,i.x,i.y))}return e}getFrame(t,e,s){const i=this._layers.get(e);return i?i.getFrame(t,s):null}getFrameFromSequence(t,e,s,i,n){const r=this._layers.get(e);return r?r.getFrameFromSequence(t,s,i,n):null}}return t.TRANSITION_TO_ANIMATION_OFFSET=1e6,t.TRANSITION_FROM_ANIMATION_OFFSET=2e6,t.DEFAULT_FRAME_NUMBER=0,t})();class Jt{constructor(){this._animationId=-1,this._animationAfterTransitionId=0,this._animationOver=!1,this._frameCounter=0,this._frames=[],this._lastFramePlayed=[],this._animationPlayed=[],this._layerCount=0}get animationOver(){return this._animationOver}set animationOver(t){this._animationOver=t}get frameCounter(){return this._frameCounter}set frameCounter(t){this._frameCounter=t}get animationId(){return this._animationId}set animationId(t){t!==this._animationId&&(this._animationId=t,this.resetAnimationFrames(!1))}get animationAfterTransitionId(){return this._animationAfterTransitionId}set animationAfterTransitionId(t){this._animationAfterTransitionId=t}dispose(){this.recycleFrames(),this._frames=null,this._lastFramePlayed=null,this._animationPlayed=null}setLayerCount(t){this._layerCount=t,this.resetAnimationFrames()}resetAnimationFrames(t=!0){!t&&this._frames||(this.recycleFrames(),this._frames=[]),this._lastFramePlayed=[],this._animationPlayed=[],this._animationOver=!1,this._frameCounter=0;let e=0;for(;e<this._layerCount;){if(t||this._frames.length<=e)this._frames[e]=null;else{const t=this._frames[e];t&&(t.recycle(),this._frames[e]=Kt.allocate(t.id,t.x,t.y,t.repeats,0,t.isLastFrame))}this._lastFramePlayed[e]=!1,this._animationPlayed[e]=!1,e++}}recycleFrames(){if(this._frames&&this._frames.length)for(const t of this._frames)t&&t.recycle()}getFrame(t){return t<0||t>=this._layerCount?null:this._frames[t]}setFrame(t,e){if(t<0||t>=this._layerCount)return;const s=this._frames[t];s&&s.recycle(),this._frames[t]=e}getAnimationPlayed(t){return t<0||t>=this._layerCount||this._animationPlayed[t]}setAnimationPlayed(t,e){t<0||t>=this._layerCount||(this._animationPlayed[t]=e)}getLastFramePlayed(t){return t<0||t>=this._layerCount||this._lastFramePlayed[t]}setLastFramePlayed(t,e){t<0||t>=this._layerCount||(this._lastFramePlayed[t]=e)}}class $t{static hex2int(t){return parseInt(t,16)}static inkToBlendMode(t){return"ADD"==t||33==t?i.b.ADD:i.b.NORMAL}}let te=(()=>{class t{constructor(t){this._colors=[],this.createColors(t)}createColors(e){if(e)for(let s=0;s<e;s++)this._colors.push(t.DEFAULT_COLOR)}dispose(){this._colors=[]}getLayerColor(e){return this._colors[e]||t.DEFAULT_COLOR}setColorLayer(t,e){this._colors[t]&&(this._colors[t]=e)}}return t.DEFAULT_COLOR=16777215,t})(),ee=(()=>{class t{constructor(){this._tag=t.DEFAULT_TAG,this._ink=t.DEFAULT_INK,this._alpha=t.DEFAULT_ALPHA,this._ignoreMouse=t.DEFAULT_IGNORE_MOUSE,this._xOffset=t.DEFAULT_XOFFSET,this._yOffset=t.DEFAULT_YOFFSET,this._zOffset=t.DEFAULT_ZOFFSET}setFromLayer(t){t&&(this._tag=t.tag,this._ink=t.ink,this._alpha=t.alpha,this._ignoreMouse=t.ignoreMouse,this._xOffset=t.xOffset,this._yOffset=t.yOffset,this._zOffset=t.zOffset)}get tag(){return this._tag}set tag(t){this._tag=t}get ink(){return this._ink}set ink(t){this._ink=t}get alpha(){return this._alpha}set alpha(t){this._alpha=t}get ignoreMouse(){return this._ignoreMouse}set ignoreMouse(t){this._ignoreMouse=t}get xOffset(){return this._xOffset}set xOffset(t){this._xOffset=t}get yOffset(){return this._yOffset}set yOffset(t){this._yOffset=t}get zOffset(){return this._zOffset}set zOffset(t){this._zOffset=t}}return t.DEFAULT_COUNT=0,t.DEFAULT_DIRECTION=0,t.DEFAULT_TAG="",t.DEFAULT_INK=i.b.NORMAL,t.DEFAULT_ALPHA=255,t.DEFAULT_IGNORE_MOUSE=!1,t.DEFAULT_XOFFSET=0,t.DEFAULT_YOFFSET=0,t.DEFAULT_ZOFFSET=0,t.ADD_INK=i.b.ADD,t.SUBTRACT_INK=i.b.NORMAL,t.DARKEN_INK=i.b.NORMAL,t})(),se=(()=>{class t{constructor(t){this._layers=[],this.createLayers(t)}createLayers(t){if(t)for(let e=0;e<t;e++)this._layers.push(new ee)}dispose(){this._layers=[]}setFromDirection(t){if(!t)return;const e=this.layerCount;if(e===t.layerCount)for(let s=0;s<e;s++){const e=this.getLayer(s),i=t.getLayer(s);e&&e.setFromLayer(i)}}getLayer(t){return this._layers[t]||null}getLayerTag(t){const e=this.getLayer(t);return e?e.tag:ee.DEFAULT_TAG}setLayerTag(t,e){const s=this.getLayer(t);s&&(s.tag=e)}getLayerInk(t){const e=this.getLayer(t);return e?e.ink:ee.DEFAULT_INK}setLayerInk(t,e){const s=this.getLayer(t);s&&(isNaN(e)||(s.ink=e))}getLayerAlpha(t){const e=this.getLayer(t);return e?e.alpha:ee.DEFAULT_ALPHA}setLayerAlpha(t,e){const s=this.getLayer(t);s&&(isNaN(e)||(s.alpha=e))}getLayerIgnoreMouse(t){const e=this.getLayer(t);return e?e.ignoreMouse:ee.DEFAULT_IGNORE_MOUSE}setLayerIgnoreMouse(t,e){const s=this.getLayer(t);s&&(s.ignoreMouse=e||!1)}getLayerXOffset(t){const e=this.getLayer(t);return e?e.xOffset:ee.DEFAULT_XOFFSET}setLayerXOffset(t,e){const s=this.getLayer(t);s&&(isNaN(e)||(s.xOffset=e))}getLayerYOffset(t){const e=this.getLayer(t);return e?e.yOffset:ee.DEFAULT_YOFFSET}setLayerYOffset(t,e){const s=this.getLayer(t);s&&(isNaN(e)||(s.yOffset=e))}getLayerZOffset(t){const e=this.getLayer(t);return e?e.zOffset:ee.DEFAULT_ZOFFSET}setLayerZOffset(t,e){const s=this.getLayer(t);s&&(isNaN(e)||(s.zOffset=e))}get layerCount(){return this._layers.length}}return t._Str_9471=-1,t})(),ie=(()=>{class t{constructor(e,s){this._layerCount=e<0?0:e>t.MAX_LAYERS?t.MAX_LAYERS:e,this._angle=s<1?1:s>360?360:s,this._defaultDirection=new se(this._layerCount),this._directions=new Map,this._colors=[],this._lastDirectionData=null,this._lastDirection=-1}dispose(){this._defaultDirection&&this._defaultDirection.dispose();for(const t of this._directions.values())t&&t.dispose();for(const t of this._colors)t&&t.dispose();this.reset()}reset(){this._defaultDirection=null,this._colors=[],this._lastDirectionData=null,this._lastDirection=-1,this._directions.clear()}processLayers(t){return!!t&&this.setDirectionLayers(this._defaultDirection,t)}processDirections(t){if(!t)return!1;for(const e in t){const s=t[e];if(!s)continue;const i=parseInt(e);if(this._directions.get(i))return!1;const n=new se(this._layerCount);n.setFromDirection(this._defaultDirection),this.setDirectionLayers(n,s.layers),this._directions.set(i,n),this._lastDirectionData=null,this._lastDirection=-1}return!0}processColors(t){if(!t)return!1;for(const e in t){const s=t[e];if(!s)continue;const i=parseInt(e);if(this._colors[i])return!1;const n=new te(this._layerCount);for(const t in s.layers){const e=s.layers[t];if(!e)continue;const i=parseInt(t);n.setColorLayer(i,e.color)}this._colors[i]=n}return!0}setDirectionLayers(t,e){if(!t||!e)return!1;for(const s in e){const i=e[s];if(!i)continue;const n=parseInt(s);if(n<0||n>=this._layerCount)return!1;void 0!==i.ink&&t.setLayerInk(n,$t.inkToBlendMode(i.ink)),void 0!==i.tag&&t.setLayerTag(n,i.tag),void 0!==i.alpha&&t.setLayerAlpha(n,i.alpha),void 0!==i.ignoreMouse&&t.setLayerIgnoreMouse(n,i.ignoreMouse),void 0!==i.x&&t.setLayerXOffset(n,i.x),void 0!==i.y&&t.setLayerYOffset(n,i.y),void 0!==i.z&&t.setLayerZOffset(n,i.z/-1e3)}return!0}getValidDirection(t){if(this._directions.get(t))return t;t=(t%360+360)%360;let e=-1,s=-1;for(const i of this._directions.keys()){let n=(i*this._angle-t+360)%360;n>180&&(n=360-n),(n<e||e<0)&&(e=n,s=i)}return s>=0?Math.trunc(s):0}getDirectionData(t){if(t===this._lastDirection&&this._lastDirectionData)return this._lastDirectionData;let e=this._directions.get(t);return e||(e=this._defaultDirection),this._lastDirection=t,this._lastDirectionData=e,this._lastDirectionData}getLayerTag(t,e){const s=this.getDirectionData(t);return s?s.getLayerTag(e):ee.DEFAULT_TAG}getLayerInk(t,e){const s=this.getDirectionData(t);return s?s.getLayerInk(e):ee.DEFAULT_INK}getLayerAlpha(t,e){const s=this.getDirectionData(t);return s?s.getLayerAlpha(e):ee.DEFAULT_ALPHA}getLayerColor(t,e){const s=this._colors[e];return s?s.getLayerColor(t):te.DEFAULT_COLOR}getLayerIgnoreMouse(t,e){const s=this.getDirectionData(t);return s?s.getLayerIgnoreMouse(e):ee.DEFAULT_IGNORE_MOUSE}getLayerXOffset(t,e){const s=this.getDirectionData(t);return s?s.getLayerXOffset(e):ee.DEFAULT_XOFFSET}getLayerYOffset(t,e){const s=this.getDirectionData(t);return s?s.getLayerYOffset(e):ee.DEFAULT_YOFFSET}getLayerZOffset(t,e){const s=this.getDirectionData(t);return s?s.getLayerZOffset(e):ee.DEFAULT_ZOFFSET}get layerCount(){return this._layerCount}}return t.MAX_LAYERS=26,t})();class ne extends ie{constructor(t,e){super(t,e),this._animations=new Map,this._animationIds=[]}dispose(){super.dispose();for(const t of this._animations.values())t&&t.dispose();this._animations.clear(),this._animationIds=[]}defineAnimations(t){if(!t)return!0;for(const e in t){const s=t[e];if(!s)return!1;let i=parseInt(e),n=!1;const r=s.transitionTo,a=s.transitionFrom;void 0!==r&&(i=Qt.getTransitionToAnimationId(r),n=!0),void 0!==a&&(i=Qt.getTransitionFromAnimationId(a),n=!0);const o=this.createAnimationData();if(!o.initialize(s))return o.dispose(),!1;this._animations.set(i,o),n||this._animationIds.push(i)}return!0}createAnimationData(){return new Qt}hasAnimation(t){return!!this._animations.get(t)}getAnimationCount(){return this._animationIds.length||0}getAnimationId(t){const e=this.getAnimationCount();return t<0||e<=0?0:this._animationIds[t%e]}isImmediateChange(t,e){const s=this._animations.get(t);return!!s&&s.isImmediateChange(e)}getStartFrame(t,e){const s=this._animations.get(t);return s?s.getStartFrame(e):0}getFrame(t,e,s,i){const n=this._animations.get(t);return n?n.getFrame(e,s,i):null}getFrameFromSequence(t,e,s,i,n,r){const a=this._animations.get(t);return a?a.getFrameFromSequence(e,s,i,n,r):null}}let re=(()=>{class t{constructor(){this._type="",this._sizes=[],this._sizeDatas=new Map,this._lastSize=-1,this._lastSizeScale=-1,this._lastSizeData=null,this._lastSizeDataScale=-1}initialize(t){return this.reset(),!!(t&&t.type&&t.type.length)&&(this._type=t.name,!!this.defineVisualizations(t.visualizations)||(this.reset(),!1))}dispose(){if(this._sizeDatas&&this._sizeDatas.size){for(const t of this._sizeDatas.values())t&&t.dispose();this._sizeDatas=null}this._lastSizeData=null,this._sizes=null}reset(){if(this._type="",this._sizeDatas&&this._sizeDatas.size)for(const t of this._sizeDatas.values())t&&t.dispose();this._sizeDatas.clear(),this._sizes=[],this._lastSizeData=null,this._lastSizeDataScale=-1}createSizeData(t,e,s){return new ie(e,s)}defineVisualizations(t){if(!t)return!1;for(const e of t){const t=e.layerCount,s=e.angle;let i=e.size;if(i<1&&(i=1),this._sizeDatas.get(i))return!1;const n=this.createSizeData(i,t,s);if(!n)return!1;for(const r in e)if(!this.processVisualElement(n,r,e[r]))return n.dispose(),!1;this._sizeDatas.set(i,n),this._sizes.push(i)}return this._sizes.sort(),!0}processVisualElement(t,e,s){if(!t||!e||!s)return!1;switch(e){case"layers":if(!t.processLayers(s))return!1;break;case"directions":if(!t.processDirections(s))return!1;break;case"colors":if(!t.processColors(s))return!1}return!0}getValidSize(t){if(t===this._lastSizeScale)return this._lastSize;const e=this.getSizeIndex(t);let s=-1;return e<this._sizes.length&&(s=this._sizes[e]),this._lastSizeScale=t,this._lastSize=s,s}getSizeIndex(t){if(t<=0)return 0;let e=0,s=1;for(;s<this._sizes.length;){if(this._sizes[s]>t){this._sizes[s]/t<t/this._sizes[s-1]&&(e=s);break}e=s,s++}return e}getSizeData(t){if(t===this._lastSizeDataScale)return this._lastSizeData;const e=this.getSizeIndex(t);return this._lastSizeData=e<this._sizes.length?this._sizeDatas.get(this._sizes[e]):null,this._lastSizeDataScale=t,this._lastSizeData}getLayerCount(t){const e=this.getSizeData(t);return e?e.layerCount:ee.DEFAULT_COUNT}getValidDirection(t,e){const s=this.getSizeData(t);return s?s.getValidDirection(e):ee.DEFAULT_DIRECTION}getLayerTag(t,e,s){const i=this.getSizeData(t);return i?i.getLayerTag(e,s):ee.DEFAULT_TAG}getLayerInk(t,e,s){const i=this.getSizeData(t);return i?i.getLayerInk(e,s):ee.DEFAULT_INK}getLayerAlpha(t,e,s){const i=this.getSizeData(t);return i?i.getLayerAlpha(e,s):ee.DEFAULT_ALPHA}getLayerColor(t,e,s){const i=this.getSizeData(t);return i?i.getLayerColor(e,s):te.DEFAULT_COLOR}getLayerIgnoreMouse(t,e,s){const i=this.getSizeData(t);return i?i.getLayerIgnoreMouse(e,s):ee.DEFAULT_IGNORE_MOUSE}getLayerXOffset(t,e,s){const i=this.getSizeData(t);return i?i.getLayerXOffset(e,s):ee.DEFAULT_XOFFSET}getLayerYOffset(t,e,s){const i=this.getSizeData(t);return i?i.getLayerYOffset(e,s):ee.DEFAULT_YOFFSET}getLayerZOffset(t,e,s){const i=this.getSizeData(t);return i?i.getLayerZOffset(e,s):ee.DEFAULT_ZOFFSET}get type(){return this._type}}return t.LAYER_LETTERS=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t})();class ae extends re{createSizeData(t,e,s){return new ne(e,s)}processVisualElement(t,e,s){if(!t||!e||!s)return!1;switch(e){case"animations":if(!(t instanceof ne&&t.defineAnimations(s)))return!1;break;default:if(!super.processVisualElement(t,e,s))return!1}return!0}hasAnimation(t,e){const s=this.getSizeData(t);return s?s.hasAnimation(e):null}getAnimationCount(t){const e=this.getSizeData(t);return e?e.getAnimationCount():null}getAnimationId(t,e){const s=this.getSizeData(t);return s?s.getAnimationId(e):null}isImmediateChange(t,e,s){const i=this.getSizeData(t);return i?i.isImmediateChange(e,s):null}getStartFrame(t,e,s){const i=this.getSizeData(t);return i?i.getStartFrame(e,s):null}getFrame(t,e,s,i,n){const r=this.getSizeData(t);return r?r.getFrame(e,s,i,n):null}getFrameFromSequence(t,e,s,i,n,r,a){const o=this.getSizeData(t);return o?o.getFrameFromSequence(e,s,i,n,r,a):null}}let oe=(()=>{class t extends wt{constructor(){super(),this._data=null,this._type=null,this._direction=0,this._lastCameraAngle=NaN,this._selectedColor=0,this._furnitureLift=0,this._alphaMultiplier=1,this._alphaChanged=!1,this._clickUrl=null,this._cacheDirection=-1,this._cacheScale=0,this._cacheSize=-1,this._layerCount=0,this._shadowLayerIndex=-1,this._updatedLayers=[],this._assetNames=[],this._spriteTags=[],this._spriteInks=[],this._spriteAlphas=[],this._spriteColors=[],this._spriteMouseCaptures=[],this._spriteXOffsets=[],this._spriteYOffsets=[],this._spriteZOffsets=[],this._animationNumber=0}initialize(t){return this.reset(),t instanceof re&&(this._type=t.type,this._data=t,!0)}dispose(){super.dispose(),this._data=null,this._updatedLayers=null,this._assetNames=null,this._spriteTags=null,this._spriteInks=null,this._spriteAlphas=null,this._spriteColors=null,this._spriteMouseCaptures=null,this._spriteXOffsets=null,this._spriteYOffsets=null,this._spriteZOffsets=null}reset(){super.reset(),this.setDirection(-1),this._data=null,this._updatedLayers=[],this._assetNames=[],this._spriteTags=[],this._spriteInks=[],this._spriteAlphas=[],this._spriteColors=[],this._spriteMouseCaptures=[],this._spriteXOffsets=[],this._spriteYOffsets=[],this._spriteZOffsets=[],this.setSpriteCount(0)}resetLayers(t,e){this._cacheDirection===e&&this._cacheScale===t||(this._updatedLayers=[],this._assetNames=[],this._spriteTags=[],this._spriteInks=[],this._spriteAlphas=[],this._spriteColors=[],this._spriteMouseCaptures=[],this._spriteXOffsets=[],this._spriteYOffsets=[],this._spriteZOffsets=[],this._cacheDirection=e,this._cacheScale=t,this._cacheSize=this.getValidSize(t),this.setLayerCount((this._data&&this._data.getLayerCount(t)||0)+this.getAdditionalLayerCount()))}update(t,e,s,i){if(!t)return;const n=t.scale;let r=!1;this.updateObject(n,t.direction.x)&&(r=!0),this.updateModel(n)&&(r=!0);let a=0;i?this._animationNumber=this._animationNumber|this.updateAnimation(n):(a=this.updateAnimation(n)|this._animationNumber,this._animationNumber=0),(r||0!==a)&&(this.updateSprites(n,r,a),this._scale=n,this.updateSpriteCounter++)}updateObject(t,e){if(!this.object)return!1;if(this.updateObjectCounter===this.object.updateCounter&&t===this._scale&&this._lastCameraAngle===e)return!1;let s=this.object.getDirection().x-(e+135);if(s=(s%360+360)%360,this._data){const e=this._data.getValidDirection(t,s);this.setDirection(e)}return this._lastCameraAngle=e,this._scale=t,this.updateObjectCounter=this.object.updateCounter,this.resetLayers(t,this._direction),!0}updateModel(t){const e=this.object&&this.object.model;if(!e)return!1;if(this.updateModelCounter===e.updateCounter)return!1;this._selectedColor=e.getValue(At.a.FURNITURE_COLOR),this._clickUrl=e.getValue(At.a.FURNITURE_AD_URL),this._furnitureLift=e.getValue(At.a.FURNITURE_LIFT_AMOUNT)||0;let s=e.getValue(At.a.FURNITURE_ALPHA_MULTIPLIER);return isNaN(s)&&(s=1),this._alphaMultiplier!==s&&(this._alphaMultiplier=s,this._alphaChanged=!0),this.updateModelCounter=e.updateCounter,!0}updateSprites(t,e,s){if(this._layerCount!==this.totalSprites&&this.setSpriteCount(this._layerCount),e){let e=this.totalSprites-1;for(;e>=0;)this.updateSprite(t,e),e--}else{let e=0;for(;s>0;)s&&this.updateSprite(t,e),e++,s>>=1}this._alphaChanged=!1}updateSprite(e,s){const i=this.getSpriteAssetName(e,s),n=this.getSprite(s);if(i&&n){const r=this.getAsset(i,s);if(r&&r.texture){n.visible=!0,n.type=this._type,n.texture=r.texture,n.flipH=r.flipH,n.flipV=r.flipV,n.direction=this._direction;let a=0;s!==this._shadowLayerIndex?(n.tag=this.getLayerTag(e,this._direction,s),n.alpha=this.getLayerAlpha(e,this._direction,s),n.color=this.getLayerColor(e,s,this._selectedColor),n.offsetX=r.offsetX+this.getLayerXOffset(e,this._direction,s),n.offsetY=r.offsetY+this.getLayerYOffset(e,this._direction,s),n.blendMode=this.getLayerInk(e,this._direction,s),n.alphaTolerance=this.getLayerIgnoreMouse(e,this._direction,s)?Ut._Str_9268:Ut._Str_9735,a=this.getLayerZOffset(e,this._direction,s),a-=.001*s):(n.offsetX=r.offsetX,n.offsetY=r.offsetY+this.getLayerYOffset(e,this._direction,s),n.alpha=48*this._alphaMultiplier,n.alphaTolerance=Ut._Str_9268,a=1),n.relativeDepth=a*t.DEPTH_MULTIPLIER,n.name=i,n._Str_3582=this.getLibraryAssetNameForSprite(r,n),n.posture=this.getPostureForAsset(e,r.source),n.clickHandling=!1}else this.resetSprite(n)}else n&&this.resetSprite(n)}getLibraryAssetNameForSprite(t,e){return t.source}getPostureForAssetFile(t,e){return null}resetSprite(t){t&&(t.texture=null,t.offsetX=0,t.offsetY=0,t.flipH=!1,t.flipV=!1,t.relativeDepth=0)}getSpriteAssetName(t,e){if(!this._data||e>=re.LAYER_LETTERS.length)return"";let s=this._assetNames[e],i=this._updatedLayers[e];return s&&s.length||(s=this.cacheSpriteAssetName(t,e,!0),i=1!==this._cacheSize),i&&(s+=this.getFrameNumber(t,e)),s}cacheSpriteAssetName(t,e,s){const i=s?this._cacheSize:this.getValidSize(t);let n="";const r=1!==i;if(n=e!==this._shadowLayerIndex?re.LAYER_LETTERS[e]||"":"sd",""===n)return null;const a=this._type+(r?"_"+i+"_"+n+"_"+this._direction+"_":"_icon_"+n);return s&&(this._assetNames[e]=a,this._updatedLayers[e]=r),a}getLayerTag(t,e,s){const i=this._spriteTags[s];if(void 0!==i)return i;if(!this._data)return ee.DEFAULT_TAG;const n=this._data.getLayerTag(t,e,s);return this._spriteTags[s]=n,n}getLayerInk(t,e,s){const i=this._spriteInks[s];if(void 0!==i)return i;if(!this._data)return ee.DEFAULT_INK;const n=this._data.getLayerInk(t,e,s);return this._spriteInks[s]=n,n}getLayerAlpha(t,e,s){if(!this._alphaChanged){const t=this._spriteAlphas[s];if(void 0!==t)return t}if(!this._data)return ee.DEFAULT_ALPHA;let i=this._data.getLayerAlpha(t,e,s);return null!==this._alphaMultiplier&&(i*=this._alphaMultiplier),this._spriteAlphas[s]=i,i}getLayerColor(t,e,s){const i=this._spriteColors[e];if(void 0!==i)return i;if(!this._data)return te.DEFAULT_COLOR;const n=this._data.getLayerColor(t,e,s);return this._spriteColors[e]=n,n}getLayerIgnoreMouse(t,e,s){const i=this._spriteMouseCaptures[s];if(void 0!==i)return i;if(!this._data)return ee.DEFAULT_IGNORE_MOUSE;const n=this._data.getLayerIgnoreMouse(t,e,s);return this._spriteMouseCaptures[s]=n,n}getLayerXOffset(t,e,s){const i=this._spriteXOffsets[s];if(void 0!==i)return i;if(!this._data)return ee.DEFAULT_XOFFSET;const n=this._data.getLayerXOffset(t,e,s);return this._spriteXOffsets[s]=n,n}getLayerYOffset(t,e,s){if(s===this._shadowLayerIndex)return Math.ceil(32*this._furnitureLift);const i=this._spriteYOffsets[s];if(void 0!==i)return i;if(!this._data)return ee.DEFAULT_YOFFSET;const n=this._data.getLayerYOffset(t,e,s);return this._spriteYOffsets[s]=n,n}getLayerZOffset(t,e,s){const i=this._spriteZOffsets[s];if(void 0!==i)return i;if(!this._data)return ee.DEFAULT_ZOFFSET;const n=this._data.getLayerZOffset(t,e,s);return this._spriteZOffsets[s]=n,n}getValidSize(t){return this._data?this._data.getValidSize(t):t}setLayerCount(t){this._layerCount=t,this._shadowLayerIndex=t-this.getAdditionalLayerCount()}setDirection(t){this._direction!==t&&(this._direction=t)}getAdditionalLayerCount(){return 1}updateAnimation(t){return 0}getFrameNumber(t,e){return 0}getPostureForAsset(t,e){return null}getAsset(t,e=-1){return this.asset?this.asset.getAsset(t):null}get direction(){return this._direction}}return t.DEPTH_MULTIPLIER=Math.sqrt(.5),t.TYPE=Ct.a.FURNITURE_STATIC,t})(),ce=(()=>{class t extends oe{constructor(){super(),this._state=-1,this._animationData=new Jt,this._animationScale=0,this._animationChangeTime=0,this._animatedLayerCount=0,this._directionChanged=!1}initialize(t){return t instanceof ae&&super.initialize(t)}dispose(){super.dispose(),this._animationData&&(this._animationData.dispose(),this._animationData=null)}get animatedLayerCount(){return this._animatedLayerCount}get animationId(){return this._animationData.animationId}getAnimationId(e){return this.animationId!==t.DEFAULT_ANIMATION_ID&&this._data.hasAnimation(this._animationScale,this.animationId)?this.animationId:t.DEFAULT_ANIMATION_ID}updateObject(t,e){if(super.updateObject(t,e)){const t=this.object.getState(0);return t!==this._state&&(this.setAnimation(t),this._state=t,this._animationChangeTime=this.object.model.getValue(At.a.FURNITURE_STATE_UPDATE_TIME)||0),!0}return!1}updateModel(t){if(super.updateModel(t)){if(this.usesAnimationResetting()){const t=this.object.model.getValue(At.a.FURNITURE_STATE_UPDATE_TIME);t>this._animationChangeTime&&(this._animationChangeTime=t,this.setAnimation(this._state))}const t=this.object.model.getValue(At.a.FURNITURE_AUTOMATIC_STATE_INDEX);if(!isNaN(t)){const e=this._data.getAnimationId(this._animationScale,t);this.setAnimation(e)}return!0}return!1}isPlayingTransition(t,e){return!(!Qt.isTransitionFromAnimation(t.animationId)&&!Qt.isTransitionToAnimation(t.animationId)||e!==t.animationAfterTransitionId||t.animationOver)}getCurrentState(t){const e=t.animationId;return Qt.isTransitionFromAnimation(e)||Qt.isTransitionToAnimation(e)?t.animationAfterTransitionId:e}setAnimation(t){this._data&&this.setSubAnimation(this._animationData,t,this._state>=0)}setSubAnimation(t,e,s=!0){const i=t.animationId;if(s){if(this.isPlayingTransition(t,e))return!1;const s=this.getCurrentState(t);if(e!==s){if(!this._data.isImmediateChange(this._animationScale,e,s)){let i=Qt.getTransitionFromAnimationId(s);this._data.hasAnimation(this._animationScale,i)?(t.animationAfterTransitionId=e,e=i):(i=Qt.getTransitionToAnimationId(e),this._data.hasAnimation(this._animationScale,i)&&(t.animationAfterTransitionId=e,e=i))}}else if(Qt.isTransitionFromAnimation(t.animationId)){const s=Qt.getTransitionToAnimationId(e);this._data.hasAnimation(this._animationScale,s)&&(t.animationAfterTransitionId=e,e=s)}else if(!Qt.isTransitionToAnimation(t.animationId)&&this.usesAnimationResetting()){const i=Qt.getTransitionFromAnimationId(s);if(this._data.hasAnimation(this._animationScale,i))t.animationAfterTransitionId=e,e=i;else{const s=Qt.getTransitionToAnimationId(e);this._data.hasAnimation(this._animationScale,s)&&(t.animationAfterTransitionId=e,e=s)}}}return i!==e&&(t.animationId=e,!0)}getLastFramePlayed(t){return this._animationData.getLastFramePlayed(t)}resetAllAnimationFrames(){this._animationData&&this._animationData.setLayerCount(this._animatedLayerCount)}updateAnimation(t){if(!this._data)return 0;t!==this._animationScale&&(this._animationScale=t,this._animatedLayerCount=this._data.getLayerCount(t),this.resetAllAnimationFrames());const e=this.updateAnimations(t);return this._directionChanged=!1,e}updateAnimations(t){if(this._animationData.animationOver&&!this._directionChanged)return 0;const e=this.updateFramesForAnimation(this._animationData,t);return this._animationData.animationOver&&(Qt.isTransitionFromAnimation(this._animationData.animationId)||Qt.isTransitionToAnimation(this._animationData.animationId))&&(this.setAnimation(this._animationData.animationAfterTransitionId),this._animationData.animationOver=!1),e}updateFramesForAnimation(e,s){if(e.animationOver&&!this._directionChanged)return 0;const i=this.getAnimationId(e);let n=e.frameCounter;n||(n=this._data.getStartFrame(s,i,this._direction)),n+=t.FRAME_INCREASE_AMOUNT,e.frameCounter=n,e.animationOver=!0;let r=!1,a=this._animatedLayerCount-1,o=0,c=1<<this._animatedLayerCount-1;for(;a>=0;){let _=0;if(r=e.getAnimationPlayed(a),!r||this._directionChanged){let h=e.getLastFramePlayed(a),l=e.getFrame(a);l&&l.isLastFrame&&l.remainingFrameRepeats<=t.FRAME_INCREASE_AMOUNT&&(h=!0),(this._directionChanged||!l||l.remainingFrameRepeats>=0&&(l.remainingFrameRepeats=l.remainingFrameRepeats-t.FRAME_INCREASE_AMOUNT)<=0)&&(_=Kt.SEQUENCE_NOT_DEFINED,l&&(_=l.activeSequence),l=_===Kt.SEQUENCE_NOT_DEFINED?this._data.getFrame(s,i,this._direction,a,n):this._data.getFrameFromSequence(s,i,this._direction,a,_,l.activeSequenceOffset+l.repeats,n),e.setFrame(a,l),o|=c),l&&l.remainingFrameRepeats!=Kt.FRAME_REPEAT_FOREVER?e.animationOver=!1:(h=!0,r=!0),e.setLastFramePlayed(a,h),e.setAnimationPlayed(a,r)}c>>=1,a--}return o}getFrameNumber(t,e){const s=this._animationData.getFrame(e);return s?s.id:super.getFrameNumber(t,e)}getLayerXOffset(t,e,s){const i=super.getLayerXOffset(t,e,s),n=this._animationData.getFrame(s);return n?i+n.x:i}getLayerYOffset(t,e,s){const i=super.getLayerYOffset(t,e,s),n=this._animationData.getFrame(s);return n?i+n.y:i}usesAnimationResetting(){return!1}setDirection(t){this._direction!==t&&(super.setDirection(t),this._directionChanged=!0)}}return t.FRAME_INCREASE_AMOUNT=1,t.TYPE=Ct.a.FURNITURE_ANIMATED,t.DEFAULT_ANIMATION_ID=0,t})(),_e=(()=>{class t extends ce{constructor(){super(),this._badgeAssetNameNormalScale="",this._badgeAssetNameSmallScale="",this._badgeVisibleInState=-1}updateModel(t){let e=super.updateModel(t);if(!isNaN(this.object.model.getValue(At.a.FURNITURE_BADGE_IMAGE_STATUS))&&0!==this.object.model.getValue(At.a.FURNITURE_BADGE_IMAGE_STATUS)&&""===this._badgeAssetNameNormalScale){this._badgeAssetNameNormalScale=this.object.model.getValue(At.a.FURNITURE_BADGE_ASSET_NAME),""===this._badgeAssetNameSmallScale&&(this._badgeAssetNameSmallScale=this._badgeAssetNameNormalScale+"_32");const t=this.object.model.getValue(At.a.FURNITURE_BADGE_VISIBLE_IN_STATE);isNaN||(this._badgeVisibleInState=t),e=!0}return e}getSpriteAssetName(e,s){return this.getLayerTag(e,this.direction,s)!==t.BADGE||-1!==this._badgeVisibleInState&&this.object.getState(0)!==this._badgeVisibleInState?super.getSpriteAssetName(e,s):32===e?this._badgeAssetNameSmallScale:this._badgeAssetNameNormalScale}getLayerXOffset(e,s,i){let n=super.getLayerXOffset(e,s,i);if(this.getLayerTag(e,s,i)===t.BADGE){const t=this.getAsset(32===e?this._badgeAssetNameSmallScale:this._badgeAssetNameNormalScale,i);t&&(n+=64===e?(40-t.width)/2:(20-t.width)/2)}return n}getLayerYOffset(e,s,i){let n=super.getLayerYOffset(e,s,i);if(this.getLayerTag(e,s,i)===t.BADGE){const t=this.getAsset(32===e?this._badgeAssetNameSmallScale:this._badgeAssetNameNormalScale,i);t&&(n+=64===e?(40-t.height)/2:(20-t.height)/2)}return n}}return t.BADGE="BADGE",t})(),he=(()=>{class t extends oe{constructor(){super(),this._imageUrl=null,this._shortUrl=null,this._imageReady=!1,this._offsetX=0,this._offsetY=0,this._offsetZ=0}dispose(){super.dispose(),this._imageUrl&&this.asset&&this.asset.disposeAsset(this._imageUrl)}updateObject(t,e){return!!super.updateObject(t,e)&&(this._imageReady&&this.checkAndCreateImageForCurrentState(),!0)}updateModel(t){const e=super.updateModel(t);if(e&&(this._offsetX=this.object.model.getValue(At.a.FURNITURE_BRANDING_OFFSET_X),this._offsetY=this.object.model.getValue(At.a.FURNITURE_BRANDING_OFFSET_Y),this._offsetZ=this.object.model.getValue(At.a.FURNITURE_BRANDING_OFFSET_Z)),this._imageReady){if(this.checkIfImageChanged())return this._imageReady=!1,this._imageUrl=null,!0}else if(this._imageReady=this.checkIfImageReady(),this._imageReady)return this.checkAndCreateImageForCurrentState(),!0;return e}imageReady(t,e){this._imageUrl=t?e:null}checkIfImageChanged(){const t=this.object.model.getValue(At.a.FURNITURE_BRANDING_IMAGE_URL);return!(t&&t===this._imageUrl||(this.asset&&this.asset.disposeAsset(this._imageUrl),0))}checkIfImageReady(){if(!this.object||!this.object.model)return!1;const t=this.object.model.getValue(At.a.FURNITURE_BRANDING_IMAGE_URL);if(!t)return!1;if(this._imageUrl&&this._imageUrl===t)return!1;if(1===this.object.model.getValue(At.a.FURNITURE_BRANDING_IMAGE_STATUS)){const e=_.a.instance.core.asset.getTexture(t);return!!e&&(this.imageReady(e,t),!0)}return!1}checkAndCreateImageForCurrentState(){if(!this._imageUrl)return;const t=_.a.instance.core.asset.getTexture(this._imageUrl);t&&this.asset.addAsset(this._imageUrl,t,!0,0,0,!1,!1)}getSpriteAssetName(e,s){return this.getLayerTag(e,this._direction,s)===t.BRANDED_IMAGE&&this._imageUrl?this._imageUrl:super.getSpriteAssetName(e,s)}getLayerIgnoreMouse(e,s,i){return this.getLayerTag(e,s,i)===t.BRANDED_IMAGE||super.getLayerIgnoreMouse(e,s,i)}}return t.BRANDED_IMAGE="branded_image",t})();class le extends he{getLayerXOffset(t,e,s){return super.getLayerXOffset(t,e,s)+this._offsetX}getLayerYOffset(t,e,s){return super.getLayerYOffset(t,e,s)+this._offsetY}getLayerZOffset(t,e,s){return super.getLayerZOffset(t,e,s)+this._offsetZ}}let ue=(()=>{class t extends ce{constructor(){super(),this._stateQueue=[],this._running=!1}setAnimation(e){if(-1===e&&!this._running)return this._running=!0,this._stateQueue=[],void this._stateQueue.push(t._Str_4186);if(e>=0&&e<=7){if(this._running)return this._running=!1,this._stateQueue=[],this._stateQueue.push(t.ANIMATION_ID_OFFSET_SLOW1),this._stateQueue.push(t.ANIMATION_ID_OFFSET_SLOW2+e),void this._stateQueue.push(e);super.setAnimation(e)}}updateAnimation(t){return this.getLastFramePlayed(0)&&this._stateQueue.length&&super.setAnimation(this._stateQueue.shift()),super.updateAnimation(t)}}return t.ANIMATION_ID_OFFSET_SLOW1=20,t.ANIMATION_ID_OFFSET_SLOW2=9,t._Str_4186=-1,t})();class de extends oe{}let ge=(()=>{class t extends ce{getFrameNumber(e,s){const i=this.getLayerTag(e,this.direction,s),n=this.object.getState(0);switch(i){case t.SECONDS_SPRITE:return Math.floor(n%60%10);case t.TEN_SECONDS_SPRITE:return Math.floor(n%60/10);case t.MINUTES_SPRITE:return Math.floor(n/60%10);case t.TEN_MINUTES_SPRITE:return Math.floor(n/60/10%10);default:return super.getFrameNumber(e,s)}}get animationId(){return 0}}return t.SECONDS_SPRITE="seconds_sprite",t.TEN_SECONDS_SPRITE="ten_seconds_sprite",t.MINUTES_SPRITE="minutes_sprite",t.TEN_MINUTES_SPRITE="ten_minutes_sprite",t})();class me extends wt{}let pe=(()=>{class t extends ce{constructor(){super(),this._Str_22237=null,this._Str_10040=null,this._Str_21698=-1,this._Str_16232=!1}get _Str_23660(){return!(null==this._Str_10040)}_Str_6645(t){this._Str_10040=t,this._Str_16232=!0}updateModel(t){const e=super.updateModel(t);return this._Str_16232||this._Str_21698!==this.direction?(this._Str_25236(),!0):e}_Str_25236(){null!=this.asset&&(this._Str_10040?this._Str_20857(this._Str_10040,64):this.asset.disposeAsset(this._Str_15493(64)),this._Str_16232=!1,this._Str_21698=this.direction)}_Str_20857(e,s){let i=0;for(;i<this.totalSprites;){if(this.getLayerTag(s,this.direction,i)===t.THUMBNAIL){const t=this.cacheSpriteAssetName(s,i,!1)+this.getFrameNumber(s,i),n=this.getAsset(t,i);if(n){const t=this._Str_25562(e,n),i=this._Str_15493(s);this.asset.disposeAsset(i),this.asset.addAsset(i,t,!0,n.offsetX,n.offsetY,!1,!1)}return}i++}}_Str_25562(t,e){const s=new i.i,n=e.width/t.width;switch(this.direction){case 2:s.a=n,s.b=-.5*n,s.c=0,s.d=1.1*n,s.tx=0,s.ty=.5*n*t.width;break;case 0:case 4:s.a=n,s.b=.5*n,s.c=0,s.d=1.1*n,s.tx=0,s.ty=0;break;default:s.a=n,s.b=0,s.c=0,s.d=n,s.tx=0,s.ty=0}const r=i.n.from(t);return r.transform.setFromMatrix(s),H.a.generateTexture(r,new i.k(0,0,e.width,e.height))}getSpriteAssetName(e,s){return this._Str_10040&&this.getLayerTag(e,this.direction,s)===t.THUMBNAIL?this._Str_15493(e):super.getSpriteAssetName(e,s)}_Str_15493(t){return this._Str_22237=this._Str_12961(this.object.id,64),this._Str_22237}_Str_12961(t,e){return[this._type,t,"thumb",e].join("_")}}return t.THUMBNAIL="THUMBNAIL",t})();class fe extends pe{constructor(){super(),this._cachedUrl=null}updateModel(t){if(this.object){const t=this.getThumbnailURL();if(this._cachedUrl!==t)if(this._cachedUrl=t,this._cachedUrl&&""!==this._cachedUrl){const e=new Image;e.src=t,e.crossOrigin="*",e.onload=()=>{const t=i.p.from(e);this._Str_6645(t)}}else this._Str_6645(null)}return super.updateModel(t)}getThumbnailURL(){throw new Error("This method must be overridden!")}}class Ee extends fe{constructor(){super(),this._url=null,this._typePrefix=null}getThumbnailURL(){if(!this.object)return null;if(this._url)return this._url;const t=this.object.model.getValue(At.a.FURNITURE_DATA);if(!t||""===t)return null;this.object.type.indexOf("")>=0&&(this._typePrefix=this.object.type.indexOf("")>=0?"":"postcards/selfie/");let e=JSON.parse(t).w;return e=this._Str_18056(e),this._url=e,this._url}_Str_18056(t){return-1===(t=t.replace(".png","_small.png")).indexOf(".png")&&(t+="_small.png"),t}}class Se extends ce{}class Ie extends Se{}class Re extends oe{}let be=(()=>{class t extends ce{constructor(){super(),this._color1=t.DEFAULT_COLOR_1,this._color2=t.DEFAULT_COLOR_2}updateModel(t){const e=super.updateModel(t);return!!e&&(this._color1=this.object.model.getValue(At.a.FURNITURE_GUILD_CUSTOMIZED_COLOR_1),this._color2=this.object.model.getValue(At.a.FURNITURE_GUILD_CUSTOMIZED_COLOR_2),e)}getLayerColor(t,e,s){switch(this.getLayerTag(t,this._direction,e)){case"COLOR1":return this._color1;case"COLOR2":return this._color2}return super.getLayerColor(t,e,s)}}return t.DEFAULT_COLOR_1=15658734,t.DEFAULT_COLOR_2=4934475,t})();class ve extends pe{}let Te=(()=>{class t extends ce{constructor(){super(),this._stateQueue=[],this._running=!1}setAnimation(e){if(-1===e&&!this._running)return this._running=!0,this._stateQueue=[],this._stateQueue.push(t._Str_7627),void this._stateQueue.push(t._Str_4186);if(e>0&&e<=t.ANIMATION_ID_OFFSET_SLOW1){if(this._running)return this._running=!1,this._stateQueue=[],this._stateQueue.push(t.ANIMATION_ID_OFFSET_SLOW1+e),this._stateQueue.push(t.ANIMATION_ID_OFFSET_SLOW2+e),void this._stateQueue.push(e);super.setAnimation(e)}}updateAnimation(t){return this.getLastFramePlayed(1)&&this.getLastFramePlayed(2)&&this.getLastFramePlayed(3)&&this._stateQueue.length&&super.setAnimation(this._stateQueue.shift()),super.updateAnimation(t)}}return t.ANIMATION_ID_OFFSET_SLOW1=10,t.ANIMATION_ID_OFFSET_SLOW2=20,t._Str_7627=31,t._Str_4186=32,t})();class Oe extends re{constructor(){super(),this._avatarData=new Bt}dispose(){super.dispose(),this._avatarData&&(this._avatarData.dispose(),this._avatarData=null)}createAvatarImage(t,e,s=null,i=null,n=null){return this._avatarData.createAvatarImage(t,e,s,i,n)}set avatarManager(t){this._avatarData.avatarManager=t}}let ye=(()=>{class t extends oe{constructor(){super(),this._mannequinScale=-1,this._figure=null,this._gender=null,this._dynamicAssetName=null,this._needsUpdate=!1,this._placeHolderFigure="hd-99999-99998",this._disposed=!1}initialize(t){return t instanceof Oe&&super.initialize(t)}dispose(){this._disposed||(this._disposed=!0,this._dynamicAssetName&&this.asset&&(this.asset.disposeAsset(this._dynamicAssetName),this._dynamicAssetName=null),super.dispose())}updateObject(t,e){const s=super.updateObject(t,e);return s&&this._mannequinScale!==t&&(this._mannequinScale=t,this.updateAvatar()),s}updateModel(t){let e=super.updateModel(t);if(e){const t=this.object.model.getValue(At.a.FURNITURE_MANNEQUIN_FIGURE)||null;t&&(this._figure=t+"."+this._placeHolderFigure,this._gender=this.object.model.getValue(At.a.FURNITURE_MANNEQUIN_GENDER)||null,this.updateAvatar())}return e=e||this._needsUpdate,this._needsUpdate=!1,e}updateAvatar(t=!1){if(!this.avatarExists()||t){const t=this._data.createAvatarImage(this._figure,this._mannequinScale,this._gender,this);t&&(t.setDirection(Lt.a.FULL,this.direction),this._dynamicAssetName&&this.asset.disposeAsset(this._dynamicAssetName),this.asset.addAsset(this._Str_10185(),t.getImage(Lt.a.FULL,!1,1,!1),!0),this._dynamicAssetName=this._Str_10185(),this._needsUpdate=!0,t.dispose())}}avatarExists(){return this._figure&&null!==this.getAsset(this._Str_10185())}_Str_10185(){return"mannequin_"+this._figure+"_"+this._mannequinScale+"_"+this.direction+"_"+this.object.id}resetFigure(t){t===this._figure&&this.updateAvatar(!0)}getSpriteAssetName(e,s){const i=this.getLayerTag(e,this.direction,s);return this._figure&&i===t.AVATAR_IMAGE_SPRITE_TAG&&this.avatarExists()?this._Str_10185():super.getSpriteAssetName(e,s)}getLayerXOffset(e,s,i){return this.getLayerTag(e,s,i)===t.AVATAR_IMAGE_SPRITE_TAG&&this.avatarExists()?-this.getSprite(i).width/2:super.getLayerXOffset(e,s,i)}getLayerYOffset(e,s,i){return this.getLayerTag(e,s,i)===t.AVATAR_IMAGE_SPRITE_TAG&&this.avatarExists()?-this.getSprite(i).height:super.getLayerYOffset(e,s,i)}get disposed(){return this._disposed}}return t.AVATAR_IMAGE_SPRITE_TAG="avatar_image",t})();class Ae extends ce{}class Ce extends ce{}class Me extends oe{}let Ue=(()=>{class t extends ce{constructor(){super(),this._stateQueue=[],this._animationCounter=-1}setAnimation(e){return e===t._Str_18395&&(this._stateQueue=[],this._stateQueue.push(t._Str_15915),this._animationCounter=t._Str_16054),super.setAnimation(e)}updateAnimation(t){return this._animationCounter>0&&this._animationCounter--,this._animationCounter||this._stateQueue.length&&super.setAnimation(this._stateQueue.shift()),super.updateAnimation(t)}usesAnimationResetting(){return!0}}return t._Str_4186=3,t._Str_18395=2,t._Str_15915=1,t._Str_16054=15,t})();class De extends ce{usesAnimationResetting(){return!0}}class we extends he{imageReady(t,e){super.imageReady(t,e),t&&this.setImageOffset(t.width,t.height)}setImageOffset(t,e){const s=new qt;s.setDirection(1,0,-e),s.setDirection(3,0,0),s.setDirection(5,-t,0),s.setDirection(7,-t,-e),s.setDirection(4,-t/2,-e/2),this._imageOffset=s}getLayerXOffset(t,e,s){if(this._imageOffset){const t=this._imageOffset.getXOffset(e,0);if(void 0!==t)return t+this._offsetX}return super.getLayerXOffset(t,e,s)+this._offsetX}getLayerYOffset(t,e,s){if(this._imageOffset){const t=this._imageOffset.getYOffset(e,0);if(void 0!==t)return t+this._offsetY}return super.getLayerYOffset(t,e,s)+this._offsetY}getLayerZOffset(t,e,s){return super.getLayerZOffset(t,e,s)+-this._offsetZ}}let Ne=(()=>{class t extends ce{getFrameNumber(e,s){const i=this.getLayerTag(e,this.direction,s),n=this.object.getState(0);switch(i){case t.ONES_SPRITE:return Math.floor(n%10);case t.TENS_SPRITE:return Math.floor(n/10%10);case t.HUNDREDS_SPRITE:return Math.floor(n/100%10);case t.THOUSANDS_SPRITE:return Math.floor(n/1e3%10);default:return super.getFrameNumber(e,s)}}}return t.ONES_SPRITE="ones_sprite",t.TENS_SPRITE="tens_sprite",t.HUNDREDS_SPRITE="hundreds_sprite",t.THOUSANDS_SPRITE="thousands_sprite",t})();class Le extends ce{}class xe extends oe{getLayerColor(t,e,s){return this._data?this._data.getLayerColor(t,e,s):te.DEFAULT_COLOR}}let Pe=(()=>{class t extends ce{constructor(){super(),this._stateQueue=[],this._running=!1,super.setAnimation(t._Str_11236)}setAnimation(e){if(0===e&&!this._running)return this._running=!0,this._stateQueue=[],this._stateQueue.push(t._Str_7627),void this._stateQueue.push(t._Str_4186);if(e>0&&e<=t.ANIMATION_ID_OFFSET_SLOW2){if(this._running)return this._running=!1,this._stateQueue=[],2===this.direction?(this._stateQueue.push(t.ANIMATION_ID_OFFSET_SLOW1+5),this._stateQueue.push(t.ANIMATION_ID_OFFSET_SLOW2+5)):(this._stateQueue.push(t.ANIMATION_ID_OFFSET_SLOW1+e),this._stateQueue.push(t.ANIMATION_ID_OFFSET_SLOW2+e)),void this._stateQueue.push(t._Str_11236);super.setAnimation(t._Str_11236)}}updateAnimation(t){return this.getLastFramePlayed(11)&&this._stateQueue.length&&super.setAnimation(this._stateQueue.shift()),super.updateAnimation(t)}}return t.ANIMATION_ID_OFFSET_SLOW1=20,t.ANIMATION_ID_OFFSET_SLOW2=10,t._Str_7627=31,t._Str_4186=32,t._Str_11236=30,t})(),Fe=(()=>{class t extends ce{updateObject(t,e){return super.updateObject(t,e),!0}getFrameNumber(e,s){const i=this.object.model.getValue(At.a.FURNITURE_VOTE_COUNTER_COUNT);switch(this.getLayerTag(e,this.direction,s)){case t.ONES_SPRITE:return i%10;case t.TENS_SPRITE:return i/10%10;case t.HUNDREDS_SPRITE:return i/100%10;default:return super.getFrameNumber(e,s)}}getLayerAlpha(e,s,i){if(this.object.model.getValue(At.a.FURNITURE_VOTE_COUNTER_COUNT)===t._Str_17839)switch(this.getLayerTag(e,s,i)){case t.ONES_SPRITE:case t.TENS_SPRITE:case t.HUNDREDS_SPRITE:return 0}return super.getLayerAlpha(e,s,i)}}return t.ONES_SPRITE="ones_sprite",t.TENS_SPRITE="tens_sprite",t.HUNDREDS_SPRITE="hundreds_sprite",t._Str_17839=-1,t})(),ke=(()=>{class t extends ce{getFrameNumber(e,s){const i=this.object.model.getValue(At.a.FURNITURE_VOTE_MAJORITY_RESULT);switch(this.getLayerTag(e,this.direction,s)){case t.ONES_SPRITE:return i%10;case t.TENS_SPRITE:return i/10%10;case t.HUNDREDS_SPRITE:return i/100%10;default:return super.getFrameNumber(e,s)}}getLayerAlpha(e,s,i){const n=this.object.model.getValue(At.a.FURNITURE_VOTE_MAJORITY_RESULT);if(-1!==t._Str_16109.indexOf(this.object.getState(0))||n===t._Str_17618)switch(this.getLayerTag(e,s,i)){case t.ONES_SPRITE:case t.TENS_SPRITE:case t.HUNDREDS_SPRITE:return 0}return super.getLayerAlpha(e,s,i)}}return t.ONES_SPRITE="ones_sprite",t.TENS_SPRITE="tens_sprite",t.HUNDREDS_SPRITE="hundreds_sprite",t._Str_16109=[-1,1],t._Str_17618=-1,t})();class We extends ce{}let Ve=(()=>{class t extends ne{constructor(t,e){super(t,e),this._posturesToAnimations=new Map,this._gesturesToAnimations=new Map,this._defaultPosture=null}processPostures(t){if(!t)return!1;for(const e in t){const s=t[e];s&&(this._posturesToAnimations.get(s.id)||(null===this._defaultPosture&&(this._defaultPosture=s.id),this._posturesToAnimations.set(s.id,s.animationId)))}return void 0!==this._posturesToAnimations.get(this._defaultPosture)}processGestures(t){if(!t)return!1;for(const e in t){const s=t[e];s&&(this._gesturesToAnimations.get(s.id)||this._gesturesToAnimations.set(s.id,s.animationId))}return!0}postureToAnimation(t){return this._posturesToAnimations.get(t)||(t=this._defaultPosture),this._posturesToAnimations.get(t)}_Str_18284(t){return"ded"===t}gestureToAnimation(e){return this._gesturesToAnimations.get(e)?this._gesturesToAnimations.get(e):t.DEFAULT}_Str_14207(t,e){if(t>=0&&t<this._posturesToAnimations.size){const e=this._posturesToAnimations.keys();for(;;){const s=e.next();if(s.done)return null;if(t<=0)return s.value;--t}}return e?this._defaultPosture:null}_Str_17844(t){if(t>=0&&t<this._gesturesToAnimations.size){const e=this._gesturesToAnimations.keys();for(;;){const s=e.next();if(s.done)return null;if(t<=0)return s.value;--t}}return null}_Str_17976(t){for(const e of this._gesturesToAnimations.keys())if(this._gesturesToAnimations.get(e)===t)return e;return null}get totalPostures(){return this._posturesToAnimations.size}get totalGestures(){return this._gesturesToAnimations.size}}return t.DEFAULT=-1,t})();class Ge extends ae{constructor(){super(),this._isAllowedToTurnHead=!0}createSizeData(t,e,s){return t>1?new Ve(e,s):new ne(e,s)}defineVisualizations(t){return this._isAllowedToTurnHead=!0,super.defineVisualizations(t)}processVisualElement(t,e,s){if(!t||!e||!s)return!1;switch(e){case"postures":if(!(t instanceof Ve&&t.processPostures(s)))return!1;break;case"gestures":if(!(t instanceof Ve&&t.processGestures(s)))return!1;break;default:if(!super.processVisualElement(t,e,s))return!1}return!0}postureToAnimation(t,e){const s=this.getSizeData(t);return s?s.postureToAnimation(e):Ve.DEFAULT}_Str_18284(t,e){const s=this.getSizeData(t);return!!s&&s._Str_18284(e)}gestureToAnimation(t,e){const s=this.getSizeData(t);return s?s.gestureToAnimation(e):Ve.DEFAULT}_Str_14207(t,e,s){const i=this.getSizeData(t);return i?i._Str_14207(e,s):null}_Str_17844(t,e){const s=this.getSizeData(t);return s?s._Str_17844(e):null}_Str_17976(t,e){const s=this.getSizeData(t);return s?s._Str_17976(e):null}totalPostures(t){const e=this.getSizeData(t);return e?e.totalPostures:0}totalGestures(t){const e=this.getSizeData(t);return e?e.totalGestures:0}get isAllowedToTurnHead(){return this._isAllowedToTurnHead}}let He=(()=>{class t extends ce{constructor(){for(super(),this._data=null,this._posture="",this._gesture="",this._isSleeping=!1,this._headDirection=-1,this._headOnly=!1,this._nonHeadSprites=[],this._headSprites=[],this._saddleSprites=[],this._animationOver=!1,this._paletteIndex=-1,this._paletteName="",this._customLayerIds=[],this._customPartIds=[],this._customPaletteIds=[],this._isRiding=!1,this._color=16777215,this._previousAnimationDirection=-1,this._animationStates=[];this._animationStates.length<t._Str_16677;)this._animationStates.push(new Jt)}initialize(t){return t instanceof Ge&&super.initialize(t)}dispose(){if(super.dispose(),this._animationStates){for(;this._animationStates.length;){const t=this._animationStates[0];t&&t.dispose(),this._animationStates.pop()}this._animationStates=null}}getAnimationId(t){return t.animationId}update(t,e,s,i){super.update(t,e,s,i)}updateModel(t){const e=this.object&&this.object.model;if(!e)return!1;if(this.updateModelCounter===e.updateCounter)return!1;const s=e.getValue(At.a.FIGURE_POSTURE),i=e.getValue(At.a.FIGURE_GESTURE);e.getValue(At.a.FIGURE_POSTURE),this.setPostureAndGesture(s,i);let n=e.getValue(At.a.FURNITURE_ALPHA_MULTIPLIER)||null;(null===n||isNaN(n))&&(n=1),this._alphaMultiplier!==n&&(this._alphaMultiplier=n,this._alphaChanged=!0),this._isSleeping=e.getValue(At.a.FIGURE_SLEEP)>0;const r=e.getValue(At.a.HEAD_DIRECTION);this._headDirection=!isNaN(r)&&this._data.isAllowedToTurnHead?r:this.object.getDirection().x;const a=e.getValue(At.a.PET_PALETTE_INDEX),o=e.getValue(At.a.PET_CUSTOM_LAYER_IDS),c=e.getValue(At.a.PET_CUSTOM_PARTS_IDS),_=e.getValue(At.a.PET_CUSTOM_PALETTE_IDS),h=e.getValue(At.a.PET_IS_RIDING),l=e.getValue(At.a.PET_HEAD_ONLY),u=e.getValue(At.a.PET_COLOR);return a!==this._paletteIndex&&(this._paletteIndex=a,this._paletteName=this._paletteIndex.toString()),this._customLayerIds=o||[],this._customPartIds=c||[],this._customPaletteIds=_||[],this._isRiding=!isNaN(h)&&h>0,this._headOnly=!isNaN(l)&&l>0,isNaN(u)||this._color===u||(this._color=u),this.updateModelCounter=e.updateCounter,!0}updateAnimation(t){if(this.object){const t=this.object.getDirection().x;t!==this._previousAnimationDirection&&(this._previousAnimationDirection=t,this.resetAllAnimationFrames())}return super.updateAnimation(t)}setPostureAndGesture(e,s){e!==this._posture&&(this._posture=e,this._Str_16058(t._Str_16082,this._data.postureToAnimation(this._scale,e))),this._data._Str_18284(this._scale,e)&&(s=null),s!==this._gesture&&(this._gesture=s,this._Str_16058(t._Str_17658,this._data.gestureToAnimation(this._scale,s)))}_Str_22634(t){return t>=0&&t<this._animationStates.length?this._animationStates[t]:null}_Str_16058(t,e){const s=this._Str_22634(t);s&&this.setSubAnimation(s,e)&&(this._animationOver=!1)}resetAllAnimationFrames(){this._animationOver=!1;let t=this._animationStates.length-1;for(;t>=0;){const e=this._animationStates[t];e&&e.setLayerCount(this.animatedLayerCount),t--}}updateAnimations(t){if(this._animationOver)return 0;let e=!0,s=0,i=0;for(;i<this._animationStates.length;){const n=this._animationStates[i];n&&!n.animationOver&&(s|=this.updateFramesForAnimation(n,t),n.animationOver?(Qt.isTransitionFromAnimation(n.animationId)||Qt.isTransitionToAnimation(n.animationId))&&(this._Str_16058(i,n.animationAfterTransitionId),e=!1):e=!1),i++}return this._animationOver=e,s}getSpriteAssetName(e,s){if(this._headOnly&&this._Str_24824(s))return null;if(this._isRiding&&this._parser3(s))return null;const i=this.totalSprites;if(s<i-t._Str_7490){const n=this.getValidSize(e);if(s<i-(1+t._Str_7490)){if(s>=re.LAYER_LETTERS.length)return null;const t=re.LAYER_LETTERS[s];return 1===n?this._type+"_icon_"+t:this._type+"_"+n+"_"+t+"_"+this.getDirection(e,s)+"_"+this.getFrameNumber(n,s)}return this._type+"_"+n+"_sd_"+this.getDirection(e,s)+"_0"}return null}getLayerColor(e,s,i){return s<this.totalSprites-t._Str_7490?this._color:16777215}getLayerXOffset(t,e,s){let i=super.getLayerXOffset(t,e,s),n=this._animationStates.length-1;for(;n>=0;){const t=this._animationStates[n];if(t){const e=t.getFrame(s);e&&(i+=e.x)}n--}return i}getLayerYOffset(t,e,s){let i=super.getLayerYOffset(t,e,s),n=this._animationStates.length-1;for(;n>=0;){const t=this._animationStates[n];if(t){const e=t.getFrame(s);e&&(i+=e.y)}n--}return i}getLayerZOffset(t,e,s){return this._data?this._data.getLayerZOffset(t,this.getDirection(t,s),s):ee.DEFAULT_ZOFFSET}getDirection(t,e){return this._Str_23973(e)?this._data.getValidDirection(t,this._headDirection):this._direction}getFrameNumber(t,e){let s=this._animationStates.length-1;for(;s>=0;){const t=this._animationStates[s];if(t){const s=t.getFrame(e);if(s)return s.id}s--}return super.getFrameNumber(t,e)}_Str_23973(e){if(void 0===this._headSprites[e]){const s=this._data.getLayerTag(this._scale,se._Str_9471,e)===t.HEAD,i=this._data.getLayerTag(this._scale,se._Str_9471,e)===t.HAIR;this._headSprites[e]=!(!s&&!i)}return this._headSprites[e]}_Str_24824(e){if(void 0===this._nonHeadSprites[e])if(e<this.totalSprites-(1+t._Str_7490)){const s=this._data.getLayerTag(this._scale,se._Str_9471,e);this._nonHeadSprites[e]=!!(s&&s.length>0&&s!==t.HEAD&&s!==t.HAIR)}else this._nonHeadSprites[e]=!0;return this._nonHeadSprites[e]}_parser3(e){return void 0===this._saddleSprites[e]&&(this._saddleSprites[e]=this._data.getLayerTag(this._scale,se._Str_9471,e)===t.SADDLE),this._saddleSprites[e]}getAsset(t,e=-1){if(!this.asset)return null;const s=this._customLayerIds.indexOf(e);let i=this._paletteName,n=-1,r=-1;return s>-1&&(n=this._customPartIds[s],r=this._customPaletteIds[s],i=r>-1?r.toString():this._paletteName),!isNaN(n)&&n>-1&&(t=t+"_"+n),this.asset.getAssetWithPalette(t,i)}getAdditionalLayerCount(){return super.getAdditionalLayerCount()+t._Str_7490}setLayerCount(t){super.setLayerCount(t),this._headSprites=[]}getPostureForAsset(t,e){const s=e.split("_");let i=s.length,n=0;for(;n<s.length;){if("64"===s[n]||"32"===s[n]){i=n+3;break}n++}let r=null;if(i<s.length){let e=s[i];e=e.split("@")[0],r=this._data._Str_14207(t,parseInt(e)/100,!1),r||(r=this._data._Str_17976(t,parseInt(e)/100))}return r}}return t.TYPE=Ct.a.PET_ANIMATED,t.HEAD="head",t.SADDLE="saddle",t.HAIR="hair",t._Str_7490=1,t._Str_13277=1e3,t.PET_EXPERIENCE_BUBBLE_PNG="pet_experience_bubble_png",t._Str_16082=0,t._Str_17658=1,t._Str_16677=2,t})(),Be=(()=>{class t{constructor(t,e,s){this.type=t,this.loc=e,this.category=s}get loc(){return this._loc}set loc(t){this._loc||(this._loc=new m.a),this._loc.assign(t)}get type(){return this._type}set type(t){this._type=t}get category(){return this._category}set category(t){this._category=t}dispose(){this._loc=null}}return t.WINDOW="window",t.HOLE="hole",t})();class je{constructor(){this._masks=[]}get masks(){return this._masks}}class Ke{constructor(){this._masks=new Map}get _Str_6845(){return this._masks.size}dispose(){this._masks&&(this.reset(),this._masks=null)}initialize(t){if(!t)return!1;if(this._masks.clear(),t.masks.length)for(const e of t.masks){if(!e)continue;const t=e.locations.length?e.locations[0]:null;t&&this._masks.set(e.id,new Be(e.type,t,e.category))}return!0}reset(){for(const t of this._masks.values())t&&t.dispose();this._masks.clear()}addMask(t,e,s,i){const n=new Be(e,s,i);this._masks.delete(t),this._masks.set(t,n)}_Str_23574(t){const e=this._masks.get(t);return!!e&&(this._masks.delete(t),e.dispose(),!0)}_Str_5598(){const t=new je;for(const[e,s]of this._masks.entries()){if(!s)continue;const i=this._Str_21678(s),n=this._Str_21644(s),r=this._Str_19038(s);i&&n&&r&&t.masks.push({id:e,type:i,category:n,locations:[{x:r.x,y:r.y,z:r.z}]})}return t}_Str_19038(t){return t?t.loc:null}_Str_21678(t){return t?t.type:null}_Str_21644(t){return t?t.category:null}get masks(){return this._masks}}var ze=s("mkz/"),Ye=s("BFtu");class Xe{constructor(t=null,e=0,s=!1){this._assetNames=[],this._maskAssetNames=[],this._maskAssetLocations=[],this._maskAssetFlipHs=[],this._maskAssetFlipVs=[],null!=t&&(this._maskAssetNames=t._maskAssetNames,this._maskAssetLocations=t._maskAssetLocations,this._maskAssetFlipHs=t._maskAssetFlipHs,this._maskAssetFlipVs=t._maskAssetFlipVs),this._color=e,this._alignBottom=s}addMask(t,e,s,i){this._maskAssetNames.push(t),this._maskAssetLocations.push(e),this._maskAssetFlipHs.push(s),this._maskAssetFlipVs.push(i)}_Str_22862(t){this._assetNames.push(t)}set z(t){this._z=t}get z(){return this._z}set cornerPoints(t){this._points=t}get cornerPoints(){return this._points}get color(){return this._color}get _Str_21807(){return this._maskAssetNames}get _Str_20731(){return this._maskAssetLocations}get _Str_21810(){return this._maskAssetFlipHs}get _Str_19044(){return this._maskAssetFlipVs}_Str_14945(){return this._alignBottom}get _Str_17636(){return this._assetNames}}class Ze{constructor(t,e,s){this._type=t,this._leftSideLoc=e,this._rightSideLoc=s}get type(){return this._type}get _Str_5120(){return this._leftSideLoc}get _Str_4659(){return this._rightSideLoc}}class qe{constructor(t,e,s,i){this._leftSideLoc=t,this._rightSideLoc=e,this._leftSideLength=s,this._rightSideLength=i}get _Str_5120(){return this._leftSideLoc}get _Str_4659(){return this._rightSideLoc}get _Str_9124(){return this._leftSideLength}get _Str_12156(){return this._rightSideLength}}class Qe{constructor(t,e){this._bitmap=t,this._timeStamp=e}dispose(){this._bitmap=null}get bitmap(){return this._bitmap}get timeStamp(){return this._timeStamp}}let Je=(()=>{class t{constructor(){this._Str_16737=1,this._Str_16979=16777216,this._Str_25697=69069,this._Str_23320=5}static _Str_17384(e=1){t._Str_3699||(t._Str_3699=new t),t._Str_3699._Str_15634=e}static _Str_26085(e=16777216){t._Str_3699||(t._Str_3699=new t),t._Str_3699._Str_25321=e}static _Str_1612(e,s,i){return t._Str_3699||(t._Str_3699=new t),t._Str_3699._Str_24535(e,s,i)}static _Str_23572(e,s){return t._Str_3699||(t._Str_3699=new t),t._Str_3699._Str_24231(e,s)}set _Str_15634(t){this._Str_16737=t}set _Str_25321(t){t<1&&(t=1),this._Str_16979=t}dispose(){}_Str_24535(t,e,s){const i=[];let n=0;for(;n<t;)i.push(this._Str_19361(e,s-e)),n++;return i}_Str_24231(t,e){if(t>e||e>1e3)return null;const s=[];let i=0;for(;i<=e;)s.push(i),i++;const n=[];let r=0;for(;r<t;){const t=this._Str_19361(0,s.length-1);n.push(s[t]),s.splice(t,1),r++}return n}_Str_24980(){let t=this._Str_25697*this._Str_16737+this._Str_23320;return t<0&&(t=-t),t%=this._Str_16979,this._Str_16737=t,t}_Str_19361(t,e){let s=this._Str_24980();return e<1?t:(s=t+s/this._Str_16979*e,s)}}return t._Str_21045=1,t._Str_20078=16777216,t._Str_3699=null,t})(),$e=(()=>{class t{constructor(e,s,n,r,a,o,c,_,h=0,l=0,u=0,d=0){if(this._Str_4795=null,this._Str_1720=0,this._height=0,this._Str_5886=[],this._Str_4047=[],this._Str_5088=[],this._Str_8341=[],this._Str_14495=[],this._Str_16308=_,this._Str_1049=null,this._Str_2730=null,this._Str_4891=!1,this._Str_5545=null,this._Str_5221=new m.a,this._Str_5221.assign(e),this._location=new m.a,this._location.assign(s),this._Str_2920=new m.a,this._Str_2920.assign(n),this._Str_2943=new m.a,this._Str_2943.assign(r),this._normal=m.a.crossProduct(this._Str_2920,this._Str_2943),this._normal.length>0&&this._normal.multiply(1/this._normal.length),null!=c)for(const t of c){if(!t)continue;const e=new m.a;e.assign(t),this._Str_5886.push(e)}this._disposed=!1,this._Str_3816=!1,this._Str_576=null,this._Str_13946=!0,this._Str_3406=-1,this._offset=new i.j,this._relativeDepth=0,this._type=a,this._color=0,this._rasterizer=null,this._Str_7367=!0,this._Str_2708=new Map,this._Str_2820=new m.a,this._Str_2745=new m.a,this._Str_2639=new m.a,this._Str_2766=new m.a,this._Str_1720=0,this._height=0,this._Str_20541=h,this._Str_19707=l,this._Str_21079=u,this._Str_22024=d,this._Str_4542=o,this._uniqueId=++t._uniqueIdCounter}static blend(t,e){return 0}set _Str_14801(t){t!==this._Str_7367&&(this._Str_7367||this._Str_11000(),this._Str_7367=t)}get _Str_14801(){return this._Str_7367}get bitmapData(){if(!this.visible||!this._Str_1049)return null;let t=Ts.getTextureCache(this._Str_1049);return t||(t=H.a.generateTexture(this._Str_1049,new i.k(0,0,this._Str_1720,this._height)),Ts.addTextureCache(this._Str_1049,t)),t}get visible(){return this._Str_3816&&this._Str_7367}get offset(){return this._offset}get relativeDepth(){return this._relativeDepth}get color(){return this._color}set color(t){this._color=t}get type(){return this._type}get _Str_5424(){return this._Str_2920}get _Str_4968(){return this._Str_2943}get location(){return this._location}get normal(){return this._normal}get _Str_18448(){return this._Str_13946}set _Str_18448(t){this._Str_13946=t}set rasterizer(t){this._rasterizer=t}set _Str_16279(t){this._Str_4795=t}set id(t){t!==this._Str_576&&(this._Str_11000(),this._Str_576=t)}get uniqueId(){return this._uniqueId}dispose(){if(this._Str_1049&&(this._Str_1049.destroy(),this._Str_1049=null),this._Str_2708){for(const t of this._Str_2708.values())t&&(t.bitmap&&t.bitmap.destroy(),t.dispose());this._Str_2708=null}this._Str_5545=null,this._location=null,this._Str_5221=null,this._Str_2920=null,this._Str_2943=null,this._normal=null,this._rasterizer=null,this._Str_2820=null,this._Str_2745=null,this._Str_2639=null,this._Str_2766=null,this._Str_4047=null,this._Str_5088=null,this._Str_2730&&(this._Str_2730.destroy(),this._Str_2730=null),this._disposed=!0}_Str_24896(t){return this.visible&&this._Str_1049&&t?this._Str_1049.width!==t.width||this._Str_1049.height!==t.height?null:t:null}_Str_17642(t,e){const s=this._Str_2708.get(t);return s&&(this._Str_2708.delete(t),s.dispose()),this._Str_5545=e,this._Str_2708.set(t,e),!0}_Str_11000(t=null){if(this._Str_2708&&this._Str_2708.size){for(const t of this._Str_2708.values())t&&t.dispose();this._Str_2708.clear()}this._Str_5545=null}getTextureIdentifier(t){return this._rasterizer?this._rasterizer.getTextureIdentifier(t,this.normal):t.toString()}_Str_10518(t,e){if(!t)return!1;let s=this._Str_5545;return s||(s=this._Str_2708.get(this.getTextureIdentifier(t.scale))),this._Str_19336(),!(!this._Str_7367||!(!s||s.timeStamp>=0&&e>s.timeStamp||this._Str_4891))}_Str_10114(t,e){if(!t)return null;let s=null;if(this._Str_10518(t,e)){const n=this.getTextureIdentifier(t.scale),r=this._Str_2920.length*t.scale,a=this._Str_2943.length*t.scale,o=t.getCoordinatePosition(this._normal);s=this._Str_5545?this._Str_5545:this._Str_2708.get(n);let c=null;if(s&&(c=s.bitmap),this._rasterizer)s=this._rasterizer.render(c,this._Str_576,r,a,t.scale,o,this._Str_13946,this._Str_20541,this._Str_19707,this._Str_21079,this._Str_22024,e),s&&c&&s.bitmap!==c&&c.destroy();else{const t=new i.f;t.beginFill(16777215),t.drawRect(0,0,r,a),t.endFill(),s=new Qe(t,-1)}s&&(this._Str_17859(s.bitmap,t),this._Str_17642(n,s))}else s=this._Str_5545?this._Str_5545:this._Str_2708.get(this.getTextureIdentifier(t.scale));return s?(this._Str_5545=s,s.bitmap):null}_Str_23649(t){if(!this._Str_4542)return null;const e=new Xe;for(;0<this._Str_4047.length;){const s=this._Str_4047[0];if(s){const n=this._Str_4795._Str_8361(s.type);if(n){const r=n._Str_2125(t.scale);if(r){const a=t.getCoordinatePosition(this._normal),o=n._Str_21021(t.scale,a);if(o){const t=new i.j(this._Str_2730.width*(1-s._Str_5120/this._Str_2920.length)+o.offsetX,this._Str_2730.height*(1-s._Str_4659/this._Str_2943.length)+o.offsetY);e.addMask(r,t,o.flipH,o.flipV)}}}}}return e}_Str_24802(t){const e=t.getScreenPoint(new m.a(0,0,0)),s=t.getScreenPoint(new m.a(0,1,0));return Math.round(this._Str_2920.length*Math.abs(e.x-s.x))}_Str_22136(t){const e=[];if(this._Str_3816){const s=this._Str_23649(t),i=this._rasterizer._Str_8988(this._Str_576);let n=0;for(;n<i.length;){const r=i[n];if(r)if(this._Str_13946&&r._Str_8547()){const i=t.getCoordinatePosition(this._normal),n=r._Str_8547()._Str_21968(i),a=new Xe(s,this._color,n._Str_14945());Je._Str_17384(this._Str_16308);for(const e of n._Str_23721(this._Str_24802(t))){const t=[];for(const s of e._Str_22299()){const e=s._Str_2125(i);e&&t.push(e)}t.length>0&&(e._Str_24523()||t.push(""),a._Str_22862(t))}a._Str_17636.length>0&&e.push(a)}else{const t=new Xe(s,this._color);e.push(t)}n++}e.length||e.push(new Xe(s,this._color))}return e}update(e,s){if(!e||this._disposed)return!1;let n=!1;if(this._Str_3406!=e.updateId&&(n=!0),!(n&&this._Str_7367||this.visible))return!1;if(n){this._Str_5545=null;let s=0;if(s=m.a.cosAngle(e.directionAxis,this.normal),s>-.001)return!!this._Str_3816&&(this._Str_3816=!1,!0);let i=0;for(;i<this._Str_5886.length;){if(s=m.a.cosAngle(e.directionAxis,this._Str_5886[i]),s>-.001)return!!this._Str_3816&&(this._Str_3816=!1,!0);i++}this._Str_18702(e);const n=e.getScreenPosition(this._Str_5221).z;let r=Math.max(this._Str_2820.z,this._Str_2745.z,this._Str_2639.z,this._Str_2766.z)-n;this._type===t.TYPE_FLOOR&&(r-=8*(this._location.z+Math.min(0,this._Str_2920.z,this._Str_2943.z))),this._type===t.TYPE_LANDSCAPE&&(r+=.02),this._relativeDepth=r,this._Str_3816=!0,this._Str_3406=e.updateId}if(n||this._Str_10518(e,s)){if(!this._Str_1049||this._Str_1720!==this._Str_1049.width||this._height!==this._Str_1049.height){if(this._Str_1049){if(this._Str_1049.destroy(),this._Str_1049=null,this._Str_1720<1||this._height<1)return!0}else if(this._Str_1720<1||this._height<1)return!1;const t=new i.f;if(t.beginFill(16777215,0),t.drawRect(0,0,this._Str_1720,this._height),t.endFill(),this._Str_1049=t,!this._Str_1049)return!1}Je._Str_17384(this._Str_16308);const t=this._Str_10114(e,s);return t?(this._Str_17000(e,t),null!==t||n):(this.dispose(),!1)}return!1}_Str_18702(t){this._Str_2820.assign(t.getScreenPosition(this._location)),this._Str_2745.assign(t.getScreenPosition(m.a.sum(this._location,this._Str_2943))),this._Str_2639.assign(t.getScreenPosition(m.a.sum(m.a.sum(this._location,this._Str_2920),this._Str_2943))),this._Str_2766.assign(t.getScreenPosition(m.a.sum(this._location,this._Str_2920))),this._offset=t.getScreenPoint(this._Str_5221),this._Str_2820.x=Math.round(this._Str_2820.x),this._Str_2820.y=Math.round(this._Str_2820.y),this._Str_2745.x=Math.round(this._Str_2745.x),this._Str_2745.y=Math.round(this._Str_2745.y),this._Str_2639.x=Math.round(this._Str_2639.x),this._Str_2639.y=Math.round(this._Str_2639.y),this._Str_2766.x=Math.round(this._Str_2766.x),this._Str_2766.y=Math.round(this._Str_2766.y),this._offset.x=Math.round(this._offset.x),this._offset.y=Math.round(this._offset.y);const e=Math.min(this._Str_2820.x,this._Str_2745.x,this._Str_2639.x,this._Str_2766.x);let s=Math.max(this._Str_2820.x,this._Str_2745.x,this._Str_2639.x,this._Str_2766.x);const i=Math.min(this._Str_2820.y,this._Str_2745.y,this._Str_2639.y,this._Str_2766.y);let n=Math.max(this._Str_2820.y,this._Str_2745.y,this._Str_2639.y,this._Str_2766.y);s-=e,this._offset.x=this._offset.x-e,this._Str_2820.x=this._Str_2820.x-e,this._Str_2745.x=this._Str_2745.x-e,this._Str_2639.x=this._Str_2639.x-e,this._Str_2766.x=this._Str_2766.x-e,n-=i,this._offset.y=this._offset.y-i,this._Str_2820.y=this._Str_2820.y-i,this._Str_2745.y=this._Str_2745.y-i,this._Str_2639.y=this._Str_2639.y-i,this._Str_2766.y=this._Str_2766.y-i,this._Str_1720=s,this._height=n}_Str_17000(e,s){if(null==this._Str_2820||null==this._Str_2745||null==this._Str_2639||null==this._Str_2766||null==s||null==this._Str_1049)return;let n=this._Str_2766.x-this._Str_2639.x,r=this._Str_2766.y-this._Str_2639.y,a=this._Str_2745.x-this._Str_2639.x,o=this._Str_2745.y-this._Str_2639.y;this._type!=t.TYPE_WALL&&this._type!=t.TYPE_LANDSCAPE||(Math.abs(a-s.width)<=1&&(a=s.width),Math.abs(o-s.width)<=1&&(o=s.width),Math.abs(n-s.height)<=1&&(n=s.height),Math.abs(r-s.height)<=1&&(r=s.height));const c=a/s.width,_=o/s.width,h=n/s.height,l=r/s.height,u=new i.i;u.a=c,u.b=_,u.c=h,u.d=l,u.translate(this._Str_2639.x,this._Str_2639.y),this.draw(s,u)}draw(t,e){const s=t.clone();s.transform.setFromMatrix(e),this._Str_1049=s}_Str_25213(){!this._disposed&&this._Str_4542&&this._Str_4047.length&&(this._Str_4891=!0,this._Str_4047=[])}_Str_24569(t,e,s){if(!this._Str_4542)return!1;let i=0;for(;i<this._Str_4047.length;){const n=this._Str_4047[i];if(n&&n.type===t&&n._Str_5120===e&&n._Str_4659===s)return!1;i++}const n=new Ze(t,e,s);return this._Str_4047.push(n),this._Str_4891=!0,!0}_Str_25934(){this._Str_4542&&this._Str_5088.length&&(this._Str_4891=!0,this._Str_5088=[])}_Str_24758(t,e,s,i){if(this._Str_4542){for(const r of this._Str_5088)if(r&&r._Str_5120===t&&r._Str_4659===e&&r._Str_9124===s&&r._Str_12156===i)return!1;const n=new qe(t,e,s,i);return this._Str_5088.push(n),this._Str_4891=!0,!0}return!1}_Str_19336(){if(!this._Str_4891)return;let t,e=!0;if(this._Str_4047.length===this._Str_8341.length){for(const s of this._Str_4047)if(s){t=!1;for(const e of this._Str_8341)if(e&&e.type===s.type&&e._Str_5120===s._Str_5120&&e._Str_4659===s._Str_4659){t=!0;break}if(!t){e=!1;break}}}else e=!1;this._Str_5088.length>this._Str_14495.length&&(e=!1),e&&(this._Str_4891=!1)}_Str_17859(t,e){if(!t||!e)return;if(!this._Str_4542||!this._Str_4047.length&&!this._Str_5088.length&&!this._Str_4891||!this._Str_4795)return;const s=t.width,n=t.height;if(this._Str_19336(),!this._Str_2730||this._Str_2730.width!==s||this._Str_2730.height!==n){this._Str_2730&&(this._Str_2730.destroy(),this._Str_2730=null);const t=new i.f;t.beginFill(16777215,0).drawRect(0,0,s,n).endFill(),this._Str_2730=t,this._Str_4891=!0}if(this._Str_4891){this._Str_8341=[],this._Str_14495=[],this._Str_2730&&this._Str_2730.beginFill(16777215,0).drawRect(0,0,s,n).endFill(),this._Str_11000(t);const i=e.getCoordinatePosition(this._normal);let r=null,a=0,o=0,c=0;for(;c<this._Str_4047.length;){const t=this._Str_4047[c];t&&(r=t.type,a=this._Str_2730.width-this._Str_2730.width*t._Str_5120/this._Str_2920.length,o=this._Str_2730.height-this._Str_2730.height*t._Str_4659/this._Str_2943.length,this._Str_4795._Str_17859(this._Str_2730,r,e.scale,i,a,o),this._Str_8341.push(new Ze(r,t._Str_5120,t._Str_4659))),c++}for(c=0;c<this._Str_5088.length;){const t=this._Str_5088[c];if(t){a=this._Str_2730.width-this._Str_2730.width*t._Str_5120/this._Str_2920.length,o=this._Str_2730.height-this._Str_2730.height*t._Str_4659/this._Str_2943.length;const e=this._Str_2730.width*t._Str_9124/this._Str_2920.length,s=this._Str_2730.height*t._Str_12156/this._Str_2943.length;this._Str_2730.beginFill(16711680).drawRect(a-e,o-s,e,s).endFill(),this._Str_14495.push(new qe(t._Str_9124,t._Str_4659,t._Str_9124,t._Str_12156))}c++}this._Str_4891=!1}this._Str_24790(t,this._Str_2730)}_Str_24790(t,e){if(!t||!e)return;const s=_.a.instance.renderer.extract.canvas(e),n=_.a.instance.renderer.extract.canvas(t),r=n.getContext("2d");r.drawImage(s,0,0);const a=r.getImageData(0,0,n.width,n.height),o=a.data;for(let i=0;i<o.length;i+=4){const t=o[i+1],e=o[i+2];o[i]||t||e||(o[i+3]=0)}r.putImageData(a,0,0);const c=i.p.from(n);c&&t.clear().beginTextureFill({texture:c}).drawRect(0,0,c.width,c.height).endFill()}}return t.ZERO_POINT=new i.j(0,0),t.TYPE_UNDEFINED=0,t.TYPE_WALL=1,t.TYPE_FLOOR=2,t.TYPE_LANDSCAPE=3,t._uniqueIdCounter=1,t})(),ts=(()=>{class t{constructor(t,e=-1,s=1,i=-1,n=1){this._normalMinX=e,this._normalMaxX=s,this._normalMinY=i,this._normalMaxY=n,this._asset=t}get asset(){return this._asset}get normalMinX(){return this._normalMinX}get normalMaxX(){return this._normalMaxX}get normalMinY(){return this._normalMinY}get normalMaxY(){return this._normalMaxY}dispose(){this._asset=null}}return t._Str_3268=-1,t._Str_3271=1,t})(),es=(()=>{class t{constructor(){this._bitmaps=[]}dispose(){for(const t of this._bitmaps)t&&t.dispose();this._bitmaps=null}_Str_16790(t,e=-1,s=1,i=-1,n=1){this._bitmaps.push(new ts(t,e,s,i,n))}getAsset(t){if(!t)return null;for(const e of this._bitmaps)if(e&&t.x>=e.normalMinX&&t.x<=e.normalMaxX&&t.y>=e.normalMinY&&t.y<=e.normalMaxY)return e.asset;return null}}return t._Str_3268=-1,t._Str_3271=1,t})();class ss{constructor(){this._sizes=[],this._maskVisualizations=new Map,this._assetNames=new Map,this._lastMaskVisualization=null,this._lastSize=-1}dispose(){if(this._maskVisualizations){for(const t of this._maskVisualizations.values())t&&t.dispose();this._maskVisualizations=null}this._lastMaskVisualization=null,this._sizes=null}_Str_24540(t){if(this._maskVisualizations.get(t))return null;const e=new es;return this._maskVisualizations.set(t,e),this._sizes.push(t),this._sizes.sort(),e}_Str_8560(t){let e=0;for(;1<this._sizes.length;){if(this._sizes[1]>t){this._sizes[1]-t<t-this._sizes[0]&&(e=1);break}e=1}return e}_Str_24650(t){if(t===this._lastSize)return this._lastMaskVisualization;const e=this._Str_8560(t);return this._lastMaskVisualization=e<this._sizes.length?this._maskVisualizations.get(this._sizes[e]):null,this._lastSize=t,this._lastMaskVisualization}_Str_21021(t,e){const s=this._Str_24650(t);return s?s.getAsset(e):null}_Str_2125(t){return this._assetNames&&this._assetNames.get(t)||null}_Str_24425(t,e){this._assetNames&&this._assetNames.set(t,e)}}class is{constructor(){this._assetCollection=null,this._masks=new Map,this._data=null}get data(){return this._data}dispose(){if(this._assetCollection=null,this._data=null,this._masks&&this._masks.size){for(const t of this._masks.values())t&&t.dispose();this._masks.clear()}}initialize(t){this._data=t}_Str_6703(t){this.data&&(this._assetCollection=t,this._Str_22834(this.data,t))}_Str_22834(t,e){if(t&&e&&t.masks&&t.masks.length){let s=0;for(;s<t.masks.length;){const i=t.masks[s];if(i){const t=i.id;if(this._masks.get(t))continue;const s=new ss;if(i.visualizations&&i.visualizations.length){let t=0;for(;t<i.visualizations.length;){const n=i.visualizations[t];if(n){const t=n.size,i=s._Str_24540(t);if(i){const r=this._Str_25815(n.bitmaps,i,e);s._Str_24425(t,r)}}t++}}this._masks.set(t,s)}s++}}}_Str_25815(t,e,s){if(!t||!t.length)return null;let i=null;for(const n of t){if(!n)continue;const t=n.assetName,r=s.getAsset(t);if(!r)continue;let a=es._Str_3268,o=es._Str_3271,c=es._Str_3268,_=es._Str_3271;void 0!==n.normalMinX&&(a=n.normalMinX),void 0!==n.normalMaxX&&(o=n.normalMaxX),void 0!==n.normalMinY&&(c=n.normalMinY),void 0!==n.normalMaxY&&(_=n.normalMaxY),r.flipH||(i=t),e._Str_16790(r,a,o,c,_)}return i}_Str_17859(t,e,s,n,r,a){const o=this._masks.get(e);if(!o)return!0;const c=o._Str_21021(s,n);if(!c)return!0;const _=c.texture;if(!_)return!0;const h=new i.j(r+c.offsetX,a+c.offsetY),l=new i.i;let u=1,d=1,g=0,m=0;return c.flipH&&(u=-1,g=-_.width),c.flipV&&(d=-1,m=-_.height),l.scale(u,d),l.translate(h.x+g,h.y+m),t.beginTextureFill({texture:_,matrix:l}).drawRect(l.tx,l.ty,_.width,_.height).endFill(),!0}_Str_8361(t){return this._masks&&this._masks.size&&this._masks.get(t)||null}}class ns{static _Str_16640(t){if(!t)return null;const e=new i.i;e.scale(-1,1),e.translate(t.width,0);const s=new i.f;return s.beginTextureFill({texture:t,matrix:e}).drawRect(0,0,t.width,t.height).endFill(),H.a.generateTexture(s)}static _Str_20706(t){if(!t)return null;const e=new i.i;e.scale(1,-1),e.translate(0,t.height);const s=new i.f;return s.beginTextureFill({texture:t,matrix:e}).drawRect(0,0,t.width,t.height).endFill(),H.a.generateTexture(s)}static _Str_20356(t){if(!t)return null;const e=new i.i;e.scale(-1,-1),e.translate(t.width,t.height);const s=new i.f;return s.beginTextureFill({texture:t,matrix:e}).drawRect(0,0,t.width,t.height).endFill(),H.a.generateTexture(s)}}class rs{constructor(t,e,s,i,n){this._x=t,this._y=e,this._speedX=s,this._speedY=i,this._bitmapData=n,isNaN(this._x)&&(this._x=0),isNaN(this._y)&&(this._y=0),isNaN(this._speedX)&&(this._speedX=0),isNaN(this._speedY)&&(this._speedY=0)}get bitmapData(){return this._bitmapData}dispose(){this._bitmapData=null}_Str_6729(t,e,s,n,r){let a=this._x,o=this._y;return s>0&&(a+=this._speedX/s*r/1e3),n>0&&(o+=this._speedY/n*r/1e3),new i.j(a%1*t,o%1*e)}}class as{constructor(t,e){if(this._color=0,this._bitmapData=null,this._isDisposed=!1,this._color=0,this._bitmapData=null,this._isDisposed=!1,this._items=[],t&&e)for(const s of t){if(!s)continue;const t=s.asset;if(t){const i=e.getAsset(t);i&&this._items.push(new rs(s.x,s.y,s.speedX,s.speedY,i))}}}get disposed(){return this._isDisposed}dispose(){if(this._isDisposed=!0,this._bitmapData&&(this._bitmapData.destroy(),this._bitmapData=null),this._items){for(const t of this._items)t&&t.dispose();this._items=[]}}_Str_3355(){this._bitmapData&&(this._bitmapData.destroy(),this._bitmapData=null)}render(t,e,s,n,r,a,o,c,_,h,l){if(null!=t&&t.width==e&&t.height==s||(null==this._bitmapData||this._bitmapData.width!=e||this._bitmapData.height!=s?(null!=this._bitmapData&&this._bitmapData.destroy(),this._bitmapData=(new i.f).drawRect(0,0,e,s)):this._bitmapData.beginFill(16777215).drawRect(0,0,this._bitmapData.width,this._bitmapData.height).endFill(),t=this._bitmapData),o>0&&c>0){let e=0;for(;e<this._items.length;){const s=this._items[e];if(null!=s){const e=s._Str_6729(o,c,_,h,l);if(e.x=e.x-r,e.y=e.y-a,s.bitmapData)if(e.x>0&&e.x+s.bitmapData.width<t.width)t.beginFill(65280).beginTextureFill({texture:s.bitmapData.texture,matrix:new i.i(1,0,0,1,e.x,e.y)}).drawRect(e.x,e.y,s.bitmapData.width,s.bitmapData.height).endFill();else if(e.x>0){const n=t.width-e.x;t.beginFill(65280).beginTextureFill({texture:s.bitmapData.texture,matrix:new i.i(1,0,0,1,e.x,e.y)}).drawRect(e.x,e.y,n,s.bitmapData.height).endFill()}else{const n=s.bitmapData.width+e.x;t.beginFill(65280).beginTextureFill({texture:s.bitmapData.texture,matrix:new i.i(1,0,0,1,e.x,e.y)}).drawRect(0,e.y,n,s.bitmapData.height).endFill()}}e++}}return t}}let os=(()=>{class t{constructor(t,e,s,i=0){this._material=t,this._offset=i,this._align=s,this._color=e,this._bitmapData=null,this._isDisposed=!1}get offset(){return this._offset}get align(){return this._align}get disposed(){return this._isDisposed}dispose(){this._isDisposed=!0,this._material=null,this._Str_3355()}_Str_3355(){this._bitmapData&&(this._bitmapData.destroy(),this._bitmapData=null)}render(e,s,n,r,a,o,c){e&&e.width===s&&e.height===n||(e=null);let _=null;if(this._material)_=this._material.render(null,s,n,r,a,o,c+this.offset,this.align===t.ALIGN_TOP),_&&_!==e&&(this._bitmapData&&this._bitmapData.destroy(),this._bitmapData=_.clone(),_=this._bitmapData);else if(e)e.beginFill(16777215).drawRect(0,0,s,n).endFill(),_=e;else{if(this._bitmapData&&this._bitmapData.width===s&&this._bitmapData.height===n)return this._bitmapData;this._bitmapData&&this._bitmapData.destroy();const t=(new i.f).beginFill(16777215).drawRect(0,0,s,n).endFill();this._bitmapData=t,_=this._bitmapData}if(_&&(_.tint=this._color,e&&_!==e)){let t=Ts.getTextureCache(_);t||(t=H.a.generateTexture(_,new i.k(0,0,s,n)),Ts.addTextureCache(_,t)),e.beginTextureFill({texture:t}).drawRect(0,0,s,n).endFill(),_=e}return _}_Str_8547(){return this._material}_Str_751(){return this._color}}return t._Str_1934=0,t.ALIGN_TOP=1,t._Str_3606=2,t._Str_6914=t.ALIGN_TOP,t})();class cs{constructor(t,e,s){this._layers=[],this._geometry=s,this._cachedBitmapData=null,this._cachedBitmapNormal=new m.a,this._isCached=!1,this._hasAnimationLayers=!1,e<0&&(e=0);let i=0;for(;i<e;)this._layers.push(null),i++}get geometry(){return this._geometry}get _Str_20530(){return this._hasAnimationLayers}dispose(){if(this._layers&&this._layers.length){for(const t of this._layers)t&&t.dispose();this._layers=null}this._geometry=null,this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._cachedBitmapNormal&&(this._cachedBitmapNormal=null)}_Str_3355(){if(this._isCached){if(this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._cachedBitmapNormal&&this._cachedBitmapNormal.assign(new m.a),this._layers&&this._layers.length)for(const t of this._layers)t&&t._Str_3355();this._isCached=!1}}_Str_21464(t,e,s,i,n=0){if(t<0||t>this._layers.length)return!1;let r=this._layers[t];return r&&r.dispose(),r=new os(e,s,i,n),this._layers[t]=r,!0}_Str_23489(t,e,s){if(t<0||t>this._layers.length)return!1;let i=this._layers[t];return i&&i.dispose(),i=new as(e,s),this._layers[t]=i,this._hasAnimationLayers=!0,!0}_Str_8988(){return this._layers}render(t,e,s,n,r,a=0,o=0,c=0,_=0,h=0,l=0,u=0){if(e<1&&(e=1),s<1&&(s=1),t&&t.width===e&&t.height===s||(t=null),this._cachedBitmapData)if(this._cachedBitmapData.width===e&&this._cachedBitmapData.height===s&&m.a.isEqual(this._cachedBitmapNormal,n)){if(!this._Str_20530){if(t){const n=H.a.generateTexture(this._cachedBitmapData,new i.k(0,0,e,s));if(n)return t.beginTextureFill({texture:n}).drawRect(0,0,n.width,n.height).endFill(),t}return this._cachedBitmapData}}else this._cachedBitmapData.destroy(),this._cachedBitmapData=null;if(this._isCached=!0,this._cachedBitmapData)this._cachedBitmapData.beginFill(16777215).drawRect(0,0,e,s).endFill();else{const t=(new i.f).beginFill(16777215).drawRect(0,0,e,s).endFill();this._cachedBitmapData=t}if(t||(t=this._cachedBitmapData),this._cachedBitmapNormal.assign(n),this._layers&&this._layers.length)for(const i of this._layers)i&&(i instanceof os?i.render(t,e,s,n,r,a,o):i instanceof as&&i.render(t,e,s,n,a,o,c,_,h,l,u));if(t&&t!==this._cachedBitmapData){const e=H.a.generateTexture(t,new i.k(0,0,t.width,t.height));return this._cachedBitmapData.beginTextureFill({texture:e}).drawRect(0,0,t.width,t.height).endFill(),t}return this._cachedBitmapData}}class _s{constructor(){this._planeVisualizations=new Map,this._sizes=[],this._lastPlaneVisualization=null,this._lastSize=-1}isStatic(t){return!0}dispose(){for(const t of this._planeVisualizations.values())t&&t.dispose();this._planeVisualizations=null,this._lastPlaneVisualization=null,this._sizes=null,this._lastSize=-1}_Str_3355(){for(const t of this._planeVisualizations.values())t&&t._Str_3355()}_Str_20305(t,e,s){if(this._planeVisualizations.get(t.toString()))return null;const i=new cs(t,e,s);return this._planeVisualizations.set(t.toString(),i),this._sizes.push(t),this._sizes.sort(),i}_Str_8560(t){let e=0,s=1;for(;s<this._sizes.length;){if(this._sizes[s]>t){this._sizes[s]-t<t-this._sizes[s-1]&&(e=s);break}e=s,s++}return e}_Str_6009(t){if(t===this._lastSize)return this._lastPlaneVisualization;const e=this._Str_8560(t);return this._lastPlaneVisualization=e<this._sizes.length?this._planeVisualizations.get(this._sizes[e].toString()):null,this._lastSize=t,this._lastPlaneVisualization}_Str_8988(){return this._Str_6009(this._lastSize)._Str_8988()}}let hs=(()=>{class t extends _s{render(t,e,s,i,n,r,a,o){const c=this._Str_6009(i);if(!c||!c.geometry)return null;const _=c.geometry.getScreenPoint(new m.a(0,0,0)),h=c.geometry.getScreenPoint(new m.a(0,s/c.geometry.scale,0)),l=c.geometry.getScreenPoint(new m.a(e/c.geometry.scale,0,0));let u=0,d=0;if(_&&h&&l){e=Math.round(Math.abs(_.x-l.x)),s=Math.round(Math.abs(_.x-h.x));const t=_.x-c.geometry.getScreenPoint(new m.a(1,0,0)).x;u=a*Math.trunc(Math.abs(t)),d=o*Math.trunc(Math.abs(t))}return c.render(t,e,s,n,r,u,d)}}return t._Str_2531=16777215,t._Str_5433=45,t._Str_5509=30,t})(),ls=(()=>{class t{constructor(t,e,s=1){if(this._cells=[],this._repeatMode=s,this._width=t<1?1:t,this._cachedBitmapData=null,this._cachedBitmapNormal=null,this._cachedBitmapDataOffsetX=0,this._cachedBitmapDataOffsetY=0,this._isCached=!1,this._isStatic=!0,e&&e.length){let t=0;for(;t<e.length;){const s=e[t];s&&(this._cells.push(s),s.isStatic||(this._isStatic=!1)),t++}}}get isStatic(){return this._isStatic}_Str_24523(){return!(this._repeatMode===t._Str_9685)}get width(){return this._width}dispose(){if(this._cells&&this._cells.length){for(const t of this._cells)t&&t.dispose();this._cells=null}this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._cachedBitmapNormal&&(this._cachedBitmapNormal=null)}_Str_3355(){if(this._isCached){if(this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._cachedBitmapNormal&&(this._cachedBitmapNormal.x=0,this._cachedBitmapNormal.y=0,this._cachedBitmapNormal.z=0),this._cells&&this._cells.length)for(const t of this._cells)t&&t._Str_3355();this._isCached=!1}}render(e,s,n,r){let a=0;if(this._repeatMode==t._Str_9685&&(a=this._Str_19857(this._cells,s),e=a),this._cachedBitmapNormal||(this._cachedBitmapNormal=new m.a),this.isStatic){if(this._cachedBitmapData){if(this._cachedBitmapData.height===e&&m.a.isEqual(this._cachedBitmapNormal,s)&&this._cachedBitmapDataOffsetX===n&&this._cachedBitmapDataOffsetY===r)return this._cachedBitmapData;this._cachedBitmapData.destroy(),this._cachedBitmapData=null}}else this._cachedBitmapData&&(this._cachedBitmapData.height===e?this._cachedBitmapData.beginFill(16777215).drawRect(0,0,this._cachedBitmapData.width,e).endFill():(this._cachedBitmapData.destroy(),this._cachedBitmapData=null));if(this._isCached=!0,this._cachedBitmapData||(this._cachedBitmapData=(new i.f).beginFill(16777215).drawRect(0,0,this._width,e).endFill()),this._cachedBitmapNormal.assign(s),this._cachedBitmapDataOffsetX=n,this._cachedBitmapDataOffsetY=r,!this._cells.length)return this._cachedBitmapData;switch(this._repeatMode){case t._Str_9685:this._Str_25839(s);break;case t._Str_6087:console.log("tru2");break;case t._Str_6114:console.log("tru3");break;case t._Str_6187:console.log("tru4");break;case t._Str_6063:console.log("tru5");break;default:this._Str_18711(s,n,r)}return this._cachedBitmapData}_Str_19857(t,e){if(!t||!t.length)return 0;let s=0,i=0;for(;i<t.length;){const n=t[i];n&&(s+=n._Str_9599(e)),i++}return s}_Str_4757(t,e,s,i,n=0,r=0){if(!t||!t.length||!this._cachedBitmapData)return e;let a=0;for(;a<t.length;){let o=null;if(o=s?t[a]:t[t.length-1-a],o){const t=o.render(i,n,r);if(t&&(s||(e-=t.height),t.y=e,this._cachedBitmapData.addChild(t),s&&(e+=t.height),s&&e>=this._cachedBitmapData.height||!s&&e<=0))return e}a++}return e}_Str_25839(t){this._cells.length&&this._cachedBitmapData&&this._Str_4757(this._cells,0,!0,t)}_Str_18711(t,e,s){if(!this._cells.length||!this._cachedBitmapData)return;let i=0;for(;i<this._cachedBitmapData.height;)if(i=this._Str_4757(this._cells,i,!0,t,e,s),!i)return}_Str_22299(){return this._cells}}return t._Str_9685=0,t._Str_7916=1,t._Str_6087=2,t._Str_6114=3,t._Str_6187=4,t._Str_6063=5,t})(),us=(()=>{class t{constructor(e,s=1,i=1,n=-1,r=1,a=-1,o=1){this._repeatMode=1,this._align=1,this._cachedBitmapNormal=null,this._cachedBitmapHeight=0,this._isCached=!1,this._isStatic=!0,this._normalMinX=-1,this._normalMaxX=1,this._normalMinY=-1,this._normalMaxY=1,this._columns=[],e<1&&(e=1);let c=0;for(;c<e;)this._columns.push(null),c++;this._repeatMode=s,this._align=i,this._normalMinX=n,this._normalMaxX=r,this._normalMinY=a,this._normalMaxY=o,this._repeatMode==t._Str_9127&&(this._isStatic=!1)}static _Str_12526(t){return Je._Str_1612(1,0,17631*t)[0]%t}get normalMinX(){return this._normalMinX}get normalMaxX(){return this._normalMaxX}get normalMinY(){return this._normalMinY}get normalMaxY(){return this._normalMaxY}_Str_14945(){return this._align===t._Str_3606}get isStatic(){return this._isStatic}dispose(){this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._cachedBitmapNormal&&(this._cachedBitmapNormal=null)}_Str_3355(){if(this._isCached){if(this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._cachedBitmapNormal&&(this._cachedBitmapNormal.x=0,this._cachedBitmapNormal.y=0,this._cachedBitmapNormal.z=0),this._columns&&this._columns.length)for(const t of this._columns)t&&t._Str_3355();this._isCached=!1}}_Str_22372(t,e,s,i=1){if(t<0||t>=this._columns.length)return!1;const n=new ls(e,s,i),r=this._columns[t];return r&&r.dispose(),this._columns[t]=n,n&&!n.isStatic&&(this._isStatic=!1),!0}render(e,s,n,r,a,o,c,_){if(s<1&&(s=1),n<1&&(n=1),e&&e.width===s&&e.height===n||(e=null),this._cachedBitmapNormal||(this._cachedBitmapNormal=new m.a),this.isStatic){if(this._cachedBitmapData){if(this._cachedBitmapData.width===s&&this._cachedBitmapData.height==n&&m.a.isEqual(this._cachedBitmapNormal,r))return e?(this._Str_17578(e,this._cachedBitmapHeight,c,_),e):this._cachedBitmapData;this._cachedBitmapData.destroy(),this._cachedBitmapData=null}}else this._cachedBitmapData&&(this._cachedBitmapData.width===s&&this._cachedBitmapData.height===n?this._cachedBitmapData.beginFill(16777215).drawRect(0,0,s,n).endFill():(this._cachedBitmapData.destroy(),this._cachedBitmapData=null));if(this._isCached=!0,this._cachedBitmapNormal.assign(r),!a){if(this._cachedBitmapHeight=n,this._cachedBitmapData)this._cachedBitmapData.beginFill(16777215).drawRect(0,0,s,n).endFill();else{const t=(new i.f).beginFill(16777215).drawRect(0,0,s,n).endFill();this._cachedBitmapData=t}return e?(this._Str_17578(e,n,c,_),e):this._cachedBitmapData}if(!this._cachedBitmapData){this._cachedBitmapHeight=n;const t=(new i.f).beginFill(16777215).drawRect(0,0,s,n).endFill();this._cachedBitmapData=t}const h=[];let l=0;for(;l<this._columns.length;){const t=this._columns[l];if(t){const e=t.render(n,r,o,c);e&&h.push(e)}l++}if(!h.length)return e||this._cachedBitmapData;let u=0;switch(this._repeatMode){case t._Str_6087:case t._Str_6114:case t._Str_6187:case t._Str_6063:case t._Str_9127:break;default:u=this._Str_18711(this._cachedBitmapData,h)}return this._cachedBitmapHeight=u,e?(this._Str_17578(e,u,c,_),e):this._cachedBitmapData}_Str_17578(e,s,n,r){if(!e||!this._cachedBitmapData||e===this._cachedBitmapData)return;let a;r||(n=e.height-s-n),a=new i.k(0,this._align==t.ALIGN_TOP?0:this._cachedBitmapData.height-this._cachedBitmapHeight,this._cachedBitmapData.width,this._cachedBitmapHeight);const o=H.a.generateTexture(this._cachedBitmapData,a);o&&e.beginTextureFill({texture:o}).drawRect(0,n,a.width,a.height).endFill()}_Str_25859(t){if(!t||!t.length)return 0;let e=0;for(const s of t)s&&(e+=s.width);return e}_Str_4606(e,s,n,r){if(!e||!s||!s.length)return new i.j(n,0);let a=0,o=null,c=0;for(;c<s.length;){if(o=r?s[c]:s[s.length-1-c],null!=o){r||(n-=o.width);let s=0;this._align==t._Str_3606&&(s=e.height-o.height);let c=Ts.getTextureCache(o);if(c||(c=H.a.generateTexture(o,new i.k(0,0,o.width,o.height)),Ts.addTextureCache(o,c)),e.beginTextureFill({texture:c}),e.drawRect(n,s,c.width,c.height),e.endFill(),o.height>a&&(a=o.height),r&&(n+=o.width),r&&n>=e.width||!r&&n<=0)return new i.j(n,a)}c++}return new i.j(n,a)}_Str_18711(t,e){if(!t||!e||!e.length)return 0;this._Str_25859(e);let s=0,i=0;for(;s<t.width;){const n=this._Str_4606(t,e,s,!0);if(s=n.x,n.y>i&&(i=n.y),!n.x)return i}return i}_Str_23721(e){if(this._repeatMode===t._Str_9127){const s=[];let i=0;for(;i<e;){const e=this._columns[t._Str_12526(this._columns.length)];if(e){if(s.push(e),!(e.width>1))break;i+=e.width}}return s}return this._columns}}return t._Str_7916=1,t._Str_6087=2,t._Str_6114=3,t._Str_6187=4,t._Str_6063=5,t._Str_9127=6,t._Str_18632=t._Str_7916,t._Str_3268=-1,t._Str_3271=1,t.ALIGN_TOP=1,t._Str_3606=2,t._Str_6914=t.ALIGN_TOP,t})(),ds=(()=>{class t{constructor(){this._planeMaterialItems=[],this._isCached=!1}dispose(){if(this._planeMaterialItems&&this._planeMaterialItems.length){for(const t of this._planeMaterialItems)t&&t.dispose();this._planeMaterialItems=null}this._isCached=!1}_Str_3355(){if(this._isCached){if(this._planeMaterialItems&&this._planeMaterialItems.length)for(const t of this._planeMaterialItems)t&&t._Str_3355();this._isCached=!1}}_Str_24503(t,e,s,i=-1,n=1,r=-1,a=1){const o=new us(t,e,s,i,n,r,a);return this._planeMaterialItems.push(o),o}_Str_21968(t){if(!t)return null;if(this._planeMaterialItems&&this._planeMaterialItems.length)for(const e of this._planeMaterialItems)if(e&&t.x>=e.normalMinX&&t.x<=e.normalMaxX&&t.y>=e.normalMinY&&t.y<=e.normalMaxY)return e;return null}render(t,e,s,i,n,r,a,o){e<1&&(e=1),s<1&&(s=1);const c=this._Str_21968(i);return c?(this._isCached=!0,c.render(t,e,s,i,n,r,a,o)):null}}return t._Str_3268=-1,t._Str_3271=1,t})();class gs{constructor(t,e=null,s=null,n=0){if(this._extraItemCount=0,this._cachedBitmapData=null,this._texture=t,this._extraItemOffsets=[],this._extraItemAssets=[],this._extraItemCount=0,e&&e.length&&n>0){let t=0;for(;t<e.length;){const s=e[t];s&&this._extraItemAssets.push(s),t++}if(this._extraItemAssets.length){if(s){let t=0;for(;t<s.length;){const e=s[t];e&&this._extraItemOffsets.push(new i.j(e.x,e.y)),t++}}this._extraItemCount=n}}}get isStatic(){return 0==this._extraItemCount}dispose(){this._texture&&(this._texture.dispose(),this._texture=null),this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._extraItemAssets=null,this._extraItemOffsets=null,this._extraItemCount=0}_Str_3355(){this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null)}_Str_9599(t){if(this._texture){const e=this._texture._Str_4913(t);if(e)return e.height}return 0}render(t,e,s){if(!this._texture)return null;const n=this._texture._Str_4913(t);if(!n)return null;let r=null;if(0!==e||0!==s){for(;e<0;)e+=n.width;for(;s<0;)s+=n.height;const t=new i.q(n,n.width,n.height);t.tilePosition.x=e%n.width,t.tilePosition.y=s%n.height,t.uvRespectAnchor=!0,e&&(t.anchor.x=1,t.scale.x=-1),s&&(t.anchor.y=1,t.scale.y=-1),r=t}else r=new i.n(n);return r||null}_Str_2125(t){return null==this._texture?null:this._texture._Str_2125(t)}}let ms=(()=>{class t{constructor(t,e=-1,s=1,i=-1,n=1,r=null){this._normalMinX=e,this._normalMaxX=s,this._normalMinY=i,this._normalMaxY=n,this._assetName=r,this._bitmap=t}get bitmap(){return this._bitmap}get normalMinX(){return this._normalMinX}get normalMaxX(){return this._normalMaxX}get normalMinY(){return this._normalMinY}get normalMaxY(){return this._normalMaxY}get assetName(){return this._assetName}dispose(){this._bitmap=null}}return t._Str_3268=-1,t._Str_3271=1,t})(),ps=(()=>{class t{constructor(){this._bitmaps=[]}dispose(){if(this._bitmaps){for(const t of this._bitmaps)t&&t.dispose();this._bitmaps=null}}_Str_16790(t,e=-1,s=1,i=-1,n=1,r=null){this._bitmaps.push(new ms(t,e,s,i,n,r))}_Str_4913(t){const e=this._Str_21702(t);return e?e.bitmap:null}_Str_21702(t){if(!t)return null;for(const e of this._bitmaps)if(e&&t.x>=e.normalMinX&&t.x<=e.normalMaxX&&t.y>=e.normalMinY&&t.y<=e.normalMaxY)return e;return null}_Str_2125(t){const e=this._Str_21702(t);return e?e.assetName:null}}return t._Str_3268=-1,t._Str_3271=1,t})(),fs=(()=>{class t{constructor(){this._assetCollection=null,this._textures=new Map,this._materials=new Map,this._planes=new Map,this._geometries=new Map,this._data=null}get data(){return this._data}get _Str_2697(){return this._assetCollection}initializeDimensions(t,e){return!0}dispose(){if(this._planes){for(const t of this._planes.values())t&&t.dispose();this._planes=null}if(this._materials&&(this._Str_21781(),this._materials=null),this._textures&&(this._Str_21447(),this._textures=null),this._geometries){for(const t of this._geometries.values())t&&t.dispose();this._geometries=null}this._data=null,this._assetCollection=null}_Str_3355(){for(const t of this._planes.values())t&&t._Str_3355();for(const t of this._materials.values())t&&t._Str_3355()}initialize(t){this._data=t}_Str_24005(){this._Str_21447(),this._Str_21781(),this._Str_22054()}_Str_21781(){for(const t of this._materials.values())t&&t.dispose();this._materials.clear()}_Str_21447(){for(const t of this._textures.values())t&&t.dispose();this._textures.clear()}_Str_10114(t){return this._textures.get(t)}_Str_8547(t){return this._materials.get(t)}_Str_3491(t){return this._planes.get(t)}_Str_3453(t,e){return!!e&&!this._planes.get(t)&&(this._planes.set(t,e),!0)}_Str_6703(t){this._data&&(this._assetCollection=t,this._Str_22054())}_Str_22054(){this._data&&(this._Str_25281(),this.initializePlanes())}_Str_25281(){this._data.textures&&this._data.textures.length&&this._Str_24250(this._data.textures,this._Str_2697),this._data.materials&&this._data.materials.length&&this._Str_22388(this._data.materials)}initializePlanes(){}_Str_24250(t,e){if(t&&e&&t.length)for(const s of t){if(!s)continue;const t=s.id;if(!this._textures.get(t)){const i=new ps;if(s.bitmaps&&s.bitmaps.length)for(const t of s.bitmaps){if(!t)continue;const s=t.assetName;let n=ps._Str_3268,r=ps._Str_3271,a=ps._Str_3268,o=ps._Str_3271;void 0!==t.normalMinX&&(n=t.normalMinX),void 0!==t.normalMaxX&&(r=t.normalMaxX),void 0!==t.normalMinY&&(a=t.normalMinY),void 0!==t.normalMaxY&&(o=t.normalMaxY);const c=e.getAsset(s);if(c){const t=c.texture;if(t){let e=t;c.flipH&&(e=ns._Str_16640(t)),i._Str_16790(e,n,r,a,o,s)}}}this._textures.set(t,i)}}}_Str_22388(t){if(t&&t.length)for(const e of t){if(!e)continue;const t=e.id,s=new ds;if(e.matrices&&e.matrices.length)for(const i of e.matrices){if(!i)continue;let t=i.repeatMode,e=i.align;const n=us._Str_3268,r=us._Str_3271,a=us._Str_3268,o=us._Str_3271;switch(t){case"borders":t=us._Str_6087;break;case"center":t=us._Str_6114;break;case"first":t=us._Str_6187;break;case"last":t=us._Str_6063;break;case"random":t=us._Str_9127;break;default:t=us._Str_18632}switch(e){case"top":e=us.ALIGN_TOP;break;case"bottom":e=us._Str_3606;break;default:e=us._Str_6914}if(i.columns&&i.columns.length){const c=s._Str_24503(i.columns.length,t,e,n,r,a,o);let _=0;for(;_<i.columns.length;){const t=i.columns[_];t&&this._Str_24431(t,c,_),_++}}}this._materials.set(t,s)}}_Str_24431(t,e,s){if(!t||!e)return;let i=ls._Str_7916;const n=t.width,r=this._Str_25217(t);switch(t.repeatMode){case"borders":i=ls._Str_6087;break;case"center":i=ls._Str_6114;break;case"first":i=ls._Str_6187;break;case"last":i=ls._Str_6063;break;case"none":i=ls._Str_9685;break;default:i=ls._Str_7916}e._Str_22372(s,n,r,i)}_Str_25217(t){if(!t||!t.cells||!t.cells.length)return null;const e=[];let s=0;for(;s<t.cells.length;){const i=t.cells[s];if(i){const t=i.textureId;let s=null,n=null,r=null,a=0;if(i.extras&&i.extras.length){const t=i.extras[0],e=t.types,r=t.offsets;if(e&&r&&e.length&&r.length){const i=r[0];s=this._Str_25465(e[0]),n=this._Str_24448(i),a=n.length,t.limitMax&&(a=t.limitMax)}}if(s&&s.length){r=[];for(const t of s){if(!t)continue;const e=this._assetCollection.getAsset(t);e&&r.push(e)}}const o=this._Str_10114(t),c=new gs(o,r,n,a);e.push(c)}s++}return e&&e.length?e:null}_Str_25465(t){const e=[];if(t&&t.types&&t.types.length){let s=0;for(;s<t.types.length;){const i=t.types[s].assetName;i&&e.push(i),s++}}return e}_Str_24448(t){const e=[];if(t&&t.offsets&&t.offsets.length){let s=0;for(;s<t.offsets.length;){const n=t.offsets[s];e.push(new i.j(n.x,n.y)),s++}}return e}_Str_17204(t,e,s){(e=Math.abs(e))>90&&(e=90),(s=Math.abs(s))>90&&(s=90);const i=`${t}_${Math.round(e)}_${Math.round(s)}`;let n=this._geometries.get(i);return n||(n=new g.a(t,new m.a(e,s),new m.a(-10,0,0)),this._geometries.set(i,n),n)}_Str_9137(t,e){if(t&&e&&e&&e.length)for(const s of e){if(!s)continue;const e=s.size;let i=hs._Str_5433,n=hs._Str_5509;s.horizontalAngle&&(i=s.horizontalAngle),s.verticalAngle&&(n=s.verticalAngle);const r=s.layers,a=t._Str_20305(e,r&&r.length||0,this._Str_17204(e,i,n));if(a&&r&&r.length){let t=0;for(;t<r.length;){const e=r[t];if(e){let s=null,i=os._Str_6914,n=hs._Str_2531,r=os._Str_1934;e.materialId&&(s=this._Str_8547(e.materialId)),e.color&&(n=e.color),e.offset&&(r=e.offset),e.align&&("bottom"===e.align?i=os._Str_3606:"top"==e.align&&(i=os.ALIGN_TOP)),a._Str_21464(t,s,n,i,r)}t++}}}}render(t,e,s,i,n,r,a,o=0,c=0,_=0,h=0,l=0){return null}getTextureIdentifier(t,e){return t.toString()}_Str_8988(e){let s=this._Str_3491(e);return s||(s=this._Str_3491(t.DEFAULT)),s._Str_8988()}}return t.DEFAULT="default",t})(),Es=(()=>{class t extends _s{constructor(){super(...arguments),this._width=0,this._height=0}isStatic(t){const e=this._Str_6009(t);return e?!e._Str_20530:super.isStatic(t)}initializeDimensions(t,e){t<0&&(t=0),e<0&&(e=0),t===this._width&&e===this._height||(this._width=t,this._height=e)}render(t,e,s,i,n,r,a,o,c,_,h){const l=this._Str_6009(i);if(!l||!l.geometry)return null;const u=l.geometry.getScreenPoint(new m.a(0,0,0)),d=l.geometry.getScreenPoint(new m.a(0,0,1)),g=l.geometry.getScreenPoint(new m.a(0,1,0));if(u&&d&&g){e=Math.round(Math.abs((u.x-g.x)*e/l.geometry.scale)),s=Math.round(Math.abs((u.y-d.y)*s/l.geometry.scale));const i=a*Math.abs(u.x-g.x),m=o*Math.abs(u.y-d.y),p=c*Math.abs(u.x-g.x),f=_*Math.abs(u.y-d.y);return l.render(t,e,s,n,r,i,m,p,f,c,_,h)}return null}}return t._Str_2531=16777215,t._Str_5433=45,t._Str_5509=30,t})(),Ss=(()=>{class t extends fs{constructor(){super(...arguments),this._landscapeWidth=0,this._landscapeHeight=0}initializeDimensions(t,e){return t<0&&(t=0),e<0&&(e=0),this._landscapeWidth=t,this._landscapeHeight=e,!0}initializePlanes(){if(!this.data)return;const t=this.data.landscapes;t&&t.length&&this._Str_25478(t)}_Str_25478(t){if(!t)return;const e=Math.trunc(654321*Math.random());for(const s in t){const i=t[s];if(!i)continue;const n=i.id,r=i.animatedVisualizations,a=new Es;for(const t of r){if(!t)continue;const s=t.size;let i=Es._Str_5433,n=Es._Str_5509;t.horizontalAngle&&(i=t.horizontalAngle),t.verticalAngle&&(n=t.verticalAngle);const r=t.layers,o=t.animationLayers,c=r&&r.length||0,h=o&&o.length||0,l=a._Str_20305(s,c+h||0,this._Str_17204(s,i,n));if(l){Je._Str_17384(e);let t=0;if(c)for(;t<r.length;){const e=r[t];if(e){let s=null,i=os._Str_6914,n=Es._Str_2531,r=os._Str_1934;e.materialId&&(s=this._Str_8547(e.materialId)),e.color&&(n=e.color),e.offset&&(r=e.offset),e.align&&("bottom"===e.align?i=os._Str_3606:"top"===e.align&&(i=os.ALIGN_TOP)),l._Str_21464(t,s,n,i,r)}t++}if(t=0,h){const e=[];for(;t<o.length;){const s=o[t];if(s){const t=s.animationItems;if(t&&t.length)for(const s of t)if(s){const t=s.assetId,i=this._Str_21504(s.x||"",s.randomX||""),n=this._Str_21504(s.y||"",s.randomY||""),r=s.speedX?s.speedX/_.a.instance.getConfiguration("animation.fps"):0,a=s.speedY?s.speedY/_.a.instance.getConfiguration("animation.fps"):0;e.push({asset:t,x:i,y:n,speedX:r,speedY:a})}}t++}l._Str_23489(t,e,this._Str_2697)}}}this._Str_3453(n,a)||a.dispose()}}_Str_21504(t,e){let s=0;if(t.length>0&&"%"===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1),s=parseFloat(t)/100),e.length>0){const t=1e4,i=Je._Str_1612(1,0,t)[0]/t;"%"===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1),s+=i*parseFloat(e)/100)}return s}render(e,s,i,n,r,a,o,c=0,_=0,h=0,l=0,u=0){let d=this._Str_3491(s);if(d||(d=this._Str_3491(t.DEFAULT)),!d)return null;e&&e.clear();let g=d.render(e,i,n,r,a,o,c,_,h,l,u);if(g&&g!==e&&(g=g.clone(),!g))return null;let m=null;return m=!d.isStatic(r)&&t._Str_3536>0?new Qe(g,Math.round(u/t._Str_3536)*t._Str_3536+t._Str_3536):new Qe(g,-1),m}getTextureIdentifier(t,e){return e?e.x<0?t+"_0":t+"_1":super.getTextureIdentifier(t,e)}}return t._Str_3536=500,t})();class Is extends fs{initializePlanes(){if(!this.data)return;const t=this.data.floors;t&&t.length&&this._Str_24495(t)}_Str_24495(t){if(t)for(const e in t){const s=t[e];if(!s)continue;const i=s.id,n=s.visualizations,r=new hs;this._Str_9137(r,n),this._Str_3453(i,r)||r.dispose()}}render(t,e,s,i,n,r,a,o=0,c=0,_=0,h=0,l=0){let u=this._Str_3491(e);if(u||(u=this._Str_3491(fs.DEFAULT)),!u)return null;t&&t.beginFill(16777215).drawRect(0,0,t.width,t.height).endFill();let d=u.render(t,s,i,n,r,a,o,c);return d&&d!==t&&(d=d.clone(),!d)?null:new Qe(d,-1)}}let Rs=(()=>{class t extends _s{render(t,e,s,i,n,r){const a=this._Str_6009(i);if(!a||!a.geometry)return null;const o=a.geometry.getScreenPoint(new m.a(0,0,0)),c=a.geometry.getScreenPoint(new m.a(0,0,s/a.geometry.scale)),_=a.geometry.getScreenPoint(new m.a(0,e/a.geometry.scale,0));return o&&c&&_&&(e=Math.round(Math.abs(o.x-_.x)),s=Math.round(Math.abs(o.y-c.y))),a.render(t,e,s,n,r)}}return t._Str_2531=16777215,t._Str_5433=45,t._Str_5509=30,t})();class bs extends fs{initializePlanes(){if(!this.data)return;const t=this.data.walls;t&&t.length&&this._Str_24495(t)}_Str_24495(t){if(t)for(const e in t){const s=t[e];if(!s)continue;const i=s.id,n=s.visualizations,r=new Rs;this._Str_9137(r,n),this._Str_3453(i,r)||r.dispose()}}render(t,e,s,i,n,r,a,o=0,c=0,_=0,h=0,l=0){let u=this._Str_3491(e);if(u||(u=this._Str_3491(fs.DEFAULT)),!u)return null;if(t){const e=t.getBounds();t.clear(),t.drawRect(e.x,e.y,e.width,e.height)}let d=u.render(t,s,i,n,r,a);return d&&d!==t&&(d=d.clone(),!d)?null:new Qe(d,-1)}getTextureIdentifier(t,e){return e?`${t}_${e.x}_${e.y}_${e.z}`:super.getTextureIdentifier(t,e)}}class vs extends Gt.a{constructor(){super(),this._wallRasterizer=new bs,this._floorRasterizer=new Is,this._landscapeRasterizer=new Ss,this._maskManager=new is,this._initialized=!1}initialize(t){const e=t.wallData;e&&this._wallRasterizer.initialize(e);const s=t.floorData;s&&this._floorRasterizer.initialize(s);const i=t.landscapeData;i&&this._landscapeRasterizer.initialize(i);const n=t.maskData;return n&&this._maskManager.initialize(n),!0}onDispose(){this._wallRasterizer&&(this._wallRasterizer.dispose(),this._wallRasterizer=null),this._floorRasterizer&&(this._floorRasterizer.dispose(),this._floorRasterizer=null),this._landscapeRasterizer&&(this._landscapeRasterizer.dispose(),this._landscapeRasterizer=null),this._maskManager&&(this._maskManager.dispose(),this._maskManager=null),super.onDispose()}setGraphicAssetCollection(t){this._initialized||(this._wallRasterizer._Str_6703(t),this._floorRasterizer._Str_6703(t),this._landscapeRasterizer._Str_6703(t),this._maskManager._Str_6703(t),this._initialized=!0)}_Str_3355(){this._wallRasterizer&&this._wallRasterizer._Str_3355(),this._floorRasterizer&&this._floorRasterizer._Str_3355(),this._landscapeRasterizer&&this._landscapeRasterizer._Str_3355()}get wallRasterizer(){return this._wallRasterizer}get floorRasterizer(){return this._floorRasterizer}get landscapeRasterizer(){return this._landscapeRasterizer}get maskManager(){return this._maskManager}}let Ts=(()=>{class t extends wt{constructor(){super(),this._data=null,this._roomPlaneParser=new Ye.a,this._roomPlaneBitmapMaskParser=new Ke,this._geometryUpdateId=-1,this._directionX=0,this._directionY=0,this._directionZ=0,this._floorThickness=1,this._wallThickness=1,this._holeUpdateTime=NaN,this._Str_2540=[],this._Str_4864=[],this._Str_6648=[],this._roomScale=0,this._lastUpdateTime=-1e3,this._updateIntervalTime=250,this._wallType=null,this._floorType=null,this._landscapeType=null,this._colorBackgroundOnly=!0,this._color=16777215,this._redColor=255,this._greenColor=255,this._blueColor=255,this._typeVisibility=[],this._Str_5928=0,this._maskData=null,this._isPlaneSet=!1,this._typeVisibility[$e.TYPE_UNDEFINED]=!1,this._typeVisibility[$e.TYPE_FLOOR]=!0,this._typeVisibility[$e.TYPE_WALL]=!0,this._typeVisibility[$e.TYPE_LANDSCAPE]=!0}static getTextureCache(e){const s=t.RENDER_TEXTURE_CACHE.get(t.LAST_VISUALIZATION);return s?s.getValue(e):null}static addTextureCache(e,s){if(!t.LAST_VISUALIZATION)return;let i=t.RENDER_TEXTURE_CACHE.get(t.LAST_VISUALIZATION);i||(i=new Mt.a,t.RENDER_TEXTURE_CACHE.set(t.LAST_VISUALIZATION,i)),i.add(e,s)}initialize(t){return t instanceof vs&&(this._data=t,super.initialize(t),this._data.setGraphicAssetCollection(this.asset),!0)}dispose(){super.dispose(),this.clearPlanes(),this._Str_2540=null,this._Str_4864=null,this._Str_6648=null,this._roomPlaneParser&&(this._roomPlaneParser.dispose(),this._roomPlaneParser=null),this._roomPlaneBitmapMaskParser&&(this._roomPlaneBitmapMaskParser.dispose(),this._roomPlaneBitmapMaskParser=null),this._data&&(this._data._Str_3355(),this._data=null);const e=t.RENDER_TEXTURE_CACHE.get(this);if(e){for(const t of e.getValues())t.destroy(!0);e.dispose(),t.RENDER_TEXTURE_CACHE.delete(this)}}reset(){super.reset(),this._floorType=null,this._wallType=null,this._landscapeType=null,this._maskData=null,this._geometryUpdateId=-1,this._roomScale=0}update(e,s,i,n){if(!this.object||!e)return;t.LAST_VISUALIZATION=this;let r=0;const a=t.RENDER_TEXTURE_CACHE.get(t.LAST_VISUALIZATION);a&&(r=a.length);const o=this.updateGeometry(e),c=this.object.model;let _=!1;if(this.updateThickness(c)&&(_=!0),this.updateHole(c)&&(_=!0),this._Str_25732()&&a&&r&&setTimeout(()=>{for(;r;){const t=a.getWithIndex(0);t&&(t.destroy(!0),a.remove(a.getKey(0))),r--}},0),_=this.updateMasks(c),!(s<this._lastUpdateTime+this._updateIntervalTime)||o||_){if(this.updatePlanes(c)&&(_=!0),this._Str_16913(e,o,s)&&(_=!0),_){let t=0;for(;t<this._Str_4864.length;){const e=this.getSprite(this._Str_6648[t]),s=this._Str_4864[t];if(e&&s&&s.type!==$e.TYPE_LANDSCAPE)if(this._colorBackgroundOnly){let t=s.color;t=(t>>24<<24)+((t>>16&255)*this._blueColor/255<<16)+((t>>8&255)*this._greenColor/255<<8)+(255&t)*this._redColor/255,e.color=t}else e.color=s.color;t++}this.updateSpriteCounter++}this.updateModelCounter=c.updateCounter,this._lastUpdateTime=s}}updateGeometry(t){if(!t)return!1;if(this._geometryUpdateId===t.updateId)return!1;this._geometryUpdateId=t.updateId,this._boundingRectangle=null;const e=t.direction;return!(!e||e.x===this._directionX&&e.y===this._directionY&&e.z===this._directionZ&&t.scale===this._roomScale||(this._directionX=e.x,this._directionY=e.y,this._directionZ=e.z,this._roomScale=t.scale,0))}updateThickness(t){if(this.updateModelCounter===t.updateCounter)return!1;const e=t.getValue(At.a.ROOM_FLOOR_THICKNESS),s=t.getValue(At.a.ROOM_WALL_THICKNESS);return!(isNaN(e)||isNaN(s)||e===this._floorThickness&&s===this._wallThickness||(this._floorThickness=e,this._wallThickness=s,this.clearPlanes(),0))}updateHole(t){if(this.updateModelCounter===t.updateCounter)return!1;const e=t.getValue(At.a.ROOM_FLOOR_HOLE_UPDATE_TIME);return!isNaN(e)&&e!==this._holeUpdateTime&&(this._holeUpdateTime=e,this.clearPlanes(),!0)}updateMasks(t){if(this.updateModelCounter===t.updateCounter)return!1;let e=!1;const s=t.getValue(At.a.ROOM_PLANE_MASK_XML);s!==this._maskData&&(this._Str_15935(s),this._maskData=s,e=!0);const i=t.getValue(At.a.ROOM_BACKGROUND_COLOR);i!==this._color&&(this._color=i,this._redColor=255&this._color,this._greenColor=this._color>>8&255,this._blueColor=this._color>>16&255,e=!0);const n=t.getValue(At.a.ROOM_COLORIZE_BG_ONLY)||!1;return n!==this._colorBackgroundOnly&&(this._colorBackgroundOnly=n,e=!0),e}updatePlanes(t){if(this.updateModelCounter===t.updateCounter)return!1;const e=t.getValue(At.a.ROOM_FLOOR_TYPE),s=t.getValue(At.a.ROOM_WALL_TYPE),i=t.getValue(At.a.ROOM_LANDSCAPE_TYPE);this.updatePlaneTypes(e,s,i);const n=1===t.getValue(At.a.ROOM_FLOOR_VISIBILITY),r=1===t.getValue(At.a.ROOM_WALL_VISIBILITY),a=1===t.getValue(At.a.ROOM_LANDSCAPE_VISIBILITY);return this.updatePlaneVisibility(n,r,a),!0}clearPlanes(){if(this._Str_2540){for(;this._Str_2540.length;){const t=this._Str_2540[0];t&&t.dispose(),this._Str_2540.pop()}this._Str_2540=[],this._Str_2540=[]}this._isPlaneSet=!1,this._Str_5928=this._Str_5928+1,this.reset()}_Str_25732(){if(!this.object||this._isPlaneSet)return!1;isNaN(this._floorThickness)||(this._roomPlaneParser.floorThicknessMultiplier=this._floorThickness),isNaN(this._wallThickness)||(this._roomPlaneParser.wallThicknessMultiplier=this._wallThickness);const e=this.object.model.getValue(At.a.ROOM_MAP_DATA);if(!this._roomPlaneParser.initializeFromMapData(e))return;const s=this._Str_23949(),i=this._Str_23063();let n=0,r=this.object.model.getValue(At.a.ROOM_RANDOM_SEED),a=0;for(;a<this._roomPlaneParser.planeCount;){const e=this._roomPlaneParser.getPlaneLocation(a),o=this._roomPlaneParser.getPlaneLeftSide(a),c=this._roomPlaneParser.getPlaneRightSide(a),_=this._roomPlaneParser.getPlaneSecondaryNormals(a),h=this._roomPlaneParser.getPlaneType(a);let l=null;if(!(e&&o&&c))return;{const u=m.a.crossProduct(o,c);if(r=7613*r+517,l=null,h===ze.a.PLANE_FLOOR){const s=e.x+o.x+.5,i=e.y+c.y+.5,n=Math.trunc(s)-s,a=Math.trunc(i)-i;l=new $e(this.object.getLocation(),e,o,c,$e.TYPE_FLOOR,!0,_,r,-n,-a),l.color=0!==u.z?t._Str_18544:0!==u.x?t._Str_16664:t._Str_18640,this._data&&(l.rasterizer=this._data.floorRasterizer)}else h===ze.a.PLANE_WALL?(l=new $e(this.object.getLocation(),e,o,c,$e.TYPE_WALL,!0,_,r),(o.length<1||c.length<1)&&(l._Str_18448=!1),l.color=0===u.x&&0===u.y?t._Str_14868:u.y>0?t._Str_14503:0===u.y?t._Str_15851:t._Str_13715,this._data&&(l.rasterizer=this._data.wallRasterizer)):h===ze.a.PLANE_LANDSCAPE?(l=new $e(this.object.getLocation(),e,o,c,$e.TYPE_LANDSCAPE,!0,_,r,n,0,s,i),l.color=u.y>0?t._Str_17403:0==u.y?t._Str_16113:t._Str_18370,this._data&&(l.rasterizer=this._data.landscapeRasterizer),n+=o.length):h==ze.a.PLANE_BILLBOARD&&(l=new $e(this.object.getLocation(),e,o,c,$e.TYPE_WALL,!0,_,r),(o.length<1||c.length<1)&&(l._Str_18448=!1),l.color=0==u.x&&0==u.y?t._Str_14868:u.y>0?t._Str_14503:0==u.y?t._Str_15851:t._Str_13715);if(l){l._Str_16279=this._data.maskManager;let t=0;for(;t<this._roomPlaneParser.getPlaneMaskCount(a);){const e=this._roomPlaneParser.getPlaneMaskLeftSideLoc(a,t),s=this._roomPlaneParser.getPlaneMaskRightSideLoc(a,t),i=this._roomPlaneParser.getPlaneMaskLeftSideLength(a,t),n=this._roomPlaneParser.getPlaneMaskRightSideLength(a,t);l._Str_24758(e,s,i,n),t++}this._Str_2540.push(l)}}a++}return this._isPlaneSet=!0,this._Str_18024(),!0}_Str_18024(){this.setSpriteCount(this._Str_2540.length);let t=0;for(;t<this._Str_2540.length;){const e=this._Str_2540[t],s=this.getSprite(t);e&&s&&e._Str_5424&&e._Str_4968&&(s.alphaTolerance=e.type===$e.TYPE_WALL&&(e._Str_5424.length<1||e._Str_4968.length<1)?Ut._Str_9268:Ut._Str_9735,s.tag=e.type===$e.TYPE_WALL?"plane.wall@"+(t+1):e.type===$e.TYPE_FLOOR?"plane.floor@"+(t+1):"plane@"+(t+1),s.spriteType=u._Str_8616),t++}}_Str_23949(){let t=0,e=0;for(;e<this._roomPlaneParser.planeCount;)this._roomPlaneParser.getPlaneType(e)===ze.a.PLANE_LANDSCAPE&&(t+=this._roomPlaneParser.getPlaneLeftSide(e).length),e++;return t}_Str_23063(){let t=0,e=0;for(;e<this._roomPlaneParser.planeCount;){if(this._roomPlaneParser.getPlaneType(e)===ze.a.PLANE_LANDSCAPE){const s=this._roomPlaneParser.getPlaneRightSide(e);s.length>t&&(t=s.length)}e++}return t>5&&(t=5),t}updatePlaneTypes(t,e,s){if(t!==this._floorType?this._floorType=t:t=null,e!==this._wallType?this._wallType=e:e=null,s!==this._landscapeType?this._landscapeType=s:s=null,!t&&!e&&!s)return!1;let i=0;for(;i<this._Str_2540.length;){const n=this._Str_2540[i];n&&(n.type===$e.TYPE_FLOOR&&t?n.id=t:n.type===$e.TYPE_WALL&&e?n.id=e:n.type===$e.TYPE_LANDSCAPE&&s&&(n.id=s)),i++}return!0}updatePlaneVisibility(t,e,s){t===this._typeVisibility[$e.TYPE_FLOOR]&&e===this._typeVisibility[$e.TYPE_WALL]&&s===this._typeVisibility[$e.TYPE_LANDSCAPE]||(this._typeVisibility[$e.TYPE_FLOOR]=t,this._typeVisibility[$e.TYPE_WALL]=e,this._typeVisibility[$e.TYPE_LANDSCAPE]=s,this._Str_4864=[],this._Str_6648=[])}_Str_16913(e,s,i){if(!e||!this.object)return;this._Str_5928++,s&&(this._Str_4864=[],this._Str_6648=[]);const n=this._Str_4864.length>0;let r=this._Str_4864;this._Str_4864.length||(r=this._Str_2540);let a=0,o=!1,c=0;for(;c<r.length;){let s=c;n&&(s=this._Str_6648[c]);const _=this.getSprite(s);if(_){const h=r[c];h?(_.id=h.uniqueId,h.update(e,i)&&(h.visible&&(a=h.relativeDepth+this._Str_24891+s/1e3,h.type!==$e.TYPE_FLOOR&&(a=h.relativeDepth+this._Str_25403+s/1e3,(h._Str_5424.length<1||h._Str_4968.length<1)&&(a+=.5*t._Str_8621)),this._Str_7421(_,h,"plane "+s+" "+e.scale,a)),o=!0),_.visible!=(h.visible&&this._typeVisibility[h.type])&&(_.visible=!_.visible,o=!0),_.visible&&(n||(this._Str_4864.push(h),this._Str_6648.push(c)))):(_.id=0,_.visible&&(_.visible=!1,o=!0))}c++}return o}_Str_15935(t){if(!t)return;this._roomPlaneBitmapMaskParser.initialize(t);const e=[],s=[];let i=!1,n=0;for(;n<this._Str_2540.length;){const t=this._Str_2540[n];t&&(t._Str_25213(),t.type===$e.TYPE_LANDSCAPE&&e.push(n)),n++}for(const r of this._roomPlaneBitmapMaskParser.masks.values()){const t=this._roomPlaneBitmapMaskParser._Str_21678(r),e=this._roomPlaneBitmapMaskParser._Str_19038(r),n=this._roomPlaneBitmapMaskParser._Str_21644(r);if(e){let r=0;for(;r<this._Str_2540.length;){const a=this._Str_2540[r];if((a.type===$e.TYPE_WALL||a.type===$e.TYPE_LANDSCAPE)&&a&&a.location&&a.normal){const o=m.a.dif(e,a.location);if(Math.abs(m.a.scalarProjection(o,a.normal))<.01&&a._Str_5424&&a._Str_4968){const e=m.a.scalarProjection(o,a._Str_5424),c=m.a.scalarProjection(o,a._Str_4968);a.type===$e.TYPE_WALL||a.type===$e.TYPE_LANDSCAPE&&n===Be.HOLE?a._Str_24569(t,e,c):a.type===$e.TYPE_LANDSCAPE&&(a._Str_14801||(i=!0),a._Str_14801=!0,s.push(r))}}r++}}}for(n=0;n<e.length;){const t=e[n];s.indexOf(t)<0&&(this._Str_2540[t]._Str_14801=!1,i=!0),n++}i&&(this._Str_4864=[],this._Str_6648=[])}_Str_7421(t,e,s,i){const n=e.offset;t.offsetX=-n.x,t.offsetY=-n.y,t.relativeDepth=i,t.color=e.color,t.texture=this._Str_22446(e,s),t.name=s+"_"+this._Str_5928}_Str_22446(t,e){return t.bitmapData}getBoundingRectangle(){return this._boundingRectangle||(this._boundingRectangle=super.getBoundingRectangle()),new i.k(this._boundingRectangle.x,this._boundingRectangle.y,this._boundingRectangle.width,this._boundingRectangle.height)}get _Str_19113(){const t=[];for(const e of this._Str_4864)t.push(e);return t}get _Str_24891(){return t._Str_8621+.1}get _Str_25403(){return t._Str_8621+.5}}return t.LAST_VISUALIZATION=null,t.RENDER_TEXTURE_CACHE=new Map,t._Str_18544=16777215,t._Str_18640=14540253,t._Str_16664=12303291,t._Str_14503=16777215,t._Str_15851=13421772,t._Str_13715=10066329,t._Str_14868=10066329,t._Str_17403=16777215,t._Str_16113=13421772,t._Str_18370=10066329,t._Str_8621=1e3,t})();class Os extends ce{constructor(){super(),this._tileHeight=0}getLayerYOffset(t,e,s){return 1===s?(this._tileHeight=this.object.model.getValue(At.a.TILE_CURSOR_HEIGHT),32*-this._tileHeight):super.getLayerYOffset(t,e,s)}}let ys=(()=>{class t{constructor(){this._visualizationDatas=new Map}getVisualization(t){const e=this.getVisualizationType(t);return e?new e:null}getVisualizationType(t){if(!t)return null;let e=null;switch(t){case Ct.a.ROOM:e=Ts;break;case Ct.a.TILE_CURSOR:e=Os;break;case Ct.a.USER:case Ct.a.BOT:case Ct.a.RENTABLE_BOT:e=jt;break;case Ct.a.PET_ANIMATED:e=He;break;case Ct.a.FURNITURE_STATIC:e=oe;break;case Ct.a.FURNITURE_ANIMATED:e=ce;break;case Ct.a.FURNITURE_RESETTING_ANIMATED:e=De;break;case Ct.a.FURNITURE_BADGE_DISPLAY:e=_e;break;case Ct.a.FURNITURE_BG:e=we;break;case Ct.a.FURNITURE_BB:e=le;break;case Ct.a.FURNITURE_BOTTLE:e=ue;break;case Ct.a.FURNITURE_BUILDER_PLACEHOLDER:e=de;break;case Ct.a.FURNITURE_COUNTER_CLOCK:e=ge;break;case Ct.a.FURNITURE_CUBOID:e=me;break;case Ct.a.FURNITURE_EXTERNAL_IMAGE:e=Ee;break;case Ct.a.FURNITURE_FIREWORKS:e=Se;break;case Ct.a.FURNITURE_GIFT_WRAPPED_FIREWORKS:e=Ie;break;case Ct.a.FURNITURE_GIFT_WRAPPED:e=Re;break;case Ct.a.FURNITURE_GUILD_CUSTOMIZED:e=be;break;case Ct.a.FURNITURE_GUILD_ISOMETRIC_BADGE:e=ve;break;case Ct.a.FURNITURE_HABBOWHEEL:e=Te;break;case Ct.a.FURNITURE_MANNEQUIN:e=ye;break;case Ct.a.FURNITURE_PARTY_BEAMER:e=Ae;break;case Ct.a.FURNITURE_PLANET_SYSTEM:e=Ce;break;case Ct.a.FURNITURE_POSTER:e=Me;break;case Ct.a.FURNITURE_QUEUE_TILE:e=Ue;break;case Ct.a.FURNITURE_SCORE_BOARD:e=Ne;break;case Ct.a.FURNITURE_SOUNDBLOCK:e=Le;break;case Ct.a.FURNITURE_STICKIE:e=xe;break;case Ct.a.FURNITURE_VAL_RANDOMIZER:e=Pe;break;case Ct.a.FURNITURE_VOTE_COUNTER:e=Fe;break;case Ct.a.FURNITURE_VOTE_MAJORITY:e=ke;break;case Ct.a.FURNITURE_WATER_AREA:e=We}return e||(n.a.log("Unknown Visualization: "+t),null)}getVisualizationData(e,s,i){const n=this._visualizationDatas.get(e);if(n)return n;let r=null;switch(s){case Ct.a.FURNITURE_STATIC:case Ct.a.FURNITURE_GIFT_WRAPPED:case Ct.a.FURNITURE_BB:case Ct.a.FURNITURE_BG:case Ct.a.FURNITURE_STICKIE:case Ct.a.FURNITURE_BUILDER_PLACEHOLDER:r=new re;break;case Ct.a.FURNITURE_ANIMATED:case Ct.a.FURNITURE_RESETTING_ANIMATED:case Ct.a.FURNITURE_POSTER:case Ct.a.FURNITURE_HABBOWHEEL:case Ct.a.FURNITURE_VAL_RANDOMIZER:case Ct.a.FURNITURE_BOTTLE:case Ct.a.FURNITURE_PLANET_SYSTEM:case Ct.a.FURNITURE_QUEUE_TILE:case Ct.a.FURNITURE_PARTY_BEAMER:case Ct.a.FURNITURE_COUNTER_CLOCK:case Ct.a.FURNITURE_WATER_AREA:case Ct.a.FURNITURE_SCORE_BOARD:case Ct.a.FURNITURE_FIREWORKS:case Ct.a.FURNITURE_GIFT_WRAPPED_FIREWORKS:case Ct.a.FURNITURE_GUILD_CUSTOMIZED:case Ct.a.FURNITURE_GUILD_ISOMETRIC_BADGE:case Ct.a.FURNITURE_VOTE_COUNTER:case Ct.a.FURNITURE_VOTE_MAJORITY:case Ct.a.FURNITURE_SOUNDBLOCK:case Ct.a.FURNITURE_BADGE_DISPLAY:case Ct.a.FURNITURE_EXTERNAL_IMAGE:case Ct.a.FURNITURE_YOUTUBE:case Ct.a.TILE_CURSOR:r=new ae;break;case Ct.a.FURNITURE_MANNEQUIN:r=new Oe;break;case Ct.a.ROOM:r=new vs;break;case Ct.a.USER:case Ct.a.BOT:case Ct.a.RENTABLE_BOT:r=new Bt;break;case Ct.a.PET_ANIMATED:r=new Ge}return r?r.initialize(i)?((r instanceof Bt||r instanceof Oe)&&(r.avatarManager=_.a.instance.avatar),t.CACHING_ENABLED&&this._visualizationDatas.set(e,r),r):(r.dispose(),null):null}}return t.CACHING_ENABLED=!0,t})();var As=s("ZQhZ");let Cs=(()=>{class t{}return t.DOG=0,t.CAT=1,t.CROCODILE=2,t.TERRIER=3,t.BEAR=4,t.PIG=5,t.LION=6,t.RHINO=7,t.SPIDER=8,t.TURTLE=9,t.CHICKEN=10,t.FROG=11,t.DRAGON=12,t.MONSTER=13,t.MONKEY=14,t.HORSE=15,t.MONSTERPLANT=16,t.BUNNY=17,t.BUNNYEVIL=18,t.BUNNYDEPRESSED=19,t.BUNNYLOVE=20,t.PIGEONGOOD=21,t.PIGEONEVIL=22,t.DEMONMONKEY=23,t.BABYBEAR=24,t.BABYTERRIER=25,t.GNOME=26,t.LEPRECHAUN=27,t.KITTENBABY=28,t.PUPPYBABY=29,t.PIGLETNBABY=30,t.HALOOMPA=31,t.FOOLS=32,t.PTEROSAUR=33,t.VELOCIRAPTOR=34,t})();var Ms=s("yydM"),Us=s("JODW"),Ds=s("sR+E"),ws=s("zVPj"),Ns=s("Wzp3"),Ls=s("Ie/D"),xs=s("Nakt"),Ps=s("Wamt"),Fs=s("ArMw"),ks=s("ObWd"),Ws=s("QZfg"),Vs=s("+IZ6"),Gs=s("Xe8L"),Hs=s("Njml"),Bs=s("mQ1q"),js=s("ebaN"),Ks=s("Prlr"),zs=s("bmMM"),Ys=s("zTkZ"),Xs=s("lbEV"),Zs=s("CzV9"),qs=s("f1eJ"),Qs=s("1QEa"),Js=s("sRv6"),$s=s("xq+5"),ti=s("jFxZ"),ei=s("sCRD"),si=s("mGgu"),ii=s("BVCN"),ni=s("fVO9"),ri=s("Yx/o"),ai=s("D/zE"),oi=s("KjXG"),ci=s("jzpY"),_i=s("NpwP"),hi=s("n7CB"),li=s("jdh6"),ui=s("uMJ2"),di=s("4Yln"),gi=s("rlQL"),mi=s("BrMT");class pi{constructor(t,e){this._width=t,this._height=e,this._heights=[],this._isNotStackable=[],this._isRoomTile=[];let s=t*e;for(;s>0;)this._heights.push(0),this._isNotStackable.push(!1),this._isRoomTile.push(!1),s--}dispose(){this._width=0,this._height=0,this._height=null,this._isNotStackable=null,this._isRoomTile=null}validPosition(t,e){return t>=0&&t<this._width&&e>=0&&e<this._height}getTileHeight(t,e){return this.validPosition(t,e)?this._heights[e*this._width+t]:0}setTileHeight(t,e,s){this.validPosition(t,e)&&(this._heights[e*this._width+t]=s)}setStackingBlocked(t,e,s){this.validPosition(t,e)&&(this._isNotStackable[e*this._width+t]=s)}setIsRoomTile(t,e,s){this.validPosition(t,e)&&(this._isRoomTile[e*this._width+t]=s)}validateLocation(t,e,s,i,n,r,a,o,c,_=-1){let h=0,l=0;if(!this.validPosition(t,e)||!this.validPosition(t+s-1,e+i-1))return!1;(n<0||n>=this._width)&&(n=0),(r<0||r>=this._height)&&(r=0),a=Math.min(a,this._width-n),o=Math.min(o,this._height-r),-1===_&&(_=this.getTileHeight(t,e));let u=e;for(;u<e+i;){for(h=t;h<t+s;){if(h<n||h>=n+a||u<r||u>=r+o)if(l=u*this._width+h,c){if(!this._isRoomTile[l])return!1}else if(this._isNotStackable[l]||!this._isRoomTile[l]||Math.abs(this._heights[l]-_)>.01)return!1;h++}u++}return!0}get width(){return this._width}get height(){return this._height}}let fi=(()=>{class t{constructor(){this._isDisposed=!1,this._scale=64,this._heightMap=[],this._width=0,this._height=0,this._floorHeight=0}get disposed(){return this._isDisposed}get scale(){return this._scale}set scale(t){this._scale=t}dispose(){this.reset(),this._isDisposed=!0}initialize(t,e,s){if(t<=this._width&&e<=this._height)return this._width=t,this._height=e,void(this._floorHeight=s);this.reset();let i=0;for(;i<e;){const e=[];this._heightMap.push(e);let s=0;for(;s<t;)e.push(0),s++;i++}this._width=t,this._height=e,this._floorHeight=s}reset(){this._heightMap=[]}setHeight(t,e,s){if(t<0||t>=this._width||e<0||e>=this._height)return!1;const i=this._heightMap[e];return!!i&&(i[t]=s,!0)}getHeight(t,e){if(t<0||t>=this._width||e<0||e>=this._height)return 0;const s=this._heightMap[e];return s?s[t]:0}getLocation(e,s,i,n,r){let a,o,c;if(0==e&&0==s)if(e=this._width,s=this._height,a=Math.round(this.scale/10),r==t.R){for(c=this._width-1;c>=0;){for(o=1;o<this._height;){if(this.getHeight(c,o)<=this._floorHeight){o-1<s&&(e=c,s=o-1);break}o++}c--}n+=this.scale/4-a/2,i+=this.scale/2}else{for(o=this._height-1;o>=0;){for(c=1;c<this._width;){if(this.getHeight(c,o)<=this._floorHeight){c-1<e&&(e=c-1,s=o);break}c++}o--}n+=this.scale/4-a/2,i-=a}let _=e,h=s,l=this.getHeight(e,s);return r==t.R?(_+=i/(this._scale/2)-.5,h+=.5,l-=(n-i/2)/(this._scale/2)):(h+=(this._scale/2-i)/(this._scale/2)-.5,_+=.5,l-=(n-(this._scale/2-i)/2)/(this._scale/2)),new m.a(_,h,l)}_Str_24084(e,s,i){let n,r,a,o,c,_=0,h=0;r=Math.ceil(e),_=r-e;let l=0;for(n=0;n<this._width;){if(r>=0&&r<this._height){if(this.getHeight(n,r)<=this._floorHeight){a=n-1,o=r,h=n,i=t.L;break}if(this.getHeight(n,r+1)<=this._floorHeight){a=n,o=r,h=o-e,i=t.R;break}}r++,n++}const u=this.scale/2*_;let d=-h*this.scale/2;return d+=18*-s/32*this.scale/2,l=this.getHeight(a,o),c=l*this.scale/2+d,c+=i==t.R?_*this.scale/4:(1-_)*this.scale/4,this.getLocation(a,o,u,c,i)}_Str_22875(e,s){if(null==e)return null;let i=0,n=0,r=0,a=0,o="",c=0;if(90==s)i=Math.floor(e.x-.5),n=Math.floor(e.y+.5),c=this.getHeight(i,n),r=this._scale/2-this._scale/2*(e.y-n+.5),a=this._scale/2*(c-e.z)+(this._scale/2-r)/2,o=t.L;else{if(180!=s)return null;i=Math.floor(e.x+.5),n=Math.floor(e.y-.5),c=this.getHeight(i,n),r=this._scale/2*(e.x+.5-i),a=this._scale/2*(c-e.z)+r/2,o=t.R}return[i,n,r,a,o]}_Str_21860(t,e){const s=this._Str_22875(t,e);return null==s?null:":w="+Math.trunc(s[0])+","+Math.trunc(s[1])+" l="+Math.trunc(s[2])+","+Math.trunc(s[3])+" "+s[4]}getDirection(e){return e==t.R?180:90}_Str_24141(t,e){const s=this.getHeight(t,e),i=s+1;return s+(Math.trunc(this.getHeight(t-1,e-1))==i||Math.trunc(this.getHeight(t,e-1))==i||Math.trunc(this.getHeight(t+1,e-1))==i||Math.trunc(this.getHeight(t-1,e))==i||Math.trunc(this.getHeight(t+1,e))==i||Math.trunc(this.getHeight(t-1,e+1))==i||Math.trunc(this.getHeight(t,e+1))==i||Math.trunc(this.getHeight(t+1,e+1))==i?.5:0)}_Str_10375(t,e){return t>=0&&t<this._width&&e>=0&&e<this._height&&this._heightMap[e][t]>=0}}return t.DEFAULT_SCALE=32,t.L="l",t.R="r",t})();var Ei=s("9mJe");class Si extends Gt.a{constructor(t){super(),this._connection=null,this._roomCreator=t,this._planeParser=new Ye.a,this._latestEntryTileEvent=null,this._currentRoomId=0,this._ownUserId=0,this._initialConnection=!0}onDispose(){super.onDispose(),this._connection=null,this._roomCreator=null,this._latestEntryTileEvent=null,this._planeParser&&(this._planeParser.dispose(),this._planeParser=null)}setConnection(t){!this._connection&&t&&(this._connection=t,this._connection.addMessageEvent(new ui.a(this.onUserInfoEvent.bind(this))),this._connection.addMessageEvent(new Ys.a(this.onRoomModelNameEvent.bind(this))),this._connection.addMessageEvent(new Xs.a(this.onRoomPaintEvent.bind(this))),this._connection.addMessageEvent(new zs.a(this.onRoomModelEvent.bind(this))),this._connection.addMessageEvent(new js.a(this.onRoomHeightMapEvent.bind(this))),this._connection.addMessageEvent(new Ks.a(this.onRoomHeightMapUpdateEvent.bind(this))),this._connection.addMessageEvent(new Zs.a(this.onRoomThicknessEvent.bind(this))),this._connection.addMessageEvent(new Bs.a(this.onRoomDoorEvent.bind(this))),this._connection.addMessageEvent(new Ms.a(this.onRoomRollingEvent.bind(this))),this._connection.addMessageEvent(new Ls.a(this.onFurnitureAliasesEvent.bind(this))),this._connection.addMessageEvent(new Us.a(this.onFurnitureFloorAddEvent.bind(this))),this._connection.addMessageEvent(new Ds.a(this.onFurnitureFloorEvent.bind(this))),this._connection.addMessageEvent(new ws.a(this.onFurnitureFloorRemoveEvent.bind(this))),this._connection.addMessageEvent(new Ns.a(this.onFurnitureFloorUpdateEvent.bind(this))),this._connection.addMessageEvent(new Ws.a(this.onFurnitureWallAddEvent.bind(this))),this._connection.addMessageEvent(new Vs.a(this.onFurnitureWallEvent.bind(this))),this._connection.addMessageEvent(new Gs.a(this.onFurnitureWallRemoveEvent.bind(this))),this._connection.addMessageEvent(new Hs.a(this.onFurnitureWallUpdateEvent.bind(this))),this._connection.addMessageEvent(new xs.a(this.onFurnitureDataEvent.bind(this))),this._connection.addMessageEvent(new Ps.a(this.onFurnitureItemDataEvent.bind(this))),this._connection.addMessageEvent(new ks.a(this.onFurnitureStateEvent.bind(this))),this._connection.addMessageEvent(new si.a(this.onRoomUnitDanceEvent.bind(this))),this._connection.addMessageEvent(new ii.a(this.onRoomUnitEffectEvent.bind(this))),this._connection.addMessageEvent(new ni.a(this.onRoomUnitEvent.bind(this))),this._connection.addMessageEvent(new ri.a(this.onRoomUnitExpressionEvent.bind(this))),this._connection.addMessageEvent(new ai.a(this.onRoomUnitHandItemEvent.bind(this))),this._connection.addMessageEvent(new oi.a(this.onRoomUnitIdleEvent.bind(this))),this._connection.addMessageEvent(new ci.a(this.onRoomUnitInfoEvent.bind(this))),this._connection.addMessageEvent(new _i.a(this.onRoomUnitNumberEvent.bind(this))),this._connection.addMessageEvent(new hi.a(this.onRoomUnitRemoveEvent.bind(this))),this._connection.addMessageEvent(new li.a(this.onRoomUnitStatusEvent.bind(this))),this._connection.addMessageEvent(new Js.a(this.onRoomUnitChatEvent.bind(this))),this._connection.addMessageEvent(new $s.a(this.onRoomUnitChatEvent.bind(this))),this._connection.addMessageEvent(new ti.a(this.onRoomUnitChatEvent.bind(this))),this._connection.addMessageEvent(new ei.a(this.onRoomUnitTypingEvent.bind(this))),this._connection.addMessageEvent(new qs.a(this.onPetFigureUpdateEvent.bind(this))),this._connection.addMessageEvent(new Qs.a(this.onYouArePlayingGameEvent.bind(this))),this._connection.addMessageEvent(new Fs.a(this.onFurnitureState2Event.bind(this))))}setRoomId(t){0!==this._currentRoomId&&this._roomCreator&&this._roomCreator.destroyRoom(this._currentRoomId),this._currentRoomId=t,this._latestEntryTileEvent=null}clearRoomId(){this._currentRoomId=0,this._latestEntryTileEvent=null}onUserInfoEvent(t){if(!(t instanceof ui.a&&t.connection))return;const e=t.getParser();e&&(this._ownUserId=e.userInfo.userId)}onRoomModelNameEvent(t){if(t instanceof Ys.a&&t.connection){if(this._currentRoomId!==t.getParser().roomId&&this.setRoomId(t.getParser().roomId),this._roomCreator&&this._roomCreator.setRoomInstanceModelName(t.getParser().roomId,t.getParser().name),this._initialConnection)return t.connection.send(new di.a),void(this._initialConnection=!1);t.connection.send(new gi.a)}}onRoomPaintEvent(t){if(!(t instanceof Xs.a))return;const e=t.getParser();e&&this._roomCreator&&this._roomCreator.updateRoomInstancePlaneType(this._currentRoomId,e.floorType,e.wallType,e.landscapeType)}onRoomModelEvent(t){if(!(t instanceof zs.a&&t.connection&&this._roomCreator))return;const e=t.getParser();if(!e)return;const s=this._roomCreator.getLegacyWallGeometry(this._currentRoomId);if(!s)return;this._planeParser.reset();const i=e.width,n=e.height;this._planeParser.initializeTileMap(i,n);let r=null;this._latestEntryTileEvent&&(r=this._latestEntryTileEvent.getParser());let a=-1,o=-1,c=0,_=0,h=0;for(;h<n;){let t=0;for(;t<i;){const s=e.getHeight(t,h);(h>0&&h<n-1||t>0&&t<i-1)&&s!=Ye.a.TILE_BLOCKED&&(null==r||t==r.x&&h==r.y)&&(e.getHeight(t,h-1)==Ye.a.TILE_BLOCKED&&e.getHeight(t-1,h)==Ye.a.TILE_BLOCKED&&e.getHeight(t,h+1)==Ye.a.TILE_BLOCKED&&(a=t+.5,o=h,c=s,_=90),e.getHeight(t,h-1)==Ye.a.TILE_BLOCKED&&e.getHeight(t-1,h)==Ye.a.TILE_BLOCKED&&e.getHeight(t+1,h)==Ye.a.TILE_BLOCKED&&(a=t,o=h+.5,c=s,_=180)),this._planeParser.setTileHeight(t,h,s),t++}h++}this._planeParser.setTileHeight(Math.floor(a),Math.floor(o),c),this._planeParser.initializeFromTileData(e.wallHeight),this._planeParser.setTileHeight(Math.floor(a),Math.floor(o),c+this._planeParser.wallHeight),64===e.scale?(this._planeParser.restrictsDragging=!0,this._planeParser.restrictsScaling=!0,this._planeParser.restrictedScale=.5):(this._planeParser.restrictsDragging=!1,this._planeParser.restrictsScaling=!1,this._planeParser.restrictedScale=1),s.scale=fi.DEFAULT_SCALE,s.initialize(i,n,this._planeParser.floorHeight);let l=e.height-1;for(;l>=0;){let t=e.width-1;for(;t>=0;)s.setHeight(t,l,this._planeParser.getTileHeight(t,l)),t--;l--}const u=this._planeParser.getMapData();u.doors.push({x:a,y:o,z:c,dir:_}),this._roomCreator.createRoomInstance(this._currentRoomId,u)}onRoomHeightMapEvent(t){if(!(t instanceof js.a&&t.connection&&this._roomCreator))return;const e=t.getParser();if(!e)return;const s=e.width,i=e.height,n=new pi(s,i);let r=0;for(;r<i;){let t=0;for(;t<s;)n.setTileHeight(t,r,e.getTileHeight(t,r)),n.setStackingBlocked(t,r,e.getStackingBlocked(t,r)),n.setIsRoomTile(t,r,e.isRoomTile(t,r)),t++;r++}this._roomCreator.setFurnitureStackingHeightMap(this._currentRoomId,n)}onRoomHeightMapUpdateEvent(t){if(!(t instanceof Ks.a&&t.connection&&this._roomCreator))return;const e=t.getParser();if(!e)return;const s=this._roomCreator.getFurnitureStackingHeightMap(this._currentRoomId);if(s){for(;e.next();)s.setTileHeight(e.x,e.y,e.tileHeight()),s.setStackingBlocked(e.x,e.y,e.isStackingBlocked()),s.setIsRoomTile(e.x,e.y,e.isRoomTile());this._roomCreator._Str_17722(this._currentRoomId,"RoomMessageHandler.onRoomHeightMapUpdateEvent()")}}onRoomThicknessEvent(t){if(!(t instanceof Zs.a))return;const e=t.getParser();if(!e)return;const s=e.thicknessWall,i=e.thicknessFloor;this._roomCreator&&(this._roomCreator.updateRoomInstancePlaneVisibility(this._currentRoomId,!e.hideWalls,!0),this._roomCreator.updateRoomInstancePlaneThickness(this._currentRoomId,s,i))}onRoomDoorEvent(t){t instanceof Bs.a&&(this._latestEntryTileEvent=t)}onRoomRollingEvent(t){if(!(t instanceof Ms.a&&t.connection&&this._roomCreator))return;const e=t.getParser();this._roomCreator.updateRoomObjectFloor(this._currentRoomId,e.rollerId,null,null,1,null),this._roomCreator.updateRoomObjectFloor(this._currentRoomId,e.rollerId,null,null,2,null);const s=e.itemsRolling;if(s&&s.length)for(const n of s)n&&this._roomCreator.rollRoomObjectFloor(this._currentRoomId,n.id,n.location,n.targetLocation);const i=e.unitRolling;if(i){this._roomCreator.updateRoomObjectUserLocation(this._currentRoomId,i.id,i.location,i.targetLocation);const t=this._roomCreator.getRoomObjectUser(this._currentRoomId,i.id);if(t&&t.type!==yt.a.MONSTER_PLANT){let t="std";switch(i.movementType){case Ei.a.MOVE:t="mv";break;case Ei.a.SLIDE:t="std"}this._roomCreator.updateRoomObjectUserPosture(this._currentRoomId,i.id,t)}}}onFurnitureAliasesEvent(t){t instanceof Ls.a&&t.connection&&this._roomCreator&&(t.getParser(),this._connection.send(new gi.a))}onFurnitureFloorAddEvent(t){if(!(t instanceof Us.a&&t.connection&&this._roomCreator))return;const e=t.getParser().item;e&&this.addRoomObjectFurnitureFloor(this._currentRoomId,e)}onFurnitureFloorEvent(t){if(!(t instanceof Ds.a&&t.connection&&this._roomCreator))return;const e=t.getParser();if(!e)return;const s=e.items.length;let i=0;for(;i<s;){const t=e.items[i];t&&this.addRoomObjectFurnitureFloor(this._currentRoomId,t),i++}}onFurnitureFloorRemoveEvent(t){if(!(t instanceof ws.a&&t.connection&&this._roomCreator))return;const e=t.getParser();e&&(e.delay>0?setTimeout(()=>{this._roomCreator.removeRoomObjectFloor(this._currentRoomId,e.itemId,e.isExpired?-1:e.userId,!0)},e.delay):this._roomCreator.removeRoomObjectFloor(this._currentRoomId,e.itemId,e.isExpired?-1:e.userId,!0))}onFurnitureFloorUpdateEvent(t){if(!(t instanceof Ns.a&&t.connection&&this._roomCreator))return;const e=t.getParser().item;if(!e)return;const s=new m.a(e.x,e.y,e.z),i=new m.a(e.direction);this._roomCreator.updateRoomObjectFloor(this._currentRoomId,e.itemId,s,i,e.data.state,e.data),this._roomCreator.updateRoomObjectFloorHeight(this._currentRoomId,e.itemId,e.stackHeight),this._roomCreator.updateRoomObjectFloorExpiration(this._currentRoomId,e.itemId,e.expires)}onFurnitureWallAddEvent(t){if(!(t instanceof Ws.a&&t.connection&&this._roomCreator))return;const e=t.getParser().item;e&&this.addRoomObjectFurnitureWall(this._currentRoomId,e)}onFurnitureWallEvent(t){if(!(t instanceof Vs.a&&t.connection&&this._roomCreator))return;const e=t.getParser();if(!e)return;const s=e.items.length;let i=0;for(;i<s;){const t=e.items[i];t&&this.addRoomObjectFurnitureWall(this._currentRoomId,t),i++}}onFurnitureWallRemoveEvent(t){if(!(t instanceof Gs.a&&t.connection&&this._roomCreator))return;const e=t.getParser();e&&this._roomCreator.removeRoomObjectWall(this._currentRoomId,e.itemId,e.userId)}onFurnitureWallUpdateEvent(t){if(!(t instanceof Hs.a&&t.connection&&this._roomCreator))return;const e=this._roomCreator.getLegacyWallGeometry(this._currentRoomId);if(!e)return;const s=t.getParser().item;if(!s)return;const i=e.getLocation(s.width,s.height,s.localX,s.localY,s.direction),n=new m.a(e.getDirection(s.direction));this._roomCreator.updateRoomObjectWall(this._currentRoomId,s.itemId,i,n,s.state,s.stuffData),this._roomCreator.updateRoomObjectWallExpiration(this._currentRoomId,s.itemId,s.secondsToExpiration)}onFurnitureDataEvent(t){if(!(t instanceof xs.a&&t.connection&&this._roomCreator))return;const e=t.getParser();this._roomCreator.updateRoomObjectFloor(this._currentRoomId,e.furnitureId,null,null,e.objectData.state,e.objectData)}onFurnitureItemDataEvent(t){if(!(t instanceof Ps.a&&t.connection&&this._roomCreator))return;const e=t.getParser();this._roomCreator.updateRoomObjectWallItemData(this._currentRoomId,e.furnitureId,e.data)}onFurnitureStateEvent(t){if(!(t instanceof ks.a&&t.connection&&this._roomCreator))return;const e=t.getParser();this._roomCreator.updateRoomObjectFloor(this._currentRoomId,e.itemId,null,null,e.state,new Tt.a)}onFurnitureState2Event(t){if(!(t instanceof Fs.a&&t.connection&&this._roomCreator))return;const e=t.getParser();this._roomCreator.updateRoomObjectFloor(this._currentRoomId,e.itemId,null,null,e.value,new Tt.a)}onRoomUnitDanceEvent(t){t instanceof si.a&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,t.getParser().unitId,At.a.FIGURE_DANCE,t.getParser().danceId)}onRoomUnitEffectEvent(t){t instanceof ii.a&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserEffect(this._currentRoomId,t.getParser().unitId,t.getParser().effectId,t.getParser().delay)}onRoomUnitEvent(t){if(!(t instanceof ni.a&&t.connection&&this._roomCreator))return;const e=t.getParser().users;if(e&&e.length)for(const s of e){if(!s)continue;const t=new m.a(s.x,s.y,s.z),e=new m.a(s.dir);this._roomCreator.addRoomObjectUser(this._currentRoomId,s.roomIndex,t,e,s.dir,s.userType,s.figure),s.webID===this._ownUserId&&(this._roomCreator.setRoomSessionOwnUser(this._currentRoomId,s.roomIndex),this._roomCreator.updateRoomObjectUserOwn(this._currentRoomId,s.roomIndex)),this._roomCreator.updateRoomObjectUserFigure(this._currentRoomId,s.roomIndex,s.figure,s.sex,s.subType,s.isRiding),yt.a.getTypeString(s.userType)===yt.a.PET&&this._roomCreator.getPetTypeId(s.figure)===Cs.MONSTERPLANT&&this._roomCreator.updateRoomObjectUserPosture(this._currentRoomId,s.roomIndex,s.petPosture)}}onRoomUnitExpressionEvent(t){t instanceof ri.a&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,t.getParser().unitId,At.a.FIGURE_EXPRESSION,t.getParser().expression)}onRoomUnitHandItemEvent(t){t instanceof ai.a&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,t.getParser().unitId,At.a.FIGURE_CARRY_OBJECT,t.getParser().handId)}onRoomUnitIdleEvent(t){t instanceof oi.a&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,t.getParser().unitId,At.a.FIGURE_SLEEP,t.getParser().isIdle?1:0)}onRoomUnitInfoEvent(t){t instanceof ci.a&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserFigure(this._currentRoomId,t.getParser().unitId,t.getParser().figure,t.getParser().gender)}onRoomUnitNumberEvent(t){if(!(t instanceof _i.a&&t.connection&&this._roomCreator))return;const e=t.getParser();e&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,e.unitId,At.a.FIGURE_NUMBER_VALUE,e.value)}onRoomUnitRemoveEvent(t){t instanceof hi.a&&t.connection&&this._roomCreator&&this._roomCreator.removeRoomObjectUser(this._currentRoomId,t.getParser().unitId)}onRoomUnitStatusEvent(t){if(!(t instanceof li.a&&t.connection&&this._roomCreator))return;const e=t.getParser().statuses;if(!e||!e.length)return;const s=this._roomCreator.getRoomInstance(this._currentRoomId);if(!s)return;const i=s.model.getValue(mi.a.ROOM_Z_SCALE)||1;for(const n of e){if(!n)continue;let t=n.height;t&&(t/=i);const e=new m.a(n.x,n.y,n.z+t),s=new m.a(n.direction);let r=null;n.didMove&&(r=new m.a(n.targetX,n.targetY,n.targetZ)),this._roomCreator.updateRoomObjectUserLocation(this._currentRoomId,n.id,e,r,n.canStandUp,t,s,n.headDirection),this._roomCreator.updateRoomObjectUserFlatControl(this._currentRoomId,n.id,null);let a=!0,o=!1,c=At.a.STD,_="";if(n.actions&&n.actions.length)for(const i of n.actions)if(i)switch(i.action){case"flatctrl":this._roomCreator.updateRoomObjectUserFlatControl(this._currentRoomId,n.id,i.value);break;case"sign":1===n.actions.length&&(a=!1),this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,n.id,At.a.FIGURE_SIGN,parseInt(i.value));break;case"gst":1===n.actions.length&&(a=!1),this._roomCreator.updateRoomObjectUserPetGesture(this._currentRoomId,n.id,i.value);break;case"wav":case"mv":o=!0,c=i.action,_=i.value;break;case"trd":break;default:o=!0,c=i.action,_=i.value}o?this._roomCreator.updateRoomObjectUserPosture(this._currentRoomId,n.id,c,_):a&&this._roomCreator.updateRoomObjectUserPosture(this._currentRoomId,n.id,At.a.STD,"")}}onRoomUnitChatEvent(t){if(!t.connection||!this._roomCreator)return;const e=t.getParser();e&&(this._roomCreator.updateRoomObjectUserGesture(this._currentRoomId,e.roomIndex,e.gesture),this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,e.roomIndex,At.a.FIGURE_TALK,e.message.length/10))}onRoomUnitTypingEvent(t){t instanceof ei.a&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,t.getParser().unitId,At.a.FIGURE_IS_TYPING,t.getParser().isTyping?1:0)}onPetFigureUpdateEvent(t){if(!(t instanceof qs.a&&t.connection&&this._roomCreator))return;const e=t.getParser();e&&this._roomCreator.updateRoomObjectUserFigure(this._currentRoomId,e.roomIndex,e.figureData.figuredata,"","",e.isRiding)}onYouArePlayingGameEvent(t){if(!t)return;const e=t.getParser();e&&this._roomCreator.setRoomEngineGameMode(this._currentRoomId,e.isPlaying)}addRoomObjectFurnitureFloor(t,e){if(!e||!this._roomCreator)return;const s=new m.a(e.x,e.y,e.z),i=new m.a(e.direction);e.spriteName?this._roomCreator.addFurnitureFloorByTypeName(t,e.itemId,e.spriteName,s,i,e.state,e.data,NaN,e.expires,e.usagePolicy,e.userId,e.username,!0,!0,e.stackHeight):this._roomCreator.addFurnitureFloor(t,e.itemId,e.spriteId,s,i,e.state,e.data,NaN,e.expires,e.usagePolicy,e.userId,e.username,!0,!0,e.stackHeight)}addRoomObjectFurnitureWall(t,e){if(!e||!this._roomCreator)return;const s=this._roomCreator.getLegacyWallGeometry(t);if(!s)return;let i=null;e._Str_22379||(i=s.getLocation(e.width,e.height,e.localX,e.localY,e.direction));const n=new m.a(s.getDirection(e.direction));this._roomCreator.addFurnitureWall(t,e.itemId,e.spriteId,i,n,e.state,e.stuffData,e.secondsToExpiration,e.usagePolicy,e.userId,e.username)}get currentRoomId(){return this._currentRoomId}}var Ii=s("h2l6"),Ri=s("+ana"),bi=s("H7M9"),vi=s("7d3m"),Ti=s("Sb1T"),Oi=s("jgc/"),yi=s("+/WI"),Ai=s("PSU1"),Ci=s("PJYa"),Mi=s("fuks"),Ui=s("Nd6c"),Di=s("v1R/"),wi=s("jdue"),Ni=s("gHKk"),Li=s("wSNj"),xi=s("wyCi"),Pi=s("hFyr"),Fi=s("qXDh"),ki=s("k0R1"),Wi=s("dPj3");class Vi extends F.a{constructor(t,e,s,i,n,r,a,o,c,_,h,l,u){super(t,e,s,i),this._wallLocation="",this._x=0,this._y=0,this._z=0,this._direction=0,this._placedInRoom=!1,this._placedOnFloor=!1,this._placedOnWall=!1,this._instanceData=null,this._wallLocation=n,this._x=r,this._y=a,this._z=o,this._direction=c,this._placedInRoom=_,this._placedOnFloor=h,this._placedOnWall=l,this._instanceData=u}get _Str_7031(){return this._wallLocation}get x(){return this._x}get y(){return this._y}get z(){return this._z}get direction(){return this._direction}get _Str_4057(){return this._placedInRoom}get _Str_23888(){return this._placedOnFloor}get _Str_23432(){return this._placedOnWall}get _Str_4766(){return this._instanceData}}class Gi extends F.a{constructor(t,e,s,i,n,r){super(t,e,s,i),this._droppedObjectId=n,this._droppedObjectCategory=r}get droppedObjectId(){return this._droppedObjectId}get droppedObjectCategory(){return this._droppedObjectCategory}}var Hi=s("5r5K");let Bi=(()=>{class t extends a.a{constructor(t,e,s,i=!0){super(t,e),this._badgeId=s,this._groupBadge=i}get badgeId(){return this._badgeId}get groupBadge(){return this._groupBadge}}return t.LOAD_BADGE="ROBAE_LOAD_BADGE",t})(),ji=(()=>{class t extends a.a{constructor(e,s,i,n,r,a){super(t.DIMMER_STATE,e),this._state=s,this._presetId=i,this._effectId=n,this._color=r,this._brightness=a}get state(){return this._state}get _Str_14686(){return this._presetId}get _Str_6815(){return this._effectId}get color(){return this._color}get _Str_5123(){return this._brightness}}return t.DIMMER_STATE="RODSUE_DIMMER_STATE",t})(),Ki=(()=>{class t extends a.a{constructor(t,e){super(t,e)}}return t.ADD_HOLE="ROFHO_ADD_HOLE",t.REMOVE_HOLE="ROFHO_REMOVE_HOLE",t})();var zi=s("GfbW");let Yi=(()=>{class t extends a.a{constructor(t,e,s,i,n,r){super(t,e),this._enable=s,this._hue=i,this._saturation=n,this._lightness=r}get enable(){return this._enable}get hue(){return this._hue}get saturation(){return this._saturation}get lightness(){return this._lightness}}return t.ROOM_BACKGROUND_COLOR="ROHSLCEE_ROOM_BACKGROUND_COLOR",t})(),Xi=(()=>{class t extends a.a{constructor(t,e){super(t,e)}}return t.POSITION_CHANGED="ROME_POSITION_CHANGED",t.OBJECT_REMOVED="ROME_OBJECT_REMOVED",t})(),Zi=(()=>{class t extends a.a{constructor(t,e,s=0){super(t,e),this._state=s}get state(){return this._state}}return t.STATE_CHANGE="ROSCE_STATE_CHANGE",t.STATE_RANDOM="ROSCE_STATE_RANDOM",t})();class qi extends o{constructor(t,e,s,i,n,r,a=!1,o=!1,c=!1,_=!1){super(t,e,s,a,o,c,_),this._tileX=i,this._tileY=n,this._tileZ=r}get tileX(){return this._tileX}get tileY(){return this._tileY}get tileZ(){return this._tileZ}get _Str_16836(){return Math.trunc(this._tileX+.499)}get _Str_17676(){return Math.trunc(this._tileY+.499)}get _Str_21459(){return Math.trunc(this._tileZ+.499)}}class Qi extends o{constructor(t,e,s,i,n,r,a,o,c,_=!1,h=!1,l=!1,u=!1){super(t,e,s,_,h,l,u),this._wallLocation=new m.a,this._wallWd=new m.a,this._wallHt=new m.a,this._wallLocation.assign(i),this._wallWd.assign(n),this._wallHt.assign(r),this._x=a,this._y=o,this._direction=c}get wallLocation(){return this._wallLocation}get wallWidth(){return this._wallWd}get wallHeight(){return this._wallHt}get x(){return this._x}get y(){return this._y}get direction(){return this._direction}}var Ji=s("6u0Z");class $i extends j{constructor(t){super(),this._selected=t}get selected(){return this._selected}}class tn extends j{constructor(t){super(),this._selected=t}get selected(){return this._selected}}class en extends c{constructor(t,e,s,i,n=!1){super(t,null),this._height=e,this._visible=s,this._sourceEventId=i,this._toggleVisibility=n}get height(){return this._height}get visible(){return this._visible}get _Str_20637(){return this._sourceEventId}get toggleVisibility(){return this._toggleVisibility}}let sn=(()=>{class t extends c{constructor(t){super(null,null),this._type=t}get type(){return this._type}}return t.ENABLED="ROVUM_ENABLED",t.DISABLED="ROVUM_DISABLED",t})();var nn=s("UTUL"),rn=s("+kDp");class an{constructor(t,e,s,i,n,r=0,a=null,o=null,c=-1,_=-1,h=null){this._id=0,this._category=0,this._operation="",this._loc=null,this._dir=null,this._typeId=0,this._instanceData=null,this._stuffData=null,this._state=-1,this._animFrame=-1,this._posture=null,this._id=t,this._category=e,this._operation=s,this._loc=new m.a,this._loc.assign(i),this._dir=new m.a,this._dir.assign(n),this._typeId=r,this._instanceData=a,this._stuffData=o,this._state=c,this._animFrame=_,this._posture=h}get id(){return this._id}get category(){return this._category}get operation(){return this._operation}get loc(){return this._loc}get dir(){return this._dir}get typeId(){return this._typeId}get _Str_4766(){return this._instanceData}get stuffData(){return this._stuffData}get state(){return this._state}get _Str_15896(){return this._animFrame}get posture(){return this._posture}dispose(){this._loc=null,this._dir=null}}class on extends Gt.a{constructor(t){super(),this._roomEngine=t,this._eventIds=new Map,this._selectedAvatarId=-1,this._selectedObjectId=-1,this._selectedObjectCategory=-2,this._whereYouClickIsWhereYouGo=!0,this._objectPlacementSource=null,this.onRoomEngineObjectEvent=this.onRoomEngineObjectEvent.bind(this),this._roomEngine.events.addEventListener(F.a.ADDED,this.onRoomEngineObjectEvent)}dispose(){this._eventIds&&(this._eventIds=null),this._roomEngine.events.removeEventListener(F.a.ADDED,this.onRoomEngineObjectEvent),this._roomEngine=null}onRoomEngineObjectEvent(t){let e=this.getSelectedRoomObjectData(t.roomId);if(e&&e.operation===nn.a.OBJECT_PLACE&&e.id===t.objectId){const s=this._roomEngine.getRoomObject(t.roomId,e.id,e.category);if(s&&s.model&&e.category===Ot.a.FLOOR){const i=s.model.getValue(At.a.FURNITURE_ALLOWED_DIRECTIONS);if(i&&i.length){const n=new m.a(i[0]);if(s.setDirection(n),this._Str_16022(t.roomId,e.id,e.category,e.loc,n,e.operation,e.typeId,e._Str_4766,e.stuffData,e.state,e._Str_15896,e.posture),e=this.getSelectedRoomObjectData(t.roomId),!e)return}}this.setFurnitureAlphaMultiplier(s,.5)}}_Str_20330(t,e,s){if(!t||!e)return;if(d.a.isRunning())return;let i=this._roomEngine.getRoomObjectCategoryForType(e.type);if(i===Ot.a.ROOM||this._roomEngine.isPlayingGame()&&i===Ot.a.UNIT||(i=Ot.a.MINIMUM),this._Str_18648(i,t.type)===t._Str_3463){if(t.type===h.a.MOUSE_CLICK||t.type===h.a.DOUBLE_CLICK||t.type===h.a.MOUSE_DOWN||t.type===h.a.MOUSE_UP||t.type===h.a.MOUSE_MOVE)return}else t._Str_3463&&this._Str_11142(i,t.type,t._Str_3463);e.mouseHandler&&e.mouseHandler.mouseEvent(t,s)}processRoomObjectPlacement(t,e,s,i,n,r=null,a=null,o=-1,c=-1,_=null){this._objectPlacementSource=t;const h=new m.a(-100,-100),l=new m.a(0);return this.setSelectedRoomObjectData(e,s,i,h,l,nn.a.OBJECT_PLACE,n,r,a,o,c,_),this._roomEngine&&(this._roomEngine._Str_16645(n,i,!1,r,a,o,c,_),this._roomEngine._Str_7972(!1)),!0}_Str_8675(t){return this._Str_13199(t),!0}_Str_18648(t,e){const s=this._eventIds.get(t);return s&&s.get(e)||null}_Str_11142(t,e,s){let i=this._eventIds.get(t);i||(i=new Map,this._eventIds.set(t,i)),i.delete(e),i.set(e,s)}handleRoomObjectEvent(t,e){if(t)if(t instanceof o)this.handleRoomObjectMouseEvent(t,e);else switch(t.type){case Zi.STATE_CHANGE:case Zi.STATE_RANDOM:return void this.onRoomObjectStateChangedEvent(t,e);case ji.DIMMER_STATE:return void this.onRoomObjectDimmerStateUpdateEvent(t,e);case Xi.POSITION_CHANGED:case Xi.OBJECT_REMOVED:return void this.onRoomObjectMoveEvent(t,e);case Ji.a.OPEN_WIDGET:case Ji.a.CLOSE_WIDGET:case Ji.a.OPEN_FURNI_CONTEXT_MENU:case Ji.a.CLOSE_FURNI_CONTEXT_MENU:case Ji.a.PLACEHOLDER:case Ji.a.CREDITFURNI:case Ji.a.STICKIE:case Ji.a.PRESENT:case Ji.a.TROPHY:case Ji.a.TEASER:case Ji.a.ECOTRONBOX:case Ji.a.DIMMER:case Ji.a.WIDGET_REMOVE_DIMMER:case Ji.a.CLOTHING_CHANGE:case Ji.a.JUKEBOX_PLAYLIST_EDITOR:case Ji.a.MANNEQUIN:case Ji.a.PET_PRODUCT_MENU:case Ji.a.GUILD_FURNI_CONTEXT_MENU:case Ji.a.MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG:case Ji.a.PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG:case Ji.a.BACKGROUND_COLOR:case Ji.a.MYSTERYBOX_OPEN_DIALOG:case Ji.a.EFFECTBOX_OPEN_DIALOG:case Ji.a.MYSTERYTROPHY_OPEN_DIALOG:case Ji.a.ACHIEVEMENT_RESOLUTION_OPEN:case Ji.a.ACHIEVEMENT_RESOLUTION_ENGRAVING:case Ji.a.ACHIEVEMENT_RESOLUTION_FAILED:case Ji.a.FRIEND_FURNITURE_CONFIRM:case Ji.a.FRIEND_FURNITURE_ENGRAVING:case Ji.a.BADGE_DISPLAY_ENGRAVING:case Ji.a.HIGH_SCORE_DISPLAY:case Ji.a.HIDE_HIGH_SCORE_DISPLAY:case Ji.a.INERNAL_LINK:case Ji.a.ROOM_LINK:return void this.onRoomObjectWidgetRequestEvent(t,e);case k.DICE_ACTIVATE:case k.DICE_OFF:case k.USE_HABBOWHEEL:case k.STICKIE:case k.ENTER_ONEWAYDOOR:return void this.onRoomObjectFurnitureActionEvent(t,e);case Ki.ADD_HOLE:case Ki.REMOVE_HOLE:return void this.onRoomObjectFloorHoleEvent(t,e);case Bi.LOAD_BADGE:return void this.onRoomObjectBadgeAssetEvent(t,e);case k.MOUSE_ARROW:case k.MOUSE_BUTTON:return void this.handleMousePointer(t,e);case Yi.ROOM_BACKGROUND_COLOR:return void this.onHSLColorEnableEvent(t,e);default:return void n.a.log("Unhandled Event: "+t.constructor.name,"Object ID: "+t.object.id)}}handleRoomObjectMouseEvent(t,e){if(t&&t.type)switch(t.type){case o.CLICK:return void this.handleRoomObjectMouseClickEvent(t,e);case o.MOUSE_MOVE:return void this.handleRoomObjectMouseMoveEvent(t,e);case o.MOUSE_DOWN:return void this.handleRoomObjectMouseDownEvent(t,e);case o.MOUSE_ENTER:return void this.handleRoomObjectMouseEnterEvent(t,e);case o.MOUSE_LEAVE:return void this.handleRoomObjectMouseLeaveEvent(t,e)}}handleRoomObjectMouseClickEvent(t,e){if(!t)return;let s=nn.a.OBJECT_UNDEFINED;const i=this.getSelectedRoomObjectData(e);i&&(s=i.operation);let n=!1,r=!1;this._whereYouClickIsWhereYouGo&&(s&&s!==nn.a.OBJECT_UNDEFINED||(n=this._Str_23423(e,t)));const a=this._roomEngine.getRoomObjectCategoryForType(t.objectType);switch(s){case nn.a.OBJECT_MOVE:a===Ot.a.ROOM?i&&this.processRoomObjectOperation(e,i.id,i.category,nn.a.OBJECT_MOVE_TO):a===Ot.a.UNIT&&(i&&t.objectType===yt.a.MONSTER_PLANT&&this.processRoomObjectOperation(e,i.id,i.category,nn.a.OBJECT_MOVE_TO),t.eventId||this._Str_11142(Ot.a.ROOM,h.a.MOUSE_CLICK,t.eventId),this._Str_19253(e,t.objectId,a)),r=!0,-1!==t.objectId&&this._Str_17481(e,t.objectId,a);break;case nn.a.OBJECT_PLACE:if(a===Ot.a.ROOM)this._Str_19271(e,t instanceof qi,t instanceof Qi);else if(a===Ot.a.UNIT)switch(t.objectType){case yt.a.MONSTER_PLANT:case yt.a.RENTABLE_BOT:this._Str_19271(e,t instanceof qi,t instanceof Qi);break;default:t.eventId&&this._Str_11142(Ot.a.ROOM,h.a.MOUSE_CLICK,t.eventId),this._Str_19253(e,t.objectId,a)}break;case nn.a.OBJECT_UNDEFINED:a===Ot.a.ROOM?!n&&t instanceof qi&&this.onRoomObjectTileMouseEvent(e,t):(this._Str_17481(e,t.objectId,a),a===Ot.a.UNIT?(!t.ctrlKey||t.altKey||t.shiftKey||t.objectType!==yt.a.RENTABLE_BOT?!t.ctrlKey||t.altKey||t.shiftKey||t.objectType!==yt.a.MONSTER_PLANT?t.ctrlKey||t.altKey||!t.shiftKey||t.objectType!==yt.a.MONSTER_PLANT||this.processRoomObjectOperation(e,t.objectId,a,nn.a.OBJECT_ROTATE_POSITIVE):this.processRoomObjectOperation(e,t.objectId,a,nn.a.OBJECT_PICKUP_PET):this.processRoomObjectOperation(e,t.objectId,a,nn.a.OBJECT_PICKUP_BOT),n=!0):a!==Ot.a.FLOOR&&a!==Ot.a.WALL||(t.altKey||t.ctrlKey||t.shiftKey)&&(t.ctrlKey||t.altKey||!t.shiftKey?!t.ctrlKey||t.altKey||t.shiftKey||this.processRoomObjectOperation(e,t.objectId,a,nn.a.OBJECT_PICKUP):a===Ot.a.FLOOR&&this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new F.a(F.a.REQUEST_ROTATE,e,t.objectId,a)),n=!0),t.eventId&&n&&this._Str_11142(Ot.a.ROOM,h.a.MOUSE_CLICK,t.eventId))}if(a===Ot.a.ROOM){const s=this._Str_18648(Ot.a.MINIMUM,h.a.MOUSE_CLICK),i=this._Str_18648(Ot.a.UNIT,h.a.MOUSE_CLICK);s===t.eventId||i===t.eventId||r||(this._Str_16209(e),this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new F.a(F.a.DESELECTED,e,-1,Ot.a.MINIMUM)),this._Str_12227(e,0,!1))}}handleRoomObjectMouseMoveEvent(t,e){if(!t)return;let s=nn.a.OBJECT_UNDEFINED;const i=this.getSelectedRoomObjectData(e);i&&(s=i.operation);const n=this._roomEngine.getRoomObjectCategoryForType(t.objectType);if(this._roomEngine){const s=this._roomEngine.getRoomObjectCursor(e);if(s&&s.logic){let i=null;t instanceof qi?i=this._Str_23824(t,e):t.object&&-1!==t.object.id?this._whereYouClickIsWhereYouGo&&(i=this._Str_25124(n,e,t)):i=new en(null,0,!1,t.eventId),s.processUpdateMessage(i)}}switch(s){case nn.a.OBJECT_MOVE:return void(n===Ot.a.ROOM&&this._Str_24048(t,e));case nn.a.OBJECT_PLACE:return void(n===Ot.a.ROOM&&this._Str_22548(t,e))}}handleRoomObjectMouseDownEvent(t,e){if(!t)return;let s=nn.a.OBJECT_UNDEFINED;const i=this.getSelectedRoomObjectData(e);i&&(s=i.operation);const n=this._roomEngine.getRoomObjectCategoryForType(t.objectType);switch(s){case nn.a.OBJECT_UNDEFINED:return void(n!==Ot.a.FLOOR&&n!==Ot.a.WALL&&t.objectType!==yt.a.MONSTER_PLANT||(t.altKey&&!t.ctrlKey&&!t.shiftKey||this._Str_25211(t))&&this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new F.a(F.a.REQUEST_MOVE,e,t.objectId,n)))}}handleRoomObjectMouseEnterEvent(t,e){const s=t.objectId,i=this._roomEngine.getRoomObjectCategoryForType(t.objectType);this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new F.a(F.a.MOUSE_ENTER,e,s,i))}handleRoomObjectMouseLeaveEvent(t,e){const s=t.objectId,i=this._roomEngine.getRoomObjectCategoryForType(t.objectType);if(i!==Ot.a.ROOM&&i===Ot.a.UNIT){const t=this._roomEngine.getRoomObjectCursor(e);t&&t.processUpdateMessage(new dt(0,null))}this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new F.a(F.a.MOUSE_LEAVE,e,s,i))}onRoomObjectStateChangedEvent(t,e){if(t)switch(t.type){case Zi.STATE_CHANGE:return void this.updateRoomObjectState(e,t.object.id,t.object.type,t.state,!1);case Zi.STATE_RANDOM:return void this.updateRoomObjectState(e,t.object.id,t.object.type,t.state,!0)}}onRoomObjectDimmerStateUpdateEvent(t,e){if(t)switch(t.type){case ji.DIMMER_STATE:return void this._roomEngine.events.dispatchEvent(new Wi.a(e,t.state,t._Str_14686,t._Str_6815,t.color,t._Str_5123))}}onRoomObjectMoveEvent(t,e){if(t&&this._roomEngine)switch(t.type){case Xi.POSITION_CHANGED:{const s=t.objectId,i=this._roomEngine.getRoomObjectCategoryForType(t.objectType),n=this._roomEngine.getRoomObject(e,s,i),r=this._roomEngine.getRoomObjectSelectionArrow(e);if(n&&r&&r.logic){const t=n.getLocation();r.logic.processUpdateMessage(new c(t,null))}return}case Xi.OBJECT_REMOVED:return void this._Str_12227(e,0,!1)}}onRoomObjectWidgetRequestEvent(t,e){if(!t||!this._roomEngine)return;const s=t.objectId,i=this._roomEngine.getRoomObjectCategoryForType(t.objectType),n=this._roomEngine.events;if(n)switch(t.type){case Ji.a.OPEN_WIDGET:return void n.dispatchEvent(new Hi.a(Hi.a.OPEN_WIDGET,e,s,i,t.object.logic.widget));case Ji.a.CLOSE_WIDGET:return void n.dispatchEvent(new Hi.a(Hi.a.CLOSE_WIDGET,e,s,i,t.object.logic.widget));case Ji.a.TROPHY:return void n.dispatchEvent(new Hi.a(Hi.a.REQUEST_TROPHY,e,s,i));case Ji.a.CREDITFURNI:return void n.dispatchEvent(new Hi.a(Hi.a.REQUEST_CREDITFURNI,e,s,i));case Ji.a.INERNAL_LINK:return void n.dispatchEvent(new Hi.a(Hi.a.REQUEST_INTERNAL_LINK,e,s,i));case Ji.a.ROOM_LINK:return void n.dispatchEvent(new Hi.a(Hi.a.REQUEST_ROOM_LINK,e,s,i));case Ji.a.HIGH_SCORE_DISPLAY:return void n.dispatchEvent(new Hi.a(Hi.a.REQUEST_HIGH_SCORE_DISPLAY,e,s,i));case Ji.a.HIDE_HIGH_SCORE_DISPLAY:return void n.dispatchEvent(new Hi.a(Hi.a.REQUEST_HIDE_HIGH_SCORE_DISPLAY,e,s,i));case Ji.a.STICKIE:return void n.dispatchEvent(new Hi.a(Hi.a.REQUEST_STICKIE,e,s,i));case Ji.a.DIMMER:return void n.dispatchEvent(new Hi.a(Hi.a.REQUEST_DIMMER,e,s,i));case Ji.a.PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG:n.dispatchEvent(new Hi.a(Hi.a.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,e,s,i));break;case Ji.a.MYSTERYBOX_OPEN_DIALOG:n.dispatchEvent(new Hi.a(Hi.a.REQUEST_MYSTERYBOX_OPEN_DIALOG,e,s,i));break;case Ji.a.MYSTERYTROPHY_OPEN_DIALOG:n.dispatchEvent(new Hi.a(Hi.a.REQUEST_MYSTERYTROPHY_OPEN_DIALOG,e,s,i));break;case Ji.a.EFFECTBOX_OPEN_DIALOG:n.dispatchEvent(new Hi.a(Hi.a.REQUEST_EFFECTBOX_OPEN_DIALOG,e,s,i));break;case Ji.a.MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG:n.dispatchEvent(new Hi.a(Hi.a.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,e,s,i));break;case Ji.a.BACKGROUND_COLOR:n.dispatchEvent(new Hi.a(Hi.a.REQUEST_BACKGROUND_COLOR,e,s,i));break;case Ji.a.FRIEND_FURNITURE_ENGRAVING:n.dispatchEvent(new Hi.a(Hi.a.REQUEST_FRIEND_FURNITURE_ENGRAVING,e,s,i))}}onRoomObjectFurnitureActionEvent(t,e){t&&this.useObject(e,t.object.id,t.object.type,t.type)}onRoomObjectFloorHoleEvent(t,e){if(t)switch(t.type){case Ki.ADD_HOLE:return void this._roomEngine.addRoomInstanceFloorHole(e,t.objectId);case Ki.REMOVE_HOLE:return void this._roomEngine.removeRoomInstanceFloorHole(e,t.objectId)}}onRoomObjectBadgeAssetEvent(t,e){if(t&&this._roomEngine)switch(t.type){case Bi.LOAD_BADGE:{const s=t.objectId,i=this._roomEngine.getRoomObjectCategoryForType(t.objectType);return void this._roomEngine.loadRoomObjectBadgeImage(e,s,i,t.badgeId,t.groupBadge)}}}handleMousePointer(t,e){t&&this._roomEngine.updateMousePointer(t.type,t.objectId,t.objectType)}onHSLColorEnableEvent(t,e){if(t&&this._roomEngine)switch(t.type){case Yi.ROOM_BACKGROUND_COLOR:return void this._roomEngine.events.dispatchEvent(new zi.a(zi.a.ROOM_BACKGROUND_COLOR,e,t.enable,t.hue,t.saturation,t.lightness))}}onRoomObjectTileMouseEvent(t,e){if(!this._roomEngine||this._roomEngine.isDecorating||!this._roomEngine.roomSessionManager)return;const s=this._roomEngine.roomSessionManager.getSession(t);s&&!s.isSpectator&&this.sendWalkUpdate(e._Str_16836,e._Str_17676)}_Str_24048(t,e){if(!t||!this._roomEngine)return;if(!this._roomEngine.events)return;const s=this.getSelectedRoomObjectData(e);if(!s)return;const i=this._roomEngine.getRoomObject(e,s.id,s.category);if(!i)return;let n=!0;if(s.category===Ot.a.FLOOR||s.category===Ot.a.UNIT){const r=this._roomEngine.getFurnitureStackingHeightMap(e);t instanceof qi&&this._Str_18155(i,s,Math.trunc(t.tileX+.5),Math.trunc(t.tileY+.5),r)||(this._Str_18155(i,s,s.loc.x,s.loc.y,r),n=!1)}else s.category===Ot.a.WALL&&(n=!1,t instanceof Qi&&this._Str_22090(i,s,t.wallLocation,t.wallWidth,t.wallHeight,t.x,t.y,t.direction)&&(n=!0),n||(i.setLocation(s.loc),i.setDirection(s.dir)),this._roomEngine.updateRoomObjectMask(e,s.id,n));n?(this.setFurnitureAlphaMultiplier(i,.5),this._roomEngine._Str_7972(!1)):(this.setFurnitureAlphaMultiplier(i,0),this._roomEngine._Str_7972(!0))}_Str_22548(t,e){if(!t||!this._roomEngine)return;if(!this._roomEngine.events)return;const s=this.getSelectedRoomObjectData(e);if(!s)return;const i=this._roomEngine.getRoomObject(e,s.id,s.category);if(i){let n=!0;const r=this._roomEngine.getFurnitureStackingHeightMap(e);s.category===Ot.a.FLOOR?t instanceof qi&&this._Str_18155(i,s,t._Str_16836,t._Str_17676,r)||(this._roomEngine.removeRoomObjectFloor(e,s.id),n=!1):s.category===Ot.a.WALL?(n=!1,t instanceof Qi&&this._Str_22090(i,s,t.wallLocation,t.wallWidth,t.wallHeight,t.x,t.y,t.direction)&&(n=!0),n||this._roomEngine.removeRoomObjectWall(e,s.id),this._roomEngine.updateRoomObjectMask(e,s.id,n)):s.category===Ot.a.UNIT&&t instanceof qi&&!this._Str_25586(i,Math.floor(t.tileX+.5),Math.floor(t.tileY+.5),this._roomEngine.getLegacyWallGeometry(e))&&(this._roomEngine.removeRoomObjectUser(e,s.id),n=!1),this._roomEngine._Str_7972(!n)}else{if(s.category===Ot.a.FLOOR&&t instanceof qi)this._roomEngine.addFurnitureFloor(e,s.id,s.typeId,s.loc,s.dir,0,s.stuffData,parseInt(s._Str_4766),-1,0,0,"",!1);else if(s.category===Ot.a.WALL&&t instanceof Qi)this._roomEngine.addFurnitureWall(e,s.id,s.typeId,s.loc,s.dir,0,s._Str_4766,0);else if(s.category===Ot.a.UNIT&&t instanceof qi){this._roomEngine.addRoomObjectUser(e,s.id,new m.a,new m.a(180),180,s.typeId,s._Str_4766);const t=this._roomEngine.getRoomObject(e,s.id,s.category);t&&s.posture&&t.model.setValue(At.a.FIGURE_POSTURE,s.posture)}this._roomEngine._Str_7972(!0)}}_Str_18155(t,e,s,i,n){if(!t||!e)return!1;const r=new m.a;r.assign(t.getDirection()),t.setDirection(e.dir);const a=new m.a(s,i,0),o=new m.a;o.assign(t.getDirection());let c=this._Str_21004(t,a,e.loc,e.dir,n);return c||(o.x=this._Str_17555(t,!0),t.setDirection(o),c=this._Str_21004(t,a,e.loc,e.dir,n)),c?(t.setLocation(c),o&&t.setDirection(o),!0):(t.setDirection(r),!1)}_Str_22090(t,e,s,i,n,r,a,o){if(!t||!e)return!1;const c=new m.a(o),_=this._Str_25568(t,s,i,n,r,a,e);return!!_&&(t.setLocation(_),t.setDirection(c),!0)}_Str_21004(t,e,s,i,n){if(!t||!t.model||!e)return null;let r=null;const a=t.getDirection();if(!a)return null;if(!s||!i)return null;if(e.x===s.x&&e.y===s.y&&a.x===i.x)return r=new m.a,r.assign(s),r;let o=t.model.getValue(At.a.FURNITURE_SIZE_X),c=t.model.getValue(At.a.FURNITURE_SIZE_Y);o<1&&(o=1),c<1&&(c=1);const _=s.x,h=s.y;let l=o,u=c,d=0,g=Math.trunc(Math.trunc(a.x+45)%360/90);if(1!==g&&3!==g||(d=o,o=c,c=d),g=Math.trunc(Math.trunc(i.x+45)%360/90),1!==g&&3!==g||(d=l,l=u,u=d),n&&e){const s=1===t.model.getValue(At.a.FURNITURE_ALWAYS_STACKABLE);return n.validateLocation(e.x,e.y,o,c,_,h,l,u,s)?new m.a(e.x,e.y,n.getTileHeight(e.x,e.y)):null}return null}_Str_25568(t,e,s,i,n,r,a){if(null==t||null==t.model||null==e||null==s||null==i||null==a)return null;const o=t.model.getValue(At.a.FURNITURE_SIZE_X),c=t.model.getValue(At.a.FURNITURE_SIZE_Z),_=t.model.getValue(At.a.FURNITURE_CENTER_Z);if((n<o/2||n>s.length-o/2||r<_||r>i.length-(c-_))&&(n<o/2&&n<=s.length-o/2?n=o/2:n>=o/2&&n>s.length-o/2&&(n=s.length-o/2),r<_&&r<=i.length-(c-_)?r=_:r>=_&&r>i.length-(c-_)&&(r=i.length-(c-_))),n<o/2||n>s.length-o/2||r<_||r>i.length-(c-_))return null;let h=m.a.sum(m.a.product(s,n/s.length),m.a.product(i,r/i.length));return h=m.a.sum(e,h),h}updateRoomObjectState(t,e,s,i,n){const r=this._roomEngine.getRoomObjectCategoryForType(s);this.sendStateUpdate(t,e,r,i,n)}useObject(t,e,s,i){if(this._roomEngine&&this._roomEngine.connection)switch(i){case k.DICE_ACTIVATE:return void this._roomEngine.connection.send(new Mi.a(e));case k.DICE_OFF:return void this._roomEngine.connection.send(new Ui.a(e));case k.USE_HABBOWHEEL:return void this._roomEngine.connection.send(new Ci.a(e));case k.STICKIE:return void this._roomEngine.connection.send(new Ii.a(e));case k.ENTER_ONEWAYDOOR:return void this._roomEngine.connection.send(new wi.a(e))}}sendStateUpdate(t,e,s,i,n){return!this._roomEngine||!this._roomEngine.connection||(s===Ot.a.FLOOR?this._roomEngine.connection.send(n?new Ni.a(e,i):new Di.a(e,i)):s===Ot.a.WALL&&this._roomEngine.connection.send(new Li.a(e,i)),!0)}sendWalkUpdate(t,e){this._roomEngine&&this._roomEngine.connection&&this._roomEngine.connection.send(new Fi.a(t,e))}_Str_25124(t,e,s){if(t!==Ot.a.FLOOR)return null;const i=this._roomEngine.getRoomObject(e,s.objectId,Ot.a.FLOOR);if(!i)return null;const n=this._Str_21925(i,s);if(!n)return null;if(!this._roomEngine.getFurnitureStackingHeightMap(e))return null;const r=n.z;return new en(new m.a(n.x,n.y,i.getLocation().z),r,!0,s.eventId)}_Str_23423(t,e){const s=this._roomEngine.getRoomObject(t,e.objectId,Ot.a.FLOOR),i=this._Str_21925(s,e);return!!i&&(this.sendWalkUpdate(i.x,i.y),!0)}_Str_21925(t,e){if(!t||!e)return null;const s=this._roomEngine.sessionDataManager.getFloorItemDataByName(t.type);if(!s)return null;if(!s.canStandOn&&!s.canSitOn&&!s.canLayOn)return null;const i=t.model;if(!i)return null;const n=t.getLocation(),r=t.getDirection();let a=i.getValue(At.a.FURNITURE_SIZE_X),o=i.getValue(At.a.FURNITURE_SIZE_Y);const c=i.getValue(At.a.FURNITURE_SIZE_Z);90!==r.x&&270!==r.x||([a,o]=[o,a]),a<1&&(a=1),o<1&&(o=1);const _=this._roomEngine.getActiveRoomInstanceRenderingCanvas();if(!_)return null;const h=_.geometry.scale,l=(h/2+e.spriteOffsetX+e.localX)/(h/4),u=(e.spriteOffsetY+e.localY+(c-(s.canSitOn?.5:0))*h/2)/(h/4),d=(l-2*u)/4,g=Math.floor(n.x+(l+2*u)/4),p=Math.floor(n.y-d+1);let f=!1;return(g<n.x||g>=n.x+a||p<n.y||p>=n.y+o)&&(f=!0),f?null:new m.a(g,p,s.canSitOn?c-.5:c)}_Str_23824(t,e){if(this._whereYouClickIsWhereYouGo)return new en(new m.a(t._Str_16836,t._Str_17676,t._Str_21459),0,!0,t.eventId);const s=this._roomEngine.getRoomObjectCursor(e);if(s&&s.visualization){const s=t._Str_16836,i=t._Str_17676,n=t._Str_21459;if(this._roomEngine.getRoomInstance(e)){const r=this._roomEngine.getRoomTileObjectMap(e);if(r){const a=r._Str_19056(s,i),o=this._roomEngine.getFurnitureStackingHeightMap(e);if(o){if(a&&a.model&&a.model.getValue(At.a.FURNITURE_IS_VARIABLE_HEIGHT)>0){const r=o.getTileHeight(s,i),a=this._roomEngine.getLegacyWallGeometry(e).getHeight(s,i);return new en(new m.a(s,i,n),r-a,!0,t.eventId)}return new en(new m.a(s,i,n),0,!0,t.eventId)}}}}return null}_Str_19271(t,e,s){const i=this.getSelectedRoomObjectData(t);if(!i)return;let n=null,r=i.id;const a=i.category;let o=0,c=0,_=0,h=0,l="";if(this._roomEngine&&this._roomEngine.connection&&(n=this._roomEngine.getRoomObject(t,r,a),n)){const e=n.getLocation();if(h=n.getDirection().x,a===Ot.a.FLOOR||a===Ot.a.UNIT)o=e.x,c=e.y,_=e.z;else if(a===Ot.a.WALL){o=e.x,c=e.y,_=e.z;const s=this._roomEngine.getLegacyWallGeometry(t);s&&(l=s._Str_21860(e,h))}h=(h/45%8+8)%8,r<0&&a===Ot.a.UNIT&&(r*=-1),this._objectPlacementSource!==ki.a.CATALOG&&(a===Ot.a.UNIT?i.typeId===rn.a.PET||i.typeId===rn.a.RENTABLE_BOT&&this._roomEngine.connection.send(new bi.a(r,Math.floor(o),Math.floor(c))):void 0!==n.model.getValue(At.a.FURNITURE_IS_STICKIE)?this._roomEngine.connection.send(new Ai.a(r,l)):this._roomEngine.connection.send(new yi.a(r,a,l,o,c,h)))}this._roomEngine.setPlacedRoomObjectData(t,new an(i.id,i.category,null,i.dir,null)),this._Str_13199(t),this._roomEngine&&this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new Vi(F.a.PLACED,t,r,a,l,o,c,_,h,n&&n.id===i.id,e,s,i._Str_4766))}processRoomObjectWallOperation(t,e,s,i,n){return!!this._roomEngine&&!!this._roomEngine.getRoomObject(t,e,s)}processRoomObjectFloorOperation(t,e,s,i){return!!this._roomEngine}processRoomObjectOperation(t,e,s,i){if(!this._roomEngine)return!1;const n=this._roomEngine.getRoomObject(t,e,s);if(!n)return!1;let r=!0;switch(i){case nn.a.OBJECT_ROTATE_POSITIVE:case nn.a.OBJECT_ROTATE_NEGATIVE:if(this._roomEngine.connection){let s=0;s=this._Str_17555(n,i!=nn.a.OBJECT_ROTATE_NEGATIVE);const r=n.getLocation().x,a=n.getLocation().y;if(this.isValidLocation(n,new m.a(s),this._roomEngine.getFurnitureStackingHeightMap(t)))if(s=Math.trunc(s/45),n.type===yt.a.MONSTER_PLANT){const s=this._roomEngine.roomSessionManager.getSession(t);s&&s.userDataManager.getUserDataByIndex(e)}else this._roomEngine.connection.send(new Ti.a(e,r,a,s))}break;case nn.a.OBJECT_EJECT:case nn.a.OBJECT_PICKUP:this._roomEngine.connection&&this._roomEngine.connection.send(new Oi.a(s,e));break;case nn.a.OBJECT_PICKUP_PET:if(this._roomEngine.connection){const s=this._roomEngine.roomSessionManager.getSession(t);if(s){const t=s.userDataManager.getUserDataByIndex(e);s.pickupPet(t.webID)}}break;case nn.a.OBJECT_PICKUP_BOT:if(this._roomEngine.connection){const s=this._roomEngine.roomSessionManager.getSession(t);if(s){const t=s.userDataManager.getUserDataByIndex(e);s.pickupBot(t.webID)}}break;case nn.a.OBJECT_MOVE:r=!1,this.setFurnitureAlphaMultiplier(n,.5),this.setSelectedRoomObjectData(t,n.id,s,n.getLocation(),n.getDirection(),i),this._roomEngine._Str_16645(n.id,s,!0),this._roomEngine._Str_7972(!1);break;case nn.a.OBJECT_MOVE_TO:{const i=this.getSelectedRoomObjectData(t);if(this._Str_16022(t,i.id,i.category,i.loc,i.dir,nn.a.OBJECT_MOVE_TO,i.typeId,i._Str_4766,i.stuffData,i.state,i._Str_15896,i.posture),this.setFurnitureAlphaMultiplier(n,1),this._roomEngine._Str_17948(),this._roomEngine.connection)if(s===Ot.a.FLOOR){const t=n.getDirection().x%360,s=n.getLocation();this._roomEngine.connection.send(new Ti.a(e,s.x,s.y,t/45))}else if(s===Ot.a.WALL){const s=n.getDirection().x%360,i=this._roomEngine.getLegacyWallGeometry(t);if(i){const t=i._Str_21860(n.getLocation(),s);t&&this._roomEngine.connection.send(new xi.a(e,t))}}break}}return r&&this._Str_13199(t),!0}_Str_17555(t,e){if(!t||!t.model)return 0;let s=0,i=0,n=[];n=t.model.getValue(t.type===yt.a.MONSTER_PLANT?At.a.PET_ALLOWED_DIRECTIONS:At.a.FURNITURE_ALLOWED_DIRECTIONS);let r=t.getDirection().x;if(n&&n.length){if(s=n.indexOf(r),s<0){for(s=0,i=0;i<n.length&&!(r<=n[i]);)s++,i++;s%=n.length}s=e?(s+1)%n.length:(s-1+n.length)%n.length,r=n[s]}return r}isValidLocation(t,e,s){if(!t||!t.model||!e)return!1;const i=t.getDirection(),n=t.getLocation();if(!i||!n)return!1;if(i.x%180==e.x%180)return!0;let r=t.model.getValue(At.a.FURNITURE_SIZE_X),a=t.model.getValue(At.a.FURNITURE_SIZE_Y);r<1&&(r=1),a<1&&(a=1);let o=r,c=a,_=Math.trunc(Math.trunc(e.x+45)%360/90);if(1!==_&&3!==_||([r,a]=[a,r]),_=Math.trunc(Math.trunc(i.x+45)%360/90),1!==_&&3!==_||([o,c]=[c,o]),s&&n){const e=1===t.model.getValue(At.a.FURNITURE_ALWAYS_STACKABLE);if(s.validateLocation(n.x,n.y,r,a,n.x,n.y,o,c,e,n.z))return!0}return!1}_Str_19253(t,e,s){const i=this.getSelectedRoomObjectData(t);i&&this._roomEngine.getRoomObject(t,e,s)&&this._roomEngine&&this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new Gi(F.a.PLACED_ON_USER,t,e,s,i.id,i.category))}_Str_17481(t,e,s){if(!this._roomEngine)return;const i=this._roomEngine.events;if(i)switch(s){case Ot.a.UNIT:case Ot.a.FLOOR:case Ot.a.WALL:if(s===Ot.a.UNIT)this._Str_16209(t),this._Str_12227(t,e,!0);else if(this._Str_12227(t,0,!1),e!==this._selectedObjectId){this._Str_16209(t);const i=this._roomEngine.getRoomObject(t,e,s);i&&i.logic&&(i.logic.processUpdateMessage(new tn(!0)),this._selectedObjectId=e,this._selectedObjectCategory=s)}return void i.dispatchEvent(new F.a(F.a.SELECTED,t,e,s))}}_Str_16209(t){if(-1===this._selectedObjectId)return;const e=this._roomEngine.getRoomObject(t,this._selectedObjectId,this._selectedObjectCategory);e&&e.logic&&(e.logic.processUpdateMessage(new tn(!1)),this._selectedObjectId=-1,this._selectedObjectCategory=Ot.a.MINIMUM)}_Str_12227(t,e,s){if(!this._roomEngine)return;const i=Ot.a.UNIT,n=this._roomEngine.getRoomObject(t,this._selectedAvatarId,i);n&&n.logic&&(n.logic.processUpdateMessage(new $i(!1)),this._selectedAvatarId=-1);let r=!1;if(s){const s=this._roomEngine.getRoomObject(t,e,i);if(s&&s.logic){s.logic.processUpdateMessage(new $i(!0)),r=!0,this._selectedAvatarId=e;const t=s.getLocation();t&&this._roomEngine.connection.send(new Pi.a(~~t.x,~~t.y))}}const a=this._roomEngine.getRoomObjectSelectionArrow(t);a&&a.logic&&a.logic.processUpdateMessage(new sn(r?sn.ENABLED:sn.DISABLED))}_Str_13199(t){if(!this._roomEngine)return;this._roomEngine._Str_17948();const e=this.getSelectedRoomObjectData(t);if(e){if(e.operation===nn.a.OBJECT_MOVE||e.operation===nn.a.OBJECT_MOVE_TO){const s=this._roomEngine.getRoomObject(t,e.id,e.category);s&&e.operation!==nn.a.OBJECT_MOVE_TO&&(s.setLocation(e.loc),s.setDirection(e.dir)),this.setFurnitureAlphaMultiplier(s,1),e.category===Ot.a.WALL&&this._roomEngine.updateRoomObjectMask(t,e.id,!0),this._Str_16022(t,e.id,e.category,e.loc,e.dir,nn.a.OBJECT_MOVE,e.typeId,e._Str_4766,e.stuffData,e.state,e._Str_15896,e.posture)}else if(e.operation===nn.a.OBJECT_PLACE){const s=e.id;switch(e.category){case Ot.a.FLOOR:this._roomEngine.removeRoomObjectFloor(t,s);break;case Ot.a.WALL:this._roomEngine.removeRoomObjectWall(t,s);break;case Ot.a.UNIT:this._roomEngine.removeRoomObjectUser(t,s)}}this._roomEngine.setSelectedRoomObjectData(t,null)}}getSelectedRoomObjectData(t){return this._roomEngine?this._roomEngine.getSelectedRoomObjectData(t):null}setFurnitureAlphaMultiplier(t,e){t&&t.model&&t.model.setValue(At.a.FURNITURE_ALPHA_MULTIPLIER,e)}_Str_25211(t){return this._roomEngine.isDecorating&&!(t.ctrlKey||t.shiftKey)}cancelRoomObjectPlacement(t){return this._Str_13199(t),!0}setSelectedRoomObjectData(t,e,s,i,n,r,a=0,o=null,c=null,_=-1,h=-1,l=null){if(this._Str_13199(t),!this._roomEngine)return;const u=new an(e,s,r,i,n,a,o,c,_,h,l);this._roomEngine.setSelectedRoomObjectData(t,u)}_Str_16022(t,e,s,i,n,r,a=0,o=null,c=null,_=-1,h=-1,l=null){if(!this._roomEngine)return null;const u=new an(e,s,r,i,n,a,o,c,_,h,l);this._roomEngine.setSelectedRoomObjectData(t,u)}_Str_25586(t,e,s,i){return!!i._Str_10375(e,s)&&(t.setLocation(new m.a(e,s,i.getHeight(e,s))),!0)}modifyWallItemData(t,e,s,i){return!(!this._roomEngine||!this._roomEngine.connection||(this._roomEngine.connection.send(new Ri.a(e,s,i)),0))}deleteWallItem(t,e){return!(!this._roomEngine||!this._roomEngine.connection||(this._roomEngine.connection.send(new vi.a(e)),0))}get engine(){return this._roomEngine}get selectedAvatarId(){return this._selectedAvatarId}}var cn=s("vuPI");class _n extends Gt.a{constructor(){super(),this._object=null,this._events=null,this._time=0}initialize(t){}onDispose(){this._object=null}update(t){this._time=t}processUpdateMessage(t){t&&this._object&&(this._object.setLocation(t.location),this._object.setDirection(t.direction))}getEventTypes(){return[]}mergeTypes(t,e){const s=t.concat();for(const i of e)!i||s.indexOf(i)>=0||s.push(i);return s}mouseEvent(t,e){}useObject(){}setObject(t){if(this._object!==t){if(this._object&&this._object.setLogic(null),!t)return this.dispose(),void(this._object=null);this._object=t,this._object.setLogic(this)}}tearDown(){}get object(){return this._object}get eventDispatcher(){return this._events}set eventDispatcher(t){this._events=t}get widget(){return null}get contextMenu(){return null}get time(){return this._time}}let hn=(()=>{class t extends _n{constructor(){super(),this._liftAmount=0,this._location=new m.a,this._locationDelta=new m.a,this._lastUpdateTime=0,this._changeTime=0,this._updateInterval=500}dispose(){this._liftAmount=0,super.dispose()}update(e){super.update(e);const s=this.getLocationOffset(),i=this.object&&this.object.model;if(i&&(s?this._liftAmount!==s.z&&(this._liftAmount=s.z,i.setValue(At.a.FURNITURE_LIFT_AMOUNT,this._liftAmount)):0!==this._liftAmount&&(this._liftAmount=0,i.setValue(At.a.FURNITURE_LIFT_AMOUNT,this._liftAmount))),this._locationDelta.length>0||s){const e=t.TEMP_VECTOR;let i=this.time-this._changeTime;i===this._updateInterval>>1&&i++,i>this._updateInterval&&(i=this._updateInterval),this._locationDelta.length>0?(e.assign(this._locationDelta),e.multiply(i/this._updateInterval),e.add(this._location)):e.assign(this._location),s&&e.add(s),this.object.setLocation(e),i===this._updateInterval&&(this._locationDelta.x=0,this._locationDelta.y=0,this._locationDelta.z=0)}this._lastUpdateTime=this.time}setObject(t){super.setObject(t),t&&this._location.assign(t.getLocation())}processUpdateMessage(t){if(t)return super.processUpdateMessage(t),t.location&&this._location.assign(t.location),t instanceof ht?this.processMoveMessage(t):void 0}processMoveMessage(t){t&&this.object&&t.location&&(this._changeTime=this._lastUpdateTime,this._locationDelta.assign(t.targetLocation),this._locationDelta.subtract(this._location))}getLocationOffset(){return null}get lastUpdateTime(){return this._lastUpdateTime}}return t.TEMP_VECTOR=new m.a,t})(),ln=(()=>{class t extends hn{constructor(){super(),this._selected=!1,this._reportedLocation=null,this._effectChangeTimeStamp=0,this._newEffect=0,this._blinkingStartTimestamp=_.a.instance.time+this.randomBlinkStartTimestamp(),this._blinkingEndTimestamp=0,this._talkingEndTimestamp=0,this._talkingPauseStartTimestamp=0,this._talkingPauseEndTimestamp=0,this._carryObjectStartTimestamp=0,this._carryObjectEndTimestamp=0,this._allowUseCarryObject=!1,this._animationEndTimestamp=0,this._signEndTimestamp=0,this._gestureEndTimestamp=0,this._numberValueEndTimestamp=0}getEventTypes(){const t=[o.CLICK,Xi.POSITION_CHANGED,o.MOUSE_ENTER,o.MOUSE_LEAVE,k.MOUSE_BUTTON,k.MOUSE_ARROW];return this.mergeTypes(super.getEventTypes(),t)}dispose(){this._selected&&this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new Xi(Xi.OBJECT_REMOVED,this.object)),super.dispose(),this._reportedLocation=null}update(t){if(super.update(t),this._selected&&this.object&&this.eventDispatcher){const t=this.object.getLocation();this._reportedLocation&&this._reportedLocation.x===t.x&&this._reportedLocation.y===t.y&&this._reportedLocation.z===t.z||(this._reportedLocation||(this._reportedLocation=new m.a),this._reportedLocation.assign(t),this.eventDispatcher.dispatchEvent(new Xi(Xi.POSITION_CHANGED,this.object)))}const e=this.object&&this.object.model;e&&this.updateModel(this.time,e)}updateModel(t,e){this._talkingEndTimestamp>0&&(t>this._talkingEndTimestamp?(e.setValue(At.a.FIGURE_TALK,0),this._talkingEndTimestamp=0,this._talkingPauseStartTimestamp=0,this._talkingPauseEndTimestamp=0):this._talkingPauseEndTimestamp||this._talkingPauseStartTimestamp?this._talkingPauseStartTimestamp>0&&t>this._talkingPauseStartTimestamp?(e.setValue(At.a.FIGURE_TALK,0),this._talkingPauseStartTimestamp=0):this._talkingPauseEndTimestamp>0&&t>this._talkingPauseEndTimestamp&&(e.setValue(At.a.FIGURE_TALK,1),this._talkingPauseEndTimestamp=0):(this._talkingPauseStartTimestamp=t+this.randomTalkingPauseStartTimestamp(),this._talkingPauseEndTimestamp=this._talkingPauseStartTimestamp+this.randomTalkingPauseEndTimestamp())),this._animationEndTimestamp>0&&t>this._animationEndTimestamp&&(e.setValue(At.a.FIGURE_EXPRESSION,0),this._animationEndTimestamp=0),this._gestureEndTimestamp>0&&t>this._gestureEndTimestamp&&(e.setValue(At.a.FIGURE_GESTURE,0),this._gestureEndTimestamp=0),this._signEndTimestamp>0&&t>this._signEndTimestamp&&(e.setValue(At.a.FIGURE_SIGN,-1),this._signEndTimestamp=0),this._carryObjectEndTimestamp>0&&t>this._carryObjectEndTimestamp&&(e.setValue(At.a.FIGURE_CARRY_OBJECT,0),e.setValue(At.a.FIGURE_USE_OBJECT,0),this._carryObjectStartTimestamp=0,this._carryObjectEndTimestamp=0,this._allowUseCarryObject=!1),this._allowUseCarryObject&&t-this._carryObjectStartTimestamp>5e3&&e.setValue(At.a.FIGURE_USE_OBJECT,(t-this._carryObjectStartTimestamp)%1e4<1e3?1:0),this._blinkingStartTimestamp>-1&&t>this._blinkingStartTimestamp&&(e.setValue(At.a.FIGURE_BLINK,1),this._blinkingStartTimestamp=t+this.randomBlinkStartTimestamp(),this._blinkingEndTimestamp=t+this.randomBlinkEndTimestamp()),this._blinkingEndTimestamp>0&&t>this._blinkingEndTimestamp&&(e.setValue(At.a.FIGURE_BLINK,0),this._blinkingEndTimestamp=0),this._effectChangeTimeStamp>0&&t>this._effectChangeTimeStamp&&(e.setValue(At.a.FIGURE_EFFECT,this._newEffect),this._effectChangeTimeStamp=0),this._numberValueEndTimestamp>0&&t>this._numberValueEndTimestamp&&(e.setValue(At.a.FIGURE_NUMBER_VALUE,0),this._numberValueEndTimestamp=0)}processUpdateMessage(e){if(!e||!this.object)return;super.processUpdateMessage(e);const s=this.object&&this.object.model;if(s){if(e instanceof at)return s.setValue(At.a.FIGURE_POSTURE,e.postureType),void s.setValue(At.a.FIGURE_POSTURE_PARAMETER,e.parameter);if(e instanceof z)return s.setValue(At.a.FIGURE_TALK,1),void(this._talkingEndTimestamp=this.time+1e3*e.numberOfWords);if(e instanceof _t)s.setValue(At.a.FIGURE_IS_TYPING,e.isTyping?1:0);else{if(e instanceof lt)return s.setValue(At.a.HEAD_DIRECTION,e.headDirection),s.setValue(At.a.FIGURE_CAN_STAND_UP,e.canStandUp),void s.setValue(At.a.FIGURE_VERTICAL_OFFSET,e.baseY);if(e instanceof $)return s.setValue(At.a.FIGURE_GESTURE,e.gesture),void(this._gestureEndTimestamp=this.time+3e3);if(e instanceof q)return s.setValue(At.a.FIGURE_EXPRESSION,e.expressionType),this._animationEndTimestamp=Nt.a.getExpressionTimeout(s.getValue(At.a.FIGURE_EXPRESSION)),void(this._animationEndTimestamp>-1&&(this._animationEndTimestamp+=this.time));if(e instanceof Y)s.setValue(At.a.FIGURE_DANCE,e.danceStyle);else{if(e instanceof ct)return s.setValue(At.a.FIGURE_SLEEP,e.isSleeping?1:0),void(this._blinkingStartTimestamp=e.isSleeping?-1:this.time+this.randomBlinkStartTimestamp());if(e instanceof nt)return s.setValue(At.a.FIGURE_NUMBER_VALUE,e.value),void(this._numberValueEndTimestamp=this.time+3e3);if(e instanceof X)this.updateAvatarEffect(e.effect,e.delayMilliseconds,s);else{if(e instanceof K)return s.setValue(At.a.FIGURE_CARRY_OBJECT,e.itemType),s.setValue(At.a.FIGURE_USE_OBJECT,0),void(0===e.itemType?(this._carryObjectStartTimestamp=0,this._carryObjectEndTimestamp=0,this._allowUseCarryObject=!1):(this._carryObjectStartTimestamp=this.time,e.itemType<t.MAX_HAND_ID?(this._carryObjectEndTimestamp=0,this._allowUseCarryObject=e.itemType<=t.MAX_HAND_USE_ID):(this._carryObjectEndTimestamp=this._carryObjectStartTimestamp+1500,this._allowUseCarryObject=!1)));if(e instanceof ut)s.setValue(At.a.FIGURE_USE_OBJECT,e.itemType);else{if(e instanceof ot)return s.setValue(At.a.FIGURE_SIGN,e.signType),void(this._signEndTimestamp=this.time+5e3);if(!(e instanceof J))return e instanceof Q?(s.setValue(At.a.FIGURE,e.figure),void s.setValue(At.a.GENDER,e.gender)):e instanceof $i?(this._selected=e.selected,void(this._reportedLocation=null)):void(e instanceof st&&s.setValue(At.a.OWN_USER,1));s.setValue(At.a.FIGURE_FLAT_CONTROL,e.level)}}}}}}updateAvatarEffect(e,s,i){if(e===t._Str_13364)this._effectChangeTimeStamp=_.a.instance.time+t._Str_8860,this._newEffect=t._Str_15351;else if(e===t._Str_13733)this._effectChangeTimeStamp=_.a.instance.time+t._Str_8860,this._newEffect=t._Str_13094;else if(i.getValue(At.a.FIGURE_EFFECT)===t._Str_15351)this._effectChangeTimeStamp=_.a.instance.time+t._Str_8860,this._newEffect=e,e=t._Str_13364;else if(i.getValue(At.a.FIGURE_EFFECT)===t._Str_13094)this._effectChangeTimeStamp=_.a.instance.time+t._Str_8860,this._newEffect=e,e=t._Str_13733;else{if(0!==s)return this._effectChangeTimeStamp=_.a.instance.time+s,void(this._newEffect=e);this._effectChangeTimeStamp=0}i.setValue(At.a.FIGURE_EFFECT,e)}mouseEvent(t,e){let s=null;switch(t.type){case h.a.MOUSE_CLICK:s=o.CLICK;break;case h.a.ROLL_OVER:s=o.MOUSE_ENTER,this.object.model&&this.object.model.setValue(At.a.FIGURE_HIGHLIGHT,1),this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new k(k.MOUSE_BUTTON,this.object));break;case h.a.ROLL_OUT:s=o.MOUSE_LEAVE,this.object.model&&this.object.model.setValue(At.a.FIGURE_HIGHLIGHT,0),this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new k(k.MOUSE_ARROW,this.object))}s&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new o(s,this.object,t._Str_3463,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown))}randomTalkingPauseStartTimestamp(){return 100+200*Math.random()}randomTalkingPauseEndTimestamp(){return 75+75*Math.random()}randomBlinkStartTimestamp(){return 4500+1e3*Math.random()}randomBlinkEndTimestamp(){return 50+200*Math.random()}}return t.MAX_HAND_ID=999999999,t.MAX_HAND_USE_ID=999,t._Str_13364=28,t._Str_8860=500,t._Str_15351=29,t._Str_13733=184,t._Str_13094=185,t})();var un=s("PJfP");let dn=(()=>{class t extends hn{constructor(){super(),this._sizeX=0,this._sizeY=0,this._sizeZ=0,this._centerX=0,this._centerY=0,this._centerZ=0,this._directions=[],this._mouseOver=!1,this._locationOffset=new m.a,this._bouncingStep=0,this._storedRotateMessage=null,this._directionInitialized=!1}getEventTypes(){const t=[Zi.STATE_CHANGE,o.CLICK,o.MOUSE_DOWN];return this.widget&&t.push(Ji.a.OPEN_WIDGET,Ji.a.CLOSE_WIDGET),this.contextMenu&&t.push(Ji.a.OPEN_FURNI_CONTEXT_MENU,Ji.a.CLOSE_FURNI_CONTEXT_MENU),this.mergeTypes(super.getEventTypes(),t)}initialize(t){if(!t)return;const e=this.object&&this.object.model;if(!e)return;const s=t.dimensions;if(!s)return;this._sizeX=s.x,this._sizeY=s.y,this._sizeZ=s.z,this._centerX=this._sizeX/2,this._centerY=this._sizeY/2,this._centerZ=this._sizeZ/2;const i=t.directions;if(i&&i.length){for(const t of i)this._directions.push(t);this._directions.sort((t,e)=>t-e)}e.setValue(At.a.FURNITURE_SIZE_X,this._sizeX),e.setValue(At.a.FURNITURE_SIZE_Y,this._sizeY),e.setValue(At.a.FURNITURE_SIZE_Z,this._sizeZ),e.setValue(At.a.FURNITURE_CENTER_X,this._centerX),e.setValue(At.a.FURNITURE_CENTER_Y,this._centerY),e.setValue(At.a.FURNITURE_CENTER_Z,this._centerZ),e.setValue(At.a.FURNITURE_ALLOWED_DIRECTIONS,this._directions),e.setValue(At.a.FURNITURE_ALPHA_MULTIPLIER,1)}dispose(){super.dispose(),this._storedRotateMessage=null,this._directions=null}setObject(t){super.setObject(t),t&&t.getLocation().length&&(this._directionInitialized=!0)}getAdClickUrl(t){return t.getValue(At.a.FURNITURE_AD_URL)}update(e){super.update(e),this._bouncingStep>0&&(this._bouncingStep++,this._bouncingStep>t.BOUNCING_STEPS&&(this._bouncingStep=0))}processUpdateMessage(t){if(t instanceof dt)this.processDataUpdateMessage(t);else if(t instanceof mt)this.processObjectHeightUpdateMessage(t);else if(t instanceof pt)this.processItemDataUpdateMessage(t);else{if(this._mouseOver=!1,t.location&&t.direction){if(!(t instanceof ht)){const e=this.object.getDirection(),s=this.object.getLocation();e.x!==t.direction.x&&this._directionInitialized&&s.x===t.location.x&&s.y===t.location.y&&s.z===t.location.z&&(this._bouncingStep=1,this._storedRotateMessage=new c(t.location,t.direction),t=null)}this._directionInitialized=!0}t instanceof tn&&this.contextMenu&&this.eventDispatcher&&this.object&&this.eventDispatcher.dispatchEvent(new Ji.a(t.selected?Ji.a.OPEN_FURNI_CONTEXT_MENU:Ji.a.CLOSE_FURNI_CONTEXT_MENU,this.object)),super.processUpdateMessage(t)}}processDataUpdateMessage(t){t&&(this.object.setState(t.state,0),t.data&&t.data.writeRoomObjectModel(this.object.model),this.object.model.setValue(At.a.FURNITURE_EXTRAS,t.extra),this.object.model.setValue(At.a.FURNITURE_STATE_UPDATE_TIME,this.lastUpdateTime))}processObjectHeightUpdateMessage(t){t&&this.object.model.setValue(At.a.FURNITURE_SIZE_Z,t.height)}processItemDataUpdateMessage(t){t&&this.object.model.setValue(At.a.FURNITURE_ITEMDATA,t.data)}mouseEvent(t,e){switch(this.getAdClickUrl(this.object.model),t.type){case h.a.MOUSE_MOVE:if(this.eventDispatcher){const e=new o(o.MOUSE_MOVE,this.object,t._Str_3463,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown);e.localX=t.localX,e.localY=t.localY,e.spriteOffsetX=t.spriteOffsetX,e.spriteOffsetY=t.spriteOffsetY,this.eventDispatcher.dispatchEvent(e)}return;case h.a.ROLL_OVER:if(!this._mouseOver){if(this.eventDispatcher){const e=new o(o.MOUSE_ENTER,this.object,t._Str_3463,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown);e.localX=t.localX,e.localY=t.localY,e.spriteOffsetX=t.spriteOffsetX,e.spriteOffsetY=t.spriteOffsetY,this.eventDispatcher.dispatchEvent(e)}this._mouseOver=!0}return;case h.a.ROLL_OUT:if(this._mouseOver){if(this.eventDispatcher){const e=new o(o.MOUSE_LEAVE,this.object,t._Str_3463,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown);e.localX=t.localX,e.localY=t.localY,e.spriteOffsetX=t.spriteOffsetX,e.spriteOffsetY=t.spriteOffsetY,this.eventDispatcher.dispatchEvent(e)}this._mouseOver=!1}return;case h.a.DOUBLE_CLICK:return void this.useObject();case h.a.MOUSE_CLICK:if(this.eventDispatcher){const e=new o(o.CLICK,this.object,t._Str_3463,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown);e.localX=t.localX,e.localY=t.localY,e.spriteOffsetX=t.spriteOffsetX,e.spriteOffsetY=t.spriteOffsetY,this.eventDispatcher.dispatchEvent(e)}return void(this.eventDispatcher&&this.object&&this.contextMenu&&this.eventDispatcher.dispatchEvent(new Ji.a(Ji.a.OPEN_FURNI_CONTEXT_MENU,this.object)));case h.a.MOUSE_DOWN:if(this.eventDispatcher){const e=new o(o.MOUSE_DOWN,this.object,t._Str_3463,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown);this.eventDispatcher.dispatchEvent(e)}return}}getLocationOffset(){return this._bouncingStep<=0?null:(this._locationOffset.x=0,this._locationOffset.y=0,this._bouncingStep<=t.BOUNCING_STEPS/2?this._locationOffset.z=t.BOUNCING_Z*this._bouncingStep:this._bouncingStep<=t.BOUNCING_STEPS&&(this._storedRotateMessage&&(super.processUpdateMessage(this._storedRotateMessage),this._storedRotateMessage=null),this._locationOffset.z=t.BOUNCING_Z*(t.BOUNCING_STEPS-this._bouncingStep)),this._locationOffset)}useObject(){this.object&&(this.getAdClickUrl(this.object.model),this.eventDispatcher&&(this.widget&&this.eventDispatcher.dispatchEvent(new Ji.a(Ji.a.OPEN_WIDGET,this.object)),this.eventDispatcher.dispatchEvent(new Zi(Zi.STATE_CHANGE,this.object))))}tearDown(){this.widget&&1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&this.eventDispatcher.dispatchEvent(new Ji.a(Ji.a.CLOSE_WIDGET,this.object)),super.tearDown()}}return t.BOUNCING_STEPS=8,t.BOUNCING_Z=.0625,t})();class gn extends dn{getEventTypes(){const t=[Bi.LOAD_BADGE];return this.mergeTypes(super.getEventTypes(),t)}processUpdateMessage(t){if(super.processUpdateMessage(t),this.object)if(t instanceof dt){const e=t.data;e instanceof un.a&&this.updateBadge(e.getValue(1))}else t instanceof gt&&"loading_icon"!==t.assetName&&(this.object.model.setValue(At.a.FURNITURE_BADGE_ASSET_NAME,t.assetName),this.object.model.setValue(At.a.FURNITURE_BADGE_IMAGE_STATUS,1),this.update(_.a.instance.time))}mouseEvent(t,e){if(t&&e&&this.object)switch(t.type){case h.a.DOUBLE_CLICK:return void this.useObject();default:return void super.mouseEvent(t,e)}}useObject(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new Ji.a(Ji.a.BADGE_DISPLAY_ENGRAVING,this.object))}updateBadge(t){""!==t&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new Bi(Bi.LOAD_BADGE,this.object,t,!1))}}class mn extends dn{constructor(){super(),this.onRoomToObjectOwnAvatarMoveEvent=this.onRoomToObjectOwnAvatarMoveEvent.bind(this)}initialize(t){super.initialize(t),this.eventDispatcher&&this.eventDispatcher.addEventListener(G.ROAME_MOVE_TO,this.onRoomToObjectOwnAvatarMoveEvent)}tearDown(){this.eventDispatcher&&this.eventDispatcher.removeEventListener(G.ROAME_MOVE_TO,this.onRoomToObjectOwnAvatarMoveEvent),super.tearDown()}onRoomToObjectOwnAvatarMoveEvent(t){if(!t||!this.object)return;const e=this.object.getLocation(),s=t.targetLocation;if(!s)return;let i=this.object.model.getValue(At.a.FURNITURE_SIZE_X),n=this.object.model.getValue(At.a.FURNITURE_SIZE_Y);const r=(Math.floor(this.object.getDirection().x)+45)%360/90;1!==r&&3!==r||([i,n]=[n,i]),this.object.setState(s.x>=e.x&&s.x<e.x+i&&s.y>=e.y&&s.y<e.y+n?1:0,0)}}class pn extends dn{getEventTypes(){const t=[Zi.STATE_CHANGE];return this.mergeTypes(super.getEventTypes(),t)}mouseEvent(t,e){if(!t||!e||!this.object)return;let s=null;switch(t.type){case h.a.DOUBLE_CLICK:switch(t.spriteTag){case"start_stop":s=new Zi(Zi.STATE_CHANGE,this.object,1);break;case"reset":s=new Zi(Zi.STATE_CHANGE,this.object,2)}if(this.eventDispatcher&&s)return void this.eventDispatcher.dispatchEvent(s)}super.mouseEvent(t,e)}useObject(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new Zi(Zi.STATE_CHANGE,this.object,1))}}class fn extends dn{getEventTypes(){const t=[Ji.a.CREDITFURNI];return this.mergeTypes(super.getEventTypes(),t)}initialize(t){super.initialize(t);let e=0;t.credits&&""!==t.credits&&t.credits.length>0&&(e=parseInt(t.credits)),this.object.model.setValue(At.a.FURNITURE_CREDIT_VALUE,e)}mouseEvent(t,e){if(t&&e&&this.object)switch(t.type){case h.a.DOUBLE_CLICK:return void this.useObject();default:super.mouseEvent(t,e)}}useObject(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new Ji.a(Ji.a.CREDITFURNI,this.object))}}var En=s("f6o4");class Sn extends dn{getEventTypes(){const t=[k.MOUSE_BUTTON,k.MOUSE_ARROW];return this.mergeTypes(super.getEventTypes(),t)}mouseEvent(t,e){if(t&&e&&this.object){switch(t.type){case h.a.ROLL_OVER:this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new k(k.MOUSE_BUTTON,this.object));break;case h.a.ROLL_OUT:this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new k(k.MOUSE_ARROW,this.object))}super.mouseEvent(t,e)}}}class In extends Sn{initialize(t){super.initialize(t),this.object&&this.object.model&&this.object.model.setValue(At.a.FURNITURE_ALWAYS_STACKABLE,1)}get widget(){return En.a.CUSTOM_STACK_HEIGHT}}class Rn extends dn{constructor(){super(),this._noTags=!1,this._noTagsLastStateActivate=!1}getEventTypes(){const t=[k.DICE_ACTIVATE,k.DICE_OFF];return this.mergeTypes(super.getEventTypes(),t)}mouseEvent(t,e){if(!t||!e||!this.object)return;let s=null;switch(t.type){case h.a.DOUBLE_CLICK:return this._noTags?this._noTagsLastStateActivate&&0!==this.object.getState(0)&&100!==this.object.getState(0)?(s=new k(k.DICE_OFF,this.object),this._noTagsLastStateActivate=!1):(s=new k(k.DICE_ACTIVATE,this.object),this._noTagsLastStateActivate=!0):"activate"===t.spriteTag||0===this.object.getState(0)||100===this.object.getState(0)?s=new k(k.DICE_ACTIVATE,this.object):"deactivate"===t.spriteTag&&(s=new k(k.DICE_OFF,this.object)),void(s&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(s))}super.mouseEvent(t,e)}}class bn extends dn{constructor(){super(),this._showStateOnceRendered=!1,this._updateCount=0}getEventTypes(){const t=[Ji.a.INERNAL_LINK];return this.mergeTypes(super.getEventTypes(),t)}initialize(t){super.initialize(t),t.action&&1===t.action.startState&&(this._showStateOnceRendered=!0)}update(t){super.update(t),this._showStateOnceRendered&&(this._updateCount++,this._showStateOnceRendered&&this._updateCount>20&&(this.setAutomaticStateIndex(1),this._showStateOnceRendered=!1))}setAutomaticStateIndex(t){this.object&&this.object.model&&this.object.model.setValue(At.a.FURNITURE_AUTOMATIC_STATE_INDEX,t)}mouseEvent(t,e){t&&e&&(t.type===h.a.DOUBLE_CLICK&&this.setAutomaticStateIndex(0),super.mouseEvent(t,e))}useObject(){this.eventDispatcher&&this.object&&this.eventDispatcher.dispatchEvent(new Ji.a(Ji.a.INERNAL_LINK,this.object))}}class vn extends dn{getEventTypes(){const t=[Ji.a.ROOM_LINK];return this.mergeTypes(super.getEventTypes(),t)}initialize(t){super.initialize(t),t.action&&t.action.link&&""!==t.action.link&&t.action.link.length>0&&this.object&&this.object.model&&this.object.model.setValue(At.a.FURNITURE_INTERNAL_LINK,t.action.link)}dispose(){super.dispose(),this._timer&&(clearTimeout(this._timer),this._timer=null)}setAutomaticStateIndex(t){this.object&&this.object.model&&this.object.model.setValue(At.a.FURNITURE_AUTOMATIC_STATE_INDEX,t)}useObject(){this.setAutomaticStateIndex(1),this._timer&&(clearTimeout(this._timer),this._timer=null),this._timer=setTimeout(()=>{this.setAutomaticStateIndex(0),this._timer=null},2500),this.eventDispatcher&&this.object&&this.eventDispatcher.dispatchEvent(new Ji.a(Ji.a.ROOM_LINK,this.object))}}class Tn extends Sn{initialize(t){if(super.initialize(t),t&&this.object&&this.object.model){let e="";t.maskType&&""!==t.maskType&&t.maskType.length>0&&(e=t.maskType),this.object.model.setValue(At.a.FURNITURE_USES_PLANE_MASK,0),this.object.model.setValue(At.a.FURNITURE_PLANE_MASK_TYPE,e)}}mouseEvent(t,e){if(t&&e&&this.object){switch(t.type){case h.a.DOUBLE_CLICK:this.useObject()}super.mouseEvent(t,e)}}get widget(){return En.a.EXTERNAL_IMAGE}}class On extends dn{}let yn=(()=>{class t extends Sn{constructor(){super(),this._currentState=-1,this._currentLocation=null}getEventTypes(){const t=[Ki.ADD_HOLE,Ki.REMOVE_HOLE];return this.mergeTypes(super.getEventTypes(),t)}dispose(){this._currentState===t._Str_9306&&this.eventDispatcher.dispatchEvent(new Ki(Ki.REMOVE_HOLE,this.object)),super.dispose()}update(t){super.update(t),this._Str_25016()}processUpdateMessage(e){if(super.processUpdateMessage(e),!this.object)return;e instanceof dt&&this._Str_21445(this.object.getState(0));const s=this.object.getLocation();this._currentLocation?s.x===this._currentLocation.x&&s.y===this._currentLocation.y||this._currentState===t._Str_9306&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new Ki(Ki.ADD_HOLE,this.object)):this._currentLocation=new m.a,this._currentLocation.assign(s)}_Str_21445(e){e!==this._currentState&&(this.eventDispatcher&&(e===t._Str_9306?this.eventDispatcher.dispatchEvent(new Ki(Ki.ADD_HOLE,this.object)):this._currentState===t._Str_9306&&this.eventDispatcher.dispatchEvent(new Ki(Ki.REMOVE_HOLE,this.object))),this._currentState=e)}_Str_25016(){if(!this.object)return;const t=this.object.model;if(!t)return;const e=t.getValue(At.a.FURNITURE_AUTOMATIC_STATE_INDEX);isNaN(e)||this._Str_21445(e%2)}}return t._Str_9306=0,t})(),An=(()=>{class t extends Sn{processUpdateMessage(e){if(super.processUpdateMessage(e),e instanceof dt){const s=e.data;s instanceof un.a&&(this.updateGroupId(s.getValue(t.GROUPID_KEY)),this.updateBadge(s.getValue(t.BADGE_KEY)),this.updateColors(s.getValue(t.COLOR1_KEY),s.getValue(t.COLOR2_KEY)))}}updateGroupId(t){this.object.model.setValue(At.a.FURNITURE_GUILD_CUSTOMIZED_GUILD_ID,parseInt(t))}updateBadge(t){this.object.model.setValue(At.a.FURNITURE_GUILD_CUSTOMIZED_BADGE,t)}updateColors(t,e){this.object.model.setValue(At.a.FURNITURE_GUILD_CUSTOMIZED_COLOR_1,parseInt(t,16)),this.object.model.setValue(At.a.FURNITURE_GUILD_CUSTOMIZED_COLOR_2,parseInt(e,16))}}return t.GROUPID_KEY=1,t.BADGE_KEY=2,t.COLOR1_KEY=3,t.COLOR2_KEY=4,t})(),Cn=(()=>{class t extends dn{constructor(){super(...arguments),this._state=-1}getEventTypes(){return[Ji.a.HIGH_SCORE_DISPLAY,Ji.a.HIDE_HIGH_SCORE_DISPLAY]}tearDown(){1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&this.eventDispatcher.dispatchEvent(new Ji.a(Ji.a.HIDE_HIGH_SCORE_DISPLAY,this.object)),super.tearDown()}processUpdateMessage(e){super.processUpdateMessage(e),1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&e instanceof dt&&(this.eventDispatcher.dispatchEvent(new Ji.a(e.state===t.SHOW_WIDGET_IN_STATE?Ji.a.HIGH_SCORE_DISPLAY:Ji.a.HIDE_HIGH_SCORE_DISPLAY,this.object)),this._state=e.state)}mouseEvent(t,e){if(t&&e&&this.object)switch(t.type){case h.a.DOUBLE_CLICK:return void this.useObject();default:super.mouseEvent(t,e)}}}return t.SHOW_WIDGET_IN_STATE=1,t})();class Mn extends dn{getEventTypes(){const t=[Zi.STATE_CHANGE];return this.mergeTypes(super.getEventTypes(),t)}mouseEvent(t,e){if(!t||!e||!this.object)return;let s=null;switch(t.type){case h.a.DOUBLE_CLICK:switch(t.spriteTag){case"off":s=new Zi(Zi.STATE_CHANGE,this.object,3)}break;case h.a.MOUSE_CLICK:switch(t.spriteTag){case"inc":s=new Zi(Zi.STATE_CHANGE,this.object,2);break;case"dec":s=new Zi(Zi.STATE_CHANGE,this.object,1)}}this.eventDispatcher&&s?this.eventDispatcher.dispatchEvent(s):super.mouseEvent(t,e)}useObject(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new Zi(Zi.STATE_CHANGE,this.object,3))}}class Un extends Sn{constructor(){super(),this._nextState=0,this._nextStateTimestamp=0}update(t){if(this._nextStateTimestamp>0&&t>=this._nextStateTimestamp){this._nextStateTimestamp=0;const t=new Tt.a;t.setString(this._nextState.toString()),super.processUpdateMessage(new dt(this._nextState,t))}super.update(t)}processUpdateMessage(t){if(t instanceof dt)return this.processUpdate(t);super.processUpdateMessage(t)}processUpdate(t){if(!t)return;const e=t.state/1e3,s=t.state%1e3;if(s)this._nextState=e,this._nextStateTimestamp=this.time+s;else{this._nextStateTimestamp=0;const t=new Tt.a;t.setString(e.toString()),super.processUpdateMessage(new dt(e,t))}}}var Dn=s("tWLA");let wn=(()=>{class t extends dn{getEventTypes(){const t=[Ji.a.MANNEQUIN];return this.mergeTypes(super.getEventTypes(),t)}processUpdateMessage(t){super.processUpdateMessage(t),t instanceof dt&&(t.data.writeRoomObjectModel(this.object.model),this.processObjectData())}processObjectData(){if(!this.object||!this.object.model)return;const e=new Dn.a;e.initializeFromRoomObjectModel(this.object.model),this.object.model.setValue(At.a.FURNITURE_MANNEQUIN_GENDER,e.getValue(t.GENDER)),this.object.model.setValue(At.a.FURNITURE_MANNEQUIN_FIGURE,e.getValue(t.FIGURE)),this.object.model.setValue(At.a.FURNITURE_MANNEQUIN_NAME,e.getValue(t.OUTFIT_NAME))}mouseEvent(t,e){if(t&&e&&this.object){switch(t.type){case h.a.DOUBLE_CLICK:return void this.useObject()}super.mouseEvent(t,e)}}useObject(){this.eventDispatcher&&this.object&&this.eventDispatcher.dispatchEvent(new Ji.a(Ji.a.MANNEQUIN,this.object))}}return t.GENDER="GENDER",t.FIGURE="FIGURE",t.OUTFIT_NAME="OUTFIT_NAME",t})();class Nn extends Sn{initialize(t){super.initialize(t),this.object&&this.object.model&&this.object.model.setValue(At.a.FURNITURE_IS_VARIABLE_HEIGHT,1)}}class Ln extends dn{getEventTypes(){const t=[k.ENTER_ONEWAYDOOR];return this.mergeTypes(super.getEventTypes(),t)}mouseEvent(t,e){if(t&&e&&this.object){switch(t.type){case h.a.DOUBLE_CLICK:return void this.useObject()}super.mouseEvent(t,e)}}useObject(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new k(k.ENTER_ONEWAYDOOR,this.object))}}class xn extends dn{}class Pn extends dn{}class Fn extends Sn{getEventTypes(){const t=[Ji.a.PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG];return this.mergeTypes(super.getEventTypes(),t)}useObject(){this.eventDispatcher.dispatchEvent(new Ji.a(Ji.a.PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,this.object))}}class kn extends Sn{}var Wn=s("uUF/");class Vn extends Sn{constructor(){super(),this._roomColorUpdated=!1}getEventTypes(){const t=[Ji.a.BACKGROUND_COLOR,Yi.ROOM_BACKGROUND_COLOR];return this.mergeTypes(super.getEventTypes(),t)}dispose(){this._roomColorUpdated&&(this.eventDispatcher&&this.object&&1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&this.eventDispatcher.dispatchEvent(new Yi(Yi.ROOM_BACKGROUND_COLOR,this.object,!1,0,0,0)),this._roomColorUpdated=!1),super.dispose()}processUpdateMessage(t){super.processUpdateMessage(t),t instanceof dt&&(t.data.writeRoomObjectModel(this.object.model),1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&this.processColorUpdate())}processColorUpdate(){if(!this.object||!this.object.model)return;const t=new Wn.a;t.initializeFromRoomObjectModel(this.object.model);const e=t.getValue(0),s=t.getValue(1),i=t.getValue(2),n=t.getValue(3);e>-1&&s>-1&&i>-1&&n>-1&&(this.object.model.setValue(At.a.FURNITURE_ROOM_BACKGROUND_COLOR_HUE,s),this.object.model.setValue(At.a.FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION,i),this.object.model.setValue(At.a.FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS,n),this.object.setState(e,0),this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new Yi(Yi.ROOM_BACKGROUND_COLOR,this.object,1===e,s,i,n)),this._roomColorUpdated=!0)}mouseEvent(t,e){if(t&&e&&this.object)switch(t.type){case h.a.DOUBLE_CLICK:return void(this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new Ji.a(Ji.a.BACKGROUND_COLOR,this.object)));default:super.mouseEvent(t,e)}}}var Gn=s("6j78");let Hn=(()=>{class t extends c{constructor(t){super(null,null),this._type=t}get type(){return this._type}}return t.IMAGE_LOADED="ROAUM_IMAGE_LOADED",t.IMAGE_LOADING_FAILED="ROAUM_IMAGE_FAILED",t})(),Bn=(()=>{class t extends dn{constructor(){super(),this._hasClickUrl=!1}processUpdateMessage(t){super.processUpdateMessage(t),t instanceof dt&&this.processAdDataUpdateMessage(t),t instanceof Hn&&this.processAdUpdate(t)}processAdDataUpdateMessage(e){if(!e)return;const s=new Dn.a;s.initializeFromRoomObjectModel(this.object.model);const i=parseInt(s.getValue(t.STATE));isNaN(i)||this.object.getState(0)===i||this.object.setState(i,0);const n=s.getValue(t.IMAGEURL_KEY),r=this.object.model.getValue(At.a.FURNITURE_BRANDING_IMAGE_URL);r&&r===n||(this.object.model.setValue(At.a.FURNITURE_BRANDING_IMAGE_URL,n),this.object.model.setValue(At.a.FURNITURE_BRANDING_IMAGE_STATUS,0),this.downloadBackground());const a=s.getValue(t.CLICKURL_KEY);if(a){const t=this.object.model.getValue(At.a.FURNITURE_BRANDING_URL);t&&t===a||this.object.model&&this.object.model.setValue(At.a.FURNITURE_BRANDING_URL,a)}const o=parseInt(s.getValue(t.OFFSETX_KEY)),c=parseInt(s.getValue(t.OFFSETY_KEY)),_=parseInt(s.getValue(t.OFFSETZ_KEY));isNaN(o)||this.object.model.setValue(At.a.FURNITURE_BRANDING_OFFSET_X,o),isNaN(c)||this.object.model.setValue(At.a.FURNITURE_BRANDING_OFFSET_Y,c),isNaN(_)||this.object.model.setValue(At.a.FURNITURE_BRANDING_OFFSET_Z,_);let h=t.IMAGEURL_KEY+"="+(null!==n?n:"")+"\t";this._hasClickUrl&&(h=h+(t.CLICKURL_KEY+"=")+(null!==a?a:"")+"\t"),h=h+(t.OFFSETX_KEY+"=")+o+"\t",h=h+(t.OFFSETY_KEY+"=")+c+"\t",h=h+(t.OFFSETZ_KEY+"=")+_+"\t",this.object.model.setValue(Gn.a.INFOSTAND_EXTRA_PARAM,Gn.a.BRANDING_OPTIONS+h)}processAdUpdate(t){if(t&&this.object)switch(t.type){case Hn.IMAGE_LOADED:this.object.model.setValue(At.a.FURNITURE_BRANDING_IMAGE_STATUS,1);break;case Hn.IMAGE_LOADING_FAILED:this.object.model.setValue(At.a.FURNITURE_BRANDING_IMAGE_STATUS,-1)}}downloadBackground(){const t=this.object&&this.object.model;if(!t)return;const e=t.getValue(At.a.FURNITURE_BRANDING_IMAGE_URL),s=t.getValue(At.a.FURNITURE_BRANDING_IMAGE_STATUS);if(!e||""===e||1===s)return;const i=_.a.instance.core&&_.a.instance.core.asset;i&&(i.getTexture(e)?this.processUpdateMessage(new Hn(Hn.IMAGE_LOADED)):i.downloadAsset(e,t=>{this.processUpdateMessage(new Hn(t?Hn.IMAGE_LOADED:Hn.IMAGE_LOADING_FAILED))}))}}return t.STATE="state",t.IMAGEURL_KEY="imageUrl",t.CLICKURL_KEY="clickUrl",t.OFFSETX_KEY="offsetX",t.OFFSETY_KEY="offsetY",t.OFFSETZ_KEY="offsetZ",t})();class jn extends Bn{getAdClickUrl(t){return null}}class Kn extends Bn{constructor(){super(),this._hasClickUrl=!0}getAdClickUrl(t){return t.getValue(At.a.FURNITURE_BRANDING_URL)}}class zn extends dn{constructor(){super(),this._roomColorUpdated=!1}getEventTypes(){const t=[Ji.a.DIMMER,Ji.a.WIDGET_REMOVE_DIMMER,ji.DIMMER_STATE];return this.mergeTypes(super.getEventTypes(),t)}dispose(){this._roomColorUpdated&&this.eventDispatcher&&this.object&&(1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&(this.eventDispatcher.dispatchEvent(new ji(this.object,0,1,1,16777215,255)),this.eventDispatcher.dispatchEvent(new Ji.a(Ji.a.WIDGET_REMOVE_DIMMER,this.object))),this._roomColorUpdated=!1),super.dispose()}processUpdateMessage(t){if(t instanceof dt){if(t.data){const e=t.data.getLegacyString();1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&this.processDimmerData(e),super.processUpdateMessage(new dt(this.getStateFromDimmerData(e),t.data))}}else super.processUpdateMessage(t)}getStateFromDimmerData(t){if(!t)return 0;const e=t.split(",");return e.length>=5?parseInt(e[0])-1:0}processDimmerData(t){if(!t)return;const e=t.split(",");if(e.length>=5){const s=this.getStateFromDimmerData(t),i=parseInt(e[1]),n=parseInt(e[2]);let r=parseInt(e[3].substr(1),16),a=parseInt(e[4]);s||(r=16777215,a=255),this.eventDispatcher&&this.object&&(this.eventDispatcher.dispatchEvent(new ji(this.object,s,i,n,r,a)),this._roomColorUpdated=!0)}}useObject(){this.eventDispatcher.dispatchEvent(new Ji.a(Ji.a.DIMMER,this.object))}update(t){if(super.update(t),this.object&&this.object.model&&1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)){const t=this.object.model.getValue(At.a.FURNITURE_DATA);t&&t.length>0&&(this.object.model.setValue(At.a.FURNITURE_DATA,""),this.processDimmerData(t))}}}let Yn=(()=>{class t extends dn{constructor(){super(),this._score=0,this._scoreIncreaser=50,this._scoreTimer=0}processUpdateMessage(t){if(t instanceof dt)return this.updateScore(t.state);super.processUpdateMessage(t)}updateScore(e){this._score=e;const s=this.object.getState(0);if(this._score!==s){let e=this._score-s;e<0&&(e=-e),this._scoreIncreaser=e*t._Str_3536>t._Str_5967?t._Str_5967/e:t._Str_3536,this._scoreTimer=_.a.instance.time}}update(t){super.update(t);const e=this.object.getState(0);if(e!==this._score&&t>=this._scoreTimer+this._scoreIncreaser){const s=t-this._scoreTimer;let i=s/this._scoreIncreaser,n=1;this._score<e&&(n=-1),i>n*(this._score-e)&&(i=n*(this._score-e)),this.object.setState(e+n*i,0),this._scoreTimer=t-(s-i*this._scoreIncreaser)}}}return t._Str_3536=50,t._Str_5967=3e3,t})();class Xn extends Sn{}let Zn=(()=>{class t extends dn{getEventTypes(){const t=[Ji.a.STICKIE,k.STICKIE];return this.mergeTypes(super.getEventTypes(),t)}initialize(t){super.initialize(t),this.updateColor(),this.object&&this.object.model.setValue(At.a.FURNITURE_IS_STICKIE,"")}processUpdateMessage(t){super.processUpdateMessage(t),t instanceof pt&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new Ji.a(Ji.a.STICKIE,this.object)),this.updateColor()}updateColor(){if(!this.object)return;const e=this.object.model.getValue(At.a.FURNITURE_DATA);let s=t.STICKIE_COLORS.indexOf(e);s<0&&(s=3),this.object.model.setValue(At.a.FURNITURE_COLOR,s+1)}mouseEvent(t,e){if(t&&e&&this.object)switch(t.type){case h.a.DOUBLE_CLICK:return void this.useObject();default:super.mouseEvent(t,e)}}useObject(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new k(k.STICKIE,this.object))}}return t.STICKIE_COLORS=["9CCEFF","FF9CFF","9CFF9C","FFFF33"],t})();class qn extends dn{getEventTypes(){const t=[Ji.a.TROPHY];return this.mergeTypes(super.getEventTypes(),t)}mouseEvent(t,e){if(t&&e&&this.object){switch(t.type){case h.a.DOUBLE_CLICK:return void this.useObject()}super.mouseEvent(t,e)}}useObject(){this.eventDispatcher&&this.object&&this.eventDispatcher.dispatchEvent(new Ji.a(Ji.a.TROPHY,this.object))}}let Qn=(()=>{class t extends Sn{constructor(){super(),this._total=0,this._lastUpdate=0,this._interval=33}processUpdateMessage(t){if(super.processUpdateMessage(t),t instanceof dt){const e=t.data;if(!e)return;this._Str_24990(e.result)}}_Str_24990(e){if(this._total=e,!this._lastUpdate)return this.object.model.setValue(At.a.FURNITURE_VOTE_COUNTER_COUNT,e),void(this._lastUpdate=_.a.instance.time);if(this._total!==this._Str_8221){const e=Math.abs(this._total-this._Str_8221);this._interval=e*t._Str_3536>t._Str_5967?t._Str_5967/e:t._Str_3536,this._lastUpdate=_.a.instance.time}}update(t){if(super.update(t),this.object&&this._Str_8221!==this._total&&t>=this._lastUpdate+this._interval){const e=t-this._lastUpdate;let s=e/this._interval,i=1;this._total<this._Str_8221&&(i=-1),s>i*(this._total-this._Str_8221)&&(s=i*(this._total-this._Str_8221)),this.object.model.setValue(At.a.FURNITURE_VOTE_COUNTER_COUNT,this._Str_8221+i*s),this._lastUpdate=t-(e-s*this._interval)}}get _Str_8221(){return this.object.model.getValue(At.a.FURNITURE_VOTE_COUNTER_COUNT)}}return t._Str_3536=33,t._Str_5967=1e3,t})();var Jn=s("VZrs");class $n extends Sn{processUpdateMessage(t){if(super.processUpdateMessage(t),this.object&&t instanceof dt){const e=t.data;e instanceof Jn.a&&this.object.model.setValue(At.a.FURNITURE_VOTE_MAJORITY_RESULT,e.result)}}}class tr extends Sn{initialize(t){super.initialize(t);let e="";t.maskType&&""!==t.maskType&&t.maskType.length>0&&(e=t.maskType),this.object.model.setValue(At.a.FURNITURE_USES_PLANE_MASK,0),this.object.model.setValue(At.a.FURNITURE_PLANE_MASK_TYPE,e)}}class er extends hn{constructor(){super(),this._selected=!1,this._reportedLocation=null,this._postureIndex=0,this._gestureIndex=0,this._headDirectionDelta=0,this._directions=[],this._talkingEndTimestamp=0,this._gestureEndTimestamp=0,this._expressionEndTimestamp=0}getEventTypes(){const t=[o.CLICK,Xi.POSITION_CHANGED];return this.mergeTypes(super.getEventTypes(),t)}initialize(t){if(!t)return;const e=this.object&&this.object.model;if(!e)return;const s=t.directions;if(s&&s.length){for(const t of s)this._directions.push(t);this._directions.sort((t,e)=>t-e)}e.setValue(At.a.PET_ALLOWED_DIRECTIONS,this._directions)}dispose(){this._selected&&this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new Xi(Xi.OBJECT_REMOVED,this.object)),this._directions=null,this._reportedLocation=null}update(t){if(super.update(t),this._selected&&this.object&&this.eventDispatcher){const t=this.object.getLocation();this._reportedLocation&&this._reportedLocation.x===t.x&&this._reportedLocation.y===t.y&&this._reportedLocation.z===t.z||(this._reportedLocation||(this._reportedLocation=new m.a),this._reportedLocation.assign(t),this.eventDispatcher.dispatchEvent(new Xi(Xi.POSITION_CHANGED,this.object)))}this.object&&this.object.model&&this.updateModel(t,this.object.model)}updateModel(t,e){this._gestureEndTimestamp>0&&t>this._gestureEndTimestamp&&(e.setValue(At.a.FIGURE_GESTURE,null),this._gestureEndTimestamp=0),this._talkingEndTimestamp>0&&t>this._talkingEndTimestamp&&(e.setValue(At.a.FIGURE_TALK,0),this._talkingEndTimestamp=0),this._expressionEndTimestamp>0&&t>this._expressionEndTimestamp&&(e.setValue(At.a.FIGURE_EXPRESSION,0),this._expressionEndTimestamp=0)}processUpdateMessage(t){if(!t||!this.object)return;super.processUpdateMessage(t);const e=this.object&&this.object.model;if(e)if(t instanceof lt)e.setValue(At.a.HEAD_DIRECTION,t.headDirection);else{if(t instanceof Q){const s=new C.a(t.figure);return e.setValue(At.a.FIGURE,t.figure),e.setValue(At.a.RACE,t.subType),e.setValue(At.a.PET_PALETTE_INDEX,s.paletteId),e.setValue(At.a.PET_COLOR,s.color),e.setValue(At.a.PET_TYPE,s.typeId),e.setValue(At.a.PET_CUSTOM_LAYER_IDS,s.customLayerIds),e.setValue(At.a.PET_CUSTOM_PARTS_IDS,s.customPartIds),e.setValue(At.a.PET_CUSTOM_PALETTE_IDS,s.customPaletteIds),void e.setValue(At.a.PET_IS_RIDING,t.isRiding?1:0)}if(t instanceof at)e.setValue(At.a.FIGURE_POSTURE,t.postureType);else{if(t instanceof z)return e.setValue(At.a.FIGURE_TALK,1),void(this._talkingEndTimestamp=this.time+1e3*t.numberOfWords);if(!(t instanceof ct))return t instanceof it?(e.setValue(At.a.FIGURE_GESTURE,t.gesture),void(this._gestureEndTimestamp=this.time+3e3)):t instanceof $i?(this._selected=t.selected,void(this._reportedLocation=null)):void 0;e.setValue(At.a.FIGURE_SLEEP,t.isSleeping?1:0)}}}mouseEvent(t,e){let s=null;switch(t.type){case h.a.MOUSE_CLICK:s=o.CLICK;break;case h.a.DOUBLE_CLICK:break;case h.a.MOUSE_DOWN:this.object.model.getValue(At.a.PET_TYPE)==Cs.MONSTERPLANT&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new o(o.MOUSE_DOWN,this.object,t._Str_3463,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown))}s&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new o(s,this.object,t._Str_3463,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown))}}var sr=s("z3Rz"),ir=s("QzjD");class nr extends _n{constructor(){super(),this._planeParser=new Ye.a,this._planeBitmapMaskParser=new Ke,this._color=16777215,this._Str_3576=255,this._Str_14932=16777215,this._Str_17003=255,this._Str_11287=16777215,this._Str_16460=255,this._Str_9785=0,this._Str_17191=1500,this._lastHoleUpdate=0,this._needsMapUpdate=!1}getEventTypes(){const t=[o.MOUSE_MOVE,o.CLICK];return this.mergeTypes(super.getEventTypes(),t)}dispose(){super.dispose(),this._planeParser&&(this._planeParser.dispose(),this._planeParser=null),this._planeBitmapMaskParser&&(this._planeBitmapMaskParser.dispose(),this._planeBitmapMaskParser=null)}initialize(t){t&&this.object&&t instanceof ir.a&&this._planeParser.initializeFromMapData(t)&&(this.object.model.setValue(At.a.ROOM_MAP_DATA,t),this.object.model.setValue(At.a.ROOM_BACKGROUND_COLOR,16777215),this.object.model.setValue(At.a.ROOM_FLOOR_VISIBILITY,1),this.object.model.setValue(At.a.ROOM_WALL_VISIBILITY,1),this.object.model.setValue(At.a.ROOM_LANDSCAPE_VISIBILITY,1))}update(t){if(super.update(t),this._Str_24703(t),this._needsMapUpdate){if(this._lastHoleUpdate&&t-this._lastHoleUpdate<5)return;const e=this.object&&this.object.model;if(e){const s=this._planeParser.getMapData();e.setValue(At.a.ROOM_MAP_DATA,s),e.setValue(At.a.ROOM_FLOOR_HOLE_UPDATE_TIME,t),this._planeParser.initializeFromMapData(s)}this._lastHoleUpdate=0,this._needsMapUpdate=!1}}_Str_24703(t){if(!this.object||!this._Str_9785)return;let e=this._color,s=this._Str_3576;if(t-this._Str_9785>=this._Str_17191)e=this._Str_11287,s=this._Str_16460,this._Str_9785=0;else{let i=this._Str_14932>>16&255,n=this._Str_14932>>8&255,r=255&this._Str_14932;const a=(t-this._Str_9785)/this._Str_17191;i+=((this._Str_11287>>16&255)-i)*a,n+=((this._Str_11287>>8&255)-n)*a,r+=((255&this._Str_11287)-r)*a,e=(i<<16)+(n<<8)+r,s=this._Str_17003+(this._Str_16460-this._Str_17003)*a,this._color=e,this._Str_3576=s}let i=sr.a._Str_22130(e);i=(16776960&i)+s,e=sr.a._Str_13949(i),this.object.model&&this.object.model.setValue(At.a.ROOM_BACKGROUND_COLOR,e)}processUpdateMessage(t){if(!t||!this.object)return;const e=this.object.model;e&&(t instanceof bt?this.onObjectRoomUpdateMessage(t,e):t instanceof St?this.onObjectRoomMaskUpdateMessage(t,e):t instanceof Rt?this.onObjectRoomPlaneVisibilityUpdateMessage(t,e):t instanceof It?this.onObjectRoomPlanePropertyUpdateMessage(t,e):t instanceof Et?this.onObjectRoomFloorHoleUpdateMessage(t,e):t instanceof ft&&this.onObjectRoomColorUpdateMessage(t,e))}onObjectRoomUpdateMessage(t,e){switch(t.type){case bt.ROOM_FLOOR_UPDATE:return void e.setValue(At.a.ROOM_FLOOR_TYPE,t.value);case bt.ROOM_WALL_UPDATE:return void e.setValue(At.a.ROOM_WALL_TYPE,t.value);case bt.ROOM_LANDSCAPE_UPDATE:return void e.setValue(At.a.ROOM_LANDSCAPE_TYPE,t.value)}}onObjectRoomMaskUpdateMessage(t,e){let s=null,i=!1;switch(t.type){case St.ADD_MASK:s=Be.WINDOW,t.maskCategory===St.HOLE&&(s=Be.HOLE),this._planeBitmapMaskParser.addMask(t.maskId,t.maskType,t.maskLocation,s),i=!0;break;case St._Str_10260:i=this._planeBitmapMaskParser._Str_23574(t.maskId)}i&&e.setValue(At.a.ROOM_PLANE_MASK_XML,this._planeBitmapMaskParser._Str_5598())}onObjectRoomPlaneVisibilityUpdateMessage(t,e){let s=0;switch(t.visible&&(s=1),t.type){case Rt.FLOOR_VISIBILITY:return void e.setValue(At.a.ROOM_FLOOR_VISIBILITY,s);case Rt.WALL_VISIBILITY:return e.setValue(At.a.ROOM_WALL_VISIBILITY,s),void e.setValue(At.a.ROOM_LANDSCAPE_VISIBILITY,s)}}onObjectRoomPlanePropertyUpdateMessage(t,e){switch(t.type){case It.FLOOR_THICKNESS:return void e.setValue(At.a.ROOM_FLOOR_THICKNESS,t.value);case It.WALL_THICKNESS:return void e.setValue(At.a.ROOM_WALL_THICKNESS,t.value)}}onObjectRoomFloorHoleUpdateMessage(t,e){switch(t.type){case Et.ADD:return this._planeParser.addFloorHole(t.id,t.x,t.y,t.width,t.height),void(this._needsMapUpdate=!0);case Et.REMOVE:return this._planeParser.removeFloorHole(t.id),void(this._needsMapUpdate=!0)}this._lastHoleUpdate=this.time}onObjectRoomColorUpdateMessage(t,e){t&&e&&(this._Str_14932=this._color,this._Str_17003=this._Str_3576,this._Str_11287=t.color,this._Str_16460=t.light,this._Str_9785=this.time,this._Str_17191=1500,e.setValue(At.a.ROOM_COLORIZE_BG_ONLY,t.backgroundOnly))}mouseEvent(t,e){if(!(t&&e&&this.object&&this.object.model))return;const s=t.spriteTag;let n=0;if(s&&s.indexOf("@")>=0&&(n=parseInt(s.substr(s.indexOf("@")+1))),n<1||n>this._planeParser.planeCount)return void(t.type===h.a.ROLL_OUT&&this.object.model.setValue(At.a.ROOM_SELECTED_PLANE,0));n--;let r=null;const a=this._planeParser.getPlaneLocation(n),c=this._planeParser.getPlaneLeftSide(n),_=this._planeParser.getPlaneRightSide(n),l=this._planeParser.getPlaneNormalDirection(n),u=this._planeParser.getPlaneType(n);if(null==a||null==c||null==_||null==l)return;const d=c.length,g=_.length;if(0==d||0==g)return;const p=new i.j(t.screenX,t.screenY);if(r=e.getPlanePosition(p,a,c,_),!r)return void this.object.model.setValue(At.a.ROOM_SELECTED_PLANE,0);const f=m.a.product(c,r.x/d);f.add(m.a.product(_,r.y/g)),f.add(a);const E=f.x,S=f.y,I=f.z;if(!(r.x>=0&&r.x<d&&r.y>=0&&r.y<g))return void this.object.model.setValue(At.a.ROOM_SELECTED_PLANE,0);this.object.model.setValue(At.a.ROOM_SELECTED_X,E),this.object.model.setValue(At.a.ROOM_SELECTED_Y,S),this.object.model.setValue(At.a.ROOM_SELECTED_Z,I),this.object.model.setValue(At.a.ROOM_SELECTED_PLANE,n+1);let R=null;switch(t.type===h.a.MOUSE_MOVE||t.type===h.a.ROLL_OVER?R=o.MOUSE_MOVE:t.type===h.a.MOUSE_CLICK&&(R=o.CLICK),t.type){case h.a.MOUSE_MOVE:case h.a.ROLL_OVER:case h.a.MOUSE_CLICK:{let e=null;if(u===ze.a.PLANE_FLOOR)e=new qi(R,this.object,t._Str_3463,E,S,I,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown);else if(u===ze.a.PLANE_WALL||u===ze.a.PLANE_LANDSCAPE){let s=90;l&&(s=l.x+90,s>360&&(s-=360)),e=new Qi(R,this.object,t._Str_3463,a,c,_,c.length*r.x/d,_.length*r.y/g,s,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown)}return void(this.eventDispatcher&&this.eventDispatcher.dispatchEvent(e))}}}}class rr extends _n{initialize(t){this.object&&(this.object.model.setValue(At.a.FURNITURE_ALPHA_MULTIPLIER,1),this.object.setState(1,0))}processUpdateMessage(t){if(super.processUpdateMessage(t),t instanceof sn&&this.object)switch(t.type){case sn.ENABLED:return void this.object.setState(0,0);case sn.DISABLED:return void this.object.setState(1,0)}}}let ar=(()=>{class t extends _n{constructor(){super(),this._lastEventId=null,this._isHidden=!1}initialize(e){this.object&&(this.object.model.setValue(At.a.FURNITURE_ALPHA_MULTIPLIER,1),this.object.setState(t.CURSOR_HIDDEN_STATE,0))}processUpdateMessage(e){e instanceof en&&(this._lastEventId&&this._lastEventId===e._Str_20637||(e.toggleVisibility&&(this._isHidden=!this._isHidden),super.processUpdateMessage(e),this.object&&(this._isHidden?this.object.setState(t.CURSOR_HIDDEN_STATE,0):e.visible?(this.object.model.setValue(At.a.TILE_CURSOR_HEIGHT,e.height),this.object.setState(e.height>.8?t.CURSOR_HEIGHT_STATE:t.CURSOR_VISIBLE_STATE)):this.object.setState(t.CURSOR_HIDDEN_STATE,0)),this._lastEventId=e._Str_20637))}}return t.CURSOR_VISIBLE_STATE=0,t.CURSOR_HIDDEN_STATE=1,t.CURSOR_HEIGHT_STATE=6,t})(),or=(()=>{class t{}return t.FURNITURE_BASIC="furniture_basic",t.FURNITURE_MULTISTATE="furniture_multistate",t.FURNITURE_MULTIHEIGHT="furniture_multiheight",t.FURNITURE_RANDOMSTATE="furniture_randomstate",t.FURNITURE_PLACEHOLDER="furniture_placeholder",t.FURNITURE_CREDIT="furniture_credit",t.FURNITURE_STICKIE="furniture_stickie",t.FURNITURE_PRESENT="furniture_present",t.FURNITURE_TROPHY="furniture_trophy",t.FURNITURE_ECOTRON_BOX="furniture_ecotron_box",t.FURNITURE_DICE="furniture_dice",t.FURNITURE_HOCKEY_SCORE="furniture_hockey_score",t.FURNITURE_HABBOWHEEL="furniture_habbowheel",t.FURNITURE_ONE_WAY_DOOR="furniture_one_way_door",t.FURNITURE_PLANET_SYSTEM="furniture_planet_system",t.FURNITURE_WINDOW="furniture_window",t.FURNITURE_EXTERNAL_IMAGE_WALLITEM="furniture_external_image_wallitem",t.FURNITURE_ROOMDIMMER="furniture_roomdimmer",t.FURNITURE_SOUND_MACHINE="furniture_sound_machine",t.FURNITURE_JUKEBOX="furniture_jukebox",t.FURNITURE_CRACKABLE="furniture_crackable",t.FURNITURE_PUSHABLE="furniture_pushable",t.FURNITURE_CLOTHING_CHANGE="furniture_clothing_change",t.FURNITURE_COUNTER_CLOCK="furniture_counter_clock",t.FURNITURE_SCORE="furniture_score",t.FURNITURE_ES="furniture_es",t.FURNITURE_FIREWORKS="furniture_fireworks",t.FURNITURE_SONG_DISK="furniture_song_disk",t.FURNITURE_BB="furniture_bb",t.FURNITURE_BG="furniture_bg",t.FURNITURE_WELCOME_GIFT="furniture_welcome_gift",t.FURNITURE_FLOOR_HOLE="furniture_floor_hole",t.FURNITURE_MANNEQUIN="furniture_mannequin",t.FURNITURE_GUILD_CUSTOMIZED="furniture_guild_customized",t.FURNITURE_GROUP_FORUM_TERMINAL="furniture_group_forum_terminal",t.FURNITURE_PET_CUSTOMIZATION="furniture_pet_customization",t.FURNITURE_CUCKOO_CLOCK="furniture_cuckoo_clock",t.FURNITURE_VOTE_COUNTER="furniture_vote_counter",t.FURNITURE_VOTE_MAJORITY="furniture_vote_majority",t.FURNITURE_SOUNDBLOCK="furniture_soundblock",t.FURNITURE_RANDOM_TELEPORT="furniture_random_teleport",t.FURNITURE_MONSTERPLANT_SEED="furniture_monsterplant_seed",t.FURNITURE_PURCHASABLE_CLOTHING="furniture_purchasable_clothing",t.FURNITURE_BACKGROUND_COLOR="furniture_background_color",t.FURNITURE_MYSTERYBOX="furniture_mysterybox",t.FURNITURE_EFFECTBOX="furniture_effectbox",t.FURNITURE_MYSTERYTROPHY="furniture_mysterytrophy",t.FURNITURE_ACHIEVEMENT_RESOLUTION="furniture_achievement_resolution",t.FURNITURE_LOVELOCK="furniture_lovelock",t.FURNITURE_WILDWEST_WANTED="furniture_wildwest_wanted",t.FURNITURE_HWEEN_LOVELOCK="furniture_hween_lovelock",t.FURNITURE_BADGE_DISPLAY="furniture_badge_display",t.FURNITURE_HIGH_SCORE="furniture_high_score",t.FURNITURE_INTERNAL_LINK="furniture_internal_link",t.FURNITURE_CUSTOM_STACK_HEIGHT="furniture_custom_stack_height",t.FURNITURE_YOUTUBE="furniture_youtube",t.FURNITURE_RENTABLE_SPACE="furniture_rentable_space",t.FURNITURE_CHANGE_STATE_WHEN_STEP_ON="furniture_change_state_when_step_on",t.FURNITURE_VIMEO="furniture_vimeo",t.FURNITURE_EDITABLE_INTERNAL_LINK="furniture_editable_internal_link",t.FURNITURE_EDITABLE_ROOM_LINK="furniture_editable_room_link",t.FURNITURE_CRAFTING_GIZMO="furniture_crafting_gizmo",t.ROOM="room",t.USER="user",t.BOT="bot",t.RENTABLE_BOT="rentable_bot",t.PET="pet",t.TILE_CURSOR="tile_cursor",t.SELECTION_ARROW="selection_arrow",t.GAME_SNOWBALL="game_snowball",t.GAME_SNOWSPLASH="game_snowsplash",t})(),cr=(()=>{class t extends Sn{constructor(){super(...arguments),this._state=-1}get engravingDialogType(){return 0}initialize(t){super.initialize(t),this.object&&this.object.model.setValue(At.a.FURNITURE_FRIENDFURNI_ENGRAVING,this.engravingDialogType)}processUpdateMessage(t){if(t instanceof dt){const e=t.data;this._state=e?e.state:t.state}super.processUpdateMessage(t)}getEventTypes(){const t=[Ji.a.FRIEND_FURNITURE_ENGRAVING];return this.mergeTypes(super.getEventTypes(),t)}useObject(){this._state==t.STATE_LOCKED?this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new Ji.a(Ji.a.FRIEND_FURNITURE_ENGRAVING,this.object)):super.useObject()}}return t.STATE_UNINITIALIZED=-1,t.STATE_UNLOCKED=0,t.STATE_LOCKED=1,t})();class _r{constructor(){this._events=new cn.a,this._cachedEvents=new Map,this._registeredEvents=new Map,this._functions=[]}getLogic(t){const e=this.getLogicType(t);if(!e)return null;const s=new e;if(!s)return null;if(s.eventDispatcher=this._events,!this._cachedEvents.get(t)){this._cachedEvents.set(t,!0);const e=s.getEventTypes();for(const t of e)t&&this.registerEventType(t)}return s}registerEventType(t){if(!this._registeredEvents.get(t)){this._registeredEvents.set(t,!0);for(const e of this._functions)e&&this._events.addEventListener(t,e)}}registerEventFunction(t){if(t&&!(this._functions.indexOf(t)>=0)){this._functions.push(t);for(const e of this._registeredEvents.keys())e&&this._events.addEventListener(e,t)}}removeEventFunction(t){if(!t)return;const e=this._functions.indexOf(t);if(-1!==e){this._functions.splice(e,1);for(const e of this._registeredEvents.keys())e&&this._events.removeEventListener(e,t)}}getLogicType(t){if(!t)return null;let e=null;switch(t){case or.ROOM:e=nr;break;case or.TILE_CURSOR:e=ar;break;case or.SELECTION_ARROW:e=rr;break;case or.USER:case or.BOT:case or.RENTABLE_BOT:e=ln;break;case or.PET:e=er;break;case or.FURNITURE_BASIC:e=dn;break;case or.FURNITURE_BADGE_DISPLAY:e=gn;break;case or.FURNITURE_CHANGE_STATE_WHEN_STEP_ON:e=mn;break;case or.FURNITURE_COUNTER_CLOCK:e=pn;break;case or.FURNITURE_CREDIT:e=fn;break;case or.FURNITURE_CUSTOM_STACK_HEIGHT:e=In;break;case or.FURNITURE_DICE:e=Rn;break;case or.FURNITURE_EDITABLE_INTERNAL_LINK:e=bn;break;case or.FURNITURE_EDITABLE_ROOM_LINK:e=vn;break;case or.FURNITURE_EXTERNAL_IMAGE_WALLITEM:e=Tn;break;case or.FURNITURE_FIREWORKS:e=On;break;case or.FURNITURE_FLOOR_HOLE:e=yn;break;case or.FURNITURE_GUILD_CUSTOMIZED:e=An;break;case or.FURNITURE_HIGH_SCORE:e=Cn;break;case or.FURNITURE_HOCKEY_SCORE:e=Mn;break;case or.FURNITURE_ES:e=Un;break;case or.FURNITURE_MANNEQUIN:e=wn;break;case or.FURNITURE_MULTIHEIGHT:e=Nn;break;case or.FURNITURE_MULTISTATE:e=Sn;break;case or.FURNITURE_ONE_WAY_DOOR:e=Ln;break;case or.FURNITURE_PET_CUSTOMIZATION:e=xn;break;case or.FURNITURE_PRESENT:e=Pn;break;case or.FURNITURE_PURCHASABLE_CLOTHING:e=Fn;break;case or.FURNITURE_PUSHABLE:e=kn;break;case or.FURNITURE_BACKGROUND_COLOR:e=Vn;break;case or.FURNITURE_BG:e=jn;break;case or.FURNITURE_BB:e=Kn;break;case or.FURNITURE_ROOMDIMMER:e=zn;break;case or.FURNITURE_SCORE:e=Yn;break;case or.FURNITURE_SOUNDBLOCK:e=Xn;break;case or.FURNITURE_STICKIE:e=Zn;break;case or.FURNITURE_TROPHY:e=qn;break;case or.FURNITURE_VOTE_COUNTER:e=Qn;break;case or.FURNITURE_VOTE_MAJORITY:e=$n;break;case or.FURNITURE_WINDOW:e=tr;break;case or.FURNITURE_LOVELOCK:e=cr;break;default:e=dn}return e||(n.a.log("Unknown Logic: "+t),null)}get events(){return this._events}}class hr{constructor(t,e,s,i,n,r,a,o=NaN,c=-1,_=0,h=0,l="",u=!0,d=!0,g=-1){this._id=t,this._typeId=e,this._type=s,this._state=r,this._data=a,this._extra=o,this._expiryTime=c,this._usagePolicy=_,this._ownerId=h,this._ownerName=l,this._synchronized=u,this._realRoomObject=d,this._sizeZ=g,this._location=new m.a,this._direction=new m.a,this._location.assign(i),this._direction.assign(n)}get id(){return this._id}get typeId(){return this._typeId}get type(){return this._type}get location(){return this._location}get direction(){return this._direction}get state(){return this._state}get data(){return this._data}get extra(){return this._extra}get expiryTime(){return this._expiryTime}get usagePolicy(){return this._usagePolicy}get ownerId(){return this._ownerId}get ownerName(){return this._ownerName}get synchronized(){return this._synchronized}get realRoomObject(){return this._realRoomObject}get sizeZ(){return this._sizeZ}}class lr{constructor(t,e){this._roomId=t,this._data=e,this._floorType=null,this._wallType=null,this._landscapeType=null}get roomId(){return this._roomId}get data(){return this._data}get floorType(){return this._floorType}set floorType(t){this._floorType=t}get wallType(){return this._wallType}set wallType(t){this._wallType=t}get landscapeType(){return this._landscapeType}set landscapeType(t){this._landscapeType=t}}let ur=(()=>{class t{constructor(){this._targetId=-1,this._targetCategory=-2,this._targetLoc=null,this._moveDistance=0,this._previousMoveSpeed=0,this._maintainPreviousMoveSpeed=!1,this._currentLoc=null,this._limitedLocX=!1,this._limitedLocY=!1,this._centeredLocX=!1,this._centeredLocY=!1,this._screenWd=0,this._screenHt=0,this._scale=0,this._roomWd=0,this._roomHt=0,this._geometryUpdateId=-1,this._scaleChanged=!1,this._targetObjectLoc=new m.a}get location(){return this._currentLoc}get _Str_10760(){return this._targetId}set _Str_10760(t){this._targetId=t}get _Str_16562(){return this._targetCategory}set _Str_16562(t){this._targetCategory=t}get _Str_16185(){return this._targetObjectLoc}set _Str_16185(t){this._targetObjectLoc.assign(t)}get _Str_10235(){return this._limitedLocX}set _Str_10235(t){this._limitedLocX=t}get _Str_10446(){return this._limitedLocY}set _Str_10446(t){this._limitedLocY=t}get _Str_8564(){return this._centeredLocX}set _Str_8564(t){this._centeredLocX=t}get _Str_8690(){return this._centeredLocY}set _Str_8690(t){this._centeredLocY=t}get _Str_7609(){return this._screenWd}set _Str_7609(t){this._screenWd=t}get _Str_7902(){return this._screenHt}set _Str_7902(t){this._screenHt=t}get scale(){return this._scale}set scale(t){this._scale!=t&&(this._scale=t,this._scaleChanged=!0)}get _Str_18975(){return this._roomWd}set _Str_18975(t){this._roomWd=t}get _Str_15953(){return this._roomHt}set _Str_15953(t){this._roomHt=t}get _Str_16377(){return this._geometryUpdateId}set _Str_16377(t){this._geometryUpdateId=t}get _Str_12536(){return null!=this._targetLoc&&null!=this._currentLoc}set target(t){let e;null==this._targetLoc&&(this._targetLoc=new m.a),this._targetLoc.x==t.x&&this._targetLoc.y==t.y&&this._targetLoc.z==t.z||(this._targetLoc.assign(t),e=m.a.dif(this._targetLoc,this._currentLoc),this._moveDistance=e.length,this._maintainPreviousMoveSpeed=!0)}dispose(){this._targetLoc=null,this._currentLoc=null}_Str_20685(t){null==this._currentLoc&&(this._currentLoc=new m.a,this._currentLoc.assign(t))}_Str_25467(t){null==this._currentLoc&&(this._currentLoc=new m.a),this._currentLoc.assign(t)}update(e,s){let i,n,r,a,o;if(this._followDuration>0&&null!=this._targetLoc&&null!=this._currentLoc){if(this._scaleChanged)return this._scaleChanged=!1,this._currentLoc=this._targetLoc,void(this._targetLoc=null);i=m.a.dif(this._targetLoc,this._currentLoc),i.length>this._moveDistance&&(this._moveDistance=i.length),i.length<=s?(this._currentLoc=this._targetLoc,this._targetLoc=null,this._previousMoveSpeed=0):(n=Math.sin(Math.PI*i.length/this._moveDistance),r=.5*s,a=this._moveDistance/t.MOVE_SPEED_DENOMINATOR,o=r+(a-r)*n,this._maintainPreviousMoveSpeed&&(o<this._previousMoveSpeed?(o=this._previousMoveSpeed,o>i.length&&(o=i.length)):this._maintainPreviousMoveSpeed=!1),this._previousMoveSpeed=o,i.divide(i.length),i.multiply(o),this._currentLoc=m.a.sum(this._currentLoc,i))}}reset(){this._geometryUpdateId=-1}_Str_19465(t){this._followDuration=t}}return t.MOVE_SPEED_DENOMINATOR=12,t})();class dr{constructor(t,e){this._tileObjectMap=new Map;let s=0;for(;s<e;)this._tileObjectMap.set(s,new Map),s++;this._width=t,this._height=e}clear(){for(const t of this._tileObjectMap.values())t&&t.clear();this._tileObjectMap.clear()}populate(t){this.clear();for(const e of t)this._Str_21192(e)}dispose(){this._tileObjectMap=null,this._width=0,this._height=0}_Str_19056(t,e){if(t>=0&&t<this._width&&e>=0&&e<this._height){const s=this._tileObjectMap.get(e);if(s)return s.get(t)}return null}_Str_23932(t,e,s){if(s.isReady){if(t>=0&&t<this._width&&e>=0&&e<this._height){const i=this._tileObjectMap.get(e);i&&i.set(t,s)}}else n.a.log("Assigning non initialized object to tile object map!")}_Str_21192(t){if(!t||!t.model||!t.isReady)return;const e=t.getLocation(),s=t.getDirection();if(!e||!s)return;let i=t.model.getValue(At.a.FURNITURE_SIZE_X),n=t.model.getValue(At.a.FURNITURE_SIZE_Y);i<1&&(i=1),n<1&&(n=1);const r=Math.trunc(s.x+45)%360/90;1!==r&&3!==r||([i,n]=[n,i]);let a=e.y;for(;a<e.y+n;){let s=e.x;for(;s<e.x+i;){const i=this._Str_19056(s,a);(!i||i!==t&&i.getLocation().z<=e.z)&&this._Str_23932(s,a,t),s++}a++}}}class gr{constructor(t){this._roomId=t,this._modelName=null,this._legacyGeometry=new fi,this._tileObjectMap=null,this._roomCamera=new ur,this._selectedObject=null,this._placedObject=null,this._furnitureStackingHeightMap=null,this._floorStack=new Map,this._wallStack=new Map,this._mouseButtonCursorOwners=[]}dispose(){}setModelName(t){this._modelName=t}setSelectedObject(t){this._selectedObject&&this._selectedObject.dispose(),this._selectedObject=t}setPlacedObject(t){this._placedObject&&this._placedObject.dispose(),this._placedObject=t}setFurnitureStackingHeightMap(t){this._furnitureStackingHeightMap&&this._furnitureStackingHeightMap.dispose(),this._furnitureStackingHeightMap=t,this._tileObjectMap&&this._tileObjectMap.dispose(),this._furnitureStackingHeightMap&&(this._tileObjectMap=new dr(this._furnitureStackingHeightMap.width,this._furnitureStackingHeightMap.height))}addPendingFurnitureFloor(t){t&&(this._floorStack.delete(t.id),this._floorStack.set(t.id,t))}removePendingFunitureFloor(t){const e=this._floorStack.get(t);return e?(this._floorStack.delete(t),e):null}getPendingFurnitureFloor(t){const e=this._floorStack.get(t);return e?(this._floorStack.delete(t),e):null}getNextPendingFurnitureFloor(){if(!this._floorStack.size)return null;const t=this._floorStack.keys();return this.getPendingFurnitureFloor(t.next().value)}addPendingFurnitureWall(t){t&&(this._wallStack.delete(t.id),this._wallStack.set(t.id,t))}removePendingFurnitureWall(t){const e=this._wallStack.get(t);return e?(this._wallStack.delete(t),e):null}getPendingFurnitureWall(t){const e=this._wallStack.get(t);return e?(this._wallStack.delete(t),e):null}getNextPendingFurnitureWall(){if(!this._wallStack.size)return null;const t=this._wallStack.keys();return this.getPendingFurnitureWall(t.next().value)}_Str_16810(t){return-1===this._mouseButtonCursorOwners.indexOf(t)&&(this._mouseButtonCursorOwners.push(t),!0)}_Str_11959(t){const e=this._mouseButtonCursorOwners.indexOf(t);return e>-1&&(this._mouseButtonCursorOwners.splice(e,1),!0)}_Str_22598(){return this._mouseButtonCursorOwners.length>0}get roomId(){return this._roomId}get modelName(){return this._modelName}get legacyGeometry(){return this._legacyGeometry}get tileObjectMap(){return this._tileObjectMap}get roomCamera(){return this._roomCamera}get selectedObject(){return this._selectedObject}get placedObject(){return this._placedObject}get furnitureStackingHeightMap(){return this._furnitureStackingHeightMap}}class mr{constructor(t,e){this._object=t,this._groupBadge=e}get object(){return this._object}get groupBadge(){return this._groupBadge}}let pr=(()=>{class t{constructor(){this._Str_3008=0,this._Str_18433=0}static _Str_22230(e,s){const i=[];for(const n of e)if(n)if("boutique_mannequin1"===n.type&&0===n.name.indexOf("mannequin_")){const e=s.getRoomObject(s.activeRoomId,n.objectId,Ot.a.FLOOR);if(e){const s=e.visualization.getSpriteList();if(s)for(const e of s)e.x=e.x+(n.x+n.width/2+t._Str_16967),e.y=e.y+(n.y+n.height+t._Str_18197),e.z=e.z+n.z,i.push(e)}}else i.push(n);return i}static _Str_22564(t,e){return t.z<e.z?1:-1}static _Str_20789(t,e,s){return!0}static _Str_14110(t,e,s,i){const n=[];if(t.x==e.x?n.push(t,s,e,i):t.x==s.x?n.push(t,e,s,i):e.x<t.x&&e.y>t.y||e.x>t.x&&e.y<t.y?n.push(t,s,e,i):n.push(t,e,s,i),n[0].x<n[1].x){let t=n[0];n[0]=n[1],n[1]=t,t=n[2],n[2]=n[3],n[3]=t}if(n[0].y<n[2].y){let t=n[0];n[0]=n[2],n[2]=t,t=n[1],n[1]=n[3],n[3]=t}return n}_Str_4536(e,s,i,n){const r=[];let a=s.getSortableSpriteList();const o=i._Str_21072(i.activeRoomId,Ot.a.UNIT);for(const c of o)if(c.id!==n){const e=c.visualization.getSpriteList();if(e){let n=0,r=0;for(const t of a)if(t.name==="avatar_"+c.id){n=t.z,r=t.y+t.height-s.geometry.scale/4;break}const o=i.getRoomObjectScreenLocation(i.activeRoomId,c.id,Ot.a.UNIT,s.id);if(o){0===r&&(r=o.y);for(const i of e)i.x=i.x+(o.x-s.screenOffsetX),i.y=i.y+r,i.z=i.z+n,0!==i.name.indexOf("h_std_fx29_")&&0!==i.name.indexOf("h_std_fx185_")||(i.y=i.y+t._Str_18565),a.push(i)}}}a=t._Str_22230(a,i),a.sort(t._Str_22564);for(const c of a)null!==c.name&&c.name.length>0&&0!==c.name.indexOf("tile_cursor_")&&t._Str_20789(c,e,s)&&(n<0||c.objectId!=n)&&(r.push(this._Str_25132(c,e,s,i)),this._Str_6409||(this._Str_6409=c.z),this._Str_3008++);return JSON.stringify(r)}_Str_24177(t){return JSON.stringify(new Object)}_Str_25132(e,s,i,n){let r=[];const a={};let o=e.name;return-1!==e.name.indexOf("@")&&(r=e.name.split("@"),o=r[0]),a.name=o,a.x=e.x-s.x,a.y=e.y-s.y,a.x=a.x+i.screenOffsetX,a.y=a.y+i.screenOffsetY,a.z=e.z,e.alpha&&"255"!==e.alpha.toString()&&(a.alpha=e.alpha),e.flipH&&(a.flipH=e.flipH),e.skew&&(a.skew=e.skew),e.frame&&(a.frame=e.frame),e.color&&e.color.length>0&&(a.color=parseInt(e.color)),e.blendMode&&"normal"!==e.blendMode&&(a.blendMode=e.blendMode),0===o.indexOf("http")&&(a.width=e.width,a.height=e.height,this._Str_18433++,this._Str_18433>t._Str_17558&&(a.name="box")),e.posture&&(a.posture=e.posture),a}_Str_25196(e,s,n){const r=new i.j(0,0),a=new i.j(e.width,0),o=new i.j(0,e.height),c=new i.j(e.width,e.height),_=t._Str_14110(r,a,o,c);let h=0;n.length>0?(h=n[0].z,this._Str_6409&&(h=Math.max(this._Str_6409,h))):h=this._Str_6409?this._Str_6409:0,h+=1.776104*this._Str_3008+2.31743*n.length;const l=new Xe(null,s);return l.cornerPoints=_,l.z=h,l}_Str_25623(t,e,s){const i=new Map;let n=1;this._Str_6409&&(n+=this._Str_6409);for(const o of t)i.set(o.uniqueId,{plane:o,z:n});const r=e._Str_14588();r.sort((t,e)=>e.z-t.z),r.reverse();let a=[];for(const o of r){const t=o.sprite;if(t){const e=i.get(t.id);e&&(i.delete(t.id),e.z=o.z,a.push(e))}}return a=a.concat(Array.from(i.values())),a}_Str_22985(e,s,i,n){const r=[],a=i.getRoomObject(i.activeRoomId,fr.ROOM_OBJECT_ID,Ot.a.ROOM).visualization;if(a){const o=s.geometry,c=this._Str_25623(a._Str_19113,s,i),h=_.a.instance.stage;for(const i of c){const n=i.plane,a=[],c=m.a.sum(n.location,n._Str_5424),_=o.getScreenPoint(n.location),l=o.getScreenPoint(c),u=o.getScreenPoint(m.a.sum(n.location,n._Str_4968)),d=o.getScreenPoint(m.a.sum(c,n._Str_4968));a.push(_,l,u,d);let g=0,p=0;for(const t of a)t.x+=h.width/2,t.y+=h.height/2,t.x+=s.screenOffsetX,t.y+=s.screenOffsetY,t.x+=-e.x,t.y+=-e.y,t.x<0?g--:t.x>=e.width&&g++,t.y<0?p--:t.y>=e.height&&p++;if(4===Math.abs(g)||4===Math.abs(p));else{const e=t._Str_14110(_,l,u,d);for(const t of n._Str_22136(o))t.cornerPoints=e,t.z=i.z,r.push(t)}}r.unshift(this._Str_25196(e,n,r))}return r}}return t._Str_16967=1,t._Str_18197=-16,t._Str_18565=-52,t._Str_17558=30,t})(),fr=(()=>{class t extends r.a{constructor(t){super(),this._communication=t,this._sessionDataManager=null,this._roomSessionManager=null,this._roomManager=null,this._roomObjectEventHandler=new on(this),this._roomMessageHandler=new Si(this),this._roomContentLoader=new As.a,this._ready=!1,this._activeRoomId=-1,this._activeRoomActiveCanvas=-1,this._roomInstanceDatas=new Map,this._roomDatas=new Map,this._roomRendererFactory=new y,this._visualizationFactory=new ys,this._logicFactory=new _r,this._activeRoomActiveCanvasMouseX=0,this._activeRoomActiveCanvasMouseY=0,this._activeRoomIsDragged=!1,this._activeRoomWasDragged=!1,this._activeRoomDragStartX=0,this._activeRoomDragStartY=0,this._activeRoomDragX=0,this._activeRoomDragY=0,this._skipFurnitureCreationForNextFrame=!1,this._mouseCursorUpdate=!1,this._imageObjectIdBank=null,this._imageCallbacks=new Map,this._thumbnailCallbacks=new Map,this._roomDraggingAlwaysCenters=!1,this._roomAllowsDragging=!0,this._badgeListenerObjects=new Map,this.runVisibilityUpdate=this.runVisibilityUpdate.bind(this),this.processRoomObjectEvent=this.processRoomObjectEvent.bind(this),this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.onBadgeImageReadyEvent=this.onBadgeImageReadyEvent.bind(this)}onInit(){this._ready||(this._imageObjectIdBank=new A(1e3),this._thumbnailObjectIdBank=new A(1e3),this._logicFactory.registerEventFunction(this.processRoomObjectEvent),this._roomManager&&(this._roomManager.setContentLoader(this._roomContentLoader),this._roomManager.addUpdateCategory(Ot.a.FLOOR),this._roomManager.addUpdateCategory(Ot.a.WALL),this._roomManager.addUpdateCategory(Ot.a.UNIT),this._roomManager.addUpdateCategory(Ot.a.CURSOR),this._roomManager.addUpdateCategory(Ot.a.ROOM)),this._roomMessageHandler.setConnection(this._communication.connection),this._roomContentLoader.initialize(this.events),this._roomContentLoader.setSessionDataManager(this._sessionDataManager),this._roomContentLoader.setIconListener(this),this._roomSessionManager&&(this._roomSessionManager.events.addEventListener(N.a.STARTED,this.onRoomSessionEvent),this._roomSessionManager.events.addEventListener(N.a.ENDED,this.onRoomSessionEvent)),_.a.instance.ticker.add(this.update,this),document.addEventListener("visibilitychange",this.runVisibilityUpdate))}onDispose(){if(this._ready){for(const[t,e]of this._roomInstanceDatas)this.removeRoomInstance(t);document.removeEventListener("visibilitychange",this.runVisibilityUpdate),_.a.instance.ticker.remove(this.update,this),this._roomObjectEventHandler&&this._roomObjectEventHandler.dispose(),this._roomMessageHandler&&this._roomMessageHandler.dispose(),this._roomSessionManager&&(this._roomSessionManager.events.removeEventListener(N.a.STARTED,this.onRoomSessionEvent),this._roomSessionManager.events.removeEventListener(N.a.ENDED,this.onRoomSessionEvent))}}onRoomSessionEvent(t){if(t instanceof N.a)switch(t.type){case N.a.STARTED:return void(this._roomMessageHandler&&this._roomMessageHandler.setRoomId(t.session.roomId));case N.a.ENDED:return void(this._roomMessageHandler&&(this._roomMessageHandler.clearRoomId(),this.removeRoomInstance(t.session.roomId)))}}setActiveRoomId(t){this._activeRoomId=t}destroyRoom(t){this.removeRoomInstance(t)}getRoomInstance(t){return this._roomManager&&this._roomManager.getRoomInstance(this.getRoomId(t))||null}removeRoomInstance(t){this.getRoomInstance(t)&&this._roomManager&&this._roomManager.removeRoomInstance(this.getRoomId(t));const e=this._roomInstanceDatas.get(t);e&&(this._roomInstanceDatas.delete(e.roomId),e.dispose()),this.events.dispatchEvent(new P.a(P.a.DISPOSED,t))}createRoomInstance(t,e){let s="111",i="201",r="1";if(!this._ready){let a=this._roomDatas.get(t);return a&&(this._roomDatas.delete(t),s=a.floorType,i=a.wallType,r=a.landscapeType),a=new lr(t,e),a.floorType=s,a.wallType=i,a.landscapeType=r,this._roomDatas.set(t,a),void n.a.log("Room Engine not initilized yet, can not create room. Room data stored for later initialization.")}if(!e)return void n.a.log("Room property messages received before floor height map, will initialize when floor height map received.");const a=this._roomDatas.get(t);a&&(this._roomDatas.delete(t),a.floorType&&(s=a.floorType),a.wallType&&(i=a.wallType),a.landscapeType&&(r=a.landscapeType)),this.setupRoomInstance(t,e,s,i,r,this.getRoomInstanceModelName(t))&&(this._roomAllowsDragging=!e.restrictsDragging,this.events.dispatchEvent(new P.a(P.a.INITIALIZED,t)))}setupRoomInstance(e,s,i,n,r,a){if(!this._ready||!this._roomManager)return;const o=this._roomManager.createRoomInstance(this.getRoomId(e));if(!o)return null;const c=o.createRoomObjectAndInitalize(t.ROOM_OBJECT_ID,t.ROOM_OBJECT_TYPE,Ot.a.ROOM);if(o.model.setValue(mi.a.ROOM_IS_PUBLIC,0),o.model.setValue(mi.a.ROOM_Z_SCALE,1),s&&(o.model.setValue(mi.a.RESTRICTS_DRAGGING,s.restrictsDragging),o.model.setValue(mi.a.RESTRICTS_SCALING,s.restrictsScaling),o.model.setValue(mi.a.RESTRICTED_SCALE,s.restrictedScale),s.dimensions)){const t=s.dimensions.minX,e=s.dimensions.maxX,i=s.dimensions.minY,n=s.dimensions.maxY;o.model.setValue(mi.a.ROOM_MIN_X,t),o.model.setValue(mi.a.ROOM_MAX_X,e),o.model.setValue(mi.a.ROOM_MIN_Y,i),o.model.setValue(mi.a.ROOM_MAX_Y,n);const r=423*t+671*e+913*i+7509*n;c&&c.model&&c.model.setValue(At.a.ROOM_RANDOM_SEED,r)}const _=c&&c.logic||null;if(_&&(_.initialize(s),i&&(_.processUpdateMessage(new bt(bt.ROOM_FLOOR_UPDATE,i)),o.model.setValue(At.a.ROOM_FLOOR_TYPE,i)),n&&(_.processUpdateMessage(new bt(bt.ROOM_WALL_UPDATE,n)),o.model.setValue(At.a.ROOM_WALL_TYPE,n)),r&&(_.processUpdateMessage(new bt(bt.ROOM_LANDSCAPE_UPDATE,r)),o.model.setValue(At.a.ROOM_LANDSCAPE_TYPE,r))),s&&s.doors.length){let t=0;for(;t<s.doors.length;){const e=s.doors[t];if(e){const s=e.x,i=e.y,n=e.z,r=e.dir,a=St.DOOR,c="door_"+t,h=new m.a(s,i,n);_.processUpdateMessage(new St(St.ADD_MASK,c,a,h,St.HOLE)),90!==r&&180!==r||(90===r&&(o.model.setValue(At.a.ROOM_DOOR_X,s-.5),o.model.setValue(At.a.ROOM_DOOR_Y,i)),180===r&&(o.model.setValue(At.a.ROOM_DOOR_X,s),o.model.setValue(At.a.ROOM_DOOR_Y,i-.5)),o.model.setValue(At.a.ROOM_DOOR_Z,n),o.model.setValue(At.a.ROOM_DOOR_DIR,r))}t++}}return o.createRoomObjectAndInitalize(t.CURSOR_OBJECT_ID,t.CURSOR_OBJECT_TYPE,Ot.a.CURSOR),o}getRoomInstanceDisplay(e,s,n,r,a){const o=this.getRoomInstance(e);if(!o)return null;let c=o.renderer;if(!c&&(c=this._roomRendererFactory.createRenderer(),!c))return null;c.roomObjectVariableAccurateZ=At.a.OBJECT_ACCURATE_Z_VALUE,o.setRenderer(c);const _=c.createCanvas(s,n,r,a);if(!_)return null;if(o.model.getValue(mi.a.RESTRICTS_SCALING)){let t=o.model.getValue(mi.a.RESTRICTED_SCALE);t||(t=1),_.setScale(t),_.restrictsScaling=!0}else _.restrictsScaling=!1;if(_.setMouseListener(this._roomObjectEventHandler),_.geometry){_.geometry.z_scale=o.model.getValue(mi.a.ROOM_Z_SCALE);const e=o.model.getValue(At.a.ROOM_DOOR_X),s=o.model.getValue(At.a.ROOM_DOOR_Y),n=o.model.getValue(At.a.ROOM_DOOR_Z),r=o.model.getValue(At.a.ROOM_DOOR_DIR),a=new m.a(e,s,n);let c=null;90===r&&(c=new m.a(-2e3,0,0)),180===r&&(c=new m.a(0,-2e3,0)),_.geometry.setDisplacement(a,c);const h=_.master;if(h){const e=i.n.from(i.p.EMPTY);e.name=t.OVERLAY,e.interactive=!1,h.addChild(e)}}return _.master}setRoomInstanceRenderingCanvasMask(t,e,s){const i=this.getRoomInstanceRenderingCanvas(t,e);i&&i.setMask(s)}setRoomInstanceRenderingCanvasScale(t,e,s,i=null,n=null,r=!1,a=!1){const o=this.getRoomInstanceRenderingCanvas(t,e);if(o){if(o.restrictsScaling&&!r)return;o.setScale(s,i,n,r,a),this.events.dispatchEvent(new P.a(P.a.ROOM_ZOOMED,t))}}getRoomInstanceRenderingCanvas(t,e=-1){const s=this.getRoomInstance(t);if(!s)return null;const i=s.renderer;return i?(-1===e&&(e=this._activeRoomActiveCanvas),i.getCanvas(e)||null):null}getActiveRoomInstanceRenderingCanvas(){return this.getRoomInstanceRenderingCanvas(this._activeRoomId,this._activeRoomActiveCanvas)}getRoomInstanceRenderingCanvasOffset(t,e=-1){-1===e&&(e=this._activeRoomActiveCanvas);const s=this.getRoomInstanceRenderingCanvas(t,e);return s?new i.j(s.screenOffsetX,s.screenOffsetY):null}setRoomInstanceRenderingCanvasOffset(t,e,s){const i=this.getRoomInstanceRenderingCanvas(t,e);return!(!i||!s||(i.screenOffsetX=s.x,i.screenOffsetY=s.y,0))}getRoomInstanceRenderingCanvasScale(t=-1e3,e=-1){-1e3===t&&(t=this._activeRoomId),-1===e&&(e=this._activeRoomActiveCanvas);const s=this.getRoomInstanceRenderingCanvas(t,e);return s?s.scale:1}initializeRoomInstanceRenderingCanvas(t,e,s,i){const n=this.getRoomInstanceRenderingCanvas(t,e);n&&n.initialize(s,i)}getRoomInstanceGeometry(t,e=-1){const s=this.getRoomInstance(t);if(!s)return null;const i=s.renderer;if(!i)return null;-1===e&&(e=this._activeRoomActiveCanvas);const n=i.getCanvas(e);return n?n.geometry:null}getRoomInstanceVariable(t,e){const s=this.getRoomInstance(t);return s&&s.model&&s.model.getValue(e)||null}updateRoomInstancePlaneVisibility(t,e,s=!0){const i=this.getRoomOwnObject(t);return!!i&&(i.processUpdateMessage(new Rt(Rt.WALL_VISIBILITY,e)),i.processUpdateMessage(new Rt(Rt.FLOOR_VISIBILITY,s)),!0)}updateRoomInstancePlaneThickness(t,e,s){const i=this.getRoomOwnObject(t);return!!i&&(i.processUpdateMessage(new It(It.WALL_THICKNESS,e)),i.processUpdateMessage(new It(It.FLOOR_THICKNESS,s)),!0)}updateRoomInstancePlaneType(t,e=null,s=null,i=null,n=!1){const r=this.getRoomOwnObject(t),a=this.getRoomInstance(t);if(!r){let n=this._roomDatas.get(t);return n||(n=new lr(t,null),this._roomDatas.set(t,n)),e&&(n.floorType=e),s&&(n.wallType=s),i&&(n.landscapeType=i),!0}return e&&(a&&!n&&a.model.setValue(At.a.ROOM_FLOOR_TYPE,e),r.processUpdateMessage(new bt(bt.ROOM_FLOOR_UPDATE,e))),s&&(a&&!n&&a.model.setValue(At.a.ROOM_WALL_TYPE,s),r.processUpdateMessage(new bt(bt.ROOM_WALL_UPDATE,s))),i&&(a&&!n&&a.model.setValue(At.a.ROOM_LANDSCAPE_TYPE,i),r.processUpdateMessage(new bt(bt.ROOM_LANDSCAPE_UPDATE,i))),!0}_Str_17804(t,e,s,i){const n=this.getRoomOwnObject(t);if(!n||!n.logic)return!1;const r=new ft(ft.BACKGROUND_COLOR,e,s,i);return n.logic.processUpdateMessage(r),this.events.dispatchEvent(new x.a(t,e,s,i)),!0}addRoomInstanceFloorHole(t,e){if(e<0)return;const s=this.getRoomOwnObject(t),i=this.getRoomObjectFloor(t,e);if(s&&s.logic&&i&&i.model){const t=i.getLocation(),n=i.model.getValue(At.a.FURNITURE_SIZE_X),r=i.model.getValue(At.a.FURNITURE_SIZE_Y);s.processUpdateMessage(new Et(Et.ADD,e,t.x,t.y,n,r))}}removeRoomInstanceFloorHole(t,e){if(e<0)return;const s=this.getRoomOwnObject(t);s&&s.processUpdateMessage(new Et(Et.REMOVE,e))}setRoomEngineGameMode(t,e){const s=this.getRoomInstance(t);if(!s)return;const i=e?1:0;s.model.setValue(mi.a.IS_PLAYING_GAME,i),this.events.dispatchEvent(new P.a(0===i?P.a.NORMAL_MODE:P.a.GAME_MODE,t))}isPlayingGame(){return this.getRoomInstance(this._activeRoomId).model.getValue(mi.a.IS_PLAYING_GAME)>0}disableUpdate(t){t?_.a.instance.ticker.remove(this.update,this):(_.a.instance.ticker.remove(this.update,this),_.a.instance.ticker.add(this.update,this))}runUpdate(){this.update(1)}runVisibilityUpdate(){document.hidden||this.update(1,!0)}update(t,e=!1){this._roomManager&&(t=_.a.instance.time,d.a.turnVisualizationOn(),this.processPendingFurniture(),this._roomManager.update(t,e),this._Str_22919(t),this._mouseCursorUpdate&&this.setPointer(),d.a.turnVisualizationOff())}setPointer(){this._mouseCursorUpdate=!1;const t=this.getRoomInstanceData(this._activeRoomId);t&&t._Str_22598()?document.body.style.cursor="pointer":document.body.style.cursor="auto"}processPendingFurniture(){if(this._skipFurnitureCreationForNextFrame)return void(this._skipFurnitureCreationForNextFrame=!1);const t=(new Date).valueOf();for(const e of this._roomInstanceDatas.values()){if(!e)continue;let s=null,i=0,n=!1;for(;s=e.getNextPendingFurnitureFloor();)if(n=this.processPendingFurnitureFloor(e.roomId,s.id,s),!(++i%5)&&(new Date).valueOf()-t>=40){this._skipFurnitureCreationForNextFrame=!0;break}for(;!this._skipFurnitureCreationForNextFrame&&(s=e.getNextPendingFurnitureWall());)if(n=this.processPendingFurnitureWall(e.roomId,s.id,s),!(++i%5)&&(new Date).valueOf()-t>=40){this._skipFurnitureCreationForNextFrame=!0;break}if(n&&this._roomManager&&(this._roomManager.getRoomInstance(this.getRoomId(e.roomId)).hasUninitializedObjects()||this.objectsInitialized(e.roomId.toString())),this._skipFurnitureCreationForNextFrame)return}}onRoomEngineInitalized(t){if(t){this._ready=!0,this.events.dispatchEvent(new P.a(P.a.ENGINE_INITIALIZED,0));for(const t of this._roomDatas.values())t&&this.createRoomInstance(t.roomId,t.data)}}processPendingFurnitureFloor(t,e,s){if(!s){const i=this.getRoomInstanceData(t);if(i&&(s=i.getPendingFurnitureFloor(e)),!s)return!1}let i=s.type;i||(i=this.getFurnitureFloorName(s.typeId));const n=this.createRoomObjectFloor(t,e,i);if(!n)return!1;const r=n.model;if(r&&(r.setValue(At.a.FURNITURE_COLOR,this.getFurnitureFloorColorIndex(s.typeId)),r.setValue(At.a.FURNITURE_TYPE_ID,s.typeId),r.setValue(At.a.FURNITURE_REAL_ROOM_OBJECT,s.realRoomObject?1:0),r.setValue(At.a.FURNITURE_EXPIRY_TIME,s.expiryTime),r.setValue(At.a.FURNITURE_EXPIRTY_TIMESTAMP,_.a.instance.time),r.setValue(At.a.FURNITURE_USAGE_POLICY,s.usagePolicy),r.setValue(At.a.FURNITURE_OWNER_ID,s.ownerId),r.setValue(At.a.FURNITURE_OWNER_NAME,s.ownerName)),!this.updateRoomObjectFloor(t,e,s.location,s.direction,s.state,s.data,s.extra))return!1;if(s.sizeZ>=0&&!this.updateRoomObjectFloorHeight(t,e,s.sizeZ))return!1;this.events&&this.events.dispatchEvent(new F.a(F.a.ADDED,t,e,Ot.a.FLOOR));const a=this.getPlacedRoomObjectData(t);return a&&a.id===e&&a.category===Ot.a.FLOOR&&this.selectRoomObject(t,e,Ot.a.FLOOR),n.isReady&&s.synchronized&&this._Str_21543(t,n),!0}processPendingFurnitureWall(t,e,s){if(!s){const i=this.getRoomInstanceData(t);if(i&&(s=i.getPendingFurnitureWall(e)),!s)return!1}let i="";s.data&&(i=s.data.getLegacyString());let n=this.getFurnitureWallName(s.typeId,i);n||(n="");const r=this.createRoomObjectWall(t,e,n);if(!r)return!1;const a=r.model;if(a&&(a.setValue(At.a.FURNITURE_COLOR,this.getFurnitureWallColorIndex(s.typeId)),a.setValue(At.a.FURNITURE_TYPE_ID,s.typeId),a.setValue(At.a.FURNITURE_REAL_ROOM_OBJECT,s.realRoomObject?1:0),a.setValue(At.a.OBJECT_ACCURATE_Z_VALUE,1),a.setValue(At.a.FURNITURE_EXPIRY_TIME,s.expiryTime),a.setValue(At.a.FURNITURE_EXPIRTY_TIMESTAMP,_.a.instance.time),a.setValue(At.a.FURNITURE_USAGE_POLICY,s.usagePolicy),a.setValue(At.a.FURNITURE_OWNER_ID,s.ownerId),a.setValue(At.a.FURNITURE_OWNER_NAME,s.ownerName)),!this.updateRoomObjectWall(t,e,s.location,s.direction,s.state,i))return!1;this.events&&this.events.dispatchEvent(new F.a(F.a.ADDED,t,e,Ot.a.WALL));const o=this.getPlacedRoomObjectData(t);return o&&Math.abs(o.id)===e&&o.category===Ot.a.WALL&&this.selectRoomObject(t,e,Ot.a.WALL),!0}setRoomSessionOwnUser(t,e){if(!this._roomSessionManager)return;const s=this._roomSessionManager.getSession(t);s&&s.setOwnRoomIndex(e);const i=this.getRoomCamera(t);i&&(i._Str_10760=e,i._Str_16562=Ot.a.UNIT,i._Str_19465(this._Str_19549))}get _Str_19549(){return 1e3}_Str_22919(t){for(const s of this._roomInstanceDatas.values()){if(!s)continue;const e=s.roomCamera;if(!e)continue;const i=this.getRoomObject(s.roomId,e._Str_10760,e._Str_16562);i&&(s.roomId===this._activeRoomId&&this._activeRoomIsDragged||this._Str_25242(s.roomId,1,i.getLocation(),t))}const e=this.getRoomInstanceRenderingCanvas(this._activeRoomId,1);e&&this._activeRoomIsDragged&&(e.screenOffsetX=e.screenOffsetX+this._activeRoomDragX,e.screenOffsetY=e.screenOffsetY+this._activeRoomDragY,this._activeRoomDragX=0,this._activeRoomDragY=0)}_Str_25242(t,e,s,n){const r=this.getRoomInstanceRenderingCanvas(t,e),a=this.getRoomInstanceData(t);if(!r||!a||1!==r.scale)return;const o=r.geometry,c=a.roomCamera,_=this.getRoomInstance(t);if(!o||!c||!_)return;const h=this._Str_25261(t,e);if(!h)return;let l=Math.floor(s.z)+1;const u=Math.round(h.width),d=Math.round(h.height),g=this.getCanvasBoundingRectangle(e);if(g&&(g.right<0||g.bottom<0||g.left>=u||g.top>=d)&&c.reset(),c._Str_7609!==u||c._Str_7902!==d||c.scale!==o.scale||c._Str_16377!==o.updateId||!m.a.isEqual(s,c._Str_16185)||c._Str_12536){c._Str_16185=s;const t=new m.a;t.assign(s),t.x=Math.round(t.x),t.y=Math.round(t.y);const e=_.model.getValue(mi.a.ROOM_MIN_X)-.5,a=_.model.getValue(mi.a.ROOM_MIN_Y)-.5,p=_.model.getValue(mi.a.ROOM_MAX_X)+.5,f=_.model.getValue(mi.a.ROOM_MAX_Y)+.5,E=Math.round((e+p)/2),S=Math.round((a+f)/2),I=2;let R=new i.j(t.x-E,t.y-S);const b=o.scale/Math.sqrt(2),v=b/2,T=new i.i;T.rotate(-(o.direction.x+90)/180*Math.PI),R=T.apply(R),R.y=R.y*(v/b);const O=h.width/2/b-1,y=h.height/2/v-1;let A=0,C=0,M=0,U=0,D=o.getScreenPoint(new m.a(E,S,I));if(!D)return;if(D.x=D.x+Math.round(h.width/2),D.y=D.y+Math.round(h.height/2),!g)return void o.adjustLocation(new m.a(0,0),25);if(g.x+=-r.screenOffsetX,g.y+=-r.screenOffsetY,!(g.width>1&&g.height>1))return void o.adjustLocation(new m.a(-30,-30),25);A=(g.left-D.x-.25*o.scale)/b,M=(g.right-D.x+.25*o.scale)/b,C=(g.top-D.y-.5*o.scale)/v,U=(g.bottom-D.y+.5*o.scale)/v;let w=!1,N=!1,L=!1,x=!1;Math.round((M-A)*b)<h.width?(l=2,R.x=(M+A)/2,L=!0):(R.x>M-O&&(R.x=M-O,w=!0),R.x<A+O&&(R.x=A+O,w=!0)),Math.round((U-C)*v)<h.height?(l=2,R.y=(U+C)/2,x=!0):(R.y>U-y&&(R.y=U-y,N=!0),R.y<C+y&&(R.y=C+y,N=!0),N&&(R.y=R.y/(v/b))),T.invert(),R=T.apply(R),R.x=R.x+E,R.y=R.y+S;let P=.35,F=.2,k=.2;const W=10,V=10;if(k*u>100&&(k=100/u),P*d>150&&(P=150/d),F*d>150&&(F=150/d),c._Str_10235&&c._Str_7609==u&&c._Str_7902==d&&(k=0),c._Str_10446&&c._Str_7609==u&&c._Str_7902==d&&(P=0,F=0),h.width=h.width*(1-2*k),h.height=h.height*(1-(P+F)),h.width<W&&(h.width=W),h.height<V&&(h.height=V),P+F>0?(h.x+=-h.width/2,h.y+=F/(P+F)*-h.height):(h.x+=-h.width/2,h.y+=-h.height/2),D=o.getScreenPoint(t),!D)return;if(D){D.x=D.x+r.screenOffsetX,D.y=D.y+r.screenOffsetY,t.z=l,t.x=Math.round(2*R.x)/2,t.y=Math.round(2*R.y)/2,c.location||(o.location=t,c._Str_20685(this._Str_11555?new m.a(0,0,0):t));const e=o.getScreenPoint(t),s=new m.a(0,0,0);e&&(s.x=e.x,s.y=e.y),(D.x<h.left||D.x>h.right)&&!c._Str_8564||(D.y<h.top||D.y>h.bottom)&&!c._Str_8690||L&&!c._Str_8564&&c._Str_7609!=u||x&&!c._Str_8690&&c._Str_7902!=d||c._Str_18975!=g.width||c._Str_15953!=g.height||c._Str_7609!=u||c._Str_7902!=d?(c._Str_10235=w,c._Str_10446=N,c.target=this._Str_11555?s:t):(w||(c._Str_10235=!1),N||(c._Str_10446=!1))}c._Str_8564=L,c._Str_8690=x,c._Str_7609=u,c._Str_7902=d,c.scale=o.scale,c._Str_16377=o.updateId,c._Str_18975=g.width,c._Str_15953=g.height,this._sessionDataManager.isCameraFollowDisabled||c.update(n,this._Str_11555?8:.5),this._Str_11555?(r.screenOffsetX=-c.location.x,r.screenOffsetY=-c.location.y):o.adjustLocation(c.location,25)}else c._Str_10235=!1,c._Str_10446=!1,c._Str_8564=!1,c._Str_8690=!1}_Str_25261(t,e){const s=this.getRoomInstanceRenderingCanvas(t,e);return s?new i.k(0,0,s.width,s.height):null}getRoomObjectBoundingRectangle(t,e,s,i){const n=this.getRoomInstanceGeometry(t,i);if(!n)return null;const r=this.getRoomObject(t,e,s);if(!r)return null;const a=r.visualization;if(!a)return null;const o=a.getBoundingRectangle(),c=this.getRoomInstanceRenderingCanvas(t,i),_=c?c.scale:1,h=n.getScreenPoint(r.getLocation());return h?(o.x=o.x*_,o.y=o.y*_,o.width=o.width*_,o.height=o.height*_,h.x=h.x*_,h.y=h.y*_,o.x+=h.x,o.y+=h.y,c?(o.x+=c.width/2+c.screenOffsetX,o.y+=c.height/2+c.screenOffsetY,o):null):null}getCanvasBoundingRectangle(e){return this.getRoomObjectBoundingRectangle(this._activeRoomId,t.ROOM_OBJECT_ID,Ot.a.ROOM,e)}getFurnitureFloorName(t){return this._roomContentLoader?this._roomContentLoader.getFurnitureFloorNameForTypeId(t):null}getFurnitureWallName(t,e=null){return this._roomContentLoader?this._roomContentLoader.getFurnitureWallNameForTypeId(t,e):null}getFurnitureFloorColorIndex(t){return this._roomContentLoader?this._roomContentLoader.getFurnitureFloorColorIndex(t):null}getFurnitureWallColorIndex(t){return this._roomContentLoader?this._roomContentLoader.getFurnitureWallColorIndex(t):null}getRoomInstanceData(t){const e=this._roomInstanceDatas.get(t);if(e)return e;const s=new gr(t);return this._roomInstanceDatas.set(s.roomId,s),s}getRoomInstanceModelName(t){const e=this.getRoomInstanceData(t);return e?e.modelName:null}setRoomInstanceModelName(t,e){const s=this.getRoomInstanceData(t);s&&s.setModelName(e)}getRoomTileObjectMap(t){const e=this.getRoomInstanceData(t);return e?e.tileObjectMap:null}getCurrentRoomCamera(){return this.getRoomCamera(this._activeRoomId)}getRoomCamera(t){const e=this.getRoomInstanceData(t);return e?e.roomCamera:null}getSelectedRoomObjectData(t){const e=this.getRoomInstanceData(t);return e?e.selectedObject:null}setSelectedRoomObjectData(t,e){const s=this.getRoomInstanceData(t);if(!s)return null;s.setSelectedObject(e),e&&s.setPlacedObject(null)}getPlacedRoomObjectData(t){const e=this.getRoomInstanceData(t);return e?e.placedObject:null}setPlacedRoomObjectData(t,e){const s=this.getRoomInstanceData(t);if(!s)return null;s.setPlacedObject(e)}cancelRoomObjectPlacement(){this._roomObjectEventHandler&&this._roomObjectEventHandler.cancelRoomObjectPlacement(this._activeRoomId)}getFurnitureStackingHeightMap(t){const e=this.getRoomInstanceData(t);return e?e.furnitureStackingHeightMap:null}setFurnitureStackingHeightMap(t,e){const s=this.getRoomInstanceData(t);if(!s)return null;s.setFurnitureStackingHeightMap(e)}getLegacyWallGeometry(t){const e=this.getRoomInstanceData(t);return e?e.legacyGeometry:null}createRoomObjectAndInitialize(t,e,s,i){const n=this.getRoomInstance(t);return n?n.createRoomObjectAndInitalize(e,s,i):null}getTotalObjectsForManager(t,e){const s=this.getRoomInstance(t);return s?s.getTotalObjectsForManager(e):0}getRoomObject(t,e,s){const i=this.getRoomInstance(t);return i?i.getRoomObject(e,s):null}getRoomObjectByIndex(t,e,s){const i=this.getRoomInstance(t);return i?i.getRoomObjectByIndex(e,s):null}getRoomObjectCategoryForType(t){return t&&this._roomContentLoader?this._roomContentLoader.getCategoryForType(t):Ot.a.MINIMUM}getRoomObjectCursor(e){return this.getRoomObject(e,t.CURSOR_OBJECT_ID,Ot.a.CURSOR)}getRoomObjectSelectionArrow(e){return this.getRoomObject(e,t.ARROW_OBJECT_ID,Ot.a.CURSOR)}getRoomOwnObject(e){return this.getRoomObject(e,t.ROOM_OBJECT_ID,Ot.a.ROOM)}getRoomObjectUser(t,e){return this.getRoomObject(t,e,Ot.a.UNIT)}removeRoomObjectUser(t,e){return this.removeRoomObject(t,e,Ot.a.UNIT)}createRoomObjectUser(t,e,s){return this.createRoomObjectAndInitialize(t,e,s,Ot.a.UNIT)}getRoomObjectFloor(t,e){return this.getRoomObject(t,e,Ot.a.FLOOR)}createRoomObjectFloor(t,e,s){return this.createRoomObjectAndInitialize(t,e,s,Ot.a.FLOOR)}removeRoomObjectFloor(t,e,s=-1,i=!1){const n=this.getRoomInstanceData(t);if(n&&n.removePendingFunitureFloor(e),this._sessionDataManager&&s===this._sessionDataManager.userId&&!L.isBuilderClubId(e)){const s=this.getRoomObject(t,e,Ot.a.FLOOR);if(s){const i=this.getRoomObjectScreenLocation(t,e,Ot.a.FLOOR,this._activeRoomActiveCanvas);if(i&&1!==s.model.getValue(At.a.FURNITURE_DISABLE_PICKING_ANIMATION)){const t=s.model.getValue(At.a.FURNITURE_TYPE_ID),e=s.model.getValue(At.a.FURNITURE_EXTRAS),n=s.model.getValue(At.a.FURNITURE_DATA_FORMAT),r=vt.a.getData(n),a=this.getFurnitureFloorIcon(t,null,e,r).data;if(a){const t=_.a.instance.renderer.extract.image(a);if(this.events){const e=new U.a(t,i.x,i.y);e.iconName=M.a.INVENTORY,this.events.dispatchEvent(e)}}}}}this.removeRoomObject(t,e,Ot.a.FLOOR),this.setMouseDefault(t,Ot.a.FLOOR,e),i&&this._Str_17722(t,"RoomEngine.disposeObjectFurniture()")}getRoomObjectWall(t,e){return this.getRoomObject(t,e,Ot.a.WALL)}removeRoomObjectWall(t,e,s=-1){if(this._sessionDataManager&&s===this._sessionDataManager.userId&&!L.isBuilderClubId(e)){const s=this.getRoomObject(t,e,Ot.a.WALL);if(s&&-1===s.type.indexOf("post_it")&&-1===s.type.indexOf("external_image_wallitem")){const i=this.getRoomObjectScreenLocation(t,e,Ot.a.WALL,this._activeRoomActiveCanvas);if(i){const t=s.model.getValue(At.a.FURNITURE_TYPE_ID),e=s.model.getValue(At.a.FURNITURE_DATA),n=this.getFurnitureWallIcon(t,null,e).data;if(n){const t=_.a.instance.renderer.extract.image(n);if(this.events){const e=new U.a(t,i.x,i.y);e.iconName=M.a.INVENTORY,this.events.dispatchEvent(e)}}}}}this.removeRoomObject(t,e,Ot.a.WALL),this.updateRoomObjectMask(t,e,!1),this.setMouseDefault(t,Ot.a.WALL,e)}createRoomObjectWall(t,e,s){return this.createRoomObjectAndInitialize(t,e,s,Ot.a.WALL)}removeRoomObject(t,e,s){const i=this.getRoomInstance(t);if(!i)return null;i.removeRoomObject(e,s),this.events&&this.events.dispatchEvent(new F.a(F.a.REMOVED,t,e,s))}addFurnitureFloor(t,e,s,i,n,r,a,o=NaN,c=-1,_=0,h=0,l="",u=!0,d=!0,g=-1){const m=this.getRoomInstanceData(t);if(!m)return!1;const p=new hr(e,s,null,i,n,r,a,o,c,_,h,l,u,d,g);return m.addPendingFurnitureFloor(p),!0}addFurnitureFloorByTypeName(t,e,s,i,n,r,a,o=NaN,c=-1,_=0,h=0,l="",u=!0,d=!0,g=-1){const m=this.getRoomInstanceData(t);if(!m)return!1;const p=new hr(e,0,s,i,n,r,a,o,c,_,h,l,u,d,g);return m.addPendingFurnitureFloor(p),!0}addFurnitureWall(t,e,s,i,n,r,a,o=-1,c=0,_=0,h="",l=!0){const u=this.getRoomInstanceData(t);if(!u)return!1;const d=new Tt.a;d.setString(a);const g=new hr(e,s,null,i,n,r,d,NaN,o,c,_,h,!0,l);return u.addPendingFurnitureWall(g),!0}updateRoomObjectFloor(t,e,s,i,n,r,a=NaN){const o=this.getRoomObjectFloor(t,e);return!!o&&(o.processUpdateMessage(new c(s,i)),o.processUpdateMessage(new dt(n,r,a)),!0)}updateRoomObjectWall(t,e,s,i,n,r=null){const a=this.getRoomObjectWall(t,e);if(!a||!a.logic)return!1;const o=new c(s,i),_=new Tt.a,h=new dt(n,_);return _.setString(r),a.logic.processUpdateMessage(o),a.logic.processUpdateMessage(h),this.updateRoomObjectMask(t,e),!0}updateRoomObjectWallItemData(t,e,s){const i=this.getRoomObjectWall(t,e);return!(!i||!i.logic||(i.logic.processUpdateMessage(new pt(s)),0))}updateRoomObjectFloorHeight(t,e,s){const i=this.getRoomObjectFloor(t,e);return!!i&&(i.processUpdateMessage(new mt(null,null,s)),!0)}updateRoomObjectFloorExpiration(t,e,s){const i=this.getRoomObjectFloor(t,e);return!!i&&(i.model.setValue(At.a.FURNITURE_EXPIRY_TIME,s),i.model.setValue(At.a.FURNITURE_EXPIRTY_TIMESTAMP,_.a.instance.time),!0)}updateRoomObjectWallExpiration(t,e,s){const i=this.getRoomObjectWall(t,e);return!!i&&(i.model.setValue(At.a.FURNITURE_EXPIRY_TIME,s),i.model.setValue(At.a.FURNITURE_EXPIRTY_TIMESTAMP,_.a.instance.time),!0)}updateRoomObjectMask(t,e,s=!0){const i=Ot.a.WALL+"_"+e,n=this.getRoomObjectWall(t,e);let r=null;if(n&&n.model){if(n.model.getValue(At.a.FURNITURE_USES_PLANE_MASK)>0){const t=n.model.getValue(At.a.FURNITURE_PLANE_MASK_TYPE),e=n.getLocation();r=s?new St(St.ADD_MASK,i,t,e):new St(St._Str_10260,i)}}else r=new St(St._Str_10260,i);const a=this.getRoomOwnObject(t);a&&a.logic&&r&&a.logic.processUpdateMessage(r)}rollRoomObjectFloor(t,e,s,i){const n=this.getRoomObjectFloor(t,e);n&&n.processUpdateMessage(new ht(s,i,null,!!i))}updateRoomObjectWallLocation(t,e,s){const i=this.getRoomObjectWall(t,e);return!!i&&(i.logic&&i.logic.processUpdateMessage(new ht(s,null,null)),this.updateRoomObjectMask(t,e),!0)}addRoomObjectUser(t,e,s,i,n,r,a){if(this.getRoomObjectUser(t,e))return!1;let o=yt.a.getTypeString(r);o===yt.a.PET&&(o=this.getPetType(a));const c=this.createRoomObjectUser(t,e,o);return!!c&&(c.processUpdateMessage(new lt(this.fixedUserLocation(t,s),null,i,n,!1,0)),a&&c.processUpdateMessage(new Q(a)),this.events&&this.events.dispatchEvent(new F.a(F.a.ADDED,t,e,Ot.a.UNIT)),!0)}updateRoomObjectUserLocation(t,e,s,i,n=!1,r=0,a=null,o=NaN){const c=this.getRoomObjectUser(t,e);if(!c)return!1;s||(s=c.getLocation()),a||(a=c.getDirection()),isNaN(o)&&(o=c.model.getValue(At.a.HEAD_DIRECTION)),c.processUpdateMessage(new lt(this.fixedUserLocation(t,s),this.fixedUserLocation(t,i),a,o,n,r));const _=this._roomSessionManager&&this._roomSessionManager.getSession(t)||null;return _&&_.ownRoomIndex===e&&this._logicFactory.events.dispatchEvent(new G(G.ROAME_MOVE_TO,i)),!0}fixedUserLocation(t,e){if(!e)return null;const s=this.getFurnitureStackingHeightMap(t),i=this.getLegacyWallGeometry(t);if(!s||!i)return e;let n=e.z;const r=s.getTileHeight(e.x,e.y),a=i.getHeight(e.x,e.y);return Math.abs(n-r)<.1&&Math.abs(r-a)<.1&&(n=i._Str_24141(e.x,e.y)),new m.a(e.x,e.y,n)}updateRoomObjectUserAction(t,e,s,i,n=null){const r=this.getRoomObjectUser(t,e);if(!r)return!1;let a=null;switch(s){case At.a.FIGURE_TALK:a=new z(i);break;case At.a.FIGURE_SLEEP:a=new ct(1===i);break;case At.a.FIGURE_IS_TYPING:a=new _t(1===i);break;case At.a.FIGURE_IS_MUTED:a=new et(1===i);break;case At.a.FIGURE_CARRY_OBJECT:a=new K(i,n);break;case At.a.FIGURE_USE_OBJECT:a=new ut(i);break;case At.a.FIGURE_DANCE:a=new Y(i);break;case At.a.FIGURE_GAINED_EXPERIENCE:a=new Z(i);break;case At.a.FIGURE_NUMBER_VALUE:a=new nt(i);break;case At.a.FIGURE_SIGN:a=new ot(i);break;case At.a.FIGURE_EXPRESSION:a=new q(i);break;case At.a.FIGURE_IS_PLAYING_GAME:a=new rt(1===i);break;case At.a.FIGURE_GUIDE_STATUS:a=new tt(i)}return!!a&&(r.processUpdateMessage(a),!0)}updateRoomObjectUserFigure(t,e,s,i=null,n=null,r=!1){const a=this.getRoomObjectUser(t,e);return!!a&&(a.processUpdateMessage(new Q(s,i,n,r)),!0)}updateRoomObjectUserFlatControl(t,e,s){const i=this.getRoomObjectUser(t,e);return!!i&&(i.processUpdateMessage(new J(parseInt(s))),!0)}updateRoomObjectUserEffect(t,e,s,i=0){const n=this.getRoomObjectUser(t,e);return!!n&&(n.processUpdateMessage(new X(s,i)),!0)}updateRoomObjectUserGesture(t,e,s){const i=this.getRoomObjectUser(t,e);return!!i&&(i.processUpdateMessage(new $(s)),!0)}updateRoomObjectUserPetGesture(t,e,s){const i=this.getRoomObjectUser(t,e);return!!i&&(i.processUpdateMessage(new it(s)),!0)}updateRoomObjectUserPosture(t,e,s,i=null){const n=this.getRoomObjectUser(t,e);return!!n&&(n.processUpdateMessage(new at(s,i)),!0)}updateRoomObjectUserOwn(t,e){const s=this.getRoomObjectUser(t,e);s&&s.processUpdateMessage(new st)}useRoomObject(t,e){const s=this.getRoomObject(this._activeRoomId,t,e);if(s){const t=s.logic;if(t)return t.useObject(),!0}return!1}objectInitialized(e,s,i){const n=this.getRoomIdFromString(e);i===Ot.a.WALL&&this.updateRoomObjectMask(n,s);const r=this.getRoomObject(n,s,i);if(r&&r.model&&r.logic){const t=r.model.getValue(At.a.FURNITURE_DATA_FORMAT);if(!isNaN(t)){const e=vt.a.getData(t);e.initializeFromRoomObjectModel(r.model),r.processUpdateMessage(new dt(r.getState(0),e))}this.events.dispatchEvent(new F.a(F.a.CONTENT_UPDATED,n,s,i))}e!==t.TEMPORARY_ROOM&&this._Str_21543(n,r)}changeObjectState(t,e,s){const i=this.getRoomObject(t,e,s);if(!i||!i.model)return;let n=i.model.getValue(At.a.FURNITURE_AUTOMATIC_STATE_INDEX);isNaN(n)?n=1:n+=1,i.model.setValue(At.a.FURNITURE_AUTOMATIC_STATE_INDEX,n);const r=i.model.getValue(At.a.FURNITURE_DATA_FORMAT),a=vt.a.getData(r);a.initializeFromRoomObjectModel(i.model),i.logic&&i.logic.processUpdateMessage(new dt(n,a))}loadRoomObjectBadgeImage(t,e,s,i,n=!0){if(!this._sessionDataManager)return;const r=this.getRoomObjectFloor(t,e);if(!r||!r.logic)return;let a=n?this._sessionDataManager.loadGroupBadgeImage(i):this._sessionDataManager.loadBadgeImage(i);if(a)this.putBadgeInObjectAssets(r,i,n);else{a="loading_icon",this._badgeListenerObjects||(this._badgeListenerObjects=new Map),this._badgeListenerObjects.size||this._sessionDataManager.events.addEventListener(w.a.IMAGE_READY,this.onBadgeImageReadyEvent);let t=this._badgeListenerObjects.get(i);t||(t=[]),t.push(new mr(r,n)),this._badgeListenerObjects.set(i,t)}r.logic.processUpdateMessage(new gt(i,a))}onBadgeImageReadyEvent(t){if(!this._sessionDataManager)return;const e=this._badgeListenerObjects&&this._badgeListenerObjects.get(t.badgeId);if(e){for(const s of e){if(!s)continue;this.putBadgeInObjectAssets(s.object,t.badgeId,s.groupBadge);const e=s.groupBadge?this._sessionDataManager.loadGroupBadgeImage(t.badgeId):this._sessionDataManager.loadBadgeImage(t.badgeId);s.object&&s.object.logic&&s.object.logic.processUpdateMessage(new gt(t.badgeId,e))}this._badgeListenerObjects.delete(t.badgeId),this._badgeListenerObjects.size||this._sessionDataManager.events.removeEventListener(w.a.IMAGE_READY,this.onBadgeImageReadyEvent)}}putBadgeInObjectAssets(t,e,s=!1){if(!this._roomContentLoader||!this._sessionDataManager)return;const i=s?this._sessionDataManager.loadGroupBadgeImage(e):this._sessionDataManager.loadBadgeImage(e),n=s?this._sessionDataManager.getGroupBadgeImage(e):this._sessionDataManager.getBadgeImage(e);n&&this._roomContentLoader.addAssetToCollection(t.type,i,n)}dispatchMouseEvent(e,s,i,n,r,a,c,_){const l=this.getRoomInstanceRenderingCanvas(this._activeRoomId,e);if(!l)return;const u=this.getRenderingCanvasOverlay(l),d=this._Str_16498(u,t.OBJECT_ICON_SPRITE);if(d){const t=d.getLocalBounds();d.x=s-t.width/2,d.y=i-t.height/2}if(!this._Str_25871(l,s,i,n,r,a,c)&&!l._Str_21232(s,i,n,r,a,c,_)){let e=null;n===h.a.MOUSE_CLICK?(this.events&&this.events.dispatchEvent(new F.a(F.a.DESELECTED,this._activeRoomId,-1,Ot.a.MINIMUM)),e=o.CLICK):n===h.a.MOUSE_MOVE?e=o.MOUSE_MOVE:n===h.a.MOUSE_DOWN?e=o.MOUSE_DOWN:n===h.a.MOUSE_UP&&(e=o.MOUSE_UP),this._roomObjectEventHandler.handleRoomObjectEvent(new o(e,this.getRoomObject(this._activeRoomId,t.ROOM_OBJECT_ID,Ot.a.ROOM),null,r),this._activeRoomId)}this._activeRoomActiveCanvas=e,this._activeRoomActiveCanvasMouseX=s,this._activeRoomActiveCanvasMouseY=i}_Str_25871(e,s,i,n,r,a,o){let c=s-this._activeRoomActiveCanvasMouseX,_=i-this._activeRoomActiveCanvasMouseY;if(n===h.a.MOUSE_DOWN)r||a||o||this.isDecorating||this._roomAllowsDragging&&(this._activeRoomIsDragged=!0,this._activeRoomWasDragged=!1,this._activeRoomDragStartX=this._activeRoomActiveCanvasMouseX,this._activeRoomDragStartY=this._activeRoomActiveCanvasMouseY);else if(n===h.a.MOUSE_UP){if(this._activeRoomIsDragged&&(this._activeRoomIsDragged=!1,this._activeRoomWasDragged)){const t=this.getRoomInstanceData(this._activeRoomId);if(t){const s=t.roomCamera;s&&(this._Str_11555&&(s._Str_12536||(s._Str_8564=!1,s._Str_8690=!1),s._Str_25467(new m.a(-e.screenOffsetX,-e.screenOffsetY))),this._roomDraggingAlwaysCenters&&s.reset())}}}else if(n===h.a.MOUSE_MOVE)this._activeRoomIsDragged&&(this._activeRoomWasDragged||(c=s-this._activeRoomDragStartX,_=i-this._activeRoomDragStartY,(c<=-t.DRAG_THRESHOLD||c>=t.DRAG_THRESHOLD||_<=-t.DRAG_THRESHOLD||_>=t.DRAG_THRESHOLD)&&(this._activeRoomWasDragged=!0),c=0,_=0),0==c&&0==_||(this._activeRoomDragX+=c,this._activeRoomDragY+=_,this._activeRoomWasDragged=!0));else if((n===h.a.MOUSE_CLICK||n===h.a.DOUBLE_CLICK)&&(this._activeRoomIsDragged=!1,this._activeRoomWasDragged))return this._activeRoomWasDragged=!1,!0;return!1}updateMousePointer(t,e,s){const i=this.getRoomObjectCategoryForType(s);switch(t){case k.MOUSE_BUTTON:return void this.setMouseButton(this._activeRoomId,i,e);default:return void this.setMouseDefault(this._activeRoomId,i,e)}}setMouseButton(t,e,s){if(!this._roomSessionManager)return;const i=this._roomSessionManager.getSession(t);if(i&&(e!==Ot.a.FLOOR&&e!==Ot.a.WALL||i.controllerLevel>=D.a.GUEST)){const i=this.getRoomInstanceData(t);i&&i._Str_16810(e+"_"+s)&&(this._mouseCursorUpdate=!0)}}setMouseDefault(t,e,s){if(!this._roomSessionManager)return;const i=this.getRoomInstanceData(t);i&&i._Str_11959(e+"_"+s)&&(this._mouseCursorUpdate=!0)}processRoomObjectOperation(t,e,s){if(!this._roomObjectEventHandler)return!1;this._roomObjectEventHandler.processRoomObjectOperation(this._activeRoomId,t,e,s)}processRoomObjectWallOperation(t,e,s,i){if(!this._roomObjectEventHandler)return!1;e===Ot.a.WALL&&this._roomObjectEventHandler.processRoomObjectWallOperation(this._activeRoomId,t,e,s,i)}processRoomObjectFloorOperation(t,e,s,i){if(!this._roomObjectEventHandler)return!1;e===Ot.a.FLOOR&&this._roomObjectEventHandler.processRoomObjectFloorOperation(this._activeRoomId,t,s,i)}processRoomObjectEvent(t){if(!this._roomObjectEventHandler)return;const e=this.getRoomObjectRoomId(t.object);if(!e)return;const s=this.getRoomIdFromString(e);this._roomObjectEventHandler.handleRoomObjectEvent(t,s)}processRoomObjectPlacement(t,e,s,i,n=null,r=null,a=-1,o=-1,c=null){const _=this.getRoomInstance(this._activeRoomId);return!(!_||0!==_.model.getValue(mi.a.ROOM_IS_PUBLIC))&&!!this._roomObjectEventHandler&&this._roomObjectEventHandler.processRoomObjectPlacement(t,this._activeRoomId,e,s,i,n,r,a,o,c)}getRoomObjectScreenLocation(t,e,s,i=-1){-1==i&&(i=this._activeRoomActiveCanvas);const n=this.getRoomInstanceGeometry(t,i);if(!n)return null;const r=this.getRoomObject(t,e,s);if(!r)return null;const a=n.getScreenPoint(r.getLocation());if(!a)return null;const o=this.getRoomInstanceRenderingCanvas(t,i);return o?(a.x=a.x*o.scale,a.y=a.y*o.scale,a.x+=o.width/2+o.screenOffsetX,a.y+=o.height/2+o.screenOffsetY,a):null}selectRoomObject(t,e,s){this._roomObjectEventHandler&&this._roomObjectEventHandler._Str_17481(t,e,s)}_Str_8675(){this._roomObjectEventHandler&&this._roomObjectEventHandler._Str_8675(this._activeRoomId)}_Str_24651(t,e,s){if(!t||!s)return;let n=this._Str_16498(t,e);return n?null:(n=i.n.from(s),n.name=e,t.addChild(n),n)}onRoomContentLoaded(t,e,s){if(!this._roomContentLoader||-1===t)return;this._thumbnailObjectIdBank._Str_15187(t-1);const i=this._thumbnailCallbacks.get(e);if(i){this._thumbnailCallbacks.delete(e);const s=this._roomContentLoader.getImage(e);if(s)for(const e of i)e&&e.imageReady(t,null,s)}}_Str_16645(e,s,i,n=null,r=null,a=-1,o=-1,c=null){let _=null,h=0,l=null;if(i)l=this.getRoomObjectImage(this._activeRoomId,e,s,new m.a,1,null);else if(this._roomContentLoader)if(s===Ot.a.FLOOR?(_=this._roomContentLoader.getFurnitureFloorNameForTypeId(e),h=this._roomContentLoader.getFurnitureFloorColorIndex(e)):s===Ot.a.WALL&&(_=this._roomContentLoader.getFurnitureWallNameForTypeId(e,n),h=this._roomContentLoader.getFurnitureWallColorIndex(e)),s===Ot.a.UNIT)if(_=yt.a.getTypeString(e),"pet"===_){_=this.getPetType(n);const t=new C.a(n);l=this.getRoomObjectPetImage(t.typeId,t.paletteId,t.color,new m.a(180),64,null,!0,0,t.customParts,c)}else l=this.getGenericRoomObjectImage(_,n,new m.a(180),1,null,0,null,r,a,o,c);else l=this.getGenericRoomObjectImage(_,h.toString(),new m.a,1,null,0,n,r,a,o,c);if(!l||!l.data)return;const u=this.getActiveRoomInstanceRenderingCanvas();if(!u)return;const d=this.getRenderingCanvasOverlay(u);this._Str_21215(d,t.OBJECT_ICON_SPRITE);const g=this._Str_24651(d,t.OBJECT_ICON_SPRITE,l.data);g&&(g.x=this._activeRoomActiveCanvasMouseX-l.data.width/2,g.y=this._activeRoomActiveCanvasMouseY-l.data.height/2)}getRoomObjectImage(t,e,s,i,n,r,a=0){if(!this._roomManager)return null;let o=-1,c=null,_=null,h="",l=null;const u=this.getRoomId(t),d=this._roomManager.getRoomInstance(u);if(d){const t=d.getRoomObject(e,s);if(t&&t.model)switch(o=t.id,c=t.type,s){case Ot.a.FLOOR:case Ot.a.WALL:{h=t.model.getValue(At.a.FURNITURE_COLOR).toString(),l=t.model.getValue(At.a.FURNITURE_EXTRAS);const e=t.model.getValue(At.a.FURNITURE_DATA_FORMAT);e!==Tt.a.FORMAT_KEY&&(_=vt.a.getData(e),_.initializeFromRoomObjectModel(t.model));break}case Ot.a.UNIT:h=t.model.getValue(At.a.FIGURE)}}return this.getGenericRoomObjectImage(c,h,i,n,r,a,l,_,-1,-1,null,o)}getFurnitureFloorIconUrl(t){let e=null,s="";return this._roomContentLoader?(e=this._roomContentLoader.getFurnitureFloorNameForTypeId(t),s=this._roomContentLoader.getFurnitureFloorColorIndex(t).toString(),this._roomContentLoader.getAssetIconUrl(e,s)):null}getFurnitureFloorIcon(t,e,s=null,i=null){return this.getFurnitureFloorImage(t,new m.a,1,e,0,s,-1,-1,i)}getFurnitureWallIconUrl(t,e=null){let s=null,i="";return this._roomContentLoader?(s=this._roomContentLoader.getFurnitureWallNameForTypeId(t,e),i=this._roomContentLoader.getFurnitureWallColorIndex(t).toString(),this._roomContentLoader.getAssetIconUrl(s,i)):null}getFurnitureWallIcon(t,e,s=null){return this.getFurnitureWallImage(t,new m.a,1,e,0,s)}getFurnitureFloorImage(t,e,s,i,n=0,r=null,a=-1,o=-1,c=null){let _=null,h="";return this._roomContentLoader&&(_=this._roomContentLoader.getFurnitureFloorNameForTypeId(t),h=this._roomContentLoader.getFurnitureFloorColorIndex(t).toString()),1===s&&i?this.getGenericRoomObjectThumbnail(_,h,i,r,c):this.getGenericRoomObjectImage(_,h,e,s,i,n,r,c,a,o)}getFurnitureWallImage(t,e,s,i,n=0,r=null,a=-1,o=-1){let c=null,_="";return this._roomContentLoader&&(c=this._roomContentLoader.getFurnitureWallNameForTypeId(t),_=this._roomContentLoader.getFurnitureWallColorIndex(t).toString()),1===s&&i?this.getGenericRoomObjectThumbnail(c,_,i,r,null):this.getGenericRoomObjectImage(c,_,e,s,i,n,r,null,a,o)}getRoomObjectPetImage(t,e,s,i,n,r,a=!0,o=0,c=null,_=null){let h=null,l=t+" "+e+" "+s.toString(16);if(a||(l+=" head"),c){l=l+" "+c.length;for(const t of c)l=l+" "+t.layerId+" "+t.partId+" "+t.paletteId}return this._roomContentLoader&&(h=this._roomContentLoader.getPetNameForType(t)),this.getGenericRoomObjectImage(h,l,i,n,r,o,null,null,-1,-1,_)}getGenericRoomObjectImage(e,s,i,n,r,a=0,o=null,c=null,_=-1,h=-1,l=null,u=-1){if(!this._roomManager)return null;const d=new B;if(d.id=-1,!this._ready||!e)return d;let p=this._roomManager.getRoomInstance(t.TEMPORARY_ROOM);if(!p&&(p=this._roomManager.createRoomInstance(t.TEMPORARY_ROOM),!p))return d;let f=this._imageObjectIdBank._Str_19709();const E=this.getRoomObjectCategoryForType(e);if(f<0)return d;f++;const S=p.createRoomObjectAndInitalize(f,e,E);if(!S||!S.model||!S.logic)return d;const I=S.model;switch(E){case Ot.a.FLOOR:case Ot.a.WALL:I.setValue(At.a.FURNITURE_COLOR,parseInt(s));break;case Ot.a.UNIT:if(e===yt.a.USER||e===yt.a.BOT||e===yt.a.RENTABLE_BOT||e===yt.a.PET)I.setValue(At.a.FIGURE,s);else{const t=new C.a(s);I.setValue(At.a.PET_PALETTE_INDEX,t.paletteId),I.setValue(At.a.PET_COLOR,t.color),t.headOnly&&I.setValue(At.a.PET_HEAD_ONLY,1),t.hasCustomParts&&(I.setValue(At.a.PET_CUSTOM_LAYER_IDS,t.customLayerIds),I.setValue(At.a.PET_CUSTOM_PARTS_IDS,t.customPartIds),I.setValue(At.a.PET_CUSTOM_PALETTE_IDS,t.customPaletteIds)),l&&I.setValue(At.a.FIGURE_POSTURE,l)}}S.setDirection(i);const R=S.visualization;if(!R)return p.removeRoomObject(f,E),d;(_>-1||c)&&(c&&""!==c.getLegacyString()?S.logic.processUpdateMessage(new dt(parseInt(c.getLegacyString()),c)):S.logic.processUpdateMessage(new dt(_,c)));const b=new g.a(n,new m.a(-135,30,0),new m.a(11,11,5));if(R.update(b,0,!0,!1),h>0){let t=0;for(;t<h;)R.update(b,0,!0,!1),t++}const v=R.getImage(a,u);if(d.data=v,d.id=f,!this.isRoomContentTypeLoaded(e)&&r){let t=this._imageCallbacks.get(f.toString());t||(t=[],this._imageCallbacks.set(f.toString(),t)),t.push(r),I.setValue(At.a.IMAGE_QUERY_SCALE,n)}else p.removeRoomObject(f,E),this._imageObjectIdBank._Str_15187(f-1),d.id=0;return b.dispose(),d}getGenericRoomObjectThumbnail(e,s,i,n=null,r=null){if(!this._roomManager)return null;const a=new B;if(a.id=-1,!this._ready||!e)return a;let o=this._roomManager.getRoomInstance(t.TEMPORARY_ROOM);if(!o&&(o=this._roomManager.createRoomInstance(t.TEMPORARY_ROOM),!o))return a;let c=this._thumbnailObjectIdBank._Str_19709();if(this.getRoomObjectCategoryForType(e),c<0)return a;c++,a.id=c,a.data=null,a.image=null;const _=[e,s].join("_"),h=this._roomContentLoader.getImage(_);if(!h&&i){let t=this._thumbnailCallbacks.get(_);t||(t=[],this._thumbnailCallbacks.set(_,t),this._roomContentLoader.downloadImage(c,e,s,null)),t.push(i)}else h&&(a.image=h),this._thumbnailObjectIdBank._Str_15187(c-1),a.id=0;return a}initalizeTemporaryObjectsByType(e,s){const i=this._roomManager.getRoomInstance(t.TEMPORARY_ROOM);if(!i||!this._roomContentLoader)return;const n=this._roomContentLoader.getCategoryForType(e),r=i.getManager(n);let a=null,o=0;if(r&&r.objects.length)for(const t of r.objects.getValues())if(t&&t.model&&t.type===e){const e=t.id,s=t.visualization;let r=null;if(s){const e=t.model.getValue(At.a.IMAGE_QUERY_SCALE);a&&o!==e&&(a.dispose(),a=null),a||(o=e,a=new g.a(e,new m.a(-135,30,0),new m.a(11,11,5))),s.update(a,0,!0,!1),r=s.image}i.removeRoomObject(e,n),this._imageObjectIdBank._Str_15187(e-1);const c=this._imageCallbacks.get(e.toString());if(c){this._imageCallbacks.delete(e.toString());for(const t of c)t&&(r?t.imageReady(e,r):t.imageFailed(e))}}a&&a.dispose()}_Str_7972(e){const s=this.getActiveRoomInstanceRenderingCanvas();if(!s)return;const i=this.getRenderingCanvasOverlay(s),n=this._Str_16498(i,t.OBJECT_ICON_SPRITE);n&&(n.visible=e)}_Str_17948(){const e=this.getActiveRoomInstanceRenderingCanvas();if(!e)return;const s=this.getRenderingCanvasOverlay(e);this._Str_21215(s,t.OBJECT_ICON_SPRITE)}getRenderingCanvasOverlay(e){if(!e)return null;const s=e.master;return s&&s.getChildByName(t.OVERLAY)||null}_Str_21215(t,e){if(!t)return!1;let s=t.children.length-1;for(;s>=0;){const i=t.getChildAt(s);if(i&&i.name===e){if(t.removeChildAt(s),i.children.length){const t=i.getChildAt(0);t.parent.removeChild(t),t.destroy()}return!0}s--}return!1}_Str_16498(t,e){if(!t)return null;let s=t.children.length-1;for(;s>=0;){const i=t.getChildAt(s);if(i&&i.name===e)return i;s--}return null}_Str_21072(t,e){if(this._ready){const s=this.getRoomId(t),i=this._roomManager.getRoomInstance(s);if(i)return i.getRoomObjectsForCategory(e)}return[]}_Str_21543(t,e){const s=this.getRoomInstanceData(t).tileObjectMap;s&&s._Str_21192(e)}_Str_17722(t,e){const s=this.getRoomInstanceData(t).tileObjectMap;s&&s.populate(this._Str_21072(t,Ot.a.FLOOR))}_Str_9972(t,e,s=!1,i=!0,n=!1,r=-1){let a=null;if(a=r>-1?this.getRoomInstanceRenderingCanvas(this._activeRoomId,r):this.getActiveRoomInstanceRenderingCanvas(),!a)return null;n&&a._Str_20787();let o=-1;i||null==this._roomSessionManager.getSession(this._activeRoomId)||(o=this._roomSessionManager.getSession(this._activeRoomId).ownRoomIndex);const c=new pr,_=c._Str_4536(t,a,this,o),h=c._Str_24177(this),l=c._Str_22985(t,a,this,e);return n&&a._Str_22174(),console.log(_,h,l),null}createRoomScreenshot(t,e){const s=this.getRoomInstanceRenderingCanvas(t,e);if(!s)return;const i=s.getDisplayAsTexture(),n=_.a.instance.renderer.extract.base64(i),r=new Image;r.src=n,window.open("").document.write(r.outerHTML)}objectsInitialized(t){const e=this.getRoomIdFromString(t);this.events.dispatchEvent(new P.a(P.a.OBJECTS_INITIALIZED,e))}getRoomId(t){return t.toString()}getRoomIdFromString(t){if(!t)return-1;const e=t.split("_");return e.length<=0?-1:parseInt(e[0])}getRoomObjectRoomId(t){return t&&t.model?t.model.getValue(At.a.OBJECT_ROOM_ID):null}getPetTypeId(t){let e=-1;if(t){const s=t.split(" ");s.length>1&&(e=parseInt(s[0]))}return e}getPetType(t){if(!t)return null;const e=t.split(" ");if(e.length>1){const t=parseInt(e[0]);return this._roomContentLoader?this._roomContentLoader.getPetNameForType(t):"pet"}return null}isRoomContentTypeLoaded(t){return!!this._roomContentLoader&&null!==this._roomContentLoader.getCollection(t)}modifyRoomObjectData(t,e,s,i){return!(!this._roomObjectEventHandler||e!==Ot.a.WALL)&&this._roomObjectEventHandler.modifyWallItemData(this._activeRoomId,t,s,i)}deleteRoomObject(t,e){return!(!this._roomObjectEventHandler||e!==Ot.a.WALL)&&this._roomObjectEventHandler.deleteWallItem(this._activeRoomId,t)}get connection(){return this._communication.connection}get sessionDataManager(){return this._sessionDataManager}set sessionDataManager(t){this._sessionDataManager=t}get roomSessionManager(){return this._roomSessionManager}set roomSessionManager(t){this._roomSessionManager=t}get roomManager(){return this._roomManager}set roomManager(t){this._roomManager=t}get objectEventHandler(){return this._roomObjectEventHandler}get roomRendererFactory(){return this._roomRendererFactory}get visualizationFactory(){return this._visualizationFactory}get logicFactory(){return this._logicFactory}get activeRoomId(){return this._activeRoomId}get ready(){return this._ready}get roomContentLoader(){return this._roomContentLoader}get isDecorating(){if(!this._roomSessionManager)return!1;const t=this._roomSessionManager.getSession(this._activeRoomId);return t&&t.isDecorating||!1}get _Str_11555(){return!0}get selectedAvatarId(){return this._roomObjectEventHandler?this._roomObjectEventHandler.selectedAvatarId:-1}getRoomObjectCount(t,e){return null==this._roomManager?0:this._roomManager.getRoomInstance(t.toString()).getRoomObjectsForCategory(e).length}}return t.ROOM_OBJECT_ID=-1,t.ROOM_OBJECT_TYPE="room",t.CURSOR_OBJECT_ID=-2,t.CURSOR_OBJECT_TYPE="tile_cursor",t.ARROW_OBJECT_ID=-3,t.ARROW_OBJECT_TYPE="selection_arrow",t.OVERLAY="overlay",t.OBJECT_ICON_SPRITE="object_icon_sprite",t.DRAG_THRESHOLD=15,t.TEMPORARY_ROOM="temporary_room",t})()},"3md2":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._figure=null,this._gender=null,!0}parse(t){return!!t&&(this._figure=t.readString(),this._gender=t.readString(),!0)}get figure(){return this._figure}get gender(){return this._gender}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"3r1x":function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t extends Event{}return t.COMPLETE="NITRO_COMPLETE",t})()},"3xex":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._isOpen=!1,this._onShutdown=!1,this._isAuthenticUser=!1,!0}parse(t){return!!t&&(this._isOpen=t.readBoolean(),this._onShutdown=t.readBoolean(),t.bytesAvailable&&(this._isAuthenticUser=t.readBoolean()),!0)}get isOpen(){return this._isOpen}get onShutdown(){return this._onShutdown}get isAuthenticUser(){return this._isAuthenticUser}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"443f":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._homeRoomId=-1,this._roomIdToEnter=-1,!0}parse(t){return!!t&&(this._homeRoomId=t.readInt(),this._roomIdToEnter=t.readInt(),!0)}get homeRoomId(){return this._homeRoomId}get roomIdToEnter(){return this._roomIdToEnter}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"4NUc":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._messages=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._messages.push(t.readString()),e--;return!0}get messages(){return this._messages}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"4Yln":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},"4gvq":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"4hNi":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"4hT9":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO"),n=s("QQU2");class r extends i.a{constructor(t){super(t,n.a)}get _Str_4963(){return this.getParser()._Str_4963}getParser(){return this.parser}}},"4k6Q":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(...t){this._data=[t.length,...t]}getMessageArray(){return this._data}dispose(){}}},"4pnK":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"5+UO":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._callBack=t,this._parserClass=e,this._parser=null,this._connection=null}dispose(){this._callBack=null,this._parserClass=null,this._parser=null,this._connection=null}get callBack(){return this._callBack}get parserClass(){return this._parserClass}get parser(){return this._parser}set parser(t){this._parser=t}get connection(){return this._connection}set connection(t){this._connection=t}}},"5BHI":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._id=-1,this._name=null,this._visible=!1,!0}parse(t){return!!t&&(this._id=t.readInt(),this._name=t.readString(),this._visible=t.readBoolean(),!0)}get id(){return this._id}get name(){return this._name}get visible(){return this._visible}}class r{flush(){return this._categories=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._categories.push(new n(t)),e--;return!0}get categories(){return this._categories}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"5Cat":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._itemId=0,!0}parse(t){return!!t&&(this._itemId=t.readInt(),!0)}get itemId(){return this._itemId}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"5F4d":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._id=-1,this._code=null,this._filter=null,this._localization=null,!0}parse(t){return!!t&&(this._id=t.readInt(),this._code=t.readString(),this._filter=t.readString(),this._localization=t.readString(),!0)}get id(){return this._id}get code(){return this._code}get filter(){return this._filter}get localization(){return this._localization}}},"5RE+":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("J0ap");class r{flush(){return this._items=[],!0}parse(t){return!!t&&(this._items.push(new n.a(t)),!0)}get items(){return this._items}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"5TOT":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e=null){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},"5r5K":function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("Hs+C");let n=(()=>{class t extends i.a{constructor(t,e,s,i,n=null){super(t,e,s,i),this._widget=n}get widget(){return this._widget}}return t.OPEN_WIDGET="RETWE_OPEN_WIDGET",t.CLOSE_WIDGET="RETWE_CLOSE_WIDGET",t.OPEN_FURNI_CONTEXT_MENU="RETWE_OPEN_FURNI_CONTEXT_MENU",t.CLOSE_FURNI_CONTEXT_MENU="RETWE_CLOSE_FURNI_CONTEXT_MENU",t.REQUEST_PLACEHOLDER="RETWE_REQUEST_PLACEHOLDER",t.REQUEST_CREDITFURNI="RETWE_REQUEST_CREDITFURNI",t.REQUEST_STICKIE="RETWE_REQUEST_STICKIE",t.REQUEST_PRESENT="RETWE_REQUEST_PRESENT",t.REQUEST_TROPHY="RETWE_REQUEST_TROPHY",t.REQUEST_TEASER="RETWE_REQUEST_TEASER",t.REQUEST_ECOTRONBOX="RETWE_REQUEST_ECOTRONBOX",t.REQUEST_DIMMER="RETWE_REQUEST_DIMMER",t.REMOVE_DIMMER="RETWE_REMOVE_DIMMER",t.REQUEST_CLOTHING_CHANGE="RETWE_REQUEST_CLOTHING_CHANGE",t.REQUEST_PLAYLIST_EDITOR="RETWE_REQUEST_PLAYLIST_EDITOR",t.REQUEST_MANNEQUIN="RETWE_REQUEST_MANNEQUIN",t.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG="ROWRE_REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG",t.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG="ROWRE_REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG",t.REQUEST_BACKGROUND_COLOR="RETWE_REQUEST_BACKGROUND_COLOR",t.REQUEST_MYSTERYBOX_OPEN_DIALOG="RETWE_REQUEST_MYSTERYBOX_OPEN_DIALOG",t.REQUEST_EFFECTBOX_OPEN_DIALOG="RETWE_REQUEST_EFFECTBOX_OPEN_DIALOG",t.REQUEST_MYSTERYTROPHY_OPEN_DIALOG="RETWE_REQUEST_MYSTERYTROPHY_OPEN_DIALOG",t.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING="RETWE_REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING",t.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED="RETWE_REQUEST_ACHIEVEMENT_RESOLUTION_FAILED",t.REQUEST_FRIEND_FURNITURE_CONFIRM="RETWE_REQUEST_FRIEND_FURNITURE_CONFIRM",t.REQUEST_FRIEND_FURNITURE_ENGRAVING="RETWE_REQUEST_FRIEND_FURNITURE_ENGRAVING",t.REQUEST_BADGE_DISPLAY_ENGRAVING="RETWE_REQUEST_BADGE_DISPLAY_ENGRAVING",t.REQUEST_HIGH_SCORE_DISPLAY="RETWE_REQUEST_HIGH_SCORE_DISPLAY",t.REQUEST_HIDE_HIGH_SCORE_DISPLAY="RETWE_REQUEST_HIDE_HIGH_SCORE_DISPLAY",t.REQUEST_INTERNAL_LINK="RETWE_REQUEST_INTERNAL_LINK",t.REQUEST_ROOM_LINK="RETWE_REQUEST_ROOM_LINK",t})()},"6RUH":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},"6X5G":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"6etz":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO"),n=s("DV2U");class r extends i.a{constructor(t){super(t,n.a)}getParser(){return this.parser}}},"6j78":function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.INFOSTAND_EXTRA_PARAM="RWEIEP_INFOSTAND_EXTRA_PARAM",t.JUKEBOX="RWEIEP_JUKEBOX",t.USABLE_PRODUCT="RWEIEP_USABLE_PRODUCT",t.SONGDISK="RWEIEP_SONGDISK",t.CRACKABLE_FURNI="RWEIEP_CRACKABLE_FURNI",t.BRANDING_OPTIONS="RWEIEP_BRANDING_OPTIONS",t.USABLE="RWEIEP_USABLE",t})()},"6u0Z":function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("y81I");let n=(()=>{class t extends i.a{constructor(t,e){super(t,e)}}return t.OPEN_WIDGET="ROWRE_OPEN_WIDGET",t.CLOSE_WIDGET="ROWRE_CLOSE_WIDGET",t.OPEN_FURNI_CONTEXT_MENU="ROWRE_OPEN_FURNI_CONTEXT_MENU",t.CLOSE_FURNI_CONTEXT_MENU="ROWRE_CLOSE_FURNI_CONTEXT_MENU",t.PLACEHOLDER="ROWRE_PLACEHOLDER",t.CREDITFURNI="ROWRE__CREDITFURNI",t.STICKIE="ROWRE__STICKIE",t.PRESENT="ROWRE_PRESENT",t.TROPHY="ROWRE_TROPHY",t.TEASER="ROWRE_TEASER",t.ECOTRONBOX="ROWRE_ECOTRONBOX",t.DIMMER="ROWRE_DIMMER",t.WIDGET_REMOVE_DIMMER="ROWRE_WIDGET_REMOVE_DIMMER",t.CLOTHING_CHANGE="ROWRE_CLOTHING_CHANGE",t.JUKEBOX_PLAYLIST_EDITOR="ROWRE_JUKEBOX_PLAYLIST_EDITOR",t.MANNEQUIN="ROWRE_MANNEQUIN",t.PET_PRODUCT_MENU="ROWRE_PET_PRODUCT_MENU",t.GUILD_FURNI_CONTEXT_MENU="ROWRE_GUILD_FURNI_CONTEXT_MENU",t.MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG="ROWRE_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG",t.PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG="ROWRE_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG",t.BACKGROUND_COLOR="ROWRE_BACKGROUND_COLOR",t.MYSTERYBOX_OPEN_DIALOG="ROWRE_MYSTERYBOX_OPEN_DIALOG",t.EFFECTBOX_OPEN_DIALOG="ROWRE_EFFECTBOX_OPEN_DIALOG",t.MYSTERYTROPHY_OPEN_DIALOG="ROWRE_MYSTERYTROPHY_OPEN_DIALOG",t.ACHIEVEMENT_RESOLUTION_OPEN="ROWRE_ACHIEVEMENT_RESOLUTION_OPEN",t.ACHIEVEMENT_RESOLUTION_ENGRAVING="ROWRE_ACHIEVEMENT_RESOLUTION_ENGRAVING",t.ACHIEVEMENT_RESOLUTION_FAILED="ROWRE_ACHIEVEMENT_RESOLUTION_FAILED",t.FRIEND_FURNITURE_CONFIRM="ROWRE_FRIEND_FURNITURE_CONFIRM",t.FRIEND_FURNITURE_ENGRAVING="ROWRE_FRIEND_FURNITURE_ENGRAVING",t.BADGE_DISPLAY_ENGRAVING="ROWRE_BADGE_DISPLAY_ENGRAVING",t.HIGH_SCORE_DISPLAY="ROWRE_HIGH_SCORE_DISPLAY",t.HIDE_HIGH_SCORE_DISPLAY="ROWRE_HIDE_HIGH_SCORE_DISPLAY",t.INERNAL_LINK="ROWRE_INTERNAL_LINK",t.ROOM_LINK="ROWRE_ROOM_LINK",t})()},"6vif":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"75Vd":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"7d3m":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"7sb4":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._resultType=0,this._messageText=null,!0}parse(t){return!!t&&(this._resultType=t.readInt(),this._messageText=t.readString(),!0)}get resultType(){return this._resultType}get messageText(){return this._messageText}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"81IQ":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._clientMessageId=0,this._errorCode=0,!0}parse(t){return!!t&&(this._clientMessageId=t.readInt(),this._errorCode=t.readInt(),!0)}get clientMessageId(){return this._clientMessageId}get errorCode(){return this._errorCode}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"8Dbs":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._clubLevel=0,this._securityLevel=0,this._isAmbassador=!1,!0}parse(t){return!!t&&(this._clubLevel=t.readInt(),this._securityLevel=t.readInt(),this._isAmbassador=t.readBoolean(),!0)}get clubLevel(){return this._clubLevel}get securityLevel(){return this._securityLevel}get isAmbassador(){return this._isAmbassador}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"8KaG":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._userId=-1,this._userCanTrade=!1,this._otherUserId=-1,this._otherUserCanTrade=!1,!0}parse(t){return!!t&&(this._userId=t.readInt(),this._userCanTrade=1===t.readInt(),this._otherUserId=t.readInt(),this._otherUserCanTrade=1===t.readInt(),!0)}get _Str_4963(){return this._userId}get _Str_16764(){return this._userCanTrade}get _Str_17613(){return this._otherUserId}get _Str_13374(){return this._otherUserCanTrade}}class r extends i.a{constructor(t){super(t,n)}get _Str_4963(){return this.getParser()._Str_4963}get _Str_16764(){return this.getParser()._Str_16764}get _Str_17613(){return this.getParser()._Str_17613}get _Str_13374(){return this.getParser()._Str_13374}getParser(){return this.parser}}},"8ZkN":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i){this._data=[t,e,s,i]}getMessageArray(){return this._data}dispose(){}}},"8c0Z":function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{constructor(){this._id=++t.ITEM_COUNTER,this._senderId=-1,this._senderName="",this._senderColor=0,this._senderImageUrl=null,this._content="",this._chatType=0,this._chatStyle=0,this._date=new Date}get id(){return this._id}get senderId(){return this._senderId}set senderId(t){this._senderId=t}get senderName(){return this._senderName}set senderName(t){this._senderName=t}get senderColorString(){return this._senderColor&&"#"+this._senderColor.toString(16).padStart(6,"0")||null}set senderColor(t){this._senderColor=t}get senderImageUrl(){return this._senderImageUrl}set senderImageUrl(t){this._senderImageUrl=t}get content(){return this._content}set content(t){this._content=t}get chatType(){return this._chatType}set chatType(t){this._chatType=t}get chatStyle(){return this._chatStyle}set chatStyle(t){this._chatStyle=t}get date(){return this._date}}return t.ITEM_COUNTER=0,t})()},"8lyR":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._userName=null,!0}parse(t){return!!t&&(this._userName=t.readString(),!0)}get userName(){return this._userName}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"8lyl":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._roomId=0,this._isOwner=!1,!0}parse(t){return!!t&&(this._roomId=t.readInt(),this._isOwner=t.readBoolean(),!0)}get roomId(){return this._roomId}get isOwner(){return this._isOwner}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"8qmW":function(t,e,s){"use strict";s.d(e,"a",function(){return c});var i=s("5+UO"),n=s("P7Cj"),r=s("jBuC");class a{constructor(t){this._itemId=t.readInt(),this._furniType=t.readString().toUpperCase(),this._ref=t.readInt(),this._spriteId=t.readInt(),this._category=t.readInt(),this._isGroupable=t.readBoolean(),this._stuffData=r.a.parseObjectData(t),this._secondsToExpiration=-1,this._Str_5390=n.a.instance.time,this._hasRentPeriodStarted=!1,this._Str_9291=t.readInt(),this._Str_8744=t.readInt(),this._Str_9700=t.readInt(),this._Str_3182="S"===this.furniType?t.readInt():-1,this._flatId=-1,this._rentable=!1,this._isWallItem="I"===this._furniType}get itemId(){return this._itemId}get furniType(){return this._furniType}get ref(){return this._ref}get spriteId(){return this._spriteId}get category(){return this._category}get stuffData(){return this._stuffData}get _Str_2794(){return this._Str_3182}get secondsToExpiration(){return this._secondsToExpiration}get _Str_8932(){return this._Str_9291}get _Str_9050(){return this._Str_8744}get _Str_9408(){return this._Str_9700}get isGroupable(){return this._isGroupable}get _Str_3951(){return this._Str_3182}get flatId(){return this._flatId}get rentable(){return this._rentable}get isWallItem(){return this._isWallItem}get hasRentPeriodStarted(){return this._hasRentPeriodStarted}get _Str_10616(){return this._Str_5390}get isRecycleable(){return!0}get tradable(){return!0}get sellable(){return!0}get slotId(){return null}get _Str_19297(){return-1!==this._furniType.indexOf("external_image")}}class o{flush(){return this._firstUserID=-1,this._firstUserItemArray=null,this._firstUserNumItems=0,this._firstUserNumCredits=0,this._secondUserID=-1,this._secondUserItemArray=null,this._secondUserNumItems=0,this._secondUserNumCredits=0,!0}parse(t){return!(!t||(this._firstUserID=t.readInt(),this._firstUserItemArray=[],!this.parseItems(t,this._firstUserItemArray)||(this._firstUserNumItems=t.readInt(),this._firstUserNumCredits=t.readInt(),this._secondUserID=t.readInt(),this._secondUserItemArray=[],!this.parseItems(t,this._secondUserItemArray)||(this._secondUserNumItems=t.readInt(),this._secondUserNumCredits=t.readInt(),0))))}parseItems(t,e){let s=t.readInt();for(;s>0;)e.push(new a(t)),s--;return!0}get _Str_15162(){return this._firstUserID}get _Str_17841(){return this._firstUserItemArray}get _Str_14946(){return this._firstUserNumItems}get _Str_15709(){return this._firstUserNumCredits}get _Str_18215(){return this._secondUserID}get _Str_17465(){return this._secondUserItemArray}get _Str_13801(){return this._secondUserNumItems}get _Str_9138(){return this._secondUserNumCredits}}class c extends i.a{constructor(t){super(t,o)}get _Str_15162(){return this.getParser()._Str_15162}get _Str_18215(){return this.getParser()._Str_18215}get _Str_14946(){return this.getParser()._Str_14946}get _Str_13801(){return this.getParser()._Str_13801}get _Str_15709(){return this.getParser()._Str_15709}get _Str_9138(){return this.getParser()._Str_9138}get _Str_17841(){return this.getParser()._Str_17841}get _Str_17465(){return this.getParser()._Str_17465}getParser(){return this.parser}}},"9/2a":function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("5+UO"),n=s("/52j");class r{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._level=n.a.NONE,this._userId=0,this._username=null,this._figure=null,!0}parse(t){return!!t&&(this._level=t.readInt(),t.readInt(),this._userId=t.readInt(),this._username=t.readString(),this._figure=t.readString(),!0)}get level(){return this._level}get userId(){return this._userId}get username(){return this._username}get figure(){return this._figure}}class a{flush(){return this._id=0,this._hearts=[],this._smiles=[],this._bobbas=[],!0}parse(t){if(!t)return!1;this._id=t.readInt();let e=t.readInt();for(;e>0;){const s=new r(t);s.level===n.a.HEART?this._hearts.push(s):s.level===n.a.SMILE?this._smiles.push(s):s.level===n.a.BOBBA&&this._bobbas.push(s),e--}return!0}get id(){return this._id}get hearts(){return this._hearts}get smiles(){return this._smiles}get bobbas(){return this._bobbas}}class o extends i.a{constructor(t){super(t,a)}getParser(){return this.parser}}},"9Bkc":function(t,e,s){"use strict";s.d(e,"a",function(){return r});class i{constructor(t,e,s,i){this._id=t,this._type=e,this._color=s,this._light=i}get id(){return this._id}get type(){return this._type}get color(){return this._color}get _Str_4272(){return this._light}}var n=s("Ns5P");let r=(()=>{class t extends n.a{constructor(t,e){super(t,e),this._selectedPresetId=0,this._presets=[]}get _Str_10888(){return this._presets.length}get selectedPresetId(){return this._selectedPresetId}set selectedPresetId(t){this._selectedPresetId=t}_Str_17287(t,e,s,n){const r=new i(t,e,s,n);this._presets[t-1]=r}_Str_14989(t){return t<0||t>=this._presets.length?null:this._presets[t]}}return t.RSDPE_PRESETS="RSDPE_PRESETS",t})()},"9Jti":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("vKkO");class r{flush(){return this._definition=null,!0}parse(t){return!!t&&(this._definition=new n.a(t),!0)}get definition(){return this._definition}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"9NDz":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._offerId=-1,this._productCode=null,this._priceCredits=0,this._priceActivityPoints=0,this._priceActivityPointsType=0,this._vip=!1,this._months=0,this._extraDays=0,this._daysLeftAfterPurchase=0,this._year=0,this._month=0,this._day=0,this._giftable=!1,!0}parse(t){return!!t&&(this._offerId=t.readInt(),this._productCode=t.readString(),t.readBoolean(),this._priceCredits=t.readInt(),this._priceActivityPoints=t.readInt(),this._priceActivityPointsType=t.readInt(),this._vip=t.readBoolean(),this._months=t.readInt(),this._extraDays=t.readInt(),this._giftable=t.readBoolean(),this._daysLeftAfterPurchase=t.readInt(),this._year=t.readInt(),this._month=t.readInt(),this._day=t.readInt(),!0)}get offerId(){return this._offerId}get productCode(){return this._productCode}get priceCredits(){return this._priceCredits}get priceActivityPoints(){return this._priceActivityPoints}get priceActivityPointsType(){return this._priceActivityPointsType}get vip(){return this._vip}get months(){return this._months}get extraDays(){return this._extraDays}get daysLeftAfterPurchase(){return this._daysLeftAfterPurchase}get year(){return this._year}get month(){return this._month}get day(){return this._day}get giftable(){return this._giftable}}class r{flush(){return this._offers=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._offers.push(new n(t)),e--;return!0}get offers(){return this._offers}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"9RxG":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s){this._data=[t,e?1:0,s?1:0]}getMessageArray(){return this._data}dispose(){}}},"9loD":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"9mJe":function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{constructor(t,e,s,i=null){this._id=t,this._location=e,this._targetLocation=s,this._movementType=i}get id(){return this._id}get location(){return this._location}get targetLocation(){return this._targetLocation}get movementType(){return this._movementType}}return t.MOVE="mv",t.SLIDE="sld",t})()},"9vQN":function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.NONE=0,t.GUEST=1,t.GUILD_MEMBER=2,t.GUILD_ADMIN=3,t.ROOM_OWNER=4,t.MODERATOR=5,t})()},AAYK:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},AFd5:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},Aavw:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e=0){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},Ahnc:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._reason=0,!0}parse(t){return!!t&&(this._reason=t.readInt(),!0)}get reason(){return this._reason}}let r=(()=>{class t extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}return t._Str_18436=6,t._Str_17787=7,t})()},ArMw:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._itemId=0,this._value=0,!0}parse(t){return!!t&&(this._itemId=t.readInt(),this._value=t.readInt(),!0)}get itemId(){return this._itemId}get value(){return this._value}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"Ays+":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class i{constructor(t,e,s){this._layerId=t,this._partId=e,this._paletteId=s}get layerId(){return this._layerId}set layerId(t){this._layerId=t}get partId(){return this._partId}set partId(t){this._partId=t}get paletteId(){return this._paletteId}set paletteId(t){this._paletteId=t}}class n{constructor(t){this._typeId=this.getTypeId(t),this._paletteId=this.getPaletteId(t),this._color=this.getColor(t),this._headOnly=this.getHeadOnly(t);const e=this.getCustomData(t);this._customLayerIds=this.getCustomLayerIds(e),this._customPartIds=this.getCustomPartIds(e),this._customPaletteIds=this.getCustomPaletteIds(e),this._customParts=[];let s=0;for(;s<this._customLayerIds.length;)this._customParts.push(new i(this._customLayerIds[s],this._customPartIds[s],this._customPaletteIds[s])),s++}get typeId(){return this._typeId}get paletteId(){return this._paletteId}get color(){return this._color}get customLayerIds(){return this._customLayerIds}get customPartIds(){return this._customPartIds}get customPaletteIds(){return this._customPaletteIds}get customParts(){return this._customParts}getCustomPart(t){if(this._customParts)for(const e of this._customParts)if(e.layerId===t)return e;return null}get hasCustomParts(){return!(null==this._customLayerIds)&&this._customLayerIds.length>0}get headOnly(){return this._headOnly}get figureString(){let t=this.typeId+" "+this.paletteId+" "+this.color.toString(16);t=t+" "+this.customParts.length;for(const e of this.customParts)t=t+" "+e.layerId+" "+e.partId+" "+e.paletteId;return t}getCustomData(t){let e=[];if(t){const s=t.split(" "),i=this._headOnly?1:0,n=4+i;if(s.length>n){const t=parseInt(s[3+i]);e=s.slice(n,n+3*t)}}return e}getCustomLayerIds(t){const e=[];let s=0;for(;s<t.length;)e.push(parseInt(t[s+0])),s+=3;return e}getCustomPartIds(t){const e=[];let s=0;for(;s<t.length;)e.push(parseInt(t[s+1])),s+=3;return e}getCustomPaletteIds(t){const e=[];let s=0;for(;s<t.length;)e.push(parseInt(t[s+2])),s+=3;return e}getTypeId(t){if(t){const e=t.split(" ");if(e.length>=1)return parseInt(e[0])}return 0}getPaletteId(t){if(t){const e=t.split(" ");if(e.length>=2)return parseInt(e[1])}return 0}getColor(t){if(t){const e=t.split(" ");if(e.length>=3)return parseInt(e[2],16)}return 16777215}getHeadOnly(t){if(t){const e=t.split(" ");if(e.length>=4)return"head"===e[3]}return!1}}},AzHa:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i){this._data=[t,e,s,i]}getMessageArray(){return this._data}dispose(){}}},BFtu:function(t,e,s){"use strict";s.d(e,"a",function(){return _});var i=s("IqKQ"),n=s("DFHD");class r{constructor(t,e,s,i){this._x=t,this._y=e,this._width=s,this._height=i}get x(){return this._x}get y(){return this._y}get width(){return this._width}get height(){return this._height}}var a=s("QzjD"),o=s("mkz/");let c=(()=>{class t{constructor(){this._corners=[],this._endPoints=[],this._directions=[],this._lengths=[],this._leftTurns=[],this._borders=[],this._hideWalls=[],this._manuallyLeftCut=[],this._manuallyRightCut=[],this._addDuplicates=!1,this._count=0}_Str_17862(t,e,s,i,n){(this._addDuplicates||this._Str_22484(t,e,s,i,n))&&(this._corners.push(t),this._directions.push(e),this._lengths.push(s),this._borders.push(i),this._leftTurns.push(n),this._hideWalls.push(!1),this._manuallyLeftCut.push(!1),this._manuallyRightCut.push(!1),this._count++)}_Str_22484(t,e,s,i,n){let r=0;for(;r<this._count;){if(this._corners[r].x==t.x&&this._corners[r].y==t.y&&this._directions[r]==e&&this._lengths[r]==s&&this._borders[r]==i&&this._leftTurns[r]==n)return!1;r++}return!0}get count(){return this._count}_Str_10778(t){return this._corners[t]}_Str_19138(t){return this._Str_23674(),this._endPoints[t]}_Str_13743(t){return this._lengths[t]}getDirection(t){return this._directions[t]}_Str_25208(t){return this._borders[t]}_Str_10019(t){return this._hideWalls[t]}_Str_17084(t){return this._leftTurns[t]}_Str_25455(t){return this._manuallyLeftCut[t]}_Str_24163(t){return this._manuallyRightCut[t]}_Str_15901(t,e){this._hideWalls[t]=e}_Str_24531(t,e){e<this._lengths[t]&&(this._lengths[t]=e,this._manuallyRightCut[t]=!0)}_Str_23976(e,s){let n;if(s>0&&s<this._lengths[e]){const r=this._corners[e];n=t.WALL_DIRECTION_VECTORS[this.getDirection(e)],this._corners[e]=new i.j(r.x+s*n.x,r.y+s*n.y),this._lengths[e]=this._lengths[e]-s,this._manuallyLeftCut[e]=!0}}_Str_23674(){let e,s,n,r,a;if(this._endPoints.length!=this.count)for(this._endPoints=[],e=0;e<this.count;)s=this._Str_10778(e),n=new i.j(s.x,s.y),r=t.WALL_DIRECTION_VECTORS[this.getDirection(e)],a=this._Str_13743(e),n.x=n.x+r.x*a,n.y=n.y+r.y*a,this._endPoints.push(n),e++}}return t.WALL_DIRECTION_VECTORS=[new n.a(1,0,0),new n.a(0,1,0),new n.a(-1,0,0),new n.a(0,-1,0)],t.WALL_NORMAL_VECTORS=[new n.a(0,1,0),new n.a(-1,0,0),new n.a(0,-1,0),new n.a(1,0,0)],t})(),_=(()=>{class t{constructor(){this._width=0,this._height=0,this._minX=0,this._maxX=0,this._minY=0,this._maxY=0,this._fixedWallHeight=-1,this._floorHeight=0,this._restrictsScaling=!1,this._restrictedScale=1,this._tileMatrix=[],this._tileMatrixOriginal=[],this._planes=[],this._floorHoleMatrix=[],this._wallHeight=3.6,this._wallThicknessMultiplier=1,this._floorThicknessMultiplier=1,this._floorHoles=new Map}static getFloorHeight(t){const e=t.length;if(!e)return 0;let s=0,i=0;for(;i<e;){const e=t[i];let n=0;for(;n<e.length;){const t=e[n];t>s&&(s=t),n++}i++}return s}static findEntranceTile(t){if(!t)return null;const e=t.length;if(!e)return null;const s=[];let n=0;for(;n<e;){const e=t[n];if(!e||!e.length)return null;let i=0;for(;i<e.length;){if(e[i]>=0){s.push(i);break}i++}s.length<n+1&&s.push(e.length+1),n++}for(n=1;n<s.length-1;){if(Math.trunc(s[n])<=Math.trunc(s[n-1])-1&&Math.trunc(s[n])<=Math.trunc(s[n+1])-1)return new i.j(Math.trunc(0|s[n]),n);n++}return null}static expandFloorTiles(t){let e,s,i,n,r,a,o,c,_,h,l,u;const d=t.length,g=t[0].length,m=[];for(s=0;s<4*d;)m[s]=[],s++;let p=0;for(s=0;s<d;){for(r=0,e=0;e<g;){if(a=t[s][e],a<0||a<=255)for(n=0;n<4;){for(i=0;i<4;)void 0===m[p+n]&&(m[p+n]=[]),m[p+n][r+i]=a<0?a:4*a,i++;n++}else{for(o=4*(255&a),c=o+3*(a>>11&1),_=o+3*(a>>10&1),h=o+3*(a>>9&1),l=o+3*(a>>8&1),i=0;i<3;)u=i+1,m[p][r+i]=(c*(3-i)+_*i)/3,m[p+3][r+u]=(h*(3-u)+l*u)/3,m[p+u][r]=(c*(3-u)+h*u)/3,m[p+i][r+3]=(_*(3-i)+l*i)/3,i++;m[p+1][r+1]=c>o?o+2:o+1,m[p+1][r+2]=_>o?o+2:o+1,m[p+2][r+1]=h>o?o+2:o+1,m[p+2][r+2]=l>o?o+2:o+1}r+=4,e++}p+=4,s++}return m}static addTileTypes(t){let e,s,i,n,r,a,o,c,_,h,l,u,d,g;const m=t.length-1,p=t[0].length-1;for(s=1;s<m;){for(e=1;e<p;)i=t[s][e],i<0||(n=255&t[s-1][e-1],r=255&t[s-1][e],a=255&t[s-1][e+1],o=255&t[s][e-1],c=255&t[s][e+1],_=255&t[s+1][e-1],h=255&t[s+1][e],l=255&t[s+1][e+1],u=i+1,d=i-1,g=(n==u||r==u||o==u?8:0)|(a==u||r==u||c==u?4:0)|(_==u||h==u||o==u?2:0)|(l==u||h==u||c==u?1:0),15==g&&(g=0),t[s][e]=i|g<<8),e++;s++}}static unpadHeightMap(t){t.shift(),t.pop();for(const e of t)e.shift(),e.pop()}static padHeightMap(e){const s=[],i=[];for(const n of e)n.push(t.TILE_BLOCKED),n.unshift(t.TILE_BLOCKED);for(const n of e[0])s.push(t.TILE_BLOCKED),i.push(t.TILE_BLOCKED);e.push(i),e.unshift(s)}get minX(){return this._minX}get maxX(){return this._maxX}get minY(){return this._minY}get maxY(){return this._maxY}get tileMapWidth(){return this._width}get tileMapHeight(){return this._height}get planeCount(){return this._planes.length}get floorHeight(){return-1!=this._fixedWallHeight?this._fixedWallHeight:this._floorHeight}get wallHeight(){return-1!=this._fixedWallHeight?this._fixedWallHeight+3.6:this._wallHeight}set wallHeight(t){t<0&&(t=0),this._wallHeight=t}get wallThicknessMultiplier(){return this._wallThicknessMultiplier}set wallThicknessMultiplier(t){t<0&&(t=0),this._wallThicknessMultiplier=t}get floorThicknessMultiplier(){return this._floorThicknessMultiplier}set floorThicknessMultiplier(t){t<0&&(t=0),this._floorThicknessMultiplier=t}dispose(){this._planes=null,this._tileMatrix=null,this._tileMatrixOriginal=null,this._floorHoleMatrix=null,null!=this._floorHoles&&(this._floorHoles.clear(),this._floorHoles=null)}reset(){this._planes=[],this._tileMatrix=[],this._tileMatrixOriginal=[],this._width=0,this._height=0,this._minX=0,this._maxX=0,this._minY=0,this._maxY=0,this._floorHeight=0,this._floorHoleMatrix=[]}initializeTileMap(e,s){e<0&&(e=0),s<0&&(s=0),this._tileMatrix=[],this._tileMatrixOriginal=[],this._floorHoleMatrix=[];let i=0;for(;i<s;){const s=[],n=[],r=[];let a=0;for(;a<e;)s[a]=t.TILE_BLOCKED,n[a]=t.TILE_BLOCKED,r[a]=!1,a++;this._tileMatrix.push(s),this._tileMatrixOriginal.push(n),this._floorHoleMatrix.push(r),i++}return this._width=e,this._height=s,this._minX=this._width,this._maxX=-1,this._minY=this._height,this._maxY=-1,!0}setTileHeight(t,e,s){let i,n,r,a,o;if(t>=0&&t<this._width&&e>=0&&e<this._height){if(i=this._tileMatrix[e],i[t]=s,s>=0)t<this._minX&&(this._minX=t),t>this._maxX&&(this._maxX=t),e<this._minY&&(this._minY=e),e>this._maxY&&(this._maxY=e);else{if(t==this._minX||t==this._maxX){for(n=!1,r=this._minY;r<this._maxY;){if(this.getTileHeightInternal(t,r)>=0){n=!0;break}r++}n||(t==this._minX&&this._minX++,t==this._maxX&&this._maxX--)}if(e==this._minY||e==this._maxY){for(a=!1,o=this._minX;o<this._maxX;){if(this.getTileHeight(o,e)>=0){a=!0;break}o++}a||(e==this._minY&&this._minY++,e==this._maxY&&this._maxY--)}}return!0}return!1}getTileHeight(e,s){if(e<0||e>=this._width||s<0||s>=this._height)return t.TILE_BLOCKED;const i=this._tileMatrix[s];return void 0===i[e]?0:Math.abs(i[e])}getTileHeightOriginal(e,s){return e<0||e>=this._width||s<0||s>=this._height?t.TILE_BLOCKED:this._floorHoleMatrix[s][e]?t.TILE_HOLE:this._tileMatrixOriginal[s][e]}getTileHeightInternal(e,s){return e<0||e>=this._width||s<0||s>=this._height?t.TILE_BLOCKED:this._tileMatrix[s][e]}initializeFromTileData(e=-1){let s,i;for(this._fixedWallHeight=e,i=0;i<this._height;){for(s=0;s<this._width;)void 0===this._tileMatrixOriginal[i]&&(this._tileMatrixOriginal[i]=[]),this._tileMatrixOriginal[i][s]=this._tileMatrix[i][s],s++;i++}const n=t.findEntranceTile(this._tileMatrix);for(i=0;i<this._height;){for(s=0;s<this._width;)void 0===this._floorHoleMatrix[i]&&(this._floorHoleMatrix[i]=[]),this._floorHoleMatrix[i][s]&&this.setTileHeight(s,i,t.TILE_HOLE),s++;i++}return this.initialize(n)}initialize(e){let s=0;null!=e&&(s=this.getTileHeight(e.x,e.y),this.setTileHeight(e.x,e.y,t.TILE_BLOCKED)),this._floorHeight=t.getFloorHeight(this._tileMatrix),this.createWallPlanes();const i=[];for(const t of this._tileMatrix)i.push(t.concat());t.padHeightMap(i),t.addTileTypes(i),t.unpadHeightMap(i);const r=t.expandFloorTiles(i);return this.extractPlanes(r),null!=e&&(this.setTileHeight(e.x,e.y,s),this.addFloor(new n.a(e.x+.5,e.y+.5,s),new n.a(-1,0,0),new n.a(0,-1,0),!1,!1,!1,!1)),!0}generateWallData(t,e){let s,n,r,a,o;const _=new c,h=[this.extractTopWall.bind(this),this.extractRightWall.bind(this),this.extractBottomWall.bind(this),this.extractLeftWall.bind(this)];let l=0,u=new i.j(t.x,t.y),d=0;for(;d++<1e3;){if(s=!1,n=!1,r=l,(u.x<this.minX||u.x>this.maxX||u.y<this.minY||u.y>this.maxY)&&(s=!0),a=h[l](u,e),null==a)return null;if(o=Math.abs(a.x-u.x)+Math.abs(a.y-u.y),u.x==a.x||u.y==a.y?(l=(l-1+h.length)%h.length,o+=1,n=!0):(l=(l+1)%h.length,o--),_._Str_17862(u,r,o,s,n),a.x==t.x&&a.y==t.y&&(a.x!=u.x||a.y!=u.y))break;u=a}return 0==_.count?null:_}hidePeninsulaWallChains(t){let e,s,i,n,r=0;const a=t.count;for(;r<a;){const o=r;for(e=r,s=0,i=!1;!t._Str_25208(r)&&r<a;)t._Str_17084(r)?s++:s>0&&s--,s>1&&(i=!0),e=r,r++;if(i)for(n=o;n<=e;)t._Str_15901(n,!0),n++;r++}}updateWallsNextToHoles(e){let s,i,n,r,a,o,_;const h=e.count;let l=0;for(;l<h;){if(!e._Str_10019(l)){for(s=e._Str_10778(l),i=e.getDirection(l),n=e._Str_13743(l),r=c.WALL_DIRECTION_VECTORS[i],a=c.WALL_NORMAL_VECTORS[i],o=0,_=0;_<n;){if(this.getTileHeightInternal(s.x+_*r.x-a.x,s.y+_*r.y-a.y)==t.TILE_HOLE){if(_>0&&0==o){e._Str_24531(l,_);break}o++}else if(o>0){e._Str_23976(l,o);break}_++}o==n&&e._Str_15901(l,!0)}l++}}resolveOriginalWallIndex(t,e,s){let i,n,r,a,o,c;const _=Math.min(t.y,e.y),h=Math.max(t.y,e.y),l=Math.min(t.x,e.x),u=Math.max(t.x,e.x),d=s.count;let g=0;for(;g<d;){if(i=s._Str_10778(g),n=s._Str_19138(g),t.x==e.x){if(i.x==t.x&&n.x==t.x&&(r=Math.min(i.y,n.y),a=Math.max(i.y,n.y),r<=_&&h<=a))return g}else if(t.y==e.y&&i.y==t.y&&n.y==t.y&&(o=Math.min(i.x,n.x),c=Math.max(i.x,n.x),o<=l&&u<=c))return g;g++}return-1}hideOriginallyHiddenWalls(t,e){let s,n,r,a,o;const _=t.count;let h=0;for(;h<_;)t._Str_10019(h)||(s=t._Str_10778(h),n=new i.j(s.x,s.y),r=c.WALL_DIRECTION_VECTORS[t.getDirection(h)],a=t._Str_13743(h),n.x=n.x+r.x*a,n.y=n.y+r.y*a,o=this.resolveOriginalWallIndex(s,n,e),o>=0?e._Str_10019(o)&&t._Str_15901(h,!0):t._Str_15901(h,!0)),h++}checkWallHiding(t,e){this.hidePeninsulaWallChains(e),this.updateWallsNextToHoles(t),this.hideOriginallyHiddenWalls(t,e)}addWalls(e,s){const i=e.count,r=s.count;let a=0;for(;a<i;){if(!e._Str_10019(a)){const o=e._Str_10778(a),_=e.getDirection(a),h=e._Str_13743(a),l=c.WALL_DIRECTION_VECTORS[_],u=c.WALL_NORMAL_VECTORS[_];let d=-1,g=0;for(;g<h;){const t=this.getTileHeightInternal(o.x+g*l.x+u.x,o.y+g*l.y+u.y);t>=0&&(t<d||d<0)&&(d=t),g++}let m=new n.a(o.x,o.y,d);m=n.a.sum(m,n.a.product(u,.5)),m=n.a.sum(m,n.a.product(l,-.5));const p=this.wallHeight+Math.min(t.MAX_WALL_ADDITIONAL_HEIGHT,this.floorHeight)-d,f=n.a.product(l,-h),E=new n.a(0,0,p);m=n.a.dif(m,f);const S=this.resolveOriginalWallIndex(o,e._Str_19138(a),s);let I=0,R=0;S>=0?(I=s.getDirection((S+1)%r),R=s.getDirection((S-1+r)%r)):(I=e.getDirection((a+1)%i),R=e.getDirection((a-1+i)%i));let b=null;(I-_+4)%4==3?b=c.WALL_NORMAL_VECTORS[I]:(_-R+4)%4==3&&(b=c.WALL_NORMAL_VECTORS[R]);const v=e._Str_17084(a),T=e._Str_17084((a-1+i)%i),O=e._Str_10019((a+1)%i),y=e._Str_25455(a),A=e._Str_24163(a);this.addWall(m,f,E,b,!T||y,!v||A,!O)}a++}}createWallPlanes(){let e,s;const n=this._tileMatrix;if(null==n)return!1;let r,a,o;const c=n.length;let _=0;if(0==c)return!1;for(r=0;r<c;){if(o=n[r],null==o||0==o.length)return!1;_=_>0?Math.min(_,o.length):o.length,r++}const h=Math.min(t.MAX_WALL_ADDITIONAL_HEIGHT,-1!=this._fixedWallHeight?this._fixedWallHeight:t.getFloorHeight(n)),l=this.minX;let u=this.minY;for(u=this.minY;u<=this.maxY;){if(this.getTileHeightInternal(l,u)>t.TILE_HOLE){u--;break}u++}if(u>this.maxY)return!1;const d=new i.j(l,u),g=this.generateWallData(d,!0),m=this.generateWallData(d,!1);for(null!=g&&(e=g.count,s=m.count,this.checkWallHiding(g,m),this.addWalls(g,m)),a=0;a<this.tileMapHeight;){for(r=0;r<this.tileMapWidth;)this.getTileHeightInternal(r,a)<0&&this.setTileHeight(r,a,-(h+this.wallHeight)),r++;a++}return!0}extractTopWall(e,s){if(null==e)return null;let n=1,r=t.TILE_HOLE;for(s||(r=t.TILE_BLOCKED);n<1e3;){if(this.getTileHeightInternal(e.x+n,e.y)>r)return new i.j(e.x+n-1,e.y);if(this.getTileHeightInternal(e.x+n,e.y+1)<=r)return new i.j(e.x+n,e.y+1);n++}return null}extractRightWall(e,s){if(null==e)return null;let n=1,r=t.TILE_HOLE;for(s||(r=t.TILE_BLOCKED);n<1e3;){if(this.getTileHeightInternal(e.x,e.y+n)>r)return new i.j(e.x,e.y+(n-1));if(this.getTileHeightInternal(e.x-1,e.y+n)<=r)return new i.j(e.x-1,e.y+n);n++}return null}extractBottomWall(e,s){if(null==e)return null;let n=1,r=t.TILE_HOLE;for(s||(r=t.TILE_BLOCKED);n<1e3;){if(this.getTileHeightInternal(e.x-n,e.y)>r)return new i.j(e.x-(n-1),e.y);if(this.getTileHeightInternal(e.x-n,e.y-1)<=r)return new i.j(e.x-n,e.y-1);n++}return null}extractLeftWall(e,s){if(null==e)return null;let n=1,r=t.TILE_HOLE;for(s||(r=t.TILE_BLOCKED);n<1e3;){if(this.getTileHeightInternal(e.x,e.y-n)>r)return new i.j(e.x,e.y-(n-1));if(this.getTileHeightInternal(e.x+1,e.y-n)<=r)return new i.j(e.x+1,e.y-n);n++}return null}addWall(e,s,i,r,a,c,_){this.addPlane(o.a.PLANE_WALL,e,s,i,[r]);const h=t.WALL_THICKNESS*this._wallThicknessMultiplier,l=t.FLOOR_THICKNESS*this._floorThicknessMultiplier,u=n.a.crossProduct(s,i),d=n.a.product(u,1/u.length*-h);if(this.addPlane(o.a.PLANE_WALL,n.a.sum(e,i),s,d,[u,r]),a&&this.addPlane(o.a.PLANE_WALL,n.a.sum(n.a.sum(e,s),i),n.a.product(i,-(i.length+l)/i.length),d,[u,r]),c&&(this.addPlane(o.a.PLANE_WALL,n.a.sum(e,n.a.product(i,-l/i.length)),n.a.product(i,(i.length+l)/i.length),d,[u,r]),_)){const t=n.a.product(s,h/s.length);this.addPlane(o.a.PLANE_WALL,n.a.sum(n.a.sum(e,i),n.a.product(t,-1)),t,d,[u,s,r])}}addFloor(e,s,i,r,a,c,_){let h,l,u;null!=this.addPlane(o.a.PLANE_FLOOR,e,s,i)&&(h=t.FLOOR_THICKNESS*this._floorThicknessMultiplier,l=new n.a(0,0,h),u=n.a.dif(e,l),c&&this.addPlane(o.a.PLANE_FLOOR,u,s,l),_&&this.addPlane(o.a.PLANE_FLOOR,n.a.sum(u,n.a.sum(s,i)),n.a.product(s,-1),l),r&&this.addPlane(o.a.PLANE_FLOOR,n.a.sum(u,i),n.a.product(i,-1),l),a&&this.addPlane(o.a.PLANE_FLOOR,n.a.sum(u,s),i,l))}initializeFromMapData(t){if(!t)return!1;this.reset(),this.resetFloorHoles();const e=t.wallHeight,s=t.fixedWallsHeight;if(this.initializeTileMap(t.width,t.height),t.tileMap){let e=0;for(;e<t.tileMap.length;){const s=t.tileMap[e];if(s){let t=0;for(;t<s.length;){const i=s[t];i&&this.setTileHeight(t,e,i.height),t++}}e++}}if(t.holeMap&&t.holeMap.length){let e=0;for(;e<t.holeMap.length;){const s=t.holeMap[e];s&&(this.addFloorHole(s.id,s.x,s.y,s.width,s.height),e++)}this.initializeHoleMap()}return this.wallHeight=e,this.restrictsDragging=t.restrictsDragging,this.restrictsScaling=t.restrictsScaling,this.restrictedScale=t.restrictedScale,this.initializeFromTileData(s),!0}addPlane(t,e,s,i,n=null){if(0==s.length||0==i.length)return null;const r=new o.a(t,e,s,i,n);return this._planes.push(r),r}getMapData(){const t=new a.a;t.width=this._width,t.height=this._height,t.wallHeight=this._wallHeight,t.fixedWallsHeight=this._fixedWallHeight,t.dimensions.minX=this.minX,t.dimensions.maxX=this.maxX,t.dimensions.minY=this.minY,t.dimensions.maxY=this.maxY,t.restrictsDragging=this.restrictsDragging,t.restrictsScaling=this.restrictsScaling,t.restrictedScale=this.restrictedScale;let e=0;for(;e<this._height;){const s=[],i=this._tileMatrixOriginal[e];let n=0;for(;n<this._width;)s.push({height:i[n]}),n++;t.tileMap.push(s),e++}for(const[s,i]of this._floorHoles.entries())i&&t.holeMap.push({id:s,x:i.x,y:i.y,width:i.width,height:i.height});return t}getPlaneLocation(t){if(t<0||t>=this.planeCount)return null;const e=this._planes[t];return e?e.loc:null}getPlaneNormal(t){if(t<0||t>=this.planeCount)return null;const e=this._planes[t];return e?e.normal:null}getPlaneLeftSide(t){if(t<0||t>=this.planeCount)return null;const e=this._planes[t];return e?e._Str_5424:null}getPlaneRightSide(t){if(t<0||t>=this.planeCount)return null;const e=this._planes[t];return e?e._Str_4968:null}getPlaneNormalDirection(t){if(t<0||t>=this.planeCount)return null;const e=this._planes[t];return e?e._Str_25207:null}getPlaneSecondaryNormals(t){let e,s;if(t<0||t>=this.planeCount)return null;const i=this._planes[t];if(null!=i){for(e=[],s=0;s<i._Str_20277;)e.push(i._Str_22585(s)),s++;return e}return null}getPlaneType(t){if(t<0||t>=this.planeCount)return o.a.PLANE_UNDEFINED;const e=this._planes[t];return e?e.type:o.a.PLANE_UNDEFINED}getPlaneMaskCount(t){if(t<0||t>=this.planeCount)return 0;const e=this._planes[t];return e?e._Str_6845:0}getPlaneMaskLeftSideLoc(t,e){if(t<0||t>=this.planeCount)return-1;const s=this._planes[t];return s?s._Str_25133(e):-1}getPlaneMaskRightSideLoc(t,e){if(t<0||t>=this.planeCount)return-1;const s=this._planes[t];return s?s._Str_23609(e):-1}getPlaneMaskLeftSideLength(t,e){if(t<0||t>=this.planeCount)return-1;const s=this._planes[t];return s?s._Str_25097(e):-1}getPlaneMaskRightSideLength(t,e){if(t<0||t>=this.planeCount)return-1;const s=this._planes[t];return s?s._Str_25617(e):-1}addFloorHole(t,e,s,i,n){this.removeFloorHole(t),this._floorHoles.set(t,new r(e,s,i,n))}removeFloorHole(t){this._floorHoles.delete(t)}resetFloorHoles(){this._floorHoles.clear()}initializeHoleMap(){let t,e,s,i,n,r,a,o;for(e=0;e<this._height;){for(s=this._floorHoleMatrix[e],t=0;t<this._width;)s[t]=!1,t++;e++}for(const c of this._floorHoles.values())if(i=c,null!=i)for(n=i.x,r=i.x+i.width-1,a=i.y,o=i.y+i.height-1,n=n<0?0:n,r=r>=this._width?this._width-1:r,a=a<0?0:a,o=o>=this._height?this._height-1:o,e=a;e<=o;){for(s=this._floorHoleMatrix[e],t=n;t<=r;)s[t]=!0,t++;e++}}extractPlanes(t){let e,s,i,r,a,o,c,_,h,l,u,d,g,m,p;const f=t.length,E=t[0].length,S=[];let I=0;for(;I<f;)S[I]=[],I++;let R=0;for(;R<f;){for(e=0;e<E;){if(s=t[R][e],s<0||S[R][e]);else{for(a=0==e||!(t[R][e-1]==s),o=0==R||!(t[R-1][e]==s),i=e+1;i<E&&!(t[R][i]!=s||S[R][i]||R>0&&t[R-1][i]==s==o);)i++;for(c=i==E||!(t[R][i]==s),u=!1,r=R+1;r<f&&!u;){for(_=!(t[r][e]==s),u=_||e>0&&t[r][e-1]==s==a||i<E&&t[r][i]==s==c,h=e;h<i;){if(t[r][h]==s==_){u=!0,i=h;break}h++}if(u)break;r++}for(_=_||r==f,c=i==E||!(t[R][i]==s),l=R;l<r;){for(h=e;h<i;)S[l][h]=!0,h++;l++}d=e/4-.5,g=R/4-.5,m=(i-e)/4,p=(r-R)/4,this.addFloor(new n.a(d+m,g+p,s/4),new n.a(-m,0,0),new n.a(0,-p,0),c,a,_,o)}e++}R++}}get restrictsDragging(){return this._restrictsDragging}set restrictsDragging(t){this._restrictsDragging=t}get restrictsScaling(){return this._restrictsScaling}set restrictsScaling(t){this._restrictsScaling=t}get restrictedScale(){return this._restrictedScale}set restrictedScale(t){this._restrictedScale=t}}return t.FLOOR_THICKNESS=.25,t.WALL_THICKNESS=.25,t.MAX_WALL_ADDITIONAL_HEIGHT=20,t.TILE_BLOCKED=-110,t.TILE_HOLE=-100,t})()},BG3s:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},BTXg:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{get furniId(){return this._furniId}get start(){return this._start}flush(){return this._furniId=-1,this._start=!1,!0}parse(t){return this._furniId=t.readInt(),this._start=t.readBoolean(),!0}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},BVCN:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._unitId=null,this._effectId=0,this._delay=0,!0}parse(t){return!!t&&(this._unitId=t.readInt(),this._effectId=t.readInt(),this._delay=t.readInt(),!0)}get unitId(){return this._unitId}get effectId(){return this._effectId}get delay(){return this._delay}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},Bbk2:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._itemId=0,this._itemsLeft=0,!0}parse(t){return!!t&&(this._itemId=t.readInt(),this._itemsLeft=t.readInt(),!0)}get itemId(){return this._itemId}get itemsLeft(){return this._itemsLeft}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},BgaL:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},BrMT:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.ROOM_MIN_X="room_min_x",t.ROOM_MAX_X="room_max_x",t.ROOM_MIN_Y="room_min_y",t.ROOM_MAX_Y="room_max_y",t.ROOM_IS_PUBLIC="room_is_public",t.ROOM_Z_SCALE="room_z_scale",t.AD_DISPLAY_DELAY="ad_display_delay",t.IS_PLAYING_GAME="is_playing_game",t.RESTRICTS_DRAGGING="restricts_dragging",t.RESTRICTS_SCALING="restricts_scaling",t.RESTRICTED_SCALE="room_scale",t})()},C6IL:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("3r1x");let n=(()=>{class t extends i.a{constructor(t){super(t)}}return t.LOADED="NCE_LOADED",t.FAILED="NCE_FAILED",t})()},Cyol:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("9vQN");class r{flush(){return this._controllerLevel=n.a.NONE,!0}parse(t){return!!t&&(this._controllerLevel=t.readInt(),!0)}get controllerLevel(){return this._controllerLevel}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},CzV9:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._hideWalls=!1,this._thicknessWall=0,this._thicknessFloor=0,!0}parse(t){if(!t)return!1;this._hideWalls=t.readBoolean();let e=t.readInt(),s=t.readInt();return e=e<-2?-2:e>1?1:e,s=s<-2?-2:s>1?1:s,this._thicknessWall=Math.pow(2,e),this._thicknessFloor=Math.pow(2,s),!0}get hideWalls(){return this._hideWalls}get thicknessWall(){return this._thicknessWall}get thicknessFloor(){return this._thicknessFloor}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"D/zE":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._unitId=null,this._handId=0,!0}parse(t){return!!t&&(this._unitId=t.readInt(),this._handId=t.readInt(),!0)}get unitId(){return this._unitId}get handId(){return this._handId}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},DACI:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("IqKQ"),n=s("DFHD");let r=(()=>{class t{constructor(t,e,s,i=null){this._updateId=0,this._scale=1,this._x_scale=1,this._y_scale=1,this._z_scale=1,this._x_scale_internal=1,this._y_scale_internal=1,this._z_scale_internal=1,this._clipNear=-500,this._clipFar=500,this._displacements=null,this.scale=t,this._x=new n.a,this._y=new n.a,this._z=new n.a,this._directionAxis=new n.a,this._location=new n.a,this._direction=new n.a,this._depth=new n.a,this._x_scale_internal=1,this._y_scale_internal=1,this.x_scale=1,this.y_scale=1,this._z_scale_internal=Math.sqrt(.5)/Math.sqrt(3/4),this.z_scale=1,this.location=new n.a(s.x,s.y,s.z),this.direction=new n.a(e.x,e.y,e.z),this.setDepthVector(null!=i?i:e),this._displacements=new Map}static getIntersectionVector(t,e,s,i){const r=n.a.dotProduct(e,i);if(Math.abs(r)<1e-5)return null;const a=n.a.dif(t,s),o=-n.a.dotProduct(i,a)/r;return n.a.sum(t,n.a.product(e,o))}get updateId(){return this._updateId}get scale(){return this._scale/Math.sqrt(.5)}set scale(t){t<=1&&(t=1),(t*=Math.sqrt(.5))!=this._scale&&(this._scale=t,this._updateId++)}get directionAxis(){return this._directionAxis}get location(){return this._location.assign(this._loc),this._location.x=this._location.x*this._x_scale,this._location.y=this._location.y*this._y_scale,this._location.z=this._location.z*this._z_scale,this._location}set location(t){if(null==t)return;null==this._loc&&(this._loc=new n.a);const e=this._loc.x,s=this._loc.y,i=this._loc.z;this._loc.assign(t),this._loc.x=this._loc.x/this._x_scale,this._loc.y=this._loc.y/this._y_scale,this._loc.z=this._loc.z/this._z_scale,this._loc.x==e&&this._loc.y==s&&this._loc.z==i||this._updateId++}get direction(){return this._direction}set direction(t){let e,s,i,r,a;if(null==t)return;null==this._dir&&(this._dir=new n.a);const o=this._dir.x,c=this._dir.y,_=this._dir.z;this._dir.assign(t),this._direction.assign(t),this._dir.x==o&&this._dir.y==c&&this._dir.z==_||this._updateId++;const h=new n.a(0,1,0),l=new n.a(0,0,1),u=new n.a(1,0,0),d=t.x/180*Math.PI,g=t.y/180*Math.PI,m=t.z/180*Math.PI,p=Math.cos(d),f=Math.sin(d),E=n.a.sum(n.a.product(h,p),n.a.product(u,-f)),S=new n.a(l.x,l.y,l.z),I=n.a.sum(n.a.product(h,f),n.a.product(u,p)),R=Math.cos(g),b=Math.sin(g),v=new n.a(E.x,E.y,E.z),T=n.a.sum(n.a.product(S,R),n.a.product(I,b)),O=n.a.sum(n.a.product(S,-b),n.a.product(I,R));0!=m?(e=Math.cos(m),s=Math.sin(m),i=n.a.sum(n.a.product(v,e),n.a.product(T,s)),r=n.a.sum(n.a.product(v,-s),n.a.product(T,e)),a=new n.a(O.x,O.y,O.z),this._x.assign(i),this._y.assign(r),this._z.assign(a),this._directionAxis.assign(this._z)):(this._x.assign(v),this._y.assign(T),this._z.assign(O),this._directionAxis.assign(this._z))}set x_scale(t){this._x_scale!=t*this._x_scale_internal&&(this._x_scale=t*this._x_scale_internal,this._updateId++)}set y_scale(t){this._y_scale!=t*this._y_scale_internal&&(this._y_scale=t*this._y_scale_internal,this._updateId++)}set z_scale(t){this._z_scale!=t*this._z_scale_internal&&(this._z_scale=t*this._z_scale_internal,this._updateId++)}dispose(){this._x=null,this._y=null,this._z=null,this._loc=null,this._dir=null,this._directionAxis=null,this._location=null,null!=this._displacements&&(this._displacements.clear(),this._displacements=null)}setDisplacement(t,e){let s,i;null!=t&&null!=e&&null!=this._displacements&&(s=Math.trunc(Math.round(t.x))+"_"+Math.trunc(Math.round(t.y))+"_"+Math.trunc(Math.round(t.z)),this._displacements.delete(s),i=new n.a,i.assign(e),this._displacements.set(s,i),this._updateId++)}getDisplacenent(t){let e;return null!=this._displacements?(e=Math.trunc(Math.round(t.x))+"_"+Math.trunc(Math.round(t.y))+"_"+Math.trunc(Math.round(t.z)),this._displacements.get(e)):null}setDepthVector(t){let e,s,i,r,a;const o=new n.a(0,1,0),c=new n.a(0,0,1),_=new n.a(1,0,0),h=t.x/180*Math.PI,l=t.y/180*Math.PI,u=t.z/180*Math.PI,d=Math.cos(h),g=Math.sin(h),m=n.a.sum(n.a.product(o,d),n.a.product(_,-g)),p=new n.a(c.x,c.y,c.z),f=n.a.sum(n.a.product(o,g),n.a.product(_,d)),E=Math.cos(l),S=Math.sin(l),I=new n.a(m.x,m.y,m.z),R=n.a.sum(n.a.product(p,E),n.a.product(f,S)),b=n.a.sum(n.a.product(p,-S),n.a.product(f,E));0!=u?(e=Math.cos(u),s=Math.sin(u),i=n.a.sum(n.a.product(I,e),n.a.product(R,s)),r=n.a.sum(n.a.product(I,-s),n.a.product(R,e)),a=new n.a(b.x,b.y,b.z),this._depth.assign(a)):this._depth.assign(b),this._updateId++}adjustLocation(t,e){if(null==t||null==this._z)return;const s=n.a.product(this._z,-e),i=new n.a(t.x+s.x,t.y+s.y,t.z+s.z);this.location=i}getCoordinatePosition(t){if(null==t)return null;const e=n.a.scalarProjection(t,this._x),s=n.a.scalarProjection(t,this._y),i=n.a.scalarProjection(t,this._z);return new n.a(e,s,i)}getScreenPosition(t){let e=n.a.dif(t,this._loc);e.x=e.x*this._x_scale,e.y=e.y*this._y_scale,e.z=e.z*this._z_scale;let s=n.a.scalarProjection(e,this._depth);if(s<this._clipNear||s>this._clipFar)return null;let i=n.a.scalarProjection(e,this._x),r=-n.a.scalarProjection(e,this._y);i*=this._scale,r*=this._scale;const a=this.getDisplacenent(t);return null!=a&&(e=n.a.dif(t,this._loc),e.add(a),e.x=e.x*this._x_scale,e.y=e.y*this._y_scale,e.z=e.z*this._z_scale,s=n.a.scalarProjection(e,this._depth)),e.x=i,e.y=r,e.z=s,e}getScreenPoint(t){const e=this.getScreenPosition(t);return null==e?null:new i.j(e.x,e.y)}getPlanePosition(e,s,r,a){let o,c;const _=-e.y/this._scale,h=n.a.product(this._x,e.x/this._scale);h.add(n.a.product(this._y,_));const l=new n.a(this._loc.x*this._x_scale,this._loc.y*this._y_scale,this._loc.z*this._z_scale);l.add(h);const u=this._z,d=new n.a(s.x*this._x_scale,s.y*this._y_scale,s.z*this._z_scale),g=new n.a(r.x*this._x_scale,r.y*this._y_scale,r.z*this._z_scale),m=new n.a(a.x*this._x_scale,a.y*this._y_scale,a.z*this._z_scale),p=n.a.crossProduct(g,m),f=new n.a;return f.assign(t.getIntersectionVector(l,u,d,p)),null!=f?(f.subtract(d),o=n.a.scalarProjection(f,r)/g.length*r.length,c=n.a.scalarProjection(f,a)/m.length*a.length,new i.j(o,c)):null}performZoom(){this.scale=this.isZoomedIn()?t.SCALE_ZOOMED_OUT:t.SCALE_ZOOMED_IN}isZoomedIn(){return this.scale==t.SCALE_ZOOMED_IN}performZoomOut(){this.scale=t.SCALE_ZOOMED_OUT}performZoomIn(){this.scale=t.SCALE_ZOOMED_IN}}return t.SCALE_ZOOMED_IN=64,t.SCALE_ZOOMED_OUT=32,t})()},DFHD:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t=0,e=0,s=0){this._x=t,this._y=e,this._z=s,this._length=NaN}static sum(t,e){return t&&e?new i(t.x+e.x,t.y+e.y,t.z+e.z):null}static dif(t,e){return t&&e?new i(t.x-e.x,t.y-e.y,t.z-e.z):null}static product(t,e){return t?new i(t.x*e,t.y*e,t.z*e):null}static dotProduct(t,e){return t&&e?t.x*e.x+t.y*e.y+t.z*e.z:0}static crossProduct(t,e){return t&&e?new i(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x):null}static scalarProjection(t,e){if(!t||!e)return-1;const s=e.length;return s>0?(t.x*e.x+t.y*e.y+t.z*e.z)/s:-1}static cosAngle(t,e){if(!t||!e)return 0;const s=t.length*e.length;return s?i.dotProduct(t,e)/s:0}static isEqual(t,e){return!(!t||!e)&&t.x===e.x&&t.y===e.y&&t.z===e.z}negate(){this._x=-this._x,this._y=-this._y,this._z=-this._z}add(t){t&&(this._x+=t.x,this._y+=t.y,this._z+=t.z,this._length=NaN)}subtract(t){t&&(this._x-=t.x,this._y-=t.y,this._z-=t.z,this._length=NaN)}multiply(t){this._x*=t,this._y*=t,this._z*=t,this._length=NaN}divide(t){this._x/=t,this._y/=t,this._z/=t,this._length=NaN}assign(t){t&&(this._x=t.x,this._y=t.y,this._z=t.z,this._length=NaN)}get x(){return this._x}set x(t){this._x=t,this._length=NaN}get y(){return this._y}set y(t){this._y=t,this._length=NaN}get z(){return this._z}set z(t){this._z=t,this._length=NaN}get length(){return isNaN(this._length)&&(this._length=Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z)),this._length}toString(){return`[Vector3d: ${this._x}, ${this._y}, ${this._z}]`}}},DV2U:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{flush(){return this._roomId=0,this._users=new Map,!0}parse(t){if(!t)return!1;this._roomId=t.readInt();let e=t.readInt();for(;e>0;){const s=t.readInt(),i=t.readString();this._users.set(s,i),e--}return!0}get roomId(){return this._roomId}get users(){return this._users}}},DpKJ:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._amount=0,this._amountChanged=0,this._type=-1,!0}parse(t){return!!t&&(this._amount=t.readInt(),this._amountChanged=t.readInt(),this._type=t.readInt(),!0)}get amount(){return this._amount}get amountChanged(){return this._amountChanged}get type(){return this._type}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},EAxq:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},EHDF:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("Ns5P");let n=(()=>{class t extends i.a{constructor(e,s){super(t.USER_DATA_UPDATED,e),this._addedUsers=s}get addedUsers(){return this._addedUsers}}return t.USER_DATA_UPDATED="RMUDUE_USER_DATA_UPDATED",t})()},FV0X:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},FXkd:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i,n){this._data=[t,e.length,...e,s,i.length,...i,n]}getMessageArray(){return this._data}dispose(){}}},"Fcb+":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},Ftck:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},Fv14:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("vuPI"),n=s("Xr/m"),r=s("vzKh");class a extends n.a{constructor(t=null){super(),this._logger=t instanceof r.a?t:new r.a(this.constructor.name),this._events=new i.a,this._isLoaded=!1,this._isLoading=!1}init(){this._isLoaded||this._isLoading||this.isDisposing||(this._isLoading=!0,this.onInit(),this._isLoaded=!0,this._isLoading=!1)}onInit(){}onDispose(){this._events&&this._events.dispose(),super.onDispose()}reload(){this.dispose(),this.init()}get logger(){return this._logger}get events(){return this._events}get isLoaded(){return this._isLoaded}get isLoading(){return this._isLoading}}},Fwdp:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{flush(){return this._name=null,this._days=0,this._int1=0,this._months=0,this._years=0,this._bool1=!1,this._isVip=!1,this._pastClubDays=0,this._int3=0,this._totalSeconds=0,!0}parse(t){return!!t&&(this._name=t.readString(),this._days=t.readInt(),this._int1=t.readInt(),this._months=t.readInt(),this._years=t.readInt(),this._bool1=t.readBoolean(),this._isVip=t.readBoolean(),this._pastClubDays=t.readInt(),this._int3=t.readInt(),this._totalSeconds=t.readInt(),!0)}get name(){return this._name}get days(){return this._days}get int1(){return this._int1}get months(){return this._months}get years(){return this._years}get bool1(){return this._bool1}get isVip(){return this._isVip}get pastClubDays(){return this._pastClubDays}get int3(){return this._int3}get totalSeconds(){return this._totalSeconds}}return t._Str_14729=3,t})()},G0tw:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("3r1x");let n=(()=>{class t extends i.a{constructor(t,e){super(t),this._roomId=e}get roomId(){return this._roomId}}return t.INITIALIZED="REE_INITIALIZED",t.ENGINE_INITIALIZED="REE_ENGINE_INITIALIZED",t.OBJECTS_INITIALIZED="REE_OBJECTS_INITIALIZED",t.NORMAL_MODE="REE_NORMAL_MODE",t.GAME_MODE="REE_GAME_MODE",t.ROOM_ZOOMED="REE_ROOM_ZOOMED",t.DISPOSED="REE_DISPOSED",t})()},G3dz:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this._avatarId=t.readInt(),this._avatarName=t.readString(),this._avatarMotto=t.readString(),this._isAvatarOnline=t.readBoolean(),this._canFollow=t.readBoolean(),this._avatarGender=t.readInt(),this._avatarFigure=t.readString(),this._lastOnlineData=t.readString(),this._realName=t.readString()}get avatarId(){return this._avatarId}get avatarName(){return this._avatarName}get avatarMotto(){return this._avatarMotto}get isAvatarOnline(){return this._isAvatarOnline}get canFollow(){return this._canFollow}get avatarGender(){return this._avatarGender}get avatarFigure(){return this._avatarFigure}get lastOnlineData(){return this._lastOnlineData}get realName(){return this._realName}}class r{flush(){return this._friends=[],this._others=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._friends.push(new n(t)),e--;let s=t.readInt();for(;s>0;)this._others.push(new n(t)),s--;return!0}get friends(){return this._friends}get others(){return this._others}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"GN+4":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("vzKh"),n=s("M98o");let r=(()=>{class t{static logEventLog(t){try{n.a.available&&n.a.call("logEventLog",t)}catch(e){i.a.log("External interface not working, failed to log event log.")}}static openPage(t){try{n.a.available?n.a.call("openPage",t):i.a.log("External interface not available, openPage failed.")}catch(e){i.a.log("Failed to open web page "+t)}}static sendHeartBeat(){try{n.a.available&&n.a.call("heartBeat")}catch(t){i.a.log("Failed to send heartbeat")}}static openWebPageAndMinimizeClient(e){try{n.a.available&&t.openPage(e)}catch(s){i.a.log("Failed to open web page "+e)}}static closeWebPageAndRestoreClient(){try{n.a.available&&n.a.call("closeWebPageAndRestoreClient")}catch(t){i.a.log("Failed to close web page and restore client!")}}static openHabblet(t,e=null){try{n.a.available&&n.a.call("openHabblet",t,e)}catch(s){i.a.log("Failed to open Habblet "+t)}}static closeHabblet(t,e=null){try{n.a.available&&n.a.call("closeHabblet",t,e)}catch(s){i.a.log("Failed to close Habblet "+t)}}static send(t,e){try{n.a.available&&n.a.call("disconnect",t,e)}catch(s){i.a.log("Failed to close send ")}}static showGame(t){try{n.a.available&&n.a.callGame("showGame",t)}catch(e){i.a.log("Failed to open game: "+e)}}static hideGame(){try{n.a.available&&n.a.callGame("hideGame")}catch(t){i.a.log("Failed to hide game")}}static open(t){try{n.a.available?n.a.call("openExternalLink",escape(t)):i.a.log("External interface not available. Could not request to open: "+t)}catch(e){i.a.log("External interface not working. Could not request to open: "+t)}}static roomVisited(t){try{n.a.available?n.a.call("roomVisited",t):i.a.log("External interface not available. Could not store last room visit.")}catch(e){i.a.log("External interface not working. Could not store last room visit.")}}static openMinimail(t){try{n.a.available?n.a.call("openMinimail",t):i.a.log("External interface not available. Could not open minimail.")}catch(e){i.a.log("External interface not working. Could not open minimail.")}}static openNews(){try{n.a.available?n.a.call("openNews"):i.a.log("External interface not available. Could not open news.")}catch(t){i.a.log("External interface not working. Could not open news.")}}static closeNews(){try{n.a.available?n.a.call("closeNews"):i.a.log("External interface not available. Could not close news.")}catch(t){i.a.log("External interface not working. Could not close news.")}}static openAvatars(){try{n.a.available?n.a.call("openAvatars"):i.a.log("External interface not available. Could not open avatars.")}catch(t){i.a.log("External interface not working. Could not open avatars.")}}static openRoomEnterAd(){try{n.a.available?n.a.call("openRoomEnterAd"):i.a.log("External interface not available. Could not open roomenterad.")}catch(t){i.a.log("External interface not working. Could not open roomenterad.")}}static updateFigure(t){try{n.a.available?n.a.call("updateFigure",t):i.a.log("External interface not available. Could not update figure.")}catch(e){i.a.log("External interface not working. Could not update figure.")}}}return t.ADVERTISEMENT="advertisement",t.OPENLINK="openlink",t.OPENROOM="openroom",t})()},Gb7F:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},GfbW:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("G0tw");let n=(()=>{class t extends i.a{constructor(t,e,s,i,n,r){super(t,e),this._enable=s,this._hue=i,this._saturation=n,this._lightness=r}get enable(){return this._enable}get hue(){return this._hue}get saturation(){return this._saturation}get lightness(){return this._lightness}}return t.ROOM_BACKGROUND_COLOR="ROHSLCEE_ROOM_BACKGROUND_COLOR",t})()},GlfS:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO"),n=s("DV2U");class r extends i.a{constructor(t){super(t,n.a)}getParser(){return this.parser}}},"H/Ns":function(t,e,s){"use strict";s.d(e,"a",function(){return ft});var i=s("Fv14"),n=s("G0tw"),r=s("Ns5P"),a=s("QXLr"),o=s("sRv6"),c=s("xq+5"),_=s("jFxZ"),h=s("gLCd"),l=s("Z0XG"),u=s("Xr/m");class d extends u.a{constructor(t,e){super(),this._connection=t,this._listener=e,this._roomId=0}onDispose(){this._connection=null,this._listener=null}setRoomId(t){this._roomId=t}get connection(){return this._connection}get listener(){return this._listener}get roomId(){return this._roomId}}class g extends d{constructor(t,e){super(t,e),t.addMessageEvent(new o.a(this.onRoomUnitChatEvent.bind(this))),t.addMessageEvent(new c.a(this.onRoomUnitChatEvent.bind(this))),t.addMessageEvent(new _.a(this.onRoomUnitChatEvent.bind(this))),t.addMessageEvent(new a.a(this.onRespectReceivedEvent.bind(this)))}onRoomUnitChatEvent(t){if(!this.listener)return;const e=this.listener.getSession(this.roomId);if(!e)return;const s=t.getParser();if(!s)return;let i=l.a.CHAT_NORMAL;t instanceof c.a?i=l.a.CHAT_SHOUT:t instanceof _.a&&(i=l.a.CHAT_WHISPER);const n=new l.a(l.a.CHAT_EVENT,e,s.roomIndex,s.message,i,s.bubble);this.listener.events.dispatchEvent(n)}onRespectReceivedEvent(t){if(!this.listener)return;const e=this.listener.getSession(this.roomId);if(!e)return;const s=t.getParser();if(!s)return;const i=e.userDataManager.getUserData(s.userId);i&&this.listener.events.dispatchEvent(new l.a(l.a.CHAT_EVENT,e,i.roomIndex,"",l.a._Str_5821,h.a.GENERIC))}}var m=s("10wl");let p=(()=>{class t extends r.a{constructor(t,e){super(t,e)}}return t.RSDUE_ALLOW_PETS="RSDUE_ALLOW_PETS",t})();class f extends d{constructor(t,e){super(t,e),t.addMessageEvent(new m.a(this.onRoomInfoEvent.bind(this)))}onRoomInfoEvent(t){if(!(t instanceof m.a))return;const e=t.getParser();if(!e)return;if(e.roomForward)return;const s=this.listener.getSession(this.roomId);if(!s)return;const i=e.data;s.tradeMode=i.tradeMode,s.isGuildRoom=0!==i.habboGroupId,s.doorMode=i.doorMode,s.allowPets=i.allowPets,s.moderationSettings=e.moderation,this.listener.events.dispatchEvent(new p(p.RSDUE_ALLOW_PETS,s)),this.listener.events.dispatchEvent(new r.a(r.a.ROOM_DATA,s))}}var E=s("/icx"),S=s("9Bkc");class I extends d{constructor(t,e){super(t,e),t.addMessageEvent(new E.a(this._Str_25786.bind(this)))}_Str_25786(t){if(!t)return;const e=t.getParser();if(!e)return;const s=this.listener.getSession(this.roomId);if(!s)return;const i=new S.a(S.a.RSDPE_PRESETS,s);i.selectedPresetId=e._Str_6226;let n=0;for(;n<e._Str_10888;){const t=e._Str_14989(n);t&&i._Str_17287(t.id,t.type,t.color,t.intensity),n++}this.listener&&this.listener.events.dispatchEvent(i)}}var R=s("HkHk"),b=s("Cyol"),v=s("EAxq"),T=s("9vQN");class O extends d{constructor(t,e){super(t,e),t.addMessageEvent(new b.a(this.onRoomRightsEvent.bind(this))),t.addMessageEvent(new R.a(this.onRoomRightsClearEvent.bind(this))),t.addMessageEvent(new v.a(this.onRoomRightsOwnerEvent.bind(this)))}onRoomRightsEvent(t){if(!(t instanceof b.a))return;const e=this.listener.getSession(this.roomId);e&&e.setControllerLevel(t.getParser().controllerLevel)}onRoomRightsClearEvent(t){if(!(t instanceof R.a))return;const e=this.listener.getSession(this.roomId);e&&e.setControllerLevel(T.a.NONE)}onRoomRightsOwnerEvent(t){if(!(t instanceof v.a))return;const e=this.listener.getSession(this.roomId);e&&e.setRoomOwner()}}var y=s("q4z0"),A=s("pDhE"),C=s("8lyR"),M=s("AFd5"),U=s("zTkZ"),D=s("vrkx");let w=(()=>{class t extends d{constructor(t,e){super(t,e),t.addMessageEvent(new M.a(this.onRoomEnterEvent.bind(this))),t.addMessageEvent(new U.a(this.onRoomModelNameEvent.bind(this))),t.addMessageEvent(new y.a(this.onDesktopViewEvent.bind(this))),t.addMessageEvent(new A.a(this.onRoomDoorbellAcceptedEvent.bind(this))),t.addMessageEvent(new C.a(this.onRoomDoorbellRejectedEvent.bind(this)))}onRoomEnterEvent(e){e instanceof M.a&&this.listener&&this.listener.sessionUpdate(this.roomId,t.RS_CONNECTED)}onRoomModelNameEvent(e){if(!(e instanceof U.a))return;const s=this.roomId,i=e.getParser().roomId;this.listener&&(this.listener.sessionReinitialize(s,i),this.listener.sessionUpdate(this.roomId,t.RS_READY))}onDesktopViewEvent(e){e instanceof y.a&&this.listener&&this.listener.sessionUpdate(this.roomId,t.RS_DISCONNECTED)}onRoomDoorbellAcceptedEvent(t){if(!(t instanceof A.a&&this.listener))return;const e=t.getParser();if(!e)return;const s=e.userName;if(s&&s.length&&this.listener.events){const t=this.listener.getSession(this.roomId);if(!t)return;this.listener.events.dispatchEvent(new D.a(D.a.RSDE_ACCEPTED,t,s))}}onRoomDoorbellRejectedEvent(e){if(!(e instanceof C.a&&this.listener))return;const s=e.getParser();if(!s)return;const i=s.userName;if(i&&i.length){if(this.listener.events){const t=this.listener.getSession(this.roomId);if(!t)return;this.listener.events.dispatchEvent(new D.a(D.a.RSDE_REJECTED,t,i))}}else this.listener.sessionUpdate(this.roomId,t.RS_DISCONNECTED)}}return t.RS_CONNECTED="RS_CONNECTED",t.RS_READY="RS_READY",t.RS_DISCONNECTED="RS_DISCONNECTED",t})();var N=s("00EK"),L=s("mGgu"),x=s("fVO9"),P=s("jzpY"),F=s("n7CB"),k=s("xB90"),W=s("/3sV"),V=s("TPa8"),G=s("hXx8"),H=s("EHDF");class B{constructor(t){this._roomIndex=-1,this._name="",this._type=0,this._sex="",this._figure="",this._custom="",this._webID=0,this._groupID="",this._groupStatus=0,this._groupName="",this._ownerId=0,this._ownerName="",this._petLevel=0,this._rarityLevel=0,this._roomIndex=t}get roomIndex(){return this._roomIndex}get activityPoints(){return this._activityPoints}set activityPoints(t){this._activityPoints=t}get name(){return this._name}set name(t){this._name=t}get type(){return this._type}set type(t){this._type=t}get sex(){return this._sex}set sex(t){this._sex=t}get figure(){return this._figure}set figure(t){this._figure=t}get custom(){return this._custom}set custom(t){this._custom=t}get webID(){return this._webID}set webID(t){this._webID=t}get guildId(){return this._groupID}set guildId(t){this._groupID=t}get groupName(){return this._groupName}set groupName(t){this._groupName=t}get groupStatus(){return this._groupStatus}set groupStatus(t){this._groupStatus=t}get ownerId(){return this._ownerId}set ownerId(t){this._ownerId=t}get ownerName(){return this._ownerName}set ownerName(t){this._ownerName=t}get rarityLevel(){return this._rarityLevel}set rarityLevel(t){this._rarityLevel=t}get hasSaddle(){return this._hasSaddle}set hasSaddle(t){this._hasSaddle=t}get isRiding(){return this._isRiding}set isRiding(t){this._isRiding=t}get canBreed(){return this._canBreed}set canBreed(t){this._canBreed=t}get canHarvest(){return this._canHarvest}set canHarvest(t){this._canHarvest=t}get canRevive(){return this._canRevive}set canRevive(t){this._canRevive=t}get hasBreedingPermission(){return this._hasBreedingPermission}set hasBreedingPermission(t){this._hasBreedingPermission=t}get petLevel(){return this._petLevel}set petLevel(t){this._petLevel=t}get botSkills(){return this._botSkills}set botSkills(t){this._botSkills=t}get isModerator(){return this._Str_9831}set isModerator(t){this._Str_9831=t}}class j extends d{constructor(t,e){super(t,e),t.addMessageEvent(new x.a(this.onRoomUnitEvent.bind(this))),t.addMessageEvent(new P.a(this.onRoomUnitInfoEvent.bind(this))),t.addMessageEvent(new F.a(this.onRoomUnitRemoveEvent.bind(this))),t.addMessageEvent(new L.a(this.onRoomUnitDanceEvent.bind(this))),t.addMessageEvent(new k.a(this.onUserCurrentBadgesEvent.bind(this))),t.addMessageEvent(new N.a(this.onRoomDoorbellEvent.bind(this))),t.addMessageEvent(new W.a(this.onUserNameChangeMessageEvent.bind(this)))}onRoomUnitEvent(t){if(!this.listener)return;const e=this.listener.getSession(this.roomId);if(!e)return;const s=t.getParser().users,i=[];if(s&&s.length)for(const n of s){if(!n)continue;const t=new B(n.roomIndex);t.name=n.name,t.custom=n.custom,t.activityPoints=n.activityPoints,t.figure=n.figure,t.type=n.userType,t.webID=n.webID,t.guildId=n.groupID,t.groupName=n.groupName,t.groupStatus=n.groupStatus,t.sex=n.sex,t.ownerId=n.ownerId,t.ownerName=n.ownerName,t.rarityLevel=n.rarityLevel,t.hasSaddle=n.hasSaddle,t.isRiding=n.isRiding,t.canBreed=n.canBreed,t.canHarvest=n.canHarvest,t.canRevive=n.canRevive,t.hasBreedingPermission=n.hasBreedingPermission,t.petLevel=n.petLevel,t.botSkills=n.botSkills,t.isModerator=n.isModerator,e.userDataManager.getUserData(n.roomIndex)||i.push(t),e.userDataManager.updateUserData(t)}this.listener.events.dispatchEvent(new H.a(e,i))}onRoomUnitInfoEvent(t){if(!this.listener)return;const e=this.listener.getSession(this.roomId);if(!e)return;const s=t.getParser();s&&(e.userDataManager.updateFigure(s.unitId,s.figure,s.gender,!1,!1),e.userDataManager.updateMotto(s.unitId,s.motto))}onRoomUnitRemoveEvent(t){if(!this.listener)return;const e=this.listener.getSession(this.roomId);e&&e.userDataManager.removeUserData(t.getParser().unitId)}onRoomUnitDanceEvent(t){if(!this.listener)return;const e=t.getParser();if(!e)return;const s=this.listener.getSession(this.roomId);s&&this.listener.events.dispatchEvent(new V.a(s,e.unitId,e.danceId))}onUserCurrentBadgesEvent(t){if(!this.listener)return;const e=t.getParser();if(!e)return;const s=this.listener.getSession(this.roomId);s&&(s.userDataManager.setUserBadges(e.userId,e.badges),this.listener.events.dispatchEvent(new G.a(s,e.userId,e.badges)))}onRoomDoorbellEvent(t){if(!this.listener)return;const e=t.getParser();if(!e)return;const s=e.userName;if(!s||!s.length)return;const i=this.listener.getSession(this.roomId);i&&this.listener.events.dispatchEvent(new D.a(D.a.DOORBELL,i,s))}onUserNameChangeMessageEvent(t){if(!this.listener)return;const e=t.getParser();if(!e)return;const s=this.listener.getSession(this.roomId);s&&s.userDataManager.updateName(e.id,e.newName)}}var K=s("tfDB"),z=s("5TOT"),Y=s("LKhd"),X=s("j8oG"),Z=s("QZVO"),q=s("4hNi"),Q=s("J4cl"),J=s("0qJb"),$=s("xdKJ"),tt=s("p0wa"),et=s("2Rep"),st=s("YlMy"),it=s("Aavw"),nt=s("OxVo"),rt=s("gnow"),at=s("UJeg"),ot=s("lMbP"),ct=s("j7GY"),_t=s("ekex"),ht=s("Gb7F"),lt=s("kiCC"),ut=s("o4p4"),dt=s("/OJ4"),gt=s("nMRu");let mt=(()=>{class t extends u.a{constructor(){super(),this._connection=null,this._userDataByType=new Map,this._userDataByRoomIndex=new Map,this._userBadges=new Map}onDispose(){this._connection=null}setConnection(t){this._connection=t}getUserData(e){return this.getDataByType(e,t.TYPE_USER)}getPetData(e){return this.getDataByType(e,t.TYPE_PET)}getBotData(e){return this.getDataByType(e,t.TYPE_BOT)}getRentableBotData(e){return this.getDataByType(e,t.TYPE_RENTABLE_BOT)}getDataByType(t,e){const s=this._userDataByType.get(e);return s&&s.get(t)||null}getUserDataByIndex(t){return this._userDataByRoomIndex.get(t)||null}updateUserData(t){if(!t)return;this.removeUserData(t.roomIndex);let e=this._userDataByType.get(t.type);e||(e=new Map,this._userDataByType.set(t.type,e)),e.set(t.webID,t),this._userDataByRoomIndex.set(t.roomIndex,t)}removeUserData(t){const e=this.getUserDataByIndex(t);if(!e)return;this._userDataByRoomIndex.delete(t);const s=this._userDataByType.get(e.type);s&&s.delete(e.webID)}getUserBadges(t){return this._connection&&this._connection.send(new gt.a(t)),this._userBadges.get(t)||[]}setUserBadges(t,e){this._userBadges.set(t,e)}updateFigure(t,e,s,i,n){const r=this.getUserDataByIndex(t);r&&(r.figure=e,r.sex=s,r.hasSaddle=i,r.isRiding=n)}updateName(t,e){const s=this.getUserDataByIndex(t);s&&(s.name=e)}updateMotto(t,e){const s=this.getUserDataByIndex(t);s&&(s.custom=e)}get connection(){return this._connection}}return t.TYPE_USER=1,t.TYPE_PET=2,t.TYPE_BOT=3,t.TYPE_RENTABLE_BOT=4,t})();class pt extends u.a{constructor(){super(),this._connection=null,this._userData=new mt,this._roomId=0,this._password=null,this._state=r.a.CREATED,this._tradeMode=dt.a._Str_12752,this._doorMode=0,this._controllerLevel=T.a.NONE,this._ownRoomIndex=-1,this._isGuildRoom=!1,this._isRoomOwner=!1,this._isDecorating=!1,this._isSpectator=!1,this._moderationSettings=null}onDispose(){this._userData&&(this._userData.dispose(),this._userData=null),this._connection=null}setConnection(t){!this._connection&&t&&(this._connection=t,this._userData&&this._userData.setConnection(t))}setControllerLevel(t){this._controllerLevel=t>=T.a.NONE&&t<=T.a.MODERATOR?t:T.a.NONE}setOwnRoomIndex(t){this._ownRoomIndex=t}setRoomOwner(){this._isRoomOwner=!0}start(){return!(this._state!==r.a.CREATED||!this._connection)&&(this._state=r.a.STARTED,this.enterRoom())}enterRoom(){return!!this._connection&&(this._connection.send(new z.a(this._roomId,this._password)),!0)}reset(t){t!==this._roomId&&(this._roomId=t)}sendChatMessage(t,e){this._connection.send(new it.a(t,e))}sendShoutMessage(t,e){this._connection.send(new nt.a(t,e))}sendWhisperMessage(t,e,s){this._connection.send(new rt.a(t,e,s))}sendChatTypingMessage(t){this._connection.send(t?new at.a:new ot.a)}sendMottoMessage(t){this._connection.send(new ut.a(t))}sendDanceMessage(t){this._connection.send(new _t.a(t))}sendExpressionMessage(t){this._connection.send(new ct.a(t))}sendSignMessage(t){t<0||t>17||this._connection.send(new lt.a(t))}sendPostureMessage(t){this._connection.send(new ht.a(t))}sendDoorbellApprovalMessage(t,e){this._connection.send(new K.a(t,e))}sendAmbassadorAlertMessage(t){this._connection.send(new Y.a(t))}sendKickMessage(t){this._connection.send(new q.a(t))}sendMuteMessage(t,e){this._connection.send(new Q.a(t,e,this._roomId))}sendBanMessage(t,e){this._connection.send(new X.a(t,this._roomId,e))}sendGiveRightsMessage(t){this._connection.send(new Z.a(t))}sendTakeRightsMessage(t){this._connection.send(new J.a(t))}updateMoodlightData(t,e,s,i,n){const r="000000"+s.toString(16).toUpperCase(),a="#"+r.substring(r.length-6);this.connection.send(new et.a(t,e,a,i,n))}toggleMoodlightState(){this.connection.send(new st.a)}pickupPet(t){}pickupBot(t){this._connection&&this._connection.send(new $.a(t))}requestMoodlightSettings(){this._connection&&this._connection.send(new tt.a)}get connection(){return this._connection}get userDataManager(){return this._userData}get roomId(){return this._roomId}set roomId(t){this._roomId=t}get password(){return this._password}set password(t){this._password=t}get state(){return this._state}get _Str_7411(){return!0}get tradeMode(){return this._tradeMode}set tradeMode(t){this._tradeMode=t}get doorMode(){return this._doorMode}set doorMode(t){this._doorMode=t}get allowPets(){return this._allowPets}set allowPets(t){this._allowPets=t}get controllerLevel(){return this._controllerLevel}get ownRoomIndex(){return this._ownRoomIndex}get isGuildRoom(){return this._isGuildRoom}set isGuildRoom(t){this._isGuildRoom=t}get isRoomOwner(){return this._isRoomOwner}get isDecorating(){return this._isDecorating}set isDecorating(t){this._isDecorating=t}get isSpectator(){return this._isSpectator}set isSpectator(t){this._isSpectator=t}get moderationSettings(){return this._moderationSettings}set moderationSettings(t){this._moderationSettings=t}}class ft extends i.a{constructor(t,e){super(),this._communication=t,this._roomEngine=e,this._handlers=[],this._sessions=new Map,this._pendingSession=null,this._sessionStarting=!1,this._viewerSession=null,this.onRoomEngineEvent=this.onRoomEngineEvent.bind(this)}onInit(){this.createHandlers(),this.processPendingSession(),this._roomEngine.events.addEventListener(n.a.ENGINE_INITIALIZED,this.onRoomEngineEvent)}onDispose(){this._roomEngine.events.removeEventListener(n.a.ENGINE_INITIALIZED,this.onRoomEngineEvent),super.onDispose()}createHandlers(){const t=this._communication&&this._communication.connection;t&&this._handlers.push(new g(t,this),new f(t,this),new I(t,this),new O(t,this),new w(t,this),new j(t,this))}setHandlers(t){if(this._handlers&&this._handlers.length)for(const e of this._handlers)e&&e.setRoomId(t.roomId)}onRoomEngineEvent(t){this.processPendingSession()}processPendingSession(){this._pendingSession&&this._roomEngine.ready&&(this.addSession(this._pendingSession),this._pendingSession=null)}getSession(t){return this._sessions.get(this.getRoomId(t))||null}createSession(t,e=null){const s=new pt;return s.roomId=t,s.password=e,this.addSession(s)}addSession(t){return this._roomEngine.ready?(this._sessionStarting=!0,this._sessions.get(this.getRoomId(t.roomId))&&this.removeSession(t.roomId,!1),t.setConnection(this._communication.connection),this._sessions.set(this.getRoomId(t.roomId),t),this.events.dispatchEvent(new r.a(r.a.CREATED,t)),this._viewerSession=t,this.startSession(this._viewerSession),!0):(this._pendingSession=t,!1)}startSession(t){return t.state!==r.a.STARTED&&(this._sessionStarting=!1,t.start()?(this.events.dispatchEvent(new r.a(r.a.STARTED,t)),this.setHandlers(t),!0):(this.removeSession(t.roomId),!1))}removeSession(t,e=!0){const s=this.getSession(t);s&&(this._sessions.delete(this.getRoomId(t)),this.events.dispatchEvent(new r.a(r.a.ENDED,s,e)),s.dispose())}sessionUpdate(t,e){if(this.getSession(t))switch(e){case w.RS_CONNECTED:case w.RS_READY:return;case w.RS_DISCONNECTED:return void this.removeSession(t)}}sessionReinitialize(t,e){const s=this.getSession(t);s&&(this._sessions.delete(this.getRoomId(t)),s.reset(e),this._sessions.set(this.getRoomId(e),s),this.setHandlers(s))}getRoomId(t){return"hard_coded_room_id"}get communication(){return this._communication}get roomEngine(){return this._roomEngine}get viewerSession(){return this._viewerSession}}},H7M9:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},HkHk:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},HqZk:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.MINIMUM=-2,t.ROOM=0,t.FLOOR=10,t.WALL=20,t.UNIT=100,t.CURSOR=200,t})()},"Hs+C":function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("G0tw");let n=(()=>{class t extends i.a{constructor(t,e,s,i){super(t,e),this._objectId=s,this._category=i}get objectId(){return this._objectId}get category(){return this._category}}return t.SELECTED="REOE_SELECTED",t.DESELECTED="REOE_DESELECTED",t.ADDED="REOE_ADDED",t.REMOVED="REOE_REMOVED",t.PLACED="REOE_PLACED",t.PLACED_ON_USER="REOE_PLACED_ON_USER",t.CONTENT_UPDATED="REOE_CONTENT_UPDATED",t.REQUEST_MOVE="REOE_REQUEST_MOVE",t.REQUEST_ROTATE="REOE_REQUEST_ROTATE",t.MOUSE_ENTER="REOE_MOUSE_ENTER",t.MOUSE_LEAVE="REOE_MOUSE_LEAVE",t})()},I5LT:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._senderId=0,this._messageText=null,!0}parse(t){return!!t&&(this._senderId=t.readInt(),this._messageText=t.readString(),!0)}get senderId(){return this._senderId}get messageText(){return this._messageText}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},IGSi:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("3r1x");let n=(()=>{class t extends i.a{constructor(t,e){super(t),this._contentType=e}get contentType(){return this._contentType}}return t.RCLE_SUCCESS="RCLE_SUCCESS",t.RCLE_FAILURE="RCLE_FAILURE",t.RCLE_CANCEL="RCLE_CANCEL",t})()},IRIx:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._currencies=new Map,!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._currencies.set(t.readInt(),t.readInt()),e--;return!0}get currencies(){return this._currencies}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},IVZI:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._userID=-1,this._userAccepts=!1,!0}parse(t){return!!t&&(this._userID=t.readInt(),this._userAccepts=t.readInt()>0,!0)}get _Str_4963(){return this._userID}get _Str_15794(){return this._userAccepts}}class r extends i.a{constructor(t){super(t,n)}get _Str_4963(){return this.getParser()._Str_4963}get _Str_15794(){return this.getParser()._Str_15794}getParser(){return this.parser}}},"Ie/D":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._aliases=new Map,!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._aliases.set(t.readString(),t.readString()),e--;return!0}get aliases(){return this._aliases}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},IqYK:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.FURNITURE_STATIC="furniture_static",t.FURNITURE_ANIMATED="furniture_animated",t.FURNITURE_RESETTING_ANIMATED="furniture_resetting_animated",t.FURNITURE_POSTER="furniture_poster",t.FURNITURE_EXTERNAL_IMAGE="furniture_external_image",t.FURNITURE_HABBOWHEEL="furniture_habbowheel",t.FURNITURE_VAL_RANDOMIZER="furniture_val_randomizer",t.FURNITURE_BOTTLE="furniture_bottle",t.FURNITURE_PLANET_SYSTEM="furniture_planet_system",t.FURNITURE_QUEUE_TILE="furniture_queue_tile",t.FURNITURE_PARTY_BEAMER="furniture_party_beamer",t.FURNITURE_CUBOID="furniture_cuboid",t.FURNITURE_GIFT_WRAPPED="furniture_gift_wrapped",t.FURNITURE_GIFT_WRAPPED_FIREWORKS="furniture_gift_wrapped_fireworks",t.FURNITURE_COUNTER_CLOCK="furniture_counter_clock",t.FURNITURE_WATER_AREA="furniture_water_area",t.FURNITURE_SCORE_BOARD="furniture_score_board",t.FURNITURE_FIREWORKS="furniture_fireworks",t.FURNITURE_BB="furniture_bb",t.FURNITURE_BG="furniture_bg",t.FURNITURE_STICKIE="furniture_stickie",t.FURNITURE_MANNEQUIN="furniture_mannequin",t.FURNITURE_GUILD_CUSTOMIZED="furniture_guild_customized",t.FURNITURE_GUILD_ISOMETRIC_BADGE="furniture_guild_isometric_badge",t.FURNITURE_VOTE_COUNTER="furniture_vote_counter",t.FURNITURE_VOTE_MAJORITY="furniture_vote_majority",t.FURNITURE_SOUNDBLOCK="furniture_soundblock",t.FURNITURE_BADGE_DISPLAY="furniture_badge_display",t.FURNITURE_YOUTUBE="furniture_youtube",t.FURNITURE_BUILDER_PLACEHOLDER="furniture_builder_placeholder",t.ROOM="room",t.USER="user",t.PET_ANIMATED="pet_animated",t.BOT="bot",t.RENTABLE_BOT="rentable_bot",t.TILE_CURSOR="tile_cursor",t})()},IqqQ:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._id=0,this._type=0,this._title=null,this._description=null,this._badge=null,this._roomId=0,this._roomName=null,this._membershipType=0,this._membersCount=0,this._createdAt=null,this._isOwner=!1,this._isAdmin=!1,this._ownerName=null,this._flag=!1,this._canMembersDecorate=!1,this._pendingRequestsCount=0,!0}parse(t){return!!t&&(this._id=t.readInt(),t.readBoolean(),this._type=t.readInt(),this._title=t.readString(),this._description=t.readString(),this._badge=t.readString(),this._roomId=t.readInt(),this._roomName=t.readString(),this._membershipType=t.readInt(),this._membersCount=t.readInt(),t.readBoolean(),this._createdAt=t.readString(),this._isOwner=t.readBoolean(),this._isAdmin=t.readBoolean(),this._ownerName=t.readString(),this._flag=t.readBoolean(),this._canMembersDecorate=t.readBoolean(),this._pendingRequestsCount=t.readInt(),!0)}get id(){return this._id}get type(){return this._type}get title(){return this._title}get description(){return this._description}get badge(){return this._badge}get roomId(){return this._roomId}get roomName(){return this._roomName}get membershipType(){return this._membershipType}get membersCount(){return this._membersCount}get createdAt(){return this._createdAt}get isOwner(){return this._isOwner}get isAdmin(){return this._isAdmin}get ownerName(){return this._ownerName}get flag(){return this._flag}get canMembersDecorate(){return this._canMembersDecorate}get pendingRequestsCount(){return this._pendingRequestsCount}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},IxQr:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("IqKQ"),n=s("P7Cj");let r=(()=>{class t{static generateTexture(e,s=null,n=i.m.NEAREST,r=1){return e?t.getRenderer().generateTexture(e,n,r,s):null}static generateTextureFromImage(t){return t?i.p.from(t):null}static generateImage(e){return e?t.getRenderer().extract.image(e):null}static generateImageUrl(e){return e?t.getRenderer().extract.base64(e):null}static getRenderer(){return t._renderer?t._renderer:n.a.instance.renderer}static setRenderer(e){t._renderer=e}}return t._renderer=null,t})()},J0ap:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("P7Cj"),n=s("jBuC");let r=(()=>{class t{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._rentable=!1,this._itemId=0,this._furniType=null,this._ref=0,this._spriteId=0,this._category=0,this._stuffData=null,this._isGroupable=!1,this._isRecyclable=!1,this._tradable=!1,this._sellable=!1,this._secondsToExpiration=0,this._Str_3182=0,this._flatId=0,this._isWallItem=!1,this._hasRentPeriodStarted=!1,this._Str_5390=0,this._slotId="",this._Str_2808=-1,!0}parse(e){return!!e&&(this._itemId=e.readInt(),this._furniType=e.readString(),this._ref=e.readInt(),this._spriteId=e.readInt(),this._category=e.readInt(),this._stuffData=n.a.parseObjectData(e),this._isRecyclable=e.readBoolean(),this._tradable=e.readBoolean(),this._isGroupable=e.readBoolean(),this._sellable=e.readBoolean(),this._secondsToExpiration=e.readInt(),this._Str_5390=i.a.instance.time,this.secondsToExpiration>-1?this._rentable=!0:(this._rentable=!1,this._secondsToExpiration=-1),this._hasRentPeriodStarted=e.readBoolean(),this._flatId=e.readInt(),this._isWallItem=this._furniType===t.WALL_ITEM,this._furniType===t.FLOOR_ITEM&&(this._slotId=e.readString(),this._Str_3182=e.readInt()),!0)}get itemId(){return this._itemId}get furniType(){return this._furniType}get ref(){return this._ref}get spriteId(){return this._spriteId}get category(){return this._category}get stuffData(){return this._stuffData}get isGroupable(){return this._isGroupable}get isRecycleable(){return this._isRecyclable}get tradable(){return this._tradable}get sellable(){return this._sellable}get secondsToExpiration(){return this._secondsToExpiration}get flatId(){return this._flatId}get slotId(){return this._slotId}get _Str_3951(){return this._Str_2808}get _Str_2794(){return this._Str_3182}get rentable(){return this._rentable}get isWallItem(){return this._isWallItem}get hasRentPeriodStarted(){return this._hasRentPeriodStarted}get _Str_10616(){return this._Str_5390}get _Str_8932(){return 0}get _Str_9050(){return 0}get _Str_9408(){return 0}get _Str_19297(){return!(-1===this._furniType.indexOf("external_image"))}}return t.WALL_ITEM="I",t.FLOOR_ITEM="S",t})()},J0cl:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},J4cl:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s=0){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},JCII:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._roomId=-1,this._areaId=-1,this._image=null,this._caption=null,!0}parse(t){return!!t&&(this._roomId=t.readInt(),this._areaId=t.readInt(),this._image=t.readString(),this._caption=t.readString(),!0)}get roomId(){return this._roomId}get areaId(){return this._areaId}get image(){return this._image}get caption(){return this._caption}}class r{flush(){return this._rooms=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._rooms.push(new n(t)),e--;return!0}get rooms(){return this._rooms}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},JDjE:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._categories=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._categories.push(t.readString()),e--;return!0}get categories(){return this._categories}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},JKJw:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("3r1x");let n=(()=>{class t extends i.a{constructor(e,s){super(t.IMAGE_READY),this._badgeId=e,this._image=s}get badgeId(){return this._badgeId}get image(){return this._image}}return t.IMAGE_READY="BIME_BADGE_IMAGE_READY",t})()},JODW:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("iAsj");class r{flush(){return this._item=null,!0}parse(t){return!!t&&(this._item=new n.a(t),this._item.username=t.readString(),!0)}get item(){return this._item}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},JY8D:function(t){t.exports=JSON.parse('{"a":{"direction":0,"camera":{"x":0,"y":0,"z":10},"canvases":[{"scale":"h","geometries":[{"id":"vertical","width":90,"height":130,"dx":0,"dy":0},{"id":"sitting","width":90,"height":130,"dx":0,"dy":0},{"id":"horizontal","width":128,"height":80,"dx":30,"dy":0},{"id":"swhorizontal","width":192,"height":120,"dx":0,"dy":-40}]},{"scale":"sh","geometries":[{"id":"vertical","width":45,"height":72,"dx":0,"dy":0},{"id":"sitting","width":45,"height":72,"dx":0,"dy":0},{"id":"horizontal","width":64,"height":50,"dx":15,"dy":-10},{"id":"swhorizontal","width":96,"height":70,"dx":0,"dy":-20},{"id":"swim","width":64,"height":70,"dx":25,"dy":10}]}],"avatarSets":[{"id":"full","avatarSets":[{"id":"body","main":true,"bodyParts":[{"id":"top"},{"id":"bottom"},{"id":"behind"},{"id":"torso"},{"id":"leftitem"},{"id":"rightitem"},{"id":"leftarm"},{"id":"rightarm"}]},{"id":"head","bodyParts":[{"id":"head"}]}]}],"types":[{"id":"vertical","bodyParts":[{"id":"top","x":0,"y":0,"z":0,"radius":2},{"id":"bottom","x":0,"y":0,"z":0,"radius":0.001},{"id":"behind","x":0,"y":0,"z":0.2,"radius":0.3},{"id":"torso","x":0,"y":0,"z":0,"radius":0.4,"items":[{"id":"bd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"bds","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"ch","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"sh","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lg","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ss","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"cp","x":0,"y":0,"z":0,"radius":0.045,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"wa","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"cc","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ca","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"leftitem","x":0,"y":0,"z":-0.29,"radius":0.3,"items":[{"id":"li","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"rightitem","x":0,"y":0,"z":-0.29,"radius":0.3,"items":[{"id":"ri","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"leftarm","x":-1,"y":0,"z":-0.51,"radius":0.5,"items":[{"id":"lh","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lhs","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ls","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lc","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"rightarm","x":1,"y":0,"z":-0.51,"radius":0.5,"items":[{"id":"rh","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rhs","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rs","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rc","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"head","x":0,"y":0,"z":0,"radius":0.5,"items":[{"id":"hd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fc","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ey","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"hr","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"hrb","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fa","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ea","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ha","x":0,"y":0,"z":0,"radius":0.08,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"he","x":0,"y":0,"z":0,"radius":0.09,"nx":0,"ny":0,"nz":-1,"double":false}]}]},{"id":"sitting","bodyParts":[{"id":"top","x":0,"y":0,"z":0,"radius":2},{"id":"bottom","x":0,"y":0,"z":0,"radius":0.001},{"id":"behind","x":0,"y":0,"z":0.2,"radius":0.3},{"id":"torso","x":0,"y":0,"z":0,"radius":0.4,"items":[{"id":"bd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"bds","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"ch","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"sh","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lg","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ss","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"cp","x":0,"y":0,"z":0,"radius":0.045,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"wa","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"cc","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ca","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"leftitem","x":0,"y":0,"z":-0.29,"radius":0.3,"items":[{"id":"li","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"rightitem","x":0,"y":0,"z":-0.29,"radius":0.3,"items":[{"id":"ri","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"leftarm","x":-1,"y":0,"z":-0.51,"radius":0.5,"items":[{"id":"lh","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lhs","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ls","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lc","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"rightarm","x":1,"y":0,"z":-0.51,"radius":0.5,"items":[{"id":"rh","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rhs","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rs","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rc","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"head","x":0,"y":0,"z":0,"radius":0.5,"items":[{"id":"hd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fc","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ey","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"hr","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"hrb","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fa","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ea","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ha","x":0,"y":0,"z":0,"radius":0.08,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"he","x":0,"y":0,"z":0,"radius":0.09,"nx":0,"ny":0,"nz":-1,"double":false}]}]},{"id":"horizontal","bodyParts":[{"id":"torso","x":0,"y":0,"z":0,"radius":0.4,"items":[{"id":"bd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"bds","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"ch","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"cp","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"sh","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lg","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ss","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"wa","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"cc","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ca","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"leftitem","x":0,"y":0,"z":-0.29,"radius":0.3,"items":[{"id":"li","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"rightitem","x":0,"y":0,"z":-0.29,"radius":0.3,"items":[{"id":"ri","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"leftarm","x":-1,"y":0,"z":-0.51,"radius":0.6,"items":[{"id":"lh","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lhs","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ls","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lc","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"rightarm","x":1,"y":0,"z":-0.51,"radius":0.6,"items":[{"id":"rh","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rhs","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rs","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rc","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"head","x":0,"y":0,"z":0,"radius":0.5,"items":[{"id":"hd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fc","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ey","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"hr","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"hrb","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fa","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ea","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ha","x":0,"y":0,"z":0,"radius":0.08,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"he","x":0,"y":0,"z":0,"radius":0.09,"nx":0,"ny":0,"nz":-1,"double":false}]}]},{"id":"swhorizontal","bodyParts":[{"id":"torso","x":0,"y":0,"z":0,"radius":0.4,"items":[{"id":"bd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"bds","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"ch","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"cp","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"sh","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lg","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ss","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"wa","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"cc","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ca","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"leftitem","x":0,"y":0,"z":-0.29,"radius":0.3,"items":[{"id":"li","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"rightitem","x":0,"y":0,"z":-0.29,"radius":0.3,"items":[{"id":"ri","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"leftarm","x":-1,"y":0,"z":-0.51,"radius":0.6,"items":[{"id":"lh","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lhs","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ls","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lc","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"rightarm","x":1,"y":0,"z":-0.51,"radius":0.6,"items":[{"id":"rh","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rhs","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rs","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rc","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"head","x":0,"y":0,"z":0,"radius":0.5,"items":[{"id":"hd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fc","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ey","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"hr","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"hrb","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fa","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ea","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ha","x":0,"y":0,"z":0,"radius":0.08,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"he","x":0,"y":0,"z":0,"radius":0.09,"nx":0,"ny":0,"nz":-1,"double":false}]}]},{"id":"swim","bodyParts":[{"id":"torso","x":0,"y":0,"z":0,"radius":0.4,"items":[{"id":"bds","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"ss","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"head","x":0,"y":0,"z":0,"radius":0.5,"items":[{"id":"hd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fc","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ey","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"hr","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"hrb","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fa","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ea","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ha","x":0,"y":0,"z":0,"radius":0.08,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"he","x":0,"y":0,"z":0,"radius":0.09,"nx":0,"ny":0,"nz":-1,"double":false}]}]}]}}')},KJ3T:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._minutes=null,!0}parse(t){return!!t&&(this._minutes=t.readInt(),!0)}get minutes(){return this._minutes}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},KQk8:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.LEGACY_KEY=0,t.MAP_KEY=1,t.STRING_KEY=2,t.VOTE_KEY=3,t.EMPTY_KEY=4,t.NUMBER_KEY=5,t.HIGHSCORE_KEY=6,t.CRACKABLE_KEY=7,t})()},KjXG:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._unitId=null,this._isIdle=!1,!0}parse(t){return!!t&&(this._unitId=t.readInt(),this._isIdle=t.readBoolean(),!0)}get unitId(){return this._unitId}get isIdle(){return this._isIdle}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},KsdP:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO"),n=s("Zim7");class r extends i.a{constructor(t){super(t,n.a)}getParser(){return this.parser}}},"Kx+W":function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.FULL="full",t.HEAD="head",t.BODY="body",t})()},LKhd:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},LPTP:function(t){t.exports=JSON.parse('{"a":{"partSet":[{"setType":"ri","flippedSetType":"ri"},{"setType":"ri","flippedSetType":"ri"},{"setType":"rh","flippedSetType":"lh"},{"setType":"rhs","flippedSetType":"lhs"},{"setType":"rs","swim":"0","flippedSetType":"ls"},{"setType":"rc","flippedSetType":"lc"},{"setType":"bd"},{"setType":"bds"},{"setType":"ss"},{"setType":"sh"},{"setType":"lg"},{"setType":"ch"},{"setType":"cp"},{"setType":"cc"},{"setType":"hd"},{"setType":"fc"},{"setType":"ey"},{"setType":"hr"},{"setType":"hrb","removeSetType":"hr"},{"setType":"li","flippedSetType":"li"},{"setType":"lh","flippedSetType":"rh"},{"setType":"lhs","flippedSetType":"rhs"},{"setType":"ls","flippedSetType":"rs"},{"setType":"lc","flippedSetType":"rc"},{"setType":"wa"},{"setType":"ea"},{"setType":"ca"},{"setType":"fa"},{"setType":"ha"},{"setType":"he"}],"activePartSets":[{"id":"figure","activeParts":[{"setType":"rh"},{"setType":"rh"},{"setType":"rhs"},{"setType":"rs"},{"setType":"rc"},{"setType":"bd"},{"setType":"bds"},{"setType":"ss"},{"setType":"sh"},{"setType":"lg"},{"setType":"ch"},{"setType":"cp"},{"setType":"cc"},{"setType":"wa"},{"setType":"hd"},{"setType":"fc"},{"setType":"ey"},{"setType":"hr"},{"setType":"hrb"},{"setType":"lh"},{"setType":"lhs"},{"setType":"ls"},{"setType":"lc"},{"setType":"ea"},{"setType":"ca"},{"setType":"fa"},{"setType":"ha"},{"setType":"he"}]},{"id":"head","activeParts":[{"setType":"hd"},{"setType":"fc"},{"setType":"ey"},{"setType":"hr"},{"setType":"hrb"},{"setType":"ea"},{"setType":"fa"},{"setType":"ha"},{"setType":"he"}]},{"id":"speak","activeParts":[{"setType":"hd"},{"setType":"hr"},{"setType":"hrb"},{"setType":"fc"},{"setType":"fa"},{"setType":"ha"}]},{"id":"gesture","activeParts":[{"setType":"ey"},{"setType":"fc"}]},{"id":"eye","activeParts":[{"setType":"ey"}]},{"id":"handRight","activeParts":[{"setType":"rh"},{"setType":"rhs"},{"setType":"rs"},{"setType":"rc"},{"setType":"ri"}]},{"id":"handRightAndHead","activeParts":[{"setType":"rh"},{"setType":"rhs"},{"setType":"rs"},{"setType":"rc"},{"setType":"ri"},{"setType":"ey"},{"setType":"fc"},{"setType":"hd"}]},{"id":"handLeft","activeParts":[{"setType":"lh"},{"setType":"lhs"},{"setType":"ls"},{"setType":"lc"},{"setType":"li"}]},{"id":"walk","activeParts":[{"setType":"bd"},{"setType":"bds"},{"setType":"ss"},{"setType":"lg"},{"setType":"lh"},{"setType":"lhs"},{"setType":"rh"},{"setType":"rhs"},{"setType":"ls"},{"setType":"lc"},{"setType":"rs"},{"setType":"rc"},{"setType":"sh"}]},{"id":"sit","activeParts":[{"setType":"bd"},{"setType":"bds"},{"setType":"ss"},{"setType":"lg"},{"setType":"sh"},{"setType":"cc"}]},{"id":"itemRight","activeParts":[{"setType":"ri"}]}]}}')},M98o:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{static get available(){return!0}static call(t,...e){if(window.top!==window&&window.top.postMessage("Nitro_LegacyExternalInterface"+JSON.stringify({method:t,params:e}),"*"),!("FlashExternalInterface"in window))return;const s=window.FlashExternalInterface[t];return void 0!==s?s(...e):void 0}static callGame(t,...e){if(window.top!==window&&window.top.postMessage("Nitro_LegacyExternalGameInterface"+JSON.stringify({method:t,params:e}),"*"),!("FlashExternalGameInterface"in window))return;const s=window.FlashExternalGameInterface[t];return void 0!==s?s(...e):void 0}}},MeCd:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("XMGm");let n=(()=>{class t{}return t.UNIQUE_SET=256,t})();class r{constructor(){this._flags=0,this._uniqueNumber=0,this._uniqueSeries=0}parseWrapper(t){(this._flags&n.UNIQUE_SET)>0&&(this._uniqueNumber=t.readInt(),this._uniqueSeries=t.readInt())}initializeFromRoomObjectModel(t){this._uniqueNumber=t.getValue(i.a.FURNITURE_UNIQUE_SERIAL_NUMBER),this._uniqueSeries=t.getValue(i.a.FURNITURE_UNIQUE_EDITION_SIZE)}writeRoomObjectModel(t){t&&(t.setValue(i.a.FURNITURE_UNIQUE_SERIAL_NUMBER,this._uniqueNumber),t.setValue(i.a.FURNITURE_UNIQUE_EDITION_SIZE,this._uniqueSeries))}getLegacyString(){return""}compare(t){return!1}get state(){const t=parseInt(this.getLegacyString());return isNaN(t)?0:t}get isUnique(){return this._uniqueSeries>0}get uniqueNumber(){return this._uniqueNumber}get uniqueSeries(){return this._uniqueSeries}get flags(){return this._flags}set flags(t){this._flags=t}}},Mixc:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},NUif:function(t,e,s){t.exports=s.p+"0.1e354392783b7d7e25bf.worker.js"},Nakt:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO"),n=s("jBuC");class r extends i.a{constructor(t){super(t,n.a)}getParser(){return this.parser}}},Nd6c:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},NjFb:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},Njml:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("1+1A");class r{flush(){return this._item=null,!0}parse(t){return!!t&&(this._item=new n.a(t),this._item.username=t.readString(),!0)}get item(){return this._item}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},NpwP:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._unitId=null,this._value=0,!0}parse(t){return!!t&&(this._unitId=t.readInt(),this._value=t.readInt(),!0)}get unitId(){return this._unitId}get value(){return this._value}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},Ns5P:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("3r1x");let n=(()=>{class t extends i.a{constructor(t,e,s=!0){super(t),this._session=e,this._openLandingView=s}get session(){return this._session}get openLandingView(){return this._openLandingView}}return t.CREATED="RSE_CREATED",t.STARTED="RSE_STARTED",t.ENDED="RSE_ENDED",t.ROOM_DATA="RSE_ROOM_DATA",t})()},OGjZ:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e=-100){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},OLXM:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,...e){this._data=[t,e.length,...e]}getMessageArray(){return this._data}dispose(){}}},ObWd:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._itemId=0,this._state=0,!0}parse(t){return!!t&&(this._itemId=t.readInt(),this._state=t.readInt(),!0)}get itemId(){return this._itemId}get state(){return this._state}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},Oh4I:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i,n,r,a,o,c,_,h,l,u,d,g,m,p,f,E,S,I,R,b,v){this._data=[t,e,s,i,n,r,a,o,c,_,h,l,u,d,g,m,p,f,E,S,I,R,b,v]}getMessageArray(){return this._data}dispose(){}}},OxVo:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},P0eX:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},P5vI:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._productType=null,this._furniClassId=-1,this._extraParam=null,this._productCount=0,this._uniqueLimitedItem=!1,this._uniqueLimitedItemSeriesSize=0,this._uniqueLimitedItemsLeft=0,!0}parse(e){switch(this._productType=e.readString(),this._productType){case t.B:return this._extraParam=e.readString(),this._productCount=1,!0;default:return this._furniClassId=e.readInt(),this._extraParam=e.readString(),this._productCount=e.readInt(),this._uniqueLimitedItem=e.readBoolean(),this._uniqueLimitedItem&&(this._uniqueLimitedItemSeriesSize=e.readInt(),this._uniqueLimitedItemsLeft=e.readInt()),!0}}get productType(){return this._productType}get furniClassId(){return this._furniClassId}get extraParam(){return this._extraParam}get productCount(){return this._productCount}get uniqueLimitedItem(){return this._uniqueLimitedItem}get uniqueLimitedSeriesSize(){return this._uniqueLimitedItemSeriesSize}get uniqueLimitedItemsLeft(){return this._uniqueLimitedItemsLeft}}return t.I="i",t.S="s",t.E="e",t.B="b",t})()},P7Cj:function(t,e,s){"use strict";(function(t){s.d(e,"a",function(){return R});var i=s("IqKQ"),n=s("cSuP"),r=s("1TD8"),a=s("C6IL"),o=s("vuPI"),c=s("3r1x"),_=s("1cH2"),h=s("R5Ri"),l=s("Xmmk"),u=s("XpxF"),d=s("0gOM"),g=(s("M98o"),s("vkSA")),m=s("hBKr"),p=s("G0tw"),f=s("3h45"),E=s("H/Ns"),S=s("i7vr"),I=s("GN+4");i.s.SCALE_MODE=i.m.NEAREST,i.s.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;let R=(()=>{class e extends i.a{constructor(s,i){super(i),e.INSTANCE||(e.INSTANCE=this),this._nitroTimer=new h.a,this._worker=new Worker(t,void 0),this._core=s,this._events=new o.a,this._localization=new m.a,this._communication=new d.a(s.communication),this._avatar=new u.a,this._roomEngine=new f.a(this._communication),this._sessionDataManager=new S.a(this._communication),this._roomSessionManager=new E.a(this._communication,this._roomEngine),this._roomManager=new l.a(this._roomEngine,this._roomEngine.visualizationFactory,this._roomEngine.logicFactory),this._linkTrackers=[],this._workerTrackers=[],this._isReady=!1,this._isDisposed=!1,this._core.configuration.events.addEventListener(a.a.LOADED,this.onConfigurationLoadedEvent.bind(this)),this._roomEngine.events.addEventListener(p.a.ENGINE_INITIALIZED,this.onRoomEngineReady.bind(this)),this._worker.onmessage=this.createWorkerEvent.bind(this)}static bootstrap(){e.INSTANCE&&(e.INSTANCE.dispose(),e.INSTANCE=null);const t=document.createElement("canvas");t.id="client-wrapper",t.className="client-canvas";const s=new this(new _.a,{transparent:!0,autoDensity:!0,resolution:window.devicePixelRatio,width:window.innerWidth,height:window.innerHeight,view:t});t.addEventListener("webglcontextlost",()=>s.events.dispatchEvent(new c.a(e.WEBGL_CONTEXT_LOST)));const i=NitroConfig.sso;s.communication.demo.setSSO(i)}init(){if(!this._isReady&&!this._isDisposed){if(this._avatar&&this._avatar.init(),this._roomEngine&&(this._roomEngine.sessionDataManager=this._sessionDataManager,this._roomEngine.roomSessionManager=this._roomSessionManager,this._roomEngine.roomManager=this._roomManager,this._roomEngine.init(),this._sessionDataManager&&this._sessionDataManager.init(),this._roomManager&&this._roomManager.init(),this._roomSessionManager&&this._roomSessionManager.init()),new g.a(this._communication.connection),!this._communication.connection)throw new Error("No connection found");this._isReady=!0}}dispose(){this._isDisposed||(this._roomManager&&(this._roomManager.dispose(),this._roomManager=null),this._roomSessionManager&&(this._roomSessionManager.dispose(),this._roomSessionManager=null),this._sessionDataManager&&(this._sessionDataManager.dispose(),this._sessionDataManager=null),this._roomEngine&&(this._roomEngine.dispose(),this._roomEngine=null),this._avatar&&(this._avatar.dispose(),this._avatar=null),this._communication&&(this._communication.dispose(),this._communication=null),super.destroy(),this._isDisposed=!0,this._isReady=!1)}onConfigurationLoadedEvent(t){const s=this.getConfiguration("animation.fps",24),i=(this.getConfiguration("limits.fps",!0),this.getConfiguration("communication.packet.log",!1)),a=this.getConfiguration("chat.history.max.items",1e3);e.instance.ticker.maxFPS=s,r.a.PACKET_LOG_ENABLED=i,n.a.MAX_CHAT_HISTORY=a}onRoomEngineReady(t){this.startSendingHeartBeat()}getConfiguration(t,e=null){return this._core.configuration.getValue(t,e)}getLocalization(t){return this._localization.getValue(t)}getLocalizationWithParameter(t,e,s){return this._localization.getValueWithParameter(t,e,s)}getLocalizationWithParameters(t,e,s){return this._localization.getValueWithParameters(t,e,s)}addWorkerEventTracker(t){this._workerTrackers.indexOf(t)>=0||this._workerTrackers.push(t)}removeWorkerEventTracker(t){const e=this._workerTrackers.indexOf(t);-1!==e&&this._workerTrackers.splice(e,1)}createWorkerEvent(t){if(!t)return;const e=t.data;for(const s of this._workerTrackers)s&&s.workerMessageReceived(e)}sendWorkerEvent(t){t&&this._worker&&this._worker.postMessage(t)}addLinkEventTracker(t){this._linkTrackers.indexOf(t)>=0||this._linkTrackers.push(t)}removeLinkEventTracker(t){const e=this._linkTrackers.indexOf(t);-1!==e&&this._linkTrackers.splice(e,1)}createLinkEvent(t){if(t&&""!==t)for(const e of this._linkTrackers){if(!e)continue;const s=e.eventUrlPrefix;s.length>0?t.substr(0,s.length)===s&&e.linkReceived(t):e.linkReceived(t)}}startSendingHeartBeat(){this.sendHeartBeat(),setInterval(this.sendHeartBeat,1e4)}sendHeartBeat(){I.a.sendHeartBeat()}get nitroTimer(){return this._nitroTimer}get core(){return this._core}get events(){return this._events}get localization(){return this._localization}get communication(){return this._communication}get avatar(){return this._avatar}get roomEngine(){return this._roomEngine}get sessionDataManager(){return this._sessionDataManager}get roomSessionManager(){return this._roomSessionManager}get roomManager(){return this._roomManager}get width(){return this.renderer.width/this.renderer.resolution}get height(){return this.renderer.height/this.renderer.resolution}get time(){return this.ticker.lastTime}get isReady(){return this._isReady}get isDisposed(){return this._isDisposed}static get instance(){return this.INSTANCE||null}}return e.WEBGL_CONTEXT_LOST="NE_WEBGL_CONTEXT_LOST",e.WEBGL_UNAVAILABLE="NE_WEBGL_UNAVAILABLE",e.RELEASE_VERSION="NITRO-0-4-0",e.READY="NE_READY",e.INSTANCE=null,e})()}).call(this,s("NUif"))},PJYa:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},PJfP:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("XMGm"),n=s("MeCd"),r=s("KQk8");let a=(()=>{class t extends n.a{constructor(){super(),this._data=[]}parseWrapper(t){if(!t)return;this._data=[];const e=t.readInt();if(e)for(let s=0;s<e;s++)this._data.push(t.readString());super.parseWrapper(t)}initializeFromRoomObjectModel(t){super.initializeFromRoomObjectModel(t),this._data=t.getValue(i.a.FURNITURE_DATA)}writeRoomObjectModel(e){super.writeRoomObjectModel(e),e.setValue(i.a.FURNITURE_DATA_FORMAT,t.FORMAT_KEY),e.setValue(i.a.FURNITURE_DATA,this._data)}getLegacyString(){return this._data&&this._data.length?this._data[t.STATE]:""}compare(e){if(!(e instanceof t))return!1;let s=0;for(;s<this._data.length;){if(0===s);else if(this._data[s]!==e.getValue(s))return!1;s++}return!0}getValue(t){return this._data[t]||""}}return t.FORMAT_KEY=r.a.STRING_KEY,t.STATE=0,t})()},PSU1:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},Pox2:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._success=!1,!0}parse(t){return!!t&&(this._success=t.readBoolean(),!0)}get success(){return this._success}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},Prlr:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("Wgf2");class r{flush(){return this._wrapper=null,this._count=0,this._x=0,this._y=0,this._value=0,!0}tileHeight(){return n.a.decodeTileHeight(this._value)}isStackingBlocked(){return n.a.decodeIsStackingBlocked(this._value)}isRoomTile(){return n.a.decodeIsRoomTile(this._value)}next(){return!!this._count&&(this._count--,this._x=this._wrapper.readByte(),this._y=this._wrapper.readByte(),this._value=this._wrapper.readShort(),!0)}parse(t){return!!t&&(this._wrapper=t,this._count=t.readByte(),!0)}get x(){return this._x}get y(){return this._y}get height(){return this._value}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},Q612:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},QQU2:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{flush(){return!0}parse(t){return!!t&&(this._userId=t.readInt(),this._reason=t.readInt(),!0)}get _Str_4963(){return this._userId}get reason(){return this._reason}}return t._Str_16410=1,t})()},QXLr:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._userId=0,this._respectsReceived=0,!0}parse(t){return!!t&&(this._userId=t.readInt(),this._respectsReceived=t.readInt(),!0)}get userId(){return this._userId}get respectsReceived(){return this._respectsReceived}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},QZVO:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},QZfg:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("1+1A");class r{flush(){return this._item=null,!0}parse(t){return!!t&&(this._item=new n.a(t),this._item.username=t.readString(),!0)}get item(){return this._item}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},QjCb:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._message=null,!0}parse(t){return!!t&&(this._message=t.readString(),!0)}get message(){return this._message}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},QzjD:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._width=0,this._height=0,this._wallHeight=0,this._fixedWallsHeight=0,this._tileMap=[],this._holeMap=[],this._doors=[],this._dimensions={minX:0,maxX:0,minY:0,maxY:0},this._restrictsDragging=!1,this._restrictedScale=1,this._restrictsScaling=!1}get width(){return this._width}set width(t){this._width=t}get height(){return this._height}set height(t){this._height=t}get wallHeight(){return this._wallHeight}set wallHeight(t){this._wallHeight=t}get fixedWallsHeight(){return this._fixedWallsHeight}set fixedWallsHeight(t){this._fixedWallsHeight=t}get tileMap(){return this._tileMap}get holeMap(){return this._holeMap}get doors(){return this._doors}get dimensions(){return this._dimensions}get restrictsDragging(){return this._restrictsDragging}set restrictsDragging(t){this._restrictsDragging=t}get restrictsScaling(){return this._restrictsScaling}set restrictsScaling(t){this._restrictsScaling=t}get restrictedScale(){return this._restrictedScale}set restrictedScale(t){this._restrictedScale=t}}},R5Ri:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t=1){this._elapsedTime=0,this._percision=t,this._timer=null,this.start()}start(){this._elapsedTime=0,this._timer||(this._timer=setInterval(()=>this.increase(),this._percision))}stop(){this._timer&&clearTimeout(this._timer)}increase(){this._elapsedTime+=this._percision}getTimer(){return this._elapsedTime}}},"S+Gq":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._resultCode=-1,this._name="",this._nameSuggestions=[],!0}parse(t){if(!t)return!1;this._resultCode=t.readInt(),this._name=t.readString();let e=t.readInt();for(;e>0;)this._nameSuggestions.push(t.readString()),e--;return!0}get resultCode(){return this._resultCode}get name(){return this._name}get nameSuggestions(){return this._nameSuggestions}}let r=(()=>{class t extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}return t._Str_5797=0,t._Str_7005=1,t._Str_7389=2,t._Str_7137=3,t._Str_7836=4,t._Str_7721=5,t._Str_8620=6,t._Str_9429=7,t})()},"S5/W":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._roomId=-1,this._roomName=null,!0}parse(t){if(t)return this._roomId=t.readInt(),this._roomName=t.readString(),!0}get roomId(){return this._roomId}get roomName(){return this._roomName}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},S8Tn:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},SS1c:function(t,e,s){"use strict";s.d(e,"a",function(){return _});var i=s("5+UO"),n=s("P7Cj");let r=(()=>{class t{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._type=-1,this._position=null,this._itemName=null,this._itemPromoImage=null,this._catalogPageLocation=null,this._productCode=null,this._productOfferId=0,this._expirationTime=0,!0}parse(e){if(!e)return!1;switch(this._position=e.readInt(),this._itemName=e.readString(),this._itemPromoImage=e.readString(),this._type=e.readInt(),this._type){case t.ITEM_CATALOGUE_PAGE:this._catalogPageLocation=e.readString();break;case t.ITEM_PRODUCT_OFFER:this._productOfferId=e.readInt();break;case t.ITEM_IAP:this._productCode=e.readString()}const s=e.readInt();return this._expirationTime=s>0?1e3*s+n.a.instance.time:0,!0}get type(){return this._type}get position(){return this._position}get itemName(){return this._itemName}get itemPromoImage(){return this._itemPromoImage}get catalogPageLocation(){return this._catalogPageLocation}get productCode(){return this._productCode}get productOfferId(){return this._productOfferId}get expirationTime(){return this._expirationTime}}return t.ITEM_CATALOGUE_PAGE=0,t.ITEM_PRODUCT_OFFER=1,t.ITEM_IAP=2,t})();class a{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._images=[],this._texts=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._images.push(t.readString()),e--;let s=t.readInt();for(;s>0;)this._texts.push(t.readString()),s--;return!0}get images(){return this._images}get texts(){return this._texts}}var o=s("0wjC");class c{flush(){return this._pageId=-1,this._catalogType=null,this._layoutCode=null,this._localization=null,this._offers=[],this._offerId=-1,this._acceptSeasonCurrencyAsCredits=!1,this._frontPageItems=[],!0}parse(t){if(!t)return!1;this._pageId=t.readInt(),this._catalogType=t.readString(),this._layoutCode=t.readString(),this._localization=new a(t);let e=t.readInt();for(;e>0;)this._offers.push(new o.a(t)),e--;if(this._offerId=t.readInt(),this._acceptSeasonCurrencyAsCredits=t.readBoolean(),t.bytesAvailable){let e=t.readInt();for(;e>0;)this._frontPageItems.push(new r(t)),e--}return!0}get pageId(){return this._pageId}get catalogType(){return this._catalogType}get layoutCode(){return this._layoutCode}get localization(){return this._localization}get offers(){return this._offers}get offerId(){return this._offerId}get acceptSeasonCurrencyAsCredits(){return this._acceptSeasonCurrencyAsCredits}get frontPageItems(){return this._frontPageItems}}class _ extends i.a{constructor(t){super(t,c)}getParser(){return this.parser}}},Sb1T:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i){this._data=[t,e,s,i]}getMessageArray(){return this._data}dispose(){}}},SzgH:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(...t){this._data=[t.length,...t]}getMessageArray(){return this._data}dispose(){}}},TPa8:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("Ns5P");let n=(()=>{class t extends i.a{constructor(e,s,i){super(t.RSDE_DANCE,e),this._roomIndex=s,this._danceId=i}get roomIndex(){return this._roomIndex}get danceId(){return this._danceId}}return t.RSDE_DANCE="RSDE_DANCE",t})()},Tp0E:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._id=0,this._title=null,this._badge=null,this._colorA=null,this._colorB=null,this._ownerOrFavorite=null,this._ownerId=0,this._hasForum=!1,!0}parse(t){return!!t&&(this._id=t.readInt(),this._title=t.readString(),this._badge=t.readString(),this._colorA=t.readString(),this._colorB=t.readString(),this._ownerOrFavorite=t.readBoolean(),this._ownerId=t.readInt(),this._hasForum=t.readBoolean(),!0)}get id(){return this._id}get title(){return this._title}get badge(){return this._badge}get colorA(){return this._colorA}get colorB(){return this._colorB}get ownerOrFavorite(){return this._ownerOrFavorite}get ownerId(){return this._ownerId}get hasForum(){return this._hasForum}}class r{flush(){return this._id=0,this._username=null,this._figure=null,this._motto=null,this._registration=null,this._achievementPoints=0,this._friendsCount=0,this._isMyFriend=!1,this._requestSent=!1,this._isOnline=!1,this._groups=[],this._lastVisit=0,!0}parse(t){if(!t)return!1;this._id=t.readInt(),this._username=t.readString(),this._figure=t.readString(),this._motto=t.readString(),this._registration=t.readString(),this._achievementPoints=t.readInt(),this._friendsCount=t.readInt(),this._isMyFriend=t.readBoolean(),this._requestSent=t.readBoolean(),this._isOnline=t.readBoolean();let e=t.readInt();for(;e>0;)this._groups.push(new n(t)),e--;return this._lastVisit=t.readInt(),!0}get id(){return this._id}get username(){return this._username}get figure(){return this._figure}get motto(){return this._motto}get registration(){return this._registration}get achievementPoints(){return this._achievementPoints}get friendsCount(){return this._friendsCount}get isMyFriend(){return this._isMyFriend}get requestSent(){return this._requestSent}get isOnline(){return this._isOnline}get groups(){return this._groups}get lastVisit(){return this._lastVisit}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},U4HJ:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("0wjC");class r{flush(){return this._offer=null,!0}parse(t){return!!t&&(this._offer=new n.a(t),!0)}get offer(){return this._offer}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},UJeg:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},UTIc:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._errorCode=0,!0}parse(t){return!!t&&(this._errorCode=t.readInt(),!0)}get errorCode(){return this._errorCode}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},UTUL:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.OBJECT_UNDEFINED="OBJECT_UNDEFINED",t.OBJECT_MOVE="OBJECT_MOVE",t.OBJECT_PLACE="OBJECT_PLACE",t.OBJECT_ROTATE_POSITIVE="OBJECT_ROTATE_POSITIVE",t.OBJECT_ROTATE_NEGATIVE="OBJECT_ROTATE_NEGATIVE",t.OBJECT_MOVE_TO="OBJECT_MOVE_TO",t.OBJECT_PLACE_TO="OBJECT_PLACE_TO",t.OBJECT_PICKUP="OBJECT_PICKUP",t.OBJECT_PICKUP_BOT="OBJECT_PICKUP_BOT",t.OBJECT_PICKUP_PET="OBJECT_PICKUP_PET",t.OBJECT_EJECT="OBJECT_EJECT",t.OBJECT_SAVE_STUFF_DATA="OBJECT_SAVE_STUFF_DATA",t})()},UdUS:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},UufK:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},V1nr:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._windowX=0,this._windowY=0,this._windowWidth=0,this._windowHeight=0,this._leftPanelHidden=!1,this._resultsMode=0,!0}parse(t){return!!t&&(this._windowX=t.readInt(),this._windowY=t.readInt(),this._windowWidth=t.readInt(),this._windowHeight=t.readInt(),this._leftPanelHidden=t.readBoolean(),this._resultsMode=t.readInt(),!0)}get windowX(){return this._windowX}get windowY(){return this._windowY}get windowWidth(){return this._windowWidth}get windowHeight(){return this._windowHeight}get leftPanelHidden(){return this._leftPanelHidden}get resultsMode(){return this._resultsMode}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},V5Lx:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},VYTg:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i,n,r){this._data=[t,e,s,i,n,r]}getMessageArray(){return this._data}dispose(){}}},VZrs:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("XMGm"),n=s("MeCd"),r=s("KQk8");let a=(()=>{class t extends n.a{constructor(){super(),this._state="",this._result=0}parseWrapper(t){t&&(this._state=t.readString(),this._result=t.readInt(),super.parseWrapper(t))}writeRoomObjectModel(e){super.writeRoomObjectModel(e),e.setValue(i.a.FURNITURE_DATA_FORMAT,t.FORMAT_KEY);const s={};s.S=this._state,s.R=this._result.toString(),e.setValue(i.a.FURNITURE_DATA,s)}getLegacyString(){return this._state}compare(t){return!0}setString(t){this._state=t}get result(){return this._result}}return t.FORMAT_KEY=r.a.VOTE_KEY,t})()},WEUE:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("XxiA");class r{flush(){return this._definition=null,!0}parse(t){return!!t&&(this._definition=new n.a(t),!0)}get definition(){return this._definition}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},WM79:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("ndLt");class r{flush(){return this._totalFragments=0,this._fragmentNumber=0,this._fragment=[],!0}parse(t){if(!t)return!1;this._totalFragments=t.readInt(),this._fragmentNumber=t.readInt();let e=t.readInt();for(;e>0;)this._fragment.push(new n.a(t)),e--;return!0}get totalFragments(){return this._totalFragments}get fragmentNumber(){return this._fragmentNumber}get fragment(){return this._fragment}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},WRyM:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("3r1x");let n=(()=>{class t extends i.a{constructor(t){super(t)}get iconId(){return this._iconId}set iconId(t){this._iconId=t}get iconName(){return this._iconName}set iconName(t){this._iconName=t}}return t.TOOLBAR_CLICK="NTE_TOOLBAR_CLICK",t.SELECT_OWN_AVATAR="NTE_SELECT_OWN_AVATAR",t})()},Wamt:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._itemId=0,this._data="",!0}parse(t){return!!t&&(this._itemId=parseInt(t.readString()),this._data=t.readString(),!0)}get furnitureId(){return this._itemId}get data(){return this._data}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},Wgf2:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{static decodeTileHeight(t){return t<0?-1:(16383&t)/256}static decodeIsStackingBlocked(t){return!!(16384&t)}static decodeIsRoomTile(t){return t>=0}getTileHeight(t,e){return t<0||t>=this._width||e<0||e>=this._height?-1:i.decodeTileHeight(this._heights[e*this._width+t])}getStackingBlocked(t,e){return t<0||t>=this._width||e<0||e>=this._height||i.decodeIsStackingBlocked(this._heights[e*this._width+t])}isRoomTile(t,e){return!(t<0||t>=this._width||e<0||e>=this._height)&&i.decodeIsRoomTile(this._heights[e*this._width+t])}flush(){return this._width=0,this._height=0,this._heights=[],!0}parse(t){if(!t)return!1;this._width=t.readInt();const e=t.readInt();this._height=e/this._width;let s=0;for(;s<e;)this._heights[s]=t.readShort(),s++;return!0}get width(){return this._width}get height(){return this._height}get heights(){return this._heights}}},Wzp3:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("iAsj");class r{flush(){return this._item=null,!0}parse(t){return!!t&&(this._item=new n.a(t),!0)}get item(){return this._item}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"X+hw":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,2*e.size];for(const[s,i]of e.entries())this._data.push(s,i)}getMessageArray(){return this._data}dispose(){}}},X26Z:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("jfHZ");class r{flush(){return this._userFriendLimit=0,this._normalFriendLimit=0,this._extendedFriendLimit=0,this._categories=[],!0}parse(t){if(!t)return!1;this._userFriendLimit=t.readInt(),this._normalFriendLimit=t.readInt(),this._extendedFriendLimit=t.readInt();let e=t.readInt();for(;e>0;)this._categories.push(new n.a(t)),e--;return!0}get userFriendLimit(){return this._userFriendLimit}get normalFriendLimit(){return this._normalFriendLimit}get extendedFriendLimit(){return this._extendedFriendLimit}get categories(){return this._categories}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},XMGm:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.OBJECT_ROOM_ID="object_room_id",t.OBJECT_ACCURATE_Z_VALUE="object_accurate_z_value",t.TILE_CURSOR_HEIGHT="tile_cursor_height",t.FIGURE="figure",t.GENDER="gender",t.OWN_USER="own_user",t.FIGURE_CAN_STAND_UP="figure_can_stand_up",t.FIGURE_VERTICAL_OFFSET="figure_vertical_offset",t.FIGURE_TALK="figure_talk",t.FIGURE_DANCE="figure_dance",t.FIGURE_SLEEP="figure_sleep",t.FIGURE_BLINK="figure_blink",t.FIGURE_EFFECT="figure_effect",t.FIGURE_CARRY_OBJECT="figure_carry_object",t.FIGURE_USE_OBJECT="figure_use_object",t.FIGURE_GESTURE="figure_gesture",t.FIGURE_POSTURE="figure_posture",t.FIGURE_POSTURE_PARAMETER="figure_posture_parameter",t.FIGURE_HIGHLIGHT_ENABLE="figure_highlight_enable",t.FIGURE_HIGHLIGHT="figure_highlight",t.STD="std",t.FIGURE_SIGN="figure_sign",t.FIGURE_FLAT_CONTROL="figure_flat_control",t.FIGURE_IS_TYPING="figure_is_typing",t.FIGURE_IS_MUTED="figure_is_muted",t.FIGURE_GAINED_EXPERIENCE="figure_gained_experience",t.FIGURE_NUMBER_VALUE="figure_number_value",t.FIGURE_IS_PLAYING_GAME="figure_is_playing_game",t.FIGURE_GUIDE_STATUS="figure_guide_status",t.FIGURE_EXPRESSION="figure_expression",t.HEAD_DIRECTION="head_direction",t.FURNITURE_AUTOMATIC_STATE_INDEX="furniture_automatic_state_index",t.FURNITURE_ALWAYS_STACKABLE="furniture_always_stackable",t.FURNITURE_DISABLE_PICKING_ANIMATION="furniture_disable_picking_animation",t.FURNITURE_DATA_FORMAT="furniture_data_format",t.FURNITURE_UNIQUE_SERIAL_NUMBER="furniture_unique_serial_number",t.FURNITURE_UNIQUE_EDITION_SIZE="furniture_unique_edition_size",t.FURNITURE_CRACKABLE_STATE="furniture_crackable_state",t.FURNITURE_CRACKABLE_HITS="furniture_crackable_hits",t.FURNITURE_CRACKABLE_TARGET="furniture_crackable_target",t.FURNITURE_CREDIT_VALUE="furniture_credit_value",t.FURNITURE_DATA="furniture_data",t.FURNITURE_ITEMDATA="furniture_itemdata",t.FURNITURE_COLOR="furniture_color",t.FURNITURE_LIFT_AMOUNT="furniure_lift_amount",t.FURNITURE_GUILD_CUSTOMIZED_GUILD_ID="furniture_guild_customized_guild_id",t.FURNITURE_GUILD_CUSTOMIZED_BADGE="furniture_guild_customized_badge",t.FURNITURE_GUILD_CUSTOMIZED_COLOR_1="furniture_guild_customized_color_1",t.FURNITURE_GUILD_CUSTOMIZED_COLOR_2="furniture_guild_customized_color_2",t.FURNITURE_STATE_UPDATE_TIME="furniture_state_update_time",t.FURNITURE_SELECTION_DISABLED="furniture_selection_disabled",t.FURNITURE_SIZE_X="furniture_size_x",t.FURNITURE_SIZE_Y="furniture_size_y",t.FURNITURE_SIZE_Z="furniture_size_z",t.FURNITURE_CENTER_X="furniture_center_x",t.FURNITURE_CENTER_Y="furniture_center_y",t.FURNITURE_CENTER_Z="furniture_center_z",t.FURNITURE_ALLOWED_DIRECTIONS="furniture_allowed_directions",t.FURNITURE_AD_URL="furniture_ad_url",t.FURNITURE_TYPE_ID="furniture_type_id",t.FURNITURE_EXTRAS="furniture_extras",t.FURNITURE_EXPIRY_TIME="furniture_expiry_time",t.FURNITURE_EXPIRTY_TIMESTAMP="furniture_expiry_timestamp",t.FURNITURE_REAL_ROOM_OBJECT="furniture_real_room_object",t.FURNITURE_IS_STICKIE="furniture_is_stickie",t.FURNITURE_BRANDING_IMAGE_STATUS="furniture_branding_image_status",t.FURNITURE_BRANDING_IMAGE_URL="furniture_branding_image_url",t.FURNITURE_BRANDING_URL="furniture_branding_url",t.FURNITURE_BRANDING_OFFSET_X="furniture_branding_offset_x",t.FURNITURE_BRANDING_OFFSET_Y="furniture_branding_offset_y",t.FURNITURE_BRANDING_OFFSET_Z="furniture_branding_offset_z",t.FURNITURE_BADGE_IMAGE_STATUS="furniture_badge_image_status",t.FURNITURE_BADGE_ASSET_NAME="furniture_badge_asset_name",t.FURNITURE_BADGE_VISIBLE_IN_STATE="furniture_badge_visible_in_state",t.FURNITURE_ALPHA_MULTIPLIER="furniture_alpha_multiplier",t.FURNITURE_USAGE_POLICY="furniture_usage_policy",t.FURNITURE_OWNER_ID="furniture_owner_id",t.FURNITURE_OWNER_NAME="furniture_owner_name",t.FURNITURE_ROOM_BACKGROUND_COLOR_HUE="furniture_room_background_color_hue",t.FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION="furniture_room_background_color_saturation",t.FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS="furniture_room_background_color_lightness",t.FURNITURE_USES_PLANE_MASK="furniture_uses_plane_mask",t.FURNITURE_PLANE_MASK_TYPE="furniture_plane_mask_type",t.FURNITURE_IS_VARIABLE_HEIGHT="furniture_is_variable_height",t.FURNITURE_VOTE_MAJORITY_RESULT="furniture_vote_majority_result",t.FURNITURE_VOTE_COUNTER_COUNT="furniture_vote_counter_count",t.FURNITURE_MANNEQUIN_NAME="furniture_mannequin_name",t.FURNITURE_MANNEQUIN_GENDER="furniture_mannequin_gender",t.FURNITURE_MANNEQUIN_FIGURE="furniture_mannequin_figure",t.FURNITURE_HIGHSCORE_SCORE_TYPE="furniture_highscore_score_type",t.FURNITURE_HIGHSCORE_CLEAR_TYPE="furniture_highscore_clear_type",t.FURNITURE_HIGHSCORE_DATA_ENTRY_COUNT="furniture_highscore_data_entry_count",t.FURNITURE_HIGHSCORE_DATA_ENTRY_BASE_USERS_="furniture_highscore_data_entry_base_users_",t.FURNITURE_HIGHSCORE_DATA_ENTRY_BASE_SCORE_="furniture_highscore_data_entry_base_score_",t.FURNITURE_INTERNAL_LINK="furniture_internal_link",t.PET_PALETTE_INDEX="pet_palette_index",t.PET_COLOR="pet_color",t.PET_HEAD_ONLY="pet_head_only",t.PET_CUSTOM_LAYER_IDS="pet_custom_layer_ids",t.PET_CUSTOM_PARTS_IDS="pet_custom_part_ids",t.PET_CUSTOM_PALETTE_IDS="pet_custom_palette_ids",t.PET_IS_RIDING="pet_is_riding",t.PET_TYPE="pet_type",t.PET_ALLOWED_DIRECTIONS="pet_allowed_directions",t.RACE="race",t.ROOM_MAP_DATA="room_map_data",t.ROOM_PLANE_MASK_XML="room_plane_mask_xml",t.ROOM_FLOOR_TYPE="room_floor_type",t.ROOM_WALL_TYPE="room_wall_type",t.ROOM_LANDSCAPE_TYPE="room_landscape_type",t.ROOM_WALL_THICKNESS="room_wall_thickness",t.ROOM_FLOOR_THICKNESS="room_floor_thickness",t.ROOM_FLOOR_HOLE_UPDATE_TIME="room_floor_hole_update_time",t.ROOM_FLOOR_VISIBILITY="room_floor_visibility",t.ROOM_WALL_VISIBILITY="room_wall_visibility",t.ROOM_LANDSCAPE_VISIBILITY="room_landscape_visibility",t.ROOM_DOOR_X="room_door_x",t.ROOM_DOOR_Y="room_door_y",t.ROOM_DOOR_Z="room_door_z",t.ROOM_DOOR_DIR="room_door_dir",t.ROOM_BACKGROUND_COLOR="room_background_color",t.ROOM_COLORIZE_BG_ONLY="room_colorize_bg_only",t.ROOM_RANDOM_SEED="room_random_seed",t.ROOM_WORLD_TYPE="room_world_type",t.ROOM_SELECTED_X="room_selected_x",t.ROOM_SELECTED_Y="room_selected_y",t.ROOM_SELECTED_Z="room_selected_z",t.ROOM_SELECTED_PLANE="room_selected_plane",t.IMAGE_QUERY_SCALE="image_query_scale",t.FURNITURE_FRIENDFURNI_ENGRAVING="furniture_friendfurni_engraving_type",t})()},XNkd:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._stuffId=0,!0}parse(t){return!!t&&(this._stuffId=t.readInt(),!0)}get stuffId(){return this._stuffId}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},Xe8L:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._itemId=0,this._userId=0,!0}parse(t){return!!t&&(this._itemId=parseInt(t.readString()),this._userId=t.readInt(),!0)}get itemId(){return this._itemId}get userId(){return this._userId}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},Xmmk:function(t,e,s){"use strict";s.d(e,"a",function(){return d});var i=s("Fv14"),n=s("ZQhZ"),r=s("IGSi"),a=s("Xr/m");class o{constructor(){this._map=new Map,this._updateCounter=0}dispose(){this._map.clear(),this._updateCounter=0}getValue(t){return this._map.get(t)}setValue(t,e){this._map.set(t,e),this._updateCounter++}removeKey(t){t&&(this._map.delete(t),this._updateCounter++)}get updateCounter(){return this._updateCounter}}class c extends a.a{constructor(t,e){super(),this._id=t,this._container=e,this._renderer=null,this._managers=new Map,this._updateCategories=[],this._model=new o}onDispose(){this.removeAllManagers(),this.destroyRenderer(),this._container=null,this._model.dispose()}setRenderer(t){if(t!==this._renderer&&(this._renderer&&this.destroyRenderer(),this._renderer=t,this._renderer&&(this._renderer.reset(),this._managers.size)))for(const e of this._managers.values()){if(!e)continue;const t=e.objects;if(t.length)for(const e of t.getValues())e&&this._renderer.addObject(e)}}destroyRenderer(){this._renderer&&(this._renderer.dispose(),this._renderer=null)}getManager(t){return this._managers.get(t)||null}getManagerOrCreate(t){let e=this.getManager(t);return e||(e=this._container.createRoomObjectManager(t),e?(this._managers.set(t,e),e):null)}getTotalObjectsForManager(t){const e=this.getManager(t);return e?e.totalObjects:0}getRoomObject(t,e){const s=this.getManager(e);return s&&s.getObject(t)||null}getRoomObjectsForCategory(t){const e=this.getManager(t);return e?e.objects.getValues():[]}getRoomObjectByIndex(t,e){const s=this.getManager(e);return s&&s.getObjectByIndex(t)||null}createRoomObject(t,e,s,i){const n=this.getManagerOrCreate(i);if(!n)return null;const r=n.createObject(t,e,s);return r?(this._renderer&&this._renderer.addObject(r),r):null}createRoomObjectAndInitalize(t,e,s){return this._container?this._container.createRoomObjectAndInitalize(this._id,t,e,s):null}removeRoomObject(t,e){const s=this.getManager(e);if(!s)return;const i=s.getObject(t);i&&(i.tearDown(),this._renderer&&this._renderer.removeObject(i),s.removeObject(t))}removeAllManagers(){for(const t of this._managers.values())if(t){if(this._renderer){const e=t.objects;if(e.length)for(const t of e.getValues())t&&this._renderer.removeObject(t)}t.dispose()}this._managers.clear()}addUpdateCategory(t){this._updateCategories.indexOf(t)>=0||this._updateCategories.push(t)}removeUpdateCategory(t){const e=this._updateCategories.indexOf(t);-1!==e&&this._updateCategories.splice(e,1)}update(t,e=!1){for(const s of this._updateCategories){const e=this.getManager(s);if(!e)continue;const i=e.objects;if(i.length)for(const s of i.getValues()){if(!s)continue;const e=s.logic;e&&e.update(t)}}this._renderer&&this._renderer.update(t,e)}hasUninitializedObjects(){for(const t of this._managers.values())if(t)for(const e of t.objects.getValues())if(e&&!e.isReady)return!0;return!1}get id(){return this._id}get container(){return this._container}get renderer(){return this._renderer}get managers(){return this._managers}get model(){return this._model}}var _=s("hTzv"),h=s("DFHD");let l=(()=>{class t extends a.a{constructor(e,s,i){super(),this._id=e,this._instanceId=t.OBJECT_COUNTER++,this._type=i,this._model=new o,this._location=new h.a,this._direction=new h.a,this._states=[],this._visualization=null,this._logic=null,this._pendingLogicMessages=[],this._updateCounter=0,this._isReady=!1;let n=s-1;for(;n>=0;)this._states[n]=0,n--}onDispose(){this._pendingLogicMessages=[],this.setVisualization(null),this.setLogic(null),this._model&&this._model.dispose(),super.onDispose()}getLocation(){return this._location}setLocation(t){t&&(t.x===this._location.x&&t.y===this._location.y&&t.z===this._location.z||(this._location.x=t.x,this._location.y=t.y,this._location.z=t.z,this._updateCounter++))}getDirection(){return this._direction}setDirection(t){t&&(t.x===this._direction.x&&t.y===this._direction.y&&t.z===this._direction.z||(this._direction.x=(t.x%360+360)%360,this._direction.y=(t.y%360+360)%360,this._direction.z=(t.z%360+360)%360,this._updateCounter++))}getState(t=0){return t>=0&&t<this._states.length?this._states[t]:-1}setState(t,e=0){return e>=0&&e<this._states.length&&(this._states[e]!==t&&(this._states[e]=t,this._updateCounter++),!0)}setVisualization(t){this._visualization!==t&&(this._visualization&&this._visualization.dispose(),this._visualization=t,this._visualization&&(this._visualization.object=this))}setLogic(t){if(this._logic===t)return;const e=this._logic;if(e&&(this._logic=null,e.setObject(null)),this._logic=t,this._logic)for(this._logic.setObject(this);this._pendingLogicMessages.length;){const t=this._pendingLogicMessages.shift();this._logic.processUpdateMessage(t)}}processUpdateMessage(t){if(this._logic)return this._logic.processUpdateMessage(t);this._pendingLogicMessages.push(t)}tearDown(){this._logic&&this._logic.tearDown()}get id(){return this._id}get instanceId(){return this._instanceId}get type(){return this._type}get model(){return this._model}get visualization(){return this._visualization}get mouseHandler(){return this._logic}get logic(){return this._logic}get location(){return this._location}get direction(){return this._direction}get updateCounter(){return this._updateCounter}set updateCounter(t){this._updateCounter=t}get isReady(){return this._isReady}set isReady(t){this._isReady=t}}return t.OBJECT_COUNTER=0,t})();class u{constructor(){this._objects=new _.a,this._objectsPerType=new _.a}dispose(){this.removeAllObjects()}getObject(t){return this._objects.getValue(t)||null}getObjectByIndex(t){return this._objects.getWithIndex(t)||null}createObject(t,e,s){const i=new l(t,e,s);return this.addObject(t,s,i)}addObject(t,e,s){if(this._objects.getValue(t))return s.dispose(),null;this._objects.add(t,s);const i=this.getTypeMap(e);return i&&i.add(t,s),s}removeObject(t){const e=this._objects.remove(t);if(e){const t=this.getTypeMap(e.type);t&&t.remove(e.id),e.dispose()}}removeAllObjects(){let t=0;for(;t<this._objects.length;){const e=this._objects.getWithIndex(t);e&&e.dispose(),t++}for(this._objects.reset(),t=0;t<this._objectsPerType.length;){const e=this._objectsPerType.getWithIndex(t);e&&e.dispose(),t++}this._objectsPerType.reset()}getTypeMap(t,e=!0){let s=this._objectsPerType.getValue(t);return!s&&e&&(s=new _.a,this._objectsPerType.add(t,s)),s}get objects(){return this._objects}get totalObjects(){return this._objects.length}}let d=(()=>{class t extends i.a{constructor(e,s,i){super(),this._state=t._Str_16443,this._rooms=new Map,this._contentLoader=null,this._updateCategories=[],this._listener=e,this._visualizationFactory=s,this._logicFactory=i,this._initialLoadList=[],this._pendingContentTypes=[],this._skipContentProcessing=!1,this._disposed=!1,this.onRoomContentLoadedEvent=this.onRoomContentLoadedEvent.bind(this),this.events.addEventListener(r.a.RCLE_SUCCESS,this.onRoomContentLoadedEvent),this.events.addEventListener(r.a.RCLE_FAILURE,this.onRoomContentLoadedEvent),this.events.addEventListener(r.a.RCLE_CANCEL,this.onRoomContentLoadedEvent)}onInit(){if(this._state>=t._Str_13904||!this._contentLoader)return;const e=n.a.MANDATORY_LIBRARIES;for(const t of e)t&&-1===this._initialLoadList.indexOf(t)&&(this._contentLoader.downloadAsset(t,this.events),this._initialLoadList.push(t));this._state=t._Str_13904}getRoomInstance(t){return this._rooms.get(t)||null}createRoomInstance(t){if(this._rooms.get(t))return null;const e=new c(t,this);if(this._rooms.set(e.id,e),this._updateCategories.length)for(const s of this._updateCategories)e.addUpdateCategory(s);return e}removeRoomInstance(t){const e=this._rooms.get(t);return!!e&&(this._rooms.delete(t),e.dispose(),!0)}createRoomObjectAndInitalize(t,e,s,i){const n=this.getRoomInstance(t);if(!n)return null;let r=s,a=s,o=s,c=null,_=!1;if(this._contentLoader.isLoaderType(s)){if(c=this._contentLoader.getCollection(s),!c&&(_=!0,this._contentLoader.downloadAsset(s,this.events),o=this._contentLoader.getPlaceholderName(s),c=this._contentLoader.getCollection(o),!c))return null;r=c.data.visualizationType,a=c.data.logicType}const h=n.createRoomObject(e,1,s,i);if(!h)return null;if(this._visualizationFactory){const t=this._visualizationFactory.getVisualization(r);if(!t)return n.removeRoomObject(e,i),null;t.asset=c;const s=this._visualizationFactory.getVisualizationData(o,r,c&&c.data||null);if(!s||!t.initialize(s))return n.removeRoomObject(e,i),null;h.setVisualization(t)}if(this._logicFactory){const t=this._logicFactory.getLogic(a);h.setLogic(t),t&&t.initialize(c&&c.data||null)}return _||(h.isReady=!0),this._contentLoader.setRoomObjectRoomId(h,t),h}reinitializeRoomObjectsByType(t){if(!(t&&this._contentLoader&&this._visualizationFactory&&this._logicFactory))return;const e=this._contentLoader.getCollection(t);if(!e)return;const s=e.data.visualizationType,i=e.data.logicType,n=this._visualizationFactory.getVisualizationData(t,s,e.data);for(const r of this._rooms.values())if(r)for(const[a,o]of r.managers.entries())if(o)for(const c of o.objects.getValues()){if(!c||c.type!==t)continue;const _=this._visualizationFactory.getVisualization(s);if(_)if(_.asset=e,n&&_.initialize(n)){c.setVisualization(_);const t=this._logicFactory.getLogic(i);c.setLogic(t),t&&t.initialize(e.data),c.isReady=!0,this._listener&&this._listener.objectInitialized(r.id,c.id,a)}else o.removeObject(c.id);else o.removeObject(c.id)}}addUpdateCategory(t){if(!(this._updateCategories.indexOf(t)>=0)&&(this._updateCategories.push(t),this._rooms.size))for(const e of this._rooms.values())e&&e.addUpdateCategory(t)}removeUpdateCategory(t){const e=this._updateCategories.indexOf(t);if(-1!==e&&(this._updateCategories.splice(e,1),this._rooms.size))for(const s of this._rooms.values())s&&s.removeUpdateCategory(t)}setContentLoader(t){this._contentLoader&&this._contentLoader.dispose(),this._contentLoader=t}processPendingContentTypes(t){if(this._skipContentProcessing)this._skipContentProcessing=!1;else for(;this._pendingContentTypes.length;){const t=this._pendingContentTypes.shift();this._contentLoader.getCollection(t)?(this.reinitializeRoomObjectsByType(t),this._listener&&this._listener.initalizeTemporaryObjectsByType(t,!0),this._initialLoadList.length>0&&this.removeFromInitialLoad(t)):(this._listener&&this._listener.initalizeTemporaryObjectsByType(t,!1),this.logger.log("Invalid Collection: "+t))}}removeFromInitialLoad(e){if(e&&this._state!==t._Str_9994)if(this._contentLoader||(this._state=t._Str_9994),this._contentLoader.getCollection(e)){const s=this._initialLoadList.indexOf(e);s>=0&&this._initialLoadList.splice(s,1),this._initialLoadList.length||(this._state=t._Str_9846,this._listener&&this._listener.onRoomEngineInitalized(!0))}else this._state=t._Str_9994,this._listener&&this._listener.onRoomEngineInitalized(!1)}onRoomContentLoadedEvent(t){if(!this._contentLoader)return;const e=t.contentType;this._pendingContentTypes.indexOf(e)>=0||this._pendingContentTypes.push(e)}update(t,e=!1){if(this.processPendingContentTypes(t),this._rooms.size)for(const s of this._rooms.values())s&&s.update(t,e)}createRoomObjectManager(t){return new u}get rooms(){return this._rooms}get disposed(){return this._disposed}}return t._Str_9994=-1,t._Str_16337=0,t._Str_16443=1,t._Str_13904=2,t._Str_9846=3,t._Str_18280=40,t})()},XpxF:function(t,e,s){"use strict";s.d(e,"a",function(){return bt});var i=s("CDzl"),n=s("Fv14"),r=s("3r1x"),a=s("P7Cj");let o=(()=>{class t{constructor(){this._gender="M",this._avatarEffectType=-1}_Str_2153(t,e){this._data=new Map,this._colors=new Map,this._gender=e,this._Str_958(t)}dispose(){this._data=null,this._colors=null,this._isDisposed=!0}get disposed(){return this._isDisposed}_Str_958(t){if(t)for(const e of t.split(".")){const t=e.split("-");if(t.length>0){const e=t[0],s=parseInt(t[1]),i=[];let n=2;for(;n<t.length;)i.push(parseInt(t[n])),n++;i.length||i.push(0),this._Str_1876(e,s,!1),this.savePartSetColourId(e,i,!1)}}}_Str_2131(t){return!!this._data.get(t)}getPartSetId(t){return this._Str_2131(t)?this._data.get(t):-1}getColourIds(t){return this._colors.get(t)?this._colors.get(t):[]}_Str_1008(){let t="";const e=[];for(const[i,n]of this._data.entries()){let t=i+"-"+n;const s=this._colors.get(i);if(s)for(const e of s)t=t+"-"+e;e.push(t)}let s=0;for(;s<e.length;)t+=e[s],s<e.length-1&&(t+="."),s++;return t}_Str_2088(t,e,s,i=!1){this._Str_1876(t,e,i),this.savePartSetColourId(t,s,i)}_Str_1876(e,s,i=!0){switch(e){case t.HD:case t.HR:case t.HA:case t.HE:case t.EA:case t.FA:case t.CH:case t.CC:case t.CA:case t.CP:case t.LG:case t.SH:case t.WA:s>=0?this._data.set(e,s):this._data.delete(e)}}savePartSetColourId(e,s,i=!0){switch(e){case t.HD:case t.HR:case t.HA:case t.HE:case t.EA:case t.FA:case t.CH:case t.CC:case t.CA:case t.CP:case t.LG:case t.SH:case t.WA:return void this._colors.set(e,s)}}getFigureStringWithFace(e){const s=[t.HD];let i="";const n=[];for(const a of s){const s=this._colors.get(a);if(s){let i=this._data.get(a);a===t.HD&&(i=e);let r=a+"-"+i;if(i>=0){let t=0;for(;t<s.length;)r=r+"-"+s[t],t++}n.push(r)}}let r=0;for(;r<n.length;)i+=n[r],r<n.length-1&&(i+="."),r++;return i}get gender(){return this._gender}}return t.M="M",t.F="F",t.U="U",t.H="h",t.STD="std",t._Str_2028="0",t.HD="hd",t.HR="hr",t.HA="ha",t.HE="he",t.EA="ea",t.FA="fa",t.CC="cc",t.CH="ch",t.CA="ca",t.CP="cp",t.LG="lg",t.SH="sh",t.WA="wa",t._Str_1329=[28,29,30,33,34,35,36,37,38,39,40,41,42,43,68],t})();class c{constructor(t,e){this._name=t,this._link=e.link,this._flipH=1===e.fliph,this._flipV=1===e.flipv}get name(){return this._name}get link(){return this._link}get flipH(){return this._flipH}get flipV(){return this._flipV}}class _{constructor(t,e){this._avatarRenderManager=t,this._aliases=new Map,this._assets=e,this._missingAssetNames=[]}dispose(){this._assets=null,this._aliases=null}reset(){this.init()}init(){for(const t of this._assets.collections.values()){if(!t)continue;const e=t.data&&t.data.aliases;if(e)for(const t in e){const s=e[t];s&&this._aliases.set(t,new c(t,s))}}}_Str_1044(t){return!!this._aliases.get(t)}_Str_2125(t){let e=t,s=5;for(;this._Str_1044(e)&&s>=0;)e=this._aliases.get(e).link,s--;return e}getAsset(t){return this._assets?(t=this._Str_2125(t),this._assets.getAsset(t)||null):null}}var h=s("vzKh"),l=s("vuPI");let u=(()=>{class t extends r.a{constructor(t,e){super(t),this._library=e}get library(){return this._library}}return t.DOWNLOAD_COMPLETE="ARLE_DOWNLOAD_COMPLETE",t})(),d=(()=>{class t extends l.a{constructor(e,s,i,n){super(),this._state=t.NOT_LOADED,this._libraryName=e,this._revision=s,this._downloadUrl=n,this._assets=i,this._downloadUrl=this._downloadUrl.replace(/%libname%/gi,this._libraryName),this._downloadUrl=this._downloadUrl.replace(/%revision%/gi,this._revision),this._assets.getCollection(this._libraryName)&&(this._state=t.LOADED)}downloadAsset(){if(this._assets&&this._state!==t.LOADING&&this._state!==t.LOADED)return this._assets.getCollection(this._libraryName)?(this._state=t.LOADED,void this.dispatchEvent(new u(u.DOWNLOAD_COMPLETE,this))):(this._state=t.LOADING,void this._assets.downloadAsset(this._downloadUrl,e=>{e&&(this._state=t.LOADED,this.dispatchEvent(new u(u.DOWNLOAD_COMPLETE,this)))}))}get libraryName(){return this._libraryName}get isLoaded(){return this._state===t.LOADED}}return t.DOWNLOAD_COMPLETE="AADL_DOWNLOAD_COMPLETE",t.NOT_LOADED=0,t.LOADING=1,t.LOADED=2,t})();var g=s("qEDl");let m=(()=>{class t extends l.a{constructor(t,e){super(),this._assets=t,this._structure=e,this._missingMandatoryLibs=a.a.instance.getConfiguration("avatar.mandatory.libraries"),this._figureMap=new Map,this._pendingContainers=[],this._figureListeners=new Map,this._incompleteFigures=new Map,this._pendingDownloadQueue=[],this._currentDownloads=[],this._libraryNames=[],this._isReady=!1,this.onLibraryLoaded=this.onLibraryLoaded.bind(this),this.onAvatarRenderReady=this.onAvatarRenderReady.bind(this),this.loadFigureMap(),this._structure.renderManager.events.addEventListener(g.a.AVATAR_RENDER_READY,this.onAvatarRenderReady)}loadFigureMap(){const e=new XMLHttpRequest;try{e.open("GET",a.a.instance.getConfiguration("avatar.figuremap.url")),e.send(),e.onloadend=s=>{if(e.responseText){const s=JSON.parse(e.responseText);this.processFigureMap(s.libraries),this.processMissingLibraries(),this._isReady=!0,this.dispatchEvent(new r.a(t.DOWNLOADER_READY))}},e.onerror=t=>{throw new Error("invalid_avatar_figure_map")}}catch(s){h.a.log(s)}}processFigureMap(t){if(t)for(const e of t){if(!e)continue;const t=e.id,s=e.revision||"";if(this._libraryNames.indexOf(t)>=0)continue;this._libraryNames.push(t);const i=new d(t,s,this._assets,a.a.instance.getConfiguration("avatar.asset.url"));i.addEventListener(u.DOWNLOAD_COMPLETE,this.onLibraryLoaded);for(const n of e.parts){const t=n.type+":"+n.id;let e=this._figureMap.get(t);e||(e=[]),e.push(i),this._figureMap.set(t,e)}}}onAvatarRenderReady(t){if(t){for(const[t,e]of this._pendingContainers)this.downloadAvatarFigure(t,e);this._pendingContainers=[]}}onLibraryLoaded(e){if(!e||!e.library)return;const s=[];for(const[n,a]of this._incompleteFigures.entries()){let e=!0;for(const t of a)if(t&&!t.isLoaded){e=!1;break}if(e){s.push(n);const e=this._figureListeners.get(n);if(e)for(const t of e)t&&!t.disposed&&t.resetFigure(n);this._figureListeners.delete(n),this.dispatchEvent(new r.a(t.LIBRARY_LOADED))}}for(const t of s)t&&this._incompleteFigures.delete(t);let i=0;for(;i<this._currentDownloads.length;){const t=this._currentDownloads[i];t&&t.libraryName===e.library.libraryName&&this._currentDownloads.splice(i,1),i++}}processMissingLibraries(){const t=this._missingMandatoryLibs.slice();for(const e of t){if(!e)continue;const t=this._figureMap.get(e);if(t)for(const e of t)e&&this.downloadLibrary(e)}}isAvatarFigureContainerReady(t){return!(!this._isReady||!this._structure.renderManager.isReady||this.getAvatarFigurePendingLibraries(t).length)}getAvatarFigurePendingLibraries(t){const e=[];if(!t||!this._structure)return e;const s=this._structure.figureData;if(!s)return e;const i=t._Str_1016();for(const n of i){const i=s._Str_740(n);if(!i)continue;const r=i._Str_1020(t.getPartSetId(n));if(r)for(const t of r._Str_806){if(!t)continue;const s=this._figureMap.get(t.type+":"+t.id);if(void 0!==s)for(const t of s)t&&!t.isLoaded&&(e.indexOf(t)>=0||e.push(t))}}return e}downloadAvatarFigure(t,e){if(!this._isReady||!this._structure.renderManager.isReady)return void this._pendingContainers.push([t,e]);const s=t._Str_1008(),i=this.getAvatarFigurePendingLibraries(t);if(i&&i.length){if(e&&!e.disposed){let t=this._figureListeners.get(s);t||(t=[],this._figureListeners.set(s,t)),t.push(e)}this._incompleteFigures.set(s,i);for(const t of i)t&&this.downloadLibrary(t)}else e&&!e.disposed&&e.resetFigure(s)}downloadLibrary(t){t&&!t.isLoaded&&(this._pendingDownloadQueue.indexOf(t)>=0||this._currentDownloads.indexOf(t)>=0||(this._pendingDownloadQueue.push(t),this.processDownloadQueue()))}processDownloadQueue(){for(;this._pendingDownloadQueue.length;)this._pendingDownloadQueue[0].downloadAsset(),this._currentDownloads.push(this._pendingDownloadQueue.shift())}}return t.DOWNLOADER_READY="AADM_DOWNLOADER_READY",t.LIBRARY_LOADED="AADM_LIBRARY_LOADED",t.MAX_DOWNLOADS=2,t})();class p{constructor(t){this._parts=new Map,this.parseFigure(t)}_Str_1016(){return this.partSets().keys()}_Str_744(t){return null!==this.partSets().get(t)}getPartSetId(t){const e=this.partSets().get(t);return e?e.get("setid"):0}_Str_815(t){const e=this.partSets().get(t);return e?e.get("colorids"):null}_Str_830(t,e,s){const i=new Map;i.set("type",t),i.set("setid",e),i.set("colorids",s);const n=this.partSets();n.delete(t),n.set(t,i)}_Str_923(t){this.partSets().delete(t)}_Str_1008(){const t=[];for(const e of this.partSets().keys()){if(!e)continue;let s=[];s.push(e),s.push(this.getPartSetId(e)),s=s.concat(this._Str_815(e)),t.push(s.join("-"))}return t.join(".")}partSets(){return this._parts||(this._parts=new Map),this._parts}parseFigure(t){t||(t="");for(const e of t.split(".")){const t=e.split("-");if(t.length>=2){const e=t[0],s=parseInt(t[1]),i=[];let n=2;for(;n<t.length;)i.push(parseInt(t[n])),n++;this._Str_830(e,s,i)}}}}var f=s("IqKQ"),E=s("hTzv"),S=s("IxQr");class I{constructor(t,e="",s=0){this._actionType=t||"",this._actionParameter=e||"",this._definition=null,this._startFrame=s||0,this._overridingAction=null}dispose(){this._actionType=null,this._actionParameter=null,this._definition=null}get id(){return this._definition?this._definition.id+"_"+this._actionParameter:""}get _Str_695(){return this._actionType}get _Str_727(){return this._actionParameter}set _Str_727(t){this._actionParameter=t}get _Str_742(){return this._definition}set _Str_742(t){this._definition=t}get _Str_664(){return this._startFrame}get _Str_707(){return this._overridingAction}set _Str_707(t){this._overridingAction=t}}var R=s("kXXe");let b=(()=>{class t{constructor(t,e,s){if(this._id=t.id,this._animationFrame=parseInt(t.frame)||0,this._dx=void 0!==t.dx?parseInt(t.dx):0,this._dy=void 0!==t.dy?parseInt(t.dy):0,this._dz=void 0!==t.dz?parseInt(t.dz):0,this._directionOffset=void 0!==t.dd?parseInt(t.dd):0,this._type=e,this._base=t.base||"",this._items=new Map,t.items)for(const i of t.items)this._items.set(i.id,i.base);""!==this._base&&this._Str_2108().toString(),s&&(this._action=new I(s.state,this.base),this._action._Str_742=s)}get items(){return this._items}_Str_2108(){let t=0,e=0;for(;e<this._base.length;)t+=this._base.charCodeAt(e),e++;return t}get id(){return this._id}get _Str_891(){return this._animationFrame}get dx(){return this._dx}get dy(){return this._dy}get dz(){return this._dz}get dd(){return this._directionOffset}get type(){return this._type}get base(){return this._base}get action(){return this._action}}return t.BODYPART="bodypart",t.FX="fx",t})();class v{constructor(t,e,s){this._image=t,this._regPoint=e,this._offset=new f.j(0,0),this._regPoint=e,this._isCacheable=s,this._Str_1225()}dispose(){this._image&&this._image.destroy({children:!0}),this._image=null,this._regPoint=null,this._offset=null}_Str_1225(){}_Str_1387(t){this._regPoint=t,this._Str_1225()}get image(){return this._image}set image(t){this._image&&this._image!==t&&this._image.destroy({children:!0}),this._image=t}get _Str_1076(){const t=this._regPoint.clone();return t.x+=this._offset.x,t.y+=this._offset.y,t}set offset(t){this._offset=t,this._Str_1225()}get _Str_1807(){return this._isCacheable}}var T=s("sRxW"),O=s("tHQF"),y=s("uEox");let A=(()=>{class t{}return t.VERTICAL="vertical",t.SITTING="sitting",t.HORIZONTAL="horizontal",t.SWIM="swim",t.SNOWWARS_HORIZONTAL="swhorizontal",t})();class C{constructor(){this._Str_586=new Map}_Str_1565(t,e){this._Str_1233||(this._Str_1233=t);const s=this._Str_1961(this._Str_1233);s&&s._Str_1108(e),this._Str_1233=t}dispose(){if(!this._disposed){if(!this._Str_586)return;this._Str_2089(0,2147483647),this._Str_586.clear(),this._Str_586=null,this._disposed=!0}}_Str_2089(t,e){if(this._Str_586&&!this._disposed)for(const[s,i]of this._Str_586.entries())i&&e-i._Str_1815()>=t&&(i.dispose(),this._Str_586.delete(s))}_Str_2244(){return this._Str_1233}setDirection(t){this._Str_1188=t}getDirection(){return this._Str_1188}_Str_1961(t=null){return this._Str_1233?(t||(t=this._Str_1233),this._Str_586.get(t._Str_707?t._Str_707:t.id)):null}_Str_1765(t,e){this._Str_586.set(t._Str_707?t._Str_707:t.id,e)}_Str_587(t){}}class M{constructor(){this._Str_586=new Map,this._Str_1108(a.a.instance.time)}dispose(){if(this._Str_587("[dispose]"),this._Str_586){for(const t of this._Str_586.values())t&&t.dispose();this._Str_586.clear()}}_Str_2070(t){return this._Str_586.get(t.toString())||null}_Str_2168(t,e){this._Str_586.set(t.toString(),e)}_Str_1108(t){this._Str_1509=t}_Str_1815(){return this._Str_1509}_Str_587(t){}}class U{constructor(t){this._partList=t,this._images=new Map}dispose(){for(const t of this._images.values())t&&t.dispose();this._images=null}_Str_1699(){return this._partList}_Str_1629(t){return this._images.get(this._Str_2219(t))||null}_Str_1924(t,e){const s=this._Str_2219(e),i=this._images.get(s);i&&i.dispose(),this._images.set(s,t)}_Str_2219(t){let e="";for(const s of this._partList)e+=s._Str_1206(t)+"/";return e}_Str_587(t){}}class D{constructor(t,e,s,i,n,r=null){this._texture=t,this._container=r,this._rect=e,this._regPoint=s,this._flipH=i,this._color=n,i&&(this._regPoint.x=-this._regPoint.x+e.width)}dispose(){this._texture=null,this._regPoint=null,this._color=null}get texture(){return this._texture}get container(){return this._container}get rect(){return this._rect}get _Str_1076(){return this._regPoint}get flipH(){return this._flipH}get color(){return this._color}get _Str_1567(){return new f.k(-this._regPoint.x,-this._regPoint.y,this._rect.width,this._rect.height)}}let w=(()=>{class t{constructor(t,e,s,i){this._structure=t,this._avatar=e,this._assets=s,this._scale=i,this._cache=new Map,this._canvas=null,this._disposed=!1,this._unionImages=[],this._matrix=new f.i,this._serverRenderData=[]}dispose(){if(!this._disposed){if(this._structure=null,this._avatar=null,this._assets=null,this._canvas=null,this._disposed=!0,this._cache){for(const t of this._cache.values())t&&t.dispose();this._cache=null}if(this._unionImages){for(const t of this._unionImages)t&&t.dispose();this._unionImages=[]}}}_Str_1086(t=6e4){const e=a.a.instance.time;if(this._cache)for(const s of this._cache.values())s&&s._Str_2089(t,e)}_Str_741(t){if(this._cache)for(const e of this._cache.values())e&&e._Str_1565(t,0)}setDirection(t,e){const s=this._structure._Str_1695(t);if(s)for(const i of s){const t=this._Str_1050(i);t&&t.setDirection(e)}}_Str_1565(t,e){const s=this._structure._Str_2021(t,this._avatar);for(const i of s){const s=this._Str_1050(i);s&&s._Str_1565(t,e)}}_Str_2014(t){if(this._geometryType!==t){if(this._geometryType===A.SITTING&&t===A.VERTICAL||this._geometryType===A.VERTICAL&&t===A.SITTING||this._geometryType===A.SNOWWARS_HORIZONTAL&&(t=A.SNOWWARS_HORIZONTAL))return this._geometryType=t,void(this._canvas=null);this._Str_1086(0),this._geometryType=t,this._canvas=null}}_Str_1629(t,e,s=!1){let i=this._Str_1050(t);i||(i=new C,this._cache.set(t,i));let n=i.getDirection(),r=i._Str_2244(),a=e;r._Str_742._Str_812&&(a-=r._Str_664);let o=r,c=[],_=new Map;const h=new f.j;if(r&&r._Str_742&&r._Str_742._Str_861){let s=n;const i=this._structure._Str_720(r._Str_742.state+"."+r._Str_727),l=e-r._Str_664;if(i){const e=i._Str_607(l,t,r._Str_707);e&&(s=n+e.dd,e.dd<0?s<0?s=8+s:s>7&&(s=8-s):s<0?s+=8:s>7&&(s-=8),this._scale===y.a.LARGE?(h.x=e.dx,h.y=e.dy):(h.x=e.dx/2,h.y=e.dy/2),a=e._Str_891,e.action&&(r=e.action),e.type===b.BODYPART?(null!=e.action&&(o=e.action),n=s):e.type===b.FX&&(n=s),_=e.items),c=i._Str_652}}let l=i._Str_1961(o);l&&!s||(l=new M,i._Str_1765(o,l));let u=l._Str_2070(n);if(!u||s){const e=this._structure._Str_713(t,this._avatar.getFigure(),o,this._geometryType,n,c,this._avatar,_);u=new U(e),l._Str_2168(n,u)}let d=u._Str_1629(a);if(!d||s){const t=u._Str_1699();if(d=this._Str_1834(n,t,a,r,s),!d||s)return null;d._Str_1807&&u._Str_1924(d,a)}const g=this._structure._Str_1888(o,n,a,t);return h.x+=g.x,h.y+=g.y,d.offset=h,d}_Str_1009(){return this._serverRenderData=[],this._serverRenderData}_Str_1050(t){let e=this._cache.get(t);return e||(e=new C,this._cache.set(t,e)),e}_Str_1834(t,e,s,i,n=!1){if(!e||!e.length)return null;if(!this._canvas&&(this._canvas=this._structure._Str_1664(this._scale,this._geometryType),!this._canvas))return null;const r=T.a.DIRECTION_IS_FLIPPED[t]||!1;let a=i._Str_742._Str_778,o=!0,c=e.length-1;for(;c>=0;){const i=e[c];let _=16777215;if((7!=t||"fc"!==i._Str_1669&&"ey"!==i._Str_1669)&&("ri"!==i._Str_1669||i._Str_1502)){const e=i._Str_1502,c=i._Str_2258(s);let h=i._Str_1669,l=0;c?(l=c.number,c._Str_778&&""!==c._Str_778&&(a=c._Str_778)):l=i._Str_1674(s);let u=t,d=!1;r&&("wav"===a&&(h===O.a.LEFT_HAND||h===O.a.LEFT_SLEEVE||h===O.a.LEFT_COAT_SLEEVE)||"drk"===a&&(h===O.a.RIGHT_HAND||h===O.a.RIGHT_SLEEVE||h===O.a.RIGHT_COAT_SLEEVE)||"blw"===a&&h===O.a.RIGHT_HAND||"sig"===a&&h===O.a.LEFT_HAND||"respect"===a&&h===O.a.LEFT_HAND||h===O.a.RIGHT_HAND_ITEM||h===O.a.LEFT_HAND_ITEM||h===O.a.CHEST_PRINT?d=!0:(4===t?u=2:5===t?u=1:6===t&&(u=0),i._Str_1666!==h&&(h=i._Str_1666)));let g=this._scale+"_"+a+"_"+h+"_"+e+"_"+u+"_"+l,m=this._assets.getAsset(g);if(m||(g=this._scale+"_std_"+h+"_"+e+"_"+u+"_0",m=this._assets.getAsset(g)),m){const t=m.texture;if(t&&t.valid&&t.baseTexture){i.isColorable&&i.color&&(_=i.color._Str_915);const e=new f.j(-m.x,-m.y);if(d&&(e.x=e.x+(this._scale===y.a.LARGE?65:31)),n){const s=new R.a;s.name=this._assets._Str_2125(g),s.x=-e.x-33,s.y=-e.y,s.z=-1e-4*this._serverRenderData.length,s.width=m.rectangle.width,s.height=m.rectangle.height,s.flipH=d,"lay"===a&&(s.x=s.x+53),r&&(s.flipH=!s.flipH,s.x=s.flipH?-s.x-t.width:s.x+65),i.isColorable&&(s.color=""+_),this._serverRenderData.push(s)}this._unionImages.push(new D(t,m.rectangle,e,d,_))}else o=!1}}c--}if(!this._unionImages.length)return null;const _=this._Str_1236(this._unionImages,r),h=new f.j(-_._Str_1076.x,(this._scale===y.a.LARGE?this._canvas.height-16:this._canvas.height-8)-_._Str_1076.y);r&&"lay"!==a&&(h.x=h.x+(this._scale===y.a.LARGE?67:31));let l=this._unionImages.length-1;for(;l>=0;){const t=this._unionImages.pop();t&&t.dispose(),l--}return new v(_.container,h,o)}_Str_1652(t){let e=(255*t).toString(16);return e.length<2&&(e="0"+e),e}_Str_1236(t,e){const s=new f.k;for(const a of t)a&&s.enlarge(a._Str_1567);const i=new f.j(-s.x,-s.y),n=new f.d,r=new f.n(f.p.EMPTY);r.width=s.width,r.height=s.height,n.addChild(r);for(const a of t){if(!a)continue;const t=a.texture,s=a.color,r=!(e&&a.flipH)&&(e||a.flipH),o=i.clone();o.x-=a._Str_1076.x,o.y-=a._Str_1076.y,e&&(o.x=n.width-(o.x+a.rect.width)),r?(this._matrix.a=-1,this._matrix.tx=a.rect.x+a.rect.width+o.x,this._matrix.ty=o.y-a.rect.y):(this._matrix.a=1,this._matrix.tx=o.x-a.rect.x,this._matrix.ty=o.y-a.rect.y);const c=new f.n(t);c.tint=s,c.transform.setFromMatrix(this._matrix),n.addChild(c)}return new D(null,n.getLocalBounds(),i,e,null,n)}}return t._Str_2189=6e4,t})();var N=s("/PsI"),L=s("Kx+W");let x=(()=>{class t{constructor(e,s,i,n,r,a=null){this._frameCounter=0,this._directionOffset=0,this._isAnimating=!1,this._animationHasResetOnToggle=!1,this._actionsSorted=!1,this._fullImageCacheSize=5,this._isCachedImage=!1,this._useFullImageCache=!1,this._effectIdInUse=-1,this._cachedBodyPartsDirection=-1,this._cachedBodyPartsGeometryType=null,this._cachedBodyPartsAvatarSet=null,this._canvasOffsets=[],this._actions=[],this._cachedBodyParts=[],this._changes=!0,this._disposed=!1,this._effectManager=r,this._structure=e,this._assets=s,this._scale=n,this._effectListener=a,null==this._scale&&(this._scale=y.a.LARGE),null==i&&(i=new p("hr-893-45.hd-180-2.ch-210-66.lg-270-82.sh-300-91.wa-2007-.ri-1-")),this._figure=i,this._cache=new w(this._structure,this,this._assets,this._scale),this.setDirection(t.DEFAULT_AVATAR_SET,t.DEFAULT_DIRECTION),this._actions=[],this._defaultAction=new I(N.a.POSTURE_STAND),this._defaultAction._Str_742=this._structure._Str_1675(t.DEFAULT_ACTION),this.resetActions(),this._fullImageCache=new E.a,this._animationFrameCount=0}getServerRenderData(){return this.getAvatarPartsForCamera(L.a.FULL),this._cache._Str_1009()}dispose(){if(!this._disposed){if(this._structure=null,this._assets=null,this._mainAction=null,this._figure=null,this._avatarSpriteData=null,this._actions=null,this._image&&(this._image.destroy(),this._image=null),this._cache&&(this._cache.dispose(),this._cache=null),this._fullImageCache){for(const t of this._fullImageCache.getValues())t&&t.destroy();this._fullImageCache=null}this._image=null,this._canvasOffsets=null,this._disposed=!0}}get disposed(){return this._disposed}getFigure(){return this._figure}getScale(){return this._scale}getPartColor(t){return this._structure._Str_867(this._figure,t)}setDirection(t,e){(e+=this._directionOffset)<T.a.MIN_DIRECTION&&(e=T.a.MAX_DIRECTION+(e+1)),e>T.a.MAX_DIRECTION&&(e-=T.a.MAX_DIRECTION+1),this._structure._Str_1939(t)&&(this._mainDirection=e),t!==L.a.HEAD&&t!==L.a.FULL||(t===L.a.HEAD&&this.isHeadTurnPreventedByAction()&&(e=this._mainDirection),this._headDirection=e),this._cache.setDirection(t,e),this._changes=!0}setDirectionAngle(t,e){this.setDirection(t,Math.floor(e/45))}getSprites(){return this._sprites}getCanvasOffsets(){return this._canvasOffsets}getLayerData(t){return this._structure._Str_1881(t.animation.id,this._frameCounter,t.id)}updateAnimationByFrames(t=1){this._frameCounter+=t,this._changes=!0}resetAnimationFrameCounter(){this._frameCounter=0,this._changes=!0}getFullImageCacheKey(){if(!this._useFullImageCache)return null;if(1==this._sortedActions.length&&this._mainDirection==this._headDirection)return this._mainDirection+this._currentActionsString+this._frameCounter%4;if(2==this._sortedActions.length)for(const t of this._sortedActions){if("fx"==t._Str_695&&("33"==t._Str_727||"34"==t._Str_727||"35"==t._Str_727||"36"==t._Str_727))return this._mainDirection+this._currentActionsString+0;if("fx"==t._Str_695&&("38"==t._Str_727||"39"==t._Str_727))return this._mainDirection+"_"+this._headDirection+this._currentActionsString+this._frameCounter%11;if("dance"===t._Str_695&&("1"===t._Str_727||"2"===t._Str_727||"3"===t._Str_727||"4"===t._Str_727)){let e=this._frameCounter%8;return"3"===t._Str_727&&(e=this._frameCounter%10),"4"===t._Str_727&&(e=this._frameCounter%16),this._mainDirection+t._Str_695+t._Str_727+e}}return null}getBodyParts(t,e,s){return s==this._cachedBodyPartsDirection&&e==this._cachedBodyPartsGeometryType&&t==this._cachedBodyPartsAvatarSet||(this._cachedBodyPartsDirection=s,this._cachedBodyPartsGeometryType=e,this._cachedBodyPartsAvatarSet=t,this._cachedBodyParts=this._structure._Str_755(t,e,s)),this._cachedBodyParts}getAvatarPartsForCamera(t){let e;if(null==this._mainAction)return;if(null==this._structure._Str_1664(this._scale,this._mainAction._Str_742._Str_868))return;const s=this.getBodyParts(t,this._mainAction._Str_742._Str_868,this._mainDirection);let i=s.length-1;for(;i>=0;)e=s[i],this._cache._Str_1629(e,this._frameCounter,!0),i--}getImage(t,e,s=1,i=!0){if(!this._changes)return this._image;if(!this._mainAction)return null;this._actionsSorted||this.endActionAppends();const n=this._structure._Str_1664(this._scale,this._mainAction._Str_742._Str_868);if(!n)return null;!this._image||this._image.width===n.width&&this._image.height===n.height||(this._reusableTexture&&(this._reusableTexture.destroy(!0),this._reusableTexture=null),this._image=null,this._isCachedImage=!1);const r=this.getBodyParts(t,this._mainAction._Str_742._Str_868,this._mainDirection);this._image=null;const o=new f.d;let c=!0,_=r.length-1;for(;_>=0;){const t=this._cache._Str_1629(r[_],this._frameCounter);if(t){const e=t.image;if(!e)return o.destroy({children:!0}),null;c=c&&t._Str_1807;const s=t._Str_1076.clone();if(s){s.x+=n.offset.x,s.y+=n.offset.y,s.x+=n._Str_1076.x,s.y+=n._Str_1076.y;const t=new f.d;t.addChild(e),t&&(t.position.set(s.x,s.y),o.addChild(t))}}_--}return this._avatarSpriteData&&this._avatarSpriteData._Str_832&&this.convertToGrayscale(o),i?(this._reusableTexture?a.a.instance.renderer.render(o,this._reusableTexture,!0):this._reusableTexture=S.a.generateTexture(o,new f.k(0,0,n.width,n.height)),this._reusableTexture?(this._image=this._reusableTexture,this._changes=!1,this._image):null):S.a.generateTexture(o,new f.k(0,0,n.width,n.height))}getImageAsSprite(t,e=1){if(!this._mainAction)return null;this._actionsSorted||this.endActionAppends();const s=this._structure._Str_1664(this._scale,this._mainAction._Str_742._Str_868);if(!s)return null;const i=this.getBodyParts(t,this._mainAction._Str_742._Str_868,this._mainDirection),n=new f.n,r=new f.n(f.p.EMPTY);r.width=s.width,r.height=s.height,n.addChild(r);let a=i.length-1;for(;a>=0;){const t=this._cache._Str_1629(i[a],this._frameCounter);if(t){const e=t.image;if(!e)return n.destroy({children:!0}),null;const i=t._Str_1076.clone();if(i){i.x+=s.offset.x,i.y+=s.offset.y,i.x+=s._Str_1076.x,i.y+=s._Str_1076.y;const t=new f.d;t.addChild(e),t.position.set(i.x,i.y),n.addChild(t)}}a--}return n}getCroppedImage(t,e=1){if(!this._mainAction)return null;this._actionsSorted||this.endActionAppends();const s=this._structure._Str_1664(this._scale,this._mainAction._Str_742._Str_868);if(!s)return null;const i=this.getBodyParts(t,this._mainAction._Str_742._Str_868,this._mainDirection),n=new f.d,r=new f.n(f.p.EMPTY);r.width=s.width,r.height=s.height,n.addChild(r);let o=i.length-1;for(;o>=0;){const t=this._cache._Str_1629(i[o],this._frameCounter);if(t){const e=t.image;if(!e)return n.destroy({children:!0}),null;const i=t._Str_1076.clone();if(i){i.x+=s.offset.x,i.y+=s.offset.y,i.x+=s._Str_1076.x,i.y+=s._Str_1076.y;const t=new f.d;t.addChild(e),t&&(t.position.set(i.x,i.y),n.addChild(t))}}o--}return a.a.instance.renderer.extract.image(n)||null}getFullImage(t){const e=this._fullImageCache.getValue(t);return e?(e.valid||(this._fullImageCache.remove(t),e.destroy(!0)),e):null}cacheFullImage(t,e){const s=this._fullImageCache.getValue(t);if(s&&(this._fullImageCache.remove(t),s.destroy(!0)),this._fullImageCache.length===this._fullImageCacheSize){const t=this._fullImageCache.getKey(0);t&&this._fullImageCache.remove(t).destroy(!0)}this._fullImageCache.add(t,e)}getAsset(t){return this._assets.getAsset(t)}getDirection(){return this._mainDirection}initActionAppends(){this._actions=[],this._actionsSorted=!1,this._currentActionsString="",this._useFullImageCache=!1}endActionAppends(){if(this.sortActions()){for(const t of this._sortedActions)t._Str_695===N.a.EFFECT&&(this._effectManager.isAvatarEffectReady(parseInt(t._Str_727))||this._effectManager.downloadAvatarEffect(parseInt(t._Str_727),this));this.resetActions(),this.setActionsToParts()}}appendAction(t,...e){let s="";switch(this._actionsSorted=!1,e&&e.length>0&&(s=e[0]),null!=s&&(s=s.toString()),t){case N.a.POSTURE:switch(s){case N.a.POSTURE_LAY:this.setDirection(L.a.FULL,0==this._mainDirection?4:2);case N.a.POSTURE_WALK:case N.a.POSTURE_STAND:this._useFullImageCache=!0,this._useFullImageCache=!0;case N.a.POSTURE_SWIM:case N.a.POSTURE_FLOAT:case N.a.POSTURE_SIT:case N.a.SNOWWAR_RUN:case N.a.SNOWWAR_DIE_FRONT:case N.a.SNOWWAR_DIE_BACK:case N.a.SNOWWAR_PICK:case N.a.SNOWWAR_THROW:this.addActionData(s)}break;case N.a.GESTURE:switch(s){case N.a.GESTURE_AGGRAVATED:case N.a.GESTURE_SAD:case N.a.GESTURE_SMILE:case N.a.GESTURE_SURPRISED:this.addActionData(s)}break;case N.a.EFFECT:"33"!==s&&"34"!==s&&"35"!==s&&"36"!==s&&"38"!==s&&"39"!==s||(this._useFullImageCache=!0);case N.a.DANCE:case N.a.TALK:case N.a.EXPRESSION_WAVE:case N.a.SLEEP:case N.a.SIGN:case N.a.EXPRESSION_RESPECT:case N.a.EXPRESSION_BLOW_A_KISS:case N.a.EXPRESSION_LAUGH:case N.a.EXPRESSION_CRY:case N.a.EXPRESSION_IDLE:case N.a.EXPRESSION_SNOWBOARD_OLLIE:case N.a.EXPRESSION_SNOWBORD_360:case N.a.EXPRESSION_RIDE_JUMP:this.addActionData(t,s);break;case N.a.CARRY_OBJECT:case N.a.USE_OBJECT:{const e=this._structure._Str_2018(t);e&&(s=e._Str_1350(s)),this.addActionData(t,s);break}}return!0}addActionData(t,e=""){let s;this._actions||(this._actions=[]);let i=0;for(;i<this._actions.length;){if(s=this._actions[i],s._Str_695==t&&s._Str_727==e)return;i++}this._actions.push(new I(t,e,this._frameCounter))}isAnimating(){return this._isAnimating||this._animationFrameCount>1}resetActions(){return this._animationHasResetOnToggle=!1,this._isAnimating=!1,this._sprites=[],this._avatarSpriteData=null,this._directionOffset=0,this._structure._Str_2101(this),this._mainAction=this._defaultAction,this._mainAction._Str_742=this._defaultAction._Str_742,this.resetBodyPartCache(this._defaultAction),!0}isHeadTurnPreventedByAction(){let t,e;if(null==this._sortedActions)return!1;for(const s of this._sortedActions)t=this._structure._Str_2018(s._Str_695),null!=t&&t._Str_715(s._Str_727)&&(e=!0);return e}sortActions(){let t,e,s;if(this._currentActionsString="",this._sortedActions=this._structure._Str_711(this._actions),this._animationFrameCount=this._structure._Str_1936(this._sortedActions),this._sortedActions){this._canvasOffsets=this._structure._Str_781(this._sortedActions,this._scale,this._mainDirection);for(const s of this._sortedActions)if(this._currentActionsString=this._currentActionsString+(s._Str_695+s._Str_727),s._Str_695===N.a.EFFECT){const i=parseInt(s._Str_727);this._effectIdInUse!==i&&(t=!0),this._effectIdInUse=i,e=!0}e||(this._effectIdInUse>-1&&(t=!0),this._effectIdInUse=-1),t&&this._cache._Str_1086(0),this._lastActionsString!=this._currentActionsString&&(s=!0,this._lastActionsString=this._currentActionsString)}else this._canvasOffsets=[0,0,0],""!==this._lastActionsString&&(s=!0,this._lastActionsString="");return this._actionsSorted=!0,s}setActionsToParts(){if(null==!this._sortedActions)return;const t=a.a.instance.time,e=[];for(const s of this._sortedActions)e.push(s._Str_695);for(const s of this._sortedActions)if(s&&s._Str_742&&s._Str_742._Str_861){const t=this._structure._Str_720(s._Str_742.state+"."+s._Str_727);if(t&&t._Str_1892()){const i=t._Str_1571();if(i)for(const n of i)e.indexOf(n)>=0&&(s._Str_707=t._Str_707(n))}t&&t.resetOnToggle&&(this._animationHasResetOnToggle=!0)}for(const s of this._sortedActions)if(s&&s._Str_742&&(s._Str_742._Str_861&&""===s._Str_727&&(s._Str_727="1"),this.setActionToParts(s,t),s._Str_742._Str_861)){this._isAnimating=s._Str_742._Str_801(s._Str_727);const t=this._structure._Str_720(s._Str_742.state+"."+s._Str_727);t&&(this._sprites=this._sprites.concat(t._Str_786),t._Str_776()&&(this._directionOffset=t._Str_1493.offset),t._Str_872()&&(this._avatarSpriteData=t._Str_1475))}}setActionToParts(t,e){null!=t&&null!=t._Str_742&&""!=t._Str_742._Str_778&&(t._Str_742._Str_779&&(this._mainAction=t,this._cache._Str_2014(t._Str_742._Str_868)),this._cache._Str_1565(t,e),this._changes=!0)}resetBodyPartCache(t){t&&""!==t._Str_742._Str_778&&(t._Str_742._Str_779&&(this._mainAction=t,this._cache._Str_2014(t._Str_742._Str_868)),this._cache._Str_741(t),this._changes=!0)}get avatarSpriteData(){return this._avatarSpriteData}convertToGrayscale(e,s="CHANNELS_EQUAL"){let i=.33,n=.33,r=.33;switch(s){case t.CHANNELS_UNIQUE:i=.3,n=.59,r=.11;break;case t.CHANNELS_RED:i=1,n=0,r=0;break;case t.CHANNELS_GREEN:i=0,n=1,r=0;break;case t.CHANNELS_BLUE:i=0,n=0,r=1;break;case t.CHANNELS_DESATURATED:i=.3086,n=.6094,r=.082}const a=new f.r.ColorMatrixFilter;return a.matrix=[i,n,r,0,0,i,n,r,0,0,i,n,r,0,0,0,0,0,1,0],e.filters=[a],e}errorThis(t){}logThis(t){}isPlaceholder(){return!1}forceActionUpdate(){this._lastActionsString=""}get animationHasResetOnToggle(){return this._animationHasResetOnToggle}get mainAction(){return this._mainAction._Str_695}resetEffect(t){t===this._effectIdInUse&&(this.resetActions(),this.setActionsToParts(),this._animationHasResetOnToggle=!0,this._changes=!0,this._effectListener&&this._effectListener.resetEffect(t))}}return t.CHANNELS_EQUAL="CHANNELS_EQUAL",t.CHANNELS_UNIQUE="CHANNELS_UNIQUE",t.CHANNELS_RED="CHANNELS_RED",t.CHANNELS_GREEN="CHANNELS_GREEN",t.CHANNELS_BLUE="CHANNELS_BLUE",t.CHANNELS_DESATURATED="CHANNELS_DESATURATED",t.DEFAULT_ACTION="Default",t.DEFAULT_DIRECTION=2,t.DEFAULT_AVATAR_SET=L.a.FULL,t})();class P{constructor(t){this._id=parseInt(t.id),this._value=parseInt(t.id),this._prevents=t.prevents||[],this._preventHeadTurn=t.preventHeadTurn||!1,this._isAnimated=!0,void 0!==t.animated&&!1===t.animated&&(this._isAnimated=!1)}get id(){return this._id}get value(){return this._value}get prevents(){return this._prevents}get _Str_1891(){return this._preventHeadTurn}get _Str_801(){return this._isAnimated}}class F{constructor(t){if(this._id=t.id,this._state=t.state,this._precedence=t.precedence,this._activePartSet=t.activePartSet,this._assetPartDefinition=t.assetPartDefinition,this._lay=t.lay,this._geometryType=t.geometryType,this._isMain=t.main||!1,this._isDefault=t.isDefault||!1,this._isAnimation=t.animation||!1,this._startFromFrameZero=t.startFromFrameZero||!1,this._prevents=t.prevents||[],this._preventHeadTurn=t.preventHeadTurn||!1,this._types=new Map,this._params=new Map,this._defaultParameterValue="",this._canvasOffsets=null,t.params&&t.params.length>0)for(const e of t.params)e&&("default"===e.id?this._defaultParameterValue=e.value:this._params.set(e.id,e.value));if(t.types&&t.types.length>0)for(const e of t.types){if(!e)continue;const t=new P(e);this._types.set(t.id,t)}}_Str_772(t,e,s){this._canvasOffsets||(this._canvasOffsets=new Map);let i=this._canvasOffsets.get(t);i||(i=new Map,this._canvasOffsets.set(t,i)),i.set(e,s)}_Str_805(t,e){if(!this._canvasOffsets)return null;const s=this._canvasOffsets.get(t);return s?s.get(e):null}getType(t){return t&&this._types.get(parseInt(t))||null}_Str_1350(t){return t?this._params.get(t)||this._defaultParameterValue:""}_Str_733(t){return this._prevents.concat(this._Str_1889(t))}_Str_1889(t){if(!t)return[];const e=this._types.get(parseInt(t));return e?e.prevents:[]}_Str_715(t){if(!t)return this._preventHeadTurn;const e=this.getType(t);return e?e._Str_1891:this._preventHeadTurn}_Str_801(t){if(!t)return!0;const e=this.getType(t);return!e||e._Str_801}get id(){return this._id}get state(){return this._state}get precedence(){return this._precedence}get activePartSet(){return this._activePartSet}get _Str_778(){return this._assetPartDefinition}get lay(){return this._lay}get _Str_868(){return this._geometryType}get _Str_779(){return this._isMain}get _Str_804(){return this._isDefault}get _Str_861(){return this._isAnimation}get _Str_812(){return this._startFromFrameZero}get prevents(){return this._prevents}get preventHeadTurn(){return this._preventHeadTurn}get params(){return this._params}}class k{constructor(t,e){this._assets=t,this._actions=new Map,this._defaultAction=null,this._Str_1620(e)}_Str_1620(t){if(t){for(const e of t.actions){if(!e||!e.state)continue;const t=new F(e);this._actions.set(t.state,t)}t.actionOffsets&&this._Str_1767(t.actionOffsets)}}_Str_1767(t){if(t&&t.length)for(const e of t){const t=this._actions.get(e.action);if(t)for(const s of e.offsets){const e=s.size||"",i=s.direction;""!==e&&void 0!==i&&t._Str_772(e,i,[s.x||0,s.y||0,s.z||0])}}}_Str_1675(t){if(!t)return null;for(const e of this._actions.values())if(e&&e.id===t)return e;return null}_Str_2018(t){return this._actions.get(t)||null}_Str_1027(){if(this._defaultAction)return this._defaultAction;for(const t of this._actions.values())if(t&&t._Str_804)return this._defaultAction=t,t;return null}_Str_781(t,e,s){let i=[];for(const n of t){if(!n)continue;const t=this._actions.get(n._Str_695),r=t&&t._Str_805(e,s);r&&(i=r)}return i}_Str_711(t){if(!t)return null;t=this._Str_1247(t);const e=[];for(const s of t){if(!s)continue;const t=this._actions.get(s._Str_695);t&&(s._Str_742=t,e.push(s))}return e.sort(this.sortByPrecedence),e}_Str_1247(t){let e=[];const s=[];for(const i of t){if(!i)continue;const t=this._actions.get(i._Str_695);t&&(e=e.concat(t._Str_733(i._Str_727)))}for(const i of t){if(!i)continue;let t=i._Str_695;"fx"===i._Str_695&&(t=t+"."+i._Str_727),e.indexOf(t)>=0||s.push(i)}return s}sortByPrecedence(t,e){if(!t||!e)return 0;const s=t._Str_742.precedence,i=e._Str_742.precedence;return s<i?1:s>i?-1:0}}class W{constructor(t){this._id=t.id||"",this._align=t.align||"",this._base=t.base||"",this._ink=t.ink||0,this._blend=0;const e=t.blend;e&&e.length>0&&(this._blend=parseInt(e),this._blend>1&&(this._blend=this._blend/100))}get id(){return this._id}get align(){return this._align}get base(){return this._base}get ink(){return this._ink}get blend(){return this._blend}get _Str_1096(){return 1!==this._blend}}class V{constructor(t){this._ink=parseInt(t.ink);let e=t.foreground,s=t.background;e=e.replace("#",""),s=s.replace("#",""),this._foreGround=parseInt(e,16),this._backGround=parseInt(s,16),this._colorTransform=null,this._rgb=parseInt(e,16),this._r=this._rgb>>16&255,this._g=this._rgb>>8&255,this._b=this._rgb>>0&255,this._redMultiplier=this._r/255*1,this._greenMultiplier=this._g/255*1,this._blueMultiplier=this._b/255*1,this._alphaMultiplier=1,this._paletteIsGrayscale=!0,37===this._ink&&(this._alphaMultiplier=.5,this._paletteIsGrayscale=!1),this._colorMap=this._Str_1181(this._backGround,this._foreGround)}get ink(){return this._ink}get colorTransform(){return this._colorTransform}get reds(){return this._colorMap.get("reds")}get greens(){return this._colorMap.get("greens")}get blues(){return this._colorMap.get("blues")}get alphas(){return this._colorMap.get("alphas")}get _Str_832(){return this._paletteIsGrayscale}_Str_1181(t,e){const s=t>>24&255,i=t>>16&255,n=t>>8&255,r=t>>0&255,a=((e>>24&255)-s)/255,o=((e>>16&255)-i)/255,c=((e>>8&255)-n)/255,_=((e>>0&255)-r)/255,h=new Map,l=[],u=[],d=[],g=[];let m=s,p=i,f=n,E=r,S=0;for(;S<256;)p==i&&f==n&&E==r&&(m=0),m+=a,p+=o,f+=c,E+=_,g.push(m<<24),l.push(m<<24|p<<16|f<<8|E),u.push(m<<24|p<<16|f<<8|E),d.push(m<<24|p<<16|f<<8|E),S++;return h.set("alphas",l),h.set("reds",l),h.set("greens",u),h.set("blues",d),h}}class G{constructor(t){this._offset=parseInt(t.offset)}get offset(){return this._offset}}class H{constructor(t,e){this._animation=t,this._id=e.id,this._ink=e.ink,this._member=e.member,this._hasStaticY=!!e.staticY,this._hasDirections=!!e.directions,this._dx=[],this._dy=[],this._dz=[];const s=e.directionList;if(s&&s.length)for(const i of s){const t=i.id;void 0!==t&&(this._dx[t]=i.dx||0,this._dy[t]=i.dy||0,this._dz[t]=i.dz||0)}}_Str_809(t){return t<this._dx.length?this._dx[t]:0}_Str_739(t){return t<this._dy.length?this._dy[t]:0}_Str_839(t){return t<this._dz.length?this._dz[t]:0}get animation(){return this._animation}get id(){return this._id}get ink(){return this._ink}get member(){return this._member}get _Str_949(){return this._hasDirections}get _Str_767(){return this._hasStaticY}}let B=(()=>{class t{constructor(t,e){if(this._id=e.name,this._description=this._id,this._frames=[],this._spriteData=null,this._avatarData=null,this._directionData=null,this._removeData=null,this._addData=null,this._overriddenActions=null,this._overrideFrames=null,this._resetOnToggle=e.resetOnToggle||!1,e.sprites&&e.sprites.length){this._spriteData=[];for(const t of e.sprites)this._spriteData.push(new H(this,t))}if(e.avatars&&e.avatars.length&&(this._avatarData=new V(e.avatars[0])),e.directions&&e.directions.length&&(this._directionData=new G(e.directions[0])),e.removes&&e.removes.length){this._removeData=[];for(const t of e.removes)this._removeData.push(t.id)}if(e.adds&&e.adds.length){this._addData=[];for(const t of e.adds)this._addData.push(new W(t))}if(e.overrides&&e.overrides.length){this._overrideFrames=new Map,this._overriddenActions=new Map;for(const s of e.overrides){const e=s.name;this._overriddenActions.set(s.override,e);const i=[];this._Str_1031(i,s.frames,t),this._overrideFrames.set(e,i)}}this._Str_1031(this._frames,e.frames,t)}_Str_1031(t,e,s){if(e&&e.length)for(const i of e){let e=1;i.repeats&&i.repeats>1&&(e=i.repeats);let n=0;for(;n<e;){const e=[];if(i.bodyparts&&i.bodyparts.length)for(const t of i.bodyparts){const i=s._Str_1675(t.action),n=new b(t,b.BODYPART,i);e.push(n)}if(i.fxs&&i.fxs.length)for(const t of i.fxs){const i=s._Str_1675(t.action),n=new b(t,b.FX,i);e.push(n)}t.push(e),n++}}}_Str_2185(t=null){if(!t)return this._frames.length;if(this._overrideFrames){const e=this._overrideFrames.get(t);if(e)return e.length}return 0}_Str_1892(){return!!this._overriddenActions&&this._overriddenActions.size>0}_Str_1571(){if(!this._overriddenActions)return null;const t=[];for(const e of this._overriddenActions.keys())t.push(e);return t}_Str_707(t){return this._overriddenActions?this._overriddenActions.get(t):null}_Str_2259(t,e=null){t<0&&(t=0);let s=[];if(e){const i=this._overrideFrames.get(e);i&&i.length>0&&(s=i[t%i.length])}else this._frames.length>0&&(s=this._frames[t%this._frames.length]);return s}_Str_1065(t,e=null){const s=[];for(const i of this._Str_2259(t,e))if(i.type===b.BODYPART)s.push(i.id);else if(i.type===b.FX&&this._addData&&this._addData.length)for(const t of this._addData)t.id===i.id&&s.push(t.align);return s}_Str_607(t,e,s=null){for(const i of this._Str_2259(t,s)){if(i.id===e)return i;if(i.type===b.FX&&this._addData&&this._addData.length)for(const t of this._addData)if(t.align===e&&t.id===i.id)return i}return null}_Str_872(){return null!==this._avatarData}_Str_776(){return null!==this._directionData}_Str_706(){return null!==this._addData}_Str_1550(t){if(this._addData)for(const e of this._addData)if(e.id===t)return e;return null}get id(){return this._id}get _Str_786(){return this._spriteData||t._Str_2211}get _Str_1475(){return this._avatarData}get _Str_1493(){return this._directionData}get _Str_652(){return this._removeData||t._Str_2211}get _Str_687(){return this._addData||t._Str_2211}toString(){return this._description}get resetOnToggle(){return this._resetOnToggle}}return t._Str_2211=[],t})();class j{constructor(){this._animations=new Map}_Str_2061(t,e){const s=e[Object.keys(e)[0]],i=new B(t,s);return this._animations.set(s.name,i),!0}_Str_720(t){return this._animations.get(t)||null}_Str_607(t,e,s){const i=this._Str_720(t);return i?i._Str_607(e,s):null}get animations(){return this._animations}}class K{constructor(t){this._number=t.number,this._assetPartDefinition=t.assetPartDefinition||null}get number(){return this._number}get _Str_778(){return this._assetPartDefinition}}class z{constructor(t,e,s,i,n,r,a,o,c="",_=!1,h=1){this._bodyPartId=t,this._partType=e,this._partId=s,this._color=i,this._frames=n,this._action=r,this._isColorable=a,this._paletteMapId=o,this._flippedPartType=c,this._isBlendable=_,this._blendTransform=null,"ey"===this._partType&&(this._isColorable=!1)}_Str_1674(t){if(!this._frames||!this._frames.length)return 0;const e=t%this._frames.length;return this._frames[e]instanceof K?this._frames[e].number:e}_Str_2258(t){const e=t%this._frames.length;return this._frames&&this._frames.length>e&&this._frames[e]instanceof K?this._frames[e]:null}_Str_1206(t){const e=t%this._frames.length;if(this._frames&&this._frames.length>e&&this._frames[e]instanceof K){const t=this._frames[e];return this._Str_1502+":"+t._Str_778+":"+t.number}return this._Str_1502+":"+e}get _Str_1360(){return this._bodyPartId}get _Str_1669(){return this._partType}get _Str_1502(){return this._partId}get color(){return this._color}get action(){return this._action}get isColorable(){return this._isColorable}set isColorable(t){this._isColorable=t}get _Str_1406(){return this._paletteMapId}get _Str_1666(){return this._flippedPartType}get _Str_1184(){return this._isBlendable}toString(){return[this._bodyPartId,this._partType,this._partId].join(":")}}class Y{constructor(t,e){this._id=t.id,this._width=t.width,this._height=t.height,this._offset=new f.j(t.dx,t.dy),this._regPoint=new f.j(e==y.a.LARGE?(this._width-64)/2:(this._width-32)/2,0)}get width(){return this._width}get height(){return this._height}get offset(){return this._offset}get id(){return this._id}get _Str_1076(){return this._regPoint}}class X{constructor(t){if(this._id=t.id,this._isMain=t.main||!1,this._avatarSets=new Map,this._bodyParts=[],this._allBodyParts=[],t.avatarSets&&t.avatarSets.length>0)for(const s of t.avatarSets){if(!s)continue;const t=new X(s);this._avatarSets.set(t.id,t)}if(t.bodyParts&&t.bodyParts.length>0)for(const s of t.bodyParts)s&&this._bodyParts.push(s.id);let e=this._bodyParts.concat();for(const s of this._avatarSets.values())s&&(e=e.concat(s._Str_755()));this._allBodyParts=e}_Str_1498(t){if(t===this._id)return this;for(const e of this._avatarSets.values())if(e&&e._Str_1498(t))return e;return null}_Str_755(){return this._allBodyParts.concat()}get id(){return this._id}get _Str_779(){if(this._isMain)return!0;for(const t of this._avatarSets.values())if(t&&t._Str_779)return!0;return!1}}class Z{constructor(t=0,e=0,s=0){this._x=t,this._y=e,this._z=s}static _Str_2224(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}static _Str_1645(t,e){const s=new Z;return s.x=t.y*e.z-t.z*e.y,s.y=t.z*e.x-t.x*e.z,s.z=t.x*e.y-t.y*e.x,s}static subtract(t,e){return new Z(t.x-e.x,t.y-e.y,t.z-e.z)}_Str_2224(t){return this._x*t.x+this._y*t.y+this._z*t.z}_Str_1645(t){const e=new Z;return e.x=this._y*t.z-this._z*t.y,e.y=this._z*t.x-this._x*t.z,e.z=this._x*t.y-this._y*t.x,e}subtract(t){this._x=this._x-t.x,this._y=this._y-t.y,this._z=this._z-t.z}add(t){this._x=this._x+t.x,this._y=this._y+t.y,this._z=this._z+t.z}normalize(){const t=1/this.length();this._x=this._x*t,this._y=this._y*t,this._z=this._z*t}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z)}toString(){return"Vector3D: ("+this._x+","+this._y+","+this._z+")"}get x(){return this._x}set x(t){this._x=t}get y(){return this._y}set y(t){this._y=t}get z(){return this._z}set z(t){this._z=t}}class q{constructor(t,e,s){this._location=new Z(t,e,s),this._transformedLocation=new Z,this._needsTransformation=!1,0==t&&0==e&&0==s||(this._needsTransformation=!0)}get location(){return this._location}get _Str_1604(){return this._transformedLocation}_Str_1101(t){this._needsTransformation&&(this._transformedLocation=t._Str_2186(this._location))}}class Q extends q{constructor(t,e=!1){super(parseFloat(t.x),parseFloat(t.y),parseFloat(t.z)),this._id=t.id,this._radius=parseFloat(t.radius),this._normal=new Z(parseFloat(t.nx),parseFloat(t.ny),parseFloat(t.nz)),this._isDoubleSided=t.double||!1,this._isDynamic=e}_Str_1522(t){const e=Math.abs(t.z-this._Str_1604.z-this._radius),s=Math.abs(t.z-this._Str_1604.z+this._radius);return Math.min(e,s)}get id(){return this._id}get normal(){return this._normal}get _Str_2207(){return this._isDoubleSided}toString(){return this._id+": "+this.location+" - "+this._Str_1604}get _Str_1457(){return this._isDynamic}}class J extends q{constructor(t){if(super(parseFloat(t.x),parseFloat(t.y),parseFloat(t.z)),this._id=t.id,this._radius=parseFloat(t.radius),this._parts=new Map,this._dynamicParts=new Map,t.items&&t.items.length>0)for(const e of t.items){if(!e)continue;const t=new Q(e);this._parts.set(t.id,t)}}_Str_1883(t){const e=this._dynamicParts.get(t),s=[];if(e)for(const i in e){const t=e[i];t&&s.push(t)}return s}_Str_1456(t){const e=[];for(const s of this._parts.values())s&&e.push(s.id);if(t){const s=this._dynamicParts.get(t);if(s)for(const t in s){const i=s[t];i&&e.push(i.id)}}return e}_Str_2004(t){return this._dynamicParts.delete(t),!0}_Str_2020(t,e){if(this._Str_2030(t.id,e))return!1;let s=this._dynamicParts.get(e);return s||(s={},this._dynamicParts.set(e,s)),s[t.id]=new Q(t,!0),!0}_Str_2030(t,e){let s=this._parts.get(t)||null;return s||void 0===this._dynamicParts.get(e)||(s=this._dynamicParts.get(e)[t]||null),null!==s}_Str_713(t,e,s,i){const n=[];for(const o of this._parts.values())o&&(o._Str_1101(t),n.push([o._Str_1522(e),o]));const r=this._dynamicParts.get(i);if(r)for(const o in r){const s=r[o];s&&(s._Str_1101(t),n.push([s._Str_1522(e),s]))}n.sort((t,e)=>{const s=t[0],i=e[0];return s<i?-1:s>i?1:0});const a=[];for(const o of n)o&&a.push(o[1].id);return a}_Str_1522(t){const e=Math.abs(t.z-this._Str_1604.z-this._radius),s=Math.abs(t.z-this._Str_1604.z+this._radius);return Math.min(e,s)}get id(){return this._id}get radius(){return this._radius}}let $=(()=>{class t{constructor(t=0,e=0,s=0,i=0,n=0,r=0,a=0,o=0,c=0){this._data=[t,e,s,i,n,r,a,o,c]}static _Str_1869(e){const s=e*Math.PI/180,i=Math.cos(s),n=Math.sin(s);return new t(1,0,0,0,i,-n,0,n,i)}static _Str_1560(e){const s=e*Math.PI/180,i=Math.cos(s),n=Math.sin(s);return new t(i,0,n,0,1,0,-n,0,i)}static _Str_1368(e){const s=e*Math.PI/180,i=Math.cos(s),n=Math.sin(s);return new t(i,-n,0,n,i,0,0,0,1)}identity(){return this._data=[1,0,0,0,1,0,0,0,1],this}_Str_2186(t){return new Z(t.x*this._data[0]+t.y*this._data[3]+t.z*this._data[6],t.x*this._data[1]+t.y*this._data[4]+t.z*this._data[7],t.x*this._data[2]+t.y*this._data[5]+t.z*this._data[8])}_Str_1186(e){return new t(this._data[0]*e.data[0]+this._data[1]*e.data[3]+this._data[2]*e.data[6],this._data[0]*e.data[1]+this._data[1]*e.data[4]+this._data[2]*e.data[7],this._data[0]*e.data[2]+this._data[1]*e.data[5]+this._data[2]*e.data[8],this._data[3]*e.data[0]+this._data[4]*e.data[3]+this._data[5]*e.data[6],this._data[3]*e.data[1]+this._data[4]*e.data[4]+this._data[5]*e.data[7],this._data[3]*e.data[2]+this._data[4]*e.data[5]+this._data[5]*e.data[8],this._data[6]*e.data[0]+this._data[7]*e.data[3]+this._data[8]*e.data[6],this._data[6]*e.data[1]+this._data[7]*e.data[4]+this._data[8]*e.data[7],this._data[6]*e.data[2]+this._data[7]*e.data[5]+this._data[8]*e.data[8])}_Str_1157(t){let e=0;for(;e<this._data.length;)this._data[e]=this._data[e]*t,e++}_Str_1089(e){const s=e*Math.PI/180,i=Math.cos(s),n=Math.sin(s);return new t(1,0,0,0,i,-n,0,n,i)._Str_1186(this)}_Str_2123(e){const s=e*Math.PI/180,i=Math.cos(s),n=Math.sin(s);return new t(i,0,n,0,1,0,-n,0,i)._Str_1186(this)}_Str_2232(e){const s=e*Math.PI/180,i=Math.cos(s),n=Math.sin(s);return new t(i,-n,0,n,i,0,0,0,1)._Str_1186(this)}skew(){}_Str_1779(){return new t(this._data[0],this._data[3],this._data[6],this._data[1],this._data[4],this._data[7],this._data[2],this._data[5],this._data[8])}_Str_1451(t){return!1}get data(){return this._data}}return t.IDENTITY=new t(1,0,0,0,1,0,0,0,1),t.TOLERANS=1e-18,t})();class tt{constructor(t){this._camera=new Z(0,0,10),this._avatarSet=new X(t.avatarSets[0]),this._geometryTypes=new Map,this._itemIdToBodyPartMap=new Map,this._transformation=new $,this._canvases=new Map;const e=t.camera;if(e&&(this._camera.x=parseFloat(e.x),this._camera.y=parseFloat(e.y),this._camera.z=parseFloat(e.z)),t.canvases&&t.canvases.length>0)for(const s of t.canvases){if(!s)continue;const t=s.scale,e=new Map;if(s.geometries&&s.geometries.length>0)for(const i of s.geometries){if(!i)continue;const s=new Y(i,t);e.set(s.id,s)}this._canvases.set(t,e)}if(t.types&&t.types.length>0)for(const s of t.types){if(!s)continue;const t=new Map,e=new Map;if(s.bodyParts&&s.bodyParts.length>0)for(const i of s.bodyParts){if(!i)continue;const s=new J(i);t.set(s.id,s);for(const t of s._Str_1456(null))e.set(t,s)}this._geometryTypes.set(s.id,t),this._itemIdToBodyPartMap.set(s.id,e)}}_Str_2101(t){for(const e of this._geometryTypes.values())if(e)for(const s of e.values())s&&s._Str_2004(t)}_Str_1307(t){const e=this._avatarSet._Str_1498(t);return e?e._Str_755():[]}_Str_1939(t){const e=this._avatarSet._Str_1498(t);return!!e&&e._Str_779}_Str_1664(t,e){const s=this._canvases.get(t);return s&&s.get(e)||null}_Str_1342(t){return!!this._geometryTypes.get(t)}_Str_1332(t,e){if(this._Str_1342(t)){const s=this._geometryTypes.get(t);if(s&&s.get(e))return!0}return!1}_Str_2072(t){const e=this._Str_1280(t),s=[];if(e)for(const i of e.values())i&&s.push(i.id);return s}_Str_1280(t){return this._Str_1342(t)?this._geometryTypes.get(t):new Map}_Str_1919(t,e){return this._Str_1280(t).get(e)||null}_Str_1701(t,e,s){const i=this._itemIdToBodyPartMap.get(t);if(i){const n=i.get(e);if(n)return n;const r=this._Str_1280(t);if(r)for(const t of r.values())if(t&&t._Str_2030(e,s))return t}return null}_Str_1787(t,e){const s=this._Str_1307(e),i=[];for(const n of s){if(!n)continue;const e=t.get(n);e&&i.push(e)}return i}_Str_2250(t,e,s){if(!s)return[];const i=this._Str_1280(s),n=this._Str_1787(i,t),r=[],a=[];this._transformation=$._Str_1560(e);for(const o of n.values())o&&(o._Str_1101(this._transformation),r.push([o._Str_1522(this._camera),o]));r.sort((t,e)=>{const s=t[0],i=e[0];return s<i?-1:s>i?1:0});for(const o of r)o&&a.push(o[1].id);return a}_Str_713(t,e,s,i,n){if(this._Str_1332(t,e)){const r=this._Str_1280(t).get(e);return this._transformation=$._Str_1560(s),r._Str_713(this._transformation,this._camera,i,n)}return[]}}class et{constructor(t){if(this._frames=[],t.frames&&t.frames.length>0)for(const e of t.frames){if(!e)continue;this._frames.push(new K(e));let t=e.repeats||0;if(t>1)for(;--t>0;)this._frames.push(this._frames[this._frames.length-1])}}get frames(){return this._frames}}let st=(()=>{class t{constructor(t){if(this._id=t.id,this._actionParts=new Map,this._bodyPartOffsets=new Map,this._frameCount=0,this._frameIndexes=[],t.parts&&t.parts.length>0)for(const e of t.parts){if(!e)continue;const t=new et(e);this._actionParts.set(e.setType,t),this._frameCount=Math.max(this._frameCount,t.frames.length)}if(t.offsets&&t.offsets.frames&&t.offsets.frames.length>0)for(const e of t.offsets.frames){if(!e)continue;const t=e.id;this._frameCount=Math.max(this._frameCount,t);const s=new Map;if(this._bodyPartOffsets.set(t,s),e.directions&&e.directions.length>0)for(const i of e.directions){if(!i)continue;const t=i.id,e=new Map;if(s.set(t,e),i.bodyParts&&i.bodyParts.length>0)for(const s of i.bodyParts){if(!s)continue;let t=0,i=0;void 0!==s.dx&&(t=s.dx),void 0!==s.dy&&(i=s.dy),e.set(s.id,new f.j(t,i))}}if(this._frameIndexes.push(t),void 0!==e.repeats){let s=e.repeats||0;if(s>1)for(;--s>0;)this._frameIndexes.push(t)}}}_Str_989(t){return t&&this._actionParts.get(t)||null}_Str_1888(e,s,i){const n=this._bodyPartOffsets.get(this._frameIndexes[s%this._frameIndexes.length]);if(!n)return t._Str_1934;const r=n.get(e);return r&&r.get(i)||t._Str_1934}get id(){return this._id}get _Str_806(){return this._actionParts}get _Str_2185(){return this._frameCount}}return t._Str_1934=new f.j(0,0),t})();class it{constructor(){this._actions=new Map}parse(t){if(t&&t.length>0)for(const e of t){if(!e)continue;const t=new st(e);this._actions.set(t.id,t)}return!0}_Str_1017(t){for(const e of t.action)this._actions.set(e.id,new st(e));return!0}_Str_2244(t){return this._actions.get(t.id)||null}_Str_1408(t){const e=this._Str_2244(t);return e?e._Str_2185:0}}class nt{constructor(t){if(!t)throw new Error("invalid_data");this._id=parseInt(t.$.id),this._index=parseInt(t.$.index),this._clubLevel=parseInt(t.$.club),this._isSelectable=1===parseInt(t.$.selectable),this._rgb=parseInt("0x"+t._,16)}get id(){return this._id}get index(){return this._index}get clubLevel(){return this._clubLevel}get isSelectable(){return this._isSelectable}get _Str_915(){return this._rgb}}class rt{constructor(t){if(!t)throw new Error("invalid_data");this._id=parseInt(t.$.id),this._colors=new Map,this._Str_2015(t)}_Str_2015(t){for(const e of t.color){const t=new nt(e);this._colors.set(e.$.id.toString(),t)}}_Str_751(t){return void 0===t||t<0?null:this._colors.get(t.toString())||null}get id(){return this._id}get colors(){return this._colors}}class at{constructor(t){if(!t)throw new Error("invalid_data");this._id=parseInt(t.$.id),this._type=t.$.type,this._index=parseInt(t.$.index),this._colorLayerIndex=parseInt(t.$.colorindex);const e=t.$.palettemapid;this._paletteMapId=isNaN(e)?-1:parseInt(e);const s=t.$.palettemapid;this._breed=isNaN(s)?-1:parseInt(s)}dispose(){}get id(){return this._id}get type(){return this._type}get breed(){return this._breed}get index(){return this._index}get _Str_827(){return this._colorLayerIndex}get paletteMap(){return this._paletteMapId}}class ot{constructor(t,e){if(!t||!e)throw new Error("invalid_data");this._id=parseInt(e.$.id),this._type=t,this._gender=e.$.gender,this._clubLevel=parseInt(e.$.club),this._isColorable=1===parseInt(e.$.colorable),this._isSelectable=1===parseInt(e.$.selectable),this._parts=[],this._hiddenLayers=[],this._isPreSelectable=1===parseInt(e.$.preselectable),this._isSellable=1===parseInt(e.$.sellable);for(const s of e.part){const t=new at(s),e=this.getPartIndex(t);-1!==e?this._parts.splice(e,0,t):this._parts.push(t)}if(e.hiddenlayers){const t=e.hiddenlayers[0];for(const e of t.layer)this._hiddenLayers.push(e.$.parttype)}}dispose(){for(const t of this._parts)t.dispose();this._parts=null,this._hiddenLayers=null}getPartIndex(t){const e=this._parts.length;if(!e)return-1;for(let s=0;s<e;s++){const e=this._parts[s];if(e&&!(e.type!==t.type||e.index>t.index))return s}return-1}_Str_989(t,e){for(const s of this._parts)if(s.type===t&&s.id===e)return s;return null}get id(){return this._id}get type(){return this._type}get gender(){return this._gender}get clubLevel(){return this._clubLevel}get isColorable(){return this._isColorable}get _Str_608(){return this._isSelectable}get _Str_806(){return this._parts}get _Str_790(){return this._hiddenLayers}get _Str_653(){return this._isPreSelectable}get _Str_651(){return this._isSellable}}class ct{constructor(t){if(!t)throw new Error("invalid_data");this._type=t.$.type,this._paletteId=parseInt(t.$.paletteid),this._isMandatory={},this._isMandatory.F=[1===parseInt(t.$.mand_f_0),1===parseInt(t.$.mand_f_1)],this._isMandatory.M=[1===parseInt(t.$.mand_m_0),1===parseInt(t.$.mand_m_1)],this._partSets=new E.a,this._Str_2015(t)}dispose(){for(const t of this._partSets.getValues())t.dispose();this._partSets=null}_Str_1874(t){for(const e of t){const t=e.id,s=this._partSets.getValue(t);s&&(s.dispose(),this._partSets.remove(t))}}_Str_2015(t){if(t&&t.set)for(const e of t.set)this._partSets.add(e.$.id,new ot(this._type,e))}_Str_2264(t){for(const e of this._partSets.getValues())if(e&&0===e.clubLevel&&(e.gender===t||"U"===e.gender))return e;return null}_Str_1020(t){return this._partSets.getValue(t.toString())}get type(){return this._type}get _Str_734(){return this._paletteId}_Str_895(t,e){return this._isMandatory[t.toUpperCase()][Math.min(e,1)]}_Str_1002(t){return this._isMandatory[t.toUpperCase()].indexOf(!1)}get _Str_710(){return this._partSets}}class _t{constructor(){this._palettes=new Map,this._setTypes=new Map}dispose(){}parse(t){if(!t)return!1;for(const e of t.colors[0].palette){const t=new rt(e);t&&this._palettes.set(t.id.toString(),t)}for(const e of t.sets[0].settype){const t=new ct(e);t&&this._setTypes.set(t.type,t)}return!0}_Str_1133(t){for(const e of t.sets[0].settype){const t=this._setTypes.get(e.$.type);t?t._Str_1874(e):this._setTypes.set(e.$.type,new ct(e))}this._Str_1017(t)}_Str_1017(t){if(!t)return!1;for(const e of t.colors[0].palette){const t=e.$.id.toString(),s=this._palettes.get(t);s?s._Str_2015(e):this._palettes.set(t,new rt(e))}for(const e of t.sets[0].settype){const t=e.$.type,s=this._setTypes.get(t);s?s._Str_2015(e):this._setTypes.set(t,new ct(e))}return!1}_Str_1733(t,e){const s=[];for(const i of this._setTypes.values())i&&i._Str_895(t,e)&&s.push(i.type);return s}_Str_2264(t,e){const s=this._setTypes.get(t);return s?s._Str_2264(e):null}_Str_740(t){return this._setTypes.get(t)||null}_Str_783(t){return this._palettes.get(t.toString())||null}_Str_938(t){for(const e of this._setTypes.values()){const s=e._Str_1020(t);if(s)return s}return null}}class ht{constructor(t){if(this._id=t.id,this._parts=[],t.activeParts&&t.activeParts.length>0)for(const e of t.activeParts)e&&this._parts.push(e.setType)}get _Str_806(){return this._parts}}class lt{constructor(t){if(!t)throw new Error("invalid_data");this._setType=t.setType,this._flippedSetType=t.flippedSetType||null,this._removeSetType=t.removeSetType||null,this._appendToFigure=!1,this._staticId=-1}_Str_2234(){return this._staticId>=0}get _Str_1734(){return this._staticId}set _Str_1734(t){this._staticId=t}get _Str_2174(){return this._setType}get _Str_1693(){return this._flippedSetType}set _Str_1693(t){this._flippedSetType=t}get _Str_1209(){return this._removeSetType}get _Str_1583(){return this._appendToFigure}set _Str_1583(t){this._appendToFigure=t}}class ut{constructor(){this._parts=new Map,this._activePartSets=new Map}parse(t){if(t.partSet&&t.partSet.length>0)for(const e of t.partSet)e&&this._parts.set(e.setType,new lt(e));if(t.activePartSets&&t.activePartSets.length>0)for(const e of t.activePartSets)e&&this._activePartSets.set(e.id,new ht(e));return!0}_Str_1017(t){if(t.partSet&&t.partSet.length>0)for(const e of t.partSet)e&&this._parts.set(e.setType,new lt(e));if(t.activePartSets&&t.activePartSets.length>0)for(const e of t.activePartSets)e&&this._activePartSets.set(e.id,new ht(e));return!1}_Str_1795(t){const e=this._activePartSets.get(t.activePartSet);return e?e._Str_806:[]}_Str_1102(t){return this._parts.get(t)||null}_Str_1520(t){const e=t.setType;let s=this._parts.get(e);return s||(s=new lt(t),this._parts.set(e,s)),s}_Str_1113(t){return this._activePartSets.get(t.activePartSet)||null}get _Str_806(){return this._parts}get _Str_1979(){return this._activePartSets}}class dt extends l.a{constructor(t){super(),this._renderManager=t,this._geometry=null,this._figureData=new _t,this._partSetsData=new ut,this._animationData=new it,this._animationManager=new j,this._mandatorySetTypeIds={},this._actionManager=null,this._defaultAction=null}init(){}dispose(){this.disposed||(super.dispose(),this._renderManager=null,this._figureData=null,this._partSetsData=null,this._animationData=null,this._mandatorySetTypeIds=null)}_Str_1825(t){t&&(this._geometry=new tt(t))}_Str_1060(t,e){e&&(this._actionManager=new k(t,e),this._defaultAction=this._actionManager._Str_1027())}_Str_1620(t){this._actionManager._Str_1620(t),this._defaultAction=this._actionManager._Str_1027()}_Str_1296(t){return!!t&&!!this._partSetsData.parse(t)&&(this._partSetsData._Str_1102("ri")._Str_1583=!0,this._partSetsData._Str_1102("li")._Str_1583=!0,!0)}_Str_2229(t){return!!t&&this._animationData.parse(t)}_Str_1569(t){return!!t&&this._figureData.parse(t)}_Str_882(t){this._figureData._Str_1133(t)}_Str_1849(t,e="fx",s=200){let i=0;for(;i<s;){const s=t.getCollection(e+i);s&&this._animationManager._Str_2061(this,s.data),i++}}_Str_2061(t){this._animationManager._Str_2061(this,t)}_Str_867(t,e,s=0){const i=t._Str_815(e);if(!i||i.length<s)return null;const n=this._figureData._Str_740(e);if(null==n)return null;const r=this._figureData._Str_783(n._Str_734);return r?r._Str_751(i[s]):null}_Str_1881(t,e,s){return this._animationManager._Str_607(t,e,s)}_Str_720(t){return this._animationManager._Str_720(t)}_Str_1675(t){return this._actionManager._Str_1675(t)}_Str_2018(t){return this._actionManager._Str_2018(t)}_Str_1939(t){return this._geometry._Str_1939(t)}_Str_711(t){return this._actionManager._Str_711(t)}_Str_1936(t){let e=0;for(const s of t)e=Math.max(e,this._animationData._Str_1408(s._Str_742));return e}_Str_1733(t,e){return this._mandatorySetTypeIds[t]||(this._mandatorySetTypeIds[t]=[]),this._mandatorySetTypeIds[t][e]||(this._mandatorySetTypeIds[t][e]=this._figureData._Str_1733(t,e)),this._mandatorySetTypeIds[t][e]}_Str_2264(t,e){return this._figureData._Str_2264(t,e)}_Str_781(t,e,s){return this._actionManager._Str_781(t,e,s)}_Str_1664(t,e){return this._geometry._Str_1664(t,e)}_Str_2101(t){this._geometry._Str_2101(t)}_Str_2021(t,e){let s=[];const i=[],n=t._Str_742._Str_868;if(t._Str_742._Str_861){const r=this._animationManager._Str_720(t._Str_742.state+"."+t._Str_727);if(r&&(s=r._Str_1065(0,t._Str_707),r._Str_706())){const t={id:"",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:1},s={setType:""};for(const a of r._Str_687){const r=this._geometry._Str_1919(n,a.align);if(r){t.id=a.id,r._Str_2020(t,e),s.setType=a.id;const n=this._partSetsData._Str_1520(s);n._Str_1583=!0,""===a.base&&(n._Str_1734=1),-1===i.indexOf(r.id)&&i.push(r.id)}}}for(const t of s){const e=this._geometry._Str_1919(n,t);e&&-1===i.indexOf(e.id)&&i.push(e.id)}}else{s=this._partSetsData._Str_1795(t._Str_742);for(const t of s){const s=this._geometry._Str_1701(n,t,e);s&&-1===i.indexOf(s.id)&&i.push(s.id)}}return i}_Str_1695(t){return this._geometry._Str_1307(t)}_Str_755(t,e,s){return this._geometry._Str_2250(t,T.a.DIRECTION_TO_ANGLE[s],e)}_Str_1888(t,e,s,i){const n=this._animationData._Str_2244(t._Str_742);return n?n._Str_1888(e,s,i):st._Str_1934}_Str_713(t,e,s,i,n,r,a,o=null){let c=null,_=[],h=null;if(null==!s)return[];const l=this._partSetsData._Str_1795(s._Str_742),u=[];let d=[0];const g=this._animationData._Str_2244(s._Str_742);if(s._Str_742._Str_861){const e=this._animationManager._Str_720(s._Str_742.state+"."+s._Str_727);if(e){d=this._Str_1768(e._Str_2185(s._Str_707));for(const n of e._Str_1065(0,s._Str_707))if(n===t){const t=this._geometry._Str_1919(i,n);if(t)for(const e of t._Str_1883(a))l.push(e.id)}}}const m=this._geometry._Str_713(i,t,n,l,a),p=e._Str_1016();for(const E of p){if(o&&o.get(E))continue;const i=e.getPartSetId(E),n=e._Str_815(E),a=this._figureData._Str_740(E);if(a){const e=this._figureData._Str_783(a._Str_734);if(e){const o=a._Str_1020(i);if(o){r=r.concat(o._Str_790);for(const i of o._Str_806)if(m.indexOf(i.type)>-1){if(g){const t=g._Str_989(i.type);_=t?t.frames:d}else _=d;c=s._Str_742,-1===l.indexOf(i.type)&&(c=this._defaultAction);const r=this._partSetsData._Str_1102(i.type);let a=r?r._Str_1693:i.type;a&&""!==a||(a=i.type),n&&n.length>i._Str_827-1&&(h=e._Str_751(n[i._Str_827-1]));const o=i._Str_827>0,m=new z(t,i.type,i.id.toString(),h,_,c,o,i.paletteMap,a);u.push(m)}}}}}const f=[];for(const E of m){let e=null,n=!1;const c=o&&o.get(E);for(const t of u)t._Str_1669===E&&(c?e=t.color:(n=!0,-1===r.indexOf(E)&&f.push(t)));if(!n)if(c){const i=o.get(E);let n=0,r=0;for(;r<i.length;)n+=i.charCodeAt(r),r++;if(g){const t=g._Str_989(E);_=t?t.frames:d}else _=d;const a=new z(t,E,i,e,_,s._Str_742,!(null==e),-1,E,!1,1);f.push(a)}else if(l.indexOf(E)>-1)if(t!==this._geometry._Str_1701(i,E,a).id);else{const e=this._partSetsData._Str_1102(E);let i=!1,n=1;if(e._Str_1583){let r="1";if(""!==s._Str_727&&(r=s._Str_727),e._Str_2234()&&(r=e._Str_1734.toString()),g){const t=g._Str_989(E);_=t?t.frames:d}else _=d;const a=new z(t,E,r,null,_,s._Str_742,!1,-1,E,i,n);f.push(a)}}}return f}_Str_1768(t){const e=[];let s=0;for(;s<t;)e.push(s),s++;return e}_Str_672(){if(this._actionManager){const t=this._actionManager._Str_1675("CarryItem").params,e=[];for(const s of t.values())e.push(s);return e}return[]}get renderManager(){return this._renderManager}get figureData(){return this._figureData}get partData(){return this._partSetsData}get animationManager(){return this._animationManager}}var gt=s("yp5t"),mt=s("JY8D"),pt=s("LPTP");let ft=(()=>{class t extends r.a{constructor(t,e){super(t),this._library=e}get library(){return this._library}}return t.DOWNLOAD_COMPLETE="ARELE_DOWNLOAD_COMPLETE",t})(),Et=(()=>{class t extends l.a{constructor(e,s,i,n){super(),this._state=t.NOT_LOADED,this._libraryName=e,this._revision=s,this._downloadUrl=n,this._assets=i,this._animation=null,this._downloadUrl=this._downloadUrl.replace(/%libname%/gi,this._libraryName),this._downloadUrl=this._downloadUrl.replace(/%revision%/gi,this._revision),this._assets.getCollection(this._libraryName)&&(this._state=t.LOADED)}downloadAsset(){if(this._assets&&this._state!==t.LOADING&&this._state!==t.LOADED)return this._assets.getCollection(this._libraryName)?(this._state=t.LOADED,void this.dispatchEvent(new ft(ft.DOWNLOAD_COMPLETE,this))):(this._state=t.LOADING,void this._assets.downloadAsset(this._downloadUrl,e=>{if(e){this._state=t.LOADED;const e=this._assets.getCollection(this._libraryName);e&&(this._animation=e.data.animations),this.dispatchEvent(new ft(ft.DOWNLOAD_COMPLETE,this))}}))}get libraryName(){return this._libraryName}get animation(){return this._animation}get isLoaded(){return this._state===t.LOADED}}return t.DOWNLOAD_COMPLETE="EADL_DOWNLOAD_COMPLETE",t.NOT_LOADED=0,t.LOADING=1,t.LOADED=2,t})(),St=(()=>{class t extends l.a{constructor(t,e){super(),this._assets=t,this._structure=e,this._missingMandatoryLibs=a.a.instance.getConfiguration("avatar.mandatory.effect.libraries"),this._effectMap=new Map,this._effectListeners=new Map,this._incompleteEffects=new Map,this._initDownloadBuffer=[],this._pendingDownloadQueue=[],this._currentDownloads=[],this._libraryNames=[],this._isReady=!1,this.onLibraryLoaded=this.onLibraryLoaded.bind(this),this.onAvatarRenderReady=this.onAvatarRenderReady.bind(this),this.loadEffectMap(),this._structure.renderManager.events.addEventListener(g.a.AVATAR_RENDER_READY,this.onAvatarRenderReady)}loadEffectMap(){const e=new XMLHttpRequest;try{e.open("GET",a.a.instance.getConfiguration("avatar.effectmap.url")),e.send(),e.onloadend=s=>{if(e.responseText){const s=JSON.parse(e.responseText);this.processEffectMap(s.effects),this.processMissingLibraries(),this._isReady=!0,this.dispatchEvent(new r.a(t.DOWNLOADER_READY))}},e.onerror=t=>{throw new Error("invalid_avatar_effect_map")}}catch(s){h.a.log(s)}}processEffectMap(t){if(t)for(const e of t){if(!e)continue;const t=e.id,s=e.lib,i=e.revision||"";if(this._libraryNames.indexOf(s)>=0)continue;this._libraryNames.push(s);const n=new Et(s,i,this._assets,a.a.instance.getConfiguration("avatar.asset.effect.url"));n.addEventListener(ft.DOWNLOAD_COMPLETE,this.onLibraryLoaded);let r=this._effectMap.get(t);r||(r=[]),r.push(n),this._effectMap.set(t,r)}}downloadAvatarEffect(t,e){if(!this._isReady||!this._structure.renderManager.isReady)return void this._initDownloadBuffer.push([t,e]);const s=this.getAvatarEffectPendingLibraries(t);if(s&&s.length){if(e&&!e.disposed){let s=this._effectListeners.get(t.toString());s||(s=[]),s.push(e),this._effectListeners.set(t.toString(),s)}this._incompleteEffects.set(t.toString(),s);for(const t of s)t&&this.downloadLibrary(t)}else e&&!e.disposed&&e.resetEffect(t)}onAvatarRenderReady(t){if(t){for(const[t,e]of this._initDownloadBuffer)this.downloadAvatarEffect(t,e);this._initDownloadBuffer=[]}}onLibraryLoaded(e){if(!e||!e.library)return;const s=[];this._structure._Str_2061(e.library.animation);for(const[n,a]of this._incompleteEffects.entries()){let e=!0;for(const t of a)if(t&&!t.isLoaded){e=!1;break}if(e){s.push(n);const e=this._effectListeners.get(n);for(const t of e)t&&!t.disposed&&t.resetEffect(parseInt(n));this._effectListeners.delete(n),this.dispatchEvent(new r.a(t.LIBRARY_LOADED))}}for(const t of s)this._incompleteEffects.delete(t);let i=0;for(;i<this._currentDownloads.length;){const t=this._currentDownloads[i];t&&t.libraryName===e.library.libraryName&&this._currentDownloads.splice(i,1),i++}}processMissingLibraries(){const t=this._missingMandatoryLibs.slice();for(const e of t){if(!e)continue;const t=this._effectMap.get(e);if(t)for(const e of t)e&&this.downloadLibrary(e)}}isAvatarEffectReady(t){return!(!this._isReady||!this._structure.renderManager.isReady||this.getAvatarEffectPendingLibraries(t).length)}getAvatarEffectPendingLibraries(t){const e=[];if(!this._structure)return e;const s=this._effectMap.get(t.toString());if(s)for(const i of s)i&&!i.isLoaded&&-1===e.indexOf(i)&&e.push(i);return e}downloadLibrary(t){t&&!t.isLoaded&&(this._pendingDownloadQueue.indexOf(t)>=0||this._currentDownloads.indexOf(t)>=0||(this._pendingDownloadQueue.push(t),this.processDownloadQueue()))}processDownloadQueue(){for(;this._pendingDownloadQueue.length;)this._pendingDownloadQueue[0].downloadAsset(),this._currentDownloads.push(this._pendingDownloadQueue.shift())}}return t.DOWNLOADER_READY="EADM_DOWNLOADER_READY",t.LIBRARY_LOADED="EADM_LIBRARY_LOADED",t.MAX_DOWNLOADS=2,t})();class It extends x{constructor(t,e,s,i,n){super(t,e,s,i,n,null)}isPlaceholder(){return!0}}let Rt=(()=>{class t extends l.a{constructor(t,e){super(),this._dataReceiver=e,this.download(t)}download(e){const s=new XMLHttpRequest;try{s.open("GET",e),s.send(),s.onloadend=e=>{(new i.Parser).parseString(s.responseText,(e,s)=>{if(e||!s||!s.figuredata)throw new Error("invalid_figure_data");this._dataReceiver&&this._dataReceiver._Str_1017(s.figuredata),this.dispatchEvent(new r.a(t.AVATAR_STRUCTURE_DONE))})},s.onerror=t=>{throw new Error("invalid_avatar_figure_data")}}catch(n){h.a.log(n)}}}return t.AVATAR_STRUCTURE_DONE="AVATAR_STRUCTURE_DONE",t})(),bt=(()=>{class t extends n.a{constructor(){super(),this._structure=null,this._avatarAssetDownloadManager=null,this._placeHolderFigure=null,this._figureMapReady=!1,this._effectMapReady=!1,this._actionsReady=!1,this._geometryReady=!1,this._partSetsReady=!1,this._animationsReady=!1,this._isReady=!1,this.onAvatarAssetDownloaderReady=this.onAvatarAssetDownloaderReady.bind(this),this.onAvatarAssetDownloaded=this.onAvatarAssetDownloaded.bind(this),this.onEffectAssetDownloaderReady=this.onEffectAssetDownloaderReady.bind(this),this.onEffectAssetDownloaded=this.onEffectAssetDownloaded.bind(this),this.onAvatarStructureDownloadDone=this.onAvatarStructureDownloadDone.bind(this)}onInit(){this._structure=new dt(this),this.loadGeometry(),this.loadPartSets(),this.loadActions(),this.loadAnimations(),this.loadFigureData(),this._aliasCollection=new _(this,a.a.instance.core.asset),this._aliasCollection.init(),this._avatarAssetDownloadManager||(this._avatarAssetDownloadManager=new m(a.a.instance.core.asset,this._structure),this._avatarAssetDownloadManager.addEventListener(m.DOWNLOADER_READY,this.onAvatarAssetDownloaderReady),this._avatarAssetDownloadManager.addEventListener(m.LIBRARY_LOADED,this.onAvatarAssetDownloaded)),this._effectAssetDownloadManager||(this._effectAssetDownloadManager=new St(a.a.instance.core.asset,this._structure),this._effectAssetDownloadManager.addEventListener(St.DOWNLOADER_READY,this.onEffectAssetDownloaderReady),this._effectAssetDownloadManager.addEventListener(St.LIBRARY_LOADED,this.onEffectAssetDownloaded)),this.checkReady()}onDispose(){this._avatarAssetDownloadManager&&(this._avatarAssetDownloadManager.removeEventListener(m.DOWNLOADER_READY,this.onAvatarAssetDownloaderReady),this._avatarAssetDownloadManager.removeEventListener(m.LIBRARY_LOADED,this.onAvatarAssetDownloaded)),this._effectAssetDownloadManager&&(this._effectAssetDownloadManager.removeEventListener(St.DOWNLOADER_READY,this.onEffectAssetDownloaderReady),this._effectAssetDownloadManager.removeEventListener(St.LIBRARY_LOADED,this.onEffectAssetDownloaded))}loadGeometry(){this._structure&&(this._structure._Str_1825(mt.a),this._geometryReady=!0,this.checkReady())}loadPartSets(){this._structure&&(this._structure._Str_1296(pt.a),this._partSetsReady=!0,this.checkReady())}loadActions(){const t=a.a.instance.getConfiguration("avatar.default.actions");t&&this._structure._Str_1060(a.a.instance.core.asset,t);const e=new XMLHttpRequest;try{e.open("GET",a.a.instance.getConfiguration("avatar.actions.url")),e.send(),e.onloadend=t=>{this._structure&&(this._structure._Str_1620(JSON.parse(e.responseText)),this._actionsReady=!0,this.checkReady())},e.onerror=t=>{throw new Error("invalid_avatar_actions")}}catch(s){this.logger.error(s)}}loadAnimations(){this._structure&&(this._structure._Str_2229(gt.a),this._animationsReady=!0,this.checkReady())}loadFigureData(){const t=a.a.instance.getConfiguration("avatar.default.figuredata");t&&(new i.Parser).parseString(t,(t,e)=>{if(t||!e||!e.figuredata)throw new Error("invalid_default_figure_data");this._structure&&this._structure._Str_1569(e.figuredata)}),new Rt(a.a.instance.getConfiguration("avatar.figuredata.url"),this._structure.figureData).addEventListener(Rt.AVATAR_STRUCTURE_DONE,this.onAvatarStructureDownloadDone)}onAvatarStructureDownloadDone(t){this._structureReady=!0,this._structure.init(),this.checkReady()}onAvatarAssetDownloaderReady(t){t&&(this._figureMapReady=!0,this.checkReady())}onAvatarAssetDownloaded(t){t&&this._aliasCollection.reset()}onEffectAssetDownloaderReady(t){t&&(this._effectMapReady=!0,this.checkReady())}onEffectAssetDownloaded(t){t&&this._aliasCollection.reset()}checkReady(){this._isReady||this._geometryReady&&this._partSetsReady&&this._actionsReady&&this._animationsReady&&this._figureMapReady&&this._effectMapReady&&this._structureReady&&(this._isReady=!0,this.events&&this.events.dispatchEvent(new r.a(g.a.AVATAR_RENDER_READY)))}createFigureContainer(t){return new p(t)}isFigureContainerReady(t){return!!this._avatarAssetDownloadManager&&this._avatarAssetDownloadManager.isAvatarFigureContainerReady(t)}createAvatarImage(e,s,i,n=null,r=null){if(!this._structure||!this._avatarAssetDownloadManager)return null;const a=new p(e);return i&&this.validateAvatarFigure(a,i),this._avatarAssetDownloadManager.isAvatarFigureContainerReady(a)?new x(this._structure,this._aliasCollection,a,s,this._effectAssetDownloadManager,r):(this._placeHolderFigure||(this._placeHolderFigure=new p(t.DEFAULT_FIGURE)),this._avatarAssetDownloadManager.downloadAvatarFigure(a,n),new It(this._structure,this._aliasCollection,this._placeHolderFigure,s,this._effectAssetDownloadManager))}downloadAvatarFigure(t,e){this._avatarAssetDownloadManager&&this._avatarAssetDownloadManager.downloadAvatarFigure(t,e)}validateAvatarFigure(t,e){let s=!1;const i=this._structure._Str_1733(e,2);if(i){const n=this._structure.figureData;for(const r of i)if(t._Str_744(r)){const i=n._Str_740(r);if(i&&!i._Str_1020(t.getPartSetId(r))){const i=this._structure._Str_2264(r,e);i&&(t._Str_830(r,i.id,[0]),s=!0)}}else{const i=this._structure._Str_2264(r,e);i&&(t._Str_830(r,i.id,[0]),s=!0)}}return!s}isValidFigureSetForGender(t,e){const s=this.structureData._Str_938(t);return!(!s||"U"!==s.gender.toUpperCase()&&s.gender.toUpperCase()!==e.toUpperCase())}getFigureStringWithFigureIds(t,e,s){const i=new o;i._Str_2153(t,e);const n=this._Str_1667(s);for(const r of n)i._Str_2088(r.type,r.id,i.getColourIds(r.type));return i._Str_1008()}_Str_1667(t){const e=this.structureData,s=[];for(const i of t){const t=e._Str_938(i);t&&s.push(t)}return s}_Str_838(t,e){return this._structure?this._structure._Str_1733(t,e):null}getAssetByName(t){return this._aliasCollection.getAsset(t)}get assets(){return a.a.instance.core.asset}get isReady(){return this._isReady}get structure(){return this._structure}get structureData(){return this._structure?this._structure.figureData:null}get downloadManager(){return this._avatarAssetDownloadManager}}return t.DEFAULT_FIGURE="hd-99999-99999",t})()},"Xr/m":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._isDisposed=!1,this._isDisposing=!1}dispose(){this._isDisposed||this._isDisposing||(this._isDisposing=!0,this.onDispose(),this._isDisposed=!0,this._isDisposing=!1)}onDispose(){}get disposed(){return this._isDisposed}get isDisposing(){return this._isDisposing}}},XxiA:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("nL9H");class n extends i.a{constructor(t){super(t),this._type=t.readInt()}get type(){return this._type}get code(){return this._type}}},YN1x:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("5+UO"),n=s("jfHZ"),r=s("ndLt");class a{flush(){return this._categories=[],this._removedFriendIds=[],this._addedFriends=[],this._updatedFriends=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._categories.push(new n.a(t)),e--;let s=t.readInt();for(;s>0;){const e=t.readInt();-1===e?this._removedFriendIds.push(t.readInt()):0===e?this._updatedFriends.push(new r.a(t)):1===e&&this._addedFriends.push(new r.a(t)),s--}return!0}get categories(){return this._categories}get removedFriendIds(){return this._removedFriendIds}get addedFriends(){return this._addedFriends}get updatedFriends(){return this._updatedFriends}}class o extends i.a{constructor(t){super(t,a)}getParser(){return this.parser}}},YQyq:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},YTIQ:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},YaSm:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._errorCode=0,this._failedRecipients=[],!0}parse(t){if(!t)return!1;this._errorCode=t.readInt();let e=t.readInt();for(;e>0;)this._failedRecipients.push(t.readInt()),e--;return!0}get errorCode(){return this._errorCode}get failedRecipients(){return this._failedRecipients}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},YlMy:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},Yp13:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i,n){this._data=[t,e.length,...e,s,i.length,...i,n]}getMessageArray(){return this._data}dispose(){}}},"Yx/o":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._unitId=null,this._expression=0,!0}parse(t){return!!t&&(this._unitId=t.readInt(),this._expression=t.readInt(),!0)}get unitId(){return this._unitId}get expression(){return this._expression}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},Z0XG:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("Ns5P");let n=(()=>{class t extends i.a{constructor(t,e,s,i,n,r=0,a=null,o=-1){super(t,e),this._objectId=s,this._message=i,this._chatType=n,this._links=a,this._extraParam=o,this._style=r}get objectId(){return this._objectId}get message(){return this._message}get chatType(){return this._chatType}get links(){return this._links}get extraParam(){return this._extraParam}get style(){return this._style}}return t.CHAT_EVENT="RSCE_CHAT_EVENT",t.FLOOD_EVENT="RSCE_FLOOD_EVENT",t.CHAT_NORMAL=0,t.CHAT_WHISPER=1,t.CHAT_SHOUT=2,t._Str_5821=3,t._Str_6081=4,t._Str_8971=5,t._Str_5958=6,t._Str_6065=7,t._Str_5998=8,t._Str_5904=9,t._Str_8909=10,t})()},ZLse:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{constructor(t){if(this._unseen=0,!t)throw new Error("invalid_parser");this._achievementId=t.readInt(),this._level=t.readInt(),this._badgeId=t.readString(),this._Str_6791=t.readInt(),this._Str_18274=Math.max(1,t.readInt()),this._Str_10280=t.readInt(),this._Str_12282=t.readInt(),this._Str_19007=t.readInt(),this._Str_16081=t.readBoolean(),this._category=t.readString(),this._Str_21707=t.readString(),this._Str_20339=t.readInt(),this._Str_19099=t.readInt()}get achievementId(){return this._achievementId}get badgeId(){return this._badgeId}get level(){return this._level}get _Str_25209(){return this._Str_6791}get _Str_24142(){return this._Str_18274-this._Str_6791}get rewardAmount(){return this._Str_10280}get rewardType(){return this._Str_12282}get _Str_22939(){return this._Str_19007-this._Str_6791}get _Str_7518(){return this._Str_16081}get category(){return this._category}get _Str_25896(){return this._Str_21707}get totalLevels(){return this._Str_20339}get _Str_10438(){return this._level>1||this._Str_16081}_Str_24410(){this._Str_19007=this._Str_18274}get _Str_24874(){return this._Str_19099}get progress(){return this._Str_19007}get toNextProgress(){return this._Str_18274}set unseen(t){this._unseen=t}get unseen(){return this._unseen}reset(t){this._achievementId=t._achievementId,this._level=t._level,this._badgeId=t._badgeId,this._Str_6791=t._Str_6791,this._Str_18274=t._Str_18274,this._Str_10280=t._Str_10280,this._Str_12282=t._Str_12282,this._Str_19007=t._Str_19007,this._Str_16081=t._Str_16081,this._category=t.category,this._Str_21707=t._Str_21707,this._Str_20339=t._Str_20339,this._Str_19099=t._Str_19099}}return t._Str_21736=-1,t._Str_21318=0,t._Str_15908=1,t._Str_20384=2,t})()},ZQhZ:function(t,e,s){"use strict";s.d(e,"a",function(){return g});var i=s("IqKQ"),n=s("awbM"),r=s("vzKh"),a=s("IGSi"),o=s("auym"),c=s("P7Cj"),_=s("z20u"),h=s("HqZk"),l=s("38Mq"),u=s("XMGm"),d=s("IqYK");let g=(()=>{class t{constructor(){this._logger=new r.a(this.constructor.name),this._stateEvents=null,this._sessionDataManager=null,this._waitingForSessionDataManager=!1,this._iconListener=null,this._collections=new Map,this._images=new Map,this._events=new Map,this._activeObjects={},this._activeObjectTypes=new Map,this._activeObjectTypeIds=new Map,this._objectTypeAdUrls=new Map,this._wallItems={},this._wallItemTypes=new Map,this._wallItemTypeIds=new Map,this._pets={},this._objectAliases=new Map,this._objectOriginalNames=new Map,this._pendingContentTypes=[]}initialize(t){this._stateEvents=t,this.setFurnitureData();for(const[e,s]of c.a.instance.getConfiguration("pet.types").entries())this._pets[s]=e}dispose(){}setSessionDataManager(t){this._sessionDataManager=t,this._waitingForSessionDataManager&&(this._waitingForSessionDataManager=!1,this.setFurnitureData())}loadFurnitureData(){this.setFurnitureData()}setFurnitureData(){if(!this._sessionDataManager)return void(this._waitingForSessionDataManager=!0);const t=this._sessionDataManager.getAllFurnitureData(this);t&&(this._sessionDataManager.removePendingFurniDataListener(this),this.processFurnitureData(t))}processFurnitureData(t){if(t)for(const e of t){if(!e)continue;const t=e.id;let s=e.className,i=e.className;e.colorId&&(s=s+"*"+e.colorId);const n=e.adUrl;n&&n.length>0&&this._objectTypeAdUrls.set(s,n),e.type===_.a.FLOOR?(this._activeObjectTypes.set(t,s),this._activeObjectTypeIds.set(s,t),this._activeObjects[i]||(this._activeObjects[i]=1)):e.type===_.a.WALL&&("post.it"===s&&(s="post_it",i="post_it"),"post.it.vd"===s&&(s="post_it_vd",i="post_id_vd"),this._wallItemTypes.set(t,s),this._wallItemTypeIds.set(s,t),this._wallItems[i]||(this._wallItems[i]=1))}}getFurnitureFloorNameForTypeId(t){const e=this._activeObjectTypes.get(t);return this.removeColorIndex(e)}getFurnitureWallNameForTypeId(t,e=null){let s=this._wallItemTypes.get(t);return"poster"===s&&null!==e&&(s+=e),this.removeColorIndex(s)}getFurnitureFloorColorIndex(t){const e=this._activeObjectTypes.get(t);return e?this.getColorIndexFromName(e):-1}getFurnitureWallColorIndex(t){const e=this._wallItemTypes.get(t);return e?this.getColorIndexFromName(e):-1}getColorIndexFromName(t){if(!t)return-1;const e=t.indexOf("*");return-1===e?0:parseInt(t.substr(e+1))}removeColorIndex(t){if(!t)return null;const e=t.indexOf("*");return-1===e?t:t.substr(0,e)}getCollection(t){if(!t)return null;const e=this._collections.get(t);if(!e){const e=c.a.instance.core.asset.getCollection(t);return e?(this._collections.set(t,e),e):null}return e}getImage(t){if(!t)return null;const e=this._images.get(t);if(!e)return null;const s=new Image;return s.src=e.src,s}addAssetToCollection(t,e,s){const i=this.getCollection(t);return!!i&&i.addAsset(e,s,!0,0,0,!1,!1)}createCollection(t,e){if(!t||!e)return null;const s=new o.a(t,e);this._collections.set(s.name,s)}getPlaceholderName(e){return void 0!==this._activeObjects[e]?t.PLACE_HOLDER:void 0!==this._wallItems[e]?t.PLACE_HOLDER_WALL:void 0!==this._pets[e]?t.PLACE_HOLDER_PET:t.PLACE_HOLDER_DEFAULT}getCategoryForType(t){return t?void 0!==this._activeObjects[t]?h.a.FLOOR:void 0!==this._wallItems[t]?h.a.WALL:void 0!==this._pets[t]?h.a.UNIT:0===t.indexOf("poster")?h.a.WALL:"room"===t?h.a.ROOM:t===l.a.USER||t===l.a.PET||t===l.a.BOT||t===l.a.RENTABLE_BOT?h.a.UNIT:"tile_cursor"===t||"selection_arrow"===t?h.a.CURSOR:h.a.MINIMUM:h.a.MINIMUM}getPetNameForType(t){return c.a.instance.getConfiguration("pet.types")[t]||null}isLoaderType(t){return(t=l.a.getRealType(t))!==d.a.USER}downloadImage(t,e,s,i=null){let n=null,r=[];if(e&&e.indexOf(",")>=0&&(n=e,e=n.split(",")[0]),r=this.getAssetUrls(n||e,s,!0),r&&r.length){const i=r[0],n=new Image;return n.src=i,n.onload=()=>{n.onerror=null,this._images.set([e,s].join("_"),n),this._iconListener.onRoomContentLoaded(t,[e,s].join("_"),!0)},n.onerror=()=>{n.onload=null,this._logger.error("Failed to download asset: "+i),this._iconListener.onRoomContentLoaded(t,[e,s].join("_"),!1)},!0}return!1}downloadAsset(t,e){const s=this.getAssetUrls(t);if(!s||!s.length)return!1;if(this._pendingContentTypes.indexOf(t)>=0||this.getOrRemoveEventDispatcher(t))return!1;this._pendingContentTypes.push(t),this._events.set(t,e);const n=s.length;let r=0;const o=(s,i,o)=>{if(s&&s.destroy(),!o)return this._logger.error("Failed to download asset: "+i.url),void e.dispatchEvent(new a.a(a.a.RCLE_FAILURE,t));if(r++,r===n){const e=this._events.get(t);if(!e)return;e.dispatchEvent(new a.a(a.a.RCLE_SUCCESS,t))}};for(const a of s){if(!a)continue;const t=new i.g,e={crossOrigin:!1,xhrType:a.endsWith(".nitro")?"arraybuffer":"json"};t.use((e,s)=>this.assetLoader(t,e,s,o)).add(a,e).load()}return!0}assetLoader(t,e,s,r){if(!e||e.error)return e&&e.texture&&e.texture.destroy(!0),void r(t,e,!1);if("nitro"===e.extension){const s=new n.a(e.data),a=s.jsonFile;if(!a.type)return void r(t,e,!1);if(a.spritesheet&&Object.keys(a.spritesheet).length){const n=s.image;let o=s.baseTexture;if(!o&&(n&&(o=new i.c("data:image/png;base64,"+n)),!o))return void r(t,e,!1);if(o.valid){const s=new i.o(o,a.spritesheet);s.parse(i=>{this.createCollection(a,s),r(t,e,!0)})}else o.once("loaded",()=>{o.removeAllListeners();const s=new i.o(o,a.spritesheet);s.parse(i=>{this.createCollection(a,s),r(t,e,!0)})}),o.once("error",()=>{o.removeAllListeners(),r(t,e,!1)});return}this.createCollection(a,null),r(t,!0)}else if(e.type===i.h.TYPE.JSON){const s=e.data;if(!s.type)return void r(t,e,!1);if(s.spritesheet&&Object.keys(s.spritesheet).length){const n=s.spritesheet.meta&&s.spritesheet.meta.image;if(!n||!n.length)return void r(t,e,!1);const a=e.url.substring(0,e.url.lastIndexOf("/")+1)+n,o=i.c.from(a);if(o.valid){const n=new i.o(o,s.spritesheet);n.parse(i=>{this.createCollection(s,n),r(t,e,!0)})}else o.once("loaded",()=>{o.removeAllListeners();const n=new i.o(o,s.spritesheet);n.parse(i=>{this.createCollection(s,n),r(t,e,!0)})}),o.once("error",()=>{o.removeAllListeners(),r(t,e,!1)});return}this.createCollection(s,null),r(t,e,!0)}else r(t,e,!1)}_Str_12966(t,e){this._objectAliases.set(t,e),this._objectOriginalNames.set(e,t)}getAssetAliasName(t){return this._objectAliases.get(t)||t}getAssetOriginalName(t){return this._objectOriginalNames.get(t)||t}getAssetUrls(e,s=null,i=!1){switch(e){case t.PLACE_HOLDER:return[this.getAssetUrlWithRoomBase("place_holder")];case t.PLACE_HOLDER_WALL:return[this.getAssetUrlWithRoomBase("place_holder_wall")];case t.PLACE_HOLDER_PET:return[this.getAssetUrlWithRoomBase("place_holder_pet")];case t.ROOM:return[this.getAssetUrlWithRoomBase("room")];case t.TILE_CURSOR:return[this.getAssetUrlWithRoomBase("tile_cursor")];case t.SELECTION_ARROW:return[this.getAssetUrlWithRoomBase("selection_arrow")];default:{const t=this.getCategoryForType(e);if(t===h.a.FLOOR||t===h.a.WALL){const t=this.getAssetAliasName(e);let n=i?this.getAssetUrlWithFurniIconBase(t):this.getAssetUrlWithFurniBase(e);if(i){const e=s&&""!==s&&"0"!==s&&null!==this._activeObjectTypeIds.get(t+"*"+s);n=n.replace(/%param%/gi,e?"_"+s:"")}return[n]}return t===h.a.UNIT?[this.getAssetUrlWithPetBase(e)]:null}}}getAssetIconUrl(t,e){let s=null,i=[];return t&&t.indexOf(",")>=0&&(s=t,t=s.split(",")[0]),i=this.getAssetUrls(s||t,e,!0),i.length?i[0]:null}getAssetUrlWithRoomBase(t){return c.a.instance.getConfiguration("room.asset.url").replace(/%libname%/gi,t)}getAssetUrlWithFurniBase(t){return c.a.instance.getConfiguration("furni.asset.url").replace(/%libname%/gi,t)}getAssetUrlWithFurniIconBase(t){return c.a.instance.getConfiguration("furni.asset.icon.url").replace(/%libname%/gi,t)}getAssetUrlWithPetBase(t){return c.a.instance.getConfiguration("pet.asset.url").replace(/%libname%/gi,t)}setRoomObjectRoomId(t,e){const s=t&&t.model;s&&s.setValue(u.a.OBJECT_ROOM_ID,e)}getOrRemoveEventDispatcher(t,e=!1){const s=this._events.get(t);return e&&this._events.delete(t),s}setIconListener(t){this._iconListener=t}}return t.PLACE_HOLDER="place_holder",t.PLACE_HOLDER_WALL="place_holder_wall",t.PLACE_HOLDER_PET="place_holder_pet",t.PLACE_HOLDER_DEFAULT=t.PLACE_HOLDER,t.ROOM="room",t.TILE_CURSOR="tile_cursor",t.SELECTION_ARROW="selection_arrow",t.MANDATORY_LIBRARIES=[t.PLACE_HOLDER,t.PLACE_HOLDER_WALL,t.PLACE_HOLDER_PET,t.ROOM,t.TILE_CURSOR,t.SELECTION_ARROW],t})()},ZWGQ:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("G0tw");let n=(()=>{class t extends i.a{constructor(e,s,i,n){super(t.ROOM_COLOR,e),this._color=s,this._Str_21672=i,this._Str_6930=n}get color(){return this._color}get _Str_5123(){return this._Str_21672}get _Str_11464(){return this._Str_6930}}return t.ROOM_COLOR="REE_ROOM_COLOR",t})()},Zim7:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{flush(){return this._reason=0,this._parameter="",!0}parse(t){return!!t&&(this._reason=t.readInt(),this._parameter=t.readString(),!0)}get reason(){return this._reason}get parameter(){return this._parameter}}return t.FULL_ERROR=1,t._Str_19431=2,t.QUEUE_ERROR=3,t.BANNED=4,t})()},Zq74:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._code=0,!0}parse(t){return!!t&&(this._code=t.readInt(),!0)}get code(){return this._code}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},a9Mt:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("ZLse");class r{flush(){return this._achievements=[],this._Str_19269=null,!0}parse(t){if(!t)return!1;this._achievements=[];let e=t.readInt();for(;e>0;)this._achievements.push(new n.a(t)),e--;return this._Str_19269=t.readString(),!0}get achievements(){return this._achievements}get _Str_16300(){return this._Str_19269}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},amIx:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i,n,r){this._data=[t,e.length,...e,s,i.length,...i,n,r]}getMessageArray(){return this._data}dispose(){}}},auym:function(t,e,s){"use strict";s.d(e,"a",function(){return c});var i=s("kiYJ"),n=s("P7Cj"),r=s("IqKQ");let a=(()=>{class t{static createAsset(e,s,i,n,r,a=!1,o=!1,c=!1){const _=t.GRAPHIC_POOL.length?t.GRAPHIC_POOL.pop():new t;return _._name=e,_._source=s||null,i?(_._texture=i,_._initialized=!1):(_._texture=null,_._initialized=!0),_._usesPalette=c,_._x=n,_._y=r,_._flipH=a,_._flipV=o,_._rectangle=null,_}recycle(){this._texture=null,t.GRAPHIC_POOL.push(this)}initialize(){!this._initialized&&this._texture&&(this._width=this._texture.width,this._height=this._texture.height,this._initialized=!0)}get name(){return this._name}get source(){return this._source}get texture(){return this._texture}get usesPalette(){return this._usesPalette}get x(){return this._x}get y(){return this._y}get width(){return this.initialize(),this._width}get height(){return this.initialize(),this._height}get offsetX(){return this._flipH?-this._x:this._x}get offsetY(){return this._flipV?-this._y:this._y}get flipH(){return this._flipH}get flipV(){return this._flipV}get rectangle(){return this._rectangle||(this._rectangle=new r.k(0,0,this.width,this.height)),this._rectangle}}return t.GRAPHIC_POOL=[],t})();class o{constructor(t,e,s){for(this._palette=t;this._palette.length<256;)this._palette.push([0,0,0]);this._primaryColor=e,this._secondaryColor=s}dispose(){}applyPalette(t){const e=r.n.from(t),s=n.a.instance.renderer.extract.canvas(e),i=s.getContext("2d"),a=i.getImageData(0,0,s.width,s.height),o=a.data;for(let n=0;n<o.length;n+=4){let t=this._palette[o[n+1]];void 0===t&&(t=[0,0,0]),o[n]=t[0],o[n+1]=t[1],o[n+2]=t[2]}return i.putImageData(a,0,0),r.p.from(s)}get primaryColor(){return this._primaryColor}get secondaryColor(){return this._secondaryColor}}let c=(()=>{class t{constructor(t,e){if(!t)throw new Error("invalid_collection");this._name=t.name,this._data=t,this._textures=new Map,this._assets=new Map,this._palettes=new Map,this._paletteAssetNames=[],e&&this.addLibraryAsset(e.textures),this.define(t)}dispose(){if(this._palettes){for(const t of this._palettes.values())t.dispose();this._palettes.clear()}if(this._paletteAssetNames&&(this.disposePaletteAssets(),this._paletteAssetNames=null),this._assets){for(const t of this._assets.values())t.recycle();this._assets.clear()}}addReference(){this._referenceCount++,this._referenceTimestamp=n.a.instance.time}removeReference(){this._referenceCount--,this._referenceCount<=0&&(this._referenceCount=0,this._referenceTimestamp=n.a.instance.time,this.disposePaletteAssets(!1))}define(t){const e=t.assets,s=t.palettes;e&&this.defineAssets(e),s&&this.definePalettes(s)}defineAssets(t){if(t)for(const e in t){const s=t[e];if(!s)continue;const i=-s.x||0,n=-s.y||0;let r=!1;const a=!1,o=s.usesPalette||!1;let c=s.source||"";s.flipH&&c.length&&(r=!0),c.length||(c=e);const _=this.getLibraryAsset(c);if(!_)continue;let h=this.createAsset(e,c,_,r,a,i,n,o);if(!h){const t=this.getAsset(e);t&&t.name!==t.source&&(h=this.replaceAsset(e,c,_,r,a,i,n,o))}}}definePalettes(t){if(t)for(const e in t){const s=t[e];if(!s)continue;const i=s.id.toString();if(this._palettes.get(i))continue;let n=16777215,r=16777215,a=s.color1;a&&a.length>0&&(n=parseInt(a,16)),a=s.color2,a&&a.length>0&&(r=parseInt(a,16)),this._palettes.set(i,new o(s.rgb,n,r))}}createAsset(t,e,s,i,n,r,o,c){if(this._assets.get(t))return!1;const _=a.createAsset(t,e,s,r,o,i,n,c);return this._assets.set(t,_),!0}replaceAsset(t,e,s,i,n,r,a,o){const c=this._assets.get(t);return c&&(this._assets.delete(t),c.recycle()),this.createAsset(t,e,s,i,n,r,a,o)}getAsset(t){return t&&this._assets.get(t)||null}getAssetWithPalette(t,e){const s=t+"@"+e;let i=this.getAsset(s);if(!i){if(i=this.getAsset(t),!i||!i.usesPalette)return i;const n=this.getPalette(e);if(n){const t=n.applyPalette(i.texture);t&&(this._paletteAssetNames.push(s),this.createAsset(s,i.source+"@"+e,t,i.flipH,i.flipV,i.x,i.y,!1),i=this.getAsset(s))}}return i}getPaletteNames(){return Array.from(this._palettes.keys())}getPaletteColors(t){const e=this.getPalette(t);return e?[e.primaryColor,e.secondaryColor]:null}getPalette(t){return t&&this._palettes.get(t)||null}addAsset(t,e,s,i=0,n=0,r=!1,a=!1){if(!t||!e)return!1;const o=this.getLibraryAsset(t);return o?!!s&&(o.baseTexture=e.baseTexture,o.frame=e.frame,o.trim=e.trim,o.updateUvs(),!0):(this._textures.set(t,e),this.createAsset(t,t,e,r,a,i,n,!1))}disposeAsset(t){const e=this._assets.get(t);if(!e)return;this._assets.delete(t);const s=this.getLibraryAsset(e.source);s&&(this._textures.delete(e.source),s.destroy(!0)),e.recycle()}getLibraryAsset(t){return t&&this._textures.get(t=this._name+"_"+t)||null}addLibraryAsset(t){if(t)for(const e in t){const s=t[e];s&&this._textures.set(i.a.removeFileExtension(e),s)}}disposePaletteAssets(e=!0){if(this._paletteAssetNames&&(e||this._paletteAssetNames.length>t.PALETTE_ASSET_DISPOSE_THRESHOLD)){for(const t of this._paletteAssetNames)this.disposeAsset(t);this._paletteAssetNames=[]}}get referenceCount(){return this._referenceCount}get referenceTimestamp(){return this._referenceTimestamp}get name(){return this._name}get data(){return this._data}get textures(){return this._textures}get assets(){return this._assets}}return t.PALETTE_ASSET_DISPOSE_THRESHOLD=10,t})()},awbM:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("rP9a"),n=s("IqKQ"),r=s("vzKh"),a=s("lVe0");let o=(()=>{class t{constructor(t){this._jsonFile=null,this._image=null,this._imageData=null,this._baseTexture=null,this.parse(t)}static arrayBufferToBase64(t){let e="";const s=new Uint8Array(t),i=s.byteLength;for(let n=0;n<i;n++)e+=String.fromCharCode(s[n]);return window.btoa(e)}parse(e){const s=new a.a(e);let n=s.readShort();for(;n>0;){const e=s.readShort(),r=s.readBytes(e).toString(),a=s.readInt(),o=s.readBytes(a);if(r.endsWith(".json")){const e=Object(i.a)(o.toArrayBuffer());this._jsonFile=JSON.parse(t.TEXT_DECODER.decode(e))}else{const e=Object(i.a)(o.toArrayBuffer());this._imageData=e,this._image=t.arrayBufferToBase64(this._imageData),this._imageData=null}n--}}buildTexture(){if(this._imageData&&this._jsonFile){try{const t=n.c.fromBuffer(this._imageData,1,1);this._baseTexture=t}catch(t){r.a.log(t)}this._imageData=null}}get jsonFile(){return this._jsonFile}get image(){return this._image}get baseTexture(){return this._baseTexture}}return t.TEXT_DECODER=new TextDecoder("utf-8"),t})()},bakE:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("nL9H");class n extends i.a{constructor(t){super(t),this._conflictingTriggers=[],this._type=t.readInt(),this._delayInPulses=t.readInt();let e=t.readInt();for(;e>0;)this._conflictingTriggers.push(t.readInt()),e--}get type(){return this._type}get code(){return this._type}get delayInPulses(){return this._delayInPulses}get conflictingTriggers(){return this._conflictingTriggers}}},bmMM:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("BFtu");class r{flush(){return this._model=null,this._width=0,this._height=0,this._wallHeight=-1,this._heightMap=[],this._scale=64,this._model=null,!0}parse(t){if(!t)return!1;this._scale=t.readBoolean()?32:64,this._wallHeight=t.readInt(),this._model=t.readString();const e=this._model.split("\r"),s=e.length;let i=0,r=0;for(;r<s;){const t=e[r];t.length>i&&(i=t.length),r++}for(this._heightMap=[],r=0;r<s;){const t=[];let e=0;for(;e<i;)t.push(n.a.TILE_BLOCKED),e++;this._heightMap.push(t),r++}for(this._width=i,this._height=s,r=0;r<s;){const t=this._heightMap[r],s=e[r];if(s.length>0){let e=0;for(;e<s.length;){const i=s.charAt(e);let r=n.a.TILE_BLOCKED;"x"!==i&&"X"!==i&&(r=parseInt(i,36)),t[e]=r,e++}}r++}return!0}getHeight(t,e){if(t<0||t>=this._width||e<0||e>=this._height)return-110;const s=this._heightMap[e];if(void 0===s)return-110;const i=s[t];return void 0===i?-110:i}get model(){return this._model}get width(){return this._width}get height(){return this._height}get heightMap(){return this._heightMap}get wallHeight(){return this._wallHeight}get scale(){return this._scale}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},bmkm:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},c746:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{flush(){return this._roomIndex=null,this._message=null,this._gesture=0,this._bubble=0,this._urls=[],this._messageLength=0,!0}parse(t){return!!t&&(this._roomIndex=t.readInt(),this._message=t.readString(),this._gesture=t.readInt(),this._bubble=t.readInt(),this.parseUrls(t),this._messageLength=t.readInt(),!0)}parseUrls(t){if(!t)return!1;this._urls=[];let e=t.readInt();for(;e>0;)this._urls.push(t.readString()),e--;return!0}get roomIndex(){return this._roomIndex}get message(){return this._message}get gesture(){return this._gesture}get bubble(){return this._bubble}get urls(){return this._urls}get messageLength(){return this._messageLength}}},c7QS:function(t,e,s){"use strict";s.d(e,"a",function(){return c});var i=s("5+UO"),n=s("o/0e");class r{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._code=null,this._data=null,this._action=-1,this._closed=!1,this._mode=-1,this._rooms=[],!0}parse(t){if(!t)return!1;this._code=t.readString(),this._data=t.readString(),this._action=t.readInt(),this._closed=t.readBoolean(),this._mode=t.readInt();let e=t.readInt();for(;e>0;)this._rooms.push(new n.a(t)),e--;return!0}get code(){return this._code}get data(){return this._data}get action(){return this._action}get closed(){return this._closed}get mode(){return this._mode}get rooms(){return this._rooms}}class a{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._code=null,this._data=null,this._results=[],!0}parse(t){if(!t)return!1;this._code=t.readString(),this._data=t.readString();let e=t.readInt();for(;e>0;)this._results.push(new r(t)),e--;return!0}get code(){return this._code}get data(){return this._data}get results(){return this._results}}class o{flush(){return this._result=null,!0}parse(t){return!!t&&(this._result=new a(t),!0)}get result(){return this._result}}class c extends i.a{constructor(t){super(t,o)}getParser(){return this.parser}}},cSuP:function(t,e,s){"use strict";s.d(e,"a",function(){return _});var i=s("hTzv"),n=s("10wl"),r=s("P7Cj"),a=s("8c0Z");let o=(()=>{class t{constructor(e){this._id=++t.SET_COUNTER,this._roomId=e,this._items=[]}addItem(t){t&&this._items.push(t)}get id(){return this._id}get roomId(){return this._roomId}get items(){return this._items}}return t.SET_COUNTER=0,t})();var c=s("fXoL");let _=(()=>{class t{constructor(t){this._ngZone=t,this._lastRoomId=-1,this._currentSet=null,this._historySets=[],this._queuedItems=new i.a,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),this._messages=[new n.a(this.onRoomInfoEvent.bind(this))];for(const t of this._messages)r.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(this._messages&&this._messages.length){for(const t of this._messages)r.a.instance.communication.removeMessageEvent(t);this._messages=[]}})}onRoomInfoEvent(t){if(!t)return;const e=t.getParser();if(!e)return;if(!e.roomEnter)return;const s=e.data;this._lastRoomId!==s.roomId&&this._ngZone.run(()=>{this._lastRoomId=s.roomId,this._currentSet=null;const t=new a.a;t.content=e.data.roomName+"",this.addItem(this._lastRoomId,t),this.processQueue(this._lastRoomId)})}addItem(t,e){e&&this._ngZone.run(()=>{const s=this.getHistorySet(t);if(s)s.addItem(e);else{const s=this.getHistoryQueue(t);s&&s.push(e)}})}getHistorySet(t){let e=null;return this._currentSet&&this._currentSet.roomId===t&&(e=this._currentSet),e||(e=new o(t),this._historySets.push(e)),this._currentSet=e,e}getHistoryQueue(t){let e=this._queuedItems.getValue(t);return e||(e=[],this._queuedItems.add(t,e)),e}processQueue(t){const e=this._queuedItems.getValue(t);if(e){for(const s of e)s&&this.addItem(t,s);this._queuedItems.remove(t)}}get historySets(){return this._historySets}}return t.MAX_CHAT_HISTORY=1e3,t.MESSAGE_RECEIVED="CHS_MESSAGE_RECEIVED",t.\u0275fac=function(e){return new(e||t)(c.kc(c.H))},t.\u0275prov=c.Ub({token:t,factory:t.\u0275fac}),t})()},dEqu:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.SUPER_USER=9,t.ADMINISTRATOR=8,t.COMMUNITY=7,t.PLAYER_SUPPORT=6,t.MODERATOR=5,t.EMPLOYEE=4,t.BUS_PARTNER=3,t.PARTNER=2,t.CELEBRITY=1,t.NONE=0,t})()},dPj3:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("G0tw");let n=(()=>{class t extends i.a{constructor(e,s,i,n,r,a){super(t.ROOM_COLOR,e),this._state=s,this._presetId=i,this._effectId=n,this._color=r,this._brightness=a}get state(){return this._state}get _Str_14686(){return this._presetId}get _Str_6815(){return this._effectId}get color(){return this._color}get _Str_5123(){return this._brightness}}return t.ROOM_COLOR="REDSE_ROOM_COLOR",t})()},dmof:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},dwRb:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this._senderId=t.readInt(),this._errorCode=t.readInt()}get senderId(){return this._senderId}get errorCode(){return this._errorCode}}class r{flush(){return this._failuers=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._failuers.push(new n(t)),e--;return!0}get failures(){return this._failuers}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},eXwK:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},ebaN:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("Wgf2"),n=s("5+UO");class r extends n.a{constructor(t){super(t,i.a)}getParser(){return this.parser}}},ekex:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},f1eJ:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t){this._typeId=t.readInt(),this._paletteId=t.readInt(),this._color=t.readString(),this._breedId=t.readInt(),this._customParts=[],this._customPartCount=t.readInt();let e=0;for(;e<this._customPartCount;)this._customParts.push(t.readInt()),this._customParts.push(t.readInt()),this._customParts.push(t.readInt()),e++}get typeId(){return this._typeId}get paletteId(){return this._paletteId}get color(){return this._color}get breedId(){return this._breedId}get figuredata(){let t=this.typeId+" "+this.paletteId+" "+this.color;t=t+" "+this.custompartCount;for(const e of this.customParts)t=t+" "+e;return t}get customParts(){return this._customParts}get custompartCount(){return this._customPartCount}}class r{flush(){return!0}parse(t){return!!t&&(this._roomIndex=t.readInt(),this._petId=t.readInt(),this._figureData=new n(t),this._hasSaddle=t.readBoolean(),this._isRiding=t.readBoolean(),!0)}get roomIndex(){return this._roomIndex}get petId(){return this._petId}get figureData(){return this._figureData}get hasSaddle(){return this._hasSaddle}get isRiding(){return this._isRiding}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},f6Tv:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){if(!t)throw new Error("invalid_wrapper");this._requestId=t.readInt(),this._requesterName=t.readString(),this._figureString=t.readString(),this._requesterUserId=this._requestId}get requestId(){return this._requestId}get requesterName(){return this._requesterName}get requesterUserId(){return this._requesterUserId}get figureString(){return this._figureString}}},f6o4:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.CHAT_WIDGET="RWE_CHAT_WIDGET",t.INFOSTAND="RWE_INFOSTAND",t.ME_MENU="RWE_ME_MENU",t.CHAT_INPUT_WIDGET="RWE_CHAT_INPUT_WIDGET",t.FURNI_PLACEHOLDER="RWE_FURNI_PLACEHOLDER",t.FURNI_CREDIT_WIDGET="RWE_FURNI_CREDIT_WIDGET",t.FURNI_STICKIE_WIDGET="RWE_FURNI_STICKIE_WIDGET",t.FURNI_TROPHY_WIDGET="RWE_FURNI_TROPHY_WIDGET",t.FURNI_LOVELOCK_WIDGET="RWE_FURNI_LOVELOCK_WIDGET",t.FURNI_PRESENT_WIDGET="RWE_FURNI_PRESENT_WIDGET",t.FURNI_ECOTRONBOX_WIDGET="RWE_FURNI_ECOTRONBOX_WIDGET",t.FURNI_PET_PACKAGE_WIDGET="RWE_FURNI_PET_PACKAGE_WIDGET",t.PLAYLIST_EDITOR_WIDGET="RWE_PLAYLIST_EDITOR_WIDGET",t.DOORBELL="RWE_DOORBELL",t.LOADINGBAR="RWE_LOADINGBAR",t.ROOM_QUEUE="RWE_ROOM_QUEUE",t.ROOM_POLL="RWE_ROOM_POLL",t.ROOM_VOTE="RWE_ROOM_VOTE",t.USER_CHOOSER="RWE_USER_CHOOSER",t.FURNI_CHOOSER="RWE_FURNI_CHOOSER",t.ROOM_DIMMER="RWE_ROOM_DIMMER",t.FRIEND_REQUEST="RWE_FRIEND_REQUEST",t.CLOTHING_CHANGE="RWE_CLOTHING_CHANGE",t.CONVERSION_TRACKING="RWE_CONVERSION_TRACKING",t.USER_NOTIFICATION="RWE_USER_NOTIFICATION",t.FRIENDS_BAR="RWE_FRIENDS_BAR",t.PURSE_WIDGET="RWE_PURSE_WIDGET",t.AVATAR_INFO="RWE_AVATAR_INFO",t.WELCOME_GIFT="RWE_WELCOME_GIFT",t.SPAMWALL_POSTIT_WIDGET="RWE_SPAMWALL_POSTIT_WIDGET",t.EFFECTS="RWE_EFFECTS",t.MANNEQUIN="RWE_MANNEQUIN",t.FURNITURE_CONTEXT_MENU="RWE_FURNITURE_CONTEXT_MENU",t.LOCATION_WIDGET="RWE_LOCATION_WIDGET",t.CAMERA="RWE_CAMERA",t.ROOM_THUMBNAIL_CAMERA="RWE_ROOM_THUMBNAIL_CAMERA",t.ROOM_BACKGROUND_COLOR="RWE_ROOM_BACKGROUND_COLOR",t.CUSTOM_USER_NOTIFICATION="RWE_CUSTOM_USER_NOTIFICATION",t.FURNI_ACHIEVEMENT_RESOLUTION_ENGRAVING="RWE_FURNI_ACHIEVEMENT_RESOLUTION_ENGRAVING",t.FRIEND_FURNI_CONFIRM="RWE_FRIEND_FURNI_CONFIRM",t.FRIEND_FURNI_ENGRAVING="RWE_FRIEND_FURNI_ENGRAVING",t.HIGH_SCORE_DISPLAY="RWE_HIGH_SCORE_DISPLAY",t.INTERNAL_LINK="RWE_INTERNAL_LINK",t.CUSTOM_STACK_HEIGHT="RWE_CUSTOM_STACK_HEIGHT",t.YOUTUBE="RWE_YOUTUBE",t.RENTABLESPACE="RWE_RENTABLESPACE",t.VIMEO="RWE_VIMEO",t.ROOM_TOOLS="RWE_ROOM_TOOLS",t.EXTERNAL_IMAGE="RWE_EXTERNAL_IMAGE",t.WORD_QUIZZ="RWE_WORD_QUIZZ",t.UI_HELP_BUBBLE="RWE_UI_HELP_BUBBLE",t.ROOM_LINK="RWE_ROOM_LINK",t.CRAFTING="RWE_CRAFTING",t.ROOMGAME_CHECKERS="RWE_GAME_CHECKERS",t})()},fFOI:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._mode=0,this._weight=0,this._speed=0,this._distance=0,this._protection=0,!0}parse(t){return!!t&&(this._mode=t.readInt(),this._weight=t.readInt(),this._speed=t.readInt(),this._distance=t.readInt(),this._protection=t.readInt(),!0)}get mode(){return this._mode}get weight(){return this._weight}get speed(){return this._speed}get distance(){return this._distance}get protection(){return this._protection}}return t._Str_19408=0,t._Str_12787=1,t._Str_16907=0,t._Str_12581=1,t._Str_16484=2,t._Str_18404=0,t._Str_17874=1,t._Str_16469=2,t._Str_21099=0,t._Str_20763=1,t._Str_22060=2,t})()},fVO9:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("5+UO"),n=s("+kDp");let r=(()=>{class t{constructor(t){this._roomIndex=0,this._x=0,this._y=0,this._z=0,this._dir=0,this._name="",this._userType=0,this._sex="",this._figure="",this._custom="",this._activityPoints=0,this._webID=0,this._groupID="",this._groupStatus=0,this._groupName="",this._subType="",this._ownerId=0,this._ownerName="",this._rarityLevel=0,this._hasSaddle=!1,this._isRiding=!1,this._canBreed=!1,this._canHarvest=!1,this._canRevive=!1,this._hasBreedingPermission=!1,this._petLevel=0,this._petPosture="",this._botSkills=[],this._isModerator=!1,this._isReadOnly=!1,this._roomIndex=t}_Str_4710(){this._isReadOnly=!0}get roomIndex(){return this._roomIndex}get x(){return this._x}set x(t){this._isReadOnly||(this._x=t)}get y(){return this._y}set y(t){this._isReadOnly||(this._y=t)}get z(){return this._z}set z(t){this._isReadOnly||(this._z=t)}get dir(){return this._dir}set dir(t){this._isReadOnly||(this._dir=t)}get name(){return this._name}set name(t){this._isReadOnly||(this._name=t)}get userType(){return this._userType}set userType(t){this._isReadOnly||(this._userType=t)}get sex(){return this._sex}set sex(t){this._isReadOnly||(this._sex=t)}get figure(){return this._figure}set figure(t){this._isReadOnly||(this._figure=t)}get custom(){return this._custom}set custom(t){this._isReadOnly||(this._custom=t)}get activityPoints(){return this._activityPoints}set activityPoints(t){this._isReadOnly||(this._activityPoints=t)}get webID(){return this._webID}set webID(t){this._isReadOnly||(this._webID=t)}get groupID(){return this._groupID}set groupID(t){this._isReadOnly||(this._groupID=t)}get groupName(){return this._groupName}set groupName(t){this._isReadOnly||(this._groupName=t)}get groupStatus(){return this._groupStatus}set groupStatus(t){this._isReadOnly||(this._groupStatus=t)}get subType(){return this._subType}set subType(t){this._isReadOnly||(this._subType=t)}get ownerId(){return this._ownerId}set ownerId(t){this._isReadOnly||(this._ownerId=t)}get ownerName(){return this._ownerName}set ownerName(t){this._isReadOnly||(this._ownerName=t)}get rarityLevel(){return this._rarityLevel}set rarityLevel(t){this._isReadOnly||(this._rarityLevel=t)}get hasSaddle(){return this._hasSaddle}set hasSaddle(t){this._isReadOnly||(this._hasSaddle=t)}get isRiding(){return this._isRiding}set isRiding(t){this._isReadOnly||(this._isRiding=t)}get canBreed(){return this._canBreed}set canBreed(t){this._isReadOnly||(this._canBreed=t)}get canHarvest(){return this._canHarvest}set canHarvest(t){this._isReadOnly||(this._canHarvest=t)}get canRevive(){return this._canRevive}set canRevive(t){this._isReadOnly||(this._canRevive=t)}get hasBreedingPermission(){return this._hasBreedingPermission}set hasBreedingPermission(t){this._isReadOnly||(this._hasBreedingPermission=t)}get petLevel(){return this._petLevel}set petLevel(t){this._isReadOnly||(this._petLevel=t)}get petPosture(){return this._petPosture}set petPosture(t){this._isReadOnly||(this._petPosture=t)}get botSkills(){return this._botSkills}set botSkills(t){this._botSkills=t}get isModerator(){return this._isModerator}set isModerator(t){this._isReadOnly||(this._isModerator=t)}}return t.M="M",t.F="F",t})();class a{flush(){return this._users=[],!0}parse(t){if(!t)return!1;this._users=[];const e=t.readInt();let s=0;for(;s<e;){const e=t.readInt(),i=t.readString(),a=t.readString();let o=t.readString();const c=t.readInt(),_=t.readInt(),h=t.readInt(),l=parseFloat(t.readString()),u=t.readInt(),d=t.readInt(),g=new r(c);if(g.dir=u,g.name=i,g.custom=a,g.x=_,g.y=h,g.z=l,this._users.push(g),1===d){g.webID=e,g.userType=n.a.USER,g.sex=this.resolveSex(t.readString()),g.groupID=""+t.readInt(),g.groupStatus=t.readInt(),g.groupName=t.readString();const s=t.readString();""!==s&&(o=this.convertSwimFigure(s,o,g.sex)),g.figure=o,g.activityPoints=t.readInt(),g.isModerator=t.readBoolean()}else if(2===d)g.userType=n.a.PET,g.figure=o,g.webID=e,g.subType=t.readInt().toString(),g.ownerId=t.readInt(),g.ownerName=t.readString(),g.rarityLevel=t.readInt(),g.hasSaddle=t.readBoolean(),g.isRiding=t.readBoolean(),g.canBreed=t.readBoolean(),g.canHarvest=t.readBoolean(),g.canRevive=t.readBoolean(),g.hasBreedingPermission=t.readBoolean(),g.petLevel=t.readInt(),g.petPosture=t.readString();else if(3===d)g.userType=n.a.BOT,g.webID=-1*c,g.figure=-1===o.indexOf("/")?o:"hr-100-.hd-180-1.ch-876-66.lg-270-94.sh-300-64",g.sex=r.M;else if(4===d){g.userType=n.a.RENTABLE_BOT,g.webID=e,g.sex=this.resolveSex(t.readString()),g.figure=o,g.ownerId=t.readInt(),g.ownerName=t.readString();const s=t.readInt();if(s){const e=[];let i=0;for(;i<s;)e.push(t.readShort()),i++;g.botSkills=e}}s++}return!0}resolveSex(t){return"f"===t.substr(0,1).toLowerCase()?r.F:r.M}convertSwimFigure(t,e,s){const i=e.split(".");let n=1,r=1,a=1,o=0;for(;o<i.length;){const t=i[o].split("-");t.length>2&&"hd"===t[0]&&(n=parseInt(t[2])),o++}const c=["238,238,238","250,56,49","253,146,160","42,199,210","53,51,44","239,255,146","198,255,152","255,146,90","157,89,126","182,243,255","109,255,51","51,120,201","255,182,49","223,161,233","249,251,50","202,175,143","197,198,197","71,98,61","138,131,97","255,140,51","84,198,39","30,108,153","152,79,136","119,200,255","255,192,142","60,75,135","124,44,71","215,255,227","143,63,28","255,99,147","31,155,121","253,255,51"],_=t.split("=");if(_.length>1){const t=_[1].split("/");a="F"===s?10010:10011,r=1e4+c.indexOf(t[1])+1}return e+".bds-10001-"+n+".ss-"+a+"-"+r}get users(){return this._users}}class o extends i.a{constructor(t){super(t,a)}getParser(){return this.parser}}},fuks:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},gEiT:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},gHKk:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},gLCd:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.NORMAL=0,t.GENERIC=1,t.BOT=2,t})()},gOUc:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._errorCode=0,this._userId=0,this._message=null,!0}parse(t){return!!t&&(this._errorCode=t.readInt(),this._userId=t.readInt(),this._message=t.readString(),!0)}get errorCode(){return this._errorCode}get userId(){return this._userId}get message(){return this._message}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},gnch:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},gnow:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s){this._data=[t+" "+e,s]}getMessageArray(){return this._data}dispose(){}}},h2l6:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},h5lc:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},hBKr:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("Fv14"),n=s("P7Cj");class r{constructor(t){this._badgeId="",this._level=1,this._base="",this._badgeId=t,this.parseText()}parseText(){let t=this._badgeId.length-1;for(;t>0&&this.isNumber(this._badgeId.charAt(t));)t--;this._base=this._badgeId.substr(0,t+1);const e=this._badgeId.substr(t+1,this._badgeId.length);e&&""!==e&&(this._level=Number.parseInt(e))}isNumber(t){const e=t.charCodeAt(0);return e>=48&&e<=57}get level(){return this._level}set level(t){this._level=Math.max(1,t)}get getBadgeId(){return this._base+this._level}get base(){return this._base}}var a=s("ry6F");class o extends i.a{constructor(){super(),this._definitions=new Map,this._parameters=new Map,this._romanNumerals=["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII","XIII","XIV","XV","XVI","XVII","XVIII","XIX","XX","XXI","XXII","XXIII","XXIV","XXV","XXVI","XXVII","XXVIII","XXIX","XXX"]}onInit(){this.loadLocalizationFromURL(n.a.instance.getConfiguration("external.texts.url"))}loadLocalizationFromURL(t){const e=new XMLHttpRequest;try{e.open("GET",t),e.onloadend=this.onLocalizationLoaded.bind(this),e.onerror=this.onLocalizationFailed.bind(this),e.send()}catch(s){this.logger.error(s)}}onLocalizationLoaded(t){t&&(this.parseLocalization(t.target.response),this.events&&this.events.dispatchEvent(new a.a(a.a.LOADED)))}onLocalizationFailed(t){this.events&&this.events.dispatchEvent(new a.a(a.a.FAILED))}parseLocalization(t){if(t){t=JSON.parse(t);for(const e in t)this._definitions.set(e,t[e])}}getRomanNumeral(t){return this._romanNumerals[Math.max(0,t-1)]}getBadgeBaseAndLevel(t){const e=new r(t);return e.level--,e.getBadgeId}getValue(t,e=!0){t.startsWith("${")&&(t=t.substr(2,t.length-3));let s=this._definitions.get(t)||null;if(s&&e){const e=this._parameters.get(t);if(e)for(const[t,i]of e)s=s.replace("%"+t+"%",i)}return s||t}getValueWithParameter(t,e,s){const i=this.getValue(t,!1),n=i.replace("%"+e+"%",s);if(i.startsWith("%{")){const t=new RegExp("%{"+e.toUpperCase()+"\\|([^|]*)\\|([^|]*)\\|([^|]*)}"),r=i.match(t);if(!r)return n;let a=-1,o=!1;switch(Number.parseInt(s)){case 0:a=1;break;case 1:a=2;break;default:case 2:a=3,o=!0}if(-1==a||void 0===r[a])return n;const c=r[a];if(c)return c.replace("%%",s)}return n}getValueWithParameters(t,e,s){let i=this.getValue(t,!1);for(let n=0;n<e.length;n++)i=i.replace("%"+e[n]+"%",s[n]);return i}setValue(t,e){this._definitions.set(t,e)}registerParameter(t,e,s){if(!t||0===t.length||!e||0===e.length)return;let i=this._parameters.get(t);i||(i=new Map,this._parameters.set(t,i)),i.set(e,s)}}},hFyr:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},hTzv:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._length=0,this._dictionary=new Map,this._array=[],this._keys=[]}get length(){return this._length}get disposed(){return!this._dictionary}dispose(){if(!this._dictionary){for(const t of this._dictionary.keys())this._dictionary.delete(t);this._dictionary=null}this._length=0,this._array=null,this._keys=null}reset(){for(const t of this._dictionary.keys())this._dictionary.delete(t);this._length=0,this._array=[],this._keys=[]}unshift(t,e){return null===this._dictionary.get(t)&&(this._dictionary.set(t,e),this._array.unshift(e),this._keys.unshift(t),this._length++,!0)}add(t,e){return void 0===this._dictionary.get(t)&&(this._dictionary.set(t,e),this._array[this._length]=e,this._keys[this._length]=t,this._length++,!0)}remove(t){const e=this._dictionary.get(t);if(!e)return null;const s=this._array.indexOf(e);return s>=0&&(this._array.splice(s,1),this._keys.splice(s,1),this._length--),this._dictionary.delete(t),e}getWithIndex(t){return t<0||t>=this._length?null:this._array[t]}getKey(t){return t<0||t>=this._length?null:this._keys[t]}getKeys(){return this._keys.slice()}hasKey(t){return this._keys.indexOf(t)>-1}getValue(t){return this._dictionary.get(t)}getValues(){return this._array.slice()}hasValue(t){return this._array.indexOf(t)>-1}indexOf(t){return this._array.indexOf(t)}concatenate(t){for(const e of t._keys)this.add(e,t.getValue(e))}clone(){const t=new i;return t.concatenate(this),t}}},hXx8:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("Ns5P");let n=(()=>{class t extends i.a{constructor(e,s,i){super(t.RSUBE_BADGES,e),this._userId=0,this._badges=[],this._userId=s,this._badges=i}get userId(){return this._userId}get badges(){return this._badges}}return t.RSUBE_BADGES="RSUBE_BADGES",t})()},"i+XF":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._message=null,this._link=null,!0}parse(t){return!!t&&(this._message=t.readString(),this._link=t.readString(),!0)}get message(){return this._message}get link(){return this._link}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"i/ye":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._senderId=0,this._messageText=null,this._secondsSinceSent=0,this._extraData=null,!0}parse(t){return!!t&&(this._senderId=t.readInt(),this._messageText=t.readString(),this._secondsSinceSent=t.readInt(),t.bytesAvailable&&(this._extraData=t.readString()),!0)}get senderId(){return this._senderId}get messageText(){return this._messageText}get secondsSinceSent(){return this._secondsSinceSent}get extraData(){return this._extraData}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},i7vr:function(t,e,s){"use strict";s.d(e,"a",function(){return A});var i=s("Fv14"),n=s("3xex"),r=s("S+Gq"),a=s("zTkZ"),o=s("8Dbs"),c=s("3md2"),_=s("uMJ2"),h=s("/3sV"),l=s("uHVT"),u=s("itFj"),d=s("Aavw"),g=s("dmof"),m=s("P7Cj"),p=s("GN+4");class f{constructor(t,e){this._image=t,this._placeHolder=e}get image(){return this._image}get placeHolder(){return this._placeHolder}}var E=s("JKJw");let S=(()=>{class t{constructor(t,e){this._assets=t,this._events=e,this._requestedBadges=new Map}dispose(){this._assets=null}getBadgeImage(t,e="normal_badge",s=!0){let i=this.getBadgeTexture(t,e);return!i&&s&&(i=this.getBadgePlaceholder()),i}getBadgeInfo(t){const e=this.getBadgeTexture(t);return e?new f(e,!1):new f(this.getBadgePlaceholder(),!0)}loadBadgeImage(t,e="normal_badge"){return this._assets.getTexture(t)?t:(this.getBadgeTexture(t,e),null)}getBadgeTexture(t,e="normal_badge"){const s=this._assets.getTexture(t);if(s)return s.clone();if(this._requestedBadges.get(t))return null;const i=this.getBadgeUrl(t,e);return i&&(this._requestedBadges.set(t,!0),this._assets.downloadAsset(i,e=>{if(e){const e=this._assets.getTexture(t);e&&this._events&&this._events.dispatchEvent(new E.a(t,e.clone()))}})),null}getBadgePlaceholder(){const t=this._assets.getTexture("loading_icon");return t?t.clone():null}getBadgeUrl(e,s="normal_badge"){let i=null;switch(s){case t.NORMAL_BADGE:i=m.a.instance.getConfiguration("badge.asset.url").replace("%badgename%",e);break;case t.GROUP_BADGE:i=m.a.instance.getConfiguration("badge.asset.group.url").replace("%badgedata%",e)}return i}}return t.GROUP_BADGE="group_badge",t.NORMAL_BADGE="normal_badge",t})();var I=s("dEqu"),R=s("lvFG"),b=s("vuPI"),v=s("3r1x");class T{constructor(t,e,s,i,n,r,a,o,c,_,h,l,u,d,g,m){const[p,f]=s.split("*");this._type=t,this._id=e,this._fullName=s,this._className=p,this._colorId=parseInt(f)||0,this._name=i,this._description=n,this._furniLine=r,this._offerId=l,this._adUrl=u,this._excludeDynamic=d,this._specialType=g,this._customParams=m,this._dimensions=o,this._canStandOn=c,this._canSitOn=_,this._canLayOn=h}get type(){return this._type}get id(){return this._id}get fullName(){return this._fullName}get className(){return this._className}get colorId(){return this._colorId}get name(){return this._name}get description(){return this._description}get furniLine(){return this._furniLine}get colors(){return this._colors}get dimensions(){return this._dimensions}get canStandOn(){return this._canStandOn}get canSitOn(){return this._canSitOn}get canLayOn(){return this._canLayOn}get offerId(){return this._offerId}get adUrl(){return this._adUrl}get excludeDynamic(){return this._excludeDynamic}get specialType(){return this._specialType}get customParams(){return this._customParams}get isExternalImage(){return-1!==this._className.indexOf("external_image")}}var O=s("z20u");let y=(()=>{class t extends b.a{constructor(t,e,s){super(),this._floorItems=t,this._wallItems=e,this._localization=s}loadFurnitureData(t){if(!t)return;const e=new XMLHttpRequest;e.addEventListener("loadend",this.onFurnitureDataLoaded.bind(this,e)),e.addEventListener("error",this.onFurnitureDataError.bind(this,e)),e.open("GET",t),e.send()}onFurnitureDataLoaded(e){if(e){if(e.removeEventListener("loadend",this.onFurnitureDataLoaded.bind(this,e)),e.removeEventListener("error",this.onFurnitureDataError.bind(this,e)),e.responseText){const t=JSON.parse(e.responseText);t.floorItems&&this.parseFloorItems(t.floorItems),t.wallItems&&this.parseWallItems(t.wallItems)}this.dispatchEvent(new v.a(t.FURNITURE_DATA_READY))}}onFurnitureDataError(e){e&&(e.removeEventListener("loadend",this.onFurnitureDataLoaded.bind(this,e)),e.removeEventListener("error",this.onFurnitureDataError.bind(this,e)),this.dispatchEvent(new v.a(t.FURNITURE_DATA_ERROR)))}parseFloorItems(t){if(t&&t.length)for(const e of t){if(!e)continue;const t=new T(O.a.FLOOR,e.id,e.className,e.name,e.description,e.furniLine,e.colors,e.dimensions,e.canStandOn,e.canSitOn,e.canLayOn,e.offerId,e.adUrl,e.excludeDynamic,e.specialType,e.customParams);this._floorItems.set(t.id,t),this.updateLocalizations(t)}}parseWallItems(t){if(t&&t.length)for(const e of t){if(!e)continue;const t=new T(O.a.WALL,e.id,e.className,e.name,e.description,e.furniLine,e.colors,e.dimensions,e.canStandOn,e.canSitOn,e.canLayOn,e.offerId,e.adUrl,e.excludeDynamic,e.specialType,e.customParams);this._wallItems.set(t.id,t),this.updateLocalizations(t)}}updateLocalizations(t){if(this._localization)switch(t.type){case O.a.FLOOR:return this._localization.setValue("roomItem.name."+t.id,t.name),void this._localization.setValue("roomItem.desc."+t.id,t.description);case O.a.WALL:return this._localization.setValue("wallItem.name."+t.id,t.name),void this._localization.setValue("wallItem.desc."+t.id,t.description)}}}return t.FURNITURE_DATA_READY="FDP_FURNITURE_DATA_READY",t.FURNITURE_DATA_ERROR="FDP_FURNITURE_DATA_ERROR",t})();class A extends i.a{constructor(t){super(),this._communication=t,this.resetUserInfo(),this._clubLevel=0,this._securityLevel=0,this._isAmbassador=!1,this._systemOpen=!1,this._systemShutdown=!1,this._isAuthenticHabbo=!1,this._isRoomCameraFollowDisabled=!1,this._uiFlags=0,this._floorItems=new Map,this._wallItems=new Map,this._furnitureData=null,this._furnitureReady=!1,this._furnitureListenersNotified=!1,this._pendingFurnitureListeners=[],this._badgeImageManager=null,this.onFurnitureDataReadyEvent=this.onFurnitureDataReadyEvent.bind(this)}onInit(){this.loadFurnitureData(),this.loadBadgeImageManager(),this._communication.registerMessageEvent(new c.a(this.onUserFigureEvent.bind(this))),this._communication.registerMessageEvent(new _.a(this.onUserInfoEvent.bind(this))),this._communication.registerMessageEvent(new o.a(this.onUserPermissionsEvent.bind(this))),this._communication.registerMessageEvent(new n.a(this.onAvailabilityStatusMessageEvent.bind(this))),this._communication.registerMessageEvent(new l.a(this.onUserSettingsEvent.bind(this))),this._communication.registerMessageEvent(new r.a(this.onChangeNameUpdateEvent.bind(this))),this._communication.registerMessageEvent(new h.a(this.onUserNameChangeMessageEvent.bind(this))),this._communication.registerMessageEvent(new a.a(this.onRoomModelNameEvent.bind(this)))}onDispose(){this.destroyFurnitureData(),super.onDispose()}resetUserInfo(){this._userId=0,this._name=null,this._figure=null,this._gender=null,this._realName=null,this._canChangeName=!1}loadFurnitureData(){this.destroyFurnitureData(),this._furnitureData=new y(this._floorItems,this._wallItems,m.a.instance.localization),this._furnitureData.addEventListener(y.FURNITURE_DATA_READY,this.onFurnitureDataReadyEvent),this._furnitureData.loadFurnitureData(m.a.instance.getConfiguration("furnidata.url"))}loadBadgeImageManager(){this._badgeImageManager||(this._badgeImageManager=new S(m.a.instance.core.asset,this.events))}getAllFurnitureData(t){if(!this._floorItems||!this._floorItems.size)return void(-1===this._pendingFurnitureListeners.indexOf(t)&&this._pendingFurnitureListeners.push(t));const e=[];for(const s of this._floorItems.values())s&&e.push(s);for(const s of this._wallItems.values())s&&e.push(s);return e&&e.length?e:null}removePendingFurniDataListener(t){if(!this._pendingFurnitureListeners)return;const e=this._pendingFurnitureListeners.indexOf(t);-1!==e&&this._pendingFurnitureListeners.splice(e,1)}onUserFigureEvent(t){t&&t.connection&&(this._figure=t.getParser().figure,this._gender=t.getParser().gender,p.a.updateFigure(this._figure))}onUserInfoEvent(t){if(!t||!t.connection)return;this.resetUserInfo();const e=t.getParser().userInfo;e&&(this._userId=e.userId,this._name=e.username,this._figure=e.figure,this._gender=e.gender,this._realName=e.realName,this._respectsReceived=e.respectsReceived,this._respectsLeft=e.respectsRemaining,this._respectsPetLeft=e.respectsPetRemaining,this._canChangeName=e.canChangeName)}onUserPermissionsEvent(t){t&&t.connection&&(this._clubLevel=t.getParser().clubLevel,this._securityLevel=t.getParser().securityLevel,this._isAmbassador=t.getParser().isAmbassador)}onAvailabilityStatusMessageEvent(t){if(!t||!t.connection)return;const e=t.getParser();if(e&&(this._systemOpen=e.isOpen,this._systemShutdown=e.onShutdown,this._isAuthenticHabbo=e.isAuthenticUser,this._isAuthenticHabbo&&this._furnitureReady&&!this._furnitureListenersNotified&&(this._furnitureListenersNotified=!0,this._pendingFurnitureListeners&&this._pendingFurnitureListeners.length)))for(const s of this._pendingFurnitureListeners)s&&s.loadFurnitureData()}onUserSettingsEvent(t){if(!t||!t.connection)return;const e=t.getParser();e&&(this._isRoomCameraFollowDisabled=e.cameraFollow,this._uiFlags=e.flags)}onChangeNameUpdateEvent(t){if(!t||!t.connection)return;const e=t.getParser();e&&e.resultCode===r.a._Str_5797&&(this._canChangeName=!1,this.events.dispatchEvent(new R.a(e.name)))}onUserNameChangeMessageEvent(t){if(!t||!t.connection)return;const e=t.getParser();e&&e.webId===this.userId&&(this._name=e.newName,this._canChangeName=!1,this.events.dispatchEvent(new R.a(this._name)))}onRoomModelNameEvent(t){if(!t)return;const e=t.getParser();e&&p.a.roomVisited(e.roomId)}onFurnitureDataReadyEvent(t){if(this._furnitureData.removeEventListener(y.FURNITURE_DATA_READY,this.onFurnitureDataReadyEvent),this._furnitureReady=!0,this._isAuthenticHabbo&&!this._furnitureListenersNotified&&(this._furnitureListenersNotified=!0,this._pendingFurnitureListeners&&this._pendingFurnitureListeners.length))for(const e of this._pendingFurnitureListeners)e&&e.loadFurnitureData()}destroyFurnitureData(){this._furnitureData&&(this._furnitureData.dispose(),this._furnitureData=null)}getFloorItemData(t){return this._floorItems.get(t)||null}getFloorItemDataByName(t){if(!t||!this._floorItems||!this._floorItems.size)return null;for(const e of this._floorItems.values())if(e&&e.className===t)return e}getWallItemData(t){return this._wallItems.get(t)||null}getWallItemDataByName(t){if(!t||!this._wallItems||!this._wallItems.size)return null;for(const e of this._wallItems.values())if(e&&e.className===t)return e}getBadgeUrl(t){return this._badgeImageManager.getBadgeUrl(t)}getGroupBadgeUrl(t){return this._badgeImageManager.getBadgeUrl(t,S.GROUP_BADGE)}getBadgeImage(t){return this._badgeImageManager.getBadgeImage(t)}getGroupBadgeImage(t){return this._badgeImageManager.getBadgeImage(t,S.GROUP_BADGE)}loadBadgeImage(t){return this._badgeImageManager.loadBadgeImage(t)}loadGroupBadgeImage(t){return this._badgeImageManager.loadBadgeImage(t,S.GROUP_BADGE)}isUserIgnored(t){return!1}hasSecurity(t){return this._securityLevel>=t}giveRespect(t){t<0||this._respectsLeft<=0||(this.send(new g.a(t)),this._respectsLeft--)}givePetRespect(t){t<0||this._respectsPetLeft<=0||(this.send(new u.a(t)),this._respectsPetLeft--)}sendSpecialCommandMessage(t,e=0){this.send(new d.a(t))}send(t){this._communication.connection.send(t)}get communication(){return this._communication}get userId(){return this._userId}get userName(){return this._name}get figure(){return this._figure}get gender(){return this._gender}get realName(){return this._realName}get respectsReceived(){return this._respectsReceived}get respectsLeft(){return this._respectsLeft}get respectsPetLeft(){return this._respectsPetLeft}get canChangeName(){return this._canChangeName}get clubLevel(){return this._clubLevel}get securityLevel(){return this._securityLevel}get isAmbassador(){return this._isAmbassador}get isSystemOpen(){return this._systemOpen}get isSystemShutdown(){return this._systemShutdown}get isAuthenticHabbo(){return this._isAuthenticHabbo}get isModerator(){return this._securityLevel>=I.a.MODERATOR}get isGodMode(){return this.securityLevel>=I.a.MODERATOR}get isCameraFollowDisabled(){return this._isRoomCameraFollowDisabled}get uiFlags(){return this._uiFlags}}},iAsj:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("jBuC");class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._itemId=0,this._spriteId=0,this._spriteName=null,this._x=0,this._y=0,this._direction=0,this._z=0,this._stackHeight=0,this._type=0,this._data=null,this._state=0,this._expires=0,this._usagePolicy=0,this._userId=0,this._username=null,!0}parse(t){return!!t&&(this._itemId=t.readInt(),this._spriteId=t.readInt(),this._x=t.readInt(),this._y=t.readInt(),this._direction=t.readInt()%8*45,this._z=parseFloat(t.readString()),this._stackHeight=parseFloat(t.readString()),this._type=t.readInt(),this._data=i.a.parseObjectData(t),this._state=parseFloat(this._data&&this._data.getLegacyString())||0,this._expires=t.readInt(),this._usagePolicy=t.readInt(),this._userId=t.readInt(),this._username=null,this._spriteId<0&&(this._spriteName=t.readString()),!0)}get itemId(){return this._itemId}get spriteId(){return this._spriteId}get x(){return this._x}get y(){return this._y}get direction(){return this._direction}get z(){return isNaN(this._z)?0:this._z}get stackHeight(){return isNaN(this._stackHeight)?0:this._stackHeight}get type(){return this._type}get data(){return this._data}get state(){return this._state}get expires(){return this._expires}get usagePolicy(){return this._usagePolicy}get userId(){return this._userId}get username(){return this._username}set username(t){this._username=t}get spriteName(){return this._spriteName}set spriteName(t){this._spriteName=t}}},iK4q:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{flush(){return!0}parse(t){return!!t&&(this._reason=t.readInt(),this._Str_10068=t.readString(),!0)}get reason(){return this._reason}get _Str_17035(){return this._Str_10068}}return t._Str_18150=7,t._Str_18383=8,t})()},ipbj:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{get furniId(){return this._furniId}flush(){return this._furniId=-1,!0}parse(t){return this._furniId=t.readInt(),!0}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},itFj:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},iv6j:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},j7GY:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},j8oG:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e=0,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},jBuC:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("2L69"),n=s("v12S");class r{flush(){return this._itemId=0,this._data=null,!0}parse(t){return!!t&&(this._itemId=parseInt(t.readString()),this._data=r.parseObjectData(t),!0)}static parseObjectData(t){if(!t)return null;const e=i.a.getData(t.readInt());return e?(e.parseWrapper(t),e):null}static parseWallStuffData(t){if(!t)return null;const e=new n.a;return e.setString(t.readString()),e}get furnitureId(){return this._itemId}get objectData(){return this._data}}},jFxZ:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO"),n=s("c746");class r extends i.a{constructor(t){super(t,n.a)}getParser(){return this.parser}}},jNJ0:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},jdh6:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("5+UO");class n{constructor(t,e){this._action=t,this._value=e}get action(){return this._action}get value(){return this._value}}class r{constructor(t,e,s,i,n,r,a,o=0,c=0,_=0,h,l,u){this._id=t,this._x=e,this._y=s,this._z=i,this._height=n,this._headDirection=r,this._direction=a,this._targetX=o,this._targetY=c,this._targetZ=_,this._didMove=h,this._canStandUp=l,this._actions=u||[]}get id(){return this._id}get x(){return this._x}get y(){return this._y}get z(){return this._z}get height(){return this._height}get headDirection(){return this._headDirection}get direction(){return this._direction}get targetX(){return this._targetX}get targetY(){return this._targetY}get targetZ(){return this._targetZ}get didMove(){return this._didMove}get canStandUp(){return this._canStandUp}get actions(){return this._actions}}class a{flush(){return this._statuses=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;){const s=this.parseStatus(t);s?(this._statuses.push(s),e--):e--}return!0}parseStatus(t){if(!t)return null;const e=t.readInt(),s=t.readInt(),i=t.readInt(),a=parseFloat(t.readString()),o=t.readInt()%8*45,c=t.readInt()%8*45,_=t.readString();let h=0,l=0,u=0,d=0,g=!1,m=!1;if(_){const t=_.split("/"),p=t.length,f=[];if(p)for(let e=0;e<p;e++){const s=t[e];if(!s)continue;const[i,r,a]=s.split(" ");if(i&&r){switch(i){case"mv":[h,l,u]=r.split(",").map(t=>parseFloat(t)),m=!0;break;case"sit":void 0!==a&&(g="1"===r),d=parseFloat(r);break;case"lay":d=parseFloat(r)}f.push(new n(i,r))}}this._statuses.push(new r(e,s,i,a,d,o,c,h,l,u,m,g,f))}}get statuses(){return this._statuses}}class o extends i.a{constructor(t){super(t,a)}getParser(){return this.parser}}},jdue:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},jfHZ:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){if(!t)throw new Error("invalid_wrapper");this._id=t.readInt(),this._name=t.readString()}get id(){return this._id}get name(){return this._name}}},"jgc/":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},jzpY:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._unitId=null,this._figure=null,this._gender="M",this._motto=null,this._achievementScore=0,!0}parse(t){return!!t&&(this._unitId=t.readInt(),this._figure=t.readString(),this._gender=t.readString().toLocaleUpperCase(),this._motto=t.readString(),this._achievementScore=t.readInt(),!0)}get unitId(){return this._unitId}get figure(){return this._figure}get gender(){return this._gender}get motto(){return this._motto}get achievementScore(){return this._achievementScore}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},k0R1:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.CATALOG="catalog",t.INVENTORY="inventory",t})()},kRfe:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},kXXe:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{}},kZQz:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._errorCode=0,!0}parse(t){return!!t&&(this._errorCode=t.readInt(),!0)}get errorCode(){return this._errorCode}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},kiCC:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},kiYJ:function(t,e,s){"use strict";s.d(e,"a",function(){return c});var i=s("IqKQ"),n=s("auym"),r=s("Xr/m"),a=s("vzKh"),o=s("awbM");class c extends r.a{constructor(){super(),this._logger=new a.a(this.constructor.name),this._textures=new Map,this._collections=new Map,this._pendingUrls=new Map}static removeFileExtension(t){return t.substring(0,t.lastIndexOf("."))||t}getTexture(t){return t&&this._textures.get(t)||null}setTexture(t,e){t&&e&&this._textures.set(t,e)}getAsset(t){if(!t)return null;for(const e of this._collections.values()){if(!e)continue;const s=e.getAsset(t);if(s)return s}return null}getCollection(t){return t&&this._collections.get(t)||null}createCollection(t,e){if(!t)return null;const s=new n.a(t,e);if(s){for(const[t,e]of s.textures.entries())this.setTexture(t,e);this._collections.set(s.name,s)}}downloadAsset(t,e){return this.downloadAssets([t],e)}downloadAssets(t,e){if(!t||!t.length)return e(!0),!0;const s=t.length;let n=0;const r=(t,i,r)=>{t&&t.destroy(),r?(n++,n===s&&e(!0)):this._logger.error("Failed to download asset: "+i.url)};for(const a of t){if(!a)continue;const t=new i.g,e={crossOrigin:!1,xhrType:a.endsWith(".nitro")?"arraybuffer":"json"};t.use((e,s)=>this.assetLoader(t,e,s,r)).add(a,e).load()}return!0}assetLoader(t,e,s,n){if(!e||e.error)return e&&e.texture&&e.texture.destroy(!0),void n(t,e,!1);if("nitro"===e.extension){const s=new o.a(e.data),r=s.jsonFile;if(!r.type)return void n(t,e,!1);if(r.spritesheet&&Object.keys(r.spritesheet).length){const a=s.image;let o=s.baseTexture;if(!o&&(a&&(o=new i.c("data:image/png;base64,"+a)),!o))return void n(t,e,!1);if(o.valid){const s=new i.o(o,r.spritesheet);s.parse(i=>{this.createCollection(r,s),n(t,e,!0)})}else o.once("loaded",()=>{o.removeAllListeners();const s=new i.o(o,r.spritesheet);s.parse(i=>{this.createCollection(r,s),n(t,e,!0)})}),o.once("error",()=>{o.removeAllListeners(),n(t,e,!1)});return}this.createCollection(r,null),n(t,!0)}else if(e.type===i.h.TYPE.JSON){const s=e.data;if(!s.type)return;if(s.spritesheet&&Object.keys(s.spritesheet).length){const r=s.spritesheet.meta&&s.spritesheet.meta.image;if(!r||!r.length)return void n(t,e,!1);const a=e.url.substring(0,e.url.lastIndexOf("/")+1)+r,o=i.c.from(a);if(o.valid){const r=new i.o(o,s.spritesheet);r.parse(i=>{this.createCollection(s,r),n(t,e,!0)})}else o.once("loaded",()=>{o.removeAllListeners();const r=new i.o(o,s.spritesheet);r.parse(i=>{this.createCollection(s,r),n(t,e,!0)})}),o.once("error",()=>{o.removeAllListeners(),n(t,e,!1)});return}return this.createCollection(s,null),void n(t,e,!0)}e.type!==i.h.TYPE.IMAGE||(e.texture.valid?(this.setTexture(e.name,e.texture),n(t,e,!0)):n(t,e,!1))}get collections(){return this._collections}}},lMbP:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},lN2i:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO"),n=s("iK4q");class r extends i.a{constructor(t){super(t,n.a)}getParser(){return this.parser}}},lVe0:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._position=0,this._dataView=new DataView(t)}readByte(){const t=this._dataView.getInt8(this._position);return this._position++,t}readBytes(t){const e=new i(this._dataView.buffer.slice(this._position,this._position+t));return this._position+=t,e}readShort(){const t=this._dataView.getInt16(this._position);return this._position+=2,t}readInt(){const t=this._dataView.getInt32(this._position);return this._position+=4,t}remaining(){return this._dataView.byteLength-this._position}toString(t){return(new TextDecoder).decode(this._dataView.buffer)}toArrayBuffer(){return this._dataView.buffer}}},lbEV:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._floorType=null,this._wallType=null,this._landscapeType=null,this._landscapeAnimation=null,!0}parse(t){if(!t)return!1;const e=t.readString(),s=t.readString();switch(e){case"floor":this._floorType=s;break;case"wallpaper":this._wallType=s;break;case"landscape":this._landscapeType=s;break;case"landscapeanim":this._landscapeAnimation=s}return!0}get floorType(){return this._floorType}get wallType(){return this._wallType}get landscapeType(){return this._landscapeType}get landscapeAnimation(){return this._landscapeAnimation}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},liWC:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._instantlyRefreshCatalogue=!1,this._newFurniDataHash=null,!0}parse(t){return!!t&&(this._instantlyRefreshCatalogue=t.readBoolean(),t.bytesAvailable&&(this._newFurniDataHash=t.readString()),!0)}get instantlyRefreshCatalogue(){return this._instantlyRefreshCatalogue}get newFurniDataHash(){return this._newFurniDataHash}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},lrbo:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},lulp:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},lvFG:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("3r1x");let n=(()=>{class t extends i.a{constructor(e){super(t.UNUE_NAME_UPDATED),this._name=e}get name(){return this._name}}return t.UNUE_NAME_UPDATED="unue_name_updated",t})()},m7hj:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("bakE");class r{flush(){return this._definition=null,!0}parse(t){return!!t&&(this._definition=new n.a(t),!0)}get definition(){return this._definition}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},mGgu:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._unitId=null,this._danceId=0,!0}parse(t){return!!t&&(this._unitId=t.readInt(),this._danceId=t.readInt(),!0)}get unitId(){return this._unitId}get danceId(){return this._danceId}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},mHKk:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},mP1c:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.HOTEL_VIEW="hotel_view",t.HOME_ROOM="home_room",t.NAVIGATOR="navigator",t.CATALOG="catalog",t.INVENTORY="inventory",t.ME_MENU="me_menu",t.FRIEND_LIST="friendlist",t})()},mQ1q:function(t,e,s){"use strict";s.d(e,"a",function(){return r});class i{flush(){return this._x=0,this._y=0,this._direction=0,!0}parse(t){return!!t&&(this._x=t.readInt(),this._y=t.readInt(),this._direction=t.readInt(),!0)}get x(){return this._x}get y(){return this._y}get direction(){return this._direction}}var n=s("5+UO");class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"mkz/":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("DFHD");class n{constructor(t,e,s,i){this._leftSideLoc=0,this._rightSideLoc=0,this._leftSideLength=0,this._rightSideLength=0,this._leftSideLoc=t,this._rightSideLoc=e,this._leftSideLength=s,this._rightSideLength=i}get _Str_5120(){return this._leftSideLoc}get _Str_4659(){return this._rightSideLoc}get _Str_9124(){return this._leftSideLength}get _Str_12156(){return this._rightSideLength}}let r=(()=>{class t{constructor(t,e,s,n,r){let a,o,c,_,h,l,u,d;if(this._type=0,this._loc=null,this._leftSide=null,this._rightSide=null,this._normal=null,this._normalDirection=null,this._secondaryNormals=[],this._masks=[],this._loc=new i.a,this._loc.assign(e),this._leftSide=new i.a,this._leftSide.assign(s),this._rightSide=new i.a,this._rightSide.assign(n),this._type=t,null!=s&&null!=n&&(this._normal=i.a.crossProduct(s,n),a=0,o=0,c=0,_=0,h=0,0!=this.normal.x||0!=this.normal.y?(_=this.normal.x,h=this.normal.y,a=360+Math.atan2(h,_)/Math.PI*180,a>=360&&(a-=360),_=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y),h=this.normal.z,o=360+Math.atan2(h,_)/Math.PI*180,o>=360&&(o-=360)):o=this.normal.z<0?90:270,this._normalDirection=new i.a(a,o,0)),null!=r&&r.length>0)for(l=0;l<r.length;)u=r[l],null!=u&&u.length>0&&(d=new i.a,d.assign(u),d.multiply(1/d.length),this._secondaryNormals.push(d)),l++}get type(){return this._type}get loc(){return this._loc}get _Str_5424(){return this._leftSide}get _Str_4968(){return this._rightSide}get normal(){return this._normal}get _Str_25207(){return this._normalDirection}get _Str_20277(){return this._secondaryNormals.length}get _Str_6845(){return this._masks.length}_Str_22585(t){if(t<0||t>=this._Str_20277)return null;const e=new i.a;return e.assign(this._secondaryNormals[t]),e}addMask(t,e,s,i){const r=new n(t,e,s,i);this._masks.push(r)}_Str_8361(t){return t<0||t>=this._Str_6845?null:this._masks[t]}_Str_25133(t){const e=this._Str_8361(t);return null!=e?e._Str_5120:-1}_Str_23609(t){const e=this._Str_8361(t);return null!=e?e._Str_4659:-1}_Str_25097(t){const e=this._Str_8361(t);return null!=e?e._Str_9124:-1}_Str_25617(t){const e=this._Str_8361(t);return null!=e?e._Str_12156:-1}}return t.PLANE_UNDEFINED=0,t.PLANE_FLOOR=1,t.PLANE_WALL=2,t.PLANE_LANDSCAPE=3,t.PLANE_BILLBOARD=4,t})()},n7CB:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._unitId=null,!0}parse(t){return!!t&&(this._unitId=parseInt(t.readString()),!0)}get unitId(){return this._unitId}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},nL9H:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._stuffIds=[],this._intParams=[],this._stuffTypeSelectionEnabled=t.readBoolean(),this._furniLimit=t.readInt();let e=t.readInt();for(;e>0;)this._stuffIds.push(t.readInt()),e--;for(this._stuffTypeId=t.readInt(),this._id=t.readInt(),this._stringParam=t.readString(),e=t.readInt();e>0;)this._intParams.push(t.readInt()),e--;this._stuffTypeSelectionCode=t.readInt()}getBoolean(t){return 1===this._intParams[t]}get _Str_21824(){return this._stuffTypeSelectionEnabled}get _Str_6040(){return this._stuffTypeSelectionCode}set _Str_6040(t){this._stuffTypeSelectionCode=t}get maximumItemSelectionCount(){return this._furniLimit}get selectedItems(){return this._stuffIds}get id(){return this._id}get stringData(){return this._stringParam}get intData(){return this._intParams}get code(){return 0}get spriteId(){return this._stuffTypeId}}},nMRu:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},nQsh:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},ndLt:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){if(!t)throw new Error("invalid_wrapper");this._id=t.readInt(),this._name=t.readString(),this._gender=t.readInt(),this._online=t.readBoolean(),this._followingAllowed=t.readBoolean(),this._figure=t.readString(),this._categoryId=t.readInt(),this._motto=t.readString(),this._realName=t.readString(),this._lastAccess=t.readString(),this._persistedMessageUser=t.readBoolean(),this._vipMember=t.readBoolean(),this._pocketHabboUser=t.readBoolean(),this._relationshipStatus=t.readShort()}get id(){return this._id}get name(){return this._name}get gender(){return this._gender}get online(){return this._online}get followingAllowed(){return this._followingAllowed}get figure(){return this._figure}get categoryId(){return this._categoryId}get motto(){return this._motto}get lastAccess(){return this._lastAccess}get realName(){return this._realName}get persistedMessageUser(){return this._persistedMessageUser}get vipMember(){return this._vipMember}get pocketHabboUser(){return this._pocketHabboUser}get relationshipStatus(){return this._relationshipStatus}}},nlEz:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"o/0e":function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._roomId=0,this._roomName=null,this._ownerId=0,this._ownerName=null,this._doorMode=0,this._userCount=0,this._maxUserCount=0,this._description=null,this._tradeMode=2,this._score=0,this._ranking=0,this._categoryId=0,this._totalStars=0,this._groupId=0,this._groupName=null,this._groupBadge=null,this._tags=[],this._bitMask=0,this._thumbnail=null,this._allowPets=!1,this._showOwner=!0,this._displayAd=!1,this._adName=null,this._adDescription=null,this._adExpiresIn=0,this._allMuted=!1,this._canMute=!1,this._officialRoomPicRef=null,!0}parse(t){return!!t&&(this._roomId=t.readInt(),this._roomName=t.readString(),this._ownerId=t.readInt(),this._ownerName=t.readString(),this._doorMode=t.readInt(),this._userCount=t.readInt(),this._maxUserCount=t.readInt(),this._description=t.readString(),this._tradeMode=t.readInt(),this._score=t.readInt(),this._ranking=t.readInt(),this._categoryId=t.readInt(),this.parseTags(t),this.parseBitMask(t),!0)}parseTags(t){if(!t)return!1;this._tags=[];let e=t.readInt();for(;e>0;)this._tags.push(t.readString()),e--;return!0}parseBitMask(e){return!!e&&(this._bitMask=e.readInt(),this._bitMask&t.THUMBNAIL_BITMASK&&(this._officialRoomPicRef=e.readString()),this._bitMask&t.GROUPDATA_BITMASK&&(this._groupId=e.readInt(),this._groupName=e.readString(),this._groupBadge=e.readString()),this._bitMask&t.ROOMAD_BITMASK&&(this._adName=e.readString(),this._adDescription=e.readString(),this._adExpiresIn=e.readInt()),this._showOwner=(this._bitMask&t.SHOWOWNER_BITMASK)>0,this._allowPets=(this._bitMask&t.ALLOW_PETS_BITMASK)>0,this._displayAd=(this._bitMask&t.DISPLAY_ROOMAD_BITMASK)>0,this._thumbnail=null,!0)}get roomId(){return this._roomId}get roomName(){return this._roomName}set roomName(t){this._roomName=t}get ownerId(){return this._ownerId}get ownerName(){return this._ownerName}get doorMode(){return this._doorMode}get userCount(){return this._userCount}get maxUserCount(){return this._maxUserCount}get description(){return this._description}get tradeMode(){return this._tradeMode}get score(){return this._score}get ranking(){return this._ranking}get categoryId(){return this._categoryId}get tags(){return this._tags}get officialRoomPicRef(){return this._officialRoomPicRef}get habboGroupId(){return this._groupId}get groupName(){return this._groupName}get groupBadgeCode(){return this._groupBadge}get roomAdName(){return this._adName}get roomAdDescription(){return this._adDescription}get roomAdExpiresInMin(){return this._adExpiresIn}get showOwner(){return this._showOwner}get allowPets(){return this._allowPets}get displayRoomEntryAd(){return this._displayAd}}return t.THUMBNAIL_BITMASK=1,t.GROUPDATA_BITMASK=2,t.ROOMAD_BITMASK=4,t.SHOWOWNER_BITMASK=8,t.ALLOW_PETS_BITMASK=16,t.DISPLAY_ROOMAD_BITMASK=32,t.OPEN_STATE=0,t.DOORBELL_STATE=1,t.PASSWORD_STATE=2,t.INVISIBLE_STATE=4,t})()},o4p4:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},oHxB:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._id=-1,this._name=null,this._visible=!1,this._automatic=!1,this._automaticCategoryKey=null,this._globalCategoryKey=null,this._staffOnly=!1,!0}parse(t){return!!t&&(this._id=t.readInt(),this._name=t.readString(),this._visible=t.readBoolean(),this._automatic=t.readBoolean(),this._automaticCategoryKey=t.readString(),this._globalCategoryKey=t.readString(),this._staffOnly=t.readBoolean(),!0)}get id(){return this._id}get name(){return this._name}get visible(){return this._visible}get automatic(){return this._automatic}get automaticCategoryKey(){return this._automaticCategoryKey}get globalCategoryKey(){return this._globalCategoryKey}get staffOnly(){return this._staffOnly}}class r{flush(){return this._categories=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._categories.push(new n(t)),e--;return!0}get categories(){return this._categories}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},oKt9:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO"),n=s("Fwdp");class r extends i.a{constructor(t){super(t,n.a)}getParser(){return this.parser}}},"oe6/":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},p0wa:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},pDhE:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._userName=null,!0}parse(t){return!!t&&(this._userName=t.readString(),!0)}get userName(){return this._userName}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},pGYl:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},pRZV:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("hTzv");class r{flush(){return this._items=new n.a,!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;){const s=t.readInt();let i=t.readInt();const n=[];for(;i>0;)n.push(t.readInt()),i--;this._items.add(s,n),e--}return!0}getItemsByCategory(t){return this._items.getValue(t)}get categories(){return this._items.getKeys()}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},pjvS:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},porQ:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(...t){this._data=[t.length,...t]}getMessageArray(){return this._data}dispose(){}}},q4z0:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},qEDl:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.AVATAR_RENDER_READY="AVATAR_RENDER_READY",t})()},qKi6:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._roomId=0,!0}parse(t){return!!t&&(this._roomId=t.readInt(),!0)}get roomId(){return this._roomId}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},qLWH:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._mode=-1,!0}parse(t){return!!t&&(this._mode=t.readInt(),!0)}get mode(){return this._mode}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},qQgg:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._gameTypeId=0,this._url=null,this._gameClientId=null,!0}parse(t){return!!t&&(this._gameTypeId=t.readInt(),this._gameClientId=t.readString(),this._url=t.readString(),!0)}get gameTypeId(){return this._gameTypeId}get url(){return this._url}get gameClientId(){return this._gameClientId}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},qXDh:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},qZ7S:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._score=0,!0}parse(t){return!!t&&(this._score=t.readInt(),!0)}get score(){return this._score}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},r7iz:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},rbNg:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},rlQL:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},ry6F:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("3r1x");let n=(()=>{class t extends i.a{constructor(t){super(t)}}return t.LOADED="NLE_LOADED",t.FAILED="NLE_FAILED",t})()},sCRD:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._unitId=null,this._isTyping=!1,!0}parse(t){return!!t&&(this._unitId=t.readInt(),this._isTyping=1===t.readInt(),!0)}get unitId(){return this._unitId}get isTyping(){return this._isTyping}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"sGp+":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},sM2B:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"sR+E":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("iAsj");class r{flush(){return this._owners=new Map,this._items=[],!0}parse(t){if(!t)return!1;if(!this.parseOwners(t))return!1;let e=t.readInt();for(;e>0;){const s=new n.a(t);if(!s)continue;const i=this._owners.get(s.userId);i&&(s.username=i),this._items.push(s),e--}return!0}parseOwners(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._owners.set(t.readInt(),t.readString()),e--;return!0}get owners(){return this._owners}get items(){return this._items}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},sRv6:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO"),n=s("c746");class r extends i.a{constructor(t){super(t,n.a)}getParser(){return this.parser}}},sRxW:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.DIRECTION_TO_ANGLE=[45,90,135,180,225,270,315,0],t.DIRECTION_IS_FLIPPED=[!1,!1,!1,!1,!0,!0,!0,!1],t.MIN_DIRECTION=0,t.MAX_DIRECTION=7,t})()},sxwv:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("5+UO"),n=s("P5vI");class r{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._offerId=-1,this._localizationId=null,this._rent=!1,this._priceCredits=0,this._priceActivityPoints=0,this._priceActivityPointsType=0,this._clubLevel=0,this._giftable=!1,this._bundlePurchaseAllowed=!1,this._products=[],!0}parse(t){if(!t)return!1;this._offerId=t.readInt(),this._localizationId=t.readString(),this._rent=t.readBoolean(),this._priceCredits=t.readInt(),this._priceActivityPoints=t.readInt(),this._priceActivityPointsType=t.readInt(),this._giftable=t.readBoolean();let e=t.readInt();for(;e>0;)this._products.push(new n.a(t)),e--;return this._clubLevel=t.readInt(),this._bundlePurchaseAllowed=t.readBoolean(),!0}get offerId(){return this._offerId}get localizationId(){return this._localizationId}get rent(){return this._rent}get priceCredits(){return this._priceCredits}get priceActivityPoints(){return this._priceActivityPoints}get priceActivityPointsType(){return this._priceActivityPointsType}get clubLevel(){return this._clubLevel}get giftable(){return this._giftable}get bundlePurchaseAllowed(){return this._bundlePurchaseAllowed}get products(){return this._products}}class a{flush(){return this._offer=null,!0}parse(t){return!!t&&(this._offer=new r(t),!0)}get offer(){return this._offer}}class o extends i.a{constructor(t){super(t,a)}getParser(){return this.parser}}},"t0/d":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._visible=!1,this._icon=0,this._pageId=-1,this._pageName=null,this._localization=null,this._children=[],this._offerIds=[],!0}parse(t){if(!t)return!1;this._visible=t.readBoolean(),this._icon=t.readInt(),this._pageId=t.readInt(),this._pageName=t.readString(),this._localization=t.readString();let e=t.readInt();for(;e>0;)this._offerIds.push(t.readInt()),e--;let s=t.readInt();for(;s>0;)this._children.push(new n(t)),s--;return!0}get visible(){return this._visible}get icon(){return this._icon}get pageId(){return this._pageId}get pageName(){return this._pageName}get localization(){return this._localization}get children(){return this._children}get offerIds(){return this._offerIds}}class r{flush(){return this._root=null,!0}parse(t){return!!t&&(this._root=new n(t),this._newAdditionsAvailable=t.readBoolean(),this._catalogType=t.readString(),!0)}get root(){return this._root}get newAdditionsAvailable(){return this._newAdditionsAvailable}get catalogType(){return this._catalogType}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},t1CI:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("f6Tv");class r{flush(){return this._totalRequests=0,this._requests=[],!0}parse(t){if(!t)return!1;this._totalRequests=t.readInt();let e=t.readInt();for(;e>0;)this._requests.push(new n.a(t)),e--;return!0}get totalRequests(){return this._totalRequests}get requests(){return this._requests}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},tHQF:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.BODY="bd",t.SHOES="sh",t.LEGS="lg",t.CHEST="ch",t.WAIST_ACCESSORY="wa",t.CHEST_ACCESSORY="ca",t.HEAD="hd",t.HAIR="hr",t.FACE_ACCESSORY="fa",t.EYE_ACCESSORY="ea",t.HEAD_ACCESSORY="ha",t.HEAD_ACCESSORY_EXTRA="he",t.COAT_CHEST="cc",t.CHEST_PRINT="cp",t.LEFT_HAND_ITEM="li",t.LEFT_HAND="lh",t.LEFT_SLEEVE="ls",t.RIGHT_HAND="rh",t.RIGHT_SLEEVE="rs",t.FACE="fc",t.EYES="ey",t.HAIR_BIG="hrb",t.RIGHT_HAND_ITEM="ri",t.LEFT_COAT_SLEEVE="lc",t.RIGHT_COAT_SLEEVE="rc",t._Str_1286=[t.SHOES,t.LEGS,t.CHEST,t.WAIST_ACCESSORY,t.CHEST_ACCESSORY,t.HEAD,t.HAIR,t.FACE_ACCESSORY,t.EYE_ACCESSORY,t.HEAD_ACCESSORY,t.HEAD_ACCESSORY_EXTRA,t.COAT_CHEST,t.CHEST_PRINT],t})()},tLSS:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},tVIE:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("ZLse");class r{flush(){return this._achievement=null,!0}parse(t){return!!t&&(this._achievement=new n.a(t),!0)}get achievement(){return this._achievement}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},tWLA:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("XMGm"),n=s("MeCd"),r=s("KQk8");let a=(()=>{class t extends n.a{constructor(){super(),this._data={}}parseWrapper(t){if(!t)return;this._data={};const e=t.readInt();if(e)for(let s=0;s<e;s++)this._data[t.readString()]=t.readString();super.parseWrapper(t)}initializeFromRoomObjectModel(t){super.initializeFromRoomObjectModel(t),this._data=t.getValue(i.a.FURNITURE_DATA)||{}}writeRoomObjectModel(e){super.writeRoomObjectModel(e),e.setValue(i.a.FURNITURE_DATA_FORMAT,t.FORMAT_KEY),e.setValue(i.a.FURNITURE_DATA,this._data)}getLegacyString(){if(!this._data||!this._data.length)return"";const e=this._data[t.STATE];return null==e?"":e}compare(t){return!1}getValue(t){return this._data[t]}get data(){return this._data}}return t.FORMAT_KEY=r.a.MAP_KEY,t.STATE="state",t.RARITY="rarity",t})()},tfDB:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},u5n9:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._code=0,!0}parse(t){return!!t&&(this._code=t.readInt(),!0)}get code(){return this._code}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},uEox:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.LARGE="h",t.SMALL="sh",t})()},uHVT:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._volumeSystem=0,this._volumeFurni=0,this._volumeTrax=0,this._oldChat=!1,this._roomInvites=!1,this._cameraFollow=!1,this._flags=0,this._chatType=0,!0}parse(t){return!!t&&(this._volumeSystem=t.readInt(),this._volumeFurni=t.readInt(),this._volumeTrax=t.readInt(),this._oldChat=t.readBoolean(),this._roomInvites=t.readBoolean(),this._cameraFollow=t.readBoolean(),this._flags=t.readInt(),this._chatType=t.readInt(),!0)}get volumeSystem(){return this._volumeSystem}get volumeFurni(){return this._volumeFurni}get volumeTrax(){return this._volumeTrax}get oldChat(){return this._oldChat}get roomInvites(){return this._roomInvites}get cameraFollow(){return this._cameraFollow}get flags(){return this._flags}get chatType(){return this._chatType}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},uHXo:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},uMJ2:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._userId=0,this._username=null,this._figure=null,this._gender=null,this._motto=null,this._realName=null,this._directMail=!1,this._respectsReceived=0,this._respectsRemaining=0,this._respectsPetRemaining=0,this._streamPublishingAllowed=!1,this._lastAccessDate=null,this._canChangeName=!1,this._safetyLocked=!1,!0}parse(t){return!!t&&(this._userId=t.readInt(),this._username=t.readString(),this._figure=t.readString(),this._gender=t.readString(),this._motto=t.readString(),this._realName=t.readString(),this._directMail=t.readBoolean(),this._respectsReceived=t.readInt(),this._respectsRemaining=t.readInt(),this._respectsPetRemaining=t.readInt(),this._streamPublishingAllowed=t.readBoolean(),this._lastAccessDate=t.readString(),this._canChangeName=t.readBoolean(),this._safetyLocked=t.readBoolean(),!0)}get userId(){return this._userId}get username(){return this._username}get figure(){return this._figure}get gender(){return this._gender}get motto(){return this._motto}get realName(){return this._realName}get directMail(){return this._directMail}get respectsReceived(){return this._respectsReceived}get respectsRemaining(){return this._respectsRemaining}get respectsPetRemaining(){return this._respectsPetRemaining}get streamPublishingAllowed(){return this._streamPublishingAllowed}get lastAccessedDate(){return this._lastAccessDate}get canChangeName(){return this._canChangeName}get safetyLocked(){return this._safetyLocked}}class r{flush(){return this._userInfo=null,!0}parse(t){return!!t&&(this._userInfo=new n(t),!!this._userInfo)}get userInfo(){return this._userInfo}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"uUF/":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("XMGm"),n=s("MeCd"),r=s("KQk8");let a=(()=>{class t extends n.a{constructor(){super(),this._data=[]}parseWrapper(t){if(!t)return;this._data=[];const e=t.readInt();if(e)for(let s=0;s<e;s++)this._data.push(t.readInt());super.parseWrapper(t)}initializeFromRoomObjectModel(t){super.initializeFromRoomObjectModel(t),this._data=t.getValue(i.a.FURNITURE_DATA)}writeRoomObjectModel(e){super.writeRoomObjectModel(e),e.setValue(i.a.FURNITURE_DATA_FORMAT,t.FORMAT_KEY),e.setValue(i.a.FURNITURE_DATA,this._data)}getLegacyString(){return this._data&&this._data.length?this._data[t.STATE].toString():""}compare(e){if(!(e instanceof t))return!1;let s=0;for(;s<this._data.length;){if(0===s);else if(this._data[s]!==e.getValue(s))return!1;s++}return!0}getValue(t){if(!this._data||!this._data.length)return-1;const e=this._data[t];return null==e?-1:e}}return t.FORMAT_KEY=r.a.NUMBER_KEY,t.STATE=0,t})()},uaI9:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._furniId=-1,this._height=0,!0}parse(t){return!!t&&(this._furniId=t.readInt(),this._height=t.readInt()/100,!0)}get furniId(){return this._furniId}get height(){return this._height}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},ulbO:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("J0ap");class r{flush(){return this._totalFragments=0,this._fragmentNumber=0,this._fragment=new Map,!0}parse(t){if(!t)return!1;this._totalFragments=t.readInt(),this._fragmentNumber=t.readInt();let e=t.readInt();for(;e>0;){const s=new n.a(t);s&&this._fragment.set(s.itemId,s),e--}return!0}get totalFragments(){return this._totalFragments}get fragmentNumber(){return this._fragmentNumber}get fragment(){return this._fragment}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},v12S:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("XMGm"),n=s("MeCd"),r=s("KQk8");let a=(()=>{class t extends n.a{constructor(){super(),this._data=""}parseWrapper(t){t&&(this._data=t.readString(),super.parseWrapper(t))}initializeFromRoomObjectModel(t){super.initializeFromRoomObjectModel(t),this._data=t.getValue(i.a.FURNITURE_DATA)}writeRoomObjectModel(e){super.writeRoomObjectModel(e),e.setValue(i.a.FURNITURE_DATA_FORMAT,t.FORMAT_KEY),e.setValue(i.a.FURNITURE_DATA,this._data)}getLegacyString(){return this._data}compare(t){return this._data===t.getLegacyString()}setString(t){this._data=t}}return t.FORMAT_KEY=r.a.LEGACY_KEY,t})()},"v1R/":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e=0){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},vKkO:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("nL9H");class n extends i.a{constructor(t){super(t),this._conflictingActions=[],this._triggerConf=t.readInt();let e=t.readInt();for(;e>0;)this._conflictingActions.push(t.readInt()),e--}get type(){return this._triggerConf}get code(){return this._triggerConf}get _Str_21837(){return this._conflictingActions}}},vkSA:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("qQgg"),n=s("M98o");class r{constructor(t){t.addMessageEvent(new i.a(this.onLoadGameUrl.bind(this)))}onLoadGameUrl(t){if(!t)return;const e=t.getParser();e&&n.a.callGame("showGame",e.url)}}},vqvB:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("P7Cj");let n=(()=>{class t{static init(e,s){t._currentDelta=0,t._startDelayMs=e,t._effectDurationMs=s,t._initializationTimeMs=i.a.instance.time,t._state=t.STATE_START_DELAY}static turnVisualizationOn(){if(t._state===t.STATE_NOT_INITIALIZED||t._state===t.STATE_OVER)return;const e=i.a.instance.time-t._initializationTimeMs;e>t._startDelayMs+t._effectDurationMs?t._state=t.STATE_OVER:(t._visualizationOn=!0,e<t._startDelayMs?t._state=t.STATE_START_DELAY:(t._state=t.STATE_RUNNING,t._currentDelta=(e-t._startDelayMs)/t._effectDurationMs))}static turnVisualizationOff(){t._visualizationOn=!1}static isVisualizationOn(){return t._visualizationOn&&t.isRunning()}static isRunning(){return t._state===t.STATE_START_DELAY||t._state===t.STATE_RUNNING}static getDelta(e=0,s=1){return Math.min(Math.max(t._currentDelta,e),s)}static get totalRunningTime(){return t._startDelayMs+t._effectDurationMs}}return t.STATE_NOT_INITIALIZED=0,t.STATE_START_DELAY=1,t.STATE_RUNNING=2,t.STATE_OVER=3,t._state=t.STATE_NOT_INITIALIZED,t._visualizationOn=!1,t._currentDelta=0,t._initializationTimeMs=0,t._startDelayMs=2e4,t._effectDurationMs=2e3,t})()},vrkx:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("Ns5P");let n=(()=>{class t extends i.a{constructor(t,e,s){super(t,e),this._userName="",this._userName=s}get userName(){return this._userName}}return t.DOORBELL="RSDE_DOORBELL",t.RSDE_REJECTED="RSDE_REJECTED",t.RSDE_ACCEPTED="RSDE_ACCEPTED",t})()},vuPI:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("P7Cj"),n=s("Xr/m"),r=s("vzKh");class a extends n.a{constructor(){super(),this._logger=new r.a(this.constructor.name),this._listeners=new Map}onDispose(){this.removeAllListeners(),super.onDispose()}addEventListener(t,e){if(!t||!e)return;const s=this._listeners.get(t);s?s.push(e):this._listeners.set(t,[e])}removeEventListener(t,e){if(!t||!e)return;const s=this._listeners.get(t);if(s&&s.length)for(const[i,n]of s.entries())if(n&&n===e)return s.splice(i,1),void(s.length||this._listeners.delete(t))}dispatchEvent(t){return!!t&&(i.a.instance.getConfiguration("system.dispatcher.log")&&this._logger.log("DISPATCHED: "+t.type),this.processEvent(t),!0)}processEvent(t){const e=this._listeners.get(t.type);if(!e||!e.length)return;const s=[];for(const n of e)n&&s.push(n);for(;s.length;){const e=s.shift();try{e(t)}catch(i){return void this._logger.error(i)}}}removeAllListeners(){this._listeners.clear()}}},vx5b:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("5+UO"),n=s("5F4d");class r{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._code=null,this._savedSearches=[],!0}parse(t){if(!t)return!1;this._code=t.readString();let e=t.readInt();for(;e>0;)this._savedSearches.push(new n.a(t)),e--;return!0}get code(){return this._code}get savedSearches(){return this._savedSearches}}class a{flush(){return this._topLevelContexts=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._topLevelContexts.push(new r(t)),e--;return!0}get topLevelContexts(){return this._topLevelContexts}}class o extends i.a{constructor(t){super(t,a)}getParser(){return this.parser}}},vzKh:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{constructor(t,e=null){this._name=t,this._description=e,this._print=!0}log(t){this.printMessage(t,"log")}error(t,e){this.printMessage(e||t,"error")}warn(t){this.printMessage(t,"warn")}printMessage(e,s){this._print&&t.log(e,this._name,s)}static log(t,e="Nitro",s=null){const i=`[Nitro] ${(new Date).toDateString()} [${e}] ${t} ${this.getTimestamp()}`;switch(s){case"error":console.error(i);break;case"warn":console.warn(i);break;case"log":default:console.log(i)}}static getTimestamp(){const e=Date.now(),s=` +${e-t.LAST_TIMESTAMP||0}ms`;return this.LAST_TIMESTAMP=e,s}get description(){return this._description}set description(t){this._description=t}get print(){return this._print}set print(t){this._print=t}}return t.LAST_TIMESTAMP=Date.now(),t})()},wSNj:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},"wW/F":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("f6Tv");class r{flush(){return this._request=null,!0}parse(t){return!!t&&(this._request=new n.a(t),!0)}get request(){return this._request}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},wyCi:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},xB90:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._userId=null,this._badges=[],!0}parse(t){if(!t)return!1;this._userId=t.readInt();let e=t.readInt();for(;e>0;){t.readInt();const s=t.readString();this._badges.push(s),e--}return!0}get userId(){return this._userId}get badges(){return this._badges}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},xdKJ:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"xq+5":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO"),n=s("c746");class r extends i.a{constructor(t){super(t,n.a)}getParser(){return this.parser}}},xycO:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("5F4d");class r{flush(){return this._searches=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._searches.push(new n.a(t)),e--;return!0}get searches(){return this._searches}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},y81I:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("3r1x");class n extends i.a{constructor(t,e){super(t),this._object=e}get object(){return this._object}get objectId(){return this._object?this._object.id:-1}get objectType(){return this._object?this._object.type:null}}},ySDW:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.MOUSE_CLICK="click",t.DOUBLE_CLICK="double_click",t.MOUSE_MOVE="mousemove",t.MOUSE_DOWN="mousedown",t.MOUSE_UP="mouseup",t.ROLL_OVER="mouseover",t.ROLL_OUT="mouseout",t})()},yp5t:function(t){t.exports=JSON.parse('{"a":[{"id":"Move","parts":[{"setType":"bd","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"bds","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"ss","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"lg","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"sh","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"lh","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"lhs","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"ls","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"lc","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"rh","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"rhs","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"rs","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"rc","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"ch","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]}]},{"id":"Wave","parts":[{"setType":"lh","frames":[{"number":0,"assetPartDefinition":"wav"},{"number":1,"assetPartDefinition":"wav"}]},{"setType":"lhs","frames":[{"number":0,"assetPartDefinition":"wav"},{"number":1,"assetPartDefinition":"wav"}]},{"setType":"ls","frames":[{"number":0,"assetPartDefinition":"wav"},{"number":1,"assetPartDefinition":"wav"}]},{"setType":"lc","frames":[{"number":0,"assetPartDefinition":"wav"},{"number":1,"assetPartDefinition":"wav"}]},{"setType":"ch","frames":[{"number":0,"assetPartDefinition":"wav"},{"number":1,"assetPartDefinition":"wav"},{"number":2,"assetPartDefinition":"wav"},{"number":3,"assetPartDefinition":"wav"}]}]},{"id":"Talk","parts":[{"setType":"hd","frames":[{"number":0,"assetPartDefinition":"spk"},{"number":1,"assetPartDefinition":"spk"}]},{"setType":"fc","frames":[{"number":0,"assetPartDefinition":"spk"},{"number":1,"assetPartDefinition":"spk"}]},{"setType":"fa","frames":[{"number":0,"assetPartDefinition":"spk"},{"number":1,"assetPartDefinition":"spk"}]}]},{"id":"Sign","parts":[{"setType":"lh","frames":[{"number":0,"assetPartDefinition":"sig"}]},{"setType":"li","frames":[{"number":0,"assetPartDefinition":"sig"}]},{"setType":"ls","frames":[{"number":0,"assetPartDefinition":"wav"}]},{"setType":"lc","frames":[{"number":0,"assetPartDefinition":"wav"}]}]},{"id":"Respect","parts":[{"setType":"lh","frames":[{"number":0,"assetPartDefinition":"respect","repeats":15},{"number":1,"assetPartDefinition":"respect","repeats":15}]},{"setType":"ls","frames":[{"number":0,"assetPartDefinition":"wav","repeats":15},{"number":1,"assetPartDefinition":"wav","repeats":15}]},{"setType":"lc","frames":[{"number":0,"assetPartDefinition":"wav","repeats":15},{"number":1,"assetPartDefinition":"wav","repeats":15}]}]},{"id":"Blow","parts":[{"setType":"rh","frames":[{"number":0,"assetPartDefinition":"blw","repeats":10},{"number":1,"assetPartDefinition":"blw","repeats":10}]},{"setType":"rs","frames":[{"number":0,"assetPartDefinition":"drk"}]},{"setType":"rc","frames":[{"number":0,"assetPartDefinition":"drk"}]},{"setType":"ri","frames":[{"number":0,"assetPartDefinition":""}]},{"setType":"ey","frames":[{"number":0,"assetPartDefinition":"std","repeats":10},{"number":0,"assetPartDefinition":"eyb","repeats":10}]},{"setType":"fc","frames":[{"number":0,"assetPartDefinition":"std","repeats":10},{"number":0,"assetPartDefinition":"blw","repeats":10}]}]},{"id":"Laugh","parts":[{"setType":"rh","frames":[{"number":0,"assetPartDefinition":"blw"}]},{"setType":"rs","frames":[{"number":0,"assetPartDefinition":"drk"}]},{"setType":"rc","frames":[{"number":0,"assetPartDefinition":"drk"}]},{"setType":"ri","frames":[{"number":0,"assetPartDefinition":""}]},{"setType":"ey","frames":[{"number":0,"assetPartDefinition":"std","repeats":2}]},{"setType":"fc","frames":[{"number":0,"assetPartDefinition":"sml"}]}],"offsets":{"frames":[{"id":0,"directions":[{"id":0,"bodyParts":[{"id":"head","dx":0,"dy":1}]},{"id":1,"bodyParts":[{"id":"head","dx":0,"dy":1}]},{"id":2,"bodyParts":[{"id":"head","dx":0,"dy":1}]},{"id":3,"bodyParts":[{"id":"head","dx":0,"dy":1}]},{"id":4,"bodyParts":[{"id":"head","dx":0,"dy":1}]},{"id":5,"bodyParts":[{"id":"head","dx":0,"dy":1}]},{"id":6,"bodyParts":[{"id":"head","dx":0,"dy":1}]},{"id":7,"bodyParts":[{"id":"head","dx":0,"dy":1}]}]},{"id":1,"directions":[{"id":0,"bodyParts":[{"id":"head","dx":0,"dy":0}]},{"id":1,"bodyParts":[{"id":"head","dx":0,"dy":0}]},{"id":2,"bodyParts":[{"id":"head","dx":0,"dy":0}]},{"id":3,"bodyParts":[{"id":"head","dx":0,"dy":0}]},{"id":4,"bodyParts":[{"id":"head","dx":0,"dy":0}]},{"id":5,"bodyParts":[{"id":"head","dx":0,"dy":0}]},{"id":6,"bodyParts":[{"id":"head","dx":0,"dy":0}]},{"id":7,"bodyParts":[{"id":"head","dx":0,"dy":0}]}]}]}}]}')},yqT3:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("5+UO"),n=s("fFOI"),r=s("/FfH");class a{flush(){return this._roomId=0,!0}parse(t){return!!t&&(this._roomId=t.readInt(),this._name=t.readString(),this._description=t.readString(),this._state=t.readInt(),this._categoryId=t.readInt(),this._userCount=t.readInt(),this._maxUserCount=t.readInt(),this.parseTags(t),this._tradeMode=t.readInt(),this._allowPets=t.readInt(),this._allowPetsEat=t.readInt(),this._allowWalkthrough=t.readInt(),this._hideWalls=t.readInt(),this._thicknessWall=t.readInt(),this._thicknessFloor=t.readInt(),this._chat=new n.a(t),t.readBoolean(),this._moderation=new r.a(t),!0)}parseTags(t){if(!t)return!1;this._tags=[];let e=t.readInt();for(;e>0;)this._tags.push(t.readString()),e--;return!0}get roomId(){return this._roomId}get name(){return this._name}get description(){return this._description}get state(){return this._state}get categoryId(){return this._categoryId}get userCount(){return this._userCount}get maxUserCount(){return this._maxUserCount}get tags(){return this._tags}get tradeMode(){return this._tradeMode}get allowPets(){return 1===this._allowPets}get allowPetsEat(){return 1===this._allowPetsEat}get allowWalkthrough(){return 1===this._allowWalkthrough}get hideWalls(){return 1===this._hideWalls}get thicknessWall(){return this._thicknessWall}get thicknessFloor(){return this._thicknessFloor}get chatSettings(){return this._chat}get moderationSettings(){return this._moderation}}class o extends i.a{constructor(t){super(t,a)}getParser(){return this.parser}}},yydM:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("5+UO"),n=s("DFHD"),r=s("9mJe");class a{flush(){return this._rollerId=0,this._itemsRolling=[],this._unitRolling=null,!0}parse(t){if(!t)return;const e=t.readInt(),s=t.readInt(),i=t.readInt(),a=t.readInt();let o=t.readInt();for(;o>0;){const c=t.readInt(),_=parseFloat(t.readString()),h=parseFloat(t.readString()),l=new r.a(c,new n.a(e,s,_),new n.a(i,a,h));this._itemsRolling.push(l),o--}if(this._rollerId=t.readInt(),!t.bytesAvailable)return!0;const c=t.readInt(),_=t.readInt(),h=parseFloat(t.readString()),l=parseFloat(t.readString());switch(c){case 0:break;case 1:this._unitRolling=new r.a(_,new n.a(e,s,h),new n.a(i,a,l),r.a.MOVE);break;case 2:this._unitRolling=new r.a(_,new n.a(e,s,h),new n.a(i,a,l),r.a.SLIDE)}return!0}get rollerId(){return this._rollerId}get itemsRolling(){return this._itemsRolling}get unitRolling(){return this._unitRolling}}class o extends i.a{constructor(t){super(t,a)}getParser(){return this.parser}}},z20u:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var i=function(t){return t.FLOOR="S",t.WALL="I",t.EFFECT="E",t.BADGE="B",t.ROBOT="R",t.HABBO_CLUB="H",t.PET="P",t}({})},z3Rz:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("DFHD");class n{static int2rgb(t){return"rgba("+[(16711680&(t>>>=0))>>>16,(65280&t)>>>8,255&t,1].join(",")+")"}static _Str_22130(t){const e=(t>>16&255)/255,s=(t>>8&255)/255,i=(255&t)/255,n=Math.max(e,s,i),r=Math.min(e,s,i),a=n-r;let o=0,c=0,_=0;return 0==a?o=0:n==e?o=s>i?60*(s-i)/a:60*(s-i)/a+360:n==s?o=60*(i-e)/a+120:n==i&&(o=60*(e-s)/a+240),c=.5*(n+r),_=0==a?0:c<=.5?a/c*.5:a/(1-c)*.5,(Math.round(o/360*255)<<16)+(Math.round(255*_)<<8)+Math.round(255*c)}static _Str_13949(t){let e,s,i,n,r;const a=(t>>16&255)/255,o=(t>>8&255)/255,c=(255&t)/255;let _=0,h=0,l=0;return o>0?(e=0,s=0,e=c<.5?c*(1+o):c+o-c*o,s=2*c-e,i=a+1/3,n=a,r=a-1/3,i<0?i+=1:i>1&&i--,n<0?n+=1:n>1&&n--,r<0?r+=1:r>1&&r--,_=6*i<1?s+6*(e-s)*i:2*i<1?e:3*i<2?s+6*(e-s)*(2/3-i):s,h=6*n<1?s+6*(e-s)*n:2*n<1?e:3*n<2?s+6*(e-s)*(2/3-n):s,l=6*r<1?s+6*(e-s)*r:2*r<1?e:3*r<2?s+6*(e-s)*(2/3-r):s):(_=c,h=c,l=c),(Math.round(255*_)<<16)+(Math.round(255*h)<<8)+Math.round(255*l)}static rgb2xyz(t){let e=(t>>16&255)/255,s=(t>>8&255)/255,n=(t>>0&255)/255;return e>.04045?e=Math.pow((e+.055)/1.055,2.4):e/=12.92,s>.04045?s=Math.pow((s+.055)/1.055,2.4):s/=12.92,n>.04045?n=Math.pow((n+.055)/1.055,2.4):n/=12.92,e*=100,s*=100,n*=100,new i.a(.4124*e+.3576*s+.1805*n,.2126*e+.7152*s+.0722*n,.0193*e+.1192*s+.9505*n)}static _Str_22784(t){let e=t.x/95.047,s=t.y/100,n=t.z/108.883;return e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,new i.a(116*s-16,500*(e-s),200*(s-n))}static rgb2CieLab(t){return n._Str_22784(n.rgb2xyz(t))}}},z6mw:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("3r1x");let n=(()=>{class t extends i.a{constructor(t,e){super(t),this._connection=e}get connection(){return this._connection}}return t.CONNECTION_ESTABLISHED="NCE_ESTABLISHED",t.CONNECTION_CLOSED="NCE_CLOSED",t.CONNECTION_ERROR="NCE_ERROR",t.CONNECTION_HANDSHAKING="NCE_HANDSHAKING",t.CONNECTION_HANDSHAKED="NCE_HANDSHAKED",t.CONNECTION_HANDSHAKE_FAILED="NCE_HANDSHAKE_FAILED",t.CONNECTION_AUTHENTICATED="NCE_AUTHENTICATED",t})()},zIYo:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},zRn8:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._totalLikes=0,this._canLike=!1,!0}parse(t){return!!t&&(this._totalLikes=t.readInt(),this._canLike=t.readBoolean(),!0)}get totalLikes(){return this._totalLikes}get canLike(){return this._canLike}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},zTkZ:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._name=null,this._roomId=0,!0}parse(t){return!!t&&(this._name=t.readString(),this._roomId=t.readInt(),!0)}get name(){return this._name}get roomId(){return this._roomId}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},zUnb:function(t,e,s){"use strict";s.r(e);var i=s("fXoL"),n=s("jhN1"),r=s("R1ws"),a=s("C6IL"),o=s("3r1x"),c=s("qEDl"),_=s("z6mw"),h=s("M98o"),l=s("ry6F"),u=s("P7Cj"),d=s("G0tw"),g=s("IqKQ");let m=(()=>{class t{constructor(){this._isReady=!1,this._avatarEditorVisible=!1,this._navigatorVisible=!1,this._catalogVisible=!1,this._inventoryVisible=!1,this._friendlistVisible=!1,this._userProfileVisible=!1,this._achievementsVisible=!1,this._meMenuVisible=!1,this._chatHistoryVisible=!1}showAvatarEditor(){this._avatarEditorVisible=!0}hideAvatarEditor(){this._avatarEditorVisible=!1}showNavigator(){this._navigatorVisible=!0}hideNavigator(){this._navigatorVisible=!1}toggleAvatarEditor(){this._avatarEditorVisible=!this._avatarEditorVisible}toggleNavigator(){this._navigatorVisible=!this._navigatorVisible}showCatalog(){this._catalogVisible=!0}hideCatalog(){this._catalogVisible=!1}toggleCatalog(){this._catalogVisible=!this._catalogVisible}showInventory(){this._inventoryVisible=!0}hideInventory(){this._inventoryVisible=!1}toggleInventory(){this._inventoryVisible=!this._inventoryVisible}showFriendList(){this._friendlistVisible=!0}hideFriendList(){this._friendlistVisible=!1}toggleFriendList(){this._friendlistVisible=!this._friendlistVisible}showUserProfile(){this._userProfileVisible=!0}hideUserProfile(){this._userProfileVisible=!1}toggleUserProfile(){this._userProfileVisible=!this._userProfileVisible}showAchievements(){this._achievementsVisible=!0}hideAchievements(){this._achievementsVisible=!1}toggleAchievements(){this._achievementsVisible=!this._achievementsVisible}showMeMenu(){this._meMenuVisible=!0}hideMeMenu(){this._meMenuVisible=!1}toggleMeMenu(){this._meMenuVisible=!this._meMenuVisible}showChatHistory(){this._chatHistoryVisible=!0}hideChatHistory(){this._chatHistoryVisible=!1}toggleChatHistory(){this._chatHistoryVisible=!this._chatHistoryVisible}get avatarEditorVisible(){return this._avatarEditorVisible}get navigatorVisible(){return this._navigatorVisible}get catalogVisible(){return this._catalogVisible}get inventoryVisible(){return this._inventoryVisible}get friendListVisible(){return this._friendlistVisible}get userProfileVisible(){return this._userProfileVisible}get achievementsVisible(){return this._achievementsVisible}get meMenuVisible(){return this._meMenuVisible}get chatHistoryVisible(){return this._chatHistoryVisible}set isReady(t){this._isReady=t}get isReady(){return this._isReady}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();var p=s("ofXK");function f(t,e){if(1&t&&(i.dc(0,"div",6),i.Wc(1),i.cc()),2&t){const t=i.qc();i.Kb(1),i.Yc(" ",t.message," ")}}const E=function(t){return{width:t}};function S(t,e){if(1&t&&(i.dc(0,"div",7),i.dc(1,"div",8),i.Zb(2,"div",9),i.cc(),i.dc(3,"div",10),i.Wc(4),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(2),i.yc("ngStyle",i.Cc(2,E,(t.percentage||0)+"%")),i.Kb(2),i.Yc("",t.percentage||0,"%")}}let I=(()=>{class t{constructor(){this.message="",this.percentage=0,this.hideProgress=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-loading"]],inputs:{message:"message",percentage:"percentage",hideProgress:"hideProgress"},decls:6,vars:2,consts:[[1,"nitro-loading-component"],[1,"clouds"],[1,"logo"],[1,"container"],["class","text",4,"ngIf"],["class","progress-container",4,"ngIf"],[1,"text"],[1,"progress-container"],[1,"loading-bar"],[1,"bar",3,"ngStyle"],[1,"percent"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Zb(1,"div",1),i.Zb(2,"div",2),i.dc(3,"div",3),i.Uc(4,f,2,1,"div",4),i.Uc(5,S,5,4,"div",5),i.cc(),i.cc()),2&t&&(i.Kb(4),i.yc("ngIf",e.message&&e.message.length&&e.hideProgress),i.Kb(1),i.yc("ngIf",!e.hideProgress))},directives:[p.n,p.o],encapsulation:2}),t})();var R=s("R0Ic"),b=s("ZWGQ"),v=s("dPj3"),T=s("Hs+C"),O=s("5r5K"),y=s("GfbW"),A=s("6u0Z");let C=(()=>{class t extends d.a{constructor(e,s,i=!1,n=!1){super(t.ROOM_ZOOM,e),this._level=s,this._forceFlip=i,this._asDelta=n}get level(){return this._level}get forceFlip(){return this._forceFlip}get asDelta(){return this._asDelta}}return t.ROOM_ZOOM="REE_ROOM_ZOOM",t})();var M=s("Z0XG"),U=s("TPa8"),D=s("9Bkc"),w=s("vrkx"),N=s("Ns5P"),L=s("hXx8"),x=s("f6o4");let P=(()=>{class t{static makeRoomPreviewerId(e){return(65535&e)+t.PREVIEW_ROOM_ID_BASE}static isRoomPreviewerId(e){return e>=t.PREVIEW_ROOM_ID_BASE}}return t.PREVIEW_ROOM_ID_BASE=2147418112,t})();var F=s("Vvah"),k=s("vuPI"),W=s("HqZk"),V=s("UTUL"),G=s("XMGm"),H=s("BrMT"),B=s("9vQN"),j=s("ySDW"),K=s("z3Rz"),z=s("DACI"),Y=s("DFHD");class X extends o.a{constructor(t){super(t)}}let Z=(()=>{class t extends X{constructor(t,e){super(t),this._roomId=0,this._roomId=e}get roomId(){return this._roomId}}return t.RWREUE_GAME_MODE="RWREUE_GAME_MODE",t.RWREUE_NORMAL_MODE="RWREUE_NORMAL_MODE",t})(),q=(()=>{class t extends X{constructor(t,e,s,i){super(t),this._id=e,this._category=s,this._roomId=i}get id(){return this._id}get category(){return this._category}get roomId(){return this._roomId}}return t.OBJECT_SELECTED="RWROUE_OBJECT_SELECTED",t.OBJECT_DESELECTED="RWROUE_OBJECT_DESELECTED",t.USER_REMOVED="RWROUE_USER_REMOVED",t.FURNI_REMOVED="RWROUE_FURNI_REMOVED",t.FURNI_ADDED="RWROUE_FURNI_ADDED",t.USER_ADDED="RWROUE_USER_ADDED",t.OBJECT_ROLL_OVER="RWROUE_OBJECT_ROLL_OVER",t.OBJECT_ROLL_OUT="RWROUE_OBJECT_ROLL_OUT",t})(),Q=(()=>{class t extends X{constructor(t,e=null,s=null,i=0){super(t),this._roomViewRectangle=e,this._positionDelta=s,this._scale=i}get roomViewRectangle(){return this._roomViewRectangle?this._roomViewRectangle.clone():null}get positionDelta(){return this._positionDelta?this._positionDelta.clone():null}get scale(){return this._scale}}return t.SIZE_CHANGED="RWRVUE_ROOM_VIEW_SIZE_CHANGED",t.SCALE_CHANGED="RWRVUE_ROOM_VIEW_SCALE_CHANGED",t.POSITION_CHANGED="RWRVUE_ROOM_VIEW_POSITION_CHANGED",t})();var J=s("WRyM"),$=s("+kDp"),tt=s("EHDF"),et=s("lvFG");let st=(()=>{class t extends X{constructor(e,s,i,n,r){super(t.RWAIE_AVATAR_INFO),this._userId=e,this._userName=s,this._Str_3021=i,this._Str_2775=n,this._Str_3947=r}get userId(){return this._userId}get userName(){return this._userName}get _Str_2908(){return this._Str_3021}get _Str_2707(){return this._Str_2775}get _Str_4330(){return this._Str_3947}}return t.RWAIE_AVATAR_INFO="RWAIE_AVATAR_INFO",t})(),it=(()=>{class t extends X{constructor(){super(t.RWUDUE_USER_DATA_UPDATED)}}return t.RWUDUE_USER_DATA_UPDATED="rwudue_user_data_updated",t})();class nt{constructor(t){this._type=t}get type(){return this._type}}let rt=(()=>{class t extends nt{constructor(e){super(t.RWCM_MESSAGE_AVATAR_EXPRESSION),this._animation=e}get animation(){return this._animation}}return t.RWCM_MESSAGE_AVATAR_EXPRESSION="RWCM_MESSAGE_AVATAR_EXPRESSION",t})(),at=(()=>{class t extends nt{constructor(e){super(t.RWCPM_MESSAGE_CHANGE_POSTURE),this._posture=e}get posture(){return this._posture}}return t.RWCPM_MESSAGE_CHANGE_POSTURE="RWCPM_MESSAGE_CHANGE_POSTURE",t._Str_1553=0,t._Str_2016=1,t})(),ot=(()=>{class t extends nt{constructor(e){super(t.RWCM_MESSAGE_DANCE),this._style=0,this._style=e}get style(){return this._style}}return t.RWCM_MESSAGE_DANCE="RWCM_MESSAGE_DANCE",t._Str_13814=0,t._Str_17699=[2,3,4],t})(),ct=(()=>{class t extends nt{constructor(t,e,s){super(t),this._id=e,this._category=s}get id(){return this._id}get category(){return this._category}}return t.GET_OBJECT_INFO="RWROM_GET_OBJECT_INFO",t.GET_OBJECT_NAME="RWROM_GET_OBJECT_NAME",t.SELECT_OBJECT="RWROM_SELECT_OBJECT",t.GET_OWN_CHARACTER_INFO="RWROM_GET_OWN_CHARACTER_INFO",t.GET_AVATAR_LIST="RWROM_GET_AVATAR_LIST",t})(),_t=(()=>{class t extends nt{constructor(t,e=0){super(t),this._userId=e}get userId(){return this._userId}}return t.RWUAM_WHISPER_USER="RWUAM_WHISPER_USER",t.RWUAM_IGNORE_USER="RWUAM_IGNORE_USER",t.RWUAM_IGNORE_USER_BUBBLE="RWUAM_IGNORE_USER_BUBBLE",t.RWUAM_UNIGNORE_USER="RWUAM_UNIGNORE_USER",t.RWUAM_KICK_USER="RWUAM_KICK_USER",t.RWUAM_BAN_USER_HOUR="RWUAM_BAN_USER_HOUR",t.RWUAM_BAN_USER_DAY="RWUAM_BAN_USER_DAY",t.RWUAM_BAN_USER_PERM="RWUAM_BAN_USER_PERM",t.MUTE_USER_2MIN="RWUAM_MUTE_USER_2MIN",t.MUTE_USER_5MIN="RWUAM_MUTE_USER_5MIN",t.MUTE_USER_10MIN="RWUAM_MUTE_USER_10MIN",t.RWUAM_SEND_FRIEND_REQUEST="RWUAM_SEND_FRIEND_REQUEST",t.RWUAM_RESPECT_USER="RWUAM_RESPECT_USER",t.RWUAM_GIVE_RIGHTS="RWUAM_GIVE_RIGHTS",t.RWUAM_TAKE_RIGHTS="RWUAM_TAKE_RIGHTS",t.RWUAM_START_TRADING="RWUAM_START_TRADING",t.RWUAM_OPEN_HOME_PAGE="RWUAM_OPEN_HOME_PAGE",t.RWUAM_REPORT="RWUAM_REPORT",t.RWUAM_PICKUP_PET="RWUAM_PICKUP_PET",t.RWUAM_MOUNT_PET="RWUAM_MOUNT_PET",t.RWUAM_TOGGLE_PET_RIDING_PERMISSION="RWUAM_TOGGLE_PET_RIDING_PERMISSION",t.RWUAM_TOGGLE_PET_BREEDING_PERMISSION="RWUAM_TOGGLE_PET_BREEDING_PERMISSION",t.RWUAM_DISMOUNT_PET="RWUAM_DISMOUNT_PET",t.RWUAM_SADDLE_OFF="RWUAM_SADDLE_OFF",t.RWUAM_TRAIN_PET="RWUAM_TRAIN_PET",t.RWUAM_RESPECT_PET=" RWUAM_RESPECT_PET",t.RWUAM_TREAT_PET="RWUAM_TREAT_PET",t.RWUAM_REQUEST_PET_UPDATE="RWUAM_REQUEST_PET_UPDATE",t.RWUAM_START_NAME_CHANGE="RWUAM_START_NAME_CHANGE",t.RWUAM_PASS_CARRY_ITEM="RWUAM_PASS_CARRY_ITEM",t.RWUAM_DROP_CARRY_ITEM="RWUAM_DROP_CARRY_ITEM",t.RWUAM_GIVE_CARRY_ITEM_TO_PET="RWUAM_GIVE_CARRY_ITEM_TO_PET",t.RWUAM_GIVE_WATER_TO_PET="RWUAM_GIVE_WATER_TO_PET",t.RWUAM_GIVE_LIGHT_TO_PET="RWUAM_GIVE_LIGHT_TO_PET",t.RWUAM_REQUEST_BREED_PET="RWUAM_REQUEST_BREED_PET",t.RWUAM_HARVEST_PET="RWUAM_HARVEST_PET",t.RWUAM_REVIVE_PET="RWUAM_REVIVE_PET",t.RWUAM_COMPOST_PLANT="RWUAM_COMPOST_PLANT",t.RWUAM_GET_BOT_INFO="RWUAM_GET_BOT_INFO",t.RWUAM_REPORT_CFH_OTHER="RWUAM_REPORT_CFH_OTHER",t.RWUAM_AMBASSADOR_ALERT_USER="RWUAM_AMBASSADOR_ALERT_USER",t.RWUAM_AMBASSADOR_KICK_USER="RWUAM_AMBASSADOR_KICK_USER",t.AMBASSADOR_MUTE_USER_2MIN="RWUAM_AMBASSADOR_MUTE_2MIN",t.AMBASSADOR_MUTE_USER_10MIN="RWUAM_AMBASSADOR_MUTE_10MIN",t.AMBASSADOR_MUTE_USER_60MIN="RWUAM_AMBASSADOR_MUTE_60MIN",t.AMBASSADOR_MUTE_USER_18HOUR="RWUAM_AMBASSADOR_MUTE_18HOUR",t})();class ht{constructor(){this._container=null,this._container=null,this._widget=null,this._disposed=!1,this.onUserNameUpdateEvent=this.onUserNameUpdateEvent.bind(this),this.onNitroToolbarEvent=this.onNitroToolbarEvent.bind(this)}dispose(){this.disposed||(this.container=null,this._widget=null,this._disposed=!0)}update(){}processWidgetMessage(t){if(!t)return null;switch(t.type){case ct.GET_OWN_CHARACTER_INFO:this.getOwnCharacterInfo();break;case ot.RWCM_MESSAGE_DANCE:{const e=t;this._container&&this._container.roomSession&&this._container.roomSession.sendDanceMessage(e.style);break}case rt.RWCM_MESSAGE_AVATAR_EXPRESSION:{const e=t;this._container&&this._container.roomSession&&this._container.roomSession.sendExpressionMessage(e.animation._Str_6677);break}case at.RWCPM_MESSAGE_CHANGE_POSTURE:{const e=t;this._container&&this._container.roomSession&&this._container.roomSession.sendPostureMessage(e.posture);break}}return null}processEvent(t){if(t)switch(t.type){case tt.a.USER_DATA_UPDATED:return void this._container.events.dispatchEvent(new it);case U.a.RSDE_DANCE:{const e=t;if(this._widget&&this._container&&this._container.roomSession&&this._container.roomSession.userDataManager){const t=this._container.roomSession.userDataManager.getUserData(this._container.sessionDataManager.userId);t&&t.roomIndex===e.roomIndex&&(this.widget.isDancing=0!==e.danceId)}return}}}getOwnCharacterInfo(){const t=this._container.sessionDataManager.userId,e=this._container.sessionDataManager.userName,s=this._container.roomSession.userDataManager.getUserData(t);s&&this._container.events.dispatchEvent(new st(t,e,s.type,s.roomIndex,!1))}getObjectFurnitureData(t){if(!t)return null;const e=t.model.getValue(G.a.FURNITURE_TYPE_ID);return this._container.sessionDataManager.getFloorItemData(e)}getPetUserData(t){const e=this._container.roomSession.roomId,s=this._container.roomEngine.getTotalObjectsForManager(e,W.a.UNIT);let i=0;for(;i<s;){const s=this._container.roomEngine.getRoomObjectByIndex(e,i,W.a.UNIT),n=this._container.roomSession.userDataManager.getUserDataByIndex(s.id);if(n&&n.type===$.a.PET&&n.webID===t)return n;i++}return null}onUserNameUpdateEvent(t){this.widget.close()}onNitroToolbarEvent(t){switch(t.type){case J.a.SELECT_OWN_AVATAR:return void this.getOwnCharacterInfo()}}get type(){return x.a.AVATAR_INFO}get messageTypes(){return[ct.GET_OWN_CHARACTER_INFO,ot.RWCM_MESSAGE_DANCE,rt.RWCM_MESSAGE_AVATAR_EXPRESSION,at.RWCPM_MESSAGE_CHANGE_POSTURE]}get eventTypes(){return[tt.a.USER_DATA_UPDATED,U.a.RSDE_DANCE]}get container(){return this._container}set container(t){this._container&&this._container.sessionDataManager&&this._container.sessionDataManager.events&&(this._container.sessionDataManager.events.removeEventListener(et.a.UNUE_NAME_UPDATED,this.onUserNameUpdateEvent),this._container.roomEngine.events.removeEventListener(J.a.SELECT_OWN_AVATAR,this.onNitroToolbarEvent)),this._container=t,t&&this._container.sessionDataManager&&this._container.sessionDataManager.events&&(this._container.sessionDataManager.events.addEventListener(et.a.UNUE_NAME_UPDATED,this.onUserNameUpdateEvent),this._container.roomEngine.events.addEventListener(J.a.SELECT_OWN_AVATAR,this.onNitroToolbarEvent))}get widget(){return this._widget}set widget(t){this._widget=t}get roomEngine(){return this._container&&this._container.roomEngine||null}get roomSession(){return this._container&&this._container.roomSession||null}get disposed(){return this._disposed}}var lt=s("YTIQ");let ut=(()=>{class t{}return t._Str_3159=0,t._Str_2964=1,t._Str_2575=2,t})(),dt=(()=>{class t{constructor(t){this._ordinal=t}get _Str_6677(){return this._ordinal}_Str_1451(t){return t&&t._ordinal==this._ordinal}}return t.NONE=new t(0),t._Str_6268=new t(1),t._Str_5579=new t(2),t._Str_7336=new t(3),t._Str_10353=new t(4),t._Str_6989=new t(5),t._Str_16682=new t(6),t._Str_6325=new t(7),t})(),gt=(()=>{class t extends nt{constructor(t,e,s,i,n){super(t),this._text=e,this._chatType=s,this._recipientName=i,this._styleId=n}get text(){return this._text}get chatType(){return this._chatType}get recipientName(){return this._recipientName}get styleId(){return this._styleId}}return t.MESSAGE_CHAT="RWCM_MESSAGE_CHAT",t.CHAT_DEFAULT=0,t.CHAT_WHISPER=1,t.CHAT_SHOUT=2,t})(),mt=(()=>{class t extends nt{constructor(t,e,s,i){super(t),this._objectId=e,this._userName=s,this._roomId=i}get objectId(){return this._objectId}get userName(){return this._userName}get roomId(){return this._roomId}}return t.MESSAGE_SELECT_AVATAR="RWCSAM_MESSAGE_SELECT_AVATAR",t})(),pt=(()=>{class t extends nt{constructor(e){super(t.TYPING_STATUS),this._isTyping=e}get isTyping(){return this._isTyping}}return t.TYPING_STATUS="RWCTM_TYPING_STATUS",t})(),ft=(()=>{class t extends nt{constructor(t){super(t)}}return t.RWRWM_USER_CHOOSER="RWRWM_USER_CHOOSER",t.RWRWM_FURNI_CHOOSER="RWRWM_FURNI_CHOOSER",t.RWRWM_ME_MENU="RWRWM_ME_MENU",t.RWRWM_EFFECTS="RWRWM_EFFECTS",t})();class Et{constructor(){this._container=null,this._widget=null,this._disposed=!1}dispose(){this._disposed||(this._container=null,this._widget=null,this._disposed=!0)}update(){}processWidgetMessage(t){if(!t||this.disposed)return null;let e=null;switch(t.type){case pt.TYPING_STATUS:this._container.roomSession.sendChatTypingMessage(t.isTyping);break;case gt.MESSAGE_CHAT:{const e=t;if(""===e.text)return null;let s=e.text;const i=e.text.split(" ");if(i.length>0){const t=i[0];let n="";if(i.length>1&&(n=i[1]),":"===t.charAt(0)&&"x"===n){const t=this._container.roomEngine.selectedAvatarId;if(t>-1){const i=this._container.roomSession.userDataManager.getUserDataByIndex(t);i&&(n=i.name,s=e.text.replace(" x"," "+i.name))}}switch(t.toLowerCase()){case":d":case";d":this._container.sessionDataManager.clubLevel===ut._Str_2575&&this._container.roomSession.sendExpressionMessage(dt._Str_7336._Str_6677);break;case"o/":case"_o/":return this._container.roomSession.sendExpressionMessage(dt._Str_6268._Str_6677),null;case":kiss":if(this._container.sessionDataManager.clubLevel==ut._Str_2575)return this._container.roomSession.sendExpressionMessage(dt._Str_5579._Str_6677),null;break;case":jump":if(this._container.sessionDataManager.clubLevel==ut._Str_2575)return this._container.roomSession.sendExpressionMessage(dt._Str_16682._Str_6677),null;break;case":idle":return this._container.roomSession.sendExpressionMessage(dt._Str_6989._Str_6677),null;case"_b":return this._container.roomSession.sendExpressionMessage(dt._Str_6325._Str_6677),null;case":sign":return this._container.roomSession.sendSignMessage(parseInt(n)),null;case":iddqd":return this._container.roomEngine.events.dispatchEvent(new C(this._container.roomEngine.activeRoomId,-1,!0)),null;case":zoom":return this._container.roomEngine.events.dispatchEvent(new C(this._container.roomEngine.activeRoomId,parseInt(n),!1)),null;case":screenshot":return this._container.roomEngine.createRoomScreenshot(this._container.roomSession.roomId,this._container.getFirstCanvasId()),null;case":pickall":return this._container.notificationService.alertWithConfirm("${room.confirm.pick_all}","${generic.alert.title}",()=>{this._container.sessionDataManager.sendSpecialCommandMessage(":pickall")}),null;case":furni":return this._container.processWidgetMessage(new ft(ft.RWRWM_FURNI_CHOOSER)),null;case":chooser":return this._container.processWidgetMessage(new ft(ft.RWRWM_USER_CHOOSER)),null;case":settings":return(this._container.roomSession.isRoomOwner||this._container.sessionDataManager.isModerator)&&u.a.instance.communication.connection.send(new lt.a(this._container.roomSession.roomId)),null}}const n=e.styleId;if(this._container&&this._container.roomSession)switch(e.chatType){case gt.CHAT_DEFAULT:this._container.roomSession.sendChatMessage(s,n);break;case gt.CHAT_SHOUT:this._container.roomSession.sendShoutMessage(s,n);break;case gt.CHAT_WHISPER:this._container.roomSession.sendWhisperMessage(e.recipientName,s,n)}break}case mt.MESSAGE_SELECT_AVATAR:e=t}return null}processEvent(t){}get type(){return x.a.CHAT_INPUT_WIDGET}get messageTypes(){return[pt.TYPING_STATUS,gt.MESSAGE_CHAT,mt.MESSAGE_SELECT_AVATAR]}get eventTypes(){return[]}get container(){return this._container}set container(t){this._container=t}get widget(){return this._widget}set widget(t){this._widget=t}get disposed(){return this._disposed}}var St=s("tHQF"),It=s("uEox"),Rt=s("Kx+W"),bt=s("Ays+"),vt=s("gLCd");class Tt{static sum(t,e){return new g.j(t.x+e.x,t.y+e.y)}static _Str_15193(t,e){return new g.j(t.x-e.x,t.y-e.y)}static _Str_6038(t,e){return new g.j(t.x*e,t.y*e)}}var Ot=s("8c0Z");let yt=(()=>{class t extends X{constructor(t,e,s,i,n,r,a,o,c,_,h,l,u=0,d=0,g=null){super(t),this._userId=e,this._text=s,this._chatType=u,this._userName=i,this._userCategory=n,this._userType=r,this._petType=a,this._links=g,this._userX=o,this._userY=c,this._userImage=_,this._userColor=h,this._roomId=l,this._styleId=d}get userId(){return this._userId}get text(){return this._text}get chatType(){return this._chatType}get userName(){return this._userName}get userCategory(){return this._userCategory}get userType(){return this._userType}get petType(){return this._petType}get links(){return this._links}get userX(){return this._userX}get userY(){return this._userY}get userImage(){return this._userImage}get userColor(){return this._userColor}get roomId(){return this._roomId}get styleId(){return this._styleId}}return t.RWCUE_EVENT_CHAT="RWCUE_EVENT_CHAT",t.CHAT_TYPE_SPEAK=0,t.CHAT_TYPE_WHISPER=1,t.CHAT_TYPE_SHOUT=2,t.CHAT_TYPE_RESPECT=3,t.CHAT_TYPE_PETRESPECT=4,t.CHAT_TYPE_NOTIFY=5,t.CHAT_TYPE_PETTREAT=6,t.CHAT_TYPE_PETREVIVE=7,t.CHAT_TYPE_PET_REBREED_FERTILIZE=8,t.CHAT_TYPE_PET_SPEED_FERTILIZE=9,t.CHAT_TYPE_BOT_SPEAK=10,t.CHAT_TYPE_BOT_SHOUT=11,t.CHAT_TYPE_BOT_WHISPER=12,t})();class At{constructor(t){this._chatHistoryService=t,this._container=null,this._widget=null,this._connection=null,this._avatarColorCache=new Map,this._avatarImageCache=new Map,this._petImageCache=new Map,this._primaryCanvasScale=0,this._primaryCanvasOriginPos=null,this._tempScreenPosVector=new Y.a,this._disposed=!1}dispose(){this._disposed||(this._container=null,this._widget=null,this._disposed=!0)}update(){this._Str_20006()}_Str_20006(){if(!(this._container&&this._container.roomSession&&this._container.roomEngine&&this._container.events))return;const t=this._container.getFirstCanvasId(),e=this._container.roomSession.roomId,s=this._container.roomEngine.getRoomInstanceRenderingCanvas(e,t);if(!s)return;const i=s.geometry;if(!i)return;let n=1;this._primaryCanvasScale>0&&(n=i.scale/this._primaryCanvasScale),this._primaryCanvasOriginPos||(this._tempScreenPosVector.x=0,this._tempScreenPosVector.y=0,this._tempScreenPosVector.z=0,this._primaryCanvasOriginPos=i.getScreenPoint(this._tempScreenPosVector),this._primaryCanvasScale=i.scale-10);let r="",a=null;this._tempScreenPosVector.x=0,this._tempScreenPosVector.y=0,this._tempScreenPosVector.z=0;const o=i.getScreenPoint(this._tempScreenPosVector);if(o){const s=this._container.roomEngine.getRoomInstanceRenderingCanvasOffset(e,t);if(s&&o.set(o.x+s.x,o.y+s.y),o.x!=this._primaryCanvasOriginPos.x||o.y!=this._primaryCanvasOriginPos.y){const t=Tt._Str_15193(o,Tt._Str_6038(this._primaryCanvasOriginPos,n));0==t.x&&0==t.y||(r=Q.POSITION_CHANGED,a=new Q(r,null,t),this._container.events.dispatchEvent(a)),this._primaryCanvasOriginPos=o}}i.scale!==this._primaryCanvasScale&&(r=Q.SCALE_CHANGED,a=new Q(r,null,null,i.scale),this._container.events.dispatchEvent(a),this._primaryCanvasScale=i.scale)}getBubbleLocation(t,e){const s=this._container.roomEngine.getRoomInstanceGeometry(t,this._container.getFirstCanvasId()),i=this._container.roomEngine.getRoomInstanceRenderingCanvasScale(t,this._container.getFirstCanvasId());let n=document.body.offsetWidth*i/2,r=document.body.offsetHeight*i/2;if(s&&e){const a=s.getScreenPoint(e);if(a){n+=a.x*i,r+=a.y*i;const e=this._container.roomEngine.getRoomInstanceRenderingCanvasOffset(t,this._container.getFirstCanvasId());e&&(n+=e.x,r+=e.y)}}return new g.j(n,r)}processWidgetMessage(t){return null}processEvent(t){if(t&&!this._disposed)switch(t.type){case M.a.CHAT_EVENT:{const e=t,s=this._container.roomEngine.getRoomObject(e.session.roomId,e.objectId,W.a.UNIT);if(s&&this._container.roomEngine.getRoomInstanceGeometry(e.session.roomId,this._container.getFirstCanvasId())){this._Str_20006();const t=s.getLocation(),i=this.getBubbleLocation(e.session.roomId,t),n=this._container.roomSession.userDataManager.getUserDataByIndex(e.objectId);let r="",a=0,o=null;const c=e.chatType;let _=e.style,h=0,l=-1;if(n){h=n.type;const t=n.figure;switch(h){case $.a.PET:o=this.getPetImage(t,2,!0,64,s.model.getValue(G.a.FIGURE_POSTURE)),l=new bt.a(t).typeId;break;case $.a.USER:o=this.getUserImage(t);break;case $.a.RENTABLE_BOT:case $.a.BOT:_=vt.a.BOT}a=this._avatarColorCache.get(t),r=n.name}let d=e.message;switch(c){case M.a._Str_5821:d=u.a.instance.localization.getValueWithParameter("widgets.chatbubble.respect","username",r)}const g=new Ot.a;g.senderId=e.objectId,g.senderName=n.name+":",g.senderColor=a,o&&o.src&&(g.senderImageUrl=o.src),g.content=d,g.chatType=c,g.chatStyle=_,this._chatHistoryService.addItem(e.session.roomId,g),this._container&&this._container.events&&this._container.events.dispatchEvent(new yt(yt.RWCUE_EVENT_CHAT,n.roomIndex,d,r,W.a.UNIT,h,l,i.x,i.y,o,a,e.session.roomId,c,_,[]))}return}}}getUserImage(t){let e=this._avatarImageCache.get(t);return e||(e=this.setFigureImage(t)),e}setFigureImage(t){const e=this._container.avatarRenderManager.createAvatarImage(t,It.a.LARGE,null,this);if(!e)return;const s=e.getCroppedImage(Rt.a.HEAD),i=e.getPartColor(St.a.CHEST);return this._avatarColorCache.set(t,i&&i._Str_915||16777215),e.dispose(),this._avatarImageCache.set(t,s),s}getPetImage(t,e,s,i=64,n=null){let r=this._petImageCache.get(t+n);if(r)return r;const a=new bt.a(t),o=this._container.roomEngine.getRoomObjectPetImage(a.typeId,a.paletteId,a.color,new Y.a(45*e),i,null,!1,0,a.customParts,n);return o&&(r=u.a.instance.renderer.extract.image(o.data),this._petImageCache.set(t+n,r)),r}resetFigure(t){this.setFigureImage(t)}get type(){return x.a.CHAT_WIDGET}get messageTypes(){return[]}get eventTypes(){return[M.a.CHAT_EVENT]}get container(){return this._container}set container(t){this._container=t}get widget(){return this._widget}set widget(t){this._widget=t}get connection(){return this._connection}set connection(t){this._connection=t}get disposed(){return this._disposed}}let Ct=(()=>{class t extends nt{constructor(e,s){super(t.RWLUIM_LET_USER_IN),this._userName=e,this._canEnter=s}get userName(){return this._userName}get _Str_23117(){return this._canEnter}}return t.RWLUIM_LET_USER_IN="RWLUIM_LET_USER_IN",t})(),Mt=(()=>{class t extends X{constructor(t,e){super(t),this._userName="",this._userName=e}get userName(){return this._userName}}return t.RWDE_RINGING="RWDE_RINGING",t.REJECTED="RWDE_REJECTED",t.RWDE_ACCEPTED="RWDE_ACCEPTED",t})();class Ut{constructor(){this._isDisposed=!1,this._container=null}dispose(){this._isDisposed=!0,this._container=null}processWidgetMessage(t){return t&&this._container&&t&&t.type==Ct.RWLUIM_LET_USER_IN?(this._container.roomSession.sendDoorbellApprovalMessage(t.userName,t._Str_23117),null):null}processEvent(t){if(!t)return;const e=t;if(e)switch(t.type){case w.a.RSDE_REJECTED:return void this._container.events.dispatchEvent(new Mt(Mt.REJECTED,e.userName));case w.a.DOORBELL:return void this._container.events.dispatchEvent(new Mt(Mt.RWDE_RINGING,e.userName));case w.a.RSDE_ACCEPTED:return void this._container.events.dispatchEvent(new Mt(Mt.RWDE_ACCEPTED,e.userName))}}update(){}get disposed(){return this._isDisposed}get type(){return x.a.DOORBELL}set container(t){this._container=t}get messageTypes(){return[Ct.RWLUIM_LET_USER_IN]}get eventTypes(){return[w.a.DOORBELL,w.a.RSDE_REJECTED,w.a.RSDE_ACCEPTED]}}var Dt=s("AAYK"),wt=s("BTXg"),Nt=s("ipbj"),Lt=s("10Jd");class xt{constructor(){this._container=null,this._disposed=!1,this._roomId=0,this._roomId=Math.floor(11*Math.random()),this.onLoveLockFurniFinishedEvent=this.onLoveLockFurniFinishedEvent.bind(this),this.onLoveLockFurniFriendConfirmedEvent=this.onLoveLockFurniFriendConfirmedEvent.bind(this),this.onLoveLockFurniStartEvent=this.onLoveLockFurniStartEvent.bind(this)}dispose(){for(const t of this._messages)this._container.connection.removeMessageEvent(t);this._messages=[],this._container=null,this._disposed=!0}processEvent(t){}processWidgetMessage(t){return null}_Str_17138(t,e){null==this._container||this._disposed||this._container.connection.send(new Dt.a(t,e))}update(){}get disposed(){return this._disposed}get type(){return""}get container(){return this._container}set container(t){if(this._container=t,this._container){this._messages=[new wt.a(this.onLoveLockFurniStartEvent),new Nt.a(this.onLoveLockFurniFriendConfirmedEvent),new Lt.a(this.onLoveLockFurniFinishedEvent)];for(const e of this._messages)t.connection.addMessageEvent(e)}}onLoveLockFurniStartEvent(t){if(!this._widget||!t||!t.getParser())return;const e=t.getParser();this._widget.open(e.furniId,e.start)}onLoveLockFurniFinishedEvent(t){this._widget&&t&&t.getParser()&&t.getParser()}onLoveLockFurniFriendConfirmedEvent(t){}sendStart(t,e){this._container.connection.send(new Dt.a(t,e))}get messageTypes(){return[]}get eventTypes(){return[]}get widget(){return this._widget}set widget(t){this._widget=t}}var Pt=s("PJfP");class Ft{constructor(){this._isDisposed=!1,this._container=null,this._widget=null}get disposed(){return this._isDisposed}get type(){return x.a.FRIEND_FURNI_ENGRAVING}get container(){return this._container}set container(t){this._container=t}set widget(t){this._widget=t}dispose(){this._container=null,this._widget=null,this._isDisposed=!0}processEvent(t){if(this.disposed||null==t)return;let e=null;switch(t.type){case O.a.REQUEST_FRIEND_FURNITURE_ENGRAVING:if(e=t,e&&this._container.roomEngine&&this._widget){const t=this._container.roomEngine.getRoomObject(e.roomId,e.objectId,e.category);if(t){const e=t.model;if(e){const s=new Pt.a;s.initializeFromRoomObjectModel(e),this._widget.open(t.id,e.getValue(G.a.FURNITURE_FRIENDFURNI_ENGRAVING),s)}}}return}}processWidgetMessage(t){return null}get eventTypes(){return[O.a.REQUEST_FRIEND_FURNITURE_ENGRAVING]}get messageTypes(){return[]}update(){}}function kt(t){let e=1;return"-"===t[0]&&(e=-1,t=t.substr(1)),function(s,i){return(s[t]<i[t]?-1:s[t]>i[t]?1:0)*e}}class Wt{constructor(t,e,s){this._id=t,this._category=e,this._name=s}get id(){return this._id}get category(){return this._category}get name(){return this._name}}let Vt=(()=>{class t extends X{constructor(t,e,s=!1){super(t),this._items=e.slice(),this._Str_10043=s}get items(){return this._items}get _Str_2799(){return this._Str_10043}}return t.RWCCE_USER_CHOOSER_CONTENT="RWCCE_USER_CHOOSER_CONTENT",t.RWCCE_FURNI_CHOOSER_CONTENT="RWCCE_FURNI_CHOOSER_CONTENT",t})();class Gt{constructor(){this._isDisposed=!1,this._container=null}dispose(){this._isDisposed=!0,this._container=null}processWidgetMessage(t){if(!t)return null;switch(t.type){case ft.RWRWM_FURNI_CHOOSER:this.processFurniChooser();break;case ct.SELECT_OBJECT:this.selectFurni(t)}return null}selectFurni(t){null!=t&&(t.category!=W.a.WALL&&t.category!=W.a.FLOOR||this._container.roomEngine.selectRoomObject(this._container.roomSession.roomId,t.id,t.category))}processFurniChooser(){if(null==this._container||null==this._container.roomSession||null==this._container.roomEngine||null==this._container.roomSession.userDataManager)return;const t=this._container.roomSession.roomId,e=[];this.processFloorFurni(t,e),this.processWallFurni(t,e),e.sort(kt("name")),this._container.events.dispatchEvent(new Vt(Vt.RWCCE_FURNI_CHOOSER_CONTENT,e,!1))}processWallFurni(t,e){const s=this._container.roomEngine.getRoomObjectCount(t,W.a.WALL);for(let i=0;i<s;i++){const s=this._container.roomEngine.getRoomObjectByIndex(t,i,W.a.WALL);if(null==s)continue;const n=s.type;let r=null;if(n.startsWith("poster")){const t=Number.parseInt(n.replace("poster",""));r=u.a.instance.localization.getValue("poster_"+t+"_name")}else{const t=Number.parseInt(s.model.getValue(G.a.FURNITURE_TYPE_ID)),e=this._container.sessionDataManager.getWallItemData(t);r=null!=e&&e.name.length>0?e.name:n}e.push(new Wt(s.id,W.a.WALL,r))}}processFloorFurni(t,e){const s=this._container.roomEngine.getRoomObjectCount(t,W.a.FLOOR);for(let i=0;i<s;i++){const s=this._container.roomEngine.getRoomObjectByIndex(t,i,W.a.FLOOR);if(null==s)continue;const n=Number.parseInt(s.model.getValue(G.a.FURNITURE_TYPE_ID)),r=this._container.sessionDataManager.getFloorItemData(n);e.push(new Wt(s.id,W.a.FLOOR,null!=r?r.name:s.type))}}processEvent(t){}update(){}get disposed(){return this._isDisposed}get type(){return x.a.FURNI_CHOOSER}set container(t){this._container=t}get messageTypes(){return[ft.RWRWM_FURNI_CHOOSER,ct.SELECT_OBJECT]}get eventTypes(){return[]}}class Ht{constructor(){this._isDisposed=!1,this._container=null,this._widget=null}dispose(){this._isDisposed=!0,this._container=null,this._widget=null}processWidgetMessage(t){return null}processEvent(t){switch(t.type){case O.a.REQUEST_BACKGROUND_COLOR:{if(!this.canOpenBackgroundToner())return;const e=this._container.roomEngine.getRoomObject(t.roomId,t.objectId,t.category),s=e.model,i=Number.parseInt(s.getValue(G.a.FURNITURE_ROOM_BACKGROUND_COLOR_HUE)),n=Number.parseInt(s.getValue(G.a.FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION)),r=Number.parseInt(s.getValue(G.a.FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS));this._widget.open(e.id,i,n,r)}}}canOpenBackgroundToner(){return this._container.roomSession.isRoomOwner||this._container.roomSession.controllerLevel>=B.a.GUEST||this._container.sessionDataManager.isGodMode}set widget(t){this._widget=t}get widget(){return this._widget}update(){}get disposed(){return this._isDisposed}get type(){return x.a.ROOM_BACKGROUND_COLOR}set container(t){this._container=t}get container(){return this._container}get messageTypes(){return[]}get eventTypes(){return[O.a.REQUEST_BACKGROUND_COLOR]}}let Bt=(()=>{class t extends nt{constructor(t,e,s=-1){super(t),this._roomObjectId=0,this._petId=-1,this._roomObjectId=e,this._petId=s}get _Str_2713(){return this._roomObjectId}get _Str_2508(){return this._petId}}return t.RWUPM_PET_PRODUCT="RWUPM_PET_PRODUCT",t.MONSTERPLANT_SEED="RWUPM_MONSTERPLANT_SEED",t})();class jt{constructor(){this._container=null,this._isDisposed=!1,this.handleMonsterSeedPlant=this.handleMonsterSeedPlant.bind(this),this.handlePurchasableClothing=this.handlePurchasableClothing.bind(this),this.handleMysterybox=this.handleMysterybox.bind(this),this.handleEffectBox=this.handleEffectBox.bind(this),this.handleMysteryTrophy=this.handleMysteryTrophy.bind(this)}dispose(){this._container=null,this._isDisposed=!0}processWidgetMessage(t){return null}processEvent(t){}update(){}get disposed(){return this._isDisposed}get type(){return x.a.FURNI_STICKIE_WIDGET}set container(t){this._container&&this._container.sessionDataManager&&this._container.sessionDataManager.events&&(this._container.roomEngine.events.removeEventListener(O.a.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,this.handleMonsterSeedPlant),this._container.roomEngine.events.removeEventListener(O.a.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,this.handlePurchasableClothing),this._container.roomEngine.events.removeEventListener(O.a.REQUEST_MYSTERYBOX_OPEN_DIALOG,this.handleMysterybox),this._container.roomEngine.events.removeEventListener(O.a.REQUEST_EFFECTBOX_OPEN_DIALOG,this.handleEffectBox),this._container.roomEngine.events.removeEventListener(O.a.REQUEST_MYSTERYTROPHY_OPEN_DIALOG,this.handleMysteryTrophy)),this._container=t,t&&this._container.sessionDataManager&&this._container.sessionDataManager.events&&(this._container.roomEngine.events.addEventListener(O.a.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,this.handleMonsterSeedPlant),this._container.roomEngine.events.addEventListener(O.a.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,this.handlePurchasableClothing),this._container.roomEngine.events.addEventListener(O.a.REQUEST_MYSTERYBOX_OPEN_DIALOG,this.handleMysterybox),this._container.roomEngine.events.addEventListener(O.a.REQUEST_EFFECTBOX_OPEN_DIALOG,this.handleEffectBox),this._container.roomEngine.events.addEventListener(O.a.REQUEST_MYSTERYTROPHY_OPEN_DIALOG,this.handleMysteryTrophy))}get container(){return this._container}getRoomObject(t){return this._container?this._container.roomEngine.getRoomObject(this._container.roomSession.roomId,t,W.a.FLOOR):null}getFurniData(t){if(!t)return null;const e=Number.parseInt(t.model.getValue(G.a.FURNITURE_TYPE_ID));return this._container.sessionDataManager.getFloorItemData(e)}handlePurchasableClothing(t){if(!this._widget)return;const e=this.getRoomObject(t.objectId);e&&this._container.isOwnerOfFurniture(e)&&this._widget._Str_24748(e)}handleMonsterSeedPlant(t){}handleMysterybox(t){}handleEffectBox(t){}handleMysteryTrophy(t){}get widget(){return this._widget}set widget(t){this._widget=t}get messageTypes(){return[Bt.MONSTERPLANT_SEED]}get eventTypes(){return[O.a.OPEN_FURNI_CONTEXT_MENU,O.a.CLOSE_FURNI_CONTEXT_MENU]}}var Kt=s("6X5G");let zt=(()=>{class t extends X{constructor(t,e,s,i){super(t),this._value=i,this._objectId=s,this._furniType=e}get value(){return this._value}get objectId(){return this._objectId}get furniType(){return this._furniType}}return t.RWCFUE_CREDIT_FURNI_UPDATE="RWCFUE_CREDIT_FURNI_UPDATE",t})(),Yt=(()=>{class t extends nt{constructor(t,e){super(t),this._objectId=e}get objectId(){return this._objectId}}return t.RWFCRM_REDEEM="RWFCRM_REDEEM",t})(),Xt=(()=>{class t extends nt{constructor(t,e,s,i){super(t),this._objectId=e,this._category=s,this._roomId=i}get objectId(){return this._objectId}get category(){return this._category}get roomId(){return this._roomId}}return t.REQUEST_CREDITFURNI="RWFWM_MESSAGE_REQUEST_CREDITFURNI",t.REQUEST_STICKIE="RWFWM_MESSAGE_REQUEST_STICKIE",t.REQUEST_PRESENT="RWFWM_MESSAGE_REQUEST_PRESENT",t.REQUEST_TROPHY="RWFWM_MESSAGE_REQUEST_TROPHY",t.REQUEST_TEASER="RWFWM_MESSAGE_REQUEST_TEASER",t.REQUEST_ECOTRONBOX="RWFWM_MESSAGE_REQUEST_ECOTRONBOX",t.REQUEST_DIMMER="RWFWM_MESSAGE_REQUEST_DIMMER",t.REQUEST_PLACEHOLDER="RWFWM_MESSAGE_REQUEST_PLACEHOLDER",t.REQUEST_CLOTHING_CHANGE="RWFWM_MESSAGE_REQUEST_CLOTHING_CHANGE",t.REQUEST_PLAYLIST_EDITOR="RWFWM_MESSAGE_REQUEST_PLAYLIST_EDITOR",t.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING="RWFWM_WIDGET_MESSAGE_REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING",t.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED="RWFWM_WIDGET_MESSAGE_REQUEST_ACHIEVEMENT_RESOLUTION_FAILED",t.REQUEST_BADGE_DISPLAY_ENGRAVING="RWFWM_WIDGET_MESSAGE_REQUEST_BADGE_DISPLAY_ENGRAVING",t})();class Zt{constructor(){this._container=null}dispose(){this._container=null}processWidgetMessage(t){if(!t||!this.container)return null;switch(t.type){case Xt.REQUEST_CREDITFURNI:{const e=t,s=this._container.roomEngine.getRoomObject(e.roomId,e.objectId,e.category);if(s&&this._container.isOwnerOfFurniture(s)){const t=s.model.getValue(G.a.FURNITURE_CREDIT_VALUE);this._container.events.dispatchEvent(new zt(zt.RWCFUE_CREDIT_FURNI_UPDATE,s.model.getValue(G.a.FURNITURE_TYPE_ID)+"_"+e.type+"_"+e.objectId,e.objectId,t))}break}case Yt.RWFCRM_REDEEM:{const e=t;this.container.roomSession&&this.container.roomSession.connection.send(new Kt.a(e.objectId));break}}return null}processEvent(t){}update(){}get disposed(){return!!this._container}get type(){return x.a.FURNI_CREDIT_WIDGET}get container(){return this._container}set container(t){this._container=t}get messageTypes(){return[Xt.REQUEST_CREDITFURNI,Yt.RWFCRM_REDEEM]}get eventTypes(){return[]}}var qt=s("uaI9");class Qt{constructor(){this._container=null,this._widget=null,this._lastFurniId=-1,this._messages=[]}dispose(){this.container=null,this._widget=null}processWidgetMessage(t){return null}processEvent(t){if(!t)return;let e=null;switch(t.type){case O.a.OPEN_WIDGET:if(e=t,e&&this._container.roomEngine&&this._widget){this._lastFurniId=e.objectId;const t=this._container.roomEngine.getRoomObject(e.roomId,e.objectId,e.category);t&&this.canManipulateRoomObject(t)&&this._widget.open(this._lastFurniId,t.getLocation().z)}return;case O.a.CLOSE_WIDGET:return e=t,void(e&&this._container.roomEngine&&this._widget&&this._lastFurniId===e.objectId&&this._widget.hide())}}update(){}get disposed(){return!!this._container}get type(){return x.a.CUSTOM_STACK_HEIGHT}get container(){return this._container}set container(t){if(t!==this._container&&this._container){for(const t of this._messages)this._container.connection.removeMessageEvent(t);this._messages=[]}if(this._container=t,this._container){this._messages=[new qt.a(this.onFurnitureStackHeightEvent.bind(this))];for(const e of this._messages)t.connection.addMessageEvent(e)}}get messageTypes(){return[]}get eventTypes(){return[]}get widget(){return this._widget}set widget(t){this._widget=t}onFurnitureStackHeightEvent(t){if(!t)return;const e=t.getParser();e&&this._widget&&this.canManipulateRoomObject()&&this._widget.update(e.furniId,e.height)}canManipulateRoomObject(t=null){const e=this._container.roomSession.isRoomOwner,s=this._container.roomSession.controllerLevel>=B.a.GUEST,i=this._container.sessionDataManager.isModerator,n=t&&this._container.isOwnerOfFurniture(t);return e||i||s||n}}let Jt=(()=>{class t extends X{constructor(e,s,i,n,r){super(t.RWDSUE_DIMMER_STATE),this._state=e,this._presetId=s,this._effectId=i,this._color=n,this._brightness=r}get state(){return this._state}get _Str_14686(){return this._presetId}get _Str_6815(){return this._effectId}get color(){return this._color}get _Str_5123(){return this._brightness}}return t.RWDSUE_DIMMER_STATE="RWDSUE_DIMMER_STATE",t})();class $t{constructor(t,e,s,i){this._id=0,this._type=0,this._color=0,this._intensity=0,this._id=t,this._type=e,this._color=s,this._intensity=i}get id(){return this._id}get type(){return this._type}get color(){return this._color}get _Str_4272(){return this._intensity}}let te=(()=>{class t extends X{constructor(t){super(t),this._selectedPresetId=0,this._presets=[]}get _Str_10888(){return this._presets.length}get presets(){return this._presets}get selectedPresetId(){return this._selectedPresetId}set selectedPresetId(t){this._selectedPresetId=t}setPresetValues(t,e,s,i){const n=new $t(t,e,s,i);this._presets[t-1]=n}getPresetNumber(t){return t<0||t>=this._presets.length?null:this._presets[t]}}return t.RWDUE_PRESETS="RWDUE_PRESETS",t.RWDUE_HIDE="RWDUE_HIDE",t})(),ee=(()=>{class t extends nt{constructor(){super(t.RWCDSM_CHANGE_STATE)}}return t.RWCDSM_CHANGE_STATE="RWCDSM_CHANGE_STATE",t})(),se=(()=>{class t extends nt{constructor(e,s,i){super(t.RWDPM_PREVIEW_DIMMER_PRESET),this._color=e,this._brightness=s,this._bgOnly=i}get color(){return this._color}get _Str_5123(){return this._brightness}get _Str_11464(){return this._bgOnly}}return t.RWDPM_PREVIEW_DIMMER_PRESET="RWDPM_PREVIEW_DIMMER_PRESET",t})(),ie=(()=>{class t extends nt{constructor(e,s,i,n,r){super(t.RWSDPM_SAVE_PRESET),this._presetNumber=e,this._effectTypeId=s,this._color=i,this._brightness=n,this._apply=r}get _Str_25037(){return this._presetNumber}get _Str_24446(){return this._effectTypeId}get color(){return this._color}get _Str_5123(){return this._brightness}get apply(){return this._apply}}return t.RWSDPM_SAVE_PRESET="RWSDPM_SAVE_PRESET",t})();class ne{constructor(){this._isDisposed=!1,this._container=null}dispose(){this._isDisposed=!0,this._container=null}processWidgetMessage(t){switch(t.type){case Xt.REQUEST_DIMMER:this.canOpenWidget()&&this._container.roomSession.requestMoodlightSettings();break;case ie.RWSDPM_SAVE_PRESET:this.canOpenWidget()&&this._container.roomSession.updateMoodlightData(t._Str_25037,t._Str_24446,t.color,t._Str_5123,t.apply);break;case ee.RWCDSM_CHANGE_STATE:this.canOpenWidget()&&this._container.roomSession.toggleMoodlightState();break;case se.RWDPM_PREVIEW_DIMMER_PRESET:if(!t||!this._container.roomEngine)return null;this._container.roomEngine._Str_17804(this._container.roomSession.roomId,t.color,t._Str_5123,t._Str_11464)}return null}processEvent(t){switch(t.type){case D.a.RSDPE_PRESETS:{const e=t,s=new te(te.RWDUE_PRESETS);s.selectedPresetId=e.selectedPresetId;let i=0;for(;i<e._Str_10888;){const t=e._Str_14989(i);t&&s.setPresetValues(t.id,t.type,t.color,t._Str_4272),i++}return void this._container.events.dispatchEvent(s)}case v.a.ROOM_COLOR:return void this._container.events.dispatchEvent(new Jt(t.state,t._Str_14686,t._Str_6815,t.color,t._Str_5123));case O.a.REMOVE_DIMMER:return void this._container.events.dispatchEvent(new te(te.RWDUE_HIDE))}}update(){}canOpenWidget(){return this._container.roomSession.isRoomOwner||this._container.roomSession.controllerLevel>=B.a.GUEST||this._container.sessionDataManager.isModerator}get disposed(){return this._isDisposed}get type(){return x.a.ROOM_DIMMER}set container(t){this._container=t}get messageTypes(){return[Xt.REQUEST_DIMMER,ie.RWSDPM_SAVE_PRESET,ee.RWCDSM_CHANGE_STATE,se.RWDPM_PREVIEW_DIMMER_PRESET]}get eventTypes(){return[D.a.RSDPE_PRESETS,v.a.ROOM_COLOR,O.a.REMOVE_DIMMER]}}let re=(()=>{class t{constructor(){this._container=null}dispose(){this._container=null}processWidgetMessage(t){return null}processEvent(e){if(!e)return;let s=null;switch(e.type){case O.a.REQUEST_INTERNAL_LINK:if(s=e,s&&this._container.roomEngine){const e=this._container.roomEngine.getRoomObject(s.roomId,s.objectId,s.category);if(e&&e.model){let s=e.model.getValue(G.a.FURNITURE_DATA)[t.INTERNALLINK];if(s&&""!==s&&0!==s.length||(s=e.model.getValue(G.a.FURNITURE_INTERNAL_LINK)),!s||0===s.length)return;u.a.instance.createLinkEvent(s)}}return}}update(){}get disposed(){return!!this._container}get type(){return x.a.INTERNAL_LINK}get container(){return this._container}set container(t){this._container=t}get messageTypes(){return[]}get eventTypes(){return[O.a.REQUEST_INTERNAL_LINK]}}return t.INTERNALLINK="internalLink",t})();var ae=s("10wl"),oe=s("9RxG");let ce=(()=>{class t{constructor(){this._container=null,this._messages=[],this._link=null,this._roomIdToEnter=0,this._confirmDialog=null}dispose(){this.container=null,this._link=null,this._roomIdToEnter=0,this.closeConfirmDialog()}processWidgetMessage(t){return null}processEvent(e){if(!e)return;let s=null;switch(e.type){case O.a.REQUEST_ROOM_LINK:if(s=e,s&&this._container.roomEngine){const e=this._container.roomEngine.getRoomObject(s.roomId,s.objectId,s.category);if(e&&e.model){let s=e.model.getValue(G.a.FURNITURE_DATA)[t.INTERNALLINK];if(s&&""!==s&&0!==s.length||(s=e.model.getValue(G.a.FURNITURE_INTERNAL_LINK)),!s||0===s.length)return;this.closeConfirmDialog(),this._link=s,this._roomIdToEnter=parseInt(s,10),this._container&&this._container.connection&&this._container.connection.send(new oe.a(this._roomIdToEnter,!1,!1))}}return}}onRoomInfoEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=e.data;if(!s)return;if(s.roomId!==this._roomIdToEnter)return;this._roomIdToEnter=0;const i=s.roomName,n=s.ownerName;let r=u.a.instance.getLocalization("room.link.confirmation.message");r&&r.indexOf("%%room_name%%")>-1&&(r=r.replace("%%room_name%%",i)),r&&r.indexOf("%%owner_name%%")>-1&&(r=r.replace("%%owner_name%%",n)),this.closeConfirmDialog(),this._container&&this._container.notificationService&&(this._confirmDialog=this._container.notificationService.alertWithConfirm(r,null,()=>{u.a.instance.createLinkEvent("navigator/goto/"+this._link)}))}closeConfirmDialog(){this._confirmDialog&&(this._confirmDialog.close(),this._confirmDialog=null)}update(){}get disposed(){return!!this._container}get type(){return x.a.ROOM_LINK}get container(){return this._container}set container(t){if(t!==this._container&&this._container){for(const t of this._messages)this._container.connection.removeMessageEvent(t);this._messages=[]}if(this._container=t,this._container){this._messages=[new ae.a(this.onRoomInfoEvent.bind(this))];for(const e of this._messages)t.connection.addMessageEvent(e)}}get messageTypes(){return[]}get eventTypes(){return[O.a.REQUEST_ROOM_LINK]}}return t.INTERNALLINK="internalLink",t})(),_e=(()=>{class t extends X{constructor(t,e,s,i,n,r){super(t),this._Str_2319=-1,this._Str_2319=e,this._Str_3796=s,this._text=i,this._Str_3062=n,this._controller=r}get _Str_1577(){return this._Str_2319}get _Str_1723(){return this._Str_3796}get text(){return this._text}get _Str_10471(){return this._Str_3062}get controller(){return this._controller}}return t.RWSDUE_STICKIE_DATA="RWSDUE_STICKIE_DATA",t})(),he=(()=>{class t extends nt{constructor(t,e,s="",i=""){super(t),this._objectId=e,this._text=s,this._colorHex=i}get objectId(){return this._objectId}get text(){return this._text}get colorHex(){return this._colorHex}}return t.SEND_UPDATE="RWSUM_STICKIE_SEND_UPDATE",t.SEND_DELETE="RWSUM_STICKIE_SEND_DELETE",t})();class le{constructor(){this._container=null,this._isDisposed=!1}dispose(){this._container=null,this._isDisposed=!0}processWidgetMessage(t){if(!t)return null;switch(t.type){case Xt.REQUEST_STICKIE:{const e=t,s=this._container.roomEngine.getRoomObject(e.roomId,e.objectId,e.category);if(s){const t=s.model.getValue(G.a.FURNITURE_ITEMDATA);if(t.length<6)return null;let i=null,n=null;t.indexOf(" ")>0?(i=t.slice(0,t.indexOf(" ")),n=t.slice(t.indexOf(" ")+1,t.length)):i=t,this._container.events.dispatchEvent(new _e(_e.RWSDUE_STICKIE_DATA,e.objectId,s.type,n,i,this._container.roomSession.isRoomOwner||this._container.sessionDataManager.isModerator))}break}case he.SEND_UPDATE:this._container.roomEngine.modifyRoomObjectData(t.objectId,W.a.WALL,t.colorHex,t.text);break;case he.SEND_DELETE:this._container.roomEngine.deleteRoomObject(t.objectId,W.a.WALL)}return null}processEvent(t){}update(){}get disposed(){return this._isDisposed}get type(){return x.a.FURNI_STICKIE_WIDGET}set container(t){this._container=t}get messageTypes(){return[Xt.REQUEST_STICKIE,he.SEND_DELETE,he.SEND_UPDATE]}get eventTypes(){return[]}}let ue=(()=>{class t extends X{constructor(t,e,s,i,n,r){super(t),this._name=e,this._date=s,this._message=i,this._color=n,this._viewType=r}get name(){return this._name}get date(){return this._date}get message(){return this._message}get color(){return this._color}get viewType(){return this._viewType}}return t.TROPHY_DATA="RWTDUE_TROPHY_DATA",t})();class de{constructor(){this._container=null}dispose(){this._container=null}processWidgetMessage(t){if(!t||!this.container)return null;switch(t.type){case Xt.REQUEST_TROPHY:{const e=this._container.roomEngine.getRoomObject(t.roomId,t.objectId,t.category);if(e){let t=e.model.getValue(G.a.FURNITURE_DATA),s=e.model.getValue(G.a.FURNITURE_EXTRAS);s||(s="0");const i=e.model.getValue(G.a.FURNITURE_COLOR),n=t.substring(0,t.indexOf("\t"));t=t.substring(n.length+1,t.length);const r=t.substring(0,t.indexOf("\t")),a=t.substr(r.length+1,t.length);this._container.events.dispatchEvent(new ue(ue.TROPHY_DATA,n,r,a,parseInt(i),parseInt(s)))}break}}return null}processEvent(t){}update(){}get disposed(){return!!this._container}get type(){return x.a.FURNI_TROPHY_WIDGET}get container(){return this._container}set container(t){this._container=t}get messageTypes(){return[Xt.REQUEST_TROPHY]}get eventTypes(){return[]}}var ge=s("X+hw"),me=s("pGYl"),pe=s("0DoP"),fe=s("/FfH"),Ee=s("2L69"),Se=s("/OJ4"),Ie=s("6j78");let Re=(()=>{class t extends X{constructor(e,s,i,n,r){super(t.RWONE_TYPE),this._userId=e,this._category=s,this._userName=i,this._userType=n,this._roomIndex=r}get userId(){return this._userId}get category(){return this._category}get userName(){return this._userName}get userType(){return this._userType}get roomIndex(){return this._roomIndex}}return t.RWONE_TYPE="RWONE_TYPE",t})(),be=(()=>{class t extends X{constructor(e,s){super(t.RWWCIDE_CHAT_INPUT_CONTENT),this._Str_21134="",this._userName="",this._Str_21134=e,this._userName=s}get _Str_23621(){return this._Str_21134}get userName(){return this._userName}}return t.RWWCIDE_CHAT_INPUT_CONTENT="RWWCIDE_CHAT_INPUT_CONTENT",t.WHISPER="whisper",t.SHOUT="shout",t})(),ve=(()=>{class t extends X{constructor(t){super(t),this._id=0,this._category=0,this._name="",this._description="",this._image=null,this._isWallItem=!1,this._isStickie=!1,this._isRoomOwner=!1,this._roomControllerLevel=0,this._isAnyRoomController=!1,this._expiration=-1,this._purchaseCatalogPageId=-1,this._purchaseOfferId=-1,this._extraParam="",this._isOwner=!1,this._stuffData=null,this._groupId=0,this._ownerId=0,this._ownerName="",this._usagePolicy=0,this._rentCatalogPageId=-1,this._rentOfferId=-1,this._purchaseCouldBeUsedForBuyout=!1,this._rentCouldBeUsedForBuyout=!1,this._availableForBuildersClub=!1}set id(t){this._id=t}get id(){return this._id}set category(t){this._category=t}get category(){return this._category}set name(t){this._name=t}get name(){return this._name}set description(t){this._description=t}get description(){return this._description}set image(t){this._image=t}get image(){return this._image}set isWallItem(t){this._isWallItem=t}get isWallItem(){return this._isWallItem}set isStickie(t){this._isStickie=t}get isStickie(){return this._isStickie}set isRoomOwner(t){this._isRoomOwner=t}get isRoomOwner(){return this._isRoomOwner}set roomControllerLevel(t){this._roomControllerLevel=t}get roomControllerLevel(){return this._roomControllerLevel}set isAnyRoomOwner(t){this._isAnyRoomController=t}get isAnyRoomOwner(){return this._isAnyRoomController}set expiration(t){this._expiration=t}get expiration(){return this._expiration}set purchaseOfferId(t){this._purchaseOfferId=t}get purchaseOfferId(){return this._purchaseOfferId}set extraParam(t){this._extraParam=t}get extraParam(){return this._extraParam}set isOwner(t){this._isOwner=t}get isOwner(){return this._isOwner}set stuffData(t){this._stuffData=t}get stuffData(){return this._stuffData}set groupId(t){this._groupId=t}get groupId(){return this._groupId}set ownerId(t){this._ownerId=t}get ownerId(){return this._ownerId}set ownerName(t){this._ownerName=t}get ownerName(){return this._ownerName}set usagePolicy(t){this._usagePolicy=t}get usagePolicy(){return this._usagePolicy}set rentOfferId(t){this._rentOfferId=t}get rentOfferId(){return this._rentOfferId}get purchaseCouldBeUsedForBuyout(){return this._purchaseCouldBeUsedForBuyout}set purchaseCouldBeUsedForBuyout(t){this._purchaseCouldBeUsedForBuyout=t}get rentCouldBeUsedForBuyout(){return this._rentCouldBeUsedForBuyout}set rentCouldBeUsedForBuyout(t){this._rentCouldBeUsedForBuyout=t}get availableForBuildersClub(){return this._availableForBuildersClub}set availableForBuildersClub(t){this._availableForBuildersClub=t}}return t.FURNI="RWFIUE_FURNI",t})(),Te=(()=>{class t extends X{constructor(){super(t.RENTABLE_BOT),this._name="",this._motto="",this._Str_4900=0,this._figure="",this._caryId=0,this._Str_5131=0,this._Str_4026=!1,this._Str_4028=!1,this._roomControllerLevel=0,this._badges=[]}set name(t){this._name=t}get name(){return this._name}set motto(t){this._motto=t}get motto(){return this._motto}set id(t){this._Str_4900=t}get id(){return this._Str_4900}set figure(t){this._figure=t}get figure(){return this._figure}set badges(t){this._badges=t}get badges(){return this._badges}get ownerId(){return this._ownerId}set ownerId(t){this._ownerId=t}get ownerName(){return this._ownerName}set ownerName(t){this._ownerName=t}set _Str_3246(t){this._Str_4026=t}get _Str_3246(){return this._Str_4026}set roomControllerLevel(t){this._roomControllerLevel=t}get roomControllerLevel(){return this._roomControllerLevel}set _Str_3529(t){this._Str_4028=t}get _Str_3529(){return this._Str_4028}set carryId(t){this._caryId=t}get carryId(){return this._caryId}set roomIndex(t){this._Str_5131=t}get roomIndex(){return this._Str_5131}get botSkills(){return this._Str_3986}set botSkills(t){this._Str_3986=t}}return t.RENTABLE_BOT="RWRBIUE_RENTABLE_BOT",t._Str_7492="RENTABLE_BOT",t})(),Oe=(()=>{class t extends X{constructor(t){super(t),this._name="",this._motto="",this._Str_4900=0,this._xp=0,this._figure="",this._groupId=0,this._groupName="",this._Str_11289="",this._Str_5228=0,this._Str_5131=0,this._Str_8522=!1,this._realName="",this._Str_3947=!1,this._Str_4026=!1,this._Str_4028=!1,this._roomControllerLevel=0,this._canBeAskedForAFriend=!1,this._Str_9070=!1,this._Str_8457=!1,this._Str_8831=!1,this._Str_3437=0,this._Str_6028=!1,this._Str_6139=!1,this._Str_8973=!1,this._Str_8910=0,this._Str_8858=0,this._isFriend=!1,this._Str_4890=!1,this._badges=[]}set name(t){this._name=t}get name(){return this._name}set motto(t){this._motto=t}get motto(){return this._motto}set activityPoints(t){this._activityPoints=t}get activityPoints(){return this._activityPoints}set webID(t){this._Str_4900=t}get webID(){return this._Str_4900}set xp(t){this._xp=t}get xp(){return this._xp}set userType(t){this._Str_3021=t}get userType(){return this._Str_3021}set figure(t){this._figure=t}get figure(){return this._figure}set badges(t){this._badges=t}get badges(){return this._badges}set groupId(t){this._groupId=t}get groupId(){return this._groupId}set groupName(t){this._groupName=t}get groupName(){return this._groupName}set groupBadgeId(t){this._Str_11289=t}get groupBadgeId(){return this._Str_11289}set canBeAskedForAFriend(t){this._canBeAskedForAFriend=t}get canBeAskedForAFriend(){return this._canBeAskedForAFriend}set respectLeft(t){this._Str_3437=t}get respectLeft(){return this._Str_3437}set isIgnored(t){this._Str_6028=t}get isIgnored(){return this._Str_6028}set isRoomOwner(t){this._Str_4026=t}get isRoomOwner(){return this._Str_4026}set isGuildRoom(t){this._Str_6139=t}get isGuildRoom(){return this._Str_6139}set roomControllerLevel(t){this._roomControllerLevel=t}get roomControllerLevel(){return this._roomControllerLevel}set isModerator(t){this._Str_4028=t}get isModerator(){return this._Str_4028}set canTrade(t){this._Str_8973=t}get canTrade(){return this._Str_8973}set _Str_6622(t){this._Str_8910=t}get _Str_6622(){return this._Str_8910}set _Str_5990(t){this._Str_9070=t}get _Str_5990(){return this._Str_9070}set _Str_6701(t){this._Str_8457=t}get _Str_6701(){return this._Str_8457}get _Str_6394(){return this._Str_8831}set _Str_6394(t){this._Str_8831=t}set flatControl(t){this._Str_8858=t}get flatControl(){return this._Str_8858}set carryId(t){this._Str_5228=t}get carryId(){return this._Str_5228}set roomIndex(t){this._Str_5131=t}get roomIndex(){return this._Str_5131}set isSpectator(t){this._Str_8522=t}get isSpectator(){return this._Str_8522}set realName(t){this._realName=t}get realName(){return this._realName}set _Str_4330(t){this._Str_3947=t}get _Str_4330(){return this._Str_3947}get isFriend(){return this._isFriend}set isFriend(t){this._isFriend=t}get isAmbassador(){return this._Str_4890}set isAmbassador(t){this._Str_4890=t}}return t.OWN_USER="RWUIUE_OWN_USER",t.BOT="RWUIUE_BOT",t.PEER="RWUIUE_PEER",t._Str_18400=0,t._Str_14161=2,t._Str_13798=3,t._Str_7492="BOT",t})(),ye=(()=>{class t extends nt{constructor(e){super(t.RWVM_CHANGE_MOTTO_MESSAGE),this._motto=e}get motto(){return this._motto}}return t.RWVM_CHANGE_MOTTO_MESSAGE="RWVM_CHANGE_MOTTO_MESSAGE",t})(),Ae=(()=>{class t extends nt{constructor(t,e,s,i=-1,n=null){super(t),this._furniId=e,this._furniCategory=s,this._offerId=i,this._objectData=n}get furniId(){return this._furniId}get furniCategory(){return this._furniCategory}get objectData(){return this._objectData}get _Str_2451(){return this._offerId}}return t.RWFUAM_ROTATE="RWFUAM_ROTATE",t.RWFAM_MOVE="RWFAM_MOVE",t.RWFAM_PICKUP="RWFAM_PICKUP",t.RWFAM_EJECT="RWFAM_EJECT",t.RWFAM_USE="RWFAM_USE",t.RWFAM_OPEN_WELCOME_GIFT="RWFAM_OPEN_WELCOME_GIFT",t.RWFAM_SAVE_STUFF_DATA="RWFAM_SAVE_STUFF_DATA",t})(),Ce=(()=>{class t{constructor(){this._container=null,this._widget=null,this._disposed=!1}dispose(){this.disposed||(this.container=null,this._disposed=!0)}update(){}processWidgetMessage(t){if(!t||!this._container)return null;let e=0,s=null;if(t instanceof _t&&(e=t.userId,s=[_t.RWUAM_REQUEST_PET_UPDATE,_t.RWUAM_RESPECT_PET,_t.RWUAM_PICKUP_PET,_t.RWUAM_MOUNT_PET,_t.RWUAM_TOGGLE_PET_RIDING_PERMISSION,_t.RWUAM_TOGGLE_PET_BREEDING_PERMISSION,_t.RWUAM_DISMOUNT_PET,_t.RWUAM_SADDLE_OFF,_t.RWUAM_GIVE_CARRY_ITEM_TO_PET,_t.RWUAM_GIVE_WATER_TO_PET,_t.RWUAM_GIVE_LIGHT_TO_PET,_t.RWUAM_TREAT_PET].indexOf(t.type)>=0?this._container.roomSession.userDataManager.getPetData(e):this._container.roomSession.userDataManager.getUserData(e),!s))return null;let i=0,n=0;switch(t instanceof Ae&&(i=t.furniId,n=t.furniCategory),t.type){case ct.GET_OBJECT_INFO:return this.processObjectInfoMessage(t);case ct.GET_OBJECT_NAME:return this.processObjectNameMessage(t);case _t.RWUAM_SEND_FRIEND_REQUEST:this._container.friendService.sendFriendRequest(e,s.name);break;case _t.RWUAM_RESPECT_USER:this._container.sessionDataManager.giveRespect(e);break;case _t.RWUAM_RESPECT_PET:this._container.sessionDataManager.givePetRespect(e);break;case _t.RWUAM_WHISPER_USER:this._container.events.dispatchEvent(new be(be.WHISPER,s.name));break;case _t.RWUAM_IGNORE_USER:case _t.RWUAM_UNIGNORE_USER:break;case _t.RWUAM_KICK_USER:this._container.roomSession.sendKickMessage(t.userId);break;case _t.RWUAM_BAN_USER_DAY:case _t.RWUAM_BAN_USER_HOUR:case _t.RWUAM_BAN_USER_PERM:this._container.roomSession.sendBanMessage(t.userId,t.type);break;case _t.MUTE_USER_2MIN:this._container.roomSession.sendMuteMessage(t.userId,2);break;case _t.MUTE_USER_5MIN:this._container.roomSession.sendMuteMessage(t.userId,5);break;case _t.MUTE_USER_10MIN:this._container.roomSession.sendMuteMessage(t.userId,10);break;case _t.RWUAM_GIVE_RIGHTS:this._container.roomSession.sendGiveRightsMessage(t.userId);break;case _t.RWUAM_TAKE_RIGHTS:this._container.roomSession.sendTakeRightsMessage(t.userId);break;case _t.RWUAM_START_TRADING:s&&this._widget.inventoryTrading.startTrade(s.roomIndex,s.name);break;case _t.RWUAM_PASS_CARRY_ITEM:this._container.connection.send(new pe.a(e));break;case _t.RWUAM_GIVE_CARRY_ITEM_TO_PET:case _t.RWUAM_GIVE_WATER_TO_PET:case _t.RWUAM_GIVE_LIGHT_TO_PET:case _t.RWUAM_TREAT_PET:break;case _t.RWUAM_DROP_CARRY_ITEM:this._container.connection.send(new me.a);break;case Ae.RWFUAM_ROTATE:this._container.roomEngine.processRoomObjectOperation(i,n,V.a.OBJECT_ROTATE_POSITIVE);break;case Ae.RWFAM_MOVE:this._container.roomEngine.processRoomObjectOperation(i,n,V.a.OBJECT_MOVE);break;case Ae.RWFAM_PICKUP:this._container.roomEngine.processRoomObjectOperation(i,n,V.a.OBJECT_PICKUP);break;case Ae.RWFAM_EJECT:this._container.roomEngine.processRoomObjectOperation(i,n,V.a.OBJECT_EJECT);break;case Ae.RWFAM_USE:this._container.roomEngine.useRoomObject(i,n);break;case ye.RWVM_CHANGE_MOTTO_MESSAGE:return void this._container.roomSession.sendMottoMessage(t.motto);case Ae.RWFAM_SAVE_STUFF_DATA:{const e=t.objectData;if(e){const t=new Map,s=e.split("\t");if(s)for(const e of s){const s=e.split("=",2);s&&2===s.length&&t.set(s[0],s[1])}this._container.roomEngine.processRoomObjectWallOperation(i,n,V.a.OBJECT_SAVE_STUFF_DATA,t),this._Str_23922(t),t.clear()}break}case _t.RWUAM_REQUEST_PET_UPDATE:case _t.RWUAM_REPORT:case _t.RWUAM_REPORT_CFH_OTHER:break;case _t.RWUAM_AMBASSADOR_ALERT_USER:this._container.roomSession.sendAmbassadorAlertMessage(t.userId);break;case _t.RWUAM_AMBASSADOR_KICK_USER:this._container.roomSession.sendKickMessage(t.userId);break;case _t.AMBASSADOR_MUTE_USER_2MIN:this._container.roomSession.sendMuteMessage(t.userId,2);break;case _t.AMBASSADOR_MUTE_USER_10MIN:this._container.roomSession.sendMuteMessage(t.userId,10);break;case _t.AMBASSADOR_MUTE_USER_60MIN:this._container.roomSession.sendMuteMessage(t.userId,60);break;case _t.AMBASSADOR_MUTE_USER_18HOUR:this._container.roomSession.sendMuteMessage(t.userId,1080)}return null}processEvent(t){if(event)switch(t.type){case L.a.RSUBE_BADGES:return void this.widget.updateUserBadges(t.userId,t.badges)}}processObjectInfoMessage(t){const e=this._container.roomSession.roomId;switch(t.category){case W.a.FLOOR:case W.a.WALL:this._Str_23142(t,e);break;case W.a.UNIT:{if(!(this._container.roomSession&&this._container.sessionDataManager&&this._container.events&&this._container.roomEngine))return null;const s=this._container.roomSession.userDataManager.getUserDataByIndex(t.id);if(!s)return null;switch(s.type){case $.a.PET:break;case $.a.USER:this._Str_22722(e,t.id,t.category,s);break;case $.a.BOT:this._Str_22312(e,t.id,t.category,s);break;case $.a.RENTABLE_BOT:this._Str_23115(e,t.id,t.category,s)}break}}return null}processObjectNameMessage(t){const e=this._container.roomSession.roomId;let s=0,i=null,n=0,r=0;switch(t.category){case W.a.FLOOR:case W.a.WALL:{if(!this._container.events||!this._container.roomEngine)return null;const n=this._container.roomEngine.getRoomObject(e,t.id,t.category),a=n.type;if(0===a.indexOf("poster"))s=-1,i="${poster_"+parseInt(a.replace("poster",""))+"_name}",r=n.id;else{let e=null;const a=n.model.getValue(G.a.FURNITURE_TYPE_ID);if(t.category===W.a.FLOOR?e=this._container.sessionDataManager.getFloorItemData(a):t.category===W.a.WALL&&(e=this._container.sessionDataManager.getWallItemData(a)),!e)return null;s=e.id,i=e.name,r=n.id}break}case W.a.UNIT:{if(!this._container.roomSession||!this._container.roomSession.userDataManager)return null;const e=this._container.roomSession.userDataManager.getUserDataByIndex(t.id);if(!e)return null;s=e.webID,i=e.name,n=e.type,r=e.roomIndex;break}}return i&&this._container.events.dispatchEvent(new Re(s,t.category,i,n,r)),null}_Str_23142(t,e){if(!this._container||!this._container.events||!this._container.roomEngine)return;if(t.id<0)return;const s=new ve(ve.FURNI);s.id=t.id,s.category=t.category;const i=this._container.roomEngine.getRoomObject(e,t.id,t.category);if(!i)return;const n=i.model;n.getValue(Ie.a.INFOSTAND_EXTRA_PARAM)&&(s.extraParam=n.getValue(Ie.a.INFOSTAND_EXTRA_PARAM));const r=n.getValue(G.a.FURNITURE_DATA_FORMAT),a=Ee.a.getData(r);a.initializeFromRoomObjectModel(n),s.stuffData=a;const o=i.type;if(0===o.indexOf("poster")){const t=parseInt(o.replace("poster",""));s.name="${poster_"+t+"_name}",s.description="${poster_"+t+"_desc}"}else{const e=n.getValue(G.a.FURNITURE_TYPE_ID);let r=null;t.category===W.a.FLOOR?r=this._container.sessionDataManager.getFloorItemData(e):t.category==W.a.WALL&&(r=this._container.sessionDataManager.getWallItemData(e)),r&&(s.name=r.name,s.description=r.description,s.purchaseOfferId=r.offerId,this._container.wiredService&&t.category===W.a.FLOOR&&this._container.wiredService.selectFurniture(i.id,r.name))}o.indexOf("post_it")>-1&&(s.isStickie=!0);const c=n.getValue(G.a.FURNITURE_EXPIRY_TIME),_=n.getValue(G.a.FURNITURE_EXPIRTY_TIMESTAMP);s.expiration=c<0?c:Math.max(0,c-(u.a.instance.time-_)/1e3);let h=this._container.roomEngine.getRoomObjectImage(e,t.id,t.category,new Y.a(180),64,null);if((!h.data||h.data.width>140||h.data.height>200)&&(h=this._container.roomEngine.getRoomObjectImage(e,t.id,t.category,new Y.a(180),1,null)),h&&h.data){const t=u.a.instance.renderer.extract.image(h.data);t&&(s.image=t)}s.isWallItem=t.category===W.a.WALL,s.isRoomOwner=this._container.roomSession.isRoomOwner,s.roomControllerLevel=this._container.roomSession.controllerLevel,s.isAnyRoomOwner=this._container.sessionDataManager.isModerator,s.ownerId=n.getValue(G.a.FURNITURE_OWNER_ID),s.ownerName=n.getValue(G.a.FURNITURE_OWNER_NAME),s.usagePolicy=n.getValue(G.a.FURNITURE_USAGE_POLICY);const l=n.getValue(G.a.FURNITURE_GUILD_CUSTOMIZED_GUILD_ID);0!==l&&(s.groupId=l),this._container.isOwnerOfFurniture(i)&&(s.isOwner=!0),this._container.events.dispatchEvent(s)}_Str_22722(e,s,i,n){let r=Oe.OWN_USER;n.webID!==this._container.sessionDataManager.userId&&(r=Oe.PEER);const a=new Oe(r);a.isSpectator=this._container.roomSession.isSpectator,a.name=n.name,a.motto=n.custom,t.ACTIVITY_POINTS_DISPLAY_ENABLED&&(a.activityPoints=n.activityPoints),a.webID=n.webID,a.roomIndex=s,a.userType=$.a.USER;const o=this._container.roomEngine.getRoomObject(e,s,i);if(o&&(a.carryId=o.model.getValue(G.a.FIGURE_CARRY_OBJECT)),r==Oe.OWN_USER&&(a.realName=this._container.sessionDataManager.realName,a._Str_4330=this._container.sessionDataManager.canChangeName),a.isRoomOwner=this._container.roomSession.isRoomOwner,a.isGuildRoom=this._container.roomSession.isGuildRoom,a.roomControllerLevel=this._container.roomSession.controllerLevel,a.isModerator=this._container.sessionDataManager.isModerator,a.isAmbassador=this._container.sessionDataManager.isAmbassador,r===Oe.PEER){a.canBeAskedForAFriend=this._container.friendService.canBeAskedForAFriend(n.webID);const t=this._container.friendService.getFriend(n.webID);if(t&&(a.realName=t.realName,a.isFriend=!0),o){const t=o.model.getValue(G.a.FIGURE_FLAT_CONTROL);null!==t&&(a.flatControl=t),a._Str_6394=this._Str_23100(a),a._Str_5990=this._Str_22729(a),a._Str_6701=this._Str_23573(a)}a.isIgnored=this._container.sessionDataManager.isUserIgnored(n.name),a.respectLeft=this._container.sessionDataManager.respectsLeft;const e=this._container.sessionDataManager.isSystemShutdown,s=this._container.roomSession.tradeMode;if(e)a.canTrade=!1;else switch(s){case Se.a._Str_14475:{const t=a.flatControl!==B.a.NONE&&a.flatControl!==B.a.GUILD_MEMBER;a.canTrade=a.roomControllerLevel!==B.a.NONE&&a.roomControllerLevel!==B.a.GUILD_MEMBER||t;break}case Se.a._Str_9173:a.canTrade=!0;break;default:a.canTrade=!1}a._Str_6622=Oe._Str_18400,e&&(a._Str_6622=Oe._Str_14161),s!==Se.a._Str_9173&&(a._Str_6622=Oe._Str_13798)}a.groupId=parseInt(n.guildId),a.groupName=n.groupName,a.badges=this._container.roomSession.userDataManager.getUserBadges(n.webID),a.figure=n.figure,this._container.events.dispatchEvent(a)}_Str_22312(t,e,s,i){const n=new Oe(Oe.BOT);n.name=i.name,n.motto=i.custom,n.webID=i.webID,n.roomIndex=e,n.userType=i.type;const r=this._container.roomEngine.getRoomObject(t,e,s);r&&(n.carryId=r.model.getValue(G.a.FIGURE_CARRY_OBJECT)),n.isRoomOwner=this._container.roomSession.isRoomOwner,n.isGuildRoom=this._container.roomSession.isGuildRoom,n.roomControllerLevel=this._container.roomSession.controllerLevel,n.isModerator=this._container.sessionDataManager.isModerator,n._Str_5990=this._container.roomSession.isRoomOwner,n.badges=[Oe._Str_7492],n.figure=i.figure,this._container.events.dispatchEvent(n)}_Str_23115(t,e,s,i){const n=new Te;n.name=i.name,n.motto=i.custom,n.id=i.webID,n.roomIndex=e,n.ownerId=i.ownerId,n.ownerName=i.ownerName,n.botSkills=i.botSkills;const r=this._container.roomEngine.getRoomObject(t,e,s);r&&(n.carryId=r.model.getValue(G.a.FIGURE_CARRY_OBJECT)),n._Str_3246=this._container.roomSession.isRoomOwner,n.roomControllerLevel=this._container.roomSession.controllerLevel,n._Str_3529=this._container.sessionDataManager.isModerator,n.badges=[Oe._Str_7492],n.figure=i.figure,this._container.events.dispatchEvent(n)}_Str_9213(t){return t.isGuildRoom?t.roomControllerLevel>=B.a.GUILD_ADMIN:t.roomControllerLevel>=B.a.GUEST}_Str_23100(t){const e=(function(t,e){switch(e.allowMute){case fe.a._Str_5047:return this._Str_9213(t);default:return t.roomControllerLevel>=B.a.ROOM_OWNER}}).bind(this);return this._Str_18027(t,e)}_Str_22729(t){const e=(function(t,e){switch(e.allowKick){case fe.a._Str_11537:return!0;case fe.a._Str_5047:return this._Str_9213(t);default:return t.roomControllerLevel>=B.a.ROOM_OWNER}}).bind(this);return this._Str_18027(t,e)}_Str_23573(t){const e=(function(t,e){switch(e.allowBan){case fe.a._Str_5047:return this._Str_9213(t);default:return t.roomControllerLevel>=B.a.ROOM_OWNER}}).bind(this);return this._Str_18027(t,e)}_Str_18027(t,e){if(!this._container.roomSession._Str_7411)return!1;const s=this._container.roomSession.moderationSettings;let i=!1;return s&&(i=e(t,s)),i&&t.flatControl<B.a.ROOM_OWNER}_Str_23922(t){this._widget&&this._container.sessionDataManager.hasSecurity(5)&&this._container.connection.send(new ge.a(this._widget.furniData.id,t))}get type(){return x.a.INFOSTAND}get messageTypes(){return[ct.GET_OBJECT_INFO,ct.GET_OBJECT_NAME,_t.RWUAM_SEND_FRIEND_REQUEST,_t.RWUAM_RESPECT_USER,_t.RWUAM_WHISPER_USER,_t.RWUAM_IGNORE_USER,_t.RWUAM_UNIGNORE_USER,_t.RWUAM_KICK_USER,_t.RWUAM_BAN_USER_DAY,_t.RWUAM_BAN_USER_HOUR,_t.RWUAM_BAN_USER_PERM,_t.MUTE_USER_2MIN,_t.MUTE_USER_5MIN,_t.MUTE_USER_10MIN,_t.RWUAM_GIVE_RIGHTS,_t.RWUAM_TAKE_RIGHTS,_t.RWUAM_START_TRADING,_t.RWUAM_OPEN_HOME_PAGE,_t.RWUAM_PASS_CARRY_ITEM,_t.RWUAM_GIVE_CARRY_ITEM_TO_PET,_t.RWUAM_DROP_CARRY_ITEM,Ae.RWFAM_MOVE,Ae.RWFUAM_ROTATE,Ae.RWFAM_EJECT,Ae.RWFAM_PICKUP,Ae.RWFAM_USE,Ae.RWFAM_SAVE_STUFF_DATA,_t.RWUAM_REPORT,_t.RWUAM_PICKUP_PET,_t.RWUAM_MOUNT_PET,_t.RWUAM_TOGGLE_PET_RIDING_PERMISSION,_t.RWUAM_TOGGLE_PET_BREEDING_PERMISSION,_t.RWUAM_DISMOUNT_PET,_t.RWUAM_SADDLE_OFF,_t.RWUAM_TRAIN_PET,_t.RWUAM_RESPECT_PET,_t.RWUAM_REQUEST_PET_UPDATE,ye.RWVM_CHANGE_MOTTO_MESSAGE,_t.RWUAM_GIVE_LIGHT_TO_PET,_t.RWUAM_GIVE_WATER_TO_PET,_t.RWUAM_TREAT_PET,_t.RWUAM_REPORT_CFH_OTHER,_t.RWUAM_AMBASSADOR_ALERT_USER,_t.RWUAM_AMBASSADOR_KICK_USER,_t.AMBASSADOR_MUTE_USER_2MIN,_t.AMBASSADOR_MUTE_USER_10MIN,_t.AMBASSADOR_MUTE_USER_60MIN,_t.AMBASSADOR_MUTE_USER_18HOUR]}get eventTypes(){return[L.a.RSUBE_BADGES]}get container(){return this._container}set container(t){this._container=t}get widget(){return this._widget}set widget(t){this._widget=t}get disposed(){return this._disposed}}return t.ACTIVITY_POINTS_DISPLAY_ENABLED=!0,t})(),Me=(()=>{class t extends X{constructor(e,s,i){super(t.RWULUE_USER_LOCATION_UPDATE),this._userId=e,this._rectangle=s,this._Str_20775=i}get userId(){return this._userId}get rectangle(){return this._rectangle}get _Str_9337(){return this._Str_20775}}return t.RWULUE_USER_LOCATION_UPDATE="RWULUE_USER_LOCATION_UPDATE",t})(),Ue=(()=>{class t extends nt{constructor(t,e,s){super(t),this._objectId=e,this._objectType=s}get _Str_1577(){return this._objectId}get _Str_1723(){return this._objectType}}return t.RWGOI_MESSAGE_GET_OBJECT_LOCATION="RWGOI_MESSAGE_GET_OBJECT_LOCATION",t.RWGOI_MESSAGE_GET_GAME_OBJECT_LOCATION="RWGOI_MESSAGE_GET_GAME_OBJECT_LOCATION",t})();class De{constructor(){this._disposed=!1,this._container=null}dispose(){this._disposed=!0,this._container=null}get disposed(){return this._disposed}get type(){return null}set container(t){this._container=t}get messageTypes(){return[Ue.RWGOI_MESSAGE_GET_OBJECT_LOCATION,Ue.RWGOI_MESSAGE_GET_GAME_OBJECT_LOCATION]}processWidgetMessage(t){if(!(t&&this._container&&t instanceof Ue))return null;const e=this._container.roomSession;switch(t.type){case Ue.RWGOI_MESSAGE_GET_OBJECT_LOCATION:{if(!e||!e.userDataManager)return null;const s=e.userDataManager.getDataByType(t._Str_1577,t._Str_1723);let i=null,n=null;if(s){i=this._container.roomEngine.getRoomObjectBoundingRectangle(e.roomId,s.roomIndex,W.a.UNIT,this._container.getFirstCanvasId()),n=this._container.roomEngine.getRoomObjectScreenLocation(e.roomId,s.roomIndex,W.a.UNIT,this._container.getFirstCanvasId());const t=this._container.getRoomViewRect();i&&n&&t&&(i.x+=t.x,i.y+=t.y,n.x+=t.x,n.y+=t.y)}return new Me(t._Str_1577,i,n)}}return null}get eventTypes(){return[]}processEvent(t){}update(){}}var we=s("kRfe");let Ne=(()=>{class t extends nt{constructor(){super(t.RWZTM_ZOOM_TOGGLE)}}return t.RWZTM_ZOOM_TOGGLE="RWZTM_ZOOM_TOGGLE",t})();class Le{constructor(){this._zoomed=!1,this._communicationManager=u.a.instance.communication,this._container=null,this._widget=null,this._messages=[],this._disposed=!1,this.onRoomInfoEvent=this.onRoomInfoEvent.bind(this)}dispose(){if(!this._disposed){this._communicationManager=null,this._widget=null;for(const t of this._messages)this._container.connection.removeMessageEvent(t);this._container=null,this._messages=[],this._disposed=!0}}update(){}processWidgetMessage(t){return t instanceof Ne&&(this._container.roomEngine.events.dispatchEvent(new C(this._container.roomEngine.activeRoomId,this._zoomed?1:0,!1)),this._zoomed=!this._zoomed),null}processEvent(t){}onRoomInfoEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=e.data;if(s&&e.roomEnter){this._widget.updateRoomInfo(s);const t=s.showOwner?u.a.instance.getLocalization("room.tool.room.owner.prefix")+" "+s.ownerName:u.a.instance.getLocalization("room.tool.public.room");this._widget.updateRoomTools(s.roomName,t,s.tags),this._widget.addVisitedRoom(s),this._widget.updateRoomCurrentIndex(s.roomId)}}rateRoom(){this._container&&this._container.connection.send(new we.a(1))}get disposed(){return this._disposed}get type(){return x.a.ROOM_TOOLS}get widget(){return this._widget}set widget(t){this._widget=t}get container(){return this._container}set container(t){if(this._container=t,this._container){this._messages=[new ae.a(this.onRoomInfoEvent)];for(const e of this._messages)t.connection.addMessageEvent(e)}}get messageTypes(){return[]}get eventTypes(){return[]}}class xe{constructor(){this._isDisposed=!1,this._container=null}dispose(){this._isDisposed=!0,this._container=null}processWidgetMessage(t){if(!t)return null;switch(t.type){case ft.RWRWM_USER_CHOOSER:this.processUserChooser();break;case ct.SELECT_OBJECT:this.selectUnit(t)}return null}selectUnit(t){null!=t&&t.category==W.a.UNIT&&this._container.roomEngine.selectRoomObject(this._container.roomSession.roomId,t.id,t.category)}processUserChooser(){if(null==this._container||null==this._container.roomSession||null==this._container.roomEngine||null==this._container.roomSession.userDataManager)return;const t=this._container.roomSession.roomId,e=W.a.UNIT,s=[],i=this._container.roomEngine.getRoomObjectCount(t,e);for(let n=0;n<i;n++){const i=this._container.roomEngine.getRoomObjectByIndex(t,n,e);if(null==i)continue;const r=this._container.roomSession.userDataManager.getUserDataByIndex(i.id);null!=r&&s.push(new Wt(r.roomIndex,e,r.name))}s.sort(kt("name")),this._container.events.dispatchEvent(new Vt(Vt.RWCCE_USER_CHOOSER_CONTENT,s))}processEvent(t){}update(){}get disposed(){return this._isDisposed}get type(){return x.a.USER_CHOOSER}set container(t){this._container=t}get messageTypes(){return[ft.RWRWM_USER_CHOOSER,ct.SELECT_OBJECT]}get eventTypes(){return[]}}var Pe=s("+LbQ"),Fe=s("i+XF"),ke=s("QjCb"),We=s("4NUc"),Ve=s("KJ3T");let Ge=(()=>{class t{constructor(t){this._ngZone=t,this._alertCenter=null,this._notificationCenter=null,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages&&this.unregisterMessages(),this._messages=[new ke.a(this.onHabboBroadcastMessageEvent.bind(this)),new Fe.a(this.onModeratorMessageEvent.bind(this)),new We.a(this.onMOTDNotificationEvent.bind(this)),new Pe.a(this.onNotificationDialogMessageEvent.bind(this)),new Ve.a(this.onHotelWillShutdownEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onHabboBroadcastMessageEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this.alert(e.message))}onNotificationDialogMessageEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this.displayNotification(e.type,e.parameters))}onModeratorMessageEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this.alertWithLink(e.message,e.link))}onMOTDNotificationEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this.alertWithScrollableMessages(e.messages))}onHotelWillShutdownEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=u.a.instance.localization.getValueWithParameter("opening.hours.shutdown","m",e.minutes.toString());this._ngZone.run(()=>this.alert(s))}alert(t,e=null){return this._alertCenter?this._alertCenter.alert(t,e):null}alertWithLink(t,e,s=null){return this._alertCenter?this._alertCenter.alertWithLink(t,e,s):null}alertWithConfirm(t,e=null,s=null){return this._alertCenter?this._alertCenter.alertWithConfirm(t,e,s):null}alertWithChoices(t,e,s=null){return this._alertCenter?this._alertCenter.alertWithChoices(t,e,s):null}alertWithScrollableMessages(t,e=null){return this._alertCenter?this._alertCenter.alertWithScrollableMessages(t,e):null}displayNotification(t,e){return this._notificationCenter?this._notificationCenter.displayNotification(t,e):null}closeAlert(t){t&&this._alertCenter&&this._alertCenter.closeAlert(t)}closeNotification(t){t&&this._notificationCenter&&this._notificationCenter.closeNotification(t)}closeAll(){this._alertCenter&&(this._alertCenter.closeAllAlerts(),this._notificationCenter.closeAllNotifications())}get alertCenter(){return this._alertCenter}set alertCenter(t){this._alertCenter=t}get notificationCenter(){return this._notificationCenter}set notificationCenter(t){this._notificationCenter=t}}return t.\u0275fac=function(e){return new(e||t)(i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();var He=s("q4z0"),Be=s("m7hj"),je=s("WEUE"),Ke=s("9Jti"),ze=s("XNkd"),Ye=s("Ahnc"),Xe=s("nQsh"),Ze=s("29Gn");let qe=(()=>{class t{constructor(t,e){this._settingsService=t,this._ngZone=e,this._messages=[],this._component=null,this._roomSession=null,this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomSessionManager.events.addEventListener(N.a.CREATED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(N.a.STARTED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(N.a.ENDED,this.onRoomSessionEvent),this._messages=[new Be.a(this.onWiredFurniActionEvent.bind(this)),new je.a(this.onWiredFurniConditionEvent.bind(this)),new Ke.a(this.onWiredFurniTriggerEvent.bind(this)),new ze.a(this.onWiredOpenEvent.bind(this)),new Ye.a(this.onWiredRewardResultMessageEvent.bind(this)),new Xe.a(this.onWiredSaveSuccessEvent.bind(this)),new Ze.a(this.onWiredValidationErrorEvent.bind(this)),new He.a(this.onDesktopViewEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomSessionManager.events.removeEventListener(N.a.CREATED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(N.a.STARTED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(N.a.ENDED,this.onRoomSessionEvent);for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomSessionEvent(t){if(t)switch(t.type){case N.a.CREATED:case N.a.STARTED:return void(this._roomSession=t.session);case N.a.ENDED:return this._roomSession=null,void this._ngZone.run(()=>this._component&&this._component.close())}}onWiredFurniActionEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this._component.setupTrigger(e.definition))}onWiredFurniConditionEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this._component.setupTrigger(e.definition))}onWiredFurniTriggerEvent(t){if(!t||!this._component)return;const e=t.getParser();e&&this._ngZone.run(()=>this._component.setupTrigger(e.definition))}onWiredOpenEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onWiredRewardResultMessageEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onWiredSaveSuccessEvent(t){t&&t.getParser()&&this._ngZone.run(()=>this._component&&this._component.close())}onWiredValidationErrorEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onDesktopViewEvent(t){t&&this._ngZone.run(()=>this._component&&this._component.close())}selectFurniture(t,e){const s=u.a.instance.roomEngine,i=s.getSelectedRoomObjectData(this.roomId);i&&i.id===-t?s.setPlacedRoomObjectData(this.roomId,null):this._component&&this._component.toggleFurniSelected(t,e)}get component(){return this._component}set component(t){this._component=t}get roomId(){return this._roomSession?this._roomSession.roomId:0}}return t.\u0275fac=function(e){return new(e||t)(i.kc(m),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();var Qe=s("dwRb"),Je=s("Pox2"),$e=s("kZQz"),ts=s("WM79"),es=s("YN1x"),ss=s("00eG"),is=s("t1CI"),ns=s("G3dz"),rs=s("gOUc"),as=s("81IQ"),os=s("X26Z"),cs=s("P0eX"),_s=s("5+UO"),hs=s("0/8l");class ls extends _s.a{constructor(t){super(t,hs.a)}getParser(){return this.parser}}var us=s("i/ye"),ds=s("wW/F"),gs=s("YaSm"),ms=s("I5LT"),ps=s("SzgH"),fs=s("OLXM"),Es=s("YQyq"),Ss=s("tLSS");let Is=(()=>{class t{constructor(t,e,s=0,i=null,n=0){this._type=n,this._senderId=t,this._message=e,this._secondsSinceSent=s,this._extraData=i,this._date=new Date}get type(){return this._type}get senderId(){return this._senderId}get message(){return this._message}get secondsSinceSent(){return this._secondsSinceSent}get extraData(){return this._extraData}get date(){return this._date}}return t.CHAT=0,t.ROOM_INVITE=1,t.STATUS_NOTIFICATION=2,t})();class Rs{constructor(){this._id=-1,this._name=null,this._gender=0,this._online=!1,this._followingAllowed=!1,this._figure=null,this._categoryId=0,this._motto=null,this._realName=null,this._lastAccess=null,this._persistedMessageUser=!1,this._vipMember=!1,this._pocketHabboUser=!1,this._relationshipStatus=-1,this._unread=0}populate(t){return!!t&&(this._id=t.id,this._name=t.name,this._gender=t.gender,this._online=t.online,this._followingAllowed=t.followingAllowed,this._figure=t.figure,this._categoryId=t.categoryId,this._motto=t.motto,this._realName=t.realName,this._lastAccess=t.lastAccess,this._persistedMessageUser=t.persistedMessageUser,this._vipMember=t.vipMember,this._pocketHabboUser=t.pocketHabboUser,this._relationshipStatus=t.relationshipStatus,!0)}get id(){return this._id}set id(t){this._id=t}get name(){return this._name}set name(t){this._name=t}get gender(){return this._gender}set gender(t){this._gender=t}get online(){return this._online}set online(t){this._online=t}get followingAllowed(){return this._followingAllowed}set followingAllowed(t){this._followingAllowed=t}get figure(){return this._figure}set figure(t){this._figure=t}get categoryId(){return this._categoryId}set categoryId(t){this._categoryId=t}get motto(){return this._motto}set motto(t){this._motto=t}get lastAccess(){return this._lastAccess}set lastAccess(t){this._lastAccess=t}get realName(){return this._realName}set realName(t){this._realName=t}get persistedMessageUser(){return this._persistedMessageUser}set persistedMessageUser(t){this._persistedMessageUser=t}get vipMember(){return this._vipMember}set vipMember(t){this._vipMember=t}get pocketHabboUser(){return this._pocketHabboUser}set pocketHabboUser(t){this._pocketHabboUser=t}get relationshipStatus(){return this._relationshipStatus}set relationshipStatus(t){this._relationshipStatus=t}get unread(){return this._unread}set unread(t){this._unread=t}}class bs{populate(t){return!!t&&(this._requestId=t.requestId,this._requesterName=t.requesterName,this._figureString=t.figureString,this._requesterUserId=t.requesterUserId,!0)}get requestId(){return this._requestId}get requesterName(){return this._requesterName}get requesterUserId(){return this._requesterUserId}get figureString(){return this._figureString}}let vs=(()=>{class t{constructor(t){this._participant=t,this._chats=[],this._lastUpdated=new Date,this._unread=!1,this._emitter=new i.r}insertChat(e,s,i=0,n=null,r=0){const a=new Is(e,s,i,n,r);return this._chats.push(a),this._lastUpdated=new Date,this._unread=!0,this._emitter.emit(t.MESSAGE_RECEIVED),a}setRead(){this._unread=!1}get participant(){return this._participant}get chats(){return this._chats}get lastUpdated(){return this._lastUpdated}get unread(){return this._unread}get emitter(){return this._emitter}}return t.MESSAGE_RECEIVED="MT_MESSAGE_RECEIVED",t})(),Ts=(()=>{class t{constructor(){this._messengerSound=null,this._messengerSound=new Audio("assets/sounds/new_message.mp3")}playMessengerSound(){const t=this._messengerSound;t&&t.play()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})(),Os=(()=>{class t{constructor(t,e,s){this._notificationService=t,this._soundService=e,this._ngZone=s,this._friendListReady=!1,this._component=null,this._friends=new Map,this._requests=new Map,this._threads=new Map,this._userFriendLimit=0,this._normalFriendLimit=0,this._extendedFriendLimit=0,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages&&this.unregisterMessages(),this._messages=[new Qe.a(this.onAcceptFriendResultEvent.bind(this)),new Je.a(this.onFindFriendsProcessResultEvent.bind(this)),new $e.a(this.onFollowFriendFailedEvent.bind(this)),new ts.a(this.onFriendListFragmentEvent.bind(this)),new es.a(this.onFriendListUpdateEvent.bind(this)),new ss.a(this.onFriendNotificationEvent.bind(this)),new is.a(this.onFriendRequestsEvent.bind(this)),new ns.a(this.onHabboSearchResultEvent.bind(this)),new rs.a(this.onInstantMessageErrorEvent.bind(this)),new as.a(this.onMessageErrorEvent.bind(this)),new os.a(this.onMessengerInitEvent.bind(this)),new cs.a(this.onMiniMailNewMessageEvent.bind(this)),new ls(this.onMiniMailUnreadCountEvent.bind(this)),new us.a(this.onNewConsoleMessageEvent.bind(this)),new ds.a(this.onNewFriendRequestEvent.bind(this)),new gs.a(this.onRoomInviteErrorEvent.bind(this)),new ms.a(this.onRoomInviteEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(this._messages&&this._messages.length)for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=null})}onAcceptFriendResultEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onFindFriendsProcessResultEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onFollowFriendFailedEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onFriendListFragmentEvent(t){if(!t)return;const e=t.getParser();e&&(this._friendListReady=!1,this._ngZone.run(()=>{for(const t of e.fragment)this.updateFriend(t);e.fragmentNumber+1===e.totalFragments&&(this._friendListReady=!0)}))}onFriendListUpdateEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{for(const t of e.addedFriends)this.updateFriend(t);for(const t of e.updatedFriends)this.updateFriend(t);for(const t of e.removedFriendIds)this.removeFriend(t)})}onFriendNotificationEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onFriendRequestsEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{for(const t of e.requests)this.updateFriendRequest(t)})}onHabboSearchResultEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onInstantMessageErrorEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onMessageErrorEvent(t){if(!t)return;const e=t.getParser();if(!e)return;let s="";switch(e.errorCode){case 1:s="${friendlist.error.friendlistownlimit}";break;case 2:s="${friendlist.error.friendlistlimitofrequester}";break;case 3:s="${friendlist.error.friend_requests_disabled}";break;case 4:s="${friendlist.error.requestnotfound}";break;default:s=`Received messenger error: msg: ${e.clientMessageId}, errorCode: ${e.errorCode}`}this._ngZone.run(()=>this._notificationService.alert(s,"${friendlist.alert.title}"))}onMessengerInitEvent(t){if(!t)return;const e=t.getParser();e&&(this._ngZone.run(()=>{this._userFriendLimit=e.userFriendLimit,this._normalFriendLimit=e.normalFriendLimit,this._extendedFriendLimit=e.extendedFriendLimit}),this.requestFriendRequests())}onMiniMailNewMessageEvent(t){t&&t.getParser()}onMiniMailUnreadCountEvent(t){t&&t.getParser()}onNewConsoleMessageEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=this.getMessageThread(e.senderId);s&&(this._ngZone.run(()=>{s.insertChat(e.senderId,e.messageText,e.secondsSinceSent,e.extraData),this._component&&this._component.currentThread===s&&s.setRead()}),this._soundService.playMessengerSound())}onNewFriendRequestEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this.updateFriendRequest(e.request))}onRoomInviteErrorEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onRoomInviteEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=this.getMessageThread(e.senderId);s&&this._ngZone.run(()=>{s.insertChat(e.senderId,e.messageText,0,null,Is.ROOM_INVITE),this._component&&this._component.currentThread===s&&s.setRead()})}getFriend(t){return this._friends.get(t)||null}updateFriend(t){if(!t)return;let e=this._friends.get(t.id);e||(e=new Rs,this._friends.set(t.id,e)),e.populate(t)}removeFriend(t){this._friends.delete(t)}updateFriendRequest(t){if(!t)return;let e=this._requests.get(t.requestId);e||(e=new bs,this._requests.set(t.requestId,e)),e.populate(t)}acceptFriendRequest(t){this._requests.delete(t.requestId),u.a.instance.communication.connection.send(new ps.a(t.requestId))}removeFriendRequest(t){this._requests.delete(t.requestId),u.a.instance.communication.connection.send(new fs.a(!1,t.requestId))}removeAllFriendRequests(){this._requests.clear(),u.a.instance.communication.connection.send(new fs.a(!0))}getMessageThread(t){let e=this._threads.get(t);if(!e){const s=this.getFriend(t);if(!s)return;e=new vs(s),this._threads.set(t,e)}return e}requestFriendRequests(){u.a.instance.communication.connection.send(new Es.a)}canBeAskedForAFriend(t){return!this._friends.get(t)}sendFriendRequest(t,e){this._friends.get(t)||u.a.instance.communication.connection.send(new Ss.a(e))}get component(){return this._component}set component(t){this._component=t}get friends(){return this._friends}get requests(){return this._requests}get threads(){return this._threads}get unreadCount(){let t=0;for(const e of this._threads.values())e&&e.unread&&t++;return t}get notificationCount(){return this.requests.size+this.unreadCount}}return t.\u0275fac=function(e){return new(e||t)(i.kc(Ge),i.kc(Ts),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();var ys=s("cSuP");const As=["roomCanvas"],Cs=["widgetContainer"];function Ms(t,e){}let Us=(()=>{class t{constructor(t,e,s,i,n,r){this._notificationService=t,this._wiredService=e,this._friendService=s,this._chatHistoryService=i,this._componentFactoryResolver=n,this._ngZone=r,this._events=new k.a,this._handlers=[],this._widgets=new Map,this._widgetHandlerMessageMap=new Map,this._widgetHandlerEventMap=new Map,this._roomColorAdjustor=null,this._roomBackground=null,this._roomBackgroundColor=0,this._roomColorizerColor=0,this._roomScale=1,this._resizeTimer=null,this._didMouseMove=!1,this._lastClick=0,this._clickCount=0,this._lastMouseMove=0,this._isMouseMove=!1,this._scrollCount=0,this._lastScrollTime=0}ngOnDestroy(){this.endRoom(),this._events.dispose()}prepareRoom(t){if(!t)return;const e=this.getFirstCanvasId(),s=u.a.instance.roomEngine.getRoomInstanceDisplay(t.roomId,e,u.a.instance.width,u.a.instance.height,z.a.SCALE_ZOOMED_IN);if(!s)return;const i=u.a.instance.roomEngine.getRoomInstanceGeometry(t.roomId,e);if(i){let e=((u.a.instance.roomEngine.getRoomInstanceVariable(t.roomId,H.a.ROOM_MIN_X)||0)+(u.a.instance.roomEngine.getRoomInstanceVariable(t.roomId,H.a.ROOM_MAX_X)||0))/2,s=((u.a.instance.roomEngine.getRoomInstanceVariable(t.roomId,H.a.ROOM_MIN_Y)||0)+(u.a.instance.roomEngine.getRoomInstanceVariable(t.roomId,H.a.ROOM_MAX_Y)||0))/2;const n=20;e+=n-1,s+=n-1;const r=Math.sqrt(n*n+n*n)*Math.tan(30/180*Math.PI);i.location=new Y.a(e,s,r)}const n=u.a.instance.stage;n&&(n.addChild(s),this._roomSession=t,this.insertCanvas(),u.a.instance.ticker.add(this.update,this))}endRoom(){if(this._roomSession){u.a.instance.ticker.remove(this.update,this),this._resizeTimer&&(clearTimeout(this._resizeTimer),this._resizeTimer=null);for(const t of this._widgets.values())t&&(t.instance&&t.instance.dispose(),this._ngZone.run(()=>t.destroy()));for(const t of this._handlers)t&&t.dispose();this._roomColorAdjustor=null,this._roomBackground=null,this._roomBackgroundColor=0,this._roomColorizerColor=0,this._roomScale=1,t.COLOR_ADJUSTMENT.red=1,t.COLOR_ADJUSTMENT.green=1,t.COLOR_ADJUSTMENT.blue=1,this._handlers=[],this._widgets.clear(),this._widgetHandlerMessageMap.clear(),this._widgetHandlerEventMap.clear(),this._events.removeAllListeners(),this._roomSession=null,this.removeCanvas(),h.a.call("logDebug","Navigator: exiting room")}}insertCanvas(){const t=u.a.instance.renderer.view;t&&(t.onclick=this.onMouseEvent.bind(this),t.onmousemove=this.onMouseEvent.bind(this),t.onmousedown=this.onMouseEvent.bind(this),t.onmouseup=this.onMouseEvent.bind(this),window.onresize=this.onWindowResizeEvent.bind(this),window.onmousewheel=this.onWindowMouseWheelEvent.bind(this),this.roomCanvasReference.nativeElement.appendChild(t))}removeCanvas(){const t=u.a.instance.renderer.view;t&&(t.onclick=null,t.onmousemove=null,t.onmousedown=null,t.onmouseup=null,window.onresize=null,window.onmousewheel=null,t.parentElement&&t.parentElement.removeChild(t))}onMouseEvent(t){if(!t||!this._roomSession)return;const e=t.clientX,s=t.clientY;let i=t.type;switch(i===j.a.MOUSE_CLICK&&(this._lastClick&&(this._clickCount=1,this._lastClick>=Date.now()-300&&this._clickCount++),this._lastClick=Date.now(),2===this._clickCount&&(this._didMouseMove||(i=j.a.DOUBLE_CLICK),this._clickCount=0,this._lastClick=null)),i){case j.a.MOUSE_CLICK:case j.a.DOUBLE_CLICK:break;case j.a.MOUSE_MOVE:this._didMouseMove=!0;break;case j.a.MOUSE_DOWN:this._didMouseMove=!1;break;case j.a.MOUSE_UP:break;default:return}u.a.instance.roomEngine.setActiveRoomId(this._roomSession.roomId),u.a.instance.roomEngine.dispatchMouseEvent(this.getFirstCanvasId(),e,s,i,t.altKey,t.ctrlKey||t.metaKey,t.shiftKey,!1)}onWindowResizeEvent(t){t&&this._roomSession&&(this._resizeTimer&&clearTimeout(this._resizeTimer),this._resizeTimer=setTimeout(()=>{u.a.instance.renderer.resize(window.innerWidth,window.innerHeight),u.a.instance.roomEngine.initializeRoomInstanceRenderingCanvas(this._roomSession.roomId,this.getFirstCanvasId(),u.a.instance.width,u.a.instance.height),this._events.dispatchEvent(new Q(Q.SIZE_CHANGED,this.getRoomViewRect())),this.setRoomBackground(),u.a.instance.render()},1))}onWindowMouseWheelEvent(t){if(!t||!this._roomSession)return;if(t.target!==u.a.instance.renderer.view)return;const e=-1/40*(t.wheelDeltaY||t.deltaY)<0?1:-1;if(this._lastScrollTime&&(this._lastScrollTime<Date.now()-300&&(this._scrollCount=0),this._scrollCount++),this._lastScrollTime=Date.now(),15!==this._scrollCount)return;this._scrollCount=0,this._lastScrollTime=null;let s=this._roomScale;switch(e){case 1:s>=.5&&(s+=.5);break;case-1:s>.5&&(s-=.5)}this._roomScale=s,u.a.instance.roomEngine.events.dispatchEvent(new C(this._roomSession.roomId,s,!1))}update(){for(const t of this._widgets.values())t.instance.widgetHandler&&t.instance.widgetHandler.update()}createWidget(t,e){if(this._widgets.get(t))return;let s=null,i=!1;switch(t){case x.a.CHAT_WIDGET:{i=!0;const t=new At(this._chatHistoryService);t.connection=u.a.instance.communication.connection,s=t;break}case x.a.CHAT_INPUT_WIDGET:i=!0,s=new Et;break;case x.a.AVATAR_INFO:s=new ht;break;case x.a.INFOSTAND:s=new Ce;break;case x.a.LOCATION_WIDGET:s=new De;break;case x.a.INTERNAL_LINK:s=new re;break;case x.a.ROOM_LINK:s=new ce;break;case x.a.ROOM_DIMMER:s=new ne;break;case x.a.CUSTOM_STACK_HEIGHT:s=new Qt;break;case x.a.FURNI_CHOOSER:s=new Gt;break;case x.a.USER_CHOOSER:s=new xe;break;case x.a.FURNI_STICKIE_WIDGET:s=new le;break;case x.a.DOORBELL:s=new Ut;break;case x.a.FURNI_TROPHY_WIDGET:s=new de;break;case x.a.FURNI_CREDIT_WIDGET:s=new Zt;break;case x.a.FURNITURE_CONTEXT_MENU:s=new jt;break;case x.a.ROOM_BACKGROUND_COLOR:s=new Ht;break;case x.a.FRIEND_FURNI_CONFIRM:s=new xt;break;case x.a.FRIEND_FURNI_ENGRAVING:s=new Ft;break;case x.a.ROOM_TOOLS:s=new Le}if(s){const i=s.messageTypes;if(i&&i.length)for(const t of i){if(!t)continue;let e=this._widgetHandlerMessageMap.get(t);e||(e=[],this._widgetHandlerMessageMap.set(t,e)),e.push(s)}const n=s.eventTypes;if(n.push(O.a.OPEN_WIDGET,O.a.CLOSE_WIDGET),n&&n.length)for(const t of n){if(!t)continue;let e=this._widgetHandlerEventMap.get(t);e||(e=[],this._widgetHandlerEventMap.set(t,e)),e.push(s)}if(this._handlers.push(s),e){let i=null,n=null;if(this._ngZone.run(()=>{const t=this._componentFactoryResolver.resolveComponentFactory(e);i=this.widgetContainer.createComponent(t),n=i.instance}),!n)return;n.widgetHandler=s,n.messageListener=this,n.registerUpdateEvents(this._events),this._widgets.set(t,i)}s.container=this}i&&this._events.dispatchEvent(new Q(Q.SIZE_CHANGED,this.getRoomViewRect()))}processEvent(t){if(!t||!this._widgetHandlerEventMap)return;const e=this._widgetHandlerEventMap.get(t.type);if(!e)return;let s=!1;for(const i of e)i&&(s=!0,t.type!==O.a.OPEN_WIDGET&&t.type!==O.a.CLOSE_WIDGET||t instanceof O.a&&(s=i.type===t.widget),s&&i.processEvent(t))}processWidgetMessage(t){if(!t||!t.type)return null;const e=this._widgetHandlerMessageMap.get(t.type);if(!e||!e.length)return null;for(const s of e){if(!s)continue;const e=s.processWidgetMessage(t);if(e)return e}return null}onRoomEngineEvent(t){if(t)switch(t.type){case d.a.NORMAL_MODE:return void this._events.dispatchEvent(new Z(Z.RWREUE_NORMAL_MODE,t.roomId));case d.a.GAME_MODE:return void this._events.dispatchEvent(new Z(Z.RWREUE_GAME_MODE,t.roomId))}}onRoomEngineObjectEvent(t){if(!t)return;const e=t.objectId,s=t.category;let i=null;switch(t.type){case T.a.SELECTED:this.isFurnitureSelectionDisabled(t)||(i=new q(q.OBJECT_SELECTED,e,s,t.roomId));break;case T.a.DESELECTED:i=new q(q.OBJECT_DESELECTED,e,s,t.roomId);break;case T.a.ADDED:{let n=null;switch(s){case W.a.FLOOR:case W.a.WALL:n=q.FURNI_ADDED;break;case W.a.UNIT:n=q.USER_ADDED}n&&(i=new q(n,e,s,t.roomId));break}case T.a.REMOVED:{let n=null;switch(s){case W.a.FLOOR:case W.a.WALL:n=q.FURNI_REMOVED;break;case W.a.UNIT:n=q.USER_REMOVED}n&&(i=new q(n,e,s,t.roomId));break}case T.a.MOUSE_ENTER:i=new q(q.OBJECT_ROLL_OVER,e,s,t.roomId);break;case T.a.MOUSE_LEAVE:i=new q(q.OBJECT_ROLL_OUT,e,s,t.roomId);break;case T.a.REQUEST_MOVE:this.checkFurniManipulationRights(t.roomId,e,s)&&u.a.instance.roomEngine.processRoomObjectOperation(e,s,V.a.OBJECT_MOVE);break;case T.a.REQUEST_ROTATE:this.checkFurniManipulationRights(t.roomId,e,s)&&u.a.instance.roomEngine.processRoomObjectOperation(e,s,V.a.OBJECT_ROTATE_POSITIVE);break;case O.a.REQUEST_STICKIE:this.processWidgetMessage(new Xt(Xt.REQUEST_STICKIE,e,s,t.roomId));break;case O.a.REQUEST_TROPHY:this.processWidgetMessage(new Xt(Xt.REQUEST_TROPHY,e,s,t.roomId));break;case O.a.REQUEST_CREDITFURNI:this.processWidgetMessage(new Xt(Xt.REQUEST_CREDITFURNI,e,s,t.roomId));break;case O.a.REQUEST_DIMMER:this.processWidgetMessage(new Xt(Xt.REQUEST_DIMMER,e,s,t.roomId));break;case O.a.OPEN_WIDGET:case O.a.CLOSE_WIDGET:case O.a.OPEN_FURNI_CONTEXT_MENU:case O.a.CLOSE_FURNI_CONTEXT_MENU:case O.a.REMOVE_DIMMER:case O.a.REQUEST_MANNEQUIN:case O.a.REQUEST_BACKGROUND_COLOR:case O.a.REQUEST_FRIEND_FURNITURE_ENGRAVING:case O.a.REQUEST_HIGH_SCORE_DISPLAY:case O.a.REQUEST_HIDE_HIGH_SCORE_DISPLAY:case O.a.REQUEST_INTERNAL_LINK:case O.a.REQUEST_ROOM_LINK:this.processEvent(t)}if(i){let t=!0;i instanceof q&&(t=!P.isRoomPreviewerId(i.roomId)),t&&this._events.dispatchEvent(i)}}isFurnitureSelectionDisabled(t){let e=!1;const s=u.a.instance.roomEngine.getRoomObject(t.roomId,t.objectId,t.category);return s&&1===s.model.getValue(G.a.FURNITURE_SELECTION_DISABLED)&&(e=!0,u.a.instance.sessionDataManager.isModerator&&(e=!1)),e}checkFurniManipulationRights(t,e,s){return this._roomSession.controllerLevel>=B.a.GUEST||u.a.instance.sessionDataManager.isModerator||this.isOwnerOfFurniture(u.a.instance.roomEngine.getRoomObject(t,e,s))}isOwnerOfFurniture(t){return!(!t||!t.model)&&u.a.instance.sessionDataManager.userId===t.model.getValue(G.a.FURNITURE_OWNER_ID)}_Str_2485(t){if(!t||!this._widgetHandlerEventMap)return;const e=this._widgetHandlerEventMap.get(t.type);if(e&&e.length){let s=!0;for(const i of e)(t.type===O.a.OPEN_WIDGET||O.a.CLOSE_WIDGET)&&t instanceof O.a&&(s=i.type===t.widget),s&&i.processEvent(t)}}getRoomBackground(){if(this._roomBackground)return this._roomBackground;const t=this.roomEngine.getRoomInstanceRenderingCanvas(this.roomSession.roomId,this.getFirstCanvasId());if(!t)return null;const e=t.master,s=new g.n(g.p.WHITE);return e.addChildAt(s,0),this._roomBackground=s,this._roomBackground}getRoomColorizer(){if(this._roomColorAdjustor)return this._roomColorAdjustor;const e=this.roomEngine.getRoomInstanceRenderingCanvas(this.roomSession.roomId,this.getFirstCanvasId());if(!e)return null;const s=e.master;return s?(this._roomColorAdjustor=t.COLOR_ADJUSTMENT,s.filters=[this._roomColorAdjustor],this._roomColorAdjustor):null}setRoomBackgroundColor(t,e,s){this._roomBackgroundColor=K.a._Str_13949(((255&t)<<16)+((255&e)<<8)+(255&s));const i=this.getRoomBackground();i&&(t||e||s?(i.visible=!0,this.setRoomBackground()):i.visible=!1)}setRoomColorizerColor(t,e){console.log(t,e),this._roomColorizerColor=K.a._Str_13949((16776960&K.a._Str_22130(t))+e),this.setRoomColorizer()}setRoomBackground(){const t=this.getRoomBackground();t&&(t.tint=this._roomBackgroundColor,t.width=u.a.instance.width,t.height=u.a.instance.height)}setRoomColorizer(){const t=this.getRoomColorizer();if(!t)return;const e=this._roomColorizerColor>>8&255,s=255&this._roomColorizerColor;t.red=(this._roomColorizerColor>>16&255)/255,t.green=e/255,t.blue=s/255}getFirstCanvasId(){return 1}getRoomViewRect(){const t=this.roomCanvasReference.nativeElement.getBoundingClientRect();return new g.k(t.x||0,t.y||0,t.width||0,t.height||0)}get events(){return this._events}get connection(){return u.a.instance.communication.connection}get roomEngine(){return u.a.instance.roomEngine}get avatarRenderManager(){return u.a.instance.avatar}get roomSessionManager(){return u.a.instance.roomSessionManager}get sessionDataManager(){return u.a.instance.sessionDataManager}get roomSession(){return this._roomSession}get notificationService(){return this._notificationService}get wiredService(){return this._wiredService}get friendService(){return this._friendService}}return t.COLOR_ADJUSTMENT=new F.a,t.\u0275fac=function(e){return new(e||t)(i.Yb(Ge),i.Yb(qe),i.Yb(Os),i.Yb(ys.a),i.Yb(i.m),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-component"]],viewQuery:function(t,e){if(1&t&&(i.cd(As,1),i.cd(Cs,1,i.Z)),2&t){let t;i.Hc(t=i.oc())&&(e.roomCanvasReference=t.first),i.Hc(t=i.oc())&&(e.widgetContainer=t.first)}},decls:5,vars:0,consts:[[1,"nitro-room-component"],[1,"room-view"],["roomCanvas",""],["widgetContainer",""]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Zb(1,"div",1,2),i.Uc(3,Ms,0,0,"ng-template",null,3,i.Vc),i.cc())},encapsulation:2}),t})();var Ds=s("/PsI");class ws{constructor(){this._widgetHandler=null,this._messageListener=null,this._events=null,this._disposed=!1}initialize(t=0){}dispose(){this.disposed||(this._messageListener=null,this._events&&!this._events.disposed&&this.unregisterUpdateEvents(this._events),this._widgetHandler&&(this._widgetHandler.dispose(),this._widgetHandler=null),this._events=null,this._disposed=!0)}registerUpdateEvents(t){this._events=t}unregisterUpdateEvents(t){this._events=null}get disposed(){return this._disposed}get widgetHandler(){return this._widgetHandler}set widgetHandler(t){this._widgetHandler=t,this._widgetHandler.widget||(this._widgetHandler.widget=this)}get messageListener(){return this._messageListener}set messageListener(t){this._messageListener=t}}var Ns=s("vqvB");class Ls{constructor(t){this._data=[],this._maxSize=t,this._index=0}reset(){this._data=[],this._index=0}_Str_22775(t){this._data.length<this._maxSize?this._data.push(t):this._data[this._index]=t,this._index=(this._index+1)%this._maxSize}_Str_25797(){let t=Number.MIN_VALUE,e=0;for(;e<this._maxSize;)this._data[e]>t&&(t=this._data[e]),e++;return t}_Str_26219(){let t=Number.MAX_VALUE,e=0;for(;e<this._maxSize;)this._data[e]<t&&(t=this._data[e]),e++;return t}}let xs=(()=>{class t{constructor(){this.parent=null,this.componentRef=null,this.activeView=null,this.stack=new Ls(t.LOCATION_STACK_SIZE),this.opacity=0,this.currentDeltaY=-1e6,this.willFade=!1,this.firstFadeStarted=!1,this.fadeAfterDelay=!0,this.fadeLength=500,this.fadeTime=0,this.fadeStartDelay=3e3,this.fadingOut=!1,this.fadeStartTimer=null}completeSetup(){this.firstFadeStarted=!1,this.fadeLength=75,this.fadingOut=!1,this.opacity=1,this.onTimerComplete=this.onTimerComplete.bind(this),this.fadeAfterDelay&&this.willFade&&(this.fadeStartTimer&&(clearTimeout(this.fadeStartTimer),this.fadeStartTimer=null),this.fadeStartTimer=setTimeout(this.onTimerComplete,this.fadeStartDelay))}ngOnDestroy(){this.fadeStartTimer&&(clearTimeout(this.fadeStartTimer),this.fadeStartTimer=null)}update(e,s,i){if(!e)return;if(this.fadingOut?(this.fadeTime=this.fadeTime+i,this.opacity=(1-this.fadeTime/this.fadeLength)*this.maximumOpacity):this.opacity=this.maximumOpacity,this.opacity<=0)return void this.parent.removeView(this.componentRef,!1);const n=this.getOffset(e);this.stack._Str_22775(s.y-e.top);let r=this.stack._Str_25797();r<this.currentDeltaY-t.BUBBLE_DROP_SPEED&&(r=this.currentDeltaY-t.BUBBLE_DROP_SPEED);const a=s.y-r;this.currentDeltaY=r;let o=Math.round(s.x-this.activeViewElement.offsetWidth/2),c=Math.round(a+n);c<=0&&(c=t.SPACE_AROUND_EDGES),c>=u.a.instance.height-this.activeViewElement.offsetHeight&&(c=u.a.instance.height-this.activeViewElement.offsetHeight-t.SPACE_AROUND_EDGES),o>=u.a.instance.width-this.activeViewElement.offsetWidth&&(o=u.a.instance.width-this.activeViewElement.offsetWidth-t.SPACE_AROUND_EDGES),o<0&&(o=0+t.BUBBLE_DROP_SPEED),this.activeViewElement.style.left=o+"px",this.activeViewElement.style.top=c+"px",this.activeViewElement.style.opacity=this.opacity.toString()}hide(t){this.activeView&&(!this.firstFadeStarted&&t?(this.firstFadeStarted=!0,this.fadeStartTimer&&(clearTimeout(this.fadeStartTimer),this.fadeStartTimer=null),this.fadeStartTimer=setTimeout(this.onTimerComplete,this.fadeStartDelay)):this.parent.removeView(this.componentRef,!1))}onTimerComplete(){this.fadingOut=!0,this.hide(!0)}getOffset(t){let e=-this.activeViewElement.offsetHeight;return e-=4,e}get maximumOpacity(){return 1}get activeViewElement(){return this.activeView&&this.activeView.nativeElement||null}}return t.LOCATION_STACK_SIZE=25,t.BUBBLE_DROP_SPEED=3,t.SPACE_AROUND_EDGES=5,t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.Tb({type:t}),t})();class Ps extends xs{constructor(){super(...arguments),this.userId=-1,this.userName="",this.userType=-1,this.roomIndex=-1}static extendedSetup(t,e,s,i,n){t.userId=e,t.userName=s,t.userType=i,t.roomIndex=n,t.completeSetup()}getOffset(t){let e=-this.activeViewElement.offsetHeight;return this.userType===$.a.USER||this.userType===$.a.BOT||this.userType===$.a.RENTABLE_BOT?e+=t.height>50?25:0:e-=4,e}}let Fs=(()=>{class t{transform(t,e=null,s=null){return e&&Array.isArray(e)&&s&&Array.isArray(s)&&e.length===s.length?u.a.instance.getLocalizationWithParameters(t,e,s):e&&s?u.a.instance.getLocalizationWithParameter(t,e,s):u.a.instance.getLocalization(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=i.Xb({name:"translate",type:t,pure:!0}),t})();const ks=["activeView"];function Ws(t,e){if(1&t){const t=i.ec();i.dc(0,"li",13),i.nc("click",function(){i.Lc(t);const e=i.qc(2).$implicit;return i.qc(3).processAction(e.name)}),i.Wc(1),i.rc(2,"translate"),i.cc()}if(2&t){const t=i.qc(2).$implicit,e=i.qc(3);i.Kb(1),i.Yc(" ",i.uc(2,1,t.localization,"count",e.avatarData._Str_3577)," ")}}function Vs(t,e){if(1&t){const t=i.ec();i.dc(0,"li",13),i.nc("click",function(){i.Lc(t);const e=i.qc(2).$implicit;return i.qc(3).processAction(e.name)}),i.Wc(1),i.rc(2,"translate"),i.cc()}if(2&t){const t=i.qc(2).$implicit;i.Kb(1),i.Yc(" ",i.sc(2,1,t.localization)," ")}}function Gs(t,e){if(1&t&&(i.bc(0,10),i.Uc(1,Ws,3,5,"li",11),i.Uc(2,Vs,3,3,"li",12),i.ac()),2&t){const t=i.qc().$implicit;i.yc("ngSwitch",t.name),i.Kb(1),i.yc("ngSwitchCase","respect")}}function Hs(t,e){if(1&t&&(i.bc(0),i.Uc(1,Gs,3,2,"ng-container",9),i.ac()),2&t){const t=e.$implicit;i.Kb(1),i.yc("ngIf",t.visible)}}function Bs(t,e){if(1&t&&(i.dc(0,"ul",8),i.Uc(1,Hs,2,1,"ng-container",5),i.cc()),2&t){const t=i.qc().$implicit;i.Kb(1),i.yc("ngForOf",t.items)}}function js(t,e){if(1&t&&(i.bc(0),i.Uc(1,Bs,2,1,"ul",7),i.ac()),2&t){const t=e.$implicit,s=i.qc();i.Kb(1),i.yc("ngIf",s.mode===t.mode)}}let Ks=(()=>{class t extends Ps{constructor(t){super(),this._applicationRef=t,this.avatarData=null,this.mode=0,this.menu=[]}static setup(t,e,s,i,n,r){t.avatarData=r,Ps.extendedSetup(t,e,s,i,n),t.setupButtons()}setupButtons(){let e=!1;const s=this.widget.handler,i=s.container.roomEngine.getRoomObject(s.roomSession.roomId,s.container.roomSession.ownRoomIndex,W.a.UNIT);if(i){const t=i.model.getValue(G.a.FIGURE_CARRY_OBJECT);t>0&&t<999999&&(e=!0)}this.menu=[{mode:t.MODE_NORMAL,items:[{name:"friend",localization:"infostand.button.friend",visible:this.avatarData.canBeAskedForAFriend},{name:"trade",localization:"infostand.button.trade",visible:!0},{name:"whisper",localization:"infostand.button.whisper",visible:!0},{name:"respect",localization:"infostand.button.respect",visible:this.avatarData._Str_3577>0},{name:"ignore",localization:"infostand.button.ignore",visible:!this.avatarData._Str_3655},{name:"unignore",localization:"infostand.button.unignore",visible:this.avatarData._Str_3655},{name:"report",localization:"infostand.button.report",visible:!0},{name:"moderate",localization:"infostand.link.moderate",visible:this.moderateMenuHasContent()},{name:"ambassador",localization:"infostand.link.ambassador",visible:this.ambassadorMenuHasContent()},{name:"pass_handitem",localization:"avatar.widget.pass_hand_item",visible:e}]},{mode:t.MODE_MODERATE,items:[{name:"kick",localization:"infostand.button.kick",visible:!0},{name:"mute",localization:"infostand.button.mute",visible:!0},{name:"ban",localization:"infostand.button.ban",visible:!0},{name:"give_rights",localization:"infostand.button.giverights",visible:this.isShowGiveRights()},{name:"remove_rights",localization:"infostand.button.removerights",visible:this.isShowRemoveRights()},{name:"back",localization:"generic.back",visible:!0}]},{mode:t.MODE_MODERATE_BAN,items:[{name:"ban_hour",localization:"infostand.button.ban_hour",visible:!0},{name:"ban_day",localization:"infostand.button.ban_day",visible:!0},{name:"ban_perm",localization:"infostand.button.ban_perm",visible:!0},{name:"back_moderate",localization:"generic.back",visible:!0}]},{mode:t.MODE_MODERATE_MUTE,items:[{name:"mute_2min",localization:"infostand.button.mute_2min",visible:!0},{name:"mute_5min",localization:"infostand.button.mute_5min",visible:!0},{name:"mute_10min",localization:"infostand.button.mute_10min",visible:!0},{name:"back_moderate",localization:"generic.back",visible:!0}]},{mode:t.MODE_AMBASSADOR,items:[{name:"ambassador_alert",localization:"infostand.button.alert",visible:!0},{name:"ambassador_kick",localization:"infostand.button.kick",visible:!0},{name:"ambassador_mute",localization:"infostand.button.mute",visible:!0},{name:"back",localization:"generic.back",visible:!0}]},{mode:t.MODE_AMBASSADOR_MUTE,items:[{name:"ambassador_mute_2min",localization:"infostand.button.mute_2min",visible:!0},{name:"ambassador_mute_10min",localization:"infostand.button.mute_10min",visible:!0},{name:"ambassador_mute_60min",localization:"infostand.button.mute_60min",visible:!0},{name:"ambassador_mute_18hr",localization:"infostand.button.mute_18hr",visible:!0},{name:"back_ambassador",localization:"generic.back",visible:!0}]}]}processAction(e){let s=null,i=null,n=!0;if(e){switch(e){case"moderate":n=!1,this.setMode(t.MODE_MODERATE);break;case"ban":n=!1,this.setMode(t.MODE_MODERATE_BAN);break;case"mute":n=!1,this.setMode(t.MODE_MODERATE_MUTE);break;case"ambassador":n=!1,this.setMode(t.MODE_AMBASSADOR);break;case"ambassador_mute":n=!1,this.setMode(t.MODE_AMBASSADOR_MUTE);break;case"back_moderate":n=!1,this.setMode(t.MODE_MODERATE);break;case"back_ambassador":n=!1,this.setMode(t.MODE_AMBASSADOR);break;case"back":n=!1,this.setMode(t.MODE_NORMAL);break;case"whisper":s=_t.RWUAM_WHISPER_USER;break;case"friend":this.avatarData.canBeAskedForAFriend=!1,s=_t.RWUAM_SEND_FRIEND_REQUEST;break;case"respect":this.avatarData._Str_3577--,s=_t.RWUAM_RESPECT_USER,this.avatarData._Str_3577>0&&(n=!1);break;case"ignore":this.avatarData._Str_3655=!0,s=_t.RWUAM_IGNORE_USER;break;case"unignore":this.avatarData._Str_3655=!1,s=_t.RWUAM_UNIGNORE_USER;break;case"kick":s=_t.RWUAM_KICK_USER;break;case"ban_hour":s=_t.RWUAM_BAN_USER_HOUR;break;case"ban_day":s=_t.RWUAM_BAN_USER_DAY;break;case"perm_ban":s=_t.RWUAM_BAN_USER_PERM;break;case"mute_2min":s=_t.MUTE_USER_2MIN;break;case"mute_5min":s=_t.MUTE_USER_5MIN;break;case"mute_10min":s=_t.MUTE_USER_10MIN;break;case"give_rights":this.avatarData.roomControllerLevel=B.a.GUEST,s=_t.RWUAM_GIVE_RIGHTS;break;case"remove_rights":this.avatarData.roomControllerLevel=B.a.NONE,s=_t.RWUAM_TAKE_RIGHTS;break;case"trade":s=_t.RWUAM_START_TRADING;break;case"report":s=_t.RWUAM_REPORT_CFH_OTHER;break;case"pass_handitem":s=_t.RWUAM_PASS_CARRY_ITEM;break;case"ambassador_alert":s=_t.RWUAM_AMBASSADOR_ALERT_USER;break;case"ambassador_kick":s=_t.RWUAM_AMBASSADOR_KICK_USER;break;case"ambassador_mute_2min":s=_t.AMBASSADOR_MUTE_USER_2MIN;break;case"ambassador_mute_10min":s=_t.AMBASSADOR_MUTE_USER_10MIN;break;case"ambassador_mute_60min":s=_t.AMBASSADOR_MUTE_USER_60MIN;break;case"ambassador_mute_18hour":s=_t.AMBASSADOR_MUTE_USER_18HOUR}s&&(i=new _t(s,this.userId)),i&&this.parent.messageListener.processWidgetMessage(i)}n&&this.parent.removeView(this.componentRef,!1)}setMode(t){t!==this.mode&&(this.mode=t)}ambassadorMenuHasContent(){return this.avatarData._Str_4050}moderateMenuHasContent(){return this.avatarData._Str_5990||this.avatarData._Str_6701||this.avatarData._Str_6394||this.isShowGiveRights()||this.isShowRemoveRights()}isShowGiveRights(){return this.avatarData._Str_3246&&this.avatarData._Str_5599<B.a.GUEST&&!this.avatarData._Str_3672}isShowRemoveRights(){return this.avatarData._Str_3246&&this.avatarData._Str_5599===B.a.GUEST&&!this.avatarData._Str_3672}get widget(){return this.parent}}return t.MODE_NORMAL=0,t.MODE_MODERATE=1,t.MODE_MODERATE_BAN=2,t.MODE_MODERATE_MUTE=3,t.MODE_AMBASSADOR=4,t.MODE_AMBASSADOR_MUTE=5,t.\u0275fac=function(e){return new(e||t)(i.Yb(i.g))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-avatarinfo-avatar-component"]],viewQuery:function(t,e){if(1&t&&i.cd(ks,1),2&t){let t;i.Hc(t=i.oc())&&(e.activeView=t.first)}},features:[i.Hb],decls:8,vars:2,consts:[[1,"nitro-room-avatarinfo-avatar-component","context-menu"],["activeView",""],[1,"card","align-items-center",2,"background-color","#494949","filter","none !important"],[1,"d-flex","card-header","align-items-center","w-100",2,"font-size","15px","font-weight","bold"],[1,"card-body"],[4,"ngFor","ngForOf"],[1,"card-pointer"],["class","list-group list-group-flush",4,"ngIf"],[1,"list-group","list-group-flush"],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],["class","list-group-item","style","font-size: 13px;",3,"click",4,"ngSwitchCase"],["class","list-group-item","style","font-size: 13px;",3,"click",4,"ngSwitchDefault"],[1,"list-group-item",2,"font-size","13px",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"div",0,1),i.dc(2,"div",2),i.dc(3,"div",3),i.Wc(4),i.cc(),i.dc(5,"div",4),i.Uc(6,js,2,1,"ng-container",5),i.cc(),i.Zb(7,"div",6),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Yc(" ",e.userName," "),i.Kb(2),i.yc("ngForOf",e.menu))},directives:[p.m,p.n,p.p,p.q,p.r],pipes:[Fs],encapsulation:2}),t})();class zs{constructor(){this._isIgnored=!1,this._canTrade=!1,this._canTradeReason=0,this._canBeKicked=!1,this._canBeBanned=!1,this._canBeMuted=!1,this._canBeAskedAsFriend=!1,this._amIOwner=!1,this._amIAnyRoomController=!1,this._respectLeft=0,this._isOwnUser=!1,this._allowNameChange=!1,this._isGuildRoom=!1,this._carryItemType=0,this._myRoomControllerLevel=0,this._targetRoomControllerLevel=0,this._isFriend=!1,this._isAmbassador=!1}get _Str_3655(){return this._isIgnored}set _Str_3655(t){this._isIgnored=t}get _Str_5751(){return this._canTrade}set _Str_5751(t){this._canTrade=t}get _Str_6622(){return this._canTradeReason}set _Str_6622(t){this._canTradeReason=t}get _Str_5990(){return this._canBeKicked}set _Str_5990(t){this._canBeKicked=t}get _Str_6701(){return this._canBeBanned}set _Str_6701(t){this._canBeBanned=t}get _Str_6394(){return this._canBeMuted}set _Str_6394(t){this._canBeMuted=t}get canBeAskedForAFriend(){return this._canBeAskedAsFriend}set canBeAskedForAFriend(t){this._canBeAskedAsFriend=t}get _Str_3246(){return this._amIOwner}set _Str_3246(t){this._amIOwner=t}get _Str_3529(){return this._amIAnyRoomController}set _Str_3529(t){this._amIAnyRoomController=t}get _Str_3577(){return this._respectLeft}set _Str_3577(t){this._respectLeft=t}get _Str_11453(){return this._isOwnUser}set _Str_11453(t){this._isOwnUser=t}get allowNameChange(){return this._allowNameChange}set allowNameChange(t){this._allowNameChange=t}get _Str_3672(){return this._isGuildRoom}set _Str_3672(t){this._isGuildRoom=t}get _Str_8826(){return this._carryItemType}set _Str_8826(t){this._carryItemType=t}get roomControllerLevel(){return this._myRoomControllerLevel}set roomControllerLevel(t){this._myRoomControllerLevel=t}get _Str_5599(){return this._targetRoomControllerLevel}set _Str_5599(t){this._targetRoomControllerLevel=t}get isFriend(){return this._isFriend}get _Str_4050(){return this._isAmbassador}populate(t){this._amIAnyRoomController=t.isModerator,this._myRoomControllerLevel=t.roomControllerLevel,this._amIOwner=t.isRoomOwner,this._canBeAskedAsFriend=t.canBeAskedForAFriend,this._canBeKicked=t._Str_5990,this._canBeBanned=t._Str_6701,this._canBeMuted=t._Str_6394,this._canTrade=t.canTrade,this._canTradeReason=t._Str_6622,this._isIgnored=t.isIgnored,this._respectLeft=t.respectLeft,this._isOwnUser=t.type===Oe.OWN_USER,this._allowNameChange=t._Str_4330,this._isGuildRoom=t.isGuildRoom,this._targetRoomControllerLevel=t.flatControl,this._carryItemType=t.carryId,this._isFriend=t.isFriend,this._isAmbassador=t.isAmbassador}}const Ys=["activeView"];let Xs=(()=>{class t extends Ps{static setup(t,e,s,i,n,r=!1){t.willFade=r,Ps.extendedSetup(t,e,s,i,n)}}return t.\u0275fac=function(e){return Zs(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-avatarinfo-name-component"]],viewQuery:function(t,e){if(1&t&&i.cd(Ys,1),2&t){let t;i.Hc(t=i.oc())&&(e.activeView=t.first)}},features:[i.Hb],decls:6,vars:1,consts:[[1,"nitro-room-avatarinfo-name-component","context-menu"],["activeView",""],[1,"card","align-items-center",2,"background-color","#494949","filter","none !important"],[1,"d-flex","card-header","border-0","align-items-center","w-100",2,"font-size","15px","font-weight","bold"],[1,"card-pointer"]],template:function(t,e){1&t&&(i.dc(0,"div",0,1),i.dc(2,"div",2),i.dc(3,"div",3),i.Wc(4),i.cc(),i.Zb(5,"div",4),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Yc(" ",e.userName," "))},encapsulation:2}),t})();const Zs=i.fc(Xs);let qs=(()=>{class t{constructor(t){this._sanitizer=t}transform(t){return this._sanitizer.bypassSecurityTrustHtml(t)}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(n.b))},t.\u0275pipe=i.Xb({name:"keepHtml",type:t,pure:!1}),t})();const Qs=["activeView"];function Js(t,e){if(1&t){const t=i.ec();i.dc(0,"li",10),i.nc("click",function(){i.Lc(t);const e=i.qc().$implicit;return i.qc(3).processAction(e.name)}),i.rc(1,"keepHtml"),i.rc(2,"translate"),i.cc()}if(2&t){const t=i.qc().$implicit;i.yc("innerHTML","11"===t.name||"12"===t.name||"13"===t.name||"14"===t.name||"15"===t.name?i.sc(1,1,t.localization):i.sc(2,3,t.localization),i.Mc)}}function $s(t,e){if(1&t&&(i.bc(0),i.Uc(1,Js,3,5,"li",9),i.ac()),2&t){const t=e.$implicit;i.Kb(1),i.yc("ngIf",t.visible)}}const ti=function(t){return{"columns-3":t}};function ei(t,e){if(1&t&&(i.dc(0,"ul",8),i.Uc(1,$s,2,1,"ng-container",5),i.cc()),2&t){const t=i.qc().$implicit;i.yc("ngClass",i.Cc(2,ti,4===t.mode)),i.Kb(1),i.yc("ngForOf",t.items)}}function si(t,e){if(1&t&&(i.bc(0),i.Uc(1,ei,2,4,"ul",7),i.ac()),2&t){const t=e.$implicit,s=i.qc();i.Kb(1),i.yc("ngIf",s.mode===t.mode)}}let ii=(()=>{class t extends Ps{constructor(){super(...arguments),this.avatarData=null,this.mode=0,this.menu=[]}static setup(e,s,i,n,r,a){e.avatarData=a,e.widget.isDancing&&e.widget.hasClub&&(e.mode=t.MODE_CLUB_DANCES),Ps.extendedSetup(e,s,i,n,r),e.setupButtons()}setupButtons(){const e=this.widget._Str_25831;this.menu=[{mode:t.MODE_NORMAL,items:[{name:"decorate",localization:"widget.avatar.decorate",visible:this.widget.hasClub&&this.avatarData.roomControllerLevel>=B.a.GUEST||this.avatarData._Str_3246},{name:"change_looks",localization:"widget.memenu.myclothes",visible:!0},{name:"dance_menu",localization:"widget.memenu.dance",visible:this.widget.hasClub&&!e},{name:"dance",localization:"widget.memenu.dance",visible:!this.widget.isDancing&&!this.widget.hasClub&&!e},{name:"dance_stop",localization:"widget.memenu.dance.stop",visible:this.widget.isDancing&&!this.widget.hasClub&&!e},{name:"expressions",localization:"infostand.link.expressions",visible:!0},{name:"signs",localization:"infostand.show.signs",visible:!0},{name:"drop_hand_item",localization:"avatar.widget.drop_hand_item",visible:this.avatarData._Str_8826>0&&this.avatarData._Str_8826<999999}]},{mode:t.MODE_CLUB_DANCES,items:[{name:"dance_stop",localization:"widget.memenu.dance.stop",visible:this.widget.isDancing},{name:"dance_1",localization:"widget.memenu.dance1",visible:!0},{name:"dance_2",localization:"widget.memenu.dance2",visible:!0},{name:"dance_3",localization:"widget.memenu.dance3",visible:!0},{name:"dance_4",localization:"widget.memenu.dance4",visible:!0},{name:"back",localization:"generic.back",visible:!0}]},{mode:t.MODE_EXPRESSIONS,items:[{name:"sit",localization:"widget.memenu.sit",visible:this.widget.getOwnPosture===Ds.a.POSTURE_STAND},{name:"stand",localization:"widget.memenu.stand",visible:this.widget.getCanStandUp},{name:"wave",localization:"widget.memenu.wave",visible:!this.widget._Str_12708},{name:"laugh",localization:"widget.memenu.laugh",visible:!this.widget._Str_12708&&this.widget.hasVip},{name:"blow",localization:"widget.memenu.blow",visible:!this.widget._Str_12708&&this.widget.hasVip},{name:"idle",localization:"widget.memenu.idle",visible:!0},{name:"back",localization:"generic.back",visible:!0}]},{mode:t.MODE_SIGNS,items:[{name:"sign_1",localization:"1",visible:!0},{name:"sign_4",localization:"4",visible:!0},{name:"sign_7",localization:"7",visible:!0},{name:"sign_10",localization:"10",visible:!0},{name:"sign_0",localization:"0",visible:!0},{name:"sign_14",localization:'<i class="fas fa-futbol"></i>',visible:!0},{name:"sign_2",localization:"2",visible:!0},{name:"sign_5",localization:"5",visible:!0},{name:"sign_8",localization:"8",visible:!0},{name:"sign_11",localization:'<i class="fas fa-heart"></i>',visible:!0},{name:"sign_13",localization:'<i class="fas fa-exclamation"></i>',visible:!0},{name:"sign_17",localization:"17",visible:!0},{name:"sign_3",localization:"3",visible:!0},{name:"sign_6",localization:"6",visible:!0},{name:"sign_9",localization:"9",visible:!0},{name:"sign_12",localization:'<i class="fas fa-skull"></i>',visible:!0},{name:"sign_15",localization:'<i class="far fa-grin"></i>',visible:!0},{name:"sign_16",localization:"16",visible:!0}]}]}processAction(e){let s=null,i=!0;if(e){if(e.startsWith("sign_")){const t=parseInt(e.split("_")[1]);this.widget.useSign(t)}else switch(e){case"decorate":break;case"change_looks":this.widget.openAvatarEditor();break;case"expressions":i=!1,this.setMode(t.MODE_EXPRESSIONS);break;case"sit":s=new at(at._Str_2016);break;case"stand":s=new at(at._Str_1553);break;case"wave":s=new rt(dt._Str_6268);break;case"blow":s=new rt(dt._Str_5579);break;case"laugh":s=new rt(dt._Str_7336);break;case"idle":s=new rt(dt._Str_6989);break;case"dance_menu":i=!1,this.setMode(t.MODE_CLUB_DANCES);break;case"dance":s=new ot(1);break;case"dance_stop":s=new ot(0);break;case"dance_1":case"dance_2":case"dance_3":case"dance_4":s=new ot(parseInt(e.charAt(e.length-1)));break;case"signs":i=!1,this.setMode(t.MODE_SIGNS);break;case"back":case"more":i=!1,this.setMode(t.MODE_NORMAL);break;case"drop_hand_item":s=new _t(_t.RWUAM_DROP_CARRY_ITEM,this.userId)}s&&this.parent.messageListener.processWidgetMessage(s)}i&&this.parent.removeView(this.componentRef,!1)}setMode(t){t!==this.mode&&(this.mode=t)}get widget(){return this.parent}}return t.MODE_NORMAL=0,t.MODE_CLUB_DANCES=1,t.MODE_NAME_CHANGE=2,t.MODE_EXPRESSIONS=3,t.MODE_SIGNS=4,t.MODE_CHANGE_LOOKS=5,t.\u0275fac=function(e){return ni(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-avatarinfo-ownavatar-component"]],viewQuery:function(t,e){if(1&t&&i.cd(Qs,1),2&t){let t;i.Hc(t=i.oc())&&(e.activeView=t.first)}},features:[i.Hb],decls:8,vars:2,consts:[[1,"nitro-room-avatarinfo-ownavatar-component","context-menu"],["activeView",""],[1,"card","align-items-center",2,"background-color","#494949","filter","none !important"],[1,"d-flex","card-header","align-items-center","w-100",2,"font-weight","bold","font-size","15px"],[1,"card-body"],[4,"ngFor","ngForOf"],[1,"card-pointer"],["class","list-group list-group-flush",3,"ngClass",4,"ngIf"],[1,"list-group","list-group-flush",3,"ngClass"],["style","font-size: 13px;","class","list-group-item",3,"innerHTML","click",4,"ngIf"],[1,"list-group-item",2,"font-size","13px",3,"innerHTML","click"]],template:function(t,e){1&t&&(i.dc(0,"div",0,1),i.dc(2,"div",2),i.dc(3,"div",3),i.Wc(4),i.cc(),i.dc(5,"div",4),i.Uc(6,si,2,1,"ng-container",5),i.cc(),i.Zb(7,"div",6),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Yc(" ",e.userName," "),i.Kb(2),i.yc("ngForOf",e.menu))},directives:[p.m,p.n,p.l],pipes:[qs,Fs],encapsulation:2}),t})();const ni=i.fc(ii);class ri{constructor(){this.age=0,this.rarityLevel=0,this._Str_5114=!1,this.energy=0,this.maximumEnergy=0,this.experience=0,this.levelExperienceGoal=0,this.id=0,this._Str_5175=!1,this.level=0,this.maximumLevel=0,this.name="",this.happyness=0,this.maximumHappyness=0,this.ownerId=0,this.ownerName="",this._Str_14767=0,this.respect=0,this._Str_2985=0,this._Str_4355=0,this.saddle=!1,this.rider=!1,this.breedable=!1,this.fullyGrown=!1,this.dead=!1,this.publiclyRideable=0,this.maximumTimeToLive=0,this.remainingTimeToLive=0,this.remainingGrowTime=0,this.publiclyBreedable=!1,this._Str_3307=[]}populate(t){this.age=t.age,this.rarityLevel=t.rarityLevel,this._Str_5114=t._Str_5114,this.energy=t.energy,this.maximumEnergy=t.maximumEnergy,this.experience=t.experience,this.levelExperienceGoal=t.levelExperienceGoal,this.id=t.id,this._Str_5175=t._Str_5175,this.level=t.level,this.maximumLevel=t.maximumLevel,this.name=t.name,this.happyness=t.happyness,this.maximumHappyness=t.maximumHappyness,this.ownerId=t.ownerId,this.ownerName=t.ownerName,this._Str_14767=t._Str_14767,this.respect=t.respect,this._Str_2985=t._Str_2985,this._Str_4355=t._Str_4355,this.saddle=t.saddle,this.rider=t.rider,this.breedable=t.breedable,this.dead=t.dead,this.fullyGrown=t.fullyGrown,this._Str_3307=t._Str_3307,this.publiclyRideable=t.publiclyRideable,this.maximumTimeToLive=t.maximumTimeToLive,this.remainingTimeToLive=t.remainingTimeToLive,this.remainingGrowTime=t.remainingGrowTime,this.publiclyBreedable=t.publiclyBreedable}}let ai=(()=>{class t{constructor(t,e,s){this._notificationService=t,this._settingsService=e,this._ngZone=s,this._component=null,this._messages=[],this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}loadOwnAvatarInEditor(){if(!this._component)return;const t=u.a.instance.sessionDataManager;this._component.loadAvatarInEditor(t.figure,t.gender,t.clubLevel)}get component(){return this._component}set component(t){this._component=t}}return t.\u0275fac=function(e){return new(e||t)(i.kc(Ge),i.kc(m),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();const oi=["contextsContainer"];function ci(t,e){}let _i=(()=>{class t extends ws{constructor(t,e,s,i){super(),this._avatarEditorService=t,this._settingsService=e,this._componentFactoryResolver=s,this._ngZone=i,this.view=null,this.cachedNameView=null,this.cachedOwnAvatarMenuView=null,this.cachedAvatarMenuView=null,this.cachedNameBubbles=new Map,this.lastRollOverId=-1,this.userInfoData=new zs,this.petInfoData=new ri,this.isDancing=!1,this._isInitialized=!1,this._isRoomEnteredOwnAvatarHighlight=!1,this._isGameMode=!1,this._Str_2557=this._Str_2557.bind(this)}ngOnDestroy(){u.a.instance.ticker.remove(this.update,this)}registerUpdateEvents(t){t&&(t.addEventListener(st.RWAIE_AVATAR_INFO,this._Str_2557),t.addEventListener(Re.RWONE_TYPE,this._Str_2557),t.addEventListener(Oe.OWN_USER,this._Str_2557),t.addEventListener(Oe.PEER,this._Str_2557),t.addEventListener(it.RWUDUE_USER_DATA_UPDATED,this._Str_2557),t.addEventListener(q.USER_REMOVED,this._Str_2557),t.addEventListener(ve.FURNI,this._Str_2557),t.addEventListener(q.OBJECT_SELECTED,this._Str_2557),t.addEventListener(q.OBJECT_DESELECTED,this._Str_2557),t.addEventListener(q.OBJECT_ROLL_OVER,this._Str_2557),t.addEventListener(q.OBJECT_ROLL_OUT,this._Str_2557),t.addEventListener(Z.RWREUE_NORMAL_MODE,this._Str_2557),t.addEventListener(Z.RWREUE_GAME_MODE,this._Str_2557),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(st.RWAIE_AVATAR_INFO,this._Str_2557),t.removeEventListener(Re.RWONE_TYPE,this._Str_2557),t.removeEventListener(Oe.OWN_USER,this._Str_2557),t.removeEventListener(Oe.PEER,this._Str_2557),t.removeEventListener(it.RWUDUE_USER_DATA_UPDATED,this._Str_2557),t.removeEventListener(q.USER_REMOVED,this._Str_2557),t.removeEventListener(ve.FURNI,this._Str_2557),t.removeEventListener(q.OBJECT_SELECTED,this._Str_2557),t.removeEventListener(q.OBJECT_DESELECTED,this._Str_2557),t.removeEventListener(q.OBJECT_ROLL_OVER,this._Str_2557),t.removeEventListener(q.OBJECT_ROLL_OUT,this._Str_2557),t.removeEventListener(Z.RWREUE_NORMAL_MODE,this._Str_2557),t.removeEventListener(Z.RWREUE_GAME_MODE,this._Str_2557),super.unregisterUpdateEvents(t))}_Str_2557(t){const e=this.view&&this.view.instance||null;switch(t.type){case st.RWAIE_AVATAR_INFO:{const e=t;this._isRoomEnteredOwnAvatarHighlight=!this._isInitialized&&this.handler.container.roomSession&&e._Str_2707===this.handler.container.roomSession.ownRoomIndex,this._Str_12674(e.userId,e.userName,e._Str_2908,e._Str_2707,e._Str_4330,null),this._isInitialized=!0;break}case Re.RWONE_TYPE:{const e=t;e.category===W.a.UNIT&&this._Str_12674(e.userId,e.userName,e.userType,e.roomIndex,!1,null);break}case Oe.OWN_USER:case Oe.PEER:{const e=t;this.userInfoData.populate(e),this._Str_12674(e.webID,e.name,e.userType,e.roomIndex,!1,e.isSpectator?null:this.userInfoData);break}case it.RWUDUE_USER_DATA_UPDATED:this._isInitialized||this._Str_25716();break;case q.USER_REMOVED:{const s=t;e&&e.roomIndex===s.id&&this.removeView(this.view,!1);for(const t of this.cachedNameBubbles.values())if(t.instance.roomIndex==s.id){this.removeView(t,!1);break}break}case ve.FURNI:case q.OBJECT_DESELECTED:this.view&&this.removeView(this.view,!1);break;case q.OBJECT_ROLL_OVER:{if(this._isRoomEnteredOwnAvatarHighlight)return;const s=t;e&&(e instanceof Ks||e instanceof ii)||(this.lastRollOverId=s.id,this.messageListener.processWidgetMessage(new ct(ct.GET_OBJECT_NAME,s.id,s.category)));break}case q.OBJECT_ROLL_OUT:{if(this._isRoomEnteredOwnAvatarHighlight)return;const s=t;e&&(e instanceof Ks||e instanceof ii)||s.id===this.lastRollOverId&&(this.removeView(this.view,!1),this.lastRollOverId=-1);break}case Z.RWREUE_NORMAL_MODE:this._isGameMode=!1;break;case Z.RWREUE_GAME_MODE:this._isGameMode=!0}this.toggleUpdateReceiver()}_Str_12674(t,e,s,i,n,r){const a=!!r;let o=this.view&&this.view.instance;if(a&&o&&(o instanceof Ks||o instanceof ii||(this.removeView(this.view,!1),o=null)),o&&o.userId===t&&o.userName===e&&o.userType===s&&o.roomIndex===i)o&&(o instanceof Ks||o instanceof ii)&&o.userId===t&&this.removeView(this.view,!1);else if(this.view&&this.removeView(this.view,!1),!this._isGameMode)if(a)if(r._Str_11453){if(this.isDecorting)return;if(Ns.a.isRunning())return;this.cachedOwnAvatarMenuView||(this.cachedOwnAvatarMenuView=this.createView(ii)),this.view=this.cachedOwnAvatarMenuView,this._ngZone.run(()=>ii.setup(this.view.instance,t,e,s,i,r))}else{this.cachedAvatarMenuView||(this.cachedAvatarMenuView=this.createView(Ks)),this.view=this.cachedAvatarMenuView,this._ngZone.run(()=>Ks.setup(this.view.instance,t,e,s,i,r));for(const e of this.cachedNameBubbles.values())if(e.instance.userId===t){this.removeView(e,!1);break}}else this.handler.roomEngine.isDecorating||(this.cachedNameView||(this.cachedNameView=this.createView(Xs)),this.view=this.cachedNameView,this._ngZone.run(()=>{this.handler.container.sessionDataManager.userId===t?Xs.setup(this.view.instance,t,e,s,i):Xs.setup(this.view.instance,t,e,s,i,!0)}))}createView(t){if(!t)return null;let e=null,s=null;return this._ngZone.run(()=>{const i=this._componentFactoryResolver.resolveComponentFactory(t);e=this.contextsContainer.createComponent(i),s=e.instance}),s&&e?(s.parent=this,s.componentRef=e,e):null}close(){this.removeView(this.view,!1)}removeView(t,e){if(this._isRoomEnteredOwnAvatarHighlight=!1,!t)return;const s=this.contextsContainer.indexOf(t.hostView);-1!==s&&(this.cachedNameView=null,this.cachedOwnAvatarMenuView=null,this.cachedAvatarMenuView=null,t===this.view&&(this.view=null),t instanceof Xs&&(this.cachedNameBubbles.delete(t.instance.userName),this.toggleUpdateReceiver()),this._ngZone.run(()=>this.contextsContainer.remove(s)))}toggleUpdateReceiver(){this.view||this.cachedNameBubbles.size>0?u.a.instance.ticker.add(this.update,this):u.a.instance.ticker.remove(this.update,this)}update(t){if(this.view){const e=this.view.instance,s=this.messageListener.processWidgetMessage(new Ue(Ue.RWGOI_MESSAGE_GET_OBJECT_LOCATION,e.userId,e.userType));s&&e.update(s.rectangle,s._Str_9337,t)}for(const e of this.cachedNameBubbles.values()){if(!e)continue;const s=e.instance,i=this.messageListener.processWidgetMessage(new Ue(Ue.RWGOI_MESSAGE_GET_OBJECT_LOCATION,s.userId,s.userType));i&&s.update(i.rectangle,i._Str_9337,t)}}getOwnRoomObject(){const t=this.handler.container.sessionDataManager.userId,e=this.handler.roomEngine.activeRoomId,s=W.a.UNIT,i=this.handler.roomEngine.getTotalObjectsForManager(e,s);let n=0;for(;n<i;){const i=this.handler.roomEngine.getRoomObjectByIndex(e,n,s);if(i){const e=this.handler.roomSession.userDataManager.getUserDataByIndex(i.id);if(e&&e.webID===t)return i}n++}return null}_Str_25716(){this.messageListener.processWidgetMessage(new ct(ct.GET_OWN_CHARACTER_INFO,0,0))}openAvatarEditor(){this._avatarEditorService.loadOwnAvatarInEditor(),this._settingsService.showAvatarEditor()}useSign(t){this.widgetHandler.container.roomSession.sendSignMessage(t)}get getOwnPosture(){const t=this.getOwnRoomObject();if(t){const e=t.model;if(e)return e.getValue(G.a.FIGURE_POSTURE)}return Ds.a.POSTURE_STAND}get getCanStandUp(){const t=this.getOwnRoomObject();if(t){const e=t.model;if(e)return e.getValue(G.a.FIGURE_CAN_STAND_UP)}return!1}get _Str_12708(){const e=this.getOwnRoomObject();if(e){const s=e.model;if(s){const e=s.getValue(G.a.FIGURE_EFFECT);return e===t._Str_18968||e===t._Str_16970||e===t._Str_18857}}return!1}get _Str_25831(){const e=this.getOwnRoomObject();if(e){const s=e.model;if(s)return s.getValue(G.a.FIGURE_EFFECT)===t._Str_17951}return!1}get handler(){return this.widgetHandler}get isDecorting(){return this.handler.roomSession.isDecorating}get hasClub(){return this.handler.container.sessionDataManager.clubLevel>=ut._Str_2964}get hasVip(){return this.handler.container.sessionDataManager.clubLevel>=ut._Str_2575}}return t._Str_17951=77,t._Str_18968=29,t._Str_16970=30,t._Str_18857=185,t._Str_18641=5e3,t.\u0275fac=function(e){return new(e||t)(i.Yb(ai),i.Yb(m),i.Yb(i.m),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-avatarinfo-component"]],viewQuery:function(t,e){if(1&t&&i.cd(oi,1,i.Z),2&t){let t;i.Hc(t=i.oc())&&(e.contextsContainer=t.first)}},features:[i.Hb],decls:3,vars:0,consts:[[1,"nitro-room-avatarinfo-component"],["contextsContainer",""]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Uc(1,ci,0,0,"ng-template",null,1,i.Vc),i.cc())},encapsulation:2}),t})(),hi=(()=>{class t extends X{constructor(e){super(t.RWFCE_FLOOD_CONTROL),this._seconds=0,this._seconds=e}get seconds(){return this._seconds}}return t.RWFCE_FLOOD_CONTROL="RWFCE_FLOOD_CONTROL",t})(),li=(()=>{class t{constructor(t,e){this.elementRef=t,this.ngZone=e,this.target=null,this.bringToFront=this.bringToFront.bind(this)}ngAfterViewInit(){const t=this.elementRef.nativeElement;t&&(this.target=t,this.addTarget(),this.registerEvents(),this.bringToFront())}ngOnDestroy(){this.unregisterEvents(),this.removeTarget(),this.bringToFront()}addTarget(){this.target&&(t.TOP_TARGETS.indexOf(this.target)>=0||t.TOP_TARGETS.push(this.target))}removeTarget(){if(!this.target)return;const e=t.TOP_TARGETS.indexOf(this.target);-1!==e&&t.TOP_TARGETS.splice(e,1)}registerEvents(){this.ngZone.runOutsideAngular(()=>{this.target&&this.target.addEventListener("mousedown",this.bringToFront)})}unregisterEvents(){this.ngZone.runOutsideAngular(()=>{this.target&&this.target.removeEventListener("mousedown",this.bringToFront)})}bringToFront(e=null){this.moveTarget();let s=t.Z_INDEX_START;for(const i of t.TOP_TARGETS)i&&(s+=t.Z_INDEX_INCREASE,i.style.zIndex=s.toString())}moveTarget(){const e=t.TOP_TARGETS.indexOf(this.target);if(-1===e)return;const s=t.TOP_TARGETS.splice(e,1);t.TOP_TARGETS.push(...s)}isTopTarget(){if(!this.target)return!1;const e=t.TOP_TARGETS.indexOf(this.target);return!(-1===e||e<t.TOP_TARGETS.length-1)}}return t.TOP_TARGETS=[],t.Z_INDEX_START=400,t.Z_INDEX_INCREASE=1,t.\u0275fac=function(e){return new(e||t)(i.Yb(i.p),i.Yb(i.H))},t.\u0275dir=i.Tb({type:t,selectors:[["","bringToTop",""]],inputs:{bringToTop:"bringToTop"}}),t})();const ui=function(t){return[t]};function di(t,e){if(1&t){const t=i.ec();i.dc(0,"div",6),i.dc(1,"div",7),i.dc(2,"div",8),i.dc(3,"div",9),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc().selectStyle(s)}),i.Wc(4," \xa0 "),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=e.$implicit,s=i.qc();i.Kb(1),i.yc("ngClass",i.Cc(4,ui,s.lastSelectedId===t?"bg-primary":"bg-secondary")),i.Kb(2),i.Nb("chat-bubble bubble-",t," w-100")}}const gi=function(t){return{active:t}};let mi=(()=>{class t{constructor(t,e){this.changeDetector=t,this.ngZone=e,this.styleSelected=new i.r,this.showStyles=!1,this.lastSelectedId=0,this.styleIds=[]}ngOnInit(){const t=u.a.instance.getConfiguration("chat.styles");for(const e of t)e&&(e.minRank>0?u.a.instance.sessionDataManager.hasSecurity(e.minRank)&&this.styleIds.push(e.styleId):e.isSystemStyle&&u.a.instance.sessionDataManager.hasSecurity(B.a.MODERATOR)?this.styleIds.push(e.styleId):u.a.instance.getConfiguration("chat.styles.disabled").indexOf(e.styleId)>=0||(e.isHcOnly&&u.a.instance.sessionDataManager.clubLevel>=ut._Str_2964||e.isAmbassadorOnly&&u.a.instance.sessionDataManager.isAmbassador?this.styleIds.push(e.styleId):e.isHcOnly||e.isAmbassadorOnly||this.styleIds.push(e.styleId)))}ngOnDestroy(){this.hideSelector()}showSelector(){this.showStyles=!0}hideSelector(){this.showStyles=!1}toggleSelector(){this.showStyles?this.hideSelector():this.showSelector()}selectStyle(t){this.lastSelectedId=t,this.styleSelected.emit(t),this.hideSelector()}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.j),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-chatinput-styleselector-component"]],outputs:{styleSelected:"styleSelected"},decls:6,vars:4,consts:[[1,"nitro-room-chatinput-styleselector-component"],[1,"icon","chatstyles-icon",3,"click"],[1,"nitro-chatstyle-selector","card","p-3",3,"bringToTop","ngClass"],[1,"grid-container","w-100"],[1,"grid-items","grid-3"],["class","d-flex flex-column item-detail justify-content-center align-items-center",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center"],[1,"d-flex","detail-info","rounded","justify-content-center","align-items-center",2,"background-color","transparent !important",3,"ngClass"],[1,"bubble-container"],[3,"click"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"i",1),i.nc("click",function(){return e.toggleSelector()}),i.cc(),i.dc(2,"div",2),i.dc(3,"div",3),i.dc(4,"div",4),i.Uc(5,di,5,6,"div",5),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(2),i.yc("ngClass",i.Cc(2,gi,e.showStyles)),i.Kb(3),i.yc("ngForOf",e.styleIds))},directives:[li,p.l,p.m],encapsulation:2}),t})();const pi=["chatInputView"];let fi=(()=>{class t extends ws{constructor(t){super(),this.ngZone=t,this.selectedUsername="",this.floodBlocked=!1,this.lastContent="",this.isTyping=!1,this.typingStartedSent=!1,this.typingTimer=null,this.idleTimer=null,this.currentStyle=-1,this.needsStyleUpdate=!1,this._chatModeIdWhisper=null,this._chatModeIdShout=null,this._chatModeIdSpeak=null,this._maxChatLength=0,this.onKeyDownEvent=this.onKeyDownEvent.bind(this),this.onInputMouseDownEvent=this.onInputMouseDownEvent.bind(this),this.onInputChangeEvent=this.onInputChangeEvent.bind(this),this.onRoomWidgetRoomObjectUpdateEvent=this.onRoomWidgetRoomObjectUpdateEvent.bind(this),this.onRoomWidgetUpdateInfostandUserEvent=this.onRoomWidgetUpdateInfostandUserEvent.bind(this),this.onRoomWidgetChatInputContentUpdateEvent=this.onRoomWidgetChatInputContentUpdateEvent.bind(this),this.onRoomWidgetFloodControlEvent=this.onRoomWidgetFloodControlEvent.bind(this),this.onIdleTimerComplete=this.onIdleTimerComplete.bind(this),this.onTypingTimerComplete=this.onTypingTimerComplete.bind(this)}ngOnInit(){this._chatModeIdWhisper=u.a.instance.getLocalization("widgets.chatinput.mode.whisper"),this._chatModeIdShout=u.a.instance.getLocalization("widgets.chatinput.mode.shout"),this._chatModeIdSpeak=u.a.instance.getLocalization("widgets.chatinput.mode.speak"),this._maxChatLength=u.a.instance.getConfiguration("chat.input.maxlength",100)}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{document.body.addEventListener("keydown",this.onKeyDownEvent),this.inputView&&(this.inputView.addEventListener("mousedown",this.onInputMouseDownEvent),this.inputView.addEventListener("input",this.onInputChangeEvent))})}ngOnDestroy(){this.ngZone.runOutsideAngular(()=>{document.body.removeEventListener("keydown",this.onKeyDownEvent),this.inputView&&(this.inputView.removeEventListener("mousedown",this.onInputMouseDownEvent),this.inputView.removeEventListener("input",this.onInputChangeEvent))})}registerUpdateEvents(t){t&&(t.addEventListener(q.OBJECT_DESELECTED,this.onRoomWidgetRoomObjectUpdateEvent),t.addEventListener(Oe.PEER,this.onRoomWidgetUpdateInfostandUserEvent),t.addEventListener(be.RWWCIDE_CHAT_INPUT_CONTENT,this.onRoomWidgetChatInputContentUpdateEvent),t.addEventListener(hi.RWFCE_FLOOD_CONTROL,this.onRoomWidgetFloodControlEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(q.OBJECT_DESELECTED,this.onRoomWidgetRoomObjectUpdateEvent),t.removeEventListener(Oe.PEER,this.onRoomWidgetUpdateInfostandUserEvent),t.removeEventListener(be.RWWCIDE_CHAT_INPUT_CONTENT,this.onRoomWidgetChatInputContentUpdateEvent),t.removeEventListener(hi.RWFCE_FLOOD_CONTROL,this.onRoomWidgetFloodControlEvent))}onRoomWidgetRoomObjectUpdateEvent(t){this.selectedUsername=""}onRoomWidgetUpdateInfostandUserEvent(t){t&&(this.selectedUsername=t.name)}onRoomWidgetChatInputContentUpdateEvent(t){if(t)switch(t._Str_23621){case be.WHISPER:{const e=u.a.instance.getLocalization("widgets.chatinput.mode.whisper");return void(this.inputView.value=":"+e.toLowerCase()+" "+t.userName+" ")}case be.SHOUT:return}}onRoomWidgetFloodControlEvent(t){}sendChat(t,e,s="",i=0){!this.floodBlocked&&this.messageListener&&(this.chatInputView.nativeElement.parentElement.dataset.value=this.chatInputView.nativeElement.value="",this.messageListener.processWidgetMessage(new gt(gt.MESSAGE_CHAT,t,e,s,i)))}onChange(t){}onKeyDownEvent(t){if(!t)return;if(this.anotherInputHasFocus())return;document.activeElement!==(this.chatInputView&&this.chatInputView.nativeElement)&&this.setInputFocus();const e=t.shiftKey;switch(t.keyCode){case 32:return void this.checkSpecialKeywordForInput();case 13:return void this.sendChatFromInputField(e);case 8:if(this.inputView){const t=this.inputView.value.split(" ");t[0]===this._chatModeIdWhisper&&3===t.length&&""===t[2]&&(this.inputView.value="",this.lastContent="")}return;default:return}}onInputMouseDownEvent(t){this.setInputFocus()}onInputChangeEvent(t){const e=t.target;if(!e)return;const s=e.value;s.length?(this.lastContent=s,this.isTyping||(this.isTyping=!0,this.startTypingTimer()),this.startIdleTimer()):(this.isTyping=!1,this.startTypingTimer())}onStyleSelected(t){t!==this.currentStyle&&(this.currentStyle=t,this.needsStyleUpdate=!0)}sendChatFromInputField(t=!1){if(!this.inputView||""===this.inputView.value)return;let e=t?gt.CHAT_SHOUT:gt.CHAT_DEFAULT,s=this.inputView.value;const i=s.split(" ");let n="",r="";switch(i[0]){case this._chatModeIdWhisper:e=gt.CHAT_WHISPER,n=i[1],r=this._chatModeIdWhisper+" "+n+" ",i.shift(),i.shift();break;case this._chatModeIdShout:e=gt.CHAT_SHOUT,i.shift();break;case this._chatModeIdSpeak:e=gt.CHAT_DEFAULT,i.shift()}s=i.join(" "),this.typingTimer&&this.resetTypingTimer(),this.idleTimer&&this.resetIdleTimer(),s.length<=this._maxChatLength&&this.sendChat(s,e,n,this.currentStyle),this.isTyping=!1,this.typingStartedSent&&this.sendTypingMessage(),this.typingStartedSent=!1,this.inputView.value=r,this.lastContent=r}sendTypingMessage(){!this.floodBlocked&&this.messageListener&&this.messageListener.processWidgetMessage(new pt(this.isTyping))}anotherInputHasFocus(){const t=document.activeElement;return!(!t||this.chatInputView&&this.chatInputView.nativeElement&&this.chatInputView.nativeElement===t||!(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement))}setInputFocus(){const t=this.chatInputView&&this.chatInputView.nativeElement;t&&(t.focus(),t.setSelectionRange(2*t.value.length,2*t.value.length))}checkSpecialKeywordForInput(){const t=this.chatInputView&&this.chatInputView.nativeElement||null;t&&""!==t.value&&t.value===this._chatModeIdWhisper&&0!==this.selectedUsername.length&&(t.value=`${t.value} ${this.selectedUsername}`)}startIdleTimer(){this.resetIdleTimer(),this.idleTimer=setTimeout(this.onIdleTimerComplete,1e4)}resetIdleTimer(){this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null)}onIdleTimerComplete(){this.isTyping&&(this.typingStartedSent=!1),this.isTyping=!1,this.sendTypingMessage()}startTypingTimer(){this.resetTypingTimer(),this.typingTimer=setTimeout(this.onTypingTimerComplete,1e3)}resetTypingTimer(){this.typingTimer&&(clearTimeout(this.typingTimer),this.typingTimer=null)}onTypingTimerComplete(){this.isTyping&&(this.typingStartedSent=!0),this.sendTypingMessage()}get inputMaxLength(){return this._maxChatLength}get inputView(){return this.chatInputView&&this.chatInputView.nativeElement||null}get handler(){return this.widgetHandler}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-chatinput-component"]],viewQuery:function(t,e){if(1&t&&i.cd(pi,1),2&t){let t;i.Hc(t=i.oc())&&(e.chatInputView=t.first)}},features:[i.Hb],decls:7,vars:4,consts:[[1,"nitro-room-chatinput-component",2,"width","100%","display","flex","justify-content","center"],[1,"chatinput-container"],[1,"input-sizer"],["type","text",1,"chat-input",3,"placeholder","maxLength","input"],["chatInputView",""],[3,"styleSelected"]],template:function(t,e){if(1&t){const t=i.ec();i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"div",2),i.dc(3,"input",3,4),i.nc("input",function(){i.Lc(t);const e=i.Ic(4);return e.parentElement.dataset.value=e.value}),i.rc(5,"translate"),i.cc(),i.cc(),i.cc(),i.dc(6,"nitro-room-chatinput-styleselector-component",5),i.nc("styleSelected",function(t){return e.onStyleSelected(t)}),i.cc(),i.cc()}2&t&&(i.Kb(3),i.zc("placeholder",i.sc(5,2,"widgets.chatinput.default")),i.yc("maxLength",e.inputMaxLength))},directives:[mi],pipes:[Fs],encapsulation:2}),t})();var Ei=s("XNiG"),Si=s("xgIS"),Ii=s("eIep"),Ri=s("lJxs"),bi=s("1G5W");let vi=(()=>{class t{constructor(t,e,s){this._viewContainerRef=t,this._elementRef=e,this._ngZone=s,this.dragHandle=".drag-handler",this.center=!0,this.noMemory=!1,this._name=null,this._target=null,this._handle=null,this._delta={x:0,y:0},this._offset={x:0,y:0},this._destroy=new Ei.a}ngAfterViewInit(){this._name=this._viewContainerRef._hostTNode.classesWithoutHost;const e=this._elementRef.nativeElement;if(!e)return;this._handle=this.dragHandle?e.querySelector(this.dragHandle):e,this._target=this.dragTarget?e.querySelector(this.dragTarget):e,this._handle&&(this._handle.classList.add("header-draggable"),this._handle.parentElement.classList.add("header-draggable")),this.center&&(e.style.top=`calc(50vh - ${e.offsetHeight/2}px)`,e.style.left=`calc(50vw - ${e.offsetWidth/2}px)`);const s=t.POS_MEMORY.get(this._name);s&&(this._offset.x=s.offset.x,this._offset.y=s.offset.y,this._delta.x=s.delta.x,this._delta.y=s.delta.y,this.translate()),this.setupEvents()}ngOnDestroy(){this._handle&&(this._handle.classList.remove("header-draggable"),this._handle.parentElement.classList.remove("header-draggable")),this._destroy.next()}setupEvents(){this._ngZone.runOutsideAngular(()=>{const e=Object(Si.a)(this._handle,"mousedown"),s=Object(Si.a)(document,"mousemove"),i=Object(Si.a)(document,"mouseup");e.pipe(Object(Ii.a)(t=>{const e=t.clientX,n=t.clientY;return s.pipe(Object(Ri.a)(t=>{t.preventDefault(),this._delta={x:t.clientX-e,y:t.clientY-n}}),Object(bi.a)(i))}),Object(bi.a)(this._destroy)).subscribe(()=>{0===this._delta.x&&0===this._delta.y||this.translate()}),i.pipe(Object(bi.a)(this._destroy)),i.subscribe(()=>{this._offset.x+=this._delta.x,this._offset.y+=this._delta.y,this._delta={x:0,y:0},this.noMemory||t.POS_MEMORY.set(this._name,{offset:{x:this._offset.x,y:this._offset.y},delta:{x:this._delta.x,y:this._delta.y}})})})}translate(){this._target.style.transform=`translate(${this._offset.x+this._delta.x}px, ${this._offset.y+this._delta.y}px)`}}return t.POS_MEMORY=new Map,t.\u0275fac=function(e){return new(e||t)(i.Yb(i.Z),i.Yb(i.p),i.Yb(i.H))},t.\u0275dir=i.Tb({type:t,selectors:[["","draggable",""]],inputs:{dragHandle:"dragHandle",dragTarget:"dragTarget",center:"center",noMemory:"noMemory"}}),t})();var Ti=s("3Pt+"),Oi=s("Kdsb");let yi=(()=>{class t{transform(t,e){return t?e?t.filter(t=>t.name.toLocaleLowerCase().includes(e.toLocaleLowerCase())):t:[]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=i.Xb({name:"roomObjectItemSearch",type:t,pure:!0}),t})();function Ai(t,e){if(1&t&&(i.dc(0,"p",13),i.Wc(1),i.cc()),2&t){const t=i.qc().$implicit;i.Kb(1),i.Xc(t.id)}}function Ci(t,e){if(1&t){const t=i.ec();i.dc(0,"li",12),i.nc("click",function(){i.Lc(t);const s=e.$implicit,n=e.index;return i.qc(2).selectItem(s,n)}),i.dc(1,"p",13),i.Wc(2),i.cc(),i.Uc(3,Ai,2,1,"p",14),i.cc()}if(2&t){const t=e.$implicit,s=e.index,n=i.qc(2);i.yc("ngClass",n.selectedItemIndex==s?"selected":""),i.Kb(2),i.Xc(t.name),i.Kb(1),i.yc("ngIf","widget.chooser.furni.title"===n.title)}}function Mi(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"h6",3),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",4),i.nc("click",function(){return i.Lc(t),i.qc().hide()}),i.Zb(6,"i",5),i.cc(),i.cc(),i.dc(7,"div",6),i.dc(8,"input",7),i.nc("ngModelChange",function(e){return i.Lc(t),i.qc().searchValue=e}),i.rc(9,"translate"),i.cc(),i.cc(),i.dc(10,"div",8),i.dc(11,"perfect-scrollbar",9),i.dc(12,"ul",10),i.Uc(13,Ci,4,3,"li",11),i.rc(14,"roomObjectItemSearch"),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Xc(i.sc(4,4,t.title)),i.Kb(5),i.zc("placeholder",i.sc(9,6,"generic.search")),i.yc("ngModel",t.searchValue),i.Kb(5),i.yc("ngForOf",i.tc(14,8,t.items,t.searchValue))}}let Ui=(()=>{class t extends ws{constructor(t){super(),this._ngZone=t,this._visible=!1,this._items=[],this._title=null,this._timeout=null,this._selectedItemIndex=-1}ngOnDestroy(){this.clearTimeout()}hide(){this._visible=!1}selectItem(t,e){t&&this.items&&this.items.length&&(this._selectedItemIndex=e,this._ngZone.runOutsideAngular(()=>this.messageListener.processWidgetMessage(new ct(ct.SELECT_OBJECT,t.id,t.category))))}clearTimeout(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null)}get visible(){return this._visible}set visible(t){this._visible=t}get title(){return this._title}set title(t){this._title=t}get items(){return this._items}set items(t){this._items=t}get selectedItemIndex(){return this._selectedItemIndex}get searchValue(){return this._searchValue}set searchValue(t){this._selectedItemIndex=-1,this._searchValue=t}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-chooser-base-component"]],features:[i.Hb],decls:1,vars:1,consts:[["class","nitro-chooser-component card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-chooser-component","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","px-3","pt-3","input-group"],["type","text",1,"form-control","form-control-sm","chooser-search",3,"ngModel","placeholder","ngModelChange"],[1,"d-flex","p-3"],[2,"min-height","180px","max-height","180px","height","180px"],[1,"list-group"],["class","d-flex justify-content-between align-items-center bg-secondary rounded mb-1 px-2 py-1 chooser-item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","bg-secondary","rounded","mb-1","px-2","py-1","chooser-item",3,"ngClass","click"],[1,"mb-0"],["class","mb-0",4,"ngIf"]],template:function(t,e){1&t&&i.Uc(0,Mi,15,11,"div",0),2&t&&i.yc("ngIf",e.visible)},directives:[p.n,li,vi,Ti.b,Ti.j,Ti.l,Oi.b,p.m,p.l],pipes:[Fs,yi],encapsulation:2}),t})();function Di(t,e){if(1&t&&(i.dc(0,"p",13),i.Wc(1),i.cc()),2&t){const t=i.qc().$implicit;i.Kb(1),i.Xc(t.id)}}function wi(t,e){if(1&t){const t=i.ec();i.dc(0,"li",12),i.nc("click",function(){i.Lc(t);const s=e.$implicit,n=e.index;return i.qc(2).selectItem(s,n)}),i.dc(1,"p",13),i.Wc(2),i.cc(),i.Uc(3,Di,2,1,"p",14),i.cc()}if(2&t){const t=e.$implicit,s=e.index,n=i.qc(2);i.yc("ngClass",n.selectedItemIndex==s?"selected":""),i.Kb(2),i.Xc(t.name),i.Kb(1),i.yc("ngIf","widget.chooser.furni.title"===n.title)}}function Ni(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"h6",3),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",4),i.nc("click",function(){return i.Lc(t),i.qc().hide()}),i.Zb(6,"i",5),i.cc(),i.cc(),i.dc(7,"div",6),i.dc(8,"input",7),i.nc("ngModelChange",function(e){return i.Lc(t),i.qc().searchValue=e}),i.rc(9,"translate"),i.cc(),i.cc(),i.dc(10,"div",8),i.dc(11,"perfect-scrollbar",9),i.dc(12,"ul",10),i.Uc(13,wi,4,3,"li",11),i.rc(14,"roomObjectItemSearch"),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Xc(i.sc(4,4,t.title)),i.Kb(5),i.zc("placeholder",i.sc(9,6,"generic.search")),i.yc("ngModel",t.searchValue),i.Kb(5),i.yc("ngForOf",i.tc(14,8,t.items,t.searchValue))}}let Li=(()=>{class t extends Ui{constructor(t){super(t),this._ngZone=t,this._title="widget.chooser.furni.title",this.onRoomWidgetChooserContentEvent=this.onRoomWidgetChooserContentEvent.bind(this),this.onRoomWidgetRoomObjectUpdateEvent=this.onRoomWidgetRoomObjectUpdateEvent.bind(this)}registerUpdateEvents(t){t&&(t.addEventListener(Vt.RWCCE_FURNI_CHOOSER_CONTENT,this.onRoomWidgetChooserContentEvent),t.addEventListener(q.FURNI_ADDED,this.onRoomWidgetRoomObjectUpdateEvent),t.addEventListener(q.FURNI_REMOVED,this.onRoomWidgetRoomObjectUpdateEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(Vt.RWCCE_FURNI_CHOOSER_CONTENT,this.onRoomWidgetChooserContentEvent),t.removeEventListener(q.FURNI_ADDED,this.onRoomWidgetRoomObjectUpdateEvent),t.removeEventListener(q.FURNI_REMOVED,this.onRoomWidgetRoomObjectUpdateEvent),super.unregisterUpdateEvents(t))}onRoomWidgetChooserContentEvent(t){t&&this._ngZone.run(()=>{this._items=t.items,this.visible=!0})}onRoomWidgetRoomObjectUpdateEvent(t){t&&this.visible&&(this.clearTimeout(),this._timeout=setTimeout(()=>{this.messageListener.processWidgetMessage(new ft(ft.RWRWM_FURNI_CHOOSER))},100))}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-chooser-furni"]],features:[i.Hb],decls:1,vars:1,consts:[["class","nitro-chooser-component card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-chooser-component","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","px-3","pt-3","input-group"],["type","text",1,"form-control","form-control-sm","chooser-search",3,"ngModel","placeholder","ngModelChange"],[1,"d-flex","p-3"],[2,"min-height","180px","max-height","180px","height","180px"],[1,"list-group"],["class","d-flex justify-content-between align-items-center bg-secondary rounded mb-1 px-2 py-1 chooser-item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","bg-secondary","rounded","mb-1","px-2","py-1","chooser-item",3,"ngClass","click"],[1,"mb-0"],["class","mb-0",4,"ngIf"]],template:function(t,e){1&t&&i.Uc(0,Ni,15,11,"div",0),2&t&&i.yc("ngIf",e.visible)},directives:[p.n,li,vi,Ti.b,Ti.j,Ti.l,Oi.b,p.m,p.l],pipes:[Fs,yi],encapsulation:2}),t})();function xi(t,e){if(1&t&&(i.dc(0,"p",13),i.Wc(1),i.cc()),2&t){const t=i.qc().$implicit;i.Kb(1),i.Xc(t.id)}}function Pi(t,e){if(1&t){const t=i.ec();i.dc(0,"li",12),i.nc("click",function(){i.Lc(t);const s=e.$implicit,n=e.index;return i.qc(2).selectItem(s,n)}),i.dc(1,"p",13),i.Wc(2),i.cc(),i.Uc(3,xi,2,1,"p",14),i.cc()}if(2&t){const t=e.$implicit,s=e.index,n=i.qc(2);i.yc("ngClass",n.selectedItemIndex==s?"selected":""),i.Kb(2),i.Xc(t.name),i.Kb(1),i.yc("ngIf","widget.chooser.furni.title"===n.title)}}function Fi(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"h6",3),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",4),i.nc("click",function(){return i.Lc(t),i.qc().hide()}),i.Zb(6,"i",5),i.cc(),i.cc(),i.dc(7,"div",6),i.dc(8,"input",7),i.nc("ngModelChange",function(e){return i.Lc(t),i.qc().searchValue=e}),i.rc(9,"translate"),i.cc(),i.cc(),i.dc(10,"div",8),i.dc(11,"perfect-scrollbar",9),i.dc(12,"ul",10),i.Uc(13,Pi,4,3,"li",11),i.rc(14,"roomObjectItemSearch"),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Xc(i.sc(4,4,t.title)),i.Kb(5),i.zc("placeholder",i.sc(9,6,"generic.search")),i.yc("ngModel",t.searchValue),i.Kb(5),i.yc("ngForOf",i.tc(14,8,t.items,t.searchValue))}}let ki=(()=>{class t extends Ui{constructor(t){super(t),this._ngZone=t,this.title="widget.chooser.user.title",this.onRoomWidgetChooserContentEvent=this.onRoomWidgetChooserContentEvent.bind(this),this.onRoomWidgetRoomObjectUpdateEvent=this.onRoomWidgetRoomObjectUpdateEvent.bind(this)}registerUpdateEvents(t){null!=t&&(t.addEventListener(Vt.RWCCE_USER_CHOOSER_CONTENT,this.onRoomWidgetChooserContentEvent),t.addEventListener(q.USER_REMOVED,this.onRoomWidgetRoomObjectUpdateEvent.bind(this)),t.addEventListener(q.USER_ADDED,this.onRoomWidgetRoomObjectUpdateEvent.bind(this)),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){null!=t&&(t.removeEventListener(Vt.RWCCE_USER_CHOOSER_CONTENT,this.onRoomWidgetChooserContentEvent),t.removeEventListener(q.USER_REMOVED,this.onRoomWidgetRoomObjectUpdateEvent.bind(this)),t.removeEventListener(q.USER_ADDED,this.onRoomWidgetRoomObjectUpdateEvent.bind(this)),super.unregisterUpdateEvents(t))}onRoomWidgetChooserContentEvent(t){t&&this._ngZone.run(()=>{this._items=t.items,this.visible=!0})}onRoomWidgetRoomObjectUpdateEvent(t){this.visible&&(this.clearTimeout(),this._timeout=setTimeout(()=>{this.messageListener.processWidgetMessage(new ft(ft.RWRWM_USER_CHOOSER))},100))}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-chooser-user"]],features:[i.Hb],decls:1,vars:1,consts:[["class","nitro-chooser-component card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-chooser-component","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","px-3","pt-3","input-group"],["type","text",1,"form-control","form-control-sm","chooser-search",3,"ngModel","placeholder","ngModelChange"],[1,"d-flex","p-3"],[2,"min-height","180px","max-height","180px","height","180px"],[1,"list-group"],["class","d-flex justify-content-between align-items-center bg-secondary rounded mb-1 px-2 py-1 chooser-item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","bg-secondary","rounded","mb-1","px-2","py-1","chooser-item",3,"ngClass","click"],[1,"mb-0"],["class","mb-0",4,"ngIf"]],template:function(t,e){1&t&&i.Uc(0,Fi,15,11,"div",0),2&t&&i.yc("ngIf",e.visible)},directives:[p.n,li,vi,Ti.b,Ti.j,Ti.l,Oi.b,p.m,p.l],pipes:[Fs,yi],encapsulation:2}),t})();var Wi=s("v1R/"),Vi=s("AzHa"),Gi=s("eaoH");function Hi(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"h6",3),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",4),i.nc("click",function(){return i.Lc(t),i.qc().hide()}),i.Zb(6,"i",5),i.cc(),i.cc(),i.dc(7,"div",6),i.dc(8,"div",7),i.dc(9,"color-chrome",8),i.nc("onChangeComplete",function(e){return i.Lc(t),i.qc().handleChangeComplete(e)}),i.cc(),i.cc(),i.dc(10,"div",9),i.dc(11,"button",10),i.nc("click",function(){return i.Lc(t),i.qc().handleButton("apply")}),i.Wc(12),i.rc(13,"translate"),i.cc(),i.dc(14,"button",10),i.nc("click",function(){return i.Lc(t),i.qc().handleButton("on_off")}),i.Wc(15),i.rc(16,"translate"),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Xc(i.sc(4,5,"widget.backgroundcolor.title")),i.Kb(6),i.yc("color",t.hsl)("disableAlpha",!0),i.Kb(3),i.Xc(i.sc(13,7,"widget.backgroundcolor.button.apply")),i.Kb(3),i.Xc(i.sc(16,9,"widget.backgroundcolor.button.on"))}}let Bi=(()=>{class t extends ws{constructor(t){super(),this._ngZone=t,this._furniId=-1,this._visible=!1,this.saturation=0,this.hue=0,this.lightness=0,this.hsl={h:0,s:0,l:0}}open(t,e,s,i){this._ngZone.run(()=>{this._furniId=t,this._visible=!0,this.hue=Math.max(e,0),this.saturation=Math.max(s,0),this.lightness=Math.max(i,0),console.log(this.hue,this.hue/255*360,this.saturation,this.lightness),this.hsl={h:this.hue/255*360,s:this.saturation/255,l:this.lightness/255},console.log(this.hsl)})}hide(){this._visible=!1,this._furniId=-1}handleChangeComplete(t){if(!t)return;const e=K.a._Str_22130(parseInt(t.color.hex.replace("#",""),16));this.hue=e>>16&255,this.saturation=e>>8&255,this.lightness=255&e}handleButton(t){switch(t){case"apply":this.handler.container.connection.send(new Vi.a(this._furniId,this.hue,this.saturation,this.lightness));break;case"on_off":this.handler.container.connection.send(new Wi.a(this._furniId))}}get handler(){return this.widgetHandler}get visible(){return this._visible}get delaySliderOptions(){return{floor:0,ceil:255,step:1,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-furniture-backgroundcolor-component"]],features:[i.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-dimmer card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-dimmer","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","align-items-center","justify-content-between","pt-3","px-3","w-100"],[1,"m-0"],[1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"d-flex","justify-content-center","align-items-center"],[3,"color","disableAlpha","onChangeComplete"],[1,"d-flex","justify-content-between","align-items-center","mt-2"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(t,e){1&t&&i.Uc(0,Hi,17,11,"div",0),2&t&&i.yc("ngIf",e.visible)},directives:[p.n,li,vi,Gi.a],pipes:[Fs],encapsulation:2}),t})();var ji=s("pjvS"),Ki=s("rbNg");let zi=(()=>{class t{}return t.DEFAULT=1,t.WALL_PAPER=2,t.FLOOR=3,t.LANDSCAPE=4,t.POST_IT=5,t.POSTER=6,t.SOUND_SET=7,t.TRAX_SONG=8,t.PRESENT=9,t.ECOTRON_BOX=10,t.TROPHY=11,t.CREDIT_FURNI=12,t.PET_SHAMPOO=13,t.PET_CUSTOM_PART=14,t.PET_CUSTOM_PART_SHAMPOO=15,t.PET_SADDLE=16,t.GUILD_FURNI=17,t.GAME_FURNI=18,t.MONSTERPLANT_SEED=19,t.MONSTERPLANT_REVIVAL=20,t.MONSTERPLANT_REBREED=21,t.MONSTERPLANT_FERTILIZE=22,t.FIGURE_PURCHASABLE_SET=23,t})();var Yi=s("hTzv");const Xi=["nitro-avatar-image",""];function Zi(t,e){if(1&t&&i.Zb(0,"img",1),2&t){const t=i.qc();i.Nb("avatar-image scale-",t.scale,""),i.yc("src",t.avatarUrl,i.Nc)}}let qi=(()=>{class t{constructor(t){this._ngZone=t,this.figure="",this.gender="M",this.headOnly=!1,this.direction=0,this.scale=1,this._avatarImageCache=new Yi.a,this.avatarUrl=null,this.disposed=!1,this.needsUpdate=!0}ngOnInit(){this.needsUpdate&&this.buildAvatar()}ngOnDestroy(){this.dispose()}ngOnChanges(t){const e=t.figure;e&&e.previousValue!==e.currentValue&&(this.needsUpdate=!0);const s=t.gender;s&&s.previousValue!==s.currentValue&&(this.needsUpdate=!0);const i=t.headOnly;i&&i.previousValue!==i.currentValue&&(this.needsUpdate=!0);const n=t.direction;n&&n.previousValue!==n.currentValue&&(this.needsUpdate=!0),this.needsUpdate&&this.buildAvatar()}dispose(){}resetFigure(t){this._avatarImageCache.remove(this.getAvatarBuildString()),this.buildAvatar()}buildAvatar(){this._ngZone.runOutsideAngular(()=>{this.needsUpdate=!1;const t=this.getUserImageUrl();t&&this._ngZone.run(()=>this.avatarUrl=t)})}getUserImageUrl(){const t=this.getAvatarBuildString();let e=this._avatarImageCache.getValue(t);if(!e){const s=u.a.instance.avatar.createAvatarImage(this.figure,It.a.LARGE,this.gender,this,null);if(s){let t=Rt.a.FULL;this.headOnly&&(t=Rt.a.HEAD),s.setDirection(t,this.direction);const i=s.getCroppedImage(t);i&&(e=i.src),s.dispose()}e&&this.putInCache(t,e)}return e}putInCache(e,s){this._avatarImageCache.length===t.MAX_CACHE_SIZE&&this._avatarImageCache.remove(this._avatarImageCache.getKey(0)),this._avatarImageCache.add(e,s)}getAvatarBuildString(){return`${this.figure}:${this.gender}:${this.direction}:${this.headOnly}`}}return t.MAX_CACHE_SIZE=10,t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-avatar-image",""]],inputs:{figure:"figure",gender:"gender",headOnly:"headOnly",direction:"direction",scale:"scale"},features:[i.Ib],attrs:Xi,decls:1,vars:1,consts:[[3,"class","src",4,"ngIf"],[3,"src"]],template:function(t,e){1&t&&i.Uc(0,Zi,1,4,"img",0),2&t&&i.yc("ngIf",e.avatarUrl)},directives:[p.n],encapsulation:2}),t})();function Qi(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"h6",3),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",4),i.nc("click",function(){return i.Lc(t),i.qc().hide()}),i.Zb(6,"i",5),i.cc(),i.cc(),i.dc(7,"div",6),i.dc(8,"div",7),i.Zb(9,"div",8),i.cc(),i.dc(10,"div",9),i.dc(11,"p"),i.Wc(12),i.rc(13,"translate"),i.cc(),i.dc(14,"p"),i.Wc(15),i.rc(16,"translate"),i.cc(),i.cc(),i.cc(),i.dc(17,"div",10),i.dc(18,"button",11),i.nc("click",function(){return i.Lc(t),i.qc().handleButton("cancel")}),i.Wc(19),i.rc(20,"translate"),i.cc(),i.dc(21,"button",12),i.nc("click",function(){return i.Lc(t),i.qc().handleButton("use")}),i.Wc(22),i.rc(23,"translate"),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Xc(i.sc(4,7,"useproduct.widget.title.bind_clothing")),i.Kb(6),i.yc("figure",t.newFigureString)("direction",2),i.Kb(3),i.Xc(i.sc(13,9,"useproduct.widget.text.bind_clothing")),i.Kb(3),i.Xc(i.sc(16,11,"useproduct.widget.info.bind_clothing")),i.Kb(4),i.Xc(i.sc(20,13,"useproduct.widget.cancel")),i.Kb(3),i.Xc(i.sc(23,15,"useproduct.widget.bind_clothing"))}}let Ji=(()=>{class t{constructor(){this.contextWidget=null,this.objectId=null,this.visible=!1,this._furniData=null,this._requestObjectId=-1,this.caption=null}hide(){this.contextWidget&&this.contextWidget.closeClothing()}open(t){if(!this.contextWidget)return;const e=this.contextWidget.handler.container.roomEngine.getRoomObject(this.contextWidget.handler.container.roomSession.roomId,t,W.a.FLOOR);if(!e)return;this._furniData=this.contextWidget.handler.getFurniData(e),this._requestObjectId=e.id;let s=-1;const i=[],n=this.contextWidget.handler.container.sessionDataManager.gender;switch(this._furniData.specialType){case zi.FIGURE_PURCHASABLE_SET:{s=0;const t=this._furniData.customParams.split(",");for(let e=0;e<t.length;e++){const s=Number.parseInt(t[e]);this.contextWidget.handler.container.avatarRenderManager.isValidFigureSetForGender(s,n)&&i.push(s)}}}this.newFigureString=this.contextWidget.handler.container.avatarRenderManager.getFigureStringWithFigureIds(this.contextWidget.handler.container.sessionDataManager.figure,n,i),this.contextWidget.inventoryService.hasBoundFigureSetFurniture(this.newFigureString)?this.contextWidget.handler.container.connection.send(new Ki.a(n,this.newFigureString)):this.showWindow(s)}handleButton(t){switch(t){case"cancel":this.hide();break;case"use":{const t=this.contextWidget.handler.container.sessionDataManager.gender;this.contextWidget.handler.container.connection.send(new ji.a(this._requestObjectId)),this.contextWidget.handler.container.connection.send(new Ki.a(t,this.newFigureString)),this.hide()}}}showWindow(t){this.caption=u.a.instance.localization.getValueWithParameter("useproduct.widget.text.bind_clothing","productName",this._furniData.name),this.visible=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],inputs:{contextWidget:"contextWidget",objectId:"objectId"},decls:1,vars:1,consts:[["class","nitro-furniture-purchasable-clothing card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-purchasable-clothing","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-3"],[1,"col-4","d-flex","align-items-center","justify-content-center"],["nitro-avatar-image","",1,"bg-secondary","rounded",3,"figure","direction"],[1,"col-8","d-flex","flex-column","align-items-center","justify-content-center"],[1,"d-flex","justify-content-between","align-items-center","p-3"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&i.Uc(0,Qi,24,17,"div",0),2&t&&i.yc("ngIf",e.visible)},directives:[p.n,li,vi,qi],pipes:[Fs],encapsulation:2}),t})();var $i=s("1mUs");let tn=(()=>{class t{}return t.FURNI=1,t.RENTABLE=2,t.PET=3,t.BADGE=4,t.BOT=5,t.GAMES=6,t._Str_12463=[t.FURNI,t.RENTABLE,t.PET,t.BADGE,t.BOT],t})();var en=s("pRZV");class sn{constructor(t,e){this._communication=t,this._inventoryService=e,this._unseenItems=[],this._messages=[],this.registerMessages()}dispose(){this.unregisterMessages(),this._communication=null,this._unseenItems=null}registerMessages(){this.unregisterMessages(),this._messages=[new en.a(this.onUnseenItemsEvent.bind(this))];for(const t of this._messages)this._communication.registerMessageEvent(t)}unregisterMessages(){for(const t of this._messages)this._communication.removeMessageEvent(t);this._messages=[]}_Str_8813(t){return!!this._Str_5621(t)&&(delete this._unseenItems[t],this._Str_20981(t),!0)}_Str_18075(t,e){if(!this._Str_5621(t))return!1;const s=this._unseenItems[t];for(const i of e)s.splice(s.indexOf(i),1);return this._Str_23994(t,e),!0}_Str_17159(t){return!this._Str_5621(t)&&(delete this._unseenItems[t],this._Str_20981(t),!0)}_Str_3613(t,e){return!!this._unseenItems[t]&&this._unseenItems[t].indexOf(e)>=0}_Str_16745(t,e){if(!this._unseenItems[t])return!1;const s=this._unseenItems[t],i=s.indexOf(e);return-1!==i&&(s.splice(i,1),!0)}_Str_11239(t){return this._unseenItems?this._unseenItems[t]:[]}_Str_5621(t){return this._unseenItems[t]?this._unseenItems[t].length:0}onUnseenItemsEvent(t){if(!t)return;const e=t.getParser();if(e){for(const t of e.categories){const s=e.getItemsByCategory(t);this._Str_18112(t,s)}this._inventoryService.updateUnseenCount()}}_Str_18112(t,e){if(!e)return;let s=this._unseenItems[t];s||(s=[],this._unseenItems[t]=s);for(const i of e)-1===s.indexOf(i)&&s.push(i)}_Str_20981(t){}_Str_23994(t,e){}}let nn=(()=>{class t{constructor(t,e){this._settingsService=t,this._ngZone=e,this._messages=[],this._events=null,this._botsController=null,this._furniController=null,this._controller=null,this._petsController=null,this._tradeController=null,this._roomSession=null,this._unseenCount=0,this._botsVisible=!1,this._furnitureVisible=!1,this._petsVisible=!1,this._tradingVisible=!1,this._figureSetIds=[],this._boundFurnitureNames=[],this._events=new i.r,this._unseenTracker=new sn(u.a.instance.communication,this),this._unseenCounts=new Map,this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages(),this._unseenTracker&&(this._unseenTracker.dispose(),this._unseenTracker=null)}registerMessages(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomSessionManager.events.addEventListener(N.a.STARTED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(N.a.ENDED,this.onRoomSessionEvent),this._messages=[new $i.a(this.onFigureSetIdsMessageEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomSessionManager.events.removeEventListener(N.a.STARTED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(N.a.ENDED,this.onRoomSessionEvent);for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomSessionEvent(t){if(t)switch(t.type){case N.a.STARTED:return void(this._roomSession=t.session);case N.a.ENDED:return this._roomSession=null,void this._ngZone.run(()=>this.hideWindow())}}onFigureSetIdsMessageEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._figureSetIds=e.figureSetIds,this._boundFurnitureNames=e.boundsFurnitureNames})}updateUnseenCount(){function t(){let t=0;const e=this._unseenTracker._Str_5621(tn.FURNI);t+=e,this._unseenCounts.set(tn.FURNI,e),this._unseenCount=t}i.H.isInAngularZone()?t.apply(this):this._ngZone.run(()=>t.apply(this))}updateItemLocking(){this.controller&&this.controller.updateItemLocking()}showWindow(){this._settingsService.showInventory()}hideWindow(){this.furniController&&(this.furniController.mouseDown=!1),this._settingsService.hideInventory()}hasFigureSetId(t){return this._figureSetIds.indexOf(t)>-1}hasBoundFigureSetFurniture(t){return this._boundFurnitureNames.indexOf(t)>-1}get events(){return this._events}get botsController(){return this._botsController}set botsController(t){this._botsController=t}get furniController(){return this._furniController}set furniController(t){this._furniController=t}get controller(){return this._controller}set controller(t){this._controller=t}get petsController(){return this._petsController}set petsController(t){this._petsController=t}get tradeController(){return this._tradeController}set tradeController(t){this._tradeController=t}get unseenTracker(){return this._unseenTracker}get roomSession(){return this._roomSession}get unseenCount(){return this._unseenCount}get botsVisible(){return this._botsVisible}set botsVisible(t){this._botsVisible=t}get furnitureVisible(){return this._furnitureVisible}set furnitureVisible(t){this._furnitureVisible=t}get petsVisible(){return this._petsVisible}set petsVisible(t){this._petsVisible=t}get tradingVisible(){return this._tradingVisible}set tradingVisible(t){this._tradingVisible=t}get figureSetIds(){return this._figureSetIds}get boundFurnitureNames(){return this._boundFurnitureNames}}return t.\u0275fac=function(e){return new(e||t)(i.kc(m),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();const rn=["purchaseClothing"];let an=(()=>{class t extends ws{constructor(t,e,s){super(),this._ngZone=t,this._resolver=e,this.inventoryService=s,this._visible=!1,this._selectedObject=null}registerUpdateEvents(t){t&&super.registerUpdateEvents(t)}unregisterUpdateEvents(t){t&&super.unregisterUpdateEvents(t)}_Str_24748(t){this._selectedObject=t,this._ngZone.run(()=>{this.purchaseClothingContainer.clear();const e=this._resolver.resolveComponentFactory(Ji);this._purchaseClothingContainerRef=this.purchaseClothingContainer.createComponent(e),this._purchaseClothingContainerRef.instance.contextWidget=this,this._purchaseClothingContainerRef.instance.open(t.id)})}closeClothing(){this._ngZone.run(()=>this.purchaseClothingContainer.clear())}hide(){this._visible=!1}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(t){this._visible=t}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H),i.Yb(i.m),i.Yb(nn))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-furniture-context-menu-component"]],viewQuery:function(t,e){if(1&t&&i.cd(rn,1,i.Z),2&t){let t;i.Hc(t=i.oc())&&(e.purchaseClothingContainer=t.first)}},features:[i.Hb],decls:2,vars:0,consts:[["purchaseClothing",""]],template:function(t,e){1&t&&i.Zb(0,"template",null,0)},encapsulation:2}),t})();function on(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"h6",3),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",4),i.nc("click",function(){return i.Lc(t),i.qc().hide()}),i.Zb(6,"i",5),i.cc(),i.cc(),i.dc(7,"div",6),i.dc(8,"p"),i.Wc(9),i.rc(10,"translate"),i.cc(),i.dc(11,"div",7),i.dc(12,"button",8),i.nc("click",function(){return i.Lc(t),i.qc().hide()}),i.Wc(13),i.rc(14,"translate"),i.cc(),i.dc(15,"button",9),i.nc("click",function(){return i.Lc(t),i.qc().sendRedeem()}),i.Wc(16),i.rc(17,"translate"),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Xc(i.sc(4,4,"catalog.redeem.dialog.title")),i.Kb(6),i.Xc(i.uc(10,6,"widgets.furniture.credit.redeem.value","value",t.value)),i.Kb(4),i.Xc(i.sc(14,10,"generic.cancel")),i.Kb(3),i.Xc(i.sc(17,12,"catalog.redeem.dialog.button.exchange"))}}let cn=(()=>{class t extends ws{constructor(t){super(),this._ngZone=t,this._objectId=-1,this._value="0",this._visible=!1,this.onRoomWidgetCreditFurniUpdateEvent=this.onRoomWidgetCreditFurniUpdateEvent.bind(this)}registerUpdateEvents(t){t&&(t.addEventListener(zt.RWCFUE_CREDIT_FURNI_UPDATE,this.onRoomWidgetCreditFurniUpdateEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(zt.RWCFUE_CREDIT_FURNI_UPDATE,this.onRoomWidgetCreditFurniUpdateEvent),super.unregisterUpdateEvents(t))}onRoomWidgetCreditFurniUpdateEvent(t){t&&(this._objectId=t.objectId,this._ngZone.run(()=>{this._value=t.value.toString(),this._visible=!0}))}sendRedeem(){-1!==this._objectId&&(this.messageListener.processWidgetMessage(new Yt(Yt.RWFCRM_REDEEM,this._objectId)),this.hide())}hide(){this._visible=!1}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(t){this._visible=t}get value(){return this._value}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-furniture-credit-compontent"]],features:[i.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-credit card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-credit","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"d-flex","justify-content-between"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&i.Uc(0,on,18,14,"div",0),2&t&&i.yc("ngIf",e.visible)},directives:[p.n,li,vi],pipes:[Fs],encapsulation:2}),t})();var _n=s("OGjZ"),hn=s("mgaL");function ln(t,e){1&t&&i.Zb(0,"div",17)}function un(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.Uc(1,ln,1,0,"div",2),i.dc(2,"div",3),i.Zb(3,"div",4),i.dc(4,"div",5),i.dc(5,"div",6),i.Wc(6),i.rc(7,"translate"),i.cc(),i.dc(8,"div",7),i.nc("click",function(){return i.Lc(t),i.qc().hide()}),i.Zb(9,"i",8),i.cc(),i.cc(),i.cc(),i.dc(10,"div",9),i.dc(11,"div",10),i.dc(12,"div",11),i.dc(13,"ngx-slider",12),i.nc("ngModelChange",function(e){return i.Lc(t),i.qc().heightRange=e})("mouseup",function(){return i.Lc(t),i.qc().onHeightChange()}),i.cc(),i.cc(),i.dc(14,"div",13),i.dc(15,"p",14),i.Wc(16),i.rc(17,"translate"),i.cc(),i.dc(18,"input",15),i.nc("ngModelChange",function(e){return i.Lc(t),i.qc().heightInput=e})("keydown.enter",function(){return i.Lc(t),i.qc().onHeightChange()}),i.cc(),i.dc(19,"button",16),i.nc("click",function(){return i.Lc(t),i.qc().placeAboveStack()}),i.Wc(20),i.rc(21,"translate"),i.cc(),i.dc(22,"button",16),i.nc("click",function(){return i.Lc(t),i.qc().placeAtFloor()}),i.Wc(23),i.rc(24,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(1),i.yc("ngIf",t.isLoading),i.Kb(5),i.Xc(i.sc(7,10,"widget.custom.stack.height.title")),i.Kb(7),i.yc("options",t.sliderOptions)("ngModel",t.heightRange),i.Kb(3),i.Xc(i.sc(17,12,"widget.custom.stack.height.text")),i.Kb(2),i.yc("ngModel",t.heightInput)("min",t.minHeight)("max",t.maxHeight),i.Kb(2),i.Xc(i.sc(21,14,"furniture.above.stack")),i.Kb(3),i.Xc(i.sc(24,16,"furniture.floor.level"))}}let dn=(()=>{class t extends ws{constructor(t){super(),this._ngZone=t,this._visible=!1,this._furniId=-1,this._height=0,this._heightRange="0",this._heightInput="0"}open(t,e){this._ngZone.run(()=>{this._furniId=t,this._height=e,this._visible=!0,this.setHeight(e,!0)})}update(t,e){this._ngZone.run(()=>this._furniId===t&&this.setHeight(e,!0))}hide(){this._visible=!1,this._furniId=-1,this._height=0}onHeightChange(){const t=this._heightInput;let e=0;e=null===t||""===t?this._height:parseFloat(t),this.setHeight(e)}setHeight(e,s=!1){e=Math.abs(e),s||e>t.MAX_HEIGHT&&(e=t.MAX_HEIGHT),this._height=parseFloat(e.toFixed(2)),this._heightRange=this._height.toString(),this._heightInput=this._height.toString(),s||this.sendUpdate(100*this._height)}placeAboveStack(){this.sendUpdate(-100)}placeAtFloor(){this.sendUpdate(0)}sendUpdate(t){this.widgetHandler.container.connection.send(new _n.a(this._furniId,~~t))}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(t){this._visible=t}get furniId(){return this._furniId}get height(){return this._height}get heightInput(){return this._heightInput}set heightInput(t){null===t||""===t||isNaN(t)||(this._heightInput=t)}get heightRange(){return this._heightRange}set heightRange(t){this._heightRange=t,this.heightInput=this.heightRange}get minHeight(){return 0}get maxHeight(){return t.MAX_HEIGHT}get sliderOptions(){return{floor:0,ceil:t.MAX_RANGE_HEIGHT,step:t.STEP_VALUE,hidePointerLabels:!0,hideLimitLabels:!0,vertical:!0}}}return t.MAX_HEIGHT=40,t.MAX_RANGE_HEIGHT=10,t.STEP_VALUE=.01,t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-furniture-customstackheight-component"]],features:[i.Hb],decls:1,vars:1,consts:[["dragHandle",".card-header","class","card nitro-room-furniture-customstackheight-component",3,"bringToTop","draggable",4,"ngIf"],["dragHandle",".card-header",1,"card","nitro-room-furniture-customstackheight-component",3,"bringToTop","draggable"],["class","card-loading-overlay",4,"ngIf"],[1,"card-header-container"],[1,"card-header-overlay"],[1,"card-header"],[1,"header-title"],[1,"header-close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"d-flex"],[1,"m-2","custom-slider"],["name","heightRange",3,"options","ngModel","ngModelChange","mouseup"],[1,"p-2","flex-grow-1"],[1,"text-justify"],["name","heightInput","type","number",1,"form-control","form-control-sm",3,"ngModel","min","max","ngModelChange","keydown.enter"],["type","button",1,"btn","btn-green",3,"click"],[1,"card-loading-overlay"]],template:function(t,e){1&t&&i.Uc(0,un,25,18,"div",0),2&t&&i.yc("ngIf",e.visible)},directives:[p.n,li,vi,hn.b,Ti.j,Ti.l,Ti.n,Ti.b],pipes:[Fs],encapsulation:2}),t})();function gn(t,e){if(1&t){const t=i.ec();i.dc(0,"button",21),i.nc("click",function(){i.Lc(t);const s=e.index;return i.qc(3).selectPreset(s+1)}),i.Wc(1),i.rc(2,"translate"),i.cc()}if(2&t){const t=e.index;i.Kb(1),i.Xc(i.sc(2,1,"widget.dimmer.tab."+(t+1)))}}const mn=function(t){return{"color-selected":t}},pn=function(t){return{"background-color":t}};function fn(t,e){if(1&t){const t=i.ec();i.dc(0,"button",22),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc(3).selectColor(s)}),i.cc()}if(2&t){const t=e.$implicit,s=e.index,n=i.qc(3);i.yc("ngClass",i.Cc(2,mn,n.getSelectedPreset().color==t))("ngStyle",i.Cc(4,pn,n.htmlColors[s]))}}function En(t,e){if(1&t){const t=i.ec();i.bc(0),i.dc(1,"div",9),i.Uc(2,gn,3,3,"button",10),i.cc(),i.dc(3,"div",11),i.dc(4,"div",12),i.Uc(5,fn,1,6,"button",13),i.cc(),i.dc(6,"div",14),i.dc(7,"ngx-slider",15),i.nc("valueChange",function(){return i.Lc(t),i.qc(2).onSliderChange()})("valueChange",function(e){return i.Lc(t),i.qc(2).getSelectedPreset().intensity=e}),i.cc(),i.cc(),i.cc(),i.dc(8,"div",16),i.dc(9,"div",17),i.dc(10,"input",18),i.nc("change",function(e){return i.Lc(t),i.qc(2).changeCheckbox(e)}),i.cc(),i.dc(11,"label",19),i.Wc(12),i.rc(13,"translate"),i.cc(),i.cc(),i.cc(),i.dc(14,"div",9),i.dc(15,"button",20),i.nc("click",function(){return i.Lc(t),i.qc(2).handleButton("on_off")}),i.Wc(16),i.rc(17,"translate"),i.cc(),i.dc(18,"button",20),i.nc("click",function(){return i.Lc(t),i.qc(2).handleButton("apply")}),i.Wc(19),i.rc(20,"translate"),i.cc(),i.cc(),i.ac()}if(2&t){const t=i.qc(2);i.Kb(2),i.yc("ngForOf",t.presets),i.Kb(3),i.yc("ngForOf",t.availableColors),i.Kb(2),i.yc("options",t.delaySliderOptions)("value",t.getSelectedPreset().intensity),i.Kb(3),i.yc("ngModel",t.getSelectedPreset().backgroundOnly),i.Kb(2),i.Xc(i.sc(13,8,"widget.dimmer.type.checkbox")),i.Kb(4),i.Xc(i.sc(17,10,t.isOn?"widget.dimmer.button.off":"widget.dimmer.button.on")),i.Kb(3),i.Xc(i.sc(20,12,"widget.dimmer.button.apply"))}}function Sn(t,e){if(1&t){const t=i.ec();i.bc(0),i.Wc(1),i.rc(2,"translate"),i.dc(3,"button",23),i.nc("click",function(){return i.Lc(t),i.qc(2).handleButton("on_off")}),i.Wc(4),i.rc(5,"translate"),i.cc(),i.ac()}if(2&t){const t=i.qc(2);i.Kb(1),i.Yc(" ",i.sc(2,2,"widget.dimmer.info.off")," "),i.Kb(3),i.Xc(i.sc(5,4,t.isOn?"widget.dimmer.button.off":"widget.dimmer.button.on"))}}function In(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"h6",3),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",4),i.nc("click",function(){return i.Lc(t),i.qc().hide()}),i.Zb(6,"i",5),i.cc(),i.cc(),i.dc(7,"div",6),i.dc(8,"div",7),i.Uc(9,En,21,14,"ng-container",8),i.Uc(10,Sn,6,6,"ng-container",8),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Xc(i.sc(4,3,"widget.dimmer.title")),i.Kb(6),i.yc("ngIf",t.isOn),i.Kb(1),i.yc("ngIf",!t.isOn)}}let Rn=(()=>{class t extends ws{constructor(t){super(),this._ngZone=t,this._visible=!1,this._dimmerState=0,this._effectId=0,this._color=16777215,this._brightness=255,this.presets=[],this.selectedPresetId=0,this.isOn=!1,this.availableColors=[7665141,21495,15161822,15353138,15923281,8581961,0],this.htmlColors=["#74F5F5","#0053F7","#E759DE","#EA4532","#F2F851","#82F349","#000000"],this.onDimmerPresetsEvent=this.onDimmerPresetsEvent.bind(this),this.onDimmerStateEvent=this.onDimmerStateEvent.bind(this)}registerUpdateEvents(t){t&&(t.addEventListener(te.RWDUE_PRESETS,this.onDimmerPresetsEvent),t.addEventListener(Jt.RWDSUE_DIMMER_STATE,this.onDimmerStateEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(te.RWDUE_PRESETS,this.onDimmerPresetsEvent),t.removeEventListener(Jt.RWDSUE_DIMMER_STATE,this.onDimmerStateEvent),super.unregisterUpdateEvents(t))}getSelectedPreset(){return this.presets[this.selectedPresetId-1]}selectPreset(t){this.selectedPresetId=t}selectColor(t){this.getSelectedPreset().color=t,this.previewSettings()}onDimmerPresetsEvent(t){this.presets=t.presets.map(t=>({color:t.color,id:t.id,intensity:t._Str_4272,backgroundOnly:2==t.type})),this.selectedPresetId=t.selectedPresetId,this._ngZone.run(()=>{this._visible=!0})}onDimmerStateEvent(t){this._ngZone.run(()=>{this.isOn=1==t.state,this._effectId=t._Str_6815,this._color=t.color,this._brightness=t._Str_5123}),this.messageListener.processWidgetMessage(new se(this._color,this._brightness,2===this._effectId))}get handler(){return this.widgetHandler}hide(){this._visible=!1}get visible(){return this._visible&&this.selectedPresetId>0&&this.presets.length>0}set visible(t){this._visible=t}onSliderChange(){this.previewSettings()}changeCheckbox(t){this.getSelectedPreset().backgroundOnly=t.target.checked,this.previewSettings()}previewSettings(){if(!this.messageListener)return;const t=this.getSelectedPreset();this.messageListener.processWidgetMessage(new se(t.color,t.intensity,t.backgroundOnly))}handleButton(t){switch(t){case"on_off":this.toggleState();break;case"apply":this.apply()}}toggleState(){this.messageListener&&this.messageListener.processWidgetMessage(new ee)}apply(){if(!this.isOn||!this.messageListener||null==this.presets||0==this.presets.length)return;const t=this.getSelectedPreset();t&&this.messageListener.processWidgetMessage(new ie(t.id,t.backgroundOnly?2:1,t.color,t.intensity,!0))}get delaySliderOptions(){return{floor:75,ceil:255,step:1,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-furniture-dimmer-component"]],features:[i.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-dimmer card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-dimmer","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","align-items-center","justify-content-between","pt-3","px-3","w-100"],[1,"m-0"],[1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"dimmer-inner","bg-secondary","p-2"],[4,"ngIf"],[1,"d-flex","flex-row","justify-content-between"],["type","button","class","btn btn-sm btn-primary w-100",3,"click",4,"ngFor","ngForOf"],[1,"py-2"],[1,"d-flex","flex-row","dimmer-colour-list"],["type","button","class","btn btn-sm dimmer-colour py-3",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[1,"custom-slider"],[3,"options","value","valueChange"],[1,"d-block","mb-1"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","change"],[1,"form-check-label"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],["type","button",1,"btn","btn-sm","btn-primary","w-100",3,"click"],["type","button",1,"btn","btn-sm","dimmer-colour","py-3",3,"ngClass","ngStyle","click"],["type","button",1,"btn","btn-primary","btn-sm","w-100",3,"click"]],template:function(t,e){1&t&&i.Uc(0,In,11,5,"div",0),2&t&&i.yc("ngIf",e.visible)},directives:[p.n,li,vi,p.m,hn.b,Ti.a,Ti.j,Ti.l,p.l,p.o],pipes:[Fs],encapsulation:2}),t})();function bn(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"h6",3),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",4),i.nc("click",function(){return i.Lc(t),i.qc().hide()}),i.Zb(6,"i",5),i.cc(),i.cc(),i.dc(7,"div",6),i.dc(8,"div",7),i.dc(9,"p"),i.Wc(10),i.rc(11,"translate"),i.cc(),i.cc(),i.cc(),i.dc(12,"div",8),i.dc(13,"button",9),i.nc("click",function(){return i.Lc(t),i.qc().handleButton("cancel")}),i.Wc(14),i.rc(15,"translate"),i.cc(),i.dc(16,"button",10),i.nc("click",function(){return i.Lc(t),i.qc().handleButton("confirm")}),i.Wc(17),i.rc(18,"translate"),i.cc(),i.cc(),i.cc()}2&t&&(i.Kb(3),i.Xc(i.sc(4,4,"friend.furniture.confirm.lock.caption")),i.Kb(7),i.Xc(i.sc(11,6,"friend.furniture.confirm.lock.subtitle")),i.Kb(4),i.Xc(i.sc(15,8,"friend.furniture.confirm.lock.button.cancel")),i.Kb(3),i.Xc(i.sc(18,10,"friend.furniture.confirm.lock.button.confirm")))}let vn=(()=>{class t extends ws{constructor(t){super(),this._ngZone=t,this._visible=!1,this._furniId=-1}open(t,e){this._visible&&-1!=this._furniId&&this.sendStart(this._furniId,!1),this._ngZone.run(()=>{this._furniId=t,this._visible=!0})}handleButton(t){switch(t){case"confirm":this.sendStart(this._furniId,!0),this.hide();break;case"cancel":this.sendStart(this._furniId,!1),this.hide()}}sendStart(t,e){u.a.instance.communication.connection.send(new Dt.a(t,e))}hide(){this._visible=!1,this._furniId=-1}get visible(){return this._visible}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-purchasable-clothing card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-purchasable-clothing","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-6"],[1,"col-4","d-flex","align-items-center","justify-content-center"],[1,"d-flex","justify-content-between","align-items-center","p-3"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&i.Uc(0,bn,19,12,"div",0),2&t&&i.yc("ngIf",e.visible)},directives:[p.n,li,vi],pipes:[Fs],encapsulation:2}),t})(),Tn=(()=>{class t{}return t._Str_13451=0,t._Str_17498=1,t._Str_18746=2,t._Str_15230=3,t._Str_15778=4,t})();const On=function(t){return{backgroundImage:t}};function yn(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"div",3),i.nc("click",function(){return i.Lc(t),i.qc().hide()}),i.cc(),i.dc(3,"div",4),i.dc(4,"div",5),i.Zb(5,"div",6),i.cc(),i.dc(6,"div",5),i.Zb(7,"div",6),i.cc(),i.cc(),i.dc(8,"p",7),i.Wc(9),i.rc(10,"translate"),i.cc(),i.dc(11,"p",8),i.Wc(12),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.yc("ngStyle",i.Cc(11,On,"url("+t.image+")")),i.Kb(5),i.yc("figure",t.firstFigure)("direction",2),i.Kb(2),i.yc("figure",t.secondFigure)("direction",4),i.Kb(2),i.Xc(i.sc(10,9,"lovelock.engraving.caption")),i.Kb(3),i.ad("",t.firstName," | ",t.secondName," | ",t.engravedDate,"")}}let An=(()=>{class t extends ws{constructor(t){super(),this._ngZone=t,this.engravingView=null,this.visible=!1,this.firstFigure=null,this.firstName=null,this.secondFigure=null,this.secondName=null,this.engravedDate=null}open(t,e,s){switch(e){case Tn._Str_13451:this.engravingView="engraving";break;case Tn._Str_17498:case Tn._Str_18746:break;case Tn._Str_15230:this.engravingView="wildwest";break;case Tn._Str_15778:this.engravingView="hween14"}this.engravingView&&this._ngZone.run(()=>{this.firstName=s.getValue(1),this.secondName=s.getValue(2),this.firstFigure=s.getValue(3),this.secondFigure=s.getValue(4),this.engravedDate=s.getValue(5),this.visible=!0})}hide(){this.visible=!1}get image(){return u.a.instance.getConfiguration("furni.extras.url").toString().replace("%image%","loveLock_"+this.engravingView)}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-friends-engraving",3,"bringToTop","draggable","ngStyle",4,"ngIf"],[1,"nitro-furniture-friends-engraving",3,"bringToTop","draggable","ngStyle"],[1,"drag-handler","d-flex","flex-column","small","h-100"],[1,"friend-close","position-absolute",3,"click"],[1,"row","justify-content-center"],[1,"col-2","d-flex","justify-content-center"],["nitro-avatar-image","",3,"figure","direction"],[1,"w-100","text-center"],[1,"w-100","text-center","mt-auto"]],template:function(t,e){1&t&&i.Uc(0,yn,13,13,"div",0),2&t&&i.yc("ngIf",e.visible)},directives:[p.n,li,vi,p.o,qi],pipes:[Fs],encapsulation:2}),t})();const Cn=function(t){return{"background-color":t}};function Mn(t,e){if(1&t){const t=i.ec();i.dc(0,"button",12),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc(3).processAction(s)}),i.cc()}2&t&&i.yc("ngStyle",i.Cc(1,Cn,"#"+e.$implicit))}function Un(t,e){if(1&t){const t=i.ec();i.dc(0,"div",8),i.dc(1,"button",9),i.nc("click",function(){return i.Lc(t),i.qc(2).processAction("delete")}),i.Zb(2,"i",10),i.cc(),i.Uc(3,Mn,1,3,"button",11),i.cc()}if(2&t){const t=i.qc(2);i.Kb(3),i.yc("ngForOf",t.AVAILABLE_COLORS)}}const Dn=function(t,e){return{"background-color":t,color:e}};function wn(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.Uc(2,Un,4,1,"div",3),i.dc(3,"button",4),i.nc("click",function(){return i.Lc(t),i.qc().hide()}),i.Zb(4,"i",5),i.cc(),i.cc(),i.dc(5,"div",6),i.dc(6,"textarea",7),i.nc("ngModelChange",function(e){return i.Lc(t),i.qc().text=e}),i.Wc(7),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.yc("ngStyle",i.Dc(5,Dn,"#"+t.colorHex,t.colorHex)),i.Kb(2),i.yc("ngIf",t.isController),i.Kb(4),i.yc("disabled",!t.isController)("ngModel",t.text),i.Kb(1),i.Xc(t.text)}}let Nn=(()=>{class t extends ws{constructor(t){super(),this._ngZone=t,this.AVAILABLE_COLORS=["9CCEFF","FF9CFF","9CFF9C","FFFF33"],this._objectId=-1,this._colorHex=null,this._text=null,this._isController=!1,this._visible=!1,this.onRoomWidgetStickieDataUpdateEvent=this.onRoomWidgetStickieDataUpdateEvent.bind(this)}dispose(){this.updateStickie(),super.dispose()}registerUpdateEvents(t){t&&(t.addEventListener(_e.RWSDUE_STICKIE_DATA,this.onRoomWidgetStickieDataUpdateEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(_e.RWSDUE_STICKIE_DATA,this.onRoomWidgetStickieDataUpdateEvent),super.unregisterUpdateEvents(t))}onRoomWidgetStickieDataUpdateEvent(t){t&&this._ngZone.run(()=>{this._objectId=t._Str_1577,this._colorHex=t._Str_10471,this._text=t.text,this._isController=t.controller,this._visible=!0})}processAction(t){if(t&&""!==t){if(this.AVAILABLE_COLORS.indexOf(t)>=0)return this._colorHex=t,void this.updateStickie();switch(t){case"delete":return void this.deleteStickie()}}}hide(){this.updateStickie(),this._objectId=-1,this._colorHex=null,this._text=null,this._isController=!1,this._visible=!1}updateStickie(){-1!==this._objectId&&this.messageListener.processWidgetMessage(new he(he.SEND_UPDATE,this._objectId,this._text,this._colorHex))}deleteStickie(){-1!==this._objectId&&(this.messageListener.processWidgetMessage(new he(he.SEND_DELETE,this._objectId)),this.hide())}get visible(){return this._visible}set visible(t){this._visible=t}get handler(){return this.widgetHandler}get objectId(){return this._objectId}get colorHex(){return this._colorHex}get text(){return this._text}set text(t){this._text=t}get isController(){return this._isController}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-furniture-sticky"]],features:[i.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-stickie",3,"bringToTop","draggable","ngStyle",4,"ngIf"],[1,"nitro-furniture-stickie",3,"bringToTop","draggable","ngStyle"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","py-1","px-2"],["class"," d-flex align-items-center",4,"ngIf"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","p-1"],["name","sticky-text","rows","11","maxlength","500",1,"sticky-text",3,"disabled","ngModel","ngModelChange"],[1,"d-flex","align-items-center"],["type","button",1,"sticky-trash","mr-2",3,"click"],[1,"fas","fa-trash-alt"],["type","button","class","sticky-button rounded p-2 mr-2",3,"ngStyle","click",4,"ngFor","ngForOf"],["type","button",1,"sticky-button","rounded","p-2","mr-2",3,"ngStyle","click"]],template:function(t,e){1&t&&i.Uc(0,wn,8,8,"div",0),2&t&&i.yc("ngIf",e.visible)},directives:[p.n,li,vi,p.o,Ti.b,Ti.g,Ti.j,Ti.l,p.m],encapsulation:2}),t})();function Ln(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"h6",3),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",4),i.nc("click",function(){return i.Lc(t),i.qc().hide()}),i.Zb(6,"i",5),i.cc(),i.cc(),i.dc(7,"div",6),i.dc(8,"p",7),i.Wc(9),i.cc(),i.dc(10,"div",8),i.Zb(11,"hr",9),i.dc(12,"div",10),i.dc(13,"p",11),i.Wc(14),i.cc(),i.dc(15,"p",11),i.Wc(16),i.cc(),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Nb("nitro-furniture-trophy card trophy-",t.color,""),i.Kb(3),i.Xc(i.sc(4,7,"widget.furni.trophy.title")),i.Kb(6),i.Xc(t.message),i.Kb(5),i.Xc(t.ownerName),i.Kb(2),i.Xc(t.date)}}let xn=(()=>{class t extends ws{constructor(t){super(),this._ngZone=t,this._visible=!1,this._color=null,this._ownerName=null,this._date=null,this._message=null,this._viewType=null,this.onRoomWidgetTrophyUpdateEvent=this.onRoomWidgetTrophyUpdateEvent.bind(this)}registerUpdateEvents(t){t&&(t.addEventListener(ue.TROPHY_DATA,this.onRoomWidgetTrophyUpdateEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(ue.TROPHY_DATA,this.onRoomWidgetTrophyUpdateEvent),super.unregisterUpdateEvents(t))}onRoomWidgetTrophyUpdateEvent(t){t&&this._ngZone.run(()=>{this._visible=!0,this._color=t.color-1,this._ownerName=t.name,this._date=t.date,this._message=t.message,this._viewType=t.viewType,(this._color<0||this._color>2)&&(this._color=0)})}hide(){this._visible=!1}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(t){this._visible=t}get color(){return this._color}get ownerName(){return this._ownerName}get date(){return this._date}get message(){return this._message}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-furniture-trophy-compontent"]],features:[i.Hb],decls:1,vars:1,consts:[["noMemory","true",3,"bringToTop","draggable","class",4,"ngIf"],["noMemory","true",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3","d-flex","flex-column"],[1,"p-0","trophy-message"],[1,"mt-auto"],[1,"mb-1"],[1,"d-flex","justify-content-between","align-items-center"],[1,"p-0","mb-0"]],template:function(t,e){1&t&&i.Uc(0,Ln,17,9,"div",0),2&t&&i.yc("ngIf",e.visible)},directives:[p.n,li,vi],pipes:[Fs],encapsulation:2}),t})(),Pn=(()=>{class t extends X{constructor(e,s,i,n,r,a,o,c,_,h){super(t.PET_INFO),this._Str_6689=e,this._Str_20932=s,this._name=i,this._id=n,this._image=r,this._Str_10121=a,this._ownerId=o,this._ownerName=c,this._Str_2775=_,this._unknownRarityLevel=h}get name(){return this._name}get image(){return this._image}get id(){return this._id}get _Str_4355(){return this._Str_6689}get _Str_14767(){return this._Str_20932}get _Str_5175(){return this._Str_10121}get ownerId(){return this._ownerId}get ownerName(){return this._ownerName}get _Str_2707(){return this._Str_2775}get unknownRarityLevel(){return this._unknownRarityLevel}get level(){return this._level}set level(t){this._level=t}get maximumLevel(){return this._maximumLevel}set maximumLevel(t){this._maximumLevel=t}get experience(){return this._experience}set experience(t){this._experience=t}get levelExperienceGoal(){return this._levelExperienceGoal}set levelExperienceGoal(t){this._levelExperienceGoal=t}get energy(){return this._energy}set energy(t){this._energy=t}get maximumEnergy(){return this._maximumEnergy}set maximumEnergy(t){this._maximumEnergy=t}get happyness(){return this._happyness}set happyness(t){this._happyness=t}get maximumHappyness(){return this._maximumHappyness}set maximumHappyness(t){this._maximumHappyness=t}get _Str_2985(){return this._Str_3973}set _Str_2985(t){this._Str_3973=t}get _Str_5114(){return this._Str_11149}set _Str_5114(t){this._Str_11149=t}get respect(){return this._respect}set respect(t){this._respect=t}get age(){return this._age}set age(t){this._age=t}get saddle(){return this._saddle}set saddle(t){this._saddle=t}get rider(){return this._rider}set rider(t){this._rider=t}get breedable(){return this._breedable}set breedable(t){this._breedable=t}get _Str_3307(){return this._Str_4460}set _Str_3307(t){this._Str_4460=t}get publiclyRideable(){return this._publiclyRideable}set publiclyRideable(t){this._publiclyRideable=t}get fullyGrown(){return this._fullyGrown}set fullyGrown(t){this._fullyGrown=t}get dead(){return this._dead}set dead(t){this._dead=t}get rarityLevel(){return this._rarityLevel}set rarityLevel(t){this._rarityLevel=t}get maximumTimeToLive(){return this._maximumTimeToLive}set maximumTimeToLive(t){this._maximumTimeToLive=t}get remainingTimeToLive(){return this._remainingTimeToLive}set remainingTimeToLive(t){this._remainingTimeToLive=t}get remainingGrowTime(){return this._remainingGrowTime}set remainingGrowTime(t){this._remainingGrowTime=t}get publiclyBreedable(){return this._publiclyBreedable}set publiclyBreedable(t){this._publiclyBreedable=t}}return t.PET_INFO="RWPIUE_PET_INFO",t})();class Fn{constructor(){this._id=0,this._category=0,this._name="",this._description="",this._imageUrl="",this._purchaseOfferId=-1,this._extraParam="",this._stuffData=null,this._ownerId=0,this._ownerName="",this._rentOfferId=-1,this._availableForBuildersClub=!1}get id(){return this._id}set id(t){this._id=t}get category(){return this._category}set category(t){this._category=t}get name(){return this._name}set name(t){this._name=t}get description(){return this._description}set description(t){this._description=t}get imageUrl(){return this._imageUrl}set imageUrl(t){this._imageUrl=t}get purchaseOfferId(){return this._purchaseOfferId}set purchaseOfferId(t){this._purchaseOfferId=t}get extraParam(){return this._extraParam}set extraParam(t){this._extraParam=t}get stuffData(){return this._stuffData}set stuffData(t){this._stuffData=t}set groupId(t){this._groupId=t}get groupId(){return this._groupId}get ownerId(){return this._ownerId}set ownerId(t){this._ownerId=t}get ownerName(){return this._ownerName}set ownerName(t){this._ownerName=t}get rentOfferId(){return this._rentOfferId}set rentOfferId(t){this._rentOfferId=t}get availableForBuildersClub(){return this._availableForBuildersClub}set availableForBuildersClub(t){this._availableForBuildersClub=t}populate(t){this.id=t.id,this.category=t.category,this.name=t.name,this.description=t.description,this.imageUrl=t.image.src,this.purchaseOfferId=t.purchaseOfferId,this.extraParam=t.extraParam,this.stuffData=t.stuffData,this.groupId=t.groupId,this.ownerName=t.ownerName,this.ownerId=t.ownerId,this.rentOfferId=t.rentOfferId,this.availableForBuildersClub=t.availableForBuildersClub}}class kn{constructor(){this._name="",this._petId=-1}get name(){return this._name}get id(){return this._petId}get type(){return this._type}get race(){return this._race}get image(){return this._image}get _Str_5175(){return this._isOwnPet}get _Str_2481(){return this._ownerId}get ownerName(){return this._ownerName}get _Str_5114(){return this._canRemovePet}get age(){return this._age}get unknownRarityLevel(){return this._breedId}get _Str_3307(){return this._skillTresholds}get publiclyRideable(){return this._accessRights}get level(){return this._level}get _Str_4276(){return this._levelMax}get experience(){return this._experience}get _Str_4095(){return this._experienceMax}get energy(){return this._energy}get _Str_3966(){return this._energyMax}get happyness(){return this._nutrition}get _Str_4448(){return this._nutritionMax}get _Str_6943(){return this._petRespect}get _Str_2707(){return this._roomIndex}get rarityLevel(){return this._rarityLevel}get maximumTimeToLive(){return this._maxWellBeingSeconds}get remainingTimeToLive(){return this._remainingWellBeingSeconds}get remainingGrowTime(){return this._remainingGrowingSeconds}get publiclyBreedable(){return this._hasBreedingPermission}populate(t){this._name=t.name,this._petId=t.id,this._type=t._Str_4355,this._race=t._Str_14767,this._image=t.image,this._isOwnPet=t._Str_5175,this._ownerId=t.ownerId,this._ownerName=t.ownerName,this._canRemovePet=t._Str_5114,this._level=t.level,this._levelMax=t.maximumLevel,this._experience=t.experience,this._experienceMax=t.levelExperienceGoal,this._energy=t.energy,this._energyMax=t.maximumEnergy,this._nutrition=t.happyness,this._nutritionMax=t.maximumHappyness,this._petRespect=t.respect,this._roomIndex=t._Str_2707,this._age=t.age,this._breedId=t.unknownRarityLevel,this._skillTresholds=t._Str_3307,this._accessRights=t.publiclyRideable,this._maxWellBeingSeconds=t.maximumTimeToLive,this._remainingWellBeingSeconds=t.remainingTimeToLive,this._remainingGrowingSeconds=t.remainingGrowTime,this._rarityLevel=t.rarityLevel,this._hasBreedingPermission=t.publiclyBreedable}}class Wn{constructor(){this._id=0,this._name="",this._figure="",this._motto="",this._badges=[],this._carryItem=0,this._roomIndex=-1,this._ownerId=-1,this._ownerName="",this._amIOwner=!1,this._amIAnyRoomController=!1,this._botSkills=[]}get id(){return this._id}set id(t){this._id=t}get name(){return this._name}set name(t){this._name=t}get figure(){return this._figure}set figure(t){this._figure=t}get motto(){return this._motto}set motto(t){this._motto=t}get badges(){return this._badges.slice()}set badges(t){this._badges=t}get carryItem(){return this._carryItem}set carryItem(t){this._carryItem=t}get roomIndex(){return this._roomIndex}set roomIndex(t){this._roomIndex=t}get ownerId(){return this._ownerId}set ownerId(t){this._ownerId=t}get ownerName(){return this._ownerName}set ownerName(t){this._ownerName=t}get amIOwner(){return this._amIOwner}set amIOwner(t){this._amIOwner=t}get amIAnyRoomController(){return this._amIAnyRoomController}set amIAnyRoomController(t){this._amIAnyRoomController=t}get botSkills(){return this._botSkills.slice()}set botSkills(t){this._botSkills=t}populate(t){this.id=t.id,this.name=t.name,this.figure=t.figure,this.motto=t.motto,this.badges=t.badges,this.carryItem=t.carryId,this.roomIndex=t.roomIndex,this.ownerId=t.ownerId,this.ownerName=t.ownerName,this.amIOwner=t._Str_3246,this.amIAnyRoomController=t._Str_3529,this.botSkills=t.botSkills}}class Vn{constructor(){this._id=0,this._name="",this._figure="",this._motto="",this._badges=[],this._groupId=0,this._groupName="",this._groupBadgeId="",this._activityPoints=0,this._respectLeft=0,this._petRespectLeft=0,this._carryItem=0,this._roomIndex=-1,this._type=""}get id(){return this._id}set id(t){this._id=t}get name(){return this._name}set name(t){this._name=t}get figure(){return this._figure}set figure(t){this._figure=t}get motto(){return this._motto}set motto(t){this._motto=t}get badges(){return this._badges.slice()}set badges(t){this._badges=t}get groupId(){return this._groupId}set groupId(t){this._groupId=t}get groupName(){return this._groupName}set groupName(t){this._groupName=t}get groupBadgeId(){return this._groupBadgeId}set groupBadgeId(t){this._groupBadgeId=t}get activityPoints(){return this._activityPoints}set activityPoints(t){this._activityPoints=t}get respectLeft(){return this._respectLeft}set respectLeft(t){this._respectLeft=t}get petRespectLeft(){return this._petRespectLeft}set petRespectLeft(t){this._petRespectLeft=t}get carryItem(){return this._carryItem}set carryItem(t){this._carryItem=t}get roomIndex(){return this._roomIndex}set roomIndex(t){this._roomIndex=t}get type(){return this._type}set type(t){this._type=t}getIsBot(){return this.type===Oe.BOT}populate(t){this.id=t.webID,this.name=t.name,this.figure=t.figure,this.motto=t.motto,this.badges=t.badges,this.groupId=t.groupId,this.groupName=t.groupName,this.groupBadgeId=t.groupBadgeId,this.activityPoints=t.activityPoints,this.respectLeft=t.respectLeft,this.petRespectLeft=0,this.carryItem=t.carryId,this.roomIndex=t.roomIndex,this.type=t.type}}let Gn=(()=>{class t{}return t.USER=1,t.BOT=2,t.RENTABLE_BOT=3,t.PET=4,t.FURNI=5,t})();class Hn{constructor(){this.widget=null}hide(){this.widget.close()}update(t){}get type(){return-1}}let Bn=(()=>{class t{constructor(){this.badge="",this.isGroup=!1,this.hover=!0}get badgeUrl(){return this.isGroup?u.a.instance.getConfiguration("badge.asset.group.url").replace("%badgedata%",this.badge):u.a.instance.getConfiguration("badge.asset.url").replace("%badgename%",this.badge)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-badge"]],inputs:{badge:"badge",isGroup:"isGroup",hover:"hover"},decls:1,vars:1,consts:[[3,"src"]],template:function(t,e){1&t&&i.Zb(0,"img",0),2&t&&i.yc("src",e.badgeUrl,i.Nc)},encapsulation:2}),t})();function jn(t,e){if(1&t&&i.Zb(0,"nitro-badge",17),2&t){const t=i.qc().$implicit;i.yc("badge",t)}}function Kn(t,e){if(1&t&&(i.dc(0,"div",15),i.Uc(1,jn,1,1,"nitro-badge",16),i.cc()),2&t){const t=e.$implicit;i.Kb(1),i.yc("ngIf",""!==t)}}function zn(t,e){if(1&t&&(i.dc(0,"div",18),i.dc(1,"span",19),i.Wc(2),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(2),i.Xc(t.userData.motto)}}function Yn(t,e){1&t&&(i.dc(0,"p",20),i.Wc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Xc(i.sc(2,1,"infostand.text.handitem")))}let Xn=(()=>{class t extends Hn{constructor(){super(...arguments),this.userData=null}update(t){t&&t.carryId>0&&u.a.instance.localization.registerParameter("infostand.text.handitem","item",u.a.instance.getLocalization("handitem"+t.carryId))}get type(){return Gn.BOT}}return t.\u0275fac=function(e){return Zn(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:16,vars:6,consts:[[1,"infostand","d-flex","flex-column","btn","btn-primary","rounded","p-0","nohover"],[1,"d-flex","align-items-center","justify-content-between","pt-3","px-3","w-100"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3","w-100"],[1,"d-flex","flex-nowrap"],[1,"body-image","bot"],["nitro-avatar-image","",3,"figure","direction"],[1,"flex-grow-1"],[1,"badge-container"],["class","badge-item",4,"ngFor","ngForOf"],[1,"d-flex","mt-2"],["class","motto-container",4,"ngIf"],[1,"d-flex","flex-column","mt-2"],["class","badge badge-secondary mb-0",4,"ngIf"],[1,"badge-item"],[3,"badge",4,"ngIf"],[3,"badge"],[1,"motto-container"],[1,"motto"],[1,"badge","badge-secondary","mb-0"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Wc(2),i.dc(3,"button",2),i.nc("click",function(){return e.hide()}),i.Zb(4,"i",3),i.cc(),i.cc(),i.dc(5,"div",4),i.dc(6,"div",5),i.dc(7,"div",6),i.Zb(8,"div",7),i.cc(),i.dc(9,"div",8),i.dc(10,"div",9),i.Uc(11,Kn,2,1,"div",10),i.cc(),i.cc(),i.cc(),i.dc(12,"div",11),i.Uc(13,zn,3,1,"div",12),i.cc(),i.dc(14,"div",13),i.Uc(15,Yn,3,3,"p",14),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Yc(" ",e.userData.name," "),i.Kb(6),i.yc("figure",e.userData.figure)("direction",4),i.Kb(3),i.yc("ngForOf",e.userData.badges),i.Kb(2),i.yc("ngIf",""!==e.userData.motto),i.Kb(2),i.yc("ngIf",e.userData.carryItem>0))},directives:[qi,p.m,p.n,Bn],pipes:[Fs],encapsulation:2}),t})();const Zn=i.fc(Xn);let qn=(()=>{class t{}return t._Str_21805=0,t._Str_18194=1,t._Str_18353=2,t})();function Qn(t,e){if(1&t){const t=i.ec();i.bc(0),i.dc(1,"p",16),i.Wc(2),i.cc(),i.dc(3,"input",17),i.nc("ngModelChange",function(s){i.Lc(t);const n=e.index;return i.qc(2).furniSettingsValues[n]=s}),i.cc(),i.ac()}if(2&t){const t=e.index,s=i.qc(2);i.Kb(2),i.Yc(" ",s.furniSettingsKeys[t]," "),i.Kb(1),i.yc("ngModel",s.furniSettingsValues[t])}}function Jn(t,e){if(1&t&&(i.dc(0,"div",14),i.Uc(1,Qn,4,2,"ng-container",15),i.cc()),2&t){const t=i.qc();i.Kb(1),i.yc("ngForOf",t.furniSettingsKeys)}}function $n(t,e){if(1&t){const t=i.ec();i.dc(0,"button",18),i.nc("click",function(){return i.Lc(t),i.qc().processButtonAction("move")}),i.Wc(1),i.rc(2,"translate"),i.cc()}2&t&&(i.Kb(1),i.Yc(" ",i.sc(2,1,"infostand.button.move")," "))}function tr(t,e){if(1&t){const t=i.ec();i.dc(0,"button",18),i.nc("click",function(){return i.Lc(t),i.qc().processButtonAction("rotate")}),i.Wc(1),i.rc(2,"translate"),i.cc()}2&t&&(i.Kb(1),i.Yc(" ",i.sc(2,1,"infostand.button.rotate")," "))}function er(t,e){if(1&t){const t=i.ec();i.dc(0,"button",18),i.nc("click",function(){return i.Lc(t),i.qc().processButtonAction("pickup")}),i.Wc(1),i.rc(2,"translate"),i.cc()}if(2&t){const t=i.qc();i.Kb(1),i.Yc(" ",i.sc(2,1,1===t.pickupMode?"infostand.button.eject":"infostand.button.pickup")," ")}}function sr(t,e){if(1&t){const t=i.ec();i.dc(0,"button",18),i.nc("click",function(){return i.Lc(t),i.qc().processButtonAction("use")}),i.Wc(1),i.rc(2,"translate"),i.cc()}2&t&&(i.Kb(1),i.Yc(" ",i.sc(2,1,"infostand.button.use")," "))}function ir(t,e){if(1&t){const t=i.ec();i.dc(0,"button",19),i.nc("click",function(){return i.Lc(t),i.qc().processButtonAction("save_branding_configuration")}),i.Wc(1),i.rc(2,"translate"),i.cc()}2&t&&(i.Kb(1),i.Yc(" ",i.sc(2,1,"save")," "))}let nr=(()=>{class t extends Hn{constructor(){super(...arguments),this.furniData=null,this.pickupMode=0,this.canMove=!1,this.canRotate=!1,this.canUse=!1,this.updateCount=0,this.furniSettingsKeys=[],this.furniSettingsValues=[]}update(t){this.furniSettingsKeys=[],this.furniSettingsValues=[];let e=!1,s=!1,i=!1,n=!1;const r=t.roomControllerLevel>=B.a.GUEST;if((r||t.isOwner||t.isRoomOwner||t.isAnyRoomOwner)&&(e=!0,s=!t.isWallItem,t.roomControllerLevel>=B.a.MODERATOR&&(n=!0)),(t.usagePolicy===qn._Str_18353||t.usagePolicy===qn._Str_18194&&r||t.extraParam===Ie.a.JUKEBOX&&r||t.extraParam==Ie.a.USABLE_PRODUCT&&r)&&(i=!0),n&&t.extraParam){const e=t.extraParam.substr(Ie.a.BRANDING_OPTIONS.length);if(e){const t=e.split("\t");for(const e of t){const t=e.split("=");t&&2===t.length&&(this.furniSettingsKeys.push(t[0]),this.furniSettingsValues.push(t[1]))}}}this.canMove=e,this.canRotate=s,this.canUse=i,this.togglePickupButton(t),this.updateCount++}togglePickupButton(e){e&&(this.pickupMode=t.PICKUP_MODE_NONE,e.isOwner||e.isAnyRoomOwner?this.pickupMode=t.PICKUP_MODE_FULL:(e.isRoomOwner||e.roomControllerLevel>=B.a.GUILD_ADMIN)&&(this.pickupMode=t.PICKUP_MODE_EJECT),e.isStickie&&(this.pickupMode=t.PICKUP_MODE_NONE))}processButtonAction(e){if(!e||""===e)return;let s=null,i=null;switch(e){case"move":s=Ae.RWFAM_MOVE;break;case"rotate":s=Ae.RWFUAM_ROTATE;break;case"pickup":s=this.pickupMode===t.PICKUP_MODE_FULL?Ae.RWFAM_PICKUP:Ae.RWFAM_EJECT;break;case"use":s=Ae.RWFAM_USE;break;case"save_branding_configuration":s=Ae.RWFAM_SAVE_STUFF_DATA,i=this.getSettingsAsString()}s&&this.widget.messageListener.processWidgetMessage(new Ae(s,this.furniData.id,this.furniData.category,this.furniData.purchaseOfferId,i))}getSettingsAsString(){if(!this.furniSettingsKeys.length||!this.furniSettingsValues.length)return"";let t="",e=0;for(;e<this.furniSettingsKeys.length;)t=t+(this.furniSettingsKeys[e]+"=")+this.furniSettingsValues[e]+"\t",e++;return t}get type(){return Gn.FURNI}}return t.PICKUP_MODE_NONE=0,t.PICKUP_MODE_EJECT=1,t.PICKUP_MODE_FULL=2,t.\u0275fac=function(e){return rr(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:20,vars:13,consts:[[1,"d-flex","flex-column","align-items-end"],[1,"infostand","d-flex","flex-column","btn","btn-primary","rounded","p-0","nohover","white",2,"color","#4d4d4d","font-weight","bold","box-shadow","none","border","none","border-radius","20px !important","max-width","initial"],[1,"d-flex","align-items-center","justify-content-between","pt-3","px-3","w-100"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3","w-100"],[1,"w-100"],[1,"d-block","mx-auto",3,"src"],[1,"d-flex","flex-column","mt-2"],[1,"badge","badge-secondary","mt-2","mb-0","text-wrap",2,"border-radius","15px","background-color","rgb(162 162 162)"],["class","mt-3",4,"ngIf"],[1,"button-container","btn-group","mt-2"],["type","button","class","btn btn-primary infostand-button",3,"click",4,"ngIf"],["class","btn btn-primary infostand-button",3,"click",4,"ngIf"],[1,"mt-3"],[4,"ngFor","ngForOf"],[1,"badge","badge-secondary","mb-2"],["type","text",1,"form-control","rounded","mb-2",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary","infostand-button",3,"click"],[1,"btn","btn-primary","infostand-button",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"div",2),i.Wc(3),i.dc(4,"button",3),i.nc("click",function(){return e.hide()}),i.Zb(5,"i",4),i.cc(),i.cc(),i.dc(6,"div",5),i.dc(7,"div",6),i.Zb(8,"img",7),i.cc(),i.dc(9,"div",8),i.dc(10,"p",9),i.Wc(11),i.rc(12,"translate"),i.cc(),i.cc(),i.Uc(13,Jn,2,1,"div",10),i.dc(14,"div",11),i.Uc(15,$n,3,3,"button",12),i.Uc(16,tr,3,3,"button",12),i.Uc(17,er,3,3,"button",12),i.Uc(18,sr,3,3,"button",12),i.Uc(19,ir,3,3,"button",13),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Yc(" ",e.furniData.name," "),i.Kb(5),i.yc("src",e.furniData.imageUrl,i.Nc),i.Kb(3),i.Yc(" ",i.uc(12,9,"furni.owner","name",e.furniData.ownerName)," "),i.Kb(2),i.yc("ngIf",e.furniSettingsKeys.length&&e.furniSettingsValues.length&&e.furniSettingsKeys.length===e.furniSettingsValues.length),i.Kb(2),i.yc("ngIf",e.canMove),i.Kb(1),i.yc("ngIf",e.canRotate),i.Kb(1),i.yc("ngIf",0!==e.pickupMode),i.Kb(1),i.yc("ngIf",e.canUse),i.Kb(1),i.yc("ngIf",e.furniSettingsKeys.length&&e.furniSettingsValues.length&&e.furniSettingsKeys.length===e.furniSettingsValues.length))},directives:[p.n,p.m,Ti.b,Ti.j,Ti.l],pipes:[Fs],encapsulation:2}),t})();const rr=i.fc(nr);let ar=(()=>{class t extends Hn{get type(){return Gn.PET}}return t.\u0275fac=function(e){return or(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-infostand-pet-component"]],features:[i.Hb],decls:2,vars:0,consts:[[1,"nitro-room-infostand-pet-component"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Wc(1," pet "),i.cc())},encapsulation:2}),t})();const or=i.fc(ar);function cr(t,e){if(1&t&&i.Zb(0,"nitro-badge",18),2&t){const t=i.qc().$implicit;i.yc("badge",t)}}function _r(t,e){if(1&t&&(i.dc(0,"div",16),i.Uc(1,cr,1,1,"nitro-badge",17),i.cc()),2&t){const t=e.$implicit;i.Kb(1),i.yc("ngIf",""!==t)}}function hr(t,e){if(1&t&&(i.dc(0,"div",19),i.dc(1,"span",20),i.Wc(2),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(2),i.Xc(t.botData.motto)}}function lr(t,e){1&t&&(i.dc(0,"p",21),i.Wc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Xc(i.sc(2,1,"infostand.text.botowner")))}function ur(t,e){1&t&&(i.dc(0,"p",22),i.Wc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Xc(i.sc(2,1,"infostand.text.handitem")))}let dr=(()=>{class t extends Hn{constructor(){super(...arguments),this.botData=null}update(t){t&&(u.a.instance.localization.registerParameter("infostand.text.botowner","name",u.a.instance.getLocalization(this.botData.ownerName)),t.carryId>0&&u.a.instance.localization.registerParameter("infostand.text.handitem","item",u.a.instance.getLocalization("handitem"+t.carryId)))}get type(){return Gn.RENTABLE_BOT}}return t.\u0275fac=function(e){return gr(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:17,vars:7,consts:[[1,"infostand","d-flex","flex-column","btn","btn-primary","rounded","p-0","nohover"],[1,"d-flex","align-items-center","justify-content-between","pt-3","px-3","w-100"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3","w-100"],[1,"d-flex","flex-nowrap"],[1,"body-image","bot"],["nitro-avatar-image","",3,"figure","direction"],[1,"flex-grow-1"],[1,"badge-container"],["class","badge-item",4,"ngFor","ngForOf"],[1,"d-flex","mt-2"],["class","motto-container",4,"ngIf"],[1,"d-flex","flex-column","mt-2"],["class","badge badge-secondary mb-0",4,"ngIf"],["class","badge badge-secondary mt-0 mb-0",4,"ngIf"],[1,"badge-item"],[3,"badge",4,"ngIf"],[3,"badge"],[1,"motto-container"],[1,"motto"],[1,"badge","badge-secondary","mb-0"],[1,"badge","badge-secondary","mt-0","mb-0"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Wc(2),i.dc(3,"button",2),i.nc("click",function(){return e.hide()}),i.Zb(4,"i",3),i.cc(),i.cc(),i.dc(5,"div",4),i.dc(6,"div",5),i.dc(7,"div",6),i.Zb(8,"div",7),i.cc(),i.dc(9,"div",8),i.dc(10,"div",9),i.Uc(11,_r,2,1,"div",10),i.cc(),i.cc(),i.cc(),i.dc(12,"div",11),i.Uc(13,hr,3,1,"div",12),i.cc(),i.dc(14,"div",13),i.Uc(15,lr,3,3,"p",14),i.Uc(16,ur,3,3,"p",15),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Yc(" ",e.botData.name," "),i.Kb(6),i.yc("figure",e.botData.figure)("direction",4),i.Kb(3),i.yc("ngForOf",e.botData.badges),i.Kb(2),i.yc("ngIf",""!==e.botData.motto),i.Kb(2),i.yc("ngIf",e.botData.ownerId>0),i.Kb(1),i.yc("ngIf",e.botData.carryItem>0))},directives:[qi,p.m,p.n,Bn],pipes:[Fs],encapsulation:2}),t})();const gr=i.fc(dr);function mr(t,e){if(1&t&&i.Zb(0,"nitro-badge",19),2&t){const t=i.qc().$implicit;i.yc("badge",t)}}function pr(t,e){if(1&t&&(i.dc(0,"div",17),i.Uc(1,mr,1,1,"nitro-badge",18),i.cc()),2&t){const t=e.$implicit;i.Kb(1),i.yc("ngIf",""!==t)}}function fr(t,e){if(1&t){const t=i.ec();i.dc(0,"div",20),i.Zb(1,"i",21),i.dc(2,"textarea",22),i.nc("ngModelChange",function(e){return i.Lc(t),i.qc().userData.motto=e})("keyup",function(e){return i.Lc(t),i.qc().resizeTextArea(e)})("keydown.enter",function(e){return i.Lc(t),i.qc().saveMotto(e)}),i.rc(3,"translate"),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(2),i.zc("placeholder",i.sc(3,2,"infostand.motto.change")),i.yc("ngModel",t.userData.motto)}}function Er(t,e){if(1&t&&(i.dc(0,"div",23),i.dc(1,"span",24),i.Wc(2),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(2),i.Xc(t.userData.motto)}}let Sr=(()=>{class t extends Hn{constructor(){super(...arguments),this.userData=null}update(t){t&&t.carryId>0&&u.a.instance.localization.registerParameter("infostand.text.handitem","item",u.a.instance.getLocalization("handitem"+t.carryId))}resizeTextArea(t){if(!t)return;const e=t.target;e&&(e.style.height="0px",e.style.height=e.scrollHeight+"px")}saveMotto(t){this.userData.motto.length>38||(t.target.blur(),this.widget.messageListener.processWidgetMessage(new ye(this.userData.motto)))}visitProfile(){u.a.instance.createLinkEvent("profile/goto/"+this.userData.id)}get isOwnProfile(){return this.userData.type===Oe.OWN_USER}get type(){return Gn.USER}}return t.\u0275fac=function(e){return Ir(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:18,vars:6,consts:[[1,"white","infostand","d-flex","flex-column","btn","btn-primary","rounded","p-0","nohover"],[1,"d-flex","align-items-center","justify-content-between","pt-3","px-3","w-100"],[1,"infostand-profile-icon","badge","badge-secondary","badge-sm",3,"click"],[1,"fas","fa-user"],[1,"infostand-username"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3","w-100"],[1,"d-flex","flex-nowrap"],[1,"body-image",2,"background","transparent"],["nitro-avatar-image","",3,"figure","direction"],[1,"flex-grow-1"],[1,"badge-container"],["class","badge-item",4,"ngFor","ngForOf"],[1,"d-flex","mt-2"],["class","motto-container","style","background-color: rgb(162 162 162); border-radius: 15px",4,"ngIf"],["class","motto-container",4,"ngIf"],[1,"badge-item"],[3,"badge",4,"ngIf"],[3,"badge"],[1,"motto-container",2,"background-color","rgb(162 162 162)","border-radius","15px"],[1,"icon","pencil-icon"],["maxlength","38","wrap","soft","rows","1",1,"motto-input",3,"ngModel","placeholder","ngModelChange","keyup","keydown.enter"],[1,"motto-container"],[1,"motto"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"div",2),i.nc("click",function(){return e.visitProfile()}),i.Zb(3,"i",3),i.cc(),i.dc(4,"div",4),i.Wc(5),i.cc(),i.dc(6,"button",5),i.nc("click",function(){return e.hide()}),i.Zb(7,"i",6),i.cc(),i.cc(),i.dc(8,"div",7),i.dc(9,"div",8),i.dc(10,"div",9),i.Zb(11,"div",10),i.cc(),i.dc(12,"div",11),i.dc(13,"div",12),i.Uc(14,pr,2,1,"div",13),i.cc(),i.cc(),i.cc(),i.dc(15,"div",14),i.Uc(16,fr,4,4,"div",15),i.Uc(17,Er,3,1,"div",16),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(5),i.Xc(e.userData.name),i.Kb(6),i.yc("figure",e.userData.figure)("direction",4),i.Kb(3),i.yc("ngForOf",e.userData.badges),i.Kb(2),i.yc("ngIf",e.isOwnProfile),i.Kb(1),i.yc("ngIf",!e.isOwnProfile))},directives:[qi,p.m,p.n,Bn,Ti.b,Ti.g,Ti.j,Ti.l],pipes:[Fs],encapsulation:2}),t})();const Ir=i.fc(Sr),Rr=["infostandsContainer"];let br=(()=>{class t extends ws{constructor(t,e,s){super(),this._inventoryService=t,this._componentFactoryResolver=e,this._ngZone=s,this._lastComponent=null,this._furniData=new Fn,this._userData=new Vn,this._petData=new kn,this._botData=new Wn,this.objectSelectedHandler=this.objectSelectedHandler.bind(this),this.objectDeselectedHandler=this.objectDeselectedHandler.bind(this),this.objectRemovedHandler=this.objectRemovedHandler.bind(this),this.userInfostandUpdateHandler=this.userInfostandUpdateHandler.bind(this),this.botInfostandUpdateHandler=this.botInfostandUpdateHandler.bind(this),this.furniInfostandUpdateHandler=this.furniInfostandUpdateHandler.bind(this),this.rentableBotInfostandUpdateHandler=this.rentableBotInfostandUpdateHandler.bind(this),this.petInfostandUpdateHandler=this.petInfostandUpdateHandler.bind(this)}registerUpdateEvents(t){t&&(t.addEventListener(q.OBJECT_SELECTED,this.objectSelectedHandler),t.addEventListener(q.OBJECT_DESELECTED,this.objectDeselectedHandler),t.addEventListener(q.USER_REMOVED,this.objectRemovedHandler),t.addEventListener(q.FURNI_REMOVED,this.objectRemovedHandler),t.addEventListener(Oe.OWN_USER,this.userInfostandUpdateHandler),t.addEventListener(Oe.PEER,this.userInfostandUpdateHandler),t.addEventListener(Oe.BOT,this.botInfostandUpdateHandler),t.addEventListener(ve.FURNI,this.furniInfostandUpdateHandler),t.addEventListener(Te.RENTABLE_BOT,this.rentableBotInfostandUpdateHandler),t.addEventListener(Pn.PET_INFO,this.petInfostandUpdateHandler),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(q.OBJECT_SELECTED,this.objectSelectedHandler),t.removeEventListener(q.OBJECT_DESELECTED,this.objectDeselectedHandler),t.removeEventListener(q.USER_REMOVED,this.objectRemovedHandler),t.removeEventListener(q.FURNI_REMOVED,this.objectRemovedHandler),t.removeEventListener(Oe.OWN_USER,this.userInfostandUpdateHandler),t.removeEventListener(Oe.PEER,this.userInfostandUpdateHandler),t.removeEventListener(Oe.BOT,this.botInfostandUpdateHandler),t.removeEventListener(ve.FURNI,this.furniInfostandUpdateHandler),t.removeEventListener(Te.RENTABLE_BOT,this.rentableBotInfostandUpdateHandler),t.removeEventListener(Pn.PET_INFO,this.petInfostandUpdateHandler),super.unregisterUpdateEvents(t))}close(){this.infostandsContainer.length&&this.infostandsContainer.remove(),this._lastComponent=null}objectSelectedHandler(t){this.messageListener.processWidgetMessage(new ct(ct.GET_OBJECT_INFO,t.id,t.category))}objectDeselectedHandler(t){this._ngZone.run(()=>this.close())}objectRemovedHandler(t){let e=!1;const s=this._lastComponent&&this._lastComponent.instance.type||-1;if(-1===s&&(e=!0),s>0)switch(t.type){case q.FURNI_REMOVED:s===Gn.FURNI&&t.id===this._furniData.id&&(e=!0);break;case q.USER_REMOVED:(s===Gn.USER&&t.id===this._userData.id||s===Gn.PET&&t.id===this._petData._Str_2707||s===Gn.BOT&&t.id===this._userData.id||s===Gn.RENTABLE_BOT&&t.id===this._botData.id)&&(e=!0)}e&&this._ngZone.run(()=>this.close())}userInfostandUpdateHandler(t){t&&this._ngZone.run(()=>{this._userData.populate(t);const e=this.getInfoStand(t);e&&(e.userData=this._userData,e.update(t))})}botInfostandUpdateHandler(t){t&&this._ngZone.run(()=>{this._userData.populate(t);const e=this.getInfoStand(t);e&&(e.userData=this._userData,e.update(t))})}furniInfostandUpdateHandler(t){t&&this._ngZone.run(()=>{this._furniData.populate(t);const e=this.getInfoStand(t);e&&(e.furniData=this._furniData,e.update(t))})}rentableBotInfostandUpdateHandler(t){t&&this._ngZone.run(()=>{this._botData.populate(t);const e=this.getInfoStand(t);e&&(e.botData=this._botData,e.update(t))})}petInfostandUpdateHandler(t){t&&this._ngZone.run(()=>{this._petData.populate(t);const e=this.getInfoStand(t);e&&(e.petData=this._petData,e.update(t))})}updateUserBadges(t,e){t===this._userData.id&&(this._userData.getIsBot()||this._ngZone.run(()=>this._userData.badges=e))}getInfoStand(t){const e=this.getInfoStandComponentType(t);if(!e)return null;if(this._lastComponent&&this._lastComponent.instance instanceof e)return this._lastComponent.instance;this.infostandsContainer.length&&this.infostandsContainer.remove();const s=this._componentFactoryResolver.resolveComponentFactory(e);let i=null;return s&&(i=this.infostandsContainer.createComponent(s)),this._lastComponent=i,i?(i.instance.widget=this,i.instance):null}get furniData(){return this._furniData}getInfoStandComponentType(t){if(!t)return null;switch(t.type){case Oe.BOT:return Xn;case ve.FURNI:return nr;case Pn.PET_INFO:return ar;case Te.RENTABLE_BOT:return dr;case Oe.OWN_USER:case Oe.PEER:return Sr}return null}get handler(){return this.widgetHandler}get inventoryTrading(){return this._inventoryService.controller.tradeService}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(nn),i.Yb(i.m),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&i.cd(Rr,1,i.Z),2&t){let t;i.Hc(t=i.oc())&&(e.infostandsContainer=t.first)}},features:[i.Hb],decls:3,vars:0,consts:[[1,"nitro-room-infostand-component"],["infostandsContainer",""]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Zb(1,"div",null,1),i.cc())},encapsulation:2}),t})();function vr(t,e){if(1&t){const t=i.ec();i.bc(0),i.dc(1,"div",9),i.dc(2,"button",10),i.Wc(3),i.cc(),i.dc(4,"button",11),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc(2).accept(s)}),i.Zb(5,"i",12),i.cc(),i.dc(6,"button",13),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc(2).deny(s)}),i.Zb(7,"i",5),i.cc(),i.cc(),i.ac()}if(2&t){const t=e.$implicit;i.Kb(3),i.Yc(" ",t," ")}}function Tr(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"h6",3),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",4),i.nc("click",function(){return i.Lc(t),i.qc().hide()}),i.Zb(6,"i",5),i.cc(),i.cc(),i.dc(7,"div",6),i.dc(8,"perfect-scrollbar",7),i.Uc(9,vr,8,1,"ng-container",8),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Xc(i.sc(4,2,"widgets.doorbell.title")),i.Kb(6),i.yc("ngForOf",t.users)}}let Or=(()=>{class t extends ws{constructor(t){super(),this._ngZone=t,this._visible=!1,this._users=[],this.onRoomRinging=this.onRoomRinging.bind(this),this.onRoomAcceptedAndRejected=this.onRoomAcceptedAndRejected.bind(this)}registerUpdateEvents(t){t&&(t.addEventListener(Mt.RWDE_RINGING,this.onRoomRinging),t.addEventListener(Mt.REJECTED,this.onRoomAcceptedAndRejected),t.addEventListener(Mt.RWDE_ACCEPTED,this.onRoomAcceptedAndRejected),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(Mt.RWDE_RINGING,this.onRoomRinging),t.removeEventListener(Mt.REJECTED,this.onRoomAcceptedAndRejected),t.removeEventListener(Mt.RWDE_ACCEPTED,this.onRoomAcceptedAndRejected),super.unregisterUpdateEvents(t))}onRoomRinging(t){t&&this._ngZone.run(()=>this.addUser(t.userName))}onRoomAcceptedAndRejected(t){t&&this._ngZone.run(()=>this.removeUser(t.userName))}addUser(t){this._users.indexOf(t)>=0||(this._users.length>=50?this.deny(t):(this._visible=!0,this._users.push(t)))}removeUser(t){const e=this._users.indexOf(t);-1!==e&&(this._users.splice(e,1),this._users.length||(this._visible=!1))}deny(t){this.messageListener.processWidgetMessage(new Ct(t,!1)),this.removeUser(t)}accept(t){this.messageListener.processWidgetMessage(new Ct(t,!0)),this.removeUser(t)}hide(){this._visible=!1}get visible(){return this._visible}get users(){return this._users}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-doorbell-component"]],features:[i.Hb],decls:1,vars:1,consts:[["class","nitro-room-doorbell card","noMemory","true",3,"bringToTop","draggable",4,"ngIf"],["noMemory","true",1,"nitro-room-doorbell","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"position-relative","w-100",2,"min-height","200px","max-height","200px","height","200px"],[4,"ngFor","ngForOf"],[1,"btn-group","w-100","mb-1"],["type","button",1,"btn","btn-secondary","w-100",2,"float","left","background-color","#494949","text-align","center","padding","8px 25px","border-radius","20px","color","#fff"],["type","button",1,"btn","btn-success",2,"font-size","14px","width","37px","float","revert","margin-left","10px","height","35px","margin-top","1px","box-shadow","none !important","border","none !important","border-radius","20px !important","filter","drop-shadow(0 2px 0 #1c7f33)",3,"click"],[1,"fas","fa-check"],["type","button",1,"btn","btn-danger",2,"margin-left","5px","height","35px","margin-top","1px","width","36px",3,"click"]],template:function(t,e){1&t&&i.Uc(0,Tr,10,4,"div",0),2&t&&i.yc("ngIf",e.visible)},directives:[p.n,li,vi,Oi.b,p.m],pipes:[Fs],encapsulation:2}),t})();var yr=s("te8b");let Ar=(()=>{class t{transform(t){return yr.toShort(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=i.Xb({name:"nitroEmoji",type:t,pure:!1}),t})(),Cr=(()=>{class t{transform(t){return t||(t=""),(t=t.replace(/\*\*(.+?)\*\*/g,"<b>$1</b>")).replace(/\*(.+?)\*/g,"<i>$1</i>")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=i.Xb({name:"markdown",type:t,pure:!0}),t})(),Mr=(()=>{class t{constructor(t){this._sanitizer=t}transform(t){return this._sanitizer.sanitize(i.S.NONE,t)}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(n.b))},t.\u0275pipe=i.Xb({name:"sanitize",type:t,pure:!1}),t})();const Ur=["chatContainer"],Dr=function(t){return{"background-color":t}};function wr(t,e){if(1&t&&i.Zb(0,"div",10),2&t){const t=i.qc();i.yc("ngStyle",i.Cc(1,Dr,t.senderColorString))}}const Nr=function(t){return{"background-image":t,transform:"scale(1)",top:"-53px"}},Lr=function(t){return{"background-image":t}};function xr(t,e){if(1&t&&i.Zb(0,"div",11),2&t){const t=i.qc();i.yc("ngStyle",t.petType>=0?i.Cc(1,Nr,"url("+t.senderImageUrl+")"):i.Cc(3,Lr,"url("+t.senderImageUrl+")"))}}let Pr=(()=>{class t{update(t){this.chatType=t.chatType,this.chatStyle=t.styleId,this.senderId=t.userId,this.senderName=t.userName,this.senderCategory=t.userCategory,this.message=t.text,this.messageLinks=t.links,this.senderX=t.userX,this.senderImageUrl=t.userImage&&t.userImage.src||null,this.senderColor=t.userColor,this.senderColorString=this.senderColor&&"#"+this.senderColor.toString(16).padStart(6,"0")||null,this.roomId=t.roomId,this.userType=t.userType,this.petType=t.petType}ready(){this.makeVisible(),this.chatContainerElement&&(this.chatContainerElement.style.minWidth=this.width+"px")}makeVisible(){this.chatContainerElement&&(this.chatContainerElement.style.visibility="visible")}getX(){return this.x}setX(t){this.chatContainerElement&&(this.x=t,this.chatContainerElement.style.left=t+"px")}getY(){return this.y}setY(t){this.chatContainerElement&&(this.y=t,this.chatContainerElement.style.top=t+"px")}selectUser(){u.a.instance.roomEngine.selectRoomObject(this.roomId,this.senderId,this.senderCategory)}get width(){return this.chatContainerElement&&this.chatContainerElement.clientWidth||0}get height(){return this.chatContainerElement&&this.chatContainerElement.clientHeight||0}get chatContainerElement(){return this.chatContainer&&this.chatContainer.nativeElement||null}get decoratedUsername(){return this.senderName+":"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&i.cd(Ur,1),2&t){let t;i.Hc(t=i.oc())&&(e.chatContainer=t.first)}},inputs:{id:"id"},decls:13,vars:14,consts:[[1,"bubble-container"],["chatContainer",""],["class","user-container-bg",3,"ngStyle",4,"ngIf"],[3,"click"],[1,"user-container"],["class","user-image",3,"ngStyle",4,"ngIf"],[1,"chat-content"],[1,"username",3,"innerHTML"],[1,"message",3,"innerHTML"],[1,"pointer"],[1,"user-container-bg",3,"ngStyle"],[1,"user-image",3,"ngStyle"]],template:function(t,e){1&t&&(i.dc(0,"div",0,1),i.Uc(2,wr,1,3,"div",2),i.dc(3,"div",3),i.nc("click",function(){return e.selectUser()}),i.dc(4,"div",4),i.Uc(5,xr,1,5,"div",5),i.cc(),i.dc(6,"div",6),i.Zb(7,"b",7),i.Zb(8,"span",8),i.rc(9,"nitroEmoji"),i.rc(10,"markdown"),i.rc(11,"sanitize"),i.cc(),i.Zb(12,"div",9),i.cc(),i.cc()),2&t&&(i.Kb(2),i.yc("ngIf",0===e.chatStyle),i.Kb(1),i.Ob("chat-bubble bubble-",e.chatStyle," type-",e.chatType,""),i.Kb(2),i.yc("ngIf",e.senderImageUrl),i.Kb(2),i.yc("innerHTML",e.decoratedUsername,i.Mc),i.Kb(1),i.yc("innerHTML",i.sc(9,8,i.sc(10,10,i.sc(11,12,e.message))),i.Mc))},directives:[p.n,p.o],pipes:[Ar,Cr,Mr],encapsulation:2}),t})();const Fr=["chatView"],kr=["chatContainer"];function Wr(t,e){}let Vr=(()=>{class t extends ws{constructor(e,s){super(),this.ngZone=e,this.componentFactoryResolver=s,this.timerId=++t.TIMER_TRACKER,this.cameraOffset=new g.j,this.chats=[],this.tempChats=[],this.pendingChats=[],this.processingChats=!1,this._skipNextMove=!1,this.onChatMessage=this.onChatMessage.bind(this),this.onRoomViewUpdate=this.onRoomViewUpdate.bind(this)}ngOnInit(){u.a.instance.addWorkerEventTracker(this),this.ngZone.runOutsideAngular(()=>{u.a.instance.sendWorkerEvent({type:"CREATE_INTERVAL",time:5e3,timerId:this.timerId,response:{type:"MOVE_CHATS"}})})}ngOnDestroy(){this.ngZone.runOutsideAngular(()=>{u.a.instance.sendWorkerEvent({type:"REMOVE_INTERVAL",timerId:this.timerId})}),u.a.instance.removeWorkerEventTracker(this)}registerUpdateEvents(t){t&&(t.addEventListener(yt.RWCUE_EVENT_CHAT,this.onChatMessage),t.addEventListener(Q.SIZE_CHANGED,this.onRoomViewUpdate),t.addEventListener(Q.POSITION_CHANGED,this.onRoomViewUpdate),t.addEventListener(Q.SCALE_CHANGED,this.onRoomViewUpdate),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(yt.RWCUE_EVENT_CHAT,this.onChatMessage),t.removeEventListener(Q.SIZE_CHANGED,this.onRoomViewUpdate),t.removeEventListener(Q.POSITION_CHANGED,this.onRoomViewUpdate),t.removeEventListener(Q.SCALE_CHANGED,this.onRoomViewUpdate))}updateChatViewForDimensions(t,e){const s=this.chatViewElement;if(!s)return;const i=u.a.instance.getConfiguration("chat.viewer.height.percentage",.4);s.style.height=e*i+"px"}onChatMessage(t){!t||Ns.a.isRunning()&&t.chatType!==yt.CHAT_TYPE_WHISPER||(this.pendingChats.push(t),this.processPendingChats())}onRoomViewUpdate(t){t.positionDelta&&(this.cameraOffset.x=this.cameraOffset.x+t.positionDelta.x,this.cameraOffset.y=this.cameraOffset.y+t.positionDelta.y,this.resetAllChatLocations()),t.roomViewRectangle&&this.updateChatViewForDimensions(t.roomViewRectangle.width,t.roomViewRectangle.height)}processPendingChats(t=!1){if(!t&&this.processingChats)return;this.processingChats=!0;const e=this.pendingChats.shift();if(!e)return void(this.processingChats=!1);let s=null,i=null;this.ngZone.run(()=>{const t=this.componentFactoryResolver.resolveComponentFactory(Pr);s=this.chatContainer.createComponent(t),i=s.instance,i&&(i.id=this.getFreeItemId(),i.update(e))}),this.addChat(s),this._skipNextMove=!0}getFreeItemId(){return"chat_item_"+t.CHAT_COUNTER}addChat(e){if(!e)return;const s=e.instance;s.senderX=s.senderX-this.cameraOffset.x,s.setY(this.chatViewElement.offsetHeight-s.height),this.resetChatItemLocation(e),this.makeRoomForChat(e),this.chats.push(e),s.ready(),t.CHAT_COUNTER++,this.processPendingChats(!0)}hideChat(t){if(!t)return;const e=this.chats.indexOf(t);e>=0&&this.chats.splice(e,1);const s=this.chatContainer.indexOf(t.hostView);s>=0&&this.chatContainer.remove(s)}moveChatUp(t,e=0){if(!t)return;const s=t.instance;let i=s.height;e&&(i=e),s.setY(s.getY()-i),s.getY()<-2*s.height&&this.hideChat(t)}moveAllChatsUp(){if(this._skipNextMove)return void(this._skipNextMove=!1);let t=this.chats.length-1;for(;t>=0;)this.moveChatUp(this.chats[t],15),t--}makeRoomForChat(t){if(!t)return;const e=t.instance,s=this.chats[this.chats.length-1],i=s&&s.instance;if(!i)return;const n=i.getY()+i.height-1,r=e.height+1,a=this.chatViewElement.offsetHeight-n;if(a<r)for(const o of this.chats)this.moveChatUp(o,r-a)}resetAllChatLocations(){let t=this.chats.length-1;for(;t>=0;){const e=this.chats[t];e&&this.resetChatItemLocation(e),t--}}resetChatItemLocation(t){const e=t.instance;let s=e.senderX+this.cameraOffset.x;s-=e.width/2,e.setX(s)}workerMessageReceived(t){if(t)switch(t.type){case"MOVE_CHATS":return void this.moveAllChatsUp()}}get chatViewElement(){return this.chatViewReference&&this.chatViewReference.nativeElement||null}get handler(){return this.widgetHandler}}return t.TIMER_TRACKER=0,t.CHAT_COUNTER=0,t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H),i.Yb(i.m))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-chat-component"]],viewQuery:function(t,e){if(1&t&&(i.cd(Fr,1),i.cd(kr,1,i.Z)),2&t){let t;i.Hc(t=i.oc())&&(e.chatViewReference=t.first),i.Hc(t=i.oc())&&(e.chatContainer=t.first)}},features:[i.Hb],decls:4,vars:0,consts:[[1,"nitro-room-chat-component"],["chatView",""],["chatContainer",""]],template:function(t,e){1&t&&(i.dc(0,"div",0,1),i.Uc(2,Wr,0,0,"ng-template",null,2,i.Vc),i.cc())},encapsulation:2}),t})();var Gr=s("UTIc"),Hr=s("oHxB"),Br=s("JDjE"),jr=s("5BHI"),Kr=s("443f"),zr=s("JCII"),Yr=s("vx5b"),Xr=s("6vif"),Zr=s("xycO"),qr=s("c7QS"),Qr=s("V1nr"),Jr=s("pDhE"),$r=s("00EK"),ta=s("8lyR"),ea=s("KsdP"),sa=s("qKi6"),ia=s("8lyl"),na=s("zRn8"),ra=s("zWsf"),aa=s("S5/W"),oa=s("uMJ2"),ca=s("6RUH"),_a=s("V5Lx"),ha=s("S8Tn"),la=s("UdUS"),ua=s("lulp"),da=s("Zim7"),ga=s("o/0e"),ma=s("mP1c");class pa{constructor(){this._enteredGuestRoom=null,this._staffPick=!1,this._createdRoomId=0,this._currentRoomId=0,this._currentRoomOwner=!1,this._canRate=!1}get enteredGuestRoom(){return this._enteredGuestRoom}set enteredGuestRoom(t){this._enteredGuestRoom=t}get staffPick(){return this._staffPick}set staffPick(t){this._staffPick=t}get createdRoomId(){return this._createdRoomId}set createdRoomId(t){this._createdRoomId=t}get currentRoomId(){return this._currentRoomId}set currentRoomId(t){this._currentRoomId=t}get currentRoomOwner(){return this._currentRoomOwner}set currentRoomOwner(t){this._currentRoomOwner=t}get canRate(){return this._canRate}set canRate(t){this._canRate=t}}let fa=(()=>{class t{constructor(e,s,i){this._notificationService=e,this._settingsService=s,this._ngZone=i,this._roomInfoShowing=!1,this._messages=[],this._component=null,this._topLevelContexts=[],this._topLevelContext=null,this._categories=[],this._filter=t.SEARCH_FILTERS[0],this._lastSearchResults=[],this._lastSearch="",this._data=new pa,this._tradeSettings=[],this._homeRoomId=-1,this._isSearching=!1,this._isLoaded=!1,this._isLoading=!1,this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.setTradeSettings(),this.registerMessages(),u.a.instance.addLinkEventTracker(this)}ngOnDestroy(){this.unregisterMessages(),u.a.instance.removeLinkEventTracker(this)}registerMessages(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomSessionManager.events.addEventListener(N.a.CREATED,this.onRoomSessionEvent),this._messages=[new oa.a(this.onUserInfoEvent.bind(this)),new sa.a(this.onRoomForwardEvent.bind(this)),new ia.a(this.onRoomInfoOwnerEvent.bind(this)),new ae.a(this.onRoomInfoEvent.bind(this)),new ea.a(this.onRoomEnterErrorEvent.bind(this)),new aa.a(this.onRoomCreatedEvent.bind(this)),new $r.a(this.onRoomDoorbellEvent.bind(this)),new Jr.a(this.onRoomDoorbellAcceptedEvent.bind(this)),new na.a(this.onRoomScoreEvent.bind(this)),new ra.a(this.onRoomSettingsUpdatedEvent.bind(this)),new Gr.a(this.onGenericErrorEvent.bind(this)),new ta.a(this.onRoomDoorbellRejectedEvent.bind(this)),new Hr.a(this.onNavigatorCategoriesEvent.bind(this)),new Br.a(this.onNavigatorCollapsedEvent.bind(this)),new jr.a(this.onNavigatorEventCategoriesEvent.bind(this)),new zr.a(this.onNavigatorLiftedEvent.bind(this)),new Yr.a(this.onNavigatorMetadataEvent.bind(this)),new Xr.a(this.onNavigatorOpenRoomCreatorEvent.bind(this)),new Zr.a(this.onNavigatorSearchesEvent.bind(this)),new qr.a(this.onNavigatorSearchEvent.bind(this)),new Qr.a(this.onNavigatorSettingsEvent.bind(this)),new Kr.a(this.onNavigatorHomeRoomEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomSessionManager.events.removeEventListener(N.a.CREATED,this.onRoomSessionEvent);for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomSessionEvent(t){if(t)switch(t.type){case N.a.CREATED:return void this._ngZone.run(()=>this._settingsService.hideNavigator())}}onUserInfoEvent(t){t&&t.getParser()&&(u.a.instance.communication.connection.send(new _a.a),u.a.instance.communication.connection.send(new ua.a))}onRoomForwardEvent(t){if(!(t instanceof sa.a))return;const e=t.getParser();e&&u.a.instance.communication.connection.send(new oe.a(e.roomId,!1,!0))}onRoomInfoOwnerEvent(t){if(!(t instanceof ia.a))return;const e=t.getParser();e&&(this._ngZone.run(()=>{this._data.currentRoomOwner=!1,this._data.currentRoomOwner=e.isOwner,this._data.currentRoomId=e.roomId}),u.a.instance.communication.connection.send(new oe.a(e.roomId,!0,!1)),h.a.call("legacyTrack","navigator","private",[e.roomId]))}onRoomInfoEvent(t){if(!(t instanceof ae.a))return;const e=t.getParser();e&&this._ngZone.run(()=>{if(e.roomEnter)this._data.enteredGuestRoom=e.data,this._data.staffPick=e.staffPick,this._data.createdRoomId=0;else if(e.roomForward){if(e.data.ownerName!==u.a.instance.sessionDataManager.userName&&!e.isGroupMember)switch(e.data.doorMode){case ga.a.DOORBELL_STATE:return void this.openRoomDoorbell(e.data);case ga.a.PASSWORD_STATE:return void this.openRoomPassword(e.data)}this.goToRoom(e.data.roomId)}else this._data.enteredGuestRoom=e.data,this._data.staffPick=e.staffPick})}onRoomEnterErrorEvent(t){if(!(t instanceof ea.a))return;const e=t.getParser();if(!e)return;this._ngZone.run(()=>{switch(e.reason){case da.a.FULL_ERROR:this._notificationService.alert("${navigator.guestroomfull.text}","${navigator.guestroomfull.title}");break;case da.a.QUEUE_ERROR:this._notificationService.alert("${room.queue.error. "+e.parameter+"}","${room.queue.error.title}");break;case da.a.BANNED:this._notificationService.alert("${navigator.banned.text}","${navigator.banned.title}");break;default:this._notificationService.alert("${room.queue.error.title}","${room.queue.error.title}")}}),u.a.instance.communication.connection.send(new ca.a);const s=new J.a(J.a.TOOLBAR_CLICK);s.iconName=ma.a.HOTEL_VIEW,u.a.instance.roomEngine.events.dispatchEvent(s)}onRoomCreatedEvent(t){if(!t)return;const e=t.getParser();e&&(this._ngZone.run(()=>{this._data.createdRoomId=e.roomId,this._roomInfoShowing=!1}),this.goToRoom(e.roomId))}onRoomDoorbellEvent(t){if(!t)return;const e=t.getParser();e&&(e.userName&&0!==e.userName.length||this._ngZone.run(()=>this._component&&this._component.openRoomDoorbell(null,!0)))}onRoomDoorbellAcceptedEvent(t){if(!t)return;const e=t.getParser();e&&(e.userName&&0!==e.userName.length||this._ngZone.run(()=>this._component&&this._component.closeRoomDoorbell()))}onRoomScoreEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this._data.canRate=e.canLike)}onRoomSettingsUpdatedEvent(t){if(!t)return;const e=t.getParser();e&&u.a.instance.communication.connection.send(new oe.a(e.roomId,!1,!1))}onGenericErrorEvent(t){if(!t)return;const e=t.getParser();e&&-100002===e.errorCode&&this._ngZone.run(()=>this._component&&this._component.openRoomPassword(null,!0))}onRoomDoorbellRejectedEvent(t){if(!t)return;const e=t.getParser();e&&(e.userName&&0!==e.userName.length||this._ngZone.run(()=>this._component&&this._component.openRoomDoorbell(null,!1,!0)))}onNavigatorCategoriesEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this._categories=e.categories)}onNavigatorCollapsedEvent(t){t&&t.getParser()}onNavigatorEventCategoriesEvent(t){t&&t.getParser()}onNavigatorLiftedEvent(t){t&&t.getParser()}onNavigatorMetadataEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._topLevelContexts=e.topLevelContexts,this._topLevelContexts.length>0&&this.setCurrentContext(this._topLevelContexts[0]),this.clearSearch()})}onNavigatorOpenRoomCreatorEvent(t){t&&t.getParser()&&this._component&&this._ngZone.run(()=>this._component.openRoomCreator())}onNavigatorSearchesEvent(t){t&&t.getParser()}onNavigatorSearchEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=e.result;s&&this._ngZone.run(()=>{this.setCurrentContextByCode(s.code),this._lastSearchResults=s.results,this._isSearching=!1})}onNavigatorSettingsEvent(t){t&&t.getParser()}onNavigatorHomeRoomEvent(t){if(!t)return;const e=t.getParser();e&&(this._homeRoomId=e.homeRoomId,e.roomIdToEnter<=0||setTimeout(()=>{e.roomIdToEnter!==this._homeRoomId?this.goToPrivateRoom(this._homeRoomId):this.goToHomeRoom()},250))}getMaxVisitors(e){const s=[];let i=t.MAX_VISITOR_STEPPER;for(;i<=e;)s.push(i),i+=t.MAX_VISITOR_INCREMENTOR;return s}setTradeSettings(){this._tradeSettings=[],this._tradeSettings.push("${navigator.roomsettings.trade_not_allowed}","${navigator.roomsettings.trade_not_with_Controller}","${navigator.roomsettings.trade_allowed}")}goToRoom(t,e=null){u.a.instance.roomSessionManager.createSession(t,e)}goToPrivateRoom(t){u.a.instance.communication.connection.send(new oe.a(t,!1,!0))}goToHomeRoom(){return!(this._homeRoomId<1||(this.goToRoom(this._homeRoomId),0))}getContextByCode(t){if(!t)return null;for(const e of this._topLevelContexts)if(e&&e.code===t)return e;return null}setCurrentContext(t,e=!0){t&&this._topLevelContext!==t&&(this._topLevelContext=t)}setCurrentContextByCode(t,e=!0){if(!t)return;const s=this.getContextByCode(t);s&&this.setCurrentContext(s,e)}setCurrentFilter(t){t&&this._filter!==t&&(this._filter=t)}search(e=null){if(!this._topLevelContext||this._isSearching)return;this._filter||this.setCurrentFilter(t.SEARCH_FILTERS[0]);const s=this._filter&&this._filter.query?this._filter.query+":":"";let i=e;null===i&&(i=this._lastSearch),this._lastSearch=i||"",this.sendSearch(this._topLevelContext.code,s+this._lastSearch)}clearSearch(){this.setCurrentFilter(t.SEARCH_FILTERS[0]),this._lastSearch=null,this.isLoaded&&this.search()}sendSearch(t,e){t&&(this._isSearching=!0,this._ngZone.runOutsideAngular(()=>u.a.instance.communication.connection.send(new la.a(t,e))))}loadNavigator(){this._ngZone.runOutsideAngular(()=>u.a.instance.communication.connection.send(new ha.a)),this._isLoaded=!0}openRoomDoorbell(t){t&&this._component&&this._component.openRoomDoorbell(t)}openRoomPassword(t){t&&this._component&&this._component.openRoomPassword(t)}toggleRoomInfo(){this._roomInfoShowing=!this._roomInfoShowing}linkReceived(t){const e=t.split("/");if(!(e.length<2))switch(e[1]){case"goto":if(e.length>2)switch(e[2]){case"home":this.goToHomeRoom();break;default:{const t=parseInt(e[2]);t>0&&this.goToPrivateRoom(t)}}return}}get eventUrlPrefix(){return"navigator"}get component(){return this._component}set component(t){this._component=t}get topLevelContexts(){return this._topLevelContexts}get topLevelContext(){return this._topLevelContext}get categories(){return this._categories}get filter(){return this._filter}get lastSearch(){return this._lastSearch}set lastSearch(t){this._lastSearch=t}get lastSearchResults(){return this._lastSearchResults}get isSearching(){return this._isSearching}get isLoaded(){return this._isLoaded}get isLoading(){return this._isLoading}get tradeSettings(){return this._tradeSettings}get data(){return this._data}get roomInfoShowing(){return this._roomInfoShowing}set roomInfoShowing(t){this._roomInfoShowing=t}}return t.SEARCH_FILTERS=[{name:"anything",query:null},{name:"room.name",query:"roomname"},{name:"owner",query:"owner"},{name:"tag",query:"tag"},{name:"group",query:"group"}],t.MAX_VISITOR_STEPPER=10,t.MAX_VISITOR_INCREMENTOR=5,t.\u0275fac=function(e){return new(e||t)(i.kc(Ge),i.kc(m),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();function Ea(t,e){if(1&t&&(i.dc(0,"div",23),i.Wc(1),i.cc()),2&t){const t=e.$implicit;i.Kb(1),i.Yc(" #",t," ")}}function Sa(t,e){if(1&t&&(i.dc(0,"div",21),i.Uc(1,Ea,2,1,"div",22),i.cc()),2&t){const t=i.qc(2);i.Kb(1),i.yc("ngForOf",t.tags)}}function Ia(t,e){if(1&t){const t=i.ec();i.dc(0,"button",12),i.nc("click",function(){return i.Lc(t),i.qc(2).likeRoom()}),i.Zb(1,"i",24),i.cc()}}const Ra=function(t){return[t]};function ba(t,e){if(1&t){const t=i.ec();i.dc(0,"div",6),i.dc(1,"div",7),i.dc(2,"p",8),i.Wc(3),i.cc(),i.dc(4,"p",9),i.Wc(5),i.cc(),i.Uc(6,Sa,2,1,"div",10),i.dc(7,"div",11),i.dc(8,"button",12),i.nc("click",function(){return i.Lc(t),i.qc().toggleRoomTools()}),i.Zb(9,"i",13),i.cc(),i.dc(10,"button",12),i.nc("click",function(){return i.Lc(t),i.qc().toggleZoom()}),i.Zb(11,"i",14),i.cc(),i.Uc(12,Ia,2,0,"button",15),i.dc(13,"button",12),i.nc("click",function(){return i.Lc(t),i.qc().toggleChatHistory()}),i.Zb(14,"i",16),i.cc(),i.dc(15,"div",17),i.dc(16,"button",18),i.nc("click",function(){return i.Lc(t),i.qc().goInDirection(-1)}),i.Zb(17,"i",19),i.cc(),i.dc(18,"button",18),i.nc("click",function(){return i.Lc(t),i.qc().goInDirection(1)}),i.Zb(19,"i",20),i.cc(),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.yc("@inOutAnimation",void 0),i.Kb(3),i.Yc(" ",t.roomName," "),i.Kb(2),i.Yc(" ",t.ownerName," "),i.Kb(1),i.yc("ngIf",t.tags.length),i.Kb(5),i.yc("ngClass",i.Cc(8,Ra,t.zoomed?"fa-search-minus":"fa-search-plus")),i.Kb(1),i.yc("ngIf",t.canRate),i.Kb(4),i.yc("disabled",!t.hasDirection(-1)),i.Kb(2),i.yc("disabled",!t.hasDirection(1))}}let va=(()=>{class t extends ws{constructor(t,e,s,i){super(),this._componentFactoryResolver=t,this._ngZone=e,this._settingsService=s,this._navigatorService=i,this._lastRoomId=-1,this._roomData=null,this._currentRoomIndex=-1,this._roomName="",this._ownerName="",this._tags=[],this._zoomed=!0,this._roomOptionsVisible=!1,this._roomToolsVisible=!1,this._roomOptionsTimeout=null}ngOnDestroy(){this._navigatorService.roomInfoShowing=!1,this.stopRoomOptionsTimeout()}updateRoomInfo(e){e&&this._ngZone.run(()=>{for(const s of t.VISITED_ROOMS)s.roomId===e.roomId&&(s.roomName=e.roomName)})}updateRoomTools(t,e,s){this._ngZone.run(()=>{this._roomName=t,this._ownerName=e,this._tags=s,this.showRoomOptions()})}addVisitedRoom(e){this._ngZone.run(()=>{for(const s of t.VISITED_ROOMS)if(s&&s.roomId===e.roomId)return;t.VISITED_ROOMS.push(e),t.VISITED_ROOMS.length>t.MAX_VISIT_HISTORY&&t.VISITED_ROOMS.shift(),this._currentRoomIndex=t.VISITED_ROOMS.length-1})}updateRoomCurrentIndex(e){this._ngZone.run(()=>{let s=0;for(;s<t.VISITED_ROOMS.length;){const i=t.VISITED_ROOMS[s];if(i&&i.roomId===e)return void(this._currentRoomIndex=s);s++}})}likeRoom(){this.handler.rateRoom()}hasDirection(e){const s=this._currentRoomIndex+e;return s>=0&&s<t.VISITED_ROOMS.length}goInDirection(e){const s=this._currentRoomIndex+e;if(s<0||s>t.VISITED_ROOMS.length-1)return;const i=t.VISITED_ROOMS[s];i&&this._navigatorService.goToPrivateRoom(i.roomId)}toggleChatHistory(){this._settingsService.toggleChatHistory()}toggleZoom(){this.widgetHandler.processWidgetMessage(new Ne),this._zoomed=!this._zoomed}toggleRoomOptions(){this._roomOptionsVisible=!this._roomOptionsVisible,this._roomOptionsVisible&&this.showRoomOptions(!1)}showRoomOptions(t=!0){this._roomOptionsVisible=!0,this.stopRoomOptionsTimeout(),t&&(this._roomOptionsTimeout=setTimeout(()=>{this.stopRoomOptionsTimeout(),this._roomOptionsVisible=!1},5e3))}stopRoomOptionsTimeout(){this._roomOptionsTimeout&&(clearTimeout(this._roomOptionsTimeout),this._roomOptionsTimeout=null)}toggleRoomTools(){this._navigatorService.toggleRoomInfo()}get handler(){return this.widgetHandler}get roomName(){return this._roomName}get ownerName(){return this._ownerName}get tags(){return this._tags}get zoomed(){return this._zoomed}get roomOptionsVisible(){return this._roomOptionsVisible}get roomToolsVisible(){return this._roomToolsVisible}set roomToolsVisible(t){this._roomToolsVisible=t}get roomData(){return this._roomData}get canRate(){return this._navigatorService.data.canRate}}return t.VISITED_ROOMS=[],t.MAX_VISIT_HISTORY=10,t.\u0275fac=function(e){return new(e||t)(i.Yb(i.m),i.Yb(i.H),i.Yb(m),i.Yb(fa))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-tools-component"]],features:[i.Hb],decls:6,vars:1,consts:[[1,"nitro-room-tools"],[1,"row","m-0","p-0"],[1,"d-flex","align-items-start"],["type","button",1,"white","room-settings-button","btn","btn-sm","btn-secondary","icon-roomsettings",3,"click"],[1,"overflow-hidden"],["class","card ml-2","style","\n                    border-radius: 20px;\n                    margin-left: 15px !important;\n                    color: #4a4a4a;\n                ",4,"ngIf"],[1,"card","ml-2",2,"border-radius","20px","margin-left","15px !important","color","#4a4a4a"],[1,"d-flex","flex-column","p-3"],[1,"h5","text-truncate",2,"font-weight","bold"],[1,"h6","room-owner","m-0",2,"font-weight","400","font-size","16px"],["class","d-block mt-2",4,"ngIf"],[1,"d-flex","mt-3","btn-group",2,"width","145px","margin-right","80px"],["type","button",1,"btn","btn-sm","btn-secondary","w-100","room-settings-mini-button",2,"width","50px !important",3,"click"],[1,"fas","fa-cog"],[1,"fas",3,"ngClass"],["type","button","class","btn btn-sm btn-secondary w-100 room-settings-mini-button","style","width: 50px !important",3,"click",4,"ngIf"],[1,"fas","fa-comment-alt"],[1,"btn-group","ml-2"],["type","button",1,"btn","btn-sm","btn-secondary","w-100","room-settings-mini-button",3,"disabled","click"],[1,"fas","fa-arrow-left"],[1,"fas","fa-arrow-right"],[1,"d-block","mt-2"],["class","badge badge-secondary badge-sm mr-2",4,"ngFor","ngForOf"],[1,"badge","badge-secondary","badge-sm","mr-2"],[1,"fas","fa-heart"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"div",2),i.dc(3,"button",3),i.nc("click",function(){return e.toggleRoomOptions()}),i.cc(),i.cc(),i.dc(4,"div",4),i.Uc(5,ba,20,10,"div",5),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(5),i.yc("ngIf",e.roomOptionsVisible))},directives:[p.n,p.l,p.m],encapsulation:2,data:{animation:[Object(R.j)("inOutAnimation",[Object(R.i)(":enter",[Object(R.h)({transform:"translateX(-50%)"}),Object(R.e)(".1s ease-in",Object(R.h)({transform:"translateX(0%)"}))]),Object(R.i)(":leave",[Object(R.h)({transform:"translateX(0%)"}),Object(R.e)(".1s ease-out",Object(R.h)({transform:"translateX(-50%)"}))])])]}}),t})(),Ta=(()=>{class t{constructor(t){this._notificationService=t,this.title="",this.message="",this.choices=[]}close(){this._notificationService.closeAlert(this)}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Ge))},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],decls:11,vars:5,consts:[["noMemory","true",1,"nitro-alert","d-flex","flex-column","bg-primary","border","shadow","rounded",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","px-3","pt-3"],[1,"m-0"],[1,"d-flex","flex-column","p-3"],[1,"position-relative","w-100",2,"min-height","65px","max-height","275px"],[1,"d-block",3,"innerHTML"],[1,"d-flex","flex-column","align-items-center","justify-content-center","mt-3"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"h6",2),i.Wc(3),i.cc(),i.cc(),i.dc(4,"div",3),i.dc(5,"perfect-scrollbar",4),i.Zb(6,"div",5),i.cc(),i.dc(7,"div",6),i.dc(8,"button",7),i.nc("click",function(){return e.close()}),i.Wc(9),i.rc(10,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Xc(e.title),i.Kb(3),i.yc("innerHTML",e.message,i.Mc),i.Kb(3),i.Xc(i.sc(10,3,"generic.close")))},directives:[li,vi,Oi.b],pipes:[Fs],encapsulation:2}),t})();var Oa=s("vzKh");function ya(t,e){if(1&t){const t=i.ec();i.dc(0,"button",6),i.nc("click",function(){i.Lc(t);const s=e.index;return i.qc().choose(s)}),i.Wc(1),i.rc(2,"translate"),i.cc()}if(2&t){const t=e.$implicit;i.yc("ngClass",t.classes),i.Kb(1),i.Yc(" ",i.sc(2,2,t.localizationKey)," ")}}let Aa=(()=>{class t extends Ta{constructor(){super(...arguments),this.callback=null,this.choices=[]}choose(t){try{this.choices[t].callback()}catch(e){Oa.a.log(e)}this.close()}}return t.\u0275fac=function(e){return Ca(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:8,vars:5,consts:[["dragHandle",".card-header","noMemory","true",1,"card","nitro-alert","nitro-alert-generic-component",3,"bringToTop","draggable"],[1,"card-header","text-center","alert-title"],[1,"card-body"],[1,"mb-3","alert-desc",3,"innerHTML"],[1,"btn-group","w-100"],["type","button","class","btn w-100 btn-menu",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"btn","w-100","btn-menu",3,"ngClass","click"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Wc(2),i.cc(),i.dc(3,"div",2),i.Zb(4,"div",3),i.rc(5,"keepHtml"),i.dc(6,"div",4),i.Uc(7,ya,3,4,"button",5),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Xc(e.title),i.Kb(2),i.yc("innerHTML",i.sc(5,3,e.message),i.Mc),i.Kb(3),i.yc("ngForOf",e.choices))},directives:[li,vi,p.m,p.l],pipes:[qs,Fs],encapsulation:2}),t})();const Ca=i.fc(Aa);class Ma{constructor(t,e,s=[]){this._localizationKey=t,this._callback=e,this._classes=s}get localizationKey(){return this._localizationKey}get callback(){return this._callback}get classes(){return this._classes}}let Ua=(()=>{class t extends Ta{constructor(){super(...arguments),this.callback=null}confirm(){if(this.callback)try{this.callback()}catch(t){Oa.a.log(t)}this.close()}}return t.\u0275fac=function(e){return Da(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:13,vars:8,consts:[["noMemory","true",1,"nitro-alert","d-flex","flex-column","bg-primary","border","shadow","rounded",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","px-3","pt-3"],[1,"m-0"],[1,"d-flex","flex-column","p-3"],[1,"d-flex","flex-column",3,"innerHTML"],[1,"d-flex","align-items-center","justify-content-center","mt-3"],["type","button",1,"btn","btn-link","mr-1",3,"click"],["type","button",1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"h6",2),i.Wc(3),i.cc(),i.cc(),i.dc(4,"div",3),i.Zb(5,"div",4),i.dc(6,"div",5),i.dc(7,"button",6),i.nc("click",function(){return e.close()}),i.Wc(8),i.rc(9,"translate"),i.cc(),i.dc(10,"button",7),i.nc("click",function(){return e.confirm()}),i.Wc(11),i.rc(12,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Xc(e.title),i.Kb(2),i.yc("innerHTML",e.message,i.Mc),i.Kb(3),i.Xc(i.sc(9,4,"generic.cancel")),i.Kb(3),i.Xc(i.sc(12,6,"generic.ok")))},directives:[li,vi],pipes:[Fs],encapsulation:2}),t})();const Da=i.fc(Ua);function wa(t,e){if(1&t){const t=i.ec();i.dc(0,"button",9),i.nc("click",function(){return i.Lc(t),i.qc().openLink()}),i.Wc(1),i.rc(2,"translate"),i.cc()}2&t&&(i.Kb(1),i.Xc(i.sc(2,1,"mod.alert.link")))}let Na=(()=>{class t extends Ta{constructor(){super(...arguments),this.link=""}openLink(){window.open(this.link,"_blank")}get hasLink(){return this.link.length>0}}return t.\u0275fac=function(e){return La(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:12,vars:6,consts:[["noMemory","true",1,"nitro-alert","d-flex","flex-column","bg-primary","border","shadow","rounded",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","px-3","pt-3"],[1,"m-0"],[1,"d-flex","flex-column","p-3"],[1,"position-relative","w-100",2,"min-height","65px","max-height","275px"],[1,"d-block",3,"innerHTML"],[1,"d-flex","align-items-center","justify-content-center","mt-3"],["type","button","class","btn btn-link mr-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-link","mr-1",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"h6",2),i.Wc(3),i.cc(),i.cc(),i.dc(4,"div",3),i.dc(5,"perfect-scrollbar",4),i.Zb(6,"div",5),i.cc(),i.dc(7,"div",6),i.Uc(8,wa,3,3,"button",7),i.dc(9,"button",8),i.nc("click",function(){return e.close()}),i.Wc(10),i.rc(11,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Xc(e.title),i.Kb(3),i.yc("innerHTML",e.message,i.Mc),i.Kb(2),i.yc("ngIf",e.hasLink),i.Kb(2),i.Xc(i.sc(11,4,"generic.close")))},directives:[li,vi,Oi.b,p.n],pipes:[Fs],encapsulation:2}),t})();const La=i.fc(Na);function xa(t,e){if(1&t&&(i.bc(0),i.Zb(1,"div",8),i.ac()),2&t){const t=e.$implicit;i.Kb(1),i.yc("innerHTML",t,i.Mc)}}let Pa=(()=>{class t extends Ta{constructor(){super(...arguments),this.messages=[]}}return t.\u0275fac=function(e){return Fa(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:11,vars:5,consts:[["noMemory","true",1,"nitro-alert","multiple-messages","d-flex","flex-column","bg-primary","border","shadow","rounded",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","px-3","pt-3"],[1,"m-0"],[1,"d-flex","flex-column","p-3"],[1,"position-relative","w-100",2,"min-height","65px","max-height","275px"],[4,"ngFor","ngForOf"],[1,"d-flex","flex-column","align-items-center","justify-content-center","mt-3"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"d-block",3,"innerHTML"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"h6",2),i.Wc(3),i.cc(),i.cc(),i.dc(4,"div",3),i.dc(5,"perfect-scrollbar",4),i.Uc(6,xa,2,1,"ng-container",5),i.cc(),i.dc(7,"div",6),i.dc(8,"button",7),i.nc("click",function(){return e.close()}),i.Wc(9),i.rc(10,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Xc(e.title),i.Kb(3),i.yc("ngForOf",e.messages),i.Kb(3),i.Xc(i.sc(10,3,"generic.close")))},directives:[li,vi,Oi.b,p.m],pipes:[Fs],encapsulation:2}),t})();const Fa=i.fc(Pa),ka=["alertsContainer"];function Wa(t,e){}function Va(t,e){}let Ga=(()=>{class t{constructor(t,e,s){this._notificationService=t,this._componentFactoryResolver=e,this._ngZone=s,this._alerts=new Map}ngOnInit(){this._notificationService.alertCenter=this}ngOnDestroy(){this.closeAllAlerts(),this._notificationService.alertCenter=null}alert(t,e=null){return this.buildAlert(Ta,t,e)}alertWithLink(t,e=null,s=null){const i=this.buildAlert(Na,t,s);return i?(i.link=e,i):null}alertWithConfirm(t,e=null,s=null){const i=this.buildAlert(Ua,t,e);return i?(i.callback=s,i):null}alertWithChoices(t,e,s=null){let i=null;return this._ngZone.run(()=>{i=this.createAlertComponent(Aa),s?s.startsWith("${")&&(s=u.a.instance.getLocalization(s)):s=u.a.instance.getLocalization("${mod.alert.title}"),t&&(t.startsWith("${")&&(t=u.a.instance.getLocalization(t)),t=t.replace(/\r\n|\r|\n/g,"<br />")),i.title=s,i.message=t,i.choices=e}),i||null}alertWithScrollableMessages(t,e=null){const s=this.buildAlert(Pa,null,e);if(!s)return;const i=[];for(const n of t)n&&i.push(n.replace(/\r\n|\r|\n/g,"<br />"));return s.messages=i,s}buildAlert(t,e,s=null){let i=null;return this._ngZone.run(()=>{i=this.createAlertComponent(t),s?s.startsWith("${")&&(s=u.a.instance.getLocalization(s)):s=u.a.instance.getLocalization("${mod.alert.title}"),e&&(e.startsWith("${")&&(e=u.a.instance.getLocalization(e)),e=e.replace(/\r\n|\r|\n/g,"<br />")),i.title=s,i.message=e}),i||null}createAlertComponent(t){if(!t)return null;let e=null;const s=this._componentFactoryResolver.resolveComponentFactory(t);let i=null;return s&&(i=this.alertsContainer.createComponent(s),this._alerts.set(i.instance,i)),e=i.instance,e}closeAlert(t){if(!t)return;const e=this._alerts.get(t);e&&(this._alerts.delete(t),this.removeAlertView(e.hostView))}closeAllAlerts(){for(const t of this._alerts.keys())this.closeAlert(t)}removeAlertView(t){if(!t)return;const e=this.alertsContainer.indexOf(t);-1!==e&&this.alertsContainer.remove(e)}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Ge),i.Yb(i.m),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-alert-center-component"]],viewQuery:function(t,e){if(1&t&&i.cd(ka,1,i.Z),2&t){let t;i.Hc(t=i.oc())&&(e.alertsContainer=t.first)}},decls:5,vars:0,consts:[[1,"d-flex","flex-column-reverse","notifications-area"],["notificationsContainer",""],["alertsContainer",""]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Uc(1,Wa,0,0,"ng-template",null,1,i.Vc),i.cc(),i.Uc(3,Va,0,0,"ng-template",null,2,i.Vc))},encapsulation:2}),t})();var Ha=s("tVIE"),Ba=s("a9Mt"),ja=s("qZ7S"),Ka=s("UufK");class za{constructor(t){this._name=t,this._achievements=[]}get name(){return this._name}set name(t){this._name=t}get achievements(){return this._achievements}set achievements(t){this._achievements=t}}let Ya=(()=>{class t{constructor(t,e){this._settingsService=t,this._ngZone=e,this._messages=[],this._categories=[],this._selectedCategory=null,this._achievementScore=0,this._isInitalized=!1,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new Ba.a(this.onAchievementsMessageEvent.bind(this)),new ja.a(this.onAchievementsScoreEvent.bind(this)),new Ha.a(this.onAchievementEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onAchievementsScoreEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this._achievementScore=e.score)}onAchievementsMessageEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=[];for(const i of e.achievements){if(!i)continue;let t=null;for(const e of s)if(e&&e.name===i.category){t=e;break}t||(t=new za(i.category),s.push(t)),t.achievements.push(i)}this._ngZone.run(()=>{this._categories=s,this._selectedCategory=this._categories[0],this._isInitalized=!0})}onAchievementEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=e.achievement;s&&this._ngZone.run(()=>{for(const t of this._categories){if(!t||t.name!==s.category)continue;let e=!1;for(const i of t.achievements)if(i&&i.achievementId===s.achievementId){e=!0,i.progress!==s.progress&&(i.reset(s),this.isIgnoredAchievement(i)||this._selectedCategory!==t&&i.unseen++);break}if(e)break}})}isIgnoredAchievement(t){if(!t)return!1;const e=u.a.instance.getConfiguration("achievements.unseen.ignored"),s=t.badgeId.replace(/[0-9]/g,"");return e.indexOf(s)>=0}loadAchievements(){u.a.instance.communication.connection.send(new Ka.a)}get categories(){return this._categories}get selectedCategory(){return this._selectedCategory}set selectedCategory(t){this._selectedCategory=t}get achievementScore(){return this._achievementScore}get isInitalized(){return this._isInitalized}get unseenCount(){let t=0;for(const e of this._categories)if(e)for(const s of e.achievements)s&&(t+=s.unseen);return t}}return t.\u0275fac=function(e){return new(e||t)(i.kc(m),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();const Xa=["progressBar"],Za=["nitro-achievements-category-list-component",""];function qa(t,e){if(1&t&&(i.dc(0,"div",13),i.Wc(1),i.cc()),2&t){const t=i.qc().$implicit,e=i.qc();i.Kb(1),i.Xc(e.getUnseenCount(t))}}const Qa=function(t){return[t]},Ja=function(t){return{"background-image":t}};function $a(t,e){if(1&t){const t=i.ec();i.dc(0,"div",9),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc().selectCategory(s)}),i.dc(1,"div",10),i.Uc(2,qa,2,1,"div",11),i.dc(3,"div",12),i.Wc(4),i.cc(),i.cc(),i.cc()}if(2&t){const t=e.$implicit,s=i.qc();i.Kb(1),i.yc("ngClass",i.Cc(4,Qa,s.selectedCategory===t?"bg-primary":"bg-secondary"))("ngStyle",i.Cc(6,Ja,"url("+s.getCategoryImage(t.name,t.achievements)+")")),i.Kb(1),i.yc("ngIf",s.getUnseenCount(t)),i.Kb(2),i.Xc(s.getCategoryProgress(t.achievements))}}const to=function(t){return{width:t}};let eo=(()=>{class t{constructor(t,e,s){this._settingsService=t,this._achivementsService=e,this._ngZone=s,this.visible=!1}selectCategory(t){this._achivementsService.selectedCategory=t}getProgressNumbers(){let t=0,e=0;for(const s of this.categories)if(s)for(const i of s.achievements)i&&(t+=i._Str_7518?i.level:i.level-1,e+=i.totalLevels);return[t,e]}getProgressPercentageString(){const[t,e]=this.getProgressNumbers();return Math.trunc(t/e*100)+"%"}getProgressString(){const[t,e]=this.getProgressNumbers();return t+"/"+e}getCategoryImage(t,e,s=!1){if(s)return u.a.instance.getConfiguration("achievements.images.url",u.a.instance.core.configuration.getValue("image.library.url")+`quests/achcategory_${t}.png`).toString().replace("%image%",t);let i=0;for(const r of e)i+=r._Str_7518?r.level:r.level-1;const n=i>0?"active":"inactive";return u.a.instance.getConfiguration("achievements.images.url",u.a.instance.core.configuration.getValue("image.library.url")+`quests/achcategory_${t}_${n}.png`).toString().replace("%image%",`achcategory_${t}_${n}`)}getCategoryProgress(t){let e=0,s=0;for(const i of t)i&&(i._Str_7518&&(e=e+1+i.level),s+=i.totalLevels);return e+"/"+s}getUnseenCount(t){let e=0;if(t)for(const s of t.achievements)s&&(e+=s.unseen);return e}get categories(){return this._achivementsService.categories}get selectedCategory(){return this._achivementsService.selectedCategory}get achievementScore(){return this._achivementsService.achievementScore}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(m),i.Yb(Ya),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-achievements-category-list-component",""]],viewQuery:function(t,e){if(1&t&&i.cd(Xa,1),2&t){let t;i.Hc(t=i.oc())&&(e.progressBar=t.first)}},inputs:{visible:"visible"},attrs:Za,decls:12,vars:10,consts:[[1,"grid-container","achievement-category-container","w-100","mb-2"],[1,"grid-items","grid-3"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","w-100"],[1,"achievement-progress-bar","bg-secondary","rounded","p-1","position-relative"],[1,"achievement-progress-bar-inner","bg-success","rounded","py-3",3,"ngStyle"],[1,"achievement-progress-bar-content","text-center","d-flex","justify-content-center"],[1,"align-self-center"],[1,"text-center","bg-secondary","rounded","px-2","mt-2"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],[1,"detail-info","has-image","rounded",3,"ngClass","ngStyle"],["class","position-absolute btn btn-sm btn-primary px-1 py-0 rounded count",4,"ngIf"],[1,"achievement-progress"],[1,"position-absolute","btn","btn-sm","btn-primary","px-1","py-0","rounded","count"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Uc(2,$a,5,8,"div",2),i.cc(),i.cc(),i.dc(3,"div",3),i.dc(4,"div",4),i.Zb(5,"div",5),i.dc(6,"div",6),i.dc(7,"span",7),i.Wc(8),i.cc(),i.cc(),i.cc(),i.dc(9,"div",8),i.Wc(10),i.rc(11,"translate"),i.cc(),i.cc()),2&t&&(i.Kb(2),i.yc("ngForOf",e.categories),i.Kb(3),i.yc("ngStyle",i.Cc(8,to,e.getProgressPercentageString())),i.Kb(3),i.Xc(e.getProgressString()),i.Kb(2),i.Xc(i.uc(11,4,"achievements.categories.score","score",e.achievementScore)))},directives:[p.m,p.o,p.l,p.n],pipes:[Fs],encapsulation:2}),t})();class so{constructor(t){this.badgeId=t,this._base="",this._level=1,this.parseText()}parseText(){let t=this.badgeId.length-1;for(;t>0&&this.isNumber(this.badgeId.charAt(t));)t--;this._base=this.badgeId.substr(0,t+1);const e=this.badgeId.substr(t+1,this.badgeId.length);e&&""!=e&&(this._level=Number.parseInt(e))}isNumber(t){const e=t.charCodeAt(0);return e>=49&&e<=57}set level(t){this._level=Math.max(1,t)}get level(){return this._level}get getBadgeId(){return this._base+this._level}get base(){return this._base}}const io=["nitro-achievements-category-component",""];function no(t,e){if(1&t&&(i.dc(0,"div",8),i.Wc(1),i.cc()),2&t){const t=i.qc().$implicit;i.Kb(1),i.Xc(t.count)}}const ro=function(t,e){return[t,e]},ao=function(t){return{"background-image":t}};function oo(t,e){if(1&t){const t=i.ec();i.dc(0,"div",5),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc().selectAchievement(s)}),i.dc(1,"div",6),i.Uc(2,no,2,1,"div",7),i.cc(),i.cc()}if(2&t){const t=e.$implicit,s=i.qc();i.Kb(1),i.yc("ngClass",i.Dc(3,ro,s.selectedAchievement===t?"bg-primary":"bg-secondary",t&&t._Str_10438?"":"greyscale"))("ngStyle",i.Cc(6,ao,"url("+s.getBadgeImageUrl(t)+")")),i.Kb(1),i.yc("ngIf",t.count)}}function co(t,e){if(1&t&&(i.dc(0,"span",19),i.Wc(1),i.rc(2,"translate"),i.dc(3,"b"),i.Wc(4),i.cc(),i.Zb(5,"img",20),i.cc()),2&t){const t=i.qc(2);i.Kb(1),i.Yc("",i.sc(2,3,"achievements.details.reward")," "),i.Kb(3),i.Xc(t.selectedAchievement.rewardAmount),i.Kb(1),i.yc("src",t.getCurrencyUrl(t.selectedAchievement.rewardType),i.Nc)}}const _o=function(t){return{width:t}};function ho(t,e){if(1&t&&(i.dc(0,"div",21),i.Zb(1,"div",22),i.dc(2,"div",23),i.dc(3,"span",24),i.Wc(4),i.cc(),i.cc(),i.cc()),2&t){const t=i.qc(2);i.Kb(1),i.yc("ngStyle",i.Cc(2,_o,t.getProgress(t.selectedAchievement))),i.Kb(3),i.Xc(t.getProgress(t.selectedAchievement,!0))}}const lo=function(t){return[t]};function uo(t,e){if(1&t&&(i.dc(0,"div",9),i.dc(1,"div",10),i.dc(2,"div",11),i.Zb(3,"img",12),i.cc(),i.dc(4,"span",13),i.Wc(5),i.cc(),i.cc(),i.dc(6,"div",14),i.dc(7,"span",15),i.Wc(8),i.cc(),i.dc(9,"span",16),i.Wc(10),i.cc(),i.Uc(11,co,6,5,"span",17),i.Uc(12,ho,5,4,"div",18),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(3),i.yc("ngClass",i.Cc(7,lo,t.selectedAchievement._Str_10438?"":"greyscale"))("src",t.getBadgeImageUrl(t.selectedAchievement),i.Nc),i.Kb(2),i.Xc(t.getBadgeLevelString(t.selectedAchievement)),i.Kb(3),i.Xc(t.getBadgeText(t.selectedAchievement)),i.Kb(2),i.Xc(t.getBadgeText(t.selectedAchievement,!0)),i.Kb(1),i.yc("ngIf",!t.selectedAchievement._Str_7518),i.Kb(1),i.yc("ngIf",!t.selectedAchievement._Str_7518)}}let go=(()=>{class t{constructor(t){this._achivementsService=t,this.category=null,this._selectedAchievement=null}ngOnChanges(t){const e=t.category.currentValue;e&&e!==t.category.previousValue&&(this._selectedAchievement=null)}selectAchievement(t){t.unseen=0,this._selectedAchievement=t}getAchievedBadgeId(t){return t._Str_7518?t.badgeId:u.a.instance.localization.getBadgeBaseAndLevel(t.badgeId)}getBadgeText(t,e=!1){const s=this.getAchievedBadgeId(t),i=new so(s);let n;return n=this.getText(e?["badge_desc_"+s,"badge_desc_"+i.base]:["badge_name_"+s,"badge_name_"+i.base]),n.replace("%roman%",this.getRomanNumeral(i.level)).replace("%limit%",t._Str_24142.toString())}getText(t){let e="",s=0;for(;s<t.length;){const i=t[s];if(e=u.a.instance.getLocalization(i),e!==i)return e;s++}return""}getProgress(t,e=!1){if(t)return e?t.progress+"/"+t.toNextProgress:Math.trunc(t.progress/t.toNextProgress*100)+"%"}getBadgeLevelString(t){if(!t)return;let e=u.a.instance.getLocalization("achievements.details.level");return e=e.replace("%level%",Math.max(1,t.level-1).toString()),e=e.replace("%limit%",t.totalLevels.toString()),e}getRomanNumeral(t){return u.a.instance.localization.getRomanNumeral(t)}getBadgeImageUrl(t){let e=t.badgeId;return t.totalLevels>1&&(e=e.replace(/[0-9]/g,""),e+=t.level-1>0?t.level-1:t.level),u.a.instance.sessionDataManager.getBadgeUrl(e)}getCurrencyUrl(t){return u.a.instance.getConfiguration("currency.asset.icon.url").replace("%type%",t.toString())}get selectedAchievement(){return this._selectedAchievement}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Ya))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-achievements-category-component",""]],inputs:{category:"category"},features:[i.Ib],attrs:io,decls:7,vars:5,consts:[[1,"text-center","bg-secondary","rounded","px-2","mb-2"],[1,"grid-container","w-100","mb-2",2,"min-height","156px","max-height","156px","height","156px"],[1,"grid-items","grid-5"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],["class","bg-secondary mb-auto w-100 p-1 rounded d-flex flex-row",4,"ngIf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],[1,"detail-info","has-image","rounded",3,"ngClass","ngStyle"],["class","position-absolute btn btn-sm btn-danger px-1 py-0 rounded count",4,"ngIf"],[1,"position-absolute","btn","btn-sm","btn-danger","px-1","py-0","rounded","count"],[1,"bg-secondary","mb-auto","w-100","p-1","rounded","d-flex","flex-row"],[1,"text-center"],[1,"badge_preview","flex-shrink-0","justify-content-center","d-flex"],[1,"badge_preview_image","align-self-center",3,"ngClass","src"],[1,"font-weight-bolder","text-center","small"],[1,"badge_info","w-100","small"],[1,"mb-1","font-weight-bolder"],[1,"mb-1","d-block",2,"min-height","42px"],["class","mb-1 d-block",4,"ngIf"],["class","achievement-progress-bar bg-primary rounded p-1 position-relative",4,"ngIf"],[1,"mb-1","d-block"],[1,"pl-1",3,"src"],[1,"achievement-progress-bar","bg-primary","rounded","p-1","position-relative"],[1,"achievement-progress-bar-inner","bg-success","rounded","py-3",3,"ngStyle"],[1,"achievement-progress-bar-content","text-center","d-flex","justify-content-center"],[1,"align-self-center"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Wc(1),i.rc(2,"translate"),i.cc(),i.dc(3,"perfect-scrollbar",1),i.dc(4,"div",2),i.Uc(5,oo,3,8,"div",3),i.cc(),i.cc(),i.Uc(6,uo,13,9,"div",4)),2&t&&(i.Kb(1),i.Xc(i.sc(2,3,"quests."+e.category.name+".name")),i.Kb(4),i.yc("ngForOf",e.category.achievements),i.Kb(1),i.yc("ngIf",e.selectedAchievement))},directives:[Oi.b,p.m,p.n,p.l,p.o],pipes:[Fs],encapsulation:2}),t})();function mo(t,e){if(1&t&&i.Zb(0,"div",9),2&t){const t=i.qc(2);i.yc("category",t.selectedCategory)}}function po(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"h6",3),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",4),i.nc("click",function(){return i.Lc(t),i.qc().hide()}),i.Zb(6,"i",5),i.cc(),i.cc(),i.dc(7,"div",6),i.Zb(8,"div",7),i.Uc(9,mo,1,1,"div",8),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Xc(i.sc(4,2,"inventory.achievements")),i.Kb(6),i.yc("ngIf",t.selectedCategory)}}let fo=(()=>{class t{constructor(t,e,s){this._settingsService=t,this._achivementsService=e,this._ngZone=s,this.visible=!1}ngOnChanges(t){const e=t.visible.currentValue;e&&e!==(t.visible.previousValue||!1)&&this.prepareAchievements()}prepareAchievements(){this._achivementsService.isInitalized||this._achivementsService.loadAchievements()}hide(){this._settingsService.hideAchievements()}get selectedCategory(){return this._achivementsService.selectedCategory}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(m),i.Yb(Ya),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-achievements-main-component"]],inputs:{visible:"visible"},features:[i.Ib],decls:1,vars:1,consts:[["class","nitro-achievements card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-achievements","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-3"],["nitro-achievements-category-list-component","",1,"col-6","d-flex","flex-column"],["class","col-6 d-flex flex-column","nitro-achievements-category-component","",3,"category",4,"ngIf"],["nitro-achievements-category-component","",1,"col-6","d-flex","flex-column",3,"category"]],template:function(t,e){1&t&&i.Uc(0,po,10,4,"div",0),2&t&&i.yc("ngIf",e.visible)},directives:[p.n,li,vi,eo,go],pipes:[Fs],encapsulation:2}),t})();var Eo=s("7sb4");let So=(()=>{class t{constructor(t,e){this._notificationService=t,this._ngZone=e,this._component=null,this.registerMessages()}static getReasonAsString(t){switch(t){case 1:return"useless";case 2:return"abusive";default:return"resolved"}}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._messages&&this.unregisterMessages(),this._messages=[new Eo.a(this.onCallForHelpResultMessageEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)}unregisterMessages(){if(this._messages&&this._messages.length)for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t)}onCallForHelpResultMessageEvent(e){if(!e)return;const s=e.getParser();if(!s)return;let i=s.messageText;""===i&&(i=u.a.instance.getLocalization("${help.cfh.closed."+t.getReasonAsString(s.resultType)+"}")),this._ngZone.run(()=>this._notificationService.alert(i,"${mod.alert.title}"))}get component(){return this._component}set component(t){this._component=t}}return t.\u0275fac=function(e){return new(e||t)(i.kc(Ge),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})(),Io=(()=>{class t{constructor(t,e){this._callForHelpService=t,this._ngZone=e}ngOnInit(){this._callForHelpService.component=this}ngOnDestroy(){this._callForHelpService.component=null}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(So),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-call-for-help-main-component"]],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})(),Ro=(()=>{class t{openPage(t){}closePage(t){t&&this._component&&this._component.close(t)}closeAll(){this._component&&this._component.closeAll()}get component(){return this._component}set component(t){this._component=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})(),bo=(()=>{class t{constructor(t){this._habbopediaService=t,this.url=""}close(){this._habbopediaService.closePage(this)}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Ro))},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();const vo=["pagesContainer"];function To(t,e){}let Oo=(()=>{class t{constructor(t,e,s){this._habbopediaService=t,this._componentFactoryResolver=e,this._ngZone=s,this._pages=new Map}ngOnInit(){this._habbopediaService.component=this,u.a.instance.addLinkEventTracker(this)}ngOnDestroy(){u.a.instance.removeLinkEventTracker(this),this._habbopediaService.component=null}openPage(t){this.buildPage(bo,t)}buildPage(t,e){const s=this.createComponent(t);return s?(s.url=e,s):null}createComponent(t){if(!t)return null;const e=this._componentFactoryResolver.resolveComponentFactory(t);let s=null;return e&&(s=this.pagesContainer.createComponent(e),this._pages.set(s.instance,s)),s.instance}close(t){if(!t)return;const e=this._pages.get(t);e&&(this._pages.delete(t),this.removeView(e.hostView))}closeAll(){for(const t of this._pages.keys())this.close(t)}removeView(t){if(!t)return;const e=this.pagesContainer.indexOf(t);-1!==e&&this.pagesContainer.remove(e)}linkReceived(t){const e=t.split("/");e.length<2||(e.shift(),this.openPage(e.join("/")))}get eventUrlPrefix(){return"habbopages/"}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Ro),i.Yb(i.m),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-pedia-main-component"]],viewQuery:function(t,e){if(1&t&&i.cd(vo,1,i.Z),2&t){let t;i.Hc(t=i.oc())&&(e.pagesContainer=t.first)}},decls:2,vars:0,consts:[["pagesContainer",""]],template:function(t,e){1&t&&i.Uc(0,To,0,0,"ng-template",null,0,i.Vc)},encapsulation:2}),t})();var yo=s("sRxW");let Ao=(()=>{class t{}return t.GENERIC="hd",t.HEAD="head",t.TORSO="torso",t.LEGS="legs",t.HOTLOOKS="hotlooks",t.WARDROBE="wardrobe",t.EFFECTS="effects",t})(),Co=(()=>{class t{constructor(t){this._model=t,this._figureString=null,this._isDisposed=!1}dispose(){this._isDisposed=!0}update(t,e=0,s=4){this._figureString=t}resetFigure(t){}get disposed(){return this._isDisposed}get figureString(){return this._figureString}}return t._Str_9887=4,t})(),Mo=(()=>{class t{constructor(){this._gender="M",this._direction=4,this._avatarEffectType=-1,this._direction=Co._Str_9887,this._view=new Co(this)}loadAvatarData(t,e){this._data=new Map,this._colors=new Map,this._gender=e,this.parseFigureString(t),this.updateView()}dispose(){this._data=null,this._colors=null,this._isDisposed=!0,this._view&&(this._view.dispose(),this._view=null)}get disposed(){return this._isDisposed}parseFigureString(t){if(!t)return;const e=t.split(".");if(e&&e.length)for(const s of e){const t=s.split("-");if(!t.length)continue;const e=t[0],i=parseInt(t[1]),n=[];let r=2;for(;r<t.length;)n.push(parseInt(t[r])),r++;n.length||n.push(0),this.savePartSetId(e,i,!1),this.savePartSetColourId(e,n,!1)}}getPartSetId(t){const e=this._data.get(t);return void 0!==e?e:-1}getColourIds(t){const e=this._colors.get(t);return void 0!==e?e:[]}getFigureString(){let t="";const e=[];for(const[i,n]of this._data.entries()){const t=this._colors.get(i);let s=i+"-"+n;if(t&&t.length){let e=0;for(;e<t.length;)s=s+"-"+t[e],e++}e.push(s)}let s=0;for(;s<e.length;)t+=e[s],s<e.length-1&&(t+="."),s++;return t}savePartData(t,e,s,i=!1){this.savePartSetId(t,e,i),this.savePartSetColourId(t,s,i)}savePartSetId(e,s,i=!0){switch(e){case t.FACE:case t.HR:case t.HA:case t.HE:case t.EA:case t.FA:case t.CH:case t.CC:case t.CHEST_ACCESSORIES:case t.CHEST_PRINTS:case t.LG:case t.SH:case t.WA:s>=0?this._data.set(e,s):this._data.delete(e)}i&&this.updateView()}savePartSetColourId(e,s,i=!0){switch(e){case t.FACE:case t.HR:case t.HA:case t.HE:case t.EA:case t.FA:case t.CH:case t.CC:case t.CHEST_ACCESSORIES:case t.CHEST_PRINTS:case t.LG:case t.SH:case t.WA:this._colors.set(e,s)}i&&this.updateView()}getFigureStringWithFace(e,s=!0){let i="";const n=[t.FACE],r=[];for(const o of n){const i=this._colors.get(o);if(void 0===i)continue;let n=this._data.get(o);o===t.FACE&&s&&(n=e);let a=o+"-"+n;if(n>=0){let t=0;for(;t<i.length;)a=a+"-"+i[t],t++}r.push(a)}let a=0;for(;a<r.length;)i+=r[a],a<r.length-1&&(i+="."),a++;return i}updateView(){this._view.update(this.getFigureString(),this._avatarEffectType,this._direction)}get view(){return this._view}get gender(){return this._gender}resetFigure(t){this.updateView()}set avatarEffectType(t){this._avatarEffectType=t}get avatarEffectType(){return this._avatarEffectType}get direction(){return this._direction}set direction(t){this._direction=t,this.updateView()}}return t.M="M",t.F="F",t.U="U",t.H="h",t.STD="std",t._Str_2028="0",t.FACE="hd",t.HR="hr",t.HA="ha",t.HE="he",t.EA="ea",t.FA="fa",t.CC="cc",t.CH="ch",t.CHEST_ACCESSORIES="ca",t.CHEST_PRINTS="cp",t.LG="lg",t.SH="sh",t.WA="wa",t})();class Uo{constructor(t,e,s=!1){this._model=t,this._partColor=e,this._isSelected=!1,this._isDisabledForWearing=s,this._Str_22595()}dispose(){this._model=null,this._partColor=null}get isSelected(){return this._isSelected}set isSelected(t){this._isSelected=t}_Str_22595(){this._isHC=!!this._partColor&&this._partColor.clubLevel>0}get _Str_3420(){return this._partColor}get color(){return K.a.int2rgb(this._partColor._Str_915)}get _Str_14863(){return this._isDisabledForWearing}get isHC(){return this._isHC}}var Do=s("IxQr");let wo=(()=>{class t{constructor(t,e,s,i=!0,n=!1){if(this._renderManager=u.a.instance.avatar,this._model=t,this._partSet=e,this._colors=s,this._useColors=i,this._isDisabledForWearing=n,this._thumbContainer=null,this._imageUrl=null,this._maxColorIndex=0,this._isValidFigure=!1,this._isSelected=!1,this._isHC=!1,this._isSellable=!1,this._isClear=!1,this._disposed=!1,this._isInitalized=!1,e){const t=e._Str_806;for(const e of t)this._maxColorIndex=Math.max(this._maxColorIndex,e._Str_827)}}init(){this._isInitalized||(this._isInitalized=!0,this.update())}dispose(){this._disposed||(this._renderManager=null,this._model=null,this._partSet=null,this._colors=null,this._imageUrl=null,this._disposed=!0,this._isInitalized=!1,this._thumbContainer&&(this._thumbContainer.destroy(),this._thumbContainer=null))}update(){this.updateThumbVisualization()}analyzeFigure(){if(!(this._renderManager&&this._model&&this.partSet&&this.partSet._Str_806&&this.partSet._Str_806.length))return!1;const t=this._renderManager.createFigureContainer(this.partSet.type+"-"+this.partSet.id);return this._renderManager.isFigureContainerReady(t)?(this._isValidFigure=!0,!0):(this._renderManager.downloadAvatarFigure(t,this),!1)}renderThumb(){if(!this._renderManager||!this.partSet||!this._model)return null;if(!this._isValidFigure&&!this.analyzeFigure())return null;const e=this.partSet._Str_806.concat().sort(this.sortByDrawOrder),s=new g.d;for(const i of e){if(!i)continue;let e=null,n=0,r=!1;for(;!r&&n<t.THUMB_DIRECTIONS.length;)e=this._renderManager.getAssetByName(Mo.H+"_"+Mo.STD+"_"+i.type+"_"+i.id+"_"+t.THUMB_DIRECTIONS[n]+"_"+Mo._Str_2028),e&&e.texture?r=!0:n++;if(!r)continue;const a=e.offsetX,o=e.offsetY;let c=null;if(this._useColors&&i._Str_827>0){const t=this._colors[i._Str_827-1];t&&(c=t)}const _=new g.n(e.texture);_.position.set(a,o),c&&(_.tint=c._Str_915),s.addChild(_)}return s}updateThumbVisualization(){if(!this._isInitalized)return;let t=this._thumbContainer;t||(t=this.renderThumb()),t&&(this._partSet?(this._isHC=this._partSet.clubLevel>0,this._isSellable=this._partSet._Str_651):(this._isHC=!1,this._isSellable=!1),this._isDisabledForWearing&&this.setAlpha(t,.2),this._imageUrl=Do.a.generateImageUrl(t))}setAlpha(t,e){return t.alpha=e,t}sortByDrawOrder(e,s){const i=t.DRAW_ORDER.indexOf(e.type),n=t.DRAW_ORDER.indexOf(s.type);return i<n?-1:i>n?1:e.index<s.index?-1:e.index>s.index?1:0}resetFigure(t){this.analyzeFigure()&&this.update()}get disposed(){return this._disposed}get id(){return this._partSet?this._partSet.id:-1}get partSet(){return this._partSet}set colors(t){this._colors=t,this.update()}get isDisabledForWearing(){return this._isDisabledForWearing}set iconImage(t){this._thumbContainer=t,this.update()}get imageUrl(){return this._imageUrl}get colorLayerCount(){return this._maxColorIndex}get isSelected(){return this._isSelected}set isSelected(t){this._isSelected=t}get isHC(){return this._isHC}get isSellable(){return this._isSellable}get isClear(){return this._isClear}set isClear(t){this._isClear=t}}return t.THUMB_DIRECTIONS=[2,6,0,4,3,1],t.DRAW_ORDER=[St.a.LEFT_HAND_ITEM,St.a.LEFT_HAND,St.a.LEFT_SLEEVE,St.a.LEFT_COAT_SLEEVE,St.a.BODY,St.a.SHOES,St.a.LEGS,St.a.CHEST,St.a.CHEST_ACCESSORY,St.a.COAT_CHEST,St.a.CHEST_PRINT,St.a.WAIST_ACCESSORY,St.a.RIGHT_HAND,St.a.RIGHT_SLEEVE,St.a.RIGHT_COAT_SLEEVE,St.a.HEAD,St.a.FACE,St.a.EYES,St.a.HAIR,St.a.HAIR_BIG,St.a.FACE_ACCESSORY,St.a.EYE_ACCESSORY,St.a.HEAD_ACCESSORY,St.a.HEAD_ACCESSORY_EXTRA,St.a.RIGHT_HAND_ITEM],t})();class No{constructor(t,e,s){this.MAX_PALETTES=2,this._selectedPartIndex=-1,this._name=t,this._parts=e,this._palettes=s,this._selectedPartIndex=-1}static defaultColorId(t,e){if(!t||!t.length)return-1;let s=0;for(;s<t.length;){const i=t[s];if(i._Str_3420&&i._Str_3420.clubLevel<=e)return i._Str_3420.id;s++}return-1}init(){for(const t of this._parts)t&&t.init()}dispose(){if(this._parts){for(const t of this._parts)t.dispose();this._parts=null}if(this._palettes){for(const t of this._palettes)if(t)for(const e of t)e.dispose();this._palettes=null}this._selectedPartIndex=-1,this._paletteIndexes=null}selectPartId(t){if(!this._parts)return;let e=0;for(;e<this._parts.length;){if(this._parts[e].id===t)return void this.selectPartIndex(e);e++}}selectColorIds(t){if(!t||!this._palettes)return;this._paletteIndexes=new Array(t.length);let e=0;for(;e<this._palettes.length;){const s=this.getPalette(e);if(s){let i=0;if(t.length>e)i=t[e];else{const t=s[0];t&&t._Str_3420&&(i=t._Str_3420.id)}let n=0;for(;n<s.length;){const t=s[n];t._Str_3420.id===i?(this._paletteIndexes[e]=n,t.isSelected=!0):t.isSelected=!1,n++}}e++}this.updatePartColors()}selectPartIndex(t){if(!this._parts)return null;if(this._selectedPartIndex>=0&&this._parts.length>this._selectedPartIndex){const t=this._parts[this._selectedPartIndex];t&&(t.isSelected=!1)}if(this._parts.length>t){const e=this._parts[t];if(e)return e.isSelected=!0,this._selectedPartIndex=t,e}return null}selectColorIndex(t,e){const s=this.getPalette(e);if(!s)return null;if(s.length<=t)return null;this.deselectColorIndex(this._paletteIndexes[e],e),this._paletteIndexes[e]=t;const i=s[t];return i?(i.isSelected=!0,this.updatePartColors(),i):null}getCurrentColorIndex(t){return this._paletteIndexes[t]}deselectColorIndex(t,e){const s=this.getPalette(e);if(!s)return;if(s.length<=t)return;const i=s[t];i&&(i.isSelected=!1)}getSelectedColorIds(){if(!this._paletteIndexes||!this._paletteIndexes.length)return null;if(!this._palettes||!this._palettes.length)return null;const t=this._palettes[0];if(!t||!t.length)return null;const e=t[0];if(!e||!e._Str_3420)return null;const s=e._Str_3420.id,i=[];let n=0;for(;n<this._paletteIndexes.length;){const t=this._palettes[n];if(t&&!(t.length<=n))if(t.length>this._paletteIndexes[n]){const e=t[this._paletteIndexes[n]];i.push(e&&e._Str_3420?e._Str_3420.id:s)}else i.push(s);n++}const r=this.getCurrentPart();return r?i.slice(0,Math.max(r.colorLayerCount,1)):null}getSelectedColors(){const t=[];let e=0;for(;e<this._paletteIndexes.length;){const s=this.getSelectedColor(e);t.push(s?s._Str_3420:null),e++}return t}getSelectedColor(t){const e=this.getPalette(t);return!e||e.length<=this._paletteIndexes[t]?null:e[this._paletteIndexes[t]]}getSelectedColorId(t){const e=this.getSelectedColor(t);return e&&e._Str_3420?e._Str_3420.id:0}get parts(){return this._parts}getPalette(t){return!this._paletteIndexes||!this._palettes||this._palettes.length<=t?null:this._palettes[t]}getCurrentPart(){return this._parts[this._selectedPartIndex]}updatePartColors(){const t=this.getSelectedColors();for(const e of this._parts)e&&(e.colors=t)}hasClubSelectionsOverLevel(t){let e=!1;const s=this.getSelectedColors();if(s){let i=0;for(;i<s.length;){const n=s[i];n&&n.clubLevel>t&&(e=!0),i++}}let i=!1;const n=this.getCurrentPart();if(n&&n.partSet){const e=n.partSet;e&&e.clubLevel>t&&(i=!0)}return e||i}hasInvalidSelectedItems(t){const e=this.getCurrentPart();if(!e)return!1;const s=e.partSet;return s&&s._Str_651?!t.hasFigureSetId(s.id):void 0}stripClubItemsOverLevel(t){const e=this.getCurrentPart();if(e&&e.partSet&&e.partSet.clubLevel>t){const t=this.selectPartIndex(0);return t&&!t.partSet&&this.selectPartIndex(1),!0}return!1}stripClubColorsOverLevel(t){const e=[],s=this.getSelectedColors();let i=!1;const n=this.getPalette(0),r=No.defaultColorId(n,t);if(-1===r)return!1;let a=0;for(;a<s.length;){const n=s[a];n?n.clubLevel>t?(e.push(r),i=!0):e.push(n.id):(e.push(r),i=!0),a++}return i&&this.selectColorIds(e),i}get name(){return this._name}get selectedPartIndex(){return this._selectedPartIndex}}class Lo{constructor(t){this._editor=t,this._isInitalized=!1,this._maxPaletteCount=0}dispose(){this._categories=null,this._editor=null,this._disposed=!0}get disposed(){return this._disposed}init(){this._categories||(this._categories=new Yi.a)}reset(){if(this._isInitalized=!1,this._categories)for(const t of this._categories.getValues())t&&t.dispose();this._categories=new Yi.a,this._viewer&&this._viewer.prepareModel()}setViewer(t){this._viewer=t}addCategory(t){let e=this._categories.getValue(t);e||(e=this._editor._Str_24037(this,t),e&&(this._categories.add(t,e),this.updateSelectionsFromFigure(t)))}updateSelectionsFromFigure(t){if(!this._categories||!this._editor||!this._editor.figureData)return;const e=this._categories.getValue(t);if(!e)return;const s=this._editor.figureData.getPartSetId(t);let i=this._editor.figureData.getColourIds(t);i||(i=[]),e.selectPartId(s),e.selectColorIds(i)}hasClubSelectionsOverLevel(t){if(!this._categories)return!1;for(const e of this._categories.getValues())if(e&&e.hasClubSelectionsOverLevel(t))return!0;return!1}hasInvalidSelectedItems(t){if(!this._categories)return!1;for(const e of this._categories.getValues())if(e&&e.hasInvalidSelectedItems(t))return!0;return!1}_Str_15298(t){if(!this._categories)return!1;let e=!1;for(const s of this._categories.getKeys()){const i=this._categories.getValue(s);if(!i)continue;let n=!1;if(i.stripClubItemsOverLevel(t)&&(n=!0),i.stripClubColorsOverLevel(t)&&(n=!0),n){const t=i.getCurrentPart();t&&this._editor&&this._editor.figureData&&i&&this._editor.figureData.savePartData(s,t.id,i.getSelectedColorIds(),!0),e=!0}}return e}_Str_8360(){if(!this._categories)return!1;for(const t of this._categories.getKeys())this._categories.getValue(t);return!1}selectPart(t,e){const s=this._categories.getValue(t);if(!s)return;const i=s.selectedPartIndex;s.selectPartIndex(e);const n=s.getCurrentPart();if(n){if(n.isDisabledForWearing)return s.selectPartIndex(i),void this._editor.openHabboClubAdWindow();this._maxPaletteCount=n.colorLayerCount,this._editor&&this._editor.figureData&&this._editor.figureData.savePartData(t,n.id,s.getSelectedColorIds(),!0)}}selectColor(t,e,s){const i=this._categories.getValue(t);if(!i)return;const n=i.getCurrentColorIndex(s);if(i.selectColorIndex(e,s),this._editor&&this._editor.figureData){if(i.getSelectedColor(s)._Str_14863)return i.selectColorIndex(n,s),void this._editor.openHabboClubAdWindow();this._editor.figureData.savePartSetColourId(t,i.getSelectedColorIds(),!0)}}get controller(){return this._editor}getCategoryData(t){return this._isInitalized||this.init(),this._categories?this._categories.getValue(t):null}get categories(){return this._categories}get canSetGender(){return!1}get maxPaletteCount(){return this._maxPaletteCount}set maxPaletteCount(t){this._maxPaletteCount=t}get name(){return null}}class xo extends Lo{constructor(){super(...arguments),this._imageCallBackHandled=!1}init(){super.init(),this.addCategory(Mo.FACE),this._isInitalized=!0}selectColor(t,e,s){super.selectColor(t,e,s),this.updateSelectionsFromFigure(Mo.FACE)}updateSelectionsFromFigure(t){if(!this._categories||!this._editor||!this._editor.figureData)return;const e=this._categories.getValue(t);if(!e)return;const s=this._editor.figureData.getPartSetId(t);let i=this._editor.figureData.getColourIds(t);i||(i=[]),e.selectPartId(s),e.selectColorIds(i);for(const n of e.parts){const t=this.controller.figureData.getFigureStringWithFace(n.id),e=u.a.instance.avatar.createAvatarImage(t,It.a.LARGE,null,this),s=e.getImageAsSprite(Rt.a.HEAD);s&&(s.y=10,n.iconImage=s,setTimeout(()=>e.dispose(),0))}}resetFigure(t){this._imageCallBackHandled||(this._imageCallBackHandled=!0,this.updateSelectionsFromFigure(Mo.FACE))}get canSetGender(){return!0}get name(){return Ao.GENERIC}}class Po extends Lo{init(){super.init(),this.addCategory(Mo.HR),this.addCategory(Mo.HA),this.addCategory(Mo.HE),this.addCategory(Mo.EA),this.addCategory(Mo.FA),this._isInitalized=!0}get name(){return Ao.HEAD}}class Fo extends Lo{init(){super.init(),this.addCategory(Mo.LG),this.addCategory(Mo.SH),this.addCategory(Mo.WA),this._isInitalized=!0}get name(){return Ao.LEGS}}class ko extends Lo{init(){super.init(),this.addCategory(Mo.CH),this.addCategory(Mo.CHEST_PRINTS),this.addCategory(Mo.CC),this.addCategory(Mo.CHEST_ACCESSORIES),this._isInitalized=!0}get name(){return Ao.TORSO}}const Wo=function(t){return{active:t}};function Vo(t,e){if(1&t){const t=i.ec();i.dc(0,"button",12),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc(2).selectCategory(s.name)}),i.Wc(1),i.rc(2,"translate"),i.cc()}if(2&t){const t=e.$implicit,s=i.qc(2);i.yc("ngClass",i.Cc(4,Wo,s.activeCategory===t)),i.Kb(1),i.Yc(" ",i.sc(2,2,"avatareditor.category."+t.name)," ")}}function Go(t,e){if(1&t&&i.Zb(0,"div",13),2&t){const t=i.qc(2);i.yc("model",t.activeCategory)("gender",t.gender)}}function Ho(t,e){if(1&t){const t=i.ec();i.dc(0,"div",14),i.dc(1,"div",15),i.Zb(2,"div",16),i.Zb(3,"div",17),i.Zb(4,"div",18),i.dc(5,"div",19),i.dc(6,"i",20),i.nc("click",function(){i.Lc(t);const e=i.qc(2);return e.rotateAvatar(e.figureData.direction+1)}),i.cc(),i.dc(7,"i",21),i.nc("click",function(){i.Lc(t);const e=i.qc(2);return e.rotateAvatar(e.figureData.direction-1)}),i.cc(),i.cc(),i.cc(),i.dc(8,"div",22),i.dc(9,"button",23),i.nc("click",function(){return i.Lc(t),i.qc(2).resetFigure()}),i.Zb(10,"i",24),i.cc(),i.dc(11,"button",23),i.nc("click",function(){return i.Lc(t),i.qc(2).clearFigure()}),i.Zb(12,"i",25),i.cc(),i.cc(),i.dc(13,"button",26),i.nc("click",function(){return i.Lc(t),i.qc(2).saveFigure()}),i.Wc(14),i.rc(15,"translate"),i.cc(),i.cc()}if(2&t){const t=i.qc(2);i.Kb(4),i.yc("figure",t.figureData.view.figureString)("direction",t.figureData.direction)("scale",2),i.Kb(10),i.Yc(" ",i.sc(15,4,"avatareditor.save")," ")}}function Bo(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"h6",3),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",4),i.nc("click",function(){return i.Lc(t),i.qc().hide()}),i.Zb(6,"i",5),i.cc(),i.cc(),i.dc(7,"div",6),i.dc(8,"div",7),i.dc(9,"div",8),i.Uc(10,Vo,3,6,"button",9),i.cc(),i.Uc(11,Go,1,2,"div",10),i.cc(),i.Uc(12,Ho,16,6,"div",11),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Xc(i.sc(4,4,"avatareditor.title")),i.Kb(7),i.yc("ngForOf",t.categories.getValues()),i.Kb(1),i.yc("ngIf",t.activeCategory),i.Kb(1),i.yc("ngIf",t.figureData)}}let jo=(()=>{class t{constructor(t,e,s){this._inventoryService=t,this._settingsService=e,this._avatarEditorService=s,this.visible=!1}ngOnInit(){this._avatarEditorService.component=this,this._figureStructureData=u.a.instance.avatar.structureData,this._categories=new Yi.a,this._figures=new Map,this._gender=Mo.M,this._clubMemberLevel=0,this._lastSavedFigure="",this._lastSavedGender=Mo.M;const e=new Mo,s=new Mo;e.loadAvatarData(t._Str_18590,Mo.M),s.loadAvatarData(t._Str_18820,Mo.F),this._figures.set(Mo.M,e),this._figures.set(Mo.F,s),this._categories.add(Ao.GENERIC,new xo(this)),this._categories.add(Ao.HEAD,new Po(this)),this._categories.add(Ao.TORSO,new ko(this)),this._categories.add(Ao.LEGS,new Fo(this)),this.selectFirstCategory()}ngOnDestroy(){this._avatarEditorService.component=null}hide(){this._settingsService.hideAvatarEditor()}selectFirstCategory(){const t=this._categories.getWithIndex(0);t&&this.selectCategory(t.name)}selectCategory(t){if(!t)return;const e=this._categories.getValue(t);e&&(this._aciveCategory=e)}loadAvatarInEditor(t,e,s,i=!0){switch(e){case Mo.M:case"m":case"M":e=Mo.M;break;case Mo.F:case"f":case"F":e=Mo.F;break;default:e=Mo.M}let n=!1;this._clubMemberLevel=s;const r=this._figures.get(e);if(r){if(t!==r.getFigureString()&&(n=!0),e!==this._gender&&(this._gender=e,n=!0),r.loadAvatarData(t,e),n)for(const t of this._categories.getValues())t&&t.reset();i&&(this._lastSavedFigure=t,this._lastSavedGender=this._gender)}}_Str_24037(e,s){if(!e||!s)return null;const i=[],n=[];let r=0;for(;r<t._Str_6331;)n.push([]),r++;const a=this._Str_20100(s);if(!a)return null;const o=this._Str_783(a._Str_734);if(!o)return null;let c=this.figureData.getColourIds(s);c||(c=[]);const _=new Array(c.length),h=this._Str_24175;for(const u of o.colors.values())if(u.isSelectable&&(h||this.clubMemberLevel>=u.clubLevel)){let i=0;for(;i<t._Str_6331;){const t=new Uo(e,u,this.clubMemberLevel<u.clubLevel);n[i].push(t),i++}if(s!==Mo.FACE){let t=0;for(;t<c.length;)u.id===c[t]&&(_[t]=u),t++}}let l=0,d=[];if(h?(l=2,d=u.a.instance.avatar._Str_838(this.gender,l)):d=u.a.instance.avatar._Str_838(this.gender,this.clubMemberLevel),-1==d.indexOf(s)){const t=new wo(e,null,null,!1);t.isClear=!0,i.push(t)}const g=s!==Mo.FACE,m=a._Str_710;let p=m.length-1;for(;p>=0;){const t=m.getWithIndex(p);let s=!1;if((t.gender===Mo.U||t.gender==this.gender)&&(s=!0),t._Str_608&&s&&(h||this.clubMemberLevel>=t.clubLevel)){const s=this.clubMemberLevel<t.clubLevel;let n=!0;if(t._Str_651&&(n=this._inventoryService&&this._inventoryService.hasFigureSetId(t.id)),n){const n=new wo(e,t,_,g,s);i.push(n)}}p--}for(i.sort(this._Str_25757?this._Str_25189:this._Str_23935),r=0;r<t._Str_6331;)n[r].sort(this._Str_23625),r++;return new No(s,i,n)}openHabboClubAdWindow(){}_Str_20100(t){return this._figureStructureData?this._figureStructureData._Str_740(t):null}_Str_783(t){return this._figureStructureData?this._figureStructureData._Str_783(t):null}_Str_25189(t,e){const s=t.partSet?t.partSet.clubLevel:9999999999,i=e.partSet?e.partSet.clubLevel:9999999999,n=!!t.partSet&&t.partSet._Str_651,r=!!e.partSet&&e.partSet._Str_651;return n&&!r?1:r&&!n||s>i?-1:s<i?1:t.partSet.id>e.partSet.id?-1:t.partSet.id<e.partSet.id?1:0}_Str_23935(t,e){const s=t.partSet?t.partSet.clubLevel:-1,i=e.partSet?e.partSet.clubLevel:-1,n=!!t.partSet&&t.partSet._Str_651,r=!!e.partSet&&e.partSet._Str_651;return n&&!r?1:r&&!n||s<i?-1:s>i?1:t.partSet.id<e.partSet.id?-1:t.partSet.id>e.partSet.id?1:0}_Str_23625(t,e){const s=t._Str_3420?t._Str_3420.clubLevel:-1,i=e._Str_3420?e._Str_3420.clubLevel:-1;return s<i?-1:s>i?1:t._Str_3420.index<e._Str_3420.index?-1:t._Str_3420.index>e._Str_3420.index?1:0}rotateAvatar(t){let e=t;e<yo.a.MIN_DIRECTION&&(e=yo.a.MAX_DIRECTION+(e+1)),e>yo.a.MAX_DIRECTION&&(e-=yo.a.MAX_DIRECTION+1),this.figureData.direction=e}saveFigure(){const t=this.figureData;t&&(this._lastSavedFigure=t.getFigureString(),this._lastSavedGender=t.gender,u.a.instance.communication.connection.send(new Ki.a(t.gender,this._lastSavedFigure)),this.hide())}clearFigure(){const t=this.figureData;t&&this.loadAvatarInEditor(t.getFigureStringWithFace(0,!1),t.gender,this._clubMemberLevel,!1)}resetFigure(){this.loadAvatarInEditor(this._lastSavedFigure,this._gender,this._clubMemberLevel)}get _Str_25757(){return u.a.instance.getConfiguration("avatareditor.show.clubitems.first",!0)}get _Str_24175(){return u.a.instance.getConfiguration("avatareditor.show.clubitems.dimmed",!0)}get clubMemberLevel(){return this._clubMemberLevel?this._clubMemberLevel:u.a.instance.sessionDataManager.clubLevel}set clubMemberLevel(t){this._clubMemberLevel=t}get figureStructureData(){return this._figureStructureData}get figureData(){return this._figures.get(this._gender)}get gender(){return this._gender}set gender(t){if(this._gender!==t){switch(t){case Mo.M:case"m":case"M":t=Mo.M;break;case Mo.F:case"f":case"F":t=Mo.F;break;default:t=Mo.M}this._gender=t;for(const t of this._categories.getValues())t.reset();this.selectFirstCategory()}}get categories(){return this._categories}get activeCategory(){return this._aciveCategory}}return t._Str_18590="hr-100.hd-180-7.ch-215-66.lg-270-79.sh-305-62.ha-1002-70.wa-2007",t._Str_18820="hr-515-33.hd-600-1.ch-635-70.lg-716-66-62.sh-735-68",t._Str_6331=2,t.\u0275fac=function(e){return new(e||t)(i.Yb(nn),i.Yb(m),i.Yb(ai))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-avatar-editor-main-component"]],inputs:{visible:"visible"},decls:1,vars:1,consts:[["class","nitro-avatar-editor card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-avatar-editor","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-3"],[1,"col","d-flex","flex-column"],[1,"btn-group",2,"margin-top","-10px","margin-bottom","10px"],["type","button","class","btn btn-secondary btn-menu",3,"ngClass","click",4,"ngFor","ngForOf"],["class","d-flex flex-column","nitro-avatar-model-viewer-component","",3,"model","gender",4,"ngIf"],["class","col-4 d-flex flex-column",4,"ngIf"],["type","button",1,"btn","btn-secondary","btn-menu",3,"ngClass","click"],["nitro-avatar-model-viewer-component","",1,"d-flex","flex-column",3,"model","gender"],[1,"col-4","d-flex","flex-column"],[1,"d-flex","position-relative","flex-grow-1","justify-content-center"],[1,"avatar-spotlight","position-absolute"],[1,"avatar-shadow","position-absolute"],["nitro-avatar-image","",1,"d-flex","justify-content-center","position-absolute","w-100","h-100","avatar-container",3,"figure","direction","scale"],[1,"arrow-container"],[1,"icon","arrow-left-icon",3,"click"],[1,"icon","arrow-right-icon",3,"click"],[1,"btn-group","mb-1"],["type","button",1,"btn","btn-menu","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-undo"],[1,"fas","fa-trash"],["type","button",1,"btn","btn-catalog-buy","btn-sm","btn-success",2,"margin-top","5px",3,"click"]],template:function(t,e){1&t&&i.Uc(0,Bo,13,6,"div",0),2&t&&i.yc("ngIf",e.visible)},encapsulation:2}),t})();var Ko=s("eXwK");function zo(t,e){if(1&t&&i.Zb(0,"div",13),2&t){const t=i.qc(2);i.yc("threadSelector",t.selectThread)}}function Yo(t,e){if(1&t&&i.Zb(0,"div",14),2&t){const t=i.qc(2);i.yc("thread",t.currentThread)}}function Xo(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"h6",3),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",4),i.nc("click",function(){return i.Lc(t),i.qc().hide()}),i.Zb(6,"i",5),i.cc(),i.cc(),i.dc(7,"div",6),i.dc(8,"div",7),i.dc(9,"perfect-scrollbar",8),i.Zb(10,"div",9),i.cc(),i.cc(),i.dc(11,"div",10),i.Uc(12,zo,1,1,"div",11),i.Uc(13,Yo,1,1,"div",12),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Xc(i.sc(4,5,"messenger.title")),i.Kb(7),i.yc("currentThread",t.currentThread)("threadSelector",t.selectThread),i.Kb(2),i.yc("ngIf",t.friendsVisible),i.Kb(1),i.yc("ngIf",t.currentThread)}}let Zo=(()=>{class t{constructor(t,e,s){this._settingsService=t,this._friendListService=e,this._ngZone=s,this.visible=!1,this._friendsVisible=!0,this._currentThread=null,this.selectThread=this.selectThread.bind(this)}ngOnInit(){this._friendListService.component=this,u.a.instance.communication.connection.send(new Ko.a)}ngOnChanges(t){const e=t.visible.currentValue;e||e===t.visible.previousValue||this.selectThread(null)}ngOnDestroy(){this._friendListService.component=null}hide(){this._settingsService.hideFriendList()}displayFriends(){this._friendsVisible=!0,this._currentThread=null}selectThread(t){if(t)return this._friendsVisible=!1,this._currentThread=t,void t.setRead();this._friendsVisible=!0,this._currentThread=null}get currentThread(){return this._currentThread}get friendsVisible(){return this._friendsVisible&&!this._currentThread}get totalFriendRequests(){return this._friendListService.requests.size}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(m),i.Yb(Os),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-friendlist-main-component"]],inputs:{visible:"visible"},features:[i.Ib],decls:1,vars:1,consts:[["class","nitro-friendlist card","style","\n        background-image: url(/assets/images/hotelview/friends.png);\n        background-repeat: no-repeat;\n        background-position: 256% -43px;\n    ",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-friendlist","card",2,"background-image","url(/assets/images/hotelview/friends.png)","background-repeat","no-repeat","background-position","256% -43px",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-3"],[1,"col-4","d-flex","flex-column"],[1,"position-relative","w-100",2,"min-height","320px","max-height","320px","height","320px"],["nitro-friendlist-thread-list-component","",3,"currentThread","threadSelector"],[1,"col","d-flex","flex-column",2,"width","60%"],["nitro-friendlist-friends-viewer-component","",3,"threadSelector",4,"ngIf"],["nitro-friendlist-thread-viewer-component","",3,"thread",4,"ngIf"],["nitro-friendlist-friends-viewer-component","",3,"threadSelector"],["nitro-friendlist-thread-viewer-component","",3,"thread"]],template:function(t,e){1&t&&i.Uc(0,Xo,14,7,"div",0),2&t&&i.yc("ngIf",e.visible)},encapsulation:2}),t})();var qo=s("BgaL"),Qo=s("v12S"),Jo=s("BFtu");let $o=(()=>{class t{constructor(t,e=1){this._previewRoomId=1,this._currentPreviewObjectType=0,this._currentPreviewObjectCategory=0,this._currentPreviewObjectData="",this._currentPreviewRectangle=null,this._currentPreviewCanvasWidth=0,this._currentPreviewCanvasHeight=0,this._currentPreviewScale=64,this._disableUpdate=!1,this._roomEngine=t,this._previewRoomId=P.makeRoomPreviewerId(e),this._addViewOffset=new g.j(0,0),this.onRoomObjectAdded=this.onRoomObjectAdded.bind(this),this.onRoomInitializedonRoomInitialized=this.onRoomInitializedonRoomInitialized.bind(this),this.isRoomEngineReady&&this._roomEngine.events&&(this._roomEngine.events.addEventListener(T.a.ADDED,this.onRoomObjectAdded),this._roomEngine.events.addEventListener(T.a.CONTENT_UPDATED,this.onRoomObjectAdded),this._roomEngine.events.addEventListener(d.a.INITIALIZED,this.onRoomInitializedonRoomInitialized)),this.createRoomForPreview()}dispose(){this.reset(!0),this.isRoomEngineReady&&this._roomEngine.events&&(this._roomEngine.events.removeEventListener(T.a.ADDED,this.onRoomObjectAdded),this._roomEngine.events.removeEventListener(T.a.CONTENT_UPDATED,this.onRoomObjectAdded),this._roomEngine.events.removeEventListener(d.a.INITIALIZED,this.onRoomInitializedonRoomInitialized))}createRoomForPreview(){if(this.isRoomEngineReady){const t=7,e=new Jo.a;e.initializeTileMap(t+2,t+2);let s=1;for(;s<1+t;){let i=1;for(;i<1+t;)e.setTileHeight(i,s,0),i++;s++}e.initializeFromTileData(),this._roomEngine.createRoomInstance(this._previewRoomId,e.getMapData()),e.dispose()}}reset(e){this.isRoomEngineReady&&(this._roomEngine.removeRoomObjectFloor(this._previewRoomId,t.PREVIEW_OBJECT_ID),this._roomEngine.removeRoomObjectWall(this._previewRoomId,t.PREVIEW_OBJECT_ID),this._roomEngine.removeRoomObjectUser(this._previewRoomId,t.PREVIEW_OBJECT_ID),e||this.updatePreviewRoomView()),this._currentPreviewObjectCategory=W.a.MINIMUM}addFurnitureIntoRoom(e,s,i=null,n=null){if(i||(i=new Qo.a),this.isRoomEngineReady){if(this._currentPreviewObjectCategory===W.a.FLOOR&&this._currentPreviewObjectType===e)return t.PREVIEW_OBJECT_ID;if(this.reset(!1),this._currentPreviewObjectType=e,this._currentPreviewObjectCategory=W.a.FLOOR,this._currentPreviewObjectData="",this._roomEngine.addFurnitureFloor(this._previewRoomId,t.PREVIEW_OBJECT_ID,e,new Y.a(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y,0),s,0,i,NaN,-1,0,-1,"",!0,!1)){if(this._previousAutomaticStateChangeTime=u.a.instance.time,this._automaticStateChange=!0,n){const e=this._roomEngine.getRoomObject(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory);e&&e.model.setValue(G.a.FURNITURE_EXTRAS,n)}return this.updatePreviewRoomView(),t.PREVIEW_OBJECT_ID}}return-1}addWallItemIntoRoom(e,s,i){if(this.isRoomEngineReady){if(this._currentPreviewObjectCategory===W.a.WALL&&this._currentPreviewObjectType===e&&this._currentPreviewObjectData===i)return t.PREVIEW_OBJECT_ID;if(this.reset(!1),this._currentPreviewObjectType=e,this._currentPreviewObjectCategory=W.a.WALL,this._currentPreviewObjectData=i,this._roomEngine.addFurnitureWall(this._previewRoomId,t.PREVIEW_OBJECT_ID,e,new Y.a(.5,2.3,1.8),s,0,i,0,0,-1,"",!1))return this._previousAutomaticStateChangeTime=u.a.instance.time,this._automaticStateChange=!0,this.updatePreviewRoomView(),t.PREVIEW_OBJECT_ID}return-1}addAvatarIntoRoom(e,s){return this.isRoomEngineReady?(this.reset(!1),this._currentPreviewObjectType=1,this._currentPreviewObjectCategory=W.a.UNIT,this._currentPreviewObjectData=e,this._roomEngine.addRoomObjectUser(this._previewRoomId,t.PREVIEW_OBJECT_ID,new Y.a(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y,0),new Y.a(90,0,0),135,1,e)&&(this._previousAutomaticStateChangeTime=u.a.instance.time,this._automaticStateChange=!0,this.updateUserGesture(1),this.updateUserEffect(s),this.updateUserPosture("std")),this.updatePreviewRoomView(),t.PREVIEW_OBJECT_ID):-1}updateUserPosture(e,s=""){this.isRoomEngineReady&&this._roomEngine.updateRoomObjectUserPosture(this._previewRoomId,t.PREVIEW_OBJECT_ID,e,s)}updateUserGesture(e){this.isRoomEngineReady&&this._roomEngine.updateRoomObjectUserGesture(this._previewRoomId,t.PREVIEW_OBJECT_ID,e)}updateUserEffect(e){this.isRoomEngineReady&&this._roomEngine.updateRoomObjectUserEffect(this._previewRoomId,t.PREVIEW_OBJECT_ID,e)}updateObjectUserFigure(e,s=null,i=null,n=!1){return!!this.isRoomEngineReady&&this._roomEngine.updateRoomObjectUserFigure(this._previewRoomId,t.PREVIEW_OBJECT_ID,e,s,i,n)}updateObjectUserAction(e,s,i=null){this.isRoomEngineReady&&this._roomEngine.updateRoomObjectUserAction(this._previewRoomId,t.PREVIEW_OBJECT_ID,e,s,i)}changeRoomObjectState(){this.isRoomEngineReady&&(this._automaticStateChange=!1,this._currentPreviewObjectCategory!==W.a.UNIT&&this._roomEngine.changeObjectState(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory))}changeRoomObjectDirection(){if(this.isRoomEngineReady){const e=this._roomEngine.getRoomObject(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory);if(!e)return;const s=this._roomEngine.objectEventHandler._Str_17555(e,!0);switch(this._currentPreviewObjectCategory){case W.a.FLOOR:{const e=new Y.a(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y),i=new Y.a(s,s,s);return void this._roomEngine.updateRoomObjectFloor(this._previewRoomId,t.PREVIEW_OBJECT_ID,e,i,null,null)}case W.a.WALL:return}}}checkAutomaticRoomObjectStateChange(){if(this._automaticStateChange){const e=u.a.instance.time;e>this._previousAutomaticStateChangeTime+t.AUTOMATIC_STATE_CHANGE_INTERVAL&&(this._previousAutomaticStateChangeTime=e,this.isRoomEngineReady&&this._roomEngine.changeObjectState(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory))}}getRoomCanvas(e,s){if(this.isRoomEngineReady){const i=this._roomEngine.getRoomInstanceDisplay(this._previewRoomId,t.PREVIEW_CANVAS_ID,e,s,this._currentPreviewScale);this._roomEngine.setRoomInstanceRenderingCanvasMask(this._previewRoomId,t.PREVIEW_CANVAS_ID,!0);const n=this._roomEngine.getRoomInstanceGeometry(this._previewRoomId,t.PREVIEW_CANVAS_ID);return n&&n.adjustLocation(new Y.a(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y,0),30),this._currentPreviewCanvasWidth=e,this._currentPreviewCanvasHeight=s,i}return null}modifyRoomCanvas(e,s){this.isRoomEngineReady&&(this._currentPreviewCanvasWidth=e,this._currentPreviewCanvasHeight=s,this._roomEngine.initializeRoomInstanceRenderingCanvas(this._previewRoomId,t.PREVIEW_CANVAS_ID,e,s))}set addViewOffset(t){this._addViewOffset=t}get addViewOffset(){return this._addViewOffset}updatePreviewObjectBoundingRectangle(e){const s=this._roomEngine.getRoomObjectBoundingRectangle(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory,t.PREVIEW_CANVAS_ID);if(s&&e)if(s.x+=-(this._currentPreviewCanvasWidth>>1),s.y+=-(this._currentPreviewCanvasHeight>>1),s.x+=-e.x,s.y+=-e.y,this._currentPreviewRectangle){const t=this._currentPreviewRectangle.clone().enlarge(s);(t.width-this._currentPreviewRectangle.width>this._currentPreviewCanvasWidth-this._currentPreviewRectangle.width>>1||t.height-this._currentPreviewRectangle.height>this._currentPreviewCanvasHeight-this._currentPreviewRectangle.height>>1||this._currentPreviewRectangle.width<1||this._currentPreviewRectangle.height<1)&&(this._currentPreviewRectangle=t)}else this._currentPreviewRectangle=s}validatePreviewSize(e){if(this._currentPreviewRectangle.width<1||this._currentPreviewRectangle.height<1)return e;if(this.isRoomEngineReady){const s=this._roomEngine.getRoomInstanceGeometry(this._previewRoomId,t.PREVIEW_CANVAS_ID);this._currentPreviewRectangle.width>this._currentPreviewCanvasWidth*(1+t.ALLOWED_IMAGE_CUT)||this._currentPreviewRectangle.height>this._currentPreviewCanvasHeight*(1+t.ALLOWED_IMAGE_CUT)?t.ZOOM_ENABLED?.5!==this._roomEngine.getRoomInstanceRenderingCanvasScale(this._previewRoomId,t.PREVIEW_CANVAS_ID)&&(this._roomEngine.setRoomInstanceRenderingCanvasScale(this._previewRoomId,t.PREVIEW_CANVAS_ID,.5,null,null),this._currentPreviewScale=t.SCALE_SMALL,this._currentPreviewNeedsZoomOut=!0,e.x=e.x>>1,e.y=e.y>>1,this._currentPreviewRectangle.x=this._currentPreviewRectangle.x>>2,this._currentPreviewRectangle.y=this._currentPreviewRectangle.y>>2,this._currentPreviewRectangle.width=this._currentPreviewRectangle.width>>2,this._currentPreviewRectangle.height=this._currentPreviewRectangle.height>>2):s.isZoomedIn()&&(s.performZoomOut(),this._currentPreviewScale=t.SCALE_SMALL,this._currentPreviewNeedsZoomOut=!0):this._currentPreviewNeedsZoomOut||(t.ZOOM_ENABLED?1!==this._roomEngine.getRoomInstanceRenderingCanvasScale(this._previewRoomId,t.PREVIEW_CANVAS_ID)&&(this._roomEngine.setRoomInstanceRenderingCanvasScale(this._previewRoomId,t.PREVIEW_CANVAS_ID,1,null,null),this._currentPreviewScale=t.SCALE_NORMAL):s.isZoomedIn()||(s.performZoomIn(),this._currentPreviewScale=t.SCALE_NORMAL))}return e}zoomIn(){this.isRoomEngineReady&&(t.ZOOM_ENABLED?this._roomEngine.setRoomInstanceRenderingCanvasScale(this._previewRoomId,t.PREVIEW_CANVAS_ID,1):this._roomEngine.getRoomInstanceGeometry(this._previewRoomId,t.PREVIEW_CANVAS_ID).performZoomIn()),this._currentPreviewScale=t.SCALE_NORMAL}zoomOut(){this.isRoomEngineReady&&(t.ZOOM_ENABLED?this._roomEngine.setRoomInstanceRenderingCanvasScale(this._previewRoomId,t.PREVIEW_CANVAS_ID,.5):this._roomEngine.getRoomInstanceGeometry(this._previewRoomId,t.PREVIEW_CANVAS_ID).performZoomOut()),this._currentPreviewScale=t.SCALE_SMALL}updateAvatarDirection(e,s){this.isRoomEngineReady&&this._roomEngine.updateRoomObjectUserLocation(this._previewRoomId,t.PREVIEW_OBJECT_ID,new Y.a(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y,0),new Y.a(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y,0),!1,0,new Y.a(45*e,0,0),45*s)}updateObjectRoom(t=null,e=null,s=null,i=!1){return!!this.isRoomEngineReady&&this._roomEngine.updateRoomInstancePlaneType(this._previewRoomId,t,e,s,i)}updateRoomWallsAndFloorVisibility(t,e=!0){this.isRoomEngineReady&&this._roomEngine.updateRoomInstancePlaneVisibility(this._previewRoomId,t,e)}getCanvasOffset(t){if(this._currentPreviewRectangle.width<1||this._currentPreviewRectangle.height<1)return t;let e=-(this._currentPreviewRectangle.left+this._currentPreviewRectangle.right)>>1,s=-(this._currentPreviewRectangle.top+this._currentPreviewRectangle.bottom)>>1;const i=this._currentPreviewCanvasHeight-this._currentPreviewRectangle.height>>1;i>10?s+=Math.min(15,i-10):this._currentPreviewObjectCategory!==W.a.UNIT?s+=5-Math.max(0,i/2):s-=5-Math.min(0,i/2),s+=this._addViewOffset.y,e+=this._addViewOffset.x;const n=e-t.x,r=s-t.y;if(0!==n||0!==r){const i=Math.sqrt(n*n+r*r);return i>10&&(e=t.x+10*n/i,s=t.y+10*r/i),new g.j(e,s)}return null}updatePreviewRoomView(e=!1){if((!this._disableUpdate||e)&&(this.checkAutomaticRoomObjectStateChange(),this.isRoomEngineReady)){let e=this._roomEngine.getRoomInstanceRenderingCanvasOffset(this._previewRoomId,t.PREVIEW_CANVAS_ID);if(e&&(this.updatePreviewObjectBoundingRectangle(e),this._currentPreviewRectangle)){const s=this._currentPreviewScale;e=this.validatePreviewSize(e);const i=this.getCanvasOffset(e);i&&this._roomEngine.setRoomInstanceRenderingCanvasOffset(this._previewRoomId,t.PREVIEW_CANVAS_ID,i),this._currentPreviewScale!==s&&(this._currentPreviewRectangle=null)}}}set disableUpdate(t){this._disableUpdate=t}set disableRoomEngineUpdate(t){this.isRoomEngineReady&&this._roomEngine.disableUpdate(t)}onRoomInitializedonRoomInitialized(t){if(t)switch(t.type){case d.a.INITIALIZED:return void(t.roomId===this._previewRoomId&&this.isRoomEngineReady&&this._roomEngine.updateRoomInstancePlaneType(this._previewRoomId,"110","99999"))}}onRoomObjectAdded(e){if(e.roomId===this._previewRoomId&&e.objectId===t.PREVIEW_OBJECT_ID&&e.category===this._currentPreviewObjectCategory){this._currentPreviewRectangle=null,this._currentPreviewNeedsZoomOut=!1;const t=this._roomEngine.getRoomObject(e.roomId,e.objectId,e.category);if(t&&t.model&&e.category===W.a.WALL){const s=t.model.getValue(G.a.FURNITURE_SIZE_Z),i=t.model.getValue(G.a.FURNITURE_CENTER_Z);null===s&&null===i||this._roomEngine.updateRoomObjectWallLocation(e.roomId,e.objectId,new Y.a(.5,2.3,(3.6-s)/2+i))}}}updateRoomEngine(){this.isRoomEngineReady&&this._roomEngine.runUpdate()}getRenderingCanvas(){return this._roomEngine.getRoomInstanceRenderingCanvas(this._previewRoomId,t.PREVIEW_CANVAS_ID)||null}getGenericRoomObjectImage(t,e,s,i,n,r=0,a=null,o=null,c=-1,_=-1,h=null){return this.isRoomEngineReady?this._roomEngine.getGenericRoomObjectImage(t,e,s,i,n,r,a,o,c,_,h):null}getRoomObjectImage(e,s,i,n=0){return this.isRoomEngineReady?this._roomEngine.getRoomObjectImage(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory,e,s,i,n):null}getRoomObjectCurrentImage(){if(this.isRoomEngineReady){const e=this._roomEngine.getRoomObject(this._previewRoomId,t.PREVIEW_OBJECT_ID,W.a.UNIT);if(e&&e.visualization)return e.visualization.getImage(16777215,-1)}return null}getRoomPreviewObject(){if(this.isRoomEngineReady){const e=this._roomEngine.getRoomObject(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory);if(e)return e}return null}get isRoomEngineReady(){return this._roomEngine&&this._roomEngine.ready}get roomId(){return this._previewRoomId}}return t.SCALE_NORMAL=64,t.SCALE_SMALL=32,t.PREVIEW_COUNTER=0,t.PREVIEW_CANVAS_ID=1,t.PREVIEW_OBJECT_ID=1,t.PREVIEW_OBJECT_LOCATION_X=2,t.PREVIEW_OBJECT_LOCATION_Y=2,t.ALLOWED_IMAGE_CUT=.25,t.AUTOMATIC_STATE_CHANGE_INTERVAL=2500,t.ZOOM_ENABLED=!0,t})();var tc=s("9NDz"),ec=s("qLWH"),sc=s("SS1c"),ic=s("t0/d"),nc=s("sxwv"),rc=s("u5n9"),ac=s("Zq74"),oc=s("U4HJ"),cc=s("Ftck"),_c=s("liWC"),hc=s("oKt9"),lc=s("BG3s"),uc=s("2H63"),dc=s("8ZkN"),gc=s("3CL9"),mc=s("NjFb"),pc=s("Fwdp"),fc=s("z20u");class Ec{}let Sc=(()=>{class t{constructor(t,e,s){this._settingsService=t,this._notificationService=e,this._ngZone=s,this._messages=[],this._component=null,this._catalogMode=-1,this._catalogRoot=null,this._activePage=null,this._activePageData=null,this._manuallyCollapsed=[],this._isLoading=!1,this._purse=new Ec,this._clubOffers=[],this._vipTemplate=null,this.registerMessages()}ngOnDestroy(){this.unregisterMessages(),this._vipTemplate=null}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new tc.a(this.onCatalogClubEvent.bind(this)),new ec.a(this.onCatalogModeEvent.bind(this)),new sc.a(this.onCatalogPageEvent.bind(this)),new ic.a(this.onCatalogPagesEvent.bind(this)),new nc.a(this.onCatalogPurchaseEvent.bind(this)),new rc.a(this.onCatalogPurchaseFailedEvent.bind(this)),new ac.a(this.onCatalogPurchaseUnavailableEvent.bind(this)),new oc.a(this.onCatalogSearchEvent.bind(this)),new cc.a(this.onCatalogSoldOutEvent.bind(this)),new _c.a(this.onCatalogUpdatedEvent.bind(this)),new hc.a(this.onUserSubscriptionEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onCatalogClubEvent(t){if(!t||!t.getParser()||!this._vipTemplate)return;const e=t.getParser().offers;this._clubOffers=e,this._vipTemplate.setOffers(e)}registerVipBuyTemplate(t){this._vipTemplate=t}onCatalogModeEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this._catalogMode=e.mode)}onCatalogPageEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._activePage=e,this._manuallyCollapsed=[],this._component&&this._component.setupLayout(),this._isLoading=!1})}onCatalogPagesEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._catalogRoot=e.root,this._isLoading=!1,this._component&&this._component.selectFirstTab()})}onCatalogPurchaseEvent(t){t&&t.getParser()&&this._ngZone.run(()=>this._component&&this._component.hidePurchaseConfirmation())}onCatalogPurchaseFailedEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._notificationService.alert("${catalog.alert.purchaseerror.description."+e.code+"}","${catalog.alert.purchaseerror.title}"),this._component&&this._component.hidePurchaseConfirmation()})}onCatalogPurchaseUnavailableEvent(t){t&&t.getParser()}onCatalogSearchEvent(t){t&&t.getParser()}onCatalogSoldOutEvent(t){t&&t.getParser()}onUserSubscriptionEvent(t){if(!t)return;const e=t.getParser();e&&(this._purse.clubDays=Math.max(0,e.days),this._purse.clubPeriods=Math.max(0,e.months),this._purse.isVip=e.isVip,this._purse.pastClubDays=e.pastClubDays,this._purse.Str_14389=e.years==pc.a._Str_14729,this._purse.minutesUntilExpiration=e.totalSeconds)}onCatalogUpdatedEvent(t){t&&t.getParser()&&this._ngZone.run(()=>{this._isLoading=!1,this._catalogMode=-1,this._catalogRoot=null,this._activePage=null,this._activePageData=null,this._component&&this._component.reset(),this._settingsService.catalogVisible&&(this._component.hide(),this._notificationService.alert("${catalog.alert.published.description}","${catalog.alert.published.title}"))})}setupCatalog(t){t&&(this._isLoading=!0,this._catalogRoot=null,this._activePage=null,this._activePageData=null,this._component&&this._component.reset(),u.a.instance.communication.connection.send(new lc.a(t)))}requestPage(e){e&&this.canSelectPage(e)&&(this._activePageData=e,-1!==e.pageId&&(this._isLoading=!0,this.requestPageData(e.pageId,-1,t.MODE_NORMAL)))}requestPageData(t,e,s){u.a.instance.communication.connection.send(new uc.a(t,e,s))}isDescendant(t,e){if(!t||!e)return!1;if(t===e)return!0;if(t.children.length)for(const s of t.children)if(s){if(s===e)return!0;if(this.isDescendant(s,e))return!0}return!1}getFurnitureDataForProductOffer(t){if(!t)return null;let e=null;switch(t.productType.toUpperCase()){case fc.a.FLOOR:e=u.a.instance.sessionDataManager.getFloorItemData(t.furniClassId);break;case fc.a.WALL:e=u.a.instance.sessionDataManager.getWallItemData(t.furniClassId)}return e}getFurnitureDataIconUrl(t){if(!t)return null;const e=u.a.instance.roomEngine.roomContentLoader.getAssetUrls(t.className,t.colorId.toString(),!0);return e&&e[0]||null}purchase(t,e,s,i=null){t&&e&&s&&this.purchaseById(t.pageId,e.offerId,s,i)}purchaseById(t,e,s,i=null){t&&e&&s&&u.a.instance.communication.connection.send(new dc.a(t,e,i,s))}requestOffers(t){u.a.instance.communication.connection.send(new gc.a(t))}redeemVoucher(t){t&&0!==t.trim().length&&u.a.instance.communication.connection.send(new mc.a(t))}manuallyCollapsePage(t){const e=this._manuallyCollapsed.indexOf(t);-1===e?this._manuallyCollapsed.push(t):this._manuallyCollapsed.splice(e,1)}canSelectPage(t){return!(!t||!t.visible)}get component(){return this._component}set component(t){this._component=t}get catalogMode(){return this._catalogMode}get catalogRoot(){return this._catalogRoot}get activePage(){return this._activePage}get activePageData(){return this._activePageData}get manuallyCollapsed(){return this._manuallyCollapsed}get purse(){return this._purse}get vipOffers(){return this._clubOffers}}return t.MODE_NORMAL="NORMAL",t.\u0275fac=function(e){return new(e||t)(i.kc(m),i.kc(Ge),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})(),Ic=(()=>{class t{constructor(t,e){this._catalogService=t,this._ngZone=e,this.activePage=null}getText(t=0){let e=this.activePage.localization.texts[t]||null;return e&&(e=e.replace(/\r\n|\r|\n/g,"<br />")),e||""}getImage(t=0){let e=u.a.instance.getConfiguration("catalog.asset.image.url");return e=e.replace("%name%",this.activePage.localization.images[t]),e}get headerText(){return this._catalogService.catalogRoot.localization||null}get offers(){return this._catalogService.activePage.offers}get activeOffer(){return this._catalogService.component&&this._catalogService.component.activeOffer||null}get roomPreviewer(){return this._catalogService.component&&this._catalogService.component.roomPreviewer||null}getCurrencyUrl(t){return u.a.instance.getConfiguration("currency.asset.icon.url").replace("%type%",t.toString())}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Sc),i.Yb(i.H))},t.\u0275dir=i.Tb({type:t}),t})(),Rc=(()=>{class t{}return t.WALL="i",t.FLOOR="s",t.EFFECT="e",t.HABBO_CLUB="h",t.BADGE="b",t.GAME_TOKEN="GAME_TOKEN",t.PET="p",t.ROBOT="r",t})();function bc(t,e){if(1&t&&i.Zb(0,"img",8),2&t){const t=i.qc(2);i.yc("src",t.getImage(1),i.Nc)}}function vc(t,e){if(1&t&&(i.dc(0,"div",6),i.Uc(1,bc,1,1,"img",7),i.cc()),2&t){const t=i.qc();i.Kb(1),i.yc("ngIf",t.getImage(1))}}function Tc(t,e){if(1&t&&(i.dc(0,"div",9),i.dc(1,"div",10),i.Wc(2),i.cc(),i.Zb(3,"div",11),i.Zb(4,"div",12),i.cc()),2&t){const t=i.qc();i.Kb(2),i.Yc(" ",t.offerName(t.activeOffer)," "),i.Kb(1),i.yc("roomPreviewer",t.roomPreviewer)("width",364)("height",182),i.Kb(1),i.yc("activePage",t.activePage)("activeOffer",t.activeOffer)("quantityEnabled",t.activeOffer.bundlePurchaseAllowed)}}function Oc(t,e){if(1&t&&(i.dc(0,"div",16),i.Wc(1),i.cc()),2&t){const t=i.qc().$implicit,e=i.qc();i.Kb(1),i.Yc(" ",e.offerCount(t)," ")}}const yc=function(t){return{active:t}},Ac=function(t){return{"background-image":t}};function Cc(t,e){if(1&t){const t=i.ec();i.dc(0,"div",13),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc().selectOffer(s)}),i.dc(1,"button",14),i.Uc(2,Oc,2,1,"div",15),i.cc(),i.cc()}if(2&t){const t=e.$implicit,s=i.qc();i.Kb(1),i.yc("ngClass",i.Cc(3,yc,s.activeOffer===t))("ngStyle",i.Cc(5,Ac,"url("+s.offerImage(t)+")")),i.Kb(1),i.yc("ngIf",s.offerCount(t)>1)}}let Mc=(()=>{class t extends Ic{selectOffer(t){t&&this._catalogService.component&&this._catalogService.component.selectOffer(t)}getFirstProduct(t){return t&&t.products[0]||null}hasMultipleProducts(t){return t.products.length>1}offerName(t){let e="";const s=this.getFirstProduct(t);if(s)switch(s.productType){case Rc.FLOOR:e="roomItem.name."+s.furniClassId;break;case Rc.WALL:e="wallItem.name."+s.furniClassId}return""===e?e:u.a.instance.getLocalization(e)}getProductFurniData(t){return t?this._catalogService.getFurnitureDataForProductOffer(t):null}offerImage(t){if(!t)return"";const e=t.products[0];if(!e)return"";const s=this.getProductFurniData(e);if(!s)return"";switch(e.productType){case Rc.FLOOR:case Rc.WALL:return this._catalogService.getFurnitureDataIconUrl(s)}return""}offerCount(t){if(!this.hasMultipleProducts(t)){const e=this.getFirstProduct(t);if(e)return e.productCount}return 1}}return t.CODE="default_3x3",t.\u0275fac=function(e){return Uc(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:6,vars:3,consts:[[1,"d-flex","flex-column","w-100","h-100",2,"width","104% !important"],["class","d-flex flex-column justify-content-center align-items-center w-100 h-100 mb-2",4,"ngIf"],["class","position-relative d-flex flex-column justify-content-center align-items-center w-100 h-100 mb-2",4,"ngIf"],[1,"grid-container","w-100",2,"min-height","156px","max-height","269px","height","310px","margin-top","-30px","width","94% !important","margin-left","10px"],[1,"grid-items","grid-6",2,"justify-content","space-around"],["class","d-flex flex-column item-detail justify-content-center align-items-center","style","max-height: 60px; height: 60px; width: 60px",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","mb-2"],[3,"src",4,"ngIf"],[3,"src"],[1,"position-relative","d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","mb-2"],[1,"position-absolute","bg-secondary","rounded","text-center","m-2","p-2","t-0","l-0",2,"z-index","1","background-color","#636363b3 !important","padding","5px 10px !important","font-size","16px !important","border-radius","50px !important"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","width","height"],["nitro-catalog-purchase-component","",1,"d-flex","align-items-center","bg-secondary","rounded","mt-2","py-2","px-3","flex-grow-1","w-100",2,"background-color","#636363 !important","flex-grow","inherit !important","margin-top","-10px !important","border-radius","31px !important","padding","10px 10px !important","filter","drop-shadow(0px 2px 0 #565656) !important","width","96% !important",3,"activePage","activeOffer","quantityEnabled"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",2,"max-height","60px","height","60px","width","60px",3,"click"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image",2,"border-radius","50px","background-color","rgb(187 187 187)","margin","0px 5px 0px 5px !important",3,"ngClass","ngStyle"],["class","position-absolute bg-danger px-1 py-0 rounded shadow count",4,"ngIf"],[1,"position-absolute","bg-danger","px-1","py-0","rounded","shadow","count"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Uc(1,vc,2,1,"div",1),i.Uc(2,Tc,5,7,"div",2),i.dc(3,"perfect-scrollbar",3),i.dc(4,"div",4),i.Uc(5,Cc,3,7,"div",5),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(1),i.yc("ngIf",!e.activeOffer),i.Kb(1),i.yc("ngIf",e.activeOffer),i.Kb(3),i.yc("ngForOf",e.offers))},encapsulation:2}),t})();const Uc=i.fc(Mc);let Dc=(()=>{class t extends Ic{}return t.CODE="frontpage_featured",t.\u0275fac=function(e){return wc(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:2,vars:0,consts:[[1,"nitro-catalog-layout-frontpagefeatured-component"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Wc(1," frontpage\n"),i.cc())},encapsulation:2}),t})();const wc=i.fc(Dc),Nc=function(t){return{"background-image":t}};function Lc(t,e){if(1&t&&(i.dc(0,"div",8),i.dc(1,"div",9),i.Wc(2),i.cc(),i.cc()),2&t){const t=i.qc();i.yc("ngStyle",i.Cc(2,Nc,"url("+t.getImagesUrl()+t.activePage.frontPageItems[0].itemPromoImage+")")),i.Kb(2),i.Xc(t.activePage.frontPageItems[0].itemName)}}function xc(t,e){if(1&t&&(i.dc(0,"div",10),i.dc(1,"div",9),i.Wc(2),i.cc(),i.cc()),2&t){const t=i.qc();i.yc("ngStyle",i.Cc(2,Nc,"url("+t.getImagesUrl()+t.activePage.frontPageItems[1].itemPromoImage+")")),i.Kb(2),i.Xc(t.activePage.frontPageItems[1].itemName)}}function Pc(t,e){if(1&t&&(i.dc(0,"div",10),i.dc(1,"div",9),i.Wc(2),i.cc(),i.cc()),2&t){const t=i.qc();i.yc("ngStyle",i.Cc(2,Nc,"url("+t.getImagesUrl()+t.activePage.frontPageItems[2].itemPromoImage+")")),i.Kb(2),i.Xc(t.activePage.frontPageItems[2].itemName)}}function Fc(t,e){if(1&t&&(i.dc(0,"div",11),i.dc(1,"div",9),i.Wc(2),i.cc(),i.cc()),2&t){const t=i.qc();i.yc("ngStyle",i.Cc(2,Nc,"url("+t.getImagesUrl()+t.activePage.frontPageItems[3].itemPromoImage+")")),i.Kb(2),i.Xc(t.activePage.frontPageItems[3].itemName)}}let kc=(()=>{class t extends Ic{getImagesUrl(){return u.a.instance.core.configuration.getValue("image.library.url")}}return t.CODE="frontpage4",t.\u0275fac=function(e){return Wc(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:9,vars:5,consts:[[1,"nitro-catalog-layout-frontpage4-component","row"],[1,"col-4"],["class","front-page-item tall",3,"ngStyle",4,"ngIf"],[1,"col-8"],[1,"d-flex","flex-column","w-100","mb-3"],["class","front-page-item wide mb-3",3,"ngStyle",4,"ngIf"],["class","front-page-item wide mb-0",3,"ngStyle",4,"ngIf"],[3,"localization"],[1,"front-page-item","tall",3,"ngStyle"],[1,"front-page-item-caption"],[1,"front-page-item","wide","mb-3",3,"ngStyle"],[1,"front-page-item","wide","mb-0",3,"ngStyle"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Uc(2,Lc,3,4,"div",2),i.cc(),i.dc(3,"div",3),i.dc(4,"div",4),i.Uc(5,xc,3,4,"div",5),i.Uc(6,Pc,3,4,"div",5),i.Uc(7,Fc,3,4,"div",6),i.cc(),i.Zb(8,"redeem-voucher-component",7),i.cc(),i.cc()),2&t&&(i.Kb(2),i.yc("ngIf",e.activePage.frontPageItems[0]),i.Kb(3),i.yc("ngIf",e.activePage.frontPageItems[1]),i.Kb(1),i.yc("ngIf",e.activePage.frontPageItems[2]),i.Kb(1),i.yc("ngIf",e.activePage.frontPageItems[3]),i.Kb(1),i.yc("localization",e.activePage.localization))},encapsulation:2}),t})();const Wc=i.fc(kc);let Vc=(()=>{class t extends Ic{}return t.CODE="pets",t.\u0275fac=function(e){return Gc(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:0,consts:[[1,"d-flex","flex-column","w-100","h-100","card","nitro-catalog-layout-pets2-component"]],template:function(t,e){1&t&&i.Zb(0,"div",0)},encapsulation:2}),t})();const Gc=i.fc(Vc);let Hc=(()=>{class t extends Ic{}return t.CODE="pets2",t.\u0275fac=function(e){return Bc(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:10,vars:4,consts:[[1,"d-flex","flex-column","w-100","h-100","card","nitro-catalog-layout-pets3-component","small","p-1"],[1,"position-relative","w-100",2,"min-height","422px","max-height","422px","height","422px"],[1,"overflow-hidden","d-flex","flex-column",2,"min-height","422px"],[1,"row","m-3"],[1,"col-sm-3","overflow-hidden","d-flex","justify-content-center","px-1"],[1,"align-self-center",3,"src"],[1,"col-sm","d-flex","justify-content-center","px-2"],[1,"align-self-center",3,"innerHtml"],[1,"mx-3",3,"innerHtml"],[1,"mx-3","mt-auto","mb-3",3,"innerHtml"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"perfect-scrollbar",1),i.dc(2,"div",2),i.dc(3,"div",3),i.dc(4,"div",4),i.Zb(5,"img",5),i.cc(),i.dc(6,"div",6),i.Zb(7,"h5",7),i.cc(),i.cc(),i.Zb(8,"div",8),i.Zb(9,"span",9),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(5),i.yc("src",e.getImage(1),i.Nc),i.Kb(2),i.yc("innerHtml",e.getText(1),i.Mc),i.Kb(1),i.yc("innerHtml",e.getText(2),i.Mc),i.Kb(1),i.yc("innerHtml",e.getText(3),i.Mc))},directives:[Oi.b],encapsulation:2}),t})();const Bc=i.fc(Hc);let jc=(()=>{class t extends Ic{}return t.CODE="pets3",t.\u0275fac=function(e){return Kc(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:11,vars:4,consts:[[1,"nitro-catalog-layout-pets3-component","d-flex","flex-column","w-100","h-100"],[1,"position-relative","w-100",2,"min-height","422px","max-height","422px","height","422px"],[1,"d-flex","flex-column"],[1,"d-flex","mb-2"],[1,"d-flex","justify-content-center","align-items-center"],[3,"src"],[1,"d-flex","justify-content-center","align-items-center","flex-grow-1"],[1,"h5","m-0",3,"innerHtml"],[1,"h6","m-0","mb-2",3,"innerHtml"],[1,"h6","m-0",3,"innerHtml"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"perfect-scrollbar",1),i.dc(2,"div",2),i.dc(3,"div",3),i.dc(4,"div",4),i.Zb(5,"img",5),i.cc(),i.dc(6,"div",6),i.Zb(7,"p",7),i.cc(),i.cc(),i.Zb(8,"p",8),i.dc(9,"p",9),i.Wc(10,"sdfgsdfgsdfg"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(5),i.yc("src",e.getImage(1),i.Nc),i.Kb(2),i.yc("innerHtml",e.getText(1),i.Mc),i.Kb(1),i.yc("innerHtml",e.getText(2),i.Mc),i.Kb(1),i.yc("innerHtml",e.getText(3),i.Mc))},directives:[Oi.b],encapsulation:2}),t})();const Kc=i.fc(jc);function zc(t,e){if(1&t&&i.Zb(0,"img",9),2&t){const t=i.qc();i.yc("src",t.getImage(1),i.Nc)}}function Yc(t,e){if(1&t&&(i.dc(0,"div",10),i.Zb(1,"div",11),i.Zb(2,"div",12),i.cc()),2&t){const t=i.qc();i.Kb(1),i.yc("roomPreviewer",t.roomPreviewer)("width",243)("height",240),i.Kb(1),i.yc("vertical",!0)("activePage",t.activePage)("activeOffer",t.activeOffer)}}function Xc(t,e){if(1&t&&(i.dc(0,"div",16),i.Wc(1),i.cc()),2&t){const t=i.qc().$implicit,e=i.qc();i.Kb(1),i.Xc(e.offerCount(t))}}const Zc=function(t){return{active:t}},qc=function(t){return{"background-image":t}};function Qc(t,e){if(1&t){const t=i.ec();i.dc(0,"div",13),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc().selectOffer(s)}),i.dc(1,"button",14),i.Uc(2,Xc,2,1,"div",15),i.cc(),i.cc()}if(2&t){const t=e.$implicit,s=i.qc();i.Kb(1),i.yc("ngClass",i.Cc(3,Zc,s.activeOffer===t))("ngStyle",i.Cc(5,qc,"url("+s.offerImage(t)+")")),i.Kb(1),i.yc("ngIf",s.offerCount(t)>1)}}let Jc=(()=>{class t extends Mc{constructor(){super(...arguments),this._groupNames=["wallpaper","floor","landscape"],this._groups=[],this._activeGroupIndex=-1}ngOnInit(){this.sortOffers(),this.selectFirstSpace()}sortOffers(){for(const t of this.offers){if(!t)continue;const e=this.getFirstProduct(t);if(e&&(e.productType===Rc.WALL||e.productType===Rc.FLOOR)){const s=this.getProductFurniData(e);if(s){const e=s.className,i=this._groupNames.indexOf(e);for(-1===i&&this._groupNames.push(e);this._groups.length<this._groupNames.length;)this._groups.push([]);switch(e){case"floor":case"wallpaper":case"landscape":this._groups[i].push(t)}}}}this.switchCategory("walls")}switchCategory(t){let e=-1;switch(t){case"walls":e=0;break;case"floor":e=1;break;case"landscape":e=2}this._activeGroupIndex=e}selectFirstSpace(){if(-1===this._activeGroupIndex)return;const t=this._groups[this.activeGroupIndex];t&&t.length&&this.selectOffer(t[0])}offerName(t){let e="";const s=this.getFirstProduct(t);if(s)switch(s.productType){case Rc.FLOOR:e="roomItem.name."+s.furniClassId;break;case Rc.WALL:e="wallItem.name."+s.furniClassId}return""===e?e:u.a.instance.getLocalization(e)}offerImage(t){if(!t)return"";const e=t.products[0];if(!e)return"";const s=this.getProductFurniData(e);if(!s)return"";const i=u.a.instance.getConfiguration("catalog.asset.url");let n="";switch(e.productType){case Rc.WALL:switch(s.className){case"floor":n=["th",s.className,e.extraParam].join("_");break;case"wallpaper":n=["th","wall",e.extraParam].join("_");break;case"landscape":n=["th",s.className,e.extraParam.replace(".","_"),"001"].join("_")}break;default:return super.offerImage(t)}return i+"/"+n+".png"}get groups(){return this._groups}get activeGroupIndex(){return this._activeGroupIndex}}return t.CODE="spaces_new",t.\u0275fac=function(e){return $c(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:17,vars:21,consts:[[1,"d-flex","flex-column","w-100","h-100","nitro-catalog-layout-spaces-component"],[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","mb-2"],[3,"src",4,"ngIf"],["class","d-flex position-relative w-100 h-100",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-cente","btn-group","mt-2"],["type","button",1,"btn","btn-primary","btn-sm",3,"ngClass","click"],[1,"grid-container","w-100",2,"min-height","156px","max-height","156px","height","156px"],[1,"grid-items","grid-6"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],[3,"src"],[1,"d-flex","position-relative","w-100","h-100"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","width","height"],["nitro-catalog-purchase-component","",1,"d-flex","bg-secondary","rounded","py-2","px-3","ml-2",3,"vertical","activePage","activeOffer"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image",3,"ngClass","ngStyle"],["class","position-absolute bg-danger px-1 py-0 rounded shadow count",4,"ngIf"],[1,"position-absolute","bg-danger","px-1","py-0","rounded","shadow","count"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Uc(2,zc,1,1,"img",2),i.Uc(3,Yc,3,6,"div",3),i.dc(4,"div",4),i.dc(5,"button",5),i.nc("click",function(){return e.switchCategory("walls")}),i.Wc(6),i.rc(7,"translate"),i.cc(),i.dc(8,"button",5),i.nc("click",function(){return e.switchCategory("floor")}),i.Wc(9),i.rc(10,"translate"),i.cc(),i.dc(11,"button",5),i.nc("click",function(){return e.switchCategory("landscape")}),i.Wc(12),i.rc(13,"translate"),i.cc(),i.cc(),i.cc(),i.dc(14,"perfect-scrollbar",6),i.dc(15,"div",7),i.Uc(16,Qc,3,7,"div",8),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(2),i.yc("ngIf",!e.activeOffer&&e.getImage(1)),i.Kb(1),i.yc("ngIf",e.activeOffer),i.Kb(2),i.yc("ngClass",i.Cc(15,Zc,0===e.activeGroupIndex)),i.Kb(1),i.Xc(i.sc(7,9,"catalog.spaces.tab.walls")),i.Kb(2),i.yc("ngClass",i.Cc(17,Zc,1===e.activeGroupIndex)),i.Kb(1),i.Xc(i.sc(10,11,"catalog.spaces.tab.floors")),i.Kb(2),i.yc("ngClass",i.Cc(19,Zc,2===e.activeGroupIndex)),i.Kb(1),i.Xc(i.sc(13,13,"catalog.spaces.tab.views")),i.Kb(4),i.yc("ngForOf",e.groups[e.activeGroupIndex]))},encapsulation:2}),t})();const $c=i.fc(Jc);function t_(t,e){1&t&&i.Zb(0,"p",17),2&t&&i.yc("innerHtml",e.$implicit,i.Mc)}function e_(t,e){if(1&t&&(i.dc(0,"b"),i.Wc(1),i.Zb(2,"img",18),i.cc()),2&t){const t=i.qc();i.Kb(1),i.Yc("",t.currentTrophyOffer.priceCredits," "),i.Kb(1),i.yc("src",t.getCurrencyUrl(-1),i.Nc)}}function s_(t,e){if(1&t&&(i.dc(0,"b"),i.Wc(1),i.Zb(2,"img",18),i.cc()),2&t){const t=i.qc();i.Kb(1),i.Yc(" + ",t.currentTrophyOffer.priceActivityPoints," "),i.Kb(1),i.yc("src",t.getCurrencyUrl(t.currentTrophyOffer.priceActivityPointsType),i.Nc)}}let i_=(()=>{class t extends Ic{constructor(){super(...arguments),this.textPages=[],this._allTrophyOffers=new Yi.a,this.currentTrophyOffer=null,this._imageUrl=null,this._currentTrophy=null,this._availableColorsForCurrentTrophy=null,this._currentTrophyIndex=0,this._orderOfColors=["g","s","b"],this.enteredText=""}ngOnInit(){const t=this.activePage.offers;if(this.textPages=this.activePage.localization.texts.filter(t=>t&&t.length>0),t&&t.length)for(const e of t){if(!e)continue;const t=this.getTrophyNameWithoutColors(e.localizationId),s=this.getTrophyColorCharacter(e.localizationId);let i=this._allTrophyOffers.getValue(t);i||(i=new Yi.a,this._allTrophyOffers.add(t,i)),i.add(s,e)}this.selectOfferByIndex(this._currentTrophyIndex)}selectOfferByIndex(t){const e=this._allTrophyOffers.getWithIndex(this._currentTrophyIndex);e&&this.selectOffer(e)}selectOffer(t){if(!t)return;let e=null;const s=[];this._orderOfColors.map(i=>{const n=t.getValue(i);n&&s.push(i),e||(e=n)}),e||(e=t.getWithIndex(0)),e&&(this._currentTrophyColor=this.getTrophyColorCharacter(e.localizationId)),this._availableColorsForCurrentTrophy=s,this.selectTrophyColor(e)}selectTrophyColor(t){if(!t)return;this.currentTrophyOffer=t;const e=t.products[0];if(!e)return;const s=u.a.instance.roomEngine.getFurnitureFloorImage(e.furniClassId,new Y.a(2,0,0),64,this,0,e.extraParam);if(s){const t=s.getImage();t&&(this._imageUrl=t.src)}this._currentTrophy=e}handleTrophyColor(t){if(this._availableColorsForCurrentTrophy.indexOf(t)<0)return;const e=this._allTrophyOffers.getWithIndex(this._currentTrophyIndex).getValue(t);e&&(this._currentTrophyColor=t,this.selectTrophyColor(e))}getActiveClass(t){return this._availableColorsForCurrentTrophy.indexOf(t)>=0&&this._currentTrophyColor==t?"selected":""}imageReady(t,e,s){if(e){const t=Do.a.generateImageUrl(e);t&&this._ngZone.run(()=>this._imageUrl=t)}}handleButton(t){switch(t){case"next":this._allTrophyOffers.length-1==this._currentTrophyIndex?this._currentTrophyIndex=0:this._currentTrophyIndex++;break;case"previous":0==this._currentTrophyIndex?this._currentTrophyIndex=this._allTrophyOffers.length-1:this._currentTrophyIndex--}this.selectOfferByIndex(this._currentTrophyIndex)}imageFailed(t){console.log("failed")}hasMultipleOffers(){return this._allTrophyOffers&&this._allTrophyOffers.length>0}trophyHasColor(t){return this._availableColorsForCurrentTrophy.indexOf(t)>-1}getTrophyNameWithoutColors(t){const e=this.getTrophyColorCharacter(t);return e.length>0?t.slice(0,t.length-1-e.length):t}getTrophyColorCharacter(t){if(-1!=t.indexOf("prizetrophy_2011_"))return"";const e=t.lastIndexOf("_")+1;if(e<=0)return"";const s=t.substr(e);return s.length>1||"g"!=s&&"s"!=s&&"b"!=s?"":s}buyCurrentItem(){this._catalogService.component&&this._catalogService.component.confirmPurchase(this.activePage,this.currentTrophyOffer,1,this.enteredText)}getText(){return""}get imageUrl(){return this._imageUrl}}return t.CODE="trophies",t.\u0275fac=function(e){return n_(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:26,vars:15,consts:[[1,"w-100","h-100","nitro-catalog-layout-trophies-component"],[1,"d-flex","flex-column"],["class","small",3,"innerHtml",4,"ngFor","ngForOf"],[1,"w-100","bg-secondary","rounded","nitro-catalog-layout-trophies-selector","row","mx-0","py-2","mb-2"],[1,"col-sm","d-flex","flex-row","justify-content-end"],["type","button",1,"btn","btn-sm","btn-secondary","align-self-end",3,"click"],[1,"col-sm","d-flex","flex-row","justify-content-center"],[1,"align-self-center",3,"src"],[1,"col-sm","d-flex","flex-row"],[1,"d-flex","flex-row","nitro-catalog-layout-trophies-types","mb-2"],["type","button",3,"ngClass","disabled","click"],["autofocus","","name","trophie","maxlength","300",1,"w-100","bg-secondary","rounded","mb-2",3,"ngModel","ngModelChange"],[1,"d-flex","flex-row","justify-content-between","px-2","py-1","bg-emperor","rounded","mt-auto"],[1,"align-self-center"],[4,"ngIf"],[1,"d-flex","flex-row"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"small",3,"innerHtml"],[1,"pl-1",3,"src"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Uc(2,t_,1,1,"p",2),i.dc(3,"div",3),i.dc(4,"div",4),i.dc(5,"button",5),i.nc("click",function(){return e.handleButton("previous")}),i.Wc(6,"Previous"),i.cc(),i.cc(),i.dc(7,"div",6),i.Zb(8,"img",7),i.cc(),i.dc(9,"div",8),i.dc(10,"button",5),i.nc("click",function(){return e.handleButton("next")}),i.Wc(11,"Next"),i.cc(),i.cc(),i.cc(),i.dc(12,"div",9),i.dc(13,"button",10),i.nc("click",function(){return e.handleTrophyColor("g")}),i.cc(),i.dc(14,"button",10),i.nc("click",function(){return e.handleTrophyColor("s")}),i.cc(),i.dc(15,"button",10),i.nc("click",function(){return e.handleTrophyColor("b")}),i.cc(),i.cc(),i.dc(16,"textarea",11),i.nc("ngModelChange",function(t){return e.enteredText=t}),i.Wc(17),i.cc(),i.dc(18,"div",12),i.dc(19,"div",13),i.Uc(20,e_,3,2,"b",14),i.Uc(21,s_,3,2,"b",14),i.cc(),i.dc(22,"div",15),i.dc(23,"button",16),i.nc("click",function(){return e.buyCurrentItem()}),i.Wc(24),i.rc(25,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(2),i.yc("ngForOf",e.textPages),i.Kb(6),i.yc("src",e.imageUrl,i.Nc),i.Kb(5),i.yc("ngClass","btn btn-sm color-gold p-0 w-100 rounded mr-2 "+e.getActiveClass("g"))("disabled",!e.trophyHasColor("g")),i.Kb(1),i.yc("ngClass","btn btn-sm color-silver p-0 w-100 rounded mr-2 "+e.getActiveClass("s"))("disabled",!e.trophyHasColor("s")),i.Kb(1),i.yc("ngClass","btn btn-sm color-bronze p-0 w-100 rounded mr-2 "+e.getActiveClass("b"))("disabled",!e.trophyHasColor("b")),i.Kb(1),i.yc("ngModel",e.enteredText),i.Kb(1),i.Xc(e.enteredText),i.Kb(3),i.yc("ngIf",e.currentTrophyOffer.priceCredits),i.Kb(1),i.yc("ngIf",e.currentTrophyOffer.priceActivityPoints),i.Kb(3),i.Xc(i.sc(25,13,"buy")))},directives:[p.m,p.l,Ti.b,Ti.g,Ti.j,Ti.l,p.n],pipes:[Fs],encapsulation:2}),t})();const n_=i.fc(i_);let r_=(()=>{class t extends Ic{}return t.CODE="UNSUPPORTED",t.\u0275fac=function(e){return a_(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:2,vars:0,consts:[[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","nitro-catalog-layout-unsupported-component"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Wc(1," This layout is not yet implemented\n"),i.cc())},encapsulation:2}),t})();const a_=i.fc(r_);function o_(t,e){if(1&t&&i.Zb(0,"img",8),2&t){const t=i.qc();i.yc("src",t.getImage(1),i.Nc)}}function c_(t,e){if(1&t&&(i.dc(0,"div",17),i.Zb(1,"i",18),i.dc(2,"span"),i.Wc(3),i.cc(),i.cc()),2&t){const t=i.qc().$implicit,e=i.qc();i.Kb(3),i.Xc(e.getOfferText(t))}}function __(t,e){if(1&t&&(i.dc(0,"b"),i.Wc(1),i.Zb(2,"img",19),i.cc()),2&t){const t=i.qc().$implicit,e=i.qc();i.Kb(1),i.Yc("",t.priceCredits," "),i.Kb(1),i.yc("src",e.getCurrencyUrl(-1),i.Nc)}}function h_(t,e){if(1&t&&(i.dc(0,"b"),i.Wc(1),i.Zb(2,"img",19),i.cc()),2&t){const t=i.qc().$implicit,e=i.qc();i.Kb(1),i.Yc(" + ",t.priceActivityPoints," "),i.Kb(1),i.yc("src",e.getCurrencyUrl(t.priceActivityPointsType),i.Nc)}}function l_(t,e){if(1&t&&(i.dc(0,"b"),i.Wc(1),i.Zb(2,"img",19),i.cc()),2&t){const t=i.qc().$implicit,e=i.qc();i.Kb(1),i.Yc("",t.priceActivityPoints," "),i.Kb(1),i.yc("src",e.getCurrencyUrl(t.priceActivityPointsType),i.Nc)}}function u_(t,e){if(1&t){const t=i.ec();i.dc(0,"button",20),i.nc("click",function(){i.Lc(t);const e=i.qc().$implicit;return i.qc().buyVip(e)}),i.Wc(1),i.rc(2,"translate"),i.cc()}2&t&&(i.Kb(1),i.Xc(i.sc(2,1,"catalog.purchase_confirmation.gift")))}function d_(t,e){if(1&t){const t=i.ec();i.bc(0),i.dc(1,"div",9),i.Uc(2,c_,4,1,"div",10),i.dc(3,"div",11),i.dc(4,"div",12),i.Uc(5,__,3,2,"b",13),i.Uc(6,h_,3,2,"b",13),i.Uc(7,l_,3,2,"b",13),i.cc(),i.dc(8,"div",14),i.Uc(9,u_,3,3,"button",15),i.dc(10,"button",16),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc().buyVip(s)}),i.Wc(11),i.rc(12,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.ac()}if(2&t){const t=e.$implicit;i.Kb(2),i.yc("ngIf",t.productCode),i.Kb(3),i.yc("ngIf",t.priceCredits),i.Kb(1),i.yc("ngIf",t.priceActivityPoints&&t.priceCredits),i.Kb(1),i.yc("ngIf",t.priceActivityPoints&&!t.priceCredits),i.Kb(2),i.yc("ngIf",t.giftable),i.Kb(2),i.Xc(i.sc(12,6,"buy"))}}let g_=(()=>{class t extends Ic{constructor(t,e){super(t,e),this._catalogService=t,this._ngZone=e,this.vipOffers=[],t.registerVipBuyTemplate(this),t.requestOffers(6)}setOffers(t){this._ngZone.run(()=>{this.vipOffers=t.reverse()})}getPurseContent(){const t=this._catalogService.purse;return u.a.instance.localization.getValueWithParameter("catalog.vip.extend.info","days",(31*t.clubPeriods+t.clubDays).toString())}buyVip(t){this._catalogService.component&&this._catalogService.component.confirmVipSubscription(t)}getOfferText(t){return t.months>0?u.a.instance.getLocalizationWithParameter("catalog.vip.item.header.months","num_months",t.months.toString()):u.a.instance.getLocalizationWithParameter("catalog.vip.item.header.days","num_days",t.extraDays.toString())}}return t.CODE="vip_buy",t.\u0275fac=function(e){return new(e||t)(i.Yb(Sc),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:11,vars:6,consts:[[1,"w-100","h-100","nitro-catalog-layout-default-component"],[1,"row"],[1,"col-5"],[3,"src",4,"ngIf"],[1,"col-7"],[1,"small",3,"innerHtml"],[1,"col-12","mt-1"],[4,"ngFor","ngForOf"],[3,"src"],[1,"bg-secondary","rounded","mb-2","p-1"],["class","bg-primary rounded p-1 w-100 mb-1 d-flex flex-row",4,"ngIf"],[1,"d-flex","flex-row","justify-content-between","px-2","py-1"],[1,"align-self-center"],[4,"ngIf"],[1,"d-flex","flex-row"],["type","button","class","btn btn-success btn-sm mr-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"bg-primary","rounded","p-1","w-100","mb-1","d-flex","flex-row"],[1,"icon","icon-catalogue-hc_small","mr-2","d-block","align-self-center"],[1,"pl-1",3,"src"],["type","button",1,"btn","btn-success","btn-sm","mr-1",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"div",2),i.Uc(3,o_,1,1,"img",3),i.cc(),i.dc(4,"div",4),i.dc(5,"h6"),i.Wc(6),i.rc(7,"translate"),i.cc(),i.Zb(8,"p",5),i.cc(),i.dc(9,"div",6),i.Uc(10,d_,13,8,"ng-container",7),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.yc("ngIf",!e.activeOffer&&e.getImage(1)),i.Kb(3),i.Xc(i.sc(7,4,"catalog.vip.extend.title")),i.Kb(2),i.yc("innerHtml",e.getPurseContent(),i.Mc),i.Kb(2),i.yc("ngForOf",e.vipOffers))},directives:[p.n,p.m],pipes:[Fs],encapsulation:2}),t})();class m_{getLayoutForType(t){switch(t){case Dc.CODE:return Dc;case kc.CODE:return kc;case Vc.CODE:return Vc;case Hc.CODE:return Hc;case jc.CODE:return jc;case Jc.CODE:return Jc;case Mc.CODE:return Mc;case g_.CODE:return g_;case i_.CODE:return i_;default:return r_}}}var p_=s("2y6h"),f_=s("IRIx"),E_=s("DpKJ"),S_=s("zIYo");let I_=(()=>{class t{constructor(t){this._ngZone=t,this._isReady=!1,this._messages=[],this._currencies=new Map,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),this._messages=[new p_.a(this.onUserCreditsEvent.bind(this)),new f_.a(this.onUserCurrencyEvent.bind(this)),new E_.a(this.onUserCurrencyUpdateEvent.bind(this)),new hc.a(this.onUserSubscriptionEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(this._messages&&this._messages.length){for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]}})}requestUpdate(){u.a.instance.communication.connection.send(new S_.a)}onUserCreditsEvent(t){if(!t)return;const e=t.getParser();this._isReady=!0,this._ngZone.run(()=>this.setCurrency(-1,parseFloat(e.credits)))}onUserCurrencyEvent(t){if(!t)return;const e=t.getParser();this._ngZone.run(()=>{for(const[t,s]of e.currencies)this.setCurrency(t,s)})}onUserCurrencyUpdateEvent(t){if(!t)return;const e=t.getParser();this._ngZone.run(()=>this.setCurrency(e.type,e.amount))}onUserSubscriptionEvent(t){if(!t)return;const e=t.getParser();if(e)switch(e.name){case"habbo_club":return void(this._habboClubSubscription=e);default:console.log("unknown")}}setCurrency(t,e){this._currencies.set(t,e)}get currencies(){return this._currencies}get visibleCurrencies(){return u.a.instance.getConfiguration("system.currency.types",[])}get hcSub(){return this._habboClubSubscription}get isReady(){return this._isReady}}return t.\u0275fac=function(e){return new(e||t)(i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();const R_=["layoutsContainer"],b_=function(t){return{active:t}};function v_(t,e){if(1&t){const t=i.ec();i.bc(0),i.dc(1,"button",17),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc(3).selectTab(s)}),i.Wc(2),i.cc(),i.ac()}if(2&t){const t=e.$implicit,s=i.qc(3);i.Kb(1),i.yc("ngClass",i.Cc(2,b_,s.activeTab===t)),i.Kb(1),i.Yc(" ",t.localization," ")}}function T_(t,e){if(1&t&&(i.dc(0,"div",13),i.dc(1,"div",14),i.dc(2,"div",15),i.Uc(3,v_,3,4,"ng-container",16),i.cc(),i.cc(),i.cc()),2&t){const t=i.qc(2);i.Kb(3),i.yc("ngForOf",t.catalogRoot.children)}}function O_(t,e){1&t&&(i.bc(0),i.dc(1,"div",18),i.dc(2,"div",19),i.dc(3,"div",20),i.Zb(4,"i",21),i.cc(),i.Zb(5,"input",22),i.rc(6,"translate"),i.cc(),i.Zb(7,"div",23),i.cc(),i.ac()),2&t&&(i.Kb(5),i.yc("placeholder",i.sc(6,1,"catalog.search")))}function y_(t,e){}function A_(t,e){if(1&t){const t=i.ec();i.dc(0,"div",4),i.dc(1,"div",5),i.dc(2,"h6",6),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",7),i.nc("click",function(){return i.Lc(t),i.qc().hide()}),i.Zb(6,"i",8),i.cc(),i.cc(),i.Uc(7,T_,4,1,"div",9),i.dc(8,"div",10),i.Uc(9,O_,8,3,"ng-container",3),i.dc(10,"div",11),i.Uc(11,y_,0,0,"ng-template",null,12,i.Vc),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Xc(i.sc(4,3,"catalog.title")),i.Kb(4),i.yc("ngIf",t.catalogRoot&&t.catalogRoot.children.length>0),i.Kb(2),i.yc("ngIf",t.activeTab&&t.activeTab.children.length>0)}}function C_(t,e){if(1&t&&i.Zb(0,"nitro-catalog-confirm-purchase-component",24),2&t){const t=i.qc();i.yc("page",t.purchaseOfferPage)("offer",t.purchaseOffer)("quantity",t.purchaseOfferQuantity)("extra",t.purchaseOfferExtra)("completed",t.purchaseCompleted)}}function M_(t,e){if(1&t&&i.Zb(0,"nitro-catalog-confirm-vip-subscription-component",25),2&t){const t=i.qc();i.yc("subscription",t.purchaseVipSubscription)}}function U_(t,e){1&t&&i.Zb(0,"nitro-catalog-confirm-purchase-insufficient-funds")}let D_=(()=>{class t{constructor(t,e,s,i,n,r){this._settingsService=t,this._notificationService=e,this._catalogService=s,this._componentFactoryResolver=i,this._purseService=n,this._ngZone=r,this.visible=!1,this._roomPreviewer=null,this._lastComponent=null,this._layoutFactory=null,this._furnitureData=null,this._activeTab=null,this._activeOffer=null,this._purchaseOfferPage=null,this._purchaseOffer=null,this._purchaseVipSubscription=null,this._purchaseOfferQuantity=1,this._purchaseOfferExtra=null,this._purchaseCompleted=!1,this._showInsufficientFunds=!1}ngOnInit(){this._catalogService.component=this,this._layoutFactory=new m_,this._roomPreviewer||(this._roomPreviewer=new $o(u.a.instance.roomEngine,++$o.PREVIEW_COUNTER)),this.loadFurnitureData()}ngOnChanges(t){const e=t.visible.currentValue;e!==t.visible.previousValue&&(e?this.prepareCatalog():this.removeLastComponent())}ngOnDestroy(){this._roomPreviewer&&this._roomPreviewer.dispose(),this.reset(),this._catalogService.component=null,this._layoutFactory=null}reset(){this.removeLastComponent(),this._activeTab=null,this._activeOffer=null,this.hidePurchaseConfirmation()}hide(){this._settingsService.hideCatalog()}loadFurnitureData(){this.setFurnitureData()}setFurnitureData(){const t=u.a.instance.sessionDataManager.getAllFurnitureData(this);t&&(u.a.instance.sessionDataManager.removePendingFurniDataListener(this),this._furnitureData=t)}hidePurchaseConfirmation(){this._purchaseOfferPage=null,this._purchaseOffer=null,this._purchaseOfferQuantity=1,this._purchaseOfferExtra=null,this._purchaseVipSubscription=null}prepareCatalog(){this._catalogService.catalogRoot?setTimeout(()=>{this._activeTab?this._catalogService.activePage?this.setupLayout():this.selectFirstPage(this._activeTab):this.selectFirstTab()},0):this._catalogService.setupCatalog(Sc.MODE_NORMAL)}setupLayout(){const t=this._catalogService.activePage;if(!t)return;const e=this._layoutFactory.getLayoutForType(t.layoutCode);e?(this.createComponent(e),this._lastComponent&&(this._lastComponent.instance.activePage=t),this.selectOffer(null)):this.removeLastComponent()}createComponent(t){if(!t)return;this.removeLastComponent();const e=this._componentFactoryResolver.resolveComponentFactory(t);let s=null;e&&(s=this.layoutsContainer.createComponent(e)),this._lastComponent=s}removeLastComponent(){this.layoutsContainer&&this.layoutsContainer.remove(),this._lastComponent=null,this._activeOffer=null}selectTab(t){t&&(this._activeTab=t,this.selectFirstPage(t))}selectPage(t){t&&this._catalogService.requestPage(t)}selectFirstPage(t){t&&this.selectPage(0===t.children.length?t:t.children&&t.children[0])}selectFirstTab(){if(!this.catalogRoot)return;const t=this.catalogRoot.children&&this.catalogRoot.children[0];t&&this.selectTab(t)}selectOffer(t){if(this._activeOffer=t,this._activeOffer){const t=this._activeOffer.products[0];if(!t)return;if(!this._roomPreviewer)return;const e=this._catalogService.getFurnitureDataForProductOffer(t);if(!this._roomPreviewer)return;this._ngZone.runOutsideAngular(()=>{switch(t.productType){case Rc.FLOOR:if(this._roomPreviewer.updateObjectRoom("default","default","default"),e.specialType===zi.FIGURE_PURCHASABLE_SET){const t=[],s=e.customParams.split(",");for(const e of s){const s=parseInt(e);u.a.instance.avatar.isValidFigureSetForGender(s,u.a.instance.sessionDataManager.gender)&&t.push(s)}const i=u.a.instance.avatar.getFigureStringWithFigureIds(u.a.instance.sessionDataManager.figure,u.a.instance.sessionDataManager.gender,t);this._roomPreviewer.addAvatarIntoRoom(i,0)}else this._roomPreviewer.addFurnitureIntoRoom(t.furniClassId,new Y.a(90));return;case Rc.WALL:switch(e.className){case"floor":this._roomPreviewer.reset(!1),this._roomPreviewer.updateObjectRoom(t.extraParam);break;case"wallpaper":this._roomPreviewer.reset(!1),this._roomPreviewer.updateObjectRoom(null,t.extraParam);break;case"landscape":this._roomPreviewer.reset(!1),this._roomPreviewer.updateObjectRoom(null,null,t.extraParam);break;default:return this._roomPreviewer.updateObjectRoom("default","default","default"),void this._roomPreviewer.addWallItemIntoRoom(t.furniClassId,new Y.a(90),null)}return}})}else this._ngZone.runOutsideAngular(()=>this._roomPreviewer&&this._roomPreviewer.reset(!1))}hasSufficientFunds(t,e,s,i=1){if(!this._purseService)return!1;const n=this._purseService.currencies,r=n.get(-1),a=n.get(e);return!(r<t*i||a<s*i)}confirmPurchase(t,e,s=1,i=null){this.hasSufficientFunds(e.priceCredits,e.priceActivityPointsType,e.priceActivityPoints,s)?(this._purchaseOfferPage=t,this._purchaseOffer=e,this._purchaseOfferQuantity=s,this._purchaseOfferExtra=i):this.setInsufficientFunds(!0)}confirmVipSubscription(t){this.hasSufficientFunds(t.priceCredits,t.priceActivityPointsType,t.priceActivityPoints,1)?this._purchaseVipSubscription=t:this.setInsufficientFunds(!0)}searchCatalog(t){const e=this.getFurnitureDatasForSearch(t);e&&e.length&&u.a.instance.communication.connection.send(new qo.a(e[0].offerId))}getFurnitureDatasForSearch(e){if(!e)return[];const s=[];e=e.toLocaleLowerCase().replace(" ","");for(const i of this._furnitureData){if(!i||i.excludeDynamic)continue;let n=[i.name,i.description,i.className].join(" ");if(n=n.replace(/ /gi,""),n.indexOf(e)>=0&&s.push(i),s.length>=t.MAX_SEARCH_ITEMS)break}return s}get roomPreviewer(){return this._roomPreviewer}get catalogRoot(){return this._catalogService.catalogRoot}get activeTab(){return this._activeTab}get activeOffer(){return this._activeOffer}get activePage(){return this._catalogService.activePage}get activePageData(){return this._catalogService.activePageData}get purchaseOfferPage(){return this._purchaseOfferPage}get purchaseOffer(){return this._purchaseOffer}get purchaseOfferQuantity(){return this._purchaseOfferQuantity}get purchaseOfferExtra(){return this._purchaseOfferExtra}get purchaseCompleted(){return this._purchaseCompleted}get purchaseVipSubscription(){return this._purchaseVipSubscription}setInsufficientFunds(t){this._showInsufficientFunds=t}get showInsufficientFunds(){return this._showInsufficientFunds}}return t.MAX_SEARCH_ITEMS=200,t.\u0275fac=function(e){return new(e||t)(i.Yb(m),i.Yb(Ge),i.Yb(Sc),i.Yb(i.m),i.Yb(I_),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-catalog-main-component"]],viewQuery:function(t,e){if(1&t&&i.cd(R_,1,i.Z),2&t){let t;i.Hc(t=i.oc())&&(e.layoutsContainer=t.first)}},inputs:{visible:"visible"},features:[i.Ib],decls:4,vars:4,consts:[["class","nitro-catalog card","style","\n        background-image: url(assets/images/hotelview/articleHeader_canada_promo.gif);\n        background-position: 88% 0px;\n        background-repeat: no-repeat;\n        background-size: 147px;\n    ",3,"bringToTop","draggable",4,"ngIf"],[3,"page","offer","quantity","extra","completed",4,"ngIf"],[3,"subscription",4,"ngIf"],[4,"ngIf"],[1,"nitro-catalog","card",2,"background-image","url(assets/images/hotelview/articleHeader_canada_promo.gif)","background-position","88% 0px","background-repeat","no-repeat","background-size","147px",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],["class","row px-3 pt-3","style","padding-top: 5px !important",4,"ngIf"],[1,"row","p-3"],[1,"col"],["layoutsContainer",""],[1,"row","px-3","pt-3",2,"padding-top","5px !important"],[1,"col-12","d-flex"],[1,"btn-group","w-100"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-menu","btn-secondary","btn-sm",3,"ngClass","click"],[1,"col-4"],[1,"d-flex","mb-2",2,"display","none !important"],[1,"d-flex","justify-content-center","align-items-center","bg-secondary","border","shadow","px-2"],[1,"fas","fa-search"],["type","text",1,"form-control","form-control-sm","w-100",3,"placeholder"],["nitro-catalog-navigation-component","",2,"width","200px","margin-left","0px"],[3,"page","offer","quantity","extra","completed"],[3,"subscription"]],template:function(t,e){1&t&&(i.Uc(0,A_,13,5,"div",0),i.Uc(1,C_,1,5,"nitro-catalog-confirm-purchase-component",1),i.Uc(2,M_,1,1,"nitro-catalog-confirm-vip-subscription-component",2),i.Uc(3,U_,1,0,"nitro-catalog-confirm-purchase-insufficient-funds",3)),2&t&&(i.yc("ngIf",e.visible),i.Kb(1),i.yc("ngIf",null!==e.purchaseOffer),i.Kb(1),i.yc("ngIf",null!==e.purchaseVipSubscription),i.Kb(1),i.yc("ngIf",e.showInsufficientFunds))},encapsulation:2}),t})();var w_=s("VYTg");class N_{constructor(t,e,s){this._level=t,this._tileSize=e,this._name=s}get level(){return this._level}get tileSize(){return this._tileSize}get name(){return this._name}}var L_=s("1kSV");const x_=["nitro-navigator-room-creator-component",""],P_=function(t){return{active:t}},F_=function(t){return{"background-image":t}};function k_(t,e){if(1&t){const t=i.ec();i.dc(0,"div",21),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc().setRoomLayout(s.name)}),i.dc(1,"button",22),i.dc(2,"div",23),i.Wc(3),i.rc(4,"translate"),i.cc(),i.cc(),i.cc()}if(2&t){const t=e.$implicit,s=i.qc();i.Kb(1),i.yc("ngClass",i.Cc(6,P_,s.roomLayoutControl.value===t.name))("ngStyle",i.Cc(8,F_,"url("+s.getRoomLayoutImageUrl(t.name)+")")),i.Kb(2),i.Zc(" ",t.tileSize," ",i.sc(4,4,"navigator.createroom.tilesize")," ")}}function W_(t,e){if(1&t&&(i.dc(0,"option",24),i.Wc(1),i.rc(2,"translate"),i.cc()),2&t){const t=e.$implicit;i.yc("value",t.id),i.Kb(1),i.Yc(" ",i.sc(2,2,t.name)," ")}}function V_(t,e){if(1&t&&(i.dc(0,"option",24),i.Wc(1),i.cc()),2&t){const t=e.$implicit;i.yc("value",t),i.Kb(1),i.Yc(" ",t," ")}}function G_(t,e){if(1&t&&(i.dc(0,"option",24),i.Wc(1),i.rc(2,"translate"),i.cc()),2&t){const t=e.$implicit;i.yc("value",t.key),i.Kb(1),i.Yc(" ",i.sc(2,2,t.value)," ")}}let H_=(()=>{class t{constructor(t,e,s){this._navigatorService=t,this._activeModal=e,this._formBuilder=s,this._layouts=[],this._maxVisitors=[],this._tradeSettings=[],this._roomCreateListener=null}ngOnInit(){this.setRoomLayouts(),this.setMaxVisitors(50),this.setTradeSettings(),this.createForm(),this._roomCreateListener=new aa.a(this.onRoomCreatedEvent.bind(this)),u.a.instance.communication.registerMessageEvent(this._roomCreateListener)}ngOnDestroy(){u.a.instance.communication.removeMessageEvent(this._roomCreateListener)}onRoomCreatedEvent(t){this.hide()}createForm(){let t=0;const e=this.categories[0];e&&(t=e.id),this._form=this._formBuilder.group({roomName:["",Ti.r.required],roomDesc:[""],roomLayout:[this.layouts[0].name,Ti.r.required],roomCategory:[t.toString(),Ti.r.required],roomVisitors:[this.maxVisitors[0].toString(),Ti.r.required],roomTrade:["0",Ti.r.required]})}submit(){if(!this.form.valid)return;const t=this.roomNameControl.value,e=this.roomDescControl.value,s="model_"+this.roomLayoutControl.value,i=parseInt(this.roomCategoryControl.value),n=parseInt(this.roomVisitorsControl.value),r=parseInt(this.roomTradeControl.value);t&&""!==t&&u.a.instance.communication.connection.send(new w_.a(t,e,s,i,n,r))}hide(){this._activeModal.close()}setRoomLayouts(){this._layouts=[new N_(ut._Str_3159,104,"a"),new N_(ut._Str_3159,94,"b"),new N_(ut._Str_3159,36,"c"),new N_(ut._Str_3159,84,"d"),new N_(ut._Str_3159,80,"e"),new N_(ut._Str_3159,80,"f"),new N_(ut._Str_3159,416,"i"),new N_(ut._Str_3159,320,"j"),new N_(ut._Str_3159,448,"k"),new N_(ut._Str_3159,352,"l"),new N_(ut._Str_3159,384,"m"),new N_(ut._Str_3159,372,"n"),new N_(ut._Str_2964,80,"g"),new N_(ut._Str_2964,74,"h"),new N_(ut._Str_2964,416,"o"),new N_(ut._Str_2964,352,"p"),new N_(ut._Str_2964,304,"q"),new N_(ut._Str_2964,336,"r"),new N_(ut._Str_2964,748,"u"),new N_(ut._Str_2964,438,"v"),new N_(ut._Str_2575,540,"t"),new N_(ut._Str_2575,512,"w"),new N_(ut._Str_2575,396,"x"),new N_(ut._Str_2575,440,"y"),new N_(ut._Str_2575,456,"z"),new N_(ut._Str_2575,208,"0"),new N_(ut._Str_2575,1009,"1"),new N_(ut._Str_2575,1044,"2"),new N_(ut._Str_2575,183,"3"),new N_(ut._Str_2575,254,"4"),new N_(ut._Str_2575,1024,"5"),new N_(ut._Str_2575,801,"6"),new N_(ut._Str_2575,354,"7"),new N_(ut._Str_2575,888,"8"),new N_(ut._Str_2575,926,"9")]}setMaxVisitors(e){this._maxVisitors=[];let s=t.MAX_VISITOR_STEPPER;for(;s<=e;)this._maxVisitors.push(s),s+=t.MAX_VISITOR_INCREMENTOR}setTradeSettings(){this._tradeSettings=[],this._tradeSettings.push("${navigator.roomsettings.trade_not_allowed}","${navigator.roomsettings.trade_not_with_Controller}","${navigator.roomsettings.trade_allowed}")}setRoomLayout(t){const e=this.roomLayoutControl;e&&e.setValue(t)}getRoomLayoutImageUrl(t){let e=u.a.instance.getConfiguration("images.url");return e+=`/navigator/models/model_${t}.png`,e}get form(){return this._form}get categories(){return this._navigatorService.categories}get layouts(){return this._layouts}get maxVisitors(){return this._maxVisitors}get tradeSettings(){return this._tradeSettings}get roomNameControl(){return this._form.controls.roomName}get roomDescControl(){return this._form.controls.roomDesc}get roomLayoutControl(){return this._form.controls.roomLayout}get roomCategoryControl(){return this._form.controls.roomCategory}get roomVisitorsControl(){return this._form.controls.roomVisitors}get roomTradeControl(){return this._form.controls.roomTrade}get isLoading(){return!1}}return t.MAX_VISITOR_STEPPER=10,t.MAX_VISITOR_INCREMENTOR=5,t.\u0275fac=function(e){return new(e||t)(i.Yb(fa),i.Yb(L_.a),i.Yb(Ti.c))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-navigator-room-creator-component",""]],attrs:x_,decls:46,vars:29,consts:[[1,"d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0",2,"color","#4a4a4a"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","row","p-3"],[1,"col-7"],[1,"grid-container",2,"height","479px","min-height","479px","max-height","479px"],[1,"grid-items","grid-2"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"col-5"],[3,"formGroup"],[1,"form-group"],[2,"color","#494949","font-weight","bold"],["type","text","formControlName","roomName",1,"form-control","form-control-sm"],["formControlName","roomDesc",1,"form-control","form-control-sm"],["formControlName","roomCategory",1,"form-control","form-control-sm"],[3,"value",4,"ngFor","ngForOf"],["formControlName","roomVisitors",1,"form-control","form-control-sm"],["formControlName","roomTrade",1,"form-control","form-control-sm"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-success","w-100","btn-catalog-buy",3,"disabled","click"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button",1,"btn","btn-secondary","align-items-end","detail-info","has-image","create-option",3,"ngClass","ngStyle"],[1,"badge","badge-primary",2,"border-radius","20px","background-color","rgb(73 73 73 / 81%)","padding","5px 10px"],[3,"value"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"h6",1),i.Wc(2),i.rc(3,"translate"),i.cc(),i.dc(4,"button",2),i.nc("click",function(){return e.hide()}),i.Zb(5,"i",3),i.cc(),i.cc(),i.dc(6,"div",4),i.dc(7,"div",5),i.dc(8,"perfect-scrollbar",6),i.dc(9,"div",7),i.Uc(10,k_,5,10,"div",8),i.cc(),i.cc(),i.cc(),i.dc(11,"div",9),i.dc(12,"form",10),i.dc(13,"div",11),i.dc(14,"label",12),i.Wc(15),i.rc(16,"translate"),i.cc(),i.Zb(17,"input",13),i.cc(),i.dc(18,"div",11),i.dc(19,"label",12),i.Wc(20),i.rc(21,"translate"),i.cc(),i.Zb(22,"textarea",14),i.cc(),i.dc(23,"div",11),i.dc(24,"label",12),i.Wc(25),i.rc(26,"translate"),i.cc(),i.dc(27,"select",15),i.Uc(28,W_,3,4,"option",16),i.cc(),i.cc(),i.dc(29,"div",11),i.dc(30,"label",12),i.Wc(31),i.rc(32,"translate"),i.cc(),i.dc(33,"select",17),i.Uc(34,V_,2,2,"option",16),i.cc(),i.cc(),i.dc(35,"div",11),i.dc(36,"label",12),i.Wc(37),i.rc(38,"translate"),i.cc(),i.dc(39,"select",18),i.Uc(40,G_,3,4,"option",16),i.rc(41,"keyvalue"),i.cc(),i.cc(),i.cc(),i.dc(42,"div",19),i.dc(43,"button",20),i.nc("click",function(){return e.submit()}),i.Wc(44),i.rc(45,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Yc(" ",i.sc(3,13,"navigator.createroom.title")," "),i.Kb(8),i.yc("ngForOf",e.layouts),i.Kb(2),i.yc("formGroup",e.form),i.Kb(3),i.Xc(i.sc(16,15,"navigator.createroom.roomnameinfo")),i.Kb(5),i.Xc(i.sc(21,17,"navigator.createroom.roomdescinfo")),i.Kb(5),i.Xc(i.sc(26,19,"navigator.category")),i.Kb(3),i.yc("ngForOf",e.categories),i.Kb(3),i.Xc(i.sc(32,21,"navigator.maxvisitors")),i.Kb(3),i.yc("ngForOf",e.maxVisitors),i.Kb(3),i.Xc(i.sc(38,23,"navigator.tradesettings")),i.Kb(3),i.yc("ngForOf",i.sc(41,25,e.tradeSettings)),i.Kb(3),i.yc("disabled",e.form.pristine||e.form.invalid),i.Kb(1),i.Yc(" ",i.sc(45,27,"navigator.createroom.create")," "))},directives:[Oi.b,p.m,Ti.t,Ti.k,Ti.e,Ti.b,Ti.j,Ti.d,Ti.q,p.l,p.o,Ti.m,Ti.s],pipes:[Fs,p.h],encapsulation:2}),t})();const B_=["nitro-navigator-room-doorbell-component",""];function j_(t,e){1&t&&(i.dc(0,"span",11),i.Wc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Xc(i.sc(2,1,"navigator.doorbell.info")))}function K_(t,e){1&t&&(i.dc(0,"span",11),i.Wc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Xc(i.sc(2,1,"navigator.doorbell.waiting")))}function z_(t,e){1&t&&(i.dc(0,"span",11),i.Wc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Xc(i.sc(2,1,"navigator.doorbell.no.answer")))}function Y_(t,e){if(1&t){const t=i.ec();i.dc(0,"button",12),i.nc("click",function(){return i.Lc(t),i.qc().ring()}),i.Wc(1),i.rc(2,"translate"),i.cc()}2&t&&(i.Kb(1),i.Yc(" ",i.sc(2,1,"navigator.doorbell.button.ring")," "))}let X_=(()=>{class t{constructor(t,e){this._navigatorService=t,this._activeModal=e,this.room=null,this.isWaiting=!1,this.noAnswer=!1}ring(){!this.room||this.isWaiting||this.noAnswer||(this._navigatorService.goToRoom(this.room.roomId),this.hide())}close(){this._navigatorService.component.closeRoomDoorbell(),this.isWaiting&&u.a.instance.communication.connection.send(new ca.a)}hide(){this._activeModal.close()}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(fa),i.Yb(L_.a))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-navigator-room-doorbell-component",""]],inputs:{room:"room",isWaiting:"isWaiting",noAnswer:"noAnswer"},attrs:B_,decls:18,vars:10,consts:[[1,"modal-header",2,"border","none","font-weight","550","color","#4a4a4a","font-size","21px"],["type","button",1,"close",2,"margin-top","-5px","margin-right","0px","padding","14px",3,"click"],[1,"fas","fa-times"],[1,"modal-body",2,"padding-top","5px"],[1,"row",2,"margin-bottom","20px"],[1,"col-12"],["style","color: #4a4a4a",4,"ngIf"],[1,"row"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary","btn-danger",2,"background-color","#c82333","width","49%",3,"click"],["type","button","class","btn btn-primary btn-catalog-buy","style","border-radius: 20px !important; width: 49%",3,"click",4,"ngIf"],[2,"color","#4a4a4a"],["type","button",1,"btn","btn-primary","btn-catalog-buy",2,"border-radius","20px !important","width","49%",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Wc(1),i.rc(2,"translate"),i.dc(3,"button",1),i.nc("click",function(){return e.close()}),i.Zb(4,"i",2),i.cc(),i.cc(),i.dc(5,"div",3),i.dc(6,"div",4),i.dc(7,"div",5),i.Uc(8,j_,3,3,"span",6),i.Uc(9,K_,3,3,"span",6),i.Uc(10,z_,3,3,"span",6),i.cc(),i.cc(),i.dc(11,"div",7),i.dc(12,"div",5),i.dc(13,"div",8),i.dc(14,"button",9),i.nc("click",function(){return e.close()}),i.Wc(15),i.rc(16,"translate"),i.cc(),i.Uc(17,Y_,3,3,"button",10),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(1),i.Yc(" ",i.sc(2,6,"navigator.doorbell.title")," "),i.Kb(7),i.yc("ngIf",!e.isWaiting&&!e.noAnswer),i.Kb(1),i.yc("ngIf",e.isWaiting&&!e.noAnswer),i.Kb(1),i.yc("ngIf",e.noAnswer),i.Kb(5),i.Yc(" ",i.sc(16,8,"generic.cancel")," "),i.Kb(2),i.yc("ngIf",!e.isWaiting&&!e.noAnswer))},directives:[p.n],pipes:[Fs],encapsulation:2}),t})();const Z_=["nitro-navigator-room-password-component",""];function q_(t,e){if(1&t&&(i.dc(0,"div",15),i.Wc(1),i.cc()),2&t){const t=i.qc();i.Kb(1),i.Yc(" ",t.room.roomName," ")}}function Q_(t,e){1&t&&(i.dc(0,"div",9),i.Wc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Yc(" ",i.sc(2,1,"navigator.password.info")," "))}function J_(t,e){1&t&&(i.dc(0,"div",9),i.Wc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Yc(" ",i.sc(2,1,"navigator.password.retryinfo")," "))}let $_=(()=>{class t{constructor(t,e){this._navigatorService=t,this._activeModal=e,this.room=null,this.isWrongPassword=!1,this.password=""}tryPassword(){this.room&&this.password&&(this._navigatorService.goToRoom(this.room.roomId,this.password),this.hide())}close(){this._navigatorService.component.closeRoomPassword()}hide(){this._activeModal.close()}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(fa),i.Yb(L_.a))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-navigator-room-password-component",""]],inputs:{room:"room",isWrongPassword:"isWrongPassword"},attrs:Z_,decls:26,vars:16,consts:[[1,"modal-header",2,"border","none","font-weight","550","color","#4a4a4a","font-size","21px"],["type","button",1,"close",2,"margin-top","-5px","margin-right","0px","padding","14px",3,"click"],[1,"fas","fa-times"],[1,"modal-body",2,"padding-top","5px"],[1,"row",2,"margin-bottom","20px"],[1,"col-12"],["class","font-weight-bold","style","color: #4a4a4a",4,"ngIf"],["style","color: #4a4a4a",4,"ngIf"],[1,"form-group"],[2,"color","#4a4a4a"],["autocomplete","new-password","type","password","placeholder","*****",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"row"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary","btn-danger",2,"background-color","#c82333","width","49%",3,"click"],["type","button",1,"btn","btn-primary","btn-catalog-buy",2,"border-radius","20px !important","width","49%",3,"click"],[1,"font-weight-bold",2,"color","#4a4a4a"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Wc(1),i.rc(2,"translate"),i.dc(3,"button",1),i.nc("click",function(){return e.close()}),i.Zb(4,"i",2),i.cc(),i.cc(),i.dc(5,"div",3),i.dc(6,"div",4),i.dc(7,"div",5),i.Uc(8,q_,2,1,"div",6),i.Uc(9,Q_,3,3,"div",7),i.Uc(10,J_,3,3,"div",7),i.Zb(11,"br"),i.dc(12,"div",8),i.dc(13,"label",9),i.Wc(14),i.rc(15,"translate"),i.cc(),i.dc(16,"input",10),i.nc("ngModelChange",function(t){return e.password=t}),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(17,"div",11),i.dc(18,"div",5),i.dc(19,"div",12),i.dc(20,"button",13),i.nc("click",function(){return e.close()}),i.Wc(21),i.rc(22,"translate"),i.cc(),i.dc(23,"button",14),i.nc("click",function(){return e.tryPassword()}),i.Wc(24),i.rc(25,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(1),i.Yc(" ",i.sc(2,8,"navigator.password.title")," "),i.Kb(7),i.yc("ngIf",e.room),i.Kb(1),i.yc("ngIf",!e.isWrongPassword),i.Kb(1),i.yc("ngIf",e.isWrongPassword),i.Kb(4),i.Xc(i.sc(15,10,"navigator.password.enter")),i.Kb(2),i.yc("ngModel",e.password),i.Kb(5),i.Yc(" ",i.sc(22,12,"generic.cancel")," "),i.Kb(3),i.Yc(" ",i.sc(25,14,"navigator.password.button.try")," "))},directives:[p.n,Ti.b,Ti.j,Ti.l],pipes:[Fs],encapsulation:2}),t})();const th=function(t){return{active:t}};function eh(t,e){if(1&t){const t=i.ec();i.dc(0,"button",15),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc(2).setCurrentContext(s)}),i.Wc(1),i.rc(2,"translate"),i.cc()}if(2&t){const t=e.$implicit,s=i.qc(2);i.yc("ngClass",i.Cc(4,th,s.topLevelContext===t)),i.Kb(1),i.Yc(" ",i.sc(2,2,"navigator.toplevelview."+t.code)," ")}}function sh(t,e){1&t&&i.Zb(0,"div",16),2&t&&i.yc("result",e.$implicit)}function ih(t,e){if(1&t){const t=i.ec();i.dc(0,"div",2),i.dc(1,"div",3),i.dc(2,"h6",4),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",5),i.nc("click",function(){return i.Lc(t),i.qc().hide()}),i.Zb(6,"i",6),i.cc(),i.cc(),i.dc(7,"div",7),i.Zb(8,"div",8),i.dc(9,"div",9),i.Uc(10,eh,3,6,"button",10),i.dc(11,"button",11),i.nc("click",function(){return i.Lc(t),i.qc().openRoomCreator()}),i.Zb(12,"i",12),i.cc(),i.cc(),i.dc(13,"perfect-scrollbar",13),i.Uc(14,sh,1,1,"div",14),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Yc(" ",i.sc(4,3,t.isLoading?"navigator.title.is.busy":"navigator.title")," "),i.Kb(7),i.yc("ngForOf",t.topLevelContexts),i.Kb(4),i.yc("ngForOf",t.lastSearchResults)}}function nh(t,e){1&t&&i.Zb(0,"nitro-navigator-room-info-component")}let rh=(()=>{class t{constructor(t,e,s){this._settingsService=t,this._navigatorService=e,this._modalService=s,this.visible=!1}ngOnInit(){this._navigatorService.component=this}ngOnChanges(t){const e=t.visible.currentValue;e&&e!==t.visible.previousValue&&this.prepareNavigator()}ngOnDestroy(){this._roomCreatorModal&&this._roomCreatorModal.close(),this._navigatorService.component=null}prepareNavigator(){this._navigatorService.isLoaded?this._navigatorService.search():this._navigatorService.loadNavigator()}setCurrentContext(t){this._navigatorService.setCurrentContext(t),this._navigatorService.clearSearch()}hide(){this._settingsService.hideNavigator()}openRoomCreator(){this._roomCreatorModal||(this._roomCreatorModal=this._modalService.open(H_,{backdrop:"static",size:"lg",centered:!0,keyboard:!1}),this._roomCreatorModal&&this._roomCreatorModal.result.then(()=>this._roomCreatorModal=null))}openRoomDoorbell(t,e=!1,s=!1){this._roomPasswordModal&&this._roomPasswordModal.close(),t||(t=this._lastRoom),this._lastRoom=t;let i=this._roomDoorbellModal;if(i||(i=this._roomDoorbellModal=this._modalService.open(X_,{backdrop:"static",size:"sm",centered:!0,keyboard:!1}),i.result.then(()=>this._roomDoorbellModal=null)),this._roomDoorbellModal=i,this._roomDoorbellModal){const n=i.componentInstance;n&&(n.room=t,n.isWaiting=e,n.noAnswer=s)}}closeRoomDoorbell(){this._roomDoorbellModal&&(this._roomDoorbellModal.close(),this._lastRoom=null)}openRoomPassword(t,e=!1){this._roomDoorbellModal&&this._roomDoorbellModal.close(),t||(t=this._lastRoom),this._lastRoom=t;let s=this._roomPasswordModal;if(s||(s=this._roomPasswordModal=this._modalService.open($_,{backdrop:"static",size:"sm",centered:!0,keyboard:!1}),s.result.then(()=>this._roomPasswordModal=null)),this._roomPasswordModal=s,this._roomPasswordModal){const i=s.componentInstance;if(!i)return;i.room=t,i.isWrongPassword=e}}closeRoomPassword(){this._roomPasswordModal&&(this._roomPasswordModal.close(),this._lastRoom=null)}get topLevelContext(){return this._navigatorService&&this._navigatorService.topLevelContext||null}get topLevelContexts(){return this._navigatorService&&this._navigatorService.topLevelContexts||null}get lastSearchResults(){return this._navigatorService.lastSearchResults}get isLoading(){return this._navigatorService&&(this._navigatorService.isLoading||this._navigatorService.isSearching)}get sliderVisible(){return u.a.instance.core.configuration.getValue("navigator.slider.enabled")}get roomInfoShowing(){return this._navigatorService.roomInfoShowing}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(m),i.Yb(fa),i.Yb(L_.g))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-navigator-main-component"]],inputs:{visible:"visible"},features:[i.Ib],decls:3,vars:2,consts:[["class","nitro-navigator card",3,"bringToTop","draggable",4,"ngIf"],[4,"ngIf"],[1,"nitro-navigator","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],["nitro-navigator-search-component",""],[1,"btn-group","w-100","mb-2",2,"margin-top","5px"],["type","button","class","btn btn-secondary btn-menu",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-secondary","btn-menu",2,"background-color","#22c943","filter","drop-shadow(0px 2px 0 #1cb33a) !important","padding-left","10px","margin-right","0px",3,"click"],[1,"fas","fa-plus"],[1,"results-container","position-relative","w-100","pr-1",2,"min-height","350px","max-height","450px","height","450px"],["class","mb-1","nitro-navigator-search-result-component","",3,"result",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-secondary","btn-menu",3,"ngClass","click"],["nitro-navigator-search-result-component","",1,"mb-1",3,"result"]],template:function(t,e){1&t&&(i.Uc(0,ih,15,5,"div",0),i.Uc(1,nh,1,0,"nitro-navigator-room-info-component",1),i.Zb(2,"nitro-navigator-roomsettings-component")),2&t&&(i.yc("ngIf",e.visible),i.Kb(1),i.yc("ngIf",e.roomInfoShowing))},encapsulation:2}),t})();var ah=s("5RE+"),oh=s("ulbO"),ch=s("9loD"),_h=s("5Cat"),hh=s("Bbk2"),lh=s("J0cl"),uh=s("bmkm"),dh=s("k0R1");let gh=(()=>{class t{}return t.DEFAULT=1,t._Str_3639=2,t._Str_3683=3,t._Str_3432=4,t._Str_12351=5,t._Str_5186=6,t._Str_21911=7,t._Str_9125=8,t._Str_5922=9,t._Str_18231=10,t._Str_4255=11,t._Str_19933=12,t._Str_7696=13,t._Str_7297=14,t._Str_7954=15,t._Str_6096=16,t._Str_12454=17,t._Str_19144=18,t.MONSTERPLANT_SEED=19,t._Str_6915=20,t._Str_8726=21,t._Str_9449=22,t._Str_12534=23,t})();class mh{constructor(t){this._locked=!1,this._id=t.itemId,this._type=t.spriteId,this._ref=t.ref,this._category=t.category,this._groupable=t.isGroupable&&!t.rentable,this._tradeable=t.tradable,this._recyclable=t.isRecycleable,this._sellable=t.sellable,this._stuffData=t.stuffData,this._extra=t._Str_2794,this._secondsToExpiration=t.secondsToExpiration,this._expirationTimeStamp=t._Str_10616,this._hasRentPeriodStarted=t.hasRentPeriodStarted,this._creationDay=t._Str_8932,this._creationMonth=t._Str_9050,this._creationYear=t._Str_9408,this._slotId=t.slotId,this._songId=t._Str_3951,this._flatId=t.flatId,this._isRented=t.rentable,this._isWallItem=t.isWallItem}get rentable(){return this._isRented}get id(){return this._id}get ref(){return this._ref}get category(){return this._category}get type(){return this._type}get stuffData(){return this._stuffData}set stuffData(t){this._stuffData=t}get _Str_2794(){return this._extra}get _Str_16260(){return this._recyclable}get isTradable(){return this._tradeable}get isGroupable(){return this._groupable}get sellable(){return this._sellable}get secondsToExpiration(){if(-1===this._secondsToExpiration)return-1;let t=-1;return this._hasRentPeriodStarted?(t=this._secondsToExpiration-(u.a.instance.time-this._expirationTimeStamp)/1e3,t<0&&(t=0)):t=this._secondsToExpiration,t}get _Str_8932(){return this._creationDay}get _Str_9050(){return this._creationMonth}get _Str_9408(){return this._creationYear}get slotId(){return this._slotId}get _Str_3951(){return this._songId}get locked(){return this._locked}set locked(t){this._locked=t}get flatId(){return this._flatId}get isWallItem(){return this._isWallItem}get hasRentPeriodStarted(){return this._hasRentPeriodStarted}get _Str_10616(){return this._expirationTimeStamp}update(t){this._type=t.spriteId,this._ref=t.ref,this._category=t.category,this._groupable=t.isGroupable&&!t.rentable,this._tradeable=t.tradable,this._recyclable=t.isRecycleable,this._sellable=t.sellable,this._stuffData=t.stuffData,this._extra=t._Str_2794,this._secondsToExpiration=t.secondsToExpiration,this._expirationTimeStamp=t._Str_10616,this._hasRentPeriodStarted=t.hasRentPeriodStarted,this._creationDay=t._Str_8932,this._creationMonth=t._Str_9050,this._creationYear=t._Str_9408,this._slotId=t.slotId,this._songId=t._Str_3951,this._flatId=t.flatId,this._isRented=t.rentable,this._isWallItem=t.isWallItem}}let ph=(()=>{class t{constructor(t,e,s,i,n){this._Str_18094=1,this._Str_18535=.2,this._type=t,this._category=e,this._roomEngine=s,this._stuffData=i,this._extra=n,this._isWallItem=!1,this._iconUrl=null,this._name=null,this._description=null,this._locked=!1,this._selected=!1,this._hasUnseenItems=!1,this._items=new Yi.a}prepareGroup(){this.setIcon(),this.setName(),this.setDescription()}dispose(){}getItemByIndex(t){return this._items.getWithIndex(t)}getItemById(t){return this._items.getValue(t)}getTradeItems(t){const e=[],s=this.getLastItem();if(!s)return e;let i=0,n=0;for(;n<this._items.length&&!(i>=t);){const t=this.getItemByIndex(n);!t.locked&&t.isTradable&&t.type===s.type&&(e.push(t),i++),n++}return e}push(t,e=!1){const s=this._items.getValue(t.id);s?s.locked=!1:this._items.add(t.id,t),1===this._items.length&&this.prepareGroup()}pop(){let t=null;return this._items.length>0&&(t=this._items.getWithIndex(this._items.length-1),this._items.remove(t.id)),t}remove(t){const e=this._items.getValue(t);return e?(this._items.remove(t),e):null}getTotalCount(){if(this._category===gh._Str_12351){let t=0,e=0;for(;e<this._items.length;){const s=this._items.getWithIndex(e);t+=parseInt(s.stuffData.getLegacyString()),e++}return t}return this._items.length}getUnlockedCount(){if(this.category===gh._Str_12351)return this.getTotalCount();let t=0,e=0;for(;e<this._items.length;)this._items.getWithIndex(e).locked||t++,e++;return t}getLastItem(){return this._items.length?this._items.getWithIndex(this._items.length-1):null}unlockAllItems(){if(this._items.length)for(const t of this._items.getValues())t&&t.locked&&(t.locked=!1)}lockItemIds(t){for(const e of this._items.getValues()){const s=t.indexOf(e.ref)>=0;e.locked!==s&&(e.locked=s)}}setName(){const t=this.getLastItem();if(!t)return void(this._name="");let e="";switch(this._category){case gh._Str_5186:e="poster_"+t.stuffData.getLegacyString()+"_name";break;case gh._Str_9125:return void(this._name="SONG_NAME");default:e=this.isWallItem?"wallItem.name."+t.type:"roomItem.name."+t.type}this._name=u.a.instance.getLocalization(e)}setDescription(){this._description=""}setIcon(){if(this._iconUrl)return;let t=null;t=this.isWallItem?this._roomEngine.getFurnitureWallIcon(this._type,this,this._stuffData.getLegacyString()):this._roomEngine.getFurnitureFloorIcon(this._type,this,this._extra.toString(),this._stuffData),(t.image||t.data)&&this.setIconUrl(t.image?t.image.src:t.getImage().src)}setIconUrl(t){t&&(this._iconUrl=t)}imageReady(t,e,s=null){-1!==t&&s&&(this._iconUrl&&this._iconUrl.length&&s.src===this._iconUrl||this.setIconUrl(s.src))}imageFailed(t){}get type(){return this._type}get category(){return this._category}get stuffData(){return this._stuffData}get extra(){return this._extra}get iconUrl(){return this._iconUrl}get name(){return this._name}get description(){return this._description}get hasUnseenItems(){return this._hasUnseenItems}set hasUnseenItems(t){this._hasUnseenItems=t}get locked(){return this._locked}set locked(t){this._locked=t}get selected(){return this._selected}set selected(t){this._selected=t}get isWallItem(){const t=this.getItemByIndex(0);return!!t&&t.isWallItem}get isGroupable(){const t=this.getItemByIndex(0);return!!t&&t.isGroupable}get items(){return this._items}}return t.INVENTORY_THUMB_XML="inventory_thumb_xml",t._Str_4072=13421772,t._Str_4169=10275685,t})(),fh=(()=>{class t{constructor(t,e){this._inventoryService=t,this._ngZone=e,this._messages=[],this._furniMsgFragments=null,this._groupItems=[],this._itemIdInFurniPlacing=-1,this._isObjectMoverRequested=!1,this._isInitialized=!1,this._needsUpdate=!1,this.onRoomEngineObjectPlacedEvent=this.onRoomEngineObjectPlacedEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomEngine.events.addEventListener(T.a.PLACED,this.onRoomEngineObjectPlacedEvent),this._messages=[new ah.a(this.onFurnitureListAddOrUpdateEvent.bind(this)),new oh.a(this.onFurnitureListEvent.bind(this)),new ch.a(this.onFurnitureListInvalidateEvent.bind(this)),new _h.a(this.onFurnitureListRemovedEvent.bind(this)),new hh.a(this.onFurniturePostItPlacedEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomEngine.events.removeEventListener(T.a.PLACED,this.onRoomEngineObjectPlacedEvent);for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomEngineObjectPlacedEvent(t){t&&this._isObjectMoverRequested&&t.type===T.a.PLACED&&(this._isObjectMoverRequested=!1,t._Str_4057||this._ngZone.run(()=>this._inventoryService.showWindow()))}onFurnitureListAddOrUpdateEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=e.items;this._ngZone.run(()=>{for(const t of s){const e=this.getGroupItemForFurnitureId(t.itemId);if(e){const s=e.getItemById(t.itemId);s&&(s.update(t),e.hasUnseenItems=!0)}else{const e=new mh(t);this.addFurnitureItem(e,!1)}}})}onFurnitureListEvent(t){if(!t)return;const e=t.getParser();if(!e)return;this._furniMsgFragments||(this._furniMsgFragments=new Array(e.totalFragments));const s=new Map([...e.fragment]),i=this.mergeFragments(s,e.totalFragments,e.fragmentNumber,this._furniMsgFragments);i&&(this._ngZone.run(()=>this.processFragment(i)),this._furniMsgFragments=null)}onFurnitureListInvalidateEvent(t){t&&t.getParser()&&(this._inventoryService.furnitureVisible?this.requestLoad():this._needsUpdate=!0)}onFurnitureListRemovedEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this.removeItemById(e.itemId)&&this.setAllFurnitureSeen()})}onFurniturePostItPlacedEvent(t){t&&t.getParser()}mergeFragments(t,e,s,i){if(1===e)return t;i[s]=t;for(const r of i)if(!r)return null;const n=new Map;for(const r of i){for(const[t,e]of r)n.set(t,e);r.clear()}return i=null,n}processFragment(e){const s=this.getAllItemIds(),i=[],n=[];for(const t of e.keys())-1===s.indexOf(t)&&i.push(t);for(const t of s)e.get(t)||n.push(t);const r=0===s.length;for(const t of n)this.removeItemById(t);for(const t of i){const s=e.get(t);if(!s)continue;const i=new mh(s);this.addFurnitureItem(i,!0)}r||i.length&&this._inventoryService.updateItemLocking(),i.length&&this._inventoryService.furniController&&(this._inventoryService.furniController.paginateConfig.currentPage=1),this._isInitialized=!0,this._inventoryService.events.next(t.INVENTORY_UPDATED),this._inventoryService.furniController&&this._inventoryService.furniController.selectExistingGroupOrDefault()}getAllItemIds(){const t=[];for(const e of this._groupItems){let s=e.getTotalCount();e.category===gh._Str_12351&&(s=1);let i=0;for(;i<s;)t.push(e.getItemByIndex(i).id),i++}return t}addFurnitureItem(t,e){let s=null;s=t.isGroupable?this.addGroupableFurnitureItem(t,e):this.addSingleFurnitureItem(t,e),e||(s.hasUnseenItems=!0)}addSingleFurnitureItem(t,e){const s=[];for(const r of this._groupItems)r.type===t.type&&s.push(r);for(const r of s)if(r.getItemById(t.id))return r;const i=this.isFurnitureUnseen(t),n=this.createGroupItem(t.type,t.category,t.stuffData,t._Str_2794,e);return n.push(t,i),i?(n.hasUnseenItems=!0,this.unshiftGroupitem(n)):this.pushGroupItem(n),n}addGroupableFurnitureItem(t,e){let s=null;for(const n of this._groupItems)if(n.type===t.type&&n.isWallItem==t.isWallItem&&n.isGroupable)if(t.category===gh._Str_5186){if(n.stuffData.getLegacyString()===t.stuffData.getLegacyString()){s=n;break}}else{if(t.category!==gh._Str_12454){s=n;break}if(t.stuffData.compare(n.stuffData)){s=n;break}}const i=this.isFurnitureUnseen(t);return s?(s.push(t,i),i&&(s.hasUnseenItems=!0,this.removeAndUnshiftGroupitem(s)),s):(s=this.createGroupItem(t.type,t.category,t.stuffData,t._Str_2794,e),s.push(t,i),i?(s.hasUnseenItems=!0,this.unshiftGroupitem(s)):this.pushGroupItem(s),s)}createGroupItem(t,e,s,i=NaN,n=!1){return new ph(t,e,u.a.instance.roomEngine,s,i)}removeItemById(t){let e=0;for(;e<this._groupItems.length;){const s=this._groupItems[e],i=s.remove(t);if(i)return this._itemIdInFurniPlacing===i.ref&&(this.cancelRoomObjectPlacement(),this.attemptItemPlacement()||this._inventoryService.showWindow()),s.getTotalCount()<=0&&(this._groupItems.splice(e,1),s.dispose()),s;e++}return null}isFurnitureUnseen(t){let e=0;return e=t.rentable?tn.RENTABLE:tn.FURNI,this._inventoryService.unseenTracker._Str_3613(e,t.id)}setAllFurnitureSeen(){this._inventoryService.unseenTracker._Str_8813(tn.FURNI);for(const t of this._groupItems)t.hasUnseenItems&&(t.hasUnseenItems=!1);this._inventoryService.updateUnseenCount()}attemptItemPlacement(t=!1){const e=this.getSelectedGroup();if(!e)return!1;if(!e.getUnlockedCount())return!1;const s=e.getLastItem();if(!s)return!1;if(s.category===gh._Str_3683||s.category===gh._Str_3639||s.category===gh._Str_3432){if(t)return!1;u.a.instance.communication.connection.send(new uh.a(s.id))}else this.startRoomObjectPlacement(s);return!0}startRoomObjectPlacement(t){let e=0,s=!1;e=t.isWallItem?W.a.WALL:W.a.FLOOR,s=t.category===gh._Str_5186?u.a.instance.roomEngine.processRoomObjectPlacement(dh.a.INVENTORY,t.id,e,t.type,t.stuffData.getLegacyString()):u.a.instance.roomEngine.processRoomObjectPlacement(dh.a.INVENTORY,t.id,e,t.type,t.stuffData.getLegacyString(),t.stuffData),s&&(this._itemIdInFurniPlacing=t.ref,this.setObjectMoverRequested(!0))}cancelRoomObjectPlacement(){this._itemIdInFurniPlacing>-1&&(u.a.instance.roomEngine.cancelRoomObjectPlacement(),this.setObjectMoverRequested(!1),this._itemIdInFurniPlacing=-1)}getGroupItemForFurnitureId(t){for(const e of this._groupItems)if(e.getItemById(t))return e;return null}getSelectedGroup(){for(const t of this._groupItems)if(t&&t.selected)return t;return null}unshiftGroupitem(t){this._groupItems.unshift(t)}pushGroupItem(t){this._groupItems.push(t)}removeGroupItem(t){const e=this._groupItems.indexOf(t);e>-1&&this._groupItems.splice(e,1)}removeAndUnshiftGroupitem(t){this.removeGroupItem(t),this.unshiftGroupitem(t)}unlockAllItems(){for(const t of this._groupItems)t.unlockAllItems()}unselectAllGroupItems(){for(const t of this._groupItems)t.selected=!1}requestLoad(){this._needsUpdate=!1,u.a.instance.communication.connection.send(new lh.a)}setObjectMoverRequested(t){this._isObjectMoverRequested!==t&&this._ngZone.run(()=>this._isObjectMoverRequested=t)}get controller(){return this._inventoryService.controller}get isInitalized(){return this._isInitialized}get needsUpdate(){return this._needsUpdate}get groupItems(){return this._groupItems}get isObjectMoverRequested(){return this._isObjectMoverRequested}}return t.INVENTORY_UPDATED="IFS_INVENTORY_UPDATED",t.SELECT_FIRST_GROUP="IFS_SELECT_FIRST_GROUP",t.SELECT_EXISTING_GROUP_DEFAULT="IFS_SELECT_EXISTING_GROUP_DEFAULT",t.\u0275fac=function(e){return new(e||t)(i.kc(nn),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();var Eh=s("IVZI"),Sh=s("4hT9"),Ih=s("4gvq"),Rh=s("uHXo"),bh=s("8qmW"),vh=s("iv6j"),Th=s("8KaG"),Oh=s("lN2i"),yh=s("lrbo"),Ah=s("sM2B"),Ch=s("sGp+"),Mh=s("07Tz"),Uh=s("oe6/"),Dh=s("0EkW"),wh=s("Q612"),Nh=s("porQ"),Lh=s("gnch"),xh=s("zeoL"),Ph=s("r7iz"),Fh=s("QQU2"),kh=s("iK4q");const Wh=["nitro-inventory-trading-component",""];function Vh(t,e){if(1&t&&(i.dc(0,"div",25),i.Wc(1),i.cc()),2&t){const t=i.qc(2).index,e=i.qc(3);i.Kb(1),i.Xc(e.ownUserItems[t].stuffData.uniqueNumber)}}const Gh=function(t){return{"background-image":t}};function Hh(t,e){if(1&t&&(i.dc(0,"button",22),i.dc(1,"div",23),i.Wc(2),i.cc(),i.Uc(3,Vh,2,1,"div",24),i.cc()),2&t){const t=i.qc().index,e=i.qc(3);i.yc("ngStyle",i.Cc(3,Gh,"url("+e.getIconUrl(e.ownUserItems[t])+")")),i.Kb(2),i.Xc(e.ownUserItems[t].getUnlockedCount()),i.Kb(1),i.yc("ngIf",e.ownUserItems[t].stuffData.uniqueNumber)}}function Bh(t,e){1&t&&i.Zb(0,"button",26)}function jh(t,e){if(1&t){const t=i.ec();i.dc(0,"div",19),i.nc("click",function(){i.Lc(t);const s=e.index;return i.qc(3).removeItem(s)}),i.Uc(1,Hh,4,5,"button",20),i.Uc(2,Bh,1,0,"button",21),i.cc()}if(2&t){const t=e.index,s=i.qc(3);i.Kb(1),i.yc("ngIf",s.ownUserItems[t]),i.Kb(1),i.yc("ngIf",!s.ownUserItems[t])}}function Kh(t,e){if(1&t&&(i.dc(0,"div",25),i.Wc(1),i.cc()),2&t){const t=i.qc(2).index,e=i.qc(3);i.Kb(1),i.Xc(e.otherUserItems[t].stuffData.uniqueNumber)}}function zh(t,e){if(1&t&&(i.dc(0,"button",22),i.dc(1,"div",23),i.Wc(2),i.cc(),i.Uc(3,Kh,2,1,"div",24),i.cc()),2&t){const t=i.qc().index,e=i.qc(3);i.yc("ngStyle",i.Cc(3,Gh,"url("+e.getIconUrl(e.otherUserItems[t])+")")),i.Kb(2),i.Xc(e.otherUserItems[t].getUnlockedCount()),i.Kb(1),i.yc("ngIf",e.otherUserItems[t].stuffData.uniqueNumber)}}function Yh(t,e){1&t&&i.Zb(0,"button",26)}function Xh(t,e){if(1&t&&(i.dc(0,"div",27),i.Uc(1,zh,4,5,"button",20),i.Uc(2,Yh,1,0,"button",21),i.cc()),2&t){const t=e.index,s=i.qc(3);i.Kb(1),i.yc("ngIf",s.otherUserItems[t]),i.Kb(1),i.yc("ngIf",!s.otherUserItems[t])}}const Zh=function(t,e){return{"trade-unlocked-icon":t,"trade-locked-icon":e}};function qh(t,e){if(1&t&&(i.dc(0,"div",2),i.dc(1,"div",9),i.dc(2,"div",10),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",11),i.dc(6,"div",12),i.dc(7,"div",13),i.Uc(8,jh,3,2,"div",14),i.cc(),i.cc(),i.cc(),i.dc(9,"div",15),i.Zb(10,"i",16),i.dc(11,"div",17),i.Wc(12),i.cc(),i.dc(13,"div",17),i.Wc(14),i.cc(),i.cc(),i.cc(),i.dc(15,"div",9),i.dc(16,"div",10),i.Wc(17),i.cc(),i.dc(18,"div",11),i.dc(19,"div",12),i.dc(20,"div",13),i.Uc(21,Xh,3,2,"div",18),i.cc(),i.cc(),i.cc(),i.dc(22,"div",15),i.Zb(23,"i",16),i.dc(24,"div",17),i.Wc(25),i.cc(),i.dc(26,"div",17),i.Wc(27),i.cc(),i.cc(),i.cc(),i.cc()),2&t){const t=i.qc(2);i.Kb(3),i.Xc(i.sc(4,10,"inventory.trading.you")),i.Kb(5),i.yc("ngForOf",t.indexs),i.Kb(2),i.yc("ngClass",i.Dc(12,Zh,!t.ownUserAccepts,t.ownUserAccepts)),i.Kb(2),i.Yc("",t.ownUserNumItems," items"),i.Kb(2),i.Yc("",t.ownUserNumCredits," credits"),i.Kb(3),i.Xc(t.otherUserName),i.Kb(4),i.yc("ngForOf",t.indexs),i.Kb(2),i.yc("ngClass",i.Dc(15,Zh,!t.otherUserAccepts,t.otherUserAccepts)),i.Kb(2),i.Yc("",t.otherUserNumItems," items"),i.Kb(2),i.Yc("",t.otherUserNumCredits," credits")}}function Qh(t,e){if(1&t){const t=i.ec();i.dc(0,"button",28),i.nc("click",function(){return i.Lc(t),i.qc(2).progressTrade()}),i.Wc(1),i.rc(2,"translate"),i.cc()}if(2&t){const t=i.qc(2);i.yc("disabled",!t.ownUserNumItems&&!t.otherUserNumItems),i.Kb(1),i.Xc(i.sc(2,2,"inventory.trading.accept"))}}function Jh(t,e){if(1&t){const t=i.ec();i.dc(0,"button",28),i.nc("click",function(){return i.Lc(t),i.qc(2).progressTrade()}),i.Wc(1),i.rc(2,"translate"),i.cc()}if(2&t){const t=i.qc(2);i.yc("disabled",!t.ownUserNumItems&&!t.otherUserNumItems),i.Kb(1),i.Xc(i.sc(2,2,t.ownUserAccepts?"inventory.trading.modify":"inventory.trading.accept"))}}function $h(t,e){if(1&t&&(i.dc(0,"button",29),i.Wc(1),i.rc(2,"translate"),i.cc()),2&t){const t=i.qc(2);i.Kb(1),i.Xc(i.uc(2,1,"inventory.trading.countdown","counter",t.timerTick))}}function tl(t,e){if(1&t){const t=i.ec();i.dc(0,"button",30),i.nc("click",function(){return i.Lc(t),i.qc(2).progressTrade()}),i.Wc(1),i.rc(2,"translate"),i.cc()}2&t&&(i.Kb(1),i.Xc(i.sc(2,1,"inventory.trading.confirm")))}function el(t,e){1&t&&(i.dc(0,"button",29),i.Wc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Xc(i.sc(2,1,"inventory.trading.info.waiting")))}function sl(t,e){1&t&&(i.dc(0,"button",29),i.Wc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Xc(i.sc(2,1,"inventory.trading.accept")))}function il(t,e){if(1&t){const t=i.ec();i.bc(0),i.Uc(1,qh,28,18,"div",1),i.dc(2,"div",2),i.dc(3,"div",3),i.bc(4,4),i.Uc(5,Qh,3,4,"button",5),i.Uc(6,Jh,3,4,"button",5),i.Uc(7,$h,3,5,"button",6),i.Uc(8,tl,3,3,"button",7),i.Uc(9,el,3,3,"button",6),i.Uc(10,sl,3,3,"button",6),i.ac(),i.dc(11,"button",8),i.nc("click",function(){return i.Lc(t),i.qc().cancelTrade()}),i.Wc(12),i.rc(13,"translate"),i.cc(),i.cc(),i.cc(),i.ac()}if(2&t){const t=i.qc();i.Kb(1),i.yc("ngIf",t.visible),i.Kb(3),i.yc("ngSwitch",t.state),i.Kb(1),i.yc("ngSwitchCase",0),i.Kb(1),i.yc("ngSwitchCase",1),i.Kb(1),i.yc("ngSwitchCase",2),i.Kb(1),i.yc("ngSwitchCase",3),i.Kb(1),i.yc("ngSwitchCase",4),i.Kb(1),i.yc("ngSwitchCase",5),i.Kb(2),i.Xc(i.sc(13,9,"generic.cancel"))}}let nl=(()=>{class t{constructor(t,e,s){this._notificationService=t,this._inventoryService=e,this._ngZone=s,this.visible=!1,this.indexs=[0,1,2,3,4,5,6,7,8],this._timerTick=3}ngOnInit(){this._inventoryService.tradeController=this}ngOnDestroy(){this._inventoryService.tradeController=null}startTimer(){this._timer&&(clearInterval(this._timer),this._timer=null),this._timerTick=3,this._timer=setInterval(this.progressTimer.bind(this),1e3)}resetTimer(){this._timer&&clearInterval(this._timer),this._timerTick=-1}progressTimer(){-1!==this._timerTick?(this._timerTick--,0===this._timerTick&&this._inventoryService.controller.tradeService.onTimerFinished()):this.resetTimer()}getIconUrl(t){return t&&t.iconUrl||null}removeItem(t){this._inventoryService.controller.tradeService.removeItem(t)}progressTrade(){switch(this._inventoryService.controller.tradeService.state){case rl.TRADING_STATE_RUNNING:this.otherUserItems.length||this.ownUserAccepts||this._notificationService.alert("${inventory.trading.warning.other_not_offering}"),this.ownUserAccepts?this._inventoryService.controller.tradeService.sendTradingUnacceptComposer():this._inventoryService.controller.tradeService.sendTradingAcceptComposer();break;case rl.TRADING_STATE_CONFIRMING:this._inventoryService.controller.tradeService.sendTradingConfirmComposer()}}cancelTrade(){switch(this._inventoryService.controller.tradeService.state){case rl.TRADING_STATE_RUNNING:this._inventoryService.controller.tradeService.sendTradingCloseComposer();break;case rl.TRADING_STATE_CONFIRMING:this._inventoryService.controller.tradeService.sendTradingCancelComposer()}}get timerTick(){return this._timerTick}get state(){return this._inventoryService.controller.tradeService.state}get ownUserName(){return this._inventoryService.controller.tradeService.ownUserName}get ownUserItems(){return this._inventoryService.controller.tradeService.ownUserItems.getValues()}get ownUserNumItems(){return this._inventoryService.controller.tradeService.ownUserNumItems}get ownUserNumCredits(){return this._inventoryService.controller.tradeService.ownUserNumCredits}get ownUserAccepts(){return this._inventoryService.controller.tradeService.ownUserAccepts}get otherUserName(){return this._inventoryService.controller.tradeService.otherUserName}get otherUserItems(){return this._inventoryService.controller.tradeService.otherUserItems.getValues()}get otherUserNumItems(){return this._inventoryService.controller.tradeService.otherUserNumItems}get otherUserNumCredits(){return this._inventoryService.controller.tradeService.otherUserNumCredits}get otherUserAccepts(){return this._inventoryService.controller.tradeService.otherUserAccepts}}return t.COLOR_LOCKED=4284532064,t.COLOR_UNLOCKED=2577770,t.ALERT_SCAM=0,t.ALERT_OTHER_CANCELLED=1,t.ALERT_ALREADY_OPEN=2,t.\u0275fac=function(e){return new(e||t)(i.Yb(Ge),i.Yb(nn),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-inventory-trading-component",""]],inputs:{visible:"visible"},attrs:Wh,decls:1,vars:1,consts:[[4,"ngIf"],["class","row mt-3",4,"ngIf"],[1,"row","mt-3"],[1,"d-flex","col-12","justify-content-between"],[3,"ngSwitch"],["type","button","class","btn btn-secondary",3,"disabled","click",4,"ngSwitchCase"],["type","button","class","btn btn-secondary","disabled","",4,"ngSwitchCase"],["type","button","class","btn btn-secondary",3,"click",4,"ngSwitchCase"],["type","button",1,"btn","btn-danger",3,"click"],[1,"d-flex","flex-column","col-6"],[1,"badge","badge-secondary","w-100","p-1","mb-1"],[1,"d-flex","mb-1"],[1,"grid-container","position-relative"],[1,"grid-items","grid-3"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"d-flex"],[1,"icon","w-100",3,"ngClass"],[1,"d-flex","justify-content-center","align-items-center","badge","badge-secondary","w-100","p-1","m-1"],["class","d-flex flex-column item-detail justify-content-center align-items-center",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button","class","position-relative btn btn-secondary align-items-end detail-info has-image",3,"ngStyle",4,"ngIf"],["type","button","class","position-relative btn btn-secondary align-items-end detail-info has-image",4,"ngIf"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image",3,"ngStyle"],[1,"position-absolute","btn","btn-sm","btn-primary","px-1","py-0","rounded","count"],["class","badge badge-primary w-100",4,"ngIf"],[1,"badge","badge-primary","w-100"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center"],["type","button",1,"btn","btn-secondary",3,"disabled","click"],["type","button","disabled","",1,"btn","btn-secondary"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(t,e){1&t&&i.Uc(0,il,14,11,"ng-container",0),2&t&&i.yc("ngIf",e.visible)},directives:[p.n,p.p,p.q,p.m,p.l,p.o],pipes:[Fs],encapsulation:2}),t})(),rl=(()=>{class t{constructor(t,e,s){this._notificationService=t,this._inventoryService=e,this._ngZone=s,this._messages=[],this._state=0,this._running=!1,this._ownUserIndex=-1,this._ownUserName="",this._ownUserNumItems=0,this._ownUserNumCredits=0,this._ownUserAccepts=!1,this._ownUserCanTrade=!1,this._otherUserIndex=-1,this._otherUserName="",this._otherUserNumItems=0,this._otherUserNumCredits=0,this._otherUserAccepts=!1,this._otherUserCanTrade=!1,this._offeredItemIds=[],this.registerMessages()}static _Str_16998(t,e){let s=t.toString();const i=e;if(!(e instanceof Pt.a))return s;let n=1;for(;n<5;)s=s+","+i.getValue(n),n++;return s}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new Eh.a(this.onTradingAcceptEvent.bind(this)),new Sh.a(this.onTradingCloseEvent.bind(this)),new Ih.a(this.onTradingCompletedEvent.bind(this)),new Rh.a(this.onTradingConfirmationEvent.bind(this)),new bh.a(this.onTradingListItemEvent.bind(this)),new vh.a(this.onTradingNotOpenEvent.bind(this)),new Th.a(this.onTradingOpenEvent.bind(this)),new Oh.a(this.onTradingOpenFailedEvent.bind(this)),new yh.a(this.onTradingOtherNotAllowedEvent.bind(this)),new Ah.a(this.onTradingYouAreNotAllowedEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onTradingAcceptEvent(t){t&&(console.log(t),t.getParser()&&this._ngZone.run(()=>{t._Str_4963===this._ownUserIndex?this._ownUserAccepts=t._Str_15794:this._otherUserAccepts=t._Str_15794}))}tradingNotificationMessage(t){switch(t){case nl.ALERT_SCAM:return void this._notificationService.alert("${inventory.trading.warning.other_not_offering}","${inventory.trading.notification.title}");case nl.ALERT_OTHER_CANCELLED:return void this._notificationService.alert("${inventory.trading.info.closed}","${inventory.trading.notification.title}");case nl.ALERT_ALREADY_OPEN:return void this._notificationService.alert("${inventory.trading.info.already_open}","${inventory.trading.notification.title}")}}onTradingCloseEvent(t){if(!t)return;const e=t.getParser();e&&this._running&&this._ngZone.run(()=>{e.reason===Fh.a._Str_16410?this._notificationService.alert("${inventory.trading.notification.caption}, ${inventory.trading.notification.commiterror.info}","${inventory.trading.notification.title}"):e._Str_4963!==this._ownUserIndex&&this.tradingNotificationMessage(nl.ALERT_OTHER_CANCELLED),this.close()})}onTradingCompletedEvent(e){e&&e.getParser()&&this._ngZone.run(()=>this.state=t.TRADING_STATE_COMPLETED)}onTradingConfirmationEvent(e){e&&e.getParser()&&this._ngZone.run(()=>this.state=t.TRADING_STATE_COUNTDOWN)}onTradingListItemEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{const t=new Yi.a,s=new Yi.a;this.parseItems(e._Str_17841,t),this.parseItems(e._Str_17465,s),this.updateTrade(e,t,s)})}onTradingNotOpenEvent(t){}onTradingOpenEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=u.a.instance.sessionDataManager,i=this._inventoryService.roomSession;if(!s||!i)return;let n=e._Str_4963;const r=i.userDataManager.getUserData(n);if(!r)return;let a=r.name,o=e._Str_16764,c=e._Str_17613;const _=i.userDataManager.getUserData(c);if(!_)return;let h=_.name,l=e._Str_13374;if(c===s.userId){const t=n,e=a,s=o;n=c,a=h,o=l,c=t,h=e,l=s}this._ngZone.run(()=>{this._inventoryService.showWindow(),this._inventoryService.furnitureVisible=!0,this._inventoryService.tradingVisible=!0,this._Str_23457(n,a,o,c,h,l)})}onTradingOpenFailedEvent(t){if(!t)return;const e=t.getParser();e&&(e.reason!==kh.a._Str_18150&&e.reason!==kh.a._Str_18383||this._ngZone.run(()=>{this.tradingNotificationMessage(nl.ALERT_ALREADY_OPEN)}))}onTradingOtherNotAllowedEvent(t){t&&this._ngZone.run(()=>{this._notificationService.alert("${inventory.trading.warning.others_account_disabled}","${inventory.trading.notification.title}")})}onTradingYouAreNotAllowedEvent(t){t&&this._ngZone.run(()=>{this._notificationService.alert("${inventory.trading.warning.own_account_disabled}","${inventory.trading.notification.title}")})}close(){this._running&&(this._state!==t.TRADING_STATE_READY&&this._state!==t.TRADING_STATE_COMPLETED&&(this.sendTradingCloseComposer(),this.state=t.TRADING_STATE_CANCELLED),this._inventoryService.controller.furnitureService.unlockAllItems(),this.state=t.TRADING_STATE_READY,this._running=!1,this._inventoryService.tradingVisible=!1)}startTrade(t,e){this.controller&&(this.controller.furnitureService.isInitalized||this.controller.furnitureService.requestLoad(),this.sendTradingOpenComposer(t))}_Str_23457(e,s,i,n,r,a){this._ownUserIndex=e,this._ownUserName=s,this._ownUserItems=new Yi.a,this._ownUserAccepts=!1,this._ownUserCanTrade=i,this._otherUserIndex=n,this._otherUserName=r,this._otherUserItems=new Yi.a,this._otherUserAccepts=!1,this._otherUserCanTrade=a,this._running=!0,this.state=t.TRADING_STATE_RUNNING}parseItems(t,e){if(!this.controller)return;const s=t.length;let i=0;for(;i<s;){const s=t[i];if(s){const t=s.spriteId,i=s.category;let n=s.furniType+t;s.isGroupable&&!this.isExternalImage(t)||(n="itemid"+s.itemId),s.category===gh._Str_5186?n=s.itemId+"poster"+s.stuffData.getLegacyString():s.category===gh._Str_12454&&(n="");let r=s.isGroupable&&!this.isExternalImage(s.spriteId)?e.getValue(n):null;r||(r=this.controller.furnitureService.createGroupItem(t,i,s.stuffData),e.add(n,r)),r.push(new mh(s))}i++}}isExternalImage(t){const e=u.a.instance.sessionDataManager.getWallItemData(t);return e&&e.isExternalImage}updateTrade(t,e,s){this._ownUserItems&&this._ownUserItems.reset(),this._otherUserItems&&this._otherUserItems.reset(),t._Str_15162===this._ownUserIndex?(this._ownUserItems=e,this._ownUserNumItems=t._Str_14946,this._ownUserNumCredits=t._Str_15709,this._otherUserItems=s,this._otherUserNumItems=t._Str_13801,this._otherUserNumCredits=t._Str_9138):(this._ownUserItems=s,this._ownUserNumItems=t._Str_13801,this._ownUserNumCredits=t._Str_9138,this._otherUserItems=e,this._otherUserNumItems=t._Str_14946,this._otherUserNumCredits=t._Str_15709),this._ownUserAccepts=!1,this._otherUserAccepts=!1,this._inventoryService.updateItemLocking()}offerItems(t,e,s,i,n,r){if(!n&&t.length)u.a.instance.communication.connection.send(new wh.a(t.pop()));else{const a=[];for(const o of t)this.canTradeItem(e,s,i,n,r)&&a.push(o);a.length&&u.a.instance.communication.connection.send(1===a.length?new wh.a(a.pop()):new Nh.a(...a))}}canTradeItem(e,s,i,n,r){if(this._ownUserAccepts)return!1;if(null==this._ownUserItems)return!1;if(this._ownUserItems.length<t.MAX_ITEMS_TO_TRADE)return!0;if(!n)return!1;let a=s.toString();return a=i===gh._Str_5186?a+"poster"+r.getLegacyString():i===gh._Str_12454?t._Str_16998(s,r):(e?"I":"S")+a,!!this._ownUserItems.getValue(a)}removeItem(t){const e=this._ownUserItems.getWithIndex(t);if(!e)return;const s=e.getLastItem();s&&u.a.instance.communication.connection.send(new Lh.a(s.id))}getOwnTradingItemIds(){const t=[];if(!this._ownUserItems||!this._ownUserItems.length)return t;for(const e of this._ownUserItems.getValues()){let s=0;for(;s<e.getTotalCount();){const i=e.getItemByIndex(s);i&&t.push(i.ref),s++}}return t}onTimerFinished(){this._state===t.TRADING_STATE_COUNTDOWN&&(this.state=t.TRADING_STATE_CONFIRMING)}sendTradingAcceptComposer(){u.a.instance.communication.connection.send(new Ch.a)}sendTradingUnacceptComposer(){u.a.instance.communication.connection.send(new Ph.a)}sendTradingConfirmComposer(){this.state=t.TRADING_STATE_CONFIRMED,u.a.instance.communication.connection.send(new Dh.a)}sendTradingCloseComposer(){u.a.instance.communication.connection.send(new Uh.a)}sendTradingCancelComposer(){u.a.instance.communication.connection.send(new Mh.a)}sendTradingOpenComposer(t){u.a.instance.communication.connection.send(new xh.a(t))}get controller(){return this._inventoryService.controller}get state(){return this._state}set state(e){if(this._state===e)return;const s=this._state;let i=!1;switch(this._state){case t.TRADING_STATE_READY:e!==t.TRADING_STATE_RUNNING&&e!==t.TRADING_STATE_COMPLETED||(this._state=e,i=!0);break;case t.TRADING_STATE_RUNNING:e===t.TRADING_STATE_COUNTDOWN?(this._state=e,i=!0,this._inventoryService.tradeController.startTimer()):e===t.TRADING_STATE_CANCELLED&&(this._state=e,i=!0);break;case t.TRADING_STATE_COUNTDOWN:(e===t.TRADING_STATE_CONFIRMING||e===t.TRADING_STATE_CANCELLED||e===t.TRADING_STATE_RUNNING)&&(this._state=e,i=!0);break;case t.TRADING_STATE_CONFIRMING:e===t.TRADING_STATE_CONFIRMED?(this._state=e,i=!0):(e===t.TRADING_STATE_COMPLETED||e===t.TRADING_STATE_CANCELLED)&&(this._state=e,i=!0,this.close());break;case t.TRADING_STATE_CONFIRMED:(e===t.TRADING_STATE_COMPLETED||e===t.TRADING_STATE_CANCELLED)&&(this._state=e,i=!0,this.close());break;case t.TRADING_STATE_COMPLETED:e===t.TRADING_STATE_READY&&(this._state=e,i=!0);break;case t.TRADING_STATE_CANCELLED:(e===t.TRADING_STATE_READY||e===t.TRADING_STATE_RUNNING)&&(this._state=e,i=!0)}console.log(s,this._state)}get running(){return this._running}get ownUserName(){return this._ownUserName}get ownUserItems(){return this._ownUserItems}get ownUserNumItems(){return this._ownUserNumItems}get ownUserNumCredits(){return this._ownUserNumCredits}get ownUserAccepts(){return this._ownUserAccepts}get ownUserCanTrade(){return this._ownUserCanTrade}get otherUserName(){return this._otherUserName}get otherUserItems(){return this._otherUserItems}get otherUserNumItems(){return this._otherUserNumItems}get otherUserNumCredits(){return this._otherUserNumCredits}get otherUserAccepts(){return this._otherUserAccepts}get otherUserCanTrade(){return this._otherUserCanTrade}}return t.MAX_ITEMS_TO_TRADE=9,t.TRADING_STATE_READY=0,t.TRADING_STATE_RUNNING=1,t.TRADING_STATE_COUNTDOWN=2,t.TRADING_STATE_CONFIRMING=3,t.TRADING_STATE_CONFIRMED=4,t.TRADING_STATE_COMPLETED=5,t.TRADING_STATE_CANCELLED=6,t.\u0275fac=function(e){return new(e||t)(i.kc(Ge),i.kc(nn),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();function al(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"h6",3),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",4),i.nc("click",function(){return i.Lc(t),i.qc().hide()}),i.Zb(6,"i",5),i.cc(),i.cc(),i.dc(7,"div",6),i.Zb(8,"div",7),i.Zb(9,"div",8),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Xc(i.sc(4,4,"inventory.title")),i.Kb(5),i.yc("visible",t.furnitureVisible)("roomPreviewer",t.roomPreviewer),i.Kb(1),i.yc("visible",t.tradingVisible)}}let ol=(()=>{class t{constructor(t,e,s,i){this._settingsService=t,this._inventoryService=e,this._inventoryFurnitureService=s,this._inventoryTradingService=i,this.visible=!1,this._roomPreviewer=null}ngOnInit(){this._roomPreviewer||(this._roomPreviewer=new $o(u.a.instance.roomEngine,++$o.PREVIEW_COUNTER)),this._inventoryService.controller=this}ngOnDestroy(){this._roomPreviewer&&this._roomPreviewer.dispose(),this._inventoryService.controller=null}ngOnChanges(t){const e=t.visible.currentValue;e!==t.visible.previousValue&&(e?this.showFurniture():(this._inventoryTradingService.close(),this.setAllFurnitureSeen()))}hide(){this._inventoryService.hideWindow()}showFurniture(){this._inventoryService.furnitureVisible=!0}updateItemLocking(){const t=[];if(t.push(...this._inventoryTradingService.getOwnTradingItemIds()),t.length)for(const e of this._inventoryFurnitureService.groupItems)e.lockItemIds(t);else this._inventoryFurnitureService.unlockAllItems()}setAllFurnitureSeen(){this._inventoryFurnitureService.setAllFurnitureSeen()}get roomPreviewer(){return this._roomPreviewer}get furnitureVisible(){return this._inventoryService.furnitureVisible}get tradingVisible(){return this._inventoryService.tradingVisible}get furnitureService(){return this._inventoryFurnitureService}get tradeService(){return this._inventoryTradingService}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(m),i.Yb(nn),i.Yb(fh),i.Yb(rl))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-inventory-main-component"]],inputs:{visible:"visible"},features:[i.Ib],decls:1,vars:1,consts:[["class","nitro-inventory card","dragHandle",".drag-handler","style","\n        background-image: url(/assets/images/hotelview/tiki_deals.gif);\n        background-repeat: no-repeat;\n        background-position: 100% 0%;\n    ",3,"bringToTop","draggable",4,"ngIf"],["dragHandle",".drag-handler",1,"nitro-inventory","card",2,"background-image","url(/assets/images/hotelview/tiki_deals.gif)","background-repeat","no-repeat","background-position","100% 0%",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],["nitro-inventory-furniture-component","",3,"visible","roomPreviewer"],["nitro-inventory-trading-component","",3,"visible"]],template:function(t,e){1&t&&i.Uc(0,al,10,6,"div",0),2&t&&i.yc("ngIf",e.visible)},encapsulation:2}),t})();var cl=s("4pnK"),_l=s("IqqQ"),hl=s("xB90"),ll=s("Tp0E"),ul=s("9/2a"),dl=s("gEiT"),gl=s("nMRu"),ml=s("75Vd");let pl=(()=>{class t{constructor(t,e){this._ngZone=t,this._settingsService=e,this.onRoomEngineObjectEvent=this.onRoomEngineObjectEvent.bind(this),this.flush(),this.registerMessages(),u.a.instance.addLinkEventTracker(this)}ngOnDestroy(){u.a.instance.removeLinkEventTracker(this),this.unregisterMessages()}flush(){this._userLoadedProfile=null,this._userBadges=[],this._heartRelationships=[],this._smileRelationships=[],this._bobbaRelationships=[],this._selectedGroup=null}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),u.a.instance.roomEngine.events.addEventListener(T.a.SELECTED,this.onRoomEngineObjectEvent),this._messages=[new ll.a(this.onUserProfileEvent.bind(this)),new hl.a(this.onUserCurrentBadgesEvent.bind(this)),new ul.a(this.onUserRelationshipsEvent.bind(this)),new _l.a(this.onGroupInformationEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(u.a.instance.roomEngine.events.removeEventListener(T.a.SELECTED,this.onRoomEngineObjectEvent),this._messages&&this._messages.length)for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomEngineObjectEvent(t){if(t)switch(t.type){case T.a.SELECTED:return}}onUserProfileEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this.flush(),this._userLoadedProfile=e,u.a.instance.communication.connection.send(new gl.a(this._userLoadedProfile.id)),u.a.instance.communication.connection.send(new ml.a(this._userLoadedProfile.id)),e.groups.length>0&&u.a.instance.communication.connection.send(new dl.a(this._userLoadedProfile.groups[0].id,!1)),this._settingsService.showUserProfile()})}onUserCurrentBadgesEvent(t){if(!t||!this._userLoadedProfile)return;const e=t.getParser();e&&e.userId===this._userLoadedProfile.id&&this._ngZone.run(()=>this._userBadges=e.badges)}onUserRelationshipsEvent(t){if(!t||!this._userLoadedProfile)return;const e=t.getParser();e&&e.id===this._userLoadedProfile.id&&this._ngZone.run(()=>{this._heartRelationships=e.hearts,this._smileRelationships=e.smiles,this._bobbaRelationships=e.bobbas,this._component&&this._component.getRandomRelationships()})}onGroupInformationEvent(t){if(!t)return;const e=t.getParser();e&&!e.flag&&this._ngZone.run(()=>this._selectedGroup=e)}selectGroup(t){u.a.instance.communication.connection.send(new dl.a(t,!1))}loadUserProfile(t){u.a.instance.communication.connection.send(new cl.a(t))}linkReceived(t){const e=t.split("/");if(!(e.length<2))switch(e[1]){case"goto":if(e.length>2){const t=parseInt(e[2]);t>0&&this.loadUserProfile(t)}return}}get eventUrlPrefix(){return"profile"}set component(t){this._component=t}get userLoadedProfile(){return this._userLoadedProfile}get userBadges(){return this._userBadges}get heartRelationships(){return this._heartRelationships}get smileRelationships(){return this._smileRelationships}get bobbaRelationships(){return this._bobbaRelationships}get selectedGroup(){return this._selectedGroup}}return t.\u0275fac=function(e){return new(e||t)(i.kc(i.H),i.kc(m))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();var fl=s("3md2");let El=(()=>{class t{constructor(t){this._ngZone=t,this._userId=-1,this._userName=null,this._figure=null,this._gender=null,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new oa.a(this.onUserInfoEvent.bind(this)),new fl.a(this.onUserFigureEvent.bind(this))];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onUserInfoEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=e.userInfo;this._ngZone.run(()=>{this._userId=s.userId,this._userName=s.username,this._figure=s.figure,this._gender=s.gender})}onUserFigureEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._figure=e.figure,this._gender=e.gender})}get userId(){return this._userId}get userName(){return this._userName}get figure(){return this._figure}get gender(){return this._gender}}return t.\u0275fac=function(e){return new(e||t)(i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})(),Sl=(()=>{class t{static format(e,s="",i=3){return e>i*t.YEAR?t.getLocalization("friendlytime.years"+s,Math.round(e/t.YEAR)):e>i*t.MONTH?t.getLocalization("friendlytime.months"+s,Math.round(e/t.MONTH)):e>i*t.DAY?t.getLocalization("friendlytime.days"+s,Math.round(e/t.DAY)):e>i*t.HOUR?t.getLocalization("friendlytime.hours"+s,Math.round(e/t.HOUR)):e>i*t.MINUTE?t.getLocalization("friendlytime.minutes"+s,Math.round(e/t.MINUTE)):t.getLocalization("friendlytime.seconds"+s,Math.round(e))}static shortFormat(e,s="",i=3){return e>i*t.YEAR?t.getLocalization("friendlytime.years.short"+s,Math.round(e/t.YEAR)):e>i*t.MONTH?t.getLocalization("friendlytime.months.short"+s,Math.round(e/t.MONTH)):e>i*t.DAY?t.getLocalization("friendlytime.days.short"+s,Math.round(e/t.DAY)):e>i*t.HOUR?t.getLocalization("friendlytime.hours.short"+s,Math.round(e/t.HOUR)):e>i*t.MINUTE?t.getLocalization("friendlytime.minutes.short"+s,Math.round(e/t.MINUTE)):t.getLocalization("friendlytime.seconds.short"+s,Math.round(e))}static getLocalization(t,e){return u.a.instance.getLocalizationWithParameter(t,"amount",e.toString())}}return t.MINUTE=60,t.HOUR=60*t.MINUTE,t.DAY=24*t.HOUR,t.WEEK=7*t.DAY,t.MONTH=30*t.DAY,t.YEAR=365*t.DAY,t})(),Il=(()=>{class t{constructor(t){this.changeDetector=t,this._time=0,this._timer=null,this.updateTime=this.updateTime.bind(this)}ngOnDestroy(){this.clearInterval()}transform(t){return this._time=t,this.setupInterval(),Sl.format(Date.now()-this._time)}clearInterval(){this._timer&&(clearInterval(this._timer),this._timer=null)}setupInterval(){this._timer||(this._timer=setInterval(this.updateTime,3e4))}updateTime(){this.changeDetector.markForCheck()}}return t.\u0275fac=function(e){return new(e||t)(i.mc())},t.\u0275pipe=i.Xb({name:"timeAgo",type:t,pure:!0}),t})();function Rl(t,e){1&t&&(i.dc(0,"button",53),i.Zb(1,"i",54),i.cc())}function bl(t,e){if(1&t&&(i.dc(0,"div",56),i.Zb(1,"nitro-badge",57),i.cc()),2&t){const t=e.$implicit;i.Kb(1),i.yc("badge",t)}}function vl(t,e){if(1&t&&(i.dc(0,"div",9),i.Uc(1,bl,2,1,"div",55),i.cc()),2&t){const t=i.qc(2);i.Kb(1),i.yc("ngForOf",t.userBadges)}}const Tl=function(t){return{active:t}};function Ol(t,e){if(1&t){const t=i.ec();i.dc(0,"div",60),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc(3).selectGroup(s.id)}),i.Zb(1,"nitro-badge",61),i.cc()}if(2&t){const t=e.$implicit,s=i.qc(3);i.yc("ngClass",i.Cc(3,Tl,s.selectedGroup&&s.selectedGroup.id===t.id)),i.Kb(1),i.yc("badge",t.badge)("isGroup",!0)}}function yl(t,e){if(1&t&&(i.bc(0),i.dc(1,"perfect-scrollbar",58),i.dc(2,"div",59),i.Uc(3,Ol,2,5,"div",51),i.cc(),i.cc(),i.ac()),2&t){const t=i.qc(2);i.Kb(3),i.yc("ngForOf",t.userProfile.groups)}}function Al(t,e){if(1&t&&i.Zb(0,"div",69),2&t){const t=i.qc(3);i.yc("headOnly",!0)("figure",t.currentRandomHeartRelationship.figure)("direction",4)}}function Cl(t,e){if(1&t&&i.Zb(0,"div",69),2&t){const t=i.qc(3);i.yc("headOnly",!0)("figure",t.currentRandomSmileRelationship.figure)("direction",4)}}function Ml(t,e){if(1&t&&i.Zb(0,"div",69),2&t){const t=i.qc(3);i.yc("headOnly",!0)("figure",t.currentRandomBobbaRelationship.figure)("direction",4)}}function Ul(t,e){if(1&t){const t=i.ec();i.bc(0),i.dc(1,"div",62),i.Wc(2),i.rc(3,"translate"),i.cc(),i.dc(4,"div",39),i.nc("click",function(){i.Lc(t);const e=i.qc(2);return e.openRelationshipProfile(e.currentRandomHeartRelationship)}),i.dc(5,"div",63),i.Zb(6,"i",64),i.cc(),i.dc(7,"div",65),i.Uc(8,Al,1,3,"div",43),i.dc(9,"div",44),i.Wc(10),i.rc(11,"translate"),i.cc(),i.dc(12,"div",45),i.Wc(13),i.rc(14,"translate"),i.cc(),i.cc(),i.cc(),i.dc(15,"div",39),i.nc("click",function(){i.Lc(t);const e=i.qc(2);return e.openRelationshipProfile(e.currentRandomSmileRelationship)}),i.dc(16,"div",63),i.Zb(17,"i",66),i.cc(),i.dc(18,"div",65),i.Uc(19,Cl,1,3,"div",43),i.dc(20,"div",44),i.Wc(21),i.rc(22,"translate"),i.cc(),i.dc(23,"div",45),i.Wc(24),i.rc(25,"translate"),i.cc(),i.cc(),i.cc(),i.dc(26,"div",39),i.nc("click",function(){i.Lc(t);const e=i.qc(2);return e.openRelationshipProfile(e.currentRandomBobbaRelationship)}),i.dc(27,"div",63),i.Zb(28,"i",67),i.cc(),i.dc(29,"div",68),i.Uc(30,Ml,1,3,"div",43),i.dc(31,"div",44),i.Wc(32),i.rc(33,"translate"),i.cc(),i.dc(34,"div",45),i.Wc(35),i.rc(36,"translate"),i.cc(),i.cc(),i.cc(),i.ac()}if(2&t){const t=i.qc(2);i.Kb(2),i.Xc(i.sc(3,10,"extendedprofile.relstatus")),i.Kb(6),i.yc("ngIf",t.currentRandomHeartRelationship),i.Kb(2),i.Yc(" ",t.currentRandomHeartRelationship?t.currentRandomHeartRelationship.username:i.sc(11,12,"extendedprofile.no.friends.in.this.category")," "),i.Kb(3),i.Yc(" ",t.heartRelationships.length>1?i.uc(14,14,"extendedprofile.relstatus.others.heart","count",t.heartRelationships.length-1):""," "),i.Kb(6),i.yc("ngIf",t.currentRandomSmileRelationship),i.Kb(2),i.Yc(" ",t.currentRandomSmileRelationship?t.currentRandomSmileRelationship.username:i.sc(22,18,"extendedprofile.no.friends.in.this.category")," "),i.Kb(3),i.Yc(" ",t.smileRelationships.length>1?i.uc(25,20,"extendedprofile.relstatus.others.smile","count",t.smileRelationships.length-1):""," "),i.Kb(6),i.yc("ngIf",t.currentRandomBobbaRelationship),i.Kb(2),i.Yc(" ",t.currentRandomBobbaRelationship?t.currentRandomBobbaRelationship.username:i.sc(33,24,"extendedprofile.no.friends.in.this.category")," "),i.Kb(3),i.Yc(" ",t.bobbaRelationships.length>1?i.uc(36,26,"extendedprofile.relstatus.others.bobba","count",t.bobbaRelationships.length-1):""," ")}}function Dl(t,e){1&t&&(i.dc(0,"div",70),i.Zb(1,"i",71),i.Wc(2),i.rc(3,"translate"),i.cc()),2&t&&(i.Kb(2),i.Yc(" ",i.sc(3,1,"extendedprofile.me")," "))}function wl(t,e){if(1&t&&i.Zb(0,"div",69),2&t){const t=i.qc(2);i.yc("headOnly",!0)("figure",t.currentRandomHeartRelationship.figure)("direction",4)}}function Nl(t,e){if(1&t&&i.Zb(0,"div",69),2&t){const t=i.qc(2);i.yc("headOnly",!0)("figure",t.currentRandomSmileRelationship.figure)("direction",4)}}function Ll(t,e){if(1&t&&i.Zb(0,"div",69),2&t){const t=i.qc(2);i.yc("headOnly",!0)("figure",t.currentRandomBobbaRelationship.figure)("direction",4)}}function xl(t,e){if(1&t){const t=i.ec();i.dc(0,"div",60),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc(2).selectGroup(s.id)}),i.Zb(1,"nitro-badge",61),i.cc()}if(2&t){const t=e.$implicit,s=i.qc(2);i.yc("ngClass",i.Cc(3,Tl,s.selectedGroup&&s.selectedGroup.id===t.id)),i.Kb(1),i.yc("badge",t.badge)("isGroup",!0)}}function Pl(t,e){1&t&&(i.dc(0,"button",84),i.Wc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Xc(i.sc(2,1,"group.join")))}function Fl(t,e){1&t&&(i.dc(0,"button",84),i.Wc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Xc(i.sc(2,1,"group.requestmembership")))}function kl(t,e){1&t&&(i.dc(0,"button",86),i.Wc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Xc(i.sc(2,1,"group.membershippending")))}function Wl(t,e){if(1&t&&(i.dc(0,"div"),i.Uc(1,Fl,3,3,"button",83),i.Uc(2,kl,3,3,"button",85),i.cc()),2&t){const t=i.qc(4);i.Kb(1),i.yc("ngIf",0===t.selectedGroup.membershipType),i.Kb(1),i.yc("ngIf",2===t.selectedGroup.membershipType)}}function Vl(t,e){if(1&t&&(i.dc(0,"div"),i.Uc(1,Pl,3,3,"button",83),i.Uc(2,Wl,3,2,"div",26),i.cc()),2&t){const t=i.qc(3);i.Kb(1),i.yc("ngIf",0===t.selectedGroup.type),i.Kb(1),i.yc("ngIf",1===t.selectedGroup.type)}}function Gl(t,e){1&t&&(i.dc(0,"button",87),i.Wc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Xc(i.sc(2,1,"group.leave")))}const Hl=function(){return["date","owner"]},Bl=function(t,e){return[t,e]},jl=function(t,e){return["group.created",null,null,t,e]};function Kl(t,e){if(1&t&&(i.dc(0,"div"),i.dc(1,"div",72),i.dc(2,"div",73),i.dc(3,"div",74),i.Zb(4,"i",36),i.Wc(5),i.cc(),i.dc(6,"div",75),i.Wc(7),i.rc(8,"translate"),i.cc(),i.dc(9,"div",76),i.Wc(10),i.cc(),i.cc(),i.dc(11,"div",77),i.dc(12,"div",78),i.Zb(13,"nitro-badge",61),i.cc(),i.dc(14,"div",79),i.Zb(15,"i",80),i.Wc(16),i.cc(),i.cc(),i.cc(),i.dc(17,"div",81),i.Uc(18,Vl,3,2,"div",26),i.Uc(19,Gl,3,3,"button",82),i.cc(),i.cc()),2&t){const t=i.qc(2);i.Kb(4),i.yc("ngClass","icon-group-type-"+t.selectedGroup.type),i.Kb(1),i.Yc(" ",t.selectedGroup.title," "),i.Kb(2),i.Xc(i.vc(8,9,i.Dc(19,jl,i.Bc(15,Hl),i.Dc(16,Bl,t.selectedGroup.createdAt,t.selectedGroup.ownerName)))),i.Kb(3),i.Xc(t.selectedGroup.description),i.Kb(3),i.yc("badge",t.selectedGroup.badge)("isGroup",!0),i.Kb(3),i.Yc(" ",t.selectedGroup.membersCount,""),i.Kb(2),i.yc("ngIf",1!==t.selectedGroup.membershipType),i.Kb(1),i.yc("ngIf",1===t.selectedGroup.membershipType)}}const zl=function(t){return[t]};function Yl(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"h6",3),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",4),i.nc("click",function(){return i.Lc(t),i.qc().hide()}),i.Zb(6,"i",5),i.cc(),i.cc(),i.dc(7,"div",6),i.dc(8,"div",7),i.dc(9,"div",8),i.dc(10,"div",9),i.dc(11,"div",10),i.Wc(12),i.cc(),i.Uc(13,Rl,2,0,"button",11),i.cc(),i.dc(14,"div",12),i.dc(15,"div",13),i.Zb(16,"div",14),i.cc(),i.dc(17,"div",15),i.dc(18,"div",16),i.Wc(19),i.cc(),i.dc(20,"div",17),i.Zb(21,"div",18),i.rc(22,"translate"),i.Zb(23,"div",18),i.rc(24,"translate"),i.dc(25,"div",19),i.Wc(26),i.rc(27,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(28,"div",20),i.dc(29,"div",21),i.dc(30,"div",22),i.nc("click",function(){return i.Lc(t),i.qc().selectTab(0)}),i.Wc(31),i.rc(32,"translate"),i.cc(),i.dc(33,"div",23),i.nc("click",function(){return i.Lc(t),i.qc().selectTab(1)}),i.Wc(34),i.rc(35,"translate"),i.cc(),i.dc(36,"div",23),i.nc("click",function(){return i.Lc(t),i.qc().selectTab(2)}),i.Wc(37),i.rc(38,"translate"),i.cc(),i.cc(),i.dc(39,"div",24),i.Uc(40,vl,2,1,"div",25),i.Uc(41,yl,4,1,"ng-container",26),i.Uc(42,Ul,37,30,"ng-container",26),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(43,"div",27),i.dc(44,"div",7),i.dc(45,"div",8),i.dc(46,"div",28),i.dc(47,"div",29),i.Zb(48,"div",30),i.cc(),i.dc(49,"div",31),i.dc(50,"div",32),i.Wc(51),i.cc(),i.dc(52,"div",33),i.Wc(53),i.cc(),i.Zb(54,"div",34),i.rc(55,"translate"),i.Zb(56,"div",34),i.rc(57,"translate"),i.rc(58,"timeAgo"),i.Zb(59,"div",34),i.rc(60,"translate"),i.dc(61,"div"),i.dc(62,"div",35),i.Zb(63,"i",36),i.cc(),i.Uc(64,Dl,4,3,"div",37),i.cc(),i.cc(),i.cc(),i.Zb(65,"div",38),i.cc(),i.dc(66,"div",8),i.Zb(67,"div",34),i.rc(68,"translate"),i.dc(69,"div",32),i.Wc(70),i.rc(71,"translate"),i.cc(),i.dc(72,"div",39),i.nc("click",function(){i.Lc(t);const e=i.qc();return e.openRelationshipProfile(e.currentRandomHeartRelationship)}),i.dc(73,"div",40),i.Zb(74,"i",41),i.cc(),i.dc(75,"div",42),i.Uc(76,wl,1,3,"div",43),i.dc(77,"div",44),i.Wc(78),i.rc(79,"translate"),i.cc(),i.dc(80,"div",45),i.Wc(81),i.rc(82,"translate"),i.cc(),i.cc(),i.cc(),i.dc(83,"div",39),i.nc("click",function(){i.Lc(t);const e=i.qc();return e.openRelationshipProfile(e.currentRandomSmileRelationship)}),i.dc(84,"div",40),i.Zb(85,"i",46),i.cc(),i.dc(86,"div",42),i.Uc(87,Nl,1,3,"div",43),i.dc(88,"div",44),i.Wc(89),i.rc(90,"translate"),i.cc(),i.dc(91,"div",45),i.Wc(92),i.rc(93,"translate"),i.cc(),i.cc(),i.cc(),i.dc(94,"div",39),i.nc("click",function(){i.Lc(t);const e=i.qc();return e.openRelationshipProfile(e.currentRandomBobbaRelationship)}),i.dc(95,"div",40),i.Zb(96,"i",47),i.cc(),i.dc(97,"div",42),i.Uc(98,Ll,1,3,"div",43),i.dc(99,"div",44),i.Wc(100),i.rc(101,"translate"),i.cc(),i.dc(102,"div",45),i.Wc(103),i.rc(104,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.Zb(105,"hr"),i.dc(106,"div",7),i.dc(107,"div",48),i.Zb(108,"div",34),i.rc(109,"translate"),i.dc(110,"perfect-scrollbar",49),i.dc(111,"div",50),i.Uc(112,xl,2,5,"div",51),i.cc(),i.cc(),i.cc(),i.dc(113,"div",52),i.Uc(114,Kl,20,22,"div",26),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Xc(i.sc(4,45,"extendedprofile.caption")),i.Kb(8),i.yc("ngClass",i.Cc(105,zl,t.isMe||t.isFriend?"rounded":"rounded-left")),i.Kb(1),i.Xc(t.userProfile.username),i.Kb(1),i.yc("ngIf",!t.isMe&&!t.isFriend),i.Kb(3),i.yc("figure",t.userProfile.figure)("direction",2),i.Kb(3),i.Xc(t.userProfile.motto),i.Kb(2),i.yc("innerHTML",i.uc(22,47,"extendedprofile.created","created",t.userProfile.registration),i.Mc),i.Kb(2),i.yc("innerHTML",i.uc(24,51,"extendedprofile.last.login","lastlogin",t.userProfile.lastVisit),i.Mc),i.Kb(3),i.Zc(" ",i.sc(27,55,"extendedprofile.achievementscore")," ",t.userProfile.achievementPoints," "),i.Kb(4),i.yc("ngClass",i.Cc(107,zl,0==t.tabId?"bg-emperor":"bg-secondary")),i.Kb(1),i.Yc(" ",i.sc(32,57,"inventory.badges.inactivebadges")," "),i.Kb(2),i.yc("ngClass",i.Cc(109,zl,1==t.tabId?"bg-emperor":"bg-secondary")),i.Kb(1),i.Zc(" ",i.sc(35,59,"avatar.profile.groups")," ",t.userProfile.groups.length," "),i.Kb(2),i.yc("ngClass",i.Cc(111,zl,2==t.tabId?"bg-emperor":"bg-secondary")),i.Kb(1),i.Zc(" ",i.sc(38,61,"friendlist.friends"),": ",t.userProfile.friendsCount," "),i.Kb(3),i.yc("ngIf",0==t.tabId),i.Kb(1),i.yc("ngIf",1==t.tabId),i.Kb(1),i.yc("ngIf",2==t.tabId),i.Kb(6),i.yc("figure",t.userProfile.figure)("direction",2),i.Kb(3),i.Xc(t.userProfile.username),i.Kb(2),i.Xc(t.userProfile.motto),i.Kb(1),i.yc("innerHTML",i.uc(55,63,"extendedprofile.created","created",t.userProfile.registration),i.Mc),i.Kb(2),i.yc("innerHTML",i.uc(57,67,"extendedprofile.last.login","lastlogin",i.sc(58,71,t.userProfile.lastVisit)),i.Mc),i.Kb(3),i.yc("innerHTML",i.uc(60,73,"extendedprofile.activitypoints","activitypoints",t.userProfile.achievementPoints),i.Mc),i.Kb(4),i.yc("ngClass",t.userProfile.isOnline?"icon-online":"icon-offline"),i.Kb(1),i.yc("ngIf",t.isMe),i.Kb(3),i.yc("innerHTML",i.uc(68,77,"extendedprofile.friends.count","count",t.userProfile.friendsCount),i.Mc),i.Kb(3),i.Xc(i.sc(71,81,"extendedprofile.relstatus")),i.Kb(6),i.yc("ngIf",t.currentRandomHeartRelationship),i.Kb(2),i.Yc(" ",t.currentRandomHeartRelationship?t.currentRandomHeartRelationship.username:i.sc(79,83,"extendedprofile.no.friends.in.this.category")," "),i.Kb(3),i.Yc(" ",t.heartRelationships.length>1?i.uc(82,85,"extendedprofile.relstatus.others.heart","count",t.heartRelationships.length-1):""," "),i.Kb(6),i.yc("ngIf",t.currentRandomSmileRelationship),i.Kb(2),i.Yc(" ",t.currentRandomSmileRelationship?t.currentRandomSmileRelationship.username:i.sc(90,89,"extendedprofile.no.friends.in.this.category")," "),i.Kb(3),i.Yc(" ",t.smileRelationships.length>1?i.uc(93,91,"extendedprofile.relstatus.others.smile","count",t.smileRelationships.length-1):""," "),i.Kb(6),i.yc("ngIf",t.currentRandomBobbaRelationship),i.Kb(2),i.Yc(" ",t.currentRandomBobbaRelationship?t.currentRandomBobbaRelationship.username:i.sc(101,95,"extendedprofile.no.friends.in.this.category")," "),i.Kb(3),i.Yc(" ",t.bobbaRelationships.length>1?i.uc(104,97,"extendedprofile.relstatus.others.bobba","count",t.bobbaRelationships.length-1):""," "),i.Kb(5),i.yc("innerHTML",i.uc(109,101,"extendedprofile.groups.count","count",t.userProfile.groups.length),i.Mc),i.Kb(4),i.yc("ngForOf",t.userProfile.groups),i.Kb(2),i.yc("ngIf",t.selectedGroup)}}let Xl=(()=>{class t{constructor(t,e,s){this._userProfileService=t,this._sessionService=e,this._settingsService=s,this._currentRandomHeartRelationship=null,this._currentRandomSmileRelationship=null,this._currentRandomBobbaRelationship=null,this._tabId=0}ngOnInit(){this._userProfileService.component=this}ngOnDestroy(){this._userProfileService.component=null}hide(){this._settingsService.hideUserProfile()}openRelationshipProfile(t){t&&u.a.instance.communication.connection.send(new cl.a(t.userId))}getRandomRelationships(){this._currentRandomHeartRelationship=this.heartRelationships[Math.floor(Math.random()*this.heartRelationships.length)],this._currentRandomSmileRelationship=this.smileRelationships[Math.floor(Math.random()*this.smileRelationships.length)],this._currentRandomBobbaRelationship=this.bobbaRelationships[Math.floor(Math.random()*this.bobbaRelationships.length)]}selectGroup(t){this._userProfileService.selectGroup(t)}selectTab(t){this._tabId=t}get visible(){return this._settingsService.userProfileVisible}get userProfile(){return this._userProfileService.userLoadedProfile}get userBadges(){return this._userProfileService.userBadges}get isMe(){return!!this.userProfile&&this._sessionService.userId===this.userProfile.id}get isFriend(){return!!this.userProfile&&this.userProfile.isMyFriend}get heartRelationships(){return this._userProfileService.heartRelationships}get currentRandomHeartRelationship(){return this._currentRandomHeartRelationship}get smileRelationships(){return this._userProfileService.smileRelationships}get currentRandomSmileRelationship(){return this._currentRandomSmileRelationship}get bobbaRelationships(){return this._userProfileService.bobbaRelationships}get currentRandomBobbaRelationship(){return this._currentRandomBobbaRelationship}get selectedGroup(){return this._userProfileService.selectedGroup}get tabId(){return this._tabId}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(pl),i.Yb(El),i.Yb(m))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-user-profile-component"]],decls:1,vars:1,consts:[["class","card nitro-user-profile-component",3,"bringToTop","draggable",4,"ngIf"],[1,"card","nitro-user-profile-component",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3","header-draggable"],[1,"mb-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"row"],[1,"col-6"],[1,"d-flex","flex-row"],[1,"bg-emperor","w-100","mb-1","font-bold","text-center",3,"ngClass"],["class","btn btn-sm btn-success rounded-right mb-1 px-2 py-0",4,"ngIf"],[1,"row","mx-0"],[1,"profile-avatar-container","col-3","px-0","mx-0"],["nitro-avatar-image","",1,"avatar-img","bg-emperor","rounded-left",3,"figure","direction"],[1,"col-9","px-0","mx-0","bg-emperor","profile-user-right","p-2"],[1,"profile-user-motto","font-italic","small"],[1,"mt-auto","small"],[1,"p-1","bg-primary","rounded","mb-1",3,"innerHTML"],[1,"p-1","bg-primary","rounded"],[1,"col-6","d-flex","flex-column"],[1,"d-flex","flex-row","small"],[1,"rounded-top","p-1","mr-1",3,"ngClass","click"],[1,"rounded-top","bg-secondary","p-1","mr-1",3,"ngClass","click"],[1,"bg-emperor","profile-info-bg","p-1"],["class","d-flex flex-row",4,"ngIf"],[4,"ngIf"],[1,"d-none"],[1,"profile-upper-container"],[1,"profile-avatar-container"],["nitro-avatar-image","",1,"avatar-img",3,"figure","direction"],[1,"profile-info-container"],[1,"font-weight-bold"],[1,"profile-info-motto","font-italic"],[3,"innerHTML"],[2,"float","left"],[1,"icon",3,"ngClass"],["class","its-me",4,"ngIf"],[1,"badges-container"],[1,"profile-relationship",3,"click"],[1,"icon-container"],[1,"icon","icon-relationship-heart"],[1,"profile-relationship-information"],["class","relationship-avatar","nitro-avatar-image","",3,"headOnly","figure","direction",4,"ngIf"],[1,"profile-relationship-name"],[1,"profile-relationship-extra"],[1,"icon","icon-relationship-smile"],[1,"icon","icon-relationship-bobba"],[1,"col-3"],[1,"grid-container","position-relative","w-100",2,"min-height","160px","max-height","160px"],[1,"grid-items","grid-1"],["class","item-detail",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-9"],[1,"btn","btn-sm","btn-success","rounded-right","mb-1","px-2","py-0"],[1,"fas","fa-user-plus"],["class","bg-primary p-1 rounded user-profile-badge",4,"ngFor","ngForOf"],[1,"bg-primary","p-1","rounded","user-profile-badge"],[1,"h-100","d-flex","justify-content-center",3,"badge"],[1,"d-flex","flex-column","w-100",2,"min-height","160px","height","160px","max-height","160px"],[1,"bg-primary","w-100","rounded","mb-1"],[1,"item-detail",3,"ngClass","click"],[3,"badge","isGroup"],[1,"font-weight-bold","small"],[1,"icon-container","mr-1"],[1,"fas","fa-heart","text-pink"],[1,"profile-relationship-information","bg-primary","rounded","w-100","mb-1","p-1"],[1,"fas","fa-smile","text-warning"],[1,"fas","fa-skull","text-black"],[1,"profile-relationship-information","bg-primary","rounded","w-100","p-1"],["nitro-avatar-image","",1,"relationship-avatar",3,"headOnly","figure","direction"],[1,"its-me"],[1,"icon","icon-check"],[1,"group-detail"],[1,"left-side"],[1,"group-title","font-weight-bold"],[1,"group-created-at"],[1,"group-description"],[1,"right-side"],[1,"group-badge"],[1,"group-members"],[1,"icon","icon-group-members"],[1,"group-membership-action"],["class","btn btn-danger btn-block",4,"ngIf"],["class","btn btn-primary btn-block",4,"ngIf"],[1,"btn","btn-primary","btn-block"],["class","btn btn-primary disabled btn-block",4,"ngIf"],[1,"btn","btn-primary","disabled","btn-block"],[1,"btn","btn-danger","btn-block"]],template:function(t,e){1&t&&i.Uc(0,Yl,115,113,"div",0),2&t&&i.yc("ngIf",e.visible)},directives:[p.n,li,vi,p.l,qi,Oi.b,p.m,Bn],pipes:[Fs,Il],encapsulation:2}),t})();const Zl=["historyScroller"],ql=function(t){return{"background-color":t}};function Ql(t,e){if(1&t&&i.Zb(0,"div",24),2&t){const t=i.qc(2).$implicit;i.yc("ngStyle",i.Cc(1,ql,t.senderColorString))}}const Jl=function(t){return{"background-image":t}};function $l(t,e){if(1&t&&i.Zb(0,"div",25),2&t){const t=i.qc(2).$implicit;i.yc("ngStyle",i.Cc(1,Jl,"url("+t.senderImageUrl+")"))}}function tu(t,e){if(1&t){const t=i.ec();i.dc(0,"div",17),i.nc("click",function(){i.Lc(t);const e=i.qc().$implicit;return i.qc(3).selectUser(e.senderId)}),i.Uc(1,Ql,1,3,"div",18),i.dc(2,"div"),i.dc(3,"div",19),i.Uc(4,$l,1,3,"div",20),i.cc(),i.dc(5,"div",21),i.Zb(6,"b",22),i.dc(7,"span",23),i.Wc(8),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc().$implicit;i.Kb(1),i.yc("ngIf",0===t.chatStyle),i.Kb(1),i.Ob("chat-bubble bubble-",t.chatStyle," type-",t.chatType,""),i.Kb(2),i.yc("ngIf",t.senderImageUrl),i.Kb(2),i.yc("innerHTML",t.senderName,i.Mc),i.Kb(2),i.Yc(" ",t.content,"")}}function eu(t,e){if(1&t&&(i.dc(0,"div",26),i.Wc(1),i.cc()),2&t){const t=i.qc().$implicit;i.Kb(1),i.Yc(" ",t.content," ")}}function su(t,e){if(1&t&&(i.bc(0),i.dc(1,"div",11),i.dc(2,"div",12),i.dc(3,"div",13),i.Wc(4),i.rc(5,"date"),i.cc(),i.cc(),i.dc(6,"div",14),i.Uc(7,tu,9,8,"div",15),i.Uc(8,eu,2,1,"div",16),i.cc(),i.cc(),i.ac()),2&t){const t=e.$implicit;i.Kb(4),i.Yc(" ",i.tc(5,3,t.date,"hh:mm:ss")," "),i.Kb(3),i.yc("ngIf",-1!==t.senderId),i.Kb(1),i.yc("ngIf",-1===t.senderId)}}function iu(t,e){if(1&t&&(i.dc(0,"div",9),i.Uc(1,su,9,6,"ng-container",10),i.cc()),2&t){const t=e.$implicit,s=i.qc(2);i.Kb(1),i.yc("ngForOf",t.items)("ngForTrackBy",s.trackById)}}function nu(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"h6",3),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",4),i.nc("click",function(){return i.Lc(t),i.qc().hide()}),i.Zb(6,"i",5),i.cc(),i.cc(),i.dc(7,"perfect-scrollbar",6,7),i.Uc(9,iu,2,2,"div",8),i.cc(),i.cc()}if(2&t){const t=i.qc();i.yc("center",!1)("noMemory",!0),i.Kb(3),i.Xc(i.sc(4,5,"room.chathistory.button.text")),i.Kb(6),i.yc("ngForOf",t.historySets)("ngForTrackBy",t.trackById)}}let ru=(()=>{class t{constructor(t,e){this._settingsService=t,this._chatHistoryService=e}ngOnChanges(t){const e=t.visible.currentValue;e&&e!==t.visible.previousValue&&setTimeout(()=>this.scrollToBottom(),1)}hide(){this._settingsService.hideChatHistory()}selectUser(t){t&&u.a.instance.roomEngine.selectRoomObject(u.a.instance.roomEngine.activeRoomId,t,W.a.UNIT)}trackById(t,e){return e.id}scrollToBottom(){this.historyScroller&&this.historyScroller.directiveRef.scrollToBottom(0)}get historySets(){return this._chatHistoryService.historySets}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(m),i.Yb(ys.a))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-chat-history-component"]],viewQuery:function(t,e){if(1&t&&i.cd(Zl,1),2&t){let t;i.Hc(t=i.oc())&&(e.historyScroller=t.first)}},inputs:{visible:"visible"},features:[i.Ib],decls:1,vars:1,consts:[["class","card nitro-chat-history-component",3,"bringToTop","draggable","center","noMemory",4,"ngIf"],[1,"card","nitro-chat-history-component",3,"bringToTop","draggable","center","noMemory"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"position-relative","w-100","mb-1",2,"height","100%"],["historyScroller",""],["class","d-flex flex-column pt-3 px-3","style","padding-right: 0px !important",4,"ngFor","ngForOf","ngForTrackBy"],[1,"d-flex","flex-column","pt-3","px-3",2,"padding-right","0px !important"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"row","mb-2"],[1,"d-flex","col-3","justify-content-end","align-items-center",2,"max-width","21%"],[1,"badge","badge-secondary","badge-sm",2,"border-radius","20px","padding","5px 10px","filter","drop-shadow(0 2px 0 #252525) !important"],[1,"d-flex","col-9","align-items-center","pl-0"],["class","bubble-container",3,"click",4,"ngIf"],["class","badge badge-success badge-sm","style","\n                                border-radius: 20px;\n                                padding: 5px 10px;\n                                filter: drop-shadow(0 2px 0 #1f7d35) !important;\n                            ",4,"ngIf"],[1,"bubble-container",3,"click"],["class","user-container-bg",3,"ngStyle",4,"ngIf"],[1,"user-container"],["class","user-image",3,"ngStyle",4,"ngIf"],[1,"chat-content"],[1,"username-container",3,"innerHTML"],[1,"message"],[1,"user-container-bg",3,"ngStyle"],[1,"user-image",3,"ngStyle"],[1,"badge","badge-success","badge-sm",2,"border-radius","20px","padding","5px 10px","filter","drop-shadow(0 2px 0 #1f7d35) !important"]],template:function(t,e){1&t&&i.Uc(0,nu,10,7,"div",0),2&t&&i.yc("ngIf",e.visible)},directives:[p.n,li,vi,Oi.b,p.m,p.o],pipes:[Fs,p.d],encapsulation:2}),t})();var au=s("bakE"),ou=s("XxiA"),cu=s("vKkO"),_u=s("amIx"),hu=s("Yp13"),lu=s("FXkd"),uu=s("qoEl");class du extends g.e{constructor(t,e){super("\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec3 lineColor;\nuniform vec3 color;\nvoid main(void) {\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n    vec3 colorLine = lineColor * currentColor.a;\n    vec3 colorOverlay = color * currentColor.a;\n\n    if(currentColor.r == 0.0 && currentColor.g == 0.0 && currentColor.b == 0.0 && currentColor.a > 0.0) {\n        gl_FragColor = vec4(colorLine.r, colorLine.g, colorLine.b, currentColor.a);\n    } else if(currentColor.a > 0.0) {\n        gl_FragColor = vec4(colorOverlay.r, colorOverlay.g, colorOverlay.b, currentColor.a);\n    }\n}"),this.uniforms.lineColor=new Float32Array(3),this.uniforms.color=new Float32Array(3),this.lineColor=t,this.color=e}get lineColor(){return this._lineColor}set lineColor(t){const e=this.uniforms.lineColor;"number"==typeof t?(Object(uu.hex2rgb)(t,e),this._lineColor=t):(e[0]=t[0],e[1]=t[1],e[2]=t[2],this._lineColor=Object(uu.rgb2hex)(e))}get color(){return this._color}set color(t){const e=this.uniforms.color;"number"==typeof t?(Object(uu.hex2rgb)(t,e),this._color=t):(e[0]=t[0],e[1]=t[1],e[2]=t[2],this._color=Object(uu.rgb2hex)(e))}}class gu{constructor(t){this._component=t;const e=new du([1,1,1],[.6,.6,.6]);this._selectionShader=e}show(t){this.applySelectionShader(this.getRoomObject(t))}hide(t){this.clearSelectionShader(this.getRoomObject(t))}clearSelectionShaderFromFurni(t){for(const e of t)this.clearSelectionShader(this.getRoomObject(e))}applySelectionShaderToFurni(t){for(const e of t)this.applySelectionShader(this.getRoomObject(e))}getRoomObject(t){return this._component?u.a.instance.roomEngine.getRoomObject(this._component.roomId,t,W.a.FLOOR):null}applySelectionShader(t){if(!t)return;const e=t.visualization;if(e)for(const s of e.sprites)s.blendMode!==g.b.ADD&&(s.filters=[this._selectionShader])}clearSelectionShader(t){if(!t)return;const e=t.visualization;if(e)for(const s of e.sprites)s.filters=[]}}let mu=(()=>{class t{constructor(t,e){this._wiredService=t,this._formBuilder=e}get code(){return-1}get negativeCode(){return-1}get requiresFurni(){return xg._Str_5431}get hasStateSnapshot(){return!1}readIntegerParamsFromForm(){return[]}readStringParamFromForm(){return""}onInitStart(){}onEditStart(t){}get hasSpecialInputs(){return!1}validate(){return null}static getLocaleName(t){const e=Math.floor(t/2);return t%2?(e+.5).toString():e.toString()}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(qe),i.Yb(Ti.c))},t.\u0275dir=i.Tb({type:t}),t})();class pu extends mu{constructor(){super(...arguments),this.delay=0}onEditStart(t){this.delay=t.delayInPulses}}class fu extends mu{}let Eu=(()=>{class t{}return t.STATES_MATCH=0,t.FURNIS_HAVE_AVATARS=1,t.TRIGGERER_IS_ON_FURNI=2,t.TIME_ELAPSED_MORE=3,t.TIME_ELAPSED_LESS=4,t.USER_COUNT_IN=5,t.ACTOR_IS_IN_TEAM=6,t.HAS_STACKED_FURNIS=7,t.STUFF_TYPE_MATCHES=8,t.STUFFS_IN_FORMATION=9,t.ACTOR_IS_GROUP_MEMBER=10,t.ACTOR_IS_WEARING_BADGE=11,t.ACTOR_IS_WEARING_EFFECT=12,t.NOT_STATES_MATCH=13,t.FURNI_NOT_HAVE_HABBO=14,t.NOT_ACTOR_ON_FURNI=15,t.NOT_USER_COUNT_IN=16,t.NOT_ACTOR_IN_TEAM=17,t.NOT_HAS_STACKED_FURNIS=18,t.NOT_FURNI_IS_OF_TYPE=19,t.NOT_STUFFS_IN_FORMATION=20,t.NOT_ACTOR_IN_GROUP=21,t.NOT_ACTOR_WEARS_BADGE=22,t.NOT_ACTOR_WEARING_EFFECT=23,t.DATE_RANGE_ACTIVE=24,t.ACTOR_HAS_HANDITEM=25,t})(),Su=(()=>{class t extends fu{constructor(){super(...arguments),this.allowedHanditemIds=["2","5","7","8","9","10","27"],this.handitemId="0"}get code(){return t.CODE}onEditStart(t){this.handitemId=t.intData.length>0&&this.allowedHanditemIds.includes(t.intData[0].toString())?t.intData[0].toString():"0"}readIntegerParamsFromForm(){return[parseInt(this.handitemId)]}get hasSpecialInputs(){return!0}}return t.CODE=Eu.ACTOR_HAS_HANDITEM,t.\u0275fac=function(e){return Iu(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:30,vars:36,consts:[[1,"form-group"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","0",3,"selected"],["value","2",3,"selected"],["value","5",3,"selected"],["value","7",3,"selected"],["value","8",3,"selected"],["value","9",3,"selected"],["value","10",3,"selected"],["value","27",3,"selected"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"label"),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"select",1),i.nc("ngModelChange",function(t){return e.handitemId=t}),i.dc(6,"option",2),i.Wc(7),i.rc(8,"translate"),i.cc(),i.dc(9,"option",3),i.Wc(10),i.rc(11,"translate"),i.cc(),i.dc(12,"option",4),i.Wc(13),i.rc(14,"translate"),i.cc(),i.dc(15,"option",5),i.Wc(16),i.rc(17,"translate"),i.cc(),i.dc(18,"option",6),i.Wc(19),i.rc(20,"translate"),i.cc(),i.dc(21,"option",7),i.Wc(22),i.rc(23,"translate"),i.cc(),i.dc(24,"option",8),i.Wc(25),i.rc(26,"translate"),i.cc(),i.dc(27,"option",9),i.Wc(28),i.rc(29,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Xc(i.sc(4,18,"wiredfurni.params.handitem")),i.Kb(2),i.yc("ngModel",e.handitemId),i.Kb(1),i.yc("selected","0"==e.handitemId),i.Kb(1),i.Xc(i.sc(8,20,"wiredfurni.tooltip.handitem")),i.Kb(2),i.yc("selected","2"==e.handitemId),i.Kb(1),i.Xc(i.sc(11,22,"handitem2")),i.Kb(2),i.yc("selected","5"==e.handitemId),i.Kb(1),i.Xc(i.sc(14,24,"handitem5")),i.Kb(2),i.yc("selected","7"==e.handitemId),i.Kb(1),i.Xc(i.sc(17,26,"handitem7")),i.Kb(2),i.yc("selected","8"==e.handitemId),i.Kb(1),i.Xc(i.sc(20,28,"handitem8")),i.Kb(2),i.yc("selected","9"==e.handitemId),i.Kb(1),i.Xc(i.sc(23,30,"handitem9")),i.Kb(2),i.yc("selected","10"==e.handitemId),i.Kb(1),i.Xc(i.sc(26,32,"handitem10")),i.Kb(2),i.yc("selected","27"==e.handitemId),i.Kb(1),i.Xc(i.sc(29,34,"handitem27")))},encapsulation:2}),t})();const Iu=i.fc(Su);let Ru=(()=>{class t extends fu{get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}}return t.CODE=Eu.ACTOR_IS_GROUP_MEMBER,t.NEGATIVE_CODE=Eu.NOT_ACTOR_IN_GROUP,t.\u0275fac=function(e){return bu(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:0,template:function(t,e){1&t&&i.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const bu=i.fc(Ru);let vu=(()=>{class t extends fu{constructor(){super(...arguments),this.team="1"}get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}onEditStart(t){this.team=t.intData[0].toString()}readIntegerParamsFromForm(){return[Number.parseInt(this.team)]}get hasSpecialInputs(){return!0}}return t.CODE=Eu.ACTOR_IS_IN_TEAM,t.NEGATIVE_CODE=Eu.NOT_ACTOR_IN_TEAM,t.\u0275fac=function(e){return Tu(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:23,vars:19,consts:[[1,"form-check"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","radio","value","3",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","radio","value","4",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.Wc(1),i.rc(2,"translate"),i.dc(3,"div",0),i.dc(4,"input",1),i.nc("ngModelChange",function(t){return e.team=t}),i.cc(),i.dc(5,"label",2),i.Wc(6),i.rc(7,"translate"),i.cc(),i.cc(),i.dc(8,"div",0),i.dc(9,"input",3),i.nc("ngModelChange",function(t){return e.team=t}),i.cc(),i.dc(10,"label",2),i.Wc(11),i.rc(12,"translate"),i.cc(),i.cc(),i.dc(13,"div",0),i.dc(14,"input",4),i.nc("ngModelChange",function(t){return e.team=t}),i.cc(),i.dc(15,"label",2),i.Wc(16),i.rc(17,"translate"),i.cc(),i.cc(),i.dc(18,"div",0),i.dc(19,"input",5),i.nc("ngModelChange",function(t){return e.team=t}),i.cc(),i.dc(20,"label",2),i.Wc(21),i.rc(22,"translate"),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(1),i.Yc(" ",i.sc(2,9,"wiredfurni.params.team")," "),i.Kb(3),i.yc("ngModel",e.team),i.Kb(2),i.Xc(i.sc(7,11,"wiredfurni.params.team.1")),i.Kb(3),i.yc("ngModel",e.team),i.Kb(2),i.Xc(i.sc(12,13,"wiredfurni.params.team.2")),i.Kb(3),i.yc("ngModel",e.team),i.Kb(2),i.Xc(i.sc(17,15,"wiredfurni.params.team.3")),i.Kb(3),i.yc("ngModel",e.team),i.Kb(2),i.Xc(i.sc(22,17,"wiredfurni.params.team.4")))},encapsulation:2}),t})();const Tu=i.fc(vu);let Ou=(()=>{class t extends fu{get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}readIntegerParamsFromForm(){const t=parseInt(this.effectId);return isNaN(t)?[]:[t]}onEditStart(t){this.effectId=t.stringData.length>0?t.stringData:"0"}get hasSpecialInputs(){return!0}}return t.CODE=Eu.ACTOR_IS_WEARING_EFFECT,t.NEGATIVE_CODE=Eu.NOT_ACTOR_WEARING_EFFECT,t.\u0275fac=function(e){return yu(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:6,vars:4,consts:[[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"label"),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",1),i.nc("ngModelChange",function(t){return e.effectId=t}),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Xc(i.sc(4,2,"wiredfurni.params.effectid")),i.Kb(2),i.yc("ngModel",e.effectId))},encapsulation:2}),t})();const yu=i.fc(Ou);let Au=(()=>{class t extends fu{get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}get requiresFurni(){return xg._Str_4873}}return t.CODE=Eu.TRIGGERER_IS_ON_FURNI,t.NEGATIVE_CODE=Eu.NOT_ACTOR_ON_FURNI,t.\u0275fac=function(e){return Cu(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:0,template:function(t,e){1&t&&i.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const Cu=i.fc(Au);let Mu=(()=>{class t extends fu{get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}readStringParamFromForm(){return this.botName}onEditStart(t){this.botName=t.stringData}get hasSpecialInputs(){return!0}}return t.CODE=Eu.ACTOR_IS_WEARING_BADGE,t.NEGATIVE_CODE=Eu.NOT_ACTOR_WEARS_BADGE,t.\u0275fac=function(e){return Uu(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:6,vars:4,consts:[[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"label"),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",1),i.nc("ngModelChange",function(t){return e.botName=t}),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Xc(i.sc(4,2,"wiredfurni.params.badgecode")),i.Kb(2),i.yc("ngModel",e.botName))},encapsulation:2}),t})();const Uu=i.fc(Mu);let Du=(()=>{class t extends fu{get code(){return t.CODE}test(){return t.CODE}readIntegerParamsFromForm(){const t=[],e=new Date(this.startDate).getTime();if(!isNaN(e)){t.push(e/1e3);const s=new Date(this.endDate).getTime();isNaN(s)||t.push(s/1e3)}return t}onEditStart(t){let e,s;e=t.intData.length>0?new Date(1e3*t.intData[0]):new Date(0),s=t.intData.length>1?new Date(1e3*t.intData[1]):new Date(0),this.startDate=this.dateToString(e),this.endDate=this.dateToString(s)}get hasSpecialInputs(){return!0}dateToString(t){return`${t.getFullYear()}/${("0"+(t.getMonth()+1)).slice(-2)}/${("0"+t.getDate()).slice(-2)} ${("0"+t.getHours()).slice(-2)}:${("0"+t.getMinutes()).slice(-2)}`}}return t.CODE=Eu.DATE_RANGE_ACTIVE,t.\u0275fac=function(e){return wu(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:11,vars:8,consts:[[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"label"),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",1),i.nc("ngModelChange",function(t){return e.startDate=t}),i.cc(),i.cc(),i.dc(6,"div",0),i.dc(7,"label"),i.Wc(8),i.rc(9,"translate"),i.cc(),i.dc(10,"input",1),i.nc("ngModelChange",function(t){return e.endDate=t}),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Xc(i.sc(4,4,"wiredfurni.params.startdate")),i.Kb(2),i.yc("ngModel",e.startDate),i.Kb(3),i.Xc(i.sc(9,6,"wiredfurni.params.enddate")),i.Kb(2),i.yc("ngModel",e.endDate))},encapsulation:2}),t})();const wu=i.fc(Du);let Nu=(()=>{class t extends fu{constructor(){super(...arguments),this.requireAll="0"}get code(){return t.CODE}get requiresFurni(){return xg._Str_4873}onEditStart(t){this.requireAll=t.intData.length>0&&1===t.intData[0]?"1":"0"}readIntegerParamsFromForm(){return["1"===this.requireAll?1:0]}get hasSpecialInputs(){return!0}}return t.CODE=Eu.NOT_HAS_STACKED_FURNIS,t.\u0275fac=function(e){return Lu(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:13,vars:11,consts:[[1,"form-check"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.Wc(1),i.rc(2,"translate"),i.dc(3,"div",0),i.dc(4,"input",1),i.nc("ngModelChange",function(t){return e.requireAll=t}),i.cc(),i.dc(5,"label",2),i.Wc(6),i.rc(7,"translate"),i.cc(),i.cc(),i.dc(8,"div",0),i.dc(9,"input",3),i.nc("ngModelChange",function(t){return e.requireAll=t}),i.cc(),i.dc(10,"label",2),i.Wc(11),i.rc(12,"translate"),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(1),i.Yc(" ",i.sc(2,5,"wiredfurni.params.not_requireall")," "),i.Kb(3),i.yc("ngModel",e.requireAll),i.Kb(2),i.Xc(i.sc(7,7,"wiredfurni.params.not_requireall.0")),i.Kb(3),i.yc("ngModel",e.requireAll),i.Kb(2),i.Xc(i.sc(12,9,"wiredfurni.params.not_requireall.1")))},encapsulation:2}),t})();const Lu=i.fc(Nu);let xu=(()=>{class t extends fu{get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}get requiresFurni(){return xg._Str_4873}}return t.CODE=Eu.FURNIS_HAVE_AVATARS,t.NEGATIVE_CODE=Eu.FURNI_NOT_HAVE_HABBO,t.\u0275fac=function(e){return Pu(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:0,template:function(t,e){1&t&&i.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const Pu=i.fc(xu);let Fu=(()=>{class t extends fu{get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}get requiresFurni(){return xg._Str_4991}}return t.CODE=Eu.STUFF_TYPE_MATCHES,t.NEGATIVE_CODE=Eu.NOT_FURNI_IS_OF_TYPE,t.\u0275fac=function(e){return ku(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:0,template:function(t,e){1&t&&i.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const ku=i.fc(Fu);let Wu=(()=>{class t extends fu{constructor(){super(...arguments),this.requireAll="0"}get code(){return t.CODE}get requiresFurni(){return xg._Str_4873}onEditStart(t){this.requireAll=t.intData.length>0&&1===t.intData[0]?"1":"0"}readIntegerParamsFromForm(){return["1"===this.requireAll?1:0]}get hasSpecialInputs(){return!0}}return t.CODE=Eu.HAS_STACKED_FURNIS,t.\u0275fac=function(e){return Vu(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:13,vars:11,consts:[[1,"form-check"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.Wc(1),i.rc(2,"translate"),i.dc(3,"div",0),i.dc(4,"input",1),i.nc("ngModelChange",function(t){return e.requireAll=t}),i.cc(),i.dc(5,"label",2),i.Wc(6),i.rc(7,"translate"),i.cc(),i.cc(),i.dc(8,"div",0),i.dc(9,"input",3),i.nc("ngModelChange",function(t){return e.requireAll=t}),i.cc(),i.dc(10,"label",2),i.Wc(11),i.rc(12,"translate"),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(1),i.Yc(" ",i.sc(2,5,"wiredfurni.params.requireall")," "),i.Kb(3),i.yc("ngModel",e.requireAll),i.Kb(2),i.Xc(i.sc(7,7,"wiredfurni.params.requireall.0")),i.Kb(3),i.yc("ngModel",e.requireAll),i.Kb(2),i.Xc(i.sc(12,9,"wiredfurni.params.requireall.1")))},encapsulation:2}),t})();const Vu=i.fc(Wu);let Gu=(()=>{class t extends fu{get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}get requiresFurni(){return xg._Str_4873}get hasStateSnapshot(){return!0}onEditStart(t){this.state=t.getBoolean(0),this.direction=t.getBoolean(1),this.position=t.getBoolean(2)}readIntegerParamsFromForm(){return[this.state?1:0,this.direction?1:0,this.position?1:0]}get hasSpecialInputs(){return!0}}return t.CODE=Eu.STATES_MATCH,t.NEGATIVE_CODE=Eu.NOT_STATES_MATCH,t.\u0275fac=function(e){return Hu(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:18,vars:15,consts:[[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.Wc(1),i.rc(2,"translate"),i.dc(3,"div",0),i.dc(4,"input",1),i.nc("ngModelChange",function(t){return e.state=t}),i.cc(),i.dc(5,"label",2),i.Wc(6),i.rc(7,"translate"),i.cc(),i.cc(),i.dc(8,"div",0),i.dc(9,"input",1),i.nc("ngModelChange",function(t){return e.direction=t}),i.cc(),i.dc(10,"label",2),i.Wc(11),i.rc(12,"translate"),i.cc(),i.cc(),i.dc(13,"div",0),i.dc(14,"input",1),i.nc("ngModelChange",function(t){return e.position=t}),i.cc(),i.dc(15,"label",2),i.Wc(16),i.rc(17,"translate"),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(1),i.Yc(" ",i.sc(2,7,"wiredfurni.params.conditions")," "),i.Kb(3),i.yc("ngModel",e.state),i.Kb(2),i.Xc(i.sc(7,9,"wiredfurni.params.condition.state")),i.Kb(3),i.yc("ngModel",e.direction),i.Kb(2),i.Xc(i.sc(12,11,"wiredfurni.params.condition.direction")),i.Kb(3),i.yc("ngModel",e.position),i.Kb(2),i.Xc(i.sc(17,13,"wiredfurni.params.condition.position")))},encapsulation:2}),t})();const Hu=i.fc(Gu);let Bu=(()=>{class t extends fu{get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}get requiresFurni(){return xg._Str_4873}onInit(){}onEditStart(t){}get hasSpecialInputs(){return!0}}return t.CODE=Eu.STUFFS_IN_FORMATION,t.NEGATIVE_CODE=Eu.NOT_STUFFS_IN_FORMATION,t.\u0275fac=function(e){return ju(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:2,vars:0,template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.Wc(1,"STUFFS_IN_FORMATION"),i.cc())},encapsulation:2}),t})();const ju=i.fc(Bu);let Ku=(()=>{class t extends fu{constructor(){super(...arguments),this.time=0,this.timeLocale=""}get code(){return t.CODE}onEditStart(t){this.time=t.intData[0]||1,this.updateLocaleParameter()}readIntegerParamsFromForm(){return[this.time]}onSliderChange(){this.updateLocaleParameter()}decrease(){this.time-=1,this.time<t.MINIMUM_VALUE&&(this.time=t.MINIMUM_VALUE)}increase(){this.time+=1,this.time>t.MAXIMUM_VALUE&&(this.time=t.MAXIMUM_VALUE)}updateLocaleParameter(){this.timeLocale=u.a.instance.getLocalizationWithParameter("wiredfurni.params.allowbefore","seconds",mu.getLocaleName(this.time))}get hasSpecialInputs(){return!0}get sliderOptions(){return{floor:t.MINIMUM_VALUE,ceil:t.MAXIMUM_VALUE,step:t.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.CODE=Eu.TIME_ELAPSED_LESS,t.MINIMUM_VALUE=1,t.MAXIMUM_VALUE=1200,t.STEPPER_VALUE=1,t.\u0275fac=function(e){return zu(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:9,vars:3,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","time",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"p",0),i.Wc(2),i.cc(),i.dc(3,"div",1),i.dc(4,"button",2),i.nc("click",function(){return e.decrease()}),i.Zb(5,"i",3),i.cc(),i.dc(6,"ngx-slider",4),i.nc("valueChange",function(t){return e.time=t})("valueChange",function(){return e.onSliderChange()}),i.cc(),i.dc(7,"button",2),i.nc("click",function(){return e.increase()}),i.Zb(8,"i",5),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Xc(e.timeLocale),i.Kb(4),i.yc("options",e.sliderOptions)("value",e.time))},encapsulation:2}),t})();const zu=i.fc(Ku);let Yu=(()=>{class t extends Ku{get code(){return t.CODE}decrease(){this.time-=1,this.time<t.MINIMUM_VALUE&&(this.time=t.MINIMUM_VALUE)}increase(){this.time+=1,this.time>t.MAXIMUM_VALUE&&(this.time=t.MAXIMUM_VALUE)}updateLocaleParameter(){this.timeLocale=u.a.instance.getLocalizationWithParameter("wiredfurni.params.allowafter","seconds",mu.getLocaleName(this.time))}get hasSpecialInputs(){return!0}get sliderOptions(){return{floor:t.MINIMUM_VALUE,ceil:t.MAXIMUM_VALUE,step:t.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.CODE=Eu.TIME_ELAPSED_MORE,t.\u0275fac=function(e){return Xu(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:9,vars:3,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","time",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"p",0),i.Wc(2),i.cc(),i.dc(3,"div",1),i.dc(4,"button",2),i.nc("click",function(){return e.decrease()}),i.Zb(5,"i",3),i.cc(),i.dc(6,"ngx-slider",4),i.nc("valueChange",function(t){return e.time=t})("valueChange",function(){return e.onSliderChange()}),i.cc(),i.dc(7,"button",2),i.nc("click",function(){return e.increase()}),i.Zb(8,"i",5),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Xc(e.timeLocale),i.Kb(4),i.yc("options",e.sliderOptions)("value",e.time))},encapsulation:2}),t})();const Xu=i.fc(Yu);let Zu=(()=>{class t extends fu{constructor(){super(...arguments),this.minUsers=0,this.maxUsers=0}get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}onEditStart(t){this.minUsers=t.intData[0]||1,this.maxUsers=t.intData[1]||50}readIntegerParamsFromForm(){return[this.minUsers,this.maxUsers]}decreaseMin(){this.minUsers-=1,this.minUsers<t.MINIMUM_VALUE&&(this.minUsers=t.MINIMUM_VALUE)}decreaseMax(){this.maxUsers-=1,this.maxUsers<t.MINIMUM_VALUE&&(this.maxUsers=t.MINIMUM_VALUE)}increaseMin(){this.minUsers+=1,this.minUsers>t.MAXIMUM_VALUE&&(this.minUsers=t.MAXIMUM_VALUE)}increaseMax(){this.maxUsers+=1,this.maxUsers>t.MAXIMUM_VALUE&&(this.maxUsers=t.MAXIMUM_VALUE)}get hasSpecialInputs(){return!0}get sliderOptions(){return{floor:t.MINIMUM_VALUE,ceil:t.MAXIMUM_VALUE,step:t.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.CODE=Eu.USER_COUNT_IN,t.NEGATIVE_CODE=Eu.NOT_USER_COUNT_IN,t.MINIMUM_VALUE=1,t.MAXIMUM_VALUE=50,t.STEPPER_VALUE=1,t.\u0275fac=function(e){return qu(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:19,vars:14,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","minUsers",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"],["name","maxUsers",3,"options","value","valueChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"p",0),i.Wc(2),i.rc(3,"translate"),i.cc(),i.dc(4,"div",1),i.dc(5,"button",2),i.nc("click",function(){return e.decreaseMin()}),i.Zb(6,"i",3),i.cc(),i.dc(7,"ngx-slider",4),i.nc("valueChange",function(t){return e.minUsers=t}),i.cc(),i.dc(8,"button",2),i.nc("click",function(){return e.increaseMin()}),i.Zb(9,"i",5),i.cc(),i.cc(),i.dc(10,"p",0),i.Wc(11),i.rc(12,"translate"),i.cc(),i.dc(13,"div",1),i.dc(14,"button",2),i.nc("click",function(){return e.decreaseMax()}),i.Zb(15,"i",3),i.cc(),i.dc(16,"ngx-slider",6),i.nc("valueChange",function(t){return e.maxUsers=t}),i.cc(),i.dc(17,"button",2),i.nc("click",function(){return e.increaseMax()}),i.Zb(18,"i",5),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Xc(i.uc(3,6,"wiredfurni.params.usercountmin","value",e.minUsers)),i.Kb(5),i.yc("options",e.sliderOptions)("value",e.minUsers),i.Kb(4),i.Xc(i.uc(12,10,"wiredfurni.params.usercountmax","value",e.maxUsers)),i.Kb(5),i.yc("options",e.sliderOptions)("value",e.maxUsers))},encapsulation:2}),t})();const qu=i.fc(Zu);class Qu{_Str_9781(t){switch(t){case Au.CODE:case Au.NEGATIVE_CODE:return Au;case xu.CODE:case xu.NEGATIVE_CODE:return xu;case Gu.CODE:case Gu.NEGATIVE_CODE:return Gu;case Yu.CODE:return Yu;case Ku.CODE:return Ku;case Zu.CODE:case Zu.NEGATIVE_CODE:return Zu;case vu.CODE:case vu.NEGATIVE_CODE:return vu;case Wu.CODE:return Wu;case Fu.CODE:case Fu.NEGATIVE_CODE:return Fu;case Bu.CODE:case Bu.NEGATIVE_CODE:return Bu;case Ru.CODE:case Ru.NEGATIVE_CODE:return Ru;case Mu.CODE:case Mu.NEGATIVE_CODE:return Mu;case Ou.CODE:case Ou.NEGATIVE_CODE:return Ou;case Nu.CODE:return Nu;case Du.CODE:return Du;case Su.CODE:return Su}return null}_Str_15652(t){return this._Str_9781(t)}_Str_14545(t){return t instanceof ou.a}_Str_1196(){return"condition"}}class Ju extends mu{}let $u=(()=>{class t{}return t.AVATAR_SAYS_SOMETHING=0,t.AVATAR_WALKS_ON_FURNI=1,t.AVATAR_WALKS_OFF_FURNI=2,t.TRIGGER_ONCE=3,t.TOGGLE_FURNI=4,t.TRIGGER_PERIODICALLY=6,t.AVATAR_ENTERS_ROOM=7,t.GAME_STARTS=8,t.GAME_ENDS=9,t.SCORE_ACHIEVED=10,t.COLLISION=11,t.TRIGGER_PERIODICALLY_LONG=12,t.BOT_REACHED_STUFF=13,t.BOT_REACHED_AVATAR=14,t})();function td(t,e){if(1&t){const t=i.ec();i.dc(0,"div",5),i.dc(1,"input",6),i.nc("ngModelChange",function(e){return i.Lc(t),i.qc().keyword=e}),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(1),i.yc("ngModel",t.keyword)}}let ed=(()=>{class t extends Ju{constructor(){super(...arguments),this.keyword="",this.avatar="0"}get code(){return t.CODE}onEditStart(t){this.keyword=t.stringData||"",this.avatar=this.keyword.length>0?"1":"0"}readStringParamFromForm(){return"1"===this.avatar&&this.keyword.length>0?this.keyword:""}get hasSpecialInputs(){return!0}}return t.CODE=$u.AVATAR_ENTERS_ROOM,t.\u0275fac=function(e){return sd(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:14,vars:12,consts:[[1,"form-check"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["class","form-group",4,"ngIf"],[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.Wc(1),i.rc(2,"translate"),i.dc(3,"div",0),i.dc(4,"input",1),i.nc("ngModelChange",function(t){return e.avatar=t}),i.cc(),i.dc(5,"label",2),i.Wc(6),i.rc(7,"translate"),i.cc(),i.cc(),i.dc(8,"div",0),i.dc(9,"input",3),i.nc("ngModelChange",function(t){return e.avatar=t}),i.cc(),i.dc(10,"label",2),i.Wc(11),i.rc(12,"translate"),i.cc(),i.cc(),i.Uc(13,td,2,1,"div",4),i.cc()),2&t&&(i.Kb(1),i.Yc(" ",i.sc(2,6,"wiredfurni.params.picktriggerer")," "),i.Kb(3),i.yc("ngModel",e.avatar),i.Kb(2),i.Xc(i.sc(7,8,"wiredfurni.params.anyavatar")),i.Kb(3),i.yc("ngModel",e.avatar),i.Kb(2),i.Xc(i.sc(12,10,"wiredfurni.params.certainavatar")),i.Kb(2),i.yc("ngIf","1"===e.avatar))},encapsulation:2}),t})();const sd=i.fc(ed);let id=(()=>{class t extends Ju{constructor(){super(...arguments),this.keyword="",this.avatar="0"}get code(){return t.CODE}onEditStart(t){this.keyword=t.stringData||"",this.avatar=t.intData.length>0&&1===t.intData[0]?"1":"0"}readIntegerParamsFromForm(){return["1"===this.avatar?1:0]}readStringParamFromForm(){return this.keyword}get hasSpecialInputs(){return!0}get username(){return u.a.instance.sessionDataManager.userName}}return t.CODE=$u.AVATAR_SAYS_SOMETHING,t.\u0275fac=function(e){return nd(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:17,vars:13,consts:[[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"form-check"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"label"),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",1),i.nc("ngModelChange",function(t){return e.keyword=t}),i.cc(),i.cc(),i.Wc(6),i.rc(7,"translate"),i.dc(8,"div",2),i.dc(9,"input",3),i.nc("ngModelChange",function(t){return e.avatar=t}),i.cc(),i.dc(10,"label",4),i.Wc(11),i.rc(12,"translate"),i.cc(),i.cc(),i.dc(13,"div",2),i.dc(14,"input",5),i.nc("ngModelChange",function(t){return e.avatar=t}),i.cc(),i.dc(15,"label",4),i.Wc(16),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Xc(i.sc(4,7,"wiredfurni.params.whatissaid")),i.Kb(2),i.yc("ngModel",e.keyword),i.Kb(1),i.Yc(" ",i.sc(7,9,"wiredfurni.params.picktriggerer")," "),i.Kb(3),i.yc("ngModel",e.avatar),i.Kb(2),i.Xc(i.sc(12,11,"wiredfurni.params.anyavatar")),i.Kb(3),i.yc("ngModel",e.avatar),i.Kb(2),i.Xc(e.username))},encapsulation:2}),t})();const nd=i.fc(id);let rd=(()=>{class t extends Ju{get code(){return t.CODE}get requiresFurni(){return xg._Str_4991}}return t.CODE=$u.AVATAR_WALKS_OFF_FURNI,t.\u0275fac=function(e){return ad(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:0,template:function(t,e){1&t&&i.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const ad=i.fc(rd);let od=(()=>{class t extends Ju{get code(){return t.CODE}get requiresFurni(){return xg._Str_4991}}return t.CODE=$u.AVATAR_WALKS_ON_FURNI,t.\u0275fac=function(e){return cd(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:0,template:function(t,e){1&t&&i.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const cd=i.fc(od);let _d=(()=>{class t extends Ju{constructor(){super(...arguments),this.keyword=""}get code(){return t.CODE}get requiresFurni(){return xg._Str_5431}onEditStart(t){this.keyword=t.stringData}readStringParamFromForm(){return this.keyword}get hasSpecialInputs(){return!0}}return t.CODE=$u.BOT_REACHED_AVATAR,t.\u0275fac=function(e){return hd(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:6,vars:4,consts:[[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"label"),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",1),i.nc("ngModelChange",function(t){return e.keyword=t}),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Xc(i.sc(4,2,"wiredfurni.params.bot.name")),i.Kb(2),i.yc("ngModel",e.keyword))},encapsulation:2}),t})();const hd=i.fc(_d);let ld=(()=>{class t extends Ju{constructor(){super(...arguments),this.keyword=""}get code(){return t.CODE}get requiresFurni(){return xg._Str_4991}onEditStart(t){this.keyword=t.stringData}readStringParamFromForm(){return this.keyword}get hasSpecialInputs(){return!0}}return t.CODE=$u.BOT_REACHED_STUFF,t.\u0275fac=function(e){return ud(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:6,vars:4,consts:[[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"label"),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",1),i.nc("ngModelChange",function(t){return e.keyword=t}),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Xc(i.sc(4,2,"wiredfurni.params.bot.name")),i.Kb(2),i.yc("ngModel",e.keyword))},encapsulation:2}),t})();const ud=i.fc(ld);let dd=(()=>{class t extends Ju{get code(){return t.CODE}}return t.CODE=$u.COLLISION,t.\u0275fac=function(e){return gd(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:0,template:function(t,e){1&t&&i.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const gd=i.fc(dd);let md=(()=>{class t extends Ju{get code(){return t.CODE}}return t.CODE=$u.GAME_ENDS,t.\u0275fac=function(e){return pd(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:0,template:function(t,e){1&t&&i.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const pd=i.fc(md);let fd=(()=>{class t extends Ju{get code(){return t.CODE}}return t.CODE=$u.GAME_STARTS,t.\u0275fac=function(e){return Ed(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:0,template:function(t,e){1&t&&i.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const Ed=i.fc(fd);let Sd=(()=>{class t extends Ju{constructor(){super(...arguments),this.score=0}get code(){return t.CODE}onEditStart(t){this.score=t.intData[0]||0}readIntegerParamsFromForm(){return[this.score]}decrease(){this.score-=1,this.score<t.MINIMUM_VALUE&&(this.score=t.MINIMUM_VALUE)}increase(){this.score+=1,this.score>t.MAXIMUM_VALUE&&(this.score=t.MAXIMUM_VALUE)}get hasSpecialInputs(){return!0}get sliderOptions(){return{floor:t.MINIMUM_VALUE,ceil:t.MAXIMUM_VALUE,step:t.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.MINIMUM_VALUE=1,t.MAXIMUM_VALUE=1e3,t.STEPPER_VALUE=1,t.CODE=$u.SCORE_ACHIEVED,t.\u0275fac=function(e){return Id(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:10,vars:7,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","time",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"p",0),i.Wc(2),i.rc(3,"translate"),i.cc(),i.dc(4,"div",1),i.dc(5,"button",2),i.nc("click",function(){return e.decrease()}),i.Zb(6,"i",3),i.cc(),i.dc(7,"ngx-slider",4),i.nc("valueChange",function(t){return e.score=t}),i.cc(),i.dc(8,"button",2),i.nc("click",function(){return e.increase()}),i.Zb(9,"i",5),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Xc(i.uc(3,3,"wiredfurni.params.setscore","points",e.score)),i.Kb(5),i.yc("options",e.sliderOptions)("value",e.score))},encapsulation:2}),t})();const Id=i.fc(Sd);let Rd=(()=>{class t extends Ju{get code(){return t.CODE}get requiresFurni(){return xg._Str_4991}}return t.CODE=$u.TOGGLE_FURNI,t.\u0275fac=function(e){return bd(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:0,template:function(t,e){1&t&&i.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const bd=i.fc(Rd);let vd=(()=>{class t extends Ju{constructor(){super(...arguments),this.time=0,this.timeLocale=""}get code(){return t.CODE}onEditStart(t){this.time=t.intData[0]||1,this.updateLocaleParameter()}readIntegerParamsFromForm(){return[this.time]}onSliderChange(){this.updateLocaleParameter()}decrease(){this.time-=1,this.time<t.MINIMUM_VALUE&&(this.time=t.MINIMUM_VALUE)}increase(){this.time+=1,this.time>t.MAXIMUM_VALUE&&(this.time=t.MAXIMUM_VALUE)}updateLocaleParameter(){this.timeLocale=u.a.instance.getLocalizationWithParameter("wiredfurni.params.settime","seconds",mu.getLocaleName(this.time))}get hasSpecialInputs(){return!0}get sliderOptions(){return{floor:t.MINIMUM_VALUE,ceil:t.MAXIMUM_VALUE,step:t.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.MINIMUM_VALUE=1,t.MAXIMUM_VALUE=1200,t.STEPPER_VALUE=1,t.CODE=$u.TRIGGER_ONCE,t.\u0275fac=function(e){return Td(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:9,vars:3,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","time",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"p",0),i.Wc(2),i.cc(),i.dc(3,"div",1),i.dc(4,"button",2),i.nc("click",function(){return e.decrease()}),i.Zb(5,"i",3),i.cc(),i.dc(6,"ngx-slider",4),i.nc("valueChange",function(t){return e.time=t})("valueChange",function(){return e.onSliderChange()}),i.cc(),i.dc(7,"button",2),i.nc("click",function(){return e.increase()}),i.Zb(8,"i",5),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Xc(e.timeLocale),i.Kb(4),i.yc("options",e.sliderOptions)("value",e.time))},encapsulation:2}),t})();const Td=i.fc(vd);let Od=(()=>{class t extends vd{get code(){return t.CODE}increase(){this.time+=1,this.time>t.MAXIMUM_VALUE&&(this.time=t.MAXIMUM_VALUE)}get sliderOptions(){return{floor:t.MINIMUM_VALUE,ceil:t.MAXIMUM_VALUE,step:t.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.MAXIMUM_VALUE=120,t.CODE=$u.TRIGGER_PERIODICALLY,t.\u0275fac=function(e){return yd(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:9,vars:3,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","time",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"p",0),i.Wc(2),i.cc(),i.dc(3,"div",1),i.dc(4,"button",2),i.nc("click",function(){return e.decrease()}),i.Zb(5,"i",3),i.cc(),i.dc(6,"ngx-slider",4),i.nc("valueChange",function(t){return e.time=t})("valueChange",function(){return e.onSliderChange()}),i.cc(),i.dc(7,"button",2),i.nc("click",function(){return e.increase()}),i.Zb(8,"i",5),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Xc(e.timeLocale),i.Kb(4),i.yc("options",e.sliderOptions)("value",e.time))},encapsulation:2}),t})();const yd=i.fc(Od);let Ad=(()=>{class t extends Od{get code(){return t.CODE}updateLocaleParameter(){this.timeLocale=u.a.instance.getLocalizationWithParameter("wiredfurni.params.setlongtime","time",Sl.format(5*this.time))}}return t.CODE=$u.TRIGGER_PERIODICALLY_LONG,t.\u0275fac=function(e){return Cd(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:9,vars:3,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","time",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"p",0),i.Wc(2),i.cc(),i.dc(3,"div",1),i.dc(4,"button",2),i.nc("click",function(){return e.decrease()}),i.Zb(5,"i",3),i.cc(),i.dc(6,"ngx-slider",4),i.nc("valueChange",function(t){return e.time=t})("valueChange",function(){return e.onSliderChange()}),i.cc(),i.dc(7,"button",2),i.nc("click",function(){return e.increase()}),i.Zb(8,"i",5),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Xc(e.timeLocale),i.Kb(4),i.yc("options",e.sliderOptions)("value",e.time))},encapsulation:2}),t})();const Cd=i.fc(Ad);class Md{_Str_9781(t){switch(t){case id.CODE:return id;case od.CODE:return od;case rd.CODE:return rd;case vd.CODE:return vd;case Rd.CODE:return Rd;case Od.CODE:return Od;case ed.CODE:return ed;case fd.CODE:return fd;case md.CODE:return md;case Sd.CODE:return Sd;case dd.CODE:return dd;case Ad.CODE:return Ad;case ld.CODE:return ld;case _d.CODE:return _d}return null}_Str_15652(t){return this._Str_9781(t)}_Str_14545(t){return t instanceof cu.a}_Str_1196(){return"trigger"}}let Ud=(()=>{class t{}return t.TOGGLE_FURNI_STATE=0,t.RESET=1,t.SET_FURNI_STATE=3,t.MOVE_FURNI=4,t.GIVE_SCORE=6,t.CHAT=7,t.TELEPORT=8,t.JOIN_TEAM=9,t.LEAVE_TEAM=10,t.CHASE=11,t.FLEE=12,t.MOVE_TO_DIRECTION=13,t.GIVE_SCORE_TO_PREDEFINED_TEAM=14,t.TOGGLE_TO_RANDOM_STATE=15,t.MOVE_FURNI_TO=16,t.GIVE_REWARD=17,t.CALL_ANOTHER_STACK=18,t.KICK_FROM_ROOM=19,t.MUTE_USER=20,t.BOT_TELEPORT=21,t.BOT_MOVE=22,t.BOT_TALK=23,t.BOT_GIVE_HAND_ITEM=24,t.BOT_FOLLOW_AVATAR=25,t.BOT_CHANGE_FIGURE=26,t.BOT_TALK_DIRECT_TO_AVTR=27,t})(),Dd=(()=>{class t extends pu{constructor(){super(...arguments),this.defaultFigure="hd-180-1.ch-210-66.lg-270-82.sh-290-81"}get code(){return t.CODE}onEditStart(e){const s=e.stringData.split(t.DELIMETER);s.length>0&&(this.botName=s[0]),s.length>1&&(this.figure=s[1].length>0?s[1]:this.defaultFigure),super.onEditStart(e)}readStringParamFromForm(){return this.botName+t.DELIMETER+this.figure}get hasSpecialInputs(){return!0}get requiresFurni(){return xg._Str_5431}copyLook(){this.figure=u.a.instance.sessionDataManager.figure}}return t.CODE=Ud.BOT_CHANGE_FIGURE,t.DELIMETER="\t",t.\u0275fac=function(e){return wd(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:13,vars:10,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"row","mb-1"],[1,"col-md-6"],["nitro-avatar-image","",3,"figure","direction"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"label"),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",2),i.nc("ngModelChange",function(t){return e.botName=t}),i.cc(),i.cc(),i.dc(6,"div",3),i.dc(7,"div",4),i.Zb(8,"div",5),i.cc(),i.dc(9,"div",4),i.dc(10,"button",6),i.nc("click",function(){return e.copyLook()}),i.Wc(11),i.rc(12,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.yc("delay",e.delay),i.Kb(3),i.Xc(i.sc(4,6,"wiredfurni.params.bot.name")),i.Kb(2),i.yc("ngModel",e.botName),i.Kb(3),i.yc("figure",e.figure)("direction",2),i.Kb(3),i.Xc(i.sc(12,8,"wiredfurni.params.capture.figure")))},encapsulation:2}),t})();const wd=i.fc(Dd);let Nd=(()=>{class t extends pu{constructor(){super(...arguments),this.followMode="0"}get code(){return t.CODE}onEditStart(t){this.botName=t.stringData,this.followMode=t.intData.length>0?t.intData[0].toString():"0",super.onEditStart(t)}readStringParamFromForm(){return this.botName}readIntegerParamsFromForm(){return[Number.parseInt(this.followMode)]}get hasSpecialInputs(){return!0}}return t.CODE=Ud.BOT_FOLLOW_AVATAR,t.\u0275fac=function(e){return Ld(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:16,vars:13,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"form-check"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"label"),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",2),i.nc("ngModelChange",function(t){return e.botName=t}),i.cc(),i.cc(),i.dc(6,"div",3),i.dc(7,"input",4),i.nc("ngModelChange",function(t){return e.followMode=t}),i.cc(),i.dc(8,"label",5),i.Wc(9),i.rc(10,"translate"),i.cc(),i.cc(),i.dc(11,"div",3),i.dc(12,"input",6),i.nc("ngModelChange",function(t){return e.followMode=t}),i.cc(),i.dc(13,"label",5),i.Wc(14),i.rc(15,"translate"),i.cc(),i.cc(),i.cc()),2&t&&(i.yc("delay",e.delay),i.Kb(3),i.Xc(i.sc(4,7,"wiredfurni.params.bot.name")),i.Kb(2),i.yc("ngModel",e.botName),i.Kb(2),i.yc("ngModel",e.followMode),i.Kb(2),i.Xc(i.sc(10,9,"wiredfurni.params.start.following")),i.Kb(3),i.yc("ngModel",e.followMode),i.Kb(2),i.Xc(i.sc(15,11,"wiredfurni.params.stop.following")))},encapsulation:2}),t})();const Ld=i.fc(Nd);let xd=(()=>{class t extends pu{constructor(){super(...arguments),this.allowedHanditemIds=["2","5","7","8","9","10","27"],this.handitemId="0"}get code(){return t.CODE}onEditStart(t){this.botName=t.stringData,this.handitemId=t.intData.length>0&&this.allowedHanditemIds.includes(t.intData[0].toString())?t.intData[0].toString():"0",super.onEditStart(t)}readStringParamFromForm(){return this.botName}readIntegerParamsFromForm(){return[Number.parseInt(this.handitemId)]}get hasSpecialInputs(){return!0}}return t.CODE=Ud.BOT_GIVE_HAND_ITEM,t.\u0275fac=function(e){return Pd(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:35,vars:41,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","0",3,"selected"],["value","2",3,"selected"],["value","5",3,"selected"],["value","7",3,"selected"],["value","8",3,"selected"],["value","9",3,"selected"],["value","10",3,"selected"],["value","27",3,"selected"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"label"),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",2),i.nc("ngModelChange",function(t){return e.botName=t}),i.cc(),i.cc(),i.dc(6,"div",1),i.dc(7,"label"),i.Wc(8),i.rc(9,"translate"),i.cc(),i.dc(10,"select",3),i.nc("ngModelChange",function(t){return e.handitemId=t}),i.dc(11,"option",4),i.Wc(12),i.rc(13,"translate"),i.cc(),i.dc(14,"option",5),i.Wc(15),i.rc(16,"translate"),i.cc(),i.dc(17,"option",6),i.Wc(18),i.rc(19,"translate"),i.cc(),i.dc(20,"option",7),i.Wc(21),i.rc(22,"translate"),i.cc(),i.dc(23,"option",8),i.Wc(24),i.rc(25,"translate"),i.cc(),i.dc(26,"option",9),i.Wc(27),i.rc(28,"translate"),i.cc(),i.dc(29,"option",10),i.Wc(30),i.rc(31,"translate"),i.cc(),i.dc(32,"option",11),i.Wc(33),i.rc(34,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.yc("delay",e.delay),i.Kb(3),i.Xc(i.sc(4,21,"wiredfurni.params.bot.name")),i.Kb(2),i.yc("ngModel",e.botName),i.Kb(3),i.Xc(i.sc(9,23,"wiredfurni.params.handitem")),i.Kb(2),i.yc("ngModel",e.handitemId),i.Kb(1),i.yc("selected","0"==e.handitemId),i.Kb(1),i.Xc(i.sc(13,25,"wiredfurni.tooltip.handitem")),i.Kb(2),i.yc("selected","2"==e.handitemId),i.Kb(1),i.Xc(i.sc(16,27,"handitem2")),i.Kb(2),i.yc("selected","5"==e.handitemId),i.Kb(1),i.Xc(i.sc(19,29,"handitem5")),i.Kb(2),i.yc("selected","7"==e.handitemId),i.Kb(1),i.Xc(i.sc(22,31,"handitem7")),i.Kb(2),i.yc("selected","8"==e.handitemId),i.Kb(1),i.Xc(i.sc(25,33,"handitem8")),i.Kb(2),i.yc("selected","9"==e.handitemId),i.Kb(1),i.Xc(i.sc(28,35,"handitem9")),i.Kb(2),i.yc("selected","10"==e.handitemId),i.Kb(1),i.Xc(i.sc(31,37,"handitem10")),i.Kb(2),i.yc("selected","27"==e.handitemId),i.Kb(1),i.Xc(i.sc(34,39,"handitem27")))},encapsulation:2}),t})();const Pd=i.fc(xd);let Fd=(()=>{class t extends pu{get code(){return t.CODE}onEditStart(t){this.botName=t.stringData,super.onEditStart(t)}readStringParamFromForm(){return this.botName}get hasSpecialInputs(){return!0}get requiresFurni(){return xg._Str_4873}}return t.CODE=Ud.BOT_MOVE,t.\u0275fac=function(e){return kd(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:6,vars:5,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"label"),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",2),i.nc("ngModelChange",function(t){return e.botName=t}),i.cc(),i.cc(),i.cc()),2&t&&(i.yc("delay",e.delay),i.Kb(3),i.Xc(i.sc(4,3,"wiredfurni.params.bot.name")),i.Kb(2),i.yc("ngModel",e.botName))},encapsulation:2}),t})();const kd=i.fc(Fd);let Wd=(()=>{class t extends pu{get code(){return t.CODE}onEditStart(e){const s=e.stringData.split(t.DELIMETER);this.botName=s.length>=1?s[0]:"",this.message=2==s.length?s[1]:"",this.mode=e.intData.length>0?e.intData[0].toString():"0",super.onEditStart(e)}get hasSpecialInputs(){return!0}get requiresFurni(){return xg._Str_5431}readStringParamFromForm(){return this.botName+t.DELIMETER+this.message}readIntegerParamsFromForm(){return[Number.parseInt(this.mode)]}}return t.CODE=Ud.BOT_TALK_DIRECT_TO_AVTR,t.DELIMETER="\t",t.\u0275fac=function(e){return Vd(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:21,vars:17,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","text","maxlength","64",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"form-check"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"label"),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",2),i.nc("ngModelChange",function(t){return e.botName=t}),i.cc(),i.cc(),i.dc(6,"div",1),i.dc(7,"label"),i.Wc(8),i.rc(9,"translate"),i.cc(),i.dc(10,"input",3),i.nc("ngModelChange",function(t){return e.message=t}),i.cc(),i.cc(),i.dc(11,"div",4),i.dc(12,"input",5),i.nc("ngModelChange",function(t){return e.mode=t}),i.cc(),i.dc(13,"label",6),i.Wc(14),i.rc(15,"translate"),i.cc(),i.cc(),i.dc(16,"div",4),i.dc(17,"input",7),i.nc("ngModelChange",function(t){return e.mode=t}),i.cc(),i.dc(18,"label",6),i.Wc(19),i.rc(20,"translate"),i.cc(),i.cc(),i.cc()),2&t&&(i.yc("delay",e.delay),i.Kb(3),i.Xc(i.sc(4,9,"wiredfurni.params.bot.name")),i.Kb(2),i.yc("ngModel",e.botName),i.Kb(3),i.Xc(i.sc(9,11,"wiredfurni.params.message")),i.Kb(2),i.yc("ngModel",e.message),i.Kb(2),i.yc("ngModel",e.mode),i.Kb(2),i.Xc(i.sc(15,13,"wiredfurni.params.whisper")),i.Kb(3),i.yc("ngModel",e.mode),i.Kb(2),i.Xc(i.sc(20,15,"wiredfurni.params.talk")))},encapsulation:2}),t})();const Vd=i.fc(Wd);let Gd=(()=>{class t extends pu{get code(){return t.CODE}onEditStart(e){const s=e.stringData.split(t.DELIMETER);this.botName=s.length>=1?s[0]:"",this.message=2==s.length?s[1]:"",this.mode=e.intData.length>0?e.intData[0].toString():"0",super.onEditStart(e)}get hasSpecialInputs(){return!0}get requiresFurni(){return xg._Str_5431}readStringParamFromForm(){return this.botName+t.DELIMETER+this.message}readIntegerParamsFromForm(){return[Number.parseInt(this.mode)]}}return t.CODE=Ud.BOT_TALK,t.DELIMETER="\t",t.\u0275fac=function(e){return Hd(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:21,vars:17,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","text","maxlength","64",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"form-check"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"label"),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",2),i.nc("ngModelChange",function(t){return e.botName=t}),i.cc(),i.cc(),i.dc(6,"div",1),i.dc(7,"label"),i.Wc(8),i.rc(9,"translate"),i.cc(),i.dc(10,"input",3),i.nc("ngModelChange",function(t){return e.message=t}),i.cc(),i.cc(),i.dc(11,"div",4),i.dc(12,"input",5),i.nc("ngModelChange",function(t){return e.mode=t}),i.cc(),i.dc(13,"label",6),i.Wc(14),i.rc(15,"translate"),i.cc(),i.cc(),i.dc(16,"div",4),i.dc(17,"input",7),i.nc("ngModelChange",function(t){return e.mode=t}),i.cc(),i.dc(18,"label",6),i.Wc(19),i.rc(20,"translate"),i.cc(),i.cc(),i.cc()),2&t&&(i.yc("delay",e.delay),i.Kb(3),i.Xc(i.sc(4,9,"wiredfurni.params.bot.name")),i.Kb(2),i.yc("ngModel",e.botName),i.Kb(3),i.Xc(i.sc(9,11,"wiredfurni.params.message")),i.Kb(2),i.yc("ngModel",e.message),i.Kb(2),i.yc("ngModel",e.mode),i.Kb(2),i.Xc(i.sc(15,13,"wiredfurni.params.talk")),i.Kb(3),i.yc("ngModel",e.mode),i.Kb(2),i.Xc(i.sc(20,15,"wiredfurni.params.shout")))},encapsulation:2}),t})();const Hd=i.fc(Gd);let Bd=(()=>{class t extends pu{get code(){return t.CODE}onEditStart(t){this.botName=t.stringData,super.onEditStart(t)}readStringParamFromForm(){return this.botName}get hasSpecialInputs(){return!0}get requiresFurni(){return xg._Str_4873}}return t.CODE=Ud.BOT_TELEPORT,t.\u0275fac=function(e){return jd(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:6,vars:5,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"label"),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",2),i.nc("ngModelChange",function(t){return e.botName=t}),i.cc(),i.cc(),i.cc()),2&t&&(i.yc("delay",e.delay),i.Kb(3),i.Xc(i.sc(4,3,"wiredfurni.params.bot.name")),i.Kb(2),i.yc("ngModel",e.botName))},encapsulation:2}),t})();const jd=i.fc(Bd);let Kd=(()=>{class t extends pu{get code(){return t.CODE}get requiresFurni(){return xg._Str_5430}}return t.CODE=Ud.CALL_ANOTHER_STACK,t.\u0275fac=function(e){return zd(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.cc()),2&t&&i.yc("delay",e.delay)},encapsulation:2}),t})();const zd=i.fc(Kd);let Yd=(()=>{class t extends pu{get code(){return t.CODE}get requiresFurni(){return xg._Str_5430}}return t.CODE=Ud.CHASE,t.\u0275fac=function(e){return Xd(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.cc()),2&t&&i.yc("delay",e.delay)},encapsulation:2}),t})();const Xd=i.fc(Yd);let Zd=(()=>{class t extends pu{get code(){return t.CODE}get hasSpecialInputs(){return!0}readStringParamFromForm(){return this.message}onEditStart(t){this.message=t.stringData,super.onEditStart(t)}validate(){return this.message.length>100?u.a.instance.localization.getValue("wiredfurni.chatmsgtoolong",!1):null}}return t.CODE=Ud.CHAT,t.\u0275fac=function(e){return qd(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:6,vars:5,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"label"),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",2),i.nc("ngModelChange",function(t){return e.message=t}),i.cc(),i.cc(),i.cc()),2&t&&(i.yc("delay",e.delay),i.Kb(3),i.Xc(i.sc(4,3,"wiredfurni.params.message")),i.Kb(2),i.yc("ngModel",e.message))},encapsulation:2}),t})();const qd=i.fc(Zd);let Qd=(()=>{class t extends pu{get code(){return t.CODE}get requiresFurni(){return xg._Str_5430}}return t.CODE=Ud.FLEE,t.\u0275fac=function(e){return Jd(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.cc()),2&t&&i.yc("delay",e.delay)},encapsulation:2}),t})();const Jd=i.fc(Qd);function $d(t,e){if(1&t){const t=i.ec();i.dc(0,"div",16),i.dc(1,"button",17),i.nc("click",function(){return i.Lc(t),i.qc().decreaseLimit()}),i.Zb(2,"i",18),i.cc(),i.dc(3,"ngx-slider",19),i.nc("valueChange",function(e){return i.Lc(t),i.qc().rewardsLimit=e}),i.cc(),i.dc(4,"button",17),i.nc("click",function(){return i.Lc(t),i.qc().increaseLimit()}),i.Zb(5,"i",20),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.yc("options",t.limitSliderOptions)("value",t.rewardsLimit)}}function tg(t,e){if(1&t){const t=i.ec();i.dc(0,"div",21),i.dc(1,"label"),i.Wc(2,"Interval value"),i.cc(),i.dc(3,"input",22),i.nc("ngModelChange",function(e){return i.Lc(t),i.qc().limitationInterval=e}),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.yc("ngModel",t.limitationInterval)}}function eg(t,e){1&t&&(i.dc(0,"td"),i.dc(1,"small"),i.Wc(2,"Probability"),i.cc(),i.cc())}function sg(t,e){if(1&t){const t=i.ec();i.dc(0,"td"),i.dc(1,"input",22),i.nc("ngModelChange",function(e){i.Lc(t);const s=i.qc().index;return i.qc().rewardRows[s].probability=e}),i.cc(),i.cc()}if(2&t){const t=i.qc().index,e=i.qc();i.Kb(1),i.yc("ngModel",e.rewardRows[t].probability)}}function ig(t,e){if(1&t){const t=i.ec();i.dc(0,"tr"),i.dc(1,"td"),i.dc(2,"input",23),i.nc("ngModelChange",function(s){i.Lc(t);const n=e.index;return i.qc().rewardRows[n].badge=s}),i.cc(),i.cc(),i.dc(3,"td"),i.dc(4,"input",22),i.nc("ngModelChange",function(s){i.Lc(t);const n=e.index;return i.qc().rewardRows[n].itemCode=s}),i.cc(),i.cc(),i.Uc(5,sg,2,1,"td",12),i.cc()}if(2&t){const t=e.index,s=i.qc();i.Kb(2),i.yc("ngModel",s.rewardRows[t].badge),i.Kb(2),i.yc("ngModel",s.rewardRows[t].itemCode),i.Kb(1),i.yc("ngIf",0==s.uniqueRewards)}}let ng=(()=>{class t extends pu{constructor(){super(...arguments),this.SETTING_ONCE="0",this.SETTING_N_MINS="3",this.SETTING_N_HOURS="2",this.SETTING_N_DAYS="1",this.limitationInterval="1",this.uniqueRewards=!1,this.rewardRows=[]}get code(){return t.CODE}onEditStart(t){if(this.rewardTime=(t.intData.length>0?t.intData[0]:0).toString(),this.uniqueRewards=t.intData.length>1&&1==t.intData[1],this.rewardsLimit=t.intData.length>2?t.intData[2]:0,this.limitationInterval=t.intData.length>3?t.intData[3].toString():"",this.limitEnabled=this.limitationInterval.length>0,t.stringData.length>0&&t.stringData.includes(";")&&t.stringData.split(";").forEach(t=>{if(t.length>0&&t.includes(",")){const e=t.split(",");3==e.length&&this.rewardRows.push({badge:"0"==e[0],itemCode:e[1],probability:e[2]})}}),this.rewardRows.length<4)for(let e=this.rewardRows.length;e<4;e++)this.rewardRows.push({badge:!1,itemCode:"",probability:""});super.onEditStart(t)}readIntegerParamsFromForm(){return[Number.parseInt(this.rewardTime),this.uniqueRewards?1:0,this.rewardsLimit,Number.parseInt(this.limitationInterval)]}readStringParamFromForm(){let t="";for(let e=0;e<this.rewardRows.length;e++){const s=this.rewardRows[e];""!=s.itemCode&&(t=t+(""==t?"":";")+[s.badge?0:1,s.itemCode,s.probability.toString()].join(","))}return t}decreaseLimit(){this.rewardsLimit-=1,this.rewardsLimit<t.LIMIT_MINIMUM_VALUE&&(this.rewardsLimit=t.LIMIT_MINIMUM_VALUE)}increaseLimit(){this.rewardsLimit+=1,this.rewardsLimit>t.LIMIT_MAXIMUM_VALUE&&(this.rewardsLimit=t.LIMIT_MAXIMUM_VALUE)}increaseRewardsCount(){this.rewardRows.push({badge:!1,itemCode:"",probability:""})}get limitSliderOptions(){return{floor:t.LIMIT_MINIMUM_VALUE,ceil:t.LIMIT_MAXIMUM_VALUE,step:t.LIMIT_STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}get hasIntervalValue(){return this.rewardTime==this.SETTING_N_DAYS||this.rewardTime==this.SETTING_N_HOURS||this.rewardTime==this.SETTING_N_MINS}validate(){let t=0;if(this.limitationInterval.trim().length>0&&isNaN(Number.parseInt(this.limitationInterval)))return"The interval value has to be a number.";for(let e=0;e<this.rewardRows.length;e++){const s=this.rewardRows[e];if(0!=s.itemCode.trim().length||0!=s.probability.trim().length){if(s.itemCode.includes(","))return"Product/badge codes must not contain ',' characters.";if(s.itemCode.includes(";"))return"Product/badge codes must not contain ';' characters.";if(s.itemCode.length>100)return"Product/badge codes cannot contain more than 100 characters.";if(""==s.itemCode)return"Remember to define product/badge codes for all rewards (fill all fields or leave all fields empty).";if(!this.uniqueRewards){if(""==s.probability)return"Remember to define probabilities for all rewards (fill all fields or leave all fields empty).";const e=Number.parseInt(s.probability);if(isNaN(e))return"Make sure all probabilities are numbers.";if(e<1||e>100)return"Make sure all probabilities are numbers between 1 and 100.";t+=e}}}return t>100?`The sum of probabilities cannot exceed 100. You now have ${t}.`:null}}return t.LIMIT_MINIMUM_VALUE=1,t.LIMIT_MAXIMUM_VALUE=1e3,t.LIMIT_STEPPER_VALUE=1,t.CODE=Ud.GIVE_REWARD,t.\u0275fac=function(e){return rg(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:40,vars:23,consts:[[3,"delay","delayChange"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["class","d-flex align-items-center justify-content-center my-2 custom-slider mb-2",4,"ngIf"],[1,"form-group"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"value","selected"],["class","form-group mb-2",4,"ngIf"],[1,"w-100","text-center","mb-2"],[1,"form-row","mb-2"],[2,"min-height","200px","max-height","200px"],[4,"ngIf"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary","btn-sm","mb-2",3,"click"],[1,"fas","fa-plus"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider","mb-2"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","limit",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"],[1,"form-group","mb-2"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","checkbox",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"input",2),i.nc("ngModelChange",function(t){return e.limitEnabled=t}),i.cc(),i.dc(3,"label",3),i.Wc(4),i.rc(5,"translate"),i.cc(),i.cc(),i.Uc(6,$d,6,2,"div",4),i.dc(7,"div",5),i.dc(8,"label"),i.Wc(9,"How often can a user be rewarded"),i.cc(),i.dc(10,"select",6),i.nc("ngModelChange",function(t){return e.rewardTime=t}),i.dc(11,"option",7),i.Wc(12,"Once"),i.cc(),i.dc(13,"option",7),i.Wc(14,"1/n minutes"),i.cc(),i.dc(15,"option",7),i.Wc(16,"1/n hours"),i.cc(),i.dc(17,"option",7),i.Wc(18,"1/n days"),i.cc(),i.cc(),i.cc(),i.Uc(19,tg,4,1,"div",8),i.dc(20,"div",1),i.dc(21,"input",2),i.nc("ngModelChange",function(t){return e.uniqueRewards=t}),i.cc(),i.dc(22,"label",3),i.Wc(23,"Unique Rewards"),i.cc(),i.cc(),i.dc(24,"p",9),i.Wc(25,"If checked each reward will be given once to each user. This will disable the probabilities option."),i.cc(),i.dc(26,"div",10),i.dc(27,"perfect-scrollbar",11),i.dc(28,"table"),i.dc(29,"tr"),i.dc(30,"td"),i.dc(31,"small"),i.Wc(32,"Badge"),i.cc(),i.cc(),i.dc(33,"td"),i.dc(34,"small"),i.Wc(35,"Item code"),i.cc(),i.cc(),i.Uc(36,eg,3,0,"td",12),i.cc(),i.Uc(37,ig,6,3,"tr",13),i.cc(),i.cc(),i.cc(),i.dc(38,"button",14),i.nc("click",function(){return e.increaseRewardsCount()}),i.Zb(39,"i",15),i.cc(),i.cc()),2&t&&(i.yc("delay",e.delay),i.Kb(2),i.yc("ngModel",e.limitEnabled),i.Kb(2),i.Xc(i.uc(5,19,"wiredfurni.params.prizelimit","amount",e.rewardsLimit>0?e.rewardsLimit:"")),i.Kb(2),i.yc("ngIf",e.limitEnabled),i.Kb(4),i.Qb("mb-2",!e.hasIntervalValue),i.yc("ngModel",e.rewardTime),i.Kb(1),i.yc("value",e.SETTING_ONCE)("selected",e.rewardTime==e.SETTING_ONCE),i.Kb(2),i.yc("value",e.SETTING_N_MINS)("selected",e.rewardTime==e.SETTING_N_MINS),i.Kb(2),i.yc("value",e.SETTING_N_HOURS)("selected",e.rewardTime==e.SETTING_N_HOURS),i.Kb(2),i.yc("value",e.SETTING_N_DAYS)("selected",e.rewardTime==e.SETTING_N_DAYS),i.Kb(2),i.yc("ngIf",e.hasIntervalValue),i.Kb(2),i.yc("ngModel",e.uniqueRewards),i.Kb(15),i.yc("ngIf",0==e.uniqueRewards),i.Kb(1),i.yc("ngForOf",e.rewardRows))},encapsulation:2}),t})();const rg=i.fc(ng);let ag=(()=>{class t extends pu{constructor(){super(...arguments),this.points=1,this.times=1}get code(){return t.CODE}onEditStart(t){this.points=t.intData.length>0?t.intData[0]:1,this.times=t.intData.length>1?t.intData[1]:1,super.onEditStart(t)}readIntegerParamsFromForm(){return[this.points,this.times]}get hasSpecialInputs(){return!0}decreasePoints(){this.points-=1,this.points<t.MINIMUM_VALUE&&(this.points=t.MINIMUM_VALUE)}increasePoints(){this.points+=1,this.points>t.POINTS_MAXIMUM_VALUE&&(this.points=t.POINTS_MAXIMUM_VALUE)}decreaseTimes(){this.times-=1,this.times<t.MINIMUM_VALUE&&(this.times=t.MINIMUM_VALUE)}increaseTimes(){this.times+=1,this.times>t.TIMES_MAXIMUM_VALUE&&(this.times=t.TIMES_MAXIMUM_VALUE)}get pointsSliderOptions(){return{floor:t.MINIMUM_VALUE,ceil:t.POINTS_MAXIMUM_VALUE,step:t.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}get timesSliderOptions(){return{floor:t.MINIMUM_VALUE,ceil:t.TIMES_MAXIMUM_VALUE,step:t.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.MINIMUM_VALUE=1,t.STEPPER_VALUE=1,t.POINTS_MAXIMUM_VALUE=100,t.TIMES_MAXIMUM_VALUE=10,t.CODE=Ud.GIVE_SCORE,t.\u0275fac=function(e){return og(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:19,vars:15,consts:[[3,"delay","delayChange"],[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","points",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"],["name","times",3,"options","value","valueChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"p",1),i.Wc(2),i.rc(3,"translate"),i.cc(),i.dc(4,"div",2),i.dc(5,"button",3),i.nc("click",function(){return e.decreasePoints()}),i.Zb(6,"i",4),i.cc(),i.dc(7,"ngx-slider",5),i.nc("valueChange",function(t){return e.points=t}),i.cc(),i.dc(8,"button",3),i.nc("click",function(){return e.increasePoints()}),i.Zb(9,"i",6),i.cc(),i.cc(),i.dc(10,"p",1),i.Wc(11),i.rc(12,"translate"),i.cc(),i.dc(13,"div",2),i.dc(14,"button",3),i.nc("click",function(){return e.decreaseTimes()}),i.Zb(15,"i",4),i.cc(),i.dc(16,"ngx-slider",7),i.nc("valueChange",function(t){return e.times=t}),i.cc(),i.dc(17,"button",3),i.nc("click",function(){return e.increaseTimes()}),i.Zb(18,"i",6),i.cc(),i.cc(),i.cc()),2&t&&(i.yc("delay",e.delay),i.Kb(2),i.Xc(i.uc(3,7,"wiredfurni.params.setpoints","points",e.points)),i.Kb(5),i.yc("options",e.pointsSliderOptions)("value",e.points),i.Kb(4),i.Xc(i.uc(12,11,"wiredfurni.params.settimesingame","times",e.times)),i.Kb(5),i.yc("options",e.timesSliderOptions)("value",e.times))},encapsulation:2}),t})();const og=i.fc(ag);let cg=(()=>{class t extends ag{get code(){return t.CODE}onEditStart(t){this.team=(t.intData.length>2?t.intData[2]:1).toString(),super.onEditStart(t)}readIntegerParamsFromForm(){return[this.points,this.times,parseInt(this.team)]}}return t.CODE=Ud.GIVE_SCORE_TO_PREDEFINED_TEAM,t.\u0275fac=function(e){return _g(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:36,vars:35,consts:[[3,"delay","delayChange"],[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","points",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"],["name","times",3,"options","value","valueChange"],[1,"form-group"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","1",3,"selected"],["value","2",3,"selected"],["value","3",3,"selected"],["value","4",3,"selected"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"p",1),i.Wc(2),i.rc(3,"translate"),i.cc(),i.dc(4,"div",2),i.dc(5,"button",3),i.nc("click",function(){return e.decreasePoints()}),i.Zb(6,"i",4),i.cc(),i.dc(7,"ngx-slider",5),i.nc("valueChange",function(t){return e.points=t}),i.cc(),i.dc(8,"button",3),i.nc("click",function(){return e.increasePoints()}),i.Zb(9,"i",6),i.cc(),i.cc(),i.dc(10,"p",1),i.Wc(11),i.rc(12,"translate"),i.cc(),i.dc(13,"div",2),i.dc(14,"button",3),i.nc("click",function(){return e.decreaseTimes()}),i.Zb(15,"i",4),i.cc(),i.dc(16,"ngx-slider",7),i.nc("valueChange",function(t){return e.times=t}),i.cc(),i.dc(17,"button",3),i.nc("click",function(){return e.increaseTimes()}),i.Zb(18,"i",6),i.cc(),i.cc(),i.dc(19,"div",8),i.dc(20,"label"),i.Wc(21),i.rc(22,"translate"),i.cc(),i.dc(23,"select",9),i.nc("ngModelChange",function(t){return e.team=t}),i.dc(24,"option",10),i.Wc(25),i.rc(26,"translate"),i.cc(),i.dc(27,"option",11),i.Wc(28),i.rc(29,"translate"),i.cc(),i.dc(30,"option",12),i.Wc(31),i.rc(32,"translate"),i.cc(),i.dc(33,"option",13),i.Wc(34),i.rc(35,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.yc("delay",e.delay),i.Kb(2),i.Xc(i.uc(3,17,"wiredfurni.params.setpoints","points",e.points)),i.Kb(5),i.yc("options",e.pointsSliderOptions)("value",e.points),i.Kb(4),i.Xc(i.uc(12,21,"wiredfurni.params.settimesingame","times",e.times)),i.Kb(5),i.yc("options",e.timesSliderOptions)("value",e.times),i.Kb(5),i.Xc(i.sc(22,25,"wiredfurni.params.team")),i.Kb(2),i.yc("ngModel",e.team),i.Kb(1),i.yc("selected","1"==e.team),i.Kb(1),i.Xc(i.sc(26,27,"wiredfurni.params.team.1")),i.Kb(2),i.yc("selected","2"==e.team),i.Kb(1),i.Xc(i.sc(29,29,"wiredfurni.params.team.2")),i.Kb(2),i.yc("selected","3"==e.team),i.Kb(1),i.Xc(i.sc(32,31,"wiredfurni.params.team.3")),i.Kb(2),i.yc("selected","4"==e.team),i.Kb(1),i.Xc(i.sc(35,33,"wiredfurni.params.team.4")))},encapsulation:2}),t})();const _g=i.fc(cg);let hg=(()=>{class t extends pu{get code(){return t.CODE}onEditStart(t){this.team=(t.intData.length>0?t.intData[0]:1).toString(),super.onEditStart(t)}readIntegerParamsFromForm(){return[Number.parseInt(this.team)]}get hasSpecialInputs(){return!0}}return t.CODE=Ud.JOIN_TEAM,t.\u0275fac=function(e){return lg(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:18,vars:21,consts:[[3,"delay","delayChange"],[1,"form-group"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","1",3,"selected"],["value","2",3,"selected"],["value","3",3,"selected"],["value","4",3,"selected"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"label"),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"select",2),i.nc("ngModelChange",function(t){return e.team=t}),i.dc(6,"option",3),i.Wc(7),i.rc(8,"translate"),i.cc(),i.dc(9,"option",4),i.Wc(10),i.rc(11,"translate"),i.cc(),i.dc(12,"option",5),i.Wc(13),i.rc(14,"translate"),i.cc(),i.dc(15,"option",6),i.Wc(16),i.rc(17,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.yc("delay",e.delay),i.Kb(3),i.Xc(i.sc(4,11,"wiredfurni.params.team")),i.Kb(2),i.yc("ngModel",e.team),i.Kb(1),i.yc("selected","1"==e.team),i.Kb(1),i.Xc(i.sc(8,13,"wiredfurni.params.team.1")),i.Kb(2),i.yc("selected","2"==e.team),i.Kb(1),i.Xc(i.sc(11,15,"wiredfurni.params.team.2")),i.Kb(2),i.yc("selected","3"==e.team),i.Kb(1),i.Xc(i.sc(14,17,"wiredfurni.params.team.3")),i.Kb(2),i.yc("selected","4"==e.team),i.Kb(1),i.Xc(i.sc(17,19,"wiredfurni.params.team.4")))},encapsulation:2}),t})();const lg=i.fc(hg);let ug=(()=>{class t extends pu{get code(){return t.CODE}get hasSpecialInputs(){return!0}readStringParamFromForm(){return this.message}onEditStart(t){this.message=t.stringData,super.onEditStart(t)}validate(){return this.message.length>100?u.a.instance.localization.getValue("wiredfurni.chatmsgtoolong",!1):null}}return t.CODE=Ud.KICK_FROM_ROOM,t.\u0275fac=function(e){return dg(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:6,vars:5,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"label"),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",2),i.nc("ngModelChange",function(t){return e.message=t}),i.cc(),i.cc(),i.cc()),2&t&&(i.yc("delay",e.delay),i.Kb(3),i.Xc(i.sc(4,3,"wiredfurni.params.message")),i.Kb(2),i.yc("ngModel",e.message))},encapsulation:2}),t})();const dg=i.fc(ug);let gg=(()=>{class t extends pu{get code(){return t.CODE}}return t.CODE=Ud.LEAVE_TEAM,t.\u0275fac=function(e){return mg(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.cc()),2&t&&i.yc("delay",e.delay)},encapsulation:2}),t})();const mg=i.fc(gg);let pg=(()=>{class t extends pu{get code(){return t.CODE}onEditStart(t){this.movement=(t.intData.length>0?t.intData[0]:0).toString(),this.spacing=t.intData.length>1?t.intData[1]:1,super.onEditStart(t)}readIntegerParamsFromForm(){return[Number.parseInt(this.movement),this.spacing]}get hasSpecialInputs(){return!0}get requiresFurni(){return xg._Str_4991}decreaseSpacing(){this.spacing-=1,this.spacing<t.SPACING_MINIMUM_VALUE&&(this.spacing=t.SPACING_MINIMUM_VALUE)}increaseSpacing(){this.spacing+=1,this.spacing>t.SPACING_MAXIMUM_VALUE&&(this.spacing=t.SPACING_MAXIMUM_VALUE)}get spacingSliderOptions(){return{floor:t.SPACING_MINIMUM_VALUE,ceil:t.SPACING_MAXIMUM_VALUE,step:t.SPACING_STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.SPACING_MINIMUM_VALUE=1,t.SPACING_MAXIMUM_VALUE=5,t.SPACING_STEPPER_VALUE=1,t.CODE=Ud.MOVE_FURNI_TO,t.\u0275fac=function(e){return fg(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:29,vars:15,consts:[[3,"delay","delayChange"],[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","spacing",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"],[1,"form-row","mb-2"],[1,"form-check"],["type","radio","name","movement","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[1,"icon","icon-ne"],["type","radio","name","movement","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-se"],["type","radio","name","movement","value","4",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-sw"],["type","radio","name","movement","value","6",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-nw"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"p",1),i.Wc(2),i.rc(3,"translate"),i.cc(),i.dc(4,"div",2),i.dc(5,"button",3),i.nc("click",function(){return e.decreaseSpacing()}),i.Zb(6,"i",4),i.cc(),i.dc(7,"ngx-slider",5),i.nc("valueChange",function(t){return e.spacing=t}),i.cc(),i.dc(8,"button",3),i.nc("click",function(){return e.increaseSpacing()}),i.Zb(9,"i",6),i.cc(),i.cc(),i.Wc(10),i.rc(11,"translate"),i.dc(12,"div",7),i.dc(13,"div",8),i.dc(14,"input",9),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(15,"label",10),i.Zb(16,"i",11),i.cc(),i.cc(),i.dc(17,"div",8),i.dc(18,"input",12),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(19,"label",10),i.Zb(20,"i",13),i.cc(),i.cc(),i.dc(21,"div",8),i.dc(22,"input",14),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(23,"label",10),i.Zb(24,"i",15),i.cc(),i.cc(),i.dc(25,"div",8),i.dc(26,"input",16),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(27,"label",10),i.Zb(28,"i",17),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.yc("delay",e.delay),i.Kb(2),i.Xc(i.uc(3,9,"wiredfurni.params.emptytiles","tiles",e.spacing)),i.Kb(5),i.yc("options",e.spacingSliderOptions)("value",e.spacing),i.Kb(3),i.Yc(" ",i.sc(11,13,"wiredfurni.params.startdir")," "),i.Kb(4),i.yc("ngModel",e.movement),i.Kb(4),i.yc("ngModel",e.movement),i.Kb(4),i.yc("ngModel",e.movement),i.Kb(4),i.yc("ngModel",e.movement))},encapsulation:2}),t})();const fg=i.fc(pg);let Eg=(()=>{class t extends pu{get code(){return t.CODE}onEditStart(t){this.movement=(t.intData.length>0?t.intData[0]:0).toString(),this.rotation=(t.intData.length>1?t.intData[1]:0).toString(),super.onEditStart(t)}readIntegerParamsFromForm(){return[Number.parseInt(this.movement),Number.parseInt(this.rotation)]}get hasSpecialInputs(){return!0}get requiresFurni(){return xg._Str_5430}}return t.CODE=Ud.MOVE_FURNI,t.\u0275fac=function(e){return Sg(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:62,vars:34,consts:[[3,"delay","delayChange"],[1,"form-row"],[1,"form-check"],["type","radio","name","movement","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[1,"form-row","mb-2"],["type","radio","name","movement","value","4",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-ne"],["type","radio","name","movement","value","5",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-se"],["type","radio","name","movement","value","6",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-sw"],["type","radio","name","movement","value","7",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-mv-7"],["type","radio","name","movement","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-mv-2"],["type","radio","name","movement","value","3",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-mv-3"],["type","radio","name","movement","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-mv-1"],["type","radio","name","rotation","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-rot-1"],["type","radio","name","rotation","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-rot-2"],["type","radio","name","rotation","value","3",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.Wc(1),i.rc(2,"translate"),i.dc(3,"div",1),i.dc(4,"div",2),i.dc(5,"input",3),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(6,"label",4),i.Wc(7),i.rc(8,"translate"),i.cc(),i.cc(),i.cc(),i.dc(9,"div",5),i.dc(10,"div",2),i.dc(11,"input",6),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(12,"label",4),i.Zb(13,"i",7),i.cc(),i.cc(),i.dc(14,"div",2),i.dc(15,"input",8),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(16,"label",4),i.Zb(17,"i",9),i.cc(),i.cc(),i.dc(18,"div",2),i.dc(19,"input",10),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(20,"label",4),i.Zb(21,"i",11),i.cc(),i.cc(),i.dc(22,"div",2),i.dc(23,"input",12),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(24,"label",4),i.Zb(25,"i",13),i.cc(),i.cc(),i.dc(26,"div",2),i.dc(27,"input",14),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(28,"label",4),i.Zb(29,"i",15),i.cc(),i.cc(),i.dc(30,"div",2),i.dc(31,"input",16),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(32,"label",4),i.Zb(33,"i",17),i.cc(),i.cc(),i.dc(34,"div",2),i.dc(35,"input",18),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(36,"label",4),i.Zb(37,"i",19),i.cc(),i.cc(),i.cc(),i.Wc(38),i.rc(39,"translate"),i.dc(40,"div",2),i.dc(41,"input",20),i.nc("ngModelChange",function(t){return e.rotation=t}),i.cc(),i.dc(42,"label",4),i.Wc(43),i.rc(44,"translate"),i.cc(),i.cc(),i.dc(45,"div",2),i.dc(46,"input",21),i.nc("ngModelChange",function(t){return e.rotation=t}),i.cc(),i.dc(47,"label",4),i.Zb(48,"i",22),i.Wc(49),i.rc(50,"translate"),i.cc(),i.cc(),i.dc(51,"div",2),i.dc(52,"input",23),i.nc("ngModelChange",function(t){return e.rotation=t}),i.cc(),i.dc(53,"label",4),i.Zb(54,"i",24),i.Wc(55),i.rc(56,"translate"),i.cc(),i.cc(),i.dc(57,"div",2),i.dc(58,"input",25),i.nc("ngModelChange",function(t){return e.rotation=t}),i.cc(),i.dc(59,"label",4),i.Wc(60),i.rc(61,"translate"),i.cc(),i.cc(),i.cc()),2&t&&(i.yc("delay",e.delay),i.Kb(1),i.Yc(" ",i.sc(2,20,"wiredfurni.params.movefurni")," "),i.Kb(4),i.yc("ngModel",e.movement),i.Kb(2),i.Xc(i.sc(8,22,"wiredfurni.params.movefurni.0")),i.Kb(4),i.yc("ngModel",e.movement),i.Kb(4),i.yc("ngModel",e.movement),i.Kb(4),i.yc("ngModel",e.movement),i.Kb(4),i.yc("ngModel",e.movement),i.Kb(4),i.yc("ngModel",e.movement),i.Kb(4),i.yc("ngModel",e.movement),i.Kb(4),i.yc("ngModel",e.movement),i.Kb(3),i.Yc(" ",i.sc(39,24,"wiredfurni.params.rotatefurni")," "),i.Kb(3),i.yc("ngModel",e.rotation),i.Kb(2),i.Xc(i.sc(44,26,"wiredfurni.params.rotatefurni.0")),i.Kb(3),i.yc("ngModel",e.rotation),i.Kb(3),i.Yc(" ",i.sc(50,28,"wiredfurni.params.rotatefurni.1"),""),i.Kb(3),i.yc("ngModel",e.rotation),i.Kb(3),i.Yc(" ",i.sc(56,30,"wiredfurni.params.rotatefurni.2"),""),i.Kb(3),i.yc("ngModel",e.rotation),i.Kb(2),i.Xc(i.sc(61,32,"wiredfurni.params.rotatefurni.3")))},encapsulation:2}),t})();const Sg=i.fc(Eg);let Ig=(()=>{class t extends pu{get code(){return t.CODE}onEditStart(t){this.movement=(t.intData.length>0?t.intData[0]:0).toString(),this.rotation=(t.intData.length>1?t.intData[1]:0).toString(),super.onEditStart(t)}readIntegerParamsFromForm(){return[Number.parseInt(this.movement),Number.parseInt(this.rotation)]}get hasSpecialInputs(){return!0}get requiresFurni(){return xg._Str_5430}}return t.CODE=Ud.MOVE_TO_DIRECTION,t.\u0275fac=function(e){return Rg(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:57,vars:39,consts:[[3,"delay","delayChange"],[1,"form-row","mb-2"],[1,"form-check"],["type","radio","name","movement","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[1,"icon","icon-ne"],["type","radio","name","movement","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-se"],["type","radio","name","movement","value","4",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-sw"],["type","radio","name","movement","value","6",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-nw"],["type","radio","name","rotation","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","3",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","4",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","5",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","6",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.Wc(1),i.rc(2,"translate"),i.dc(3,"div",1),i.dc(4,"div",2),i.dc(5,"input",3),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(6,"label",4),i.Zb(7,"i",5),i.cc(),i.cc(),i.dc(8,"div",2),i.dc(9,"input",6),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(10,"label",4),i.Zb(11,"i",7),i.cc(),i.cc(),i.dc(12,"div",2),i.dc(13,"input",8),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(14,"label",4),i.Zb(15,"i",9),i.cc(),i.cc(),i.dc(16,"div",2),i.dc(17,"input",10),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(18,"label",4),i.Zb(19,"i",11),i.cc(),i.cc(),i.cc(),i.Wc(20),i.rc(21,"translate"),i.dc(22,"div",2),i.dc(23,"input",12),i.nc("ngModelChange",function(t){return e.rotation=t}),i.cc(),i.dc(24,"label",4),i.Wc(25),i.rc(26,"translate"),i.cc(),i.cc(),i.dc(27,"div",2),i.dc(28,"input",13),i.nc("ngModelChange",function(t){return e.rotation=t}),i.cc(),i.dc(29,"label",4),i.Wc(30),i.rc(31,"translate"),i.cc(),i.cc(),i.dc(32,"div",2),i.dc(33,"input",14),i.nc("ngModelChange",function(t){return e.rotation=t}),i.cc(),i.dc(34,"label",4),i.Wc(35),i.rc(36,"translate"),i.cc(),i.cc(),i.dc(37,"div",2),i.dc(38,"input",15),i.nc("ngModelChange",function(t){return e.rotation=t}),i.cc(),i.dc(39,"label",4),i.Wc(40),i.rc(41,"translate"),i.cc(),i.cc(),i.dc(42,"div",2),i.dc(43,"input",16),i.nc("ngModelChange",function(t){return e.rotation=t}),i.cc(),i.dc(44,"label",4),i.Wc(45),i.rc(46,"translate"),i.cc(),i.cc(),i.dc(47,"div",2),i.dc(48,"input",17),i.nc("ngModelChange",function(t){return e.rotation=t}),i.cc(),i.dc(49,"label",4),i.Wc(50),i.rc(51,"translate"),i.cc(),i.cc(),i.dc(52,"div",2),i.dc(53,"input",18),i.nc("ngModelChange",function(t){return e.rotation=t}),i.cc(),i.dc(54,"label",4),i.Wc(55),i.rc(56,"translate"),i.cc(),i.cc(),i.cc()),2&t&&(i.yc("delay",e.delay),i.Kb(1),i.Yc(" ",i.sc(2,21,"wiredfurni.params.startdir")," "),i.Kb(4),i.yc("ngModel",e.movement),i.Kb(4),i.yc("ngModel",e.movement),i.Kb(4),i.yc("ngModel",e.movement),i.Kb(4),i.yc("ngModel",e.movement),i.Kb(3),i.Yc(" ",i.sc(21,23,"wiredfurni.params.turn")," "),i.Kb(3),i.yc("ngModel",e.rotation),i.Kb(2),i.Xc(i.sc(26,25,"wiredfurni.params.turn.0")),i.Kb(3),i.yc("ngModel",e.rotation),i.Kb(2),i.Xc(i.sc(31,27,"wiredfurni.params.turn.1")),i.Kb(3),i.yc("ngModel",e.rotation),i.Kb(2),i.Xc(i.sc(36,29,"wiredfurni.params.turn.2")),i.Kb(3),i.yc("ngModel",e.rotation),i.Kb(2),i.Xc(i.sc(41,31,"wiredfurni.params.turn.3")),i.Kb(3),i.yc("ngModel",e.rotation),i.Kb(2),i.Xc(i.sc(46,33,"wiredfurni.params.turn.4")),i.Kb(3),i.yc("ngModel",e.rotation),i.Kb(2),i.Xc(i.sc(51,35,"wiredfurni.params.turn.5")),i.Kb(3),i.yc("ngModel",e.rotation),i.Kb(2),i.Xc(i.sc(56,37,"wiredfurni.params.turn.6")))},encapsulation:2}),t})();const Rg=i.fc(Ig);let bg=(()=>{class t extends pu{constructor(){super(...arguments),this.length=0}get code(){return t.CODE}get hasSpecialInputs(){return!0}readStringParamFromForm(){return this.message}readIntegerParamsFromForm(){return[this.length]}onEditStart(t){this.message=t.stringData,this.length=t.intData.length>0?t.intData[0]:10,super.onEditStart(t)}validate(){return this.message.length>100?u.a.instance.localization.getValue("wiredfurni.chatmsgtoolong",!1):null}decreaseLength(){this.length-=1,this.length<t.LENGTH_MINIMUM_VALUE&&(this.length=t.LENGTH_MINIMUM_VALUE)}increaseLength(){this.length+=1,this.length>t.LENGTH_MAXIMUM_VALUE&&(this.length=t.LENGTH_MAXIMUM_VALUE)}get lengthSliderOptions(){return{floor:t.LENGTH_MINIMUM_VALUE,ceil:t.LENGTH_MAXIMUM_VALUE,step:t.LENGTH_STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.LENGTH_MINIMUM_VALUE=1,t.LENGTH_MAXIMUM_VALUE=10,t.LENGTH_STEPPER_VALUE=1,t.CODE=Ud.MUTE_USER,t.\u0275fac=function(e){return vg(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:15,vars:12,consts:[[3,"delay","delayChange"],[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","length",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"],[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"p",1),i.Wc(2),i.rc(3,"translate"),i.cc(),i.dc(4,"div",2),i.dc(5,"button",3),i.nc("click",function(){return e.decreaseLength()}),i.Zb(6,"i",4),i.cc(),i.dc(7,"ngx-slider",5),i.nc("valueChange",function(t){return e.length=t}),i.cc(),i.dc(8,"button",3),i.nc("click",function(){return e.increaseLength()}),i.Zb(9,"i",6),i.cc(),i.cc(),i.dc(10,"div",7),i.dc(11,"label"),i.Wc(12),i.rc(13,"translate"),i.cc(),i.dc(14,"input",8),i.nc("ngModelChange",function(t){return e.message=t}),i.cc(),i.cc(),i.cc()),2&t&&(i.yc("delay",e.delay),i.Kb(2),i.Xc(i.uc(3,6,"wiredfurni.params.length.minutes","minutes",e.length)),i.Kb(5),i.yc("options",e.lengthSliderOptions)("value",e.length),i.Kb(5),i.Xc(i.sc(13,10,"wiredfurni.params.message")),i.Kb(2),i.yc("ngModel",e.message))},encapsulation:2}),t})();const vg=i.fc(bg);let Tg=(()=>{class t extends pu{get code(){return t.CODE}}return t.CODE=Ud.RESET,t.\u0275fac=function(e){return Og(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.cc()),2&t&&i.yc("delay",e.delay)},encapsulation:2}),t})();const Og=i.fc(Tg);let yg=(()=>{class t extends pu{get code(){return t.CODE}onEditStart(t){this.state=t.getBoolean(0),this.direction=t.getBoolean(1),this.position=t.getBoolean(2),super.onEditStart(t)}readIntegerParamsFromForm(){return[this.state?1:0,this.direction?1:0,this.position?1:0]}get requiresFurni(){return xg._Str_4873}get hasStateSnapshot(){return!0}}return t.CODE=Ud.SET_FURNI_STATE,t.\u0275fac=function(e){return Ag(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:18,vars:16,consts:[[3,"delay","delayChange"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.Wc(1),i.rc(2,"translate"),i.dc(3,"div",1),i.dc(4,"input",2),i.nc("ngModelChange",function(t){return e.state=t}),i.cc(),i.dc(5,"label",3),i.Wc(6),i.rc(7,"translate"),i.cc(),i.cc(),i.dc(8,"div",1),i.dc(9,"input",2),i.nc("ngModelChange",function(t){return e.direction=t}),i.cc(),i.dc(10,"label",3),i.Wc(11),i.rc(12,"translate"),i.cc(),i.cc(),i.dc(13,"div",1),i.dc(14,"input",2),i.nc("ngModelChange",function(t){return e.position=t}),i.cc(),i.dc(15,"label",3),i.Wc(16),i.rc(17,"translate"),i.cc(),i.cc(),i.cc()),2&t&&(i.yc("delay",e.delay),i.Kb(1),i.Yc(" ",i.sc(2,8,"wiredfurni.params.conditions")," "),i.Kb(3),i.yc("ngModel",e.state),i.Kb(2),i.Xc(i.sc(7,10,"wiredfurni.params.condition.state")),i.Kb(3),i.yc("ngModel",e.direction),i.Kb(2),i.Xc(i.sc(12,12,"wiredfurni.params.condition.direction")),i.Kb(3),i.yc("ngModel",e.position),i.Kb(2),i.Xc(i.sc(17,14,"wiredfurni.params.condition.position")))},encapsulation:2}),t})();const Ag=i.fc(yg);let Cg=(()=>{class t extends pu{get code(){return t.CODE}get requiresFurni(){return xg._Str_5430}}return t.CODE=Ud.TELEPORT,t.\u0275fac=function(e){return Mg(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.cc()),2&t&&i.yc("delay",e.delay)},encapsulation:2}),t})();const Mg=i.fc(Cg);let Ug=(()=>{class t extends pu{get code(){return t.CODE}get requiresFurni(){return xg._Str_5430}}return t.CODE=Ud.TOGGLE_FURNI_STATE,t.\u0275fac=function(e){return Dg(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.cc()),2&t&&i.yc("delay",e.delay)},encapsulation:2}),t})();const Dg=i.fc(Ug);class wg{_Str_9781(t){switch(t){case Ug.CODE:return Ug;case Cg.CODE:return Cg;case Yd.CODE:return Yd;case Qd.CODE:return Qd;case Kd.CODE:return Kd;case Zd.CODE:return Zd;case xd.CODE:return xd;case Nd.CODE:return Nd;case gg.CODE:return gg;case Tg.CODE:return Tg;case ug.CODE:return ug;case Bd.CODE:return Bd;case yg.CODE:return yg;case Fd.CODE:return Fd;case bg.CODE:return bg;case Dd.CODE:return Dd;case Wd.CODE:return Wd;case Gd.CODE:return Gd;case Eg.CODE:return Eg;case Ig.CODE:return Ig;case hg.CODE:return hg;case cg.CODE:return cg;case ag.CODE:return ag;case pg.CODE:return pg;case ng.CODE:return ng}return null}_Str_15652(t){return this._Str_9781(t)}_Str_14545(t){return t instanceof au.a}_Str_1196(){return"action"}}const Ng=["inputsContainer"];function Lg(t,e){}let xg=(()=>{class t{constructor(t,e,s,i,n){this._settingsService=t,this._notificationService=e,this._wiredService=s,this._componentFactoryResolver=i,this._ngZone=n,this._updated=null,this._lastComponent=null,this._furniSelectedIds=[]}ngOnInit(){this._wiredService.component=this,this._triggerConfs=new Md,this._actionTypes=new wg,this._conditionTypes=new Qu,this._selectionVisualizer=new gu(this)}ngOnDestroy(){this._wiredService.component=null}setupTrigger(t){this._updated=t;const e=this._Str_3959();this._selectionVisualizer.clearSelectionShaderFromFurni(this._furniSelectedIds),this._furniSelectedIds=[...this._updated.selectedItems],e.onEditStart(this._updated),this._selectionVisualizer.applySelectionShaderToFurni(this._furniSelectedIds)}_Str_19071(){return this._updated instanceof cu.a?this._triggerConfs:this._updated instanceof au.a?this._actionTypes:this._updated instanceof ou.a?this._conditionTypes:null}_Str_3959(){const t=this._Str_19071()._Str_15652(this._updated.code);if(!t)return null;if(this._lastComponent&&this._lastComponent.instance instanceof t)return this._lastComponent.instance;this.inputsContainer.length&&this.inputsContainer.remove();const e=this._componentFactoryResolver.resolveComponentFactory(t);let s=null;return e&&(s=this.inputsContainer.createComponent(e)),this._lastComponent=s,s?(s.instance.onInitStart(),s.instance):null}close(){this.inputsContainer.length&&this.inputsContainer.remove(),this._selectionVisualizer.clearSelectionShaderFromFurni(this._furniSelectedIds),this._updated=null,this._lastComponent=null,this._furniSelectedIds=[]}save(){this.isOwnerOfFurniture(this._updated.id)?this.update():this._notificationService.alertWithConfirm("${wiredfurni.nonowner.change.confirm.body}","${wiredfurni.nonowner.change.confirm.title}",()=>{this.update()})}update(){const t=this._Str_3959().validate();t?this._notificationService.alert(t,"Update failed"):this._updated instanceof cu.a?u.a.instance.communication.connection.send(new lu.a(this._updated.id,this.readIntegerParams(),this.readStringParam(),this.readFurniSelectionIds(),this.readFurniSelectionCode())):this._updated instanceof au.a?u.a.instance.communication.connection.send(new _u.a(this._updated.id,this.readIntegerParams(),this.readStringParam(),this.readFurniSelectionIds(),this.getActionDelay(),this.readFurniSelectionCode())):this._updated instanceof ou.a&&u.a.instance.communication.connection.send(new hu.a(this._updated.id,this.readIntegerParams(),this.readStringParam(),this.readFurniSelectionIds(),this.readFurniSelectionCode()))}getActionDelay(){const t=this._Str_3959();return t&&t instanceof pu?t.delay:0}readIntegerParams(){const t=this._Str_3959();return t?t.readIntegerParamsFromForm():[]}readStringParam(){const t=this._Str_3959();return t?t.readStringParamFromForm():""}readFurniSelectionIds(){return[...this._furniSelectedIds]}readFurniSelectionCode(){if(!this._updated._Str_21824)return 0;const e=this._Str_3959();return!e||e.requiresFurni!==t._Str_4991&&e.requiresFurni!==t._Str_5430?0:this._updated._Str_6040}getFurniName(){const t=this._updated&&this._updated.spriteId||-1,e=u.a.instance.sessionDataManager.getFloorItemData(t);return e?e.name:"NAME: "+t}getFurniDescription(){const t=this._updated&&this._updated.spriteId||-1,e=u.a.instance.sessionDataManager.getFloorItemData(t);return e?e.description:"NAME: "+t}_Str_19885(){return this._Str_3959().requiresFurni!==t._Str_5431}toggleFurniSelected(t,e){if(!this._updated||!this._Str_19885())return;const s=this._furniSelectedIds.indexOf(t);s>=0?(this._furniSelectedIds.splice(s,1),this._selectionVisualizer.hide(t)):this._furniSelectedIds.length<this._updated.maximumItemSelectionCount&&(this._furniSelectedIds.push(t),this._selectionVisualizer.show(t)),u.a.instance.localization.registerParameter("wiredfurni.pickfurnis.caption","count",this._furniSelectedIds.length.toString())}isOwnerOfFurniture(t){const e=u.a.instance.roomEngine.getRoomObject(this._wiredService.roomId,t,W.a.FLOOR);return!!e&&e.model.getValue(G.a.FURNITURE_OWNER_ID)===u.a.instance.sessionDataManager.userId}get roomId(){return this._wiredService.roomId}get furniSelectedIds(){return this._furniSelectedIds}get maximumItemSelectionCount(){return this._updated.maximumItemSelectionCount}}return t._Str_5431=0,t._Str_4873=1,t._Str_4991=2,t._Str_5430=3,t.\u0275fac=function(e){return new(e||t)(i.Yb(m),i.Yb(Ge),i.Yb(qe),i.Yb(i.m),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-wired-main-component"]],viewQuery:function(t,e){if(1&t&&i.cd(Ng,1,i.Z),2&t){let t;i.Hc(t=i.oc())&&(e.inputsContainer=t.first)}},decls:2,vars:0,consts:[["inputsContainer",""]],template:function(t,e){1&t&&i.Uc(0,Lg,0,0,"ng-template",null,0,i.Vc)},encapsulation:2}),t})();function Pg(t,e){if(1&t&&(i.dc(0,"div"),i.Wc(1),i.rc(2,"number"),i.cc()),2&t){const t=i.qc().$implicit,e=i.qc();i.Nb("currency white icon-",e.getCurrencyType(t.key),""),i.Kb(1),i.Yc(" ",i.sc(2,4,t.value)," ")}}function Fg(t,e){if(1&t&&(i.bc(0),i.Uc(1,Pg,3,6,"div",4),i.ac()),2&t){const t=e.$implicit,s=i.qc();i.Kb(1),i.yc("ngIf",s.isVisible(t.key))}}let kg=(()=>{class t{constructor(t){this._purseService=t}ngOnInit(){this._purseService.requestUpdate()}isVisible(t){return-1!==this._purseService.visibleCurrencies.indexOf(t)}getCurrencyType(t){var e="credits";switch(t){case-1:e="credits";break;case 0:e="aerocash";break;case 5:e="diamonds"}return e}getCurrencyUrl(t){return u.a.instance.getConfiguration("currency.asset.icon.url").replace("%type%",t)}get currencies(){return this._purseService.currencies}get hcDay(){if(!this._purseService.hcSub)return;const t=Sl.shortFormat(60*this._purseService.hcSub.totalSeconds);return this._purseService.hcSub.totalSeconds?t:u.a.instance.localization.getValue("purse.clubdays.zero.amount.text")}get isReady(){return this._purseService.isReady}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(I_))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-purse-main-component"]],decls:5,vars:3,consts:[[1,"nitro-purse-component","float-right"],[1,"top-menu"],[4,"ngFor","ngForOf"],[1,"currency","white","icon-settings"],[3,"class",4,"ngIf"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Uc(2,Fg,2,1,"ng-container",2),i.rc(3,"keyvalue"),i.Zb(4,"div",3),i.cc(),i.cc()),2&t&&(i.Kb(2),i.yc("ngForOf",i.sc(3,1,e.currencies)))},directives:[p.m,p.n],pipes:[p.h,p.e],encapsulation:2}),t})(),Wg=(()=>{class t{constructor(t){this._notificationService=t,this.type=null,this.parameters=null,this.removing=!1}hide(){this.removing=!0,setTimeout(()=>this.close(),300)}close(){this._notificationService.closeNotification(this)}interpolate(t,e=null){e||(e=new RegExp(/%(.*?)%/g));const s=t.match(e);if(s&&s.length)for(const i of s){const e=this.parameters.get(this.removeInterpolateKey(i));e&&(t=t.replace(i,e))}return t}removeInterpolateKey(t){return t.replace(/%/g,"")}getDefaultImage(){const t=this.notificationLocaleKey+".image";let e=u.a.instance.getLocalization(t)||null;return e===t?(e=u.a.instance.getConfiguration("image.library.notifications.url"),e=e.replace("%image%",this.type),e):(e&&e.length&&(e=this.interpolate(e),e=u.a.instance.core.configuration.interpolate(e)),e)}getDefaultLinkTitle(){let t=u.a.instance.getLocalization(this.notificationLocaleKey+".linkTitle")||null;return t&&t.length&&(t=this.interpolate(t)),t}getDefaultLinkUrl(){let t=u.a.instance.getLocalization(this.notificationLocaleKey+".linkUrl")||null;return t&&t.length&&(t=this.interpolate(t)),t}getDefaultMessage(){let t=u.a.instance.getLocalization(this.notificationLocaleKey+".message")||null;return t&&t.length&&(t=this.interpolate(t)),t}getDefaultTitle(){let t=u.a.instance.getLocalization(this.notificationLocaleKey+".title")||null;return t&&t.length&&(t=this.interpolate(t)),t}get notificationLocaleKey(){return"notification."+this.type}get timeout(){return 0}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Ge))},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})(),Vg=(()=>{class t extends Wg{clickNotification(){this.visitUrl(),this.hide()}visitUrl(){const t=this.getDefaultLinkUrl();if(!t||!t.length)return;const e=t.split(":");!e||e.length<2||("event"===e[0]?u.a.instance.createLinkEvent(e[1]):window.open(t,"_blank"))}getDefaultImage(){let t=this.parameters.get("image")||null;return t?(t=u.a.instance.core.configuration.interpolate(t),t):super.getDefaultImage()}getDefaultLinkTitle(){let t=this.parameters.get("linkTitle")||null;return t?(t=u.a.instance.getLocalization(t),t):super.getDefaultLinkTitle()}getDefaultLinkUrl(){return this.parameters.get("linkUrl")||super.getDefaultLinkUrl()}getDefaultMessage(){let t=this.parameters.get("message")||null;return t?(t=u.a.instance.getLocalization(t),t):super.getDefaultMessage()}getDefaultTitle(){let t=this.parameters.get("title")||null;return t?(t=u.a.instance.getLocalization(t),t):super.getDefaultTitle()}get timeout(){return 5e3}}return t.\u0275fac=function(e){return Gg(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:2,vars:3,consts:[[1,"white","d-flex","justify-content-center","align-items-center","nitro-notification-bubble","bg-primary",2,"width","300px","padding","10px","color","#4a4a4a","border-radius","15px","padding","10px","margin-bottom","15px",3,"click"],[1,"bubble-message","text-center","w-100","mb-0",2,"font-size","16px !important",3,"innerHTML"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.nc("click",function(){return e.clickNotification()}),i.Zb(1,"p",1),i.cc()),2&t&&(i.Qb("removing",e.removing),i.Kb(1),i.yc("innerHTML",e.getDefaultMessage(),i.Mc))},encapsulation:2}),t})();const Gg=i.fc(Vg),Hg=function(t){return{"background-image":t}};function Bg(t,e){if(1&t&&i.Zb(0,"div",7),2&t){const t=i.qc();i.yc("ngStyle",i.Cc(1,Hg,"url("+t.getDefaultImage()+")"))}}let jg=(()=>{class t extends Vg{get timeout(){return 0}}return t.\u0275fac=function(e){return Kg(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:10,vars:8,consts:[[1,"d-flex","flex-column","justify-content-center","align-items-center","nitro-notification-bubble","bubble-event","bg-primary","rounded","border","shadow"],[1,"d-flex","w-100"],[1,"bubble-message","text-center","w-100","mb-0",3,"innerHTML"],["class","bubble-image bg-secondary rounded",3,"ngStyle",4,"ngIf"],[1,"d-flex","btn-group","w-100","mt-2"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["type","button",1,"btn","btn-sm","btn-success",3,"click"],[1,"bubble-image","bg-secondary","rounded",3,"ngStyle"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Zb(2,"p",2),i.Uc(3,Bg,1,3,"div",3),i.cc(),i.dc(4,"div",4),i.dc(5,"button",5),i.nc("click",function(){return e.hide()}),i.Wc(6),i.rc(7,"translate"),i.cc(),i.dc(8,"button",6),i.nc("click",function(){return e.clickNotification()}),i.Wc(9),i.cc(),i.cc(),i.cc()),2&t&&(i.Qb("removing",e.removing),i.Kb(2),i.yc("innerHTML",e.getDefaultMessage(),i.Mc),i.Kb(1),i.yc("ngIf",e.getDefaultImage()),i.Kb(3),i.Xc(i.sc(7,6,"alert.close.button")),i.Kb(3),i.Xc(e.getDefaultLinkTitle()))},directives:[p.n,p.o],pipes:[Fs],encapsulation:2}),t})();const Kg=i.fc(jg),zg=["notificationsContainer"];function Yg(t,e){}let Xg=(()=>{class t{constructor(t,e,s){this._notificationService=t,this._componentFactoryResolver=e,this._ngZone=s,this._notifications=new Map}ngOnInit(){this._notificationService.notificationCenter=this}ngOnDestroy(){this.closeAllNotifications(),this._notificationService.notificationCenter=null}displayNotification(t,e){let s=null;switch(t){case"hotel.event":s=jg;break;default:s=Vg}const i=this.buildNotification(s);return i?(i.type=t,i.parameters=e,i.timeout>0&&setTimeout(()=>i&&i.hide(),i.timeout),i):null}buildNotification(t){let e=null;return this._ngZone.run(()=>{e=this.createNotificationComponent(t)}),e||null}createNotificationComponent(t){if(!t)return null;let e=null;const s=this._componentFactoryResolver.resolveComponentFactory(t);let i=null;return s&&(i=this.notificationsContainer.createComponent(s),this._notifications.set(i.instance,i)),e=i.instance,e}closeNotification(t){if(!t)return;const e=this._notifications.get(t);e&&(this._notifications.delete(t),this.removeNotificationView(e.hostView))}closeAllNotifications(){for(const t of this._notifications.keys())this.closeNotification(t)}removeNotificationView(t){if(!t)return;const e=this.notificationsContainer.indexOf(t);-1!==e&&this.notificationsContainer.remove(e)}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Ge),i.Yb(i.m),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-notification-center-component"]],viewQuery:function(t,e){if(1&t&&i.cd(zg,1,i.Z),2&t){let t;i.Hc(t=i.oc())&&(e.notificationsContainer=t.first)}},decls:3,vars:0,consts:[[1,"d-flex","flex-column-reverse","notifications-area"],["notificationsContainer",""]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Uc(1,Yg,0,0,"ng-template",null,1,i.Vc),i.cc())},encapsulation:2}),t})(),Zg=(()=>{class t{constructor(t){this.sessionService=t,this._background=u.a.instance.core.configuration.interpolate(u.a.instance.getConfiguration("hotelview.images").background),this._backgroundColour=u.a.instance.getConfiguration("hotelview.images")["background.colour"],this._sun=u.a.instance.core.configuration.interpolate(u.a.instance.getConfiguration("hotelview.images").sun),this._drape=u.a.instance.core.configuration.interpolate(u.a.instance.getConfiguration("hotelview.images").drape),this._left=u.a.instance.core.configuration.interpolate(u.a.instance.getConfiguration("hotelview.images").left),this._right=u.a.instance.core.configuration.interpolate(u.a.instance.getConfiguration("hotelview.images").right),this._rightRepeat=u.a.instance.core.configuration.interpolate(u.a.instance.getConfiguration("hotelview.images")["right.repeat"])}get figure(){return this.sessionService.figure}get background(){return this._background||null}get backgroundColour(){return this._backgroundColour||null}get sun(){return this._sun||null}get drape(){return this._drape||null}get left(){return this._left||null}get right(){return this._right||null}get rightRepeat(){return this._rightRepeat||null}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(El))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-hotelview-component"]],decls:3,vars:0,consts:[[1,"nitro-hotelview-component","animate-background"],[1,"background","position-absolute"],["src","/assets/images/hotelview/background_right_easter2016.png",1,"right","position-absolute"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Zb(1,"div",1),i.Zb(2,"img",2),i.cc())},encapsulation:2}),t})();var qg=s("2FAY");class Qg{constructor(t){this._complete=!0,this._target=t}get running(){return this._running&&!!this._target}get complete(){return this._complete}set target(t){this._target=t}get target(){return this._target}set tag(t){this._tag=t}get tag(){return this._tag}start(){this._running=!0}update(t){}stop(){this._target=null,this._running=!1}tick(t){}}class Jg extends Qg{constructor(t){super(t)}tick(t){super.tick(t),this.target&&(this.target.remove(),this.target=null)}}class $g extends Qg{constructor(t,e){super(t),this._complete=!1,this._duration=e}get duration(){return this._duration}start(){super.start(),this._complete=!1,this._startTimeMs=u.a.instance.time}tick(t){super.tick(t);const e=(t-this._startTimeMs)/this._duration;e<1?this.update(e):(this.update(1),this._complete=!0)}}class tm extends $g{constructor(t,e,s){super(t,e),this._height=s}start(){super.start(),this._offset=0,this.target.style.top=this._offset-this._height+"px"}update(t){super.update(t),this.target.style.top=this._offset-this._height+this.getBounceOffset(t)*this._height+"px"}getBounceOffset(t){return t<.364?7.5625*t*t:t<.727?7.5625*(t-=.545)*t+.75:t<.909?7.5625*(t-=.9091)*t+.9375:7.5625*(t-=.955)*t+.984375}stop(){this.target.style.top=this._offset+"px",super.stop()}}class em extends $g{constructor(t){super(t.target,t.duration),this._interval=t}start(){super.start(),this._interval.start()}update(t){super.update(t),this._interval.update(t)}stop(){super.stop(),this._interval.stop()}}class sm extends em{constructor(t,e){super(t),this._Str_21638=e}}class im extends sm{constructor(t,e){super(t,e)}update(t){this._interval.update(Math.pow(t,1/this._Str_21638))}}class nm extends $g{constructor(t,e,s,i,n,r){super(t,e),this._deltaX=s,this._deltaY=i,this._height=-n,this._numJumps=r}start(){super.start(),this._startX=this.target.offsetLeft,this._startY=this.target.offsetTop}update(t){super.update(t),this.target.style.left=this._startX+this._deltaX*t+"px",this.target.style.top=this._startY+this._height*Math.abs(Math.sin(t*Math.PI*this._numJumps))+this._deltaY*t+"px"}}let rm=(()=>{class t{static get TIMER_TIME(){return 1e3/u.a.instance.ticker.FPS}static _Str_4598(e){return-1===t._Str_3932.indexOf(e)&&-1===t._Str_5358.indexOf(e)&&(t._Str_7507?t._Str_5358.push(e):(t._Str_3932.push(e),e.start()),t._Str_12757()),e}static _Str_15790(e){let s=t._Str_3932.indexOf(e);s>-1?t._Str_7507?(s=t._Str_10731.indexOf(e),-1==s&&t._Str_10731.push(e)):(t._Str_3932.splice(s,1),e.running&&e.stop(),t._Str_3932.length||t._Str_7465()):(s=t._Str_5358.indexOf(e),s>-1&&t._Str_5358.splice(s,1))}static _Str_19320(e){for(const s of t._Str_3932)if(s.tag==e)return s;for(const s of t._Str_5358)if(s.tag==e)return s;return null}static _Str_9810(e){for(const s of t._Str_3932)if(s.target==e)return s;for(const s of t._Str_5358)if(s.target==e)return s;return null}static _Str_26365(e,s){for(const i of t._Str_3932)if(i.tag==e&&i.target==s)return i;for(const i of t._Str_5358)if(i.tag==e&&i.target==s)return i;return null}static get _Str_1349(){return!!t._Str_5307}static get _Str_26314(){return t._Str_7507}static _Str_21055(){t._Str_7507=!0;const e=u.a.instance.time;let s=null;for(;s=t._Str_5358.pop();)t._Str_3932.push(s);for(;s=t._Str_10731.pop();)t._Str_3932.splice(t._Str_3932.indexOf(s),1),s.running&&s.stop();for(s of t._Str_3932)s.running?(s.tick(e),s.complete&&t._Str_15790(s)):t._Str_15790(s);t._Str_3932.length||t._Str_7465(),t._Str_7507=!1}static _Str_12757(){t._Str_5307||(t._Str_5307=setInterval(t._Str_21055,t.TIMER_TIME))}static _Str_7465(){t._Str_5307&&(clearInterval(t._Str_5307),t._Str_5307=null)}_Str_25883(e){let s=0;for(const i of t._Str_3932)i.target===e&&s++;return s}}return t._Str_5358=[],t._Str_3932=[],t._Str_10731=[],t._Str_5307=null,t._Str_7507=!1,t})();class am extends Qg{constructor(...t){super(t?t[0].target:null),this._queue=[];for(const e of t)this._queue.push(e);this._motion=t[0],this._complete=!this._motion}get running(){return!(!this._running||!this._motion)&&this._motion.running}start(){super.start(),this._motion.start()}update(t){super.update(t),this._motion.running&&this._motion.update(t)}stop(){super.stop(),this._motion.stop()}tick(t){if(super.tick(t),this._motion.tick(t),this._motion.complete){this._motion.stop();const t=this._queue.indexOf(this._motion);t<this._queue.length-1?(this._motion=this._queue[t+1],this._target=this._motion.target,this._motion.start()):this._complete=!0}}}class om extends Qg{constructor(t){super(null),this._waitTimeMs=t}get running(){return this._running}start(){super.start(),this._complete=!1,this._startTimeMs=u.a.instance.time}tick(t){super.tick(t),this._complete=t-this._startTimeMs>=this._waitTimeMs,this._complete&&this.stop()}}function cm(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.nc("click",function(){return i.Lc(t),i.qc().toggleAvatarEditor()}),i.cc(),i.dc(2,"div",3),i.nc("click",function(){return i.Lc(t),i.qc().toggleAchievements()}),i.cc(),i.dc(3,"div",4),i.nc("click",function(){return i.Lc(t),i.qc().toggleNavigator()}),i.cc(),i.cc()}}let _m=(()=>{class t{constructor(t,e,s,i,n){this._avatarEditorService=t,this.settingsService=e,this.navigatorService=s,this._achievementService=i,this._ngZone=n}ngOnInit(){}ngOnDestroy(){}get isVisible(){return this.settingsService.meMenuVisible||!1}toggleAvatarEditor(){this._avatarEditorService.loadOwnAvatarInEditor(),this.settingsService.toggleAvatarEditor()}toggleAchievements(){this.settingsService.toggleAchievements()}toggleNavigator(){this.settingsService.toggleNavigator(),this.navigatorService.setCurrentContextByCode("myworld_view")}get unseenAchievementsCount(){return this._achievementService.unseenCount}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(ai),i.Yb(m),i.Yb(fa),i.Yb(Ya),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-toolbar-me-menu-component"]],decls:1,vars:1,consts:[["style","display: flex",4,"ngIf"],[2,"display","flex"],[1,"item","white","icon-clothe","clothe-item",3,"click"],[1,"item","white","icon-adward","adward-item",3,"click"],[1,"item","white","icon-myroom","myroom-item",3,"click"]],template:function(t,e){1&t&&i.Uc(0,cm,4,0,"div",0),2&t&&i.yc("ngIf",e.isVisible)},directives:[p.n],encapsulation:2,data:{animation:[Object(R.j)("inOutAnimation",[Object(R.i)(":enter",[Object(R.h)({bottom:0,opacity:0}),Object(R.e)(".3s ease-out",Object(R.h)({bottom:87,opacity:1}))]),Object(R.i)(":leave",[Object(R.h)({bottom:0,opacity:1}),Object(R.e)(".3s ease-in",Object(R.h)({bottom:10,opacity:0}))])])]}}),t})();const hm=["navigationList"];let lm=(()=>{class t{constructor(t,e,s,i,n,r,a){this._inventoryService=t,this._navigatorService=e,this._friendListService=s,this._achievementService=i,this.sessionService=n,this.settingsService=r,this.ngZone=a,this.isInRoom=!1,this.onNitroToolbarEvent=this.onNitroToolbarEvent.bind(this)}ngOnInit(){this.ngZone.runOutsideAngular(()=>{u.a.instance.roomEngine.events.addEventListener(J.a.TOOLBAR_CLICK,this.onNitroToolbarEvent),u.a.instance.roomEngine.events.addEventListener(qg.a.ANIMATE_ICON,this.onNitroToolbarEvent)})}ngOnDestroy(){this.ngZone.runOutsideAngular(()=>{u.a.instance.roomEngine.events.removeEventListener(J.a.TOOLBAR_CLICK,this.onNitroToolbarEvent),u.a.instance.roomEngine.events.removeEventListener(qg.a.ANIMATE_ICON,this.onNitroToolbarEvent)})}onNitroToolbarEvent(t){if(t)switch(t.type){case J.a.TOOLBAR_CLICK:return void this.clickIcon(t.iconName);case qg.a.ANIMATE_ICON:return void this.animateToIcon(t.iconName,t.image,t.x,t.y)}}clickIcon(t){if(t&&""!==t)switch(t){case ma.a.HOTEL_VIEW:return void this.visitDesktop();case ma.a.HOME_ROOM:return void this.visitHomeRoom();case ma.a.NAVIGATOR:return void this.toggleNavigator();case ma.a.CATALOG:return void this.toggleCatalog();case ma.a.INVENTORY:return void this.toggleInventory();case ma.a.FRIEND_LIST:return void this.toggleFriendList();case ma.a.ME_MENU:return this.toggleMeMenu(),void u.a.instance.roomEngine.events.dispatchEvent(new J.a(J.a.SELECT_OWN_AVATAR))}}animateToIcon(t,e,s,i){if(!t||!e||!this.navigationListElement)return;if(""===(t=this.getIconName(t)))return;const n=this.navigationListElement.getElementsByClassName(t)[0];if(n){e.className="toolbar-icon-animation",e.style.visibility="visible",e.style.left=s+"px",e.style.top=i+"px",document.body.append(e);const r=n.getBoundingClientRect(),a=e.getBoundingClientRect(),o=a.x-r.x,c=a.y-r.y,_=Math.sqrt(o*o+c*c),h=500-Math.abs(1/_*100*500*.5),l=20,u=`ToolbarBouncing[${t}]`;rm._Str_19320(u)||(rm._Str_4598(new am(new om(h+8),new tm(n,400,12))).tag=u);const d=new am(new im(new nm(e,h,r.x-a.x+l,r.y-a.y,100,1),1),new Jg(e));rm._Str_4598(d)}}getIconName(t){switch(t){case ma.a.HOTEL_VIEW:return"icon-hotelview";case ma.a.NAVIGATOR:return"icon-navigator";case ma.a.CATALOG:return"icon-catalog";case ma.a.INVENTORY:return"icon-inventory";default:return""}}toggleCatalog(){this.settingsService.toggleCatalog()}toggleInventory(){this.settingsService.toggleInventory()}toggleFriendList(){this.settingsService.toggleFriendList()}toggleNavigator(){this.settingsService.toggleNavigator()}toggleMeMenu(){this.settingsService.toggleMeMenu()}visitDesktop(){u.a.instance.roomSessionManager.getSession(-1)&&(u.a.instance.communication.connection.send(new ca.a),u.a.instance.roomSessionManager.removeSession(-1))}visitHomeRoom(){this._navigatorService.goToHomeRoom()}get figure(){return this.sessionService.figure}get navigationListElement(){return this.navigationList&&this.navigationList.nativeElement||null}get unseenInventoryCount(){return this._inventoryService.unseenCount}get unseenFriendListCount(){return this._friendListService.notificationCount}get unseenAchievementsCount(){return this._achievementService.unseenCount}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(nn),i.Yb(fa),i.Yb(Os),i.Yb(Ya),i.Yb(El),i.Yb(m),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-toolbar-component"]],viewQuery:function(t,e){if(1&t&&i.cd(hm,1),2&t){let t;i.Hc(t=i.oc())&&(e.navigationList=t.first)}},inputs:{isInRoom:"isInRoom"},decls:10,vars:3,consts:[[1,"menu","vertical"],[1,"item","white","icon-rooms",3,"click"],[1,"item","white","icon-catalog",3,"click"],[1,"item","white","icon-inventory",3,"click"],[1,"item","white","icon-friends",3,"click"],[1,"menu","avatar"],["nitro-avatar-image","",1,"item","white","avatar-item",3,"figure","headOnly","direction","click"],[1,"menu","friends-bar"],[1,"item","icon-messenger",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.nc("click",function(){return e.clickIcon("navigator")}),i.cc(),i.dc(2,"div",2),i.nc("click",function(){return e.clickIcon("catalog")}),i.cc(),i.dc(3,"div",3),i.nc("click",function(){return e.clickIcon("inventory")}),i.cc(),i.dc(4,"div",4),i.nc("click",function(){return e.clickIcon("friendlist")}),i.cc(),i.cc(),i.dc(5,"div",5),i.Zb(6,"nitro-toolbar-me-menu-component"),i.dc(7,"div",6),i.nc("click",function(){return e.clickIcon("me_menu")}),i.cc(),i.cc(),i.dc(8,"div",7),i.dc(9,"div",8),i.nc("click",function(){return e.clickIcon("friendlist")}),i.cc(),i.cc()),2&t&&(i.Kb(7),i.yc("figure",e.figure)("headOnly",!0)("direction",2))},directives:[_m,qi],encapsulation:2,data:{animation:[Object(R.j)("inOutAnimation",[Object(R.i)(":enter",[Object(R.e)("1s bounceOut")])])]}}),t})();function um(t,e){1&t&&(i.dc(0,"div",5),i.dc(1,"div",6),i.Zb(2,"nitro-purse-main-component"),i.Zb(3,"nitro-notification-center-component"),i.cc(),i.cc())}function dm(t,e){1&t&&i.Zb(0,"nitro-hotelview-component")}function gm(t,e){if(1&t&&i.Zb(0,"nitro-toolbar-component",7),2&t){const t=i.qc();i.yc("isInRoom",!t.landingViewVisible)}}let mm=(()=>{class t{constructor(t,e){this._settingsService=t,this._ngZone=e,this.roomComponent=null,this._landingViewVisible=!0,this.onRoomEngineEvent=this.onRoomEngineEvent.bind(this),this.onInterstitialEvent=this.onInterstitialEvent.bind(this),this.onRoomEngineObjectEvent=this.onRoomEngineObjectEvent.bind(this),this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this)}ngOnInit(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomEngine.events&&(u.a.instance.roomEngine.events.addEventListener(d.a.INITIALIZED,this.onRoomEngineEvent),u.a.instance.roomEngine.events.addEventListener(d.a.DISPOSED,this.onRoomEngineEvent),u.a.instance.roomEngine.events.addEventListener(d.a.ENGINE_INITIALIZED,this.onInterstitialEvent),u.a.instance.roomEngine.events.addEventListener(d.a.OBJECTS_INITIALIZED,this.onInterstitialEvent),u.a.instance.roomEngine.events.addEventListener(d.a.NORMAL_MODE,this.onInterstitialEvent),u.a.instance.roomEngine.events.addEventListener(d.a.GAME_MODE,this.onInterstitialEvent),u.a.instance.roomEngine.events.addEventListener(C.ROOM_ZOOM,this.onRoomEngineEvent),u.a.instance.roomEngine.events.addEventListener(y.a.ROOM_BACKGROUND_COLOR,this.onRoomEngineEvent),u.a.instance.roomEngine.events.addEventListener(b.a.ROOM_COLOR,this.onRoomEngineEvent),u.a.instance.roomEngine.events.addEventListener(v.a.ROOM_COLOR,this.onRoomEngineEvent),u.a.instance.roomEngine.events.addEventListener(T.a.SELECTED,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(T.a.DESELECTED,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(T.a.ADDED,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(T.a.REMOVED,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(T.a.PLACED,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(T.a.REQUEST_MOVE,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(T.a.REQUEST_ROTATE,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(T.a.MOUSE_ENTER,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(T.a.MOUSE_LEAVE,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(O.a.OPEN_WIDGET,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(O.a.CLOSE_WIDGET,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(O.a.REQUEST_INTERNAL_LINK,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(O.a.REQUEST_ROOM_LINK,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(O.a.REQUEST_TROPHY,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(O.a.REQUEST_CREDITFURNI,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(A.a.OPEN_FURNI_CONTEXT_MENU,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(O.a.REQUEST_STICKIE,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(O.a.REQUEST_DIMMER,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(O.a.REQUEST_BACKGROUND_COLOR,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.addEventListener(O.a.REQUEST_FRIEND_FURNITURE_ENGRAVING,this.onRoomEngineObjectEvent)),u.a.instance.roomSessionManager.events&&(u.a.instance.roomSessionManager.events.addEventListener(N.a.CREATED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(N.a.STARTED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(N.a.ROOM_DATA,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(N.a.ENDED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(M.a.CHAT_EVENT,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(U.a.RSDE_DANCE,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(L.a.RSUBE_BADGES,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(w.a.DOORBELL,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(w.a.RSDE_REJECTED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(w.a.RSDE_ACCEPTED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(D.a.RSDPE_PRESETS,this.onRoomSessionEvent))})}ngOnDestroy(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomEngine.events&&(u.a.instance.roomEngine.events.removeEventListener(d.a.INITIALIZED,this.onRoomEngineEvent),u.a.instance.roomEngine.events.removeEventListener(d.a.DISPOSED,this.onRoomEngineEvent),u.a.instance.roomEngine.events.removeEventListener(C.ROOM_ZOOM,this.onRoomEngineEvent),u.a.instance.roomEngine.events.removeEventListener(y.a.ROOM_BACKGROUND_COLOR,this.onRoomEngineEvent),u.a.instance.roomEngine.events.removeEventListener(b.a.ROOM_COLOR,this.onRoomEngineEvent),u.a.instance.roomEngine.events.removeEventListener(v.a.ROOM_COLOR,this.onRoomEngineEvent),u.a.instance.roomEngine.events.removeEventListener(T.a.SELECTED,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(T.a.DESELECTED,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(T.a.ADDED,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(T.a.REMOVED,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(T.a.PLACED,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(T.a.REQUEST_MOVE,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(T.a.REQUEST_ROTATE,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(T.a.MOUSE_ENTER,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(T.a.MOUSE_LEAVE,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(O.a.OPEN_WIDGET,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(O.a.CLOSE_WIDGET,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(O.a.REQUEST_INTERNAL_LINK,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(O.a.REQUEST_ROOM_LINK,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(O.a.REQUEST_TROPHY,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(O.a.REQUEST_CREDITFURNI,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(A.a.OPEN_FURNI_CONTEXT_MENU,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(O.a.REQUEST_STICKIE,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(O.a.REQUEST_DIMMER,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(O.a.REQUEST_BACKGROUND_COLOR,this.onRoomEngineObjectEvent),u.a.instance.roomEngine.events.removeEventListener(O.a.REQUEST_FRIEND_FURNITURE_ENGRAVING,this.onRoomEngineObjectEvent)),u.a.instance.roomSessionManager.events&&(u.a.instance.roomSessionManager.events.removeEventListener(N.a.CREATED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(N.a.STARTED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(N.a.ROOM_DATA,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(N.a.ENDED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(M.a.CHAT_EVENT,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(U.a.RSDE_DANCE,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(L.a.RSUBE_BADGES,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(w.a.DOORBELL,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(w.a.RSDE_REJECTED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(w.a.RSDE_ACCEPTED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(D.a.RSDPE_PRESETS,this.onRoomSessionEvent))})}onRoomEngineEvent(t){if(!t)return;if(P.isRoomPreviewerId(t.roomId))return;const e=u.a.instance.roomSessionManager.getSession(t.roomId);if(e)switch(t.type){case d.a.INITIALIZED:return void(this.roomComponent&&(this.roomComponent.prepareRoom(e),u.a.instance.roomEngine.setActiveRoomId(t.roomId),this.roomComponent.createWidget(x.a.CHAT_WIDGET,Vr),this.roomComponent.createWidget(x.a.INFOSTAND,br),this.roomComponent.createWidget(x.a.LOCATION_WIDGET,null),this.roomComponent.createWidget(x.a.INTERNAL_LINK,null),this.roomComponent.createWidget(x.a.ROOM_LINK,null),this.roomComponent.createWidget(x.a.CUSTOM_STACK_HEIGHT,dn),this.roomComponent.createWidget(x.a.ROOM_DIMMER,Rn),this.roomComponent.createWidget(x.a.FURNI_STICKIE_WIDGET,Nn),this.roomComponent.createWidget(x.a.DOORBELL,Or),this.roomComponent.createWidget(x.a.FURNI_TROPHY_WIDGET,xn),this.roomComponent.createWidget(x.a.FURNI_CREDIT_WIDGET,cn),this.roomComponent.createWidget(x.a.FURNITURE_CONTEXT_MENU,an),this.roomComponent.createWidget(x.a.ROOM_BACKGROUND_COLOR,Bi),this.roomComponent.createWidget(x.a.FRIEND_FURNI_CONFIRM,vn),this.roomComponent.createWidget(x.a.FRIEND_FURNI_ENGRAVING,An),this.roomComponent.createWidget(x.a.ROOM_TOOLS,va),this.roomComponent.roomSession.isSpectator||(this.roomComponent.createWidget(x.a.CHAT_INPUT_WIDGET,fi),this.roomComponent.createWidget(x.a.AVATAR_INFO,_i),this.roomComponent.createWidget(x.a.FURNI_CHOOSER,Li),this.roomComponent.createWidget(x.a.USER_CHOOSER,ki))));case d.a.DISPOSED:return void(this.roomComponent&&this.roomComponent.endRoom());case C.ROOM_ZOOM:{const e=t;let s=e.level<1?.5:1<<Math.floor(e.level)-1;return(e.forceFlip||e.asDelta)&&(s=e.level),void(this.roomComponent&&u.a.instance.roomEngine.setRoomInstanceRenderingCanvasScale(this.roomComponent.roomSession.roomId,this.roomComponent.getFirstCanvasId(),s,null,null,!1,e.asDelta))}case b.a.ROOM_COLOR:if(this.roomComponent){const e=t;console.log(t),e._Str_11464?this.roomComponent.setRoomColorizerColor(16711680,255):this.roomComponent.setRoomColorizerColor(e.color,e._Str_5123)}return;case v.a.ROOM_COLOR:return void(this.roomComponent&&this.roomComponent._Str_2485(t));case y.a.ROOM_BACKGROUND_COLOR:if(this.roomComponent){const e=t;e.enable?this.roomComponent.setRoomBackgroundColor(e.hue,e.saturation,e.lightness):this.roomComponent.setRoomBackgroundColor(0,0,0)}return}}onInterstitialEvent(t){t&&(t.type!==d.a.GAME_MODE&&t.type!==d.a.NORMAL_MODE||this.roomComponent&&this.roomComponent.onRoomEngineEvent(t))}onRoomEngineObjectEvent(t){this.roomComponent&&this.roomComponent.onRoomEngineObjectEvent(t)}onRoomSessionEvent(t){if(t)switch(t.type){case N.a.CREATED:return this._ngZone.run(()=>{this._landingViewVisible=!1}),void u.a.instance.roomSessionManager.startSession(t.session);case N.a.STARTED:case N.a.ROOM_DATA:return;case N.a.ENDED:return this.roomComponent&&this.roomComponent.endRoom(),void this._ngZone.run(()=>{this._landingViewVisible=t.openLandingView});default:return void(this.roomComponent&&this.roomComponent.processEvent(t))}}get landingViewVisible(){return this._landingViewVisible}get avatarEditorVisible(){return this._settingsService.avatarEditorVisible}get catalogVisible(){return this._settingsService.catalogVisible}get navigatorVisible(){return this._settingsService.navigatorVisible}get inventoryVisible(){return this._settingsService.inventoryVisible}get friendListVisible(){return this._settingsService.friendListVisible}get achievementsVisible(){return this._settingsService.achievementsVisible}get chatHistoryVisible(){return this._settingsService.chatHistoryVisible}get isReady(){return this._settingsService.isReady}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(m),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-main-component"]],viewQuery:function(t,e){if(1&t&&i.cd(Us,1),2&t){let t;i.Hc(t=i.oc())&&(e.roomComponent=t.first)}},decls:17,vars:10,consts:[[1,"nitro-main-component"],["class","nitro-right-side",4,"ngIf"],[3,"visible"],[4,"ngIf"],[3,"isInRoom",4,"ngIf"],[1,"nitro-right-side"],[1,"d-flex","flex-column"],[3,"isInRoom"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Zb(1,"nitro-alert-center-component"),i.Uc(2,um,4,0,"div",1),i.Zb(3,"nitro-achievements-main-component",2),i.Zb(4,"nitro-call-for-help-main-component"),i.Zb(5,"nitro-pedia-main-component"),i.Zb(6,"nitro-avatar-editor-main-component",2),i.Uc(7,dm,1,0,"nitro-hotelview-component",3),i.Uc(8,gm,1,1,"nitro-toolbar-component",4),i.Zb(9,"nitro-friendlist-main-component",2),i.Zb(10,"nitro-catalog-main-component",2),i.Zb(11,"nitro-navigator-main-component",2),i.Zb(12,"nitro-inventory-main-component",2),i.Zb(13,"nitro-user-profile-component"),i.Zb(14,"nitro-chat-history-component",2),i.Zb(15,"nitro-wired-main-component"),i.Zb(16,"nitro-room-component"),i.cc()),2&t&&(i.Kb(2),i.yc("ngIf",e.isReady),i.Kb(1),i.yc("visible",e.achievementsVisible),i.Kb(3),i.yc("visible",e.avatarEditorVisible),i.Kb(1),i.yc("ngIf",e.landingViewVisible),i.Kb(1),i.yc("ngIf",e.isReady),i.Kb(1),i.yc("visible",e.friendListVisible),i.Kb(1),i.yc("visible",e.catalogVisible),i.Kb(1),i.yc("visible",e.navigatorVisible),i.Kb(1),i.yc("visible",e.inventoryVisible),i.Kb(2),i.yc("visible",e.chatHistoryVisible))},directives:[Ga,p.n,fo,Io,Oo,jo,Zo,D_,rh,ol,Xl,ru,xg,Us,kg,Xg,Zg,lm],encapsulation:2,data:{animation:[Object(R.j)("inOutAnimation",[Object(R.i)(":enter",[Object(R.h)({top:"-100%"}),Object(R.e)("1s ease-out",Object(R.h)({top:0}))])])]}}),t})();function pm(t,e){if(1&t&&i.Zb(0,"nitro-loading",3),2&t){const t=i.qc();i.yc("message",t.message)("percentage",t.percentage)("hideProgress",t.hideProgress)}}function fm(t,e){1&t&&i.Zb(0,"nitro-main-component")}let Em=(()=>{class t{constructor(t,e){this._settingsService=t,this._ngZone=e,this.message="Starting",this.percentage=0,this.hideProgress=!1,this.isLocalizationReady=!1,this.isRoomEngineReady=!1,this.isAvatarRenderReady=!1,this.isError=!1,this.onNitroEvent=this.onNitroEvent.bind(this)}ngOnInit(){this._ngZone.runOutsideAngular(()=>{if(!NitroConfig)throw new Error("NitroConfig is not defined!");(class{static isWebGLAvailable(){return g.t.isWebGLSupported()}}).isWebGLAvailable()?(u.a.instance||u.a.bootstrap(),u.a.instance.events.addEventListener(_.a.CONNECTION_ESTABLISHED,this.onNitroEvent),u.a.instance.events.addEventListener(_.a.CONNECTION_HANDSHAKING,this.onNitroEvent),u.a.instance.events.addEventListener(_.a.CONNECTION_HANDSHAKE_FAILED,this.onNitroEvent),u.a.instance.events.addEventListener(_.a.CONNECTION_AUTHENTICATED,this.onNitroEvent),u.a.instance.events.addEventListener(_.a.CONNECTION_ERROR,this.onNitroEvent),u.a.instance.events.addEventListener(_.a.CONNECTION_CLOSED,this.onNitroEvent),u.a.instance.localization.events.addEventListener(l.a.LOADED,this.onNitroEvent),u.a.instance.roomEngine.events.addEventListener(d.a.ENGINE_INITIALIZED,this.onNitroEvent),u.a.instance.avatar.events.addEventListener(c.a.AVATAR_RENDER_READY,this.onNitroEvent),u.a.instance.core.configuration.events.addEventListener(a.a.LOADED,this.onNitroEvent),u.a.instance.core.configuration.events.addEventListener(a.a.FAILED,this.onNitroEvent),u.a.instance.core.configuration.init(),this._connectionTimeout=setTimeout(this.onConnectionTimeout,15e3)):this.onNitroEvent(new o.a(u.a.WEBGL_UNAVAILABLE))})}ngOnDestroy(){this._ngZone.runOutsideAngular(()=>{u.a.instance.events.removeEventListener(_.a.CONNECTION_ESTABLISHED,this.onNitroEvent),u.a.instance.events.removeEventListener(_.a.CONNECTION_HANDSHAKING,this.onNitroEvent),u.a.instance.events.removeEventListener(_.a.CONNECTION_HANDSHAKE_FAILED,this.onNitroEvent),u.a.instance.events.removeEventListener(_.a.CONNECTION_AUTHENTICATED,this.onNitroEvent),u.a.instance.events.removeEventListener(_.a.CONNECTION_ERROR,this.onNitroEvent),u.a.instance.events.removeEventListener(_.a.CONNECTION_CLOSED,this.onNitroEvent),u.a.instance.localization.events.removeEventListener(l.a.LOADED,this.onNitroEvent),u.a.instance.roomEngine.events.removeEventListener(d.a.ENGINE_INITIALIZED,this.onNitroEvent),u.a.instance.avatar.events.removeEventListener(c.a.AVATAR_RENDER_READY,this.onNitroEvent),u.a.instance.core.configuration.events.removeEventListener(a.a.LOADED,this.onNitroEvent),u.a.instance.core.configuration.events.removeEventListener(a.a.FAILED,this.onNitroEvent),clearTimeout(this._connectionTimeout)})}getPreloadAssetUrls(){const t=[],e=u.a.instance.getConfiguration("preload.assets.urls");if(e&&e.length)for(const s of e)t.push(u.a.instance.core.configuration.interpolate(s));return t}onNitroEvent(t){if(t)switch(t.type){case a.a.LOADED:return void u.a.instance.localization.init();case a.a.FAILED:return void this._ngZone.run(()=>{this.isError=!0,this.message="Configuration Failed",this.percentage=0,this.hideProgress=!0});case u.a.WEBGL_UNAVAILABLE:return void this._ngZone.run(()=>{this.isError=!0,this.message="WebGL Required",this.percentage=0,this.hideProgress=!0});case u.a.WEBGL_CONTEXT_LOST:return this._ngZone.run(()=>{this.isError=!0,this.message="WebGL Context Lost - Reloading",this.percentage=0,this.hideProgress=!0}),void setTimeout(()=>location.reload(),1500);case _.a.CONNECTION_HANDSHAKING:this._ngZone.run(()=>{this.message="Handshaking",this.percentage=this.percentage+20,this.hideProgress=!1}),clearTimeout(this._connectionTimeout);break;case _.a.CONNECTION_HANDSHAKE_FAILED:this._ngZone.run(()=>{this.isError=!0,this.message="Handshake Failed",this.percentage=0,this.hideProgress=!0});break;case _.a.CONNECTION_AUTHENTICATED:this._ngZone.run(()=>{this.message="Preparing Nitro",this.percentage=this.percentage+20,this.hideProgress=!1}),u.a.instance.init(),clearTimeout(this._connectionTimeout);break;case _.a.CONNECTION_ERROR:this._ngZone.run(()=>{this.isError=!0,this.message="Connection Error",this.percentage=0,this.hideProgress=!0});break;case _.a.CONNECTION_CLOSED:u.a.instance.roomEngine&&u.a.instance.roomEngine.dispose(),this._ngZone.run(()=>{this.isError=!0,this.message="Connection Closed",this.percentage=0,this.hideProgress=!0}),h.a.call("disconnect",-1,"client.init.handshake.fail");break;case l.a.LOADED:this._ngZone.run(()=>{this.isLocalizationReady=!0,this.percentage=this.percentage+20,this.hideProgress=!1}),u.a.instance.core.asset.downloadAssets(this.getPreloadAssetUrls(),t=>{u.a.instance.communication.init()});break;case d.a.ENGINE_INITIALIZED:this._ngZone.run(()=>{this.isRoomEngineReady=!0,this.percentage=this.percentage+20,this.hideProgress=!1}),u.a.instance.communication.connection.onReady();break;case c.a.AVATAR_RENDER_READY:this._ngZone.run(()=>{this.isAvatarRenderReady=!0,this.percentage=this.percentage+20,this.hideProgress=!1})}}get isReady(){return this._settingsService.isReady=this.isLocalizationReady&&this.isRoomEngineReady&&this.isAvatarRenderReady,this.isLocalizationReady&&this.isRoomEngineReady&&this.isAvatarRenderReady||!1}onConnectionTimeout(){h.a.call("logDebug","TcpAuth control socket security error")}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(m),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["app-root"]],decls:3,vars:2,consts:[["id","nitro"],[3,"message","percentage","hideProgress",4,"ngIf"],[4,"ngIf"],[3,"message","percentage","hideProgress"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Uc(1,pm,1,3,"nitro-loading",1),i.Uc(2,fm,1,0,"nitro-main-component",2),i.cc()),2&t&&(i.Kb(1),i.yc("ngIf",!e.isReady||e.isError),i.Kb(1),i.yc("ngIf",e.isReady&&!e.isError))},directives:[p.n,I,mm],encapsulation:2}),t})();var Sm=s("dbUT"),Im=s("oOf3"),Rm=s("5eHb");const bm={suppressScrollX:!0};let vm=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[{provide:Oi.a,useValue:bm},Ts],imports:[[n.a,r.a,p.b,Ti.f,Ti.p,Rm.a.forRoot(),L_.e,L_.j,L_.h,Im.a,hn.a,Oi.c,Sm.a.forRoot(),Gi.b],p.b,Ti.f,Ti.p,Rm.a,L_.e,L_.j,L_.h,Im.a,hn.a,Oi.c,Sm.a,Gi.b]}),t})(),Tm=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[Ya],imports:[[vm]]}),t})();const Om=["nitro-avatar-model-viewer-component",""],ym=function(t){return{active:t}},Am=function(t){return{selected:t}};function Cm(t,e){if(1&t){const t=i.ec();i.dc(0,"button",3),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc(2).selectCategory(s.name)}),i.Zb(1,"i",4),i.cc()}if(2&t){const t=e.$implicit,s=i.qc(2);i.yc("ngClass",i.Cc(5,ym,s.activeCategory===t)),i.Kb(1),i.Nb("icon ",t.name,"-icon"),i.yc("ngClass",i.Cc(7,Am,s.activeCategory===t))}}function Mm(t,e){if(1&t&&(i.bc(0),i.Uc(1,Cm,2,9,"button",2),i.ac()),2&t){const t=i.qc();i.Kb(1),i.yc("ngForOf",t.categories.getValues())}}function Um(t,e){if(1&t){const t=i.ec();i.bc(0),i.dc(1,"button",3),i.nc("click",function(){return i.Lc(t),i.qc().selectGender("M")}),i.Zb(2,"i",5),i.cc(),i.dc(3,"button",3),i.nc("click",function(){return i.Lc(t),i.qc().selectGender("F")}),i.Zb(4,"i",6),i.cc(),i.ac()}if(2&t){const t=i.qc();i.Kb(1),i.yc("ngClass",i.Cc(4,ym,"M"===t.gender)),i.Kb(1),i.yc("ngClass",i.Cc(6,Am,"M"===t.gender)),i.Kb(1),i.yc("ngClass",i.Cc(8,ym,"F"===t.gender)),i.Kb(1),i.yc("ngClass",i.Cc(10,Am,"F"===t.gender))}}const Dm=function(t,e){return{"col-6 pr-1":t,"flex-grow-1":e}};function wm(t,e){if(1&t&&(i.dc(0,"div",12),i.Zb(1,"div",13),i.cc()),2&t){const t=i.qc(2);i.yc("ngClass",i.Dc(6,Dm,t.maxPaletteCount>=2,t.maxPaletteCount<=1)),i.Kb(1),i.yc("model",t.model)("category",t.activeCategory)("paletteSet",t.activeCategory.getPalette(0))("paletteIndex",0)("maxPaletteCount",t.maxPaletteCount)}}function Nm(t,e){if(1&t&&(i.dc(0,"div",14),i.Zb(1,"div",13),i.cc()),2&t){const t=i.qc(2);i.Kb(1),i.yc("model",t.model)("category",t.activeCategory)("paletteSet",t.activeCategory.getPalette(1))("paletteIndex",1)("maxPaletteCount",t.maxPaletteCount)}}function Lm(t,e){if(1&t&&(i.bc(0),i.dc(1,"div",7),i.Zb(2,"div",8),i.cc(),i.dc(3,"div",9),i.Uc(4,wm,2,9,"div",10),i.Uc(5,Nm,2,5,"div",11),i.cc(),i.ac()),2&t){const t=i.qc();i.Kb(2),i.yc("model",t.model)("category",t.activeCategory)("partSet",t.activeCategory.parts),i.Kb(2),i.yc("ngIf",t.maxPaletteCount>=1),i.Kb(1),i.yc("ngIf",2===t.maxPaletteCount)}}let xm=(()=>{class t{constructor(t){this._avatarEditorService=t,this.model=null,this.gender=null}ngOnChanges(t){this.prepareModel()}prepareModel(){this.model&&(this.model.setViewer(this),this.model.init(),this._activeCategory=null,this.selectFirstCategory())}selectFirstCategory(){if(this.model)for(const t of this.model.categories.getKeys())if(t)return void this.selectCategory(t)}selectCategory(t){if(!this.model||!t)return;const e=this.model.categories.getValue(t);if(e){e.init(),this._activeCategory=e;for(const t of this._activeCategory.parts)if(t&&t.isSelected){this.model.maxPaletteCount=t.colorLayerCount;break}}}selectGender(t){this.model&&t&&this._avatarEditorService.component&&(this._avatarEditorService.component.gender=t)}get categories(){return this.model.categories}get activeCategory(){return this._activeCategory}get canSetGender(){return this.model&&this.model.canSetGender}get maxPaletteCount(){return this.model&&this.model.maxPaletteCount||1}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(ai))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-avatar-model-viewer-component",""]],inputs:{model:"model",gender:"gender"},features:[i.Ib],attrs:Om,decls:4,vars:3,consts:[[1,"btn-group","w-100","my-1",2,"min-height","45px","position","absolute","top","-14px","right","-193px","width","198px !important","display","flex","justify-content","center"],[4,"ngIf"],["type","button","class","btn btn-secondary d-flex justify-content-center align-items-center avatar-editor-button",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-secondary","d-flex","justify-content-center","align-items-center","avatar-editor-button",3,"ngClass","click"],[3,"ngClass"],[1,"icon","male-icon",3,"ngClass"],[1,"icon","female-icon",3,"ngClass"],[1,"d-flex"],["nitro-avatar-set-viewer-component","",1,"w-100",3,"model","category","partSet"],[1,"d-flex","no-gutters","mt-1"],["class","d-flex flex-column",3,"ngClass",4,"ngIf"],["class","d-flex col-6 pl-1 flex-column",4,"ngIf"],[1,"d-flex","flex-column",3,"ngClass"],["nitro-avatar-palette-viewer-component","",3,"model","category","paletteSet","paletteIndex","maxPaletteCount"],[1,"d-flex","col-6","pl-1","flex-column"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Uc(1,Mm,2,1,"ng-container",1),i.Uc(2,Um,5,12,"ng-container",1),i.cc(),i.Uc(3,Lm,6,5,"ng-container",1)),2&t&&(i.Kb(1),i.yc("ngIf",e.categories.length>1),i.Kb(1),i.yc("ngIf",e.canSetGender),i.Kb(1),i.yc("ngIf",e.activeCategory))},encapsulation:2}),t})();const Pm=["nitro-avatar-palette-viewer-component",""],Fm=function(t){return{active:t}},km=function(t){return{"background-color":t}};function Wm(t,e){if(1&t){const t=i.ec();i.dc(0,"div",3),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc().selectPalette(s)}),i.Zb(1,"button",4),i.cc()}if(2&t){const t=e.$implicit;i.Kb(1),i.yc("ngClass",i.Cc(2,Fm,t.isSelected))("ngStyle",i.Cc(4,km,t.color))}}const Vm=function(t,e){return{"grid-6":t,"grid-12":e}};let Gm=(()=>{class t{constructor(){this.model=null,this.category=null,this.paletteSet=[],this.paletteIndex=-1,this.maxPaletteCount=1}ngOnChanges(t){t.category&&this.perfectScrollBar&&this.perfectScrollBar.directiveRef&&this.perfectScrollBar.directiveRef.scrollToTop()}selectPalette(t){if(!(this.model&&this.category&&this.paletteSet&&t))return;if(!t||!this.model)return;const e=this.paletteSet.indexOf(t);-1!==e&&this.model.selectColor(this.category.name,e,this.paletteIndex)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-avatar-palette-viewer-component",""]],viewQuery:function(t,e){if(1&t&&i.cd(Oi.b,1),2&t){let t;i.Hc(t=i.oc())&&(e.perfectScrollBar=t.first)}},inputs:{model:"model",category:"category",paletteSet:"paletteSet",paletteIndex:"paletteIndex",maxPaletteCount:"maxPaletteCount"},features:[i.Ib],attrs:Pm,decls:3,vars:5,consts:[[1,"grid-container","palette-grid",2,"min-height","84px","max-height","84px","height","84px"],[1,"grid-items",3,"ngClass"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button",1,"btn","btn-primary","detail-info",2,"border-radius","50%","box-shadow","none !important","border-color","#494949","width","20px",3,"ngClass","ngStyle"]],template:function(t,e){1&t&&(i.dc(0,"perfect-scrollbar",0),i.dc(1,"div",1),i.Uc(2,Wm,2,6,"div",2),i.cc(),i.cc()),2&t&&(i.Kb(1),i.yc("ngClass",i.Dc(2,Vm,e.maxPaletteCount>=2,e.maxPaletteCount<=1)),i.Kb(1),i.yc("ngForOf",e.paletteSet))},directives:[Oi.b,p.l,p.m,p.o],encapsulation:2}),t})();const Hm=["nitro-avatar-set-viewer-component",""];function Bm(t,e){1&t&&i.Zb(0,"i",6)}const jm=function(t){return{active:t}},Km=function(t){return{"background-image":t}};function zm(t,e){if(1&t){const t=i.ec();i.dc(0,"div",3),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc().selectPart(s)}),i.dc(1,"button",4),i.Uc(2,Bm,1,0,"i",5),i.cc(),i.cc()}if(2&t){const t=e.$implicit;i.Kb(1),i.yc("ngClass",i.Cc(3,jm,t.isSelected))("ngStyle",t.imageUrl&&i.Cc(5,Km,"url("+t.imageUrl+")")),i.Kb(1),i.yc("ngIf",t.isClear)}}let Ym=(()=>{class t{constructor(){this.model=null,this.category=null,this.partSet=[]}ngOnChanges(t){t.category&&this.perfectScrollBar&&this.perfectScrollBar.directiveRef&&this.perfectScrollBar.directiveRef.scrollToTop()}selectPart(t){if(!(this.model&&this.category&&this.partSet&&t))return;const e=this.partSet.indexOf(t);-1!==e&&this.model.selectPart(this.category.name,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-avatar-set-viewer-component",""]],viewQuery:function(t,e){if(1&t&&i.cd(Oi.b,1),2&t){let t;i.Hc(t=i.oc())&&(e.perfectScrollBar=t.first)}},inputs:{model:"model",category:"category",partSet:"partSet"},features:[i.Ib],attrs:Hm,decls:3,vars:1,consts:[[1,"grid-container",2,"min-height","158px","max-height","211px","height","211px","margin-top","10px","margin-bottom","10px"],[1,"grid-items","grid-6"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button",1,"btn","btn-secondary","detail-info","has-image",2,"height","55px","border-radius","50px","background-color","rgb(187, 187, 187)","width","51px",3,"ngClass","ngStyle"],["class","fas fa-times h5 m-0",4,"ngIf"],[1,"fas","fa-times","h5","m-0"]],template:function(t,e){1&t&&(i.dc(0,"perfect-scrollbar",0),i.dc(1,"div",1),i.Uc(2,zm,3,7,"div",2),i.cc(),i.cc()),2&t&&(i.Kb(2),i.yc("ngForOf",e.partSet))},directives:[Oi.b,p.m,p.l,p.o,p.n],encapsulation:2}),t})(),Xm=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[ai],imports:[[vm]]}),t})();i.Oc(jo,[p.n,li,vi,p.m,p.l,xm,qi],[Fs]),i.Oc(xm,[p.n,p.m,p.l,Ym,Gm],[]);let Zm=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[So],imports:[[vm]]}),t})(),qm=(()=>{class t{constructor(t,e){this._catalogService=t,this._ngZone=e}hide(){this._catalogService.component&&this._catalogService.component.setInsufficientFunds(!1)}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Sc),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-catalog-confirm-purchase-insufficient-funds"]],decls:11,vars:6,consts:[["dragHandle",".card-header",1,"card","nitro-catalog-confirm-purchase-component",2,"width","350px",3,"bringToTop","draggable"],[1,"card-header",2,"color","#636363","font-weight","bold","background","transparent","border","0"],["type","button",1,"close",2,"margin-top","-27px",3,"click"],[1,"fas","fa-times"],[1,"d-flex","card-body",2,"color","#888","padding","0px 10px","font-size","16px"],[1,"d-flex","flex-grow-1","flex-column","justify-content-center","p-2"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Wc(2),i.rc(3,"translate"),i.dc(4,"button",2),i.nc("click",function(){return e.hide()}),i.Zb(5,"i",3),i.cc(),i.cc(),i.dc(6,"div",4),i.dc(7,"div",5),i.dc(8,"p"),i.Wc(9),i.rc(10,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Yc(" ",i.sc(3,2,"catalog.alert.notenough.title")," "),i.Kb(7),i.Yc(" ",i.sc(10,4,"catalog.alert.notenough.credits.description")," "))},directives:[li,vi],pipes:[Fs],encapsulation:2}),t})();const Qm=["imageElement"];function Jm(t,e){if(1&t&&(i.dc(0,"div",14),i.Wc(1),i.cc()),2&t){const t=i.qc();i.Kb(1),i.Yc(" x",t.quantity," ")}}const $m=function(t){return{"background-image":t}};let tp=(()=>{class t{constructor(t,e){this._catalogService=t,this._ngZone=e,this.page=null,this.offer=null,this.quantity=1,this.extra=null,this.completed=!1,this._imageUrl=""}ngOnChanges(t){const e=t.offer.currentValue;e&&t.offer.previousValue!==e&&this.refresh()}hide(){this._catalogService.component&&this._catalogService.component.hidePurchaseConfirmation()}refresh(){this.refreshImage()}refreshImage(){this._ngZone.runOutsideAngular(()=>{this._imageUrl="";const t=this._catalogService.component&&this._catalogService.component.roomPreviewer;if(!t)return;const e=t.getRoomPreviewObject();if(e){const t=e.visualization.getImage(16711680,-1),s=Do.a.generateImage(t);s&&(this._imageUrl=s.src)}})}purchase(){this._catalogService.purchase(this.page,this.offer,this.quantity,this.extra)}completePurchase(){this._ngZone.runOutsideAngular(()=>{const t=new HTMLImageElement;t.className="toolbar-icon-animation",t.src=this._imageUrl,t.style.visibility="hidden",this.imageElement&&this.imageElement.nativeElement.appendChild(t);const e=t.getBoundingClientRect(),s=new qg.a(t,e.x,e.y);s.iconName=ma.a.INVENTORY,u.a.instance.roomEngine.events.dispatchEvent(s)})}get costCredits(){return this.offer.priceCredits*this.quantity}get costPoints(){return this.offer.priceActivityPoints*this.quantity}get pointsType(){return this.offer.priceActivityPointsType}get imageUrl(){return this._imageUrl}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Sc),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-catalog-confirm-purchase-component"]],viewQuery:function(t,e){if(1&t&&i.cd(Qm,1),2&t){let t;i.Hc(t=i.oc())&&(e.imageElement=t.first)}},inputs:{page:"page",offer:"offer",quantity:"quantity",extra:"extra",completed:"completed"},features:[i.Ib],decls:17,vars:7,consts:[[1,"nitro-catalog-confirm-purchase-component","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-3"],[1,"col-6","d-flex","flex-column",2,"max-width","100%","justify-content","center","flex","none","flex-direction","row !important"],[1,"product-preview","bg-secondary","rounded",3,"ngStyle"],["imageElement",""],[1,"col-6","d-flex","flex-column","align-items-center","justify-content-center"],["class","offer-quantity quantity-amount",4,"ngIf"],[1,"row","align-items-end","pt-0","px-3","pb-3"],[1,"col","btn-group"],["type","button",1,"btn","btn-success","btn-catalog-buy",2,"font-size","17px !important","font-weight","bold",3,"click"],[1,"offer-quantity","quantity-amount"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"h6",2),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",3),i.nc("click",function(){return e.hide()}),i.Zb(6,"i",4),i.cc(),i.cc(),i.dc(7,"div",5),i.dc(8,"div",6),i.Zb(9,"div",7,8),i.cc(),i.dc(11,"div",9),i.Uc(12,Jm,2,1,"div",10),i.cc(),i.cc(),i.dc(13,"div",11),i.dc(14,"div",12),i.dc(15,"button",13),i.nc("click",function(){return e.purchase()}),i.Wc(16," Confirmar "),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Yc(" ",i.sc(4,3,"catalog.purchase_confirmation.title")," "),i.Kb(6),i.yc("ngStyle",i.Cc(5,$m,"url("+e.imageUrl+")")),i.Kb(3),i.yc("ngIf",e.quantity))},directives:[li,vi,p.o,p.n],pipes:[Fs],encapsulation:2}),t})();function ep(t,e){if(1&t&&(i.dc(0,"p",13),i.Wc(1),i.Zb(2,"img",14),i.cc()),2&t){const t=i.qc();i.Kb(1),i.Yc("",t.subscription.priceCredits," "),i.Kb(1),i.yc("src",t.getCurrencyUrl(-1),i.Nc)}}function sp(t,e){if(1&t&&(i.dc(0,"p",13),i.Wc(1),i.Zb(2,"img",15),i.cc()),2&t){const t=i.qc();i.Kb(1),i.Yc(" + ",t.subscription.priceActivityPoints," "),i.Kb(1),i.yc("src",t.getCurrencyUrl(t.subscription.priceActivityPointsType),i.Nc)}}let ip=(()=>{class t{constructor(t,e){this._catalogService=t,this._ngZone=e,this.subscription=null}getSubscriptionText(){let t=u.a.instance.localization.getValue("catalog.vip.buy.confirm.end_date");return t=t.replace("%month%",this.subscription.month.toString()),t=t.replace("%day%",this.subscription.day.toString()),t=t.replace("%year%",this.subscription.year.toString()),t}getSubscriptionHeader(){const t=this._catalogService.purse,e=0==this.subscription.months?"days":"months",s=u.a.instance.localization.getValue("catalog.vip.buy.confirm."+(t.clubDays>0||t.clubPeriods>0?"extension.":"subscription.")+e),i=0==this.subscription.months?this.subscription.extraDays:this.subscription.months;return s.replace("%NUM_"+e.toUpperCase()+"%",i.toString())}getCurrencyUrl(t){return u.a.instance.getConfiguration("currency.asset.icon.url").replace("%type%",t.toString())}hide(){this._catalogService.component&&this._catalogService.component.hidePurchaseConfirmation()}purchase(){this._catalogService.purchaseById(this._catalogService.activePage.pageId,this.subscription.offerId,1)}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Sc),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-catalog-confirm-vip-subscription-component"]],inputs:{subscription:"subscription"},decls:24,vars:13,consts:[["dragHandle",".card-header",1,"card","nitro-catalog-confirm-vip-subscription-component",3,"bringToTop","draggable"],[1,"card-header"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","card-body","flex-row"],[1,"icon","icon-catalogue-hc_big"],[1,"ml-3"],[1,"d-flex","align-items-center","justify-content-center","bg-secondary","rounded","p-1"],["class","mb-0",4,"ngIf"],[1,"card-footer"],[1,"d-flex","justify-space-between","button-container","btn-group"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[1,"mb-0"],[1,"px-1",3,"src"],[1,"pl-1",3,"src"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Wc(2),i.rc(3,"translate"),i.dc(4,"button",2),i.nc("click",function(){return e.hide()}),i.Zb(5,"i",3),i.cc(),i.cc(),i.dc(6,"div",4),i.Zb(7,"i",5),i.dc(8,"div",6),i.dc(9,"h6"),i.Wc(10),i.cc(),i.dc(11,"p"),i.Wc(12),i.cc(),i.dc(13,"div",7),i.Uc(14,ep,3,2,"p",8),i.Uc(15,sp,3,2,"p",8),i.cc(),i.cc(),i.cc(),i.dc(16,"div",9),i.dc(17,"div",10),i.dc(18,"button",11),i.nc("click",function(){return e.hide()}),i.Wc(19),i.rc(20,"translate"),i.cc(),i.dc(21,"button",12),i.nc("click",function(){return e.purchase()}),i.Wc(22),i.rc(23,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Yc(" ",i.sc(3,7,"catalog.club.buy.confirm")," "),i.Kb(8),i.Xc(e.getSubscriptionHeader()),i.Kb(2),i.Xc(e.getSubscriptionText()),i.Kb(2),i.yc("ngIf",e.subscription.priceCredits),i.Kb(1),i.yc("ngIf",e.subscription.priceActivityPoints),i.Kb(4),i.Xc(i.sc(20,9,"catalog.purchase_confirmation.cancel")),i.Kb(3),i.Xc(i.sc(23,11,"catalog.club.buy.subscribe")))},directives:[li,vi,p.n],pipes:[Fs],encapsulation:2}),t})();function np(t,e){if(1&t&&i.Zb(0,"nitro-catalog-navigation-item-component",3),2&t){const t=i.qc().$implicit;i.yc("catalogPage",t)}}function rp(t,e){if(1&t&&(i.bc(0),i.Uc(1,np,1,1,"nitro-catalog-navigation-item-component",2),i.ac()),2&t){const t=e.$implicit;i.Kb(1),i.yc("ngIf",t.visible)}}let ap=(()=>{class t{constructor(t){this._catalogService=t,this.catalogPage=null}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Sc))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-catalog-navigation-set-component"]],inputs:{catalogPage:"catalogPage"},decls:2,vars:1,consts:[[1,"list-group","list-group-flush"],[4,"ngFor","ngForOf"],[3,"catalogPage",4,"ngIf"],[3,"catalogPage"]],template:function(t,e){1&t&&(i.dc(0,"ul",0),i.Uc(1,rp,2,1,"ng-container",1),i.cc()),2&t&&(i.Kb(1),i.yc("ngForOf",e.catalogPage.children))},encapsulation:2}),t})();const op=function(t,e){return{"fa-sort-down":t,"fa-sort-up":e}};function cp(t,e){if(1&t&&i.Zb(0,"i",8),2&t){const t=i.qc();i.yc("ngClass",i.Dc(1,op,!t.isToggled,t.isToggled))}}function _p(t,e){if(1&t&&i.Zb(0,"nitro-catalog-navigation-set-component",9),2&t){const t=i.qc();i.yc("catalogPage",t.catalogPage)}}const hp=function(t){return{active:t}};let lp=(()=>{class t{constructor(t){this._catalogService=t,this.catalogPage=null}selectPage(){this.isActive?this._catalogService.manuallyCollapsePage(this.catalogPage):this._catalogService.component&&this._catalogService.component.selectPage(this.catalogPage)}get activePage(){return this._catalogService.activePage}get activePageData(){return this._catalogService.activePageData}get isDescendant(){return this._catalogService.isDescendant(this.catalogPage,this.activePageData)}get isActive(){return this.catalogPage.pageId===(this.activePage&&this.activePage.pageId)||this.isDescendant}get isCollapsed(){return!!(this._catalogService.manuallyCollapsed.indexOf(this.catalogPage)>=0)}get isToggled(){return!this.isCollapsed&&!!this.isActive}get iconUrl(){return u.a.instance.getConfiguration("catalog.asset.icon.url").replace("%name%",(this.catalogPage.icon||0).toString())}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Sc))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-catalog-navigation-item-component"]],inputs:{catalogPage:"catalogPage"},decls:9,vars:7,consts:[[1,"nav-item"],[1,"d-flex","list-group-item","align-items-center",2,"border-radius","11px",3,"ngClass","click"],[1,"d-flex","flex-grow-1"],[1,"icon-container"],[1,"icon",3,"src"],[1,"flex-grow-1","mb-0"],["class","fas",3,"ngClass",4,"ngIf"],[3,"catalogPage",4,"ngIf"],[1,"fas",3,"ngClass"],[3,"catalogPage"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"li",1),i.nc("click",function(){return e.selectPage()}),i.dc(2,"div",2),i.dc(3,"div",3),i.Zb(4,"img",4),i.cc(),i.dc(5,"p",5),i.Wc(6),i.cc(),i.cc(),i.Uc(7,cp,1,4,"i",6),i.cc(),i.Uc(8,_p,1,1,"nitro-catalog-navigation-set-component",7),i.cc()),2&t&&(i.Kb(1),i.yc("ngClass",i.Cc(5,hp,e.isActive)),i.Kb(3),i.yc("src",e.iconUrl,i.Nc),i.Kb(2),i.Xc(e.catalogPage.localization),i.Kb(1),i.yc("ngIf",e.catalogPage.children&&e.catalogPage.children.length),i.Kb(1),i.yc("ngIf",e.isToggled&&e.catalogPage.children&&e.catalogPage.children.length>0))},directives:[p.l,p.n,ap],encapsulation:2}),t})();const up=["nitro-catalog-navigation-component",""];function dp(t,e){if(1&t&&i.Zb(0,"nitro-catalog-navigation-set-component",3),2&t){const t=i.qc();i.yc("catalogPage",t.catalogPage)}}let gp=(()=>{class t{constructor(t){this._catalogService=t}get catalogPage(){return this._catalogService.component&&this._catalogService.component.activeTab||null}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Sc))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-catalog-navigation-component",""]],attrs:up,decls:3,vars:1,consts:[[1,"nitro-catalog-navigation-component","bg-secondary","rounded","overflow-hidden",2,"background-color","transparent !important","border-radius","15px !important"],[2,"min-height","450px","max-height","493px","height","475px","background-color","rgb(74 74 74 / 83%)","padding","10px"],[3,"catalogPage",4,"ngIf"],[3,"catalogPage"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"perfect-scrollbar",1),i.Uc(2,dp,1,1,"nitro-catalog-navigation-set-component",2),i.cc(),i.cc()),2&t&&(i.Kb(2),i.yc("ngIf",e.catalogPage))},directives:[Oi.b,p.n,ap],encapsulation:2}),t})();const mp=["nitro-catalog-purchase-component",""];function pp(t,e){if(1&t){const t=i.ec();i.dc(0,"div",10),i.dc(1,"div",11),i.dc(2,"div",12),i.dc(3,"button",13),i.nc("click",function(){return i.Lc(t),i.qc().decrease()}),i.Zb(4,"i",14),i.cc(),i.cc(),i.dc(5,"input",15),i.nc("ngModelChange",function(e){return i.Lc(t),i.qc().quantity=e}),i.cc(),i.dc(6,"div",16),i.dc(7,"button",17),i.nc("click",function(){return i.Lc(t),i.qc().increase()}),i.Zb(8,"i",18),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(5),i.yc("ngModel",t.quantity)("max",t.maxQuantity)}}function fp(t,e){if(1&t&&(i.dc(0,"p",19),i.Zb(1,"i",20),i.Wc(2),i.cc()),2&t){const t=i.qc();i.Kb(2),i.Yc(" ",t.costCredits," ")}}function Ep(t,e){1&t&&(i.dc(0,"p",21),i.Wc(1," + "),i.cc())}function Sp(t,e){if(1&t&&(i.dc(0,"p",19),i.Zb(1,"i"),i.Wc(2),i.cc()),2&t){const t=i.qc();i.Kb(1),i.Nb("icon icon-currency-",t.pointsType," mr-1"),i.Kb(1),i.Yc("",t.costPoints," ")}}const Ip=function(t,e){return{"flex-column h-100 ":t,"justify-content-between":e}},Rp=function(t){return[t]},bp=function(t){return{"justify-content-end":t}};let vp=(()=>{class t{constructor(t){this._catalogService=t,this.activePage=null,this.activeOffer=null,this.quantityEnabled=!1,this.vertical=!1,this.quantity=1}ngOnChanges(t){const e=t.activeOffer.currentValue;e&&e!==t.activeOffer.previousValue&&this.resetOffer()}resetOffer(){this.quantity=1}purchase(){this._catalogService.component&&this._catalogService.component.confirmPurchase(this.activePage,this.activeOffer,this.quantity,this.extra)}increase(){this.quantity>=this.maxQuantity||this.quantity++}decrease(){this.quantity--,this.quantity<1&&(this.quantity=1)}get costCredits(){return this.activeOffer.priceCredits*this.quantity}get costPoints(){return this.activeOffer.priceActivityPoints*this.quantity}get pointsType(){return this.activeOffer.priceActivityPointsType}get extra(){return this.activeOffer.products[0]&&this.activeOffer.products[0].extraParam}get maxQuantity(){return 99}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Sc))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-catalog-purchase-component",""]],inputs:{activePage:"activePage",activeOffer:"activeOffer",quantityEnabled:"quantityEnabled",vertical:"vertical"},features:[i.Ib],attrs:mp,decls:15,vars:23,consts:[[1,"d-flex","w-100",3,"ngClass"],["class","d-flex flex-column justify-content-end mr-3 quantity-area","style","\n            align-items: center;\n            justify-content: center !important;\n            margin-left: 10px;\n        ",4,"ngIf"],[1,"d-flex",2,"flex-direction","row !important",3,"ngClass"],[1,"d-flex","flex-column","justify-content-center","align-items-end","price-area",3,"ngClass"],[1,"d-flex","mb-1"],["class","d-flex align-items-center mb-0","style","margin-bottom: 0px !important; margin-left: 10px",4,"ngIf"],["class","mx-2 mb-0","style","margin-bottom: 0px !important; margin-left: 10px",4,"ngIf"],[1,"d-flex","btn-group",3,"ngClass"],["type","button",1,"btn","btn-success","btn-sm","btn-catalog-buy",3,"click"],["type","button",1,"btn","btn-secondary","btn-sm",2,"display","none"],[1,"d-flex","flex-column","justify-content-end","mr-3","quantity-area",2,"align-items","center","justify-content","center !important","margin-left","10px"],[1,"d-flex","input-group"],[1,"input-group-prepend"],["type","button",1,"btn","btn-primary","btn-sm","quantity-button",3,"click"],[1,"fas","fa-arrow-left"],["type","number","min","1",1,"form-control","form-control-sm",2,"box-shadow","none !important","border-radius","50px !important","border","0 !important",3,"ngModel","max","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","btn-primary","btn-sm","quantity-button",2,"margin-left","10px",3,"click"],[1,"fas","fa-arrow-right"],[1,"d-flex","align-items-center","mb-0",2,"margin-bottom","0px !important","margin-left","10px"],[1,"icon","icon-currency--1","mr-1"],[1,"mx-2","mb-0",2,"margin-bottom","0px !important","margin-left","10px"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Uc(1,pp,9,2,"div",1),i.dc(2,"div",2),i.dc(3,"div",3),i.dc(4,"div",4),i.Uc(5,fp,3,1,"p",5),i.Uc(6,Ep,2,0,"p",6),i.Uc(7,Sp,3,4,"p",5),i.cc(),i.cc(),i.dc(8,"div",7),i.dc(9,"button",8),i.nc("click",function(){return e.purchase()}),i.Wc(10),i.rc(11,"translate"),i.cc(),i.dc(12,"button",9),i.Wc(13),i.rc(14,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.yc("ngClass",i.Dc(14,Ip,e.vertical,e.quantityEnabled)),i.Kb(1),i.yc("ngIf",e.quantityEnabled),i.Kb(1),i.yc("ngClass",i.Cc(17,Rp,e.vertical||e.quantityEnabled?"flex-column justify-content-end h-100":"justify-content-between w-100")),i.Kb(1),i.yc("ngClass",i.Cc(19,bp,e.vertical)),i.Kb(2),i.yc("ngIf",e.costCredits),i.Kb(1),i.yc("ngIf",e.costCredits&&e.costPoints),i.Kb(1),i.yc("ngIf",e.costPoints),i.Kb(1),i.yc("ngClass",i.Cc(21,Rp,e.vertical?"flex-column":"")),i.Kb(2),i.Yc(" ",i.sc(11,10,"buy")," "),i.Kb(3),i.Yc(" ",i.sc(14,12,"catalog.purchase_confirmation.gift")," "))},directives:[p.l,p.n,Ti.n,Ti.b,Ti.j,Ti.l],pipes:[Fs],encapsulation:2}),t})(),Tp=(()=>{class t{constructor(t){this._catalogService=t,this.localization=null,this.voucherCode=""}ngOnInit(){}redeem(){this._catalogService.redeemVoucher(this.voucherCode),this.voucherCode=""}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Sc))},t.\u0275cmp=i.Sb({type:t,selectors:[["redeem-voucher-component"]],inputs:{localization:"localization"},decls:7,vars:5,consts:[[1,"d-flex","flex-column","justify-content-center"],[1,"input-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","placeholder","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"input",2),i.nc("ngModelChange",function(t){return e.voucherCode=t}),i.cc(),i.dc(3,"div",3),i.dc(4,"button",4),i.nc("click",function(){return e.redeem()}),i.Wc(5),i.rc(6,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(2),i.zc("placeholder",e.localization.texts[1]),i.yc("ngModel",e.voucherCode),i.Kb(3),i.Xc(i.sc(6,3,"redeem")))},directives:[Ti.b,Ti.j,Ti.l],pipes:[Fs],encapsulation:2}),t})();const Op=["previewImage"],yp=["nitro-room-preview-component",""];let Ap=(()=>{class t{constructor(t,e){this._elementRef=t,this.ngZone=e,this.roomPreviewer=null,this.width=1,this.height=1,this.renderingCanvas=null,this.displayObject=null,this.imageUrl=null,this.isRunning=!1,this.onClick=this.onClick.bind(this)}ngOnInit(){this.roomPreviewer&&(1===this.width&&(this.width=Math.trunc(this._elementRef.nativeElement.offsetWidth)),1===this.height&&(this.height=Math.trunc(this._elementRef.nativeElement.offsetHeight)),this._elementRef.nativeElement.style.minWidth=this.width+"px",this._elementRef.nativeElement.style.minHeight=this.height+"px")}ngOnDestroy(){this.stop()}ngAfterViewInit(){this.roomPreviewer&&(this.displayObject=this.roomPreviewer.getRoomCanvas(this.width,this.height),this.renderingCanvas=this.roomPreviewer.getRenderingCanvas()),this.start()}start(){this.isRunning||(this.ngZone.runOutsideAngular(()=>{this.previewImageElement.addEventListener("click",this.onClick),u.a.instance.ticker.add(this.update,this)}),this.isRunning=!0)}stop(){this.isRunning&&(this.ngZone.runOutsideAngular(()=>{this.previewImageElement.removeEventListener("click",this.onClick),u.a.instance.ticker.remove(this.update,this)}),this.isRunning=!1)}update(t){if(this.roomPreviewer&&this.renderingCanvas&&this.displayObject&&(this.roomPreviewer.updatePreviewRoomView(),this.renderingCanvas.canvasUpdated)){const t=u.a.instance.renderer.extract.base64(this.displayObject);this.previewImageElement.src=t}}onClick(t){t&&this.isRunning&&this.roomPreviewer&&(t.shiftKey?this.roomPreviewer.changeRoomObjectDirection():this.roomPreviewer.changeRoomObjectState())}get previewImageElement(){return this.previewImage&&this.previewImage.nativeElement||null}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.p),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-room-preview-component",""]],viewQuery:function(t,e){if(1&t&&i.cd(Op,1),2&t){let t;i.Hc(t=i.oc())&&(e.previewImage=t.first)}},inputs:{roomPreviewer:"roomPreviewer",width:"width",height:"height"},attrs:yp,decls:2,vars:0,consts:[[1,"room-preview-image"],["previewImage",""]],template:function(t,e){1&t&&i.Zb(0,"img",0,1)},encapsulation:2}),t})(),Cp=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[Sc],imports:[[vm]]}),t})();i.Oc(Mc,[p.n,Ap,vp,Oi.b,p.m,p.l,p.o],[]),i.Oc(kc,[p.n,p.o,Tp],[]),i.Oc(Jc,[p.n,Ap,vp,p.l,Oi.b,p.m,p.o],[Fs]),i.Oc(D_,[p.n,li,vi,p.m,p.l,gp,tp,ip,qm],[Fs]),i.Oc(ap,[p.m,p.n,lp],[]);let Mp=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[ys.a],imports:[[vm]]}),t})();var Up=s("4k6Q");const Dp=["nitro-friendlist-friends-list-component",""];function wp(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"button",2),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc().selectThread(s)}),i.Zb(2,"div",3),i.dc(3,"div",4),i.Wc(4),i.cc(),i.cc(),i.dc(5,"button",5),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc().openFriendProfile(s)}),i.Zb(6,"i",6),i.cc(),i.dc(7,"button",7),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc().removeFriend(s)}),i.Zb(8,"i",8),i.cc(),i.cc()}if(2&t){const t=e.$implicit;i.Kb(2),i.yc("headOnly",1)("figure",t.figure)("direction",2),i.Kb(2),i.Xc(t.name)}}let Np=(()=>{class t{constructor(t,e){this._friendListService=t,this._ngZone=e,this.threadSelector=null,this.onlineOnly=!1}selectThread(t){if(!t)return;const e=this._friendListService.getMessageThread(t.id);e&&this.threadSelector&&this.threadSelector(e)}removeFriend(t){t&&(u.a.instance.communication.connection.send(new Up.a(t.id)),this._friendListService.friends.delete(t.id))}openFriendProfile(t){t&&u.a.instance.communication.connection.send(new cl.a(t.id))}get friends(){const t=Array.from(this._friendListService.friends.values());return this.onlineOnly?t.filter(t=>t.online):t}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Os),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-friendlist-friends-list-component",""]],inputs:{threadSelector:"threadSelector",onlineOnly:"onlineOnly"},attrs:Dp,decls:1,vars:1,consts:[["class","btn-group w-100 mb-3",4,"ngFor","ngForOf"],[1,"btn-group","w-100","mb-3"],["type","button",1,"btn","btn-secondary","room-settings-option",2,"width","78%","background-color","#eeeeee","filter","none !important","color","#000","justify-content","left",3,"click"],["nitro-avatar-image","",1,"avatar-img",2,"border-radius","50%","background-color","#2b2b2b","height","55px","width","55px","background-position","center","margin-left","-11px","margin-top","-28px","margin-bottom","-26px",3,"headOnly","figure","direction"],[2,"padding-left","15px"],["type","button",1,"btn","btn-primary","room-settings-mini-button",2,"font-size","14px","margin-top","1px","width","36px","margin-left","10px","height","35px",3,"click"],[1,"fas","fa-id-card"],["type","button",1,"btn","btn-danger",2,"height","35px","margin-top","1px","width","35px",3,"click"],[1,"fas","fa-times"]],template:function(t,e){1&t&&i.Uc(0,wp,9,4,"div",0),2&t&&i.yc("ngForOf",e.friends)},directives:[p.m,qi],encapsulation:2}),t})();const Lp=["nitro-friendlist-requests-list-component",""];function xp(t,e){if(1&t){const t=i.ec();i.bc(0),i.dc(1,"div",3),i.dc(2,"div",4),i.dc(3,"div",5),i.Wc(4),i.cc(),i.dc(5,"button",6),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc(2).acceptRequest(s.value)}),i.Zb(6,"i",7),i.cc(),i.dc(7,"button",8),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc(2).declineRequest(s.value)}),i.Zb(8,"i",9),i.cc(),i.cc(),i.cc(),i.ac()}if(2&t){const t=e.$implicit;i.Kb(4),i.Yc(" ",t.value.requesterName," ")}}function Pp(t,e){if(1&t){const t=i.ec();i.bc(0),i.dc(1,"button",1),i.nc("click",function(){return i.Lc(t),i.qc().declineAllRequests()}),i.Wc(2),i.rc(3,"translate"),i.cc(),i.Uc(4,xp,9,1,"ng-container",2),i.rc(5,"keyvalue"),i.ac()}if(2&t){const t=i.qc();i.Kb(2),i.Yc(" ",i.sc(3,2,"friendbar.requests.discard")," "),i.Kb(2),i.yc("ngForOf",i.sc(5,4,t.requests))}}let Fp=(()=>{class t{constructor(t){this._friendListService=t}acceptRequest(t){t&&this._friendListService.acceptFriendRequest(t)}declineRequest(t){t&&this._friendListService.removeFriendRequest(t)}declineAllRequests(){this._friendListService.removeAllFriendRequests()}get requests(){return this._friendListService.requests}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Os))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-friendlist-requests-list-component",""]],attrs:Lp,decls:1,vars:1,consts:[[4,"ngIf"],["type","button",1,"btn","btn-danger","mb-1","w-100",2,"margin-top","10px",3,"click"],[4,"ngFor","ngForOf"],[1,"btn-group","w-100","mb-1",2,"margin-top","10px"],[2,"width","99%","filter","none !important","color","#000","margin-top","0px","display","flex","border-radius","20px","justify-content","space-between","flex-direction","row"],[2,"float","left","background-color","#494949","text-align","center","padding","8px 25px","border-radius","20px","color","#fff"],["type","button",1,"btn","btn-success",2,"font-size","14px","width","37px","margin-left","205px","float","revert","height","35px","margin-top","1px","box-shadow","none !important","border","none !important","border-radius","20px !important","filter","drop-shadow(0 2px 0 #1c7f33)",3,"click"],[1,"fas","fa-check"],["type","button",1,"btn","btn-danger",2,"height","35px","margin-top","1px","width","37px",3,"click"],[1,"fas","fa-times"]],template:function(t,e){1&t&&i.Uc(0,Pp,6,6,"ng-container",0),2&t&&i.yc("ngIf",e.requests.size>0)},directives:[p.n,p.m],pipes:[Fs,p.h],encapsulation:2}),t})();const kp=["nitro-friendlist-friends-viewer-component",""];function Wp(t,e){if(1&t&&(i.dc(0,"span",7),i.Wc(1),i.cc()),2&t){const t=i.qc();i.Kb(1),i.Xc(t.totalFriendRequests)}}function Vp(t,e){if(1&t&&i.Zb(0,"div",8),2&t){const t=i.qc();i.yc("threadSelector",t.threadSelector)("onlineOnly",t.onlineOnly)}}function Gp(t,e){1&t&&i.Zb(0,"div",9)}const Hp=function(t){return{active:t}};let Bp=(()=>{class t{constructor(t,e){this._friendListService=t,this._ngZone=e,this.threadSelector=null,this._requestsShowing=!1,this._friendsShowing=!0,this._onlineOnly=!0}showOnlineFriends(){this.showFriends(),this._onlineOnly=!0}showFriends(){this._requestsShowing=!1,this._friendsShowing=!0,this._onlineOnly=!1}showRequests(){this._requestsShowing=!0,this._friendsShowing=!1,this._onlineOnly=!1}get requestsShowing(){return this._requestsShowing}get friendsShowing(){return this._friendsShowing}get onlineOnly(){return this._onlineOnly}get totalFriendRequests(){return this._friendListService.requests.size}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Os),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-friendlist-friends-viewer-component",""]],inputs:{threadSelector:"threadSelector"},attrs:kp,decls:12,vars:12,consts:[[1,"btn-group","w-100","mb-1"],["type","button",1,"btn","btn-menu","btn-secondary",3,"ngClass","click"],["class","badge badge-danger ml-1","style","font-size: 12px",4,"ngIf"],[1,"d-flex","w-100"],[1,"position-relative","w-100",2,"min-height","350px","max-height","350px","height","350px"],["nitro-friendlist-friends-list-component","","class","w-100","style","margin-top: 25px",3,"threadSelector","onlineOnly",4,"ngIf"],["nitro-friendlist-requests-list-component","","class","w-100",4,"ngIf"],[1,"badge","badge-danger","ml-1",2,"font-size","12px"],["nitro-friendlist-friends-list-component","",1,"w-100",2,"margin-top","25px",3,"threadSelector","onlineOnly"],["nitro-friendlist-requests-list-component","",1,"w-100"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"button",1),i.nc("click",function(){return e.showOnlineFriends()}),i.Wc(2," En l\xednea "),i.cc(),i.dc(3,"button",1),i.nc("click",function(){return e.showFriends()}),i.Wc(4," Todos "),i.cc(),i.dc(5,"button",1),i.nc("click",function(){return e.showRequests()}),i.Wc(6," Solicitudes"),i.Uc(7,Wp,2,1,"span",2),i.cc(),i.cc(),i.dc(8,"div",3),i.dc(9,"perfect-scrollbar",4),i.Uc(10,Vp,1,2,"div",5),i.Uc(11,Gp,1,0,"div",6),i.cc(),i.cc()),2&t&&(i.Kb(1),i.yc("ngClass",i.Cc(6,Hp,e.friendsShowing&&e.onlineOnly)),i.Kb(2),i.yc("ngClass",i.Cc(8,Hp,e.friendsShowing&&!e.onlineOnly)),i.Kb(2),i.yc("ngClass",i.Cc(10,Hp,e.requestsShowing)),i.Kb(2),i.yc("ngIf",e.totalFriendRequests>0),i.Kb(3),i.yc("ngIf",e.friendsShowing),i.Kb(1),i.yc("ngIf",e.requestsShowing))},directives:[p.l,p.n,Oi.b,Np,Fp],encapsulation:2}),t})();const jp=["nitro-friendlist-thread-list-component",""],Kp=function(t){return{active:t}};function zp(t,e){if(1&t){const t=i.ec();i.dc(0,"button",1),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc().selectThread(s)}),i.Wc(1),i.cc()}if(2&t){const t=e.$implicit,s=i.qc();i.yc("ngClass",i.Cc(2,Kp,s.currentThread===t)),i.Kb(1),i.Yc(" ",t.participant.name,"\n")}}let Yp=(()=>{class t{constructor(t,e){this._friendListService=t,this._ngZone=e,this.currentThread=null,this.threadSelector=null}selectThread(t){t&&this.threadSelector&&this.threadSelector(t)}get threads(){const t=Array.from(this._friendListService.threads.values());return t.sort((t,e)=>e.lastUpdated-t.lastUpdated),t}}return t.THREAD_SELECTED="FLTLC_THREAD_SELECTED",t.\u0275fac=function(e){return new(e||t)(i.Yb(Os),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-friendlist-thread-list-component",""]],inputs:{currentThread:"currentThread",threadSelector:"threadSelector"},attrs:jp,decls:1,vars:1,consts:[["type","button","class","btn btn-secondary w-100 mb-1 room-settings-option",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-secondary","w-100","mb-1","room-settings-option",3,"ngClass","click"]],template:function(t,e){1&t&&i.Uc(0,zp,2,4,"button",0),2&t&&i.yc("ngForOf",e.threads)},directives:[p.m,p.l],encapsulation:2}),t})();var Xp=s("3E0/"),Zp=s("Fcb+"),qp=s("jNJ0"),Qp=s("FV0X"),Jp=s("/52j");const $p=["threadScroller"],tf=["nitro-friendlist-thread-viewer-component",""];function ef(t,e){if(1&t){const t=i.ec();i.dc(0,"button",20),i.nc("click",function(){i.Lc(t);const s=e.index;return i.qc().changeRelation(s)}),i.Wc(1),i.cc()}if(2&t){const t=e.$implicit;i.Kb(1),i.Yc(" ",t," ")}}function sf(t,e){if(1&t){const t=i.ec();i.dc(0,"div",21),i.nc("click",function(){return i.Lc(t),i.qc().followParticipant()}),i.Zb(1,"i",22),i.cc()}}const nf=function(t){return[t]};function rf(t,e){if(1&t&&(i.dc(0,"div",23),i.dc(1,"div",24),i.Wc(2),i.cc(),i.cc()),2&t){const t=e.$implicit,s=i.qc();i.yc("ngClass",i.Cc(2,nf,t.senderId===s.participant.id?"thread-viewer-list-left":"thread-viewer-list-right")),i.Kb(2),i.Yc(" ",t.message," ")}}let af=(()=>{class t{constructor(t,e,s){this._friendListService=t,this._settingsService=e,this._ngZone=s,this.thread=null,this._subscription=null}ngOnChanges(t){const e=t.thread.previousValue,s=t.thread.currentValue;s&&s!==e?this.prepareThread():s||s===e||this.unsubscribe()}ngOnDestroy(){this.unsubscribe()}ngAfterViewInit(){this.scrollToBottom()}unsubscribe(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}prepareThread(){this.unsubscribe(),this._subscription=this.thread.emitter.asObservable().pipe(Object(Xp.a)(1)).subscribe(t=>{switch(t){case vs.MESSAGE_RECEIVED:return void this.messageReceived()}})}messageReceived(){this.scrollToBottom()}sendMessage(t){t&&t.length&&(this._ngZone.run(()=>{this.thread.insertChat(u.a.instance.sessionDataManager.userId,t,0,null),this.thread.setRead()}),u.a.instance.communication.connection.send(new qp.a(this.participant.id,t)))}changeRelation(t){this.participant&&-1!==Jp.a.RELATIONSHIP_TYPES.indexOf(t)&&u.a.instance.communication.connection.send(new Qp.a(this.participant.id,t))}followParticipant(){this.participant&&(this._settingsService.toggleFriendList(),u.a.instance.communication.connection.send(new Zp.a(this.participant.id)))}onKeyDownEvent(t){if(!t)return;const e=t.target;if(e)switch(t.key){case"Enter":return this.sendMessage(e.value),void(e.value="")}}scrollToBottom(){this.threadScroller&&this.threadScroller.directiveRef.scrollToBottom(0,200)}get participant(){return this.thread.participant}get chats(){return this.thread.chats}get relations(){return Jp.a.RELATIONSHIP_NAMES}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Os),i.Yb(m),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-friendlist-thread-viewer-component",""]],viewQuery:function(t,e){if(1&t&&i.cd($p,1),2&t){let t;i.Hc(t=i.oc())&&(e.threadScroller=t.first)}},inputs:{thread:"thread"},features:[i.Ib],attrs:tf,decls:23,vars:12,consts:[[1,"nitro-friendlist-thread-viewer-component"],[1,"d-flex","flex-row","thread-viewer-user","mb-1","justify-content-between",2,"background-color","#b9b9b9","border-radius","20px","align-items","center"],[1,"d-flex","flex-row",2,"align-items","center"],["nitro-avatar-image","",1,"avatar-img",2,"margin-top","11px","margin-bottom","-11px","margin-left","15px",3,"headOnly","figure","direction"],[1,"thread-viewer-user-info"],[1,"d-flex","flex-row",2,"font-size","17px !important"],[1,"ml-2","p-1","rounded-circle","align-self-center",3,"ngClass"],[1,"d-block","text-muted","small","text-truncate"],["ngbDropdown","",1,"input-group-prepend","align-self-center"],[1,"btn-group"],["type","button","ngbDropdownToggle","",1,"btn","btn-primary","btn-sm","room-settings-mini-button",2,"border-radius","20px !important","margin-right","-5px !important","background-color","#21bb94"],["ngbDropdownMenu","",1,"dropdown-menu"],["class","dropdown-item small","ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],["class","btn btn-sm btn-dgreen align-self-center room-settings-mini-button","style","\n                        background-color: #303030;\n                        margin-left: 10px;\n                        margin-right: 10px !important;\n                        width: 33px;\n                    ",3,"click",4,"ngIf"],[1,"position-relative","w-100","my-1",2,"min-height","299px","max-height","299px","height","299px","margin-top","10px !important"],["threadScroller",""],[1,"thread-viewer-list"],["class","thread-viewer-list-item mb-1",3,"ngClass",4,"ngFor","ngForOf"],[1,"thread-viewer-input"],["type","text","maxlength","420","placeholder","Escribe tu mensaje aqu\xed",1,"thread-viewer-input","form-control",2,"box-shadow","none !important","border","none !important","border-radius","20px !important","filter","drop-shadow(0 2px 0 #bfbfbf) !important","font-size","16px",3,"keydown.enter"],["ngbDropdownItem","",1,"dropdown-item","small",3,"click"],[1,"btn","btn-sm","btn-dgreen","align-self-center","room-settings-mini-button",2,"background-color","#303030","margin-left","10px","margin-right","10px !important","width","33px",3,"click"],[1,"fas","fa-arrow-right"],[1,"thread-viewer-list-item","mb-1",3,"ngClass"],[1,"thread-viewer-list-item-message","p-2"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"div",2),i.Zb(3,"div",3),i.dc(4,"div",4),i.dc(5,"b",5),i.Wc(6),i.Zb(7,"div",6),i.cc(),i.dc(8,"span",7),i.Wc(9),i.cc(),i.cc(),i.cc(),i.dc(10,"div",8),i.dc(11,"div",9),i.dc(12,"button",10),i.Wc(13),i.cc(),i.dc(14,"div",11),i.Uc(15,ef,2,1,"button",12),i.cc(),i.Uc(16,sf,2,0,"div",13),i.cc(),i.cc(),i.cc(),i.dc(17,"perfect-scrollbar",14,15),i.dc(19,"div",16),i.Uc(20,rf,3,4,"div",17),i.cc(),i.cc(),i.dc(21,"div",18),i.dc(22,"input",19),i.nc("keydown.enter",function(t){return e.onKeyDownEvent(t)}),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.yc("headOnly",1)("figure",e.thread.participant.figure)("direction",2),i.Kb(3),i.Yc("",e.participant.name," "),i.Kb(1),i.yc("ngClass",i.Cc(10,nf,e.participant.online?"bg-success":"bg-danger")),i.Kb(2),i.Xc(e.participant.motto),i.Kb(4),i.Yc(" ",e.relations[e.thread.participant.relationshipStatus]," "),i.Kb(2),i.yc("ngForOf",e.relations),i.Kb(1),i.yc("ngIf",e.participant.online),i.Kb(4),i.yc("ngForOf",e.chats))},directives:[qi,p.l,L_.b,L_.f,L_.d,p.m,p.n,Oi.b,L_.c],encapsulation:2}),t})(),of=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[Os],imports:[[vm]]}),t})();i.Oc(Zo,[p.n,li,vi,Oi.b,Yp,Bp,af],[Fs]);let cf=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[Ro],imports:[[]]}),t})(),_f=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},imports:[[vm]]}),t})();const hf=["nitro-inventory-furniture-component",""];function lf(t,e){1&t&&(i.dc(0,"div",4),i.Wc(1),i.rc(2,"translate"),i.rc(3,"translate"),i.cc()),2&t&&(i.Kb(1),i.Zc(" ",i.sc(2,2,"inventory.empty.title")," ",i.sc(3,4,"inventory.empty.desc")," "))}function uf(t,e){if(1&t&&(i.dc(0,"div",23),i.Wc(1),i.cc()),2&t){const t=i.qc().$implicit;i.Kb(1),i.Yc(" ",t.getUnlockedCount()," ")}}function df(t,e){if(1&t&&(i.dc(0,"div",24),i.Wc(1),i.cc()),2&t){const t=i.qc().$implicit;i.Kb(1),i.Yc(" ",t.stuffData.uniqueNumber," ")}}const gf=function(t){return{opacity:t}},mf=function(t,e){return{active:t,"bg-success":e}},pf=function(t){return{"background-image":t}};function ff(t,e){if(1&t){const t=i.ec();i.dc(0,"div",19),i.nc("mousedown",function(){i.Lc(t);const s=e.$implicit;return i.qc(3).onMouseDown(s)})("mouseout",function(){i.Lc(t);const s=e.$implicit;return i.qc(3).onMouseOut(s)}),i.dc(1,"button",20),i.Uc(2,uf,2,1,"div",21),i.Uc(3,df,2,1,"div",22),i.cc(),i.cc()}if(2&t){const t=e.$implicit,s=i.qc(3);i.yc("ngStyle",i.Cc(5,gf,t.getUnlockedCount()?"1":"0.5")),i.Kb(1),i.yc("ngClass",i.Dc(7,mf,s.selectedGroup===t,t.hasUnseenItems))("ngStyle",i.Cc(10,pf,"url("+s.getIconUrl(t)+")")),i.Kb(1),i.yc("ngIf",!t.stuffData.uniqueNumber),i.Kb(1),i.yc("ngIf",t.stuffData.uniqueNumber)}}function Ef(t,e){if(1&t){const t=i.ec();i.dc(0,"div",32),i.nc("click",function(){i.Lc(t);const e=i.qc().$implicit;return i.qc(),i.Ic(1).setCurrent(e.value)}),i.Wc(1),i.cc()}if(2&t){const t=i.qc().$implicit;i.Kb(1),i.Yc(" ",t.label," ")}}function Sf(t,e){if(1&t&&(i.dc(0,"div",33),i.Wc(1),i.cc()),2&t){const t=i.qc().$implicit;i.Kb(1),i.Yc(" ",t.label," ")}}function If(t,e){if(1&t&&(i.dc(0,"li",29),i.Uc(1,Ef,2,1,"div",30),i.Uc(2,Sf,2,1,"div",31),i.cc()),2&t){const t=e.$implicit;i.qc();const s=i.Ic(1);i.Qb("active",s.getCurrent()===t.value),i.Kb(1),i.yc("ngIf",s.getCurrent()!==t.value),i.Kb(1),i.yc("ngIf",s.getCurrent()===t.value)}}function Rf(t,e){if(1&t){const t=i.ec();i.dc(0,"pagination-template",25,26),i.nc("pageChange",function(e){return i.Lc(t),i.qc(3).paginateConfig.currentPage=e}),i.dc(2,"ul",27),i.Uc(3,If,3,4,"li",28),i.cc(),i.cc()}if(2&t){const t=i.Ic(1),e=i.qc(3);i.yc("id",e.paginateConfig.id)("maxSize",11),i.Kb(3),i.yc("ngForOf",t.pages)}}function bf(t,e){if(1&t){const t=i.ec();i.dc(0,"button",38),i.nc("click",function(){return i.Lc(t),i.qc(4).attemptItemPlacement()}),i.Wc(1),i.rc(2,"translate"),i.cc()}2&t&&(i.Kb(1),i.Yc(" ",i.sc(2,1,"inventory.furni.placetoroom")," "))}const vf=function(t){return{disabled:t}};function Tf(t,e){if(1&t){const t=i.ec();i.dc(0,"button",39),i.nc("click",function(){return i.Lc(t),i.qc(4).attemptItemOffer()}),i.Wc(1),i.rc(2,"translate"),i.cc()}if(2&t){const t=i.qc(4);i.yc("ngClass",i.Cc(4,vf,!t.selectedGroup.getUnlockedCount())),i.Kb(1),i.Yc(" ",i.sc(2,2,"inventory.trading.offer")," ")}}function Of(t,e){if(1&t&&(i.dc(0,"div",34),i.dc(1,"div",35),i.Uc(2,bf,3,3,"button",36),i.Uc(3,Tf,3,6,"button",37),i.cc(),i.cc()),2&t){const t=i.qc(3);i.Kb(2),i.yc("ngIf",!t.tradeRunning&&t.canPlace),i.Kb(1),i.yc("ngIf",t.tradeRunning)}}function yf(t,e){if(1&t){const t=i.ec();i.bc(0),i.dc(1,"div",5),i.dc(2,"div",6),i.dc(3,"div",7),i.Zb(4,"i",8),i.cc(),i.dc(5,"input",9),i.nc("ngModelChange",function(e){return i.Lc(t),i.qc(2).search=e}),i.cc(),i.dc(6,"select",10),i.nc("ngModelChange",function(e){return i.Lc(t),i.qc(2).searchType=e}),i.dc(7,"option",11),i.Wc(8),i.rc(9,"translate"),i.cc(),i.dc(10,"option",11),i.Wc(11),i.rc(12,"translate"),i.cc(),i.dc(13,"option",11),i.Wc(14),i.rc(15,"translate"),i.cc(),i.cc(),i.cc(),i.dc(16,"perfect-scrollbar",12),i.dc(17,"div",13),i.Uc(18,ff,4,12,"div",14),i.rc(19,"paginate"),i.cc(),i.cc(),i.Uc(20,Rf,4,3,"pagination-template",15),i.cc(),i.dc(21,"div",16),i.Zb(22,"div",17),i.Uc(23,Of,4,2,"div",18),i.cc(),i.ac()}if(2&t){const t=i.qc(2);i.Kb(5),i.yc("ngModel",t.search),i.Kb(1),i.yc("ngModel",t.searchType),i.Kb(1),i.yc("value",""),i.Kb(1),i.Yc(" ",i.sc(9,14,"inventory.filter.option.everything")," "),i.Kb(2),i.yc("value","s"),i.Kb(1),i.Yc(" ",i.sc(12,16,"inventory.furni.tab.floor")," "),i.Kb(2),i.yc("value","i"),i.Kb(1),i.Yc(" ",i.sc(15,18,"inventory.furni.tab.wall")," "),i.Kb(4),i.yc("ngForOf",t.groupItems)("ngForTrackBy",i.tc(19,20,t.trackByType,t.paginateConfig)),i.Kb(2),i.yc("ngIf",t.groupItems.length>t.paginateConfig.itemsPerPage),i.Kb(2),i.yc("roomPreviewer",t.roomPreviewer)("height",140),i.Kb(1),i.yc("ngIf",t.selectedGroup)}}function Af(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.nc("mouseup",function(){return i.Lc(t),i.qc().onMouseUp()}),i.Uc(1,lf,4,6,"div",2),i.Uc(2,yf,24,23,"ng-container",3),i.cc()}if(2&t){const t=i.qc();i.Kb(1),i.yc("ngIf",!t.hasGroupItems),i.Kb(1),i.yc("ngIf",t.hasGroupItems)}}let Cf=(()=>{class t{constructor(t,e,s){this._notificationService=t,this._inventoryService=e,this._ngZone=s,this.visible=!1,this.roomPreviewer=null,this.selectedGroup=null,this.mouseDown=!1,this._filteredItems=[],this._search="",this._searchType="",this._subscription=null,this._hasGroupItems=!1}ngOnInit(){this._inventoryService.controller.furnitureService.isInitalized&&this.selectExistingGroupOrDefault(),this._inventoryService.furniController=this,this._subscription=this._inventoryService.events.subscribe(t=>{switch(t){case fh.INVENTORY_UPDATED:return void this.refreshInventory()}})}ngOnChanges(t){const e=t.visible.currentValue;e!==(t.visible.previousValue||!1)&&(e?this.prepareInventory():this._inventoryService.controller.setAllFurnitureSeen())}ngOnDestroy(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._inventoryService.furniController=null}refreshInventory(){let t=this._inventoryService.controller.furnitureService.groupItems;if(t.length&&(this._hasGroupItems=!0),this._search&&this._search.length||this._searchType&&this._searchType.length){const e=this._search.toLocaleLowerCase();t=t.filter(t=>{let s=!0;return this._searchType&&1===this._searchType.length&&("s"===this._searchType?s=!t.isWallItem:"i"===this._searchType&&(s=t.isWallItem)),e&&e.length&&(s=t.name.toLocaleLowerCase().includes(e)),s})}this._filteredItems=t}prepareInventory(){!this._inventoryService.controller.furnitureService.isInitalized||this._inventoryService.controller.furnitureService.needsUpdate?this._inventoryService.controller.furnitureService.requestLoad():(this.refreshInventory(),this.selectExistingGroupOrDefault())}selectExistingGroupOrDefault(){this.selectedGroup&&this.groupItems.indexOf(this.selectedGroup)>-1?this.selectGroup(this.selectedGroup):this.selectFirstGroup()}selectFirstGroup(){let t=null;for(const e of this.groupItems)if(e&&!e.locked){t=e;break}this.selectGroup(t)}selectGroup(t){if(this._inventoryService.controller.furnitureService.unselectAllGroupItems(),this.selectedGroup=t,this.selectedGroup){this.selectedGroup.selected=!0,this.selectedGroup.hasUnseenItems&&(this.selectedGroup.hasUnseenItems=!1);const e=this.selectedGroup.getItemByIndex(0);if(!e)return;this._ngZone.runOutsideAngular(()=>{if(this.roomPreviewer){let s=u.a.instance.roomEngine.getRoomInstanceVariable(u.a.instance.roomEngine.activeRoomId,G.a.ROOM_WALL_TYPE),i=u.a.instance.roomEngine.getRoomInstanceVariable(u.a.instance.roomEngine.activeRoomId,G.a.ROOM_FLOOR_TYPE),n=u.a.instance.roomEngine.getRoomInstanceVariable(u.a.instance.roomEngine.activeRoomId,G.a.ROOM_LANDSCAPE_TYPE);s=s&&s.length?s:"101",i=i&&i.length?i:"101",n=n&&n.length?n:"1.1",this.roomPreviewer.reset(!1),this.roomPreviewer.updateObjectRoom(i,s,n),e.category===gh._Str_3639||e.category===gh._Str_3683||e.category===gh._Str_3432?(this.roomPreviewer.updateRoomWallsAndFloorVisibility(!0,!0),i=e.category===gh._Str_3683?this.selectedGroup.stuffData.getLegacyString():i,s=e.category===gh._Str_3639?this.selectedGroup.stuffData.getLegacyString():s,n=e.category===gh._Str_3432?this.selectedGroup.stuffData.getLegacyString():n,this.roomPreviewer.updateObjectRoom(i,s,n)):t.isWallItem?(this.roomPreviewer.updateRoomWallsAndFloorVisibility(!0,!0),this.roomPreviewer.addWallItemIntoRoom(this.selectedGroup.type,new Y.a(90),e.stuffData.getLegacyString())):(this.roomPreviewer.updateRoomWallsAndFloorVisibility(!1,!0),this.roomPreviewer.addFurnitureIntoRoom(this.selectedGroup.type,new Y.a(90),this.selectedGroup.stuffData,this.selectedGroup.extra.toString()))}})}else this._ngZone.runOutsideAngular(()=>this.roomPreviewer&&this.roomPreviewer.reset(!1))}onMouseDown(t){t&&(this.selectGroup(t),this.mouseDown=!0)}onMouseUp(t){this.mouseDown=!1}onMouseOut(t){this.mouseDown&&this.selectedGroup===t&&this.attemptItemPlacement()}attemptItemPlacement(){this.canPlace&&!this.tradeRunning&&(this._ngZone.runOutsideAngular(()=>this._inventoryService.controller.furnitureService.attemptItemPlacement()),this._inventoryService.hideWindow())}attemptItemOffer(t=1){if(!this.selectedGroup||!this.tradeRunning)return;const e=this.selectedGroup;if(!e)return;const s=e.getTradeItems(t);if(!s||!s.length)return;let i=null;const n=[];for(const r of s)n.push(r.id),i||(i=r);i&&this.tradeRunning&&(this._inventoryService.controller.tradeService.getOwnTradingItemIds().length+n.length<=1500?this._inventoryService.controller.tradeService.offerItems(n,i.isWallItem,i.type,i.category,i.isGroupable,i.stuffData):this._notificationService.alert("${trading.items.too_many_items.desc}","${trading.items.too_many_items.title}"))}getIconUrl(t){return t&&t.iconUrl||null}trackByType(t,e){return e.type}get groupItems(){return this._filteredItems}get tradeRunning(){return this._inventoryService.controller.tradeService.running}get canPlace(){return!!this._inventoryService.roomSession}get paginateConfig(){return{id:"custom",itemsPerPage:5,currentPage:1}}get search(){return this._search}set search(t){this._search=t,this.refreshInventory()}get searchType(){return this._searchType}set searchType(t){this._searchType=t,this.refreshInventory()}get hasGroupItems(){return this._hasGroupItems}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Ge),i.Yb(nn),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-inventory-furniture-component",""]],inputs:{visible:"visible",roomPreviewer:"roomPreviewer"},features:[i.Ib],attrs:hf,decls:1,vars:1,consts:[["class","row nitro-inventory-furni-component",3,"mouseup",4,"ngIf"],[1,"row","nitro-inventory-furni-component",3,"mouseup"],["class","col-12",4,"ngIf"],[4,"ngIf"],[1,"col-12"],[1,"col-7","d-flex","flex-column",2,"z-index","1"],[1,"d-flex","mb-2","inventory-bar"],[1,"d-flex","justify-content-center","align-items-center","bg-secondary","border","shadow","px-2","btn-nav-icon"],[1,"fas","fa-search"],["type","text",1,"form-control","form-control-sm","flex-grow-1",2,"border-radius","15px","border","none","box-shadow","none !important","filter","drop-shadow(0 2px 0 #bfbfbf) !important","height","30px",3,"ngModel","ngModelChange"],[1,"form-control","form-control-sm","w-auto","btn-nav-icon",2,"margin-left","10px","border","none",3,"ngModel","ngModelChange"],[3,"value"],[1,"grid-container","w-100",2,"min-height","209px","max-height","209px","height","209px","margin-top","10px"],[1,"grid-items","grid-5"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"ngStyle","mousedown","mouseout",4,"ngFor","ngForOf","ngForTrackBy"],[3,"id","maxSize","pageChange",4,"ngIf"],[1,"col-5","d-flex","flex-column-reverse"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","height"],["class","d-flex flex-column flex-grow-1 justify-content-between","style","z-index: 1; margin-top: 76px",4,"ngIf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"ngStyle","mousedown","mouseout"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image",2,"background-color","transparent",3,"ngClass","ngStyle"],["class","position-absolute btn btn-sm btn-primary px-1 py-0 rounded count","style","box-shadow: none !important",4,"ngIf"],["style","box-shadow: none !important","class","badge badge-primary w-100",4,"ngIf"],[1,"position-absolute","btn","btn-sm","btn-primary","px-1","py-0","rounded","count",2,"box-shadow","none !important"],[1,"badge","badge-primary","w-100",2,"box-shadow","none !important"],[3,"id","maxSize","pageChange"],["p","paginationApi"],[1,"pagination","pagination-sm","custom-pagination"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"page-item"],["class","page-link",3,"click",4,"ngIf"],["class","page-link",4,"ngIf"],[1,"page-link",3,"click"],[1,"page-link"],[1,"d-flex","flex-column","flex-grow-1","justify-content-between",2,"z-index","1","margin-top","76px"],[1,"btn-group-vertical","w-100"],["type","button","class","btn btn-secondary w-100","style","\n                            border-radius: 29px;\n                            background-color: #22c943;\n                            filter: drop-shadow(0px 2px 0 #1cb33a) !important;\n                        ",3,"click",4,"ngIf"],["type","button","class","btn btn-secondary w-100",3,"ngClass","click",4,"ngIf"],["type","button",1,"btn","btn-secondary","w-100",2,"border-radius","29px","background-color","#22c943","filter","drop-shadow(0px 2px 0 #1cb33a) !important",3,"click"],["type","button",1,"btn","btn-secondary","w-100",3,"ngClass","click"]],template:function(t,e){1&t&&i.Uc(0,Af,3,2,"div",0),2&t&&i.yc("ngIf",e.visible)},directives:[p.n,Ti.b,Ti.j,Ti.l,Ti.q,Ti.m,Ti.s,Oi.b,p.m,Ap,p.o,p.l,Im.c],pipes:[Fs,Im.b],encapsulation:2}),t})(),Mf=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[nn,fh,rl],imports:[[vm]]}),t})();i.Oc(ol,[p.n,li,vi,Cf,nl],[Fs]);var Uf=s("dEqu");function Df(t,e){if(1&t&&(i.dc(0,"p",9),i.Wc(1),i.rc(2,"translate"),i.cc()),2&t){const t=i.qc();i.Kb(1),i.Zc(" ",i.sc(2,2,"navigator.roomownercaption")," ",t.ownerName," ")}}function wf(t,e){if(1&t){const t=i.ec();i.dc(0,"button",17),i.nc("click",function(){return i.Lc(t),i.qc().handleButton("settings")}),i.Wc(1),i.rc(2,"translate"),i.cc()}2&t&&(i.Kb(1),i.Yc(" ",i.sc(2,1,"navigator.room.popup.info.room.settings")," "))}function Nf(t,e){if(1&t){const t=i.ec();i.dc(0,"button",18),i.nc("click",function(){return i.Lc(t),i.qc().handleButton("filter")}),i.Wc(1),i.rc(2,"translate"),i.cc()}2&t&&(i.Kb(1),i.Yc(" ",i.sc(2,1,"navigator.roomsettings.roomfilter")," "))}function Lf(t,e){if(1&t){const t=i.ec();i.dc(0,"button",18),i.nc("click",function(){return i.Lc(t),i.qc().handleButton("floor-plan")}),i.Wc(1),i.rc(2,"translate"),i.cc()}2&t&&(i.Kb(1),i.Yc(" ",i.sc(2,1,"open.floor.plan.editor")," "))}function xf(t,e){if(1&t){const t=i.ec();i.dc(0,"button",18),i.nc("click",function(){return i.Lc(t),i.qc().handleButton("staff-pick")}),i.Wc(1),i.rc(2,"translate"),i.cc()}2&t&&(i.Kb(1),i.Yc(" ",i.sc(2,1,"navigator.staffpicks.pick")," "))}let Pf=(()=>{class t{constructor(t){this._navigatorService=t}hide(){this._navigatorService.roomInfoShowing=!1}handleButton(t){if(t)switch(t){case"settings":return void this.openRoomSettings();case"filter":case"floor-plan":case"staff-pick":case"staff-unpick":case"report":return}}openRoomSettings(){u.a.instance.communication.connection.send(new lt.a(this.roomData.roomId))}get data(){return this._navigatorService.data}get roomData(){return this.data&&this.data.enteredGuestRoom||null}get roomName(){return this.roomData&&this.roomData.roomName||""}get ownerName(){return this.roomData&&this.roomData.ownerName||""}get showOwner(){return this.roomData&&this.roomData.showOwner}get ranking(){return this.roomData&&this.roomData.ranking||0}get roomSettingsVisible(){return!!this.roomData&&(this.data.currentRoomOwner||u.a.instance.sessionDataManager.securityLevel>=Uf.a.MODERATOR)}get roomFilterVisible(){return!!this.roomData&&(this.data.currentRoomOwner||u.a.instance.sessionDataManager.securityLevel>=Uf.a.MODERATOR)}get floorPlanVisible(){return!!this.roomData&&u.a.instance.roomSessionManager.getSession(this.roomData.roomId).controllerLevel>=B.a.GUEST}get addStaffPickedVisible(){return!!this.roomData&&u.a.instance.sessionDataManager.securityLevel>=Uf.a.COMMUNITY}get hoomRegionVisible(){return!!this.roomData&&this.roomData.showOwner}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(fa))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-navigator-room-info-component"]],decls:28,vars:19,consts:[[1,"nitro-navigator-room-info","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"d-flex","flex-column",2,"color","#4a4a4a"],[1,"h5","m-0","text-break",2,"font-size","18px","font-weight","bold"],["class","h6 m-0","style","\n                    font-weight: 400;\n                    font-size: 16px;\n                    margin-top: 5px !important;\n                ",4,"ngIf"],[1,"h6","m-0",2,"font-weight","400","font-size","16px","margin-top","5px !important"],[1,"room-thumbnail"],["src",""],[1,"btn-group-vertical","w-100","mt-2"],["type","button","class","btn btn-secondary mb-1 room-settings-option",3,"click",4,"ngIf"],["type","button","class","btn btn-secondary mb-1 room-settings-option","disabled","",3,"click",4,"ngIf"],["type","button","disabled","",1,"btn","btn-danger","mb-1","room-settings-option",3,"click"],["type","button","disabled","",1,"btn","btn-secondary","room-settings-option"],["type","button",1,"btn","btn-secondary","mb-1","room-settings-option",3,"click"],["type","button","disabled","",1,"btn","btn-secondary","mb-1","room-settings-option",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"h6",2),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",3),i.nc("click",function(){return e.hide()}),i.Zb(6,"i",4),i.cc(),i.cc(),i.dc(7,"div",5),i.dc(8,"div",6),i.dc(9,"p",7),i.Wc(10),i.cc(),i.Uc(11,Df,3,4,"p",8),i.dc(12,"p",9),i.Wc(13),i.rc(14,"translate"),i.cc(),i.cc(),i.dc(15,"div",10),i.Zb(16,"img",11),i.cc(),i.dc(17,"div",12),i.Uc(18,wf,3,3,"button",13),i.Uc(19,Nf,3,3,"button",14),i.Uc(20,Lf,3,3,"button",14),i.Uc(21,xf,3,3,"button",14),i.dc(22,"button",15),i.nc("click",function(){return e.handleButton("report")}),i.Wc(23),i.rc(24,"translate"),i.cc(),i.dc(25,"button",16),i.Wc(26),i.rc(27,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Yc(" ",i.sc(4,11,"navigator.room.info.popup.title")," "),i.Kb(7),i.Yc(" ",e.roomName," "),i.Kb(1),i.yc("ngIf",e.showOwner),i.Kb(2),i.Zc(" ",i.sc(14,13,"navigator.roomrating")," ",e.roomData.ranking," "),i.Kb(5),i.yc("ngIf",e.roomSettingsVisible),i.Kb(1),i.yc("ngIf",e.roomFilterVisible),i.Kb(1),i.yc("ngIf",e.floorPlanVisible),i.Kb(1),i.yc("ngIf",e.addStaffPickedVisible),i.Kb(2),i.Yc(" ",i.sc(24,15,"help.emergency.main.report.room")," "),i.Kb(3),i.Yc(" ",i.sc(27,17,"navigator.muteall_off")," "))},directives:[li,vi,p.n],pipes:[Fs],encapsulation:2}),t})();var Ff=s("6etz"),kf=s("yqT3"),Wf=s("GlfS"),Vf=s("nlEz"),Gf=s("QZVO"),Hf=s("0qJb"),Bf=s("mHKk"),jf=s("Mixc"),Kf=s("h5lc"),zf=s("Oh4I");class Yf{constructor(t){this._ngZone=t,this.roomName=null,this.roomDescription=null,this.categoryId="0",this.userCount="0",this.tags=[],this.tradeState="0",this.allowWalkthrough=!1,this.lockState="0",this.password=null,this.confirmPassword=null,this.allowPets=!1,this.allowPetsEat=!1,this.usersWithRights=new Map,this.friendsWithoutRights=new Map,this.hideWalls=!1,this.wallThickness="0",this.floorThickness="0",this.chatBubbleMode="0",this.chatBubbleWeight="0",this.chatBubbleSpeed="0",this.chatFloodProtection="0",this.chatDistance=0,this.muteState="0",this.kickState="0",this.banState="0",this.bannedUsers=new Map,this.selectedUserToUnban=0}selectUserToUnban(t){this._ngZone.run(()=>{this.selectedUserToUnban=this.selectedUserToUnban===t?0:t})}get isValidPassword(){return"2"!==this.lockState||this.password&&this.password.length>0&&this.password===this.confirmPassword}get selectedUsernameToUnban(){return this.selectedUserToUnban>0?this.bannedUsers.get(this.selectedUserToUnban):null}}function Xf(t,e){if(1&t&&(i.dc(0,"option",9),i.Wc(1),i.rc(2,"translate"),i.cc()),2&t){const t=e.$implicit;i.yc("value",t.id),i.Kb(1),i.Yc(" ",i.sc(2,2,t.name)," ")}}function Zf(t,e){if(1&t&&(i.dc(0,"option",9),i.Wc(1),i.cc()),2&t){const t=e.$implicit;i.yc("value",t),i.Kb(1),i.Yc(" ",t," ")}}function qf(t,e){if(1&t&&(i.dc(0,"option",9),i.Wc(1),i.rc(2,"translate"),i.cc()),2&t){const t=e.$implicit;i.yc("value",t.key),i.Kb(1),i.Yc(" ",i.sc(2,2,t.value)," ")}}let Qf=(()=>{class t{constructor(){this.onSave=new i.r,this.onDeleteRoom=new i.r}save(){this.onSave.emit(this.roomSettings)}deleteRoom(){this.onDeleteRoom.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-navigator-roomsettings-tab-basic-component"]],inputs:{roomSettings:"roomSettings",categories:"categories",maxVisitors:"maxVisitors",tradeSettings:"tradeSettings"},outputs:{onSave:"onSave",onDeleteRoom:"onDeleteRoom"},decls:37,vars:32,consts:[[1,"form-group","mb-2"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","blur"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","blur"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"form-check","mb-3"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[1,"btn","btn-danger","btn-block","btn-red",3,"click"],[3,"value"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"label"),i.Wc(2),i.rc(3,"translate"),i.cc(),i.dc(4,"input",1),i.nc("ngModelChange",function(t){return e.roomSettings.roomName=t})("blur",function(){return e.save()}),i.cc(),i.cc(),i.dc(5,"div",0),i.dc(6,"label"),i.Wc(7),i.rc(8,"translate"),i.cc(),i.dc(9,"textarea",2),i.nc("ngModelChange",function(t){return e.roomSettings.roomDescription=t})("blur",function(){return e.save()}),i.cc(),i.cc(),i.dc(10,"div",0),i.dc(11,"label"),i.Wc(12),i.rc(13,"translate"),i.cc(),i.dc(14,"select",3),i.nc("ngModelChange",function(t){return e.roomSettings.categoryId=t})("ngModelChange",function(){return e.save()}),i.Uc(15,Xf,3,4,"option",4),i.cc(),i.cc(),i.dc(16,"div",0),i.dc(17,"label"),i.Wc(18),i.rc(19,"translate"),i.cc(),i.dc(20,"select",3),i.nc("ngModelChange",function(t){return e.roomSettings.userCount=t})("ngModelChange",function(){return e.save()}),i.Uc(21,Zf,2,2,"option",4),i.cc(),i.cc(),i.dc(22,"div",0),i.dc(23,"label"),i.Wc(24),i.rc(25,"translate"),i.cc(),i.dc(26,"select",3),i.nc("ngModelChange",function(t){return e.roomSettings.tradeState=t})("ngModelChange",function(){return e.save()}),i.Uc(27,qf,3,4,"option",4),i.rc(28,"keyvalue"),i.cc(),i.cc(),i.dc(29,"div",5),i.dc(30,"input",6),i.nc("ngModelChange",function(t){return e.roomSettings.allowWalkthrough=t})("ngModelChange",function(){return e.save()}),i.cc(),i.dc(31,"label",7),i.Wc(32),i.rc(33,"translate"),i.cc(),i.cc(),i.dc(34,"button",8),i.nc("click",function(){return e.deleteRoom()}),i.Wc(35),i.rc(36,"translate"),i.cc()),2&t&&(i.Kb(2),i.Xc(i.sc(3,16,"navigator.roomname")),i.Kb(2),i.yc("ngModel",e.roomSettings.roomName),i.Kb(3),i.Xc(i.sc(8,18,"navigator.roomsettings.desc")),i.Kb(2),i.yc("ngModel",e.roomSettings.roomDescription),i.Kb(3),i.Xc(i.sc(13,20,"navigator.category")),i.Kb(2),i.yc("ngModel",e.roomSettings.categoryId),i.Kb(1),i.yc("ngForOf",e.categories),i.Kb(3),i.Xc(i.sc(19,22,"navigator.maxvisitors")),i.Kb(2),i.yc("ngModel",e.roomSettings.userCount),i.Kb(1),i.yc("ngForOf",e.maxVisitors),i.Kb(3),i.Xc(i.sc(25,24,"navigator.tradesettings")),i.Kb(2),i.yc("ngModel",e.roomSettings.tradeState),i.Kb(1),i.yc("ngForOf",i.sc(28,26,e.tradeSettings)),i.Kb(3),i.yc("ngModel",e.roomSettings.allowWalkthrough),i.Kb(2),i.Xc(i.sc(33,28,"navigator.roomsettings.allow_walk_through")),i.Kb(3),i.Yc(" ",i.sc(36,30,"navigator.roomsettings.delete"),"\n"))},directives:[Ti.b,Ti.j,Ti.l,Ti.q,p.m,Ti.a,Ti.m,Ti.s],pipes:[Fs,p.h],encapsulation:2}),t})();function Jf(t,e){1&t&&(i.dc(0,"small",18),i.Wc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Yc(" ",i.sc(2,1,"navigator.roomsettings.invalidconfirm")," "))}function $f(t,e){if(1&t){const t=i.ec();i.dc(0,"div"),i.dc(1,"div",14),i.dc(2,"label"),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",15),i.nc("ngModelChange",function(e){return i.Lc(t),i.qc().roomSettings.password=e})("blur",function(){return i.Lc(t),i.qc().save()}),i.cc(),i.cc(),i.dc(6,"div",16),i.dc(7,"label"),i.Wc(8),i.rc(9,"translate"),i.cc(),i.dc(10,"input",15),i.nc("ngModelChange",function(e){return i.Lc(t),i.qc().roomSettings.confirmPassword=e})("blur",function(){return i.Lc(t),i.qc().save()}),i.cc(),i.Uc(11,Jf,3,3,"small",17),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Xc(i.sc(4,5,"navigator.roomsettings.password")),i.Kb(2),i.yc("ngModel",t.roomSettings.password),i.Kb(3),i.Xc(i.sc(9,7,"navigator.roomsettings.passwordconfirm")),i.Kb(2),i.yc("ngModel",t.roomSettings.confirmPassword),i.Kb(1),i.yc("ngIf",!t.roomSettings.isValidPassword)}}let tE=(()=>{class t{constructor(){this.onSave=new i.r}save(){this.onSave.emit(this.roomSettings)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-navigator-roomsettings-tab-access-component"]],inputs:{roomSettings:"roomSettings"},outputs:{onSave:"onSave"},decls:43,vars:37,consts:[[1,"font-weight-bold",2,"color","#4a4a4a"],[1,"mb-3",2,"margin-top","5px"],[1,"font-weight-bold"],[1,"form-check",2,"margin-top","10px"],["type","radio","name","doormode","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[1,"form-check"],["type","radio","name","doormode","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","doormode","value","3",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check","mb-2"],["type","radio","name","doormode","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"form-check","mb-2",2,"margin-top","10px"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-group","mb-2"],["type","password","placeholder","*****",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","blur"],[1,"form-group","mb-3"],["class","form-text text-muted font-weight-bold","style","color: red !important",4,"ngIf"],[1,"form-text","text-muted","font-weight-bold",2,"color","red !important"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Wc(1),i.rc(2,"translate"),i.cc(),i.dc(3,"div",1),i.Wc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"div",2),i.Wc(7),i.rc(8,"translate"),i.cc(),i.dc(9,"div",3),i.dc(10,"input",4),i.nc("ngModelChange",function(t){return e.roomSettings.lockState=t})("ngModelChange",function(){return e.save()}),i.cc(),i.dc(11,"label",5),i.Wc(12),i.rc(13,"translate"),i.cc(),i.cc(),i.dc(14,"div",6),i.dc(15,"input",7),i.nc("ngModelChange",function(t){return e.roomSettings.lockState=t})("ngModelChange",function(){return e.save()}),i.cc(),i.dc(16,"label",5),i.Wc(17),i.rc(18,"translate"),i.cc(),i.cc(),i.dc(19,"div",6),i.dc(20,"input",8),i.nc("ngModelChange",function(t){return e.roomSettings.lockState=t})("ngModelChange",function(){return e.save()}),i.cc(),i.dc(21,"label",5),i.Wc(22),i.rc(23,"translate"),i.cc(),i.cc(),i.dc(24,"div",9),i.dc(25,"input",10),i.nc("ngModelChange",function(t){return e.roomSettings.lockState=t}),i.cc(),i.dc(26,"label",5),i.Wc(27),i.rc(28,"translate"),i.cc(),i.cc(),i.Uc(29,$f,12,9,"div",11),i.dc(30,"div",2),i.Wc(31),i.rc(32,"translate"),i.cc(),i.dc(33,"div",12),i.dc(34,"input",13),i.nc("ngModelChange",function(t){return e.roomSettings.allowPets=t})("ngModelChange",function(){return e.save()}),i.cc(),i.dc(35,"label",5),i.Wc(36),i.rc(37,"translate"),i.cc(),i.cc(),i.dc(38,"div",6),i.dc(39,"input",13),i.nc("ngModelChange",function(t){return e.roomSettings.allowPetsEat=t})("ngModelChange",function(){return e.save()}),i.cc(),i.dc(40,"label",5),i.Wc(41),i.rc(42,"translate"),i.cc(),i.cc()),2&t&&(i.Kb(1),i.Yc(" ",i.sc(2,17,"navigator.roomsettings.roomaccess.caption"),"\n"),i.Kb(3),i.Yc(" ",i.sc(5,19,"navigator.roomsettings.roomaccess.info"),"\n"),i.Kb(3),i.Yc(" ",i.sc(8,21,"navigator.roomsettings.doormode"),"\n"),i.Kb(3),i.yc("ngModel",e.roomSettings.lockState),i.Kb(2),i.Xc(i.sc(13,23,"navigator.roomsettings.doormode.open")),i.Kb(3),i.yc("ngModel",e.roomSettings.lockState),i.Kb(2),i.Xc(i.sc(18,25,"navigator.roomsettings.doormode.doorbell")),i.Kb(3),i.yc("ngModel",e.roomSettings.lockState),i.Kb(2),i.Xc(i.sc(23,27,"navigator.roomsettings.doormode.invisible")),i.Kb(3),i.yc("ngModel",e.roomSettings.lockState),i.Kb(2),i.Xc(i.sc(28,29,"navigator.roomsettings.doormode.password")),i.Kb(2),i.yc("ngIf","2"==e.roomSettings.lockState),i.Kb(2),i.Yc(" ",i.sc(32,31,"navigator.roomsettings.pets"),"\n"),i.Kb(3),i.yc("ngModel",e.roomSettings.allowPets),i.Kb(2),i.Xc(i.sc(37,33,"navigator.roomsettings.allowpets")),i.Kb(3),i.yc("ngModel",e.roomSettings.allowPetsEat),i.Kb(2),i.Xc(i.sc(42,35,"navigator.roomsettings.allowfoodconsume")))},directives:[Ti.o,Ti.b,Ti.j,Ti.l,p.n,Ti.a],pipes:[Fs],encapsulation:2}),t})();function eE(t,e){if(1&t){const t=i.ec();i.dc(0,"div",6),i.dc(1,"button",7),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc().openProfile(s.key)}),i.Wc(2),i.cc(),i.dc(3,"button",8),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc().takeRights(s.key)}),i.Zb(4,"i",9),i.cc(),i.cc()}if(2&t){const t=e.$implicit;i.Kb(2),i.Yc(" ",t.value," ")}}function sE(t,e){if(1&t){const t=i.ec();i.dc(0,"div",6),i.dc(1,"button",8),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc().giveRights(s.key)}),i.Zb(2,"i",10),i.cc(),i.dc(3,"button",11),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc().openProfile(s.key)}),i.Wc(4),i.cc(),i.cc()}if(2&t){const t=e.$implicit;i.Kb(4),i.Yc(" ",t.value," ")}}const iE=function(){return["displayed","total"]},nE=function(t,e){return[t,e]};let rE=(()=>{class t{constructor(){this.onSave=new i.r,this.onGiveRights=new i.r,this.onTakeRights=new i.r,this.onOpenProfile=new i.r}save(){this.onSave.emit(this.roomSettings)}giveRights(t){this.onGiveRights.emit(t)}takeRights(t){this.onTakeRights.emit(t)}openProfile(t){this.onOpenProfile.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-navigator-roomsettings-tab-rights-component"]],inputs:{roomSettings:"roomSettings"},outputs:{onSave:"onSave",onGiveRights:"onGiveRights",onTakeRights:"onTakeRights",onOpenProfile:"onOpenProfile"},decls:18,vars:24,consts:[[1,"row"],[1,"col-6"],[1,"font-weight-bold","mb-2"],[1,"grid-container","position-relativ","mb-1",2,"min-height","400px","max-height","400px"],["class","btn-group mb-1 w-100",4,"ngFor","ngForOf"],[1,"grid-container","position-relative","mb-1",2,"min-height","400px","max-height","400px"],[1,"btn-group","mb-1","w-100"],[1,"btn","btn-primary","btn-sm","w-100","room-settings-option",2,"background-color","#7d7d7d","margin-right","10px",3,"click"],[1,"btn","btn-primary","btn-sm","room-settings-mini-button",2,"width","38px","font-size","13px",3,"click"],[1,"fas","fa-chevron-right"],[1,"fas","fa-chevron-left"],[1,"btn","btn-primary","btn-sm","w-100","room-settings-option",2,"background-color","#7d7d7d","margin-left","10px",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"div",2),i.Wc(3),i.rc(4,"translate"),i.cc(),i.cc(),i.dc(5,"div",1),i.dc(6,"div",2),i.Wc(7),i.rc(8,"translate"),i.cc(),i.cc(),i.cc(),i.dc(9,"div",0),i.dc(10,"div",1),i.dc(11,"perfect-scrollbar",3),i.Uc(12,eE,5,1,"div",4),i.rc(13,"keyvalue"),i.cc(),i.cc(),i.dc(14,"div",1),i.dc(15,"perfect-scrollbar",5),i.Uc(16,sE,5,1,"div",4),i.rc(17,"keyvalue"),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Yc(" ",i.uc(4,4,"navigator.flatctrls.userswithrights",i.Bc(16,iE),i.Dc(17,nE,e.roomSettings.usersWithRights.size.toString(),e.roomSettings.usersWithRights.size.toString()))," "),i.Kb(4),i.Yc(" ",i.uc(8,8,"navigator.flatctrls.friends",i.Bc(20,iE),i.Dc(21,nE,e.roomSettings.friendsWithoutRights.size.toString(),e.roomSettings.friendsWithoutRights.size.toString()))," "),i.Kb(5),i.yc("ngForOf",i.sc(13,12,e.roomSettings.usersWithRights)),i.Kb(4),i.yc("ngForOf",i.sc(17,14,e.roomSettings.friendsWithoutRights)))},directives:[Oi.b,p.m],pipes:[Fs,p.h],encapsulation:2}),t})(),aE=(()=>{class t{constructor(){this.onSave=new i.r}save(){this.onSave.emit(this.roomSettings)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-navigator-roomsettings-tab-vipchat-component"]],inputs:{roomSettings:"roomSettings"},outputs:{onSave:"onSave"},decls:88,vars:86,consts:[[1,"font-weight-bold"],[1,"mb-3"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[1,"form-control","form-control-sm","mb-3",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","-1"],["value","-2"],[1,"mb-2"],[1,"form-control","form-control-sm","mb-2",3,"ngModel","ngModelChange"],["value","2"],[1,"form-group","mb-0"],["type","number","min","0",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","blur"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Wc(1),i.rc(2,"translate"),i.cc(),i.dc(3,"div",1),i.Wc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"div",0),i.Wc(7),i.rc(8,"translate"),i.cc(),i.dc(9,"div",2),i.dc(10,"input",3),i.nc("ngModelChange",function(t){return e.roomSettings.hideWalls=t})("ngModelChange",function(){return e.save()}),i.cc(),i.dc(11,"label",4),i.Wc(12),i.rc(13,"translate"),i.cc(),i.cc(),i.dc(14,"select",5),i.nc("ngModelChange",function(t){return e.roomSettings.wallThickness=t})("ngModelChange",function(){return e.save()}),i.dc(15,"option",6),i.Wc(16),i.rc(17,"translate"),i.cc(),i.dc(18,"option",7),i.Wc(19),i.rc(20,"translate"),i.cc(),i.dc(21,"option",8),i.Wc(22),i.rc(23,"translate"),i.cc(),i.dc(24,"option",9),i.Wc(25),i.rc(26,"translate"),i.cc(),i.cc(),i.dc(27,"select",5),i.nc("ngModelChange",function(t){return e.roomSettings.floorThickness=t})("ngModelChange",function(){return e.save()}),i.dc(28,"option",6),i.Wc(29),i.rc(30,"translate"),i.cc(),i.dc(31,"option",7),i.Wc(32),i.rc(33,"translate"),i.cc(),i.dc(34,"option",8),i.Wc(35),i.rc(36,"translate"),i.cc(),i.dc(37,"option",9),i.Wc(38),i.rc(39,"translate"),i.cc(),i.cc(),i.dc(40,"div",0),i.Wc(41),i.rc(42,"translate"),i.cc(),i.dc(43,"div",10),i.Wc(44),i.rc(45,"translate"),i.cc(),i.dc(46,"select",11),i.nc("ngModelChange",function(t){return e.roomSettings.chatBubbleMode=t})("ngModelChange",function(){return e.save()}),i.dc(47,"option",6),i.Wc(48),i.rc(49,"translate"),i.cc(),i.dc(50,"option",7),i.Wc(51),i.rc(52,"translate"),i.cc(),i.cc(),i.dc(53,"select",11),i.nc("ngModelChange",function(t){return e.roomSettings.chatBubbleWeight=t})("ngModelChange",function(){return e.save()}),i.dc(54,"option",6),i.Wc(55),i.rc(56,"translate"),i.cc(),i.dc(57,"option",7),i.Wc(58),i.rc(59,"translate"),i.cc(),i.dc(60,"option",12),i.Wc(61),i.rc(62,"translate"),i.cc(),i.cc(),i.dc(63,"select",11),i.nc("ngModelChange",function(t){return e.roomSettings.chatBubbleSpeed=t})("ngModelChange",function(){return e.save()}),i.dc(64,"option",6),i.Wc(65),i.rc(66,"translate"),i.cc(),i.dc(67,"option",7),i.Wc(68),i.rc(69,"translate"),i.cc(),i.dc(70,"option",12),i.Wc(71),i.rc(72,"translate"),i.cc(),i.cc(),i.dc(73,"select",11),i.nc("ngModelChange",function(t){return e.roomSettings.chatFloodProtection=t})("ngModelChange",function(){return e.save()}),i.dc(74,"option",6),i.Wc(75),i.rc(76,"translate"),i.cc(),i.dc(77,"option",7),i.Wc(78),i.rc(79,"translate"),i.cc(),i.dc(80,"option",12),i.Wc(81),i.rc(82,"translate"),i.cc(),i.cc(),i.dc(83,"div",13),i.dc(84,"label"),i.Wc(85),i.rc(86,"translate"),i.cc(),i.dc(87,"input",14),i.nc("ngModelChange",function(t){return e.roomSettings.chatDistance=t})("blur",function(){return e.save()}),i.cc(),i.cc()),2&t&&(i.Kb(1),i.Xc(i.sc(2,34,"navigator.roomsettings.vip.caption")),i.Kb(3),i.Xc(i.sc(5,36,"navigator.roomsettings.vip.info")),i.Kb(3),i.Xc(i.sc(8,38,"navigator.roomsettings.vip_settings")),i.Kb(3),i.yc("ngModel",e.roomSettings.hideWalls),i.Kb(2),i.Xc(i.sc(13,40,"navigator.roomsettings.hide_walls")),i.Kb(2),i.yc("ngModel",e.roomSettings.wallThickness),i.Kb(2),i.Xc(i.sc(17,42,"navigator.roomsettings.wall_thickness.normal")),i.Kb(3),i.Xc(i.sc(20,44,"navigator.roomsettings.wall_thickness.thick")),i.Kb(3),i.Xc(i.sc(23,46,"navigator.roomsettings.wall_thickness.thin")),i.Kb(3),i.Xc(i.sc(26,48,"navigator.roomsettings.wall_thickness.thinnest")),i.Kb(2),i.yc("ngModel",e.roomSettings.floorThickness),i.Kb(2),i.Xc(i.sc(30,50,"navigator.roomsettings.floor_thickness.normal")),i.Kb(3),i.Xc(i.sc(33,52,"navigator.roomsettings.floor_thickness.thick")),i.Kb(3),i.Xc(i.sc(36,54,"navigator.roomsettings.floor_thickness.thin")),i.Kb(3),i.Xc(i.sc(39,56,"navigator.roomsettings.floor_thickness.thinnest")),i.Kb(3),i.Xc(i.sc(42,58,"navigator.roomsettings.chat_settings")),i.Kb(3),i.Xc(i.sc(45,60,"navigator.roomsettings.chat_settings.info")),i.Kb(2),i.yc("ngModel",e.roomSettings.chatBubbleMode),i.Kb(2),i.Xc(i.sc(49,62,"navigator.roomsettings.chat.mode.free.flow")),i.Kb(3),i.Xc(i.sc(52,64,"navigator.roomsettings.chat.mode.line.by.line")),i.Kb(2),i.yc("ngModel",e.roomSettings.chatBubbleWeight),i.Kb(2),i.Xc(i.sc(56,66,"navigator.roomsettings.chat.bubbles.width.normal")),i.Kb(3),i.Xc(i.sc(59,68,"navigator.roomsettings.chat.bubbles.width.thin")),i.Kb(3),i.Xc(i.sc(62,70,"navigator.roomsettings.chat.bubbles.width.wide")),i.Kb(2),i.yc("ngModel",e.roomSettings.chatBubbleSpeed),i.Kb(2),i.Xc(i.sc(66,72,"navigator.roomsettings.chat.speed.fast")),i.Kb(3),i.Xc(i.sc(69,74,"navigator.roomsettings.chat.speed.normal")),i.Kb(3),i.Xc(i.sc(72,76,"navigator.roomsettings.chat.speed.slow")),i.Kb(2),i.yc("ngModel",e.roomSettings.chatFloodProtection),i.Kb(2),i.Xc(i.sc(76,78,"navigator.roomsettings.chat.flood.loose")),i.Kb(3),i.Xc(i.sc(79,80,"navigator.roomsettings.chat.flood.normal")),i.Kb(3),i.Xc(i.sc(82,82,"navigator.roomsettings.chat.flood.strict")),i.Kb(4),i.Xc(i.sc(86,84,"navigator.roomsettings.chat_settings.hearing.distance")),i.Kb(2),i.yc("ngModel",e.roomSettings.chatDistance))},directives:[Ti.a,Ti.j,Ti.l,Ti.q,Ti.m,Ti.s,Ti.n,Ti.b],pipes:[Fs],encapsulation:2}),t})();function oE(t,e){if(1&t){const t=i.ec();i.dc(0,"div",18),i.dc(1,"button",19),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc().openProfile(s.key)}),i.Wc(2),i.cc(),i.dc(3,"button",20),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc().roomSettings.selectUserToUnban(s.key)}),i.Zb(4,"i",21),i.cc(),i.cc()}if(2&t){const t=e.$implicit;i.Kb(2),i.Yc(" ",t.value," ")}}const cE=function(t){return{disabled:t}};let _E=(()=>{class t{constructor(){this.onSave=new i.r,this.onUnban=new i.r,this.onOpenProfile=new i.r}save(){this.onSave.emit(this.roomSettings)}unban(){this.onUnban.emit()}openProfile(t){this.onOpenProfile.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-navigator-roomsettings-tab-mod-component"]],inputs:{roomSettings:"roomSettings"},outputs:{onSave:"onSave",onUnban:"onUnban",onOpenProfile:"onOpenProfile"},decls:59,vars:54,consts:[[1,"mb-3"],[1,"font-weight-bold"],[1,"form-check","form-check-inline"],["type","radio","name","moderation_mute","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","moderation_mute","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"font-weight-bold","mt-2"],["type","radio","name","moderation_kick","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","moderation_kick","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","moderation_kick","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","moderation_ban","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","moderation_ban","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"font-weight-bold","mt-3","mb-1"],[1,"row"],[1,"col-6"],[1,"grid-container","position-relativ","mb-1",2,"min-height","150px","max-height","150px"],["class","btn-group mb-1 w-100",4,"ngFor","ngForOf"],[1,"btn","btn-primary","btn-sm","w-100","btn-menu",3,"ngClass","click"],[1,"btn-group","mb-1","w-100"],[1,"btn","btn-primary","btn-sm","w-100",3,"click"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-chevron-right"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Wc(1),i.rc(2,"translate"),i.cc(),i.dc(3,"div",1),i.Wc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"div",2),i.dc(7,"input",3),i.nc("ngModelChange",function(t){return e.roomSettings.muteState=t})("ngModelChange",function(){return e.save()}),i.cc(),i.dc(8,"label",4),i.Wc(9),i.rc(10,"translate"),i.cc(),i.cc(),i.dc(11,"div",2),i.dc(12,"input",5),i.nc("ngModelChange",function(t){return e.roomSettings.muteState=t})("ngModelChange",function(){return e.save()}),i.cc(),i.dc(13,"label",4),i.Wc(14),i.rc(15,"translate"),i.cc(),i.cc(),i.dc(16,"div",6),i.Wc(17),i.rc(18,"translate"),i.cc(),i.dc(19,"div",2),i.dc(20,"input",7),i.nc("ngModelChange",function(t){return e.roomSettings.kickState=t})("ngModelChange",function(){return e.save()}),i.cc(),i.dc(21,"label",4),i.Wc(22),i.rc(23,"translate"),i.cc(),i.cc(),i.dc(24,"div",2),i.dc(25,"input",8),i.nc("ngModelChange",function(t){return e.roomSettings.kickState=t})("ngModelChange",function(){return e.save()}),i.cc(),i.dc(26,"label",4),i.Wc(27),i.rc(28,"translate"),i.cc(),i.cc(),i.dc(29,"div",2),i.dc(30,"input",9),i.nc("ngModelChange",function(t){return e.roomSettings.kickState=t})("ngModelChange",function(){return e.save()}),i.cc(),i.dc(31,"label",4),i.Wc(32),i.rc(33,"translate"),i.cc(),i.cc(),i.dc(34,"div",6),i.Wc(35),i.rc(36,"translate"),i.cc(),i.dc(37,"div",2),i.dc(38,"input",10),i.nc("ngModelChange",function(t){return e.roomSettings.banState=t})("ngModelChange",function(){return e.save()}),i.cc(),i.dc(39,"label",4),i.Wc(40),i.rc(41,"translate"),i.cc(),i.cc(),i.dc(42,"div",2),i.dc(43,"input",11),i.nc("ngModelChange",function(t){return e.roomSettings.banState=t})("ngModelChange",function(){return e.save()}),i.cc(),i.dc(44,"label",4),i.Wc(45),i.rc(46,"translate"),i.cc(),i.cc(),i.dc(47,"div",12),i.Wc(48),i.rc(49,"translate"),i.cc(),i.dc(50,"div",13),i.dc(51,"div",14),i.dc(52,"perfect-scrollbar",15),i.Uc(53,oE,5,1,"div",16),i.rc(54,"keyvalue"),i.cc(),i.cc(),i.dc(55,"div",14),i.dc(56,"button",17),i.nc("click",function(){return e.unban()}),i.Wc(57),i.rc(58,"translate"),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(1),i.Yc(" ",i.sc(2,24,"navigator.roomsettings.moderation.header"),"\n"),i.Kb(3),i.Yc(" ",i.sc(5,26,"navigator.roomsettings.moderation.mute.header"),"\n"),i.Kb(3),i.yc("ngModel",e.roomSettings.muteState),i.Kb(2),i.Xc(i.sc(10,28,"navigator.roomsettings.moderation.none")),i.Kb(3),i.yc("ngModel",e.roomSettings.muteState),i.Kb(2),i.Xc(i.sc(15,30,"navigator.roomsettings.moderation.rights")),i.Kb(3),i.Yc(" ",i.sc(18,32,"navigator.roomsettings.moderation.kick.header"),"\n"),i.Kb(3),i.yc("ngModel",e.roomSettings.kickState),i.Kb(2),i.Xc(i.sc(23,34,"navigator.roomsettings.moderation.all")),i.Kb(3),i.yc("ngModel",e.roomSettings.kickState),i.Kb(2),i.Xc(i.sc(28,36,"navigator.roomsettings.moderation.rights")),i.Kb(3),i.yc("ngModel",e.roomSettings.kickState),i.Kb(2),i.Xc(i.sc(33,38,"navigator.roomsettings.moderation.none")),i.Kb(3),i.Yc(" ",i.sc(36,40,"navigator.roomsettings.moderation.ban.header"),"\n"),i.Kb(3),i.yc("ngModel",e.roomSettings.banState),i.Kb(2),i.Xc(i.sc(41,42,"navigator.roomsettings.moderation.none")),i.Kb(3),i.yc("ngModel",e.roomSettings.banState),i.Kb(2),i.Xc(i.sc(46,44,"navigator.roomsettings.moderation.rights")),i.Kb(3),i.Zc(" ",i.sc(49,46,"navigator.roomsettings.moderation.banned.users")," (",e.roomSettings.bannedUsers.size,")\n"),i.Kb(5),i.yc("ngForOf",i.sc(54,48,e.roomSettings.bannedUsers)),i.Kb(3),i.yc("ngClass",i.Cc(52,cE,0===e.roomSettings.selectedUserToUnban)),i.Kb(1),i.Zc(" ",i.sc(58,50,"navigator.roomsettings.moderation.unban")," ",e.roomSettings.selectedUsernameToUnban," "))},directives:[Ti.o,Ti.b,Ti.j,Ti.l,Oi.b,p.m,p.l],pipes:[Fs,p.h],encapsulation:2}),t})();function hE(t,e){if(1&t){const t=i.ec();i.dc(0,"nitro-navigator-roomsettings-tab-basic-component",12),i.nc("onSave",function(e){return i.Lc(t),i.qc(2).onSave(e)})("onDeleteRoom",function(){return i.Lc(t),i.qc(2).onDeleteRoom()}),i.cc()}if(2&t){const t=i.qc(2);i.yc("roomSettings",t.roomSettings)("categories",t.categories)("maxVisitors",t.maxVisitors)("tradeSettings",t.tradeSettings)}}function lE(t,e){if(1&t){const t=i.ec();i.dc(0,"nitro-navigator-roomsettings-tab-access-component",13),i.nc("onSave",function(e){return i.Lc(t),i.qc(2).onSave(e)}),i.cc()}if(2&t){const t=i.qc(2);i.yc("roomSettings",t.roomSettings)}}function uE(t,e){if(1&t){const t=i.ec();i.dc(0,"nitro-navigator-roomsettings-tab-rights-component",14),i.nc("onSave",function(e){return i.Lc(t),i.qc(2).onSave(e)})("onGiveRights",function(e){return i.Lc(t),i.qc(2).onGiveRights(e)})("onTakeRights",function(e){return i.Lc(t),i.qc(2).onTakeRights(e)})("onOpenProfile",function(e){return i.Lc(t),i.qc(2).onOpenProfile(e)}),i.cc()}if(2&t){const t=i.qc(2);i.yc("roomSettings",t.roomSettings)}}function dE(t,e){if(1&t){const t=i.ec();i.dc(0,"nitro-navigator-roomsettings-tab-vipchat-component",13),i.nc("onSave",function(e){return i.Lc(t),i.qc(2).onSave(e)}),i.cc()}if(2&t){const t=i.qc(2);i.yc("roomSettings",t.roomSettings)}}function gE(t,e){if(1&t){const t=i.ec();i.dc(0,"nitro-navigator-roomsettings-tab-mod-component",15),i.nc("onSave",function(e){return i.Lc(t),i.qc(2).onSave(e)})("onUnban",function(e){return i.Lc(t),i.qc(2).onUnban(e)})("onOpenProfile",function(e){return i.Lc(t),i.qc(2).onOpenProfile(e)}),i.cc()}if(2&t){const t=i.qc(2);i.yc("roomSettings",t.roomSettings)}}const mE=function(t){return{active:t}};function pE(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.Wc(2),i.rc(3,"translate"),i.dc(4,"button",3),i.nc("click",function(){return i.Lc(t),i.qc().hide()}),i.Zb(5,"i",4),i.cc(),i.cc(),i.dc(6,"div",5),i.dc(7,"div",6),i.dc(8,"button",7),i.nc("click",function(){return i.Lc(t),i.qc().changeTab(1)}),i.Wc(9),i.rc(10,"translate"),i.cc(),i.dc(11,"button",7),i.nc("click",function(){return i.Lc(t),i.qc().changeTab(2)}),i.Wc(12),i.rc(13,"translate"),i.cc(),i.dc(14,"button",7),i.nc("click",function(){return i.Lc(t),i.qc().changeTab(3)}),i.Wc(15),i.rc(16,"translate"),i.cc(),i.dc(17,"button",7),i.nc("click",function(){return i.Lc(t),i.qc().changeTab(4)}),i.Wc(18),i.rc(19,"translate"),i.cc(),i.dc(20,"button",7),i.nc("click",function(){return i.Lc(t),i.qc().changeTab(5)}),i.Wc(21),i.rc(22,"translate"),i.cc(),i.cc(),i.Uc(23,hE,1,4,"nitro-navigator-roomsettings-tab-basic-component",8),i.Uc(24,lE,1,1,"nitro-navigator-roomsettings-tab-access-component",9),i.Uc(25,uE,1,1,"nitro-navigator-roomsettings-tab-rights-component",10),i.Uc(26,dE,1,1,"nitro-navigator-roomsettings-tab-vipchat-component",9),i.Uc(27,gE,1,1,"nitro-navigator-roomsettings-tab-mod-component",11),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(2),i.Yc(" ",i.sc(3,16,"navigator.roomsettings")," "),i.Kb(6),i.yc("ngClass",i.Cc(28,mE,1===t.currentTab)),i.Kb(1),i.Yc(" ",i.sc(10,18,"navigator.roomsettings.tab.1")," "),i.Kb(2),i.yc("ngClass",i.Cc(30,mE,2===t.currentTab)),i.Kb(1),i.Yc(" ",i.sc(13,20,"navigator.roomsettings.tab.2")," "),i.Kb(2),i.yc("ngClass",i.Cc(32,mE,3===t.currentTab)),i.Kb(1),i.Yc(" ",i.sc(16,22,"navigator.roomsettings.tab.3")," "),i.Kb(2),i.yc("ngClass",i.Cc(34,mE,4===t.currentTab)),i.Kb(1),i.Yc(" ",i.sc(19,24,"navigator.roomsettings.tab.4")," "),i.Kb(2),i.yc("ngClass",i.Cc(36,mE,5===t.currentTab)),i.Kb(1),i.Yc(" ",i.sc(22,26,"navigator.roomsettings.tab.5")," "),i.Kb(2),i.yc("ngIf",1===t.currentTab),i.Kb(1),i.yc("ngIf",2===t.currentTab),i.Kb(1),i.yc("ngIf",3===t.currentTab),i.Kb(1),i.yc("ngIf",4===t.currentTab),i.Kb(1),i.yc("ngIf",5===t.currentTab)}}let fE=(()=>{class t{constructor(t,e,s,i){this._navigatorService=t,this._friendListService=e,this._notificationService=s,this._ngZone=i,this._currentTab=1,this._messages=[],this._maxVisitors=[],this.onRoomSettingsEvent=this.onRoomSettingsEvent.bind(this),this.onRoomUsersWithRightsEvent=this.onRoomUsersWithRightsEvent.bind(this),this.onRoomBannedUsersEvent=this.onRoomBannedUsersEvent.bind(this),this.clear(),this.registerMessages()}clear(){this._currentTab=1,this.roomSettings=new Yf(this._ngZone),this._roomId=0,this._oldRoomName=null,this._visible=!1}ngOnDestroy(){this.clear(),this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new kf.a(this.onRoomSettingsEvent),new Wf.a(this.onRoomUsersWithRightsEvent),new Ff.a(this.onRoomBannedUsersEvent)];for(const t of this._messages)u.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)u.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomSettingsEvent(t){if(!(t instanceof kf.a))return;const e=t.getParser();e&&(this.clear(),this._roomId=e.roomId,this._ngZone.run(()=>{this.roomSettings.roomName=e.name,this.roomSettings.roomDescription=e.description,this.roomSettings.categoryId=e.categoryId.toString(),this.roomSettings.userCount=e.userCount.toString(),this.roomSettings.tradeState=e.tradeMode.toString(),this.roomSettings.allowWalkthrough=e.allowWalkthrough,this.roomSettings.lockState=e.state.toString(),this.roomSettings.allowPets=e.allowPets,this.roomSettings.hideWalls=e.hideWalls,this.roomSettings.wallThickness=e.thicknessWall.toString(),this.roomSettings.floorThickness=e.thicknessFloor.toString(),this.roomSettings.chatBubbleMode=e.chatSettings.mode.toString(),this.roomSettings.chatBubbleWeight=e.chatSettings.weight.toString(),this.roomSettings.chatBubbleSpeed=e.chatSettings.speed.toString(),this.roomSettings.chatFloodProtection=e.chatSettings.protection.toString(),this.roomSettings.chatDistance=e.chatSettings.distance,this.roomSettings.muteState=e.moderationSettings.allowMute.toString(),this.roomSettings.kickState=e.moderationSettings.allowKick.toString(),this.roomSettings.banState=e.moderationSettings.allowBan.toString(),this._maxVisitors=this._navigatorService.getMaxVisitors(50),this._oldRoomName=e.name,this._oldLockState=e.state.toString(),this._visible=!0}),u.a.instance.communication.connection.send(new Kf.a(this._roomId)),u.a.instance.communication.connection.send(new jf.a(this._roomId)))}onRoomUsersWithRightsEvent(t){if(!(t instanceof Wf.a))return;const e=t.getParser();e&&(this.roomSettings.usersWithRights=new Map(e.users),this.getFriendsWithoutRights())}onRoomBannedUsersEvent(t){if(!(t instanceof Ff.a))return;const e=t.getParser();e&&(this.roomSettings.bannedUsers=new Map(e.users))}getFriendsWithoutRights(){this._friendListService.friends.forEach((t,e)=>{this.roomSettings.usersWithRights.has(e)||this.roomSettings.friendsWithoutRights.set(e,t.name)})}changeTab(t){this._currentTab=t}onDeleteRoom(){const t=u.a.instance.localization.getValue("navigator.roomsettings.deleteroom.confirm.title"),e=u.a.instance.localization.getValueWithParameter("navigator.roomsettings.deleteroom.confirm.message","room_name","<b>"+this.roomSettings.roomName+"</b>"),s=[new Ma("navigator.roomsettings.delete",()=>{u.a.instance.communication.connection.send(new Vf.a(this._roomId)),this.hide()},["btn-danger"]),new Ma("generic.close",()=>{},["btn-primary"])];this._notificationService.alertWithChoices(e,s,t)}onOpenProfile(t){}onGiveRights(t){this.roomSettings.friendsWithoutRights.has(t)&&(this._ngZone.run(()=>{this.roomSettings.usersWithRights.set(t,this.roomSettings.friendsWithoutRights.get(t)),this.roomSettings.friendsWithoutRights.delete(t)}),u.a.instance.communication.connection.send(new Gf.a(t)))}onTakeRights(t){this.roomSettings.usersWithRights.has(t)&&(this._ngZone.run(()=>{this.roomSettings.friendsWithoutRights.set(t,this.roomSettings.usersWithRights.get(t)),this.roomSettings.usersWithRights.delete(t)}),u.a.instance.communication.connection.send(new Hf.a(t)))}onUnban(){if(0===this.roomSettings.selectedUserToUnban)return;if(!this.roomSettings.bannedUsers.has(this.roomSettings.selectedUserToUnban))return;const t=this.roomSettings.selectedUserToUnban;this._ngZone.run(()=>{this.roomSettings.bannedUsers.delete(this.roomSettings.selectedUserToUnban),this.roomSettings.selectedUserToUnban=0}),u.a.instance.communication.connection.send(new Bf.a(t,this._roomId))}hide(){this._visible=!1,this.clear()}onSave(t){this._ngZone.run(()=>{this.roomSettings=t});let e=t.lockState,s=t.password;t.isValidPassword?this._oldLockState=e:(e=this._oldLockState,s=null),t.roomName.length<1&&(t.roomName=this._oldRoomName),parseInt(t.userCount)<0&&(t.userCount="10");const i=new zf.a(this._roomId,t.roomName,t.roomDescription,parseInt(e),s,parseInt(t.userCount),parseInt(t.categoryId),t.tags.length,t.tags,parseInt(t.tradeState),t.allowPets,t.allowPetsEat,t.allowWalkthrough,t.hideWalls,parseInt(t.wallThickness),parseInt(t.floorThickness),parseInt(t.muteState),parseInt(t.kickState),parseInt(t.banState),parseInt(t.chatBubbleMode),parseInt(t.chatBubbleWeight),parseInt(t.chatBubbleSpeed),t.chatDistance,parseInt(t.chatFloodProtection));u.a.instance.communication.connection.send(i)}get currentTab(){return this._currentTab}get categories(){return this._navigatorService.categories}get maxVisitors(){return this._maxVisitors}get tradeSettings(){return this._navigatorService.tradeSettings}get visible(){return this._visible}get usersWithRights(){return this.roomSettings.usersWithRights}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(fa),i.Yb(Os),i.Yb(Ge),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-navigator-roomsettings-component"]],decls:1,vars:1,consts:[["dragHandle",".card-header","class","card nitro-navigator-roomsettings-component",3,"bringToTop","draggable",4,"ngIf"],["dragHandle",".card-header",1,"card","nitro-navigator-roomsettings-component",3,"bringToTop","draggable"],[1,"card-header",2,"border","none !important","background","transparent","font-size","21px","font-weight","550","color","#4a4a4a"],["type","button",1,"close",2,"margin-top","-33px",3,"click"],[1,"fas","fa-times"],[1,"card-body",2,"padding-top","5px"],[1,"btn-group","w-100","mb-3"],["type","button",1,"btn","btn-menu","btn-sm","btn-primary",3,"ngClass","click"],[3,"roomSettings","categories","maxVisitors","tradeSettings","onSave","onDeleteRoom",4,"ngIf"],[3,"roomSettings","onSave",4,"ngIf"],[3,"roomSettings","onSave","onGiveRights","onTakeRights","onOpenProfile",4,"ngIf"],[3,"roomSettings","onSave","onUnban","onOpenProfile",4,"ngIf"],[3,"roomSettings","categories","maxVisitors","tradeSettings","onSave","onDeleteRoom"],[3,"roomSettings","onSave"],[3,"roomSettings","onSave","onGiveRights","onTakeRights","onOpenProfile"],[3,"roomSettings","onSave","onUnban","onOpenProfile"]],template:function(t,e){1&t&&i.Uc(0,pE,28,38,"div",0),2&t&&i.yc("ngIf",e.visible)},directives:[p.n,li,vi,p.l,Qf,tE,rE,aE,_E],pipes:[Fs],encapsulation:2}),t})();const EE=["nitro-navigator-search-component",""];function SE(t,e){if(1&t){const t=i.ec();i.dc(0,"button",6),i.nc("click",function(){i.Lc(t);const s=e.$implicit;return i.qc().changeFilter(s)}),i.Wc(1),i.rc(2,"translate"),i.cc()}if(2&t){const t=e.$implicit;i.Kb(1),i.Yc(" ",i.sc(2,1,"navigator.filter."+t.name)," ")}}let IE=(()=>{class t{constructor(t,e){this._formBuilder=t,this._navigatorService=e}ngOnInit(){this._form=this._formBuilder.group({search:[""]})}changeFilter(t){this._navigatorService.setCurrentFilter(t)}search(t){this._navigatorService.search(this.searchValue)}clearSearch(){}get form(){return this._form}get searchValue(){return this._navigatorService.lastSearch}set searchValue(t){this._navigatorService.lastSearch=t}get currentFilter(){return this._navigatorService.filter}get searchFilters(){return fa.SEARCH_FILTERS}get hasSearchResults(){return this._navigatorService.lastSearchResults&&this._navigatorService.lastSearchResults.length>0}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Ti.c),i.Yb(fa))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-navigator-search-component",""]],attrs:EE,decls:8,vars:5,consts:[[1,"input-group","mb-2"],["ngbDropdown","",1,"input-group-prepend"],["type","button","ngbDropdownToggle","",1,"btn","btn-secondary","search-select-button"],["ngbDropdownMenu","",1,"dropdown-menu"],["class","dropdown-item","ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],["type","text","placeholder","Buscar salas...",1,"search-input","form-control",3,"ngModel","ngModelChange","keydown.enter"],["ngbDropdownItem","",1,"dropdown-item",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"button",2),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",3),i.Uc(6,SE,3,3,"button",4),i.cc(),i.cc(),i.dc(7,"input",5),i.nc("ngModelChange",function(t){return e.searchValue=t})("keydown.enter",function(t){return e.search(t)}),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Yc(" ",i.sc(4,3,"navigator.filter."+e.currentFilter.name)," "),i.Kb(3),i.yc("ngForOf",e.searchFilters),i.Kb(1),i.yc("ngModel",e.searchValue))},directives:[L_.b,L_.f,L_.d,p.m,Ti.b,Ti.j,Ti.l,L_.c],pipes:[Fs],encapsulation:2}),t})(),RE=(()=>{class t{}return t.LIST=0,t.THUMBNAILS=1,t.FORCED_THUMBNAILS=2,t})();const bE=["nitro-navigator-search-result-item-component",""];function vE(t,e){1&t&&i.Zb(0,"i",13)}function TE(t,e){1&t&&i.Zb(0,"i",14)}function OE(t,e){1&t&&i.Zb(0,"i",15)}function yE(t,e){if(1&t&&(i.bc(0),i.Uc(1,vE,1,0,"i",10),i.Uc(2,TE,1,0,"i",11),i.Uc(3,OE,1,0,"i",12),i.ac()),2&t){const t=i.qc();i.Kb(1),i.yc("ngIf",t.isGroup),i.Kb(1),i.yc("ngIf",t.isDoorbell),i.Kb(1),i.yc("ngIf",t.isPassword)}}function AE(t,e){if(1&t&&(i.dc(0,"span",17),i.Zb(1,"i",3),i.Wc(2),i.cc()),2&t){const t=i.qc(2);i.Kb(2),i.Xc(t.room.ownerName)}}function CE(t,e){if(1&t&&(i.dc(0,"div",16),i.dc(1,"span",17),i.Wc(2),i.cc(),i.dc(3,"span",18),i.Wc(4),i.cc(),i.Uc(5,AE,3,1,"span",19),i.cc()),2&t){const t=i.qc();i.Kb(2),i.Xc(t.room.roomName),i.Kb(2),i.Yc('"',t.room.description,'"'),i.Kb(1),i.yc("ngIf",null!=t.room.ownerName)}}let ME=(()=>{class t{constructor(t,e){this._navigatorService=t,this._ngZone=e,this._thumbnailUrl=null,this._didRequestUrl=!1}visit(){if(this.room.ownerId!==u.a.instance.sessionDataManager.userId){if(0!==this.room.habboGroupId)return void this._navigatorService.goToPrivateRoom(this.room.roomId);switch(this.room.doorMode){case ga.a.DOORBELL_STATE:return void this._navigatorService.openRoomDoorbell(this.room);case ga.a.PASSWORD_STATE:return void this._navigatorService.openRoomPassword(this.room)}}this._navigatorService.goToRoom(this.room.roomId)}get isGroup(){return this.room&&this.room.habboGroupId>0}get isDoorbell(){return this.room&&this.room.doorMode===ga.a.DOORBELL_STATE}get isPassword(){return this.room&&this.room.doorMode===ga.a.PASSWORD_STATE}get thumbnail(){if(this._thumbnailUrl)return this._thumbnailUrl;if(!this.room||this._didRequestUrl)return null;let t=u.a.instance.core.configuration.getValue("thumbnails.url");t=t.replace("%thumbnail%",this.room.roomId.toString());const e=new XMLHttpRequest;return e.open("GET",t,!0),e.onreadystatechange=()=>{4===e.readyState&&200===e.status&&(this._thumbnailUrl=t)},e.send(),this._didRequestUrl=!0,null}get entryBg(){const t=this.room.userCount/this.room.maxUserCount*100;let e="badge-secondary";return t>=92?e="badge-danger":t>=50?e="badge-warning text-white":t>0&&(e="badge-success"),e}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(fa),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-navigator-search-result-item-component",""]],inputs:{room:"room",displayMode:"displayMode"},attrs:bE,decls:13,vars:5,consts:[["type","button",1,"btn","btn-secondary","justify-content-between","detail-info","nav-button",3,"click"],[1,"d-flex","justify-content-center","flex-grow-1","overflow-hidden"],[1,"d-flex","justify-content-center","align-items-center","badge","badge-secondary","text-center",2,"background-color","rgb(39 39 39 / 33%)","padding","0px 10px","border-radius","15px",3,"ngClass"],[1,"fas","fa-user","mr-1"],[1,"d-flex","flex-column","justify-content-center","align-items-start","flex-grow-1","px-2","overflow-hidden"],[1,"d-block","text-truncate",2,"max-width","95%"],[1,"d-flex","flex-row-reverse","align-items-center"],["tooltipClass","search-result-item-tooltip","placement","right","container","body",1,"fas","fa-info-circle",3,"ngbTooltip"],[4,"ngIf"],["roomInfoTooltip",""],["class","fas fa-users mr-2",4,"ngIf"],["class","fas fa-lock mr-2",4,"ngIf"],["class","fas fa-key mr-2",4,"ngIf"],[1,"fas","fa-users","mr-2"],[1,"fas","fa-lock","mr-2"],[1,"fas","fa-key","mr-2"],[1,"container"],[1,"d-block"],[1,"d-block","small","text-muted"],["class","d-block",4,"ngIf"]],template:function(t,e){if(1&t&&(i.dc(0,"button",0),i.nc("click",function(){return e.visit()}),i.dc(1,"div",1),i.dc(2,"div",2),i.Zb(3,"i",3),i.Wc(4),i.cc(),i.dc(5,"div",4),i.dc(6,"span",5),i.Wc(7),i.cc(),i.cc(),i.cc(),i.dc(8,"div",6),i.Zb(9,"i",7),i.Uc(10,yE,4,3,"ng-container",8),i.cc(),i.Uc(11,CE,6,3,"ng-template",null,9,i.Vc),i.cc()),2&t){const t=i.Ic(12);i.Kb(2),i.yc("ngClass",e.entryBg),i.Kb(2),i.Yc("",e.room.userCount," "),i.Kb(3),i.Xc(e.room.roomName),i.Kb(2),i.yc("ngbTooltip",t),i.Kb(1),i.yc("ngIf",0===e.displayMode)}},directives:[p.l,L_.i,p.n],encapsulation:2}),t})();const UE=["nitro-navigator-search-result-component",""],DE=function(t,e){return{"fa-bars":t,"fa-th":e}};function wE(t,e){if(1&t){const t=i.ec();i.dc(0,"h6",5),i.nc("click",function(){return i.Lc(t),i.qc().toggleListMode()}),i.Zb(1,"i",6),i.cc()}if(2&t){const t=i.qc();i.Kb(1),i.yc("ngClass",i.Dc(1,DE,1===t.displayMode,0===t.displayMode))}}const NE=function(t){return{"tall-detail":t}};function LE(t,e){if(1&t&&i.Zb(0,"div",10),2&t){const t=e.$implicit,s=i.qc(2);i.yc("room",t)("displayMode",s.displayMode)("ngClass",i.Cc(3,NE,s.displayMode>=1))}}const xE=function(t,e){return{"grid-2":t,"grid-1":e}};function PE(t,e){if(1&t&&(i.dc(0,"div",7),i.dc(1,"div",8),i.Uc(2,LE,1,5,"div",9),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(1),i.yc("ngClass",i.Dc(2,xE,t.displayMode>=1,0===t.displayMode)),i.Kb(1),i.yc("ngForOf",t.result.rooms)}}const FE=function(t,e){return{"fa-minus":t,"fa-plus":e}};let kE=(()=>{class t{ngOnInit(){this._displayMode=this.result.mode,this._isCollapsed=this.result.closed}toggleListMode(){this._displayMode!==RE.FORCED_THUMBNAILS&&(this._displayMode=this._displayMode!==RE.LIST?RE.LIST:RE.THUMBNAILS)}toggleCollapsed(){this._isCollapsed=!this._isCollapsed}get resultCode(){let t=this.result.code;return(!t||0==t.length)&&this.result.data&&this.result.data.length>0?this.result.data:(t=this.result.code.startsWith("${")?t.substr(2,t.length-3):"navigator.searchcode.title."+t,t)}get displayMode(){return this._displayMode}get isCollapsed(){return!this._isCollapsed}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-navigator-search-result-component",""]],inputs:{result:"result"},attrs:UE,decls:7,vars:9,consts:[[1,"d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0","nav-title",3,"click"],[1,"fas","btn-nav-icon",3,"ngClass"],["class","m-0",3,"click",4,"ngIf"],["class","d-flex flex-column pt-3 grid-container",4,"ngIf"],[1,"m-0",3,"click"],[1,"fas","btn-nav-icon-2",3,"ngClass"],[1,"d-flex","flex-column","pt-3","grid-container"],[1,"grid-items",3,"ngClass"],["nitro-navigator-search-result-item-component","","class","d-flex flex-column item-detail justify-content-center align-items-center","style","margin-bottom: 4px",3,"room","displayMode","ngClass",4,"ngFor","ngForOf"],["nitro-navigator-search-result-item-component","",1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",2,"margin-bottom","4px",3,"room","displayMode","ngClass"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"h6",1),i.nc("click",function(){return e.toggleCollapsed()}),i.Zb(2,"i",2),i.Wc(3),i.rc(4,"translate"),i.cc(),i.Uc(5,wE,2,4,"h6",3),i.cc(),i.Uc(6,PE,3,5,"div",4)),2&t&&(i.Kb(2),i.yc("ngClass",i.Dc(6,FE,e.isCollapsed,!e.isCollapsed)),i.Kb(1),i.Yc(" ",i.sc(4,4,e.resultCode)," "),i.Kb(2),i.yc("ngIf",2!==e.displayMode),i.Kb(1),i.yc("ngIf",e.isCollapsed&&e.result.rooms.length>0))},directives:[p.l,p.n,p.m,ME],pipes:[Fs],encapsulation:2}),t})(),WE=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[fa],imports:[[vm]]}),t})();i.Oc(rh,[p.n,li,vi,IE,p.m,p.l,Oi.b,kE,Pf,fE],[Fs]);let VE=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[Ge],imports:[[vm]]}),t})(),GE=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[I_],imports:[[vm]]}),t})(),HE=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},imports:[[vm]]}),t})(),BE=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[],imports:[[vm]]}),t})(),jE=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[pl],imports:[[vm]]}),t})();const KE=function(){return["count","limit"]},zE=function(t,e){return[t,e]};function YE(t,e){if(1&t&&(i.dc(0,"div",16),i.dc(1,"div",17),i.Wc(2),i.rc(3,"translate"),i.cc(),i.dc(4,"div",18),i.Wc(5),i.rc(6,"translate"),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(2),i.Xc(i.uc(3,2,"wiredfurni.pickfurnis.caption",i.Bc(8,KE),i.Dc(9,zE,t.furniSelectionCount,t.maximumFurniSelectionCount))),i.Kb(3),i.Xc(i.sc(6,6,"wiredfurni.pickfurnis.desc"))}}const XE=["*"];let ZE=(()=>{class t{constructor(t){this._wiredService=t}save(){this._wiredService.component.save()}hide(){this._wiredService.component.close()}get furniName(){return this._wiredService.component.getFurniName()}get furniDescription(){return this._wiredService.component.getFurniDescription()}get requiresFurni(){return this._wiredService.component._Str_19885()}get furniSelectionCount(){return this._wiredService.component.furniSelectedIds.length}get maximumFurniSelectionCount(){return this._wiredService.component.maximumItemSelectionCount}get wiredType(){const t=this._wiredService.component._Str_19071();return t?t._Str_1196():""}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(qe))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-wired-base-component"]],ngContentSelectors:XE,decls:26,vars:15,consts:[[1,"card","nitro-wired-component",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","px-3","pt-3"],[1,"mr-2"],[1,"d-flex","justify-content-center","align-items-center","badge","badge-secondary","badge-sm"],[1,"d-flex","flex-grow-1","flex-column"],[1,"badge","badge-secondary","badge-sm","text-wrap","mb-2"],[1,"badge","badge-secondary","badge-sm","text-wrap"],[1,"d-flex","flex-column","p-3"],["class","mt-2",4,"ngIf"],[1,"btn-group","w-100","mt-2"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"mt-2"],[1,"badge","badge-secondary","badge-sm","text-wrap","text-center","w-100","mb-2"],[1,"badge","badge-secondary","badge-sm","text-wrap","text-center","w-100"]],template:function(t,e){1&t&&(i.xc(),i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"h6",2),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",3),i.nc("click",function(){return e.hide()}),i.Zb(6,"i",4),i.cc(),i.cc(),i.dc(7,"div",5),i.dc(8,"div",6),i.dc(9,"div",7),i.Zb(10,"i"),i.cc(),i.cc(),i.dc(11,"div",8),i.dc(12,"div",9),i.Wc(13),i.cc(),i.dc(14,"div",10),i.Wc(15),i.cc(),i.cc(),i.cc(),i.dc(16,"div",11),i.wc(17),i.Uc(18,YE,7,12,"div",12),i.dc(19,"div",13),i.dc(20,"button",14),i.nc("click",function(){return e.save()}),i.Wc(21),i.rc(22,"translate"),i.cc(),i.dc(23,"button",15),i.nc("click",function(){return e.hide()}),i.Wc(24),i.rc(25,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Xc(i.sc(4,9,"wiredfurni.title")),i.Kb(7),i.Nb("icon icon-wired-",e.wiredType,""),i.Kb(3),i.Xc(e.furniName),i.Kb(2),i.Xc(e.furniDescription),i.Kb(3),i.yc("ngIf",e.requiresFurni),i.Kb(3),i.Xc(i.sc(22,11,"wiredfurni.ready")),i.Kb(3),i.Xc(i.sc(25,13,"cancel")))},directives:[li,vi,p.n],pipes:[Fs],encapsulation:2}),t})();const qE=["*"];let QE=(()=>{class t{constructor(){this.delay=0,this.delayChange=new i.r,this.delayLocale=""}ngOnChanges(t){t.delay.currentValue!==t.delay.previousValue&&this.updateLocaleParameter()}onSliderChange(){this.delayChange.emit(this.delay)}decreaseDelay(){this.delay-=1,this.delay<t.DELAY_MINIMUM_VALUE&&(this.delay=t.DELAY_MINIMUM_VALUE),this.delayChange.emit(this.delay)}increaseDelay(){this.delay+=1,this.delay>t.DELAY_MAXIMUM_VALUE&&(this.delay=t.DELAY_MAXIMUM_VALUE),this.delayChange.emit(this.delay)}updateLocaleParameter(){this.delayLocale=u.a.instance.getLocalizationWithParameter("wiredfurni.params.delay","seconds",mu.getLocaleName(this.delay))}get delaySliderOptions(){return{floor:t.DELAY_MINIMUM_VALUE,ceil:t.DELAY_MAXIMUM_VALUE,step:t.DELAY_STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.DELAY_MINIMUM_VALUE=0,t.DELAY_MAXIMUM_VALUE=20,t.DELAY_STEPPER_VALUE=1,t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-wired-action-base-component"]],inputs:{delay:"delay"},outputs:{delayChange:"delayChange"},features:[i.Ib],ngContentSelectors:qE,decls:10,vars:3,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","delay",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(t,e){1&t&&(i.xc(),i.dc(0,"nitro-wired-base-component"),i.wc(1),i.dc(2,"p",0),i.Wc(3),i.cc(),i.dc(4,"div",1),i.dc(5,"button",2),i.nc("click",function(){return e.decreaseDelay()}),i.Zb(6,"i",3),i.cc(),i.dc(7,"ngx-slider",4),i.nc("valueChange",function(t){return e.delay=t})("valueChange",function(){return e.onSliderChange()}),i.cc(),i.dc(8,"button",2),i.nc("click",function(){return e.increaseDelay()}),i.Zb(9,"i",5),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Xc(e.delayLocale),i.Kb(4),i.yc("options",e.delaySliderOptions)("value",e.delay))},directives:[ZE,hn.b],encapsulation:2}),t})(),JE=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[qe],imports:[[vm,p.b]]}),t})();i.Oc(Su,[ZE,Ti.q,Ti.j,Ti.l,Ti.m,Ti.s],[Fs]),i.Oc(Ru,[ZE],[]),i.Oc(vu,[ZE,Ti.o,Ti.b,Ti.j,Ti.l],[Fs]),i.Oc(Ou,[ZE,Ti.b,Ti.j,Ti.l],[Fs]),i.Oc(Au,[ZE],[]),i.Oc(Mu,[ZE,Ti.b,Ti.j,Ti.l],[Fs]),i.Oc(Du,[ZE,Ti.b,Ti.j,Ti.l],[Fs]),i.Oc(Nu,[ZE,Ti.o,Ti.b,Ti.j,Ti.l],[Fs]),i.Oc(xu,[ZE],[]),i.Oc(Fu,[ZE],[]),i.Oc(Wu,[ZE,Ti.o,Ti.b,Ti.j,Ti.l],[Fs]),i.Oc(Gu,[ZE,Ti.a,Ti.j,Ti.l],[Fs]),i.Oc(Bu,[ZE],[]),i.Oc(Ku,[ZE,hn.b],[]),i.Oc(Yu,[ZE,hn.b],[]),i.Oc(Zu,[ZE,hn.b],[Fs]),i.Oc(ed,[ZE,Ti.o,Ti.b,Ti.j,Ti.l,p.n],[Fs]),i.Oc(id,[ZE,Ti.b,Ti.j,Ti.l,Ti.o],[Fs]),i.Oc(rd,[ZE],[]),i.Oc(od,[ZE],[]),i.Oc(_d,[ZE,Ti.b,Ti.j,Ti.l],[Fs]),i.Oc(ld,[ZE,Ti.b,Ti.j,Ti.l],[Fs]),i.Oc(dd,[ZE],[]),i.Oc(md,[ZE],[]),i.Oc(fd,[ZE],[]),i.Oc(Sd,[ZE,hn.b],[Fs]),i.Oc(Rd,[ZE],[]),i.Oc(vd,[ZE,hn.b],[]),i.Oc(Od,[ZE,hn.b],[]),i.Oc(Ad,[ZE,hn.b],[]),i.Oc(Ug,[QE],[]),i.Oc(Cg,[QE],[]),i.Oc(Yd,[QE],[]),i.Oc(Qd,[QE],[]),i.Oc(Kd,[QE],[]),i.Oc(Zd,[QE,Ti.b,Ti.j,Ti.l],[Fs]),i.Oc(xd,[QE,Ti.b,Ti.g,Ti.j,Ti.l,Ti.q,Ti.m,Ti.s],[Fs]),i.Oc(Nd,[QE,Ti.b,Ti.g,Ti.j,Ti.l,Ti.o],[Fs]),i.Oc(gg,[QE],[]),i.Oc(Tg,[QE],[]),i.Oc(ug,[QE,Ti.b,Ti.j,Ti.l],[Fs]),i.Oc(Bd,[QE,Ti.b,Ti.g,Ti.j,Ti.l],[Fs]),i.Oc(yg,[QE,Ti.a,Ti.j,Ti.l],[Fs]),i.Oc(Fd,[QE,Ti.b,Ti.g,Ti.j,Ti.l],[Fs]),i.Oc(bg,[QE,hn.b,Ti.b,Ti.j,Ti.l],[Fs]),i.Oc(Dd,[QE,Ti.b,Ti.g,Ti.j,Ti.l,qi],[Fs]),i.Oc(Wd,[QE,Ti.b,Ti.g,Ti.j,Ti.l,Ti.o],[Fs]),i.Oc(Gd,[QE,Ti.b,Ti.g,Ti.j,Ti.l,Ti.o],[Fs]),i.Oc(Eg,[QE,Ti.o,Ti.b,Ti.j,Ti.l],[Fs]),i.Oc(Ig,[QE,Ti.o,Ti.b,Ti.j,Ti.l],[Fs]),i.Oc(hg,[QE,Ti.q,Ti.j,Ti.l,Ti.m,Ti.s],[Fs]),i.Oc(cg,[QE,hn.b,Ti.q,Ti.j,Ti.l,Ti.m,Ti.s],[Fs]),i.Oc(ag,[QE,hn.b],[Fs]),i.Oc(pg,[QE,hn.b,Ti.o,Ti.b,Ti.j,Ti.l],[Fs]),i.Oc(ng,[QE,Ti.a,Ti.j,Ti.l,p.n,hn.b,Ti.q,Ti.m,Ti.s,Ti.b,Oi.b,p.m],[Fs]);let $E=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},imports:[[vm,Tm,Xm,Zm,Cp,of,cf,_f,Mf,WE,VE,GE,HE,BE,jE,JE,Mp]]}),t})(),tS=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[El,m]}),t})(),eS=(()=>{class t{}return t.\u0275mod=i.Wb({type:t,bootstrap:[Em]}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},imports:[[vm,tS,$E,n.a,r.a]]}),t})();Object(i.cb)(),n.c().bootstrapModule(eS).catch(t=>console.log(t))},zVPj:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._itemId=0,this._isExpired=!0,this._userId=0,this._delay=0,!0}parse(t){return!!t&&(this._itemId=parseInt(t.readString()),this._isExpired=t.readBoolean(),this._userId=t.readInt(),this._delay=t.readInt(),!0)}get itemId(){return this._itemId}get isExpired(){return this._isExpired}get userId(){return this._userId}get delay(){return this._delay}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},zWsf:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._roomId=0,!0}parse(t){return!!t&&(this._roomId=t.readInt(),!0)}get roomId(){return this._roomId}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},zeoL:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},zn8P:function(t,e){function s(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}s.keys=function(){return[]},s.resolve=s,t.exports=s,s.id="zn8P"}},[[0,0,4]]]);