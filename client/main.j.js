(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+/WI":function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("HqZk");class n{constructor(t,e,s,i,n,r){this._itemId=t,this._category=e,this._wallLocation=s,this._x=i,this._y=n,this._direction=r}getMessageArray(){switch(this._category){case i.a.FLOOR:return[`${this._itemId} ${this._x} ${this._y} ${this._direction}`];case i.a.WALL:return[`${this._itemId} ${this._wallLocation} `];default:return[]}}dispose(){}}},"+IGW":function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("3r1x");let n=(()=>{class t extends i.a{constructor(t,e,s){super(t),this._connection=e,this._originalEvent=event}get connection(){return this._connection}get originalEvent(){return this._originalEvent}}return t.CONNECTION_OPENED="SCE_OPEN",t.CONNECTION_CLOSED="SCE_CLOSED",t.CONNECTION_ERROR="SCE_ERROR",t.CONNECTION_MESSAGE="SCE_MESSAGE",t})()},"+IZ6":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("1+1A");class r{flush(){return this._owners=new Map,this._items=[],!0}parse(t){if(!t)return!1;if(!this.parseOwners(t))return!1;let e=t.readInt();for(;e>0;){const s=new n.a(t);if(!s)continue;const i=this._owners.get(s.userId);i&&(s.username=i),this._items.push(s),e--}return!0}parseOwners(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._owners.set(t.readInt(),t.readString()),e--;return!0}get owners(){return this._owners}get items(){return this._items}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"+LbQ":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._type=null,this._parameters=new Map,!0}parse(t){if(!t)return!1;this._type=t.readString();let e=t.readInt();for(;e>0;)this._parameters.set(t.readString(),t.readString()),e--;return!0}get type(){return this._type}get parameters(){return this._parameters}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"+LxV":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},"+ana":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},"+gkD":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},"+kDp":function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.USER=1,t.PET=2,t.BOT=3,t.RENTABLE_BOT=4,t})()},"+lr5":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"/3sV":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._webId=-1,this._id=-1,this._newName="",!0}parse(t){return!!t&&(this._webId=t.readInt(),this._id=t.readInt(),this._newName=t.readString(),!0)}get webId(){return this._webId}get id(){return this._id}get newName(){return this._newName}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"/52j":function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.NONE=0,t.HEART=1,t.SMILE=2,t.BOBBA=3,t.RELATIONSHIP_TYPES=[0,1,2,3],t.RELATIONSHIP_NAMES=["None","Heart","Smile","Bobba"],t})()},"/FfH":function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{constructor(t){this.reset(),this.parse(t)}reset(){this._allowMute=0,this._allowKick=0,this._allowBan=0}parse(t){this._allowMute=t.readInt(),this._allowKick=t.readInt(),this._allowBan=t.readInt()}get allowMute(){return this._allowMute}get allowKick(){return this._allowKick}get allowBan(){return this._allowBan}}return t._Str_10707=0,t._Str_5047=1,t._Str_11537=2,t})()},"/OJ4":function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{static _Str_22614(e){switch(e){case t._Str_9173:return"${trading.mode.free}";case t._Str_14475:return"${trading.mode.controller}";case t._Str_12752:return"${trading.mode.not.allowed}"}return""}}return t._Str_12752=0,t._Str_14475=1,t._Str_9173=2,t})()},"/PsI":function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{static getExpressionTimeout(t){switch(t=parseInt(t)){case 1:return 5e3;case 2:return 1400;case 3:case 4:return 2e3;case 5:return 0;case 6:return 700;case 7:return 2e3;case 8:case 9:case 10:return 1500;default:return 0}}static getExpressionId(e){return t.EXPRESSION_MAP.indexOf(e)}static getExpression(e){return e>t.EXPRESSION_MAP.length?null:t.EXPRESSION_MAP[e]}static getGestureId(e){return t.GESTURE_MAP.indexOf(e)}static getGesture(e){return e>t.GESTURE_MAP.length?null:t.GESTURE_MAP[e]}static idToAvatarActionState(t){return"Lay"===t?"lay":"Float"===t?"float":"Swim"===t?"swim":"Sit"===t?"sit":"Respect"===t?"respect":"Wave"===t?"wave":"Idle"===t?"idle":"Dance"===t?"dance":"UseItem"===t?"usei":"CarryItem"===t?"cri":"Talk"===t?"talk":"Sleep"===t?"Sleep":"Move"===t?"mv":"std"}}return t.CARRY_OBJECT="cri",t.DANCE="dance",t.EFFECT="fx",t.EXPRESSION="expression",t.EXPRESSION_BLOW_A_KISS="blow",t.EXPRESSION_CRY="cry",t.EXPRESSION_IDLE="idle",t.EXPRESSION_LAUGH="laugh",t.EXPRESSION_RESPECT="respect",t.EXPRESSION_RIDE_JUMP="ridejump",t.EXPRESSION_SNOWBOARD_OLLIE="sbollie",t.EXPRESSION_SNOWBORD_360="sb360",t.EXPRESSION_WAVE="wave",t.GESTURE="gest",t.GESTURE_AGGRAVATED="agr",t.GESTURE_SAD="sad",t.GESTURE_SMILE="sml",t.GESTURE_SURPRISED="srp",t.GUIDE_STATUS="guide",t.MUTED="muted",t.PET_GESTURE_BLINK="eyb",t.PET_GESTURE_CRAZY="crz",t.PET_GESTURE_JOY="joy",t.PET_GESTURE_MISERABLE="mis",t.PET_GESTURE_PUZZLED="puz",t.PET_GESTURE_TONGUE="tng",t.PLAYING_GAME="playing_game",t.POSTURE="posture",t.POSTURE_FLOAT="float",t.POSTURE_LAY="lay",t.POSTURE_SIT="sit",t.POSTURE_STAND="std",t.POSTURE_SWIM="swim",t.POSTURE_WALK="mv",t.SIGN="sign",t.SLEEP="sleep",t.SNOWWAR_DIE_BACK="swdieback",t.SNOWWAR_DIE_FRONT="swdiefront",t.SNOWWAR_PICK="swpick",t.SNOWWAR_RUN="swrun",t.SNOWWAR_THROW="swthrow",t.TALK="talk",t.BLINK="blink",t.TYPING="typing",t.USE_OBJECT="usei",t.VOTE="vote",t.GESTURE_MAP=["",t.GESTURE_SMILE,t.GESTURE_AGGRAVATED,t.GESTURE_SURPRISED,t.GESTURE_SAD,t.PET_GESTURE_JOY,t.PET_GESTURE_CRAZY,t.PET_GESTURE_TONGUE,t.PET_GESTURE_BLINK,t.PET_GESTURE_MISERABLE,t.PET_GESTURE_PUZZLED],t.EXPRESSION_MAP=["",t.EXPRESSION_WAVE,t.EXPRESSION_BLOW_A_KISS,t.EXPRESSION_LAUGH,t.EXPRESSION_CRY,t.EXPRESSION_IDLE,t.DANCE,t.EXPRESSION_RESPECT,t.EXPRESSION_SNOWBOARD_OLLIE,t.EXPRESSION_SNOWBORD_360,t.EXPRESSION_RIDE_JUMP],t})()},"/icx":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t){this._id=0,this._type=0,this._color=0,this._intensity=0,this._isParsed=!1,this._htmlColor=null,this._id=t}parsed(){this._isParsed=!0}get id(){return this._id}get type(){return this._type}set type(t){this._isParsed||(this._type=t)}get color(){return this._color}set color(t){this._isParsed||(this._color=t)}get intensity(){return this._intensity}set intensity(t){this._isParsed||(this._intensity=t)}set htmlColor(t){this._htmlColor=t}get htmlColor(){return this._htmlColor}}class r{constructor(){this._selectedPresetId=0,this._presets=[]}get _Str_10888(){return this._presets.length}get _Str_6226(){return this._selectedPresetId}_Str_14989(t){return t<0||t>=this._Str_10888?null:this._presets[t]}flush(){return this._presets=[],!0}parse(t){const e=t.readInt();this._selectedPresetId=t.readInt();let s=0;for(;s<e;){const e=t.readInt(),i=t.readInt(),r=t.readString(),a=parseInt(r.substr(1),16),o=t.readInt(),c=new n(e);c.type=i,c.color=a,c.intensity=o,c.parsed(),c.htmlColor=r,this._presets.push(c),s++}return!0}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"/niJ":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._parts=new Map,this.parseFigure(t)}_Str_1016(){return this.partSets().keys()}_Str_744(t){return null!==this.partSets().get(t)}getPartSetId(t){const e=this.partSets().get(t);return e?e.get("setid"):0}_Str_815(t){const e=this.partSets().get(t);return e?e.get("colorids"):null}_Str_830(t,e,s){const i=new Map;i.set("type",t),i.set("setid",e),i.set("colorids",s);const n=this.partSets();n.delete(t),n.set(t,i)}_Str_923(t){this.partSets().delete(t)}_Str_1008(){const t=[];for(const e of this.partSets().keys()){if(!e)continue;let s=[];s.push(e),s.push(this.getPartSetId(e)),s=s.concat(this._Str_815(e)),t.push(s.join("-"))}return t.join(".")}partSets(){return this._parts||(this._parts=new Map),this._parts}parseFigure(t){t||(t="");for(const e of t.split(".")){const t=e.split("-");if(t.length>=2){const e=t[0],s=parseInt(t[1]),i=[];let n=2;for(;n<t.length;)i.push(parseInt(t[n])),n++;this._Str_830(e,s,i)}}}}},0:function(t,e,s){t.exports=s("zUnb")},"0/8l":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{flush(){return this._count=0,!0}parse(t){return!!t&&(this._count=t.readInt(),!0)}get count(){return this._count}}},"00/2":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},"00EK":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._userName=null,!0}parse(t){return!!t&&(this._userName=t.readString(),!0)}get userName(){return this._userName}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}get userName(){return this.getParser().userName}}},"00eG":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._typeCode=-1,this._avatarId=0,this._message=null,!0}parse(t){return!!t&&(this._typeCode=t.readInt(),this._avatarId=t.readInt(),this._message=t.readString(),!0)}get typeCode(){return this._typeCode}get avatarId(){return this._avatarId}get message(){return this._message}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"01lY":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._itemId=0,!0}parse(t){return!!t&&(this._itemId=t.readInt(),!0)}get itemId(){return this._itemId}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"07Tz":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},"0BWK":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},"0DoP":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"0EkW":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},"0LNC":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._id=-1,this._Str_4460=[],!0}parse(t){if(!t)return!1;this._id=t.readInt(),this._name=t.readString(),this._level=t.readInt(),this._maximumLevel=t.readInt(),this._experience=t.readInt(),this._levelExperienceGoal=t.readInt(),this._energy=t.readInt(),this._maximumEnergy=t.readInt(),this._happyness=t.readInt(),this._maximumHappyness=t.readInt(),this._respect=t.readInt(),this._ownerId=t.readInt(),this._age=t.readInt(),this._ownerName=t.readString(),this._rarityLevel=t.readInt(),this._saddle=t.readBoolean(),this._rider=t.readBoolean();let e=t.readInt();for(;e>0;)this._Str_4460.push(t.readInt()),e--;return this._Str_4460.sort(),this._publiclyRideable=t.readInt(),this._breedable=t.readBoolean(),this._fullyGrown=t.readBoolean(),this._dead=t.readBoolean(),this._unknownRarity=t.readInt(),this._maximumTimeToLive=t.readInt(),this._remainingTimeToLive=t.readInt(),this._remainingGrowTime=t.readInt(),this._publiclyBreedable=t.readBoolean(),!0}get id(){return this._id}get name(){return this._name}get level(){return this._level}get maximumLevel(){return this._maximumLevel}get experience(){return this._experience}get energy(){return this._energy}get happyness(){return this._happyness}get levelExperienceGoal(){return this._levelExperienceGoal}get maximumEnergy(){return this._maximumEnergy}get maximumHappyness(){return this._maximumHappyness}get respect(){return this._respect}get ownerId(){return this._ownerId}get ownerName(){return this._ownerName}get age(){return this._age}get rarityLevel(){return this._rarityLevel}get saddle(){return this._saddle}get rider(){return this._rider}get breedable(){return this._breedable}get fullyGrown(){return this._fullyGrown}get dead(){return this._dead}get maximumTimeToLive(){return this._maximumTimeToLive}get remainingTimeToLive(){return this._remainingTimeToLive}get remainingGrowTime(){return this._remainingGrowTime}get _Str_3307(){return this._Str_4460}get publiclyRideable(){return this._publiclyRideable}get unknownRarity(){return this._unknownRarity}get publiclyBreedable(){return this._publiclyBreedable}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"0gOM":function(t,e,s){"use strict";s.d(e,"a",function(){return xa});var i=s("Fv14"),n=s("+IGW"),r=s("P7Cj"),a=s("vzKh"),o=s("5+UO");class c{flush(){return!0}parse(t){return!!t}}class h extends o.a{constructor(t){super(t,c)}getParser(){return this.parser}}class l{flush(){return!0}parse(t){return!!t}}class u extends o.a{constructor(t){super(t,l)}getParser(){return this.parser}}class _{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}let d=(()=>{class t{}return t.UNKNOWN=0,t.BROWSER=1,t})(),g=(()=>{class t{}return t.UNKNOWN=0,t.FLASH=1,t.HTML5=2,t})();class m{constructor(t,e,s,i){this._data=[r.a.RELEASE_VERSION,"HTML5",g.HTML5,d.BROWSER]}getMessageArray(){return this._data}dispose(){}}class p{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}class f{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}var E=s("z6mw");class S extends i.a{constructor(t){super(),this._communication=t,this._sso=null,this._handShaking=!1,this._didConnect=!1,this._pongInterval=null,this.onConnectionOpenedEvent=this.onConnectionOpenedEvent.bind(this),this.onConnectionClosedEvent=this.onConnectionClosedEvent.bind(this),this.onConnectionErrorEvent=this.onConnectionErrorEvent.bind(this),this.sendPong=this.sendPong.bind(this)}onInit(){const t=this._communication.connection;t&&(t.addEventListener(n.a.CONNECTION_OPENED,this.onConnectionOpenedEvent),t.addEventListener(n.a.CONNECTION_CLOSED,this.onConnectionClosedEvent),t.addEventListener(n.a.CONNECTION_ERROR,this.onConnectionErrorEvent)),this._communication.registerMessageEvent(new h(this.onClientPingEvent.bind(this))),this._communication.registerMessageEvent(new u(this.onAuthenticatedEvent.bind(this)))}onDispose(){const t=this._communication.connection;t&&(t.removeEventListener(n.a.CONNECTION_OPENED,this.onConnectionOpenedEvent),t.removeEventListener(n.a.CONNECTION_CLOSED,this.onConnectionClosedEvent),t.removeEventListener(n.a.CONNECTION_ERROR,this.onConnectionErrorEvent)),this._sso=null,this._handShaking=!1,this.stopPonging(),super.onDispose()}onConnectionOpenedEvent(t){const e=this._communication.connection;e&&(this._didConnect=!0,this.dispatchCommunicationDemoEvent(E.a.CONNECTION_ESTABLISHED,e),r.a.instance.getConfiguration("communication.pong.manually",!1)&&this.startPonging(),this.startHandshake(e),e.send(new m(null,null,null,null)),this.tryAuthentication(e))}onConnectionClosedEvent(t){const e=this._communication.connection;e&&(this.stopPonging(),this._didConnect&&this.dispatchCommunicationDemoEvent(E.a.CONNECTION_CLOSED,e))}onConnectionErrorEvent(t){const e=this._communication.connection;e&&(this.stopPonging(),this.dispatchCommunicationDemoEvent(E.a.CONNECTION_ERROR,e))}tryAuthentication(t){if(!t||!this._sso)return this._sso||a.a.log("Login without an SSO ticket is not supported"),void this.dispatchCommunicationDemoEvent(E.a.CONNECTION_HANDSHAKE_FAILED,t);t.send(new f(this._sso,r.a.instance.time))}onClientPingEvent(t){t&&t.connection&&this.sendPong(t.connection)}onAuthenticatedEvent(t){t&&t.connection&&(this.completeHandshake(t.connection),this.dispatchCommunicationDemoEvent(E.a.CONNECTION_AUTHENTICATED,t.connection),t.connection.send(new p))}setSSO(t){t&&""!==t&&!this._sso&&(this._sso=t)}startHandshake(t){this.dispatchCommunicationDemoEvent(E.a.CONNECTION_HANDSHAKING,t),this._handShaking=!0}completeHandshake(t){this.dispatchCommunicationDemoEvent(E.a.CONNECTION_HANDSHAKED,t),this._handShaking=!1}startPonging(){this.stopPonging(),this._pongInterval=setInterval(this.sendPong,r.a.instance.getConfiguration("communication.pong.interval.ms",2e4))}stopPonging(){this._pongInterval&&(clearInterval(this._pongInterval),this._pongInterval=null)}sendPong(t=null){(t=t||this._communication.connection||null)&&t.send(new _)}dispatchCommunicationDemoEvent(t,e){r.a.instance.events.dispatchEvent(new E.a(t,e))}}var v=s("3xex"),b=s("S+Gq"),I=s("9NDz"),R=s("asXX"),T=s("Byou"),O=s("wGhc"),y=s("x7td"),C=s("qLWH"),A=s("SS1c"),M=s("t0/d"),w=s("sxwv"),D=s("u5n9"),N=s("Zq74"),U=s("ReTp"),x=s("j7DG"),L=s("U4HJ"),P=s("Ftck"),F=s("liWC"),k=s("q4z0"),V=s("dwRb"),B=s("Pox2"),W=s("kZQz"),K=s("WM79"),G=s("YN1x"),H=s("00eG"),j=s("t1CI"),z=s("G3dz"),Y=s("gOUc"),q=s("81IQ"),Z=s("X26Z"),X=s("P0eX"),Q=s("i/ye"),J=s("wW/F"),$=s("YaSm"),tt=s("I5LT"),et=s("qQgg"),st=s("UTIc"),it=s("e9/N"),nt=s("Zm+c"),rt=s("bR4k"),at=s("IqqQ"),ot=s("D5bJ"),ct=s("HujO"),ht=s("7sb4");let lt=(()=>{class t{}return t.ACHIEVEMENT_LIST=305,t.AUTHENTICATED=2491,t.AVAILABILITY_STATUS=2033,t.BUILDERS_CLUB_EXPIRED=1452,t.CAMERA_PRICE=3878,t.CAMERA_THUMBNAIL_SAVED=3595,t.CAMERA_URL=3696,t.CATALOG_CLUB=2405,t.CATALOG_MODE=3828,t.CATALOG_PAGE=804,t.CATALOG_PAGES=1032,t.CATALOG_PURCHASE=869,t.CATALOG_PURCHASE_FAILED=1404,t.CATALOG_PURCHASE_UNAVAILABLE=3770,t.CATALOG_SEARCH=3388,t.CATALOG_SOLD_OUT=377,t.CATALOG_UPDATED=1866,t.CFH_RESULT_MESSAGE=934,t.CLIENT_LATENCY=10,t.CLIENT_PING=3928,t.DESKTOP_CAMPAIGN=1745,t.DESKTOP_NEWS=286,t.DESKTOP_VIEW=122,t.DISCOUNT_CONFIG=2347,t.FIRST_LOGIN_OF_DAY=793,t.FURNITURE_ALIASES=1723,t.FURNITURE_DATA=2547,t.FURNITURE_FLOOR=1778,t.FURNITURE_FLOOR_ADD=1534,t.FURNITURE_FLOOR_REMOVE=2703,t.FURNITURE_FLOOR_UPDATE=3776,t.FURNITURE_ITEMDATA=2202,t.FURNITURE_STATE=2376,t.GAME_CENTER_ACHIEVEMENTS=2265,t.GAME_CENTER_GAME_LIST=222,t.GAME_CENTER_STATUS=2893,t.GENERIC_ALERT=3801,t.GENERIC_ALERT_LINK=2030,t.GENERIC_ERROR=1600,t.GIFT_CONFIG=2234,t.GROUP_BADGES=2402,t.GROUP_CREATE_OPTIONS=2159,t.GROUP_FORUM_INFO=3011,t.GROUP_FORUM_LIST=3001,t.GROUP_FORUM_THREADS=1073,t.GROUP_INFO=1702,t.GROUP_LIST=420,t.GROUP_MEMBER=265,t.GROUP_MEMBERS=1200,t.GROUP_MEMBERS_REFRESH=2445,t.GROUP_MEMBER_REMOVE_CONFIRM=1876,t.GROUP_SETTINGS=3965,t.GROUP_BADGE_PARTS=2238,t.ITEM_DIMMER_SETTINGS=2710,t.ITEM_STACK_HELPER=2816,t.ITEM_WALL=1369,t.ITEM_WALL_ADD=2187,t.ITEM_WALL_REMOVE=3208,t.ITEM_WALL_UPDATE=2009,t.LOAD_GAME_URL=2624,t.MARKETPLACE_CONFIG=1823,t.MESSENGER_ACCEPT_FRIENDS=896,t.MESSENGER_CHAT=1587,t.MESSENGER_FIND_FRIENDS=1210,t.MESSENGER_FOLLOW_FAILED=3048,t.MESSENGER_FRIEND_NOTIFICATION=3082,t.MESSENGER_FRIENDS=3130,t.MESSENGER_INIT=1605,t.MESSENGER_INSTANCE_MESSAGE_ERROR=3359,t.MESSENGER_INVITE=3870,t.MESSENGER_INVITE_ERROR=462,t.MESSENGER_MESSAGE_ERROR=892,t.MESSENGER_MINIMAIL_COUNT=2803,t.MESSENGER_MINIMAIL_NEW=1911,t.MESSENGER_RELATIONSHIPS=2016,t.MESSENGER_REQUEST=2219,t.MESSENGER_REQUEST_ERROR=892,t.MESSENGER_REQUESTS=280,t.MESSENGER_ROOM_INVITE=3870,t.MESSENGER_SEARCH=973,t.MESSENGER_UPDATE=2800,t.MODERATION_REPORT_DISABLED=1651,t.MODERATION_TOOL=2696,t.MODERATION_TOPICS=325,t.MODERATION_USER_INFO=2866,t.MOTD_MESSAGES=2035,t.NAVIGATOR_CATEGORIES=1562,t.NAVIGATOR_COLLAPSED=1543,t.NAVIGATOR_EVENT_CATEGORIES=3244,t.NAVIGATOR_LIFTED=3104,t.NAVIGATOR_METADATA=3052,t.NAVIGATOR_OPEN_ROOM_CREATOR=2064,t.NAVIGATOR_SEARCH=2690,t.NAVIGATOR_SEARCHES=3984,t.NAVIGATOR_SETTINGS=518,t.NOTIFICATION_LIST=1992,t.PET_FIGURE_UPDATE=1924,t.PET_INFO=2901,t.RECYCLER_PRIZES=3164,t.ROOM_BAN_LIST=1869,t.ROOM_BAN_REMOVE=3429,t.ROOM_CREATED=1304,t.ROOM_DOORBELL=2309,t.ROOM_DOORBELL_ACCEPTED=3783,t.ROOM_DOORBELL_REJECTED=878,t.ROOM_ENTER=758,t.ROOM_ENTER_ERROR=899,t.ROOM_FORWARD=160,t.ROOM_HEIGHT_MAP=2753,t.ROOM_HEIGHT_MAP_UPDATE=558,t.ROOM_INFO=687,t.ROOM_INFO_OWNER=749,t.ROOM_MODEL=1301,t.ROOM_MODEL_BLOCKED_TILES=3990,t.ROOM_MODEL_DOOR=1664,t.ROOM_MODEL_NAME=2031,t.ROOM_MUTED=2533,t.ROOM_MUTE_USER=826,t.ROOM_PAINT=2454,t.ROOM_PROMOTION=2274,t.ROOM_QUEUE_STATUS=2208,t.ROOM_RIGHTS=780,t.ROOM_RIGHTS_CLEAR=2392,t.ROOM_RIGHTS_LIST=1284,t.ROOM_RIGHTS_LIST_ADD=2088,t.ROOM_RIGHTS_LIST_REMOVE=1327,t.ROOM_RIGHTS_OWNER=339,t.ROOM_ROLLING=3207,t.ROOM_SCORE=482,t.ROOM_SETTINGS=1498,t.ROOM_SETTINGS_CHAT=1191,t.ROOM_SETTINGS_SAVE=948,t.ROOM_SETTINGS_SAVE_ERROR=1555,t.ROOM_SETTINGS_UPDATED=3297,t.ROOM_SPECTATOR=1033,t.ROOM_THICKNESS=3547,t.SECURITY_DEBUG=3284,t.SECURITY_MACHINE=1488,t.SECURITY_UNKNOWN2=2833,t.TRADE_ACCEPTED=2568,t.TRADE_CLOSED=1373,t.TRADE_COMPLETED=1001,t.TRADE_CONFIRMATION=2720,t.TRADE_LIST_ITEM=2024,t.TRADE_NOT_OPEN=3128,t.TRADE_OPEN=2505,t.TRADE_OPEN_FAILED=217,t.TRADE_OTHER_NOT_ALLOWED=2154,t.TRADE_YOU_NOT_ALLOWED=3058,t.UNIT=374,t.UNIT_CHANGE_NAME=2182,t.UNIT_CHAT=1446,t.UNIT_CHAT_SHOUT=1036,t.UNIT_CHAT_WHISPER=2704,t.UNIT_DANCE=2233,t.UNIT_EFFECT=1167,t.UNIT_EXPRESSION=1631,t.UNIT_HAND_ITEM=1474,t.UNIT_IDLE=1797,t.UNIT_INFO=3920,t.UNIT_NUMBER=2324,t.UNIT_REMOVE=2661,t.UNIT_STATUS=1640,t.UNIT_TYPING=1717,t.UNSEEN_ITEMS=2103,t.USER_ACHIEVEMENT_SCORE=1968,t.USER_BADGES=717,t.USER_BADGES_ADD=2493,t.USER_BADGES_CURRENT=1087,t.USER_BOT_ADD=1352,t.USER_BOT_REMOVE=233,t.USER_BOTS=3086,t.USER_CHANGE_NAME=118,t.USER_CLOTHING=1450,t.USER_CREDITS=3475,t.USER_CURRENCY=2018,t.USER_CURRENCY_UPDATE=2275,t.USER_EFFECTS=340,t.USER_FAVORITE_ROOM=2524,t.USER_FAVORITE_ROOM_COUNT=151,t.USER_FIGURE=2429,t.USER_FURNITURE=994,t.USER_FURNITURE_ADD=104,t.USER_FURNITURE_POSTIT_PLACED=1501,t.USER_FURNITURE_REFRESH=3151,t.USER_FURNITURE_REMOVE=159,t.USER_HOME_ROOM=2875,t.USER_IGNORED=126,t.USER_IGNORED_RESULT=207,t.USER_INFO=2725,t.USER_OUTFITS=3315,t.USER_PERKS=2586,t.USER_PERMISSIONS=411,t.USER_PET_ADD=2101,t.USER_PET_REMOVE=3253,t.USER_PETS=3522,t.USER_PROFILE=3898,t.USER_RESPECT=2815,t.USER_SANCTION_STATUS=3679,t.USER_SETTINGS=513,t.USER_SUBSCRIPTION=954,t.USER_WARDROBE_PAGE=3315,t.WIRED_ACTION=1434,t.WIRED_CONDITION=1108,t.WIRED_ERROR=156,t.WIRED_OPEN=1830,t.WIRED_REWARD=178,t.WIRED_SAVE=1155,t.WIRED_TRIGGER=383,t.PLAYING_GAME=448,t.FURNITURE_STATE_2=3431,t.REMOVE_BOT_FROM_INVENTORY=233,t.ADD_BOT_TO_INVENTORY=1352,t.ACHIEVEMENT_PROGRESSED=2107,t.MODTOOL_ROOM_INFO=1333,t.MODTOOL_USER_CHATLOG=3377,t.MODTOOL_ROOM_CHATLOG=3434,t.LOVELOCK_FURNI_START=3753,t.LOVELOCK_FURNI_FRIEND_COMFIRMED=382,t.LOVELOCK_FURNI_FINISHED=770,t.GIFT_RECEIVER_NOT_FOUND=1517,t.GIFT_OPENED=56,t.HOTEL_WILL_SHUTDOWN=1050,t.FLOOD_CONTROL=566,t.REMAINING_MUTE=826,t.USER_EFFECT_LIST=340,t.USER_EFFECT_LIST_ADD=2867,t.USER_EFFECT_LIST_REMOVE=2228,t.USER_EFFECT_ACTIVATE=1959,t.CATALOG_CLUB_GIFTS=619,t.REDEEM_VOUCHER_ERROR=714,t.REDEEM_VOUCHER_OK=3336,t.MODTOOL_VISITED_ROOMS_USER=1752,t.IN_CLIENT_LINK=2023,t.BOT_COMMAND_CONFIGURATION=1618,t.HAND_ITEM_RECEIVED=354,t.PET_PLACING_ERROR=2913,t.BOT_ERROR=639,t})();var ut=s("tVIE"),_t=s("a9Mt"),dt=s("qZ7S");class gt{flush(){return this._type=0,this._duration=0,this._isPermanent=!1,!0}parse(t){return!!t&&(this._type=t.readInt(),this._duration=t.readInt(),this._isPermanent=t.readBoolean(),!0)}get type(){return this._type}get duration(){return this._duration}get isPermanent(){return this._isPermanent}}class mt extends o.a{constructor(t){super(t,gt)}getParser(){return this.parser}}class pt{flush(){return this._type=0,this._subType=0,this._duration=0,this._permanent=!1,!0}parse(t){return!!t&&(this._type=t.readInt(),this._subType=t.readInt(),this._duration=t.readInt(),this._permanent=t.readBoolean(),!0)}get type(){return this._type}get _Str_3882(){return this._subType}get duration(){return this._duration}get _Str_4010(){return this._permanent}}class ft extends o.a{constructor(t){super(t,pt)}getParser(){return this.parser}}class Et{flush(){return this._type=0,!0}parse(t){return!!t&&(this._type=t.readInt(),!0)}get type(){return this._type}}class St extends o.a{constructor(t){super(t,Et)}getParser(){return this.parser}}class vt{get type(){return this._type}set type(t){this._type=t}get _Str_3882(){return this._subType}set _Str_3882(t){this._subType=t}get duration(){return this._duration}set duration(t){this._duration=t}get _Str_18572(){return this._inactiveEffectsInInventory}set _Str_18572(t){this._inactiveEffectsInInventory=t}get _Str_12185(){return this._secondsLeftIfActive}set _Str_12185(t){this._secondsLeftIfActive=t}get _Str_4010(){return this._permanent}set _Str_4010(t){this._permanent=t}}class bt{flush(){return this._effects=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;){const s=new vt;s.type=t.readInt(),s._Str_3882=t.readInt(),s.duration=t.readInt(),s._Str_18572=t.readInt(),s._Str_12185=t.readInt(),s._Str_4010=t.readBoolean(),this._effects.push(s),e--}return!0}get effects(){return this._effects}}class It extends o.a{constructor(t){super(t,bt)}getParser(){return this.parser}}var Rt=s("BIDA"),Tt=s("qexY"),Ot=s("feea"),yt=s("01lY"),Ct=s("1mUs"),At=s("5RE+"),Mt=s("ulbO"),wt=s("9loD"),Dt=s("5Cat"),Nt=s("Bbk2"),Ut=s("kgJd"),xt=s("GBA0"),Lt=s("746L"),Pt=s("9Nxx"),Ft=s("IVZI"),kt=s("4hT9"),Vt=s("4gvq"),Bt=s("uHXo"),Wt=s("8qmW"),Kt=s("iv6j"),Gt=s("8KaG"),Ht=s("lN2i"),jt=s("lrbo"),zt=s("sM2B"),Yt=s("i+XF"),qt=s("SRjU"),Zt=s("Fq7D"),Xt=s("1GrJ"),Qt=s("iGiK"),Jt=s("w2uK"),$t=s("e2zs"),te=s("owLk"),ee=s("oHxB"),se=s("JDjE"),ie=s("5BHI"),ne=s("443f"),re=s("JCII"),ae=s("vx5b"),oe=s("6vif"),ce=s("xycO"),he=s("c7QS"),le=s("V1nr"),ue=s("AKqU"),_e=s("QjCb"),de=s("KJ3T"),ge=s("4NUc"),me=s("+LbQ"),pe=s("lDeN"),fe=s("QXLr"),Ee=s("pRZV"),Se=s("pDhE"),ve=s("00EK"),be=s("8lyR"),Ie=s("HkHk"),Re=s("Cyol"),Te=s("EAxq"),Oe=s("KsdP"),ye=s("AFd5"),Ce=s("qKi6"),Ae=s("pIFH"),Me=s("6etz"),we=s("fFOI");class De{flush(){return this._chat=null,!0}parse(t){return!!t&&(this._chat=new we.a(t),!0)}get chat(){return this._chat}}class Ne extends o.a{constructor(t){super(t,De)}getParser(){return this.parser}}var Ue=s("10wl"),xe=s("8lyl"),Le=s("zRn8");class Pe{flush(){return this._roomId=0,this._code=0,this._message=null,!0}parse(t){return!!t&&(this._roomId=t.readInt(),this._code=t.readInt(),this._message=t.readString(),!0)}get roomId(){return this._roomId}get code(){return this._code}get message(){return this._message}}class Fe extends o.a{constructor(t){super(t,Pe)}getParser(){return this.parser}}var ke=s("yqT3");class Ve{flush(){return this._roomId=0,!0}parse(t){return!!t&&(this._roomId=t.readInt(),!0)}get roomId(){return this._roomId}}class Be extends o.a{constructor(t){super(t,Ve)}getParser(){return this.parser}}var We=s("zWsf"),Ke=s("GlfS"),Ge=s("yydM"),He=s("S5/W"),je=s("JODW"),ze=s("sR+E"),Ye=s("zVPj"),qe=s("Wzp3"),Ze=s("Ie/D"),Xe=s("Nakt"),Qe=s("Wamt"),Je=s("uaI9"),$e=s("ArMw"),ts=s("ObWd"),es=s("10Jd"),ss=s("ipbj"),is=s("BTXg"),ns=s("/icx"),rs=s("QZfg"),as=s("+IZ6"),os=s("Xe8L"),cs=s("Njml"),hs=s("v66B"),ls=s("mQ1q"),us=s("ebaN"),_s=s("Prlr"),ds=s("bmMM"),gs=s("zTkZ"),ms=s("lbEV"),ps=s("CzV9"),fs=s("f1eJ"),Es=s("0LNC"),Ss=s("1QEa"),vs=s("HY2+"),bs=s("bXGL"),Is=s("sRv6"),Rs=s("xq+5"),Ts=s("jFxZ"),Os=s("sCRD"),ys=s("mGgu"),Cs=s("BVCN"),As=s("fVO9"),Ms=s("Yx/o"),ws=s("D/zE"),Ds=s("HPzH"),Ns=s("KjXG"),Us=s("jzpY"),xs=s("NpwP"),Ls=s("n7CB"),Ps=s("jdh6");class Fs{flush(){return!0}parse(t){return!!t&&(this._isMuted=t.readBoolean(),!0)}get isMuted(){return this._isMuted}}class ks extends o.a{constructor(t){super(t,Fs)}getParser(){return this.parser}}var Vs=s("m7hj"),Bs=s("WEUE"),Ws=s("9Jti"),Ks=s("XNkd"),Gs=s("Ahnc"),Hs=s("nQsh"),js=s("29Gn");class zs{flush(){return!0}parse(t){return!!t}}class Ys extends o.a{constructor(t){super(t,zs)}getParser(){return this.parser}}var qs=s("8Dbs"),Zs=s("xB90"),Xs=s("3md2"),Qs=s("uMJ2"),Js=s("/3sV"),$s=s("Tp0E"),ti=s("9/2a"),ei=s("uHVT"),si=s("Eb1Y"),ii=s("O/2Q"),ni=s("cu+P"),ri=s("2y6h"),ai=s("IRIx"),oi=s("DpKJ"),ci=s("oKt9"),hi=s("GJWb"),li=s("UufK"),ui=s("rQEl"),_i=s("BG3s"),di=s("2H63"),gi=s("8ZkN"),mi=s("Z50b"),pi=s("+gkD"),fi=s("yt9a"),Ei=s("3CL9"),Si=s("BgaL"),vi=s("qOv/"),bi=s("pjvS"),Ii=s("NjFb"),Ri=s("6RUH"),Ti=s("SzgH"),Oi=s("OLXM");class yi{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}var Ci=s("Fcb+");class Ai{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}var Mi=s("YQyq");class wi{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}var Di=s("eXwK"),Ni=s("4k6Q"),Ui=s("tLSS"),xi=s("jNJ0");class Li{constructor(t,...e){this._data=[t,e.length,...e]}getMessageArray(){return this._data}dispose(){}}var Pi=s("FV0X");class Fi{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}var ki=s("mEdh"),Vi=s("xwkN"),Bi=s("eJ6k"),Wi=s("fsQ+"),Ki=s("8PZm"),Gi=s("ZHGj"),Hi=s("LSEE"),ji=s("gEiT"),zi=s("16el"),Yi=s("KQVX"),qi=s("GBmB"),Zi=s("00/2"),Xi=s("xAfD"),Qi=s("o4d6"),Ji=s("btSX"),$i=s("C1pE"),tn=s("w+79"),en=s("NLfn"),sn=s("0BWK"),nn=s("LWqD"),rn=s("WjEe");class an{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}var on=s("J0cl"),cn=s("TQha"),hn=s("sGp+"),ln=s("07Tz"),un=s("oe6/"),_n=s("0EkW"),dn=s("Q612"),gn=s("porQ"),mn=s("gnch"),pn=s("zeoL"),fn=s("r7iz"),En=s("SylX"),Sn=s("aBXB"),vn=s("H/4j"),bn=s("B62z"),In=s("LRPw"),Rn=s("Y1Bc"),Tn=s("q5XJ"),On=s("AYkW"),yn=s("vd+k"),Cn=s("SbyL"),An=s("DicI"),Mn=s("EEQp"),wn=s("KAV2"),Dn=s("vA8V"),Nn=s("V5Lx");class Un{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}var xn=s("S8Tn");class Ln{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}var Pn=s("UdUS");class Fn{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}class kn{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}var Vn=s("lulp");class Bn{constructor(t,e,s,i,n,r){this._data=[t,e,s,i,n,r]}getMessageArray(){return this._data}dispose(){}}let Wn=(()=>{class t{}return t.ACHIEVEMENT_LIST=219,t.BOT_CONFIGURATION=1986,t.BOT_PICKUP=3323,t.BOT_PLACE=1592,t.BOT_SKILL_SAVE=2624,t.CAMERA_PRICE=796,t.CAMERA_SAVE=3226,t.CAMERA_THUMBNAIL=1982,t.CATALOG_CLUB=3285,t.CATALOG_CLUB_GIFTS=487,t.CATALOG_MODE=1195,t.CATALOG_PAGE=412,t.CATALOG_PURCHASE=3492,t.CATALOG_PURCHASE_GIFT=1411,t.CATALOG_SEARCH=2594,t.CLIENT_LATENCY=295,t.CLIENT_LATENCY_MEASURE=96,t.CLIENT_POLICY=26979,t.CLIENT_PONG=2596,t.CLIENT_TOOLBAR_TOGGLE=2313,t.CLIENT_VARIABLES=1053,t.DESKTOP_CAMPAIGNS=2912,t.DESKTOP_NEWS=1827,t.DESKTOP_VIEW=105,t.DISCOUNT_CONFIG=223,t.EVENT_TRACKER=3457,t.FIND_FRIENDS=516,t.FURNITURE_ALIASES=3898,t.FURNITURE_FLOOR_UPDATE=248,t.FURNITURE_MULTISTATE=99,t.FURNITURE_PICKUP=3456,t.FURNITURE_PLACE=1258,t.FURNITURE_POSTIT_PLACE=2248,t.FURNITURE_RANDOMSTATE=3617,t.FURNITURE_WALL_MULTISTATE=210,t.FURNITURE_WALL_UPDATE=168,t.GAMES_INIT=2914,t.GAMES_LIST=741,t.GIFT_CONFIG=418,t.GROUP_ADMIN_ADD=2894,t.GROUP_ADMIN_REMOVE=722,t.GROUP_CREATE_OPTIONS=798,t.GROUP_FORUM_INFO=3149,t.GROUP_FORUM_LIST=873,t.GROUP_FORUM_THREADS=436,t.GROUP_INFO=2991,t.GROUP_DELETE=1134,t.GROUP_MEMBER_REMOVE_CONFIRM=3593,t.GROUP_MEMBER_REMOVE=593,t.GROUP_MEMBERS=312,t.GROUP_MEMBERSHIPS=367,t.GROUP_REQUEST=998,t.GROUP_REQUEST_ACCEPT=3386,t.GROUP_REQUEST_DECLINE=1894,t.GROUP_SETTINGS=1004,t.GROUP_PARTS=813,t.GROUP_BUY=230,t.GROUP_SAVE_INFORMATION=3137,t.GROUP_SAVE_BADGE=1991,t.GROUP_SAVE_COLORS=1764,t.GROUP_SAVE_PREFERENCES=3435,t.INVENTORY_UNKNOWN=1371,t.ITEM_CLOTHING_REDEEM=3374,t.ITEM_COLOR_WHEEL_CLICK=2144,t.ITEM_DICE_CLICK=1990,t.ITEM_DICE_CLOSE=1533,t.ITEM_DIMMER_SAVE=1648,t.ITEM_DIMMER_SETTINGS=2813,t.ITEM_DIMMER_TOGGLE=2296,t.ITEM_EXCHANGE_REDEEM=3115,t.ITEM_PAINT=711,t.ITEM_SAVE_BACKGROUND=3608,t.ITEM_STACK_HELPER=3839,t.ITEM_WALL_CLICK=210,t.ITEM_WALL_UPDATE=168,t.MARKETPLACE_CONFIG=2597,t.MESSENGER_ACCEPT=137,t.MESSENGER_CHAT=3567,t.MESSENGER_DECLINE=2890,t.MESSENGER_FOLLOW=3997,t.MESSENGER_FRIENDS=1523,t.MESSENGER_INIT=2781,t.MESSENGER_RELATIONSHIPS=2138,t.MESSENGER_RELATIONSHIPS_UPDATE=3768,t.MESSENGER_REMOVE=1689,t.MESSENGER_REQUEST=3157,t.MESSENGER_REQUESTS=2448,t.MESSENGER_ROOM_INVITE=1276,t.MESSENGER_SEARCH=1210,t.MESSENGER_UPDATES=1419,t.MOD_TOOL_USER_INFO=3295,t.NAVIGATOR_CATEGORIES=3027,t.NAVIGATOR_INIT=2110,t.NAVIGATOR_SEARCH=249,t.NAVIGATOR_SEARCH_CLOSE=1834,t.NAVIGATOR_SEARCH_OPEN=637,t.NAVIGATOR_SEARCH_SAVE=2226,t.NAVIGATOR_SETTINGS=1782,t.NAVIGATOR_SETTINGS_SAVE=3159,t.NAVIGATOR_CATEGORY_LIST_MODE=1202,t.PET_INFO=2934,t.PET_PICKUP=1581,t.PET_PLACE=2647,t.PET_RESPECT=3202,t.PET_RIDE=1036,t.PET_MOVE=3449,t.RECYCLER_PRIZES=398,t.RELEASE_VERSION=4e3,t.REPORT=1691,t.ROOM_AMBASSADOR_ALERT=2996,t.ROOM_BAN_GIVE=1477,t.ROOM_BAN_LIST=2267,t.ROOM_BAN_REMOVE=992,t.ROOM_CREATE=2752,t.ROOM_DELETE=532,t.ROOM_DOORBELL=1644,t.ROOM_ENTER=2312,t.ROOM_FAVORITE=3817,t.ROOM_FAVORITE_REMOVE=309,t.ROOM_INFO=2230,t.ROOM_KICK=1320,t.ROOM_LIKE=3582,t.ROOM_MODEL=2300,t.ROOM_MODEL_BLOCKED_TILES=1687,t.ROOM_MODEL_DOOR=3559,t.ROOM_MODEL_SAVE=875,t.ROOM_MUTE=3637,t.ROOM_MUTE_USER=3485,t.ROOM_RIGHTS_GIVE=808,t.ROOM_RIGHTS_LIST=3385,t.ROOM_RIGHTS_REMOVE=2064,t.ROOM_RIGHTS_REMOVE_ALL=2683,t.ROOM_RIGHTS_REMOVE_OWN=3182,t.ROOM_SETTINGS=3129,t.ROOM_SETTINGS_SAVE=1969,t.ROOM_STAFF_PICK=1918,t.SECURITY_MACHINE=2490,t.SECURITY_TICKET=2419,t.TRADE=1481,t.TRADE_ACCEPT=3863,t.TRADE_CANCEL=2341,t.TRADE_CLOSE=2551,t.TRADE_CONFIRM=2760,t.TRADE_ITEM=3107,t.TRADE_ITEM_REMOVE=3845,t.TRADE_ITEMS=1263,t.TRADE_UNACCEPT=1444,t.UNIT_ACTION=2456,t.UNIT_CHAT=1314,t.UNIT_CHAT_SHOUT=2085,t.UNIT_CHAT_WHISPER=1543,t.UNIT_DANCE=2080,t.UNIT_DROP_HAND_ITEM=2814,t.UNIT_GIVE_HANDITEM=2941,t.UNIT_LOOK=3301,t.UNIT_POSTURE=2235,t.UNIT_SIGN=1975,t.UNIT_TYPING=1597,t.UNIT_TYPING_STOP=1474,t.UNIT_WALK=3320,t.USER_BADGES=2769,t.USER_BADGES_CURRENT=2091,t.USER_BADGES_CURRENT_UPDATE=644,t.USER_BOTS=3848,t.USER_CURRENCY=273,t.USER_EFFECT_ACTIVATE=2959,t.USER_EFFECT_ENABLE=1752,t.USER_FIGURE=2730,t.USER_FURNITURE=3150,t.USER_FURNITURE2=3500,t.USER_HOME_ROOM=1740,t.USER_INFO=357,t.USER_MOTTO=2228,t.USER_IGNORED=3878,t.USER_OUTFIT_SAVE=800,t.USER_OUTFITS=2742,t.USER_PETS=3095,t.USER_PROFILE=3265,t.USER_RESPECT=2694,t.USER_SETTINGS=2388,t.USER_SETTINGS_CAMERA=1461,t.USER_SETTINGS_CHAT_STYLE=1030,t.USER_SETTINGS_INVITES=1086,t.USER_SETTINGS_OLD_CHAT=1262,t.USER_SETTINGS_VOLUME=1367,t.USER_SUBSCRIPTION=3166,t.USER_WARDROBE_PAGE=2742,t.USER_WARDROBE_SAVE=800,t.USER_TAGS=17,t.USER_VISIT=2970,t.WIRED_ACTION_SAVE=2281,t.WIRED_APPLY_SNAPSHOT=3373,t.WIRED_CONDITION_SAVE=3203,t.WIRED_OPEN=768,t.WIRED_TRIGGER_SAVE=1520,t.GET_ITEM_DATA=3964,t.ONE_WAY_DOOR_CLICK=2765,t.REMOVE_WALL_ITEM=3336,t.MODIFY_WALL_ITEM_DATA=3666,t.CATALOG_REDEEM_VOUCHER=339,t.ROOM_TONER_APPLY=2880,t.LOVELOCK_START_CONFIRM=3775,t.MANNEQUIN_SAVE_NAME=2850,t.MANNEQUIN_SAVE_LOOK=2209,t.PRESENT_OPEN_PRESENT=3558,t.CATALOG_SELECT_VIP_GIFT=2276,t.USER_IGNORE_ID=3314,t.USER_IGNORE=1117,t.USER_UNIGNORE=2061,t.MODTOOL_REQUEST_ROOM_INFO=707,t.MODTOOL_CHANGE_ROOM_SETTINGS=3260,t.MODTOOL_REQUEST_USER_CHATLOG=1391,t.MODTOOL_REQUEST_ROOM_CHATLOG=2587,t.MODTOOL_SANCTION_ALERT=229,t.MODTOOL_SANCTION_BAN=2766,t.MODTOOL_SANCTION_KICK=2582,t.MODTOOL_SANCTION_TRADELOCK=3742,t.MODTOOL_ALERTEVENT=1840,t.MODTOOL_SANCTION_MUTE=1945,t.MODTOOL_REQUEST_USER_ROOMS=3526,t.MODTOOL_ROOM_ALERT=3842,t.CONVERT_GLOBAL_ROOM_ID=314,t})();var Kn=s("itFj"),Gn=s("CsHF"),Hn=s("tfDB"),jn=s("5TOT"),zn=s("LKhd"),Yn=s("j8oG"),qn=s("nlEz"),Zn=s("QZVO"),Xn=s("4hNi"),Qn=s("kRfe"),Jn=s("J4cl"),$n=s("GFvZ"),tr=s("0qJb"),er=s("mHKk"),sr=s("lsmK"),ir=s("Mixc"),nr=s("9RxG"),rr=s("YTIQ"),ar=s("h5lc"),or=s("Oh4I"),cr=s("SULm"),hr=s("V2Y4"),lr=s("YQxP"),ur=s("h2l6"),_r=s("+ana"),dr=s("toFP"),gr=s("+LxV"),mr=s("Poml"),pr=s("7d3m"),fr=s("X+hw"),Er=s("p0wa"),Sr=s("2Rep"),vr=s("YlMy"),br=s("Sb1T"),Ir=s("4Yln"),Rr=s("jgc/"),Tr=s("+/WI"),Or=s("bmkm"),yr=s("PSU1"),Cr=s("PJYa"),Ar=s("fuks"),Mr=s("Nd6c"),wr=s("6X5G"),Dr=s("v1R/"),Nr=s("jdue"),Ur=s("gHKk"),xr=s("OGjZ"),Lr=s("wSNj"),Pr=s("AAYK"),Fr=s("o1ML"),kr=s("q25d"),Vr=s("vUGd"),Br=s("AzHa"),Wr=s("wyCi"),Kr=s("r2VG"),Gr=s("yAmi"),Hr=s("rlQL"),jr=s("4R/C"),zr=s("VYTg"),Yr=s("Aavw"),qr=s("OxVo"),Zr=s("enVn"),Xr=s("gnow"),Qr=s("UJeg"),Jr=s("lMbP"),$r=s("j7GY"),ta=s("ekex"),ea=s("pGYl"),sa=s("0DoP"),ia=s("hFyr"),na=s("Gb7F"),ra=s("kiCC"),aa=s("qXDh");class oa{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}class ca{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}var ha=s("gegF"),la=s("amIx"),ua=s("Yp13"),_a=s("FXkd"),da=s("oc9L"),ga=s("iQVN"),ma=s("7KS0"),pa=s("Sfl4"),fa=s("nMRu"),Ea=s("rbNg");class Sa{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}var va=s("o4p4"),ba=s("4pnK"),Ia=s("75Vd"),Ra=s("zIYo");class Ta{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}var Oa=s("RH6c"),ya=s("hUfz"),Ca=s("SqPf"),Aa=s("asTc"),Ma=s("dmof"),wa=s("+lr5"),Da=s("w9Dd"),Na=s("0/8l");class Ua{constructor(){this._events=new Map,this._composers=new Map,this.registerEvents(),this.registerComposers()}registerEvents(){this._events.set(lt.AVAILABILITY_STATUS,v.a),this._events.set(lt.GENERIC_ERROR,st.a),this._events.set(lt.USER_CHANGE_NAME,b.a),this._events.set(lt.CATALOG_CLUB,I.a),this._events.set(lt.CATALOG_MODE,C.a),this._events.set(lt.CATALOG_PAGE,A.a),this._events.set(lt.CATALOG_PAGES,M.a),this._events.set(lt.CATALOG_PURCHASE,w.a),this._events.set(lt.CATALOG_PURCHASE_FAILED,D.a),this._events.set(lt.CATALOG_PURCHASE_UNAVAILABLE,N.a),this._events.set(lt.CATALOG_SEARCH,L.a),this._events.set(lt.CATALOG_SOLD_OUT,P.a),this._events.set(lt.CATALOG_UPDATED,F.a),this._events.set(lt.CATALOG_CLUB_GIFTS,R.a),this._events.set(lt.GROUP_LIST,y.a),this._events.set(lt.GIFT_CONFIG,T.a),this._events.set(lt.REDEEM_VOUCHER_ERROR,U.a),this._events.set(lt.REDEEM_VOUCHER_OK,x.a),this._events.set(lt.CLIENT_PING,h),this._events.set(lt.DESKTOP_VIEW,k.a),this._events.set(lt.MESSENGER_ACCEPT_FRIENDS,V.a),this._events.set(lt.MESSENGER_FIND_FRIENDS,B.a),this._events.set(lt.MESSENGER_FOLLOW_FAILED,W.a),this._events.set(lt.MESSENGER_FRIENDS,K.a),this._events.set(lt.MESSENGER_UPDATE,G.a),this._events.set(lt.MESSENGER_FRIEND_NOTIFICATION,H.a),this._events.set(lt.MESSENGER_REQUESTS,j.a),this._events.set(lt.MESSENGER_SEARCH,z.a),this._events.set(lt.MESSENGER_INSTANCE_MESSAGE_ERROR,Y.a),this._events.set(lt.MESSENGER_MESSAGE_ERROR,q.a),this._events.set(lt.MESSENGER_INIT,Z.a),this._events.set(lt.MESSENGER_MINIMAIL_NEW,X.a),this._events.set(lt.MESSENGER_MINIMAIL_COUNT,Na.a),this._events.set(lt.MESSENGER_CHAT,Q.a),this._events.set(lt.MESSENGER_REQUEST,J.a),this._events.set(lt.MESSENGER_INVITE_ERROR,$.a),this._events.set(lt.MESSENGER_INVITE,tt.a),this._events.set(lt.GROUP_INFO,at.a),this._events.set(lt.GROUP_MEMBER_REMOVE_CONFIRM,rt.a),this._events.set(lt.GROUP_MEMBERS,ot.a),this._events.set(lt.GROUP_CREATE_OPTIONS,nt.a),this._events.set(lt.GROUP_BADGE_PARTS,it.a),this._events.set(lt.GROUP_SETTINGS,ct.a),this._events.set(lt.CFH_RESULT_MESSAGE,ht.a),this._events.set(lt.ACHIEVEMENT_PROGRESSED,ut.a),this._events.set(lt.ACHIEVEMENT_LIST,_t.a),this._events.set(lt.USER_ACHIEVEMENT_SCORE,dt.a),this._events.set(lt.USER_EFFECT_ACTIVATE,mt),this._events.set(lt.USER_EFFECT_LIST_ADD,ft),this._events.set(lt.USER_EFFECT_LIST_REMOVE,St),this._events.set(lt.USER_EFFECT_LIST,It),this._events.set(lt.USER_CLOTHING,Ct.a),this._events.set(lt.USER_FURNITURE_ADD,At.a),this._events.set(lt.USER_FURNITURE,Mt.a),this._events.set(lt.USER_FURNITURE_REFRESH,wt.a),this._events.set(lt.USER_FURNITURE_REMOVE,Dt.a),this._events.set(lt.USER_FURNITURE_POSTIT_PLACED,Nt.a),this._events.set(lt.TRADE_ACCEPTED,Ft.a),this._events.set(lt.TRADE_CLOSED,kt.a),this._events.set(lt.TRADE_COMPLETED,Vt.a),this._events.set(lt.TRADE_CONFIRMATION,Bt.a),this._events.set(lt.TRADE_LIST_ITEM,Wt.a),this._events.set(lt.TRADE_NOT_OPEN,Kt.a),this._events.set(lt.TRADE_OPEN_FAILED,Ht.a),this._events.set(lt.TRADE_OPEN,Gt.a),this._events.set(lt.TRADE_OTHER_NOT_ALLOWED,jt.a),this._events.set(lt.TRADE_YOU_NOT_ALLOWED,zt.a),this._events.set(lt.GENERIC_ALERT_LINK,Yt.a),this._events.set(lt.MODTOOL_ROOM_INFO,Jt.a),this._events.set(lt.MODTOOL_USER_CHATLOG,$t.a),this._events.set(lt.MODTOOL_ROOM_CHATLOG,Qt.a),this._events.set(lt.NAVIGATOR_CATEGORIES,ee.a),this._events.set(lt.NAVIGATOR_COLLAPSED,se.a),this._events.set(lt.NAVIGATOR_EVENT_CATEGORIES,ie.a),this._events.set(lt.USER_HOME_ROOM,ne.a),this._events.set(lt.NAVIGATOR_LIFTED,re.a),this._events.set(lt.NAVIGATOR_METADATA,ae.a),this._events.set(lt.NAVIGATOR_OPEN_ROOM_CREATOR,oe.a),this._events.set(lt.NAVIGATOR_SEARCHES,ce.a),this._events.set(lt.NAVIGATOR_SEARCH,he.a),this._events.set(lt.NAVIGATOR_SETTINGS,le.a),this._events.set(lt.GENERIC_ALERT,_e.a),this._events.set(lt.MOTD_MESSAGES,ge.a),this._events.set(lt.NOTIFICATION_LIST,me.a),this._events.set(lt.USER_RESPECT,fe.a),this._events.set(lt.UNSEEN_ITEMS,Ee.a),this._events.set(lt.HOTEL_WILL_SHUTDOWN,de.a),this._events.set(lt.ROOM_ENTER_ERROR,Oe.a),this._events.set(lt.ROOM_ENTER,ye.a),this._events.set(lt.ROOM_FORWARD,Ce.a),this._events.set(lt.ROOM_DOORBELL,ve.a),this._events.set(lt.ROOM_DOORBELL_ACCEPTED,Se.a),this._events.set(lt.ROOM_DOORBELL_REJECTED,be.a),this._events.set(lt.ROOM_RIGHTS_CLEAR,Ie.a),this._events.set(lt.ROOM_RIGHTS_OWNER,Te.a),this._events.set(lt.ROOM_RIGHTS,Re.a),this._events.set(lt.ROOM_SETTINGS_CHAT,Ne),this._events.set(lt.ROOM_INFO,Ue.a),this._events.set(lt.ROOM_INFO_OWNER,xe.a),this._events.set(lt.ROOM_SCORE,Le.a),this._events.set(lt.ROOM_SETTINGS_SAVE_ERROR,Fe),this._events.set(lt.ROOM_SETTINGS,ke.a),this._events.set(lt.ROOM_SETTINGS_SAVE,Be),this._events.set(lt.ROOM_SETTINGS_UPDATED,We.a),this._events.set(lt.ROOM_RIGHTS_LIST,Ke.a),this._events.set(lt.ROOM_BAN_LIST,Me.a),this._events.set(lt.ROOM_ROLLING,Ge.a),this._events.set(lt.ROOM_CREATED,He.a),this._events.set(lt.BOT_COMMAND_CONFIGURATION,Ae.a),this._events.set(lt.BOT_ERROR,ue.a),this._events.set(lt.FURNITURE_ALIASES,Ze.a),this._events.set(lt.FURNITURE_DATA,Xe.a),this._events.set(lt.FURNITURE_ITEMDATA,Qe.a),this._events.set(lt.ITEM_STACK_HELPER,Je.a),this._events.set(lt.FURNITURE_STATE,ts.a),this._events.set(lt.ITEM_DIMMER_SETTINGS,ns.a),this._events.set(lt.FURNITURE_STATE_2,$e.a),this._events.set(lt.LOVELOCK_FURNI_FINISHED,es.a),this._events.set(lt.LOVELOCK_FURNI_FRIEND_COMFIRMED,ss.a),this._events.set(lt.LOVELOCK_FURNI_START,is.a),this._events.set(lt.FURNITURE_FLOOR_ADD,je.a),this._events.set(lt.FURNITURE_FLOOR,ze.a),this._events.set(lt.FURNITURE_FLOOR_REMOVE,Ye.a),this._events.set(lt.FURNITURE_FLOOR_UPDATE,qe.a),this._events.set(lt.ITEM_WALL_ADD,rs.a),this._events.set(lt.ITEM_WALL,as.a),this._events.set(lt.ITEM_WALL_REMOVE,os.a),this._events.set(lt.ITEM_WALL_UPDATE,cs.a),this._events.set(lt.ROOM_MODEL_DOOR,ls.a),this._events.set(lt.ROOM_HEIGHT_MAP,us.a),this._events.set(lt.ROOM_HEIGHT_MAP_UPDATE,_s.a),this._events.set(lt.ROOM_MODEL,ds.a),this._events.set(lt.ROOM_MODEL_NAME,gs.a),this._events.set(lt.ROOM_PAINT,ms.a),this._events.set(lt.ROOM_THICKNESS,ps.a),this._events.set(lt.ROOM_MODEL_BLOCKED_TILES,hs.a),this._events.set(lt.PET_FIGURE_UPDATE,fs.a),this._events.set(lt.PET_INFO,Es.a),this._events.set(lt.PLAYING_GAME,Ss.a),this._events.set(lt.UNIT_DANCE,ys.a),this._events.set(lt.UNIT_EFFECT,Cs.a),this._events.set(lt.UNIT,As.a),this._events.set(lt.UNIT_EXPRESSION,Ms.a),this._events.set(lt.UNIT_HAND_ITEM,ws.a),this._events.set(lt.UNIT_IDLE,Ns.a),this._events.set(lt.UNIT_INFO,Us.a),this._events.set(lt.UNIT_NUMBER,xs.a),this._events.set(lt.UNIT_REMOVE,Ls.a),this._events.set(lt.UNIT_STATUS,Ps.a),this._events.set(lt.HAND_ITEM_RECEIVED,Ds.a),this._events.set(lt.FLOOD_CONTROL,vs.a),this._events.set(lt.REMAINING_MUTE,bs.a),this._events.set(lt.UNIT_CHAT,Is.a),this._events.set(lt.UNIT_CHAT_SHOUT,Rs.a),this._events.set(lt.UNIT_CHAT_WHISPER,Ts.a),this._events.set(lt.UNIT_TYPING,Os.a),this._events.set(lt.WIRED_ACTION,Vs.a),this._events.set(lt.WIRED_CONDITION,Bs.a),this._events.set(lt.WIRED_TRIGGER,Ws.a),this._events.set(lt.WIRED_OPEN,Ks.a),this._events.set(lt.WIRED_REWARD,Gs.a),this._events.set(lt.WIRED_SAVE,Hs.a),this._events.set(lt.WIRED_ERROR,js.a),this._events.set(lt.ROOM_MUTED,ks),this._events.set(lt.AUTHENTICATED,u),this._events.set(lt.IN_CLIENT_LINK,ni.a),this._events.set(lt.USER_IGNORED,si.a),this._events.set(lt.USER_IGNORED_RESULT,ii.a),this._events.set(lt.USER_BADGES,Rt.a),this._events.set(lt.USER_PERKS,Ys),this._events.set(lt.USER_PERMISSIONS,qs.a),this._events.set(lt.USER_BADGES_CURRENT,Zs.a),this._events.set(lt.USER_FIGURE,Xs.a),this._events.set(lt.USER_INFO,Qs.a),this._events.set(lt.UNIT_CHANGE_NAME,Js.a),this._events.set(lt.USER_SETTINGS,ei.a),this._events.set(lt.USER_PROFILE,$s.a),this._events.set(lt.MESSENGER_RELATIONSHIPS,ti.a),this._events.set(lt.GIFT_OPENED,Ut.a),this._events.set(lt.GIFT_RECEIVER_NOT_FOUND,O.a),this._events.set(lt.USER_BOTS,Ot.a),this._events.set(lt.REMOVE_BOT_FROM_INVENTORY,yt.a),this._events.set(lt.ADD_BOT_TO_INVENTORY,Tt.a),this._events.set(lt.USER_CREDITS,ri.a),this._events.set(lt.USER_CURRENCY,ai.a),this._events.set(lt.USER_CURRENCY_UPDATE,oi.a),this._events.set(lt.USER_SUBSCRIPTION,ci.a),this._events.set(lt.LOAD_GAME_URL,et.a),this._events.set(lt.USER_WARDROBE_PAGE,hi.a),this._events.set(lt.USER_PETS,Lt.a),this._events.set(lt.USER_PET_REMOVE,Pt.a),this._events.set(lt.USER_PET_ADD,xt.a),this._events.set(lt.PET_PLACING_ERROR,pe.a),this._events.set(lt.MODERATION_USER_INFO,te.a),this._events.set(lt.MODERATION_TOPICS,qt.a),this._events.set(lt.MODERATION_TOOL,Zt.a),this._events.set(lt.MODTOOL_VISITED_ROOMS_USER,Xt.a)}registerComposers(){this._composers.set(Wn.CATALOG_MODE,_i.a),this._composers.set(Wn.CATALOG_PAGE,di.a),this._composers.set(Wn.CATALOG_PURCHASE,gi.a),this._composers.set(Wn.CATALOG_PURCHASE_GIFT,mi.a),this._composers.set(Wn.CATALOG_SEARCH,Si.a),this._composers.set(Wn.CATALOG_CLUB,Ei.a),this._composers.set(Wn.CATALOG_CLUB_GIFTS,fi.a),this._composers.set(Wn.CATALOG_REDEEM_VOUCHER,Ii.a),this._composers.set(Wn.LOVELOCK_START_CONFIRM,Pr.a),this._composers.set(Wn.GROUP_MEMBERSHIPS,ui.a),this._composers.set(Wn.GIFT_CONFIG,pi.a),this._composers.set(Wn.CATALOG_SELECT_VIP_GIFT,vi.a),this._composers.set(Wn.CLIENT_PONG,_),this._composers.set(Wn.RELEASE_VERSION,m),this._composers.set(Wn.DESKTOP_VIEW,Ri.a),this._composers.set(Wn.MESSENGER_ACCEPT,Ti.a),this._composers.set(Wn.MESSENGER_DECLINE,Oi.a),this._composers.set(Wn.FIND_FRIENDS,yi),this._composers.set(Wn.MESSENGER_FOLLOW,Ci.a),this._composers.set(Wn.MESSENGER_UPDATES,Ai),this._composers.set(Wn.MESSENGER_REQUESTS,Mi.a),this._composers.set(Wn.MESSENGER_SEARCH,wi),this._composers.set(Wn.MESSENGER_INIT,Di.a),this._composers.set(Wn.MESSENGER_REMOVE,Ni.a),this._composers.set(Wn.MESSENGER_REQUEST,Ui.a),this._composers.set(Wn.MESSENGER_CHAT,xi.a),this._composers.set(Wn.MESSENGER_ROOM_INVITE,Li),this._composers.set(Wn.MESSENGER_RELATIONSHIPS_UPDATE,Pi.a),this._composers.set(Wn.USER_VISIT,Fi),this._composers.set(Wn.GROUP_INFO,ji.a),this._composers.set(Wn.GROUP_REQUEST,zi.a),this._composers.set(Wn.GROUP_MEMBER_REMOVE_CONFIRM,Gi.a),this._composers.set(Wn.GROUP_MEMBER_REMOVE,Xi.a),this._composers.set(Wn.GROUP_MEMBERS,Yi.a),this._composers.set(Wn.GROUP_ADMIN_ADD,ki.a),this._composers.set(Wn.GROUP_ADMIN_REMOVE,Vi.a),this._composers.set(Wn.GROUP_REQUEST_ACCEPT,qi.a),this._composers.set(Wn.GROUP_REQUEST_DECLINE,Zi.a),this._composers.set(Wn.GROUP_DELETE,Hi.a),this._composers.set(Wn.GROUP_CREATE_OPTIONS,Ki.a),this._composers.set(Wn.GROUP_PARTS,Bi.a),this._composers.set(Wn.GROUP_BUY,Wi.a),this._composers.set(Wn.GROUP_SETTINGS,en.a),this._composers.set(Wn.GROUP_SAVE_BADGE,Qi.a),this._composers.set(Wn.GROUP_SAVE_COLORS,Ji.a),this._composers.set(Wn.GROUP_SAVE_INFORMATION,$i.a),this._composers.set(Wn.GROUP_SAVE_PREFERENCES,tn.a),this._composers.set(Wn.SECURITY_TICKET,f),this._composers.set(Wn.USER_INFO,p),this._composers.set(Wn.NAVIGATOR_CATEGORIES,Nn.a),this._composers.set(Wn.NAVIGATOR_INIT,xn.a),this._composers.set(Wn.NAVIGATOR_SEARCH_CLOSE,Ln),this._composers.set(Wn.NAVIGATOR_SEARCH,Pn.a),this._composers.set(Wn.NAVIGATOR_SEARCH_OPEN,Fn),this._composers.set(Wn.NAVIGATOR_SEARCH_SAVE,kn),this._composers.set(Wn.NAVIGATOR_SETTINGS,Vn.a),this._composers.set(Wn.NAVIGATOR_SETTINGS_SAVE,Bn),this._composers.set(Wn.NAVIGATOR_CATEGORY_LIST_MODE,Un),this._composers.set(Wn.CONVERT_GLOBAL_ROOM_ID,Dn.a),this._composers.set(Wn.USER_FURNITURE,on.a),this._composers.set(Wn.USER_FURNITURE2,an),this._composers.set(Wn.ITEM_SAVE_BACKGROUND,fr.a),this._composers.set(Wn.TRADE_ACCEPT,hn.a),this._composers.set(Wn.TRADE_CANCEL,ln.a),this._composers.set(Wn.TRADE_CLOSE,un.a),this._composers.set(Wn.TRADE_CONFIRM,_n.a),this._composers.set(Wn.TRADE_ITEM,dn.a),this._composers.set(Wn.TRADE_ITEMS,gn.a),this._composers.set(Wn.TRADE_ITEM_REMOVE,mn.a),this._composers.set(Wn.TRADE,pn.a),this._composers.set(Wn.TRADE_UNACCEPT,fn.a),this._composers.set(Wn.ACHIEVEMENT_LIST,li.a),this._composers.set(Wn.PET_RESPECT,Kn.a),this._composers.set(Wn.PET_INFO,Gn.a),this._composers.set(Wn.ROOM_CREATE,zr.a),this._composers.set(Wn.ROOM_ENTER,jn.a),this._composers.set(Wn.ROOM_DOORBELL,Hn.a),this._composers.set(Wn.ROOM_AMBASSADOR_ALERT,zn.a),this._composers.set(Wn.ROOM_BAN_GIVE,Yn.a),this._composers.set(Wn.ROOM_BAN_REMOVE,er.a),this._composers.set(Wn.ROOM_RIGHTS_GIVE,Zn.a),this._composers.set(Wn.ROOM_KICK,Xn.a),this._composers.set(Wn.ROOM_MUTE_USER,Jn.a),this._composers.set(Wn.ROOM_RIGHTS_REMOVE,tr.a),this._composers.set(Wn.ROOM_LIKE,Qn.a),this._composers.set(Wn.ROOM_DELETE,qn.a),this._composers.set(Wn.ROOM_STAFF_PICK,$n.a),this._composers.set(Wn.ROOM_INFO,nr.a),this._composers.set(Wn.ROOM_SETTINGS,rr.a),this._composers.set(Wn.ROOM_SETTINGS_SAVE,or.a),this._composers.set(Wn.ROOM_RIGHTS_LIST,ar.a),this._composers.set(Wn.ROOM_BAN_LIST,ir.a),this._composers.set(Wn.BOT_CONFIGURATION,sr.a),this._composers.set(Wn.GET_ITEM_DATA,ur.a),this._composers.set(Wn.REMOVE_WALL_ITEM,pr.a),this._composers.set(Wn.MODIFY_WALL_ITEM_DATA,_r.a),this._composers.set(Wn.BOT_PLACE,cr.a),this._composers.set(Wn.BOT_PICKUP,hr.a),this._composers.set(Wn.BOT_SKILL_SAVE,lr.a),this._composers.set(Wn.PET_PLACE,gr.a),this._composers.set(Wn.PET_MOVE,dr.a),this._composers.set(Wn.PET_PICKUP,mr.a),this._composers.set(Wn.FURNITURE_ALIASES,Ir.a),this._composers.set(Wn.FURNITURE_PICKUP,Rr.a),this._composers.set(Wn.FURNITURE_PLACE,Tr.a),this._composers.set(Wn.ITEM_PAINT,Or.a),this._composers.set(Wn.FURNITURE_POSTIT_PLACE,yr.a),this._composers.set(Wn.FURNITURE_FLOOR_UPDATE,br.a),this._composers.set(Wn.FURNITURE_WALL_UPDATE,Wr.a),this._composers.set(Wn.ITEM_DIMMER_SETTINGS,Er.a),this._composers.set(Wn.ITEM_DIMMER_SAVE,Sr.a),this._composers.set(Wn.ITEM_DIMMER_TOGGLE,vr.a),this._composers.set(Wn.ROOM_TONER_APPLY,Br.a),this._composers.set(Wn.ITEM_COLOR_WHEEL_CLICK,Cr.a),this._composers.set(Wn.ITEM_DICE_CLICK,Ar.a),this._composers.set(Wn.ITEM_DICE_CLOSE,Mr.a),this._composers.set(Wn.FURNITURE_MULTISTATE,Dr.a),this._composers.set(Wn.FURNITURE_RANDOMSTATE,Ur.a),this._composers.set(Wn.ITEM_STACK_HELPER,xr.a),this._composers.set(Wn.FURNITURE_WALL_MULTISTATE,Lr.a),this._composers.set(Wn.ONE_WAY_DOOR_CLICK,Nr.a),this._composers.set(Wn.ITEM_EXCHANGE_REDEEM,wr.a),this._composers.set(Wn.ITEM_CLOTHING_REDEEM,bi.a),this._composers.set(Wn.ROOM_MODEL,Hr.a),this._composers.set(Wn.ROOM_MODEL_BLOCKED_TILES,Kr.a),this._composers.set(Wn.ROOM_MODEL_DOOR,Gr.a),this._composers.set(Wn.ROOM_MODEL_SAVE,jr.a),this._composers.set(Wn.UNIT_ACTION,$r.a),this._composers.set(Wn.UNIT_DANCE,ta.a),this._composers.set(Wn.UNIT_DROP_HAND_ITEM,ea.a),this._composers.set(Wn.UNIT_GIVE_HANDITEM,sa.a),this._composers.set(Wn.UNIT_LOOK,ia.a),this._composers.set(Wn.UNIT_SIGN,ra.a),this._composers.set(Wn.UNIT_POSTURE,na.a),this._composers.set(Wn.UNIT_WALK,aa.a),this._composers.set(Wn.UNIT_CHAT,Yr.a),this._composers.set(Wn.UNIT_CHAT_SHOUT,qr.a),this._composers.set(Wn.USER_SETTINGS_CHAT_STYLE,Zr.a),this._composers.set(Wn.UNIT_CHAT_WHISPER,Xr.a),this._composers.set(Wn.UNIT_TYPING,Qr.a),this._composers.set(Wn.UNIT_TYPING_STOP,Jr.a),this._composers.set(Wn.WIRED_APPLY_SNAPSHOT,oa),this._composers.set(Wn.WIRED_OPEN,ca),this._composers.set(Wn.WIRED_ACTION_SAVE,la.a),this._composers.set(Wn.WIRED_CONDITION_SAVE,ua.a),this._composers.set(Wn.WIRED_TRIGGER_SAVE,_a.a),this._composers.set(Wn.ROOM_MUTE,ha.a),this._composers.set(Wn.USER_RESPECT,Ma.a),this._composers.set(Wn.USER_IGNORED,da.a),this._composers.set(Wn.USER_IGNORE,ga.a),this._composers.set(Wn.USER_IGNORE_ID,ma.a),this._composers.set(Wn.USER_UNIGNORE,pa.a),this._composers.set(Wn.USER_BADGES_CURRENT,fa.a),this._composers.set(Wn.USER_FIGURE,Ea.a),this._composers.set(Wn.USER_HOME_ROOM,Sa),this._composers.set(Wn.USER_MOTTO,va.a),this._composers.set(Wn.USER_PROFILE,ba.a),this._composers.set(Wn.MESSENGER_RELATIONSHIPS,Ia.a),this._composers.set(Wn.MANNEQUIN_SAVE_NAME,kr.a),this._composers.set(Wn.MANNEQUIN_SAVE_LOOK,Fr.a),this._composers.set(Wn.PRESENT_OPEN_PRESENT,Vr.a),this._composers.set(Wn.USER_BOTS,rn.a),this._composers.set(Wn.USER_BADGES,sn.a),this._composers.set(Wn.USER_BADGES_CURRENT_UPDATE,nn.a),this._composers.set(Wn.USER_PETS,cn.a),this._composers.set(Wn.USER_CURRENCY,Ra.a),this._composers.set(Wn.USER_SUBSCRIPTION,Ta),this._composers.set(Wn.MODTOOL_REQUEST_ROOM_INFO,bn.a),this._composers.set(Wn.MODTOOL_CHANGE_ROOM_SETTINGS,En.a),this._composers.set(Wn.MODTOOL_REQUEST_USER_CHATLOG,In.a),this._composers.set(Wn.MODTOOL_REQUEST_ROOM_CHATLOG,vn.a),this._composers.set(Wn.MOD_TOOL_USER_INFO,Rn.a),this._composers.set(Wn.MODTOOL_SANCTION_ALERT,yn.a),this._composers.set(Wn.MODTOOL_SANCTION_BAN,Cn.a),this._composers.set(Wn.MODTOOL_SANCTION_KICK,An.a),this._composers.set(Wn.MODTOOL_SANCTION_TRADELOCK,wn.a),this._composers.set(Wn.MODTOOL_ALERTEVENT,Sn.a),this._composers.set(Wn.MODTOOL_SANCTION_MUTE,Mn.a),this._composers.set(Wn.MODTOOL_REQUEST_USER_ROOMS,Tn.a),this._composers.set(Wn.MODTOOL_ROOM_ALERT,On.a),this._composers.set(Wn.USER_WARDROBE_PAGE,wa.a),this._composers.set(Wn.USER_WARDROBE_SAVE,Da.a),this._composers.set(Wn.USER_SETTINGS_CAMERA,Oa.a),this._composers.set(Wn.USER_SETTINGS_OLD_CHAT,ya.a),this._composers.set(Wn.USER_SETTINGS_INVITES,Ca.a),this._composers.set(Wn.USER_SETTINGS_VOLUME,Aa.a)}get events(){return this._events}get composers(){return this._composers}}class xa extends i.a{constructor(t){super(),this._communication=t,this._connection=null,this._messages=new Ua,this._demo=new S(this),this.onConnectionOpenedEvent=this.onConnectionOpenedEvent.bind(this),this.onConnectionClosedEvent=this.onConnectionClosedEvent.bind(this),this.onConnectionErrorEvent=this.onConnectionErrorEvent.bind(this),this.onConnectionAuthenticatedEvent=this.onConnectionAuthenticatedEvent.bind(this)}onInit(){this._connection||(r.a.instance.events.addEventListener(E.a.CONNECTION_AUTHENTICATED,this.onConnectionAuthenticatedEvent),this._connection=this._communication.createConnection(this),this._connection.registerMessages(this._messages),this._connection.addEventListener(n.a.CONNECTION_OPENED,this.onConnectionOpenedEvent),this._connection.addEventListener(n.a.CONNECTION_CLOSED,this.onConnectionClosedEvent),this._connection.addEventListener(n.a.CONNECTION_ERROR,this.onConnectionErrorEvent),this._demo&&this._demo.init(),this._connection.init(r.a.instance.getConfiguration("socket.url")))}onDispose(){this._demo&&this._demo.dispose(),this._connection&&(this._connection.removeEventListener(n.a.CONNECTION_OPENED,this.onConnectionOpenedEvent),this._connection.removeEventListener(n.a.CONNECTION_CLOSED,this.onConnectionClosedEvent),this._connection.removeEventListener(n.a.CONNECTION_ERROR,this.onConnectionErrorEvent)),r.a.instance.events.removeEventListener(E.a.CONNECTION_AUTHENTICATED,this.onConnectionAuthenticatedEvent),super.onDispose()}onConnectionOpenedEvent(t){this.logger.log("Connection Initialized")}onConnectionClosedEvent(t){this.logger.log("Connection Closed")}onConnectionErrorEvent(t){this.logger.log("Connection Error")}onConnectionAuthenticatedEvent(t){this.logger.log("Connection Authenticated"),this._connection&&this._connection.authenticated()}connectionInit(t){this.logger.log("Initializing Connection: "+t)}registerMessageEvent(t){return this._connection&&this._connection.addMessageEvent(t),t}removeMessageEvent(t){this._connection&&this._connection.removeMessageEvent(t)}get demo(){return this._demo}get connection(){return this._connection}}},"0qJb":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(...t){this._data=[t.length,...t]}getMessageArray(){return this._data}dispose(){}}},"0wjC":function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("P5vI");class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._offerId=-1,this._localizationId=null,this._rent=!1,this._priceCredits=0,this._priceActivityPoints=0,this._priceActivityPointsType=0,this._clubLevel=0,this._giftable=!1,this._bundlePurchaseAllowed=!1,this._isPet=!1,this._previewImage=null,this._products=[],!0}parse(t){if(!t)return!1;this._offerId=t.readInt(),this._localizationId=t.readString(),this._rent=t.readBoolean(),this._priceCredits=t.readInt(),this._priceActivityPoints=t.readInt(),this._priceActivityPointsType=t.readInt(),this._giftable=t.readBoolean();let e=t.readInt();for(;e>0;)this._products.push(new i.a(t)),e--;return this._clubLevel=t.readInt(),this._bundlePurchaseAllowed=t.readBoolean(),this._isPet=t.readBoolean(),this._previewImage=t.readString(),!0}get offerId(){return this._offerId}get localizationId(){return this._localizationId}get rent(){return this._rent}get priceCredits(){return this._priceCredits}get priceActivityPoints(){return this._priceActivityPoints}get priceActivityPointsType(){return this._priceActivityPointsType}get clubLevel(){return this._clubLevel}get giftable(){return this._giftable}get bundlePurchaseAllowed(){return this._bundlePurchaseAllowed}get isPet(){return this._isPet}get previewImage(){return this._previewImage}get products(){return this._products}}},"1+1A":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._itemId=0,this._spriteId=0,this._location=null,this._stuffData=null,this._state=0,this._secondsToExpiration=0,this._usagePolicy=-1,this._userId=0,this._username=null,this._width=0,this._height=0,this._localX=0,this._localY=0,this._y=0,this._z=0,this._direction=null,this._Str_19875=!1,!0}parse(t){if(!t)return!1;this._itemId=parseInt(t.readString()),this._spriteId=t.readInt(),this._location=t.readString(),this._stuffData=t.readString(),this._secondsToExpiration=t.readInt(),this._usagePolicy=t.readInt(),this._userId=t.readInt(),this._username=null;const e=parseFloat(this._stuffData);if(isNaN(e)||(this._state=e),0===this._location.indexOf(":")){this._Str_19875=!1;let t=this._location.split(" ");if(t.length>=3){let e=t[0],s=t[1];const i=t[2];if(e.length>3&&s.length>2&&(e=e.substr(3),s=s.substr(2),t=e.split(","),t.length>=2)){const e=parseInt(t[0]),n=parseInt(t[1]);if(t=s.split(","),t.length>=2){const s=parseInt(t[0]),r=parseInt(t[1]);this._width=e,this._height=n,this._localX=s,this._localY=r,this._direction=i}}}}else this._Str_19875=!0;return!0}get itemId(){return this._itemId}get spriteId(){return this._spriteId}get wallPosition(){return this._location}get stuffData(){return this._stuffData}get state(){return this._state}get secondsToExpiration(){return this._secondsToExpiration}get usagePolicy(){return this._usagePolicy}get userId(){return this._userId}get username(){return this._username}set username(t){this._username=t}get width(){return this._width}get height(){return this._height}get localX(){return this._localX}get localY(){return this._localY}get direction(){return this._direction}get _Str_22379(){return this._Str_19875}}},"10Jd":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{get furniId(){return this._furniId}flush(){return this._furniId=-1,!0}parse(t){return this._furniId=t.readInt(),!0}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"10wl":function(t,e,s){"use strict";s.d(e,"a",function(){return c});var i=s("5+UO"),n=s("fFOI"),r=s("o/0e"),a=s("/FfH");class o{flush(){return this._roomEnter=!1,this._roomForward=!1,this._staffPick=!1,this._data=null,this._isGroupMember=!1,this._moderation=null,this._chat=null,!0}parse(t){return!!t&&(this._roomEnter=t.readBoolean(),this._data=new r.a(t),this._roomForward=t.readBoolean(),this.data.roomPicker=t.readBoolean(),this._isGroupMember=t.readBoolean(),this.data.allInRoomMuted=t.readBoolean(),this._moderation=new a.a(t),this.data.canMute=t.readBoolean(),this._chat=new n.a(t),!0)}get roomEnter(){return this._roomEnter}get roomForward(){return this._roomForward}get data(){return this._data}get isGroupMember(){return this._isGroupMember}get moderation(){return this._moderation}get chat(){return this._chat}}class c extends i.a{constructor(t){super(t,o)}getParser(){return this.parser}}},"16el":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"1GrJ":function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("5+UO");class n{constructor(t){this._roomId=t.readInt(),this._roomName=t.readString(),this._Str_20266=t.readInt(),this._Str_20472=t.readInt()}get roomId(){return this._roomId}get roomName(){return this._roomName}get _Str_22929(){return this._Str_20266}get _Str_25550(){return this._Str_20472}}class r{constructor(t){this._rooms=[],this._userId=t.readInt(),this._userName=t.readString();const e=t.readInt();let s=0;for(;s<e;)this._rooms.push(new n(t)),s++}get userId(){return this._userId}get userName(){return this._userName}get rooms(){return this._rooms}}class a{flush(){return!0}parse(t){return this._data=new r(t),!0}get data(){return this._data}}class o extends i.a{constructor(t){super(t,a)}getParser(){return this.parser}}},"1QEa":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._isPlaying=!1,!0}parse(t){return!!t&&(this._isPlaying=t.readBoolean(),!0)}get isPlaying(){return this._isPlaying}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"1cH2":function(t,e,s){"use strict";s.d(e,"a",function(){return T});var i=s("kiYJ"),n=s("Xr/m"),r=s("P7Cj"),a=s("vzKh"),o=s("vuPI"),c=s("lVe0");class h{constructor(){this._buffer=new Uint8Array}writeByte(t){const e=new Uint8Array(1);return e[0]=t,this.appendArray(e),this}writeBytes(t){const e=new Uint8Array(t);return this.appendArray(e),this}writeShort(t){const e=new Uint8Array(2);return e[0]=t>>8,e[1]=255&t,this.appendArray(e),this}writeInt(t){const e=new Uint8Array(4);return e[0]=t>>24,e[1]=t>>16,e[2]=t>>8,e[3]=255&t,this.appendArray(e),this}writeString(t,e=!0){const s=(new TextEncoder).encode(t);return e?(this.writeShort(s.length),this.appendArray(s)):this.appendArray(s),this}appendArray(t){if(!t)return;const e=new Uint8Array(this._buffer.length+t.length);e.set(this._buffer),e.set(t,this._buffer.length),this._buffer=e}getBuffer(){return this._buffer.buffer}toString(t){return new TextDecoder(t).decode(this._buffer)}}class l{constructor(t){this._value=t}get value(){return this._value}}class u{constructor(t){this._value=t}get value(){return this._value}}class _{constructor(t,e){this._header=t,this._buffer=e}readByte(){return this._buffer?this._buffer.readByte():-1}readBytes(t){return this._buffer?this._buffer.readBytes(t):null}readBoolean(){return 1===this.readByte()}readShort(){return this._buffer?this._buffer.readShort():-1}readInt(){return this._buffer?this._buffer.readInt():-1}readString(){const t=this.readShort();return this._buffer.readBytes(t).toString("utf8")}get header(){return this._header}get bytesAvailable(){return this._buffer&&this._buffer.remaining()>0}}class d{encode(t,e){const s=new h;s.writeShort(t);for(const n of e){let t=typeof n;switch("object"===t&&(null===n?t="null":n instanceof l?t="byte":n instanceof u&&(t="short")),t){case"null":s.writeShort(0);break;case"byte":s.writeByte(n.value);break;case"short":s.writeShort(n.value);break;case"number":s.writeInt(n);break;case"boolean":s.writeByte(n?1:0);break;case"string":n?s.writeString(n,!0):s.writeShort(0)}}const i=s.getBuffer();return i?(new h).writeInt(i.byteLength).writeBytes(i):null}decode(t){if(!t||!t.dataBuffer||!t.dataBuffer.byteLength)return null;const e=[];for(;t.dataBuffer.byteLength&&!(t.dataBuffer.byteLength<4);){const s=new c.a(t.dataBuffer),i=s.readInt();if(i>t.dataBuffer.byteLength-4)break;const n=s.readBytes(i);e.push(new _(n.readShort(),n)),t.dataBuffer=t.dataBuffer.slice(i+4)}return e}}var g=s("+IGW"),m=s("5+UO");class p{constructor(){this._messageIdByEvent=new Map,this._messageIdByComposer=new Map,this._messageInstancesById=new Map}dispose(){this._messageIdByEvent.clear(),this._messageIdByComposer.clear(),this._messageInstancesById.clear()}registerMessages(t){for(const[e,s]of t.events)this.registerMessageEventClass(e,s);for(const[e,s]of t.composers)this.registerMessageComposerClass(e,s)}registerMessageEventClass(t,e){t&&e&&(this._messageIdByEvent.get(e)||this._messageIdByEvent.set(e,t))}registerMessageComposerClass(t,e){t&&e&&(this._messageIdByComposer.get(e)||this._messageIdByComposer.set(e,t))}registerMessageEvent(t){if(!t)return;const e=this.getEventId(t);if(!e)return;let s=this._messageInstancesById.get(e);s&&s.length?t.parser=s[0].parser:(s=[],this._messageInstancesById.set(e,s),t.parser=new t.parserClass),s.push(t)}removeMessageEvent(t){if(!t)return;const e=this.getEventId(t);if(!e)return;const s=this._messageInstancesById.get(e);if(s)for(const[i,n]of s.entries())if(n&&n===t)return s.splice(i,1),0===s.length&&this._messageInstancesById.delete(e),void n.dispose()}getEvents(t){if(t)return this._messageInstancesById.get(t)||void 0}getEventId(t){return t&&this._messageIdByEvent.get(t instanceof m.a?t.constructor:t)||-1}getComposerId(t){return t&&this._messageIdByComposer.get(t.constructor)||-1}}let f=(()=>{class t{}return t.CONNECTION_OPENED="open",t.CONNECTION_CLOSED="close",t.CONNECTION_ERROR="error",t.CONNECTION_MESSAGE="message",t})();class E extends o.a{constructor(t,e){super(),this._communicationManager=t,this._stateListener=e,this._socket=null,this._messages=new p,this._codec=new d,this._dataBuffer=null,this._isReady=!1,this._pendingClientMessages=[],this._pendingServerMessages=[],this._isAuthenticated=!1,this.onOpen=this.onOpen.bind(this),this.onClose=this.onClose.bind(this),this.onError=this.onError.bind(this),this.onMessage=this.onMessage.bind(this)}init(t){this._stateListener&&this._stateListener.connectionInit(t),this.createSocket(t)}onDispose(){super.onDispose(),this.destroySocket(),this._communicationManager=null,this._stateListener=null,this._messages=null,this._codec=null,this._dataBuffer=null}onReady(){this._isReady||(this._isReady=!0,this._pendingServerMessages&&this._pendingServerMessages.length&&this.processWrappers(...this._pendingServerMessages),this._pendingClientMessages&&this._pendingClientMessages.length&&this.send(...this._pendingClientMessages),this._pendingServerMessages=[],this._pendingClientMessages=[])}createSocket(t){t&&(this.destroySocket(),this._dataBuffer=new ArrayBuffer(0),this._socket=new WebSocket(t),this._socket.addEventListener(f.CONNECTION_OPENED,this.onOpen),this._socket.addEventListener(f.CONNECTION_CLOSED,this.onClose),this._socket.addEventListener(f.CONNECTION_ERROR,this.onError),this._socket.addEventListener(f.CONNECTION_MESSAGE,this.onMessage))}destroySocket(){this._socket&&(this._socket.removeEventListener(f.CONNECTION_OPENED,this.onOpen),this._socket.removeEventListener(f.CONNECTION_CLOSED,this.onClose),this._socket.removeEventListener(f.CONNECTION_ERROR,this.onError),this._socket.removeEventListener(f.CONNECTION_MESSAGE,this.onMessage),this._socket.readyState===WebSocket.OPEN&&this._socket.close(),this._socket=null)}onOpen(t){this.dispatchConnectionEvent(g.a.CONNECTION_OPENED,t)}onClose(t){this.dispatchConnectionEvent(g.a.CONNECTION_CLOSED,t)}onError(t){this.dispatchConnectionEvent(g.a.CONNECTION_ERROR,t)}onMessage(t){if(!t)return;this.dispatchConnectionEvent(g.a.CONNECTION_MESSAGE,t);const e=new FileReader;e.readAsArrayBuffer(t.data),e.onloadend=()=>{this._dataBuffer=this.concatArrayBuffers(this._dataBuffer,e.result),this.processReceivedData()}}dispatchConnectionEvent(t,e){this.dispatchEvent(new g.a(t,this,e))}authenticated(){this._isAuthenticated=!0}send(...t){if(this.disposed||!t)return!1;if(t=[...t],this._isAuthenticated&&!this._isReady)return this._pendingClientMessages||(this._pendingClientMessages=[]),this._pendingClientMessages.push(...t),!1;for(const e of t){if(!e)continue;const t=this._messages.getComposerId(e);if(-1===t){a.a.log("Unknown Composer: "+e.constructor.name);continue}const s=e.getMessageArray(),i=this._codec.encode(t,s);i?(r.a.instance.getConfiguration("communication.packet.log")&&console.log(`OutgoingComposer: [${t}] ${e.constructor.name}`,s),this.write(i.getBuffer())):r.a.instance.getConfiguration("communication.packet.log")&&console.log("Encoding Failed: "+e.constructor.name)}return!0}write(t){this._socket.readyState===WebSocket.OPEN&&this._socket.send(t)}processReceivedData(){try{this.processData()}catch(t){a.a.log(t)}}processData(){const t=this.splitReceivedMessages();if(t&&t.length)return this._isAuthenticated&&!this._isReady?(this._pendingServerMessages||(this._pendingServerMessages=[]),void this._pendingServerMessages.push(...t)):void this.processWrappers(...t)}processWrappers(...t){if(t&&t.length)for(const e of t){if(!e)continue;const t=this.getMessagesForWrapper(e);t&&t.length&&(r.a.instance.getConfiguration("communication.packet.log")&&console.log(`IncomingMessage: [${e.header}] ${t[0].constructor.name}`,t[0].parser),this.handleMessages(...t))}}splitReceivedMessages(){return this._dataBuffer&&this._dataBuffer.byteLength?this._codec.decode(this):null}concatArrayBuffers(t,e){const s=new Uint8Array(t.byteLength+e.byteLength);return s.set(new Uint8Array(t),0),s.set(new Uint8Array(e),t.byteLength),s.buffer}getMessagesForWrapper(t){if(!t)return null;const e=this._messages.getEvents(t.header);if(e&&e.length){try{const s=e[0].parser;if(!s||!s.flush()||!s.parse(t))return null}catch(s){return a.a.log("Error parsing message: "+s,e[0].constructor.name),null}return e}r.a.instance.getConfiguration("communication.packet.log")&&console.log(`IncomingMessage: [${t.header}] UNREGISTERED`,t)}handleMessages(...t){t=[...t];for(const e of t)e&&(e.connection=this,e.callBack&&e.callBack(e))}registerMessages(t){t&&this._messages.registerMessages(t)}addMessageEvent(t){t&&this._messages&&this._messages.registerMessageEvent(t)}removeMessageEvent(t){t&&this._messages&&this._messages.removeMessageEvent(t)}get isAuthenticated(){return this._isAuthenticated}get dataBuffer(){return this._dataBuffer}set dataBuffer(t){this._dataBuffer=t}}class S extends n.a{constructor(){super(),this._connections=[]}onDispose(){if(this._connections&&this._connections.length)for(const t of this._connections.values())t&&t.dispose()}createConnection(t=null){const e=new E(this,t);if(e)return this._connections.push(e),e}update(t){let e=0;for(;e<this._connections.length;){const t=this._connections[e];if(t.processReceivedData(),this.disposed)return;t.disposed?this._connections.splice(e,1):e++}}}var v=s("Fv14"),b=s("hTzv"),I=s("C6IL");class R extends v.a{constructor(){super(),this._definitions=new b.a,this.onConfigurationLoaded=this.onConfigurationLoaded.bind(this)}onInit(){this.loadConfigurationFromUrl(NitroConfig.configurationUrl)}loadConfigurationFromUrl(t){if(!t||""===t)return void this.dispatchConfigurationEvent(I.a.FAILED);const e=new XMLHttpRequest;try{e.open("GET",t),e.onloadend=this.onConfigurationLoaded,e.onerror=this.onConfigurationFailed,e.send()}catch(s){this.logger.error(s)}}onConfigurationLoaded(t){t&&(this.parseConfiguration(t.target.response)?this.dispatchConfigurationEvent(I.a.LOADED):this.dispatchConfigurationEvent(I.a.FAILED))}onConfigurationFailed(t){this.dispatchConfigurationEvent(I.a.FAILED)}dispatchConfigurationEvent(t){this.events&&this.events.dispatchEvent(new I.a(t))}parseConfiguration(t){if(!t||""===t)return!1;try{const e=JSON.parse(t),s=new RegExp(/\${(.*?)}/g);for(const t in e){let i=e[t];"string"==typeof i&&(i=this.interpolate(i,s)),this._definitions.add(t,i)}return!0}catch(e){return this.logger.error(e.stack),!1}}interpolate(t,e=null){e||(e=new RegExp(/\${(.*?)}/g));const s=t.match(e);if(s&&s.length)for(const i of s){const e=this._definitions.getValue(this.removeInterpolateKey(i));e&&(t=t.replace(i,e))}return t}removeInterpolateKey(t){return t.replace("${","").replace("}","")}getValue(t,e=null){let s=this._definitions.getValue(t);return void 0===s&&(this.logger.warn("Missing configuration key: "+t),s=e),s}setValue(t,e){this._definitions.add(t,e)}}class T extends n.a{constructor(){super(),window.console.log.apply(console,["\n%c                                                          \n  FlashUI is a Version for Sale!                          \n  Please purchase FlashUI through CoreloGAMES only        \n  You can get detailed information by joining the server  \n                                                          \n  https://discord.gg/harDJW33fe                           \n                                                          \n  \ud83d\udc96 Thank you Corelo \ud83d\udc96                                 \n                                                          \n","color: #FFFFFF; background: linear-gradient(90deg, rgba(2,0,36,1) 0%, rgba(9,9,121,1) 35%, rgba(0,212,255,1) 100%); padding:0px 0;"]),window.console.log.apply(console,["\n%c       _   ___ __              \n      / | / (_) /__________    \n     /  |/ / / __/ ___/ __ \\   \n    / /|  / / /_/ /  / /_/ /   \n   /_/ |_/_/\\__/_/   \\____/    \n                               \n Thanks for using Nitro        \n To report bugs or issues      \n join us on Discord            \n https://discord.gg/66UR68FPgy \n                               \n","color: #FFFFFF; background: #000000; padding:0px 0;"]),this._configuration=new R,this._communication=new S,this._asset=new i.a}onDispose(){this._asset&&(this._asset.dispose(),this._asset=null),this._communication&&(this._communication.dispose(),this._communication=null)}get configuration(){return this._configuration}get communication(){return this._communication}get asset(){return this._asset}}},"1mUs":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._figureSetIds=[],this._boundFurnitureNames=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._figureSetIds.push(t.readInt()),e--;let s=t.readInt();for(;s>0;)this._boundFurnitureNames.push(t.readString()),s--;return!0}get figureSetIds(){return this._figureSetIds}get boundsFurnitureNames(){return this._boundFurnitureNames}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"29Gn":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._info=null,!0}parse(t){return!!t&&(this._info=t.readString(),!0)}get info(){return this._info}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"2FAY":function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("WRyM");let n=(()=>{class t extends i.a{constructor(e,s,i){super(t.ANIMATE_ICON),this._image=e,this._x=s,this._y=i}get image(){return this._image}get x(){return this._x}get y(){return this._y}}return t.ANIMATE_ICON="NTAIE_ANIMATE_ICON",t})()},"2H63":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},"2L69":function(t,e,s){"use strict";s.d(e,"a",function(){return g});var i=s("XMGm"),n=s("MeCd"),r=s("KQk8");let a=(()=>{class t extends n.a{constructor(){super(),this._state="",this._hits=0,this._target=0}parseWrapper(t){t&&(this._state=t.readString(),this._hits=t.readInt(),this._target=t.readInt(),super.parseWrapper(t))}initializeFromRoomObjectModel(t){super.initializeFromRoomObjectModel(t),this._state=t.getValue(i.a.FURNITURE_CRACKABLE_STATE),this._hits=t.getValue(i.a.FURNITURE_CRACKABLE_HITS),this._target=t.getValue(i.a.FURNITURE_CRACKABLE_TARGET)}writeRoomObjectModel(e){super.writeRoomObjectModel(e),e.setValue(i.a.FURNITURE_DATA_FORMAT,t.FORMAT_KEY),e.setValue(i.a.FURNITURE_CRACKABLE_STATE,this._state),e.setValue(i.a.FURNITURE_CRACKABLE_HITS,this._hits),e.setValue(i.a.FURNITURE_CRACKABLE_TARGET,this._target)}getLegacyString(){return this._state}compare(t){return!0}get hits(){return this._hits}get target(){return this._target}}return t.FORMAT_KEY=r.a.CRACKABLE_KEY,t})(),o=(()=>{class t extends n.a{parseWrapper(t){t&&(this._state="",super.parseWrapper(t))}writeRoomObjectModel(e){super.writeRoomObjectModel(e),e.setValue(i.a.FURNITURE_DATA_FORMAT,t.FORMAT_KEY)}getLegacyString(){return this._state}compare(t){return super.compare(t)}}return t.FORMAT_KEY=r.a.EMPTY_KEY,t})();var c=s("Xe1u"),h=s("v12S"),l=s("tWLA"),u=s("uUF/"),_=s("PJfP"),d=s("VZrs");class g{static getData(t){let e=null;switch(255&t){case a.FORMAT_KEY:e=new a;break;case o.FORMAT_KEY:e=new o;break;case c.a.FORMAT_KEY:e=new c.a;break;case h.a.FORMAT_KEY:e=new h.a;break;case l.a.FORMAT_KEY:e=new l.a;break;case u.a.FORMAT_KEY:e=new u.a;break;case _.a.FORMAT_KEY:e=new _.a;break;case d.a.FORMAT_KEY:e=new d.a}return e?(e.flags=65280&t,e):null}}},"2Rep":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i,n){this._data=[t,e,s,i,n]}getMessageArray(){return this._data}dispose(){}}},"2y6h":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._credits=null,!0}parse(t){return!!t&&(this._credits=t.readString(),!0)}get credits(){return this._credits}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"38Mq":function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{static getTypeNumber(e){return t.AVATAR_TYPES[e]}static getTypeString(e){for(const s in t.AVATAR_TYPES)if(s&&t.AVATAR_TYPES[s]===e)return s;return null}static getRealType(e){switch(e){case t.BOT:case t.RENTABLE_BOT:return t.USER;default:return e}}}return t.USER="user",t.PET="pet",t.BOT="bot",t.RENTABLE_BOT="rentable_bot",t.MONSTER_PLANT="monsterplant",t.AVATAR_TYPES={user:1,pet:2,bot:3,rentable_bot:4},t})()},"3CL9":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){this._data=null}}},"3h45":function(t,e,s){"use strict";s.d(e,"a",function(){return Mr});var i=s("IqKQ"),n=s("vzKh"),r=s("Fv14"),a=s("y81I");let o=(()=>{class t extends a.a{constructor(t,e,s,i=!1,n=!1,r=!1,a=!1){super(t,e),this._eventId="",this._eventId=s,this._altKey=i,this._ctrlKey=n,this._shiftKey=r,this._buttonDown=a}get eventId(){return this._eventId}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get shiftKey(){return this._shiftKey}get buttonDown(){return this._buttonDown}get localX(){return this._localX}set localX(t){this._localX=t}get localY(){return this._localY}set localY(t){this._localY=t}get spriteOffsetX(){return this._spriteOffsetX}set spriteOffsetX(t){this._spriteOffsetX=t}get spriteOffsetY(){return this._spriteOffsetY}set spriteOffsetY(t){this._spriteOffsetY=t}}return t.CLICK="ROE_MOUSE_CLICK",t.DOUBLE_CLICK="ROE_MOUSE_DOUBLE_CLICK",t.MOUSE_MOVE="ROE_MOUSE_MOVE",t.MOUSE_DOWN="ROE_MOUSE_DOWN",t.MOUSE_UP="ROE_MOUSE_UP",t.MOUSE_ENTER="ROE_MOUSE_ENTER",t.MOUSE_LEAVE="ROE_MOUSE_LEAVE",t})();var c=s("yF7E"),h=s("P7Cj"),l=s("ySDW");class u{constructor(t,e,s,i,n,r,a=0,o=0,c=!1,h=!1,l=!1,u=!1){this._type=t,this._eventId=e,this._canvasId=s,this._spriteTag=i,this._screenX=n,this._screenY=r,this._localX=a,this._localY=o,this._ctrlKey=c,this._altKey=h,this._shiftKey=l,this._buttonDown=u,this._spriteOffsetX=0,this._spriteOffsetY=0}get type(){return this._type}get _Str_3463(){return this._eventId}get canvasId(){return this._canvasId}get spriteTag(){return this._spriteTag}get screenX(){return this._screenX}get screenY(){return this._screenY}get localX(){return this._localX}get localY(){return this._localY}get ctrlKey(){return this._ctrlKey}get altKey(){return this._altKey}get shiftKey(){return this._shiftKey}get buttonDown(){return this._buttonDown}get spriteOffsetX(){return this._spriteOffsetX}set spriteOffsetX(t){this._spriteOffsetX=t}get spriteOffsetY(){return this._spriteOffsetY}set spriteOffsetY(t){this._spriteOffsetY=t}}let _=(()=>{class t{}return t.DEFAULT=1,t._Str_8616=2,t._Str_11629=3,t._Str_10494=4,t})();var d=s("vqvB"),g=s("DACI"),m=s("DFHD"),p=s("kXXe");class f{constructor(t){this._roomObjectVariableAccurateZ=t||"",this._location=new m.a,this._screenLocation=new m.a,this._locationChanged=!1,this._geometryUpdateId=-1,this._objectUpdateId=-1}dispose(){this._screenLocation=null}updateLocation(t,e){if(!t||!e)return null;let s=!1;const i=t.getLocation();if(e.updateId===this._geometryUpdateId&&t.updateCounter===this._objectUpdateId||(this._objectUpdateId=t.updateCounter,e.updateId===this._geometryUpdateId&&i.x===this._location.x&&i.y===this._location.y&&i.z===this._location.z||(this._geometryUpdateId=e.updateId,this._location.assign(i),s=!0)),this._locationChanged=s,this._locationChanged){const s=e.getScreenPosition(i);if(!s)return null;const n=t.model.getValue(this._roomObjectVariableAccurateZ);if(isNaN(n)||0===n){const t=new m.a(Math.round(i.x),Math.round(i.y),i.z);if(t.x!==i.x||t.y!==i.y){const i=e.getScreenPosition(t);this._screenLocation.assign(s),i&&(this._screenLocation.z=i.z)}else this._screenLocation.assign(s)}else this._screenLocation.assign(s);this._screenLocation.x=Math.round(this._screenLocation.x),this._screenLocation.y=Math.round(this._screenLocation.y)}return this._screenLocation}get locationChanged(){return this._locationChanged}}class E{constructor(){this._sprites=[],this._updateId1=-1,this._updateId2=-1,this._isEmpty=!1}get _Str_3008(){return this._sprites.length}get isEmpty(){return this._isEmpty}dispose(){this._Str_20276(0)}_Str_12937(t){this._sprites.push(t)}_Str_2505(t){return this._sprites[t]}get _Str_9272(){return this._sprites}_Str_17574(t,e){return(t!==this._updateId1||e!==this._updateId2)&&(this._updateId1=t,this._updateId2=e,!0)}_Str_20276(t){if(t<this._sprites.length){let e=t;for(;e<this._sprites.length;){const t=this._sprites[e];t&&t.dispose(),e++}this._sprites.splice(t,this._sprites.length-t)}this._isEmpty=!this._sprites.length}}class S{constructor(t){this._location=new f(t),this._sprites=new E}get location(){return this._location}get sprites(){return this._sprites}dispose(){this._location&&(this._location.dispose(),this._location=null),this._sprites&&(this._sprites.dispose(),this._sprites=null)}get _Str_1577(){return this._objectId}set _Str_1577(t){this._objectId=t}}let v=(()=>{class t{constructor(t){this._data=new Map,this._roomObjectVariableAccurateZ=t}dispose(){if(this._data){for(const[t,e]of this._data.entries())e&&(this._data.delete(t),e.dispose());this._data=null}}getObjectCache(t){let e=this._data.get(t);return e||(e=new S(this._roomObjectVariableAccurateZ),this._data.set(t,e)),e}removeObjectCache(t){const e=this._data.get(t);e&&(this._data.delete(t),e.dispose())}getSortableSpriteList(){const e=[];for(const s of this._data.values()){if(!s)continue;const i=s.sprites&&s.sprites._Str_9272;if(i&&i.length)for(const n of i)if(n&&n.sprite.spriteType!==_._Str_8616&&""!==n.sprite.name){const i=new p.a;i.objectId=s._Str_1577,i.x=n.x,i.y=n.y,i.z=n.z,i.name=n.sprite.name||"",i.flipH=n.sprite.flipH,i.alpha=n.sprite.alpha,i.color=n.sprite.color.toString(),i.blendMode=n.sprite.blendMode.toString(),i.width=n.sprite.width,i.height=n.sprite.height,i.type=n.sprite.type,i.posture=n.sprite.posture;const r=this.isSkewedSprite(n.sprite);r&&(i.skew=n.sprite.direction%4==0?-.5:.5),(r||n.name.indexOf("%image.library.url%")>=0||n.name.indexOf("%group.badge.url%")>=0)&&i.width<=t.MAX_SIZE_FOR_AVG_COLOR&&i.height<=t.MAX_SIZE_FOR_AVG_COLOR&&0===n.sprite.name.indexOf("external_image_wallitem")&&(i.frame=!0),e.push(i)}}return e&&e.length?e:null}isSkewedSprite(t){return!!t.type&&(0===t.type.indexOf("external_image_wallitem")&&"THUMBNAIL"===t.tag||0===t.type.indexOf("guild_forum")&&"THUMBNAIL"===t.tag)}getPlaneSortableSprites(){const t=[];for(const e of this._data.values())for(const s of e.sprites._Str_9272)s.sprite.spriteType===_._Str_8616&&t.push(s);return t}}return t.MAX_SIZE_FOR_AVG_COLOR=200,t})();class b extends i.Sprite{constructor(t=null){super(t),this._offsetX=0,this._offsetY=0,this._tag="",this._alphaTolerance=128,this._Str_8253=!1,this._clickHandling=!1,this._pairedSpriteId=-1,this._pairedSpriteUpdateCounter=-1}needsUpdate(t,e){return(this._pairedSpriteId!==t||this._pairedSpriteUpdateCounter!==e)&&(this._pairedSpriteId=t,this._pairedSpriteUpdateCounter=e,!0)}render(t){try{if(!this._texture||!this._texture._uvs||!this._texture._uvs.uvsFloat32)return}catch(e){return}super.render(t)}setTexture(t){t||(t=i.Texture.EMPTY),t!==this.texture&&(t===i.Texture.EMPTY&&(this._pairedSpriteId=-1,this._pairedSpriteUpdateCounter=-1),this.texture=t)}containsPoint(t){return b.containsPoint(this,t)}static containsPoint(t,e){if(!t||!e||t.alphaTolerance>255)return!1;if(!(t instanceof i.Sprite))return!1;if(t.texture===i.Texture.EMPTY||t.blendMode!==i.BLEND_MODES.NORMAL)return;const s=t.texture,n=s.baseTexture;if(!s||!n||!n.valid)return!1;const r=e.x*t.scale.x,a=e.y*t.scale.y;if(!t.getLocalBounds().contains(r,a))return!1;if(!n.hitMap){let t=null;if(!n.resource)if(s.getLocalBounds)t=h.a.instance.renderer.extract.canvas(s);else{const e=i.Sprite.from(s);t=h.a.instance.renderer.extract.canvas(e),e.destroy()}if(!b.generateHitMap(n,t))return!1}const o=n.hitMap,c=n.hitMapWidth,l=n.resolution,u=Math.round((r+s.frame.x)*l),_=4*(Math.round((a+s.frame.y)*l)*c+u);return void 0!==o[_+3]&&o[_+3]>t.alphaTolerance}static generateHitMap(t,e=null){let s=null,i=null;if(e)s=e,i=s.getContext("2d");else{if(!t.resource)return!1;const e=t.resource.source;if(!e)return!1;if(e.getContext)s=e,i=s.getContext("2d");else{if(!(e instanceof Image))return!1;s=document.createElement("canvas"),s.width=e.width,s.height=e.height,i=s.getContext("2d"),i.drawImage(e,0,0)}}const n=s.width,r=i.getImageData(0,0,n,s.height);return t.hitMap=r.data,t.hitMapWidth=n,!0}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t}get tag(){return this._tag}set tag(t){this._tag=t}get alphaTolerance(){return this._alphaTolerance}set alphaTolerance(t){this._alphaTolerance=t}get _Str_4593(){return this._Str_8253}set _Str_4593(t){this._Str_8253=t}get clickHandling(){return this._clickHandling}set clickHandling(t){this._clickHandling=t}}class I{constructor(){this._objectId="",this._spriteTag=""}get objectId(){return this._objectId}set objectId(t){this._objectId=t}get spriteTag(){return this._spriteTag}set spriteTag(t){this._spriteTag=t}}let R=(()=>{class t{constructor(){this._name="",this._sprite=null,this._x=0,this._y=0,this._z=0}dispose(){this._z=-t._Str_17154,this._sprite=null}get name(){return this._name}set name(t){this._name=t}get sprite(){return this._sprite}set sprite(t){this._sprite=t}get x(){return this._x}set x(t){this._x=t}get y(){return this._y}set y(t){this._y=t}get z(){return this._z}set z(t){this._z=t}}return t._Str_17154=1e8,t})();class T{constructor(t,e,s,n,r){this._id=e,this._container=t,this._geometry=new g.a(r,new m.a(-135,30,0),new m.a(11,11,5),new m.a(-135,.5,0)),this._renderTimestamp=0,this._master=null,this._display=null,this._mask=null,this._sortableSprites=[],this._spriteCount=0,this._activeSpriteCount=0,this._spritePool=[],this._skipObjectUpdate=!1,this._runningSlow=!1,this._width=0,this._height=0,this._renderedWidth=0,this._renderedHeight=0,this._screenOffsetX=0,this._screenOffsetY=0,this._mouseLocation=new i.Point,this._mouseOldX=0,this._mouseOldY=0,this._mouseCheckCount=0,this._mouseSpriteWasHit=!1,this._mouseActiveObjects=new Map,this._eventCache=new Map,this._eventId=0,this._scale=1,this._restrictsScaling=!1,this._noSpriteVisibilityChecking=!1,this._usesExclusionRectangles=!1,this._usesMask=!0,this._canvasUpdated=!1,this._objectCache=new v(this._container.roomObjectVariableAccurateZ),this._mouseListener=null,this.setupCanvas(),this.initialize(s,n)}setupCanvas(){if(this._master||(this._master=new i.Sprite,this._master.interactiveChildren=!1),!this._display){const t=new i.Container;t.name="canvas",this._master.addChild(t),this._display=t}}dispose(){if(this._Str_20677(0,!0),this._geometry&&(this._geometry.dispose(),this._geometry=null),this._mask&&(this._mask=null),this._objectCache&&(this._objectCache.dispose(),this._objectCache=null),this._master){for(;this._master.children.length;)this._master.removeChildAt(0).destroy();this._master.parent&&this._master.parent.removeChild(this._master),this._master.destroy(),this._master=null}if(this._display=null,this._sortableSprites=[],this._mouseActiveObjects&&(this._mouseActiveObjects.clear(),this._mouseActiveObjects=null),this._spritePool){for(const t of this._spritePool)this._Str_21974(t,!0);this._spritePool=[]}this._eventCache&&(this._eventCache.clear(),this._eventCache=null),this._mouseListener=null}initialize(t,e){if(t=t<1?1:t,e=e<1?1:e,this._usesMask&&(this._mask?this._mask.clear().beginFill(16711680).drawRect(0,0,t,e).endFill():(this._mask=(new i.Graphics).beginFill(16711680).drawRect(0,0,t,e).endFill(),this._mask.name="mask",this._master&&(this._master.addChild(this._mask),this._display&&(this._display.mask=this._mask)))),this._master){if(this._master.hitArea){const s=this._master.hitArea;s.width=t,s.height=e}else this._master.hitArea=new i.Rectangle(0,0,t,e);if(this._master.filterArea){const s=this._master.filterArea;s.width=t,s.height=e}else this._master.filterArea=new i.Rectangle(0,0,t,e)}this._width=t,this._height=e}setMask(t){t&&!this._usesMask?(this._usesMask=!0,this._mask&&this._mask.parent!==this._master&&(this._master.addChild(this._mask),this._display.mask=this._mask)):!t&&this._usesMask&&(this._usesMask=!1,this._mask&&this._mask.parent===this._master&&(this._master.removeChild(this._mask),this._display.mask=null))}setScale(t,e=null,s=null,n=!1,r=!1){this._master&&this._display&&(this._restrictsScaling&&!n||(e||(e=new i.Point(this._width/2,this._height/2)),s||(s=e),e=this._display.toLocal(e),r?this._scale*=t:this._scale=t,this.screenOffsetX=s.x-e.x*this._scale,this.screenOffsetY=s.y-e.y*this._scale))}render(t,e=!1){if(this._canvasUpdated=!1,-1===t&&(t=this._renderTimestamp+1),!this._container||!this._geometry)return;if(t===this._renderTimestamp)return;this._width===this._renderedWidth&&this._height===this._renderedHeight||(e=!0),this._display.x===this._screenOffsetX&&this._display.y===this._screenOffsetY||(this._display.x=this._screenOffsetX,this._display.y=this._screenOffsetY,e=!0),this._display.scale.x!==this._scale&&(this._display.scale.set(this._scale),e=!0);let s=0;const i=this._container.objects;if(i.size)for(const r of i.values())r&&(s+=this.renderObject(r,r.instanceId.toString(),t,e,s));this._sortableSprites.sort((t,e)=>e.z-t.z),s<this._sortableSprites.length&&this._sortableSprites.splice(s);let n=0;for(;n<s;){const t=this._sortableSprites[n];t&&t.sprite&&this.renderSprite(n,t),n++}this._Str_20677(s),e&&(this._canvasUpdated=!0),this._renderTimestamp=t,this._renderedWidth=this._width,this._renderedHeight=this._height}_Str_20787(){this._noSpriteVisibilityChecking=!0,this.render(-1,!0)}_Str_22174(){this._noSpriteVisibilityChecking=!1}getSortableSpriteList(){return this._objectCache.getSortableSpriteList()}_Str_14588(){return this._objectCache.getPlaneSortableSprites()}removeFromCache(t){this._objectCache.removeObjectCache(t)}renderObject(t,e,s,i,n){if(!t)return 0;const r=t.visualization;if(!r)return this.removeFromCache(e),0;const a=this.getCacheItem(e);a._Str_1577=t.instanceId;const o=a.location,c=a.sprites,h=o.updateLocation(t,this._geometry);if(!h)return this.removeFromCache(e),0;if(r.update(this._geometry,s,!c.isEmpty||i,this._skipObjectUpdate&&this._runningSlow),o.locationChanged&&(i=!0),!c._Str_17574(r.instanceId,r.updateSpriteCounter)&&!i)return c._Str_3008;let l=h.x,u=h.y,d=h.z;d+=l>0?12e-8*l:12e-8*-l,l+=Math.trunc(this._width/2),u+=Math.trunc(this._height/2);let g=0;for(const m of r.sprites.values()){if(!m||!m.visible)continue;const s=m.texture,i=s&&s.baseTexture;if(!s||!i)continue;const r=l+m.offsetX+this._screenOffsetX,a=u+m.offsetY+this._screenOffsetY;if(m.flipH){if(!this.isSpriteVisible(l+-(s.width+-m.offsetX)+this._screenOffsetX,a,s.width,s.height))continue}else if(m.flipV){if(!this.isSpriteVisible(r,u+-(s.height+-m.offsetY)+this._screenOffsetY,s.width,s.height))continue}else if(!this.isSpriteVisible(r,a,s.width,s.height))continue;let o=c._Str_2505(g);o||(o=new R,c._Str_12937(o),this._sortableSprites.push(o),o.name=e),o.sprite=m,m.spriteType!==_._Str_11629&&m.spriteType!==_._Str_10494||(o.sprite._Str_3582="avatar_"+t.id),o.x=r-this._screenOffsetX,o.y=a-this._screenOffsetY,o.z=d+m.relativeDepth+37e-12*n,g++,n++}return c._Str_20276(g),this._canvasUpdated=!0,g}getExtendedSprite(t){return t<0||t>=this._spriteCount?null:this._display.getChildAt(t)||null}getExtendedSpriteIdentifier(t){return t?t.name:""}renderSprite(t,e){if(t>=this._spriteCount)return this.createAndAddSprite(e),!0;if(!e)return!1;const s=e.sprite,i=this.getExtendedSprite(t);if(!s||!i)return!1;if(i._Str_4593!==s._Str_4593)return i._Str_4593&&!s._Str_4593?(this._display.removeChildAt(t),this._spritePool.push(i),this.renderSprite(t,e)):(this.createAndAddSprite(e,t),!0);if(i.needsUpdate(s.id,s.updateCounter)||d.a.isVisualizationOn()){i.tag=s.tag,i.alphaTolerance=s.alphaTolerance,i.name=e.name,i._Str_4593=s._Str_4593,i.clickHandling=s.clickHandling,i.filters=s.filters;const t=s.alpha/255;i.alpha!==t&&(i.alpha=t),i.tint!==s.color&&(i.tint=s.color),i.blendMode!==s.blendMode&&(i.blendMode=s.blendMode),i.texture!==s.texture&&i.setTexture(s.texture),s.updateContainer&&(1===i.children.length&&i.removeChildAt(0),i.addChild(s.container),s.updateContainer=!1),s.flipH?-1!==i.scale.x&&(i.scale.x=-1):1!==i.scale.x&&(i.scale.x=1),s.flipV?-1!==i.scale.y&&(i.scale.y=-1):1!==i.scale.y&&(i.scale.y=1),this._Str_21914(i,s)}return i.x!==e.x&&(i.x=e.x),i.y!==e.y&&(i.y=e.y),i.offsetX=s.offsetX,i.offsetY=s.offsetY,!0}createAndAddSprite(t,e=-1){const s=t.sprite;if(!s)return;let i=null;this._spritePool.length>0&&(i=this._spritePool.pop()),i||(i=new b),i.children.length&&i.removeChildren(),i.tag=s.tag,i.alphaTolerance=s.alphaTolerance,i.alpha=s.alpha/255,i.tint=s.color,i.x=t.x,i.y=t.y,i.offsetX=s.offsetX,i.offsetY=s.offsetY,i.name=s.name,i._Str_4593=s._Str_4593,i.clickHandling=s.clickHandling,i.blendMode=s.blendMode,i.filters=s.filters,i.setTexture(s.texture),s.updateContainer&&(i.addChild(s.container),s.updateContainer=!1),s.flipH&&(i.scale.x=-1),s.flipV&&(i.scale.y=-1),this._Str_21914(i,s),e<0||e>=this._spriteCount?(this._display.addChild(i),this._spriteCount++):this._display.addChildAt(i,e),this._activeSpriteCount++}_Str_20677(t,e=!1){if(this._display){if(t<0&&(t=0),t<this._activeSpriteCount||!this._activeSpriteCount){let s=this._spriteCount-1;for(;s>=t;)this._Str_21974(this.getExtendedSprite(s),e),s--}this._activeSpriteCount=t}}_Str_21914(t,e){if(d.a.isVisualizationOn()&&e)switch(e.spriteType){case _._Str_10494:return;case _._Str_8616:return void(t.alpha=d.a.getDelta(.9));case _._Str_11629:return void(t.alpha=d.a.getDelta(.5));default:t.alpha=d.a.getDelta(.1)}}_Str_21974(t,e){t&&(e?(t.parent&&t.parent.removeChild(t),t.destroy({children:!0})):t.setTexture(null))}update(){this._mouseCheckCount=0,this._eventId++}setMouseListener(t){this._mouseListener=t}getCacheItem(t){return this._objectCache.getObjectCache(t)}isSpriteVisible(t,e,s,i){return!!this._noSpriteVisibilityChecking||(e=(e-this._screenOffsetY)*this._scale+this._screenOffsetY,(t=(t-this._screenOffsetX)*this._scale+this._screenOffsetX)<this._width&&t+(s*=this._scale)>=0&&e<this._height&&e+(i*=this._scale)>=0&&!this._usesExclusionRectangles)}_Str_21232(t,e,s,i,n,r,a){return e-=this._screenOffsetY,this._mouseLocation.x=(t-=this._screenOffsetX)/this._scale,this._mouseLocation.y=e/this._scale,this._mouseCheckCount>0&&s==l.a.MOUSE_MOVE||(this._mouseSpriteWasHit=this._Str_19207(Math.trunc(t/this._scale),Math.trunc(e/this._scale),s,i,n,r,a),this._mouseCheckCount++),this._mouseSpriteWasHit}_Str_19207(t,e,s,n=!1,r=!1,a=!1,o=!1){const c=[];let h=!1,u=null,_=this._activeSpriteCount-1;for(;_>=0;){const d=this.getExtendedSprite(_);if(d&&d.containsPoint(new i.Point(t-d.x,e-d.y))&&(!d.clickHandling||s!==l.a.MOUSE_CLICK&&s!==l.a.DOUBLE_CLICK)){const i=this.getExtendedSpriteIdentifier(d);if(-1===c.indexOf(i)){const h=d.tag;let _=this._mouseActiveObjects.get(i);_&&_.spriteTag!==h&&(u=this._Str_11609(0,0,0,0,l.a.ROLL_OUT,_.spriteTag,n,r,a,o),this._Str_14715(u,i)),s!==l.a.MOUSE_MOVE||_&&_.spriteTag===h?(u=this._Str_11609(t,e,t-d.x,e-d.y,s,h,n,r,a,o),u.spriteOffsetX=d.offsetX,u.spriteOffsetY=d.offsetY):u=this._Str_11609(t,e,t-d.x,e-d.y,l.a.ROLL_OVER,h,n,r,a,o),_||(_=new I,_.objectId=i,this._mouseActiveObjects.set(i,_)),_.spriteTag=h,s===l.a.MOUSE_MOVE&&t===this._mouseOldX&&e===this._mouseOldY||this._Str_14715(u,i),c.push(i)}h=!0}_--}const d=[];for(const i of this._mouseActiveObjects.keys())i&&d.push(i);let g=0;for(;g<d.length;)c.indexOf(d[g])>=0&&(d[g]=null),g++;for(g=0;g<d.length;){const t=d[g];if(null!==t){const e=this._mouseActiveObjects.get(t);e&&this._mouseActiveObjects.delete(t);const s=this._Str_11609(0,0,0,0,l.a.ROLL_OUT,e.spriteTag,n,r,a,o);this._Str_14715(s,t)}g++}return this._Str_20604(),this._mouseOldX=t,this._mouseOldY=e,h}_Str_11609(t,e,s,i,n,r,a,o,c,h){const l="canvas_"+this._id;return new u(n,l+"_"+this._eventId,l,r,t-this._width/2,e-this._height/2,s,i,o,a,c,h)}_Str_14715(t,e){t&&this._eventCache&&(this._eventCache.delete(e),this._eventCache.set(e,t))}_Str_20604(){if(this._container&&this._eventCache){for(const[t,e]of this._eventCache.entries()){if(!this._eventCache)return;if(!e)continue;const s=this._container.getRoomObject(parseInt(t));if(s)if(this._mouseListener)this._mouseListener._Str_20330(e,s,this._geometry);else{const t=s.mouseHandler;t&&t.mouseEvent(e,this._geometry)}}this._eventCache&&this._eventCache.clear()}}getDisplayAsTexture(){this._noSpriteVisibilityChecking=!0;const t=this._scale,e=this._screenOffsetX,s=this._screenOffsetY;this.setScale(1,null,null,!0),this._screenOffsetX=0,this._screenOffsetY=0,this._display.mask=null,this.render(-1,!0);const n=this._display.getBounds(),r=i.RenderTexture.create({width:this._display.width,height:this._display.height});return h.a.instance.renderer.render(this._display,r,!0,new i.Matrix(1,0,0,1,-n.x,-n.y)),this._noSpriteVisibilityChecking=!1,this.setScale(t,null,null,!0),this._screenOffsetX=e,this._screenOffsetY=s,this._display.mask=this._mask,r}get id(){return this._id}get geometry(){return this._geometry}get master(){return this._master}get display(){return this._display}get screenOffsetX(){return this._screenOffsetX}set screenOffsetX(t){t=Math.trunc(t),this._mouseLocation.x=this._mouseLocation.x-(t-this._screenOffsetX),this._screenOffsetX=t}get screenOffsetY(){return this._screenOffsetY}set screenOffsetY(t){t=Math.trunc(t),this._mouseLocation.y=this._mouseLocation.y-(t-this._screenOffsetY),this._screenOffsetY=t}get scale(){return this._scale}get width(){return this._width*this._scale}get height(){return this._height*this._scale}get restrictsScaling(){return this._restrictsScaling}set restrictsScaling(t){this._restrictsScaling=t}get canvasUpdated(){return this._canvasUpdated}}class O{constructor(){this._objects=new Map,this._canvases=new Map,this._disposed=!1,this._roomObjectVariableAccurateZ=null}dispose(){if(!this._disposed){if(this._canvases){for(const[t,e]of this._canvases.entries())this._canvases.delete(t),e&&e.dispose();this._canvases=null}this._objects&&(this._objects=null),this._disposed=!0}}reset(){this._objects.clear()}getInstanceId(t){return t?t.instanceId:-1}getRoomObject(t){return this._objects.get(t)}addObject(t){t&&this._objects.set(this.getInstanceId(t),t)}removeObject(t){const e=this.getInstanceId(t);this._objects.delete(e);for(const s of this._canvases.values())s&&s.removeFromCache(e.toString())}render(t,e=!1){if(this._canvases&&this._canvases.size)for(const s of this._canvases.values())s&&s.render(t,e)}update(t,e=!1){if(this._canvases&&this._canvases.size){this.render(t,e);for(const t of this._canvases.values())t&&t.update()}}getCanvas(t){const e=this._canvases.get(t);if(e)return e}createCanvas(t,e,s,i){const n=this._canvases.get(t);if(n)return n.initialize(e,s),n.geometry&&(n.geometry.scale=i),n;const r=this.createSpriteCanvas(t,e,s,i);return r?(this._canvases.set(t,r),r):void 0}createSpriteCanvas(t,e,s,i){return new T(this,t,e,s,i)}removeCanvas(t){const e=this._canvases.get(t);e&&(this._canvases.delete(t),e.dispose())}get objects(){return this._objects}get disposed(){return this._disposed}get roomObjectVariableAccurateZ(){return this._roomObjectVariableAccurateZ}set roomObjectVariableAccurateZ(t){this._roomObjectVariableAccurateZ=t}}class y{createRenderer(){return new O}}class C{constructor(t){t<0&&(t=0),this._reservedNumbers=[],this._freeNumbers=[];let e=0;for(;e<t;)this._freeNumbers.push(e),e++}dispose(){this._reservedNumbers=null,this._freeNumbers=null}_Str_19709(){if(this._freeNumbers.length>0){const t=this._freeNumbers.pop();return this._reservedNumbers.push(t),t}return-1}_Str_15187(t){const e=this._reservedNumbers.indexOf(t);e>=0&&(this._reservedNumbers.splice(e,1),this._freeNumbers.push(t))}}var A=s("Ays+"),M=s("mP1c"),w=s("2FAY"),D=s("9vQN"),N=s("JKJw"),U=s("Ns5P");let x=(()=>{class t{static isBuilderClubId(e){return e>=t.BUILDER_CLUB_FURNI_ID_BASE}}return t.BUILDER_CLUB_FURNI_ID_BASE=2147418112,t})();var L=s("ZWGQ"),P=s("G0tw"),F=s("Hs+C");let k=(()=>{class t extends a.a{}return t.DICE_OFF="ROFCAE_DICE_OFF",t.DICE_ACTIVATE="ROFCAE_DICE_ACTIVATE",t.USE_HABBOWHEEL="ROFCAE_USE_HABBOWHEEL",t.STICKIE="ROFCAE_STICKIE",t.ENTER_ONEWAYDOOR="ROFCAE_ENTER_ONEWAYDOOR",t.SOUND_MACHINE_INIT="ROFCAE_SOUND_MACHINE_INIT",t.SOUND_MACHINE_START="ROFCAE_SOUND_MACHINE_START",t.SOUND_MACHINE_STOP="ROFCAE_SOUND_MACHINE_STOP",t.SOUND_MACHINE_DISPOSE="ROFCAE_SOUND_MACHINE_DISPOSE",t.JUKEBOX_INIT="ROFCAE_JUKEBOX_INIT",t.JUKEBOX_START="ROFCAE_JUKEBOX_START",t.JUKEBOX_MACHINE_STOP="ROFCAE_JUKEBOX_MACHINE_STOP",t.JUKEBOX_DISPOSE="ROFCAE_JUKEBOX_DISPOSE",t.MOUSE_BUTTON="ROFCAE_MOUSE_BUTTON",t.MOUSE_ARROW="ROFCAE_MOUSE_ARROW",t})();var V=s("3r1x");class B extends V.a{constructor(t){super(t)}}let W=(()=>{class t extends B{constructor(t,e){super(t),this._targetLocation=e}get targetLocation(){return this._targetLocation}}return t.ROAME_MOVE_TO="ROAME_MOVE_TO",t})();var K=s("IxQr");class G{constructor(){this.id=0,this.data=null,this.image=null}getImage(){return this.image?this.image:this.data?K.a.generateImage(this.data):null}}class H extends c.a{constructor(){super(null,null)}}class j extends H{constructor(t,e){super(),this._itemType=t,this._itemName=e}get itemType(){return this._itemType}get itemName(){return this._itemName}}class z extends H{constructor(t=0){super(),this._numberOfWords=t}get numberOfWords(){return this._numberOfWords}}class Y extends H{constructor(t=0){super(),this._danceStyle=t}get danceStyle(){return this._danceStyle}}class q extends H{constructor(t,e=0){super(),this._effect=t,this._delayMilliseconds=e}get effect(){return this._effect}get delayMilliseconds(){return this._delayMilliseconds}}class Z extends H{constructor(t){super(),this._gainedExperience=t}get gainedExperience(){return this._gainedExperience}}class X extends H{constructor(t=0){super(),this._expressionType=t}get expressionType(){return this._expressionType}}class Q extends H{constructor(t,e=null,s=null,i=!1){super(),this._figure=t,this._gender=e,this._subType=s,this._isRiding=i}get figure(){return this._figure}get gender(){return this._gender}get subType(){return this._subType}get isRiding(){return this._isRiding}}class J extends H{constructor(t=0){super(),this._level=t}get level(){return this._level}}class $ extends H{constructor(t=0){super(),this._gesture=t}get gesture(){return this._gesture}}class tt extends H{constructor(t){super(),this._guideStatus=t}get guideStatus(){return this._guideStatus}}class et extends H{constructor(t=!1){super(),this._isMuted=t}get isMuted(){return this._isMuted}}class st extends H{}class it extends H{constructor(t){super(),this._gesture=t}get gesture(){return this._gesture}}class nt extends H{constructor(t){super(),this._value=t}get value(){return this._value}}class rt extends H{constructor(t){super(),this._isPlayingGame=t}get isPlayingGame(){return this._isPlayingGame}}class at extends H{constructor(t,e=""){super(),this._postureType=t,this._parameter=e}get postureType(){return this._postureType}get parameter(){return this._parameter}}class ot extends H{constructor(t=0){super(),this._signType=t}get signType(){return this._signType}}class ct extends H{constructor(t=!1){super(),this._isSleeping=t}get isSleeping(){return this._isSleeping}}class ht extends H{constructor(t=!1){super(),this._isTyping=t}get isTyping(){return this._isTyping}}class lt extends c.a{constructor(t,e,s,i=!1){super(t,s),this._targetLocation=e,this._isSlide=i}get targetLocation(){return this._targetLocation?this._targetLocation:this.location}get isSlide(){return this._isSlide}}class ut extends lt{constructor(t,e,s,i,n,r){super(t,e,s),this._headDirection=i,this._canStandUp=n,this._baseY=r}get headDirection(){return this._headDirection}get canStandUp(){return this._canStandUp}get baseY(){return this._baseY}}class _t extends H{constructor(t){super(),this._itemType=t}get itemType(){return this._itemType}}class dt extends c.a{constructor(t,e,s=NaN){super(null,null),this._state=t,this._data=e,this._extra=s}get state(){return this._state}get data(){return this._data}get extra(){return this._extra}}let gt=(()=>{class t extends c.a{constructor(t,e){super(null,null),this._badgeId=t,this._assetName=e}get badgeId(){return this._badgeId}get assetName(){return this._assetName}}return t.BADGE_LOADED="ROGBUM_BADGE_LOADED",t})();class mt extends c.a{constructor(t,e,s){super(t,e),this._height=s}get height(){return this._height}}class pt extends c.a{constructor(t){super(null,null),this._data=t}get data(){return this._data}}class ft extends c.a{constructor(t,e){super(null,null),this._numberKey=t,this._numberValue=e}get numberKey(){return this._numberKey}get numberValue(){return this._numberValue}}let Et=(()=>{class t extends c.a{constructor(t,e,s,i){super(null,null),this._type=t,this._color=e,this._light=s,this._backgroundOnly=i}get type(){return this._type}get color(){return this._color}get light(){return this._light}get backgroundOnly(){return this._backgroundOnly}}return t.BACKGROUND_COLOR="RORCUM_BACKGROUND_COLOR",t})(),St=(()=>{class t extends c.a{constructor(t,e,s=0,i=0,n=0,r=0){super(null,null),this._type=t,this._id=e,this._x=s,this._y=i,this._width=n,this._height=r}get type(){return this._type}get id(){return this._id}get x(){return this._x}get y(){return this._y}get width(){return this._width}get height(){return this._height}}return t.ADD="ORPFHUM_ADD",t.REMOVE="ORPFHUM_REMOVE",t})(),vt=(()=>{class t extends c.a{constructor(t,e,s=null,i=null,n="window"){super(null,null),this._type=t,this._maskId=e,this._maskType=s,this._maskLocation=i?new m.a(i.x,i.y,i.z):null,this._maskCategory=n}get type(){return this._type}get maskId(){return this._maskId}get maskType(){return this._maskType}get maskLocation(){return this._maskLocation}get maskCategory(){return this._maskCategory}}return t.ADD_MASK="RORMUM_ADD_MASK",t._Str_10260="RORMUM_ADD_MASK",t.DOOR="door",t.WINDOW="window",t.HOLE="hole",t})(),bt=(()=>{class t extends c.a{constructor(t,e){super(null,null),this._type=t,this._value=e}get type(){return this._type}get value(){return this._value}}return t.WALL_THICKNESS="RORPPUM_WALL_THICKNESS",t.FLOOR_THICKNESS="RORPVUM_FLOOR_THICKNESS",t})(),It=(()=>{class t extends c.a{constructor(t,e){super(null,null),this._type=t,this._visible=e}get type(){return this._type}get visible(){return this._visible}}return t.WALL_VISIBILITY="RORPVUM_WALL_VISIBILITY",t.FLOOR_VISIBILITY="RORPVUM_FLOOR_VISIBILITY",t})(),Rt=(()=>{class t extends c.a{constructor(t,e){super(null,null),this._type=t,this._value=e}get type(){return this._type}get value(){return this._value}}return t.ROOM_WALL_UPDATE="RORUM_ROOM_WALL_UPDATE",t.ROOM_FLOOR_UPDATE="RORUM_ROOM_FLOOR_UPDATE",t.ROOM_LANDSCAPE_UPDATE="RORUM_ROOM_LANDSCAPE_UPDATE",t})();var Tt=s("2L69"),Ot=s("v12S"),yt=s("HqZk"),Ct=s("38Mq"),At=s("XMGm"),Mt=s("IqYK"),wt=s("hTzv");let Dt=(()=>{class t{}return t._Str_16646=-1,t._Str_9735=128,t._Str_9268=256,t})(),Nt=(()=>{class t{constructor(){this._id=t.SPRITE_COUNTER++,this._name="",this._type="",this._spriteType=_.DEFAULT,this._texture=null,this._container=null,this._width=0,this._height=0,this._offsetX=0,this._offsetY=0,this._flipH=!1,this._flipV=!1,this._direction=0,this._alpha=255,this._blendMode=i.BLEND_MODES.NORMAL,this._color=16777215,this._relativeDepth=0,this._Str_8253=!1,this._Str_11397="",this._clickHandling=!1,this._visible=!0,this._tag="",this._posture=null,this._alphaTolerance=Dt._Str_9735,this._filters=[],this._updateCounter=0,this._updateContainer=!1}dispose(){this._texture=null,this._width=0,this._height=0}get id(){return this._id}set id(t){this._id=t}get name(){return this._name}set name(t){this._name!==t&&(this._name=t,this._updateCounter++)}get type(){return this._type}set type(t){this._type=t}get spriteType(){return this._spriteType}set spriteType(t){this._spriteType=t}get texture(){return this._texture}set texture(t){this._texture!==t&&(t&&(this._width=t.width,this._height=t.height),this._texture=t,this._updateCounter++)}get container(){return this._container}set container(t){this._container!==t&&(this.texture=i.Texture.EMPTY,t&&(this._width=t.width,this._height=t.height),this._container=t,this._updateCounter++,this._updateContainer=!0)}get width(){return this._width}get height(){return this._height}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX!==t&&(this._offsetX=t,this._updateCounter++)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY!==t&&(this._offsetY=t,this._updateCounter++)}get flipH(){return this._flipH}set flipH(t){this._flipH!==t&&(this._flipH=t,this._updateCounter++)}get flipV(){return this._flipV}set flipV(t){this._flipV!==t&&(this._flipV=t,this._updateCounter++)}get direction(){return this._direction}set direction(t){this._direction=t}get alpha(){return this._alpha}set alpha(t){this._alpha!==(t&=255)&&(this._alpha=t,this._updateCounter++)}get blendMode(){return this._blendMode}set blendMode(t){this._blendMode!==t&&(this._blendMode=t,this._updateCounter++)}get color(){return this._color}set color(t){this._color!==(t&=16777215)&&(this._color=t,this._updateCounter++)}get relativeDepth(){return this._relativeDepth}set relativeDepth(t){this._relativeDepth!==t&&(this._relativeDepth=t,this._updateCounter++)}get _Str_4593(){return this._Str_8253}set _Str_4593(t){t!==this._Str_8253&&(this._Str_8253=t,this._updateCounter++)}get _Str_3582(){return this._Str_11397}set _Str_3582(t){this._Str_11397=t}get clickHandling(){return this._clickHandling}set clickHandling(t){this._clickHandling=t}get visible(){return this._visible}set visible(t){this._visible!==t&&(this._visible=t,this._updateCounter++)}get tag(){return this._tag}set tag(t){this._tag!==t&&(this._tag=t,this._updateCounter++)}get posture(){return this._posture}set posture(t){this._posture!==t&&(this._posture=t,this._updateCounter++)}get alphaTolerance(){return this._alphaTolerance}set alphaTolerance(t){this._alphaTolerance!==t&&(this._alphaTolerance=t,this._updateCounter++)}get filters(){return this._filters}set filters(t){this._filters=t,this._updateCounter++}get updateCounter(){return this._updateCounter}get updateContainer(){return this._updateContainer}set updateContainer(t){this._updateContainer=t}}return t.SPRITE_COUNTER=0,t})(),Ut=(()=>{class t{constructor(){this._id=t.VISUALIZATION_COUNTER++,this._object=null,this._asset=null,this._sprites=[],this._scale=-1,this._updateObjectCounter=-1,this._updateModelCounter=-1,this._updateSpriteCounter=-1}initialize(t){return!1}update(t,e,s,i){}reset(){this._scale=-1}dispose(){if(this._sprites){for(;this._sprites.length;){const t=this._sprites[0];t&&t.dispose(),this._sprites.pop()}this._sprites=null}this._object=null,this._asset=null}getSprite(t){return t>=0&&t<this._sprites.length?this._sprites[t]:null}getSpriteList(){return null}createSprite(){return this.createSpriteAtIndex(this._sprites.length)}createSpriteAtIndex(t){const e=new Nt;return t>=this._sprites.length?this._sprites.push(e):this._sprites.splice(t,0,e),e}setSpriteCount(t){for(;this._sprites.length>t;){const t=this._sprites[this._sprites.length-1];t&&t.dispose(),this._sprites.pop()}for(;this._sprites.length<t;)this._sprites.push(new Nt)}get image(){return this.getImage(0,-1)}getImage(t,e){const s=this.getBoundingRectangle();if(s.width*s.height==0)return null;const n=this.totalSprites,r=[];let a=0;for(;a<n;){const t=this.getSprite(a);t&&t.visible&&t.texture&&r.push(t),a++}r.sort((t,e)=>e.relativeDepth-t.relativeDepth);const o=new i.Container;for(a=0;a<r.length;){const t=r[a],e=t.texture;if(e){const s=i.Sprite.from(e);s.alpha=t.alpha/255,s.tint=t.color,s.x=t.offsetX,s.y=t.offsetY,s.blendMode=t.blendMode,s.filters=t.filters,t.flipH&&(s.scale.x=-1),t.flipV&&(s.scale.y=-1),o.addChild(s)}a++}return K.a.generateTexture(o)||null}getBoundingRectangle(){const t=this.totalSprites,e=new i.Rectangle;let s=0;for(;s<t;){const t=this.getSprite(s);if(t&&t.texture&&t.visible){const n=new i.Point(t.flipH?-t.width+t.offsetX:t.offsetX,t.flipV?-t.height+t.offsetY:t.offsetY);0===s?(e.x=n.x,e.y=n.y,e.width=t.width,e.height=t.height):(n.x<e.x&&(e.x=n.x),n.y<e.y&&(e.y=n.y),n.x+t.width>e.right&&(e.width=n.x+t.width-e.x),n.y+t.height>e.bottom&&(e.height=n.y+t.height-e.y))}s++}return e}get instanceId(){return this._id}get object(){return this._object}set object(t){this._object=t}get asset(){return this._asset}set asset(t){this._asset&&this._asset.removeReference(),this._asset=t,this._asset&&this._asset.addReference()}get sprites(){return this._sprites}get totalSprites(){return this._sprites.length}get updateObjectCounter(){return this._updateObjectCounter}set updateObjectCounter(t){this._updateObjectCounter=t}get updateModelCounter(){return this._updateModelCounter}set updateModelCounter(t){this._updateModelCounter=t}get updateSpriteCounter(){return this._updateSpriteCounter}set updateSpriteCounter(t){this._updateSpriteCounter=t}get spriteCount(){return this._sprites.length}}return t.VISUALIZATION_COUNTER=0,t})();var xt=s("/PsI"),Lt=s("Kx+W");class Pt{constructor(t,e,s){this._id=t,this._type=e,this._visualization=s}dispose(){this._visualization=null}update(t,e){}animate(t){return!1}get id(){return this._id}get type(){return this._type}get visualization(){return this._visualization}}let Ft=(()=>{class t extends Pt{constructor(t,e,s){super(t,e,s),this._asset=null,this._startTime=h.a.instance.time,this._delta=0,this._offsetY=0,this._scale=0,this._state=0}update(t,e){if(!t)return;this._scale=e;let s=64,i=0;if(e<48?(this._asset=this.visualization.getAvatarRenderAsset("user_blowkiss_small"),i=90===this.visualization.angle||270===this.visualization.angle?0:135===this.visualization.angle||180===this.visualization.angle||225===this.visualization.angle?6:-6,this._offsetY=-38,s=32):(this._asset=this.visualization.getAvatarRenderAsset("user_blowkiss"),i=90===this.visualization.angle||270===this.visualization.angle?-3:135===this.visualization.angle||180===this.visualization.angle||225===this.visualization.angle?22:-30,this._offsetY=-70),"sit"===this.visualization.posture?this._offsetY+=s/2:"lay"===this.visualization.posture&&(this._offsetY+=s),this._asset){t.texture=this._asset,t.offsetX=i,t.offsetY=this._offsetY,t.relativeDepth=-.02,t.alpha=0;const e=this._delta;this.animate(t),this._delta=e}}animate(e){if(!e)return!1;if(this._asset&&(e.texture=this._asset),this._state===t.STATE_DELAY)return!(h.a.instance.time-this._startTime<t.DELAY_BEFORE_ANIMATION||(this._state=t.STATE_FADE_IN,e.alpha=0,e.visible=!0,this._delta=0,0));if(this._state===t.STATE_FADE_IN)return this._delta+=.1,e.offsetY=this._offsetY,e.alpha=255*Math.pow(this._delta,.9),this._delta>=1&&(e.alpha=255,this._delta=0,this._state=t.STATE_FLOAT),!0;if(this._state===t.STATE_FLOAT){const s=Math.pow(this._delta,.9);return this._delta+=.05,e.offsetY=this._offsetY+(this._delta<1?s:1)*(this._scale<48?-30:-40),e.alpha=255*(1-s),e.alpha<=0&&(e.visible=!1,this._state=t.STATE_COMPLETE),!0}return!1}}return t.DELAY_BEFORE_ANIMATION=300,t.STATE_DELAY=0,t.STATE_FADE_IN=1,t.STATE_FLOAT=2,t.STATE_COMPLETE=3,t})(),kt=(()=>{class t{static getExpressionAddition(t,e,s){switch(e){case this.BLOW:return new Ft(t,this.BLOW,s);default:return new Pt(t,e,s)}}}return t.WAVE=1,t.BLOW=2,t.LAUGH=3,t.CRY=4,t.IDLE=5,t})(),Vt=(()=>{class t{constructor(t,e){this._id=t,this._visualization=e,this._asset=null,this._startTime=h.a.instance.time,this._offsetY=0,this._scale=0,this._state=0}dispose(){this._visualization=null,this._asset=null}getSpriteAssetName(t){let e="left";return 135!==this._visualization.angle&&180!==this._visualization.angle&&225!==this._visualization.angle&&270!==this._visualization.angle||(e="right"),"user_idle_"+e+"_"+t+(this._scale<48?"_small":"")}update(e,s){if(!e)return;this._scale=s,this._asset=this._visualization.getAvatarRenderAsset(this.getSpriteAssetName(this._state===t.STATE_FRAME_A?1:2));let i=64,n=0;s<48?(n=135===this._visualization.angle||180===this._visualization.angle||225===this._visualization.angle||270===this._visualization.angle?10:-16,this._offsetY=-38,i=32):(n=135===this._visualization.angle||180===this._visualization.angle||225===this._visualization.angle||270===this._visualization.angle?22:-30,this._offsetY=-70),"sit"===this._visualization.posture?this._offsetY+=i/2:"lay"===this._visualization.posture&&(this._offsetY+=i-.3*i),this._asset&&(e.texture=this._asset,e.offsetX=n,e.offsetY=this._offsetY,e.relativeDepth=-.02,e.alpha=0)}animate(e){if(!e)return!1;const s=h.a.instance.time;return this._state===t.STATE_DELAY&&s-this._startTime>=t.DELAY_BEFORE_ANIMATION&&(this._state=t.STATE_FRAME_A,this._startTime=s,this._asset=this._visualization.getAvatarRenderAsset(this.getSpriteAssetName(1))),this._state===t.STATE_FRAME_A&&s-this._startTime>=t.DELAY_PER_FRAME&&(this._state=t.STATE_FRAME_B,this._startTime=s,this._asset=this._visualization.getAvatarRenderAsset(this.getSpriteAssetName(2))),this._state===t.STATE_FRAME_B&&s-this._startTime>=t.DELAY_PER_FRAME&&(this._state=t.STATE_FRAME_A,this._startTime=s,this._asset=this._visualization.getAvatarRenderAsset(this.getSpriteAssetName(1))),this._asset?(e.texture=this._asset,e.alpha=255,e.visible=!0):e.visible=!1,!1}get id(){return this._id}}return t.DELAY_BEFORE_ANIMATION=2e3,t.DELAY_PER_FRAME=2e3,t.STATE_DELAY=0,t.STATE_FRAME_A=1,t.STATE_FRAME_B=2,t})();class Bt{constructor(t,e){this._id=t,this._visualization=e,this._asset=null}dispose(){this._visualization=null,this._asset=null}update(t,e){if(!t)return;let s=64,i=0,n=0;e<48?(this._asset=this._visualization.getAvatarRenderAsset("user_muted_small"),s=32,i=-12,n=-66):(this._asset=this._visualization.getAvatarRenderAsset("user_muted"),i=-15,n=-110),"sit"===this._visualization.posture?n+=s/2:"lay"===this._visualization.posture&&(n+=e),this._asset?(t.visible=!0,t.texture=this._asset,t.offsetX=i,t.offsetY=n,t.relativeDepth=-.02):t.visible=!1}animate(t){return this._asset&&t&&(t.texture=this._asset),!1}get id(){return this._id}}class Wt{constructor(t,e,s){this._id=t,this._visualization=s,this._asset=null,this._scale=0,this._number=e,this._numberValueFadeDirection=0,this._numberValueMoving=!1,this._numberValueMoveCounter=0}dispose(){this._visualization=null,this._asset=null}update(t,e){if(!t)return;this._scale=e;let s=64,i=0,n=0;this._number>0?(e<48?(this._asset=this._visualization.getAvatarRenderAsset("number_"+this._number+"_small"),s=32,i=-6,n=-52):(this._asset=this._visualization.getAvatarRenderAsset("number_"+this._number),i=-8,n=-105),"sit"===this._visualization.posture?n+=s/2:"lay"===this._visualization.posture&&(n+=e),this._asset?(t.visible=!0,t.texture=this._asset,t.offsetX=i,t.offsetY=n,t.relativeDepth=-.01,t.alpha=0,this._numberValueFadeDirection=1,this._numberValueMoving=!0,this._numberValueMoveCounter=0):t.visible=!1):t.visible&&(this._numberValueFadeDirection=-1)}animate(t){if(!t)return!1;this._asset&&(t.texture=this._asset);let e=t.alpha,s=!1;if(this._numberValueMoving){if(this._numberValueMoveCounter++,this._numberValueMoveCounter<10)return!1;if(this._numberValueFadeDirection<0)t.offsetY-=this._scale<48?2:4;else{let e=4;this._scale<48&&(e=8),this._numberValueMoveCounter%e||(t.offsetY--,s=!0)}}return this._numberValueFadeDirection>0?(e<255&&(e+=32),e>=255&&(e=255,this._numberValueFadeDirection=0),t.alpha=e,!0):this._numberValueFadeDirection<0?(e>=0&&(e-=32),e<=0&&(this._numberValueFadeDirection=0,this._numberValueMoving=!1,e=0,t.visible=!1),t.alpha=e,!0):s}get id(){return this._id}}class Kt{constructor(t,e){this._id=t,this._visualization=e,this._asset=null,this._relativeDepth=0}dispose(){this._visualization=null,this._asset=null}update(t,e){if(!t)return;t.visible=!0,t.relativeDepth=this._relativeDepth,t.alpha=255;let s=64,i=0,n=0;e<48?(this._asset=this._visualization.getAvatarRenderAsset("user_typing_small"),i=3,n=-42,s=32):(this._asset=this._visualization.getAvatarRenderAsset("user_typing"),i=14,n=-83),"sit"===this._visualization.posture?n+=s/2:"lay"===this._visualization.posture&&(n+=e),this._asset&&(t.texture=this._asset,t.offsetX=i,t.offsetY=n,t.relativeDepth=-.02)}animate(t){return this._asset&&t&&(t.texture=this._asset),!1}get id(){return this._id}get relativeDepth(){return this._relativeDepth}set relativeDepth(t){this._relativeDepth=t}}var Gt=s("Xr/m"),Ht=s("uEox");class jt extends Gt.a{constructor(){super()}initialize(t){return!0}onDispose(){this._avatarRenderer=null}createAvatarImage(t,e,s=null,i=null,n=null){let r=null;return r=this._avatarRenderer.createAvatarImage(t,e>48?Ht.a.LARGE:Ht.a.SMALL,s,i,n),r}getAvatarRendererAsset(t){return this._avatarRenderer?this._avatarRenderer.assets.getTexture(t):null}get avatarManager(){return this._avatarRenderer}set avatarManager(t){this._avatarRenderer=t}get layerCount(){return 0}}let zt=(()=>{class t extends Ut{constructor(){super(),this._data=null,this._avatarImage=null,this._cachedAvatars=new wt.a,this._cachedAvatarEffects=new wt.a,this._shadow=null,this._lastUpdate=-1e3,this._disposed=!1,this._figure=null,this._gender=null,this._direction=-1,this._headDirection=-1,this._posture="",this._postureParameter="",this._canStandUp=!1,this._postureOffset=0,this._verticalOffset=0,this._angle=-1,this._headAngle=-1,this._talk=!1,this._expression=0,this._sleep=!1,this._blink=!1,this._gesture=0,this._sign=-1,this._highlightEnabled=!1,this._highlight=!1,this._dance=0,this._effect=0,this._carryObject=0,this._useObject=0,this._ownUser=!1,this._Str_8935=!1,this._Str_17860=!1,this._Str_1222=!1,this._Str_16697=2,this._Str_12697=0,this._Str_14276=0,this._isAvatarReady=!1,this._needsUpdate=!1,this._geometryUpdateCounter=-1,this._additions=new Map}initialize(e){return e instanceof jt&&(this._data=e,this.setSpriteCount(t._Str_11587),super.initialize(e),!0)}dispose(){this._disposed||(super.dispose(),this._avatarImage&&this._avatarImage.dispose(),this._shadow=null,this._disposed=!0)}update(e,s,n,r){if(!this.object||!e||!this._data)return;if(s<this._lastUpdate+t.UPDATE_TIME_INCREASER)return;this._lastUpdate+=t.UPDATE_TIME_INCREASER,this._lastUpdate+t.UPDATE_TIME_INCREASER<s&&(this._lastUpdate=s-t.UPDATE_TIME_INCREASER);const a=e.scale,o=this._effect;let c=!1,h=!1,l=!1,u=!1;const d=this.updateModel(this.object.model,a);if(d||a!==this._scale||!this._avatarImage){if(a!==this._scale&&(c=!0,this.updateScale(a)),o!==this._effect&&(h=!0),c||!this._avatarImage||h){if(this._avatarImage=this.createAvatarImage(a,this._effect),!this._avatarImage)return;l=!0;const e=this.getSprite(t.AVATAR_LAYER_ID);e&&this._avatarImage&&this._avatarImage.isPlaceholder()?e.alpha=150:e&&(e.alpha=255)}if(!this._avatarImage)return;if(h&&this._avatarImage.animationHasResetOnToggle&&this._avatarImage.resetAnimationFrameCounter(),this.updateShadow(a),u=this.updateObject(this.object,e,n,!0),this.processActionsForAvatar(this._avatarImage),this._additions){let t=this._Str_16697;for(const e of this._additions.values())e.update(this.getSprite(t++),a)}this._scale=a}else u=this.updateObject(this.object,e,n);if(this._additions){let t=this._Str_16697;for(const e of this._additions.values())e.animate(this.getSprite(t++))&&this.updateSpriteCounter++}const g=u||d||c,m=(this._Str_1222||this._Str_12697>0)&&n;if(g&&(this._Str_12697=t._Str_14491),g||m){if(this.updateSpriteCounter++,this._Str_12697--,this._Str_14276--,!(this._Str_14276<=0||c||d||l))return;this._avatarImage.updateAnimationByFrames(1),this._Str_14276=t._Str_14491;let e=this._avatarImage.getCanvasOffsets();(!e||e.length<3)&&(e=t._Str_18338);const s=this.getSprite(t._Str_9540);if(s){const i=1===this.object.model.getValue(At.a.FIGURE_HIGHLIGHT_ENABLE)&&1===this.object.model.getValue(At.a.FIGURE_HIGHLIGHT),n=this._avatarImage.getImage(Lt.a.FULL,i);n&&(s.texture=n,i||(s.filters=[])),s.texture&&(s.offsetX=-1*a/2+e[0]-(s.texture.width-a)/2,s.offsetY=a/4-s.texture.height+e[1]+this._postureOffset),s.relativeDepth=this._Str_8935?this._Str_17860?-.5:t._Str_9235+e[2]:t._Str_11358+e[2],this._ownUser?(s.relativeDepth-=t._Str_17708,s.spriteType=_._Str_10494):s.spriteType=_._Str_11629}const n=this.getAddition(t.TYPING_BUBBLE_ID);n&&(n.relativeDepth=this._Str_8935?t._Str_9235-.01+e[2]:t._Str_11358-.01+e[2]),this._Str_1222=this._avatarImage.isAnimating();let r=t._Str_11587;const o=this._avatarImage.getDirection();for(const c of this._avatarImage.getSprites())if(c.id===t.AVATAR){const e=this.getSprite(t._Str_9540);if(e){const t=this._avatarImage.getLayerData(c);let s=c._Str_809(o),i=c._Str_739(o);t&&(s+=t.dx,i+=t.dy),a<48&&(s/=2,i/=2),this._canStandUp||(e.offsetX+=s,e.offsetY+=i)}}else{const e=this.getSprite(r);if(e){e.alphaTolerance=Dt._Str_9268,e.visible=!0;const s=this._avatarImage.getLayerData(c);let n=0,r=c._Str_809(o),h=c._Str_739(o);const l=c._Str_839(o);let u=0;c._Str_949&&(u=o),s&&(n=s._Str_891,r+=s.dx,h+=s.dy,u+=s.dd),a<48&&(r/=2,h/=2),u<0?u+=8:u>7&&(u-=8);const _=this._avatarImage.getScale()+"_"+c.member+"_"+u+"_"+n,d=this._avatarImage.getAsset(_);if(!d)continue;e.texture=d.texture,e.offsetX=d.offsetX-a/2+r,e.offsetY=d.offsetY+h,e.flipH=d.flipH,e.offsetY+=c._Str_767?this._verticalOffset*a/(2*t._Str_12370):this._postureOffset,e.relativeDepth=this._Str_8935?t._Str_9235-.001*this.totalSprites*l:t._Str_11358-.001*this.totalSprites*l,e.blendMode=33===c.ink?i.BLEND_MODES.ADD:i.BLEND_MODES.NORMAL}r++}}}createAvatarImage(e,s){let i=null,n="avatarImage"+e.toString();if(s?(n+="-"+s,i=this._cachedAvatarEffects.getValue(n)):i=this._cachedAvatars.getValue(n),!i&&(i=this._data.createAvatarImage(this._figure,e,this._gender,this,this),i))if(s){if(this._cachedAvatarEffects.length>=t.MAX_EFFECT_CACHE){const t=this._cachedAvatarEffects.remove(this._cachedAvatarEffects.getKey(0));t&&t.dispose()}this._cachedAvatarEffects.add(n,i)}else this._cachedAvatars.add(n,i);return i}updateObject(t,e,s,i=!1){if(!i&&this.updateObjectCounter===t.updateCounter&&this._geometryUpdateCounter===e.updateId)return!1;let n=t.getDirection().x-e.direction.x,r=this._headDirection-e.direction.x;return"float"===this._posture&&(r=n),n=(n%360+360)%360,r=(r%360+360)%360,"sit"===this._posture&&this._canStandUp&&(n-=n%90-45,r-=r%90-45),(n!==this._angle||i)&&(s=!0,this._angle=n,n-=112.5,n=(n+360)%360,this._avatarImage.setDirectionAngle(Lt.a.FULL,n)),(r!==this._headAngle||i)&&(s=!0,this._headAngle=r,this._headAngle!==this._angle&&(r-=112.5,r=(r+360)%360,this._avatarImage.setDirectionAngle(Lt.a.HEAD,r))),this._geometryUpdateCounter=e.updateId,this.updateObjectCounter=this.object.updateCounter,s}updateModel(e,s){if(!e)return!1;if(this.updateModelCounter===e.updateCounter)return!1;let i=!1;const n=e.getValue(At.a.FIGURE_TALK)>0;n!==this._talk&&(this._talk=n,i=!0);const r=e.getValue(At.a.FIGURE_EXPRESSION);r!==this._expression&&(this._expression=r,i=!0);const a=e.getValue(At.a.FIGURE_SLEEP)>0;a!==this._sleep&&(this._sleep=a,i=!0);const o=e.getValue(At.a.FIGURE_BLINK)>0;o!==this._blink&&(this._blink=o,i=!0);const c=e.getValue(At.a.FIGURE_GESTURE)||0;c!==this._gesture&&(this._gesture=c,i=!0);const h=e.getValue(At.a.FIGURE_POSTURE);h!==this._posture&&(this._posture=h,i=!0);const l=e.getValue(At.a.FIGURE_POSTURE_PARAMETER);l!==this._postureParameter&&(this._postureParameter=l,i=!0);const u=e.getValue(At.a.FIGURE_CAN_STAND_UP);u!==this._canStandUp&&(this._canStandUp=u,i=!0);const _=e.getValue(At.a.FIGURE_VERTICAL_OFFSET)*t.OFFSET_MULTIPLIER;_!==this._verticalOffset&&(this._verticalOffset=_,i=!0);const d=e.getValue(At.a.FIGURE_DANCE)||0;d!==this._dance&&(this._dance=d,i=!0);const g=e.getValue(At.a.FIGURE_EFFECT)||0;g!==this._effect&&(this._effect=g,i=!0);const m=e.getValue(At.a.FIGURE_CARRY_OBJECT)||0;m!==this._carryObject&&(this._carryObject=m,i=!0);const p=e.getValue(At.a.FIGURE_USE_OBJECT)||0;p!==this._useObject&&(this._useObject=p,i=!0);const f=e.getValue(At.a.HEAD_DIRECTION);f!==this._headDirection&&(this._headDirection=f,i=!0),this._carryObject>0&&p>0?this._useObject!==this._carryObject&&(this._useObject=this._carryObject,i=!0):0!==this._useObject&&(this._useObject=0,i=!0);let E=this.getAddition(t.FLOATING_IDLE_Z_ID);this._sleep?(E||(E=this.addAddition(new Vt(t.FLOATING_IDLE_Z_ID,this))),i=!0):E&&this.removeAddition(t.FLOATING_IDLE_Z_ID);const S=e.getValue(At.a.FIGURE_IS_MUTED)>0;let v=this.getAddition(t.MUTED_BUBBLE_ID);if(S)v||(v=this.addAddition(new Bt(t.MUTED_BUBBLE_ID,this))),i=!0;else{v&&(this.removeAddition(t.MUTED_BUBBLE_ID),i=!0);const s=e.getValue(At.a.FIGURE_IS_TYPING)>0;let n=this.getAddition(t.TYPING_BUBBLE_ID);s?(n||(n=this.addAddition(new Kt(t.TYPING_BUBBLE_ID,this))),i=!0):n&&this.removeAddition(t.TYPING_BUBBLE_ID)}const b=e.getValue(At.a.FIGURE_NUMBER_VALUE);let I=this.getAddition(t.NUMBER_BUBBLE_ID);b>0?(I||(I=this.addAddition(new Wt(t.NUMBER_BUBBLE_ID,b,this))),i=!0):I&&this.removeAddition(t.NUMBER_BUBBLE_ID);let R=this.getAddition(t.EXPRESSION_ID);this._expression>0?R||(R=kt.getExpressionAddition(t.EXPRESSION_ID,this._expression,this),R&&this.addAddition(R)):R&&this.removeAddition(t.EXPRESSION_ID),this.updateScale(s);const T=e.getValue(At.a.GENDER);T!==this._gender&&(this._gender=T,i=!0),this.updateFigure(e.getValue(At.a.FIGURE))&&(i=!0);let O=e.getValue(At.a.FIGURE_SIGN);null===O&&(O=-1),this._sign!==O&&(this._sign=O,i=!0);const y=e.getValue(At.a.FIGURE_HIGHLIGHT_ENABLE)>0;if(y!==this._highlightEnabled&&(this._highlightEnabled=y,i=!0),this._highlightEnabled){const t=e.getValue(At.a.FIGURE_HIGHLIGHT)>0;t!==this._highlight&&(this._highlight=t,i=!0)}const C=e.getValue(At.a.OWN_USER)>0;return C!==this._ownUser&&(this._ownUser=C,i=!0),this.updateModelCounter=e.updateCounter,i}setDirection(t){this._direction!==t&&(this._direction=t,this._needsUpdate=!0)}updateScale(t){t<48&&(this._blink=!1),this._postureOffset="sit"===this._posture||"lay"===this._posture?t/2:0,this._Str_17860=!1,this._Str_8935=!1,"lay"===this._posture&&(this._Str_8935=!0,parseInt(this._postureParameter)<0&&(this._Str_17860=!0))}processActionsForAvatar(e){if(!e)return;if(e.initActionAppends(),e.appendAction(xt.a.POSTURE,this._posture,this._postureParameter),this._gesture>0&&this._avatarImage.appendAction(xt.a.GESTURE,xt.a.getGesture(this._gesture)),this._dance>0&&this._avatarImage.appendAction(xt.a.DANCE,this._dance),this._sign>-1&&this._avatarImage.appendAction(xt.a.SIGN,this._sign),this._carryObject>0&&this._avatarImage.appendAction(xt.a.CARRY_OBJECT,this._carryObject),this._useObject>0&&this._avatarImage.appendAction(xt.a.USE_OBJECT,this._useObject),this._talk&&this._avatarImage.appendAction(xt.a.TALK),(this._sleep||this._blink)&&this._avatarImage.appendAction(xt.a.SLEEP),this._expression>0){const t=xt.a.getExpression(this._expression);if(""!==t)switch(t){case xt.a.DANCE:this._avatarImage.appendAction(xt.a.DANCE,2);break;default:this._avatarImage.appendAction(t)}}this._effect>0&&this._avatarImage.appendAction(xt.a.EFFECT,this._effect),e.endActionAppends(),this._Str_1222=e.isAnimating();let s=t._Str_11587;for(const i of this._avatarImage.getSprites())i.id!==t.AVATAR&&s++;if(s!==this.totalSprites&&this.setSpriteCount(s),this._Str_16697=s,this._additions)for(const t of this._additions.values())this.createSprite()}updateFigure(t){return this._figure!==t&&(this._figure=t,this.clearAvatar(),!0)}resetFigure(t){this.clearAvatar()}resetEffect(t){this.clearAvatar()}clearAvatar(){for(const t of this._cachedAvatars.getValues())t&&t.dispose();for(const t of this._cachedAvatarEffects.getValues())t&&t.dispose();this._cachedAvatars.reset(),this._cachedAvatarEffects.reset(),this._avatarImage=null;const e=this.getSprite(t.AVATAR_LAYER_ID);e&&(e.texture=i.Texture.EMPTY,e.alpha=255)}getAddition(t){return this._additions&&this._additions.get(t)||null}addAddition(t){if(!this.getAddition(t.id))return this._additions.set(t.id,t),t}removeAddition(t){const e=this.getAddition(t);e&&(this._additions.delete(e.id),e.dispose())}updateShadow(e){this._shadow=null;const s=this.getSprite(t.SHADOW_LAYER_ID);if(!s)return;let i="mv"===this._posture||"std"===this._posture||"sit"===this._posture&&this._canStandUp;if(this._effect===t._Str_17502&&(i=!1),i){if(s.visible=!0,!this._shadow||e!==this._scale){let t=0,i=0;e<48?(s._Str_3582="sh_std_sd_1_0_0",this._shadow=this._avatarImage.getAsset(s._Str_3582),t=-8,i=this._canStandUp?6:-3):(s._Str_3582="h_std_sd_1_0_0",this._shadow=this._avatarImage.getAsset(s._Str_3582),t=-17,i=this._canStandUp?10:-7),this._shadow?(s.texture=this._shadow.texture,s.offsetX=t,s.offsetY=i,s.alpha=50,s.relativeDepth=1):s.visible=!1}}else this._shadow=null,s.visible=!1}getAvatarRenderAsset(t){const e=h.a.instance.getConfiguration("images.url")+"/additions/"+t+".png";return this._data?this._data.getAvatarRendererAsset(e):null}get direction(){return this._direction}get posture(){return this._posture}get angle(){return this._angle}get disposed(){return this._disposed}}return t.AVATAR="avatar",t.FLOATING_IDLE_Z_ID=1,t.TYPING_BUBBLE_ID=2,t.EXPRESSION_ID=3,t.NUMBER_BUBBLE_ID=4,t.MUTED_BUBBLE_ID=6,t.OWN_USER_ID=4,t.UPDATE_TIME_INCREASER=41,t.OFFSET_MULTIPLIER=1e3,t.AVATAR_LAYER_ID=0,t.SHADOW_LAYER_ID=1,t._Str_17502=97,t._Str_11587=2,t._Str_14491=2,t._Str_18338=[0,0,0],t.MAX_EFFECT_CACHE=2,t._Str_9540=0,t._Str_12370=1e3,t._Str_11358=-.01,t._Str_17708=.001,t._Str_9235=-.409,t})(),Yt=(()=>{class t{static allocate(e,s,i,n,r,a,o=-1,c=0){const h=t.POOL.length?t.POOL.pop():new t;return n<1&&(n=1),r<0&&(r=t.FRAME_REPEAT_FOREVER),h._id=e,h._x=s||0,h._y=i||0,h._repeats=n,h._frameRepeats=r,h._remainingFrameRepeats=r,h._isLastFrame=a,h._isRecycled=!1,o>=0?(h._activeSequence=o,h._activeSequenceOffset=c):(h._activeSequence=-1,h._activeSequenceOffset=0),h}get id(){return this._id>=0?this._id:-this._id*Math.random()}get x(){return this._x}get y(){return this._y}get repeats(){return this._repeats}get frameRepeats(){return this._frameRepeats}get isLastFrame(){return this._isLastFrame}get remainingFrameRepeats(){return this._frameRepeats<0?t.FRAME_REPEAT_FOREVER:this._remainingFrameRepeats}set remainingFrameRepeats(t){t<0&&(t=0),this._frameRepeats>0&&t>this._frameRepeats&&(t=this._frameRepeats),this._remainingFrameRepeats=t}get activeSequence(){return this._activeSequence}get activeSequenceOffset(){return this._activeSequenceOffset}recycle(){this._isRecycled||(this._isRecycled=!0,t.POOL.length<t.POOL_SIZE_LIMIT&&t.POOL.push(this))}}return t.FRAME_REPEAT_FOREVER=-1,t.SEQUENCE_NOT_DEFINED=-1,t.POOL_SIZE_LIMIT=3e3,t.POOL=[],t})();class qt{constructor(t,e,s,i,n,r){this._id=0,this._x=0,this._y=0,this._randomX=0,this._randomY=0,this._repeats=1,this._id=t,this._x=e,this._y=s,this._randomX=i,this._randomY=n,this._repeats=r}get id(){return this._id}hasDirectionalOffsets(){return!1}getX(t){return this._x}getY(t){return this._y}get x(){return this._x}get y(){return this._x}get randomX(){return this._randomX}get randomY(){return this._randomY}get repeats(){return this._repeats}}class Zt extends qt{constructor(t,e,s,i,n,r,a){super(t,e,s,i,n,a),this._directionalOffsets=r}hasDirectionalOffsets(){return null!==this._directionalOffsets}getX(t){return this._directionalOffsets?this._directionalOffsets.getXOffset(t,super.getX(t)):super.getX(t)}getY(t){return this._directionalOffsets?this._directionalOffsets.getYOffset(t,super.getY(t)):super.getY(t)}}class Xt{constructor(t,e){this._frames=[],this._frameIndexes=[],this._frameRepeats=[],this._isRandom=e,this._loopCount=t<1?1:t}get isRandom(){return this._isRandom}get frameCount(){return this._frameIndexes.length*this._loopCount}dispose(){this._frames=[]}initialize(){let t=this._frameIndexes.length-1,e=-1,s=1;for(;t>=0;)this._frameIndexes[t]===e?s++:(e=this._frameIndexes[t],s=1),this._frameRepeats[t]=s,t--}addFrame(t,e,s,i,n,r){let a=1;if(this._frames.length>0){const r=this._frames[this._frames.length-1];r.id!==t||r.hasDirectionalOffsets()||r.x!==e||r.y!==s||r.randomX!==i||0!==i||r.randomY!==n||0!==n||(a+=r.repeats,this._frames.pop())}const o=r?new Zt(t,e,s,i,n,r,a):new qt(t,e,s,i,n,a);this._frames.push(o),this._frameIndexes.push(this._frames.length-1),this._frameRepeats.push(1)}getFrame(t){return!this._frames.length||t<0||t>=this.frameCount?null:this._frames[this._frameIndexes[t%this._frameIndexes.length]]}getFrameIndex(t){return t<0||t>=this.frameCount?-1:(this._isRandom&&(t=Math.round(Math.random()*this._frameIndexes.length))===this._frameIndexes.length&&t--,t)}getRepeats(t){return t<0||t>=this.frameCount?0:this._frameRepeats[t%this._frameRepeats.length]}}class Qt{constructor(t,e,s){this._frameSequences=[],this._frameCount=-1,this._loopCount=t<0?0:t,this._frameRepeat=e<1?1:e,this._isRandom=s}get frameCount(){return this._frameCount<0&&this.calculateLength(),this._frameCount}dispose(){if(this._frameSequences&&this._frameSequences.length){for(const t of this._frameSequences)t&&t.dispose();this._frameSequences=[]}}addFrameSequence(t,e){const s=new Xt(t,e);return this._frameSequences.push(s),s}calculateLength(){this._frameCount=0;for(const t of this._frameSequences)t&&(this._frameCount+=t.frameCount)}getFrame(t,e){if(this._frameCount<1)return null;if(e/=this._frameRepeat,!this._isRandom){const s=Math.floor(e/this._frameCount);e=Math.floor(e%this._frameCount);let i=!1,n=null;(this._loopCount>0&&s>=this._loopCount||this._loopCount<=0&&1===this._frameCount)&&(e=this._frameCount-1,i=!0);let r=0,a=0;for(;a<this._frameSequences.length;){if(n=this._frameSequences[a],n){if(e<r+n.frameCount)break;r+=n.frameCount}a++}return this.getFrameFromSpecificSequence(t,n,a,e-r,i)}const s=Math.trunc(this._frameSequences.length*Math.random()),i=this._frameSequences[s];return i.frameCount<1?null:this.getFrameFromSpecificSequence(t,i,s,0,!1)}getFrameFromSequence(t,e,s,i){if(e<0||e>=this._frameSequences.length)return null;const n=this._frameSequences[e];return n?s>=n.frameCount?this.getFrame(t,i):this.getFrameFromSpecificSequence(t,n,e,s,!1):null}getFrameFromSpecificSequence(t,e,s,i,n){if(!e)return null;const r=e.getFrameIndex(i),a=e.getFrame(r);if(!a)return null;let o=a.getX(t),c=a.getY(t);const h=a.randomX,l=a.randomY;let u=a.repeats,_=!1;h&&(o=Math.trunc(o+h*Math.random())),l&&(c=Math.trunc(c+l*Math.random())),u>1&&(u=e.getRepeats(r));let d=this._frameRepeat*u;return n&&(d=Yt.FRAME_REPEAT_FOREVER),this._isRandom||e.isRandom||s===this._frameSequences.length-1&&i===e.frameCount-1&&(_=!0),Yt.allocate(a.id,o,c,u,d,_,s,i)}}class Jt{constructor(){this._offsetX=new Map,this._offsetY=new Map}getXOffset(t,e){const s=this._offsetX.get(t);return null==s?e:s}getYOffset(t,e){const s=this._offsetY.get(t);return null==s?e:s}setDirection(t,e,s){this._offsetX.set(t,e),this._offsetY.set(t,s)}}let $t=(()=>{class t{constructor(){this._layers=new Map,this._frameCount=-1,this._randomStart=!1,this._immediateChanges=null}static getTransitionToAnimationId(e){return t.TRANSITION_TO_ANIMATION_OFFSET+e}static getTransitionFromAnimationId(e){return t.TRANSITION_FROM_ANIMATION_OFFSET+e}static isTransitionToAnimation(e){return e>=t.TRANSITION_TO_ANIMATION_OFFSET&&e<t.TRANSITION_FROM_ANIMATION_OFFSET}static isTransitionFromAnimation(e){return e>=t.TRANSITION_FROM_ANIMATION_OFFSET}dispose(){for(const t of this._layers.values())t&&t.dispose();this._layers.clear(),this._immediateChanges=null}setImmediateChanges(t){this._immediateChanges=t}isImmediateChange(t){return!(!this._immediateChanges||-1===this._immediateChanges.indexOf(t))}getStartFrame(t){return this._randomStart?Math.random()*this._frameCount:0}initialize(t){if(t.randomStart&&(this._randomStart=!0),t.layers)for(const e in t.layers){const s=t.layers[e];if(!s)return!1;const i=parseInt(e);if(!this.addLayer(i,void 0!==s.loopCount?s.loopCount:1,void 0!==s.frameRepeat?s.frameRepeat:1,void 0!==s.random&&0!==s.random,s))return!1}return!0}addLayer(t,e,s,i,n){const r=new Qt(e,s,i);if(n.frameSequences)for(const o in n.frameSequences){const t=n.frameSequences[o];if(!t)continue;const e=r.addFrameSequence(void 0!==t.loopCount?t.loopCount:1,void 0!==t.random&&0!==t.random);if(t.frames)for(const s in t.frames){const i=t.frames[s];if(!i)return r.dispose(),!1;e.addFrame(i.id,i.x||0,i.y||0,i.randomX||0,i.randomY||0,this.readDirectionalOffsets(i))}e.initialize()}r.calculateLength(),this._layers.set(t,r);const a=r.frameCount;return a>this._frameCount&&(this._frameCount=a),!0}readDirectionalOffsets(t){let e=null;if(t&&t.offsets)for(const s in t.offsets){const i=t.offsets[s];i&&(e||(e=new Jt),e.setDirection(i.direction,i.x,i.y))}return e}getFrame(t,e,s){const i=this._layers.get(e);return i?i.getFrame(t,s):null}getFrameFromSequence(t,e,s,i,n){const r=this._layers.get(e);return r?r.getFrameFromSequence(t,s,i,n):null}}return t.TRANSITION_TO_ANIMATION_OFFSET=1e6,t.TRANSITION_FROM_ANIMATION_OFFSET=2e6,t.DEFAULT_FRAME_NUMBER=0,t})();class te{constructor(){this._animationId=-1,this._animationAfterTransitionId=0,this._animationOver=!1,this._frameCounter=0,this._frames=[],this._lastFramePlayed=[],this._animationPlayed=[],this._layerCount=0}get animationOver(){return this._animationOver}set animationOver(t){this._animationOver=t}get frameCounter(){return this._frameCounter}set frameCounter(t){this._frameCounter=t}get animationId(){return this._animationId}set animationId(t){t!==this._animationId&&(this._animationId=t,this.resetAnimationFrames(!1))}get animationAfterTransitionId(){return this._animationAfterTransitionId}set animationAfterTransitionId(t){this._animationAfterTransitionId=t}dispose(){this.recycleFrames(),this._frames=null,this._lastFramePlayed=null,this._animationPlayed=null}setLayerCount(t){this._layerCount=t,this.resetAnimationFrames()}resetAnimationFrames(t=!0){!t&&this._frames||(this.recycleFrames(),this._frames=[]),this._lastFramePlayed=[],this._animationPlayed=[],this._animationOver=!1,this._frameCounter=0;let e=0;for(;e<this._layerCount;){if(t||this._frames.length<=e)this._frames[e]=null;else{const t=this._frames[e];t&&(t.recycle(),this._frames[e]=Yt.allocate(t.id,t.x,t.y,t.repeats,0,t.isLastFrame))}this._lastFramePlayed[e]=!1,this._animationPlayed[e]=!1,e++}}recycleFrames(){if(this._frames&&this._frames.length)for(const t of this._frames)t&&t.recycle()}getFrame(t){return t<0||t>=this._layerCount?null:this._frames[t]}setFrame(t,e){if(t<0||t>=this._layerCount)return;const s=this._frames[t];s&&s.recycle(),this._frames[t]=e}getAnimationPlayed(t){return t<0||t>=this._layerCount||this._animationPlayed[t]}setAnimationPlayed(t,e){t<0||t>=this._layerCount||(this._animationPlayed[t]=e)}getLastFramePlayed(t){return t<0||t>=this._layerCount||this._lastFramePlayed[t]}setLastFramePlayed(t,e){t<0||t>=this._layerCount||(this._lastFramePlayed[t]=e)}}class ee{static hex2int(t){return parseInt(t,16)}static inkToBlendMode(t){return"ADD"==t||33==t?i.BLEND_MODES.ADD:i.BLEND_MODES.NORMAL}}let se=(()=>{class t{constructor(t){this._colors=[],this.createColors(t)}createColors(e){if(e)for(let s=0;s<e;s++)this._colors.push(t.DEFAULT_COLOR)}dispose(){this._colors=[]}getLayerColor(e){return this._colors[e]||t.DEFAULT_COLOR}setColorLayer(t,e){this._colors[t]&&(this._colors[t]=e)}}return t.DEFAULT_COLOR=16777215,t})(),ie=(()=>{class t{constructor(){this._tag=t.DEFAULT_TAG,this._ink=t.DEFAULT_INK,this._alpha=t.DEFAULT_ALPHA,this._ignoreMouse=t.DEFAULT_IGNORE_MOUSE,this._xOffset=t.DEFAULT_XOFFSET,this._yOffset=t.DEFAULT_YOFFSET,this._zOffset=t.DEFAULT_ZOFFSET}setFromLayer(t){t&&(this._tag=t.tag,this._ink=t.ink,this._alpha=t.alpha,this._ignoreMouse=t.ignoreMouse,this._xOffset=t.xOffset,this._yOffset=t.yOffset,this._zOffset=t.zOffset)}get tag(){return this._tag}set tag(t){this._tag=t}get ink(){return this._ink}set ink(t){this._ink=t}get alpha(){return this._alpha}set alpha(t){this._alpha=t}get ignoreMouse(){return this._ignoreMouse}set ignoreMouse(t){this._ignoreMouse=t}get xOffset(){return this._xOffset}set xOffset(t){this._xOffset=t}get yOffset(){return this._yOffset}set yOffset(t){this._yOffset=t}get zOffset(){return this._zOffset}set zOffset(t){this._zOffset=t}}return t.DEFAULT_COUNT=0,t.DEFAULT_DIRECTION=0,t.DEFAULT_TAG="",t.DEFAULT_INK=i.BLEND_MODES.NORMAL,t.DEFAULT_ALPHA=255,t.DEFAULT_IGNORE_MOUSE=!1,t.DEFAULT_XOFFSET=0,t.DEFAULT_YOFFSET=0,t.DEFAULT_ZOFFSET=0,t.ADD_INK=i.BLEND_MODES.ADD,t.SUBTRACT_INK=i.BLEND_MODES.NORMAL,t.DARKEN_INK=i.BLEND_MODES.NORMAL,t})(),ne=(()=>{class t{constructor(t){this._layers=[],this.createLayers(t)}createLayers(t){if(t)for(let e=0;e<t;e++)this._layers.push(new ie)}dispose(){this._layers=[]}setFromDirection(t){if(!t)return;const e=this.layerCount;if(e===t.layerCount)for(let s=0;s<e;s++){const e=this.getLayer(s),i=t.getLayer(s);e&&e.setFromLayer(i)}}getLayer(t){return this._layers[t]||null}getLayerTag(t){const e=this.getLayer(t);return e?e.tag:ie.DEFAULT_TAG}setLayerTag(t,e){const s=this.getLayer(t);s&&(s.tag=e)}getLayerInk(t){const e=this.getLayer(t);return e?e.ink:ie.DEFAULT_INK}setLayerInk(t,e){const s=this.getLayer(t);s&&(isNaN(e)||(s.ink=e))}getLayerAlpha(t){const e=this.getLayer(t);return e?e.alpha:ie.DEFAULT_ALPHA}setLayerAlpha(t,e){const s=this.getLayer(t);s&&(isNaN(e)||(s.alpha=e))}getLayerIgnoreMouse(t){const e=this.getLayer(t);return e?e.ignoreMouse:ie.DEFAULT_IGNORE_MOUSE}setLayerIgnoreMouse(t,e){const s=this.getLayer(t);s&&(s.ignoreMouse=e||!1)}getLayerXOffset(t){const e=this.getLayer(t);return e?e.xOffset:ie.DEFAULT_XOFFSET}setLayerXOffset(t,e){const s=this.getLayer(t);s&&(isNaN(e)||(s.xOffset=e))}getLayerYOffset(t){const e=this.getLayer(t);return e?e.yOffset:ie.DEFAULT_YOFFSET}setLayerYOffset(t,e){const s=this.getLayer(t);s&&(isNaN(e)||(s.yOffset=e))}getLayerZOffset(t){const e=this.getLayer(t);return e?e.zOffset:ie.DEFAULT_ZOFFSET}setLayerZOffset(t,e){const s=this.getLayer(t);s&&(isNaN(e)||(s.zOffset=e))}get layerCount(){return this._layers.length}}return t._Str_9471=-1,t})(),re=(()=>{class t{constructor(e,s){this._layerCount=e<0?0:e>t.MAX_LAYERS?t.MAX_LAYERS:e,this._angle=s<1?1:s>360?360:s,this._defaultDirection=new ne(this._layerCount),this._directions=new Map,this._colors=[],this._lastDirectionData=null,this._lastDirection=-1}dispose(){this._defaultDirection&&this._defaultDirection.dispose();for(const t of this._directions.values())t&&t.dispose();for(const t of this._colors)t&&t.dispose();this.reset()}reset(){this._defaultDirection=null,this._colors=[],this._lastDirectionData=null,this._lastDirection=-1,this._directions.clear()}processLayers(t){return!!t&&this.setDirectionLayers(this._defaultDirection,t)}processDirections(t){if(!t)return!1;for(const e in t){const s=t[e];if(!s)continue;const i=parseInt(e);if(this._directions.get(i))return!1;const n=new ne(this._layerCount);n.setFromDirection(this._defaultDirection),this.setDirectionLayers(n,s.layers),this._directions.set(i,n),this._lastDirectionData=null,this._lastDirection=-1}return!0}processColors(t){if(!t)return!1;for(const e in t){const s=t[e];if(!s)continue;const i=parseInt(e);if(this._colors[i])return!1;const n=new se(this._layerCount);for(const t in s.layers){const e=s.layers[t];if(!e)continue;const i=parseInt(t);n.setColorLayer(i,e.color)}this._colors[i]=n}return!0}setDirectionLayers(t,e){if(!t||!e)return!1;for(const s in e){const i=e[s];if(!i)continue;const n=parseInt(s);if(n<0||n>=this._layerCount)return!1;void 0!==i.ink&&t.setLayerInk(n,ee.inkToBlendMode(i.ink)),void 0!==i.tag&&t.setLayerTag(n,i.tag),void 0!==i.alpha&&t.setLayerAlpha(n,i.alpha),void 0!==i.ignoreMouse&&t.setLayerIgnoreMouse(n,i.ignoreMouse),void 0!==i.x&&t.setLayerXOffset(n,i.x),void 0!==i.y&&t.setLayerYOffset(n,i.y),void 0!==i.z&&t.setLayerZOffset(n,i.z/-1e3)}return!0}getValidDirection(t){if(this._directions.get(t))return t;t=(t%360+360)%360;let e=-1,s=-1;for(const i of this._directions.keys()){let n=(i*this._angle-t+360)%360;n>180&&(n=360-n),(n<e||e<0)&&(e=n,s=i)}return s>=0?Math.trunc(s):0}getDirectionData(t){if(t===this._lastDirection&&this._lastDirectionData)return this._lastDirectionData;let e=this._directions.get(t);return e||(e=this._defaultDirection),this._lastDirection=t,this._lastDirectionData=e,this._lastDirectionData}getLayerTag(t,e){const s=this.getDirectionData(t);return s?s.getLayerTag(e):ie.DEFAULT_TAG}getLayerInk(t,e){const s=this.getDirectionData(t);return s?s.getLayerInk(e):ie.DEFAULT_INK}getLayerAlpha(t,e){const s=this.getDirectionData(t);return s?s.getLayerAlpha(e):ie.DEFAULT_ALPHA}getLayerColor(t,e){const s=this._colors[e];return s?s.getLayerColor(t):se.DEFAULT_COLOR}getLayerIgnoreMouse(t,e){const s=this.getDirectionData(t);return s?s.getLayerIgnoreMouse(e):ie.DEFAULT_IGNORE_MOUSE}getLayerXOffset(t,e){const s=this.getDirectionData(t);return s?s.getLayerXOffset(e):ie.DEFAULT_XOFFSET}getLayerYOffset(t,e){const s=this.getDirectionData(t);return s?s.getLayerYOffset(e):ie.DEFAULT_YOFFSET}getLayerZOffset(t,e){const s=this.getDirectionData(t);return s?s.getLayerZOffset(e):ie.DEFAULT_ZOFFSET}get layerCount(){return this._layerCount}}return t.MAX_LAYERS=26,t})();class ae extends re{constructor(t,e){super(t,e),this._animations=new Map,this._animationIds=[]}dispose(){super.dispose();for(const t of this._animations.values())t&&t.dispose();this._animations.clear(),this._animationIds=[]}defineAnimations(t){if(!t)return!0;for(const e in t){const s=t[e];if(!s)return!1;let i=parseInt(e),n=!1;const r=s.transitionTo,a=s.transitionFrom;void 0!==r&&(i=$t.getTransitionToAnimationId(r),n=!0),void 0!==a&&(i=$t.getTransitionFromAnimationId(a),n=!0);const o=this.createAnimationData();if(!o.initialize(s))return o.dispose(),!1;const c=s.immediateChangeFrom;if(void 0!==c){const t=c.split(","),e=[];for(const s of t){const t=parseInt(s);-1===e.indexOf(t)&&e.push(t)}o.setImmediateChanges(e)}this._animations.set(i,o),n||this._animationIds.push(i)}return!0}createAnimationData(){return new $t}hasAnimation(t){return!!this._animations.get(t)}getAnimationCount(){return this._animationIds.length||0}getAnimationId(t){const e=this.getAnimationCount();return t<0||e<=0?0:this._animationIds[t%e]}isImmediateChange(t,e){const s=this._animations.get(t);return!!s&&s.isImmediateChange(e)}getStartFrame(t,e){const s=this._animations.get(t);return s?s.getStartFrame(e):0}getFrame(t,e,s,i){const n=this._animations.get(t);return n?n.getFrame(e,s,i):null}getFrameFromSequence(t,e,s,i,n,r){const a=this._animations.get(t);return a?a.getFrameFromSequence(e,s,i,n,r):null}}let oe=(()=>{class t{constructor(){this._type="",this._sizes=[],this._sizeDatas=new Map,this._lastSize=-1,this._lastSizeScale=-1,this._lastSizeData=null,this._lastSizeDataScale=-1}initialize(t){return this.reset(),!!t&&(this._type=t.name,!!this.defineVisualizations(t.visualizations)||(this.reset(),!1))}dispose(){if(this._sizeDatas&&this._sizeDatas.size){for(const t of this._sizeDatas.values())t&&t.dispose();this._sizeDatas=null}this._lastSizeData=null,this._sizes=null}reset(){if(this._type="",this._sizeDatas&&this._sizeDatas.size)for(const t of this._sizeDatas.values())t&&t.dispose();this._sizeDatas.clear(),this._sizes=[],this._lastSizeData=null,this._lastSizeDataScale=-1}createSizeData(t,e,s){return new re(e,s)}defineVisualizations(t){if(!t)return!1;for(const e in t){const s=t[e],i=s.layerCount,n=s.angle;let r=s.size;if(r<1&&(r=1),this._sizeDatas.get(r))return!1;const a=this.createSizeData(r,i,n);if(!a)return!1;for(const t in s)if(!this.processVisualElement(a,t,s[t]))return a.dispose(),!1;this._sizeDatas.set(r,a),this._sizes.push(r)}return this._sizes.sort(),!0}processVisualElement(t,e,s){if(!t||!e||!s)return!1;switch(e){case"layers":if(!t.processLayers(s))return!1;break;case"directions":if(!t.processDirections(s))return!1;break;case"colors":if(!t.processColors(s))return!1}return!0}getValidSize(t){if(t===this._lastSizeScale)return this._lastSize;const e=this.getSizeIndex(t);let s=-1;return e<this._sizes.length&&(s=this._sizes[e]),this._lastSizeScale=t,this._lastSize=s,s}getSizeIndex(t){if(t<=0)return 0;let e=0,s=1;for(;s<this._sizes.length;){if(this._sizes[s]>t){this._sizes[s]/t<t/this._sizes[s-1]&&(e=s);break}e=s,s++}return e}getSizeData(t){if(t===this._lastSizeDataScale)return this._lastSizeData;const e=this.getSizeIndex(t);return this._lastSizeData=e<this._sizes.length?this._sizeDatas.get(this._sizes[e]):null,this._lastSizeDataScale=t,this._lastSizeData}getLayerCount(t){const e=this.getSizeData(t);return e?e.layerCount:ie.DEFAULT_COUNT}getValidDirection(t,e){const s=this.getSizeData(t);return s?s.getValidDirection(e):ie.DEFAULT_DIRECTION}getLayerTag(t,e,s){const i=this.getSizeData(t);return i?i.getLayerTag(e,s):ie.DEFAULT_TAG}getLayerInk(t,e,s){const i=this.getSizeData(t);return i?i.getLayerInk(e,s):ie.DEFAULT_INK}getLayerAlpha(t,e,s){const i=this.getSizeData(t);return i?i.getLayerAlpha(e,s):ie.DEFAULT_ALPHA}getLayerColor(t,e,s){const i=this.getSizeData(t);return i?i.getLayerColor(e,s):se.DEFAULT_COLOR}getLayerIgnoreMouse(t,e,s){const i=this.getSizeData(t);return i?i.getLayerIgnoreMouse(e,s):ie.DEFAULT_IGNORE_MOUSE}getLayerXOffset(t,e,s){const i=this.getSizeData(t);return i?i.getLayerXOffset(e,s):ie.DEFAULT_XOFFSET}getLayerYOffset(t,e,s){const i=this.getSizeData(t);return i?i.getLayerYOffset(e,s):ie.DEFAULT_YOFFSET}getLayerZOffset(t,e,s){const i=this.getSizeData(t);return i?i.getLayerZOffset(e,s):ie.DEFAULT_ZOFFSET}get type(){return this._type}}return t.LAYER_LETTERS=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t})();class ce extends oe{createSizeData(t,e,s){return new ae(e,s)}processVisualElement(t,e,s){if(!t||!e||!s)return!1;switch(e){case"animations":if(!(t instanceof ae&&t.defineAnimations(s)))return!1;break;default:if(!super.processVisualElement(t,e,s))return!1}return!0}hasAnimation(t,e){const s=this.getSizeData(t);return s?s.hasAnimation(e):null}getAnimationCount(t){const e=this.getSizeData(t);return e?e.getAnimationCount():null}getAnimationId(t,e){const s=this.getSizeData(t);return s?s.getAnimationId(e):null}isImmediateChange(t,e,s){const i=this.getSizeData(t);return i?i.isImmediateChange(e,s):null}getStartFrame(t,e,s){const i=this.getSizeData(t);return i?i.getStartFrame(e,s):null}getFrame(t,e,s,i,n){const r=this.getSizeData(t);return r?r.getFrame(e,s,i,n):null}getFrameFromSequence(t,e,s,i,n,r,a){const o=this.getSizeData(t);return o?o.getFrameFromSequence(e,s,i,n,r,a):null}}let he=(()=>{class t extends Ut{constructor(){super(),this._data=null,this._type=null,this._direction=0,this._lastCameraAngle=NaN,this._selectedColor=0,this._furnitureLift=0,this._alphaMultiplier=1,this._alphaChanged=!1,this._clickUrl=null,this._cacheDirection=-1,this._cacheScale=0,this._cacheSize=-1,this._layerCount=0,this._shadowLayerIndex=-1,this._updatedLayers=[],this._assetNames=[],this._spriteTags=[],this._spriteInks=[],this._spriteAlphas=[],this._spriteColors=[],this._spriteMouseCaptures=[],this._spriteXOffsets=[],this._spriteYOffsets=[],this._spriteZOffsets=[],this._animationNumber=0}initialize(t){return this.reset(),t instanceof oe&&(this._type=t.type,this._data=t,!0)}dispose(){super.dispose(),this._data=null,this._updatedLayers=null,this._assetNames=null,this._spriteTags=null,this._spriteInks=null,this._spriteAlphas=null,this._spriteColors=null,this._spriteMouseCaptures=null,this._spriteXOffsets=null,this._spriteYOffsets=null,this._spriteZOffsets=null}reset(){super.reset(),this.setDirection(-1),this._data=null,this._updatedLayers=[],this._assetNames=[],this._spriteTags=[],this._spriteInks=[],this._spriteAlphas=[],this._spriteColors=[],this._spriteMouseCaptures=[],this._spriteXOffsets=[],this._spriteYOffsets=[],this._spriteZOffsets=[],this.setSpriteCount(0)}resetLayers(t,e){this._cacheDirection===e&&this._cacheScale===t||(this._updatedLayers=[],this._assetNames=[],this._spriteTags=[],this._spriteInks=[],this._spriteAlphas=[],this._spriteColors=[],this._spriteMouseCaptures=[],this._spriteXOffsets=[],this._spriteYOffsets=[],this._spriteZOffsets=[],this._cacheDirection=e,this._cacheScale=t,this._cacheSize=this.getValidSize(t),this.setLayerCount((this._data&&this._data.getLayerCount(t)||0)+this.getAdditionalLayerCount()))}update(t,e,s,i){if(!t)return;const n=t.scale;let r=!1;this.updateObject(n,t.direction.x)&&(r=!0),this.updateModel(n)&&(r=!0);let a=0;i?this._animationNumber=this._animationNumber|this.updateAnimation(n):(a=this.updateAnimation(n)|this._animationNumber,this._animationNumber=0),(r||0!==a)&&(this.updateSprites(n,r,a),this._scale=n,this.updateSpriteCounter++)}updateObject(t,e){if(!this.object)return!1;if(this.updateObjectCounter===this.object.updateCounter&&t===this._scale&&this._lastCameraAngle===e)return!1;let s=this.object.getDirection().x-(e+135);if(s=(s%360+360)%360,this._data){const e=this._data.getValidDirection(t,s);this.setDirection(e)}return this._lastCameraAngle=e,this._scale=t,this.updateObjectCounter=this.object.updateCounter,this.resetLayers(t,this._direction),!0}updateModel(t){const e=this.object&&this.object.model;if(!e)return!1;if(this.updateModelCounter===e.updateCounter)return!1;this._selectedColor=e.getValue(At.a.FURNITURE_COLOR),this._clickUrl=e.getValue(At.a.FURNITURE_AD_URL),this._furnitureLift=e.getValue(At.a.FURNITURE_LIFT_AMOUNT)||0;let s=e.getValue(At.a.FURNITURE_ALPHA_MULTIPLIER);return isNaN(s)&&(s=1),this._alphaMultiplier!==s&&(this._alphaMultiplier=s,this._alphaChanged=!0),this.updateModelCounter=e.updateCounter,!0}updateSprites(t,e,s){if(this._layerCount!==this.totalSprites&&this.setSpriteCount(this._layerCount),e){let e=this.totalSprites-1;for(;e>=0;)this.updateSprite(t,e),e--}else{let e=0;for(;s>0;)s&&this.updateSprite(t,e),e++,s>>=1}this._alphaChanged=!1}updateSprite(e,s){const i=this.getSpriteAssetName(e,s),n=this.getSprite(s);if(i&&n){const r=this.getAsset(i,s);if(r&&r.texture){n.visible=!0,n.type=this._type,n.texture=r.texture,n.flipH=r.flipH,n.flipV=r.flipV,n.direction=this._direction;let a=0;s!==this._shadowLayerIndex?(n.tag=this.getLayerTag(e,this._direction,s),n.alpha=this.getLayerAlpha(e,this._direction,s),n.color=this.getLayerColor(e,s,this._selectedColor),n.offsetX=r.offsetX+this.getLayerXOffset(e,this._direction,s),n.offsetY=r.offsetY+this.getLayerYOffset(e,this._direction,s),n.blendMode=this.getLayerInk(e,this._direction,s),n.alphaTolerance=this.getLayerIgnoreMouse(e,this._direction,s)?Dt._Str_9268:Dt._Str_9735,a=this.getLayerZOffset(e,this._direction,s),a-=.001*s):(n.offsetX=r.offsetX,n.offsetY=r.offsetY+this.getLayerYOffset(e,this._direction,s),n.alpha=48*this._alphaMultiplier,n.alphaTolerance=Dt._Str_9268,a=1),n.relativeDepth=a*t.DEPTH_MULTIPLIER,n.name=i,n._Str_3582=this.getLibraryAssetNameForSprite(r,n),n.posture=this.getPostureForAsset(e,r.source),n.clickHandling=!1}else this.resetSprite(n)}else n&&this.resetSprite(n)}getLibraryAssetNameForSprite(t,e){return t.source}getPostureForAssetFile(t,e){return null}resetSprite(t){t&&(t.texture=null,t.offsetX=0,t.offsetY=0,t.flipH=!1,t.flipV=!1,t.relativeDepth=0)}getSpriteAssetName(t,e){if(!this._data||e>=oe.LAYER_LETTERS.length)return"";let s=this._assetNames[e],i=this._updatedLayers[e];return s&&s.length||(s=this.cacheSpriteAssetName(t,e,!0),i=1!==this._cacheSize),i&&(s+=this.getFrameNumber(t,e)),s}cacheSpriteAssetName(t,e,s){const i=s?this._cacheSize:this.getValidSize(t);let n="";const r=1!==i;if(n=e!==this._shadowLayerIndex?oe.LAYER_LETTERS[e]||"":"sd",""===n)return null;const a=this._type+(r?"_"+i+"_"+n+"_"+this._direction+"_":"_icon_"+n);return s&&(this._assetNames[e]=a,this._updatedLayers[e]=r),a}getLayerTag(t,e,s){const i=this._spriteTags[s];if(void 0!==i)return i;if(!this._data)return ie.DEFAULT_TAG;const n=this._data.getLayerTag(t,e,s);return this._spriteTags[s]=n,n}getLayerInk(t,e,s){const i=this._spriteInks[s];if(void 0!==i)return i;if(!this._data)return ie.DEFAULT_INK;const n=this._data.getLayerInk(t,e,s);return this._spriteInks[s]=n,n}getLayerAlpha(t,e,s){if(!this._alphaChanged){const t=this._spriteAlphas[s];if(void 0!==t)return t}if(!this._data)return ie.DEFAULT_ALPHA;let i=this._data.getLayerAlpha(t,e,s);return null!==this._alphaMultiplier&&(i*=this._alphaMultiplier),this._spriteAlphas[s]=i,i}getLayerColor(t,e,s){const i=this._spriteColors[e];if(void 0!==i)return i;if(!this._data)return se.DEFAULT_COLOR;const n=this._data.getLayerColor(t,e,s);return this._spriteColors[e]=n,n}getLayerIgnoreMouse(t,e,s){const i=this._spriteMouseCaptures[s];if(void 0!==i)return i;if(!this._data)return ie.DEFAULT_IGNORE_MOUSE;const n=this._data.getLayerIgnoreMouse(t,e,s);return this._spriteMouseCaptures[s]=n,n}getLayerXOffset(t,e,s){const i=this._spriteXOffsets[s];if(void 0!==i)return i;if(!this._data)return ie.DEFAULT_XOFFSET;const n=this._data.getLayerXOffset(t,e,s);return this._spriteXOffsets[s]=n,n}getLayerYOffset(t,e,s){if(s===this._shadowLayerIndex)return Math.ceil(32*this._furnitureLift);const i=this._spriteYOffsets[s];if(void 0!==i)return i;if(!this._data)return ie.DEFAULT_YOFFSET;const n=this._data.getLayerYOffset(t,e,s);return this._spriteYOffsets[s]=n,n}getLayerZOffset(t,e,s){const i=this._spriteZOffsets[s];if(void 0!==i)return i;if(!this._data)return ie.DEFAULT_ZOFFSET;const n=this._data.getLayerZOffset(t,e,s);return this._spriteZOffsets[s]=n,n}getValidSize(t){return this._data?this._data.getValidSize(t):t}setLayerCount(t){this._layerCount=t,this._shadowLayerIndex=t-this.getAdditionalLayerCount()}setDirection(t){this._direction!==t&&(this._direction=t)}getAdditionalLayerCount(){return 1}updateAnimation(t){return 0}getFrameNumber(t,e){return 0}getPostureForAsset(t,e){return null}getAsset(t,e=-1){return this.asset?this.asset.getAsset(t):null}get direction(){return this._direction}}return t.DEPTH_MULTIPLIER=Math.sqrt(.5),t.TYPE=Mt.a.FURNITURE_STATIC,t})(),le=(()=>{class t extends he{constructor(){super(),this._state=-1,this._animationData=new te,this._animationScale=0,this._animationChangeTime=0,this._animatedLayerCount=0,this._directionChanged=!1}initialize(t){return t instanceof ce&&super.initialize(t)}dispose(){super.dispose(),this._animationData&&(this._animationData.dispose(),this._animationData=null)}get animatedLayerCount(){return this._animatedLayerCount}get animationId(){return this._animationData.animationId}getAnimationId(e){return this.animationId!==t.DEFAULT_ANIMATION_ID&&this._data.hasAnimation(this._animationScale,this.animationId)?this.animationId:t.DEFAULT_ANIMATION_ID}updateObject(t,e){if(super.updateObject(t,e)){const t=this.object.getState(0);return t!==this._state&&(this.setAnimation(t),this._state=t,this._animationChangeTime=this.object.model.getValue(At.a.FURNITURE_STATE_UPDATE_TIME)||0),!0}return!1}updateModel(t){if(super.updateModel(t)){if(this.usesAnimationResetting()){const t=this.object.model.getValue(At.a.FURNITURE_STATE_UPDATE_TIME);t>this._animationChangeTime&&(this._animationChangeTime=t,this.setAnimation(this._state))}const t=this.object.model.getValue(At.a.FURNITURE_AUTOMATIC_STATE_INDEX);if(!isNaN(t)){const e=this._data.getAnimationId(this._animationScale,t);this.setAnimation(e)}return!0}return!1}isPlayingTransition(t,e){return!(!$t.isTransitionFromAnimation(t.animationId)&&!$t.isTransitionToAnimation(t.animationId)||e!==t.animationAfterTransitionId||t.animationOver)}getCurrentState(t){const e=t.animationId;return $t.isTransitionFromAnimation(e)||$t.isTransitionToAnimation(e)?t.animationAfterTransitionId:e}setAnimation(t){this._data&&this.setSubAnimation(this._animationData,t,this._state>=0)}setSubAnimation(t,e,s=!0){const i=t.animationId;if(s){if(this.isPlayingTransition(t,e))return!1;const s=this.getCurrentState(t);if(e!==s){if(!this._data.isImmediateChange(this._animationScale,e,s)){let i=$t.getTransitionFromAnimationId(s);this._data.hasAnimation(this._animationScale,i)?(t.animationAfterTransitionId=e,e=i):(i=$t.getTransitionToAnimationId(e),this._data.hasAnimation(this._animationScale,i)&&(t.animationAfterTransitionId=e,e=i))}}else if($t.isTransitionFromAnimation(t.animationId)){const s=$t.getTransitionToAnimationId(e);this._data.hasAnimation(this._animationScale,s)&&(t.animationAfterTransitionId=e,e=s)}else if(!$t.isTransitionToAnimation(t.animationId)&&this.usesAnimationResetting()){const i=$t.getTransitionFromAnimationId(s);if(this._data.hasAnimation(this._animationScale,i))t.animationAfterTransitionId=e,e=i;else{const s=$t.getTransitionToAnimationId(e);this._data.hasAnimation(this._animationScale,s)&&(t.animationAfterTransitionId=e,e=s)}}}return i!==e&&(t.animationId=e,!0)}getLastFramePlayed(t){return this._animationData.getLastFramePlayed(t)}resetAllAnimationFrames(){this._animationData&&this._animationData.setLayerCount(this._animatedLayerCount)}updateAnimation(t){if(!this._data)return 0;t!==this._animationScale&&(this._animationScale=t,this._animatedLayerCount=this._data.getLayerCount(t),this.resetAllAnimationFrames());const e=this.updateAnimations(t);return this._directionChanged=!1,e}updateAnimations(t){if(this._animationData.animationOver&&!this._directionChanged)return 0;const e=this.updateFramesForAnimation(this._animationData,t);return this._animationData.animationOver&&($t.isTransitionFromAnimation(this._animationData.animationId)||$t.isTransitionToAnimation(this._animationData.animationId))&&(this.setAnimation(this._animationData.animationAfterTransitionId),this._animationData.animationOver=!1),e}updateFramesForAnimation(e,s){if(e.animationOver&&!this._directionChanged)return 0;const i=this.getAnimationId(e);let n=e.frameCounter;n||(n=this._data.getStartFrame(s,i,this._direction)),n+=t.FRAME_INCREASE_AMOUNT,e.frameCounter=n,e.animationOver=!0;let r=!1,a=this._animatedLayerCount-1,o=0,c=1<<this._animatedLayerCount-1;for(;a>=0;){let h=0;if(r=e.getAnimationPlayed(a),!r||this._directionChanged){let l=e.getLastFramePlayed(a),u=e.getFrame(a);u&&u.isLastFrame&&u.remainingFrameRepeats<=t.FRAME_INCREASE_AMOUNT&&(l=!0),(this._directionChanged||!u||u.remainingFrameRepeats>=0&&(u.remainingFrameRepeats=u.remainingFrameRepeats-t.FRAME_INCREASE_AMOUNT)<=0)&&(h=Yt.SEQUENCE_NOT_DEFINED,u&&(h=u.activeSequence),u=h===Yt.SEQUENCE_NOT_DEFINED?this._data.getFrame(s,i,this._direction,a,n):this._data.getFrameFromSequence(s,i,this._direction,a,h,u.activeSequenceOffset+u.repeats,n),e.setFrame(a,u),o|=c),u&&u.remainingFrameRepeats!=Yt.FRAME_REPEAT_FOREVER?e.animationOver=!1:(l=!0,r=!0),e.setLastFramePlayed(a,l),e.setAnimationPlayed(a,r)}c>>=1,a--}return o}getFrameNumber(t,e){const s=this._animationData.getFrame(e);return s?s.id:super.getFrameNumber(t,e)}getLayerXOffset(t,e,s){const i=super.getLayerXOffset(t,e,s),n=this._animationData.getFrame(s);return n?i+n.x:i}getLayerYOffset(t,e,s){const i=super.getLayerYOffset(t,e,s),n=this._animationData.getFrame(s);return n?i+n.y:i}usesAnimationResetting(){return!1}setDirection(t){this._direction!==t&&(super.setDirection(t),this._directionChanged=!0)}}return t.FRAME_INCREASE_AMOUNT=1,t.TYPE=Mt.a.FURNITURE_ANIMATED,t.DEFAULT_ANIMATION_ID=0,t})(),ue=(()=>{class t extends le{constructor(){super(),this._badgeAssetNameNormalScale="",this._badgeAssetNameSmallScale="",this._badgeVisibleInState=-1}updateModel(t){let e=super.updateModel(t);if(!isNaN(this.object.model.getValue(At.a.FURNITURE_BADGE_IMAGE_STATUS))&&0!==this.object.model.getValue(At.a.FURNITURE_BADGE_IMAGE_STATUS)&&""===this._badgeAssetNameNormalScale){this._badgeAssetNameNormalScale=this.object.model.getValue(At.a.FURNITURE_BADGE_ASSET_NAME),""===this._badgeAssetNameSmallScale&&(this._badgeAssetNameSmallScale=this._badgeAssetNameNormalScale+"_32");const t=this.object.model.getValue(At.a.FURNITURE_BADGE_VISIBLE_IN_STATE);isNaN||(this._badgeVisibleInState=t),e=!0}return e}getSpriteAssetName(e,s){return this.getLayerTag(e,this.direction,s)!==t.BADGE||-1!==this._badgeVisibleInState&&this.object.getState(0)!==this._badgeVisibleInState?super.getSpriteAssetName(e,s):32===e?this._badgeAssetNameSmallScale:this._badgeAssetNameNormalScale}getLayerXOffset(e,s,i){let n=super.getLayerXOffset(e,s,i);if(this.getLayerTag(e,s,i)===t.BADGE){const t=this.getAsset(32===e?this._badgeAssetNameSmallScale:this._badgeAssetNameNormalScale,i);t&&(n+=64===e?(40-t.width)/2:(20-t.width)/2)}return n}getLayerYOffset(e,s,i){let n=super.getLayerYOffset(e,s,i);if(this.getLayerTag(e,s,i)===t.BADGE){const t=this.getAsset(32===e?this._badgeAssetNameSmallScale:this._badgeAssetNameNormalScale,i);t&&(n+=64===e?(40-t.height)/2:(20-t.height)/2)}return n}}return t.BADGE="BADGE",t})(),_e=(()=>{class t extends he{constructor(){super(),this._imageUrl=null,this._shortUrl=null,this._imageReady=!1,this._offsetX=0,this._offsetY=0,this._offsetZ=0}dispose(){super.dispose(),this._imageUrl&&this.asset&&this.asset.disposeAsset(this._imageUrl)}updateObject(t,e){return!!super.updateObject(t,e)&&(this._imageReady&&this.checkAndCreateImageForCurrentState(),!0)}updateModel(t){const e=super.updateModel(t);if(e&&(this._offsetX=this.object.model.getValue(At.a.FURNITURE_BRANDING_OFFSET_X),this._offsetY=this.object.model.getValue(At.a.FURNITURE_BRANDING_OFFSET_Y),this._offsetZ=this.object.model.getValue(At.a.FURNITURE_BRANDING_OFFSET_Z)),this._imageReady){if(this.checkIfImageChanged())return this._imageReady=!1,this._imageUrl=null,!0}else if(this._imageReady=this.checkIfImageReady(),this._imageReady)return this.checkAndCreateImageForCurrentState(),!0;return e}imageReady(t,e){this._imageUrl=t?e:null}checkIfImageChanged(){const t=this.object.model.getValue(At.a.FURNITURE_BRANDING_IMAGE_URL);return!(t&&t===this._imageUrl||(this.asset&&this.asset.disposeAsset(this._imageUrl),0))}checkIfImageReady(){if(!this.object||!this.object.model)return!1;const t=this.object.model.getValue(At.a.FURNITURE_BRANDING_IMAGE_URL);if(!t)return!1;if(this._imageUrl&&this._imageUrl===t)return!1;if(1===this.object.model.getValue(At.a.FURNITURE_BRANDING_IMAGE_STATUS)){const e=h.a.instance.core.asset.getTexture(t);return!!e&&(this.imageReady(e,t),!0)}return!1}checkAndCreateImageForCurrentState(){if(!this._imageUrl)return;const t=h.a.instance.core.asset.getTexture(this._imageUrl);t&&this.asset.addAsset(this._imageUrl,t,!0,0,0,!1,!1)}getSpriteAssetName(e,s){return this.getLayerTag(e,this._direction,s)===t.BRANDED_IMAGE&&this._imageUrl?this._imageUrl:super.getSpriteAssetName(e,s)}getLayerIgnoreMouse(e,s,i){return this.getLayerTag(e,s,i)===t.BRANDED_IMAGE||super.getLayerIgnoreMouse(e,s,i)}}return t.BRANDED_IMAGE="branded_image",t})();class de extends _e{getLayerXOffset(t,e,s){return super.getLayerXOffset(t,e,s)+this._offsetX}getLayerYOffset(t,e,s){return super.getLayerYOffset(t,e,s)+this._offsetY}getLayerZOffset(t,e,s){return super.getLayerZOffset(t,e,s)+this._offsetZ}}let ge=(()=>{class t extends le{constructor(){super(),this._stateQueue=[],this._running=!1}setAnimation(e){if(-1===e&&!this._running)return this._running=!0,this._stateQueue=[],void this._stateQueue.push(t._Str_4186);if(e>=0&&e<=7){if(this._running)return this._running=!1,this._stateQueue=[],this._stateQueue.push(t.ANIMATION_ID_OFFSET_SLOW1),this._stateQueue.push(t.ANIMATION_ID_OFFSET_SLOW2+e),void this._stateQueue.push(e);super.setAnimation(e)}}updateAnimation(t){return this.getLastFramePlayed(0)&&this._stateQueue.length&&super.setAnimation(this._stateQueue.shift()),super.updateAnimation(t)}}return t.ANIMATION_ID_OFFSET_SLOW1=20,t.ANIMATION_ID_OFFSET_SLOW2=9,t._Str_4186=-1,t})();class me extends he{}let pe=(()=>{class t extends le{getFrameNumber(e,s){const i=this.getLayerTag(e,this.direction,s),n=this.object.getState(0);switch(i){case t.SECONDS_SPRITE:return Math.floor(n%60%10);case t.TEN_SECONDS_SPRITE:return Math.floor(n%60/10);case t.MINUTES_SPRITE:return Math.floor(n/60%10);case t.TEN_MINUTES_SPRITE:return Math.floor(n/60/10%10);default:return super.getFrameNumber(e,s)}}get animationId(){return 0}}return t.SECONDS_SPRITE="seconds_sprite",t.TEN_SECONDS_SPRITE="ten_seconds_sprite",t.MINUTES_SPRITE="minutes_sprite",t.TEN_MINUTES_SPRITE="ten_minutes_sprite",t})();class fe extends Ut{}let Ee=(()=>{class t extends le{constructor(){super(),this._Str_22237=null,this._Str_10040=null,this._Str_21698=-1,this._Str_16232=!1}get _Str_23660(){return!(null==this._Str_10040)}_Str_6645(t){this._Str_10040=t,this._Str_16232=!0}updateModel(t){const e=super.updateModel(t);return this._Str_16232||this._Str_21698!==this.direction?(this._Str_25236(),!0):e}_Str_25236(){null!=this.asset&&(this._Str_10040?this._Str_20857(this._Str_10040,64):this.asset.disposeAsset(this._Str_15493(64)),this._Str_16232=!1,this._Str_21698=this.direction)}_Str_20857(e,s){let i=0;for(;i<this.totalSprites;){if(this.getLayerTag(s,this.direction,i)===t.THUMBNAIL){const t=this.cacheSpriteAssetName(s,i,!1)+this.getFrameNumber(s,i),n=this.getAsset(t,i);if(n){const t=this._Str_25562(e,n),i=this._Str_15493(s);this.asset.disposeAsset(i),this.asset.addAsset(i,t,!0,n.offsetX,n.offsetY,!1,!1)}return}i++}}_Str_25562(t,e){const s=new i.Matrix,n=e.width/t.width;switch(this.direction){case 2:s.a=n,s.b=-.5*n,s.c=0,s.d=1.1*n,s.tx=0,s.ty=.5*n*t.width;break;case 0:case 4:s.a=n,s.b=.5*n,s.c=0,s.d=1.1*n,s.tx=0,s.ty=0;break;default:s.a=n,s.b=0,s.c=0,s.d=n,s.tx=0,s.ty=0}const r=i.Sprite.from(t);return r.transform.setFromMatrix(s),K.a.generateTexture(r,new i.Rectangle(0,0,e.width,e.height))}getSpriteAssetName(e,s){return this._Str_10040&&this.getLayerTag(e,this.direction,s)===t.THUMBNAIL?this._Str_15493(e):super.getSpriteAssetName(e,s)}_Str_15493(t){return this._Str_22237=this._Str_12961(this.object.id,64),this._Str_22237}_Str_12961(t,e){return[this._type,t,"thumb",e].join("_")}}return t.THUMBNAIL="THUMBNAIL",t})();class Se extends Ee{constructor(){super(),this._cachedUrl=null}updateModel(t){if(this.object){const t=this.getThumbnailURL();if(this._cachedUrl!==t)if(this._cachedUrl=t,this._cachedUrl&&""!==this._cachedUrl){const e=new Image;e.src=t,e.crossOrigin="*",e.onload=()=>{const t=i.Texture.from(e);t.baseTexture.scaleMode=i.SCALE_MODES.LINEAR,this._Str_6645(t)}}else this._Str_6645(null)}return super.updateModel(t)}getThumbnailURL(){throw new Error("This method must be overridden!")}}class ve extends Se{constructor(){super(),this._url=null,this._typePrefix=null}getThumbnailURL(){if(!this.object)return null;if(this._url)return this._url;const t=this.object.model.getValue(At.a.FURNITURE_DATA);if(!t||""===t)return null;this.object.type.indexOf("")>=0&&(this._typePrefix=this.object.type.indexOf("")>=0?"":"postcards/selfie/");let e=JSON.parse(t).w||"";return e=this._Str_18056(e),this._url=e,this._url}_Str_18056(t){return-1===(t=t.replace(".png","_small.png")).indexOf(".png")&&(t+="_small.png"),t}}class be extends le{}let Ie=(()=>{class t extends be{constructor(){super(...arguments),this._packetType=0,this._ribbonType=0,this._lastAnimationId=0}update(t,e,s,i){this.updatePresentWrap(),super.update(t,e,s,i)}updatePresentWrap(){if(!this.object)return;const e=this.object.model.getValue(At.a.FURNITURE_EXTRAS),s=parseInt(e),i=Math.floor(s/1e3),n=s%1e3;this._packetType=i>t.MAX_PACKET_TYPE_VALUE?0:i,this._ribbonType=n>t.MAX_RIBBON_TYPE_VALUE?0:n}getFrameNumber(e,s){if(this._lastAnimationId===t.PRESENT_DEFAULT_STATE){if(s<=1)return this._packetType;if(2===s)return this._ribbonType}return super.getFrameNumber(e,s)}getSpriteAssetName(t,e){const s=this.getValidSize(t);let i=this._type,n="";n=e<this.spriteCount-1?String.fromCharCode("a".charCodeAt(0)+e):"sd";const r=this.getFrameNumber(t,e);return i=i+"_"+s+"_"+n+"_"+this.direction,i=i+"_"+r,i}setAnimation(t){this._lastAnimationId=t,super.setAnimation(t)}}return t.PRESENT_DEFAULT_STATE=0,t.MAX_PACKET_TYPE_VALUE=9,t.MAX_RIBBON_TYPE_VALUE=11,t})();class Re extends he{constructor(){super(...arguments),this._packetType=0,this._ribbonType=0}update(t,e,s,i){this.updatePresentWrap(),super.update(t,e,s,i)}updatePresentWrap(){if(!this.object)return;const t=this.object.model.getValue(At.a.FURNITURE_EXTRAS),e=parseInt(t);this._packetType=Math.floor(e/1e3),this._ribbonType=e%1e3}getFrameNumber(t,e){return e<=1?this._packetType:this._ribbonType}getSpriteAssetName(t,e){const s=this.getValidSize(t);let i=this._type,n="";n=e<this.spriteCount-1?String.fromCharCode("a".charCodeAt(0)+e):"sd";const r=this.getFrameNumber(t,e);return i=i+"_"+s+"_"+n+"_"+this.direction,i=i+"_"+r,i}}let Te=(()=>{class t extends le{constructor(){super(),this._color1=t.DEFAULT_COLOR_1,this._color2=t.DEFAULT_COLOR_2}updateModel(t){const e=super.updateModel(t);return!!e&&(this._color1=this.object.model.getValue(At.a.FURNITURE_GUILD_CUSTOMIZED_COLOR_1),this._color2=this.object.model.getValue(At.a.FURNITURE_GUILD_CUSTOMIZED_COLOR_2),e)}getLayerColor(t,e,s){switch(this.getLayerTag(t,this._direction,e)){case"COLOR1":return this._color1;case"COLOR2":return this._color2}return super.getLayerColor(t,e,s)}}return t.DEFAULT_COLOR_1=15658734,t.DEFAULT_COLOR_2=4934475,t})();class Oe extends Ee{}let ye=(()=>{class t extends le{constructor(){super(),this._stateQueue=[],this._running=!1}setAnimation(e){if(-1===e&&!this._running)return this._running=!0,this._stateQueue=[],this._stateQueue.push(t._Str_7627),void this._stateQueue.push(t._Str_4186);if(e>0&&e<=t.ANIMATION_ID_OFFSET_SLOW1){if(this._running)return this._running=!1,this._stateQueue=[],this._stateQueue.push(t.ANIMATION_ID_OFFSET_SLOW1+e),this._stateQueue.push(t.ANIMATION_ID_OFFSET_SLOW2+e),void this._stateQueue.push(e);super.setAnimation(e)}}updateAnimation(t){return this.getLastFramePlayed(1)&&this.getLastFramePlayed(2)&&this.getLastFramePlayed(3)&&this._stateQueue.length&&super.setAnimation(this._stateQueue.shift()),super.updateAnimation(t)}}return t.ANIMATION_ID_OFFSET_SLOW1=10,t.ANIMATION_ID_OFFSET_SLOW2=20,t._Str_7627=31,t._Str_4186=32,t})();class Ce extends oe{constructor(){super(),this._avatarData=new jt}dispose(){super.dispose(),this._avatarData&&(this._avatarData.dispose(),this._avatarData=null)}createAvatarImage(t,e,s=null,i=null,n=null){return this._avatarData.createAvatarImage(t,e,s,i,n)}set avatarManager(t){this._avatarData.avatarManager=t}}let Ae=(()=>{class t extends he{constructor(){super(),this._mannequinScale=-1,this._figure=null,this._gender=null,this._dynamicAssetName=null,this._needsUpdate=!1,this._placeHolderFigure="hd-99999-99998",this._disposed=!1}initialize(t){return t instanceof Ce&&super.initialize(t)}dispose(){this._disposed||(this._disposed=!0,this._dynamicAssetName&&this.asset&&(this.asset.disposeAsset(this._dynamicAssetName),this._dynamicAssetName=null),super.dispose())}updateObject(t,e){const s=super.updateObject(t,e);return s&&this._mannequinScale!==t&&(this._mannequinScale=t,this.updateAvatar()),s}updateModel(t){let e=super.updateModel(t);if(e){const t=this.object.model.getValue(At.a.FURNITURE_MANNEQUIN_FIGURE)||null;t&&(this._figure=t+"."+this._placeHolderFigure,this._gender=this.object.model.getValue(At.a.FURNITURE_MANNEQUIN_GENDER)||null,this.updateAvatar())}return e=e||this._needsUpdate,this._needsUpdate=!1,e}updateAvatar(t=!1){if(!this.avatarExists()||t){const t=this._data.createAvatarImage(this._figure,this._mannequinScale,this._gender,this);t&&(t.setDirection(Lt.a.FULL,this.direction),this._dynamicAssetName&&this.asset.disposeAsset(this._dynamicAssetName),this.asset.addAsset(this._Str_10185(),t.getImage(Lt.a.FULL,!1,1,!1),!0),this._dynamicAssetName=this._Str_10185(),this._needsUpdate=!0,t.dispose())}}avatarExists(){return this._figure&&null!==this.getAsset(this._Str_10185())}_Str_10185(){return"mannequin_"+this._figure+"_"+this._mannequinScale+"_"+this.direction+"_"+this.object.id}resetFigure(t){t===this._figure&&this.updateAvatar(!0)}getSpriteAssetName(e,s){const i=this.getLayerTag(e,this.direction,s);return this._figure&&i===t.AVATAR_IMAGE_SPRITE_TAG&&this.avatarExists()?this._Str_10185():super.getSpriteAssetName(e,s)}getLayerXOffset(e,s,i){return this.getLayerTag(e,s,i)===t.AVATAR_IMAGE_SPRITE_TAG&&this.avatarExists()?-this.getSprite(i).width/2:super.getLayerXOffset(e,s,i)}getLayerYOffset(e,s,i){return this.getLayerTag(e,s,i)===t.AVATAR_IMAGE_SPRITE_TAG&&this.avatarExists()?-this.getSprite(i).height:super.getLayerYOffset(e,s,i)}get disposed(){return this._disposed}}return t.AVATAR_IMAGE_SPRITE_TAG="avatar_image",t})();class Me extends le{}class we extends le{}class De extends he{}let Ne=(()=>{class t extends le{constructor(){super(),this._stateQueue=[],this._animationCounter=-1}setAnimation(e){return e===t._Str_18395&&(this._stateQueue=[],this._stateQueue.push(t._Str_15915),this._animationCounter=t._Str_16054),super.setAnimation(e)}updateAnimation(t){return this._animationCounter>0&&this._animationCounter--,this._animationCounter||this._stateQueue.length&&super.setAnimation(this._stateQueue.shift()),super.updateAnimation(t)}usesAnimationResetting(){return!0}}return t._Str_4186=3,t._Str_18395=2,t._Str_15915=1,t._Str_16054=15,t})();class Ue extends le{usesAnimationResetting(){return!0}}class xe extends _e{imageReady(t,e){super.imageReady(t,e),t&&this.setImageOffset(t.width,t.height)}setImageOffset(t,e){const s=new Jt;s.setDirection(1,0,-e),s.setDirection(3,0,0),s.setDirection(5,-t,0),s.setDirection(7,-t,-e),s.setDirection(4,-t/2,-e/2),this._imageOffset=s}getLayerXOffset(t,e,s){if(this._imageOffset){const t=this._imageOffset.getXOffset(e,0);if(void 0!==t)return t+this._offsetX}return super.getLayerXOffset(t,e,s)+this._offsetX}getLayerYOffset(t,e,s){if(this._imageOffset){const t=this._imageOffset.getYOffset(e,0);if(void 0!==t)return t+this._offsetY}return super.getLayerYOffset(t,e,s)+this._offsetY}getLayerZOffset(t,e,s){return super.getLayerZOffset(t,e,s)+-this._offsetZ}}let Le=(()=>{class t extends le{getFrameNumber(e,s){const i=this.getLayerTag(e,this.direction,s),n=this.object.getState(0);switch(i){case t.ONES_SPRITE:return Math.floor(n%10);case t.TENS_SPRITE:return Math.floor(n/10%10);case t.HUNDREDS_SPRITE:return Math.floor(n/100%10);case t.THOUSANDS_SPRITE:return Math.floor(n/1e3%10);default:return super.getFrameNumber(e,s)}}}return t.ONES_SPRITE="ones_sprite",t.TENS_SPRITE="tens_sprite",t.HUNDREDS_SPRITE="hundreds_sprite",t.THOUSANDS_SPRITE="thousands_sprite",t})();class Pe extends le{}class Fe extends he{getLayerColor(t,e,s){return this._data?this._data.getLayerColor(t,e,s):se.DEFAULT_COLOR}}let ke=(()=>{class t extends le{constructor(){super(),this._stateQueue=[],this._running=!1,super.setAnimation(t._Str_11236)}setAnimation(e){if(0===e&&!this._running)return this._running=!0,this._stateQueue=[],this._stateQueue.push(t._Str_7627),void this._stateQueue.push(t._Str_4186);if(e>0&&e<=t.ANIMATION_ID_OFFSET_SLOW2){if(this._running)return this._running=!1,this._stateQueue=[],2===this.direction?(this._stateQueue.push(t.ANIMATION_ID_OFFSET_SLOW1+5),this._stateQueue.push(t.ANIMATION_ID_OFFSET_SLOW2+5)):(this._stateQueue.push(t.ANIMATION_ID_OFFSET_SLOW1+e),this._stateQueue.push(t.ANIMATION_ID_OFFSET_SLOW2+e)),void this._stateQueue.push(t._Str_11236);super.setAnimation(t._Str_11236)}}updateAnimation(t){return this.getLastFramePlayed(11)&&this._stateQueue.length&&super.setAnimation(this._stateQueue.shift()),super.updateAnimation(t)}}return t.ANIMATION_ID_OFFSET_SLOW1=20,t.ANIMATION_ID_OFFSET_SLOW2=10,t._Str_7627=31,t._Str_4186=32,t._Str_11236=30,t})(),Ve=(()=>{class t extends le{updateObject(t,e){return super.updateObject(t,e),!0}getFrameNumber(e,s){const i=this.object.model.getValue(At.a.FURNITURE_VOTE_COUNTER_COUNT);switch(this.getLayerTag(e,this.direction,s)){case t.ONES_SPRITE:return i%10;case t.TENS_SPRITE:return i/10%10;case t.HUNDREDS_SPRITE:return i/100%10;default:return super.getFrameNumber(e,s)}}getLayerAlpha(e,s,i){if(this.object.model.getValue(At.a.FURNITURE_VOTE_COUNTER_COUNT)===t._Str_17839)switch(this.getLayerTag(e,s,i)){case t.ONES_SPRITE:case t.TENS_SPRITE:case t.HUNDREDS_SPRITE:return 0}return super.getLayerAlpha(e,s,i)}}return t.ONES_SPRITE="ones_sprite",t.TENS_SPRITE="tens_sprite",t.HUNDREDS_SPRITE="hundreds_sprite",t._Str_17839=-1,t})(),Be=(()=>{class t extends le{getFrameNumber(e,s){const i=this.object.model.getValue(At.a.FURNITURE_VOTE_MAJORITY_RESULT);switch(this.getLayerTag(e,this.direction,s)){case t.ONES_SPRITE:return i%10;case t.TENS_SPRITE:return i/10%10;case t.HUNDREDS_SPRITE:return i/100%10;default:return super.getFrameNumber(e,s)}}getLayerAlpha(e,s,i){const n=this.object.model.getValue(At.a.FURNITURE_VOTE_MAJORITY_RESULT);if(-1!==t._Str_16109.indexOf(this.object.getState(0))||n===t._Str_17618)switch(this.getLayerTag(e,s,i)){case t.ONES_SPRITE:case t.TENS_SPRITE:case t.HUNDREDS_SPRITE:return 0}return super.getLayerAlpha(e,s,i)}}return t.ONES_SPRITE="ones_sprite",t.TENS_SPRITE="tens_sprite",t.HUNDREDS_SPRITE="hundreds_sprite",t._Str_16109=[-1,1],t._Str_17618=-1,t})();class We extends le{}let Ke=(()=>{class t extends Se{getThumbnailURL(){return null}}return t.THUMBNAIL_URL="THUMBNAIL_URL",t})(),Ge=(()=>{class t extends ae{constructor(t,e){super(t,e),this._posturesToAnimations=new Map,this._gesturesToAnimations=new Map,this._defaultPosture=null}processPostures(t){if(!t)return!1;for(const e in t){const s=t[e];s&&(this._posturesToAnimations.get(s.id)||(null===this._defaultPosture&&(this._defaultPosture=s.id),this._posturesToAnimations.set(s.id,s.animationId)))}return void 0!==this._posturesToAnimations.get(this._defaultPosture)}processGestures(t){if(!t)return!1;for(const e in t){const s=t[e];s&&(this._gesturesToAnimations.get(s.id)||this._gesturesToAnimations.set(s.id,s.animationId))}return!0}postureToAnimation(t){return this._posturesToAnimations.get(t)||(t=this._defaultPosture),this._posturesToAnimations.get(t)}_Str_18284(t){return"ded"===t}gestureToAnimation(e){return this._gesturesToAnimations.get(e)?this._gesturesToAnimations.get(e):t.DEFAULT}_Str_14207(t,e){if(t>=0&&t<this._posturesToAnimations.size){const e=this._posturesToAnimations.keys();for(;;){const s=e.next();if(s.done)return null;if(t<=0)return s.value;--t}}return e?this._defaultPosture:null}_Str_17844(t){if(t>=0&&t<this._gesturesToAnimations.size){const e=this._gesturesToAnimations.keys();for(;;){const s=e.next();if(s.done)return null;if(t<=0)return s.value;--t}}return null}_Str_17976(t){for(const e of this._gesturesToAnimations.keys())if(this._gesturesToAnimations.get(e)===t)return e;return null}get totalPostures(){return this._posturesToAnimations.size}get totalGestures(){return this._gesturesToAnimations.size}}return t.DEFAULT=-1,t})();class He extends ce{constructor(){super(),this._isAllowedToTurnHead=!0}createSizeData(t,e,s){return t>1?new Ge(e,s):new ae(e,s)}defineVisualizations(t){return this._isAllowedToTurnHead=!0,super.defineVisualizations(t)}processVisualElement(t,e,s){if(!t||!e||!s)return!1;switch(e){case"postures":if(!(t instanceof Ge&&t.processPostures(s)))return!1;break;case"gestures":if(!(t instanceof Ge&&t.processGestures(s)))return!1;break;default:if(!super.processVisualElement(t,e,s))return!1}return!0}postureToAnimation(t,e){const s=this.getSizeData(t);return s?s.postureToAnimation(e):Ge.DEFAULT}_Str_18284(t,e){const s=this.getSizeData(t);return!!s&&s._Str_18284(e)}gestureToAnimation(t,e){const s=this.getSizeData(t);return s?s.gestureToAnimation(e):Ge.DEFAULT}_Str_14207(t,e,s){const i=this.getSizeData(t);return i?i._Str_14207(e,s):null}_Str_17844(t,e){const s=this.getSizeData(t);return s?s._Str_17844(e):null}_Str_17976(t,e){const s=this.getSizeData(t);return s?s._Str_17976(e):null}totalPostures(t){const e=this.getSizeData(t);return e?e.totalPostures:0}totalGestures(t){const e=this.getSizeData(t);return e?e.totalGestures:0}get isAllowedToTurnHead(){return this._isAllowedToTurnHead}}let je=(()=>{class t extends le{constructor(){for(super(),this._data=null,this._posture="",this._gesture="",this._isSleeping=!1,this._headDirection=-1,this._headOnly=!1,this._nonHeadSprites=[],this._headSprites=[],this._saddleSprites=[],this._animationOver=!1,this._paletteIndex=-1,this._paletteName="",this._customLayerIds=[],this._customPartIds=[],this._customPaletteIds=[],this._isRiding=!1,this._color=16777215,this._previousAnimationDirection=-1,this._animationStates=[];this._animationStates.length<t._Str_16677;)this._animationStates.push(new te)}initialize(t){return t instanceof He&&super.initialize(t)}dispose(){if(super.dispose(),this._animationStates){for(;this._animationStates.length;){const t=this._animationStates[0];t&&t.dispose(),this._animationStates.pop()}this._animationStates=null}}getAnimationId(t){return t.animationId}update(t,e,s,i){super.update(t,e,s,i)}updateModel(t){const e=this.object&&this.object.model;if(!e)return!1;if(this.updateModelCounter===e.updateCounter)return!1;const s=e.getValue(At.a.FIGURE_POSTURE),i=e.getValue(At.a.FIGURE_GESTURE);e.getValue(At.a.FIGURE_POSTURE),this.setPostureAndGesture(s,i);let n=e.getValue(At.a.FURNITURE_ALPHA_MULTIPLIER)||null;(null===n||isNaN(n))&&(n=1),this._alphaMultiplier!==n&&(this._alphaMultiplier=n,this._alphaChanged=!0),this._isSleeping=e.getValue(At.a.FIGURE_SLEEP)>0;const r=e.getValue(At.a.HEAD_DIRECTION);this._headDirection=!isNaN(r)&&this._data.isAllowedToTurnHead?r:this.object.getDirection().x;const a=e.getValue(At.a.PET_PALETTE_INDEX),o=e.getValue(At.a.PET_CUSTOM_LAYER_IDS),c=e.getValue(At.a.PET_CUSTOM_PARTS_IDS),h=e.getValue(At.a.PET_CUSTOM_PALETTE_IDS),l=e.getValue(At.a.PET_IS_RIDING),u=e.getValue(At.a.PET_HEAD_ONLY),_=e.getValue(At.a.PET_COLOR);return a!==this._paletteIndex&&(this._paletteIndex=a,this._paletteName=this._paletteIndex.toString()),this._customLayerIds=o||[],this._customPartIds=c||[],this._customPaletteIds=h||[],this._isRiding=!isNaN(l)&&l>0,this._headOnly=!isNaN(u)&&u>0,isNaN(_)||this._color===_||(this._color=_),this.updateModelCounter=e.updateCounter,!0}updateAnimation(t){if(this.object){const t=this.object.getDirection().x;t!==this._previousAnimationDirection&&(this._previousAnimationDirection=t,this.resetAllAnimationFrames())}return super.updateAnimation(t)}setPostureAndGesture(e,s){e!==this._posture&&(this._posture=e,this._Str_16058(t._Str_16082,this._data.postureToAnimation(this._scale,e))),this._data._Str_18284(this._scale,e)&&(s=null),s!==this._gesture&&(this._gesture=s,this._Str_16058(t._Str_17658,this._data.gestureToAnimation(this._scale,s)))}_Str_22634(t){return t>=0&&t<this._animationStates.length?this._animationStates[t]:null}_Str_16058(t,e){const s=this._Str_22634(t);s&&this.setSubAnimation(s,e)&&(this._animationOver=!1)}resetAllAnimationFrames(){this._animationOver=!1;let t=this._animationStates.length-1;for(;t>=0;){const e=this._animationStates[t];e&&e.setLayerCount(this.animatedLayerCount),t--}}updateAnimations(t){if(this._animationOver)return 0;let e=!0,s=0,i=0;for(;i<this._animationStates.length;){const n=this._animationStates[i];n&&!n.animationOver&&(s|=this.updateFramesForAnimation(n,t),n.animationOver?($t.isTransitionFromAnimation(n.animationId)||$t.isTransitionToAnimation(n.animationId))&&(this._Str_16058(i,n.animationAfterTransitionId),e=!1):e=!1),i++}return this._animationOver=e,s}getSpriteAssetName(e,s){if(this._headOnly&&this._Str_24824(s))return null;if(this._isRiding&&this._parser3(s))return null;const i=this.totalSprites;if(s<i-t._Str_7490){const n=this.getValidSize(e);if(s<i-(1+t._Str_7490)){if(s>=oe.LAYER_LETTERS.length)return null;const t=oe.LAYER_LETTERS[s];return 1===n?this._type+"_icon_"+t:this._type+"_"+n+"_"+t+"_"+this.getDirection(e,s)+"_"+this.getFrameNumber(n,s)}return this._type+"_"+n+"_sd_"+this.getDirection(e,s)+"_0"}return null}getLayerColor(e,s,i){return s<this.totalSprites-t._Str_7490?this._color:16777215}getLayerXOffset(t,e,s){let i=super.getLayerXOffset(t,e,s),n=this._animationStates.length-1;for(;n>=0;){const t=this._animationStates[n];if(t){const e=t.getFrame(s);e&&(i+=e.x)}n--}return i}getLayerYOffset(t,e,s){let i=super.getLayerYOffset(t,e,s),n=this._animationStates.length-1;for(;n>=0;){const t=this._animationStates[n];if(t){const e=t.getFrame(s);e&&(i+=e.y)}n--}return i}getLayerZOffset(t,e,s){return this._data?this._data.getLayerZOffset(t,this.getDirection(t,s),s):ie.DEFAULT_ZOFFSET}getDirection(t,e){return this._Str_23973(e)?this._data.getValidDirection(t,this._headDirection):this._direction}getFrameNumber(t,e){let s=this._animationStates.length-1;for(;s>=0;){const t=this._animationStates[s];if(t){const s=t.getFrame(e);if(s)return s.id}s--}return super.getFrameNumber(t,e)}_Str_23973(e){if(void 0===this._headSprites[e]){const s=this._data.getLayerTag(this._scale,ne._Str_9471,e)===t.HEAD,i=this._data.getLayerTag(this._scale,ne._Str_9471,e)===t.HAIR;this._headSprites[e]=!(!s&&!i)}return this._headSprites[e]}_Str_24824(e){if(void 0===this._nonHeadSprites[e])if(e<this.totalSprites-(1+t._Str_7490)){const s=this._data.getLayerTag(this._scale,ne._Str_9471,e);this._nonHeadSprites[e]=!!(s&&s.length>0&&s!==t.HEAD&&s!==t.HAIR)}else this._nonHeadSprites[e]=!0;return this._nonHeadSprites[e]}_parser3(e){return void 0===this._saddleSprites[e]&&(this._saddleSprites[e]=this._data.getLayerTag(this._scale,ne._Str_9471,e)===t.SADDLE),this._saddleSprites[e]}getAsset(t,e=-1){if(!this.asset)return null;const s=this._customLayerIds.indexOf(e);let i=this._paletteName,n=-1,r=-1;return s>-1&&(n=this._customPartIds[s],r=this._customPaletteIds[s],i=r>-1?r.toString():this._paletteName),!isNaN(n)&&n>-1&&(t=t+"_"+n),this.asset.getAssetWithPalette(t,i)}getAdditionalLayerCount(){return super.getAdditionalLayerCount()+t._Str_7490}setLayerCount(t){super.setLayerCount(t),this._headSprites=[]}getPostureForAsset(t,e){const s=e.split("_");let i=s.length,n=0;for(;n<s.length;){if("64"===s[n]||"32"===s[n]){i=n+3;break}n++}let r=null;if(i<s.length){let e=s[i];e=e.split("@")[0],r=this._data._Str_14207(t,parseInt(e)/100,!1),r||(r=this._data._Str_17976(t,parseInt(e)/100))}return r}}return t.TYPE=Mt.a.PET_ANIMATED,t.HEAD="head",t.SADDLE="saddle",t.HAIR="hair",t._Str_7490=1,t._Str_13277=1e3,t.PET_EXPERIENCE_BUBBLE_PNG="pet_experience_bubble_png",t._Str_16082=0,t._Str_17658=1,t._Str_16677=2,t})(),ze=(()=>{class t{constructor(t,e,s){this.type=t,this.loc=e,this.category=s}get loc(){return this._loc}set loc(t){this._loc||(this._loc=new m.a),this._loc.assign(t)}get type(){return this._type}set type(t){this._type=t}get category(){return this._category}set category(t){this._category=t}dispose(){this._loc=null}}return t.WINDOW="window",t.HOLE="hole",t})();class Ye{constructor(){this._masks=[]}get masks(){return this._masks}}class qe{constructor(){this._masks=new Map}get _Str_6845(){return this._masks.size}dispose(){this._masks&&(this.reset(),this._masks=null)}initialize(t){if(!t)return!1;if(this._masks.clear(),t.masks.length)for(const e of t.masks){if(!e)continue;const t=e.locations.length?e.locations[0]:null;t&&this._masks.set(e.id,new ze(e.type,t,e.category))}return!0}reset(){for(const t of this._masks.values())t&&t.dispose();this._masks.clear()}addMask(t,e,s,i){const n=new ze(e,s,i);this._masks.delete(t),this._masks.set(t,n)}_Str_23574(t){const e=this._masks.get(t);return!!e&&(this._masks.delete(t),e.dispose(),!0)}_Str_5598(){const t=new Ye;for(const[e,s]of this._masks.entries()){if(!s)continue;const i=this._Str_21678(s),n=this._Str_21644(s),r=this._Str_19038(s);i&&n&&r&&t.masks.push({id:e,type:i,category:n,locations:[{x:r.x,y:r.y,z:r.z}]})}return t}_Str_19038(t){return t?t.loc:null}_Str_21678(t){return t?t.type:null}_Str_21644(t){return t?t.category:null}get masks(){return this._masks}}var Ze=s("mkz/"),Xe=s("BFtu");class Qe{constructor(t=null,e=0,s=!1){this._assetNames=[],this._maskAssetNames=[],this._maskAssetLocations=[],this._maskAssetFlipHs=[],this._maskAssetFlipVs=[],null!=t&&(this._maskAssetNames=t._maskAssetNames,this._maskAssetLocations=t._maskAssetLocations,this._maskAssetFlipHs=t._maskAssetFlipHs,this._maskAssetFlipVs=t._maskAssetFlipVs),this._color=e,this._alignBottom=s}addMask(t,e,s,i){this._maskAssetNames.push(t),this._maskAssetLocations.push(e),this._maskAssetFlipHs.push(s),this._maskAssetFlipVs.push(i)}_Str_22862(t){this._assetNames.push(t)}set z(t){this._z=t}get z(){return this._z}set cornerPoints(t){this._points=t}get cornerPoints(){return this._points}get color(){return this._color}get _Str_21807(){return this._maskAssetNames}get _Str_20731(){return this._maskAssetLocations}get _Str_21810(){return this._maskAssetFlipHs}get _Str_19044(){return this._maskAssetFlipVs}_Str_14945(){return this._alignBottom}get _Str_17636(){return this._assetNames}}class Je{constructor(t,e,s){this._type=t,this._leftSideLoc=e,this._rightSideLoc=s}get type(){return this._type}get _Str_5120(){return this._leftSideLoc}get _Str_4659(){return this._rightSideLoc}}class $e{constructor(t,e,s,i){this._leftSideLoc=t,this._rightSideLoc=e,this._leftSideLength=s,this._rightSideLength=i}get _Str_5120(){return this._leftSideLoc}get _Str_4659(){return this._rightSideLoc}get _Str_9124(){return this._leftSideLength}get _Str_12156(){return this._rightSideLength}}class ts{constructor(t,e){this._bitmap=t,this._timeStamp=e}dispose(){this._bitmap=null}get bitmap(){return this._bitmap}get timeStamp(){return this._timeStamp}}let es=(()=>{class t{constructor(){this._Str_16737=1,this._Str_16979=16777216,this._Str_25697=69069,this._Str_23320=5}static _Str_17384(e=1){t._Str_3699||(t._Str_3699=new t),t._Str_3699._Str_15634=e}static _Str_26085(e=16777216){t._Str_3699||(t._Str_3699=new t),t._Str_3699._Str_25321=e}static _Str_1612(e,s,i){return t._Str_3699||(t._Str_3699=new t),t._Str_3699._Str_24535(e,s,i)}static _Str_23572(e,s){return t._Str_3699||(t._Str_3699=new t),t._Str_3699._Str_24231(e,s)}set _Str_15634(t){this._Str_16737=t}set _Str_25321(t){t<1&&(t=1),this._Str_16979=t}dispose(){}_Str_24535(t,e,s){const i=[];let n=0;for(;n<t;)i.push(this._Str_19361(e,s-e)),n++;return i}_Str_24231(t,e){if(t>e||e>1e3)return null;const s=[];let i=0;for(;i<=e;)s.push(i),i++;const n=[];let r=0;for(;r<t;){const t=this._Str_19361(0,s.length-1);n.push(s[t]),s.splice(t,1),r++}return n}_Str_24980(){let t=this._Str_25697*this._Str_16737+this._Str_23320;return t<0&&(t=-t),t%=this._Str_16979,this._Str_16737=t,t}_Str_19361(t,e){let s=this._Str_24980();return e<1?t:(s=t+s/this._Str_16979*e,s)}}return t._Str_21045=1,t._Str_20078=16777216,t._Str_3699=null,t})(),ss=(()=>{class t{constructor(e,s,n,r,a,o,c,h,l=0,u=0,_=0,d=0){if(this._Str_4795=null,this._Str_1720=0,this._height=0,this._Str_5886=[],this._Str_4047=[],this._Str_5088=[],this._Str_8341=[],this._Str_14495=[],this._Str_16308=h,this._Str_1049=null,this._Str_2730=null,this._Str_4891=!1,this._Str_5545=null,this._Str_5221=new m.a,this._Str_5221.assign(e),this._location=new m.a,this._location.assign(s),this._Str_2920=new m.a,this._Str_2920.assign(n),this._Str_2943=new m.a,this._Str_2943.assign(r),this._normal=m.a.crossProduct(this._Str_2920,this._Str_2943),this._normal.length>0&&this._normal.multiply(1/this._normal.length),null!=c)for(const t of c){if(!t)continue;const e=new m.a;e.assign(t),this._Str_5886.push(e)}this._disposed=!1,this._Str_3816=!1,this._Str_576=null,this._Str_13946=!0,this._Str_3406=-1,this._offset=new i.Point,this._relativeDepth=0,this._type=a,this._color=0,this._rasterizer=null,this._Str_7367=!0,this._Str_2708=new Map,this._Str_2820=new m.a,this._Str_2745=new m.a,this._Str_2639=new m.a,this._Str_2766=new m.a,this._Str_1720=0,this._height=0,this._Str_20541=l,this._Str_19707=u,this._Str_21079=_,this._Str_22024=d,this._Str_4542=o,this._uniqueId=++t._uniqueIdCounter}static blend(t,e){return 0}set _Str_14801(t){t!==this._Str_7367&&(this._Str_7367||this._Str_11000(),this._Str_7367=t)}get _Str_14801(){return this._Str_7367}get bitmapData(){if(!this.visible||!this._Str_1049)return null;let t=Cs.getTextureCache(this._Str_1049);return t||(t=K.a.generateTexture(this._Str_1049,new i.Rectangle(0,0,this._Str_1720,this._height)),Cs.addTextureCache(this._Str_1049,t)),t}get visible(){return this._Str_3816&&this._Str_7367}get offset(){return this._offset}get relativeDepth(){return this._relativeDepth}get color(){return this._color}set color(t){this._color=t}get type(){return this._type}get _Str_5424(){return this._Str_2920}get _Str_4968(){return this._Str_2943}get location(){return this._location}get normal(){return this._normal}get _Str_18448(){return this._Str_13946}set _Str_18448(t){this._Str_13946=t}set rasterizer(t){this._rasterizer=t}set _Str_16279(t){this._Str_4795=t}set id(t){t!==this._Str_576&&(this._Str_11000(),this._Str_576=t)}get uniqueId(){return this._uniqueId}dispose(){if(this._Str_1049&&(this._Str_1049.destroy(),this._Str_1049=null),this._Str_2708){for(const t of this._Str_2708.values())t&&(t.bitmap&&t.bitmap.destroy(),t.dispose());this._Str_2708=null}this._Str_5545=null,this._location=null,this._Str_5221=null,this._Str_2920=null,this._Str_2943=null,this._normal=null,this._rasterizer=null,this._Str_2820=null,this._Str_2745=null,this._Str_2639=null,this._Str_2766=null,this._Str_4047=null,this._Str_5088=null,this._Str_2730&&(this._Str_2730.destroy(),this._Str_2730=null),this._disposed=!0}_Str_24896(t){return this.visible&&this._Str_1049&&t?this._Str_1049.width!==t.width||this._Str_1049.height!==t.height?null:t:null}_Str_17642(t,e){const s=this._Str_2708.get(t);return s&&(this._Str_2708.delete(t),s.dispose()),this._Str_5545=e,this._Str_2708.set(t,e),!0}_Str_11000(t=null){if(this._Str_2708&&this._Str_2708.size){for(const t of this._Str_2708.values())t&&t.dispose();this._Str_2708.clear()}this._Str_5545=null}getTextureIdentifier(t){return this._rasterizer?this._rasterizer.getTextureIdentifier(t,this.normal):t.toString()}_Str_10518(t,e){if(!t)return!1;let s=this._Str_5545;return s||(s=this._Str_2708.get(this.getTextureIdentifier(t.scale))),this._Str_19336(),!(!this._Str_7367||!(!s||s.timeStamp>=0&&e>s.timeStamp||this._Str_4891))}_Str_10114(t,e){if(!t)return null;let s=null;if(this._Str_10518(t,e)){const n=this.getTextureIdentifier(t.scale),r=this._Str_2920.length*t.scale,a=this._Str_2943.length*t.scale,o=t.getCoordinatePosition(this._normal);s=this._Str_5545?this._Str_5545:this._Str_2708.get(n);let c=null;if(s&&(c=s.bitmap),this._rasterizer)s=this._rasterizer.render(c,this._Str_576,r,a,t.scale,o,this._Str_13946,this._Str_20541,this._Str_19707,this._Str_21079,this._Str_22024,e),s&&c&&s.bitmap!==c&&c.destroy();else{const t=new i.Graphics;t.beginFill(16777215),t.drawRect(0,0,r,a),t.endFill(),s=new ts(t,-1)}s&&(this._Str_17859(s.bitmap,t),this._Str_17642(n,s))}else s=this._Str_5545?this._Str_5545:this._Str_2708.get(this.getTextureIdentifier(t.scale));return s?(this._Str_5545=s,s.bitmap):null}_Str_23649(t){if(!this._Str_4542)return null;const e=new Qe;for(;0<this._Str_4047.length;){const s=this._Str_4047[0];if(s){const n=this._Str_4795._Str_8361(s.type);if(n){const r=n._Str_2125(t.scale);if(r){const a=t.getCoordinatePosition(this._normal),o=n._Str_21021(t.scale,a);if(o){const t=new i.Point(this._Str_2730.width*(1-s._Str_5120/this._Str_2920.length)+o.offsetX,this._Str_2730.height*(1-s._Str_4659/this._Str_2943.length)+o.offsetY);e.addMask(r,t,o.flipH,o.flipV)}}}}}return e}_Str_24802(t){const e=t.getScreenPoint(new m.a(0,0,0)),s=t.getScreenPoint(new m.a(0,1,0));return Math.round(this._Str_2920.length*Math.abs(e.x-s.x))}_Str_22136(t){const e=[];if(this._Str_3816){const s=this._Str_23649(t),i=this._rasterizer._Str_8988(this._Str_576);let n=0;for(;n<i.length;){const r=i[n];if(r)if(this._Str_13946&&r._Str_8547()){const i=t.getCoordinatePosition(this._normal),n=r._Str_8547()._Str_21968(i),a=new Qe(s,this._color,n._Str_14945());es._Str_17384(this._Str_16308);for(const e of n._Str_23721(this._Str_24802(t))){const t=[];for(const s of e._Str_22299()){const e=s._Str_2125(i);e&&t.push(e)}t.length>0&&(e._Str_24523()||t.push(""),a._Str_22862(t))}a._Str_17636.length>0&&e.push(a)}else{const t=new Qe(s,this._color);e.push(t)}n++}e.length||e.push(new Qe(s,this._color))}return e}update(e,s){if(!e||this._disposed)return!1;let n=!1;if(this._Str_3406!=e.updateId&&(n=!0),!(n&&this._Str_7367||this.visible))return!1;if(n){this._Str_5545=null;let s=0;if(s=m.a.cosAngle(e.directionAxis,this.normal),s>-.001)return!!this._Str_3816&&(this._Str_3816=!1,!0);let i=0;for(;i<this._Str_5886.length;){if(s=m.a.cosAngle(e.directionAxis,this._Str_5886[i]),s>-.001)return!!this._Str_3816&&(this._Str_3816=!1,!0);i++}this._Str_18702(e);const n=e.getScreenPosition(this._Str_5221).z;let r=Math.max(this._Str_2820.z,this._Str_2745.z,this._Str_2639.z,this._Str_2766.z)-n;this._type===t.TYPE_FLOOR&&(r-=8*(this._location.z+Math.min(0,this._Str_2920.z,this._Str_2943.z))),this._type===t.TYPE_LANDSCAPE&&(r+=.02),this._relativeDepth=r,this._Str_3816=!0,this._Str_3406=e.updateId}if(n||this._Str_10518(e,s)){if(!this._Str_1049||this._Str_1720!==this._Str_1049.width||this._height!==this._Str_1049.height){if(this._Str_1049){if(this._Str_1049.destroy(),this._Str_1049=null,this._Str_1720<1||this._height<1)return!0}else if(this._Str_1720<1||this._height<1)return!1;const t=new i.Graphics;if(t.beginFill(16777215,0),t.drawRect(0,0,this._Str_1720,this._height),t.endFill(),this._Str_1049=t,!this._Str_1049)return!1}es._Str_17384(this._Str_16308);const t=this._Str_10114(e,s);return t?(this._Str_17000(e,t),null!==t||n):(this.dispose(),!1)}return!1}_Str_18702(t){this._Str_2820.assign(t.getScreenPosition(this._location)),this._Str_2745.assign(t.getScreenPosition(m.a.sum(this._location,this._Str_2943))),this._Str_2639.assign(t.getScreenPosition(m.a.sum(m.a.sum(this._location,this._Str_2920),this._Str_2943))),this._Str_2766.assign(t.getScreenPosition(m.a.sum(this._location,this._Str_2920))),this._offset=t.getScreenPoint(this._Str_5221),this._Str_2820.x=Math.round(this._Str_2820.x),this._Str_2820.y=Math.round(this._Str_2820.y),this._Str_2745.x=Math.round(this._Str_2745.x),this._Str_2745.y=Math.round(this._Str_2745.y),this._Str_2639.x=Math.round(this._Str_2639.x),this._Str_2639.y=Math.round(this._Str_2639.y),this._Str_2766.x=Math.round(this._Str_2766.x),this._Str_2766.y=Math.round(this._Str_2766.y),this._offset.x=Math.round(this._offset.x),this._offset.y=Math.round(this._offset.y);const e=Math.min(this._Str_2820.x,this._Str_2745.x,this._Str_2639.x,this._Str_2766.x);let s=Math.max(this._Str_2820.x,this._Str_2745.x,this._Str_2639.x,this._Str_2766.x);const i=Math.min(this._Str_2820.y,this._Str_2745.y,this._Str_2639.y,this._Str_2766.y);let n=Math.max(this._Str_2820.y,this._Str_2745.y,this._Str_2639.y,this._Str_2766.y);s-=e,this._offset.x=this._offset.x-e,this._Str_2820.x=this._Str_2820.x-e,this._Str_2745.x=this._Str_2745.x-e,this._Str_2639.x=this._Str_2639.x-e,this._Str_2766.x=this._Str_2766.x-e,n-=i,this._offset.y=this._offset.y-i,this._Str_2820.y=this._Str_2820.y-i,this._Str_2745.y=this._Str_2745.y-i,this._Str_2639.y=this._Str_2639.y-i,this._Str_2766.y=this._Str_2766.y-i,this._Str_1720=s,this._height=n}_Str_17000(e,s){if(null==this._Str_2820||null==this._Str_2745||null==this._Str_2639||null==this._Str_2766||null==s||null==this._Str_1049)return;let n=this._Str_2766.x-this._Str_2639.x,r=this._Str_2766.y-this._Str_2639.y,a=this._Str_2745.x-this._Str_2639.x,o=this._Str_2745.y-this._Str_2639.y;this._type!=t.TYPE_WALL&&this._type!=t.TYPE_LANDSCAPE||(Math.abs(a-s.width)<=1&&(a=s.width),Math.abs(o-s.width)<=1&&(o=s.width),Math.abs(n-s.height)<=1&&(n=s.height),Math.abs(r-s.height)<=1&&(r=s.height));const c=a/s.width,h=o/s.width,l=n/s.height,u=r/s.height,_=new i.Matrix;_.a=c,_.b=h,_.c=l,_.d=u,_.translate(this._Str_2639.x,this._Str_2639.y),this.draw(s,_)}draw(t,e){const s=t.clone();s.transform.setFromMatrix(e),this._Str_1049=s}_Str_25213(){!this._disposed&&this._Str_4542&&this._Str_4047.length&&(this._Str_4891=!0,this._Str_4047=[])}_Str_24569(t,e,s){if(!this._Str_4542)return!1;let i=0;for(;i<this._Str_4047.length;){const n=this._Str_4047[i];if(n&&n.type===t&&n._Str_5120===e&&n._Str_4659===s)return!1;i++}const n=new Je(t,e,s);return this._Str_4047.push(n),this._Str_4891=!0,!0}_Str_25934(){this._Str_4542&&this._Str_5088.length&&(this._Str_4891=!0,this._Str_5088=[])}_Str_24758(t,e,s,i){if(this._Str_4542){for(const r of this._Str_5088)if(r&&r._Str_5120===t&&r._Str_4659===e&&r._Str_9124===s&&r._Str_12156===i)return!1;const n=new $e(t,e,s,i);return this._Str_5088.push(n),this._Str_4891=!0,!0}return!1}_Str_19336(){if(!this._Str_4891)return;let t,e=!0;if(this._Str_4047.length===this._Str_8341.length){for(const s of this._Str_4047)if(s){t=!1;for(const e of this._Str_8341)if(e&&e.type===s.type&&e._Str_5120===s._Str_5120&&e._Str_4659===s._Str_4659){t=!0;break}if(!t){e=!1;break}}}else e=!1;this._Str_5088.length>this._Str_14495.length&&(e=!1),e&&(this._Str_4891=!1)}_Str_17859(t,e){if(!t||!e)return;if(!this._Str_4542||!this._Str_4047.length&&!this._Str_5088.length&&!this._Str_4891||!this._Str_4795)return;const s=t.width,n=t.height;if(this._Str_19336(),!this._Str_2730||this._Str_2730.width!==s||this._Str_2730.height!==n){this._Str_2730&&(this._Str_2730.destroy(),this._Str_2730=null);const t=new i.Graphics;t.beginFill(16777215,0).drawRect(0,0,s,n).endFill(),this._Str_2730=t,this._Str_4891=!0}if(this._Str_4891){this._Str_8341=[],this._Str_14495=[],this._Str_2730&&this._Str_2730.beginFill(16777215,0).drawRect(0,0,s,n).endFill(),this._Str_11000(t);const i=e.getCoordinatePosition(this._normal);let r=null,a=0,o=0,c=0;for(;c<this._Str_4047.length;){const t=this._Str_4047[c];t&&(r=t.type,a=this._Str_2730.width-this._Str_2730.width*t._Str_5120/this._Str_2920.length,o=this._Str_2730.height-this._Str_2730.height*t._Str_4659/this._Str_2943.length,this._Str_4795._Str_17859(this._Str_2730,r,e.scale,i,a,o),this._Str_8341.push(new Je(r,t._Str_5120,t._Str_4659))),c++}for(c=0;c<this._Str_5088.length;){const t=this._Str_5088[c];if(t){a=this._Str_2730.width-this._Str_2730.width*t._Str_5120/this._Str_2920.length,o=this._Str_2730.height-this._Str_2730.height*t._Str_4659/this._Str_2943.length;const e=this._Str_2730.width*t._Str_9124/this._Str_2920.length,s=this._Str_2730.height*t._Str_12156/this._Str_2943.length;this._Str_2730.beginFill(16711680).drawRect(a-e,o-s,e,s).endFill(),this._Str_14495.push(new $e(t._Str_9124,t._Str_4659,t._Str_9124,t._Str_12156))}c++}this._Str_4891=!1}this._Str_24790(t,this._Str_2730)}_Str_24790(t,e){if(!t||!e)return;const s=h.a.instance.renderer.extract.canvas(e),n=h.a.instance.renderer.extract.canvas(t),r=n.getContext("2d");r.drawImage(s,0,0);const a=r.getImageData(0,0,n.width,n.height),o=a.data;for(let i=0;i<o.length;i+=4){const t=o[i+1],e=o[i+2];o[i]||t||e||(o[i+3]=0)}r.putImageData(a,0,0);const c=i.Texture.from(n);c&&t.clear().beginTextureFill({texture:c}).drawRect(0,0,c.width,c.height).endFill()}}return t.ZERO_POINT=new i.Point(0,0),t.TYPE_UNDEFINED=0,t.TYPE_WALL=1,t.TYPE_FLOOR=2,t.TYPE_LANDSCAPE=3,t._uniqueIdCounter=1,t})(),is=(()=>{class t{constructor(t,e=-1,s=1,i=-1,n=1){this._normalMinX=e,this._normalMaxX=s,this._normalMinY=i,this._normalMaxY=n,this._asset=t}get asset(){return this._asset}get normalMinX(){return this._normalMinX}get normalMaxX(){return this._normalMaxX}get normalMinY(){return this._normalMinY}get normalMaxY(){return this._normalMaxY}dispose(){this._asset=null}}return t._Str_3268=-1,t._Str_3271=1,t})(),ns=(()=>{class t{constructor(){this._bitmaps=[]}dispose(){for(const t of this._bitmaps)t&&t.dispose();this._bitmaps=null}_Str_16790(t,e=-1,s=1,i=-1,n=1){this._bitmaps.push(new is(t,e,s,i,n))}getAsset(t){if(!t)return null;for(const e of this._bitmaps)if(e&&t.x>=e.normalMinX&&t.x<=e.normalMaxX&&t.y>=e.normalMinY&&t.y<=e.normalMaxY)return e.asset;return null}}return t._Str_3268=-1,t._Str_3271=1,t})();class rs{constructor(){this._sizes=[],this._maskVisualizations=new Map,this._assetNames=new Map,this._lastMaskVisualization=null,this._lastSize=-1}dispose(){if(this._maskVisualizations){for(const t of this._maskVisualizations.values())t&&t.dispose();this._maskVisualizations=null}this._lastMaskVisualization=null,this._sizes=null}_Str_24540(t){if(this._maskVisualizations.get(t))return null;const e=new ns;return this._maskVisualizations.set(t,e),this._sizes.push(t),this._sizes.sort(),e}_Str_8560(t){let e=0;for(;1<this._sizes.length;){if(this._sizes[1]>t){this._sizes[1]-t<t-this._sizes[0]&&(e=1);break}e=1}return e}_Str_24650(t){if(t===this._lastSize)return this._lastMaskVisualization;const e=this._Str_8560(t);return this._lastMaskVisualization=e<this._sizes.length?this._maskVisualizations.get(this._sizes[e]):null,this._lastSize=t,this._lastMaskVisualization}_Str_21021(t,e){const s=this._Str_24650(t);return s?s.getAsset(e):null}_Str_2125(t){return this._assetNames&&this._assetNames.get(t)||null}_Str_24425(t,e){this._assetNames&&this._assetNames.set(t,e)}}class as{constructor(){this._assetCollection=null,this._masks=new Map,this._data=null}get data(){return this._data}dispose(){if(this._assetCollection=null,this._data=null,this._masks&&this._masks.size){for(const t of this._masks.values())t&&t.dispose();this._masks.clear()}}initialize(t){this._data=t}_Str_6703(t){this.data&&(this._assetCollection=t,this._Str_22834(this.data,t))}_Str_22834(t,e){if(t&&e&&t.masks&&t.masks.length){let s=0;for(;s<t.masks.length;){const i=t.masks[s];if(i){const t=i.id;if(this._masks.get(t))continue;const s=new rs;if(i.visualizations&&i.visualizations.length){let t=0;for(;t<i.visualizations.length;){const n=i.visualizations[t];if(n){const t=n.size,i=s._Str_24540(t);if(i){const r=this._Str_25815(n.bitmaps,i,e);s._Str_24425(t,r)}}t++}}this._masks.set(t,s)}s++}}}_Str_25815(t,e,s){if(!t||!t.length)return null;let i=null;for(const n of t){if(!n)continue;const t=n.assetName,r=s.getAsset(t);if(!r)continue;let a=ns._Str_3268,o=ns._Str_3271,c=ns._Str_3268,h=ns._Str_3271;void 0!==n.normalMinX&&(a=n.normalMinX),void 0!==n.normalMaxX&&(o=n.normalMaxX),void 0!==n.normalMinY&&(c=n.normalMinY),void 0!==n.normalMaxY&&(h=n.normalMaxY),r.flipH||(i=t),e._Str_16790(r,a,o,c,h)}return i}_Str_17859(t,e,s,n,r,a){const o=this._masks.get(e);if(!o)return!0;const c=o._Str_21021(s,n);if(!c)return!0;const h=c.texture;if(!h)return!0;const l=new i.Point(r+c.offsetX,a+c.offsetY),u=new i.Matrix;let _=1,d=1,g=0,m=0;return c.flipH&&(_=-1,g=-h.width),c.flipV&&(d=-1,m=-h.height),u.scale(_,d),u.translate(l.x+g,l.y+m),t.beginTextureFill({texture:h,matrix:u}).drawRect(u.tx,u.ty,h.width,h.height).endFill(),!0}_Str_8361(t){return this._masks&&this._masks.size&&this._masks.get(t)||null}}class os{static _Str_16640(t){if(!t)return null;const e=new i.Matrix;e.scale(-1,1),e.translate(t.width,0);const s=new i.Graphics;return s.beginTextureFill({texture:t,matrix:e}).drawRect(0,0,t.width,t.height).endFill(),K.a.generateTexture(s)}static _Str_20706(t){if(!t)return null;const e=new i.Matrix;e.scale(1,-1),e.translate(0,t.height);const s=new i.Graphics;return s.beginTextureFill({texture:t,matrix:e}).drawRect(0,0,t.width,t.height).endFill(),K.a.generateTexture(s)}static _Str_20356(t){if(!t)return null;const e=new i.Matrix;e.scale(-1,-1),e.translate(t.width,t.height);const s=new i.Graphics;return s.beginTextureFill({texture:t,matrix:e}).drawRect(0,0,t.width,t.height).endFill(),K.a.generateTexture(s)}}class cs{constructor(t,e,s,i,n){this._x=t,this._y=e,this._speedX=s,this._speedY=i,this._bitmapData=n,isNaN(this._x)&&(this._x=0),isNaN(this._y)&&(this._y=0),isNaN(this._speedX)&&(this._speedX=0),isNaN(this._speedY)&&(this._speedY=0)}get bitmapData(){return this._bitmapData}dispose(){this._bitmapData=null}_Str_6729(t,e,s,n,r){let a=this._x,o=this._y;return s>0&&(a+=this._speedX/s*r/1e3),n>0&&(o+=this._speedY/n*r/1e3),new i.Point(a%1*t,o%1*e)}}class hs{constructor(t,e){if(this._color=0,this._bitmapData=null,this._isDisposed=!1,this._color=0,this._bitmapData=null,this._isDisposed=!1,this._items=[],t&&e)for(const s of t){if(!s)continue;const t=s.asset;if(t){const i=e.getAsset(t);i&&this._items.push(new cs(s.x,s.y,s.speedX,s.speedY,i))}}}get disposed(){return this._isDisposed}dispose(){if(this._isDisposed=!0,this._bitmapData&&(this._bitmapData.destroy(),this._bitmapData=null),this._items){for(const t of this._items)t&&t.dispose();this._items=[]}}_Str_3355(){this._bitmapData&&(this._bitmapData.destroy(),this._bitmapData=null)}render(t,e,s,n,r,a,o,c,h,l,u){if(null!=t&&t.width==e&&t.height==s||(null==this._bitmapData||this._bitmapData.width!=e||this._bitmapData.height!=s?(null!=this._bitmapData&&this._bitmapData.destroy(),this._bitmapData=(new i.Graphics).drawRect(0,0,e,s)):this._bitmapData.beginFill(16777215).drawRect(0,0,this._bitmapData.width,this._bitmapData.height).endFill(),t=this._bitmapData),o>0&&c>0){let e=0;for(;e<this._items.length;){const s=this._items[e];if(null!=s){const e=s._Str_6729(o,c,h,l,u);if(e.x=e.x-r,e.y=e.y-a,s.bitmapData)if(e.x>0&&e.x+s.bitmapData.width<t.width)t.beginFill(65280).beginTextureFill({texture:s.bitmapData.texture,matrix:new i.Matrix(1,0,0,1,e.x,e.y)}).drawRect(e.x,e.y,s.bitmapData.width,s.bitmapData.height).endFill();else if(e.x>0){const n=t.width-e.x;t.beginFill(65280).beginTextureFill({texture:s.bitmapData.texture,matrix:new i.Matrix(1,0,0,1,e.x,e.y)}).drawRect(e.x,e.y,n,s.bitmapData.height).endFill()}else{const n=s.bitmapData.width+e.x;t.beginFill(65280).beginTextureFill({texture:s.bitmapData.texture,matrix:new i.Matrix(1,0,0,1,e.x,e.y)}).drawRect(0,e.y,n,s.bitmapData.height).endFill()}}e++}}return t}}let ls=(()=>{class t{constructor(t,e,s,i=0){this._material=t,this._offset=i,this._align=s,this._color=e,this._bitmapData=null,this._isDisposed=!1}get offset(){return this._offset}get align(){return this._align}get disposed(){return this._isDisposed}dispose(){this._isDisposed=!0,this._material=null,this._Str_3355()}_Str_3355(){this._bitmapData&&(this._bitmapData.destroy(),this._bitmapData=null)}render(e,s,n,r,a,o,c){e&&e.width===s&&e.height===n||(e=null);let h=null;if(this._material)h=this._material.render(null,s,n,r,a,o,c+this.offset,this.align===t.ALIGN_TOP),h&&h!==e&&(this._bitmapData&&this._bitmapData.destroy(),this._bitmapData=h.clone(),h=this._bitmapData);else if(e)e.beginFill(16777215).drawRect(0,0,s,n).endFill(),h=e;else{if(this._bitmapData&&this._bitmapData.width===s&&this._bitmapData.height===n)return this._bitmapData;this._bitmapData&&this._bitmapData.destroy();const t=(new i.Graphics).beginFill(16777215).drawRect(0,0,s,n).endFill();this._bitmapData=t,h=this._bitmapData}if(h&&(h.tint=this._color,e&&h!==e)){let t=Cs.getTextureCache(h);t||(t=K.a.generateTexture(h,new i.Rectangle(0,0,s,n)),Cs.addTextureCache(h,t)),e.beginTextureFill({texture:t}).drawRect(0,0,s,n).endFill(),h=e}return h}_Str_8547(){return this._material}_Str_751(){return this._color}}return t._Str_1934=0,t.ALIGN_TOP=1,t._Str_3606=2,t._Str_6914=t.ALIGN_TOP,t})();class us{constructor(t,e,s){this._layers=[],this._geometry=s,this._cachedBitmapData=null,this._cachedBitmapNormal=new m.a,this._isCached=!1,this._hasAnimationLayers=!1,e<0&&(e=0);let i=0;for(;i<e;)this._layers.push(null),i++}get geometry(){return this._geometry}get _Str_20530(){return this._hasAnimationLayers}dispose(){if(this._layers&&this._layers.length){for(const t of this._layers)t&&t.dispose();this._layers=null}this._geometry=null,this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._cachedBitmapNormal&&(this._cachedBitmapNormal=null)}_Str_3355(){if(this._isCached){if(this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._cachedBitmapNormal&&this._cachedBitmapNormal.assign(new m.a),this._layers&&this._layers.length)for(const t of this._layers)t&&t._Str_3355();this._isCached=!1}}_Str_21464(t,e,s,i,n=0){if(t<0||t>this._layers.length)return!1;let r=this._layers[t];return r&&r.dispose(),r=new ls(e,s,i,n),this._layers[t]=r,!0}_Str_23489(t,e,s){if(t<0||t>this._layers.length)return!1;let i=this._layers[t];return i&&i.dispose(),i=new hs(e,s),this._layers[t]=i,this._hasAnimationLayers=!0,!0}_Str_8988(){return this._layers}render(t,e,s,n,r,a=0,o=0,c=0,h=0,l=0,u=0,_=0){if(e<1&&(e=1),s<1&&(s=1),t&&t.width===e&&t.height===s||(t=null),this._cachedBitmapData)if(this._cachedBitmapData.width===e&&this._cachedBitmapData.height===s&&m.a.isEqual(this._cachedBitmapNormal,n)){if(!this._Str_20530){if(t){const n=K.a.generateTexture(this._cachedBitmapData,new i.Rectangle(0,0,e,s));if(n)return t.beginTextureFill({texture:n}).drawRect(0,0,n.width,n.height).endFill(),t}return this._cachedBitmapData}}else this._cachedBitmapData.destroy(),this._cachedBitmapData=null;if(this._isCached=!0,this._cachedBitmapData)this._cachedBitmapData.beginFill(16777215).drawRect(0,0,e,s).endFill();else{const t=(new i.Graphics).beginFill(16777215).drawRect(0,0,e,s).endFill();this._cachedBitmapData=t}if(t||(t=this._cachedBitmapData),this._cachedBitmapNormal.assign(n),this._layers&&this._layers.length)for(const i of this._layers)i&&(i instanceof ls?i.render(t,e,s,n,r,a,o):i instanceof hs&&i.render(t,e,s,n,a,o,c,h,l,u,_));if(t&&t!==this._cachedBitmapData){const e=K.a.generateTexture(t,new i.Rectangle(0,0,t.width,t.height));return this._cachedBitmapData.beginTextureFill({texture:e}).drawRect(0,0,t.width,t.height).endFill(),t}return this._cachedBitmapData}}class _s{constructor(){this._planeVisualizations=new Map,this._sizes=[],this._lastPlaneVisualization=null,this._lastSize=-1}isStatic(t){return!0}dispose(){for(const t of this._planeVisualizations.values())t&&t.dispose();this._planeVisualizations=null,this._lastPlaneVisualization=null,this._sizes=null,this._lastSize=-1}_Str_3355(){for(const t of this._planeVisualizations.values())t&&t._Str_3355()}_Str_20305(t,e,s){if(this._planeVisualizations.get(t.toString()))return null;const i=new us(t,e,s);return this._planeVisualizations.set(t.toString(),i),this._sizes.push(t),this._sizes.sort(),i}_Str_8560(t){let e=0,s=1;for(;s<this._sizes.length;){if(this._sizes[s]>t){this._sizes[s]-t<t-this._sizes[s-1]&&(e=s);break}e=s,s++}return e}_Str_6009(t){if(t===this._lastSize)return this._lastPlaneVisualization;const e=this._Str_8560(t);return this._lastPlaneVisualization=e<this._sizes.length?this._planeVisualizations.get(this._sizes[e].toString()):null,this._lastSize=t,this._lastPlaneVisualization}_Str_8988(){return this._Str_6009(this._lastSize)._Str_8988()}}let ds=(()=>{class t extends _s{render(t,e,s,i,n,r,a,o){const c=this._Str_6009(i);if(!c||!c.geometry)return null;const h=c.geometry.getScreenPoint(new m.a(0,0,0)),l=c.geometry.getScreenPoint(new m.a(0,s/c.geometry.scale,0)),u=c.geometry.getScreenPoint(new m.a(e/c.geometry.scale,0,0));let _=0,d=0;if(h&&l&&u){e=Math.round(Math.abs(h.x-u.x)),s=Math.round(Math.abs(h.x-l.x));const t=h.x-c.geometry.getScreenPoint(new m.a(1,0,0)).x;_=a*Math.trunc(Math.abs(t)),d=o*Math.trunc(Math.abs(t))}return c.render(t,e,s,n,r,_,d)}}return t._Str_2531=16777215,t._Str_5433=45,t._Str_5509=30,t})(),gs=(()=>{class t{constructor(t,e,s=1){if(this._cells=[],this._repeatMode=s,this._width=t<1?1:t,this._cachedBitmapData=null,this._cachedBitmapNormal=null,this._cachedBitmapDataOffsetX=0,this._cachedBitmapDataOffsetY=0,this._isCached=!1,this._isStatic=!0,e&&e.length){let t=0;for(;t<e.length;){const s=e[t];s&&(this._cells.push(s),s.isStatic||(this._isStatic=!1)),t++}}}get isStatic(){return this._isStatic}_Str_24523(){return!(this._repeatMode===t._Str_9685)}get width(){return this._width}dispose(){if(this._cells&&this._cells.length){for(const t of this._cells)t&&t.dispose();this._cells=null}this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._cachedBitmapNormal&&(this._cachedBitmapNormal=null)}_Str_3355(){if(this._isCached){if(this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._cachedBitmapNormal&&(this._cachedBitmapNormal.x=0,this._cachedBitmapNormal.y=0,this._cachedBitmapNormal.z=0),this._cells&&this._cells.length)for(const t of this._cells)t&&t._Str_3355();this._isCached=!1}}render(e,s,n,r){let a=0;if(this._repeatMode==t._Str_9685&&(a=this._Str_19857(this._cells,s),e=a),this._cachedBitmapNormal||(this._cachedBitmapNormal=new m.a),this.isStatic){if(this._cachedBitmapData){if(this._cachedBitmapData.height===e&&m.a.isEqual(this._cachedBitmapNormal,s)&&this._cachedBitmapDataOffsetX===n&&this._cachedBitmapDataOffsetY===r)return this._cachedBitmapData;this._cachedBitmapData.destroy(),this._cachedBitmapData=null}}else this._cachedBitmapData&&(this._cachedBitmapData.height===e?this._cachedBitmapData.beginFill(16777215).drawRect(0,0,this._cachedBitmapData.width,e).endFill():(this._cachedBitmapData.destroy(),this._cachedBitmapData=null));if(this._isCached=!0,this._cachedBitmapData||(this._cachedBitmapData=(new i.Graphics).beginFill(16777215).drawRect(0,0,this._width,e).endFill()),this._cachedBitmapNormal.assign(s),this._cachedBitmapDataOffsetX=n,this._cachedBitmapDataOffsetY=r,!this._cells.length)return this._cachedBitmapData;switch(this._repeatMode){case t._Str_9685:this._Str_25839(s);break;case t._Str_6087:console.log("tru2");break;case t._Str_6114:console.log("tru3");break;case t._Str_6187:console.log("tru4");break;case t._Str_6063:console.log("tru5");break;default:this._Str_18711(s,n,r)}return this._cachedBitmapData}_Str_19857(t,e){if(!t||!t.length)return 0;let s=0,i=0;for(;i<t.length;){const n=t[i];n&&(s+=n._Str_9599(e)),i++}return s}_Str_4757(t,e,s,i,n=0,r=0){if(!t||!t.length||!this._cachedBitmapData)return e;let a=0;for(;a<t.length;){let o=null;if(o=s?t[a]:t[t.length-1-a],o){const t=o.render(i,n,r);if(t&&(s||(e-=t.height),t.y=e,this._cachedBitmapData.addChild(t),s&&(e+=t.height),s&&e>=this._cachedBitmapData.height||!s&&e<=0))return e}a++}return e}_Str_25839(t){this._cells.length&&this._cachedBitmapData&&this._Str_4757(this._cells,0,!0,t)}_Str_18711(t,e,s){if(!this._cells.length||!this._cachedBitmapData)return;let i=0;for(;i<this._cachedBitmapData.height;)if(i=this._Str_4757(this._cells,i,!0,t,e,s),!i)return}_Str_22299(){return this._cells}}return t._Str_9685=0,t._Str_7916=1,t._Str_6087=2,t._Str_6114=3,t._Str_6187=4,t._Str_6063=5,t})(),ms=(()=>{class t{constructor(e,s=1,i=1,n=-1,r=1,a=-1,o=1){this._repeatMode=1,this._align=1,this._cachedBitmapNormal=null,this._cachedBitmapHeight=0,this._isCached=!1,this._isStatic=!0,this._normalMinX=-1,this._normalMaxX=1,this._normalMinY=-1,this._normalMaxY=1,this._columns=[],e<1&&(e=1);let c=0;for(;c<e;)this._columns.push(null),c++;this._repeatMode=s,this._align=i,this._normalMinX=n,this._normalMaxX=r,this._normalMinY=a,this._normalMaxY=o,this._repeatMode==t._Str_9127&&(this._isStatic=!1)}static _Str_12526(t){return es._Str_1612(1,0,17631*t)[0]%t}get normalMinX(){return this._normalMinX}get normalMaxX(){return this._normalMaxX}get normalMinY(){return this._normalMinY}get normalMaxY(){return this._normalMaxY}_Str_14945(){return this._align===t._Str_3606}get isStatic(){return this._isStatic}dispose(){this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._cachedBitmapNormal&&(this._cachedBitmapNormal=null)}_Str_3355(){if(this._isCached){if(this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._cachedBitmapNormal&&(this._cachedBitmapNormal.x=0,this._cachedBitmapNormal.y=0,this._cachedBitmapNormal.z=0),this._columns&&this._columns.length)for(const t of this._columns)t&&t._Str_3355();this._isCached=!1}}_Str_22372(t,e,s,i=1){if(t<0||t>=this._columns.length)return!1;const n=new gs(e,s,i),r=this._columns[t];return r&&r.dispose(),this._columns[t]=n,n&&!n.isStatic&&(this._isStatic=!1),!0}render(e,s,n,r,a,o,c,h){if(s<1&&(s=1),n<1&&(n=1),e&&e.width===s&&e.height===n||(e=null),this._cachedBitmapNormal||(this._cachedBitmapNormal=new m.a),this.isStatic){if(this._cachedBitmapData){if(this._cachedBitmapData.width===s&&this._cachedBitmapData.height==n&&m.a.isEqual(this._cachedBitmapNormal,r))return e?(this._Str_17578(e,this._cachedBitmapHeight,c,h),e):this._cachedBitmapData;this._cachedBitmapData.destroy(),this._cachedBitmapData=null}}else this._cachedBitmapData&&(this._cachedBitmapData.width===s&&this._cachedBitmapData.height===n?this._cachedBitmapData.beginFill(16777215).drawRect(0,0,s,n).endFill():(this._cachedBitmapData.destroy(),this._cachedBitmapData=null));if(this._isCached=!0,this._cachedBitmapNormal.assign(r),!a){if(this._cachedBitmapHeight=n,this._cachedBitmapData)this._cachedBitmapData.beginFill(16777215).drawRect(0,0,s,n).endFill();else{const t=(new i.Graphics).beginFill(16777215).drawRect(0,0,s,n).endFill();this._cachedBitmapData=t}return e?(this._Str_17578(e,n,c,h),e):this._cachedBitmapData}if(!this._cachedBitmapData){this._cachedBitmapHeight=n;const t=(new i.Graphics).beginFill(16777215).drawRect(0,0,s,n).endFill();this._cachedBitmapData=t}const l=[];let u=0;for(;u<this._columns.length;){const t=this._columns[u];if(t){const e=t.render(n,r,o,c);e&&l.push(e)}u++}if(!l.length)return e||this._cachedBitmapData;let _=0;switch(this._repeatMode){case t._Str_6087:case t._Str_6114:case t._Str_6187:case t._Str_6063:case t._Str_9127:break;default:_=this._Str_18711(this._cachedBitmapData,l)}return this._cachedBitmapHeight=_,e?(this._Str_17578(e,_,c,h),e):this._cachedBitmapData}_Str_17578(e,s,n,r){if(!e||!this._cachedBitmapData||e===this._cachedBitmapData)return;let a;r||(n=e.height-s-n),a=new i.Rectangle(0,this._align==t.ALIGN_TOP?0:this._cachedBitmapData.height-this._cachedBitmapHeight,this._cachedBitmapData.width,this._cachedBitmapHeight);const o=K.a.generateTexture(this._cachedBitmapData,a);o&&e.beginTextureFill({texture:o}).drawRect(0,n,a.width,a.height).endFill()}_Str_25859(t){if(!t||!t.length)return 0;let e=0;for(const s of t)s&&(e+=s.width);return e}_Str_4606(e,s,n,r){if(!e||!s||!s.length)return new i.Point(n,0);let a=0,o=null,c=0;for(;c<s.length;){if(o=r?s[c]:s[s.length-1-c],null!=o){r||(n-=o.width);let s=0;this._align==t._Str_3606&&(s=e.height-o.height);let c=Cs.getTextureCache(o);if(c||(c=K.a.generateTexture(o,new i.Rectangle(0,0,o.width,o.height)),Cs.addTextureCache(o,c)),e.beginTextureFill({texture:c}),e.drawRect(n,s,c.width,c.height),e.endFill(),o.height>a&&(a=o.height),r&&(n+=o.width),r&&n>=e.width||!r&&n<=0)return new i.Point(n,a)}c++}return new i.Point(n,a)}_Str_18711(t,e){if(!t||!e||!e.length)return 0;this._Str_25859(e);let s=0,i=0;for(;s<t.width;){const n=this._Str_4606(t,e,s,!0);if(s=n.x,n.y>i&&(i=n.y),!n.x)return i}return i}_Str_23721(e){if(this._repeatMode===t._Str_9127){const s=[];let i=0;for(;i<e;){const e=this._columns[t._Str_12526(this._columns.length)];if(e){if(s.push(e),!(e.width>1))break;i+=e.width}}return s}return this._columns}}return t._Str_7916=1,t._Str_6087=2,t._Str_6114=3,t._Str_6187=4,t._Str_6063=5,t._Str_9127=6,t._Str_18632=t._Str_7916,t._Str_3268=-1,t._Str_3271=1,t.ALIGN_TOP=1,t._Str_3606=2,t._Str_6914=t.ALIGN_TOP,t})(),ps=(()=>{class t{constructor(){this._planeMaterialItems=[],this._isCached=!1}dispose(){if(this._planeMaterialItems&&this._planeMaterialItems.length){for(const t of this._planeMaterialItems)t&&t.dispose();this._planeMaterialItems=null}this._isCached=!1}_Str_3355(){if(this._isCached){if(this._planeMaterialItems&&this._planeMaterialItems.length)for(const t of this._planeMaterialItems)t&&t._Str_3355();this._isCached=!1}}_Str_24503(t,e,s,i=-1,n=1,r=-1,a=1){const o=new ms(t,e,s,i,n,r,a);return this._planeMaterialItems.push(o),o}_Str_21968(t){if(!t)return null;if(this._planeMaterialItems&&this._planeMaterialItems.length)for(const e of this._planeMaterialItems)if(e&&t.x>=e.normalMinX&&t.x<=e.normalMaxX&&t.y>=e.normalMinY&&t.y<=e.normalMaxY)return e;return null}render(t,e,s,i,n,r,a,o){e<1&&(e=1),s<1&&(s=1);const c=this._Str_21968(i);return c?(this._isCached=!0,c.render(t,e,s,i,n,r,a,o)):null}}return t._Str_3268=-1,t._Str_3271=1,t})();class fs{constructor(t,e=null,s=null,n=0){if(this._extraItemCount=0,this._cachedBitmapData=null,this._texture=t,this._extraItemOffsets=[],this._extraItemAssets=[],this._extraItemCount=0,e&&e.length&&n>0){let t=0;for(;t<e.length;){const s=e[t];s&&this._extraItemAssets.push(s),t++}if(this._extraItemAssets.length){if(s){let t=0;for(;t<s.length;){const e=s[t];e&&this._extraItemOffsets.push(new i.Point(e.x,e.y)),t++}}this._extraItemCount=n}}}get isStatic(){return 0==this._extraItemCount}dispose(){this._texture&&(this._texture.dispose(),this._texture=null),this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._extraItemAssets=null,this._extraItemOffsets=null,this._extraItemCount=0}_Str_3355(){this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null)}_Str_9599(t){if(this._texture){const e=this._texture._Str_4913(t);if(e)return e.height}return 0}render(t,e,s){if(!this._texture)return null;const n=this._texture._Str_4913(t);if(!n)return null;let r=null;if(0!==e||0!==s){for(;e<0;)e+=n.width;for(;s<0;)s+=n.height;const t=new i.TilingSprite(n,n.width,n.height);t.tilePosition.x=e%n.width,t.tilePosition.y=s%n.height,t.uvRespectAnchor=!0,e&&(t.anchor.x=1,t.scale.x=-1),s&&(t.anchor.y=1,t.scale.y=-1),r=t}else r=new i.Sprite(n);return r||null}_Str_2125(t){return null==this._texture?null:this._texture._Str_2125(t)}}let Es=(()=>{class t{constructor(t,e=-1,s=1,i=-1,n=1,r=null){this._normalMinX=e,this._normalMaxX=s,this._normalMinY=i,this._normalMaxY=n,this._assetName=r,this._bitmap=t}get bitmap(){return this._bitmap}get normalMinX(){return this._normalMinX}get normalMaxX(){return this._normalMaxX}get normalMinY(){return this._normalMinY}get normalMaxY(){return this._normalMaxY}get assetName(){return this._assetName}dispose(){this._bitmap=null}}return t._Str_3268=-1,t._Str_3271=1,t})(),Ss=(()=>{class t{constructor(){this._bitmaps=[]}dispose(){if(this._bitmaps){for(const t of this._bitmaps)t&&t.dispose();this._bitmaps=null}}_Str_16790(t,e=-1,s=1,i=-1,n=1,r=null){this._bitmaps.push(new Es(t,e,s,i,n,r))}_Str_4913(t){const e=this._Str_21702(t);return e?e.bitmap:null}_Str_21702(t){if(!t)return null;for(const e of this._bitmaps)if(e&&t.x>=e.normalMinX&&t.x<=e.normalMaxX&&t.y>=e.normalMinY&&t.y<=e.normalMaxY)return e;return null}_Str_2125(t){const e=this._Str_21702(t);return e?e.assetName:null}}return t._Str_3268=-1,t._Str_3271=1,t})(),vs=(()=>{class t{constructor(){this._assetCollection=null,this._textures=new Map,this._materials=new Map,this._planes=new Map,this._geometries=new Map,this._data=null}get data(){return this._data}get _Str_2697(){return this._assetCollection}initializeDimensions(t,e){return!0}dispose(){if(this._planes){for(const t of this._planes.values())t&&t.dispose();this._planes=null}if(this._materials&&(this._Str_21781(),this._materials=null),this._textures&&(this._Str_21447(),this._textures=null),this._geometries){for(const t of this._geometries.values())t&&t.dispose();this._geometries=null}this._data=null,this._assetCollection=null}_Str_3355(){for(const t of this._planes.values())t&&t._Str_3355();for(const t of this._materials.values())t&&t._Str_3355()}initialize(t){this._data=t}_Str_24005(){this._Str_21447(),this._Str_21781(),this._Str_22054()}_Str_21781(){for(const t of this._materials.values())t&&t.dispose();this._materials.clear()}_Str_21447(){for(const t of this._textures.values())t&&t.dispose();this._textures.clear()}_Str_10114(t){return this._textures.get(t)}_Str_8547(t){return this._materials.get(t)}_Str_3491(t){return this._planes.get(t)}_Str_3453(t,e){return!!e&&!this._planes.get(t)&&(this._planes.set(t,e),!0)}_Str_6703(t){this._data&&(this._assetCollection=t,this._Str_22054())}_Str_22054(){this._data&&(this._Str_25281(),this.initializePlanes())}_Str_25281(){this._data.textures&&this._data.textures.length&&this._Str_24250(this._data.textures,this._Str_2697),this._data.materials&&this._data.materials.length&&this._Str_22388(this._data.materials)}initializePlanes(){}_Str_24250(t,e){if(t&&e&&t.length)for(const s of t){if(!s)continue;const t=s.id;if(!this._textures.get(t)){const i=new Ss;if(s.bitmaps&&s.bitmaps.length)for(const t of s.bitmaps){if(!t)continue;const s=t.assetName;let n=Ss._Str_3268,r=Ss._Str_3271,a=Ss._Str_3268,o=Ss._Str_3271;void 0!==t.normalMinX&&(n=t.normalMinX),void 0!==t.normalMaxX&&(r=t.normalMaxX),void 0!==t.normalMinY&&(a=t.normalMinY),void 0!==t.normalMaxY&&(o=t.normalMaxY);const c=e.getAsset(s);if(c){const t=c.texture;if(t){let e=t;c.flipH&&(e=os._Str_16640(t)),i._Str_16790(e,n,r,a,o,s)}}}this._textures.set(t,i)}}}_Str_22388(t){if(t&&t.length)for(const e of t){if(!e)continue;const t=e.id,s=new ps;if(e.matrices&&e.matrices.length)for(const i of e.matrices){if(!i)continue;let t=i.repeatMode,e=i.align;const n=ms._Str_3268,r=ms._Str_3271,a=ms._Str_3268,o=ms._Str_3271;switch(t){case"borders":t=ms._Str_6087;break;case"center":t=ms._Str_6114;break;case"first":t=ms._Str_6187;break;case"last":t=ms._Str_6063;break;case"random":t=ms._Str_9127;break;default:t=ms._Str_18632}switch(e){case"top":e=ms.ALIGN_TOP;break;case"bottom":e=ms._Str_3606;break;default:e=ms._Str_6914}if(i.columns&&i.columns.length){const c=s._Str_24503(i.columns.length,t,e,n,r,a,o);let h=0;for(;h<i.columns.length;){const t=i.columns[h];t&&this._Str_24431(t,c,h),h++}}}this._materials.set(t,s)}}_Str_24431(t,e,s){if(!t||!e)return;let i=gs._Str_7916;const n=t.width,r=this._Str_25217(t);switch(t.repeatMode){case"borders":i=gs._Str_6087;break;case"center":i=gs._Str_6114;break;case"first":i=gs._Str_6187;break;case"last":i=gs._Str_6063;break;case"none":i=gs._Str_9685;break;default:i=gs._Str_7916}e._Str_22372(s,n,r,i)}_Str_25217(t){if(!t||!t.cells||!t.cells.length)return null;const e=[];let s=0;for(;s<t.cells.length;){const i=t.cells[s];if(i){const t=i.textureId;let s=null,n=null,r=null,a=0;if(i.extras&&i.extras.length){const t=i.extras[0],e=t.types,r=t.offsets;if(e&&r&&e.length&&r.length){const i=r[0];s=this._Str_25465(e[0]),n=this._Str_24448(i),a=n.length,t.limitMax&&(a=t.limitMax)}}if(s&&s.length){r=[];for(const t of s){if(!t)continue;const e=this._assetCollection.getAsset(t);e&&r.push(e)}}const o=this._Str_10114(t),c=new fs(o,r,n,a);e.push(c)}s++}return e&&e.length?e:null}_Str_25465(t){const e=[];if(t&&t.types&&t.types.length){let s=0;for(;s<t.types.length;){const i=t.types[s].assetName;i&&e.push(i),s++}}return e}_Str_24448(t){const e=[];if(t&&t.offsets&&t.offsets.length){let s=0;for(;s<t.offsets.length;){const n=t.offsets[s];e.push(new i.Point(n.x,n.y)),s++}}return e}_Str_17204(t,e,s){(e=Math.abs(e))>90&&(e=90),(s=Math.abs(s))>90&&(s=90);const i=`${t}_${Math.round(e)}_${Math.round(s)}`;let n=this._geometries.get(i);return n||(n=new g.a(t,new m.a(e,s),new m.a(-10,0,0)),this._geometries.set(i,n),n)}_Str_9137(t,e){if(t&&e&&e&&e.length)for(const s of e){if(!s)continue;const e=s.size;let i=ds._Str_5433,n=ds._Str_5509;s.horizontalAngle&&(i=s.horizontalAngle),s.verticalAngle&&(n=s.verticalAngle);const r=s.layers,a=t._Str_20305(e,r&&r.length||0,this._Str_17204(e,i,n));if(a&&r&&r.length){let t=0;for(;t<r.length;){const e=r[t];if(e){let s=null,i=ls._Str_6914,n=ds._Str_2531,r=ls._Str_1934;e.materialId&&(s=this._Str_8547(e.materialId)),e.color&&(n=e.color),e.offset&&(r=e.offset),e.align&&("bottom"===e.align?i=ls._Str_3606:"top"==e.align&&(i=ls.ALIGN_TOP)),a._Str_21464(t,s,n,i,r)}t++}}}}render(t,e,s,i,n,r,a,o=0,c=0,h=0,l=0,u=0){return null}getTextureIdentifier(t,e){return t.toString()}_Str_8988(e){let s=this._Str_3491(e);return s||(s=this._Str_3491(t.DEFAULT)),s._Str_8988()}}return t.DEFAULT="default",t})(),bs=(()=>{class t extends _s{constructor(){super(...arguments),this._width=0,this._height=0}isStatic(t){const e=this._Str_6009(t);return e?!e._Str_20530:super.isStatic(t)}initializeDimensions(t,e){t<0&&(t=0),e<0&&(e=0),t===this._width&&e===this._height||(this._width=t,this._height=e)}render(t,e,s,i,n,r,a,o,c,h,l){const u=this._Str_6009(i);if(!u||!u.geometry)return null;const _=u.geometry.getScreenPoint(new m.a(0,0,0)),d=u.geometry.getScreenPoint(new m.a(0,0,1)),g=u.geometry.getScreenPoint(new m.a(0,1,0));if(_&&d&&g){e=Math.round(Math.abs((_.x-g.x)*e/u.geometry.scale)),s=Math.round(Math.abs((_.y-d.y)*s/u.geometry.scale));const i=a*Math.abs(_.x-g.x),m=o*Math.abs(_.y-d.y),p=c*Math.abs(_.x-g.x),f=h*Math.abs(_.y-d.y);return u.render(t,e,s,n,r,i,m,p,f,c,h,l)}return null}}return t._Str_2531=16777215,t._Str_5433=45,t._Str_5509=30,t})(),Is=(()=>{class t extends vs{constructor(){super(...arguments),this._landscapeWidth=0,this._landscapeHeight=0}initializeDimensions(t,e){return t<0&&(t=0),e<0&&(e=0),this._landscapeWidth=t,this._landscapeHeight=e,!0}initializePlanes(){if(!this.data)return;const t=this.data.landscapes;t&&t.length&&this._Str_25478(t)}_Str_25478(t){if(!t)return;const e=Math.trunc(654321*Math.random());for(const s in t){const i=t[s];if(!i)continue;const n=i.id,r=i.animatedVisualizations,a=new bs;for(const t of r){if(!t)continue;const s=t.size;let i=bs._Str_5433,n=bs._Str_5509;t.horizontalAngle&&(i=t.horizontalAngle),t.verticalAngle&&(n=t.verticalAngle);const r=t.layers,o=t.animationLayers,c=r&&r.length||0,l=o&&o.length||0,u=a._Str_20305(s,c+l||0,this._Str_17204(s,i,n));if(u){es._Str_17384(e);let t=0;if(c)for(;t<r.length;){const e=r[t];if(e){let s=null,i=ls._Str_6914,n=bs._Str_2531,r=ls._Str_1934;e.materialId&&(s=this._Str_8547(e.materialId)),e.color&&(n=e.color),e.offset&&(r=e.offset),e.align&&("bottom"===e.align?i=ls._Str_3606:"top"===e.align&&(i=ls.ALIGN_TOP)),u._Str_21464(t,s,n,i,r)}t++}if(t=0,l){const e=[];for(;t<o.length;){const s=o[t];if(s){const t=s.animationItems;if(t&&t.length)for(const s of t)if(s){const t=s.assetId,i=this._Str_21504(s.x||"",s.randomX||""),n=this._Str_21504(s.y||"",s.randomY||""),r=s.speedX?s.speedX/h.a.instance.getConfiguration("animation.fps"):0,a=s.speedY?s.speedY/h.a.instance.getConfiguration("animation.fps"):0;e.push({asset:t,x:i,y:n,speedX:r,speedY:a})}}t++}u._Str_23489(t,e,this._Str_2697)}}}this._Str_3453(n,a)||a.dispose()}}_Str_21504(t,e){let s=0;if(t.length>0&&"%"===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1),s=parseFloat(t)/100),e.length>0){const t=1e4,i=es._Str_1612(1,0,t)[0]/t;"%"===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1),s+=i*parseFloat(e)/100)}return s}render(e,s,i,n,r,a,o,c=0,h=0,l=0,u=0,_=0){let d=this._Str_3491(s);if(d||(d=this._Str_3491(t.DEFAULT)),!d)return null;e&&e.clear();let g=d.render(e,i,n,r,a,o,c,h,l,u,_);if(g&&g!==e&&(g=g.clone(),!g))return null;let m=null;return m=!d.isStatic(r)&&t._Str_3536>0?new ts(g,Math.round(_/t._Str_3536)*t._Str_3536+t._Str_3536):new ts(g,-1),m}getTextureIdentifier(t,e){return e?e.x<0?t+"_0":t+"_1":super.getTextureIdentifier(t,e)}}return t._Str_3536=500,t})();class Rs extends vs{initializePlanes(){if(!this.data)return;const t=this.data.floors;t&&t.length&&this._Str_24495(t)}_Str_24495(t){if(t)for(const e in t){const s=t[e];if(!s)continue;const i=s.id,n=s.visualizations,r=new ds;this._Str_9137(r,n),this._Str_3453(i,r)||r.dispose()}}render(t,e,s,i,n,r,a,o=0,c=0,h=0,l=0,u=0){let _=this._Str_3491(e);if(_||(_=this._Str_3491(vs.DEFAULT)),!_)return null;t&&t.beginFill(16777215).drawRect(0,0,t.width,t.height).endFill();let d=_.render(t,s,i,n,r,a,o,c);return d&&d!==t&&(d=d.clone(),!d)?null:new ts(d,-1)}}let Ts=(()=>{class t extends _s{render(t,e,s,i,n,r){const a=this._Str_6009(i);if(!a||!a.geometry)return null;const o=a.geometry.getScreenPoint(new m.a(0,0,0)),c=a.geometry.getScreenPoint(new m.a(0,0,s/a.geometry.scale)),h=a.geometry.getScreenPoint(new m.a(0,e/a.geometry.scale,0));return o&&c&&h&&(e=Math.round(Math.abs(o.x-h.x)),s=Math.round(Math.abs(o.y-c.y))),a.render(t,e,s,n,r)}}return t._Str_2531=16777215,t._Str_5433=45,t._Str_5509=30,t})();class Os extends vs{initializePlanes(){if(!this.data)return;const t=this.data.walls;t&&t.length&&this._Str_24495(t)}_Str_24495(t){if(t)for(const e in t){const s=t[e];if(!s)continue;const i=s.id,n=s.visualizations,r=new Ts;this._Str_9137(r,n),this._Str_3453(i,r)||r.dispose()}}render(t,e,s,i,n,r,a,o=0,c=0,h=0,l=0,u=0){let _=this._Str_3491(e);if(_||(_=this._Str_3491(vs.DEFAULT)),!_)return null;if(t){const e=t.getBounds();t.clear(),t.drawRect(e.x,e.y,e.width,e.height)}let d=_.render(t,s,i,n,r,a);return d&&d!==t&&(d=d.clone(),!d)?null:new ts(d,-1)}getTextureIdentifier(t,e){return e?`${t}_${e.x}_${e.y}_${e.z}`:super.getTextureIdentifier(t,e)}}class ys extends Gt.a{constructor(){super(),this._wallRasterizer=new Os,this._floorRasterizer=new Rs,this._landscapeRasterizer=new Is,this._maskManager=new as,this._initialized=!1}initialize(t){const e=t.wallData;e&&this._wallRasterizer.initialize(e);const s=t.floorData;s&&this._floorRasterizer.initialize(s);const i=t.landscapeData;i&&this._landscapeRasterizer.initialize(i);const n=t.maskData;return n&&this._maskManager.initialize(n),!0}onDispose(){this._wallRasterizer&&(this._wallRasterizer.dispose(),this._wallRasterizer=null),this._floorRasterizer&&(this._floorRasterizer.dispose(),this._floorRasterizer=null),this._landscapeRasterizer&&(this._landscapeRasterizer.dispose(),this._landscapeRasterizer=null),this._maskManager&&(this._maskManager.dispose(),this._maskManager=null),super.onDispose()}setGraphicAssetCollection(t){this._initialized||(this._wallRasterizer._Str_6703(t),this._floorRasterizer._Str_6703(t),this._landscapeRasterizer._Str_6703(t),this._maskManager._Str_6703(t),this._initialized=!0)}_Str_3355(){this._wallRasterizer&&this._wallRasterizer._Str_3355(),this._floorRasterizer&&this._floorRasterizer._Str_3355(),this._landscapeRasterizer&&this._landscapeRasterizer._Str_3355()}get wallRasterizer(){return this._wallRasterizer}get floorRasterizer(){return this._floorRasterizer}get landscapeRasterizer(){return this._landscapeRasterizer}get maskManager(){return this._maskManager}}let Cs=(()=>{class t extends Ut{constructor(){super(),this._data=null,this._roomPlaneParser=new Xe.a,this._roomPlaneBitmapMaskParser=new qe,this._geometryUpdateId=-1,this._directionX=0,this._directionY=0,this._directionZ=0,this._floorThickness=1,this._wallThickness=1,this._holeUpdateTime=NaN,this._Str_2540=[],this._Str_4864=[],this._Str_6648=[],this._roomScale=0,this._lastUpdateTime=-1e3,this._updateIntervalTime=250,this._wallType=null,this._floorType=null,this._landscapeType=null,this._colorBackgroundOnly=!0,this._color=16777215,this._redColor=255,this._greenColor=255,this._blueColor=255,this._typeVisibility=[],this._Str_5928=0,this._maskData=null,this._isPlaneSet=!1,this._typeVisibility[ss.TYPE_UNDEFINED]=!1,this._typeVisibility[ss.TYPE_FLOOR]=!0,this._typeVisibility[ss.TYPE_WALL]=!0,this._typeVisibility[ss.TYPE_LANDSCAPE]=!0}static getTextureCache(e){const s=t.RENDER_TEXTURE_CACHE.get(t.LAST_VISUALIZATION);return s?s.getValue(e):null}static addTextureCache(e,s){if(!t.LAST_VISUALIZATION)return;let i=t.RENDER_TEXTURE_CACHE.get(t.LAST_VISUALIZATION);i||(i=new wt.a,t.RENDER_TEXTURE_CACHE.set(t.LAST_VISUALIZATION,i)),i.add(e,s)}initialize(t){return t instanceof ys&&(this._data=t,super.initialize(t),this._data.setGraphicAssetCollection(this.asset),!0)}dispose(){super.dispose(),this.clearPlanes(),this._Str_2540=null,this._Str_4864=null,this._Str_6648=null,this._roomPlaneParser&&(this._roomPlaneParser.dispose(),this._roomPlaneParser=null),this._roomPlaneBitmapMaskParser&&(this._roomPlaneBitmapMaskParser.dispose(),this._roomPlaneBitmapMaskParser=null),this._data&&(this._data._Str_3355(),this._data=null);const e=t.RENDER_TEXTURE_CACHE.get(this);if(e){for(const t of e.getValues())t.destroy(!0);e.dispose(),t.RENDER_TEXTURE_CACHE.delete(this)}}reset(){super.reset(),this._floorType=null,this._wallType=null,this._landscapeType=null,this._maskData=null,this._geometryUpdateId=-1,this._roomScale=0}update(e,s,i,n){if(!this.object||!e)return;t.LAST_VISUALIZATION=this;let r=0;const a=t.RENDER_TEXTURE_CACHE.get(t.LAST_VISUALIZATION);a&&(r=a.length);const o=this.updateGeometry(e),c=this.object.model;let h=!1;if(this.updateThickness(c)&&(h=!0),this.updateHole(c)&&(h=!0),this._Str_25732()&&a&&r&&setTimeout(()=>{for(;r;){const t=a.getWithIndex(0);t&&(t.destroy(!0),a.remove(a.getKey(0))),r--}},0),h=this.updateMasks(c),!(s<this._lastUpdateTime+this._updateIntervalTime)||o||h){if(this.updatePlanes(c)&&(h=!0),this._Str_16913(e,o,s)&&(h=!0),h){let t=0;for(;t<this._Str_4864.length;){const e=this.getSprite(this._Str_6648[t]),s=this._Str_4864[t];if(e&&s&&s.type!==ss.TYPE_LANDSCAPE)if(this._colorBackgroundOnly){let t=s.color;t=(t>>24<<24)+((t>>16&255)*this._blueColor/255<<16)+((t>>8&255)*this._greenColor/255<<8)+(255&t)*this._redColor/255,e.color=t}else e.color=s.color;t++}this.updateSpriteCounter++}this.updateModelCounter=c.updateCounter,this._lastUpdateTime=s}}updateGeometry(t){if(!t)return!1;if(this._geometryUpdateId===t.updateId)return!1;this._geometryUpdateId=t.updateId,this._boundingRectangle=null;const e=t.direction;return!(!e||e.x===this._directionX&&e.y===this._directionY&&e.z===this._directionZ&&t.scale===this._roomScale||(this._directionX=e.x,this._directionY=e.y,this._directionZ=e.z,this._roomScale=t.scale,0))}updateThickness(t){if(this.updateModelCounter===t.updateCounter)return!1;const e=t.getValue(At.a.ROOM_FLOOR_THICKNESS),s=t.getValue(At.a.ROOM_WALL_THICKNESS);return!(isNaN(e)||isNaN(s)||e===this._floorThickness&&s===this._wallThickness||(this._floorThickness=e,this._wallThickness=s,this.clearPlanes(),0))}updateHole(t){if(this.updateModelCounter===t.updateCounter)return!1;const e=t.getValue(At.a.ROOM_FLOOR_HOLE_UPDATE_TIME);return!isNaN(e)&&e!==this._holeUpdateTime&&(this._holeUpdateTime=e,this.clearPlanes(),!0)}updateMasks(t){if(this.updateModelCounter===t.updateCounter)return!1;let e=!1;const s=t.getValue(At.a.ROOM_PLANE_MASK_XML);s!==this._maskData&&(this._Str_15935(s),this._maskData=s,e=!0);const i=t.getValue(At.a.ROOM_BACKGROUND_COLOR);i!==this._color&&(this._color=i,this._redColor=255&this._color,this._greenColor=this._color>>8&255,this._blueColor=this._color>>16&255,e=!0);const n=t.getValue(At.a.ROOM_COLORIZE_BG_ONLY)||!1;return n!==this._colorBackgroundOnly&&(this._colorBackgroundOnly=n,e=!0),e}updatePlanes(t){if(this.updateModelCounter===t.updateCounter)return!1;const e=t.getValue(At.a.ROOM_FLOOR_TYPE),s=t.getValue(At.a.ROOM_WALL_TYPE),i=t.getValue(At.a.ROOM_LANDSCAPE_TYPE);this.updatePlaneTypes(e,s,i);const n=1===t.getValue(At.a.ROOM_FLOOR_VISIBILITY),r=1===t.getValue(At.a.ROOM_WALL_VISIBILITY),a=1===t.getValue(At.a.ROOM_LANDSCAPE_VISIBILITY);return this.updatePlaneVisibility(n,r,a),!0}clearPlanes(){if(this._Str_2540){for(;this._Str_2540.length;){const t=this._Str_2540[0];t&&t.dispose(),this._Str_2540.pop()}this._Str_2540=[],this._Str_2540=[]}this._isPlaneSet=!1,this._Str_5928=this._Str_5928+1,this.reset()}_Str_25732(){if(!this.object||this._isPlaneSet)return!1;isNaN(this._floorThickness)||(this._roomPlaneParser.floorThicknessMultiplier=this._floorThickness),isNaN(this._wallThickness)||(this._roomPlaneParser.wallThicknessMultiplier=this._wallThickness);const e=this.object.model.getValue(At.a.ROOM_MAP_DATA);if(!this._roomPlaneParser.initializeFromMapData(e))return;const s=this._Str_23949(),i=this._Str_23063();let n=0,r=this.object.model.getValue(At.a.ROOM_RANDOM_SEED),a=0;for(;a<this._roomPlaneParser.planeCount;){const e=this._roomPlaneParser.getPlaneLocation(a),o=this._roomPlaneParser.getPlaneLeftSide(a),c=this._roomPlaneParser.getPlaneRightSide(a),h=this._roomPlaneParser.getPlaneSecondaryNormals(a),l=this._roomPlaneParser.getPlaneType(a);let u=null;if(!(e&&o&&c))return;{const _=m.a.crossProduct(o,c);if(r=7613*r+517,u=null,l===Ze.a.PLANE_FLOOR){const s=e.x+o.x+.5,i=e.y+c.y+.5,n=Math.trunc(s)-s,a=Math.trunc(i)-i;u=new ss(this.object.getLocation(),e,o,c,ss.TYPE_FLOOR,!0,h,r,-n,-a),u.color=0!==_.z?t._Str_18544:0!==_.x?t._Str_16664:t._Str_18640,this._data&&(u.rasterizer=this._data.floorRasterizer)}else l===Ze.a.PLANE_WALL?(u=new ss(this.object.getLocation(),e,o,c,ss.TYPE_WALL,!0,h,r),(o.length<1||c.length<1)&&(u._Str_18448=!1),u.color=0===_.x&&0===_.y?t._Str_14868:_.y>0?t._Str_14503:0===_.y?t._Str_15851:t._Str_13715,this._data&&(u.rasterizer=this._data.wallRasterizer)):l===Ze.a.PLANE_LANDSCAPE?(u=new ss(this.object.getLocation(),e,o,c,ss.TYPE_LANDSCAPE,!0,h,r,n,0,s,i),u.color=_.y>0?t._Str_17403:0==_.y?t._Str_16113:t._Str_18370,this._data&&(u.rasterizer=this._data.landscapeRasterizer),n+=o.length):l==Ze.a.PLANE_BILLBOARD&&(u=new ss(this.object.getLocation(),e,o,c,ss.TYPE_WALL,!0,h,r),(o.length<1||c.length<1)&&(u._Str_18448=!1),u.color=0==_.x&&0==_.y?t._Str_14868:_.y>0?t._Str_14503:0==_.y?t._Str_15851:t._Str_13715);if(u){u._Str_16279=this._data.maskManager;let t=0;for(;t<this._roomPlaneParser.getPlaneMaskCount(a);){const e=this._roomPlaneParser.getPlaneMaskLeftSideLoc(a,t),s=this._roomPlaneParser.getPlaneMaskRightSideLoc(a,t),i=this._roomPlaneParser.getPlaneMaskLeftSideLength(a,t),n=this._roomPlaneParser.getPlaneMaskRightSideLength(a,t);u._Str_24758(e,s,i,n),t++}this._Str_2540.push(u)}}a++}return this._isPlaneSet=!0,this._Str_18024(),!0}_Str_18024(){this.setSpriteCount(this._Str_2540.length);let t=0;for(;t<this._Str_2540.length;){const e=this._Str_2540[t],s=this.getSprite(t);e&&s&&e._Str_5424&&e._Str_4968&&(s.alphaTolerance=e.type===ss.TYPE_WALL&&(e._Str_5424.length<1||e._Str_4968.length<1)?Dt._Str_9268:Dt._Str_9735,s.tag=e.type===ss.TYPE_WALL?"plane.wall@"+(t+1):e.type===ss.TYPE_FLOOR?"plane.floor@"+(t+1):"plane@"+(t+1),s.spriteType=_._Str_8616),t++}}_Str_23949(){let t=0,e=0;for(;e<this._roomPlaneParser.planeCount;)this._roomPlaneParser.getPlaneType(e)===Ze.a.PLANE_LANDSCAPE&&(t+=this._roomPlaneParser.getPlaneLeftSide(e).length),e++;return t}_Str_23063(){let t=0,e=0;for(;e<this._roomPlaneParser.planeCount;){if(this._roomPlaneParser.getPlaneType(e)===Ze.a.PLANE_LANDSCAPE){const s=this._roomPlaneParser.getPlaneRightSide(e);s.length>t&&(t=s.length)}e++}return t>5&&(t=5),t}updatePlaneTypes(t,e,s){if(t!==this._floorType?this._floorType=t:t=null,e!==this._wallType?this._wallType=e:e=null,s!==this._landscapeType?this._landscapeType=s:s=null,!t&&!e&&!s)return!1;let i=0;for(;i<this._Str_2540.length;){const n=this._Str_2540[i];n&&(n.type===ss.TYPE_FLOOR&&t?n.id=t:n.type===ss.TYPE_WALL&&e?n.id=e:n.type===ss.TYPE_LANDSCAPE&&s&&(n.id=s)),i++}return!0}updatePlaneVisibility(t,e,s){t===this._typeVisibility[ss.TYPE_FLOOR]&&e===this._typeVisibility[ss.TYPE_WALL]&&s===this._typeVisibility[ss.TYPE_LANDSCAPE]||(this._typeVisibility[ss.TYPE_FLOOR]=t,this._typeVisibility[ss.TYPE_WALL]=e,this._typeVisibility[ss.TYPE_LANDSCAPE]=s,this._Str_4864=[],this._Str_6648=[])}_Str_16913(e,s,i){if(!e||!this.object)return;this._Str_5928++,s&&(this._Str_4864=[],this._Str_6648=[]);const n=this._Str_4864.length>0;let r=this._Str_4864;this._Str_4864.length||(r=this._Str_2540);let a=0,o=!1,c=0;for(;c<r.length;){let s=c;n&&(s=this._Str_6648[c]);const h=this.getSprite(s);if(h){const l=r[c];l?(h.id=l.uniqueId,l.update(e,i)&&(l.visible&&(a=l.relativeDepth+this._Str_24891+s/1e3,l.type!==ss.TYPE_FLOOR&&(a=l.relativeDepth+this._Str_25403+s/1e3,(l._Str_5424.length<1||l._Str_4968.length<1)&&(a+=.5*t._Str_8621)),this._Str_7421(h,l,"plane "+s+" "+e.scale,a)),o=!0),h.visible!=(l.visible&&this._typeVisibility[l.type])&&(h.visible=!h.visible,o=!0),h.visible&&(n||(this._Str_4864.push(l),this._Str_6648.push(c)))):(h.id=0,h.visible&&(h.visible=!1,o=!0))}c++}return o}_Str_15935(t){if(!t)return;this._roomPlaneBitmapMaskParser.initialize(t);const e=[],s=[];let i=!1,n=0;for(;n<this._Str_2540.length;){const t=this._Str_2540[n];t&&(t._Str_25213(),t.type===ss.TYPE_LANDSCAPE&&e.push(n)),n++}for(const r of this._roomPlaneBitmapMaskParser.masks.values()){const t=this._roomPlaneBitmapMaskParser._Str_21678(r),e=this._roomPlaneBitmapMaskParser._Str_19038(r),n=this._roomPlaneBitmapMaskParser._Str_21644(r);if(e){let r=0;for(;r<this._Str_2540.length;){const a=this._Str_2540[r];if((a.type===ss.TYPE_WALL||a.type===ss.TYPE_LANDSCAPE)&&a&&a.location&&a.normal){const o=m.a.dif(e,a.location);if(Math.abs(m.a.scalarProjection(o,a.normal))<.01&&a._Str_5424&&a._Str_4968){const e=m.a.scalarProjection(o,a._Str_5424),c=m.a.scalarProjection(o,a._Str_4968);a.type===ss.TYPE_WALL||a.type===ss.TYPE_LANDSCAPE&&n===ze.HOLE?a._Str_24569(t,e,c):a.type===ss.TYPE_LANDSCAPE&&(a._Str_14801||(i=!0),a._Str_14801=!0,s.push(r))}}r++}}}for(n=0;n<e.length;){const t=e[n];s.indexOf(t)<0&&(this._Str_2540[t]._Str_14801=!1,i=!0),n++}i&&(this._Str_4864=[],this._Str_6648=[])}_Str_7421(t,e,s,i){const n=e.offset;t.offsetX=-n.x,t.offsetY=-n.y,t.relativeDepth=i,t.color=e.color,t.texture=this._Str_22446(e,s),t.name=s+"_"+this._Str_5928}_Str_22446(t,e){return t.bitmapData}getBoundingRectangle(){return this._boundingRectangle||(this._boundingRectangle=super.getBoundingRectangle()),new i.Rectangle(this._boundingRectangle.x,this._boundingRectangle.y,this._boundingRectangle.width,this._boundingRectangle.height)}get _Str_19113(){const t=[];for(const e of this._Str_4864)t.push(e);return t}get _Str_24891(){return t._Str_8621+.1}get _Str_25403(){return t._Str_8621+.5}}return t.LAST_VISUALIZATION=null,t.RENDER_TEXTURE_CACHE=new Map,t._Str_18544=16777215,t._Str_18640=14540253,t._Str_16664=12303291,t._Str_14503=16777215,t._Str_15851=13421772,t._Str_13715=10066329,t._Str_14868=10066329,t._Str_17403=16777215,t._Str_16113=13421772,t._Str_18370=10066329,t._Str_8621=1e3,t})();class As extends le{constructor(){super(),this._tileHeight=0}getLayerYOffset(t,e,s){return 1===s?(this._tileHeight=this.object.model.getValue(At.a.TILE_CURSOR_HEIGHT),32*-this._tileHeight):super.getLayerYOffset(t,e,s)}}let Ms=(()=>{class t{constructor(){this._visualizationDatas=new Map}getVisualization(t){const e=this.getVisualizationType(t);return e?new e:null}getVisualizationType(t){if(!t)return null;let e=null;switch(t){case Mt.a.ROOM:e=Cs;break;case Mt.a.TILE_CURSOR:e=As;break;case Mt.a.USER:case Mt.a.BOT:case Mt.a.RENTABLE_BOT:e=zt;break;case Mt.a.PET_ANIMATED:e=je;break;case Mt.a.FURNITURE_STATIC:e=he;break;case Mt.a.FURNITURE_ANIMATED:e=le;break;case Mt.a.FURNITURE_RESETTING_ANIMATED:e=Ue;break;case Mt.a.FURNITURE_BADGE_DISPLAY:e=ue;break;case Mt.a.FURNITURE_BG:e=xe;break;case Mt.a.FURNITURE_BB:e=de;break;case Mt.a.FURNITURE_BOTTLE:e=ge;break;case Mt.a.FURNITURE_BUILDER_PLACEHOLDER:e=me;break;case Mt.a.FURNITURE_COUNTER_CLOCK:e=pe;break;case Mt.a.FURNITURE_CUBOID:e=fe;break;case Mt.a.FURNITURE_EXTERNAL_IMAGE:e=ve;break;case Mt.a.FURNITURE_FIREWORKS:e=be;break;case Mt.a.FURNITURE_GIFT_WRAPPED_FIREWORKS:e=Ie;break;case Mt.a.FURNITURE_GIFT_WRAPPED:e=Re;break;case Mt.a.FURNITURE_GUILD_CUSTOMIZED:e=Te;break;case Mt.a.FURNITURE_GUILD_ISOMETRIC_BADGE:e=Oe;break;case Mt.a.FURNITURE_HABBOWHEEL:e=ye;break;case Mt.a.FURNITURE_MANNEQUIN:e=Ae;break;case Mt.a.FURNITURE_PARTY_BEAMER:e=Me;break;case Mt.a.FURNITURE_PLANET_SYSTEM:e=we;break;case Mt.a.FURNITURE_POSTER:e=De;break;case Mt.a.FURNITURE_QUEUE_TILE:e=Ne;break;case Mt.a.FURNITURE_SCORE_BOARD:e=Le;break;case Mt.a.FURNITURE_SOUNDBLOCK:e=Pe;break;case Mt.a.FURNITURE_STICKIE:e=Fe;break;case Mt.a.FURNITURE_VAL_RANDOMIZER:e=ke;break;case Mt.a.FURNITURE_VOTE_COUNTER:e=Ve;break;case Mt.a.FURNITURE_VOTE_MAJORITY:e=Be;break;case Mt.a.FURNITURE_WATER_AREA:e=We;break;case Mt.a.FURNITURE_YOUTUBE:e=Ke}return e||(n.a.log("Unknown Visualization: "+t),null)}getVisualizationData(e,s,i){const n=this._visualizationDatas.get(e);if(n)return n;let r=null;switch(s){case Mt.a.FURNITURE_STATIC:case Mt.a.FURNITURE_GIFT_WRAPPED:case Mt.a.FURNITURE_BB:case Mt.a.FURNITURE_BG:case Mt.a.FURNITURE_STICKIE:case Mt.a.FURNITURE_BUILDER_PLACEHOLDER:r=new oe;break;case Mt.a.FURNITURE_ANIMATED:case Mt.a.FURNITURE_RESETTING_ANIMATED:case Mt.a.FURNITURE_POSTER:case Mt.a.FURNITURE_HABBOWHEEL:case Mt.a.FURNITURE_VAL_RANDOMIZER:case Mt.a.FURNITURE_BOTTLE:case Mt.a.FURNITURE_PLANET_SYSTEM:case Mt.a.FURNITURE_QUEUE_TILE:case Mt.a.FURNITURE_PARTY_BEAMER:case Mt.a.FURNITURE_COUNTER_CLOCK:case Mt.a.FURNITURE_WATER_AREA:case Mt.a.FURNITURE_SCORE_BOARD:case Mt.a.FURNITURE_FIREWORKS:case Mt.a.FURNITURE_GIFT_WRAPPED_FIREWORKS:case Mt.a.FURNITURE_GUILD_CUSTOMIZED:case Mt.a.FURNITURE_GUILD_ISOMETRIC_BADGE:case Mt.a.FURNITURE_VOTE_COUNTER:case Mt.a.FURNITURE_VOTE_MAJORITY:case Mt.a.FURNITURE_SOUNDBLOCK:case Mt.a.FURNITURE_BADGE_DISPLAY:case Mt.a.FURNITURE_EXTERNAL_IMAGE:case Mt.a.FURNITURE_YOUTUBE:case Mt.a.TILE_CURSOR:r=new ce;break;case Mt.a.FURNITURE_MANNEQUIN:r=new Ce;break;case Mt.a.ROOM:r=new ys;break;case Mt.a.USER:case Mt.a.BOT:case Mt.a.RENTABLE_BOT:r=new jt;break;case Mt.a.PET_ANIMATED:r=new He}return r?r.initialize(i)?((r instanceof jt||r instanceof Ce)&&(r.avatarManager=h.a.instance.avatar),t.CACHING_ENABLED&&this._visualizationDatas.set(e,r),r):(r.dispose(),null):null}}return t.CACHING_ENABLED=!0,t})();var ws=s("ZQhZ"),Ds=s("whnG"),Ns=s("yydM"),Us=s("JODW"),xs=s("sR+E"),Ls=s("zVPj"),Ps=s("Wzp3"),Fs=s("Ie/D"),ks=s("Nakt"),Vs=s("Wamt"),Bs=s("ArMw"),Ws=s("ObWd"),Ks=s("QZfg"),Gs=s("+IZ6"),Hs=s("Xe8L"),js=s("Njml"),zs=s("mQ1q"),Ys=s("ebaN"),qs=s("Prlr"),Zs=s("bmMM"),Xs=s("zTkZ"),Qs=s("lbEV"),Js=s("CzV9"),$s=s("f1eJ"),ti=s("1QEa"),ei=s("sRv6"),si=s("xq+5"),ii=s("jFxZ"),ni=s("sCRD"),ri=s("mGgu"),ai=s("BVCN"),oi=s("fVO9"),ci=s("Yx/o"),hi=s("D/zE"),li=s("KjXG"),ui=s("jzpY"),_i=s("NpwP"),di=s("n7CB"),gi=s("jdh6"),mi=s("uMJ2"),pi=s("O/2Q"),fi=s("4Yln"),Ei=s("rlQL"),Si=s("BrMT");class vi{constructor(t,e){this._width=t,this._height=e,this._heights=[],this._isNotStackable=[],this._isRoomTile=[];let s=t*e;for(;s>0;)this._heights.push(0),this._isNotStackable.push(!1),this._isRoomTile.push(!1),s--}dispose(){this._width=0,this._height=0,this._height=null,this._isNotStackable=null,this._isRoomTile=null}validPosition(t,e){return t>=0&&t<this._width&&e>=0&&e<this._height}getTileHeight(t,e){return this.validPosition(t,e)?this._heights[e*this._width+t]:0}setTileHeight(t,e,s){this.validPosition(t,e)&&(this._heights[e*this._width+t]=s)}setStackingBlocked(t,e,s){this.validPosition(t,e)&&(this._isNotStackable[e*this._width+t]=s)}setIsRoomTile(t,e,s){this.validPosition(t,e)&&(this._isRoomTile[e*this._width+t]=s)}validateLocation(t,e,s,i,n,r,a,o,c,h=-1){let l=0,u=0;if(!this.validPosition(t,e)||!this.validPosition(t+s-1,e+i-1))return!1;(n<0||n>=this._width)&&(n=0),(r<0||r>=this._height)&&(r=0),a=Math.min(a,this._width-n),o=Math.min(o,this._height-r),-1===h&&(h=this.getTileHeight(t,e));let _=e;for(;_<e+i;){for(l=t;l<t+s;){if(l<n||l>=n+a||_<r||_>=r+o)if(u=_*this._width+l,c){if(!this._isRoomTile[u])return!1}else if(this._isNotStackable[u]||!this._isRoomTile[u]||Math.abs(this._heights[u]-h)>.01)return!1;l++}_++}return!0}get width(){return this._width}get height(){return this._height}}var bi=s("SBJG"),Ii=s("9mJe");class Ri extends Gt.a{constructor(t){super(),this._connection=null,this._roomCreator=t,this._planeParser=new Xe.a,this._latestEntryTileEvent=null,this._currentRoomId=0,this._ownUserId=0,this._initialConnection=!0}onDispose(){super.onDispose(),this._connection=null,this._roomCreator=null,this._latestEntryTileEvent=null,this._planeParser&&(this._planeParser.dispose(),this._planeParser=null)}setConnection(t){!this._connection&&t&&(this._connection=t,this._connection.addMessageEvent(new mi.a(this.onUserInfoEvent.bind(this))),this._connection.addMessageEvent(new Xs.a(this.onRoomModelNameEvent.bind(this))),this._connection.addMessageEvent(new Qs.a(this.onRoomPaintEvent.bind(this))),this._connection.addMessageEvent(new Zs.a(this.onRoomModelEvent.bind(this))),this._connection.addMessageEvent(new Ys.a(this.onRoomHeightMapEvent.bind(this))),this._connection.addMessageEvent(new qs.a(this.onRoomHeightMapUpdateEvent.bind(this))),this._connection.addMessageEvent(new Js.a(this.onRoomThicknessEvent.bind(this))),this._connection.addMessageEvent(new zs.a(this.onRoomDoorEvent.bind(this))),this._connection.addMessageEvent(new Ns.a(this.onRoomRollingEvent.bind(this))),this._connection.addMessageEvent(new Fs.a(this.onFurnitureAliasesEvent.bind(this))),this._connection.addMessageEvent(new Us.a(this.onFurnitureFloorAddEvent.bind(this))),this._connection.addMessageEvent(new xs.a(this.onFurnitureFloorEvent.bind(this))),this._connection.addMessageEvent(new Ls.a(this.onFurnitureFloorRemoveEvent.bind(this))),this._connection.addMessageEvent(new Ps.a(this.onFurnitureFloorUpdateEvent.bind(this))),this._connection.addMessageEvent(new Ks.a(this.onFurnitureWallAddEvent.bind(this))),this._connection.addMessageEvent(new Gs.a(this.onFurnitureWallEvent.bind(this))),this._connection.addMessageEvent(new Hs.a(this.onFurnitureWallRemoveEvent.bind(this))),this._connection.addMessageEvent(new js.a(this.onFurnitureWallUpdateEvent.bind(this))),this._connection.addMessageEvent(new ks.a(this.onFurnitureDataEvent.bind(this))),this._connection.addMessageEvent(new Vs.a(this.onFurnitureItemDataEvent.bind(this))),this._connection.addMessageEvent(new Ws.a(this.onFurnitureStateEvent.bind(this))),this._connection.addMessageEvent(new ri.a(this.onRoomUnitDanceEvent.bind(this))),this._connection.addMessageEvent(new ai.a(this.onRoomUnitEffectEvent.bind(this))),this._connection.addMessageEvent(new oi.a(this.onRoomUnitEvent.bind(this))),this._connection.addMessageEvent(new ci.a(this.onRoomUnitExpressionEvent.bind(this))),this._connection.addMessageEvent(new hi.a(this.onRoomUnitHandItemEvent.bind(this))),this._connection.addMessageEvent(new li.a(this.onRoomUnitIdleEvent.bind(this))),this._connection.addMessageEvent(new ui.a(this.onRoomUnitInfoEvent.bind(this))),this._connection.addMessageEvent(new _i.a(this.onRoomUnitNumberEvent.bind(this))),this._connection.addMessageEvent(new di.a(this.onRoomUnitRemoveEvent.bind(this))),this._connection.addMessageEvent(new gi.a(this.onRoomUnitStatusEvent.bind(this))),this._connection.addMessageEvent(new ei.a(this.onRoomUnitChatEvent.bind(this))),this._connection.addMessageEvent(new si.a(this.onRoomUnitChatEvent.bind(this))),this._connection.addMessageEvent(new ii.a(this.onRoomUnitChatEvent.bind(this))),this._connection.addMessageEvent(new ni.a(this.onRoomUnitTypingEvent.bind(this))),this._connection.addMessageEvent(new $s.a(this.onPetFigureUpdateEvent.bind(this))),this._connection.addMessageEvent(new ti.a(this.onYouArePlayingGameEvent.bind(this))),this._connection.addMessageEvent(new Bs.a(this.onFurnitureState2Event.bind(this))),this._connection.addMessageEvent(new pi.a(this.onIgnoreResultEvent.bind(this))))}setRoomId(t){0!==this._currentRoomId&&this._roomCreator&&this._roomCreator.destroyRoom(this._currentRoomId),this._currentRoomId=t,this._latestEntryTileEvent=null}clearRoomId(){this._currentRoomId=0,this._latestEntryTileEvent=null}onUserInfoEvent(t){if(!(t instanceof mi.a&&t.connection))return;const e=t.getParser();e&&(this._ownUserId=e.userInfo.userId)}onRoomModelNameEvent(t){if(t instanceof Xs.a&&t.connection){if(this._currentRoomId!==t.getParser().roomId&&this.setRoomId(t.getParser().roomId),this._roomCreator&&this._roomCreator.setRoomInstanceModelName(t.getParser().roomId,t.getParser().name),this._initialConnection)return t.connection.send(new fi.a),void(this._initialConnection=!1);t.connection.send(new Ei.a)}}onRoomPaintEvent(t){if(!(t instanceof Qs.a))return;const e=t.getParser();e&&this._roomCreator&&this._roomCreator.updateRoomInstancePlaneType(this._currentRoomId,e.floorType,e.wallType,e.landscapeType)}onRoomModelEvent(t){if(!(t instanceof Zs.a&&t.connection&&this._roomCreator))return;const e=t.getParser();if(!e)return;const s=this._roomCreator.getLegacyWallGeometry(this._currentRoomId);if(!s)return;this._planeParser.reset();const i=e.width,n=e.height;this._planeParser.initializeTileMap(i,n);let r=null;this._latestEntryTileEvent&&(r=this._latestEntryTileEvent.getParser());let a=-1,o=-1,c=0,h=0,l=0;for(;l<n;){let t=0;for(;t<i;){const s=e.getHeight(t,l);(l>0&&l<n-1||t>0&&t<i-1)&&s!=Xe.a.TILE_BLOCKED&&(null==r||t==r.x&&l==r.y)&&(e.getHeight(t,l-1)==Xe.a.TILE_BLOCKED&&e.getHeight(t-1,l)==Xe.a.TILE_BLOCKED&&e.getHeight(t,l+1)==Xe.a.TILE_BLOCKED&&(a=t+.5,o=l,c=s,h=90),e.getHeight(t,l-1)==Xe.a.TILE_BLOCKED&&e.getHeight(t-1,l)==Xe.a.TILE_BLOCKED&&e.getHeight(t+1,l)==Xe.a.TILE_BLOCKED&&(a=t,o=l+.5,c=s,h=180)),this._planeParser.setTileHeight(t,l,s),t++}l++}this._planeParser.setTileHeight(Math.floor(a),Math.floor(o),c),this._planeParser.initializeFromTileData(e.wallHeight),this._planeParser.setTileHeight(Math.floor(a),Math.floor(o),c+this._planeParser.wallHeight),64===e.scale?(this._planeParser.restrictsDragging=!0,this._planeParser.restrictsScaling=!0,this._planeParser.restrictedScale=.5):(this._planeParser.restrictsDragging=!1,this._planeParser.restrictsScaling=!1,this._planeParser.restrictedScale=1),s.scale=bi.a.DEFAULT_SCALE,s.initialize(i,n,this._planeParser.floorHeight);let u=e.height-1;for(;u>=0;){let t=e.width-1;for(;t>=0;)s.setHeight(t,u,this._planeParser.getTileHeight(t,u)),t--;u--}const _=this._planeParser.getMapData();_.doors.push({x:a,y:o,z:c,dir:h}),this._roomCreator.createRoomInstance(this._currentRoomId,_)}onRoomHeightMapEvent(t){if(!(t instanceof Ys.a&&t.connection&&this._roomCreator))return;const e=t.getParser();if(!e)return;const s=e.width,i=e.height,n=new vi(s,i);let r=0;for(;r<i;){let t=0;for(;t<s;)n.setTileHeight(t,r,e.getTileHeight(t,r)),n.setStackingBlocked(t,r,e.getStackingBlocked(t,r)),n.setIsRoomTile(t,r,e.isRoomTile(t,r)),t++;r++}this._roomCreator.setFurnitureStackingHeightMap(this._currentRoomId,n)}onRoomHeightMapUpdateEvent(t){if(!(t instanceof qs.a&&t.connection&&this._roomCreator))return;const e=t.getParser();if(!e)return;const s=this._roomCreator.getFurnitureStackingHeightMap(this._currentRoomId);if(s){for(;e.next();)s.setTileHeight(e.x,e.y,e.tileHeight()),s.setStackingBlocked(e.x,e.y,e.isStackingBlocked()),s.setIsRoomTile(e.x,e.y,e.isRoomTile());this._roomCreator._Str_17722(this._currentRoomId,"RoomMessageHandler.onRoomHeightMapUpdateEvent()")}}onRoomThicknessEvent(t){if(!(t instanceof Js.a))return;const e=t.getParser();if(!e)return;const s=e.thicknessWall,i=e.thicknessFloor;this._roomCreator&&(this._roomCreator.updateRoomInstancePlaneVisibility(this._currentRoomId,!e.hideWalls,!0),this._roomCreator.updateRoomInstancePlaneThickness(this._currentRoomId,s,i))}onRoomDoorEvent(t){t instanceof zs.a&&(this._latestEntryTileEvent=t)}onRoomRollingEvent(t){if(!(t instanceof Ns.a&&t.connection&&this._roomCreator))return;const e=t.getParser();this._roomCreator.updateRoomObjectFloor(this._currentRoomId,e.rollerId,null,null,1,null),this._roomCreator.updateRoomObjectFloor(this._currentRoomId,e.rollerId,null,null,2,null);const s=e.itemsRolling;if(s&&s.length)for(const n of s)n&&this._roomCreator.rollRoomObjectFloor(this._currentRoomId,n.id,n.location,n.targetLocation);const i=e.unitRolling;if(i){this._roomCreator.updateRoomObjectUserLocation(this._currentRoomId,i.id,i.location,i.targetLocation);const t=this._roomCreator.getRoomObjectUser(this._currentRoomId,i.id);if(t&&t.type!==Ct.a.MONSTER_PLANT){let t="std";switch(i.movementType){case Ii.a.MOVE:t="mv";break;case Ii.a.SLIDE:t="std"}this._roomCreator.updateRoomObjectUserPosture(this._currentRoomId,i.id,t)}}}onFurnitureAliasesEvent(t){t instanceof Fs.a&&t.connection&&this._roomCreator&&(t.getParser(),this._connection.send(new Ei.a))}onFurnitureFloorAddEvent(t){if(!(t instanceof Us.a&&t.connection&&this._roomCreator))return;const e=t.getParser().item;e&&this.addRoomObjectFurnitureFloor(this._currentRoomId,e)}onFurnitureFloorEvent(t){if(!(t instanceof xs.a&&t.connection&&this._roomCreator))return;const e=t.getParser();if(!e)return;const s=e.items.length;let i=0;for(;i<s;){const t=e.items[i];t&&this.addRoomObjectFurnitureFloor(this._currentRoomId,t),i++}}onFurnitureFloorRemoveEvent(t){if(!(t instanceof Ls.a&&t.connection&&this._roomCreator))return;const e=t.getParser();e&&(e.delay>0?setTimeout(()=>{this._roomCreator.removeRoomObjectFloor(this._currentRoomId,e.itemId,e.isExpired?-1:e.userId,!0)},e.delay):this._roomCreator.removeRoomObjectFloor(this._currentRoomId,e.itemId,e.isExpired?-1:e.userId,!0))}onFurnitureFloorUpdateEvent(t){if(!(t instanceof Ps.a&&t.connection&&this._roomCreator))return;const e=t.getParser().item;if(!e)return;const s=new m.a(e.x,e.y,e.z),i=new m.a(e.direction);this._roomCreator.updateRoomObjectFloor(this._currentRoomId,e.itemId,s,i,e.data.state,e.data,e.extra),this._roomCreator.updateRoomObjectFloorHeight(this._currentRoomId,e.itemId,e.stackHeight),this._roomCreator.updateRoomObjectFloorExpiration(this._currentRoomId,e.itemId,e.expires)}onFurnitureWallAddEvent(t){if(!(t instanceof Ks.a&&t.connection&&this._roomCreator))return;const e=t.getParser().item;e&&this.addRoomObjectFurnitureWall(this._currentRoomId,e)}onFurnitureWallEvent(t){if(!(t instanceof Gs.a&&t.connection&&this._roomCreator))return;const e=t.getParser();if(!e)return;const s=e.items.length;let i=0;for(;i<s;){const t=e.items[i];t&&this.addRoomObjectFurnitureWall(this._currentRoomId,t),i++}}onFurnitureWallRemoveEvent(t){if(!(t instanceof Hs.a&&t.connection&&this._roomCreator))return;const e=t.getParser();e&&this._roomCreator.removeRoomObjectWall(this._currentRoomId,e.itemId,e.userId)}onFurnitureWallUpdateEvent(t){if(!(t instanceof js.a&&t.connection&&this._roomCreator))return;const e=this._roomCreator.getLegacyWallGeometry(this._currentRoomId);if(!e)return;const s=t.getParser().item;if(!s)return;const i=e.getLocation(s.width,s.height,s.localX,s.localY,s.direction),n=new m.a(e.getDirection(s.direction));this._roomCreator.updateRoomObjectWall(this._currentRoomId,s.itemId,i,n,s.state,s.stuffData),this._roomCreator.updateRoomObjectWallExpiration(this._currentRoomId,s.itemId,s.secondsToExpiration)}onFurnitureDataEvent(t){if(!(t instanceof ks.a&&t.connection&&this._roomCreator))return;const e=t.getParser();this._roomCreator.updateRoomObjectFloor(this._currentRoomId,e.furnitureId,null,null,e.objectData.state,e.objectData)}onFurnitureItemDataEvent(t){if(!(t instanceof Vs.a&&t.connection&&this._roomCreator))return;const e=t.getParser();this._roomCreator.updateRoomObjectWallItemData(this._currentRoomId,e.furnitureId,e.data)}onFurnitureStateEvent(t){if(!(t instanceof Ws.a&&t.connection&&this._roomCreator))return;const e=t.getParser();this._roomCreator.updateRoomObjectFloor(this._currentRoomId,e.itemId,null,null,e.state,new Ot.a)}onFurnitureState2Event(t){if(!(t instanceof Bs.a&&t.connection&&this._roomCreator))return;const e=t.getParser();this._roomCreator.updateRoomObjectFloor(this._currentRoomId,e.itemId,null,null,e.value,new Ot.a)}onRoomUnitDanceEvent(t){t instanceof ri.a&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,t.getParser().unitId,At.a.FIGURE_DANCE,t.getParser().danceId)}onRoomUnitEffectEvent(t){t instanceof ai.a&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserEffect(this._currentRoomId,t.getParser().unitId,t.getParser().effectId,t.getParser().delay)}onRoomUnitEvent(t){if(!(t instanceof oi.a&&t.connection&&this._roomCreator))return;const e=t.getParser().users;if(e&&e.length)for(const s of e){if(!s)continue;const t=new m.a(s.x,s.y,s.z),e=new m.a(s.dir);this._roomCreator.addRoomObjectUser(this._currentRoomId,s.roomIndex,t,e,s.dir,s.userType,s.figure),s.webID===this._ownUserId&&(this._roomCreator.setRoomSessionOwnUser(this._currentRoomId,s.roomIndex),this._roomCreator.updateRoomObjectUserOwn(this._currentRoomId,s.roomIndex)),this._roomCreator.updateRoomObjectUserFigure(this._currentRoomId,s.roomIndex,s.figure,s.sex,s.subType,s.isRiding),Ct.a.getTypeString(s.userType)===Ct.a.PET&&this._roomCreator.getPetTypeId(s.figure)===Ds.a.MONSTERPLANT&&this._roomCreator.updateRoomObjectUserPosture(this._currentRoomId,s.roomIndex,s.petPosture),this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,s.roomIndex,At.a.FIGURE_IS_MUTED,this._roomCreator.sessionDataManager.isUserIgnored(s.name)?1:0)}}onRoomUnitExpressionEvent(t){t instanceof ci.a&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,t.getParser().unitId,At.a.FIGURE_EXPRESSION,t.getParser().expression)}onRoomUnitHandItemEvent(t){t instanceof hi.a&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,t.getParser().unitId,At.a.FIGURE_CARRY_OBJECT,t.getParser().handId)}onRoomUnitIdleEvent(t){t instanceof li.a&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,t.getParser().unitId,At.a.FIGURE_SLEEP,t.getParser().isIdle?1:0)}onRoomUnitInfoEvent(t){t instanceof ui.a&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserFigure(this._currentRoomId,t.getParser().unitId,t.getParser().figure,t.getParser().gender)}onRoomUnitNumberEvent(t){if(!(t instanceof _i.a&&t.connection&&this._roomCreator))return;const e=t.getParser();e&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,e.unitId,At.a.FIGURE_NUMBER_VALUE,e.value)}onRoomUnitRemoveEvent(t){t instanceof di.a&&t.connection&&this._roomCreator&&this._roomCreator.removeRoomObjectUser(this._currentRoomId,t.getParser().unitId)}onRoomUnitStatusEvent(t){if(!(t instanceof gi.a&&t.connection&&this._roomCreator))return;const e=t.getParser().statuses;if(!e||!e.length)return;const s=this._roomCreator.getRoomInstance(this._currentRoomId);if(!s)return;const i=s.model.getValue(Si.a.ROOM_Z_SCALE)||1;for(const n of e){if(!n)continue;let t=n.height;t&&(t/=i);const e=new m.a(n.x,n.y,n.z+t),s=new m.a(n.direction);let r=null;n.didMove&&(r=new m.a(n.targetX,n.targetY,n.targetZ)),this._roomCreator.updateRoomObjectUserLocation(this._currentRoomId,n.id,e,r,n.canStandUp,t,s,n.headDirection),this._roomCreator.updateRoomObjectUserFlatControl(this._currentRoomId,n.id,null);let a=!0,o=!1,c=At.a.STD,h="";if(n.actions&&n.actions.length)for(const i of n.actions)if(i)switch(i.action){case"flatctrl":this._roomCreator.updateRoomObjectUserFlatControl(this._currentRoomId,n.id,i.value);break;case"sign":1===n.actions.length&&(a=!1),this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,n.id,At.a.FIGURE_SIGN,parseInt(i.value));break;case"gst":1===n.actions.length&&(a=!1),this._roomCreator.updateRoomObjectUserPetGesture(this._currentRoomId,n.id,i.value);break;case"wav":case"mv":o=!0,c=i.action,h=i.value;break;case"trd":break;default:o=!0,c=i.action,h=i.value}o?this._roomCreator.updateRoomObjectUserPosture(this._currentRoomId,n.id,c,h):a&&this._roomCreator.updateRoomObjectUserPosture(this._currentRoomId,n.id,At.a.STD,"")}}onRoomUnitChatEvent(t){if(!t.connection||!this._roomCreator)return;const e=t.getParser();e&&(this._roomCreator.updateRoomObjectUserGesture(this._currentRoomId,e.roomIndex,e.gesture),this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,e.roomIndex,At.a.FIGURE_TALK,e.message.length/10))}onRoomUnitTypingEvent(t){t instanceof ni.a&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,t.getParser().unitId,At.a.FIGURE_IS_TYPING,t.getParser().isTyping?1:0)}onPetFigureUpdateEvent(t){if(!(t instanceof $s.a&&t.connection&&this._roomCreator))return;const e=t.getParser();e&&this._roomCreator.updateRoomObjectUserFigure(this._currentRoomId,e.roomIndex,e.figureData.figuredata,"","",e.isRiding)}onYouArePlayingGameEvent(t){if(!t)return;const e=t.getParser();e&&this._roomCreator.setRoomEngineGameMode(this._currentRoomId,e.isPlaying)}addRoomObjectFurnitureFloor(t,e){if(!e||!this._roomCreator)return;const s=new m.a(e.x,e.y,e.z),i=new m.a(e.direction);e.spriteName?this._roomCreator.addFurnitureFloorByTypeName(t,e.itemId,e.spriteName,s,i,e.state,e.data,e.extra,e.expires,e.usagePolicy,e.userId,e.username,!0,!0,e.stackHeight):this._roomCreator.addFurnitureFloor(t,e.itemId,e.spriteId,s,i,e.state,e.data,e.extra,e.expires,e.usagePolicy,e.userId,e.username,!0,!0,e.stackHeight)}addRoomObjectFurnitureWall(t,e){if(!e||!this._roomCreator)return;const s=this._roomCreator.getLegacyWallGeometry(t);if(!s)return;let i=null;e._Str_22379||(i=s.getLocation(e.width,e.height,e.localX,e.localY,e.direction));const n=new m.a(s.getDirection(e.direction));this._roomCreator.addFurnitureWall(t,e.itemId,e.spriteId,i,n,e.state,e.stuffData,e.secondsToExpiration,e.usagePolicy,e.userId,e.username)}onIgnoreResultEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=this._roomCreator.roomSessionManager.getSession(this._currentRoomId);if(!s)return;const i=s.userDataManager.getUserDataByName(e.name);if(i)switch(e.result){case 1:case 2:return void this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,i.roomIndex,At.a.FIGURE_IS_MUTED,1);case 3:return void this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,i.roomIndex,At.a.FIGURE_IS_MUTED,0)}}get currentRoomId(){return this._currentRoomId}}var Ti=s("SULm"),Oi=s("h2l6"),yi=s("+ana"),Ci=s("toFP"),Ai=s("+LxV"),Mi=s("7d3m"),wi=s("Sb1T"),Di=s("jgc/"),Ni=s("+/WI"),Ui=s("PSU1"),xi=s("PJYa"),Li=s("fuks"),Pi=s("Nd6c"),Fi=s("v1R/"),ki=s("jdue"),Vi=s("gHKk"),Bi=s("wSNj"),Wi=s("wyCi"),Ki=s("hFyr"),Gi=s("qXDh"),Hi=s("k0R1"),ji=s("dPj3");class zi extends F.a{constructor(t,e,s,i,n,r,a,o,c,h,l,u,_){super(t,e,s,i),this._wallLocation="",this._x=0,this._y=0,this._z=0,this._direction=0,this._placedInRoom=!1,this._placedOnFloor=!1,this._placedOnWall=!1,this._instanceData=null,this._wallLocation=n,this._x=r,this._y=a,this._z=o,this._direction=c,this._placedInRoom=h,this._placedOnFloor=l,this._placedOnWall=u,this._instanceData=_}get _Str_7031(){return this._wallLocation}get x(){return this._x}get y(){return this._y}get z(){return this._z}get direction(){return this._direction}get _Str_4057(){return this._placedInRoom}get _Str_23888(){return this._placedOnFloor}get _Str_23432(){return this._placedOnWall}get _Str_4766(){return this._instanceData}}class Yi extends F.a{constructor(t,e,s,i,n,r){super(t,e,s,i),this._droppedObjectId=n,this._droppedObjectCategory=r}get droppedObjectId(){return this._droppedObjectId}get droppedObjectCategory(){return this._droppedObjectCategory}}var qi=s("ScQb"),Zi=s("5r5K");let Xi=(()=>{class t extends a.a{constructor(t,e,s,i=!0){super(t,e),this._badgeId=s,this._groupBadge=i}get badgeId(){return this._badgeId}get groupBadge(){return this._groupBadge}}return t.LOAD_BADGE="ROBAE_LOAD_BADGE",t})(),Qi=(()=>{class t extends a.a{constructor(t,e){super(t,e)}}return t.RODRE_CURRENT_USER_ID="RODRE_CURRENT_USER_ID",t.RODRE_URL_PREFIX="RODRE_URL_PREFIX",t})(),Ji=(()=>{class t extends a.a{constructor(e,s,i,n,r,a){super(t.DIMMER_STATE,e),this._state=s,this._presetId=i,this._effectId=n,this._color=r,this._brightness=a}get state(){return this._state}get _Str_14686(){return this._presetId}get _Str_6815(){return this._effectId}get color(){return this._color}get _Str_5123(){return this._brightness}}return t.DIMMER_STATE="RODSUE_DIMMER_STATE",t})(),$i=(()=>{class t extends a.a{constructor(t,e){super(t,e)}}return t.ADD_HOLE="ROFHO_ADD_HOLE",t.REMOVE_HOLE="ROFHO_REMOVE_HOLE",t})();var tn=s("GfbW");let en=(()=>{class t extends a.a{constructor(t,e,s,i,n,r){super(t,e),this._enable=s,this._hue=i,this._saturation=n,this._lightness=r}get enable(){return this._enable}get hue(){return this._hue}get saturation(){return this._saturation}get lightness(){return this._lightness}}return t.ROOM_BACKGROUND_COLOR="ROHSLCEE_ROOM_BACKGROUND_COLOR",t})(),sn=(()=>{class t extends a.a{constructor(t,e){super(t,e)}}return t.POSITION_CHANGED="ROME_POSITION_CHANGED",t.OBJECT_REMOVED="ROME_OBJECT_REMOVED",t})(),nn=(()=>{class t extends a.a{constructor(t,e,s,i=1){super(t,e),this._sampleId=s,this._pitch=i}get sampleId(){return this._sampleId}get pitch(){return this._pitch}}return t.ROOM_OBJECT_INITIALIZED="ROPSPE_ROOM_OBJECT_INITIALIZED",t.ROOM_OBJECT_DISPOSED="ROPSPE_ROOM_OBJECT_DISPOSED",t.PLAY_SAMPLE="ROPSPE_PLAY_SAMPLE",t.CHANGE_PITCH="ROPSPE_CHANGE_PITCH",t})(),rn=(()=>{class t extends a.a{constructor(t,e,s=0){super(t,e),this._state=s}get state(){return this._state}}return t.STATE_CHANGE="ROSCE_STATE_CHANGE",t.STATE_RANDOM="ROSCE_STATE_RANDOM",t})();class an extends o{constructor(t,e,s,i,n,r,a=!1,o=!1,c=!1,h=!1){super(t,e,s,a,o,c,h),this._tileX=i,this._tileY=n,this._tileZ=r}get tileX(){return this._tileX}get tileY(){return this._tileY}get tileZ(){return this._tileZ}get _Str_16836(){return Math.trunc(this._tileX+.499)}get _Str_17676(){return Math.trunc(this._tileY+.499)}get _Str_21459(){return Math.trunc(this._tileZ+.499)}}class on extends o{constructor(t,e,s,i,n,r,a,o,c,h=!1,l=!1,u=!1,_=!1){super(t,e,s,h,l,u,_),this._wallLocation=new m.a,this._wallWd=new m.a,this._wallHt=new m.a,this._wallLocation.assign(i),this._wallWd.assign(n),this._wallHt.assign(r),this._x=a,this._y=o,this._direction=c}get wallLocation(){return this._wallLocation}get wallWidth(){return this._wallWd}get wallHeight(){return this._wallHt}get x(){return this._x}get y(){return this._y}get direction(){return this._direction}}var cn=s("6u0Z");class hn extends H{constructor(t){super(),this._selected=t}get selected(){return this._selected}}class ln extends H{constructor(t){super(),this._selected=t}get selected(){return this._selected}}class un extends c.a{constructor(t,e,s,i,n=!1){super(t,null),this._height=e,this._visible=s,this._sourceEventId=i,this._toggleVisibility=n}get height(){return this._height}get visible(){return this._visible}get _Str_20637(){return this._sourceEventId}get toggleVisibility(){return this._toggleVisibility}}let _n=(()=>{class t extends c.a{constructor(t){super(null,null),this._type=t}get type(){return this._type}}return t.ENABLED="ROVUM_ENABLED",t.DISABLED="ROVUM_DISABLED",t})();var dn=s("UTUL"),gn=s("+kDp");class mn{constructor(t,e,s,i,n,r=0,a=null,o=null,c=-1,h=-1,l=null){this._id=0,this._category=0,this._operation="",this._loc=null,this._dir=null,this._typeId=0,this._instanceData=null,this._stuffData=null,this._state=-1,this._animFrame=-1,this._posture=null,this._id=t,this._category=e,this._operation=s,this._loc=new m.a,this._loc.assign(i),this._dir=new m.a,this._dir.assign(n),this._typeId=r,this._instanceData=a,this._stuffData=o,this._state=c,this._animFrame=h,this._posture=l}get id(){return this._id}get category(){return this._category}get operation(){return this._operation}get loc(){return this._loc}get dir(){return this._dir}get typeId(){return this._typeId}get _Str_4766(){return this._instanceData}get stuffData(){return this._stuffData}get state(){return this._state}get _Str_15896(){return this._animFrame}get posture(){return this._posture}dispose(){this._loc=null,this._dir=null}}class pn extends Gt.a{constructor(t){super(),this._roomEngine=t,this._eventIds=new Map,this._selectedAvatarId=-1,this._selectedObjectId=-1,this._selectedObjectCategory=-2,this._whereYouClickIsWhereYouGo=!0,this._objectPlacementSource=null,this.onRoomEngineObjectEvent=this.onRoomEngineObjectEvent.bind(this),this._roomEngine.events.addEventListener(F.a.ADDED,this.onRoomEngineObjectEvent)}dispose(){this._eventIds&&(this._eventIds=null),this._roomEngine.events.removeEventListener(F.a.ADDED,this.onRoomEngineObjectEvent),this._roomEngine=null}onRoomEngineObjectEvent(t){let e=this.getSelectedRoomObjectData(t.roomId);if(e&&e.operation===dn.a.OBJECT_PLACE&&e.id===t.objectId){const s=this._roomEngine.getRoomObject(t.roomId,e.id,e.category);if(s&&s.model&&e.category===yt.a.FLOOR){const i=s.model.getValue(At.a.FURNITURE_ALLOWED_DIRECTIONS);if(i&&i.length){const n=new m.a(i[0]);if(s.setDirection(n),this._Str_16022(t.roomId,e.id,e.category,e.loc,n,e.operation,e.typeId,e._Str_4766,e.stuffData,e.state,e._Str_15896,e.posture),e=this.getSelectedRoomObjectData(t.roomId),!e)return}}this.setFurnitureAlphaMultiplier(s,.5)}}_Str_20330(t,e,s){if(!t||!e)return;if(d.a.isRunning())return;let i=this._roomEngine.getRoomObjectCategoryForType(e.type);if(i===yt.a.ROOM||this._roomEngine.isPlayingGame()&&i===yt.a.UNIT||(i=yt.a.MINIMUM),this._Str_18648(i,t.type)===t._Str_3463){if(t.type===l.a.MOUSE_CLICK||t.type===l.a.DOUBLE_CLICK||t.type===l.a.MOUSE_DOWN||t.type===l.a.MOUSE_UP||t.type===l.a.MOUSE_MOVE)return}else t._Str_3463&&this._Str_11142(i,t.type,t._Str_3463);e.mouseHandler&&e.mouseHandler.mouseEvent(t,s)}processRoomObjectPlacement(t,e,s,i,n,r=null,a=null,o=-1,c=-1,h=null){this._objectPlacementSource=t;const l=new m.a(-100,-100),u=new m.a(0);return this.setSelectedRoomObjectData(e,s,i,l,u,dn.a.OBJECT_PLACE,n,r,a,o,c,h),this._roomEngine&&(this._roomEngine._Str_16645(n,i,!1,r,a,o,c,h),this._roomEngine._Str_7972(!1)),!0}_Str_8675(t){return this._Str_13199(t),!0}_Str_18648(t,e){const s=this._eventIds.get(t);return s&&s.get(e)||null}_Str_11142(t,e,s){let i=this._eventIds.get(t);i||(i=new Map,this._eventIds.set(t,i)),i.delete(e),i.set(e,s)}handleRoomObjectEvent(t,e){if(t)if(t instanceof o)this.handleRoomObjectMouseEvent(t,e);else switch(t.type){case rn.STATE_CHANGE:case rn.STATE_RANDOM:return void this.onRoomObjectStateChangedEvent(t,e);case Ji.DIMMER_STATE:return void this.onRoomObjectDimmerStateUpdateEvent(t,e);case sn.POSITION_CHANGED:case sn.OBJECT_REMOVED:return void this.onRoomObjectMoveEvent(t,e);case cn.a.OPEN_WIDGET:case cn.a.CLOSE_WIDGET:case cn.a.OPEN_FURNI_CONTEXT_MENU:case cn.a.CLOSE_FURNI_CONTEXT_MENU:case cn.a.PLACEHOLDER:case cn.a.CREDITFURNI:case cn.a.STICKIE:case cn.a.PRESENT:case cn.a.TROPHY:case cn.a.TEASER:case cn.a.ECOTRONBOX:case cn.a.DIMMER:case cn.a.WIDGET_REMOVE_DIMMER:case cn.a.CLOTHING_CHANGE:case cn.a.JUKEBOX_PLAYLIST_EDITOR:case cn.a.MANNEQUIN:case cn.a.PET_PRODUCT_MENU:case cn.a.GUILD_FURNI_CONTEXT_MENU:case cn.a.MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG:case cn.a.PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG:case cn.a.BACKGROUND_COLOR:case cn.a.MYSTERYBOX_OPEN_DIALOG:case cn.a.EFFECTBOX_OPEN_DIALOG:case cn.a.MYSTERYTROPHY_OPEN_DIALOG:case cn.a.ACHIEVEMENT_RESOLUTION_OPEN:case cn.a.ACHIEVEMENT_RESOLUTION_ENGRAVING:case cn.a.ACHIEVEMENT_RESOLUTION_FAILED:case cn.a.FRIEND_FURNITURE_CONFIRM:case cn.a.FRIEND_FURNITURE_ENGRAVING:case cn.a.BADGE_DISPLAY_ENGRAVING:case cn.a.HIGH_SCORE_DISPLAY:case cn.a.HIDE_HIGH_SCORE_DISPLAY:case cn.a.INERNAL_LINK:case cn.a.ROOM_LINK:return void this.onRoomObjectWidgetRequestEvent(t,e);case k.DICE_ACTIVATE:case k.DICE_OFF:case k.USE_HABBOWHEEL:case k.STICKIE:case k.ENTER_ONEWAYDOOR:return void this.onRoomObjectFurnitureActionEvent(t,e);case $i.ADD_HOLE:case $i.REMOVE_HOLE:return void this.onRoomObjectFloorHoleEvent(t,e);case Xi.LOAD_BADGE:return void this.onRoomObjectBadgeAssetEvent(t,e);case k.MOUSE_ARROW:case k.MOUSE_BUTTON:return void this.handleMousePointer(t,e);case nn.ROOM_OBJECT_INITIALIZED:case nn.ROOM_OBJECT_DISPOSED:case nn.PLAY_SAMPLE:case nn.CHANGE_PITCH:return void this.handleRoomObjectSamplePlaybackEvent(t,e);case en.ROOM_BACKGROUND_COLOR:return void this.onHSLColorEnableEvent(t,e);case Qi.RODRE_CURRENT_USER_ID:case Qi.RODRE_URL_PREFIX:return void this.onRoomObjectDataRequestEvent(t,e);default:return void n.a.log("Unhandled Event: "+t.constructor.name,"Object ID: "+t.object.id)}}handleRoomObjectMouseEvent(t,e){if(t&&t.type)switch(t.type){case o.CLICK:return void this.handleRoomObjectMouseClickEvent(t,e);case o.MOUSE_MOVE:return void this.handleRoomObjectMouseMoveEvent(t,e);case o.MOUSE_DOWN:return void this.handleRoomObjectMouseDownEvent(t,e);case o.MOUSE_ENTER:return void this.handleRoomObjectMouseEnterEvent(t,e);case o.MOUSE_LEAVE:return void this.handleRoomObjectMouseLeaveEvent(t,e)}}handleRoomObjectMouseClickEvent(t,e){if(!t)return;let s=dn.a.OBJECT_UNDEFINED;const i=this.getSelectedRoomObjectData(e);i&&(s=i.operation);let n=!1,r=!1;this._whereYouClickIsWhereYouGo&&(s&&s!==dn.a.OBJECT_UNDEFINED||(n=this._Str_23423(e,t)));const a=this._roomEngine.getRoomObjectCategoryForType(t.objectType);switch(s){case dn.a.OBJECT_MOVE:a===yt.a.ROOM?i&&this.processRoomObjectOperation(e,i.id,i.category,dn.a.OBJECT_MOVE_TO):a===yt.a.UNIT&&(i&&t.objectType===Ct.a.MONSTER_PLANT&&this.processRoomObjectOperation(e,i.id,i.category,dn.a.OBJECT_MOVE_TO),t.eventId||this._Str_11142(yt.a.ROOM,l.a.MOUSE_CLICK,t.eventId),this._Str_19253(e,t.objectId,a)),r=!0,-1!==t.objectId&&this._Str_17481(e,t.objectId,a);break;case dn.a.OBJECT_PLACE:if(a===yt.a.ROOM)this._Str_19271(e,t instanceof an,t instanceof on);else if(a===yt.a.UNIT)switch(t.objectType){case Ct.a.MONSTER_PLANT:case Ct.a.RENTABLE_BOT:this._Str_19271(e,t instanceof an,t instanceof on);break;default:t.eventId&&this._Str_11142(yt.a.ROOM,l.a.MOUSE_CLICK,t.eventId),this._Str_19253(e,t.objectId,a)}break;case dn.a.OBJECT_UNDEFINED:a===yt.a.ROOM?!n&&t instanceof an&&this.onRoomObjectTileMouseEvent(e,t):(this._Str_17481(e,t.objectId,a),r=!1,a===yt.a.UNIT?(!t.ctrlKey||t.altKey||t.shiftKey||t.objectType!==Ct.a.RENTABLE_BOT?!t.ctrlKey||t.altKey||t.shiftKey||t.objectType!==Ct.a.MONSTER_PLANT?t.ctrlKey||t.altKey||!t.shiftKey||t.objectType!==Ct.a.MONSTER_PLANT||this.processRoomObjectOperation(e,t.objectId,a,dn.a.OBJECT_ROTATE_POSITIVE):this.processRoomObjectOperation(e,t.objectId,a,dn.a.OBJECT_PICKUP_PET):this.processRoomObjectOperation(e,t.objectId,a,dn.a.OBJECT_PICKUP_BOT),this._roomEngine.isPlayingGame()?r=!0:n=!0):a!==yt.a.FLOOR&&a!==yt.a.WALL||(t.altKey||t.ctrlKey||t.shiftKey)&&(t.ctrlKey||t.altKey||!t.shiftKey?!t.ctrlKey||t.altKey||t.shiftKey||this.processRoomObjectOperation(e,t.objectId,a,dn.a.OBJECT_PICKUP):a===yt.a.FLOOR&&this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new F.a(F.a.REQUEST_ROTATE,e,t.objectId,a)),this._roomEngine.isPlayingGame()?r=!0:n=!0),t.eventId&&(n&&this._Str_11142(yt.a.ROOM,l.a.MOUSE_CLICK,t.eventId),r&&this._Str_11142(yt.a.MINIMUM,l.a.MOUSE_CLICK,t.eventId)))}if(a===yt.a.ROOM){const s=this._Str_18648(yt.a.MINIMUM,l.a.MOUSE_CLICK),i=this._Str_18648(yt.a.UNIT,l.a.MOUSE_CLICK);s===t.eventId||i===t.eventId||r||(this._Str_16209(e),this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new F.a(F.a.DESELECTED,e,-1,yt.a.MINIMUM)),this._Str_12227(e,0,!1))}}handleRoomObjectMouseMoveEvent(t,e){if(!t)return;let s=dn.a.OBJECT_UNDEFINED;const i=this.getSelectedRoomObjectData(e);i&&(s=i.operation);const n=this._roomEngine.getRoomObjectCategoryForType(t.objectType);if(this._roomEngine){const s=this._roomEngine.getRoomObjectCursor(e);if(s&&s.logic){let i=null;t instanceof an?i=this._Str_23824(t,e):t.object&&-1!==t.object.id?this._whereYouClickIsWhereYouGo&&(i=this._Str_25124(n,e,t)):i=new un(null,0,!1,t.eventId),s.processUpdateMessage(i)}}switch(s){case dn.a.OBJECT_MOVE:return void(n===yt.a.ROOM&&this._Str_24048(t,e));case dn.a.OBJECT_PLACE:return void(n===yt.a.ROOM&&this._Str_22548(t,e))}}handleRoomObjectMouseDownEvent(t,e){if(!t)return;let s=dn.a.OBJECT_UNDEFINED;const i=this.getSelectedRoomObjectData(e);i&&(s=i.operation);const n=this._roomEngine.getRoomObjectCategoryForType(t.objectType);switch(s){case dn.a.OBJECT_UNDEFINED:return void(n!==yt.a.FLOOR&&n!==yt.a.WALL&&t.objectType!==Ct.a.MONSTER_PLANT||(t.altKey&&!t.ctrlKey&&!t.shiftKey||this._Str_25211(t))&&this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new F.a(F.a.REQUEST_MOVE,e,t.objectId,n)))}}handleRoomObjectMouseEnterEvent(t,e){const s=t.objectId,i=this._roomEngine.getRoomObjectCategoryForType(t.objectType);this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new F.a(F.a.MOUSE_ENTER,e,s,i))}handleRoomObjectMouseLeaveEvent(t,e){const s=t.objectId,i=this._roomEngine.getRoomObjectCategoryForType(t.objectType);if(i!==yt.a.ROOM&&i===yt.a.UNIT){const t=this._roomEngine.getRoomObjectCursor(e);t&&t.processUpdateMessage(new dt(0,null))}this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new F.a(F.a.MOUSE_LEAVE,e,s,i))}onRoomObjectStateChangedEvent(t,e){if(t)switch(t.type){case rn.STATE_CHANGE:return void this.updateRoomObjectState(e,t.object.id,t.object.type,t.state,!1);case rn.STATE_RANDOM:return void this.updateRoomObjectState(e,t.object.id,t.object.type,t.state,!0)}}onRoomObjectDimmerStateUpdateEvent(t,e){if(t)switch(t.type){case Ji.DIMMER_STATE:return void this._roomEngine.events.dispatchEvent(new ji.a(e,t.state,t._Str_14686,t._Str_6815,t.color,t._Str_5123))}}onRoomObjectMoveEvent(t,e){if(t&&this._roomEngine)switch(t.type){case sn.POSITION_CHANGED:{const s=t.objectId,i=this._roomEngine.getRoomObjectCategoryForType(t.objectType),n=this._roomEngine.getRoomObject(e,s,i),r=this._roomEngine.getRoomObjectSelectionArrow(e);if(n&&r&&r.logic){const t=n.getLocation();r.logic.processUpdateMessage(new c.a(t,null))}return}case sn.OBJECT_REMOVED:return void this._Str_12227(e,0,!1)}}onRoomObjectWidgetRequestEvent(t,e){if(!t||!this._roomEngine)return;const s=t.objectId,i=this._roomEngine.getRoomObjectCategoryForType(t.objectType),n=this._roomEngine.events;if(n)switch(t.type){case cn.a.OPEN_WIDGET:return void n.dispatchEvent(new Zi.a(Zi.a.OPEN_WIDGET,e,s,i,t.object.logic.widget));case cn.a.CLOSE_WIDGET:return void n.dispatchEvent(new Zi.a(Zi.a.CLOSE_WIDGET,e,s,i,t.object.logic.widget));case cn.a.TROPHY:return void n.dispatchEvent(new Zi.a(Zi.a.REQUEST_TROPHY,e,s,i));case cn.a.CREDITFURNI:return void n.dispatchEvent(new Zi.a(Zi.a.REQUEST_CREDITFURNI,e,s,i));case cn.a.INERNAL_LINK:return void n.dispatchEvent(new Zi.a(Zi.a.REQUEST_INTERNAL_LINK,e,s,i));case cn.a.ROOM_LINK:return void n.dispatchEvent(new Zi.a(Zi.a.REQUEST_ROOM_LINK,e,s,i));case cn.a.HIGH_SCORE_DISPLAY:return void n.dispatchEvent(new Zi.a(Zi.a.REQUEST_HIGH_SCORE_DISPLAY,e,s,i));case cn.a.HIDE_HIGH_SCORE_DISPLAY:return void n.dispatchEvent(new Zi.a(Zi.a.REQUEST_HIDE_HIGH_SCORE_DISPLAY,e,s,i));case cn.a.STICKIE:return void n.dispatchEvent(new Zi.a(Zi.a.REQUEST_STICKIE,e,s,i));case cn.a.DIMMER:return void n.dispatchEvent(new Zi.a(Zi.a.REQUEST_DIMMER,e,s,i));case cn.a.PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG:n.dispatchEvent(new Zi.a(Zi.a.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,e,s,i));break;case cn.a.MYSTERYBOX_OPEN_DIALOG:n.dispatchEvent(new Zi.a(Zi.a.REQUEST_MYSTERYBOX_OPEN_DIALOG,e,s,i));break;case cn.a.MYSTERYTROPHY_OPEN_DIALOG:n.dispatchEvent(new Zi.a(Zi.a.REQUEST_MYSTERYTROPHY_OPEN_DIALOG,e,s,i));break;case cn.a.EFFECTBOX_OPEN_DIALOG:n.dispatchEvent(new Zi.a(Zi.a.REQUEST_EFFECTBOX_OPEN_DIALOG,e,s,i));break;case cn.a.MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG:n.dispatchEvent(new Zi.a(Zi.a.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,e,s,i));break;case cn.a.MANNEQUIN:n.dispatchEvent(new Zi.a(Zi.a.REQUEST_MANNEQUIN,e,s,i));break;case cn.a.BACKGROUND_COLOR:n.dispatchEvent(new Zi.a(Zi.a.REQUEST_BACKGROUND_COLOR,e,s,i));break;case cn.a.FRIEND_FURNITURE_ENGRAVING:n.dispatchEvent(new Zi.a(Zi.a.REQUEST_FRIEND_FURNITURE_ENGRAVING,e,s,i));break;case cn.a.PRESENT:n.dispatchEvent(new Zi.a(Zi.a.REQUEST_PRESENT,e,s,i))}}onRoomObjectFurnitureActionEvent(t,e){t&&this.useObject(e,t.object.id,t.object.type,t.type)}onRoomObjectFloorHoleEvent(t,e){if(t)switch(t.type){case $i.ADD_HOLE:return void this._roomEngine.addRoomInstanceFloorHole(e,t.objectId);case $i.REMOVE_HOLE:return void this._roomEngine.removeRoomInstanceFloorHole(e,t.objectId)}}onRoomObjectBadgeAssetEvent(t,e){if(t&&this._roomEngine)switch(t.type){case Xi.LOAD_BADGE:{const s=t.objectId,i=this._roomEngine.getRoomObjectCategoryForType(t.objectType);return void this._roomEngine.loadRoomObjectBadgeImage(e,s,i,t.badgeId,t.groupBadge)}}}handleMousePointer(t,e){t&&this._roomEngine.updateMousePointer(t.type,t.objectId,t.objectType)}handleRoomObjectSamplePlaybackEvent(t,e){if(!t)return;const s=this._roomEngine.getRoomObjectCategoryForType(t.objectType);switch(t.type){case nn.ROOM_OBJECT_INITIALIZED:this._roomEngine.events.dispatchEvent(new qi.a(qi.a.ROOM_OBJECT_INITIALIZED,e,t.objectId,s,t.sampleId,t.pitch));break;case nn.ROOM_OBJECT_DISPOSED:this._roomEngine.events.dispatchEvent(new qi.a(qi.a.ROOM_OBJECT_DISPOSED,e,t.objectId,s,t.sampleId,t.pitch));break;case nn.PLAY_SAMPLE:this._roomEngine.events.dispatchEvent(new qi.a(qi.a.PLAY_SAMPLE,e,t.objectId,s,t.sampleId,t.pitch));break;case nn.CHANGE_PITCH:this._roomEngine.events.dispatchEvent(new qi.a(qi.a.CHANGE_PITCH,e,t.objectId,s,t.sampleId,t.pitch))}}onHSLColorEnableEvent(t,e){if(t&&this._roomEngine)switch(t.type){case en.ROOM_BACKGROUND_COLOR:return void this._roomEngine.events.dispatchEvent(new tn.a(tn.a.ROOM_BACKGROUND_COLOR,e,t.enable,t.hue,t.saturation,t.lightness))}}onRoomObjectDataRequestEvent(t,e){if(t&&this._roomEngine&&t.object)switch(t.type){case Qi.RODRE_CURRENT_USER_ID:return void t.object.model.setValue(At.a.SESSION_CURRENT_USER_ID,this._roomEngine.sessionDataManager.userId);case Qi.RODRE_URL_PREFIX:return void t.object.model.setValue(At.a.SESSION_CURRENT_USER_ID,h.a.instance.getConfiguration("url.prefix"))}}onRoomObjectTileMouseEvent(t,e){if(!this._roomEngine||this._roomEngine.isDecorating||!this._roomEngine.roomSessionManager)return;const s=this._roomEngine.roomSessionManager.getSession(t);s&&!s.isSpectator&&this.sendWalkUpdate(e._Str_16836,e._Str_17676)}_Str_24048(t,e){if(!t||!this._roomEngine)return;if(!this._roomEngine.events)return;const s=this.getSelectedRoomObjectData(e);if(!s)return;const i=this._roomEngine.getRoomObject(e,s.id,s.category);if(!i)return;let n=!0;if(s.category===yt.a.FLOOR||s.category===yt.a.UNIT){const r=this._roomEngine.getFurnitureStackingHeightMap(e);t instanceof an&&this._Str_18155(i,s,Math.trunc(t.tileX+.5),Math.trunc(t.tileY+.5),r)||(this._Str_18155(i,s,s.loc.x,s.loc.y,r),n=!1)}else s.category===yt.a.WALL&&(n=!1,t instanceof on&&this._Str_22090(i,s,t.wallLocation,t.wallWidth,t.wallHeight,t.x,t.y,t.direction)&&(n=!0),n||(i.setLocation(s.loc),i.setDirection(s.dir)),this._roomEngine.updateRoomObjectMask(e,s.id,n));n?(this.setFurnitureAlphaMultiplier(i,.5),this._roomEngine._Str_7972(!1)):(this.setFurnitureAlphaMultiplier(i,0),this._roomEngine._Str_7972(!0))}_Str_22548(t,e){if(!t||!this._roomEngine)return;if(!this._roomEngine.events)return;let s=this.getSelectedRoomObjectData(e);if(!s)return;let i=this._roomEngine.getRoomObject(e,s.id,s.category);if(!i){if(t instanceof an){if(s.category===yt.a.FLOOR)this._roomEngine.addFurnitureFloor(e,s.id,s.typeId,s.loc,s.dir,0,s.stuffData,parseFloat(s._Str_4766),-1,0,0,"",!1);else if(s.category===yt.a.UNIT){this._roomEngine.addRoomObjectUser(e,s.id,new m.a,new m.a(180),180,s.typeId,s._Str_4766);const t=this._roomEngine.getRoomObject(e,s.id,s.category);t&&s.posture&&t.model.setValue(At.a.FIGURE_POSTURE,s.posture)}}else t instanceof on&&s.category===yt.a.WALL&&this._roomEngine.addFurnitureWall(e,s.id,s.typeId,s.loc,s.dir,0,s._Str_4766,0);if(i=this._roomEngine.getRoomObject(e,s.id,s.category),i&&s.category===yt.a.FLOOR){const t=i.model.getValue(At.a.FURNITURE_ALLOWED_DIRECTIONS);if(t&&t.length){const n=new m.a(t[0]);if(i.setDirection(n),this._Str_16022(e,s.id,s.category,s.loc,n,s.operation,s.typeId,s._Str_4766,s.stuffData,s.state,s._Str_15896,s.posture),s=this.getSelectedRoomObjectData(e),!s)return}}this.setFurnitureAlphaMultiplier(i,.5),this._roomEngine._Str_7972(!0)}if(i){let n=!0;const r=this._roomEngine.getFurnitureStackingHeightMap(e);s.category===yt.a.FLOOR?t instanceof an&&this._Str_18155(i,s,Math.trunc(t.tileX+.5),Math.trunc(t.tileY+.5),r)||(this._roomEngine.removeRoomObjectFloor(e,s.id),n=!1):s.category===yt.a.WALL?(n=!1,t instanceof on&&this._Str_22090(i,s,t.wallLocation,t.wallWidth,t.wallHeight,t.x,t.y,t.direction)&&(n=!0),n||this._roomEngine.removeRoomObjectWall(e,s.id),this._roomEngine.updateRoomObjectMask(e,s.id,n)):s.category===yt.a.UNIT&&(t instanceof an&&this._Str_25586(i,Math.trunc(t.tileX+.5),Math.trunc(t.tileY+.5),this._roomEngine.getLegacyWallGeometry(e))||(this._roomEngine.removeRoomObjectUser(e,s.id),n=!1)),this._roomEngine._Str_7972(!n)}}_Str_18155(t,e,s,i,n){if(!t||!e)return!1;const r=new m.a;r.assign(t.getDirection()),t.setDirection(e.dir);const a=new m.a(s,i,0),o=new m.a;o.assign(t.getDirection());let c=this._Str_21004(t,a,e.loc,e.dir,n);return c||(o.x=this._Str_17555(t,!0),t.setDirection(o),c=this._Str_21004(t,a,e.loc,e.dir,n)),c?(t.setLocation(c),o&&t.setDirection(o),!0):(t.setDirection(r),!1)}_Str_22090(t,e,s,i,n,r,a,o){if(!t||!e)return!1;const c=new m.a(o),h=this._Str_25568(t,s,i,n,r,a,e);return!!h&&(t.setLocation(h),t.setDirection(c),!0)}_Str_21004(t,e,s,i,n){if(!t||!t.model||!e)return null;let r=null;const a=t.getDirection();if(!a)return null;if(!s||!i)return null;if(e.x===s.x&&e.y===s.y&&a.x===i.x)return r=new m.a,r.assign(s),r;let o=t.model.getValue(At.a.FURNITURE_SIZE_X),c=t.model.getValue(At.a.FURNITURE_SIZE_Y);o<1&&(o=1),c<1&&(c=1);const h=s.x,l=s.y;let u=o,_=c,d=0,g=Math.trunc(Math.trunc(a.x+45)%360/90);if(1!==g&&3!==g||(d=o,o=c,c=d),g=Math.trunc(Math.trunc(i.x+45)%360/90),1!==g&&3!==g||(d=u,u=_,_=d),n&&e){const s=1===t.model.getValue(At.a.FURNITURE_ALWAYS_STACKABLE);return n.validateLocation(e.x,e.y,o,c,h,l,u,_,s)?new m.a(e.x,e.y,n.getTileHeight(e.x,e.y)):null}return null}_Str_25568(t,e,s,i,n,r,a){if(null==t||null==t.model||null==e||null==s||null==i||null==a)return null;const o=t.model.getValue(At.a.FURNITURE_SIZE_X),c=t.model.getValue(At.a.FURNITURE_SIZE_Z),h=t.model.getValue(At.a.FURNITURE_CENTER_Z);if((n<o/2||n>s.length-o/2||r<h||r>i.length-(c-h))&&(n<o/2&&n<=s.length-o/2?n=o/2:n>=o/2&&n>s.length-o/2&&(n=s.length-o/2),r<h&&r<=i.length-(c-h)?r=h:r>=h&&r>i.length-(c-h)&&(r=i.length-(c-h))),n<o/2||n>s.length-o/2||r<h||r>i.length-(c-h))return null;let l=m.a.sum(m.a.product(s,n/s.length),m.a.product(i,r/i.length));return l=m.a.sum(e,l),l}updateRoomObjectState(t,e,s,i,n){const r=this._roomEngine.getRoomObjectCategoryForType(s);this.sendStateUpdate(t,e,r,i,n)}useObject(t,e,s,i){if(this._roomEngine&&this._roomEngine.connection)switch(i){case k.DICE_ACTIVATE:return void this._roomEngine.connection.send(new Li.a(e));case k.DICE_OFF:return void this._roomEngine.connection.send(new Pi.a(e));case k.USE_HABBOWHEEL:return void this._roomEngine.connection.send(new xi.a(e));case k.STICKIE:return void this._roomEngine.connection.send(new Oi.a(e));case k.ENTER_ONEWAYDOOR:return void this._roomEngine.connection.send(new ki.a(e))}}sendStateUpdate(t,e,s,i,n){return!this._roomEngine||!this._roomEngine.connection||(s===yt.a.FLOOR?this._roomEngine.connection.send(n?new Vi.a(e,i):new Fi.a(e,i)):s===yt.a.WALL&&this._roomEngine.connection.send(new Bi.a(e,i)),!0)}sendWalkUpdate(t,e){this._roomEngine&&this._roomEngine.connection&&this._roomEngine.connection.send(new Gi.a(t,e))}_Str_25124(t,e,s){if(t!==yt.a.FLOOR)return null;const i=this._roomEngine.getRoomObject(e,s.objectId,yt.a.FLOOR);if(!i)return null;const n=this._Str_21925(i,s);if(!n)return null;if(!this._roomEngine.getFurnitureStackingHeightMap(e))return null;const r=n.z;return new un(new m.a(n.x,n.y,i.getLocation().z),r,!0,s.eventId)}_Str_23423(t,e){const s=this._roomEngine.getRoomObject(t,e.objectId,yt.a.FLOOR),i=this._Str_21925(s,e);return!!i&&(this.sendWalkUpdate(i.x,i.y),!0)}_Str_21925(t,e){if(!t||!e)return null;const s=this._roomEngine.sessionDataManager.getFloorItemDataByName(t.type);if(!s)return null;if(!s.canStandOn&&!s.canSitOn&&!s.canLayOn)return null;const i=t.model;if(!i)return null;const n=t.getLocation(),r=t.getDirection();let a=i.getValue(At.a.FURNITURE_SIZE_X),o=i.getValue(At.a.FURNITURE_SIZE_Y);const c=i.getValue(At.a.FURNITURE_SIZE_Z);90!==r.x&&270!==r.x||([a,o]=[o,a]),a<1&&(a=1),o<1&&(o=1);const h=this._roomEngine.getActiveRoomInstanceRenderingCanvas();if(!h)return null;const l=h.geometry.scale,u=(l/2+e.spriteOffsetX+e.localX)/(l/4),_=(e.spriteOffsetY+e.localY+(c-(s.canSitOn?.5:0))*l/2)/(l/4),d=(u-2*_)/4,g=Math.floor(n.x+(u+2*_)/4),p=Math.floor(n.y-d+1);let f=!1;return(g<n.x||g>=n.x+a||p<n.y||p>=n.y+o)&&(f=!0),f?null:new m.a(g,p,s.canSitOn?c-.5:c)}_Str_23824(t,e){if(this._whereYouClickIsWhereYouGo)return new un(new m.a(t._Str_16836,t._Str_17676,t._Str_21459),0,!0,t.eventId);const s=this._roomEngine.getRoomObjectCursor(e);if(s&&s.visualization){const s=t._Str_16836,i=t._Str_17676,n=t._Str_21459;if(this._roomEngine.getRoomInstance(e)){const r=this._roomEngine.getRoomTileObjectMap(e);if(r){const a=r._Str_19056(s,i),o=this._roomEngine.getFurnitureStackingHeightMap(e);if(o){if(a&&a.model&&a.model.getValue(At.a.FURNITURE_IS_VARIABLE_HEIGHT)>0){const r=o.getTileHeight(s,i),a=this._roomEngine.getLegacyWallGeometry(e).getHeight(s,i);return new un(new m.a(s,i,n),r-a,!0,t.eventId)}return new un(new m.a(s,i,n),0,!0,t.eventId)}}}}return null}_Str_19271(t,e,s){const i=this.getSelectedRoomObjectData(t);if(!i)return;let n=null,r=i.id;const a=i.category;let o=0,c=0,h=0,l=0,u="";if(this._roomEngine&&this._roomEngine.connection&&(n=this._roomEngine.getRoomObject(t,r,a),n)){const e=n.getLocation();if(l=n.getDirection().x,a===yt.a.FLOOR||a===yt.a.UNIT)o=e.x,c=e.y,h=e.z;else if(a===yt.a.WALL){o=e.x,c=e.y,h=e.z;const s=this._roomEngine.getLegacyWallGeometry(t);s&&(u=s._Str_21860(e,l))}l=(l/45%8+8)%8,r<0&&a===yt.a.UNIT&&(r*=-1),this._objectPlacementSource!==Hi.a.CATALOG&&(a===yt.a.UNIT?i.typeId===gn.a.PET?this._roomEngine.connection.send(new Ai.a(r,Math.trunc(o),Math.trunc(c))):i.typeId===gn.a.RENTABLE_BOT&&this._roomEngine.connection.send(new Ti.a(r,Math.trunc(o),Math.trunc(c))):void 0!==n.model.getValue(At.a.FURNITURE_IS_STICKIE)?this._roomEngine.connection.send(new Ui.a(r,u)):this._roomEngine.connection.send(new Ni.a(r,a,u,Math.trunc(o),Math.trunc(c),l)))}this._roomEngine.setPlacedRoomObjectData(t,new mn(i.id,i.category,null,i.dir,null)),this._Str_13199(t),this._roomEngine&&this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new zi(F.a.PLACED,t,r,a,u,o,c,h,l,n&&n.id===i.id,e,s,i._Str_4766))}processRoomObjectWallOperation(t,e,s,i,n){return!!this._roomEngine&&!!this._roomEngine.getRoomObject(t,e,s)}processRoomObjectFloorOperation(t,e,s,i){return!!this._roomEngine}processRoomObjectOperation(t,e,s,i){if(!this._roomEngine)return!1;const n=this._roomEngine.getRoomObject(t,e,s);if(!n)return!1;let r=!0;switch(i){case dn.a.OBJECT_ROTATE_POSITIVE:case dn.a.OBJECT_ROTATE_NEGATIVE:if(this._roomEngine.connection){let s=0;s=this._Str_17555(n,i!=dn.a.OBJECT_ROTATE_NEGATIVE);const r=n.getLocation().x,a=n.getLocation().y;if(this.isValidLocation(n,new m.a(s),this._roomEngine.getFurnitureStackingHeightMap(t)))if(s=Math.trunc(s/45),n.type===Ct.a.MONSTER_PLANT){const i=this._roomEngine.roomSessionManager.getSession(t);if(i){const t=i.userDataManager.getUserDataByIndex(e);t&&this._roomEngine.connection.send(new Ci.a(t.webID,Math.trunc(r),Math.trunc(a),s))}}else this._roomEngine.connection.send(new wi.a(e,r,a,s))}break;case dn.a.OBJECT_EJECT:case dn.a.OBJECT_PICKUP:this._roomEngine.connection&&this._roomEngine.connection.send(new Di.a(s,e));break;case dn.a.OBJECT_PICKUP_PET:if(this._roomEngine.connection){const s=this._roomEngine.roomSessionManager.getSession(t);if(s){const t=s.userDataManager.getUserDataByIndex(e);s.pickupPet(t.webID)}}break;case dn.a.OBJECT_PICKUP_BOT:if(this._roomEngine.connection){const s=this._roomEngine.roomSessionManager.getSession(t);if(s){const t=s.userDataManager.getUserDataByIndex(e);s.pickupBot(t.webID)}}break;case dn.a.OBJECT_MOVE:r=!1,this.setFurnitureAlphaMultiplier(n,.5),this.setSelectedRoomObjectData(t,n.id,s,n.getLocation(),n.getDirection(),i),this._roomEngine._Str_16645(n.id,s,!0),this._roomEngine._Str_7972(!1);break;case dn.a.OBJECT_MOVE_TO:{const i=this.getSelectedRoomObjectData(t);if(this._Str_16022(t,i.id,i.category,i.loc,i.dir,dn.a.OBJECT_MOVE_TO,i.typeId,i._Str_4766,i.stuffData,i.state,i._Str_15896,i.posture),this.setFurnitureAlphaMultiplier(n,1),this._roomEngine._Str_17948(),this._roomEngine.connection)if(s===yt.a.FLOOR){const t=n.getDirection().x%360,s=n.getLocation();this._roomEngine.connection.send(new wi.a(e,s.x,s.y,t/45))}else if(s===yt.a.WALL){const s=n.getDirection().x%360,i=this._roomEngine.getLegacyWallGeometry(t);if(i){const t=i._Str_21860(n.getLocation(),s);t&&this._roomEngine.connection.send(new Wi.a(e,t))}}else if(s===yt.a.UNIT){const s=n.getDirection().x%360,i=n.getLocation(),r=s/45,a=(parseInt(n.model.getValue(At.a.RACE)),this._roomEngine.roomSessionManager.getSession(t));if(a){const t=a.userDataManager.getUserDataByIndex(e);t&&this._roomEngine.connection.send(new Ci.a(t.webID,i.x,i.y,r))}}break}}return r&&this._Str_13199(t),!0}_Str_17555(t,e){if(!t||!t.model)return 0;let s=0,i=0,n=[];n=t.model.getValue(t.type===Ct.a.MONSTER_PLANT?At.a.PET_ALLOWED_DIRECTIONS:At.a.FURNITURE_ALLOWED_DIRECTIONS);let r=t.getDirection().x;if(n&&n.length){if(s=n.indexOf(r),s<0){for(s=0,i=0;i<n.length&&!(r<=n[i]);)s++,i++;s%=n.length}s=e?(s+1)%n.length:(s-1+n.length)%n.length,r=n[s]}return r}isValidLocation(t,e,s){if(!t||!t.model||!e)return!1;const i=t.getDirection(),n=t.getLocation();if(!i||!n)return!1;if(i.x%180==e.x%180)return!0;let r=t.model.getValue(At.a.FURNITURE_SIZE_X),a=t.model.getValue(At.a.FURNITURE_SIZE_Y);r<1&&(r=1),a<1&&(a=1);let o=r,c=a,h=Math.trunc(Math.trunc(e.x+45)%360/90);if(1!==h&&3!==h||([r,a]=[a,r]),h=Math.trunc(Math.trunc(i.x+45)%360/90),1!==h&&3!==h||([o,c]=[c,o]),s&&n){const e=1===t.model.getValue(At.a.FURNITURE_ALWAYS_STACKABLE);if(s.validateLocation(n.x,n.y,r,a,n.x,n.y,o,c,e,n.z))return!0}return!1}_Str_19253(t,e,s){const i=this.getSelectedRoomObjectData(t);i&&this._roomEngine.getRoomObject(t,e,s)&&this._roomEngine&&this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new Yi(F.a.PLACED_ON_USER,t,e,s,i.id,i.category))}_Str_17481(t,e,s){if(!this._roomEngine)return;const i=this._roomEngine.events;if(i)switch(s){case yt.a.UNIT:case yt.a.FLOOR:case yt.a.WALL:if(s===yt.a.UNIT)this._Str_16209(t),this._Str_12227(t,e,!0);else if(this._Str_12227(t,0,!1),e!==this._selectedObjectId){this._Str_16209(t);const i=this._roomEngine.getRoomObject(t,e,s);i&&i.logic&&(i.logic.processUpdateMessage(new ln(!0)),this._selectedObjectId=e,this._selectedObjectCategory=s)}return void i.dispatchEvent(new F.a(F.a.SELECTED,t,e,s))}}_Str_16209(t){if(-1===this._selectedObjectId)return;const e=this._roomEngine.getRoomObject(t,this._selectedObjectId,this._selectedObjectCategory);e&&e.logic&&(e.logic.processUpdateMessage(new ln(!1)),this._selectedObjectId=-1,this._selectedObjectCategory=yt.a.MINIMUM)}_Str_12227(t,e,s){if(!this._roomEngine)return;const i=yt.a.UNIT,n=this._roomEngine.getRoomObject(t,this._selectedAvatarId,i);n&&n.logic&&(n.logic.processUpdateMessage(new hn(!1)),this._selectedAvatarId=-1);let r=!1;if(s){const s=this._roomEngine.getRoomObject(t,e,i);if(s&&s.logic){s.logic.processUpdateMessage(new hn(!0)),r=!0,this._selectedAvatarId=e;const t=s.getLocation();t&&this._roomEngine.connection.send(new Ki.a(~~t.x,~~t.y))}}const a=this._roomEngine.getRoomObjectSelectionArrow(t);a&&a.logic&&(r&&!this._roomEngine.isPlayingGame()?a.logic.processUpdateMessage(new _n(_n.ENABLED)):a.logic.processUpdateMessage(new _n(_n.DISABLED)))}_Str_13199(t){if(!this._roomEngine)return;this._roomEngine._Str_17948();const e=this.getSelectedRoomObjectData(t);if(e){if(e.operation===dn.a.OBJECT_MOVE||e.operation===dn.a.OBJECT_MOVE_TO){const s=this._roomEngine.getRoomObject(t,e.id,e.category);s&&e.operation!==dn.a.OBJECT_MOVE_TO&&(s.setLocation(e.loc),s.setDirection(e.dir)),this.setFurnitureAlphaMultiplier(s,1),e.category===yt.a.WALL&&this._roomEngine.updateRoomObjectMask(t,e.id,!0),this._Str_16022(t,e.id,e.category,e.loc,e.dir,dn.a.OBJECT_MOVE,e.typeId,e._Str_4766,e.stuffData,e.state,e._Str_15896,e.posture)}else if(e.operation===dn.a.OBJECT_PLACE){const s=e.id;switch(e.category){case yt.a.FLOOR:this._roomEngine.removeRoomObjectFloor(t,s);break;case yt.a.WALL:this._roomEngine.removeRoomObjectWall(t,s);break;case yt.a.UNIT:this._roomEngine.removeRoomObjectUser(t,s)}}this._roomEngine.setSelectedRoomObjectData(t,null)}}getSelectedRoomObjectData(t){return this._roomEngine?this._roomEngine.getSelectedRoomObjectData(t):null}setFurnitureAlphaMultiplier(t,e){t&&t.model&&t.model.setValue(At.a.FURNITURE_ALPHA_MULTIPLIER,e)}_Str_25211(t){return this._roomEngine.isDecorating&&!(t.ctrlKey||t.shiftKey)}cancelRoomObjectPlacement(t){return this._Str_13199(t),!0}setSelectedRoomObjectData(t,e,s,i,n,r,a=0,o=null,c=null,h=-1,l=-1,u=null){if(this._Str_13199(t),!this._roomEngine)return;const _=new mn(e,s,r,i,n,a,o,c,h,l,u);this._roomEngine.setSelectedRoomObjectData(t,_)}_Str_16022(t,e,s,i,n,r,a=0,o=null,c=null,h=-1,l=-1,u=null){if(!this._roomEngine)return null;const _=new mn(e,s,r,i,n,a,o,c,h,l,u);this._roomEngine.setSelectedRoomObjectData(t,_)}_Str_25586(t,e,s,i){return!!i._Str_10375(e,s)&&(t.setLocation(new m.a(e,s,i.getHeight(e,s))),!0)}modifyWallItemData(t,e,s,i){return!(!this._roomEngine||!this._roomEngine.connection||(this._roomEngine.connection.send(new yi.a(e,s,i)),0))}deleteWallItem(t,e){return!(!this._roomEngine||!this._roomEngine.connection||(this._roomEngine.connection.send(new Mi.a(e)),0))}get engine(){return this._roomEngine}get selectedAvatarId(){return this._selectedAvatarId}}var fn=s("vuPI");class En extends Gt.a{constructor(){super(),this._object=null,this._events=null,this._time=0}initialize(t){}onDispose(){this._object=null}update(t){this._time=t}processUpdateMessage(t){t&&this._object&&(this._object.setLocation(t.location),this._object.setDirection(t.direction))}getEventTypes(){return[]}mergeTypes(t,e){const s=t.concat();for(const i of e)!i||s.indexOf(i)>=0||s.push(i);return s}mouseEvent(t,e){}useObject(){}setObject(t){if(this._object!==t){if(this._object&&this._object.setLogic(null),!t)return this.dispose(),void(this._object=null);this._object=t,this._object.setLogic(this)}}tearDown(){}get object(){return this._object}get eventDispatcher(){return this._events}set eventDispatcher(t){this._events=t}get widget(){return null}get contextMenu(){return null}get time(){return this._time}}let Sn=(()=>{class t extends En{constructor(){super(),this._liftAmount=0,this._location=new m.a,this._locationDelta=new m.a,this._lastUpdateTime=0,this._changeTime=0,this._updateInterval=500}dispose(){this._liftAmount=0,super.dispose()}update(e){super.update(e);const s=this.getLocationOffset(),i=this.object&&this.object.model;if(i&&(s?this._liftAmount!==s.z&&(this._liftAmount=s.z,i.setValue(At.a.FURNITURE_LIFT_AMOUNT,this._liftAmount)):0!==this._liftAmount&&(this._liftAmount=0,i.setValue(At.a.FURNITURE_LIFT_AMOUNT,this._liftAmount))),this._locationDelta.length>0||s){const e=t.TEMP_VECTOR;let i=this.time-this._changeTime;i===this._updateInterval>>1&&i++,i>this._updateInterval&&(i=this._updateInterval),this._locationDelta.length>0?(e.assign(this._locationDelta),e.multiply(i/this._updateInterval),e.add(this._location)):e.assign(this._location),s&&e.add(s),this.object.setLocation(e),i===this._updateInterval&&(this._locationDelta.x=0,this._locationDelta.y=0,this._locationDelta.z=0)}this._lastUpdateTime=this.time}setObject(t){super.setObject(t),t&&this._location.assign(t.getLocation())}processUpdateMessage(t){if(t)return super.processUpdateMessage(t),t.location&&this._location.assign(t.location),t instanceof lt?this.processMoveMessage(t):void 0}processMoveMessage(t){t&&this.object&&t.location&&(this._changeTime=this._lastUpdateTime,this._locationDelta.assign(t.targetLocation),this._locationDelta.subtract(this._location))}getLocationOffset(){return null}get lastUpdateTime(){return this._lastUpdateTime}}return t.TEMP_VECTOR=new m.a,t})(),vn=(()=>{class t extends Sn{constructor(){super(),this._selected=!1,this._reportedLocation=null,this._effectChangeTimeStamp=0,this._newEffect=0,this._blinkingStartTimestamp=h.a.instance.time+this.randomBlinkStartTimestamp(),this._blinkingEndTimestamp=0,this._talkingEndTimestamp=0,this._talkingPauseStartTimestamp=0,this._talkingPauseEndTimestamp=0,this._carryObjectStartTimestamp=0,this._carryObjectEndTimestamp=0,this._allowUseCarryObject=!1,this._animationEndTimestamp=0,this._signEndTimestamp=0,this._gestureEndTimestamp=0,this._numberValueEndTimestamp=0}getEventTypes(){const t=[o.CLICK,sn.POSITION_CHANGED,o.MOUSE_ENTER,o.MOUSE_LEAVE,k.MOUSE_BUTTON,k.MOUSE_ARROW];return this.mergeTypes(super.getEventTypes(),t)}dispose(){this._selected&&this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new sn(sn.OBJECT_REMOVED,this.object)),super.dispose(),this._reportedLocation=null}update(t){if(super.update(t),this._selected&&this.object&&this.eventDispatcher){const t=this.object.getLocation();this._reportedLocation&&this._reportedLocation.x===t.x&&this._reportedLocation.y===t.y&&this._reportedLocation.z===t.z||(this._reportedLocation||(this._reportedLocation=new m.a),this._reportedLocation.assign(t),this.eventDispatcher.dispatchEvent(new sn(sn.POSITION_CHANGED,this.object)))}const e=this.object&&this.object.model;e&&this.updateModel(this.time,e)}updateModel(t,e){this._talkingEndTimestamp>0&&(t>this._talkingEndTimestamp?(e.setValue(At.a.FIGURE_TALK,0),this._talkingEndTimestamp=0,this._talkingPauseStartTimestamp=0,this._talkingPauseEndTimestamp=0):this._talkingPauseEndTimestamp||this._talkingPauseStartTimestamp?this._talkingPauseStartTimestamp>0&&t>this._talkingPauseStartTimestamp?(e.setValue(At.a.FIGURE_TALK,0),this._talkingPauseStartTimestamp=0):this._talkingPauseEndTimestamp>0&&t>this._talkingPauseEndTimestamp&&(e.setValue(At.a.FIGURE_TALK,1),this._talkingPauseEndTimestamp=0):(this._talkingPauseStartTimestamp=t+this.randomTalkingPauseStartTimestamp(),this._talkingPauseEndTimestamp=this._talkingPauseStartTimestamp+this.randomTalkingPauseEndTimestamp())),this._animationEndTimestamp>0&&t>this._animationEndTimestamp&&(e.setValue(At.a.FIGURE_EXPRESSION,0),this._animationEndTimestamp=0),this._gestureEndTimestamp>0&&t>this._gestureEndTimestamp&&(e.setValue(At.a.FIGURE_GESTURE,0),this._gestureEndTimestamp=0),this._signEndTimestamp>0&&t>this._signEndTimestamp&&(e.setValue(At.a.FIGURE_SIGN,-1),this._signEndTimestamp=0),this._carryObjectEndTimestamp>0&&t>this._carryObjectEndTimestamp&&(e.setValue(At.a.FIGURE_CARRY_OBJECT,0),e.setValue(At.a.FIGURE_USE_OBJECT,0),this._carryObjectStartTimestamp=0,this._carryObjectEndTimestamp=0,this._allowUseCarryObject=!1),this._allowUseCarryObject&&t-this._carryObjectStartTimestamp>5e3&&e.setValue(At.a.FIGURE_USE_OBJECT,(t-this._carryObjectStartTimestamp)%1e4<1e3?1:0),this._blinkingStartTimestamp>-1&&t>this._blinkingStartTimestamp&&(e.setValue(At.a.FIGURE_BLINK,1),this._blinkingStartTimestamp=t+this.randomBlinkStartTimestamp(),this._blinkingEndTimestamp=t+this.randomBlinkEndTimestamp()),this._blinkingEndTimestamp>0&&t>this._blinkingEndTimestamp&&(e.setValue(At.a.FIGURE_BLINK,0),this._blinkingEndTimestamp=0),this._effectChangeTimeStamp>0&&t>this._effectChangeTimeStamp&&(e.setValue(At.a.FIGURE_EFFECT,this._newEffect),this._effectChangeTimeStamp=0),this._numberValueEndTimestamp>0&&t>this._numberValueEndTimestamp&&(e.setValue(At.a.FIGURE_NUMBER_VALUE,0),this._numberValueEndTimestamp=0)}processUpdateMessage(e){if(!e||!this.object)return;super.processUpdateMessage(e);const s=this.object&&this.object.model;if(s){if(e instanceof at)return s.setValue(At.a.FIGURE_POSTURE,e.postureType),void s.setValue(At.a.FIGURE_POSTURE_PARAMETER,e.parameter);if(e instanceof z)return s.setValue(At.a.FIGURE_TALK,1),void(this._talkingEndTimestamp=this.time+1e3*e.numberOfWords);if(e instanceof ht)s.setValue(At.a.FIGURE_IS_TYPING,e.isTyping?1:0);else if(e instanceof et)s.setValue(At.a.FIGURE_IS_MUTED,e.isMuted?1:0);else if(e instanceof rt)s.setValue(At.a.FIGURE_IS_PLAYING_GAME,e.isPlayingGame?1:0);else{if(e instanceof ut)return s.setValue(At.a.HEAD_DIRECTION,e.headDirection),s.setValue(At.a.FIGURE_CAN_STAND_UP,e.canStandUp),void s.setValue(At.a.FIGURE_VERTICAL_OFFSET,e.baseY);if(e instanceof $)return s.setValue(At.a.FIGURE_GESTURE,e.gesture),void(this._gestureEndTimestamp=this.time+3e3);if(e instanceof X)return s.setValue(At.a.FIGURE_EXPRESSION,e.expressionType),this._animationEndTimestamp=xt.a.getExpressionTimeout(s.getValue(At.a.FIGURE_EXPRESSION)),void(this._animationEndTimestamp>-1&&(this._animationEndTimestamp+=this.time));if(e instanceof Y)s.setValue(At.a.FIGURE_DANCE,e.danceStyle);else{if(e instanceof ct)return s.setValue(At.a.FIGURE_SLEEP,e.isSleeping?1:0),void(this._blinkingStartTimestamp=e.isSleeping?-1:this.time+this.randomBlinkStartTimestamp());if(e instanceof nt)return s.setValue(At.a.FIGURE_NUMBER_VALUE,e.value),void(this._numberValueEndTimestamp=this.time+3e3);if(e instanceof q)this.updateAvatarEffect(e.effect,e.delayMilliseconds,s);else{if(e instanceof j)return s.setValue(At.a.FIGURE_CARRY_OBJECT,e.itemType),s.setValue(At.a.FIGURE_USE_OBJECT,0),void(0===e.itemType?(this._carryObjectStartTimestamp=0,this._carryObjectEndTimestamp=0,this._allowUseCarryObject=!1):(this._carryObjectStartTimestamp=this.time,e.itemType<t.MAX_HAND_ID?(this._carryObjectEndTimestamp=0,this._allowUseCarryObject=e.itemType<=t.MAX_HAND_USE_ID):(this._carryObjectEndTimestamp=this._carryObjectStartTimestamp+1500,this._allowUseCarryObject=!1)));if(e instanceof _t)s.setValue(At.a.FIGURE_USE_OBJECT,e.itemType);else{if(e instanceof ot)return s.setValue(At.a.FIGURE_SIGN,e.signType),void(this._signEndTimestamp=this.time+5e3);if(!(e instanceof J))return e instanceof Q?(s.setValue(At.a.FIGURE,e.figure),void s.setValue(At.a.GENDER,e.gender)):e instanceof hn?(this._selected=e.selected,void(this._reportedLocation=null)):void(e instanceof st&&s.setValue(At.a.OWN_USER,1));s.setValue(At.a.FIGURE_FLAT_CONTROL,e.level)}}}}}}updateAvatarEffect(e,s,i){if(e===t._Str_13364)this._effectChangeTimeStamp=h.a.instance.time+t._Str_8860,this._newEffect=t._Str_15351;else if(e===t._Str_13733)this._effectChangeTimeStamp=h.a.instance.time+t._Str_8860,this._newEffect=t._Str_13094;else if(i.getValue(At.a.FIGURE_EFFECT)===t._Str_15351)this._effectChangeTimeStamp=h.a.instance.time+t._Str_8860,this._newEffect=e,e=t._Str_13364;else if(i.getValue(At.a.FIGURE_EFFECT)===t._Str_13094)this._effectChangeTimeStamp=h.a.instance.time+t._Str_8860,this._newEffect=e,e=t._Str_13733;else{if(0!==s)return this._effectChangeTimeStamp=h.a.instance.time+s,void(this._newEffect=e);this._effectChangeTimeStamp=0}i.setValue(At.a.FIGURE_EFFECT,e)}mouseEvent(t,e){let s=null;switch(t.type){case l.a.MOUSE_CLICK:s=o.CLICK;break;case l.a.ROLL_OVER:s=o.MOUSE_ENTER,this.object.model&&this.object.model.setValue(At.a.FIGURE_HIGHLIGHT,1),this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new k(k.MOUSE_BUTTON,this.object));break;case l.a.ROLL_OUT:s=o.MOUSE_LEAVE,this.object.model&&this.object.model.setValue(At.a.FIGURE_HIGHLIGHT,0),this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new k(k.MOUSE_ARROW,this.object))}s&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new o(s,this.object,t._Str_3463,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown))}randomTalkingPauseStartTimestamp(){return 100+200*Math.random()}randomTalkingPauseEndTimestamp(){return 75+75*Math.random()}randomBlinkStartTimestamp(){return 4500+1e3*Math.random()}randomBlinkEndTimestamp(){return 50+200*Math.random()}}return t.MAX_HAND_ID=999999999,t.MAX_HAND_USE_ID=999,t._Str_13364=28,t._Str_8860=500,t._Str_15351=29,t._Str_13733=184,t._Str_13094=185,t})();var bn=s("PJfP");let In=(()=>{class t extends Sn{constructor(){super(),this._sizeX=0,this._sizeY=0,this._sizeZ=0,this._centerX=0,this._centerY=0,this._centerZ=0,this._directions=[],this._mouseOver=!1,this._locationOffset=new m.a,this._bouncingStep=0,this._storedRotateMessage=null,this._directionInitialized=!1}getEventTypes(){const t=[rn.STATE_CHANGE,o.CLICK,o.MOUSE_DOWN];return this.widget&&t.push(cn.a.OPEN_WIDGET,cn.a.CLOSE_WIDGET),this.contextMenu&&t.push(cn.a.OPEN_FURNI_CONTEXT_MENU,cn.a.CLOSE_FURNI_CONTEXT_MENU),this.mergeTypes(super.getEventTypes(),t)}initialize(t){if(!t)return;const e=this.object&&this.object.model;if(!e)return;const s=t.dimensions;if(!s)return;this._sizeX=s.x,this._sizeY=s.y,this._sizeZ=s.z,this._centerX=this._sizeX/2,this._centerY=this._sizeY/2,this._centerZ=this._sizeZ/2;const i=t.directions;if(i&&i.length){for(const t of i)this._directions.push(t);this._directions.sort((t,e)=>t-e)}e.setValue(At.a.FURNITURE_SIZE_X,this._sizeX),e.setValue(At.a.FURNITURE_SIZE_Y,this._sizeY),e.setValue(At.a.FURNITURE_SIZE_Z,this._sizeZ),e.setValue(At.a.FURNITURE_CENTER_X,this._centerX),e.setValue(At.a.FURNITURE_CENTER_Y,this._centerY),e.setValue(At.a.FURNITURE_CENTER_Z,this._centerZ),e.setValue(At.a.FURNITURE_ALLOWED_DIRECTIONS,this._directions),e.setValue(At.a.FURNITURE_ALPHA_MULTIPLIER,1)}dispose(){super.dispose(),this._storedRotateMessage=null,this._directions=null}setObject(t){super.setObject(t),t&&t.getLocation().length&&(this._directionInitialized=!0)}getAdClickUrl(t){return t.getValue(At.a.FURNITURE_AD_URL)}update(e){super.update(e),this._bouncingStep>0&&(this._bouncingStep++,this._bouncingStep>t.BOUNCING_STEPS&&(this._bouncingStep=0))}processUpdateMessage(t){if(t instanceof dt)this.processDataUpdateMessage(t);else if(t instanceof mt)this.processObjectHeightUpdateMessage(t);else if(t instanceof pt)this.processItemDataUpdateMessage(t);else{if(this._mouseOver=!1,t.location&&t.direction){if(!(t instanceof lt)){const e=this.object.getDirection(),s=this.object.getLocation();e.x!==t.direction.x&&this._directionInitialized&&s.x===t.location.x&&s.y===t.location.y&&s.z===t.location.z&&(this._bouncingStep=1,this._storedRotateMessage=new c.a(t.location,t.direction),t=null)}this._directionInitialized=!0}t instanceof ln&&this.contextMenu&&this.eventDispatcher&&this.object&&this.eventDispatcher.dispatchEvent(new cn.a(t.selected?cn.a.OPEN_FURNI_CONTEXT_MENU:cn.a.CLOSE_FURNI_CONTEXT_MENU,this.object)),super.processUpdateMessage(t)}}processDataUpdateMessage(t){t&&(this.object.setState(t.state,0),t.data&&t.data.writeRoomObjectModel(this.object.model),isNaN(t.extra)||this.object.model.setValue(At.a.FURNITURE_EXTRAS,t.extra.toString()),this.object.model.setValue(At.a.FURNITURE_STATE_UPDATE_TIME,this.lastUpdateTime))}processObjectHeightUpdateMessage(t){t&&this.object.model.setValue(At.a.FURNITURE_SIZE_Z,t.height)}processItemDataUpdateMessage(t){t&&this.object.model.setValue(At.a.FURNITURE_ITEMDATA,t.data)}mouseEvent(t,e){switch(this.getAdClickUrl(this.object.model),t.type){case l.a.MOUSE_MOVE:if(this.eventDispatcher){const e=new o(o.MOUSE_MOVE,this.object,t._Str_3463,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown);e.localX=t.localX,e.localY=t.localY,e.spriteOffsetX=t.spriteOffsetX,e.spriteOffsetY=t.spriteOffsetY,this.eventDispatcher.dispatchEvent(e)}return;case l.a.ROLL_OVER:if(!this._mouseOver){if(this.eventDispatcher){const e=new o(o.MOUSE_ENTER,this.object,t._Str_3463,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown);e.localX=t.localX,e.localY=t.localY,e.spriteOffsetX=t.spriteOffsetX,e.spriteOffsetY=t.spriteOffsetY,this.eventDispatcher.dispatchEvent(e)}this._mouseOver=!0}return;case l.a.ROLL_OUT:if(this._mouseOver){if(this.eventDispatcher){const e=new o(o.MOUSE_LEAVE,this.object,t._Str_3463,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown);e.localX=t.localX,e.localY=t.localY,e.spriteOffsetX=t.spriteOffsetX,e.spriteOffsetY=t.spriteOffsetY,this.eventDispatcher.dispatchEvent(e)}this._mouseOver=!1}return;case l.a.DOUBLE_CLICK:return void this.useObject();case l.a.MOUSE_CLICK:if(this.eventDispatcher){const e=new o(o.CLICK,this.object,t._Str_3463,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown);e.localX=t.localX,e.localY=t.localY,e.spriteOffsetX=t.spriteOffsetX,e.spriteOffsetY=t.spriteOffsetY,this.eventDispatcher.dispatchEvent(e)}return void(this.eventDispatcher&&this.object&&this.contextMenu&&this.eventDispatcher.dispatchEvent(new cn.a(cn.a.OPEN_FURNI_CONTEXT_MENU,this.object)));case l.a.MOUSE_DOWN:if(this.eventDispatcher){const e=new o(o.MOUSE_DOWN,this.object,t._Str_3463,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown);this.eventDispatcher.dispatchEvent(e)}return}}getLocationOffset(){return this._bouncingStep<=0?null:(this._locationOffset.x=0,this._locationOffset.y=0,this._bouncingStep<=t.BOUNCING_STEPS/2?this._locationOffset.z=t.BOUNCING_Z*this._bouncingStep:this._bouncingStep<=t.BOUNCING_STEPS&&(this._storedRotateMessage&&(super.processUpdateMessage(this._storedRotateMessage),this._storedRotateMessage=null),this._locationOffset.z=t.BOUNCING_Z*(t.BOUNCING_STEPS-this._bouncingStep)),this._locationOffset)}useObject(){this.object&&(this.getAdClickUrl(this.object.model),this.eventDispatcher&&(this.widget&&this.eventDispatcher.dispatchEvent(new cn.a(cn.a.OPEN_WIDGET,this.object)),this.eventDispatcher.dispatchEvent(new rn(rn.STATE_CHANGE,this.object))))}tearDown(){this.widget&&1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&this.eventDispatcher.dispatchEvent(new cn.a(cn.a.CLOSE_WIDGET,this.object)),super.tearDown()}}return t.BOUNCING_STEPS=8,t.BOUNCING_Z=.0625,t})();class Rn extends In{getEventTypes(){const t=[Xi.LOAD_BADGE];return this.mergeTypes(super.getEventTypes(),t)}processUpdateMessage(t){if(super.processUpdateMessage(t),this.object)if(t instanceof dt){const e=t.data;e instanceof bn.a&&this.updateBadge(e.getValue(1))}else t instanceof gt&&"loading_icon"!==t.assetName&&(this.object.model.setValue(At.a.FURNITURE_BADGE_ASSET_NAME,t.assetName),this.object.model.setValue(At.a.FURNITURE_BADGE_IMAGE_STATUS,1),this.update(h.a.instance.time))}mouseEvent(t,e){if(t&&e&&this.object)switch(t.type){case l.a.DOUBLE_CLICK:return void this.useObject();default:return void super.mouseEvent(t,e)}}useObject(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new cn.a(cn.a.BADGE_DISPLAY_ENGRAVING,this.object))}updateBadge(t){""!==t&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new Xi(Xi.LOAD_BADGE,this.object,t,!1))}}class Tn extends In{constructor(){super(),this.onRoomToObjectOwnAvatarMoveEvent=this.onRoomToObjectOwnAvatarMoveEvent.bind(this)}initialize(t){super.initialize(t),this.eventDispatcher&&this.eventDispatcher.addEventListener(W.ROAME_MOVE_TO,this.onRoomToObjectOwnAvatarMoveEvent)}tearDown(){this.eventDispatcher&&this.eventDispatcher.removeEventListener(W.ROAME_MOVE_TO,this.onRoomToObjectOwnAvatarMoveEvent),super.tearDown()}onRoomToObjectOwnAvatarMoveEvent(t){if(!t||!this.object)return;const e=this.object.getLocation(),s=t.targetLocation;if(!s)return;let i=this.object.model.getValue(At.a.FURNITURE_SIZE_X),n=this.object.model.getValue(At.a.FURNITURE_SIZE_Y);const r=(Math.floor(this.object.getDirection().x)+45)%360/90;1!==r&&3!==r||([i,n]=[n,i]),this.object.setState(s.x>=e.x&&s.x<e.x+i&&s.y>=e.y&&s.y<e.y+n?1:0,0)}}class On extends In{getEventTypes(){const t=[rn.STATE_CHANGE];return this.mergeTypes(super.getEventTypes(),t)}mouseEvent(t,e){if(!t||!e||!this.object)return;let s=null;switch(t.type){case l.a.DOUBLE_CLICK:switch(t.spriteTag){case"start_stop":s=new rn(rn.STATE_CHANGE,this.object,1);break;case"reset":s=new rn(rn.STATE_CHANGE,this.object,2)}if(this.eventDispatcher&&s)return void this.eventDispatcher.dispatchEvent(s)}super.mouseEvent(t,e)}useObject(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new rn(rn.STATE_CHANGE,this.object,1))}}var yn=s("6j78");class Cn extends In{processUpdateMessage(t){super.processUpdateMessage(t),this.object&&1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&this.object.model.setValue(yn.a.INFOSTAND_EXTRA_PARAM,yn.a.CRACKABLE_FURNI)}}class An extends In{getEventTypes(){const t=[cn.a.CREDITFURNI];return this.mergeTypes(super.getEventTypes(),t)}initialize(t){super.initialize(t);let e=0;t.credits&&""!==t.credits&&t.credits.length>0&&(e=parseInt(t.credits)),this.object.model.setValue(At.a.FURNITURE_CREDIT_VALUE,e)}mouseEvent(t,e){if(t&&e&&this.object)switch(t.type){case l.a.DOUBLE_CLICK:return void this.useObject();default:super.mouseEvent(t,e)}}useObject(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new cn.a(cn.a.CREDITFURNI,this.object))}}var Mn=s("f6o4");class wn extends In{getEventTypes(){const t=[k.MOUSE_BUTTON,k.MOUSE_ARROW];return this.mergeTypes(super.getEventTypes(),t)}mouseEvent(t,e){if(t&&e&&this.object){switch(t.type){case l.a.ROLL_OVER:this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new k(k.MOUSE_BUTTON,this.object));break;case l.a.ROLL_OUT:this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new k(k.MOUSE_ARROW,this.object))}super.mouseEvent(t,e)}}}class Dn extends wn{initialize(t){super.initialize(t),this.object&&this.object.model&&this.object.model.setValue(At.a.FURNITURE_ALWAYS_STACKABLE,1)}get widget(){return Mn.a.CUSTOM_STACK_HEIGHT}}class Nn extends In{constructor(){super(),this._noTags=!1,this._noTagsLastStateActivate=!1}getEventTypes(){const t=[k.DICE_ACTIVATE,k.DICE_OFF];return this.mergeTypes(super.getEventTypes(),t)}mouseEvent(t,e){if(!t||!e||!this.object)return;let s=null;switch(t.type){case l.a.DOUBLE_CLICK:return this._noTags?this._noTagsLastStateActivate&&0!==this.object.getState(0)&&100!==this.object.getState(0)?(s=new k(k.DICE_OFF,this.object),this._noTagsLastStateActivate=!1):(s=new k(k.DICE_ACTIVATE,this.object),this._noTagsLastStateActivate=!0):"activate"===t.spriteTag||0===this.object.getState(0)||100===this.object.getState(0)?s=new k(k.DICE_ACTIVATE,this.object):"deactivate"===t.spriteTag&&(s=new k(k.DICE_OFF,this.object)),void(s&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(s))}super.mouseEvent(t,e)}}class Un extends In{constructor(){super(),this._showStateOnceRendered=!1,this._updateCount=0}getEventTypes(){const t=[cn.a.INERNAL_LINK];return this.mergeTypes(super.getEventTypes(),t)}initialize(t){super.initialize(t),t.action&&1===t.action.startState&&(this._showStateOnceRendered=!0)}update(t){super.update(t),this._showStateOnceRendered&&(this._updateCount++,this._showStateOnceRendered&&this._updateCount>20&&(this.setAutomaticStateIndex(1),this._showStateOnceRendered=!1))}setAutomaticStateIndex(t){this.object&&this.object.model&&this.object.model.setValue(At.a.FURNITURE_AUTOMATIC_STATE_INDEX,t)}mouseEvent(t,e){t&&e&&(t.type===l.a.DOUBLE_CLICK&&this.setAutomaticStateIndex(0),super.mouseEvent(t,e))}useObject(){this.eventDispatcher&&this.object&&this.eventDispatcher.dispatchEvent(new cn.a(cn.a.INERNAL_LINK,this.object))}}class xn extends In{getEventTypes(){const t=[cn.a.ROOM_LINK];return this.mergeTypes(super.getEventTypes(),t)}initialize(t){super.initialize(t),t.action&&t.action.link&&""!==t.action.link&&t.action.link.length>0&&this.object&&this.object.model&&this.object.model.setValue(At.a.FURNITURE_INTERNAL_LINK,t.action.link)}dispose(){super.dispose(),this._timer&&(clearTimeout(this._timer),this._timer=null)}setAutomaticStateIndex(t){this.object&&this.object.model&&this.object.model.setValue(At.a.FURNITURE_AUTOMATIC_STATE_INDEX,t)}useObject(){this.setAutomaticStateIndex(1),this._timer&&(clearTimeout(this._timer),this._timer=null),this._timer=setTimeout(()=>{this.setAutomaticStateIndex(0),this._timer=null},2500),this.eventDispatcher&&this.object&&this.eventDispatcher.dispatchEvent(new cn.a(cn.a.ROOM_LINK,this.object))}}class Ln extends wn{initialize(t){if(super.initialize(t),t&&this.object&&this.object.model){let e="";t.maskType&&""!==t.maskType&&t.maskType.length>0&&(e=t.maskType),this.object.model.setValue(At.a.FURNITURE_USES_PLANE_MASK,0),this.object.model.setValue(At.a.FURNITURE_PLANE_MASK_TYPE,e)}}mouseEvent(t,e){if(t&&e&&this.object){switch(t.type){case l.a.DOUBLE_CLICK:this.useObject()}super.mouseEvent(t,e)}}get widget(){return Mn.a.EXTERNAL_IMAGE}}class Pn extends In{}let Fn=(()=>{class t extends wn{constructor(){super(),this._currentState=-1,this._currentLocation=null}getEventTypes(){const t=[$i.ADD_HOLE,$i.REMOVE_HOLE];return this.mergeTypes(super.getEventTypes(),t)}dispose(){this._currentState===t._Str_9306&&this.eventDispatcher.dispatchEvent(new $i($i.REMOVE_HOLE,this.object)),super.dispose()}update(t){super.update(t),this._Str_25016()}processUpdateMessage(e){if(super.processUpdateMessage(e),!this.object)return;e instanceof dt&&this._Str_21445(this.object.getState(0));const s=this.object.getLocation();this._currentLocation?s.x===this._currentLocation.x&&s.y===this._currentLocation.y||this._currentState===t._Str_9306&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new $i($i.ADD_HOLE,this.object)):this._currentLocation=new m.a,this._currentLocation.assign(s)}_Str_21445(e){e!==this._currentState&&(this.eventDispatcher&&(e===t._Str_9306?this.eventDispatcher.dispatchEvent(new $i($i.ADD_HOLE,this.object)):this._currentState===t._Str_9306&&this.eventDispatcher.dispatchEvent(new $i($i.REMOVE_HOLE,this.object))),this._currentState=e)}_Str_25016(){if(!this.object)return;const t=this.object.model;if(!t)return;const e=t.getValue(At.a.FURNITURE_AUTOMATIC_STATE_INDEX);isNaN(e)||this._Str_21445(e%2)}}return t._Str_9306=0,t})(),kn=(()=>{class t extends wn{constructor(){super(...arguments),this._state=-1}get engravingDialogType(){return 0}initialize(t){super.initialize(t),this.object&&this.object.model.setValue(At.a.FURNITURE_FRIENDFURNI_ENGRAVING,this.engravingDialogType)}processUpdateMessage(t){if(t instanceof dt){const e=t.data;this._state=e?e.state:t.state}super.processUpdateMessage(t)}getEventTypes(){const t=[cn.a.FRIEND_FURNITURE_ENGRAVING];return this.mergeTypes(super.getEventTypes(),t)}useObject(){this._state==t.STATE_LOCKED?this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new cn.a(cn.a.FRIEND_FURNITURE_ENGRAVING,this.object)):super.useObject()}}return t.STATE_UNINITIALIZED=-1,t.STATE_UNLOCKED=0,t.STATE_LOCKED=1,t})(),Vn=(()=>{class t extends wn{processUpdateMessage(e){if(super.processUpdateMessage(e),e instanceof dt){const s=e.data;s instanceof bn.a&&(this.updateGroupId(s.getValue(t.GROUPID_KEY)),this.updateBadge(s.getValue(t.BADGE_KEY)),this.updateColors(s.getValue(t.COLOR1_KEY),s.getValue(t.COLOR2_KEY)))}}updateGroupId(t){this.object.model.setValue(At.a.FURNITURE_GUILD_CUSTOMIZED_GUILD_ID,parseInt(t))}updateBadge(t){this.object.model.setValue(At.a.FURNITURE_GUILD_CUSTOMIZED_BADGE,t)}updateColors(t,e){this.object.model.setValue(At.a.FURNITURE_GUILD_CUSTOMIZED_COLOR_1,parseInt(t,16)),this.object.model.setValue(At.a.FURNITURE_GUILD_CUSTOMIZED_COLOR_2,parseInt(e,16))}}return t.GROUPID_KEY=1,t.BADGE_KEY=2,t.COLOR1_KEY=3,t.COLOR2_KEY=4,t})(),Bn=(()=>{class t extends In{constructor(){super(...arguments),this._state=-1}getEventTypes(){return[cn.a.HIGH_SCORE_DISPLAY,cn.a.HIDE_HIGH_SCORE_DISPLAY]}tearDown(){1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&this.eventDispatcher.dispatchEvent(new cn.a(cn.a.HIDE_HIGH_SCORE_DISPLAY,this.object)),super.tearDown()}processUpdateMessage(e){super.processUpdateMessage(e),1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&e instanceof dt&&(this.eventDispatcher.dispatchEvent(new cn.a(e.state===t.SHOW_WIDGET_IN_STATE?cn.a.HIGH_SCORE_DISPLAY:cn.a.HIDE_HIGH_SCORE_DISPLAY,this.object)),this._state=e.state)}mouseEvent(t,e){if(t&&e&&this.object)switch(t.type){case l.a.DOUBLE_CLICK:return void this.useObject();default:super.mouseEvent(t,e)}}}return t.SHOW_WIDGET_IN_STATE=1,t})();class Wn extends In{getEventTypes(){const t=[rn.STATE_CHANGE];return this.mergeTypes(super.getEventTypes(),t)}mouseEvent(t,e){if(!t||!e||!this.object)return;let s=null;switch(t.type){case l.a.DOUBLE_CLICK:switch(t.spriteTag){case"off":s=new rn(rn.STATE_CHANGE,this.object,3)}break;case l.a.MOUSE_CLICK:switch(t.spriteTag){case"inc":s=new rn(rn.STATE_CHANGE,this.object,2);break;case"dec":s=new rn(rn.STATE_CHANGE,this.object,1)}}this.eventDispatcher&&s?this.eventDispatcher.dispatchEvent(s):super.mouseEvent(t,e)}useObject(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new rn(rn.STATE_CHANGE,this.object,3))}}class Kn extends wn{constructor(){super(),this._nextState=0,this._nextStateTimestamp=0}update(t){if(this._nextStateTimestamp>0&&t>=this._nextStateTimestamp){this._nextStateTimestamp=0;const t=new Ot.a;t.setString(this._nextState.toString()),super.processUpdateMessage(new dt(this._nextState,t))}super.update(t)}processUpdateMessage(t){if(t instanceof dt)return this.processUpdate(t);super.processUpdateMessage(t)}processUpdate(t){if(!t)return;const e=t.state/1e3,s=t.state%1e3;if(s)this._nextState=e,this._nextStateTimestamp=this.time+s;else{this._nextStateTimestamp=0;const t=new Ot.a;t.setString(e.toString()),super.processUpdateMessage(new dt(e,t))}}}var Gn=s("tWLA");let Hn=(()=>{class t extends In{getEventTypes(){const t=[cn.a.MANNEQUIN];return this.mergeTypes(super.getEventTypes(),t)}processUpdateMessage(t){super.processUpdateMessage(t),t instanceof dt&&(t.data.writeRoomObjectModel(this.object.model),this.processObjectData())}processObjectData(){if(!this.object||!this.object.model)return;const e=new Gn.a;e.initializeFromRoomObjectModel(this.object.model),this.object.model.setValue(At.a.FURNITURE_MANNEQUIN_GENDER,e.getValue(t.GENDER)),this.object.model.setValue(At.a.FURNITURE_MANNEQUIN_FIGURE,e.getValue(t.FIGURE)),this.object.model.setValue(At.a.FURNITURE_MANNEQUIN_NAME,e.getValue(t.OUTFIT_NAME))}mouseEvent(t,e){if(t&&e&&this.object){switch(t.type){case l.a.DOUBLE_CLICK:return void this.useObject()}super.mouseEvent(t,e)}}useObject(){this.eventDispatcher&&this.object&&this.eventDispatcher.dispatchEvent(new cn.a(cn.a.MANNEQUIN,this.object))}}return t.GENDER="GENDER",t.FIGURE="FIGURE",t.OUTFIT_NAME="OUTFIT_NAME",t})();class jn extends wn{initialize(t){super.initialize(t),this.object&&this.object.model&&this.object.model.setValue(At.a.FURNITURE_IS_VARIABLE_HEIGHT,1)}}class zn extends In{getEventTypes(){const t=[k.ENTER_ONEWAYDOOR];return this.mergeTypes(super.getEventTypes(),t)}mouseEvent(t,e){if(t&&e&&this.object){switch(t.type){case l.a.DOUBLE_CLICK:return void this.useObject()}super.mouseEvent(t,e)}}useObject(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new k(k.ENTER_ONEWAYDOOR,this.object))}}class Yn extends In{}let qn=(()=>{class t extends In{getEventTypes(){const t=[cn.a.PRESENT];return this.mergeTypes(super.getEventTypes(),t)}initialize(t){super.initialize(t)}processUpdateMessage(t){super.processUpdateMessage(t),t instanceof dt&&(t.data.writeRoomObjectModel(this.object.model),this.updateStuffData()),t instanceof ft&&t.numberKey===At.a.FURNITURE_DISABLE_PICKING_ANIMATION&&this.object.model.setValue(At.a.FURNITURE_DISABLE_PICKING_ANIMATION,t.numberValue)}updateStuffData(){if(!this.object||!this.object.model)return;const e=new Gn.a;e.initializeFromRoomObjectModel(this.object.model);const s=e.getValue(t.MESSAGE),i=this.object.model.getValue(At.a.FURNITURE_DATA);this.object.model.setValue(At.a.FURNITURE_DATA,s||"string"!=typeof i?e.getValue(t.MESSAGE):i.substr(1)),this.writeToModel(At.a.FURNITURE_TYPE_ID,e.getValue(t.PRODUCT_CODE)),this.writeToModel(At.a.FURNITURE_PURCHASER_NAME,e.getValue(t.PURCHASER_NAME)),this.writeToModel(At.a.FURNITURE_PURCHASER_FIGURE,e.getValue(t.PURCHASER_FIGURE))}writeToModel(t,e){e&&this.object.model.setValue(t,e)}mouseEvent(t,e){if(t&&e&&this.object)switch(t.type){case l.a.ROLL_OVER:this.eventDispatcher.dispatchEvent(new k(k.MOUSE_BUTTON,this.object));break;case l.a.ROLL_OUT:this.eventDispatcher.dispatchEvent(new k(k.MOUSE_ARROW,this.object));break;case l.a.DOUBLE_CLICK:return void this.useObject();default:super.mouseEvent(t,e)}}useObject(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new cn.a(cn.a.PRESENT,this.object))}}return t.MESSAGE="MESSAGE",t.PRODUCT_CODE="PRODUCT_CODE",t.EXTRA_PARAM="EXTRA_PARAM",t.PURCHASER_NAME="PURCHASER_NAME",t.PURCHASER_FIGURE="PURCHASER_FIGURE",t})();class Zn extends wn{getEventTypes(){const t=[cn.a.PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG];return this.mergeTypes(super.getEventTypes(),t)}useObject(){this.eventDispatcher.dispatchEvent(new cn.a(cn.a.PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,this.object))}}class Xn extends wn{}var Qn=s("uUF/");class Jn extends wn{constructor(){super(),this._roomColorUpdated=!1}getEventTypes(){const t=[cn.a.BACKGROUND_COLOR,en.ROOM_BACKGROUND_COLOR];return this.mergeTypes(super.getEventTypes(),t)}dispose(){this._roomColorUpdated&&(this.eventDispatcher&&this.object&&1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&this.eventDispatcher.dispatchEvent(new en(en.ROOM_BACKGROUND_COLOR,this.object,!1,0,0,0)),this._roomColorUpdated=!1),super.dispose()}processUpdateMessage(t){super.processUpdateMessage(t),t instanceof dt&&(t.data.writeRoomObjectModel(this.object.model),1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&this.processColorUpdate())}processColorUpdate(){if(!this.object||!this.object.model)return;const t=new Qn.a;t.initializeFromRoomObjectModel(this.object.model);const e=t.getValue(0),s=t.getValue(1),i=t.getValue(2),n=t.getValue(3);e>-1&&s>-1&&i>-1&&n>-1&&(this.object.model.setValue(At.a.FURNITURE_ROOM_BACKGROUND_COLOR_HUE,s),this.object.model.setValue(At.a.FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION,i),this.object.model.setValue(At.a.FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS,n),this.object.setState(e,0),this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new en(en.ROOM_BACKGROUND_COLOR,this.object,1===e,s,i,n)),this._roomColorUpdated=!0)}mouseEvent(t,e){if(t&&e&&this.object)switch(t.type){case l.a.DOUBLE_CLICK:return void(this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new cn.a(cn.a.BACKGROUND_COLOR,this.object)));default:super.mouseEvent(t,e)}}}let $n=(()=>{class t extends c.a{constructor(t){super(null,null),this._type=t}get type(){return this._type}}return t.IMAGE_LOADED="ROAUM_IMAGE_LOADED",t.IMAGE_LOADING_FAILED="ROAUM_IMAGE_FAILED",t})(),tr=(()=>{class t extends In{constructor(){super(),this._hasClickUrl=!1}processUpdateMessage(t){super.processUpdateMessage(t),t instanceof dt&&this.processAdDataUpdateMessage(t),t instanceof $n&&this.processAdUpdate(t)}processAdDataUpdateMessage(e){if(!e)return;const s=new Gn.a;s.initializeFromRoomObjectModel(this.object.model);const i=parseInt(s.getValue(t.STATE));isNaN(i)||this.object.getState(0)===i||this.object.setState(i,0);const n=s.getValue(t.IMAGEURL_KEY),r=this.object.model.getValue(At.a.FURNITURE_BRANDING_IMAGE_URL);r&&r===n||(this.object.model.setValue(At.a.FURNITURE_BRANDING_IMAGE_URL,n),this.object.model.setValue(At.a.FURNITURE_BRANDING_IMAGE_STATUS,0),this.downloadBackground());const a=s.getValue(t.CLICKURL_KEY);if(a){const t=this.object.model.getValue(At.a.FURNITURE_BRANDING_URL);t&&t===a||this.object.model&&this.object.model.setValue(At.a.FURNITURE_BRANDING_URL,a)}const o=parseInt(s.getValue(t.OFFSETX_KEY)),c=parseInt(s.getValue(t.OFFSETY_KEY)),h=parseInt(s.getValue(t.OFFSETZ_KEY));isNaN(o)||this.object.model.setValue(At.a.FURNITURE_BRANDING_OFFSET_X,o),isNaN(c)||this.object.model.setValue(At.a.FURNITURE_BRANDING_OFFSET_Y,c),isNaN(h)||this.object.model.setValue(At.a.FURNITURE_BRANDING_OFFSET_Z,h);let l=t.IMAGEURL_KEY+"="+(null!==n?n:"")+"\t";this._hasClickUrl&&(l=l+(t.CLICKURL_KEY+"=")+(null!==a?a:"")+"\t"),l=l+(t.OFFSETX_KEY+"=")+o+"\t",l=l+(t.OFFSETY_KEY+"=")+c+"\t",l=l+(t.OFFSETZ_KEY+"=")+h+"\t",this.object.model.setValue(yn.a.INFOSTAND_EXTRA_PARAM,yn.a.BRANDING_OPTIONS+l)}processAdUpdate(t){if(t&&this.object)switch(t.type){case $n.IMAGE_LOADED:this.object.model.setValue(At.a.FURNITURE_BRANDING_IMAGE_STATUS,1);break;case $n.IMAGE_LOADING_FAILED:this.object.model.setValue(At.a.FURNITURE_BRANDING_IMAGE_STATUS,-1)}}downloadBackground(){const t=this.object&&this.object.model;if(!t)return;const e=t.getValue(At.a.FURNITURE_BRANDING_IMAGE_URL),s=t.getValue(At.a.FURNITURE_BRANDING_IMAGE_STATUS);if(!e||""===e||1===s)return;const i=h.a.instance.core&&h.a.instance.core.asset;i&&(i.getTexture(e)?this.processUpdateMessage(new $n($n.IMAGE_LOADED)):i.downloadAsset(e,t=>{this.processUpdateMessage(new $n(t?$n.IMAGE_LOADED:$n.IMAGE_LOADING_FAILED))}))}}return t.STATE="state",t.IMAGEURL_KEY="imageUrl",t.CLICKURL_KEY="clickUrl",t.OFFSETX_KEY="offsetX",t.OFFSETY_KEY="offsetY",t.OFFSETZ_KEY="offsetZ",t})();class er extends tr{getAdClickUrl(t){return null}}class sr extends tr{constructor(){super(),this._hasClickUrl=!0}getAdClickUrl(t){return t.getValue(At.a.FURNITURE_BRANDING_URL)}}class ir extends In{constructor(){super(),this._roomColorUpdated=!1}getEventTypes(){const t=[cn.a.DIMMER,cn.a.WIDGET_REMOVE_DIMMER,Ji.DIMMER_STATE];return this.mergeTypes(super.getEventTypes(),t)}dispose(){this._roomColorUpdated&&this.eventDispatcher&&this.object&&(1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&(this.eventDispatcher.dispatchEvent(new Ji(this.object,0,1,1,16777215,255)),this.eventDispatcher.dispatchEvent(new cn.a(cn.a.WIDGET_REMOVE_DIMMER,this.object))),this._roomColorUpdated=!1),super.dispose()}processUpdateMessage(t){if(t instanceof dt){if(t.data){const e=t.data.getLegacyString();1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&this.processDimmerData(e),super.processUpdateMessage(new dt(this.getStateFromDimmerData(e),t.data))}}else super.processUpdateMessage(t)}getStateFromDimmerData(t){if(!t)return 0;const e=t.split(",");return e.length>=5?parseInt(e[0])-1:0}processDimmerData(t){if(!t)return;const e=t.split(",");if(e.length>=5){const s=this.getStateFromDimmerData(t),i=parseInt(e[1]),n=parseInt(e[2]);let r=parseInt(e[3].substr(1),16),a=parseInt(e[4]);s||(r=16777215,a=255),this.eventDispatcher&&this.object&&(this.eventDispatcher.dispatchEvent(new Ji(this.object,s,i,n,r,a)),this._roomColorUpdated=!0)}}useObject(){this.eventDispatcher.dispatchEvent(new cn.a(cn.a.DIMMER,this.object))}update(t){if(super.update(t),this.object&&this.object.model&&1===this.object.model.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)){const t=this.object.model.getValue(At.a.FURNITURE_DATA);t&&t.length>0&&(this.object.model.setValue(At.a.FURNITURE_DATA,""),this.processDimmerData(t))}}}let nr=(()=>{class t extends In{constructor(){super(),this._score=0,this._scoreIncreaser=50,this._scoreTimer=0}processUpdateMessage(t){if(t instanceof dt)return this.updateScore(t.state);super.processUpdateMessage(t)}updateScore(e){this._score=e;const s=this.object.getState(0);if(this._score!==s){let e=this._score-s;e<0&&(e=-e),this._scoreIncreaser=e*t._Str_3536>t._Str_5967?t._Str_5967/e:t._Str_3536,this._scoreTimer=h.a.instance.time}}update(t){super.update(t);const e=this.object.getState(0);if(e!==this._score&&t>=this._scoreTimer+this._scoreIncreaser){const s=t-this._scoreTimer;let i=s/this._scoreIncreaser,n=1;this._score<e&&(n=-1),i>n*(this._score-e)&&(i=n*(this._score-e)),this.object.setState(e+n*i,0),this._scoreTimer=t-(s-i*this._scoreIncreaser)}}}return t._Str_3536=50,t._Str_5967=3e3,t})(),rr=(()=>{class t extends wn{constructor(){super(),this._state=-1,this._sampleId=-1,this._noPitch=!1,this._lastLocZ=0}getEventTypes(){const t=[nn.ROOM_OBJECT_INITIALIZED,nn.ROOM_OBJECT_DISPOSED,nn.PLAY_SAMPLE,nn.CHANGE_PITCH];return this.mergeTypes(super.getEventTypes(),t)}initialize(t){super.initialize(t),t.soundSample&&(this._sampleId=t.soundSample,this.updateModel())}dispose(){super.dispose(),this._state!==t.STATE_UNINITIALIZED&&this.eventDispatcher.dispatchEvent(new nn(nn.ROOM_OBJECT_DISPOSED,this.object,this._sampleId))}processUpdateMessage(t){super.processUpdateMessage(t),t instanceof dt&&this.updateSoundBlockMessage(t)}updateSoundBlockMessage(e){if(!e)return;const s=this.object&&this.object.model,i=this.object&&this.object.location;s&&i&&(this._state===t.STATE_UNINITIALIZED&&1===s.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&(this._lastLocZ=i.z,this.eventDispatcher.dispatchEvent(new nn(nn.ROOM_OBJECT_INITIALIZED,this.object,this._sampleId,this._Str_17428(i.z)))),this._state!==t.STATE_UNINITIALIZED&&1===s.getValue(At.a.FURNITURE_REAL_ROOM_OBJECT)&&this._lastLocZ!==i.z&&(this._lastLocZ=i.z,this.eventDispatcher.dispatchEvent(new nn(nn.CHANGE_PITCH,this.object,this._sampleId,this._Str_17428(i.z)))),this._state!==t.STATE_UNINITIALIZED&&e.state!==this._state&&this._Str_18183(i.z),this._state=e.state)}updateModel(){const t=this.object&&this.object.model;if(!t)return!1;t.setValue(At.a.FURNITURE_SOUNDBLOCK_RELATIVE_ANIMATION_SPEED,1)}_Str_18183(t){const e=this.object&&this.object.model;if(!e)return;const s=this._Str_17428(t);e.setValue(At.a.FURNITURE_SOUNDBLOCK_RELATIVE_ANIMATION_SPEED,s),this.eventDispatcher.dispatchEvent(new nn(nn.PLAY_SAMPLE,this.object,this._sampleId,s))}_Str_17428(e){let s=2*e;return s>t.HIGHEST_SEMITONE&&(s=Math.min(0,t.LOWEST_SEMITONE+(s-t.HIGHEST_SEMITONE-1))),this._noPitch?1:Math.pow(2,s/12)}}return t.HIGHEST_SEMITONE=12,t.LOWEST_SEMITONE=-12,t.STATE_UNINITIALIZED=-1,t})(),ar=(()=>{class t extends In{getEventTypes(){const t=[cn.a.STICKIE,k.STICKIE];return this.mergeTypes(super.getEventTypes(),t)}initialize(t){super.initialize(t),this.updateColor(),this.object&&this.object.model.setValue(At.a.FURNITURE_IS_STICKIE,"")}processUpdateMessage(t){super.processUpdateMessage(t),t instanceof pt&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new cn.a(cn.a.STICKIE,this.object)),this.updateColor()}updateColor(){if(!this.object)return;const e=this.object.model.getValue(At.a.FURNITURE_DATA);let s=t.STICKIE_COLORS.indexOf(e);s<0&&(s=3),this.object.model.setValue(At.a.FURNITURE_COLOR,s+1)}mouseEvent(t,e){if(t&&e&&this.object)switch(t.type){case l.a.DOUBLE_CLICK:return void this.useObject();default:super.mouseEvent(t,e)}}useObject(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new k(k.STICKIE,this.object))}}return t.STICKIE_COLORS=["9CCEFF","FF9CFF","9CFF9C","FFFF33"],t})();class or extends In{getEventTypes(){const t=[cn.a.TROPHY];return this.mergeTypes(super.getEventTypes(),t)}mouseEvent(t,e){if(t&&e&&this.object){switch(t.type){case l.a.DOUBLE_CLICK:return void this.useObject()}super.mouseEvent(t,e)}}useObject(){this.eventDispatcher&&this.object&&this.eventDispatcher.dispatchEvent(new cn.a(cn.a.TROPHY,this.object))}}let cr=(()=>{class t extends wn{constructor(){super(),this._total=0,this._lastUpdate=0,this._interval=33}processUpdateMessage(t){if(super.processUpdateMessage(t),t instanceof dt){const e=t.data;if(!e)return;this._Str_24990(e.result)}}_Str_24990(e){if(this._total=e,!this._lastUpdate)return this.object.model.setValue(At.a.FURNITURE_VOTE_COUNTER_COUNT,e),void(this._lastUpdate=h.a.instance.time);if(this._total!==this._Str_8221){const e=Math.abs(this._total-this._Str_8221);this._interval=e*t._Str_3536>t._Str_5967?t._Str_5967/e:t._Str_3536,this._lastUpdate=h.a.instance.time}}update(t){if(super.update(t),this.object&&this._Str_8221!==this._total&&t>=this._lastUpdate+this._interval){const e=t-this._lastUpdate;let s=e/this._interval,i=1;this._total<this._Str_8221&&(i=-1),s>i*(this._total-this._Str_8221)&&(s=i*(this._total-this._Str_8221)),this.object.model.setValue(At.a.FURNITURE_VOTE_COUNTER_COUNT,this._Str_8221+i*s),this._lastUpdate=t-(e-s*this._interval)}}get _Str_8221(){return this.object.model.getValue(At.a.FURNITURE_VOTE_COUNTER_COUNT)}}return t._Str_3536=33,t._Str_5967=1e3,t})();var hr=s("VZrs");class lr extends wn{processUpdateMessage(t){if(super.processUpdateMessage(t),this.object&&t instanceof dt){const e=t.data;e instanceof hr.a&&this.object.model.setValue(At.a.FURNITURE_VOTE_MAJORITY_RESULT,e.result)}}}class ur extends wn{initialize(t){super.initialize(t);let e="";t.maskType&&""!==t.maskType&&t.maskType.length>0&&(e=t.maskType),this.object.model.setValue(At.a.FURNITURE_USES_PLANE_MASK,0),this.object.model.setValue(At.a.FURNITURE_PLANE_MASK_TYPE,e)}}class _r extends In{getEventTypes(){const t=[Qi.RODRE_URL_PREFIX];return this.mergeTypes(super.getEventTypes(),t)}update(t){super.update(t),this.object.model.getValue(At.a.SESSION_URL_PREFIX)||this.eventDispatcher.dispatchEvent(new Qi(Qi.RODRE_URL_PREFIX,this.object))}get widget(){return Mn.a.YOUTUBE}}class dr extends Sn{constructor(){super(),this._selected=!1,this._reportedLocation=null,this._postureIndex=0,this._gestureIndex=0,this._headDirectionDelta=0,this._directions=[],this._talkingEndTimestamp=0,this._gestureEndTimestamp=0,this._expressionEndTimestamp=0}getEventTypes(){const t=[o.CLICK,sn.POSITION_CHANGED];return this.mergeTypes(super.getEventTypes(),t)}initialize(t){if(!t)return;const e=this.object&&this.object.model;if(!e)return;const s=t.directions;if(s&&s.length){for(const t of s)this._directions.push(t);this._directions.sort((t,e)=>t-e)}e.setValue(At.a.PET_ALLOWED_DIRECTIONS,this._directions)}dispose(){this._selected&&this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new sn(sn.OBJECT_REMOVED,this.object)),this._directions=null,this._reportedLocation=null}update(t){if(super.update(t),this._selected&&this.object&&this.eventDispatcher){const t=this.object.getLocation();this._reportedLocation&&this._reportedLocation.x===t.x&&this._reportedLocation.y===t.y&&this._reportedLocation.z===t.z||(this._reportedLocation||(this._reportedLocation=new m.a),this._reportedLocation.assign(t),this.eventDispatcher.dispatchEvent(new sn(sn.POSITION_CHANGED,this.object)))}this.object&&this.object.model&&this.updateModel(t,this.object.model)}updateModel(t,e){this._gestureEndTimestamp>0&&t>this._gestureEndTimestamp&&(e.setValue(At.a.FIGURE_GESTURE,null),this._gestureEndTimestamp=0),this._talkingEndTimestamp>0&&t>this._talkingEndTimestamp&&(e.setValue(At.a.FIGURE_TALK,0),this._talkingEndTimestamp=0),this._expressionEndTimestamp>0&&t>this._expressionEndTimestamp&&(e.setValue(At.a.FIGURE_EXPRESSION,0),this._expressionEndTimestamp=0)}processUpdateMessage(t){if(!t||!this.object)return;super.processUpdateMessage(t);const e=this.object&&this.object.model;if(e)if(t instanceof ut)e.setValue(At.a.HEAD_DIRECTION,t.headDirection);else{if(t instanceof Q){const s=new A.a(t.figure);return e.setValue(At.a.FIGURE,t.figure),e.setValue(At.a.RACE,t.subType),e.setValue(At.a.PET_PALETTE_INDEX,s.paletteId),e.setValue(At.a.PET_COLOR,s.color),e.setValue(At.a.PET_TYPE,s.typeId),e.setValue(At.a.PET_CUSTOM_LAYER_IDS,s.customLayerIds),e.setValue(At.a.PET_CUSTOM_PARTS_IDS,s.customPartIds),e.setValue(At.a.PET_CUSTOM_PALETTE_IDS,s.customPaletteIds),void e.setValue(At.a.PET_IS_RIDING,t.isRiding?1:0)}if(t instanceof at)e.setValue(At.a.FIGURE_POSTURE,t.postureType);else{if(t instanceof z)return e.setValue(At.a.FIGURE_TALK,1),void(this._talkingEndTimestamp=this.time+1e3*t.numberOfWords);if(!(t instanceof ct))return t instanceof it?(e.setValue(At.a.FIGURE_GESTURE,t.gesture),void(this._gestureEndTimestamp=this.time+3e3)):t instanceof hn?(this._selected=t.selected,void(this._reportedLocation=null)):void 0;e.setValue(At.a.FIGURE_SLEEP,t.isSleeping?1:0)}}}mouseEvent(t,e){let s=null;switch(t.type){case l.a.MOUSE_CLICK:s=o.CLICK;break;case l.a.DOUBLE_CLICK:break;case l.a.MOUSE_DOWN:this.object.model.getValue(At.a.PET_TYPE)==Ds.a.MONSTERPLANT&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new o(o.MOUSE_DOWN,this.object,t._Str_3463,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown))}s&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new o(s,this.object,t._Str_3463,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown))}}var gr=s("z3Rz"),mr=s("AUxQ"),pr=s("QzjD");class fr extends En{constructor(){super(),this._planeParser=new Xe.a,this._planeBitmapMaskParser=new qe,this._color=16777215,this._Str_3576=255,this._Str_14932=16777215,this._Str_17003=255,this._Str_11287=16777215,this._Str_16460=255,this._Str_9785=0,this._Str_17191=1500,this._lastHoleUpdate=0,this._needsMapUpdate=!1}getEventTypes(){const t=[o.MOUSE_MOVE,o.CLICK];return this.mergeTypes(super.getEventTypes(),t)}dispose(){super.dispose(),this._planeParser&&(this._planeParser.dispose(),this._planeParser=null),this._planeBitmapMaskParser&&(this._planeBitmapMaskParser.dispose(),this._planeBitmapMaskParser=null)}initialize(t){t&&this.object&&t instanceof pr.a&&this._planeParser.initializeFromMapData(t)&&(this.object.model.setValue(At.a.ROOM_MAP_DATA,t),this.object.model.setValue(At.a.ROOM_BACKGROUND_COLOR,16777215),this.object.model.setValue(At.a.ROOM_FLOOR_VISIBILITY,1),this.object.model.setValue(At.a.ROOM_WALL_VISIBILITY,1),this.object.model.setValue(At.a.ROOM_LANDSCAPE_VISIBILITY,1))}update(t){if(super.update(t),this._Str_24703(t),this._needsMapUpdate){if(this._lastHoleUpdate&&t-this._lastHoleUpdate<5)return;const e=this.object&&this.object.model;if(e){const s=this._planeParser.getMapData();e.setValue(At.a.ROOM_MAP_DATA,s),e.setValue(At.a.ROOM_FLOOR_HOLE_UPDATE_TIME,t),this._planeParser.initializeFromMapData(s)}this._lastHoleUpdate=0,this._needsMapUpdate=!1}}_Str_24703(t){if(!this.object||!this._Str_9785)return;let e=this._color,s=this._Str_3576;if(t-this._Str_9785>=this._Str_17191)e=this._Str_11287,s=this._Str_16460,this._Str_9785=0;else{let i=this._Str_14932>>16&255,n=this._Str_14932>>8&255,r=255&this._Str_14932;const a=(t-this._Str_9785)/this._Str_17191;i+=((this._Str_11287>>16&255)-i)*a,n+=((this._Str_11287>>8&255)-n)*a,r+=((255&this._Str_11287)-r)*a,e=(i<<16)+(n<<8)+r,s=this._Str_17003+(this._Str_16460-this._Str_17003)*a,this._color=e,this._Str_3576=s}let i=gr.a._Str_22130(e);i=(16776960&i)+s,e=gr.a._Str_13949(i),this.object.model&&this.object.model.setValue(At.a.ROOM_BACKGROUND_COLOR,e)}processUpdateMessage(t){if(!t||!this.object)return;const e=this.object.model;e&&(t instanceof Rt?this.onObjectRoomUpdateMessage(t,e):t instanceof vt?this.onObjectRoomMaskUpdateMessage(t,e):t instanceof It?this.onObjectRoomPlaneVisibilityUpdateMessage(t,e):t instanceof bt?this.onObjectRoomPlanePropertyUpdateMessage(t,e):t instanceof St?this.onObjectRoomFloorHoleUpdateMessage(t,e):t instanceof Et?this.onObjectRoomColorUpdateMessage(t,e):t instanceof mr.a&&this.onObjectRoomMapUpdateMessage(t))}onObjectRoomUpdateMessage(t,e){switch(t.type){case Rt.ROOM_FLOOR_UPDATE:return void e.setValue(At.a.ROOM_FLOOR_TYPE,t.value);case Rt.ROOM_WALL_UPDATE:return void e.setValue(At.a.ROOM_WALL_TYPE,t.value);case Rt.ROOM_LANDSCAPE_UPDATE:return void e.setValue(At.a.ROOM_LANDSCAPE_TYPE,t.value)}}onObjectRoomMaskUpdateMessage(t,e){let s=null,i=!1;switch(t.type){case vt.ADD_MASK:s=ze.WINDOW,t.maskCategory===vt.HOLE&&(s=ze.HOLE),this._planeBitmapMaskParser.addMask(t.maskId,t.maskType,t.maskLocation,s),i=!0;break;case vt._Str_10260:i=this._planeBitmapMaskParser._Str_23574(t.maskId)}i&&e.setValue(At.a.ROOM_PLANE_MASK_XML,this._planeBitmapMaskParser._Str_5598())}onObjectRoomPlaneVisibilityUpdateMessage(t,e){let s=0;switch(t.visible&&(s=1),t.type){case It.FLOOR_VISIBILITY:return void e.setValue(At.a.ROOM_FLOOR_VISIBILITY,s);case It.WALL_VISIBILITY:return e.setValue(At.a.ROOM_WALL_VISIBILITY,s),void e.setValue(At.a.ROOM_LANDSCAPE_VISIBILITY,s)}}onObjectRoomPlanePropertyUpdateMessage(t,e){switch(t.type){case bt.FLOOR_THICKNESS:return void e.setValue(At.a.ROOM_FLOOR_THICKNESS,t.value);case bt.WALL_THICKNESS:return void e.setValue(At.a.ROOM_WALL_THICKNESS,t.value)}}onObjectRoomFloorHoleUpdateMessage(t,e){switch(t.type){case St.ADD:return this._planeParser.addFloorHole(t.id,t.x,t.y,t.width,t.height),void(this._needsMapUpdate=!0);case St.REMOVE:return this._planeParser.removeFloorHole(t.id),void(this._needsMapUpdate=!0)}this._lastHoleUpdate=this.time}onObjectRoomColorUpdateMessage(t,e){t&&e&&(this._Str_14932=this._color,this._Str_17003=this._Str_3576,this._Str_11287=t.color,this._Str_16460=t.light,this._Str_9785=this.time,this._Str_17191=1500,e.setValue(At.a.ROOM_COLORIZE_BG_ONLY,t.backgroundOnly))}onObjectRoomMapUpdateMessage(t){t&&t.mapData&&(this._planeParser.initializeFromMapData(t.mapData),this._needsMapUpdate=!0)}mouseEvent(t,e){if(!(t&&e&&this.object&&this.object.model))return;const s=t.spriteTag;let n=0;if(s&&s.indexOf("@")>=0&&(n=parseInt(s.substr(s.indexOf("@")+1))),n<1||n>this._planeParser.planeCount)return void(t.type===l.a.ROLL_OUT&&this.object.model.setValue(At.a.ROOM_SELECTED_PLANE,0));n--;let r=null;const a=this._planeParser.getPlaneLocation(n),c=this._planeParser.getPlaneLeftSide(n),h=this._planeParser.getPlaneRightSide(n),u=this._planeParser.getPlaneNormalDirection(n),_=this._planeParser.getPlaneType(n);if(null==a||null==c||null==h||null==u)return;const d=c.length,g=h.length;if(0==d||0==g)return;const p=new i.Point(t.screenX,t.screenY);if(r=e.getPlanePosition(p,a,c,h),!r)return void this.object.model.setValue(At.a.ROOM_SELECTED_PLANE,0);const f=m.a.product(c,r.x/d);f.add(m.a.product(h,r.y/g)),f.add(a);const E=f.x,S=f.y,v=f.z;if(!(r.x>=0&&r.x<d&&r.y>=0&&r.y<g))return void this.object.model.setValue(At.a.ROOM_SELECTED_PLANE,0);this.object.model.setValue(At.a.ROOM_SELECTED_X,E),this.object.model.setValue(At.a.ROOM_SELECTED_Y,S),this.object.model.setValue(At.a.ROOM_SELECTED_Z,v),this.object.model.setValue(At.a.ROOM_SELECTED_PLANE,n+1);let b=null;switch(t.type===l.a.MOUSE_MOVE||t.type===l.a.ROLL_OVER?b=o.MOUSE_MOVE:t.type===l.a.MOUSE_CLICK&&(b=o.CLICK),t.type){case l.a.MOUSE_MOVE:case l.a.ROLL_OVER:case l.a.MOUSE_CLICK:{let e=null;if(_===Ze.a.PLANE_FLOOR)e=new an(b,this.object,t._Str_3463,E,S,v,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown);else if(_===Ze.a.PLANE_WALL||_===Ze.a.PLANE_LANDSCAPE){let s=90;u&&(s=u.x+90,s>360&&(s-=360)),e=new on(b,this.object,t._Str_3463,a,c,h,c.length*r.x/d,h.length*r.y/g,s,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown)}return void(this.eventDispatcher&&this.eventDispatcher.dispatchEvent(e))}}}}class Er extends En{initialize(t){this.object&&(this.object.model.setValue(At.a.FURNITURE_ALPHA_MULTIPLIER,1),this.object.setState(1,0))}processUpdateMessage(t){if(super.processUpdateMessage(t),t instanceof _n&&this.object)switch(t.type){case _n.ENABLED:return void this.object.setState(0,0);case _n.DISABLED:return void this.object.setState(1,0)}}}let Sr=(()=>{class t extends En{constructor(){super(),this._lastEventId=null,this._isHidden=!1}initialize(e){this.object&&(this.object.model.setValue(At.a.FURNITURE_ALPHA_MULTIPLIER,1),this.object.setState(t.CURSOR_HIDDEN_STATE,0))}processUpdateMessage(e){e instanceof un&&(this._lastEventId&&this._lastEventId===e._Str_20637||(e.toggleVisibility&&(this._isHidden=!this._isHidden),super.processUpdateMessage(e),this.object&&(this._isHidden?this.object.setState(t.CURSOR_HIDDEN_STATE,0):e.visible?(this.object.model.setValue(At.a.TILE_CURSOR_HEIGHT,e.height),this.object.setState(e.height>.8?t.CURSOR_HEIGHT_STATE:t.CURSOR_VISIBLE_STATE)):this.object.setState(t.CURSOR_HIDDEN_STATE,0)),this._lastEventId=e._Str_20637))}}return t.CURSOR_VISIBLE_STATE=0,t.CURSOR_HIDDEN_STATE=1,t.CURSOR_HEIGHT_STATE=6,t})(),vr=(()=>{class t{}return t.FURNITURE_BASIC="furniture_basic",t.FURNITURE_MULTISTATE="furniture_multistate",t.FURNITURE_MULTIHEIGHT="furniture_multiheight",t.FURNITURE_RANDOMSTATE="furniture_randomstate",t.FURNITURE_PLACEHOLDER="furniture_placeholder",t.FURNITURE_CREDIT="furniture_credit",t.FURNITURE_STICKIE="furniture_stickie",t.FURNITURE_PRESENT="furniture_present",t.FURNITURE_TROPHY="furniture_trophy",t.FURNITURE_ECOTRON_BOX="furniture_ecotron_box",t.FURNITURE_DICE="furniture_dice",t.FURNITURE_HOCKEY_SCORE="furniture_hockey_score",t.FURNITURE_HABBOWHEEL="furniture_habbowheel",t.FURNITURE_ONE_WAY_DOOR="furniture_one_way_door",t.FURNITURE_PLANET_SYSTEM="furniture_planet_system",t.FURNITURE_WINDOW="furniture_window",t.FURNITURE_EXTERNAL_IMAGE_WALLITEM="furniture_external_image_wallitem",t.FURNITURE_ROOMDIMMER="furniture_roomdimmer",t.FURNITURE_SOUND_MACHINE="furniture_sound_machine",t.FURNITURE_JUKEBOX="furniture_jukebox",t.FURNITURE_CRACKABLE="furniture_crackable",t.FURNITURE_PUSHABLE="furniture_pushable",t.FURNITURE_CLOTHING_CHANGE="furniture_clothing_change",t.FURNITURE_COUNTER_CLOCK="furniture_counter_clock",t.FURNITURE_SCORE="furniture_score",t.FURNITURE_ES="furniture_es",t.FURNITURE_FIREWORKS="furniture_fireworks",t.FURNITURE_SONG_DISK="furniture_song_disk",t.FURNITURE_BB="furniture_bb",t.FURNITURE_BG="furniture_bg",t.FURNITURE_WELCOME_GIFT="furniture_welcome_gift",t.FURNITURE_FLOOR_HOLE="furniture_floor_hole",t.FURNITURE_MANNEQUIN="furniture_mannequin",t.FURNITURE_GUILD_CUSTOMIZED="furniture_guild_customized",t.FURNITURE_GROUP_FORUM_TERMINAL="furniture_group_forum_terminal",t.FURNITURE_PET_CUSTOMIZATION="furniture_pet_customization",t.FURNITURE_CUCKOO_CLOCK="furniture_cuckoo_clock",t.FURNITURE_VOTE_COUNTER="furniture_vote_counter",t.FURNITURE_VOTE_MAJORITY="furniture_vote_majority",t.FURNITURE_SOUNDBLOCK="furniture_soundblock",t.FURNITURE_RANDOM_TELEPORT="furniture_random_teleport",t.FURNITURE_MONSTERPLANT_SEED="furniture_monsterplant_seed",t.FURNITURE_PURCHASABLE_CLOTHING="furniture_purchasable_clothing",t.FURNITURE_BACKGROUND_COLOR="furniture_background_color",t.FURNITURE_MYSTERYBOX="furniture_mysterybox",t.FURNITURE_EFFECTBOX="furniture_effectbox",t.FURNITURE_MYSTERYTROPHY="furniture_mysterytrophy",t.FURNITURE_ACHIEVEMENT_RESOLUTION="furniture_achievement_resolution",t.FURNITURE_LOVELOCK="furniture_lovelock",t.FURNITURE_WILDWEST_WANTED="furniture_wildwest_wanted",t.FURNITURE_HWEEN_LOVELOCK="furniture_hween_lovelock",t.FURNITURE_BADGE_DISPLAY="furniture_badge_display",t.FURNITURE_HIGH_SCORE="furniture_high_score",t.FURNITURE_INTERNAL_LINK="furniture_internal_link",t.FURNITURE_CUSTOM_STACK_HEIGHT="furniture_custom_stack_height",t.FURNITURE_YOUTUBE="furniture_youtube",t.FURNITURE_RENTABLE_SPACE="furniture_rentable_space",t.FURNITURE_CHANGE_STATE_WHEN_STEP_ON="furniture_change_state_when_step_on",t.FURNITURE_VIMEO="furniture_vimeo",t.FURNITURE_EDITABLE_INTERNAL_LINK="furniture_editable_internal_link",t.FURNITURE_EDITABLE_ROOM_LINK="furniture_editable_room_link",t.FURNITURE_CRAFTING_GIZMO="furniture_crafting_gizmo",t.ROOM="room",t.USER="user",t.BOT="bot",t.RENTABLE_BOT="rentable_bot",t.PET="pet",t.TILE_CURSOR="tile_cursor",t.SELECTION_ARROW="selection_arrow",t.GAME_SNOWBALL="game_snowball",t.GAME_SNOWSPLASH="game_snowsplash",t})();class br{constructor(){this._events=new fn.a,this._cachedEvents=new Map,this._registeredEvents=new Map,this._functions=[]}getLogic(t){const e=this.getLogicType(t);if(!e)return null;const s=new e;if(!s)return null;if(s.eventDispatcher=this._events,!this._cachedEvents.get(t)){this._cachedEvents.set(t,!0);const e=s.getEventTypes();for(const t of e)t&&this.registerEventType(t)}return s}registerEventType(t){if(!this._registeredEvents.get(t)){this._registeredEvents.set(t,!0);for(const e of this._functions)e&&this._events.addEventListener(t,e)}}registerEventFunction(t){if(t&&!(this._functions.indexOf(t)>=0)){this._functions.push(t);for(const e of this._registeredEvents.keys())e&&this._events.addEventListener(e,t)}}removeEventFunction(t){if(!t)return;const e=this._functions.indexOf(t);if(-1!==e){this._functions.splice(e,1);for(const e of this._registeredEvents.keys())e&&this._events.removeEventListener(e,t)}}getLogicType(t){if(!t)return null;let e=null;switch(t){case vr.ROOM:e=fr;break;case vr.TILE_CURSOR:e=Sr;break;case vr.SELECTION_ARROW:e=Er;break;case vr.USER:case vr.BOT:case vr.RENTABLE_BOT:e=vn;break;case vr.PET:e=dr;break;case vr.FURNITURE_BASIC:e=In;break;case vr.FURNITURE_BADGE_DISPLAY:e=Rn;break;case vr.FURNITURE_CHANGE_STATE_WHEN_STEP_ON:e=Tn;break;case vr.FURNITURE_COUNTER_CLOCK:e=On;break;case vr.FURNITURE_CRACKABLE:e=Cn;break;case vr.FURNITURE_CREDIT:e=An;break;case vr.FURNITURE_CUSTOM_STACK_HEIGHT:e=Dn;break;case vr.FURNITURE_DICE:e=Nn;break;case vr.FURNITURE_EDITABLE_INTERNAL_LINK:e=Un;break;case vr.FURNITURE_EDITABLE_ROOM_LINK:e=xn;break;case vr.FURNITURE_EXTERNAL_IMAGE_WALLITEM:e=Ln;break;case vr.FURNITURE_FIREWORKS:e=Pn;break;case vr.FURNITURE_FLOOR_HOLE:e=Fn;break;case vr.FURNITURE_GUILD_CUSTOMIZED:e=Vn;break;case vr.FURNITURE_HIGH_SCORE:e=Bn;break;case vr.FURNITURE_HOCKEY_SCORE:e=Wn;break;case vr.FURNITURE_ES:e=Kn;break;case vr.FURNITURE_MANNEQUIN:e=Hn;break;case vr.FURNITURE_MULTIHEIGHT:e=jn;break;case vr.FURNITURE_MULTISTATE:e=wn;break;case vr.FURNITURE_ONE_WAY_DOOR:e=zn;break;case vr.FURNITURE_PET_CUSTOMIZATION:e=Yn;break;case vr.FURNITURE_PRESENT:e=qn;break;case vr.FURNITURE_PURCHASABLE_CLOTHING:e=Zn;break;case vr.FURNITURE_PUSHABLE:e=Xn;break;case vr.FURNITURE_BACKGROUND_COLOR:e=Jn;break;case vr.FURNITURE_BG:e=er;break;case vr.FURNITURE_BB:e=sr;break;case vr.FURNITURE_ROOMDIMMER:e=ir;break;case vr.FURNITURE_SCORE:e=nr;break;case vr.FURNITURE_SOUNDBLOCK:e=rr;break;case vr.FURNITURE_STICKIE:e=ar;break;case vr.FURNITURE_TROPHY:e=or;break;case vr.FURNITURE_VOTE_COUNTER:e=cr;break;case vr.FURNITURE_VOTE_MAJORITY:e=lr;break;case vr.FURNITURE_WINDOW:e=ur;break;case vr.FURNITURE_LOVELOCK:e=kn;break;case vr.FURNITURE_YOUTUBE:e=_r;break;default:e=In}return e||(n.a.log("Unknown Logic: "+t),null)}get events(){return this._events}}class Ir{constructor(t,e,s,i,n,r,a,o=NaN,c=-1,h=0,l=0,u="",_=!0,d=!0,g=-1){this._id=t,this._typeId=e,this._type=s,this._state=r,this._data=a,this._extra=o,this._expiryTime=c,this._usagePolicy=h,this._ownerId=l,this._ownerName=u,this._synchronized=_,this._realRoomObject=d,this._sizeZ=g,this._location=new m.a,this._direction=new m.a,this._location.assign(i),this._direction.assign(n)}get id(){return this._id}get typeId(){return this._typeId}get type(){return this._type}get location(){return this._location}get direction(){return this._direction}get state(){return this._state}get data(){return this._data}get extra(){return this._extra}get expiryTime(){return this._expiryTime}get usagePolicy(){return this._usagePolicy}get ownerId(){return this._ownerId}get ownerName(){return this._ownerName}get synchronized(){return this._synchronized}get realRoomObject(){return this._realRoomObject}get sizeZ(){return this._sizeZ}}class Rr{constructor(t,e){this._roomId=t,this._data=e,this._floorType=null,this._wallType=null,this._landscapeType=null}get roomId(){return this._roomId}get data(){return this._data}get floorType(){return this._floorType}set floorType(t){this._floorType=t}get wallType(){return this._wallType}set wallType(t){this._wallType=t}get landscapeType(){return this._landscapeType}set landscapeType(t){this._landscapeType=t}}let Tr=(()=>{class t{constructor(){this._targetId=-1,this._targetCategory=-2,this._targetLoc=null,this._moveDistance=0,this._previousMoveSpeed=0,this._maintainPreviousMoveSpeed=!1,this._currentLoc=null,this._limitedLocX=!1,this._limitedLocY=!1,this._centeredLocX=!1,this._centeredLocY=!1,this._screenWd=0,this._screenHt=0,this._scale=0,this._roomWd=0,this._roomHt=0,this._geometryUpdateId=-1,this._scaleChanged=!1,this._targetObjectLoc=new m.a}get location(){return this._currentLoc}get _Str_10760(){return this._targetId}set _Str_10760(t){this._targetId=t}get _Str_16562(){return this._targetCategory}set _Str_16562(t){this._targetCategory=t}get _Str_16185(){return this._targetObjectLoc}set _Str_16185(t){this._targetObjectLoc.assign(t)}get _Str_10235(){return this._limitedLocX}set _Str_10235(t){this._limitedLocX=t}get _Str_10446(){return this._limitedLocY}set _Str_10446(t){this._limitedLocY=t}get _Str_8564(){return this._centeredLocX}set _Str_8564(t){this._centeredLocX=t}get _Str_8690(){return this._centeredLocY}set _Str_8690(t){this._centeredLocY=t}get _Str_7609(){return this._screenWd}set _Str_7609(t){this._screenWd=t}get _Str_7902(){return this._screenHt}set _Str_7902(t){this._screenHt=t}get scale(){return this._scale}set scale(t){this._scale!=t&&(this._scale=t,this._scaleChanged=!0)}get _Str_18975(){return this._roomWd}set _Str_18975(t){this._roomWd=t}get _Str_15953(){return this._roomHt}set _Str_15953(t){this._roomHt=t}get _Str_16377(){return this._geometryUpdateId}set _Str_16377(t){this._geometryUpdateId=t}get _Str_12536(){return null!=this._targetLoc&&null!=this._currentLoc}set target(t){let e;null==this._targetLoc&&(this._targetLoc=new m.a),this._targetLoc.x==t.x&&this._targetLoc.y==t.y&&this._targetLoc.z==t.z||(this._targetLoc.assign(t),e=m.a.dif(this._targetLoc,this._currentLoc),this._moveDistance=e.length,this._maintainPreviousMoveSpeed=!0)}dispose(){this._targetLoc=null,this._currentLoc=null}_Str_20685(t){null==this._currentLoc&&(this._currentLoc=new m.a,this._currentLoc.assign(t))}_Str_25467(t){null==this._currentLoc&&(this._currentLoc=new m.a),this._currentLoc.assign(t)}update(e,s){let i,n,r,a,o;if(this._followDuration>0&&null!=this._targetLoc&&null!=this._currentLoc){if(this._scaleChanged)return this._scaleChanged=!1,this._currentLoc=this._targetLoc,void(this._targetLoc=null);i=m.a.dif(this._targetLoc,this._currentLoc),i.length>this._moveDistance&&(this._moveDistance=i.length),i.length<=s?(this._currentLoc=this._targetLoc,this._targetLoc=null,this._previousMoveSpeed=0):(n=Math.sin(Math.PI*i.length/this._moveDistance),r=.5*s,a=this._moveDistance/t.MOVE_SPEED_DENOMINATOR,o=r+(a-r)*n,this._maintainPreviousMoveSpeed&&(o<this._previousMoveSpeed?(o=this._previousMoveSpeed,o>i.length&&(o=i.length)):this._maintainPreviousMoveSpeed=!1),this._previousMoveSpeed=o,i.divide(i.length),i.multiply(o),this._currentLoc=m.a.sum(this._currentLoc,i))}}reset(){this._geometryUpdateId=-1}_Str_19465(t){this._followDuration=t}}return t.MOVE_SPEED_DENOMINATOR=12,t})();class Or{constructor(t,e){this._tileObjectMap=new Map;let s=0;for(;s<e;)this._tileObjectMap.set(s,new Map),s++;this._width=t,this._height=e}clear(){for(const t of this._tileObjectMap.values())t&&t.clear();this._tileObjectMap.clear()}populate(t){this.clear();for(const e of t)this._Str_21192(e)}dispose(){this._tileObjectMap=null,this._width=0,this._height=0}_Str_19056(t,e){if(t>=0&&t<this._width&&e>=0&&e<this._height){const s=this._tileObjectMap.get(e);if(s)return s.get(t)}return null}_Str_23932(t,e,s){if(s.isReady){if(t>=0&&t<this._width&&e>=0&&e<this._height){const i=this._tileObjectMap.get(e);i&&i.set(t,s)}}else n.a.log("Assigning non initialized object to tile object map!")}_Str_21192(t){if(!t||!t.model||!t.isReady)return;const e=t.getLocation(),s=t.getDirection();if(!e||!s)return;let i=t.model.getValue(At.a.FURNITURE_SIZE_X),n=t.model.getValue(At.a.FURNITURE_SIZE_Y);i<1&&(i=1),n<1&&(n=1);const r=Math.trunc(s.x+45)%360/90;1!==r&&3!==r||([i,n]=[n,i]);let a=e.y;for(;a<e.y+n;){let s=e.x;for(;s<e.x+i;){const i=this._Str_19056(s,a);(!i||i!==t&&i.getLocation().z<=e.z)&&this._Str_23932(s,a,t),s++}a++}}}class yr{constructor(t){this._roomId=t,this._modelName=null,this._legacyGeometry=new bi.a,this._tileObjectMap=null,this._roomCamera=new Tr,this._selectedObject=null,this._placedObject=null,this._furnitureStackingHeightMap=null,this._floorStack=new Map,this._wallStack=new Map,this._mouseButtonCursorOwners=[]}dispose(){}setModelName(t){this._modelName=t}setSelectedObject(t){this._selectedObject&&this._selectedObject.dispose(),this._selectedObject=t}setPlacedObject(t){this._placedObject&&this._placedObject.dispose(),this._placedObject=t}setFurnitureStackingHeightMap(t){this._furnitureStackingHeightMap&&this._furnitureStackingHeightMap.dispose(),this._furnitureStackingHeightMap=t,this._tileObjectMap&&this._tileObjectMap.dispose(),this._furnitureStackingHeightMap&&(this._tileObjectMap=new Or(this._furnitureStackingHeightMap.width,this._furnitureStackingHeightMap.height))}addPendingFurnitureFloor(t){t&&(this._floorStack.delete(t.id),this._floorStack.set(t.id,t))}removePendingFunitureFloor(t){const e=this._floorStack.get(t);return e?(this._floorStack.delete(t),e):null}getPendingFurnitureFloor(t){const e=this._floorStack.get(t);return e?(this._floorStack.delete(t),e):null}getNextPendingFurnitureFloor(){if(!this._floorStack.size)return null;const t=this._floorStack.keys();return this.getPendingFurnitureFloor(t.next().value)}addPendingFurnitureWall(t){t&&(this._wallStack.delete(t.id),this._wallStack.set(t.id,t))}removePendingFurnitureWall(t){const e=this._wallStack.get(t);return e?(this._wallStack.delete(t),e):null}getPendingFurnitureWall(t){const e=this._wallStack.get(t);return e?(this._wallStack.delete(t),e):null}getNextPendingFurnitureWall(){if(!this._wallStack.size)return null;const t=this._wallStack.keys();return this.getPendingFurnitureWall(t.next().value)}_Str_16810(t){return-1===this._mouseButtonCursorOwners.indexOf(t)&&(this._mouseButtonCursorOwners.push(t),!0)}_Str_11959(t){const e=this._mouseButtonCursorOwners.indexOf(t);return e>-1&&(this._mouseButtonCursorOwners.splice(e,1),!0)}_Str_22598(){return this._mouseButtonCursorOwners.length>0}get roomId(){return this._roomId}get modelName(){return this._modelName}get legacyGeometry(){return this._legacyGeometry}get tileObjectMap(){return this._tileObjectMap}get roomCamera(){return this._roomCamera}get selectedObject(){return this._selectedObject}get placedObject(){return this._placedObject}get furnitureStackingHeightMap(){return this._furnitureStackingHeightMap}}class Cr{constructor(t,e){this._object=t,this._groupBadge=e}get object(){return this._object}get groupBadge(){return this._groupBadge}}let Ar=(()=>{class t{constructor(){this._Str_3008=0,this._Str_18433=0}static _Str_22230(e,s){const i=[];for(const n of e)if(n)if("boutique_mannequin1"===n.type&&0===n.name.indexOf("mannequin_")){const e=s.getRoomObject(s.activeRoomId,n.objectId,yt.a.FLOOR);if(e){const s=e.visualization.getSpriteList();if(s)for(const e of s)e.x=e.x+(n.x+n.width/2+t._Str_16967),e.y=e.y+(n.y+n.height+t._Str_18197),e.z=e.z+n.z,i.push(e)}}else i.push(n);return i}static _Str_22564(t,e){return t.z<e.z?1:-1}static _Str_20789(t,e,s){return!0}static _Str_14110(t,e,s,i){const n=[];if(t.x==e.x?n.push(t,s,e,i):t.x==s.x?n.push(t,e,s,i):e.x<t.x&&e.y>t.y||e.x>t.x&&e.y<t.y?n.push(t,s,e,i):n.push(t,e,s,i),n[0].x<n[1].x){let t=n[0];n[0]=n[1],n[1]=t,t=n[2],n[2]=n[3],n[3]=t}if(n[0].y<n[2].y){let t=n[0];n[0]=n[2],n[2]=t,t=n[1],n[1]=n[3],n[3]=t}return n}_Str_4536(e,s,i,n){const r=[];let a=s.getSortableSpriteList();const o=i._Str_21072(i.activeRoomId,yt.a.UNIT);for(const c of o)if(c.id!==n){const e=c.visualization.getSpriteList();if(e){let n=0,r=0;for(const t of a)if(t.name==="avatar_"+c.id){n=t.z,r=t.y+t.height-s.geometry.scale/4;break}const o=i.getRoomObjectScreenLocation(i.activeRoomId,c.id,yt.a.UNIT,s.id);if(o){0===r&&(r=o.y);for(const i of e)i.x=i.x+(o.x-s.screenOffsetX),i.y=i.y+r,i.z=i.z+n,0!==i.name.indexOf("h_std_fx29_")&&0!==i.name.indexOf("h_std_fx185_")||(i.y=i.y+t._Str_18565),a.push(i)}}}a=t._Str_22230(a,i),a.sort(t._Str_22564);for(const c of a)null!==c.name&&c.name.length>0&&0!==c.name.indexOf("tile_cursor_")&&t._Str_20789(c,e,s)&&(n<0||c.objectId!=n)&&(r.push(this._Str_25132(c,e,s,i)),this._Str_6409||(this._Str_6409=c.z),this._Str_3008++);return JSON.stringify(r)}_Str_24177(t){return JSON.stringify(new Object)}_Str_25132(e,s,i,n){let r=[];const a={};let o=e.name;return-1!==e.name.indexOf("@")&&(r=e.name.split("@"),o=r[0]),a.name=o,a.x=e.x-s.x,a.y=e.y-s.y,a.x=a.x+i.screenOffsetX,a.y=a.y+i.screenOffsetY,a.z=e.z,e.alpha&&"255"!==e.alpha.toString()&&(a.alpha=e.alpha),e.flipH&&(a.flipH=e.flipH),e.skew&&(a.skew=e.skew),e.frame&&(a.frame=e.frame),e.color&&e.color.length>0&&(a.color=parseInt(e.color)),e.blendMode&&"normal"!==e.blendMode&&(a.blendMode=e.blendMode),0===o.indexOf("http")&&(a.width=e.width,a.height=e.height,this._Str_18433++,this._Str_18433>t._Str_17558&&(a.name="box")),e.posture&&(a.posture=e.posture),a}_Str_25196(e,s,n){const r=new i.Point(0,0),a=new i.Point(e.width,0),o=new i.Point(0,e.height),c=new i.Point(e.width,e.height),h=t._Str_14110(r,a,o,c);let l=0;n.length>0?(l=n[0].z,this._Str_6409&&(l=Math.max(this._Str_6409,l))):l=this._Str_6409?this._Str_6409:0,l+=1.776104*this._Str_3008+2.31743*n.length;const u=new Qe(null,s);return u.cornerPoints=h,u.z=l,u}_Str_25623(t,e,s){const i=new Map;let n=1;this._Str_6409&&(n+=this._Str_6409);for(const o of t)i.set(o.uniqueId,{plane:o,z:n});const r=e._Str_14588();r.sort((t,e)=>e.z-t.z),r.reverse();let a=[];for(const o of r){const t=o.sprite;if(t){const e=i.get(t.id);e&&(i.delete(t.id),e.z=o.z,a.push(e))}}return a=a.concat(Array.from(i.values())),a}_Str_22985(e,s,i,n){const r=[],a=i.getRoomObject(i.activeRoomId,Mr.ROOM_OBJECT_ID,yt.a.ROOM).visualization;if(a){const o=s.geometry,c=this._Str_25623(a._Str_19113,s,i),l=h.a.instance.stage;for(const i of c){const n=i.plane,a=[],c=m.a.sum(n.location,n._Str_5424),h=o.getScreenPoint(n.location),u=o.getScreenPoint(c),_=o.getScreenPoint(m.a.sum(n.location,n._Str_4968)),d=o.getScreenPoint(m.a.sum(c,n._Str_4968));a.push(h,u,_,d);let g=0,p=0;for(const t of a)t.x+=l.width/2,t.y+=l.height/2,t.x+=s.screenOffsetX,t.y+=s.screenOffsetY,t.x+=-e.x,t.y+=-e.y,t.x<0?g--:t.x>=e.width&&g++,t.y<0?p--:t.y>=e.height&&p++;if(4===Math.abs(g)||4===Math.abs(p));else{const e=t._Str_14110(h,u,_,d);for(const t of n._Str_22136(o))t.cornerPoints=e,t.z=i.z,r.push(t)}}r.unshift(this._Str_25196(e,n,r))}return r}}return t._Str_16967=1,t._Str_18197=-16,t._Str_18565=-52,t._Str_17558=30,t})(),Mr=(()=>{class t extends r.a{constructor(t){super(),this._communication=t,this._sessionDataManager=null,this._roomSessionManager=null,this._roomManager=null,this._roomObjectEventHandler=new pn(this),this._roomMessageHandler=new Ri(this),this._roomContentLoader=new ws.a,this._ready=!1,this._roomContentLoaderReady=!1,this._activeRoomId=-1,this._activeRoomActiveCanvas=-1,this._roomInstanceDatas=new Map,this._roomDatas=new Map,this._roomRendererFactory=new y,this._visualizationFactory=new Ms,this._logicFactory=new br,this._activeRoomActiveCanvasMouseX=0,this._activeRoomActiveCanvasMouseY=0,this._activeRoomIsDragged=!1,this._activeRoomWasDragged=!1,this._activeRoomDragStartX=0,this._activeRoomDragStartY=0,this._activeRoomDragX=0,this._activeRoomDragY=0,this._skipFurnitureCreationForNextFrame=!1,this._mouseCursorUpdate=!1,this._imageObjectIdBank=null,this._imageCallbacks=new Map,this._thumbnailCallbacks=new Map,this._roomDraggingAlwaysCenters=!1,this._roomAllowsDragging=!0,this._badgeListenerObjects=new Map,this.runVisibilityUpdate=this.runVisibilityUpdate.bind(this),this.processRoomObjectEvent=this.processRoomObjectEvent.bind(this),this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.onRoomContentLoaderReadyEvent=this.onRoomContentLoaderReadyEvent.bind(this),this.onBadgeImageReadyEvent=this.onBadgeImageReadyEvent.bind(this)}onInit(){this._ready||(this._imageObjectIdBank=new C(1e3),this._thumbnailObjectIdBank=new C(1e3),this._logicFactory.registerEventFunction(this.processRoomObjectEvent),this._roomManager&&(this._roomManager.setContentLoader(this._roomContentLoader),this._roomManager.addUpdateCategory(yt.a.FLOOR),this._roomManager.addUpdateCategory(yt.a.WALL),this._roomManager.addUpdateCategory(yt.a.UNIT),this._roomManager.addUpdateCategory(yt.a.CURSOR),this._roomManager.addUpdateCategory(yt.a.ROOM)),this._roomMessageHandler.setConnection(this._communication.connection),this._roomContentLoader.initialize(this.events),this._roomContentLoader.setSessionDataManager(this._sessionDataManager),this._roomContentLoader.setIconListener(this),this._roomSessionManager&&(this._roomSessionManager.events.addEventListener(U.a.STARTED,this.onRoomSessionEvent),this._roomSessionManager.events.addEventListener(U.a.ENDED,this.onRoomSessionEvent)),this.events.addEventListener(ws.a.LOADER_READY,this.onRoomContentLoaderReadyEvent),h.a.instance.ticker.add(this.update,this),document.addEventListener("visibilitychange",this.runVisibilityUpdate))}onDispose(){if(this._ready){for(const[t,e]of this._roomInstanceDatas)this.removeRoomInstance(t);document.removeEventListener("visibilitychange",this.runVisibilityUpdate),h.a.instance.ticker.remove(this.update,this),this._roomObjectEventHandler&&this._roomObjectEventHandler.dispose(),this._roomMessageHandler&&this._roomMessageHandler.dispose(),this._roomContentLoader&&this._roomContentLoader.dispose(),this.events.removeEventListener(ws.a.LOADER_READY,this.onRoomContentLoaderReadyEvent),this._roomSessionManager&&(this._roomSessionManager.events.removeEventListener(U.a.STARTED,this.onRoomSessionEvent),this._roomSessionManager.events.removeEventListener(U.a.ENDED,this.onRoomSessionEvent)),super.onDispose()}}onRoomSessionEvent(t){if(t instanceof U.a)switch(t.type){case U.a.STARTED:return void(this._roomMessageHandler&&this._roomMessageHandler.setRoomId(t.session.roomId));case U.a.ENDED:return void(this._roomMessageHandler&&(this._roomMessageHandler.clearRoomId(),this.removeRoomInstance(t.session.roomId)))}}onRoomContentLoaderReadyEvent(t){this._roomContentLoaderReady=!0,this._roomManager.init()}setActiveRoomId(t){this._activeRoomId=t}destroyRoom(t){this.removeRoomInstance(t)}getRoomInstance(t){return this._roomManager&&this._roomManager.getRoomInstance(this.getRoomId(t))||null}removeRoomInstance(t){this.getRoomInstance(t)&&this._roomManager&&this._roomManager.removeRoomInstance(this.getRoomId(t));const e=this._roomInstanceDatas.get(t);e&&(this._roomInstanceDatas.delete(e.roomId),e.dispose()),this.events.dispatchEvent(new P.a(P.a.DISPOSED,t))}createRoomInstance(t,e){let s="111",i="201",r="1";if(!this._ready){let a=this._roomDatas.get(t);return a&&(this._roomDatas.delete(t),s=a.floorType,i=a.wallType,r=a.landscapeType),a=new Rr(t,e),a.floorType=s,a.wallType=i,a.landscapeType=r,this._roomDatas.set(t,a),void n.a.log("Room Engine not initilized yet, can not create room. Room data stored for later initialization.")}if(!e)return void n.a.log("Room property messages received before floor height map, will initialize when floor height map received.");const a=this._roomDatas.get(t);a&&(this._roomDatas.delete(t),a.floorType&&(s=a.floorType),a.wallType&&(i=a.wallType),a.landscapeType&&(r=a.landscapeType)),this.setupRoomInstance(t,e,s,i,r,this.getRoomInstanceModelName(t))&&(this._roomAllowsDragging=!e.restrictsDragging,this.events.dispatchEvent(new P.a(P.a.INITIALIZED,t)))}setupRoomInstance(e,s,i,n,r,a){if(!this._ready||!this._roomManager)return;const o=this._roomManager.createRoomInstance(this.getRoomId(e));if(!o)return null;const c=o.createRoomObjectAndInitalize(t.ROOM_OBJECT_ID,t.ROOM_OBJECT_TYPE,yt.a.ROOM);if(o.model.setValue(Si.a.ROOM_IS_PUBLIC,0),o.model.setValue(Si.a.ROOM_Z_SCALE,1),s&&(o.model.setValue(Si.a.RESTRICTS_DRAGGING,s.restrictsDragging),o.model.setValue(Si.a.RESTRICTS_SCALING,s.restrictsScaling),o.model.setValue(Si.a.RESTRICTED_SCALE,s.restrictedScale),s.dimensions)){const t=s.dimensions.minX,e=s.dimensions.maxX,i=s.dimensions.minY,n=s.dimensions.maxY;o.model.setValue(Si.a.ROOM_MIN_X,t),o.model.setValue(Si.a.ROOM_MAX_X,e),o.model.setValue(Si.a.ROOM_MIN_Y,i),o.model.setValue(Si.a.ROOM_MAX_Y,n);const r=423*t+671*e+913*i+7509*n;c&&c.model&&c.model.setValue(At.a.ROOM_RANDOM_SEED,r)}const h=c&&c.logic||null;if(h&&(h.initialize(s),i&&(h.processUpdateMessage(new Rt(Rt.ROOM_FLOOR_UPDATE,i)),o.model.setValue(At.a.ROOM_FLOOR_TYPE,i)),n&&(h.processUpdateMessage(new Rt(Rt.ROOM_WALL_UPDATE,n)),o.model.setValue(At.a.ROOM_WALL_TYPE,n)),r&&(h.processUpdateMessage(new Rt(Rt.ROOM_LANDSCAPE_UPDATE,r)),o.model.setValue(At.a.ROOM_LANDSCAPE_TYPE,r))),s&&s.doors.length){let t=0;for(;t<s.doors.length;){const e=s.doors[t];if(e){const s=e.x,i=e.y,n=e.z,r=e.dir,a=vt.DOOR,c="door_"+t,l=new m.a(s,i,n);h.processUpdateMessage(new vt(vt.ADD_MASK,c,a,l,vt.HOLE)),90!==r&&180!==r||(90===r&&(o.model.setValue(At.a.ROOM_DOOR_X,s-.5),o.model.setValue(At.a.ROOM_DOOR_Y,i)),180===r&&(o.model.setValue(At.a.ROOM_DOOR_X,s),o.model.setValue(At.a.ROOM_DOOR_Y,i-.5)),o.model.setValue(At.a.ROOM_DOOR_Z,n),o.model.setValue(At.a.ROOM_DOOR_DIR,r))}t++}}return o.createRoomObjectAndInitalize(t.CURSOR_OBJECT_ID,t.CURSOR_OBJECT_TYPE,yt.a.CURSOR),o}getRoomInstanceDisplay(e,s,n,r,a){const o=this.getRoomInstance(e);if(!o)return null;let c=o.renderer;if(!c&&(c=this._roomRendererFactory.createRenderer(),!c))return null;c.roomObjectVariableAccurateZ=At.a.OBJECT_ACCURATE_Z_VALUE,o.setRenderer(c);const h=c.createCanvas(s,n,r,a);if(!h)return null;if(o.model.getValue(Si.a.RESTRICTS_SCALING)){let t=o.model.getValue(Si.a.RESTRICTED_SCALE);t||(t=1),h.setScale(t),h.restrictsScaling=!0}else h.restrictsScaling=!1;if(h.setMouseListener(this._roomObjectEventHandler),h.geometry){h.geometry.z_scale=o.model.getValue(Si.a.ROOM_Z_SCALE);const e=o.model.getValue(At.a.ROOM_DOOR_X),s=o.model.getValue(At.a.ROOM_DOOR_Y),n=o.model.getValue(At.a.ROOM_DOOR_Z),r=o.model.getValue(At.a.ROOM_DOOR_DIR),a=new m.a(e,s,n);let c=null;90===r&&(c=new m.a(-2e3,0,0)),180===r&&(c=new m.a(0,-2e3,0)),h.geometry.setDisplacement(a,c);const l=h.master;if(l){const e=i.Sprite.from(i.Texture.EMPTY);e.name=t.OVERLAY,e.interactive=!1,l.addChild(e)}}return h.master}setRoomInstanceRenderingCanvasMask(t,e,s){const i=this.getRoomInstanceRenderingCanvas(t,e);i&&i.setMask(s)}setRoomInstanceRenderingCanvasScale(t,e,s,i=null,n=null,r=!1,a=!1){const o=this.getRoomInstanceRenderingCanvas(t,e);if(o){if(o.restrictsScaling&&!r)return;o.setScale(s,i,n,r,a),this.events.dispatchEvent(new P.a(P.a.ROOM_ZOOMED,t))}}getRoomInstanceRenderingCanvas(t,e=-1){const s=this.getRoomInstance(t);if(!s)return null;const i=s.renderer;return i?(-1===e&&(e=this._activeRoomActiveCanvas),i.getCanvas(e)||null):null}getActiveRoomInstanceRenderingCanvas(){return this.getRoomInstanceRenderingCanvas(this._activeRoomId,this._activeRoomActiveCanvas)}getRoomInstanceRenderingCanvasOffset(t,e=-1){-1===e&&(e=this._activeRoomActiveCanvas);const s=this.getRoomInstanceRenderingCanvas(t,e);return s?new i.Point(s.screenOffsetX,s.screenOffsetY):null}setRoomInstanceRenderingCanvasOffset(t,e,s){const i=this.getRoomInstanceRenderingCanvas(t,e);return!(!i||!s||(i.screenOffsetX=s.x,i.screenOffsetY=s.y,0))}getRoomInstanceRenderingCanvasScale(t=-1e3,e=-1){-1e3===t&&(t=this._activeRoomId),-1===e&&(e=this._activeRoomActiveCanvas);const s=this.getRoomInstanceRenderingCanvas(t,e);return s?s.scale:1}initializeRoomInstanceRenderingCanvas(t,e,s,i){const n=this.getRoomInstanceRenderingCanvas(t,e);n&&n.initialize(s,i)}getRoomInstanceGeometry(t,e=-1){const s=this.getRoomInstance(t);if(!s)return null;const i=s.renderer;if(!i)return null;-1===e&&(e=this._activeRoomActiveCanvas);const n=i.getCanvas(e);return n?n.geometry:null}getRoomInstanceVariable(t,e){const s=this.getRoomInstance(t);return s&&s.model&&s.model.getValue(e)||null}updateRoomInstancePlaneVisibility(t,e,s=!0){const i=this.getRoomOwnObject(t);return!!i&&(i.processUpdateMessage(new It(It.WALL_VISIBILITY,e)),i.processUpdateMessage(new It(It.FLOOR_VISIBILITY,s)),!0)}updateRoomInstancePlaneThickness(t,e,s){const i=this.getRoomOwnObject(t);return!!i&&(i.processUpdateMessage(new bt(bt.WALL_THICKNESS,e)),i.processUpdateMessage(new bt(bt.FLOOR_THICKNESS,s)),!0)}updateRoomInstancePlaneType(t,e=null,s=null,i=null,n=!1){const r=this.getRoomOwnObject(t),a=this.getRoomInstance(t);if(!r){let n=this._roomDatas.get(t);return n||(n=new Rr(t,null),this._roomDatas.set(t,n)),e&&(n.floorType=e),s&&(n.wallType=s),i&&(n.landscapeType=i),!0}return e&&(a&&!n&&a.model.setValue(At.a.ROOM_FLOOR_TYPE,e),r.processUpdateMessage(new Rt(Rt.ROOM_FLOOR_UPDATE,e))),s&&(a&&!n&&a.model.setValue(At.a.ROOM_WALL_TYPE,s),r.processUpdateMessage(new Rt(Rt.ROOM_WALL_UPDATE,s))),i&&(a&&!n&&a.model.setValue(At.a.ROOM_LANDSCAPE_TYPE,i),r.processUpdateMessage(new Rt(Rt.ROOM_LANDSCAPE_UPDATE,i))),!0}_Str_17804(t,e,s,i){const n=this.getRoomOwnObject(t);if(!n||!n.logic)return!1;const r=new Et(Et.BACKGROUND_COLOR,e,s,i);return n.logic.processUpdateMessage(r),this.events.dispatchEvent(new L.a(t,e,s,i)),!0}addRoomInstanceFloorHole(t,e){if(e<0)return;const s=this.getRoomOwnObject(t),i=this.getRoomObjectFloor(t,e);if(s&&s.logic&&i&&i.model){const t=i.getLocation(),n=i.model.getValue(At.a.FURNITURE_SIZE_X),r=i.model.getValue(At.a.FURNITURE_SIZE_Y);s.processUpdateMessage(new St(St.ADD,e,t.x,t.y,n,r))}}removeRoomInstanceFloorHole(t,e){if(e<0)return;const s=this.getRoomOwnObject(t);s&&s.processUpdateMessage(new St(St.REMOVE,e))}setRoomEngineGameMode(t,e){const s=this.getRoomInstance(t);if(!s)return;const i=e?1:0;s.model.setValue(Si.a.IS_PLAYING_GAME,i),this.events.dispatchEvent(new P.a(0===i?P.a.NORMAL_MODE:P.a.GAME_MODE,t))}isRoomIdPlayingGame(t){const e=this.getRoomInstance(t);return!!e&&e.model.getValue(Si.a.IS_PLAYING_GAME)>0}isPlayingGame(){return this.isRoomIdPlayingGame(this._activeRoomId)}disableUpdate(t){t?h.a.instance.ticker.remove(this.update,this):(h.a.instance.ticker.remove(this.update,this),h.a.instance.ticker.add(this.update,this))}runUpdate(){this.update(1)}runVisibilityUpdate(){document.hidden||this.update(1,!0)}update(t,e=!1){this._roomManager&&(t=h.a.instance.time,d.a.turnVisualizationOn(),this.processPendingFurniture(),this._roomManager.update(t,e),this._Str_22919(t),this._mouseCursorUpdate&&this.setPointer(),d.a.turnVisualizationOff())}setPointer(){this._mouseCursorUpdate=!1;const t=this.getRoomInstanceData(this._activeRoomId);t&&t._Str_22598()?document.body.style.cursor="pointer":document.body.style.cursor="auto"}processPendingFurniture(){if(this._skipFurnitureCreationForNextFrame)return void(this._skipFurnitureCreationForNextFrame=!1);const t=(new Date).valueOf();for(const e of this._roomInstanceDatas.values()){if(!e)continue;let s=null,i=0,n=!1;for(;s=e.getNextPendingFurnitureFloor();)if(n=this.processPendingFurnitureFloor(e.roomId,s.id,s),!(++i%5)&&(new Date).valueOf()-t>=40){this._skipFurnitureCreationForNextFrame=!0;break}for(;!this._skipFurnitureCreationForNextFrame&&(s=e.getNextPendingFurnitureWall());)if(n=this.processPendingFurnitureWall(e.roomId,s.id,s),!(++i%5)&&(new Date).valueOf()-t>=40){this._skipFurnitureCreationForNextFrame=!0;break}if(n&&this._roomManager&&(this._roomManager.getRoomInstance(this.getRoomId(e.roomId)).hasUninitializedObjects()||this.objectsInitialized(e.roomId.toString())),this._skipFurnitureCreationForNextFrame)return}}onRoomEngineInitalized(t){if(t){this._ready=!0,this.events.dispatchEvent(new P.a(P.a.ENGINE_INITIALIZED,0));for(const t of this._roomDatas.values())t&&this.createRoomInstance(t.roomId,t.data)}}processPendingFurnitureFloor(t,e,s){if(!s){const i=this.getRoomInstanceData(t);if(i&&(s=i.getPendingFurnitureFloor(e)),!s)return!1}let i=s.type;i||(i=this.getFurnitureFloorName(s.typeId));const n=this.createRoomObjectFloor(t,e,i);if(!n)return!1;const r=n.model;if(r&&(r.setValue(At.a.FURNITURE_COLOR,this.getFurnitureFloorColorIndex(s.typeId)),r.setValue(At.a.FURNITURE_TYPE_ID,s.typeId),r.setValue(At.a.FURNITURE_REAL_ROOM_OBJECT,s.realRoomObject?1:0),r.setValue(At.a.FURNITURE_EXPIRY_TIME,s.expiryTime),r.setValue(At.a.FURNITURE_EXPIRTY_TIMESTAMP,h.a.instance.time),r.setValue(At.a.FURNITURE_USAGE_POLICY,s.usagePolicy),r.setValue(At.a.FURNITURE_OWNER_ID,s.ownerId),r.setValue(At.a.FURNITURE_OWNER_NAME,s.ownerName)),!this.updateRoomObjectFloor(t,e,s.location,s.direction,s.state,s.data,s.extra))return!1;if(s.sizeZ>=0&&!this.updateRoomObjectFloorHeight(t,e,s.sizeZ))return!1;this.events&&this.events.dispatchEvent(new F.a(F.a.ADDED,t,e,yt.a.FLOOR));const a=this.getPlacedRoomObjectData(t);return a&&a.id===e&&a.category===yt.a.FLOOR&&this.selectRoomObject(t,e,yt.a.FLOOR),n.isReady&&s.synchronized&&this._Str_21543(t,n),!0}processPendingFurnitureWall(t,e,s){if(!s){const i=this.getRoomInstanceData(t);if(i&&(s=i.getPendingFurnitureWall(e)),!s)return!1}let i="";s.data&&(i=s.data.getLegacyString());let n=this.getFurnitureWallName(s.typeId,i);n||(n="");const r=this.createRoomObjectWall(t,e,n);if(!r)return!1;const a=r.model;if(a&&(a.setValue(At.a.FURNITURE_COLOR,this.getFurnitureWallColorIndex(s.typeId)),a.setValue(At.a.FURNITURE_TYPE_ID,s.typeId),a.setValue(At.a.FURNITURE_REAL_ROOM_OBJECT,s.realRoomObject?1:0),a.setValue(At.a.OBJECT_ACCURATE_Z_VALUE,1),a.setValue(At.a.FURNITURE_EXPIRY_TIME,s.expiryTime),a.setValue(At.a.FURNITURE_EXPIRTY_TIMESTAMP,h.a.instance.time),a.setValue(At.a.FURNITURE_USAGE_POLICY,s.usagePolicy),a.setValue(At.a.FURNITURE_OWNER_ID,s.ownerId),a.setValue(At.a.FURNITURE_OWNER_NAME,s.ownerName)),!this.updateRoomObjectWall(t,e,s.location,s.direction,s.state,i))return!1;this.events&&this.events.dispatchEvent(new F.a(F.a.ADDED,t,e,yt.a.WALL));const o=this.getPlacedRoomObjectData(t);return o&&Math.abs(o.id)===e&&o.category===yt.a.WALL&&this.selectRoomObject(t,e,yt.a.WALL),!0}setRoomSessionOwnUser(t,e){if(!this._roomSessionManager)return;const s=this._roomSessionManager.getSession(t);s&&s.setOwnRoomIndex(e);const i=this.getRoomCamera(t);i&&(i._Str_10760=e,i._Str_16562=yt.a.UNIT,i._Str_19465(this._Str_19549))}get _Str_19549(){return 1e3}_Str_22919(t){for(const s of this._roomInstanceDatas.values()){if(!s)continue;const e=s.roomCamera;if(!e)continue;const i=this.getRoomObject(s.roomId,e._Str_10760,e._Str_16562);i&&(s.roomId===this._activeRoomId&&this._activeRoomIsDragged||this._Str_25242(s.roomId,1,i.getLocation(),t))}const e=this.getRoomInstanceRenderingCanvas(this._activeRoomId,1);e&&this._activeRoomIsDragged&&(e.screenOffsetX=e.screenOffsetX+this._activeRoomDragX,e.screenOffsetY=e.screenOffsetY+this._activeRoomDragY,this._activeRoomDragX=0,this._activeRoomDragY=0)}_Str_25242(t,e,s,n){const r=this.getRoomInstanceRenderingCanvas(t,e),a=this.getRoomInstanceData(t);if(!r||!a||1!==r.scale)return;const o=r.geometry,c=a.roomCamera,h=this.getRoomInstance(t);if(!o||!c||!h)return;const l=this._Str_25261(t,e);if(!l)return;let u=Math.floor(s.z)+1;const _=Math.round(l.width),d=Math.round(l.height),g=this.getCanvasBoundingRectangle(e);if(g&&(g.right<0||g.bottom<0||g.left>=_||g.top>=d)&&c.reset(),c._Str_7609!==_||c._Str_7902!==d||c.scale!==o.scale||c._Str_16377!==o.updateId||!m.a.isEqual(s,c._Str_16185)||c._Str_12536){c._Str_16185=s;const t=new m.a;t.assign(s),t.x=Math.round(t.x),t.y=Math.round(t.y);const e=h.model.getValue(Si.a.ROOM_MIN_X)-.5,a=h.model.getValue(Si.a.ROOM_MIN_Y)-.5,p=h.model.getValue(Si.a.ROOM_MAX_X)+.5,f=h.model.getValue(Si.a.ROOM_MAX_Y)+.5,E=Math.round((e+p)/2),S=Math.round((a+f)/2),v=2;let b=new i.Point(t.x-E,t.y-S);const I=o.scale/Math.sqrt(2),R=I/2,T=new i.Matrix;T.rotate(-(o.direction.x+90)/180*Math.PI),b=T.apply(b),b.y=b.y*(R/I);const O=l.width/2/I-1,y=l.height/2/R-1;let C=0,A=0,M=0,w=0,D=o.getScreenPoint(new m.a(E,S,v));if(!D)return;if(D.x=D.x+Math.round(l.width/2),D.y=D.y+Math.round(l.height/2),!g)return void o.adjustLocation(new m.a(0,0),25);if(g.x+=-r.screenOffsetX,g.y+=-r.screenOffsetY,!(g.width>1&&g.height>1))return void o.adjustLocation(new m.a(-30,-30),25);C=(g.left-D.x-.25*o.scale)/I,M=(g.right-D.x+.25*o.scale)/I,A=(g.top-D.y-.5*o.scale)/R,w=(g.bottom-D.y+.5*o.scale)/R;let N=!1,U=!1,x=!1,L=!1;Math.round((M-C)*I)<l.width?(u=2,b.x=(M+C)/2,x=!0):(b.x>M-O&&(b.x=M-O,N=!0),b.x<C+O&&(b.x=C+O,N=!0)),Math.round((w-A)*R)<l.height?(u=2,b.y=(w+A)/2,L=!0):(b.y>w-y&&(b.y=w-y,U=!0),b.y<A+y&&(b.y=A+y,U=!0),U&&(b.y=b.y/(R/I))),T.invert(),b=T.apply(b),b.x=b.x+E,b.y=b.y+S;let P=.35,F=.2,k=.2;const V=10,B=10;if(k*_>100&&(k=100/_),P*d>150&&(P=150/d),F*d>150&&(F=150/d),c._Str_10235&&c._Str_7609==_&&c._Str_7902==d&&(k=0),c._Str_10446&&c._Str_7609==_&&c._Str_7902==d&&(P=0,F=0),l.width=l.width*(1-2*k),l.height=l.height*(1-(P+F)),l.width<V&&(l.width=V),l.height<B&&(l.height=B),P+F>0?(l.x+=-l.width/2,l.y+=F/(P+F)*-l.height):(l.x+=-l.width/2,l.y+=-l.height/2),D=o.getScreenPoint(t),!D)return;if(D){D.x=D.x+r.screenOffsetX,D.y=D.y+r.screenOffsetY,t.z=u,t.x=Math.round(2*b.x)/2,t.y=Math.round(2*b.y)/2,c.location||(o.location=t,c._Str_20685(this._Str_11555?new m.a(0,0,0):t));const e=o.getScreenPoint(t),s=new m.a(0,0,0);e&&(s.x=e.x,s.y=e.y),(D.x<l.left||D.x>l.right)&&!c._Str_8564||(D.y<l.top||D.y>l.bottom)&&!c._Str_8690||x&&!c._Str_8564&&c._Str_7609!=_||L&&!c._Str_8690&&c._Str_7902!=d||c._Str_18975!=g.width||c._Str_15953!=g.height||c._Str_7609!=_||c._Str_7902!=d?(c._Str_10235=N,c._Str_10446=U,c.target=this._Str_11555?s:t):(N||(c._Str_10235=!1),U||(c._Str_10446=!1))}c._Str_8564=x,c._Str_8690=L,c._Str_7609=_,c._Str_7902=d,c.scale=o.scale,c._Str_16377=o.updateId,c._Str_18975=g.width,c._Str_15953=g.height,this._sessionDataManager.isCameraFollowDisabled||c.update(n,this._Str_11555?8:.5),this._Str_11555?(r.screenOffsetX=-c.location.x,r.screenOffsetY=-c.location.y):o.adjustLocation(c.location,25)}else c._Str_10235=!1,c._Str_10446=!1,c._Str_8564=!1,c._Str_8690=!1}_Str_25261(t,e){const s=this.getRoomInstanceRenderingCanvas(t,e);return s?new i.Rectangle(0,0,s.width,s.height):null}getRoomObjectBoundingRectangle(t,e,s,i){const n=this.getRoomInstanceGeometry(t,i);if(!n)return null;const r=this.getRoomObject(t,e,s);if(!r)return null;const a=r.visualization;if(!a)return null;const o=a.getBoundingRectangle(),c=this.getRoomInstanceRenderingCanvas(t,i),h=c?c.scale:1,l=n.getScreenPoint(r.getLocation());return l?(o.x=o.x*h,o.y=o.y*h,o.width=o.width*h,o.height=o.height*h,l.x=l.x*h,l.y=l.y*h,o.x+=l.x,o.y+=l.y,c?(o.x+=c.width/2+c.screenOffsetX,o.y+=c.height/2+c.screenOffsetY,o):null):null}getCanvasBoundingRectangle(e){return this.getRoomObjectBoundingRectangle(this._activeRoomId,t.ROOM_OBJECT_ID,yt.a.ROOM,e)}getFurnitureFloorName(t){return this._roomContentLoader?this._roomContentLoader.getFurnitureFloorNameForTypeId(t):null}getFurnitureWallName(t,e=null){return this._roomContentLoader?this._roomContentLoader.getFurnitureWallNameForTypeId(t,e):null}getFurnitureFloorColorIndex(t){return this._roomContentLoader?this._roomContentLoader.getFurnitureFloorColorIndex(t):null}getFurnitureWallColorIndex(t){return this._roomContentLoader?this._roomContentLoader.getFurnitureWallColorIndex(t):null}getRoomInstanceData(t){const e=this._roomInstanceDatas.get(t);if(e)return e;const s=new yr(t);return this._roomInstanceDatas.set(s.roomId,s),s}getRoomInstanceModelName(t){const e=this.getRoomInstanceData(t);return e?e.modelName:null}setRoomInstanceModelName(t,e){const s=this.getRoomInstanceData(t);s&&s.setModelName(e)}getRoomTileObjectMap(t){const e=this.getRoomInstanceData(t);return e?e.tileObjectMap:null}getCurrentRoomCamera(){return this.getRoomCamera(this._activeRoomId)}getRoomCamera(t){const e=this.getRoomInstanceData(t);return e?e.roomCamera:null}getSelectedRoomObjectData(t){const e=this.getRoomInstanceData(t);return e?e.selectedObject:null}setSelectedRoomObjectData(t,e){const s=this.getRoomInstanceData(t);if(!s)return null;s.setSelectedObject(e),e&&s.setPlacedObject(null)}getPlacedRoomObjectData(t){const e=this.getRoomInstanceData(t);return e?e.placedObject:null}setPlacedRoomObjectData(t,e){const s=this.getRoomInstanceData(t);if(!s)return null;s.setPlacedObject(e)}cancelRoomObjectPlacement(){this._roomObjectEventHandler&&this._roomObjectEventHandler.cancelRoomObjectPlacement(this._activeRoomId)}getFurnitureStackingHeightMap(t){const e=this.getRoomInstanceData(t);return e?e.furnitureStackingHeightMap:null}setFurnitureStackingHeightMap(t,e){const s=this.getRoomInstanceData(t);if(!s)return null;s.setFurnitureStackingHeightMap(e)}getLegacyWallGeometry(t){const e=this.getRoomInstanceData(t);return e?e.legacyGeometry:null}createRoomObjectAndInitialize(t,e,s,i){const n=this.getRoomInstance(t);return n?n.createRoomObjectAndInitalize(e,s,i):null}getTotalObjectsForManager(t,e){const s=this.getRoomInstance(t);return s?s.getTotalObjectsForManager(e):0}getRoomObject(e,s,i){if(!this._ready)return null;let n=this.getRoomId(e);return 0===e&&(n=t.TEMPORARY_ROOM),this.getObject(n,s,i)}getObject(t,e,s){let i=null;if(this._roomManager&&(i=this._roomManager.getRoomInstance(t)),!i)return null;let n=i.getRoomObject(e,s);if(!n)switch(s){case yt.a.FLOOR:this.processPendingFurnitureFloor(this.getRoomIdFromString(t),e,null),n=i.getRoomObject(e,s);break;case yt.a.WALL:this.processPendingFurnitureWall(this.getRoomIdFromString(t),e,null),n=i.getRoomObject(e,s)}return n}getRoomObjectByIndex(t,e,s){const i=this.getRoomInstance(t);return i?i.getRoomObjectByIndex(e,s):null}getRoomObjectCategoryForType(t){return t&&this._roomContentLoader?this._roomContentLoader.getCategoryForType(t):yt.a.MINIMUM}getRoomObjectCursor(e){return this.getObject(this.getRoomId(e),t.CURSOR_OBJECT_ID,yt.a.CURSOR)}getRoomObjectSelectionArrow(e){return this.getObject(this.getRoomId(e),t.ARROW_OBJECT_ID,yt.a.CURSOR)}getRoomOwnObject(e){return this.getObject(this.getRoomId(e),t.ROOM_OBJECT_ID,yt.a.ROOM)}getRoomObjectUser(t,e){return this.getObject(this.getRoomId(t),e,yt.a.UNIT)}removeRoomObjectUser(t,e){return this.removeRoomObject(t,e,yt.a.UNIT)}createRoomObjectUser(t,e,s){return this.createRoomObjectAndInitialize(t,e,s,yt.a.UNIT)}getRoomObjectFloor(t,e){return this.getObject(this.getRoomId(t),e,yt.a.FLOOR)}createRoomObjectFloor(t,e,s){return this.createRoomObjectAndInitialize(t,e,s,yt.a.FLOOR)}removeRoomObjectFloor(t,e,s=-1,i=!1){const n=this.getRoomInstanceData(t);if(n&&n.removePendingFunitureFloor(e),this._sessionDataManager&&s===this._sessionDataManager.userId&&!x.isBuilderClubId(e)){const s=this.getRoomObject(t,e,yt.a.FLOOR);if(s){const i=this.getRoomObjectScreenLocation(t,e,yt.a.FLOOR,this._activeRoomActiveCanvas);if(i&&1!==s.model.getValue(At.a.FURNITURE_DISABLE_PICKING_ANIMATION)){const t=s.model.getValue(At.a.FURNITURE_TYPE_ID),e=s.model.getValue(At.a.FURNITURE_EXTRAS),n=s.model.getValue(At.a.FURNITURE_DATA_FORMAT),r=Tt.a.getData(n),a=this.getFurnitureFloorIcon(t,null,e,r).data;if(a){const t=h.a.instance.renderer.extract.image(a);if(this.events){const e=new w.a(t,i.x,i.y);e.iconName=M.a.INVENTORY,this.events.dispatchEvent(e)}}}}}this.removeRoomObject(t,e,yt.a.FLOOR),this.setMouseDefault(t,yt.a.FLOOR,e),i&&this._Str_17722(t,"RoomEngine.disposeObjectFurniture()")}getRoomObjectWall(t,e){return this.getObject(this.getRoomId(t),e,yt.a.WALL)}removeRoomObjectWall(t,e,s=-1){if(this._sessionDataManager&&s===this._sessionDataManager.userId&&!x.isBuilderClubId(e)){const s=this.getRoomObject(t,e,yt.a.WALL);if(s&&-1===s.type.indexOf("post_it")&&-1===s.type.indexOf("external_image_wallitem")){const i=this.getRoomObjectScreenLocation(t,e,yt.a.WALL,this._activeRoomActiveCanvas);if(i){const t=s.model.getValue(At.a.FURNITURE_TYPE_ID),e=s.model.getValue(At.a.FURNITURE_DATA),n=this.getFurnitureWallIcon(t,null,e).data;if(n){const t=h.a.instance.renderer.extract.image(n);if(this.events){const e=new w.a(t,i.x,i.y);e.iconName=M.a.INVENTORY,this.events.dispatchEvent(e)}}}}}this.removeRoomObject(t,e,yt.a.WALL),this.updateRoomObjectMask(t,e,!1),this.setMouseDefault(t,yt.a.WALL,e)}createRoomObjectWall(t,e,s){return this.createRoomObjectAndInitialize(t,e,s,yt.a.WALL)}removeRoomObject(t,e,s){const i=this.getRoomInstance(t);if(!i)return null;i.removeRoomObject(e,s),this.events&&this.events.dispatchEvent(new F.a(F.a.REMOVED,t,e,s))}addFurnitureFloor(t,e,s,i,n,r,a,o=NaN,c=-1,h=0,l=0,u="",_=!0,d=!0,g=-1){const m=this.getRoomInstanceData(t);if(!m)return!1;const p=new Ir(e,s,null,i,n,r,a,o,c,h,l,u,_,d,g);return m.addPendingFurnitureFloor(p),!0}addFurnitureFloorByTypeName(t,e,s,i,n,r,a,o=NaN,c=-1,h=0,l=0,u="",_=!0,d=!0,g=-1){const m=this.getRoomInstanceData(t);if(!m)return!1;const p=new Ir(e,0,s,i,n,r,a,o,c,h,l,u,_,d,g);return m.addPendingFurnitureFloor(p),!0}addFurnitureWall(t,e,s,i,n,r,a,o=-1,c=0,h=0,l="",u=!0){const _=this.getRoomInstanceData(t);if(!_)return!1;const d=new Ot.a;d.setString(a);const g=new Ir(e,s,null,i,n,r,d,NaN,o,c,h,l,!0,u);return _.addPendingFurnitureWall(g),!0}updateRoomObjectFloor(t,e,s,i,n,r,a=NaN){const o=this.getRoomObjectFloor(t,e);return!!o&&(o.processUpdateMessage(new c.a(s,i)),o.processUpdateMessage(new dt(n,r,a)),!0)}updateRoomObjectWall(t,e,s,i,n,r=null){const a=this.getRoomObjectWall(t,e);if(!a||!a.logic)return!1;const o=new c.a(s,i),h=new Ot.a,l=new dt(n,h);return h.setString(r),a.logic.processUpdateMessage(o),a.logic.processUpdateMessage(l),this.updateRoomObjectMask(t,e),!0}updateRoomObjectWallItemData(t,e,s){const i=this.getRoomObjectWall(t,e);return!(!i||!i.logic||(i.logic.processUpdateMessage(new pt(s)),0))}updateRoomObjectFloorHeight(t,e,s){const i=this.getRoomObjectFloor(t,e);return!!i&&(i.processUpdateMessage(new mt(null,null,s)),!0)}updateRoomObjectFloorExpiration(t,e,s){const i=this.getRoomObjectFloor(t,e);return!!i&&(i.model.setValue(At.a.FURNITURE_EXPIRY_TIME,s),i.model.setValue(At.a.FURNITURE_EXPIRTY_TIMESTAMP,h.a.instance.time),!0)}updateRoomObjectWallExpiration(t,e,s){const i=this.getRoomObjectWall(t,e);return!!i&&(i.model.setValue(At.a.FURNITURE_EXPIRY_TIME,s),i.model.setValue(At.a.FURNITURE_EXPIRTY_TIMESTAMP,h.a.instance.time),!0)}updateRoomObjectMask(t,e,s=!0){const i=yt.a.WALL+"_"+e,n=this.getRoomObjectWall(t,e);let r=null;if(n&&n.model){if(n.model.getValue(At.a.FURNITURE_USES_PLANE_MASK)>0){const t=n.model.getValue(At.a.FURNITURE_PLANE_MASK_TYPE),e=n.getLocation();r=s?new vt(vt.ADD_MASK,i,t,e):new vt(vt._Str_10260,i)}}else r=new vt(vt._Str_10260,i);const a=this.getRoomOwnObject(t);a&&a.logic&&r&&a.logic.processUpdateMessage(r)}rollRoomObjectFloor(t,e,s,i){const n=this.getRoomObjectFloor(t,e);n&&n.processUpdateMessage(new lt(s,i,null,!!i))}updateRoomObjectWallLocation(t,e,s){const i=this.getRoomObjectWall(t,e);return!!i&&(i.logic&&i.logic.processUpdateMessage(new lt(s,null,null)),this.updateRoomObjectMask(t,e),!0)}addRoomObjectUser(t,e,s,i,n,r,a){if(this.getRoomObjectUser(t,e))return!1;let o=Ct.a.getTypeString(r);o===Ct.a.PET&&(o=this.getPetType(a));const c=this.createRoomObjectUser(t,e,o);return!!c&&(c.processUpdateMessage(new ut(this.fixedUserLocation(t,s),null,i,n,!1,0)),a&&c.processUpdateMessage(new Q(a)),this.events&&this.events.dispatchEvent(new F.a(F.a.ADDED,t,e,yt.a.UNIT)),!0)}updateRoomObjectUserLocation(t,e,s,i,n=!1,r=0,a=null,o=NaN){const c=this.getRoomObjectUser(t,e);if(!c)return!1;s||(s=c.getLocation()),a||(a=c.getDirection()),isNaN(o)&&(o=c.model.getValue(At.a.HEAD_DIRECTION)),c.processUpdateMessage(new ut(this.fixedUserLocation(t,s),this.fixedUserLocation(t,i),a,o,n,r));const h=this._roomSessionManager&&this._roomSessionManager.getSession(t)||null;return h&&h.ownRoomIndex===e&&this._logicFactory.events.dispatchEvent(new W(W.ROAME_MOVE_TO,i)),!0}fixedUserLocation(t,e){if(!e)return null;const s=this.getFurnitureStackingHeightMap(t),i=this.getLegacyWallGeometry(t);if(!s||!i)return e;let n=e.z;const r=s.getTileHeight(e.x,e.y),a=i.getHeight(e.x,e.y);return Math.abs(n-r)<.1&&Math.abs(r-a)<.1&&(n=i._Str_24141(e.x,e.y)),new m.a(e.x,e.y,n)}updateRoomObjectUserAction(t,e,s,i,n=null){const r=this.getRoomObjectUser(t,e);if(!r)return!1;let a=null;switch(s){case At.a.FIGURE_TALK:a=new z(i);break;case At.a.FIGURE_SLEEP:a=new ct(1===i);break;case At.a.FIGURE_IS_TYPING:a=new ht(1===i);break;case At.a.FIGURE_IS_MUTED:a=new et(1===i);break;case At.a.FIGURE_CARRY_OBJECT:a=new j(i,n);break;case At.a.FIGURE_USE_OBJECT:a=new _t(i);break;case At.a.FIGURE_DANCE:a=new Y(i);break;case At.a.FIGURE_GAINED_EXPERIENCE:a=new Z(i);break;case At.a.FIGURE_NUMBER_VALUE:a=new nt(i);break;case At.a.FIGURE_SIGN:a=new ot(i);break;case At.a.FIGURE_EXPRESSION:a=new X(i);break;case At.a.FIGURE_IS_PLAYING_GAME:a=new rt(1===i);break;case At.a.FIGURE_GUIDE_STATUS:a=new tt(i)}return!!a&&(r.processUpdateMessage(a),!0)}updateRoomObjectUserFigure(t,e,s,i=null,n=null,r=!1){const a=this.getRoomObjectUser(t,e);return!!a&&(a.processUpdateMessage(new Q(s,i,n,r)),!0)}updateRoomObjectUserFlatControl(t,e,s){const i=this.getRoomObjectUser(t,e);return!!i&&(i.processUpdateMessage(new J(parseInt(s))),!0)}updateRoomObjectUserEffect(t,e,s,i=0){const n=this.getRoomObjectUser(t,e);return!!n&&(n.processUpdateMessage(new q(s,i)),!0)}updateRoomObjectUserGesture(t,e,s){const i=this.getRoomObjectUser(t,e);return!!i&&(i.processUpdateMessage(new $(s)),!0)}updateRoomObjectUserPetGesture(t,e,s){const i=this.getRoomObjectUser(t,e);return!!i&&(i.processUpdateMessage(new it(s)),!0)}updateRoomObjectUserPosture(t,e,s,i=null){const n=this.getRoomObjectUser(t,e);return!!n&&(n.processUpdateMessage(new at(s,i)),!0)}updateRoomObjectUserOwn(t,e){const s=this.getRoomObjectUser(t,e);s&&s.processUpdateMessage(new st)}useRoomObject(t,e){const s=this.getRoomObject(this._activeRoomId,t,e);if(s){const t=s.logic;if(t)return t.useObject(),!0}return!1}objectInitialized(e,s,i){const n=this.getRoomIdFromString(e);i===yt.a.WALL&&this.updateRoomObjectMask(n,s);const r=this.getRoomObject(n,s,i);if(r&&r.model&&r.logic){const t=r.model.getValue(At.a.FURNITURE_DATA_FORMAT);if(!isNaN(t)){const e=Tt.a.getData(t);e.initializeFromRoomObjectModel(r.model),r.processUpdateMessage(new dt(r.getState(0),e))}this.events.dispatchEvent(new F.a(F.a.CONTENT_UPDATED,n,s,i))}e!==t.TEMPORARY_ROOM&&this._Str_21543(n,r)}changeObjectModelData(t,e,s,i,n){const r=this.getObject(this.getRoomId(t),e,s);if(!r||!r.logic)return!1;const a=new ft(i,n);return r.processUpdateMessage(a),!0}changeObjectState(t,e,s){const i=this.getObject(this.getRoomId(t),e,s);if(!i||!i.model)return;let n=i.model.getValue(At.a.FURNITURE_AUTOMATIC_STATE_INDEX);isNaN(n)?n=1:n+=1,i.model.setValue(At.a.FURNITURE_AUTOMATIC_STATE_INDEX,n);const r=i.model.getValue(At.a.FURNITURE_DATA_FORMAT),a=Tt.a.getData(r);a.initializeFromRoomObjectModel(i.model),i.logic&&i.logic.processUpdateMessage(new dt(n,a))}loadRoomObjectBadgeImage(t,e,s,i,n=!0){if(!this._sessionDataManager)return;const r=this.getRoomObjectFloor(t,e);if(!r||!r.logic)return;let a=n?this._sessionDataManager.loadGroupBadgeImage(i):this._sessionDataManager.loadBadgeImage(i);if(a)this.putBadgeInObjectAssets(r,i,n);else{a="loading_icon",this._badgeListenerObjects||(this._badgeListenerObjects=new Map),this._badgeListenerObjects.size||this._sessionDataManager.events.addEventListener(N.a.IMAGE_READY,this.onBadgeImageReadyEvent);let t=this._badgeListenerObjects.get(i);t||(t=[]),t.push(new Cr(r,n)),this._badgeListenerObjects.set(i,t)}r.logic.processUpdateMessage(new gt(i,a))}onBadgeImageReadyEvent(t){if(!this._sessionDataManager)return;const e=this._badgeListenerObjects&&this._badgeListenerObjects.get(t.badgeId);if(e){for(const s of e){if(!s)continue;this.putBadgeInObjectAssets(s.object,t.badgeId,s.groupBadge);const e=s.groupBadge?this._sessionDataManager.loadGroupBadgeImage(t.badgeId):this._sessionDataManager.loadBadgeImage(t.badgeId);s.object&&s.object.logic&&s.object.logic.processUpdateMessage(new gt(t.badgeId,e))}this._badgeListenerObjects.delete(t.badgeId),this._badgeListenerObjects.size||this._sessionDataManager.events.removeEventListener(N.a.IMAGE_READY,this.onBadgeImageReadyEvent)}}putBadgeInObjectAssets(t,e,s=!1){if(!this._roomContentLoader||!this._sessionDataManager)return;const i=s?this._sessionDataManager.loadGroupBadgeImage(e):this._sessionDataManager.loadBadgeImage(e),n=s?this._sessionDataManager.getGroupBadgeImage(e):this._sessionDataManager.getBadgeImage(e);n&&this._roomContentLoader.addAssetToCollection(t.type,i,n)}dispatchMouseEvent(e,s,i,n,r,a,c,h){const u=this.getRoomInstanceRenderingCanvas(this._activeRoomId,e);if(!u)return;const _=this.getRenderingCanvasOverlay(u),d=this._Str_16498(_,t.OBJECT_ICON_SPRITE);if(d){const t=d.getLocalBounds();d.x=s-t.width/2,d.y=i-t.height/2}if(!this._Str_25871(u,s,i,n,r,a,c)&&!u._Str_21232(s,i,n,r,a,c,h)){let e=null;n===l.a.MOUSE_CLICK?(this.events&&this.events.dispatchEvent(new F.a(F.a.DESELECTED,this._activeRoomId,-1,yt.a.MINIMUM)),e=o.CLICK):n===l.a.MOUSE_MOVE?e=o.MOUSE_MOVE:n===l.a.MOUSE_DOWN?e=o.MOUSE_DOWN:n===l.a.MOUSE_UP&&(e=o.MOUSE_UP),this._roomObjectEventHandler.handleRoomObjectEvent(new o(e,this.getRoomObject(this._activeRoomId,t.ROOM_OBJECT_ID,yt.a.ROOM),null,r),this._activeRoomId)}this._activeRoomActiveCanvas=e,this._activeRoomActiveCanvasMouseX=s,this._activeRoomActiveCanvasMouseY=i}_Str_25871(e,s,i,n,r,a,o){let c=s-this._activeRoomActiveCanvasMouseX,h=i-this._activeRoomActiveCanvasMouseY;if(n===l.a.MOUSE_DOWN)r||a||o||this.isDecorating||this._roomAllowsDragging&&(this._activeRoomIsDragged=!0,this._activeRoomWasDragged=!1,this._activeRoomDragStartX=this._activeRoomActiveCanvasMouseX,this._activeRoomDragStartY=this._activeRoomActiveCanvasMouseY);else if(n===l.a.MOUSE_UP){if(this._activeRoomIsDragged&&(this._activeRoomIsDragged=!1,this._activeRoomWasDragged)){const t=this.getRoomInstanceData(this._activeRoomId);if(t){const s=t.roomCamera;s&&(this._Str_11555&&(s._Str_12536||(s._Str_8564=!1,s._Str_8690=!1),s._Str_25467(new m.a(-e.screenOffsetX,-e.screenOffsetY))),this._roomDraggingAlwaysCenters&&s.reset())}}}else if(n===l.a.MOUSE_MOVE)this._activeRoomIsDragged&&(this._activeRoomWasDragged||(c=s-this._activeRoomDragStartX,h=i-this._activeRoomDragStartY,(c<=-t.DRAG_THRESHOLD||c>=t.DRAG_THRESHOLD||h<=-t.DRAG_THRESHOLD||h>=t.DRAG_THRESHOLD)&&(this._activeRoomWasDragged=!0),c=0,h=0),0==c&&0==h||(this._activeRoomDragX+=c,this._activeRoomDragY+=h,this._activeRoomWasDragged=!0));else if((n===l.a.MOUSE_CLICK||n===l.a.DOUBLE_CLICK)&&(this._activeRoomIsDragged=!1,this._activeRoomWasDragged))return this._activeRoomWasDragged=!1,!0;return!1}updateMousePointer(t,e,s){const i=this.getRoomObjectCategoryForType(s);switch(t){case k.MOUSE_BUTTON:return void this.setMouseButton(this._activeRoomId,i,e);default:return void this.setMouseDefault(this._activeRoomId,i,e)}}setMouseButton(t,e,s){if(!this._roomSessionManager)return;const i=this._roomSessionManager.getSession(t);if(i&&(e!==yt.a.FLOOR&&e!==yt.a.WALL||i.controllerLevel>=D.a.GUEST)){const i=this.getRoomInstanceData(t);i&&i._Str_16810(e+"_"+s)&&(this._mouseCursorUpdate=!0)}}setMouseDefault(t,e,s){if(!this._roomSessionManager)return;const i=this.getRoomInstanceData(t);i&&i._Str_11959(e+"_"+s)&&(this._mouseCursorUpdate=!0)}processRoomObjectOperation(t,e,s){if(!this._roomObjectEventHandler)return!1;this._roomObjectEventHandler.processRoomObjectOperation(this._activeRoomId,t,e,s)}processRoomObjectWallOperation(t,e,s,i){if(!this._roomObjectEventHandler)return!1;e===yt.a.WALL&&this._roomObjectEventHandler.processRoomObjectWallOperation(this._activeRoomId,t,e,s,i)}processRoomObjectFloorOperation(t,e,s,i){if(!this._roomObjectEventHandler)return!1;e===yt.a.FLOOR&&this._roomObjectEventHandler.processRoomObjectFloorOperation(this._activeRoomId,t,s,i)}processRoomObjectEvent(t){if(!this._roomObjectEventHandler)return;const e=this.getRoomObjectRoomId(t.object);if(!e)return;const s=this.getRoomIdFromString(e);this._roomObjectEventHandler.handleRoomObjectEvent(t,s)}processRoomObjectPlacement(t,e,s,i,n=null,r=null,a=-1,o=-1,c=null){const h=this.getRoomInstance(this._activeRoomId);return!(!h||0!==h.model.getValue(Si.a.ROOM_IS_PUBLIC))&&!!this._roomObjectEventHandler&&this._roomObjectEventHandler.processRoomObjectPlacement(t,this._activeRoomId,e,s,i,n,r,a,o,c)}getRoomObjectScreenLocation(t,e,s,i=-1){-1==i&&(i=this._activeRoomActiveCanvas);const n=this.getRoomInstanceGeometry(t,i);if(!n)return null;const r=this.getRoomObject(t,e,s);if(!r)return null;const a=n.getScreenPoint(r.getLocation());if(!a)return null;const o=this.getRoomInstanceRenderingCanvas(t,i);return o?(a.x=a.x*o.scale,a.y=a.y*o.scale,a.x+=o.width/2+o.screenOffsetX,a.y+=o.height/2+o.screenOffsetY,a):null}selectRoomObject(t,e,s){this._roomObjectEventHandler&&this._roomObjectEventHandler._Str_17481(t,e,s)}_Str_8675(){this._roomObjectEventHandler&&this._roomObjectEventHandler._Str_8675(this._activeRoomId)}_Str_24651(t,e,s,n=1){if(!t||!s)return;let r=this._Str_16498(t,e);return r?null:(r=i.Sprite.from(s),r.name=e,r.scale.set(n),t.addChild(r),r)}onRoomContentLoaded(t,e,s){if(!this._roomContentLoader||-1===t)return;this._thumbnailObjectIdBank._Str_15187(t-1);const i=this._thumbnailCallbacks.get(e);if(i){this._thumbnailCallbacks.delete(e);const s=this._roomContentLoader.getImage(e);if(s)for(const e of i)e&&e.imageReady(t,null,s)}}_Str_16645(e,s,i,n=null,r=null,a=-1,o=-1,c=null){let h=null,l=0,u=null;if(i)u=this.getRoomObjectImage(this._activeRoomId,e,s,new m.a,1,null);else if(this._roomContentLoader)if(s===yt.a.FLOOR?(h=this._roomContentLoader.getFurnitureFloorNameForTypeId(e),l=this._roomContentLoader.getFurnitureFloorColorIndex(e)):s===yt.a.WALL&&(h=this._roomContentLoader.getFurnitureWallNameForTypeId(e,n),l=this._roomContentLoader.getFurnitureWallColorIndex(e)),s===yt.a.UNIT)if(h=Ct.a.getTypeString(e),"pet"===h){h=this.getPetType(n);const t=new A.a(n);u=this.getRoomObjectPetImage(t.typeId,t.paletteId,t.color,new m.a(180),64,null,!0,0,t.customParts,c)}else u=this.getGenericRoomObjectImage(h,n,new m.a(180),64,null,0,null,r,a,o,c);else u=this.getGenericRoomObjectImage(h,l.toString(),new m.a,1,null,0,n,r,a,o,c);if(!u||!u.data)return;const _=this.getActiveRoomInstanceRenderingCanvas();if(!_)return;const d=this.getRenderingCanvasOverlay(_);this._Str_21215(d,t.OBJECT_ICON_SPRITE);const g=this._Str_24651(d,t.OBJECT_ICON_SPRITE,u.data,1);g&&(g.x=this._activeRoomActiveCanvasMouseX-u.data.width/2,g.y=this._activeRoomActiveCanvasMouseY-u.data.height/2)}getRoomObjectImage(t,e,s,i,n,r,a=0){if(!this._roomManager)return null;let o=-1,c=null,h=null,l="",u=null;const _=this.getRoomId(t),d=this._roomManager.getRoomInstance(_);if(d){const t=d.getRoomObject(e,s);if(t&&t.model)switch(o=t.id,c=t.type,s){case yt.a.FLOOR:case yt.a.WALL:{l=t.model.getValue(At.a.FURNITURE_COLOR).toString(),u=t.model.getValue(At.a.FURNITURE_EXTRAS);const e=t.model.getValue(At.a.FURNITURE_DATA_FORMAT);e!==Ot.a.FORMAT_KEY&&(h=Tt.a.getData(e),h.initializeFromRoomObjectModel(t.model));break}case yt.a.UNIT:l=t.model.getValue(At.a.FIGURE)}}return this.getGenericRoomObjectImage(c,l,i,n,r,a,u,h,-1,-1,null,o)}getFurnitureFloorIconUrl(t){let e=null,s="";return this._roomContentLoader?(e=this._roomContentLoader.getFurnitureFloorNameForTypeId(t),s=this._roomContentLoader.getFurnitureFloorColorIndex(t).toString(),this._roomContentLoader.getAssetIconUrl(e,s)):null}getFurnitureFloorIcon(t,e,s=null,i=null){return this.getFurnitureFloorImage(t,new m.a,1,e,0,s,-1,-1,i)}getFurnitureWallIconUrl(t,e=null){let s=null,i="";return this._roomContentLoader?(s=this._roomContentLoader.getFurnitureWallNameForTypeId(t,e),i=this._roomContentLoader.getFurnitureWallColorIndex(t).toString(),this._roomContentLoader.getAssetIconUrl(s,i)):null}getFurnitureWallIcon(t,e,s=null){return this.getFurnitureWallImage(t,new m.a,1,e,0,s)}getFurnitureFloorImage(t,e,s,i,n=0,r=null,a=-1,o=-1,c=null){let h=null,l="";return this._roomContentLoader&&(h=this._roomContentLoader.getFurnitureFloorNameForTypeId(t),l=this._roomContentLoader.getFurnitureFloorColorIndex(t).toString()),1===s&&i?this.getGenericRoomObjectThumbnail(h,l,i,r,c):this.getGenericRoomObjectImage(h,l,e,s,i,n,r,c,a,o)}getFurnitureWallImage(t,e,s,i,n=0,r=null,a=-1,o=-1){let c=null,h="";return this._roomContentLoader&&(c=this._roomContentLoader.getFurnitureWallNameForTypeId(t),h=this._roomContentLoader.getFurnitureWallColorIndex(t).toString()),1===s&&i?this.getGenericRoomObjectThumbnail(c,h,i,r,null):this.getGenericRoomObjectImage(c,h,e,s,i,n,r,null,a,o)}getRoomObjectPetImage(t,e,s,i,n,r,a=!0,o=0,c=null,h=null){let l=null,u=t+" "+e+" "+s.toString(16);if(a||(u+=" head"),c){u=u+" "+c.length;for(const t of c)u=u+" "+t.layerId+" "+t.partId+" "+t.paletteId}return this._roomContentLoader&&(l=this._roomContentLoader.getPetNameForType(t)),this.getGenericRoomObjectImage(l,u,i,n,r,o,null,null,-1,-1,h)}getGenericRoomObjectImage(e,s,i,n,r,a=0,o=null,c=null,h=-1,l=-1,u=null,_=-1){if(!this._roomManager)return null;const d=new G;if(d.id=-1,!this._ready||!e)return d;let p=this._roomManager.getRoomInstance(t.TEMPORARY_ROOM);if(!p&&(p=this._roomManager.createRoomInstance(t.TEMPORARY_ROOM),!p))return d;let f=this._imageObjectIdBank._Str_19709();const E=this.getRoomObjectCategoryForType(e);if(f<0)return d;f++;const S=p.createRoomObjectAndInitalize(f,e,E);if(!S||!S.model||!S.logic)return d;const v=S.model;switch(E){case yt.a.FLOOR:case yt.a.WALL:v.setValue(At.a.FURNITURE_COLOR,parseInt(s)),v.setValue(At.a.FURNITURE_EXTRAS,o);break;case yt.a.UNIT:if(e===Ct.a.USER||e===Ct.a.BOT||e===Ct.a.RENTABLE_BOT||e===Ct.a.PET)v.setValue(At.a.FIGURE,s);else{const t=new A.a(s);v.setValue(At.a.PET_PALETTE_INDEX,t.paletteId),v.setValue(At.a.PET_COLOR,t.color),t.headOnly&&v.setValue(At.a.PET_HEAD_ONLY,1),t.hasCustomParts&&(v.setValue(At.a.PET_CUSTOM_LAYER_IDS,t.customLayerIds),v.setValue(At.a.PET_CUSTOM_PARTS_IDS,t.customPartIds),v.setValue(At.a.PET_CUSTOM_PALETTE_IDS,t.customPaletteIds)),u&&v.setValue(At.a.FIGURE_POSTURE,u)}}S.setDirection(i);const b=S.visualization;if(!b)return p.removeRoomObject(f,E),d;(h>-1||c)&&(c&&""!==c.getLegacyString()?S.logic.processUpdateMessage(new dt(parseInt(c.getLegacyString()),c)):S.logic.processUpdateMessage(new dt(h,c)));const I=new g.a(n,new m.a(-135,30,0),new m.a(11,11,5));if(b.update(I,0,!0,!1),l>0){let t=0;for(;t<l;)b.update(I,0,!0,!1),t++}const R=b.getImage(a,_);if(d.data=R,d.id=f,!this.isRoomContentTypeLoaded(e)&&r){let t=this._imageCallbacks.get(f.toString());t||(t=[],this._imageCallbacks.set(f.toString(),t)),t.push(r),v.setValue(At.a.IMAGE_QUERY_SCALE,n)}else p.removeRoomObject(f,E),this._imageObjectIdBank._Str_15187(f-1),d.id=0;return I.dispose(),d}getGenericRoomObjectThumbnail(e,s,i,n=null,r=null){if(!this._roomManager)return null;const a=new G;if(a.id=-1,!this._ready||!e)return a;let o=this._roomManager.getRoomInstance(t.TEMPORARY_ROOM);if(!o&&(o=this._roomManager.createRoomInstance(t.TEMPORARY_ROOM),!o))return a;let c=this._thumbnailObjectIdBank._Str_19709();if(this.getRoomObjectCategoryForType(e),c<0)return a;c++,a.id=c,a.data=null,a.image=null;const h=[e,s].join("_"),l=this._roomContentLoader.getImage(h);if(!l&&i){let t=this._thumbnailCallbacks.get(h);t||(t=[],this._thumbnailCallbacks.set(h,t),this._roomContentLoader.downloadImage(c,e,s,null)),t.push(i)}else l&&(a.image=l),this._thumbnailObjectIdBank._Str_15187(c-1),a.id=0;return a}initalizeTemporaryObjectsByType(e,s){const i=this._roomManager.getRoomInstance(t.TEMPORARY_ROOM);if(!i||!this._roomContentLoader)return;const n=this._roomContentLoader.getCategoryForType(e),r=i.getManager(n);let a=null,o=0;if(r&&r.objects.length)for(const t of r.objects.getValues())if(t&&t.model&&t.type===e){const e=t.id,s=t.visualization;let r=null;if(s){const e=t.model.getValue(At.a.IMAGE_QUERY_SCALE);a&&o!==e&&(a.dispose(),a=null),a||(o=e,a=new g.a(e,new m.a(-135,30,0),new m.a(11,11,5))),s.update(a,0,!0,!1),r=s.image}i.removeRoomObject(e,n),this._imageObjectIdBank._Str_15187(e-1);const c=this._imageCallbacks.get(e.toString());if(c){this._imageCallbacks.delete(e.toString());for(const t of c)t&&(r?t.imageReady(e,r):t.imageFailed(e))}}a&&a.dispose()}_Str_7972(e){const s=this.getActiveRoomInstanceRenderingCanvas();if(!s)return;const i=this.getRenderingCanvasOverlay(s),n=this._Str_16498(i,t.OBJECT_ICON_SPRITE);n&&(n.visible=e)}_Str_17948(){const e=this.getActiveRoomInstanceRenderingCanvas();if(!e)return;const s=this.getRenderingCanvasOverlay(e);this._Str_21215(s,t.OBJECT_ICON_SPRITE)}getRenderingCanvasOverlay(e){if(!e)return null;const s=e.master;return s&&s.getChildByName(t.OVERLAY)||null}_Str_21215(t,e){if(!t)return!1;let s=t.children.length-1;for(;s>=0;){const i=t.getChildAt(s);if(i&&i.name===e){if(t.removeChildAt(s),i.children.length){const t=i.getChildAt(0);t.parent.removeChild(t),t.destroy()}return!0}s--}return!1}_Str_16498(t,e){if(!t)return null;let s=t.children.length-1;for(;s>=0;){const i=t.getChildAt(s);if(i&&i.name===e)return i;s--}return null}_Str_21072(t,e){if(this._ready){const s=this.getRoomId(t),i=this._roomManager.getRoomInstance(s);if(i)return i.getRoomObjectsForCategory(e)}return[]}_Str_21543(t,e){const s=this.getRoomInstanceData(t).tileObjectMap;s&&s._Str_21192(e)}_Str_17722(t,e){const s=this.getRoomInstanceData(t).tileObjectMap;s&&s.populate(this._Str_21072(t,yt.a.FLOOR))}_Str_9972(t,e,s=!1,i=!0,n=!1,r=-1){let a=null;if(a=r>-1?this.getRoomInstanceRenderingCanvas(this._activeRoomId,r):this.getActiveRoomInstanceRenderingCanvas(),!a)return null;n&&a._Str_20787();let o=-1;i||null==this._roomSessionManager.getSession(this._activeRoomId)||(o=this._roomSessionManager.getSession(this._activeRoomId).ownRoomIndex);const c=new Ar,h=c._Str_4536(t,a,this,o),l=c._Str_24177(this),u=c._Str_22985(t,a,this,e);return n&&a._Str_22174(),console.log(h,l,u),null}createRoomScreenshot(t,e){const s=this.getRoomInstanceRenderingCanvas(t,e);if(!s)return;const i=s.getDisplayAsTexture(),n=h.a.instance.renderer.extract.base64(i),r=new Image;r.src=n,window.open("").document.write(r.outerHTML)}objectsInitialized(t){const e=this.getRoomIdFromString(t);this.events.dispatchEvent(new P.a(P.a.OBJECTS_INITIALIZED,e))}getRoomId(t){return t.toString()}getRoomIdFromString(t){if(!t)return-1;const e=t.split("_");return e.length<=0?-1:parseInt(e[0])}getRoomObjectRoomId(t){return t&&t.model?t.model.getValue(At.a.OBJECT_ROOM_ID):null}getPetTypeId(t){let e=-1;if(t){const s=t.split(" ");s.length>1&&(e=parseInt(s[0]))}return e}getPetType(t){if(!t)return null;const e=t.split(" ");if(e.length>1){const t=parseInt(e[0]);return this._roomContentLoader?this._roomContentLoader.getPetNameForType(t):"pet"}return null}isRoomContentTypeLoaded(t){return!!this._roomContentLoader&&null!==this._roomContentLoader.getCollection(t)}modifyRoomObjectData(t,e,s,i){return!(!this._roomObjectEventHandler||e!==yt.a.WALL)&&this._roomObjectEventHandler.modifyWallItemData(this._activeRoomId,t,s,i)}deleteRoomObject(t,e){return!(!this._roomObjectEventHandler||e!==yt.a.WALL)&&this._roomObjectEventHandler.deleteWallItem(this._activeRoomId,t)}get connection(){return this._communication.connection}get sessionDataManager(){return this._sessionDataManager}set sessionDataManager(t){this._sessionDataManager=t}get roomSessionManager(){return this._roomSessionManager}set roomSessionManager(t){this._roomSessionManager=t}get roomManager(){return this._roomManager}set roomManager(t){this._roomManager=t}get objectEventHandler(){return this._roomObjectEventHandler}get roomRendererFactory(){return this._roomRendererFactory}get visualizationFactory(){return this._visualizationFactory}get logicFactory(){return this._logicFactory}get activeRoomId(){return this._activeRoomId}get ready(){return this._ready}get roomContentLoader(){return this._roomContentLoader}get isDecorating(){if(!this._roomSessionManager)return!1;const t=this._roomSessionManager.getSession(this._activeRoomId);return t&&t.isDecorating||!1}get _Str_11555(){return!0}get selectedAvatarId(){return this._roomObjectEventHandler?this._roomObjectEventHandler.selectedAvatarId:-1}getRoomObjectCount(t,e){return null==this._roomManager?0:this._roomManager.getRoomInstance(t.toString()).getRoomObjectsForCategory(e).length}}return t.ROOM_OBJECT_ID=-1,t.ROOM_OBJECT_TYPE="room",t.CURSOR_OBJECT_ID=-2,t.CURSOR_OBJECT_TYPE="tile_cursor",t.ARROW_OBJECT_ID=-3,t.ARROW_OBJECT_TYPE="selection_arrow",t.OVERLAY="overlay",t.OBJECT_ICON_SPRITE="object_icon_sprite",t.DRAG_THRESHOLD=15,t.TEMPORARY_ROOM="temporary_room",t})()},"3md2":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._figure=null,this._gender=null,!0}parse(t){return!!t&&(this._figure=t.readString(),this._gender=t.readString(),!0)}get figure(){return this._figure}get gender(){return this._gender}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"3r1x":function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t extends Event{}return t.COMPLETE="NITRO_COMPLETE",t})()},"3xex":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._isOpen=!1,this._onShutdown=!1,this._isAuthenticUser=!1,!0}parse(t){return!!t&&(this._isOpen=t.readBoolean(),this._onShutdown=t.readBoolean(),t.bytesAvailable&&(this._isAuthenticUser=t.readBoolean()),!0)}get isOpen(){return this._isOpen}get onShutdown(){return this._onShutdown}get isAuthenticUser(){return this._isAuthenticUser}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"443f":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._homeRoomId=-1,this._roomIdToEnter=-1,!0}parse(t){return!!t&&(this._homeRoomId=t.readInt(),this._roomIdToEnter=t.readInt(),!0)}get homeRoomId(){return this._homeRoomId}get roomIdToEnter(){return this._roomIdToEnter}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"4NUc":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._messages=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._messages.push(t.readString()),e--;return!0}get messages(){return this._messages}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"4R/C":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i,n,r,a){this._data=[t,e,s,i,n,r,a]}getMessageArray(){return this._data}dispose(){}}},"4Yln":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},"4gvq":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"4hNi":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"4hT9":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO"),n=s("QQU2");class r extends i.a{constructor(t){super(t,n.a)}get _Str_4963(){return this.getParser()._Str_4963}getParser(){return this.parser}}},"4k6Q":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(...t){this._data=[t.length,...t]}getMessageArray(){return this._data}dispose(){}}},"4pnK":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"4vrv":function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("Ns5P");let n=(()=>{class t extends i.a{constructor(t,e,s=null){super(t,e),this._message=s}get message(){return this._message}}return t.RSEME_KICKED="RSEME_KICKED",t.RSEME_PETS_FORBIDDEN_IN_HOTEL="RSEME_PETS_FORBIDDEN_IN_HOTEL",t.RSEME_PETS_FORBIDDEN_IN_FLAT="RSEME_PETS_FORBIDDEN_IN_FLAT",t.RSEME_MAX_PETS="RSEME_MAX_PETS",t.RSEME_MAX_NUMBER_OF_OWN_PETS="RSEME_MAX_NUMBER_OF_OWN_PETS",t.RSEME_NO_FREE_TILES_FOR_PET="RSEME_NO_FREE_TILES_FOR_PET",t.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET="RSEME_SELECTED_TILE_NOT_FREE_FOR_PET",t.RSEME_BOTS_FORBIDDEN_IN_HOTEL="RSEME_BOTS_FORBIDDEN_IN_HOTEL",t.RSEME_BOTS_FORBIDDEN_IN_FLAT="RSEME_BOTS_FORBIDDEN_IN_FLAT",t.RSEME_BOT_LIMIT_REACHED="RSEME_BOT_LIMIT_REACHED",t.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT="RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT",t.RSEME_BOT_NAME_NOT_ACCEPTED="RSEME_BOT_NAME_NOT_ACCEPTED",t})()},"5+UO":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._callBack=t,this._parserClass=e,this._parser=null,this._connection=null}dispose(){this._callBack=null,this._parserClass=null,this._parser=null,this._connection=null}get callBack(){return this._callBack}get parserClass(){return this._parserClass}get parser(){return this._parser}set parser(t){this._parser=t}get connection(){return this._connection}set connection(t){this._connection=t}}},"5BHI":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._id=-1,this._name=null,this._visible=!1,!0}parse(t){return!!t&&(this._id=t.readInt(),this._name=t.readString(),this._visible=t.readBoolean(),!0)}get id(){return this._id}get name(){return this._name}get visible(){return this._visible}}class r{flush(){return this._categories=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._categories.push(new n(t)),e--;return!0}get categories(){return this._categories}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"5Cat":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._itemId=0,!0}parse(t){return!!t&&(this._itemId=t.readInt(),!0)}get itemId(){return this._itemId}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"5F4d":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._id=-1,this._code=null,this._filter=null,this._localization=null,!0}parse(t){return!!t&&(this._id=t.readInt(),this._code=t.readString(),this._filter=t.readString(),this._localization=t.readString(),!0)}get id(){return this._id}get code(){return this._code}get filter(){return this._filter}get localization(){return this._localization}}},"5RE+":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("J0ap");class r{flush(){return this._items=[],!0}parse(t){return!!t&&(this._items.push(new n.a(t)),!0)}get items(){return this._items}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"5TOT":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e=null){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},"5r5K":function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("Hs+C");let n=(()=>{class t extends i.a{constructor(t,e,s,i,n=null){super(t,e,s,i),this._widget=n}get widget(){return this._widget}}return t.OPEN_WIDGET="RETWE_OPEN_WIDGET",t.CLOSE_WIDGET="RETWE_CLOSE_WIDGET",t.OPEN_FURNI_CONTEXT_MENU="RETWE_OPEN_FURNI_CONTEXT_MENU",t.CLOSE_FURNI_CONTEXT_MENU="RETWE_CLOSE_FURNI_CONTEXT_MENU",t.REQUEST_PLACEHOLDER="RETWE_REQUEST_PLACEHOLDER",t.REQUEST_CREDITFURNI="RETWE_REQUEST_CREDITFURNI",t.REQUEST_STICKIE="RETWE_REQUEST_STICKIE",t.REQUEST_PRESENT="RETWE_REQUEST_PRESENT",t.REQUEST_TROPHY="RETWE_REQUEST_TROPHY",t.REQUEST_TEASER="RETWE_REQUEST_TEASER",t.REQUEST_ECOTRONBOX="RETWE_REQUEST_ECOTRONBOX",t.REQUEST_DIMMER="RETWE_REQUEST_DIMMER",t.REMOVE_DIMMER="RETWE_REMOVE_DIMMER",t.REQUEST_CLOTHING_CHANGE="RETWE_REQUEST_CLOTHING_CHANGE",t.REQUEST_PLAYLIST_EDITOR="RETWE_REQUEST_PLAYLIST_EDITOR",t.REQUEST_MANNEQUIN="RETWE_REQUEST_MANNEQUIN",t.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG="ROWRE_REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG",t.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG="ROWRE_REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG",t.REQUEST_BACKGROUND_COLOR="RETWE_REQUEST_BACKGROUND_COLOR",t.REQUEST_MYSTERYBOX_OPEN_DIALOG="RETWE_REQUEST_MYSTERYBOX_OPEN_DIALOG",t.REQUEST_EFFECTBOX_OPEN_DIALOG="RETWE_REQUEST_EFFECTBOX_OPEN_DIALOG",t.REQUEST_MYSTERYTROPHY_OPEN_DIALOG="RETWE_REQUEST_MYSTERYTROPHY_OPEN_DIALOG",t.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING="RETWE_REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING",t.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED="RETWE_REQUEST_ACHIEVEMENT_RESOLUTION_FAILED",t.REQUEST_FRIEND_FURNITURE_CONFIRM="RETWE_REQUEST_FRIEND_FURNITURE_CONFIRM",t.REQUEST_FRIEND_FURNITURE_ENGRAVING="RETWE_REQUEST_FRIEND_FURNITURE_ENGRAVING",t.REQUEST_BADGE_DISPLAY_ENGRAVING="RETWE_REQUEST_BADGE_DISPLAY_ENGRAVING",t.REQUEST_HIGH_SCORE_DISPLAY="RETWE_REQUEST_HIGH_SCORE_DISPLAY",t.REQUEST_HIDE_HIGH_SCORE_DISPLAY="RETWE_REQUEST_HIDE_HIGH_SCORE_DISPLAY",t.REQUEST_INTERNAL_LINK="RETWE_REQUEST_INTERNAL_LINK",t.REQUEST_ROOM_LINK="RETWE_REQUEST_ROOM_LINK",t})()},"6RUH":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},"6X5G":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"6etz":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO"),n=s("DV2U");class r extends i.a{constructor(t){super(t,n.a)}getParser(){return this.parser}}},"6j78":function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.INFOSTAND_EXTRA_PARAM="RWEIEP_INFOSTAND_EXTRA_PARAM",t.JUKEBOX="RWEIEP_JUKEBOX",t.USABLE_PRODUCT="RWEIEP_USABLE_PRODUCT",t.SONGDISK="RWEIEP_SONGDISK",t.CRACKABLE_FURNI="RWEIEP_CRACKABLE_FURNI",t.BRANDING_OPTIONS="RWEIEP_BRANDING_OPTIONS",t.USABLE="RWEIEP_USABLE",t})()},"6u0Z":function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("y81I");let n=(()=>{class t extends i.a{constructor(t,e){super(t,e)}}return t.OPEN_WIDGET="ROWRE_OPEN_WIDGET",t.CLOSE_WIDGET="ROWRE_CLOSE_WIDGET",t.OPEN_FURNI_CONTEXT_MENU="ROWRE_OPEN_FURNI_CONTEXT_MENU",t.CLOSE_FURNI_CONTEXT_MENU="ROWRE_CLOSE_FURNI_CONTEXT_MENU",t.PLACEHOLDER="ROWRE_PLACEHOLDER",t.CREDITFURNI="ROWRE__CREDITFURNI",t.STICKIE="ROWRE__STICKIE",t.PRESENT="ROWRE_PRESENT",t.TROPHY="ROWRE_TROPHY",t.TEASER="ROWRE_TEASER",t.ECOTRONBOX="ROWRE_ECOTRONBOX",t.DIMMER="ROWRE_DIMMER",t.WIDGET_REMOVE_DIMMER="ROWRE_WIDGET_REMOVE_DIMMER",t.CLOTHING_CHANGE="ROWRE_CLOTHING_CHANGE",t.JUKEBOX_PLAYLIST_EDITOR="ROWRE_JUKEBOX_PLAYLIST_EDITOR",t.MANNEQUIN="ROWRE_MANNEQUIN",t.PET_PRODUCT_MENU="ROWRE_PET_PRODUCT_MENU",t.GUILD_FURNI_CONTEXT_MENU="ROWRE_GUILD_FURNI_CONTEXT_MENU",t.MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG="ROWRE_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG",t.PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG="ROWRE_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG",t.BACKGROUND_COLOR="ROWRE_BACKGROUND_COLOR",t.MYSTERYBOX_OPEN_DIALOG="ROWRE_MYSTERYBOX_OPEN_DIALOG",t.EFFECTBOX_OPEN_DIALOG="ROWRE_EFFECTBOX_OPEN_DIALOG",t.MYSTERYTROPHY_OPEN_DIALOG="ROWRE_MYSTERYTROPHY_OPEN_DIALOG",t.ACHIEVEMENT_RESOLUTION_OPEN="ROWRE_ACHIEVEMENT_RESOLUTION_OPEN",t.ACHIEVEMENT_RESOLUTION_ENGRAVING="ROWRE_ACHIEVEMENT_RESOLUTION_ENGRAVING",t.ACHIEVEMENT_RESOLUTION_FAILED="ROWRE_ACHIEVEMENT_RESOLUTION_FAILED",t.FRIEND_FURNITURE_CONFIRM="ROWRE_FRIEND_FURNITURE_CONFIRM",t.FRIEND_FURNITURE_ENGRAVING="ROWRE_FRIEND_FURNITURE_ENGRAVING",t.BADGE_DISPLAY_ENGRAVING="ROWRE_BADGE_DISPLAY_ENGRAVING",t.HIGH_SCORE_DISPLAY="ROWRE_HIGH_SCORE_DISPLAY",t.HIDE_HIGH_SCORE_DISPLAY="ROWRE_HIDE_HIGH_SCORE_DISPLAY",t.INERNAL_LINK="ROWRE_INTERNAL_LINK",t.ROOM_LINK="ROWRE_ROOM_LINK",t})()},"6vif":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"746L":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("OiFD");class r{flush(){return this._fragment=null,!0}parse(t){this._totalFragments=t.readInt(),this._fragmentNumber=t.readInt();let e=t.readInt();for(this._fragment=new Map;e>0;){const s=new n.a(t);this._fragment.set(s.id,s),e--}return!0}get totalFragments(){return this._totalFragments}get fragmentNumber(){return this._fragmentNumber}get fragment(){return this._fragment}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"75Vd":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"7KS0":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"7d3m":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"7sb4":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._resultType=0,this._messageText=null,!0}parse(t){return!!t&&(this._resultType=t.readInt(),this._messageText=t.readString(),!0)}get resultType(){return this._resultType}get messageText(){return this._messageText}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"81IQ":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._clientMessageId=0,this._errorCode=0,!0}parse(t){return!!t&&(this._clientMessageId=t.readInt(),this._errorCode=t.readInt(),!0)}get clientMessageId(){return this._clientMessageId}get errorCode(){return this._errorCode}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"8Dbs":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._clubLevel=0,this._securityLevel=0,this._isAmbassador=!1,!0}parse(t){return!!t&&(this._clubLevel=t.readInt(),this._securityLevel=t.readInt(),this._isAmbassador=t.readBoolean(),!0)}get clubLevel(){return this._clubLevel}get securityLevel(){return this._securityLevel}get isAmbassador(){return this._isAmbassador}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"8KaG":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._userId=-1,this._userCanTrade=!1,this._otherUserId=-1,this._otherUserCanTrade=!1,!0}parse(t){return!!t&&(this._userId=t.readInt(),this._userCanTrade=1===t.readInt(),this._otherUserId=t.readInt(),this._otherUserCanTrade=1===t.readInt(),!0)}get _Str_4963(){return this._userId}get _Str_16764(){return this._userCanTrade}get _Str_17613(){return this._otherUserId}get _Str_13374(){return this._otherUserCanTrade}}class r extends i.a{constructor(t){super(t,n)}get _Str_4963(){return this.getParser()._Str_4963}get _Str_16764(){return this.getParser()._Str_16764}get _Str_17613(){return this.getParser()._Str_17613}get _Str_13374(){return this.getParser()._Str_13374}getParser(){return this.parser}}},"8PZm":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},"8ZkN":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i){this._data=[t,e,s,i]}getMessageArray(){return this._data}dispose(){}}},"8lyR":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._userName=null,!0}parse(t){return!!t&&(this._userName=t.readString(),!0)}get userName(){return this._userName}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"8lyl":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._roomId=0,this._isOwner=!1,!0}parse(t){return!!t&&(this._roomId=t.readInt(),this._isOwner=t.readBoolean(),!0)}get roomId(){return this._roomId}get isOwner(){return this._isOwner}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"8qmW":function(t,e,s){"use strict";s.d(e,"a",function(){return c});var i=s("5+UO"),n=s("P7Cj"),r=s("jBuC");class a{constructor(t){this._itemId=t.readInt(),this._furniType=t.readString().toUpperCase(),this._ref=t.readInt(),this._spriteId=t.readInt(),this._category=t.readInt(),this._isGroupable=t.readBoolean(),this._stuffData=r.a.parseObjectData(t),this._secondsToExpiration=-1,this._Str_5390=n.a.instance.time,this._hasRentPeriodStarted=!1,this._Str_9291=t.readInt(),this._Str_8744=t.readInt(),this._Str_9700=t.readInt(),this._Str_3182="S"===this.furniType?t.readInt():-1,this._flatId=-1,this._rentable=!1,this._isWallItem="I"===this._furniType}get itemId(){return this._itemId}get furniType(){return this._furniType}get ref(){return this._ref}get spriteId(){return this._spriteId}get category(){return this._category}get stuffData(){return this._stuffData}get _Str_2794(){return this._Str_3182}get secondsToExpiration(){return this._secondsToExpiration}get _Str_8932(){return this._Str_9291}get _Str_9050(){return this._Str_8744}get _Str_9408(){return this._Str_9700}get isGroupable(){return this._isGroupable}get _Str_3951(){return this._Str_3182}get flatId(){return this._flatId}get rentable(){return this._rentable}get isWallItem(){return this._isWallItem}get hasRentPeriodStarted(){return this._hasRentPeriodStarted}get _Str_10616(){return this._Str_5390}get isRecycleable(){return!0}get tradable(){return!0}get sellable(){return!0}get slotId(){return null}get _Str_19297(){return-1!==this._furniType.indexOf("external_image")}}class o{flush(){return this._firstUserID=-1,this._firstUserItemArray=null,this._firstUserNumItems=0,this._firstUserNumCredits=0,this._secondUserID=-1,this._secondUserItemArray=null,this._secondUserNumItems=0,this._secondUserNumCredits=0,!0}parse(t){return!(!t||(this._firstUserID=t.readInt(),this._firstUserItemArray=[],!this.parseItems(t,this._firstUserItemArray)||(this._firstUserNumItems=t.readInt(),this._firstUserNumCredits=t.readInt(),this._secondUserID=t.readInt(),this._secondUserItemArray=[],!this.parseItems(t,this._secondUserItemArray)||(this._secondUserNumItems=t.readInt(),this._secondUserNumCredits=t.readInt(),0))))}parseItems(t,e){let s=t.readInt();for(;s>0;)e.push(new a(t)),s--;return!0}get _Str_15162(){return this._firstUserID}get _Str_17841(){return this._firstUserItemArray}get _Str_14946(){return this._firstUserNumItems}get _Str_15709(){return this._firstUserNumCredits}get _Str_18215(){return this._secondUserID}get _Str_17465(){return this._secondUserItemArray}get _Str_13801(){return this._secondUserNumItems}get _Str_9138(){return this._secondUserNumCredits}}class c extends i.a{constructor(t){super(t,o)}get _Str_15162(){return this.getParser()._Str_15162}get _Str_18215(){return this.getParser()._Str_18215}get _Str_14946(){return this.getParser()._Str_14946}get _Str_13801(){return this.getParser()._Str_13801}get _Str_15709(){return this.getParser()._Str_15709}get _Str_9138(){return this.getParser()._Str_9138}get _Str_17841(){return this.getParser()._Str_17841}get _Str_17465(){return this.getParser()._Str_17465}getParser(){return this.parser}}},"9/2a":function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("5+UO"),n=s("/52j");class r{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._level=n.a.NONE,this._userId=0,this._username=null,this._figure=null,!0}parse(t){return!!t&&(this._level=t.readInt(),t.readInt(),this._userId=t.readInt(),this._username=t.readString(),this._figure=t.readString(),!0)}get level(){return this._level}get userId(){return this._userId}get username(){return this._username}get figure(){return this._figure}}class a{flush(){return this._id=0,this._hearts=[],this._smiles=[],this._bobbas=[],!0}parse(t){if(!t)return!1;this._id=t.readInt();let e=t.readInt();for(;e>0;){const s=new r(t);s.level===n.a.HEART?this._hearts.push(s):s.level===n.a.SMILE?this._smiles.push(s):s.level===n.a.BOBBA&&this._bobbas.push(s),e--}return!0}get id(){return this._id}get hearts(){return this._hearts}get smiles(){return this._smiles}get bobbas(){return this._bobbas}}class o extends i.a{constructor(t){super(t,a)}getParser(){return this.parser}}},"9Bkc":function(t,e,s){"use strict";s.d(e,"a",function(){return r});class i{constructor(t,e,s,i){this._id=t,this._type=e,this._color=s,this._light=i}get id(){return this._id}get type(){return this._type}get color(){return this._color}get _Str_4272(){return this._light}}var n=s("Ns5P");let r=(()=>{class t extends n.a{constructor(t,e){super(t,e),this._selectedPresetId=0,this._presets=[]}get _Str_10888(){return this._presets.length}get selectedPresetId(){return this._selectedPresetId}set selectedPresetId(t){this._selectedPresetId=t}_Str_17287(t,e,s,n){const r=new i(t,e,s,n);this._presets[t-1]=r}_Str_14989(t){return t<0||t>=this._presets.length?null:this._presets[t]}}return t.RSDPE_PRESETS="RSDPE_PRESETS",t})()},"9Jti":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("vKkO");class r{flush(){return this._definition=null,!0}parse(t){return!!t&&(this._definition=new n.a(t),!0)}get definition(){return this._definition}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"9L9n":function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("3r1x");let n=(()=>{class t extends i.a{constructor(t){super(t)}get volumeSystem(){return this._volumeSystem}set volumeSystem(t){this._volumeSystem=t}get volumeFurni(){return this._volumeFurni}set volumeFurni(t){this._volumeFurni=t}get volumeTrax(){return this._volumeTrax}set volumeTrax(t){this._volumeTrax=t}get oldChat(){return this._oldChat}set oldChat(t){this._oldChat=t}get roomInvites(){return this._roomInvites}set roomInvites(t){this._roomInvites=t}get cameraFollow(){return this._cameraFollow}set cameraFollow(t){this._cameraFollow=t}get flags(){return this._flags}set flags(t){this._flags=t}get chatType(){return this._chatType}set chatType(t){this._chatType=t}}return t.SETTINGS_UPDATED="NSE_SETTINGS_UPDATED",t})()},"9NDz":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._offerId=-1,this._productCode=null,this._priceCredits=0,this._priceActivityPoints=0,this._priceActivityPointsType=0,this._vip=!1,this._months=0,this._extraDays=0,this._daysLeftAfterPurchase=0,this._year=0,this._month=0,this._day=0,this._giftable=!1,!0}parse(t){return!!t&&(this._offerId=t.readInt(),this._productCode=t.readString(),t.readBoolean(),this._priceCredits=t.readInt(),this._priceActivityPoints=t.readInt(),this._priceActivityPointsType=t.readInt(),this._vip=t.readBoolean(),this._months=t.readInt(),this._extraDays=t.readInt(),this._giftable=t.readBoolean(),this._daysLeftAfterPurchase=t.readInt(),this._year=t.readInt(),this._month=t.readInt(),this._day=t.readInt(),!0)}get offerId(){return this._offerId}get productCode(){return this._productCode}get priceCredits(){return this._priceCredits}get priceActivityPoints(){return this._priceActivityPoints}get priceActivityPointsType(){return this._priceActivityPointsType}get vip(){return this._vip}get months(){return this._months}get extraDays(){return this._extraDays}get daysLeftAfterPurchase(){return this._daysLeftAfterPurchase}get year(){return this._year}get month(){return this._month}get day(){return this._day}get giftable(){return this._giftable}}class r{flush(){return this._offers=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._offers.push(new n(t)),e--;return!0}get offers(){return this._offers}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"9Nxx":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t&&(this._petId=t.readInt(),!0)}get petId(){return this._petId}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"9RxG":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s){this._data=[t,e?1:0,s?1:0]}getMessageArray(){return this._data}dispose(){}}},"9loD":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"9mJe":function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{constructor(t,e,s,i=null){this._id=t,this._location=e,this._targetLocation=s,this._movementType=i}get id(){return this._id}get location(){return this._location}get targetLocation(){return this._targetLocation}get movementType(){return this._movementType}}return t.MOVE="mv",t.SLIDE="sld",t})()},"9vQN":function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.NONE=0,t.GUEST=1,t.GUILD_MEMBER=2,t.GUILD_ADMIN=3,t.ROOM_OWNER=4,t.MODERATOR=5,t})()},AAYK:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},AFd5:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},AKqU:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._errorCode=-1,!0}parse(t){return!!t&&(this._errorCode=t.readInt(),!0)}get errorCode(){return this._errorCode}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},AUxQ:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("yF7E");let n=(()=>{class t extends i.a{constructor(e){super(null,null),this._type=t.UPDATE_MAP,this._mapData=e}get type(){return this._type}get mapData(){return this._mapData}}return t.UPDATE_MAP="RORMUM_UPDATE_MAP",t})()},AYkW:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s){this._data=[],this._data.push(t),this._data.push(e),this._data.push(s)}getMessageArray(){return this._data}dispose(){}}},Aavw:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e=0){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},Ahnc:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._reason=0,!0}parse(t){return!!t&&(this._reason=t.readInt(),!0)}get reason(){return this._reason}}let r=(()=>{class t extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}return t._Str_18436=6,t._Str_17787=7,t})()},ArMw:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._itemId=0,this._value=0,!0}parse(t){return!!t&&(this._itemId=t.readInt(),this._value=t.readInt(),!0)}get itemId(){return this._itemId}get value(){return this._value}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"Ays+":function(t,e,s){"use strict";s.d(e,"a",function(){return n});class i{constructor(t,e,s){this._layerId=t,this._partId=e,this._paletteId=s}get layerId(){return this._layerId}set layerId(t){this._layerId=t}get partId(){return this._partId}set partId(t){this._partId=t}get paletteId(){return this._paletteId}set paletteId(t){this._paletteId=t}}class n{constructor(t){this._typeId=this.getTypeId(t),this._paletteId=this.getPaletteId(t),this._color=this.getColor(t),this._headOnly=this.getHeadOnly(t);const e=this.getCustomData(t);this._customLayerIds=this.getCustomLayerIds(e),this._customPartIds=this.getCustomPartIds(e),this._customPaletteIds=this.getCustomPaletteIds(e),this._customParts=[];let s=0;for(;s<this._customLayerIds.length;)this._customParts.push(new i(this._customLayerIds[s],this._customPartIds[s],this._customPaletteIds[s])),s++}get typeId(){return this._typeId}get paletteId(){return this._paletteId}get color(){return this._color}get customLayerIds(){return this._customLayerIds}get customPartIds(){return this._customPartIds}get customPaletteIds(){return this._customPaletteIds}get customParts(){return this._customParts}getCustomPart(t){if(this._customParts)for(const e of this._customParts)if(e.layerId===t)return e;return null}get hasCustomParts(){return!(null==this._customLayerIds)&&this._customLayerIds.length>0}get headOnly(){return this._headOnly}get figureString(){let t=this.typeId+" "+this.paletteId+" "+this.color.toString(16);t=t+" "+this.customParts.length;for(const e of this.customParts)t=t+" "+e.layerId+" "+e.partId+" "+e.paletteId;return t}getCustomData(t){let e=[];if(t){const s=t.split(" "),i=this._headOnly?1:0,n=4+i;if(s.length>n){const t=parseInt(s[3+i]);e=s.slice(n,n+3*t)}}return e}getCustomLayerIds(t){const e=[];let s=0;for(;s<t.length;)e.push(parseInt(t[s+0])),s+=3;return e}getCustomPartIds(t){const e=[];let s=0;for(;s<t.length;)e.push(parseInt(t[s+1])),s+=3;return e}getCustomPaletteIds(t){const e=[];let s=0;for(;s<t.length;)e.push(parseInt(t[s+2])),s+=3;return e}getTypeId(t){if(t){const e=t.split(" ");if(e.length>=1)return parseInt(e[0])}return 0}getPaletteId(t){if(t){const e=t.split(" ");if(e.length>=2)return parseInt(e[1])}return 0}getColor(t){if(t){const e=t.split(" ");if(e.length>=3)return parseInt(e[2],16)}return 16777215}getHeadOnly(t){if(t){const e=t.split(" ");if(e.length>=4)return"head"===e[3]}return!1}}},AzHa:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i){this._data=[t,e,s,i]}getMessageArray(){return this._data}dispose(){}}},B62z:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},BFtu:function(t,e,s){"use strict";s.d(e,"a",function(){return h});var i=s("IqKQ"),n=s("DFHD");class r{constructor(t,e,s,i){this._x=t,this._y=e,this._width=s,this._height=i}get x(){return this._x}get y(){return this._y}get width(){return this._width}get height(){return this._height}}var a=s("QzjD"),o=s("mkz/");let c=(()=>{class t{constructor(){this._corners=[],this._endPoints=[],this._directions=[],this._lengths=[],this._leftTurns=[],this._borders=[],this._hideWalls=[],this._manuallyLeftCut=[],this._manuallyRightCut=[],this._addDuplicates=!1,this._count=0}_Str_17862(t,e,s,i,n){(this._addDuplicates||this._Str_22484(t,e,s,i,n))&&(this._corners.push(t),this._directions.push(e),this._lengths.push(s),this._borders.push(i),this._leftTurns.push(n),this._hideWalls.push(!1),this._manuallyLeftCut.push(!1),this._manuallyRightCut.push(!1),this._count++)}_Str_22484(t,e,s,i,n){let r=0;for(;r<this._count;){if(this._corners[r].x==t.x&&this._corners[r].y==t.y&&this._directions[r]==e&&this._lengths[r]==s&&this._borders[r]==i&&this._leftTurns[r]==n)return!1;r++}return!0}get count(){return this._count}_Str_10778(t){return this._corners[t]}_Str_19138(t){return this._Str_23674(),this._endPoints[t]}_Str_13743(t){return this._lengths[t]}getDirection(t){return this._directions[t]}_Str_25208(t){return this._borders[t]}_Str_10019(t){return this._hideWalls[t]}_Str_17084(t){return this._leftTurns[t]}_Str_25455(t){return this._manuallyLeftCut[t]}_Str_24163(t){return this._manuallyRightCut[t]}_Str_15901(t,e){this._hideWalls[t]=e}_Str_24531(t,e){e<this._lengths[t]&&(this._lengths[t]=e,this._manuallyRightCut[t]=!0)}_Str_23976(e,s){let n;if(s>0&&s<this._lengths[e]){const r=this._corners[e];n=t.WALL_DIRECTION_VECTORS[this.getDirection(e)],this._corners[e]=new i.Point(r.x+s*n.x,r.y+s*n.y),this._lengths[e]=this._lengths[e]-s,this._manuallyLeftCut[e]=!0}}_Str_23674(){let e,s,n,r,a;if(this._endPoints.length!=this.count)for(this._endPoints=[],e=0;e<this.count;)s=this._Str_10778(e),n=new i.Point(s.x,s.y),r=t.WALL_DIRECTION_VECTORS[this.getDirection(e)],a=this._Str_13743(e),n.x=n.x+r.x*a,n.y=n.y+r.y*a,this._endPoints.push(n),e++}}return t.WALL_DIRECTION_VECTORS=[new n.a(1,0,0),new n.a(0,1,0),new n.a(-1,0,0),new n.a(0,-1,0)],t.WALL_NORMAL_VECTORS=[new n.a(0,1,0),new n.a(-1,0,0),new n.a(0,-1,0),new n.a(1,0,0)],t})(),h=(()=>{class t{constructor(){this._width=0,this._height=0,this._minX=0,this._maxX=0,this._minY=0,this._maxY=0,this._fixedWallHeight=-1,this._floorHeight=0,this._restrictsScaling=!1,this._restrictedScale=1,this._tileMatrix=[],this._tileMatrixOriginal=[],this._planes=[],this._floorHoleMatrix=[],this._wallHeight=3.6,this._wallThicknessMultiplier=1,this._floorThicknessMultiplier=1,this._floorHoles=new Map}static getFloorHeight(t){const e=t.length;if(!e)return 0;let s=0,i=0;for(;i<e;){const e=t[i];let n=0;for(;n<e.length;){const t=e[n];t>s&&(s=t),n++}i++}return s}static findEntranceTile(t){if(!t)return null;const e=t.length;if(!e)return null;const s=[];let n=0;for(;n<e;){const e=t[n];if(!e||!e.length)return null;let i=0;for(;i<e.length;){if(e[i]>=0){s.push(i);break}i++}s.length<n+1&&s.push(e.length+1),n++}for(n=1;n<s.length-1;){if(Math.trunc(s[n])<=Math.trunc(s[n-1])-1&&Math.trunc(s[n])<=Math.trunc(s[n+1])-1)return new i.Point(Math.trunc(0|s[n]),n);n++}return null}static expandFloorTiles(t){let e,s,i,n,r,a,o,c,h,l,u,_;const d=t.length,g=t[0].length,m=[];for(s=0;s<4*d;)m[s]=[],s++;let p=0;for(s=0;s<d;){for(r=0,e=0;e<g;){if(a=t[s][e],a<0||a<=255)for(n=0;n<4;){for(i=0;i<4;)void 0===m[p+n]&&(m[p+n]=[]),m[p+n][r+i]=a<0?a:4*a,i++;n++}else{for(o=4*(255&a),c=o+3*(a>>11&1),h=o+3*(a>>10&1),l=o+3*(a>>9&1),u=o+3*(a>>8&1),i=0;i<3;)_=i+1,m[p][r+i]=(c*(3-i)+h*i)/3,m[p+3][r+_]=(l*(3-_)+u*_)/3,m[p+_][r]=(c*(3-_)+l*_)/3,m[p+i][r+3]=(h*(3-i)+u*i)/3,i++;m[p+1][r+1]=c>o?o+2:o+1,m[p+1][r+2]=h>o?o+2:o+1,m[p+2][r+1]=l>o?o+2:o+1,m[p+2][r+2]=u>o?o+2:o+1}r+=4,e++}p+=4,s++}return m}static addTileTypes(t){let e,s,i,n,r,a,o,c,h,l,u,_,d,g;const m=t.length-1,p=t[0].length-1;for(s=1;s<m;){for(e=1;e<p;)i=t[s][e],i<0||(n=255&t[s-1][e-1],r=255&t[s-1][e],a=255&t[s-1][e+1],o=255&t[s][e-1],c=255&t[s][e+1],h=255&t[s+1][e-1],l=255&t[s+1][e],u=255&t[s+1][e+1],_=i+1,d=i-1,g=(n==_||r==_||o==_?8:0)|(a==_||r==_||c==_?4:0)|(h==_||l==_||o==_?2:0)|(u==_||l==_||c==_?1:0),15==g&&(g=0),t[s][e]=i|g<<8),e++;s++}}static unpadHeightMap(t){t.shift(),t.pop();for(const e of t)e.shift(),e.pop()}static padHeightMap(e){const s=[],i=[];for(const n of e)n.push(t.TILE_BLOCKED),n.unshift(t.TILE_BLOCKED);for(const n of e[0])s.push(t.TILE_BLOCKED),i.push(t.TILE_BLOCKED);e.push(i),e.unshift(s)}get minX(){return this._minX}get maxX(){return this._maxX}get minY(){return this._minY}get maxY(){return this._maxY}get tileMapWidth(){return this._width}get tileMapHeight(){return this._height}get planeCount(){return this._planes.length}get floorHeight(){return-1!=this._fixedWallHeight?this._fixedWallHeight:this._floorHeight}get wallHeight(){return-1!=this._fixedWallHeight?this._fixedWallHeight+3.6:this._wallHeight}set wallHeight(t){t<0&&(t=0),this._wallHeight=t}get wallThicknessMultiplier(){return this._wallThicknessMultiplier}set wallThicknessMultiplier(t){t<0&&(t=0),this._wallThicknessMultiplier=t}get floorThicknessMultiplier(){return this._floorThicknessMultiplier}set floorThicknessMultiplier(t){t<0&&(t=0),this._floorThicknessMultiplier=t}dispose(){this._planes=null,this._tileMatrix=null,this._tileMatrixOriginal=null,this._floorHoleMatrix=null,null!=this._floorHoles&&(this._floorHoles.clear(),this._floorHoles=null)}reset(){this._planes=[],this._tileMatrix=[],this._tileMatrixOriginal=[],this._width=0,this._height=0,this._minX=0,this._maxX=0,this._minY=0,this._maxY=0,this._floorHeight=0,this._floorHoleMatrix=[]}initializeTileMap(e,s){e<0&&(e=0),s<0&&(s=0),this._tileMatrix=[],this._tileMatrixOriginal=[],this._floorHoleMatrix=[];let i=0;for(;i<s;){const s=[],n=[],r=[];let a=0;for(;a<e;)s[a]=t.TILE_BLOCKED,n[a]=t.TILE_BLOCKED,r[a]=!1,a++;this._tileMatrix.push(s),this._tileMatrixOriginal.push(n),this._floorHoleMatrix.push(r),i++}return this._width=e,this._height=s,this._minX=this._width,this._maxX=-1,this._minY=this._height,this._maxY=-1,!0}setTileHeight(t,e,s){let i,n,r,a,o;if(t>=0&&t<this._width&&e>=0&&e<this._height){if(i=this._tileMatrix[e],i[t]=s,s>=0)t<this._minX&&(this._minX=t),t>this._maxX&&(this._maxX=t),e<this._minY&&(this._minY=e),e>this._maxY&&(this._maxY=e);else{if(t==this._minX||t==this._maxX){for(n=!1,r=this._minY;r<this._maxY;){if(this.getTileHeightInternal(t,r)>=0){n=!0;break}r++}n||(t==this._minX&&this._minX++,t==this._maxX&&this._maxX--)}if(e==this._minY||e==this._maxY){for(a=!1,o=this._minX;o<this._maxX;){if(this.getTileHeight(o,e)>=0){a=!0;break}o++}a||(e==this._minY&&this._minY++,e==this._maxY&&this._maxY--)}}return!0}return!1}getTileHeight(e,s){if(e<0||e>=this._width||s<0||s>=this._height)return t.TILE_BLOCKED;const i=this._tileMatrix[s];return void 0===i[e]?0:Math.abs(i[e])}getTileHeightOriginal(e,s){return e<0||e>=this._width||s<0||s>=this._height?t.TILE_BLOCKED:this._floorHoleMatrix[s][e]?t.TILE_HOLE:this._tileMatrixOriginal[s][e]}getTileHeightInternal(e,s){return e<0||e>=this._width||s<0||s>=this._height?t.TILE_BLOCKED:this._tileMatrix[s][e]}initializeFromTileData(e=-1){let s,i;for(this._fixedWallHeight=e,i=0;i<this._height;){for(s=0;s<this._width;)void 0===this._tileMatrixOriginal[i]&&(this._tileMatrixOriginal[i]=[]),this._tileMatrixOriginal[i][s]=this._tileMatrix[i][s],s++;i++}const n=t.findEntranceTile(this._tileMatrix);for(i=0;i<this._height;){for(s=0;s<this._width;)void 0===this._floorHoleMatrix[i]&&(this._floorHoleMatrix[i]=[]),this._floorHoleMatrix[i][s]&&this.setTileHeight(s,i,t.TILE_HOLE),s++;i++}return this.initialize(n)}initialize(e){let s=0;null!=e&&(s=this.getTileHeight(e.x,e.y),this.setTileHeight(e.x,e.y,t.TILE_BLOCKED)),this._floorHeight=t.getFloorHeight(this._tileMatrix),this.createWallPlanes();const i=[];for(const t of this._tileMatrix)i.push(t.concat());t.padHeightMap(i),t.addTileTypes(i),t.unpadHeightMap(i);const r=t.expandFloorTiles(i);return this.extractPlanes(r),null!=e&&(this.setTileHeight(e.x,e.y,s),this.addFloor(new n.a(e.x+.5,e.y+.5,s),new n.a(-1,0,0),new n.a(0,-1,0),!1,!1,!1,!1)),!0}generateWallData(t,e){let s,n,r,a,o;const h=new c,l=[this.extractTopWall.bind(this),this.extractRightWall.bind(this),this.extractBottomWall.bind(this),this.extractLeftWall.bind(this)];let u=0,_=new i.Point(t.x,t.y),d=0;for(;d++<1e3;){if(s=!1,n=!1,r=u,(_.x<this.minX||_.x>this.maxX||_.y<this.minY||_.y>this.maxY)&&(s=!0),a=l[u](_,e),null==a)return null;if(o=Math.abs(a.x-_.x)+Math.abs(a.y-_.y),_.x==a.x||_.y==a.y?(u=(u-1+l.length)%l.length,o+=1,n=!0):(u=(u+1)%l.length,o--),h._Str_17862(_,r,o,s,n),a.x==t.x&&a.y==t.y&&(a.x!=_.x||a.y!=_.y))break;_=a}return 0==h.count?null:h}hidePeninsulaWallChains(t){let e,s,i,n,r=0;const a=t.count;for(;r<a;){const o=r;for(e=r,s=0,i=!1;!t._Str_25208(r)&&r<a;)t._Str_17084(r)?s++:s>0&&s--,s>1&&(i=!0),e=r,r++;if(i)for(n=o;n<=e;)t._Str_15901(n,!0),n++;r++}}updateWallsNextToHoles(e){let s,i,n,r,a,o,h;const l=e.count;let u=0;for(;u<l;){if(!e._Str_10019(u)){for(s=e._Str_10778(u),i=e.getDirection(u),n=e._Str_13743(u),r=c.WALL_DIRECTION_VECTORS[i],a=c.WALL_NORMAL_VECTORS[i],o=0,h=0;h<n;){if(this.getTileHeightInternal(s.x+h*r.x-a.x,s.y+h*r.y-a.y)==t.TILE_HOLE){if(h>0&&0==o){e._Str_24531(u,h);break}o++}else if(o>0){e._Str_23976(u,o);break}h++}o==n&&e._Str_15901(u,!0)}u++}}resolveOriginalWallIndex(t,e,s){let i,n,r,a,o,c;const h=Math.min(t.y,e.y),l=Math.max(t.y,e.y),u=Math.min(t.x,e.x),_=Math.max(t.x,e.x),d=s.count;let g=0;for(;g<d;){if(i=s._Str_10778(g),n=s._Str_19138(g),t.x==e.x){if(i.x==t.x&&n.x==t.x&&(r=Math.min(i.y,n.y),a=Math.max(i.y,n.y),r<=h&&l<=a))return g}else if(t.y==e.y&&i.y==t.y&&n.y==t.y&&(o=Math.min(i.x,n.x),c=Math.max(i.x,n.x),o<=u&&_<=c))return g;g++}return-1}hideOriginallyHiddenWalls(t,e){let s,n,r,a,o;const h=t.count;let l=0;for(;l<h;)t._Str_10019(l)||(s=t._Str_10778(l),n=new i.Point(s.x,s.y),r=c.WALL_DIRECTION_VECTORS[t.getDirection(l)],a=t._Str_13743(l),n.x=n.x+r.x*a,n.y=n.y+r.y*a,o=this.resolveOriginalWallIndex(s,n,e),o>=0?e._Str_10019(o)&&t._Str_15901(l,!0):t._Str_15901(l,!0)),l++}checkWallHiding(t,e){this.hidePeninsulaWallChains(e),this.updateWallsNextToHoles(t),this.hideOriginallyHiddenWalls(t,e)}addWalls(e,s){const i=e.count,r=s.count;let a=0;for(;a<i;){if(!e._Str_10019(a)){const o=e._Str_10778(a),h=e.getDirection(a),l=e._Str_13743(a),u=c.WALL_DIRECTION_VECTORS[h],_=c.WALL_NORMAL_VECTORS[h];let d=-1,g=0;for(;g<l;){const t=this.getTileHeightInternal(o.x+g*u.x+_.x,o.y+g*u.y+_.y);t>=0&&(t<d||d<0)&&(d=t),g++}let m=new n.a(o.x,o.y,d);m=n.a.sum(m,n.a.product(_,.5)),m=n.a.sum(m,n.a.product(u,-.5));const p=this.wallHeight+Math.min(t.MAX_WALL_ADDITIONAL_HEIGHT,this.floorHeight)-d,f=n.a.product(u,-l),E=new n.a(0,0,p);m=n.a.dif(m,f);const S=this.resolveOriginalWallIndex(o,e._Str_19138(a),s);let v=0,b=0;S>=0?(v=s.getDirection((S+1)%r),b=s.getDirection((S-1+r)%r)):(v=e.getDirection((a+1)%i),b=e.getDirection((a-1+i)%i));let I=null;(v-h+4)%4==3?I=c.WALL_NORMAL_VECTORS[v]:(h-b+4)%4==3&&(I=c.WALL_NORMAL_VECTORS[b]);const R=e._Str_17084(a),T=e._Str_17084((a-1+i)%i),O=e._Str_10019((a+1)%i),y=e._Str_25455(a),C=e._Str_24163(a);this.addWall(m,f,E,I,!T||y,!R||C,!O)}a++}}createWallPlanes(){let e,s;const n=this._tileMatrix;if(null==n)return!1;let r,a,o;const c=n.length;let h=0;if(0==c)return!1;for(r=0;r<c;){if(o=n[r],null==o||0==o.length)return!1;h=h>0?Math.min(h,o.length):o.length,r++}const l=Math.min(t.MAX_WALL_ADDITIONAL_HEIGHT,-1!=this._fixedWallHeight?this._fixedWallHeight:t.getFloorHeight(n)),u=this.minX;let _=this.minY;for(_=this.minY;_<=this.maxY;){if(this.getTileHeightInternal(u,_)>t.TILE_HOLE){_--;break}_++}if(_>this.maxY)return!1;const d=new i.Point(u,_),g=this.generateWallData(d,!0),m=this.generateWallData(d,!1);for(null!=g&&(e=g.count,s=m.count,this.checkWallHiding(g,m),this.addWalls(g,m)),a=0;a<this.tileMapHeight;){for(r=0;r<this.tileMapWidth;)this.getTileHeightInternal(r,a)<0&&this.setTileHeight(r,a,-(l+this.wallHeight)),r++;a++}return!0}extractTopWall(e,s){if(null==e)return null;let n=1,r=t.TILE_HOLE;for(s||(r=t.TILE_BLOCKED);n<1e3;){if(this.getTileHeightInternal(e.x+n,e.y)>r)return new i.Point(e.x+n-1,e.y);if(this.getTileHeightInternal(e.x+n,e.y+1)<=r)return new i.Point(e.x+n,e.y+1);n++}return null}extractRightWall(e,s){if(null==e)return null;let n=1,r=t.TILE_HOLE;for(s||(r=t.TILE_BLOCKED);n<1e3;){if(this.getTileHeightInternal(e.x,e.y+n)>r)return new i.Point(e.x,e.y+(n-1));if(this.getTileHeightInternal(e.x-1,e.y+n)<=r)return new i.Point(e.x-1,e.y+n);n++}return null}extractBottomWall(e,s){if(null==e)return null;let n=1,r=t.TILE_HOLE;for(s||(r=t.TILE_BLOCKED);n<1e3;){if(this.getTileHeightInternal(e.x-n,e.y)>r)return new i.Point(e.x-(n-1),e.y);if(this.getTileHeightInternal(e.x-n,e.y-1)<=r)return new i.Point(e.x-n,e.y-1);n++}return null}extractLeftWall(e,s){if(null==e)return null;let n=1,r=t.TILE_HOLE;for(s||(r=t.TILE_BLOCKED);n<1e3;){if(this.getTileHeightInternal(e.x,e.y-n)>r)return new i.Point(e.x,e.y-(n-1));if(this.getTileHeightInternal(e.x+1,e.y-n)<=r)return new i.Point(e.x+1,e.y-n);n++}return null}addWall(e,s,i,r,a,c,h){this.addPlane(o.a.PLANE_WALL,e,s,i,[r]);const l=t.WALL_THICKNESS*this._wallThicknessMultiplier,u=t.FLOOR_THICKNESS*this._floorThicknessMultiplier,_=n.a.crossProduct(s,i),d=n.a.product(_,1/_.length*-l);if(this.addPlane(o.a.PLANE_WALL,n.a.sum(e,i),s,d,[_,r]),a&&this.addPlane(o.a.PLANE_WALL,n.a.sum(n.a.sum(e,s),i),n.a.product(i,-(i.length+u)/i.length),d,[_,r]),c&&(this.addPlane(o.a.PLANE_WALL,n.a.sum(e,n.a.product(i,-u/i.length)),n.a.product(i,(i.length+u)/i.length),d,[_,r]),h)){const t=n.a.product(s,l/s.length);this.addPlane(o.a.PLANE_WALL,n.a.sum(n.a.sum(e,i),n.a.product(t,-1)),t,d,[_,s,r])}}addFloor(e,s,i,r,a,c,h){let l,u,_;null!=this.addPlane(o.a.PLANE_FLOOR,e,s,i)&&(l=t.FLOOR_THICKNESS*this._floorThicknessMultiplier,u=new n.a(0,0,l),_=n.a.dif(e,u),c&&this.addPlane(o.a.PLANE_FLOOR,_,s,u),h&&this.addPlane(o.a.PLANE_FLOOR,n.a.sum(_,n.a.sum(s,i)),n.a.product(s,-1),u),r&&this.addPlane(o.a.PLANE_FLOOR,n.a.sum(_,i),n.a.product(i,-1),u),a&&this.addPlane(o.a.PLANE_FLOOR,n.a.sum(_,s),i,u))}initializeFromMapData(t){if(!t)return!1;this.reset(),this.resetFloorHoles();const e=t.wallHeight,s=t.fixedWallsHeight;if(this.initializeTileMap(t.width,t.height),t.tileMap){let e=0;for(;e<t.tileMap.length;){const s=t.tileMap[e];if(s){let t=0;for(;t<s.length;){const i=s[t];i&&this.setTileHeight(t,e,i.height),t++}}e++}}if(t.holeMap&&t.holeMap.length){let e=0;for(;e<t.holeMap.length;){const s=t.holeMap[e];s&&(this.addFloorHole(s.id,s.x,s.y,s.width,s.height),e++)}this.initializeHoleMap()}return this.wallHeight=e,this.restrictsDragging=t.restrictsDragging,this.restrictsScaling=t.restrictsScaling,this.restrictedScale=t.restrictedScale,this.initializeFromTileData(s),!0}addPlane(t,e,s,i,n=null){if(0==s.length||0==i.length)return null;const r=new o.a(t,e,s,i,n);return this._planes.push(r),r}getMapData(){const t=new a.a;t.width=this._width,t.height=this._height,t.wallHeight=this._wallHeight,t.fixedWallsHeight=this._fixedWallHeight,t.dimensions.minX=this.minX,t.dimensions.maxX=this.maxX,t.dimensions.minY=this.minY,t.dimensions.maxY=this.maxY,t.restrictsDragging=this.restrictsDragging,t.restrictsScaling=this.restrictsScaling,t.restrictedScale=this.restrictedScale;let e=0;for(;e<this._height;){const s=[],i=this._tileMatrixOriginal[e];let n=0;for(;n<this._width;)s.push({height:i[n]}),n++;t.tileMap.push(s),e++}for(const[s,i]of this._floorHoles.entries())i&&t.holeMap.push({id:s,x:i.x,y:i.y,width:i.width,height:i.height});return t}getPlaneLocation(t){if(t<0||t>=this.planeCount)return null;const e=this._planes[t];return e?e.loc:null}getPlaneNormal(t){if(t<0||t>=this.planeCount)return null;const e=this._planes[t];return e?e.normal:null}getPlaneLeftSide(t){if(t<0||t>=this.planeCount)return null;const e=this._planes[t];return e?e._Str_5424:null}getPlaneRightSide(t){if(t<0||t>=this.planeCount)return null;const e=this._planes[t];return e?e._Str_4968:null}getPlaneNormalDirection(t){if(t<0||t>=this.planeCount)return null;const e=this._planes[t];return e?e._Str_25207:null}getPlaneSecondaryNormals(t){let e,s;if(t<0||t>=this.planeCount)return null;const i=this._planes[t];if(null!=i){for(e=[],s=0;s<i._Str_20277;)e.push(i._Str_22585(s)),s++;return e}return null}getPlaneType(t){if(t<0||t>=this.planeCount)return o.a.PLANE_UNDEFINED;const e=this._planes[t];return e?e.type:o.a.PLANE_UNDEFINED}getPlaneMaskCount(t){if(t<0||t>=this.planeCount)return 0;const e=this._planes[t];return e?e._Str_6845:0}getPlaneMaskLeftSideLoc(t,e){if(t<0||t>=this.planeCount)return-1;const s=this._planes[t];return s?s._Str_25133(e):-1}getPlaneMaskRightSideLoc(t,e){if(t<0||t>=this.planeCount)return-1;const s=this._planes[t];return s?s._Str_23609(e):-1}getPlaneMaskLeftSideLength(t,e){if(t<0||t>=this.planeCount)return-1;const s=this._planes[t];return s?s._Str_25097(e):-1}getPlaneMaskRightSideLength(t,e){if(t<0||t>=this.planeCount)return-1;const s=this._planes[t];return s?s._Str_25617(e):-1}addFloorHole(t,e,s,i,n){this.removeFloorHole(t),this._floorHoles.set(t,new r(e,s,i,n))}removeFloorHole(t){this._floorHoles.delete(t)}resetFloorHoles(){this._floorHoles.clear()}initializeHoleMap(){let t,e,s,i,n,r,a,o;for(e=0;e<this._height;){for(s=this._floorHoleMatrix[e],t=0;t<this._width;)s[t]=!1,t++;e++}for(const c of this._floorHoles.values())if(i=c,null!=i)for(n=i.x,r=i.x+i.width-1,a=i.y,o=i.y+i.height-1,n=n<0?0:n,r=r>=this._width?this._width-1:r,a=a<0?0:a,o=o>=this._height?this._height-1:o,e=a;e<=o;){for(s=this._floorHoleMatrix[e],t=n;t<=r;)s[t]=!0,t++;e++}}extractPlanes(t){let e,s,i,r,a,o,c,h,l,u,_,d,g,m,p;const f=t.length,E=t[0].length,S=[];let v=0;for(;v<f;)S[v]=[],v++;let b=0;for(;b<f;){for(e=0;e<E;){if(s=t[b][e],s<0||S[b][e]);else{for(a=0==e||!(t[b][e-1]==s),o=0==b||!(t[b-1][e]==s),i=e+1;i<E&&!(t[b][i]!=s||S[b][i]||b>0&&t[b-1][i]==s==o);)i++;for(c=i==E||!(t[b][i]==s),_=!1,r=b+1;r<f&&!_;){for(h=!(t[r][e]==s),_=h||e>0&&t[r][e-1]==s==a||i<E&&t[r][i]==s==c,l=e;l<i;){if(t[r][l]==s==h){_=!0,i=l;break}l++}if(_)break;r++}for(h=h||r==f,c=i==E||!(t[b][i]==s),u=b;u<r;){for(l=e;l<i;)S[u][l]=!0,l++;u++}d=e/4-.5,g=b/4-.5,m=(i-e)/4,p=(r-b)/4,this.addFloor(new n.a(d+m,g+p,s/4),new n.a(-m,0,0),new n.a(0,-p,0),c,a,h,o)}e++}b++}}get restrictsDragging(){return this._restrictsDragging}set restrictsDragging(t){this._restrictsDragging=t}get restrictsScaling(){return this._restrictsScaling}set restrictsScaling(t){this._restrictsScaling=t}get restrictedScale(){return this._restrictedScale}set restrictedScale(t){this._restrictedScale=t}}return t.FLOOR_THICKNESS=.25,t.WALL_THICKNESS=.25,t.MAX_WALL_ADDITIONAL_HEIGHT=20,t.TILE_BLOCKED=-110,t.TILE_HOLE=-100,t})()},BG3s:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},BIDA:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("hTzv");class r{flush(){return this._allBadgeCodes=[],this._activeBadgeCodes=[],this._badgeIds=null,!0}parse(t){if(!t)return!1;this._allBadgeCodes=[],this._activeBadgeCodes=[],this._badgeIds=new n.a;let e=t.readInt();for(;e>0;){const s=t.readInt(),i=t.readString();this._badgeIds.add(i,s),this._allBadgeCodes.push(i),e--}for(e=t.readInt();e>0;){const s=t.readInt(),i=t.readString();this._activeBadgeCodes[s]=i,e--}return!0}getBadgeId(t){return this._badgeIds.getValue(t)}getAllBadgeCodes(){return this._allBadgeCodes}getActiveBadgeCodes(){return this._activeBadgeCodes}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},BTXg:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{get furniId(){return this._furniId}get start(){return this._start}flush(){return this._furniId=-1,this._start=!1,!0}parse(t){return this._furniId=t.readInt(),this._start=t.readBoolean(),!0}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},BVCN:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._unitId=null,this._effectId=0,this._delay=0,!0}parse(t){return!!t&&(this._unitId=t.readInt(),this._effectId=t.readInt(),this._delay=t.readInt(),!0)}get unitId(){return this._unitId}get effectId(){return this._effectId}get delay(){return this._delay}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},Bbk2:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._itemId=0,this._itemsLeft=0,!0}parse(t){return!!t&&(this._itemId=t.readInt(),this._itemsLeft=t.readInt(),!0)}get itemId(){return this._itemId}get itemsLeft(){return this._itemsLeft}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},BgaL:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},BrMT:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.ROOM_MIN_X="room_min_x",t.ROOM_MAX_X="room_max_x",t.ROOM_MIN_Y="room_min_y",t.ROOM_MAX_Y="room_max_y",t.ROOM_IS_PUBLIC="room_is_public",t.ROOM_Z_SCALE="room_z_scale",t.AD_DISPLAY_DELAY="ad_display_delay",t.IS_PLAYING_GAME="is_playing_game",t.RESTRICTS_DRAGGING="restricts_dragging",t.RESTRICTS_SCALING="restricts_scaling",t.RESTRICTED_SCALE="room_scale",t})()},Byou:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{constructor(){this._isEnabled=!1,this._price=null,this._giftWrappers=null,this._boxTypes=null,this._ribbonTypes=null,this._giftFurnis=null}flush(){return this._boxTypes=null,this._giftFurnis=null,this._giftWrappers=null,this._ribbonTypes=null,this._isEnabled=null,this._price=null,!0}parse(t){if(!t)return!1;const e=[],s=[],i=[],n=[];this._isEnabled=t.readBoolean(),this._price=t.readInt();let r=t.readInt(),a=0;for(;a<r;)e.push(t.readInt()),a++;for(r=t.readInt(),a=0;a<r;)s.push(t.readInt()),a++;for(r=t.readInt(),a=0;a<r;)i.push(t.readInt()),a++;for(r=t.readInt(),a=0;a<r;)n.push(t.readInt()),a++;return this._giftWrappers=e,this._ribbonTypes=i,this._giftFurnis=n,this._boxTypes=s,!0}get giftWrappers(){return this._giftWrappers}get ribbonTypes(){return this._ribbonTypes}get giftFurnis(){return this._giftFurnis}get boxTypes(){return this._boxTypes}get isEnabled(){return this._isEnabled}get price(){return this._price}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},C1pE:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},C6IL:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("3r1x");let n=(()=>{class t extends i.a{constructor(t){super(t)}}return t.LOADED="NCE_LOADED",t.FAILED="NCE_FAILED",t})()},CsHF:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},Cyol:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("9vQN");class r{flush(){return this._controllerLevel=n.a.NONE,!0}parse(t){return!!t&&(this._controllerLevel=t.readInt(),!0)}get controllerLevel(){return this._controllerLevel}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},CzV9:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._hideWalls=!1,this._thicknessWall=0,this._thicknessFloor=0,!0}parse(t){if(!t)return!1;this._hideWalls=t.readBoolean();const e=t.readInt(),s=t.readInt();return this._thicknessWall=Math.pow(2,e),this._thicknessFloor=Math.pow(2,s),!0}get hideWalls(){return this._hideWalls}get thicknessWall(){return this._thicknessWall}get thicknessFloor(){return this._thicknessFloor}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"D/zE":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._unitId=null,this._handId=0,!0}parse(t){return!!t&&(this._unitId=t.readInt(),this._handId=t.readInt(),!0)}get unitId(){return this._unitId}get handId(){return this._handId}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},D5bJ:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._rank=-1,this._id=0,this._name=null,this._figure=null,this._joinedAt=null,!0}parse(t){return!!t&&(this._rank=t.readInt(),this._id=t.readInt(),this._name=t.readString(),this._figure=t.readString(),this._joinedAt=t.readString(),!0)}get id(){return this._id}get name(){return this._name}get figure(){return this._figure}get rank(){return this._rank}get joinedAt(){return this._joinedAt}}class r{flush(){return this._groupId=0,this._groupTitle=null,this._roomId=0,this._badge=null,this._totalMembersCount=0,this._result=[],this._admin=!1,this._pageSize=0,this._pageIndex=0,this._level=0,this._query=null,!0}parse(t){if(!t)return!1;this._groupId=t.readInt(),this._groupTitle=t.readString(),this._roomId=t.readInt(),this._badge=t.readString(),this._totalMembersCount=t.readInt();let e=t.readInt();for(;e>0;)this._result.push(new n(t)),e--;return this._admin=t.readBoolean(),this._pageSize=t.readInt(),this._pageIndex=t.readInt(),this._level=t.readInt(),this._query=t.readString(),!0}get groupId(){return this._groupId}get groupTitle(){return this._groupTitle}get roomId(){return this._roomId}get badge(){return this._badge}get totalMembersCount(){return this._totalMembersCount}get result(){return this._result}get admin(){return this._admin}get pageSize(){return this._pageSize}get pageIndex(){return this._pageIndex}get level(){return this._level}get query(){return this._query}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},DACI:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("IqKQ"),n=s("DFHD");let r=(()=>{class t{constructor(t,e,s,i=null){this._updateId=0,this._scale=1,this._x_scale=1,this._y_scale=1,this._z_scale=1,this._x_scale_internal=1,this._y_scale_internal=1,this._z_scale_internal=1,this._clipNear=-500,this._clipFar=500,this._displacements=null,this.scale=t,this._x=new n.a,this._y=new n.a,this._z=new n.a,this._directionAxis=new n.a,this._location=new n.a,this._direction=new n.a,this._depth=new n.a,this._x_scale_internal=1,this._y_scale_internal=1,this.x_scale=1,this.y_scale=1,this._z_scale_internal=Math.sqrt(.5)/Math.sqrt(3/4),this.z_scale=1,this.location=new n.a(s.x,s.y,s.z),this.direction=new n.a(e.x,e.y,e.z),this.setDepthVector(null!=i?i:e),this._displacements=new Map}static getIntersectionVector(t,e,s,i){const r=n.a.dotProduct(e,i);if(Math.abs(r)<1e-5)return null;const a=n.a.dif(t,s),o=-n.a.dotProduct(i,a)/r;return n.a.sum(t,n.a.product(e,o))}get updateId(){return this._updateId}get scale(){return this._scale/Math.sqrt(.5)}set scale(t){t<=1&&(t=1),(t*=Math.sqrt(.5))!=this._scale&&(this._scale=t,this._updateId++)}get directionAxis(){return this._directionAxis}get location(){return this._location.assign(this._loc),this._location.x=this._location.x*this._x_scale,this._location.y=this._location.y*this._y_scale,this._location.z=this._location.z*this._z_scale,this._location}set location(t){if(null==t)return;null==this._loc&&(this._loc=new n.a);const e=this._loc.x,s=this._loc.y,i=this._loc.z;this._loc.assign(t),this._loc.x=this._loc.x/this._x_scale,this._loc.y=this._loc.y/this._y_scale,this._loc.z=this._loc.z/this._z_scale,this._loc.x==e&&this._loc.y==s&&this._loc.z==i||this._updateId++}get direction(){return this._direction}set direction(t){let e,s,i,r,a;if(null==t)return;null==this._dir&&(this._dir=new n.a);const o=this._dir.x,c=this._dir.y,h=this._dir.z;this._dir.assign(t),this._direction.assign(t),this._dir.x==o&&this._dir.y==c&&this._dir.z==h||this._updateId++;const l=new n.a(0,1,0),u=new n.a(0,0,1),_=new n.a(1,0,0),d=t.x/180*Math.PI,g=t.y/180*Math.PI,m=t.z/180*Math.PI,p=Math.cos(d),f=Math.sin(d),E=n.a.sum(n.a.product(l,p),n.a.product(_,-f)),S=new n.a(u.x,u.y,u.z),v=n.a.sum(n.a.product(l,f),n.a.product(_,p)),b=Math.cos(g),I=Math.sin(g),R=new n.a(E.x,E.y,E.z),T=n.a.sum(n.a.product(S,b),n.a.product(v,I)),O=n.a.sum(n.a.product(S,-I),n.a.product(v,b));0!=m?(e=Math.cos(m),s=Math.sin(m),i=n.a.sum(n.a.product(R,e),n.a.product(T,s)),r=n.a.sum(n.a.product(R,-s),n.a.product(T,e)),a=new n.a(O.x,O.y,O.z),this._x.assign(i),this._y.assign(r),this._z.assign(a),this._directionAxis.assign(this._z)):(this._x.assign(R),this._y.assign(T),this._z.assign(O),this._directionAxis.assign(this._z))}set x_scale(t){this._x_scale!=t*this._x_scale_internal&&(this._x_scale=t*this._x_scale_internal,this._updateId++)}set y_scale(t){this._y_scale!=t*this._y_scale_internal&&(this._y_scale=t*this._y_scale_internal,this._updateId++)}set z_scale(t){this._z_scale!=t*this._z_scale_internal&&(this._z_scale=t*this._z_scale_internal,this._updateId++)}dispose(){this._x=null,this._y=null,this._z=null,this._loc=null,this._dir=null,this._directionAxis=null,this._location=null,null!=this._displacements&&(this._displacements.clear(),this._displacements=null)}setDisplacement(t,e){let s,i;null!=t&&null!=e&&null!=this._displacements&&(s=Math.trunc(Math.round(t.x))+"_"+Math.trunc(Math.round(t.y))+"_"+Math.trunc(Math.round(t.z)),this._displacements.delete(s),i=new n.a,i.assign(e),this._displacements.set(s,i),this._updateId++)}getDisplacenent(t){let e;return null!=this._displacements?(e=Math.trunc(Math.round(t.x))+"_"+Math.trunc(Math.round(t.y))+"_"+Math.trunc(Math.round(t.z)),this._displacements.get(e)):null}setDepthVector(t){let e,s,i,r,a;const o=new n.a(0,1,0),c=new n.a(0,0,1),h=new n.a(1,0,0),l=t.x/180*Math.PI,u=t.y/180*Math.PI,_=t.z/180*Math.PI,d=Math.cos(l),g=Math.sin(l),m=n.a.sum(n.a.product(o,d),n.a.product(h,-g)),p=new n.a(c.x,c.y,c.z),f=n.a.sum(n.a.product(o,g),n.a.product(h,d)),E=Math.cos(u),S=Math.sin(u),v=new n.a(m.x,m.y,m.z),b=n.a.sum(n.a.product(p,E),n.a.product(f,S)),I=n.a.sum(n.a.product(p,-S),n.a.product(f,E));0!=_?(e=Math.cos(_),s=Math.sin(_),i=n.a.sum(n.a.product(v,e),n.a.product(b,s)),r=n.a.sum(n.a.product(v,-s),n.a.product(b,e)),a=new n.a(I.x,I.y,I.z),this._depth.assign(a)):this._depth.assign(I),this._updateId++}adjustLocation(t,e){if(null==t||null==this._z)return;const s=n.a.product(this._z,-e),i=new n.a(t.x+s.x,t.y+s.y,t.z+s.z);this.location=i}getCoordinatePosition(t){if(null==t)return null;const e=n.a.scalarProjection(t,this._x),s=n.a.scalarProjection(t,this._y),i=n.a.scalarProjection(t,this._z);return new n.a(e,s,i)}getScreenPosition(t){let e=n.a.dif(t,this._loc);e.x=e.x*this._x_scale,e.y=e.y*this._y_scale,e.z=e.z*this._z_scale;let s=n.a.scalarProjection(e,this._depth);if(s<this._clipNear||s>this._clipFar)return null;let i=n.a.scalarProjection(e,this._x),r=-n.a.scalarProjection(e,this._y);i*=this._scale,r*=this._scale;const a=this.getDisplacenent(t);return null!=a&&(e=n.a.dif(t,this._loc),e.add(a),e.x=e.x*this._x_scale,e.y=e.y*this._y_scale,e.z=e.z*this._z_scale,s=n.a.scalarProjection(e,this._depth)),e.x=i,e.y=r,e.z=s,e}getScreenPoint(t){const e=this.getScreenPosition(t);return null==e?null:new i.Point(e.x,e.y)}getPlanePosition(e,s,r,a){let o,c;const h=-e.y/this._scale,l=n.a.product(this._x,e.x/this._scale);l.add(n.a.product(this._y,h));const u=new n.a(this._loc.x*this._x_scale,this._loc.y*this._y_scale,this._loc.z*this._z_scale);u.add(l);const _=this._z,d=new n.a(s.x*this._x_scale,s.y*this._y_scale,s.z*this._z_scale),g=new n.a(r.x*this._x_scale,r.y*this._y_scale,r.z*this._z_scale),m=new n.a(a.x*this._x_scale,a.y*this._y_scale,a.z*this._z_scale),p=n.a.crossProduct(g,m),f=new n.a;return f.assign(t.getIntersectionVector(u,_,d,p)),null!=f?(f.subtract(d),o=n.a.scalarProjection(f,r)/g.length*r.length,c=n.a.scalarProjection(f,a)/m.length*a.length,new i.Point(o,c)):null}performZoom(){this.scale=this.isZoomedIn()?t.SCALE_ZOOMED_OUT:t.SCALE_ZOOMED_IN}isZoomedIn(){return this.scale==t.SCALE_ZOOMED_IN}performZoomOut(){this.scale=t.SCALE_ZOOMED_OUT}performZoomIn(){this.scale=t.SCALE_ZOOMED_IN}}return t.SCALE_ZOOMED_IN=64,t.SCALE_ZOOMED_OUT=32,t})()},DFHD:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t=0,e=0,s=0){this._x=t,this._y=e,this._z=s,this._length=NaN}static sum(t,e){return t&&e?new i(t.x+e.x,t.y+e.y,t.z+e.z):null}static dif(t,e){return t&&e?new i(t.x-e.x,t.y-e.y,t.z-e.z):null}static product(t,e){return t?new i(t.x*e,t.y*e,t.z*e):null}static dotProduct(t,e){return t&&e?t.x*e.x+t.y*e.y+t.z*e.z:0}static crossProduct(t,e){return t&&e?new i(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x):null}static scalarProjection(t,e){if(!t||!e)return-1;const s=e.length;return s>0?(t.x*e.x+t.y*e.y+t.z*e.z)/s:-1}static cosAngle(t,e){if(!t||!e)return 0;const s=t.length*e.length;return s?i.dotProduct(t,e)/s:0}static isEqual(t,e){return!(!t||!e)&&t.x===e.x&&t.y===e.y&&t.z===e.z}negate(){this._x=-this._x,this._y=-this._y,this._z=-this._z}add(t){t&&(this._x+=t.x,this._y+=t.y,this._z+=t.z,this._length=NaN)}subtract(t){t&&(this._x-=t.x,this._y-=t.y,this._z-=t.z,this._length=NaN)}multiply(t){this._x*=t,this._y*=t,this._z*=t,this._length=NaN}divide(t){this._x/=t,this._y/=t,this._z/=t,this._length=NaN}assign(t){t&&(this._x=t.x,this._y=t.y,this._z=t.z,this._length=NaN)}get x(){return this._x}set x(t){this._x=t,this._length=NaN}get y(){return this._y}set y(t){this._y=t,this._length=NaN}get z(){return this._z}set z(t){this._z=t,this._length=NaN}get length(){return isNaN(this._length)&&(this._length=Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z)),this._length}toString(){return`[Vector3d: ${this._x}, ${this._y}, ${this._z}]`}}},DV2U:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{flush(){return this._roomId=0,this._users=new Map,!0}parse(t){if(!t)return!1;this._roomId=t.readInt();let e=t.readInt();for(;e>0;){const s=t.readInt(),i=t.readString();this._users.set(s,i),e--}return!0}get roomId(){return this._roomId}get users(){return this._users}}},DicI:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i=-1){this._data=[],this._data.push(t),this._data.push(e),this._data.push(s),-1!=i&&this._data.push(i)}getMessageArray(){return this._data}dispose(){}}},DpKJ:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._amount=0,this._amountChanged=0,this._type=-1,!0}parse(t){return!!t&&(this._amount=t.readInt(),this._amountChanged=t.readInt(),this._type=t.readInt(),!0)}get amount(){return this._amount}get amountChanged(){return this._amountChanged}get type(){return this._type}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},EAxq:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},EEQp:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i=-1){this._data=[],this._data.push(t),this._data.push(e),this._data.push(s),-1!=i&&this._data.push(i)}getMessageArray(){return this._data}dispose(){}}},EHDF:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("Ns5P");let n=(()=>{class t extends i.a{constructor(e,s){super(t.USER_DATA_UPDATED,e),this._addedUsers=s}get addedUsers(){return this._addedUsers}}return t.USER_DATA_UPDATED="RMUDUE_USER_DATA_UPDATED",t})()},Eb1Y:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._ignoredUsers=[],!0}parse(t){if(!t)return!1;this._ignoredUsers=[];let e=t.readInt();for(;e>0;)this._ignoredUsers.push(t.readString()),e--;return!0}get ignoredUsers(){return this._ignoredUsers}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},FV0X:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},FXkd:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i,n){this._data=[t,e.length,...e,s,i.length,...i,n]}getMessageArray(){return this._data}dispose(){}}},"Fcb+":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},Fq7D:function(t,e,s){"use strict";s.d(e,"a",function(){return h});var i=s("5+UO");let n=(()=>{class t{constructor(t,e,s,i,n,r,a,o,c,h,l,u,_,d,g,m){this._disposed=!1,this._Str_6036=t,this._state=e,this._Str_2629=s,this._Str_21044=i,this._issueAgeInMilliseconds=n,this._priority=r,this._Str_9559=a,this._Str_21130=o,this._Str_19722=c,this._Str_2797=h,this._Str_5502=l,this._Str_9859=u,this._Str_21393=_,this._message=d,this._Str_10679=g,this._Str_15205=m,this._Str_19084=0}get _Str_2869(){return this._Str_6036}get state(){return this._state}get _Str_2712(){return this._Str_2629}get _Str_7437(){return this._Str_21044}get issueAgeInMilliseconds(){return this._issueAgeInMilliseconds}get priority(){return this._priority}get _Str_16842(){return this._Str_9559}get _Str_19929(){return this._Str_21130}get _Str_19615(){return this._Str_19722}get _Str_2662(){return this._Str_2797}get _Str_5842(){return this._Str_5502}get _Str_5547(){return this._Str_9859}get _Str_22164(){return this._Str_21393}get message(){return this._message}get _Str_20325(){return this._Str_10679}get _Str_26050(){return this._Str_15205}dispose(){if(!this.disposed){for(const t of this._Str_15205)t.dispose();this._Str_15205=[],this._disposed=!0}}get disposed(){return this._disposed}_Str_15885(t){const e=(this._issueAgeInMilliseconds+t-this._Str_19084)/1e3/60,s=e%60,i=e/60;return(i<10?"0":"")+i+":"+(s<10?"0":"")+s}}return t._Str_5035=1,t._Str_8056=2,t._Str_17136=3,t})();class r{constructor(t){this._disposed=!1,this._pattern=t.readString(),this._startIndex=t.readInt(),this._endIndex=t.readInt()}dispose(){this._disposed=!0,this._pattern="",this._startIndex=-1,this._endIndex=-1}get disposed(){return this._disposed}get pattern(){return this._pattern}get startIndex(){return this._startIndex}get endIndex(){return this._endIndex}}class a{get _Str_22192(){return this._Str_13730}flush(){return this._Str_13730=null,!0}parse(t){const e=t.readInt(),s=t.readInt(),i=t.readInt(),a=t.readInt(),o=t.readInt(),c=t.readInt(),h=t.readInt(),l=t.readInt(),u=t.readString(),_=t.readInt(),d=t.readString(),g=t.readInt(),m=t.readString(),p=t.readString(),f=t.readInt(),E=t.readInt(),S=[];let v=0;for(;v<E;)S.push(new r(t)),v++;return this._Str_13730=new n(e,s,i,a,o,c,h,l,u,_,d,g,m,p,f,S),!0}}class o{constructor(t){this._disposed=!1;const e=new a;this._issues=[],this._Str_12818=[],this._Str_14428=[];let s=t.readInt(),i=0;for(;i<s;)e.parse(t)&&this._issues.push(e._Str_22192),i++;for(s=t.readInt(),i=0;i<s;)this._Str_12818.push(t.readString()),i++;for(s=t.readInt(),i=0;i<s;)t.readString(),i++;for(this._Str_21327=t.readBoolean(),this._Str_20034=t.readBoolean(),this._Str_21542=t.readBoolean(),this._Str_22205=t.readBoolean(),this._Str_22169=t.readBoolean(),this._Str_19231=t.readBoolean(),this._Str_19156=t.readBoolean(),s=t.readInt(),i=0;i<s;)this._Str_14428.push(t.readString()),i++}dispose(){this._disposed||(this._disposed=!0,this._Str_12818=null,this._Str_14428=null,this._issues=null)}get disposed(){return this._disposed}get _Str_15690(){return this._Str_12818}get _Str_18336(){return this._Str_14428}get issues(){return this._issues}get _Str_24070(){return this._Str_21327}get _Str_12765(){return this._Str_20034}get _Str_18465(){return this._Str_21542}get _Str_20397(){return this._Str_22205}get _Str_21242(){return this._Str_22169}get _Str_24851(){return this._Str_19231}get _Str_24333(){return this._Str_19156}}class c{constructor(){this._data=null}flush(){return this._data=null,!0}parse(t){return this._data=new o(t),!0}get data(){return this._data}}class h extends i.a{constructor(t){super(t,c)}getParser(){return this.parser}}},Ftck:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},Fv14:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("vuPI"),n=s("Xr/m"),r=s("vzKh");class a extends n.a{constructor(t=null){super(),this._logger=t instanceof r.a?t:new r.a(this.constructor.name),this._events=new i.a,this._isLoaded=!1,this._isLoading=!1}init(){this._isLoaded||this._isLoading||this.isDisposing||(this._isLoading=!0,this.onInit(),this._isLoaded=!0,this._isLoading=!1)}onInit(){}onDispose(){this._events&&this._events.dispose(),super.onDispose()}reload(){this.dispose(),this.init()}get logger(){return this._logger}get events(){return this._events}get isLoaded(){return this._isLoaded}get isLoading(){return this._isLoading}}},Fwdp:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{flush(){return this._name=null,this._days=0,this._int1=0,this._months=0,this._years=0,this._hasEverBeenMember=!1,this._isVip=!1,this._pastClubDays=0,this._pastVIPDays=0,this._totalSeconds=0,!0}parse(t){return!!t&&(this._name=t.readString(),this._days=t.readInt(),this._int1=t.readInt(),this._months=t.readInt(),this._years=t.readInt(),this._hasEverBeenMember=t.readBoolean(),this._isVip=t.readBoolean(),this._pastClubDays=t.readInt(),this._pastVIPDays=t.readInt(),this._totalSeconds=t.readInt(),!0)}get name(){return this._name}get days(){return this._days}get int1(){return this._int1}get months(){return this._months}get years(){return this._years}get hasEverBeenMember(){return this._hasEverBeenMember}get isVip(){return this._isVip}get pastClubDays(){return this._pastClubDays}get pastVIPDays(){return this._pastVIPDays}get totalSeconds(){return this._totalSeconds}}return t._Str_14729=3,t})()},G0tw:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("3r1x");let n=(()=>{class t extends i.a{constructor(t,e){super(t),this._roomId=e}get roomId(){return this._roomId}}return t.INITIALIZED="REE_INITIALIZED",t.ENGINE_INITIALIZED="REE_ENGINE_INITIALIZED",t.OBJECTS_INITIALIZED="REE_OBJECTS_INITIALIZED",t.NORMAL_MODE="REE_NORMAL_MODE",t.GAME_MODE="REE_GAME_MODE",t.ROOM_ZOOMED="REE_ROOM_ZOOMED",t.DISPOSED="REE_DISPOSED",t})()},G3dz:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this._avatarId=t.readInt(),this._avatarName=t.readString(),this._avatarMotto=t.readString(),this._isAvatarOnline=t.readBoolean(),this._canFollow=t.readBoolean(),this._avatarGender=t.readInt(),this._avatarFigure=t.readString(),this._lastOnlineData=t.readString(),this._realName=t.readString()}get avatarId(){return this._avatarId}get avatarName(){return this._avatarName}get avatarMotto(){return this._avatarMotto}get isAvatarOnline(){return this._isAvatarOnline}get canFollow(){return this._canFollow}get avatarGender(){return this._avatarGender}get avatarFigure(){return this._avatarFigure}get lastOnlineData(){return this._lastOnlineData}get realName(){return this._realName}}class r{flush(){return this._friends=[],this._others=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._friends.push(new n(t)),e--;let s=t.readInt();for(;s>0;)this._others.push(new n(t)),s--;return!0}get friends(){return this._friends}get others(){return this._others}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},GBA0:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("OiFD");class r{flush(){return this._pet=null,this._boughtAsGift=!1,!0}parse(t){return this._pet=new n.a(t),this._boughtAsGift=t.readBoolean(),!0}get pet(){return this._pet}get boughtAsGift(){return this._boughtAsGift}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},GBmB:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},GFvZ:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},GJWb:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._looks=new Map,!0}parse(t){if(!t)return!1;t.readInt();let e=t.readInt();for(;e>0;){const s=t.readInt(),i=t.readString(),n=t.readString();this._looks.set(s,[i,n]),e--}return!0}get looks(){return this._looks}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"GN+4":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("vzKh"),n=s("M98o");let r=(()=>{class t{static logEventLog(t){try{n.a.available&&n.a.call("logEventLog",t)}catch(e){i.a.log("External interface not working, failed to log event log.")}}static openPage(t){try{n.a.available?n.a.call("openPage",t):i.a.log("External interface not available, openPage failed.")}catch(e){i.a.log("Failed to open web page "+t)}}static sendHeartBeat(){try{n.a.available&&n.a.call("heartBeat")}catch(t){i.a.log("Failed to send heartbeat")}}static openWebPageAndMinimizeClient(e){try{n.a.available&&t.openPage(e)}catch(s){i.a.log("Failed to open web page "+e)}}static closeWebPageAndRestoreClient(){try{n.a.available&&n.a.call("closeWebPageAndRestoreClient")}catch(t){i.a.log("Failed to close web page and restore client!")}}static openHabblet(t,e=null){try{n.a.available&&n.a.call("openHabblet",t,e)}catch(s){i.a.log("Failed to open Habblet "+t)}}static closeHabblet(t,e=null){try{n.a.available&&n.a.call("closeHabblet",t,e)}catch(s){i.a.log("Failed to close Habblet "+t)}}static send(t,e){try{n.a.available&&n.a.call("disconnect",t,e)}catch(s){i.a.log("Failed to close send ")}}static showGame(t){try{n.a.available&&n.a.callGame("showGame",t)}catch(e){i.a.log("Failed to open game: "+e)}}static hideGame(){try{n.a.available&&n.a.callGame("hideGame")}catch(t){i.a.log("Failed to hide game")}}static open(t){try{n.a.available?n.a.call("openExternalLink",escape(t)):i.a.log("External interface not available. Could not request to open: "+t)}catch(e){i.a.log("External interface not working. Could not request to open: "+t)}}static roomVisited(t){try{n.a.available?n.a.call("roomVisited",t):i.a.log("External interface not available. Could not store last room visit.")}catch(e){i.a.log("External interface not working. Could not store last room visit.")}}static openMinimail(t){try{n.a.available?n.a.call("openMinimail",t):i.a.log("External interface not available. Could not open minimail.")}catch(e){i.a.log("External interface not working. Could not open minimail.")}}static openNews(){try{n.a.available?n.a.call("openNews"):i.a.log("External interface not available. Could not open news.")}catch(t){i.a.log("External interface not working. Could not open news.")}}static closeNews(){try{n.a.available?n.a.call("closeNews"):i.a.log("External interface not available. Could not close news.")}catch(t){i.a.log("External interface not working. Could not close news.")}}static openAvatars(){try{n.a.available?n.a.call("openAvatars"):i.a.log("External interface not available. Could not open avatars.")}catch(t){i.a.log("External interface not working. Could not open avatars.")}}static openRoomEnterAd(){try{n.a.available?n.a.call("openRoomEnterAd"):i.a.log("External interface not available. Could not open roomenterad.")}catch(t){i.a.log("External interface not working. Could not open roomenterad.")}}static updateFigure(t){try{n.a.available?n.a.call("updateFigure",t):i.a.log("External interface not available. Could not update figure.")}catch(e){i.a.log("External interface not working. Could not update figure.")}}}return t.ADVERTISEMENT="advertisement",t.OPENLINK="openlink",t.OPENROOM="openroom",t})()},Gb7F:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},GfbW:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("G0tw");let n=(()=>{class t extends i.a{constructor(t,e,s,i,n,r){super(t,e),this._enable=s,this._hue=i,this._saturation=n,this._lightness=r}get enable(){return this._enable}get hue(){return this._hue}get saturation(){return this._saturation}get lightness(){return this._lightness}}return t.ROOM_BACKGROUND_COLOR="ROHSLCEE_ROOM_BACKGROUND_COLOR",t})()},GlfS:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO"),n=s("DV2U");class r extends i.a{constructor(t){super(t,n.a)}getParser(){return this.parser}}},"H/4j":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e=0){this._data=[e,t]}getMessageArray(){return this._data}dispose(){}}},"H/Ns":function(t,e,s){"use strict";s.d(e,"a",function(){return Ft});var i=s("Fv14"),n=s("G0tw"),r=s("Ns5P"),a=s("UTIc");let o=(()=>{class t{}return t.KICKED_OUT_OF_ROOM=4008,t._Str_19451=-13001,t})();var c=s("4vrv"),h=s("Xr/m");class l extends h.a{constructor(t,e){super(),this._connection=t,this._listener=e,this._roomId=0}onDispose(){this._connection=null,this._listener=null}setRoomId(t){this._roomId=t}get connection(){return this._connection}get listener(){return this._listener}get roomId(){return this._roomId}}class u extends l{constructor(t,e){super(t,e),t.addMessageEvent(new a.a(this.onRoomGenericError.bind(this)))}onRoomGenericError(t){if(!(t instanceof a.a))return;const e=t.getParser();if(!e)return;const s=this.listener.getSession(this.roomId);if(!s)return;let i=null;switch(e.errorCode){case o.KICKED_OUT_OF_ROOM:i=c.a.RSEME_KICKED;break;default:return}i&&0!=i.length&&this.listener.events.dispatchEvent(new c.a(i,s))}}var _=s("QXLr"),d=s("HY2+"),g=s("bXGL"),m=s("sRv6"),p=s("xq+5"),f=s("jFxZ"),E=s("HPzH"),S=s("gLCd"),v=s("Z0XG");class b extends l{constructor(t,e){super(t,e),t.addMessageEvent(new m.a(this.onRoomUnitChatEvent.bind(this))),t.addMessageEvent(new p.a(this.onRoomUnitChatEvent.bind(this))),t.addMessageEvent(new f.a(this.onRoomUnitChatEvent.bind(this))),t.addMessageEvent(new E.a(this.onRoomUnitHandItemReceivedEvent.bind(this))),t.addMessageEvent(new _.a(this.onRespectReceivedEvent.bind(this))),t.addMessageEvent(new d.a(this.onFloodControlEvent.bind(this))),t.addMessageEvent(new g.a(this.onRemainingMuteEvent.bind(this)))}onRoomUnitChatEvent(t){if(!this.listener)return;const e=this.listener.getSession(this.roomId);if(!e)return;const s=t.getParser();if(!s)return;let i=v.a.CHAT_NORMAL;t instanceof p.a?i=v.a.CHAT_SHOUT:t instanceof f.a&&(i=v.a.CHAT_WHISPER);const n=new v.a(v.a.CHAT_EVENT,e,s.roomIndex,s.message,i,s.bubble);this.listener.events.dispatchEvent(n)}onRoomUnitHandItemReceivedEvent(t){if(!this.listener)return;const e=this.listener.getSession(this.roomId);if(!e)return;const s=t.getParser();s&&this.listener.events.dispatchEvent(new v.a(v.a.CHAT_EVENT,e,s.giverUserId,"",v.a._Str_8971,S.a.GENERIC,null,s.handItemType))}onRespectReceivedEvent(t){if(!this.listener)return;const e=this.listener.getSession(this.roomId);if(!e)return;const s=t.getParser();if(!s)return;const i=e.userDataManager.getUserData(s.userId);i&&this.listener.events.dispatchEvent(new v.a(v.a.CHAT_EVENT,e,i.roomIndex,"",v.a._Str_5821,S.a.GENERIC))}onFloodControlEvent(t){if(!this.listener)return;const e=this.listener.getSession(this.roomId);if(!e)return;const s=t.getParser();s&&this.listener.events.dispatchEvent(new v.a(v.a.FLOOD_EVENT,e,-1,s.seconds.toString(),0,0))}onRemainingMuteEvent(t){if(!this.listener)return;const e=this.listener.getSession(this.roomId);if(!e)return;const s=t.getParser();s&&this.listener.events.dispatchEvent(new v.a(v.a.CHAT_EVENT,e,e.ownRoomIndex,"",v.a._Str_8909,S.a.GENERIC,null,s.seconds))}}var I=s("10wl");let R=(()=>{class t extends r.a{constructor(t,e){super(t,e)}}return t.RSDUE_ALLOW_PETS="RSDUE_ALLOW_PETS",t})();class T extends l{constructor(t,e){super(t,e),t.addMessageEvent(new I.a(this.onRoomInfoEvent.bind(this)))}onRoomInfoEvent(t){if(!(t instanceof I.a))return;const e=t.getParser();if(!e)return;if(e.roomForward)return;const s=this.listener.getSession(this.roomId);if(!s)return;const i=e.data;s.tradeMode=i.tradeMode,s.isGuildRoom=0!==i.habboGroupId,s.doorMode=i.doorMode,s.allowPets=i.allowPets,s.moderationSettings=e.moderation,this.listener.events.dispatchEvent(new R(R.RSDUE_ALLOW_PETS,s)),this.listener.events.dispatchEvent(new r.a(r.a.ROOM_DATA,s))}}var O=s("/icx"),y=s("9Bkc");class C extends l{constructor(t,e){super(t,e),t.addMessageEvent(new O.a(this._Str_25786.bind(this)))}_Str_25786(t){if(!t)return;const e=t.getParser();if(!e)return;const s=this.listener.getSession(this.roomId);if(!s)return;const i=new y.a(y.a.RSDPE_PRESETS,s);i.selectedPresetId=e._Str_6226;let n=0;for(;n<e._Str_10888;){const t=e._Str_14989(n);t&&i._Str_17287(t.id,t.type,t.color,t.intensity),n++}this.listener&&this.listener.events.dispatchEvent(i)}}var A=s("HkHk"),M=s("Cyol"),w=s("EAxq"),D=s("9vQN");class N extends l{constructor(t,e){super(t,e),t.addMessageEvent(new M.a(this.onRoomRightsEvent.bind(this))),t.addMessageEvent(new A.a(this.onRoomRightsClearEvent.bind(this))),t.addMessageEvent(new w.a(this.onRoomRightsOwnerEvent.bind(this)))}onRoomRightsEvent(t){if(!(t instanceof M.a))return;const e=this.listener.getSession(this.roomId);e&&e.setControllerLevel(t.getParser().controllerLevel)}onRoomRightsClearEvent(t){if(!(t instanceof A.a))return;const e=this.listener.getSession(this.roomId);e&&e.setControllerLevel(D.a.NONE)}onRoomRightsOwnerEvent(t){if(!(t instanceof w.a))return;const e=this.listener.getSession(this.roomId);e&&e.setRoomOwner()}}var U=s("kgJd"),x=s("yd16");class L extends l{constructor(t,e){super(t,e),t&&t.addMessageEvent(new U.a(this.onFurnitureGiftOpenedEvent.bind(this)))}onFurnitureGiftOpenedEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=this.listener.getSession(this.roomId);s&&this.listener&&this.listener.events&&this.listener.events.dispatchEvent(new x.a(x.a.RSPE_PRESENT_OPENED,s,e.classId,e._Str_2887,e.productCode,e.placedItemId,e.placedItemType,e._Str_4057,e.petFigureString))}}var P=s("q4z0"),F=s("pDhE"),k=s("8lyR"),V=s("AFd5"),B=s("zTkZ"),W=s("vrkx");let K=(()=>{class t extends l{constructor(t,e){super(t,e),t.addMessageEvent(new V.a(this.onRoomEnterEvent.bind(this))),t.addMessageEvent(new B.a(this.onRoomModelNameEvent.bind(this))),t.addMessageEvent(new P.a(this.onDesktopViewEvent.bind(this))),t.addMessageEvent(new F.a(this.onRoomDoorbellAcceptedEvent.bind(this))),t.addMessageEvent(new k.a(this.onRoomDoorbellRejectedEvent.bind(this)))}onRoomEnterEvent(e){e instanceof V.a&&this.listener&&this.listener.sessionUpdate(this.roomId,t.RS_CONNECTED)}onRoomModelNameEvent(e){if(!(e instanceof B.a))return;const s=this.roomId,i=e.getParser().roomId;this.listener&&(this.listener.sessionReinitialize(s,i),this.listener.sessionUpdate(this.roomId,t.RS_READY))}onDesktopViewEvent(e){e instanceof P.a&&this.listener&&this.listener.sessionUpdate(this.roomId,t.RS_DISCONNECTED)}onRoomDoorbellAcceptedEvent(t){if(!(t instanceof F.a&&this.listener))return;const e=t.getParser();if(!e)return;const s=e.userName;if(s&&s.length&&this.listener.events){const t=this.listener.getSession(this.roomId);if(!t)return;this.listener.events.dispatchEvent(new W.a(W.a.RSDE_ACCEPTED,t,s))}}onRoomDoorbellRejectedEvent(e){if(!(e instanceof k.a&&this.listener))return;const s=e.getParser();if(!s)return;const i=s.userName;if(i&&i.length){if(this.listener.events){const t=this.listener.getSession(this.roomId);if(!t)return;this.listener.events.dispatchEvent(new W.a(W.a.RSDE_REJECTED,t,i))}}else this.listener.sessionUpdate(this.roomId,t.RS_DISCONNECTED)}}return t.RS_CONNECTED="RS_CONNECTED",t.RS_READY="RS_READY",t.RS_DISCONNECTED="RS_DISCONNECTED",t})();var G=s("wW/F"),H=s("AKqU"),j=s("lDeN"),z=s("00EK"),Y=s("0LNC"),q=s("mGgu"),Z=s("fVO9"),X=s("jzpY"),Q=s("n7CB"),J=s("xB90"),$=s("/3sV"),tt=s("TPa8"),et=s("Qi++"),st=s("e6Xd"),it=s("hXx8"),nt=s("EHDF");class rt{constructor(){this._Str_24910=7}get id(){return this._id}set id(t){this._id=t}get level(){return this._level}set level(t){this._level=t}get maximumLevel(){return this._maximumLevel}set maximumLevel(t){this._maximumLevel=t}get experience(){return this._experience}set experience(t){this._experience=t}get levelExperienceGoal(){return this._levelExperienceGoal}set levelExperienceGoal(t){this._levelExperienceGoal=t}get energy(){return this._energy}set energy(t){this._energy=t}get maximumEnergy(){return this._maximumEnergy}set maximumEnergy(t){this._maximumEnergy=t}get happyness(){return this._happyness}set happyness(t){this._happyness=t}get maximumHappyness(){return this._maximumHappyness}set maximumHappyness(t){this._maximumHappyness=t}get ownerId(){return this._ownerId}set ownerId(t){this._ownerId=t}get ownerName(){return this._ownerName}set ownerName(t){this._ownerName=t}get respect(){return this._respect}set respect(t){this._respect=t}get age(){return this._age}set age(t){this._age=t}get unknownRarity(){return this._unknownRarity}set unknownRarity(t){this._unknownRarity=t}get saddle(){return this._saddle}set saddle(t){this._saddle=t}get rider(){return this._rider}set rider(t){this._rider=t}get _Str_3307(){return this._Str_4460}set _Str_3307(t){this._Str_4460=t}get publiclyRideable(){return this._publiclyRideable}set publiclyRideable(t){this._publiclyRideable=t}get breedable(){return this._breedable}set breedable(t){this._breedable=t}get fullyGrown(){return this._fullyGrown}set fullyGrown(t){this._fullyGrown=t}get dead(){return this._dead}set dead(t){this._dead=t}get rarityLevel(){return this._rarityLevel}set rarityLevel(t){this._rarityLevel=t}get maximumTimeToLive(){return this._maximumTimeToLive}set maximumTimeToLive(t){this._maximumTimeToLive=t}get remainingTimeToLive(){return this._remainingTimeToLive}set remainingTimeToLive(t){this._remainingTimeToLive=t}get remainingGrowTime(){return this._remainingGrowTime}set remainingGrowTime(t){this._remainingGrowTime=t}get publiclyBreedable(){return this._publiclyBreedable}set publiclyBreedable(t){this._publiclyBreedable=t}get _Str_20651(){return this._Str_24910}}class at{constructor(t){this._roomIndex=-1,this._name="",this._type=0,this._sex="",this._figure="",this._custom="",this._webID=0,this._groupID="",this._groupStatus=0,this._groupName="",this._ownerId=0,this._ownerName="",this._petLevel=0,this._rarityLevel=0,this._roomIndex=t}get roomIndex(){return this._roomIndex}get activityPoints(){return this._activityPoints}set activityPoints(t){this._activityPoints=t}get name(){return this._name}set name(t){this._name=t}get type(){return this._type}set type(t){this._type=t}get sex(){return this._sex}set sex(t){this._sex=t}get figure(){return this._figure}set figure(t){this._figure=t}get custom(){return this._custom}set custom(t){this._custom=t}get webID(){return this._webID}set webID(t){this._webID=t}get guildId(){return this._groupID}set guildId(t){this._groupID=t}get groupName(){return this._groupName}set groupName(t){this._groupName=t}get groupStatus(){return this._groupStatus}set groupStatus(t){this._groupStatus=t}get ownerId(){return this._ownerId}set ownerId(t){this._ownerId=t}get ownerName(){return this._ownerName}set ownerName(t){this._ownerName=t}get rarityLevel(){return this._rarityLevel}set rarityLevel(t){this._rarityLevel=t}get hasSaddle(){return this._hasSaddle}set hasSaddle(t){this._hasSaddle=t}get isRiding(){return this._isRiding}set isRiding(t){this._isRiding=t}get canBreed(){return this._canBreed}set canBreed(t){this._canBreed=t}get canHarvest(){return this._canHarvest}set canHarvest(t){this._canHarvest=t}get canRevive(){return this._canRevive}set canRevive(t){this._canRevive=t}get hasBreedingPermission(){return this._hasBreedingPermission}set hasBreedingPermission(t){this._hasBreedingPermission=t}get petLevel(){return this._petLevel}set petLevel(t){this._petLevel=t}get botSkills(){return this._botSkills}set botSkills(t){this._botSkills=t}get isModerator(){return this._Str_9831}set isModerator(t){this._Str_9831=t}}class ot extends l{constructor(t,e){super(t,e),t.addMessageEvent(new Z.a(this.onRoomUnitEvent.bind(this))),t.addMessageEvent(new X.a(this.onRoomUnitInfoEvent.bind(this))),t.addMessageEvent(new Q.a(this.onRoomUnitRemoveEvent.bind(this))),t.addMessageEvent(new q.a(this.onRoomUnitDanceEvent.bind(this))),t.addMessageEvent(new J.a(this.onUserCurrentBadgesEvent.bind(this))),t.addMessageEvent(new z.a(this.onRoomDoorbellEvent.bind(this))),t.addMessageEvent(new $.a(this.onUserNameChangeMessageEvent.bind(this))),t.addMessageEvent(new G.a(this.onNewFriendRequestEvent.bind(this))),t.addMessageEvent(new Y.a(this.onPetInfoEvent.bind(this))),t.addMessageEvent(new j.a(this.onPetPlacingError.bind(this))),t.addMessageEvent(new H.a(this.onBotError.bind(this)))}onRoomUnitEvent(t){if(!this.listener)return;const e=this.listener.getSession(this.roomId);if(!e)return;const s=t.getParser().users,i=[];if(s&&s.length)for(const n of s){if(!n)continue;const t=new at(n.roomIndex);t.name=n.name,t.custom=n.custom,t.activityPoints=n.activityPoints,t.figure=n.figure,t.type=n.userType,t.webID=n.webID,t.guildId=n.groupID,t.groupName=n.groupName,t.groupStatus=n.groupStatus,t.sex=n.sex,t.ownerId=n.ownerId,t.ownerName=n.ownerName,t.rarityLevel=n.rarityLevel,t.hasSaddle=n.hasSaddle,t.isRiding=n.isRiding,t.canBreed=n.canBreed,t.canHarvest=n.canHarvest,t.canRevive=n.canRevive,t.hasBreedingPermission=n.hasBreedingPermission,t.petLevel=n.petLevel,t.botSkills=n.botSkills,t.isModerator=n.isModerator,e.userDataManager.getUserData(n.roomIndex)||i.push(t),e.userDataManager.updateUserData(t)}this.listener.events.dispatchEvent(new nt.a(e,i))}onRoomUnitInfoEvent(t){if(!this.listener)return;const e=this.listener.getSession(this.roomId);if(!e)return;const s=t.getParser();s&&(e.userDataManager.updateFigure(s.unitId,s.figure,s.gender,!1,!1),e.userDataManager.updateMotto(s.unitId,s.motto))}onRoomUnitRemoveEvent(t){if(!this.listener)return;const e=this.listener.getSession(this.roomId);e&&e.userDataManager.removeUserData(t.getParser().unitId)}onRoomUnitDanceEvent(t){if(!this.listener)return;const e=t.getParser();if(!e)return;const s=this.listener.getSession(this.roomId);s&&this.listener.events.dispatchEvent(new tt.a(s,e.unitId,e.danceId))}onUserCurrentBadgesEvent(t){if(!this.listener)return;const e=t.getParser();if(!e)return;const s=this.listener.getSession(this.roomId);s&&(s.userDataManager.setUserBadges(e.userId,e.badges),this.listener.events.dispatchEvent(new it.a(s,e.userId,e.badges)))}onRoomDoorbellEvent(t){if(!this.listener)return;const e=t.getParser();if(!e)return;const s=e.userName;if(!s||!s.length)return;const i=this.listener.getSession(this.roomId);i&&this.listener.events.dispatchEvent(new W.a(W.a.DOORBELL,i,s))}onUserNameChangeMessageEvent(t){if(!this.listener)return;const e=t.getParser();if(!e)return;const s=this.listener.getSession(this.roomId);s&&s.userDataManager.updateName(e.id,e.newName)}onNewFriendRequestEvent(t){if(!this.listener)return;const e=t.getParser();if(!e)return;const s=this.listener.getSession(this.roomId);if(!s)return;const i=e.request;this.listener.events.dispatchEvent(new et.a(s,i.requestId,i.requesterUserId,i.requesterName))}onPetInfoEvent(t){if(!this.listener)return;const e=t.getParser();if(!e)return;const s=this.listener.getSession(this.roomId);if(!s)return;const i=new rt;i.id=e.id,i.level=e.level,i.maximumLevel=e.maximumLevel,i.experience=e.experience,i.levelExperienceGoal=e.levelExperienceGoal,i.energy=e.energy,i.maximumEnergy=e.maximumEnergy,i.happyness=e.happyness,i.maximumHappyness=e.maximumHappyness,i.ownerId=e.ownerId,i.ownerName=e.ownerName,i.respect=e.respect,i.age=e.age,i.unknownRarity=e.unknownRarity,i.saddle=e.saddle,i.rider=e.rider,i.breedable=e.breedable,i.fullyGrown=e.fullyGrown,i.rarityLevel=e.rarityLevel,i.dead=e.dead,i._Str_3307=e._Str_3307,i.publiclyRideable=e.publiclyRideable,i.maximumTimeToLive=e.maximumTimeToLive,i.remainingTimeToLive=e.remainingTimeToLive,i.remainingGrowTime=e.remainingGrowTime,i.publiclyBreedable=e.publiclyBreedable,this.listener.events.dispatchEvent(new st.a(s,i))}onPetPlacingError(t){if(!t)return;if(!this.listener)return;const e=t.getParser();if(!e)return;const s=this.listener.getSession(this.roomId);if(!s)return;let i=null;switch(e.errorCode){case 0:i=c.a.RSEME_PETS_FORBIDDEN_IN_HOTEL;break;case 1:i=c.a.RSEME_PETS_FORBIDDEN_IN_FLAT;break;case 2:i=c.a.RSEME_MAX_PETS;break;case 3:i=c.a.RSEME_NO_FREE_TILES_FOR_PET;break;case 4:i=c.a.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET;break;case 5:i=c.a.RSEME_MAX_NUMBER_OF_OWN_PETS}i&&0!=i.length&&this.listener.events.dispatchEvent(new c.a(i,s))}onBotError(t){if(!t)return;if(!this.listener)return;const e=t.getParser();if(!e)return;const s=this.listener.getSession(this.roomId);if(!s)return;let i=null;switch(e.errorCode){case 0:i=c.a.RSEME_BOTS_FORBIDDEN_IN_HOTEL;break;case 1:i=c.a.RSEME_BOTS_FORBIDDEN_IN_FLAT;break;case 2:i=c.a.RSEME_BOT_LIMIT_REACHED;break;case 3:i=c.a.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT;break;case 4:i=c.a.RSEME_BOT_NAME_NOT_ACCEPTED}i&&0!=i.length&&this.listener.events.dispatchEvent(new c.a(i,s))}}var ct=s("tfDB"),ht=s("5TOT"),lt=s("LKhd"),ut=s("j8oG"),_t=s("QZVO"),dt=s("4hNi"),gt=s("J4cl"),mt=s("0qJb"),pt=s("V2Y4"),ft=s("Poml"),Et=s("p0wa"),St=s("2Rep"),vt=s("YlMy"),bt=s("vUGd"),It=s("Aavw"),Rt=s("OxVo"),Tt=s("gnow"),Ot=s("UJeg"),yt=s("lMbP"),Ct=s("j7GY"),At=s("ekex"),Mt=s("Gb7F"),wt=s("kiCC"),Dt=s("o4p4"),Nt=s("/OJ4"),Ut=s("CsHF"),xt=s("nMRu");let Lt=(()=>{class t extends h.a{constructor(){super(),this._connection=null,this._userDataByType=new Map,this._userDataByRoomIndex=new Map,this._userBadges=new Map}onDispose(){this._connection=null}setConnection(t){this._connection=t}getUserData(e){return this.getDataByType(e,t.TYPE_USER)}getPetData(e){return this.getDataByType(e,t.TYPE_PET)}getBotData(e){return this.getDataByType(e,t.TYPE_BOT)}getRentableBotData(e){return this.getDataByType(e,t.TYPE_RENTABLE_BOT)}getDataByType(t,e){const s=this._userDataByType.get(e);return s&&s.get(t)||null}getUserDataByIndex(t){return this._userDataByRoomIndex.get(t)||null}getUserDataByName(t){for(const e of this._userDataByRoomIndex.values())if(e&&e.name===t)return e;return null}updateUserData(t){if(!t)return;this.removeUserData(t.roomIndex);let e=this._userDataByType.get(t.type);e||(e=new Map,this._userDataByType.set(t.type,e)),e.set(t.webID,t),this._userDataByRoomIndex.set(t.roomIndex,t)}removeUserData(t){const e=this.getUserDataByIndex(t);if(!e)return;this._userDataByRoomIndex.delete(t);const s=this._userDataByType.get(e.type);s&&s.delete(e.webID)}getUserBadges(t){return this._connection&&this._connection.send(new xt.a(t)),this._userBadges.get(t)||[]}setUserBadges(t,e){this._userBadges.set(t,e)}updateFigure(t,e,s,i,n){const r=this.getUserDataByIndex(t);r&&(r.figure=e,r.sex=s,r.hasSaddle=i,r.isRiding=n)}updateName(t,e){const s=this.getUserDataByIndex(t);s&&(s.name=e)}updateMotto(t,e){const s=this.getUserDataByIndex(t);s&&(s.custom=e)}requestPetInfo(t){this._connection&&this.getPetData(t)&&this._connection.send(new Ut.a(t))}get connection(){return this._connection}}return t.TYPE_USER=1,t.TYPE_PET=2,t.TYPE_BOT=3,t.TYPE_RENTABLE_BOT=4,t})();class Pt extends h.a{constructor(){super(),this._connection=null,this._userData=new Lt,this._roomId=0,this._password=null,this._state=r.a.CREATED,this._tradeMode=Nt.a._Str_12752,this._doorMode=0,this._controllerLevel=D.a.NONE,this._ownRoomIndex=-1,this._isGuildRoom=!1,this._isRoomOwner=!1,this._isDecorating=!1,this._isSpectator=!1,this._moderationSettings=null}onDispose(){this._userData&&(this._userData.dispose(),this._userData=null),this._connection=null}setConnection(t){!this._connection&&t&&(this._connection=t,this._userData&&this._userData.setConnection(t))}setControllerLevel(t){this._controllerLevel=t>=D.a.NONE&&t<=D.a.MODERATOR?t:D.a.NONE}setOwnRoomIndex(t){this._ownRoomIndex=t}setRoomOwner(){this._isRoomOwner=!0}start(){return!(this._state!==r.a.CREATED||!this._connection)&&(this._state=r.a.STARTED,this.enterRoom())}enterRoom(){return!!this._connection&&(this._connection.send(new ht.a(this._roomId,this._password)),!0)}reset(t){t!==this._roomId&&(this._roomId=t)}sendChatMessage(t,e){this._connection.send(new It.a(t,e))}sendShoutMessage(t,e){this._connection.send(new Rt.a(t,e))}sendWhisperMessage(t,e,s){this._connection.send(new Tt.a(t,e,s))}sendChatTypingMessage(t){this._connection.send(t?new Ot.a:new yt.a)}sendMottoMessage(t){this._connection.send(new Dt.a(t))}sendDanceMessage(t){this._connection.send(new At.a(t))}sendExpressionMessage(t){this._connection.send(new Ct.a(t))}sendSignMessage(t){t<0||t>17||this._connection.send(new wt.a(t))}sendPostureMessage(t){this._connection.send(new Mt.a(t))}sendDoorbellApprovalMessage(t,e){this._connection.send(new ct.a(t,e))}sendAmbassadorAlertMessage(t){this._connection.send(new lt.a(t))}sendKickMessage(t){this._connection.send(new dt.a(t))}sendMuteMessage(t,e){this._connection.send(new gt.a(t,e,this._roomId))}sendBanMessage(t,e){this._connection.send(new ut.a(t,this._roomId,e))}sendGiveRightsMessage(t){this._connection.send(new _t.a(t))}sendTakeRightsMessage(t){this._connection.send(new mt.a(t))}updateMoodlightData(t,e,s,i,n){const r="000000"+s.toString(16).toUpperCase(),a="#"+r.substring(r.length-6);this.connection.send(new St.a(t,e,a,i,n))}toggleMoodlightState(){this.connection.send(new vt.a)}pickupPet(t){this._connection&&this._connection.send(new ft.a(t))}pickupBot(t){this._connection&&this._connection.send(new pt.a(t))}requestMoodlightSettings(){this._connection&&this._connection.send(new Et.a)}openGift(t){this._connection.send(new bt.a(t))}get connection(){return this._connection}get userDataManager(){return this._userData}get roomId(){return this._roomId}set roomId(t){this._roomId=t}get password(){return this._password}set password(t){this._password=t}get state(){return this._state}get _Str_7411(){return!0}get tradeMode(){return this._tradeMode}set tradeMode(t){this._tradeMode=t}get doorMode(){return this._doorMode}set doorMode(t){this._doorMode=t}get allowPets(){return this._allowPets}set allowPets(t){this._allowPets=t}get controllerLevel(){return this._controllerLevel}get ownRoomIndex(){return this._ownRoomIndex}get isGuildRoom(){return this._isGuildRoom}set isGuildRoom(t){this._isGuildRoom=t}get isRoomOwner(){return this._isRoomOwner}get isDecorating(){return this._isDecorating}set isDecorating(t){this._isDecorating=t}get isSpectator(){return this._isSpectator}set isSpectator(t){this._isSpectator=t}get moderationSettings(){return this._moderationSettings}set moderationSettings(t){this._moderationSettings=t}}class Ft extends i.a{constructor(t,e){super(),this._communication=t,this._roomEngine=e,this._handlers=[],this._sessions=new Map,this._pendingSession=null,this._sessionStarting=!1,this._viewerSession=null,this.onRoomEngineEvent=this.onRoomEngineEvent.bind(this)}onInit(){this.createHandlers(),this.processPendingSession(),this._roomEngine.events.addEventListener(n.a.ENGINE_INITIALIZED,this.onRoomEngineEvent)}onDispose(){this._roomEngine.events.removeEventListener(n.a.ENGINE_INITIALIZED,this.onRoomEngineEvent),super.onDispose()}createHandlers(){const t=this._communication&&this._communication.connection;t&&this._handlers.push(new b(t,this),new T(t,this),new C(t,this),new N(t,this),new K(t,this),new ot(t,this),new L(t,this),new u(t,this))}setHandlers(t){if(this._handlers&&this._handlers.length)for(const e of this._handlers)e&&e.setRoomId(t.roomId)}onRoomEngineEvent(t){this.processPendingSession()}processPendingSession(){this._pendingSession&&this._roomEngine.ready&&(this.addSession(this._pendingSession),this._pendingSession=null)}getSession(t){return this._sessions.get(this.getRoomId(t))||null}createSession(t,e=null){const s=new Pt;return s.roomId=t,s.password=e,this.addSession(s)}addSession(t){return this._roomEngine.ready?(this._sessionStarting=!0,this._sessions.get(this.getRoomId(t.roomId))&&this.removeSession(t.roomId,!1),t.setConnection(this._communication.connection),this._sessions.set(this.getRoomId(t.roomId),t),this.events.dispatchEvent(new r.a(r.a.CREATED,t)),this._viewerSession=t,this.startSession(this._viewerSession),!0):(this._pendingSession=t,!1)}startSession(t){return t.state!==r.a.STARTED&&(this._sessionStarting=!1,t.start()?(this.events.dispatchEvent(new r.a(r.a.STARTED,t)),this.setHandlers(t),!0):(this.removeSession(t.roomId),!1))}removeSession(t,e=!0){const s=this.getSession(t);s&&(this._sessions.delete(this.getRoomId(t)),this.events.dispatchEvent(new r.a(r.a.ENDED,s,e)),s.dispose())}sessionUpdate(t,e){if(this.getSession(t))switch(e){case K.RS_CONNECTED:case K.RS_READY:return;case K.RS_DISCONNECTED:return void this.removeSession(t)}}sessionReinitialize(t,e){const s=this.getSession(t);s&&(this._sessions.delete(this.getRoomId(t)),s.reset(e),this._sessions.set(this.getRoomId(e),s),this.setHandlers(s))}getRoomId(t){return"hard_coded_room_id"}get communication(){return this._communication}get roomEngine(){return this._roomEngine}get viewerSession(){return this._viewerSession}}},HPzH:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._giverUserId=-1,this._handItemType=-1,!0}parse(t){return!!t&&(this._giverUserId=t.readInt(),this._handItemType=t.readInt(),!0)}get giverUserId(){return this._giverUserId}get handItemType(){return this._handItemType}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"HY2+":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._seconds=0,!0}parse(t){return!!t&&(this._seconds=t.readInt(),!0)}get seconds(){return this._seconds}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},HkHk:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},HqZk:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.MINIMUM=-2,t.ROOM=0,t.FLOOR=10,t.WALL=20,t.UNIT=100,t.CURSOR=200,t})()},"Hs+C":function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("G0tw");let n=(()=>{class t extends i.a{constructor(t,e,s,i){super(t,e),this._objectId=s,this._category=i}get objectId(){return this._objectId}get category(){return this._category}}return t.SELECTED="REOE_SELECTED",t.DESELECTED="REOE_DESELECTED",t.ADDED="REOE_ADDED",t.REMOVED="REOE_REMOVED",t.PLACED="REOE_PLACED",t.PLACED_ON_USER="REOE_PLACED_ON_USER",t.CONTENT_UPDATED="REOE_CONTENT_UPDATED",t.REQUEST_MOVE="REOE_REQUEST_MOVE",t.REQUEST_ROTATE="REOE_REQUEST_ROTATE",t.MOUSE_ENTER="REOE_MOUSE_ENTER",t.MOUSE_LEAVE="REOE_MOUSE_LEAVE",t})()},HujO:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("zQEY");class r{flush(){return this._roomId=0,this._roomName=null,this._id=0,this._title=null,this._description=null,this._colorA=0,this._colorB=0,this._state=0,this._canMembersDecorate=!1,this._badgeParts=new Map,this._badgeCode=null,this._membersCount=0,!0}parse(t){if(!t)return!1;1===t.readInt()&&(this._roomId=t.readInt(),this._roomName=t.readString(),t.readBoolean()),t.readBoolean(),this._id=t.readInt(),this._title=t.readString(),this._description=t.readString(),t.readInt(),this._colorA=t.readInt(),this._colorB=t.readInt(),this._state=t.readInt(),this._canMembersDecorate=0===t.readInt(),t.readBoolean(),t.readString();const e=t.readInt();for(let s=0;s<e;s++){const e=new n.a(0===s);e.key=t.readInt(),e.color=t.readInt(),e.position=t.readInt(),0===e.key&&(e.position=4),this._badgeParts.set(s,e)}return this._badgeCode=t.readString(),this._membersCount=t.readInt(),!0}get roomId(){return this._roomId}get roomName(){return this._roomName}get id(){return this._id}get title(){return this._title}get description(){return this._description}get colorA(){return this._colorA}get colorB(){return this._colorB}get state(){return this._state}get canMembersDecorate(){return this._canMembersDecorate}get badgeParts(){return this._badgeParts}get badgeCode(){return this._badgeCode}get membersCount(){return this._membersCount}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},I5LT:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._senderId=0,this._messageText=null,!0}parse(t){return!!t&&(this._senderId=t.readInt(),this._messageText=t.readString(),!0)}get senderId(){return this._senderId}get messageText(){return this._messageText}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},IGSi:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("3r1x");let n=(()=>{class t extends i.a{constructor(t,e){super(t),this._contentType=e}get contentType(){return this._contentType}}return t.RCLE_SUCCESS="RCLE_SUCCESS",t.RCLE_FAILURE="RCLE_FAILURE",t.RCLE_CANCEL="RCLE_CANCEL",t})()},IRIx:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._currencies=new Map,!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._currencies.set(t.readInt(),t.readInt()),e--;return!0}get currencies(){return this._currencies}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},IVZI:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._userID=-1,this._userAccepts=!1,!0}parse(t){return!!t&&(this._userID=t.readInt(),this._userAccepts=t.readInt()>0,!0)}get _Str_4963(){return this._userID}get _Str_15794(){return this._userAccepts}}class r extends i.a{constructor(t){super(t,n)}get _Str_4963(){return this.getParser()._Str_4963}get _Str_15794(){return this.getParser()._Str_15794}getParser(){return this.parser}}},"Ie/D":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._aliases=new Map,!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._aliases.set(t.readString(),t.readString()),e--;return!0}get aliases(){return this._aliases}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},IqYK:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.FURNITURE_STATIC="furniture_static",t.FURNITURE_ANIMATED="furniture_animated",t.FURNITURE_RESETTING_ANIMATED="furniture_resetting_animated",t.FURNITURE_POSTER="furniture_poster",t.FURNITURE_EXTERNAL_IMAGE="furniture_external_image",t.FURNITURE_HABBOWHEEL="furniture_habbowheel",t.FURNITURE_VAL_RANDOMIZER="furniture_val_randomizer",t.FURNITURE_BOTTLE="furniture_bottle",t.FURNITURE_PLANET_SYSTEM="furniture_planet_system",t.FURNITURE_QUEUE_TILE="furniture_queue_tile",t.FURNITURE_PARTY_BEAMER="furniture_party_beamer",t.FURNITURE_CUBOID="furniture_cuboid",t.FURNITURE_GIFT_WRAPPED="furniture_gift_wrapped",t.FURNITURE_GIFT_WRAPPED_FIREWORKS="furniture_gift_wrapped_fireworks",t.FURNITURE_COUNTER_CLOCK="furniture_counter_clock",t.FURNITURE_WATER_AREA="furniture_water_area",t.FURNITURE_SCORE_BOARD="furniture_score_board",t.FURNITURE_FIREWORKS="furniture_fireworks",t.FURNITURE_BB="furniture_bb",t.FURNITURE_BG="furniture_bg",t.FURNITURE_STICKIE="furniture_stickie",t.FURNITURE_MANNEQUIN="furniture_mannequin",t.FURNITURE_GUILD_CUSTOMIZED="furniture_guild_customized",t.FURNITURE_GUILD_ISOMETRIC_BADGE="furniture_guild_isometric_badge",t.FURNITURE_VOTE_COUNTER="furniture_vote_counter",t.FURNITURE_VOTE_MAJORITY="furniture_vote_majority",t.FURNITURE_SOUNDBLOCK="furniture_soundblock",t.FURNITURE_BADGE_DISPLAY="furniture_badge_display",t.FURNITURE_YOUTUBE="furniture_youtube",t.FURNITURE_BUILDER_PLACEHOLDER="furniture_builder_placeholder",t.ROOM="room",t.USER="user",t.PET_ANIMATED="pet_animated",t.BOT="bot",t.RENTABLE_BOT="rentable_bot",t.TILE_CURSOR="tile_cursor",t})()},IqqQ:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._id=0,this._type=0,this._title=null,this._description=null,this._badge=null,this._roomId=0,this._roomName=null,this._membershipType=0,this._membersCount=0,this._createdAt=null,this._isOwner=!1,this._isAdmin=!1,this._ownerName=null,this._flag=!1,this._canMembersDecorate=!1,this._pendingRequestsCount=0,!0}parse(t){return!!t&&(this._id=t.readInt(),t.readBoolean(),this._type=t.readInt(),this._title=t.readString(),this._description=t.readString(),this._badge=t.readString(),this._roomId=t.readInt(),this._roomName=t.readString(),this._membershipType=t.readInt(),this._membersCount=t.readInt(),t.readBoolean(),this._createdAt=t.readString(),this._isOwner=t.readBoolean(),this._isAdmin=t.readBoolean(),this._ownerName=t.readString(),this._flag=t.readBoolean(),this._canMembersDecorate=t.readBoolean(),this._pendingRequestsCount=t.readInt(),!0)}get id(){return this._id}get type(){return this._type}get title(){return this._title}get description(){return this._description}get badge(){return this._badge}get roomId(){return this._roomId}get roomName(){return this._roomName}get membershipType(){return this._membershipType}get membersCount(){return this._membersCount}get createdAt(){return this._createdAt}get isOwner(){return this._isOwner}get isAdmin(){return this._isAdmin}get ownerName(){return this._ownerName}get flag(){return this._flag}get canMembersDecorate(){return this._canMembersDecorate}get pendingRequestsCount(){return this._pendingRequestsCount}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},IxQr:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("IqKQ"),n=s("P7Cj");let r=(()=>{class t{static generateTexture(e,s=null,n=i.SCALE_MODES.NEAREST,r=1){return e?t.getRenderer().generateTexture(e,n,r,s):null}static generateTextureFromImage(t){return t?i.Texture.from(t):null}static generateImage(e){return e?t.getRenderer().extract.image(e):null}static generateImageUrl(e){return e?t.getRenderer().extract.base64(e):null}static getRenderer(){return t._renderer?t._renderer:n.a.instance.renderer}static setRenderer(e){t._renderer=e}}return t._renderer=null,t})()},J0ap:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("P7Cj"),n=s("jBuC");let r=(()=>{class t{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._rentable=!1,this._itemId=0,this._furniType=null,this._ref=0,this._spriteId=0,this._category=0,this._stuffData=null,this._isGroupable=!1,this._isRecyclable=!1,this._tradable=!1,this._sellable=!1,this._secondsToExpiration=0,this._Str_3182=0,this._flatId=0,this._isWallItem=!1,this._hasRentPeriodStarted=!1,this._Str_5390=0,this._slotId="",this._Str_2808=-1,!0}parse(e){return!!e&&(this._itemId=e.readInt(),this._furniType=e.readString(),this._ref=e.readInt(),this._spriteId=e.readInt(),this._category=e.readInt(),this._stuffData=n.a.parseObjectData(e),this._isRecyclable=e.readBoolean(),this._tradable=e.readBoolean(),this._isGroupable=e.readBoolean(),this._sellable=e.readBoolean(),this._secondsToExpiration=e.readInt(),this._Str_5390=i.a.instance.time,this.secondsToExpiration>-1?this._rentable=!0:(this._rentable=!1,this._secondsToExpiration=-1),this._hasRentPeriodStarted=e.readBoolean(),this._flatId=e.readInt(),this._isWallItem=this._furniType===t.WALL_ITEM,this._furniType===t.FLOOR_ITEM&&(this._slotId=e.readString(),this._Str_3182=e.readInt()),!0)}get itemId(){return this._itemId}get furniType(){return this._furniType}get ref(){return this._ref}get spriteId(){return this._spriteId}get category(){return this._category}get stuffData(){return this._stuffData}get isGroupable(){return this._isGroupable}get isRecycleable(){return this._isRecyclable}get tradable(){return this._tradable}get sellable(){return this._sellable}get secondsToExpiration(){return this._secondsToExpiration}get flatId(){return this._flatId}get slotId(){return this._slotId}get _Str_3951(){return this._Str_2808}get _Str_2794(){return this._Str_3182}get rentable(){return this._rentable}get isWallItem(){return this._isWallItem}get hasRentPeriodStarted(){return this._hasRentPeriodStarted}get _Str_10616(){return this._Str_5390}get _Str_8932(){return 0}get _Str_9050(){return 0}get _Str_9408(){return 0}get _Str_19297(){return!(-1===this._furniType.indexOf("external_image"))}}return t.WALL_ITEM="I",t.FLOOR_ITEM="S",t})()},J0cl:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},J4cl:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s=0){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},JCII:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._roomId=-1,this._areaId=-1,this._image=null,this._caption=null,!0}parse(t){return!!t&&(this._roomId=t.readInt(),this._areaId=t.readInt(),this._image=t.readString(),this._caption=t.readString(),!0)}get roomId(){return this._roomId}get areaId(){return this._areaId}get image(){return this._image}get caption(){return this._caption}}class r{flush(){return this._rooms=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._rooms.push(new n(t)),e--;return!0}get rooms(){return this._rooms}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},JDjE:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._categories=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._categories.push(t.readString()),e--;return!0}get categories(){return this._categories}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},JKJw:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("3r1x");let n=(()=>{class t extends i.a{constructor(e,s){super(t.IMAGE_READY),this._badgeId=e,this._image=s}get badgeId(){return this._badgeId}get image(){return this._image}}return t.IMAGE_READY="BIME_BADGE_IMAGE_READY",t})()},JODW:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("iAsj");class r{flush(){return this._item=null,!0}parse(t){return!!t&&(this._item=new n.a(t),this._item.username=t.readString(),!0)}get item(){return this._item}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},JY8D:function(t){t.exports=JSON.parse('{"a":{"direction":0,"camera":{"x":0,"y":0,"z":10},"canvases":[{"scale":"h","geometries":[{"id":"vertical","width":90,"height":130,"dx":0,"dy":0},{"id":"sitting","width":90,"height":130,"dx":0,"dy":0},{"id":"horizontal","width":128,"height":80,"dx":30,"dy":0},{"id":"swhorizontal","width":192,"height":120,"dx":0,"dy":-40}]},{"scale":"sh","geometries":[{"id":"vertical","width":45,"height":72,"dx":0,"dy":0},{"id":"sitting","width":45,"height":72,"dx":0,"dy":0},{"id":"horizontal","width":64,"height":50,"dx":15,"dy":-10},{"id":"swhorizontal","width":96,"height":70,"dx":0,"dy":-20},{"id":"swim","width":64,"height":70,"dx":25,"dy":10}]}],"avatarSets":[{"id":"full","avatarSets":[{"id":"body","main":true,"bodyParts":[{"id":"top"},{"id":"bottom"},{"id":"behind"},{"id":"torso"},{"id":"leftitem"},{"id":"rightitem"},{"id":"leftarm"},{"id":"rightarm"}]},{"id":"head","bodyParts":[{"id":"head"}]}]}],"types":[{"id":"vertical","bodyParts":[{"id":"top","x":0,"y":0,"z":0,"radius":2},{"id":"bottom","x":0,"y":0,"z":0,"radius":0.001},{"id":"behind","x":0,"y":0,"z":0.2,"radius":0.3},{"id":"torso","x":0,"y":0,"z":0,"radius":0.4,"items":[{"id":"bd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"bds","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"ch","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"sh","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lg","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ss","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"cp","x":0,"y":0,"z":0,"radius":0.045,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"wa","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"cc","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ca","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"leftitem","x":0,"y":0,"z":-0.29,"radius":0.3,"items":[{"id":"li","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"rightitem","x":0,"y":0,"z":-0.29,"radius":0.3,"items":[{"id":"ri","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"leftarm","x":-1,"y":0,"z":-0.51,"radius":0.5,"items":[{"id":"lh","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lhs","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ls","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lc","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"rightarm","x":1,"y":0,"z":-0.51,"radius":0.5,"items":[{"id":"rh","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rhs","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rs","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rc","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"head","x":0,"y":0,"z":0,"radius":0.5,"items":[{"id":"hd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fc","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ey","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"hr","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"hrb","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fa","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ea","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ha","x":0,"y":0,"z":0,"radius":0.08,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"he","x":0,"y":0,"z":0,"radius":0.09,"nx":0,"ny":0,"nz":-1,"double":false}]}]},{"id":"sitting","bodyParts":[{"id":"top","x":0,"y":0,"z":0,"radius":2},{"id":"bottom","x":0,"y":0,"z":0,"radius":0.001},{"id":"behind","x":0,"y":0,"z":0.2,"radius":0.3},{"id":"torso","x":0,"y":0,"z":0,"radius":0.4,"items":[{"id":"bd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"bds","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"ch","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"sh","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lg","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ss","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"cp","x":0,"y":0,"z":0,"radius":0.045,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"wa","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"cc","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ca","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"leftitem","x":0,"y":0,"z":-0.29,"radius":0.3,"items":[{"id":"li","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"rightitem","x":0,"y":0,"z":-0.29,"radius":0.3,"items":[{"id":"ri","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"leftarm","x":-1,"y":0,"z":-0.51,"radius":0.5,"items":[{"id":"lh","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lhs","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ls","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lc","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"rightarm","x":1,"y":0,"z":-0.51,"radius":0.5,"items":[{"id":"rh","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rhs","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rs","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rc","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"head","x":0,"y":0,"z":0,"radius":0.5,"items":[{"id":"hd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fc","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ey","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"hr","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"hrb","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fa","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ea","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ha","x":0,"y":0,"z":0,"radius":0.08,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"he","x":0,"y":0,"z":0,"radius":0.09,"nx":0,"ny":0,"nz":-1,"double":false}]}]},{"id":"horizontal","bodyParts":[{"id":"torso","x":0,"y":0,"z":0,"radius":0.4,"items":[{"id":"bd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"bds","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"ch","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"cp","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"sh","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lg","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ss","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"wa","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"cc","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ca","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"leftitem","x":0,"y":0,"z":-0.29,"radius":0.3,"items":[{"id":"li","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"rightitem","x":0,"y":0,"z":-0.29,"radius":0.3,"items":[{"id":"ri","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"leftarm","x":-1,"y":0,"z":-0.51,"radius":0.6,"items":[{"id":"lh","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lhs","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ls","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lc","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"rightarm","x":1,"y":0,"z":-0.51,"radius":0.6,"items":[{"id":"rh","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rhs","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rs","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rc","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"head","x":0,"y":0,"z":0,"radius":0.5,"items":[{"id":"hd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fc","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ey","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"hr","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"hrb","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fa","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ea","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ha","x":0,"y":0,"z":0,"radius":0.08,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"he","x":0,"y":0,"z":0,"radius":0.09,"nx":0,"ny":0,"nz":-1,"double":false}]}]},{"id":"swhorizontal","bodyParts":[{"id":"torso","x":0,"y":0,"z":0,"radius":0.4,"items":[{"id":"bd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"bds","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"ch","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"cp","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"sh","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lg","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ss","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"wa","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"cc","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ca","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"leftitem","x":0,"y":0,"z":-0.29,"radius":0.3,"items":[{"id":"li","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"rightitem","x":0,"y":0,"z":-0.29,"radius":0.3,"items":[{"id":"ri","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"leftarm","x":-1,"y":0,"z":-0.51,"radius":0.6,"items":[{"id":"lh","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lhs","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ls","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"lc","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"rightarm","x":1,"y":0,"z":-0.51,"radius":0.6,"items":[{"id":"rh","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rhs","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rs","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"rc","x":0,"y":0,"z":0,"radius":0.025,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"head","x":0,"y":0,"z":0,"radius":0.5,"items":[{"id":"hd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fc","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ey","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"hr","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"hrb","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fa","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ea","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ha","x":0,"y":0,"z":0,"radius":0.08,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"he","x":0,"y":0,"z":0,"radius":0.09,"nx":0,"ny":0,"nz":-1,"double":false}]}]},{"id":"swim","bodyParts":[{"id":"torso","x":0,"y":0,"z":0,"radius":0.4,"items":[{"id":"bds","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"ss","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false}]},{"id":"head","x":0,"y":0,"z":0,"radius":0.5,"items":[{"id":"hd","x":0,"y":0,"z":0,"radius":0.01,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fc","x":0,"y":0,"z":0,"radius":0.02,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ey","x":0,"y":0,"z":0,"radius":0.03,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"hr","x":0,"y":0,"z":0,"radius":0.04,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"hrb","x":0,"y":0,"z":0,"radius":0.05,"nx":0,"ny":0,"nz":-1,"double":true},{"id":"fa","x":0,"y":0,"z":0,"radius":0.06,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ea","x":0,"y":0,"z":0,"radius":0.07,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"ha","x":0,"y":0,"z":0,"radius":0.08,"nx":0,"ny":0,"nz":-1,"double":false},{"id":"he","x":0,"y":0,"z":0,"radius":0.09,"nx":0,"ny":0,"nz":-1,"double":false}]}]}]}}')},KAV2:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i,n=-1){this._data=[],this._data.push(t),this._data.push(e),this._data.push(s),this._data.push(i),-1!=n&&this._data.push(n)}getMessageArray(){return this._data}dispose(){}}},KJ3T:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._minutes=null,!0}parse(t){return!!t&&(this._minutes=t.readInt(),!0)}get minutes(){return this._minutes}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},KQVX:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i){this._data=[t,e,s,i]}getMessageArray(){return this._data}dispose(){}}},KQk8:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.LEGACY_KEY=0,t.MAP_KEY=1,t.STRING_KEY=2,t.VOTE_KEY=3,t.EMPTY_KEY=4,t.NUMBER_KEY=5,t.HIGHSCORE_KEY=6,t.CRACKABLE_KEY=7,t})()},KjXG:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._unitId=null,this._isIdle=!1,!0}parse(t){return!!t&&(this._unitId=t.readInt(),this._isIdle=t.readBoolean(),!0)}get unitId(){return this._unitId}get isIdle(){return this._isIdle}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},KsdP:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO"),n=s("Zim7");class r extends i.a{constructor(t){super(t,n.a)}getParser(){return this.parser}}},"Kx+W":function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.FULL="full",t.HEAD="head",t.BODY="body",t})()},LKhd:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},LPTP:function(t){t.exports=JSON.parse('{"a":{"partSet":[{"setType":"ri","flippedSetType":"ri"},{"setType":"ri","flippedSetType":"ri"},{"setType":"rh","flippedSetType":"lh"},{"setType":"rhs","flippedSetType":"lhs"},{"setType":"rs","swim":"0","flippedSetType":"ls"},{"setType":"rc","flippedSetType":"lc"},{"setType":"bd"},{"setType":"bds"},{"setType":"ss"},{"setType":"sh"},{"setType":"lg"},{"setType":"ch"},{"setType":"cp"},{"setType":"cc"},{"setType":"hd"},{"setType":"fc"},{"setType":"ey"},{"setType":"hr"},{"setType":"hrb","removeSetType":"hr"},{"setType":"li","flippedSetType":"li"},{"setType":"lh","flippedSetType":"rh"},{"setType":"lhs","flippedSetType":"rhs"},{"setType":"ls","flippedSetType":"rs"},{"setType":"lc","flippedSetType":"rc"},{"setType":"wa"},{"setType":"ea"},{"setType":"ca"},{"setType":"fa"},{"setType":"ha"},{"setType":"he"}],"activePartSets":[{"id":"figure","activeParts":[{"setType":"rh"},{"setType":"rh"},{"setType":"rhs"},{"setType":"rs"},{"setType":"rc"},{"setType":"bd"},{"setType":"bds"},{"setType":"ss"},{"setType":"sh"},{"setType":"lg"},{"setType":"ch"},{"setType":"cp"},{"setType":"cc"},{"setType":"wa"},{"setType":"hd"},{"setType":"fc"},{"setType":"ey"},{"setType":"hr"},{"setType":"hrb"},{"setType":"lh"},{"setType":"lhs"},{"setType":"ls"},{"setType":"lc"},{"setType":"ea"},{"setType":"ca"},{"setType":"fa"},{"setType":"ha"},{"setType":"he"}]},{"id":"head","activeParts":[{"setType":"hd"},{"setType":"fc"},{"setType":"ey"},{"setType":"hr"},{"setType":"hrb"},{"setType":"ea"},{"setType":"fa"},{"setType":"ha"},{"setType":"he"}]},{"id":"speak","activeParts":[{"setType":"hd"},{"setType":"hr"},{"setType":"hrb"},{"setType":"fc"},{"setType":"fa"},{"setType":"ha"}]},{"id":"gesture","activeParts":[{"setType":"ey"},{"setType":"fc"}]},{"id":"eye","activeParts":[{"setType":"ey"}]},{"id":"handRight","activeParts":[{"setType":"rh"},{"setType":"rhs"},{"setType":"rs"},{"setType":"rc"},{"setType":"ri"}]},{"id":"handRightAndHead","activeParts":[{"setType":"rh"},{"setType":"rhs"},{"setType":"rs"},{"setType":"rc"},{"setType":"ri"},{"setType":"ey"},{"setType":"fc"},{"setType":"hd"}]},{"id":"handLeft","activeParts":[{"setType":"lh"},{"setType":"lhs"},{"setType":"ls"},{"setType":"lc"},{"setType":"li"}]},{"id":"walk","activeParts":[{"setType":"bd"},{"setType":"bds"},{"setType":"ss"},{"setType":"lg"},{"setType":"lh"},{"setType":"lhs"},{"setType":"rh"},{"setType":"rhs"},{"setType":"ls"},{"setType":"lc"},{"setType":"rs"},{"setType":"rc"},{"setType":"sh"}]},{"id":"sit","activeParts":[{"setType":"bd"},{"setType":"bds"},{"setType":"ss"},{"setType":"lg"},{"setType":"sh"},{"setType":"cc"}]},{"id":"itemRight","activeParts":[{"setType":"ri"}]}]}}')},LRPw:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},LSEE:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},LWqD:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._badges=[]}getMessageArray(){const t=[];let e=1;for(;e<=5;)e<=this._badges.length?(t.push(e),t.push(this._badges[e-1])):(t.push(e),t.push("")),e++;return t}dispose(){}addActivatedBadge(t){this._badges.length>=5||this._badges.push(t)}}},Ly0c:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("BFtu");class n{flush(){return this._model=null,this._width=0,this._height=0,this._wallHeight=-1,this._heightMap=[],this._scale=64,this._model=null,!0}parse(t){if(!t)return!1;const e=t.readBoolean(),s=t.readInt(),i=t.readString();return this.parseExplicitly(i,s,e)}parseModel(t,e,s=!0){return this.parseExplicitly(t,e,s)}parseExplicitly(t,e,s=!0){this._scale=s?32:64,this._wallHeight=e,this._model=t;const n=this._model.split("\r"),r=n.length;let a=0,o=0;for(;o<r;){const t=n[o];t.length>a&&(a=t.length),o++}for(this._heightMap=[],o=0;o<r;){const t=[];let e=0;for(;e<a;)t.push(i.a.TILE_BLOCKED),e++;this._heightMap.push(t),o++}for(this._width=a,this._height=r,o=0;o<r;){const t=this._heightMap[o],e=n[o];if(e.length>0){let s=0;for(;s<e.length;){const n=e.charAt(s);let r=i.a.TILE_BLOCKED;"x"!==n&&"X"!==n&&(r=parseInt(n,36)),t[s]=r,s++}}o++}return!0}getHeight(t,e){if(t<0||t>=this._width||e<0||e>=this._height)return-110;const s=this._heightMap[e];if(void 0===s)return-110;const i=s[t];return void 0===i?-110:i}get model(){return this._model}get width(){return this._width}get height(){return this._height}get heightMap(){return this._heightMap}get wallHeight(){return this._wallHeight}get scale(){return this._scale}}},M98o:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{static get available(){return!0}static call(t,...e){if(window.top!==window&&window.top.postMessage("Nitro_LegacyExternalInterface"+JSON.stringify({method:t,params:e}),"*"),!("FlashExternalInterface"in window))return;const s=window.FlashExternalInterface[t];return void 0!==s?s(...e):void 0}static callGame(t,...e){if(window.top!==window&&window.top.postMessage("Nitro_LegacyExternalGameInterface"+JSON.stringify({method:t,params:e}),"*"),!("FlashExternalGameInterface"in window))return;const s=window.FlashExternalGameInterface[t];return void 0!==s?s(...e):void 0}static addCallback(t,e){window[t]=e}}},MeCd:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("XMGm");let n=(()=>{class t{}return t.UNIQUE_SET=256,t})();class r{constructor(){this._flags=0,this._uniqueNumber=0,this._uniqueSeries=0}parseWrapper(t){(this._flags&n.UNIQUE_SET)>0&&(this._uniqueNumber=t.readInt(),this._uniqueSeries=t.readInt())}initializeFromRoomObjectModel(t){this._uniqueNumber=t.getValue(i.a.FURNITURE_UNIQUE_SERIAL_NUMBER),this._uniqueSeries=t.getValue(i.a.FURNITURE_UNIQUE_EDITION_SIZE)}writeRoomObjectModel(t){t&&(t.setValue(i.a.FURNITURE_UNIQUE_SERIAL_NUMBER,this._uniqueNumber),t.setValue(i.a.FURNITURE_UNIQUE_EDITION_SIZE,this._uniqueSeries))}getLegacyString(){return""}compare(t){return!1}get state(){const t=parseInt(this.getLegacyString());return isNaN(t)?0:t}get isUnique(){return this._uniqueSeries>0}get uniqueNumber(){return this._uniqueNumber}get uniqueSeries(){return this._uniqueSeries}get flags(){return this._flags}set flags(t){this._flags=t}}},Mixc:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"N+Yd":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._typeId=t.readInt(),this._paletteId=t.readInt(),this._color=t.readString(),this._breedId=t.readInt(),this._customParts=[],this._customPartCount=t.readInt();let e=0;for(;e<this._customPartCount;)this._customParts.push(t.readInt()),this._customParts.push(t.readInt()),this._customParts.push(t.readInt()),e++}get typeId(){return this._typeId}get paletteId(){return this._paletteId}get color(){return this._color}get breedId(){return this._breedId}get figuredata(){let t=this.typeId+" "+this.paletteId+" "+this.color;t=t+" "+this.custompartCount;for(const e of this.customParts)t=t+" "+e;return t}get customParts(){return this._customParts}get custompartCount(){return this._customPartCount}}},NLfn:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},NUif:function(t,e,s){t.exports=s.p+"0.1e354392783b7d7e25bf.worker.js"},Nakt:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO"),n=s("jBuC");class r extends i.a{constructor(t){super(t,n.a)}getParser(){return this.parser}}},Nd6c:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},NjFb:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},Njml:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("1+1A");class r{flush(){return this._item=null,!0}parse(t){return!!t&&(this._item=new n.a(t),this._item.username=t.readString(),!0)}get item(){return this._item}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},NpwP:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._unitId=null,this._value=0,!0}parse(t){return!!t&&(this._unitId=t.readInt(),this._value=t.readInt(),!0)}get unitId(){return this._unitId}get value(){return this._value}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},Ns5P:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("3r1x");let n=(()=>{class t extends i.a{constructor(t,e,s=!0){super(t),this._session=e,this._openLandingView=s}get session(){return this._session}get openLandingView(){return this._openLandingView}}return t.CREATED="RSE_CREATED",t.STARTED="RSE_STARTED",t.ENDED="RSE_ENDED",t.ROOM_DATA="RSE_ROOM_DATA",t})()},"O/2Q":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._result=-1,this._name=null,!0}parse(t){return!!t&&(this._result=t.readInt(),this._name=t.readString(),!0)}get result(){return this._result}get name(){return this._name}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},OGjZ:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e=-100){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},OLXM:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,...e){this._data=[t,e.length,...e]}getMessageArray(){return this._data}dispose(){}}},ObWd:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._itemId=0,this._state=0,!0}parse(t){return!!t&&(this._itemId=t.readInt(),this._state=t.readInt(),!0)}get itemId(){return this._itemId}get state(){return this._state}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},Oh4I:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i,n,r,a,o,c,h,l,u,_,d,g,m,p,f,E,S,v,b,I,R){this._data=[t,e,s,i,n,r,a,o,c,h,l,u,_,d,g,m,p,f,E,S,v,b,I,R]}getMessageArray(){return this._data}dispose(){}}},OiFD:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("N+Yd");class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this._id=t.readInt(),this._name=t.readString(),this._figureData=new i.a(t),this._level=t.readInt()}get id(){return this._id}get name(){return this._name}get typeId(){return this._figureData.typeId}get paletteId(){return this._figureData.paletteId}get color(){return this._figureData.color}get _Str_3343(){return this._figureData.breedId}get _Str_13619(){return this._figureData.custompartCount}get _Str_4217(){return this._figureData.figuredata}get figureData(){return this._figureData}get level(){return this._level}}},OxVo:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},P0eX:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},P5vI:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._productType=null,this._furniClassId=-1,this._extraParam=null,this._productCount=0,this._uniqueLimitedItem=!1,this._uniqueLimitedItemSeriesSize=0,this._uniqueLimitedItemsLeft=0,!0}parse(e){switch(this._productType=e.readString(),this._productType){case t.B:return this._extraParam=e.readString(),this._productCount=1,!0;default:return this._furniClassId=e.readInt(),this._extraParam=e.readString(),this._productCount=e.readInt(),this._uniqueLimitedItem=e.readBoolean(),this._uniqueLimitedItem&&(this._uniqueLimitedItemSeriesSize=e.readInt(),this._uniqueLimitedItemsLeft=e.readInt()),!0}}get productType(){return this._productType}get furniClassId(){return this._furniClassId}get extraParam(){return this._extraParam}get productCount(){return this._productCount}get uniqueLimitedItem(){return this._uniqueLimitedItem}get uniqueLimitedSeriesSize(){return this._uniqueLimitedItemSeriesSize}get uniqueLimitedItemsLeft(){return this._uniqueLimitedItemsLeft}}return t.I="i",t.S="s",t.E="e",t.B="b",t})()},P7Cj:function(t,e,s){"use strict";(function(t){s.d(e,"a",function(){return S});var i=s("IqKQ"),n=s("C6IL"),r=s("vuPI"),a=s("3r1x"),o=s("1cH2"),c=s("R5Ri"),h=s("Xmmk"),l=s("XpxF"),u=s("0gOM"),_=(s("M98o"),s("vkSA")),d=s("hBKr"),g=s("G0tw"),m=s("3h45"),p=s("H/Ns"),f=s("i7vr"),E=s("GN+4");i.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,i.settings.SCALE_MODE=i.SCALE_MODES.NEAREST;let S=(()=>{class e extends i.Application{constructor(s,i){super(i),e.INSTANCE||(e.INSTANCE=this),this._nitroTimer=new c.a,this._worker=new Worker(t,void 0),this._core=s,this._events=new r.a,this._localization=new d.a,this._communication=new u.a(s.communication),this._avatar=new l.a,this._roomEngine=new m.a(this._communication),this._sessionDataManager=new f.a(this._communication),this._roomSessionManager=new p.a(this._communication,this._roomEngine),this._roomManager=new h.a(this._roomEngine,this._roomEngine.visualizationFactory,this._roomEngine.logicFactory),this._linkTrackers=[],this._workerTrackers=[],this._isReady=!1,this._isDisposed=!1,this._core.configuration.events.addEventListener(n.a.LOADED,this.onConfigurationLoadedEvent.bind(this)),this._roomEngine.events.addEventListener(g.a.ENGINE_INITIALIZED,this.onRoomEngineReady.bind(this)),this._worker.onmessage=this.createWorkerEvent.bind(this)}static bootstrap(){e.INSTANCE&&(e.INSTANCE.dispose(),e.INSTANCE=null);const t=document.createElement("canvas");t.id="client-wrapper",t.className="client-canvas";const s=new this(new o.a,{transparent:!0,autoDensity:!0,resolution:window.devicePixelRatio,width:window.innerWidth,height:window.innerHeight,view:t});t.addEventListener("webglcontextlost",()=>s.events.dispatchEvent(new a.a(e.WEBGL_CONTEXT_LOST)));const i=NitroConfig.sso;s.communication.demo.setSSO(i)}init(){if(!this._isReady&&!this._isDisposed){if(this._avatar&&this._avatar.init(),this._roomEngine&&(this._roomEngine.sessionDataManager=this._sessionDataManager,this._roomEngine.roomSessionManager=this._roomSessionManager,this._roomEngine.roomManager=this._roomManager,this._sessionDataManager&&this._sessionDataManager.init(),this._roomSessionManager&&this._roomSessionManager.init(),this._roomEngine.init()),new _.a(this._communication.connection),!this._communication.connection)throw new Error("No connection found");this._isReady=!0}}dispose(){this._isDisposed||(this._roomManager&&(this._roomManager.dispose(),this._roomManager=null),this._roomSessionManager&&(this._roomSessionManager.dispose(),this._roomSessionManager=null),this._sessionDataManager&&(this._sessionDataManager.dispose(),this._sessionDataManager=null),this._roomEngine&&(this._roomEngine.dispose(),this._roomEngine=null),this._avatar&&(this._avatar.dispose(),this._avatar=null),this._communication&&(this._communication.dispose(),this._communication=null),super.destroy(),this._isDisposed=!0,this._isReady=!1)}onConfigurationLoadedEvent(t){const s=this.getConfiguration("animation.fps",24);this.getConfiguration("limits.fps",!0),e.instance.ticker.maxFPS=s}onRoomEngineReady(t){this.startSendingHeartBeat()}getConfiguration(t,e=null){return this._core.configuration.getValue(t,e)}getLocalization(t){return this._localization.getValue(t)}getLocalizationWithParameter(t,e,s){return this._localization.getValueWithParameter(t,e,s)}getLocalizationWithParameters(t,e,s){return this._localization.getValueWithParameters(t,e,s)}addWorkerEventTracker(t){this._workerTrackers.indexOf(t)>=0||this._workerTrackers.push(t)}removeWorkerEventTracker(t){const e=this._workerTrackers.indexOf(t);-1!==e&&this._workerTrackers.splice(e,1)}createWorkerEvent(t){if(!t)return;const e=t.data;for(const s of this._workerTrackers)s&&s.workerMessageReceived(e)}sendWorkerEvent(t){t&&this._worker&&this._worker.postMessage(t)}addLinkEventTracker(t){this._linkTrackers.indexOf(t)>=0||this._linkTrackers.push(t)}removeLinkEventTracker(t){const e=this._linkTrackers.indexOf(t);-1!==e&&this._linkTrackers.splice(e,1)}createLinkEvent(t){if(t&&""!==t)for(const e of this._linkTrackers){if(!e)continue;const s=e.eventUrlPrefix;s.length>0?t.substr(0,s.length)===s&&e.linkReceived(t):e.linkReceived(t)}}startSendingHeartBeat(){this.sendHeartBeat(),setInterval(this.sendHeartBeat,1e4)}sendHeartBeat(){E.a.sendHeartBeat()}get nitroTimer(){return this._nitroTimer}get core(){return this._core}get events(){return this._events}get localization(){return this._localization}get communication(){return this._communication}get avatar(){return this._avatar}get roomEngine(){return this._roomEngine}get sessionDataManager(){return this._sessionDataManager}get roomSessionManager(){return this._roomSessionManager}get roomManager(){return this._roomManager}get width(){return this.renderer.width/this.renderer.resolution}get height(){return this.renderer.height/this.renderer.resolution}get time(){return this.ticker.lastTime}get isReady(){return this._isReady}get isDisposed(){return this._isDisposed}static get instance(){return this.INSTANCE||null}}return e.WEBGL_CONTEXT_LOST="NE_WEBGL_CONTEXT_LOST",e.WEBGL_UNAVAILABLE="NE_WEBGL_UNAVAILABLE",e.RELEASE_VERSION="NITRO-0-4-0",e.READY="NE_READY",e.INSTANCE=null,e})()}).call(this,s("NUif"))},PJYa:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},PJfP:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("XMGm"),n=s("MeCd"),r=s("KQk8");let a=(()=>{class t extends n.a{constructor(){super(),this._data=[]}parseWrapper(t){if(!t)return;this._data=[];const e=t.readInt();if(e)for(let s=0;s<e;s++)this._data.push(t.readString());super.parseWrapper(t)}initializeFromRoomObjectModel(t){super.initializeFromRoomObjectModel(t),this._data=t.getValue(i.a.FURNITURE_DATA)}writeRoomObjectModel(e){super.writeRoomObjectModel(e),e.setValue(i.a.FURNITURE_DATA_FORMAT,t.FORMAT_KEY),e.setValue(i.a.FURNITURE_DATA,this._data)}getLegacyString(){return this._data&&this._data.length?this._data[t.STATE]:""}compare(e){if(!(e instanceof t))return!1;let s=0;for(;s<this._data.length;){if(0===s);else if(this._data[s]!==e.getValue(s))return!1;s++}return!0}getValue(t){return this._data[t]||""}setValue(t){this._data=t}}return t.FORMAT_KEY=r.a.STRING_KEY,t.STATE=0,t})()},PSU1:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},Poml:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},Pox2:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._success=!1,!0}parse(t){return!!t&&(this._success=t.readBoolean(),!0)}get success(){return this._success}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},Prlr:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("Wgf2");class r{flush(){return this._wrapper=null,this._count=0,this._x=0,this._y=0,this._value=0,!0}tileHeight(){return n.a.decodeTileHeight(this._value)}isStackingBlocked(){return n.a.decodeIsStackingBlocked(this._value)}isRoomTile(){return n.a.decodeIsRoomTile(this._value)}next(){return!!this._count&&(this._count--,this._x=this._wrapper.readByte(),this._y=this._wrapper.readByte(),this._value=this._wrapper.readShort(),!0)}parse(t){return!!t&&(this._wrapper=t,this._count=t.readByte(),!0)}get x(){return this._x}get y(){return this._y}get height(){return this._value}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},Q612:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},QQU2:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{flush(){return!0}parse(t){return!!t&&(this._userId=t.readInt(),this._reason=t.readInt(),!0)}get _Str_4963(){return this._userId}get reason(){return this._reason}}return t._Str_16410=1,t})()},QXLr:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._userId=0,this._respectsReceived=0,!0}parse(t){return!!t&&(this._userId=t.readInt(),this._respectsReceived=t.readInt(),!0)}get userId(){return this._userId}get respectsReceived(){return this._respectsReceived}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},QZVO:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},QZfg:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("1+1A");class r{flush(){return this._item=null,!0}parse(t){return!!t&&(this._item=new n.a(t),this._item.username=t.readString(),!0)}get item(){return this._item}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"Qi++":function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("Ns5P");let n=(()=>{class t extends i.a{constructor(e,s,i,n){super(t.RSFRE_FRIEND_REQUEST,e),this._requestId=0,this._userId=0,this._requestId=s,this._userId=i,this._userName=n}get requestId(){return this._requestId}get userId(){return this._userId}get userName(){return this._userName}}return t.RSFRE_FRIEND_REQUEST="RSFRE_FRIEND_REQUEST",t})()},QjCb:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._message=null,!0}parse(t){return!!t&&(this._message=t.readString(),!0)}get message(){return this._message}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},QzjD:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._width=0,this._height=0,this._wallHeight=0,this._fixedWallsHeight=0,this._tileMap=[],this._holeMap=[],this._doors=[],this._dimensions={minX:0,maxX:0,minY:0,maxY:0},this._restrictsDragging=!1,this._restrictedScale=1,this._restrictsScaling=!1}get width(){return this._width}set width(t){this._width=t}get height(){return this._height}set height(t){this._height=t}get wallHeight(){return this._wallHeight}set wallHeight(t){this._wallHeight=t}get fixedWallsHeight(){return this._fixedWallsHeight}set fixedWallsHeight(t){this._fixedWallsHeight=t}get tileMap(){return this._tileMap}get holeMap(){return this._holeMap}get doors(){return this._doors}get dimensions(){return this._dimensions}get restrictsDragging(){return this._restrictsDragging}set restrictsDragging(t){this._restrictsDragging=t}get restrictsScaling(){return this._restrictsScaling}set restrictsScaling(t){this._restrictsScaling=t}get restrictedScale(){return this._restrictedScale}set restrictedScale(t){this._restrictedScale=t}}},R5Ri:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t=1){this._elapsedTime=0,this._percision=t,this._timer=null,this.start()}start(){this._elapsedTime=0,this._timer||(this._timer=setInterval(()=>this.increase(),this._percision))}stop(){this._timer&&clearTimeout(this._timer)}increase(){this._elapsedTime+=this._percision}getTimer(){return this._elapsedTime}}},RH6c:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},ReTp:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{constructor(){this._errorCode=""}flush(){return this._errorCode="",!0}parse(t){return!!t&&(this._errorCode=t.readString(),!0)}get errorCode(){return this._errorCode}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"S+Gq":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._resultCode=-1,this._name="",this._nameSuggestions=[],!0}parse(t){if(!t)return!1;this._resultCode=t.readInt(),this._name=t.readString();let e=t.readInt();for(;e>0;)this._nameSuggestions.push(t.readString()),e--;return!0}get resultCode(){return this._resultCode}get name(){return this._name}get nameSuggestions(){return this._nameSuggestions}}let r=(()=>{class t extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}return t._Str_5797=0,t._Str_7005=1,t._Str_7389=2,t._Str_7137=3,t._Str_7836=4,t._Str_7721=5,t._Str_8620=6,t._Str_9429=7,t})()},"S5/W":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._roomId=-1,this._roomName=null,!0}parse(t){if(t)return this._roomId=t.readInt(),this._roomName=t.readString(),!0}get roomId(){return this._roomId}get roomName(){return this._roomName}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},S8Tn:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},SBJG:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("DFHD");let n=(()=>{class t{constructor(){this._isDisposed=!1,this._scale=64,this._heightMap=[],this._width=0,this._height=0,this._floorHeight=0}get disposed(){return this._isDisposed}get scale(){return this._scale}set scale(t){this._scale=t}dispose(){this.reset(),this._isDisposed=!0}initialize(t,e,s){if(t<=this._width&&e<=this._height)return this._width=t,this._height=e,void(this._floorHeight=s);this.reset();let i=0;for(;i<e;){const e=[];this._heightMap.push(e);let s=0;for(;s<t;)e.push(0),s++;i++}this._width=t,this._height=e,this._floorHeight=s}reset(){this._heightMap=[]}setHeight(t,e,s){if(t<0||t>=this._width||e<0||e>=this._height)return!1;const i=this._heightMap[e];return!!i&&(i[t]=s,!0)}getHeight(t,e){if(t<0||t>=this._width||e<0||e>=this._height)return 0;const s=this._heightMap[e];return s?s[t]:0}getLocation(e,s,n,r,a){let o,c,h;if(0==e&&0==s)if(e=this._width,s=this._height,o=Math.round(this.scale/10),a==t.R){for(h=this._width-1;h>=0;){for(c=1;c<this._height;){if(this.getHeight(h,c)<=this._floorHeight){c-1<s&&(e=h,s=c-1);break}c++}h--}r+=this.scale/4-o/2,n+=this.scale/2}else{for(c=this._height-1;c>=0;){for(h=1;h<this._width;){if(this.getHeight(h,c)<=this._floorHeight){h-1<e&&(e=h-1,s=c);break}h++}c--}r+=this.scale/4-o/2,n-=o}let l=e,u=s,_=this.getHeight(e,s);return a==t.R?(l+=n/(this._scale/2)-.5,u+=.5,_-=(r-n/2)/(this._scale/2)):(u+=(this._scale/2-n)/(this._scale/2)-.5,l+=.5,_-=(r-(this._scale/2-n)/2)/(this._scale/2)),new i.a(l,u,_)}_Str_24084(e,s,i){let n,r,a,o,c,h=0,l=0;r=Math.ceil(e),h=r-e;let u=0;for(n=0;n<this._width;){if(r>=0&&r<this._height){if(this.getHeight(n,r)<=this._floorHeight){a=n-1,o=r,l=n,i=t.L;break}if(this.getHeight(n,r+1)<=this._floorHeight){a=n,o=r,l=o-e,i=t.R;break}}r++,n++}const _=this.scale/2*h;let d=-l*this.scale/2;return d+=18*-s/32*this.scale/2,u=this.getHeight(a,o),c=u*this.scale/2+d,c+=i==t.R?h*this.scale/4:(1-h)*this.scale/4,this.getLocation(a,o,_,c,i)}_Str_22875(e,s){if(null==e)return null;let i=0,n=0,r=0,a=0,o="",c=0;if(90==s)i=Math.floor(e.x-.5),n=Math.floor(e.y+.5),c=this.getHeight(i,n),r=this._scale/2-this._scale/2*(e.y-n+.5),a=this._scale/2*(c-e.z)+(this._scale/2-r)/2,o=t.L;else{if(180!=s)return null;i=Math.floor(e.x+.5),n=Math.floor(e.y-.5),c=this.getHeight(i,n),r=this._scale/2*(e.x+.5-i),a=this._scale/2*(c-e.z)+r/2,o=t.R}return[i,n,r,a,o]}_Str_21860(t,e){const s=this._Str_22875(t,e);return null==s?null:":w="+Math.trunc(s[0])+","+Math.trunc(s[1])+" l="+Math.trunc(s[2])+","+Math.trunc(s[3])+" "+s[4]}getDirection(e){return e==t.R?180:90}_Str_24141(t,e){const s=this.getHeight(t,e),i=s+1;return s+(Math.trunc(this.getHeight(t-1,e-1))==i||Math.trunc(this.getHeight(t,e-1))==i||Math.trunc(this.getHeight(t+1,e-1))==i||Math.trunc(this.getHeight(t-1,e))==i||Math.trunc(this.getHeight(t+1,e))==i||Math.trunc(this.getHeight(t-1,e+1))==i||Math.trunc(this.getHeight(t,e+1))==i||Math.trunc(this.getHeight(t+1,e+1))==i?.5:0)}_Str_10375(t,e){return t>=0&&t<this._width&&e>=0&&e<this._height&&this._heightMap[e][t]>=0}}return t.DEFAULT_SCALE=32,t.L="l",t.R="r",t})()},SRjU:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t){this._topics=[],this._name=t.readString();const e=t.readInt();let s=0;for(;s<e;){const e=t.readString(),i=t.readInt(),n=t.readString();this._topics.push({name:e,id:i,_Str_18308:n}),s++}}get topics(){return this._topics}}class r{flush(){return!0}parse(t){this._callForHelpCategories=[];const e=t.readInt();let s=0;for(;s<e;)this._callForHelpCategories.push(new n(t)),s++;return!0}get callForHelpCategories(){return this._callForHelpCategories}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},SS1c:function(t,e,s){"use strict";s.d(e,"a",function(){return h});var i=s("5+UO"),n=s("P7Cj");let r=(()=>{class t{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._type=-1,this._position=null,this._itemName=null,this._itemPromoImage=null,this._catalogPageLocation=null,this._productCode=null,this._productOfferId=0,this._expirationTime=0,!0}parse(e){if(!e)return!1;switch(this._position=e.readInt(),this._itemName=e.readString(),this._itemPromoImage=e.readString(),this._type=e.readInt(),this._type){case t.ITEM_CATALOGUE_PAGE:this._catalogPageLocation=e.readString();break;case t.ITEM_PRODUCT_OFFER:this._productOfferId=e.readInt();break;case t.ITEM_IAP:this._productCode=e.readString()}const s=e.readInt();return this._expirationTime=s>0?1e3*s+n.a.instance.time:0,!0}get type(){return this._type}get position(){return this._position}get itemName(){return this._itemName}get itemPromoImage(){return this._itemPromoImage}get catalogPageLocation(){return this._catalogPageLocation}get productCode(){return this._productCode}get productOfferId(){return this._productOfferId}get expirationTime(){return this._expirationTime}}return t.ITEM_CATALOGUE_PAGE=0,t.ITEM_PRODUCT_OFFER=1,t.ITEM_IAP=2,t})();class a{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._images=[],this._texts=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._images.push(t.readString()),e--;let s=t.readInt();for(;s>0;)this._texts.push(t.readString()),s--;return!0}get images(){return this._images}get texts(){return this._texts}}var o=s("0wjC");class c{flush(){return this._pageId=-1,this._catalogType=null,this._layoutCode=null,this._localization=null,this._offers=[],this._offerId=-1,this._acceptSeasonCurrencyAsCredits=!1,this._frontPageItems=[],!0}parse(t){if(!t)return!1;this._pageId=t.readInt(),this._catalogType=t.readString(),this._layoutCode=t.readString(),this._localization=new a(t);let e=t.readInt();for(;e>0;)this._offers.push(new o.a(t)),e--;if(this._offerId=t.readInt(),this._acceptSeasonCurrencyAsCredits=t.readBoolean(),t.bytesAvailable){let e=t.readInt();for(;e>0;)this._frontPageItems.push(new r(t)),e--}return!0}get pageId(){return this._pageId}get catalogType(){return this._catalogType}get layoutCode(){return this._layoutCode}get localization(){return this._localization}get offers(){return this._offers}get offerId(){return this._offerId}get acceptSeasonCurrencyAsCredits(){return this._acceptSeasonCurrencyAsCredits}get frontPageItems(){return this._frontPageItems}}class h extends i.a{constructor(t){super(t,c)}getParser(){return this.parser}}},SULm:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},Sb1T:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i){this._data=[t,e,s,i]}getMessageArray(){return this._data}dispose(){}}},SbyL:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i,n,r=-1){this._data=[],this._data.push(t),this._data.push(e),this._data.push(s),this._data.push(i),this._data.push(n),-1!=r&&this._data.push(r)}getMessageArray(){return this._data}dispose(){}}},ScQb:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("Hs+C");let n=(()=>{class t extends i.a{constructor(t,e,s,i,n,r=1){super(t,e,s,i),this._sampleId=n,this._pitch=r}get sampleId(){return this._sampleId}get pitch(){return this._pitch}}return t.ROOM_OBJECT_INITIALIZED="ROPSPE_ROOM_OBJECT_INITIALIZED",t.ROOM_OBJECT_DISPOSED="ROPSPE_ROOM_OBJECT_DISPOSED",t.PLAY_SAMPLE="ROPSPE_PLAY_SAMPLE",t.CHANGE_PITCH="ROPSPE_CHANGE_PITCH",t})()},Sfl4:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},SqPf:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},SylX:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i){this._data=[t,e,s,i]}getMessageArray(){return this._data}dispose(){}}},SzgH:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(...t){this._data=[t.length,...t]}getMessageArray(){return this._data}dispose(){}}},TPa8:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("Ns5P");let n=(()=>{class t extends i.a{constructor(e,s,i){super(t.RSDE_DANCE,e),this._roomIndex=s,this._danceId=i}get roomIndex(){return this._roomIndex}get danceId(){return this._danceId}}return t.RSDE_DANCE="RSDE_DANCE",t})()},TQha:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},Tp0E:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._id=0,this._title=null,this._badge=null,this._colorA=null,this._colorB=null,this._ownerOrFavorite=null,this._ownerId=0,this._hasForum=!1,!0}parse(t){return!!t&&(this._id=t.readInt(),this._title=t.readString(),this._badge=t.readString(),this._colorA=t.readString(),this._colorB=t.readString(),this._ownerOrFavorite=t.readBoolean(),this._ownerId=t.readInt(),this._hasForum=t.readBoolean(),!0)}get id(){return this._id}get title(){return this._title}get badge(){return this._badge}get colorA(){return this._colorA}get colorB(){return this._colorB}get ownerOrFavorite(){return this._ownerOrFavorite}get ownerId(){return this._ownerId}get hasForum(){return this._hasForum}}class r{flush(){return this._id=0,this._username=null,this._figure=null,this._motto=null,this._registration=null,this._achievementPoints=0,this._friendsCount=0,this._isMyFriend=!1,this._requestSent=!1,this._isOnline=!1,this._groups=[],this._lastVisit=0,!0}parse(t){if(!t)return!1;this._id=t.readInt(),this._username=t.readString(),this._figure=t.readString(),this._motto=t.readString(),this._registration=t.readString(),this._achievementPoints=t.readInt(),this._friendsCount=t.readInt(),this._isMyFriend=t.readBoolean(),this._requestSent=t.readBoolean(),this._isOnline=t.readBoolean();let e=t.readInt();for(;e>0;)this._groups.push(new n(t)),e--;return this._lastVisit=t.readInt(),!0}get id(){return this._id}get username(){return this._username}get figure(){return this._figure}get motto(){return this._motto}get registration(){return this._registration}get achievementPoints(){return this._achievementPoints}get friendsCount(){return this._friendsCount}get isMyFriend(){return this._isMyFriend}get requestSent(){return this._requestSent}get isOnline(){return this._isOnline}get groups(){return this._groups}get lastVisit(){return this._lastVisit}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},U4HJ:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("0wjC");class r{flush(){return this._offer=null,!0}parse(t){return!!t&&(this._offer=new n.a(t),!0)}get offer(){return this._offer}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},UJeg:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},UTIc:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._errorCode=0,!0}parse(t){return!!t&&(this._errorCode=t.readInt(),!0)}get errorCode(){return this._errorCode}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},UTUL:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.OBJECT_UNDEFINED="OBJECT_UNDEFINED",t.OBJECT_MOVE="OBJECT_MOVE",t.OBJECT_PLACE="OBJECT_PLACE",t.OBJECT_ROTATE_POSITIVE="OBJECT_ROTATE_POSITIVE",t.OBJECT_ROTATE_NEGATIVE="OBJECT_ROTATE_NEGATIVE",t.OBJECT_MOVE_TO="OBJECT_MOVE_TO",t.OBJECT_PLACE_TO="OBJECT_PLACE_TO",t.OBJECT_PICKUP="OBJECT_PICKUP",t.OBJECT_PICKUP_BOT="OBJECT_PICKUP_BOT",t.OBJECT_PICKUP_PET="OBJECT_PICKUP_PET",t.OBJECT_EJECT="OBJECT_EJECT",t.OBJECT_SAVE_STUFF_DATA="OBJECT_SAVE_STUFF_DATA",t})()},UdUS:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},UufK:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},V1nr:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._windowX=0,this._windowY=0,this._windowWidth=0,this._windowHeight=0,this._leftPanelHidden=!1,this._resultsMode=0,!0}parse(t){return!!t&&(this._windowX=t.readInt(),this._windowY=t.readInt(),this._windowWidth=t.readInt(),this._windowHeight=t.readInt(),this._leftPanelHidden=t.readBoolean(),this._resultsMode=t.readInt(),!0)}get windowX(){return this._windowX}get windowY(){return this._windowY}get windowWidth(){return this._windowWidth}get windowHeight(){return this._windowHeight}get leftPanelHidden(){return this._leftPanelHidden}get resultsMode(){return this._resultsMode}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},V2Y4:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},V5Lx:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},VYTg:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i,n,r){this._data=[t,e,s,i,n,r]}getMessageArray(){return this._data}dispose(){}}},VZrs:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("XMGm"),n=s("MeCd"),r=s("KQk8");let a=(()=>{class t extends n.a{constructor(){super(),this._state="",this._result=0}parseWrapper(t){t&&(this._state=t.readString(),this._result=t.readInt(),super.parseWrapper(t))}writeRoomObjectModel(e){super.writeRoomObjectModel(e),e.setValue(i.a.FURNITURE_DATA_FORMAT,t.FORMAT_KEY);const s={};s.S=this._state,s.R=this._result.toString(),e.setValue(i.a.FURNITURE_DATA,s)}getLegacyString(){return this._state}compare(t){return!0}setString(t){this._state=t}get result(){return this._result}}return t.FORMAT_KEY=r.a.VOTE_KEY,t})()},WEUE:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("XxiA");class r{flush(){return this._definition=null,!0}parse(t){return!!t&&(this._definition=new n.a(t),!0)}get definition(){return this._definition}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},WM79:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("ndLt");class r{flush(){return this._totalFragments=0,this._fragmentNumber=0,this._fragment=[],!0}parse(t){if(!t)return!1;this._totalFragments=t.readInt(),this._fragmentNumber=t.readInt();let e=t.readInt();for(;e>0;)this._fragment.push(new n.a(t)),e--;return!0}get totalFragments(){return this._totalFragments}get fragmentNumber(){return this._fragmentNumber}get fragment(){return this._fragment}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},WRyM:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("3r1x");let n=(()=>{class t extends i.a{constructor(t){super(t)}get iconId(){return this._iconId}set iconId(t){this._iconId=t}get iconName(){return this._iconName}set iconName(t){this._iconName=t}}return t.TOOLBAR_CLICK="NTE_TOOLBAR_CLICK",t.SELECT_OWN_AVATAR="NTE_SELECT_OWN_AVATAR",t})()},Wamt:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._itemId=0,this._data="",!0}parse(t){return!!t&&(this._itemId=parseInt(t.readString()),this._data=t.readString(),!0)}get furnitureId(){return this._itemId}get data(){return this._data}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},Wgf2:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{static decodeTileHeight(t){return t<0?-1:(16383&t)/256}static decodeIsStackingBlocked(t){return!!(16384&t)}static decodeIsRoomTile(t){return t>=0}getTileHeight(t,e){return t<0||t>=this._width||e<0||e>=this._height?-1:i.decodeTileHeight(this._heights[e*this._width+t])}getStackingBlocked(t,e){return t<0||t>=this._width||e<0||e>=this._height||i.decodeIsStackingBlocked(this._heights[e*this._width+t])}isRoomTile(t,e){return!(t<0||t>=this._width||e<0||e>=this._height)&&i.decodeIsRoomTile(this._heights[e*this._width+t])}flush(){return this._width=0,this._height=0,this._heights=[],!0}parse(t){if(!t)return!1;this._width=t.readInt();const e=t.readInt();this._height=e/this._width;let s=0;for(;s<e;)this._heights[s]=t.readShort(),s++;return!0}get width(){return this._width}get height(){return this._height}get heights(){return this._heights}}},WjEe:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},Wzp3:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("iAsj");class r{flush(){return this._item=null,!0}parse(t){return!!t&&(this._item=new n.a(t),!0)}get item(){return this._item}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"X+hw":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,2*e.size];for(const[s,i]of e.entries())this._data.push(s,i)}getMessageArray(){return this._data}dispose(){}}},X26Z:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("jfHZ");class r{flush(){return this._userFriendLimit=0,this._normalFriendLimit=0,this._extendedFriendLimit=0,this._categories=[],!0}parse(t){if(!t)return!1;this._userFriendLimit=t.readInt(),this._normalFriendLimit=t.readInt(),this._extendedFriendLimit=t.readInt();let e=t.readInt();for(;e>0;)this._categories.push(new n.a(t)),e--;return!0}get userFriendLimit(){return this._userFriendLimit}get normalFriendLimit(){return this._normalFriendLimit}get extendedFriendLimit(){return this._extendedFriendLimit}get categories(){return this._categories}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},XMGm:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.OBJECT_ROOM_ID="object_room_id",t.OBJECT_ACCURATE_Z_VALUE="object_accurate_z_value",t.TILE_CURSOR_HEIGHT="tile_cursor_height",t.FIGURE="figure",t.GENDER="gender",t.OWN_USER="own_user",t.FIGURE_CAN_STAND_UP="figure_can_stand_up",t.FIGURE_VERTICAL_OFFSET="figure_vertical_offset",t.FIGURE_TALK="figure_talk",t.FIGURE_DANCE="figure_dance",t.FIGURE_SLEEP="figure_sleep",t.FIGURE_BLINK="figure_blink",t.FIGURE_EFFECT="figure_effect",t.FIGURE_CARRY_OBJECT="figure_carry_object",t.FIGURE_USE_OBJECT="figure_use_object",t.FIGURE_GESTURE="figure_gesture",t.FIGURE_POSTURE="figure_posture",t.FIGURE_POSTURE_PARAMETER="figure_posture_parameter",t.FIGURE_HIGHLIGHT_ENABLE="figure_highlight_enable",t.FIGURE_HIGHLIGHT="figure_highlight",t.FURNITURE_PURCHASER_NAME="furniture_purchaser_name",t.FURNITURE_PURCHASER_FIGURE="furniture_purchaser_figure",t.STD="std",t.FIGURE_SIGN="figure_sign",t.FIGURE_FLAT_CONTROL="figure_flat_control",t.FIGURE_IS_TYPING="figure_is_typing",t.FIGURE_IS_MUTED="figure_is_muted",t.FIGURE_GAINED_EXPERIENCE="figure_gained_experience",t.FIGURE_NUMBER_VALUE="figure_number_value",t.FIGURE_IS_PLAYING_GAME="figure_is_playing_game",t.FIGURE_GUIDE_STATUS="figure_guide_status",t.FIGURE_EXPRESSION="figure_expression",t.HEAD_DIRECTION="head_direction",t.FURNITURE_AUTOMATIC_STATE_INDEX="furniture_automatic_state_index",t.FURNITURE_ALWAYS_STACKABLE="furniture_always_stackable",t.FURNITURE_DISABLE_PICKING_ANIMATION="furniture_disable_picking_animation",t.FURNITURE_DATA_FORMAT="furniture_data_format",t.FURNITURE_UNIQUE_SERIAL_NUMBER="furniture_unique_serial_number",t.FURNITURE_UNIQUE_EDITION_SIZE="furniture_unique_edition_size",t.FURNITURE_CRACKABLE_STATE="furniture_crackable_state",t.FURNITURE_CRACKABLE_HITS="furniture_crackable_hits",t.FURNITURE_CRACKABLE_TARGET="furniture_crackable_target",t.FURNITURE_CREDIT_VALUE="furniture_credit_value",t.FURNITURE_DATA="furniture_data",t.FURNITURE_ITEMDATA="furniture_itemdata",t.FURNITURE_COLOR="furniture_color",t.FURNITURE_LIFT_AMOUNT="furniure_lift_amount",t.FURNITURE_GUILD_CUSTOMIZED_GUILD_ID="furniture_guild_customized_guild_id",t.FURNITURE_GUILD_CUSTOMIZED_BADGE="furniture_guild_customized_badge",t.FURNITURE_GUILD_CUSTOMIZED_COLOR_1="furniture_guild_customized_color_1",t.FURNITURE_GUILD_CUSTOMIZED_COLOR_2="furniture_guild_customized_color_2",t.FURNITURE_STATE_UPDATE_TIME="furniture_state_update_time",t.FURNITURE_SELECTION_DISABLED="furniture_selection_disabled",t.FURNITURE_SIZE_X="furniture_size_x",t.FURNITURE_SIZE_Y="furniture_size_y",t.FURNITURE_SIZE_Z="furniture_size_z",t.FURNITURE_CENTER_X="furniture_center_x",t.FURNITURE_CENTER_Y="furniture_center_y",t.FURNITURE_CENTER_Z="furniture_center_z",t.FURNITURE_ALLOWED_DIRECTIONS="furniture_allowed_directions",t.FURNITURE_AD_URL="furniture_ad_url",t.FURNITURE_TYPE_ID="furniture_type_id",t.FURNITURE_EXTRAS="furniture_extras",t.FURNITURE_EXPIRY_TIME="furniture_expiry_time",t.FURNITURE_EXPIRTY_TIMESTAMP="furniture_expiry_timestamp",t.FURNITURE_REAL_ROOM_OBJECT="furniture_real_room_object",t.FURNITURE_IS_STICKIE="furniture_is_stickie",t.FURNITURE_BRANDING_IMAGE_STATUS="furniture_branding_image_status",t.FURNITURE_BRANDING_IMAGE_URL="furniture_branding_image_url",t.FURNITURE_BRANDING_URL="furniture_branding_url",t.FURNITURE_BRANDING_OFFSET_X="furniture_branding_offset_x",t.FURNITURE_BRANDING_OFFSET_Y="furniture_branding_offset_y",t.FURNITURE_BRANDING_OFFSET_Z="furniture_branding_offset_z",t.FURNITURE_BADGE_IMAGE_STATUS="furniture_badge_image_status",t.FURNITURE_BADGE_ASSET_NAME="furniture_badge_asset_name",t.FURNITURE_BADGE_VISIBLE_IN_STATE="furniture_badge_visible_in_state",t.FURNITURE_ALPHA_MULTIPLIER="furniture_alpha_multiplier",t.FURNITURE_USAGE_POLICY="furniture_usage_policy",t.FURNITURE_OWNER_ID="furniture_owner_id",t.FURNITURE_OWNER_NAME="furniture_owner_name",t.FURNITURE_ROOM_BACKGROUND_COLOR_HUE="furniture_room_background_color_hue",t.FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION="furniture_room_background_color_saturation",t.FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS="furniture_room_background_color_lightness",t.FURNITURE_USES_PLANE_MASK="furniture_uses_plane_mask",t.FURNITURE_PLANE_MASK_TYPE="furniture_plane_mask_type",t.FURNITURE_IS_VARIABLE_HEIGHT="furniture_is_variable_height",t.FURNITURE_VOTE_MAJORITY_RESULT="furniture_vote_majority_result",t.FURNITURE_VOTE_COUNTER_COUNT="furniture_vote_counter_count",t.FURNITURE_SOUNDBLOCK_RELATIVE_ANIMATION_SPEED="furniture_soundblock_relative_animation_speed",t.FURNITURE_MANNEQUIN_NAME="furniture_mannequin_name",t.FURNITURE_MANNEQUIN_GENDER="furniture_mannequin_gender",t.FURNITURE_MANNEQUIN_FIGURE="furniture_mannequin_figure",t.FURNITURE_HIGHSCORE_SCORE_TYPE="furniture_highscore_score_type",t.FURNITURE_HIGHSCORE_CLEAR_TYPE="furniture_highscore_clear_type",t.FURNITURE_HIGHSCORE_DATA_ENTRY_COUNT="furniture_highscore_data_entry_count",t.FURNITURE_HIGHSCORE_DATA_ENTRY_BASE_USERS_="furniture_highscore_data_entry_base_users_",t.FURNITURE_HIGHSCORE_DATA_ENTRY_BASE_SCORE_="furniture_highscore_data_entry_base_score_",t.FURNITURE_INTERNAL_LINK="furniture_internal_link",t.PET_PALETTE_INDEX="pet_palette_index",t.PET_COLOR="pet_color",t.PET_HEAD_ONLY="pet_head_only",t.PET_CUSTOM_LAYER_IDS="pet_custom_layer_ids",t.PET_CUSTOM_PARTS_IDS="pet_custom_part_ids",t.PET_CUSTOM_PALETTE_IDS="pet_custom_palette_ids",t.PET_IS_RIDING="pet_is_riding",t.PET_TYPE="pet_type",t.PET_ALLOWED_DIRECTIONS="pet_allowed_directions",t.RACE="race",t.ROOM_MAP_DATA="room_map_data",t.ROOM_PLANE_MASK_XML="room_plane_mask_xml",t.ROOM_FLOOR_TYPE="room_floor_type",t.ROOM_WALL_TYPE="room_wall_type",t.ROOM_LANDSCAPE_TYPE="room_landscape_type",t.ROOM_WALL_THICKNESS="room_wall_thickness",t.ROOM_FLOOR_THICKNESS="room_floor_thickness",t.ROOM_FLOOR_HOLE_UPDATE_TIME="room_floor_hole_update_time",t.ROOM_FLOOR_VISIBILITY="room_floor_visibility",t.ROOM_WALL_VISIBILITY="room_wall_visibility",t.ROOM_LANDSCAPE_VISIBILITY="room_landscape_visibility",t.ROOM_DOOR_X="room_door_x",t.ROOM_DOOR_Y="room_door_y",t.ROOM_DOOR_Z="room_door_z",t.ROOM_DOOR_DIR="room_door_dir",t.ROOM_BACKGROUND_COLOR="room_background_color",t.ROOM_COLORIZE_BG_ONLY="room_colorize_bg_only",t.ROOM_RANDOM_SEED="room_random_seed",t.ROOM_WORLD_TYPE="room_world_type",t.ROOM_SELECTED_X="room_selected_x",t.ROOM_SELECTED_Y="room_selected_y",t.ROOM_SELECTED_Z="room_selected_z",t.ROOM_SELECTED_PLANE="room_selected_plane",t.IMAGE_QUERY_SCALE="image_query_scale",t.FURNITURE_FRIENDFURNI_ENGRAVING="furniture_friendfurni_engraving_type",t.SESSION_URL_PREFIX="session_url_prefix",t.SESSION_CURRENT_USER_ID="session_current_user_id",t})()},XNkd:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._stuffId=0,!0}parse(t){return!!t&&(this._stuffId=t.readInt(),!0)}get stuffId(){return this._stuffId}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},Xe1u:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("XMGm"),n=s("MeCd"),r=s("KQk8");class a{constructor(){this._score=-1,this._users=[]}get score(){return this._score}set score(t){this._score=t}get users(){return this._users}set users(t){this._users=t}addUsername(t){this._users.push(t)}}let o=(()=>{class t extends n.a{constructor(){super(),this._state="",this._scoreType=-1,this._clearType=-1,this._entries=[]}parseWrapper(t){if(!t)return;this._state=t.readString(),this._scoreType=t.readInt(),this._clearType=t.readInt();let e=t.readInt();for(;e>0;){const s=new a;s.score=t.readInt();let i=t.readInt();for(;i>0;)s.addUsername(t.readString()),i--;this._entries.push(s),e--}super.parseWrapper(t)}initializeFromRoomObjectModel(t){this._scoreType=t.getValue(i.a.FURNITURE_HIGHSCORE_SCORE_TYPE),this._clearType=t.getValue(i.a.FURNITURE_HIGHSCORE_CLEAR_TYPE),this._entries=[];const e=t.getValue(i.a.FURNITURE_HIGHSCORE_DATA_ENTRY_COUNT);let s=0;for(;s<e;){const e=new a;e.score=t.getValue(i.a.FURNITURE_HIGHSCORE_DATA_ENTRY_BASE_SCORE_+s),e.users=t.getValue(i.a.FURNITURE_HIGHSCORE_DATA_ENTRY_BASE_USERS_+s),this._entries.push(e),s++}super.initializeFromRoomObjectModel(t)}writeRoomObjectModel(e){if(super.writeRoomObjectModel(e),e.setValue(i.a.FURNITURE_DATA_FORMAT,t.FORMAT_KEY),e.setValue(i.a.FURNITURE_HIGHSCORE_SCORE_TYPE,this._scoreType),e.setValue(i.a.FURNITURE_HIGHSCORE_CLEAR_TYPE,this._clearType),this._entries){e.setValue(i.a.FURNITURE_HIGHSCORE_DATA_ENTRY_COUNT,this._entries.length);let t=0;for(;t<this._entries.length;){const s=this._entries[t];e.setValue(i.a.FURNITURE_HIGHSCORE_DATA_ENTRY_BASE_SCORE_+t,s.score),e.setValue(i.a.FURNITURE_HIGHSCORE_DATA_ENTRY_BASE_USERS_+t,s.users),t++}}}getLegacyString(){return this._state}get entries(){return this._entries}get clearType(){return this._clearType}get scoreType(){return this._scoreType}}return t.FORMAT_KEY=r.a.HIGHSCORE_KEY,t})()},Xe8L:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._itemId=0,this._userId=0,!0}parse(t){return!!t&&(this._itemId=parseInt(t.readString()),this._userId=t.readInt(),!0)}get itemId(){return this._itemId}get userId(){return this._userId}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},Xmmk:function(t,e,s){"use strict";s.d(e,"a",function(){return d});var i=s("Fv14"),n=s("ZQhZ"),r=s("IGSi"),a=s("Xr/m");class o{constructor(){this._map=new Map,this._updateCounter=0}dispose(){this._map.clear(),this._updateCounter=0}getValue(t){return this._map.get(t)}setValue(t,e){this._map.set(t,e),this._updateCounter++}removeKey(t){t&&(this._map.delete(t),this._updateCounter++)}get updateCounter(){return this._updateCounter}}class c extends a.a{constructor(t,e){super(),this._id=t,this._container=e,this._renderer=null,this._managers=new Map,this._updateCategories=[],this._model=new o}onDispose(){this.removeAllManagers(),this.destroyRenderer(),this._container=null,this._model.dispose()}setRenderer(t){if(t!==this._renderer&&(this._renderer&&this.destroyRenderer(),this._renderer=t,this._renderer&&(this._renderer.reset(),this._managers.size)))for(const e of this._managers.values()){if(!e)continue;const t=e.objects;if(t.length)for(const e of t.getValues())e&&this._renderer.addObject(e)}}destroyRenderer(){this._renderer&&(this._renderer.dispose(),this._renderer=null)}getManager(t){return this._managers.get(t)||null}getManagerOrCreate(t){let e=this.getManager(t);return e||(e=this._container.createRoomObjectManager(t),e?(this._managers.set(t,e),e):null)}getTotalObjectsForManager(t){const e=this.getManager(t);return e?e.totalObjects:0}getRoomObject(t,e){const s=this.getManager(e);return s&&s.getObject(t)||null}getRoomObjectsForCategory(t){const e=this.getManager(t);return e?e.objects.getValues():[]}getRoomObjectByIndex(t,e){const s=this.getManager(e);return s&&s.getObjectByIndex(t)||null}createRoomObject(t,e,s,i){const n=this.getManagerOrCreate(i);if(!n)return null;const r=n.createObject(t,e,s);return r?(this._renderer&&this._renderer.addObject(r),r):null}createRoomObjectAndInitalize(t,e,s){return this._container?this._container.createRoomObjectAndInitalize(this._id,t,e,s):null}removeRoomObject(t,e){const s=this.getManager(e);if(!s)return;const i=s.getObject(t);i&&(i.tearDown(),this._renderer&&this._renderer.removeObject(i),s.removeObject(t))}removeAllManagers(){for(const t of this._managers.values())if(t){if(this._renderer){const e=t.objects;if(e.length)for(const t of e.getValues())t&&this._renderer.removeObject(t)}t.dispose()}this._managers.clear()}addUpdateCategory(t){this._updateCategories.indexOf(t)>=0||this._updateCategories.push(t)}removeUpdateCategory(t){const e=this._updateCategories.indexOf(t);-1!==e&&this._updateCategories.splice(e,1)}update(t,e=!1){for(const s of this._updateCategories){const e=this.getManager(s);if(!e)continue;const i=e.objects;if(i.length)for(const s of i.getValues()){if(!s)continue;const e=s.logic;e&&e.update(t)}}this._renderer&&this._renderer.update(t,e)}hasUninitializedObjects(){for(const t of this._managers.values())if(t)for(const e of t.objects.getValues())if(e&&!e.isReady)return!0;return!1}get id(){return this._id}get container(){return this._container}get renderer(){return this._renderer}get managers(){return this._managers}get model(){return this._model}}var h=s("hTzv"),l=s("DFHD");let u=(()=>{class t extends a.a{constructor(e,s,i){super(),this._id=e,this._instanceId=t.OBJECT_COUNTER++,this._type=i,this._model=new o,this._location=new l.a,this._direction=new l.a,this._states=[],this._visualization=null,this._logic=null,this._pendingLogicMessages=[],this._updateCounter=0,this._isReady=!1;let n=s-1;for(;n>=0;)this._states[n]=0,n--}onDispose(){this._pendingLogicMessages=[],this.setVisualization(null),this.setLogic(null),this._model&&this._model.dispose(),super.onDispose()}getLocation(){return this._location}setLocation(t){t&&(t.x===this._location.x&&t.y===this._location.y&&t.z===this._location.z||(this._location.x=t.x,this._location.y=t.y,this._location.z=t.z,this._updateCounter++))}getDirection(){return this._direction}setDirection(t){t&&(t.x===this._direction.x&&t.y===this._direction.y&&t.z===this._direction.z||(this._direction.x=(t.x%360+360)%360,this._direction.y=(t.y%360+360)%360,this._direction.z=(t.z%360+360)%360,this._updateCounter++))}getState(t=0){return t>=0&&t<this._states.length?this._states[t]:-1}setState(t,e=0){return e>=0&&e<this._states.length&&(this._states[e]!==t&&(this._states[e]=t,this._updateCounter++),!0)}setVisualization(t){this._visualization!==t&&(this._visualization&&this._visualization.dispose(),this._visualization=t,this._visualization&&(this._visualization.object=this))}setLogic(t){if(this._logic===t)return;const e=this._logic;if(e&&(this._logic=null,e.setObject(null)),this._logic=t,this._logic)for(this._logic.setObject(this);this._pendingLogicMessages.length;){const t=this._pendingLogicMessages.shift();this._logic.processUpdateMessage(t)}}processUpdateMessage(t){if(this._logic)return this._logic.processUpdateMessage(t);this._pendingLogicMessages.push(t)}tearDown(){this._logic&&this._logic.tearDown()}get id(){return this._id}get instanceId(){return this._instanceId}get type(){return this._type}get model(){return this._model}get visualization(){return this._visualization}get mouseHandler(){return this._logic}get logic(){return this._logic}get location(){return this._location}get direction(){return this._direction}get updateCounter(){return this._updateCounter}set updateCounter(t){this._updateCounter=t}get isReady(){return this._isReady}set isReady(t){this._isReady=t}}return t.OBJECT_COUNTER=0,t})();class _{constructor(){this._objects=new h.a,this._objectsPerType=new h.a}dispose(){this.removeAllObjects()}getObject(t){return this._objects.getValue(t)||null}getObjectByIndex(t){return this._objects.getWithIndex(t)||null}createObject(t,e,s){const i=new u(t,e,s);return this.addObject(t,s,i)}addObject(t,e,s){if(this._objects.getValue(t))return s.dispose(),null;this._objects.add(t,s);const i=this.getTypeMap(e);return i&&i.add(t,s),s}removeObject(t){const e=this._objects.remove(t);if(e){const t=this.getTypeMap(e.type);t&&t.remove(e.id),e.dispose()}}removeAllObjects(){let t=0;for(;t<this._objects.length;){const e=this._objects.getWithIndex(t);e&&e.dispose(),t++}for(this._objects.reset(),t=0;t<this._objectsPerType.length;){const e=this._objectsPerType.getWithIndex(t);e&&e.dispose(),t++}this._objectsPerType.reset()}getTypeMap(t,e=!0){let s=this._objectsPerType.getValue(t);return!s&&e&&(s=new h.a,this._objectsPerType.add(t,s)),s}get objects(){return this._objects}get totalObjects(){return this._objects.length}}let d=(()=>{class t extends i.a{constructor(e,s,i){super(),this._state=t._Str_16443,this._rooms=new Map,this._contentLoader=null,this._updateCategories=[],this._listener=e,this._visualizationFactory=s,this._logicFactory=i,this._initialLoadList=[],this._pendingContentTypes=[],this._skipContentProcessing=!1,this._disposed=!1,this.onRoomContentLoadedEvent=this.onRoomContentLoadedEvent.bind(this),this.events.addEventListener(r.a.RCLE_SUCCESS,this.onRoomContentLoadedEvent),this.events.addEventListener(r.a.RCLE_FAILURE,this.onRoomContentLoadedEvent),this.events.addEventListener(r.a.RCLE_CANCEL,this.onRoomContentLoadedEvent)}onInit(){if(this._state>=t._Str_13904||!this._contentLoader)return;const e=n.a.MANDATORY_LIBRARIES;for(const t of e)t&&-1===this._initialLoadList.indexOf(t)&&(this._contentLoader.downloadAsset(t,this.events),this._initialLoadList.push(t));this._state=t._Str_13904}getRoomInstance(t){return this._rooms.get(t)||null}createRoomInstance(t){if(this._rooms.get(t))return null;const e=new c(t,this);if(this._rooms.set(e.id,e),this._updateCategories.length)for(const s of this._updateCategories)e.addUpdateCategory(s);return e}removeRoomInstance(t){const e=this._rooms.get(t);return!!e&&(this._rooms.delete(t),e.dispose(),!0)}createRoomObjectAndInitalize(t,e,s,i){const n=this.getRoomInstance(t);if(!n)return null;let r=s,a=s,o=s,c=null,h=!1;if(this._contentLoader.isLoaderType(s)){if(c=this._contentLoader.getCollection(s),!c&&(h=!0,this._contentLoader.downloadAsset(s,this.events),o=this._contentLoader.getPlaceholderName(s),c=this._contentLoader.getCollection(o),!c))return null;r=c.data.visualizationType,a=c.data.logicType}const l=n.createRoomObject(e,1,s,i);if(!l)return null;if(this._visualizationFactory){const t=this._visualizationFactory.getVisualization(r);if(!t)return n.removeRoomObject(e,i),null;t.asset=c;const s=this._visualizationFactory.getVisualizationData(o,r,c&&c.data||null);if(!s||!t.initialize(s))return n.removeRoomObject(e,i),null;l.setVisualization(t)}if(this._logicFactory){const t=this._logicFactory.getLogic(a);l.setLogic(t),t&&t.initialize(c&&c.data||null)}return h||(l.isReady=!0),this._contentLoader.setRoomObjectRoomId(l,t),l}reinitializeRoomObjectsByType(t){if(!(t&&this._contentLoader&&this._visualizationFactory&&this._logicFactory))return;const e=this._contentLoader.getCollection(t);if(!e)return;const s=e.data.visualizationType,i=e.data.logicType,n=this._visualizationFactory.getVisualizationData(t,s,e.data);for(const r of this._rooms.values())if(r)for(const[a,o]of r.managers.entries())if(o)for(const c of o.objects.getValues()){if(!c||c.type!==t)continue;const h=this._visualizationFactory.getVisualization(s);if(h)if(h.asset=e,n&&h.initialize(n)){c.setVisualization(h);const t=this._logicFactory.getLogic(i);c.setLogic(t),t&&t.initialize(e.data),c.isReady=!0,this._listener&&this._listener.objectInitialized(r.id,c.id,a)}else o.removeObject(c.id);else o.removeObject(c.id)}}addUpdateCategory(t){if(!(this._updateCategories.indexOf(t)>=0)&&(this._updateCategories.push(t),this._rooms.size))for(const e of this._rooms.values())e&&e.addUpdateCategory(t)}removeUpdateCategory(t){const e=this._updateCategories.indexOf(t);if(-1!==e&&(this._updateCategories.splice(e,1),this._rooms.size))for(const s of this._rooms.values())s&&s.removeUpdateCategory(t)}setContentLoader(t){this._contentLoader&&this._contentLoader.dispose(),this._contentLoader=t}processPendingContentTypes(t){if(this._skipContentProcessing)this._skipContentProcessing=!1;else for(;this._pendingContentTypes.length;){const t=this._pendingContentTypes.shift();this._contentLoader.getCollection(t)?(this.reinitializeRoomObjectsByType(t),this._listener&&this._listener.initalizeTemporaryObjectsByType(t,!0),this._initialLoadList.length>0&&this.removeFromInitialLoad(t)):(this._listener&&this._listener.initalizeTemporaryObjectsByType(t,!1),this.logger.log("Invalid Collection: "+t))}}removeFromInitialLoad(e){if(e&&this._state!==t._Str_9994)if(this._contentLoader||(this._state=t._Str_9994),this._contentLoader.getCollection(e)){const s=this._initialLoadList.indexOf(e);s>=0&&this._initialLoadList.splice(s,1),this._initialLoadList.length||(this._state=t._Str_9846,this._listener&&this._listener.onRoomEngineInitalized(!0))}else this._state=t._Str_9994,this._listener&&this._listener.onRoomEngineInitalized(!1)}onRoomContentLoadedEvent(t){if(!this._contentLoader)return;const e=t.contentType;this._pendingContentTypes.indexOf(e)>=0||this._pendingContentTypes.push(e)}update(t,e=!1){if(this.processPendingContentTypes(t),this._rooms.size)for(const s of this._rooms.values())s&&s.update(t,e)}createRoomObjectManager(t){return new _}get rooms(){return this._rooms}get disposed(){return this._disposed}}return t._Str_9994=-1,t._Str_16337=0,t._Str_16443=1,t._Str_13904=2,t._Str_9846=3,t._Str_18280=40,t})()},XpxF:function(t,e,s){"use strict";s.d(e,"a",function(){return It});var i=s("CDzl"),n=s("Fv14"),r=s("3r1x"),a=s("P7Cj");let o=(()=>{class t{constructor(){this._gender="M",this._avatarEffectType=-1}_Str_2153(t,e){this._data=new Map,this._colors=new Map,this._gender=e,this._Str_958(t)}dispose(){this._data=null,this._colors=null,this._isDisposed=!0}get disposed(){return this._isDisposed}_Str_958(t){if(t)for(const e of t.split(".")){const t=e.split("-");if(t.length>0){const e=t[0],s=parseInt(t[1]),i=[];let n=2;for(;n<t.length;)i.push(parseInt(t[n])),n++;i.length||i.push(0),this._Str_1876(e,s,!1),this.savePartSetColourId(e,i,!1)}}}_Str_2131(t){return!!this._data.get(t)}getPartSetId(t){return this._Str_2131(t)?this._data.get(t):-1}getColourIds(t){return this._colors.get(t)?this._colors.get(t):[]}_Str_1008(){let t="";const e=[];for(const[i,n]of this._data.entries()){let t=i+"-"+n;const s=this._colors.get(i);if(s)for(const e of s)t=t+"-"+e;e.push(t)}let s=0;for(;s<e.length;)t+=e[s],s<e.length-1&&(t+="."),s++;return t}_Str_2088(t,e,s,i=!1){this._Str_1876(t,e,i),this.savePartSetColourId(t,s,i)}_Str_1876(e,s,i=!0){switch(e){case t.HD:case t.HR:case t.HA:case t.HE:case t.EA:case t.FA:case t.CH:case t.CC:case t.CA:case t.CP:case t.LG:case t.SH:case t.WA:s>=0?this._data.set(e,s):this._data.delete(e)}}savePartSetColourId(e,s,i=!0){switch(e){case t.HD:case t.HR:case t.HA:case t.HE:case t.EA:case t.FA:case t.CH:case t.CC:case t.CA:case t.CP:case t.LG:case t.SH:case t.WA:return void this._colors.set(e,s)}}getFigureStringWithFace(e){const s=[t.HD];let i="";const n=[];for(const a of s){const s=this._colors.get(a);if(s){let i=this._data.get(a);a===t.HD&&(i=e);let r=a+"-"+i;if(i>=0){let t=0;for(;t<s.length;)r=r+"-"+s[t],t++}n.push(r)}}let r=0;for(;r<n.length;)i+=n[r],r<n.length-1&&(i+="."),r++;return i}get gender(){return this._gender}}return t.M="M",t.F="F",t.U="U",t.H="h",t.STD="std",t._Str_2028="0",t.HD="hd",t.HR="hr",t.HA="ha",t.HE="he",t.EA="ea",t.FA="fa",t.CC="cc",t.CH="ch",t.CA="ca",t.CP="cp",t.LG="lg",t.SH="sh",t.WA="wa",t._Str_1329=[28,29,30,33,34,35,36,37,38,39,40,41,42,43,68],t})();class c{constructor(t,e){this._name=t,this._link=e.link,this._flipH=e.flipH,this._flipV=e.flipV}get name(){return this._name}get link(){return this._link}get flipH(){return this._flipH}get flipV(){return this._flipV}}class h{constructor(t,e){this._avatarRenderManager=t,this._aliases=new Map,this._assets=e,this._missingAssetNames=[]}dispose(){this._assets=null,this._aliases=null}reset(){this.init()}init(){for(const t of this._assets.collections.values()){if(!t)continue;const e=t.data&&t.data.aliases;if(e)for(const t in e){const s=e[t];s&&this._aliases.set(t,new c(t,s))}}}_Str_1044(t){return!!this._aliases.get(t)}_Str_2125(t){let e=t,s=5;for(;this._Str_1044(e)&&s>=0;)e=this._aliases.get(e).link,s--;return e}getAsset(t){return this._assets?(t=this._Str_2125(t),this._assets.getAsset(t)||null):null}}var l=s("vzKh"),u=s("vuPI");let _=(()=>{class t extends r.a{constructor(t,e){super(t),this._library=e}get library(){return this._library}}return t.DOWNLOAD_COMPLETE="ARLE_DOWNLOAD_COMPLETE",t})(),d=(()=>{class t extends u.a{constructor(e,s,i,n){super(),this._state=t.NOT_LOADED,this._libraryName=e,this._revision=s,this._downloadUrl=n,this._assets=i,this._downloadUrl=this._downloadUrl.replace(/%libname%/gi,this._libraryName),this._downloadUrl=this._downloadUrl.replace(/%revision%/gi,this._revision),this._assets.getCollection(this._libraryName)&&(this._state=t.LOADED)}downloadAsset(){if(this._assets&&this._state!==t.LOADING&&this._state!==t.LOADED)return this._assets.getCollection(this._libraryName)?(this._state=t.LOADED,void this.dispatchEvent(new _(_.DOWNLOAD_COMPLETE,this))):(this._state=t.LOADING,void this._assets.downloadAsset(this._downloadUrl,e=>{e&&(this._state=t.LOADED,this.dispatchEvent(new _(_.DOWNLOAD_COMPLETE,this)))}))}get libraryName(){return this._libraryName}get isLoaded(){return this._state===t.LOADED}}return t.DOWNLOAD_COMPLETE="AADL_DOWNLOAD_COMPLETE",t.NOT_LOADED=0,t.LOADING=1,t.LOADED=2,t})(),g=(()=>{class t{}return t.AVATAR_RENDER_READY="AVATAR_RENDER_READY",t})(),m=(()=>{class t extends u.a{constructor(t,e){super(),this._assets=t,this._structure=e,this._missingMandatoryLibs=a.a.instance.getConfiguration("avatar.mandatory.libraries"),this._figureMap=new Map,this._pendingContainers=[],this._figureListeners=new Map,this._incompleteFigures=new Map,this._pendingDownloadQueue=[],this._currentDownloads=[],this._libraryNames=[],this._isReady=!1,this.onLibraryLoaded=this.onLibraryLoaded.bind(this),this.onAvatarRenderReady=this.onAvatarRenderReady.bind(this),this.loadFigureMap(),this._structure.renderManager.events.addEventListener(g.AVATAR_RENDER_READY,this.onAvatarRenderReady)}loadFigureMap(){const e=new XMLHttpRequest;try{e.open("GET",a.a.instance.getConfiguration("avatar.figuremap.url")),e.send(),e.onloadend=s=>{if(e.responseText){const s=JSON.parse(e.responseText);this.processFigureMap(s.libraries),this.processMissingLibraries(),this._isReady=!0,this.dispatchEvent(new r.a(t.DOWNLOADER_READY))}},e.onerror=t=>{throw new Error("invalid_avatar_figure_map")}}catch(s){l.a.log(s)}}processFigureMap(t){if(t)for(const e of t){if(!e)continue;const t=e.id,s=e.revision||"";if(this._libraryNames.indexOf(t)>=0)continue;this._libraryNames.push(t);const i=new d(t,s,this._assets,a.a.instance.getConfiguration("avatar.asset.url"));i.addEventListener(_.DOWNLOAD_COMPLETE,this.onLibraryLoaded);for(const n of e.parts){const t=n.type+":"+n.id;let e=this._figureMap.get(t);e||(e=[]),e.push(i),this._figureMap.set(t,e)}}}onAvatarRenderReady(t){if(t){for(const[t,e]of this._pendingContainers)this.downloadAvatarFigure(t,e);this._pendingContainers=[]}}onLibraryLoaded(e){if(!e||!e.library)return;const s=[];for(const[n,a]of this._incompleteFigures.entries()){let e=!0;for(const t of a)if(t&&!t.isLoaded){e=!1;break}if(e){s.push(n);const e=this._figureListeners.get(n);if(e)for(const t of e)t&&!t.disposed&&t.resetFigure(n);this._figureListeners.delete(n),this.dispatchEvent(new r.a(t.LIBRARY_LOADED))}}for(const t of s)t&&this._incompleteFigures.delete(t);let i=0;for(;i<this._currentDownloads.length;){const t=this._currentDownloads[i];t&&t.libraryName===e.library.libraryName&&this._currentDownloads.splice(i,1),i++}}processMissingLibraries(){const t=this._missingMandatoryLibs.slice();for(const e of t){if(!e)continue;const t=this._figureMap.get(e);if(t)for(const e of t)e&&this.downloadLibrary(e)}}isAvatarFigureContainerReady(t){return!(!this._isReady||!this._structure.renderManager.isReady||this.getAvatarFigurePendingLibraries(t).length)}getAvatarFigurePendingLibraries(t){const e=[];if(!t||!this._structure)return e;const s=this._structure.figureData;if(!s)return e;const i=t._Str_1016();for(const n of i){const i=s._Str_740(n);if(!i)continue;const r=i._Str_1020(t.getPartSetId(n));if(r)for(const t of r._Str_806){if(!t)continue;const s=this._figureMap.get(t.type+":"+t.id);if(void 0!==s)for(const t of s)t&&!t.isLoaded&&(e.indexOf(t)>=0||e.push(t))}}return e}downloadAvatarFigure(t,e){if(!this._isReady||!this._structure.renderManager.isReady)return void this._pendingContainers.push([t,e]);const s=t._Str_1008(),i=this.getAvatarFigurePendingLibraries(t);if(i&&i.length){if(e&&!e.disposed){let t=this._figureListeners.get(s);t||(t=[],this._figureListeners.set(s,t)),t.push(e)}this._incompleteFigures.set(s,i);for(const t of i)t&&this.downloadLibrary(t)}else e&&!e.disposed&&e.resetFigure(s)}downloadLibrary(t){t&&!t.isLoaded&&(this._pendingDownloadQueue.indexOf(t)>=0||this._currentDownloads.indexOf(t)>=0||(this._pendingDownloadQueue.push(t),this.processDownloadQueue()))}processDownloadQueue(){for(;this._pendingDownloadQueue.length;)this._pendingDownloadQueue[0].downloadAsset(),this._currentDownloads.push(this._pendingDownloadQueue.shift())}}return t.DOWNLOADER_READY="AADM_DOWNLOADER_READY",t.LIBRARY_LOADED="AADM_LIBRARY_LOADED",t.MAX_DOWNLOADS=2,t})();var p=s("/niJ"),f=s("IqKQ"),E=s("hTzv"),S=s("IxQr");class v{constructor(t,e="",s=0){this._actionType=t||"",this._actionParameter=e||"",this._definition=null,this._startFrame=s||0,this._overridingAction=null}dispose(){this._actionType=null,this._actionParameter=null,this._definition=null}get id(){return this._definition?this._definition.id+"_"+this._actionParameter:""}get _Str_695(){return this._actionType}get _Str_727(){return this._actionParameter}set _Str_727(t){this._actionParameter=t}get _Str_742(){return this._definition}set _Str_742(t){this._definition=t}get _Str_664(){return this._startFrame}get _Str_707(){return this._overridingAction}set _Str_707(t){this._overridingAction=t}}var b=s("kXXe");let I=(()=>{class t{constructor(t,e,s){if(this._id=t.id,this._animationFrame=t.frame||0,this._dx=t.dx||0,this._dy=t.dy||0,this._dz=t.dz||0,this._directionOffset=t.dd||0,this._type=e,this._base=t.base||"",this._items=new Map,t.items)for(const i of t.items)this._items.set(i.id,i.base);""!==this._base&&this._Str_2108().toString(),s&&(this._action=new v(s.state,this.base),this._action._Str_742=s)}get items(){return this._items}_Str_2108(){let t=0,e=0;for(;e<this._base.length;)t+=this._base.charCodeAt(e),e++;return t}get id(){return this._id}get _Str_891(){return this._animationFrame}get dx(){return this._dx}get dy(){return this._dy}get dz(){return this._dz}get dd(){return this._directionOffset}get type(){return this._type}get base(){return this._base}get action(){return this._action}}return t.BODYPART="bodypart",t.FX="fx",t})();class R{constructor(t,e,s){this._image=t,this._regPoint=e,this._offset=new f.Point(0,0),this._regPoint=e,this._isCacheable=s,this._Str_1225()}dispose(){this._image&&this._image.destroy({children:!0}),this._image=null,this._regPoint=null,this._offset=null}_Str_1225(){}_Str_1387(t){this._regPoint=t,this._Str_1225()}get image(){return this._image}set image(t){this._image&&this._image!==t&&this._image.destroy({children:!0}),this._image=t}get _Str_1076(){const t=this._regPoint.clone();return t.x+=this._offset.x,t.y+=this._offset.y,t}set offset(t){this._offset=t,this._Str_1225()}get _Str_1807(){return this._isCacheable}}var T=s("sRxW"),O=s("tHQF"),y=s("uEox");let C=(()=>{class t{}return t.VERTICAL="vertical",t.SITTING="sitting",t.HORIZONTAL="horizontal",t.SWIM="swim",t.SNOWWARS_HORIZONTAL="swhorizontal",t})();class A{constructor(){this._Str_586=new Map}_Str_1565(t,e){this._Str_1233||(this._Str_1233=t);const s=this._Str_1961(this._Str_1233);s&&s._Str_1108(e),this._Str_1233=t}dispose(){if(!this._disposed){if(!this._Str_586)return;this._Str_2089(0,2147483647),this._Str_586.clear(),this._Str_586=null,this._disposed=!0}}_Str_2089(t,e){if(this._Str_586&&!this._disposed)for(const[s,i]of this._Str_586.entries())i&&e-i._Str_1815()>=t&&(i.dispose(),this._Str_586.delete(s))}_Str_2244(){return this._Str_1233}setDirection(t){this._Str_1188=t}getDirection(){return this._Str_1188}_Str_1961(t=null){return this._Str_1233?(t||(t=this._Str_1233),this._Str_586.get(t._Str_707?t._Str_707:t.id)):null}_Str_1765(t,e){this._Str_586.set(t._Str_707?t._Str_707:t.id,e)}_Str_587(t){}}class M{constructor(){this._Str_586=new Map,this._Str_1108(a.a.instance.time)}dispose(){if(this._Str_587("[dispose]"),this._Str_586){for(const t of this._Str_586.values())t&&t.dispose();this._Str_586.clear()}}_Str_2070(t){return this._Str_586.get(t.toString())||null}_Str_2168(t,e){this._Str_586.set(t.toString(),e)}_Str_1108(t){this._Str_1509=t}_Str_1815(){return this._Str_1509}_Str_587(t){}}class w{constructor(t){this._partList=t,this._images=new Map}dispose(){for(const t of this._images.values())t&&t.dispose();this._images=null}_Str_1699(){return this._partList}_Str_1629(t){return this._images.get(this._Str_2219(t))||null}_Str_1924(t,e){const s=this._Str_2219(e),i=this._images.get(s);i&&i.dispose(),this._images.set(s,t)}_Str_2219(t){let e="";for(const s of this._partList)e+=s._Str_1206(t)+"/";return e}_Str_587(t){}}class D{constructor(t,e,s,i,n,r=null){this._texture=t,this._container=r,this._rect=e,this._regPoint=s,this._flipH=i,this._color=n,i&&(this._regPoint.x=-this._regPoint.x+e.width)}dispose(){this._texture=null,this._regPoint=null,this._color=null}get texture(){return this._texture}get container(){return this._container}get rect(){return this._rect}get _Str_1076(){return this._regPoint}get flipH(){return this._flipH}get color(){return this._color}get _Str_1567(){return new f.Rectangle(-this._regPoint.x,-this._regPoint.y,this._rect.width,this._rect.height)}}let N=(()=>{class t{constructor(t,e,s,i){this._structure=t,this._avatar=e,this._assets=s,this._scale=i,this._cache=new Map,this._canvas=null,this._disposed=!1,this._unionImages=[],this._matrix=new f.Matrix,this._serverRenderData=[]}dispose(){if(!this._disposed){if(this._structure=null,this._avatar=null,this._assets=null,this._canvas=null,this._disposed=!0,this._cache){for(const t of this._cache.values())t&&t.dispose();this._cache=null}if(this._unionImages){for(const t of this._unionImages)t&&t.dispose();this._unionImages=[]}}}_Str_1086(t=6e4){const e=a.a.instance.time;if(this._cache)for(const s of this._cache.values())s&&s._Str_2089(t,e)}_Str_741(t){if(this._cache)for(const e of this._cache.values())e&&e._Str_1565(t,0)}setDirection(t,e){const s=this._structure._Str_1695(t);if(s)for(const i of s){const t=this._Str_1050(i);t&&t.setDirection(e)}}_Str_1565(t,e){const s=this._structure._Str_2021(t,this._avatar);for(const i of s){const s=this._Str_1050(i);s&&s._Str_1565(t,e)}}_Str_2014(t){if(this._geometryType!==t){if(this._geometryType===C.SITTING&&t===C.VERTICAL||this._geometryType===C.VERTICAL&&t===C.SITTING||this._geometryType===C.SNOWWARS_HORIZONTAL&&(t=C.SNOWWARS_HORIZONTAL))return this._geometryType=t,void(this._canvas=null);this._Str_1086(0),this._geometryType=t,this._canvas=null}}_Str_1629(t,e,s=!1){let i=this._Str_1050(t);i||(i=new A,this._cache.set(t,i));let n=i.getDirection(),r=i._Str_2244(),a=e;r._Str_742._Str_812&&(a-=r._Str_664);let o=r,c=[],h=new Map;const l=new f.Point;if(r&&r._Str_742&&r._Str_742._Str_861){let s=n;const i=this._structure._Str_720(r._Str_742.state+"."+r._Str_727),u=e-r._Str_664;if(i){const e=i._Str_607(u,t,r._Str_707);e&&(s=n+e.dd,e.dd<0?s<0?s=8+s:s>7&&(s=8-s):s<0?s+=8:s>7&&(s-=8),this._scale===y.a.LARGE?(l.x=e.dx,l.y=e.dy):(l.x=e.dx/2,l.y=e.dy/2),a=e._Str_891,e.action&&(r=e.action),e.type===I.BODYPART?(null!=e.action&&(o=e.action),n=s):e.type===I.FX&&(n=s),h=e.items),c=i._Str_652}}let u=i._Str_1961(o);u&&!s||(u=new M,i._Str_1765(o,u));let _=u._Str_2070(n);if(!_||s){const e=this._structure._Str_713(t,this._avatar.getFigure(),o,this._geometryType,n,c,this._avatar,h);_=new w(e),u._Str_2168(n,_)}let d=_._Str_1629(a);if(!d||s){const t=_._Str_1699();if(d=this._Str_1834(n,t,a,r,s),!d||s)return null;d._Str_1807&&_._Str_1924(d,a)}const g=this._structure._Str_1888(o,n,a,t);return l.x+=g.x,l.y+=g.y,d.offset=l,d}_Str_1009(){return this._serverRenderData=[],this._serverRenderData}_Str_1050(t){let e=this._cache.get(t);return e||(e=new A,this._cache.set(t,e)),e}_Str_1834(t,e,s,i,n=!1){if(!e||!e.length)return null;if(!this._canvas&&(this._canvas=this._structure._Str_1664(this._scale,this._geometryType),!this._canvas))return null;const r=T.a.DIRECTION_IS_FLIPPED[t]||!1;let a=i._Str_742._Str_778,o=!0,c=e.length-1;for(;c>=0;){const i=e[c];let h=16777215;if((7!=t||"fc"!==i._Str_1669&&"ey"!==i._Str_1669)&&("ri"!==i._Str_1669||i._Str_1502)){const e=i._Str_1502,c=i._Str_2258(s);let l=i._Str_1669,u=0;c?(u=c.number,c._Str_778&&""!==c._Str_778&&(a=c._Str_778)):u=i._Str_1674(s);let _=t,d=!1;r&&("wav"===a&&(l===O.a.LEFT_HAND||l===O.a.LEFT_SLEEVE||l===O.a.LEFT_COAT_SLEEVE)||"drk"===a&&(l===O.a.RIGHT_HAND||l===O.a.RIGHT_SLEEVE||l===O.a.RIGHT_COAT_SLEEVE)||"blw"===a&&l===O.a.RIGHT_HAND||"sig"===a&&l===O.a.LEFT_HAND||"respect"===a&&l===O.a.LEFT_HAND||l===O.a.RIGHT_HAND_ITEM||l===O.a.LEFT_HAND_ITEM||l===O.a.CHEST_PRINT?d=!0:(4===t?_=2:5===t?_=1:6===t&&(_=0),i._Str_1666!==l&&(l=i._Str_1666)));let g=this._scale+"_"+a+"_"+l+"_"+e+"_"+_+"_"+u,m=this._assets.getAsset(g);if(m||(g=this._scale+"_std_"+l+"_"+e+"_"+_+"_0",m=this._assets.getAsset(g)),m){const t=m.texture;if(t&&t.valid&&t.baseTexture){i.isColorable&&i.color&&(h=i.color._Str_915);const e=new f.Point(-m.x,-m.y);if(d&&(e.x=e.x+(this._scale===y.a.LARGE?65:31)),n){const s=new b.a;s.name=this._assets._Str_2125(g),s.x=-e.x-33,s.y=-e.y,s.z=-1e-4*this._serverRenderData.length,s.width=m.rectangle.width,s.height=m.rectangle.height,s.flipH=d,"lay"===a&&(s.x=s.x+53),r&&(s.flipH=!s.flipH,s.x=s.flipH?-s.x-t.width:s.x+65),i.isColorable&&(s.color=""+h),this._serverRenderData.push(s)}this._unionImages.push(new D(t,m.rectangle,e,d,h))}else o=!1}}c--}if(!this._unionImages.length)return null;const h=this._Str_1236(this._unionImages,r),l=new f.Point(-h._Str_1076.x,(this._scale===y.a.LARGE?this._canvas.height-16:this._canvas.height-8)-h._Str_1076.y);r&&"lay"!==a&&(l.x=l.x+(this._scale===y.a.LARGE?67:31));let u=this._unionImages.length-1;for(;u>=0;){const t=this._unionImages.pop();t&&t.dispose(),u--}return new R(h.container,l,o)}_Str_1652(t){let e=(255*t).toString(16);return e.length<2&&(e="0"+e),e}_Str_1236(t,e){const s=new f.Rectangle;for(const a of t)a&&s.enlarge(a._Str_1567);const i=new f.Point(-s.x,-s.y),n=new f.Container,r=new f.Sprite(f.Texture.EMPTY);r.width=s.width,r.height=s.height,n.addChild(r);for(const a of t){if(!a)continue;const t=a.texture,s=a.color,r=!(e&&a.flipH)&&(e||a.flipH),o=i.clone();o.x-=a._Str_1076.x,o.y-=a._Str_1076.y,e&&(o.x=n.width-(o.x+a.rect.width)),r?(this._matrix.a=-1,this._matrix.tx=a.rect.x+a.rect.width+o.x,this._matrix.ty=o.y-a.rect.y):(this._matrix.a=1,this._matrix.tx=o.x-a.rect.x,this._matrix.ty=o.y-a.rect.y);const c=new f.Sprite(t);c.tint=s,c.transform.setFromMatrix(this._matrix),n.addChild(c)}return new D(null,n.getLocalBounds(),i,e,null,n)}}return t._Str_2189=6e4,t})();var U=s("/PsI"),x=s("Kx+W");let L=(()=>{class t{constructor(e,s,i,n,r,a=null){this._frameCounter=0,this._directionOffset=0,this._isAnimating=!1,this._animationHasResetOnToggle=!1,this._actionsSorted=!1,this._fullImageCacheSize=5,this._isCachedImage=!1,this._useFullImageCache=!1,this._effectIdInUse=-1,this._cachedBodyPartsDirection=-1,this._cachedBodyPartsGeometryType=null,this._cachedBodyPartsAvatarSet=null,this._canvasOffsets=[],this._actions=[],this._cachedBodyParts=[],this._changes=!0,this._disposed=!1,this._effectManager=r,this._structure=e,this._assets=s,this._scale=n,this._effectListener=a,null==this._scale&&(this._scale=y.a.LARGE),null==i&&(i=new p.a("hr-893-45.hd-180-2.ch-210-66.lg-270-82.sh-300-91.wa-2007-.ri-1-")),this._figure=i,this._cache=new N(this._structure,this,this._assets,this._scale),this.setDirection(t.DEFAULT_AVATAR_SET,t.DEFAULT_DIRECTION),this._actions=[],this._defaultAction=new v(U.a.POSTURE_STAND),this._defaultAction._Str_742=this._structure._Str_1675(t.DEFAULT_ACTION),this.resetActions(),this._fullImageCache=new E.a,this._animationFrameCount=0}getServerRenderData(){return this.getAvatarPartsForCamera(x.a.FULL),this._cache._Str_1009()}dispose(){if(!this._disposed){if(this._structure=null,this._assets=null,this._mainAction=null,this._figure=null,this._avatarSpriteData=null,this._actions=null,this._image&&(this._image.destroy(),this._image=null),this._cache&&(this._cache.dispose(),this._cache=null),this._fullImageCache){for(const t of this._fullImageCache.getValues())t&&t.destroy();this._fullImageCache=null}this._image=null,this._canvasOffsets=null,this._disposed=!0}}get disposed(){return this._disposed}getFigure(){return this._figure}getScale(){return this._scale}getPartColor(t){return this._structure._Str_867(this._figure,t)}setDirection(t,e){(e+=this._directionOffset)<T.a.MIN_DIRECTION&&(e=T.a.MAX_DIRECTION+(e+1)),e>T.a.MAX_DIRECTION&&(e-=T.a.MAX_DIRECTION+1),this._structure._Str_1939(t)&&(this._mainDirection=e),t!==x.a.HEAD&&t!==x.a.FULL||(t===x.a.HEAD&&this.isHeadTurnPreventedByAction()&&(e=this._mainDirection),this._headDirection=e),this._cache.setDirection(t,e),this._changes=!0}setDirectionAngle(t,e){this.setDirection(t,Math.floor(e/45))}getSprites(){return this._sprites}getCanvasOffsets(){return this._canvasOffsets}getLayerData(t){return this._structure._Str_1881(t.animation.id,this._frameCounter,t.id)}updateAnimationByFrames(t=1){this._frameCounter+=t,this._changes=!0}resetAnimationFrameCounter(){this._frameCounter=0,this._changes=!0}getFullImageCacheKey(){if(!this._useFullImageCache)return null;if(1==this._sortedActions.length&&this._mainDirection==this._headDirection)return this._mainDirection+this._currentActionsString+this._frameCounter%4;if(2==this._sortedActions.length)for(const t of this._sortedActions){if("fx"==t._Str_695&&("33"==t._Str_727||"34"==t._Str_727||"35"==t._Str_727||"36"==t._Str_727))return this._mainDirection+this._currentActionsString+0;if("fx"==t._Str_695&&("38"==t._Str_727||"39"==t._Str_727))return this._mainDirection+"_"+this._headDirection+this._currentActionsString+this._frameCounter%11;if("dance"===t._Str_695&&("1"===t._Str_727||"2"===t._Str_727||"3"===t._Str_727||"4"===t._Str_727)){let e=this._frameCounter%8;return"3"===t._Str_727&&(e=this._frameCounter%10),"4"===t._Str_727&&(e=this._frameCounter%16),this._mainDirection+t._Str_695+t._Str_727+e}}return null}getBodyParts(t,e,s){return s==this._cachedBodyPartsDirection&&e==this._cachedBodyPartsGeometryType&&t==this._cachedBodyPartsAvatarSet||(this._cachedBodyPartsDirection=s,this._cachedBodyPartsGeometryType=e,this._cachedBodyPartsAvatarSet=t,this._cachedBodyParts=this._structure._Str_755(t,e,s)),this._cachedBodyParts}getAvatarPartsForCamera(t){let e;if(null==this._mainAction)return;if(null==this._structure._Str_1664(this._scale,this._mainAction._Str_742._Str_868))return;const s=this.getBodyParts(t,this._mainAction._Str_742._Str_868,this._mainDirection);let i=s.length-1;for(;i>=0;)e=s[i],this._cache._Str_1629(e,this._frameCounter,!0),i--}getImage(t,e,s=1,i=!0){if(!this._changes)return this._image;if(!this._mainAction)return null;this._actionsSorted||this.endActionAppends();const n=this._structure._Str_1664(this._scale,this._mainAction._Str_742._Str_868);if(!n)return null;!this._image||this._image.width===n.width&&this._image.height===n.height||(this._reusableTexture&&(this._reusableTexture.destroy(!0),this._reusableTexture=null),this._image=null,this._isCachedImage=!1);const r=this.getBodyParts(t,this._mainAction._Str_742._Str_868,this._mainDirection);this._image=null;const o=new f.Container;let c=!0,h=r.length-1;for(;h>=0;){const t=this._cache._Str_1629(r[h],this._frameCounter);if(t){const e=t.image;if(!e)return o.destroy({children:!0}),null;c=c&&t._Str_1807;const s=t._Str_1076.clone();if(s){s.x+=n.offset.x,s.y+=n.offset.y,s.x+=n._Str_1076.x,s.y+=n._Str_1076.y;const t=new f.Container;t.addChild(e),t&&(t.position.set(s.x,s.y),o.addChild(t))}}h--}return this._avatarSpriteData&&this._avatarSpriteData._Str_832&&this.convertToGrayscale(o),i?(this._reusableTexture?a.a.instance.renderer.render(o,this._reusableTexture,!0):this._reusableTexture=S.a.generateTexture(o,new f.Rectangle(0,0,n.width,n.height)),this._reusableTexture?(this._image=this._reusableTexture,this._changes=!1,this._image):null):S.a.generateTexture(o,new f.Rectangle(0,0,n.width,n.height))}getImageAsSprite(t,e=1){if(!this._mainAction)return null;this._actionsSorted||this.endActionAppends();const s=this._structure._Str_1664(this._scale,this._mainAction._Str_742._Str_868);if(!s)return null;const i=this.getBodyParts(t,this._mainAction._Str_742._Str_868,this._mainDirection),n=new f.Sprite,r=new f.Sprite(f.Texture.EMPTY);r.width=s.width,r.height=s.height,n.addChild(r);let a=i.length-1;for(;a>=0;){const t=this._cache._Str_1629(i[a],this._frameCounter);if(t){const e=t.image;if(!e)return n.destroy({children:!0}),null;const i=t._Str_1076.clone();if(i){i.x+=s.offset.x,i.y+=s.offset.y,i.x+=s._Str_1076.x,i.y+=s._Str_1076.y;const t=new f.Container;t.addChild(e),t.position.set(i.x,i.y),n.addChild(t)}}a--}return n}getCroppedImage(t,e=1){if(!this._mainAction)return null;this._actionsSorted||this.endActionAppends();const s=this._structure._Str_1664(this._scale,this._mainAction._Str_742._Str_868);if(!s)return null;const i=this.getBodyParts(t,this._mainAction._Str_742._Str_868,this._mainDirection),n=new f.Container,r=new f.Sprite(f.Texture.EMPTY);r.width=s.width,r.height=s.height,n.addChild(r);let o=i.length-1;for(;o>=0;){const t=this._cache._Str_1629(i[o],this._frameCounter);if(t){const e=t.image;if(!e)return n.destroy({children:!0}),null;const i=t._Str_1076.clone();if(i){i.x+=s.offset.x,i.y+=s.offset.y,i.x+=s._Str_1076.x,i.y+=s._Str_1076.y;const t=new f.Container;t.addChild(e),t&&(t.position.set(i.x,i.y),n.addChild(t))}}o--}return a.a.instance.renderer.extract.image(n)||null}getFullImage(t){const e=this._fullImageCache.getValue(t);return e?(e.valid||(this._fullImageCache.remove(t),e.destroy(!0)),e):null}cacheFullImage(t,e){const s=this._fullImageCache.getValue(t);if(s&&(this._fullImageCache.remove(t),s.destroy(!0)),this._fullImageCache.length===this._fullImageCacheSize){const t=this._fullImageCache.getKey(0);t&&this._fullImageCache.remove(t).destroy(!0)}this._fullImageCache.add(t,e)}getAsset(t){return this._assets.getAsset(t)}getDirection(){return this._mainDirection}initActionAppends(){this._actions=[],this._actionsSorted=!1,this._currentActionsString="",this._useFullImageCache=!1}endActionAppends(){if(this.sortActions()){for(const t of this._sortedActions)t._Str_695===U.a.EFFECT&&(this._effectManager.isAvatarEffectReady(parseInt(t._Str_727))||this._effectManager.downloadAvatarEffect(parseInt(t._Str_727),this));this.resetActions(),this.setActionsToParts()}}appendAction(t,...e){let s="";switch(this._actionsSorted=!1,e&&e.length>0&&(s=e[0]),null!=s&&(s=s.toString()),t){case U.a.POSTURE:switch(s){case U.a.POSTURE_LAY:this.setDirection(x.a.FULL,0==this._mainDirection?4:2);case U.a.POSTURE_WALK:case U.a.POSTURE_STAND:this._useFullImageCache=!0,this._useFullImageCache=!0;case U.a.POSTURE_SWIM:case U.a.POSTURE_FLOAT:case U.a.POSTURE_SIT:case U.a.SNOWWAR_RUN:case U.a.SNOWWAR_DIE_FRONT:case U.a.SNOWWAR_DIE_BACK:case U.a.SNOWWAR_PICK:case U.a.SNOWWAR_THROW:this.addActionData(s)}break;case U.a.GESTURE:switch(s){case U.a.GESTURE_AGGRAVATED:case U.a.GESTURE_SAD:case U.a.GESTURE_SMILE:case U.a.GESTURE_SURPRISED:this.addActionData(s)}break;case U.a.EFFECT:"33"!==s&&"34"!==s&&"35"!==s&&"36"!==s&&"38"!==s&&"39"!==s||(this._useFullImageCache=!0);case U.a.DANCE:case U.a.TALK:case U.a.EXPRESSION_WAVE:case U.a.SLEEP:case U.a.SIGN:case U.a.EXPRESSION_RESPECT:case U.a.EXPRESSION_BLOW_A_KISS:case U.a.EXPRESSION_LAUGH:case U.a.EXPRESSION_CRY:case U.a.EXPRESSION_IDLE:case U.a.EXPRESSION_SNOWBOARD_OLLIE:case U.a.EXPRESSION_SNOWBORD_360:case U.a.EXPRESSION_RIDE_JUMP:this.addActionData(t,s);break;case U.a.CARRY_OBJECT:case U.a.USE_OBJECT:{const e=this._structure._Str_2018(t);e&&(s=e._Str_1350(s)),this.addActionData(t,s);break}}return!0}addActionData(t,e=""){let s;this._actions||(this._actions=[]);let i=0;for(;i<this._actions.length;){if(s=this._actions[i],s._Str_695==t&&s._Str_727==e)return;i++}this._actions.push(new v(t,e,this._frameCounter))}isAnimating(){return this._isAnimating||this._animationFrameCount>1}resetActions(){return this._animationHasResetOnToggle=!1,this._isAnimating=!1,this._sprites=[],this._avatarSpriteData=null,this._directionOffset=0,this._structure._Str_2101(this),this._mainAction=this._defaultAction,this._mainAction._Str_742=this._defaultAction._Str_742,this.resetBodyPartCache(this._defaultAction),!0}isHeadTurnPreventedByAction(){let t,e;if(null==this._sortedActions)return!1;for(const s of this._sortedActions)t=this._structure._Str_2018(s._Str_695),null!=t&&t._Str_715(s._Str_727)&&(e=!0);return e}sortActions(){let t,e,s;if(this._currentActionsString="",this._sortedActions=this._structure._Str_711(this._actions),this._animationFrameCount=this._structure._Str_1936(this._sortedActions),this._sortedActions){this._canvasOffsets=this._structure._Str_781(this._sortedActions,this._scale,this._mainDirection);for(const s of this._sortedActions)if(this._currentActionsString=this._currentActionsString+(s._Str_695+s._Str_727),s._Str_695===U.a.EFFECT){const i=parseInt(s._Str_727);this._effectIdInUse!==i&&(t=!0),this._effectIdInUse=i,e=!0}e||(this._effectIdInUse>-1&&(t=!0),this._effectIdInUse=-1),t&&this._cache._Str_1086(0),this._lastActionsString!=this._currentActionsString&&(s=!0,this._lastActionsString=this._currentActionsString)}else this._canvasOffsets=[0,0,0],""!==this._lastActionsString&&(s=!0,this._lastActionsString="");return this._actionsSorted=!0,s}setActionsToParts(){if(null==!this._sortedActions)return;const t=a.a.instance.time,e=[];for(const s of this._sortedActions)e.push(s._Str_695);for(const s of this._sortedActions)if(s&&s._Str_742&&s._Str_742._Str_861){const t=this._structure._Str_720(s._Str_742.state+"."+s._Str_727);if(t&&t._Str_1892()){const i=t._Str_1571();if(i)for(const n of i)e.indexOf(n)>=0&&(s._Str_707=t._Str_707(n))}t&&t.resetOnToggle&&(this._animationHasResetOnToggle=!0)}for(const s of this._sortedActions)if(s&&s._Str_742&&(s._Str_742._Str_861&&""===s._Str_727&&(s._Str_727="1"),this.setActionToParts(s,t),s._Str_742._Str_861)){this._isAnimating=s._Str_742._Str_801(s._Str_727);const t=this._structure._Str_720(s._Str_742.state+"."+s._Str_727);t&&(this._sprites=this._sprites.concat(t._Str_786),t._Str_776()&&(this._directionOffset=t._Str_1493.offset),t._Str_872()&&(this._avatarSpriteData=t._Str_1475))}}setActionToParts(t,e){null!=t&&null!=t._Str_742&&""!=t._Str_742._Str_778&&(t._Str_742._Str_779&&(this._mainAction=t,this._cache._Str_2014(t._Str_742._Str_868)),this._cache._Str_1565(t,e),this._changes=!0)}resetBodyPartCache(t){t&&""!==t._Str_742._Str_778&&(t._Str_742._Str_779&&(this._mainAction=t,this._cache._Str_2014(t._Str_742._Str_868)),this._cache._Str_741(t),this._changes=!0)}get avatarSpriteData(){return this._avatarSpriteData}convertToGrayscale(e,s="CHANNELS_EQUAL"){let i=.33,n=.33,r=.33;switch(s){case t.CHANNELS_UNIQUE:i=.3,n=.59,r=.11;break;case t.CHANNELS_RED:i=1,n=0,r=0;break;case t.CHANNELS_GREEN:i=0,n=1,r=0;break;case t.CHANNELS_BLUE:i=0,n=0,r=1;break;case t.CHANNELS_DESATURATED:i=.3086,n=.6094,r=.082}const a=new f.filters.ColorMatrixFilter;return a.matrix=[i,n,r,0,0,i,n,r,0,0,i,n,r,0,0,0,0,0,1,0],e.filters=[a],e}errorThis(t){}logThis(t){}isPlaceholder(){return!1}forceActionUpdate(){this._lastActionsString=""}get animationHasResetOnToggle(){return this._animationHasResetOnToggle}get mainAction(){return this._mainAction._Str_695}resetEffect(t){t===this._effectIdInUse&&(this.resetActions(),this.setActionsToParts(),this._animationHasResetOnToggle=!0,this._changes=!0,this._effectListener&&this._effectListener.resetEffect(t))}}return t.CHANNELS_EQUAL="CHANNELS_EQUAL",t.CHANNELS_UNIQUE="CHANNELS_UNIQUE",t.CHANNELS_RED="CHANNELS_RED",t.CHANNELS_GREEN="CHANNELS_GREEN",t.CHANNELS_BLUE="CHANNELS_BLUE",t.CHANNELS_DESATURATED="CHANNELS_DESATURATED",t.DEFAULT_ACTION="Default",t.DEFAULT_DIRECTION=2,t.DEFAULT_AVATAR_SET=x.a.FULL,t})();class P{constructor(t){this._id=parseInt(t.id),this._value=parseInt(t.id),this._prevents=t.prevents||[],this._preventHeadTurn=t.preventHeadTurn||!1,this._isAnimated=!0,void 0!==t.animated&&!1===t.animated&&(this._isAnimated=!1)}get id(){return this._id}get value(){return this._value}get prevents(){return this._prevents}get _Str_1891(){return this._preventHeadTurn}get _Str_801(){return this._isAnimated}}class F{constructor(t){if(this._id=t.id,this._state=t.state,this._precedence=t.precedence,this._activePartSet=t.activePartSet,this._assetPartDefinition=t.assetPartDefinition,this._lay=t.lay,this._geometryType=t.geometryType,this._isMain=t.main||!1,this._isDefault=t.isDefault||!1,this._isAnimation=t.animation||!1,this._startFromFrameZero=t.startFromFrameZero||!1,this._prevents=t.prevents||[],this._preventHeadTurn=t.preventHeadTurn||!1,this._types=new Map,this._params=new Map,this._defaultParameterValue="",this._canvasOffsets=null,t.params&&t.params.length>0)for(const e of t.params)e&&("default"===e.id?this._defaultParameterValue=e.value:this._params.set(e.id,e.value));if(t.types&&t.types.length>0)for(const e of t.types){if(!e)continue;const t=new P(e);this._types.set(t.id,t)}}_Str_772(t,e,s){this._canvasOffsets||(this._canvasOffsets=new Map);let i=this._canvasOffsets.get(t);i||(i=new Map,this._canvasOffsets.set(t,i)),i.set(e,s)}_Str_805(t,e){if(!this._canvasOffsets)return null;const s=this._canvasOffsets.get(t);return s?s.get(e):null}getType(t){return t&&this._types.get(parseInt(t))||null}_Str_1350(t){return t?this._params.get(t)||this._defaultParameterValue:""}_Str_733(t){return this._prevents.concat(this._Str_1889(t))}_Str_1889(t){if(!t)return[];const e=this._types.get(parseInt(t));return e?e.prevents:[]}_Str_715(t){if(!t)return this._preventHeadTurn;const e=this.getType(t);return e?e._Str_1891:this._preventHeadTurn}_Str_801(t){if(!t)return!0;const e=this.getType(t);return!e||e._Str_801}get id(){return this._id}get state(){return this._state}get precedence(){return this._precedence}get activePartSet(){return this._activePartSet}get _Str_778(){return this._assetPartDefinition}get lay(){return this._lay}get _Str_868(){return this._geometryType}get _Str_779(){return this._isMain}get _Str_804(){return this._isDefault}get _Str_861(){return this._isAnimation}get _Str_812(){return this._startFromFrameZero}get prevents(){return this._prevents}get preventHeadTurn(){return this._preventHeadTurn}get params(){return this._params}}class k{constructor(t,e){this._assets=t,this._actions=new Map,this._defaultAction=null,this._Str_1620(e)}_Str_1620(t){if(t){for(const e of t.actions){if(!e||!e.state)continue;const t=new F(e);this._actions.set(t.state,t)}t.actionOffsets&&this._Str_1767(t.actionOffsets)}}_Str_1767(t){if(t&&t.length)for(const e of t){const t=this._actions.get(e.action);if(t)for(const s of e.offsets){const e=s.size||"",i=s.direction;""!==e&&void 0!==i&&t._Str_772(e,i,[s.x||0,s.y||0,s.z||0])}}}_Str_1675(t){if(!t)return null;for(const e of this._actions.values())if(e&&e.id===t)return e;return null}_Str_2018(t){return this._actions.get(t)||null}_Str_1027(){if(this._defaultAction)return this._defaultAction;for(const t of this._actions.values())if(t&&t._Str_804)return this._defaultAction=t,t;return null}_Str_781(t,e,s){let i=[];for(const n of t){if(!n)continue;const t=this._actions.get(n._Str_695),r=t&&t._Str_805(e,s);r&&(i=r)}return i}_Str_711(t){if(!t)return null;t=this._Str_1247(t);const e=[];for(const s of t){if(!s)continue;const t=this._actions.get(s._Str_695);t&&(s._Str_742=t,e.push(s))}return e.sort(this.sortByPrecedence),e}_Str_1247(t){let e=[];const s=[];for(const i of t){if(!i)continue;const t=this._actions.get(i._Str_695);t&&(e=e.concat(t._Str_733(i._Str_727)))}for(const i of t){if(!i)continue;let t=i._Str_695;"fx"===i._Str_695&&(t=t+"."+i._Str_727),e.indexOf(t)>=0||s.push(i)}return s}sortByPrecedence(t,e){if(!t||!e)return 0;const s=t._Str_742.precedence,i=e._Str_742.precedence;return s<i?1:s>i?-1:0}}class V{constructor(t){this._id=t.id||"",this._align=t.align||"",this._base=t.base||"",this._ink=t.ink||0,this._blend=0;const e=t.blend;e&&e.length>0&&(this._blend=parseInt(e),this._blend>1&&(this._blend=this._blend/100))}get id(){return this._id}get align(){return this._align}get base(){return this._base}get ink(){return this._ink}get blend(){return this._blend}get _Str_1096(){return 1!==this._blend}}class B{constructor(t){this._ink=t.ink;let e=t.foreground,s=t.background;e=e.replace("#",""),s=s.replace("#",""),this._foreGround=parseInt(e,16),this._backGround=parseInt(s,16),this._colorTransform=null,this._rgb=parseInt(e,16),this._r=this._rgb>>16&255,this._g=this._rgb>>8&255,this._b=this._rgb>>0&255,this._redMultiplier=this._r/255*1,this._greenMultiplier=this._g/255*1,this._blueMultiplier=this._b/255*1,this._alphaMultiplier=1,this._paletteIsGrayscale=!0,37===this._ink&&(this._alphaMultiplier=.5,this._paletteIsGrayscale=!1),this._colorMap=this._Str_1181(this._backGround,this._foreGround)}get ink(){return this._ink}get colorTransform(){return this._colorTransform}get reds(){return this._colorMap.get("reds")}get greens(){return this._colorMap.get("greens")}get blues(){return this._colorMap.get("blues")}get alphas(){return this._colorMap.get("alphas")}get _Str_832(){return this._paletteIsGrayscale}_Str_1181(t,e){const s=t>>24&255,i=t>>16&255,n=t>>8&255,r=t>>0&255,a=((e>>24&255)-s)/255,o=((e>>16&255)-i)/255,c=((e>>8&255)-n)/255,h=((e>>0&255)-r)/255,l=new Map,u=[],_=[],d=[],g=[];let m=s,p=i,f=n,E=r,S=0;for(;S<256;)p==i&&f==n&&E==r&&(m=0),m+=a,p+=o,f+=c,E+=h,g.push(m<<24),u.push(m<<24|p<<16|f<<8|E),_.push(m<<24|p<<16|f<<8|E),d.push(m<<24|p<<16|f<<8|E),S++;return l.set("alphas",u),l.set("reds",u),l.set("greens",_),l.set("blues",d),l}}class W{constructor(t){this._offset=t.offset}get offset(){return this._offset}}class K{constructor(t,e){this._animation=t,this._id=e.id,this._ink=e.ink,this._member=e.member,this._hasStaticY=!!e.staticY,this._hasDirections=!!e.directions,this._dx=[],this._dy=[],this._dz=[];const s=e.directionList;if(s&&s.length)for(const i of s){const t=i.id;void 0!==t&&(this._dx[t]=i.dx||0,this._dy[t]=i.dy||0,this._dz[t]=i.dz||0)}}_Str_809(t){return t<this._dx.length?this._dx[t]:0}_Str_739(t){return t<this._dy.length?this._dy[t]:0}_Str_839(t){return t<this._dz.length?this._dz[t]:0}get animation(){return this._animation}get id(){return this._id}get ink(){return this._ink}get member(){return this._member}get _Str_949(){return this._hasDirections}get _Str_767(){return this._hasStaticY}}let G=(()=>{class t{constructor(t,e){if(this._id=e.name,this._description=this._id,this._frames=[],this._spriteData=null,this._avatarData=null,this._directionData=null,this._removeData=null,this._addData=null,this._overriddenActions=null,this._overrideFrames=null,this._resetOnToggle=e.resetOnToggle||!1,e.sprites&&e.sprites.length){this._spriteData=[];for(const t of e.sprites)this._spriteData.push(new K(this,t))}if(e.avatars&&e.avatars.length&&(this._avatarData=new B(e.avatars[0])),e.directions&&e.directions.length&&(this._directionData=new W(e.directions[0])),e.removes&&e.removes.length){this._removeData=[];for(const t of e.removes)this._removeData.push(t.id)}if(e.adds&&e.adds.length){this._addData=[];for(const t of e.adds)this._addData.push(new V(t))}if(e.overrides&&e.overrides.length){this._overrideFrames=new Map,this._overriddenActions=new Map;for(const s of e.overrides){const e=s.name;this._overriddenActions.set(s.override,e);const i=[];this._Str_1031(i,s.frames,t),this._overrideFrames.set(e,i)}}this._Str_1031(this._frames,e.frames,t)}_Str_1031(t,e,s){if(e&&e.length)for(const i of e){let e=1;i.repeats&&i.repeats>1&&(e=i.repeats);let n=0;for(;n<e;){const e=[];if(i.bodyparts&&i.bodyparts.length)for(const t of i.bodyparts){const i=s._Str_1675(t.action),n=new I(t,I.BODYPART,i);e.push(n)}if(i.fxs&&i.fxs.length)for(const t of i.fxs){const i=s._Str_1675(t.action),n=new I(t,I.FX,i);e.push(n)}t.push(e),n++}}}_Str_2185(t=null){if(!t)return this._frames.length;if(this._overrideFrames){const e=this._overrideFrames.get(t);if(e)return e.length}return 0}_Str_1892(){return!!this._overriddenActions&&this._overriddenActions.size>0}_Str_1571(){if(!this._overriddenActions)return null;const t=[];for(const e of this._overriddenActions.keys())t.push(e);return t}_Str_707(t){return this._overriddenActions?this._overriddenActions.get(t):null}_Str_2259(t,e=null){t<0&&(t=0);let s=[];if(e){const i=this._overrideFrames.get(e);i&&i.length>0&&(s=i[t%i.length])}else this._frames.length>0&&(s=this._frames[t%this._frames.length]);return s}_Str_1065(t,e=null){const s=[];for(const i of this._Str_2259(t,e))if(i.type===I.BODYPART)s.push(i.id);else if(i.type===I.FX&&this._addData&&this._addData.length)for(const t of this._addData)t.id===i.id&&s.push(t.align);return s}_Str_607(t,e,s=null){for(const i of this._Str_2259(t,s)){if(i.id===e)return i;if(i.type===I.FX&&this._addData&&this._addData.length)for(const t of this._addData)if(t.align===e&&t.id===i.id)return i}return null}_Str_872(){return null!==this._avatarData}_Str_776(){return null!==this._directionData}_Str_706(){return null!==this._addData}_Str_1550(t){if(this._addData)for(const e of this._addData)if(e.id===t)return e;return null}get id(){return this._id}get _Str_786(){return this._spriteData||t._Str_2211}get _Str_1475(){return this._avatarData}get _Str_1493(){return this._directionData}get _Str_652(){return this._removeData||t._Str_2211}get _Str_687(){return this._addData||t._Str_2211}toString(){return this._description}get resetOnToggle(){return this._resetOnToggle}}return t._Str_2211=[],t})();class H{constructor(){this._animations=new Map}_Str_2061(t,e){const s=e[Object.keys(e)[0]],i=new G(t,s);return this._animations.set(s.name,i),!0}_Str_720(t){return this._animations.get(t)||null}_Str_607(t,e,s){const i=this._Str_720(t);return i?i._Str_607(e,s):null}get animations(){return this._animations}}class j{constructor(t){this._number=t.number,this._assetPartDefinition=t.assetPartDefinition||null}get number(){return this._number}get _Str_778(){return this._assetPartDefinition}}class z{constructor(t,e,s,i,n,r,a,o,c="",h=!1,l=1){this._bodyPartId=t,this._partType=e,this._partId=s,this._color=i,this._frames=n,this._action=r,this._isColorable=a,this._paletteMapId=o,this._flippedPartType=c,this._isBlendable=h,this._blendTransform=null,"ey"===this._partType&&(this._isColorable=!1)}_Str_1674(t){if(!this._frames||!this._frames.length)return 0;const e=t%this._frames.length;return this._frames[e]instanceof j?this._frames[e].number:e}_Str_2258(t){const e=t%this._frames.length;return this._frames&&this._frames.length>e&&this._frames[e]instanceof j?this._frames[e]:null}_Str_1206(t){const e=t%this._frames.length;if(this._frames&&this._frames.length>e&&this._frames[e]instanceof j){const t=this._frames[e];return this._Str_1502+":"+t._Str_778+":"+t.number}return this._Str_1502+":"+e}get _Str_1360(){return this._bodyPartId}get _Str_1669(){return this._partType}get _Str_1502(){return this._partId}get color(){return this._color}get action(){return this._action}get isColorable(){return this._isColorable}set isColorable(t){this._isColorable=t}get _Str_1406(){return this._paletteMapId}get _Str_1666(){return this._flippedPartType}get _Str_1184(){return this._isBlendable}toString(){return[this._bodyPartId,this._partType,this._partId].join(":")}}class Y{constructor(t,e){this._id=t.id,this._width=t.width,this._height=t.height,this._offset=new f.Point(t.dx,t.dy),this._regPoint=new f.Point(e==y.a.LARGE?(this._width-64)/2:(this._width-32)/2,0)}get width(){return this._width}get height(){return this._height}get offset(){return this._offset}get id(){return this._id}get _Str_1076(){return this._regPoint}}class q{constructor(t){if(this._id=t.id,this._isMain=t.main||!1,this._avatarSets=new Map,this._bodyParts=[],this._allBodyParts=[],t.avatarSets&&t.avatarSets.length>0)for(const s of t.avatarSets){if(!s)continue;const t=new q(s);this._avatarSets.set(t.id,t)}if(t.bodyParts&&t.bodyParts.length>0)for(const s of t.bodyParts)s&&this._bodyParts.push(s.id);let e=this._bodyParts.concat();for(const s of this._avatarSets.values())s&&(e=e.concat(s._Str_755()));this._allBodyParts=e}_Str_1498(t){if(t===this._id)return this;for(const e of this._avatarSets.values())if(e&&e._Str_1498(t))return e;return null}_Str_755(){return this._allBodyParts.concat()}get id(){return this._id}get _Str_779(){if(this._isMain)return!0;for(const t of this._avatarSets.values())if(t&&t._Str_779)return!0;return!1}}class Z{constructor(t=0,e=0,s=0){this._x=t,this._y=e,this._z=s}static _Str_2224(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}static _Str_1645(t,e){const s=new Z;return s.x=t.y*e.z-t.z*e.y,s.y=t.z*e.x-t.x*e.z,s.z=t.x*e.y-t.y*e.x,s}static subtract(t,e){return new Z(t.x-e.x,t.y-e.y,t.z-e.z)}_Str_2224(t){return this._x*t.x+this._y*t.y+this._z*t.z}_Str_1645(t){const e=new Z;return e.x=this._y*t.z-this._z*t.y,e.y=this._z*t.x-this._x*t.z,e.z=this._x*t.y-this._y*t.x,e}subtract(t){this._x=this._x-t.x,this._y=this._y-t.y,this._z=this._z-t.z}add(t){this._x=this._x+t.x,this._y=this._y+t.y,this._z=this._z+t.z}normalize(){const t=1/this.length();this._x=this._x*t,this._y=this._y*t,this._z=this._z*t}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z)}toString(){return"Vector3D: ("+this._x+","+this._y+","+this._z+")"}get x(){return this._x}set x(t){this._x=t}get y(){return this._y}set y(t){this._y=t}get z(){return this._z}set z(t){this._z=t}}class X{constructor(t,e,s){this._location=new Z(t,e,s),this._transformedLocation=new Z,this._needsTransformation=!1,0==t&&0==e&&0==s||(this._needsTransformation=!0)}get location(){return this._location}get _Str_1604(){return this._transformedLocation}_Str_1101(t){this._needsTransformation&&(this._transformedLocation=t._Str_2186(this._location))}}class Q extends X{constructor(t,e=!1){super(parseFloat(t.x),parseFloat(t.y),parseFloat(t.z)),this._id=t.id,this._radius=parseFloat(t.radius),this._normal=new Z(parseFloat(t.nx),parseFloat(t.ny),parseFloat(t.nz)),this._isDoubleSided=t.double||!1,this._isDynamic=e}_Str_1522(t){const e=Math.abs(t.z-this._Str_1604.z-this._radius),s=Math.abs(t.z-this._Str_1604.z+this._radius);return Math.min(e,s)}get id(){return this._id}get normal(){return this._normal}get _Str_2207(){return this._isDoubleSided}toString(){return this._id+": "+this.location+" - "+this._Str_1604}get _Str_1457(){return this._isDynamic}}class J extends X{constructor(t){if(super(parseFloat(t.x),parseFloat(t.y),parseFloat(t.z)),this._id=t.id,this._radius=parseFloat(t.radius),this._parts=new Map,this._dynamicParts=new Map,t.items&&t.items.length>0)for(const e of t.items){if(!e)continue;const t=new Q(e);this._parts.set(t.id,t)}}_Str_1883(t){const e=this._dynamicParts.get(t),s=[];if(e)for(const i in e){const t=e[i];t&&s.push(t)}return s}_Str_1456(t){const e=[];for(const s of this._parts.values())s&&e.push(s.id);if(t){const s=this._dynamicParts.get(t);if(s)for(const t in s){const i=s[t];i&&e.push(i.id)}}return e}_Str_2004(t){return this._dynamicParts.delete(t),!0}_Str_2020(t,e){if(this._Str_2030(t.id,e))return!1;let s=this._dynamicParts.get(e);return s||(s={},this._dynamicParts.set(e,s)),s[t.id]=new Q(t,!0),!0}_Str_2030(t,e){let s=this._parts.get(t)||null;return s||void 0===this._dynamicParts.get(e)||(s=this._dynamicParts.get(e)[t]||null),null!==s}_Str_713(t,e,s,i){const n=[];for(const o of this._parts.values())o&&(o._Str_1101(t),n.push([o._Str_1522(e),o]));const r=this._dynamicParts.get(i);if(r)for(const o in r){const s=r[o];s&&(s._Str_1101(t),n.push([s._Str_1522(e),s]))}n.sort((t,e)=>{const s=t[0],i=e[0];return s<i?-1:s>i?1:0});const a=[];for(const o of n)o&&a.push(o[1].id);return a}_Str_1522(t){const e=Math.abs(t.z-this._Str_1604.z-this._radius),s=Math.abs(t.z-this._Str_1604.z+this._radius);return Math.min(e,s)}get id(){return this._id}get radius(){return this._radius}}let $=(()=>{class t{constructor(t=0,e=0,s=0,i=0,n=0,r=0,a=0,o=0,c=0){this._data=[t,e,s,i,n,r,a,o,c]}static _Str_1869(e){const s=e*Math.PI/180,i=Math.cos(s),n=Math.sin(s);return new t(1,0,0,0,i,-n,0,n,i)}static _Str_1560(e){const s=e*Math.PI/180,i=Math.cos(s),n=Math.sin(s);return new t(i,0,n,0,1,0,-n,0,i)}static _Str_1368(e){const s=e*Math.PI/180,i=Math.cos(s),n=Math.sin(s);return new t(i,-n,0,n,i,0,0,0,1)}identity(){return this._data=[1,0,0,0,1,0,0,0,1],this}_Str_2186(t){return new Z(t.x*this._data[0]+t.y*this._data[3]+t.z*this._data[6],t.x*this._data[1]+t.y*this._data[4]+t.z*this._data[7],t.x*this._data[2]+t.y*this._data[5]+t.z*this._data[8])}_Str_1186(e){return new t(this._data[0]*e.data[0]+this._data[1]*e.data[3]+this._data[2]*e.data[6],this._data[0]*e.data[1]+this._data[1]*e.data[4]+this._data[2]*e.data[7],this._data[0]*e.data[2]+this._data[1]*e.data[5]+this._data[2]*e.data[8],this._data[3]*e.data[0]+this._data[4]*e.data[3]+this._data[5]*e.data[6],this._data[3]*e.data[1]+this._data[4]*e.data[4]+this._data[5]*e.data[7],this._data[3]*e.data[2]+this._data[4]*e.data[5]+this._data[5]*e.data[8],this._data[6]*e.data[0]+this._data[7]*e.data[3]+this._data[8]*e.data[6],this._data[6]*e.data[1]+this._data[7]*e.data[4]+this._data[8]*e.data[7],this._data[6]*e.data[2]+this._data[7]*e.data[5]+this._data[8]*e.data[8])}_Str_1157(t){let e=0;for(;e<this._data.length;)this._data[e]=this._data[e]*t,e++}_Str_1089(e){const s=e*Math.PI/180,i=Math.cos(s),n=Math.sin(s);return new t(1,0,0,0,i,-n,0,n,i)._Str_1186(this)}_Str_2123(e){const s=e*Math.PI/180,i=Math.cos(s),n=Math.sin(s);return new t(i,0,n,0,1,0,-n,0,i)._Str_1186(this)}_Str_2232(e){const s=e*Math.PI/180,i=Math.cos(s),n=Math.sin(s);return new t(i,-n,0,n,i,0,0,0,1)._Str_1186(this)}skew(){}_Str_1779(){return new t(this._data[0],this._data[3],this._data[6],this._data[1],this._data[4],this._data[7],this._data[2],this._data[5],this._data[8])}_Str_1451(t){return!1}get data(){return this._data}}return t.IDENTITY=new t(1,0,0,0,1,0,0,0,1),t.TOLERANS=1e-18,t})();class tt{constructor(t){this._camera=new Z(0,0,10),this._avatarSet=new q(t.avatarSets[0]),this._geometryTypes=new Map,this._itemIdToBodyPartMap=new Map,this._transformation=new $,this._canvases=new Map;const e=t.camera;if(e&&(this._camera.x=parseFloat(e.x),this._camera.y=parseFloat(e.y),this._camera.z=parseFloat(e.z)),t.canvases&&t.canvases.length>0)for(const s of t.canvases){if(!s)continue;const t=s.scale,e=new Map;if(s.geometries&&s.geometries.length>0)for(const i of s.geometries){if(!i)continue;const s=new Y(i,t);e.set(s.id,s)}this._canvases.set(t,e)}if(t.types&&t.types.length>0)for(const s of t.types){if(!s)continue;const t=new Map,e=new Map;if(s.bodyParts&&s.bodyParts.length>0)for(const i of s.bodyParts){if(!i)continue;const s=new J(i);t.set(s.id,s);for(const t of s._Str_1456(null))e.set(t,s)}this._geometryTypes.set(s.id,t),this._itemIdToBodyPartMap.set(s.id,e)}}_Str_2101(t){for(const e of this._geometryTypes.values())if(e)for(const s of e.values())s&&s._Str_2004(t)}_Str_1307(t){const e=this._avatarSet._Str_1498(t);return e?e._Str_755():[]}_Str_1939(t){const e=this._avatarSet._Str_1498(t);return!!e&&e._Str_779}_Str_1664(t,e){const s=this._canvases.get(t);return s&&s.get(e)||null}_Str_1342(t){return!!this._geometryTypes.get(t)}_Str_1332(t,e){if(this._Str_1342(t)){const s=this._geometryTypes.get(t);if(s&&s.get(e))return!0}return!1}_Str_2072(t){const e=this._Str_1280(t),s=[];if(e)for(const i of e.values())i&&s.push(i.id);return s}_Str_1280(t){return this._Str_1342(t)?this._geometryTypes.get(t):new Map}_Str_1919(t,e){return this._Str_1280(t).get(e)||null}_Str_1701(t,e,s){const i=this._itemIdToBodyPartMap.get(t);if(i){const n=i.get(e);if(n)return n;const r=this._Str_1280(t);if(r)for(const t of r.values())if(t&&t._Str_2030(e,s))return t}return null}_Str_1787(t,e){const s=this._Str_1307(e),i=[];for(const n of s){if(!n)continue;const e=t.get(n);e&&i.push(e)}return i}_Str_2250(t,e,s){if(!s)return[];const i=this._Str_1280(s),n=this._Str_1787(i,t),r=[],a=[];this._transformation=$._Str_1560(e);for(const o of n.values())o&&(o._Str_1101(this._transformation),r.push([o._Str_1522(this._camera),o]));r.sort((t,e)=>{const s=t[0],i=e[0];return s<i?-1:s>i?1:0});for(const o of r)o&&a.push(o[1].id);return a}_Str_713(t,e,s,i,n){if(this._Str_1332(t,e)){const r=this._Str_1280(t).get(e);return this._transformation=$._Str_1560(s),r._Str_713(this._transformation,this._camera,i,n)}return[]}}class et{constructor(t){if(this._frames=[],t.frames&&t.frames.length>0)for(const e of t.frames){if(!e)continue;this._frames.push(new j(e));let t=e.repeats||0;if(t>1)for(;--t>0;)this._frames.push(this._frames[this._frames.length-1])}}get frames(){return this._frames}}let st=(()=>{class t{constructor(t){if(this._id=t.id,this._actionParts=new Map,this._bodyPartOffsets=new Map,this._frameCount=0,this._frameIndexes=[],t.parts&&t.parts.length>0)for(const e of t.parts){if(!e)continue;const t=new et(e);this._actionParts.set(e.setType,t),this._frameCount=Math.max(this._frameCount,t.frames.length)}if(t.offsets&&t.offsets.frames&&t.offsets.frames.length>0)for(const e of t.offsets.frames){if(!e)continue;const t=e.id;this._frameCount=Math.max(this._frameCount,t);const s=new Map;if(this._bodyPartOffsets.set(t,s),e.directions&&e.directions.length>0)for(const i of e.directions){if(!i)continue;const t=i.id,e=new Map;if(s.set(t,e),i.bodyParts&&i.bodyParts.length>0)for(const s of i.bodyParts){if(!s)continue;let t=0,i=0;void 0!==s.dx&&(t=s.dx),void 0!==s.dy&&(i=s.dy),e.set(s.id,new f.Point(t,i))}}if(this._frameIndexes.push(t),void 0!==e.repeats){let s=e.repeats||0;if(s>1)for(;--s>0;)this._frameIndexes.push(t)}}}_Str_989(t){return t&&this._actionParts.get(t)||null}_Str_1888(e,s,i){const n=this._bodyPartOffsets.get(this._frameIndexes[s%this._frameIndexes.length]);if(!n)return t._Str_1934;const r=n.get(e);return r&&r.get(i)||t._Str_1934}get id(){return this._id}get _Str_806(){return this._actionParts}get _Str_2185(){return this._frameCount}}return t._Str_1934=new f.Point(0,0),t})();class it{constructor(){this._actions=new Map}parse(t){if(t&&t.length>0)for(const e of t){if(!e)continue;const t=new st(e);this._actions.set(t.id,t)}return!0}_Str_1017(t){for(const e of t.action)this._actions.set(e.id,new st(e));return!0}_Str_2244(t){return this._actions.get(t.id)||null}_Str_1408(t){const e=this._Str_2244(t);return e?e._Str_2185:0}}class nt{constructor(t){if(!t)throw new Error("invalid_data");this._id=parseInt(t.$.id),this._index=parseInt(t.$.index),this._clubLevel=parseInt(t.$.club),this._isSelectable=1===parseInt(t.$.selectable),this._rgb=parseInt("0x"+t._,16)}get id(){return this._id}get index(){return this._index}get clubLevel(){return this._clubLevel}get isSelectable(){return this._isSelectable}get _Str_915(){return this._rgb}}class rt{constructor(t){if(!t)throw new Error("invalid_data");this._id=parseInt(t.$.id),this._colors=new Map,this._Str_2015(t)}_Str_2015(t){for(const e of t.color){const t=new nt(e);this._colors.set(e.$.id.toString(),t)}}_Str_751(t){return void 0===t||t<0?null:this._colors.get(t.toString())||null}get id(){return this._id}get colors(){return this._colors}}class at{constructor(t){if(!t)throw new Error("invalid_data");this._id=parseInt(t.$.id),this._type=t.$.type,this._index=parseInt(t.$.index),this._colorLayerIndex=parseInt(t.$.colorindex);const e=t.$.palettemapid;this._paletteMapId=isNaN(e)?-1:parseInt(e);const s=t.$.palettemapid;this._breed=isNaN(s)?-1:parseInt(s)}dispose(){}get id(){return this._id}get type(){return this._type}get breed(){return this._breed}get index(){return this._index}get _Str_827(){return this._colorLayerIndex}get paletteMap(){return this._paletteMapId}}class ot{constructor(t,e){if(!t||!e)throw new Error("invalid_data");this._id=parseInt(e.$.id),this._type=t,this._gender=e.$.gender,this._clubLevel=parseInt(e.$.club),this._isColorable=1===parseInt(e.$.colorable),this._isSelectable=1===parseInt(e.$.selectable),this._parts=[],this._hiddenLayers=[],this._isPreSelectable=1===parseInt(e.$.preselectable),this._isSellable=1===parseInt(e.$.sellable);for(const s of e.part){const t=new at(s),e=this.getPartIndex(t);-1!==e?this._parts.splice(e,0,t):this._parts.push(t)}if(e.hiddenlayers){const t=e.hiddenlayers[0];for(const e of t.layer)this._hiddenLayers.push(e.$.parttype)}}dispose(){for(const t of this._parts)t.dispose();this._parts=null,this._hiddenLayers=null}getPartIndex(t){const e=this._parts.length;if(!e)return-1;for(let s=0;s<e;s++){const e=this._parts[s];if(e&&!(e.type!==t.type||e.index>t.index))return s}return-1}_Str_989(t,e){for(const s of this._parts)if(s.type===t&&s.id===e)return s;return null}get id(){return this._id}get type(){return this._type}get gender(){return this._gender}get clubLevel(){return this._clubLevel}get isColorable(){return this._isColorable}get _Str_608(){return this._isSelectable}get _Str_806(){return this._parts}get _Str_790(){return this._hiddenLayers}get _Str_653(){return this._isPreSelectable}get _Str_651(){return this._isSellable}}class ct{constructor(t){if(!t)throw new Error("invalid_data");this._type=t.$.type,this._paletteId=parseInt(t.$.paletteid),this._isMandatory={},this._isMandatory.F=[1===parseInt(t.$.mand_f_0),1===parseInt(t.$.mand_f_1)],this._isMandatory.M=[1===parseInt(t.$.mand_m_0),1===parseInt(t.$.mand_m_1)],this._partSets=new E.a,this._Str_2015(t)}dispose(){for(const t of this._partSets.getValues())t.dispose();this._partSets=null}_Str_1874(t){for(const e of t){const t=e.id,s=this._partSets.getValue(t);s&&(s.dispose(),this._partSets.remove(t))}}_Str_2015(t){if(t&&t.set)for(const e of t.set)this._partSets.add(e.$.id,new ot(this._type,e))}_Str_2264(t){for(const e of this._partSets.getValues())if(e&&0===e.clubLevel&&(e.gender===t||"U"===e.gender))return e;return null}_Str_1020(t){return this._partSets.getValue(t.toString())}get type(){return this._type}get _Str_734(){return this._paletteId}_Str_895(t,e){return this._isMandatory[t.toUpperCase()][Math.min(e,1)]}_Str_1002(t){return this._isMandatory[t.toUpperCase()].indexOf(!1)}get _Str_710(){return this._partSets}}class ht{constructor(){this._palettes=new Map,this._setTypes=new Map}dispose(){}parse(t){if(!t)return!1;for(const e of t.colors[0].palette){const t=new rt(e);t&&this._palettes.set(t.id.toString(),t)}for(const e of t.sets[0].settype){const t=new ct(e);t&&this._setTypes.set(t.type,t)}return!0}_Str_1133(t){for(const e of t.sets[0].settype){const t=this._setTypes.get(e.$.type);t?t._Str_1874(e):this._setTypes.set(e.$.type,new ct(e))}this._Str_1017(t)}_Str_1017(t){if(!t)return!1;for(const e of t.colors[0].palette){const t=e.$.id.toString(),s=this._palettes.get(t);s?s._Str_2015(e):this._palettes.set(t,new rt(e))}for(const e of t.sets[0].settype){const t=e.$.type,s=this._setTypes.get(t);s?s._Str_2015(e):this._setTypes.set(t,new ct(e))}return!1}_Str_1733(t,e){const s=[];for(const i of this._setTypes.values())i&&i._Str_895(t,e)&&s.push(i.type);return s}_Str_2264(t,e){const s=this._setTypes.get(t);return s?s._Str_2264(e):null}_Str_740(t){return this._setTypes.get(t)||null}_Str_783(t){return this._palettes.get(t.toString())||null}_Str_938(t){for(const e of this._setTypes.values()){const s=e._Str_1020(t);if(s)return s}return null}}class lt{constructor(t){if(this._id=t.id,this._parts=[],t.activeParts&&t.activeParts.length>0)for(const e of t.activeParts)e&&this._parts.push(e.setType)}get _Str_806(){return this._parts}}class ut{constructor(t){if(!t)throw new Error("invalid_data");this._setType=t.setType,this._flippedSetType=t.flippedSetType||null,this._removeSetType=t.removeSetType||null,this._appendToFigure=!1,this._staticId=-1}_Str_2234(){return this._staticId>=0}get _Str_1734(){return this._staticId}set _Str_1734(t){this._staticId=t}get _Str_2174(){return this._setType}get _Str_1693(){return this._flippedSetType}set _Str_1693(t){this._flippedSetType=t}get _Str_1209(){return this._removeSetType}get _Str_1583(){return this._appendToFigure}set _Str_1583(t){this._appendToFigure=t}}class _t{constructor(){this._parts=new Map,this._activePartSets=new Map}parse(t){if(t.partSet&&t.partSet.length>0)for(const e of t.partSet)e&&this._parts.set(e.setType,new ut(e));if(t.activePartSets&&t.activePartSets.length>0)for(const e of t.activePartSets)e&&this._activePartSets.set(e.id,new lt(e));return!0}_Str_1017(t){if(t.partSet&&t.partSet.length>0)for(const e of t.partSet)e&&this._parts.set(e.setType,new ut(e));if(t.activePartSets&&t.activePartSets.length>0)for(const e of t.activePartSets)e&&this._activePartSets.set(e.id,new lt(e));return!1}_Str_1795(t){const e=this._activePartSets.get(t.activePartSet);return e?e._Str_806:[]}_Str_1102(t){return this._parts.get(t)||null}_Str_1520(t){const e=t.setType;let s=this._parts.get(e);return s||(s=new ut(t),this._parts.set(e,s)),s}_Str_1113(t){return this._activePartSets.get(t.activePartSet)||null}get _Str_806(){return this._parts}get _Str_1979(){return this._activePartSets}}class dt extends u.a{constructor(t){super(),this._renderManager=t,this._geometry=null,this._figureData=new ht,this._partSetsData=new _t,this._animationData=new it,this._animationManager=new H,this._mandatorySetTypeIds={},this._actionManager=null,this._defaultAction=null}init(){}dispose(){this.disposed||(super.dispose(),this._renderManager=null,this._figureData=null,this._partSetsData=null,this._animationData=null,this._mandatorySetTypeIds=null)}_Str_1825(t){t&&(this._geometry=new tt(t))}_Str_1060(t,e){e&&(this._actionManager=new k(t,e),this._defaultAction=this._actionManager._Str_1027())}_Str_1620(t){this._actionManager._Str_1620(t),this._defaultAction=this._actionManager._Str_1027()}_Str_1296(t){return!!t&&!!this._partSetsData.parse(t)&&(this._partSetsData._Str_1102("ri")._Str_1583=!0,this._partSetsData._Str_1102("li")._Str_1583=!0,!0)}_Str_2229(t){return!!t&&this._animationData.parse(t)}_Str_1569(t){return!!t&&this._figureData.parse(t)}_Str_882(t){this._figureData._Str_1133(t)}_Str_1849(t,e="fx",s=200){let i=0;for(;i<s;){const s=t.getCollection(e+i);s&&this._animationManager._Str_2061(this,s.data.animations),i++}}_Str_2061(t){this._animationManager._Str_2061(this,t)}_Str_867(t,e,s=0){const i=t._Str_815(e);if(!i||i.length<s)return null;const n=this._figureData._Str_740(e);if(null==n)return null;const r=this._figureData._Str_783(n._Str_734);return r?r._Str_751(i[s]):null}_Str_1881(t,e,s){return this._animationManager._Str_607(t,e,s)}_Str_720(t){return this._animationManager._Str_720(t)}_Str_1675(t){return this._actionManager._Str_1675(t)}_Str_2018(t){return this._actionManager._Str_2018(t)}_Str_1939(t){return this._geometry._Str_1939(t)}_Str_711(t){return this._actionManager._Str_711(t)}_Str_1936(t){let e=0;for(const s of t)e=Math.max(e,this._animationData._Str_1408(s._Str_742));return e}_Str_1733(t,e){return this._mandatorySetTypeIds[t]||(this._mandatorySetTypeIds[t]=[]),this._mandatorySetTypeIds[t][e]||(this._mandatorySetTypeIds[t][e]=this._figureData._Str_1733(t,e)),this._mandatorySetTypeIds[t][e]}_Str_2264(t,e){return this._figureData._Str_2264(t,e)}_Str_781(t,e,s){return this._actionManager._Str_781(t,e,s)}_Str_1664(t,e){return this._geometry._Str_1664(t,e)}_Str_2101(t){this._geometry._Str_2101(t)}_Str_2021(t,e){let s=[];const i=[],n=t._Str_742._Str_868;if(t._Str_742._Str_861){const r=this._animationManager._Str_720(t._Str_742.state+"."+t._Str_727);if(r&&(s=r._Str_1065(0,t._Str_707),r._Str_706())){const t={id:"",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:1},s={setType:""};for(const a of r._Str_687){const r=this._geometry._Str_1919(n,a.align);if(r){t.id=a.id,r._Str_2020(t,e),s.setType=a.id;const n=this._partSetsData._Str_1520(s);n._Str_1583=!0,""===a.base&&(n._Str_1734=1),-1===i.indexOf(r.id)&&i.push(r.id)}}}for(const t of s){const e=this._geometry._Str_1919(n,t);e&&-1===i.indexOf(e.id)&&i.push(e.id)}}else{s=this._partSetsData._Str_1795(t._Str_742);for(const t of s){const s=this._geometry._Str_1701(n,t,e);s&&-1===i.indexOf(s.id)&&i.push(s.id)}}return i}_Str_1695(t){return this._geometry._Str_1307(t)}_Str_755(t,e,s){return this._geometry._Str_2250(t,T.a.DIRECTION_TO_ANGLE[s],e)}_Str_1888(t,e,s,i){const n=this._animationData._Str_2244(t._Str_742);return n?n._Str_1888(e,s,i):st._Str_1934}_Str_713(t,e,s,i,n,r,a,o=null){let c=null,h=[],l=null;if(null==!s)return[];const u=this._partSetsData._Str_1795(s._Str_742),_=[];let d=[0];const g=this._animationData._Str_2244(s._Str_742);if(s._Str_742._Str_861){const e=this._animationManager._Str_720(s._Str_742.state+"."+s._Str_727);if(e){d=this._Str_1768(e._Str_2185(s._Str_707));for(const n of e._Str_1065(0,s._Str_707))if(n===t){const t=this._geometry._Str_1919(i,n);if(t)for(const e of t._Str_1883(a))u.push(e.id)}}}const m=this._geometry._Str_713(i,t,n,u,a),p=e._Str_1016();for(const E of p){if(o&&o.get(E))continue;const i=e.getPartSetId(E),n=e._Str_815(E),a=this._figureData._Str_740(E);if(a){const e=this._figureData._Str_783(a._Str_734);if(e){const o=a._Str_1020(i);if(o){r=r.concat(o._Str_790);for(const i of o._Str_806)if(m.indexOf(i.type)>-1){if(g){const t=g._Str_989(i.type);h=t?t.frames:d}else h=d;c=s._Str_742,-1===u.indexOf(i.type)&&(c=this._defaultAction);const r=this._partSetsData._Str_1102(i.type);let a=r?r._Str_1693:i.type;a&&""!==a||(a=i.type),n&&n.length>i._Str_827-1&&(l=e._Str_751(n[i._Str_827-1]));const o=i._Str_827>0,m=new z(t,i.type,i.id.toString(),l,h,c,o,i.paletteMap,a);_.push(m)}}}}}const f=[];for(const E of m){let e=null,n=!1;const c=o&&o.get(E);for(const t of _)t._Str_1669===E&&(c?e=t.color:(n=!0,-1===r.indexOf(E)&&f.push(t)));if(!n)if(c){const i=o.get(E);let n=0,r=0;for(;r<i.length;)n+=i.charCodeAt(r),r++;if(g){const t=g._Str_989(E);h=t?t.frames:d}else h=d;const a=new z(t,E,i,e,h,s._Str_742,!(null==e),-1,E,!1,1);f.push(a)}else if(u.indexOf(E)>-1)if(t!==this._geometry._Str_1701(i,E,a).id);else{const e=this._partSetsData._Str_1102(E);let i=!1,n=1;if(e._Str_1583){let r="1";if(""!==s._Str_727&&(r=s._Str_727),e._Str_2234()&&(r=e._Str_1734.toString()),g){const t=g._Str_989(E);h=t?t.frames:d}else h=d;const a=new z(t,E,r,null,h,s._Str_742,!1,-1,E,i,n);f.push(a)}}}return f}_Str_1768(t){const e=[];let s=0;for(;s<t;)e.push(s),s++;return e}_Str_672(){if(this._actionManager){const t=this._actionManager._Str_1675("CarryItem").params,e=[];for(const s of t.values())e.push(s);return e}return[]}get renderManager(){return this._renderManager}get figureData(){return this._figureData}get partData(){return this._partSetsData}get animationManager(){return this._animationManager}}var gt=s("yp5t"),mt=s("JY8D"),pt=s("LPTP");let ft=(()=>{class t extends r.a{constructor(t,e){super(t),this._library=e}get library(){return this._library}}return t.DOWNLOAD_COMPLETE="ARELE_DOWNLOAD_COMPLETE",t})(),Et=(()=>{class t extends u.a{constructor(e,s,i,n){super(),this._state=t.NOT_LOADED,this._libraryName=e,this._revision=s,this._downloadUrl=n,this._assets=i,this._animation=null,this._downloadUrl=this._downloadUrl.replace(/%libname%/gi,this._libraryName),this._downloadUrl=this._downloadUrl.replace(/%revision%/gi,this._revision),this._assets.getCollection(this._libraryName)&&(this._state=t.LOADED)}downloadAsset(){if(this._assets&&this._state!==t.LOADING&&this._state!==t.LOADED)return this._assets.getCollection(this._libraryName)?(this._state=t.LOADED,void this.dispatchEvent(new ft(ft.DOWNLOAD_COMPLETE,this))):(this._state=t.LOADING,void this._assets.downloadAsset(this._downloadUrl,e=>{if(e){this._state=t.LOADED;const e=this._assets.getCollection(this._libraryName);e&&(this._animation=e.data.animations),this.dispatchEvent(new ft(ft.DOWNLOAD_COMPLETE,this))}}))}get libraryName(){return this._libraryName}get animation(){return this._animation}get isLoaded(){return this._state===t.LOADED}}return t.DOWNLOAD_COMPLETE="EADL_DOWNLOAD_COMPLETE",t.NOT_LOADED=0,t.LOADING=1,t.LOADED=2,t})(),St=(()=>{class t extends u.a{constructor(t,e){super(),this._assets=t,this._structure=e,this._missingMandatoryLibs=a.a.instance.getConfiguration("avatar.mandatory.effect.libraries"),this._effectMap=new Map,this._effectListeners=new Map,this._incompleteEffects=new Map,this._initDownloadBuffer=[],this._pendingDownloadQueue=[],this._currentDownloads=[],this._libraryNames=[],this._isReady=!1,this.onLibraryLoaded=this.onLibraryLoaded.bind(this),this.onAvatarRenderReady=this.onAvatarRenderReady.bind(this),this.loadEffectMap(),this._structure.renderManager.events.addEventListener(g.AVATAR_RENDER_READY,this.onAvatarRenderReady)}loadEffectMap(){const e=new XMLHttpRequest;try{e.open("GET",a.a.instance.getConfiguration("avatar.effectmap.url")),e.send(),e.onloadend=s=>{if(e.responseText){const s=JSON.parse(e.responseText);this.processEffectMap(s.effects),this.processMissingLibraries(),this._isReady=!0,this.dispatchEvent(new r.a(t.DOWNLOADER_READY))}},e.onerror=t=>{throw new Error("invalid_avatar_effect_map")}}catch(s){l.a.log(s)}}processEffectMap(t){if(t)for(const e of t){if(!e)continue;const t=e.id,s=e.lib,i=e.revision||"";if(this._libraryNames.indexOf(s)>=0)continue;this._libraryNames.push(s);const n=new Et(s,i,this._assets,a.a.instance.getConfiguration("avatar.asset.effect.url"));n.addEventListener(ft.DOWNLOAD_COMPLETE,this.onLibraryLoaded);let r=this._effectMap.get(t);r||(r=[]),r.push(n),this._effectMap.set(t,r)}}downloadAvatarEffect(t,e){if(!this._isReady||!this._structure.renderManager.isReady)return void this._initDownloadBuffer.push([t,e]);const s=this.getAvatarEffectPendingLibraries(t);if(s&&s.length){if(e&&!e.disposed){let s=this._effectListeners.get(t.toString());s||(s=[]),s.push(e),this._effectListeners.set(t.toString(),s)}this._incompleteEffects.set(t.toString(),s);for(const t of s)t&&this.downloadLibrary(t)}else e&&!e.disposed&&e.resetEffect(t)}onAvatarRenderReady(t){if(t){for(const[t,e]of this._initDownloadBuffer)this.downloadAvatarEffect(t,e);this._initDownloadBuffer=[]}}onLibraryLoaded(e){if(!e||!e.library)return;const s=[];this._structure._Str_2061(e.library.animation);for(const[n,a]of this._incompleteEffects.entries()){let e=!0;for(const t of a)if(t&&!t.isLoaded){e=!1;break}if(e){s.push(n);const e=this._effectListeners.get(n);for(const t of e)t&&!t.disposed&&t.resetEffect(parseInt(n));this._effectListeners.delete(n),this.dispatchEvent(new r.a(t.LIBRARY_LOADED))}}for(const t of s)this._incompleteEffects.delete(t);let i=0;for(;i<this._currentDownloads.length;){const t=this._currentDownloads[i];t&&t.libraryName===e.library.libraryName&&this._currentDownloads.splice(i,1),i++}}processMissingLibraries(){const t=this._missingMandatoryLibs.slice();for(const e of t){if(!e)continue;const t=this._effectMap.get(e);if(t)for(const e of t)e&&this.downloadLibrary(e)}}isAvatarEffectReady(t){return!(!this._isReady||!this._structure.renderManager.isReady||this.getAvatarEffectPendingLibraries(t).length)}getAvatarEffectPendingLibraries(t){const e=[];if(!this._structure)return e;const s=this._effectMap.get(t.toString());if(s)for(const i of s)i&&!i.isLoaded&&-1===e.indexOf(i)&&e.push(i);return e}downloadLibrary(t){t&&!t.isLoaded&&(this._pendingDownloadQueue.indexOf(t)>=0||this._currentDownloads.indexOf(t)>=0||(this._pendingDownloadQueue.push(t),this.processDownloadQueue()))}processDownloadQueue(){for(;this._pendingDownloadQueue.length;)this._pendingDownloadQueue[0].downloadAsset(),this._currentDownloads.push(this._pendingDownloadQueue.shift())}}return t.DOWNLOADER_READY="EADM_DOWNLOADER_READY",t.LIBRARY_LOADED="EADM_LIBRARY_LOADED",t.MAX_DOWNLOADS=2,t})();class vt extends L{constructor(t,e,s,i,n){super(t,e,s,i,n,null)}isPlaceholder(){return!0}}let bt=(()=>{class t extends u.a{constructor(t,e){super(),this._dataReceiver=e,this.download(t)}download(e){const s=new XMLHttpRequest;try{s.open("GET",e),s.send(),s.onloadend=e=>{(new i.Parser).parseString(s.responseText,(e,s)=>{if(e||!s||!s.figuredata)throw new Error("invalid_figure_data");this._dataReceiver&&this._dataReceiver._Str_1017(s.figuredata),this.dispatchEvent(new r.a(t.AVATAR_STRUCTURE_DONE))})},s.onerror=t=>{throw new Error("invalid_avatar_figure_data")}}catch(n){l.a.log(n)}}}return t.AVATAR_STRUCTURE_DONE="AVATAR_STRUCTURE_DONE",t})(),It=(()=>{class t extends n.a{constructor(){super(),this._structure=null,this._avatarAssetDownloadManager=null,this._placeHolderFigure=null,this._figureMapReady=!1,this._effectMapReady=!1,this._actionsReady=!1,this._geometryReady=!1,this._partSetsReady=!1,this._animationsReady=!1,this._isReady=!1,this.onAvatarAssetDownloaderReady=this.onAvatarAssetDownloaderReady.bind(this),this.onAvatarAssetDownloaded=this.onAvatarAssetDownloaded.bind(this),this.onEffectAssetDownloaderReady=this.onEffectAssetDownloaderReady.bind(this),this.onEffectAssetDownloaded=this.onEffectAssetDownloaded.bind(this),this.onAvatarStructureDownloadDone=this.onAvatarStructureDownloadDone.bind(this)}onInit(){this._structure=new dt(this),this.loadGeometry(),this.loadPartSets(),this.loadActions(),this.loadAnimations(),this.loadFigureData(),this._aliasCollection=new h(this,a.a.instance.core.asset),this._aliasCollection.init(),this._avatarAssetDownloadManager||(this._avatarAssetDownloadManager=new m(a.a.instance.core.asset,this._structure),this._avatarAssetDownloadManager.addEventListener(m.DOWNLOADER_READY,this.onAvatarAssetDownloaderReady),this._avatarAssetDownloadManager.addEventListener(m.LIBRARY_LOADED,this.onAvatarAssetDownloaded)),this._effectAssetDownloadManager||(this._effectAssetDownloadManager=new St(a.a.instance.core.asset,this._structure),this._effectAssetDownloadManager.addEventListener(St.DOWNLOADER_READY,this.onEffectAssetDownloaderReady),this._effectAssetDownloadManager.addEventListener(St.LIBRARY_LOADED,this.onEffectAssetDownloaded)),this.checkReady()}onDispose(){this._avatarAssetDownloadManager&&(this._avatarAssetDownloadManager.removeEventListener(m.DOWNLOADER_READY,this.onAvatarAssetDownloaderReady),this._avatarAssetDownloadManager.removeEventListener(m.LIBRARY_LOADED,this.onAvatarAssetDownloaded)),this._effectAssetDownloadManager&&(this._effectAssetDownloadManager.removeEventListener(St.DOWNLOADER_READY,this.onEffectAssetDownloaderReady),this._effectAssetDownloadManager.removeEventListener(St.LIBRARY_LOADED,this.onEffectAssetDownloaded))}loadGeometry(){this._structure&&(this._structure._Str_1825(mt.a),this._geometryReady=!0,this.checkReady())}loadPartSets(){this._structure&&(this._structure._Str_1296(pt.a),this._partSetsReady=!0,this.checkReady())}loadActions(){const t=a.a.instance.getConfiguration("avatar.default.actions");t&&this._structure._Str_1060(a.a.instance.core.asset,t);const e=new XMLHttpRequest;try{e.open("GET",a.a.instance.getConfiguration("avatar.actions.url")),e.send(),e.onloadend=t=>{this._structure&&(this._structure._Str_1620(JSON.parse(e.responseText)),this._actionsReady=!0,this.checkReady())},e.onerror=t=>{throw new Error("invalid_avatar_actions")}}catch(s){this.logger.error(s)}}loadAnimations(){this._structure&&(this._structure._Str_2229(gt.a),this._animationsReady=!0,this.checkReady())}loadFigureData(){const t=a.a.instance.getConfiguration("avatar.default.figuredata");t&&(new i.Parser).parseString(t,(t,e)=>{if(t||!e||!e.figuredata)throw new Error("invalid_default_figure_data");this._structure&&this._structure._Str_1569(e.figuredata)}),new bt(a.a.instance.getConfiguration("avatar.figuredata.url"),this._structure.figureData).addEventListener(bt.AVATAR_STRUCTURE_DONE,this.onAvatarStructureDownloadDone)}onAvatarStructureDownloadDone(t){this._structureReady=!0,this._structure.init(),this.checkReady()}onAvatarAssetDownloaderReady(t){t&&(this._figureMapReady=!0,this.checkReady())}onAvatarAssetDownloaded(t){t&&this._aliasCollection.reset()}onEffectAssetDownloaderReady(t){t&&(this._effectMapReady=!0,this.checkReady())}onEffectAssetDownloaded(t){t&&this._aliasCollection.reset()}checkReady(){this._isReady||this._geometryReady&&this._partSetsReady&&this._actionsReady&&this._animationsReady&&this._figureMapReady&&this._effectMapReady&&this._structureReady&&(this._isReady=!0,this.events&&this.events.dispatchEvent(new r.a(g.AVATAR_RENDER_READY)))}createFigureContainer(t){return new p.a(t)}isFigureContainerReady(t){return!!this._avatarAssetDownloadManager&&this._avatarAssetDownloadManager.isAvatarFigureContainerReady(t)}createAvatarImage(e,s,i,n=null,r=null){if(!this._structure||!this._avatarAssetDownloadManager)return null;const a=new p.a(e);return i&&this.validateAvatarFigure(a,i),this._avatarAssetDownloadManager.isAvatarFigureContainerReady(a)?new L(this._structure,this._aliasCollection,a,s,this._effectAssetDownloadManager,r):(this._placeHolderFigure||(this._placeHolderFigure=new p.a(t.DEFAULT_FIGURE)),this._avatarAssetDownloadManager.downloadAvatarFigure(a,n),new vt(this._structure,this._aliasCollection,this._placeHolderFigure,s,this._effectAssetDownloadManager))}downloadAvatarFigure(t,e){this._avatarAssetDownloadManager&&this._avatarAssetDownloadManager.downloadAvatarFigure(t,e)}validateAvatarFigure(t,e){let s=!1;const i=this._structure._Str_1733(e,2);if(i){const n=this._structure.figureData;for(const r of i)if(t._Str_744(r)){const i=n._Str_740(r);if(i&&!i._Str_1020(t.getPartSetId(r))){const i=this._structure._Str_2264(r,e);i&&(t._Str_830(r,i.id,[0]),s=!0)}}else{const i=this._structure._Str_2264(r,e);i&&(t._Str_830(r,i.id,[0]),s=!0)}}return!s}getFigureClubLevel(t,e,s){if(!this._structure)return 0;const i=this._structure.figureData,n=Array.from(t._Str_1016());let r=0;for(const a of n){const e=i._Str_740(a),s=t.getPartSetId(a),n=e._Str_1020(s);if(n){r=Math.max(n.clubLevel,r);const s=i._Str_783(e._Str_734),o=t._Str_815(a);for(const t of o){const e=s._Str_751(t);r=Math.max(e.clubLevel,r)}}}s||(s=this._structure._Str_1695(x.a.FULL));for(const a of s){const t=i._Str_740(a);-1===n.indexOf(a)&&(r=Math.max(t._Str_1002(e),r))}return r}isValidFigureSetForGender(t,e){const s=this.structureData._Str_938(t);return!(!s||"U"!==s.gender.toUpperCase()&&s.gender.toUpperCase()!==e.toUpperCase())}getFigureStringWithFigureIds(t,e,s){const i=new o;i._Str_2153(t,e);const n=this._Str_1667(s);for(const r of n)i._Str_2088(r.type,r.id,i.getColourIds(r.type));return i._Str_1008()}_Str_1667(t){const e=this.structureData,s=[];for(const i of t){const t=e._Str_938(i);t&&s.push(t)}return s}_Str_838(t,e){return this._structure?this._structure._Str_1733(t,e):null}getAssetByName(t){return this._aliasCollection.getAsset(t)}get assets(){return a.a.instance.core.asset}get isReady(){return this._isReady}get structure(){return this._structure}get structureData(){return this._structure?this._structure.figureData:null}get downloadManager(){return this._avatarAssetDownloadManager}}return t.DEFAULT_FIGURE="hd-99999-99999",t})()},"Xr/m":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._isDisposed=!1,this._isDisposing=!1}dispose(){this._isDisposed||this._isDisposing||(this._isDisposing=!0,this.onDispose(),this._isDisposed=!0,this._isDisposing=!1)}onDispose(){}get disposed(){return this._isDisposed}get isDisposing(){return this._isDisposing}}},XxiA:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("nL9H");class n extends i.a{constructor(t){super(t),this._type=t.readInt()}get type(){return this._type}get code(){return this._type}}},Y1Bc:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},YN1x:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("5+UO"),n=s("jfHZ"),r=s("ndLt");class a{flush(){return this._categories=[],this._removedFriendIds=[],this._addedFriends=[],this._updatedFriends=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._categories.push(new n.a(t)),e--;let s=t.readInt();for(;s>0;){const e=t.readInt();-1===e?this._removedFriendIds.push(t.readInt()):0===e?this._updatedFriends.push(new r.a(t)):1===e&&this._addedFriends.push(new r.a(t)),s--}return!0}get categories(){return this._categories}get removedFriendIds(){return this._removedFriendIds}get addedFriends(){return this._addedFriends}get updatedFriends(){return this._updatedFriends}}class o extends i.a{constructor(t){super(t,a)}getParser(){return this.parser}}},YQxP:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},YQyq:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},YTIQ:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},YaSm:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._errorCode=0,this._failedRecipients=[],!0}parse(t){if(!t)return!1;this._errorCode=t.readInt();let e=t.readInt();for(;e>0;)this._failedRecipients.push(t.readInt()),e--;return!0}get errorCode(){return this._errorCode}get failedRecipients(){return this._failedRecipients}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},YlMy:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},Yp13:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i,n){this._data=[t,e.length,...e,s,i.length,...i,n]}getMessageArray(){return this._data}dispose(){}}},"Yx/o":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._unitId=null,this._expression=0,!0}parse(t){return!!t&&(this._unitId=t.readInt(),this._expression=t.readInt(),!0)}get unitId(){return this._unitId}get expression(){return this._expression}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},Z0XG:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("Ns5P");let n=(()=>{class t extends i.a{constructor(t,e,s,i,n,r=0,a=null,o=-1){super(t,e),this._objectId=s,this._message=i,this._chatType=n,this._links=a,this._extraParam=o,this._style=r}get objectId(){return this._objectId}get message(){return this._message}get chatType(){return this._chatType}get links(){return this._links}get extraParam(){return this._extraParam}get style(){return this._style}}return t.CHAT_EVENT="RSCE_CHAT_EVENT",t.FLOOD_EVENT="RSCE_FLOOD_EVENT",t.CHAT_NORMAL=0,t.CHAT_WHISPER=1,t.CHAT_SHOUT=2,t._Str_5821=3,t._Str_6081=4,t._Str_8971=5,t._Str_5958=6,t._Str_6065=7,t._Str_5998=8,t._Str_5904=9,t._Str_8909=10,t})()},Z50b:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i,n,r,a,o,c){this._data=[t,e,s,i,n,r,a,o,c]}getMessageArray(){return this._data}dispose(){}}},ZHGj:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},ZLse:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{constructor(t){if(this._unseen=0,!t)throw new Error("invalid_parser");this._achievementId=t.readInt(),this._level=t.readInt(),this._badgeId=t.readString(),this._Str_6791=t.readInt(),this._Str_18274=Math.max(1,t.readInt()),this._Str_10280=t.readInt(),this._Str_12282=t.readInt(),this._Str_19007=t.readInt(),this._Str_16081=t.readBoolean(),this._category=t.readString(),this._Str_21707=t.readString(),this._Str_20339=t.readInt(),this._Str_19099=t.readInt()}get achievementId(){return this._achievementId}get badgeId(){return this._badgeId}get level(){return this._level}get _Str_25209(){return this._Str_6791}get _Str_24142(){return this._Str_18274-this._Str_6791}get rewardAmount(){return this._Str_10280}get rewardType(){return this._Str_12282}get _Str_22939(){return this._Str_19007-this._Str_6791}get _Str_7518(){return this._Str_16081}get category(){return this._category}get _Str_25896(){return this._Str_21707}get totalLevels(){return this._Str_20339}get _Str_10438(){return this._level>1||this._Str_16081}_Str_24410(){this._Str_19007=this._Str_18274}get _Str_24874(){return this._Str_19099}get progress(){return this._Str_19007}get toNextProgress(){return this._Str_18274}set unseen(t){this._unseen=t}get unseen(){return this._unseen}reset(t){this._achievementId=t._achievementId,this._level=t._level,this._badgeId=t._badgeId,this._Str_6791=t._Str_6791,this._Str_18274=t._Str_18274,this._Str_10280=t._Str_10280,this._Str_12282=t._Str_12282,this._Str_19007=t._Str_19007,this._Str_16081=t._Str_16081,this._category=t.category,this._Str_21707=t._Str_21707,this._Str_20339=t._Str_20339,this._Str_19099=t._Str_19099}}return t._Str_21736=-1,t._Str_21318=0,t._Str_15908=1,t._Str_20384=2,t})()},ZQhZ:function(t,e,s){"use strict";s.d(e,"a",function(){return m});var i=s("IqKQ"),n=s("awbM"),r=s("vzKh"),a=s("3r1x"),o=s("IGSi"),c=s("auym"),h=s("P7Cj"),l=s("z20u"),u=s("HqZk"),_=s("38Mq"),d=s("XMGm"),g=s("IqYK");let m=(()=>{class t{constructor(){this._logger=new r.a(this.constructor.name),this._stateEvents=null,this._sessionDataManager=null,this._waitingForSessionDataManager=!1,this._iconListener=null,this._collections=new Map,this._images=new Map,this._events=new Map,this._activeObjects={},this._activeObjectTypes=new Map,this._activeObjectTypeIds=new Map,this._objectTypeAdUrls=new Map,this._wallItems={},this._wallItemTypes=new Map,this._wallItemTypeIds=new Map,this._furniRevisions=new Map,this._pets={},this._objectAliases=new Map,this._objectOriginalNames=new Map,this._pendingContentTypes=[],this._dataInitialized=!1}initialize(t){this._stateEvents=t,this.setFurnitureData();for(const[e,s]of h.a.instance.getConfiguration("pet.types").entries())this._pets[s]=e}dispose(){}setSessionDataManager(t){this._sessionDataManager=t,this._waitingForSessionDataManager&&(this._waitingForSessionDataManager=!1,this.setFurnitureData())}loadFurnitureData(){this.setFurnitureData()}setFurnitureData(){if(!this._sessionDataManager)return void(this._waitingForSessionDataManager=!0);const e=this._sessionDataManager.getAllFurnitureData(this);e&&(this._sessionDataManager.removePendingFurniDataListener(this),this.processFurnitureData(e),this._stateEvents.dispatchEvent(new a.a(t.LOADER_READY)))}processFurnitureData(t){if(t)for(const e of t){if(!e)continue;const t=e.id;let s=e.className;e.hasIndexedColor&&(s=s+"*"+e.colorIndex);const i=e.revision,n=e.adUrl;n&&n.length>0&&this._objectTypeAdUrls.set(s,n);let r=e.className;e.type===l.a.FLOOR?(this._activeObjectTypes.set(t,s),this._activeObjectTypeIds.set(s,t),this._activeObjects[r]||(this._activeObjects[r]=1)):e.type===l.a.WALL&&("post.it"===r&&(s="post_it",r="post_it"),"post.it.vd"===r&&(s="post_it_vd",r="post_id_vd"),this._wallItemTypes.set(t,s),this._wallItemTypeIds.set(s,t),this._wallItems[r]||(this._wallItems[r]=1)),i>this._furniRevisions.get(r)&&(this._furniRevisions.delete(r),this._furniRevisions.set(r,i))}}getFurnitureFloorNameForTypeId(t){const e=this._activeObjectTypes.get(t);return this.removeColorIndex(e)}getFurnitureWallNameForTypeId(t,e=null){let s=this._wallItemTypes.get(t);return"poster"===s&&null!==e&&(s+=e),this.removeColorIndex(s)}getFurnitureFloorColorIndex(t){const e=this._activeObjectTypes.get(t);return e?this.getColorIndexFromName(e):-1}getFurnitureWallColorIndex(t){const e=this._wallItemTypes.get(t);return e?this.getColorIndexFromName(e):-1}getColorIndexFromName(t){if(!t)return-1;const e=t.indexOf("*");return-1===e?0:parseInt(t.substr(e+1))}removeColorIndex(t){if(!t)return null;const e=t.indexOf("*");return-1===e?t:t.substr(0,e)}getCollection(t){if(!t)return null;const e=this._collections.get(t);if(!e){const e=h.a.instance.core.asset.getCollection(t);return e?(this._collections.set(t,e),e):null}return e}getImage(t){if(!t)return null;const e=this._images.get(t);if(!e)return null;const s=new Image;return s.src=e.src,s}addAssetToCollection(t,e,s){const i=this.getCollection(t);return!!i&&i.addAsset(e,s,!0,0,0,!1,!1)}createCollection(t,e){if(!t||!e)return null;const s=new c.a(t,e);this._collections.set(s.name,s)}getPlaceholderName(e){switch(this.getCategoryForType(e)){case u.a.FLOOR:return t.PLACE_HOLDER;case u.a.WALL:return t.PLACE_HOLDER_WALL;default:return void 0!==this._pets[e]?t.PLACE_HOLDER_PET:t.PLACE_HOLDER_DEFAULT}}getCategoryForType(t){return t?void 0!==this._activeObjects[t]?u.a.FLOOR:void 0!==this._wallItems[t]?u.a.WALL:void 0!==this._pets[t]?u.a.UNIT:0===t.indexOf("poster")?u.a.WALL:"room"===t?u.a.ROOM:t===_.a.USER||t===_.a.PET||t===_.a.BOT||t===_.a.RENTABLE_BOT?u.a.UNIT:"tile_cursor"===t||"selection_arrow"===t?u.a.CURSOR:u.a.MINIMUM:u.a.MINIMUM}getPetNameForType(t){return h.a.instance.getConfiguration("pet.types")[t]||null}isLoaderType(t){return(t=_.a.getRealType(t))!==g.a.USER}downloadImage(t,e,s,i=null){let n=null,r=[];if(e&&e.indexOf(",")>=0&&(n=e,e=n.split(",")[0]),r=this.getAssetUrls(n||e,s,!0),r&&r.length){const i=r[0],n=new Image;return n.src=i,n.onload=()=>{n.onerror=null,this._images.set([e,s].join("_"),n),this._iconListener.onRoomContentLoaded(t,[e,s].join("_"),!0)},n.onerror=()=>{n.onload=null,this._logger.error("Failed to download asset: "+i),this._iconListener.onRoomContentLoaded(t,[e,s].join("_"),!1)},!0}return!1}downloadAsset(t,e){const s=this.getAssetUrls(t);if(!s||!s.length)return!1;if(this._pendingContentTypes.indexOf(t)>=0||this.getOrRemoveEventDispatcher(t))return!1;this._pendingContentTypes.push(t),this._events.set(t,e);const n=s.length;let r=0;const a=(s,i,a)=>{if(s&&s.destroy(),!a)return this._logger.error("Failed to download asset: "+i.url),void e.dispatchEvent(new o.a(o.a.RCLE_FAILURE,t));if(r++,r===n){const e=this._events.get(t);if(!e)return;e.dispatchEvent(new o.a(o.a.RCLE_SUCCESS,t))}};for(const o of s){if(!o)continue;const t=new i.Loader,e={crossOrigin:!1,xhrType:o.endsWith(".nitro")?"arraybuffer":"json"};t.use((e,s)=>this.assetLoader(t,e,s,a)).add(o,e).load()}return!0}assetLoader(t,e,s,r){if(!e||e.error)return e&&e.texture&&e.texture.destroy(!0),void r(t,e,!1);if("nitro"===e.extension){const s=new n.a(e.data),a=s.jsonFile;if(!a||!a.type)return void r(t,e,!1);if(a.spritesheet&&Object.keys(a.spritesheet).length){const n=s.baseTexture;if(!n)return void r(t,e,!1);if(n.valid){const s=new i.Spritesheet(n,a.spritesheet);s.parse(i=>{this.createCollection(a,s),r(t,e,!0)})}else n.once("loaded",()=>{n.removeAllListeners();const s=new i.Spritesheet(n,a.spritesheet);s.parse(i=>{this.createCollection(a,s),r(t,e,!0)})}),n.once("error",()=>{n.removeAllListeners(),r(t,e,!1)});return}this.createCollection(a,null),r(t,e,!0)}else if(e.type===i.LoaderResource.TYPE.JSON){const s=e.data;if(!s.type)return void r(t,e,!1);if(s.spritesheet&&Object.keys(s.spritesheet).length){const n=s.spritesheet.meta&&s.spritesheet.meta.image;if(!n||!n.length)return void r(t,e,!1);const a=e.url.substring(0,e.url.lastIndexOf("/")+1)+n,o=i.BaseTexture.from(a);if(o.valid){const n=new i.Spritesheet(o,s.spritesheet);n.parse(i=>{this.createCollection(s,n),r(t,e,!0)})}else o.once("loaded",()=>{o.removeAllListeners();const n=new i.Spritesheet(o,s.spritesheet);n.parse(i=>{this.createCollection(s,n),r(t,e,!0)})}),o.once("error",()=>{o.removeAllListeners(),r(t,e,!1)});return}this.createCollection(s,null),r(t,e,!0)}else r(t,e,!1)}setAssetAliasName(t,e){this._objectAliases.set(t,e),this._objectOriginalNames.set(e,t)}getAssetAliasName(t){return this._objectAliases.get(t)||t}getAssetOriginalName(t){return this._objectOriginalNames.get(t)||t}getAssetUrls(e,s=null,i=!1){switch(e){case t.PLACE_HOLDER:return[this.getAssetUrlWithRoomBase("place_holder")];case t.PLACE_HOLDER_WALL:return[this.getAssetUrlWithRoomBase("place_holder_wall")];case t.PLACE_HOLDER_PET:return[this.getAssetUrlWithRoomBase("place_holder_pet")];case t.ROOM:return[this.getAssetUrlWithRoomBase("room")];case t.TILE_CURSOR:return[this.getAssetUrlWithRoomBase("tile_cursor")];case t.SELECTION_ARROW:return[this.getAssetUrlWithRoomBase("selection_arrow")];default:{const t=this.getCategoryForType(e);if(t===u.a.FLOOR||t===u.a.WALL){const t=this.getAssetAliasName(e);let n=i?this.getAssetUrlWithFurniIconBase(t):this.getAssetUrlWithFurniBase(e);if(i){const e=s&&""!==s&&this._activeObjectTypeIds.has(t+"*"+s);n=n.replace(/%param%/gi,e?"_"+s:"")}return[n]}return t===u.a.UNIT?[this.getAssetUrlWithPetBase(e)]:null}}}getAssetIconUrl(t,e){let s=null,i=[];return t&&t.indexOf(",")>=0&&(s=t,t=s.split(",")[0]),i=this.getAssetUrls(s||t,e,!0),i&&i.length?i[0]:null}getAssetUrlWithRoomBase(t){return h.a.instance.getConfiguration("room.asset.url").replace(/%libname%/gi,t)}getAssetUrlWithFurniBase(t){return h.a.instance.getConfiguration("furni.asset.url").replace(/%libname%/gi,t)}getAssetUrlWithFurniIconBase(t){return h.a.instance.getConfiguration("furni.asset.icon.url").replace(/%libname%/gi,t)}getAssetUrlWithPetBase(t){return h.a.instance.getConfiguration("pet.asset.url").replace(/%libname%/gi,t)}setRoomObjectRoomId(t,e){const s=t&&t.model;s&&s.setValue(d.a.OBJECT_ROOM_ID,e)}getOrRemoveEventDispatcher(t,e=!1){const s=this._events.get(t);return e&&this._events.delete(t),s}setIconListener(t){this._iconListener=t}}return t.PLACE_HOLDER="place_holder",t.PLACE_HOLDER_WALL="place_holder_wall",t.PLACE_HOLDER_PET="place_holder_pet",t.PLACE_HOLDER_DEFAULT=t.PLACE_HOLDER,t.ROOM="room",t.TILE_CURSOR="tile_cursor",t.SELECTION_ARROW="selection_arrow",t.LOADER_READY="RCL_LOADER_READY",t.MANDATORY_LIBRARIES=[t.PLACE_HOLDER,t.PLACE_HOLDER_WALL,t.PLACE_HOLDER_PET,t.ROOM,t.TILE_CURSOR,t.SELECTION_ARROW],t})()},ZRgm:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s){this._roomName=t,this._roomId=e,this._chatlogs=s}get roomName(){return this._roomName}get roomId(){return this._roomId}get chatlogs(){return this._chatlogs}}},ZWGQ:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("G0tw");let n=(()=>{class t extends i.a{constructor(e,s,i,n){super(t.ROOM_COLOR,e),this._color=s,this._Str_21672=i,this._Str_6930=n}get color(){return this._color}get _Str_5123(){return this._Str_21672}get _Str_11464(){return this._Str_6930}}return t.ROOM_COLOR="REE_ROOM_COLOR",t})()},Zim7:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{flush(){return this._reason=0,this._parameter="",!0}parse(t){return!!t&&(this._reason=t.readInt(),this._parameter=t.readString(),!0)}get reason(){return this._reason}get parameter(){return this._parameter}}return t.FULL_ERROR=1,t._Str_19431=2,t.QUEUE_ERROR=3,t.BANNED=4,t})()},"Zm+c":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._groupCost=0,this._availableRooms=new Map,!0}parse(t){if(!t)return!1;this._groupCost=t.readInt();let e=t.readInt();for(;e>0;){const s=t.readInt(),i=t.readString();t.readBoolean(),this._availableRooms.set(s,i),e--}return!0}get groupCost(){return this._groupCost}get availableRooms(){return this._availableRooms}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},Zq74:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._code=0,!0}parse(t){return!!t&&(this._code=t.readInt(),!0)}get code(){return this._code}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},a9Mt:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("ZLse");class r{flush(){return this._achievements=[],this._Str_19269=null,!0}parse(t){if(!t)return!1;this._achievements=[];let e=t.readInt();for(;e>0;)this._achievements.push(new n.a(t)),e--;return this._Str_19269=t.readString(),!0}get achievements(){return this._achievements}get _Str_16300(){return this._Str_19269}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},aBXB:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i=-1){this._data=[],this._data.push(t),this._data.push(e),this._data.push(s),-1!=i&&this._data.push(i)}getMessageArray(){return this._data}dispose(){}}},amIx:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i,n,r){this._data=[t,e.length,...e,s,i.length,...i,n,r]}getMessageArray(){return this._data}dispose(){}}},asTc:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},asXX:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("5+UO"),n=s("0wjC");class r{constructor(t){if(!t)throw new Error("invalid_wrapper");this.parse(t)}parse(t){return!!t&&(this._Str_2507=t.readInt(),this._Str_6052=t.readBoolean(),this._Str_19803=t.readInt(),this._Str_693=t.readBoolean(),!0)}get offerId(){return this._Str_2507}get _Str_12313(){return this._Str_6052}get isClubOnly(){return this._Str_6052}get isSelectable(){return this._Str_693}get _Str_21146(){return this._Str_19803}get availableInDays(){return this._Str_19803}get isAvailable(){return this._Str_693}}class a{flush(){return!0}parse(t){if(!t)return!1;this._offers=[],this._Str_5759=new Map,this._daysUntilNextGift=t.readInt(),this._giftsAvailable=t.readInt();let e=t.readInt(),s=0;for(;s<e;)this._offers.push(new n.a(t)),s++;for(e=t.readInt(),s=0;s<e;){const e=new r(t);this._Str_5759.set(e.offerId,e),s++}return!0}get offers(){return this._offers}get daysUntilNextGift(){return this._daysUntilNextGift}get giftsAvailable(){return this._giftsAvailable}set giftsAvailable(t){this._giftsAvailable=t}getOfferExtraData(t){return t?this._Str_5759.get(t):null}get _Str_24398(){return this._Str_5759}}class o extends i.a{constructor(t){super(t,a)}getParser(){return this.parser}}},auym:function(t,e,s){"use strict";s.d(e,"a",function(){return c});var i=s("kiYJ"),n=s("P7Cj"),r=s("IqKQ");let a=(()=>{class t{static createAsset(e,s,i,n,r,a=!1,o=!1,c=!1){const h=t.GRAPHIC_POOL.length?t.GRAPHIC_POOL.pop():new t;return h._name=e,h._source=s||null,i?(h._texture=i,h._initialized=!1):(h._texture=null,h._initialized=!0),h._usesPalette=c,h._x=n,h._y=r,h._flipH=a,h._flipV=o,h._rectangle=null,h}recycle(){this._texture=null,t.GRAPHIC_POOL.push(this)}initialize(){!this._initialized&&this._texture&&(this._width=this._texture.width,this._height=this._texture.height,this._initialized=!0)}get name(){return this._name}get source(){return this._source}get texture(){return this._texture}get usesPalette(){return this._usesPalette}get x(){return this._x}get y(){return this._y}get width(){return this.initialize(),this._width}get height(){return this.initialize(),this._height}get offsetX(){return this._flipH?-this._x:this._x}get offsetY(){return this._flipV?-this._y:this._y}get flipH(){return this._flipH}get flipV(){return this._flipV}get rectangle(){return this._rectangle||(this._rectangle=new r.Rectangle(0,0,this.width,this.height)),this._rectangle}}return t.GRAPHIC_POOL=[],t})();class o{constructor(t,e,s){for(this._palette=t;this._palette.length<256;)this._palette.push([0,0,0]);this._primaryColor=e,this._secondaryColor=s}dispose(){}applyPalette(t){const e=r.Sprite.from(t),s=n.a.instance.renderer.extract.canvas(e),i=s.getContext("2d"),a=i.getImageData(0,0,s.width,s.height),o=a.data;for(let n=0;n<o.length;n+=4){let t=this._palette[o[n+1]];void 0===t&&(t=[0,0,0]),o[n]=t[0],o[n+1]=t[1],o[n+2]=t[2]}return i.putImageData(a,0,0),r.Texture.from(s)}get primaryColor(){return this._primaryColor}get secondaryColor(){return this._secondaryColor}}let c=(()=>{class t{constructor(t,e){if(!t)throw new Error("invalid_collection");this._name=t.name,this._data=t,this._textures=new Map,this._assets=new Map,this._palettes=new Map,this._paletteAssetNames=[],e&&this.addLibraryAsset(e.textures),this.define(t)}dispose(){if(this._palettes){for(const t of this._palettes.values())t.dispose();this._palettes.clear()}if(this._paletteAssetNames&&(this.disposePaletteAssets(),this._paletteAssetNames=null),this._assets){for(const t of this._assets.values())t.recycle();this._assets.clear()}}addReference(){this._referenceCount++,this._referenceTimestamp=n.a.instance.time}removeReference(){this._referenceCount--,this._referenceCount<=0&&(this._referenceCount=0,this._referenceTimestamp=n.a.instance.time,this.disposePaletteAssets(!1))}define(t){const e=t.assets,s=t.palettes;e&&this.defineAssets(e),s&&this.definePalettes(s)}defineAssets(t){if(t)for(const e in t){const s=t[e];if(!s)continue;const i=-s.x||0,n=-s.y||0;let r=!1;const a=!1,o=s.usesPalette||!1;let c=s.source||"";s.flipH&&c.length&&(r=!0),c.length||(c=e);const h=this.getLibraryAsset(c);if(!h)continue;let l=this.createAsset(e,c,h,r,a,i,n,o);if(!l){const t=this.getAsset(e);t&&t.name!==t.source&&(l=this.replaceAsset(e,c,h,r,a,i,n,o))}}}definePalettes(t){if(t)for(const e in t){const s=t[e];if(!s)continue;const i=s.id.toString();if(this._palettes.get(i))continue;let n=16777215,r=16777215,a=s.color1;a&&a.length>0&&(n=parseInt(a,16)),a=s.color2,a&&a.length>0&&(r=parseInt(a,16)),this._palettes.set(i,new o(s.rgb,n,r))}}createAsset(t,e,s,i,n,r,o,c){if(this._assets.get(t))return!1;const h=a.createAsset(t,e,s,r,o,i,n,c);return this._assets.set(t,h),!0}replaceAsset(t,e,s,i,n,r,a,o){const c=this._assets.get(t);return c&&(this._assets.delete(t),c.recycle()),this.createAsset(t,e,s,i,n,r,a,o)}getAsset(t){return t&&this._assets.get(t)||null}getAssetWithPalette(t,e){const s=t+"@"+e;let i=this.getAsset(s);if(!i){if(i=this.getAsset(t),!i||!i.usesPalette)return i;const n=this.getPalette(e);if(n){const t=n.applyPalette(i.texture);t&&(this._paletteAssetNames.push(s),this.createAsset(s,i.source+"@"+e,t,i.flipH,i.flipV,i.x,i.y,!1),i=this.getAsset(s))}}return i}getPaletteNames(){return Array.from(this._palettes.keys())}getPaletteColors(t){const e=this.getPalette(t);return e?[e.primaryColor,e.secondaryColor]:null}getPalette(t){return t&&this._palettes.get(t)||null}addAsset(t,e,s,i=0,n=0,r=!1,a=!1){if(!t||!e)return!1;const o=this.getLibraryAsset(t);return o?!!s&&(o.baseTexture=e.baseTexture,o.frame=e.frame,o.trim=e.trim,o.updateUvs(),!0):(this._textures.set(t,e),this.createAsset(t,t,e,r,a,i,n,!1))}disposeAsset(t){const e=this._assets.get(t);if(!e)return;this._assets.delete(t);const s=this.getLibraryAsset(e.source);s&&(this._textures.delete(e.source),s.destroy(!0)),e.recycle()}getLibraryAsset(t){return t&&this._textures.get(t=this._name+"_"+t)||null}addLibraryAsset(t){if(t)for(const e in t){const s=t[e];s&&this._textures.set(i.a.removeFileExtension(e),s)}}disposePaletteAssets(e=!0){if(this._paletteAssetNames&&(e||this._paletteAssetNames.length>t.PALETTE_ASSET_DISPOSE_THRESHOLD)){for(const t of this._paletteAssetNames)this.disposeAsset(t);this._paletteAssetNames=[]}}get referenceCount(){return this._referenceCount}get referenceTimestamp(){return this._referenceTimestamp}get name(){return this._name}get data(){return this._data}get textures(){return this._textures}get assets(){return this._assets}}return t.PALETTE_ASSET_DISPOSE_THRESHOLD=10,t})()},awbM:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("rP9a"),n=s("IqKQ"),r=s("lVe0");let a=(()=>{class t{constructor(t){this._jsonFile=null,this._image=null,this._imageData=null,this._baseTexture=null,this.parse(t)}static arrayBufferToBase64(t){let e="";const s=new Uint8Array(t),i=s.byteLength;for(let n=0;n<i;n++)e+=String.fromCharCode(s[n]);return window.btoa(e)}parse(e){const s=new r.a(e);let a=s.readShort();for(;a>0;){const e=s.readShort(),r=s.readBytes(e).toString(),o=s.readInt(),c=s.readBytes(o);if(r.endsWith(".json")){const e=Object(i.a)(c.toArrayBuffer());this._jsonFile=JSON.parse(t.TEXT_DECODER.decode(e))}else{const e=Object(i.a)(c.toArrayBuffer()),s=t.arrayBufferToBase64(e);this._baseTexture=new n.BaseTexture("data:image/png;base64,"+s)}a--}}get jsonFile(){return this._jsonFile}get baseTexture(){return this._baseTexture}}return t.TEXT_DECODER=new TextDecoder("utf-8"),t})()},bR4k:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._userId=0,this._furnitureCount=0,!0}parse(t){return!!t&&(this._userId=t.readInt(),this._furnitureCount=t.readInt(),!0)}get userId(){return this._userId}get furnitureCount(){return this._furnitureCount}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},bXGL:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._seconds=0,!0}parse(t){return!!t&&(this._seconds=t.readInt(),!0)}get seconds(){return this._seconds}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},bakE:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("nL9H");class n extends i.a{constructor(t){super(t),this._conflictingTriggers=[],this._type=t.readInt(),this._delayInPulses=t.readInt();let e=t.readInt();for(;e>0;)this._conflictingTriggers.push(t.readInt()),e--}get type(){return this._type}get code(){return this._type}get delayInPulses(){return this._delayInPulses}get conflictingTriggers(){return this._conflictingTriggers}}},bmMM:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO"),n=s("Ly0c");class r extends i.a{constructor(t){super(t,n.a)}getParser(){return this.parser}}},bmkm:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},btSX:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},c746:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{flush(){return this._roomIndex=null,this._message=null,this._gesture=0,this._bubble=0,this._urls=[],this._messageLength=0,!0}parse(t){return!!t&&(this._roomIndex=t.readInt(),this._message=t.readString(),this._gesture=t.readInt(),this._bubble=t.readInt(),this.parseUrls(t),this._messageLength=t.readInt(),!0)}parseUrls(t){if(!t)return!1;this._urls=[];let e=t.readInt();for(;e>0;)this._urls.push(t.readString()),e--;return!0}get roomIndex(){return this._roomIndex}get message(){return this._message}get gesture(){return this._gesture}get bubble(){return this._bubble}get urls(){return this._urls}get messageLength(){return this._messageLength}}},c7QS:function(t,e,s){"use strict";s.d(e,"a",function(){return c});var i=s("5+UO"),n=s("o/0e");class r{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._code=null,this._data=null,this._action=-1,this._closed=!1,this._mode=-1,this._rooms=[],!0}parse(t){if(!t)return!1;this._code=t.readString(),this._data=t.readString(),this._action=t.readInt(),this._closed=t.readBoolean(),this._mode=t.readInt();let e=t.readInt();for(;e>0;)this._rooms.push(new n.a(t)),e--;return!0}get code(){return this._code}get data(){return this._data}get action(){return this._action}get closed(){return this._closed}get mode(){return this._mode}get rooms(){return this._rooms}}class a{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._code=null,this._data=null,this._results=[],!0}parse(t){if(!t)return!1;this._code=t.readString(),this._data=t.readString();let e=t.readInt();for(;e>0;)this._results.push(new r(t)),e--;return!0}get code(){return this._code}get data(){return this._data}get results(){return this._results}}class o{flush(){return this._result=null,!0}parse(t){return!!t&&(this._result=new a(t),!0)}get result(){return this._result}}class c extends i.a{constructor(t){super(t,o)}getParser(){return this.parser}}},"cu+P":function(t,e,s){"use strict";s.d(e,"a",function(){return r});class i{flush(){return this._link=null,!0}parse(t){return!!t&&(this._link=t.readString(),!0)}get link(){return this._link}}var n=s("5+UO");class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},dEqu:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.SUPER_USER=9,t.ADMINISTRATOR=8,t.COMMUNITY=7,t.PLAYER_SUPPORT=6,t.MODERATOR=5,t.EMPLOYEE=4,t.BUS_PARTNER=3,t.PARTNER=2,t.CELEBRITY=1,t.NONE=0,t})()},dPj3:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("G0tw");let n=(()=>{class t extends i.a{constructor(e,s,i,n,r,a){super(t.ROOM_COLOR,e),this._state=s,this._presetId=i,this._effectId=n,this._color=r,this._brightness=a}get state(){return this._state}get _Str_14686(){return this._presetId}get _Str_6815(){return this._effectId}get color(){return this._color}get _Str_5123(){return this._brightness}}return t.ROOM_COLOR="REDSE_ROOM_COLOR",t})()},dmof:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},dwRb:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this._senderId=t.readInt(),this._errorCode=t.readInt()}get senderId(){return this._senderId}get errorCode(){return this._errorCode}}class r{flush(){return this._failuers=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._failuers.push(new n(t)),e--;return!0}get failures(){return this._failuers}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},e2zs:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("5+UO"),n=s("ZRgm");class r{constructor(t,e,s,i,n){this._timestamp=t,this._userId=e,this._userName=s,this._message=i,this._bool=n}get timestamp(){return this._timestamp}get userId(){return this._userId}get userName(){return this._userName}get message(){return this._message}get bool(){return this._bool}}class a{constructor(){this._roomVisits=[]}flush(){return this._id=null,this._username=null,this._size=null,this._roomVisits=[],!0}parse(t){if(!t)return!1;this._id=t.readInt(),this._username=t.readString(),this._size=t.readInt();for(let e=0;e<this._size;e++){t.readByte(),t.readShort(),t.readString(),t.readByte();const e=t.readString();t.readString(),t.readByte();const s=t.readInt(),i=[],a=t.readShort();for(let n=0;n<a;n++){const e=t.readString(),s=t.readInt(),n=t.readString(),a=t.readString(),o=t.readBoolean();i.push(new r(e,s,n,a,o))}this._roomVisits.push(new n.a(e,s,i))}return!0}get id(){return this._id}get username(){return this._username}get roomVisits(){return this._roomVisits}}class o extends i.a{constructor(t){super(t,a)}getParser(){return this.parser}}},e6Xd:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("Ns5P");let n=(()=>{class t extends i.a{constructor(e,s){super(t.PET_INFO,e),this._petInfo=s}get _Str_24727(){return this._petInfo}}return t.PET_INFO="RSPIUE_PET_INFO",t})()},"e9/N":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._bases=new Map,this._symbols=new Map,this._partColors=new Map,this._colorsA=new Map,this._colorsB=new Map,!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;){const s=t.readInt(),i=t.readString(),n=t.readString();this._bases.set(s,[i,n]),e--}let s=t.readInt();for(;s>0;){const e=t.readInt(),i=t.readString(),n=t.readString();this._symbols.set(e,[i,n]),s--}let i=t.readInt();for(;i>0;){const e=t.readInt(),s=t.readString();this._partColors.set(e,s),i--}let n=t.readInt();for(;n>0;){const e=t.readInt(),s=t.readString();this._colorsA.set(e,s),n--}let r=t.readInt();for(;r>0;){const e=t.readInt(),s=t.readString();this._colorsB.set(e,s),r--}return!0}get bases(){return this._bases}get symbols(){return this._symbols}get partColors(){return this._partColors}get colorsA(){return this._colorsA}get colorsB(){return this._colorsB}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},eJ6k:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},eXwK:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},ebaN:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("Wgf2"),n=s("5+UO");class r extends n.a{constructor(t){super(t,i.a)}getParser(){return this.parser}}},ekex:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},enVn:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},f1eJ:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("N+Yd");class r{flush(){return!0}parse(t){return!!t&&(this._roomIndex=t.readInt(),this._petId=t.readInt(),this._figureData=new n.a(t),this._hasSaddle=t.readBoolean(),this._isRiding=t.readBoolean(),!0)}get roomIndex(){return this._roomIndex}get petId(){return this._petId}get figureData(){return this._figureData}get hasSaddle(){return this._hasSaddle}get isRiding(){return this._isRiding}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},f6Tv:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){if(!t)throw new Error("invalid_wrapper");this._requestId=t.readInt(),this._requesterName=t.readString(),this._figureString=t.readString(),this._requesterUserId=this._requestId}get requestId(){return this._requestId}get requesterName(){return this._requesterName}get requesterUserId(){return this._requesterUserId}get figureString(){return this._figureString}}},f6o4:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.CHAT_WIDGET="RWE_CHAT_WIDGET",t.INFOSTAND="RWE_INFOSTAND",t.ME_MENU="RWE_ME_MENU",t.CHAT_INPUT_WIDGET="RWE_CHAT_INPUT_WIDGET",t.FURNI_PLACEHOLDER="RWE_FURNI_PLACEHOLDER",t.FURNI_CREDIT_WIDGET="RWE_FURNI_CREDIT_WIDGET",t.FURNI_STICKIE_WIDGET="RWE_FURNI_STICKIE_WIDGET",t.FURNI_TROPHY_WIDGET="RWE_FURNI_TROPHY_WIDGET",t.FURNI_LOVELOCK_WIDGET="RWE_FURNI_LOVELOCK_WIDGET",t.FURNI_PRESENT_WIDGET="RWE_FURNI_PRESENT_WIDGET",t.FURNI_ECOTRONBOX_WIDGET="RWE_FURNI_ECOTRONBOX_WIDGET",t.FURNI_PET_PACKAGE_WIDGET="RWE_FURNI_PET_PACKAGE_WIDGET",t.PLAYLIST_EDITOR_WIDGET="RWE_PLAYLIST_EDITOR_WIDGET",t.DOORBELL="RWE_DOORBELL",t.LOADINGBAR="RWE_LOADINGBAR",t.ROOM_QUEUE="RWE_ROOM_QUEUE",t.ROOM_POLL="RWE_ROOM_POLL",t.ROOM_VOTE="RWE_ROOM_VOTE",t.USER_CHOOSER="RWE_USER_CHOOSER",t.FURNI_CHOOSER="RWE_FURNI_CHOOSER",t.ROOM_DIMMER="RWE_ROOM_DIMMER",t.FRIEND_REQUEST="RWE_FRIEND_REQUEST",t.CLOTHING_CHANGE="RWE_CLOTHING_CHANGE",t.CONVERSION_TRACKING="RWE_CONVERSION_TRACKING",t.USER_NOTIFICATION="RWE_USER_NOTIFICATION",t.FRIENDS_BAR="RWE_FRIENDS_BAR",t.PURSE_WIDGET="RWE_PURSE_WIDGET",t.AVATAR_INFO="RWE_AVATAR_INFO",t.WELCOME_GIFT="RWE_WELCOME_GIFT",t.SPAMWALL_POSTIT_WIDGET="RWE_SPAMWALL_POSTIT_WIDGET",t.EFFECTS="RWE_EFFECTS",t.MANNEQUIN="RWE_MANNEQUIN",t.FURNITURE_CONTEXT_MENU="RWE_FURNITURE_CONTEXT_MENU",t.LOCATION_WIDGET="RWE_LOCATION_WIDGET",t.CAMERA="RWE_CAMERA",t.ROOM_THUMBNAIL_CAMERA="RWE_ROOM_THUMBNAIL_CAMERA",t.ROOM_BACKGROUND_COLOR="RWE_ROOM_BACKGROUND_COLOR",t.CUSTOM_USER_NOTIFICATION="RWE_CUSTOM_USER_NOTIFICATION",t.FURNI_ACHIEVEMENT_RESOLUTION_ENGRAVING="RWE_FURNI_ACHIEVEMENT_RESOLUTION_ENGRAVING",t.FRIEND_FURNI_CONFIRM="RWE_FRIEND_FURNI_CONFIRM",t.FRIEND_FURNI_ENGRAVING="RWE_FRIEND_FURNI_ENGRAVING",t.HIGH_SCORE_DISPLAY="RWE_HIGH_SCORE_DISPLAY",t.INTERNAL_LINK="RWE_INTERNAL_LINK",t.CUSTOM_STACK_HEIGHT="RWE_CUSTOM_STACK_HEIGHT",t.YOUTUBE="RWE_YOUTUBE",t.RENTABLESPACE="RWE_RENTABLESPACE",t.VIMEO="RWE_VIMEO",t.ROOM_TOOLS="RWE_ROOM_TOOLS",t.EXTERNAL_IMAGE="RWE_EXTERNAL_IMAGE",t.WORD_QUIZZ="RWE_WORD_QUIZZ",t.UI_HELP_BUBBLE="RWE_UI_HELP_BUBBLE",t.ROOM_LINK="RWE_ROOM_LINK",t.CRAFTING="RWE_CRAFTING",t.ROOMGAME_CHECKERS="RWE_GAME_CHECKERS",t})()},fFOI:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._mode=0,this._weight=0,this._speed=0,this._distance=0,this._protection=0,!0}parse(t){return!!t&&(this._mode=t.readInt(),this._weight=t.readInt(),this._speed=t.readInt(),this._distance=t.readInt(),this._protection=t.readInt(),!0)}get mode(){return this._mode}get weight(){return this._weight}get speed(){return this._speed}get distance(){return this._distance}get protection(){return this._protection}}return t._Str_19408=0,t._Str_12787=1,t._Str_16907=0,t._Str_12581=1,t._Str_16484=2,t._Str_18404=0,t._Str_17874=1,t._Str_16469=2,t._Str_21099=0,t._Str_20763=1,t._Str_22060=2,t})()},fVO9:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("5+UO"),n=s("+kDp");let r=(()=>{class t{constructor(t){this._roomIndex=0,this._x=0,this._y=0,this._z=0,this._dir=0,this._name="",this._userType=0,this._sex="",this._figure="",this._custom="",this._activityPoints=0,this._webID=0,this._groupID="",this._groupStatus=0,this._groupName="",this._subType="",this._ownerId=0,this._ownerName="",this._rarityLevel=0,this._hasSaddle=!1,this._isRiding=!1,this._canBreed=!1,this._canHarvest=!1,this._canRevive=!1,this._hasBreedingPermission=!1,this._petLevel=0,this._petPosture="",this._botSkills=[],this._isModerator=!1,this._isReadOnly=!1,this._roomIndex=t}_Str_4710(){this._isReadOnly=!0}get roomIndex(){return this._roomIndex}get x(){return this._x}set x(t){this._isReadOnly||(this._x=t)}get y(){return this._y}set y(t){this._isReadOnly||(this._y=t)}get z(){return this._z}set z(t){this._isReadOnly||(this._z=t)}get dir(){return this._dir}set dir(t){this._isReadOnly||(this._dir=t)}get name(){return this._name}set name(t){this._isReadOnly||(this._name=t)}get userType(){return this._userType}set userType(t){this._isReadOnly||(this._userType=t)}get sex(){return this._sex}set sex(t){this._isReadOnly||(this._sex=t)}get figure(){return this._figure}set figure(t){this._isReadOnly||(this._figure=t)}get custom(){return this._custom}set custom(t){this._isReadOnly||(this._custom=t)}get activityPoints(){return this._activityPoints}set activityPoints(t){this._isReadOnly||(this._activityPoints=t)}get webID(){return this._webID}set webID(t){this._isReadOnly||(this._webID=t)}get groupID(){return this._groupID}set groupID(t){this._isReadOnly||(this._groupID=t)}get groupName(){return this._groupName}set groupName(t){this._isReadOnly||(this._groupName=t)}get groupStatus(){return this._groupStatus}set groupStatus(t){this._isReadOnly||(this._groupStatus=t)}get subType(){return this._subType}set subType(t){this._isReadOnly||(this._subType=t)}get ownerId(){return this._ownerId}set ownerId(t){this._isReadOnly||(this._ownerId=t)}get ownerName(){return this._ownerName}set ownerName(t){this._isReadOnly||(this._ownerName=t)}get rarityLevel(){return this._rarityLevel}set rarityLevel(t){this._isReadOnly||(this._rarityLevel=t)}get hasSaddle(){return this._hasSaddle}set hasSaddle(t){this._isReadOnly||(this._hasSaddle=t)}get isRiding(){return this._isRiding}set isRiding(t){this._isReadOnly||(this._isRiding=t)}get canBreed(){return this._canBreed}set canBreed(t){this._isReadOnly||(this._canBreed=t)}get canHarvest(){return this._canHarvest}set canHarvest(t){this._isReadOnly||(this._canHarvest=t)}get canRevive(){return this._canRevive}set canRevive(t){this._isReadOnly||(this._canRevive=t)}get hasBreedingPermission(){return this._hasBreedingPermission}set hasBreedingPermission(t){this._isReadOnly||(this._hasBreedingPermission=t)}get petLevel(){return this._petLevel}set petLevel(t){this._isReadOnly||(this._petLevel=t)}get petPosture(){return this._petPosture}set petPosture(t){this._isReadOnly||(this._petPosture=t)}get botSkills(){return this._botSkills}set botSkills(t){this._botSkills=t}get isModerator(){return this._isModerator}set isModerator(t){this._isReadOnly||(this._isModerator=t)}}return t.M="M",t.F="F",t})();class a{flush(){return this._users=[],!0}parse(t){if(!t)return!1;this._users=[];const e=t.readInt();let s=0;for(;s<e;){const e=t.readInt(),i=t.readString(),a=t.readString();let o=t.readString();const c=t.readInt(),h=t.readInt(),l=t.readInt(),u=parseFloat(t.readString()),_=t.readInt(),d=t.readInt(),g=new r(c);if(g.dir=_,g.name=i,g.custom=a,g.x=h,g.y=l,g.z=u,this._users.push(g),1===d){g.webID=e,g.userType=n.a.USER,g.sex=this.resolveSex(t.readString()),g.groupID=""+t.readInt(),g.groupStatus=t.readInt(),g.groupName=t.readString();const s=t.readString();""!==s&&(o=this.convertSwimFigure(s,o,g.sex)),g.figure=o,g.activityPoints=t.readInt(),g.isModerator=t.readBoolean()}else if(2===d)g.userType=n.a.PET,g.figure=o,g.webID=e,g.subType=t.readInt().toString(),g.ownerId=t.readInt(),g.ownerName=t.readString(),g.rarityLevel=t.readInt(),g.hasSaddle=t.readBoolean(),g.isRiding=t.readBoolean(),g.canBreed=t.readBoolean(),g.canHarvest=t.readBoolean(),g.canRevive=t.readBoolean(),g.hasBreedingPermission=t.readBoolean(),g.petLevel=t.readInt(),g.petPosture=t.readString();else if(3===d)g.userType=n.a.BOT,g.webID=-1*c,g.figure=-1===o.indexOf("/")?o:"hr-100-.hd-180-1.ch-876-66.lg-270-94.sh-300-64",g.sex=r.M;else if(4===d){g.userType=n.a.RENTABLE_BOT,g.webID=e,g.sex=this.resolveSex(t.readString()),g.figure=o,g.ownerId=t.readInt(),g.ownerName=t.readString();const s=t.readInt();if(s){const e=[];let i=0;for(;i<s;)e.push(t.readShort()),i++;g.botSkills=e}}s++}return!0}resolveSex(t){return"f"===t.substr(0,1).toLowerCase()?r.F:r.M}convertSwimFigure(t,e,s){const i=e.split(".");let n=1,r=1,a=1,o=0;for(;o<i.length;){const t=i[o].split("-");t.length>2&&"hd"===t[0]&&(n=parseInt(t[2])),o++}const c=["238,238,238","250,56,49","253,146,160","42,199,210","53,51,44","239,255,146","198,255,152","255,146,90","157,89,126","182,243,255","109,255,51","51,120,201","255,182,49","223,161,233","249,251,50","202,175,143","197,198,197","71,98,61","138,131,97","255,140,51","84,198,39","30,108,153","152,79,136","119,200,255","255,192,142","60,75,135","124,44,71","215,255,227","143,63,28","255,99,147","31,155,121","253,255,51"],h=t.split("=");if(h.length>1){const t=h[1].split("/");a="F"===s?10010:10011,r=1e4+c.indexOf(t[1])+1}return e+".bds-10001-"+n+".ss-"+a+"-"+r}get users(){return this._users}}class o extends i.a{constructor(t){super(t,a)}getParser(){return this.parser}}},feea:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("qg1l");class r{flush(){return this._items=null,!0}parse(t){this._items=new Map;let e=t.readInt();for(;e>0;){const s=new n.a(t);this._items.set(s.id,s),e--}return!0}get items(){return this._items}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"fsQ+":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i,n,r){this._data=[t,e,s,i,n,r.length,r]}getMessageArray(){return this._data}dispose(){}}},fuks:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},gEiT:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},gHKk:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},gLCd:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.NORMAL=0,t.GENERIC=1,t.BOT=2,t})()},gOUc:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._errorCode=0,this._userId=0,this._message=null,!0}parse(t){return!!t&&(this._errorCode=t.readInt(),this._userId=t.readInt(),this._message=t.readString(),!0)}get errorCode(){return this._errorCode}get userId(){return this._userId}get message(){return this._message}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},gegF:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},gnch:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},gnow:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s){this._data=[t+" "+e,s]}getMessageArray(){return this._data}dispose(){}}},h2l6:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},h5lc:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},hBKr:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("Fv14"),n=s("P7Cj");class r{constructor(t){this._badgeId="",this._level=1,this._base="",this._badgeId=t,this.parseText()}parseText(){let t=this._badgeId.length-1;for(;t>0&&this.isNumber(this._badgeId.charAt(t));)t--;this._base=this._badgeId.substr(0,t+1);const e=this._badgeId.substr(t+1,this._badgeId.length);e&&""!==e&&(this._level=Number.parseInt(e))}isNumber(t){const e=t.charCodeAt(0);return e>=48&&e<=57}get level(){return this._level}set level(t){this._level=Math.max(1,t)}get getBadgeId(){return this._base+this._level}get base(){return this._base}}var a=s("ry6F");class o extends i.a{constructor(){super(),this._definitions=new Map,this._parameters=new Map,this._romanNumerals=["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII","XIII","XIV","XV","XVI","XVII","XVIII","XIX","XX","XXI","XXII","XXIII","XXIV","XXV","XXVI","XXVII","XXVIII","XXIX","XXX"]}onInit(){this.loadLocalizationFromURL(n.a.instance.getConfiguration("external.texts.url"))}loadLocalizationFromURL(t){const e=new XMLHttpRequest;try{e.open("GET",t),e.onloadend=this.onLocalizationLoaded.bind(this),e.onerror=this.onLocalizationFailed.bind(this),e.send()}catch(s){this.logger.error(s)}}onLocalizationLoaded(t){t&&(this.parseLocalization(t.target.response),this.events&&this.events.dispatchEvent(new a.a(a.a.LOADED)))}onLocalizationFailed(t){this.events&&this.events.dispatchEvent(new a.a(a.a.FAILED))}parseLocalization(t){if(t){t=JSON.parse(t);for(const e in t)this._definitions.set(e,t[e])}}getRomanNumeral(t){return this._romanNumerals[Math.max(0,t-1)]}getBadgeBaseAndLevel(t){const e=new r(t);return e.level--,e.getBadgeId}getValue(t,e=!0){t.startsWith("${")&&(t=t.substr(2,t.length-3));let s=this._definitions.get(t)||null;if(s&&e){const e=this._parameters.get(t);if(e)for(const[t,i]of e)s=s.replace("%"+t+"%",i)}return s||t}getValueWithParameter(t,e,s){const i=this.getValue(t,!1),n=i.replace("%"+e+"%",s);if(i.startsWith("%{")){const t=new RegExp("%{"+e.toUpperCase()+"\\|([^|]*)\\|([^|]*)\\|([^|]*)}"),r=i.match(t);if(!r)return n;let a=-1,o=!1;switch(Number.parseInt(s)){case 0:a=1;break;case 1:a=2;break;default:case 2:a=3,o=!0}if(-1==a||void 0===r[a])return n;const c=r[a];if(c)return c.replace("%%",s)}return n}getValueWithParameters(t,e,s){let i=this.getValue(t,!1);for(let n=0;n<e.length;n++)i=i.replace("%"+e[n]+"%",s[n]);return i}setValue(t,e){this._definitions.set(t,e)}registerParameter(t,e,s){if(!t||0===t.length||!e||0===e.length)return;let i=this._parameters.get(t);i||(i=new Map,this._parameters.set(t,i)),i.set(e,s)}getBadgeName(t){const e=new r(t);return this._Str_2103(this.getExistingKey(["badge_name_"+t,"badge_name_"+e.base])).replace("%roman%",this.getRomanNumeral(e.level))}getBadgeDesc(t){return""}getExistingKey(t){for(const e of t){const t=this.getValue(e);if(t!=e)return t}return""}_Str_2103(t){return t.replace("${","$").replace("{","$").replace("}","$")}}},hFyr:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},hTzv:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._length=0,this._dictionary=new Map,this._array=[],this._keys=[]}get length(){return this._length}get disposed(){return!this._dictionary}dispose(){if(!this._dictionary){for(const t of this._dictionary.keys())this._dictionary.delete(t);this._dictionary=null}this._length=0,this._array=null,this._keys=null}reset(){for(const t of this._dictionary.keys())this._dictionary.delete(t);this._length=0,this._array=[],this._keys=[]}unshift(t,e){return null===this._dictionary.get(t)&&(this._dictionary.set(t,e),this._array.unshift(e),this._keys.unshift(t),this._length++,!0)}add(t,e){return void 0===this._dictionary.get(t)&&(this._dictionary.set(t,e),this._array[this._length]=e,this._keys[this._length]=t,this._length++,!0)}remove(t){const e=this._dictionary.get(t);if(!e)return null;const s=this._array.indexOf(e);return s>=0&&(this._array.splice(s,1),this._keys.splice(s,1),this._length--),this._dictionary.delete(t),e}getWithIndex(t){return t<0||t>=this._length?null:this._array[t]}getKey(t){return t<0||t>=this._length?null:this._keys[t]}getKeys(){return this._keys.slice()}hasKey(t){return this._keys.indexOf(t)>-1}getValue(t){return this._dictionary.get(t)}getValues(){return this._array.slice()}hasValue(t){return this._array.indexOf(t)>-1}indexOf(t){return this._array.indexOf(t)}concatenate(t){for(const e of t._keys)this.add(e,t.getValue(e))}clone(){const t=new i;return t.concatenate(this),t}}},hUfz:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},hXx8:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("Ns5P");let n=(()=>{class t extends i.a{constructor(e,s,i){super(t.RSUBE_BADGES,e),this._userId=0,this._badges=[],this._userId=s,this._badges=i}get userId(){return this._userId}get badges(){return this._badges}}return t.RSUBE_BADGES="RSUBE_BADGES",t})()},"i+XF":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._message=null,this._link=null,!0}parse(t){return!!t&&(this._message=t.readString(),this._link=t.readString(),!0)}get message(){return this._message}get link(){return this._link}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"i/ye":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._senderId=0,this._messageText=null,this._secondsSinceSent=0,this._extraData=null,!0}parse(t){return!!t&&(this._senderId=t.readInt(),this._messageText=t.readString(),this._secondsSinceSent=t.readInt(),t.bytesAvailable&&(this._extraData=t.readString()),!0)}get senderId(){return this._senderId}get messageText(){return this._messageText}get secondsSinceSent(){return this._secondsSinceSent}get extraData(){return this._extraData}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},i7vr:function(t,e,s){"use strict";s.d(e,"a",function(){return B});var i=s("Fv14"),n=s("3xex"),r=s("S+Gq"),a=s("zTkZ"),o=s("8Dbs"),c=s("3md2"),h=s("uMJ2"),l=s("/3sV"),u=s("itFj"),_=s("Aavw"),d=s("enVn"),g=s("dmof"),m=s("9L9n"),p=s("P7Cj"),f=s("GN+4"),E=s("cu+P");class S{constructor(t,e){this._image=t,this._placeHolder=e}get image(){return this._image}get placeHolder(){return this._placeHolder}}var v=s("JKJw");let b=(()=>{class t{constructor(t,e){this._assets=t,this._events=e,this._requestedBadges=new Map}dispose(){this._assets=null}getBadgeImage(t,e="normal_badge",s=!0){let i=this.getBadgeTexture(t,e);return!i&&s&&(i=this.getBadgePlaceholder()),i}getBadgeInfo(t){const e=this.getBadgeTexture(t);return e?new S(e,!1):new S(this.getBadgePlaceholder(),!0)}loadBadgeImage(t,e="normal_badge"){return this._assets.getTexture(t)?t:(this.getBadgeTexture(t,e),null)}getBadgeTexture(t,e="normal_badge"){const s=this._assets.getTexture(t);if(s)return s.clone();if(this._requestedBadges.get(t))return null;const i=this.getBadgeUrl(t,e);return i&&(this._requestedBadges.set(t,!0),this._assets.downloadAsset(i,e=>{if(e){const e=this._assets.getTexture(t);e&&this._events&&this._events.dispatchEvent(new v.a(t,e.clone()))}})),null}getBadgePlaceholder(){const t=this._assets.getTexture("loading_icon");return t?t.clone():null}getBadgeUrl(e,s="normal_badge"){let i=null;switch(s){case t.NORMAL_BADGE:i=p.a.instance.getConfiguration("badge.asset.url").replace("%badgename%",e);break;case t.GROUP_BADGE:i=p.a.instance.getConfiguration("badge.asset.group.url").replace("%badgedata%",e)}return i}}return t.GROUP_BADGE="group_badge",t.NORMAL_BADGE="normal_badge",t})();var I=s("dEqu"),R=s("3r1x");let T=(()=>{class t extends R.a{constructor(e){super(t.APUE_UPDATED),this._uiFlags=e}get _Str_8444(){return this._uiFlags}}return t.APUE_UPDATED="APUE_UPDATED",t})();var O=s("lvFG"),y=s("vuPI");class C{constructor(t,e,s,i,n,r,a,o,c,h,l,u,_,d,g,m,p,f,E,S,v,b,I,R,T,O,y,C,A){this._type=t,this._id=e,this._fullName=s,this._className=i,this._category=n,this._revision=o,this._tileSizeX=c,this._tileSizeY=h,this._tileSizeZ=l,this._colors=u,this._hasIndexedColor=_,this._colourIndex=d,this._localizedName=r,this._description=a,this._adUrl=g,this._purchaseOfferId=m,this._purchaseCouldBeUsedForBuyout=p,this._rentOfferId=f,this._rentCouldBeUsedForBuyout=E,this._customParams=v,this._specialType=b,this._availableForBuildersClub=S,this._canStandOn=I,this._canSitOn=R,this._canLayOn=T,this._excludedFromDynamic=O,this._furniLine=y,this._environment=C,this._rare=A}get type(){return this._type}get id(){return this._id}get className(){return this._className}set className(t){this._className=t}get fullName(){return this._fullName}get category(){return this._category}get hasIndexedColor(){return this._hasIndexedColor}get colorIndex(){return this._colourIndex}get revision(){return this._revision}get tileSizeX(){return this._tileSizeX}get tileSizeY(){return this._tileSizeY}get tileSizeZ(){return this._tileSizeZ}get colors(){return this._colors}get name(){return this._localizedName}get description(){return this._description}get adUrl(){return this._adUrl}get purchaseOfferId(){return this._purchaseOfferId}get customParams(){return this._customParams}get specialType(){return this._specialType}get rentOfferId(){return this._rentOfferId}get purchaseCouldBeUsedForBuyout(){return this._purchaseCouldBeUsedForBuyout}get rentCouldBeUsedForBuyout(){return this._rentCouldBeUsedForBuyout}get availableForBuildersClub(){return this._availableForBuildersClub}get canStandOn(){return this._canStandOn}get canSitOn(){return this._canSitOn}get canLayOn(){return this._canLayOn}get isExternalImage(){return!(-1===this._className.indexOf("external_image"))}get excludeDynamic(){return this._excludedFromDynamic}get furniLine(){return this._furniLine}get environment(){return this._environment}get rare(){return this._rare}}var A=s("z20u"),M=s("vzKh");let w=(()=>{class t extends y.a{constructor(t,e,s){super(),this._floorItems=t,this._wallItems=e,this._localization=s,this._nitroLogger=new M.a(this.constructor.name)}loadFurnitureData(t){t&&fetch(t).then(t=>t.json()).then(t=>this.onFurnitureDataLoaded(t)).catch(t=>this.onFurnitureDataError(t))}onFurnitureDataLoaded(e){e&&(void 0!==e.roomitemtypes&&void 0!==e.wallitemtypes||this._nitroLogger.error("There is an error with your furnidata JSON and it is preventing the client from connecting. You need to reconvert it with the node converter."),e.roomitemtypes&&this.parseFloorItems(e.roomitemtypes),e.wallitemtypes&&this.parseWallItems(e.wallitemtypes),this.dispatchEvent(new R.a(t.FURNITURE_DATA_READY)))}onFurnitureDataError(e){e&&(console.error(e),this.dispatchEvent(new R.a(t.FURNITURE_DATA_ERROR)))}parseFloorItems(t){if(t&&t.furnitype)for(const e of t.furnitype){if(!e)continue;const t=[];if(e.partcolors)for(const a of e.partcolors.color){let e=a;"#"===e.charAt(0)?(e=e.replace("#",""),t.push(parseInt(e,16))):t.push(parseInt(e,16))}const s=e.classname.split("*"),i=s[0],n=s.length>1?parseInt(s[1]):0,r=new C(A.a.FLOOR,e.id,e.classname,i,e.category,e.name,e.description,e.revision,e.xdim,e.ydim,0,t,s.length>1,n,e.adurl,e.offerid,e.buyout,e.rentofferid,e.rentbuyout,e.bc,e.customparams,e.specialtype,e.canstandon,e.cansiton,e.canlayon,e.excludeddynamic,e.furniline,e.environment,e.rare);this._floorItems.set(r.id,r),this.updateLocalizations(r)}}parseWallItems(t){if(t&&t.furnitype)for(const e of t.furnitype){if(!e)continue;const t=new C(A.a.WALL,e.id,e.classname,e.classname,e.category,e.name,e.description,e.revision,0,0,0,null,!1,0,e.adurl,e.offerid,e.buyout,e.rentofferid,e.rentbuyout,e.bc,null,e.specialtype,!1,!1,!1,e.excludeddynamic,e.furniline,e.environment,e.rare);this._wallItems.set(t.id,t),this.updateLocalizations(t)}}updateLocalizations(t){if(this._localization)switch(t.type){case A.a.FLOOR:return this._localization.setValue("roomItem.name."+t.id,t.name),void this._localization.setValue("roomItem.desc."+t.id,t.description);case A.a.WALL:return this._localization.setValue("wallItem.name."+t.id,t.name),void this._localization.setValue("wallItem.desc."+t.id,t.description)}}}return t.FURNITURE_DATA_READY="FDP_FURNITURE_DATA_READY",t.FURNITURE_DATA_ERROR="FDP_FURNITURE_DATA_ERROR",t})();var D=s("Eb1Y"),N=s("O/2Q"),U=s("oc9L"),x=s("iQVN"),L=s("7KS0"),P=s("Sfl4");class F{constructor(t){this._sessionDataManager=t,this._ignoredUsers=[]}init(){if(this._sessionDataManager&&this._sessionDataManager.communication){this._messages=[new D.a(this.onIgnoredUsersEvent.bind(this)),new N.a(this.onIgnoreResultEvent.bind(this))];for(const t of this._messages)this._sessionDataManager.communication.registerMessageEvent(t)}}dispose(){if(!this.disposed){if(this._messages&&this._messages.length){for(const t of this._messages)this._sessionDataManager.communication.removeMessageEvent(t);this._messages=null}this._sessionDataManager=null}}requestIgnoredUsers(){this._sessionDataManager.send(new U.a(this._sessionDataManager.userName))}onIgnoredUsersEvent(t){if(!t)return;const e=t.getParser();e&&(this._ignoredUsers=e.ignoredUsers)}onIgnoreResultEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=e.name;switch(e.result){case 0:return;case 1:return void this._Str_19721(s);case 2:return this._Str_19721(s),void this._ignoredUsers.shift();case 3:return void this._Str_23631(s)}}_Str_19721(t){this._ignoredUsers.indexOf(t)<0&&this._ignoredUsers.push(t)}_Str_23631(t){const e=this._ignoredUsers.indexOf(t);e>=0&&this._ignoredUsers.splice(e,1)}ignoreUserId(t){this._sessionDataManager.send(new L.a(t))}ignoreUser(t){this._sessionDataManager.send(new x.a(t))}unignoreUser(t){this._sessionDataManager.send(new P.a(t))}isIgnored(t){return this._ignoredUsers.indexOf(t)>=0}get disposed(){return!!this._sessionDataManager}}class k{constructor(t,e,s){this._type=t,this._name=e,this._description=s}get type(){return this._type}get name(){return this._name}get description(){return this._description}}let V=(()=>{class t extends y.a{constructor(t){super(),this._products=t}dispose(){this._products=null}loadProductData(t){t&&fetch(t).then(t=>t.json()).then(t=>this.onProductDataLoadedEvent(t)).catch(t=>this.onProductDataError(t))}onProductDataLoadedEvent(e){e&&(this.parseProducts(e.productdata),this.dispatchEvent(new R.a(t.PDP_PRODUCT_DATA_READY)))}onProductDataError(e){e&&this.dispatchEvent(new R.a(t.PDP_PRODUCT_DATA_FAILED))}parseProducts(t){if(t)for(const e of t.product)e&&this._products.set(e.code,new k(e.code,e.name,e.description))}}return t.PDP_PRODUCT_DATA_READY="PDP_PRODUCT_DATA_READY",t.PDP_PRODUCT_DATA_FAILED="PDP_PRODUCT_DATA_FAILED",t})();class B extends i.a{constructor(t){super(),this._communication=t,this.resetUserInfo(),this._ignoredUsersManager=new F(this),this._clubLevel=0,this._securityLevel=0,this._isAmbassador=!1,this._systemOpen=!1,this._systemShutdown=!1,this._isAuthenticHabbo=!1,this._isRoomCameraFollowDisabled=!1,this._chatStyle=0,this._uiFlags=0,this._floorItems=new Map,this._wallItems=new Map,this._products=new Map,this._furnitureData=null,this._furnitureReady=!1,this._productsReady=!1,this._furnitureListenersNotified=!1,this._pendingFurnitureListeners=[],this._pendingProductListeners=[],this._badgeImageManager=null,this.onFurnitureDataReadyEvent=this.onFurnitureDataReadyEvent.bind(this),this.onProductDataReadyEvent=this.onProductDataReadyEvent.bind(this),this.onNitroSettingsEvent=this.onNitroSettingsEvent.bind(this)}onInit(){this.loadFurnitureData(),this.loadProductData(),this.loadBadgeImageManager(),this._ignoredUsersManager&&this._ignoredUsersManager.init(),this._communication.registerMessageEvent(new c.a(this.onUserFigureEvent.bind(this))),this._communication.registerMessageEvent(new h.a(this.onUserInfoEvent.bind(this))),this._communication.registerMessageEvent(new o.a(this.onUserPermissionsEvent.bind(this))),this._communication.registerMessageEvent(new n.a(this.onAvailabilityStatusMessageEvent.bind(this))),this._communication.registerMessageEvent(new r.a(this.onChangeNameUpdateEvent.bind(this))),this._communication.registerMessageEvent(new l.a(this.onUserNameChangeMessageEvent.bind(this))),this._communication.registerMessageEvent(new a.a(this.onRoomModelNameEvent.bind(this))),this._communication.registerMessageEvent(new E.a(this.onInClientLinkEvent.bind(this))),p.a.instance.events.addEventListener(m.a.SETTINGS_UPDATED,this.onNitroSettingsEvent)}onDispose(){this.destroyFurnitureData(),this._ignoredUsersManager&&(this._ignoredUsersManager.dispose(),this._ignoredUsersManager=null),p.a.instance.events.removeEventListener(m.a.SETTINGS_UPDATED,this.onNitroSettingsEvent),super.onDispose()}resetUserInfo(){this._userId=0,this._name=null,this._figure=null,this._gender=null,this._realName=null,this._canChangeName=!1}loadFurnitureData(){this.destroyFurnitureData(),this._furnitureData=new w(this._floorItems,this._wallItems,p.a.instance.localization),this._furnitureData.addEventListener(w.FURNITURE_DATA_READY,this.onFurnitureDataReadyEvent),this._furnitureData.loadFurnitureData(p.a.instance.getConfiguration("furnidata.url"))}loadProductData(){this.destroyProductData(),this._productData=new V(this._products),this._productData.addEventListener(V.PDP_PRODUCT_DATA_READY,this.onProductDataReadyEvent),this._productData.loadProductData(p.a.instance.getConfiguration("productdata.url"))}loadBadgeImageManager(){this._badgeImageManager||(this._badgeImageManager=new b(p.a.instance.core.asset,this.events))}hasProductData(t){return!!this._productsReady||(t&&-1===this._pendingProductListeners.indexOf(t)&&this._pendingProductListeners.push(t),!1)}getAllFurnitureData(t){if(!this._furnitureReady)return-1===this._pendingFurnitureListeners.indexOf(t)&&this._pendingFurnitureListeners.push(t),null;const e=[];for(const s of this._floorItems.values())s&&e.push(s);for(const s of this._wallItems.values())s&&e.push(s);return e&&e.length?e:null}removePendingFurniDataListener(t){if(!this._pendingFurnitureListeners)return;const e=this._pendingFurnitureListeners.indexOf(t);-1!==e&&this._pendingFurnitureListeners.splice(e,1)}onUserFigureEvent(t){t&&t.connection&&(this._figure=t.getParser().figure,this._gender=t.getParser().gender,f.a.updateFigure(this._figure))}onUserInfoEvent(t){if(!t||!t.connection)return;this.resetUserInfo();const e=t.getParser().userInfo;e&&(this._userId=e.userId,this._name=e.username,this._figure=e.figure,this._gender=e.gender,this._realName=e.realName,this._respectsReceived=e.respectsReceived,this._respectsLeft=e.respectsRemaining,this._respectsPetLeft=e.respectsPetRemaining,this._canChangeName=e.canChangeName,this._ignoredUsersManager&&this._ignoredUsersManager.requestIgnoredUsers())}onUserPermissionsEvent(t){t&&t.connection&&(this._clubLevel=t.getParser().clubLevel,this._securityLevel=t.getParser().securityLevel,this._isAmbassador=t.getParser().isAmbassador)}onAvailabilityStatusMessageEvent(t){if(!t||!t.connection)return;const e=t.getParser();e&&(this._systemOpen=e.isOpen,this._systemShutdown=e.onShutdown,this._isAuthenticHabbo=e.isAuthenticUser)}onChangeNameUpdateEvent(t){if(!t||!t.connection)return;const e=t.getParser();e&&e.resultCode===r.a._Str_5797&&(this._canChangeName=!1,this.events.dispatchEvent(new O.a(e.name)))}onUserNameChangeMessageEvent(t){if(!t||!t.connection)return;const e=t.getParser();e&&e.webId===this.userId&&(this._name=e.newName,this._canChangeName=!1,this.events.dispatchEvent(new O.a(this._name)))}onRoomModelNameEvent(t){if(!t)return;const e=t.getParser();e&&f.a.roomVisited(e.roomId)}onFurnitureDataReadyEvent(t){if(this._furnitureData.removeEventListener(w.FURNITURE_DATA_READY,this.onFurnitureDataReadyEvent),this._furnitureReady=!0,!this._furnitureListenersNotified&&(this._furnitureListenersNotified=!0,this._pendingFurnitureListeners&&this._pendingFurnitureListeners.length))for(const e of this._pendingFurnitureListeners)e&&e.loadFurnitureData();this._pendingProductListeners=[]}onProductDataReadyEvent(t){this._productData.removeEventListener(V.PDP_PRODUCT_DATA_READY,this.onProductDataReadyEvent),this._productsReady=!0;for(const e of this._pendingProductListeners)e&&e.loadProductData();this._pendingProductListeners=[]}onInClientLinkEvent(t){if(!t)return;const e=t.getParser();e&&p.a.instance.createLinkEvent(e.link)}onNitroSettingsEvent(t){this._isRoomCameraFollowDisabled=t.cameraFollow,this._chatStyle=t.chatType,this._uiFlags=t.flags,this.events.dispatchEvent(new T(this._uiFlags))}destroyFurnitureData(){this._furnitureData&&(this._furnitureData.dispose(),this._furnitureData=null)}destroyProductData(){this._productData&&(this._productData.dispose(),this._productData=null)}getFloorItemData(t){return this._floorItems.get(t)||null}getFloorItemDataByName(t){if(!t||!this._floorItems||!this._floorItems.size)return null;for(const e of this._floorItems.values())if(e&&e.className===t)return e}getWallItemData(t){return this._wallItems.get(t)||null}getWallItemDataByName(t){if(!t||!this._wallItems||!this._wallItems.size)return null;for(const e of this._wallItems.values())if(e&&e.className===t)return e}getProductData(t){return this._productsReady||this.loadProductData(),this._products.get(t)}getBadgeUrl(t){return this._badgeImageManager.getBadgeUrl(t)}getGroupBadgeUrl(t){return this._badgeImageManager.getBadgeUrl(t,b.GROUP_BADGE)}getBadgeImage(t){return this._badgeImageManager.getBadgeImage(t)}getGroupBadgeImage(t){return this._badgeImageManager.getBadgeImage(t,b.GROUP_BADGE)}loadBadgeImage(t){return this._badgeImageManager.loadBadgeImage(t)}loadGroupBadgeImage(t){return this._badgeImageManager.loadBadgeImage(t,b.GROUP_BADGE)}hasSecurity(t){return this._securityLevel>=t}giveRespect(t){t<0||this._respectsLeft<=0||(this.send(new g.a(t)),this._respectsLeft--)}givePetRespect(t){t<0||this._respectsPetLeft<=0||(this.send(new u.a(t)),this._respectsPetLeft--)}sendSpecialCommandMessage(t,e=0){this.send(new _.a(t))}sendChatStyleUpdate(t){this._chatStyle=t,this.send(new d.a(t))}ignoreUser(t){this._ignoredUsersManager&&this._ignoredUsersManager.ignoreUser(t)}unignoreUser(t){this._ignoredUsersManager&&this._ignoredUsersManager.unignoreUser(t)}isUserIgnored(t){return this._ignoredUsersManager&&this._ignoredUsersManager.isIgnored(t)}send(t){this._communication.connection.send(t)}get communication(){return this._communication}get userId(){return this._userId}get userName(){return this._name}get figure(){return this._figure}get gender(){return this._gender}get realName(){return this._realName}get ignoredUsersManager(){return this._ignoredUsersManager}get respectsReceived(){return this._respectsReceived}get respectsLeft(){return this._respectsLeft}get respectsPetLeft(){return this._respectsPetLeft}get canChangeName(){return this._canChangeName}get clubLevel(){return this._clubLevel}get securityLevel(){return this._securityLevel}get isAmbassador(){return this._isAmbassador}get isSystemOpen(){return this._systemOpen}get isSystemShutdown(){return this._systemShutdown}get isAuthenticHabbo(){return this._isAuthenticHabbo}get isModerator(){return this._securityLevel>=I.a.MODERATOR}get isGodMode(){return this.securityLevel>=I.a.MODERATOR}get isCameraFollowDisabled(){return this._isRoomCameraFollowDisabled}get chatStyle(){return this._chatStyle}get uiFlags(){return this._uiFlags}}},iAsj:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("jBuC");class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._itemId=0,this._spriteId=0,this._spriteName=null,this._x=0,this._y=0,this._direction=0,this._z=0,this._stackHeight=0,this._extra=0,this._data=null,this._state=0,this._expires=0,this._usagePolicy=0,this._userId=0,this._username=null,!0}parse(t){return!!t&&(this._itemId=t.readInt(),this._spriteId=t.readInt(),this._x=t.readInt(),this._y=t.readInt(),this._direction=t.readInt()%8*45,this._z=parseFloat(t.readString()),this._stackHeight=parseFloat(t.readString()),this._extra=t.readInt(),this._data=i.a.parseObjectData(t),this._state=parseFloat(this._data&&this._data.getLegacyString())||0,this._expires=t.readInt(),this._usagePolicy=t.readInt(),this._userId=t.readInt(),this._username=null,this._spriteId<0&&(this._spriteName=t.readString()),!0)}get itemId(){return this._itemId}get spriteId(){return this._spriteId}get x(){return this._x}get y(){return this._y}get direction(){return this._direction}get z(){return isNaN(this._z)?0:this._z}get stackHeight(){return isNaN(this._stackHeight)?0:this._stackHeight}get extra(){return this._extra}get data(){return this._data}get state(){return this._state}get expires(){return this._expires}get usagePolicy(){return this._usagePolicy}get userId(){return this._userId}get username(){return this._username}set username(t){this._username=t}get spriteName(){return this._spriteName}set spriteName(t){this._spriteName=t}}},iGiK:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t,e,s,i,n){this._timestamp=t,this._habboId=e,this._username=s,this._message=i,this._boolean=n}get timestamp(){return this._timestamp}get userId(){return this._habboId}get userName(){return this._username}get message(){return this._message}}class r{constructor(){this._chatlogs=[]}flush(){return this._id=null,this._name=null,this._chatlogCount=0,this._chatlogs=[],!0}parse(t){if(!t)return!1;t.readByte(),t.readShort(),t.readString(),t.readByte(),this._name=t.readString(),t.readString(),t.readByte(),this._id=t.readInt(),this._chatlogCount=t.readShort();for(let e=0;e<this._chatlogCount;e++){const e=t.readString(),s=t.readInt(),i=t.readString(),r=t.readString(),a=t.readBoolean();this._chatlogs.push(new n(e,s,i,r,a))}return!0}get id(){return this._id}get name(){return this._name}get chatlogs(){return this._chatlogs}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},iK4q:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{flush(){return!0}parse(t){return!!t&&(this._reason=t.readInt(),this._Str_10068=t.readString(),!0)}get reason(){return this._reason}get _Str_17035(){return this._Str_10068}}return t._Str_18150=7,t._Str_18383=8,t})()},iQVN:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},ipbj:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{get furniId(){return this._furniId}flush(){return this._furniId=-1,!0}parse(t){return this._furniId=t.readInt(),!0}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},itFj:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},iv6j:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},j7DG:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{constructor(){this._productName="",this._productDescription=""}flush(){return this._productDescription="",this._productName="",!0}parse(t){return!!t&&(this._productDescription=t.readString(),this._productName=t.readString(),!0)}get productName(){return this._productName}get productDescription(){return this._productDescription}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},j7GY:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},j8oG:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e=0,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},jBuC:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("2L69");class n{flush(){return this._itemId=0,this._data=null,!0}parse(t){return!!t&&(this._itemId=parseInt(t.readString()),this._data=n.parseObjectData(t),!0)}static parseObjectData(t){if(!t)return null;const e=i.a.getData(t.readInt());return e?(e.parseWrapper(t),e):null}get furnitureId(){return this._itemId}get objectData(){return this._data}}},jFxZ:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO"),n=s("c746");class r extends i.a{constructor(t){super(t,n.a)}getParser(){return this.parser}}},jNJ0:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},jdh6:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("5+UO");class n{constructor(t,e){this._action=t,this._value=e}get action(){return this._action}get value(){return this._value}}class r{constructor(t,e,s,i,n,r,a,o=0,c=0,h=0,l,u,_){this._id=t,this._x=e,this._y=s,this._z=i,this._height=n,this._headDirection=r,this._direction=a,this._targetX=o,this._targetY=c,this._targetZ=h,this._didMove=l,this._canStandUp=u,this._actions=_||[]}get id(){return this._id}get x(){return this._x}get y(){return this._y}get z(){return this._z}get height(){return this._height}get headDirection(){return this._headDirection}get direction(){return this._direction}get targetX(){return this._targetX}get targetY(){return this._targetY}get targetZ(){return this._targetZ}get didMove(){return this._didMove}get canStandUp(){return this._canStandUp}get actions(){return this._actions}}class a{flush(){return this._statuses=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;){const s=this.parseStatus(t);s?(this._statuses.push(s),e--):e--}return!0}parseStatus(t){if(!t)return null;const e=t.readInt(),s=t.readInt(),i=t.readInt(),a=parseFloat(t.readString()),o=t.readInt()%8*45,c=t.readInt()%8*45,h=t.readString();let l=0,u=0,_=0,d=0,g=!1,m=!1;if(h){const t=h.split("/"),p=t.length,f=[];if(p)for(let e=0;e<p;e++){const s=t[e];if(!s)continue;const[i,r,a]=s.split(" ");if(i&&r){switch(i){case"mv":[l,u,_]=r.split(",").map(t=>parseFloat(t)),m=!0;break;case"sit":void 0!==a&&(g="1"===r),d=parseFloat(r);break;case"lay":d=parseFloat(r)}f.push(new n(i,r))}}this._statuses.push(new r(e,s,i,a,d,o,c,l,u,_,m,g,f))}}get statuses(){return this._statuses}}class o extends i.a{constructor(t){super(t,a)}getParser(){return this.parser}}},jdue:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},jfHZ:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){if(!t)throw new Error("invalid_wrapper");this._id=t.readInt(),this._name=t.readString()}get id(){return this._id}get name(){return this._name}}},"jgc/":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},jzpY:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._unitId=null,this._figure=null,this._gender="M",this._motto=null,this._achievementScore=0,!0}parse(t){return!!t&&(this._unitId=t.readInt(),this._figure=t.readString(),this._gender=t.readString().toLocaleUpperCase(),this._motto=t.readString(),this._achievementScore=t.readInt(),!0)}get unitId(){return this._unitId}get figure(){return this._figure}get gender(){return this._gender}get motto(){return this._motto}get achievementScore(){return this._achievementScore}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},k0R1:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.CATALOG="catalog",t.INVENTORY="inventory",t})()},kRfe:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},kXXe:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{}},kZQz:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._errorCode=0,!0}parse(t){return!!t&&(this._errorCode=t.readInt(),!0)}get errorCode(){return this._errorCode}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},kgJd:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._Str_2625="",this._Str_2825=0,this._Str_2570="",!0}parse(t){return!!t&&(this._Str_2625=t.readString(),this._Str_2825=t.readInt(),this._Str_2570=t.readString(),this._Str_3054=t.readInt(),this._Str_3970=t.readString(),this._Str_3224=t.readBoolean(),this._Str_10229=t.readString(),!0)}get _Str_2887(){return this._Str_2625}get classId(){return this._Str_2825}get productCode(){return this._Str_2570}get placedItemId(){return this._Str_3054}get placedItemType(){return this._Str_3970}get _Str_4057(){return this._Str_3224}get petFigureString(){return this._Str_10229}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},kiCC:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},kiYJ:function(t,e,s){"use strict";s.d(e,"a",function(){return c});var i=s("IqKQ"),n=s("auym"),r=s("Xr/m"),a=s("vzKh"),o=s("awbM");class c extends r.a{constructor(){super(),this._logger=new a.a(this.constructor.name),this._textures=new Map,this._collections=new Map,this._pendingUrls=new Map}static removeFileExtension(t){return t.substring(0,t.lastIndexOf("."))||t}getTexture(t){return t&&this._textures.get(t)||null}setTexture(t,e){t&&e&&this._textures.set(t,e)}getAsset(t){if(!t)return null;for(const e of this._collections.values()){if(!e)continue;const s=e.getAsset(t);if(s)return s}return null}getCollection(t){return t&&this._collections.get(t)||null}createCollection(t,e){if(!t)return null;const s=new n.a(t,e);if(s){for(const[t,e]of s.textures.entries())this.setTexture(t,e);this._collections.set(s.name,s)}}downloadAsset(t,e){return this.downloadAssets([t],e)}downloadAssets(t,e){if(!t||!t.length)return e(!0),!0;const s=t.length;let n=0;const r=(t,i,r)=>{if(t&&t.destroy(),!r)return this._logger.error("Failed to download asset: "+i.url),void e(!1);n++,n===s&&e(!0)};for(const a of t){if(!a)continue;const t=new i.Loader,e={crossOrigin:!1,xhrType:a.endsWith(".nitro")?"arraybuffer":"json"};t.use((e,s)=>this.assetLoader(t,e,s,r)).add(a,e).load()}return!0}assetLoader(t,e,s,n){if(!e||e.error)return e&&e.texture&&e.texture.destroy(!0),void n(t,e,!1);if("nitro"===e.extension){const s=new o.a(e.data),r=s.jsonFile;if(!r||!r.type)return void n(t,e,!1);if(r.spritesheet&&Object.keys(r.spritesheet).length){const a=s.baseTexture;if(!a)return void n(t,e,!1);if(a.valid){const s=new i.Spritesheet(a,r.spritesheet);s.parse(i=>{this.createCollection(r,s),n(t,e,!0)})}else a.once("loaded",()=>{a.removeAllListeners();const s=new i.Spritesheet(a,r.spritesheet);s.parse(i=>{this.createCollection(r,s),n(t,e,!0)})}),a.once("error",()=>{a.removeAllListeners(),n(t,e,!1)});return}this.createCollection(r,null),n(t,e,!0)}else if(e.type===i.LoaderResource.TYPE.JSON){const s=e.data;if(!s||!s.type)return void n(t,e,!1);if(s.spritesheet&&Object.keys(s.spritesheet).length){const r=s.spritesheet.meta&&s.spritesheet.meta.image;if(!r||!r.length)return void n(t,e,!1);const a=e.url.substring(0,e.url.lastIndexOf("/")+1)+r,o=i.BaseTexture.from(a);if(o.valid){const r=new i.Spritesheet(o,s.spritesheet);r.parse(i=>{this.createCollection(s,r),n(t,e,!0)})}else o.once("loaded",()=>{o.removeAllListeners();const r=new i.Spritesheet(o,s.spritesheet);r.parse(i=>{this.createCollection(s,r),n(t,e,!0)})}),o.once("error",()=>{o.removeAllListeners(),n(t,e,!1)});return}return this.createCollection(s,null),void n(t,e,!0)}e.type!==i.LoaderResource.TYPE.IMAGE||(e.texture.valid?(this.setTexture(e.name,e.texture),n(t,e,!0)):n(t,e,!1))}get collections(){return this._collections}}},lDeN:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._errorCode=-1,!0}parse(t){return!!t&&(this._errorCode=t.readInt(),!0)}get errorCode(){return this._errorCode}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},lMbP:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},lN2i:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO"),n=s("iK4q");class r extends i.a{constructor(t){super(t,n.a)}getParser(){return this.parser}}},lVe0:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._position=0,this._dataView=new DataView(t)}readByte(){const t=this._dataView.getInt8(this._position);return this._position++,t}readBytes(t){const e=new i(this._dataView.buffer.slice(this._position,this._position+t));return this._position+=t,e}readShort(){const t=this._dataView.getInt16(this._position);return this._position+=2,t}readInt(){const t=this._dataView.getInt32(this._position);return this._position+=4,t}remaining(){return this._dataView.byteLength-this._position}toString(t){return(new TextDecoder).decode(this._dataView.buffer)}toArrayBuffer(){return this._dataView.buffer}}},lbEV:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._floorType=null,this._wallType=null,this._landscapeType=null,this._landscapeAnimation=null,!0}parse(t){if(!t)return!1;const e=t.readString(),s=t.readString();switch(e){case"floor":this._floorType=s;break;case"wallpaper":this._wallType=s;break;case"landscape":this._landscapeType=s;break;case"landscapeanim":this._landscapeAnimation=s}return!0}get floorType(){return this._floorType}get wallType(){return this._wallType}get landscapeType(){return this._landscapeType}get landscapeAnimation(){return this._landscapeAnimation}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},liWC:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._instantlyRefreshCatalogue=!1,this._newFurniDataHash=null,!0}parse(t){return!!t&&(this._instantlyRefreshCatalogue=t.readBoolean(),t.bytesAvailable&&(this._newFurniDataHash=t.readString()),!0)}get instantlyRefreshCatalogue(){return this._instantlyRefreshCatalogue}get newFurniDataHash(){return this._newFurniDataHash}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},lrbo:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},lsmK:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},lulp:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},lvFG:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("3r1x");let n=(()=>{class t extends i.a{constructor(e){super(t.UNUE_NAME_UPDATED),this._name=e}get name(){return this._name}}return t.UNUE_NAME_UPDATED="unue_name_updated",t})()},m7hj:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("bakE");class r{flush(){return this._definition=null,!0}parse(t){return!!t&&(this._definition=new n.a(t),!0)}get definition(){return this._definition}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},mEdh:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},mGgu:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._unitId=null,this._danceId=0,!0}parse(t){return!!t&&(this._unitId=t.readInt(),this._danceId=t.readInt(),!0)}get unitId(){return this._unitId}get danceId(){return this._danceId}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},mHKk:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},mP1c:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.HOTEL_VIEW="hotel_view",t.HOME_ROOM="home_room",t.NAVIGATOR="navigator",t.CATALOG="catalog",t.INVENTORY="inventory",t.ME_MENU="me_menu",t.FRIEND_LIST="friendlist",t})()},mQ1q:function(t,e,s){"use strict";s.d(e,"a",function(){return r});class i{flush(){return this._x=0,this._y=0,this._direction=0,!0}parse(t){return!!t&&(this._x=t.readInt(),this._y=t.readInt(),this._direction=t.readInt(),!0)}get x(){return this._x}get y(){return this._y}get direction(){return this._direction}}var n=s("5+UO");class r extends n.a{constructor(t){super(t,i)}getParser(){return this.parser}}},"mkz/":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("DFHD");class n{constructor(t,e,s,i){this._leftSideLoc=0,this._rightSideLoc=0,this._leftSideLength=0,this._rightSideLength=0,this._leftSideLoc=t,this._rightSideLoc=e,this._leftSideLength=s,this._rightSideLength=i}get _Str_5120(){return this._leftSideLoc}get _Str_4659(){return this._rightSideLoc}get _Str_9124(){return this._leftSideLength}get _Str_12156(){return this._rightSideLength}}let r=(()=>{class t{constructor(t,e,s,n,r){let a,o,c,h,l,u,_,d;if(this._type=0,this._loc=null,this._leftSide=null,this._rightSide=null,this._normal=null,this._normalDirection=null,this._secondaryNormals=[],this._masks=[],this._loc=new i.a,this._loc.assign(e),this._leftSide=new i.a,this._leftSide.assign(s),this._rightSide=new i.a,this._rightSide.assign(n),this._type=t,null!=s&&null!=n&&(this._normal=i.a.crossProduct(s,n),a=0,o=0,c=0,h=0,l=0,0!=this.normal.x||0!=this.normal.y?(h=this.normal.x,l=this.normal.y,a=360+Math.atan2(l,h)/Math.PI*180,a>=360&&(a-=360),h=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y),l=this.normal.z,o=360+Math.atan2(l,h)/Math.PI*180,o>=360&&(o-=360)):o=this.normal.z<0?90:270,this._normalDirection=new i.a(a,o,0)),null!=r&&r.length>0)for(u=0;u<r.length;)_=r[u],null!=_&&_.length>0&&(d=new i.a,d.assign(_),d.multiply(1/d.length),this._secondaryNormals.push(d)),u++}get type(){return this._type}get loc(){return this._loc}get _Str_5424(){return this._leftSide}get _Str_4968(){return this._rightSide}get normal(){return this._normal}get _Str_25207(){return this._normalDirection}get _Str_20277(){return this._secondaryNormals.length}get _Str_6845(){return this._masks.length}_Str_22585(t){if(t<0||t>=this._Str_20277)return null;const e=new i.a;return e.assign(this._secondaryNormals[t]),e}addMask(t,e,s,i){const r=new n(t,e,s,i);this._masks.push(r)}_Str_8361(t){return t<0||t>=this._Str_6845?null:this._masks[t]}_Str_25133(t){const e=this._Str_8361(t);return null!=e?e._Str_5120:-1}_Str_23609(t){const e=this._Str_8361(t);return null!=e?e._Str_4659:-1}_Str_25097(t){const e=this._Str_8361(t);return null!=e?e._Str_9124:-1}_Str_25617(t){const e=this._Str_8361(t);return null!=e?e._Str_12156:-1}}return t.PLANE_UNDEFINED=0,t.PLANE_FLOOR=1,t.PLANE_WALL=2,t.PLANE_LANDSCAPE=3,t.PLANE_BILLBOARD=4,t})()},n7CB:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._unitId=null,!0}parse(t){return!!t&&(this._unitId=parseInt(t.readString()),!0)}get unitId(){return this._unitId}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},nL9H:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._stuffIds=[],this._intParams=[],this._stuffTypeSelectionEnabled=t.readBoolean(),this._furniLimit=t.readInt();let e=t.readInt();for(;e>0;)this._stuffIds.push(t.readInt()),e--;for(this._stuffTypeId=t.readInt(),this._id=t.readInt(),this._stringParam=t.readString(),e=t.readInt();e>0;)this._intParams.push(t.readInt()),e--;this._stuffTypeSelectionCode=t.readInt()}getBoolean(t){return 1===this._intParams[t]}get _Str_21824(){return this._stuffTypeSelectionEnabled}get _Str_6040(){return this._stuffTypeSelectionCode}set _Str_6040(t){this._stuffTypeSelectionCode=t}get maximumItemSelectionCount(){return this._furniLimit}get selectedItems(){return this._stuffIds}get id(){return this._id}get stringData(){return this._stringParam}get intData(){return this._intParams}get code(){return 0}get spriteId(){return this._stuffTypeId}}},nMRu:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},nQsh:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},ndLt:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){if(!t)throw new Error("invalid_wrapper");this._id=t.readInt(),this._name=t.readString(),this._gender=t.readInt(),this._online=t.readBoolean(),this._followingAllowed=t.readBoolean(),this._figure=t.readString(),this._categoryId=t.readInt(),this._motto=t.readString(),this._realName=t.readString(),this._lastAccess=t.readString(),this._persistedMessageUser=t.readBoolean(),this._vipMember=t.readBoolean(),this._pocketHabboUser=t.readBoolean(),this._relationshipStatus=t.readShort()}get id(){return this._id}get name(){return this._name}get gender(){return this._gender}get online(){return this._online}get followingAllowed(){return this._followingAllowed}get figure(){return this._figure}get categoryId(){return this._categoryId}get motto(){return this._motto}get lastAccess(){return this._lastAccess}get realName(){return this._realName}get persistedMessageUser(){return this._persistedMessageUser}get vipMember(){return this._vipMember}get pocketHabboUser(){return this._pocketHabboUser}get relationshipStatus(){return this._relationshipStatus}}},nlEz:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"o/0e":function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._roomId=0,this._roomName=null,this._ownerId=0,this._ownerName=null,this._doorMode=0,this._userCount=0,this._maxUserCount=0,this._description=null,this._tradeMode=2,this._score=0,this._ranking=0,this._categoryId=0,this._totalStars=0,this._groupId=0,this._groupName=null,this._groupBadge=null,this._tags=[],this._bitMask=0,this._thumbnail=null,this._allowPets=!1,this._showOwner=!0,this._displayAd=!1,this._adName=null,this._adDescription=null,this._adExpiresIn=0,this._allInRoomMuted=!1,this._canMute=!1,this._roomPicker=!1,this._officialRoomPicRef=null,!0}parse(t){return!!t&&(this._roomId=t.readInt(),this._roomName=t.readString(),this._ownerId=t.readInt(),this._ownerName=t.readString(),this._doorMode=t.readInt(),this._userCount=t.readInt(),this._maxUserCount=t.readInt(),this._description=t.readString(),this._tradeMode=t.readInt(),this._score=t.readInt(),this._ranking=t.readInt(),this._categoryId=t.readInt(),this.parseTags(t),this.parseBitMask(t),!0)}parseTags(t){if(!t)return!1;this._tags=[];let e=t.readInt();for(;e>0;)this._tags.push(t.readString()),e--;return!0}parseBitMask(e){return!!e&&(this._bitMask=e.readInt(),this._bitMask&t.THUMBNAIL_BITMASK&&(this._officialRoomPicRef=e.readString()),this._bitMask&t.GROUPDATA_BITMASK&&(this._groupId=e.readInt(),this._groupName=e.readString(),this._groupBadge=e.readString()),this._bitMask&t.ROOMAD_BITMASK&&(this._adName=e.readString(),this._adDescription=e.readString(),this._adExpiresIn=e.readInt()),this._showOwner=(this._bitMask&t.SHOWOWNER_BITMASK)>0,this._allowPets=(this._bitMask&t.ALLOW_PETS_BITMASK)>0,this._displayAd=(this._bitMask&t.DISPLAY_ROOMAD_BITMASK)>0,this._thumbnail=null,!0)}get roomId(){return this._roomId}get roomName(){return this._roomName}set roomName(t){this._roomName=t}get ownerId(){return this._ownerId}get ownerName(){return this._ownerName}get doorMode(){return this._doorMode}get userCount(){return this._userCount}get maxUserCount(){return this._maxUserCount}get description(){return this._description}get tradeMode(){return this._tradeMode}get score(){return this._score}get ranking(){return this._ranking}get categoryId(){return this._categoryId}get tags(){return this._tags}get officialRoomPicRef(){return this._officialRoomPicRef}get habboGroupId(){return this._groupId}get groupName(){return this._groupName}get groupBadgeCode(){return this._groupBadge}get roomAdName(){return this._adName}get roomAdDescription(){return this._adDescription}get roomAdExpiresInMin(){return this._adExpiresIn}get showOwner(){return this._showOwner}get allowPets(){return this._allowPets}get displayRoomEntryAd(){return this._displayAd}get roomPicker(){return this._roomPicker}set roomPicker(t){this._roomPicker=t}get canMute(){return this._canMute}set canMute(t){this._canMute=t}get allInRoomMuted(){return this._allInRoomMuted}set allInRoomMuted(t){this._allInRoomMuted=t}}return t.THUMBNAIL_BITMASK=1,t.GROUPDATA_BITMASK=2,t.ROOMAD_BITMASK=4,t.SHOWOWNER_BITMASK=8,t.ALLOW_PETS_BITMASK=16,t.DISPLAY_ROOMAD_BITMASK=32,t.OPEN_STATE=0,t.DOORBELL_STATE=1,t.PASSWORD_STATE=2,t.INVISIBLE_STATE=4,t})()},o1ML:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},o4d6:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e.length,...e]}getMessageArray(){return this._data}dispose(){}}},o4p4:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},oHxB:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._id=-1,this._name=null,this._visible=!1,this._automatic=!1,this._automaticCategoryKey=null,this._globalCategoryKey=null,this._staffOnly=!1,!0}parse(t){return!!t&&(this._id=t.readInt(),this._name=t.readString(),this._visible=t.readBoolean(),this._automatic=t.readBoolean(),this._automaticCategoryKey=t.readString(),this._globalCategoryKey=t.readString(),this._staffOnly=t.readBoolean(),!0)}get id(){return this._id}get name(){return this._name}get visible(){return this._visible}get automatic(){return this._automatic}get automaticCategoryKey(){return this._automaticCategoryKey}get globalCategoryKey(){return this._globalCategoryKey}get staffOnly(){return this._staffOnly}}class r{flush(){return this._categories=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._categories.push(new n(t)),e--;return!0}get categories(){return this._categories}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},oKt9:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO"),n=s("Fwdp");class r extends i.a{constructor(t){super(t,n.a)}getParser(){return this.parser}}},oc9L:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"oe6/":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},owLk:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t){this._Str_19116="",this._Str_20729=0,this._userId=t.readInt(),this._userName=t.readString(),this._figure=t.readString(),this._Str_19258=t.readInt(),this._Str_20876=t.readInt(),this._online=t.readBoolean(),this._Str_21621=t.readInt(),this._Str_20013=t.readInt(),this._Str_20917=t.readInt(),this._Str_20349=t.readInt(),this._Str_21386=t.readInt(),this._Str_20848=t.readString(),this._Str_21819=t.readString(),this._Str_20982=t.readInt(),this._Str_19460=t.readInt(),this._Str_22254=t.readString(),this._Str_20625=t.readString(),t.bytesAvailable&&(this._Str_19116=t.readString(),this._Str_20729=t.readInt())}get userId(){return this._userId}get userName(){return this._userName}get figure(){return this._figure}get _Str_24334(){return this._Str_19258}get _Str_23276(){return this._Str_20876}get online(){return this._online}get _Str_24656(){return this._Str_21621}get _Str_22987(){return this._Str_20013}get _Str_16987(){return this._Str_20917}get _Str_20373(){return this._Str_20349}get _Str_24526(){return this._Str_21386}get _Str_23969(){return this._Str_20848}get _Str_22786(){return this._Str_21819}get _Str_25657(){return this._Str_20982}get _Str_22700(){return this._Str_19460}get _Str_20219(){return this._Str_22254}get _Str_22262(){return this._Str_20625}get _Str_24447(){return this._Str_19116}get _Str_19137(){return this._Str_20729}}class r{flush(){return this._data=null,!0}parse(t){return!!t&&(this._data=new n(t),!0)}get data(){return this._data}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},p0wa:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},pDhE:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._userName=null,!0}parse(t){return!!t&&(this._userName=t.readString(),!0)}get userName(){return this._userName}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},pGYl:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},pIFH:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._botId=-1,this._commandId=-1,this._data="",!0}parse(t){return!!t&&(this._botId=t.readInt(),this._commandId=t.readInt(),this._data=t.readString(),!0)}get botId(){return this._botId}get commandId(){return this._commandId}get data(){return this._data}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},pRZV:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("hTzv");class r{flush(){return this._items=new n.a,!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;){const s=t.readInt();let i=t.readInt();const n=[];for(;i>0;)n.push(t.readInt()),i--;this._items.add(s,n),e--}return!0}getItemsByCategory(t){return this._items.getValue(t)}get categories(){return this._items.getKeys()}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},pjvS:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},porQ:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(...t){this._data=[t.length,...t]}getMessageArray(){return this._data}dispose(){}}},q25d:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},q4z0:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},q5XJ:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},qKi6:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._roomId=0,!0}parse(t){return!!t&&(this._roomId=t.readInt(),!0)}get roomId(){return this._roomId}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},qLWH:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._mode=-1,!0}parse(t){return!!t&&(this._mode=t.readInt(),!0)}get mode(){return this._mode}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"qOv/":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},qQgg:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._gameTypeId=0,this._url=null,this._gameClientId=null,!0}parse(t){return!!t&&(this._gameTypeId=t.readInt(),this._gameClientId=t.readString(),this._url=t.readString(),!0)}get gameTypeId(){return this._gameTypeId}get url(){return this._url}get gameClientId(){return this._gameClientId}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},qXDh:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},qZ7S:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._score=0,!0}parse(t){return!!t&&(this._score=t.readInt(),!0)}get score(){return this._score}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},qexY:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("qg1l");class r{flush(){return this._item=null,this._openInventory=!1,!0}parse(t){return!!t&&(this._item=new n.a(t),this._openInventory=t.readBoolean(),!0)}get item(){return this._item}openInventory(){return this._openInventory}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},qg1l:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){if(!t)throw new Error("invalid_parser");this._id=t.readInt(),this._name=t.readString(),this._motto=t.readString(),this._gender=t.readString(),this._figure=t.readString()}get id(){return this._id}get name(){return this._name}get motto(){return this._motto}get figure(){return this._figure}get gender(){return this._gender}}},r2VG:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},r7iz:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},rQEl:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},rbNg:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},rlQL:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},ry6F:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("3r1x");let n=(()=>{class t extends i.a{constructor(t){super(t)}}return t.LOADED="NLE_LOADED",t.FAILED="NLE_FAILED",t})()},sCRD:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._unitId=null,this._isTyping=!1,!0}parse(t){return!!t&&(this._unitId=t.readInt(),this._isTyping=1===t.readInt(),!0)}get unitId(){return this._unitId}get isTyping(){return this._isTyping}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"sGp+":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},sM2B:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"sR+E":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("iAsj");class r{flush(){return this._owners=new Map,this._items=[],!0}parse(t){if(!t)return!1;if(!this.parseOwners(t))return!1;let e=t.readInt();for(;e>0;){const s=new n.a(t);if(!s)continue;const i=this._owners.get(s.userId);i&&(s.username=i),this._items.push(s),e--}return!0}parseOwners(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._owners.set(t.readInt(),t.readString()),e--;return!0}get owners(){return this._owners}get items(){return this._items}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},sRv6:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO"),n=s("c746");class r extends i.a{constructor(t){super(t,n.a)}getParser(){return this.parser}}},sRxW:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.DIRECTION_TO_ANGLE=[45,90,135,180,225,270,315,0],t.DIRECTION_IS_FLIPPED=[!1,!1,!1,!1,!0,!0,!0,!1],t.MIN_DIRECTION=0,t.MAX_DIRECTION=7,t})()},sxwv:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("5+UO"),n=s("P5vI");class r{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._offerId=-1,this._localizationId=null,this._rent=!1,this._priceCredits=0,this._priceActivityPoints=0,this._priceActivityPointsType=0,this._clubLevel=0,this._giftable=!1,this._bundlePurchaseAllowed=!1,this._products=[],!0}parse(t){if(!t)return!1;this._offerId=t.readInt(),this._localizationId=t.readString(),this._rent=t.readBoolean(),this._priceCredits=t.readInt(),this._priceActivityPoints=t.readInt(),this._priceActivityPointsType=t.readInt(),this._giftable=t.readBoolean();let e=t.readInt();for(;e>0;)this._products.push(new n.a(t)),e--;return this._clubLevel=t.readInt(),this._bundlePurchaseAllowed=t.readBoolean(),!0}get offerId(){return this._offerId}get localizationId(){return this._localizationId}get rent(){return this._rent}get priceCredits(){return this._priceCredits}get priceActivityPoints(){return this._priceActivityPoints}get priceActivityPointsType(){return this._priceActivityPointsType}get clubLevel(){return this._clubLevel}get giftable(){return this._giftable}get bundlePurchaseAllowed(){return this._bundlePurchaseAllowed}get products(){return this._products}}class a{flush(){return this._offer=null,!0}parse(t){return!!t&&(this._offer=new r(t),!0)}get offer(){return this._offer}}class o extends i.a{constructor(t){super(t,a)}getParser(){return this.parser}}},"t0/d":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._visible=!1,this._icon=0,this._pageId=-1,this._pageName=null,this._localization=null,this._children=[],this._offerIds=[],!0}parse(t){if(!t)return!1;this._visible=t.readBoolean(),this._icon=t.readInt(),this._pageId=t.readInt(),this._pageName=t.readString(),this._localization=t.readString();let e=t.readInt();for(;e>0;)this._offerIds.push(t.readInt()),e--;let s=t.readInt();for(;s>0;)this._children.push(new n(t)),s--;return!0}get visible(){return this._visible}get icon(){return this._icon}get pageId(){return this._pageId}get pageName(){return this._pageName}get localization(){return this._localization}get children(){return this._children}get offerIds(){return this._offerIds}}class r{flush(){return this._root=null,!0}parse(t){return!!t&&(this._root=new n(t),this._newAdditionsAvailable=t.readBoolean(),this._catalogType=t.readString(),!0)}get root(){return this._root}get newAdditionsAvailable(){return this._newAdditionsAvailable}get catalogType(){return this._catalogType}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},t1CI:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("f6Tv");class r{flush(){return this._totalRequests=0,this._requests=[],!0}parse(t){if(!t)return!1;this._totalRequests=t.readInt();let e=t.readInt();for(;e>0;)this._requests.push(new n.a(t)),e--;return!0}get totalRequests(){return this._totalRequests}get requests(){return this._requests}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},tHQF:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.BODY="bd",t.SHOES="sh",t.LEGS="lg",t.CHEST="ch",t.WAIST_ACCESSORY="wa",t.CHEST_ACCESSORY="ca",t.HEAD="hd",t.HAIR="hr",t.FACE_ACCESSORY="fa",t.EYE_ACCESSORY="ea",t.HEAD_ACCESSORY="ha",t.HEAD_ACCESSORY_EXTRA="he",t.COAT_CHEST="cc",t.CHEST_PRINT="cp",t.LEFT_HAND_ITEM="li",t.LEFT_HAND="lh",t.LEFT_SLEEVE="ls",t.RIGHT_HAND="rh",t.RIGHT_SLEEVE="rs",t.FACE="fc",t.EYES="ey",t.HAIR_BIG="hrb",t.RIGHT_HAND_ITEM="ri",t.LEFT_COAT_SLEEVE="lc",t.RIGHT_COAT_SLEEVE="rc",t._Str_1286=[t.SHOES,t.LEGS,t.CHEST,t.WAIST_ACCESSORY,t.CHEST_ACCESSORY,t.HEAD,t.HAIR,t.FACE_ACCESSORY,t.EYE_ACCESSORY,t.HEAD_ACCESSORY,t.HEAD_ACCESSORY_EXTRA,t.COAT_CHEST,t.CHEST_PRINT],t})()},tLSS:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},tVIE:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("ZLse");class r{flush(){return this._achievement=null,!0}parse(t){return!!t&&(this._achievement=new n.a(t),!0)}get achievement(){return this._achievement}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},tWLA:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("XMGm"),n=s("MeCd"),r=s("KQk8");let a=(()=>{class t extends n.a{constructor(){super(),this._data={}}parseWrapper(t){if(!t)return;this._data={};const e=t.readInt();if(e)for(let s=0;s<e;s++)this._data[t.readString()]=t.readString();super.parseWrapper(t)}initializeFromRoomObjectModel(t){super.initializeFromRoomObjectModel(t),this._data=t.getValue(i.a.FURNITURE_DATA)||{}}writeRoomObjectModel(e){super.writeRoomObjectModel(e),e.setValue(i.a.FURNITURE_DATA_FORMAT,t.FORMAT_KEY),e.setValue(i.a.FURNITURE_DATA,this._data)}getLegacyString(){if(!this._data||!this._data.length)return"";const e=this._data[t.STATE];return null==e?"":e}compare(t){return!1}getValue(t){return this._data[t]}get data(){return this._data}}return t.FORMAT_KEY=r.a.MAP_KEY,t.STATE="state",t.RARITY="rarity",t})()},tfDB:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},toFP:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i){this._data=[t,e,s,i]}getMessageArray(){return this._data}dispose(){}}},u5n9:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._code=0,!0}parse(t){return!!t&&(this._code=t.readInt(),!0)}get code(){return this._code}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},uEox:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.LARGE="h",t.SMALL="sh",t})()},uHVT:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._volumeSystem=0,this._volumeFurni=0,this._volumeTrax=0,this._oldChat=!1,this._roomInvites=!1,this._cameraFollow=!1,this._flags=0,this._chatType=0,!0}parse(t){return!!t&&(this._volumeSystem=t.readInt(),this._volumeFurni=t.readInt(),this._volumeTrax=t.readInt(),this._oldChat=t.readBoolean(),this._roomInvites=t.readBoolean(),this._cameraFollow=t.readBoolean(),this._flags=t.readInt(),this._chatType=t.readInt(),!0)}get volumeSystem(){return this._volumeSystem}get volumeFurni(){return this._volumeFurni}get volumeTrax(){return this._volumeTrax}get oldChat(){return this._oldChat}get roomInvites(){return this._roomInvites}get cameraFollow(){return this._cameraFollow}get flags(){return this._flags}get chatType(){return this._chatType}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},uHXo:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},uMJ2:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._userId=0,this._username=null,this._figure=null,this._gender=null,this._motto=null,this._realName=null,this._directMail=!1,this._respectsReceived=0,this._respectsRemaining=0,this._respectsPetRemaining=0,this._streamPublishingAllowed=!1,this._lastAccessDate=null,this._canChangeName=!1,this._safetyLocked=!1,!0}parse(t){return!!t&&(this._userId=t.readInt(),this._username=t.readString(),this._figure=t.readString(),this._gender=t.readString(),this._motto=t.readString(),this._realName=t.readString(),this._directMail=t.readBoolean(),this._respectsReceived=t.readInt(),this._respectsRemaining=t.readInt(),this._respectsPetRemaining=t.readInt(),this._streamPublishingAllowed=t.readBoolean(),this._lastAccessDate=t.readString(),this._canChangeName=t.readBoolean(),this._safetyLocked=t.readBoolean(),!0)}get userId(){return this._userId}get username(){return this._username}get figure(){return this._figure}get gender(){return this._gender}get motto(){return this._motto}get realName(){return this._realName}get directMail(){return this._directMail}get respectsReceived(){return this._respectsReceived}get respectsRemaining(){return this._respectsRemaining}get respectsPetRemaining(){return this._respectsPetRemaining}get streamPublishingAllowed(){return this._streamPublishingAllowed}get lastAccessedDate(){return this._lastAccessDate}get canChangeName(){return this._canChangeName}get safetyLocked(){return this._safetyLocked}}class r{flush(){return this._userInfo=null,!0}parse(t){return!!t&&(this._userInfo=new n(t),!!this._userInfo)}get userInfo(){return this._userInfo}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},"uUF/":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("XMGm"),n=s("MeCd"),r=s("KQk8");let a=(()=>{class t extends n.a{constructor(){super(),this._data=[]}parseWrapper(t){if(!t)return;this._data=[];const e=t.readInt();if(e)for(let s=0;s<e;s++)this._data.push(t.readInt());super.parseWrapper(t)}initializeFromRoomObjectModel(t){super.initializeFromRoomObjectModel(t),this._data=t.getValue(i.a.FURNITURE_DATA)}writeRoomObjectModel(e){super.writeRoomObjectModel(e),e.setValue(i.a.FURNITURE_DATA_FORMAT,t.FORMAT_KEY),e.setValue(i.a.FURNITURE_DATA,this._data)}getLegacyString(){return this._data&&this._data.length?this._data[t.STATE].toString():""}compare(e){if(!(e instanceof t))return!1;let s=0;for(;s<this._data.length;){if(0===s);else if(this._data[s]!==e.getValue(s))return!1;s++}return!0}getValue(t){if(!this._data||!this._data.length)return-1;const e=this._data[t];return null==e?-1:e}}return t.FORMAT_KEY=r.a.NUMBER_KEY,t.STATE=0,t})()},uaI9:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._furniId=-1,this._height=0,!0}parse(t){return!!t&&(this._furniId=t.readInt(),this._height=t.readInt()/100,!0)}get furniId(){return this._furniId}get height(){return this._height}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},ulbO:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("J0ap");class r{flush(){return this._totalFragments=0,this._fragmentNumber=0,this._fragment=new Map,!0}parse(t){if(!t)return!1;this._totalFragments=t.readInt(),this._fragmentNumber=t.readInt();let e=t.readInt();for(;e>0;){const s=new n.a(t);s&&this._fragment.set(s.itemId,s),e--}return!0}get totalFragments(){return this._totalFragments}get fragmentNumber(){return this._fragmentNumber}get fragment(){return this._fragment}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},v12S:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("XMGm"),n=s("MeCd"),r=s("KQk8");let a=(()=>{class t extends n.a{constructor(){super(),this._data=""}parseWrapper(t){t&&(this._data=t.readString(),super.parseWrapper(t))}initializeFromRoomObjectModel(t){super.initializeFromRoomObjectModel(t),this._data=t.getValue(i.a.FURNITURE_DATA)}writeRoomObjectModel(e){super.writeRoomObjectModel(e),e.setValue(i.a.FURNITURE_DATA_FORMAT,t.FORMAT_KEY),e.setValue(i.a.FURNITURE_DATA,this._data)}getLegacyString(){return this._data}compare(t){return this._data===t.getLegacyString()}setString(t){this._data=t}}return t.FORMAT_KEY=r.a.LEGACY_KEY,t})()},"v1R/":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e=0){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},v66B:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._blockedTilesMap=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;){const s=t.readInt(),i=t.readInt();this._blockedTilesMap[i]||(this._blockedTilesMap[i]=[]),this._blockedTilesMap[i][s]=!0,e--}return!0}get blockedTilesMap(){return this._blockedTilesMap}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},vA8V:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},vKkO:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("nL9H");class n extends i.a{constructor(t){super(t),this._conflictingActions=[],this._triggerConf=t.readInt();let e=t.readInt();for(;e>0;)this._conflictingActions.push(t.readInt()),e--}get type(){return this._triggerConf}get code(){return this._triggerConf}get _Str_21837(){return this._conflictingActions}}},vUGd:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},"vd+k":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s,i=-1){this._data=[],this._data.push(t),this._data.push(e),this._data.push(s),-1!=i&&this._data.push(i)}getMessageArray(){return this._data}dispose(){}}},vkSA:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("qQgg"),n=s("M98o");class r{constructor(t){t.addMessageEvent(new i.a(this.onLoadGameUrl.bind(this)))}onLoadGameUrl(t){if(!t)return;const e=t.getParser();e&&n.a.callGame("showGame",e.url)}}},vqvB:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("P7Cj");let n=(()=>{class t{static init(e,s){t._currentDelta=0,t._startDelayMs=e,t._effectDurationMs=s,t._initializationTimeMs=i.a.instance.time,t._state=t.STATE_START_DELAY}static turnVisualizationOn(){if(t._state===t.STATE_NOT_INITIALIZED||t._state===t.STATE_OVER)return;const e=i.a.instance.time-t._initializationTimeMs;e>t._startDelayMs+t._effectDurationMs?t._state=t.STATE_OVER:(t._visualizationOn=!0,e<t._startDelayMs?t._state=t.STATE_START_DELAY:(t._state=t.STATE_RUNNING,t._currentDelta=(e-t._startDelayMs)/t._effectDurationMs))}static turnVisualizationOff(){t._visualizationOn=!1}static isVisualizationOn(){return t._visualizationOn&&t.isRunning()}static isRunning(){return t._state===t.STATE_START_DELAY||t._state===t.STATE_RUNNING}static getDelta(e=0,s=1){return Math.min(Math.max(t._currentDelta,e),s)}static get totalRunningTime(){return t._startDelayMs+t._effectDurationMs}}return t.STATE_NOT_INITIALIZED=0,t.STATE_START_DELAY=1,t.STATE_RUNNING=2,t.STATE_OVER=3,t._state=t.STATE_NOT_INITIALIZED,t._visualizationOn=!1,t._currentDelta=0,t._initializationTimeMs=0,t._startDelayMs=2e4,t._effectDurationMs=2e3,t})()},vrkx:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("Ns5P");let n=(()=>{class t extends i.a{constructor(t,e,s){super(t,e),this._userName="",this._userName=s}get userName(){return this._userName}}return t.DOORBELL="RSDE_DOORBELL",t.RSDE_REJECTED="RSDE_REJECTED",t.RSDE_ACCEPTED="RSDE_ACCEPTED",t})()},vuPI:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("P7Cj"),n=s("Xr/m"),r=s("vzKh");class a extends n.a{constructor(){super(),this._logger=new r.a(this.constructor.name),this._listeners=new Map}onDispose(){this.removeAllListeners(),super.onDispose()}addEventListener(t,e){if(!t||!e)return;const s=this._listeners.get(t);s?s.push(e):this._listeners.set(t,[e])}removeEventListener(t,e){if(!t||!e)return;const s=this._listeners.get(t);if(s&&s.length)for(const[i,n]of s.entries())if(n&&n===e)return s.splice(i,1),void(s.length||this._listeners.delete(t))}dispatchEvent(t){return!!t&&(i.a.instance.getConfiguration("system.dispatcher.log")&&this._logger.log("DISPATCHED: "+t.type),this.processEvent(t),!0)}processEvent(t){const e=this._listeners.get(t.type);if(!e||!e.length)return;const s=[];for(const n of e)n&&s.push(n);for(;s.length;){const e=s.shift();try{e(t)}catch(i){return void this._logger.error(i.stack)}}}removeAllListeners(){this._listeners.clear()}}},vx5b:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("5+UO"),n=s("5F4d");class r{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._code=null,this._savedSearches=[],!0}parse(t){if(!t)return!1;this._code=t.readString();let e=t.readInt();for(;e>0;)this._savedSearches.push(new n.a(t)),e--;return!0}get code(){return this._code}get savedSearches(){return this._savedSearches}}class a{flush(){return this._topLevelContexts=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._topLevelContexts.push(new r(t)),e--;return!0}get topLevelContexts(){return this._topLevelContexts}}class o extends i.a{constructor(t){super(t,a)}getParser(){return this.parser}}},vzKh:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{constructor(t,e=null){this._name=t,this._description=e,this._print=!0}log(t){this.printMessage(t,"log")}error(t,e){this.printMessage(e||t,"error")}warn(t){this.printMessage(t,"warn")}printMessage(e,s){this._print&&t.log(e,this._name,s)}static log(t,e="Nitro",s=null){const i=`[Nitro] ${(new Date).toDateString()} [${e}] ${t} ${this.getTimestamp()}`;switch(s){case"error":console.error(i);break;case"warn":console.warn(i);break;case"log":default:console.log(i)}}static getTimestamp(){const e=Date.now(),s=` +${e-t.LAST_TIMESTAMP||0}ms`;return this.LAST_TIMESTAMP=e,s}get description(){return this._description}set description(t){this._description=t}get print(){return this._print}set print(t){this._print=t}}return t.LAST_TIMESTAMP=Date.now(),t})()},"w+79":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},w2uK:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._id=null,!0}parse(t){return!!t&&(this._id=t.readInt(),this._playerAmount=t.readInt(),this._owner=t.readBoolean(),this._ownerId=t.readInt(),this._ownerName=t.readString(),this._bool=t.readBoolean(),this._name=t.readString(),this._description=t.readString(),this._tagsTotal=t.readInt(),!0)}get id(){return this._id}get playerAmount(){return this._playerAmount}get owner(){return this._owner}get ownerId(){return this._ownerId}get ownerName(){return this._ownerName}get name(){return this._name}get description(){return this._description}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},w9Dd:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e,s){this._data=[t,e,s]}getMessageArray(){return this._data}dispose(){}}},wGhc:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return!0}parse(t){return!!t}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},wSNj:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},"wW/F":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("f6Tv");class r{flush(){return this._request=null,!0}parse(t){return!!t&&(this._request=new n.a(t),!0)}get request(){return this._request}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},whnG:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.DOG=0,t.CAT=1,t.CROCODILE=2,t.TERRIER=3,t.BEAR=4,t.PIG=5,t.LION=6,t.RHINO=7,t.SPIDER=8,t.TURTLE=9,t.CHICKEN=10,t.FROG=11,t.DRAGON=12,t.MONSTER=13,t.MONKEY=14,t.HORSE=15,t.MONSTERPLANT=16,t.BUNNY=17,t.BUNNYEVIL=18,t.BUNNYDEPRESSED=19,t.BUNNYLOVE=20,t.PIGEONGOOD=21,t.PIGEONEVIL=22,t.DEMONMONKEY=23,t.BABYBEAR=24,t.BABYTERRIER=25,t.GNOME=26,t.LEPRECHAUN=27,t.KITTENBABY=28,t.PUPPYBABY=29,t.PIGLETNBABY=30,t.HALOOMPA=31,t.FOOLS=32,t.PTEROSAUR=33,t.VELOCIRAPTOR=34,t})()},wyCi:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},x7td:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO");class n{constructor(t){if(!t)throw new Error("invalid_wrapper");this.flush(),this.parse(t)}flush(){return this._id=0,this._title=null,this._badge=null,this._colorA=null,this._colorB=null,this._isOwner=!1,this._ownerId=0,this._hasForum=!1,!0}parse(t){return!!t&&(this._id=t.readInt(),this._title=t.readString(),this._badge=t.readString(),this._colorA=t.readString(),this._colorB=t.readString(),this._isOwner=t.readBoolean(),this._ownerId=t.readInt(),this._hasForum=t.readBoolean(),!0)}get id(){return this._id}get title(){return this._title}get badge(){return this._badge}get colorA(){return this._colorA}get colorB(){return this._colorB}get isOwner(){return this._isOwner}get ownerId(){return this._ownerId}get hasForum(){return this._hasForum}}class r{flush(){return this._groups=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._groups.push(new n(t)),e--;return!0}get groups(){return this._groups}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},xAfD:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},xB90:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._userId=null,this._badges=[],!0}parse(t){if(!t)return!1;this._userId=t.readInt();let e=t.readInt();for(;e>0;){t.readInt();const s=t.readString();this._badges.push(s),e--}return!0}get userId(){return this._userId}get badges(){return this._badges}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},"xq+5":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO"),n=s("c746");class r extends i.a{constructor(t){super(t,n.a)}getParser(){return this.parser}}},xwkN:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._data=[t,e]}getMessageArray(){return this._data}dispose(){}}},xycO:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("5+UO"),n=s("5F4d");class r{flush(){return this._searches=[],!0}parse(t){if(!t)return!1;let e=t.readInt();for(;e>0;)this._searches.push(new n.a(t)),e--;return!0}get searches(){return this._searches}}class a extends i.a{constructor(t){super(t,r)}getParser(){return this.parser}}},y81I:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("3r1x");class n extends i.a{constructor(t,e){super(t),this._object=e}get object(){return this._object}get objectId(){return this._object?this._object.id:-1}get objectType(){return this._object?this._object.type:null}}},yAmi:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},yF7E:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t,e){this._location=t,this._direction=e}get location(){return this._location}get direction(){return this._direction}}},ySDW:function(t,e,s){"use strict";s.d(e,"a",function(){return i});let i=(()=>{class t{}return t.MOUSE_CLICK="click",t.DOUBLE_CLICK="double_click",t.MOUSE_MOVE="mousemove",t.MOUSE_DOWN="mousedown",t.MOUSE_UP="mouseup",t.ROLL_OVER="mouseover",t.ROLL_OUT="mouseout",t})()},yd16:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("Ns5P");let n=(()=>{class t extends i.a{constructor(t,e,s,i,n,r,a,o,c){super(t,e),this._classId=0,this._itemType="",this._placedItemId=0,this._placedItemType="",this._classId=s,this._itemType=i,this._productCode=n,this._placedItemId=r,this._placedItemType=a,this._placedInRoom=o,this._petFigureString=c}get classId(){return this._classId}get itemType(){return this._itemType}get productCode(){return this._productCode}get placedItemId(){return this._placedItemId}get placedInRoom(){return this._placedInRoom}get placedItemType(){return this._placedItemType}get petFigureString(){return this._petFigureString}}return t.RSPE_PRESENT_OPENED="RSPE_PRESENT_OPENED",t})()},yp5t:function(t){t.exports=JSON.parse('{"a":[{"id":"Move","parts":[{"setType":"bd","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"bds","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"ss","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"lg","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"sh","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"lh","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"lhs","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"ls","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"lc","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"rh","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"rhs","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"rs","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"rc","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]},{"setType":"ch","frames":[{"number":0,"assetPartDefinition":"wlk"},{"number":1,"assetPartDefinition":"wlk"},{"number":2,"assetPartDefinition":"wlk"},{"number":3,"assetPartDefinition":"wlk"}]}]},{"id":"Wave","parts":[{"setType":"lh","frames":[{"number":0,"assetPartDefinition":"wav"},{"number":1,"assetPartDefinition":"wav"}]},{"setType":"lhs","frames":[{"number":0,"assetPartDefinition":"wav"},{"number":1,"assetPartDefinition":"wav"}]},{"setType":"ls","frames":[{"number":0,"assetPartDefinition":"wav"},{"number":1,"assetPartDefinition":"wav"}]},{"setType":"lc","frames":[{"number":0,"assetPartDefinition":"wav"},{"number":1,"assetPartDefinition":"wav"}]},{"setType":"ch","frames":[{"number":0,"assetPartDefinition":"wav"},{"number":1,"assetPartDefinition":"wav"},{"number":2,"assetPartDefinition":"wav"},{"number":3,"assetPartDefinition":"wav"}]}]},{"id":"Talk","parts":[{"setType":"hd","frames":[{"number":0,"assetPartDefinition":"spk"},{"number":1,"assetPartDefinition":"spk"}]},{"setType":"fc","frames":[{"number":0,"assetPartDefinition":"spk"},{"number":1,"assetPartDefinition":"spk"}]},{"setType":"fa","frames":[{"number":0,"assetPartDefinition":"spk"},{"number":1,"assetPartDefinition":"spk"}]}]},{"id":"Sign","parts":[{"setType":"lh","frames":[{"number":0,"assetPartDefinition":"sig"}]},{"setType":"li","frames":[{"number":0,"assetPartDefinition":"sig"}]},{"setType":"ls","frames":[{"number":0,"assetPartDefinition":"wav"}]},{"setType":"lc","frames":[{"number":0,"assetPartDefinition":"wav"}]}]},{"id":"Respect","parts":[{"setType":"lh","frames":[{"number":0,"assetPartDefinition":"respect","repeats":15},{"number":1,"assetPartDefinition":"respect","repeats":15}]},{"setType":"ls","frames":[{"number":0,"assetPartDefinition":"wav","repeats":15},{"number":1,"assetPartDefinition":"wav","repeats":15}]},{"setType":"lc","frames":[{"number":0,"assetPartDefinition":"wav","repeats":15},{"number":1,"assetPartDefinition":"wav","repeats":15}]}]},{"id":"Blow","parts":[{"setType":"rh","frames":[{"number":0,"assetPartDefinition":"blw","repeats":10},{"number":1,"assetPartDefinition":"blw","repeats":10}]},{"setType":"rs","frames":[{"number":0,"assetPartDefinition":"drk"}]},{"setType":"rc","frames":[{"number":0,"assetPartDefinition":"drk"}]},{"setType":"ri","frames":[{"number":0,"assetPartDefinition":""}]},{"setType":"ey","frames":[{"number":0,"assetPartDefinition":"std","repeats":10},{"number":0,"assetPartDefinition":"eyb","repeats":10}]},{"setType":"fc","frames":[{"number":0,"assetPartDefinition":"std","repeats":10},{"number":0,"assetPartDefinition":"blw","repeats":10}]}]},{"id":"Laugh","parts":[{"setType":"rh","frames":[{"number":0,"assetPartDefinition":"blw"}]},{"setType":"rs","frames":[{"number":0,"assetPartDefinition":"drk"}]},{"setType":"rc","frames":[{"number":0,"assetPartDefinition":"drk"}]},{"setType":"ri","frames":[{"number":0,"assetPartDefinition":""}]},{"setType":"ey","frames":[{"number":0,"assetPartDefinition":"std","repeats":2}]},{"setType":"fc","frames":[{"number":0,"assetPartDefinition":"sml"}]}],"offsets":{"frames":[{"id":0,"directions":[{"id":0,"bodyParts":[{"id":"head","dx":0,"dy":1}]},{"id":1,"bodyParts":[{"id":"head","dx":0,"dy":1}]},{"id":2,"bodyParts":[{"id":"head","dx":0,"dy":1}]},{"id":3,"bodyParts":[{"id":"head","dx":0,"dy":1}]},{"id":4,"bodyParts":[{"id":"head","dx":0,"dy":1}]},{"id":5,"bodyParts":[{"id":"head","dx":0,"dy":1}]},{"id":6,"bodyParts":[{"id":"head","dx":0,"dy":1}]},{"id":7,"bodyParts":[{"id":"head","dx":0,"dy":1}]}]},{"id":1,"directions":[{"id":0,"bodyParts":[{"id":"head","dx":0,"dy":0}]},{"id":1,"bodyParts":[{"id":"head","dx":0,"dy":0}]},{"id":2,"bodyParts":[{"id":"head","dx":0,"dy":0}]},{"id":3,"bodyParts":[{"id":"head","dx":0,"dy":0}]},{"id":4,"bodyParts":[{"id":"head","dx":0,"dy":0}]},{"id":5,"bodyParts":[{"id":"head","dx":0,"dy":0}]},{"id":6,"bodyParts":[{"id":"head","dx":0,"dy":0}]},{"id":7,"bodyParts":[{"id":"head","dx":0,"dy":0}]}]}]}}]}')},yqT3:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("5+UO"),n=s("fFOI"),r=s("/FfH");class a{flush(){return this._roomId=0,!0}parse(t){return!!t&&(this._roomId=t.readInt(),this._name=t.readString(),this._description=t.readString(),this._state=t.readInt(),this._categoryId=t.readInt(),this._userCount=t.readInt(),this._maxUserCount=t.readInt(),this.parseTags(t),this._tradeMode=t.readInt(),this._allowPets=t.readInt(),this._allowPetsEat=t.readInt(),this._allowWalkthrough=t.readInt(),this._hideWalls=t.readInt(),this._thicknessWall=t.readInt(),this._thicknessFloor=t.readInt(),this._chat=new n.a(t),t.readBoolean(),this._moderation=new r.a(t),!0)}parseTags(t){if(!t)return!1;this._tags=[];let e=t.readInt();for(;e>0;)this._tags.push(t.readString()),e--;return!0}get roomId(){return this._roomId}get name(){return this._name}get description(){return this._description}get state(){return this._state}get categoryId(){return this._categoryId}get userCount(){return this._userCount}get maxUserCount(){return this._maxUserCount}get tags(){return this._tags}get tradeMode(){return this._tradeMode}get allowPets(){return 1===this._allowPets}get allowPetsEat(){return 1===this._allowPetsEat}get allowWalkthrough(){return 1===this._allowWalkthrough}get hideWalls(){return 1===this._hideWalls}get thicknessWall(){return this._thicknessWall}get thicknessFloor(){return this._thicknessFloor}get chatSettings(){return this._chat}get moderationSettings(){return this._moderation}}class o extends i.a{constructor(t){super(t,a)}getParser(){return this.parser}}},yt9a:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){this._data=null}}},yydM:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("5+UO"),n=s("DFHD"),r=s("9mJe");class a{flush(){return this._rollerId=0,this._itemsRolling=[],this._unitRolling=null,!0}parse(t){if(!t)return;const e=t.readInt(),s=t.readInt(),i=t.readInt(),a=t.readInt();let o=t.readInt();for(;o>0;){const c=t.readInt(),h=parseFloat(t.readString()),l=parseFloat(t.readString()),u=new r.a(c,new n.a(e,s,h),new n.a(i,a,l));this._itemsRolling.push(u),o--}if(this._rollerId=t.readInt(),!t.bytesAvailable)return!0;const c=t.readInt(),h=t.readInt(),l=parseFloat(t.readString()),u=parseFloat(t.readString());switch(c){case 0:break;case 1:this._unitRolling=new r.a(h,new n.a(e,s,l),new n.a(i,a,u),r.a.MOVE);break;case 2:this._unitRolling=new r.a(h,new n.a(e,s,l),new n.a(i,a,u),r.a.SLIDE)}return!0}get rollerId(){return this._rollerId}get itemsRolling(){return this._itemsRolling}get unitRolling(){return this._unitRolling}}class o extends i.a{constructor(t){super(t,a)}getParser(){return this.parser}}},z20u:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var i=function(t){return t.FLOOR="S",t.WALL="I",t.EFFECT="E",t.BADGE="B",t.ROBOT="R",t.HABBO_CLUB="H",t.PET="P",t}({})},z3Rz:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("DFHD");let n=(()=>{class t{static rgbStringToHex(e){const s=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+t.getHex(s[1])+t.getHex(s[2])+t.getHex(s[3])}static getHex(e){return isNaN(e)?"00":t.HEX_DIGITS[(e-e%16)/16]+t.HEX_DIGITS[e%16]}static int2rgb(t){return"rgba("+[(16711680&(t>>>=0))>>>16,(65280&t)>>>8,255&t,1].join(",")+")"}static _Str_22130(t){const e=(t>>16&255)/255,s=(t>>8&255)/255,i=(255&t)/255,n=Math.max(e,s,i),r=Math.min(e,s,i),a=n-r;let o=0,c=0,h=0;return 0==a?o=0:n==e?o=s>i?60*(s-i)/a:60*(s-i)/a+360:n==s?o=60*(i-e)/a+120:n==i&&(o=60*(e-s)/a+240),c=.5*(n+r),h=0==a?0:c<=.5?a/c*.5:a/(1-c)*.5,(Math.round(o/360*255)<<16)+(Math.round(255*h)<<8)+Math.round(255*c)}static _Str_13949(t){let e,s,i,n,r;const a=(t>>16&255)/255,o=(t>>8&255)/255,c=(255&t)/255;let h=0,l=0,u=0;return o>0?(e=0,s=0,e=c<.5?c*(1+o):c+o-c*o,s=2*c-e,i=a+1/3,n=a,r=a-1/3,i<0?i+=1:i>1&&i--,n<0?n+=1:n>1&&n--,r<0?r+=1:r>1&&r--,h=6*i<1?s+6*(e-s)*i:2*i<1?e:3*i<2?s+6*(e-s)*(2/3-i):s,l=6*n<1?s+6*(e-s)*n:2*n<1?e:3*n<2?s+6*(e-s)*(2/3-n):s,u=6*r<1?s+6*(e-s)*r:2*r<1?e:3*r<2?s+6*(e-s)*(2/3-r):s):(h=c,l=c,u=c),(Math.round(255*h)<<16)+(Math.round(255*l)<<8)+Math.round(255*u)}static rgb2xyz(t){let e=(t>>16&255)/255,s=(t>>8&255)/255,n=(t>>0&255)/255;return e>.04045?e=Math.pow((e+.055)/1.055,2.4):e/=12.92,s>.04045?s=Math.pow((s+.055)/1.055,2.4):s/=12.92,n>.04045?n=Math.pow((n+.055)/1.055,2.4):n/=12.92,e*=100,s*=100,n*=100,new i.a(.4124*e+.3576*s+.1805*n,.2126*e+.7152*s+.0722*n,.0193*e+.1192*s+.9505*n)}static _Str_22784(t){let e=t.x/95.047,s=t.y/100,n=t.z/108.883;return e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,new i.a(116*s-16,500*(e-s),200*(s-n))}static rgb2CieLab(e){return t._Str_22784(t.rgb2xyz(e))}}return t.HEX_DIGITS=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],t})()},z6mw:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("3r1x");let n=(()=>{class t extends i.a{constructor(t,e){super(t),this._connection=e}get connection(){return this._connection}}return t.CONNECTION_ESTABLISHED="NCE_ESTABLISHED",t.CONNECTION_CLOSED="NCE_CLOSED",t.CONNECTION_ERROR="NCE_ERROR",t.CONNECTION_HANDSHAKING="NCE_HANDSHAKING",t.CONNECTION_HANDSHAKED="NCE_HANDSHAKED",t.CONNECTION_HANDSHAKE_FAILED="NCE_HANDSHAKE_FAILED",t.CONNECTION_AUTHENTICATED="NCE_AUTHENTICATED",t})()},zIYo:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){}}},zQEY:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this.isBase=t,this.key=0,this.color=0,this.position=4}get code(){return 0===this.key?null:(this.isBase?"b":"s")+(this.key<100?"0":"")+(this.key<10?"0":"")+this.key+(this.color<10?"0":"")+this.color+this.position}}},zRn8:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._totalLikes=0,this._canLike=!1,!0}parse(t){return!!t&&(this._totalLikes=t.readInt(),this._canLike=t.readBoolean(),!0)}get totalLikes(){return this._totalLikes}get canLike(){return this._canLike}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},zTkZ:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._name=null,this._roomId=0,!0}parse(t){return!!t&&(this._name=t.readString(),this._roomId=t.readInt(),!0)}get name(){return this._name}get roomId(){return this._roomId}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},zUnb:function(t,e,s){"use strict";s.r(e);var i=s("fXoL"),n=s("jhN1"),r=s("R1ws"),a=s("EVdn"),o=s("C6IL"),c=s("3r1x"),h=s("z6mw"),l=s("M98o"),u=s("ry6F"),_=s("P7Cj"),d=s("G0tw"),g=s("IqKQ");let m=(()=>{class t{constructor(t){this._ngZone=t,this._isReady=!1,this._avatarEditorVisible=!1,this._navigatorVisible=!1,this._catalogVisible=!1,this._inventoryVisible=!1,this._friendlistVisible=!1,this._userProfileVisible=!1,this._achievementsVisible=!1,this._meMenuVisible=!1,this._chatHistoryVisible=!1,this._userSettingsVisible=!1,this._floorPlanVisible=!1,this._userContextVisible=!0}showAvatarEditor(){this._avatarEditorVisible=!0}hideAvatarEditor(){this._avatarEditorVisible=!1}showNavigator(){this._navigatorVisible=!0}hideNavigator(){this._navigatorVisible=!1}toggleAvatarEditor(){this._avatarEditorVisible=!this._avatarEditorVisible}toggleNavigator(){this._navigatorVisible=!this._navigatorVisible}showCatalog(){this._catalogVisible=!0}hideCatalog(){this._catalogVisible=!1}toggleCatalog(){this._catalogVisible=!this._catalogVisible}showInventory(){this._inventoryVisible=!0}hideInventory(){this._inventoryVisible=!1}toggleInventory(){this._inventoryVisible=!this._inventoryVisible}showFriendList(){this._friendlistVisible=!0}hideFriendList(){this._friendlistVisible=!1}toggleFriendList(){this._friendlistVisible=!this._friendlistVisible}showUserProfile(){this._userProfileVisible=!0}hideUserProfile(){this._userProfileVisible=!1}toggleUserProfile(){this._userProfileVisible=!this._userProfileVisible}showAchievements(){this._achievementsVisible=!0}hideAchievements(){this._achievementsVisible=!1}toggleAchievements(){this._achievementsVisible=!this._achievementsVisible}showMeMenu(){this._meMenuVisible=!0}hideMeMenu(){this._meMenuVisible=!1}toggleMeMenu(){this._meMenuVisible=!this._meMenuVisible}showChatHistory(){this._chatHistoryVisible=!0}hideChatHistory(){this._chatHistoryVisible=!1}toggleChatHistory(){this._chatHistoryVisible=!this._chatHistoryVisible}showUserSettings(){this._userSettingsVisible=!0}hideUserSettings(){this._userSettingsVisible=!1}toggleUserSettings(){this._userSettingsVisible=!this._userSettingsVisible}toggleUserContextVisible(){this._userContextVisible=!this._userContextVisible}get avatarEditorVisible(){return this._avatarEditorVisible}get navigatorVisible(){return this._navigatorVisible}get catalogVisible(){return this._catalogVisible}get inventoryVisible(){return this._inventoryVisible}get friendListVisible(){return this._friendlistVisible}get userProfileVisible(){return this._userProfileVisible}get achievementsVisible(){return this._achievementsVisible}get meMenuVisible(){return this._meMenuVisible}get chatHistoryVisible(){return this._chatHistoryVisible}get userSettingsVisible(){return this._userSettingsVisible}get userContextVisible(){return this._userContextVisible}set isReady(t){this._isReady=t}get isReady(){return this._isReady}set floorPlanVisible(t){this._ngZone.run(()=>this._floorPlanVisible=t)}get floorPlanVisible(){return this._floorPlanVisible}}return t.\u0275fac=function(e){return new(e||t)(i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();var p=s("ofXK"),f=s("R0Ic"),E=s("ZWGQ"),S=s("dPj3"),v=s("Hs+C"),b=s("5r5K"),I=s("GfbW"),R=s("6u0Z");let T=(()=>{class t extends d.a{constructor(e,s,i=!1,n=!1){super(t.ROOM_ZOOM,e),this._level=s,this._forceFlip=i,this._asDelta=n}get level(){return this._level}get forceFlip(){return this._forceFlip}get asDelta(){return this._asDelta}}return t.ROOM_ZOOM="REE_ROOM_ZOOM",t})();var O=s("Z0XG"),y=s("TPa8"),C=s("9Bkc"),A=s("vrkx"),M=s("4vrv"),w=s("Ns5P"),D=s("Qi++"),N=s("yd16"),U=s("hXx8"),x=s("f6o4"),L=s("GN+4");let P=(()=>{class t{static makeRoomPreviewerId(e){return(65535&e)+t.PREVIEW_ROOM_ID_BASE}static isRoomPreviewerId(e){return e>=t.PREVIEW_ROOM_ID_BASE}}return t.PREVIEW_ROOM_ID_BASE=2147418112,t})();var F=s("Vvah"),k=s("vuPI"),V=s("HqZk"),B=s("UTUL"),W=s("+kDp"),K=s("XMGm"),G=s("BrMT"),H=s("9vQN"),j=s("ySDW");let z=(()=>{class t{}return t.TOUCH_START="touchstart",t.TOUCH_MOVE="touchmove",t.TOUCH_CANCEL="touchcancel",t.TOUCH_END="touchend",t})();var Y=s("z3Rz"),q=s("DACI"),Z=s("DFHD");let X=(()=>{class t extends c.a{constructor(t,e){super(t),this._requestId=e}get requestId(){return this._requestId}}return t.ACCEPTED="FRE_ACCEPTED",t.DECLINED="FRE_DECLINED",t})();class Q extends c.a{constructor(t){super(t)}}let J=(()=>{class t extends Q{constructor(t,e){super(t),this._roomId=0,this._roomId=e}get roomId(){return this._roomId}}return t.RWREUE_GAME_MODE="RWREUE_GAME_MODE",t.RWREUE_NORMAL_MODE="RWREUE_NORMAL_MODE",t})(),$=(()=>{class t extends Q{constructor(t,e,s,i){super(t),this._id=e,this._category=s,this._roomId=i}get id(){return this._id}get category(){return this._category}get roomId(){return this._roomId}}return t.OBJECT_SELECTED="RWROUE_OBJECT_SELECTED",t.OBJECT_DESELECTED="RWROUE_OBJECT_DESELECTED",t.USER_REMOVED="RWROUE_USER_REMOVED",t.FURNI_REMOVED="RWROUE_FURNI_REMOVED",t.FURNI_ADDED="RWROUE_FURNI_ADDED",t.USER_ADDED="RWROUE_USER_ADDED",t.OBJECT_ROLL_OVER="RWROUE_OBJECT_ROLL_OVER",t.OBJECT_ROLL_OUT="RWROUE_OBJECT_ROLL_OUT",t})(),tt=(()=>{class t extends Q{constructor(t,e=null,s=null,i=0){super(t),this._roomViewRectangle=e,this._positionDelta=s,this._scale=i}get roomViewRectangle(){return this._roomViewRectangle?this._roomViewRectangle.clone():null}get positionDelta(){return this._positionDelta?this._positionDelta.clone():null}get scale(){return this._scale}}return t.SIZE_CHANGED="RWRVUE_ROOM_VIEW_SIZE_CHANGED",t.SCALE_CHANGED="RWRVUE_ROOM_VIEW_SCALE_CHANGED",t.POSITION_CHANGED="RWRVUE_ROOM_VIEW_POSITION_CHANGED",t})();var et=s("WRyM"),st=s("EHDF"),it=s("lvFG");let nt=(()=>{class t extends Q{constructor(e,s,i,n,r){super(t.RWAIE_AVATAR_INFO),this._userId=e,this._userName=s,this._Str_3021=i,this._Str_2775=n,this._Str_3947=r}get userId(){return this._userId}get userName(){return this._userName}get _Str_2908(){return this._Str_3021}get _Str_2707(){return this._Str_2775}get _Str_4330(){return this._Str_3947}}return t.RWAIE_AVATAR_INFO="RWAIE_AVATAR_INFO",t})(),rt=(()=>{class t extends Q{constructor(){super(t.RWUDUE_USER_DATA_UPDATED)}}return t.RWUDUE_USER_DATA_UPDATED="rwudue_user_data_updated",t})();class at{constructor(t){this._type=t}get type(){return this._type}}let ot=(()=>{class t extends at{constructor(e){super(t.RWCM_MESSAGE_AVATAR_EXPRESSION),this._animation=e}get animation(){return this._animation}}return t.RWCM_MESSAGE_AVATAR_EXPRESSION="RWCM_MESSAGE_AVATAR_EXPRESSION",t})(),ct=(()=>{class t extends at{constructor(e){super(t.RWCPM_MESSAGE_CHANGE_POSTURE),this._posture=e}get posture(){return this._posture}}return t.RWCPM_MESSAGE_CHANGE_POSTURE="RWCPM_MESSAGE_CHANGE_POSTURE",t._Str_1553=0,t._Str_2016=1,t})(),ht=(()=>{class t extends at{constructor(e){super(t.RWCM_MESSAGE_DANCE),this._style=0,this._style=e}get style(){return this._style}}return t.RWCM_MESSAGE_DANCE="RWCM_MESSAGE_DANCE",t._Str_13814=0,t._Str_17699=[2,3,4],t})(),lt=(()=>{class t extends at{constructor(t,e,s){super(t),this._id=e,this._category=s}get id(){return this._id}get category(){return this._category}}return t.GET_OBJECT_INFO="RWROM_GET_OBJECT_INFO",t.GET_OBJECT_NAME="RWROM_GET_OBJECT_NAME",t.SELECT_OBJECT="RWROM_SELECT_OBJECT",t.GET_OWN_CHARACTER_INFO="RWROM_GET_OWN_CHARACTER_INFO",t.GET_AVATAR_LIST="RWROM_GET_AVATAR_LIST",t})(),ut=(()=>{class t extends at{constructor(t,e=0){super(t),this._userId=e}get userId(){return this._userId}}return t.RWUAM_WHISPER_USER="RWUAM_WHISPER_USER",t.RWUAM_IGNORE_USER="RWUAM_IGNORE_USER",t.RWUAM_IGNORE_USER_BUBBLE="RWUAM_IGNORE_USER_BUBBLE",t.RWUAM_UNIGNORE_USER="RWUAM_UNIGNORE_USER",t.RWUAM_KICK_USER="RWUAM_KICK_USER",t.RWUAM_BAN_USER_HOUR="RWUAM_BAN_USER_HOUR",t.RWUAM_BAN_USER_DAY="RWUAM_BAN_USER_DAY",t.RWUAM_BAN_USER_PERM="RWUAM_BAN_USER_PERM",t.MUTE_USER_2MIN="RWUAM_MUTE_USER_2MIN",t.MUTE_USER_5MIN="RWUAM_MUTE_USER_5MIN",t.MUTE_USER_10MIN="RWUAM_MUTE_USER_10MIN",t.RWUAM_SEND_FRIEND_REQUEST="RWUAM_SEND_FRIEND_REQUEST",t.RWUAM_RESPECT_USER="RWUAM_RESPECT_USER",t.RWUAM_GIVE_RIGHTS="RWUAM_GIVE_RIGHTS",t.RWUAM_TAKE_RIGHTS="RWUAM_TAKE_RIGHTS",t.RWUAM_START_TRADING="RWUAM_START_TRADING",t.RWUAM_OPEN_HOME_PAGE="RWUAM_OPEN_HOME_PAGE",t.RWUAM_REPORT="RWUAM_REPORT",t.RWUAM_PICKUP_PET="RWUAM_PICKUP_PET",t.RWUAM_MOUNT_PET="RWUAM_MOUNT_PET",t.RWUAM_TOGGLE_PET_RIDING_PERMISSION="RWUAM_TOGGLE_PET_RIDING_PERMISSION",t.RWUAM_TOGGLE_PET_BREEDING_PERMISSION="RWUAM_TOGGLE_PET_BREEDING_PERMISSION",t.RWUAM_DISMOUNT_PET="RWUAM_DISMOUNT_PET",t.RWUAM_SADDLE_OFF="RWUAM_SADDLE_OFF",t.RWUAM_TRAIN_PET="RWUAM_TRAIN_PET",t.RWUAM_RESPECT_PET=" RWUAM_RESPECT_PET",t.RWUAM_TREAT_PET="RWUAM_TREAT_PET",t.RWUAM_REQUEST_PET_UPDATE="RWUAM_REQUEST_PET_UPDATE",t.RWUAM_START_NAME_CHANGE="RWUAM_START_NAME_CHANGE",t.RWUAM_PASS_CARRY_ITEM="RWUAM_PASS_CARRY_ITEM",t.RWUAM_DROP_CARRY_ITEM="RWUAM_DROP_CARRY_ITEM",t.RWUAM_GIVE_CARRY_ITEM_TO_PET="RWUAM_GIVE_CARRY_ITEM_TO_PET",t.RWUAM_GIVE_WATER_TO_PET="RWUAM_GIVE_WATER_TO_PET",t.RWUAM_GIVE_LIGHT_TO_PET="RWUAM_GIVE_LIGHT_TO_PET",t.RWUAM_REQUEST_BREED_PET="RWUAM_REQUEST_BREED_PET",t.RWUAM_HARVEST_PET="RWUAM_HARVEST_PET",t.RWUAM_REVIVE_PET="RWUAM_REVIVE_PET",t.RWUAM_COMPOST_PLANT="RWUAM_COMPOST_PLANT",t.RWUAM_GET_BOT_INFO="RWUAM_GET_BOT_INFO",t.RWUAM_REPORT_CFH_OTHER="RWUAM_REPORT_CFH_OTHER",t.RWUAM_AMBASSADOR_ALERT_USER="RWUAM_AMBASSADOR_ALERT_USER",t.RWUAM_AMBASSADOR_KICK_USER="RWUAM_AMBASSADOR_KICK_USER",t.AMBASSADOR_MUTE_USER_2MIN="RWUAM_AMBASSADOR_MUTE_2MIN",t.AMBASSADOR_MUTE_USER_10MIN="RWUAM_AMBASSADOR_MUTE_10MIN",t.AMBASSADOR_MUTE_USER_60MIN="RWUAM_AMBASSADOR_MUTE_60MIN",t.AMBASSADOR_MUTE_USER_18HOUR="RWUAM_AMBASSADOR_MUTE_18HOUR",t})();class _t{constructor(){this._container=null,this._container=null,this._widget=null,this._disposed=!1,this.onUserNameUpdateEvent=this.onUserNameUpdateEvent.bind(this),this.onNitroToolbarEvent=this.onNitroToolbarEvent.bind(this)}dispose(){this.disposed||(this.container=null,this._widget=null,this._disposed=!0)}update(){}processWidgetMessage(t){if(!t)return null;switch(t.type){case lt.GET_OWN_CHARACTER_INFO:this.getOwnCharacterInfo();break;case ut.RWUAM_REQUEST_PET_UPDATE:this._widget.handlePetInfo=!1;break;case ht.RWCM_MESSAGE_DANCE:{const e=t;this._container&&this._container.roomSession&&this._container.roomSession.sendDanceMessage(e.style);break}case ot.RWCM_MESSAGE_AVATAR_EXPRESSION:{const e=t;this._container&&this._container.roomSession&&this._container.roomSession.sendExpressionMessage(e.animation._Str_6677);break}case ct.RWCPM_MESSAGE_CHANGE_POSTURE:{const e=t;this._container&&this._container.roomSession&&this._container.roomSession.sendPostureMessage(e.posture);break}}return null}processEvent(t){if(t)switch(t.type){case st.a.USER_DATA_UPDATED:return void this._container.events.dispatchEvent(new rt);case y.a.RSDE_DANCE:{const e=t;if(this._widget&&this._container&&this._container.roomSession&&this._container.roomSession.userDataManager){const t=this._container.roomSession.userDataManager.getUserData(this._container.sessionDataManager.userId);t&&t.roomIndex===e.roomIndex&&(this.widget.isDancing=0!==e.danceId)}return}}}getOwnCharacterInfo(){const t=this._container.sessionDataManager.userId,e=this._container.sessionDataManager.userName,s=this._container.roomSession.userDataManager.getUserData(t);s&&this._container.events.dispatchEvent(new nt(t,e,s.type,s.roomIndex,!1))}getObjectFurnitureData(t){if(!t)return null;const e=t.model.getValue(K.a.FURNITURE_TYPE_ID);return this._container.sessionDataManager.getFloorItemData(e)}getPetUserData(t){const e=this._container.roomSession.roomId,s=this._container.roomEngine.getTotalObjectsForManager(e,V.a.UNIT);let i=0;for(;i<s;){const s=this._container.roomEngine.getRoomObjectByIndex(e,i,V.a.UNIT),n=this._container.roomSession.userDataManager.getUserDataByIndex(s.id);if(n&&n.type===W.a.PET&&n.webID===t)return n;i++}return null}onUserNameUpdateEvent(t){this.widget.close()}onNitroToolbarEvent(t){switch(t.type){case et.a.SELECT_OWN_AVATAR:return void this.getOwnCharacterInfo()}}get type(){return x.a.AVATAR_INFO}get messageTypes(){return[lt.GET_OWN_CHARACTER_INFO,ht.RWCM_MESSAGE_DANCE,ot.RWCM_MESSAGE_AVATAR_EXPRESSION,ct.RWCPM_MESSAGE_CHANGE_POSTURE,ut.RWUAM_REQUEST_PET_UPDATE]}get eventTypes(){return[st.a.USER_DATA_UPDATED,y.a.RSDE_DANCE]}get container(){return this._container}set container(t){this._container&&this._container.sessionDataManager&&this._container.sessionDataManager.events&&(this._container.sessionDataManager.events.removeEventListener(it.a.UNUE_NAME_UPDATED,this.onUserNameUpdateEvent),this._container.roomEngine.events.removeEventListener(et.a.SELECT_OWN_AVATAR,this.onNitroToolbarEvent)),this._container=t,t&&this._container.sessionDataManager&&this._container.sessionDataManager.events&&(this._container.sessionDataManager.events.addEventListener(it.a.UNUE_NAME_UPDATED,this.onUserNameUpdateEvent),this._container.roomEngine.events.addEventListener(et.a.SELECT_OWN_AVATAR,this.onNitroToolbarEvent))}get widget(){return this._widget}set widget(t){this._widget=t}get roomEngine(){return this._container&&this._container.roomEngine||null}get roomSession(){return this._container&&this._container.roomSession||null}get disposed(){return this._disposed}}var dt=s("YTIQ");let gt=(()=>{class t{}return t._Str_3159=0,t._Str_2964=1,t._Str_2575=2,t})(),mt=(()=>{class t{constructor(t){this._ordinal=t}get _Str_6677(){return this._ordinal}_Str_1451(t){return t&&t._ordinal==this._ordinal}}return t.NONE=new t(0),t._Str_6268=new t(1),t._Str_5579=new t(2),t._Str_7336=new t(3),t._Str_10353=new t(4),t._Str_6989=new t(5),t._Str_16682=new t(6),t._Str_6325=new t(7),t})(),pt=(()=>{class t extends Q{constructor(e){super(t.RWFCE_FLOOD_CONTROL),this._seconds=0,this._seconds=e}get seconds(){return this._seconds}}return t.RWFCE_FLOOD_CONTROL="RWFCE_FLOOD_CONTROL",t})(),ft=(()=>{class t extends at{constructor(t,e,s,i,n){super(t),this._text=e,this._chatType=s,this._recipientName=i,this._styleId=n}get text(){return this._text}get chatType(){return this._chatType}get recipientName(){return this._recipientName}get styleId(){return this._styleId}}return t.MESSAGE_CHAT="RWCM_MESSAGE_CHAT",t.CHAT_DEFAULT=0,t.CHAT_WHISPER=1,t.CHAT_SHOUT=2,t})(),Et=(()=>{class t extends at{constructor(t,e,s,i){super(t),this._objectId=e,this._userName=s,this._roomId=i}get objectId(){return this._objectId}get userName(){return this._userName}get roomId(){return this._roomId}}return t.MESSAGE_SELECT_AVATAR="RWCSAM_MESSAGE_SELECT_AVATAR",t})(),St=(()=>{class t extends at{constructor(e){super(t.TYPING_STATUS),this._isTyping=e}get isTyping(){return this._isTyping}}return t.TYPING_STATUS="RWCTM_TYPING_STATUS",t})(),vt=(()=>{class t extends at{constructor(t){super(t)}}return t.RWRWM_USER_CHOOSER="RWRWM_USER_CHOOSER",t.RWRWM_FURNI_CHOOSER="RWRWM_FURNI_CHOOSER",t.RWRWM_ME_MENU="RWRWM_ME_MENU",t.RWRWM_EFFECTS="RWRWM_EFFECTS",t})();class bt{constructor(){this._container=null,this._widget=null,this._disposed=!1}dispose(){this._disposed||(this._container=null,this._widget=null,this._disposed=!0)}update(){}processWidgetMessage(t){if(!t||this.disposed)return null;let e=null;switch(t.type){case St.TYPING_STATUS:this._container.roomSession.sendChatTypingMessage(t.isTyping);break;case ft.MESSAGE_CHAT:{const e=t;if(""===e.text)return null;let s=e.text;const i=e.text.split(" ");if(i.length>0){const t=i[0];let n="";if(i.length>1&&(n=i[1]),":"===t.charAt(0)&&"x"===n){const t=this._container.roomEngine.selectedAvatarId;if(t>-1){const i=this._container.roomSession.userDataManager.getUserDataByIndex(t);i&&(n=i.name,s=e.text.replace(" x"," "+i.name))}}switch(t.toLowerCase()){case":d":case";d":this._container.sessionDataManager.clubLevel===gt._Str_2575&&this._container.roomSession.sendExpressionMessage(mt._Str_7336._Str_6677);break;case"o/":case"_o/":return this._container.roomSession.sendExpressionMessage(mt._Str_6268._Str_6677),null;case":kiss":if(this._container.sessionDataManager.clubLevel==gt._Str_2575)return this._container.roomSession.sendExpressionMessage(mt._Str_5579._Str_6677),null;break;case":jump":if(this._container.sessionDataManager.clubLevel==gt._Str_2575)return this._container.roomSession.sendExpressionMessage(mt._Str_16682._Str_6677),null;break;case":idle":return this._container.roomSession.sendExpressionMessage(mt._Str_6989._Str_6677),null;case"_b":return this._container.roomSession.sendExpressionMessage(mt._Str_6325._Str_6677),null;case":sign":return this._container.roomSession.sendSignMessage(parseInt(n)),null;case":iddqd":return this._container.roomEngine.events.dispatchEvent(new T(this._container.roomEngine.activeRoomId,-1,!0)),null;case":zoom":return this._container.roomEngine.events.dispatchEvent(new T(this._container.roomEngine.activeRoomId,parseInt(n),!1)),null;case":screenshot":return this._container.roomEngine.createRoomScreenshot(this._container.roomSession.roomId,this._container.getFirstCanvasId()),null;case":pickall":return this._container.notificationService.alertWithConfirm("${room.confirm.pick_all}","${generic.alert.title}",()=>{this._container.sessionDataManager.sendSpecialCommandMessage(":pickall")}),null;case":furni":return this._container.processWidgetMessage(new vt(vt.RWRWM_FURNI_CHOOSER)),null;case":chooser":return this._container.processWidgetMessage(new vt(vt.RWRWM_USER_CHOOSER)),null;case":floor":case":bcfloor":return this._container.roomSession.controllerLevel>=H.a.ROOM_OWNER&&(this._container.settingsService.floorPlanVisible=!0),null;case":client":case":nitro":case":billsonnn":return this._container.notificationService.alertWithScrollableMessages(['<div class="d-flex flex-column justify-content-center align-items-center"><div style="width: 350px; height: 120px; margin: 10px; background: transparent url(\'https://assets-1.nitrots.co/nitro-dark.svg\') no-repeat center; filter: drop-shadow(2px 1px 0 white) drop-shadow(-2px 1px 0 white) drop-shadow(0 -2px 0 white);"></div><b>Version: '+_.a.RELEASE_VERSION+'</b><br />This client is powered by Nitro HTML5<br /><br /><div class="d-flex"><a class="btn btn-primary" href="https://discord.gg/66UR68FPgy" target="_blank">Discord</a><a class="btn btn-primary" href="https://git.krews.org/nitro" target="_blank">Git</a></div><br /></div>'],"Nitro HTML5"),null;case":settings":return(this._container.roomSession.isRoomOwner||this._container.sessionDataManager.isModerator)&&_.a.instance.communication.connection.send(new dt.a(this._container.roomSession.roomId)),null}}const n=e.styleId;if(this._container&&this._container.roomSession)switch(e.chatType){case ft.CHAT_DEFAULT:this._container.roomSession.sendChatMessage(s,n);break;case ft.CHAT_SHOUT:this._container.roomSession.sendShoutMessage(s,n);break;case ft.CHAT_WHISPER:this._container.roomSession.sendWhisperMessage(e.recipientName,s,n)}break}case Et.MESSAGE_SELECT_AVATAR:e=t}return null}processEvent(t){if(t&&!this._disposed)switch(t.type){case O.a.FLOOD_EVENT:{const e=parseInt(t.message);return void this._container.events.dispatchEvent(new pt(e))}}}get type(){return x.a.CHAT_INPUT_WIDGET}get messageTypes(){return[St.TYPING_STATUS,ft.MESSAGE_CHAT,Et.MESSAGE_SELECT_AVATAR]}get eventTypes(){return[O.a.FLOOD_EVENT]}get container(){return this._container}set container(t){this._container=t}get widget(){return this._widget}set widget(t){this._widget=t}get disposed(){return this._disposed}}var It=s("tHQF"),Rt=s("uEox"),Tt=s("Kx+W"),Ot=s("Ays+"),yt=s("gLCd");class Ct{static sum(t,e){return new g.Point(t.x+e.x,t.y+e.y)}static _Str_15193(t,e){return new g.Point(t.x-e.x,t.y-e.y)}static _Str_6038(t,e){return new g.Point(t.x*e,t.y*e)}}let At=(()=>{class t{constructor(){this._id=++t.ITEM_COUNTER,this._senderId=-1,this._senderName="",this._senderColor=0,this._senderImageUrl=null,this._content="",this._chatType=0,this._chatStyle=0,this._date=new Date}get id(){return this._id}get senderId(){return this._senderId}set senderId(t){this._senderId=t}get senderName(){return this._senderName}set senderName(t){this._senderName=t}get senderColorString(){return this._senderColor&&"#"+this._senderColor.toString(16).padStart(6,"0")||null}set senderColor(t){this._senderColor=t}get senderImageUrl(){return this._senderImageUrl}set senderImageUrl(t){this._senderImageUrl=t}get content(){return this._content}set content(t){this._content=t}get chatType(){return this._chatType}set chatType(t){this._chatType=t}get chatStyle(){return this._chatStyle}set chatStyle(t){this._chatStyle=t}get date(){return this._date}}return t.ITEM_COUNTER=0,t})(),Mt=(()=>{class t extends Q{constructor(t,e,s,i,n,r,a,o,c,h,l,u,_=0,d=0,g=null){super(t),this._userId=e,this._text=s,this._chatType=_,this._userName=i,this._userCategory=n,this._userType=r,this._petType=a,this._links=g,this._userX=o,this._userY=c,this._userImage=h,this._userColor=l,this._roomId=u,this._styleId=d}get userId(){return this._userId}get text(){return this._text}get chatType(){return this._chatType}get userName(){return this._userName}get userCategory(){return this._userCategory}get userType(){return this._userType}get petType(){return this._petType}get links(){return this._links}get userX(){return this._userX}get userY(){return this._userY}get userImage(){return this._userImage}get userColor(){return this._userColor}get roomId(){return this._roomId}get styleId(){return this._styleId}}return t.RWCUE_EVENT_CHAT="RWCUE_EVENT_CHAT",t.CHAT_TYPE_SPEAK=0,t.CHAT_TYPE_WHISPER=1,t.CHAT_TYPE_SHOUT=2,t.CHAT_TYPE_RESPECT=3,t.CHAT_TYPE_PETRESPECT=4,t.CHAT_TYPE_NOTIFY=5,t.CHAT_TYPE_PETTREAT=6,t.CHAT_TYPE_PETREVIVE=7,t.CHAT_TYPE_PET_REBREED_FERTILIZE=8,t.CHAT_TYPE_PET_SPEED_FERTILIZE=9,t.CHAT_TYPE_BOT_SPEAK=10,t.CHAT_TYPE_BOT_SHOUT=11,t.CHAT_TYPE_BOT_WHISPER=12,t})();class wt{constructor(t){this._chatHistoryService=t,this._container=null,this._widget=null,this._connection=null,this._avatarColorCache=new Map,this._avatarImageCache=new Map,this._petImageCache=new Map,this._primaryCanvasScale=0,this._primaryCanvasOriginPos=null,this._tempScreenPosVector=new Z.a,this._disposed=!1}dispose(){this._disposed||(this._container=null,this._widget=null,this._disposed=!0)}update(){this._Str_20006()}_Str_20006(){if(!(this._container&&this._container.roomSession&&this._container.roomEngine&&this._container.events))return;const t=this._container.getFirstCanvasId(),e=this._container.roomSession.roomId,s=this._container.roomEngine.getRoomInstanceRenderingCanvas(e,t);if(!s)return;const i=s.geometry;if(!i)return;let n=1;this._primaryCanvasScale>0&&(n=i.scale/this._primaryCanvasScale),this._primaryCanvasOriginPos||(this._tempScreenPosVector.x=0,this._tempScreenPosVector.y=0,this._tempScreenPosVector.z=0,this._primaryCanvasOriginPos=i.getScreenPoint(this._tempScreenPosVector),this._primaryCanvasScale=i.scale-10);let r="",a=null;this._tempScreenPosVector.x=0,this._tempScreenPosVector.y=0,this._tempScreenPosVector.z=0;const o=i.getScreenPoint(this._tempScreenPosVector);if(o){const s=this._container.roomEngine.getRoomInstanceRenderingCanvasOffset(e,t);if(s&&o.set(o.x+s.x,o.y+s.y),o.x!=this._primaryCanvasOriginPos.x||o.y!=this._primaryCanvasOriginPos.y){const t=Ct._Str_15193(o,Ct._Str_6038(this._primaryCanvasOriginPos,n));0==t.x&&0==t.y||(r=tt.POSITION_CHANGED,a=new tt(r,null,t),this._container.events.dispatchEvent(a)),this._primaryCanvasOriginPos=o}}i.scale!==this._primaryCanvasScale&&(r=tt.SCALE_CHANGED,a=new tt(r,null,null,i.scale),this._container.events.dispatchEvent(a),this._primaryCanvasScale=i.scale)}getBubbleLocation(t,e){const s=this._container.roomEngine.getRoomInstanceGeometry(t,this._container.getFirstCanvasId()),i=this._container.roomEngine.getRoomInstanceRenderingCanvasScale(t,this._container.getFirstCanvasId());let n=document.body.offsetWidth*i/2,r=document.body.offsetHeight*i/2;if(s&&e){const a=s.getScreenPoint(e);if(a){n+=a.x*i,r+=a.y*i;const e=this._container.roomEngine.getRoomInstanceRenderingCanvasOffset(t,this._container.getFirstCanvasId());e&&(n+=e.x,r+=e.y)}}return new g.Point(n,r)}processWidgetMessage(t){return null}processEvent(t){if(t&&!this._disposed)switch(t.type){case O.a.CHAT_EVENT:{const e=t,s=this._container.roomEngine.getRoomObject(e.session.roomId,e.objectId,V.a.UNIT);if(s&&this._container.roomEngine.getRoomInstanceGeometry(e.session.roomId,this._container.getFirstCanvasId())){this._Str_20006();const t=s.getLocation(),i=this.getBubbleLocation(e.session.roomId,t),n=this._container.roomSession.userDataManager.getUserDataByIndex(e.objectId);let r="",a=0,o=null;const c=e.chatType;let h=e.style,l=0,u=-1;if(n){l=n.type;const t=n.figure;switch(l){case W.a.PET:o=this.getPetImage(t,2,!0,64,s.model.getValue(K.a.FIGURE_POSTURE)),u=new Ot.a(t).typeId;break;case W.a.USER:o=this.getUserImage(t);break;case W.a.RENTABLE_BOT:case W.a.BOT:h=yt.a.BOT}a=this._avatarColorCache.get(t),r=n.name}let d=e.message;switch(c){case O.a._Str_5821:d=_.a.instance.getLocalizationWithParameter("widgets.chatbubble.respect","username",r);break;case O.a._Str_6081:d=_.a.instance.getLocalizationWithParameter("widget.chatbubble.petrespect","petname",r);break;case O.a._Str_5958:d=_.a.instance.getLocalizationWithParameter("widget.chatbubble.pettreat","petname",r);break;case O.a._Str_8971:d=_.a.instance.getLocalizationWithParameters("widget.chatbubble.handitem",["username","handitem"],[r,_.a.instance.getLocalization("handitem"+e.extraParam)]);break;case O.a._Str_8909:{const t=(e.extraParam>0?Math.floor(e.extraParam/3600):0).toString(),s=(e.extraParam>0?Math.floor(e.extraParam%3600/60):0).toString(),i=(e.extraParam%60).toString();d=_.a.instance.getLocalizationWithParameters("widget.chatbubble.mutetime",["hours","minutes","seconds"],[t,s,i]);break}}const g=new At;g.senderId=e.objectId,g.senderName=n.name+":",g.senderColor=a,o&&o.src&&(g.senderImageUrl=o.src),g.content=d,g.chatType=c,g.chatStyle=h,this._chatHistoryService.addItem(e.session.roomId,g),this._container&&this._container.events&&this._container.events.dispatchEvent(new Mt(Mt.RWCUE_EVENT_CHAT,n.roomIndex,d,r,V.a.UNIT,l,u,i.x,i.y,o,a,e.session.roomId,c,h,[]))}return}}}getUserImage(t){let e=this._avatarImageCache.get(t);return e||(e=this.setFigureImage(t)),e}setFigureImage(t){const e=this._container.avatarRenderManager.createAvatarImage(t,Rt.a.LARGE,null,this);if(!e)return;const s=e.getCroppedImage(Tt.a.HEAD),i=e.getPartColor(It.a.CHEST);return this._avatarColorCache.set(t,i&&i._Str_915||16777215),e.dispose(),this._avatarImageCache.set(t,s),s}getPetImage(t,e,s,i=64,n=null){let r=this._petImageCache.get(t+n);if(r)return r;const a=new Ot.a(t),o=this._container.roomEngine.getRoomObjectPetImage(a.typeId,a.paletteId,a.color,new Z.a(45*e),i,null,!1,0,a.customParts,n);return o&&(r=_.a.instance.renderer.extract.image(o.data),this._petImageCache.set(t+n,r)),r}resetFigure(t){this.setFigureImage(t)}get type(){return x.a.CHAT_WIDGET}get messageTypes(){return[]}get eventTypes(){return[O.a.CHAT_EVENT]}get container(){return this._container}set container(t){this._container=t}get widget(){return this._widget}set widget(t){this._widget=t}get connection(){return this._connection}set connection(t){this._connection=t}get disposed(){return this._disposed}}let Dt=(()=>{class t extends at{constructor(e,s){super(t.RWLUIM_LET_USER_IN),this._userName=e,this._canEnter=s}get userName(){return this._userName}get _Str_23117(){return this._canEnter}}return t.RWLUIM_LET_USER_IN="RWLUIM_LET_USER_IN",t})(),Nt=(()=>{class t extends Q{constructor(t,e){super(t),this._userName="",this._userName=e}get userName(){return this._userName}}return t.RWDE_RINGING="RWDE_RINGING",t.REJECTED="RWDE_REJECTED",t.RWDE_ACCEPTED="RWDE_ACCEPTED",t})();class Ut{constructor(){this._isDisposed=!1,this._container=null}dispose(){this._isDisposed=!0,this._container=null}processWidgetMessage(t){return t&&this._container&&t&&t.type==Dt.RWLUIM_LET_USER_IN?(this._container.roomSession.sendDoorbellApprovalMessage(t.userName,t._Str_23117),null):null}processEvent(t){if(!t)return;const e=t;if(e)switch(t.type){case A.a.RSDE_REJECTED:return void this._container.events.dispatchEvent(new Nt(Nt.REJECTED,e.userName));case A.a.DOORBELL:return void this._container.events.dispatchEvent(new Nt(Nt.RWDE_RINGING,e.userName));case A.a.RSDE_ACCEPTED:return void this._container.events.dispatchEvent(new Nt(Nt.RWDE_ACCEPTED,e.userName))}}update(){}get disposed(){return this._isDisposed}get type(){return x.a.DOORBELL}set container(t){this._container=t}get messageTypes(){return[Dt.RWLUIM_LET_USER_IN]}get eventTypes(){return[A.a.DOORBELL,A.a.RSDE_REJECTED,A.a.RSDE_ACCEPTED]}}var xt=s("AAYK"),Lt=s("BTXg"),Pt=s("ipbj"),Ft=s("10Jd");class kt{constructor(){this._container=null,this._disposed=!1,this._roomId=0,this._roomId=Math.floor(11*Math.random()),this.onLoveLockFurniFinishedEvent=this.onLoveLockFurniFinishedEvent.bind(this),this.onLoveLockFurniFriendConfirmedEvent=this.onLoveLockFurniFriendConfirmedEvent.bind(this),this.onLoveLockFurniStartEvent=this.onLoveLockFurniStartEvent.bind(this)}dispose(){for(const t of this._messages)this._container.connection.removeMessageEvent(t);this._messages=[],this._container=null,this._disposed=!0}processEvent(t){}processWidgetMessage(t){return null}_Str_17138(t,e){null==this._container||this._disposed||this._container.connection.send(new xt.a(t,e))}update(){}get disposed(){return this._disposed}get type(){return""}get container(){return this._container}set container(t){if(this._container=t,this._container){this._messages=[new Lt.a(this.onLoveLockFurniStartEvent),new Pt.a(this.onLoveLockFurniFriendConfirmedEvent),new Ft.a(this.onLoveLockFurniFinishedEvent)];for(const e of this._messages)t.connection.addMessageEvent(e)}}onLoveLockFurniStartEvent(t){if(!this._widget||!t||!t.getParser())return;const e=t.getParser();this._widget.open(e.furniId,e.start)}onLoveLockFurniFinishedEvent(t){this._widget&&t&&t.getParser()&&t.getParser()}onLoveLockFurniFriendConfirmedEvent(t){}sendStart(t,e){this._container.connection.send(new xt.a(t,e))}get messageTypes(){return[]}get eventTypes(){return[]}get widget(){return this._widget}set widget(t){this._widget=t}}var Vt=s("PJfP");class Bt{constructor(){this._isDisposed=!1,this._container=null,this._widget=null}get disposed(){return this._isDisposed}get type(){return x.a.FRIEND_FURNI_ENGRAVING}get container(){return this._container}set container(t){this._container=t}set widget(t){this._widget=t}dispose(){this._container=null,this._widget=null,this._isDisposed=!0}processEvent(t){if(this.disposed||null==t)return;let e=null;switch(t.type){case b.a.REQUEST_FRIEND_FURNITURE_ENGRAVING:if(e=t,e&&this._container.roomEngine&&this._widget){const t=this._container.roomEngine.getRoomObject(e.roomId,e.objectId,e.category);if(t){const e=t.model;if(e){const s=new Vt.a;s.initializeFromRoomObjectModel(e),this._widget.open(t.id,e.getValue(K.a.FURNITURE_FRIENDFURNI_ENGRAVING),s)}}}return}}processWidgetMessage(t){return null}get eventTypes(){return[b.a.REQUEST_FRIEND_FURNITURE_ENGRAVING]}get messageTypes(){return[]}update(){}}let Wt=(()=>{class t extends Q{constructor(t,e,s=0,i=null){super(t),this._requestId=e,this._userId=s,this._userName=i}get requestId(){return this._requestId}get userId(){return this._userId}get userName(){return this._userName}}return t.RWFRUE_SHOW_FRIEND_REQUEST="RWFRUE_SHOW_FRIEND_REQUEST",t.RWFRUE_HIDE_FRIEND_REQUEST="RWFRUE_HIDE_FRIEND_REQUEST",t})(),Kt=(()=>{class t extends at{constructor(t,e=0){super(t),this._requestId=0,this._requestId=e}get _Str_2951(){return this._requestId}}return t.RWFRM_ACCEPT="RWFRM_ACCEPT",t.RWFRM_DECLINE="RWFRM_DECLINE",t})();class Gt{constructor(){this._container=null,this._isDisposed=!1}dispose(){this._container=null,this._isDisposed=!0}processWidgetMessage(t){if(!t)return null;switch(t.type){case Kt.RWFRM_ACCEPT:if(!this._container.friendService)return null;this._container.friendService.acceptFriendRequestById(t._Str_2951);break;case Kt.RWFRM_DECLINE:if(!this._container.friendService)return null;this._container.friendService.removeFriendRequestById(t._Str_2951)}return null}processEvent(t){if(t)switch(t.type){case D.a.RSFRE_FRIEND_REQUEST:return void this._container.events.dispatchEvent(new Wt(Wt.RWFRUE_SHOW_FRIEND_REQUEST,t.requestId,t.userId,t.userName));case X.ACCEPTED:case X.DECLINED:return void this._container.events.dispatchEvent(new Wt(Wt.RWFRUE_HIDE_FRIEND_REQUEST,t.requestId))}}update(){}get disposed(){return this._isDisposed}get type(){return x.a.FRIEND_REQUEST}set container(t){this._container=t}get messageTypes(){return[Kt.RWFRM_ACCEPT,Kt.RWFRM_DECLINE]}get eventTypes(){return[D.a.RSFRE_FRIEND_REQUEST,X.ACCEPTED,X.DECLINED]}}function Ht(t){let e=1;return"-"===t[0]&&(e=-1,t=t.substr(1)),function(s,i){return(s[t]<i[t]?-1:s[t]>i[t]?1:0)*e}}class jt{constructor(t,e,s){this._id=t,this._category=e,this._name=s}get id(){return this._id}get category(){return this._category}get name(){return this._name}}let zt=(()=>{class t extends Q{constructor(t,e,s=!1){super(t),this._items=e.slice(),this._Str_10043=s}get items(){return this._items}get _Str_2799(){return this._Str_10043}}return t.RWCCE_USER_CHOOSER_CONTENT="RWCCE_USER_CHOOSER_CONTENT",t.RWCCE_FURNI_CHOOSER_CONTENT="RWCCE_FURNI_CHOOSER_CONTENT",t})();class Yt{constructor(){this._isDisposed=!1,this._container=null}dispose(){this._isDisposed=!0,this._container=null}processWidgetMessage(t){if(!t)return null;switch(t.type){case vt.RWRWM_FURNI_CHOOSER:this.processFurniChooser();break;case lt.SELECT_OBJECT:this.selectFurni(t)}return null}selectFurni(t){null!=t&&(t.category!=V.a.WALL&&t.category!=V.a.FLOOR||this._container.roomEngine.selectRoomObject(this._container.roomSession.roomId,t.id,t.category))}processFurniChooser(){if(null==this._container||null==this._container.roomSession||null==this._container.roomEngine||null==this._container.roomSession.userDataManager)return;const t=this._container.roomSession.roomId,e=[];this.processFloorFurni(t,e),this.processWallFurni(t,e),e.sort(Ht("name")),this._container.events.dispatchEvent(new zt(zt.RWCCE_FURNI_CHOOSER_CONTENT,e,!1))}processWallFurni(t,e){const s=this._container.roomEngine.getRoomObjectCount(t,V.a.WALL);for(let i=0;i<s;i++){const s=this._container.roomEngine.getRoomObjectByIndex(t,i,V.a.WALL);if(null==s)continue;const n=s.type;let r=null;if(n.startsWith("poster")){const t=Number.parseInt(n.replace("poster",""));r=_.a.instance.localization.getValue("poster_"+t+"_name")}else{const t=Number.parseInt(s.model.getValue(K.a.FURNITURE_TYPE_ID)),e=this._container.sessionDataManager.getWallItemData(t);r=null!=e&&e.name.length>0?e.name:n}e.push(new jt(s.id,V.a.WALL,r))}}processFloorFurni(t,e){const s=this._container.roomEngine.getRoomObjectCount(t,V.a.FLOOR);for(let i=0;i<s;i++){const s=this._container.roomEngine.getRoomObjectByIndex(t,i,V.a.FLOOR);if(null==s)continue;const n=Number.parseInt(s.model.getValue(K.a.FURNITURE_TYPE_ID)),r=this._container.sessionDataManager.getFloorItemData(n);e.push(new jt(s.id,V.a.FLOOR,null!=r?r.name:s.type))}}processEvent(t){}update(){}get disposed(){return this._isDisposed}get type(){return x.a.FURNI_CHOOSER}set container(t){this._container=t}get messageTypes(){return[vt.RWRWM_FURNI_CHOOSER,lt.SELECT_OBJECT]}get eventTypes(){return[]}}class qt{constructor(){this._isDisposed=!1,this._container=null,this._widget=null}dispose(){this._isDisposed=!0,this._container=null,this._widget=null}processWidgetMessage(t){return null}processEvent(t){switch(t.type){case b.a.REQUEST_BACKGROUND_COLOR:{if(!this.canOpenBackgroundToner())return;const e=this._container.roomEngine.getRoomObject(t.roomId,t.objectId,t.category),s=e.model,i=Number.parseInt(s.getValue(K.a.FURNITURE_ROOM_BACKGROUND_COLOR_HUE)),n=Number.parseInt(s.getValue(K.a.FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION)),r=Number.parseInt(s.getValue(K.a.FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS));this._widget.open(e.id,i,n,r)}}}canOpenBackgroundToner(){return this._container.roomSession.isRoomOwner||this._container.roomSession.controllerLevel>=H.a.GUEST||this._container.sessionDataManager.isGodMode}set widget(t){this._widget=t}get widget(){return this._widget}update(){}get disposed(){return this._isDisposed}get type(){return x.a.ROOM_BACKGROUND_COLOR}set container(t){this._container=t}get container(){return this._container}get messageTypes(){return[]}get eventTypes(){return[b.a.REQUEST_BACKGROUND_COLOR]}}let Zt=(()=>{class t extends at{constructor(t,e,s=-1){super(t),this._roomObjectId=0,this._petId=-1,this._roomObjectId=e,this._petId=s}get _Str_2713(){return this._roomObjectId}get _Str_2508(){return this._petId}}return t.RWUPM_PET_PRODUCT="RWUPM_PET_PRODUCT",t.MONSTERPLANT_SEED="RWUPM_MONSTERPLANT_SEED",t})();class Xt{constructor(){this._container=null,this._isDisposed=!1,this.handleMonsterSeedPlant=this.handleMonsterSeedPlant.bind(this),this.handlePurchasableClothing=this.handlePurchasableClothing.bind(this),this.handleMysterybox=this.handleMysterybox.bind(this),this.handleEffectBox=this.handleEffectBox.bind(this),this.handleMysteryTrophy=this.handleMysteryTrophy.bind(this)}dispose(){this._container=null,this._isDisposed=!0}processWidgetMessage(t){return null}processEvent(t){}update(){}get disposed(){return this._isDisposed}get type(){return x.a.FURNI_STICKIE_WIDGET}set container(t){this._container&&this._container.sessionDataManager&&this._container.sessionDataManager.events&&(this._container.roomEngine.events.removeEventListener(b.a.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,this.handleMonsterSeedPlant),this._container.roomEngine.events.removeEventListener(b.a.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,this.handlePurchasableClothing),this._container.roomEngine.events.removeEventListener(b.a.REQUEST_MYSTERYBOX_OPEN_DIALOG,this.handleMysterybox),this._container.roomEngine.events.removeEventListener(b.a.REQUEST_EFFECTBOX_OPEN_DIALOG,this.handleEffectBox),this._container.roomEngine.events.removeEventListener(b.a.REQUEST_MYSTERYTROPHY_OPEN_DIALOG,this.handleMysteryTrophy)),this._container=t,t&&this._container.sessionDataManager&&this._container.sessionDataManager.events&&(this._container.roomEngine.events.addEventListener(b.a.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,this.handleMonsterSeedPlant),this._container.roomEngine.events.addEventListener(b.a.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,this.handlePurchasableClothing),this._container.roomEngine.events.addEventListener(b.a.REQUEST_MYSTERYBOX_OPEN_DIALOG,this.handleMysterybox),this._container.roomEngine.events.addEventListener(b.a.REQUEST_EFFECTBOX_OPEN_DIALOG,this.handleEffectBox),this._container.roomEngine.events.addEventListener(b.a.REQUEST_MYSTERYTROPHY_OPEN_DIALOG,this.handleMysteryTrophy))}get container(){return this._container}getRoomObject(t){return this._container?this._container.roomEngine.getRoomObject(this._container.roomSession.roomId,t,V.a.FLOOR):null}getFurniData(t){if(!t)return null;const e=Number.parseInt(t.model.getValue(K.a.FURNITURE_TYPE_ID));return this._container.sessionDataManager.getFloorItemData(e)}handlePurchasableClothing(t){if(!this._widget)return;const e=this.getRoomObject(t.objectId);e&&this._container.isOwnerOfFurniture(e)&&this._widget._Str_24748(e)}handleMonsterSeedPlant(t){}handleMysterybox(t){}handleEffectBox(t){}handleMysteryTrophy(t){}get widget(){return this._widget}set widget(t){this._widget=t}get messageTypes(){return[Zt.MONSTERPLANT_SEED]}get eventTypes(){return[b.a.OPEN_FURNI_CONTEXT_MENU,b.a.CLOSE_FURNI_CONTEXT_MENU]}}var Qt=s("6X5G");let Jt=(()=>{class t extends Q{constructor(t,e,s,i){super(t),this._value=i,this._objectId=s,this._furniType=e}get value(){return this._value}get objectId(){return this._objectId}get furniType(){return this._furniType}}return t.RWCFUE_CREDIT_FURNI_UPDATE="RWCFUE_CREDIT_FURNI_UPDATE",t})(),$t=(()=>{class t extends at{constructor(t,e){super(t),this._objectId=e}get objectId(){return this._objectId}}return t.RWFCRM_REDEEM="RWFCRM_REDEEM",t})(),te=(()=>{class t extends at{constructor(t,e,s,i){super(t),this._objectId=e,this._category=s,this._roomId=i}get objectId(){return this._objectId}get category(){return this._category}get roomId(){return this._roomId}}return t.REQUEST_CREDITFURNI="RWFWM_MESSAGE_REQUEST_CREDITFURNI",t.REQUEST_STICKIE="RWFWM_MESSAGE_REQUEST_STICKIE",t.REQUEST_PRESENT="RWFWM_MESSAGE_REQUEST_PRESENT",t.REQUEST_TROPHY="RWFWM_MESSAGE_REQUEST_TROPHY",t.REQUEST_TEASER="RWFWM_MESSAGE_REQUEST_TEASER",t.REQUEST_ECOTRONBOX="RWFWM_MESSAGE_REQUEST_ECOTRONBOX",t.REQUEST_DIMMER="RWFWM_MESSAGE_REQUEST_DIMMER",t.REQUEST_PLACEHOLDER="RWFWM_MESSAGE_REQUEST_PLACEHOLDER",t.REQUEST_CLOTHING_CHANGE="RWFWM_MESSAGE_REQUEST_CLOTHING_CHANGE",t.REQUEST_PLAYLIST_EDITOR="RWFWM_MESSAGE_REQUEST_PLAYLIST_EDITOR",t.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING="RWFWM_WIDGET_MESSAGE_REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING",t.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED="RWFWM_WIDGET_MESSAGE_REQUEST_ACHIEVEMENT_RESOLUTION_FAILED",t.REQUEST_BADGE_DISPLAY_ENGRAVING="RWFWM_WIDGET_MESSAGE_REQUEST_BADGE_DISPLAY_ENGRAVING",t})();class ee{constructor(){this._container=null}dispose(){this._container=null}processWidgetMessage(t){if(!t||!this.container)return null;switch(t.type){case te.REQUEST_CREDITFURNI:{const e=t,s=this._container.roomEngine.getRoomObject(e.roomId,e.objectId,e.category);if(s&&this._container.isOwnerOfFurniture(s)){const t=s.model.getValue(K.a.FURNITURE_CREDIT_VALUE);this._container.events.dispatchEvent(new Jt(Jt.RWCFUE_CREDIT_FURNI_UPDATE,s.model.getValue(K.a.FURNITURE_TYPE_ID)+"_"+e.type+"_"+e.objectId,e.objectId,t))}break}case $t.RWFCRM_REDEEM:{const e=t;this.container.roomSession&&this.container.roomSession.connection.send(new Qt.a(e.objectId));break}}return null}processEvent(t){}update(){}get disposed(){return!!this._container}get type(){return x.a.FURNI_CREDIT_WIDGET}get container(){return this._container}set container(t){this._container=t}get messageTypes(){return[te.REQUEST_CREDITFURNI,$t.RWFCRM_REDEEM]}get eventTypes(){return[]}}var se=s("uaI9");class ie{constructor(){this._container=null,this._widget=null,this._lastFurniId=-1,this._messages=[]}dispose(){this.container=null,this._widget=null}processWidgetMessage(t){return null}processEvent(t){if(!t)return;let e=null;switch(t.type){case b.a.OPEN_WIDGET:if(e=t,e&&this._container.roomEngine&&this._widget){this._lastFurniId=e.objectId;const t=this._container.roomEngine.getRoomObject(e.roomId,e.objectId,e.category);t&&this.canManipulateRoomObject(t)&&this._widget.open(this._lastFurniId,t.getLocation().z)}return;case b.a.CLOSE_WIDGET:return e=t,void(e&&this._container.roomEngine&&this._widget&&this._lastFurniId===e.objectId&&this._widget.hide())}}update(){}get disposed(){return!!this._container}get type(){return x.a.CUSTOM_STACK_HEIGHT}get container(){return this._container}set container(t){if(t!==this._container&&this._container){for(const t of this._messages)this._container.connection.removeMessageEvent(t);this._messages=[]}if(this._container=t,this._container){this._messages=[new se.a(this.onFurnitureStackHeightEvent.bind(this))];for(const e of this._messages)t.connection.addMessageEvent(e)}}get messageTypes(){return[]}get eventTypes(){return[]}get widget(){return this._widget}set widget(t){this._widget=t}onFurnitureStackHeightEvent(t){if(!t)return;const e=t.getParser();e&&this._widget&&this.canManipulateRoomObject()&&this._widget.update(e.furniId,e.height)}canManipulateRoomObject(t=null){const e=this._container.roomSession.isRoomOwner,s=this._container.roomSession.controllerLevel>=H.a.GUEST,i=this._container.sessionDataManager.isModerator,n=t&&this._container.isOwnerOfFurniture(t);return e||i||s||n}}let ne=(()=>{class t extends Q{constructor(e,s,i,n,r){super(t.RWDSUE_DIMMER_STATE),this._state=e,this._presetId=s,this._effectId=i,this._color=n,this._brightness=r}get state(){return this._state}get _Str_14686(){return this._presetId}get _Str_6815(){return this._effectId}get color(){return this._color}get _Str_5123(){return this._brightness}}return t.RWDSUE_DIMMER_STATE="RWDSUE_DIMMER_STATE",t})();class re{constructor(t,e,s,i){this._id=0,this._type=0,this._color=0,this._intensity=0,this._id=t,this._type=e,this._color=s,this._intensity=i}get id(){return this._id}get type(){return this._type}get color(){return this._color}get _Str_4272(){return this._intensity}}let ae=(()=>{class t extends Q{constructor(t){super(t),this._selectedPresetId=0,this._presets=[]}get _Str_10888(){return this._presets.length}get presets(){return this._presets}get selectedPresetId(){return this._selectedPresetId}set selectedPresetId(t){this._selectedPresetId=t}setPresetValues(t,e,s,i){const n=new re(t,e,s,i);this._presets[t-1]=n}getPresetNumber(t){return t<0||t>=this._presets.length?null:this._presets[t]}}return t.RWDUE_PRESETS="RWDUE_PRESETS",t.RWDUE_HIDE="RWDUE_HIDE",t})(),oe=(()=>{class t extends at{constructor(){super(t.RWCDSM_CHANGE_STATE)}}return t.RWCDSM_CHANGE_STATE="RWCDSM_CHANGE_STATE",t})(),ce=(()=>{class t extends at{constructor(e,s,i){super(t.RWDPM_PREVIEW_DIMMER_PRESET),this._color=e,this._brightness=s,this._bgOnly=i}get color(){return this._color}get _Str_5123(){return this._brightness}get _Str_11464(){return this._bgOnly}}return t.RWDPM_PREVIEW_DIMMER_PRESET="RWDPM_PREVIEW_DIMMER_PRESET",t})(),he=(()=>{class t extends at{constructor(e,s,i,n,r){super(t.RWSDPM_SAVE_PRESET),this._presetNumber=e,this._effectTypeId=s,this._color=i,this._brightness=n,this._apply=r}get _Str_25037(){return this._presetNumber}get _Str_24446(){return this._effectTypeId}get color(){return this._color}get _Str_5123(){return this._brightness}get apply(){return this._apply}}return t.RWSDPM_SAVE_PRESET="RWSDPM_SAVE_PRESET",t})();class le{constructor(){this._isDisposed=!1,this._container=null}dispose(){this._isDisposed=!0,this._container=null}processWidgetMessage(t){switch(t.type){case te.REQUEST_DIMMER:this.canOpenWidget()&&this._container.roomSession.requestMoodlightSettings();break;case he.RWSDPM_SAVE_PRESET:this.canOpenWidget()&&this._container.roomSession.updateMoodlightData(t._Str_25037,t._Str_24446,t.color,t._Str_5123,t.apply);break;case oe.RWCDSM_CHANGE_STATE:this.canOpenWidget()&&this._container.roomSession.toggleMoodlightState();break;case ce.RWDPM_PREVIEW_DIMMER_PRESET:if(!t||!this._container.roomEngine)return null;this._container.roomEngine._Str_17804(this._container.roomSession.roomId,t.color,t._Str_5123,t._Str_11464)}return null}processEvent(t){switch(t.type){case C.a.RSDPE_PRESETS:{const e=t,s=new ae(ae.RWDUE_PRESETS);s.selectedPresetId=e.selectedPresetId;let i=0;for(;i<e._Str_10888;){const t=e._Str_14989(i);t&&s.setPresetValues(t.id,t.type,t.color,t._Str_4272),i++}return void this._container.events.dispatchEvent(s)}case S.a.ROOM_COLOR:return void this._container.events.dispatchEvent(new ne(t.state,t._Str_14686,t._Str_6815,t.color,t._Str_5123));case b.a.REMOVE_DIMMER:return void this._container.events.dispatchEvent(new ae(ae.RWDUE_HIDE))}}update(){}canOpenWidget(){return this._container.roomSession.isRoomOwner||this._container.roomSession.controllerLevel>=H.a.GUEST||this._container.sessionDataManager.isModerator}get disposed(){return this._isDisposed}get type(){return x.a.ROOM_DIMMER}set container(t){this._container=t}get messageTypes(){return[te.REQUEST_DIMMER,he.RWSDPM_SAVE_PRESET,oe.RWCDSM_CHANGE_STATE,ce.RWDPM_PREVIEW_DIMMER_PRESET]}get eventTypes(){return[C.a.RSDPE_PRESETS,S.a.ROOM_COLOR,b.a.REMOVE_DIMMER]}}var ue=s("Xe1u");class _e{constructor(){this._container=null,this._widget=null,this._cachedRequest=null,this._isDisposed=!1}dispose(){this._isDisposed=!0,this._container=null,this._widget=null,this._cachedRequest=null}processWidgetMessage(t){return null}processEvent(t){if(!t||this.disposed)return;const e=t;switch(t.type){case b.a.REQUEST_HIGH_SCORE_DISPLAY:{const t=this._container.roomEngine.getRoomObject(e.roomId,e.objectId,e.category);if(t){const s=new ue.a;s.initializeFromRoomObjectModel(t.model),this._widget.open(e.objectId,e.roomId,s),this._cachedRequest=e}return}case b.a.REQUEST_HIDE_HIGH_SCORE_DISPLAY:return void(e.roomId===this._widget.roomId&&e.objectId===this._widget.objectId&&(this._widget.hide(),this._cachedRequest=null))}}update(){if(!this._cachedRequest||!this.widget.visible||this._widget.roomId!==this._cachedRequest.roomId||this._widget.objectId!==this._cachedRequest.objectId)return;const t=this._container.roomEngine.getRoomObjectScreenLocation(this._cachedRequest.roomId,this._cachedRequest.objectId,this._cachedRequest.category);t&&this._widget.updatePoint(t.x,t.y)}get disposed(){return this._isDisposed}get type(){return x.a.HIGH_SCORE_DISPLAY}set container(t){this._container=t}get messageTypes(){return[]}get eventTypes(){return[b.a.REQUEST_HIGH_SCORE_DISPLAY,b.a.REQUEST_HIDE_HIGH_SCORE_DISPLAY]}get widget(){return this._widget}set widget(t){this._widget=t}}let de=(()=>{class t{constructor(){this._container=null}dispose(){this._container=null}processWidgetMessage(t){return null}processEvent(e){if(!e)return;let s=null;switch(e.type){case b.a.REQUEST_INTERNAL_LINK:if(s=e,s&&this._container.roomEngine){const e=this._container.roomEngine.getRoomObject(s.roomId,s.objectId,s.category);if(e&&e.model){let s=e.model.getValue(K.a.FURNITURE_DATA)[t.INTERNALLINK];if(s&&""!==s&&0!==s.length||(s=e.model.getValue(K.a.FURNITURE_INTERNAL_LINK)),!s||0===s.length)return;_.a.instance.createLinkEvent(s)}}return}}update(){}get disposed(){return!!this._container}get type(){return x.a.INTERNAL_LINK}get container(){return this._container}set container(t){this._container=t}get messageTypes(){return[]}get eventTypes(){return[b.a.REQUEST_INTERNAL_LINK]}}return t.INTERNALLINK="internalLink",t})();class ge{constructor(){this._isDisposed=!1,this._container=null}dispose(){this._isDisposed=!0,this._container=null}processWidgetMessage(t){return null}processEvent(t){switch(t.type){case b.a.REQUEST_MANNEQUIN:{const e=this._container.roomEngine.getRoomObject(t.roomId,t.objectId,t.category);if(!e)return;const s=e.model,i=s.getValue(K.a.FURNITURE_MANNEQUIN_FIGURE),n=s.getValue(K.a.FURNITURE_MANNEQUIN_GENDER),r=s.getValue(K.a.FURNITURE_MANNEQUIN_NAME);return void(i&&n&&this._widget.open(e.id,i,n,r))}}}update(){}get widget(){return this._widget}set widget(t){this._widget=t}get disposed(){return this._isDisposed}get type(){return x.a.MANNEQUIN}set container(t){this._container=t}get container(){return this._container}get messageTypes(){return[]}get eventTypes(){return[b.a.REQUEST_MANNEQUIN]}}let me=(()=>{class t{}return t.WALL="i",t.FLOOR="s",t.EFFECT="e",t.HABBO_CLUB="h",t.BADGE="b",t.GAME_TOKEN="GAME_TOKEN",t.PET="p",t.ROBOT="r",t})(),pe=(()=>{class t extends Q{constructor(t,e,s,i=!1,n=null,r=null,a=null){super(t),this._objectId=-1,this._classId=0,this._itemType="",this._giftMessage="",this._extra=null,this._placedItemId=-1,this._placedItemType="",this._objectId=e,this._giftMessage=s,this._extra=n,this._isController=i,this._purchaserName=r,this._purchaserFigure=a}get objectId(){return this._objectId}get classId(){return this._classId}set classId(t){this._classId=t}get itemType(){return this._itemType}set itemType(t){this._itemType=t}get giftMessage(){return this._giftMessage}get extra(){return this._extra}get isController(){return this._isController}get purchaserName(){return this._purchaserName}get purchaserFigure(){return this._purchaserFigure}get placedItemId(){return this._placedItemId}set placedItemId(t){this._placedItemId=t}get placedInRoom(){return this._placedInRoom}set placedInRoom(t){this._placedInRoom=t}get placedItemType(){return this._placedItemType}set placedItemType(t){this._placedItemType=t}}return t.RWPDUE_PACKAGEINFO="RWPDUE_PACKAGEINFO",t.RWPDUE_CONTENTS="RWPDUE_CONTENTS",t.RWPDUE_CONTENTS_CLUB="RWPDUE_CONTENTS_CLUB",t.RWPDUE_CONTENTS_FLOOR="RWPDUE_CONTENTS_FLOOR",t.RWPDUE_CONTENTS_LANDSCAPE="RWPDUE_CONTENTS_LANDSCAPE",t.RWPDUE_CONTENTS_WALLPAPER="RWPDUE_CONTENTS_WALLPAPER",t.RWPDUE_CONTENTS_IMAGE="RWPDUE_CONTENTS_IMAGE",t})(),fe=(()=>{class t extends at{constructor(t,e){super(t),this._objectId=e}get objectId(){return this._objectId}}return t.RWPOM_OPEN_PRESENT="RWPOM_OPEN_PRESENT",t})(),Ee=(()=>{class t{constructor(){this._name=null,this._objectId=-1,this._isDisposed=!1,this._container=null}dispose(){this._name=null,this._objectId=-1,this._container=null,this._isDisposed=!0}processWidgetMessage(t){if(!t)return null;switch(t.type){case te.REQUEST_PRESENT:{const e=t,s=this._container.roomEngine.getRoomObject(e.roomId,e.objectId,e.category);if(!s)return null;this._objectId=e.objectId;const i=s.model.getValue(K.a.FURNITURE_DATA)||"",n=s.model.getValue(K.a.FURNITURE_PURCHASER_NAME),r=s.model.getValue(K.a.FURNITURE_PURCHASER_FIGURE),a=(s.model.getValue(K.a.FURNITURE_TYPE_ID),s.model.getValue(K.a.FURNITURE_EXTRAS));this._container.events.dispatchEvent(new pe(pe.RWPDUE_PACKAGEINFO,e.objectId,i,this._container.isOwnerOfFurniture(s),a,n,r));break}case fe.RWPOM_OPEN_PRESENT:{const e=t;if(e.objectId!==this._objectId)return null;this._container&&(this._container.roomSession.openGift(e.objectId),this._container.roomEngine.changeObjectModelData(this._container.roomEngine.activeRoomId,e.objectId,V.a.FLOOR,K.a.FURNITURE_DISABLE_PICKING_ANIMATION,1));break}}return null}processEvent(e){if(e&&this._container&&this._container.events)switch(e.type){case N.a.RSPE_PRESENT_OPENED:{const s=e;let i=null;s.itemType===me.FLOOR?i=this._container.sessionDataManager.getFloorItemData(s.classId):s.itemType===me.WALL&&(i=this._container.sessionDataManager.getWallItemData(s.classId));let n=!1;if(s.placedInRoom){const t=this._container.roomEngine.getRoomObject(this._container.roomSession.roomId,s.placedItemId,V.a.FLOOR);t&&(n=this._container.isOwnerOfFurniture(t))}let r=null;switch(s.itemType){case me.WALL:if(i)switch(i.className){case t.LANDSCAPE:r=new pe(pe.RWPDUE_CONTENTS_LANDSCAPE,0,_.a.instance.localization.getValue("inventory.furni.item.landscape.name"),n);break;case t.WALLPAPER:r=new pe(pe.RWPDUE_CONTENTS_WALLPAPER,0,_.a.instance.localization.getValue("inventory.furni.item.wallpaper.name"),n);break;case t.POSTER:{const t=s.productCode;let e=null;0===t.indexOf("poster")&&(e=t.replace("poster",""));const a=this._container.sessionDataManager.getProductData(t);let o="";a?o=a.name:i&&(o=i.name),r=new pe(pe.RWPDUE_CONTENTS,0,o,n,e);break}default:r=new pe(pe.RWPDUE_CONTENTS,0,i.name||"",n)}break;case me.HABBO_CLUB:r=new pe(pe.RWPDUE_CONTENTS_CLUB,0,_.a.instance.localization.getValue("widget.furni.present.hc"),!1);break;default:{const t=this._container.sessionDataManager.getFloorItemData(s.classId);let e="";t?e=t.name:i&&(e=i.name),r=new pe(pe.RWPDUE_CONTENTS,0,e,n);break}}r&&(r.classId=s.classId,r.itemType=s.itemType,r.placedItemId=s.placedItemId,r.placedInRoom=s.placedInRoom,r.placedItemType=s.placedItemType,this._container.events.dispatchEvent(r));break}}}update(){}get disposed(){return this._isDisposed}get type(){return x.a.FURNI_PRESENT_WIDGET}set container(t){this._container=t}get messageTypes(){return[te.REQUEST_PRESENT,fe.RWPOM_OPEN_PRESENT]}get eventTypes(){return[N.a.RSPE_PRESENT_OPENED]}imageFailed(t){}imageReady(t,e,s){}}return t.FLOOR="floor",t.WALLPAPER="wallpaper",t.LANDSCAPE="landscape",t.POSTER="poster",t})();var Se=s("10wl"),ve=s("9RxG");let be=(()=>{class t{constructor(){this._container=null,this._messages=[],this._link=null,this._roomIdToEnter=0,this._confirmDialog=null}dispose(){this.container=null,this._link=null,this._roomIdToEnter=0,this.closeConfirmDialog()}processWidgetMessage(t){return null}processEvent(e){if(!e)return;let s=null;switch(e.type){case b.a.REQUEST_ROOM_LINK:if(s=e,s&&this._container.roomEngine){const e=this._container.roomEngine.getRoomObject(s.roomId,s.objectId,s.category);if(e&&e.model){let s=e.model.getValue(K.a.FURNITURE_DATA)[t.INTERNALLINK];if(s&&""!==s&&0!==s.length||(s=e.model.getValue(K.a.FURNITURE_INTERNAL_LINK)),!s||0===s.length)return;this.closeConfirmDialog(),this._link=s,this._roomIdToEnter=parseInt(s,10),this._container&&this._container.connection&&this._container.connection.send(new ve.a(this._roomIdToEnter,!1,!1))}}return}}onRoomInfoEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=e.data;if(!s)return;if(s.roomId!==this._roomIdToEnter)return;this._roomIdToEnter=0;const i=s.roomName,n=s.ownerName;let r=_.a.instance.getLocalization("room.link.confirmation.message");r&&r.indexOf("%%room_name%%")>-1&&(r=r.replace("%%room_name%%",i)),r&&r.indexOf("%%owner_name%%")>-1&&(r=r.replace("%%owner_name%%",n)),this.closeConfirmDialog(),this._container&&this._container.notificationService&&(this._confirmDialog=this._container.notificationService.alertWithConfirm(r,null,()=>{_.a.instance.createLinkEvent("navigator/goto/"+this._link)}))}closeConfirmDialog(){this._confirmDialog&&(this._confirmDialog.close(),this._confirmDialog=null)}update(){}get disposed(){return!!this._container}get type(){return x.a.ROOM_LINK}get container(){return this._container}set container(t){if(t!==this._container&&this._container){for(const t of this._messages)this._container.connection.removeMessageEvent(t);this._messages=[]}if(this._container=t,this._container){this._messages=[new Se.a(this.onRoomInfoEvent.bind(this))];for(const e of this._messages)t.connection.addMessageEvent(e)}}get messageTypes(){return[]}get eventTypes(){return[b.a.REQUEST_ROOM_LINK]}}return t.INTERNALLINK="internalLink",t})(),Ie=(()=>{class t extends Q{constructor(t,e,s,i,n,r){super(t),this._Str_2319=-1,this._Str_2319=e,this._Str_3796=s,this._text=i,this._Str_3062=n,this._controller=r}get _Str_1577(){return this._Str_2319}get _Str_1723(){return this._Str_3796}get text(){return this._text}get _Str_10471(){return this._Str_3062}get controller(){return this._controller}}return t.RWSDUE_STICKIE_DATA="RWSDUE_STICKIE_DATA",t})(),Re=(()=>{class t extends at{constructor(t,e,s="",i=""){super(t),this._objectId=e,this._text=s,this._colorHex=i}get objectId(){return this._objectId}get text(){return this._text}get colorHex(){return this._colorHex}}return t.SEND_UPDATE="RWSUM_STICKIE_SEND_UPDATE",t.SEND_DELETE="RWSUM_STICKIE_SEND_DELETE",t})();class Te{constructor(){this._container=null,this._isDisposed=!1}dispose(){this._container=null,this._isDisposed=!0}processWidgetMessage(t){if(!t)return null;switch(t.type){case te.REQUEST_STICKIE:{const e=t,s=this._container.roomEngine.getRoomObject(e.roomId,e.objectId,e.category);if(s){const t=s.model.getValue(K.a.FURNITURE_ITEMDATA);if(t.length<6)return null;let i=null,n=null;t.indexOf(" ")>0?(i=t.slice(0,t.indexOf(" ")),n=t.slice(t.indexOf(" ")+1,t.length)):i=t,this._container.events.dispatchEvent(new Ie(Ie.RWSDUE_STICKIE_DATA,e.objectId,s.type,n,i,this._container.roomSession.isRoomOwner||this._container.sessionDataManager.isModerator))}break}case Re.SEND_UPDATE:this._container.roomEngine.modifyRoomObjectData(t.objectId,V.a.WALL,t.colorHex,t.text);break;case Re.SEND_DELETE:this._container.roomEngine.deleteRoomObject(t.objectId,V.a.WALL)}return null}processEvent(t){}update(){}get disposed(){return this._isDisposed}get type(){return x.a.FURNI_STICKIE_WIDGET}set container(t){this._container=t}get messageTypes(){return[te.REQUEST_STICKIE,Re.SEND_DELETE,Re.SEND_UPDATE]}get eventTypes(){return[]}}let Oe=(()=>{class t extends Q{constructor(t,e,s,i,n,r){super(t),this._name=e,this._date=s,this._message=i,this._color=n,this._viewType=r}get name(){return this._name}get date(){return this._date}get message(){return this._message}get color(){return this._color}get viewType(){return this._viewType}}return t.TROPHY_DATA="RWTDUE_TROPHY_DATA",t})();class ye{constructor(){this._container=null}dispose(){this._container=null}processWidgetMessage(t){if(!t||!this.container)return null;switch(t.type){case te.REQUEST_TROPHY:{const e=this._container.roomEngine.getRoomObject(t.roomId,t.objectId,t.category);if(e){let t=e.model.getValue(K.a.FURNITURE_DATA),s=e.model.getValue(K.a.FURNITURE_EXTRAS);s||(s="0");const i=e.model.getValue(K.a.FURNITURE_COLOR),n=t.substring(0,t.indexOf("\t"));t=t.substring(n.length+1,t.length);const r=t.substring(0,t.indexOf("\t")),a=t.substr(r.length+1,t.length);this._container.events.dispatchEvent(new Oe(Oe.TROPHY_DATA,n,r,a,parseInt(i),parseInt(s)))}break}}return null}processEvent(t){}update(){}get disposed(){return!!this._container}get type(){return x.a.FURNI_TROPHY_WIDGET}get container(){return this._container}set container(t){this._container=t}get messageTypes(){return[te.REQUEST_TROPHY]}get eventTypes(){return[]}}s("whnG");var Ce=s("X+hw"),Ae=s("pGYl"),Me=s("0DoP"),we=s("/FfH"),De=s("2L69"),Ne=s("/OJ4"),Ue=s("e6Xd"),xe=s("6j78");let Le=(()=>{class t extends Q{constructor(e,s,i,n,r){super(t.RWONE_TYPE),this._userId=e,this._category=s,this._userName=i,this._userType=n,this._roomIndex=r}get userId(){return this._userId}get category(){return this._category}get userName(){return this._userName}get userType(){return this._userType}get roomIndex(){return this._roomIndex}}return t.RWONE_TYPE="RWONE_TYPE",t})(),Pe=(()=>{class t extends Q{constructor(e,s){super(t.RWWCIDE_CHAT_INPUT_CONTENT),this._Str_21134="",this._userName="",this._Str_21134=e,this._userName=s}get _Str_23621(){return this._Str_21134}get userName(){return this._userName}}return t.RWWCIDE_CHAT_INPUT_CONTENT="RWWCIDE_CHAT_INPUT_CONTENT",t.WHISPER="whisper",t.SHOUT="shout",t})(),Fe=(()=>{class t extends Q{constructor(t){super(t),this._id=0,this._category=0,this._name="",this._description="",this._image=null,this._isWallItem=!1,this._isStickie=!1,this._isRoomOwner=!1,this._roomControllerLevel=0,this._isAnyRoomController=!1,this._expiration=-1,this._purchaseCatalogPageId=-1,this._purchaseOfferId=-1,this._extraParam="",this._isOwner=!1,this._stuffData=null,this._groupId=0,this._ownerId=0,this._ownerName="",this._usagePolicy=0,this._rentCatalogPageId=-1,this._rentOfferId=-1,this._purchaseCouldBeUsedForBuyout=!1,this._rentCouldBeUsedForBuyout=!1,this._availableForBuildersClub=!1}set id(t){this._id=t}get id(){return this._id}set category(t){this._category=t}get category(){return this._category}set name(t){this._name=t}get name(){return this._name}set description(t){this._description=t}get description(){return this._description}set image(t){this._image=t}get image(){return this._image}set isWallItem(t){this._isWallItem=t}get isWallItem(){return this._isWallItem}set isStickie(t){this._isStickie=t}get isStickie(){return this._isStickie}set isRoomOwner(t){this._isRoomOwner=t}get isRoomOwner(){return this._isRoomOwner}set roomControllerLevel(t){this._roomControllerLevel=t}get roomControllerLevel(){return this._roomControllerLevel}set isAnyRoomOwner(t){this._isAnyRoomController=t}get isAnyRoomOwner(){return this._isAnyRoomController}set expiration(t){this._expiration=t}get expiration(){return this._expiration}set purchaseOfferId(t){this._purchaseOfferId=t}get purchaseOfferId(){return this._purchaseOfferId}set extraParam(t){this._extraParam=t}get extraParam(){return this._extraParam}set isOwner(t){this._isOwner=t}get isOwner(){return this._isOwner}set stuffData(t){this._stuffData=t}get stuffData(){return this._stuffData}set groupId(t){this._groupId=t}get groupId(){return this._groupId}set ownerId(t){this._ownerId=t}get ownerId(){return this._ownerId}set ownerName(t){this._ownerName=t}get ownerName(){return this._ownerName}set usagePolicy(t){this._usagePolicy=t}get usagePolicy(){return this._usagePolicy}set rentOfferId(t){this._rentOfferId=t}get rentOfferId(){return this._rentOfferId}get purchaseCouldBeUsedForBuyout(){return this._purchaseCouldBeUsedForBuyout}set purchaseCouldBeUsedForBuyout(t){this._purchaseCouldBeUsedForBuyout=t}get rentCouldBeUsedForBuyout(){return this._rentCouldBeUsedForBuyout}set rentCouldBeUsedForBuyout(t){this._rentCouldBeUsedForBuyout=t}get availableForBuildersClub(){return this._availableForBuildersClub}set availableForBuildersClub(t){this._availableForBuildersClub=t}}return t.FURNI="RWFIUE_FURNI",t})(),ke=(()=>{class t extends Q{constructor(e,s,i,n,r,a,o,c,h,l){super(t.PET_INFO),this._Str_6689=e,this._Str_20932=s,this._name=i,this._id=n,this._image=r,this._Str_10121=a,this._ownerId=o,this._ownerName=c,this._Str_2775=h,this._unknownRarityLevel=l}get name(){return this._name}get image(){return this._image}get id(){return this._id}get _Str_4355(){return this._Str_6689}get _Str_14767(){return this._Str_20932}get _Str_5175(){return this._Str_10121}get ownerId(){return this._ownerId}get ownerName(){return this._ownerName}get _Str_2707(){return this._Str_2775}get unknownRarityLevel(){return this._unknownRarityLevel}get level(){return this._level}set level(t){this._level=t}get maximumLevel(){return this._maximumLevel}set maximumLevel(t){this._maximumLevel=t}get experience(){return this._experience}set experience(t){this._experience=t}get levelExperienceGoal(){return this._levelExperienceGoal}set levelExperienceGoal(t){this._levelExperienceGoal=t}get energy(){return this._energy}set energy(t){this._energy=t}get maximumEnergy(){return this._maximumEnergy}set maximumEnergy(t){this._maximumEnergy=t}get happyness(){return this._happyness}set happyness(t){this._happyness=t}get maximumHappyness(){return this._maximumHappyness}set maximumHappyness(t){this._maximumHappyness=t}get _Str_2985(){return this._Str_3973}set _Str_2985(t){this._Str_3973=t}get _Str_5114(){return this._Str_11149}set _Str_5114(t){this._Str_11149=t}get respect(){return this._respect}set respect(t){this._respect=t}get age(){return this._age}set age(t){this._age=t}get saddle(){return this._saddle}set saddle(t){this._saddle=t}get rider(){return this._rider}set rider(t){this._rider=t}get breedable(){return this._breedable}set breedable(t){this._breedable=t}get _Str_3307(){return this._Str_4460}set _Str_3307(t){this._Str_4460=t}get publiclyRideable(){return this._publiclyRideable}set publiclyRideable(t){this._publiclyRideable=t}get fullyGrown(){return this._fullyGrown}set fullyGrown(t){this._fullyGrown=t}get dead(){return this._dead}set dead(t){this._dead=t}get rarityLevel(){return this._rarityLevel}set rarityLevel(t){this._rarityLevel=t}get maximumTimeToLive(){return this._maximumTimeToLive}set maximumTimeToLive(t){this._maximumTimeToLive=t}get remainingTimeToLive(){return this._remainingTimeToLive}set remainingTimeToLive(t){this._remainingTimeToLive=t}get remainingGrowTime(){return this._remainingGrowTime}set remainingGrowTime(t){this._remainingGrowTime=t}get publiclyBreedable(){return this._publiclyBreedable}set publiclyBreedable(t){this._publiclyBreedable=t}}return t.PET_INFO="RWPIUE_PET_INFO",t})(),Ve=(()=>{class t extends Q{constructor(){super(t.RENTABLE_BOT),this._name="",this._motto="",this._Str_4900=0,this._figure="",this._caryId=0,this._Str_5131=0,this._Str_4026=!1,this._Str_4028=!1,this._roomControllerLevel=0,this._badges=[]}set name(t){this._name=t}get name(){return this._name}set motto(t){this._motto=t}get motto(){return this._motto}set id(t){this._Str_4900=t}get id(){return this._Str_4900}set figure(t){this._figure=t}get figure(){return this._figure}set badges(t){this._badges=t}get badges(){return this._badges}get ownerId(){return this._ownerId}set ownerId(t){this._ownerId=t}get ownerName(){return this._ownerName}set ownerName(t){this._ownerName=t}set _Str_3246(t){this._Str_4026=t}get _Str_3246(){return this._Str_4026}set roomControllerLevel(t){this._roomControllerLevel=t}get roomControllerLevel(){return this._roomControllerLevel}set _Str_3529(t){this._Str_4028=t}get _Str_3529(){return this._Str_4028}set carryId(t){this._caryId=t}get carryId(){return this._caryId}set roomIndex(t){this._Str_5131=t}get roomIndex(){return this._Str_5131}get botSkills(){return this._Str_3986}set botSkills(t){this._Str_3986=t}}return t.RENTABLE_BOT="RWRBIUE_RENTABLE_BOT",t._Str_7492="RENTABLE_BOT",t})(),Be=(()=>{class t extends Q{constructor(t){super(t),this._name="",this._motto="",this._Str_4900=0,this._xp=0,this._figure="",this._groupId=0,this._groupName="",this._Str_11289="",this._Str_5228=0,this._Str_5131=0,this._Str_8522=!1,this._realName="",this._Str_3947=!1,this._Str_4026=!1,this._Str_4028=!1,this._roomControllerLevel=0,this._canBeAskedForAFriend=!1,this._Str_9070=!1,this._Str_8457=!1,this._Str_8831=!1,this._Str_3437=0,this._Str_6028=!1,this._Str_6139=!1,this._Str_8973=!1,this._Str_8910=0,this._Str_8858=0,this._isFriend=!1,this._Str_4890=!1,this._badges=[]}set name(t){this._name=t}get name(){return this._name}set motto(t){this._motto=t}get motto(){return this._motto}set activityPoints(t){this._activityPoints=t}get activityPoints(){return this._activityPoints}set webID(t){this._Str_4900=t}get webID(){return this._Str_4900}set xp(t){this._xp=t}get xp(){return this._xp}set userType(t){this._Str_3021=t}get userType(){return this._Str_3021}set figure(t){this._figure=t}get figure(){return this._figure}set badges(t){this._badges=t}get badges(){return this._badges}set groupId(t){this._groupId=t}get groupId(){return this._groupId}set groupName(t){this._groupName=t}get groupName(){return this._groupName}set groupBadgeId(t){this._Str_11289=t}get groupBadgeId(){return this._Str_11289}set canBeAskedForAFriend(t){this._canBeAskedForAFriend=t}get canBeAskedForAFriend(){return this._canBeAskedForAFriend}set respectLeft(t){this._Str_3437=t}get respectLeft(){return this._Str_3437}set isIgnored(t){this._Str_6028=t}get isIgnored(){return this._Str_6028}set isRoomOwner(t){this._Str_4026=t}get isRoomOwner(){return this._Str_4026}set isGuildRoom(t){this._Str_6139=t}get isGuildRoom(){return this._Str_6139}set roomControllerLevel(t){this._roomControllerLevel=t}get roomControllerLevel(){return this._roomControllerLevel}set isModerator(t){this._Str_4028=t}get isModerator(){return this._Str_4028}set canTrade(t){this._Str_8973=t}get canTrade(){return this._Str_8973}set _Str_6622(t){this._Str_8910=t}get _Str_6622(){return this._Str_8910}set _Str_5990(t){this._Str_9070=t}get _Str_5990(){return this._Str_9070}set _Str_6701(t){this._Str_8457=t}get _Str_6701(){return this._Str_8457}get _Str_6394(){return this._Str_8831}set _Str_6394(t){this._Str_8831=t}set flatControl(t){this._Str_8858=t}get flatControl(){return this._Str_8858}set carryId(t){this._Str_5228=t}get carryId(){return this._Str_5228}set roomIndex(t){this._Str_5131=t}get roomIndex(){return this._Str_5131}set isSpectator(t){this._Str_8522=t}get isSpectator(){return this._Str_8522}set realName(t){this._realName=t}get realName(){return this._realName}set _Str_4330(t){this._Str_3947=t}get _Str_4330(){return this._Str_3947}get isFriend(){return this._isFriend}set isFriend(t){this._isFriend=t}get isAmbassador(){return this._Str_4890}set isAmbassador(t){this._Str_4890=t}}return t.OWN_USER="RWUIUE_OWN_USER",t.BOT="RWUIUE_BOT",t.PEER="RWUIUE_PEER",t._Str_18400=0,t._Str_14161=2,t._Str_13798=3,t._Str_7492="BOT",t})(),We=(()=>{class t extends at{constructor(e){super(t.RWVM_CHANGE_MOTTO_MESSAGE),this._motto=e}get motto(){return this._motto}}return t.RWVM_CHANGE_MOTTO_MESSAGE="RWVM_CHANGE_MOTTO_MESSAGE",t})(),Ke=(()=>{class t extends at{constructor(t,e,s,i=-1,n=null){super(t),this._furniId=e,this._furniCategory=s,this._offerId=i,this._objectData=n}get furniId(){return this._furniId}get furniCategory(){return this._furniCategory}get objectData(){return this._objectData}get _Str_2451(){return this._offerId}}return t.RWFUAM_ROTATE="RWFUAM_ROTATE",t.RWFAM_MOVE="RWFAM_MOVE",t.RWFAM_PICKUP="RWFAM_PICKUP",t.RWFAM_EJECT="RWFAM_EJECT",t.RWFAM_USE="RWFAM_USE",t.RWFAM_OPEN_WELCOME_GIFT="RWFAM_OPEN_WELCOME_GIFT",t.RWFAM_SAVE_STUFF_DATA="RWFAM_SAVE_STUFF_DATA",t})(),Ge=(()=>{class t{constructor(){this.container=null,this._widget=null,this._disposed=!1,this.onRoomSessionPetInfoUpdateEvent=this.onRoomSessionPetInfoUpdateEvent.bind(this)}dispose(){this.disposed||(this.container=null,this._disposed=!0)}update(){}processWidgetMessage(t){if(!t||!this._container)return null;let e=0,s=null;if(t instanceof ut&&(e=t.userId,s=[ut.RWUAM_REQUEST_PET_UPDATE,ut.RWUAM_RESPECT_PET,ut.RWUAM_PICKUP_PET,ut.RWUAM_MOUNT_PET,ut.RWUAM_TOGGLE_PET_RIDING_PERMISSION,ut.RWUAM_TOGGLE_PET_BREEDING_PERMISSION,ut.RWUAM_DISMOUNT_PET,ut.RWUAM_SADDLE_OFF,ut.RWUAM_GIVE_CARRY_ITEM_TO_PET,ut.RWUAM_GIVE_WATER_TO_PET,ut.RWUAM_GIVE_LIGHT_TO_PET,ut.RWUAM_TREAT_PET].indexOf(t.type)>=0?this._container.roomSession.userDataManager.getPetData(e):this._container.roomSession.userDataManager.getUserData(e),!s))return null;let i=0,n=0;switch(t instanceof Ke&&(i=t.furniId,n=t.furniCategory),t.type){case lt.GET_OBJECT_INFO:return this.processObjectInfoMessage(t);case lt.GET_OBJECT_NAME:return this.processObjectNameMessage(t);case ut.RWUAM_SEND_FRIEND_REQUEST:this._container.friendService.sendFriendRequest(e,s.name);break;case ut.RWUAM_RESPECT_USER:this._container.sessionDataManager.giveRespect(e);break;case ut.RWUAM_RESPECT_PET:this._container.sessionDataManager.givePetRespect(e);break;case ut.RWUAM_WHISPER_USER:this._container.events.dispatchEvent(new Pe(Pe.WHISPER,s.name));break;case ut.RWUAM_IGNORE_USER:this._container.sessionDataManager.ignoreUser(s.name);break;case ut.RWUAM_UNIGNORE_USER:this._container.sessionDataManager.unignoreUser(s.name);break;case ut.RWUAM_KICK_USER:this._container.roomSession.sendKickMessage(t.userId);break;case ut.RWUAM_BAN_USER_DAY:case ut.RWUAM_BAN_USER_HOUR:case ut.RWUAM_BAN_USER_PERM:this._container.roomSession.sendBanMessage(t.userId,t.type);break;case ut.MUTE_USER_2MIN:this._container.roomSession.sendMuteMessage(t.userId,2);break;case ut.MUTE_USER_5MIN:this._container.roomSession.sendMuteMessage(t.userId,5);break;case ut.MUTE_USER_10MIN:this._container.roomSession.sendMuteMessage(t.userId,10);break;case ut.RWUAM_GIVE_RIGHTS:this._container.roomSession.sendGiveRightsMessage(t.userId);break;case ut.RWUAM_TAKE_RIGHTS:this._container.roomSession.sendTakeRightsMessage(t.userId);break;case ut.RWUAM_START_TRADING:s&&this._widget.inventoryTrading.startTrade(s.roomIndex,s.name);break;case ut.RWUAM_PASS_CARRY_ITEM:this._container.connection.send(new Me.a(e));break;case ut.RWUAM_GIVE_CARRY_ITEM_TO_PET:case ut.RWUAM_GIVE_WATER_TO_PET:case ut.RWUAM_GIVE_LIGHT_TO_PET:case ut.RWUAM_TREAT_PET:break;case ut.RWUAM_DROP_CARRY_ITEM:this._container.connection.send(new Ae.a);break;case Ke.RWFUAM_ROTATE:this._container.roomEngine.processRoomObjectOperation(i,n,B.a.OBJECT_ROTATE_POSITIVE);break;case Ke.RWFAM_MOVE:this._container.roomEngine.processRoomObjectOperation(i,n,B.a.OBJECT_MOVE);break;case Ke.RWFAM_PICKUP:this._container.roomEngine.processRoomObjectOperation(i,n,B.a.OBJECT_PICKUP);break;case Ke.RWFAM_EJECT:this._container.roomEngine.processRoomObjectOperation(i,n,B.a.OBJECT_EJECT);break;case Ke.RWFAM_USE:this._container.roomEngine.useRoomObject(i,n);break;case We.RWVM_CHANGE_MOTTO_MESSAGE:return void this._container.roomSession.sendMottoMessage(t.motto);case Ke.RWFAM_SAVE_STUFF_DATA:{const e=t.objectData;if(e){const t=new Map,s=e.split("\t");if(s)for(const e of s){const s=e.split("=",2);s&&2===s.length&&t.set(s[0],s[1])}this._container.roomEngine.processRoomObjectWallOperation(i,n,B.a.OBJECT_SAVE_STUFF_DATA,t),this._Str_23922(t),t.clear()}break}case ut.RWUAM_REQUEST_PET_UPDATE:this._container.roomSession&&this._container.roomSession.userDataManager&&this._container.roomSession.userDataManager.requestPetInfo(e);break;case ut.RWUAM_REPORT:case ut.RWUAM_REPORT_CFH_OTHER:break;case ut.RWUAM_AMBASSADOR_ALERT_USER:this._container.roomSession.sendAmbassadorAlertMessage(t.userId);break;case ut.RWUAM_AMBASSADOR_KICK_USER:this._container.roomSession.sendKickMessage(t.userId);break;case ut.AMBASSADOR_MUTE_USER_2MIN:this._container.roomSession.sendMuteMessage(t.userId,2);break;case ut.AMBASSADOR_MUTE_USER_10MIN:this._container.roomSession.sendMuteMessage(t.userId,10);break;case ut.AMBASSADOR_MUTE_USER_60MIN:this._container.roomSession.sendMuteMessage(t.userId,60);break;case ut.AMBASSADOR_MUTE_USER_18HOUR:this._container.roomSession.sendMuteMessage(t.userId,1080)}return null}processEvent(t){if(event)switch(t.type){case U.a.RSUBE_BADGES:return void this.widget.updateUserBadges(t.userId,t.badges)}}processObjectInfoMessage(t){const e=this._container.roomSession.roomId;switch(t.category){case V.a.FLOOR:case V.a.WALL:this._Str_23142(t,e);break;case V.a.UNIT:{if(!(this._container.roomSession&&this._container.sessionDataManager&&this._container.events&&this._container.roomEngine))return null;const s=this._container.roomSession.userDataManager.getUserDataByIndex(t.id);if(!s)return null;switch(s.type){case W.a.PET:this.selectPet(s.webID);break;case W.a.USER:this._Str_22722(e,t.id,t.category,s);break;case W.a.BOT:this._Str_22312(e,t.id,t.category,s);break;case W.a.RENTABLE_BOT:this._Str_23115(e,t.id,t.category,s)}break}}return null}processObjectNameMessage(t){const e=this._container.roomSession.roomId;let s=0,i=null,n=0,r=0;switch(t.category){case V.a.FLOOR:case V.a.WALL:{if(!this._container.events||!this._container.roomEngine)return null;const n=this._container.roomEngine.getRoomObject(e,t.id,t.category),a=n.type;if(0===a.indexOf("poster"))s=-1,i="${poster_"+parseInt(a.replace("poster",""))+"_name}",r=n.id;else{let e=null;const a=n.model.getValue(K.a.FURNITURE_TYPE_ID);if(t.category===V.a.FLOOR?e=this._container.sessionDataManager.getFloorItemData(a):t.category===V.a.WALL&&(e=this._container.sessionDataManager.getWallItemData(a)),!e)return null;s=e.id,i=e.name,r=n.id}break}case V.a.UNIT:{if(!this._container.roomSession||!this._container.roomSession.userDataManager)return null;const e=this._container.roomSession.userDataManager.getUserDataByIndex(t.id);if(!e)return null;s=e.webID,i=e.name,n=e.type,r=e.roomIndex;break}}return i&&this._container.events.dispatchEvent(new Le(s,t.category,i,n,r)),null}_Str_23142(t,e){if(!this._container||!this._container.events||!this._container.roomEngine)return;if(t.id<0)return;const s=new Fe(Fe.FURNI);s.id=t.id,s.category=t.category;const i=this._container.roomEngine.getRoomObject(e,t.id,t.category);if(!i)return;const n=i.model;n.getValue(xe.a.INFOSTAND_EXTRA_PARAM)&&(s.extraParam=n.getValue(xe.a.INFOSTAND_EXTRA_PARAM));const r=n.getValue(K.a.FURNITURE_DATA_FORMAT),a=De.a.getData(r);a.initializeFromRoomObjectModel(n),s.stuffData=a;const o=i.type;if(0===o.indexOf("poster")){const t=parseInt(o.replace("poster",""));s.name="${poster_"+t+"_name}",s.description="${poster_"+t+"_desc}"}else{const e=n.getValue(K.a.FURNITURE_TYPE_ID);let r=null;t.category===V.a.FLOOR?r=this._container.sessionDataManager.getFloorItemData(e):t.category==V.a.WALL&&(r=this._container.sessionDataManager.getWallItemData(e)),r&&(s.name=r.name,s.description=r.description,s.purchaseOfferId=r.purchaseOfferId,s.purchaseCouldBeUsedForBuyout=r.purchaseCouldBeUsedForBuyout,s.rentOfferId=r.rentOfferId,s.rentCouldBeUsedForBuyout=r.rentCouldBeUsedForBuyout,s.availableForBuildersClub=r.availableForBuildersClub,this._container.wiredService&&t.category===V.a.FLOOR&&this._container.wiredService.selectFurniture(i.id,r.name))}o.indexOf("post_it")>-1&&(s.isStickie=!0);const c=n.getValue(K.a.FURNITURE_EXPIRY_TIME),h=n.getValue(K.a.FURNITURE_EXPIRTY_TIMESTAMP);s.expiration=c<0?c:Math.max(0,c-(_.a.instance.time-h)/1e3);let l=this._container.roomEngine.getRoomObjectImage(e,t.id,t.category,new Z.a(180),64,null);if((!l.data||l.data.width>140||l.data.height>200)&&(l=this._container.roomEngine.getRoomObjectImage(e,t.id,t.category,new Z.a(180),1,null)),l&&l.data){const t=_.a.instance.renderer.extract.image(l.data);t&&(s.image=t)}s.isWallItem=t.category===V.a.WALL,s.isRoomOwner=this._container.roomSession.isRoomOwner,s.roomControllerLevel=this._container.roomSession.controllerLevel,s.isAnyRoomOwner=this._container.sessionDataManager.isModerator,s.ownerId=n.getValue(K.a.FURNITURE_OWNER_ID),s.ownerName=n.getValue(K.a.FURNITURE_OWNER_NAME),s.usagePolicy=n.getValue(K.a.FURNITURE_USAGE_POLICY);const u=n.getValue(K.a.FURNITURE_GUILD_CUSTOMIZED_GUILD_ID);0!==u&&(s.groupId=u),this._container.isOwnerOfFurniture(i)&&(s.isOwner=!0),this._container.events.dispatchEvent(s)}selectPet(t){this._container.roomSession.userDataManager.requestPetInfo(t)}_Str_22722(e,s,i,n){let r=Be.OWN_USER;n.webID!==this._container.sessionDataManager.userId&&(r=Be.PEER);const a=new Be(r);a.isSpectator=this._container.roomSession.isSpectator,a.name=n.name,a.motto=n.custom,t.ACTIVITY_POINTS_DISPLAY_ENABLED&&(a.activityPoints=n.activityPoints),a.webID=n.webID,a.roomIndex=s,a.userType=W.a.USER;const o=this._container.roomEngine.getRoomObject(e,s,i);if(o&&(a.carryId=o.model.getValue(K.a.FIGURE_CARRY_OBJECT)),r==Be.OWN_USER&&(a.realName=this._container.sessionDataManager.realName,a._Str_4330=this._container.sessionDataManager.canChangeName),a.isRoomOwner=this._container.roomSession.isRoomOwner,a.isGuildRoom=this._container.roomSession.isGuildRoom,a.roomControllerLevel=this._container.roomSession.controllerLevel,a.isModerator=this._container.sessionDataManager.isModerator,a.isAmbassador=this._container.sessionDataManager.isAmbassador,r===Be.PEER){a.canBeAskedForAFriend=this._container.friendService.canBeAskedForAFriend(n.webID);const t=this._container.friendService.getFriend(n.webID);if(t&&(a.realName=t.realName,a.isFriend=!0),o){const t=o.model.getValue(K.a.FIGURE_FLAT_CONTROL);null!==t&&(a.flatControl=t),a._Str_6394=this._Str_23100(a),a._Str_5990=this._Str_22729(a),a._Str_6701=this._Str_23573(a)}a.isIgnored=this._container.sessionDataManager.isUserIgnored(n.name),a.respectLeft=this._container.sessionDataManager.respectsLeft;const e=this._container.sessionDataManager.isSystemShutdown,s=this._container.roomSession.tradeMode;if(e)a.canTrade=!1;else switch(s){case Ne.a._Str_14475:{const t=a.flatControl!==H.a.NONE&&a.flatControl!==H.a.GUILD_MEMBER;a.canTrade=a.roomControllerLevel!==H.a.NONE&&a.roomControllerLevel!==H.a.GUILD_MEMBER||t;break}case Ne.a._Str_9173:a.canTrade=!0;break;default:a.canTrade=!1}a._Str_6622=Be._Str_18400,e&&(a._Str_6622=Be._Str_14161),s!==Ne.a._Str_9173&&(a._Str_6622=Be._Str_13798)}a.groupId=parseInt(n.guildId),a.groupName=n.groupName,a.badges=this._container.roomSession.userDataManager.getUserBadges(n.webID),a.figure=n.figure,this._container.events.dispatchEvent(a)}_Str_22312(t,e,s,i){const n=new Be(Be.BOT);n.name=i.name,n.motto=i.custom,n.webID=i.webID,n.roomIndex=e,n.userType=i.type;const r=this._container.roomEngine.getRoomObject(t,e,s);r&&(n.carryId=r.model.getValue(K.a.FIGURE_CARRY_OBJECT)),n.isRoomOwner=this._container.roomSession.isRoomOwner,n.isGuildRoom=this._container.roomSession.isGuildRoom,n.roomControllerLevel=this._container.roomSession.controllerLevel,n.isModerator=this._container.sessionDataManager.isModerator,n._Str_5990=this._container.roomSession.isRoomOwner,n.badges=[Be._Str_7492],n.figure=i.figure,this._container.events.dispatchEvent(n)}_Str_23115(t,e,s,i){const n=new Ve;n.name=i.name,n.motto=i.custom,n.id=i.webID,n.roomIndex=e,n.ownerId=i.ownerId,n.ownerName=i.ownerName,n.botSkills=i.botSkills;const r=this._container.roomEngine.getRoomObject(t,e,s);r&&(n.carryId=r.model.getValue(K.a.FIGURE_CARRY_OBJECT)),n._Str_3246=this._container.roomSession.isRoomOwner,n.roomControllerLevel=this._container.roomSession.controllerLevel,n._Str_3529=this._container.sessionDataManager.isModerator,n.badges=[Be._Str_7492],n.figure=i.figure,this._container.events.dispatchEvent(n)}_Str_9213(t){return t.isGuildRoom?t.roomControllerLevel>=H.a.GUILD_ADMIN:t.roomControllerLevel>=H.a.GUEST}_Str_23100(t){const e=(function(t,e){switch(e.allowMute){case we.a._Str_5047:return this._Str_9213(t);default:return t.roomControllerLevel>=H.a.ROOM_OWNER}}).bind(this);return this._Str_18027(t,e)}_Str_22729(t){const e=(function(t,e){switch(e.allowKick){case we.a._Str_11537:return!0;case we.a._Str_5047:return this._Str_9213(t);default:return t.roomControllerLevel>=H.a.ROOM_OWNER}}).bind(this);return this._Str_18027(t,e)}_Str_23573(t){const e=(function(t,e){switch(e.allowBan){case we.a._Str_5047:return this._Str_9213(t);default:return t.roomControllerLevel>=H.a.ROOM_OWNER}}).bind(this);return this._Str_18027(t,e)}_Str_18027(t,e){if(!this._container.roomSession._Str_7411)return!1;const s=this._container.roomSession.moderationSettings;let i=!1;return s&&(i=e(t,s)),i&&t.flatControl<H.a.ROOM_OWNER}_Str_23922(t){this._widget&&this._container.sessionDataManager.hasSecurity(5)&&this._container.connection.send(new Ce.a(this._widget.furniData.id,t))}onRoomSessionPetInfoUpdateEvent(t){if(!t||!this._container||!this._container.events)return;const e=t._Str_24727;if(!e)return;const s=this._container.roomSession.userDataManager.getPetData(e.id);if(!s)return;const i=s.figure,n=this.getPetType(i),r=this.getPetBreed(i);const a=e.ownerId===this._container.sessionDataManager.userId,o=new ke(n,r,s.name,e.id,null,a,e.ownerId,e.ownerName,s.roomIndex,e.rarityLevel);o.level=e.level,o.maximumLevel=e.maximumLevel,o.experience=e.experience,o.levelExperienceGoal=e.levelExperienceGoal,o.energy=e.energy,o.maximumEnergy=e.maximumEnergy,o.happyness=e.happyness,o.maximumHappyness=e.maximumHappyness,o.respect=e.respect,o._Str_2985=this._container.sessionDataManager.respectsPetLeft,o.age=e.age,o.saddle=e.saddle,o.rider=e.rider,o.breedable=e.breedable,o.fullyGrown=e.fullyGrown,o.dead=e.dead,o.rarityLevel=e.rarityLevel,o._Str_3307=e._Str_3307,o._Str_5114=!1,o.publiclyRideable=e.publiclyRideable,o.maximumTimeToLive=e.maximumTimeToLive,o.remainingTimeToLive=e.remainingTimeToLive,o.remainingGrowTime=e.remainingGrowTime,o.publiclyBreedable=e.publiclyBreedable;const c=this._container.roomSession;(a||c.isRoomOwner||this._container.sessionDataManager.isModerator||c.controllerLevel>=H.a.GUEST)&&(o._Str_5114=!0),this._container.events.dispatchEvent(o)}getPetType(t){return this.getPetFigurePart(t,0)}getPetBreed(t){return this.getPetFigurePart(t,1)}getPetFigurePart(t,e){if(!t||!t.length)return-1;const s=t.split(" ");return s.length>0?parseInt(s[e]):-1}get type(){return x.a.INFOSTAND}get messageTypes(){return[lt.GET_OBJECT_INFO,lt.GET_OBJECT_NAME,ut.RWUAM_SEND_FRIEND_REQUEST,ut.RWUAM_RESPECT_USER,ut.RWUAM_WHISPER_USER,ut.RWUAM_IGNORE_USER,ut.RWUAM_UNIGNORE_USER,ut.RWUAM_KICK_USER,ut.RWUAM_BAN_USER_DAY,ut.RWUAM_BAN_USER_HOUR,ut.RWUAM_BAN_USER_PERM,ut.MUTE_USER_2MIN,ut.MUTE_USER_5MIN,ut.MUTE_USER_10MIN,ut.RWUAM_GIVE_RIGHTS,ut.RWUAM_TAKE_RIGHTS,ut.RWUAM_START_TRADING,ut.RWUAM_OPEN_HOME_PAGE,ut.RWUAM_PASS_CARRY_ITEM,ut.RWUAM_GIVE_CARRY_ITEM_TO_PET,ut.RWUAM_DROP_CARRY_ITEM,Ke.RWFAM_MOVE,Ke.RWFUAM_ROTATE,Ke.RWFAM_EJECT,Ke.RWFAM_PICKUP,Ke.RWFAM_USE,Ke.RWFAM_SAVE_STUFF_DATA,ut.RWUAM_REPORT,ut.RWUAM_PICKUP_PET,ut.RWUAM_MOUNT_PET,ut.RWUAM_TOGGLE_PET_RIDING_PERMISSION,ut.RWUAM_TOGGLE_PET_BREEDING_PERMISSION,ut.RWUAM_DISMOUNT_PET,ut.RWUAM_SADDLE_OFF,ut.RWUAM_TRAIN_PET,ut.RWUAM_RESPECT_PET,ut.RWUAM_REQUEST_PET_UPDATE,We.RWVM_CHANGE_MOTTO_MESSAGE,ut.RWUAM_GIVE_LIGHT_TO_PET,ut.RWUAM_GIVE_WATER_TO_PET,ut.RWUAM_TREAT_PET,ut.RWUAM_REPORT_CFH_OTHER,ut.RWUAM_AMBASSADOR_ALERT_USER,ut.RWUAM_AMBASSADOR_KICK_USER,ut.AMBASSADOR_MUTE_USER_2MIN,ut.AMBASSADOR_MUTE_USER_10MIN,ut.AMBASSADOR_MUTE_USER_60MIN,ut.AMBASSADOR_MUTE_USER_18HOUR]}get eventTypes(){return[U.a.RSUBE_BADGES]}get container(){return this._container}set container(t){this._container&&this._container.roomSessionManager&&this._container.roomSessionManager.events.removeEventListener(Ue.a.PET_INFO,this.onRoomSessionPetInfoUpdateEvent),this._container=t,this._container&&this._container.roomSessionManager&&this._container.roomSessionManager.events.addEventListener(Ue.a.PET_INFO,this.onRoomSessionPetInfoUpdateEvent)}get widget(){return this._widget}set widget(t){this._widget=t}get disposed(){return this._disposed}}return t.ACTIVITY_POINTS_DISPLAY_ENABLED=!0,t})(),He=(()=>{class t extends Q{constructor(e,s,i){super(t.RWULUE_USER_LOCATION_UPDATE),this._userId=e,this._rectangle=s,this._Str_20775=i}get userId(){return this._userId}get rectangle(){return this._rectangle}get _Str_9337(){return this._Str_20775}}return t.RWULUE_USER_LOCATION_UPDATE="RWULUE_USER_LOCATION_UPDATE",t})(),je=(()=>{class t extends at{constructor(t,e,s){super(t),this._objectId=e,this._objectType=s}get _Str_1577(){return this._objectId}get _Str_1723(){return this._objectType}}return t.RWGOI_MESSAGE_GET_OBJECT_LOCATION="RWGOI_MESSAGE_GET_OBJECT_LOCATION",t.RWGOI_MESSAGE_GET_GAME_OBJECT_LOCATION="RWGOI_MESSAGE_GET_GAME_OBJECT_LOCATION",t})();class ze{constructor(){this._disposed=!1,this._container=null}dispose(){this._disposed=!0,this._container=null}get disposed(){return this._disposed}get type(){return null}set container(t){this._container=t}get messageTypes(){return[je.RWGOI_MESSAGE_GET_OBJECT_LOCATION,je.RWGOI_MESSAGE_GET_GAME_OBJECT_LOCATION]}processWidgetMessage(t){if(!(t&&this._container&&t instanceof je))return null;const e=this._container.roomSession;switch(t.type){case je.RWGOI_MESSAGE_GET_OBJECT_LOCATION:{if(!e||!e.userDataManager)return null;const s=e.userDataManager.getDataByType(t._Str_1577,t._Str_1723);let i=null,n=null;if(s){i=this._container.roomEngine.getRoomObjectBoundingRectangle(e.roomId,s.roomIndex,V.a.UNIT,this._container.getFirstCanvasId()),n=this._container.roomEngine.getRoomObjectScreenLocation(e.roomId,s.roomIndex,V.a.UNIT,this._container.getFirstCanvasId());const t=this._container.getRoomViewRect();i&&n&&t&&(i.x+=t.x,i.y+=t.y,n.x+=t.x,n.y+=t.y)}return new He(t._Str_1577,i,n)}}return null}get eventTypes(){return[]}processEvent(t){}update(){}}var Ye=s("kRfe");let qe=(()=>{class t extends at{constructor(){super(t.RWZTM_ZOOM_TOGGLE)}}return t.RWZTM_ZOOM_TOGGLE="RWZTM_ZOOM_TOGGLE",t})();class Ze{constructor(){this._zoomed=!1,this._communicationManager=_.a.instance.communication,this._container=null,this._widget=null,this._messages=[],this._disposed=!1,this.onRoomInfoEvent=this.onRoomInfoEvent.bind(this)}dispose(){if(!this._disposed){this._communicationManager=null,this._widget=null;for(const t of this._messages)this._container.connection.removeMessageEvent(t);this._container=null,this._messages=[],this._disposed=!0}}update(){}processWidgetMessage(t){return t instanceof qe&&(this._container.roomEngine.events.dispatchEvent(new T(this._container.roomEngine.activeRoomId,this._zoomed?1:0,!1)),this._zoomed=!this._zoomed),null}processEvent(t){}onRoomInfoEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=e.data;if(s&&e.roomEnter){this._widget.updateRoomInfo(s);const t=s.showOwner?_.a.instance.getLocalization("room.tool.room.owner.prefix")+" "+s.ownerName:_.a.instance.getLocalization("room.tool.public.room");this._widget.updateRoomTools(s.roomName,t,s.tags),this._widget.addVisitedRoom(s),this._widget.updateRoomCurrentIndex(s.roomId)}}rateRoom(){this._container&&this._container.connection.send(new Ye.a(1))}get disposed(){return this._disposed}get type(){return x.a.ROOM_TOOLS}get widget(){return this._widget}set widget(t){this._widget=t}get container(){return this._container}set container(t){if(this._container=t,this._container){this._messages=[new Se.a(this.onRoomInfoEvent)];for(const e of this._messages)t.connection.addMessageEvent(e)}}get messageTypes(){return[]}get eventTypes(){return[]}}class Xe{constructor(){this._isDisposed=!1,this._container=null}dispose(){this._isDisposed=!0,this.container=null}processWidgetMessage(t){if(!t)return null;switch(t.type){case vt.RWRWM_USER_CHOOSER:this.processUserChooser();break;case lt.SELECT_OBJECT:this.selectUnit(t)}return null}selectUnit(t){null!=t&&t.category==V.a.UNIT&&this._container.roomEngine.selectRoomObject(this._container.roomSession.roomId,t.id,t.category)}processUserChooser(){if(null==this._container||null==this._container.roomSession||null==this._container.roomEngine||null==this._container.roomSession.userDataManager)return;const t=this._container.roomSession.roomId,e=V.a.UNIT,s=[],i=this._container.roomEngine.getRoomObjectCount(t,e);for(let n=0;n<i;n++){const i=this._container.roomEngine.getRoomObjectByIndex(t,n,e);if(null==i)continue;const r=this._container.roomSession.userDataManager.getUserDataByIndex(i.id);null!=r&&s.push(new jt(r.roomIndex,e,r.name))}s.sort(Ht("name")),this._container.events.dispatchEvent(new zt(zt.RWCCE_USER_CHOOSER_CONTENT,s))}processEvent(t){}update(){}get disposed(){return this._isDisposed}get type(){return x.a.USER_CHOOSER}set container(t){this._container=t}get messageTypes(){return[vt.RWRWM_USER_CHOOSER,lt.SELECT_OBJECT]}get eventTypes(){return[]}}var Qe=s("+LbQ"),Je=s("i+XF"),$e=s("QjCb"),ts=s("4NUc"),es=s("KJ3T");let ss=(()=>{class t{constructor(t){this._ngZone=t,this._alertCenter=null,this._notificationCenter=null,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages&&this.unregisterMessages(),this._messages=[new $e.a(this.onHabboBroadcastMessageEvent.bind(this)),new Je.a(this.onModeratorMessageEvent.bind(this)),new ts.a(this.onMOTDNotificationEvent.bind(this)),new Qe.a(this.onNotificationDialogMessageEvent.bind(this)),new es.a(this.onHotelWillShutdownEvent.bind(this))];for(const t of this._messages)_.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)_.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onHabboBroadcastMessageEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this.alert(e.message))}onNotificationDialogMessageEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this.displayNotification(e.type,e.parameters))}onModeratorMessageEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this.alertWithLink(e.message,e.link))}onMOTDNotificationEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this.alertWithScrollableMessages(e.messages))}onHotelWillShutdownEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=_.a.instance.localization.getValueWithParameter("opening.hours.shutdown","m",e.minutes.toString());this._ngZone.run(()=>this.alert(s))}alert(t,e=null){return this._alertCenter?this._alertCenter.alert(t,e):null}alertWithLink(t,e,s=null){return this._alertCenter?this._alertCenter.alertWithLink(t,e,s):null}alertWithConfirm(t,e=null,s=null){return this._alertCenter?this._alertCenter.alertWithConfirm(t,e,s):null}alertWithChoices(t,e,s=null){return this._alertCenter?this._alertCenter.alertWithChoices(t,e,s):null}alertWithScrollableMessages(t,e=null){return this._alertCenter?this._alertCenter.alertWithScrollableMessages(t,e):null}displayNotification(t,e){return this._notificationCenter?this._notificationCenter.displayNotification(t,e):null}closeAlert(t){t&&this._alertCenter&&this._alertCenter.closeAlert(t)}closeNotification(t){t&&this._notificationCenter&&this._notificationCenter.closeNotification(t)}closeAll(){this._alertCenter&&(this._alertCenter.closeAllAlerts(),this._notificationCenter.closeAllNotifications())}get alertCenter(){return this._alertCenter}set alertCenter(t){this._alertCenter=t}get notificationCenter(){return this._notificationCenter}set notificationCenter(t){this._notificationCenter=t}}return t.\u0275fac=function(e){return new(e||t)(i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();var is=s("q4z0"),ns=s("m7hj"),rs=s("WEUE"),as=s("9Jti"),os=s("XNkd"),cs=s("Ahnc"),hs=s("nQsh"),ls=s("29Gn");let us=(()=>{class t{constructor(t,e){this._settingsService=t,this._ngZone=e,this._messages=[],this._component=null,this._roomSession=null,this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{_.a.instance.roomSessionManager.events.addEventListener(w.a.CREATED,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.addEventListener(w.a.STARTED,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.addEventListener(w.a.ENDED,this.onRoomSessionEvent),this._messages=[new ns.a(this.onWiredFurniActionEvent.bind(this)),new rs.a(this.onWiredFurniConditionEvent.bind(this)),new as.a(this.onWiredFurniTriggerEvent.bind(this)),new os.a(this.onWiredOpenEvent.bind(this)),new cs.a(this.onWiredRewardResultMessageEvent.bind(this)),new hs.a(this.onWiredSaveSuccessEvent.bind(this)),new ls.a(this.onWiredValidationErrorEvent.bind(this)),new is.a(this.onDesktopViewEvent.bind(this))];for(const t of this._messages)_.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{_.a.instance.roomSessionManager.events.removeEventListener(w.a.CREATED,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.removeEventListener(w.a.STARTED,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.removeEventListener(w.a.ENDED,this.onRoomSessionEvent);for(const t of this._messages)_.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomSessionEvent(t){if(t)switch(t.type){case w.a.CREATED:case w.a.STARTED:return void(this._roomSession=t.session);case w.a.ENDED:return this._roomSession=null,void this._ngZone.run(()=>this._component&&this._component.close())}}onWiredFurniActionEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this._component.setupTrigger(e.definition))}onWiredFurniConditionEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this._component.setupTrigger(e.definition))}onWiredFurniTriggerEvent(t){if(!t||!this._component)return;const e=t.getParser();e&&this._ngZone.run(()=>this._component.setupTrigger(e.definition))}onWiredOpenEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onWiredRewardResultMessageEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onWiredSaveSuccessEvent(t){t&&t.getParser()&&this._ngZone.run(()=>this._component&&this._component.close())}onWiredValidationErrorEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onDesktopViewEvent(t){t&&this._ngZone.run(()=>this._component&&this._component.close())}selectFurniture(t,e){const s=_.a.instance.roomEngine,i=s.getSelectedRoomObjectData(this.roomId);i&&i.id===-t?s.setPlacedRoomObjectData(this.roomId,null):this._component&&this._component.toggleFurniSelected(t,e)}get component(){return this._component}set component(t){this._component=t}get roomId(){return this._roomSession?this._roomSession.roomId:0}}return t.\u0275fac=function(e){return new(e||t)(i.kc(m),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();var _s=s("dwRb"),ds=s("Pox2"),gs=s("kZQz"),ms=s("WM79"),ps=s("YN1x"),fs=s("00eG"),Es=s("t1CI"),Ss=s("G3dz"),vs=s("gOUc"),bs=s("81IQ"),Is=s("X26Z"),Rs=s("P0eX"),Ts=s("5+UO"),Os=s("0/8l");class ys extends Ts.a{constructor(t){super(t,Os.a)}getParser(){return this.parser}}var Cs=s("i/ye"),As=s("wW/F"),Ms=s("YaSm"),ws=s("I5LT"),Ds=s("SzgH"),Ns=s("OLXM"),Us=s("YQyq"),xs=s("tLSS");let Ls=(()=>{class t{}return t.CALL_FOR_HELP="call_for_help",t.CATALOG_PURCHASE="catalog_purchase",t.CATALOG_DUCKETS="catalog_duckets",t.MESSAGE_SENT="console_message_sent",t.MESSAGE_RECEIVED="console_new_message",t.GUIDE_INVITATION="guide_received_invitation",t.GUIDE_REQUEST="guide_help_requested",t.CAMERA_SHUTTER="camera_shutter",t})(),Ps=(()=>{class t{constructor(t,e,s=0,i=null,n=0){this._type=n,this._senderId=t,this._message=e,this._secondsSinceSent=s,this._extraData=i,this._date=new Date}get type(){return this._type}get senderId(){return this._senderId}get message(){return this._message}get secondsSinceSent(){return this._secondsSinceSent}get extraData(){return this._extraData}get date(){return this._date}}return t.CHAT=0,t.ROOM_INVITE=1,t.STATUS_NOTIFICATION=2,t})();class Fs{constructor(){this._id=-1,this._name=null,this._gender=0,this._online=!1,this._followingAllowed=!1,this._figure=null,this._categoryId=0,this._motto=null,this._realName=null,this._lastAccess=null,this._persistedMessageUser=!1,this._vipMember=!1,this._pocketHabboUser=!1,this._relationshipStatus=-1,this._unread=0}populate(t){return!!t&&(this._id=t.id,this._name=t.name,this._gender=t.gender,this._online=t.online,this._followingAllowed=t.followingAllowed,this._figure=t.figure,this._categoryId=t.categoryId,this._motto=t.motto,this._realName=t.realName,this._lastAccess=t.lastAccess,this._persistedMessageUser=t.persistedMessageUser,this._vipMember=t.vipMember,this._pocketHabboUser=t.pocketHabboUser,this._relationshipStatus=t.relationshipStatus,!0)}get id(){return this._id}set id(t){this._id=t}get name(){return this._name}set name(t){this._name=t}get gender(){return this._gender}set gender(t){this._gender=t}get online(){return this._online}set online(t){this._online=t}get followingAllowed(){return this._followingAllowed}set followingAllowed(t){this._followingAllowed=t}get figure(){return this._figure}set figure(t){this._figure=t}get categoryId(){return this._categoryId}set categoryId(t){this._categoryId=t}get motto(){return this._motto}set motto(t){this._motto=t}get lastAccess(){return this._lastAccess}set lastAccess(t){this._lastAccess=t}get realName(){return this._realName}set realName(t){this._realName=t}get persistedMessageUser(){return this._persistedMessageUser}set persistedMessageUser(t){this._persistedMessageUser=t}get vipMember(){return this._vipMember}set vipMember(t){this._vipMember=t}get pocketHabboUser(){return this._pocketHabboUser}set pocketHabboUser(t){this._pocketHabboUser=t}get relationshipStatus(){return this._relationshipStatus}set relationshipStatus(t){this._relationshipStatus=t}get unread(){return this._unread}set unread(t){this._unread=t}}class ks{populate(t){return!!t&&(this._requestId=t.requestId,this._requesterName=t.requesterName,this._figureString=t.figureString,this._requesterUserId=t.requesterUserId,!0)}get requestId(){return this._requestId}get requesterName(){return this._requesterName}get requesterUserId(){return this._requesterUserId}get figureString(){return this._figureString}}let Vs=(()=>{class t{constructor(t){this._participant=t,this._chats=[],this._lastUpdated=new Date,this._unread=!1,this._emitter=new i.r}insertChat(e,s,i=0,n=null,r=0){const a=new Ps(e,s,i,n,r);return this._chats.push(a),this._lastUpdated=new Date,this._unread=!0,this._emitter.emit(t.MESSAGE_RECEIVED),a}setRead(){this._unread=!1}get participant(){return this._participant}get chats(){return this._chats}get lastUpdated(){return this._lastUpdated}get unread(){return this._unread}get emitter(){return this._emitter}}return t.MESSAGE_RECEIVED="MT_MESSAGE_RECEIVED",t})();var Bs=s("hTzv"),Ws=s("9L9n"),Ks=s("ScQb");let Gs=(()=>{class t{constructor(t){this._ngZone=t,this._volumeSystem=0,this._volumeFurni=0,this._volumeTrax=0,this._internalSamples=new Bs.a,this._externalSamples=new Bs.a,this._furniSoundObjects=new Bs.a,this.onRoomEngineSamplePlaybackEvent=this.onRoomEngineSamplePlaybackEvent.bind(this),this.onRoomEngineObjectRemovedEvent=this.onRoomEngineObjectRemovedEvent.bind(this),this.onRoomEngineDisposedEvent=this.onRoomEngineDisposedEvent.bind(this),this.onNitroSettingsEvent=this.onNitroSettingsEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{_.a.instance.roomEngine.events.addEventListener(Ks.a.PLAY_SAMPLE,this.onRoomEngineSamplePlaybackEvent),_.a.instance.roomEngine.events.addEventListener(v.a.REMOVED,this.onRoomEngineObjectRemovedEvent),_.a.instance.roomEngine.events.addEventListener(d.a.DISPOSED,this.onRoomEngineDisposedEvent),_.a.instance.events.addEventListener(Ws.a.SETTINGS_UPDATED,this.onNitroSettingsEvent)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{_.a.instance.roomEngine.events.removeEventListener(Ks.a.PLAY_SAMPLE,this.onRoomEngineSamplePlaybackEvent),_.a.instance.roomEngine.events.removeEventListener(v.a.REMOVED,this.onRoomEngineObjectRemovedEvent),_.a.instance.roomEngine.events.addEventListener(d.a.DISPOSED,this.onRoomEngineDisposedEvent),_.a.instance.events.removeEventListener(Ws.a.SETTINGS_UPDATED,this.onNitroSettingsEvent)})}onRoomEngineSamplePlaybackEvent(t){t&&this.playFurniSample(t.objectId,t.sampleId,this._volumeFurni,t.pitch)}onRoomEngineObjectRemovedEvent(t){t&&this.killFurniAudio(t.objectId)}onRoomEngineDisposedEvent(t){t&&this._furniSoundObjects.getKeys().forEach(t=>{this.killFurniAudio(t)})}onNitroSettingsEvent(t){if(!t)return;const e=t.volumeFurni!==this._volumeFurni;this._volumeSystem=t.volumeSystem,this._volumeFurni=t.volumeFurni,this._volumeTrax=t.volumeTrax,e&&this.updateFurniSoundObjectsVolume()}playInternalSample(t){this._internalSamples.hasKey(t)||this._internalSamples.add(t,new Audio("assets/sounds/"+t+".mp3")),this.generateAudio(this._internalSamples.getValue(t),this._volumeSystem).play()}playFurniSample(t,e,s,i=1){if(!this._externalSamples.hasKey(e)){const t=_.a.instance.getConfiguration("external.samples.url");this._externalSamples.add(e,new Audio(t.replace("%sample%",e.toString())))}this.killFurniAudio(t);const n=this.generateAudio(this._externalSamples.getValue(e),s,i);this._furniSoundObjects.add(t,n),n.play()}generateAudio(t,e,s=1){const i=t.cloneNode();return i.volume=e,i}killFurniAudio(t){this._furniSoundObjects.hasKey(t)&&(this._furniSoundObjects.getValue(t).pause(),this._furniSoundObjects.remove(t))}updateFurniSoundObjectsVolume(){this._furniSoundObjects.getKeys().forEach(t=>{this._furniSoundObjects.getValue(t).volume=this._volumeFurni})}}return t.\u0275fac=function(e){return new(e||t)(i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})(),Hs=(()=>{class t{constructor(t,e,s){this._notificationService=t,this._soundService=e,this._ngZone=s,this._friendListReady=!1,this._component=null,this._events=new k.a,this._friends=new Map,this._requests=new Map,this._threads=new Map,this._userFriendLimit=0,this._normalFriendLimit=0,this._extendedFriendLimit=0,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages&&this.unregisterMessages(),this._messages=[new _s.a(this.onAcceptFriendResultEvent.bind(this)),new ds.a(this.onFindFriendsProcessResultEvent.bind(this)),new gs.a(this.onFollowFriendFailedEvent.bind(this)),new ms.a(this.onFriendListFragmentEvent.bind(this)),new ps.a(this.onFriendListUpdateEvent.bind(this)),new fs.a(this.onFriendNotificationEvent.bind(this)),new Es.a(this.onFriendRequestsEvent.bind(this)),new Ss.a(this.onHabboSearchResultEvent.bind(this)),new vs.a(this.onInstantMessageErrorEvent.bind(this)),new bs.a(this.onMessageErrorEvent.bind(this)),new Is.a(this.onMessengerInitEvent.bind(this)),new Rs.a(this.onMiniMailNewMessageEvent.bind(this)),new ys(this.onMiniMailUnreadCountEvent.bind(this)),new Cs.a(this.onNewConsoleMessageEvent.bind(this)),new As.a(this.onNewFriendRequestEvent.bind(this)),new Ms.a(this.onRoomInviteErrorEvent.bind(this)),new ws.a(this.onRoomInviteEvent.bind(this))];for(const t of this._messages)_.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(this._messages&&this._messages.length)for(const t of this._messages)_.a.instance.communication.removeMessageEvent(t);this._messages=null})}onAcceptFriendResultEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onFindFriendsProcessResultEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onFollowFriendFailedEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onFriendListFragmentEvent(t){if(!t)return;const e=t.getParser();e&&(this._friendListReady=!1,this._ngZone.run(()=>{for(const t of e.fragment)this.updateFriend(t);e.fragmentNumber+1===e.totalFragments&&(this._friendListReady=!0)}))}onFriendListUpdateEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{for(const t of e.addedFriends)this.updateFriend(t);for(const t of e.updatedFriends)this.updateFriend(t);for(const t of e.removedFriendIds)this.removeFriend(t)})}onFriendNotificationEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onFriendRequestsEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{for(const t of e.requests)this.updateFriendRequest(t)})}onHabboSearchResultEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onInstantMessageErrorEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onMessageErrorEvent(t){if(!t)return;const e=t.getParser();if(!e)return;let s="";switch(e.errorCode){case 1:s="${friendlist.error.friendlistownlimit}";break;case 2:s="${friendlist.error.friendlistlimitofrequester}";break;case 3:s="${friendlist.error.friend_requests_disabled}";break;case 4:s="${friendlist.error.requestnotfound}";break;default:s=`Received messenger error: msg: ${e.clientMessageId}, errorCode: ${e.errorCode}`}this._ngZone.run(()=>this._notificationService.alert(s,"${friendlist.alert.title}"))}onMessengerInitEvent(t){if(!t)return;const e=t.getParser();e&&(this._ngZone.run(()=>{this._userFriendLimit=e.userFriendLimit,this._normalFriendLimit=e.normalFriendLimit,this._extendedFriendLimit=e.extendedFriendLimit}),this.requestFriendRequests())}onMiniMailNewMessageEvent(t){t&&t.getParser()}onMiniMailUnreadCountEvent(t){t&&t.getParser()}onNewConsoleMessageEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=this.getMessageThread(e.senderId);s&&(this._ngZone.run(()=>{s.insertChat(e.senderId,e.messageText,e.secondsSinceSent,e.extraData),this._component&&this._component.currentThread===s&&s.setRead()}),this._soundService.playInternalSample(Ls.MESSAGE_RECEIVED))}onNewFriendRequestEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this.updateFriendRequest(e.request))}onRoomInviteErrorEvent(t){if(!t)return;const e=t.getParser();e&&console.log(e)}onRoomInviteEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=this.getMessageThread(e.senderId);s&&this._ngZone.run(()=>{s.insertChat(e.senderId,e.messageText,0,null,Ps.ROOM_INVITE),this._component&&this._component.currentThread===s&&s.setRead()})}getFriend(t){return this._friends.get(t)||null}updateFriend(t){if(!t)return;let e=this._friends.get(t.id);e||(e=new Fs,this._friends.set(t.id,e)),e.populate(t)}removeFriend(t){this._friends.delete(t)}updateFriendRequest(t){if(!t)return;let e=this._requests.get(t.requestId);e||(e=new ks,this._requests.set(t.requestId,e)),e.populate(t)}acceptFriendRequest(t){this._requests.delete(t.requestId),this._events.dispatchEvent(new X(X.ACCEPTED,t.requestId)),_.a.instance.communication.connection.send(new Ds.a(t.requestId))}acceptFriendRequestById(t){this.acceptFriendRequest(this._requests.get(t))}removeFriendRequest(t){this._requests.delete(t.requestId),this._events.dispatchEvent(new X(X.DECLINED,t.requestId)),_.a.instance.communication.connection.send(new Ns.a(!1,t.requestId))}removeFriendRequestById(t){this.removeFriendRequest(this._requests.get(t))}removeAllFriendRequests(){for(const t of this._requests.values())t&&this._events.dispatchEvent(new X(X.DECLINED,t.requestId));this._requests.clear(),_.a.instance.communication.connection.send(new Ns.a(!0))}getMessageThread(t){let e=this._threads.get(t);if(!e){const s=this.getFriend(t);if(!s)return;e=new Vs(s),this._threads.set(t,e),this._soundService.playInternalSample(Ls.MESSAGE_SENT)}return e}requestFriendRequests(){_.a.instance.communication.connection.send(new Us.a)}canBeAskedForAFriend(t){return!this._friends.get(t)}sendFriendRequest(t,e){this._friends.get(t)||_.a.instance.communication.connection.send(new xs.a(e))}getFriendNames(){const t=[];for(const e of this._friends.values())t.push(e.name);return t}get events(){return this._events}get component(){return this._component}set component(t){this._component=t}get friends(){return this._friends}get requests(){return this._requests}get threads(){return this._threads}get unreadCount(){let t=0;for(const e of this._threads.values())e&&e.unread&&t++;return t}get notificationCount(){return this.requests.size+this.unreadCount}}return t.\u0275fac=function(e){return new(e||t)(i.kc(ss),i.kc(Gs),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})(),js=(()=>{class t{constructor(t){this._ngZone=t,this._lastRoomId=-1,this._maxHistoryItems=100,this._historyItems=[],this._maxHistoryItems=_.a.instance.getConfiguration("chat.history.max.items",100),this._queuedItems=new Bs.a,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),this._messages=[new Se.a(this.onRoomInfoEvent.bind(this))];for(const t of this._messages)_.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(this._messages&&this._messages.length){for(const t of this._messages)_.a.instance.communication.removeMessageEvent(t);this._messages=[]}})}onRoomInfoEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=e.data;this._lastRoomId!==s.roomId&&this._ngZone.run(()=>{this._lastRoomId=s.roomId;const t=new At;t.content=e.data.roomName+"",this.addItem(this._lastRoomId,t),this.processQueue(this._lastRoomId)})}addItem(t,e){e&&this._ngZone.run(()=>{if(t===this._lastRoomId)this._historyItems.length>=this._maxHistoryItems&&this._historyItems.shift(),this._historyItems.push(e);else{const s=this.getQueuedSet(t);s&&s.push(e)}})}getQueuedSet(t){let e=this._queuedItems.getValue(t);return e||(e=[],this._queuedItems.add(t,e)),e}processQueue(t){const e=this._queuedItems.getValue(t);if(e){for(const s of e)s&&this.addItem(t,s);this._queuedItems.remove(t)}}get historyItems(){return this._historyItems}}return t.MESSAGE_RECEIVED="CHS_MESSAGE_RECEIVED",t.\u0275fac=function(e){return new(e||t)(i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();var zs=s("SRjU"),Ys=s("Fq7D"),qs=s("1GrJ"),Zs=s("iGiK"),Xs=s("w2uK"),Qs=s("e2zs"),Js=s("8lyl"),$s=s("uMJ2"),ti=s("H/4j"),ei=s("B62z");class si{constructor(t,e,s=null,i=null){this._id=t,this._username=e,this._figure=s,this._gender=i}get id(){return this._id}get username(){return this._username}get figure(){return this._figure}get gender(){return this._gender}}let ii=(()=>{class t{constructor(t,e){this._notificationService=t,this._ngZone=e,this._users=[],this._currentSelectedUser=null,this._showModActionOnUser=!1,this._showVisitedRoomsForUser=!1,this._showSendUserMessage=!1,this._showSendUserChatlogs=!1,this._showRoomTools=!1,this._showRoomChatLogs=!1,this._Str_20687=null,this._component=null,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._messages&&this.unregisterMessages(),this._messages=[new Xs.a(this.onRoomInfoEvent.bind(this)),new $s.a(this.onUserInfoEvent.bind(this)),new Qs.a(this.onModtoolUserChatlogEvent.bind(this)),new Zs.a(this.onModtoolRoomChatlogEvent.bind(this)),new zs.a(this.onModToolsCFHCategoriesEvent.bind(this)),new Ys.a(this.onModtoolsMainEvent.bind(this)),new qs.a(this.onRoomsReceivedForUserEvent.bind(this)),new Js.a(this.onRoomInfoOwnerEvent.bind(this))];for(const t of this._messages)_.a.instance.communication.registerMessageEvent(t)}unregisterMessages(){if(this._messages&&this._messages.length)for(const t of this._messages)_.a.instance.communication.removeMessageEvent(t)}get component(){return this._component}set component(t){this._component=t}onModtoolsMainEvent(t){if(!t)return;const e=t.getParser();e&&(this._Str_20687=e.data)}onRoomInfoOwnerEvent(t){if(!t)return;const e=t.getParser();e&&(this._currentRoomInfo=e)}onRoomsReceivedForUserEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this._userRoomVisitedData=e.data)}onModToolsCFHCategoriesEvent(t){if(!t)return;const e=t.getParser();e&&(this._callForHelpCategories=e.callForHelpCategories)}onRoomInfoEvent(t){if(!_.a.instance.sessionDataManager.isModerator)return;if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._modToolRoomInfo=e})}onUserInfoEvent(t){const e=t.getParser().userInfo;this._ngZone.run(()=>{this._users.push(new si(e.userId,e.username))})}onModtoolUserChatlogEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._roomVisits=e.roomVisits})}onModtoolRoomChatlogEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._userChatlogs=e.chatlogs})}openRoomTool(t=null){this._currentRoomInfo&&(this._modToolRoomInfo=null,_.a.instance.communication.connection.send(new ei.a(t||this._currentRoomInfo.roomId)),this._showRoomTools=!0)}openChatlogTool(){this._modToolRoomInfo=null,_.a.instance.communication.connection.send(new ei.a(this._currentRoomInfo.roomId)),_.a.instance.communication.connection.send(new ti.a(this._currentRoomInfo.roomId)),this.showRoomChatLogs=!0}closeUserTool(){this._component&&(this._component.userToolVisible=!1)}closeRoomVisitedTool(){this._showVisitedRoomsForUser=!1}get users(){return this._users}get roomVisits(){return this._roomVisits}get userChatlogs(){return this._userChatlogs}selectUser(t,e,s=null,i=null){this._currentSelectedUser=new si(t,e,s,i)}get selectedUser(){return this._currentSelectedUser}get showModActionOnUser(){return this._showModActionOnUser}set showModActionOnUser(t){this._showModActionOnUser=t}get showVisitedRoomsForUser(){return this._showVisitedRoomsForUser}set showVisitedRoomsForUser(t){this._showVisitedRoomsForUser=t}get showSendUserMessage(){return this._showSendUserMessage}set showSendUserMessage(t){this._showSendUserMessage=t}get showSendUserChatlogs(){return this._showSendUserChatlogs}set showSendUserChatlogs(t){this._showSendUserChatlogs=t}get showRoomTools(){return this._showRoomTools}set showRoomTools(t){this._showRoomTools=t}get showRoomChatLogs(){return this._showRoomChatLogs}set showRoomChatLogs(t){this._showRoomChatLogs=t}get callForHelpCategories(){return this._callForHelpCategories}get _Str_3325(){return this._Str_20687}get roomUserVisitedData(){return this._userRoomVisitedData}get currentRoom(){return this._currentRoomInfo}get currentRoomModData(){return this._modToolRoomInfo}}return t.\u0275fac=function(e){return new(e||t)(i.kc(ss),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();var ni=s("r2VG"),ri=s("yAmi"),ai=s("Ly0c"),oi=s("AUxQ"),ci=s("v12S"),hi=s("38Mq"),li=s("BFtu"),ui=s("3h45"),_i=s("SBJG");let di=(()=>{class t{constructor(t,e=1){this._previewRoomId=1,this._currentPreviewObjectType=0,this._currentPreviewObjectCategory=0,this._currentPreviewObjectData="",this._currentPreviewRectangle=null,this._currentPreviewCanvasWidth=0,this._currentPreviewCanvasHeight=0,this._currentPreviewScale=64,this._backgroundColor=305148561,this._disableUpdate=!1,this._roomEngine=t,this._planeParser=new li.a,this._previewRoomId=P.makeRoomPreviewerId(e),this._addViewOffset=new g.Point(0,0),this.onRoomObjectAdded=this.onRoomObjectAdded.bind(this),this.onRoomInitializedonRoomInitialized=this.onRoomInitializedonRoomInitialized.bind(this),this.isRoomEngineReady&&this._roomEngine.events&&(this._roomEngine.events.addEventListener(v.a.ADDED,this.onRoomObjectAdded),this._roomEngine.events.addEventListener(v.a.CONTENT_UPDATED,this.onRoomObjectAdded),this._roomEngine.events.addEventListener(d.a.INITIALIZED,this.onRoomInitializedonRoomInitialized)),this.createRoomForPreview()}dispose(){this.reset(!0),this.isRoomEngineReady&&this._roomEngine.events&&(this._roomEngine.events.removeEventListener(v.a.ADDED,this.onRoomObjectAdded),this._roomEngine.events.removeEventListener(v.a.CONTENT_UPDATED,this.onRoomObjectAdded),this._roomEngine.events.removeEventListener(d.a.INITIALIZED,this.onRoomInitializedonRoomInitialized)),this._planeParser&&(this._planeParser.dispose(),this._planeParser=null)}createRoomForPreview(){if(this.isRoomEngineReady){const t=7,e=new li.a;e.initializeTileMap(t+2,t+2);let s=1;for(;s<1+t;){let i=1;for(;i<1+t;)e.setTileHeight(i,s,0),i++;s++}e.initializeFromTileData(),this._roomEngine.createRoomInstance(this._previewRoomId,e.getMapData()),e.dispose()}}reset(e){this.isRoomEngineReady&&(this._roomEngine.removeRoomObjectFloor(this._previewRoomId,t.PREVIEW_OBJECT_ID),this._roomEngine.removeRoomObjectWall(this._previewRoomId,t.PREVIEW_OBJECT_ID),this._roomEngine.removeRoomObjectUser(this._previewRoomId,t.PREVIEW_OBJECT_ID),e||this.updatePreviewRoomView()),this._currentPreviewObjectCategory=V.a.MINIMUM}updatePreviewModel(t,e,s=!0){const i=new ai.a;i.flush(),i.parseModel(t,e,s);const n=this._roomEngine.getLegacyWallGeometry(this._previewRoomId);if(!n)return;this._planeParser.reset();const r=i.width,a=i.height;this._planeParser.initializeTileMap(r,a);let o=-1,c=-1,h=0,l=0,u=0;for(;u<a;){let t=0;for(;t<r;){const e=i.getHeight(t,u);(u>0&&u<a-1||t>0&&t<r-1)&&e!=li.a.TILE_BLOCKED&&(i.getHeight(t,u-1)==li.a.TILE_BLOCKED&&i.getHeight(t-1,u)==li.a.TILE_BLOCKED&&i.getHeight(t,u+1)==li.a.TILE_BLOCKED&&(o=t+.5,c=u,h=e,l=90),i.getHeight(t,u-1)==li.a.TILE_BLOCKED&&i.getHeight(t-1,u)==li.a.TILE_BLOCKED&&i.getHeight(t+1,u)==li.a.TILE_BLOCKED&&(o=t,c=u+.5,h=e,l=180)),this._planeParser.setTileHeight(t,u,e),t++}u++}this._planeParser.setTileHeight(Math.floor(o),Math.floor(c),h),this._planeParser.initializeFromTileData(i.wallHeight),this._planeParser.setTileHeight(Math.floor(o),Math.floor(c),h+this._planeParser.wallHeight),n.scale=_i.a.DEFAULT_SCALE,n.initialize(r,a,this._planeParser.floorHeight);let _=i.height-1;for(;_>=0;){let t=i.width-1;for(;t>=0;)n.setHeight(t,_,this._planeParser.getTileHeight(t,_)),t--;_--}const d=this._planeParser.getMapData();d.doors.push({x:o,y:c,z:h,dir:l});const g=this.getRoomPreviewOwnRoomObject();g&&g.processUpdateMessage(new oi.a(d))}addFurnitureIntoRoom(e,s,i=null,n=null){if(i||(i=new ci.a),this.isRoomEngineReady){if(this._currentPreviewObjectCategory===V.a.FLOOR&&this._currentPreviewObjectType===e)return t.PREVIEW_OBJECT_ID;if(this.reset(!1),this._currentPreviewObjectType=e,this._currentPreviewObjectCategory=V.a.FLOOR,this._currentPreviewObjectData="",this._roomEngine.addFurnitureFloor(this._previewRoomId,t.PREVIEW_OBJECT_ID,e,new Z.a(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y,0),s,0,i,NaN,-1,0,-1,"",!0,!1)){this._previousAutomaticStateChangeTime=_.a.instance.time,this._automaticStateChange=!0;const e=this._roomEngine.getRoomObject(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory);return e&&n&&e.model.setValue(K.a.FURNITURE_EXTRAS,n),this.updatePreviewRoomView(),t.PREVIEW_OBJECT_ID}}return-1}addWallItemIntoRoom(e,s,i){if(this.isRoomEngineReady){if(this._currentPreviewObjectCategory===V.a.WALL&&this._currentPreviewObjectType===e&&this._currentPreviewObjectData===i)return t.PREVIEW_OBJECT_ID;if(this.reset(!1),this._currentPreviewObjectType=e,this._currentPreviewObjectCategory=V.a.WALL,this._currentPreviewObjectData=i,this._roomEngine.addFurnitureWall(this._previewRoomId,t.PREVIEW_OBJECT_ID,e,new Z.a(.5,2.3,1.8),s,0,i,0,0,-1,"",!1))return this._previousAutomaticStateChangeTime=_.a.instance.time,this._automaticStateChange=!0,this.updatePreviewRoomView(),t.PREVIEW_OBJECT_ID}return-1}addAvatarIntoRoom(e,s){return this.isRoomEngineReady?(this.reset(!1),this._currentPreviewObjectType=1,this._currentPreviewObjectCategory=V.a.UNIT,this._currentPreviewObjectData=e,this._roomEngine.addRoomObjectUser(this._previewRoomId,t.PREVIEW_OBJECT_ID,new Z.a(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y,0),new Z.a(90,0,0),135,hi.a.getTypeNumber(hi.a.USER),e)&&(this._previousAutomaticStateChangeTime=_.a.instance.time,this._automaticStateChange=!0,this.updateUserGesture(1),this.updateUserEffect(s),this.updateUserPosture("std")),this.updatePreviewRoomView(),t.PREVIEW_OBJECT_ID):-1}addPetIntoRoom(e){return this.isRoomEngineReady?(this.reset(!1),this._currentPreviewObjectType=1,this._currentPreviewObjectCategory=V.a.UNIT,this._currentPreviewObjectData=e,this._roomEngine.addRoomObjectUser(this._previewRoomId,t.PREVIEW_OBJECT_ID,new Z.a(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y,0),new Z.a(90,0,0),90,hi.a.getTypeNumber(hi.a.PET),e)&&(this._previousAutomaticStateChangeTime=_.a.instance.time,this._automaticStateChange=!1,this.updateUserGesture(1),this.updateUserPosture("std")),this.updatePreviewRoomView(),t.PREVIEW_OBJECT_ID):-1}updateUserPosture(e,s=""){this.isRoomEngineReady&&this._roomEngine.updateRoomObjectUserPosture(this._previewRoomId,t.PREVIEW_OBJECT_ID,e,s)}updateUserGesture(e){this.isRoomEngineReady&&this._roomEngine.updateRoomObjectUserGesture(this._previewRoomId,t.PREVIEW_OBJECT_ID,e)}updateUserEffect(e){this.isRoomEngineReady&&this._roomEngine.updateRoomObjectUserEffect(this._previewRoomId,t.PREVIEW_OBJECT_ID,e)}updateObjectUserFigure(e,s=null,i=null,n=!1){return!!this.isRoomEngineReady&&this._roomEngine.updateRoomObjectUserFigure(this._previewRoomId,t.PREVIEW_OBJECT_ID,e,s,i,n)}updateObjectUserAction(e,s,i=null){this.isRoomEngineReady&&this._roomEngine.updateRoomObjectUserAction(this._previewRoomId,t.PREVIEW_OBJECT_ID,e,s,i)}changeRoomObjectState(){this.isRoomEngineReady&&(this._automaticStateChange=!1,this._currentPreviewObjectCategory!==V.a.UNIT&&this._roomEngine.changeObjectState(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory))}changeRoomObjectDirection(){if(this.isRoomEngineReady){const e=this._roomEngine.getRoomObject(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory);if(!e)return;const s=this._roomEngine.objectEventHandler._Str_17555(e,!0);switch(this._currentPreviewObjectCategory){case V.a.FLOOR:{const e=new Z.a(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y),i=new Z.a(s,s,s);return void this._roomEngine.updateRoomObjectFloor(this._previewRoomId,t.PREVIEW_OBJECT_ID,e,i,null,null)}case V.a.WALL:return}}}checkAutomaticRoomObjectStateChange(){if(this._automaticStateChange){const e=_.a.instance.time;e>this._previousAutomaticStateChangeTime+t.AUTOMATIC_STATE_CHANGE_INTERVAL&&(this._previousAutomaticStateChangeTime=e,this.isRoomEngineReady&&this._roomEngine.changeObjectState(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory))}}getRoomCanvas(e,s){if(this.isRoomEngineReady){const i=this._roomEngine.getRoomInstanceDisplay(this._previewRoomId,t.PREVIEW_CANVAS_ID,e,s,this._currentPreviewScale);if(i&&null!==this._backgroundColor){const t=new g.Sprite(g.Texture.WHITE);t.width=e,t.height=s,t.tint=this._backgroundColor,i.addChildAt(t,0)}this._roomEngine.setRoomInstanceRenderingCanvasMask(this._previewRoomId,t.PREVIEW_CANVAS_ID,!0);const n=this._roomEngine.getRoomInstanceGeometry(this._previewRoomId,t.PREVIEW_CANVAS_ID);return n&&n.adjustLocation(new Z.a(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y,0),30),this._currentPreviewCanvasWidth=e,this._currentPreviewCanvasHeight=s,i}return null}modifyRoomCanvas(e,s){this.isRoomEngineReady&&(this._currentPreviewCanvasWidth=e,this._currentPreviewCanvasHeight=s,this._roomEngine.initializeRoomInstanceRenderingCanvas(this._previewRoomId,t.PREVIEW_CANVAS_ID,e,s))}set addViewOffset(t){this._addViewOffset=t}get addViewOffset(){return this._addViewOffset}updatePreviewObjectBoundingRectangle(e){const s=this._roomEngine.getRoomObjectBoundingRectangle(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory,t.PREVIEW_CANVAS_ID);if(s&&e)if(s.x+=-(this._currentPreviewCanvasWidth>>1),s.y+=-(this._currentPreviewCanvasHeight>>1),s.x+=-e.x,s.y+=-e.y,this._currentPreviewRectangle){const t=this._currentPreviewRectangle.clone().enlarge(s);(t.width-this._currentPreviewRectangle.width>this._currentPreviewCanvasWidth-this._currentPreviewRectangle.width>>1||t.height-this._currentPreviewRectangle.height>this._currentPreviewCanvasHeight-this._currentPreviewRectangle.height>>1||this._currentPreviewRectangle.width<1||this._currentPreviewRectangle.height<1)&&(this._currentPreviewRectangle=t)}else this._currentPreviewRectangle=s}validatePreviewSize(e){if(this._currentPreviewRectangle.width<1||this._currentPreviewRectangle.height<1)return e;if(this.isRoomEngineReady){const s=this._roomEngine.getRoomInstanceGeometry(this._previewRoomId,t.PREVIEW_CANVAS_ID);this._currentPreviewRectangle.width>this._currentPreviewCanvasWidth*(1+t.ALLOWED_IMAGE_CUT)||this._currentPreviewRectangle.height>this._currentPreviewCanvasHeight*(1+t.ALLOWED_IMAGE_CUT)?t.ZOOM_ENABLED?.5!==this._roomEngine.getRoomInstanceRenderingCanvasScale(this._previewRoomId,t.PREVIEW_CANVAS_ID)&&(this._roomEngine.setRoomInstanceRenderingCanvasScale(this._previewRoomId,t.PREVIEW_CANVAS_ID,.5,null,null),this._currentPreviewScale=t.SCALE_SMALL,this._currentPreviewNeedsZoomOut=!0,e.x=e.x>>1,e.y=e.y>>1,this._currentPreviewRectangle.x=this._currentPreviewRectangle.x>>2,this._currentPreviewRectangle.y=this._currentPreviewRectangle.y>>2,this._currentPreviewRectangle.width=this._currentPreviewRectangle.width>>2,this._currentPreviewRectangle.height=this._currentPreviewRectangle.height>>2):s.isZoomedIn()&&(s.performZoomOut(),this._currentPreviewScale=t.SCALE_SMALL,this._currentPreviewNeedsZoomOut=!0):this._currentPreviewNeedsZoomOut||(t.ZOOM_ENABLED?1!==this._roomEngine.getRoomInstanceRenderingCanvasScale(this._previewRoomId,t.PREVIEW_CANVAS_ID)&&(this._roomEngine.setRoomInstanceRenderingCanvasScale(this._previewRoomId,t.PREVIEW_CANVAS_ID,1,null,null),this._currentPreviewScale=t.SCALE_NORMAL):s.isZoomedIn()||(s.performZoomIn(),this._currentPreviewScale=t.SCALE_NORMAL))}return e}zoomIn(){this.isRoomEngineReady&&(t.ZOOM_ENABLED?this._roomEngine.setRoomInstanceRenderingCanvasScale(this._previewRoomId,t.PREVIEW_CANVAS_ID,1):this._roomEngine.getRoomInstanceGeometry(this._previewRoomId,t.PREVIEW_CANVAS_ID).performZoomIn()),this._currentPreviewScale=t.SCALE_NORMAL}zoomOut(){this.isRoomEngineReady&&(t.ZOOM_ENABLED?this._roomEngine.setRoomInstanceRenderingCanvasScale(this._previewRoomId,t.PREVIEW_CANVAS_ID,.5):this._roomEngine.getRoomInstanceGeometry(this._previewRoomId,t.PREVIEW_CANVAS_ID).performZoomOut()),this._currentPreviewScale=t.SCALE_SMALL}updateAvatarDirection(e,s){this.isRoomEngineReady&&this._roomEngine.updateRoomObjectUserLocation(this._previewRoomId,t.PREVIEW_OBJECT_ID,new Z.a(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y,0),new Z.a(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y,0),!1,0,new Z.a(45*e,0,0),45*s)}updateObjectRoom(t=null,e=null,s=null,i=!1){return!!this.isRoomEngineReady&&this._roomEngine.updateRoomInstancePlaneType(this._previewRoomId,t,e,s,i)}updateRoomWallsAndFloorVisibility(t,e=!0){this.isRoomEngineReady&&this._roomEngine.updateRoomInstancePlaneVisibility(this._previewRoomId,t,e)}getCanvasOffset(t){if(this._currentPreviewRectangle.width<1||this._currentPreviewRectangle.height<1)return t;let e=-(this._currentPreviewRectangle.left+this._currentPreviewRectangle.right)>>1,s=-(this._currentPreviewRectangle.top+this._currentPreviewRectangle.bottom)>>1;const i=this._currentPreviewCanvasHeight-this._currentPreviewRectangle.height>>1;i>10?s+=Math.min(15,i-10):this._currentPreviewObjectCategory!==V.a.UNIT?s+=5-Math.max(0,i/2):s-=5-Math.min(0,i/2),s+=this._addViewOffset.y,e+=this._addViewOffset.x;const n=e-t.x,r=s-t.y;if(0!==n||0!==r){const i=Math.sqrt(n*n+r*r);return i>10&&(e=t.x+10*n/i,s=t.y+10*r/i),new g.Point(e,s)}return null}updatePreviewRoomView(e=!1){if((!this._disableUpdate||e)&&(this.checkAutomaticRoomObjectStateChange(),this.isRoomEngineReady)){let e=this._roomEngine.getRoomInstanceRenderingCanvasOffset(this._previewRoomId,t.PREVIEW_CANVAS_ID);if(e&&(this.updatePreviewObjectBoundingRectangle(e),this._currentPreviewRectangle)){const s=this._currentPreviewScale;e=this.validatePreviewSize(e);const i=this.getCanvasOffset(e);i&&this._roomEngine.setRoomInstanceRenderingCanvasOffset(this._previewRoomId,t.PREVIEW_CANVAS_ID,i),this._currentPreviewScale!==s&&(this._currentPreviewRectangle=null)}}}set disableUpdate(t){this._disableUpdate=t}set disableRoomEngineUpdate(t){this.isRoomEngineReady&&this._roomEngine.disableUpdate(t)}onRoomInitializedonRoomInitialized(t){if(t)switch(t.type){case d.a.INITIALIZED:return void(t.roomId===this._previewRoomId&&this.isRoomEngineReady&&this._roomEngine.updateRoomInstancePlaneType(this._previewRoomId,"110","99999"))}}onRoomObjectAdded(e){if(e.roomId===this._previewRoomId&&e.objectId===t.PREVIEW_OBJECT_ID&&e.category===this._currentPreviewObjectCategory){this._currentPreviewRectangle=null,this._currentPreviewNeedsZoomOut=!1;const t=this._roomEngine.getRoomObject(e.roomId,e.objectId,e.category);if(t&&t.model&&e.category===V.a.WALL){const s=t.model.getValue(K.a.FURNITURE_SIZE_Z),i=t.model.getValue(K.a.FURNITURE_CENTER_Z);null===s&&null===i||this._roomEngine.updateRoomObjectWallLocation(e.roomId,e.objectId,new Z.a(.5,2.3,(3.6-s)/2+i))}}}updateRoomEngine(){this.isRoomEngineReady&&this._roomEngine.runUpdate()}getRenderingCanvas(){return this._roomEngine.getRoomInstanceRenderingCanvas(this._previewRoomId,t.PREVIEW_CANVAS_ID)||null}getGenericRoomObjectImage(t,e,s,i,n,r=0,a=null,o=null,c=-1,h=-1,l=null){return this.isRoomEngineReady?this._roomEngine.getGenericRoomObjectImage(t,e,s,i,n,r,a,o,c,h,l):null}getRoomObjectImage(e,s,i,n=0){return this.isRoomEngineReady?this._roomEngine.getRoomObjectImage(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory,e,s,i,n):null}getRoomObjectCurrentImage(){if(this.isRoomEngineReady){const e=this._roomEngine.getRoomObject(this._previewRoomId,t.PREVIEW_OBJECT_ID,V.a.UNIT);if(e&&e.visualization)return e.visualization.getImage(16777215,-1)}return null}getRoomPreviewObject(){if(this.isRoomEngineReady){const e=this._roomEngine.getRoomObject(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory);if(e)return e}return null}getRoomPreviewOwnRoomObject(){if(this.isRoomEngineReady){const t=this._roomEngine.getRoomObject(this._previewRoomId,ui.a.ROOM_OBJECT_ID,V.a.ROOM);if(t)return t}return null}get isRoomEngineReady(){return this._roomEngine&&this._roomEngine.ready}get roomId(){return this._previewRoomId}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){this._backgroundColor=t}}return t.SCALE_NORMAL=64,t.SCALE_SMALL=32,t.PREVIEW_COUNTER=0,t.PREVIEW_CANVAS_ID=1,t.PREVIEW_OBJECT_ID=1,t.PREVIEW_OBJECT_LOCATION_X=2,t.PREVIEW_OBJECT_LOCATION_Y=2,t.ALLOWED_IMAGE_CUT=.25,t.AUTOMATIC_STATE_CHANGE_INTERVAL=2500,t.ZOOM_ENABLED=!0,t})();window.PIXI=g;const gi=window.PIXI.CanvasRenderer;gi&&(console.warn("REGISTER"),gi.registerPlugin("tilemap",class{constructor(t){this.tileAnim=[0,0],this.dontUseTransform=!1,this.renderer=t,this.tileAnim=[0,0]}}));const mi={maxTextures:16,bufferSize:2048,boundSize:1024,boundCountPerBuffer:1,use32bitIndex:!1,SCALE_MODE:g.SCALE_MODES.LINEAR,DO_CLEAR:!0};var pi=function(t){return t[t.U=0]="U",t[t.V=1]="V",t[t.X=2]="X",t[t.Y=3]="Y",t[t.TileWidth=4]="TileWidth",t[t.TileHeight=5]="TileHeight",t[t.Rotate=6]="Rotate",t[t.AnimX=7]="AnimX",t[t.AnimY=8]="AnimY",t[t.TextureIndex=9]="TextureIndex",t[t.AnimCountX=10]="AnimCountX",t[t.AnimCountY=11]="AnimCountY",t[t.Alpha=12]="Alpha",t[t.YAxis=13]="YAxis",t[t.XAxis=14]="XAxis",t}({});const fi=Object.keys(pi).length/2;class Ei extends g.Container{constructor(t,e){super(),this.zIndex=0,this.modificationMarker=0,this._$_localBounds=new PIXI.Bounds,this.shadowColor=new Float32Array([0,0,0,.5]),this._globalMat=null,this.pointsBuf=[],this.hasAnim=!1,this.offsetX=0,this.offsetY=0,this.compositeParent=!1,this.vbId=0,this.vb=null,this.vbBuffer=null,this.vbArray=null,this.vbInts=null,this.initialize(t,e)}initialize(t,e){e?e instanceof Array||!e.baseTexture||(e=[e]):e=[],this.textures=e,this.zIndex=t}clear(){this.pointsBuf.length=0,this.modificationMarker=0,this._$_localBounds.clear(),this.hasAnim=!1}addFrame(t,e,s,i,n){let r,a=0;if("number"==typeof t)a=t,r=this.textures[a];else{r="string"==typeof t?g.Texture.from(t):t;let e=!1;const s=this.textures;for(let t=0;t<s.length;t++)if(s[t].baseTexture===r.baseTexture){a=t,e=!0;break}if(!e)return!1}return this.addRect(a,r.frame.x,r.frame.y,e,s,r.orig.width,r.orig.height,i,n,r.rotate),!0}addRect(t,e,s,i,n,r,a,o=0,c=0,h=0,l=1024,u=1024,_=1,d,g){const m=this.pointsBuf;return this.hasAnim=this.hasAnim||o>0||c>0,m.push(e),m.push(s),m.push(i),m.push(n),m.push(r),m.push(a),m.push(h),m.push(0|o),m.push(0|c),m.push(t),m.push(l),m.push(u),m.push(_),m.push(d),m.push(g),this._$_localBounds.addFramePad(i,n,i+r,n+a,0,0),this}tileRotate(t){const e=this.pointsBuf;e[e.length-(fi-pi.TextureIndex)]=t}tileAnimX(t,e){const s=this.pointsBuf;s[s.length-(fi-pi.AnimX)]=t,s[s.length-(fi-pi.AnimCountX)]=e}tileAnimY(t,e){const s=this.pointsBuf;s[s.length-(fi-pi.AnimY)]=t,s[s.length-(fi-pi.AnimCountY)]=e}tileAlpha(t){const e=this.pointsBuf;e[e.length-(fi-pi.Alpha)]=t}renderCanvas(t){if(!t.plugins.tilemap.dontUseTransform){const e=this.worldTransform;t.context.setTransform(e.a,e.b,e.c,e.d,e.tx*t.resolution,e.ty*t.resolution)}this.renderCanvasCore(t)}renderCanvasCore(t){if(0===this.textures.length)return;const e=this.pointsBuf;t.context.fillStyle="#000000";for(let s=0,i=e.length;s<i;s+=fi){let i=e[s+pi.U],n=e[s+pi.V];const r=e[s+pi.X],a=e[s+pi.Y],o=e[s+pi.TileWidth],c=e[s+pi.TileHeight];i+=e[s+pi.AnimX]*t.plugins.tilemap.tileAnim[0],n+=e[s+pi.AnimY]*t.plugins.tilemap.tileAnim[1];const h=e[s+pi.TextureIndex],l=e[s+pi.Alpha];h>=0?(t.context.globalAlpha=l,t.context.drawImage(this.textures[h].baseTexture.getDrawableSource(),i,n,o,c,r,a,o,c)):(t.context.globalAlpha=.5,t.context.fillRect(r,a,o,c),t.context.globalAlpha=1),t.context.globalAlpha=1}}destroyVb(){this.vb&&(this.vb.destroy(),this.vb=null)}render(t){const e=t.plugins.tilemap,s=e.getShader();t.batch.setObjectRenderer(e),this._globalMat=s.uniforms.projTransMatrix,t.globalUniforms.uniforms.projectionMatrix.copyTo(this._globalMat).append(this.worldTransform),s.uniforms.shadowColor=this.shadowColor,s.uniforms.animationFrame=e.tileAnim,this.renderWebGLCore(t,e)}renderWebGLCore(t,e){const s=this.pointsBuf;if(0===s.length)return;const i=s.length/fi,n=e.getShader(),r=this.textures;if(0===r.length)return;e.bindTextures(t,n,r),t.shader.bind(n,!1);let a=this.vb;a||(a=e.createVb(),this.vb=a,this.vbId=a.id,this.vbBuffer=null,this.modificationMarker=0),e.checkIndexBuffer(i,a);const o=mi.boundCountPerBuffer,c=a.getBuffer("aVertexPosition"),h=i*a.vertPerQuad;if(0!==h){if(this.modificationMarker!==h){this.modificationMarker=h;const t=a.stride*h;if(!this.vbBuffer||this.vbBuffer.byteLength<t){
//!@#$ happens, need resize
let e=a.stride;for(;e<t;)e*=2;this.vbBuffer=new ArrayBuffer(e),this.vbArray=new Float32Array(this.vbBuffer),this.vbInts=new Uint32Array(this.vbBuffer),c.update(this.vbBuffer)}const e=this.vbArray;let i=0,n=0,r=this.offsetX,l=this.offsetY;for(let a=0;a<s.length;a+=fi){const t=.5;if(this.compositeParent){const t=s[a+pi.TextureIndex];o>1?(n=t>>2,r=this.offsetX*(1&t),l=this.offsetY*(t>>1&1)):(n=t,r=0,l=0)}const c=s[a+pi.X],h=s[a+pi.Y],u=s[a+pi.TileWidth],_=s[a+pi.TileHeight],d=s[a+pi.U]+r,m=s[a+pi.V]+l;let p=s[a+pi.Rotate];const f=s[a+pi.AnimX]+2048*(s[a+pi.AnimCountX]||1024),E=s[a+pi.AnimY]+2048*(s[a+pi.AnimCountY]||1024),S=s[a+pi.Alpha];let v,b,I,R,T,O,y,C;if(0===p)v=d,b=m,I=d+u,R=m,T=d+u,O=m+_,y=d,C=m+_;else{let t=u/2,e=_/2;p%4!=0&&(t=_/2,e=u/2);const s=d+t,i=m+e;p=g.groupD8.add(p,g.groupD8.NW),v=s+t*g.groupD8.uX(p),b=i+e*g.groupD8.uY(p),p=g.groupD8.add(p,2),I=s+t*g.groupD8.uX(p),R=i+e*g.groupD8.uY(p),p=g.groupD8.add(p,2),T=s+t*g.groupD8.uX(p),O=i+e*g.groupD8.uY(p),p=g.groupD8.add(p,2),y=s+t*g.groupD8.uX(p),C=i+e*g.groupD8.uY(p)}const A=!0;e[i++]=c,e[i++]=h,e[i++]=v,e[i++]=b,e[i++]=d+t,e[i++]=m+t,e[i++]=d+u-t,e[i++]=m+_-t,e[i++]=f,e[i++]=E,e[i++]=n,A&&(e[i++]=S),e[i++]=c+u,e[i++]=h,e[i++]=I,e[i++]=R,e[i++]=d+t,e[i++]=m+t,e[i++]=d+u-t,e[i++]=m+_-t,e[i++]=f,e[i++]=E,e[i++]=n,A&&(e[i++]=S),e[i++]=c+u,e[i++]=h+_,e[i++]=T,e[i++]=O,e[i++]=d+t,e[i++]=m+t,e[i++]=d+u-t,e[i++]=m+_-t,e[i++]=f,e[i++]=E,e[i++]=n,A&&(e[i++]=S),e[i++]=c,e[i++]=h+_,e[i++]=y,e[i++]=C,e[i++]=d+t,e[i++]=m+t,e[i++]=d+u-t,e[i++]=m+_-t,e[i++]=f,e[i++]=E,e[i++]=n,A&&(e[i++]=S)}c.update(e)}t.geometry.bind(a,n),t.geometry.draw(g.DRAW_MODES.TRIANGLES,6*i,0)}}isModified(t){return!!(this.modificationMarker!==this.pointsBuf.length||t&&this.hasAnim)}clearModify(){this.modificationMarker=this.pointsBuf.length}_calculateBounds(){const{minX:t,minY:e,maxX:s,maxY:i}=this._$_localBounds;this._bounds.addFrame(this.transform,t,e,s,i)}getLocalBounds(t){return 0===this.children.length?this._$_localBounds.getRectangle(t):super.getLocalBounds.call(this,t)}destroy(t){super.destroy(t),this.destroyVb()}}class Si extends g.Container{constructor(t,e,s,i){super(),this.modificationMarker=0,this.shadowColor=new Float32Array([0,0,0,.5]),this._globalMat=null,this._lastLayer=null,this.initialize.apply(this,arguments)}initialize(t,e,s,i){!0===s&&(s=0),this.z=this.zIndex=t,this.alpha=null!=i?i:1,this.texPerChild=s||mi.boundCountPerBuffer*mi.maxTextures,e&&this.setBitmaps(e)}setBitmaps(t){for(let r=0;r<t.length;r++)if(t[r]&&!t[r].baseTexture)throw new Error("pixi-tilemap cannot use destroyed textures. Probably, you passed resources['myAtlas'].texture in pixi > 5.2.1, it does not exist there.");const e=this.texPerChild,s=this.children.length,i=Math.ceil(t.length/e);let n;for(n=0;n<s;n++)this.children[n].textures=t.slice(n*e,(n+1)*e);for(n=s;n<i;n++){const s=new Ei(this.zIndex,t.slice(n*e,(n+1)*e));s.compositeParent=!0,s.offsetX=mi.boundSize,s.offsetY=mi.boundSize,this.addChild(s)}}clear(){for(let t=0;t<this.children.length;t++)this.children[t].clear();this.modificationMarker=0}addRect(t,e,s,i,n,r,a,o,c,h,l,u,_){const d=t/this.texPerChild>>0,g=t%this.texPerChild;return this.children[d]&&this.children[d].textures?(this._lastLayer=this.children[d],this._lastLayer.addRect(g,e,s,i,n,r,a,o,c,h,l,u,this.worldAlpha*(null!=_?_:1))):this._lastLayer=null,this}tileRotate(t){return this._lastLayer&&this._lastLayer.tileRotate(t),this}tileAnimX(t,e){return this._lastLayer&&this._lastLayer.tileAnimX(t,e),this}tileAnimY(t,e){return this._lastLayer&&this._lastLayer.tileAnimY(t,e),this}addFrame(t,e,s,i,n,r,a,o,c,h){let l,u=null,_=0;const d=this.children;if(this._lastLayer=null,"number"==typeof t){if(u=d[t/this.texPerChild>>0],u)_=t%this.texPerChild;else{if(u=d[0],!u)return this;_=0}l=u.textures[_]}else{l="string"==typeof t?g.Texture.from(t):t;for(let t=0;t<d.length;t++){const e=d[t],s=e.textures;for(let t=0;t<s.length;t++)if(s[t].baseTexture===l.baseTexture){u=e,_=t;break}if(u)break}if(!u){for(let t=0;t<d.length;t++){const e=d[t];if(e.textures.length<this.texPerChild){u=e,_=e.textures.length,e.textures.push(l);break}}u||(u=new Ei(this.zIndex,l),u.compositeParent=!0,u.offsetX=mi.boundSize,u.offsetY=mi.boundSize,this.addChild(u),_=0)}}return this._lastLayer=u,u.addRect(_,l.frame.x,l.frame.y,e,s,l.orig.width,l.orig.height,i,n,l.rotate,r,a,this.worldAlpha*(null!=o?o:1),c,h),this}renderCanvas(t){if(!this.visible||this.worldAlpha<=0||!this.renderable)return;if(!t.plugins.tilemap.dontUseTransform){const e=this.worldTransform;t.context.setTransform(e.a,e.b,e.c,e.d,e.tx*t.resolution,e.ty*t.resolution)}const e=this.children;for(let s=0;s<e.length;s++)e[s].renderCanvasCore(t)}render(t){if(!this.visible||this.worldAlpha<=0||!this.renderable)return;const e=t.plugins.tilemap,s=e.getShader();t.batch.setObjectRenderer(e),this._globalMat=s.uniforms.projTransMatrix,t.globalUniforms.uniforms.projectionMatrix.copyTo(this._globalMat).append(this.worldTransform),s.uniforms.shadowColor=this.shadowColor,s.uniforms.animationFrame=e.tileAnim,t.shader.bind(s,!1);const i=this.children;for(let n=0;n<i.length;n++)i[n].renderWebGLCore(t,e)}isModified(t){const e=this.children;if(this.modificationMarker!==e.length)return!0;for(let s=0;s<e.length;s++)if(e[s].isModified(t))return!0;return!1}clearModify(){const t=this.children;this.modificationMarker=t.length;for(let e=0;e<t.length;e++)t[e].clearModify()}}var vi=s("wp0G");class bi extends vi.P.Resource{constructor(t){super(t.bufferSize,t.bufferSize),this.DO_CLEAR=!1,this.boundSize=0,this._clearBuffer=null,this.baseTex=null,this.boundSprites=[],this.dirties=[];const e=this.boundSprites,s=this.dirties;this.boundSize=t.boundSize;for(let i=0;i<t.boundCountPerBuffer;i++){const n=new g.Sprite;n.position.x=t.boundSize*(1&i),n.position.y=t.boundSize*(i>>1),e.push(n),s.push(0)}this.DO_CLEAR=!!t.DO_CLEAR}bind(t){if(this.baseTex)throw new Error("Only one baseTexture is allowed for this resource!");this.baseTex=t,super.bind(t)}setTexture(t,e){const s=this.boundSprites[t];s.texture.baseTexture!==e.baseTexture&&(s.texture=e,this.baseTex.update(),this.dirties[t]=this.baseTex.dirtyId)}}function Ii(t,e){const s=[];for(let n=0;n<e;n++)s[n]=n;t.uniforms.uSamplers=s;const i=[];for(let n=0;n<e;n++)i.push(1/mi.bufferSize),i.push(1/mi.bufferSize);t.uniforms.uSamplerSize=i}class Ri extends g.Shader{constructor(t,e,s){super(new PIXI.Program(e,s),{animationFrame:new Float32Array(2),uSamplers:[],uSamplerSize:[],projTransMatrix:new g.Matrix}),this.maxTextures=0,this.maxTextures=t,Ii(this,this.maxTextures)}}class Ti extends Ri{constructor(t){super(t,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aFrame;\nattribute vec2 aAnim;\nattribute float aTextureId;\nattribute float aAlpha;\n\nuniform mat3 projTransMatrix;\nuniform vec2 animationFrame;\n\nvarying vec2 vTextureCoord;\nvarying float vTextureId;\nvarying vec4 vFrame;\nvarying float vAlpha;\n\nvoid main(void){\n   gl_Position = vec4((projTransMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vec2 animCount = floor((aAnim + 0.5) / 2048.0);\n   vec2 animFrameOffset = aAnim - animCount * 2048.0;\n   vec2 animOffset = animFrameOffset * floor(mod(animationFrame + 0.5, animCount));\n\n   vTextureCoord = aTextureCoord + animOffset;\n   vFrame = aFrame + vec4(animOffset, animOffset);\n   vTextureId = aTextureId;\n   vAlpha = aAlpha;\n}\n",function(t,e){return"\nvarying vec2 vTextureCoord;\nvarying vec4 vFrame;\nvarying float vTextureId;\nvarying float vAlpha;\nuniform vec4 shadowColor;\nuniform sampler2D uSamplers[%count%];\nuniform vec2 uSamplerSize[%count%];\n\nvoid main(void){\n\n\n   vec2 textureCoord = clamp(vTextureCoord, vFrame.xy, vFrame.zw);\n   float textureId = floor(vTextureId + 0.5);\n\n   vec4 color;\n   vec3 tint = vec3(1, 0.8, 0.5);  // reddish\n   %forloop%\n  gl_FragColor = (color * vAlpha) + (gl_FragColor * (1.0 - vAlpha));\n}\n".replace(/%count%/gi,t+"").replace(/%forloop%/gi,function(t){let e="";e+="\n",e+="\n",e+="if(vTextureId <= -1.0) {",e+="\n\tcolor = shadowColor;",e+="\n}";for(let s=0;s<t;s++)e+="\nelse ",s<t-1&&(e+="if(textureId == "+s+".0)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+s+"], textureCoord * uSamplerSize["+s+"]);",e+="\n}";return e+="\n",e+="\n",e}(t))}(t)),Ii(this,this.maxTextures)}}class Oi extends g.Geometry{constructor(){super(),this.vertSize=12,this.vertPerQuad=4,this.stride=4*this.vertSize,this.lastTimeAccess=0;const t=this.buf=new g.Buffer(new Float32Array(2),!0,!1);this.addAttribute("aVertexPosition",t,0,!1,0,this.stride,0).addAttribute("aTextureCoord",t,0,!1,0,this.stride,8).addAttribute("aFrame",t,0,!1,0,this.stride,16).addAttribute("aAnim",t,0,!1,0,this.stride,32).addAttribute("aTextureId",t,0,!1,0,this.stride,40).addAttribute("aTextureId",t,0,!1,0,this.stride,40).addAttribute("aAlpha",t,0,!1,0,this.stride,44)}}g.Renderer.registerPlugin("tilemap",class extends g.ObjectRenderer{constructor(t){super(t),this.sn=-1,this.indexBuffer=null,this.ibLen=0,this.tileAnim=[0,0],this.texLoc=[],this.texResources=[],this.rectShader=new Ti(mi.maxTextures),this.indexBuffer=new g.Buffer(void 0,!0,!0),this.checkIndexBuffer(2e3),this.initBounds()}initBounds(){if(mi.boundCountPerBuffer<=1)return;const t=mi.maxTextures;for(let e=0;e<t;e++){const t=new bi(mi),e=new g.BaseTexture(t);e.scaleMode=mi.SCALE_MODE,e.wrapMode=g.WRAP_MODES.CLAMP,this.texResources.push(t)}}bindTexturesWithoutRT(t,e,s){const i=e.uniforms.uSamplerSize;this.texLoc.length=0;for(let n=0;n<s.length;n++){const e=s[n];if(!e||!e.valid)return;t.texture.bind(s[n],n),i[2*n]=1/s[n].baseTexture.width,i[2*n+1]=1/s[n].baseTexture.height}e.uniforms.uSamplerSize=i}bindTextures(t,e,s){const i=s.length;if(i>mi.boundCountPerBuffer*mi.maxTextures)return;if(mi.boundCountPerBuffer<=1)return void this.bindTexturesWithoutRT(t,e,s);let n=0;for(;n<i;n++){const t=s[n];t&&t.valid&&this.texResources[n>>2].setTexture(3&n,t)}const r=n+3>>2;for(n=0;n<r;n++)t.texture.bind(this.texResources[n].baseTex,n)}start(){}createVb(){const t=new Oi;return t.addIndex(this.indexBuffer),t.lastTimeAccess=Date.now(),t}checkIndexBuffer(t,e=null){const s=6*t;if(s<=this.ibLen)return;let i=s;for(;i<s;)i<<=1;this.ibLen=s,this.indexBuffer.update(PIXI.utils.createIndicesForQuads(t,mi.use32bitIndex?new Uint32Array(6*t):void 0))}getShader(){return this.rectShader}destroy(){super.destroy(),this.rectShader=null}});var yi=s("XNiG"),Ci=s("Kj3r"),Ai=s("/uUt"),Mi=s("Cyol"),wi=s("v66B"),Di=s("mQ1q"),Ni=s("bmMM"),Ui=s("CzV9"),xi=s("4R/C");class Li{constructor(){this.heightMap=[],this.heightMapString=null,this.doorX=0,this.doorY=0,this.doorDirection=0,this.thicknessWall=0,this.thicknessFloor=0}}class Pi{constructor(t,e){this.height=t,this.blocked=e}}let Fi=(()=>{class t{constructor(t,e){this._ngZone=t,this._settingsService=e,this._maxFloorLength=64,this._tileSize=32,this._colorMap={x:"0x101010",0:"0x0065ff",1:"0x0091ff",2:"0x00bcff",3:"0x00e8ff",4:"0x00ffea",5:"0x00ffbf",6:"0x00ff93",7:"0x00ff68",8:"0x00ff3d",9:"0x19ff00",a:"0x44ff00",b:"0x70ff00",c:"0x9bff00",d:"0xf2ff00",e:"0xffe000",f:"0xffb500",g:"0xff8900",h:"0xff5e00",i:"0xff3200",j:"0xff0700",k:"0xff0023",l:"0xff007a",m:"0xff00a5",n:"0xff00d1",o:"0xff00fc",p:"0xd600ff",q:"0xaa00ff"},this._heightScheme="x0123456789abcdefghijklmnopq",this._updates=0,this._showImportExport=!1,this._lastUsedTile={x:-1,y:-1},this.preveiwerUpdate=new yi.a,this.component=null,this._messages=[],this._model=null,this._doorX=0,this._doorY=0,this._doorDirection=0,this._blockedTilesMap=[],this._thicknessWall=0,this._thicknessFloor=0,this._doorSettingsReceived=!1,this._blockedTilesMapReceived=!1,this._RoomThicknessReceived=!1,this._changesMade=!1,this.registerMessages(),this.loader=new g.Loader,this.loader.add("atlas","assets/images/floorplaneditor/tiles.json"),this.loader.load(),this.preveiwerUpdate.pipe(Object(Ci.a)(500),Object(Ai.a)()).subscribe(t=>{this._updatePreviewer()})}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),this._messages=[new Ni.a(this.onRoomModelEvent.bind(this)),new Di.a(this.onRoomDoorEvent.bind(this)),new wi.a(this.onRoomBlockedTilesEvent.bind(this)),new Ui.a(this.onRoomThicknessEvent.bind(this)),new Mi.a(this.onRoomRightsEvent.bind(this))];for(const t of this._messages)_.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(this._messages&&this._messages.length){for(const t of this._messages)_.a.instance.communication.removeMessageEvent(t);this._messages=[]}})}onRoomRightsEvent(t){if(!this._settingsService.floorPlanVisible)return;if(!(t instanceof Mi.a))return;const e=t.getParser();e&&this._ngZone.run(()=>{this._settingsService.floorPlanVisible=e.controllerLevel>=H.a.ROOM_OWNER})}onRoomModelEvent(t){if(!t)return;const e=t.getParser();e&&(this._model=e.model,this._wallHeight=e.wallHeight+1,_.a.instance.communication.connection.send(new ri.a),_.a.instance.communication.connection.send(new ni.a),this.tryEmit())}onRoomDoorEvent(t){if(!t)return;const e=t.getParser();e&&(this._doorX=e.x,this._doorY=e.y,this._doorDirection=e.direction,this._doorSettingsReceived=!0,this.tryEmit())}onRoomBlockedTilesEvent(t){if(!t)return;const e=t.getParser();e&&(this._blockedTilesMap=e.blockedTilesMap,this._blockedTilesMapReceived=!0,this.tryEmit())}onRoomThicknessEvent(t){if(!t)return;const e=t.getParser();e&&(this._thicknessFloor=this.convertSettingnToNumber(e.thicknessFloor),this._thicknessWall=this.convertSettingnToNumber(e.thicknessWall),this._RoomThicknessReceived=!0,this.tryEmit())}onRoomEngineDisposedEvent(t){t&&this.component&&this.component.close()}reset(){this._model=null,this._doorSettingsReceived=!1,this._blockedTilesMapReceived=!1}tryEmit(){this.component&&this.component.visible&&this._model&&this._doorSettingsReceived&&this._blockedTilesMapReceived&&this._ngZone.run(()=>this.component.init(this._model,this._blockedTilesMap,this._doorX,this._doorY,this._doorDirection,this._thicknessWall,this._thicknessFloor))}render(){this.tryEmit()}save(t){_.a.instance.communication.connection.send(new xi.a(t.heightMapString,t.doorX,t.doorY,t.doorDirection,this.convertNumbersForSaving(t.thicknessWall),this.convertNumbersForSaving(t.thicknessFloor),this._wallHeight-1)),this.reset()}convertNumbersForSaving(t){switch(t=parseInt(t.toString())){case 0:return-2;case 1:return-1;case 3:return 1;default:return 0}}clear(){this._floorMapSettings=new Li,this.__originalFloorMapSettings=new Li,this._highestX=0,this._highestY=0,this._coloredTilesCount=0,this._isHolding=!1,this._blockedTilesMap=[],this._changesMade=!1,this._currentAction="set",this._currentHeight=this._heightScheme[1]}generateTileMapString(){if("x"===this.floorMapSettings.heightMap[this._highestY][this._highestX].height){this._highestX=-1,this._highestY=-1;for(let t=this._maxFloorLength-1;t>=0;t--)if(this.floorMapSettings.heightMap[t])for(let e=this._maxFloorLength-1;e>=0;e--)this.floorMapSettings.heightMap[t][e]&&"x"!==this.floorMapSettings.heightMap[t][e].height&&(e>this._highestX&&(this._highestX=e),t>this._highestY&&(this._highestY=t))}const t=[];for(let e=0;e<=this._highestY;e++){const s=[];for(let t=0;t<=this._highestX;t++)s[t]=this.floorMapSettings.heightMap[e][t].height;t[e]=s.join("")}return t.join("\r")}readTileMapString(t){let e=t.split("\r");const s=[];let i=0,n=0;for(;i<e.length;){if(0===e[i].length){i--,e=e.splice(i,1);continue}const t=e[i].split("");for(s[i]=[],n=0;n<t.length;)s[i][n]=new Pi(t[n],this._blockedTilesMap[i]&&this._blockedTilesMap[i][n]),n++;for(;n<this._maxFloorLength;)s[i][n]=new Pi("x",!1),n++;i++}for(;i<this._maxFloorLength;){for(s[i]=[],n=0;n<this._maxFloorLength;)s[i][n]=new Pi("x",!1),n++;i++}return this._highestY=e.length-1,this._highestX=e[this._highestY].length-1,s}convertSettingnToNumber(t){switch(t){case.25:return 0;case.5:return 1;case 2:return 3;default:return 2}}renderTileMap(){this.component.tileMap.clear();let e=0;for(let s=0;s<this.floorMapSettings.heightMap.length;s++)for(let i=0;i<this.floorMapSettings.heightMap[s].length;i++){const n=this.floorMapSettings.heightMap[s][i];let r=!1;i===this.floorMapSettings.doorX&&s===this.floorMapSettings.doorY&&(r=!0);let a=n.height;n.blocked&&(a=t.TILE_BLOCKED),r&&(a=t.TILE_DOOR),"x"!==a&&e++;const o=i*this._tileSize/2-s*this._tileSize/2,c=i*this._tileSize/4+s*this._tileSize/4;this._ngZone.runOutsideAngular(()=>{this.component.tileMap.addFrame(a+".png",o+1024,c,null,null,null,null,1,s,i)})}this._ngZone.run(()=>this._coloredTilesCount=e),this._updates++,this.preveiwerUpdate.next(this._updates.toString())}_updatePreviewer(){this._ngZone.run(()=>this.floorMapSettings.heightMapString=this.generateTileMapString())}_handleTileClick(t,e){const s=this.floorMapSettings.heightMap[e][t],i=this._heightScheme.indexOf(s.height);let n=0;switch(this._currentAction){case"door":return void("x"!=s.height&&(this.floorMapSettings.doorX=t,this.floorMapSettings.doorY=e,this._changesMade=!0,this.renderTileMap()));case"up":n=i+1;break;case"down":n=i-1;break;case"set":n=this._heightScheme.indexOf(this._currentHeight);break;case"unset":n=0}if(-1===n)return;if(i===n)return;n>0&&(t>this.highestX&&(this.highestX=t),e>this.highestY&&(this.highestY=e));const r=this._heightScheme[n];r&&(s.blocked||(this.floorMapSettings.heightMap[e][t].height=r,this._changesMade=!0,this.renderTileMap()))}revertChanges(){this._ngZone.runOutsideAngular(()=>{this._floorMapSettings=JSON.parse(JSON.stringify(this.__originalFloorMapSettings)),this.renderTileMap()}),this._changesMade=!1}set floorMapSettings(t){this._floorMapSettings=t}get floorMapSettings(){return this._floorMapSettings}set originalMapSettings(t){this.__originalFloorMapSettings=JSON.parse(JSON.stringify(t))}get originalMapSettings(){return this.__originalFloorMapSettings}get highestY(){return this._highestY}set highestY(t){this._highestY=t}get highestX(){return this._highestX}set highestX(t){this._highestX=t}get maxTilesCount(){return this._maxFloorLength*this._maxFloorLength}decrementDoorDirection(){0===this.floorMapSettings.doorDirection?this.floorMapSettings.doorDirection=7:this.floorMapSettings.doorDirection--}incrementDoorDirection(){7===this.floorMapSettings.doorDirection?this.floorMapSettings.doorDirection=0:this.floorMapSettings.doorDirection++}decrementWallheight(){1===this.wallHeight?this.wallHeight=16:this.wallHeight--}incrementWallheight(){16===this.wallHeight?this.wallHeight=1:this.wallHeight++}get coloredTilesCount(){return this._coloredTilesCount}get tileSize(){return this._tileSize}get currentAction(){return this._currentAction}set currentAction(t){this._currentAction=t}get currentHeight(){return this._currentHeight}set currentHeight(t){this._currentHeight=t}get colorMap(){return this._colorMap}get blockedTilesMap(){return this._blockedTilesMap}set blockedTilesMap(t){this._blockedTilesMap=t}decrementHeight(){const t=this._heightScheme.indexOf(this.currentHeight);1!==t&&this.selectHeight(this._heightScheme[t-1])}selectHeight(t){this.currentHeight=t,this.currentAction="set"}incrementHeight(){const t=this._heightScheme.indexOf(this.currentHeight);t!==this._heightScheme.length-1&&this.selectHeight(this._heightScheme[t+1])}get changesMade(){return this._changesMade}get wallHeight(){return this._wallHeight}set wallHeight(t){this._wallHeight=t}detectPoints(){const t=this.component.tileMap,e=new g.Point;t.containsPoint=s=>(t.worldTransform.applyInverse(s,e),this.tileHitDettection(t,e,!1)),t.on("pointerup",()=>{this._isHolding=!1}),t.on("pointerout",()=>{this._isHolding=!1}),t.on("pointerdown",e=>{e.data.originalEvent instanceof PointerEvent&&2!==e.data.originalEvent.button&&this.tileHitDettection(t,e.data.global,!0)}),t.on("click",e=>{e.data.originalEvent instanceof PointerEvent&&2!==e.data.originalEvent.button&&this.tileHitDettection(t,e.data.global,!0,!0)})}tileHitDettection(t,e,s,i=!1){const n=t.children[0].pointsBuf,r=fi,a=n.length;s&&(this._isHolding=!0);for(let o=0;o<a;o+=r){const t=n.slice(o,o+r),s=t[4],a=t[5],c=Math.floor(e.x),h=Math.floor(e.y),l=t[3]+a/2;if(Math.abs(c-(t[2]+s/2)-2)/(.5*s)+Math.abs(h-l-2)/(.5*a)<=1){if(this._isHolding){const e=t[13],s=t[14];i?this._handleTileClick(s,e):this._lastUsedTile.x==s&&this._lastUsedTile.y==e||(this._lastUsedTile={x:s,y:e},this._handleTileClick(s,e))}return!0}}return!1}get showImportExport(){return this._showImportExport}set showImportExport(t){this._showImportExport=t}}return t.TILE_BLOCKED="r_blocked",t.TILE_DOOR="r_door",t.\u0275fac=function(e){return new(e||t)(i.kc(i.H),i.kc(m))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();var ki=s("3md2");let Vi=(()=>{class t{constructor(t){this._ngZone=t,this._userId=-1,this._userName=null,this._figure=null,this._gender=null,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new $s.a(this.onUserInfoEvent.bind(this)),new ki.a(this.onUserFigureEvent.bind(this))];for(const t of this._messages)_.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)_.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onUserInfoEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=e.userInfo;this._ngZone.run(()=>{this._userId=s.userId,this._userName=s.username,this._figure=s.figure,this._gender=s.gender})}onUserFigureEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._figure=e.figure,this._gender=e.gender})}get userId(){return this._userId}get userName(){return this._userName}get figure(){return this._figure}get gender(){return this._gender}}return t.\u0275fac=function(e){return new(e||t)(i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();const Bi=["floorplanElement"],Wi=["floorplanPreviewer"],Ki=function(t){return{"fpe-colorbox-active":t}},Gi=function(t){return{backgroundColor:t}};function Hi(t,e){if(1&t){const t=i.ec();i.dc(0,"div",55),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc(2).selectHeight(s.key)}),i.Zb(1,"div",56),i.cc()}if(2&t){const t=e.$implicit,s=i.qc(2);i.xc("ngClass",i.Bc(2,Ki,s.currentHeight===t.key))("ngStyle",i.Bc(4,Gi,s.getColor(t.value)))}}function ji(t,e){if(1&t&&(i.dc(0,"div",57),i.dc(1,"div",58,59),i.Zb(3,"div",60),i.cc(),i.cc()),2&t){const t=i.qc(2);i.Kb(3),i.xc("roomPreviewer",t.roomPreviewer)("width",2e3)("height",2e3)("modelScale",!1)("model",t.currentModel)("wallHeight",t.wallHeight)}}const zi=function(t){return{"fpe-active":t}};function Yi(t,e){if(1&t){const t=i.ec();i.dc(0,"div",2),i.dc(1,"div",3),i.dc(2,"p",4),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",5),i.nc("click",function(){return i.Kc(t),i.qc().close()}),i.cc(),i.cc(),i.dc(6,"div",6),i.Zb(7,"img",7),i.dc(8,"p",8),i.Vc(9),i.rc(10,"translate"),i.cc(),i.cc(),i.dc(11,"div",9),i.dc(12,"div",10),i.dc(13,"div",11),i.dc(14,"p",12),i.Vc(15),i.rc(16,"translate"),i.cc(),i.dc(17,"div",13),i.nc("click",function(){return i.Kc(t),i.qc().changeAction("set")}),i.Zb(18,"img",14),i.cc(),i.dc(19,"div",13),i.nc("click",function(){return i.Kc(t),i.qc().changeAction("unset")}),i.Zb(20,"img",15),i.cc(),i.Zb(21,"div",16),i.dc(22,"div",13),i.nc("click",function(){return i.Kc(t),i.qc().changeAction("up")}),i.Zb(23,"img",17),i.cc(),i.dc(24,"div",13),i.nc("click",function(){return i.Kc(t),i.qc().changeAction("down")}),i.Zb(25,"img",18),i.cc(),i.Zb(26,"div",16),i.dc(27,"div",13),i.nc("click",function(){return i.Kc(t),i.qc().changeAction("door")}),i.Zb(28,"img",19),i.cc(),i.cc(),i.dc(29,"div",20),i.dc(30,"p",21),i.Vc(31),i.rc(32,"translate"),i.cc(),i.Tc(33,Hi,2,6,"div",22),i.rc(34,"keyvalue"),i.cc(),i.dc(35,"div",23),i.dc(36,"div",24),i.Zb(37,"div",25),i.Zb(38,"div",26,27),i.dc(40,"p",28),i.Vc(41),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(42,"div",29),i.dc(43,"div",30),i.dc(44,"div",31),i.dc(45,"p",32),i.Vc(46),i.rc(47,"translate"),i.cc(),i.dc(48,"div",33),i.dc(49,"div",34),i.nc("click",function(){return i.Kc(t),i.qc().incrementDoorDirection()}),i.cc(),i.Zb(50,"div",35),i.dc(51,"div",36),i.nc("click",function(){return i.Kc(t),i.qc().decrementDoorDirection()}),i.cc(),i.cc(),i.cc(),i.Zb(52,"div",37),i.dc(53,"div",38),i.dc(54,"p",39),i.Vc(55),i.rc(56,"translate"),i.cc(),i.dc(57,"select",40),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().thicknessWall=e}),i.dc(58,"option",41),i.Vc(59),i.rc(60,"translate"),i.cc(),i.dc(61,"option",41),i.Vc(62),i.rc(63,"translate"),i.cc(),i.dc(64,"option",41),i.Vc(65),i.rc(66,"translate"),i.cc(),i.dc(67,"option",41),i.Vc(68),i.rc(69,"translate"),i.cc(),i.cc(),i.dc(70,"select",40),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().thicknessFloor=e}),i.dc(71,"option",41),i.Vc(72),i.rc(73,"translate"),i.cc(),i.dc(74,"option",41),i.Vc(75),i.rc(76,"translate"),i.cc(),i.dc(77,"option",41),i.Vc(78),i.rc(79,"translate"),i.cc(),i.dc(80,"option",41),i.Vc(81),i.rc(82,"translate"),i.cc(),i.cc(),i.cc(),i.dc(83,"div",42),i.dc(84,"p",43),i.Vc(85),i.rc(86,"translate"),i.cc(),i.dc(87,"div",44),i.dc(88,"div",34),i.nc("click",function(){return i.Kc(t),i.qc().decrementWallheight()}),i.cc(),i.dc(89,"div",45),i.Vc(90),i.cc(),i.dc(91,"div",36),i.nc("click",function(){return i.Kc(t),i.qc().incrementWallheight()}),i.cc(),i.cc(),i.cc(),i.cc(),i.Tc(92,ji,4,6,"div",46),i.cc(),i.dc(93,"div",47),i.dc(94,"div",48),i.nc("click",function(){return i.Kc(t),i.qc().revertChanges()}),i.dc(95,"p",49),i.Vc(96),i.rc(97,"translate"),i.cc(),i.cc(),i.dc(98,"div",50),i.nc("click",function(){return i.Kc(t),i.qc().togglePreviewer()}),i.dc(99,"p",49),i.Vc(100),i.cc(),i.cc(),i.dc(101,"div",51),i.nc("click",function(){return i.Kc(t),i.qc().save()}),i.dc(102,"p",52),i.Vc(103),i.rc(104,"translate"),i.cc(),i.cc(),i.dc(105,"div",53),i.nc("click",function(){return i.Kc(t),i.qc().close()}),i.dc(106,"p",49),i.Vc(107),i.rc(108,"translate"),i.cc(),i.cc(),i.dc(109,"div",54),i.nc("click",function(){return i.Kc(t),i.qc().openImportExport()}),i.dc(110,"p",49),i.Vc(111),i.rc(112,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.sc(4,46,"floor.plan.editor.title")),i.Kb(6),i.Xc("",i.sc(10,48,"floor.plan.editor.subtitle")," "),i.Kb(6),i.Wc(i.sc(16,50,"floor.plan.editor.draw.mode")),i.Kb(2),i.xc("ngClass",i.Bc(86,zi,"set"===t.currentAction)),i.Kb(2),i.xc("ngClass",i.Bc(88,zi,"unset"===t.currentAction)),i.Kb(3),i.xc("ngClass",i.Bc(90,zi,"up"===t.currentAction)),i.Kb(2),i.xc("ngClass",i.Bc(92,zi,"down"===t.currentAction)),i.Kb(3),i.xc("ngClass",i.Bc(94,zi,"door"===t.currentAction)),i.Kb(4),i.Wc(i.sc(32,52,"floor.plan.editor.tile.height")),i.Kb(2),i.xc("ngForOf",i.sc(34,54,t.colorMap)),i.Kb(8),i.Yc("",t.coloredTilesCount,"/",t.maxTilesCount,""),i.Kb(5),i.Wc(i.sc(47,56,"floor.plan.editor.enter.direction")),i.Kb(4),i.xc("headOnly",!1)("scale",1)("asBackground",!0)("figure",t.currentAvatarFigure)("direction",t.doorDirection),i.Kb(5),i.Wc(i.sc(56,58,"floor.plan.editor.room.options")),i.Kb(2),i.xc("ngModel",t.thicknessWall),i.Kb(1),i.xc("value",0),i.Kb(1),i.Wc(i.sc(60,60,"navigator.roomsettings.wall_thickness.thinnest")),i.Kb(2),i.xc("value",1),i.Kb(1),i.Wc(i.sc(63,62,"navigator.roomsettings.wall_thickness.thin")),i.Kb(2),i.xc("value",2),i.Kb(1),i.Wc(i.sc(66,64,"navigator.roomsettings.wall_thickness.normal")),i.Kb(2),i.xc("value",3),i.Kb(1),i.Wc(i.sc(69,66,"navigator.roomsettings.wall_thickness.thick")),i.Kb(2),i.xc("ngModel",t.thicknessFloor),i.Kb(1),i.xc("value",0),i.Kb(1),i.Wc(i.sc(73,68,"navigator.roomsettings.floor_thickness.thinnest")),i.Kb(2),i.xc("value",1),i.Kb(1),i.Wc(i.sc(76,70,"navigator.roomsettings.floor_thickness.thin")),i.Kb(2),i.xc("value",2),i.Kb(1),i.Wc(i.sc(79,72,"navigator.roomsettings.floor_thickness.normal")),i.Kb(2),i.xc("value",3),i.Kb(1),i.Wc(i.sc(82,74,"navigator.roomsettings.floor_thickness.thick")),i.Kb(4),i.Wc(i.sc(86,76,"floor.editor.wall.height")),i.Kb(5),i.Wc(t.wallHeight),i.Kb(2),i.xc("ngIf",t.showPreviewer),i.Kb(2),i.xc("disabled",!t.ableToRevertChanges),i.Kb(2),i.Wc(i.sc(97,78,"floor.plan.editor.reload")),i.Kb(4),i.Wc(t.togglePreviewButton),i.Kb(3),i.Wc(i.sc(104,80,"floor.plan.editor.save")),i.Kb(4),i.Wc(i.sc(108,82,"generic.close")),i.Kb(4),i.Wc(i.sc(112,84,"floor.plan.editor.import.export"))}}function qi(t,e){if(1&t&&i.Zb(0,"nitro-floorplan-import-export-component",61),2&t){const t=i.qc();i.xc("map",t.heightMap)}}window.PIXI=g;let Zi=(()=>{class t{constructor(t,e,s,i){this._ngZone=t,this.floorPlanService=e,this._settingsService=s,this._sessionService=i,this.visible=!1,this.showPreviewer=!1,this._previewerEventsSet=!1,this.floorPlanService.component=this,this._clear()}ngOnInit(){this._roomPreviewer=new di(_.a.instance.roomEngine,++di.PREVIEW_COUNTER),this._roomPreviewer.zoomOut(),this._roomPreviewer.zoomOut()}ngOnChanges(t){t.visible.currentValue?(_.a.instance.communication.connection.send(new ri.a),_.a.instance.communication.connection.send(new ni.a)):this._clear()}ngOnDestroy(){this._roomPreviewer&&(this._roomPreviewer.dispose(),this._roomPreviewer=null)}_clear(){this.floorPlanService.clear(),this._ngZone.runOutsideAngular(()=>{this._app&&(this._app.destroy(!0),this._app=null,this._tileMap.destroy(),this._tileMap=null)})}close(){this._settingsService.floorPlanVisible=!1,this.floorPlanService.showImportExport=!1}preview(t){const{doorX:e,doorY:s,doorDirection:i,thicknessWall:n,thicknessFloor:r}=this.floorPlanService.floorMapSettings;this.init(t,this.floorPlanService.blockedTilesMap,e,s,i,n,r)}render(){this._app&&this._app.stage.removeChildren(),this._ngZone.runOutsideAngular(()=>{}),this.floorPlanService.render()}init(t,e,s,i,n,r,a){this._clear(),this.floorPlanService.floorMapSettings.heightMapString=t,this.floorPlanService.floorMapSettings.doorX=s,this.floorPlanService.floorMapSettings.doorY=i,this.floorPlanService.floorMapSettings.doorDirection=n,this.floorPlanService.blockedTilesMap=e,this.floorPlanService.floorMapSettings.thicknessWall=r,this.floorPlanService.floorMapSettings.thicknessFloor=a,this._ngZone.run(()=>{this.floorPlanService.floorMapSettings.doorDirection=n}),this.floorPlanService.floorMapSettings.heightMap=this.floorPlanService.readTileMapString(t);const o=this.floorPlanService.tileSize,c=o*this.floorPlanService.floorMapSettings.heightMap.length+20,h=o*this.floorPlanService.floorMapSettings.heightMap.length/2+100;this.floorPlanService.originalMapSettings=this.floorPlanService.floorMapSettings,this._ngZone.runOutsideAngular(()=>{this._buildApp(c,h),this.floorPlanService.renderTileMap()})}_buildApp(t,e){if(!this._app){this._app=new g.Application({width:t,height:e,backgroundColor:2829099,antialias:!0,autoDensity:!0,resolution:1}),this._tileMap=new Si,this._tileMap.interactive=!0,this._ngZone.runOutsideAngular(()=>this.floorPlanService.detectPoints()),this._app.stage.addChild(this._tileMap),this.floorplanElement.nativeElement.appendChild(this._app.view);let s={top:0,left:0,x:0,y:0};const i=this.floorplanElement.nativeElement,n=function(t){2===t.button&&(i.style.cursor="grabbing",i.style.userSelect="none",s={left:i.scrollLeft,top:i.scrollTop,x:t.clientX,y:t.clientY},i.addEventListener("mousemove",r),i.addEventListener("mouseup",a))},r=function(t){const e=t.clientX-s.x;i.scrollTop=s.top-(t.clientY-s.y),i.scrollLeft=s.left-e},a=function(){i.style.cursor="default",i.removeEventListener("mousemove",r),i.removeEventListener("mouseup",a)};i.addEventListener("mousedown",n),i.oncontextmenu=function(){return!1},this.setPreviewerEvents(),this.floorplanElement.nativeElement.scrollTo(t/3,0)}}setPreviewerEvents(){if(!this.showPreviewer||this._previewerEventsSet)return;const t=this.floorplanPreviewer.nativeElement;let e={top:0,left:0,x:0,y:0};const s=function(s){const i=s.clientX-e.x;t.scrollTop=e.top-(s.clientY-e.y),t.scrollLeft=e.left-i},i=function(){t.style.cursor="default",t.removeEventListener("mousemove",s),t.removeEventListener("mouseup",i)};t.addEventListener("mousedown",function(n){t.style.cursor="grabbing",t.style.userSelect="none",e={left:t.scrollLeft,top:t.scrollTop,x:n.clientX,y:n.clientY},t.addEventListener("mousemove",s),t.addEventListener("mouseup",i)}),t.oncontextmenu=function(){return!1},t.scrollTo(250,250),this._previewerEventsSet=!0}changeAction(t){this.floorPlanService.currentAction=t}selectHeight(t){this.floorPlanService.currentHeight=t,this.changeAction("set")}getColor(t){return t.replace("0x","#")}save(){this.floorPlanService.floorMapSettings.heightMapString=this.floorPlanService.generateTileMapString(),this.floorPlanService.save(this.floorPlanService.floorMapSettings)}decrementHeight(){this.floorPlanService.decrementHeight()}incrementHeight(){this.floorPlanService.incrementHeight()}decrementDoorDirection(){this.floorPlanService.decrementDoorDirection()}incrementDoorDirection(){this.floorPlanService.incrementDoorDirection()}decrementWallheight(){this.floorPlanService.decrementWallheight()}incrementWallheight(){this.floorPlanService.incrementWallheight()}openImportExport(){this.floorPlanService.showImportExport=!0}revertChanges(){this.floorPlanService.revertChanges()}toggleEditor(){this.minimize=!this.minimize}togglePreviewer(){this.showPreviewer=!this.showPreviewer,this.showPreviewer||(this._previewerEventsSet=!1)}get colorMap(){return Object.keys(this.floorPlanService.colorMap).filter(t=>"x"!==t).reduce((t,e)=>(t[e]=this.floorPlanService.colorMap[e],t),{})}get currentAction(){return this.floorPlanService.currentAction}get currentHeight(){return this.floorPlanService.currentHeight}get coloredTilesCount(){return this.floorPlanService.coloredTilesCount}get maxTilesCount(){return this.floorPlanService.maxTilesCount}get roomPreviewer(){return this._roomPreviewer}get currentModel(){return this.floorPlanService.floorMapSettings.heightMapString}get doorDirection(){return this.floorPlanService.floorMapSettings.doorDirection}get wallHeight(){return 0==this.floorPlanService.wallHeight&&(this.floorPlanService.wallHeight=1),this.floorPlanService.wallHeight}get thicknessWall(){return this.floorPlanService.floorMapSettings.thicknessWall}set thicknessWall(t){this.floorPlanService.floorMapSettings.thicknessWall=t}get thicknessFloor(){return this.floorPlanService.floorMapSettings.thicknessFloor}set thicknessFloor(t){this.floorPlanService.floorMapSettings.thicknessFloor=t}get ableToRevertChanges(){return this.floorPlanService.changesMade}get tileMap(){return this._tileMap}get showImportExport(){return this.floorPlanService.showImportExport}get togglePreviewButton(){const t=this.showPreviewer?"Hide Preview":"Show Preview",e=_.a.instance.localization.getValue(this.showPreviewer?"nitro.floorplan.previewer.hide":"nitro.floorplan.previewer.show");return e==e?t:e}get currentAvatarFigure(){return this._sessionService.figure}get heightMap(){return this.floorPlanService.floorMapSettings.heightMapString}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H),i.Yb(Fi),i.Yb(m),i.Yb(Vi))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-floorplan-main-component"]],viewQuery:function(t,e){if(1&t&&(i.bd(Bi,1),i.bd(Wi,1)),2&t){let t;i.Gc(t=i.oc())&&(e.floorplanElement=t.first),i.Gc(t=i.oc())&&(e.floorplanPreviewer=t.first)}},inputs:{visible:"visible"},features:[i.Ib],decls:2,vars:2,consts:[["id","floorplaneditor","class","nitro-floorplan-editor-component",3,"bringToTop","draggable",4,"ngIf"],[3,"map",4,"ngIf"],["id","floorplaneditor",1,"nitro-floorplan-editor-component",3,"bringToTop","draggable"],["id","floorplaneditordrag",1,"drag-handler"],[1,"ae-baslik"],[1,"old-kapat",3,"click"],[1,"fpe-head"],["src","./assets/images/floorplan/fpeico.png",1,"fpeico"],[1,"fpetxt"],[1,"floorplan-box"],[1,"fpe-leftbox"],[1,"drawing-mode"],[1,"drawingm-txt"],[1,"fpe_drawingm-button",3,"ngClass","click"],["src","./assets/images/floorplan/addtile.png"],["src","./assets/images/floorplan/deletetile.png"],[1,"fpe_drawingm-hr"],["src","./assets/images/floorplan/raisetile.png"],["src","./assets/images/floorplan/lowertile.png"],["src","./assets/images/floorplan/roomhome.png"],[1,"adjust-height"],[1,"adjustheight-txt"],["class","fpe-colorbox",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[1,"create-floor-plan"],[1,"testa"],[1,"floor-main-bigscreen"],[1,"cfplist"],["floorplanElement",""],[1,"area-info"],[1,"fpe-rightbox"],[1,"fperight-options"],[1,"fpe-set_direction"],[1,"setdirec-txt"],[1,"user-setdirec-box"],[1,"user-left_turn",3,"click"],["avatar-image","",1,"fpe-avatar",3,"headOnly","scale","asBackground","figure","direction"],[1,"user-right_turn",3,"click"],[1,"fpe_drawingm-hr2"],[1,"fpe-room_settings"],[1,"roomsettings-txt"],["id","fpe-category-select",3,"ngModel","ngModelChange"],[3,"value"],[1,"wall-container"],[1,"wall-text"],[1,"wall-btn-box"],[1,"wall-info"],["class","editor-area","style","text-align: center",4,"ngIf"],[1,"fpe-buttonbox"],[1,"fpe-take_it_back",3,"disabled","click"],[1,"fpe-buttontxt"],[1,"fpe-take_it_back",2,"margin-left","7px",3,"click"],[1,"fpe-save",3,"click"],[1,"fpe-buttontxt",2,"color","white"],[1,"fpe-close",3,"click"],[1,"fpe-close",2,"margin-right","7px",3,"click"],[1,"fpe-colorbox",3,"ngClass","ngStyle","click"],[1,"fpe-color_select"],[1,"editor-area",2,"text-align","center"],[1,"fperlist-flex"],["floorplanPreviewer",""],["nitro-room-preview-component","",1,"room-preview","pwtest",3,"roomPreviewer","width","height","modelScale","model","wallHeight"],[3,"map"]],template:function(t,e){1&t&&(i.Tc(0,Yi,113,96,"div",0),i.Tc(1,qi,1,1,"nitro-floorplan-import-export-component",1)),2&t&&(i.xc("ngIf",e.visible),i.Kb(1),i.xc("ngIf",e.showImportExport))},encapsulation:2}),t})();const Xi=["roomCanvas"],Qi=["widgetContainer"];function Ji(t,e){}let $i=(()=>{class t{constructor(t,e,s,i,n,r,a,o){this._notificationService=t,this._wiredService=e,this._friendService=s,this._chatHistoryService=i,this._componentFactoryResolver=n,this._modToolsService=r,this._settingsService=a,this._ngZone=o,this._events=new k.a,this._handlers=[],this._widgets=new Map,this._widgetHandlerMessageMap=new Map,this._widgetHandlerEventMap=new Map,this._roomColorAdjustor=null,this._roomBackground=null,this._roomBackgroundColor=0,this._roomColorizerColor=0,this._roomScale=1,this._resizeTimer=null,this._didMouseMove=!1,this._lastClick=0,this._clickCount=0,this._lastMouseMove=0,this._isMouseMove=!1,this._scrollCount=0,this._lastScrollTime=0,this.processEvent=this.processEvent.bind(this)}ngOnDestroy(){this.endRoom(),this._events.dispose()}get floorPlanVisible(){return this._settingsService.floorPlanVisible}prepareRoom(t){if(!t)return;const e=this.getFirstCanvasId(),s=_.a.instance.roomEngine.getRoomInstanceDisplay(t.roomId,e,_.a.instance.width,_.a.instance.height,q.a.SCALE_ZOOMED_IN);if(!s)return;const i=_.a.instance.roomEngine.getRoomInstanceGeometry(t.roomId,e);if(i){let e=((_.a.instance.roomEngine.getRoomInstanceVariable(t.roomId,G.a.ROOM_MIN_X)||0)+(_.a.instance.roomEngine.getRoomInstanceVariable(t.roomId,G.a.ROOM_MAX_X)||0))/2,s=((_.a.instance.roomEngine.getRoomInstanceVariable(t.roomId,G.a.ROOM_MIN_Y)||0)+(_.a.instance.roomEngine.getRoomInstanceVariable(t.roomId,G.a.ROOM_MAX_Y)||0))/2;const n=20;e+=n-1,s+=n-1;const r=Math.sqrt(n*n+n*n)*Math.tan(30/180*Math.PI);i.location=new Z.a(e,s,r)}const n=_.a.instance.stage;n&&(n.addChild(s),this._roomSession=t,this.insertCanvas(),this.onWindowResizeEvent(null),_.a.instance.ticker.add(this.update,this),this._friendService.events.addEventListener(X.ACCEPTED,this.processEvent),this._friendService.events.addEventListener(X.DECLINED,this.processEvent))}endRoom(){if(this._roomSession){this._friendService.events.removeEventListener(X.ACCEPTED,this.processEvent),this._friendService.events.removeEventListener(X.DECLINED,this.processEvent),_.a.instance.ticker.remove(this.update,this),this._resizeTimer&&(clearTimeout(this._resizeTimer),this._resizeTimer=null);for(const t of this._widgets.values())t&&(t.instance&&t.instance.dispose(),this._ngZone.run(()=>t.destroy()));for(const t of this._handlers)t&&t.dispose();this._roomColorAdjustor=null,this._roomBackground=null,this._roomBackgroundColor=0,this._roomColorizerColor=0,this._roomScale=1,t.COLOR_ADJUSTMENT.red=1,t.COLOR_ADJUSTMENT.green=1,t.COLOR_ADJUSTMENT.blue=1,this._handlers=[],this._widgets.clear(),this._widgetHandlerMessageMap.clear(),this._widgetHandlerEventMap.clear(),this._events.removeAllListeners(),this._roomSession=null,this.removeCanvas(),l.a.call("logDebug","Navigator: exiting room")}}insertCanvas(){const t=_.a.instance.renderer.view;t&&(t.onclick=this.onMouseEvent.bind(this),t.onmousemove=this.onMouseEvent.bind(this),t.onmousedown=this.onMouseEvent.bind(this),t.onmouseup=this.onMouseEvent.bind(this),t.ontouchstart=this.onTouchEvent.bind(this),t.ontouchmove=this.onTouchEvent.bind(this),t.ontouchend=this.onTouchEvent.bind(this),t.ontouchcancel=this.onTouchEvent.bind(this),window.onresize=this.onWindowResizeEvent.bind(this),window.onmousewheel=this.onWindowMouseWheelEvent.bind(this),this.roomCanvasReference.nativeElement.appendChild(t))}removeCanvas(){const t=_.a.instance.renderer.view;t&&(t.onclick=null,t.onmousemove=null,t.onmousedown=null,t.onmouseup=null,t.ontouchstart=null,t.ontouchmove=null,t.ontouchend=null,t.ontouchcancel=null,window.onresize=null,window.onmousewheel=null,t.parentElement&&t.parentElement.removeChild(t))}onMouseEvent(t){if(!t||!this._roomSession)return;const e=t.clientX,s=t.clientY;let i=t.type;switch(i===j.a.MOUSE_CLICK&&(this._lastClick&&(this._clickCount=1,this._lastClick>=Date.now()-300&&this._clickCount++),this._lastClick=Date.now(),2===this._clickCount&&(this._didMouseMove||(i=j.a.DOUBLE_CLICK),this._clickCount=0,this._lastClick=null)),i){case j.a.MOUSE_CLICK:case j.a.DOUBLE_CLICK:break;case j.a.MOUSE_MOVE:this._didMouseMove=!0;break;case j.a.MOUSE_DOWN:this._didMouseMove=!1;break;case j.a.MOUSE_UP:break;default:return}_.a.instance.roomEngine.setActiveRoomId(this._roomSession.roomId),_.a.instance.roomEngine.dispatchMouseEvent(this.getFirstCanvasId(),e,s,i,t.altKey,t.ctrlKey||t.metaKey,t.shiftKey,!1)}onTouchEvent(t){if(!t||!this._roomSession)return;let e=t.type;switch(e!==z.TOUCH_END||this._didMouseMove||(e=j.a.MOUSE_CLICK,this._lastClick&&(this._clickCount=1,this._lastClick>=Date.now()-300&&this._clickCount++),this._lastClick=Date.now(),2===this._clickCount&&(e=j.a.DOUBLE_CLICK,this._clickCount=0,this._lastClick=null)),e){case j.a.MOUSE_CLICK:case j.a.DOUBLE_CLICK:break;case z.TOUCH_START:e=j.a.MOUSE_DOWN,this._didMouseMove=!1;break;case z.TOUCH_MOVE:e=j.a.MOUSE_MOVE,this._didMouseMove=!0;break;default:return}let s=0,i=0;t.touches[0]?(s=t.touches[0].clientX,i=t.touches[0].clientY):t.changedTouches[0]&&(s=t.changedTouches[0].clientX,i=t.changedTouches[0].clientY),_.a.instance.roomEngine.setActiveRoomId(this._roomSession.roomId),_.a.instance.roomEngine.dispatchMouseEvent(this.getFirstCanvasId(),s,i,e,t.altKey,t.ctrlKey||t.metaKey,t.shiftKey,!1)}onWindowResizeEvent(t){this._roomSession&&(this._resizeTimer&&clearTimeout(this._resizeTimer),this._resizeTimer=setTimeout(()=>{_.a.instance.renderer.resize(window.innerWidth,window.innerHeight),_.a.instance.roomEngine.initializeRoomInstanceRenderingCanvas(this._roomSession.roomId,this.getFirstCanvasId(),_.a.instance.width,_.a.instance.height),this._events.dispatchEvent(new tt(tt.SIZE_CHANGED,this.getRoomViewRect())),this.setRoomBackground(),_.a.instance.render()},1))}onWindowMouseWheelEvent(t){if(!t||!this._roomSession)return;if(t.target!==_.a.instance.renderer.view)return;const e=-1/40*(t.wheelDeltaY||t.deltaY)<0?1:-1;if(this._lastScrollTime&&(this._lastScrollTime<Date.now()-300&&(this._scrollCount=0),this._scrollCount++),this._lastScrollTime=Date.now(),15!==this._scrollCount)return;this._scrollCount=0,this._lastScrollTime=null;let s=this._roomScale;switch(e){case 1:s>=.5&&(s+=.5);break;case-1:s<=1?s=.5:s-=.5}this._roomScale=s,_.a.instance.roomEngine.events.dispatchEvent(new T(this._roomSession.roomId,s,!1))}update(){for(const t of this._widgets.values())t.instance.widgetHandler&&t.instance.widgetHandler.update()}createWidget(t,e){if(this._widgets.get(t))return;let s=null,i=!1;switch(t){case x.a.CHAT_WIDGET:{i=!0;const t=new wt(this._chatHistoryService);t.connection=_.a.instance.communication.connection,s=t;break}case x.a.CHAT_INPUT_WIDGET:i=!0,s=new bt;break;case x.a.AVATAR_INFO:s=new _t;break;case x.a.INFOSTAND:s=new Ge;break;case x.a.LOCATION_WIDGET:s=new ze;break;case x.a.INTERNAL_LINK:s=new de;break;case x.a.ROOM_LINK:s=new be;break;case x.a.ROOM_DIMMER:s=new le;break;case x.a.CUSTOM_STACK_HEIGHT:s=new ie;break;case x.a.FURNI_CHOOSER:s=new Yt;break;case x.a.USER_CHOOSER:s=new Xe;break;case x.a.FURNI_STICKIE_WIDGET:s=new Te;break;case x.a.DOORBELL:s=new Ut;break;case x.a.FURNI_TROPHY_WIDGET:s=new ye;break;case x.a.FURNI_CREDIT_WIDGET:s=new ee;break;case x.a.FURNITURE_CONTEXT_MENU:s=new Xt;break;case x.a.MANNEQUIN:s=new ge;break;case x.a.ROOM_BACKGROUND_COLOR:s=new qt;break;case x.a.FRIEND_FURNI_CONFIRM:s=new kt;break;case x.a.FRIEND_FURNI_ENGRAVING:s=new Bt;break;case x.a.ROOM_TOOLS:s=new Ze;break;case x.a.FURNI_PRESENT_WIDGET:s=new Ee;break;case x.a.FRIEND_REQUEST:s=new Gt;break;case x.a.HIGH_SCORE_DISPLAY:s=new _e}if(s){const i=s.messageTypes;if(i&&i.length)for(const t of i){if(!t)continue;let e=this._widgetHandlerMessageMap.get(t);e||(e=[],this._widgetHandlerMessageMap.set(t,e)),e.push(s)}const n=s.eventTypes;if(n.push(b.a.OPEN_WIDGET,b.a.CLOSE_WIDGET),n&&n.length)for(const t of n){if(!t)continue;let e=this._widgetHandlerEventMap.get(t);e||(e=[],this._widgetHandlerEventMap.set(t,e)),e.push(s)}if(this._handlers.push(s),e){let i=null,n=null;if(this._ngZone.run(()=>{const t=this._componentFactoryResolver.resolveComponentFactory(e);i=this.widgetContainer.createComponent(t),n=i.instance}),!n)return;n.widgetHandler=s,n.messageListener=this,n.registerUpdateEvents(this._events),this._widgets.set(t,i)}s.container=this}i&&this._events.dispatchEvent(new tt(tt.SIZE_CHANGED,this.getRoomViewRect()))}processEvent(t){if(!t||!this._widgetHandlerEventMap)return;const e=this._widgetHandlerEventMap.get(t.type);if(!e)return;let s=!1;for(const i of e)i&&(s=!0,t.type!==b.a.OPEN_WIDGET&&t.type!==b.a.CLOSE_WIDGET||t instanceof b.a&&(s=i.type===t.widget),s&&i.processEvent(t))}processWidgetMessage(t){if(!t||!t.type)return null;const e=this._widgetHandlerMessageMap.get(t.type);if(!e||!e.length)return null;for(const s of e){if(!s)continue;const e=s.processWidgetMessage(t);if(e)return e}return null}onRoomEngineEvent(t){if(t)switch(t.type){case d.a.NORMAL_MODE:return void this._events.dispatchEvent(new J(J.RWREUE_NORMAL_MODE,t.roomId));case d.a.GAME_MODE:return void this._events.dispatchEvent(new J(J.RWREUE_GAME_MODE,t.roomId))}}onRoomEngineObjectEvent(t){if(!t)return;const e=t.objectId,s=t.category;let i=null;switch(t.type){case v.a.SELECTED:if(this.isFurnitureSelectionDisabled(t)||(i=new $($.OBJECT_SELECTED,e,s,t.roomId)),s==V.a.UNIT){const t=this._roomSession.userDataManager.getUserDataByIndex(e);t&&t.type==W.a.USER&&this._modToolsService.selectUser(t.webID,t.name)}break;case v.a.DESELECTED:i=new $($.OBJECT_DESELECTED,e,s,t.roomId);break;case v.a.ADDED:{let n=null;switch(s){case V.a.FLOOR:case V.a.WALL:n=$.FURNI_ADDED;break;case V.a.UNIT:n=$.USER_ADDED}n&&(i=new $(n,e,s,t.roomId));break}case v.a.REMOVED:{let n=null;switch(s){case V.a.FLOOR:case V.a.WALL:n=$.FURNI_REMOVED;break;case V.a.UNIT:n=$.USER_REMOVED}n&&(i=new $(n,e,s,t.roomId));break}case v.a.MOUSE_ENTER:i=new $($.OBJECT_ROLL_OVER,e,s,t.roomId);break;case v.a.MOUSE_LEAVE:i=new $($.OBJECT_ROLL_OUT,e,s,t.roomId);break;case v.a.REQUEST_MOVE:this.checkFurniManipulationRights(t.roomId,e,s)&&_.a.instance.roomEngine.processRoomObjectOperation(e,s,B.a.OBJECT_MOVE);break;case v.a.REQUEST_ROTATE:this.checkFurniManipulationRights(t.roomId,e,s)&&_.a.instance.roomEngine.processRoomObjectOperation(e,s,B.a.OBJECT_ROTATE_POSITIVE);break;case b.a.REQUEST_STICKIE:this.processWidgetMessage(new te(te.REQUEST_STICKIE,e,s,t.roomId));break;case b.a.REQUEST_TROPHY:this.processWidgetMessage(new te(te.REQUEST_TROPHY,e,s,t.roomId));break;case b.a.REQUEST_CREDITFURNI:this.processWidgetMessage(new te(te.REQUEST_CREDITFURNI,e,s,t.roomId));break;case b.a.REQUEST_DIMMER:this.processWidgetMessage(new te(te.REQUEST_DIMMER,e,s,t.roomId));break;case b.a.REQUEST_PRESENT:this.processWidgetMessage(new te(te.REQUEST_PRESENT,e,s,t.roomId));break;case b.a.OPEN_WIDGET:case b.a.CLOSE_WIDGET:case b.a.OPEN_FURNI_CONTEXT_MENU:case b.a.CLOSE_FURNI_CONTEXT_MENU:case b.a.REMOVE_DIMMER:case b.a.REQUEST_MANNEQUIN:case b.a.REQUEST_BACKGROUND_COLOR:case b.a.REQUEST_FRIEND_FURNITURE_ENGRAVING:case b.a.REQUEST_HIGH_SCORE_DISPLAY:case b.a.REQUEST_HIDE_HIGH_SCORE_DISPLAY:case b.a.REQUEST_INTERNAL_LINK:case b.a.REQUEST_ROOM_LINK:this.processEvent(t)}if(i){let t=!0;i instanceof $&&(t=!P.isRoomPreviewerId(i.roomId)),t&&this._events.dispatchEvent(i)}}isFurnitureSelectionDisabled(t){let e=!1;const s=_.a.instance.roomEngine.getRoomObject(t.roomId,t.objectId,t.category);return s&&1===s.model.getValue(K.a.FURNITURE_SELECTION_DISABLED)&&(e=!0,_.a.instance.sessionDataManager.isModerator&&(e=!1)),e}checkFurniManipulationRights(t,e,s){return this._roomSession.controllerLevel>=H.a.GUEST||_.a.instance.sessionDataManager.isModerator||this.isOwnerOfFurniture(_.a.instance.roomEngine.getRoomObject(t,e,s))}isOwnerOfFurniture(t){return!(!t||!t.model)&&_.a.instance.sessionDataManager.userId===t.model.getValue(K.a.FURNITURE_OWNER_ID)}_Str_2485(t){if(!t||!this._widgetHandlerEventMap)return;const e=this._widgetHandlerEventMap.get(t.type);if(e&&e.length){let s=!0;for(const i of e)(t.type===b.a.OPEN_WIDGET||b.a.CLOSE_WIDGET)&&t instanceof b.a&&(s=i.type===t.widget),s&&i.processEvent(t)}}getRoomBackground(){if(this._roomBackground)return this._roomBackground;const t=this.roomEngine.getRoomInstanceRenderingCanvas(this.roomSession.roomId,this.getFirstCanvasId());if(!t)return null;const e=t.master,s=new g.Sprite(g.Texture.WHITE);return e.addChildAt(s,0),this._roomBackground=s,this._roomBackground}getRoomColorizer(){if(this._roomColorAdjustor)return this._roomColorAdjustor;const e=this.roomEngine.getRoomInstanceRenderingCanvas(this.roomSession.roomId,this.getFirstCanvasId());if(!e)return null;const s=e.master;return s?(this._roomColorAdjustor=t.COLOR_ADJUSTMENT,s.filters=[this._roomColorAdjustor],this._roomColorAdjustor):null}setRoomBackgroundColor(t,e,s){this._roomBackgroundColor=Y.a._Str_13949(((255&t)<<16)+((255&e)<<8)+(255&s));const i=this.getRoomBackground();i&&(t||e||s?(i.visible=!0,this.setRoomBackground()):i.visible=!1)}setRoomColorizerColor(t,e){this._roomColorizerColor=Y.a._Str_13949((16776960&Y.a._Str_22130(t))+e),this.setRoomColorizer()}setRoomBackground(){const t=this.getRoomBackground();t&&(t.tint=this._roomBackgroundColor,t.width=_.a.instance.width,t.height=_.a.instance.height)}setRoomColorizer(){const t=this.getRoomColorizer();if(!t)return;const e=this._roomColorizerColor>>8&255,s=255&this._roomColorizerColor;t.red=(this._roomColorizerColor>>16&255)/255,t.green=e/255,t.blue=s/255}getFirstCanvasId(){return 1}getRoomViewRect(){const t=this.roomCanvasReference.nativeElement.getBoundingClientRect();return new g.Rectangle(t.x||0,t.y||0,t.width||0,t.height||0)}get events(){return this._events}get connection(){return _.a.instance.communication.connection}get roomEngine(){return _.a.instance.roomEngine}get avatarRenderManager(){return _.a.instance.avatar}get roomSessionManager(){return _.a.instance.roomSessionManager}get sessionDataManager(){return _.a.instance.sessionDataManager}get roomSession(){return this._roomSession}get notificationService(){return this._notificationService}get wiredService(){return this._wiredService}get friendService(){return this._friendService}get settingsService(){return this._settingsService}}return t.COLOR_ADJUSTMENT=new F.a,t.\u0275fac=function(e){return new(e||t)(i.Yb(ss),i.Yb(us),i.Yb(Hs),i.Yb(js),i.Yb(i.m),i.Yb(ii),i.Yb(m),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-component"]],viewQuery:function(t,e){if(1&t&&(i.bd(Xi,1),i.bd(Qi,1,i.Z)),2&t){let t;i.Gc(t=i.oc())&&(e.roomCanvasReference=t.first),i.Gc(t=i.oc())&&(e.widgetContainer=t.first)}},decls:6,vars:1,consts:[[1,"nitro-room-component"],[3,"visible"],[1,"room-view"],["roomCanvas",""],["widgetContainer",""]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Zb(1,"nitro-floorplan-main-component",1),i.Zb(2,"div",2,3),i.Tc(4,Ji,0,0,"ng-template",null,4,i.Uc),i.cc()),2&t&&(i.Kb(1),i.xc("visible",e.floorPlanVisible))},directives:[Zi],encapsulation:2}),t})();var tn=s("/PsI");class en{constructor(){this._widgetHandler=null,this._messageListener=null,this._events=null,this._disposed=!1}initialize(t=0){}dispose(){this.disposed||(this._messageListener=null,this._events&&!this._events.disposed&&this.unregisterUpdateEvents(this._events),this._widgetHandler&&(this._widgetHandler.dispose(),this._widgetHandler=null),this._events=null,this._disposed=!0)}registerUpdateEvents(t){this._events=t}unregisterUpdateEvents(t){this._events=null}get disposed(){return this._disposed}get widgetHandler(){return this._widgetHandler}set widgetHandler(t){this._widgetHandler=t,this._widgetHandler.widget||(this._widgetHandler.widget=this)}get messageListener(){return this._messageListener}set messageListener(t){this._messageListener=t}}var sn=s("vqvB");class nn{constructor(){this._isIgnored=!1,this._canTrade=!1,this._canTradeReason=0,this._canBeKicked=!1,this._canBeBanned=!1,this._canBeMuted=!1,this._canBeAskedAsFriend=!1,this._amIOwner=!1,this._amIAnyRoomController=!1,this._respectLeft=0,this._isOwnUser=!1,this._allowNameChange=!1,this._isGuildRoom=!1,this._carryItemType=0,this._myRoomControllerLevel=0,this._targetRoomControllerLevel=0,this._isFriend=!1,this._isAmbassador=!1}get _Str_3655(){return this._isIgnored}set _Str_3655(t){this._isIgnored=t}get _Str_5751(){return this._canTrade}set _Str_5751(t){this._canTrade=t}get _Str_6622(){return this._canTradeReason}set _Str_6622(t){this._canTradeReason=t}get _Str_5990(){return this._canBeKicked}set _Str_5990(t){this._canBeKicked=t}get _Str_6701(){return this._canBeBanned}set _Str_6701(t){this._canBeBanned=t}get _Str_6394(){return this._canBeMuted}set _Str_6394(t){this._canBeMuted=t}get canBeAskedForAFriend(){return this._canBeAskedAsFriend}set canBeAskedForAFriend(t){this._canBeAskedAsFriend=t}get _Str_3246(){return this._amIOwner}set _Str_3246(t){this._amIOwner=t}get _Str_3529(){return this._amIAnyRoomController}set _Str_3529(t){this._amIAnyRoomController=t}get _Str_3577(){return this._respectLeft}set _Str_3577(t){this._respectLeft=t}get _Str_11453(){return this._isOwnUser}set _Str_11453(t){this._isOwnUser=t}get allowNameChange(){return this._allowNameChange}set allowNameChange(t){this._allowNameChange=t}get _Str_3672(){return this._isGuildRoom}set _Str_3672(t){this._isGuildRoom=t}get _Str_8826(){return this._carryItemType}set _Str_8826(t){this._carryItemType=t}get roomControllerLevel(){return this._myRoomControllerLevel}set roomControllerLevel(t){this._myRoomControllerLevel=t}get _Str_5599(){return this._targetRoomControllerLevel}set _Str_5599(t){this._targetRoomControllerLevel=t}get isFriend(){return this._isFriend}get _Str_4050(){return this._isAmbassador}populate(t){this._amIAnyRoomController=t.isModerator,this._myRoomControllerLevel=t.roomControllerLevel,this._amIOwner=t.isRoomOwner,this._canBeAskedAsFriend=t.canBeAskedForAFriend,this._canBeKicked=t._Str_5990,this._canBeBanned=t._Str_6701,this._canBeMuted=t._Str_6394,this._canTrade=t.canTrade,this._canTradeReason=t._Str_6622,this._isIgnored=t.isIgnored,this._respectLeft=t.respectLeft,this._isOwnUser=t.type===Be.OWN_USER,this._allowNameChange=t._Str_4330,this._isGuildRoom=t.isGuildRoom,this._targetRoomControllerLevel=t.flatControl,this._carryItemType=t.carryId,this._isFriend=t.isFriend,this._isAmbassador=t.isAmbassador}}class rn{constructor(){this.age=0,this.rarityLevel=0,this._Str_5114=!1,this.energy=0,this.maximumEnergy=0,this.experience=0,this.levelExperienceGoal=0,this.id=0,this._Str_5175=!1,this.level=0,this.maximumLevel=0,this.name="",this.happyness=0,this.maximumHappyness=0,this.ownerId=0,this.ownerName="",this._Str_14767=0,this.respect=0,this._Str_2985=0,this._Str_4355=0,this.saddle=!1,this.rider=!1,this.breedable=!1,this.fullyGrown=!1,this.dead=!1,this.publiclyRideable=0,this.maximumTimeToLive=0,this.remainingTimeToLive=0,this.remainingGrowTime=0,this.publiclyBreedable=!1,this._Str_3307=[]}populate(t){this.age=t.age,this.rarityLevel=t.rarityLevel,this._Str_5114=t._Str_5114,this.energy=t.energy,this.maximumEnergy=t.maximumEnergy,this.experience=t.experience,this.levelExperienceGoal=t.levelExperienceGoal,this.id=t.id,this._Str_5175=t._Str_5175,this.level=t.level,this.maximumLevel=t.maximumLevel,this.name=t.name,this.happyness=t.happyness,this.maximumHappyness=t.maximumHappyness,this.ownerId=t.ownerId,this.ownerName=t.ownerName,this._Str_14767=t._Str_14767,this.respect=t.respect,this._Str_2985=t._Str_2985,this._Str_4355=t._Str_4355,this.saddle=t.saddle,this.rider=t.rider,this.breedable=t.breedable,this.dead=t.dead,this.fullyGrown=t.fullyGrown,this._Str_3307=t._Str_3307,this.publiclyRideable=t.publiclyRideable,this.maximumTimeToLive=t.maximumTimeToLive,this.remainingTimeToLive=t.remainingTimeToLive,this.remainingGrowTime=t.remainingGrowTime,this.publiclyBreedable=t.publiclyBreedable}}class an{constructor(){this._id=-1,this._isIgnored=!1,this._amIOwner=!1,this._amIAnyRoomController=!1,this._carryItemType=0}get id(){return this._id}set id(t){this._id=t}get _Str_2707(){return this._roomIndex}set _Str_2707(t){this._roomIndex=t}get _Str_3655(){return this._isIgnored}set _Str_3655(t){this._isIgnored=t}get _Str_3246(){return this._amIOwner}set _Str_3246(t){this._amIOwner=t}get _Str_3529(){return this._amIAnyRoomController}set _Str_3529(t){this._amIAnyRoomController=t}get _Str_8826(){return this._carryItemType}set _Str_8826(t){this._carryItemType=t}get _Str_2899(){return this._botSkills}set _Str_2899(t){this._botSkills=t}get _Str_10833(){return this._botSkillsWithCommands}set _Str_10833(t){this._botSkillsWithCommands=t}get name(){return this._name}populate(t){t.id!=this.id&&(this._botSkillsWithCommands=new Array(0)),this.id=t.id,this._Str_2707=t.roomIndex,this._Str_3246=t._Str_3246,this._Str_3529=t._Str_3529,this._Str_8826=t.carryId,this._Str_2899=t.botSkills,this._name=t.name}_Str_19891(t){this._botSkills=[];for(const e of t)this._Str_2899.push(e);this._botSkillsWithCommands=t.concat()}}class on{constructor(t){this._data=[],this._maxSize=t,this._index=0}reset(){this._data=[],this._index=0}_Str_22775(t){this._data.length<this._maxSize?this._data.push(t):this._data[this._index]=t,this._index=(this._index+1)%this._maxSize}_Str_25797(){let t=Number.MIN_VALUE,e=0;for(;e<this._maxSize;)this._data[e]>t&&(t=this._data[e]),e++;return t}_Str_26219(){let t=Number.MAX_VALUE,e=0;for(;e<this._maxSize;)this._data[e]<t&&(t=this._data[e]),e++;return t}}let cn=(()=>{class t{constructor(){this.parent=null,this.componentRef=null,this.activeView=null,this.stack=new on(t.LOCATION_STACK_SIZE),this.opacity=0,this.currentDeltaY=-1e6,this.willFade=!1,this.firstFadeStarted=!1,this.fadeAfterDelay=!0,this.fadeLength=500,this.fadeTime=0,this.fadeStartDelay=3e3,this.fadingOut=!1,this.fadeStartTimer=null}completeSetup(){this.firstFadeStarted=!1,this.fadeLength=75,this.fadingOut=!1,this.opacity=1,this.onTimerComplete=this.onTimerComplete.bind(this),this.fadeAfterDelay&&this.willFade&&(this.fadeStartTimer&&(clearTimeout(this.fadeStartTimer),this.fadeStartTimer=null),this.fadeStartTimer=setTimeout(this.onTimerComplete,this.fadeStartDelay))}ngOnDestroy(){this.fadeStartTimer&&(clearTimeout(this.fadeStartTimer),this.fadeStartTimer=null)}update(e,s,i){if(!e)return;if(this.fadingOut?(this.fadeTime=this.fadeTime+i,this.opacity=(1-this.fadeTime/this.fadeLength)*this.maximumOpacity):this.opacity=this.maximumOpacity,this.opacity<=0)return void this.parent.removeView(this.componentRef,!1);const n=this.getOffset(e);this.stack._Str_22775(s.y-e.top);let r=this.stack._Str_25797();r<this.currentDeltaY-t.BUBBLE_DROP_SPEED&&(r=this.currentDeltaY-t.BUBBLE_DROP_SPEED);const a=s.y-r;this.currentDeltaY=r;let o=Math.round(s.x-this.activeViewElement.offsetWidth/2),c=Math.round(a+n)-5;c<=0&&(c=t.SPACE_AROUND_EDGES),c>=_.a.instance.height-this.activeViewElement.offsetHeight&&(c=_.a.instance.height-this.activeViewElement.offsetHeight-t.SPACE_AROUND_EDGES),o>=_.a.instance.width-this.activeViewElement.offsetWidth&&(o=_.a.instance.width-this.activeViewElement.offsetWidth-t.SPACE_AROUND_EDGES),o<0&&(o=0+t.BUBBLE_DROP_SPEED),this.activeViewElement.style.left=o+"px",this.activeViewElement.style.top=c+"px",this.activeViewElement.style.opacity=this.opacity.toString()}hide(t){this.activeView&&(!this.firstFadeStarted&&t?(this.firstFadeStarted=!0,this.fadeStartTimer&&(clearTimeout(this.fadeStartTimer),this.fadeStartTimer=null),this.fadeStartTimer=setTimeout(this.onTimerComplete,this.fadeStartDelay)):this.parent.removeView(this.componentRef,!1))}onTimerComplete(){this.fadingOut=!0,this.hide(!0)}getOffset(t){let e=-this.activeViewElement.offsetHeight;return e-=4,e}get maximumOpacity(){return 1}get activeViewElement(){return this.activeView&&this.activeView.nativeElement||null}}return t.LOCATION_STACK_SIZE=25,t.BUBBLE_DROP_SPEED=3,t.SPACE_AROUND_EDGES=5,t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.Tb({type:t}),t})();class hn extends cn{constructor(){super(...arguments),this.userId=-1,this.userName="",this.userType=-1,this.roomIndex=-1}static extendedSetup(t,e,s,i,n){t.userId=e,t.userName=s,t.userType=i,t.roomIndex=n,t.completeSetup()}getOffset(t){let e=-this.activeViewElement.offsetHeight;return this.userType===W.a.USER||this.userType===W.a.BOT||this.userType===W.a.RENTABLE_BOT?e+=t.height>50?25:0:e-=4,e}}let ln=(()=>{class t{transform(t,e=null,s=null){return e&&Array.isArray(e)&&s&&Array.isArray(s)&&e.length===s.length?_.a.instance.getLocalizationWithParameters(t,e,s):e&&s?_.a.instance.getLocalizationWithParameter(t,e,s):_.a.instance.getLocalization(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=i.Xb({name:"translate",type:t,pure:!0}),t})();const un=["activeView"];function _n(t,e){if(1&t){const t=i.ec();i.dc(0,"li",16),i.nc("click",function(){i.Kc(t);const e=i.qc(2).$implicit;return i.qc(3).processAction(e.name)}),i.Vc(1),i.rc(2,"translate"),i.cc()}if(2&t){const t=i.qc(2).$implicit,e=i.qc(3);i.Kb(1),i.Wc(i.uc(2,1,t.localization,"count",e.avatarData._Str_3577))}}function dn(t,e){if(1&t){const t=i.ec();i.dc(0,"li",16),i.nc("click",function(){i.Kc(t);const e=i.qc(2).$implicit;return i.qc(3).processAction(e.name)}),i.Vc(1),i.rc(2,"translate"),i.cc()}if(2&t){const t=i.qc(2).$implicit;i.Kb(1),i.Wc(i.sc(2,1,t.localization))}}function gn(t,e){if(1&t&&(i.bc(0,13),i.Tc(1,_n,3,5,"li",14),i.Tc(2,dn,3,3,"li",15),i.ac()),2&t){const t=i.qc().$implicit;i.xc("ngSwitch",t.name),i.Kb(1),i.xc("ngSwitchCase","respect")}}function mn(t,e){if(1&t&&(i.bc(0),i.Tc(1,gn,3,2,"ng-container",12),i.ac()),2&t){const t=e.$implicit;i.Kb(1),i.xc("ngIf",t.visible)}}function pn(t,e){if(1&t&&(i.dc(0,"ul",11),i.Tc(1,mn,2,1,"ng-container",5),i.cc()),2&t){const t=i.qc().$implicit;i.Kb(1),i.xc("ngForOf",t.items)}}function fn(t,e){if(1&t&&(i.bc(0),i.Tc(1,pn,2,1,"ul",10),i.ac()),2&t){const t=e.$implicit,s=i.qc();i.Kb(1),i.xc("ngIf",s.mode===t.mode)}}let En=(()=>{class t extends hn{constructor(t){super(),this._applicationRef=t,this.avatarData=null,this.mode=0,this.menu=[]}static setup(t,e,s,i,n,r){t.avatarData=r,hn.extendedSetup(t,e,s,i,n),t.setupButtons()}setupButtons(){let e=!1;const s=this.widget.handler,i=s.container.roomEngine.getRoomObject(s.roomSession.roomId,s.container.roomSession.ownRoomIndex,V.a.UNIT);if(i){const t=i.model.getValue(K.a.FIGURE_CARRY_OBJECT);t>0&&t<999999&&(e=!0)}this.menu=[{mode:t.MODE_NORMAL,items:[{name:"friend",localization:"infostand.button.friend",visible:this.avatarData.canBeAskedForAFriend},{name:"trade",localization:"infostand.button.trade",visible:!0},{name:"whisper",localization:"infostand.button.whisper",visible:!0},{name:"respect",localization:"infostand.button.respect",visible:this.avatarData._Str_3577>0},{name:"ignore",localization:"infostand.button.ignore",visible:!this.avatarData._Str_3655},{name:"unignore",localization:"infostand.button.unignore",visible:this.avatarData._Str_3655},{name:"report",localization:"infostand.button.report",visible:!0},{name:"moderate",localization:"infostand.link.moderate",visible:this.moderateMenuHasContent()},{name:"ambassador",localization:"infostand.link.ambassador",visible:this.ambassadorMenuHasContent()},{name:"pass_handitem",localization:"avatar.widget.pass_hand_item",visible:e}]},{mode:t.MODE_MODERATE,items:[{name:"kick",localization:"infostand.button.kick",visible:!0},{name:"mute",localization:"infostand.button.mute",visible:!0},{name:"ban",localization:"infostand.button.ban",visible:!0},{name:"give_rights",localization:"infostand.button.giverights",visible:this.isShowGiveRights()},{name:"remove_rights",localization:"infostand.button.removerights",visible:this.isShowRemoveRights()},{name:"back",localization:"generic.back",visible:!0}]},{mode:t.MODE_MODERATE_BAN,items:[{name:"ban_hour",localization:"infostand.button.ban_hour",visible:!0},{name:"ban_day",localization:"infostand.button.ban_day",visible:!0},{name:"ban_perm",localization:"infostand.button.ban_perm",visible:!0},{name:"back_moderate",localization:"generic.back",visible:!0}]},{mode:t.MODE_MODERATE_MUTE,items:[{name:"mute_2min",localization:"infostand.button.mute_2min",visible:!0},{name:"mute_5min",localization:"infostand.button.mute_5min",visible:!0},{name:"mute_10min",localization:"infostand.button.mute_10min",visible:!0},{name:"back_moderate",localization:"generic.back",visible:!0}]},{mode:t.MODE_AMBASSADOR,items:[{name:"ambassador_alert",localization:"infostand.button.alert",visible:!0},{name:"ambassador_kick",localization:"infostand.button.kick",visible:!0},{name:"ambassador_mute",localization:"infostand.button.mute",visible:!0},{name:"back",localization:"generic.back",visible:!0}]},{mode:t.MODE_AMBASSADOR_MUTE,items:[{name:"ambassador_mute_2min",localization:"infostand.button.mute_2min",visible:!0},{name:"ambassador_mute_10min",localization:"infostand.button.mute_10min",visible:!0},{name:"ambassador_mute_60min",localization:"infostand.button.mute_60min",visible:!0},{name:"ambassador_mute_18hr",localization:"infostand.button.mute_18hr",visible:!0},{name:"back_ambassador",localization:"generic.back",visible:!0}]}]}processAction(e){let s=null,i=null,n=!0;if(e){switch(e){case"moderate":n=!1,this.setMode(t.MODE_MODERATE);break;case"ban":n=!1,this.setMode(t.MODE_MODERATE_BAN);break;case"mute":n=!1,this.setMode(t.MODE_MODERATE_MUTE);break;case"ambassador":n=!1,this.setMode(t.MODE_AMBASSADOR);break;case"ambassador_mute":n=!1,this.setMode(t.MODE_AMBASSADOR_MUTE);break;case"back_moderate":n=!1,this.setMode(t.MODE_MODERATE);break;case"back_ambassador":n=!1,this.setMode(t.MODE_AMBASSADOR);break;case"back":n=!1,this.setMode(t.MODE_NORMAL);break;case"whisper":s=ut.RWUAM_WHISPER_USER;break;case"friend":this.avatarData.canBeAskedForAFriend=!1,s=ut.RWUAM_SEND_FRIEND_REQUEST;break;case"respect":this.avatarData._Str_3577--,s=ut.RWUAM_RESPECT_USER,this.avatarData._Str_3577>0&&(n=!1);break;case"ignore":this.avatarData._Str_3655=!0,s=ut.RWUAM_IGNORE_USER;break;case"unignore":this.avatarData._Str_3655=!1,s=ut.RWUAM_UNIGNORE_USER;break;case"kick":s=ut.RWUAM_KICK_USER;break;case"ban_hour":s=ut.RWUAM_BAN_USER_HOUR;break;case"ban_day":s=ut.RWUAM_BAN_USER_DAY;break;case"perm_ban":s=ut.RWUAM_BAN_USER_PERM;break;case"mute_2min":s=ut.MUTE_USER_2MIN;break;case"mute_5min":s=ut.MUTE_USER_5MIN;break;case"mute_10min":s=ut.MUTE_USER_10MIN;break;case"give_rights":this.avatarData.roomControllerLevel=H.a.GUEST,s=ut.RWUAM_GIVE_RIGHTS;break;case"remove_rights":this.avatarData.roomControllerLevel=H.a.NONE,s=ut.RWUAM_TAKE_RIGHTS;break;case"trade":s=ut.RWUAM_START_TRADING;break;case"report":s=ut.RWUAM_REPORT_CFH_OTHER;break;case"pass_handitem":s=ut.RWUAM_PASS_CARRY_ITEM;break;case"ambassador_alert":s=ut.RWUAM_AMBASSADOR_ALERT_USER;break;case"ambassador_kick":s=ut.RWUAM_AMBASSADOR_KICK_USER;break;case"ambassador_mute_2min":s=ut.AMBASSADOR_MUTE_USER_2MIN;break;case"ambassador_mute_10min":s=ut.AMBASSADOR_MUTE_USER_10MIN;break;case"ambassador_mute_60min":s=ut.AMBASSADOR_MUTE_USER_60MIN;break;case"ambassador_mute_18hour":s=ut.AMBASSADOR_MUTE_USER_18HOUR}s&&(i=new ut(s,this.userId)),i&&this.parent.messageListener.processWidgetMessage(i)}n&&this.parent.removeView(this.componentRef,!1)}setMode(t){t!==this.mode&&(this.mode=t)}ambassadorMenuHasContent(){return this.avatarData._Str_4050}moderateMenuHasContent(){return this.avatarData._Str_5990||this.avatarData._Str_6701||this.avatarData._Str_6394||this.isShowGiveRights()||this.isShowRemoveRights()}isShowGiveRights(){return this.avatarData._Str_3246&&this.avatarData._Str_5599<H.a.GUEST&&!this.avatarData._Str_3672}isShowRemoveRights(){return this.avatarData._Str_3246&&this.avatarData._Str_5599===H.a.GUEST&&!this.avatarData._Str_3672}get widget(){return this.parent}}return t.MODE_NORMAL=0,t.MODE_MODERATE=1,t.MODE_MODERATE_BAN=2,t.MODE_MODERATE_MUTE=3,t.MODE_AMBASSADOR=4,t.MODE_AMBASSADOR_MUTE=5,t.\u0275fac=function(e){return new(e||t)(i.Yb(i.g))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-avatarinfo-avatar-component"]],viewQuery:function(t,e){if(1&t&&i.bd(un,1),2&t){let t;i.Gc(t=i.oc())&&(e.activeView=t.first)}},features:[i.Hb],decls:11,vars:2,consts:[[1,"nitro-room-avatarinfo-avatar-component","context-menu"],["activeView",""],[1,"card","align-items-center",2,"min-width","110px"],[1,"d-flex","card-header","align-items-center","w-100"],[1,"card-body"],[4,"ngFor","ngForOf"],[1,"userinfobottom"],[1,"i","icon","okico"],[1,"bottomcenter"],[1,"card-pointer"],["class","list-group list-group-flush",4,"ngIf"],[1,"list-group","list-group-flush"],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],["class","list-group-item",3,"click",4,"ngSwitchCase"],["class","list-group-item",3,"click",4,"ngSwitchDefault"],[1,"list-group-item",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"div",0,1),i.dc(2,"div",2),i.dc(3,"div",3),i.Vc(4),i.cc(),i.dc(5,"div",4),i.Tc(6,fn,2,1,"ng-container",5),i.cc(),i.cc(),i.dc(7,"div",6),i.Zb(8,"i",7),i.cc(),i.dc(9,"div",8),i.Zb(10,"div",9),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Wc(e.userName),i.Kb(2),i.xc("ngForOf",e.menu))},directives:[p.m,p.n,p.p,p.q,p.r],pipes:[ln],encapsulation:2}),t})();const Sn=["activeView"];let vn=(()=>{class t extends hn{static setup(t,e,s,i,n){t.willFade=!1,hn.extendedSetup(t,e,s,i,n)}stopDecorating(){this.widget.isDecorating=!1}get widget(){return this.parent}get maximumOpacity(){return.8}}return t.\u0275fac=function(e){return bn(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-avatarinfo-decorate-component"]],viewQuery:function(t,e){if(1&t&&i.bd(Sn,1),2&t){let t;i.Gc(t=i.oc())&&(e.activeView=t.first)}},features:[i.Hb],decls:6,vars:3,consts:[[1,"roomactive-ub-card"],["activeView",""],[1,"raub-usernametxt",3,"click"],[1,"roomactive-ub-card-pointer"]],template:function(t,e){1&t&&(i.dc(0,"div",0,1),i.dc(2,"div",2),i.nc("click",function(){return e.stopDecorating()}),i.Vc(3),i.rc(4,"translate"),i.cc(),i.Zb(5,"div",3),i.cc()),2&t&&(i.Kb(3),i.Wc(i.sc(4,1,"widget.avatar.stop_decorating")))},pipes:[ln],encapsulation:2}),t})();const bn=i.fc(vn),In=["activeView"],Rn=function(){return["enter-room-friends"]};let Tn=(()=>{class t extends hn{constructor(){super(...arguments),this.isFriend=!1}static setup(t,e,s,i,n,r=!1){t.willFade=r,hn.extendedSetup(t,e,s,i,n)}}return t.\u0275fac=function(e){return On(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-avatarinfo-name-component"]],viewQuery:function(t,e){if(1&t&&i.bd(In,1),2&t){let t;i.Gc(t=i.oc())&&(e.activeView=t.first)}},features:[i.Hb],decls:5,vars:3,consts:[[1,"roomactive-ub-card",3,"ngClass"],["activeView",""],[1,"raub-usernametxt"],[1,"roomactive-ub-card-pointer"]],template:function(t,e){1&t&&(i.dc(0,"div",0,1),i.dc(2,"div",2),i.Vc(3),i.cc(),i.Zb(4,"div",3),i.cc()),2&t&&(i.xc("ngClass",e.isFriend&&i.Ac(2,Rn)),i.Kb(3),i.Wc(e.userName))},directives:[p.l],encapsulation:2}),t})();const On=i.fc(Tn);let yn=(()=>{class t{constructor(t){this._sanitizer=t}transform(t){return this._sanitizer.bypassSecurityTrustHtml(t)}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(n.b))},t.\u0275pipe=i.Xb({name:"keepHtml",type:t,pure:!1}),t})();const Cn=["activeView"];function An(t,e){if(1&t){const t=i.ec();i.dc(0,"li",14),i.nc("click",function(){i.Kc(t);const e=i.qc().$implicit;return i.qc(3).processAction(e.name)}),i.rc(1,"keepHtml"),i.rc(2,"translate"),i.cc()}if(2&t){const t=i.qc().$implicit;i.xc("innerHTML","11"===t.name||"12"===t.name||"13"===t.name||"14"===t.name||"15"===t.name?i.sc(1,1,t.localization):i.sc(2,3,t.localization),i.Lc)}}function Mn(t,e){if(1&t&&(i.bc(0),i.Tc(1,An,3,5,"li",13),i.ac()),2&t){const t=e.$implicit;i.Kb(1),i.xc("ngIf",t.visible)}}const wn=function(t){return{"columns-3":t}};function Dn(t,e){if(1&t&&(i.dc(0,"ul",12),i.Tc(1,Mn,2,1,"ng-container",5),i.cc()),2&t){const t=i.qc().$implicit;i.xc("ngClass",i.Bc(2,wn,4===t.mode)),i.Kb(1),i.xc("ngForOf",t.items)}}function Nn(t,e){if(1&t&&(i.bc(0),i.Tc(1,Dn,2,4,"ul",11),i.ac()),2&t){const t=e.$implicit,s=i.qc();i.Kb(1),i.xc("ngIf",s.mode===t.mode)}}function Un(t,e){if(1&t){const t=i.ec();i.dc(0,"ul",15),i.dc(1,"li",16),i.nc("click",function(){return i.Kc(t),i.qc().processAction("back")}),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()}2&t&&(i.Kb(2),i.Wc(i.sc(3,1,"generic.back")))}let xn=(()=>{class t extends hn{constructor(){super(...arguments),this.avatarData=null,this.mode=0,this.menu=[]}static setup(e,s,i,n,r,a){e.avatarData=a,e.widget.isDancing&&e.widget.hasClub&&(e.mode=t.MODE_CLUB_DANCES),hn.extendedSetup(e,s,i,n,r),e.setupButtons()}setupButtons(){const e=this.widget._Str_25831;this.menu=[{mode:t.MODE_NORMAL,items:[{name:"decorate",localization:"widget.avatar.decorate",visible:this.widget.hasClub&&this.avatarData.roomControllerLevel>=H.a.GUEST||this.avatarData._Str_3246},{name:"change_looks",localization:"widget.memenu.myclothes",visible:!0},{name:"dance_menu",localization:"widget.memenu.dance",visible:this.widget.hasClub&&!e},{name:"dance",localization:"widget.memenu.dance",visible:!this.widget.isDancing&&!this.widget.hasClub&&!e},{name:"dance_stop",localization:"widget.memenu.dance.stop",visible:this.widget.isDancing&&!this.widget.hasClub&&!e},{name:"expressions",localization:"infostand.link.expressions",visible:!0},{name:"signs",localization:"infostand.show.signs",visible:!0},{name:"drop_hand_item",localization:"avatar.widget.drop_hand_item",visible:this.avatarData._Str_8826>0&&this.avatarData._Str_8826<999999}]},{mode:t.MODE_CLUB_DANCES,items:[{name:"dance_stop",localization:"widget.memenu.dance.stop",visible:this.widget.isDancing},{name:"dance_1",localization:"widget.memenu.dance1",visible:!0},{name:"dance_2",localization:"widget.memenu.dance2",visible:!0},{name:"dance_3",localization:"widget.memenu.dance3",visible:!0},{name:"dance_4",localization:"widget.memenu.dance4",visible:!0},{name:"back",localization:"generic.back",visible:!0}]},{mode:t.MODE_EXPRESSIONS,items:[{name:"sit",localization:"widget.memenu.sit",visible:this.widget.getOwnPosture===tn.a.POSTURE_STAND},{name:"stand",localization:"widget.memenu.stand",visible:this.widget.getCanStandUp},{name:"wave",localization:"widget.memenu.wave",visible:!this.widget._Str_12708},{name:"laugh",localization:"widget.memenu.laugh",visible:!this.widget._Str_12708&&this.widget.hasVip},{name:"blow",localization:"widget.memenu.blow",visible:!this.widget._Str_12708&&this.widget.hasVip},{name:"idle",localization:"widget.memenu.idle",visible:!0},{name:"back",localization:"generic.back",visible:!0}]},{mode:t.MODE_SIGNS,items:[{name:"sign_1",localization:"1",visible:!0},{name:"sign_4",localization:"4",visible:!0},{name:"sign_7",localization:"7",visible:!0},{name:"sign_10",localization:"10",visible:!0},{name:"sign_0",localization:"0",visible:!0},{name:"sign_14",localization:'<i class="i icon futbol"></i>',visible:!0},{name:"sign_2",localization:"2",visible:!0},{name:"sign_5",localization:"5",visible:!0},{name:"sign_8",localization:"8",visible:!0},{name:"sign_11",localization:'<i class="i icon kalpico"></i>',visible:!0},{name:"sign_13",localization:'<i class="i icon unlemico"></i>',visible:!0},{name:"sign_17",localization:'<i class="i icon sarikartico"></i>',visible:!0},{name:"sign_3",localization:"3",visible:!0},{name:"sign_6",localization:"6",visible:!0},{name:"sign_9",localization:"9",visible:!0},{name:"sign_12",localization:'<i class="i icon kurukafaico"></i>',visible:!0},{name:"sign_15",localization:'<p class="gulucuk">:)</p>',visible:!0},{name:"sign_16",localization:'<i class="i icon kirmizikartico"></i>',visible:!0}]}]}processAction(e){let s=null,i=!0;if(e){if(e.startsWith("sign_")){const t=parseInt(e.split("_")[1]);this.widget.useSign(t)}else switch(e){case"decorate":this.widget.hasClub&&(this.widget.isDecorating=!0);break;case"change_looks":this.widget.openAvatarEditor();break;case"expressions":i=!1,this.setMode(t.MODE_EXPRESSIONS);break;case"sit":s=new ct(ct._Str_2016);break;case"stand":s=new ct(ct._Str_1553);break;case"wave":s=new ot(mt._Str_6268);break;case"blow":s=new ot(mt._Str_5579);break;case"laugh":s=new ot(mt._Str_7336);break;case"idle":s=new ot(mt._Str_6989);break;case"dance_menu":i=!1,this.setMode(t.MODE_CLUB_DANCES);break;case"dance":s=new ht(1);break;case"dance_stop":s=new ht(0);break;case"dance_1":case"dance_2":case"dance_3":case"dance_4":s=new ht(parseInt(e.charAt(e.length-1)));break;case"signs":i=!1,this.setMode(t.MODE_SIGNS);break;case"back":case"more":i=!1,this.setMode(t.MODE_NORMAL);break;case"drop_hand_item":s=new ut(ut.RWUAM_DROP_CARRY_ITEM,this.userId)}s&&this.parent.messageListener.processWidgetMessage(s)}i&&this.parent.removeView(this.componentRef,!1)}setMode(t){t!==this.mode&&(this.mode=t)}get widget(){return this.parent}}return t.MODE_NORMAL=0,t.MODE_CLUB_DANCES=1,t.MODE_NAME_CHANGE=2,t.MODE_EXPRESSIONS=3,t.MODE_SIGNS=4,t.MODE_CHANGE_LOOKS=5,t.\u0275fac=function(e){return Ln(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-avatarinfo-ownavatar-component"]],viewQuery:function(t,e){if(1&t&&i.bd(Cn,1),2&t){let t;i.Gc(t=i.oc())&&(e.activeView=t.first)}},features:[i.Hb],decls:12,vars:3,consts:[[1,"nitro-room-avatarinfo-ownavatar-component","context-menu"],["activeView",""],[1,"card","align-items-center",2,"min-width","110px"],[1,"d-flex","card-header","align-items-center","w-100"],[1,"card-body"],[4,"ngFor","ngForOf"],["class","list-group list-group-flush",4,"ngIf"],[1,"userinfobottom"],[1,"i","icon","okico"],[1,"bottomcenter"],[1,"card-pointer"],["class","list-group list-group-flush",3,"ngClass",4,"ngIf"],[1,"list-group","list-group-flush",3,"ngClass"],["class","list-group-item",3,"innerHTML","click",4,"ngIf"],[1,"list-group-item",3,"innerHTML","click"],[1,"list-group","list-group-flush"],[1,"list-group-item",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"div",0,1),i.dc(2,"div",2),i.dc(3,"div",3),i.Vc(4),i.cc(),i.dc(5,"div",4),i.Tc(6,Nn,2,1,"ng-container",5),i.Tc(7,Un,4,3,"ul",6),i.cc(),i.cc(),i.dc(8,"div",7),i.Zb(9,"i",8),i.cc(),i.dc(10,"div",9),i.Zb(11,"div",10),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Wc(e.userName),i.Kb(2),i.xc("ngForOf",e.menu),i.Kb(1),i.xc("ngIf",4===e.mode))},directives:[p.m,p.n,p.l],pipes:[yn,ln],encapsulation:2}),t})();const Ln=i.fc(xn),Pn=["activeView"];function Fn(t,e){if(1&t){const t=i.ec();i.dc(0,"li",16),i.nc("click",function(){i.Kc(t);const e=i.qc(2).$implicit;return i.qc(3).processAction(e.name)}),i.Vc(1),i.rc(2,"translate"),i.cc()}if(2&t){const t=i.qc(2).$implicit,e=i.qc(3);i.Kb(1),i.Wc(i.uc(2,1,t.localization,"count",e.avatarData._Str_3577))}}function kn(t,e){if(1&t){const t=i.ec();i.dc(0,"li",16),i.nc("click",function(){i.Kc(t);const e=i.qc(2).$implicit;return i.qc(3).processAction(e.name)}),i.Vc(1),i.rc(2,"translate"),i.cc()}if(2&t){const t=i.qc(2).$implicit;i.Kb(1),i.Wc(i.sc(2,1,t.localization))}}function Vn(t,e){if(1&t&&(i.bc(0,13),i.Tc(1,Fn,3,5,"li",14),i.Tc(2,kn,3,3,"li",15),i.ac()),2&t){const t=i.qc().$implicit;i.xc("ngSwitch",t.name),i.Kb(1),i.xc("ngSwitchCase","respect")}}function Bn(t,e){if(1&t&&(i.bc(0),i.Tc(1,Vn,3,2,"ng-container",12),i.ac()),2&t){const t=e.$implicit;i.Kb(1),i.xc("ngIf",t.visible)}}const Wn=function(t){return{"columns-3":t}};function Kn(t,e){if(1&t&&(i.dc(0,"ul",11),i.Tc(1,Bn,2,1,"ng-container",5),i.cc()),2&t){const t=i.qc().$implicit;i.xc("ngClass",i.Bc(2,Wn,4===t.mode)),i.Kb(1),i.xc("ngForOf",t.items)}}function Gn(t,e){if(1&t&&(i.bc(0),i.Tc(1,Kn,2,4,"ul",10),i.ac()),2&t){const t=e.$implicit,s=i.qc();i.Kb(1),i.xc("ngIf",s.mode===t.mode)}}let Hn=(()=>{class t extends hn{constructor(t){super(),this._applicationRef=t,this.avatarData=null,this.mode=0,this.menu=[]}static setup(t,e,s,i,n,r){t.avatarData=r,hn.extendedSetup(t,e,s,i,n),t.setupButtons()}setupButtons(){let e=!1;const s=this.widget.handler,i=s.container.roomEngine.getRoomObject(s.roomSession.roomId,s.container.roomSession.ownRoomIndex,V.a.UNIT);if(i){const t=i.model.getValue(K.a.FIGURE_CARRY_OBJECT);t>0&&t<999999&&(e=!0)}this.menu=[{mode:t.MODE_NORMAL,items:[{name:"test",localization:"infostand.button.test",visible:!0}]}]}processAction(t){let e=!0;if(t)switch(t){case"moderate":e=!1}e&&this.parent.removeView(this.componentRef,!1)}get widget(){return this.parent}}return t.MODE_NORMAL=0,t.\u0275fac=function(e){return new(e||t)(i.Yb(i.g))},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&i.bd(Pn,1),2&t){let t;i.Gc(t=i.oc())&&(e.activeView=t.first)}},features:[i.Hb],decls:11,vars:2,consts:[[1,"nitro-room-avatarinfo-ownavatar-component","context-menu"],["activeView",""],[1,"card","align-items-center",2,"min-width","110px"],[1,"d-flex","card-header","align-items-center","w-100"],[1,"card-body"],[4,"ngFor","ngForOf"],[1,"userinfobottom"],[1,"i","icon","okico"],[1,"bottomcenter"],[1,"card-pointer",2,"margin-top","-2px"],["class","list-group list-group-flush",3,"ngClass",4,"ngIf"],[1,"list-group","list-group-flush",3,"ngClass"],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],["class","list-group-item",3,"click",4,"ngSwitchCase"],["class","list-group-item",3,"click",4,"ngSwitchDefault"],[1,"list-group-item",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"div",0,1),i.dc(2,"div",2),i.dc(3,"div",3),i.Vc(4),i.cc(),i.dc(5,"div",4),i.Tc(6,Gn,2,1,"ng-container",5),i.cc(),i.cc(),i.dc(7,"div",6),i.Zb(8,"i",7),i.cc(),i.dc(9,"div",8),i.Zb(10,"div",9),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Wc(e.userName),i.Kb(2),i.xc("ngForOf",e.menu))},directives:[p.m,p.n,p.l,p.p,p.q,p.r],pipes:[ln],encapsulation:2}),t})();const jn=["activeView"];function zn(t,e){if(1&t){const t=i.ec();i.dc(0,"li",16),i.nc("click",function(){i.Kc(t);const e=i.qc(2).$implicit;return i.qc(3).processAction(e.name)}),i.Vc(1),i.rc(2,"translate"),i.cc()}if(2&t){const t=i.qc(2).$implicit,e=i.qc(3);i.Kb(1),i.Wc(i.uc(2,1,t.localization,"count",e.avatarData._Str_3577))}}function Yn(t,e){if(1&t){const t=i.ec();i.dc(0,"li",16),i.nc("click",function(){i.Kc(t);const e=i.qc(2).$implicit;return i.qc(3).processAction(e.name)}),i.Vc(1),i.rc(2,"translate"),i.cc()}if(2&t){const t=i.qc(2).$implicit;i.Kb(1),i.Wc(i.sc(2,1,t.localization))}}function qn(t,e){if(1&t&&(i.bc(0,13),i.Tc(1,zn,3,5,"li",14),i.Tc(2,Yn,3,3,"li",15),i.ac()),2&t){const t=i.qc().$implicit;i.xc("ngSwitch",t.name),i.Kb(1),i.xc("ngSwitchCase","respect")}}function Zn(t,e){if(1&t&&(i.bc(0),i.Tc(1,qn,3,2,"ng-container",12),i.ac()),2&t){const t=e.$implicit;i.Kb(1),i.xc("ngIf",t.visible)}}const Xn=function(t){return{"columns-3":t}};function Qn(t,e){if(1&t&&(i.dc(0,"ul",11),i.Tc(1,Zn,2,1,"ng-container",5),i.cc()),2&t){const t=i.qc().$implicit;i.xc("ngClass",i.Bc(2,Xn,4===t.mode)),i.Kb(1),i.xc("ngForOf",t.items)}}function Jn(t,e){if(1&t&&(i.bc(0),i.Tc(1,Qn,2,4,"ul",10),i.ac()),2&t){const t=e.$implicit,s=i.qc();i.Kb(1),i.xc("ngIf",s.mode===t.mode)}}let $n=(()=>{class t extends hn{constructor(t){super(),this._applicationRef=t,this.avatarData=null,this.mode=0,this.menu=[]}static setup(t,e,s,i,n,r){t.avatarData=r,hn.extendedSetup(t,e,s,i,n),t.setupButtons()}setupButtons(){let e=!1;const s=this.widget.handler,i=s.container.roomEngine.getRoomObject(s.roomSession.roomId,s.container.roomSession.ownRoomIndex,V.a.UNIT);if(i){const t=i.model.getValue(K.a.FIGURE_CARRY_OBJECT);t>0&&t<999999&&(e=!0)}this.menu=[{mode:t.MODE_NORMAL,items:[{name:"test",localization:"infostand.button.test",visible:!0}]}]}processAction(t){let e=!0;if(t)switch(t){case"moderate":e=!1}e&&this.parent.removeView(this.componentRef,!1)}get widget(){return this.parent}}return t.MODE_NORMAL=0,t.\u0275fac=function(e){return new(e||t)(i.Yb(i.g))},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&i.bd(jn,1),2&t){let t;i.Gc(t=i.oc())&&(e.activeView=t.first)}},features:[i.Hb],decls:11,vars:2,consts:[[1,"nitro-room-avatarinfo-ownavatar-component","context-menu"],["activeView",""],[1,"card","align-items-center",2,"min-width","110px"],[1,"d-flex","card-header","align-items-center","w-100"],[1,"card-body"],[4,"ngFor","ngForOf"],[1,"userinfobottom"],[1,"i","icon","okico"],[1,"bottomcenter"],[1,"card-pointer",2,"margin-top","-2px"],["class","list-group list-group-flush",3,"ngClass",4,"ngIf"],[1,"list-group","list-group-flush",3,"ngClass"],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],["class","list-group-item",3,"click",4,"ngSwitchCase"],["class","list-group-item",3,"click",4,"ngSwitchDefault"],[1,"list-group-item",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"div",0,1),i.dc(2,"div",2),i.dc(3,"div",3),i.Vc(4),i.cc(),i.dc(5,"div",4),i.Tc(6,Jn,2,1,"ng-container",5),i.cc(),i.cc(),i.dc(7,"div",6),i.Zb(8,"i",7),i.cc(),i.dc(9,"div",8),i.Zb(10,"div",9),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Wc(e.userName),i.Kb(2),i.xc("ngForOf",e.menu))},directives:[p.m,p.n,p.l,p.p,p.q,p.r],pipes:[ln],encapsulation:2}),t})();var tr=s("pIFH"),er=s("lsmK"),sr=s("V2Y4"),ir=s("YQxP");let nr=(()=>{class t{}return t._Str_19584=0,t.DRESS_UP=1,t.SETUP_CHAT=2,t.RANDOM_WALK=3,t.DANCE=4,t.CHANGE_BOT_NAME=5,t._Str_20280=6,t._Str_18934=7,t._Str_14917=8,t.CHANGE_BOT_MOTTO=9,t.NUX_TAKE_TOUR=10,t._Str_17261=12,t._Str_18173=14,t.DONATE_TO_USER=24,t.DONATE_TO_ALL=25,t})();var rr=s("3Pt+");const ar=["activeView"];function or(t,e){if(1&t){const t=i.ec();i.dc(0,"li",16),i.nc("click",function(){i.Kc(t);const e=i.qc(2).$implicit;return i.qc(3).processAction(e.name)}),i.Vc(1),i.rc(2,"translate"),i.cc()}if(2&t){const t=i.qc(2).$implicit,e=i.qc(3);i.Kb(1),i.Wc(i.uc(2,1,t.localization,"count",e.avatarData._Str_3577))}}function cr(t,e){if(1&t){const t=i.ec();i.dc(0,"li",16),i.nc("click",function(){i.Kc(t);const e=i.qc(2).$implicit;return i.qc(3).processAction(e.name)}),i.Vc(1),i.rc(2,"translate"),i.cc()}if(2&t){const t=i.qc(2).$implicit;i.Kb(1),i.Wc(i.sc(2,1,t.localization))}}function hr(t,e){if(1&t&&(i.bc(0,5),i.Tc(1,or,3,5,"li",14),i.Tc(2,cr,3,3,"li",15),i.ac()),2&t){const t=i.qc().$implicit;i.xc("ngSwitch",t.name),i.Kb(1),i.xc("ngSwitchCase","respect")}}function lr(t,e){if(1&t&&(i.bc(0),i.Tc(1,hr,3,2,"ng-container",13),i.ac()),2&t){const t=e.$implicit;i.Kb(1),i.xc("ngIf",t.visible)}}function ur(t,e){if(1&t&&(i.bc(0),i.dc(1,"ul",12),i.Tc(2,lr,2,1,"ng-container",11),i.cc(),i.ac()),2&t){const t=e.$implicit;i.Kb(2),i.xc("ngForOf",t.items)}}function _r(t,e){if(1&t&&(i.bc(0),i.Tc(1,ur,3,1,"ng-container",11),i.ac()),2&t){const t=i.qc();i.Kb(1),i.xc("ngForOf",t.menu)}}function dr(t,e){if(1&t){const t=i.ec();i.bc(0),i.dc(1,"div",17),i.dc(2,"div",18),i.dc(3,"p",19),i.Vc(4,"Give a name:"),i.cc(),i.dc(5,"input",20),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().newName=e}),i.cc(),i.dc(6,"div",21),i.dc(7,"button",22),i.nc("click",function(){return i.Kc(t),i.qc().processAction("")}),i.Vc(8),i.rc(9,"translate"),i.cc(),i.dc(10,"button",23),i.nc("click",function(){return i.Kc(t),i.qc().processAction("save_bot_name")}),i.Vc(11),i.rc(12,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.ac()}if(2&t){const t=i.qc();i.Kb(5),i.xc("ngModel",t.newName),i.Kb(3),i.Wc(i.sc(9,3,"cancel")),i.Kb(3),i.Wc(i.sc(12,5,"save"))}}function gr(t,e){if(1&t){const t=i.ec();i.bc(0),i.dc(1,"div",17),i.dc(2,"div",24),i.dc(3,"p",19),i.Vc(4,"Give a new motto:"),i.cc(),i.dc(5,"textarea",25),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().newMotto=e}),i.cc(),i.dc(6,"div",26),i.dc(7,"button",22),i.nc("click",function(){return i.Kc(t),i.qc().processAction("")}),i.Vc(8),i.rc(9,"translate"),i.cc(),i.dc(10,"button",23),i.nc("click",function(){return i.Kc(t),i.qc().processAction("save_bot_motto")}),i.Vc(11),i.rc(12,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.ac()}if(2&t){const t=i.qc();i.Kb(5),i.xc("ngModel",t.newMotto),i.Kb(3),i.Wc(i.sc(9,3,"cancel")),i.Kb(3),i.Wc(i.sc(12,5,"save"))}}function mr(t,e){if(1&t){const t=i.ec();i.bc(0),i.dc(1,"div",17),i.dc(2,"div",24),i.dc(3,"p",19),i.Vc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"textarea",27),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().newText=e}),i.rc(7,"translate"),i.cc(),i.dc(8,"div",28),i.dc(9,"div",29),i.dc(10,"p",30),i.Vc(11),i.rc(12,"translate"),i.cc(),i.dc(13,"input",31),i.nc("click",function(){i.Kc(t);const e=i.qc();return e.automaticChat=!e.automaticChat}),i.cc(),i.cc(),i.dc(14,"div",29),i.dc(15,"p",30),i.Vc(16),i.rc(17,"translate"),i.cc(),i.dc(18,"input",31),i.nc("click",function(){i.Kc(t);const e=i.qc();return e.mixSentences=!e.mixSentences}),i.cc(),i.cc(),i.dc(19,"div",29),i.dc(20,"p",30),i.Vc(21),i.rc(22,"translate"),i.cc(),i.dc(23,"input",32),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().chatDelay=e}),i.cc(),i.cc(),i.cc(),i.dc(24,"div",26),i.dc(25,"button",22),i.nc("click",function(){return i.Kc(t),i.qc().processAction("")}),i.Vc(26),i.rc(27,"translate"),i.cc(),i.dc(28,"button",23),i.nc("click",function(){return i.Kc(t),i.qc().processAction("save_bot_motto")}),i.Vc(29),i.rc(30,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.ac()}if(2&t){const t=i.qc();i.Kb(4),i.Wc(i.sc(5,11,"bot.skill.chatter.configuration.chat.text")),i.Kb(2),i.xc("placeholder",i.sc(7,13,"bot.skill.chatter.configuration.text.placeholder"))("ngModel",t.newText),i.Kb(5),i.Wc(i.sc(12,15,"bot.skill.chatter.configuration.automatic.chat")),i.Kb(2),i.xc("checked",t.automaticChat),i.Kb(3),i.Wc(i.sc(17,17,"bot.skill.chatter.configuration.markov")),i.Kb(2),i.xc("checked",t.mixSentences),i.Kb(3),i.Wc(i.sc(22,19,"bot.skill.chatter.configuration.chat.delay")),i.Kb(2),i.xc("ngModel",t.chatDelay),i.Kb(3),i.Wc(i.sc(27,21,"cancel")),i.Kb(3),i.Wc(i.sc(30,23,"save"))}}let pr=(()=>{class t extends hn{constructor(t){super(),this._ngZone=t,this._messageListener=null,this.avatarData=null,this.mode=0,this.menu=[],this.newName="",this.newMotto="",this.newText="",this.automaticChat=!1,this.mixSentences=!1,this.chatDelay=5}static setup(t,e,s,i,n,r){t.avatarData=r,hn.extendedSetup(t,e,s,i,n),t.setupButtons()}ngOnDestroy(){this._messageListener&&(_.a.instance.communication.connection.removeMessageEvent(this._messageListener),this._messageListener=null)}requestBotCommandConfiguration(t){this._messageListener||(this._messageListener=new tr.a(this.onBotCommandConfigurationEvent.bind(this)),_.a.instance.communication.connection.addMessageEvent(this._messageListener)),_.a.instance.communication.connection.send(new er.a(this.userId,t))}onBotCommandConfigurationEvent(t){if(!t)return;const e=t.getParser();e&&e.botId===this.userId&&this._ngZone.run(()=>{switch(e.commandId){case nr.CHANGE_BOT_NAME:return void(this.newName=e.data);case nr.CHANGE_BOT_MOTTO:return void(this.newMotto=e.data);case nr.SETUP_CHAT:{const t=e.data,s=t.split(-1===t.indexOf(";#;")?";":";#;");return void(3!==s.length&&4!==s.length||(this.newText=s[0],this.automaticChat="true"===s[1].toLowerCase()||"1"===s[1],this.chatDelay=parseInt(s[2]),this.mixSentences=!!s[3]&&("true"===s[3].toLowerCase()||"1"===s[3])))}}})}setupButtons(){const e=this.avatarData._Str_3246||this.avatarData._Str_3529;this.menu=[{mode:t.MODE_NORMAL,items:[{name:"donate_to_all",localization:"avatar.widget.donate_to_all",visible:this.avatarData._Str_2899.indexOf(nr.DONATE_TO_ALL)>=0&&e},{name:"donate_to_user",localization:"avatar.widget.donate_to_user",visible:this.avatarData._Str_2899.indexOf(nr.DONATE_TO_USER)>=0&&e},{name:"change_bot_name",localization:"avatar.widget.change_bot_name",visible:this.avatarData._Str_2899.indexOf(nr.CHANGE_BOT_NAME)>=0&&e},{name:"change_bot_motto",localization:"avatar.widget.change_bot_motto",visible:this.avatarData._Str_2899.indexOf(nr.CHANGE_BOT_MOTTO)>=0&&e},{name:"dress_up",localization:"avatar.widget.dress_up",visible:this.avatarData._Str_2899.indexOf(nr.DRESS_UP)>=0&&e},{name:"random_walk",localization:"avatar.widget.random_walk",visible:this.avatarData._Str_2899.indexOf(nr.RANDOM_WALK)>=0&&e},{name:"setup_chat",localization:"avatar.widget.setup_chat",visible:this.avatarData._Str_2899.indexOf(nr.SETUP_CHAT)>=0&&e},{name:"dance",localization:"avatar.widget.dance",visible:this.avatarData._Str_2899.indexOf(nr.DANCE)>=0&&e},{name:"pick",localization:"avatar.widget.pick_up",visible:-1===this.avatarData._Str_2899.indexOf(nr._Str_17261)&&e}]}]}processAction(e){let s=!0;if(e)switch(e){case"donate_to_all":this.widget.handler.container.connection.send(new ir.a(this.avatarData.id,nr.DONATE_TO_ALL,""));break;case"donate_to_user":this.widget.handler.container.connection.send(new ir.a(this.avatarData.id,nr.DONATE_TO_USER,""));break;case"change_bot_name":this.requestBotCommandConfiguration(nr.CHANGE_BOT_NAME),s=!1,this.setMode(t.MODE_CHANGE_NAME);break;case"save_bot_name":this.widget.handler.container.connection.send(new ir.a(this.avatarData.id,nr.CHANGE_BOT_NAME,this.newName));break;case"change_bot_motto":this.requestBotCommandConfiguration(nr.CHANGE_BOT_MOTTO),s=!1,this.setMode(t.MODE_CHANGE_MOTTO);break;case"save_bot_motto":this.widget.handler.container.connection.send(new ir.a(this.avatarData.id,nr.CHANGE_BOT_MOTTO,this.newMotto));break;case"dress_up":this.widget.handler.container.connection.send(new ir.a(this.avatarData.id,nr.DRESS_UP,""));break;case"random_walk":this.widget.handler.container.connection.send(new ir.a(this.avatarData.id,nr.RANDOM_WALK,""));break;case"setup_chat":this.requestBotCommandConfiguration(nr.SETUP_CHAT),s=!1,this.setMode(t.MODE_CHANGE_SPEECH);break;case"dance":this.widget.handler.container.connection.send(new ir.a(this.avatarData.id,nr.DANCE,""));break;case"nux_take_tour":_.a.instance.createLinkEvent("help/tour"),this.widget.handler.container.connection.send(new ir.a(this.avatarData.id,nr.NUX_TAKE_TOUR,""));break;case"pick":this.widget.handler.container.connection.send(new sr.a(this.avatarData.id))}s&&this.parent.removeView(this.componentRef,!1)}setMode(t){t!==this.mode&&(this.mode=t)}get widget(){return this.parent}}return t.MODE_NORMAL=0,t.MODE_CHANGE_NAME=1,t.MODE_CHANGE_MOTTO=2,t.MODE_CHANGE_SPEECH=3,t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&i.bd(ar,1),2&t){let t;i.Gc(t=i.oc())&&(e.activeView=t.first)}},features:[i.Hb],decls:15,vars:6,consts:[[1,"nitro-room-avatarinfo-ownavatar-component","context-menu"],["activeView",""],[1,"card","align-items-center",2,"min-width","110px"],[1,"d-flex","card-header","align-items-center","w-100"],[1,"card-body"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"userinfobottom"],[1,"i","icon","okico"],[1,"bottomcenter"],[1,"card-pointer"],[4,"ngFor","ngForOf"],[1,"list-group","list-group-flush"],[3,"ngSwitch",4,"ngIf"],["class","list-group-item",3,"click",4,"ngSwitchCase"],["class","list-group-item",3,"click",4,"ngSwitchDefault"],[1,"list-group-item",3,"click"],[1,"bot-control-panel"],[1,"bot-rename"],[1,"botrename-txt"],["type","text",1,"giveaname",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-between","align-items-center","botcontrolpanel-button"],["type","button",1,"botcontrol-red",3,"click"],["type","button",1,"botcontrol-onay",3,"click"],[1,"bot-remotto"],["type","text",1,"giveamotto",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-between","align-items-center","botcontrolpanel-button",2,"margin","-2px 0px 0px 0px"],["type","text",1,"botmessage",3,"placeholder","ngModel","ngModelChange"],[1,"botcontrolbox"],[1,"botcontrol-info1"],[1,"bcinfo1-text"],["type","checkbox",2,"position","absolute","right","5px","margin-top","1px",3,"checked","click"],["type","text",1,"chatterdelay",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"div",0,1),i.dc(2,"div",2),i.dc(3,"div",3),i.Vc(4),i.cc(),i.dc(5,"div",4),i.bc(6,5),i.Tc(7,_r,2,1,"ng-container",6),i.Tc(8,dr,13,7,"ng-container",6),i.Tc(9,gr,13,7,"ng-container",6),i.Tc(10,mr,31,25,"ng-container",6),i.ac(),i.cc(),i.cc(),i.dc(11,"div",7),i.Zb(12,"i",8),i.cc(),i.dc(13,"div",9),i.Zb(14,"div",10),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Wc(e.userName),i.Kb(2),i.xc("ngSwitch",e.mode),i.Kb(1),i.xc("ngSwitchCase",0),i.Kb(1),i.xc("ngSwitchCase",1),i.Kb(1),i.xc("ngSwitchCase",2),i.Kb(1),i.xc("ngSwitchCase",3))},directives:[p.p,p.q,p.m,p.n,p.r,rr.b,rr.l,rr.n],pipes:[ln],encapsulation:2}),t})();var fr=s("GJWb"),Er=s("+lr5"),Sr=s("w9Dd");let vr=(()=>{class t{constructor(t,e,s){this._notificationService=t,this._settingsService=e,this._ngZone=s,this._component=null,this._wardrobeComponent=null,this._messages=[],this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new fr.a(this.onUserWardrobePageEvent.bind(this))];for(const t of this._messages)_.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)_.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onUserWardrobePageEvent(t){if(!this._wardrobeComponent)return;if(!t)return;const e=t.getParser();e&&e.looks.forEach((t,e)=>{this._ngZone.run(()=>{this._wardrobeComponent.setLook(e,t[0],t[1])})})}loadOwnAvatarInEditor(){if(!this._component)return;const t=_.a.instance.sessionDataManager;this._component.loadAvatarInEditor(t.figure,t.gender,t.clubLevel)}loadAvatarInEditor(t,e){this._component&&this._component.loadAvatarInEditor(t,e,_.a.instance.sessionDataManager.clubLevel)}requestWardrobePage(t){_.a.instance.communication.connection.send(new Er.a(t))}setWardrobeSlot(t){_.a.instance.communication.connection.send(new Sr.a(t,this.currentEditorLook,this.currentEditorGender))}get component(){return this._component}set component(t){this._component=t}set wardrobeComponent(t){this._wardrobeComponent=t}get currentEditorLook(){return this._component.figureData.view.figureString}get currentEditorGender(){return this._component.figureData.gender}}return t.\u0275fac=function(e){return new(e||t)(i.kc(ss),i.kc(m),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();const br=["contextsContainer"];function Ir(t,e){}let Rr=(()=>{class t extends en{constructor(t,e,s,i,n){super(),this._avatarEditorService=t,this._settingsService=e,this._friendListService=s,this._componentFactoryResolver=i,this._ngZone=n,this.view=null,this.cachedNameView=null,this.cachedOwnAvatarMenuView=null,this.cachedAvatarMenuView=null,this.cachedDecorateModeView=null,this.cachedRentableBotMenuView=null,this.cachedPetMenuView=null,this.cachedOwnPetMenuView=null,this.cachedNameBubbles=new Map,this.lastRollOverId=-1,this.userInfoData=new nn,this.petInfoData=new rn,this.rentableBotInfoData=new an,this.isDancing=!1,this.handlePetInfo=!0,this._isInitialized=!1,this._isRoomEnteredOwnAvatarHighlight=!1,this._isGameMode=!1,this._isUpdating=!1,this._Str_2557=this._Str_2557.bind(this),this.onRoomEngineObjectEvent=this.onRoomEngineObjectEvent.bind(this)}ngOnDestroy(){_.a.instance.ticker.remove(this.update,this)}registerUpdateEvents(t){t&&(_.a.instance.roomEngine.events.addEventListener(v.a.ADDED,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.addEventListener(v.a.REMOVED,this.onRoomEngineObjectEvent),t.addEventListener(nt.RWAIE_AVATAR_INFO,this._Str_2557),t.addEventListener(Le.RWONE_TYPE,this._Str_2557),t.addEventListener(Be.OWN_USER,this._Str_2557),t.addEventListener(Be.PEER,this._Str_2557),t.addEventListener(rt.RWUDUE_USER_DATA_UPDATED,this._Str_2557),t.addEventListener($.USER_REMOVED,this._Str_2557),t.addEventListener(Fe.FURNI,this._Str_2557),t.addEventListener(Be.BOT,this._Str_2557),t.addEventListener(Ve.RENTABLE_BOT,this._Str_2557),t.addEventListener(ke.PET_INFO,this._Str_2557),t.addEventListener($.OBJECT_SELECTED,this._Str_2557),t.addEventListener($.OBJECT_DESELECTED,this._Str_2557),t.addEventListener($.OBJECT_ROLL_OVER,this._Str_2557),t.addEventListener($.OBJECT_ROLL_OUT,this._Str_2557),t.addEventListener(J.RWREUE_NORMAL_MODE,this._Str_2557),t.addEventListener(J.RWREUE_GAME_MODE,this._Str_2557),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(_.a.instance.roomEngine.events.removeEventListener(v.a.ADDED,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.removeEventListener(v.a.REMOVED,this.onRoomEngineObjectEvent),t.removeEventListener(nt.RWAIE_AVATAR_INFO,this._Str_2557),t.removeEventListener(Le.RWONE_TYPE,this._Str_2557),t.removeEventListener(Be.OWN_USER,this._Str_2557),t.removeEventListener(Be.PEER,this._Str_2557),t.removeEventListener(rt.RWUDUE_USER_DATA_UPDATED,this._Str_2557),t.removeEventListener($.USER_REMOVED,this._Str_2557),t.removeEventListener(Fe.FURNI,this._Str_2557),t.removeEventListener(Be.BOT,this._Str_2557),t.removeEventListener(Ve.RENTABLE_BOT,this._Str_2557),t.removeEventListener(ke.PET_INFO,this._Str_2557),t.removeEventListener($.OBJECT_SELECTED,this._Str_2557),t.removeEventListener($.OBJECT_DESELECTED,this._Str_2557),t.removeEventListener($.OBJECT_ROLL_OVER,this._Str_2557),t.removeEventListener($.OBJECT_ROLL_OUT,this._Str_2557),t.removeEventListener(J.RWREUE_NORMAL_MODE,this._Str_2557),t.removeEventListener(J.RWREUE_GAME_MODE,this._Str_2557),super.unregisterUpdateEvents(t))}onRoomEngineObjectEvent(t){switch(t.type){case v.a.ADDED:{if(t.category!==V.a.UNIT)return;const e=this.handler.roomSession.userDataManager.getUserDataByIndex(t.objectId);if(!e)return;if(-1==this._friendListService.getFriendNames().indexOf(e.name))return;return void this.showFriendNameBubble(e,t.objectId)}case v.a.REMOVED:if(t.category===V.a.UNIT)for(const e of this.cachedNameBubbles.values())e.instance.roomIndex===t.objectId&&this.removeView(e,!1);return}}showFriendNameBubble(t,e){if(!t)return;if(this.cachedNameBubbles.has(t.name))return;const s=this.createView(Tn);s.instance.isFriend=!0,this._ngZone.run(()=>Tn.setup(s.instance,t.webID,t.name,W.a.USER,e,!0)),this.cachedNameBubbles.set(t.name,s),this.toggleUpdateReceiver()}_Str_2557(t){const e=this.view&&this.view.instance||null;switch(t.type){case nt.RWAIE_AVATAR_INFO:{const e=t;this._isRoomEnteredOwnAvatarHighlight=!this._isInitialized&&this.handler.container.roomSession&&e._Str_2707===this.handler.container.roomSession.ownRoomIndex,this._Str_12674(e.userId,e.userName,e._Str_2908,e._Str_2707,e._Str_4330,null),this._isInitialized=!0;break}case Le.RWONE_TYPE:{const e=t;e.category===V.a.UNIT&&this._Str_12674(e.userId,e.userName,e.userType,e.roomIndex,!1,null);break}case Be.OWN_USER:case Be.PEER:{const e=t;this.userInfoData.populate(e),this._Str_12674(e.webID,e.name,e.userType,e.roomIndex,!1,e.isSpectator?null:this.userInfoData);break}case ke.PET_INFO:if(this.handlePetInfo){const e=t;this.petInfoData.populate(e),this._Str_24751(e.id,e.name,e._Str_2707,this.petInfoData)}break;case Ve.RENTABLE_BOT:{const e=t;this.rentableBotInfoData||(this.rentableBotInfoData=new an),this.rentableBotInfoData.populate(e);const s=this.handler.container.roomSessionManager.getSession(0);if(!s)return;const i=s.userDataManager.getRentableBotData(e.id);if(!i)return;this.rentableBotInfoData&&i.botSkills&&this.rentableBotInfoData._Str_19891(i.botSkills),this._Str_16991(e.id,e.name,e.roomIndex,this.rentableBotInfoData);break}case rt.RWUDUE_USER_DATA_UPDATED:this._isInitialized||this._Str_25716();break;case $.USER_REMOVED:{const s=t;e&&e.roomIndex===s.id&&this.removeView(this.view,!1);for(const t of this.cachedNameBubbles.values())if(t.instance.roomIndex==s.id){this.removeView(t,!1);break}break}case Fe.FURNI:this.view&&this.removeView(this.view,!1);break;case $.OBJECT_SELECTED:t.category===V.a.UNIT&&(this.handlePetInfo=!0);break;case $.OBJECT_DESELECTED:this.view&&this.removeView(this.view,!1);break;case $.OBJECT_ROLL_OVER:{if(this._isRoomEnteredOwnAvatarHighlight)return;const s=t;e&&(e instanceof En||e instanceof xn||e instanceof pr||e instanceof Hn)||(this.lastRollOverId=s.id,this.messageListener.processWidgetMessage(new lt(lt.GET_OBJECT_NAME,s.id,s.category)));break}case $.OBJECT_ROLL_OUT:{if(this._isRoomEnteredOwnAvatarHighlight)return;const s=t;e&&(e instanceof En||e instanceof xn||e instanceof pr||e instanceof Hn)||s.id===this.lastRollOverId&&(this.removeView(this.view,!1),this.lastRollOverId=-1);break}case J.RWREUE_NORMAL_MODE:this._isGameMode=!1;break;case J.RWREUE_GAME_MODE:this._isGameMode=!0}this.toggleUpdateReceiver()}_Str_12674(t,e,s,i,n,r){const a=!!r;let o=this.view&&this.view.instance;if(a&&o&&(o instanceof En||o instanceof xn||o instanceof $n||o instanceof Hn||o instanceof pr||(this.removeView(this.view,!1),o=null)),o&&o.userId===t&&o.userName===e&&o.userType===s&&o.roomIndex===i)o&&(o instanceof En||o instanceof xn)&&o.userId===t&&this.removeView(this.view,!1);else if(this.view&&this.removeView(this.view,!1),!this._isGameMode)if(a)if(r._Str_11453){if(this.isDecorating)return;if(sn.a.isRunning())return;this.cachedOwnAvatarMenuView||(this.cachedOwnAvatarMenuView=this.createView(xn)),this.view=this.cachedOwnAvatarMenuView,this._ngZone.run(()=>xn.setup(this.view.instance,t,e,s,i,r))}else{this.cachedAvatarMenuView||(this.cachedAvatarMenuView=this.createView(En)),this.view=this.cachedAvatarMenuView,this._ngZone.run(()=>En.setup(this.view.instance,t,e,s,i,r));for(const e of this.cachedNameBubbles.values())if(e.instance.userId===t){this.removeView(e,!1);break}}else this.handler.roomEngine.isDecorating||(this.cachedNameView||(this.cachedNameView=this.createView(Tn)),this.view=this.cachedNameView,this._ngZone.run(()=>{this._ngZone.run(this.handler.container.sessionDataManager.userId===t?()=>Tn.setup(this.view.instance,t,e,s,i):()=>Tn.setup(this.view.instance,t,e,s,i,!0))}))}_Str_16991(t,e,s,i){const n=!!i;let r=this.view&&this.view.instance;n&&r&&(r instanceof En||r instanceof xn||r instanceof pr||r instanceof $n||r instanceof Hn||(this.removeView(this.view,!1),r=null)),r&&r.userId===t&&r.userName===e&&r.userType===W.a.RENTABLE_BOT&&r.roomIndex===s?r&&r instanceof pr&&r.userId===t&&this.removeView(this.view,!1):(this.view&&this.removeView(this.view,!1),this._isGameMode||n&&(this.cachedRentableBotMenuView||(this.cachedRentableBotMenuView=this.createView(pr)),this.view=this.cachedRentableBotMenuView,this._ngZone.run(()=>pr.setup(this.view.instance,t,e,W.a.RENTABLE_BOT,s,i))))}_Str_24751(t,e,s,i){const n=!!i;let r=this.view&&this.view.instance;n&&r&&(r instanceof En||r instanceof xn||r instanceof $n||r instanceof Hn||r instanceof pr||(this.removeView(this.view,!1),r=null)),r&&r.userId===t&&r.userName===e&&r.userType===W.a.PET&&r.roomIndex===s?r&&(r instanceof En||r instanceof xn)&&r.userId===t&&this.removeView(this.view,!1):(this.view&&this.removeView(this.view,!1),this._isGameMode||n&&(i._Str_5175?(this.cachedOwnPetMenuView||(this.cachedOwnPetMenuView=this.createView(Hn)),this.view=this.cachedOwnPetMenuView,this._ngZone.run(()=>Hn.setup(this.view.instance,t,e,W.a.PET,s,i))):(this.cachedPetMenuView||(this.cachedPetMenuView=this.createView($n)),this.view=this.cachedPetMenuView,this._ngZone.run(()=>$n.setup(this.view.instance,t,e,W.a.PET,s,i)))))}createView(t){if(!t)return null;let e=null,s=null;return this._ngZone.run(()=>{const i=this._componentFactoryResolver.resolveComponentFactory(t);e=this.contextsContainer.createComponent(i),s=e.instance}),s&&e?(s.parent=this,s.componentRef=e,e):null}close(){this.removeView(this.view,!1)}removeView(t,e){if(this._isRoomEnteredOwnAvatarHighlight=!1,!t)return;const s=this.contextsContainer.indexOf(t.hostView);-1!==s&&(this.cachedNameView=null,this.cachedOwnAvatarMenuView=null,this.cachedAvatarMenuView=null,this.cachedRentableBotMenuView=null,this.cachedPetMenuView=null,this.cachedOwnPetMenuView=null,t===this.view&&(this.view=null),t instanceof Tn&&(this.cachedNameBubbles.delete(t.instance.userName),this.toggleUpdateReceiver()),this._ngZone.run(()=>this.contextsContainer.remove(s)))}toggleUpdateReceiver(){if(this.view||this.cachedNameBubbles.size>0||this.cachedDecorateModeView){if(this._isUpdating)return;_.a.instance.ticker.add(this.update,this),this._isUpdating=!0}else _.a.instance.ticker.remove(this.update,this),this._isUpdating=!1}update(t){if(this.view){const e=this.view.instance,s=this.messageListener.processWidgetMessage(new je(je.RWGOI_MESSAGE_GET_OBJECT_LOCATION,e.userId,e.userType));s&&e.update(s.rectangle,s._Str_9337,t)}if(this.cachedDecorateModeView){const e=this.cachedDecorateModeView.instance,s=this.messageListener.processWidgetMessage(new je(je.RWGOI_MESSAGE_GET_OBJECT_LOCATION,e.userId,e.userType));s&&e.update(s.rectangle,s._Str_9337,t)}for(const e of this.cachedNameBubbles.values()){if(!e)continue;const s=e.instance,i=this.messageListener.processWidgetMessage(new je(je.RWGOI_MESSAGE_GET_OBJECT_LOCATION,s.userId,s.userType));i&&s.update(i.rectangle,i._Str_9337,t)}}getOwnRoomObject(){const t=this.handler.container.sessionDataManager.userId,e=this.handler.roomEngine.activeRoomId,s=V.a.UNIT,i=this.handler.roomEngine.getTotalObjectsForManager(e,s);let n=0;for(;n<i;){const i=this.handler.roomEngine.getRoomObjectByIndex(e,n,s);if(i){const e=this.handler.roomSession.userDataManager.getUserDataByIndex(i.id);if(e&&e.webID===t)return i}n++}return null}_Str_25716(){this.messageListener.processWidgetMessage(new lt(lt.GET_OWN_CHARACTER_INFO,0,0))}openAvatarEditor(){this._avatarEditorService.loadOwnAvatarInEditor(),this._settingsService.showAvatarEditor()}useSign(t){this.widgetHandler.container.roomSession.sendSignMessage(t)}get getOwnPosture(){const t=this.getOwnRoomObject();if(t){const e=t.model;if(e)return e.getValue(K.a.FIGURE_POSTURE)}return tn.a.POSTURE_STAND}get getCanStandUp(){const t=this.getOwnRoomObject();if(t){const e=t.model;if(e)return e.getValue(K.a.FIGURE_CAN_STAND_UP)}return!1}get _Str_12708(){const e=this.getOwnRoomObject();if(e){const s=e.model;if(s){const e=s.getValue(K.a.FIGURE_EFFECT);return e===t._Str_18968||e===t._Str_16970||e===t._Str_18857}}return!1}get _Str_25831(){const e=this.getOwnRoomObject();if(e){const s=e.model;if(s)return s.getValue(K.a.FIGURE_EFFECT)===t._Str_17951}return!1}get handler(){return this.widgetHandler}get isDecorating(){return this.handler.roomSession.isDecorating}set isDecorating(t){if(this.handler.roomSession.isDecorating=t,t){this.cachedDecorateModeView||(this.cachedDecorateModeView=this.createView(vn));const t=this.handler.roomSession.ownRoomIndex;vn.setup(this.cachedDecorateModeView.instance,this.handler.container.sessionDataManager.userId,this.handler.container.sessionDataManager.userName,hi.a.getTypeNumber(hi.a.USER),t)}else this.cachedDecorateModeView&&(this.removeView(this.cachedDecorateModeView,!1),this.cachedDecorateModeView=null)}get hasClub(){return this.handler.container.sessionDataManager.clubLevel>=gt._Str_2964}get hasVip(){return this.handler.container.sessionDataManager.clubLevel>=gt._Str_2575}}return t._Str_17951=77,t._Str_18968=29,t._Str_16970=30,t._Str_18857=185,t._Str_18641=5e3,t.\u0275fac=function(e){return new(e||t)(i.Yb(vr),i.Yb(m),i.Yb(Hs),i.Yb(i.m),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-avatarinfo-component"]],viewQuery:function(t,e){if(1&t&&i.bd(br,1,i.Z),2&t){let t;i.Gc(t=i.oc())&&(e.contextsContainer=t.first)}},features:[i.Hb],decls:3,vars:0,consts:[[1,"nitro-room-avatarinfo-component"],["contextsContainer",""]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Tc(1,Ir,0,0,"ng-template",null,1,i.Uc),i.cc())},encapsulation:2}),t})(),Tr=(()=>{class t{constructor(t,e){this.elementRef=t,this.ngZone=e,this.target=null,this.bringToFront=this.bringToFront.bind(this)}ngAfterViewInit(){const t=this.elementRef.nativeElement;t&&(this.target=t,this.addTarget(),this.registerEvents(),this.bringToFront())}ngOnDestroy(){this.unregisterEvents(),this.removeTarget(),this.bringToFront()}addTarget(){this.target&&(t.TOP_TARGETS.indexOf(this.target)>=0||t.TOP_TARGETS.push(this.target))}removeTarget(){if(!this.target)return;const e=t.TOP_TARGETS.indexOf(this.target);-1!==e&&t.TOP_TARGETS.splice(e,1)}registerEvents(){this.ngZone.runOutsideAngular(()=>{this.target&&this.target.addEventListener("mousedown",this.bringToFront)})}unregisterEvents(){this.ngZone.runOutsideAngular(()=>{this.target&&this.target.removeEventListener("mousedown",this.bringToFront)})}bringToFront(e=null){this.moveTarget();let s=t.Z_INDEX_START;for(const i of t.TOP_TARGETS)i&&(s+=t.Z_INDEX_INCREASE,i.style.zIndex=s.toString())}moveTarget(){const e=t.TOP_TARGETS.indexOf(this.target);if(-1===e)return;const s=t.TOP_TARGETS.splice(e,1);t.TOP_TARGETS.push(...s)}isTopTarget(){if(!this.target)return!1;const e=t.TOP_TARGETS.indexOf(this.target);return!(-1===e||e<t.TOP_TARGETS.length-1)}}return t.TOP_TARGETS=[],t.Z_INDEX_START=400,t.Z_INDEX_INCREASE=1,t.\u0275fac=function(e){return new(e||t)(i.Yb(i.p),i.Yb(i.H))},t.\u0275dir=i.Tb({type:t,selectors:[["","bringToTop",""]],inputs:{bringToTop:"bringToTop"}}),t})();const Or=function(t){return[t]};function yr(t,e){if(1&t){const t=i.ec();i.dc(0,"div",6),i.dc(1,"div",7),i.dc(2,"div",8),i.dc(3,"div",9),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().selectStyle(s)}),i.Vc(4,"\xa0"),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=e.$implicit,s=i.qc();i.Kb(1),i.xc("ngClass",i.Bc(4,Or,s.lastSelectedId===t?"bg-white":"bg-")),i.Kb(2),i.Nb("chat-bubble bubble-",t," w-100")}}const Cr=function(t){return{active:t}};let Ar=(()=>{class t{constructor(t,e){this.changeDetector=t,this.ngZone=e,this.styleSelected=new i.r,this.showStyles=!1,this.lastSelectedId=0,this.styleIds=[]}ngOnInit(){this.lastSelectedId=_.a.instance.sessionDataManager.chatStyle;const t=_.a.instance.getConfiguration("chat.styles");for(const e of t)e&&(e.minRank>0?_.a.instance.sessionDataManager.hasSecurity(e.minRank)&&this.styleIds.push(e.styleId):e.isSystemStyle&&_.a.instance.sessionDataManager.hasSecurity(H.a.MODERATOR)?this.styleIds.push(e.styleId):_.a.instance.getConfiguration("chat.styles.disabled").indexOf(e.styleId)>=0||(e.isHcOnly&&_.a.instance.sessionDataManager.clubLevel>=gt._Str_2964||e.isAmbassadorOnly&&_.a.instance.sessionDataManager.isAmbassador?this.styleIds.push(e.styleId):e.isHcOnly||e.isAmbassadorOnly||this.styleIds.push(e.styleId)))}ngOnDestroy(){this.hideSelector()}showSelector(){this.showStyles=!0}hideSelector(){this.showStyles=!1}toggleSelector(){this.showStyles?this.hideSelector():this.showSelector()}selectStyle(t){this.lastSelectedId=t,this.styleSelected.emit(t),this.hideSelector()}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.j),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-chatinput-styleselector-component"]],outputs:{styleSelected:"styleSelected"},decls:6,vars:4,consts:[[1,"nitro-room-chatinput-styleselector-component"],["src","./assets/images/bottombar/bubble-select.png",1,"bubble-select-box",3,"click"],[1,"nitro-chatstyle-selector",3,"bringToTop","ngClass"],[1,"grid-container","w-100"],[1,"grid-items","grid-3"],["class","d-flex flex-column item-detail justify-content-center align-items-center",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center"],[1,"d-flex","detail-info","rounded","justify-content-center","align-items-center",3,"ngClass"],[1,"bubble-container"],[3,"click"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"img",1),i.nc("click",function(){return e.toggleSelector()}),i.cc(),i.dc(2,"div",2),i.dc(3,"div",3),i.dc(4,"div",4),i.Tc(5,yr,5,6,"div",5),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(2),i.xc("ngClass",i.Bc(2,Cr,e.showStyles)),i.Kb(3),i.xc("ngForOf",e.styleIds))},directives:[Tr,p.l,p.m],encapsulation:2}),t})();const Mr=["chatInputView"];let wr=(()=>{class t extends en{constructor(t){super(),this._ngZone=t,this.selectedUsername="",this.floodBlocked=!1,this.floodBlockedSeconds=0,this.lastContent="",this.isTyping=!1,this.typingStartedSent=!1,this.typingTimer=null,this.idleTimer=null,this.floodTimer=null,this.floodInterval=null,this.currentStyle=-1,this.needsStyleUpdate=!1,this._chatModeIdWhisper=null,this._chatModeIdShout=null,this._chatModeIdSpeak=null,this._maxChatLength=0,this.onKeyDownEvent=this.onKeyDownEvent.bind(this),this.onInputMouseDownEvent=this.onInputMouseDownEvent.bind(this),this.onInputChangeEvent=this.onInputChangeEvent.bind(this),this.onRoomWidgetRoomObjectUpdateEvent=this.onRoomWidgetRoomObjectUpdateEvent.bind(this),this.onRoomWidgetUpdateInfostandUserEvent=this.onRoomWidgetUpdateInfostandUserEvent.bind(this),this.onRoomWidgetChatInputContentUpdateEvent=this.onRoomWidgetChatInputContentUpdateEvent.bind(this),this.onRoomWidgetFloodControlEvent=this.onRoomWidgetFloodControlEvent.bind(this)}ngOnInit(){this._chatModeIdWhisper=_.a.instance.getLocalization("widgets.chatinput.mode.whisper"),this._chatModeIdShout=_.a.instance.getLocalization("widgets.chatinput.mode.shout"),this._chatModeIdSpeak=_.a.instance.getLocalization("widgets.chatinput.mode.speak"),this._maxChatLength=_.a.instance.getConfiguration("chat.input.maxlength",100),this.currentStyle=_.a.instance.sessionDataManager.chatStyle}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{document.body.addEventListener("keydown",this.onKeyDownEvent),this.inputView&&(this.inputView.addEventListener("mousedown",this.onInputMouseDownEvent),this.inputView.addEventListener("input",this.onInputChangeEvent))})}ngOnDestroy(){this._ngZone.runOutsideAngular(()=>{document.body.removeEventListener("keydown",this.onKeyDownEvent),this.inputView&&(this.inputView.removeEventListener("mousedown",this.onInputMouseDownEvent),this.inputView.removeEventListener("input",this.onInputChangeEvent))}),this.resetTypingTimer(),this.resetIdleTimer(),this.resetFloodInterval()}registerUpdateEvents(t){t&&(t.addEventListener($.OBJECT_DESELECTED,this.onRoomWidgetRoomObjectUpdateEvent),t.addEventListener(Be.PEER,this.onRoomWidgetUpdateInfostandUserEvent),t.addEventListener(Pe.RWWCIDE_CHAT_INPUT_CONTENT,this.onRoomWidgetChatInputContentUpdateEvent),t.addEventListener(pt.RWFCE_FLOOD_CONTROL,this.onRoomWidgetFloodControlEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener($.OBJECT_DESELECTED,this.onRoomWidgetRoomObjectUpdateEvent),t.removeEventListener(Be.PEER,this.onRoomWidgetUpdateInfostandUserEvent),t.removeEventListener(Pe.RWWCIDE_CHAT_INPUT_CONTENT,this.onRoomWidgetChatInputContentUpdateEvent),t.removeEventListener(pt.RWFCE_FLOOD_CONTROL,this.onRoomWidgetFloodControlEvent))}onRoomWidgetRoomObjectUpdateEvent(t){this.selectedUsername=""}onRoomWidgetUpdateInfostandUserEvent(t){t&&(this.selectedUsername=t.name)}onRoomWidgetChatInputContentUpdateEvent(t){if(t)switch(t._Str_23621){case Pe.WHISPER:{const e=_.a.instance.getLocalization("widgets.chatinput.mode.whisper");return void this.changeInputValue(e+" "+t.userName+" ")}case Pe.SHOUT:return}}onRoomWidgetFloodControlEvent(t){t&&this._ngZone.run(()=>{this.floodBlocked=!0,this.floodBlockedSeconds=t.seconds,this.changeInputValue(_.a.instance.getLocalizationWithParameter("chat.input.alert.flood","time",this.floodBlockedSeconds.toString())),this.startFloodInterval()})}decreaseFloodBlockSeconds(){if(!this.floodBlockedSeconds)return this.resetFloodInterval(),this.floodBlocked=!1,void this.changeInputValue("");this.floodBlockedSeconds=this.floodBlockedSeconds-1,this.changeInputValue(_.a.instance.getLocalizationWithParameter("chat.input.alert.flood","time",this.floodBlockedSeconds.toString()))}sendChat(t,e,s="",i=0){!this.floodBlocked&&this.messageListener&&(this.changeInputValue(""),this.messageListener.processWidgetMessage(new ft(ft.MESSAGE_CHAT,t,e,s,i)))}changeInputValue(t){const e=this.chatInputView&&this.chatInputView.nativeElement||null;e&&(e.parentElement.dataset.value=e.value=t)}onKeyDownEvent(t){if(!t)return;if(this.anotherInputHasFocus())return;document.activeElement!==(this.chatInputView&&this.chatInputView.nativeElement)&&this.setInputFocus();const e=t.shiftKey;switch(t.keyCode){case 32:return void this.checkSpecialKeywordForInput();case 13:return void this.sendChatFromInputField(e);case 8:if(this.inputView){const t=this.inputView.value.split(" ");t[0]===this._chatModeIdWhisper&&3===t.length&&""===t[2]&&(this.changeInputValue(""),this.lastContent="")}return;default:return}}onInputMouseDownEvent(t){this.setInputFocus()}onInputChangeEvent(t){const e=t.target;if(!e)return;const s=e.value;s.length?(this.lastContent=s,this.isTyping||(this.isTyping=!0,this.startTypingTimer()),this.startIdleTimer()):(this.isTyping=!1,this.startTypingTimer())}onStyleSelected(t){t!==this.currentStyle&&(this.currentStyle=t,this.needsStyleUpdate=!0)}sendChatFromInputField(t=!1){if(!this.inputView||""===this.inputView.value)return;let e=t?ft.CHAT_SHOUT:ft.CHAT_DEFAULT,s=this.inputView.value;const i=s.split(" ");let n="",r="";switch(i[0]){case this._chatModeIdWhisper:e=ft.CHAT_WHISPER,n=i[1],r=this._chatModeIdWhisper+" "+n+" ",i.shift(),i.shift();break;case this._chatModeIdShout:e=ft.CHAT_SHOUT,i.shift();break;case this._chatModeIdSpeak:e=ft.CHAT_DEFAULT,i.shift()}s=i.join(" "),this.typingTimer&&this.resetTypingTimer(),this.idleTimer&&this.resetIdleTimer(),s.length<=this._maxChatLength&&(this.needsStyleUpdate&&(_.a.instance.sessionDataManager.sendChatStyleUpdate(this.currentStyle),this.needsStyleUpdate=!1),this.sendChat(s,e,n,this.currentStyle)),this.isTyping=!1,this.typingStartedSent&&this.sendTypingMessage(),this.typingStartedSent=!1,this.changeInputValue(r),this.lastContent=r}sendTypingMessage(){!this.floodBlocked&&this.messageListener&&this.messageListener.processWidgetMessage(new St(this.isTyping))}anotherInputHasFocus(){const t=document.activeElement;return!(!t||this.chatInputView&&this.chatInputView.nativeElement&&this.chatInputView.nativeElement===t||!(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement))}setInputFocus(){const t=this.chatInputView&&this.chatInputView.nativeElement;t&&(t.focus(),t.setSelectionRange(2*t.value.length,2*t.value.length))}checkSpecialKeywordForInput(){const t=this.chatInputView&&this.chatInputView.nativeElement||null;t&&""!==t.value&&t.value===this._chatModeIdWhisper&&0!==this.selectedUsername.length&&this.changeInputValue(`${t.value} ${this.selectedUsername}`)}startIdleTimer(){this.resetIdleTimer(),this.idleTimer=setTimeout(this.onIdleTimerComplete.bind(this),1e4)}resetIdleTimer(){this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null)}onIdleTimerComplete(){this.isTyping&&(this.typingStartedSent=!1),this.isTyping=!1,this.sendTypingMessage()}startTypingTimer(){this.resetTypingTimer(),this.typingTimer=setTimeout(this.onTypingTimerComplete.bind(this),1e3)}resetTypingTimer(){this.typingTimer&&(clearTimeout(this.typingTimer),this.typingTimer=null)}onTypingTimerComplete(){this.isTyping&&(this.typingStartedSent=!0),this.sendTypingMessage()}startFloodInterval(){this.resetFloodInterval(),this.floodInterval=setInterval(this.decreaseFloodBlockSeconds.bind(this),1e3)}resetFloodInterval(){this.floodInterval&&(clearInterval(this.floodInterval),this.floodInterval=null)}get inputMaxLength(){return this._maxChatLength}get inputView(){return this.chatInputView&&this.chatInputView.nativeElement||null}get handler(){return this.widgetHandler}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-chatinput-component"]],viewQuery:function(t,e){if(1&t&&i.bd(Mr,1),2&t){let t;i.Gc(t=i.oc())&&(e.chatInputView=t.first)}},features:[i.Hb],decls:6,vars:4,consts:[["id","bottom_chat-input-box"],[1,"bottom-bar-chat"],["type","text",1,"chat-box",3,"placeholder","maxLength","input"],["chatInputView",""],[3,"styleSelected"]],template:function(t,e){if(1&t){const t=i.ec();i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"input",2,3),i.nc("input",function(){i.Kc(t);const e=i.Hc(3);return e.parentElement.dataset.value=e.value}),i.rc(4,"translate"),i.cc(),i.cc(),i.dc(5,"nitro-room-chatinput-styleselector-component",4),i.nc("styleSelected",function(t){return e.onStyleSelected(t)}),i.cc(),i.cc()}2&t&&(i.Kb(2),i.yc("placeholder",i.sc(4,2,"widgets.chatinput.default")),i.xc("maxLength",e.inputMaxLength))},directives:[Ar],pipes:[ln],encapsulation:2}),t})();var Dr=s("xgIS"),Nr=s("eIep"),Ur=s("lJxs"),xr=s("1G5W");let Lr=(()=>{class t{constructor(t,e,s){this._viewContainerRef=t,this._elementRef=e,this._ngZone=s,this.dragHandle=".drag-handler",this.center=!1,this.topCenter=!0,this.noMemory=!1,this._name=null,this._target=null,this._handle=null,this._isDragging=!1,this._delta={x:0,y:0},this._offset={x:0,y:0},this._destroy=new yi.a}ngAfterViewInit(){this._name=this._viewContainerRef._hostTNode.classesWithoutHost;const e=this._elementRef.nativeElement;if(!e)return;this._handle=this.dragHandle?e.querySelector(this.dragHandle):e,this._target=this.dragTarget?e.querySelector(this.dragTarget):e,this._handle&&(this._handle.classList.add("header-draggable"),this._handle.parentElement.classList.add("header-draggable")),this.topCenter&&(e.style.top="50px",e.style.left=`calc(50vw - ${e.offsetWidth/2}px)`),this.center&&(e.style.top=`calc(50vh - ${e.offsetHeight/2}px)`,e.style.left=`calc(50vw - ${e.offsetWidth/2}px)`);const s=t.POS_MEMORY.get(this._name);s&&(this._offset.x=s.offset.x,this._offset.y=s.offset.y,this.translate()),this.setupEvents()}ngOnDestroy(){this._destroy.next(),this._handle&&(this._handle.classList.remove("header-draggable"),this._handle.parentElement.classList.remove("header-draggable"))}setupEvents(){this._ngZone.runOutsideAngular(()=>{const e=Object(Dr.a)(this._handle,"mousedown"),s=Object(Dr.a)(document,"mousemove"),i=Object(Dr.a)(document,"mouseup");e.pipe(Object(Nr.a)(t=>{const e=t.clientX,n=t.clientY;return s.pipe(Object(Ur.a)(t=>{t.preventDefault(),this._delta={x:t.clientX-e,y:t.clientY-n}}),Object(xr.a)(i))}),Object(xr.a)(this._destroy)).subscribe(()=>{this._isDragging=!0,0===this._delta.x&&0===this._delta.y||this.translate()}),i.pipe(Object(xr.a)(this._destroy)),i.subscribe(()=>{if(!this._isDragging)return;this._isDragging=!1,this._offset.x+=this._delta.x,this._offset.y+=this._delta.y,this._delta={x:0,y:0};const e=this._target.offsetLeft+this._offset.x,s=this._target.offsetTop+this._offset.y;s<t.BOUNDS_THRESHOLD_TOP?this._offset.y=-this._target.offsetTop:s+this._handle.offsetHeight>=document.body.offsetHeight-t.BOUNDS_THRESHOLD_TOP&&(this._offset.y=document.body.offsetHeight-this._target.offsetHeight-this._target.offsetTop),e+this._target.offsetWidth<t.BOUNDS_THRESHOLD_LEFT?this._offset.x=-this._target.offsetLeft:e>=document.body.offsetWidth-t.BOUNDS_THRESHOLD_LEFT&&(this._offset.x=document.body.offsetWidth-this._target.offsetWidth-this._target.offsetLeft),this.translate(),this.noMemory||t.POS_MEMORY.set(this._name,{offset:{x:this._offset.x+0,y:this._offset.y+0}})})})}translate(){this._target.style.transform=`translate(${this._offset.x+this._delta.x}px, ${this._offset.y+this._delta.y}px)`}}return t.POS_MEMORY=new Map,t.BOUNDS_THRESHOLD_TOP=0,t.BOUNDS_THRESHOLD_LEFT=0,t.\u0275fac=function(e){return new(e||t)(i.Yb(i.Z),i.Yb(i.p),i.Yb(i.H))},t.\u0275dir=i.Tb({type:t,selectors:[["","draggable",""]],inputs:{dragHandle:"dragHandle",dragTarget:"dragTarget",center:"center",topCenter:"topCenter",noMemory:"noMemory"}}),t})(),Pr=(()=>{class t{transform(t,e){return t?e?t.filter(t=>t.name.toLocaleLowerCase().includes(e.toLocaleLowerCase())):t:[]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=i.Xb({name:"roomObjectItemSearch",type:t,pure:!0}),t})();function Fr(t,e){if(1&t&&(i.dc(0,"p",12),i.Vc(1),i.cc()),2&t){const t=i.qc().$implicit;i.Kb(1),i.Wc(t.id)}}function kr(t,e){if(1&t){const t=i.ec();i.dc(0,"div",9),i.nc("click",function(){i.Kc(t);const s=e.$implicit,n=e.index;return i.qc(2).selectItem(s,n)}),i.dc(1,"p",10),i.Vc(2),i.cc(),i.Tc(3,Fr,2,1,"p",11),i.cc()}if(2&t){const t=e.$implicit,s=e.index,n=i.qc(2);i.xc("ngClass",n.selectedItemIndex==s?"flbactive":""),i.Kb(2),i.Wc(t.name),i.Kb(1),i.xc("ngIf","widget.chooser.furni.title"===n.title)}}function Vr(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"p",3),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",4),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.cc(),i.cc(),i.dc(6,"div",5),i.dc(7,"input",6),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().searchValue=e}),i.rc(8,"translate"),i.cc(),i.dc(9,"div",7),i.Tc(10,kr,4,3,"div",8),i.rc(11,"roomObjectItemSearch"),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.sc(4,4,t.title)),i.Kb(4),i.yc("placeholder",i.sc(8,6,"generic.search")),i.xc("ngModel",t.searchValue),i.Kb(3),i.xc("ngForOf",i.tc(11,8,t.items,t.searchValue))}}let Br=(()=>{class t extends en{constructor(t){super(),this._ngZone=t,this._visible=!1,this._items=[],this._title=null,this._timeout=null,this._selectedItemIndex=-1}ngOnDestroy(){this.clearTimeout()}hide(){this._visible=!1}selectItem(t,e){t&&this.items&&this.items.length&&(this._selectedItemIndex=e,this._ngZone.runOutsideAngular(()=>this.messageListener.processWidgetMessage(new lt(lt.SELECT_OBJECT,t.id,t.category))))}clearTimeout(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null)}get visible(){return this._visible}set visible(t){this._visible=t}get title(){return this._title}set title(t){this._title=t}get items(){return this._items}set items(t){this._items=t}get selectedItemIndex(){return this._selectedItemIndex}get searchValue(){return this._searchValue}set searchValue(t){this._selectedItemIndex=-1,this._searchValue=t}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-chooser-base-component"]],features:[i.Hb],decls:1,vars:1,consts:[["class","nitro-chooser-component furnisearch-corelo",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-chooser-component","furnisearch-corelo",3,"bringToTop","draggable"],[1,"drag-handler","fshead"],[1,"fs-baslik"],[1,"old-kapat",3,"click"],[1,"furni-searchbox"],["type","text",1,"furnisearch",3,"ngModel","placeholder","ngModelChange"],[1,"fslist"],["class","furni-list-box ",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"furni-list-box",3,"ngClass","click"],[1,"fs-name"],["class","fs-nameid",4,"ngIf"],[1,"fs-nameid"]],template:function(t,e){1&t&&i.Tc(0,Vr,12,11,"div",0),2&t&&i.xc("ngIf",e.visible)},directives:[p.n,Tr,Lr,rr.b,rr.l,rr.n,p.m,p.l],pipes:[ln,Pr],encapsulation:2}),t})();function Wr(t,e){if(1&t&&(i.dc(0,"p",12),i.Vc(1),i.cc()),2&t){const t=i.qc().$implicit;i.Kb(1),i.Wc(t.id)}}function Kr(t,e){if(1&t){const t=i.ec();i.dc(0,"div",9),i.nc("click",function(){i.Kc(t);const s=e.$implicit,n=e.index;return i.qc(2).selectItem(s,n)}),i.dc(1,"p",10),i.Vc(2),i.cc(),i.Tc(3,Wr,2,1,"p",11),i.cc()}if(2&t){const t=e.$implicit,s=e.index,n=i.qc(2);i.xc("ngClass",n.selectedItemIndex==s?"flbactive":""),i.Kb(2),i.Wc(t.name),i.Kb(1),i.xc("ngIf","widget.chooser.furni.title"===n.title)}}function Gr(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"p",3),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",4),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.cc(),i.cc(),i.dc(6,"div",5),i.dc(7,"input",6),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().searchValue=e}),i.rc(8,"translate"),i.cc(),i.dc(9,"div",7),i.Tc(10,Kr,4,3,"div",8),i.rc(11,"roomObjectItemSearch"),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.sc(4,4,t.title)),i.Kb(4),i.yc("placeholder",i.sc(8,6,"generic.search")),i.xc("ngModel",t.searchValue),i.Kb(3),i.xc("ngForOf",i.tc(11,8,t.items,t.searchValue))}}let Hr=(()=>{class t extends Br{constructor(t){super(t),this._ngZone=t,this._title="widget.chooser.furni.title",this.onRoomWidgetChooserContentEvent=this.onRoomWidgetChooserContentEvent.bind(this),this.onRoomWidgetRoomObjectUpdateEvent=this.onRoomWidgetRoomObjectUpdateEvent.bind(this)}registerUpdateEvents(t){t&&(t.addEventListener(zt.RWCCE_FURNI_CHOOSER_CONTENT,this.onRoomWidgetChooserContentEvent),t.addEventListener($.FURNI_ADDED,this.onRoomWidgetRoomObjectUpdateEvent),t.addEventListener($.FURNI_REMOVED,this.onRoomWidgetRoomObjectUpdateEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(zt.RWCCE_FURNI_CHOOSER_CONTENT,this.onRoomWidgetChooserContentEvent),t.removeEventListener($.FURNI_ADDED,this.onRoomWidgetRoomObjectUpdateEvent),t.removeEventListener($.FURNI_REMOVED,this.onRoomWidgetRoomObjectUpdateEvent),super.unregisterUpdateEvents(t))}onRoomWidgetChooserContentEvent(t){t&&this._ngZone.run(()=>{this._items=t.items,this.visible=!0})}onRoomWidgetRoomObjectUpdateEvent(t){t&&this.visible&&(this.clearTimeout(),this._timeout=setTimeout(()=>{this.messageListener.processWidgetMessage(new vt(vt.RWRWM_FURNI_CHOOSER))},100))}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-chooser-furni"]],features:[i.Hb],decls:1,vars:1,consts:[["class","nitro-chooser-component furnisearch-corelo",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-chooser-component","furnisearch-corelo",3,"bringToTop","draggable"],[1,"drag-handler","fshead"],[1,"fs-baslik"],[1,"old-kapat",3,"click"],[1,"furni-searchbox"],["type","text",1,"furnisearch",3,"ngModel","placeholder","ngModelChange"],[1,"fslist"],["class","furni-list-box ",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"furni-list-box",3,"ngClass","click"],[1,"fs-name"],["class","fs-nameid",4,"ngIf"],[1,"fs-nameid"]],template:function(t,e){1&t&&i.Tc(0,Gr,12,11,"div",0),2&t&&i.xc("ngIf",e.visible)},directives:[p.n,Tr,Lr,rr.b,rr.l,rr.n,p.m,p.l],pipes:[ln,Pr],encapsulation:2}),t})();function jr(t,e){if(1&t&&(i.dc(0,"p",12),i.Vc(1),i.cc()),2&t){const t=i.qc().$implicit;i.Kb(1),i.Wc(t.id)}}function zr(t,e){if(1&t){const t=i.ec();i.dc(0,"div",9),i.nc("click",function(){i.Kc(t);const s=e.$implicit,n=e.index;return i.qc(2).selectItem(s,n)}),i.dc(1,"p",10),i.Vc(2),i.cc(),i.Tc(3,jr,2,1,"p",11),i.cc()}if(2&t){const t=e.$implicit,s=e.index,n=i.qc(2);i.xc("ngClass",n.selectedItemIndex==s?"flbactive":""),i.Kb(2),i.Wc(t.name),i.Kb(1),i.xc("ngIf","widget.chooser.furni.title"===n.title)}}function Yr(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"p",3),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",4),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.cc(),i.cc(),i.dc(6,"div",5),i.dc(7,"input",6),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().searchValue=e}),i.rc(8,"translate"),i.cc(),i.dc(9,"div",7),i.Tc(10,zr,4,3,"div",8),i.rc(11,"roomObjectItemSearch"),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.sc(4,4,t.title)),i.Kb(4),i.yc("placeholder",i.sc(8,6,"generic.search")),i.xc("ngModel",t.searchValue),i.Kb(3),i.xc("ngForOf",i.tc(11,8,t.items,t.searchValue))}}let qr=(()=>{class t extends Br{constructor(t){super(t),this._ngZone=t,this.title="widget.chooser.user.title",this.onRoomWidgetChooserContentEvent=this.onRoomWidgetChooserContentEvent.bind(this),this.onRoomWidgetRoomObjectUpdateEvent=this.onRoomWidgetRoomObjectUpdateEvent.bind(this)}registerUpdateEvents(t){null!=t&&(t.addEventListener(zt.RWCCE_USER_CHOOSER_CONTENT,this.onRoomWidgetChooserContentEvent),t.addEventListener($.USER_REMOVED,this.onRoomWidgetRoomObjectUpdateEvent.bind(this)),t.addEventListener($.USER_ADDED,this.onRoomWidgetRoomObjectUpdateEvent.bind(this)),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){null!=t&&(t.removeEventListener(zt.RWCCE_USER_CHOOSER_CONTENT,this.onRoomWidgetChooserContentEvent),t.removeEventListener($.USER_REMOVED,this.onRoomWidgetRoomObjectUpdateEvent.bind(this)),t.removeEventListener($.USER_ADDED,this.onRoomWidgetRoomObjectUpdateEvent.bind(this)),super.unregisterUpdateEvents(t))}onRoomWidgetChooserContentEvent(t){t&&this._ngZone.run(()=>{this._items=t.items,this.visible=!0})}onRoomWidgetRoomObjectUpdateEvent(t){this.visible&&(this.clearTimeout(),this._timeout=setTimeout(()=>{this.messageListener.processWidgetMessage(new vt(vt.RWRWM_USER_CHOOSER))},100))}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-chooser-user"]],features:[i.Hb],decls:1,vars:1,consts:[["class","nitro-chooser-component furnisearch-corelo",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-chooser-component","furnisearch-corelo",3,"bringToTop","draggable"],[1,"drag-handler","fshead"],[1,"fs-baslik"],[1,"old-kapat",3,"click"],[1,"furni-searchbox"],["type","text",1,"furnisearch",3,"ngModel","placeholder","ngModelChange"],[1,"fslist"],["class","furni-list-box ",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"furni-list-box",3,"ngClass","click"],[1,"fs-name"],["class","fs-nameid",4,"ngIf"],[1,"fs-nameid"]],template:function(t,e){1&t&&i.Tc(0,Yr,12,11,"div",0),2&t&&i.xc("ngIf",e.visible)},directives:[p.n,Tr,Lr,rr.b,rr.l,rr.n,p.m,p.l],pipes:[ln,Pr],encapsulation:2}),t})();const Zr=["activeView"];let Xr=(()=>{class t{constructor(){this.parent=null,this.requestId=0,this.userId=0,this.userName=""}update(t,e){if(!t)return void this.hide();let s=Math.round(t.left+t.width/2-this.activeViewElement.offsetWidth/2),i=Math.round(t.top-this.activeViewElement.offsetHeight+10);i<=0&&(i=cn.SPACE_AROUND_EDGES),i>=_.a.instance.height-this.activeViewElement.offsetHeight&&(i=_.a.instance.height-this.activeViewElement.offsetHeight-cn.SPACE_AROUND_EDGES),s>=_.a.instance.width-this.activeViewElement.offsetWidth&&(s=_.a.instance.width-this.activeViewElement.offsetWidth-cn.SPACE_AROUND_EDGES),this.activeViewElement.style.left=s+"px",this.activeViewElement.style.top=i+"px"}hide(){this.parent&&this.parent.removeFriendRequest(this.requestId)}acceptFriendRequest(){this.parent&&this.parent.acceptFriendRequest(this.requestId)}declineFriendRequest(){this.parent&&this.parent.declineFriendRequest(this.requestId)}get activeViewElement(){return this.activeView&&this.activeView.nativeElement||null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&i.bd(Zr,1),2&t){let t;i.Gc(t=i.oc())&&(e.activeView=t.first)}},decls:14,vars:11,consts:[[1,"arkadaslikistegi"],["activeView",""],[1,"bilgimetni"],[1,"istek-kapat",3,"click"],[1,"d-flex","justify-content-between","align-items-center","w-100"],["type","button",1,"istekreddet",3,"click"],["type","button",1,"istekkabul",3,"click"],[1,"istek-bottom"]],template:function(t,e){1&t&&(i.dc(0,"div",0,1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",3),i.nc("click",function(){return e.hide()}),i.cc(),i.dc(6,"div",4),i.dc(7,"button",5),i.nc("click",function(){return e.declineFriendRequest()}),i.Vc(8),i.rc(9,"translate"),i.cc(),i.dc(10,"button",6),i.nc("click",function(){return e.acceptFriendRequest()}),i.Vc(11),i.rc(12,"translate"),i.cc(),i.cc(),i.Zb(13,"div",7),i.cc()),2&t&&(i.Kb(3),i.Wc(i.uc(4,3,"widget.friendrequest.from","username",e.userName)),i.Kb(5),i.Wc(i.sc(9,7,"widget.friendrequest.decline")),i.Kb(3),i.Wc(i.sc(12,9,"widget.friendrequest.accept")))},pipes:[ln],encapsulation:2}),t})();const Qr=["contextsContainer"];function Jr(t,e){}let $r=(()=>{class t extends en{constructor(t,e){super(),this._componentFactoryResolver=t,this._ngZone=e,this.cachedFriendRequestDialogs=new Map,this.onRoomWidgetFriendRequestUpdateEvent=this.onRoomWidgetFriendRequestUpdateEvent.bind(this)}ngOnDestroy(){_.a.instance.ticker.remove(this.update,this)}registerUpdateEvents(t){t&&(t.addEventListener(Wt.RWFRUE_SHOW_FRIEND_REQUEST,this.onRoomWidgetFriendRequestUpdateEvent),t.addEventListener(Wt.RWFRUE_HIDE_FRIEND_REQUEST,this.onRoomWidgetFriendRequestUpdateEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(Wt.RWFRUE_SHOW_FRIEND_REQUEST,this.onRoomWidgetFriendRequestUpdateEvent),t.removeEventListener(Wt.RWFRUE_HIDE_FRIEND_REQUEST,this.onRoomWidgetFriendRequestUpdateEvent),super.unregisterUpdateEvents(t))}onRoomWidgetFriendRequestUpdateEvent(t){if(t){switch(t.type){case Wt.RWFRUE_SHOW_FRIEND_REQUEST:this.createFriendRequest(t.requestId,t.userId,t.userName);break;case Wt.RWFRUE_HIDE_FRIEND_REQUEST:this.removeFriendRequest(t.requestId)}this.toggleUpdateReceiver()}}createFriendRequest(t,e,s){const i=this.createView(Xr);i&&(i.instance.requestId=t,i.instance.userId=e,i.instance.userName=s,this.cachedFriendRequestDialogs.set(i.instance,i))}removeFriendRequest(t){for(const e of this.cachedFriendRequestDialogs.values()){if(!e)continue;const s=e.instance;if(s&&s.requestId===t)return void this.removeView(e)}}toggleUpdateReceiver(){this.cachedFriendRequestDialogs&&this.cachedFriendRequestDialogs.size?_.a.instance.ticker.add(this.update,this):_.a.instance.ticker.remove(this.update,this)}createView(t){if(!t)return null;let e=null,s=null;return this._ngZone.run(()=>{const i=this._componentFactoryResolver.resolveComponentFactory(t);e=this.contextsContainer.createComponent(i),s=e.instance}),s&&e?(s.parent=this,e):null}removeView(t){if(!t)return;const e=this.contextsContainer.indexOf(t.hostView);-1!==e&&(this.cachedFriendRequestDialogs.delete(t.instance),this.toggleUpdateReceiver(),this._ngZone.run(()=>this.contextsContainer.remove(e)))}update(t){for(const e of this.cachedFriendRequestDialogs.values()){if(!e)continue;const t=e.instance,s=this.messageListener.processWidgetMessage(new je(je.RWGOI_MESSAGE_GET_OBJECT_LOCATION,t.userId,W.a.USER));s&&t.update(s.rectangle,s._Str_9337)}}acceptFriendRequest(t){this.messageListener&&(this.messageListener.processWidgetMessage(new Kt(Kt.RWFRM_ACCEPT,t)),this.removeFriendRequest(t))}declineFriendRequest(t){this.messageListener&&(this.messageListener.processWidgetMessage(new Kt(Kt.RWFRM_DECLINE,t)),this.removeFriendRequest(t))}get handler(){return this.widgetHandler}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.m),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-friendrequest-component"]],viewQuery:function(t,e){if(1&t&&i.bd(Qr,1,i.Z),2&t){let t;i.Gc(t=i.oc())&&(e.contextsContainer=t.first)}},features:[i.Hb],decls:3,vars:0,consts:[[1,"nitro-widget-friendrequest"],["contextsContainer",""]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Tc(1,Jr,0,0,"ng-template",null,1,i.Uc),i.cc())},encapsulation:2}),t})();var ta=s("v1R/"),ea=s("AzHa"),sa=s("mgaL");const ia=function(t){return{"background-color":t}};function na(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"p",3),i.Vc(3,"Background Toner"),i.cc(),i.dc(4,"div",4),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.cc(),i.cc(),i.dc(5,"div",5),i.dc(6,"div",6),i.dc(7,"p",7),i.Vc(8,"Choose the color for you room background"),i.cc(),i.Zb(9,"div",8),i.cc(),i.dc(10,"div",9),i.dc(11,"p",10),i.Vc(12),i.rc(13,"translate"),i.cc(),i.dc(14,"div",11),i.dc(15,"ngx-slider",12),i.nc("valueChange",function(){return i.Kc(t),i.qc().onSliderChange()})("valueChange",function(e){return i.Kc(t),i.qc().hue=e}),i.cc(),i.cc(),i.dc(16,"p",10),i.Vc(17),i.rc(18,"translate"),i.cc(),i.dc(19,"div",11),i.dc(20,"ngx-slider",12),i.nc("valueChange",function(){return i.Kc(t),i.qc().onSliderChange()})("valueChange",function(e){return i.Kc(t),i.qc().saturation=e}),i.cc(),i.cc(),i.dc(21,"p",10),i.Vc(22),i.rc(23,"translate"),i.cc(),i.dc(24,"div",11),i.dc(25,"ngx-slider",12),i.nc("valueChange",function(){return i.Kc(t),i.qc().onSliderChange()})("valueChange",function(e){return i.Kc(t),i.qc().lightness=e}),i.cc(),i.cc(),i.dc(26,"div",13),i.dc(27,"div",14),i.nc("click",function(){return i.Kc(t),i.qc().handleButton("apply")}),i.Vc(28),i.rc(29,"translate"),i.cc(),i.dc(30,"div",14),i.nc("click",function(){return i.Kc(t),i.qc().handleButton("on_off")}),i.Vc(31),i.rc(32,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(9),i.xc("ngStyle",i.Bc(22,ia,t.rgbColor)),i.Kb(3),i.Wc(i.sc(13,12,"widget.backgroundcolor.hue")),i.Kb(3),i.xc("options",t.delaySliderOptions)("value",t.hue),i.Kb(2),i.Wc(i.sc(18,14,"widget.backgroundcolor.saturation")),i.Kb(3),i.xc("options",t.delaySliderOptions)("value",t.saturation),i.Kb(2),i.Wc(i.sc(23,16,"widget.backgroundcolor.lightness")),i.Kb(3),i.xc("options",t.delaySliderOptions)("value",t.lightness),i.Kb(3),i.Wc(i.sc(29,18,"widget.backgroundcolor.button.apply")),i.Kb(3),i.Wc(i.sc(32,20,"widget.backgroundcolor.button.on"))}}let ra=(()=>{class t extends en{constructor(t){super(),this._ngZone=t,this.rgbColor="",this._furniId=-1,this._visible=!1,this.saturation=0,this.hue=0,this.lightness=0,this.hsl={}}open(t,e,s,i){this._ngZone.run(()=>{this._furniId=t,this._visible=!0,this.hue=Math.max(e,0),this.saturation=Math.max(s,0),this.lightness=Math.max(i,0),console.log(this.hue,this.hue/255*360,this.saturation,this.lightness),this.hsl={h:this.hue/255*360,s:this.saturation/255,l:this.lightness/255},console.log(this.hsl)})}hide(){this._visible=!1,this._furniId=-1}handleChangeComplete(t){const e=Y.a._Str_13949(((255&this.hue)<<16)+((255&this.saturation)<<8)+(255&this.lightness)),s=e>>16&255,i=e>>8&255,n=255&e;if(!t)return;const r=Y.a._Str_22130(parseInt(t.color.hex.replace("#",""),16));this.rgbColor=`rgb(${s}, ${i}, ${n})`,this.hue=r>>16&255,this.saturation=r>>8&255,this.lightness=255&r}handleButton(t){switch(t){case"apply":this.handler.container.connection.send(new ea.a(this._furniId,this.hue,this.saturation,this.lightness));break;case"on_off":this.handler.container.connection.send(new ta.a(this._furniId))}}get handler(){return this.widgetHandler}get visible(){return this._visible}get delaySliderOptions(){return{floor:0,ceil:255,step:1,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-furniture-backgroundcolor-component"]],features:[i.Hb],decls:1,vars:1,consts:[["class","backgroundtoner",3,"bringToTop","draggable",4,"ngIf"],[1,"backgroundtoner",3,"bringToTop","draggable"],[1,"bthead","drag-handler"],[1,"bthood"],[1,"old-kapat",3,"click"],[1,"bt-bodybox"],[1,"btdescbox"],[1,"btdesc-txt"],[1,"bg-color-info",3,"ngStyle"],[1,"bt-control"],[1,"bt-selecttxt"],[1,"bgedit-slider"],[3,"options","value","valueChange"],[1,"d-flex","flex-row","justify-content-between","btbuttonbox"],[1,"bt-buton",3,"click"]],template:function(t,e){1&t&&i.Tc(0,na,33,24,"div",0),2&t&&i.xc("ngIf",e.visible)},directives:[p.n,Tr,Lr,p.o,sa.b],pipes:[ln],encapsulation:2}),t})();var aa=s("pjvS"),oa=s("rbNg");let ca=(()=>{class t{}return t.DEFAULT=1,t.WALL_PAPER=2,t.FLOOR=3,t.LANDSCAPE=4,t.POST_IT=5,t.POSTER=6,t.SOUND_SET=7,t.TRAX_SONG=8,t.PRESENT=9,t.ECOTRON_BOX=10,t.TROPHY=11,t.CREDIT_FURNI=12,t.PET_SHAMPOO=13,t.PET_CUSTOM_PART=14,t.PET_CUSTOM_PART_SHAMPOO=15,t.PET_SADDLE=16,t.GUILD_FURNI=17,t.GAME_FURNI=18,t.MONSTERPLANT_SEED=19,t.MONSTERPLANT_REVIVAL=20,t.MONSTERPLANT_REBREED=21,t.MONSTERPLANT_FERTILIZE=22,t.FIGURE_PURCHASABLE_SET=23,t})(),ha=(()=>{class t{constructor(t){this.elementRef=t}ngOnInit(){const t=this.elementRef.nativeElement;t&&(t.onerror=()=>{t.src="",t.onerror=null})}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.p))},t.\u0275dir=i.Tb({type:t,selectors:[["","image-placeholder",""]]}),t})();const la=["nitro-avatar-image",""];function ua(t,e){if(1&t&&i.Zb(0,"img",1),2&t){const t=i.qc();i.Nb("avatar-image scale-",t.scale,""),i.xc("src",t.avatarUrl,i.Mc)}}let _a=(()=>{class t{constructor(t){this._ngZone=t,this.figure="",this.gender="M",this.headOnly=!1,this.direction=0,this.scale=1,this._avatarImageCache=new Bs.a,this.avatarUrl=null,this.disposed=!1,this.needsUpdate=!0}ngOnInit(){this.needsUpdate&&this.buildAvatar()}ngOnDestroy(){this.dispose()}ngOnChanges(t){const e=t.figure;e&&e.previousValue!==e.currentValue&&(this.needsUpdate=!0);const s=t.gender;s&&s.previousValue!==s.currentValue&&(this.needsUpdate=!0);const i=t.headOnly;i&&i.previousValue!==i.currentValue&&(this.needsUpdate=!0);const n=t.direction;n&&n.previousValue!==n.currentValue&&(this.needsUpdate=!0),this.needsUpdate&&this.buildAvatar()}dispose(){}resetFigure(t){this._avatarImageCache.remove(this.getAvatarBuildString()),this.buildAvatar()}buildAvatar(){this._ngZone.runOutsideAngular(()=>{this.needsUpdate=!1;const t=this.getUserImageUrl();t&&this._ngZone.run(()=>this.avatarUrl=t)})}getUserImageUrl(){const t=this.getAvatarBuildString();let e=this._avatarImageCache.getValue(t);if(!e){const s=_.a.instance.avatar.createAvatarImage(this.figure,Rt.a.LARGE,this.gender,this,null);if(s){let t=Tt.a.FULL;this.headOnly&&(t=Tt.a.HEAD),s.setDirection(t,this.direction);const i=s.getCroppedImage(t);i&&(e=i.src),s.dispose()}e&&this.putInCache(t,e)}return e}putInCache(e,s){this._avatarImageCache.length===t.MAX_CACHE_SIZE&&this._avatarImageCache.remove(this._avatarImageCache.getKey(0)),this._avatarImageCache.add(e,s)}getAvatarBuildString(){return`${this.figure}:${this.gender}:${this.direction}:${this.headOnly}`}}return t.MAX_CACHE_SIZE=10,t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-avatar-image",""]],inputs:{figure:"figure",gender:"gender",headOnly:"headOnly",direction:"direction",scale:"scale"},features:[i.Ib],attrs:la,decls:1,vars:1,consts:[["image-placeholder","",3,"class","src",4,"ngIf"],["image-placeholder","",3,"src"]],template:function(t,e){1&t&&i.Tc(0,ua,1,4,"img",0),2&t&&i.xc("ngIf",e.avatarUrl)},directives:[p.n,ha],encapsulation:2}),t})();function da(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"p",3),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",4),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.cc(),i.cc(),i.dc(6,"div",5),i.dc(7,"div",6),i.Zb(8,"div",7),i.cc(),i.dc(9,"div",8),i.dc(10,"p",9),i.dc(11,"u",10),i.Vc(12,"Merhaba yeni bir k\u0131yafet a\xe7mak \xfczeresin!"),i.cc(),i.Vc(13),i.rc(14,"translate"),i.cc(),i.dc(15,"p",11),i.Vc(16),i.rc(17,"translate"),i.cc(),i.dc(18,"div",12),i.dc(19,"div",13),i.nc("click",function(){return i.Kc(t),i.qc().handleButton("use")}),i.dc(20,"p",14),i.Vc(21),i.rc(22,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.sc(4,6,"useproduct.widget.title.bind_clothing")),i.Kb(5),i.xc("figure",t.newFigureString)("direction",2),i.Kb(5),i.Wc(i.sc(14,8,"useproduct.widget.text.bind_clothing")),i.Kb(3),i.Wc(i.sc(17,10,"useproduct.widget.info.bind_clothing")),i.Kb(5),i.Wc(i.sc(22,12,"useproduct.widget.bind_clothing"))}}let ga=(()=>{class t{constructor(){this.contextWidget=null,this.objectId=null,this.visible=!1,this._furniData=null,this._requestObjectId=-1,this.caption=null}hide(){this.contextWidget&&this.contextWidget.closeClothing()}open(t){if(!this.contextWidget)return;const e=this.contextWidget.handler.container.roomEngine.getRoomObject(this.contextWidget.handler.container.roomSession.roomId,t,V.a.FLOOR);if(!e)return;this._furniData=this.contextWidget.handler.getFurniData(e),this._requestObjectId=e.id;let s=-1;const i=[],n=this.contextWidget.handler.container.sessionDataManager.gender;switch(this._furniData.specialType){case ca.FIGURE_PURCHASABLE_SET:{s=0;const t=this._furniData.customParams.split(",");for(let e=0;e<t.length;e++){const s=Number.parseInt(t[e]);this.contextWidget.handler.container.avatarRenderManager.isValidFigureSetForGender(s,n)&&i.push(s)}}}this.newFigureString=this.contextWidget.handler.container.avatarRenderManager.getFigureStringWithFigureIds(this.contextWidget.handler.container.sessionDataManager.figure,n,i),this.contextWidget.inventoryService.hasBoundFigureSetFurniture(this.newFigureString)?this.contextWidget.handler.container.connection.send(new oa.a(n,this.newFigureString)):this.showWindow(s)}handleButton(t){switch(t){case"cancel":this.hide();break;case"use":{const t=this.contextWidget.handler.container.sessionDataManager.gender;this.contextWidget.handler.container.connection.send(new aa.a(this._requestObjectId)),this.contextWidget.handler.container.connection.send(new oa.a(t,this.newFigureString)),this.hide()}}}showWindow(t){this.caption=_.a.instance.localization.getValueWithParameter("useproduct.widget.text.bind_clothing","productName",this._furniData.name),this.visible=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],inputs:{contextWidget:"contextWidget",objectId:"objectId"},decls:1,vars:1,consts:[["class","useclothing",3,"bringToTop","draggable",4,"ngIf"],[1,"useclothing",3,"bringToTop","draggable"],[1,"drag-handler","uchead"],[1,"cha-baslik"],[1,"old-kapat",3,"click"],[1,"ucbox"],[1,"avatar-view-ucbox"],["nitro-avatar-image","",2,"margin-top","-8px","margin-left","-5px",3,"figure","direction"],[1,"uc-rightbox"],[1,"uc-desc"],[1,"uc-uyari"],[1,"uc-desc_not"],[1,"uc-buy"],[1,"ucbuy-button",3,"click"],[1,"mb-tamam-text",2,"padding-left","10px","padding-right","10px"]],template:function(t,e){1&t&&i.Tc(0,da,23,14,"div",0),2&t&&i.xc("ngIf",e.visible)},directives:[p.n,Tr,Lr,_a],pipes:[ln],encapsulation:2}),t})();var ma=s("1mUs");let pa=(()=>{class t{}return t.FURNI=1,t.RENTABLE=2,t.PET=3,t.BADGE=4,t.BOT=5,t.GAMES=6,t._Str_12463=[t.FURNI,t.RENTABLE,t.PET,t.BADGE,t.BOT],t})();var fa=s("pRZV");class Ea{constructor(t,e){this._communication=t,this._inventoryService=e,this._unseenItems=[],this._messages=[],this.registerMessages()}dispose(){this.unregisterMessages(),this._communication=null,this._unseenItems=null}registerMessages(){this.unregisterMessages(),this._messages=[new fa.a(this.onUnseenItemsEvent.bind(this))];for(const t of this._messages)this._communication.registerMessageEvent(t)}unregisterMessages(){for(const t of this._messages)this._communication.removeMessageEvent(t);this._messages=[]}_Str_8813(t){return!!this._Str_5621(t)&&(delete this._unseenItems[t],this._Str_20981(t),!0)}_Str_18075(t,e){if(!this._Str_5621(t))return!1;const s=this._unseenItems[t];for(const i of e)s.splice(s.indexOf(i),1);return this._Str_23994(t,e),!0}_Str_17159(t){return!this._Str_5621(t)&&(delete this._unseenItems[t],this._Str_20981(t),!0)}_Str_3613(t,e){return!!this._unseenItems[t]&&this._unseenItems[t].indexOf(e)>=0}_Str_16745(t,e){if(!this._unseenItems[t])return!1;const s=this._unseenItems[t],i=s.indexOf(e);return-1!==i&&(s.splice(i,1),!0)}_Str_11239(t){return this._unseenItems?this._unseenItems[t]:[]}_Str_5621(t){return this._unseenItems[t]?this._unseenItems[t].length:0}onUnseenItemsEvent(t){if(!t)return;const e=t.getParser();if(e){for(const t of e.categories){const s=e.getItemsByCategory(t);this._Str_18112(t,s)}this._inventoryService.updateUnseenCount()}}_Str_18112(t,e){if(!e)return;let s=this._unseenItems[t];s||(s=[],this._unseenItems[t]=s);for(const i of e)-1===s.indexOf(i)&&s.push(i)}_Str_20981(t){}_Str_23994(t,e){}}let Sa=(()=>{class t{constructor(t,e){this._settingsService=t,this._ngZone=e,this._messages=[],this._events=null,this._botsController=null,this._badgesController=null,this._furniController=null,this._controller=null,this._petsController=null,this._tradeController=null,this._roomSession=null,this._unseenCount=0,this._botsVisible=!1,this._furnitureVisible=!0,this._badgesVisible=!1,this._petsVisible=!1,this._tradingVisible=!1,this._figureSetIds=[],this._boundFurnitureNames=[],this._events=new i.r,this._unseenTracker=new Ea(_.a.instance.communication,this),this._unseenCounts=new Map,this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages(),this._unseenTracker&&(this._unseenTracker.dispose(),this._unseenTracker=null)}registerMessages(){this._ngZone.runOutsideAngular(()=>{_.a.instance.roomSessionManager.events.addEventListener(w.a.STARTED,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.addEventListener(w.a.ENDED,this.onRoomSessionEvent),this._messages=[new ma.a(this.onFigureSetIdsMessageEvent.bind(this))];for(const t of this._messages)_.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{_.a.instance.roomSessionManager.events.removeEventListener(w.a.STARTED,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.removeEventListener(w.a.ENDED,this.onRoomSessionEvent);for(const t of this._messages)_.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomSessionEvent(t){if(t)switch(t.type){case w.a.STARTED:return void(this._roomSession=t.session);case w.a.ENDED:return this._roomSession=null,void this._ngZone.run(()=>this.hideWindow())}}onFigureSetIdsMessageEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._figureSetIds=e.figureSetIds,this._boundFurnitureNames=e.boundsFurnitureNames})}updateUnseenCount(){setTimeout(()=>{this._ngZone.run(()=>{let t=0;const e=this._unseenTracker._Str_5621(pa.FURNI);t+=e;const s=this._unseenTracker._Str_5621(pa.BOT);t+=s;const i=this._unseenTracker._Str_5621(pa.PET);t+=i;const n=this._unseenTracker._Str_5621(pa.BADGE);t+=n,this._unseenCounts.set(pa.FURNI,e),this._unseenCounts.set(pa.BOT,s),this._unseenCounts.set(pa.BADGE,n),this._unseenCounts.set(pa.PET,i),this._unseenCount=t})},1)}updateItemLocking(){this.controller&&this.controller.updateItemLocking()}showWindow(){this._settingsService.showInventory()}hideWindow(){this.furniController&&(this.furniController.mouseDown=!1),this._settingsService.hideInventory()}hasFigureSetId(t){return this._figureSetIds.indexOf(t)>-1}hasBoundFigureSetFurniture(t){return this._boundFurnitureNames.indexOf(t)>-1}hideAllControllers(){this.furnitureVisible=!1,this.botsVisible=!1,this.petsVisible=!1,this.badgesVisible=!1}get events(){return this._events}get botsController(){return this._botsController}set botsController(t){this._botsController=t}set badgesController(t){this._badgesController=t}get furniController(){return this._furniController}set furniController(t){this._furniController=t}get controller(){return this._controller}set controller(t){this._controller=t}get petsController(){return this._petsController}set petsController(t){this._petsController=t}get tradeController(){return this._tradeController}set tradeController(t){this._tradeController=t}get unseenTracker(){return this._unseenTracker}get roomSession(){return this._roomSession}get furniUnseenCount(){return this._unseenCounts.get(pa.FURNI)}get botUnseenCount(){return this._unseenCounts.get(pa.BOT)}get petUnseenCount(){return this._unseenCounts.get(pa.PET)}get badgeUnseenCount(){return this._unseenCounts.get(pa.BADGE)}get unseenCount(){return this._unseenCount}get botsVisible(){return this._botsVisible}set botsVisible(t){this._botsVisible=t}get furnitureVisible(){return this._furnitureVisible}set furnitureVisible(t){this._furnitureVisible=t}get badgesVisible(){return this._badgesVisible}set badgesVisible(t){this._badgesVisible=t}get petsVisible(){return this._petsVisible}set petsVisible(t){this._petsVisible=t}get tradingVisible(){return this._tradingVisible}set tradingVisible(t){this._tradingVisible=t}get figureSetIds(){return this._figureSetIds}get boundFurnitureNames(){return this._boundFurnitureNames}}return t.\u0275fac=function(e){return new(e||t)(i.kc(m),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();const va=["purchaseClothing"];let ba=(()=>{class t extends en{constructor(t,e,s){super(),this._ngZone=t,this._resolver=e,this.inventoryService=s,this._visible=!1,this._selectedObject=null}registerUpdateEvents(t){t&&super.registerUpdateEvents(t)}unregisterUpdateEvents(t){t&&super.unregisterUpdateEvents(t)}_Str_24748(t){this._selectedObject=t,this._ngZone.run(()=>{this.purchaseClothingContainer.clear();const e=this._resolver.resolveComponentFactory(ga);this._purchaseClothingContainerRef=this.purchaseClothingContainer.createComponent(e),this._purchaseClothingContainerRef.instance.contextWidget=this,this._purchaseClothingContainerRef.instance.open(t.id)})}closeClothing(){this._ngZone.run(()=>this.purchaseClothingContainer.clear())}hide(){this._visible=!1}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(t){this._visible=t}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H),i.Yb(i.m),i.Yb(Sa))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-furniture-context-menu-component"]],viewQuery:function(t,e){if(1&t&&i.bd(va,1,i.Z),2&t){let t;i.Gc(t=i.oc())&&(e.purchaseClothingContainer=t.first)}},features:[i.Hb],decls:2,vars:0,consts:[["purchaseClothing",""]],template:function(t,e){1&t&&i.Zb(0,"template",null,0)},encapsulation:2}),t})();function Ia(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"p",3),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",4),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.cc(),i.cc(),i.dc(6,"div",5),i.dc(7,"div",6),i.dc(8,"p",7),i.Vc(9),i.rc(10,"translate"),i.cc(),i.cc(),i.cc(),i.dc(11,"div",8),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.dc(12,"u"),i.Vc(13),i.rc(14,"translate"),i.cc(),i.cc(),i.dc(15,"div",9),i.dc(16,"div",10),i.nc("click",function(){return i.Kc(t),i.qc().sendRedeem()}),i.dc(17,"p",11),i.Vc(18),i.rc(19,"translate"),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.sc(4,4,"catalog.redeem.dialog.title")),i.Kb(6),i.Wc(i.uc(10,6,"widgets.furniture.credit.redeem.value","value",t.value)),i.Kb(4),i.Wc(i.sc(14,10,"generic.cancel")),i.Kb(5),i.Wc(i.sc(19,12,"catalog.redeem.dialog.button.exchange"))}}let Ra=(()=>{class t extends en{constructor(t){super(),this._ngZone=t,this._objectId=-1,this._value="0",this._visible=!1,this.onRoomWidgetCreditFurniUpdateEvent=this.onRoomWidgetCreditFurniUpdateEvent.bind(this)}registerUpdateEvents(t){t&&(t.addEventListener(Jt.RWCFUE_CREDIT_FURNI_UPDATE,this.onRoomWidgetCreditFurniUpdateEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(Jt.RWCFUE_CREDIT_FURNI_UPDATE,this.onRoomWidgetCreditFurniUpdateEvent),super.unregisterUpdateEvents(t))}onRoomWidgetCreditFurniUpdateEvent(t){t&&(this._objectId=t.objectId,this._ngZone.run(()=>{this._value=t.value.toString(),this._visible=!0}))}sendRedeem(){-1!==this._objectId&&(this.messageListener.processWidgetMessage(new $t($t.RWFCRM_REDEEM,this._objectId)),this.hide())}hide(){this._visible=!1}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(t){this._visible=t}get value(){return this._value}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-furniture-credit-compontent"]],features:[i.Hb],decls:1,vars:1,consts:[["id","kredi-bozdur",3,"bringToTop","draggable",4,"ngIf"],["id","kredi-bozdur",3,"bringToTop","draggable"],["id","coreloha-drag",1,"drag-handler"],[1,"cha-baslik"],[1,"old-kapat",3,"click"],[1,"chabox"],[1,"kb-txtbox"],[1,"cha-text"],[1,"mobi-buy-iptal-et",3,"click"],[1,"mobi-buy-onayla"],[1,"mb-islem-onayla-box",3,"click"],[1,"mb-tamam-text"]],template:function(t,e){1&t&&i.Tc(0,Ia,20,14,"div",0),2&t&&i.xc("ngIf",e.visible)},directives:[p.n,Tr,Lr],pipes:[ln],encapsulation:2}),t})();var Ta=s("OGjZ");function Oa(t,e){1&t&&i.Zb(0,"div",18)}function ya(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.Tc(1,Oa,1,0,"div",2),i.dc(2,"div",3),i.dc(3,"p",4),i.Vc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"div",5),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.cc(),i.cc(),i.dc(7,"div",6),i.dc(8,"p",7),i.Vc(9),i.rc(10,"translate"),i.cc(),i.dc(11,"div",8),i.dc(12,"input",9),i.nc("input",function(e){return i.Kc(t),i.qc().slideToHeight(e.target.value)}),i.cc(),i.dc(13,"input",10),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().height=e}),i.cc(),i.cc(),i.dc(14,"div",11),i.dc(15,"button",12),i.nc("click",function(){return i.Kc(t),i.qc().placeAboveStack()}),i.Zb(16,"div",13),i.dc(17,"div",14),i.dc(18,"p",15),i.Vc(19),i.rc(20,"translate"),i.cc(),i.cc(),i.Zb(21,"div",16),i.cc(),i.dc(22,"button",17),i.nc("click",function(){return i.Kc(t),i.qc().placeAtFloor()}),i.Zb(23,"div",13),i.dc(24,"div",14),i.dc(25,"p",15),i.Vc(26),i.rc(27,"translate"),i.cc(),i.cc(),i.Zb(28,"div",16),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(1),i.xc("ngIf",t.isLoading),i.Kb(3),i.Wc(i.sc(5,11,"widget.custom.stack.height.title")),i.Kb(5),i.Wc(i.sc(10,13,"widget.custom.stack.height.text")),i.Kb(3),i.yc("value",t.height),i.xc("min",t.minHeight)("max",t.maxHeight),i.Kb(1),i.xc("ngModel",t.height)("min",t.minHeight)("max",t.maxHeight),i.Kb(6),i.Wc(i.sc(20,15,"furniture.above.stack")),i.Kb(7),i.Wc(i.sc(27,17,"furniture.floor.level"))}}let Ca=(()=>{class t extends en{constructor(t){super(),this._ngZone=t,this._visible=!1,this._furniId=-1,this._height=0,this._saveTimeout=null}open(t,e){this._ngZone.run(()=>{this._furniId=t,this._height=e,this._visible=!0,this.setHeight(e,!0)})}update(t,e){this._ngZone.run(()=>this._furniId===t&&this.setHeight(e,!0))}hide(){this._visible=!1,this._furniId=-1,this._height=0}setHeight(e,s=!1){e=Math.abs(e),s||e>t.MAX_HEIGHT&&(e=t.MAX_HEIGHT),this._height=parseFloat(e.toFixed(2)),s||this.scheduleUpdate(100*this._height)}scheduleUpdate(t){this._saveTimeout&&(clearTimeout(this._saveTimeout),this._saveTimeout=null),this._saveTimeout=setTimeout(()=>this.sendUpdate(t),5)}sendUpdate(t){this.widgetHandler.container.connection.send(new Ta.a(this._furniId,~~t))}placeAboveStack(){this.sendUpdate(-100)}placeAtFloor(){this.sendUpdate(0)}slideToHeight(t){this.height=t}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(t){this._visible=t}get furniId(){return this._furniId}get height(){return this._height}set height(t){this.setHeight(t,!1)}get minHeight(){return 0}get maxHeight(){return t.MAX_HEIGHT}}return t.MAX_HEIGHT=40,t.MAX_RANGE_HEIGHT=10,t.STEP_VALUE=.01,t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-furniture-customstackheight-component"]],features:[i.Hb],decls:1,vars:1,consts:[["dragHandle",".stackhead","class","oldstackbox",3,"bringToTop","draggable",4,"ngIf"],["dragHandle",".stackhead",1,"oldstackbox",3,"bringToTop","draggable"],["class","card-loading-overlay",4,"ngIf"],[1,"stackhead"],[1,"stack-title"],[1,"stack-close",3,"click"],[1,"stack-body"],[1,"stack-desc"],[1,"stack-deger-box"],["type","range",1,"hayaa",3,"value","min","max","input"],["name","heightInput","type","number",1,"stack-deger",3,"ngModel","min","max","ngModelChange"],[1,"stack-butbox"],[1,"stack-button",3,"click"],[1,"b-left"],[1,"b-middle"],[1,"stackbutton-txt"],[1,"b-right"],[1,"stack-button",2,"float","right",3,"click"],[1,"card-loading-overlay"]],template:function(t,e){1&t&&i.Tc(0,ya,29,19,"div",0),2&t&&i.xc("ngIf",e.visible)},directives:[p.n,Tr,Lr,rr.p,rr.b,rr.l,rr.n],pipes:[ln],encapsulation:2}),t})();function Aa(t,e){if(1&t){const t=i.ec();i.dc(0,"div",23),i.nc("click",function(){i.Kc(t);const s=e.index;return i.qc(3).selectPreset(s+1)}),i.dc(1,"p",24),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()}if(2&t){const t=e.index;i.Kb(2),i.Wc(i.sc(3,1,"widget.dimmer.tab."+(t+1)))}}const Ma=function(t){return{"rds_color-select-active":t}},wa=function(t){return{"background-color":t}};function Da(t,e){if(1&t){const t=i.ec();i.dc(0,"div",25),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc(3).selectColor(s)}),i.cc()}if(2&t){const t=e.$implicit,s=e.index,n=i.qc(3);i.xc("ngClass",i.Bc(2,Ma,n.getSelectedPreset().color==t))("ngStyle",i.Bc(4,wa,n.htmlColors[s]))}}function Na(t,e){if(1&t){const t=i.ec();i.bc(0),i.dc(1,"div",7),i.dc(2,"div",8),i.Tc(3,Aa,4,3,"div",9),i.cc(),i.dc(4,"div",10),i.dc(5,"div",11),i.Tc(6,Da,1,6,"div",12),i.cc(),i.dc(7,"div",13),i.dc(8,"ngx-slider",14),i.nc("valueChange",function(){return i.Kc(t),i.qc(2).onSliderChange()})("valueChange",function(e){return i.Kc(t),i.qc(2).getSelectedPreset().intensity=e}),i.cc(),i.cc(),i.dc(9,"label",15),i.dc(10,"p",16),i.Vc(11),i.rc(12,"translate"),i.cc(),i.dc(13,"input",17),i.nc("change",function(e){return i.Kc(t),i.qc(2).changeCheckbox(e)}),i.cc(),i.Zb(14,"span",18),i.cc(),i.dc(15,"p",19),i.Vc(16),i.rc(17,"translate"),i.cc(),i.cc(),i.dc(18,"div",20),i.nc("click",function(){return i.Kc(t),i.qc(2).handleButton("on_off")}),i.dc(19,"p",21),i.Vc(20),i.rc(21,"translate"),i.cc(),i.cc(),i.dc(22,"div",22),i.nc("click",function(){return i.Kc(t),i.qc(2).handleButton("apply")}),i.dc(23,"p",21),i.Vc(24),i.rc(25,"translate"),i.cc(),i.cc(),i.cc(),i.ac()}if(2&t){const t=i.qc(2);i.Kb(3),i.xc("ngForOf",t.presets),i.Kb(3),i.xc("ngForOf",t.availableColors),i.Kb(2),i.xc("options",t.delaySliderOptions)("value",t.getSelectedPreset().intensity),i.Kb(3),i.Wc(i.sc(12,9,"widget.dimmer.type.checkbox")),i.Kb(2),i.xc("ngModel",t.getSelectedPreset().backgroundOnly),i.Kb(3),i.Xc("",i.sc(17,11,"widget.dimmer.info")," "),i.Kb(4),i.Wc(i.sc(21,13,t.isOn?"widget.dimmer.button.off":"widget.dimmer.button.on")),i.Kb(4),i.Wc(i.sc(25,15,"widget.dimmer.button.apply"))}}function Ua(t,e){if(1&t){const t=i.ec();i.bc(0),i.dc(1,"div",26),i.dc(2,"div",27),i.Zb(3,"div",28),i.dc(4,"p",29),i.Vc(5),i.rc(6,"translate"),i.cc(),i.cc(),i.dc(7,"div",30),i.nc("click",function(){return i.Kc(t),i.qc(2).handleButton("on_off")}),i.dc(8,"p",21),i.Vc(9),i.rc(10,"translate"),i.cc(),i.cc(),i.cc(),i.ac()}if(2&t){const t=i.qc(2);i.Kb(5),i.Wc(i.sc(6,2,"widget.dimmer.info.off")),i.Kb(4),i.Wc(i.sc(10,4,t.isOn?"widget.dimmer.button.off":"widget.dimmer.button.on"))}}function xa(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"p",3),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",4),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.cc(),i.cc(),i.dc(6,"div",5),i.Tc(7,Na,26,17,"ng-container",6),i.Tc(8,Ua,11,6,"ng-container",6),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.sc(4,3,"widget.dimmer.title")),i.Kb(4),i.xc("ngIf",t.isOn),i.Kb(1),i.xc("ngIf",!t.isOn)}}let La=(()=>{class t extends en{constructor(t){super(),this._ngZone=t,this._visible=!1,this._dimmerState=0,this._effectId=0,this._color=16777215,this._brightness=255,this.presets=[],this.selectedPresetId=0,this.isOn=!1,this.availableColors=[7665141,21495,15161822,15353138,15923281,8581961,0],this.htmlColors=["#74F5F5","#0053F7","#E759DE","#EA4532","#F2F851","#82F349","#000000"],this.onDimmerPresetsEvent=this.onDimmerPresetsEvent.bind(this),this.onDimmerStateEvent=this.onDimmerStateEvent.bind(this)}registerUpdateEvents(t){t&&(t.addEventListener(ae.RWDUE_PRESETS,this.onDimmerPresetsEvent),t.addEventListener(ne.RWDSUE_DIMMER_STATE,this.onDimmerStateEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(ae.RWDUE_PRESETS,this.onDimmerPresetsEvent),t.removeEventListener(ne.RWDSUE_DIMMER_STATE,this.onDimmerStateEvent),super.unregisterUpdateEvents(t))}getSelectedPreset(){return this.presets[this.selectedPresetId-1]}selectPreset(t){this.selectedPresetId=t}selectColor(t){this.getSelectedPreset().color=t,this.previewSettings()}onDimmerPresetsEvent(t){this.presets=t.presets.map(t=>({color:t.color,id:t.id,intensity:t._Str_4272,backgroundOnly:2==t.type})),this.selectedPresetId=t.selectedPresetId,this._ngZone.run(()=>{this._visible=!0})}onDimmerStateEvent(t){this._ngZone.run(()=>{this.isOn=1==t.state,this._effectId=t._Str_6815,this._color=t.color,this._brightness=t._Str_5123}),this.messageListener.processWidgetMessage(new ce(this._color,this._brightness,2===this._effectId))}get handler(){return this.widgetHandler}hide(){this._visible=!1}get visible(){return this._visible&&this.selectedPresetId>0&&this.presets.length>0}set visible(t){this._visible=t}onSliderChange(){this.previewSettings()}changeCheckbox(t){this.getSelectedPreset().backgroundOnly=t.target.checked,this.previewSettings()}previewSettings(){if(!this.messageListener)return;const t=this.getSelectedPreset();this.messageListener.processWidgetMessage(new ce(t.color,t.intensity,t.backgroundOnly))}handleButton(t){switch(t){case"on_off":this.toggleState();break;case"apply":this.apply()}}toggleState(){this.messageListener&&this.messageListener.processWidgetMessage(new oe)}apply(){if(!this.isOn||!this.messageListener||null==this.presets||0==this.presets.length)return;const t=this.getSelectedPreset();t&&this.messageListener.processWidgetMessage(new he(t.id,t.backgroundOnly?2:1,t.color,t.intensity,!0))}get delaySliderOptions(){return{floor:75,ceil:255,step:1,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-furniture-dimmer-component"]],features:[i.Hb],decls:1,vars:1,consts:[["id","room-dimmer-settings",3,"bringToTop","draggable",4,"ngIf"],["id","room-dimmer-settings",3,"bringToTop","draggable"],["id","rdshead",1,"drag-handler"],[1,"rds-baslik"],[1,"old-kapat",3,"click"],[1,"roomdimmer-body"],[4,"ngIf"],[1,"rds-body"],[1,"rds-headmenu"],["class","rdsmenu",3,"click",4,"ngFor","ngForOf"],[1,"rds-box"],[1,"rds-colorbox"],["class","rds_color-select",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[1,"dimmer-slider"],[3,"options","value","valueChange"],[1,"rds-select-container"],[1,"rsd-ctxt"],["type","checkbox",3,"ngModel","change"],[1,"checkmarkrsd"],[1,"rds-infotxt"],[1,"rds-button",2,"margin","6px 0px",3,"click"],[1,"rdsbutton-txt"],[1,"rds-button",2,"right","0",3,"click"],[1,"rdsmenu",3,"click"],[1,"rds-txt"],[1,"rds_color-select",3,"ngClass","ngStyle","click"],[1,"rds-body2"],[1,"rsd-kapali"],[1,"rsdbg"],[1,"rsd-actxt"],[1,"rds-button",2,"right","0","margin","12px 0px","position","relative","float","right",3,"click"]],template:function(t,e){1&t&&i.Tc(0,xa,9,5,"div",0),2&t&&i.xc("ngIf",e.visible)},directives:[p.n,Tr,Lr,p.m,sa.b,rr.a,rr.l,rr.n,p.l,p.o],pipes:[ln],encapsulation:2}),t})();function Pa(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"h6",3),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",4),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.Zb(6,"i",5),i.cc(),i.cc(),i.dc(7,"div",6),i.dc(8,"div",7),i.dc(9,"p"),i.Vc(10),i.rc(11,"translate"),i.cc(),i.cc(),i.cc(),i.dc(12,"div",8),i.dc(13,"button",9),i.nc("click",function(){return i.Kc(t),i.qc().handleButton("cancel")}),i.Vc(14),i.rc(15,"translate"),i.cc(),i.dc(16,"button",10),i.nc("click",function(){return i.Kc(t),i.qc().handleButton("confirm")}),i.Vc(17),i.rc(18,"translate"),i.cc(),i.cc(),i.cc()}2&t&&(i.Kb(3),i.Wc(i.sc(4,4,"friend.furniture.confirm.lock.caption")),i.Kb(7),i.Wc(i.sc(11,6,"friend.furniture.confirm.lock.subtitle")),i.Kb(4),i.Wc(i.sc(15,8,"friend.furniture.confirm.lock.button.cancel")),i.Kb(3),i.Wc(i.sc(18,10,"friend.furniture.confirm.lock.button.confirm")))}let Fa=(()=>{class t extends en{constructor(t){super(),this._ngZone=t,this._visible=!1,this._furniId=-1}open(t,e){this._visible&&-1!=this._furniId&&this.sendStart(this._furniId,!1),this._ngZone.run(()=>{this._furniId=t,this._visible=!0})}handleButton(t){switch(t){case"confirm":this.sendStart(this._furniId,!0),this.hide();break;case"cancel":this.sendStart(this._furniId,!1),this.hide()}}sendStart(t,e){_.a.instance.communication.connection.send(new xt.a(t,e))}hide(){this._visible=!1,this._furniId=-1}get visible(){return this._visible}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-purchasable-clothing card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-purchasable-clothing","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-6"],[1,"col-4","d-flex","align-items-center","justify-content-center"],[1,"d-flex","justify-content-between","align-items-center","p-3"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&i.Tc(0,Pa,19,12,"div",0),2&t&&i.xc("ngIf",e.visible)},directives:[p.n,Tr,Lr],pipes:[ln],encapsulation:2}),t})(),ka=(()=>{class t{}return t._Str_13451=0,t._Str_17498=1,t._Str_18746=2,t._Str_15230=3,t._Str_15778=4,t})();const Va=function(t){return{backgroundImage:t}};function Ba(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"div",3),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.cc(),i.dc(3,"div",4),i.dc(4,"div",5),i.Zb(5,"div",6),i.cc(),i.dc(6,"div",5),i.Zb(7,"div",6),i.cc(),i.cc(),i.dc(8,"p",7),i.Vc(9),i.rc(10,"translate"),i.cc(),i.dc(11,"p",8),i.Vc(12),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.xc("ngStyle",i.Bc(11,Va,"url("+t.image+")")),i.Kb(5),i.xc("figure",t.firstFigure)("direction",2),i.Kb(2),i.xc("figure",t.secondFigure)("direction",4),i.Kb(2),i.Wc(i.sc(10,9,"lovelock.engraving.caption")),i.Kb(3),i.Zc("",t.firstName," | ",t.secondName," | ",t.engravedDate,"")}}let Wa=(()=>{class t extends en{constructor(t){super(),this._ngZone=t,this.engravingView=null,this.visible=!1,this.firstFigure=null,this.firstName=null,this.secondFigure=null,this.secondName=null,this.engravedDate=null}open(t,e,s){switch(e){case ka._Str_13451:this.engravingView="engraving";break;case ka._Str_17498:case ka._Str_18746:break;case ka._Str_15230:this.engravingView="wildwest";break;case ka._Str_15778:this.engravingView="hween14"}this.engravingView&&this._ngZone.run(()=>{this.firstName=s.getValue(1),this.secondName=s.getValue(2),this.firstFigure=s.getValue(3),this.secondFigure=s.getValue(4),this.engravedDate=s.getValue(5),this.visible=!0})}hide(){this.visible=!1}get image(){return _.a.instance.getConfiguration("furni.extras.url").toString().replace("%image%","loveLock_"+this.engravingView)}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-friends-engraving",3,"bringToTop","draggable","ngStyle",4,"ngIf"],[1,"nitro-furniture-friends-engraving",3,"bringToTop","draggable","ngStyle"],[1,"drag-handler","d-flex","flex-column","small","h-100"],[1,"friend-close","position-absolute",3,"click"],[1,"row","justify-content-center"],[1,"col-2","d-flex","justify-content-center"],["nitro-avatar-image","",3,"figure","direction"],[1,"w-100","text-center"],[1,"w-100","text-center","mt-auto"]],template:function(t,e){1&t&&i.Tc(0,Ba,13,13,"div",0),2&t&&i.xc("ngIf",e.visible)},directives:[p.n,Tr,Lr,p.o,_a],pipes:[ln],encapsulation:2}),t})(),Ka=(()=>{class t{}return t.DEFAULT=1,t._Str_3639=2,t._Str_3683=3,t._Str_3432=4,t._Str_12351=5,t._Str_5186=6,t._Str_21911=7,t._Str_9125=8,t._Str_5922=9,t._Str_18231=10,t._Str_4255=11,t._Str_19933=12,t._Str_7696=13,t._Str_7297=14,t._Str_7954=15,t._Str_6096=16,t._Str_12454=17,t._Str_19144=18,t.MONSTERPLANT_SEED=19,t._Str_6915=20,t._Str_8726=21,t._Str_9449=22,t._Str_12534=23,t})();var Ga=s("9NDz"),Ha=s("asXX"),ja=s("Byou"),za=s("wGhc"),Ya=s("x7td"),qa=s("qLWH"),Za=s("SS1c"),Xa=s("t0/d"),Qa=s("sxwv"),Ja=s("u5n9"),$a=s("Zq74"),to=s("ReTp"),eo=s("j7DG"),so=s("U4HJ"),io=s("Ftck"),no=s("liWC"),ro=s("oKt9"),ao=s("rQEl"),oo=s("BG3s"),co=s("2H63"),ho=s("8ZkN"),lo=s("Z50b"),uo=s("+gkD"),_o=s("yt9a"),go=s("3CL9"),mo=s("BgaL"),po=s("NjFb");class fo{constructor(t){this._children=t}get children(){return this._children}get icon(){return-1}get localization(){return""}get offerIds(){return[]}get pageId(){return-1}get pageName(){return""}get visible(){return!0}}var Eo=s("Fwdp"),So=s("z20u");let vo=(()=>{class t{constructor(t,e){this._catalogService=t,this._ngZone=e,this.activePage=null,this.roomPreviewerVisible=!0}getText(t=0){let e=this.activePage.localization.texts[t]||"";return e&&e.length&&(e=e.replace(/\r\n|\r|\n/g,"<br />")),e||""}getImage(t=0){const e=this.activePage.localization.images&&this.activePage.localization.images[t];if(!e||!e.length)return null;let s=_.a.instance.getConfiguration("catalog.asset.image.url");return s=s.replace("%name%",e),s}getCurrencyUrl(t){return _.a.instance.getConfiguration("currency.asset.icon.url").replace("%type%",t.toString())}getProductFurniData(t){return t?this._catalogService.getFurnitureDataForProductOffer(t):null}offerImage(t){if(!t)return"";const e=t.products[0];if(!e)return"";switch(e.productType.toUpperCase()){case So.a.BADGE:return _.a.instance.sessionDataManager.getBadgeUrl(e.extraParam);case So.a.FLOOR:return _.a.instance.roomEngine.getFurnitureFloorIconUrl(e.furniClassId);case So.a.WALL:return _.a.instance.roomEngine.getFurnitureWallIconUrl(e.furniClassId,e.extraParam)}return""}hasMultipleProducts(t){return t.products.length>1}offerName(t){const e=this._catalogService.getProductDataForLocalization(t.localizationId);return e?e.name:t.localizationId}getFirstProduct(t){return t&&t.products[0]||null}get headerText(){return this._catalogService.catalogRoot.localization||null}get offers(){return this._catalogService.activePage.offers}get activeOffer(){return this._catalogService.component&&this._catalogService.component.activeOffer||null}get roomPreviewer(){return this._catalogService.component&&this._catalogService.component.roomPreviewer||null}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Qo),i.Yb(i.H))},t.\u0275dir=i.Tb({type:t}),t})();function bo(t,e){if(1&t&&i.Zb(0,"img",10),2&t){const t=i.qc(2);i.xc("src",t.getImage(1),i.Mc)}}function Io(t,e){if(1&t&&(i.dc(0,"div",8),i.Tc(1,bo,1,1,"img",9),i.cc()),2&t){const t=i.qc();i.Kb(1),i.xc("ngIf",t.getImage(1))}}function Ro(t,e){if(1&t&&(i.dc(0,"div",15),i.dc(1,"div"),i.Zb(2,"div",16),i.rc(3,"uniqueNumber"),i.Vc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"div"),i.Zb(7,"div",16),i.rc(8,"uniqueNumber"),i.Vc(9),i.rc(10,"translate"),i.cc(),i.cc()),2&t){const t=i.qc(2);i.Kb(2),i.xc("innerHtml",i.sc(3,4,t.activeOffer.products[0].uniqueLimitedItemsLeft),i.Lc),i.Kb(2),i.Xc(" ",i.sc(5,6,"unique.items.left")," "),i.Kb(3),i.xc("innerHtml",i.sc(8,8,t.activeOffer.products[0].uniqueLimitedSeriesSize),i.Lc),i.Kb(2),i.Xc(" ",i.sc(10,10,"unique.items.number.sold")," ")}}function To(t,e){if(1&t&&i.Zb(0,"div",17),2&t){const t=i.qc(2);i.xc("roomPreviewer",t.roomPreviewer)("width",360)("height",240)}}function Oo(t,e){if(1&t&&(i.dc(0,"div",18),i.Zb(1,"img",10),i.cc()),2&t){const t=i.qc(2);i.Kb(1),i.xc("src",t.offerImage(t.activeOffer),i.Mc)}}function yo(t,e){if(1&t&&(i.dc(0,"div"),i.dc(1,"div",11),i.Vc(2),i.cc(),i.Tc(3,Ro,11,12,"div",12),i.Tc(4,To,1,3,"div",13),i.Tc(5,Oo,2,1,"div",14),i.cc()),2&t){const t=i.qc();i.Kb(2),i.Wc(t.offerName(t.activeOffer)),i.Kb(1),i.xc("ngIf",t.activeOffer.products[0].uniqueLimitedItem),i.Kb(1),i.xc("ngIf",t.roomPreviewerVisible),i.Kb(1),i.xc("ngIf",!t.roomPreviewerVisible)}}function Co(t,e){if(1&t&&(i.dc(0,"div",26),i.Vc(1),i.cc()),2&t){const t=i.qc().$implicit,e=i.qc();i.Kb(1),i.Xc("x",e.offerCount(t),"")}}function Ao(t,e){if(1&t&&(i.dc(0,"div",27),i.dc(1,"p",28),i.Vc(2),i.cc(),i.dc(3,"div",29),i.Zb(4,"i",30),i.cc(),i.cc()),2&t){const t=i.qc().$implicit;i.Kb(2),i.Wc(t.priceCredits)}}function Mo(t,e){if(1&t&&(i.dc(0,"div",31),i.dc(1,"p",28),i.Vc(2),i.cc(),i.dc(3,"div",29),i.Zb(4,"i"),i.cc(),i.cc()),2&t){const t=i.qc().$implicit,e=i.qc();i.Kb(2),i.Wc(e.offerCount(t)),i.Kb(2),i.Nb("icon icon-currency-",t.priceActivityPointsType," scale-0-75")}}function wo(t,e){if(1&t&&(i.dc(0,"div",31),i.dc(1,"p",28),i.Vc(2),i.cc(),i.dc(3,"div",29),i.Zb(4,"i"),i.cc(),i.cc()),2&t){const t=i.qc().$implicit;i.Kb(2),i.Wc(t.priceActivityPoints),i.Kb(2),i.Nb("icon icon-currency-",t.priceActivityPointsType," scale-0-75")}}function Do(t,e){if(1&t&&(i.Zb(0,"div",32),i.rc(1,"uniqueNumber")),2&t){const t=i.qc().$implicit;i.xc("innerHtml",i.sc(1,1,t.products[0].uniqueLimitedSeriesSize),i.Lc)}}const No=function(t,e,s){return{aaa:t,unique:e,"sold-out":s}},Uo=function(t){return{"background-image":t}};function xo(t,e){if(1&t){const t=i.ec();i.dc(0,"div",19),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().selectOffer(s)}),i.dc(1,"div",20),i.Tc(2,Co,2,1,"div",21),i.Zb(3,"div",22),i.Tc(4,Ao,5,1,"div",23),i.Tc(5,Mo,5,4,"div",24),i.Tc(6,wo,5,4,"div",24),i.Tc(7,Do,2,3,"div",25),i.cc(),i.cc()}if(2&t){const t=e.$implicit,s=i.qc();i.Kb(1),i.xc("ngClass",i.Dc(7,No,s.activeOffer===t,t.products[0].uniqueLimitedItem,t.products[0].uniqueLimitedItem&&!t.products[0].uniqueLimitedItemsLeft)),i.Kb(1),i.xc("ngIf",s.offerCount(t)>1),i.Kb(1),i.xc("ngStyle",i.Bc(11,Uo,"url("+s.offerImage(t)+")")),i.Kb(1),i.xc("ngIf",t.priceCredits),i.Kb(1),i.xc("ngIf",s.offerCount(t)>1),i.Kb(1),i.xc("ngIf",t.priceActivityPoints),i.Kb(1),i.xc("ngIf",t.products[0].uniqueLimitedItem)}}function Lo(t,e){if(1&t&&(i.dc(0,"div"),i.dc(1,"div",33),i.Zb(2,"div",34),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(2),i.xc("activePage",t.activePage)("activeOffer",t.activeOffer)("quantityEnabled",t.activeOffer.bundlePurchaseAllowed)}}let Po=(()=>{class t extends vo{ngOnInit(){a(function(){a(".mobi-menuview").click(function(){a(".mobi-menuview").removeClass("ctlgmactive"),a(this).addClass("ctlgmactive")})})}selectOffer(t){if(!t)return;const e=t.products[0];e&&(this.roomPreviewerVisible=-1==[me.BADGE].indexOf(e.productType),this._catalogService.component&&this._catalogService.component.selectOffer(t))}offerCount(t){if(!this.hasMultipleProducts(t)){const e=this.getFirstProduct(t);if(e)return e.productCount}return 1}}return t.CODE="default_3x3",t.\u0275fac=function(e){return Fo(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:11,vars:7,consts:[[1,"d-flex","flex-column","justify-content-center","align-items-center","position-relative","w-100","flex-grow-1",2,"height","240px"],["class","magazaresim",4,"ngIf"],[4,"ngIf"],[1,"catalog-mobibox"],[1,"ctlg_mobi-liste"],["class","mview-height magazaltd",3,"click",4,"ngFor","ngForOf"],[1,"urun-secilmemis"],[1,"us-txt"],[1,"magazaresim"],["image-placeholder","",3,"src",4,"ngIf"],["image-placeholder","",3,"src"],[1,"select-mobi-name","offer-name"],["class","unique-counter-complete position-absolute","style","z-index:1;",4,"ngIf"],["class","mobi-display-box room-preview","nitro-room-preview-component","","style","background-color: black !important;position: relative;z-index: 1;",3,"roomPreviewer","width","height",4,"ngIf"],["class","d-flex justify-content-center align-items-center h-100 w-100",4,"ngIf"],[1,"unique-counter-complete","position-absolute",2,"z-index","1"],[3,"innerHtml"],["nitro-room-preview-component","",1,"mobi-display-box","room-preview",2,"background-color","black !important","position","relative","z-index","1",3,"roomPreviewer","width","height"],[1,"d-flex","justify-content-center","align-items-center","h-100","w-100"],[1,"mview-height","magazaltd",3,"click"],[1,"mobi-menuview",3,"ngClass"],["class","multiple-purchase-indicators count",4,"ngIf"],[1,"mview-box","detail-image",3,"ngStyle"],["class","first-price-box",4,"ngIf"],["class","second-price-box",4,"ngIf"],["class","position-absolute unique-counter",3,"innerHtml",4,"ngIf"],[1,"multiple-purchase-indicators","count"],[1,"first-price-box"],[1,"mobi-price-caption"],[1,"mobi-price-ico"],[1,"icon","icon-currency--1","scale-0-75"],[1,"second-price-box"],[1,"position-absolute","unique-counter",3,"innerHtml"],[1,"mobi-purchase-box"],["nitro-catalog-purchase-component","",3,"activePage","activeOffer","quantityEnabled"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Tc(1,Io,2,1,"div",1),i.Tc(2,yo,6,4,"div",2),i.cc(),i.dc(3,"div",3),i.dc(4,"div",4),i.Tc(5,xo,8,13,"div",5),i.cc(),i.cc(),i.Tc(6,Lo,3,3,"div",2),i.dc(7,"div",6),i.dc(8,"p",7),i.Vc(9),i.rc(10,"translate"),i.cc(),i.cc()),2&t&&(i.Kb(1),i.xc("ngIf",!e.activeOffer),i.Kb(1),i.xc("ngIf",e.activeOffer),i.Kb(3),i.xc("ngForOf",e.offers),i.Kb(1),i.xc("ngIf",e.activeOffer),i.Kb(3),i.Wc(i.sc(10,5,"catalog.purchase.select.info")))},encapsulation:2}),t})();const Fo=i.fc(Po);function ko(t,e){if(1&t&&i.Zb(0,"img",8),2&t){const t=i.qc(2);i.xc("src",t.getImage(1),i.Mc)}}function Vo(t,e){if(1&t&&(i.dc(0,"div",6),i.Tc(1,ko,1,1,"img",7),i.cc()),2&t){const t=i.qc();i.Kb(1),i.xc("ngIf",t.getImage(1))}}function Bo(t,e){if(1&t&&i.Zb(0,"div",12),2&t){const t=i.qc(2);i.xc("roomPreviewer",t.roomPreviewer)("width",360)("height",240)}}function Wo(t,e){if(1&t&&(i.dc(0,"div",13),i.Zb(1,"img",8),i.cc()),2&t){const t=i.qc(2);i.Kb(1),i.xc("src",t.offerImage(t.activeOffer),i.Mc)}}function Ko(t,e){if(1&t&&(i.dc(0,"div"),i.dc(1,"div",9),i.Vc(2),i.cc(),i.Tc(3,Bo,1,3,"div",10),i.Tc(4,Wo,2,1,"div",11),i.cc()),2&t){const t=i.qc();i.Kb(2),i.Wc(t.offerName(t.activeOffer)),i.Kb(1),i.xc("ngIf",t.roomPreviewerVisible),i.Kb(1),i.xc("ngIf",!t.roomPreviewerVisible)}}const Go=function(t){return{"background-image":t}};function Ho(t,e){if(1&t){const t=i.ec();i.dc(0,"div",14),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().requestOfferData(s)}),i.dc(1,"div",15),i.Zb(2,"div",16),i.cc(),i.cc()}if(2&t){const t=e.$implicit,s=i.qc();i.Kb(2),i.xc("ngStyle",i.Bc(1,Go,"url("+s.searchItemImage(t)+")"))}}function jo(t,e){if(1&t&&(i.dc(0,"div"),i.dc(1,"div",17),i.Zb(2,"div",18),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(2),i.xc("activePage",t.activePage)("activeOffer",t.activeOffer)("quantityEnabled",t.activeOffer.bundlePurchaseAllowed)}}let zo=(()=>{class t extends Po{requestOfferData(t){this._catalogService.requestOfferData(t.purchaseOfferId)}searchItemImage(t){return t?this._catalogService.getFurnitureDataIconUrl(t):null}get searchItems(){return this._catalogService.activePage instanceof qo?this._catalogService.activePage.furni:[]}}return t.CODE="search_results",t.\u0275fac=function(e){return Yo(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:7,vars:4,consts:[[1,"d-flex","flex-column","justify-content-center","align-items-center","position-relative","w-100","flex-grow-1",2,"height","240px"],["class","magazaresim",4,"ngIf"],[4,"ngIf"],[1,"catalog-mobibox"],[1,"ctlg_mobi-liste"],["class","mview-height magazaltd",3,"click",4,"ngFor","ngForOf"],[1,"magazaresim"],["image-placeholder","",3,"src",4,"ngIf"],["image-placeholder","",3,"src"],[1,"select-mobi-name","offer-name"],["class","mobi-display-box room-preview","nitro-room-preview-component","","style","background-color: black !important;position: relative;z-index: 1;",3,"roomPreviewer","width","height",4,"ngIf"],["class","d-flex justify-content-center align-items-center h-100 w-100",4,"ngIf"],["nitro-room-preview-component","",1,"mobi-display-box","room-preview",2,"background-color","black !important","position","relative","z-index","1",3,"roomPreviewer","width","height"],[1,"d-flex","justify-content-center","align-items-center","h-100","w-100"],[1,"mview-height","magazaltd",3,"click"],[1,"mobi-menuview"],[1,"mview-box","detail-image",3,"ngStyle"],[1,"mobi-purchase-box"],["nitro-catalog-purchase-component","",3,"activePage","activeOffer","quantityEnabled"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Tc(1,Vo,2,1,"div",1),i.Tc(2,Ko,5,3,"div",2),i.cc(),i.dc(3,"div",3),i.dc(4,"div",4),i.Tc(5,Ho,3,3,"div",5),i.cc(),i.cc(),i.Tc(6,jo,3,3,"div",2)),2&t&&(i.Kb(1),i.xc("ngIf",!e.activeOffer),i.Kb(1),i.xc("ngIf",e.activeOffer),i.Kb(3),i.xc("ngForOf",e.searchItems),i.Kb(1),i.xc("ngIf",e.activeOffer))},encapsulation:2}),t})();const Yo=i.fc(zo);class qo{constructor(t){this._furni=null,this._offer=null,this._furni=t}get searchOffer(){return this._offer}selectSearchResult(t,e){e&&(this._offer=e.offer)}get acceptSeasonCurrencyAsCredits(){return!1}get catalogType(){return zo.CODE}get frontPageItems(){return[]}get layoutCode(){return zo.CODE}get localization(){return{images:[],texts:[]}}get offerId(){return null}get offers(){return[]}get furni(){return this._furni}get pageId(){return-1}}class Zo{constructor(t){if(this._isEnabled=!1,this._price=null,this._stuffTypes=null,this._boxTypes=null,this._ribbonTypes=null,this._defaultStuffTypes=null,!t)return;const e=t.getParser();e&&(this._isEnabled=e.isEnabled,this._price=e.price,this._boxTypes=e.boxTypes,this._ribbonTypes=e.ribbonTypes,this._stuffTypes=e.giftWrappers,this._defaultStuffTypes=e.giftFurnis)}get isEnabled(){return this._isEnabled}get price(){return this._price}get stuffTypes(){return this._stuffTypes}get boxTypes(){return this._boxTypes}get ribbonTypes(){return this._ribbonTypes}get defaultStuffTypes(){return this._defaultStuffTypes}}class Xo{}let Qo=(()=>{class t{constructor(t,e,s,i){this._settingsService=t,this._notificationService=e,this._soundService=s,this._ngZone=i,this._messages=[],this._component=null,this._giftConfiguratorComponent=null,this._catalogMode=-1,this._catalogRoot=null,this._activePage=null,this._clubGiftsParser=null,this._activePageData=null,this._manuallyCollapsed=[],this._isLoading=!1,this._purse=new Xo,this._clubOffers=[],this._vipTemplate=null,this._groupFurniTemplate=null,this._loaded=!1,this._giftWrappingConfiguration=null,this._offersToRoots=null,this.registerMessages()}ngOnDestroy(){this.unregisterMessages(),this._vipTemplate=null,this._groupFurniTemplate=null}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new Ga.a(this.onCatalogClubEvent.bind(this)),new qa.a(this.onCatalogModeEvent.bind(this)),new Za.a(this.onCatalogPageEvent.bind(this)),new Xa.a(this.onCatalogPagesEvent.bind(this)),new Qa.a(this.onCatalogPurchaseEvent.bind(this)),new Ja.a(this.onCatalogPurchaseFailedEvent.bind(this)),new $a.a(this.onCatalogPurchaseUnavailableEvent.bind(this)),new so.a(this.onCatalogSearchEvent.bind(this)),new io.a(this.onCatalogSoldOutEvent.bind(this)),new no.a(this.onCatalogUpdatedEvent.bind(this)),new Ya.a(this.onCatalogGroupsEvent.bind(this)),new ro.a(this.onUserSubscriptionEvent.bind(this)),new ro.a(this.onUserSubscriptionEvent.bind(this)),new ja.a(this.onGiftConfigurationEvent.bind(this)),new za.a(this.onGiftUsernameUnavailableEvent.bind(this)),new Ha.a(this.onCatalogClubGiftsEvent.bind(this)),new to.a(this.onCatalogRedeemVoucherError.bind(this)),new eo.a(this.onCatalogRedeemVoucherOk.bind(this))];for(const t of this._messages)_.a.instance.communication.registerMessageEvent(t);_.a.instance.communication.connection.send(new uo.a)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)_.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onCatalogClubEvent(t){if(!t||!t.getParser()||!this._vipTemplate)return;const e=t.getParser().offers;this._clubOffers=e,this._vipTemplate.setOffers(e)}onCatalogClubGiftsEvent(t){if(!t)return;const e=t.getParser();e&&(this._clubGiftsParser=e)}registerVipBuyTemplate(t){this._vipTemplate=t}registerGroupFurniTemplate(t){this._groupFurniTemplate=t}onGiftConfigurationEvent(t){this._giftWrappingConfiguration=new Zo(t)}onGiftUsernameUnavailableEvent(t){this._giftConfiguratorComponent&&this._giftConfiguratorComponent.showUsernameNotFoundDialog()}onCatalogModeEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this._catalogMode=e.mode)}onCatalogPageEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._activePage=e,this._component&&this._component.setupLayout(),this._isLoading=!1})}onCatalogPagesEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._catalogRoot=e.root,this.setOffersToNodes(this._catalogRoot),this._isLoading=!1,this._component&&this._component.selectFirstTab()})}onCatalogPurchaseEvent(t){t&&t.getParser()&&(this._ngZone.run(()=>this._component&&this._component.hidePurchaseConfirmation()),this._soundService.playInternalSample(Ls.CATALOG_PURCHASE))}onCatalogPurchaseFailedEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._notificationService.alert("${catalog.alert.purchaseerror.description."+e.code+"}","${catalog.alert.purchaseerror.title}"),this._component&&this._component.hidePurchaseConfirmation()})}onCatalogPurchaseUnavailableEvent(t){t&&t.getParser()}onCatalogSearchEvent(t){if(!(this._activePage instanceof qo))return;if(!t)return;const e=t.getParser();e&&e.offer&&this._ngZone.run(()=>this._component&&this._component.selectOffer(e.offer))}onCatalogSoldOutEvent(t){t&&t.getParser()&&this._ngZone.run(()=>{this._notificationService.alert("${catalog.alert.limited_edition_sold_out.message}","${catalog.alert.limited_edition_sold_out.title}"),this._component&&this._component.hidePurchaseConfirmation()})}onCatalogGroupsEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._groupFurniTemplate.groups=e.groups})}onUserSubscriptionEvent(t){if(!t)return;const e=t.getParser();e&&(this._purse.clubDays=Math.max(0,e.days),this._purse.clubPeriods=Math.max(0,e.months),this._purse.isVip=e.isVip,this._purse.pastClubDays=e.pastVIPDays,this._purse.Str_14389=e.years==Eo.a._Str_14729,this._purse.minutesUntilExpiration=e.totalSeconds)}onCatalogUpdatedEvent(t){t&&t.getParser()&&this._ngZone.run(()=>{this._isLoading=!1,this._catalogMode=-1,this._catalogRoot=null,this._activePage=null,this._activePageData=null,this._component&&this._component.reset(),this._settingsService.catalogVisible&&(this._component.hide(),this._notificationService.alert("${catalog.alert.published.description}","${catalog.alert.published.title}"))})}onCatalogRedeemVoucherError(t){if(!t)return;const e=t.getParser();e&&this._settingsService.catalogVisible&&this._notificationService.alert("${catalog.alert.voucherredeem.error.description."+e.errorCode+"}","${catalog.alert.voucherredeem.error.title}")}onCatalogRedeemVoucherOk(t){t&&t.getParser()&&this._settingsService.catalogVisible&&this._notificationService.alert("${catalog.alert.voucherredeem.ok.description}","${catalog.alert.voucherredeem.ok.title}")}setupCatalog(t){t&&(this._isLoading=!0,this._catalogRoot=null,this._activePage=null,this._activePageData=null,this._component&&this._component.reset(),_.a.instance.communication.connection.send(new oo.a(t)))}requestGroups(){_.a.instance.communication.connection.send(new ao.a)}requestPage(e){e&&this.canSelectPage(e)&&(this._activePageData=e,-1!==e.pageId&&(this._isLoading=!0,this.requestPageData(e.pageId,-1,t.MODE_NORMAL)))}requestPageData(t,e,s){_.a.instance.communication.connection.send(new co.a(t,e,s))}isDescendant(t,e){if(!t||!e)return!1;if(t===e)return!0;if(t.children.length)for(const s of t.children)if(s){if(s===e)return!0;if(this.isDescendant(s,e))return!0}return!1}getFurnitureDataForProductOffer(t){if(!t)return null;let e=null;switch(t.productType.toUpperCase()){case So.a.FLOOR:e=_.a.instance.sessionDataManager.getFloorItemData(t.furniClassId);break;case So.a.WALL:e=_.a.instance.sessionDataManager.getWallItemData(t.furniClassId)}return e}getProductDataForLocalization(t){return t?_.a.instance.sessionDataManager.getProductData(t):null}getFurnitureDataIconUrl(t){if(!t)return null;const e=_.a.instance.roomEngine.roomContentLoader.getAssetUrls(t.className,t.colorIndex.toString(),!0);return e&&e[0]||null}purchase(t,e,s,i=null){t&&e&&s&&this.purchaseById(t.pageId,e.offerId,s,i)}purchaseGiftOffer(t,e,s,i,n,r,a,o,c){_.a.instance.communication.connection.send(new lo.a(t.pageId,e.offerId,s,i,n,r,a,o,c))}purchaseById(t,e,s,i=null){t&&e&&s&&_.a.instance.communication.connection.send(new ho.a(t,e,i,s))}requestOffers(t){_.a.instance.communication.connection.send(new go.a(t))}requestClubGifts(){_.a.instance.communication.connection.send(new _o.a)}redeemVoucher(t){t&&0!==t.trim().length&&_.a.instance.communication.connection.send(new po.a(t))}manuallyCollapsePage(t){const e=this._manuallyCollapsed.indexOf(t);-1===e?this._manuallyCollapsed.push(t):this._manuallyCollapsed.splice(e,1)}canSelectPage(t){return!(!t||!t.visible)}get component(){return this._component}set component(t){this._component=t}set giftConfiguratorComponent(t){this._giftConfiguratorComponent=t}get catalogMode(){return this._catalogMode}get catalogRoot(){return this._catalogRoot}get activePage(){return this._activePage}get activePageData(){return this._activePageData}get manuallyCollapsed(){return this._manuallyCollapsed}get purse(){return this._purse}get vipOffers(){return this._clubOffers}get giftWrapperConfiguration(){return this._giftWrappingConfiguration}getOfferPages(t){if(!this._catalogRoot||!this._offersToRoots)return null;const e=this._offersToRoots.getValue(t);if(!e||!e.length)return null;const s=[];for(const i of e)i&&i.visible&&s.push(i);return s.length?s:null}setOffersToNodes(t){if(t){if(this._offersToRoots||(this._offersToRoots=new Bs.a),t.offerIds&&t.offerIds.length)for(const e of t.offerIds){let s=this._offersToRoots.getValue(e);s||(s=[],this._offersToRoots.add(e,s)),s.indexOf(t)>=0||s.push(t)}if(t.children&&t.children.length)for(const e of t.children)e&&this.setOffersToNodes(e)}}setSearchPage(t){const e=new Bs.a;for(const s of t){const t=[this.getOfferPages(s.purchaseOfferId),this.getOfferPages(s.rentOfferId)];for(const s of t)if(s&&s.length>0)for(const t of s)e.hasKey(t.pageId)||e.add(t.pageId,t)}this._searchResultsPages=new fo(e.getValues()),this._activePage=new qo(t)}requestOfferData(t){_.a.instance.communication.connection.send(new mo.a(t))}get clubGiftsParser(){return this._clubGiftsParser}hasClubDays(){return!!this._purse&&this._purse.clubDays>0}get searchResults(){return this._searchResultsPages}clearSearchResults(){this._searchResultsPages=null,this.component&&this.component.reselectCurrentTab()}}return t.MODE_NORMAL="NORMAL",t.\u0275fac=function(e){return new(e||t)(i.kc(m),i.kc(ss),i.kc(Gs),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();var Jo=s("IxQr");const $o=["nitro-furniture-image",""];function tc(t,e){if(1&t&&i.Zb(0,"img",1),2&t){const t=i.qc();i.xc("src",t.imageUrl,i.Mc)}}let ec=(()=>{class t{constructor(t){this._ngZone=t,this.type="s",this.spriteId=-1,this.direction=0,this.extras="",this.imageUrl=null,this.needsUpdate=!0}ngOnInit(){this.needsUpdate&&this.buildImage()}ngOnChanges(t){const e=t.type;e&&e.previousValue!==e.currentValue&&(this.needsUpdate=!0);const s=t.spriteId;s&&s.previousValue!==s.currentValue&&(this.needsUpdate=!0);const i=t.direction;i&&i.previousValue!==i.currentValue&&(this.needsUpdate=!0);const n=t.extras;n&&n.previousValue!==n.currentValue&&(this.needsUpdate=!0),this.needsUpdate&&this.buildImage()}buildImage(){this._ngZone.runOutsideAngular(()=>{this.needsUpdate=!1;let t=null;switch(this.type.toLocaleLowerCase()){case me.FLOOR:t=_.a.instance.roomEngine.getFurnitureFloorImage(this.spriteId,new Z.a(this.direction),64,this,0,this.extras);break;case me.WALL:t=_.a.instance.roomEngine.getFurnitureWallImage(this.spriteId,new Z.a(this.direction),64,this,0,this.extras)}if(t){const e=t.getImage();e&&this._ngZone.run(()=>this.imageUrl=e.src)}})}imageReady(t,e,s){if(e)if(s)this._ngZone.run(()=>this.imageUrl=s.src);else if(e){const t=Jo.a.generateImageUrl(e);t&&this._ngZone.run(()=>this.imageUrl=t)}}imageFailed(t){}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-furniture-image",""]],inputs:{type:"type",spriteId:"spriteId",direction:"direction",extras:"extras"},features:[i.Ib],attrs:$o,decls:1,vars:1,consts:[["class","d-block","image-placeholder","",3,"src",4,"ngIf"],["image-placeholder","",1,"d-block",3,"src"]],template:function(t,e){1&t&&i.Tc(0,tc,1,1,"img",0),2&t&&i.xc("ngIf",e.imageUrl)},directives:[p.n,ha],encapsulation:2}),t})();function sc(t,e){if(1&t&&i.Zb(0,"div",15),2&t){const t=i.qc(3);i.xc("headOnly",!0)("figure",t.figure)("direction",2)}}function ic(t,e){1&t&&i.Zb(0,"div",16)}function nc(t,e){if(1&t){const t=i.ec();i.bc(0),i.dc(1,"div",8),i.Tc(2,sc,1,3,"div",9),i.Tc(3,ic,1,0,"div",10),i.dc(4,"div",11),i.Vc(5),i.cc(),i.cc(),i.dc(6,"div",12),i.dc(7,"button",13),i.nc("click",function(){return i.Kc(t),i.qc(2).handleButton("accept")}),i.dc(8,"p",14),i.Vc(9),i.rc(10,"translate"),i.cc(),i.cc(),i.cc(),i.ac()}if(2&t){const t=i.qc(2);i.Kb(2),i.xc("ngIf",!t.isAnonymousGift),i.Kb(1),i.xc("ngIf",t.isAnonymousGift),i.Kb(2),i.Wc(t.text),i.Kb(4),i.Wc(i.sc(10,4,"widget.furni.present.open_gift"))}}function rc(t,e){if(1&t){const t=i.ec();i.dc(0,"button",24),i.nc("click",function(){return i.Kc(t),i.qc(3).handleButton("furni_place_in_room")}),i.dc(1,"p",14),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()}2&t&&(i.Kb(2),i.Wc(i.sc(3,1,"widget.furni.present.place_in_room")))}function ac(t,e){if(1&t){const t=i.ec();i.bc(0),i.dc(1,"div",17),i.dc(2,"div",18),i.Zb(3,"div",19),i.cc(),i.dc(4,"div",20),i.Vc(5),i.cc(),i.cc(),i.dc(6,"div",12),i.Tc(7,rc,4,3,"button",21),i.dc(8,"button",22),i.nc("click",function(){return i.Kc(t),i.qc(2).handleButton("furni_place_in_inventory")}),i.dc(9,"p",23),i.Vc(10),i.rc(11,"translate"),i.cc(),i.cc(),i.cc(),i.ac()}if(2&t){const t=i.qc(2);i.Kb(3),i.xc("type",t.type)("spriteId",t.spriteId)("extras",t.extras),i.Kb(2),i.Wc(t.text),i.Kb(2),i.xc("ngIf",!t.isWallItem),i.Kb(3),i.Wc(i.sc(11,6,"widget.furni.present.put_in_inventory"))}}function oc(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"p",3),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",4),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.cc(),i.cc(),i.dc(6,"div",5),i.bc(7,6),i.Tc(8,nc,11,6,"ng-container",7),i.Tc(9,ac,12,8,"ng-container",7),i.ac(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.uc(4,4,t.getGiftTitle(),"name",t.senderName)),i.Kb(4),i.xc("ngSwitch",t.currentView),i.Kb(1),i.xc("ngSwitchCase","open_present"),i.Kb(1),i.xc("ngSwitchCase","present_opened")}}let cc=(()=>{class t extends en{constructor(t,e,s){super(),this._ngZone=t,this._catalogService=e,this._inventoryService=s,this._lastEvent=null,this._needsOpen=!1,this._currentView="",this._type=null,this._spriteId=-1,this._extras=null,this._text=null,this._isWallItem=!1,this._visible=!1,this.onObjectUpdate=this.onObjectUpdate.bind(this),this.onFurniRemoved=this.onFurniRemoved.bind(this)}registerUpdateEvents(t){t&&(t.addEventListener(pe.RWPDUE_PACKAGEINFO,this.onObjectUpdate),t.addEventListener(pe.RWPDUE_CONTENTS,this.onObjectUpdate),t.addEventListener(pe.RWPDUE_CONTENTS_FLOOR,this.onObjectUpdate),t.addEventListener(pe.RWPDUE_CONTENTS_LANDSCAPE,this.onObjectUpdate),t.addEventListener(pe.RWPDUE_CONTENTS_WALLPAPER,this.onObjectUpdate),t.addEventListener($.FURNI_REMOVED,this.onFurniRemoved),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(pe.RWPDUE_PACKAGEINFO,this.onObjectUpdate),t.removeEventListener(pe.RWPDUE_CONTENTS,this.onObjectUpdate),t.removeEventListener(pe.RWPDUE_CONTENTS_FLOOR,this.onObjectUpdate),t.removeEventListener(pe.RWPDUE_CONTENTS_LANDSCAPE,this.onObjectUpdate),t.removeEventListener(pe.RWPDUE_CONTENTS_WALLPAPER,this.onObjectUpdate),t.removeEventListener($.FURNI_REMOVED,this.onFurniRemoved),super.unregisterUpdateEvents(t))}onObjectUpdate(t){t&&(this.reset(),this._ngZone.run(()=>{switch(this._lastEvent=t,t.type){case pe.RWPDUE_PACKAGEINFO:this.showOpeningPresent();break;case pe.RWPDUE_CONTENTS:case pe.RWPDUE_CONTENTS_FLOOR:case pe.RWPDUE_CONTENTS_LANDSCAPE:case pe.RWPDUE_CONTENTS_WALLPAPER:case pe.RWPDUE_CONTENTS_CLUB:this._type=t.itemType,this._spriteId=t.classId,this._isWallItem="i"===t.itemType,this.showOpenPresent()}}))}onFurniRemoved(t){this._lastEvent&&this._lastEvent.objectId===t.id&&this.hide()}hide(){this._visible=!1,this.reset()}reset(){this._type=null,this._spriteId=-1,this._extras=null,this._text=null,this._isWallItem=!1,this._lastEvent=null,this._currentView=null}showOpeningPresent(){!this._lastEvent||this._lastEvent.objectId<0||(this._text=this._lastEvent.giftMessage||"",this._currentView="open_present",this._visible=!0)}showOpenPresent(){!this._lastEvent||this._lastEvent.objectId<0||(this._text=_.a.instance.localization.getValueWithParameter("widget.furni.present.message_opened","product",this._lastEvent.giftMessage),this.isSpacesFurniture()&&(this._text=_.a.instance.localization.getValueWithParameter("widget.furni.present.spaces.message_opened","product",this._lastEvent.giftMessage)),this._currentView="present_opened",this._visible=!0)}isSpacesFurniture(){if(!this._lastEvent||this._lastEvent.itemType!==me.WALL)return!1;const e=_.a.instance.sessionDataManager.getWallItemData(this._lastEvent.classId);if(!e)return!1;const s=e.className;return s==t.FLOOR||s==t.LANDSCAPE||s==t.WALLPAPER}handleButton(t){if(t)switch(t){case"accept":this.acceptAndOpenPresent();break;case"return":break;case"furni_place_in_room":this.placeItemInRoom();break;case"furni_place_in_inventory":this.hide()}}acceptAndOpenPresent(){this.messageListener.processWidgetMessage(new fe(fe.RWPOM_OPEN_PRESENT,this._lastEvent.objectId)),this.hide()}placeItemInRoom(){const t=this._lastEvent&&this._lastEvent.placedItemId;if(t>0&&(!this._lastEvent||!this._lastEvent.placedInRoom))switch(this._lastEvent&&this._lastEvent.placedItemType){case me.FLOOR:{const e=this._inventoryService.controller.furnitureService.getFurnitureItem(-t);this.canMoveItem(e);break}case me.WALL:{const e=this._inventoryService.controller.furnitureService.getFurnitureItem(t);this.canMoveItem(e);break}}this.hide()}canMoveItem(t){if(!t)return!1;let e=!0;return e=t.category!=Ka._Str_3683&&t.category!=Ka._Str_3639&&t.category!=Ka._Str_3432&&this._inventoryService.controller.furnitureService.startRoomObjectPlacementWithoutRequest(t),e}getGiftTitle(){return this.isAnonymousGift?"widget.furni.present.window.title":"widget.furni.present.window.title_from"}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(t){this._visible=t}get currentView(){return this._currentView}get figure(){return this._lastEvent.purchaserFigure}get senderText(){return this._lastEvent.giftMessage}get senderName(){return this._lastEvent.purchaserName}get type(){return this._type}get spriteId(){return this._spriteId}get extras(){return this._extras}get text(){return this._text}get isWallItem(){return this._isWallItem}get isAnonymousGift(){return!this.senderName||0==this.senderName.length}}return t.FLOOR="floor",t.WALLPAPER="wallpaper",t.LANDSCAPE="landscape",t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H),i.Yb(Qo),i.Yb(Sa))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-furniture-gift-opening-component"]],features:[i.Hb],decls:1,vars:1,consts:[["class","hediyeac",3,"bringToTop","draggable",4,"ngIf"],[1,"hediyeac",3,"bringToTop","draggable"],[1,"drag-handler","hediyeac-header"],[1,"hediyeac-hood"],[1,"old-kapat",3,"click"],[1,"hediyegonder-body"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"hediyekart-mesajyaz"],["class","hediyegonderen-avatar","nitro-avatar-image","",3,"headOnly","figure","direction",4,"ngIf"],["class","hediyegonderen-avatar",4,"ngIf"],[1,"hediyemesaj-text"],[1,"hediyeac-button-box"],[1,"hediyeac-button",3,"click"],[1,"hediyeac-tamam-text"],["nitro-avatar-image","",1,"hediyegonderen-avatar",3,"headOnly","figure","direction"],[1,"hediyegonderen-avatar"],[1,"hediyekart-mobi"],[1,"hediye-gelen-mobi"],["nitro-furniture-image","",1,"hediyegonderen-avatar",3,"type","spriteId","extras"],[1,"acilanmobi-text"],["type","button","class","hediyeac-button",3,"click",4,"ngIf"],["type","button",1,"hediyeac-button2",3,"click"],[1,"hediyeac-tamam-text",2,"color","black"],["type","button",1,"hediyeac-button",3,"click"]],template:function(t,e){1&t&&i.Tc(0,oc,10,8,"div",0),2&t&&i.xc("ngIf",e.visible)},directives:[p.n,Tr,Lr,p.p,p.q,_a,ec],pipes:[ln],encapsulation:2}),t})();var hc=s("Kdsb");const lc=["activeView"];function uc(t,e){if(1&t&&(i.dc(0,"div",15),i.Vc(1),i.cc()),2&t){const t=e.$implicit,s=i.qc().index;i.Kb(1),i.Yc("",s+1,"- ",t,"")}}function _c(t,e){if(1&t&&(i.dc(0,"div",12),i.Tc(1,uc,2,2,"div",13),i.dc(2,"div",14),i.Vc(3),i.cc(),i.cc()),2&t){const t=e.$implicit;i.Kb(1),i.xc("ngForOf",t.users),i.Kb(2),i.Wc(t.score)}}function dc(t,e){if(1&t&&(i.dc(0,"div"),i.dc(1,"div",4),i.Vc(2),i.cc(),i.dc(3,"div",5),i.dc(4,"div",6),i.Vc(5),i.rc(6,"translate"),i.cc(),i.dc(7,"div",7),i.Vc(8),i.rc(9,"translate"),i.cc(),i.cc(),i.dc(10,"perfect-scrollbar",8),i.Tc(11,_c,4,2,"div",9),i.cc(),i.dc(12,"div",10),i.Vc(13),i.rc(14,"translate"),i.cc(),i.Zb(15,"div",11),i.cc()),2&t){const t=i.qc(2);i.Kb(2),i.Wc(t.title),i.Kb(3),i.Wc(i.sc(6,5,"high.score.display.users.header")),i.Kb(3),i.Wc(i.sc(9,7,"high.score.display.score.header")),i.Kb(3),i.xc("ngForOf",t.entries),i.Kb(2),i.Wc(i.sc(14,9,"high.score.display.congratulations.footer"))}}const gc=function(t,e){return{top:t,left:e}};function mc(t,e){if(1&t&&(i.dc(0,"div",1,2),i.Tc(2,dc,16,11,"div",3),i.cc()),2&t){const t=i.qc();i.xc("ngStyle",i.Cc(2,gc,t.topValue+"px",t.leftValue+"px")),i.Kb(2),i.xc("ngIf",!t.toggled)}}let pc=(()=>{class t extends en{constructor(t){super(),this._ngZone=t,this.view=null,this._visible=!1,this._toggled=!1,this._objectId=-1,this._roomId=-1,this._stuffData=null,this.topValue=0,this.leftValue=0,this.scoreTypes=["perteam","mostwins","classic"],this.clearTypes=["alltime","daily","weekly","monthly"]}open(t,e,s){this._ngZone.run(()=>{this._objectId=t,this._roomId=e,this._stuffData=s,this._visible=!0})}updatePoint(t,e){this._visible&&this._ngZone.run(()=>{const s=this.view&&this.view.nativeElement||null;s&&(this.leftValue=t-s.offsetWidth/2,this.topValue=e-(s.offsetHeight+60))})}openProfile(t){_.a.instance.createLinkEvent("profile/name/"+t)}toggle(){this._ngZone.run(()=>{this._toggled=!this._toggled})}hide(){this._ngZone.run(()=>{this._visible=!1,this._objectId=-1,this._roomId=-1,this._stuffData=null})}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(t){this._visible=t}get toggled(){return this._toggled}get objectId(){return this._objectId}get roomId(){return this._roomId}get entries(){return this._stuffData?this._stuffData.entries:[]}get clearTypeCode(){return this._stuffData?"high.score.display.cleartype."+this.clearTypes[this._stuffData.clearType]:null}get scoreTypeCode(){return this._stuffData?"high.score.display.scoretype."+this.scoreTypes[this._stuffData.scoreType]:null}get title(){if(!this.scoreTypeCode||!this.clearTypeCode)return null;const t=_.a.instance.getLocalization(this.scoreTypeCode),e=_.a.instance.getLocalization(this.clearTypeCode);return _.a.instance.getLocalizationWithParameters("high.score.display.caption",["scoretype","cleartype"],[t,e])}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-furniture-highscore-component"]],viewQuery:function(t,e){if(1&t&&i.bd(lc,1),2&t){let t;i.Gc(t=i.oc())&&(e.view=t.first)}},features:[i.Hb],decls:1,vars:1,consts:[["class","nitro-widget-highscore",3,"ngStyle",4,"ngIf"],[1,"nitro-widget-highscore",3,"ngStyle"],["activeView",""],[4,"ngIf"],[1,"drag-handler","hscore-hood"],[1,"hscore-head"],[1,"hs-users-main"],[1,"hs-score-main"],[2,"min-height","255px","max-height","255px","height","255px","width","282px"],["class","score-list",4,"ngFor","ngForOf"],[1,"hscore-bottomtext"],[1,"hscore-cup"],[1,"score-list"],["class","score-username",4,"ngFor","ngForOf"],[1,"score-point"],[1,"score-username"]],template:function(t,e){1&t&&i.Tc(0,mc,3,5,"div",0),2&t&&i.xc("ngIf",e.visible)},directives:[p.n,p.o,hc.b,p.m],pipes:[ln],encapsulation:2}),t})();var fc=s("/niJ"),Ec=s("o1ML"),Sc=s("q25d");function vc(t,e){1&t&&(i.dc(0,"div",14),i.Vc(1,"\xa0"),i.cc())}function bc(t,e){if(1&t){const t=i.ec();i.dc(0,"div",15),i.Vc(1),i.rc(2,"translate"),i.dc(3,"button",16),i.nc("click",function(){return i.Kc(t),i.qc(2).handleButton("close")}),i.Vc(4),i.rc(5,"translate"),i.cc(),i.Zb(6,"br"),i.cc()}2&t&&(i.Kb(1),i.Xc(" ",i.sc(2,2,"mannequin.widget.wronggender")," "),i.Kb(3),i.Wc(i.sc(5,4,"generic.ok")))}function Ic(t,e){if(1&t){const t=i.ec();i.dc(0,"div",15),i.Vc(1),i.rc(2,"translate"),i.dc(3,"button",16),i.nc("click",function(){return i.Kc(t),i.qc(2).handleButton("close")}),i.Vc(4),i.rc(5,"translate"),i.cc(),i.Zb(6,"br"),i.cc()}2&t&&(i.Kb(1),i.Xc(" ",i.sc(2,2,"mannequin.widget.clubnotification")," "),i.Kb(3),i.Wc(i.sc(5,4,"generic.ok")))}function Rc(t,e){if(1&t){const t=i.ec();i.dc(0,"div",15),i.dc(1,"i"),i.Vc(2),i.cc(),i.Zb(3,"br"),i.Zb(4,"br"),i.Vc(5),i.rc(6,"translate"),i.dc(7,"button",16),i.nc("click",function(){return i.Kc(t),i.qc(2).handleButton("wear")}),i.Vc(8),i.rc(9,"translate"),i.cc(),i.Zb(10,"br"),i.cc()}if(2&t){const t=i.qc(2);i.Kb(2),i.Wc(t.outfitName),i.Kb(3),i.Xc(" ",i.sc(6,3,"mannequin.widget.weartext")," "),i.Kb(3),i.Wc(i.sc(9,5,"mannequin.widget.wear"))}}function Tc(t,e){if(1&t){const t=i.ec();i.dc(0,"div",15),i.dc(1,"input",17),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc(2).outfitName=e})("keyup.enter",function(){return i.Kc(t),i.qc(2).saveName()}),i.cc(),i.Zb(2,"br"),i.dc(3,"button",18),i.nc("click",function(){return i.Kc(t),i.qc(2).handleButton("re_style")}),i.Vc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"button",18),i.nc("click",function(){return i.Kc(t),i.qc(2).handleButton("wear")}),i.Vc(7),i.rc(8,"translate"),i.cc(),i.Zb(9,"br"),i.cc()}if(2&t){const t=i.qc(2);i.Kb(1),i.xc("ngModel",t.outfitName),i.Kb(3),i.Wc(i.sc(5,3,"mannequin.widget.style")),i.Kb(3),i.Wc(i.sc(8,5,"mannequin.widget.wear"))}}function Oc(t,e){if(1&t){const t=i.ec();i.dc(0,"div",15),i.Vc(1),i.rc(2,"translate"),i.Zb(3,"br"),i.dc(4,"button",19),i.nc("click",function(){return i.Kc(t),i.qc(2).handleButton("save_outfit")}),i.Vc(5),i.rc(6,"translate"),i.cc(),i.dc(7,"button",19),i.nc("click",function(){return i.Kc(t),i.qc(2).handleButton("main")}),i.Vc(8),i.rc(9,"translate"),i.cc(),i.Zb(10,"br"),i.cc()}2&t&&(i.Kb(1),i.Xc(" ",i.sc(2,3,"mannequin.widget.savetext"),""),i.Kb(4),i.Wc(i.sc(6,5,"mannequin.widget.save")),i.Kb(3),i.Wc(i.sc(9,7,"mannequin.widget.back")))}function yc(t,e){if(1&t&&(i.dc(0,"div",20),i.Vc(1),i.cc()),2&t){const t=i.qc(2);i.Kb(1),i.Xc(" ",t.view," ")}}function Cc(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"h6",3),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",4),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.Zb(6,"i",5),i.cc(),i.cc(),i.dc(7,"div",6),i.dc(8,"div",7),i.dc(9,"div",8),i.dc(10,"div",9),i.Vc(11,"\xa0"),i.cc(),i.Tc(12,vc,2,0,"div",10),i.cc(),i.cc(),i.bc(13,11),i.Tc(14,bc,7,6,"div",12),i.Tc(15,Ic,7,6,"div",12),i.Tc(16,Rc,11,7,"div",12),i.Tc(17,Tc,10,7,"div",12),i.Tc(18,Oc,11,9,"div",12),i.Tc(19,yc,2,1,"div",13),i.ac(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.sc(4,10,"mannequin.widget.title")),i.Kb(7),i.xc("direction",2)("figure",t.figure),i.Kb(2),i.xc("ngIf",t.hasHabboClub),i.Kb(1),i.xc("ngSwitch",t.view),i.Kb(1),i.xc("ngSwitchCase","wrong-gender"),i.Kb(1),i.xc("ngSwitchCase","no-club"),i.Kb(1),i.xc("ngSwitchCase","peer-main"),i.Kb(1),i.xc("ngSwitchCase","main"),i.Kb(1),i.xc("ngSwitchCase","save")}}let Ac=(()=>{class t extends en{constructor(t){super(),this._ngZone=t,this._visible=!1,this.hasHabboClub=!1}open(e,s,i,n){this._furniId=e,this._figure=s,this._gender=i,this.outfitName=n;const r=this.handler.container.roomSession,a=this.handler.container.sessionDataManager,o=r.isRoomOwner||r.controllerLevel>=H.a.GUEST||a.isGodMode,c=_.a.instance.avatar,h=c.createFigureContainer(s);this._mannequinClubLevel=c.getFigureClubLevel(h,i,t.parts);const l=this.getViewType(o,a.gender,a.clubLevel,i,this._mannequinClubLevel);this.setView(l)}get handler(){return this.widgetHandler}hide(){this._visible=!1}get visible(){return this._visible}set visible(t){this._visible=t}getViewType(e,s,i,n,r){return e?t.EditorView:s.toLowerCase()!=n.toLowerCase()?t.WrongGender:i<r?t.WrongClubLevel:t.UseMannequin}setView(e){const s=this.handler.container.avatarRenderManager;this._view=this.createView(e);let i=null;switch(e){case t.PreviewAndSave:case t.WrongClubLevel:case t.WrongGender:i=s.createFigureContainer(this._figure),this.removeSectionsFromAvatar(i),this._renderedFigure=i._Str_1008();break;case t.UseMannequin:this._renderedFigure=this.mergeFigures(this._figure);break;case t.EditorView:i=s.createFigureContainer(this._figure),this.removeSectionsFromAvatar(i),this._renderedFigure=i._Str_1008()}this.showOrHideHabboClubLevel(this._mannequinClubLevel),this._ngZone.run(()=>{this._visible=!0})}saveName(){this.changeOutfitName()}removeSectionsFromAvatar(e){for(const s of e._Str_1016())-1==t.parts.indexOf(s)&&e._Str_923(s);e._Str_830(t._Str_10597[0],t._Str_10597[1],t._Str_10597[2])}mergeFigures(e){const s=new fc.a(this.widgetHandler.container.sessionDataManager.figure),i=new fc.a(e);for(const n of t.parts)s._Str_923(n);for(const t of i._Str_1016())s._Str_830(t,i.getPartSetId(t),i._Str_815(t));return s._Str_1008()}createView(e){switch(e){case t.EditorView:return"main";case t.PreviewAndSave:return"save";case t.UseMannequin:return"peer-main";case t.WrongClubLevel:return"no-club";case t.WrongGender:return"wrong-gender"}return""}showOrHideHabboClubLevel(t){switch(t){case gt._Str_3159:this.hasHabboClub=!1;break;case gt._Str_2964:case gt._Str_2575:this.hasHabboClub=!0}}handleButton(e){switch(e){case"wear":this.wearOutfit();break;case"re_style":this.changeOutfitName(),this.setView(t.PreviewAndSave);break;case"save_outfit":this.handler.container.connection.send(new Ec.a(this._furniId)),this._visible=!1;break;case"main":this.setView(t.EditorView);break;case"close":this._visible=!1}}wearOutfit(){const e=this.widgetHandler.container.sessionDataManager;e.clubLevel<this._mannequinClubLevel?this.setView(t.WrongClubLevel):e.gender.toLowerCase()==this._gender.toLowerCase()?(this.handler.container.connection.send(new ta.a(this._furniId)),this._visible=!1):this.setView(t.WrongGender)}changeOutfitName(){this.handler.container.connection.send(new Sc.a(this._furniId,this.outfitName))}get figure(){return this._renderedFigure}get view(){return this._view}}return t.EditorView=0,t.PreviewAndSave=1,t.UseMannequin=2,t.WrongClubLevel=3,t.WrongGender=4,t.parts=[It.a.CHEST_ACCESSORY,It.a.COAT_CHEST,It.a.CHEST,It.a.LEGS,It.a.SHOES,It.a.WAIST_ACCESSORY],t._Str_9071=0,t._Str_8000=1,t._Str_8218=2,t._Str_10597=["hd",99999,[99998]],t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-furniture-mannequin-component"]],features:[i.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-mannequin card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-mannequin","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","align-items-center","justify-content-between","pt-3","px-3","w-100"],[1,"m-0"],[1,"close",3,"click"],[1,"fas","fa-times"],[1,"row"],[1,"col-4"],[1,"mannequin-background"],["nitro-avatar-image","",1,"mannequin-figure",3,"direction","figure"],["class","hc-icon",4,"ngIf"],[3,"ngSwitch"],["class","col-8",4,"ngSwitchCase"],["class","list-group-item",4,"ngSwitchDefault"],[1,"hc-icon"],[1,"col-8"],["type","button",1,"btn","btn-primary",3,"click"],["type","text",3,"ngModel","ngModelChange","keyup.enter"],["type","button",1,"btn","btn-primary",2,"width","177px","margin-top","10px",3,"click"],["type","button",1,"btn","btn-primary",2,"margin-top","10px",3,"click"],[1,"list-group-item"]],template:function(t,e){1&t&&i.Tc(0,Cc,20,12,"div",0),2&t&&i.xc("ngIf",e.visible)},directives:[p.n,Tr,Lr,_a,p.p,p.q,p.r,rr.b,rr.l,rr.n],pipes:[ln],encapsulation:2}),t})();const Mc=function(t){return{"background-color":t}};function wc(t,e){if(1&t){const t=i.ec();i.dc(0,"div",9),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc(3).processAction(s)}),i.cc()}2&t&&i.xc("ngStyle",i.Bc(1,Mc,"#"+e.$implicit))}function Dc(t,e){if(1&t){const t=i.ec();i.dc(0,"div",6),i.dc(1,"div",7),i.nc("click",function(){return i.Kc(t),i.qc(2).processAction("delete")}),i.cc(),i.Tc(2,wc,1,3,"div",8),i.cc()}if(2&t){const t=i.qc(2);i.Kb(2),i.xc("ngForOf",t.AVAILABLE_COLORS)}}const Nc=function(t,e){return{"background-color":t,color:e}};function Uc(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.Tc(2,Dc,3,1,"div",3),i.dc(3,"div",4),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.cc(),i.cc(),i.dc(4,"textarea",5),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().text=e}),i.Vc(5),i.cc(),i.cc()}if(2&t){const t=i.qc();i.xc("ngStyle",i.Cc(5,Nc,"#"+t.colorHex,t.colorHex)),i.Kb(2),i.xc("ngIf",t.isController),i.Kb(2),i.xc("disabled",!t.isController)("ngModel",t.text),i.Kb(1),i.Wc(t.text)}}let xc=(()=>{class t extends en{constructor(t){super(),this._ngZone=t,this.AVAILABLE_COLORS=["9CCEFF","FF9CFF","9CFF9C","FFFF33"],this._objectId=-1,this._colorHex=null,this._text=null,this._isController=!1,this._visible=!1,this.onRoomWidgetStickieDataUpdateEvent=this.onRoomWidgetStickieDataUpdateEvent.bind(this)}dispose(){this.updateStickie(),super.dispose()}registerUpdateEvents(t){t&&(t.addEventListener(Ie.RWSDUE_STICKIE_DATA,this.onRoomWidgetStickieDataUpdateEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(Ie.RWSDUE_STICKIE_DATA,this.onRoomWidgetStickieDataUpdateEvent),super.unregisterUpdateEvents(t))}onRoomWidgetStickieDataUpdateEvent(t){t&&this._ngZone.run(()=>{this._objectId=t._Str_1577,this._colorHex=t._Str_10471,this._text=t.text,this._isController=t.controller,this._visible=!0})}processAction(t){if(t&&""!==t){if(this.AVAILABLE_COLORS.indexOf(t)>=0)return this._colorHex=t,void this.updateStickie();switch(t){case"delete":return void this.deleteStickie()}}}hide(){this.updateStickie(),this._objectId=-1,this._colorHex=null,this._text=null,this._isController=!1,this._visible=!1}updateStickie(){-1!==this._objectId&&this.messageListener.processWidgetMessage(new Re(Re.SEND_UPDATE,this._objectId,this._text,this._colorHex))}deleteStickie(){-1!==this._objectId&&(this.messageListener.processWidgetMessage(new Re(Re.SEND_DELETE,this._objectId)),this.hide())}get visible(){return this._visible}set visible(t){this._visible=t}get handler(){return this.widgetHandler}get objectId(){return this._objectId}get colorHex(){return this._colorHex}get text(){return this._text}set text(t){this._text=t}get isController(){return this._isController}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-furniture-sticky"]],features:[i.Hb],decls:1,vars:1,consts:[["class","habbo-not-kagit",3,"bringToTop","draggable","ngStyle",4,"ngIf"],[1,"habbo-not-kagit",3,"bringToTop","draggable","ngStyle"],[1,"corelo-not-head","drag-handler"],["class","ownernot",4,"ngIf"],[1,"not-kapat",3,"click"],["name","sticky-text","rows","11","maxlength","500",1,"not-yazi",3,"disabled","ngModel","ngModelChange"],[1,"ownernot"],[1,"notu-sil",3,"click"],["class","notrenk",3,"ngStyle","click",4,"ngFor","ngForOf"],[1,"notrenk",3,"ngStyle","click"]],template:function(t,e){1&t&&i.Tc(0,Uc,6,8,"div",0),2&t&&i.xc("ngIf",e.visible)},directives:[p.n,Tr,Lr,p.o,rr.b,rr.i,rr.l,rr.n,p.m],encapsulation:2}),t})();function Lc(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"p",3),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",4),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.cc(),i.cc(),i.dc(6,"div",5),i.Vc(7),i.cc(),i.dc(8,"div",6),i.dc(9,"div"),i.Vc(10),i.cc(),i.dc(11,"div"),i.Vc(12),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Nb("habbo-plate plate_",t.color,""),i.Kb(3),i.Wc(i.sc(4,7,"widget.furni.trophy.title")),i.Kb(4),i.Wc(t.message),i.Kb(3),i.Wc(t.date),i.Kb(2),i.Wc(t.ownerName)}}let Pc=(()=>{class t extends en{constructor(t){super(),this._ngZone=t,this._visible=!1,this._color=null,this._ownerName=null,this._date=null,this._message=null,this._viewType=null,this.onRoomWidgetTrophyUpdateEvent=this.onRoomWidgetTrophyUpdateEvent.bind(this)}registerUpdateEvents(t){t&&(t.addEventListener(Oe.TROPHY_DATA,this.onRoomWidgetTrophyUpdateEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(Oe.TROPHY_DATA,this.onRoomWidgetTrophyUpdateEvent),super.unregisterUpdateEvents(t))}onRoomWidgetTrophyUpdateEvent(t){t&&this._ngZone.run(()=>{this._visible=!0,this._color=t.color-1,this._ownerName=t.name,this._date=t.date,this._message=t.message,this._viewType=t.viewType,(this._color<0||this._color>2)&&(this._color=0)})}hide(){this._visible=!1}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(t){this._visible=t}get color(){return this._color}get ownerName(){return this._ownerName}get date(){return this._date}get message(){return this._message}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-furniture-trophy-compontent"]],features:[i.Hb],decls:1,vars:1,consts:[["noMemory","true",3,"bringToTop","draggable","class",4,"ngIf"],["noMemory","true",3,"bringToTop","draggable"],[1,"plate_header","drag-handler"],[1,"plate_title"],[1,"plate_close",3,"click"],[1,"plate-mesaj"],[1,"plate-footer"]],template:function(t,e){1&t&&i.Tc(0,Lc,13,9,"div",0),2&t&&i.xc("ngIf",e.visible)},directives:[p.n,Tr,Lr],pipes:[ln],encapsulation:2}),t})();class Fc{constructor(){this._id=0,this._category=0,this._name="",this._description="",this._imageUrl="",this._purchaseOfferId=-1,this._extraParam="",this._stuffData=null,this._ownerId=0,this._ownerName="",this._rentOfferId=-1,this._availableForBuildersClub=!1}get id(){return this._id}set id(t){this._id=t}get category(){return this._category}set category(t){this._category=t}get name(){return this._name}set name(t){this._name=t}get description(){return this._description}set description(t){this._description=t}get imageUrl(){return this._imageUrl}set imageUrl(t){this._imageUrl=t}get purchaseOfferId(){return this._purchaseOfferId}set purchaseOfferId(t){this._purchaseOfferId=t}get extraParam(){return this._extraParam}set extraParam(t){this._extraParam=t}get stuffData(){return this._stuffData}set stuffData(t){this._stuffData=t}set groupId(t){this._groupId=t}get groupId(){return this._groupId}get ownerId(){return this._ownerId}set ownerId(t){this._ownerId=t}get ownerName(){return this._ownerName}set ownerName(t){this._ownerName=t}get rentOfferId(){return this._rentOfferId}set rentOfferId(t){this._rentOfferId=t}get availableForBuildersClub(){return this._availableForBuildersClub}set availableForBuildersClub(t){this._availableForBuildersClub=t}populate(t){this.id=t.id,this.category=t.category,this.name=t.name,this.description=t.description,this.imageUrl=t.image&&t.image.src||null,this.purchaseOfferId=t.purchaseOfferId,this.extraParam=t.extraParam,this.stuffData=t.stuffData,this.groupId=t.groupId,this.ownerName=t.ownerName,this.ownerId=t.ownerId,this.rentOfferId=t.rentOfferId,this.availableForBuildersClub=t.availableForBuildersClub}}class kc{constructor(){this._name="",this._petId=-1}get name(){return this._name}get id(){return this._petId}get type(){return this._type}get race(){return this._race}get image(){return this._image}get _Str_5175(){return this._isOwnPet}get _Str_2481(){return this._ownerId}get ownerName(){return this._ownerName}get _Str_5114(){return this._canRemovePet}get age(){return this._age}get unknownRarityLevel(){return this._breedId}get _Str_3307(){return this._skillTresholds}get publiclyRideable(){return this._accessRights}get level(){return this._level}get _Str_4276(){return this._levelMax}get experience(){return this._experience}get _Str_4095(){return this._experienceMax}get energy(){return this._energy}get _Str_3966(){return this._energyMax}get happyness(){return this._nutrition}get _Str_4448(){return this._nutritionMax}get _Str_6943(){return this._petRespect}get _Str_2707(){return this._roomIndex}get rarityLevel(){return this._rarityLevel}get maximumTimeToLive(){return this._maxWellBeingSeconds}get remainingTimeToLive(){return this._remainingWellBeingSeconds}get remainingGrowTime(){return this._remainingGrowingSeconds}get publiclyBreedable(){return this._hasBreedingPermission}populate(t){this._name=t.name,this._petId=t.id,this._type=t._Str_4355,this._race=t._Str_14767,this._image=t.image,this._isOwnPet=t._Str_5175,this._ownerId=t.ownerId,this._ownerName=t.ownerName,this._canRemovePet=t._Str_5114,this._level=t.level,this._levelMax=t.maximumLevel,this._experience=t.experience,this._experienceMax=t.levelExperienceGoal,this._energy=t.energy,this._energyMax=t.maximumEnergy,this._nutrition=t.happyness,this._nutritionMax=t.maximumHappyness,this._petRespect=t.respect,this._roomIndex=t._Str_2707,this._age=t.age,this._breedId=t.unknownRarityLevel,this._skillTresholds=t._Str_3307,this._accessRights=t.publiclyRideable,this._maxWellBeingSeconds=t.maximumTimeToLive,this._remainingWellBeingSeconds=t.remainingTimeToLive,this._remainingGrowingSeconds=t.remainingGrowTime,this._rarityLevel=t.rarityLevel,this._hasBreedingPermission=t.publiclyBreedable}}class Vc{constructor(){this._id=0,this._name="",this._figure="",this._motto="",this._badges=[],this._carryItem=0,this._roomIndex=-1,this._ownerId=-1,this._ownerName="",this._amIOwner=!1,this._amIAnyRoomController=!1,this._botSkills=[]}get id(){return this._id}set id(t){this._id=t}get name(){return this._name}set name(t){this._name=t}get figure(){return this._figure}set figure(t){this._figure=t}get motto(){return this._motto}set motto(t){this._motto=t}get badges(){return this._badges.slice()}set badges(t){this._badges=t}get carryItem(){return this._carryItem}set carryItem(t){this._carryItem=t}get roomIndex(){return this._roomIndex}set roomIndex(t){this._roomIndex=t}get ownerId(){return this._ownerId}set ownerId(t){this._ownerId=t}get ownerName(){return this._ownerName}set ownerName(t){this._ownerName=t}get amIOwner(){return this._amIOwner}set amIOwner(t){this._amIOwner=t}get amIAnyRoomController(){return this._amIAnyRoomController}set amIAnyRoomController(t){this._amIAnyRoomController=t}get botSkills(){return this._botSkills.slice()}set botSkills(t){this._botSkills=t}populate(t){this.id=t.id,this.name=t.name,this.figure=t.figure,this.motto=t.motto,this.badges=t.badges,this.carryItem=t.carryId,this.roomIndex=t.roomIndex,this.ownerId=t.ownerId,this.ownerName=t.ownerName,this.amIOwner=t._Str_3246,this.amIAnyRoomController=t._Str_3529,this.botSkills=t.botSkills}}class Bc{constructor(){this._id=0,this._name="",this._figure="",this._motto="",this._badges=[],this._groupId=0,this._groupName="",this._groupBadgeId="",this._activityPoints=0,this._respectLeft=0,this._petRespectLeft=0,this._carryItem=0,this._roomIndex=-1,this._type=""}get id(){return this._id}set id(t){this._id=t}get name(){return this._name}set name(t){this._name=t}get figure(){return this._figure}set figure(t){this._figure=t}get motto(){return this._motto}set motto(t){this._motto=t}get badges(){return this._badges.slice()}set badges(t){this._badges=t}get groupId(){return this._groupId}set groupId(t){this._groupId=t}get groupName(){return this._groupName}set groupName(t){this._groupName=t}get groupBadgeId(){return this._groupBadgeId}set groupBadgeId(t){this._groupBadgeId=t}get activityPoints(){return this._activityPoints}set activityPoints(t){this._activityPoints=t}get respectLeft(){return this._respectLeft}set respectLeft(t){this._respectLeft=t}get petRespectLeft(){return this._petRespectLeft}set petRespectLeft(t){this._petRespectLeft=t}get carryItem(){return this._carryItem}set carryItem(t){this._carryItem=t}get roomIndex(){return this._roomIndex}set roomIndex(t){this._roomIndex=t}get type(){return this._type}set type(t){this._type=t}getIsBot(){return this.type===Be.BOT}populate(t){this.id=t.webID,this.name=t.name,this.figure=t.figure,this.motto=t.motto,this.badges=t.badges,this.groupId=t.groupId,this.groupName=t.groupName,this.groupBadgeId=t.groupBadgeId,this.activityPoints=t.activityPoints,this.respectLeft=t.respectLeft,this.petRespectLeft=0,this.carryItem=t.carryId,this.roomIndex=t.roomIndex,this.type=t.type}}let Wc=(()=>{class t{}return t.USER=1,t.BOT=2,t.RENTABLE_BOT=3,t.PET=4,t.FURNI=5,t})();class Kc{constructor(){this.widget=null}hide(){this.widget.close()}update(t){}get type(){return-1}}let Gc=(()=>{class t{constructor(){this.badge="",this.isGroup=!1,this.hover=!0}get badgeUrl(){return this.isGroup?_.a.instance.getConfiguration("badge.asset.group.url").replace("%badgedata%",this.badge):_.a.instance.getConfiguration("badge.asset.url").replace("%badgename%",this.badge)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-badge"]],inputs:{badge:"badge",isGroup:"isGroup",hover:"hover"},decls:1,vars:1,consts:[["image-placeholder","",3,"src"]],template:function(t,e){1&t&&i.Zb(0,"img",0),2&t&&i.xc("src",e.badgeUrl,i.Mc)},directives:[ha],encapsulation:2}),t})();function Hc(t,e){if(1&t&&i.Zb(0,"nitro-badge",16),2&t){const t=i.qc().$implicit;i.xc("badge",t)}}function jc(t,e){if(1&t&&(i.dc(0,"div",14),i.Tc(1,Hc,1,1,"nitro-badge",15),i.cc()),2&t){const t=e.$implicit;i.Kb(1),i.xc("ngIf",""!==t)}}function zc(t,e){if(1&t&&(i.dc(0,"div",17),i.dc(1,"span",18),i.Vc(2),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(2),i.Wc(t.userData.motto)}}function Yc(t,e){if(1&t&&(i.dc(0,"p",19),i.Vc(1),i.cc()),2&t){const t=i.qc();i.Kb(1),i.Wc(t.carryText)}}let qc=(()=>{class t extends Kc{constructor(){super(...arguments),this.userData=null,this.carryText=""}update(t){t&&t.carryId>0&&(this.carryText=_.a.instance.getLocalizationWithParameter("infostand.text.handitem","item",_.a.instance.getLocalization("handitem"+t.carryId)))}get type(){return Wc.BOT}}return t.\u0275fac=function(e){return Zc(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:17,vars:6,consts:[["id","oldhabbo_motto"],[1,"motto-header"],[1,"motto-home_icon"],[1,"motto-username"],[1,"motto-close_button",3,"click"],[1,"motto-hr"],[1,"motto-avatar-view"],[1,"bot"],["nitro-avatar-image","",2,"left","-12px","top","-10px","position","relative",3,"figure","direction"],[1,"motto-badges-section-bot",2,"padding","45px 34px"],["class","motto-badge-box",4,"ngFor","ngForOf"],["class","mottotxtbox","style","position: relative;float: left;",4,"ngIf"],[1,"motto-success-score"],["class","user-score",4,"ngIf"],[1,"motto-badge-box"],[3,"badge",4,"ngIf"],[3,"badge"],[1,"mottotxtbox",2,"position","relative","float","left"],[1,"usermotto"],[1,"user-score"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Zb(2,"div",2),i.dc(3,"div",3),i.Vc(4),i.cc(),i.dc(5,"div",4),i.nc("click",function(){return e.hide()}),i.cc(),i.cc(),i.Zb(6,"div",5),i.dc(7,"div",6),i.dc(8,"div",7),i.Zb(9,"div",8),i.cc(),i.cc(),i.dc(10,"div",9),i.Tc(11,jc,2,1,"div",10),i.cc(),i.Zb(12,"div",5),i.Tc(13,zc,3,1,"div",11),i.Zb(14,"div",5),i.dc(15,"div",12),i.Tc(16,Yc,2,1,"p",13),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Wc(e.userData.name),i.Kb(5),i.xc("figure",e.userData.figure)("direction",4),i.Kb(2),i.xc("ngForOf",e.userData.badges),i.Kb(2),i.xc("ngIf",""!==e.userData.motto),i.Kb(3),i.xc("ngIf",e.userData.carryItem>0))},directives:[_a,p.m,p.n,Gc],encapsulation:2}),t})();const Zc=i.fc(qc);let Xc=(()=>{class t{}return t._Str_21805=0,t._Str_18194=1,t._Str_18353=2,t})(),Qc=(()=>{class t{transform(t){const e=t.toString().split("");let s="";for(let i=0;i<e.length;i++)s=s+'<i class="unique-number n-'+e[i]+'"></i>';return s}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=i.Xb({name:"uniqueNumber",type:t,pure:!0}),t})();function Jc(t,e){if(1&t){const t=i.ec();i.dc(0,"div",18),i.nc("click",function(){return i.Kc(t),i.qc().openFurniGroupInfo()}),i.Zb(1,"nitro-badge",19),i.cc()}if(2&t){const t=i.qc();i.Kb(1),i.xc("badge",t.getStuffDataAsStringDataType.getValue(2))("isGroup",!0)}}function $c(t,e){if(1&t&&(i.dc(0,"div",20),i.Zb(1,"div",21),i.rc(2,"uniqueNumber"),i.Zb(3,"div",21),i.rc(4,"uniqueNumber"),i.cc()),2&t){const t=i.qc();i.Kb(1),i.xc("innerHTML",i.sc(2,2,t.furniData.stuffData.uniqueNumber),i.Lc),i.Kb(2),i.xc("innerHTML",i.sc(4,4,t.furniData.stuffData.uniqueSeries),i.Lc)}}function th(t,e){if(1&t&&i.Zb(0,"img",22),2&t){const t=i.qc();i.xc("src",t.furniData.imageUrl,i.Mc)}}function eh(t,e){if(1&t){const t=i.ec();i.bc(0),i.dc(1,"p",25),i.Vc(2),i.cc(),i.dc(3,"textarea",26),i.nc("ngModelChange",function(s){i.Kc(t);const n=e.index;return i.qc(2).furniSettingsValues[n]=s}),i.cc(),i.ac()}if(2&t){const t=e.index,s=i.qc(2);i.Kb(2),i.Wc(s.furniSettingsKeys[t]),i.Kb(1),i.xc("ngModel",s.furniSettingsValues[t])}}function sh(t,e){if(1&t&&(i.dc(0,"div",23),i.Tc(1,eh,4,2,"ng-container",24),i.cc()),2&t){const t=i.qc();i.Kb(1),i.xc("ngForOf",t.furniSettingsKeys)}}const ih=function(){return["hits","target"]},nh=function(t,e){return[t,e]};function rh(t,e){if(1&t&&(i.dc(0,"div",14),i.Vc(1),i.rc(2,"translate"),i.cc()),2&t){const t=i.qc();i.Kb(1),i.Wc(i.uc(2,1,"infostand.crackable_furni.hits_remaining",i.Ac(5,ih),i.Cc(6,nh,t.crackableHits,t.crackableTarget)))}}function ah(t,e){if(1&t){const t=i.ec();i.dc(0,"div",27),i.nc("click",function(){return i.Kc(t),i.qc().processButtonAction("move")}),i.Zb(1,"img",28),i.dc(2,"p",29),i.Vc(3),i.rc(4,"translate"),i.cc(),i.cc()}2&t&&(i.Kb(3),i.Wc(i.sc(4,1,"infostand.button.move")))}function oh(t,e){if(1&t){const t=i.ec();i.dc(0,"div",27),i.nc("click",function(){return i.Kc(t),i.qc().processButtonAction("rotate")}),i.Zb(1,"img",30),i.dc(2,"p",29),i.Vc(3),i.rc(4,"translate"),i.cc(),i.cc()}2&t&&(i.Kb(3),i.Wc(i.sc(4,1,"infostand.button.rotate")))}function ch(t,e){if(1&t){const t=i.ec();i.dc(0,"div",27),i.nc("click",function(){return i.Kc(t),i.qc().processButtonAction("pickup")}),i.Zb(1,"img",31),i.dc(2,"p",29),i.Vc(3),i.rc(4,"translate"),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.sc(4,1,1===t.pickupMode?"infostand.button.eject":"infostand.button.pickup"))}}function hh(t,e){if(1&t){const t=i.ec();i.dc(0,"div",27),i.nc("click",function(){return i.Kc(t),i.qc().processButtonAction("use")}),i.Zb(1,"img",32),i.dc(2,"p",29),i.Vc(3),i.rc(4,"translate"),i.cc(),i.cc()}2&t&&(i.Kb(3),i.Wc(i.sc(4,1,"infostand.button.use")))}function lh(t,e){if(1&t){const t=i.ec();i.dc(0,"div",27),i.nc("click",function(){return i.Kc(t),i.qc().processButtonAction("save_branding_configuration")}),i.dc(1,"p",29),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()}2&t&&(i.Kb(2),i.Wc(i.sc(3,1,"save")))}let uh=(()=>{class t extends Kc{constructor(){super(...arguments),this.furniData=null,this.pickupMode=0,this.canMove=!1,this.canRotate=!1,this.canUse=!1,this.furniSettingsKeys=[],this.furniSettingsValues=[],this.isCrackable=!1,this.crackableHits=0,this.crackableTarget=0}update(t){this.furniSettingsKeys=[],this.furniSettingsValues=[],this.isCrackable=!1,this.crackableHits=0,this.crackableTarget=0;let e=!1,s=!1,i=!1,n=!1;const r=t.roomControllerLevel>=H.a.GUEST;if((r||t.isOwner||t.isRoomOwner||t.isAnyRoomOwner)&&(e=!0,s=!t.isWallItem,t.roomControllerLevel>=H.a.MODERATOR&&(n=!0)),(t.usagePolicy===Xc._Str_18353||t.usagePolicy===Xc._Str_18194&&r||t.extraParam===xe.a.JUKEBOX&&r||t.extraParam==xe.a.USABLE_PRODUCT&&r)&&(i=!0),t.extraParam){if(t.extraParam===xe.a.CRACKABLE_FURNI){const e=t.stuffData;i=!0,this.isCrackable=!0,this.crackableHits=e.hits,this.crackableTarget=e.target}if(n){const e=t.extraParam.substr(xe.a.BRANDING_OPTIONS.length);if(e){const t=e.split("\t");for(const e of t){const t=e.split("=");t&&2===t.length&&(this.furniSettingsKeys.push(t[0]),this.furniSettingsValues.push(t[1]))}}}}this.canMove=e,this.canRotate=s,this.canUse=i,this.togglePickupButton(t)}togglePickupButton(e){e&&(this.pickupMode=t.PICKUP_MODE_NONE,e.isOwner||e.isAnyRoomOwner?this.pickupMode=t.PICKUP_MODE_FULL:(e.isRoomOwner||e.roomControllerLevel>=H.a.GUILD_ADMIN)&&(this.pickupMode=t.PICKUP_MODE_EJECT),e.isStickie&&(this.pickupMode=t.PICKUP_MODE_NONE))}processButtonAction(e){if(!e||""===e)return;let s=null,i=null;switch(e){case"move":s=Ke.RWFAM_MOVE;break;case"rotate":s=Ke.RWFUAM_ROTATE;break;case"pickup":s=this.pickupMode===t.PICKUP_MODE_FULL?Ke.RWFAM_PICKUP:Ke.RWFAM_EJECT;break;case"use":s=Ke.RWFAM_USE;break;case"save_branding_configuration":s=Ke.RWFAM_SAVE_STUFF_DATA,i=this.getSettingsAsString()}s&&this.widget.messageListener.processWidgetMessage(new Ke(s,this.furniData.id,this.furniData.category,this.furniData.purchaseOfferId,i))}getSettingsAsString(){if(!this.furniSettingsKeys.length||!this.furniSettingsValues.length)return"";let t="",e=0;for(;e<this.furniSettingsKeys.length;)t=t+(this.furniSettingsKeys[e]+"=")+this.furniSettingsValues[e]+"\t",e++;return t}openFurniGroupInfo(){this.furniData.groupId&&_.a.instance.createLinkEvent("groups/info/"+this.furniData.groupId)}get getStuffDataAsStringDataType(){return this.furniData?this.furniData.stuffData:null}get type(){return Wc.FURNI}}return t.PICKUP_MODE_NONE=0,t.PICKUP_MODE_EJECT=1,t.PICKUP_MODE_FULL=2,t.\u0275fac=function(e){return _h(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:28,vars:17,consts:[[1,"corelo-infofurni"],[1,"d-flex","flex-column","align-items-end"],[1,"furni-infobox"],[1,"f-ib-head"],[1,"furniname"],[1,"furni_info-close",3,"click"],[1,"motto-hr"],[1,"furniview-box"],["class","mobinfo-group",3,"click",4,"ngIf"],["class","unique-counter-compact","style","top: 5px;",4,"ngIf"],["class","fvb","image-placeholder","",3,"src",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"furnidesc"],[1,"fi-uinfo"],[1,"fi-uname"],["class","fi-uname",4,"ngIf"],[1,"button-container","btn-group"],["class","infofurni-button",3,"click",4,"ngIf"],[1,"mobinfo-group",3,"click"],[3,"badge","isGroup"],[1,"unique-counter-compact",2,"top","5px"],[3,"innerHTML"],["image-placeholder","",1,"fvb",3,"src"],[1,"mt-3"],[4,"ngFor","ngForOf"],[1,"habbobginput-txt"],[1,"habbobginput",3,"ngModel","ngModelChange"],[1,"infofurni-button",3,"click"],["src","/assets/images/mover.png",2,"float","left","margin","6px 0px 6px 6px"],[1,"fbutton-txt"],["src","/assets/images/rotate.png",2,"float","left","margin","7px 0px 6px 6px"],["src","/assets/images/pickup.png",2,"float","left","margin","7px 0px 6px 6px"],["src","/assets/images/use.png",2,"float","left","margin","8px 0px 8px 6px"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"div",2),i.dc(3,"div",3),i.dc(4,"div",4),i.Vc(5),i.cc(),i.dc(6,"div",5),i.nc("click",function(){return e.hide()}),i.cc(),i.cc(),i.Zb(7,"div",6),i.dc(8,"div",7),i.Tc(9,Jc,2,2,"div",8),i.Tc(10,$c,5,6,"div",9),i.Tc(11,th,1,1,"img",10),i.cc(),i.Zb(12,"div",6),i.Tc(13,sh,2,1,"div",11),i.dc(14,"div",12),i.Vc(15),i.cc(),i.Zb(16,"div",6),i.Zb(17,"div",13),i.dc(18,"div",14),i.Vc(19),i.rc(20,"translate"),i.cc(),i.Tc(21,rh,3,9,"div",15),i.cc(),i.dc(22,"div",16),i.Tc(23,ah,5,3,"div",17),i.Tc(24,oh,5,3,"div",17),i.Tc(25,ch,5,3,"div",17),i.Tc(26,hh,5,3,"div",17),i.Tc(27,lh,4,3,"div",17),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(5),i.Wc(e.furniData.name),i.Kb(4),i.xc("ngIf",e.furniData.groupId),i.Kb(1),i.xc("ngIf",e.furniData.stuffData.isUnique),i.Kb(1),i.xc("ngIf",e.furniData.imageUrl),i.Kb(2),i.xc("ngIf",e.furniSettingsKeys.length&&e.furniSettingsValues.length&&e.furniSettingsKeys.length===e.furniSettingsValues.length),i.Kb(2),i.Wc(e.furniData.description),i.Kb(4),i.Wc(i.uc(20,13,"furni.owner","name",e.furniData.ownerName)),i.Kb(2),i.xc("ngIf",e.isCrackable),i.Kb(2),i.xc("ngIf",e.canMove),i.Kb(1),i.xc("ngIf",e.canRotate),i.Kb(1),i.xc("ngIf",0!==e.pickupMode),i.Kb(1),i.xc("ngIf",e.canUse),i.Kb(1),i.xc("ngIf",e.furniSettingsKeys.length&&e.furniSettingsValues.length&&e.furniSettingsKeys.length===e.furniSettingsValues.length))},directives:[p.n,Gc,ha,p.m,rr.b,rr.l,rr.n],pipes:[ln,Qc],encapsulation:2}),t})();const _h=i.fc(uh);let dh=(()=>{class t extends Kc{processButtonAction(t){}get type(){return Wc.PET}}return t.\u0275fac=function(e){return gh(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:25,vars:12,consts:[[1,"corelo-infofurni"],[1,"d-flex","flex-column","align-items-end"],[1,"furni-infobox"],[1,"f-ib-head"],[1,"furniname"],[1,"furni_info-close",3,"click"],[1,"motto-hr"],[1,"furniview-box"],[1,"button-container","btn-group"],[1,"infofurni-button",3,"click"],["src","/assets/images/mover.png",2,"float","left","margin","6px 0px 6px 6px"],[1,"fbutton-txt"],["src","/assets/images/pickup.png",2,"float","left","margin","7px 0px 6px 6px"],["src","/assets/images/use.png",2,"float","left","margin","8px 0px 8px 6px"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"div",2),i.dc(3,"div",3),i.dc(4,"div",4),i.Vc(5),i.cc(),i.dc(6,"div",5),i.nc("click",function(){return e.hide()}),i.cc(),i.cc(),i.Zb(7,"div",6),i.Zb(8,"div",7),i.cc(),i.dc(9,"div",8),i.dc(10,"div",9),i.nc("click",function(){return e.processButtonAction("buyfood")}),i.Zb(11,"img",10),i.dc(12,"p",11),i.Vc(13),i.rc(14,"translate"),i.cc(),i.cc(),i.dc(15,"div",9),i.nc("click",function(){return e.processButtonAction("respect")}),i.Zb(16,"img",12),i.dc(17,"p",11),i.Vc(18),i.rc(19,"translate"),i.cc(),i.cc(),i.dc(20,"div",9),i.nc("click",function(){return e.processButtonAction("kick")}),i.Zb(21,"img",13),i.dc(22,"p",11),i.Vc(23),i.rc(24,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(5),i.Wc(e.petData.name),i.Kb(8),i.Wc(i.sc(14,4,"infostand.button.buyfood")),i.Kb(5),i.Wc(i.uc(19,6,"infostand.button.petrespect","count","0")),i.Kb(5),i.Wc(i.sc(24,10,"infostand.button.kick")))},pipes:[ln],encapsulation:2}),t})();const gh=i.fc(dh);function mh(t,e){if(1&t&&i.Zb(0,"nitro-badge",16),2&t){const t=i.qc().$implicit;i.xc("badge",t)}}function ph(t,e){if(1&t&&(i.dc(0,"div",14),i.Tc(1,mh,1,1,"nitro-badge",15),i.cc()),2&t){const t=e.$implicit;i.Kb(1),i.xc("ngIf",""!==t)}}function fh(t,e){if(1&t&&(i.dc(0,"div",17),i.dc(1,"span",18),i.Vc(2),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(2),i.Wc(t.botData.motto)}}function Eh(t,e){if(1&t&&(i.dc(0,"p",19),i.Vc(1),i.cc()),2&t){const t=i.qc();i.Kb(1),i.Wc(t.ownerText)}}function Sh(t,e){if(1&t&&(i.dc(0,"p",19),i.Vc(1),i.cc()),2&t){const t=i.qc();i.Kb(1),i.Wc(t.carryText)}}let vh=(()=>{class t extends Kc{constructor(){super(...arguments),this.botData=null,this.ownerText="",this.carryText=""}update(t){t&&(this.ownerText=_.a.instance.getLocalizationWithParameter("infostand.text.botowner","name",this.botData.ownerName),t.carryId>0&&(this.carryText=_.a.instance.getLocalizationWithParameter("infostand.text.handitem","item",_.a.instance.getLocalization("handitem"+t.carryId))))}get type(){return Wc.RENTABLE_BOT}pickup(){this.hide(),_.a.instance.communication.connection.send(new sr.a(this.botData.id))}}return t.\u0275fac=function(e){return bh(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:20,vars:7,consts:[["id","oldhabbo_motto"],[1,"motto-header"],[1,"motto-home_icon"],[1,"motto-username"],[1,"motto-close_button",3,"click"],[1,"motto-hr"],[1,"motto-avatar-view"],[1,"bot"],["nitro-avatar-image","",2,"left","-12px","top","-10px","position","relative",3,"figure","direction"],[1,"motto-badges-section-bot"],["class","motto-badge-box",4,"ngFor","ngForOf"],["class","mottotxtbox","style","position: relative;float: left;",4,"ngIf"],[1,"motto-success-score"],["class","user-score",4,"ngIf"],[1,"motto-badge-box"],[3,"badge",4,"ngIf"],[3,"badge"],[1,"mottotxtbox",2,"position","relative","float","left"],[1,"usermotto"],[1,"user-score"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Zb(2,"div",2),i.dc(3,"div",3),i.Vc(4),i.cc(),i.dc(5,"div",4),i.nc("click",function(){return e.hide()}),i.cc(),i.cc(),i.Zb(6,"div",5),i.dc(7,"div",6),i.dc(8,"div",7),i.Zb(9,"div",8),i.cc(),i.cc(),i.dc(10,"div",9),i.Tc(11,ph,2,1,"div",10),i.cc(),i.Zb(12,"div",5),i.Tc(13,fh,3,1,"div",11),i.Zb(14,"div",5),i.dc(15,"div",12),i.Tc(16,Eh,2,1,"p",13),i.cc(),i.Zb(17,"div",5),i.dc(18,"div",12),i.Tc(19,Sh,2,1,"p",13),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Wc(e.botData.name),i.Kb(5),i.xc("figure",e.botData.figure)("direction",4),i.Kb(2),i.xc("ngForOf",e.botData.badges),i.Kb(2),i.xc("ngIf",""!==e.botData.motto),i.Kb(3),i.xc("ngIf",e.botData.ownerId>0),i.Kb(3),i.xc("ngIf",e.botData.carryItem>0))},directives:[_a,p.m,p.n,Gc],encapsulation:2}),t})();const bh=i.fc(vh);function Ih(t,e){if(1&t&&i.Zb(0,"nitro-badge",25),2&t){const t=i.qc().$implicit;i.xc("badge",t)}}function Rh(t,e){if(1&t&&(i.dc(0,"div",23),i.Tc(1,Ih,1,1,"nitro-badge",24),i.cc()),2&t){const t=e.$implicit;i.Kb(1),i.xc("ngIf",""!==t)}}function Th(t,e){if(1&t){const t=i.ec();i.dc(0,"div"),i.Zb(1,"i",26),i.dc(2,"textarea",27),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().userData.motto=e})("keyup",function(e){return i.Kc(t),i.qc().resizeTextArea(e)})("keydown.enter",function(e){return i.Kc(t),i.qc().saveMotto(e)}),i.rc(3,"translate"),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(2),i.yc("placeholder",i.sc(3,2,"infostand.motto.change")),i.xc("ngModel",t.userData.motto)}}function Oh(t,e){if(1&t&&(i.dc(0,"div",28),i.dc(1,"span",29),i.Vc(2),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(2),i.Wc(t.userData.motto)}}function yh(t,e){if(1&t&&(i.dc(0,"p",30),i.Vc(1),i.cc()),2&t){const t=i.qc();i.Kb(1),i.Wc(t.carryText)}}let Ch=(()=>{class t extends Kc{constructor(){super(...arguments),this.userData=null,this.carryText=""}update(t){t&&t.carryId>0&&(this.carryText=_.a.instance.getLocalizationWithParameter("infostand.text.handitem","item",_.a.instance.getLocalization("handitem"+t.carryId)))}resizeTextArea(t){if(!t)return;const e=t.target;e&&(e.style.height="0px",e.style.height=e.scrollHeight+"px")}saveMotto(t){this.userData.motto.length>38||(t.target.blur(),this.widget.messageListener.processWidgetMessage(new We(this.userData.motto)))}visitProfile(){_.a.instance.createLinkEvent("profile/goto/"+this.userData.id)}get isOwnProfile(){return this.userData.type===Be.OWN_USER}get type(){return Wc.USER}}return t.\u0275fac=function(e){return Ah(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:37,vars:20,consts:[["id","oldhabbo_motto"],[1,"motto-header"],[1,"motto-home_icon"],[1,"motto-username",3,"click"],[1,"motto-close_button",3,"click"],[1,"motto-hr"],[1,"motto-avatar-view"],["nitro-avatar-image","",2,"left","-12px","top","-10px","position","relative",3,"figure","direction"],[1,"motto-badges-section"],["class","motto-badge-box",4,"ngFor","ngForOf"],[4,"ngIf"],["class","mottotxtbox","style","position: relative;float: left;",4,"ngIf"],[1,"motto-success-score"],[1,"succes-score_name"],["class","user-score",4,"ngIf"],[1,"motto_expressions-box",2,"display","none"],[1,"motto_heart-user"],["src","./assets/images/motto/kalp.png",1,"expressions-ico"],[1,"motto_expressions-username"],[1,"motto_smile-user"],["src","./assets/images/motto/gulucuk.png",1,"expressions-ico"],[1,"motto_angry_face_user"],["src","./assets/images/motto/kurukafa.png",1,"expressions-ico"],[1,"motto-badge-box"],[3,"badge",4,"ngIf"],[3,"badge"],[1,"icon","pencil-icon"],["maxlength","38","wrap","soft","rows","1",1,"mottotxtbox",3,"ngModel","placeholder","ngModelChange","keyup","keydown.enter"],[1,"mottotxtbox",2,"position","relative","float","left"],[1,"usermotto"],[1,"user-score"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Zb(2,"div",2),i.dc(3,"div",3),i.nc("click",function(){return e.visitProfile()}),i.Vc(4),i.cc(),i.dc(5,"div",4),i.nc("click",function(){return e.hide()}),i.cc(),i.cc(),i.Zb(6,"div",5),i.dc(7,"div",6),i.Zb(8,"div",7),i.cc(),i.dc(9,"div",8),i.Tc(10,Rh,2,1,"div",9),i.cc(),i.Zb(11,"div",5),i.Tc(12,Th,4,4,"div",10),i.Tc(13,Oh,3,1,"div",11),i.Zb(14,"div",5),i.dc(15,"div",12),i.dc(16,"p",13),i.Vc(17),i.rc(18,"translate"),i.cc(),i.Tc(19,yh,2,1,"p",14),i.cc(),i.Zb(20,"div",5),i.dc(21,"div",15),i.dc(22,"div",16),i.Zb(23,"img",17),i.dc(24,"p",18),i.Vc(25),i.rc(26,"translate"),i.cc(),i.cc(),i.dc(27,"div",19),i.Zb(28,"img",20),i.dc(29,"p",18),i.Vc(30),i.rc(31,"translate"),i.cc(),i.cc(),i.dc(32,"div",21),i.Zb(33,"img",22),i.dc(34,"p",18),i.Vc(35),i.rc(36,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Wc(e.userData.name),i.Kb(4),i.xc("figure",e.userData.figure)("direction",4),i.Kb(2),i.xc("ngForOf",e.userData.badges),i.Kb(2),i.xc("ngIf",e.isOwnProfile),i.Kb(1),i.xc("ngIf",!e.isOwnProfile),i.Kb(4),i.Yc("",i.sc(18,12,"extendedprofile.achievementscore")," ",e.userData.activityPoints,""),i.Kb(2),i.xc("ngIf",e.userData.carryItem>0),i.Kb(6),i.Wc(i.sc(26,14,"extendedprofile.add.friends")),i.Kb(5),i.Wc(i.sc(31,16,"extendedprofile.add.friends")),i.Kb(5),i.Wc(i.sc(36,18,"extendedprofile.add.friends")))},directives:[_a,p.m,p.n,Gc,rr.b,rr.i,rr.l,rr.n],pipes:[ln],encapsulation:2}),t})();const Ah=i.fc(Ch),Mh=["infostandsContainer"];let wh=(()=>{class t extends en{constructor(t,e,s){super(),this._inventoryService=t,this._componentFactoryResolver=e,this._ngZone=s,this._lastComponent=null,this._furniData=new Fc,this._userData=new Bc,this._petData=new kc,this._botData=new Vc,this.objectSelectedHandler=this.objectSelectedHandler.bind(this),this.objectDeselectedHandler=this.objectDeselectedHandler.bind(this),this.objectRemovedHandler=this.objectRemovedHandler.bind(this),this.userInfostandUpdateHandler=this.userInfostandUpdateHandler.bind(this),this.botInfostandUpdateHandler=this.botInfostandUpdateHandler.bind(this),this.furniInfostandUpdateHandler=this.furniInfostandUpdateHandler.bind(this),this.rentableBotInfostandUpdateHandler=this.rentableBotInfostandUpdateHandler.bind(this),this.petInfostandUpdateHandler=this.petInfostandUpdateHandler.bind(this)}registerUpdateEvents(t){t&&(t.addEventListener($.OBJECT_SELECTED,this.objectSelectedHandler),t.addEventListener($.OBJECT_DESELECTED,this.objectDeselectedHandler),t.addEventListener($.USER_REMOVED,this.objectRemovedHandler),t.addEventListener($.FURNI_REMOVED,this.objectRemovedHandler),t.addEventListener(Be.OWN_USER,this.userInfostandUpdateHandler),t.addEventListener(Be.PEER,this.userInfostandUpdateHandler),t.addEventListener(Be.BOT,this.botInfostandUpdateHandler),t.addEventListener(Fe.FURNI,this.furniInfostandUpdateHandler),t.addEventListener(Ve.RENTABLE_BOT,this.rentableBotInfostandUpdateHandler),t.addEventListener(ke.PET_INFO,this.petInfostandUpdateHandler),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener($.OBJECT_SELECTED,this.objectSelectedHandler),t.removeEventListener($.OBJECT_DESELECTED,this.objectDeselectedHandler),t.removeEventListener($.USER_REMOVED,this.objectRemovedHandler),t.removeEventListener($.FURNI_REMOVED,this.objectRemovedHandler),t.removeEventListener(Be.OWN_USER,this.userInfostandUpdateHandler),t.removeEventListener(Be.PEER,this.userInfostandUpdateHandler),t.removeEventListener(Be.BOT,this.botInfostandUpdateHandler),t.removeEventListener(Fe.FURNI,this.furniInfostandUpdateHandler),t.removeEventListener(Ve.RENTABLE_BOT,this.rentableBotInfostandUpdateHandler),t.removeEventListener(ke.PET_INFO,this.petInfostandUpdateHandler),super.unregisterUpdateEvents(t))}close(){this.infostandsContainer.length&&this.infostandsContainer.remove(),this._lastComponent=null}objectSelectedHandler(t){this.messageListener.processWidgetMessage(new lt(lt.GET_OBJECT_INFO,t.id,t.category))}objectDeselectedHandler(t){this._ngZone.run(()=>this.close())}objectRemovedHandler(t){let e=!1;const s=this._lastComponent&&this._lastComponent.instance.type||-1;if(-1===s&&(e=!0),s>0)switch(t.type){case $.FURNI_REMOVED:s===Wc.FURNI&&t.id===this._furniData.id&&(e=!0);break;case $.USER_REMOVED:(s===Wc.USER&&t.id===this._userData.id||s===Wc.PET&&t.id===this._petData._Str_2707||s===Wc.BOT&&t.id===this._userData.id||s===Wc.RENTABLE_BOT&&t.id===this._botData.id)&&(e=!0)}e&&this._ngZone.run(()=>this.close())}userInfostandUpdateHandler(t){t&&this._ngZone.run(()=>{this._userData.populate(t);const e=this.getInfoStand(t);e&&(e.userData=this._userData,e.update(t))})}botInfostandUpdateHandler(t){t&&this._ngZone.run(()=>{this._userData.populate(t);const e=this.getInfoStand(t);e&&(e.userData=this._userData,e.update(t))})}furniInfostandUpdateHandler(t){t&&this._ngZone.run(()=>{this._furniData.populate(t);const e=this.getInfoStand(t);e&&(e.furniData=this._furniData,e.update(t))})}rentableBotInfostandUpdateHandler(t){t&&this._ngZone.run(()=>{this._botData.populate(t);const e=this.getInfoStand(t);e&&(e.botData=this._botData,e.update(t))})}petInfostandUpdateHandler(t){t&&this._ngZone.run(()=>{this._petData.populate(t);const e=this.getInfoStand(t);e&&(e.petData=this._petData,e.update(t))})}updateUserBadges(t,e){t===this._userData.id&&(this._userData.getIsBot()||this._ngZone.run(()=>this._userData.badges=e))}getInfoStand(t){const e=this.getInfoStandComponentType(t);if(!e)return null;if(this._lastComponent&&this._lastComponent.instance instanceof e)return this._lastComponent.instance;this.infostandsContainer.length&&this.infostandsContainer.remove();const s=this._componentFactoryResolver.resolveComponentFactory(e);let i=null;return s&&(i=this.infostandsContainer.createComponent(s)),this._lastComponent=i,i?(i.instance.widget=this,i.instance):null}get furniData(){return this._furniData}getInfoStandComponentType(t){if(!t)return null;switch(t.type){case Be.BOT:return qc;case Fe.FURNI:return uh;case ke.PET_INFO:return dh;case Ve.RENTABLE_BOT:return vh;case Be.OWN_USER:case Be.PEER:return Ch}return null}get handler(){return this.widgetHandler}get inventoryTrading(){return this._inventoryService.controller.tradeService}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Sa),i.Yb(i.m),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&i.bd(Mh,1,i.Z),2&t){let t;i.Gc(t=i.oc())&&(e.infostandsContainer=t.first)}},features:[i.Hb],decls:3,vars:0,consts:[[1,"nitro-room-infostand-component"],["infostandsContainer",""]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Zb(1,"div",null,1),i.cc())},encapsulation:2}),t})();function Dh(t,e){if(1&t){const t=i.ec();i.dc(0,"div",9),i.dc(1,"p",10),i.Vc(2),i.cc(),i.dc(3,"div",11),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc(2).accept(s)}),i.cc(),i.dc(4,"div",12),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc(2).deny(s)}),i.cc(),i.cc()}if(2&t){const t=e.$implicit;i.Kb(2),i.Xc("",t," ")}}function Nh(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"p",3),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",4),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.cc(),i.cc(),i.dc(6,"div",5),i.dc(7,"p",6),i.Vc(8,"Following users are ringing the doorbell:"),i.cc(),i.dc(9,"div",7),i.Tc(10,Dh,5,1,"div",8),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.sc(4,2,"widgets.doorbell.title")),i.Kb(7),i.xc("ngForOf",t.users)}}let Uh=(()=>{class t extends en{constructor(t){super(),this._ngZone=t,this._visible=!1,this._users=[],this.onRoomRinging=this.onRoomRinging.bind(this),this.onRoomAcceptedAndRejected=this.onRoomAcceptedAndRejected.bind(this)}registerUpdateEvents(t){t&&(t.addEventListener(Nt.RWDE_RINGING,this.onRoomRinging),t.addEventListener(Nt.REJECTED,this.onRoomAcceptedAndRejected),t.addEventListener(Nt.RWDE_ACCEPTED,this.onRoomAcceptedAndRejected),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(Nt.RWDE_RINGING,this.onRoomRinging),t.removeEventListener(Nt.REJECTED,this.onRoomAcceptedAndRejected),t.removeEventListener(Nt.RWDE_ACCEPTED,this.onRoomAcceptedAndRejected),super.unregisterUpdateEvents(t))}onRoomRinging(t){t&&this._ngZone.run(()=>this.addUser(t.userName))}onRoomAcceptedAndRejected(t){t&&this._ngZone.run(()=>this.removeUser(t.userName))}addUser(t){this._users.indexOf(t)>=0||(this._users.length>=50?this.deny(t):(this._visible=!0,this._users.push(t)))}removeUser(t){const e=this._users.indexOf(t);-1!==e&&(this._users.splice(e,1),this._users.length||(this._visible=!1))}deny(t){this.messageListener.processWidgetMessage(new Dt(t,!1)),this.removeUser(t)}accept(t){this.messageListener.processWidgetMessage(new Dt(t,!0)),this.removeUser(t)}hide(){this._visible=!1}get visible(){return this._visible}get users(){return this._users}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-doorbell-component"]],features:[i.Hb],decls:1,vars:1,consts:[["id","doorbell-bekleme","noMemory","true",3,"bringToTop","draggable",4,"ngIf"],["id","doorbell-bekleme","noMemory","true",3,"bringToTop","draggable"],[1,"doorbell-bekleme_head","drag-handler"],[1,"db-baslik"],[1,"old-kapat",3,"click"],[1,"dbekleme-body"],[1,"doorbell-bekleme-desc"],[1,"doorbell-bekleme-list"],["class","doorbell-usernamebox",4,"ngFor","ngForOf"],[1,"doorbell-usernamebox"],[1,"username-txt"],[1,"odaya-al",3,"click"],[1,"odaya-alma",3,"click"]],template:function(t,e){1&t&&i.Tc(0,Nh,11,4,"div",0),2&t&&i.xc("ngIf",e.visible)},directives:[p.n,Tr,Lr,p.m],pipes:[ln],encapsulation:2}),t})();var xh=s("UTIc"),Lh=s("oHxB"),Ph=s("JDjE"),Fh=s("5BHI"),kh=s("443f"),Vh=s("JCII"),Bh=s("vx5b"),Wh=s("6vif"),Kh=s("xycO"),Gh=s("c7QS"),Hh=s("V1nr"),jh=s("pDhE"),zh=s("00EK"),Yh=s("8lyR"),qh=s("KsdP"),Zh=s("qKi6"),Xh=s("zRn8"),Qh=s("zWsf"),Jh=s("S5/W"),$h=s("6RUH"),tl=s("vA8V"),el=s("V5Lx"),sl=s("S8Tn"),il=s("UdUS"),nl=s("lulp"),rl=s("Zim7"),al=s("o/0e"),ol=s("mP1c");class cl{constructor(){this._enteredGuestRoom=null,this._staffPick=!1,this._createdRoomId=0,this._currentRoomId=0,this._currentRoomOwner=!1,this._canRate=!1}get enteredGuestRoom(){return this._enteredGuestRoom}set enteredGuestRoom(t){this._enteredGuestRoom=t}get staffPick(){return this._staffPick}set staffPick(t){this._staffPick=t}get createdRoomId(){return this._createdRoomId}set createdRoomId(t){this._createdRoomId=t}get currentRoomId(){return this._currentRoomId}set currentRoomId(t){this._currentRoomId=t}get currentRoomOwner(){return this._currentRoomOwner}set currentRoomOwner(t){this._currentRoomOwner=t}get canRate(){return this._canRate}set canRate(t){this._canRate=t}}let hl=(()=>{class t{constructor(e,s,i){this._notificationService=e,this._settingsService=s,this._ngZone=i,this._roomInfoShowing=!1,this._messages=[],this._component=null,this._topLevelContexts=[],this._topLevelContext=null,this._categories=[],this._filter=t.SEARCH_FILTERS[0],this._lastSearchResults=[],this._lastSearch="",this._data=new cl,this._tradeSettings=[],this._homeRoomId=-1,this._isSearching=!1,this._isLoaded=!1,this._isLoading=!1,this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.setTradeSettings(),this.registerMessages(),_.a.instance.addLinkEventTracker(this),l.a.available&&l.a.addCallback(L.a.OPENROOM,this.enterRoomWebRequest)}ngOnDestroy(){this.unregisterMessages(),_.a.instance.removeLinkEventTracker(this)}registerMessages(){this._ngZone.runOutsideAngular(()=>{_.a.instance.roomSessionManager.events.addEventListener(w.a.CREATED,this.onRoomSessionEvent),this._messages=[new $s.a(this.onUserInfoEvent.bind(this)),new Zh.a(this.onRoomForwardEvent.bind(this)),new Js.a(this.onRoomInfoOwnerEvent.bind(this)),new Se.a(this.onRoomInfoEvent.bind(this)),new qh.a(this.onRoomEnterErrorEvent.bind(this)),new Jh.a(this.onRoomCreatedEvent.bind(this)),new zh.a(this.onRoomDoorbellEvent.bind(this)),new jh.a(this.onRoomDoorbellAcceptedEvent.bind(this)),new Xh.a(this.onRoomScoreEvent.bind(this)),new Qh.a(this.onRoomSettingsUpdatedEvent.bind(this)),new xh.a(this.onGenericErrorEvent.bind(this)),new Yh.a(this.onRoomDoorbellRejectedEvent.bind(this)),new Lh.a(this.onNavigatorCategoriesEvent.bind(this)),new Ph.a(this.onNavigatorCollapsedEvent.bind(this)),new Fh.a(this.onNavigatorEventCategoriesEvent.bind(this)),new Vh.a(this.onNavigatorLiftedEvent.bind(this)),new Bh.a(this.onNavigatorMetadataEvent.bind(this)),new Wh.a(this.onNavigatorOpenRoomCreatorEvent.bind(this)),new Kh.a(this.onNavigatorSearchesEvent.bind(this)),new Gh.a(this.onNavigatorSearchEvent.bind(this)),new Hh.a(this.onNavigatorSettingsEvent.bind(this)),new kh.a(this.onNavigatorHomeRoomEvent.bind(this))];for(const t of this._messages)_.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{_.a.instance.roomSessionManager.events.removeEventListener(w.a.CREATED,this.onRoomSessionEvent);for(const t of this._messages)_.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomSessionEvent(t){if(t)switch(t.type){case w.a.CREATED:return void this._ngZone.run(()=>this._settingsService.hideNavigator())}}onUserInfoEvent(t){t&&t.getParser()&&(_.a.instance.communication.connection.send(new el.a),_.a.instance.communication.connection.send(new nl.a))}onRoomForwardEvent(t){if(!(t instanceof Zh.a))return;const e=t.getParser();e&&_.a.instance.communication.connection.send(new ve.a(e.roomId,!1,!0))}onRoomInfoOwnerEvent(t){if(!(t instanceof Js.a))return;const e=t.getParser();e&&(this._ngZone.run(()=>{this._data.currentRoomOwner=!1,this._data.currentRoomOwner=e.isOwner,this._data.currentRoomId=e.roomId}),_.a.instance.communication.connection.send(new ve.a(e.roomId,!0,!1)),l.a.call("legacyTrack","navigator","private",[e.roomId]))}onRoomInfoEvent(t){if(!(t instanceof Se.a))return;const e=t.getParser();e&&this._ngZone.run(()=>{if(e.roomEnter)this._data.enteredGuestRoom=e.data,this._data.staffPick=e.data.roomPicker,this._data.createdRoomId=0;else if(e.roomForward){if(e.data.ownerName!==_.a.instance.sessionDataManager.userName&&!e.isGroupMember)switch(e.data.doorMode){case al.a.DOORBELL_STATE:return void this.openRoomDoorbell(e.data);case al.a.PASSWORD_STATE:return void this.openRoomPassword(e.data)}this.goToRoom(e.data.roomId)}else this._data.enteredGuestRoom=e.data,this._data.staffPick=e.data.roomPicker})}onRoomEnterErrorEvent(t){if(!(t instanceof qh.a))return;const e=t.getParser();if(!e)return;this._ngZone.run(()=>{switch(e.reason){case rl.a.FULL_ERROR:this._notificationService.alert("${navigator.guestroomfull.text}","${navigator.guestroomfull.title}");break;case rl.a.QUEUE_ERROR:this._notificationService.alert("${room.queue.error. "+e.parameter+"}","${room.queue.error.title}");break;case rl.a.BANNED:this._notificationService.alert("${navigator.banned.text}","${navigator.banned.title}");break;default:this._notificationService.alert("${room.queue.error.title}","${room.queue.error.title}")}}),_.a.instance.communication.connection.send(new $h.a);const s=new et.a(et.a.TOOLBAR_CLICK);s.iconName=ol.a.HOTEL_VIEW,_.a.instance.roomEngine.events.dispatchEvent(s)}onRoomCreatedEvent(t){if(!t)return;const e=t.getParser();e&&(this._ngZone.run(()=>{this._data.createdRoomId=e.roomId,this._roomInfoShowing=!1}),this.goToRoom(e.roomId))}onRoomDoorbellEvent(t){if(!t)return;const e=t.getParser();e&&(e.userName&&0!==e.userName.length||this._ngZone.run(()=>this._component&&this._component.openRoomDoorbell(null,!0)))}onRoomDoorbellAcceptedEvent(t){if(!t)return;const e=t.getParser();e&&(e.userName&&0!==e.userName.length||this._ngZone.run(()=>this._component&&this._component.closeRoomDoorbell()))}onRoomScoreEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this._data.canRate=e.canLike)}onRoomSettingsUpdatedEvent(t){if(!t)return;const e=t.getParser();e&&_.a.instance.communication.connection.send(new ve.a(e.roomId,!1,!1))}onGenericErrorEvent(t){if(!t)return;const e=t.getParser();if(e)switch(e.errorCode){case-100002:this._ngZone.run(()=>this._component&&this._component.openRoomPassword(null,!0));break;case 4009:this._notificationService.alert("${navigator.alert.need.to.be.vip}","${generic.alert.title}");break;case 4010:this._notificationService.alert("${navigator.alert.invalid_room_name}","${generic.alert.title}");break;case 4011:this._notificationService.alert("${navigator.alert.cannot_perm_ban}","${generic.alert.title}");break;case 4013:this._notificationService.alert("${navigator.alert.room_in_maintenance}","${generic.alert.title}")}}onRoomDoorbellRejectedEvent(t){if(!t)return;const e=t.getParser();e&&(e.userName&&0!==e.userName.length||this._ngZone.run(()=>this._component&&this._component.openRoomDoorbell(null,!1,!0)))}onNavigatorCategoriesEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this._categories=e.categories)}onNavigatorCollapsedEvent(t){t&&t.getParser()}onNavigatorEventCategoriesEvent(t){t&&t.getParser()}onNavigatorLiftedEvent(t){t&&t.getParser()}onNavigatorMetadataEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._topLevelContexts=e.topLevelContexts,this._topLevelContexts.length>0&&this.setCurrentContext(this._topLevelContexts[0]),this.clearSearch()})}onNavigatorOpenRoomCreatorEvent(t){t&&t.getParser()&&this._component&&this._ngZone.run(()=>this._component.openRoomCreator())}onNavigatorSearchesEvent(t){t&&t.getParser()}onNavigatorSearchEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=e.result;s&&this._ngZone.run(()=>{this.setCurrentContextByCode(s.code),this._lastSearchResults=s.results,this._isSearching=!1})}onNavigatorSettingsEvent(t){t&&t.getParser()}onNavigatorHomeRoomEvent(t){if(!t)return;const e=t.getParser();!e||(this._homeRoomId=e.homeRoomId,e.roomIdToEnter<=0)||(e.roomIdToEnter!==this._homeRoomId?this.goToPrivateRoom(this._homeRoomId):this.goToHomeRoom())}getMaxVisitors(e){const s=[];let i=t.MAX_VISITOR_STEPPER;for(;i<=e;)s.push(i),i+=t.MAX_VISITOR_INCREMENTOR;return s}setTradeSettings(){this._tradeSettings=[],this._tradeSettings.push("${navigator.roomsettings.trade_not_allowed}","${navigator.roomsettings.trade_not_with_Controller}","${navigator.roomsettings.trade_allowed}")}goToRoom(t,e=null){_.a.instance.roomSessionManager.createSession(t,e)}goToPrivateRoom(t){_.a.instance.communication.connection.send(new ve.a(t,!1,!0))}goToHomeRoom(){return!(this._homeRoomId<1||(this.goToRoom(this._homeRoomId),0))}getContextByCode(t){if(!t)return null;for(const e of this._topLevelContexts)if(e&&e.code===t)return e;return null}setCurrentContext(t,e=!0){t&&this._topLevelContext!==t&&(this._topLevelContext=t)}setCurrentContextByCode(t,e=!0){if(!t)return;const s=this.getContextByCode(t);s&&this.setCurrentContext(s,e)}setCurrentFilter(t){t&&this._filter!==t&&(this._filter=t)}search(e=null){if(!this._topLevelContext||this._isSearching)return;this._filter||this.setCurrentFilter(t.SEARCH_FILTERS[0]);const s=this._filter&&this._filter.query?this._filter.query+":":"";let i=e;null===i&&(i=this._lastSearch),this._lastSearch=i||"",this.sendSearch(this._topLevelContext.code,s+this._lastSearch)}clearSearch(){this.setCurrentFilter(t.SEARCH_FILTERS[0]),this._lastSearch=null,this.isLoaded&&this.search()}sendSearch(t,e){t&&(this._isSearching=!0,this._ngZone.runOutsideAngular(()=>_.a.instance.communication.connection.send(new il.a(t,e))))}loadNavigator(){this._ngZone.runOutsideAngular(()=>_.a.instance.communication.connection.send(new sl.a)),this._isLoaded=!0}openRoomDoorbell(t){t&&this._component&&this._component.openRoomDoorbell(t)}openRoomPassword(t){t&&this._component&&this._component.openRoomPassword(t)}toggleRoomInfo(){this._roomInfoShowing=!this._roomInfoShowing}linkReceived(t){const e=t.split("/");if(!(e.length<2))switch(e[1]){case"goto":if(e.length>2)switch(e[2]){case"home":this.goToHomeRoom();break;default:{const t=parseInt(e[2]);t>0&&this.goToPrivateRoom(t)}}return}}enterRoomWebRequest(t,e=!1,s=null){_.a.instance.communication.connection.send(new tl.a(t))}get eventUrlPrefix(){return"navigator"}get component(){return this._component}set component(t){this._component=t}get topLevelContexts(){return this._topLevelContexts}get topLevelContext(){return this._topLevelContext}get categories(){return this._categories}get filter(){return this._filter}get lastSearch(){return this._lastSearch}set lastSearch(t){this._lastSearch=t}get lastSearchResults(){return this._lastSearchResults}get isSearching(){return this._isSearching}get isLoaded(){return this._isLoaded}get isLoading(){return this._isLoading}get tradeSettings(){return this._tradeSettings}get data(){return this._data}get roomInfoShowing(){return this._roomInfoShowing}set roomInfoShowing(t){this._roomInfoShowing=t}}return t.SEARCH_FILTERS=[{name:"anything",query:null},{name:"room.name",query:"roomname"},{name:"owner",query:"owner"},{name:"tag",query:"tag"},{name:"group",query:"group"}],t.MAX_VISITOR_STEPPER=10,t.MAX_VISITOR_INCREMENTOR=5,t.\u0275fac=function(e){return new(e||t)(i.kc(ss),i.kc(m),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();const ll=["chatContainer"],ul=function(t){return{"background-color":t}};function _l(t,e){if(1&t&&i.Zb(0,"div",10),2&t){const t=i.qc();i.xc("ngStyle",i.Bc(1,ul,t.senderColorString))}}const dl=function(t){return{"background-image":t,transform:"scale(1)",top:"-53px"}},gl=function(t){return{"background-image":t}};function ml(t,e){if(1&t&&i.Zb(0,"div",11),2&t){const t=i.qc();i.xc("ngStyle",t.petType>=0?i.Bc(1,dl,"url("+t.senderImageUrl+")"):i.Bc(3,gl,"url("+t.senderImageUrl+")"))}}let pl=(()=>{class t{constructor(t){this._navigatorService=t}update(t){this.chatType=t.chatType,this.chatStyle=t.styleId,this.senderId=t.userId,this.senderName=t.userName,this.senderCategory=t.userCategory,this.message=t.text,this.messageLinks=t.links,this.senderX=t.userX,this.senderImageUrl=t.userImage&&t.userImage.src||null,this.senderColor=t.userColor,this.senderColorString=this.senderColor&&"#"+this.senderColor.toString(16).padStart(6,"0")||null,this.roomId=t.roomId,this.userType=t.userType,this.petType=t.petType,this.hiddenName=!!t.text.includes("]</b>:")}ready(){this.makeVisible(),this.chatContainerElement&&(this.chatContainerElement.style.minWidth=this.width+"px")}makeVisible(){this.chatContainerElement&&(this.chatContainerElement.style.visibility="visible")}getX(){return this.x}setX(t){this.chatContainerElement&&(this.x=t,this.chatContainerElement.style.left=t+"px")}getY(){return this.y}setY(t){this.chatContainerElement&&(this.y=t,this.chatContainerElement.style.top=t+"px")}selectUser(){if(this.message.includes("goto")){var t=this.message.toString().split("href='")[1].split("'")[0].split("/");if(t.length<2)return;const e=parseInt(t[2]);e>0&&this._navigatorService.goToRoom(e,"")}else _.a.instance.roomEngine.selectRoomObject(this.roomId,this.senderId,this.senderCategory)}get width(){return this.chatContainerElement&&this.chatContainerElement.clientWidth||0}get height(){return this.chatContainerElement&&this.chatContainerElement.clientHeight||0}get chatContainerElement(){return this.chatContainer&&this.chatContainer.nativeElement||null}get decoratedUsername(){return this.hiddenName?"":this.senderName+": "}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(hl))},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&i.bd(ll,1),2&t){let t;i.Gc(t=i.oc())&&(e.chatContainer=t.first)}},inputs:{id:"id"},decls:10,vars:8,consts:[[1,"bubble-container"],["chatContainer",""],["class","user-container-bg",3,"ngStyle",4,"ngIf"],[3,"click"],[1,"user-container"],["class","user-image",3,"ngStyle",4,"ngIf"],[1,"chat-content"],[1,"username",3,"innerHTML"],[1,"message",3,"innerHTML"],[1,"pointer"],[1,"user-container-bg",3,"ngStyle"],[1,"user-image",3,"ngStyle"]],template:function(t,e){1&t&&(i.dc(0,"div",0,1),i.Tc(2,_l,1,3,"div",2),i.dc(3,"div",3),i.nc("click",function(){return e.selectUser()}),i.dc(4,"div",4),i.Tc(5,ml,1,5,"div",5),i.cc(),i.dc(6,"div",6),i.Zb(7,"b",7),i.Zb(8,"span",8),i.cc(),i.Zb(9,"div",9),i.cc(),i.cc()),2&t&&(i.Kb(2),i.xc("ngIf",0===e.chatStyle),i.Kb(1),i.Ob("chat-bubble bubble-",e.chatStyle," type-",e.chatType,""),i.Kb(2),i.xc("ngIf",e.senderImageUrl),i.Kb(2),i.xc("innerHTML",e.decoratedUsername,i.Lc),i.Kb(1),i.xc("innerHTML",e.message,i.Lc))},directives:[p.n,p.o],encapsulation:2}),t})();const fl=["chatView"],El=["chatContainer"];function Sl(t,e){}let vl=(()=>{class t extends en{constructor(e,s){super(),this.ngZone=e,this.componentFactoryResolver=s,this.timerId=++t.TIMER_TRACKER,this.cameraOffset=new g.Point,this.chats=[],this.tempChats=[],this.pendingChats=[],this.processingChats=!1,this._skipNextMove=!1,this.onChatMessage=this.onChatMessage.bind(this),this.onRoomViewUpdate=this.onRoomViewUpdate.bind(this)}ngOnInit(){_.a.instance.addWorkerEventTracker(this),this.ngZone.runOutsideAngular(()=>{_.a.instance.sendWorkerEvent({type:"CREATE_INTERVAL",time:5e3,timerId:this.timerId,response:{type:"MOVE_CHATS"}})})}ngOnDestroy(){this.ngZone.runOutsideAngular(()=>{_.a.instance.sendWorkerEvent({type:"REMOVE_INTERVAL",timerId:this.timerId})}),_.a.instance.removeWorkerEventTracker(this)}registerUpdateEvents(t){t&&(t.addEventListener(Mt.RWCUE_EVENT_CHAT,this.onChatMessage),t.addEventListener(tt.SIZE_CHANGED,this.onRoomViewUpdate),t.addEventListener(tt.POSITION_CHANGED,this.onRoomViewUpdate),t.addEventListener(tt.SCALE_CHANGED,this.onRoomViewUpdate),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){t&&(t.removeEventListener(Mt.RWCUE_EVENT_CHAT,this.onChatMessage),t.removeEventListener(tt.SIZE_CHANGED,this.onRoomViewUpdate),t.removeEventListener(tt.POSITION_CHANGED,this.onRoomViewUpdate),t.removeEventListener(tt.SCALE_CHANGED,this.onRoomViewUpdate))}updateChatViewForDimensions(t,e){const s=this.chatViewElement;if(!s)return;const i=_.a.instance.getConfiguration("chat.viewer.height.percentage",.4);s.style.height=e*i+"px"}onChatMessage(t){!t||sn.a.isRunning()&&t.chatType!==Mt.CHAT_TYPE_WHISPER||(this.pendingChats.push(t),this.processPendingChats())}onRoomViewUpdate(t){t.positionDelta&&(this.cameraOffset.x=this.cameraOffset.x+t.positionDelta.x,this.cameraOffset.y=this.cameraOffset.y+t.positionDelta.y,this.resetAllChatLocations()),t.roomViewRectangle&&this.updateChatViewForDimensions(t.roomViewRectangle.width,t.roomViewRectangle.height)}processPendingChats(t=!1){if(!t&&this.processingChats)return;this.processingChats=!0;const e=this.pendingChats.shift();if(!e)return void(this.processingChats=!1);let s=null,i=null;this.ngZone.run(()=>{const t=this.componentFactoryResolver.resolveComponentFactory(pl);s=this.chatContainer.createComponent(t),i=s.instance,i&&(i.id=this.getFreeItemId(),i.update(e))}),this.addChat(s),this._skipNextMove=!0}getFreeItemId(){return"chat_item_"+t.CHAT_COUNTER}addChat(e){if(!e)return;const s=e.instance;s.senderX=s.senderX-this.cameraOffset.x,s.setY(this.chatViewElement.offsetHeight-s.height),this.resetChatItemLocation(e),this.makeRoomForChat(e),this.chats.push(e),s.ready(),t.CHAT_COUNTER++,this.processPendingChats(!0)}hideChat(t){if(!t)return;const e=this.chats.indexOf(t);e>=0&&this.chats.splice(e,1);const s=this.chatContainer.indexOf(t.hostView);s>=0&&this.chatContainer.remove(s)}moveChatUp(t,e=0){if(!t)return;const s=t.instance;let i=s.height;e&&(i=e),s.setY(s.getY()-i),s.getY()<-2*s.height&&this.hideChat(t)}moveAllChatsUp(){if(this._skipNextMove)return void(this._skipNextMove=!1);let t=this.chats.length-1;for(;t>=0;)this.moveChatUp(this.chats[t],15),t--}makeRoomForChat(t){if(!t)return;const e=t.instance,s=this.chats[this.chats.length-1],i=s&&s.instance;if(!i)return;const n=i.getY()+i.height-1,r=e.height+1,a=this.chatViewElement.offsetHeight-n;if(a<r)for(const o of this.chats)this.moveChatUp(o,r-a)}resetAllChatLocations(){let t=this.chats.length-1;for(;t>=0;){const e=this.chats[t];e&&this.resetChatItemLocation(e),t--}}resetChatItemLocation(t){const e=t.instance;let s=e.senderX+this.cameraOffset.x;s-=e.width/2,e.setX(s)}workerMessageReceived(t){if(t)switch(t.type){case"MOVE_CHATS":return void this.moveAllChatsUp()}}get chatViewElement(){return this.chatViewReference&&this.chatViewReference.nativeElement||null}get handler(){return this.widgetHandler}}return t.TIMER_TRACKER=0,t.CHAT_COUNTER=0,t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H),i.Yb(i.m))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-chat-component"]],viewQuery:function(t,e){if(1&t&&(i.bd(fl,1),i.bd(El,1,i.Z)),2&t){let t;i.Gc(t=i.oc())&&(e.chatViewReference=t.first),i.Gc(t=i.oc())&&(e.chatContainer=t.first)}},features:[i.Hb],decls:4,vars:0,consts:[[1,"nitro-room-chat-component"],["chatView",""],["chatContainer",""]],template:function(t,e){1&t&&(i.dc(0,"div",0,1),i.Tc(2,Sl,0,0,"ng-template",null,2,i.Uc),i.cc())},encapsulation:2}),t})();function bl(t,e){if(1&t){const t=i.ec();i.dc(0,"div",20),i.dc(1,"div",21),i.nc("click",function(){return i.Kc(t),i.qc(2).likeRoom()}),i.Zb(2,"div",22),i.dc(3,"p",8),i.Vc(4),i.rc(5,"translate"),i.cc(),i.cc(),i.cc()}2&t&&(i.Kb(4),i.Wc(i.sc(5,1,"room.like.button.text")))}function Il(t,e){if(1&t){const t=i.ec();i.dc(0,"div"),i.dc(1,"div",6),i.nc("click",function(){return i.Kc(t),i.qc().toggleRoomTools()}),i.Zb(2,"div",7),i.dc(3,"p",8),i.Vc(4),i.rc(5,"translate"),i.cc(),i.cc(),i.dc(6,"div",9),i.nc("click",function(){return i.Kc(t),i.qc().toggleZoom()}),i.Zb(7,"div",10),i.dc(8,"p",8),i.Vc(9),i.rc(10,"translate"),i.cc(),i.cc(),i.dc(11,"div",11),i.nc("click",function(){return i.Kc(t),i.qc().toggleChatHistory()}),i.Zb(12,"div",12),i.dc(13,"p",8),i.Vc(14),i.rc(15,"translate"),i.cc(),i.cc(),i.Tc(16,bl,6,3,"div",13),i.dc(17,"div",14),i.Zb(18,"div",15),i.dc(19,"p",8),i.Vc(20),i.rc(21,"translate"),i.cc(),i.cc(),i.dc(22,"div",16),i.dc(23,"div",17),i.nc("click",function(){return i.Kc(t),i.qc().goInDirection(-1)}),i.cc(),i.Zb(24,"div",18),i.dc(25,"div",19),i.nc("click",function(){return i.Kc(t),i.qc().goInDirection(1)}),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(4),i.Wc(i.sc(5,7,"room.settings.button.text")),i.Kb(5),i.Wc(i.sc(10,9,"room.zoom.button.text")),i.Kb(5),i.Wc(i.sc(15,11,"room.chathistory.button.text")),i.Kb(2),i.xc("ngIf",t.canRate),i.Kb(4),i.Wc(i.sc(21,13,"navigator.embed.caption")),i.Kb(3),i.xc("disabled",!t.hasDirection(-1)),i.Kb(2),i.xc("disabled",!t.hasDirection(1))}}function Rl(t,e){if(1&t&&(i.dc(0,"div",23),i.dc(1,"div",24),i.dc(2,"div",25),i.Vc(3),i.cc(),i.dc(4,"div",26),i.Vc(5),i.cc(),i.cc(),i.cc()),2&t){const t=i.qc();i.xc("@inOutAnimation",void 0),i.Kb(3),i.Wc(t.roomName),i.Kb(2),i.Wc(t.ownerName)}}let Tl=(()=>{class t extends en{constructor(t,e,s,i){super(),this._componentFactoryResolver=t,this._ngZone=e,this._settingsService=s,this._navigatorService=i,this.acac="bri-slide-box-acik",this.acikMi=!1,this._lastRoomId=-1,this._roomData=null,this._currentRoomIndex=-1,this._roomName="",this._ownerName="",this._tags=[],this._zoomed=!0,this._roomOptionsVisible=!1,this._roomToolsVisible=!1,this._roomOptionsTimeout=null}ngOnDestroy(){this._navigatorService.roomInfoShowing=!1,this.stopRoomOptionsTimeout()}updateRoomInfo(e){e&&this._ngZone.run(()=>{for(const s of t.VISITED_ROOMS)s.roomId===e.roomId&&(s.roomName=e.roomName)})}updateRoomTools(t,e,s){this._ngZone.run(()=>{this._roomName=t,this._ownerName=e,this._tags=s,this.showRoomOptions()})}addVisitedRoom(e){this._ngZone.run(()=>{for(const s of t.VISITED_ROOMS)if(s&&s.roomId===e.roomId)return;t.VISITED_ROOMS.push(e),t.VISITED_ROOMS.length>t.MAX_VISIT_HISTORY&&t.VISITED_ROOMS.shift(),this._currentRoomIndex=t.VISITED_ROOMS.length-1})}updateRoomCurrentIndex(e){this._ngZone.run(()=>{let s=0;for(;s<t.VISITED_ROOMS.length;){const i=t.VISITED_ROOMS[s];if(i&&i.roomId===e)return void(this._currentRoomIndex=s);s++}})}likeRoom(){this.handler.rateRoom()}hasDirection(e){const s=this._currentRoomIndex+e;return s>=0&&s<t.VISITED_ROOMS.length}goInDirection(e){const s=this._currentRoomIndex+e;if(s<0||s>t.VISITED_ROOMS.length-1)return;const i=t.VISITED_ROOMS[s];i&&this._navigatorService.goToPrivateRoom(i.roomId)}toggleChatHistory(){this._settingsService.toggleChatHistory()}toggleZoom(){this.widgetHandler.processWidgetMessage(new qe),this._zoomed=!this._zoomed}toggleRoomOptions(){this._roomOptionsVisible=!this._roomOptionsVisible,this._roomOptionsVisible&&this.showRoomOptions(!1),0==this.acikMi?(this.acac="bri-slide-box-acik",this.acikMi=!0):(this.acac="bri-slide-box-kapali",this.acikMi=!1)}showRoomOptions(t=!0){this._roomOptionsVisible=!0,this.stopRoomOptionsTimeout(),t&&(this._roomOptionsTimeout=setTimeout(()=>{this.stopRoomOptionsTimeout(),this._roomOptionsVisible=!1},5e3))}stopRoomOptionsTimeout(){this._roomOptionsTimeout&&(clearTimeout(this._roomOptionsTimeout),this._roomOptionsTimeout=null)}toggleRoomTools(){this._navigatorService.toggleRoomInfo()}get handler(){return this.widgetHandler}get roomName(){return this._roomName}get ownerName(){return this._ownerName}get tags(){return this._tags}get zoomed(){return this._zoomed}get roomOptionsVisible(){return this._roomOptionsVisible}get roomToolsVisible(){return this._roomToolsVisible}set roomToolsVisible(t){this._roomToolsVisible=t}get roomData(){return this._roomData}get canRate(){return this._navigatorService.data.canRate}}return t.VISITED_ROOMS=[],t.MAX_VISIT_HISTORY=10,t.\u0275fac=function(e){return new(e||t)(i.Yb(i.m),i.Yb(i.H),i.Yb(m),i.Yb(hl))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-room-tools-component"]],features:[i.Hb],decls:6,vars:4,consts:[[1,"bottom-room-information"],[1,"rtoolbox"],[1,"bri-room-options"],[1,"bri-slide-box",3,"click"],[4,"ngIf"],["class","bri-room-name_and_owner-box",4,"ngIf"],[1,"bri-ro-settings-box",3,"click"],[1,"settingsico"],[1,"room-options-desc_text"],[1,"bri-ro-zoom-box",3,"click"],[1,"zoomico"],[1,"bri-ro-roomchat-box",3,"click"],[1,"roomchatico"],["class","bri-ro-roomlike-box",4,"ngIf"],[1,"bri-ro-roomurl-box"],[1,"roomurlico"],[1,"rt-mainbutton"],[1,"enter-previous-room",3,"disabled","click"],[1,"rooms-\u0131ve-been-to-before"],[1,"enter-next-room",3,"disabled","click"],[1,"bri-ro-roomlike-box"],[3,"click"],[1,"roomlikeico"],[1,"bri-room-name_and_owner-box"],[1,"mk"],[1,"bri-room_name"],[1,"bri-room_owner"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"div",2),i.dc(3,"div",3),i.nc("click",function(){return e.toggleRoomOptions()}),i.cc(),i.Tc(4,Il,26,15,"div",4),i.cc(),i.cc(),i.Tc(5,Rl,6,3,"div",5),i.cc()),2&t&&(i.Kb(3),i.Mb(e.acac),i.Kb(1),i.xc("ngIf",e.roomOptionsVisible),i.Kb(1),i.xc("ngIf",e.roomOptionsVisible))},directives:[p.n],pipes:[ln],encapsulation:2,data:{animation:[Object(f.j)("inOutAnimation",[Object(f.i)(":enter",[Object(f.h)({transform:"translateX(-50%)"}),Object(f.e)(".1s ease-in",Object(f.h)({transform:"translateX(0%)"}))]),Object(f.i)(":leave",[Object(f.h)({transform:"translateX(0%)"}),Object(f.e)(".1s ease-out",Object(f.h)({transform:"translateX(-50%)"}))])])]}}),t})(),Ol=(()=>{class t{constructor(t){this._notificationService=t,this.title="",this.message="",this.choices=[]}close(){this._notificationService.closeAlert(this)}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(ss))},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],decls:15,vars:4,consts:[[1,"koyu-tamekran"],["id","corelo-ha","noMemory","true"],["id","coreloha-drag"],[1,"cha-baslik"],[1,"chabox"],[1,"frankbaba"],[1,"cha-text-box"],[1,"cha-text",3,"innerHTML"],[1,"alerthr"],[1,"w100-alertclose"],[1,"mb-islem-onayla-box",3,"click"],[1,"mb-tamam-text"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"div",2),i.dc(3,"p",3),i.Vc(4),i.cc(),i.cc(),i.dc(5,"div",4),i.Zb(6,"div",5),i.dc(7,"div",6),i.Zb(8,"p",7),i.rc(9,"keepHtml"),i.cc(),i.Zb(10,"div",8),i.dc(11,"div",9),i.dc(12,"div",10),i.nc("click",function(){return e.close()}),i.dc(13,"p",11),i.Vc(14,"OK"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Wc(e.title),i.Kb(4),i.xc("innerHTML",i.sc(9,2,e.message),i.Lc))},pipes:[yn],encapsulation:2}),t})();var yl=s("vzKh");function Cl(t,e){if(1&t){const t=i.ec();i.dc(0,"div",10),i.nc("click",function(){i.Kc(t);const s=e.index;return i.qc().choose(s)}),i.dc(1,"p",11),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()}if(2&t){const t=e.$implicit;i.Kb(2),i.Wc(i.sc(3,1,t.localizationKey))}}let Al=(()=>{class t extends Ol{constructor(){super(...arguments),this.callback=null,this.choices=[]}choose(t){try{this.choices[t].callback()}catch(e){yl.a.log(e)}this.close()}}return t.\u0275fac=function(e){return Ml(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:12,vars:5,consts:[["noMemory","true",1,"koyu-tamekran"],["id","corelo-ha"],["id","coreloha-drag"],[1,"cha-baslik"],[1,"chabox"],[1,"frankbaba"],[1,"cha-text-box"],[1,"cha-text",3,"innerHTML"],[1,"w100-alertclose"],["class","odasil-mb-islem-onayla-box",3,"click",4,"ngFor","ngForOf"],[1,"odasil-mb-islem-onayla-box",3,"click"],[1,"mb-tamam-text"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"div",2),i.dc(3,"p",3),i.Vc(4),i.cc(),i.cc(),i.dc(5,"div",4),i.Zb(6,"div",5),i.dc(7,"div",6),i.Zb(8,"p",7),i.rc(9,"keepHtml"),i.cc(),i.dc(10,"div",8),i.Tc(11,Cl,4,3,"div",9),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Wc(e.title),i.Kb(4),i.xc("innerHTML",i.sc(9,3,e.message),i.Lc),i.Kb(3),i.xc("ngForOf",e.choices))},directives:[p.m],pipes:[yn,ln],encapsulation:2}),t})();const Ml=i.fc(Al);class wl{constructor(t,e,s=[]){this._localizationKey=t,this._callback=e,this._classes=s}get localizationKey(){return this._localizationKey}get callback(){return this._callback}get classes(){return this._classes}}let Dl=(()=>{class t extends Ol{constructor(){super(...arguments),this.callback=null}confirm(){if(this.callback)try{this.callback()}catch(t){yl.a.log(t)}this.close()}}return t.\u0275fac=function(e){return Nl(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:19,vars:10,consts:[["dragHandle","#coreloha-drag","id","corelo-ha","noMemory","true",3,"bringToTop","draggable"],["id","coreloha-drag"],[1,"cha-baslik"],[1,"old-kapat",3,"click"],[1,"chabox"],[1,"frankbaba"],[1,"cha-text-box"],[1,"cha-text",3,"innerHTML"],[1,"w50cha-iptal",3,"click"],[1,"w50cha-onay"],[1,"cha-ok-box",3,"click"],[1,"ch50-tamam-text"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.cc(),i.dc(4,"div",3),i.nc("click",function(){return e.close()}),i.cc(),i.cc(),i.dc(5,"div",4),i.Zb(6,"div",5),i.dc(7,"div",6),i.Zb(8,"p",7),i.rc(9,"keepHtml"),i.cc(),i.dc(10,"div",8),i.nc("click",function(){return e.close()}),i.dc(11,"u"),i.Vc(12),i.rc(13,"translate"),i.cc(),i.cc(),i.dc(14,"div",9),i.dc(15,"div",10),i.nc("click",function(){return e.confirm()}),i.dc(16,"p",11),i.Vc(17),i.rc(18,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(e.title),i.Kb(5),i.xc("innerHTML",i.sc(9,4,e.message),i.Lc),i.Kb(4),i.Wc(i.sc(13,6,"generic.close")),i.Kb(5),i.Wc(i.sc(18,8,"generic.confirm")))},directives:[Tr,Lr],pipes:[yn,ln],encapsulation:2}),t})();const Nl=i.fc(Dl);function Ul(t,e){if(1&t){const t=i.ec();i.dc(0,"div",10),i.nc("click",function(){return i.Kc(t),i.qc().openLink()}),i.dc(1,"u"),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()}2&t&&(i.Kb(2),i.Wc(i.sc(3,1,"mod.alert.link")))}let xl=(()=>{class t extends Ol{constructor(){super(...arguments),this.link=""}openLink(){window.open(this.link,"_blank")}get hasLink(){return this.link.length>0}}return t.\u0275fac=function(e){return Ll(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:12,vars:5,consts:[[1,"koyu-tamekran"],["id","corelo-ha","noMemory","true"],["id","coreloha-drag"],[1,"cha-baslik"],[1,"old-kapat",3,"click"],[1,"chabox"],[1,"frankbaba"],[1,"cha-text-box"],[1,"cha-text",3,"innerHTML"],["class","w50cha-link",3,"click",4,"ngIf"],[1,"w50cha-link",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"div",2),i.dc(3,"p",3),i.Vc(4),i.cc(),i.dc(5,"div",4),i.nc("click",function(){return e.close()}),i.cc(),i.cc(),i.dc(6,"div",5),i.Zb(7,"div",6),i.dc(8,"div",7),i.Zb(9,"p",8),i.rc(10,"keepHtml"),i.cc(),i.Tc(11,Ul,4,3,"div",9),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Wc(e.title),i.Kb(5),i.xc("innerHTML",i.sc(10,3,e.message),i.Lc),i.Kb(2),i.xc("ngIf",e.hasLink))},directives:[p.n],pipes:[yn,ln],encapsulation:2}),t})();const Ll=i.fc(xl);function Pl(t,e){if(1&t&&(i.bc(0),i.Zb(1,"p",11),i.rc(2,"keepHtml"),i.ac()),2&t){const t=e.$implicit;i.Kb(1),i.xc("innerHTML",i.sc(2,1,t),i.Lc)}}let Fl=(()=>{class t extends Ol{constructor(){super(...arguments),this.messages=[]}}return t.\u0275fac=function(e){return kl(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:15,vars:2,consts:[["dragHandle","#corelocmnd-drag","id","corelo-cmnd","noMemory","true",3,"bringToTop","draggable"],["id","corelocmnd-drag"],[1,"ccmnd-baslik"],[1,"old-kapat",3,"click"],[1,"ccmndbox"],[1,"ccmnd-commandslist"],[1,"ccmnd-commandsbg"],[1,"ccmnd-desc"],[2,"color","#fd6305"],[1,"ccmnd-hood"],[4,"ngFor","ngForOf"],[1,"ccmnd-commands",3,"innerHTML"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.cc(),i.dc(4,"div",3),i.nc("click",function(){return e.close()}),i.cc(),i.cc(),i.dc(5,"div",4),i.dc(6,"div",5),i.dc(7,"div",6),i.dc(8,"p",7),i.Vc(9,"See also: "),i.dc(10,"u",8),i.Vc(11,"Chatting at Habbo Hotel"),i.cc(),i.cc(),i.dc(12,"p",9),i.Vc(13,"Commands List"),i.cc(),i.Tc(14,Pl,3,3,"ng-container",10),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(e.title),i.Kb(11),i.xc("ngForOf",e.messages))},directives:[Tr,Lr,p.m],pipes:[yn],encapsulation:2}),t})();const kl=i.fc(Fl),Vl=["alertsContainer"];function Bl(t,e){}function Wl(t,e){}let Kl=(()=>{class t{constructor(t,e,s){this._notificationService=t,this._componentFactoryResolver=e,this._ngZone=s,this._alerts=new Map}ngOnInit(){this._notificationService.alertCenter=this}ngOnDestroy(){this.closeAllAlerts(),this._notificationService.alertCenter=null}alert(t,e=null){return this.buildAlert(Ol,t,e)}alertWithLink(t,e=null,s=null){const i=this.buildAlert(xl,t,s);return i?(i.link=e,i):null}alertWithConfirm(t,e=null,s=null){const i=this.buildAlert(Dl,t,e);return i?(i.callback=s,i):null}alertWithChoices(t,e,s=null){let i=null;return this._ngZone.run(()=>{i=this.createAlertComponent(Al),s?s.startsWith("${")&&(s=_.a.instance.getLocalization(s)):s=_.a.instance.getLocalization("${mod.alert.title}"),t&&(t.startsWith("${")&&(t=_.a.instance.getLocalization(t)),t=t.replace(/\r\n|\r|\n/g,"<br />")),i.title=s,i.message=t,i.choices=e}),i||null}alertWithScrollableMessages(t,e=null){const s=this.buildAlert(Fl,null,e);if(!s)return;const i=[];for(const n of t)n&&i.push(n.replace(/\r\n|\r|\n/g,"<br />"));return s.messages=i,s}buildAlert(t,e,s=null){let i=null;return this._ngZone.run(()=>{i=this.createAlertComponent(t),s?s.startsWith("${")&&(s=_.a.instance.getLocalization(s)):s=_.a.instance.getLocalization("${mod.alert.title}"),e&&(e.startsWith("${")&&(e=_.a.instance.getLocalization(e)),e=e.replace(/\r\n|\r|\n/g,"<br />")),i.title=s,i.message=e}),i||null}createAlertComponent(t){if(!t)return null;let e=null;const s=this._componentFactoryResolver.resolveComponentFactory(t);let i=null;return s&&(i=this.alertsContainer.createComponent(s),this._alerts.set(i.instance,i)),e=i.instance,e}closeAlert(t){if(!t)return;const e=this._alerts.get(t);e&&(this._alerts.delete(t),this.removeAlertView(e.hostView))}closeAllAlerts(){for(const t of this._alerts.keys())this.closeAlert(t)}removeAlertView(t){if(!t)return;const e=this.alertsContainer.indexOf(t);-1!==e&&this.alertsContainer.remove(e)}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(ss),i.Yb(i.m),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-alert-center-component"]],viewQuery:function(t,e){if(1&t&&i.bd(Vl,1,i.Z),2&t){let t;i.Gc(t=i.oc())&&(e.alertsContainer=t.first)}},decls:5,vars:0,consts:[[1,"d-flex","flex-column-reverse"],["notificationsContainer",""],["alertsContainer",""]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Tc(1,Bl,0,0,"ng-template",null,1,i.Uc),i.cc(),i.Tc(3,Wl,0,0,"ng-template",null,2,i.Uc))},encapsulation:2}),t})(),Gl=(()=>{class t{static format(e,s="",i=3){return e>i*t.YEAR?t.getLocalization("friendlytime.years"+s,Math.round(e/t.YEAR)):e>i*t.MONTH?t.getLocalization("friendlytime.months"+s,Math.round(e/t.MONTH)):e>i*t.DAY?t.getLocalization("friendlytime.days"+s,Math.round(e/t.DAY)):e>i*t.HOUR?t.getLocalization("friendlytime.hours"+s,Math.round(e/t.HOUR)):e>i*t.MINUTE?t.getLocalization("friendlytime.minutes"+s,Math.round(e/t.MINUTE)):t.getLocalization("friendlytime.seconds"+s,Math.round(e))}static shortFormat(e,s="",i=3){return e>i*t.YEAR?t.getLocalization("friendlytime.years.short"+s,Math.round(e/t.YEAR)):e>i*t.MONTH?t.getLocalization("friendlytime.months.short"+s,Math.round(e/t.MONTH)):e>i*t.DAY?t.getLocalization("friendlytime.days.short"+s,Math.round(e/t.DAY)):e>i*t.HOUR?t.getLocalization("friendlytime.hours.short"+s,Math.round(e/t.HOUR)):e>i*t.MINUTE?t.getLocalization("friendlytime.minutes.short"+s,Math.round(e/t.MINUTE)):t.getLocalization("friendlytime.seconds.short"+s,Math.round(e))}static getLocalization(t,e){return _.a.instance.getLocalizationWithParameter(t,"amount",e.toString())}}return t.MINUTE=60,t.HOUR=60*t.MINUTE,t.DAY=24*t.HOUR,t.WEEK=7*t.DAY,t.MONTH=30*t.DAY,t.YEAR=365*t.DAY,t})();var Hl=s("2y6h"),jl=s("IRIx"),zl=s("DpKJ"),Yl=s("zIYo");let ql=(()=>{class t{constructor(t){this._ngZone=t,this._isReady=!1,this._messages=[],this._currencies=new Map,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),this._messages=[new Hl.a(this.onUserCreditsEvent.bind(this)),new jl.a(this.onUserCurrencyEvent.bind(this)),new zl.a(this.onUserCurrencyUpdateEvent.bind(this)),new ro.a(this.onUserSubscriptionEvent.bind(this))];for(const t of this._messages)_.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(this._messages&&this._messages.length){for(const t of this._messages)_.a.instance.communication.removeMessageEvent(t);this._messages=[]}})}requestUpdate(){_.a.instance.communication.connection.send(new Yl.a)}onUserCreditsEvent(t){if(!t)return;const e=t.getParser();this._isReady=!0,this._ngZone.run(()=>this.setCurrency(-1,parseFloat(e.credits)))}onUserCurrencyEvent(t){if(!t)return;const e=t.getParser();this._ngZone.run(()=>{for(const[t,s]of e.currencies)this.setCurrency(t,s)})}onUserCurrencyUpdateEvent(t){if(!t)return;const e=t.getParser();this._ngZone.run(()=>this.setCurrency(e.type,e.amount))}onUserSubscriptionEvent(t){if(!t)return;const e=t.getParser();if(e)switch(e.name){case"habbo_club":return void(this._habboClubSubscription=e);default:return}}setCurrency(t,e){this._currencies.set(t,e)}get currencies(){return this._currencies}get visibleCurrencies(){return _.a.instance.getConfiguration("system.currency.types",[])}get hcSub(){return this._habboClubSubscription}get isReady(){return this._isReady}}return t.\u0275fac=function(e){return new(e||t)(i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})(),Zl=(()=>{class t{transform(t,e){if(isNaN(t))return 0;if(null===t)return 0;if(0===t)return 0;let s=Math.abs(t);const i=Math.pow(10,1),n=t<0;let r="";const a=[{key:"q",value:Math.pow(10,15)},{key:"t",value:Math.pow(10,12)},{key:"m",value:Math.pow(10,9)},{key:"m",value:Math.pow(10,6)},{key:"k",value:1e3}];for(let o=0;o<a.length;o++){let t=s/a[o].value;if(t=Math.round(t*i)/i,t>=1){s=t,r=a[o].key;break}}return(n?"-":"")+s+r}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=i.Xb({name:"shortNumber",type:t,pure:!0}),t})();const Xl=function(t,e,s){return{ordekrenkdn:t,kredirenkdn:e,elmasrenkdn:s}},Ql=function(t,e,s,i){return{ordekrenk:t,kredirenk:e,elmasrenk:s,cctext:i}},Jl=function(t){return{"background-image":t}},$l=function(t){return{callc:t}};function tu(t,e){if(1&t&&(i.dc(0,"div",16),i.dc(1,"div",17),i.Vc(2),i.rc(3,"translate"),i.cc(),i.dc(4,"p",18),i.Vc(5),i.rc(6,"shortNumber"),i.cc(),i.Zb(7,"div",19),i.cc()),2&t){const t=i.qc().$implicit;i.Kb(1),i.xc("ngClass",i.Dc(10,Xl,0==t.key,-1==t.key,5==t.key)),i.Kb(1),i.Wc(i.sc(3,6,"purse.seasonal.currency")),i.Kb(2),i.xc("ngClass",i.Ec(14,Ql,0==t.key,-1==t.key,5==t.key,101==t.key)),i.Kb(1),i.Xc(" ",i.sc(6,8,t.value)," "),i.Kb(2),i.xc("ngStyle",i.Bc(19,Jl,"url(./assets/images/credibar/"+t.key.toString()+".png)"))("ngClass",i.Bc(21,$l,101==t.key))}}function eu(t,e){if(1&t&&(i.bc(0),i.Tc(1,tu,8,23,"div",15),i.ac()),2&t){const t=e.$implicit,s=i.qc();i.Kb(1),i.xc("ngIf",s.isVisible(t.key))}}let su=(()=>{class t{constructor(t,e){this._purseService=t,this.settingsService=e}ngOnInit(){this._purseService.requestUpdate()}isVisible(t){return-1!==this._purseService.visibleCurrencies.indexOf(t)&&(this.settingsService.meMenuVisible||!0)}getCurrencyUrl(t){return _.a.instance.getConfiguration("currency.asset.icon.url").replace("%type%",t)}get currencies(){return this._purseService.currencies}get hcDay(){if(!this._purseService.hcSub)return;const t=Gl.shortFormat(60*this._purseService.hcSub.totalSeconds);return this._purseService.hcSub.totalSeconds?t:_.a.instance.localization.getValue("purse.clubdays.zero.amount.text")}get isReady(){return this._purseService.isReady}toggleUserSettings(){this.settingsService.toggleUserSettings()}getCurrencyName(t){switch(t){case-1:return"Credits";case 0:return"Duckets";case 5:return"Diamonds";case 101:return"purse.clubdays.zero.amount.text"}return"currency."+t}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(ql),i.Yb(m))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-purse-main-component"]],decls:19,vars:7,consts:[[1,"test"],[1,"credits-bar"],[1,"credit-unit-info"],[4,"ngFor","ngForOf"],[1,"cb-hc-info"],[1,"cb-ico","hc_ico"],[1,"hc-katil-text"],[1,"cb-ayirici"],[1,"cb-help-box"],[1,"cb-help-buton"],[1,"cb-buton-text"],[1,"cb-exit-buton"],["src","./assets/images/credibar/cb-exit.png",1,"cb-buton-ico"],[1,"cb-settings-buton",3,"click"],["src","./assets/images/credibar/cb-settings.png",1,"cb-buton-ico"],["class","cb-credibox",4,"ngIf"],[1,"cb-credibox"],[1,"cpurse-name","kredirenk",3,"ngClass"],[1,"cb-miktar",3,"ngClass"],[1,"cb-ico",3,"ngStyle","ngClass"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"div",2),i.Tc(3,eu,2,1,"ng-container",3),i.rc(4,"keyvalue"),i.cc(),i.dc(5,"div",4),i.Zb(6,"div",5),i.dc(7,"p",6),i.Vc(8),i.cc(),i.cc(),i.Zb(9,"div",7),i.dc(10,"div",8),i.dc(11,"div",9),i.dc(12,"p",10),i.Vc(13),i.rc(14,"translate"),i.cc(),i.cc(),i.dc(15,"div",11),i.Zb(16,"img",12),i.cc(),i.dc(17,"div",13),i.nc("click",function(){return e.toggleUserSettings()}),i.Zb(18,"img",14),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.xc("ngForOf",i.sc(4,3,e.currencies)),i.Kb(5),i.Wc(e.hcDay),i.Kb(5),i.Wc(i.sc(14,5,"toolbar.help")))},directives:[p.m,p.n,p.l,p.o],pipes:[p.h,ln,Zl],encapsulation:2}),t})();var iu=s("e9/N"),nu=s("Zm+c"),ru=s("bR4k"),au=s("IqqQ"),ou=s("D5bJ"),cu=s("HujO"),hu=s("mEdh"),lu=s("xwkN"),uu=s("eJ6k"),_u=s("fsQ+"),du=s("8PZm"),gu=s("ZHGj"),mu=s("LSEE"),pu=s("gEiT"),fu=s("16el"),Eu=s("KQVX"),Su=s("GBmB"),vu=s("00/2"),bu=s("o4d6"),Iu=s("btSX"),Ru=s("C1pE"),Tu=s("w+79"),Ou=s("NLfn"),yu=s("4pnK"),Cu=s("zQEY");class Au{constructor(){this._id=0,this._name="",this._description="",this._roomId="0",this._badgeParts=new Map,this._colorA=0,this.colorB=0,this._state=0,this._canMembersDecorate=!1,this._badgeParts.set(0,new Cu.a(!0)),this._badgeParts.set(1,new Cu.a(!1)),this._badgeParts.set(2,new Cu.a(!1)),this._badgeParts.set(3,new Cu.a(!1)),this._badgeParts.set(4,new Cu.a(!1))}getBadgePart(t){return this._badgeParts.get(t)}setPartsColor(t){this._badgeParts.forEach(e=>{e.color=t})}get id(){return this._id}set id(t){this._id=t}get name(){return this._name}set name(t){this._name=t}get description(){return this._description}set description(t){this._description=t}get roomId(){return this._roomId}set roomId(t){this._roomId=t}get badgeParts(){return this._badgeParts}set badgeParts(t){this._badgeParts=t}get colorA(){return this._colorA}set colorA(t){this._colorA=t}get colorB(){return this._colorB}set colorB(t){this._colorB=t}get currentBadgeCode(){let t="";return this._badgeParts.forEach(e=>{e.code&&(t+=e.code)}),t}get currentBadgeArray(){const t=[];return this._badgeParts.forEach(e=>{e.code&&(t.push(e.key),t.push(e.color),t.push(e.position))}),t}get state(){return this._state}set state(t){this._state=t}get canMembersDecorate(){return this._canMembersDecorate}set canMembersDecorate(t){this._canMembersDecorate=t}}var Mu=s("1kSV");const wu=["nitro-group-creator-component",""];function Du(t,e){if(1&t){const t=i.ec();i.dc(0,"nitro-group-creator-tab-info-component",17),i.nc("groupSettingsChange",function(e){return i.Kc(t),i.qc().groupSettings=e}),i.cc()}if(2&t){const t=i.qc();i.xc("groupSettings",t.groupSettings)("showNameError",t.showNameError)("showDescriptionError",t.showDescriptionError)("showRoomError",t.showRoomError)("availableRooms",t.availableRooms)}}function Nu(t,e){if(1&t){const t=i.ec();i.dc(0,"nitro-group-creator-tab-badge-component",18),i.nc("groupSettingsChange",function(e){return i.Kc(t),i.qc().groupSettings=e}),i.cc()}if(2&t){const t=i.qc();i.xc("groupSettings",t.groupSettings)("setDefaultValues",!0)}}function Uu(t,e){if(1&t){const t=i.ec();i.dc(0,"nitro-group-creator-tab-colors-component",18),i.nc("groupSettingsChange",function(e){return i.Kc(t),i.qc().groupSettings=e}),i.cc()}if(2&t){const t=i.qc();i.xc("groupSettings",t.groupSettings)("setDefaultValues",!0)}}function xu(t,e){if(1&t&&i.Zb(0,"nitro-group-creator-tab-confirmation-component",19),2&t){const t=i.qc();i.xc("groupSettings",t.groupSettings)("groupCost",t.groupCost)}}function Lu(t,e){if(1&t){const t=i.ec();i.dc(0,"button",20),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.Vc(1),i.rc(2,"translate"),i.cc()}2&t&&(i.Kb(1),i.Wc(i.sc(2,1,"generic.cancel")))}function Pu(t,e){if(1&t){const t=i.ec();i.dc(0,"button",20),i.nc("click",function(){return i.Kc(t),i.qc().previousStep()}),i.Vc(1),i.rc(2,"translate"),i.cc()}2&t&&(i.Kb(1),i.Wc(i.sc(2,1,"group.create.previousstep")))}function Fu(t,e){if(1&t){const t=i.ec();i.dc(0,"button",21),i.nc("click",function(){return i.Kc(t),i.qc().nextStep()}),i.Vc(1),i.rc(2,"translate"),i.cc()}2&t&&(i.Kb(1),i.Wc(i.sc(2,1,"group.create.nextstep")))}function ku(t,e){if(1&t){const t=i.ec();i.dc(0,"button",21),i.nc("click",function(){return i.Kc(t),i.qc().buyGroup()}),i.Vc(1),i.rc(2,"translate"),i.cc()}2&t&&(i.Kb(1),i.Wc(i.sc(2,1,"group.create.confirm.buy")))}let Vu=(()=>{class t{constructor(t,e){this._groupsService=t,this._activeModal=e,this._clear()}_clear(){this.groupSettings=new Au,this._currentStep=1,this._showNameError=!1,this._showDescriptionError=!1,this._showRoomError=!1,this._availableRooms=new Map,this._groupCost=0}ngOnInit(){this._clear()}ngOnDestroy(){this._clear()}previousStep(){1!==this._currentStep&&this._currentStep--}nextStep(){4!==this._currentStep&&(1===this._currentStep&&(this._showNameError=0===this.groupSettings.name.length||this.groupSettings.name.length>29,this._showDescriptionError=this.groupSettings.description.length>254,this._showRoomError="0"===this.groupSettings.roomId,this._showNameError||this._showDescriptionError||this._showRoomError)||this._currentStep++)}hide(){this._activeModal.close()}buyGroup(){this._groupsService.buyGroup(this.groupSettings)}get currentStep(){return this._currentStep}get showNameError(){return this._showNameError}get showDescriptionError(){return this._showDescriptionError}get showRoomError(){return this._showRoomError}get availableRooms(){return this._availableRooms}set availableRooms(t){this._availableRooms=t}get groupCost(){return this._groupCost}set groupCost(t){this._groupCost=t}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Bu),i.Yb(Mu.a))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-group-creator-component",""]],attrs:wu,decls:33,vars:27,consts:[["dragHandle","#groupcreate-head",1,"groupcreate",3,"bringToTop","draggable"],["id","groupcreate-head"],[1,"gc-hood"],[1,"old-kapat",3,"click"],[1,"groupcreate-headbox"],[1,"groupcreate-menu"],[1,"gcstep1",3,"disabled"],[1,"step1-text"],[1,"gcstep2",3,"disabled"],[1,"gcstep4",3,"disabled"],[1,"step1-text",2,"width","100%"],[3,"groupSettings","showNameError","showDescriptionError","showRoomError","availableRooms","groupSettingsChange",4,"ngIf"],[3,"groupSettings","setDefaultValues","groupSettingsChange",4,"ngIf"],[3,"groupSettings","groupCost",4,"ngIf"],[1,"groupcreate-buttonbox"],["class","groupcreate-iptal",3,"click",4,"ngIf"],["class","groupcreate-gobutton",3,"click",4,"ngIf"],[3,"groupSettings","showNameError","showDescriptionError","showRoomError","availableRooms","groupSettingsChange"],[3,"groupSettings","setDefaultValues","groupSettingsChange"],[3,"groupSettings","groupCost"],[1,"groupcreate-iptal",3,"click"],[1,"groupcreate-gobutton",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",3),i.nc("click",function(){return e.hide()}),i.cc(),i.cc(),i.dc(6,"div",4),i.dc(7,"div",5),i.dc(8,"button",6),i.dc(9,"p",7),i.Vc(10),i.rc(11,"translate"),i.cc(),i.cc(),i.dc(12,"button",8),i.dc(13,"p",7),i.Vc(14),i.rc(15,"translate"),i.cc(),i.cc(),i.dc(16,"button",8),i.dc(17,"p",7),i.Vc(18),i.rc(19,"translate"),i.cc(),i.cc(),i.dc(20,"button",9),i.dc(21,"p",10),i.Vc(22),i.rc(23,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.Tc(24,Du,1,5,"nitro-group-creator-tab-info-component",11),i.Tc(25,Nu,1,2,"nitro-group-creator-tab-badge-component",12),i.Tc(26,Uu,1,2,"nitro-group-creator-tab-colors-component",12),i.Tc(27,xu,1,2,"nitro-group-creator-tab-confirmation-component",13),i.dc(28,"div",14),i.Tc(29,Lu,3,3,"button",15),i.Tc(30,Pu,3,3,"button",15),i.Tc(31,Fu,3,3,"button",16),i.Tc(32,ku,3,3,"button",16),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(i.sc(4,17,"group.window.title")),i.Kb(5),i.xc("disabled",1!==e.currentStep),i.Kb(2),i.Wc(i.sc(11,19,"group.create.steplabel.1")),i.Kb(2),i.xc("disabled",2!==e.currentStep),i.Kb(2),i.Wc(i.sc(15,21,"group.create.steplabel.2")),i.Kb(2),i.xc("disabled",3!==e.currentStep),i.Kb(2),i.Wc(i.sc(19,23,"group.create.steplabel.3")),i.Kb(2),i.xc("disabled",4!==e.currentStep),i.Kb(2),i.Wc(i.sc(23,25,"group.create.steplabel.4")),i.Kb(2),i.xc("ngIf",1===e.currentStep),i.Kb(1),i.xc("ngIf",2===e.currentStep),i.Kb(1),i.xc("ngIf",3===e.currentStep),i.Kb(1),i.xc("ngIf",4===e.currentStep),i.Kb(2),i.xc("ngIf",1===e.currentStep),i.Kb(1),i.xc("ngIf",e.currentStep>1),i.Kb(1),i.xc("ngIf",e.currentStep<4),i.Kb(1),i.xc("ngIf",4===e.currentStep))},encapsulation:2}),t})(),Bu=(()=>{class t{constructor(t,e,s){this._notificationService=t,this._modalService=e,this._ngZone=s,this._messages=[],this._badgeBases=new Map,this._badgeSymbols=new Map,this._badgePartColors=new Map,this._groupColorsA=new Map,this._groupColorsB=new Map,this._leavingGroupId=0,this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.registerMessages(),_.a.instance.addLinkEventTracker(this)}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),_.a.instance.roomSessionManager.events.addEventListener(w.a.ENDED,this.onRoomSessionEvent),this._messages=[new Se.a(this.onRoomInfoEvent.bind(this)),new au.a(this.onGroupInformationEvent.bind(this)),new ou.a(this.onGroupMembersEvent.bind(this)),new ru.a(this.onGroupConfirmMemberRemoveEvent.bind(this)),new nu.a(this.onGroupBuyDataEvent.bind(this)),new iu.a(this.onGroupBadgePartsEvent.bind(this)),new Qa.a(this.onCatalogPurchaseEvent.bind(this)),new cu.a(this.onGroupSettingsEvent.bind(this))];for(const t of this._messages)_.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(_.a.instance.roomSessionManager.events.removeEventListener(w.a.ENDED,this.onRoomSessionEvent),this._messages&&this._messages.length){for(const t of this._messages)_.a.instance.communication.removeMessageEvent(t);this._messages=[]}})}onRoomSessionEvent(t){if(t)switch(t.type){case w.a.ENDED:return void this._ngZone.run(()=>{this._roomInfoComponent.clear()})}}onRoomInfoEvent(t){if(!t)return;const e=t.getParser();e&&(this._ngZone.run(()=>{this._roomInfoComponent.groupId=e.data.habboGroupId,this._roomInfoComponent.groupName=e.data.groupName,this._roomInfoComponent.groupBadgeCode=e.data.groupBadgeCode,this._roomInfoComponent.groupMember=e.isGroupMember}),_.a.instance.communication.connection.send(new pu.a(e.data.habboGroupId,!1)))}onGroupInformationEvent(t){if(!t)return;const e=t.getParser();e&&((e.flag||e.id===this._groupInfoComponent.groupId)&&this._ngZone.run(()=>{this._groupInfoComponent.groupId=e.id,this._groupInfoComponent.groupName=e.title,this._groupInfoComponent.groupBadgeCode=e.badge,this._groupInfoComponent.groupDescription=e.description,this._groupInfoComponent.groupType=e.type,this._groupInfoComponent.groupMembershipType=e.membershipType,this._groupInfoComponent.groupCreationDate=e.createdAt,this._groupInfoComponent.groupOwnerName=e.ownerName,this._groupInfoComponent.groupMembersCount=e.membersCount,this._groupInfoComponent.groupMembershipRequestsCount=e.pendingRequestsCount,this._groupInfoComponent.groupHomeRoomId=e.roomId,this._groupInfoComponent.isOwner=e.isOwner}),this._roomInfoComponent.groupId===e.id&&this._ngZone.run(()=>{this._roomInfoComponent.groupType=e.type,this._roomInfoComponent.groupMembershipType=e.membershipType}))}onGroupMembersEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._groupMembersComponent.groupId=e.groupId,this._groupMembersComponent.groupName=e.groupTitle,this._groupMembersComponent.groupBadgeCode=e.badge,this._groupMembersComponent.totalMembersCount=e.totalMembersCount,this._groupMembersComponent.result=e.result,this._groupMembersComponent.admin=e.admin,this._groupMembersComponent.pageSize=e.pageSize,this._groupMembersComponent.pageIndex=e.pageIndex,this._groupMembersComponent.level=e.level.toString()})}onGroupConfirmMemberRemoveEvent(t){if(!t)return;const e=t.getParser();if(!e)return;let s=[];if(e.userId===_.a.instance.sessionDataManager.userId)s=this._groupInfoComponent.confirmLeave();else{if(!this._groupMembersComponent.admin)return;s=this._groupMembersComponent.confirmRemove(e.userId,e.furnitureCount)}this._notificationService.alertWithChoices(s[1],s[2],s[0])}onGroupBuyDataEvent(t){if(!t)return;const e=t.getParser();if(e&&this._groupCreatorModal){const t=this._groupCreatorModal.componentInstance;t&&this._ngZone.run(()=>{t.groupCost=e.groupCost,t.availableRooms=e.availableRooms})}}onGroupBadgePartsEvent(t){if(!t)return;const e=t.getParser();e&&(this._badgeBases=e.bases,this._badgeSymbols=e.symbols,this._badgePartColors=e.partColors,this._groupColorsA=e.colorsA,this._groupColorsB=e.colorsB)}onCatalogPurchaseEvent(t){t&&t.getParser()&&this._ngZone.run(()=>{this.closeGroupCreator()})}onGroupSettingsEvent(t){if(!t)return;const e=t.getParser();e&&this._groupManagerComponent&&(this._groupManagerComponent.load(e),_.a.instance.communication.connection.send(new uu.a))}linkReceived(t){const e=t.split("/");if(!(e.length<2))switch(e[1]){case"create":return void this.openGroupCreator();case"manage":if(!e[2])return;return void this.requestGroupSettings(parseInt(e[2]));case"info":if(!e[2])return;return void this.getInfo(parseInt(e[2]))}}getInfo(t){_.a.instance.communication.connection.send(new pu.a(t,!0))}getMembers(t,e,s,i){_.a.instance.communication.connection.send(new Eu.a(t,e,s,i))}join(t){0===this._roomInfoComponent.groupType&&this._ngZone.run(()=>{this._roomInfoComponent.groupMember=!0}),_.a.instance.communication.connection.send(new fu.a(t))}giveAdmin(t,e){_.a.instance.communication.connection.send(new hu.a(t,e))}takeAdmin(t,e){_.a.instance.communication.connection.send(new lu.a(t,e))}acceptMembership(t,e){_.a.instance.communication.connection.send(new Su.a(t,e))}declineMembership(t,e){_.a.instance.communication.connection.send(new vu.a(t,e))}removeMember(t,e){_.a.instance.communication.connection.send(new gu.a(t,e))}deleteGroup(t){_.a.instance.communication.connection.send(new mu.a(t))}openProfile(t){_.a.instance.communication.connection.send(new yu.a(t))}save(t){_.a.instance.communication.connection.send(new Ru.a(t.id,t.name,t.description)),_.a.instance.communication.connection.send(new bu.a(t.id,t.currentBadgeArray)),_.a.instance.communication.connection.send(new Iu.a(t.id,t.colorA,t.colorB)),_.a.instance.communication.connection.send(new Tu.a(t.id,t.state,t.canMembersDecorate?0:1))}buyGroup(t){_.a.instance.communication.connection.send(new _u.a(t.name,t.description,parseInt(t.roomId),t.colorA,t.colorB,t.currentBadgeArray))}openGroupCreator(){this._groupCreatorModal||(this._groupCreatorModal=this._modalService.open(Vu,{backdrop:"static",centered:!0,keyboard:!1}),this._groupCreatorModal&&this._groupCreatorModal.result.then(()=>this._groupCreatorModal=null),_.a.instance.communication.connection.send(new du.a),_.a.instance.communication.connection.send(new uu.a))}closeGroupCreator(){this._groupCreatorModal&&(this._groupCreatorModal.close(),this._groupCreatorModal=null)}requestGroupSettings(t){_.a.instance.communication.connection.send(new Ou.a(t))}get eventUrlPrefix(){return"groups"}set groupRoomInfoComponent(t){this._roomInfoComponent=t}set groupInfoComponent(t){this._groupInfoComponent=t}set groupMembersComponent(t){this._groupMembersComponent=t}set groupManagerComponent(t){this._groupManagerComponent=t}get badgeBases(){return this._badgeBases}get badgeSymbols(){return this._badgeSymbols}get badgePartColors(){return this._badgePartColors}get groupColorsA(){return this._groupColorsA}get groupColorsB(){return this._groupColorsB}}return t.\u0275fac=function(e){return new(e||t)(i.kc(ss),i.kc(Mu.g),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();function Wu(t,e){if(1&t){const t=i.ec();i.dc(0,"div",14),i.nc("click",function(){return i.Kc(t),i.qc(3).join()}),i.Vc(1),i.rc(2,"translate"),i.cc()}2&t&&(i.Kb(1),i.Wc(i.sc(2,1,"group.join")))}function Ku(t,e){if(1&t){const t=i.ec();i.dc(0,"div",14),i.nc("click",function(){return i.Kc(t),i.qc(4).join()}),i.Vc(1),i.rc(2,"translate"),i.cc()}2&t&&(i.Kb(1),i.Wc(i.sc(2,1,"group.requestmembership")))}function Gu(t,e){1&t&&(i.dc(0,"button",16),i.Vc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Wc(i.sc(2,1,"group.membershippending")))}function Hu(t,e){if(1&t&&(i.dc(0,"div"),i.Tc(1,Ku,3,3,"div",12),i.Tc(2,Gu,3,3,"button",15),i.cc()),2&t){const t=i.qc(3);i.Kb(1),i.xc("ngIf",0===t.groupMembershipType),i.Kb(1),i.xc("ngIf",2===t.groupMembershipType)}}function ju(t,e){if(1&t){const t=i.ec();i.dc(0,"div",8),i.nc("click",function(){return i.Kc(t),i.qc(2).openInfo()}),i.dc(1,"div",9),i.Zb(2,"nitro-badge",10),i.cc(),i.dc(3,"p",11),i.Vc(4),i.cc(),i.Tc(5,Wu,3,3,"div",12),i.Tc(6,Hu,3,2,"div",13),i.cc()}if(2&t){const t=i.qc(2);i.Kb(2),i.xc("badge",t.groupBadgeCode)("isGroup",!0),i.Kb(2),i.Wc(t.groupName),i.Kb(1),i.xc("ngIf",0===t.groupType&&0===t.groupMembershipType),i.Kb(1),i.xc("ngIf",1===t.groupType)}}function zu(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.nc("click",function(){return i.Kc(t),i.qc().toggleOpen()}),i.Zb(2,"div",3),i.dc(3,"p",4),i.Vc(4),i.rc(5,"translate"),i.cc(),i.Zb(6,"div",5),i.cc(),i.Tc(7,ju,7,5,"div",6),i.Zb(8,"div",7),i.cc()}if(2&t){const t=i.qc();i.Kb(4),i.Wc(i.sc(5,3,"group.homeroominfo.title")),i.Kb(2),i.xc("ngClass",t.open?"groupinfo-ac":"groupinfo-kapat"),i.Kb(1),i.xc("ngIf",t.open)}}let Yu=(()=>{class t{constructor(t){this._groupService=t,this._groupService.groupRoomInfoComponent=this,this._open=!1,this.clear()}clear(){this._groupId=0,this._groupName=null,this._groupBadgeCode=null,this._groupType=-1,this._groupMembershipType=-1,this._groupMember=!1}toggleOpen(){this._open=!this._open}join(){this._groupId&&0===this._groupMembershipType&&this._groupService.join(this.groupId)}openInfo(){this._groupService.getInfo(this._groupId)}get visible(){return this._groupId>0}get open(){return this._open}get groupId(){return this._groupId}set groupId(t){this._groupId=t}get groupName(){return this._groupName}set groupName(t){this._groupName=t}get groupBadgeCode(){return this._groupBadgeCode}set groupBadgeCode(t){this._groupBadgeCode=t}get groupType(){return this._groupType}set groupType(t){this._groupType=t}get groupMembershipType(){return this._groupMembershipType}set groupMembershipType(t){this._groupMembershipType=t}get isGroupMember(){return this._groupMember}set groupMember(t){this._groupMember=t}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Bu))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-group-room-info-component"]],decls:1,vars:1,consts:[["class","group-roominfo",4,"ngIf"],[1,"group-roominfo"],[1,"group-roominfo_head-box",3,"click"],[1,"groupico"],[1,"groupcenter-text"],[1,"groupinfo-toggle",3,"ngClass"],["class","group-roominfo_body-box",3,"click",4,"ngIf"],[1,"group-roominfo_bottom-box"],[1,"group-roominfo_body-box",3,"click"],[1,"groupinfo-badge"],[1,"mr-2",3,"badge","isGroup"],[1,"groupinfo-name"],["class","grup-katil-button",3,"click",4,"ngIf"],[4,"ngIf"],[1,"grup-katil-button",3,"click"],["class","grup-katil-button","disabled","",4,"ngIf"],["disabled","",1,"grup-katil-button"]],template:function(t,e){1&t&&i.Tc(0,zu,9,5,"div",0),2&t&&i.xc("ngIf",e.visible)},directives:[p.n,p.l,Gc],pipes:[ln],encapsulation:2}),t})(),qu=(()=>{class t{constructor(t){this._notificationService=t,this.type=null,this.parameters=null,this.removing=!1}hide(){this.removing=!0,setTimeout(()=>this.close(),300)}close(){this._notificationService.closeNotification(this)}interpolate(t,e=null){e||(e=new RegExp(/%(.*?)%/g));const s=t.match(e);if(s&&s.length)for(const i of s){const e=this.parameters.get(this.removeInterpolateKey(i));e&&(t=t.replace(i,e))}return t}removeInterpolateKey(t){return t.replace(/%/g,"")}getDefaultImage(){const t=this.notificationLocaleKey+".image";let e=_.a.instance.getLocalization(t)||null;return e===t?(e=_.a.instance.getConfiguration("image.library.notifications.url"),e=e.replace("%image%",this.type),e):(e&&e.length&&(e=this.interpolate(e),e=_.a.instance.core.configuration.interpolate(e)),e)}getDefaultLinkTitle(){let t=_.a.instance.getLocalization(this.notificationLocaleKey+".linkTitle")||null;return t&&t.length&&(t=this.interpolate(t)),t}getDefaultLinkUrl(){let t=_.a.instance.getLocalization(this.notificationLocaleKey+".linkUrl")||null;return t&&t.length&&(t=this.interpolate(t)),t}getDefaultMessage(){let t=_.a.instance.getLocalization(this.notificationLocaleKey+".message")||null;return t&&t.length&&(t=this.interpolate(t)),t}getDefaultTitle(){let t=_.a.instance.getLocalization(this.notificationLocaleKey+".title")||null;return t&&t.length&&(t=this.interpolate(t)),t}get notificationLocaleKey(){return"notification."+this.type}get timeout(){return 0}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(ss))},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();const Zu=function(t){return{"background-image":t}};function Xu(t,e){if(1&t&&i.Zb(0,"div",3),2&t){const t=i.qc();i.xc("ngStyle",i.Bc(1,Zu,"url("+t.getDefaultImage()+")"))}}let Qu=(()=>{class t extends qu{clickNotification(){this.visitUrl(),this.hide()}visitUrl(){const t=this.getDefaultLinkUrl();if(!t||!t.length)return;const e=t.split(":");!e||e.length<2||("event"===e[0]?_.a.instance.createLinkEvent(e[1]):window.open(t,"_blank"))}getDefaultImage(){let t=this.parameters.get("image")||null;return t?(t=_.a.instance.core.configuration.interpolate(t),t):super.getDefaultImage()}getDefaultLinkTitle(){let t=this.parameters.get("linkTitle")||null;return t?(t=_.a.instance.getLocalization(t),t):super.getDefaultLinkTitle()}getDefaultLinkUrl(){return this.parameters.get("linkUrl")||super.getDefaultLinkUrl()}getDefaultMessage(){let t=this.parameters.get("message")||null;return t?(t=_.a.instance.getLocalization(t),t):super.getDefaultMessage()}getDefaultTitle(){let t=this.parameters.get("title")||null;return t?(t=_.a.instance.getLocalization(t),t):super.getDefaultTitle()}get timeout(){return 5e3}}return t.\u0275fac=function(e){return Ju(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:3,vars:4,consts:[[1,"notification-oldhabbo",3,"click"],["class","notification-resim",3,"ngStyle",4,"ngIf"],[1,"notification-mesajyazi",3,"innerHTML"],[1,"notification-resim",3,"ngStyle"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.nc("click",function(){return e.clickNotification()}),i.Tc(1,Xu,1,3,"div",1),i.Zb(2,"p",2),i.cc()),2&t&&(i.Qb("removing",e.removing),i.Kb(1),i.xc("ngIf",e.getDefaultImage()),i.Kb(1),i.xc("innerHTML",e.getDefaultMessage(),i.Lc))},directives:[p.n,p.o],encapsulation:2}),t})();const Ju=i.fc(Qu),$u=function(t){return{"background-image":t}};function t_(t,e){if(1&t&&i.Zb(0,"div",6),2&t){const t=i.qc();i.xc("ngStyle",i.Bc(1,$u,"url("+t.getDefaultImage()+")"))}}let e_=(()=>{class t extends Qu{get timeout(){return 0}}return t.\u0275fac=function(e){return s_(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:10,vars:10,consts:[[1,"notification-oldhabbo",2,"margin-left","2px"],["class","notification-resim",3,"ngStyle",4,"ngIf"],[1,"notification-mesajyazi",3,"innerHTML"],[1,"eventha-button"],["type","button",1,"eventno",3,"click"],["type","button",1,"eventyes",3,"click"],[1,"notification-resim",3,"ngStyle"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Tc(1,t_,1,3,"div",1),i.Zb(2,"p",2),i.dc(3,"div",3),i.dc(4,"button",4),i.nc("click",function(){return e.hide()}),i.Vc(5),i.rc(6,"translate"),i.cc(),i.dc(7,"button",5),i.nc("click",function(){return e.clickNotification()}),i.Vc(8),i.rc(9,"translate"),i.cc(),i.cc(),i.cc()),2&t&&(i.Qb("removing",e.removing),i.Kb(1),i.xc("ngIf",e.getDefaultImage()),i.Kb(1),i.xc("innerHTML",e.getDefaultMessage(),i.Lc),i.Kb(3),i.Wc(i.sc(6,6,"alert.close.button")),i.Kb(3),i.Wc(i.sc(9,8,"landing.view.badgemuseumsubmit.button")))},directives:[p.n,p.o],pipes:[ln],encapsulation:2}),t})();const s_=i.fc(e_),i_=["notificationsContainer"];function n_(t,e){}let r_=(()=>{class t{constructor(t,e,s){this._notificationService=t,this._componentFactoryResolver=e,this._ngZone=s,this._notifications=new Map}ngOnInit(){this._notificationService.notificationCenter=this}ngOnDestroy(){this.closeAllNotifications(),this._notificationService.notificationCenter=null}displayNotification(t,e){let s=null;switch(t){case"hotel.event":s=e_;break;default:s=Qu}const i=this.buildNotification(s);return i?(i.type=t,i.parameters=e,i.timeout>0&&setTimeout(()=>i&&i.hide(),i.timeout),i):null}buildNotification(t){let e=null;return this._ngZone.run(()=>{e=this.createNotificationComponent(t)}),e||null}createNotificationComponent(t){if(!t)return null;let e=null;const s=this._componentFactoryResolver.resolveComponentFactory(t);let i=null;return s&&(i=this.notificationsContainer.createComponent(s),this._notifications.set(i.instance,i)),e=i.instance,e}closeNotification(t){if(!t)return;const e=this._notifications.get(t);e&&(this._notifications.delete(t),this.removeNotificationView(e.hostView))}closeAllNotifications(){for(const t of this._notifications.keys())this.closeNotification(t)}removeNotificationView(t){if(!t)return;const e=this.notificationsContainer.indexOf(t);-1!==e&&this.notificationsContainer.remove(e)}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(ss),i.Yb(i.m),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-notification-center-component"]],viewQuery:function(t,e){if(1&t&&i.bd(i_,1,i.Z),2&t){let t;i.Gc(t=i.oc())&&(e.notificationsContainer=t.first)}},decls:3,vars:0,consts:[[1,"d-flex","flex-column-reverse"],["notificationsContainer",""]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Tc(1,n_,0,0,"ng-template",null,1,i.Uc),i.cc())},encapsulation:2}),t})();var a_=s("tVIE"),o_=s("a9Mt"),c_=s("qZ7S"),h_=s("UufK");class l_{constructor(t){this._name=t,this._achievements=[]}get name(){return this._name}set name(t){this._name=t}get achievements(){return this._achievements}set achievements(t){this._achievements=t}}let u_=(()=>{class t{constructor(t,e){this._settingsService=t,this._ngZone=e,this._messages=[],this._categories=[],this._selectedCategory=null,this._achievementScore=0,this._isInitalized=!1,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new o_.a(this.onAchievementsMessageEvent.bind(this)),new c_.a(this.onAchievementsScoreEvent.bind(this)),new a_.a(this.onAchievementEvent.bind(this))];for(const t of this._messages)_.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)_.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onAchievementsScoreEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this._achievementScore=e.score)}onAchievementsMessageEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=[];for(const i of e.achievements){if(!i)continue;let t=null;for(const e of s)if(e&&e.name===i.category){t=e;break}t||(t=new l_(i.category),s.push(t)),t.achievements.push(i)}this._ngZone.run(()=>{this._categories=s,this._selectedCategory=this._categories[0],this._isInitalized=!0})}onAchievementEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=e.achievement;s&&this._ngZone.run(()=>{for(const t of this._categories){if(!t||t.name!==s.category)continue;let e=!1;for(const i of t.achievements)if(i&&i.achievementId===s.achievementId){e=!0,i.progress!==s.progress&&(i.reset(s),this.isIgnoredAchievement(i)||this._selectedCategory!==t&&i.unseen++);break}if(e)break}})}isIgnoredAchievement(t){if(!t)return!1;const e=_.a.instance.getConfiguration("achievements.unseen.ignored"),s=t.badgeId.replace(/[0-9]/g,"");return e.indexOf(s)>=0}loadAchievements(){_.a.instance.communication.connection.send(new h_.a)}get categories(){return this._categories}get selectedCategory(){return this._selectedCategory}set selectedCategory(t){this._selectedCategory=t}get achievementScore(){return this._achievementScore}get isInitalized(){return this._isInitalized}get unseenCount(){let t=0;for(const e of this._categories)if(e)for(const s of e.achievements)s&&(t+=s.unseen);return t}}return t.\u0275fac=function(e){return new(e||t)(i.kc(m),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();const __=["progressBar"],d_=["nitro-achievements-category-list-component",""];function g_(t,e){if(1&t&&(i.dc(0,"div",15),i.dc(1,"p",16),i.Vc(2),i.cc(),i.cc()),2&t){const t=i.qc().$implicit,e=i.qc();i.Kb(2),i.Wc(e.getUnseenCount(t))}}const m_=function(t){return[t]},p_=function(t){return{"background-image":t}};function f_(t,e){if(1&t){const t=i.ec();i.dc(0,"div",8),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().selectCategory(s)}),i.Tc(1,g_,3,1,"div",9),i.dc(2,"div",10),i.dc(3,"p",11),i.Vc(4),i.rc(5,"translate"),i.cc(),i.cc(),i.dc(6,"div",12),i.dc(7,"div",13),i.dc(8,"p",14),i.Vc(9),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=e.$implicit,s=i.qc();i.Kb(1),i.xc("ngIf",s.getUnseenCount(t)),i.Kb(3),i.Wc(i.sc(5,5,"quests."+t.name+".name")),i.Kb(2),i.xc("ngClass",i.Bc(7,m_,""))("ngStyle",i.Bc(9,p_,"url("+s.getCategoryImage(t.name,t.achievements)+")")),i.Kb(3),i.Wc(s.getCategoryProgress(t.achievements))}}const E_=function(t){return{width:t}};let S_=(()=>{class t{constructor(t,e,s){this._settingsService=t,this._achivementsService=e,this._ngZone=s,this.visible=!1}selectCategory(t){this._achivementsService.selectedCategory=t}getProgressNumbers(){let t=0,e=0;for(const s of this.categories)if(s)for(const i of s.achievements)i&&(t+=i._Str_7518?i.level:i.level-1,e+=i.totalLevels);return[t,e]}getProgressPercentageString(){const[t,e]=this.getProgressNumbers();return Math.trunc(t/e*100)+"%"}getProgressString(){const[t,e]=this.getProgressNumbers();return t+"/"+e}getCategoryImage(t,e,s=!1){if(s)return _.a.instance.getConfiguration("achievements.images.url",_.a.instance.core.configuration.getValue("image.library.url")+`quests/achcategory_${t}.png`).toString().replace("%image%",t);let i=0;for(const r of e)i+=r._Str_7518?r.level:r.level-1;const n=i>0?"active":"inactive";return _.a.instance.getConfiguration("achievements.images.url",_.a.instance.core.configuration.getValue("image.library.url")+`quests/achcategory_${t}_${n}.png`).toString().replace("%image%",`achcategory_${t}_${n}`)}getCategoryProgress(t){let e=0,s=0;for(const i of t)i&&(i._Str_7518&&(e=e+1+i.level),s+=i.totalLevels);return e+"/"+s}getUnseenCount(t){let e=0;if(t)for(const s of t.achievements)s&&(e+=s.unseen);return e}get categories(){return this._achivementsService.categories}get selectedCategory(){return this._achivementsService.selectedCategory}get achievementScore(){return this._achivementsService.achievementScore}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(m),i.Yb(u_),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-achievements-category-list-component",""]],viewQuery:function(t,e){if(1&t&&i.bd(__,1),2&t){let t;i.Gc(t=i.oc())&&(e.progressBar=t.first)}},inputs:{visible:"visible"},attrs:d_,decls:12,vars:13,consts:[[1,"achievementsbox"],["class","success-info-box",3,"click",4,"ngFor","ngForOf"],[1,"achievement-progression"],[1,"ach-progessbox"],[1,"achprbg"],[1,"total-ach"],[1,"achprogress",3,"ngStyle"],[1,"achprogtxt"],[1,"success-info-box",3,"click"],["class","basari-mobicountbox",4,"ngIf"],[1,"achievements-title"],[1,"achtxt"],[1,"achico",3,"ngClass","ngStyle"],[1,"number-of-success"],[1,"nostxt"],[1,"basari-mobicountbox"],[1,"count-txt","count"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Tc(1,f_,10,11,"div",1),i.dc(2,"div",2),i.dc(3,"div",3),i.dc(4,"div",4),i.dc(5,"p",5),i.Vc(6),i.rc(7,"translate"),i.cc(),i.Zb(8,"div",6),i.cc(),i.cc(),i.dc(9,"p",7),i.Vc(10),i.rc(11,"translate"),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(1),i.xc("ngForOf",e.categories),i.Kb(5),i.Yc("",i.sc(7,5,"achievements.categories.totalprogress")," ",e.getProgressString(),""),i.Kb(2),i.xc("ngStyle",i.Bc(11,E_,e.getProgressPercentageString())),i.Kb(2),i.Wc(i.uc(11,7,"achievements.categories.score","score",e.achievementScore)))},directives:[p.m,p.o,p.n,p.l],pipes:[ln],encapsulation:2}),t})();class v_{constructor(t){this.badgeId=t,this._base="",this._level=1,this.parseText()}parseText(){let t=this.badgeId.length-1;for(;t>0&&this.isNumber(this.badgeId.charAt(t));)t--;this._base=this.badgeId.substr(0,t+1);const e=this.badgeId.substr(t+1,this.badgeId.length);e&&""!=e&&(this._level=Number.parseInt(e))}isNumber(t){const e=t.charCodeAt(0);return e>=49&&e<=57}set level(t){this._level=Math.max(1,t)}get level(){return this._level}get getBadgeId(){return this._base+this._level}get base(){return this._base}}const b_=["nitro-achievements-category-component",""];function I_(t,e){if(1&t&&(i.dc(0,"div",11),i.Vc(1),i.cc()),2&t){const t=i.qc().$implicit;i.Kb(1),i.Wc(t.count)}}const R_=function(t,e){return[t,e]},T_=function(t){return{"background-image":t}};function O_(t,e){if(1&t){const t=i.ec();i.dc(0,"div",8),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().selectAchievement(s)}),i.Zb(1,"div",9),i.Tc(2,I_,2,1,"div",10),i.cc()}if(2&t){const t=e.$implicit,s=i.qc();i.xc("ngClass",i.Cc(4,R_,s.selectedAchievement===t?"achcheck-box-active":"",t&&t._Str_10438?"":"greyscale")),i.Kb(1),i.xc("ngClass",i.Cc(7,R_,"",t&&t._Str_10438?"":"greyscale"))("ngStyle",i.Bc(10,T_,"url("+s.getBadgeImageUrl(t)+")")),i.Kb(1),i.xc("ngIf",t.count)}}const y_=function(t){return[t]},C_=function(t){return{width:t}};function A_(t,e){if(1&t&&(i.dc(0,"div",12),i.dc(1,"div",13),i.dc(2,"div",14),i.Zb(3,"img",15),i.cc(),i.dc(4,"p",16),i.Vc(5),i.cc(),i.cc(),i.dc(6,"div",17),i.dc(7,"p",18),i.Vc(8),i.cc(),i.dc(9,"p",19),i.Vc(10),i.cc(),i.dc(11,"p",20),i.Vc(12),i.rc(13,"translate"),i.dc(14,"b"),i.Vc(15),i.cc(),i.Zb(16,"img",21),i.cc(),i.dc(17,"div",22),i.dc(18,"div",23),i.dc(19,"p",24),i.Vc(20),i.cc(),i.Zb(21,"div",25),i.cc(),i.cc(),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(3),i.xc("ngClass",i.Bc(11,y_,t.selectedAchievement._Str_10438?"":"greyscale"))("src",t.getBadgeImageUrl(t.selectedAchievement),i.Mc),i.Kb(2),i.Wc(t.getBadgeLevelString(t.selectedAchievement)),i.Kb(3),i.Wc(t.getBadgeText(t.selectedAchievement)),i.Kb(2),i.Wc(t.getBadgeText(t.selectedAchievement,!0)),i.Kb(2),i.Xc("",i.sc(13,9,"achievements.details.reward")," "),i.Kb(3),i.Wc(t.selectedAchievement.rewardAmount),i.Kb(5),i.Wc(t.getProgress(t.selectedAchievement,!0)),i.Kb(1),i.xc("ngStyle",i.Bc(13,C_,t.getProgress(t.selectedAchievement)))}}let M_=(()=>{class t{constructor(t){this._achivementsService=t,this.category=null,this._selectedAchievement=null}ngOnChanges(t){const e=t.category.currentValue;e&&e!==t.category.previousValue&&(this._selectedAchievement=null)}selectAchievement(t){t.unseen=0,this._selectedAchievement=t}getAchievedBadgeId(t){return t._Str_7518?t.badgeId:_.a.instance.localization.getBadgeBaseAndLevel(t.badgeId)}getBadgeText(t,e=!1){const s=this.getAchievedBadgeId(t),i=new v_(s);let n;return n=this.getText(e?["badge_desc_"+s,"badge_desc_"+i.base]:["badge_name_"+s,"badge_name_"+i.base]),n.replace("%roman%",this.getRomanNumeral(i.level)).replace("%limit%",t._Str_24142.toString())}getText(t){let e="",s=0;for(;s<t.length;){const i=t[s];if(e=_.a.instance.getLocalization(i),e!==i)return e;s++}return""}getProgress(t,e=!1){if(t)return e?t.progress+"/"+t.toNextProgress:Math.trunc(t.progress/t.toNextProgress*100)+"%"}getBadgeLevelString(t){if(!t)return;let e=_.a.instance.getLocalization("achievements.details.level");return e=e.replace("%level%",Math.max(1,t.level-1).toString()),e=e.replace("%limit%",t.totalLevels.toString()),e}getRomanNumeral(t){return _.a.instance.localization.getRomanNumeral(t)}getBadgeImageUrl(t){let e=t.badgeId;return t.totalLevels>1&&(e=e.replace(/[0-9]/g,""),e+=t.level-1>0?t.level-1:t.level),_.a.instance.sessionDataManager.getBadgeUrl(e)}getCurrencyUrl(t){return _.a.instance.getConfiguration("currency.asset.icon.url").replace("%type%",t.toString())}get selectedAchievement(){return this._selectedAchievement}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(u_))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-achievements-category-component",""]],inputs:{category:"category"},features:[i.Ib],attrs:b_,decls:12,vars:8,consts:[[1,"achievements-check"],[1,"achcheck-head"],[1,"ach-badge",2,"background-image","url('/assets/images/achievements/achbadge.png')"],[1,"achname"],[1,"achtotal_badge"],[1,"achcheck-body"],["class","achcheck-box",3,"ngClass","click",4,"ngFor","ngForOf"],["class","achcheck-info",4,"ngIf"],[1,"achcheck-box",3,"ngClass","click"],[1,"achcheck-badge",3,"ngClass","ngStyle"],["class","position-absolute btn btn-sm btn-danger px-1 py-0 rounded count",4,"ngIf"],[1,"position-absolute","btn","btn-sm","btn-danger","px-1","py-0","rounded","count"],[1,"achcheck-info"],[1,"achcheck-left"],[1,"achcheckbigbadge"],[3,"ngClass","src"],[1,"achcheck-levelinfo"],[1,"achcheck-right"],[1,"achcheck-title"],[1,"achcheck-desc"],[1,"achcheck-leveltxt"],["src","/assets/images/wallet/icons/0.png"],[1,"achcheck-progessbox"],[1,"achcheckprbg"],[1,"total-ach"],[1,"achprogress",3,"ngStyle"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Zb(2,"div",2),i.dc(3,"p",3),i.Vc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"p",4),i.Vc(7),i.rc(8,"translate"),i.cc(),i.cc(),i.dc(9,"div",5),i.Tc(10,O_,3,12,"div",6),i.Tc(11,A_,22,15,"div",7),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Wc(i.sc(5,4,"quests."+e.category.name+".name")),i.Kb(3),i.Wc(i.sc(8,6,"achievements.details.categoryprogress")),i.Kb(3),i.xc("ngForOf",e.category.achievements),i.Kb(1),i.xc("ngIf",e.selectedAchievement))},directives:[p.m,p.n,p.l,p.o],pipes:[ln],encapsulation:2}),t})();function w_(t,e){if(1&t&&i.Zb(0,"div",7),2&t){const t=i.qc(2);i.xc("category",t.selectedCategory)}}function D_(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"p",3),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",4),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.cc(),i.cc(),i.Zb(6,"div",5),i.Tc(7,w_,1,1,"div",6),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.sc(4,2,"inventory.achievements")),i.Kb(4),i.xc("ngIf",t.selectedCategory)}}let N_=(()=>{class t{constructor(t,e,s){this._settingsService=t,this._achivementsService=e,this._ngZone=s,this.visible=!1}ngOnChanges(t){const e=t.visible.currentValue;e&&e!==(t.visible.previousValue||!1)&&this.prepareAchievements()}prepareAchievements(){this._achivementsService.isInitalized||this._achivementsService.loadAchievements()}hide(){this._settingsService.hideAchievements()}get selectedCategory(){return this._achivementsService.selectedCategory}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(m),i.Yb(u_),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-achievements-main-component"]],inputs:{visible:"visible"},features:[i.Ib],decls:1,vars:1,consts:[["id","achievements",3,"bringToTop","draggable",4,"ngIf"],["id","achievements",3,"bringToTop","draggable"],["id","achievementsdrag",1,"drag-handler"],[1,"oldh-hood"],[1,"old-kapat",3,"click"],["nitro-achievements-category-list-component",""],["nitro-achievements-category-component","",3,"category",4,"ngIf"],["nitro-achievements-category-component","",3,"category"]],template:function(t,e){1&t&&i.Tc(0,D_,8,4,"div",0),2&t&&i.xc("ngIf",e.visible)},directives:[p.n,Tr,Lr,S_,M_],pipes:[ln],encapsulation:2}),t})();var U_=s("7sb4");let x_=(()=>{class t{constructor(t,e){this._notificationService=t,this._ngZone=e,this._component=null,this.registerMessages()}static getReasonAsString(t){switch(t){case 1:return"useless";case 2:return"abusive";default:return"resolved"}}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._messages&&this.unregisterMessages(),this._messages=[new U_.a(this.onCallForHelpResultMessageEvent.bind(this))];for(const t of this._messages)_.a.instance.communication.registerMessageEvent(t)}unregisterMessages(){if(this._messages&&this._messages.length)for(const t of this._messages)_.a.instance.communication.removeMessageEvent(t)}onCallForHelpResultMessageEvent(e){if(!e)return;const s=e.getParser();if(!s)return;let i=s.messageText;""===i&&(i=_.a.instance.getLocalization("${help.cfh.closed."+t.getReasonAsString(s.resultType)+"}")),this._ngZone.run(()=>this._notificationService.alert(i,"${mod.alert.title}"))}get component(){return this._component}set component(t){this._component=t}}return t.\u0275fac=function(e){return new(e||t)(i.kc(ss),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})(),L_=(()=>{class t{constructor(t,e){this._callForHelpService=t,this._ngZone=e}ngOnInit(){this._callForHelpService.component=this}ngOnDestroy(){this._callForHelpService.component=null}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(x_),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-call-for-help-main-component"]],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})(),P_=(()=>{class t{openPage(t){}closePage(t){t&&this._component&&this._component.close(t)}closeAll(){this._component&&this._component.closeAll()}get component(){return this._component}set component(t){this._component=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})(),F_=(()=>{class t{constructor(t){this._habbopediaService=t,this.url=""}close(){this._habbopediaService.closePage(this)}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(P_))},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();const k_=["pagesContainer"];function V_(t,e){}let B_=(()=>{class t{constructor(t,e,s){this._habbopediaService=t,this._componentFactoryResolver=e,this._ngZone=s,this._pages=new Map}ngOnInit(){this._habbopediaService.component=this,_.a.instance.addLinkEventTracker(this)}ngOnDestroy(){_.a.instance.removeLinkEventTracker(this),this._habbopediaService.component=null}openPage(t){this.buildPage(F_,t)}buildPage(t,e){const s=this.createComponent(t);return s?(s.url=e,s):null}createComponent(t){if(!t)return null;const e=this._componentFactoryResolver.resolveComponentFactory(t);let s=null;return e&&(s=this.pagesContainer.createComponent(e),this._pages.set(s.instance,s)),s.instance}close(t){if(!t)return;const e=this._pages.get(t);e&&(this._pages.delete(t),this.removeView(e.hostView))}closeAll(){for(const t of this._pages.keys())this.close(t)}removeView(t){if(!t)return;const e=this.pagesContainer.indexOf(t);-1!==e&&this.pagesContainer.remove(e)}linkReceived(t){const e=t.split("/");e.length<2||(e.shift(),this.openPage(e.join("/")))}get eventUrlPrefix(){return"habbopages/"}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(P_),i.Yb(i.m),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-pedia-main-component"]],viewQuery:function(t,e){if(1&t&&i.bd(k_,1,i.Z),2&t){let t;i.Gc(t=i.oc())&&(e.pagesContainer=t.first)}},decls:2,vars:0,consts:[["pagesContainer",""]],template:function(t,e){1&t&&i.Tc(0,V_,0,0,"ng-template",null,0,i.Uc)},encapsulation:2}),t})();var W_=s("sRxW");let K_=(()=>{class t{}return t.GENERIC="hd",t.HEAD="head",t.TORSO="torso",t.LEGS="legs",t.HOTLOOKS="hotlooks",t.WARDROBE="wardrobe",t.EFFECTS="effects",t})(),G_=(()=>{class t{constructor(t){this._model=t,this._figureString=null,this._isDisposed=!1}dispose(){this._isDisposed=!0}update(t,e=0,s=4){this._figureString=t}resetFigure(t){}get disposed(){return this._isDisposed}get figureString(){return this._figureString}}return t._Str_9887=4,t})(),H_=(()=>{class t{constructor(){this._gender="M",this._direction=4,this._avatarEffectType=-1,this._direction=G_._Str_9887,this._view=new G_(this)}loadAvatarData(t,e){this._data=new Map,this._colors=new Map,this._gender=e,this.parseFigureString(t),this.updateView()}dispose(){this._data=null,this._colors=null,this._isDisposed=!0,this._view&&(this._view.dispose(),this._view=null)}get disposed(){return this._isDisposed}parseFigureString(t){if(!t)return;const e=t.split(".");if(e&&e.length)for(const s of e){const t=s.split("-");if(!t.length)continue;const e=t[0],i=parseInt(t[1]),n=[];let r=2;for(;r<t.length;)n.push(parseInt(t[r])),r++;n.length||n.push(0),this.savePartSetId(e,i,!1),this.savePartSetColourId(e,n,!1)}}getPartSetId(t){const e=this._data.get(t);return void 0!==e?e:-1}getColourIds(t){const e=this._colors.get(t);return void 0!==e?e:[]}getFigureString(){let t="";const e=[];for(const[i,n]of this._data.entries()){const t=this._colors.get(i);let s=i+"-"+n;if(t&&t.length){let e=0;for(;e<t.length;)s=s+"-"+t[e],e++}e.push(s)}let s=0;for(;s<e.length;)t+=e[s],s<e.length-1&&(t+="."),s++;return t}savePartData(t,e,s,i=!1){this.savePartSetId(t,e,i),this.savePartSetColourId(t,s,i)}savePartSetId(e,s,i=!0){switch(e){case t.FACE:case t.HR:case t.HA:case t.HE:case t.EA:case t.FA:case t.CH:case t.CC:case t.CHEST_ACCESSORIES:case t.CHEST_PRINTS:case t.LG:case t.SH:case t.WA:s>=0?this._data.set(e,s):this._data.delete(e)}i&&this.updateView()}savePartSetColourId(e,s,i=!0){switch(e){case t.FACE:case t.HR:case t.HA:case t.HE:case t.EA:case t.FA:case t.CH:case t.CC:case t.CHEST_ACCESSORIES:case t.CHEST_PRINTS:case t.LG:case t.SH:case t.WA:this._colors.set(e,s)}i&&this.updateView()}getFigureStringWithFace(e,s=!0){let i="";const n=[t.FACE],r=[];for(const o of n){const i=this._colors.get(o);if(void 0===i)continue;let n=this._data.get(o);o===t.FACE&&s&&(n=e);let a=o+"-"+n;if(n>=0){let t=0;for(;t<i.length;)a=a+"-"+i[t],t++}r.push(a)}let a=0;for(;a<r.length;)i+=r[a],a<r.length-1&&(i+="."),a++;return i}updateView(){this._view.update(this.getFigureString(),this._avatarEffectType,this._direction)}get view(){return this._view}get gender(){return this._gender}resetFigure(t){this.updateView()}set avatarEffectType(t){this._avatarEffectType=t}get avatarEffectType(){return this._avatarEffectType}get direction(){return this._direction}set direction(t){this._direction=t,this.updateView()}}return t.M="M",t.F="F",t.U="U",t.H="h",t.STD="std",t._Str_2028="0",t.FACE="hd",t.HR="hr",t.HA="ha",t.HE="he",t.EA="ea",t.FA="fa",t.CC="cc",t.CH="ch",t.CHEST_ACCESSORIES="ca",t.CHEST_PRINTS="cp",t.LG="lg",t.SH="sh",t.WA="wa",t})();class j_{constructor(t,e,s=!1){this._model=t,this._partColor=e,this._isSelected=!1,this._isDisabledForWearing=s,this._Str_22595()}dispose(){this._model=null,this._partColor=null}get isSelected(){return this._isSelected}set isSelected(t){this._isSelected=t}_Str_22595(){this._isHC=!!this._partColor&&this._partColor.clubLevel>0}get _Str_3420(){return this._partColor}get color(){return Y.a.int2rgb(this._partColor._Str_915)}get _Str_14863(){return this._isDisabledForWearing}get isHC(){return this._isHC}}let z_=(()=>{class t{constructor(t,e,s,i=!0,n=!1){if(this._renderManager=_.a.instance.avatar,this._model=t,this._partSet=e,this._colors=s,this._useColors=i,this._isDisabledForWearing=n,this._thumbContainer=null,this._imageUrl=null,this._maxColorIndex=0,this._isValidFigure=!1,this._isSelected=!1,this._isHC=!1,this._isSellable=!1,this._isClear=!1,this._disposed=!1,this._isInitalized=!1,e){const t=e._Str_806;for(const e of t)this._maxColorIndex=Math.max(this._maxColorIndex,e._Str_827)}}init(){this._isInitalized||(this._isInitalized=!0,this.update())}dispose(){this._disposed||(this._renderManager=null,this._model=null,this._partSet=null,this._colors=null,this._imageUrl=null,this._disposed=!0,this._isInitalized=!1,this._thumbContainer&&(this._thumbContainer.destroy(),this._thumbContainer=null))}update(){this.updateThumbVisualization()}analyzeFigure(){if(!(this._renderManager&&this._model&&this.partSet&&this.partSet._Str_806&&this.partSet._Str_806.length))return!1;const t=this._renderManager.createFigureContainer(this.partSet.type+"-"+this.partSet.id);return this._renderManager.isFigureContainerReady(t)?(this._isValidFigure=!0,!0):(this._renderManager.downloadAvatarFigure(t,this),!1)}renderThumb(){if(!this._renderManager||!this.partSet||!this._model)return null;if(!this._isValidFigure&&!this.analyzeFigure())return null;const e=this.partSet._Str_806.concat().sort(this.sortByDrawOrder),s=new g.Container;for(const i of e){if(!i)continue;let e=null,n=0,r=!1;for(;!r&&n<t.THUMB_DIRECTIONS.length;)e=this._renderManager.getAssetByName(H_.H+"_"+H_.STD+"_"+i.type+"_"+i.id+"_"+t.THUMB_DIRECTIONS[n]+"_"+H_._Str_2028),e&&e.texture?r=!0:n++;if(!r)continue;const a=e.offsetX,o=e.offsetY;let c=null;if(this._useColors&&i._Str_827>0){const t=this._colors[i._Str_827-1];t&&(c=t)}const h=new g.Sprite(e.texture);h.position.set(a,o),c&&(h.tint=c._Str_915),s.addChild(h)}return s}updateThumbVisualization(){if(!this._isInitalized)return;let t=this._thumbContainer;t||(t=this.renderThumb()),t&&(this._partSet?(this._isHC=this._partSet.clubLevel>0,this._isSellable=this._partSet._Str_651):(this._isHC=!1,this._isSellable=!1),this._isDisabledForWearing&&this.setAlpha(t,.2),this._imageUrl=Jo.a.generateImageUrl(t))}setAlpha(t,e){return t.alpha=e,t}sortByDrawOrder(e,s){const i=t.DRAW_ORDER.indexOf(e.type),n=t.DRAW_ORDER.indexOf(s.type);return i<n?-1:i>n?1:e.index<s.index?-1:e.index>s.index?1:0}resetFigure(t){this.analyzeFigure()&&this.update()}get disposed(){return this._disposed}get id(){return this._partSet?this._partSet.id:-1}get partSet(){return this._partSet}set colors(t){this._colors=t,this.update()}get isDisabledForWearing(){return this._isDisabledForWearing}set iconImage(t){this._thumbContainer=t,this.update()}get imageUrl(){return this._imageUrl}get colorLayerCount(){return this._maxColorIndex}get isSelected(){return this._isSelected}set isSelected(t){this._isSelected=t}get isHC(){return this._isHC}get isSellable(){return this._isSellable}get isClear(){return this._isClear}set isClear(t){this._isClear=t}}return t.THUMB_DIRECTIONS=[2,6,0,4,3,1],t.DRAW_ORDER=[It.a.LEFT_HAND_ITEM,It.a.LEFT_HAND,It.a.LEFT_SLEEVE,It.a.LEFT_COAT_SLEEVE,It.a.BODY,It.a.SHOES,It.a.LEGS,It.a.CHEST,It.a.CHEST_ACCESSORY,It.a.COAT_CHEST,It.a.CHEST_PRINT,It.a.WAIST_ACCESSORY,It.a.RIGHT_HAND,It.a.RIGHT_SLEEVE,It.a.RIGHT_COAT_SLEEVE,It.a.HEAD,It.a.FACE,It.a.EYES,It.a.HAIR,It.a.HAIR_BIG,It.a.FACE_ACCESSORY,It.a.EYE_ACCESSORY,It.a.HEAD_ACCESSORY,It.a.HEAD_ACCESSORY_EXTRA,It.a.RIGHT_HAND_ITEM],t})();class Y_{constructor(t,e,s){this.MAX_PALETTES=2,this._selectedPartIndex=-1,this._name=t,this._parts=e,this._palettes=s,this._selectedPartIndex=-1}static defaultColorId(t,e){if(!t||!t.length)return-1;let s=0;for(;s<t.length;){const i=t[s];if(i._Str_3420&&i._Str_3420.clubLevel<=e)return i._Str_3420.id;s++}return-1}init(){for(const t of this._parts)t&&t.init()}dispose(){if(this._parts){for(const t of this._parts)t.dispose();this._parts=null}if(this._palettes){for(const t of this._palettes)if(t)for(const e of t)e.dispose();this._palettes=null}this._selectedPartIndex=-1,this._paletteIndexes=null}selectPartId(t){if(!this._parts)return;let e=0;for(;e<this._parts.length;){if(this._parts[e].id===t)return void this.selectPartIndex(e);e++}}selectColorIds(t){if(!t||!this._palettes)return;this._paletteIndexes=new Array(t.length);let e=0;for(;e<this._palettes.length;){const s=this.getPalette(e);if(s){let i=0;if(t.length>e)i=t[e];else{const t=s[0];t&&t._Str_3420&&(i=t._Str_3420.id)}let n=0;for(;n<s.length;){const t=s[n];t._Str_3420.id===i?(this._paletteIndexes[e]=n,t.isSelected=!0):t.isSelected=!1,n++}}e++}this.updatePartColors()}selectPartIndex(t){if(!this._parts)return null;if(this._selectedPartIndex>=0&&this._parts.length>this._selectedPartIndex){const t=this._parts[this._selectedPartIndex];t&&(t.isSelected=!1)}if(this._parts.length>t){const e=this._parts[t];if(e)return e.isSelected=!0,this._selectedPartIndex=t,e}return null}selectColorIndex(t,e){const s=this.getPalette(e);if(!s)return null;if(s.length<=t)return null;this.deselectColorIndex(this._paletteIndexes[e],e),this._paletteIndexes[e]=t;const i=s[t];return i?(i.isSelected=!0,this.updatePartColors(),i):null}getCurrentColorIndex(t){return this._paletteIndexes[t]}deselectColorIndex(t,e){const s=this.getPalette(e);if(!s)return;if(s.length<=t)return;const i=s[t];i&&(i.isSelected=!1)}getSelectedColorIds(){if(!this._paletteIndexes||!this._paletteIndexes.length)return null;if(!this._palettes||!this._palettes.length)return null;const t=this._palettes[0];if(!t||!t.length)return null;const e=t[0];if(!e||!e._Str_3420)return null;const s=e._Str_3420.id,i=[];let n=0;for(;n<this._paletteIndexes.length;){const t=this._palettes[n];if(t&&!(t.length<=n))if(t.length>this._paletteIndexes[n]){const e=t[this._paletteIndexes[n]];i.push(e&&e._Str_3420?e._Str_3420.id:s)}else i.push(s);n++}const r=this.getCurrentPart();return r?i.slice(0,Math.max(r.colorLayerCount,1)):null}getSelectedColors(){const t=[];let e=0;for(;e<this._paletteIndexes.length;){const s=this.getSelectedColor(e);t.push(s?s._Str_3420:null),e++}return t}getSelectedColor(t){const e=this.getPalette(t);return!e||e.length<=this._paletteIndexes[t]?null:e[this._paletteIndexes[t]]}getSelectedColorId(t){const e=this.getSelectedColor(t);return e&&e._Str_3420?e._Str_3420.id:0}get parts(){return this._parts}getPalette(t){return!this._paletteIndexes||!this._palettes||this._palettes.length<=t?null:this._palettes[t]}getCurrentPart(){return this._parts[this._selectedPartIndex]}updatePartColors(){const t=this.getSelectedColors();for(const e of this._parts)e&&(e.colors=t)}hasClubSelectionsOverLevel(t){let e=!1;const s=this.getSelectedColors();if(s){let i=0;for(;i<s.length;){const n=s[i];n&&n.clubLevel>t&&(e=!0),i++}}let i=!1;const n=this.getCurrentPart();if(n&&n.partSet){const e=n.partSet;e&&e.clubLevel>t&&(i=!0)}return e||i}hasInvalidSelectedItems(t){const e=this.getCurrentPart();if(!e)return!1;const s=e.partSet;return s&&s._Str_651?!t.hasFigureSetId(s.id):void 0}stripClubItemsOverLevel(t){const e=this.getCurrentPart();if(e&&e.partSet&&e.partSet.clubLevel>t){const t=this.selectPartIndex(0);return t&&!t.partSet&&this.selectPartIndex(1),!0}return!1}stripClubColorsOverLevel(t){const e=[],s=this.getSelectedColors();let i=!1;const n=this.getPalette(0),r=Y_.defaultColorId(n,t);if(-1===r)return!1;let a=0;for(;a<s.length;){const n=s[a];n?n.clubLevel>t?(e.push(r),i=!0):e.push(n.id):(e.push(r),i=!0),a++}return i&&this.selectColorIds(e),i}get name(){return this._name}get selectedPartIndex(){return this._selectedPartIndex}}class q_{constructor(t){this._editor=t,this._isInitalized=!1,this._maxPaletteCount=0}dispose(){this._categories=null,this._editor=null,this._disposed=!0}get disposed(){return this._disposed}init(){this._categories||(this._categories=new Bs.a)}reset(){if(this._isInitalized=!1,this._categories)for(const t of this._categories.getValues())t&&t.dispose();this._categories=new Bs.a,this._viewer&&this._viewer.prepareModel()}setViewer(t){this._viewer=t}addCategory(t){let e=this._categories.getValue(t);e||(e=this._editor._Str_24037(this,t),e&&(this._categories.add(t,e),this.updateSelectionsFromFigure(t)))}updateSelectionsFromFigure(t){if(!this._categories||!this._editor||!this._editor.figureData)return;const e=this._categories.getValue(t);if(!e)return;const s=this._editor.figureData.getPartSetId(t);let i=this._editor.figureData.getColourIds(t);i||(i=[]),e.selectPartId(s),e.selectColorIds(i)}hasClubSelectionsOverLevel(t){if(!this._categories)return!1;for(const e of this._categories.getValues())if(e&&e.hasClubSelectionsOverLevel(t))return!0;return!1}hasInvalidSelectedItems(t){if(!this._categories)return!1;for(const e of this._categories.getValues())if(e&&e.hasInvalidSelectedItems(t))return!0;return!1}_Str_15298(t){if(!this._categories)return!1;let e=!1;for(const s of this._categories.getKeys()){const i=this._categories.getValue(s);if(!i)continue;let n=!1;if(i.stripClubItemsOverLevel(t)&&(n=!0),i.stripClubColorsOverLevel(t)&&(n=!0),n){const t=i.getCurrentPart();t&&this._editor&&this._editor.figureData&&i&&this._editor.figureData.savePartData(s,t.id,i.getSelectedColorIds(),!0),e=!0}}return e}_Str_8360(){if(!this._categories)return!1;for(const t of this._categories.getKeys())this._categories.getValue(t);return!1}selectPart(t,e){const s=this._categories.getValue(t);if(!s)return;const i=s.selectedPartIndex;s.selectPartIndex(e);const n=s.getCurrentPart();if(n){if(n.isDisabledForWearing)return s.selectPartIndex(i),void this._editor.openHabboClubAdWindow();this._maxPaletteCount=n.colorLayerCount,this._editor&&this._editor.figureData&&this._editor.figureData.savePartData(t,n.id,s.getSelectedColorIds(),!0)}}selectColor(t,e,s){const i=this._categories.getValue(t);if(!i)return;const n=i.getCurrentColorIndex(s);if(i.selectColorIndex(e,s),this._editor&&this._editor.figureData){if(i.getSelectedColor(s)._Str_14863)return i.selectColorIndex(n,s),void this._editor.openHabboClubAdWindow();this._editor.figureData.savePartSetColourId(t,i.getSelectedColorIds(),!0)}}get controller(){return this._editor}getCategoryData(t){return this._isInitalized||this.init(),this._categories?this._categories.getValue(t):null}get categories(){return this._categories}get canSetGender(){return!1}get maxPaletteCount(){return this._maxPaletteCount}set maxPaletteCount(t){this._maxPaletteCount=t}get name(){return null}}class Z_ extends q_{constructor(){super(...arguments),this._imageCallBackHandled=!1}init(){super.init(),this.addCategory(H_.FACE),this._isInitalized=!0}selectColor(t,e,s){super.selectColor(t,e,s),this.updateSelectionsFromFigure(H_.FACE)}updateSelectionsFromFigure(t){if(!this._categories||!this._editor||!this._editor.figureData)return;const e=this._categories.getValue(t);if(!e)return;const s=this._editor.figureData.getPartSetId(t);let i=this._editor.figureData.getColourIds(t);i||(i=[]),e.selectPartId(s),e.selectColorIds(i);for(const n of e.parts){const t=this.controller.figureData.getFigureStringWithFace(n.id),e=_.a.instance.avatar.createAvatarImage(t,Rt.a.LARGE,null,this),s=e.getImageAsSprite(Tt.a.HEAD);s&&(s.y=10,n.iconImage=s,setTimeout(()=>e.dispose(),0))}}resetFigure(t){this._imageCallBackHandled||(this._imageCallBackHandled=!0,this.updateSelectionsFromFigure(H_.FACE))}get canSetGender(){return!0}get name(){return K_.GENERIC}}class X_ extends q_{init(){super.init(),this.addCategory(H_.HR),this.addCategory(H_.HA),this.addCategory(H_.HE),this.addCategory(H_.EA),this.addCategory(H_.FA),this._isInitalized=!0}get name(){return K_.HEAD}}class Q_ extends q_{init(){super.init(),this.addCategory(H_.LG),this.addCategory(H_.SH),this.addCategory(H_.WA),this._isInitalized=!0}get name(){return K_.LEGS}}class J_ extends q_{init(){super.init(),this.addCategory(H_.CH),this.addCategory(H_.CHEST_PRINTS),this.addCategory(H_.CC),this.addCategory(H_.CHEST_ACCESSORIES),this._isInitalized=!0}get name(){return K_.TORSO}}const $_=function(t){return{"ae-mactv":t}};function td(t,e){if(1&t){const t=i.ec();i.dc(0,"div",13),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc(2).selectCategory(s.name)}),i.Zb(1,"div",14),i.cc()}if(2&t){const t=e.$implicit,s=i.qc(2);i.xc("ngClass",i.Bc(2,$_,s.activeCategory===t)),i.Kb(1),i.xc("ngClass","icon-"+t.name)}}function ed(t,e){if(1&t){const t=i.ec();i.dc(0,"div",15),i.Zb(1,"div",16),i.Zb(2,"div",17),i.dc(3,"div",18),i.nc("click",function(){i.Kc(t);const e=i.qc(2);return e.rotateAvatar(e.figureData.direction+1)}),i.cc(),i.dc(4,"div",19),i.dc(5,"div",20),i.nc("click",function(){return i.Kc(t),i.qc(2).saveFigure()}),i.dc(6,"p",21),i.Vc(7),i.rc(8,"translate"),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc(2);i.Kb(2),i.xc("figure",t.figureData.view.figureString)("direction",t.figureData.direction)("scale",2),i.Kb(5),i.Wc(i.sc(8,4,"avatareditor.save"))}}function sd(t,e){if(1&t&&i.Zb(0,"div",22),2&t){const t=i.qc(2);i.xc("model",t.activeCategory)("gender",t.gender)}}function id(t,e){if(1&t&&i.Zb(0,"div",23),2&t){const t=i.qc(2);i.xc("figureData",t.figureData)}}function nd(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"p",3),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",4),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.cc(),i.cc(),i.dc(6,"div",5),i.Zb(7,"div",6),i.dc(8,"div",7),i.Tc(9,td,2,4,"div",8),i.cc(),i.cc(),i.dc(10,"div",9),i.Tc(11,ed,9,6,"div",10),i.Tc(12,sd,1,2,"div",11),i.cc(),i.Tc(13,id,1,1,"div",12),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.sc(4,5,"avatareditor.title")),i.Kb(6),i.xc("ngForOf",t.categories.getValues()),i.Kb(2),i.xc("ngIf",t.figureData),i.Kb(1),i.xc("ngIf",t.activeCategory),i.Kb(1),i.xc("ngIf",t.figureData)}}let rd=(()=>{class t{constructor(t,e,s){this._inventoryService=t,this._settingsService=e,this._avatarEditorService=s,this.visible=!1}ngOnInit(){this._avatarEditorService.component=this,this._figureStructureData=_.a.instance.avatar.structureData,this._categories=new Bs.a,this._figures=new Map,this._gender=H_.M,this._clubMemberLevel=0,this._lastSavedFigure="",this._lastSavedGender=H_.M;const e=new H_,s=new H_;e.loadAvatarData(t._Str_18590,H_.M),s.loadAvatarData(t._Str_18820,H_.F),this._figures.set(H_.M,e),this._figures.set(H_.F,s),this._categories.add(K_.GENERIC,new Z_(this)),this._categories.add(K_.HEAD,new X_(this)),this._categories.add(K_.TORSO,new J_(this)),this._categories.add(K_.LEGS,new Q_(this)),this.selectFirstCategory()}ngOnDestroy(){this._avatarEditorService.component=null}hide(){this._settingsService.hideAvatarEditor()}selectFirstCategory(){const t=this._categories.getWithIndex(0);t&&this.selectCategory(t.name)}selectCategory(t){if(!t)return;const e=this._categories.getValue(t);e&&(this._aciveCategory=e)}loadAvatarInEditor(t,e,s,i=!0){switch(e){case H_.M:case"m":case"M":e=H_.M;break;case H_.F:case"f":case"F":e=H_.F;break;default:e=H_.M}let n=!1;this._clubMemberLevel=s;const r=this._figures.get(e);if(r){if(t!==r.getFigureString()&&(n=!0),e!==this._gender&&(this._gender=e,n=!0),r.loadAvatarData(t,e),n)for(const t of this._categories.getValues())t&&t.reset();i&&(this._lastSavedFigure=t,this._lastSavedGender=this._gender)}}_Str_24037(e,s){if(!e||!s)return null;const i=[],n=[];let r=0;for(;r<t._Str_6331;)n.push([]),r++;const a=this._Str_20100(s);if(!a)return null;const o=this._Str_783(a._Str_734);if(!o)return null;let c=this.figureData.getColourIds(s);c||(c=[]);const h=new Array(c.length),l=this._Str_24175;for(const _ of o.colors.values())if(_.isSelectable&&(l||this.clubMemberLevel>=_.clubLevel)){let i=0;for(;i<t._Str_6331;){const t=new j_(e,_,this.clubMemberLevel<_.clubLevel);n[i].push(t),i++}if(s!==H_.FACE){let t=0;for(;t<c.length;)_.id===c[t]&&(h[t]=_),t++}}let u=0,d=[];if(l?(u=2,d=_.a.instance.avatar._Str_838(this.gender,u)):d=_.a.instance.avatar._Str_838(this.gender,this.clubMemberLevel),-1==d.indexOf(s)){const t=new z_(e,null,null,!1);t.isClear=!0,i.push(t)}const g=s!==H_.FACE,m=a._Str_710;let p=m.length-1;for(;p>=0;){const t=m.getWithIndex(p);let s=!1;if((t.gender===H_.U||t.gender==this.gender)&&(s=!0),t._Str_608&&s&&(l||this.clubMemberLevel>=t.clubLevel)){const s=this.clubMemberLevel<t.clubLevel;let n=!0;if(t._Str_651&&(n=this._inventoryService&&this._inventoryService.hasFigureSetId(t.id)),n){const n=new z_(e,t,h,g,s);i.push(n)}}p--}for(i.sort(this._Str_25757?this._Str_25189:this._Str_23935),r=0;r<t._Str_6331;)n[r].sort(this._Str_23625),r++;return new Y_(s,i,n)}openHabboClubAdWindow(){}_Str_20100(t){return this._figureStructureData?this._figureStructureData._Str_740(t):null}_Str_783(t){return this._figureStructureData?this._figureStructureData._Str_783(t):null}_Str_25189(t,e){const s=t.partSet?t.partSet.clubLevel:9999999999,i=e.partSet?e.partSet.clubLevel:9999999999,n=!!t.partSet&&t.partSet._Str_651,r=!!e.partSet&&e.partSet._Str_651;return n&&!r?1:r&&!n||s>i?-1:s<i?1:t.partSet.id>e.partSet.id?-1:t.partSet.id<e.partSet.id?1:0}_Str_23935(t,e){const s=t.partSet?t.partSet.clubLevel:-1,i=e.partSet?e.partSet.clubLevel:-1,n=!!t.partSet&&t.partSet._Str_651,r=!!e.partSet&&e.partSet._Str_651;return n&&!r?1:r&&!n||s<i?-1:s>i?1:t.partSet.id<e.partSet.id?-1:t.partSet.id>e.partSet.id?1:0}_Str_23625(t,e){const s=t._Str_3420?t._Str_3420.clubLevel:-1,i=e._Str_3420?e._Str_3420.clubLevel:-1;return s<i?-1:s>i?1:t._Str_3420.index<e._Str_3420.index?-1:t._Str_3420.index>e._Str_3420.index?1:0}rotateAvatar(t){let e=t;e<W_.a.MIN_DIRECTION&&(e=W_.a.MAX_DIRECTION+(e+1)),e>W_.a.MAX_DIRECTION&&(e-=W_.a.MAX_DIRECTION+1),this.figureData.direction=e}saveFigure(){const t=this.figureData;t&&(this._lastSavedFigure=t.getFigureString(),this._lastSavedGender=t.gender,_.a.instance.communication.connection.send(new oa.a(t.gender,this._lastSavedFigure)),this.hide())}clearFigure(){const t=this.figureData;t&&this.loadAvatarInEditor(t.getFigureStringWithFace(0,!1),t.gender,this._clubMemberLevel,!1)}resetFigure(){this.loadAvatarInEditor(this._lastSavedFigure,this._gender,this._clubMemberLevel)}get _Str_25757(){return _.a.instance.getConfiguration("avatareditor.show.clubitems.first",!0)}get _Str_24175(){return _.a.instance.getConfiguration("avatareditor.show.clubitems.dimmed",!0)}get clubMemberLevel(){return this._clubMemberLevel?this._clubMemberLevel:_.a.instance.sessionDataManager.clubLevel}set clubMemberLevel(t){this._clubMemberLevel=t}get figureStructureData(){return this._figureStructureData}get figureData(){return this._figures.get(this._gender)}get gender(){return this._gender}set gender(t){if(this._gender!==t){switch(t){case H_.M:case"m":case"M":t=H_.M;break;case H_.F:case"f":case"F":t=H_.F;break;default:t=H_.M}this._gender=t;for(const t of this._categories.getValues())t.reset();this.selectFirstCategory()}}get categories(){return this._categories}get activeCategory(){return this._aciveCategory}}return t._Str_18590="hr-100.hd-180-7.ch-215-66.lg-270-79.sh-305-62.ha-1002-70.wa-2007",t._Str_18820="hr-515-33.hd-600-1.ch-635-70.lg-716-66-62.sh-735-68",t._Str_6331=2,t.\u0275fac=function(e){return new(e||t)(i.Yb(Sa),i.Yb(m),i.Yb(vr))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-avatar-editor-main-component"]],inputs:{visible:"visible"},decls:1,vars:1,consts:[["dragHandle","#avatareditordrag","id","avatareditor",3,"bringToTop","draggable",4,"ngIf"],["dragHandle","#avatareditordrag","id","avatareditor",3,"bringToTop","draggable"],["id","avatareditordrag"],[1,"ae-baslik"],[1,"old-kapat",3,"click"],[1,"avatareditor-head-box"],[1,"avatareditor-username"],[1,"avatareditor-menu",2,"margin-left","10px"],["class","avatareditor_menu-button",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"avatar-builder-viewport"],["class","myavatar-view",4,"ngIf"],["class","d-flex flex-column","nitro-avatar-model-viewer-component","",3,"model","gender",4,"ngIf"],["nitro-avatar-wardrobe-component","","class","avatareditor-wardrobe nitro-avatar-wardrobe-component",3,"figureData",4,"ngIf"],[1,"avatareditor_menu-button",3,"ngClass","click"],[1,"ae-menu-ico",3,"ngClass"],[1,"myavatar-view"],[1,"avatar-shadow"],["id","ae-myavatar","nitro-avatar-image","",3,"figure","direction","scale"],[1,"turn-avatar",3,"click"],[1,"bort"],[1,"ae_save-changes",3,"click"],[1,"sc-text"],["nitro-avatar-model-viewer-component","",1,"d-flex","flex-column",3,"model","gender"],["nitro-avatar-wardrobe-component","",1,"avatareditor-wardrobe","nitro-avatar-wardrobe-component",3,"figureData"]],template:function(t,e){1&t&&i.Tc(0,nd,14,7,"div",0),2&t&&i.xc("ngIf",e.visible)},encapsulation:2}),t})();var ad=s("2FAY");class od{constructor(t){this._complete=!0,this._target=t}get running(){return this._running&&!!this._target}get complete(){return this._complete}set target(t){this._target=t}get target(){return this._target}set tag(t){this._tag=t}get tag(){return this._tag}start(){this._running=!0}update(t){}stop(){this._target=null,this._running=!1}tick(t){}}class cd extends od{constructor(t){super(t)}tick(t){super.tick(t),this.target&&(this.target.remove(),this.target=null)}}class hd extends od{constructor(t,e){super(t),this._complete=!1,this._duration=e}get duration(){return this._duration}start(){super.start(),this._complete=!1,this._startTimeMs=_.a.instance.time}tick(t){super.tick(t);const e=(t-this._startTimeMs)/this._duration;e<1?this.update(e):(this.update(1),this._complete=!0)}}class ld extends hd{constructor(t,e,s){super(t,e),this._height=s}start(){super.start(),this._offset=0,this.target.style.top=this._offset-this._height+"px"}update(t){super.update(t),this.target.style.top=this._offset-this._height+this.getBounceOffset(t)*this._height+"px"}getBounceOffset(t){return t<.364?7.5625*t*t:t<.727?7.5625*(t-=.545)*t+.75:t<.909?7.5625*(t-=.9091)*t+.9375:7.5625*(t-=.955)*t+.984375}stop(){this.target.style.top=this._offset+"px",super.stop()}}class ud extends hd{constructor(t){super(t.target,t.duration),this._interval=t}start(){super.start(),this._interval.start()}update(t){super.update(t),this._interval.update(t)}stop(){super.stop(),this._interval.stop()}}class _d extends ud{constructor(t,e){super(t),this._Str_21638=e}}class dd extends _d{constructor(t,e){super(t,e)}update(t){this._interval.update(Math.pow(t,1/this._Str_21638))}}class gd extends hd{constructor(t,e,s,i,n,r){super(t,e),this._deltaX=s,this._deltaY=i,this._height=-n,this._numJumps=r}start(){super.start(),this._startX=this.target.offsetLeft,this._startY=this.target.offsetTop}update(t){super.update(t),this.target.style.left=this._startX+this._deltaX*t+"px",this.target.style.top=this._startY+this._height*Math.abs(Math.sin(t*Math.PI*this._numJumps))+this._deltaY*t+"px"}}let md=(()=>{class t{static get TIMER_TIME(){return 1e3/_.a.instance.ticker.FPS}static _Str_4598(e){return-1===t._Str_3932.indexOf(e)&&-1===t._Str_5358.indexOf(e)&&(t._Str_7507?t._Str_5358.push(e):(t._Str_3932.push(e),e.start()),t._Str_12757()),e}static _Str_15790(e){let s=t._Str_3932.indexOf(e);s>-1?t._Str_7507?(s=t._Str_10731.indexOf(e),-1==s&&t._Str_10731.push(e)):(t._Str_3932.splice(s,1),e.running&&e.stop(),t._Str_3932.length||t._Str_7465()):(s=t._Str_5358.indexOf(e),s>-1&&t._Str_5358.splice(s,1))}static _Str_19320(e){for(const s of t._Str_3932)if(s.tag==e)return s;for(const s of t._Str_5358)if(s.tag==e)return s;return null}static _Str_9810(e){for(const s of t._Str_3932)if(s.target==e)return s;for(const s of t._Str_5358)if(s.target==e)return s;return null}static _Str_26365(e,s){for(const i of t._Str_3932)if(i.tag==e&&i.target==s)return i;for(const i of t._Str_5358)if(i.tag==e&&i.target==s)return i;return null}static get _Str_1349(){return!!t._Str_5307}static get _Str_26314(){return t._Str_7507}static _Str_21055(){t._Str_7507=!0;const e=_.a.instance.time;let s=null;for(;s=t._Str_5358.pop();)t._Str_3932.push(s);for(;s=t._Str_10731.pop();)t._Str_3932.splice(t._Str_3932.indexOf(s),1),s.running&&s.stop();for(s of t._Str_3932)s.running?(s.tick(e),s.complete&&t._Str_15790(s)):t._Str_15790(s);t._Str_3932.length||t._Str_7465(),t._Str_7507=!1}static _Str_12757(){t._Str_5307||(t._Str_5307=setInterval(t._Str_21055,t.TIMER_TIME))}static _Str_7465(){t._Str_5307&&(clearInterval(t._Str_5307),t._Str_5307=null)}_Str_25883(e){let s=0;for(const i of t._Str_3932)i.target===e&&s++;return s}}return t._Str_5358=[],t._Str_3932=[],t._Str_10731=[],t._Str_5307=null,t._Str_7507=!1,t})();class pd extends od{constructor(...t){super(t?t[0].target:null),this._queue=[];for(const e of t)this._queue.push(e);this._motion=t[0],this._complete=!this._motion}get running(){return!(!this._running||!this._motion)&&this._motion.running}start(){super.start(),this._motion.start()}update(t){super.update(t),this._motion.running&&this._motion.update(t)}stop(){super.stop(),this._motion.stop()}tick(t){if(super.tick(t),this._motion.tick(t),this._motion.complete){this._motion.stop();const t=this._queue.indexOf(this._motion);t<this._queue.length-1?(this._motion=this._queue[t+1],this._target=this._motion.target,this._motion.start()):this._complete=!0}}}class fd extends od{constructor(t){super(null),this._waitTimeMs=t}get running(){return this._running}start(){super.start(),this._complete=!1,this._startTimeMs=_.a.instance.time}tick(t){super.tick(t),this._complete=t-this._startTimeMs>=this._waitTimeMs,this._complete&&this.stop()}}function Ed(t,e){if(1&t&&(i.dc(0,"div",7),i.dc(1,"p",8),i.Vc(2),i.cc(),i.cc()),2&t){const t=i.qc(2);i.Kb(2),i.Wc(t.unseenAchievementsCount)}}function Sd(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.nc("click",function(){return i.Kc(t),i.qc().toggleAchievements()}),i.Tc(2,Ed,3,1,"div",3),i.dc(3,"p",4),i.Vc(4),i.rc(5,"translate"),i.cc(),i.cc(),i.dc(6,"div",5),i.nc("click",function(){return i.Kc(t),i.qc().toggleNavigator()}),i.dc(7,"p",4),i.Vc(8),i.rc(9,"translate"),i.cc(),i.cc(),i.dc(10,"div",6),i.nc("click",function(){return i.Kc(t),i.qc().toggleAvatarEditor()}),i.dc(11,"p",4),i.Vc(12),i.rc(13,"translate"),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(2),i.xc("ngIf",t.unseenAchievementsCount),i.Kb(2),i.Wc(i.sc(5,4,"widget.memenu.achievements")),i.Kb(4),i.Wc(i.sc(9,6,"widget.memenu.myrooms")),i.Kb(4),i.Wc(i.sc(13,8,"widget.memenu.editavatar"))}}let vd=(()=>{class t{constructor(t,e,s,i,n){this._avatarEditorService=t,this.settingsService=e,this.navigatorService=s,this._achievementService=i,this._ngZone=n}ngOnInit(){}ngOnDestroy(){}get isVisible(){return this.settingsService.meMenuVisible||!1}toggleAvatarEditor(){this._avatarEditorService.loadOwnAvatarInEditor(),this.settingsService.toggleAvatarEditor()}toggleAchievements(){this.settingsService.toggleAchievements()}toggleNavigator(){this.settingsService.toggleNavigator(),this.navigatorService.setCurrentContextByCode("myworld_view")}get unseenAchievementsCount(){return this._achievementService.unseenCount}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(vr),i.Yb(m),i.Yb(hl),i.Yb(u_),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-toolbar-me-menu-component"]],decls:1,vars:1,consts:[["id","avatar_menu",4,"ngIf"],["id","avatar_menu"],[1,"amenu-ico",2,"background-image","url(/assets/images/bottombar/basarilar.png)",3,"click"],["class","mobicountbox count","style","top: 5px;",4,"ngIf"],[1,"amenu-text"],[1,"amenu-ico",2,"background-image","url(/assets/images/bottombar/odalarim.png)",3,"click"],[1,"amenu-ico",2,"background-image","url(/assets/images/bottombar/avatareditor.png)",3,"click"],[1,"mobicountbox","count",2,"top","5px"],[1,"count-txt"]],template:function(t,e){1&t&&i.Tc(0,Sd,14,10,"div",0),2&t&&i.xc("ngIf",e.isVisible)},directives:[p.n],pipes:[ln],encapsulation:2,data:{animation:[Object(f.j)("inOutAnimation",[Object(f.i)(":enter",[Object(f.h)({bottom:10,opacity:0}),Object(f.e)(".3s ease-out",Object(f.h)({bottom:77,opacity:1}))]),Object(f.i)(":leave",[Object(f.h)({bottom:77,opacity:1}),Object(f.e)(".3s ease-in",Object(f.h)({bottom:10,opacity:0}))])])]}}),t})();const bd=["navigationList"],Id=["listeitem"];function Rd(t,e){if(1&t){const t=i.ec();i.dc(0,"div",34),i.nc("click",function(){return i.Kc(t),i.qc().clickIcon("home_room")}),i.Zb(1,"img",35),i.cc()}}function Td(t,e){if(1&t){const t=i.ec();i.dc(0,"div",36),i.nc("click",function(){return i.Kc(t),i.qc().clickIcon("hotel_view")}),i.Zb(1,"img",37),i.cc()}}function Od(t,e){if(1&t&&(i.dc(0,"div",38),i.dc(1,"p",39),i.Vc(2),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(2),i.Wc(t.unseenInventoryCount)}}function yd(t,e){if(1&t&&(i.dc(0,"div",40),i.dc(1,"p",41),i.Vc(2),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(2),i.Wc(t.unseenAchievementsCount)}}function Cd(t,e){if(1&t&&(i.dc(0,"div",42),i.Zb(1,"img",43),i.dc(2,"p",26),i.Vc(3),i.cc(),i.cc()),2&t){const t=e.$implicit;i.Kb(1),i.zc("src","https://www.habbo.com/habbo-imaging/avatarimage?figure=",t.figure,"&action=std&gesture=std&direction=2&head_direction=2&size=n&headonly=1&img_format=png",i.Mc),i.Kb(2),i.Wc(t.name)}}function Ad(t,e){if(1&t&&(i.dc(0,"div",38),i.dc(1,"p",39),i.Vc(2),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(2),i.Wc(t.unseenFriendListCount)}}let Md=(()=>{class t{constructor(t,e,s,i,n,r,a,o){this._inventoryService=t,this._navigatorService=e,this._friendListService=s,this._achievementService=i,this.sessionService=n,this.settingsService=r,this._modToolsService=a,this.ngZone=o,this.isInRoom=!1,this.acac="friend-box-kapali",this.acikMi=!1,this.onNitroToolbarEvent=this.onNitroToolbarEvent.bind(this)}ngAfterContentInit(){a(".online-friends-box").click(function(){"70px"==a(this).css("height")?a(this).css({height:"",bottom:""}):(a(".online-friends-box").css({height:"",bottom:""}),a(this).css({height:"70px",bottom:"34px"}))})}ngOnInit(){this.ngZone.runOutsideAngular(()=>{_.a.instance.roomEngine.events.addEventListener(et.a.TOOLBAR_CLICK,this.onNitroToolbarEvent),_.a.instance.roomEngine.events.addEventListener(ad.a.ANIMATE_ICON,this.onNitroToolbarEvent)});const t=document.querySelector(".bottombar-friends-list");a(".friends-right-box").click(function(){console.log("xx"),t.scrollLeft+=130}),a(".friends-left-box").click(function(){console.log("xx"),t.scrollLeft-=130});var e=0;a(".bri-slide-box").click(function(){++e%2==0?(a(this).css({height:"172px",top:"0px","background-image":'url("/assets/images/bottombar/bri-close.png")'}),a(".bri-room-options").css("display","block"),a(".bri-room-name_and_owner-box").css("display","block")):(a(this).css({height:"108px",top:"0px","background-image":'url("/assets/images/bottombar/bri-open.png")'}),a(".bri-room-options").css("display","none"),a(".bri-room-name_and_owner-box").css("display","none"))}),a(".bottom-right-ufalt").click(function(){++e%2==0?(a(this).css({"background-image":'url("/assets/images/bottombar/sag-kapat.png")'}),a(".bottombar-friends-list-box").css("display","block")):(a(this).css({"background-image":'url("/assets/images/bottombar/sag-ac.png")'}),a(".bottombar-friends-list-box").css("display","none"))})}ngOnDestroy(){this.ngZone.runOutsideAngular(()=>{_.a.instance.roomEngine.events.removeEventListener(et.a.TOOLBAR_CLICK,this.onNitroToolbarEvent),_.a.instance.roomEngine.events.removeEventListener(ad.a.ANIMATE_ICON,this.onNitroToolbarEvent)})}onNitroToolbarEvent(t){if(t)switch(t.type){case et.a.TOOLBAR_CLICK:return void this.clickIcon(t.iconName);case ad.a.ANIMATE_ICON:return void this.animateToIcon(t.iconName,t.image,t.x,t.y)}}clickIcon(t){if(t&&""!==t)switch(t){case ol.a.HOTEL_VIEW:return void this.visitDesktop();case ol.a.HOME_ROOM:return void this.visitHomeRoom();case ol.a.NAVIGATOR:return void this.toggleNavigator();case ol.a.CATALOG:return void this.toggleCatalog();case ol.a.INVENTORY:return void this.toggleInventory();case ol.a.FRIEND_LIST:return void this.toggleFriendList();case ol.a.ME_MENU:return this.toggleMeMenu(),void _.a.instance.roomEngine.events.dispatchEvent(new et.a(et.a.SELECT_OWN_AVATAR))}}animateToIcon(t,e,s,i){if(!t||!e||!this.navigationListElement)return;if(""===(t=this.getIconName(t)))return;const n=this.navigationListElement.getElementsByClassName(t)[0];if(n){e.className="toolbar-icon-animation",e.style.visibility="visible",e.style.left=s+"px",e.style.top=i+"px",document.body.append(e);const r=n.getBoundingClientRect(),a=e.getBoundingClientRect(),o=a.x-r.x,c=a.y-r.y,h=Math.sqrt(o*o+c*c),l=500-Math.abs(1/h*100*500*.5),u=20,_=`ToolbarBouncing[${t}]`;md._Str_19320(_)||(md._Str_4598(new pd(new fd(l+8),new ld(n,400,12))).tag=_);const d=new pd(new dd(new gd(e,l,r.x-a.x+u,r.y-a.y,100,1),1),new cd(e));md._Str_4598(d)}}getIconName(t){switch(t){case ol.a.HOTEL_VIEW:return"icon-hotelview";case ol.a.NAVIGATOR:return"icon-navigator";case ol.a.CATALOG:return"icon-catalog";case ol.a.INVENTORY:return"icon-inventory";default:return""}}toggleCatalog(){this.settingsService.toggleCatalog()}toggleInventory(){this.settingsService.toggleInventory()}toggleFriendList(){this.settingsService.toggleFriendList()}toggleNavigator(){this.settingsService.toggleNavigator()}toggleMeMenu(){this.settingsService.toggleMeMenu()}visitDesktop(){_.a.instance.roomSessionManager.getSession(-1)&&(_.a.instance.communication.connection.send(new $h.a),_.a.instance.roomSessionManager.removeSession(-1))}visitHomeRoom(){this._navigatorService.goToHomeRoom()}get figure(){return this.sessionService.figure}get navigationListElement(){return this.navigationList&&this.navigationList.nativeElement||null}get unseenInventoryCount(){return this._inventoryService.unseenCount}get unseenFriendListCount(){return this._friendListService.notificationCount}get unseenAchievementsCount(){return this._achievementService.unseenCount}yukselt(){0==this.acikMi?(this.acac="friends-box-acik",this.acikMi=!0):(this.acac="friends-box-kapali",this.acikMi=!1)}get friends(){return Array.from(this._friendListService.friends.values()).filter(t=>t.online)}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Sa),i.Yb(hl),i.Yb(Hs),i.Yb(u_),i.Yb(Vi),i.Yb(m),i.Yb(ii),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-toolbar-component"]],viewQuery:function(t,e){if(1&t&&(i.bd(bd,1),i.bd(Id,1)),2&t){let t;i.Gc(t=i.oc())&&(e.navigationList=t.first),i.Gc(t=i.oc())&&(e.div=t.first)}},inputs:{isInRoom:"isInRoom"},decls:48,vars:18,consts:[["id","bottom-bar"],[1,"bar-left"],["navigationList",""],["src","./assets/images/bottombar/sol-kapat.png",1,"bottom-left-ufalt"],["class","barico-left ev-icon",3,"click",4,"ngIf"],["class","barico-left habbo-icon",3,"click",4,"ngIf"],[1,"barico-left","navigator-icon",3,"click"],["src","./assets/images/bottombar/nav.png?0"],[1,"barico-left","magaza-icon",3,"click"],["src","./assets/images/bottombar/magaza.png"],[1,"barico-left","envanter-icon",3,"click"],["src","./assets/images/bottombar/envanter.png"],["class","mobicountbox",4,"ngIf"],[1,"barico-left","bar-avatar",3,"click"],["nitro-avatar-image","",1,"bar_habbo-avatar",3,"figure","headOnly","direction"],["class","mobicountbox count","style","top: 4px;right: 0px;",4,"ngIf"],[1,"bottom-bar-ayirici"],[1,"bar-right"],[1,"bottom-right-ufalt",2,"background-image","url(/assets/images/bottombar/sag-kapat.png)"],[1,"bottombar-friends-list-box"],[1,"friends-left-box"],[1,"bottombar-friends-list"],[1,"bottom-fl-content"],["class","online-friends-box","id","friends",4,"ngFor","ngForOf"],[1,"add-friends-box"],["src","./assets/images/bottombar/addfriends.png",1,"add-avatar-head"],[1,"onfriends-username"],[1,"friends-right-box"],[1,"barico-right","sohbet-icon"],["src","./assets/images/bottombar/sohbet.png"],[1,"barico-right","arkadas-ara-icon",3,"click"],["src","./assets/images/bottombar/arkadas-ara.png"],[1,"barico-right","arkadas-liste-icon",3,"click"],["src","./assets/images/bottombar/arkadas-liste.png"],[1,"barico-left","ev-icon",3,"click"],["src","./assets/images/bottombar/house.png"],[1,"barico-left","habbo-icon",3,"click"],["src","./assets/images/bottombar/habbo.png"],[1,"mobicountbox"],[1,"count-txt"],[1,"mobicountbox","count",2,"top","4px","right","0px"],[1,"count-txt","ng-tns-c168-1"],["id","friends",1,"online-friends-box"],[1,"onfriends-avatar-head",3,"src"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Zb(1,"nitro-toolbar-me-menu-component"),i.dc(2,"div",1,2),i.Zb(4,"img",3),i.Tc(5,Rd,2,0,"div",4),i.Tc(6,Td,2,0,"div",5),i.dc(7,"div",6),i.nc("click",function(){return e.clickIcon("navigator")}),i.Zb(8,"img",7),i.cc(),i.dc(9,"div",8),i.nc("click",function(){return e.clickIcon("catalog")}),i.Zb(10,"img",9),i.cc(),i.dc(11,"div",10),i.nc("click",function(){return e.clickIcon("inventory")}),i.Zb(12,"img",11),i.Tc(13,Od,3,1,"div",12),i.cc(),i.dc(14,"div",13),i.nc("click",function(){return e.clickIcon("me_menu")}),i.Zb(15,"div",14),i.Tc(16,yd,3,1,"div",15),i.cc(),i.Zb(17,"div",16),i.cc(),i.dc(18,"div",17),i.Zb(19,"div",18),i.dc(20,"div",19),i.Zb(21,"div",20),i.dc(22,"div",21),i.dc(23,"div",22),i.Tc(24,Cd,4,2,"div",23),i.dc(25,"div",24),i.Zb(26,"img",25),i.dc(27,"p",26),i.Vc(28),i.rc(29,"translate"),i.cc(),i.cc(),i.dc(30,"div",24),i.Zb(31,"img",25),i.dc(32,"p",26),i.Vc(33),i.rc(34,"translate"),i.cc(),i.cc(),i.dc(35,"div",24),i.Zb(36,"img",25),i.dc(37,"p",26),i.Vc(38),i.rc(39,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.Zb(40,"div",27),i.cc(),i.dc(41,"div",28),i.Zb(42,"img",29),i.cc(),i.dc(43,"div",30),i.nc("click",function(){return e.clickIcon("friendlist")}),i.Zb(44,"img",31),i.cc(),i.dc(45,"div",32),i.nc("click",function(){return e.clickIcon("friendlist")}),i.Zb(46,"img",33),i.Tc(47,Ad,3,1,"div",12),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(5),i.xc("ngIf",!e.isInRoom),i.Kb(1),i.xc("ngIf",e.isInRoom),i.Kb(7),i.xc("ngIf",e.unseenInventoryCount),i.Kb(2),i.xc("figure",e.figure)("headOnly",!1)("direction",2),i.Kb(1),i.xc("ngIf",e.unseenAchievementsCount),i.Kb(8),i.xc("ngForOf",e.friends),i.Kb(4),i.Wc(i.sc(29,12,"friend.bar.find.title")),i.Kb(5),i.Wc(i.sc(34,14,"friend.bar.find.title")),i.Kb(5),i.Wc(i.sc(39,16,"friend.bar.find.title")),i.Kb(9),i.xc("ngIf",e.unseenFriendListCount))},directives:[vd,p.n,_a,p.m],pipes:[ln],encapsulation:2,data:{animation:[Object(f.j)("inOutAnimation",[Object(f.i)(":enter",[Object(f.h)({bottom:"-100%"}),Object(f.e)("1s ease-out",Object(f.h)({bottom:10}))])])]}}),t})();var wd=s("eXwK");function Dd(t,e){if(1&t&&(i.dc(0,"p",23),i.Vc(1),i.cc()),2&t){const t=i.qc(2);i.Kb(1),i.Wc(t.totalFriendRequests)}}function Nd(t,e){if(1&t&&i.Zb(0,"div",24),2&t){const t=i.qc(2);i.xc("threadSelector",t.selectThread)}}function Ud(t,e){if(1&t&&i.Zb(0,"div",25),2&t){const t=i.qc(2);i.xc("thread",t.currentThread)}}const xd=function(t){return{active:t}};function Ld(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"p",3),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",4),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.cc(),i.cc(),i.dc(6,"div",5),i.dc(7,"div",6),i.dc(8,"div",7),i.dc(9,"div",8),i.Tc(10,Dd,2,1,"p",9),i.cc(),i.dc(11,"div",10),i.nc("click",function(){return i.Kc(t),i.qc().displayFriends()}),i.cc(),i.cc(),i.dc(12,"div",11),i.dc(13,"div",12),i.Zb(14,"div",13),i.cc(),i.cc(),i.cc(),i.dc(15,"div",14),i.dc(16,"div",15),i.nc("click",function(){return i.Kc(t),i.qc().displayFriends()}),i.dc(17,"p",16),i.Vc(18),i.rc(19,"translate"),i.cc(),i.cc(),i.dc(20,"div",17),i.dc(21,"p",18),i.Vc(22),i.rc(23,"translate"),i.cc(),i.dc(24,"div",19),i.Zb(25,"div",20),i.cc(),i.cc(),i.cc(),i.dc(26,"div"),i.Tc(27,Nd,1,1,"div",21),i.Tc(28,Ud,1,1,"div",22),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.sc(4,10,"messenger.title")),i.Kb(7),i.xc("ngIf",t.totalFriendRequests>0),i.Kb(1),i.xc("ngClass",i.Bc(16,xd,t.friendsVisible)),i.Kb(5),i.xc("ngClass",i.Bc(18,xd,t.friendsVisible)),i.Kb(2),i.Wc(i.sc(19,12,"friendlist.friends")),i.Kb(4),i.Xc("",i.sc(23,14,"toolbar.icon.label.messenger")," "),i.Kb(3),i.xc("currentThread",t.currentThread)("threadSelector",t.selectThread),i.Kb(2),i.xc("ngIf",t.friendsVisible),i.Kb(1),i.xc("ngIf",t.currentThread)}}let Pd=(()=>{class t{constructor(t,e,s){this._settingsService=t,this._friendListService=e,this._ngZone=s,this.visible=!1,this._friendsVisible=!0,this._currentThread=null,this.selectThread=this.selectThread.bind(this)}ngOnInit(){this._friendListService.component=this,_.a.instance.communication.connection.send(new wd.a)}ngOnChanges(t){const e=t.visible.currentValue;e||e===t.visible.previousValue||this.selectThread(null)}ngOnDestroy(){this._friendListService.component=null}hide(){this._settingsService.hideFriendList()}displayFriends(){this._friendsVisible=!0,this._currentThread=null}selectThread(t){if(t)return this._friendsVisible=!1,this._currentThread=t,void t.setRead();this._friendsVisible=!0,this._currentThread=null}get currentThread(){return this._currentThread}get friendsVisible(){return this._friendsVisible&&!this._currentThread}get totalFriendRequests(){return this._friendListService.requests.size}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(m),i.Yb(Hs),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-friendlist-main-component"]],inputs:{visible:"visible"},features:[i.Ib],decls:1,vars:1,consts:[["id","messenger",3,"bringToTop","draggable",4,"ngIf"],["id","messenger",3,"bringToTop","draggable"],["id","messengerdrag",1,"drag-handler"],[1,"messenger-title"],[1,"messenger-close",3,"click"],[1,"messenger-box"],[1,"messenger-group_list"],[1,"gl-friends_chats-box"],[1,"message-arrived",2,"display","none"],["class","number-of-incoming-messages",4,"ngIf"],[1,"friendsico",2,"background-image","url(../../../assets/images/chat2/friends.png)",3,"ngClass","click"],["id","active-groups-list"],[1,"gl-groups_chats-box"],[1,"groupsico",2,"background-image","url(../../../assets/images/chat2/groupico.png)"],[1,"messenger-friends_list"],[1,"friends-button",3,"ngClass","click"],[1,"frib-text"],[1,"direct-messages"],[1,"drcmsg_text"],[1,"direct-messages-list"],["nitro-friendlist-thread-list-component","",3,"currentThread","threadSelector"],["nitro-friendlist-friends-viewer-component","","style","width: 452px;float: right;",3,"threadSelector",4,"ngIf"],["nitro-friendlist-thread-viewer-component","",3,"thread",4,"ngIf"],[1,"number-of-incoming-messages"],["nitro-friendlist-friends-viewer-component","",2,"width","452px","float","right",3,"threadSelector"],["nitro-friendlist-thread-viewer-component","",3,"thread"]],template:function(t,e){1&t&&i.Tc(0,Ld,29,20,"div",0),2&t&&i.xc("ngIf",e.visible)},encapsulation:2}),t})(),Fd=(()=>{class t extends vo{}return t.CODE="frontpage_featured",t.\u0275fac=function(e){return kd(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:2,vars:0,consts:[[1,"nitro-catalog-layout-frontpagefeatured-component"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Vc(1," frontpage\n"),i.cc())},encapsulation:2}),t})();const kd=i.fc(Fd),Vd=function(t){return{"background-image":t}};function Bd(t,e){if(1&t&&(i.dc(0,"div",7),i.dc(1,"p",8),i.Vc(2),i.cc(),i.cc()),2&t){const t=i.qc();i.xc("ngStyle",i.Bc(2,Vd,"url("+t.getImagesUrl()+t.activePage.frontPageItems[0].itemPromoImage+")")),i.Kb(2),i.Wc(t.activePage.frontPageItems[0].itemName)}}function Wd(t,e){if(1&t&&(i.dc(0,"div",9),i.dc(1,"p",10),i.Vc(2),i.cc(),i.cc()),2&t){const t=i.qc();i.xc("ngStyle",i.Bc(2,Vd,"url("+t.getImagesUrl()+t.activePage.frontPageItems[1].itemPromoImage+")")),i.Kb(2),i.Wc(t.activePage.frontPageItems[1].itemName)}}function Kd(t,e){if(1&t&&(i.dc(0,"div",11),i.dc(1,"p",10),i.Vc(2),i.cc(),i.cc()),2&t){const t=i.qc();i.xc("ngStyle",i.Bc(2,Vd,"url("+t.getImagesUrl()+t.activePage.frontPageItems[2].itemPromoImage+")")),i.Kb(2),i.Wc(t.activePage.frontPageItems[2].itemName)}}function Gd(t,e){if(1&t&&(i.dc(0,"div",12),i.dc(1,"p",10),i.Vc(2),i.cc(),i.cc()),2&t){const t=i.qc();i.xc("ngStyle",i.Bc(2,Vd,"url("+t.getImagesUrl()+t.activePage.frontPageItems[3].itemPromoImage+")")),i.Kb(2),i.Wc(t.activePage.frontPageItems[3].itemName)}}let Hd=(()=>{class t extends vo{getImagesUrl(){return _.a.instance.core.configuration.getValue("image.library.url")}}return t.CODE="frontpage4",t.\u0275fac=function(e){return jd(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:7,vars:5,consts:[[1,"dd"],[1,"frontpage-yeniurunler"],["class","yeniurun1_box",3,"ngStyle",4,"ngIf"],["class","yeniurun2_box",3,"ngStyle",4,"ngIf"],["class","yeniurun3_box",3,"ngStyle",4,"ngIf"],["class","yeniurun4_box",3,"ngStyle",4,"ngIf"],[3,"localization"],[1,"yeniurun1_box",3,"ngStyle"],[1,"bigbox-yeniurun-aciklama"],[1,"yeniurun2_box",3,"ngStyle"],[1,"smallbox-yeniurun-aciklama"],[1,"yeniurun3_box",3,"ngStyle"],[1,"yeniurun4_box",3,"ngStyle"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Tc(2,Bd,3,4,"div",2),i.Tc(3,Wd,3,4,"div",3),i.Tc(4,Kd,3,4,"div",4),i.Tc(5,Gd,3,4,"div",5),i.Zb(6,"redeem-voucher-component",6),i.cc(),i.cc()),2&t&&(i.Kb(2),i.xc("ngIf",e.activePage.frontPageItems[0]),i.Kb(1),i.xc("ngIf",e.activePage.frontPageItems[1]),i.Kb(1),i.xc("ngIf",e.activePage.frontPageItems[2]),i.Kb(1),i.xc("ngIf",e.activePage.frontPageItems[3]),i.Kb(1),i.xc("localization",e.activePage.localization))},encapsulation:2}),t})();const jd=i.fc(Hd);function zd(t,e){if(1&t&&i.Zb(0,"img",16),2&t){const t=i.qc(2);i.xc("src",t.getImage(1),i.Mc)}}function Yd(t,e){if(1&t&&(i.dc(0,"div",14),i.Tc(1,zd,1,1,"img",15),i.cc()),2&t){const t=i.qc();i.Kb(1),i.xc("ngIf",t.getImage(1))}}function qd(t,e){if(1&t&&(i.dc(0,"div"),i.Zb(1,"nitro-badge",17),i.dc(2,"div",18),i.Vc(3),i.cc(),i.Zb(4,"div",19),i.cc()),2&t){const t=i.qc();i.Kb(1),i.xc("badge",t.selectedGroup.badge)("isGroup",!0),i.Kb(2),i.Wc(t.offerName(t.activeOffer)),i.Kb(1),i.xc("roomPreviewer",t.roomPreviewer)("width",360)("height",240)}}function Zd(t,e){if(1&t&&(i.dc(0,"div",24),i.Vc(1),i.cc()),2&t){const t=i.qc().$implicit,e=i.qc();i.Kb(1),i.Xc("x",e.offerCount(t),"")}}const Xd=function(t){return{"":t}},Qd=function(t){return{"background-image":t}};function Jd(t,e){if(1&t){const t=i.ec();i.dc(0,"div",20),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().selectOffer(s)}),i.dc(1,"div",21),i.Tc(2,Zd,2,1,"div",22),i.Zb(3,"div",23),i.cc(),i.cc()}if(2&t){const t=e.$implicit,s=i.qc();i.Kb(1),i.xc("ngClass",i.Bc(3,Xd,s.activeOffer===t)),i.Kb(1),i.xc("ngIf",s.offerCount(t)>1),i.Kb(1),i.xc("ngStyle",i.Bc(5,Qd,"url("+s.offerImage(t)+")"))}}function $d(t,e){if(1&t&&(i.dc(0,"option",25),i.Vc(1),i.cc()),2&t){const t=e.$implicit;i.xc("value",t.id),i.Kb(1),i.Wc(t.title)}}function tg(t,e){if(1&t&&(i.dc(0,"div"),i.dc(1,"div",26),i.Zb(2,"div",27),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(2),i.xc("activePage",t.activePage)("activeOffer",t.activeOffer)("quantityEnabled",t.activeOffer.bundlePurchaseAllowed)("forcedExtra",t.selectedGroupId)}}const eg=function(t){return{backgroundColor:t}};let sg=(()=>{class t extends vo{constructor(t,e){super(t,e),this._catalogService=t,this._ngZone=e,this._groups=[],this._selectedGroupId=null,this._selectedGroup=null,this._lastOfferSelected=null,t.registerGroupFurniTemplate(this)}ngOnInit(){this._catalogService.requestGroups()}ngOnDestroy(){this._catalogService.component.previewStuffData=null}selectOffer(t){if(!t)return void this._catalogService.component.selectOffer(null);this._lastOfferSelected=t;const e=[];e.push("0"),e.push(this.selectedGroupId),e.push(this._selectedGroup.badge),e.push(this.selectedGroupColorA),e.push(this.selectedGroupColorB);const s=new Vt.a;s.setValue(e),this._catalogService.component&&(this._catalogService.component.previewStuffData=s,this._catalogService.component.selectOffer(t))}getFirstProduct(t){return t&&t.products[0]||null}hasMultipleProducts(t){return t.products.length>1}offerName(t){let e="";const s=this.getFirstProduct(t);if(s)switch(s.productType){case me.FLOOR:e="roomItem.name."+s.furniClassId;break;case me.WALL:e="wallItem.name."+s.furniClassId}return""===e?e:_.a.instance.getLocalization(e)}getProductFurniData(t){return t?this._catalogService.getFurnitureDataForProductOffer(t):null}offerImage(t){if(!t)return"";const e=t.products[0];if(!e)return"";const s=this.getProductFurniData(e);if(!s)return"";switch(e.productType){case me.FLOOR:case me.WALL:return this._catalogService.getFurnitureDataIconUrl(s)}return""}offerCount(t){if(!this.hasMultipleProducts(t)){const e=this.getFirstProduct(t);if(e)return e.productCount}return 1}get groups(){return this._groups}set groups(t){this._groups=t,t.length>0&&this._ngZone.run(()=>{this.selectedGroupId=t[0].id.toString()})}get selectedGroup(){return this._selectedGroup}get selectedGroupId(){return this._selectedGroupId}set selectedGroupId(t){this._selectedGroupId=t,this._selectedGroup=this.groups.filter(e=>e.id.toString()===t)[0],this.selectOffer(null),this.selectOffer(this._lastOfferSelected)}get selectedGroupColorA(){return this._selectedGroup?this._selectedGroup.colorA:"fff"}get selectedGroupColorB(){return this._selectedGroup?this._selectedGroup.colorB:"fff"}}return t.CODE="guild_custom_furni",t.\u0275fac=function(e){return new(e||t)(i.Yb(Qo),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:17,vars:15,consts:[[1,"d-flex","flex-column","justify-content-center","align-items-center","position-relative","w-100","flex-grow-1",2,"height","240px"],["class","magazaresim",4,"ngIf"],[4,"ngIf"],[1,"catalog-group_mobibox"],[1,"ctlg_mobi-liste"],["class","mview-height",3,"click",4,"ngFor","ngForOf"],[1,"grup-sec"],[1,"grup-renkler"],[1,"gruprenk1",3,"ngStyle"],[1,"gruprenk2",3,"ngStyle"],[1,"grup-sec-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"urun-secilmemis"],[1,"us-txt"],[1,"magazaresim"],["image-placeholder","",3,"src",4,"ngIf"],["image-placeholder","",3,"src"],[1,"position-absolute",2,"right","10px","z-index","1",3,"badge","isGroup"],[1,"select-mobi-name"],["nitro-room-preview-component","",1,"mobi-display-box","room-preview",2,"position","relative","z-index","1",3,"roomPreviewer","width","height"],[1,"mview-height",3,"click"],[1,"mobi-menuview",3,"ngClass"],["class","multiple-purchase-indicators count",4,"ngIf"],[1,"mview-box","detail-image","has-image",3,"ngStyle"],[1,"multiple-purchase-indicators","count"],[3,"value"],[1,"mobi-purchase-box"],["nitro-catalog-purchase-component","",3,"activePage","activeOffer","quantityEnabled","forcedExtra"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Tc(1,Yd,2,1,"div",1),i.Tc(2,qd,5,6,"div",2),i.cc(),i.dc(3,"div",3),i.dc(4,"div",4),i.Tc(5,Jd,4,7,"div",5),i.cc(),i.cc(),i.dc(6,"div",6),i.dc(7,"div",7),i.Zb(8,"div",8),i.Zb(9,"div",9),i.cc(),i.dc(10,"select",10),i.nc("ngModelChange",function(t){return e.selectedGroupId=t}),i.Tc(11,$d,2,2,"option",11),i.cc(),i.cc(),i.Tc(12,tg,3,4,"div",2),i.dc(13,"div",12),i.dc(14,"p",13),i.Vc(15),i.rc(16,"translate"),i.cc(),i.cc()),2&t&&(i.Kb(1),i.xc("ngIf",!e.activeOffer),i.Kb(1),i.xc("ngIf",e.activeOffer),i.Kb(3),i.xc("ngForOf",e.offers),i.Kb(3),i.xc("ngStyle",i.Bc(11,eg,"#"+e.selectedGroupColorA)),i.Kb(1),i.xc("ngStyle",i.Bc(13,eg,"#"+e.selectedGroupColorB)),i.Kb(1),i.xc("ngModel",e.selectedGroupId),i.Kb(1),i.xc("ngForOf",e.groups),i.Kb(1),i.xc("ngIf",e.activeOffer),i.Kb(3),i.Wc(i.sc(16,9,"catalog.purchase.select.info")))},encapsulation:2}),t})(),ig=(()=>{class t extends vo{openGroupCreator(){_.a.instance.createLinkEvent("groups/create")}}return t.CODE="guild_frontpage",t.\u0275fac=function(e){return ng(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:15,vars:6,consts:[[1,"grup-olustur-magaza"],[1,"magaza-grup-bilgi-text",2,"font-size","16px","font-weight","bolder","font-style","italic",3,"innerHtml"],[1,"magaza-grup-bilgi-text",2,"padding-bottom","10px",3,"innerHtml"],[1,"magaza-grup-bilgi-text",3,"innerHtml"],[1,"grupolustur-info"],[1,"grupolustur-button"],[1,"gobutton",3,"click"],[1,"gobutton-text"],["src","/assets/images/grup-olustur.png"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"p",1),i.Vc(2,"sdaasd"),i.cc(),i.Zb(3,"br"),i.dc(4,"p",2),i.Vc(5,"sdaasd"),i.cc(),i.dc(6,"p",3),i.Vc(7,"sdaasd"),i.cc(),i.dc(8,"div",4),i.dc(9,"div",5),i.dc(10,"div",6),i.nc("click",function(){return e.openGroupCreator()}),i.dc(11,"p",7),i.Vc(12),i.rc(13,"translate"),i.cc(),i.cc(),i.cc(),i.Zb(14,"img",8),i.cc(),i.cc()),2&t&&(i.Kb(1),i.xc("innerHtml",e.getText(2),i.Lc),i.Kb(3),i.xc("innerHtml",e.getText(0),i.Lc),i.Kb(2),i.xc("innerHtml",e.getText(1),i.Lc),i.Kb(6),i.Wc(i.sc(13,4,"catalog.start.guild.purchase.button")))},pipes:[ln],encapsulation:2}),t})();const ng=i.fc(ig);let rg=(()=>{class t extends vo{}return t.CODE="pets",t.\u0275fac=function(e){return ag(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:2,vars:0,consts:[[1,"d-flex","flex-column","w-100","h-100","nitro-catalog-layout-pets2-component"],[1,"hatasayfa"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Zb(1,"div",1),i.cc())},encapsulation:2}),t})();const ag=i.fc(rg);let og=(()=>{class t extends vo{}return t.CODE="pets2",t.\u0275fac=function(e){return cg(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:8,vars:4,consts:[[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","nitro-catalog-layout-pets3-component"],[1,"hatasayfa"],[1,"hs-head"],[1,"hs-ico2"],[1,"align-self-center",3,"src"],[1,"hs-hood",3,"innerHtml"],[1,"hs-desc",3,"innerHtml"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"div",2),i.dc(3,"div",3),i.Zb(4,"img",4),i.cc(),i.Zb(5,"p",5),i.cc(),i.Zb(6,"p",6),i.Zb(7,"p",6),i.cc(),i.cc()),2&t&&(i.Kb(4),i.xc("src",e.getImage(1),i.Mc),i.Kb(1),i.xc("innerHtml",e.getText(1),i.Lc),i.Kb(1),i.xc("innerHtml",e.getText(2),i.Lc),i.Kb(1),i.xc("innerHtml",e.getText(3),i.Lc))},encapsulation:2}),t})();const cg=i.fc(og);let hg=(()=>{class t extends vo{}return t.CODE="pets3",t.\u0275fac=function(e){return lg(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:8,vars:4,consts:[[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","nitro-catalog-layout-pets3-component"],[1,"hatasayfa"],[1,"hs-head"],[1,"hs-ico2"],[1,"align-self-center",3,"src"],[1,"hs-hood",3,"innerHtml"],[1,"hs-desc",3,"innerHtml"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"div",2),i.dc(3,"div",3),i.Zb(4,"img",4),i.cc(),i.Zb(5,"p",5),i.cc(),i.Zb(6,"p",6),i.Zb(7,"p",6),i.cc(),i.cc()),2&t&&(i.Kb(4),i.xc("src",e.getImage(1),i.Mc),i.Kb(1),i.xc("innerHtml",e.getText(1),i.Lc),i.Kb(1),i.xc("innerHtml",e.getText(2),i.Lc),i.Kb(1),i.xc("innerHtml",e.getText(3),i.Lc))},encapsulation:2}),t})();const lg=i.fc(hg);function ug(t,e){if(1&t&&i.Zb(0,"img",13),2&t){const t=i.qc();i.xc("src",t.getImage(1),i.Mc)}}function _g(t,e){if(1&t&&(i.dc(0,"div"),i.Zb(1,"div",14),i.cc()),2&t){const t=i.qc();i.Kb(1),i.xc("roomPreviewer",t.roomPreviewer)("width",360)("height",240)}}function dg(t,e){if(1&t&&(i.dc(0,"div",22),i.dc(1,"p",23),i.Vc(2),i.cc(),i.dc(3,"div",24),i.Zb(4,"i",25),i.cc(),i.cc()),2&t){const t=i.qc().$implicit;i.Kb(2),i.Wc(t.priceCredits)}}function gg(t,e){if(1&t&&(i.dc(0,"div",26),i.dc(1,"p",23),i.Vc(2),i.cc(),i.dc(3,"div",24),i.Zb(4,"i"),i.cc(),i.cc()),2&t){const t=i.qc().$implicit,e=i.qc(2);i.Kb(2),i.Wc(e.offerCount(t)),i.Kb(2),i.Nb("icon icon-currency-",t.priceActivityPointsType," scale-0-75")}}function mg(t,e){if(1&t&&(i.dc(0,"div",26),i.dc(1,"p",23),i.Vc(2),i.cc(),i.dc(3,"div",24),i.Zb(4,"i"),i.cc(),i.cc()),2&t){const t=i.qc().$implicit;i.Kb(2),i.Wc(t.priceActivityPoints),i.Kb(2),i.Nb("icon icon-currency-",t.priceActivityPointsType," scale-0-75")}}const pg=function(t){return{secildi:t}},fg=function(t){return{"background-image":t}};function Eg(t,e){if(1&t){const t=i.ec();i.dc(0,"div",17),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc(2).selectOffer(s)}),i.dc(1,"div",18),i.Zb(2,"div",19),i.Tc(3,dg,5,1,"div",20),i.Tc(4,gg,5,4,"div",21),i.Tc(5,mg,5,4,"div",21),i.cc(),i.cc()}if(2&t){const t=e.$implicit,s=i.qc(2);i.xc("ngClass",i.Bc(5,pg,s.activeOffer===t)),i.Kb(2),i.xc("ngStyle",i.Bc(7,fg,"url("+s.offerImage(t)+")")),i.Kb(1),i.xc("ngIf",t.priceCredits),i.Kb(1),i.xc("ngIf",s.offerCount(t)>1),i.Kb(1),i.xc("ngIf",t.priceActivityPoints)}}function Sg(t,e){if(1&t&&(i.dc(0,"div",15),i.Tc(1,Eg,6,9,"div",16),i.cc()),2&t){const t=i.qc();i.Kb(1),i.xc("ngForOf",t.groups[t.activeGroupIndex])}}function vg(t,e){if(1&t&&(i.dc(0,"div"),i.dc(1,"div",27),i.Zb(2,"div",28),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(2),i.xc("vertical",!0)("activePage",t.activePage)("activeOffer",t.activeOffer)}}const bg=function(t){return{"selectspaces-active":t}};let Ig=(()=>{class t extends Po{constructor(){super(...arguments),this._groupNames=["wallpaper","floor","landscape"],this._groups=[],this._activeGroupIndex=-1}ngOnInit(){this.sortOffers(),this.selectFirstSpace(),a(function(){a(".spacesmact").click(function(){a(".spacesmact").removeClass("ctlgmactive"),a(this).addClass("ctlgmactive")})})}sortOffers(){for(const t of this.offers){if(!t)continue;const e=this.getFirstProduct(t);if(e&&(e.productType===me.WALL||e.productType===me.FLOOR)){const s=this.getProductFurniData(e);if(s){const e=s.className,i=this._groupNames.indexOf(e);for(-1===i&&this._groupNames.push(e);this._groups.length<this._groupNames.length;)this._groups.push([]);switch(e){case"floor":case"wallpaper":case"landscape":this._groups[i].push(t)}}}}this.switchCategory("walls")}switchCategory(t){let e=-1;switch(t){case"walls":e=0;break;case"floor":e=1;break;case"landscape":e=2}this._activeGroupIndex=e}selectFirstSpace(){if(-1===this._activeGroupIndex)return;const t=this._groups[this.activeGroupIndex];t&&t.length&&this.selectOffer(t[0])}offerName(t){let e="";const s=this.getFirstProduct(t);if(s)switch(s.productType){case me.FLOOR:e="roomItem.name."+s.furniClassId;break;case me.WALL:e="wallItem.name."+s.furniClassId}return""===e?e:_.a.instance.getLocalization(e)}offerImage(t){if(!t)return"";const e=t.products[0];if(!e)return"";const s=this.getProductFurniData(e);if(!s)return"";const i=_.a.instance.getConfiguration("catalog.asset.url");let n="";switch(e.productType){case me.WALL:switch(s.className){case"floor":n=["th",s.className,e.extraParam].join("_");break;case"wallpaper":n=["th","wall",e.extraParam].join("_");break;case"landscape":n=["th",s.className,e.extraParam.replace(".","_"),"001"].join("_")}break;default:return super.offerImage(t)}return i+"/"+n+".png"}get groups(){return this._groups}get activeGroupIndex(){return this._activeGroupIndex}}return t.CODE="spaces_new",t.\u0275fac=function(e){return Rg(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:22,vars:25,consts:[[1,"nitro-catalog-layout-default-component"],[1,"d-flex","flex-column","justify-content-center","align-items-center","position-relative","w-100","flex-grow-1",2,"height","240px"],[3,"src",4,"ngIf"],[4,"ngIf"],[1,"spaces-select-menu-corelo"],[1,"btn-group",2,"box-shadow","0px 0px 0px 1px #ffffff26","border-radius","3px"],["type","button",1,"ssm-left",2,"outline","0",3,"ngClass","click"],["type","button",1,"ssm-middle",2,"outline","0",3,"ngClass","click"],["type","button",1,"ssm-right",2,"outline","0",3,"ngClass","click"],[1,"catalog-mobibox"],["class","ctlg_mobi-liste",4,"ngIf"],[1,"urun-secilmemis"],[1,"us-txt"],[3,"src"],["nitro-room-preview-component","",1,"mobi-display-box","room-preview",2,"position","relative","z-index","1",3,"roomPreviewer","width","height"],[1,"ctlg_mobi-liste"],["class","mview-height",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"mview-height",3,"ngClass","click"],[1,"mobi-menuview","spacesmact"],[1,"mview-box","detail-image",3,"ngStyle"],["class","first-price-box",4,"ngIf"],["class","second-price-box",4,"ngIf"],[1,"first-price-box"],[1,"mobi-price-caption"],[1,"mobi-price-ico"],[1,"icon","icon-currency--1","scale-0-75"],[1,"second-price-box"],[1,"mobi-purchase-box"],["nitro-catalog-purchase-component","",3,"vertical","activePage","activeOffer"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Tc(2,ug,1,1,"img",2),i.Tc(3,_g,2,3,"div",3),i.cc(),i.dc(4,"div",4),i.dc(5,"div",5),i.dc(6,"button",6),i.nc("click",function(){return e.switchCategory("walls")}),i.Vc(7),i.rc(8,"translate"),i.cc(),i.dc(9,"button",7),i.nc("click",function(){return e.switchCategory("floor")}),i.Vc(10),i.rc(11,"translate"),i.cc(),i.dc(12,"button",8),i.nc("click",function(){return e.switchCategory("landscape")}),i.Vc(13),i.rc(14,"translate"),i.cc(),i.cc(),i.cc(),i.dc(15,"div",9),i.Tc(16,Sg,2,1,"div",10),i.cc(),i.dc(17,"div",11),i.dc(18,"p",12),i.Vc(19),i.rc(20,"translate"),i.cc(),i.cc(),i.Tc(21,vg,3,3,"div",3),i.cc()),2&t&&(i.Kb(2),i.xc("ngIf",!e.activeOffer&&e.getImage(1)),i.Kb(1),i.xc("ngIf",e.activeOffer),i.Kb(3),i.xc("ngClass",i.Bc(19,bg,0===e.activeGroupIndex)),i.Kb(1),i.Wc(i.sc(8,11,"catalog.spaces.tab.walls")),i.Kb(2),i.xc("ngClass",i.Bc(21,bg,1===e.activeGroupIndex)),i.Kb(1),i.Wc(i.sc(11,13,"catalog.spaces.tab.floors")),i.Kb(2),i.xc("ngClass",i.Bc(23,bg,2===e.activeGroupIndex)),i.Kb(1),i.Wc(i.sc(14,15,"catalog.spaces.tab.views")),i.Kb(3),i.xc("ngIf",e.activeGroupIndex>=0),i.Kb(3),i.Wc(i.sc(20,17,"catalog.purchase.select.info")),i.Kb(2),i.xc("ngIf",e.activeOffer))},encapsulation:2}),t})();const Rg=i.fc(Ig);function Tg(t,e){1&t&&i.Zb(0,"p",23),2&t&&i.xc("innerHtml",e.$implicit,i.Lc)}function Og(t,e){1&t&&(i.dc(0,"p",24),i.Vc(1,"5"),i.cc())}let yg=(()=>{class t extends vo{constructor(){super(...arguments),this.textPages=[],this._allTrophyOffers=new Bs.a,this.currentTrophyOffer=null,this._imageUrl=null,this._currentTrophy=null,this._availableColorsForCurrentTrophy=null,this._currentTrophyIndex=0,this._orderOfColors=["g","s","b"],this.enteredText=""}ngOnInit(){const t=this.activePage.offers;if(this.textPages=this.activePage.localization.texts.filter(t=>t&&t.length>0),t&&t.length)for(const e of t){if(!e)continue;const t=this.getTrophyNameWithoutColors(e.localizationId),s=this.getTrophyColorCharacter(e.localizationId);let i=this._allTrophyOffers.getValue(t);i||(i=new Bs.a,this._allTrophyOffers.add(t,i)),i.add(s,e)}this.selectOfferByIndex(this._currentTrophyIndex)}selectOfferByIndex(t){const e=this._allTrophyOffers.getWithIndex(this._currentTrophyIndex);e&&this.selectOffer(e)}selectOffer(t){if(!t)return;let e=null;const s=[];this._orderOfColors.map(i=>{const n=t.getValue(i);n&&s.push(i),e||(e=n)}),e||(e=t.getWithIndex(0)),e&&(this._currentTrophyColor=this.getTrophyColorCharacter(e.localizationId)),this._availableColorsForCurrentTrophy=s,this.selectTrophyColor(e)}selectTrophyColor(t){if(!t)return;this.currentTrophyOffer=t;const e=t.products[0];if(!e)return;const s=_.a.instance.roomEngine.getFurnitureFloorImage(e.furniClassId,new Z.a(2,0,0),64,this,0,e.extraParam);if(s){const t=s.getImage();t&&(this._imageUrl=t.src)}this._currentTrophy=e}handleTrophyColor(t){if(this._availableColorsForCurrentTrophy.indexOf(t)<0)return;const e=this._allTrophyOffers.getWithIndex(this._currentTrophyIndex).getValue(t);e&&(this._currentTrophyColor=t,this.selectTrophyColor(e))}getActiveClass(t){return this._availableColorsForCurrentTrophy.indexOf(t)>=0&&this._currentTrophyColor==t?"selected":""}imageReady(t,e,s){if(e){const t=Jo.a.generateImageUrl(e);t&&this._ngZone.run(()=>this._imageUrl=t)}}handleButton(t){switch(t){case"next":this._allTrophyOffers.length-1==this._currentTrophyIndex?this._currentTrophyIndex=0:this._currentTrophyIndex++;break;case"previous":0==this._currentTrophyIndex?this._currentTrophyIndex=this._allTrophyOffers.length-1:this._currentTrophyIndex--}this.selectOfferByIndex(this._currentTrophyIndex)}imageFailed(t){}hasMultipleOffers(){return this._allTrophyOffers&&this._allTrophyOffers.length>0}trophyHasColor(t){return this._availableColorsForCurrentTrophy.indexOf(t)>-1}getTrophyNameWithoutColors(t){const e=this.getTrophyColorCharacter(t);return e.length>0?t.slice(0,t.length-1-e.length):t}getTrophyColorCharacter(t){if(-1!=t.indexOf("prizetrophy_2011_"))return"";const e=t.lastIndexOf("_")+1;if(e<=0)return"";const s=t.substr(e);return s.length>1||"g"!=s&&"s"!=s&&"b"!=s?"":s}buyCurrentItem(){this._catalogService.component&&this._catalogService.component.confirmPurchase(this.activePage,this.currentTrophyOffer,1,this.enteredText)}getText(){return""}get imageUrl(){return this._imageUrl}}return t.CODE="trophies",t.\u0275fac=function(e){return Cg(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:29,vars:11,consts:[[1,"trophiespage"],[1,"trophies-descbox"],["class","trophiesdesctxt",3,"innerHtml",4,"ngFor","ngForOf"],[1,"trophies-mobiview"],[1,"trophies-sol",3,"click"],[1,"tmobiview"],[1,"align-self-center",3,"src"],[1,"trophies-sag",3,"click"],[1,"mobi-fiyat-box","trophiesmfb"],[1,"mdb-fbox","mobi-fiyat-dia"],["class","mobi-mapfbox-fiyat-text",4,"ngIf"],[1,"mobi-fiyat-birimico"],[1,"icon","icon-currencybig-cc"],[1,"catalog-trophies-mobibox","nitro-catalog-layout-trophies-types"],[1,"trophies-renk-select",2,"background","#c19d31",3,"ngClass","click"],[1,"trophies-renk-select",2,"background","#a5a4a2",3,"ngClass","click"],[1,"trophies-renk-select",2,"background","#865600",3,"ngClass","click"],["autofocus","","name","trophie","maxlength","300",1,"trophies-mobinamebox",3,"ngModel","ngModelChange"],[1,"mobi-purchase-box"],[1,"mobi-hediye-box"],[1,"mobigift-text"],[1,"mobi-buy-box",3,"click"],[1,"mobibuy-text"],[1,"trophiesdesctxt",3,"innerHtml"],[1,"mobi-mapfbox-fiyat-text"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Tc(2,Tg,1,1,"p",2),i.cc(),i.dc(3,"div",3),i.dc(4,"div",4),i.nc("click",function(){return e.handleButton("previous")}),i.Vc(5,"<"),i.cc(),i.dc(6,"div",5),i.Zb(7,"img",6),i.cc(),i.dc(8,"div",7),i.nc("click",function(){return e.handleButton("next")}),i.Vc(9,">"),i.cc(),i.dc(10,"div",8),i.dc(11,"div",9),i.Tc(12,Og,2,0,"p",10),i.dc(13,"div",11),i.Zb(14,"i",12),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(15,"div",13),i.dc(16,"div",14),i.nc("click",function(){return e.handleTrophyColor("g")}),i.cc(),i.dc(17,"div",15),i.nc("click",function(){return e.handleTrophyColor("s")}),i.cc(),i.dc(18,"div",16),i.nc("click",function(){return e.handleTrophyColor("b")}),i.cc(),i.cc(),i.dc(19,"textarea",17),i.nc("ngModelChange",function(t){return e.enteredText=t}),i.Vc(20),i.cc(),i.dc(21,"div",18),i.dc(22,"div",19),i.dc(23,"p",20),i.Vc(24,"Hediye Et"),i.cc(),i.cc(),i.dc(25,"div",21),i.nc("click",function(){return e.buyCurrentItem()}),i.dc(26,"p",22),i.Vc(27),i.rc(28,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(2),i.xc("ngForOf",e.textPages),i.Kb(5),i.xc("src",e.imageUrl,i.Mc),i.Kb(5),i.xc("ngIf",e.currentTrophyOffer.priceCredits),i.Kb(4),i.xc("ngClass","color-gold"+e.getActiveClass("g")),i.Kb(1),i.xc("ngClass","color-silver"+e.getActiveClass("s")),i.Kb(1),i.xc("ngClass","color-bronze"+e.getActiveClass("b")),i.Kb(1),i.xc("ngModel",e.enteredText),i.Kb(1),i.Wc(e.enteredText),i.Kb(7),i.Wc(i.sc(28,9,"buy")))},directives:[p.m,p.n,p.l,rr.b,rr.i,rr.l,rr.n],pipes:[ln],encapsulation:2}),t})();const Cg=i.fc(yg);let Ag=(()=>{class t extends vo{}return t.CODE="UNSUPPORTED",t.\u0275fac=function(e){return Mg(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:9,vars:3,consts:[[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","nitro-catalog-layout-unsupported-component"],[1,"hatasayfa"],[1,"hs-head"],[1,"hs-ico"],[1,"hs-hood"],[1,"hs-desc"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"div",2),i.Zb(3,"div",3),i.dc(4,"p",4),i.Vc(5),i.rc(6,"translate"),i.cc(),i.cc(),i.dc(7,"p",5),i.Vc(8,"error_message"),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(5),i.Wc(i.sc(6,1,"connection.error.id.title")))},pipes:[ln],encapsulation:2}),t})();const Mg=i.fc(Ag);function wg(t,e){if(1&t&&(i.dc(0,"div",19),i.Zb(1,"img",20),i.dc(2,"p",21),i.Vc(3),i.cc(),i.cc()),2&t){const t=i.qc().$implicit,e=i.qc();i.Kb(3),i.Wc(e.getOfferText(t))}}function Dg(t,e){if(1&t&&(i.dc(0,"p",22),i.Vc(1),i.cc()),2&t){const t=i.qc().$implicit;i.Kb(1),i.Xc("",t.priceCredits," ")}}function Ng(t,e){if(1&t&&(i.dc(0,"p",23),i.Vc(1),i.cc()),2&t){const t=i.qc().$implicit;i.Kb(1),i.Wc(t.priceActivityPoints)}}function Ug(t,e){if(1&t){const t=i.ec();i.dc(0,"div",24),i.nc("click",function(){i.Kc(t);const e=i.qc().$implicit;return i.qc().buyVip(e)}),i.dc(1,"p",17),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()}2&t&&(i.Kb(2),i.Wc(i.sc(3,1,"catalog.purchase_confirmation.gift")))}function xg(t,e){if(1&t){const t=i.ec();i.bc(0),i.dc(1,"div",7),i.Tc(2,wg,4,1,"div",8),i.dc(3,"div",9),i.dc(4,"div",10),i.Tc(5,Dg,2,1,"p",11),i.Zb(6,"div",12),i.cc(),i.dc(7,"div",10),i.dc(8,"p",13),i.Vc(9,"+"),i.cc(),i.Tc(10,Ng,2,1,"p",14),i.Zb(11,"div",15),i.cc(),i.cc(),i.dc(12,"div",16),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().buyVip(s)}),i.dc(13,"p",17),i.Vc(14),i.rc(15,"translate"),i.cc(),i.cc(),i.Tc(16,Ug,4,3,"div",18),i.cc(),i.ac()}if(2&t){const t=e.$implicit;i.Kb(2),i.xc("ngIf",t.productCode),i.Kb(3),i.xc("ngIf",t.priceCredits),i.Kb(5),i.xc("ngIf",t.priceActivityPoints&&t.priceCredits),i.Kb(4),i.Wc(i.sc(15,5,"buy")),i.Kb(2),i.xc("ngIf",t.giftable)}}let Lg=(()=>{class t extends vo{constructor(t,e){super(t,e),this._catalogService=t,this._ngZone=e,this.vipOffers=[],t.registerVipBuyTemplate(this),t.requestOffers(6)}setOffers(t){this._ngZone.run(()=>{this.vipOffers=t.reverse()})}getPurseContent(){const t=this._catalogService.purse;return _.a.instance.localization.getValueWithParameter("catalog.vip.extend.info","days",(31*t.clubPeriods+t.clubDays).toString())}buyVip(t){this._catalogService.component&&this._catalogService.component.confirmVipSubscription(t)}getOfferText(t){return t.months>0?_.a.instance.getLocalizationWithParameter("catalog.vip.item.header.months","num_months",t.months.toString()):_.a.instance.getLocalizationWithParameter("catalog.vip.item.header.days","num_days",t.extraDays.toString())}}return t.CODE="vip_buy",t.\u0275fac=function(e){return new(e||t)(i.Yb(Qo),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:11,vars:8,consts:[[1,"hc-info-box"],["src","./assets/images/catalog/hc-bg.png",1,"hc-bg"],[1,"hc-info-hood"],[1,"hc-info-desc",3,"innerHtml"],[4,"ngFor","ngForOf"],[1,"hc-ex-info"],[2,"width","250px"],[1,"hc-buy"],["class","hc-buy-box_head",4,"ngIf"],[1,"hc-fiyat-box"],[1,"mdb-fbox"],["class","hc-fiyat-text","style","padding-right: 5px;",4,"ngIf"],[1,"mobi-fiyat-birimico",2,"background-image","url(/assets/images/catalog/bigcc.png)","height","20px","margin-top","4px"],[1,"plusprice"],["class","hc-fiyat-text","style","padding-right: 3px;",4,"ngIf"],[1,"mobi-fiyat-birimico",2,"background-image","url(/assets/images/catalog/bigdia.png)","height","20px","margin-top","4px"],[1,"hc-buy-box",3,"click"],[1,"hcbuy-text"],["class","hc-hediye-box",3,"click",4,"ngIf"],[1,"hc-buy-box_head"],["src","./assets/images/catalog/1395__-hi.png",1,"hc-logo"],[1,"hcbuy-months-info"],[1,"hc-fiyat-text",2,"padding-right","5px"],[1,"hc-fiyat-text",2,"padding-right","3px"],[1,"hc-hediye-box",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Zb(1,"img",1),i.dc(2,"strong",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.Zb(5,"p",3),i.cc(),i.Tc(6,xg,17,7,"ng-container",4),i.dc(7,"div",5),i.dc(8,"p",6),i.Vc(9),i.rc(10,"translate"),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(i.sc(4,4,"catalog.vip.extend.title")),i.Kb(2),i.xc("innerHtml",e.getPurseContent(),i.Lc),i.Kb(1),i.xc("ngForOf",e.vipOffers),i.Kb(3),i.Wc(i.sc(10,6,"catalog.vip.buy.hccenter")))},directives:[p.m,p.n],pipes:[ln],encapsulation:2}),t})();function Pg(t,e){if(1&t&&i.Zb(0,"img",9),2&t){const t=i.qc(2);i.xc("src",t.getImage(1),i.Mc)}}function Fg(t,e){if(1&t&&(i.dc(0,"div",7),i.Tc(1,Pg,1,1,"img",8),i.cc()),2&t){const t=i.qc();i.Kb(1),i.xc("ngIf",t.getImage(1))}}function kg(t,e){if(1&t&&i.Zb(0,"div",13),2&t){const t=i.qc(2);i.xc("roomPreviewer",t.roomPreviewer)("width",360)("height",240)}}function Vg(t,e){if(1&t&&(i.dc(0,"div",14),i.Zb(1,"img",9),i.cc()),2&t){const t=i.qc(2);i.Kb(1),i.xc("src",t.offerImage(t.activeOffer),i.Mc)}}function Bg(t,e){if(1&t&&(i.dc(0,"div"),i.dc(1,"div",10),i.Vc(2),i.cc(),i.Tc(3,kg,1,3,"div",11),i.Tc(4,Vg,2,1,"div",12),i.cc()),2&t){const t=i.qc();i.Kb(2),i.Wc(t.offerName(t.activeOffer)),i.Kb(1),i.xc("ngIf",t.roomPreviewerVisible),i.Kb(1),i.xc("ngIf",!t.roomPreviewerVisible)}}const Wg=function(t){return{secildi:t}};function Kg(t,e){if(1&t){const t=i.ec();i.dc(0,"div",15),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().selectOffer(s)}),i.dc(1,"div",16),i.Zb(2,"div",17),i.cc(),i.cc()}if(2&t){const t=e.$implicit,s=i.qc();i.xc("ngClass",i.Bc(6,Wg,s.activeOffer===t)),i.Kb(2),i.xc("scale",4)("figure",t&&t.products[0]&&t.products[0].extraParam)("direction",3)("headOnly",!0)("asBackground",!0)}}function Gg(t,e){if(1&t&&(i.dc(0,"div",18),i.Zb(1,"div",19),i.cc()),2&t){const t=i.qc();i.Kb(1),i.xc("activePage",t.activePage)("activeOffer",t.activeOffer)("quantityEnabled",t.activeOffer.bundlePurchaseAllowed)}}let Hg=(()=>{class t extends Po{ngOnInit(){a(function(){a(".mobi-menuview").click(function(){a(".mobi-menuview").removeClass("ctlgmactive"),a(this).addClass("ctlgmactive")})})}}return t.CODE="bots",t.\u0275fac=function(e){return jg(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:7,vars:4,consts:[[1,"d-flex","flex-column","justify-content-center","align-items-center","position-relative","w-100","flex-grow-1",2,"height","240px"],["class","magazaresim",4,"ngIf"],[4,"ngIf"],[1,"catalog-mobibox"],[1,"ctlg_mobi-liste"],["class","mview-height",3,"ngClass","click",4,"ngFor","ngForOf"],["class","mobi-purchase-box",4,"ngIf"],[1,"magazaresim"],["image-placeholder","",3,"src",4,"ngIf"],["image-placeholder","",3,"src"],[1,"select-mobi-name","offer-name"],["class","mobi-display-box room-preview","nitro-room-preview-component","","style","position: relative;z-index: 1;",3,"roomPreviewer","width","height",4,"ngIf"],["class","d-flex justify-content-center align-items-center h-100 w-100",4,"ngIf"],["nitro-room-preview-component","",1,"mobi-display-box","room-preview",2,"position","relative","z-index","1",3,"roomPreviewer","width","height"],[1,"d-flex","justify-content-center","align-items-center","h-100","w-100"],[1,"mview-height",3,"ngClass","click"],[1,"mobi-menuview"],["avatar-image","",1,"mview-box","detail-image",2,"display","flex","flex-direction","column","justify-content","center","align-items","center","padding-top","75px !important",3,"scale","figure","direction","headOnly","asBackground"],[1,"mobi-purchase-box"],["nitro-catalog-purchase-component","",3,"activePage","activeOffer","quantityEnabled"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Tc(1,Fg,2,1,"div",1),i.Tc(2,Bg,5,3,"div",2),i.cc(),i.dc(3,"div",3),i.dc(4,"div",4),i.Tc(5,Kg,3,8,"div",5),i.cc(),i.cc(),i.Tc(6,Gg,2,3,"div",6)),2&t&&(i.Kb(1),i.xc("ngIf",!e.activeOffer),i.Kb(1),i.xc("ngIf",e.activeOffer),i.Kb(3),i.xc("ngForOf",e.offers),i.Kb(1),i.xc("ngIf",e.activeOffer))},encapsulation:2}),t})();const jg=i.fc(Hg);var zg=s("qOv/");function Yg(t,e){if(1&t){const t=i.ec();i.dc(0,"div",13),i.dc(1,"span",9),i.Vc(2),i.rc(3,"translate"),i.cc(),i.dc(4,"button",14),i.nc("click",function(){i.Kc(t);const e=i.qc().$implicit;return i.qc(2).selectOffer(e)}),i.Vc(5),i.rc(6,"translate"),i.cc(),i.cc()}2&t&&(i.Kb(2),i.Wc(i.sc(3,2,"catalog.club_gift.selectable")),i.Kb(3),i.Wc(i.sc(6,4,"catalog.club_gift.select")))}function qg(t,e){if(1&t&&(i.dc(0,"div",9),i.Vc(1),i.cc()),2&t){const t=i.qc().$implicit,e=i.qc(2);i.Kb(1),i.Xc(" ",e.nonAvailableText(t.offerId)," ")}}const Zg=function(t){return{"background-image":t}};function Xg(t,e){if(1&t&&(i.dc(0,"div",7),i.Zb(1,"div",8),i.dc(2,"div",9),i.dc(3,"p",10),i.Vc(4),i.cc(),i.Tc(5,Yg,7,6,"div",11),i.Tc(6,qg,2,1,"div",12),i.cc(),i.cc()),2&t){const t=e.$implicit,s=i.qc(2);i.Kb(1),i.xc("ngStyle",i.Bc(4,Zg,"url("+s.offerImage(t)+")")),i.Kb(3),i.Wc(s.getProductFurniData(t.products[0]).name),i.Kb(1),i.xc("ngIf",s.getAvailability(t.offerId)),i.Kb(1),i.xc("ngIf",!s.getAvailability(t.offerId))}}function Qg(t,e){if(1&t&&(i.dc(0,"div",2),i.dc(1,"p",3),i.Vc(2),i.cc(),i.dc(3,"perfect-scrollbar",4),i.Tc(4,Xg,7,6,"div",5),i.cc(),i.dc(5,"p",6),i.Vc(6),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(2),i.Wc(t.giftsAvailable),i.Kb(2),i.xc("ngForOf",t.gifts),i.Kb(2),i.Wc(t.pastClubDays)}}function Jg(t,e){if(1&t){const t=i.ec();i.dc(0,"div",15),i.dc(1,"div",16),i.dc(2,"h6",17),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",18),i.nc("click",function(){return i.Kc(t),i.qc().hidePopup()}),i.Zb(6,"i",19),i.cc(),i.cc(),i.dc(7,"div",20),i.dc(8,"div",21),i.Zb(9,"div",22),i.cc(),i.dc(10,"div",23),i.dc(11,"div",24),i.Vc(12),i.cc(),i.cc(),i.cc(),i.dc(13,"div",25),i.dc(14,"div",26),i.dc(15,"button",27),i.nc("click",function(){return i.Kc(t),i.qc().confirmGift()}),i.Vc(16),i.rc(17,"translate"),i.cc(),i.dc(18,"button",28),i.nc("click",function(){return i.Kc(t),i.qc().hidePopup()}),i.Vc(19),i.rc(20,"translate"),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.sc(4,5,"catalog.club_gift.confirm")),i.Kb(6),i.xc("ngStyle",i.Bc(11,Zg,"url("+t.getGiftImage()+")")),i.Kb(3),i.Wc(t.giftName()),i.Kb(4),i.Wc(i.sc(17,7,"catalog.club_gift.select")),i.Kb(3),i.Wc(i.sc(20,9,"cancel"))}}let $g=(()=>{class t extends vo{constructor(t,e){super(t,e),this._catalogService=t,this._ngZone=e,this.showPopup=!1,this.vipOffers=[],this._currentSelectedVipOffer=null}get visible(){return null!==this._catalogService.clubGiftsParser}hidePopup(){this.showPopup=!1}getAvailability(t){return this._catalogService.clubGiftsParser.getOfferExtraData(t).isSelectable&&this._catalogService.clubGiftsParser.giftsAvailable>0}get gifts(){return this.visible?this._catalogService.clubGiftsParser.offers:[]}get direction(){return new Z.a(90)}selectOffer(t){this._currentSelectedVipOffer=t,this.showPopup=!0}getGiftImage(){return this.offerImage(this._currentSelectedVipOffer)}giftName(){return this.getProductFurniData(this._currentSelectedVipOffer.products[0]).name}confirmGift(){_.a.instance.communication.connection.send(new zg.a(this._currentSelectedVipOffer.localizationId)),this._catalogService.clubGiftsParser.giftsAvailable--,this.showPopup=!1}get pastClubDays(){const t=this._catalogService.purse.pastClubDays,e=t>31?"catalog.club_gift.past_club.long":"catalog.club_gift.past_club",s=Math.floor(t%31),i=Math.floor(t/31);let n=_.a.instance.localization.getValue(e);return n=n.replace("%days%",s.toString()),n=n.replace("%months%",i.toString()),n}nonAvailableText(t){const e=this._catalogService.clubGiftsParser.getOfferExtraData(t),s=e.availableInDays-this._catalogService.purse.pastClubDays;if(s<=0)return"";let i="";i=e._Str_12313?"catalog.club_gift.vip_missing":"catalog.club_gift.club_missing",s>31&&(i+=".long");const n=s%31,r=s/31;let a=_.a.instance.localization.getValue(i);return a=a.replace("%days%",n.toString()),a=a.replace("%months%",r.toString()),a}get giftsAvailable(){if(!this.visible)return"";const t=this._catalogService.clubGiftsParser;return t.giftsAvailable>0?_.a.instance.localization.getValueWithParameter("catalog.club_gift.available","amount",t.giftsAvailable.toString()):t.daysUntilNextGift>0?_.a.instance.localization.getValueWithParameter("catalog.club_gift.days_until_next","days",t.daysUntilNextGift.toString()):this._catalogService.hasClubDays()?_.a.instance.localization.getValue("catalog.club_gift.not_available"):_.a.instance.localization.getValue("catalog.club_gift.no_club")}}return t.CODE="club_gifts",t.\u0275fac=function(e){return new(e||t)(i.Yb(Qo),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:2,vars:2,consts:[["class","w-100 h-100 nitro-catalog-layout-vip-gifts-component px-1",4,"ngIf"],["class","nitro-catalog-confirm-purchase-component card",3,"bringToTop","draggable",4,"ngIf"],[1,"w-100","h-100","nitro-catalog-layout-vip-gifts-component","px-1"],[1,"text-center","w-100"],[2,"min-height","450px","max-height","450px","height","450px"],["class","gift-item rounded bg-secondary mb-2 d-flex flex-row p-1",4,"ngFor","ngForOf"],[1,"w-100","text-center","p-0","m-0"],[1,"gift-item","rounded","bg-secondary","mb-2","d-flex","flex-row","p-1"],[1,"gift-image","align-self-center","mr-2","flex-shrink-0",3,"ngStyle"],[1,"w-100"],[1,"mb-0","pb-0","d-block"],["class","w-100 d-flex flex-row justify-content-between",4,"ngIf"],["class","w-100",4,"ngIf"],[1,"w-100","d-flex","flex-row","justify-content-between"],["type","button",1,"btn","btn-sm","btn-primary","align-self-center",3,"click"],[1,"nitro-catalog-confirm-purchase-component","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-3"],[1,"col-6","d-flex","flex-column"],[1,"product-preview","bg-secondary","rounded",3,"ngStyle"],[1,"col-6","d-flex","flex-column","align-items-center","justify-content-center"],[1,"offer-name"],[1,"row","align-items-end","pt-0","px-3","pb-3"],[1,"col","btn-group"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(i.Tc(0,Qg,7,3,"div",0),i.Tc(1,Jg,21,13,"div",1)),2&t&&(i.xc("ngIf",e.visible),i.Kb(1),i.xc("ngIf",e.showPopup))},directives:[p.n,hc.b,p.m,p.o,Tr,Lr],pipes:[ln],encapsulation:2}),t})();class tm{getLayoutForType(t){switch(t){case Fd.CODE:return Fd;case Hd.CODE:return Hd;case Hg.CODE:return Hg;case rg.CODE:return rg;case og.CODE:return og;case hg.CODE:return hg;case Ig.CODE:return Ig;case Po.CODE:return Po;case Lg.CODE:return Lg;case ig.CODE:return ig;case sg.CODE:return sg;case yg.CODE:return yg;case zo.CODE:return zo;case $g.CODE:return $g;default:return Ag}}}const em=["layoutsContainer"],sm=function(t){return{ctlgactive:t}};function im(t,e){if(1&t){const t=i.ec();i.bc(0),i.dc(1,"div",22),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc(3).selectTab(s)}),i.Vc(2),i.cc(),i.ac()}if(2&t){const t=e.$implicit,s=i.qc(3);i.Kb(1),i.xc("ngClass",i.Bc(2,sm,s.activeTab===t)),i.Kb(1),i.Wc(t.localization)}}function nm(t,e){if(1&t&&(i.dc(0,"div",20),i.Tc(1,im,3,4,"ng-container",21),i.cc()),2&t){const t=i.qc(2);i.Kb(1),i.xc("ngForOf",t.catalogRoot.children)}}function rm(t,e){1&t&&(i.dc(0,"div",23),i.Zb(1,"div",24),i.cc())}function am(t,e){}const om=function(t){return{"background-image":t}};function cm(t,e){if(1&t){const t=i.ec();i.dc(0,"div",4),i.dc(1,"div",5),i.dc(2,"p",6),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",7),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.cc(),i.Zb(6,"div",8),i.cc(),i.dc(7,"div",9),i.Tc(8,nm,2,1,"div",10),i.dc(9,"div",11),i.Zb(10,"div",12),i.Zb(11,"div",13),i.dc(12,"p",14),i.Vc(13),i.cc(),i.dc(14,"p",15),i.Vc(15),i.cc(),i.cc(),i.dc(16,"div",16),i.Tc(17,rm,2,0,"div",17),i.dc(18,"div",18),i.Tc(19,am,0,0,"ng-template",null,19,i.Uc),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.sc(4,7,"catalog.title")),i.Kb(5),i.xc("ngIf",t.catalogRoot&&t.catalogRoot.children.length>0),i.Kb(2),i.xc("ngStyle",i.Bc(9,om,"url("+t.headerImageUrl+")")),i.Kb(1),i.xc("ngStyle",i.Bc(11,om,"url("+t.iconUrl+")")),i.Kb(2),i.Wc(null==t.activePageData?null:t.activePageData.localization),i.Kb(2),i.Wc(null==t.activePage||null==t.activePage.localization?null:t.activePage.localization.texts[0]),i.Kb(2),i.xc("ngIf",t.activeTab&&t.activeTab.children.length>0)}}function hm(t,e){if(1&t&&i.Zb(0,"nitro-catalog-confirm-purchase-component",25),2&t){const t=i.qc();i.xc("giftOffer",t.giftOffer)("page",t.purchaseOfferPage)("offer",t.purchaseOffer)("quantity",t.purchaseOfferQuantity)("extra",t.purchaseOfferExtra)("completed",t.purchaseCompleted)}}function lm(t,e){if(1&t&&i.Zb(0,"nitro-catalog-confirm-vip-subscription-component",26),2&t){const t=i.qc();i.xc("subscription",t.purchaseVipSubscription)}}function um(t,e){1&t&&i.Zb(0,"nitro-catalog-confirm-purchase-insufficient-funds")}function _m(t,e){1&t&&i.Zb(0,"nitro-catalog-customize-gift-component")}let dm=(()=>{class t{constructor(t,e,s,i,n,r){this._settingsService=t,this._notificationService=e,this._catalogService=s,this._componentFactoryResolver=i,this._purseService=n,this._ngZone=r,this.visible=!1,this._roomPreviewer=null,this._previewStuffData=null,this._lastComponent=null,this._layoutFactory=null,this._activeTab=null,this._activeOffer=null,this._purchaseOfferPage=null,this._purchaseOffer=null,this._purchaseGiftOffer=null,this._purchaseVipSubscription=null,this._purchaseOfferQuantity=1,this._purchaseOfferExtra=null,this._purchaseCompleted=!1,this._showInsufficientFunds=!1,this._showGiftConfigurator=!1,s.requestClubGifts()}ngOnInit(){this._catalogService.component=this,this._layoutFactory=new tm,this._roomPreviewer||(this._roomPreviewer=new di(_.a.instance.roomEngine,++di.PREVIEW_COUNTER))}ngOnChanges(t){const e=t.visible.currentValue;e!==t.visible.previousValue&&(e?this.prepareCatalog():this.removeLastComponent())}ngOnDestroy(){this._roomPreviewer&&this._roomPreviewer.dispose(),this.reset(),this._catalogService.component=null,this._layoutFactory=null}reset(){this.removeLastComponent(),this._activeTab=null,this._activeOffer=null,this.hidePurchaseConfirmation()}hide(){this._settingsService.hideCatalog(),this._catalogService.clearSearchResults()}hidePurchaseConfirmation(){this._purchaseOfferPage=null,this._purchaseOffer=null,this._purchaseOfferQuantity=1,this._purchaseOfferExtra=null,this._purchaseVipSubscription=null,this._purchaseGiftOffer=null,this._showGiftConfigurator=!1}prepareCatalog(){this._catalogService.catalogRoot?setTimeout(()=>{this._activeTab?this._catalogService.activePage?this.setupLayout():this.selectFirstPage(this._activeTab):this.selectFirstTab()},0):this._catalogService.setupCatalog(Qo.MODE_NORMAL)}setupLayout(){const t=this._catalogService.activePage;if(!t)return;const e=this._layoutFactory.getLayoutForType(t.layoutCode);e?(this.createComponent(e),this._lastComponent&&(this._lastComponent.instance.activePage=t),this.selectOffer(null)):this.removeLastComponent()}createComponent(t){if(!t||!this.layoutsContainer)return;this.removeLastComponent();const e=this._componentFactoryResolver.resolveComponentFactory(t);let s=null;e&&(s=this.layoutsContainer.createComponent(e)),this._lastComponent=s}removeLastComponent(){this.layoutsContainer&&this.layoutsContainer.remove(),this._lastComponent=null,this._activeOffer=null}selectTab(t){t&&(this._activeTab=t,this.selectFirstPage(t))}reselectCurrentTab(){this.selectFirstPage(this._activeTab)}selectPage(t){t&&this._catalogService.requestPage(t)}selectFirstPage(t,e=!1){t&&this.selectPage(e||!t.children.length?t:t.children&&t.children[0])}selectFirstTab(){if(!this.catalogRoot)return;const t=this.catalogRoot.children&&this.catalogRoot.children[0];t&&this.selectTab(t)}selectOffer(t){if(this._activeOffer=t,this._activeOffer){const t=this._activeOffer.products[0];if(!t)return;if(!this._roomPreviewer)return;const e=this._catalogService.getFurnitureDataForProductOffer(t);if(!e&&t.productType!==me.ROBOT)return;this._ngZone.runOutsideAngular(()=>{switch(t.productType){case me.ROBOT:{this._roomPreviewer.updateObjectRoom("default","default","default");const e=_.a.instance.avatar.getFigureStringWithFigureIds(t.extraParam,"m",[]);this._roomPreviewer.addAvatarIntoRoom(e,0)}break;case me.FLOOR:if(this._roomPreviewer.updateObjectRoom("default","default","default"),e.specialType===ca.FIGURE_PURCHASABLE_SET){const t=[],s=e.customParams.split(",");for(const e of s){const s=parseInt(e);_.a.instance.avatar.isValidFigureSetForGender(s,_.a.instance.sessionDataManager.gender)&&t.push(s)}const i=_.a.instance.avatar.getFigureStringWithFigureIds(_.a.instance.sessionDataManager.figure,_.a.instance.sessionDataManager.gender,t);this._roomPreviewer.addAvatarIntoRoom(i,0)}else this._roomPreviewer.addFurnitureIntoRoom(t.furniClassId,new Z.a(90),this._previewStuffData);return;case me.WALL:switch(e.className){case"floor":this._roomPreviewer.reset(!1),this._roomPreviewer.updateObjectRoom(t.extraParam);break;case"wallpaper":this._roomPreviewer.reset(!1),this._roomPreviewer.updateObjectRoom(null,t.extraParam);break;case"landscape":this._roomPreviewer.reset(!1),this._roomPreviewer.updateObjectRoom(null,null,t.extraParam);break;default:return this._roomPreviewer.updateObjectRoom("default","default","default"),void this._roomPreviewer.addWallItemIntoRoom(t.furniClassId,new Z.a(90),t.extraParam)}return}})}else this._ngZone.runOutsideAngular(()=>this._roomPreviewer&&this._roomPreviewer.reset(!1))}hasSufficientFunds(t,e,s,i=1){if(!this._purseService)return!1;const n=this._purseService.currencies,r=n.get(-1),a=n.get(e);return!(r<t*i||a<s*i)}confirmPurchase(t,e,s=1,i=null,n=!1){this.hasSufficientFunds(e.priceCredits,e.priceActivityPointsType,e.priceActivityPoints,s)?(this._purchaseOfferPage=t,this._purchaseOffer=e,this._purchaseOfferQuantity=s,this._purchaseOfferExtra=i,n&&(this._purchaseGiftOffer=e)):this.setInsufficientFunds(!0)}confirmVipSubscription(t){this.hasSufficientFunds(t.priceCredits,t.priceActivityPointsType,t.priceActivityPoints,1)?this._purchaseVipSubscription=t:this.setInsufficientFunds(!0)}get previewStuffData(){return this._previewStuffData}set previewStuffData(t){this._previewStuffData=t}get roomPreviewer(){return this._roomPreviewer}get catalogRoot(){return this._catalogService.catalogRoot}get activeTab(){return this._activeTab}get activeOffer(){return this._activeOffer}get activePage(){return this._catalogService.activePage}get activePageData(){return this._catalogService.activePageData}get purchaseOfferPage(){return this._purchaseOfferPage}get purchaseOffer(){return this._purchaseOffer}get giftOffer(){return this._purchaseGiftOffer}get showGiftConfigurator(){return this._showGiftConfigurator}makeGiftConfiguratorVisible(){this._showGiftConfigurator=!0}get purchaseOfferQuantity(){return this._purchaseOfferQuantity}get purchaseOfferExtra(){return this._purchaseOfferExtra}get purchaseCompleted(){return this._purchaseCompleted}get purchaseVipSubscription(){return this._purchaseVipSubscription}setInsufficientFunds(t){this._showInsufficientFunds=t}get showInsufficientFunds(){return this._showInsufficientFunds}handleSearchResults(t){this._catalogService.setSearchPage(t),this.setupLayout()}get iconUrl(){return null!=this._catalogService&&null!=this._catalogService.activePageData?_.a.instance.getConfiguration("catalog.asset.icon.url").replace(/%name%/gi,this._catalogService.activePageData.icon.toString()):""}get headerImageUrl(){if(null!==this.activePage){let t=_.a.instance.getConfiguration("catalog.asset.image.url");return t=t.replace("%name%",this.activePage.localization.images[0]),t}return""}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(m),i.Yb(ss),i.Yb(Qo),i.Yb(i.m),i.Yb(ql),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-catalog-main-component"]],viewQuery:function(t,e){if(1&t&&i.bd(em,1,i.Z),2&t){let t;i.Gc(t=i.oc())&&(e.layoutsContainer=t.first)}},inputs:{visible:"visible"},features:[i.Ib],decls:5,vars:5,consts:[["dragHandle","#catalogdrag","id","catalog",3,"bringToTop","draggable",4,"ngIf"],[3,"giftOffer","page","offer","quantity","extra","completed",4,"ngIf"],[3,"subscription",4,"ngIf"],[4,"ngIf"],["dragHandle","#catalogdrag","id","catalog",3,"bringToTop","draggable"],["id","catalogdrag"],[1,"ch-baslik"],[1,"old-kapat",3,"click"],[1,"old-bilgi"],[1,"magaza-body"],["class","catalog-menu",4,"ngIf"],[1,"ctlg-page-headinfo"],[1,"catalog_header",3,"ngStyle"],[1,"catalog_header-ico",3,"ngStyle"],[1,"catalog_header-title-text"],[1,"catalog_header-description-text"],[1,"catalog-lowerbody"],["class","catalog-leftbox",4,"ngIf"],[1,"catalog-rightbox"],["layoutsContainer",""],[1,"catalog-menu"],[4,"ngFor","ngForOf"],[1,"ctlgmenu-button",3,"ngClass","click"],[1,"catalog-leftbox"],["nitro-catalog-navigation-component",""],[3,"giftOffer","page","offer","quantity","extra","completed"],[3,"subscription"]],template:function(t,e){1&t&&(i.Tc(0,cm,21,13,"div",0),i.Tc(1,hm,1,6,"nitro-catalog-confirm-purchase-component",1),i.Tc(2,lm,1,1,"nitro-catalog-confirm-vip-subscription-component",2),i.Tc(3,um,1,0,"nitro-catalog-confirm-purchase-insufficient-funds",3),i.Tc(4,_m,1,0,"nitro-catalog-customize-gift-component",3)),2&t&&(i.xc("ngIf",e.visible),i.Kb(1),i.xc("ngIf",(null!==e.purchaseOffer||null!==e.giftOffer)&&!e.showGiftConfigurator),i.Kb(1),i.xc("ngIf",null!==e.purchaseVipSubscription),i.Kb(1),i.xc("ngIf",e.showInsufficientFunds),i.Kb(1),i.xc("ngIf",null!==e.giftOffer&&e.showGiftConfigurator))},encapsulation:2}),t})();var gm=s("VYTg");class mm{constructor(t,e,s){this._level=t,this._tileSize=e,this._name=s}get level(){return this._level}get tileSize(){return this._tileSize}get name(){return this._name}}const pm=["nitro-navigator-room-creator-component",""];function fm(t,e){if(1&t&&(i.dc(0,"option",23),i.Vc(1),i.rc(2,"translate"),i.cc()),2&t){const t=e.$implicit;i.xc("value",t.id),i.Kb(1),i.Wc(i.sc(2,2,t.name))}}function Em(t,e){if(1&t&&(i.dc(0,"option",23),i.Vc(1),i.cc()),2&t){const t=e.$implicit;i.xc("value",t),i.Kb(1),i.Wc(t)}}function Sm(t,e){if(1&t&&(i.dc(0,"option",23),i.Vc(1),i.rc(2,"translate"),i.cc()),2&t){const t=e.$implicit;i.xc("value",t.key),i.Kb(1),i.Wc(i.sc(2,2,t.value))}}const vm=function(t){return{rcactive:t}},bm=function(t){return{"background-image":t}};function Im(t,e){if(1&t){const t=i.ec();i.dc(0,"div",24),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().setRoomLayout(s.name)}),i.Zb(1,"div",25),i.dc(2,"div",26),i.Zb(3,"div",27),i.dc(4,"p",28),i.Vc(5),i.rc(6,"translate"),i.cc(),i.cc(),i.cc()}if(2&t){const t=e.$implicit,s=i.qc();i.xc("ngClass",i.Bc(6,vm,s.roomLayoutControl.value===t.name)),i.Kb(1),i.xc("ngStyle",i.Bc(8,bm,"url("+s.getRoomLayoutImageUrl(t.name)+")")),i.Kb(4),i.Yc("",t.tileSize," ",i.sc(6,4,"navigator.createroom.tilesize"),"")}}let Rm=(()=>{class t{constructor(t,e,s){this._navigatorService=t,this._activeModal=e,this._formBuilder=s,this._layouts=[],this._maxVisitors=[],this._tradeSettings=[],this._roomCreateListener=null}ngOnInit(){this.setRoomLayouts(),this.setMaxVisitors(50),this.setTradeSettings(),this.createForm(),this._roomCreateListener=new Jh.a(this.onRoomCreatedEvent.bind(this)),_.a.instance.communication.registerMessageEvent(this._roomCreateListener)}ngOnDestroy(){_.a.instance.communication.removeMessageEvent(this._roomCreateListener)}onRoomCreatedEvent(t){this.hide()}createForm(){let t=0;const e=this.categories[0];e&&(t=e.id),this._form=this._formBuilder.group({roomName:["",rr.u.required],roomDesc:[""],roomLayout:[this.layouts[0].name,rr.u.required],roomCategory:[t.toString(),rr.u.required],roomVisitors:[this.maxVisitors[0].toString(),rr.u.required],roomTrade:["0",rr.u.required]})}submit(){if(!this.form.valid)return;const t=this.roomNameControl.value,e=this.roomDescControl.value,s="model_"+this.roomLayoutControl.value,i=parseInt(this.roomCategoryControl.value),n=parseInt(this.roomVisitorsControl.value),r=parseInt(this.roomTradeControl.value);t&&""!==t&&_.a.instance.communication.connection.send(new gm.a(t,e,s,i,n,r))}hide(){this._activeModal.close()}setRoomLayouts(){this._layouts=[new mm(gt._Str_3159,104,"a"),new mm(gt._Str_3159,94,"b"),new mm(gt._Str_3159,36,"c"),new mm(gt._Str_3159,84,"d"),new mm(gt._Str_3159,80,"e"),new mm(gt._Str_3159,80,"f"),new mm(gt._Str_3159,416,"i"),new mm(gt._Str_3159,320,"j"),new mm(gt._Str_3159,448,"k"),new mm(gt._Str_3159,352,"l"),new mm(gt._Str_3159,384,"m"),new mm(gt._Str_3159,372,"n"),new mm(gt._Str_2964,80,"g"),new mm(gt._Str_2964,74,"h"),new mm(gt._Str_2964,416,"o"),new mm(gt._Str_2964,352,"p"),new mm(gt._Str_2964,304,"q"),new mm(gt._Str_2964,336,"r"),new mm(gt._Str_2964,748,"u"),new mm(gt._Str_2964,438,"v"),new mm(gt._Str_2575,540,"t"),new mm(gt._Str_2575,512,"w"),new mm(gt._Str_2575,396,"x"),new mm(gt._Str_2575,440,"y"),new mm(gt._Str_2575,456,"z"),new mm(gt._Str_2575,208,"0"),new mm(gt._Str_2575,1009,"1"),new mm(gt._Str_2575,1044,"2"),new mm(gt._Str_2575,183,"3"),new mm(gt._Str_2575,254,"4"),new mm(gt._Str_2575,1024,"5"),new mm(gt._Str_2575,801,"6"),new mm(gt._Str_2575,354,"7"),new mm(gt._Str_2575,888,"8"),new mm(gt._Str_2575,926,"9")]}setMaxVisitors(e){this._maxVisitors=[];let s=t.MAX_VISITOR_STEPPER;for(;s<=e;)this._maxVisitors.push(s),s+=t.MAX_VISITOR_INCREMENTOR}setTradeSettings(){this._tradeSettings=[],this._tradeSettings.push("${navigator.roomsettings.trade_not_allowed}","${navigator.roomsettings.trade_not_with_Controller}","${navigator.roomsettings.trade_allowed}")}setRoomLayout(t){const e=this.roomLayoutControl;e&&e.setValue(t)}getRoomLayoutImageUrl(t){let e=_.a.instance.getConfiguration("images.url");return e+=`/navigator/models/model_${t}.png`,e}get form(){return this._form}get categories(){return this._navigatorService.categories}get layouts(){return this._layouts}get maxVisitors(){return this._maxVisitors}get tradeSettings(){return this._tradeSettings}get roomNameControl(){return this._form.controls.roomName}get roomDescControl(){return this._form.controls.roomDesc}get roomLayoutControl(){return this._form.controls.roomLayout}get roomCategoryControl(){return this._form.controls.roomCategory}get roomVisitorsControl(){return this._form.controls.roomVisitors}get roomTradeControl(){return this._form.controls.roomTrade}get isLoading(){return!1}}return t.MAX_VISITOR_STEPPER=10,t.MAX_VISITOR_INCREMENTOR=5,t.\u0275fac=function(e){return new(e||t)(i.Yb(hl),i.Yb(Mu.a),i.Yb(rr.c))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-navigator-room-creator-component",""]],attrs:pm,decls:53,vars:35,consts:[["dragHandle","#roomcreatedrag","id","roomcreate",3,"bringToTop","draggable"],["id","roomcreatedrag"],[1,"rc-baslik"],[1,"old-kapat",3,"click"],[1,"roomcreatebox"],[1,"rcleft-box"],[3,"formGroup"],[1,"form-group",2,"margin-bottom","0rem"],[1,"rctxt"],["type","text","formControlName","roomName",1,"rc_roomname"],["formControlName","roomDesc",1,"rc_roomdesc"],["id","rccategory-select","formControlName","roomCategory",2,"background-image","url('/assets/images/rcoption.png')"],[3,"value",4,"ngFor","ngForOf"],["id","rccategory-select","formControlName","roomVisitors",2,"background-image","url('/assets/images/rcoption.png')"],["id","rccategory-select","formControlName","roomTrade",2,"background-image","url('/assets/images/rcoption.png')"],[1,"rcbuttonoptions"],[1,"rc-roomcreate",2,"outline","0",3,"disabled","click"],[1,"rc-buttontxt"],[1,"rc-roomcreate-close",2,"outline","0",3,"click"],[1,"rcright-box"],[1,"rctxt",2,"padding-bottom","3px"],[1,"rc-roomselect"],["class","rc-roomview",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"value"],[1,"rc-roomview",3,"ngClass","click"],[1,"rc-roomdetail",3,"ngStyle"],[1,"rc-roomkaro"],[1,"rico"],[1,"rc-karoinfo"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",3),i.nc("click",function(){return e.hide()}),i.cc(),i.cc(),i.dc(6,"div",4),i.dc(7,"div",5),i.dc(8,"form",6),i.dc(9,"div",7),i.dc(10,"p",8),i.Vc(11),i.rc(12,"translate"),i.cc(),i.Zb(13,"input",9),i.cc(),i.dc(14,"div",7),i.dc(15,"p",8),i.Vc(16),i.rc(17,"translate"),i.cc(),i.Zb(18,"textarea",10),i.cc(),i.dc(19,"div",7),i.dc(20,"p",8),i.Vc(21),i.rc(22,"translate"),i.cc(),i.dc(23,"select",11),i.Tc(24,fm,3,4,"option",12),i.cc(),i.cc(),i.dc(25,"div",7),i.dc(26,"p",8),i.Vc(27),i.rc(28,"translate"),i.cc(),i.dc(29,"select",13),i.Tc(30,Em,2,2,"option",12),i.cc(),i.cc(),i.dc(31,"div",7),i.dc(32,"p",8),i.Vc(33),i.rc(34,"translate"),i.cc(),i.dc(35,"select",14),i.Tc(36,Sm,3,4,"option",12),i.rc(37,"keyvalue"),i.cc(),i.cc(),i.cc(),i.dc(38,"div",15),i.dc(39,"button",16),i.nc("click",function(){return e.submit()}),i.dc(40,"p",17),i.Vc(41),i.rc(42,"translate"),i.cc(),i.cc(),i.dc(43,"button",18),i.nc("click",function(){return e.hide()}),i.dc(44,"p",17),i.Vc(45),i.rc(46,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(47,"div",19),i.dc(48,"p",20),i.Vc(49),i.rc(50,"translate"),i.cc(),i.dc(51,"div",21),i.Tc(52,Im,7,10,"div",22),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(i.sc(4,15,"navigator.createroom.title")),i.Kb(5),i.xc("formGroup",e.form),i.Kb(3),i.Wc(i.sc(12,17,"navigator.createroom.roomnameinfo")),i.Kb(5),i.Wc(i.sc(17,19,"navigator.createroom.roomdescinfo")),i.Kb(5),i.Wc(i.sc(22,21,"navigator.category")),i.Kb(3),i.xc("ngForOf",e.categories),i.Kb(3),i.Wc(i.sc(28,23,"navigator.maxvisitors")),i.Kb(3),i.xc("ngForOf",e.maxVisitors),i.Kb(3),i.Wc(i.sc(34,25,"navigator.tradesettings")),i.Kb(3),i.xc("ngForOf",i.sc(37,27,e.tradeSettings)),i.Kb(3),i.xc("disabled",e.form.pristine||e.form.invalid),i.Kb(2),i.Wc(i.sc(42,29,"navigator.createroom.create")),i.Kb(4),i.Wc(i.sc(46,31,"generic.cancel")),i.Kb(4),i.Wc(i.sc(50,33,"navigator.createroom.chooselayoutcaption")),i.Kb(3),i.xc("ngForOf",e.layouts))},directives:[Tr,Lr,rr.w,rr.m,rr.g,rr.b,rr.l,rr.f,rr.t,p.m,rr.o,rr.v,p.l,p.o],pipes:[ln,p.h],encapsulation:2}),t})();const Tm=["nitro-navigator-room-doorbell-component",""];function Om(t,e){if(1&t&&(i.dc(0,"p",10),i.Vc(1),i.cc()),2&t){const t=i.qc();i.Kb(1),i.Wc(t.room.roomName)}}function ym(t,e){1&t&&(i.dc(0,"p",11),i.Vc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Wc(i.sc(2,1,"navigator.doorbell.info")))}function Cm(t,e){1&t&&(i.dc(0,"p",11),i.Vc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Wc(i.sc(2,1,"navigator.doorbell.waiting")))}function Am(t,e){1&t&&(i.dc(0,"p",11),i.Vc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Wc(i.sc(2,1,"navigator.doorbell.no.answer")))}function Mm(t,e){if(1&t){const t=i.ec();i.dc(0,"div",12),i.nc("click",function(){return i.Kc(t),i.qc().ring()}),i.dc(1,"p",13),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()}2&t&&(i.Kb(2),i.Wc(i.sc(3,1,"navigator.doorbell.button.ring")))}let wm=(()=>{class t{constructor(t,e){this._navigatorService=t,this._activeModal=e,this.room=null,this.isWaiting=!1,this.noAnswer=!1}ring(){!this.room||this.isWaiting||this.noAnswer||(this._navigatorService.goToRoom(this.room.roomId),this.hide())}close(){this._navigatorService.component.closeRoomDoorbell(),this.isWaiting&&_.a.instance.communication.connection.send(new $h.a)}hide(){this._activeModal.close()}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(hl),i.Yb(Mu.a))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-navigator-room-doorbell-component",""]],inputs:{room:"room",isWaiting:"isWaiting",noAnswer:"noAnswer"},attrs:Tm,decls:16,vars:11,consts:[["id","kapizilical","dragHandle","#kapizili-head",3,"bringToTop","draggable"],["id","kapizili-head"],[1,"kapizilihood"],[1,"old-kapat",3,"click"],[1,"kapizilibox"],["class","kapizili-roomname",4,"ngIf"],["class","kapizili-roomdesc",4,"ngIf"],[1,"kapizili-buttonbox"],[1,"kapizili-iptalet",3,"click"],["class","kapizili-odayagir",3,"click",4,"ngIf"],[1,"kapizili-roomname"],[1,"kapizili-roomdesc"],[1,"kapizili-odayagir",3,"click"],[1,"kapizili-butontxt"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",3),i.nc("click",function(){return e.close()}),i.cc(),i.cc(),i.dc(6,"div",4),i.Tc(7,Om,2,1,"p",5),i.Tc(8,ym,3,3,"p",6),i.Tc(9,Cm,3,3,"p",6),i.Tc(10,Am,3,3,"p",6),i.dc(11,"div",7),i.dc(12,"div",8),i.nc("click",function(){return e.close()}),i.Vc(13),i.rc(14,"translate"),i.cc(),i.Tc(15,Mm,4,3,"div",9),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(i.sc(4,7,"navigator.doorbell.title")),i.Kb(4),i.xc("ngIf",e.room),i.Kb(1),i.xc("ngIf",!e.isWaiting&&!e.noAnswer),i.Kb(1),i.xc("ngIf",e.isWaiting&&!e.noAnswer),i.Kb(1),i.xc("ngIf",e.noAnswer),i.Kb(3),i.Wc(i.sc(14,9,"generic.cancel")),i.Kb(2),i.xc("ngIf",!e.isWaiting&&!e.noAnswer))},directives:[Tr,Lr,p.n],pipes:[ln],encapsulation:2}),t})();const Dm=["nitro-navigator-room-password-component",""];function Nm(t,e){if(1&t&&(i.dc(0,"p",14),i.Vc(1),i.cc()),2&t){const t=i.qc();i.Kb(1),i.Wc(t.room.roomName)}}function Um(t,e){1&t&&(i.dc(0,"p",15),i.Vc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Wc(i.sc(2,1,"navigator.password.info")))}function xm(t,e){1&t&&(i.dc(0,"p",15),i.Vc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Wc(i.sc(2,1,"navigator.password.retryinfo")))}let Lm=(()=>{class t{constructor(t,e){this._navigatorService=t,this._activeModal=e,this.room=null,this.isWrongPassword=!1,this.password=""}tryPassword(){this.room&&this.password&&(this._navigatorService.goToRoom(this.room.roomId,this.password),this.hide())}close(){this._navigatorService.component.closeRoomPassword()}hide(){this._activeModal.close()}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(hl),i.Yb(Mu.a))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-navigator-room-password-component",""]],inputs:{room:"room",isWrongPassword:"isWrongPassword"},attrs:Dm,decls:23,vars:16,consts:[["id","kapizilical","dragHandle","#kapizili-head",3,"bringToTop","draggable"],["id","kapizili-head"],[1,"kapizilihood"],[1,"old-kapat",3,"click"],[1,"kapizilibox"],["class","kapizili-roomname",4,"ngIf"],["class","kapizili-roomdesc",4,"ngIf"],[1,"kapizili-sifrebox"],[1,"parolagir-txt"],["autocomplete","new-password","type","password","placeholder","*****",1,"sifreboxinput",3,"ngModel","ngModelChange"],[1,"kapizili-buttonbox"],[1,"kapizili-iptalet",3,"click"],[1,"kapizili-odayagir",3,"click"],[1,"kapizili-butontxt"],[1,"kapizili-roomname"],[1,"kapizili-roomdesc"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",3),i.nc("click",function(){return e.close()}),i.cc(),i.cc(),i.dc(6,"div",4),i.Tc(7,Nm,2,1,"p",5),i.Tc(8,Um,3,3,"p",6),i.Tc(9,xm,3,3,"p",6),i.dc(10,"div",7),i.dc(11,"p",8),i.Vc(12),i.rc(13,"translate"),i.cc(),i.dc(14,"input",9),i.nc("ngModelChange",function(t){return e.password=t}),i.cc(),i.cc(),i.dc(15,"div",10),i.dc(16,"div",11),i.nc("click",function(){return e.close()}),i.Vc(17),i.rc(18,"translate"),i.cc(),i.dc(19,"div",12),i.nc("click",function(){return e.tryPassword()}),i.dc(20,"p",13),i.Vc(21),i.rc(22,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(i.sc(4,8,"navigator.password.title")),i.Kb(4),i.xc("ngIf",e.room),i.Kb(1),i.xc("ngIf",!e.isWrongPassword),i.Kb(1),i.xc("ngIf",e.isWrongPassword),i.Kb(3),i.Wc(i.sc(13,10,"navigator.password.enter")),i.Kb(2),i.xc("ngModel",e.password),i.Kb(3),i.Wc(i.sc(18,12,"generic.cancel")),i.Kb(4),i.Wc(i.sc(22,14,"navigator.password.button.try")))},directives:[Tr,Lr,p.n,rr.b,rr.l,rr.n],pipes:[ln],encapsulation:2}),t})();const Pm=function(t){return{navactive:t}};function Fm(t,e){if(1&t){const t=i.ec();i.dc(0,"div",18),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc(2).setCurrentContext(s)}),i.Vc(1),i.rc(2,"translate"),i.cc()}if(2&t){const t=e.$implicit,s=i.qc(2);i.xc("ngClass",i.Bc(4,Pm,s.topLevelContext===t)),i.Kb(1),i.Wc(i.sc(2,2,"navigator.toplevelview."+t.code))}}function km(t,e){1&t&&i.Zb(0,"div",19),2&t&&i.xc("result",e.$implicit)}function Vm(t,e){if(1&t){const t=i.ec();i.dc(0,"div",2),i.dc(1,"div",3),i.dc(2,"p",4),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",5),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.cc(),i.Zb(6,"div",6),i.cc(),i.dc(7,"div",7),i.Zb(8,"div",8),i.Tc(9,Fm,3,6,"div",9),i.cc(),i.Zb(10,"div",10),i.dc(11,"div",11),i.Tc(12,km,1,1,"div",12),i.cc(),i.dc(13,"div",13),i.dc(14,"div",14),i.nc("click",function(){return i.Kc(t),i.qc().openRoomCreator()}),i.dc(15,"p",15),i.Vc(16),i.rc(17,"translate"),i.cc(),i.cc(),i.dc(18,"div",16),i.dc(19,"p",15),i.Vc(20),i.rc(21,"translate"),i.cc(),i.cc(),i.cc(),i.Zb(22,"div",17),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.sc(4,5,t.isLoading?"navigator.title.is.busy":"navigator.title")),i.Kb(6),i.xc("ngForOf",t.topLevelContexts),i.Kb(3),i.xc("ngForOf",t.lastSearchResults),i.Kb(4),i.Wc(i.sc(17,7,"navigator.createroom.create")),i.Kb(4),i.Wc(i.sc(21,9,"navigator.createevent"))}}function Bm(t,e){1&t&&i.Zb(0,"nitro-navigator-room-info-component")}let Wm=(()=>{class t{constructor(t,e,s){this._settingsService=t,this._navigatorService=e,this._modalService=s,this.visible=!1}ngOnInit(){this._navigatorService.component=this,a(function(){let t=a("#navigator").height(),e=a("#navigator").width();setInterval(function(){let s=a("#navigator").height(),i=a("#navigator").width();t==s&&e==i||(console.log("Navigator resized"),a("#navigator").height(),a(".nav-oda-liste").css("height",a("#navigator").height()-197+"px"),t=s,e=i)},1)})}ngOnChanges(t){const e=t.visible.currentValue;e&&e!==t.visible.previousValue&&this.prepareNavigator()}ngOnDestroy(){this._roomCreatorModal&&this._roomCreatorModal.close(),this._navigatorService.component=null}prepareNavigator(){this._navigatorService.isLoaded?this._navigatorService.search():this._navigatorService.loadNavigator()}setCurrentContext(t){this._navigatorService.setCurrentContext(t),this._navigatorService.clearSearch()}hide(){this._settingsService.hideNavigator()}openRoomCreator(){this._roomCreatorModal||(this._roomCreatorModal=this._modalService.open(Rm,{backdrop:"static",size:"lg",centered:!0,keyboard:!1}),this._roomCreatorModal&&this._roomCreatorModal.result.then(()=>this._roomCreatorModal=null))}openRoomDoorbell(t,e=!1,s=!1){this._roomPasswordModal&&this._roomPasswordModal.close(),t||(t=this._lastRoom),this._lastRoom=t;let i=this._roomDoorbellModal;if(i||(i=this._roomDoorbellModal=this._modalService.open(wm,{backdrop:"static",size:"sm",centered:!0,keyboard:!1}),i.result.then(()=>this._roomDoorbellModal=null)),this._roomDoorbellModal=i,this._roomDoorbellModal){const n=i.componentInstance;n&&(n.room=t,n.isWaiting=e,n.noAnswer=s)}}closeRoomDoorbell(){this._roomDoorbellModal&&(this._roomDoorbellModal.close(),this._lastRoom=null)}openRoomPassword(t,e=!1){this._roomDoorbellModal&&this._roomDoorbellModal.close(),t||(t=this._lastRoom),this._lastRoom=t;let s=this._roomPasswordModal;if(s||(s=this._roomPasswordModal=this._modalService.open(Lm,{backdrop:"static",size:"sm",centered:!0,keyboard:!1}),s.result.then(()=>this._roomPasswordModal=null)),this._roomPasswordModal=s,this._roomPasswordModal){const i=s.componentInstance;if(!i)return;i.room=t,i.isWrongPassword=e}}closeRoomPassword(){this._roomPasswordModal&&(this._roomPasswordModal.close(),this._lastRoom=null)}get topLevelContext(){return this._navigatorService&&this._navigatorService.topLevelContext||null}get topLevelContexts(){return this._navigatorService&&this._navigatorService.topLevelContexts||null}get lastSearchResults(){return this._navigatorService.lastSearchResults}get isLoading(){return this._navigatorService&&(this._navigatorService.isLoading||this._navigatorService.isSearching)}get sliderVisible(){return _.a.instance.core.configuration.getValue("navigator.slider.enabled")}get roomInfoShowing(){return this._navigatorService.roomInfoShowing}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(m),i.Yb(hl),i.Yb(Mu.g))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-navigator-main-component"]],inputs:{visible:"visible"},features:[i.Ib],decls:3,vars:2,consts:[["dragHandle","#navigatordrag","id","navigator",3,"bringToTop","draggable",4,"ngIf"],[4,"ngIf"],["dragHandle","#navigatordrag","id","navigator",3,"bringToTop","draggable"],["id","navigatordrag"],[1,"nh-baslik"],[1,"old-kapat",3,"click"],[1,"old-bilgi"],[1,"navigator-menu"],[1,"ex"],["class","navmenu-button",3,"ngClass","click",4,"ngFor","ngForOf"],["nitro-navigator-search-component",""],[1,"nav-oda-liste"],["class","mb-1","nitro-navigator-search-result-component","",3,"result",4,"ngFor","ngForOf"],[1,"nav-bottom-buttons"],[1,"oldnav-roomcreate",3,"click"],[1,"roomcreate-hood"],[1,"oldnav-roompromos"],[1,"box-height-adjustment"],[1,"navmenu-button",3,"ngClass","click"],["nitro-navigator-search-result-component","",1,"mb-1",3,"result"]],template:function(t,e){1&t&&(i.Tc(0,Vm,23,11,"div",0),i.Tc(1,Bm,1,0,"nitro-navigator-room-info-component",1),i.Zb(2,"nitro-navigator-roomsettings-component")),2&t&&(i.xc("ngIf",e.visible),i.Kb(1),i.xc("ngIf",e.roomInfoShowing))},encapsulation:2}),t})();var Km=s("5RE+"),Gm=s("ulbO"),Hm=s("9loD"),jm=s("5Cat"),zm=s("Bbk2"),Ym=s("J0cl"),qm=s("bmkm"),Zm=s("k0R1");class Xm{constructor(t){this._locked=!1,this._id=t.itemId,this._type=t.spriteId,this._ref=t.ref,this._category=t.category,this._groupable=t.isGroupable&&!t.rentable,this._tradeable=t.tradable,this._recyclable=t.isRecycleable,this._sellable=t.sellable,this._stuffData=t.stuffData,this._extra=t._Str_2794,this._secondsToExpiration=t.secondsToExpiration,this._expirationTimeStamp=t._Str_10616,this._hasRentPeriodStarted=t.hasRentPeriodStarted,this._creationDay=t._Str_8932,this._creationMonth=t._Str_9050,this._creationYear=t._Str_9408,this._slotId=t.slotId,this._songId=t._Str_3951,this._flatId=t.flatId,this._isRented=t.rentable,this._isWallItem=t.isWallItem}get rentable(){return this._isRented}get id(){return this._id}get ref(){return this._ref}get category(){return this._category}get type(){return this._type}get stuffData(){return this._stuffData}set stuffData(t){this._stuffData=t}get extra(){return this._extra}get _Str_16260(){return this._recyclable}get isTradable(){return this._tradeable}get isGroupable(){return this._groupable}get sellable(){return this._sellable}get secondsToExpiration(){if(-1===this._secondsToExpiration)return-1;let t=-1;return this._hasRentPeriodStarted?(t=this._secondsToExpiration-(_.a.instance.time-this._expirationTimeStamp)/1e3,t<0&&(t=0)):t=this._secondsToExpiration,t}get _Str_8932(){return this._creationDay}get _Str_9050(){return this._creationMonth}get _Str_9408(){return this._creationYear}get slotId(){return this._slotId}get _Str_3951(){return this._songId}get locked(){return this._locked}set locked(t){this._locked=t}get flatId(){return this._flatId}get isWallItem(){return this._isWallItem}get hasRentPeriodStarted(){return this._hasRentPeriodStarted}get _Str_10616(){return this._expirationTimeStamp}update(t){this._type=t.spriteId,this._ref=t.ref,this._category=t.category,this._groupable=t.isGroupable&&!t.rentable,this._tradeable=t.tradable,this._recyclable=t.isRecycleable,this._sellable=t.sellable,this._stuffData=t.stuffData,this._extra=t._Str_2794,this._secondsToExpiration=t.secondsToExpiration,this._expirationTimeStamp=t._Str_10616,this._hasRentPeriodStarted=t.hasRentPeriodStarted,this._creationDay=t._Str_8932,this._creationMonth=t._Str_9050,this._creationYear=t._Str_9408,this._slotId=t.slotId,this._songId=t._Str_3951,this._flatId=t.flatId,this._isRented=t.rentable,this._isWallItem=t.isWallItem}}let Qm=(()=>{class t{constructor(t,e,s,i,n){this._Str_18094=1,this._Str_18535=.2,this._type=t,this._category=e,this._roomEngine=s,this._stuffData=i,this._extra=n,this._isWallItem=!1,this._iconUrl=null,this._name=null,this._description=null,this._locked=!1,this._selected=!1,this._hasUnseenItems=!1,this._items=new Bs.a}prepareGroup(){this.setIcon(),this.setName(),this.setDescription()}dispose(){}getItemByIndex(t){return this._items.getWithIndex(t)}getItemById(t){return this._items.getValue(t)}getTradeItems(t){const e=[],s=this.getLastItem();if(!s)return e;let i=0,n=0;for(;n<this._items.length&&!(i>=t);){const t=this.getItemByIndex(n);!t.locked&&t.isTradable&&t.type===s.type&&(e.push(t),i++),n++}return e}push(t,e=!1){const s=this._items.getValue(t.id);s?s.locked=!1:this._items.add(t.id,t),1===this._items.length&&this.prepareGroup()}pop(){let t=null;return this._items.length>0&&(t=this._items.getWithIndex(this._items.length-1),this._items.remove(t.id)),t}remove(t){const e=this._items.getValue(t);return e?(this._items.remove(t),e):null}getTotalCount(){if(this._category===Ka._Str_12351){let t=0,e=0;for(;e<this._items.length;){const s=this._items.getWithIndex(e);t+=parseInt(s.stuffData.getLegacyString()),e++}return t}return this._items.length}getUnlockedCount(){if(this.category===Ka._Str_12351)return this.getTotalCount();let t=0,e=0;for(;e<this._items.length;)this._items.getWithIndex(e).locked||t++,e++;return t}getLastItem(){return this._items.length?this._items.getWithIndex(this._items.length-1):null}unlockAllItems(){if(this._items.length)for(const t of this._items.getValues())t&&t.locked&&(t.locked=!1)}lockItemIds(t){for(const e of this._items.getValues()){const s=t.indexOf(e.ref)>=0;e.locked!==s&&(e.locked=s)}}setName(){const t=this.getLastItem();if(!t)return void(this._name="");let e="";switch(this._category){case Ka._Str_5186:e="poster_"+t.stuffData.getLegacyString()+"_name";break;case Ka._Str_9125:return void(this._name="SONG_NAME");default:e=this.isWallItem?"wallItem.name."+t.type:"roomItem.name."+t.type}this._name=_.a.instance.getLocalization(e)}setDescription(){this._description=""}setIcon(){if(this._iconUrl)return;let t=null;t=this.isWallItem?this._roomEngine.getFurnitureWallIconUrl(this._type,this._stuffData.getLegacyString()):this._roomEngine.getFurnitureFloorIconUrl(this._type),t&&(this._iconUrl=t)}get type(){return this._type}get category(){return this._category}get stuffData(){return this._stuffData}get extra(){return this._extra}get iconUrl(){return this._iconUrl}get name(){return this._name}get description(){return this._description}get hasUnseenItems(){return this._hasUnseenItems}set hasUnseenItems(t){this._hasUnseenItems=t}get locked(){return this._locked}set locked(t){this._locked=t}get selected(){return this._selected}set selected(t){this._selected=t}get isWallItem(){const t=this.getItemByIndex(0);return!!t&&t.isWallItem}get isGroupable(){const t=this.getItemByIndex(0);return!!t&&t.isGroupable}get items(){return this._items}}return t.INVENTORY_THUMB_XML="inventory_thumb_xml",t._Str_4072=13421772,t._Str_4169=10275685,t})(),Jm=(()=>{class t{constructor(t,e){this._inventoryService=t,this._ngZone=e,this._messages=[],this._furniMsgFragments=null,this._groupItems=[],this._search="",this._searchType="",this._itemIdInFurniPlacing=-1,this._isObjectMoverRequested=!1,this._isInitialized=!1,this._needsUpdate=!1,this.onRoomEngineObjectPlacedEvent=this.onRoomEngineObjectPlacedEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{_.a.instance.roomEngine.events.addEventListener(v.a.PLACED,this.onRoomEngineObjectPlacedEvent),this._messages=[new Km.a(this.onFurnitureListAddOrUpdateEvent.bind(this)),new Gm.a(this.onFurnitureListEvent.bind(this)),new Hm.a(this.onFurnitureListInvalidateEvent.bind(this)),new jm.a(this.onFurnitureListRemovedEvent.bind(this)),new zm.a(this.onFurniturePostItPlacedEvent.bind(this))];for(const t of this._messages)_.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{_.a.instance.roomEngine.events.removeEventListener(v.a.PLACED,this.onRoomEngineObjectPlacedEvent);for(const t of this._messages)_.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomEngineObjectPlacedEvent(t){t&&this._isObjectMoverRequested&&t.type===v.a.PLACED&&(this._isObjectMoverRequested=!1,t._Str_4057||this._ngZone.run(()=>this._inventoryService.showWindow()))}onFurnitureListAddOrUpdateEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=e.items;this._ngZone.run(()=>{for(const t of s){const e=this.getGroupItemForFurnitureId(t.itemId);if(e){const s=e.getItemById(t.itemId);s&&(s.update(t),e.hasUnseenItems=!0)}else{const e=new Xm(t);this.addFurnitureItem(e,!1)}}})}onFurnitureListEvent(t){if(!t)return;const e=t.getParser();if(!e)return;this._furniMsgFragments||(this._furniMsgFragments=new Array(e.totalFragments));const s=new Map([...e.fragment]),i=this.mergeFragments(s,e.totalFragments,e.fragmentNumber,this._furniMsgFragments);i&&(this._ngZone.run(()=>this.processFragment(i)),this._furniMsgFragments=null)}onFurnitureListInvalidateEvent(t){t&&t.getParser()&&(this._inventoryService.furnitureVisible?this.requestLoad():this._needsUpdate=!0)}onFurnitureListRemovedEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this.removeItemById(e.itemId)&&this.setAllFurnitureSeen()})}onFurniturePostItPlacedEvent(t){t&&t.getParser()}mergeFragments(t,e,s,i){if(1===e)return t;i[s]=t;for(const r of i)if(!r)return null;const n=new Map;for(const r of i){for(const[t,e]of r)n.set(t,e);r.clear()}return i=null,n}processFragment(e){const s=this.getAllItemIds(),i=[],n=[];for(const t of e.keys())-1===s.indexOf(t)&&i.push(t);for(const t of s)e.get(t)||n.push(t);const r=0===s.length;for(const t of n)this.removeItemById(t);for(const t of i){const s=e.get(t);if(!s)continue;const i=new Xm(s);this.addFurnitureItem(i,!0)}r||i.length&&this._inventoryService.updateItemLocking(),i.length&&this._inventoryService.furniController&&(this._inventoryService.furniController.paginateConfig.currentPage=1),this._isInitialized=!0,this._inventoryService.events.next(t.INVENTORY_UPDATED),this._inventoryService.furniController&&this._inventoryService.furniController.selectExistingGroupOrDefault()}getAllItemIds(){const t=[];for(const e of this._groupItems){let s=e.getTotalCount();e.category===Ka._Str_12351&&(s=1);let i=0;for(;i<s;)t.push(e.getItemByIndex(i).id),i++}return t}getFurnitureItem(t){for(const e of this._groupItems){if(!e)continue;const s=e.getItemById(t);if(s)return s}return null}addFurnitureItem(t,e){let s=null;s=t.isGroupable?this.addGroupableFurnitureItem(t,e):this.addSingleFurnitureItem(t,e),e||(s.hasUnseenItems=!0)}addSingleFurnitureItem(t,e){const s=[];for(const r of this._groupItems)r.type===t.type&&s.push(r);for(const r of s)if(r.getItemById(t.id))return r;const i=this.isFurnitureUnseen(t),n=this.createGroupItem(t.type,t.category,t.stuffData,t.extra,e);return n.push(t,i),i?(n.hasUnseenItems=!0,this.unshiftGroupitem(n)):this.pushGroupItem(n),n}addGroupableFurnitureItem(t,e){let s=null;for(const n of this._groupItems)if(n.type===t.type&&n.isWallItem==t.isWallItem&&n.isGroupable)if(t.category===Ka._Str_5186){if(n.stuffData.getLegacyString()===t.stuffData.getLegacyString()){s=n;break}}else{if(t.category!==Ka._Str_12454){s=n;break}if(t.stuffData.compare(n.stuffData)){s=n;break}}const i=this.isFurnitureUnseen(t);return s?(s.push(t,i),i&&(s.hasUnseenItems=!0,this.removeAndUnshiftGroupitem(s)),s):(s=this.createGroupItem(t.type,t.category,t.stuffData,t.extra,e),s.push(t,i),i?(s.hasUnseenItems=!0,this.unshiftGroupitem(s)):this.pushGroupItem(s),s)}createGroupItem(t,e,s,i=NaN,n=!1){return new Qm(t,e,_.a.instance.roomEngine,s,i)}removeItemById(t){let e=0;for(;e<this._groupItems.length;){const s=this._groupItems[e],i=s.remove(t);if(i)return this._itemIdInFurniPlacing===i.ref&&(this.cancelRoomObjectPlacement(),this.attemptItemPlacement()||this._inventoryService.showWindow()),s.getTotalCount()<=0&&(this._groupItems.splice(e,1),s.dispose()),s;e++}return null}isFurnitureUnseen(t){let e=0;return e=t.rentable?pa.RENTABLE:pa.FURNI,this._inventoryService.unseenTracker._Str_3613(e,t.id)}setAllFurnitureSeen(){this._inventoryService.unseenTracker._Str_8813(pa.FURNI);for(const t of this._groupItems)t.hasUnseenItems&&(t.hasUnseenItems=!1);this._inventoryService.updateUnseenCount()}attemptItemPlacement(t=!1){const e=this.getSelectedGroup();if(!e)return!1;if(!e.getUnlockedCount())return!1;const s=e.getLastItem();if(!s)return!1;if(s.category===Ka._Str_3683||s.category===Ka._Str_3639||s.category===Ka._Str_3432){if(t)return!1;_.a.instance.communication.connection.send(new qm.a(s.id))}else this._inventoryService.hideWindow(),this.startRoomObjectPlacement(s);return!0}startRoomObjectPlacementWithoutRequest(t){let e=0,s=!1;return e=t.isWallItem?V.a.WALL:V.a.FLOOR,s=t.category===Ka._Str_5186?_.a.instance.roomEngine.processRoomObjectPlacement(Zm.a.INVENTORY,t.id,e,t.type,t.stuffData.getLegacyString()):_.a.instance.roomEngine.processRoomObjectPlacement(Zm.a.INVENTORY,t.id,e,t.type,t.extra.toString(),t.stuffData),s}startRoomObjectPlacement(t){let e=0,s=!1;e=t.isWallItem?V.a.WALL:V.a.FLOOR,s=t.category===Ka._Str_5186?_.a.instance.roomEngine.processRoomObjectPlacement(Zm.a.INVENTORY,t.id,e,t.type,t.stuffData.getLegacyString()):_.a.instance.roomEngine.processRoomObjectPlacement(Zm.a.INVENTORY,t.id,e,t.type,t.extra.toString(),t.stuffData),s&&(this._itemIdInFurniPlacing=t.ref,this.setObjectMoverRequested(!0))}cancelRoomObjectPlacement(){this._itemIdInFurniPlacing>-1&&(_.a.instance.roomEngine.cancelRoomObjectPlacement(),this.setObjectMoverRequested(!1),this._itemIdInFurniPlacing=-1)}getGroupItemForFurnitureId(t){for(const e of this._groupItems)if(e.getItemById(t))return e;return null}getSelectedGroup(){for(const t of this._groupItems)if(t&&t.selected)return t;return null}unshiftGroupitem(t){this._groupItems.unshift(t)}pushGroupItem(t){this._groupItems.push(t)}removeGroupItem(t){const e=this._groupItems.indexOf(t);e>-1&&this._groupItems.splice(e,1)}removeAndUnshiftGroupitem(t){this.removeGroupItem(t),this.unshiftGroupitem(t)}unlockAllItems(){for(const t of this._groupItems)t.unlockAllItems()}unselectAllGroupItems(){for(const t of this._groupItems)t.selected=!1}requestLoad(){this._needsUpdate=!1,_.a.instance.communication.connection.send(new Ym.a)}setObjectMoverRequested(t){this._isObjectMoverRequested!==t&&this._ngZone.run(()=>this._isObjectMoverRequested=t)}get controller(){return this._inventoryService.controller}get isInitalized(){return this._isInitialized}get needsUpdate(){return this._needsUpdate}get groupItems(){return this._groupItems}get isObjectMoverRequested(){return this._isObjectMoverRequested}get search(){return this._search}set search(t){this._search=t}get searchType(){return this._searchType}set searchType(t){this._searchType=t}}return t.INVENTORY_UPDATED="IFS_INVENTORY_UPDATED",t.SELECT_FIRST_GROUP="IFS_SELECT_FIRST_GROUP",t.SELECT_EXISTING_GROUP_DEFAULT="IFS_SELECT_EXISTING_GROUP_DEFAULT",t.\u0275fac=function(e){return new(e||t)(i.kc(Sa),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();var $m=s("qexY"),tp=s("feea"),ep=s("01lY"),sp=s("WjEe");class ip{constructor(t){this._botData=t,this._selected=!1,this._isUnseen=!1}get id(){return this._botData.id}get botData(){return this._botData}get selected(){return this._selected}set selected(t){this._selected=t}get isUnseen(){return this._isUnseen}set isUnseen(t){this._isUnseen=t}}let np=(()=>{class t{constructor(t,e){this._inventoryService=t,this._ngZone=e,this._messages=[],this._bots=new Bs.a,this._botIdInBotPlacing=-1,this._isObjectMoverRequested=!1,this._isInitialized=!1,this._needsUpdate=!1,this.onRoomEngineObjectPlacedEvent=this.onRoomEngineObjectPlacedEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{_.a.instance.roomEngine.events.addEventListener(v.a.PLACED,this.onRoomEngineObjectPlacedEvent),this._messages=[new tp.a(this.onBotInventoryMessageEvent.bind(this)),new ep.a(this.onBotRemovedFromInventoryEvent.bind(this)),new $m.a(this.onBotAddedToInventoryEvent.bind(this))];for(const t of this._messages)_.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{_.a.instance.roomEngine.events.removeEventListener(v.a.PLACED,this.onRoomEngineObjectPlacedEvent);for(const t of this._messages)_.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomEngineObjectPlacedEvent(t){t&&this._isObjectMoverRequested&&t.type===v.a.PLACED&&(this._isObjectMoverRequested=!1,t._Str_4057||this._ngZone.run(()=>this._inventoryService.showWindow()))}onBotInventoryMessageEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{for(const t of e.items.values())this.addSingleBotItem(t);this._isInitialized=!0,this._inventoryService.botsController&&this._inventoryService.botsController.selectExistingGroupOrDefault()})}onBotRemovedFromInventoryEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>this.removeItemById(e.itemId))}onBotAddedToInventoryEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{const t=this.addSingleBotItem(e.item);t&&(t.isUnseen=!0)})}getAllItemIds(){const t=[];for(const e of this._bots.getValues())t.push(e.id);return t}getBotItem(t){return this._bots.getValue(t)||null}addSingleBotItem(t){this._bots||(this._bots=new Bs.a);const e=new ip(t);return this.isBotUnseen(t)?(e.isUnseen=!0,this.unshiftBotItem(e)):this.pushBotItem(e),e}removeItemById(t){if(!this._bots.length)return null;const e=this._bots.remove(t);return e?(this._botIdInBotPlacing===e.id&&(this.cancelRoomObjectPlacement(),this._inventoryService.showWindow()),e):null}isBotUnseen(t){return this._inventoryService.unseenTracker._Str_3613(pa.BOT,t.id)}setAllBotsSeen(){this._inventoryService.unseenTracker._Str_8813(pa.BOT);for(const t of this._bots.getValues())t.isUnseen&&(t.isUnseen=!1);this._inventoryService.updateUnseenCount()}attemptBotPlacement(t=!1){const e=this.getSelectedBot();if(!e)return!1;const s=e.botData;if(!s)return!1;const i=_.a.instance.roomSessionManager.getSession(1);return!(!i||!i.isRoomOwner||(this._inventoryService.hideWindow(),this.startRoomObjectPlacement(s),0))}startRoomObjectPlacement(t){_.a.instance.roomEngine.processRoomObjectPlacement(Zm.a.INVENTORY,-t.id,V.a.UNIT,W.a.RENTABLE_BOT,t.figure)&&(this._botIdInBotPlacing=t.id,this.setObjectMoverRequested(!0))}cancelRoomObjectPlacement(){this._botIdInBotPlacing>-1&&(_.a.instance.roomEngine.cancelRoomObjectPlacement(),this.setObjectMoverRequested(!1),this._botIdInBotPlacing=-1)}getSelectedBot(){for(const t of this._bots.getValues())if(t&&t.selected)return t;return null}unshiftBotItem(t){this._bots.unshift(t.id,t)}pushBotItem(t){this._bots.add(t.id,t)}removeBotItem(t){this._bots.remove(t.id)}removeAndUnshiftGroupitem(t){this.removeBotItem(t),this.unshiftBotItem(t)}unselectAllBotItems(){for(const t of this._bots.getValues())t.selected=!1}requestLoad(){this._needsUpdate=!1,_.a.instance.communication.connection.send(new sp.a)}setObjectMoverRequested(t){this._isObjectMoverRequested!==t&&this._ngZone.run(()=>this._isObjectMoverRequested=t)}get controller(){return this._inventoryService.controller}get isInitalized(){return this._isInitialized}get needsUpdate(){return this._needsUpdate}get bots(){return this._bots.getValues()}get isObjectMoverRequested(){return this._isObjectMoverRequested}}return t.INVENTORY_UPDATED="IBS_INVENTORY_UPDATED",t.SELECT_FIRST_GROUP="IBS_SELECT_FIRST_GROUP",t.SELECT_EXISTING_GROUP_DEFAULT="IBS_SELECT_EXISTING_GROUP_DEFAULT",t.\u0275fac=function(e){return new(e||t)(i.kc(Sa),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();var rp=s("GBA0"),ap=s("746L"),op=s("9Nxx"),cp=s("TQha");class hp{constructor(t){this._petData=t,this._selected=!1,this._isUnseen=!1}get id(){return this._petData.id}get petData(){return this._petData}get selected(){return this._selected}set selected(t){this._selected=t}get isUnseen(){return this._isUnseen}set isUnseen(t){this._isUnseen=t}}let lp=(()=>{class t{constructor(t,e){this._inventoryService=t,this._ngZone=e,this._messages=[],this._petMsgFragments=null,this._pets=[],this._petIdInPetPlacing=-1,this._isObjectMoverRequested=!1,this._isInitialized=!1,this._needsUpdate=!1,this.onRoomEngineObjectPlacedEvent=this.onRoomEngineObjectPlacedEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{_.a.instance.roomEngine.events.addEventListener(v.a.PLACED,this.onRoomEngineObjectPlacedEvent),this._messages=[new ap.a(this.onPetsReceivedEvent.bind(this)),new rp.a(this.onPetAddedEvent.bind(this)),new op.a(this.onPetRemovedEvent.bind(this))];for(const t of this._messages)_.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{_.a.instance.roomEngine.events.removeEventListener(v.a.PLACED,this.onRoomEngineObjectPlacedEvent);for(const t of this._messages)_.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomEngineObjectPlacedEvent(t){t&&this._isObjectMoverRequested&&t.type===v.a.PLACED&&(this._isObjectMoverRequested=!1,t._Str_4057||this._ngZone.run(()=>this._inventoryService.showWindow()))}onPetsReceivedEvent(t){if(!t)return;const e=t.getParser();if(!e)return;this._petMsgFragments||(this._petMsgFragments=new Array(e.totalFragments));const s=new Map([...e.fragment]),i=this.mergeFragments(s,e.totalFragments,e.fragmentNumber,this._petMsgFragments);i&&this._ngZone.run(()=>this.processFragment(i))}onPetRemovedEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this.removeItemById(e.petId)&&this.setAllPetsSeen()})}onPetAddedEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=e.pet;this._ngZone.run(()=>{const t=this.getPetItem(s.id);t?t.isUnseen=!0:this.addSinglePetItem(s)})}mergeFragments(t,e,s,i){if(1===e)return t;i[s]=t;for(const r of i)if(!r)return null;const n=new Map;for(const r of i){for(const[t,e]of r)n.set(t,e);r.clear()}return i=null,n}processFragment(e){const s=this.getAllItemIds(),i=[],n=[];for(const t of e.keys())-1===s.indexOf(t)&&i.push(t);for(const t of s)e.get(t)||n.push(t);const r=0===s.length;for(const t of n)this.removeItemById(t);for(const t of i){const s=e.get(t);s&&this.addSinglePetItem(s)}r||i.length&&this._inventoryService.updateItemLocking(),this._isInitialized=!0,this._inventoryService.events.next(t.INVENTORY_UPDATED),this._inventoryService.petsController&&this._inventoryService.petsController.selectExistingGroupOrDefault()}getAllItemIds(){const t=[];for(const e of this._pets)t.push(e.id);return t}getPetItem(t){for(const e of this._pets)if(e&&e.id===t)return e;return null}addSinglePetItem(t){const e=new hp(t);return this.isPetUnseen(t)?(e.isUnseen=!0,this.unshiftPetItem(e)):this.pushPetItem(e),e}removeItemById(t){let e=0;for(;e<this._pets.length;){const t=this._pets[e];if(t)return this._petIdInPetPlacing===t.id&&(this.cancelRoomObjectPlacement(),this._inventoryService.showWindow()),this._pets.splice(e,1),t;e++}return null}isPetUnseen(t){return this._inventoryService.unseenTracker._Str_3613(pa.PET,t.id)}setAllPetsSeen(){this._inventoryService.unseenTracker._Str_8813(pa.PET);for(const t of this._pets)t.isUnseen&&(t.isUnseen=!1);this._inventoryService.updateUnseenCount()}attemptPetPlacement(t=!1){const e=this.getSelectedPet();if(!e)return!1;const s=e.petData;if(!s)return!1;const i=_.a.instance.roomSessionManager.getSession(1);return!(!i||!i.isRoomOwner&&!i.allowPets||(this._inventoryService.hideWindow(),this.startRoomObjectPlacement(s),0))}startRoomObjectPlacement(t){_.a.instance.roomEngine.processRoomObjectPlacement(Zm.a.INVENTORY,-t.id,V.a.UNIT,W.a.PET,t.figureData.figuredata)&&(this._petIdInPetPlacing=t.id,this.setObjectMoverRequested(!0))}cancelRoomObjectPlacement(){this._petIdInPetPlacing>-1&&(_.a.instance.roomEngine.cancelRoomObjectPlacement(),this.setObjectMoverRequested(!1),this._petIdInPetPlacing=-1)}getSelectedPet(){for(const t of this._pets)if(t&&t.selected)return t;return null}unshiftPetItem(t){this._pets.unshift(t)}pushPetItem(t){this._pets.push(t)}removePetItem(t){const e=this._pets.indexOf(t);e>-1&&this._pets.splice(e,1)}removeAndUnshiftGroupitem(t){this.removePetItem(t),this.unshiftPetItem(t)}unselectAllPetItems(){for(const t of this._pets)t.selected=!1}requestLoad(){this._needsUpdate=!1,_.a.instance.communication.connection.send(new cp.a)}setObjectMoverRequested(t){this._isObjectMoverRequested!==t&&this._ngZone.run(()=>this._isObjectMoverRequested=t)}get controller(){return this._inventoryService.controller}get isInitalized(){return this._isInitialized}get needsUpdate(){return this._needsUpdate}get pets(){return this._pets}get isObjectMoverRequested(){return this._isObjectMoverRequested}}return t.INVENTORY_UPDATED="IPS_INVENTORY_UPDATED",t.SELECT_FIRST_GROUP="IPS_SELECT_FIRST_GROUP",t.SELECT_EXISTING_GROUP_DEFAULT="IPS_SELECT_EXISTING_GROUP_DEFAULT",t.\u0275fac=function(e){return new(e||t)(i.kc(Sa),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();var up=s("BIDA"),_p=s("0BWK");let dp=(()=>{class t{constructor(t,e){this._inventoryService=t,this._ngZone=e,this._messages=[],this._badges=[],this._badgesInUse=[],this._isInitialized=!1,this._needsUpdate=!1,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new up.a(this.onBadgesListEvent.bind(this))];for(const t of this._messages)_.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)_.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onBadgesListEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this._badgesInUse=[],this._badges=[];const t=e.getAllBadgeCodes(),s=e.getActiveBadgeCodes();for(const e of t)-1===s.indexOf(e)?this._badges.push(e):this._badgesInUse.push(e);this._isInitialized=!0,this._inventoryService.badgesController&&this._inventoryService.badgesController.selectExistingGroupOrDefault()})}setAllBadgesSeen(){this._inventoryService.unseenTracker._Str_8813(pa.BADGE),this._inventoryService.updateUnseenCount()}isWearingBadge(t){return this._badgesInUse.indexOf(t)>=0}badgeLimitReached(){return 5===this._badgesInUse.length}wearOrClearBadge(t){const e=this._badgesInUse.indexOf(t);if(-1===e){this._badgesInUse.push(t);const e=this._badges.indexOf(t);e>=0&&this._badges.splice(e,1)}else this._badgesInUse.splice(e,1),-1===this._badges.indexOf(t)&&this._badges.push(t)}requestLoad(){this._needsUpdate=!1,_.a.instance.communication.connection.send(new _p.a)}get controller(){return this._inventoryService.controller}get isInitalized(){return this._isInitialized}get needsUpdate(){return this._needsUpdate}get badges(){return this._badges}get activeBadges(){return this._badgesInUse}}return t.\u0275fac=function(e){return new(e||t)(i.kc(Sa),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();var gp=s("IVZI"),mp=s("4hT9"),pp=s("4gvq"),fp=s("uHXo"),Ep=s("8qmW"),Sp=s("iv6j"),vp=s("8KaG"),bp=s("lN2i"),Ip=s("lrbo"),Rp=s("sM2B"),Tp=s("sGp+"),Op=s("07Tz"),yp=s("oe6/"),Cp=s("0EkW"),Ap=s("Q612"),Mp=s("porQ"),wp=s("gnch"),Dp=s("zeoL"),Np=s("r7iz"),Up=s("QQU2"),xp=s("iK4q");const Lp=["nitro-inventory-trading-component",""];function Pp(t,e){if(1&t&&(i.dc(0,"div",28),i.dc(1,"div",29),i.Vc(2),i.cc(),i.cc()),2&t){const t=i.qc(2).index,e=i.qc();i.Kb(2),i.Wc(e.ownUserItems[t].stuffData.uniqueNumber)}}const Fp=function(t){return{"background-image":t}};function kp(t,e){if(1&t&&(i.dc(0,"div",23),i.dc(1,"div",24),i.dc(2,"p",25),i.Vc(3),i.cc(),i.cc(),i.Zb(4,"div",26),i.Tc(5,Pp,3,1,"div",27),i.cc()),2&t){const t=i.qc().index,e=i.qc();i.Kb(3),i.Wc(e.ownUserItems[t].getUnlockedCount()),i.Kb(1),i.xc("ngStyle",i.Bc(3,Fp,"url("+e.getIconUrl(e.ownUserItems[t])+")")),i.Kb(1),i.xc("ngIf",e.ownUserItems[t].stuffData.uniqueNumber)}}function Vp(t,e){1&t&&i.Zb(0,"div",30)}function Bp(t,e){if(1&t){const t=i.ec();i.dc(0,"div",20),i.nc("click",function(){i.Kc(t);const s=e.index;return i.qc().removeItem(s)}),i.Tc(1,kp,6,5,"div",21),i.Tc(2,Vp,1,0,"div",22),i.cc()}if(2&t){const t=e.index,s=i.qc();i.Kb(1),i.xc("ngIf",s.ownUserItems[t]),i.Kb(1),i.xc("ngIf",!s.ownUserItems[t])}}function Wp(t,e){if(1&t&&(i.dc(0,"div",28),i.dc(1,"div",29),i.Vc(2),i.cc(),i.cc()),2&t){const t=i.qc(2).index,e=i.qc();i.Kb(2),i.Wc(e.otherUserItems[t].stuffData.uniqueNumber)}}function Kp(t,e){if(1&t&&(i.dc(0,"div",23),i.dc(1,"div",24),i.dc(2,"p",25),i.Vc(3),i.cc(),i.cc(),i.Zb(4,"div",26),i.Tc(5,Wp,3,1,"div",27),i.cc()),2&t){const t=i.qc().index,e=i.qc();i.Kb(3),i.Wc(e.otherUserItems[t].getUnlockedCount()),i.Kb(1),i.xc("ngStyle",i.Bc(3,Fp,"url("+e.getIconUrl(e.otherUserItems[t])+")")),i.Kb(1),i.xc("ngIf",e.otherUserItems[t].stuffData.uniqueNumber)}}function Gp(t,e){1&t&&i.Zb(0,"button",33)}function Hp(t,e){if(1&t&&(i.dc(0,"div",31),i.Tc(1,Kp,6,5,"div",21),i.Tc(2,Gp,1,0,"button",32),i.cc()),2&t){const t=e.index,s=i.qc();i.Kb(1),i.xc("ngIf",s.otherUserItems[t]),i.Kb(1),i.xc("ngIf",!s.otherUserItems[t])}}function jp(t,e){if(1&t){const t=i.ec();i.dc(0,"div",34),i.nc("click",function(){return i.Kc(t),i.qc().progressTrade()}),i.dc(1,"p",19),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()}if(2&t){const t=i.qc();i.xc("disabled",!t.ownUserNumItems&&!t.otherUserNumItems),i.Kb(2),i.Wc(i.sc(3,2,"inventory.trading.accept"))}}function zp(t,e){if(1&t){const t=i.ec();i.dc(0,"div",34),i.nc("click",function(){return i.Kc(t),i.qc().progressTrade()}),i.dc(1,"p",19),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()}if(2&t){const t=i.qc();i.xc("disabled",!t.ownUserNumItems&&!t.otherUserNumItems),i.Kb(2),i.Wc(i.sc(3,2,t.ownUserAccepts?"inventory.trading.modify":"inventory.trading.accept"))}}function Yp(t,e){if(1&t&&(i.dc(0,"div",35),i.dc(1,"p",19),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(2),i.Wc(i.uc(3,1,"inventory.trading.countdown","counter",t.timerTick))}}function qp(t,e){if(1&t){const t=i.ec();i.dc(0,"div",36),i.nc("click",function(){return i.Kc(t),i.qc().progressTrade()}),i.dc(1,"p",19),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()}2&t&&(i.Kb(2),i.Wc(i.sc(3,1,"inventory.trading.confirm")))}function Zp(t,e){1&t&&(i.dc(0,"div",35),i.dc(1,"p",19),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Wc(i.sc(3,1,"inventory.trading.info.waiting")))}function Xp(t,e){1&t&&(i.dc(0,"div",35),i.dc(1,"p",19),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Wc(i.sc(3,1,"inventory.trading.accept")))}const Qp=function(t,e){return{"takas-unlocked":t,"takas-locked":e}};let Jp=(()=>{class t{constructor(t,e,s){this._notificationService=t,this._inventoryService=e,this._ngZone=s,this.indexs=[0,1,2,3,4,5,6,7,8],this._timerTick=3}ngOnInit(){this._inventoryService.tradeController=this}ngOnDestroy(){this._inventoryService.tradeController=null}startTimer(){this._timer&&(clearInterval(this._timer),this._timer=null),this._timerTick=3,this._timer=setInterval(this.progressTimer.bind(this),1e3)}resetTimer(){this._timer&&clearInterval(this._timer),this._timerTick=-1}progressTimer(){-1!==this._timerTick?(this._timerTick--,0===this._timerTick&&this._inventoryService.controller.tradeService.onTimerFinished()):this.resetTimer()}getIconUrl(t){return t&&t.iconUrl||null}removeItem(t){this._inventoryService.controller.tradeService.removeItem(t)}progressTrade(){switch(this._inventoryService.controller.tradeService.state){case $p.TRADING_STATE_RUNNING:this.otherUserItems.length||this.ownUserAccepts||this._notificationService.alert("${inventory.trading.warning.other_not_offering}"),this.ownUserAccepts?this._inventoryService.controller.tradeService.sendTradingUnacceptComposer():this._inventoryService.controller.tradeService.sendTradingAcceptComposer();break;case $p.TRADING_STATE_CONFIRMING:this._inventoryService.controller.tradeService.sendTradingConfirmComposer()}}cancelTrade(){switch(this._inventoryService.controller.tradeService.state){case $p.TRADING_STATE_RUNNING:this._inventoryService.controller.tradeService.sendTradingCloseComposer();break;case $p.TRADING_STATE_CONFIRMING:this._inventoryService.controller.tradeService.sendTradingCancelComposer()}}get timerTick(){return this._timerTick}get state(){return this._inventoryService.controller.tradeService.state}get ownUserName(){return this._inventoryService.controller.tradeService.ownUserName}get ownUserItems(){return this._inventoryService.controller.tradeService.ownUserItems.getValues()}get ownUserNumItems(){return this._inventoryService.controller.tradeService.ownUserNumItems}get ownUserNumCredits(){return this._inventoryService.controller.tradeService.ownUserNumCredits}get ownUserAccepts(){return this._inventoryService.controller.tradeService.ownUserAccepts}get otherUserName(){return this._inventoryService.controller.tradeService.otherUserName}get otherUserItems(){return this._inventoryService.controller.tradeService.otherUserItems.getValues()}get otherUserNumItems(){return this._inventoryService.controller.tradeService.otherUserNumItems}get otherUserNumCredits(){return this._inventoryService.controller.tradeService.otherUserNumCredits}get otherUserAccepts(){return this._inventoryService.controller.tradeService.otherUserAccepts}}return t.COLOR_LOCKED=4284532064,t.COLOR_UNLOCKED=2577770,t.ALERT_SCAM=0,t.ALERT_OTHER_CANCELLED=1,t.ALERT_ALREADY_OPEN=2,t.\u0275fac=function(e){return new(e||t)(i.Yb(ss),i.Yb(Sa),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-inventory-trading-component",""]],attrs:Lp,decls:46,vars:37,consts:[[1,"envanter-takas"],[1,"takas-desc"],[1,"takasbox-mobi",2,"margin-left","20px"],[1,"takas-yapan-user"],[1,"takas-edilen-mobiler"],["class","takas-mobi-box",3,"click",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"takas-txtinfo"],[1,"how-many-items"],[1,"how-many-credits"],[1,"takas-separator-hr"],[1,"takasbox-mobi",2,"margin-left","29px"],["class","takas-mobi-box",4,"ngFor","ngForOf"],[1,"takas-button"],[3,"ngSwitch"],["class","takas-onaybuton",3,"disabled","click",4,"ngSwitchCase"],["class","takas-onaybuton","disabled","",4,"ngSwitchCase"],["class","takas-onaybuton",3,"click",4,"ngSwitchCase"],[1,"takas-iptalbuton",3,"click"],[1,"takasbuton-txt"],[1,"takas-mobi-box",3,"click"],["class","takas-mobi-view",4,"ngIf"],["class","takas-mobi-box","style","display:none;",4,"ngIf"],[1,"takas-mobi-view"],[1,"items-part-number"],[1,"ipn-text"],[1,"mobitrade-gorunum",3,"ngStyle"],["class","takasltdinfo",4,"ngIf"],[1,"takasltdinfo"],[1,"tradeltdnumber"],[1,"takas-mobi-box",2,"display","none"],[1,"takas-mobi-box"],["type","button","class","takas-mobi-box","style","display:none;",4,"ngIf"],["type","button",1,"takas-mobi-box",2,"display","none"],[1,"takas-onaybuton",3,"disabled","click"],["disabled","",1,"takas-onaybuton"],[1,"takas-onaybuton",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"p",1),i.Vc(2),i.rc(3,"translate"),i.cc(),i.dc(4,"div",2),i.dc(5,"p",3),i.dc(6,"b"),i.Vc(7),i.rc(8,"translate"),i.cc(),i.Vc(9),i.rc(10,"translate"),i.cc(),i.dc(11,"div",4),i.Tc(12,Bp,3,2,"div",5),i.cc(),i.Zb(13,"div",6),i.dc(14,"div",7),i.dc(15,"p",8),i.Vc(16),i.cc(),i.dc(17,"p",9),i.Vc(18),i.cc(),i.cc(),i.cc(),i.Zb(19,"div",10),i.dc(20,"div",11),i.dc(21,"p",3),i.dc(22,"b"),i.Vc(23),i.cc(),i.Vc(24),i.rc(25,"translate"),i.cc(),i.dc(26,"div",4),i.Tc(27,Hp,3,2,"div",12),i.cc(),i.Zb(28,"div",6),i.dc(29,"div",7),i.dc(30,"p",8),i.Vc(31),i.cc(),i.dc(32,"p",9),i.Vc(33),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(34,"div",13),i.bc(35,14),i.Tc(36,jp,4,4,"div",15),i.Tc(37,zp,4,4,"div",15),i.Tc(38,Yp,4,5,"div",16),i.Tc(39,qp,4,3,"div",17),i.Tc(40,Zp,4,3,"div",16),i.Tc(41,Xp,4,3,"div",16),i.ac(),i.dc(42,"div",18),i.nc("click",function(){return e.cancelTrade()}),i.dc(43,"p",19),i.Vc(44),i.rc(45,"translate"),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Wc(i.sc(3,21,"inventory.trading.info.add")),i.Kb(5),i.Wc(i.sc(8,23,"inventory.trading.you")),i.Kb(2),i.Xc(" ",i.sc(10,25,"inventory.trading.isoffering"),""),i.Kb(3),i.xc("ngForOf",e.indexs),i.Kb(1),i.xc("ngClass",i.Cc(31,Qp,!e.ownUserAccepts,e.ownUserAccepts)),i.Kb(3),i.Xc("",e.ownUserNumItems," items"),i.Kb(2),i.Xc("",e.ownUserNumCredits," credits wort of credit furni"),i.Kb(5),i.Wc(e.otherUserName),i.Kb(1),i.Xc(" ",i.sc(25,27,"inventory.trading.isoffering"),""),i.Kb(3),i.xc("ngForOf",e.indexs),i.Kb(1),i.xc("ngClass",i.Cc(34,Qp,!e.otherUserAccepts,e.otherUserAccepts)),i.Kb(3),i.Xc("",e.otherUserNumItems," items"),i.Kb(2),i.Xc("",e.otherUserNumCredits," credits"),i.Kb(2),i.xc("ngSwitch",e.state),i.Kb(1),i.xc("ngSwitchCase",0),i.Kb(1),i.xc("ngSwitchCase",1),i.Kb(1),i.xc("ngSwitchCase",2),i.Kb(1),i.xc("ngSwitchCase",3),i.Kb(1),i.xc("ngSwitchCase",4),i.Kb(1),i.xc("ngSwitchCase",5),i.Kb(3),i.Wc(i.sc(45,29,"generic.cancel")))},directives:[p.m,p.l,p.p,p.q,p.n,p.o],pipes:[ln],encapsulation:2}),t})(),$p=(()=>{class t{constructor(t,e,s){this._notificationService=t,this._inventoryService=e,this._ngZone=s,this._messages=[],this._state=0,this._running=!1,this._ownUserIndex=-1,this._ownUserName="",this._ownUserNumItems=0,this._ownUserNumCredits=0,this._ownUserAccepts=!1,this._ownUserCanTrade=!1,this._otherUserIndex=-1,this._otherUserName="",this._otherUserNumItems=0,this._otherUserNumCredits=0,this._otherUserAccepts=!1,this._otherUserCanTrade=!1,this._offeredItemIds=[],this.registerMessages()}static _Str_16998(t,e){let s=t.toString();const i=e;if(!(e instanceof Vt.a))return s;let n=1;for(;n<5;)s=s+","+i.getValue(n),n++;return s}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new gp.a(this.onTradingAcceptEvent.bind(this)),new mp.a(this.onTradingCloseEvent.bind(this)),new pp.a(this.onTradingCompletedEvent.bind(this)),new fp.a(this.onTradingConfirmationEvent.bind(this)),new Ep.a(this.onTradingListItemEvent.bind(this)),new Sp.a(this.onTradingNotOpenEvent.bind(this)),new vp.a(this.onTradingOpenEvent.bind(this)),new bp.a(this.onTradingOpenFailedEvent.bind(this)),new Ip.a(this.onTradingOtherNotAllowedEvent.bind(this)),new Rp.a(this.onTradingYouAreNotAllowedEvent.bind(this))];for(const t of this._messages)_.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)_.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onTradingAcceptEvent(t){t&&t.getParser()&&this._ngZone.run(()=>{t._Str_4963===this._ownUserIndex?this._ownUserAccepts=t._Str_15794:this._otherUserAccepts=t._Str_15794})}tradingNotificationMessage(t){switch(t){case Jp.ALERT_SCAM:return void this._notificationService.alert("${inventory.trading.warning.other_not_offering}","${inventory.trading.notification.title}");case Jp.ALERT_OTHER_CANCELLED:return void this._notificationService.alert("${inventory.trading.info.closed}","${inventory.trading.notification.title}");case Jp.ALERT_ALREADY_OPEN:return void this._notificationService.alert("${inventory.trading.info.already_open}","${inventory.trading.notification.title}")}}onTradingCloseEvent(t){if(!t)return;const e=t.getParser();e&&this._running&&this._ngZone.run(()=>{e.reason===Up.a._Str_16410?this._notificationService.alert("${inventory.trading.notification.caption}, ${inventory.trading.notification.commiterror.info}","${inventory.trading.notification.title}"):e._Str_4963!==this._ownUserIndex&&this.tradingNotificationMessage(Jp.ALERT_OTHER_CANCELLED),this.close()})}onTradingCompletedEvent(e){e&&e.getParser()&&this._ngZone.run(()=>this.state=t.TRADING_STATE_COMPLETED)}onTradingConfirmationEvent(e){e&&e.getParser()&&this._ngZone.run(()=>this.state=t.TRADING_STATE_COUNTDOWN)}onTradingListItemEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{const t=new Bs.a,s=new Bs.a;this.parseItems(e._Str_17841,t),this.parseItems(e._Str_17465,s),this.updateTrade(e,t,s)})}onTradingNotOpenEvent(t){}onTradingOpenEvent(t){if(!t)return;const e=t.getParser();if(!e)return;const s=_.a.instance.sessionDataManager,i=this._inventoryService.roomSession;if(!s||!i)return;let n=e._Str_4963;const r=i.userDataManager.getUserData(n);if(!r)return;let a=r.name,o=e._Str_16764,c=e._Str_17613;const h=i.userDataManager.getUserData(c);if(!h)return;let l=h.name,u=e._Str_13374;if(c===s.userId){const t=n,e=a,s=o;n=c,a=l,o=u,c=t,l=e,u=s}this._ngZone.run(()=>{this._inventoryService.hideAllControllers(),this._inventoryService.showWindow(),this._inventoryService.furnitureVisible=!0,this._inventoryService.tradingVisible=!0,this._Str_23457(n,a,o,c,l,u)})}onTradingOpenFailedEvent(t){if(!t)return;const e=t.getParser();e&&(e.reason!==xp.a._Str_18150&&e.reason!==xp.a._Str_18383||this._ngZone.run(()=>{this.tradingNotificationMessage(Jp.ALERT_ALREADY_OPEN)}))}onTradingOtherNotAllowedEvent(t){t&&this._ngZone.run(()=>{this._notificationService.alert("${inventory.trading.warning.others_account_disabled}","${inventory.trading.notification.title}")})}onTradingYouAreNotAllowedEvent(t){t&&this._ngZone.run(()=>{this._notificationService.alert("${inventory.trading.warning.own_account_disabled}","${inventory.trading.notification.title}")})}close(){this._running&&(this._state!==t.TRADING_STATE_READY&&this._state!==t.TRADING_STATE_COMPLETED&&(this.sendTradingCloseComposer(),this.state=t.TRADING_STATE_CANCELLED),this._inventoryService.controller.furnitureService.unlockAllItems(),this.state=t.TRADING_STATE_READY,this._running=!1,this._inventoryService.tradingVisible=!1)}startTrade(t,e){this.controller&&(this.controller.furnitureService.isInitalized||this.controller.furnitureService.requestLoad(),this.sendTradingOpenComposer(t))}_Str_23457(e,s,i,n,r,a){this._ownUserIndex=e,this._ownUserName=s,this._ownUserItems=new Bs.a,this._ownUserAccepts=!1,this._ownUserCanTrade=i,this._otherUserIndex=n,this._otherUserName=r,this._otherUserItems=new Bs.a,this._otherUserAccepts=!1,this._otherUserCanTrade=a,this._running=!0,this.state=t.TRADING_STATE_RUNNING}parseItems(t,e){if(!this.controller)return;const s=t.length;let i=0;for(;i<s;){const s=t[i];if(s){const t=s.spriteId,i=s.category;let n=s.furniType+t;s.isGroupable&&!this.isExternalImage(t)||(n="itemid"+s.itemId),s.category===Ka._Str_5186?n=s.itemId+"poster"+s.stuffData.getLegacyString():s.category===Ka._Str_12454&&(n="");let r=s.isGroupable&&!this.isExternalImage(s.spriteId)?e.getValue(n):null;r||(r=this.controller.furnitureService.createGroupItem(t,i,s.stuffData),e.add(n,r)),r.push(new Xm(s))}i++}}isExternalImage(t){const e=_.a.instance.sessionDataManager.getWallItemData(t);return e&&e.isExternalImage}updateTrade(t,e,s){this._ownUserItems&&this._ownUserItems.reset(),this._otherUserItems&&this._otherUserItems.reset(),t._Str_15162===this._ownUserIndex?(this._ownUserItems=e,this._ownUserNumItems=t._Str_14946,this._ownUserNumCredits=t._Str_15709,this._otherUserItems=s,this._otherUserNumItems=t._Str_13801,this._otherUserNumCredits=t._Str_9138):(this._ownUserItems=s,this._ownUserNumItems=t._Str_13801,this._ownUserNumCredits=t._Str_9138,this._otherUserItems=e,this._otherUserNumItems=t._Str_14946,this._otherUserNumCredits=t._Str_15709),this._ownUserAccepts=!1,this._otherUserAccepts=!1,this._inventoryService.updateItemLocking()}offerItems(t,e,s,i,n,r){if(!n&&t.length)_.a.instance.communication.connection.send(new Ap.a(t.pop()));else{const a=[];for(const o of t)this.canTradeItem(e,s,i,n,r)&&a.push(o);a.length&&_.a.instance.communication.connection.send(1===a.length?new Ap.a(a.pop()):new Mp.a(...a))}}canTradeItem(e,s,i,n,r){if(this._ownUserAccepts)return!1;if(null==this._ownUserItems)return!1;if(this._ownUserItems.length<t.MAX_ITEMS_TO_TRADE)return!0;if(!n)return!1;let a=s.toString();return a=i===Ka._Str_5186?a+"poster"+r.getLegacyString():i===Ka._Str_12454?t._Str_16998(s,r):(e?"I":"S")+a,!!this._ownUserItems.getValue(a)}removeItem(t){const e=this._ownUserItems.getWithIndex(t);if(!e)return;const s=e.getLastItem();s&&_.a.instance.communication.connection.send(new wp.a(s.id))}getOwnTradingItemIds(){const t=[];if(!this._ownUserItems||!this._ownUserItems.length)return t;for(const e of this._ownUserItems.getValues()){let s=0;for(;s<e.getTotalCount();){const i=e.getItemByIndex(s);i&&t.push(i.ref),s++}}return t}onTimerFinished(){this._state===t.TRADING_STATE_COUNTDOWN&&(this.state=t.TRADING_STATE_CONFIRMING)}sendTradingAcceptComposer(){_.a.instance.communication.connection.send(new Tp.a)}sendTradingUnacceptComposer(){_.a.instance.communication.connection.send(new Np.a)}sendTradingConfirmComposer(){this.state=t.TRADING_STATE_CONFIRMED,_.a.instance.communication.connection.send(new Cp.a)}sendTradingCloseComposer(){_.a.instance.communication.connection.send(new yp.a)}sendTradingCancelComposer(){_.a.instance.communication.connection.send(new Op.a)}sendTradingOpenComposer(t){_.a.instance.communication.connection.send(new Dp.a(t))}get controller(){return this._inventoryService.controller}get state(){return this._state}set state(e){if(this._state===e)return;let s=!1;switch(this._state){case t.TRADING_STATE_READY:e!==t.TRADING_STATE_RUNNING&&e!==t.TRADING_STATE_COMPLETED||(this._state=e,s=!0);break;case t.TRADING_STATE_RUNNING:e===t.TRADING_STATE_COUNTDOWN?(this._state=e,s=!0,this._inventoryService.tradeController.startTimer()):e===t.TRADING_STATE_CANCELLED&&(this._state=e,s=!0);break;case t.TRADING_STATE_COUNTDOWN:(e===t.TRADING_STATE_CONFIRMING||e===t.TRADING_STATE_CANCELLED||e===t.TRADING_STATE_RUNNING)&&(this._state=e,s=!0);break;case t.TRADING_STATE_CONFIRMING:e===t.TRADING_STATE_CONFIRMED?(this._state=e,s=!0):(e===t.TRADING_STATE_COMPLETED||e===t.TRADING_STATE_CANCELLED)&&(this._state=e,s=!0,this.close());break;case t.TRADING_STATE_CONFIRMED:(e===t.TRADING_STATE_COMPLETED||e===t.TRADING_STATE_CANCELLED)&&(this._state=e,s=!0,this.close());break;case t.TRADING_STATE_COMPLETED:e===t.TRADING_STATE_READY&&(this._state=e,s=!0);break;case t.TRADING_STATE_CANCELLED:(e===t.TRADING_STATE_READY||e===t.TRADING_STATE_RUNNING)&&(this._state=e,s=!0)}}get running(){return this._running}get ownUserName(){return this._ownUserName}get ownUserItems(){return this._ownUserItems}get ownUserNumItems(){return this._ownUserNumItems}get ownUserNumCredits(){return this._ownUserNumCredits}get ownUserAccepts(){return this._ownUserAccepts}get ownUserCanTrade(){return this._ownUserCanTrade}get otherUserName(){return this._otherUserName}get otherUserItems(){return this._otherUserItems}get otherUserNumItems(){return this._otherUserNumItems}get otherUserNumCredits(){return this._otherUserNumCredits}get otherUserAccepts(){return this._otherUserAccepts}get otherUserCanTrade(){return this._otherUserCanTrade}}return t.MAX_ITEMS_TO_TRADE=9,t.TRADING_STATE_READY=0,t.TRADING_STATE_RUNNING=1,t.TRADING_STATE_COUNTDOWN=2,t.TRADING_STATE_CONFIRMING=3,t.TRADING_STATE_CONFIRMED=4,t.TRADING_STATE_COMPLETED=5,t.TRADING_STATE_CANCELLED=6,t.\u0275fac=function(e){return new(e||t)(i.kc(ss),i.kc(Sa),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();function tf(t,e){if(1&t&&(i.dc(0,"div",17),i.dc(1,"p",18),i.Vc(2),i.cc(),i.cc()),2&t){const t=i.qc(2);i.Kb(2),i.Wc(t.furniUnseenCount)}}function ef(t,e){if(1&t&&(i.dc(0,"div",17),i.dc(1,"p",18),i.Vc(2),i.cc(),i.cc()),2&t){const t=i.qc(2);i.Kb(2),i.Wc(t.petUnseenCount)}}function sf(t,e){if(1&t&&(i.dc(0,"div",17),i.dc(1,"p",18),i.Vc(2),i.cc(),i.cc()),2&t){const t=i.qc(2);i.Kb(2),i.Wc(t.badgeUnseenCount)}}function nf(t,e){if(1&t&&(i.dc(0,"div",17),i.dc(1,"p",18),i.Vc(2),i.cc(),i.cc()),2&t){const t=i.qc(2);i.Kb(2),i.Wc(t.botUnseenCount)}}function rf(t,e){if(1&t&&i.Zb(0,"div",19),2&t){const t=i.qc(2);i.xc("roomPreviewer",t.roomPreviewer)}}function af(t,e){if(1&t&&i.Zb(0,"div",20),2&t){const t=i.qc(2);i.xc("roomPreviewer",t.roomPreviewer)}}function of(t,e){if(1&t&&i.Zb(0,"div",21),2&t){const t=i.qc(2);i.xc("roomPreviewer",t.roomPreviewer)}}function cf(t,e){1&t&&i.Zb(0,"div",22)}function hf(t,e){1&t&&i.Zb(0,"div",23)}const lf=function(t){return{envanteractive:t}};function uf(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"p",3),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",4),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.cc(),i.cc(),i.dc(6,"div",5),i.dc(7,"div",6),i.nc("click",function(){return i.Kc(t),i.qc().showFurniture()}),i.Zb(8,"div",7),i.Vc(9),i.rc(10,"translate"),i.Tc(11,tf,3,1,"div",8),i.cc(),i.dc(12,"div",6),i.nc("click",function(){return i.Kc(t),i.qc().showPets()}),i.Zb(13,"div",9),i.Vc(14),i.rc(15,"translate"),i.Tc(16,ef,3,1,"div",8),i.cc(),i.dc(17,"div",6),i.nc("click",function(){return i.Kc(t),i.qc().showBadges()}),i.Zb(18,"div",10),i.Vc(19),i.rc(20,"translate"),i.Tc(21,sf,3,1,"div",8),i.cc(),i.dc(22,"div",6),i.nc("click",function(){return i.Kc(t),i.qc().showBots()}),i.Zb(23,"div",11),i.Vc(24),i.rc(25,"translate"),i.Tc(26,nf,3,1,"div",8),i.cc(),i.cc(),i.Tc(27,rf,1,1,"div",12),i.Tc(28,af,1,1,"div",13),i.Tc(29,of,1,1,"div",14),i.Tc(30,cf,1,0,"div",15),i.Tc(31,hf,1,0,"div",16),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.sc(4,18,"inventory.title")),i.Kb(4),i.xc("ngClass",i.Bc(28,lf,t.furnitureVisible||t.tradingVisible)),i.Kb(2),i.Xc(" ",i.sc(10,20,"inventory.furni")," "),i.Kb(2),i.xc("ngIf",t.furniUnseenCount),i.Kb(1),i.xc("ngClass",i.Bc(30,lf,t.petsVisible)),i.Kb(2),i.Xc(" ",i.sc(15,22,"inventory.furni.tab.pets")," "),i.Kb(2),i.xc("ngIf",t.petUnseenCount),i.Kb(1),i.xc("ngClass",i.Bc(32,lf,t.badgesVisible)),i.Kb(2),i.Xc(" ",i.sc(20,24,"inventory.badges")," "),i.Kb(2),i.xc("ngIf",t.badgeUnseenCount),i.Kb(1),i.xc("ngClass",i.Bc(34,lf,t.botsVisible)),i.Kb(2),i.Xc(" ",i.sc(25,26,"inventory.bots")," "),i.Kb(2),i.xc("ngIf",t.botUnseenCount),i.Kb(1),i.xc("ngIf",t.botsVisible),i.Kb(1),i.xc("ngIf",t.petsVisible),i.Kb(1),i.xc("ngIf",t.furnitureVisible),i.Kb(1),i.xc("ngIf",t.badgesVisible),i.Kb(1),i.xc("ngIf",t.tradingVisible)}}let _f=(()=>{class t{constructor(t,e,s,i,n,r,a){this._settingsService=t,this._inventoryService=e,this._inventoryFurnitureService=s,this._inventoryBotService=i,this._inventoryPetService=n,this._inventoryBadgeService=r,this._inventoryTradingService=a,this.visible=!1,this._roomPreviewer=null}ngOnInit(){this._roomPreviewer||(this._roomPreviewer=new di(_.a.instance.roomEngine,++di.PREVIEW_COUNTER)),this._inventoryService.controller=this}ngOnDestroy(){this._roomPreviewer&&this._roomPreviewer.dispose(),this._inventoryService.controller=null}ngOnChanges(t){const e=t.visible.currentValue;e!==t.visible.previousValue&&(e||this._inventoryTradingService.close())}hide(){this._inventoryService.hideWindow()}showFurniture(){this._inventoryService.furnitureVisible=!0,this._inventoryService.botsVisible=!1,this._inventoryService.petsVisible=!1,this._inventoryService.badgesVisible=!1}showBots(){this._inventoryService.furnitureVisible=!1,this._inventoryService.botsVisible=!0,this._inventoryService.petsVisible=!1,this._inventoryService.badgesVisible=!1}showPets(){this._inventoryService.furnitureVisible=!1,this._inventoryService.botsVisible=!1,this._inventoryService.petsVisible=!0,this._inventoryService.badgesVisible=!1}showBadges(){this._inventoryService.furnitureVisible=!1,this._inventoryService.botsVisible=!1,this._inventoryService.petsVisible=!1,this._inventoryService.badgesVisible=!0}updateItemLocking(){const t=[];if(t.push(...this._inventoryTradingService.getOwnTradingItemIds()),t.length)for(const e of this._inventoryFurnitureService.groupItems)e.lockItemIds(t);else this._inventoryFurnitureService.unlockAllItems()}setAllFurnitureSeen(){this._inventoryFurnitureService.setAllFurnitureSeen()}setAllBotsSeen(){this._inventoryBotService.setAllBotsSeen()}setAllPetsSeen(){this._inventoryPetService.setAllPetsSeen()}setAllBadgesSeen(){this._inventoryBadgeService.setAllBadgesSeen()}get roomPreviewer(){return this._roomPreviewer}get furnitureVisible(){return this._inventoryService.furnitureVisible}get badgesVisible(){return this._inventoryService.badgesVisible}get tradingVisible(){return this._inventoryService.tradingVisible}get botsVisible(){return this._inventoryService.botsVisible}get petsVisible(){return this._inventoryService.petsVisible}get furnitureService(){return this._inventoryFurnitureService}get botService(){return this._inventoryBotService}get petService(){return this._inventoryPetService}get badgeService(){return this._inventoryBadgeService}get tradeService(){return this._inventoryTradingService}get furniUnseenCount(){return this._inventoryService.furniUnseenCount}get botUnseenCount(){return this._inventoryService.botUnseenCount}get petUnseenCount(){return this._inventoryService.petUnseenCount}get badgeUnseenCount(){return this._inventoryService.badgeUnseenCount}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(m),i.Yb(Sa),i.Yb(Jm),i.Yb(np),i.Yb(lp),i.Yb(dp),i.Yb($p))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-inventory-main-component"]],inputs:{visible:"visible"},features:[i.Ib],decls:1,vars:1,consts:[["id","envanter","dragHandle","#envanterdrag",3,"bringToTop","draggable",4,"ngIf"],["id","envanter","dragHandle","#envanterdrag",3,"bringToTop","draggable"],["id","envanterdrag"],[1,"eh-baslik"],[1,"old-kapat",3,"click"],[1,"envanter-menu"],[1,"envantermenu-button",3,"ngClass","click"],[1,"envanterico",2,"background-image","url('/assets/images/envanter/mobi.png')"],["class","mobicountbox-envanter",4,"ngIf"],[1,"envanterico",2,"background-image","url(https://3.bp.blogspot.com/-XVN1SH0c21o/XEi1zVXSD1I/AAAAAAABKZ4/Sb2cJ5ZHZpErXmE-_YWcu1AnbVoNQpPzwCKgBGAs/s1600/passaro.gif)"],[1,"envanterico",2,"background-image","url('/assets/images/envanter/rozet.png')"],[1,"envanterico",2,"background-image","url('/assets/images/envanter/bot.png')"],["nitro-inventory-bots-component","",3,"roomPreviewer",4,"ngIf"],["nitro-inventory-pets-component","",3,"roomPreviewer",4,"ngIf"],["nitro-inventory-furniture-component","",3,"roomPreviewer",4,"ngIf"],["nitro-inventory-badges-component","",4,"ngIf"],["nitro-inventory-trading-component","",4,"ngIf"],[1,"mobicountbox-envanter"],[1,"count-txt"],["nitro-inventory-bots-component","",3,"roomPreviewer"],["nitro-inventory-pets-component","",3,"roomPreviewer"],["nitro-inventory-furniture-component","",3,"roomPreviewer"],["nitro-inventory-badges-component",""],["nitro-inventory-trading-component",""]],template:function(t,e){1&t&&i.Tc(0,uf,32,36,"div",0),2&t&&i.xc("ngIf",e.visible)},encapsulation:2}),t})();var df=s("xB90"),gf=s("Tp0E"),mf=s("9/2a"),pf=s("nMRu"),ff=s("75Vd");let Ef=(()=>{class t{constructor(t,e){this._ngZone=t,this._settingsService=e,this.onRoomEngineObjectEvent=this.onRoomEngineObjectEvent.bind(this),this.flush(),this.registerMessages(),_.a.instance.addLinkEventTracker(this)}ngOnDestroy(){_.a.instance.removeLinkEventTracker(this),this.unregisterMessages()}flush(){this._userLoadedProfile=null,this._userBadges=[],this._heartRelationships=[],this._smileRelationships=[],this._bobbaRelationships=[],this._selectedGroup=null}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),_.a.instance.roomEngine.events.addEventListener(v.a.SELECTED,this.onRoomEngineObjectEvent),this._messages=[new gf.a(this.onUserProfileEvent.bind(this)),new df.a(this.onUserCurrentBadgesEvent.bind(this)),new mf.a(this.onUserRelationshipsEvent.bind(this)),new au.a(this.onGroupInformationEvent.bind(this))];for(const t of this._messages)_.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(_.a.instance.roomEngine.events.removeEventListener(v.a.SELECTED,this.onRoomEngineObjectEvent),this._messages&&this._messages.length)for(const t of this._messages)_.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomEngineObjectEvent(t){if(t)switch(t.type){case v.a.SELECTED:return}}onUserProfileEvent(t){if(!t)return;const e=t.getParser();e&&this._ngZone.run(()=>{this.flush(),this._userLoadedProfile=e,_.a.instance.communication.connection.send(new pf.a(this._userLoadedProfile.id)),_.a.instance.communication.connection.send(new ff.a(this._userLoadedProfile.id)),e.groups.length>0&&_.a.instance.communication.connection.send(new pu.a(this._userLoadedProfile.groups[0].id,!1)),this._settingsService.showUserProfile()})}onUserCurrentBadgesEvent(t){if(!t||!this._userLoadedProfile)return;const e=t.getParser();e&&e.userId===this._userLoadedProfile.id&&this._ngZone.run(()=>this._userBadges=e.badges)}onUserRelationshipsEvent(t){if(!t||!this._userLoadedProfile)return;const e=t.getParser();e&&e.id===this._userLoadedProfile.id&&this._ngZone.run(()=>{this._heartRelationships=e.hearts,this._smileRelationships=e.smiles,this._bobbaRelationships=e.bobbas,this._component&&this._component.getRandomRelationships()})}onGroupInformationEvent(t){if(!t)return;const e=t.getParser();e&&(this._selectedGroup&&e.id!==this._selectedGroup.id||this._ngZone.run(()=>this._selectedGroup=e))}selectGroup(t){_.a.instance.communication.connection.send(new pu.a(t,!1))}loadUserProfile(t){_.a.instance.communication.connection.send(new yu.a(t))}linkReceived(t){const e=t.split("/");if(!(e.length<2))switch(e[1]){case"goto":if(e.length>2){const t=parseInt(e[2]);t>0&&this.loadUserProfile(t)}return}}get eventUrlPrefix(){return"profile"}set component(t){this._component=t}get userLoadedProfile(){return this._userLoadedProfile}get userBadges(){return this._userBadges}get heartRelationships(){return this._heartRelationships}get smileRelationships(){return this._smileRelationships}get bobbaRelationships(){return this._bobbaRelationships}get selectedGroup(){return this._selectedGroup}}return t.\u0275fac=function(e){return new(e||t)(i.kc(i.H),i.kc(m))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();function Sf(t,e){1&t&&(i.dc(0,"div",51),i.Zb(1,"i",52),i.dc(2,"p",53),i.Vc(3),i.rc(4,"translate"),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Xc("",i.sc(4,1,"extendedprofile.me")," "))}function vf(t,e){1&t&&(i.dc(0,"button",54),i.dc(1,"p",55),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Wc(i.sc(3,1,"extendedprofile.addasafriend")))}function bf(t,e){1&t&&(i.dc(0,"p",56),i.Vc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Wc(i.sc(2,1,"extended.profile.change.looks")))}function If(t,e){1&t&&(i.dc(0,"p",57),i.Vc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Wc(i.sc(2,1,"extended.profile.change.badges")))}function Rf(t,e){if(1&t&&(i.dc(0,"div"),i.Zb(1,"nitro-badge",58),i.cc()),2&t){const t=e.$implicit;i.Kb(1),i.xc("badge",t)}}function Tf(t,e){if(1&t&&i.Zb(0,"div",59),2&t){const t=i.qc(2);i.xc("headOnly",!0)("figure",t.currentRandomHeartRelationship.figure)("direction",4)}}function Of(t,e){if(1&t&&i.Zb(0,"div",59),2&t){const t=i.qc(2);i.xc("headOnly",!0)("figure",t.currentRandomSmileRelationship.figure)("direction",4)}}function yf(t,e){if(1&t&&i.Zb(0,"div",59),2&t){const t=i.qc(2);i.xc("headOnly",!0)("figure",t.currentRandomBobbaRelationship.figure)("direction",4)}}const Cf=function(t){return{grupactive:t}};function Af(t,e){if(1&t){const t=i.ec();i.dc(0,"div",60),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc(2).selectGroup(s.id)}),i.Zb(1,"div",61),i.dc(2,"div",62),i.Zb(3,"nitro-badge",63),i.cc(),i.cc()}if(2&t){const t=e.$implicit,s=i.qc(2);i.xc("ngClass",i.Bc(3,Cf,s.selectedGroup&&s.selectedGroup.id===t.id)),i.Kb(3),i.xc("badge",t.badge)("isGroup",!0)}}function Mf(t,e){1&t&&(i.dc(0,"div",79),i.dc(1,"p",80),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Wc(i.sc(3,1,"group.join")))}function wf(t,e){1&t&&(i.dc(0,"div",79),i.dc(1,"p",80),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Wc(i.sc(3,1,"group.requestmembership")))}function Df(t,e){1&t&&(i.dc(0,"div",79),i.dc(1,"p",80),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Wc(i.sc(3,1,"group.membershippending")))}function Nf(t,e){if(1&t&&(i.dc(0,"div"),i.Tc(1,wf,4,3,"div",78),i.Tc(2,Df,4,3,"div",78),i.cc()),2&t){const t=i.qc(4);i.Kb(1),i.xc("ngIf",0===t.selectedGroup.membershipType),i.Kb(1),i.xc("ngIf",2===t.selectedGroup.membershipType)}}function Uf(t,e){1&t&&(i.dc(0,"div",79),i.dc(1,"p",80),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Wc(i.sc(3,1,"group.leave")))}function xf(t,e){if(1&t&&(i.dc(0,"div"),i.Tc(1,Mf,4,3,"div",78),i.Tc(2,Nf,3,2,"div",77),i.Tc(3,Uf,4,3,"div",78),i.cc()),2&t){const t=i.qc(3);i.Kb(1),i.xc("ngIf",0===t.selectedGroup.type),i.Kb(1),i.xc("ngIf",1===t.selectedGroup.type),i.Kb(1),i.xc("ngIf",1===t.selectedGroup.membershipType)}}const Lf=function(){return["date","owner"]},Pf=function(t,e){return[t,e]};function Ff(t,e){if(1&t&&(i.dc(0,"div",64),i.dc(1,"div",65),i.dc(2,"div",66),i.dc(3,"div",67),i.Zb(4,"nitro-badge",63),i.cc(),i.dc(5,"div",68),i.Vc(6),i.rc(7,"translate"),i.cc(),i.cc(),i.dc(8,"div",69),i.dc(9,"p",70),i.Vc(10),i.cc(),i.dc(11,"p",71),i.Vc(12),i.rc(13,"translate"),i.cc(),i.dc(14,"p",72),i.Vc(15),i.cc(),i.dc(16,"p",73),i.Vc(17),i.rc(18,"translate"),i.cc(),i.dc(19,"p",74),i.Vc(20),i.rc(21,"translate"),i.cc(),i.dc(22,"p",75),i.Vc(23),i.rc(24,"translate"),i.cc(),i.dc(25,"div",76),i.Tc(26,xf,4,3,"div",77),i.cc(),i.cc(),i.cc(),i.cc()),2&t){const t=i.qc(2);i.Kb(4),i.xc("badge",t.selectedGroup.badge)("isGroup",!0),i.Kb(2),i.Wc(i.uc(7,10,"group.members.members","count",t.groupMembersCount)),i.Kb(4),i.Xc(" ",t.selectedGroup.title," "),i.Kb(2),i.Wc(i.uc(13,14,"group.created",i.Ac(24,Lf),i.Cc(25,Pf,t.groupCreationDate,t.groupOwnerName))),i.Kb(3),i.Wc(t.selectedGroup.description),i.Kb(2),i.Wc(i.sc(18,18,"group.linktobase")),i.Kb(3),i.Wc(i.sc(21,20,"group.buyfurni")),i.Kb(3),i.Wc(i.sc(24,22,"group.showgroups")),i.Kb(3),i.xc("ngIf",1!==t.selectedGroup.membershipType)}}const kf=function(t){return[t]};function Vf(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"p",3),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",4),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.cc(),i.cc(),i.dc(6,"div",5),i.dc(7,"div",6),i.Zb(8,"div",7),i.dc(9,"div",8),i.dc(10,"p",9),i.Vc(11),i.cc(),i.cc(),i.dc(12,"div",10),i.dc(13,"p",11),i.Vc(14),i.cc(),i.cc(),i.dc(15,"div",12),i.Zb(16,"p",13),i.rc(17,"translate"),i.cc(),i.dc(18,"div",14),i.Zb(19,"p",15),i.rc(20,"translate"),i.cc(),i.dc(21,"div",14),i.dc(22,"p",16),i.dc(23,"b",17),i.Vc(24),i.rc(25,"translate"),i.cc(),i.Vc(26),i.cc(),i.cc(),i.Zb(27,"div",18),i.Tc(28,Sf,5,3,"div",19),i.dc(29,"div",20),i.Tc(30,vf,4,3,"button",21),i.cc(),i.dc(31,"div",22),i.Tc(32,bf,3,3,"p",23),i.Tc(33,If,3,3,"p",24),i.cc(),i.dc(34,"div",25),i.Tc(35,Rf,2,1,"div",26),i.cc(),i.cc(),i.Zb(36,"div",27),i.dc(37,"div",28),i.dc(38,"div",29),i.dc(39,"p",30),i.dc(40,"b",17),i.Vc(41),i.rc(42,"translate"),i.cc(),i.Vc(43),i.cc(),i.cc(),i.dc(44,"p",31),i.Vc(45),i.rc(46,"translate"),i.cc(),i.dc(47,"div",32),i.nc("click",function(){i.Kc(t);const e=i.qc();return e.openRelationshipProfile(e.currentRandomHeartRelationship)}),i.dc(48,"p",33),i.Vc(49),i.rc(50,"translate"),i.cc(),i.Zb(51,"div",34),i.dc(52,"div",35),i.dc(53,"p",36),i.Vc(54),i.rc(55,"translate"),i.cc(),i.Tc(56,Tf,1,3,"div",37),i.cc(),i.cc(),i.dc(57,"div",32),i.nc("click",function(){i.Kc(t);const e=i.qc();return e.openRelationshipProfile(e.currentRandomSmileRelationship)}),i.dc(58,"p",33),i.Vc(59),i.rc(60,"translate"),i.cc(),i.Zb(61,"div",38),i.dc(62,"div",35),i.dc(63,"p",36),i.Vc(64),i.rc(65,"translate"),i.cc(),i.Tc(66,Of,1,3,"div",37),i.cc(),i.cc(),i.dc(67,"div",32),i.nc("click",function(){i.Kc(t);const e=i.qc();return e.openRelationshipProfile(e.currentRandomBobbaRelationship)}),i.dc(68,"p",33),i.Vc(69),i.rc(70,"translate"),i.cc(),i.Zb(71,"div",39),i.dc(72,"div",35),i.dc(73,"p",36),i.Vc(74),i.rc(75,"translate"),i.cc(),i.Tc(76,yf,1,3,"div",37),i.cc(),i.cc(),i.cc(),i.Zb(77,"div",40),i.dc(78,"div",41),i.Zb(79,"div",42),i.dc(80,"p",43),i.Vc(81),i.rc(82,"translate"),i.cc(),i.cc(),i.Zb(83,"div",40),i.dc(84,"div",44),i.dc(85,"div",45),i.dc(86,"div",46),i.Zb(87,"p",47),i.rc(88,"translate"),i.cc(),i.dc(89,"div",48),i.Tc(90,Af,4,5,"div",49),i.cc(),i.cc(),i.Tc(91,Ff,27,28,"div",50),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.sc(4,32,"extendedprofile.caption")),i.Kb(5),i.xc("figure",t.userProfile.figure)("direction",2),i.Kb(1),i.xc("ngClass",i.Bc(72,kf,t.isMe||t.isFriend?"":"rounded-left")),i.Kb(2),i.Wc(t.userProfile.username),i.Kb(3),i.Wc(t.userProfile.motto),i.Kb(2),i.xc("innerHTML",i.uc(17,34,"extendedprofile.created","created",t.userProfile.registration),i.Lc),i.Kb(3),i.xc("innerHTML",i.uc(20,38,"extendedprofile.last.login","lastlogin",t.userProfile.lastVisit),i.Lc),i.Kb(5),i.Wc(i.sc(25,42,"extendedprofile.achievementscore")),i.Kb(2),i.Xc(" ",t.userProfile.achievementPoints,""),i.Kb(1),i.xc("ngClass",t.userProfile.isOnline?"uprofile-user_online":"uprofile-user_offline"),i.Kb(1),i.xc("ngIf",t.isMe),i.Kb(2),i.xc("ngIf",!t.isMe&&!t.isFriend),i.Kb(2),i.xc("ngIf",t.isMe),i.Kb(1),i.xc("ngIf",t.isMe),i.Kb(2),i.xc("ngForOf",t.userBadges),i.Kb(6),i.Xc("",i.sc(42,44,"friendlist.friends"),":"),i.Kb(2),i.Xc(" ",t.userProfile.friendsCount,""),i.Kb(2),i.Wc(i.sc(46,46,"extendedprofile.relstatus")),i.Kb(4),i.Wc(t.heartRelationships.length>1?i.uc(50,48,"extendedprofile.relstatus.others.heart","count",t.heartRelationships.length-1):""),i.Kb(5),i.Wc(t.currentRandomHeartRelationship?t.currentRandomHeartRelationship.username:i.sc(55,52,"extendedprofile.no.friends.in.this.category")),i.Kb(2),i.xc("ngIf",t.currentRandomHeartRelationship),i.Kb(3),i.Wc(t.smileRelationships.length>1?i.uc(60,54,"extendedprofile.relstatus.others.smile","count",t.smileRelationships.length-1):""),i.Kb(5),i.Wc(t.currentRandomSmileRelationship?t.currentRandomSmileRelationship.username:i.sc(65,58,"extendedprofile.no.friends.in.this.category")),i.Kb(2),i.xc("ngIf",t.currentRandomSmileRelationship),i.Kb(3),i.Wc(t.bobbaRelationships.length>1?i.uc(70,60,"extendedprofile.relstatus.others.bobba","count",t.bobbaRelationships.length-1):""),i.Kb(5),i.Wc(t.currentRandomBobbaRelationship?t.currentRandomBobbaRelationship.username:i.sc(75,64,"extendedprofile.no.friends.in.this.category")),i.Kb(2),i.xc("ngIf",t.currentRandomBobbaRelationship),i.Kb(5),i.Wc(i.sc(82,66,"widget.memenu.myrooms")),i.Kb(6),i.xc("innerHTML",i.uc(88,68,"extendedprofile.groups.count","count",t.userProfile.groups.length),i.Lc),i.Kb(3),i.xc("ngForOf",t.userProfile.groups),i.Kb(1),i.xc("ngIf",t.selectedGroup)}}let Bf=(()=>{class t{constructor(t,e,s){this._userProfileService=t,this._sessionService=e,this._settingsService=s,this._currentRandomHeartRelationship=null,this._currentRandomSmileRelationship=null,this._currentRandomBobbaRelationship=null,this._tabId=0}ngOnInit(){this._userProfileService.component=this}ngOnDestroy(){this._userProfileService.component=null}hide(){this._settingsService.hideUserProfile()}openRelationshipProfile(t){t&&_.a.instance.communication.connection.send(new yu.a(t.userId))}getRandomRelationships(){this._currentRandomHeartRelationship=this.heartRelationships[Math.floor(Math.random()*this.heartRelationships.length)],this._currentRandomSmileRelationship=this.smileRelationships[Math.floor(Math.random()*this.smileRelationships.length)],this._currentRandomBobbaRelationship=this.bobbaRelationships[Math.floor(Math.random()*this.bobbaRelationships.length)]}selectGroup(t){this._userProfileService.selectGroup(t)}selectTab(t){this._tabId=t}get visible(){return this._settingsService.userProfileVisible}get userProfile(){return this._userProfileService.userLoadedProfile}get userBadges(){return this._userProfileService.userBadges}get isMe(){return!!this.userProfile&&this._sessionService.userId===this.userProfile.id}get isFriend(){return!!this.userProfile&&this.userProfile.isMyFriend}get heartRelationships(){return this._userProfileService.heartRelationships}get currentRandomHeartRelationship(){return this._currentRandomHeartRelationship}get smileRelationships(){return this._userProfileService.smileRelationships}get currentRandomSmileRelationship(){return this._currentRandomSmileRelationship}get bobbaRelationships(){return this._userProfileService.bobbaRelationships}get currentRandomBobbaRelationship(){return this._currentRandomBobbaRelationship}get selectedGroup(){return this._userProfileService.selectedGroup}get tabId(){return this._tabId}manage(){_.a.instance.createLinkEvent("groups/manage/"+this.groupId)}get groupId(){return this._groupId}set groupId(t){this._groupId=t}get groupName(){return this._groupName}set groupName(t){this._groupName=t}get groupBadgeCode(){return this._groupBadgeCode}set groupBadgeCode(t){this._groupBadgeCode=t}get groupDescription(){return this._groupDescription}set groupDescription(t){this._groupDescription=t}get groupType(){return this._groupType}set groupType(t){this._groupType=t}get groupMembershipType(){return this._groupMembershipType}set groupMembershipType(t){this._groupMembershipType=t}get groupCreationDate(){return this._groupCreationDate}set groupCreationDate(t){this._groupCreationDate=t}get groupOwnerName(){return this._groupOwnerName}set groupOwnerName(t){this._groupOwnerName=t}get groupMembersCount(){return this._groupMembersCount}set groupMembersCount(t){this._groupMembersCount=t}get groupMembershipRequestsCount(){return this._groupMembershipRequestsCount}set groupMembershipRequestsCount(t){this._groupMembershipRequestsCount=t}get groupHomeRoomId(){return this._groupHomeRoomId}set groupHomeRoomId(t){this._groupHomeRoomId=t}get isOwner(){return this._isOwner}set isOwner(t){this._isOwner=t}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Ef),i.Yb(Vi),i.Yb(m))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-user-profile-component"]],decls:1,vars:1,consts:[["id","user-profile","dragHandle",".drag-handler",3,"bringToTop","draggable",4,"ngIf"],["id","user-profile","dragHandle",".drag-handler",3,"bringToTop","draggable"],["id","user-profiledrag",1,"drag-handler"],[1,"up-baslik"],[1,"old-kapat",3,"click"],[1,"uprofile-box"],[1,"uprofile-left"],["nitro-avatar-image","",1,"uprofile_avatar-preview",3,"figure","direction"],[1,"uprofile-username-position",3,"ngClass"],[1,"text-shadow","uprofile-username"],[1,"uprofile-motto-position"],[1,"uprofile-motto-text"],[1,"uprofile-text-position",2,"padding-top","0px"],[1,"uprofile-create",3,"innerHTML"],[1,"uprofile-text-position"],[1,"uprofile-lastlogin",3,"innerHTML"],[1,"uprofile-score"],[1,"text-shadow"],[3,"ngClass"],["class","obenimbox",4,"ngIf"],[1,"notactive"],["class","uprofile-user-addfriends",4,"ngIf"],[1,"profil-avatar-edit"],["class","changelooks","style","cursor: not-allowed;",4,"ngIf"],["class","changebadges","style","cursor: not-allowed;",4,"ngIf"],[1,"uprofile-badge-preview"],[4,"ngFor","ngForOf"],[1,"uprofile-separator"],[1,"uprofile-right"],[1,"uprofile-friends-position"],[1,"uprofile-friends"],[1,"relationship-text"],[1,"relationship-box-position",3,"click"],[1,"and-others-text"],[1,"relationship-ico",2,"background-image","url(/assets/images/userprofile/kalp.png)"],[1,"relationship-user-box"],[1,"relationship-username"],["class","uprofile-habbo-avatar","nitro-avatar-image","",3,"headOnly","figure","direction",4,"ngIf"],[1,"relationship-ico",2,"background-image","url(/assets/images/userprofile/gulucuk.png)"],[1,"relationship-ico",2,"background-image","url(/assets/images/userprofile/kurukafa.png)"],[1,"uprofile-separator2"],[1,"uprofile-navigator-box"],[1,"up-nbox-ico"],[1,"up-nbox-text"],[1,"uprofile-group-list_box"],[1,"up-groupl-menu-box"],[1,"uprofile-gtext-position"],[1,"uprofile-create","text-shadow",3,"innerHTML"],[1,"uprofile-group-list"],["class","group_box-bg",3,"ngClass","click",4,"ngFor","ngForOf"],["class","up-groupl-preview-box",4,"ngIf"],[1,"obenimbox"],[1,"iconme"],[1,"obenimtxt"],[1,"uprofile-user-addfriends"],[1,"up-addfriends-text"],[1,"changelooks",2,"cursor","not-allowed"],[1,"changebadges",2,"cursor","not-allowed"],[1,"up-badge-preview-box",3,"badge"],["nitro-avatar-image","",1,"uprofile-habbo-avatar",3,"headOnly","figure","direction"],[1,"group_box-bg",3,"ngClass","click"],[1,"uprofile-group-favorite",2,"display","none"],[1,"uprofile-group-badge"],[3,"badge","isGroup"],[1,"up-groupl-preview-box"],[1,"group-info-bg"],[1,"group-info-box_left"],[1,"gbe-badge"],[1,"group-members"],[1,"group-info-box_right"],[1,"ginfo_group-name"],[1,"ginfo_group-creation-date"],[1,"ginfo_group-description"],[1,"ginfo_group-room"],[1,"ginfo_buy-group-mobi"],[1,"ginfo_popular-groups"],[1,"group-membership-action"],[4,"ngIf"],["class","leave_group-box",4,"ngIf"],[1,"leave_group-box"],[1,"leaveg-text"]],template:function(t,e){1&t&&i.Tc(0,Vf,92,74,"div",0),2&t&&i.xc("ngIf",e.visible)},directives:[p.n,Tr,Lr,_a,p.l,p.m,Gc],pipes:[ln],encapsulation:2}),t})();var Wf=s("te8b");let Kf=(()=>{class t{constructor(t){this._sanitizer=t}transform(t){return Wf.shortnameToUnicode(t)}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(n.b))},t.\u0275pipe=i.Xb({name:"nitroEmoji",type:t,pure:!1}),t})(),Gf=(()=>{class t{constructor(t,e){this._sanitizer=t,this._emojiPipe=e,this._allowedColors=new Map,this._allowedColors.set("r","red"),this._allowedColors.set("b","blue"),this._allowedColors.set("g","green"),this._allowedColors.set("y","yellow"),this._allowedColors.set("w","white"),this._allowedColors.set("o","orange"),this._allowedColors.set("c","cyan"),this._allowedColors.set("br","brown"),this._allowedColors.set("pr","purple"),this._allowedColors.set("pk","pink"),this._allowedColors.set("red","red"),this._allowedColors.set("blue","blue"),this._allowedColors.set("green","green"),this._allowedColors.set("yellow","yellow"),this._allowedColors.set("white","white"),this._allowedColors.set("orange","orange"),this._allowedColors.set("cyan","cyan"),this._allowedColors.set("brown","brown"),this._allowedColors.set("purple","purple"),this._allowedColors.set("pink","pink")}transform(t){let e="";if(t=t.replace(/<[^>]*>/g,""),(t=this._emojiPipe.transform(t)).startsWith("@")&&t.indexOf("@",1)>-1){let s=null;for(;null!==(s=/@[a-zA-Z]+@/g.exec(t));){const i=s[0].toString(),n=i.substr(1,i.length-2),r=t.replace(i,"");e=this._allowedColors.has(n)?'<span style="color: '+this._allowedColors.get(n)+'">'+r+"</span>":r;break}}else e=t;return this._sanitizer.bypassSecurityTrustHtml(e)}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(n.b),i.Yb(Kf))},t.\u0275pipe=i.Xb({name:"roomChatFormatter",type:t,pure:!1}),t})();const Hf=["historyScroller"],jf=function(t){return{"background-color":t}};function zf(t,e){if(1&t&&i.Zb(0,"div",20),2&t){const t=i.qc(2).$implicit;i.xc("ngStyle",i.Bc(1,jf,t.senderColorString))}}const Yf=function(t){return{"background-image":t}};function qf(t,e){if(1&t&&i.Zb(0,"div",21),2&t){const t=i.qc(2).$implicit;i.xc("ngStyle",i.Bc(1,Yf,"url("+t.senderImageUrl+")"))}}function Zf(t,e){if(1&t){const t=i.ec();i.dc(0,"div",13),i.nc("click",function(){i.Kc(t);const e=i.qc().$implicit;return i.qc(2).selectUser(e.senderId)}),i.Tc(1,zf,1,3,"div",14),i.dc(2,"div"),i.dc(3,"div",15),i.Tc(4,qf,1,3,"div",16),i.cc(),i.dc(5,"div",17),i.Zb(6,"b",18),i.Zb(7,"span",19),i.rc(8,"roomChatFormatter"),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc().$implicit;i.Kb(1),i.xc("ngIf",0===t.chatStyle),i.Kb(1),i.Ob("chat-bubble bubble-",t.chatStyle," type-",t.chatType,""),i.Kb(2),i.xc("ngIf",t.senderImageUrl),i.Kb(2),i.xc("innerHTML",t.senderName,i.Lc),i.Kb(1),i.xc("innerHTML",i.sc(8,8,t.content),i.Lc)}}function Xf(t,e){if(1&t&&(i.dc(0,"div",22),i.Zb(1,"img",23),i.dc(2,"p",24),i.Vc(3),i.cc(),i.cc()),2&t){const t=i.qc().$implicit;i.Kb(3),i.Wc(t.content)}}function Qf(t,e){if(1&t&&(i.bc(0),i.dc(1,"div",7),i.dc(2,"div",8),i.dc(3,"div",9),i.Vc(4),i.rc(5,"date"),i.cc(),i.cc(),i.dc(6,"div",10),i.Tc(7,Zf,9,10,"div",11),i.Tc(8,Xf,4,1,"div",12),i.cc(),i.cc(),i.ac()),2&t){const t=e.$implicit;i.Kb(4),i.Wc(i.tc(5,3,t.date,"hh:mm:ss")),i.Kb(3),i.xc("ngIf",-1!==t.senderId),i.Kb(1),i.xc("ngIf",-1===t.senderId)}}function Jf(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2,3),i.dc(3,"div",4),i.Tc(4,Qf,9,6,"ng-container",5),i.cc(),i.cc(),i.dc(5,"div",6),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.cc(),i.cc()}if(2&t){const t=i.qc();i.xc("topCenter",!1)("center",!1)("noMemory",!0),i.Kb(4),i.xc("ngForOf",t.historyItems)("ngForTrackBy",t.trackById)}}let $f=(()=>{class t{constructor(t,e){this._settingsService=t,this._chatHistoryService=e}ngOnChanges(t){const e=t.visible.currentValue;e&&e!==t.visible.previousValue&&setTimeout(()=>this.scrollToBottom(),1)}hide(){this._settingsService.hideChatHistory()}selectUser(t){t&&_.a.instance.roomEngine.selectRoomObject(_.a.instance.roomEngine.activeRoomId,t,V.a.UNIT)}trackById(t,e){return e.id}scrollToBottom(){this.historyScroller&&this.historyScroller.directiveRef.scrollToBottom(0)}get historyItems(){return this._chatHistoryService.historyItems}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(m),i.Yb(js))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-chat-history-component"]],viewQuery:function(t,e){if(1&t&&i.bd(Hf,1),2&t){let t;i.Gc(t=i.oc())&&(e.historyScroller=t.first)}},inputs:{visible:"visible"},features:[i.Ib],decls:1,vars:1,consts:[["class","sohbetgecmis nitro-chat-history-component",3,"bringToTop","draggable","topCenter","center","noMemory",4,"ngIf"],[1,"sohbetgecmis","nitro-chat-history-component",3,"bringToTop","draggable","topCenter","center","noMemory"],[1,"historyscroller","position-relative"],["historyScroller",""],[1,"d-flex","flex-column"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"sohbetgecmis-kapat",3,"click"],[1,"row",2,"margin-bottom","-1px"],[1,"d-flex","col-2","align-items-center"],[1,"badge","badge-sm",2,"font-style","italic","color","#ffffff70"],[1,"d-flex","col-9","align-items-center","pl-0"],["class","bubble-container",3,"click",4,"ngIf"],["class","badge badge-sm","style","color: red;font-family: system-ui;",4,"ngIf"],[1,"bubble-container",3,"click"],["class","user-container-bg",3,"ngStyle",4,"ngIf"],[1,"user-container"],["class","user-image",3,"ngStyle",4,"ngIf"],[1,"chat-content"],[1,"username-container",3,"innerHTML"],[1,"message",3,"innerHTML"],[1,"user-container-bg",3,"ngStyle"],[1,"user-image",3,"ngStyle"],[1,"badge","badge-sm",2,"color","red","font-family","system-ui"],["src","/assets/images/smallroomico.png",2,"margin","3px"],[1,"odayagirdi"]],template:function(t,e){1&t&&i.Tc(0,Jf,6,5,"div",0),2&t&&i.xc("ngIf",e.visible)},directives:[p.n,Tr,Lr,p.m,p.o],pipes:[p.d,Gf],encapsulation:2}),t})();var tE=s("uHVT"),eE=s("RH6c"),sE=s("hUfz"),iE=s("SqPf"),nE=s("asTc");let rE=(()=>{class t{constructor(t){this._ngZone=t,this._messages=[],this._volumeSystem=0,this._volumeFurni=0,this._volumeTrax=0,this._oldChat=!1,this._roomInvites=!1,this._cameraFollow=!0,this._flags=0,this._chatType=0,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),this._messages=[new tE.a(this.onUserSettingsEvent.bind(this))];for(const t of this._messages)_.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(this._messages&&this._messages.length){for(const t of this._messages)_.a.instance.communication.removeMessageEvent(t);this._messages=[]}})}onUserSettingsEvent(t){if(!t)return;const e=t.getParser();e&&(this._volumeSystem=e.volumeSystem/100,this._volumeFurni=e.volumeFurni/100,this._volumeTrax=e.volumeTrax/100,this._oldChat=e.oldChat,this._roomInvites=e.roomInvites,this._cameraFollow=e.cameraFollow,this._flags=e.flags,this._chatType=e.chatType,this.sendUpdateEvent())}sendSound(){_.a.instance.communication.connection.send(new nE.a(Math.round(100*this._volumeSystem),Math.round(100*this._volumeFurni),Math.round(100*this._volumeTrax)))}sendUpdateEvent(){const t=new Ws.a(Ws.a.SETTINGS_UPDATED);t.volumeSystem=this._volumeSystem,t.volumeFurni=this._volumeFurni,t.volumeTrax=this._volumeTrax,t.oldChat=this._oldChat,t.roomInvites=this._roomInvites,t.cameraFollow=this._cameraFollow,t.flags=this._flags,t.chatType=this._chatType,_.a.instance.events.dispatchEvent(t)}_sendOldChat(){_.a.instance.communication.connection.send(new sE.a(this._oldChat))}_sendRoomInvites(){_.a.instance.communication.connection.send(new iE.a(this._roomInvites))}_sendCameraFollow(){_.a.instance.communication.connection.send(new eE.a(this._cameraFollow))}get volumeSystem(){return this._volumeSystem}set volumeSystem(t){t>1&&(t=1),t<0&&(t=0),this._volumeSystem=t,this.sendUpdateEvent()}get volumeFurni(){return this._volumeFurni}set volumeFurni(t){t>1&&(t=1),t<0&&(t=0),this._volumeFurni=t,this.sendUpdateEvent()}get volumeTrax(){return this._volumeTrax}set volumeTrax(t){t>1&&(t=1),t<0&&(t=0),this._volumeTrax=t,this.sendUpdateEvent()}get oldChat(){return this._oldChat}set oldChat(t){this._oldChat=t,this._sendOldChat()}get roomInvites(){return this._roomInvites}set roomInvites(t){this._roomInvites=t,this._sendRoomInvites()}get cameraFollow(){return this._cameraFollow}set cameraFollow(t){this._cameraFollow=t,this._sendCameraFollow(),this.sendUpdateEvent()}get flags(){return this._flags}set flags(t){this._flags=t,this.sendUpdateEvent()}get chatType(){return this._chatType}set chatType(t){this._chatType=t,this.sendUpdateEvent()}}return t.\u0275fac=function(e){return new(e||t)(i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();const aE=function(t){return{"text-muted":t}},oE=function(t,e){return{"ses-1-0":t,"ses-1-1":e}},cE=function(t){return{"ses-2-2":t}};function hE(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"div",3),i.Vc(3),i.rc(4,"translate"),i.cc(),i.cc(),i.Zb(5,"div",4),i.dc(6,"div",5),i.dc(7,"label",6),i.dc(8,"p",7),i.Vc(9),i.rc(10,"translate"),i.cc(),i.dc(11,"input",8),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().oldChat=e}),i.cc(),i.Zb(12,"span",9),i.cc(),i.dc(13,"label",10),i.dc(14,"p",7),i.Vc(15),i.rc(16,"translate"),i.cc(),i.dc(17,"input",11),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().roomInvites=e}),i.cc(),i.Zb(18,"span",9),i.cc(),i.dc(19,"label",12),i.dc(20,"p",7),i.Vc(21),i.rc(22,"translate"),i.cc(),i.dc(23,"input",13),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().cameraFollow=e}),i.cc(),i.Zb(24,"span",9),i.cc(),i.dc(25,"div",14),i.Vc(26),i.rc(27,"translate"),i.cc(),i.Zb(28,"div",15),i.dc(29,"div",16),i.dc(30,"label",17),i.Vc(31),i.rc(32,"translate"),i.cc(),i.dc(33,"div",18),i.dc(34,"div",19),i.Zb(35,"div",20),i.cc(),i.dc(36,"div",21),i.Zb(37,"div",22),i.dc(38,"input",23),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().volumeSystem=e})("mouseup",function(){return i.Kc(t),i.qc().saveSound()}),i.cc(),i.cc(),i.dc(39,"div",24),i.Zb(40,"div",25),i.Zb(41,"div",26),i.cc(),i.cc(),i.cc(),i.dc(42,"div",16),i.dc(43,"label",27),i.Vc(44),i.rc(45,"translate"),i.cc(),i.dc(46,"div",18),i.dc(47,"div",19),i.Zb(48,"div",20),i.cc(),i.dc(49,"div",21),i.Zb(50,"div",22),i.dc(51,"input",28),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().volumeFurni=e})("mouseup",function(){return i.Kc(t),i.qc().saveSound()}),i.cc(),i.cc(),i.dc(52,"div",24),i.Zb(53,"div",25),i.Zb(54,"div",26),i.cc(),i.cc(),i.cc(),i.dc(55,"div",16),i.dc(56,"label",29),i.Vc(57),i.rc(58,"translate"),i.cc(),i.dc(59,"div",18),i.dc(60,"div",19),i.Zb(61,"div",20),i.cc(),i.dc(62,"div",21),i.Zb(63,"div",22),i.dc(64,"input",30),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().volumeTrax=e})("mouseup",function(){return i.Kc(t),i.qc().saveSound()}),i.cc(),i.cc(),i.dc(65,"div",24),i.Zb(66,"div",25),i.Zb(67,"div",26),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(68,"div",31),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.Vc(69),i.rc(70,"translate"),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.sc(4,24,"widget.memenu.settings.title")),i.Kb(6),i.Wc(i.sc(10,26,"memenu.settings.chat.prefer.old.chat")),i.Kb(2),i.xc("ngModel",t.oldChat),i.Kb(4),i.Wc(i.sc(16,28,"memenu.settings.other.ignore.room.invites")),i.Kb(2),i.xc("ngModel",t.roomInvites),i.Kb(4),i.Wc(i.sc(22,30,"memenu.settings.other.disable.room.camera.follow")),i.Kb(2),i.xc("ngModel",t.cameraFollow),i.Kb(3),i.Wc(i.sc(27,32,"widget.memenu.settings.volume")),i.Kb(5),i.Wc(i.sc(32,34,"widget.memenu.settings.volume.ui")),i.Kb(3),i.xc("ngClass",i.Bc(42,aE,t.volumeSystem>=50)),i.Kb(1),i.xc("ngClass",i.Cc(44,oE,0===t.volumeSystem,t.volumeSystem>0)),i.Kb(3),i.xc("ngModel",t.volumeSystem),i.Kb(2),i.xc("ngClass",i.Bc(47,cE,t.volumeSystem<50)),i.Kb(4),i.Wc(i.sc(45,36,"widget.memenu.settings.volume.furni")),i.Kb(3),i.xc("ngClass",i.Bc(49,aE,t.volumeFurni>=50)),i.Kb(1),i.xc("ngClass",i.Cc(51,oE,0===t.volumeFurni,t.volumeFurni>0)),i.Kb(3),i.xc("ngModel",t.volumeFurni),i.Kb(2),i.xc("ngClass",i.Bc(54,cE,t.volumeFurni<50)),i.Kb(4),i.Wc(i.sc(58,38,"widget.memenu.settings.volume.trax")),i.Kb(3),i.xc("ngClass",i.Bc(56,aE,t.volumeTrax>=50)),i.Kb(1),i.xc("ngClass",i.Cc(58,oE,0===t.volumeTrax,t.volumeTrax>0)),i.Kb(3),i.xc("ngModel",t.volumeTrax),i.Kb(2),i.xc("ngClass",i.Bc(61,cE,t.volumeTrax<50)),i.Kb(3),i.Wc(i.sc(70,40,"alert.close.button"))}}let lE=(()=>{class t{constructor(t,e){this._userSettingsService=t,this._settingsService=e,this.visible=!1}hide(){this._settingsService.hideUserSettings()}saveSound(){this._userSettingsService.sendSound()}get volumeSystem(){return 100*this._userSettingsService.volumeSystem}set volumeSystem(t){this._userSettingsService.volumeSystem=t/100}get volumeFurni(){return 100*this._userSettingsService.volumeFurni}set volumeFurni(t){this._userSettingsService.volumeFurni=t/100}get volumeTrax(){return 100*this._userSettingsService.volumeTrax}set volumeTrax(t){this._userSettingsService.volumeTrax=t/100}get oldChat(){return this._userSettingsService.oldChat}set oldChat(t){this._userSettingsService.oldChat=t}get roomInvites(){return this._userSettingsService.roomInvites}set roomInvites(t){this._userSettingsService.roomInvites=t}get cameraFollow(){return this._userSettingsService.cameraFollow}set cameraFollow(t){this._userSettingsService.cameraFollow=t}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(rE),i.Yb(m))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-user-settings-component"]],inputs:{visible:"visible"},decls:1,vars:1,consts:[["class","flashsettings",4,"ngIf"],[1,"flashsettings"],[1,"usettings-head"],[1,"usettings-hood"],[1,"usersettings-hr"],[1,"usettings-body"],["for","oldChat",1,"rs-select_container2",2,"margin-bottom","11px"],[1,"rs-sctxt",2,"padding-top","1px"],["type","checkbox","id","oldChat",3,"ngModel","ngModelChange"],[1,"checkmarkrs2"],["for","roomInvites",1,"rs-select_container2",2,"margin-bottom","11px"],["type","checkbox","id","roomInvites",3,"ngModel","ngModelChange"],["for","cameraFollow",1,"rs-select_container2"],["type","checkbox","id","cameraFollow",3,"ngModel","ngModelChange"],[1,"usettings-baslik"],[1,"usersettings-hr",2,"margin-bottom","11px"],[1,"us-rangebox"],["for","volumeSystem",1,"fortext-us"],[1,"hayamk","d-flex","flex-row"],[3,"ngClass"],[1,"sesayar",3,"ngClass"],[1,"wiredrange_box"],[1,"rakamlar"],["type","range","min","0","max","100","step","1","id","volumeSystem",1,"wiredrange",3,"ngModel","ngModelChange","mouseup"],[1,"us-buttontest"],[1,"ses-2-2",3,"ngClass"],[1,"ses-2-0"],["for","volumeFurni",1,"fortext-us"],["type","range","min","0","max","100","step","1","id","volumeFurni",1,"wiredrange",3,"ngModel","ngModelChange","mouseup"],["for","volumeTrax",1,"fortext-us"],["type","range","min","0","max","100","step","1","id","volumeTrax",1,"wiredrange",3,"ngModel","ngModelChange","mouseup"],[1,"uskapat",3,"click"]],template:function(t,e){1&t&&i.Tc(0,hE,71,63,"div",0),2&t&&i.xc("ngIf",e.visible)},directives:[p.n,rr.a,rr.l,rr.n,p.l,rr.r,rr.b],pipes:[ln],encapsulation:2}),t})();var uE=s("bakE"),_E=s("XxiA"),dE=s("vKkO"),gE=s("amIx"),mE=s("Yp13"),pE=s("FXkd"),fE=s("qoEl");class EE extends g.Filter{constructor(t,e){super("\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec3 lineColor;\nuniform vec3 color;\nvoid main(void) {\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n    vec3 colorLine = lineColor * currentColor.a;\n    vec3 colorOverlay = color * currentColor.a;\n\n    if(currentColor.r == 0.0 && currentColor.g == 0.0 && currentColor.b == 0.0 && currentColor.a > 0.0) {\n        gl_FragColor = vec4(colorLine.r, colorLine.g, colorLine.b, currentColor.a);\n    } else if(currentColor.a > 0.0) {\n        gl_FragColor = vec4(colorOverlay.r, colorOverlay.g, colorOverlay.b, currentColor.a);\n    }\n}"),this.uniforms.lineColor=new Float32Array(3),this.uniforms.color=new Float32Array(3),this.lineColor=t,this.color=e}get lineColor(){return this._lineColor}set lineColor(t){const e=this.uniforms.lineColor;"number"==typeof t?(Object(fE.hex2rgb)(t,e),this._lineColor=t):(e[0]=t[0],e[1]=t[1],e[2]=t[2],this._lineColor=Object(fE.rgb2hex)(e))}get color(){return this._color}set color(t){const e=this.uniforms.color;"number"==typeof t?(Object(fE.hex2rgb)(t,e),this._color=t):(e[0]=t[0],e[1]=t[1],e[2]=t[2],this._color=Object(fE.rgb2hex)(e))}}class SE{constructor(t){this._component=t;const e=new EE([1,1,1],[.6,.6,.6]);this._selectionShader=e}show(t){this.applySelectionShader(this.getRoomObject(t))}hide(t){this.clearSelectionShader(this.getRoomObject(t))}clearSelectionShaderFromFurni(t){for(const e of t)this.clearSelectionShader(this.getRoomObject(e))}applySelectionShaderToFurni(t){for(const e of t)this.applySelectionShader(this.getRoomObject(e))}getRoomObject(t){return this._component?_.a.instance.roomEngine.getRoomObject(this._component.roomId,t,V.a.FLOOR):null}applySelectionShader(t){if(!t)return;const e=t.visualization;if(e)for(const s of e.sprites)s.blendMode!==g.BLEND_MODES.ADD&&(s.filters=[this._selectionShader])}clearSelectionShader(t){if(!t)return;const e=t.visualization;if(e)for(const s of e.sprites)s.filters=[]}}let vE=(()=>{class t{constructor(t,e){this._wiredService=t,this._formBuilder=e}get code(){return-1}get negativeCode(){return-1}get requiresFurni(){return Bv._Str_5431}get hasStateSnapshot(){return!1}readIntegerParamsFromForm(){return[]}readStringParamFromForm(){return""}onInitStart(){}onEditStart(t){}get hasSpecialInputs(){return!1}validate(){return null}static getLocaleName(t){const e=Math.floor(t/2);return t%2?(e+.5).toString():e.toString()}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(us),i.Yb(rr.c))},t.\u0275dir=i.Tb({type:t}),t})();class bE extends vE{constructor(){super(...arguments),this.delay=0}onEditStart(t){this.delay=t.delayInPulses}}class IE extends vE{}let RE=(()=>{class t{}return t.STATES_MATCH=0,t.FURNIS_HAVE_AVATARS=1,t.TRIGGERER_IS_ON_FURNI=2,t.TIME_ELAPSED_MORE=3,t.TIME_ELAPSED_LESS=4,t.USER_COUNT_IN=5,t.ACTOR_IS_IN_TEAM=6,t.HAS_STACKED_FURNIS=7,t.STUFF_TYPE_MATCHES=8,t.STUFFS_IN_FORMATION=9,t.ACTOR_IS_GROUP_MEMBER=10,t.ACTOR_IS_WEARING_BADGE=11,t.ACTOR_IS_WEARING_EFFECT=12,t.NOT_STATES_MATCH=13,t.FURNI_NOT_HAVE_HABBO=14,t.NOT_ACTOR_ON_FURNI=15,t.NOT_USER_COUNT_IN=16,t.NOT_ACTOR_IN_TEAM=17,t.NOT_HAS_STACKED_FURNIS=18,t.NOT_FURNI_IS_OF_TYPE=19,t.NOT_STUFFS_IN_FORMATION=20,t.NOT_ACTOR_IN_GROUP=21,t.NOT_ACTOR_WEARS_BADGE=22,t.NOT_ACTOR_WEARING_EFFECT=23,t.DATE_RANGE_ACTIVE=24,t.ACTOR_HAS_HANDITEM=25,t})(),TE=(()=>{class t extends IE{constructor(){super(...arguments),this.allowedHanditemIds=["2","5","7","8","9","10","27"],this.handitemId="0"}get code(){return t.CODE}onEditStart(t){this.handitemId=t.intData.length>0&&this.allowedHanditemIds.includes(t.intData[0].toString())?t.intData[0].toString():"0"}readIntegerParamsFromForm(){return[parseInt(this.handitemId)]}get hasSpecialInputs(){return!0}}return t.CODE=RE.ACTOR_HAS_HANDITEM,t.\u0275fac=function(e){return OE(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:30,vars:36,consts:[[1,"wired-options-box"],[1,"wired-subheader"],[1,"wiredselectbox",3,"ngModel","ngModelChange"],["value","0",3,"selected"],["value","2",3,"selected"],["value","5",3,"selected"],["value","7",3,"selected"],["value","8",3,"selected"],["value","9",3,"selected"],["value","10",3,"selected"],["value","27",3,"selected"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"p",1),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"select",2),i.nc("ngModelChange",function(t){return e.handitemId=t}),i.dc(6,"option",3),i.Vc(7),i.rc(8,"translate"),i.cc(),i.dc(9,"option",4),i.Vc(10),i.rc(11,"translate"),i.cc(),i.dc(12,"option",5),i.Vc(13),i.rc(14,"translate"),i.cc(),i.dc(15,"option",6),i.Vc(16),i.rc(17,"translate"),i.cc(),i.dc(18,"option",7),i.Vc(19),i.rc(20,"translate"),i.cc(),i.dc(21,"option",8),i.Vc(22),i.rc(23,"translate"),i.cc(),i.dc(24,"option",9),i.Vc(25),i.rc(26,"translate"),i.cc(),i.dc(27,"option",10),i.Vc(28),i.rc(29,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(i.sc(4,18,"wiredfurni.params.handitem")),i.Kb(2),i.xc("ngModel",e.handitemId),i.Kb(1),i.xc("selected","0"==e.handitemId),i.Kb(1),i.Wc(i.sc(8,20,"wiredfurni.tooltip.handitem")),i.Kb(2),i.xc("selected","2"==e.handitemId),i.Kb(1),i.Wc(i.sc(11,22,"handitem2")),i.Kb(2),i.xc("selected","5"==e.handitemId),i.Kb(1),i.Wc(i.sc(14,24,"handitem5")),i.Kb(2),i.xc("selected","7"==e.handitemId),i.Kb(1),i.Wc(i.sc(17,26,"handitem7")),i.Kb(2),i.xc("selected","8"==e.handitemId),i.Kb(1),i.Wc(i.sc(20,28,"handitem8")),i.Kb(2),i.xc("selected","9"==e.handitemId),i.Kb(1),i.Wc(i.sc(23,30,"handitem9")),i.Kb(2),i.xc("selected","10"==e.handitemId),i.Kb(1),i.Wc(i.sc(26,32,"handitem10")),i.Kb(2),i.xc("selected","27"==e.handitemId),i.Kb(1),i.Wc(i.sc(29,34,"handitem27")))},encapsulation:2}),t})();const OE=i.fc(TE);let yE=(()=>{class t extends IE{get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}}return t.CODE=RE.ACTOR_IS_GROUP_MEMBER,t.NEGATIVE_CODE=RE.NOT_ACTOR_IN_GROUP,t.\u0275fac=function(e){return CE(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:0,template:function(t,e){1&t&&i.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const CE=i.fc(yE);let AE=(()=>{class t extends IE{constructor(){super(...arguments),this.team="1"}get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}onEditStart(t){this.team=t.intData[0].toString()}readIntegerParamsFromForm(){return[Number.parseInt(this.team)]}get hasSpecialInputs(){return!0}}return t.CODE=RE.ACTOR_IS_IN_TEAM,t.NEGATIVE_CODE=RE.NOT_ACTOR_IN_TEAM,t.\u0275fac=function(e){return ME(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:25,vars:19,consts:[[1,"select-trigger-user"],[1,"wired-subheader"],[1,"rs-select_container-radio"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","radio","value","3",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","radio","value","4",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"p",1),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",2),i.dc(6,"input",3),i.nc("ngModelChange",function(t){return e.team=t}),i.cc(),i.dc(7,"label",4),i.Vc(8),i.rc(9,"translate"),i.cc(),i.cc(),i.dc(10,"div",2),i.dc(11,"input",5),i.nc("ngModelChange",function(t){return e.team=t}),i.cc(),i.dc(12,"label",4),i.Vc(13),i.rc(14,"translate"),i.cc(),i.cc(),i.dc(15,"div",2),i.dc(16,"input",6),i.nc("ngModelChange",function(t){return e.team=t}),i.cc(),i.dc(17,"label",4),i.Vc(18),i.rc(19,"translate"),i.cc(),i.cc(),i.dc(20,"div",2),i.dc(21,"input",7),i.nc("ngModelChange",function(t){return e.team=t}),i.cc(),i.dc(22,"label",4),i.Vc(23),i.rc(24,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(i.sc(4,9,"wiredfurni.params.team")),i.Kb(3),i.xc("ngModel",e.team),i.Kb(2),i.Wc(i.sc(9,11,"wiredfurni.params.team.1")),i.Kb(3),i.xc("ngModel",e.team),i.Kb(2),i.Wc(i.sc(14,13,"wiredfurni.params.team.2")),i.Kb(3),i.xc("ngModel",e.team),i.Kb(2),i.Wc(i.sc(19,15,"wiredfurni.params.team.3")),i.Kb(3),i.xc("ngModel",e.team),i.Kb(2),i.Wc(i.sc(24,17,"wiredfurni.params.team.4")))},encapsulation:2}),t})();const ME=i.fc(AE);let wE=(()=>{class t extends IE{get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}readIntegerParamsFromForm(){const t=parseInt(this.effectId);return isNaN(t)?[]:[t]}onEditStart(t){this.effectId=t.stringData.length>0?t.stringData:"0"}get hasSpecialInputs(){return!0}}return t.CODE=RE.ACTOR_IS_WEARING_EFFECT,t.NEGATIVE_CODE=RE.NOT_ACTOR_WEARING_EFFECT,t.\u0275fac=function(e){return DE(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:6,vars:4,consts:[[1,"wired-options-box"],[1,"wired-subheader"],["type","text",1,"wpanel-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"p",1),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",2),i.nc("ngModelChange",function(t){return e.effectId=t}),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(i.sc(4,2,"wiredfurni.params.effectid")),i.Kb(2),i.xc("ngModel",e.effectId))},encapsulation:2}),t})();const DE=i.fc(wE);let NE=(()=>{class t extends IE{get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}get requiresFurni(){return Bv._Str_4873}}return t.CODE=RE.TRIGGERER_IS_ON_FURNI,t.NEGATIVE_CODE=RE.NOT_ACTOR_ON_FURNI,t.\u0275fac=function(e){return UE(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:0,template:function(t,e){1&t&&i.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const UE=i.fc(NE);let xE=(()=>{class t extends IE{get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}readStringParamFromForm(){return this.botName}onEditStart(t){this.botName=t.stringData}get hasSpecialInputs(){return!0}}return t.CODE=RE.ACTOR_IS_WEARING_BADGE,t.NEGATIVE_CODE=RE.NOT_ACTOR_WEARS_BADGE,t.\u0275fac=function(e){return LE(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:6,vars:4,consts:[[1,"wired-options-box"],[1,"wired-subheader"],["type","text",1,"wpanel-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"p",1),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",2),i.nc("ngModelChange",function(t){return e.botName=t}),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(i.sc(4,2,"wiredfurni.params.badgecode")),i.Kb(2),i.xc("ngModel",e.botName))},encapsulation:2}),t})();const LE=i.fc(xE);let PE=(()=>{class t extends IE{get code(){return t.CODE}test(){return t.CODE}readIntegerParamsFromForm(){const t=[],e=new Date(this.startDate).getTime();if(!isNaN(e)){t.push(e/1e3);const s=new Date(this.endDate).getTime();isNaN(s)||t.push(s/1e3)}return t}onEditStart(t){let e,s;e=t.intData.length>0?new Date(1e3*t.intData[0]):new Date(0),s=t.intData.length>1?new Date(1e3*t.intData[1]):new Date(0),this.startDate=this.dateToString(e),this.endDate=this.dateToString(s)}get hasSpecialInputs(){return!0}dateToString(t){return`${t.getFullYear()}/${("0"+(t.getMonth()+1)).slice(-2)}/${("0"+t.getDate()).slice(-2)} ${("0"+t.getHours()).slice(-2)}:${("0"+t.getMinutes()).slice(-2)}`}}return t.CODE=RE.DATE_RANGE_ACTIVE,t.\u0275fac=function(e){return FE(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:11,vars:8,consts:[[1,"wired-options-box"],[1,"wired-subheader"],["type","text",1,"wpanel-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"p",1),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",2),i.nc("ngModelChange",function(t){return e.startDate=t}),i.cc(),i.cc(),i.dc(6,"div",0),i.dc(7,"p",1),i.Vc(8),i.rc(9,"translate"),i.cc(),i.dc(10,"input",2),i.nc("ngModelChange",function(t){return e.endDate=t}),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(i.sc(4,4,"wiredfurni.params.startdate")),i.Kb(2),i.xc("ngModel",e.startDate),i.Kb(3),i.Wc(i.sc(9,6,"wiredfurni.params.enddate")),i.Kb(2),i.xc("ngModel",e.endDate))},encapsulation:2}),t})();const FE=i.fc(PE);let kE=(()=>{class t extends IE{constructor(){super(...arguments),this.requireAll="0"}get code(){return t.CODE}get requiresFurni(){return Bv._Str_4873}onEditStart(t){this.requireAll=t.intData.length>0&&1===t.intData[0]?"1":"0"}readIntegerParamsFromForm(){return["1"===this.requireAll?1:0]}get hasSpecialInputs(){return!0}}return t.CODE=RE.NOT_HAS_STACKED_FURNIS,t.\u0275fac=function(e){return VE(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:15,vars:11,consts:[[1,"wired-options-box"],[1,"wired-subheader"],[1,"rs-select_container-radio"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"p",1),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",2),i.dc(6,"input",3),i.nc("ngModelChange",function(t){return e.requireAll=t}),i.cc(),i.dc(7,"label",4),i.Vc(8),i.rc(9,"translate"),i.cc(),i.cc(),i.dc(10,"div",2),i.dc(11,"input",5),i.nc("ngModelChange",function(t){return e.requireAll=t}),i.cc(),i.dc(12,"label",4),i.Vc(13),i.rc(14,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(i.sc(4,5,"wiredfurni.params.not_requireall")),i.Kb(3),i.xc("ngModel",e.requireAll),i.Kb(2),i.Wc(i.sc(9,7,"wiredfurni.params.not_requireall.0")),i.Kb(3),i.xc("ngModel",e.requireAll),i.Kb(2),i.Wc(i.sc(14,9,"wiredfurni.params.not_requireall.1")))},encapsulation:2}),t})();const VE=i.fc(kE);let BE=(()=>{class t extends IE{get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}get requiresFurni(){return Bv._Str_4873}}return t.CODE=RE.FURNIS_HAVE_AVATARS,t.NEGATIVE_CODE=RE.FURNI_NOT_HAVE_HABBO,t.\u0275fac=function(e){return WE(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:0,template:function(t,e){1&t&&i.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const WE=i.fc(BE);let KE=(()=>{class t extends IE{get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}get requiresFurni(){return Bv._Str_4991}}return t.CODE=RE.STUFF_TYPE_MATCHES,t.NEGATIVE_CODE=RE.NOT_FURNI_IS_OF_TYPE,t.\u0275fac=function(e){return GE(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:0,template:function(t,e){1&t&&i.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const GE=i.fc(KE);let HE=(()=>{class t extends IE{constructor(){super(...arguments),this.requireAll="0"}get code(){return t.CODE}get requiresFurni(){return Bv._Str_4873}onEditStart(t){this.requireAll=t.intData.length>0&&1===t.intData[0]?"1":"0"}readIntegerParamsFromForm(){return["1"===this.requireAll?1:0]}get hasSpecialInputs(){return!0}}return t.CODE=RE.HAS_STACKED_FURNIS,t.\u0275fac=function(e){return jE(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:15,vars:11,consts:[[1,"wired-options-box"],[1,"wired-subheader"],[1,"rs-select_container-radio"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"p",1),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",2),i.dc(6,"input",3),i.nc("ngModelChange",function(t){return e.requireAll=t}),i.cc(),i.dc(7,"label",4),i.Vc(8),i.rc(9,"translate"),i.cc(),i.cc(),i.dc(10,"div",2),i.dc(11,"input",5),i.nc("ngModelChange",function(t){return e.requireAll=t}),i.cc(),i.dc(12,"label",4),i.Vc(13),i.rc(14,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(i.sc(4,5,"wiredfurni.params.requireall")),i.Kb(3),i.xc("ngModel",e.requireAll),i.Kb(2),i.Wc(i.sc(9,7,"wiredfurni.params.requireall.0")),i.Kb(3),i.xc("ngModel",e.requireAll),i.Kb(2),i.Wc(i.sc(14,9,"wiredfurni.params.requireall.1")))},encapsulation:2}),t})();const jE=i.fc(HE);let zE=(()=>{class t extends IE{get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}get requiresFurni(){return Bv._Str_4873}get hasStateSnapshot(){return!0}onEditStart(t){this.state=t.getBoolean(0),this.direction=t.getBoolean(1),this.position=t.getBoolean(2)}readIntegerParamsFromForm(){return[this.state?1:0,this.direction?1:0,this.position?1:0]}get hasSpecialInputs(){return!0}}return t.CODE=RE.STATES_MATCH,t.NEGATIVE_CODE=RE.NOT_STATES_MATCH,t.\u0275fac=function(e){return YE(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:23,vars:15,consts:[[1,"wired-options-box"],[1,"wired-subheader"],[1,"wpanel-select_container2"],[2,"margin-top","-2px","float","left"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"checkmark2"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"p",1),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"label",2),i.dc(6,"p",3),i.Vc(7),i.rc(8,"translate"),i.cc(),i.dc(9,"input",4),i.nc("ngModelChange",function(t){return e.state=t}),i.cc(),i.Zb(10,"span",5),i.cc(),i.dc(11,"label",2),i.dc(12,"p",3),i.Vc(13),i.rc(14,"translate"),i.cc(),i.dc(15,"input",4),i.nc("ngModelChange",function(t){return e.direction=t}),i.cc(),i.Zb(16,"span",5),i.cc(),i.dc(17,"label",2),i.dc(18,"p",3),i.Vc(19),i.rc(20,"translate"),i.cc(),i.dc(21,"input",4),i.nc("ngModelChange",function(t){return e.position=t}),i.cc(),i.Zb(22,"span",5),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(i.sc(4,7,"wiredfurni.params.conditions")),i.Kb(4),i.Wc(i.sc(8,9,"wiredfurni.params.condition.state")),i.Kb(2),i.xc("ngModel",e.state),i.Kb(4),i.Wc(i.sc(14,11,"wiredfurni.params.condition.direction")),i.Kb(2),i.xc("ngModel",e.direction),i.Kb(4),i.Wc(i.sc(20,13,"wiredfurni.params.condition.position")),i.Kb(2),i.xc("ngModel",e.position))},encapsulation:2}),t})();const YE=i.fc(zE);let qE=(()=>{class t extends IE{get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}get requiresFurni(){return Bv._Str_4873}onInit(){}onEditStart(t){}get hasSpecialInputs(){return!0}}return t.CODE=RE.STUFFS_IN_FORMATION,t.NEGATIVE_CODE=RE.NOT_STUFFS_IN_FORMATION,t.\u0275fac=function(e){return ZE(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:2,vars:0,template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.Vc(1,"STUFFS_IN_FORMATION"),i.cc())},encapsulation:2}),t})();const ZE=i.fc(qE);let XE=(()=>{class t extends IE{constructor(){super(...arguments),this.time=0,this.timeLocale=""}get code(){return t.CODE}onEditStart(t){this.time=t.intData[0]||1,this.updateLocaleParameter()}readIntegerParamsFromForm(){return[this.time]}onSliderChange(){this.updateLocaleParameter()}decrease(){this.time-=1,this.time<t.MINIMUM_VALUE&&(this.time=t.MINIMUM_VALUE)}increase(){this.time+=1,this.time>t.MAXIMUM_VALUE&&(this.time=t.MAXIMUM_VALUE)}updateLocaleParameter(){this.timeLocale=_.a.instance.getLocalizationWithParameter("wiredfurni.params.allowbefore","seconds",vE.getLocaleName(this.time))}get hasSpecialInputs(){return!0}get sliderOptions(){return{floor:t.MINIMUM_VALUE,ceil:t.MAXIMUM_VALUE,step:t.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.CODE=RE.TIME_ELAPSED_LESS,t.MINIMUM_VALUE=1,t.MAXIMUM_VALUE=1200,t.STEPPER_VALUE=1,t.\u0275fac=function(e){return QE(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:8,vars:3,consts:[[1,"wiredrange-box"],[1,"wired-subheader"],[1,"wiredrange_box"],[1,"decrease-number",3,"click"],["name","time",3,"options","value","valueChange"],[1,"increase-number",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"p",1),i.Vc(3),i.cc(),i.dc(4,"div",2),i.dc(5,"div",3),i.nc("click",function(){return e.decrease()}),i.cc(),i.dc(6,"ngx-slider",4),i.nc("valueChange",function(t){return e.time=t})("valueChange",function(){return e.onSliderChange()}),i.cc(),i.dc(7,"div",5),i.nc("click",function(){return e.increase()}),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(e.timeLocale),i.Kb(3),i.xc("options",e.sliderOptions)("value",e.time))},encapsulation:2}),t})();const QE=i.fc(XE);let JE=(()=>{class t extends XE{get code(){return t.CODE}decrease(){this.time-=1,this.time<t.MINIMUM_VALUE&&(this.time=t.MINIMUM_VALUE)}increase(){this.time+=1,this.time>t.MAXIMUM_VALUE&&(this.time=t.MAXIMUM_VALUE)}updateLocaleParameter(){this.timeLocale=_.a.instance.getLocalizationWithParameter("wiredfurni.params.allowafter","seconds",vE.getLocaleName(this.time))}get hasSpecialInputs(){return!0}get sliderOptions(){return{floor:t.MINIMUM_VALUE,ceil:t.MAXIMUM_VALUE,step:t.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.CODE=RE.TIME_ELAPSED_MORE,t.\u0275fac=function(e){return $E(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:8,vars:3,consts:[[1,"wiredrange-box"],[1,"wired-subheader"],[1,"wiredrange_box"],[1,"decrease-number",3,"click"],["name","time",3,"options","value","valueChange"],[1,"increase-number",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"p",1),i.Vc(3),i.cc(),i.dc(4,"div",2),i.dc(5,"div",3),i.nc("click",function(){return e.decrease()}),i.cc(),i.dc(6,"ngx-slider",4),i.nc("valueChange",function(t){return e.time=t})("valueChange",function(){return e.onSliderChange()}),i.cc(),i.dc(7,"div",5),i.nc("click",function(){return e.increase()}),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(e.timeLocale),i.Kb(3),i.xc("options",e.sliderOptions)("value",e.time))},encapsulation:2}),t})();const $E=i.fc(JE);let tS=(()=>{class t extends IE{constructor(){super(...arguments),this.minUsers=0,this.maxUsers=0}get code(){return t.CODE}get negativeCode(){return t.NEGATIVE_CODE}onEditStart(t){this.minUsers=t.intData[0]||1,this.maxUsers=t.intData[1]||50}readIntegerParamsFromForm(){return[this.minUsers,this.maxUsers]}decreaseMin(){this.minUsers-=1,this.minUsers<t.MINIMUM_VALUE&&(this.minUsers=t.MINIMUM_VALUE)}decreaseMax(){this.maxUsers-=1,this.maxUsers<t.MINIMUM_VALUE&&(this.maxUsers=t.MINIMUM_VALUE)}increaseMin(){this.minUsers+=1,this.minUsers>t.MAXIMUM_VALUE&&(this.minUsers=t.MAXIMUM_VALUE)}increaseMax(){this.maxUsers+=1,this.maxUsers>t.MAXIMUM_VALUE&&(this.maxUsers=t.MAXIMUM_VALUE)}get hasSpecialInputs(){return!0}get sliderOptions(){return{floor:t.MINIMUM_VALUE,ceil:t.MAXIMUM_VALUE,step:t.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.CODE=RE.USER_COUNT_IN,t.NEGATIVE_CODE=RE.NOT_USER_COUNT_IN,t.MINIMUM_VALUE=1,t.MAXIMUM_VALUE=50,t.STEPPER_VALUE=1,t.\u0275fac=function(e){return eS(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:17,vars:14,consts:[[1,"wiredrange-box"],[1,"wired-subheader"],[1,"wiredrange_box"],[1,"decrease-number",3,"click"],["name","minUsers",3,"options","value","valueChange"],[1,"increase-number",3,"click"],["name","maxUsers",3,"options","value","valueChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"p",1),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",2),i.dc(6,"div",3),i.nc("click",function(){return e.decreaseMin()}),i.cc(),i.dc(7,"ngx-slider",4),i.nc("valueChange",function(t){return e.minUsers=t}),i.cc(),i.dc(8,"div",5),i.nc("click",function(){return e.increaseMin()}),i.cc(),i.cc(),i.cc(),i.dc(9,"div",0),i.dc(10,"p",1),i.Vc(11),i.rc(12,"translate"),i.cc(),i.dc(13,"div",2),i.dc(14,"div",3),i.nc("click",function(){return e.decreaseMax()}),i.cc(),i.dc(15,"ngx-slider",6),i.nc("valueChange",function(t){return e.maxUsers=t}),i.cc(),i.dc(16,"div",5),i.nc("click",function(){return e.increaseMax()}),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(i.uc(4,6,"wiredfurni.params.usercountmin","value",e.minUsers)),i.Kb(4),i.xc("options",e.sliderOptions)("value",e.minUsers),i.Kb(4),i.Wc(i.uc(12,10,"wiredfurni.params.usercountmax","value",e.maxUsers)),i.Kb(4),i.xc("options",e.sliderOptions)("value",e.maxUsers))},encapsulation:2}),t})();const eS=i.fc(tS);class sS{_Str_9781(t){switch(t){case NE.CODE:case NE.NEGATIVE_CODE:return NE;case BE.CODE:case BE.NEGATIVE_CODE:return BE;case zE.CODE:case zE.NEGATIVE_CODE:return zE;case JE.CODE:return JE;case XE.CODE:return XE;case tS.CODE:case tS.NEGATIVE_CODE:return tS;case AE.CODE:case AE.NEGATIVE_CODE:return AE;case HE.CODE:return HE;case KE.CODE:case KE.NEGATIVE_CODE:return KE;case qE.CODE:case qE.NEGATIVE_CODE:return qE;case yE.CODE:case yE.NEGATIVE_CODE:return yE;case xE.CODE:case xE.NEGATIVE_CODE:return xE;case wE.CODE:case wE.NEGATIVE_CODE:return wE;case kE.CODE:return kE;case PE.CODE:return PE;case TE.CODE:return TE}return null}_Str_15652(t){return this._Str_9781(t)}_Str_14545(t){return t instanceof _E.a}_Str_1196(){return"condition"}}class iS extends vE{}let nS=(()=>{class t{}return t.AVATAR_SAYS_SOMETHING=0,t.AVATAR_WALKS_ON_FURNI=1,t.AVATAR_WALKS_OFF_FURNI=2,t.TRIGGER_ONCE=3,t.TOGGLE_FURNI=4,t.TRIGGER_PERIODICALLY=6,t.AVATAR_ENTERS_ROOM=7,t.GAME_STARTS=8,t.GAME_ENDS=9,t.SCORE_ACHIEVED=10,t.COLLISION=11,t.TRIGGER_PERIODICALLY_LONG=12,t.BOT_REACHED_STUFF=13,t.BOT_REACHED_AVATAR=14,t})();function rS(t,e){if(1&t){const t=i.ec();i.dc(0,"div"),i.dc(1,"input",7),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().keyword=e}),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(1),i.xc("ngModel",t.keyword)}}let aS=(()=>{class t extends iS{constructor(){super(...arguments),this.keyword="",this.avatar="0"}get code(){return t.CODE}onEditStart(t){this.keyword=t.stringData||"",this.avatar=this.keyword.length>0?"1":"0"}readStringParamFromForm(){return"1"===this.avatar&&this.keyword.length>0?this.keyword:""}get hasSpecialInputs(){return!0}}return t.CODE=nS.AVATAR_ENTERS_ROOM,t.\u0275fac=function(e){return oS(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:16,vars:12,consts:[[1,"select-trigger-user"],[1,"wired-subheader"],[1,"rs-select_container-radio"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[4,"ngIf"],["type","text",1,"designated-user-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"p",1),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",2),i.dc(6,"input",3),i.nc("ngModelChange",function(t){return e.avatar=t}),i.cc(),i.dc(7,"label",4),i.Vc(8),i.rc(9,"translate"),i.cc(),i.cc(),i.dc(10,"div",2),i.dc(11,"input",5),i.nc("ngModelChange",function(t){return e.avatar=t}),i.cc(),i.dc(12,"label",4),i.Vc(13),i.rc(14,"translate"),i.cc(),i.cc(),i.Tc(15,rS,2,1,"div",6),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(i.sc(4,6,"wiredfurni.params.picktriggerer")),i.Kb(3),i.xc("ngModel",e.avatar),i.Kb(2),i.Wc(i.sc(9,8,"wiredfurni.params.anyavatar")),i.Kb(3),i.xc("ngModel",e.avatar),i.Kb(2),i.Wc(i.sc(14,10,"wiredfurni.params.certainavatar")),i.Kb(2),i.xc("ngIf","1"===e.avatar))},encapsulation:2}),t})();const oS=i.fc(aS);let cS=(()=>{class t extends iS{constructor(){super(...arguments),this.keyword="",this.avatar="0"}get code(){return t.CODE}onEditStart(t){this.keyword=t.stringData||"",this.avatar=t.intData.length>0&&1===t.intData[0]?"1":"0"}readIntegerParamsFromForm(){return["1"===this.avatar?1:0]}readStringParamFromForm(){return this.keyword}get hasSpecialInputs(){return!0}get username(){return _.a.instance.sessionDataManager.userName}}return t.CODE=nS.AVATAR_SAYS_SOMETHING,t.\u0275fac=function(e){return hS(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:19,vars:13,consts:[[1,"what-was-said-box"],[1,"wired-subheader"],["type","text",1,"wpanel-input",3,"ngModel","ngModelChange"],[1,"select-trigger-user"],[1,"rs-select_container-radio"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"p",1),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",2),i.nc("ngModelChange",function(t){return e.keyword=t}),i.cc(),i.cc(),i.dc(6,"div",3),i.dc(7,"p",1),i.Vc(8),i.rc(9,"translate"),i.cc(),i.dc(10,"div",4),i.dc(11,"input",5),i.nc("ngModelChange",function(t){return e.avatar=t}),i.cc(),i.dc(12,"label",6),i.Vc(13),i.rc(14,"translate"),i.cc(),i.cc(),i.dc(15,"div",4),i.dc(16,"input",7),i.nc("ngModelChange",function(t){return e.avatar=t}),i.cc(),i.dc(17,"label",6),i.Vc(18),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(i.sc(4,7,"wiredfurni.params.whatissaid")),i.Kb(2),i.xc("ngModel",e.keyword),i.Kb(3),i.Wc(i.sc(9,9,"wiredfurni.params.picktriggerer")),i.Kb(3),i.xc("ngModel",e.avatar),i.Kb(2),i.Wc(i.sc(14,11,"wiredfurni.params.anyavatar")),i.Kb(3),i.xc("ngModel",e.avatar),i.Kb(2),i.Wc(e.username))},encapsulation:2}),t})();const hS=i.fc(cS);let lS=(()=>{class t extends iS{get code(){return t.CODE}get requiresFurni(){return Bv._Str_4991}}return t.CODE=nS.AVATAR_WALKS_OFF_FURNI,t.\u0275fac=function(e){return uS(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:0,template:function(t,e){1&t&&i.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const uS=i.fc(lS);let _S=(()=>{class t extends iS{get code(){return t.CODE}get requiresFurni(){return Bv._Str_4991}}return t.CODE=nS.AVATAR_WALKS_ON_FURNI,t.\u0275fac=function(e){return dS(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:0,template:function(t,e){1&t&&i.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const dS=i.fc(_S);let gS=(()=>{class t extends iS{constructor(){super(...arguments),this.keyword=""}get code(){return t.CODE}get requiresFurni(){return Bv._Str_5431}onEditStart(t){this.keyword=t.stringData}readStringParamFromForm(){return this.keyword}get hasSpecialInputs(){return!0}}return t.CODE=nS.BOT_REACHED_AVATAR,t.\u0275fac=function(e){return mS(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:6,vars:4,consts:[[1,"wired-options-box"],[1,"wired-subheader"],["type","text",1,"wpanel-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"p",1),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",2),i.nc("ngModelChange",function(t){return e.keyword=t}),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(i.sc(4,2,"wiredfurni.params.bot.name")),i.Kb(2),i.xc("ngModel",e.keyword))},encapsulation:2}),t})();const mS=i.fc(gS);let pS=(()=>{class t extends iS{constructor(){super(...arguments),this.keyword=""}get code(){return t.CODE}get requiresFurni(){return Bv._Str_4991}onEditStart(t){this.keyword=t.stringData}readStringParamFromForm(){return this.keyword}get hasSpecialInputs(){return!0}}return t.CODE=nS.BOT_REACHED_STUFF,t.\u0275fac=function(e){return fS(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:6,vars:4,consts:[[1,"wired-options-box"],[1,"wired-subheader"],["type","text",1,"wpanel-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"p",1),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",2),i.nc("ngModelChange",function(t){return e.keyword=t}),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(i.sc(4,2,"wiredfurni.params.bot.name")),i.Kb(2),i.xc("ngModel",e.keyword))},encapsulation:2}),t})();const fS=i.fc(pS);let ES=(()=>{class t extends iS{get code(){return t.CODE}}return t.CODE=nS.COLLISION,t.\u0275fac=function(e){return SS(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:0,template:function(t,e){1&t&&i.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const SS=i.fc(ES);let vS=(()=>{class t extends iS{get code(){return t.CODE}}return t.CODE=nS.GAME_ENDS,t.\u0275fac=function(e){return bS(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:0,template:function(t,e){1&t&&i.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const bS=i.fc(vS);let IS=(()=>{class t extends iS{get code(){return t.CODE}}return t.CODE=nS.GAME_STARTS,t.\u0275fac=function(e){return RS(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:0,template:function(t,e){1&t&&i.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const RS=i.fc(IS);let TS=(()=>{class t extends iS{constructor(){super(...arguments),this.score=0}get code(){return t.CODE}onEditStart(t){this.score=t.intData[0]||0}readIntegerParamsFromForm(){return[this.score]}decrease(){this.score-=1,this.score<t.MINIMUM_VALUE&&(this.score=t.MINIMUM_VALUE)}increase(){this.score+=1,this.score>t.MAXIMUM_VALUE&&(this.score=t.MAXIMUM_VALUE)}get hasSpecialInputs(){return!0}get sliderOptions(){return{floor:t.MINIMUM_VALUE,ceil:t.MAXIMUM_VALUE,step:t.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.MINIMUM_VALUE=1,t.MAXIMUM_VALUE=1e3,t.STEPPER_VALUE=1,t.CODE=nS.SCORE_ACHIEVED,t.\u0275fac=function(e){return OS(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:9,vars:7,consts:[[1,"wiredrange-box"],[1,"wired-subheader"],[1,"wiredrange_box"],[1,"decrease-number",3,"click"],["name","time",3,"options","value","valueChange"],[1,"increase-number",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"p",1),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",2),i.dc(6,"div",3),i.nc("click",function(){return e.decrease()}),i.cc(),i.dc(7,"ngx-slider",4),i.nc("valueChange",function(t){return e.score=t}),i.cc(),i.dc(8,"div",5),i.nc("click",function(){return e.increase()}),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(i.uc(4,3,"wiredfurni.params.setscore","points",e.score)),i.Kb(4),i.xc("options",e.sliderOptions)("value",e.score))},encapsulation:2}),t})();const OS=i.fc(TS);let yS=(()=>{class t extends iS{get code(){return t.CODE}get requiresFurni(){return Bv._Str_4991}}return t.CODE=nS.TOGGLE_FURNI,t.\u0275fac=function(e){return CS(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:0,template:function(t,e){1&t&&i.Zb(0,"nitro-wired-base-component")},encapsulation:2}),t})();const CS=i.fc(yS);let AS=(()=>{class t extends iS{constructor(){super(...arguments),this.time=0,this.timeLocale=""}get code(){return t.CODE}onEditStart(t){this.time=t.intData[0]||1,this.updateLocaleParameter()}readIntegerParamsFromForm(){return[this.time]}onSliderChange(){this.updateLocaleParameter()}decrease(){this.time-=1,this.time<t.MINIMUM_VALUE&&(this.time=t.MINIMUM_VALUE)}increase(){this.time+=1,this.time>t.MAXIMUM_VALUE&&(this.time=t.MAXIMUM_VALUE)}updateLocaleParameter(){this.timeLocale=_.a.instance.getLocalizationWithParameter("wiredfurni.params.settime","seconds",vE.getLocaleName(this.time))}get hasSpecialInputs(){return!0}get sliderOptions(){return{floor:t.MINIMUM_VALUE,ceil:t.MAXIMUM_VALUE,step:t.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.MINIMUM_VALUE=1,t.MAXIMUM_VALUE=1200,t.STEPPER_VALUE=1,t.CODE=nS.TRIGGER_ONCE,t.\u0275fac=function(e){return MS(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:8,vars:3,consts:[[1,"wiredrange-box"],[1,"wired-subheader"],[1,"wiredrange_box"],[1,"decrease-number",3,"click"],["name","time",3,"options","value","valueChange"],[1,"increase-number",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"p",1),i.Vc(3),i.cc(),i.dc(4,"div",2),i.dc(5,"div",3),i.nc("click",function(){return e.decrease()}),i.cc(),i.dc(6,"ngx-slider",4),i.nc("valueChange",function(t){return e.time=t})("valueChange",function(){return e.onSliderChange()}),i.cc(),i.dc(7,"div",5),i.nc("click",function(){return e.increase()}),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(e.timeLocale),i.Kb(3),i.xc("options",e.sliderOptions)("value",e.time))},encapsulation:2}),t})();const MS=i.fc(AS);let wS=(()=>{class t extends AS{get code(){return t.CODE}increase(){this.time+=1,this.time>t.MAXIMUM_VALUE&&(this.time=t.MAXIMUM_VALUE)}get sliderOptions(){return{floor:t.MINIMUM_VALUE,ceil:t.MAXIMUM_VALUE,step:t.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.MAXIMUM_VALUE=120,t.CODE=nS.TRIGGER_PERIODICALLY,t.\u0275fac=function(e){return DS(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:8,vars:3,consts:[[1,"wiredrange-box"],[1,"wired-subheader"],[1,"wiredrange_box"],[1,"decrease-number",3,"click"],["name","time",3,"options","value","valueChange"],[1,"increase-number",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"p",1),i.Vc(3),i.cc(),i.dc(4,"div",2),i.dc(5,"div",3),i.nc("click",function(){return e.decrease()}),i.cc(),i.dc(6,"ngx-slider",4),i.nc("valueChange",function(t){return e.time=t})("valueChange",function(){return e.onSliderChange()}),i.cc(),i.dc(7,"div",5),i.nc("click",function(){return e.increase()}),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(e.timeLocale),i.Kb(3),i.xc("options",e.sliderOptions)("value",e.time))},encapsulation:2}),t})();const DS=i.fc(wS);let NS=(()=>{class t extends wS{get code(){return t.CODE}updateLocaleParameter(){this.timeLocale=_.a.instance.getLocalizationWithParameter("wiredfurni.params.setlongtime","time",Gl.format(5*this.time))}}return t.CODE=nS.TRIGGER_PERIODICALLY_LONG,t.\u0275fac=function(e){return US(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:8,vars:3,consts:[[1,"wiredrange-box"],[1,"wired-subheader"],[1,"wiredrange_box"],[1,"decrease-number",3,"click"],["name","time",3,"options","value","valueChange"],[1,"increase-number",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-base-component"),i.dc(1,"div",0),i.dc(2,"p",1),i.Vc(3),i.cc(),i.dc(4,"div",2),i.dc(5,"div",3),i.nc("click",function(){return e.decrease()}),i.cc(),i.dc(6,"ngx-slider",4),i.nc("valueChange",function(t){return e.time=t})("valueChange",function(){return e.onSliderChange()}),i.cc(),i.dc(7,"div",5),i.nc("click",function(){return e.increase()}),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(e.timeLocale),i.Kb(3),i.xc("options",e.sliderOptions)("value",e.time))},encapsulation:2}),t})();const US=i.fc(NS);class xS{_Str_9781(t){switch(t){case cS.CODE:return cS;case _S.CODE:return _S;case lS.CODE:return lS;case AS.CODE:return AS;case yS.CODE:return yS;case wS.CODE:return wS;case aS.CODE:return aS;case IS.CODE:return IS;case vS.CODE:return vS;case TS.CODE:return TS;case ES.CODE:return ES;case NS.CODE:return NS;case pS.CODE:return pS;case gS.CODE:return gS}return null}_Str_15652(t){return this._Str_9781(t)}_Str_14545(t){return t instanceof dE.a}_Str_1196(){return"trigger"}}let LS=(()=>{class t{}return t.TOGGLE_FURNI_STATE=0,t.RESET=1,t.SET_FURNI_STATE=3,t.MOVE_FURNI=4,t.GIVE_SCORE=6,t.CHAT=7,t.TELEPORT=8,t.JOIN_TEAM=9,t.LEAVE_TEAM=10,t.CHASE=11,t.FLEE=12,t.MOVE_TO_DIRECTION=13,t.GIVE_SCORE_TO_PREDEFINED_TEAM=14,t.TOGGLE_TO_RANDOM_STATE=15,t.MOVE_FURNI_TO=16,t.GIVE_REWARD=17,t.CALL_ANOTHER_STACK=18,t.KICK_FROM_ROOM=19,t.MUTE_USER=20,t.BOT_TELEPORT=21,t.BOT_MOVE=22,t.BOT_TALK=23,t.BOT_GIVE_HAND_ITEM=24,t.BOT_FOLLOW_AVATAR=25,t.BOT_CHANGE_FIGURE=26,t.BOT_TALK_DIRECT_TO_AVTR=27,t})(),PS=(()=>{class t extends bE{constructor(){super(...arguments),this.defaultFigure="hd-180-1.ch-210-66.lg-270-82.sh-290-81"}get code(){return t.CODE}onEditStart(e){const s=e.stringData.split(t.DELIMETER);s.length>0&&(this.botName=s[0]),s.length>1&&(this.figure=s[1].length>0?s[1]:this.defaultFigure),super.onEditStart(e)}readStringParamFromForm(){return this.botName+t.DELIMETER+this.figure}get hasSpecialInputs(){return!0}get requiresFurni(){return Bv._Str_5431}copyLook(){this.figure=_.a.instance.sessionDataManager.figure}}return t.CODE=LS.BOT_CHANGE_FIGURE,t.DELIMETER="\t",t.\u0275fac=function(e){return FS(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:13,vars:10,consts:[[3,"delay","delayChange"],[1,"wired-options-box"],[1,"wired-subheader"],["type","text","maxlength","32",1,"wpanel-input",3,"ngModel","ngModelChange"],[1,"wiredavatar"],["nitro-avatar-image","",3,"figure","direction"],[1,"wiredavatar-buton"],["type","button",1,"wabuttonbox",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",3),i.nc("ngModelChange",function(t){return e.botName=t}),i.cc(),i.cc(),i.dc(6,"div",1),i.dc(7,"div",4),i.Zb(8,"div",5),i.cc(),i.dc(9,"div",6),i.dc(10,"button",7),i.nc("click",function(){return e.copyLook()}),i.Vc(11),i.rc(12,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.xc("delay",e.delay),i.Kb(3),i.Wc(i.sc(4,6,"wiredfurni.params.bot.name")),i.Kb(2),i.xc("ngModel",e.botName),i.Kb(3),i.xc("figure",e.figure)("direction",2),i.Kb(3),i.Wc(i.sc(12,8,"wiredfurni.params.capture.figure")))},encapsulation:2}),t})();const FS=i.fc(PS);let kS=(()=>{class t extends bE{constructor(){super(...arguments),this.followMode="0"}get code(){return t.CODE}onEditStart(t){this.botName=t.stringData,this.followMode=t.intData.length>0?t.intData[0].toString():"0",super.onEditStart(t)}readStringParamFromForm(){return this.botName}readIntegerParamsFromForm(){return[Number.parseInt(this.followMode)]}get hasSpecialInputs(){return!0}}return t.CODE=LS.BOT_FOLLOW_AVATAR,t.\u0275fac=function(e){return VS(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:17,vars:13,consts:[[3,"delay","delayChange"],[1,"wired-options-box"],[1,"wired-subheader"],["type","text","maxlength","32",1,"wpanel-input",3,"ngModel","ngModelChange"],[1,"rs-select_container-radio"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"wired_hr"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",3),i.nc("ngModelChange",function(t){return e.botName=t}),i.cc(),i.dc(6,"div",4),i.dc(7,"input",5),i.nc("ngModelChange",function(t){return e.followMode=t}),i.cc(),i.dc(8,"label",6),i.Vc(9),i.rc(10,"translate"),i.cc(),i.cc(),i.dc(11,"div",4),i.dc(12,"input",7),i.nc("ngModelChange",function(t){return e.followMode=t}),i.cc(),i.dc(13,"label",6),i.Vc(14),i.rc(15,"translate"),i.cc(),i.cc(),i.cc(),i.Zb(16,"div",8),i.cc()),2&t&&(i.xc("delay",e.delay),i.Kb(3),i.Wc(i.sc(4,7,"wiredfurni.params.bot.name")),i.Kb(2),i.xc("ngModel",e.botName),i.Kb(2),i.xc("ngModel",e.followMode),i.Kb(2),i.Wc(i.sc(10,9,"wiredfurni.params.start.following")),i.Kb(3),i.xc("ngModel",e.followMode),i.Kb(2),i.Wc(i.sc(15,11,"wiredfurni.params.stop.following")))},encapsulation:2}),t})();const VS=i.fc(kS);let BS=(()=>{class t extends bE{constructor(){super(...arguments),this.allowedHanditemIds=["2","5","7","8","9","10","27"],this.handitemId="0"}get code(){return t.CODE}onEditStart(t){this.botName=t.stringData,this.handitemId=t.intData.length>0&&this.allowedHanditemIds.includes(t.intData[0].toString())?t.intData[0].toString():"0",super.onEditStart(t)}readStringParamFromForm(){return this.botName}readIntegerParamsFromForm(){return[Number.parseInt(this.handitemId)]}get hasSpecialInputs(){return!0}}return t.CODE=LS.BOT_GIVE_HAND_ITEM,t.\u0275fac=function(e){return WS(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:35,vars:41,consts:[[3,"delay","delayChange"],[1,"wired-options-box"],[1,"wired-subheader"],["type","text","maxlength","32",1,"wpanel-input",3,"ngModel","ngModelChange"],[1,"wiredselectbox",3,"ngModel","ngModelChange"],["value","0",3,"selected"],["value","2",3,"selected"],["value","5",3,"selected"],["value","7",3,"selected"],["value","8",3,"selected"],["value","9",3,"selected"],["value","10",3,"selected"],["value","27",3,"selected"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",3),i.nc("ngModelChange",function(t){return e.botName=t}),i.cc(),i.cc(),i.dc(6,"div",1),i.dc(7,"p",2),i.Vc(8),i.rc(9,"translate"),i.cc(),i.dc(10,"select",4),i.nc("ngModelChange",function(t){return e.handitemId=t}),i.dc(11,"option",5),i.Vc(12),i.rc(13,"translate"),i.cc(),i.dc(14,"option",6),i.Vc(15),i.rc(16,"translate"),i.cc(),i.dc(17,"option",7),i.Vc(18),i.rc(19,"translate"),i.cc(),i.dc(20,"option",8),i.Vc(21),i.rc(22,"translate"),i.cc(),i.dc(23,"option",9),i.Vc(24),i.rc(25,"translate"),i.cc(),i.dc(26,"option",10),i.Vc(27),i.rc(28,"translate"),i.cc(),i.dc(29,"option",11),i.Vc(30),i.rc(31,"translate"),i.cc(),i.dc(32,"option",12),i.Vc(33),i.rc(34,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.xc("delay",e.delay),i.Kb(3),i.Wc(i.sc(4,21,"wiredfurni.params.bot.name")),i.Kb(2),i.xc("ngModel",e.botName),i.Kb(3),i.Wc(i.sc(9,23,"wiredfurni.params.handitem")),i.Kb(2),i.xc("ngModel",e.handitemId),i.Kb(1),i.xc("selected","0"==e.handitemId),i.Kb(1),i.Wc(i.sc(13,25,"wiredfurni.tooltip.handitem")),i.Kb(2),i.xc("selected","2"==e.handitemId),i.Kb(1),i.Wc(i.sc(16,27,"handitem2")),i.Kb(2),i.xc("selected","5"==e.handitemId),i.Kb(1),i.Wc(i.sc(19,29,"handitem5")),i.Kb(2),i.xc("selected","7"==e.handitemId),i.Kb(1),i.Wc(i.sc(22,31,"handitem7")),i.Kb(2),i.xc("selected","8"==e.handitemId),i.Kb(1),i.Wc(i.sc(25,33,"handitem8")),i.Kb(2),i.xc("selected","9"==e.handitemId),i.Kb(1),i.Wc(i.sc(28,35,"handitem9")),i.Kb(2),i.xc("selected","10"==e.handitemId),i.Kb(1),i.Wc(i.sc(31,37,"handitem10")),i.Kb(2),i.xc("selected","27"==e.handitemId),i.Kb(1),i.Wc(i.sc(34,39,"handitem27")))},encapsulation:2}),t})();const WS=i.fc(BS);let KS=(()=>{class t extends bE{get code(){return t.CODE}onEditStart(t){this.botName=t.stringData,super.onEditStart(t)}readStringParamFromForm(){return this.botName}get hasSpecialInputs(){return!0}get requiresFurni(){return Bv._Str_4873}}return t.CODE=LS.BOT_MOVE,t.\u0275fac=function(e){return GS(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:6,vars:5,consts:[[3,"delay","delayChange"],[1,"wired-options-box"],[1,"wired-subheader"],["type","text","maxlength","32",1,"wpanel-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",3),i.nc("ngModelChange",function(t){return e.botName=t}),i.cc(),i.cc(),i.cc()),2&t&&(i.xc("delay",e.delay),i.Kb(3),i.Wc(i.sc(4,3,"wiredfurni.params.bot.name")),i.Kb(2),i.xc("ngModel",e.botName))},encapsulation:2}),t})();const GS=i.fc(KS);let HS=(()=>{class t extends bE{get code(){return t.CODE}onEditStart(e){const s=e.stringData.split(t.DELIMETER);this.botName=s.length>=1?s[0]:"",this.message=2==s.length?s[1]:"",this.mode=e.intData.length>0?e.intData[0].toString():"0",super.onEditStart(e)}get hasSpecialInputs(){return!0}get requiresFurni(){return Bv._Str_5431}readStringParamFromForm(){return this.botName+t.DELIMETER+this.message}readIntegerParamsFromForm(){return[Number.parseInt(this.mode)]}}return t.CODE=LS.BOT_TALK_DIRECT_TO_AVTR,t.DELIMETER="\t",t.\u0275fac=function(e){return jS(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:21,vars:17,consts:[[3,"delay","delayChange"],[1,"wired-options-box"],[1,"wired-subheader"],["type","text","maxlength","32",1,"wpanel-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",3),i.nc("ngModelChange",function(t){return e.botName=t}),i.cc(),i.cc(),i.dc(6,"div",1),i.dc(7,"p",2),i.Vc(8),i.rc(9,"translate"),i.cc(),i.dc(10,"input",3),i.nc("ngModelChange",function(t){return e.message=t}),i.cc(),i.cc(),i.dc(11,"div",1),i.dc(12,"p",2),i.Vc(13),i.rc(14,"translate"),i.cc(),i.dc(15,"input",3),i.nc("ngModelChange",function(t){return e.mode=t}),i.cc(),i.cc(),i.dc(16,"div",1),i.dc(17,"p",2),i.Vc(18),i.rc(19,"translate"),i.cc(),i.dc(20,"input",3),i.nc("ngModelChange",function(t){return e.mode=t}),i.cc(),i.cc(),i.cc()),2&t&&(i.xc("delay",e.delay),i.Kb(3),i.Wc(i.sc(4,9,"wiredfurni.params.bot.name")),i.Kb(2),i.xc("ngModel",e.botName),i.Kb(3),i.Wc(i.sc(9,11,"wiredfurni.params.message")),i.Kb(2),i.xc("ngModel",e.message),i.Kb(3),i.Wc(i.sc(14,13,"wiredfurni.params.whisper")),i.Kb(2),i.xc("ngModel",e.mode),i.Kb(3),i.Wc(i.sc(19,15,"wiredfurni.params.talk")),i.Kb(2),i.xc("ngModel",e.mode))},encapsulation:2}),t})();const jS=i.fc(HS);let zS=(()=>{class t extends bE{get code(){return t.CODE}onEditStart(e){const s=e.stringData.split(t.DELIMETER);this.botName=s.length>=1?s[0]:"",this.message=2==s.length?s[1]:"",this.mode=e.intData.length>0?e.intData[0].toString():"0",super.onEditStart(e)}get hasSpecialInputs(){return!0}get requiresFurni(){return Bv._Str_5431}readStringParamFromForm(){return this.botName+t.DELIMETER+this.message}readIntegerParamsFromForm(){return[Number.parseInt(this.mode)]}}return t.CODE=LS.BOT_TALK,t.DELIMETER="\t",t.\u0275fac=function(e){return YS(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:21,vars:17,consts:[[3,"delay","delayChange"],[1,"wired-options-box"],[1,"wired-subheader"],["type","text","maxlength","32",1,"wpanel-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",3),i.nc("ngModelChange",function(t){return e.botName=t}),i.cc(),i.cc(),i.dc(6,"div",1),i.dc(7,"p",2),i.Vc(8),i.rc(9,"translate"),i.cc(),i.dc(10,"input",3),i.nc("ngModelChange",function(t){return e.message=t}),i.cc(),i.cc(),i.dc(11,"div",1),i.dc(12,"p",2),i.Vc(13),i.rc(14,"translate"),i.cc(),i.dc(15,"input",3),i.nc("ngModelChange",function(t){return e.mode=t}),i.cc(),i.cc(),i.dc(16,"div",1),i.dc(17,"p",2),i.Vc(18),i.rc(19,"translate"),i.cc(),i.dc(20,"input",3),i.nc("ngModelChange",function(t){return e.mode=t}),i.cc(),i.cc(),i.cc()),2&t&&(i.xc("delay",e.delay),i.Kb(3),i.Wc(i.sc(4,9,"wiredfurni.params.bot.name")),i.Kb(2),i.xc("ngModel",e.botName),i.Kb(3),i.Wc(i.sc(9,11,"wiredfurni.params.message")),i.Kb(2),i.xc("ngModel",e.message),i.Kb(3),i.Wc(i.sc(14,13,"wiredfurni.params.talk")),i.Kb(2),i.xc("ngModel",e.mode),i.Kb(3),i.Wc(i.sc(19,15,"wiredfurni.params.shout")),i.Kb(2),i.xc("ngModel",e.mode))},encapsulation:2}),t})();const YS=i.fc(zS);let qS=(()=>{class t extends bE{get code(){return t.CODE}onEditStart(t){this.botName=t.stringData,super.onEditStart(t)}readStringParamFromForm(){return this.botName}get hasSpecialInputs(){return!0}get requiresFurni(){return Bv._Str_4873}}return t.CODE=LS.BOT_TELEPORT,t.\u0275fac=function(e){return ZS(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:6,vars:5,consts:[[3,"delay","delayChange"],[1,"wired-options-box"],[1,"wired-subheader"],["type","text","maxlength","32",1,"wpanel-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",3),i.nc("ngModelChange",function(t){return e.botName=t}),i.cc(),i.cc(),i.cc()),2&t&&(i.xc("delay",e.delay),i.Kb(3),i.Wc(i.sc(4,3,"wiredfurni.params.bot.name")),i.Kb(2),i.xc("ngModel",e.botName))},encapsulation:2}),t})();const ZS=i.fc(qS);let XS=(()=>{class t extends bE{get code(){return t.CODE}get requiresFurni(){return Bv._Str_5430}}return t.CODE=LS.CALL_ANOTHER_STACK,t.\u0275fac=function(e){return QS(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.cc()),2&t&&i.xc("delay",e.delay)},encapsulation:2}),t})();const QS=i.fc(XS);let JS=(()=>{class t extends bE{get code(){return t.CODE}get requiresFurni(){return Bv._Str_5430}}return t.CODE=LS.CHASE,t.\u0275fac=function(e){return $S(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.cc()),2&t&&i.xc("delay",e.delay)},encapsulation:2}),t})();const $S=i.fc(JS);let tv=(()=>{class t extends bE{get code(){return t.CODE}get hasSpecialInputs(){return!0}readStringParamFromForm(){return this.message}onEditStart(t){this.message=t.stringData,super.onEditStart(t)}validate(){return this.message.length>100?_.a.instance.localization.getValue("wiredfurni.chatmsgtoolong",!1):null}}return t.CODE=LS.CHAT,t.\u0275fac=function(e){return ev(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:6,vars:5,consts:[[3,"delay","delayChange"],[1,"wired-options-box"],[1,"wired-subheader"],["type","text",1,"wpanel-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",3),i.nc("ngModelChange",function(t){return e.message=t}),i.cc(),i.cc(),i.cc()),2&t&&(i.xc("delay",e.delay),i.Kb(3),i.Wc(i.sc(4,3,"wiredfurni.params.message")),i.Kb(2),i.xc("ngModel",e.message))},encapsulation:2}),t})();const ev=i.fc(tv);let sv=(()=>{class t extends bE{get code(){return t.CODE}get requiresFurni(){return Bv._Str_5430}}return t.CODE=LS.FLEE,t.\u0275fac=function(e){return iv(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.cc()),2&t&&i.xc("delay",e.delay)},encapsulation:2}),t})();const iv=i.fc(sv);function nv(t,e){if(1&t){const t=i.ec();i.dc(0,"div",18),i.dc(1,"div",19),i.dc(2,"div",20),i.nc("click",function(){return i.Kc(t),i.qc().decreaseLimit()}),i.cc(),i.dc(3,"ngx-slider",21),i.nc("valueChange",function(e){return i.Kc(t),i.qc().rewardsLimit=e}),i.cc(),i.dc(4,"div",22),i.nc("click",function(){return i.Kc(t),i.qc().increaseLimit()}),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.xc("options",t.limitSliderOptions)("value",t.rewardsLimit)}}function rv(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"p",8),i.Vc(2,"Interval value"),i.cc(),i.dc(3,"input",23),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().limitationInterval=e}),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.xc("ngModel",t.limitationInterval)}}function av(t,e){1&t&&(i.dc(0,"td"),i.dc(1,"small"),i.Vc(2,"Probability"),i.cc(),i.cc())}function ov(t,e){if(1&t){const t=i.ec();i.dc(0,"td"),i.dc(1,"input",24),i.nc("ngModelChange",function(e){i.Kc(t);const s=i.qc().index;return i.qc().rewardRows[s].probability=e}),i.cc(),i.cc()}if(2&t){const t=i.qc().index,e=i.qc();i.Kb(1),i.xc("ngModel",e.rewardRows[t].probability)}}function cv(t,e){if(1&t){const t=i.ec();i.dc(0,"tr"),i.dc(1,"td"),i.dc(2,"input",4),i.nc("ngModelChange",function(s){i.Kc(t);const n=e.index;return i.qc().rewardRows[n].badge=s}),i.cc(),i.cc(),i.dc(3,"td"),i.dc(4,"input",24),i.nc("ngModelChange",function(s){i.Kc(t);const n=e.index;return i.qc().rewardRows[n].itemCode=s}),i.cc(),i.cc(),i.Tc(5,ov,2,1,"td",14),i.cc()}if(2&t){const t=e.index,s=i.qc();i.Kb(2),i.xc("ngModel",s.rewardRows[t].badge),i.Kb(2),i.xc("ngModel",s.rewardRows[t].itemCode),i.Kb(1),i.xc("ngIf",0==s.uniqueRewards)}}let hv=(()=>{class t extends bE{constructor(){super(...arguments),this.SETTING_ONCE="0",this.SETTING_N_MINS="3",this.SETTING_N_HOURS="2",this.SETTING_N_DAYS="1",this.limitationInterval="1",this.uniqueRewards=!1,this.rewardRows=[]}get code(){return t.CODE}onEditStart(t){if(this.rewardTime=(t.intData.length>0?t.intData[0]:0).toString(),this.uniqueRewards=t.intData.length>1&&1==t.intData[1],this.rewardsLimit=t.intData.length>2?t.intData[2]:0,this.limitationInterval=t.intData.length>3?t.intData[3].toString():"",this.limitEnabled=this.limitationInterval.length>0,t.stringData.length>0&&t.stringData.includes(";")&&t.stringData.split(";").forEach(t=>{if(t.length>0&&t.includes(",")){const e=t.split(",");3==e.length&&this.rewardRows.push({badge:"0"==e[0],itemCode:e[1],probability:e[2]})}}),this.rewardRows.length<4)for(let e=this.rewardRows.length;e<4;e++)this.rewardRows.push({badge:!1,itemCode:"",probability:""});super.onEditStart(t)}readIntegerParamsFromForm(){return[Number.parseInt(this.rewardTime),this.uniqueRewards?1:0,this.rewardsLimit,Number.parseInt(this.limitationInterval)]}readStringParamFromForm(){let t="";for(let e=0;e<this.rewardRows.length;e++){const s=this.rewardRows[e];""!=s.itemCode&&(t=t+(""==t?"":";")+[s.badge?0:1,s.itemCode,s.probability.toString()].join(","))}return t}decreaseLimit(){this.rewardsLimit-=1,this.rewardsLimit<t.LIMIT_MINIMUM_VALUE&&(this.rewardsLimit=t.LIMIT_MINIMUM_VALUE)}increaseLimit(){this.rewardsLimit+=1,this.rewardsLimit>t.LIMIT_MAXIMUM_VALUE&&(this.rewardsLimit=t.LIMIT_MAXIMUM_VALUE)}increaseRewardsCount(){this.rewardRows.push({badge:!1,itemCode:"",probability:""})}get limitSliderOptions(){return{floor:t.LIMIT_MINIMUM_VALUE,ceil:t.LIMIT_MAXIMUM_VALUE,step:t.LIMIT_STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}get hasIntervalValue(){return this.rewardTime==this.SETTING_N_DAYS||this.rewardTime==this.SETTING_N_HOURS||this.rewardTime==this.SETTING_N_MINS}validate(){let t=0;if(this.limitationInterval.trim().length>0&&isNaN(Number.parseInt(this.limitationInterval)))return"The interval value has to be a number.";for(let e=0;e<this.rewardRows.length;e++){const s=this.rewardRows[e];if(0!=s.itemCode.trim().length||0!=s.probability.trim().length){if(s.itemCode.includes(","))return"Product/badge codes must not contain ',' characters.";if(s.itemCode.includes(";"))return"Product/badge codes must not contain ';' characters.";if(s.itemCode.length>100)return"Product/badge codes cannot contain more than 100 characters.";if(""==s.itemCode)return"Remember to define product/badge codes for all rewards (fill all fields or leave all fields empty).";if(!this.uniqueRewards){if(""==s.probability)return"Remember to define probabilities for all rewards (fill all fields or leave all fields empty).";const e=Number.parseInt(s.probability);if(isNaN(e))return"Make sure all probabilities are numbers.";if(e<1||e>100)return"Make sure all probabilities are numbers between 1 and 100.";t+=e}}}return t>100?`The sum of probabilities cannot exceed 100. You now have ${t}.`:null}}return t.LIMIT_MINIMUM_VALUE=1,t.LIMIT_MAXIMUM_VALUE=1e3,t.LIMIT_STEPPER_VALUE=1,t.CODE=LS.GIVE_REWARD,t.\u0275fac=function(e){return lv(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:51,vars:23,consts:[[3,"delay","delayChange"],[1,"wired-options-box"],[1,"wpanel-select_container2"],[2,"margin-top","-2px","float","left"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"checkmark2"],[1,"wired_hr"],["class","wiredrange-box",4,"ngIf"],[1,"wired-subheader"],[1,"wiredselectbox",3,"ngModel","ngModelChange"],[3,"value","selected"],["class","wired-options-box",4,"ngIf"],[1,"form-row","mb-2"],[2,"min-height","200px","max-height","200px"],[4,"ngIf"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary","btn-sm","mb-2",3,"click"],[1,"fas","fa-plus"],[1,"wiredrange-box"],[1,"wiredrange_box"],[1,"decrease-number",3,"click"],["name","limit",3,"options","value","valueChange"],[1,"increase-number",3,"click"],["type","text",1,"wpanel-input",3,"ngModel","ngModelChange"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"label",2),i.dc(3,"p",3),i.Vc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"input",4),i.nc("ngModelChange",function(t){return e.limitEnabled=t}),i.cc(),i.Zb(7,"span",5),i.cc(),i.cc(),i.Zb(8,"div",6),i.Tc(9,nv,5,2,"div",7),i.Zb(10,"div",6),i.dc(11,"div",1),i.dc(12,"p",8),i.Vc(13,"How often can a user be rewarded"),i.cc(),i.dc(14,"select",9),i.nc("ngModelChange",function(t){return e.rewardTime=t}),i.dc(15,"option",10),i.Vc(16,"Once"),i.cc(),i.dc(17,"option",10),i.Vc(18,"1/n minutes"),i.cc(),i.dc(19,"option",10),i.Vc(20,"1/n hours"),i.cc(),i.dc(21,"option",10),i.Vc(22,"1/n days"),i.cc(),i.cc(),i.cc(),i.Zb(23,"div",6),i.Tc(24,rv,4,1,"div",11),i.dc(25,"div",1),i.dc(26,"label",2),i.dc(27,"p",3),i.Vc(28,"Unique Rewards"),i.cc(),i.dc(29,"input",4),i.nc("ngModelChange",function(t){return e.uniqueRewards=t}),i.cc(),i.Zb(30,"span",5),i.cc(),i.cc(),i.Zb(31,"div",6),i.dc(32,"div",1),i.dc(33,"p",8),i.Vc(34,"If checked each reward will be given once to each user. This will disable the probabilities option."),i.cc(),i.cc(),i.Zb(35,"div",6),i.dc(36,"div",12),i.dc(37,"perfect-scrollbar",13),i.dc(38,"table"),i.dc(39,"tr"),i.dc(40,"td"),i.dc(41,"small"),i.Vc(42,"Badge"),i.cc(),i.cc(),i.dc(43,"td"),i.dc(44,"small"),i.Vc(45,"Item code"),i.cc(),i.cc(),i.Tc(46,av,3,0,"td",14),i.cc(),i.Tc(47,cv,6,3,"tr",15),i.cc(),i.cc(),i.cc(),i.dc(48,"button",16),i.nc("click",function(){return e.increaseRewardsCount()}),i.Zb(49,"i",17),i.cc(),i.Zb(50,"div",6),i.cc()),2&t&&(i.xc("delay",e.delay),i.Kb(4),i.Wc(i.uc(5,19,"wiredfurni.params.prizelimit","amount",e.rewardsLimit>0?e.rewardsLimit:"")),i.Kb(2),i.xc("ngModel",e.limitEnabled),i.Kb(3),i.xc("ngIf",e.limitEnabled),i.Kb(5),i.Qb("mb-2",!e.hasIntervalValue),i.xc("ngModel",e.rewardTime),i.Kb(1),i.xc("value",e.SETTING_ONCE)("selected",e.rewardTime==e.SETTING_ONCE),i.Kb(2),i.xc("value",e.SETTING_N_MINS)("selected",e.rewardTime==e.SETTING_N_MINS),i.Kb(2),i.xc("value",e.SETTING_N_HOURS)("selected",e.rewardTime==e.SETTING_N_HOURS),i.Kb(2),i.xc("value",e.SETTING_N_DAYS)("selected",e.rewardTime==e.SETTING_N_DAYS),i.Kb(3),i.xc("ngIf",e.hasIntervalValue),i.Kb(5),i.xc("ngModel",e.uniqueRewards),i.Kb(17),i.xc("ngIf",0==e.uniqueRewards),i.Kb(1),i.xc("ngForOf",e.rewardRows))},encapsulation:2}),t})();const lv=i.fc(hv);let uv=(()=>{class t extends bE{constructor(){super(...arguments),this.points=1,this.times=1}get code(){return t.CODE}onEditStart(t){this.points=t.intData.length>0?t.intData[0]:1,this.times=t.intData.length>1?t.intData[1]:1,super.onEditStart(t)}readIntegerParamsFromForm(){return[this.points,this.times]}get hasSpecialInputs(){return!0}decreasePoints(){this.points-=1,this.points<t.MINIMUM_VALUE&&(this.points=t.MINIMUM_VALUE)}increasePoints(){this.points+=1,this.points>t.POINTS_MAXIMUM_VALUE&&(this.points=t.POINTS_MAXIMUM_VALUE)}decreaseTimes(){this.times-=1,this.times<t.MINIMUM_VALUE&&(this.times=t.MINIMUM_VALUE)}increaseTimes(){this.times+=1,this.times>t.TIMES_MAXIMUM_VALUE&&(this.times=t.TIMES_MAXIMUM_VALUE)}get pointsSliderOptions(){return{floor:t.MINIMUM_VALUE,ceil:t.POINTS_MAXIMUM_VALUE,step:t.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}get timesSliderOptions(){return{floor:t.MINIMUM_VALUE,ceil:t.TIMES_MAXIMUM_VALUE,step:t.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.MINIMUM_VALUE=1,t.STEPPER_VALUE=1,t.POINTS_MAXIMUM_VALUE=100,t.TIMES_MAXIMUM_VALUE=10,t.CODE=LS.GIVE_SCORE,t.\u0275fac=function(e){return _v(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:19,vars:15,consts:[[3,"delay","delayChange"],[1,"wiredrange-box"],[1,"wired-subheader"],[1,"wiredrange_box"],[1,"decrease-number",3,"click"],["name","points",3,"options","value","valueChange"],[1,"increase-number",3,"click"],[1,"wired_hr"],["name","times",3,"options","value","valueChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",3),i.dc(6,"div",4),i.nc("click",function(){return e.decreasePoints()}),i.cc(),i.dc(7,"ngx-slider",5),i.nc("valueChange",function(t){return e.points=t}),i.cc(),i.dc(8,"div",6),i.nc("click",function(){return e.increasePoints()}),i.cc(),i.cc(),i.cc(),i.Zb(9,"div",7),i.dc(10,"div",1),i.dc(11,"p",2),i.Vc(12),i.rc(13,"translate"),i.cc(),i.dc(14,"div",3),i.dc(15,"div",4),i.nc("click",function(){return e.decreaseTimes()}),i.cc(),i.dc(16,"ngx-slider",8),i.nc("valueChange",function(t){return e.times=t}),i.cc(),i.dc(17,"div",6),i.nc("click",function(){return e.increaseTimes()}),i.cc(),i.cc(),i.cc(),i.Zb(18,"div",7),i.cc()),2&t&&(i.xc("delay",e.delay),i.Kb(3),i.Wc(i.uc(4,7,"wiredfurni.params.setpoints","points",e.points)),i.Kb(4),i.xc("options",e.pointsSliderOptions)("value",e.points),i.Kb(5),i.Wc(i.uc(13,11,"wiredfurni.params.settimesingame","times",e.times)),i.Kb(4),i.xc("options",e.timesSliderOptions)("value",e.times))},encapsulation:2}),t})();const _v=i.fc(uv);let dv=(()=>{class t extends uv{get code(){return t.CODE}onEditStart(t){this.team=(t.intData.length>2?t.intData[2]:1).toString(),super.onEditStart(t)}readIntegerParamsFromForm(){return[this.points,this.times,parseInt(this.team)]}}return t.CODE=LS.GIVE_SCORE_TO_PREDEFINED_TEAM,t.\u0275fac=function(e){return gv(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:36,vars:35,consts:[[3,"delay","delayChange"],[1,"wiredrange-box"],[1,"wired-subheader"],[1,"wiredrange_box"],[1,"decrease-number",3,"click"],["name","points",3,"options","value","valueChange"],[1,"increase-number",3,"click"],[1,"wired_hr"],["name","times",3,"options","value","valueChange"],[1,"wired-options-box"],[1,"wiredselectbox",3,"ngModel","ngModelChange"],["value","1",3,"selected"],["value","2",3,"selected"],["value","3",3,"selected"],["value","4",3,"selected"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",3),i.dc(6,"div",4),i.nc("click",function(){return e.decreasePoints()}),i.cc(),i.dc(7,"ngx-slider",5),i.nc("valueChange",function(t){return e.points=t}),i.cc(),i.dc(8,"div",6),i.nc("click",function(){return e.increasePoints()}),i.cc(),i.cc(),i.cc(),i.Zb(9,"div",7),i.dc(10,"div",1),i.dc(11,"p",2),i.Vc(12),i.rc(13,"translate"),i.cc(),i.dc(14,"div",3),i.dc(15,"div",4),i.nc("click",function(){return e.decreaseTimes()}),i.cc(),i.dc(16,"ngx-slider",8),i.nc("valueChange",function(t){return e.times=t}),i.cc(),i.dc(17,"div",6),i.nc("click",function(){return e.increaseTimes()}),i.cc(),i.cc(),i.cc(),i.Zb(18,"div",7),i.dc(19,"div",9),i.dc(20,"p",2),i.Vc(21),i.rc(22,"translate"),i.cc(),i.dc(23,"select",10),i.nc("ngModelChange",function(t){return e.team=t}),i.dc(24,"option",11),i.Vc(25),i.rc(26,"translate"),i.cc(),i.dc(27,"option",12),i.Vc(28),i.rc(29,"translate"),i.cc(),i.dc(30,"option",13),i.Vc(31),i.rc(32,"translate"),i.cc(),i.dc(33,"option",14),i.Vc(34),i.rc(35,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.xc("delay",e.delay),i.Kb(3),i.Wc(i.uc(4,17,"wiredfurni.params.setpoints","points",e.points)),i.Kb(4),i.xc("options",e.pointsSliderOptions)("value",e.points),i.Kb(5),i.Wc(i.uc(13,21,"wiredfurni.params.settimesingame","times",e.times)),i.Kb(4),i.xc("options",e.timesSliderOptions)("value",e.times),i.Kb(5),i.Wc(i.sc(22,25,"wiredfurni.params.team")),i.Kb(2),i.xc("ngModel",e.team),i.Kb(1),i.xc("selected","1"==e.team),i.Kb(1),i.Wc(i.sc(26,27,"wiredfurni.params.team.1")),i.Kb(2),i.xc("selected","2"==e.team),i.Kb(1),i.Wc(i.sc(29,29,"wiredfurni.params.team.2")),i.Kb(2),i.xc("selected","3"==e.team),i.Kb(1),i.Wc(i.sc(32,31,"wiredfurni.params.team.3")),i.Kb(2),i.xc("selected","4"==e.team),i.Kb(1),i.Wc(i.sc(35,33,"wiredfurni.params.team.4")))},encapsulation:2}),t})();const gv=i.fc(dv);let mv=(()=>{class t extends bE{get code(){return t.CODE}onEditStart(t){this.team=(t.intData.length>0?t.intData[0]:1).toString(),super.onEditStart(t)}readIntegerParamsFromForm(){return[Number.parseInt(this.team)]}get hasSpecialInputs(){return!0}}return t.CODE=LS.JOIN_TEAM,t.\u0275fac=function(e){return pv(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:18,vars:21,consts:[[3,"delay","delayChange"],[1,"wired-options-box"],[1,"wired-subheader"],[1,"wiredselectbox",3,"ngModel","ngModelChange"],["value","1",3,"selected"],["value","2",3,"selected"],["value","3",3,"selected"],["value","4",3,"selected"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"select",3),i.nc("ngModelChange",function(t){return e.team=t}),i.dc(6,"option",4),i.Vc(7),i.rc(8,"translate"),i.cc(),i.dc(9,"option",5),i.Vc(10),i.rc(11,"translate"),i.cc(),i.dc(12,"option",6),i.Vc(13),i.rc(14,"translate"),i.cc(),i.dc(15,"option",7),i.Vc(16),i.rc(17,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.xc("delay",e.delay),i.Kb(3),i.Wc(i.sc(4,11,"wiredfurni.params.team")),i.Kb(2),i.xc("ngModel",e.team),i.Kb(1),i.xc("selected","1"==e.team),i.Kb(1),i.Wc(i.sc(8,13,"wiredfurni.params.team.1")),i.Kb(2),i.xc("selected","2"==e.team),i.Kb(1),i.Wc(i.sc(11,15,"wiredfurni.params.team.2")),i.Kb(2),i.xc("selected","3"==e.team),i.Kb(1),i.Wc(i.sc(14,17,"wiredfurni.params.team.3")),i.Kb(2),i.xc("selected","4"==e.team),i.Kb(1),i.Wc(i.sc(17,19,"wiredfurni.params.team.4")))},encapsulation:2}),t})();const pv=i.fc(mv);let fv=(()=>{class t extends bE{get code(){return t.CODE}get hasSpecialInputs(){return!0}readStringParamFromForm(){return this.message}onEditStart(t){this.message=t.stringData,super.onEditStart(t)}validate(){return this.message.length>100?_.a.instance.localization.getValue("wiredfurni.chatmsgtoolong",!1):null}}return t.CODE=LS.KICK_FROM_ROOM,t.\u0275fac=function(e){return Ev(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:6,vars:5,consts:[[3,"delay","delayChange"],[1,"wired-options-box"],[1,"wired-subheader"],["type","text",1,"wpanel-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",3),i.nc("ngModelChange",function(t){return e.message=t}),i.cc(),i.cc(),i.cc()),2&t&&(i.xc("delay",e.delay),i.Kb(3),i.Wc(i.sc(4,3,"wiredfurni.params.message")),i.Kb(2),i.xc("ngModel",e.message))},encapsulation:2}),t})();const Ev=i.fc(fv);let Sv=(()=>{class t extends bE{get code(){return t.CODE}}return t.CODE=LS.LEAVE_TEAM,t.\u0275fac=function(e){return vv(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.cc()),2&t&&i.xc("delay",e.delay)},encapsulation:2}),t})();const vv=i.fc(Sv);let bv=(()=>{class t extends bE{get code(){return t.CODE}onEditStart(t){this.movement=(t.intData.length>0?t.intData[0]:0).toString(),this.spacing=t.intData.length>1?t.intData[1]:1,super.onEditStart(t)}readIntegerParamsFromForm(){return[Number.parseInt(this.movement),this.spacing]}get hasSpecialInputs(){return!0}get requiresFurni(){return Bv._Str_4991}decreaseSpacing(){this.spacing-=1,this.spacing<t.SPACING_MINIMUM_VALUE&&(this.spacing=t.SPACING_MINIMUM_VALUE)}increaseSpacing(){this.spacing+=1,this.spacing>t.SPACING_MAXIMUM_VALUE&&(this.spacing=t.SPACING_MAXIMUM_VALUE)}get spacingSliderOptions(){return{floor:t.SPACING_MINIMUM_VALUE,ceil:t.SPACING_MAXIMUM_VALUE,step:t.SPACING_STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.SPACING_MINIMUM_VALUE=1,t.SPACING_MAXIMUM_VALUE=5,t.SPACING_STEPPER_VALUE=1,t.CODE=LS.MOVE_FURNI_TO,t.\u0275fac=function(e){return Iv(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:30,vars:15,consts:[[3,"delay","delayChange"],[1,"wired-options-box"],[1,"wired-subheader"],[1,"wiredrange-box"],[1,"wiredrange_box"],[1,"decrease-number",3,"click"],["name","spacing",3,"options","value","valueChange"],[1,"increase-number",3,"click"],[1,"wired-options-box",2,"margin-bottom","5px"],[1,"rs-select_container-radiosmall"],["type","radio","name","movement","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["src","/assets/images/wiredpanel/right-up.png"],["type","radio","name","movement","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["src","/assets/images/wiredpanel/right-down.png"],["type","radio","name","movement","value","4",1,"form-check-input",3,"ngModel","ngModelChange"],["src","/assets/images/wiredpanel/left-down.png"],["type","radio","name","movement","value","6",1,"form-check-input",3,"ngModel","ngModelChange"],["src","/assets/images/wiredpanel/left-up.png"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",3),i.dc(6,"div",4),i.dc(7,"div",5),i.nc("click",function(){return e.decreaseSpacing()}),i.cc(),i.dc(8,"ngx-slider",6),i.nc("valueChange",function(t){return e.spacing=t}),i.cc(),i.dc(9,"div",7),i.nc("click",function(){return e.increaseSpacing()}),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(10,"div",8),i.dc(11,"p",2),i.Vc(12),i.rc(13,"translate"),i.cc(),i.dc(14,"div",9),i.dc(15,"input",10),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(16,"label",11),i.Zb(17,"img",12),i.cc(),i.cc(),i.dc(18,"div",9),i.dc(19,"input",13),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(20,"label",11),i.Zb(21,"img",14),i.cc(),i.cc(),i.dc(22,"div",9),i.dc(23,"input",15),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(24,"label",11),i.Zb(25,"img",16),i.cc(),i.cc(),i.dc(26,"div",9),i.dc(27,"input",17),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(28,"label",11),i.Zb(29,"img",18),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.xc("delay",e.delay),i.Kb(3),i.Wc(i.uc(4,9,"wiredfurni.params.emptytiles","tiles",e.spacing)),i.Kb(5),i.xc("options",e.spacingSliderOptions)("value",e.spacing),i.Kb(4),i.Wc(i.sc(13,13,"wiredfurni.params.startdir")),i.Kb(3),i.xc("ngModel",e.movement),i.Kb(4),i.xc("ngModel",e.movement),i.Kb(4),i.xc("ngModel",e.movement),i.Kb(4),i.xc("ngModel",e.movement))},encapsulation:2}),t})();const Iv=i.fc(bv);let Rv=(()=>{class t extends bE{get code(){return t.CODE}onEditStart(t){this.movement=(t.intData.length>0?t.intData[0]:0).toString(),this.rotation=(t.intData.length>1?t.intData[1]:0).toString(),super.onEditStart(t)}readIntegerParamsFromForm(){return[Number.parseInt(this.movement),Number.parseInt(this.rotation)]}get hasSpecialInputs(){return!0}get requiresFurni(){return Bv._Str_5430}}return t.CODE=LS.MOVE_FURNI,t.\u0275fac=function(e){return Tv(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:65,vars:34,consts:[[3,"delay","delayChange"],[1,"wired-options-box",2,"margin-bottom","5px"],[1,"wired-subheader"],[1,"rs-select_container-radio",2,"margin-top","2px"],["type","radio","name","movement","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[1,"rs-select_container-radiosmall"],["type","radio","name","movement","value","4",1,"form-check-input",3,"ngModel","ngModelChange"],["src","/assets/images/wiredpanel/right-up.png"],["type","radio","name","movement","value","5",1,"form-check-input",3,"ngModel","ngModelChange"],["src","/assets/images/wiredpanel/right-down.png"],["type","radio","name","movement","value","6",1,"form-check-input",3,"ngModel","ngModelChange"],["src","/assets/images/wiredpanel/left-down.png"],["type","radio","name","movement","value","7",1,"form-check-input",3,"ngModel","ngModelChange"],["src","/assets/images/wiredpanel/left-up.png"],["type","radio","name","movement","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["src","/assets/images/wiredpanel/left-up_right-down.png"],["type","radio","name","movement","value","3",1,"form-check-input",3,"ngModel","ngModelChange"],["src","/assets/images/wiredpanel/left-down_right-up.png"],["type","radio","name","movement","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["src","/assets/images/wiredpanel/all-directions.png"],[1,"wired_hr"],[1,"wired-options-box"],[1,"rs-select_container-radio",2,"margin-top","-2px"],["type","radio","name","rotation","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"rs-select_container-radio"],["type","radio","name","rotation","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["src","/assets/images/wiredpanel/clockwise.png",2,"margin","3px 4px 3px -2px"],["type","radio","name","rotation","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["src","/assets/images/wiredpanel/counter_clockwise.png",2,"margin","3px 4px 3px -2px"],["type","radio","name","rotation","value","3",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",3),i.dc(6,"input",4),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(7,"label",5),i.Vc(8),i.rc(9,"translate"),i.cc(),i.cc(),i.dc(10,"div",6),i.dc(11,"input",7),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(12,"label",5),i.Zb(13,"img",8),i.cc(),i.cc(),i.dc(14,"div",6),i.dc(15,"input",9),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(16,"label",5),i.Zb(17,"img",10),i.cc(),i.cc(),i.dc(18,"div",6),i.dc(19,"input",11),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(20,"label",5),i.Zb(21,"img",12),i.cc(),i.cc(),i.dc(22,"div",6),i.dc(23,"input",13),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(24,"label",5),i.Zb(25,"img",14),i.cc(),i.cc(),i.dc(26,"div",6),i.dc(27,"input",15),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(28,"label",5),i.Zb(29,"img",16),i.cc(),i.cc(),i.dc(30,"div",6),i.dc(31,"input",17),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(32,"label",5),i.Zb(33,"img",18),i.cc(),i.cc(),i.dc(34,"div",6),i.dc(35,"input",19),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(36,"label",5),i.Zb(37,"img",20),i.cc(),i.cc(),i.cc(),i.Zb(38,"div",21),i.dc(39,"div",22),i.dc(40,"p",2),i.Vc(41),i.rc(42,"translate"),i.cc(),i.dc(43,"div",23),i.dc(44,"input",24),i.nc("ngModelChange",function(t){return e.rotation=t}),i.cc(),i.dc(45,"label",5),i.Vc(46),i.rc(47,"translate"),i.cc(),i.cc(),i.dc(48,"div",25),i.dc(49,"input",26),i.nc("ngModelChange",function(t){return e.rotation=t}),i.cc(),i.dc(50,"label",5),i.Zb(51,"img",27),i.Vc(52),i.rc(53,"translate"),i.cc(),i.cc(),i.dc(54,"div",25),i.dc(55,"input",28),i.nc("ngModelChange",function(t){return e.rotation=t}),i.cc(),i.dc(56,"label",5),i.Zb(57,"img",29),i.Vc(58),i.rc(59,"translate"),i.cc(),i.cc(),i.dc(60,"div",25),i.dc(61,"input",30),i.nc("ngModelChange",function(t){return e.rotation=t}),i.cc(),i.dc(62,"label",5),i.Vc(63),i.rc(64,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.xc("delay",e.delay),i.Kb(3),i.Wc(i.sc(4,20,"wiredfurni.params.movefurni")),i.Kb(3),i.xc("ngModel",e.movement),i.Kb(2),i.Wc(i.sc(9,22,"wiredfurni.params.movefurni.0")),i.Kb(3),i.xc("ngModel",e.movement),i.Kb(4),i.xc("ngModel",e.movement),i.Kb(4),i.xc("ngModel",e.movement),i.Kb(4),i.xc("ngModel",e.movement),i.Kb(4),i.xc("ngModel",e.movement),i.Kb(4),i.xc("ngModel",e.movement),i.Kb(4),i.xc("ngModel",e.movement),i.Kb(6),i.Wc(i.sc(42,24,"wiredfurni.params.rotatefurni")),i.Kb(3),i.xc("ngModel",e.rotation),i.Kb(2),i.Wc(i.sc(47,26,"wiredfurni.params.rotatefurni.0")),i.Kb(3),i.xc("ngModel",e.rotation),i.Kb(3),i.Xc(" ",i.sc(53,28,"wiredfurni.params.rotatefurni.1"),""),i.Kb(3),i.xc("ngModel",e.rotation),i.Kb(3),i.Xc(" ",i.sc(59,30,"wiredfurni.params.rotatefurni.2"),""),i.Kb(3),i.xc("ngModel",e.rotation),i.Kb(2),i.Wc(i.sc(64,32,"wiredfurni.params.rotatefurni.3")))},encapsulation:2}),t})();const Tv=i.fc(Rv);let Ov=(()=>{class t extends bE{get code(){return t.CODE}onEditStart(t){this.movement=(t.intData.length>0?t.intData[0]:0).toString(),this.rotation=(t.intData.length>1?t.intData[1]:0).toString(),super.onEditStart(t)}readIntegerParamsFromForm(){return[Number.parseInt(this.movement),Number.parseInt(this.rotation)]}get hasSpecialInputs(){return!0}get requiresFurni(){return Bv._Str_5430}}return t.CODE=LS.MOVE_TO_DIRECTION,t.\u0275fac=function(e){return yv(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:62,vars:39,consts:[[3,"delay","delayChange"],[1,"wired-options-box"],[1,"wired-subheader"],[1,"rs-select_container-radiosmall"],["type","radio","name","movement","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["src","/assets/images/wiredpanel/right-up.png"],["type","radio","name","movement","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["src","/assets/images/wiredpanel/right-down.png"],["type","radio","name","movement","value","4",1,"form-check-input",3,"ngModel","ngModelChange"],["src","/assets/images/wiredpanel/left-down.png"],["type","radio","name","movement","value","6",1,"form-check-input",3,"ngModel","ngModelChange"],["src","/assets/images/wiredpanel/left-up.png"],[1,"wired_hr"],[1,"rs-select_container-radio"],["type","radio","name","rotation","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","3",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","4",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","5",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","6",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",3),i.dc(6,"input",4),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(7,"label",5),i.Zb(8,"img",6),i.cc(),i.cc(),i.dc(9,"div",3),i.dc(10,"input",7),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(11,"label",5),i.Zb(12,"img",8),i.cc(),i.cc(),i.dc(13,"div",3),i.dc(14,"input",9),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(15,"label",5),i.Zb(16,"img",10),i.cc(),i.cc(),i.dc(17,"div",3),i.dc(18,"input",11),i.nc("ngModelChange",function(t){return e.movement=t}),i.cc(),i.dc(19,"label",5),i.Zb(20,"img",12),i.cc(),i.cc(),i.cc(),i.Zb(21,"div",13),i.dc(22,"div",1),i.dc(23,"p",2),i.Vc(24),i.rc(25,"translate"),i.cc(),i.dc(26,"div",14),i.dc(27,"input",15),i.nc("ngModelChange",function(t){return e.rotation=t}),i.cc(),i.dc(28,"label",5),i.Vc(29),i.rc(30,"translate"),i.cc(),i.cc(),i.dc(31,"div",14),i.dc(32,"input",16),i.nc("ngModelChange",function(t){return e.rotation=t}),i.cc(),i.dc(33,"label",5),i.Vc(34),i.rc(35,"translate"),i.cc(),i.cc(),i.dc(36,"div",14),i.dc(37,"input",17),i.nc("ngModelChange",function(t){return e.rotation=t}),i.cc(),i.dc(38,"label",5),i.Vc(39),i.rc(40,"translate"),i.cc(),i.cc(),i.dc(41,"div",14),i.dc(42,"input",18),i.nc("ngModelChange",function(t){return e.rotation=t}),i.cc(),i.dc(43,"label",5),i.Vc(44),i.rc(45,"translate"),i.cc(),i.cc(),i.dc(46,"div",14),i.dc(47,"input",19),i.nc("ngModelChange",function(t){return e.rotation=t}),i.cc(),i.dc(48,"label",5),i.Vc(49),i.rc(50,"translate"),i.cc(),i.cc(),i.dc(51,"div",14),i.dc(52,"input",20),i.nc("ngModelChange",function(t){return e.rotation=t}),i.cc(),i.dc(53,"label",5),i.Vc(54),i.rc(55,"translate"),i.cc(),i.cc(),i.dc(56,"div",14),i.dc(57,"input",21),i.nc("ngModelChange",function(t){return e.rotation=t}),i.cc(),i.dc(58,"label",5),i.Vc(59),i.rc(60,"translate"),i.cc(),i.cc(),i.cc(),i.Zb(61,"div",13),i.cc()),2&t&&(i.xc("delay",e.delay),i.Kb(3),i.Wc(i.sc(4,21,"wiredfurni.params.startdir")),i.Kb(3),i.xc("ngModel",e.movement),i.Kb(4),i.xc("ngModel",e.movement),i.Kb(4),i.xc("ngModel",e.movement),i.Kb(4),i.xc("ngModel",e.movement),i.Kb(6),i.Wc(i.sc(25,23,"wiredfurni.params.turn")),i.Kb(3),i.xc("ngModel",e.rotation),i.Kb(2),i.Wc(i.sc(30,25,"wiredfurni.params.turn.0")),i.Kb(3),i.xc("ngModel",e.rotation),i.Kb(2),i.Wc(i.sc(35,27,"wiredfurni.params.turn.1")),i.Kb(3),i.xc("ngModel",e.rotation),i.Kb(2),i.Wc(i.sc(40,29,"wiredfurni.params.turn.2")),i.Kb(3),i.xc("ngModel",e.rotation),i.Kb(2),i.Wc(i.sc(45,31,"wiredfurni.params.turn.3")),i.Kb(3),i.xc("ngModel",e.rotation),i.Kb(2),i.Wc(i.sc(50,33,"wiredfurni.params.turn.4")),i.Kb(3),i.xc("ngModel",e.rotation),i.Kb(2),i.Wc(i.sc(55,35,"wiredfurni.params.turn.5")),i.Kb(3),i.xc("ngModel",e.rotation),i.Kb(2),i.Wc(i.sc(60,37,"wiredfurni.params.turn.6")))},encapsulation:2}),t})();const yv=i.fc(Ov);let Cv=(()=>{class t extends bE{constructor(){super(...arguments),this.length=0}get code(){return t.CODE}get hasSpecialInputs(){return!0}readStringParamFromForm(){return this.message}readIntegerParamsFromForm(){return[this.length]}onEditStart(t){this.message=t.stringData,this.length=t.intData.length>0?t.intData[0]:10,super.onEditStart(t)}validate(){return this.message.length>100?_.a.instance.localization.getValue("wiredfurni.chatmsgtoolong",!1):null}decreaseLength(){this.length-=1,this.length<t.LENGTH_MINIMUM_VALUE&&(this.length=t.LENGTH_MINIMUM_VALUE)}increaseLength(){this.length+=1,this.length>t.LENGTH_MAXIMUM_VALUE&&(this.length=t.LENGTH_MAXIMUM_VALUE)}get lengthSliderOptions(){return{floor:t.LENGTH_MINIMUM_VALUE,ceil:t.LENGTH_MAXIMUM_VALUE,step:t.LENGTH_STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.LENGTH_MINIMUM_VALUE=1,t.LENGTH_MAXIMUM_VALUE=10,t.LENGTH_STEPPER_VALUE=1,t.CODE=LS.MUTE_USER,t.\u0275fac=function(e){return Av(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:16,vars:12,consts:[[3,"delay","delayChange"],[1,"wiredrange-box"],[1,"wired-subheader"],[1,"wiredrange_box"],[1,"decrease-number",3,"click"],["name","length",3,"options","value","valueChange"],[1,"increase-number",3,"click"],[1,"wired_hr"],[1,"wired-options-box"],["type","text",1,"wpanel-input",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",1),i.dc(6,"div",3),i.dc(7,"div",4),i.nc("click",function(){return e.decreaseLength()}),i.cc(),i.dc(8,"ngx-slider",5),i.nc("valueChange",function(t){return e.length=t}),i.cc(),i.dc(9,"div",6),i.nc("click",function(){return e.increaseLength()}),i.cc(),i.cc(),i.cc(),i.cc(),i.Zb(10,"div",7),i.dc(11,"div",8),i.dc(12,"p",2),i.Vc(13),i.rc(14,"translate"),i.cc(),i.dc(15,"input",9),i.nc("ngModelChange",function(t){return e.message=t}),i.cc(),i.cc(),i.cc()),2&t&&(i.xc("delay",e.delay),i.Kb(3),i.Wc(i.uc(4,6,"wiredfurni.params.length.minutes","minutes",e.length)),i.Kb(5),i.xc("options",e.lengthSliderOptions)("value",e.length),i.Kb(5),i.Wc(i.sc(14,10,"wiredfurni.params.message")),i.Kb(2),i.xc("ngModel",e.message))},encapsulation:2}),t})();const Av=i.fc(Cv);let Mv=(()=>{class t extends bE{get code(){return t.CODE}}return t.CODE=LS.RESET,t.\u0275fac=function(e){return wv(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.cc()),2&t&&i.xc("delay",e.delay)},encapsulation:2}),t})();const wv=i.fc(Mv);let Dv=(()=>{class t extends bE{get code(){return t.CODE}onEditStart(t){this.state=t.getBoolean(0),this.direction=t.getBoolean(1),this.position=t.getBoolean(2),super.onEditStart(t)}readIntegerParamsFromForm(){return[this.state?1:0,this.direction?1:0,this.position?1:0]}get requiresFurni(){return Bv._Str_4873}get hasStateSnapshot(){return!0}}return t.CODE=LS.SET_FURNI_STATE,t.\u0275fac=function(e){return Nv(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:23,vars:16,consts:[[3,"delay","delayChange"],[1,"mobi-criteria-to-be-met"],[1,"wired-subheader"],[1,"wpanel-select_container2"],[2,"margin-top","-2px","float","left"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"checkmark2"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"label",3),i.dc(6,"p",4),i.Vc(7),i.rc(8,"translate"),i.cc(),i.dc(9,"input",5),i.nc("ngModelChange",function(t){return e.state=t}),i.cc(),i.Zb(10,"span",6),i.cc(),i.dc(11,"label",3),i.dc(12,"p",4),i.Vc(13),i.rc(14,"translate"),i.cc(),i.dc(15,"input",5),i.nc("ngModelChange",function(t){return e.direction=t}),i.cc(),i.Zb(16,"span",6),i.cc(),i.dc(17,"label",3),i.dc(18,"p",4),i.Vc(19),i.rc(20,"translate"),i.cc(),i.dc(21,"input",5),i.nc("ngModelChange",function(t){return e.position=t}),i.cc(),i.Zb(22,"span",6),i.cc(),i.cc(),i.cc()),2&t&&(i.xc("delay",e.delay),i.Kb(3),i.Wc(i.sc(4,8,"wiredfurni.params.conditions")),i.Kb(4),i.Wc(i.sc(8,10,"wiredfurni.params.condition.state")),i.Kb(2),i.xc("ngModel",e.state),i.Kb(4),i.Wc(i.sc(14,12,"wiredfurni.params.condition.direction")),i.Kb(2),i.xc("ngModel",e.direction),i.Kb(4),i.Wc(i.sc(20,14,"wiredfurni.params.condition.position")),i.Kb(2),i.xc("ngModel",e.position))},encapsulation:2}),t})();const Nv=i.fc(Dv);let Uv=(()=>{class t extends bE{get code(){return t.CODE}get requiresFurni(){return Bv._Str_5430}}return t.CODE=LS.TELEPORT,t.\u0275fac=function(e){return xv(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.cc()),2&t&&i.xc("delay",e.delay)},encapsulation:2}),t})();const xv=i.fc(Uv);let Lv=(()=>{class t extends bE{get code(){return t.CODE}get requiresFurni(){return Bv._Str_5430}}return t.CODE=LS.TOGGLE_FURNI_STATE,t.\u0275fac=function(e){return Pv(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(t,e){1&t&&(i.dc(0,"nitro-wired-action-base-component",0),i.nc("delayChange",function(t){return e.delay=t}),i.cc()),2&t&&i.xc("delay",e.delay)},encapsulation:2}),t})();const Pv=i.fc(Lv);class Fv{_Str_9781(t){switch(t){case Lv.CODE:return Lv;case Uv.CODE:return Uv;case JS.CODE:return JS;case sv.CODE:return sv;case XS.CODE:return XS;case tv.CODE:return tv;case BS.CODE:return BS;case kS.CODE:return kS;case Sv.CODE:return Sv;case Mv.CODE:return Mv;case fv.CODE:return fv;case qS.CODE:return qS;case Dv.CODE:return Dv;case KS.CODE:return KS;case Cv.CODE:return Cv;case PS.CODE:return PS;case HS.CODE:return HS;case zS.CODE:return zS;case Rv.CODE:return Rv;case Ov.CODE:return Ov;case mv.CODE:return mv;case dv.CODE:return dv;case uv.CODE:return uv;case bv.CODE:return bv;case hv.CODE:return hv}return null}_Str_15652(t){return this._Str_9781(t)}_Str_14545(t){return t instanceof uE.a}_Str_1196(){return"action"}}const kv=["inputsContainer"];function Vv(t,e){}let Bv=(()=>{class t{constructor(t,e,s,i,n){this._settingsService=t,this._notificationService=e,this._wiredService=s,this._componentFactoryResolver=i,this._ngZone=n,this._updated=null,this._lastComponent=null,this._furniSelectedIds=[]}ngOnInit(){this._wiredService.component=this,this._triggerConfs=new xS,this._actionTypes=new Fv,this._conditionTypes=new sS,this._selectionVisualizer=new SE(this)}ngOnDestroy(){this._wiredService.component=null}setupTrigger(t){this._updated=t;const e=this._Str_3959();this._selectionVisualizer.clearSelectionShaderFromFurni(this._furniSelectedIds),this._furniSelectedIds=[...this._updated.selectedItems],e.onEditStart(this._updated),this._selectionVisualizer.applySelectionShaderToFurni(this._furniSelectedIds)}_Str_19071(){return this._updated instanceof dE.a?this._triggerConfs:this._updated instanceof uE.a?this._actionTypes:this._updated instanceof _E.a?this._conditionTypes:null}_Str_3959(){const t=this._Str_19071()._Str_15652(this._updated.code);if(!t)return null;if(this._lastComponent&&this._lastComponent.instance instanceof t)return this._lastComponent.instance;this.inputsContainer.length&&this.inputsContainer.remove();const e=this._componentFactoryResolver.resolveComponentFactory(t);let s=null;return e&&(s=this.inputsContainer.createComponent(e)),this._lastComponent=s,s?(s.instance.onInitStart(),s.instance):null}close(){this.inputsContainer.length&&this.inputsContainer.remove(),this._selectionVisualizer.clearSelectionShaderFromFurni(this._furniSelectedIds),this._updated=null,this._lastComponent=null,this._furniSelectedIds=[]}save(){this.isOwnerOfFurniture(this._updated.id)?this.update():this._notificationService.alertWithConfirm("${wiredfurni.nonowner.change.confirm.body}","${wiredfurni.nonowner.change.confirm.title}",()=>{this.update()})}update(){const t=this._Str_3959().validate();t?this._notificationService.alert(t,"Update failed"):this._updated instanceof dE.a?_.a.instance.communication.connection.send(new pE.a(this._updated.id,this.readIntegerParams(),this.readStringParam(),this.readFurniSelectionIds(),this.readFurniSelectionCode())):this._updated instanceof uE.a?_.a.instance.communication.connection.send(new gE.a(this._updated.id,this.readIntegerParams(),this.readStringParam(),this.readFurniSelectionIds(),this.getActionDelay(),this.readFurniSelectionCode())):this._updated instanceof _E.a&&_.a.instance.communication.connection.send(new mE.a(this._updated.id,this.readIntegerParams(),this.readStringParam(),this.readFurniSelectionIds(),this.readFurniSelectionCode()))}getActionDelay(){const t=this._Str_3959();return t&&t instanceof bE?t.delay:0}readIntegerParams(){const t=this._Str_3959();return t?t.readIntegerParamsFromForm():[]}readStringParam(){const t=this._Str_3959();return t?t.readStringParamFromForm():""}readFurniSelectionIds(){return[...this._furniSelectedIds]}readFurniSelectionCode(){if(!this._updated._Str_21824)return 0;const e=this._Str_3959();return!e||e.requiresFurni!==t._Str_4991&&e.requiresFurni!==t._Str_5430?0:this._updated._Str_6040}getFurniName(){const t=this._updated&&this._updated.spriteId||-1,e=_.a.instance.sessionDataManager.getFloorItemData(t);return e?e.name:"NAME: "+t}getFurniDescription(){const t=this._updated&&this._updated.spriteId||-1,e=_.a.instance.sessionDataManager.getFloorItemData(t);return e?e.description:"NAME: "+t}_Str_19885(){return this._Str_3959().requiresFurni!==t._Str_5431}toggleFurniSelected(t,e){if(!this._updated||!this._Str_19885())return;const s=this._furniSelectedIds.indexOf(t);s>=0?(this._furniSelectedIds.splice(s,1),this._selectionVisualizer.hide(t)):this._furniSelectedIds.length<this._updated.maximumItemSelectionCount&&(this._furniSelectedIds.push(t),this._selectionVisualizer.show(t)),_.a.instance.localization.registerParameter("wiredfurni.pickfurnis.caption","count",this._furniSelectedIds.length.toString())}isOwnerOfFurniture(t){const e=_.a.instance.roomEngine.getRoomObject(this._wiredService.roomId,t,V.a.FLOOR);return!!e&&e.model.getValue(K.a.FURNITURE_OWNER_ID)===_.a.instance.sessionDataManager.userId}get roomId(){return this._wiredService.roomId}get furniSelectedIds(){return this._furniSelectedIds}get maximumItemSelectionCount(){return this._updated.maximumItemSelectionCount}}return t._Str_5431=0,t._Str_4873=1,t._Str_4991=2,t._Str_5430=3,t.\u0275fac=function(e){return new(e||t)(i.Yb(m),i.Yb(ss),i.Yb(us),i.Yb(i.m),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-wired-main-component"]],viewQuery:function(t,e){if(1&t&&i.bd(kv,1,i.Z),2&t){let t;i.Gc(t=i.oc())&&(e.inputsContainer=t.first)}},decls:2,vars:0,consts:[["inputsContainer",""]],template:function(t,e){1&t&&i.Tc(0,Vv,0,0,"ng-template",null,0,i.Uc)},encapsulation:2}),t})();var Wv=s("xAfD");function Kv(t,e){if(1&t){const t=i.ec();i.dc(0,"div",22),i.nc("click",function(){return i.Kc(t),i.qc(2).getMembers(!0)}),i.Vc(1),i.rc(2,"translate"),i.cc()}if(2&t){const t=i.qc(2);i.Kb(1),i.Wc(i.uc(2,1,"group.members.pendingmembers","count",t.groupMembershipRequestsCount))}}function Gv(t,e){if(1&t){const t=i.ec();i.dc(0,"p",23),i.nc("click",function(){return i.Kc(t),i.qc(2).manage()}),i.Vc(1),i.rc(2,"translate"),i.cc()}2&t&&(i.Kb(1),i.Wc(i.sc(2,1,"group.manage")))}function Hv(t,e){if(1&t){const t=i.ec();i.dc(0,"div",24),i.nc("click",function(){return i.Kc(t),i.qc(2).leave()}),i.dc(1,"p",25),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()}2&t&&(i.Kb(2),i.Wc(i.sc(3,1,"group.leave")))}function jv(t,e){if(1&t){const t=i.ec();i.dc(0,"div",24),i.nc("click",function(){return i.Kc(t),i.qc(2).join()}),i.dc(1,"p",25),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()}2&t&&(i.Kb(2),i.Wc(i.sc(3,1,"group.join")))}function zv(t,e){if(1&t){const t=i.ec();i.dc(0,"div",24),i.nc("click",function(){return i.Kc(t),i.qc(3).join()}),i.dc(1,"p",25),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()}2&t&&(i.Kb(2),i.Wc(i.sc(3,1,"group.requestmembership")))}function Yv(t,e){1&t&&(i.dc(0,"div",27),i.dc(1,"p",25),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Wc(i.sc(3,1,"group.membershippending")))}function qv(t,e){if(1&t&&(i.dc(0,"div"),i.Tc(1,zv,4,3,"div",20),i.Tc(2,Yv,4,3,"div",26),i.cc()),2&t){const t=i.qc(2);i.Kb(1),i.xc("ngIf",0===t.groupMembershipType),i.Kb(1),i.xc("ngIf",2===t.groupMembershipType)}}const Zv=function(t,e,s){return{grouptype_icon_0:t,grouptype_icon_1:e,grouptype_icon_2:s}},Xv=function(){return["date","owner"]},Qv=function(t,e){return[t,e]};function Jv(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"p",3),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",4),i.nc("click",function(){return i.Kc(t),i.qc().clear()}),i.cc(),i.cc(),i.dc(6,"div",5),i.dc(7,"div",6),i.dc(8,"div",7),i.dc(9,"div",8),i.Zb(10,"nitro-badge",9),i.cc(),i.cc(),i.dc(11,"div",10),i.nc("click",function(){return i.Kc(t),i.qc().getMembers(!1)}),i.Vc(12),i.rc(13,"translate"),i.cc(),i.Tc(14,Kv,3,5,"div",11),i.cc(),i.dc(15,"div",12),i.dc(16,"div",13),i.Zb(17,"div",14),i.Vc(18),i.cc(),i.dc(19,"p",15),i.Vc(20),i.rc(21,"translate"),i.cc(),i.dc(22,"p",16),i.Vc(23),i.cc(),i.dc(24,"p",17),i.nc("click",function(){return i.Kc(t),i.qc().goToHomeRoom()}),i.Vc(25),i.rc(26,"translate"),i.cc(),i.Tc(27,Gv,3,3,"p",18),i.dc(28,"div",19),i.Tc(29,Hv,4,3,"div",20),i.Tc(30,jv,4,3,"div",20),i.Tc(31,qv,3,2,"div",21),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.sc(4,14,"group.window.title")),i.Kb(7),i.xc("badge",t.groupBadgeCode)("isGroup",!0),i.Kb(2),i.Wc(i.uc(13,16,"group.members.members","count",t.groupMembersCount)),i.Kb(2),i.xc("ngIf",t.groupMembershipRequestsCount>0),i.Kb(3),i.xc("ngClass",i.Dc(26,Zv,0===t.groupType,1===t.groupType,2===t.groupType)),i.Kb(1),i.Xc(" ",t.groupName,""),i.Kb(2),i.Wc(i.uc(21,20,"group.created",i.Ac(30,Xv),i.Cc(31,Qv,t.groupCreationDate,t.groupOwnerName))),i.Kb(3),i.Wc(t.groupDescription),i.Kb(2),i.Wc(i.sc(26,24,"group.linktobase")),i.Kb(2),i.xc("ngIf",t.isOwner),i.Kb(2),i.xc("ngIf",1===t.groupMembershipType),i.Kb(1),i.xc("ngIf",0===t.groupType&&0===t.groupMembershipType),i.Kb(1),i.xc("ngIf",1===t.groupType)}}let $v=(()=>{class t{constructor(t,e,s){this._ngZone=t,this._navigatorService=e,this._groupService=s,this._groupService.groupInfoComponent=this,this.clear()}clear(){this._ngZone.run(()=>{this._groupId=0,this._groupName=null,this._groupBadgeCode=null,this._groupDescription=null,this._groupType=-1,this._groupMembershipType=-1,this._groupCreationDate=null,this._groupOwnerName=null,this._groupMembersCount=0,this._groupMembershipRequestsCount=0,this._groupHomeRoomId=0,this._isOwner=!1})}goToHomeRoom(){this._navigatorService.goToRoom(this._groupHomeRoomId)}manage(){_.a.instance.createLinkEvent("groups/manage/"+this.groupId)}getMembers(t){this._groupService.getMembers(this._groupId,0,null,t?2:0)}join(){this.groupId&&0===this._groupMembershipType&&this._groupService.join(this.groupId)}leave(){this.groupId&&1===this._groupMembershipType&&!this.isOwner&&this._groupService.removeMember(this.groupId,_.a.instance.sessionDataManager.userId)}confirmLeave(){return[_.a.instance.localization.getValue("group.leaveconfirm.title"),_.a.instance.localization.getValue("group.leaveconfirm.desc"),[new wl("group.leave",()=>{_.a.instance.communication.connection.send(new Wv.a(this.groupId,_.a.instance.sessionDataManager.userId))},["btn-danger"]),new wl("generic.close",()=>{},["btn-primary"])]]}get visible(){return this._groupId>0}get groupId(){return this._groupId}set groupId(t){this._groupId=t}get groupName(){return this._groupName}set groupName(t){this._groupName=t}get groupBadgeCode(){return this._groupBadgeCode}set groupBadgeCode(t){this._groupBadgeCode=t}get groupDescription(){return this._groupDescription}set groupDescription(t){this._groupDescription=t}get groupType(){return this._groupType}set groupType(t){this._groupType=t}get groupMembershipType(){return this._groupMembershipType}set groupMembershipType(t){this._groupMembershipType=t}get groupCreationDate(){return this._groupCreationDate}set groupCreationDate(t){this._groupCreationDate=t}get groupOwnerName(){return this._groupOwnerName}set groupOwnerName(t){this._groupOwnerName=t}get groupMembersCount(){return this._groupMembersCount}set groupMembersCount(t){this._groupMembersCount=t}get groupMembershipRequestsCount(){return this._groupMembershipRequestsCount}set groupMembershipRequestsCount(t){this._groupMembershipRequestsCount=t}get groupHomeRoomId(){return this._groupHomeRoomId}set groupHomeRoomId(t){this._groupHomeRoomId=t}get isOwner(){return this._isOwner}set isOwner(t){this._isOwner=t}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H),i.Yb(hl),i.Yb(Bu))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-group-info-component"]],decls:1,vars:1,consts:[["class","roomgroup-info","dragHandle",".roomgroup-infohead",3,"bringToTop","draggable",4,"ngIf"],["dragHandle",".roomgroup-infohead",1,"roomgroup-info",3,"bringToTop","draggable"],[1,"roomgroup-infohead"],[1,"up-baslik"],[1,"old-kapat",3,"click"],[1,"roomgroup-info-bg"],[1,"group-info-box_left"],[1,"aaaa"],[1,"gbe-badge"],[3,"badge","isGroup"],[1,"group-members",3,"click"],["class","group-members","style","font-weight: 400;",3,"click",4,"ngIf"],[1,"group-info-box_right"],[1,"ginfo_group-name"],[1,"groupinfoico",3,"ngClass"],[1,"ginfo_group-creation-date"],[1,"ginfo_group-description"],[1,"ginfo_group-room",2,"width","100%",3,"click"],["class","ginfo_buy-group-mobi","style","width: 100%;",3,"click",4,"ngIf"],[1,"group-membership-action"],["class","leave_group-box",3,"click",4,"ngIf"],[4,"ngIf"],[1,"group-members",2,"font-weight","400",3,"click"],[1,"ginfo_buy-group-mobi",2,"width","100%",3,"click"],[1,"leave_group-box",3,"click"],[1,"leaveg-text"],["class","leave_group-box","disabled","",4,"ngIf"],["disabled","",1,"leave_group-box"]],template:function(t,e){1&t&&i.Tc(0,Jv,32,34,"div",0),2&t&&i.xc("ngIf",e.visible)},directives:[p.n,Tr,Lr,Gc,p.l],pipes:[ln],encapsulation:2}),t})();function tb(t,e){1&t&&(i.dc(0,"option",19),i.Vc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Wc(i.sc(2,1,"group.members.search.pending")))}function eb(t,e){if(1&t){const t=i.ec();i.dc(0,"div",27),i.nc("click",function(){i.Kc(t);const e=i.qc().$implicit;return i.qc(2).removeOrDeclineMember(e.id,e.rank)}),i.cc()}}function sb(t,e){if(1&t&&i.Zb(0,"i",28),2&t){const t=i.qc().$implicit,e=i.qc(2);i.xc("ngClass",e.getRankIcon(t.rank))}}function ib(t,e){1&t&&(i.dc(0,"div",29),i.Vc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Wc(i.sc(2,1,"group.members.owner")))}function nb(t,e){if(1&t){const t=i.ec();i.dc(0,"p",31),i.nc("click",function(){i.Kc(t);const e=i.qc(2).$implicit;return i.qc(2).takeAdmin(e.id)}),i.Vc(1),i.rc(2,"translate"),i.cc()}2&t&&(i.Kb(1),i.Wc(i.sc(2,1,"group.members.removerights")))}function rb(t,e){if(1&t){const t=i.ec();i.dc(0,"p",31),i.nc("click",function(){i.Kc(t);const e=i.qc(2).$implicit;return i.qc(2).giveAdmin(e.id)}),i.Vc(1),i.rc(2,"translate"),i.cc()}2&t&&(i.Kb(1),i.Wc(i.sc(2,1,"group.members.giverights")))}function ab(t,e){if(1&t){const t=i.ec();i.dc(0,"p",31),i.nc("click",function(){i.Kc(t);const e=i.qc(2).$implicit;return i.qc(2).acceptMembership(e.id)}),i.Vc(1),i.rc(2,"translate"),i.cc()}2&t&&(i.Kb(1),i.Wc(i.sc(2,1,"group.members.accept")))}function ob(t,e){if(1&t&&(i.dc(0,"div"),i.Tc(1,nb,3,3,"p",30),i.Tc(2,rb,3,3,"p",30),i.Tc(3,ab,3,3,"p",30),i.cc()),2&t){const t=i.qc().$implicit;i.Kb(1),i.xc("ngIf",1===t.rank),i.Kb(1),i.xc("ngIf",2===t.rank),i.Kb(1),i.xc("ngIf",3===t.rank)}}function cb(t,e){if(1&t){const t=i.ec();i.dc(0,"div",20),i.Tc(1,eb,1,0,"div",21),i.Zb(2,"div",22),i.dc(3,"div",23),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc(2).openProfile(s.id)}),i.Vc(4),i.cc(),i.Tc(5,sb,1,1,"i",24),i.Tc(6,ib,3,3,"div",25),i.Tc(7,ob,4,3,"div",26),i.cc()}if(2&t){const t=e.$implicit,s=i.qc(2);i.Kb(1),i.xc("ngIf",s.admin&&t.rank>0),i.Kb(3),i.Wc(t.name),i.Kb(1),i.xc("ngIf",t.rank<3),i.Kb(1),i.xc("ngIf",0===t.rank),i.Kb(1),i.xc("ngIf",s.admin&&t.id!==s.myId&&0!==t.rank)}}const hb=function(){return["amount","page","totalPages"]},lb=function(t,e,s){return[t,e,s]};function ub(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"p",3),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",4),i.nc("click",function(){return i.Kc(t),i.qc().clear()}),i.cc(),i.cc(),i.dc(6,"div",5),i.dc(7,"div",6),i.Zb(8,"nitro-badge",7),i.cc(),i.dc(9,"input",8),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().query=e})("keyup.enter",function(){return i.Kc(t),i.qc().searchMembers()}),i.rc(10,"translate"),i.cc(),i.dc(11,"select",9),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().level=e})("ngModelChange",function(){return i.Kc(t),i.qc().searchMembers()}),i.dc(12,"option",10),i.Vc(13),i.rc(14,"translate"),i.cc(),i.dc(15,"option",11),i.Vc(16),i.rc(17,"translate"),i.cc(),i.Tc(18,tb,3,3,"option",12),i.cc(),i.cc(),i.dc(19,"div",13),i.Tc(20,cb,8,5,"div",14),i.cc(),i.dc(21,"div",15),i.dc(22,"div",16),i.nc("click",function(){return i.Kc(t),i.qc().previousPage()}),i.cc(),i.dc(23,"div",17),i.Vc(24),i.rc(25,"translate"),i.cc(),i.dc(26,"div",18),i.nc("click",function(){return i.Kc(t),i.qc().nextPage()}),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.uc(4,13,"group.members.title","groupName",t.groupName)),i.Kb(5),i.xc("badge",t.groupBadgeCode)("isGroup",!0),i.Kb(1),i.xc("placeholder",i.sc(10,17,"group.members.searchinfo"))("ngModel",t.query),i.Kb(2),i.xc("ngModel",t.level),i.Kb(2),i.Wc(i.sc(14,19,"group.members.search.all")),i.Kb(3),i.Wc(i.sc(17,21,"group.members.search.admins")),i.Kb(2),i.xc("ngIf",t.admin),i.Kb(2),i.xc("ngForOf",t.result),i.Kb(2),i.xc("disabled",0===t.pageIndex),i.Kb(2),i.Wc(i.uc(25,23,"group.members.pageinfo",i.Ac(27,hb),i.Dc(28,lb,t.totalMembersCount,t.pageIndex+1,t.totalPages))),i.Kb(2),i.xc("disabled",t.pageIndex+1===t.totalPages)}}let _b=(()=>{class t{constructor(t,e){this._ngZone=t,this._groupService=e,this._groupService.groupMembersComponent=this,this.clear()}clear(){this._ngZone.run(()=>{this._groupId=0,this._groupName=null,this._groupBadgeCode=null,this._totalMembersCount=0,this._result=[],this._admin=!1,this._pageSize=1,this._pageIndex=0,this.level="0",this.query=null})}getMembers(){this._groupService.getMembers(this._groupId,this._pageIndex,this.query,parseInt(this.level))}searchMembers(){this._ngZone.run(()=>{this._pageSize=1,this._pageIndex=0,this._totalMembersCount=0}),this.getMembers()}nextPage(){this._pageIndex+1!==this.totalPages&&(this._pageIndex++,this.getMembers())}previousPage(){0!==this._pageIndex&&(this._pageIndex--,this.getMembers())}giveAdmin(t){this._groupId&&this._admin&&(this._groupService.giveAdmin(this._groupId,t),this.getMembers())}takeAdmin(t){this._groupId&&this._admin&&(this._groupService.takeAdmin(this._groupId,t),this.getMembers())}acceptMembership(t){this._groupId&&this._admin&&(this._groupService.acceptMembership(this._groupId,t),this.getMembers())}removeOrDeclineMember(t,e){this._groupId&&this._admin&&(3===e?this._groupService.declineMembership(this._groupId,t):(this._groupService.removeMember(this._groupId,t),this.getMembers()))}confirmRemove(t,e){const s=_.a.instance.localization.getValue("group.kickconfirm.title");let i=null;return i=e?_.a.instance.localization.getValueWithParameters("group.kickconfirm.desc",["user","amount"],["<b>"+t+"</b>","<b>"+e+"</b>"]):_.a.instance.localization.getValueWithParameter("group.kickconfirm_nofurni.desc","user","<b>"+t+"</b>"),[s,i,[new wl("group.kickconfirm.title",()=>{_.a.instance.communication.connection.send(new Wv.a(this.groupId,t)),this.getMembers()},["btn-danger"]),new wl("generic.close",()=>{},["btn-primary"])]]}openProfile(t){this._groupService.openProfile(t)}getRankIcon(t){return 0===t?"grupown":"grupstar"}get visible(){return this._groupId>0}get groupId(){return this._groupId}set groupId(t){this._groupId=t}get groupName(){return this._groupName}set groupName(t){this._groupName=t}get groupBadgeCode(){return this._groupBadgeCode}set groupBadgeCode(t){this._groupBadgeCode=t}get totalMembersCount(){return this._totalMembersCount}set totalMembersCount(t){this._totalMembersCount=t}get result(){return this._result}set result(t){this._result=t}get admin(){return this._admin}set admin(t){this._admin=t}get pageSize(){return this._pageSize}set pageSize(t){this._pageSize=t}get pageIndex(){return this._pageIndex}set pageIndex(t){this._pageIndex=t}get totalPages(){return Math.ceil(this._totalMembersCount/this._pageSize)}get myId(){return _.a.instance.sessionDataManager.userId}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.H),i.Yb(Bu))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-group-members-component"]],decls:1,vars:1,consts:[["class","grup-kullanicilari","dragHandle",".roomgroup-members",3,"bringToTop","draggable",4,"ngIf"],["dragHandle",".roomgroup-members",1,"grup-kullanicilari",3,"bringToTop","draggable"],[1,"roomgroup-members"],[1,"up-baslik"],[1,"old-kapat",3,"click"],[1,"group-members-header"],[1,"groupmembers-badge"],[3,"badge","isGroup"],[1,"groupmembers-searchuser",3,"placeholder","ngModel","ngModelChange","keyup.enter"],[1,"groupmembers-userselect",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","2",4,"ngIf"],[1,"group-members-list"],["class","groupmembers-userbox",4,"ngFor","ngForOf"],[1,"groupmembers-buttonbox"],[1,"sayfageri",3,"disabled","click"],[1,"grupmembers-sayfatxt"],[1,"sayfaileri",3,"disabled","click"],["value","2"],[1,"groupmembers-userbox"],["class","kullanicikaldir",3,"click",4,"ngIf"],[1,"groupmembers-ico"],[1,"groupmembers-username",3,"click"],["class","kullanicidurum-ico",3,"ngClass",4,"ngIf"],["class","groupmembers-adminver",4,"ngIf"],[4,"ngIf"],[1,"kullanicikaldir",3,"click"],[1,"kullanicidurum-ico",3,"ngClass"],[1,"groupmembers-adminver"],["class","groupmembers-adminver",3,"click",4,"ngIf"],[1,"groupmembers-adminver",3,"click"]],template:function(t,e){1&t&&i.Tc(0,ub,27,32,"div",0),2&t&&i.xc("ngIf",e.visible)},directives:[p.n,Tr,Lr,Gc,rr.b,rr.l,rr.n,rr.t,rr.o,rr.v,p.m,p.l],pipes:[ln],encapsulation:2}),t})();function db(t,e){if(1&t){const t=i.ec();i.dc(0,"nitro-group-manager-tab-info-component",15),i.nc("groupSettingsChange",function(e){return i.Kc(t),i.qc(2).groupSettings=e}),i.cc()}if(2&t){const t=i.qc(2);i.xc("groupSettings",t.groupSettings)("showNameError",t.showNameError)("showDescriptionError",t.showDescriptionError)}}function gb(t,e){if(1&t){const t=i.ec();i.dc(0,"nitro-group-creator-tab-badge-component",16),i.nc("groupSettingsChange",function(e){return i.Kc(t),i.qc(2).groupSettings=e}),i.cc()}if(2&t){const t=i.qc(2);i.xc("groupSettings",t.groupSettings)("setDefaultValues",!1)}}function mb(t,e){if(1&t){const t=i.ec();i.dc(0,"nitro-group-creator-tab-colors-component",16),i.nc("groupSettingsChange",function(e){return i.Kc(t),i.qc(2).groupSettings=e}),i.cc()}if(2&t){const t=i.qc(2);i.xc("groupSettings",t.groupSettings)("setDefaultValues",!1)}}function pb(t,e){if(1&t){const t=i.ec();i.dc(0,"nitro-group-manager-tab-preferences-component",17),i.nc("groupSettingsChange",function(e){return i.Kc(t),i.qc(2).groupSettings=e}),i.cc()}if(2&t){const t=i.qc(2);i.xc("groupSettings",t.groupSettings)}}const fb=function(t){return{"groupeditbutton-boxactive":t}};function Eb(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"p",3),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",4),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.cc(),i.cc(),i.dc(6,"div",5),i.dc(7,"div",6),i.dc(8,"button",7),i.nc("click",function(){return i.Kc(t),i.qc().setTab(1)}),i.dc(9,"p",8),i.Vc(10),i.rc(11,"translate"),i.cc(),i.cc(),i.dc(12,"button",7),i.nc("click",function(){return i.Kc(t),i.qc().setTab(2)}),i.dc(13,"p",8),i.Vc(14),i.rc(15,"translate"),i.cc(),i.cc(),i.dc(16,"button",7),i.nc("click",function(){return i.Kc(t),i.qc().setTab(3)}),i.dc(17,"p",8),i.Vc(18),i.rc(19,"translate"),i.cc(),i.cc(),i.dc(20,"button",7),i.nc("click",function(){return i.Kc(t),i.qc().setTab(4)}),i.dc(21,"p",8),i.Vc(22),i.rc(23,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.Tc(24,db,1,3,"nitro-group-manager-tab-info-component",9),i.Tc(25,gb,1,2,"nitro-group-creator-tab-badge-component",10),i.Tc(26,mb,1,2,"nitro-group-creator-tab-colors-component",10),i.Tc(27,pb,1,1,"nitro-group-manager-tab-preferences-component",11),i.dc(28,"div",12),i.dc(29,"button",13),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.Vc(30),i.rc(31,"translate"),i.cc(),i.dc(32,"button",14),i.nc("click",function(){return i.Kc(t),i.qc().save()}),i.Vc(33),i.rc(34,"translate"),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.sc(4,15,"group.window.title")),i.Kb(5),i.xc("ngClass",i.Bc(29,fb,1===t.currentTab)),i.Kb(2),i.Wc(i.sc(11,17,"group.edit.tab.1")),i.Kb(2),i.xc("ngClass",i.Bc(31,fb,2===t.currentTab)),i.Kb(2),i.Wc(i.sc(15,19,"group.edit.tab.2")),i.Kb(2),i.xc("ngClass",i.Bc(33,fb,3===t.currentTab)),i.Kb(2),i.Wc(i.sc(19,21,"group.edit.tab.3")),i.Kb(2),i.xc("ngClass",i.Bc(35,fb,4===t.currentTab)),i.Kb(2),i.Wc(i.sc(23,23,"group.edit.tab.5")),i.Kb(2),i.xc("ngIf",1===t.currentTab),i.Kb(1),i.xc("ngIf",2===t.currentTab),i.Kb(1),i.xc("ngIf",3===t.currentTab),i.Kb(1),i.xc("ngIf",4===t.currentTab),i.Kb(3),i.Wc(i.sc(31,25,"generic.cancel")),i.Kb(3),i.Wc(i.sc(34,27,"save"))}}let Sb=(()=>{class t{constructor(t,e,s){this._groupService=t,this._notificationService=e,this._ngZone=s,this._groupService.groupManagerComponent=this,this._clear()}_clear(){this.groupSettings=new Au,this.visible=!1,this._currentTab=1,this._showNameError=!1,this._showDescriptionError=!1}ngOnInit(){this._clear()}ngOnDestroy(){this._clear()}load(t){this._clear(),this._ngZone.run(()=>{this.groupSettings.id=t.id,this.groupSettings.name=t.title,this.groupSettings.description=t.description,this.groupSettings.roomId=t.roomId.toString(),this.groupSettings.badgeParts=t.badgeParts,this.groupSettings.colorA=t.colorA,this.groupSettings.colorB=t.colorB,this.groupSettings.state=t.state,this.groupSettings.canMembersDecorate=t.canMembersDecorate,this.visible=!0})}setTab(t){this._currentTab=t}hide(){this.visible=!1}save(){this._showNameError=0===this.groupSettings.name.length||this.groupSettings.name.length>29,this._showDescriptionError=this.groupSettings.description.length>254,this._showNameError||this._showDescriptionError?this._currentTab=1:this._groupService.save(this.groupSettings)}delete(){const t=_.a.instance.localization.getValue("group.deleteconfirm.title"),e=_.a.instance.localization.getValue("group.deleteconfirm.desc"),s=[new wl("group.delete",()=>{this._groupService.deleteGroup(this.groupSettings.id),this.hide(),this._groupService.groupInfoComponent.clear()},["btn-danger"]),new wl("generic.close",()=>{},["btn-primary"])];this._notificationService.alertWithChoices(e,s,t)}get currentTab(){return this._currentTab}get showNameError(){return this._showNameError}get showDescriptionError(){return this._showDescriptionError}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Bu),i.Yb(ss),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-group-manager-component"]],decls:1,vars:1,consts:[["class","groupcreate","dragHandle",".test",3,"draggable","bringToTop",4,"ngIf"],["dragHandle",".test",1,"groupcreate",3,"draggable","bringToTop"],["id","groupcreate-head",1,"test"],[1,"gc-hood"],[1,"old-kapat",3,"click"],[1,"groupcreate-headbox"],[1,"groupeditbutton-box"],[1,"groupedit-button",3,"ngClass","click"],[1,"gebuttontxt"],[3,"groupSettings","showNameError","showDescriptionError","groupSettingsChange",4,"ngIf"],[3,"groupSettings","setDefaultValues","groupSettingsChange",4,"ngIf"],[3,"groupSettings","groupSettingsChange",4,"ngIf"],[1,"groupcreate-buttonbox"],[1,"groupcreate-iptal",3,"click"],[1,"groupcreate-gobutton",3,"click"],[3,"groupSettings","showNameError","showDescriptionError","groupSettingsChange"],[3,"groupSettings","setDefaultValues","groupSettingsChange"],[3,"groupSettings","groupSettingsChange"]],template:function(t,e){1&t&&i.Tc(0,Eb,35,37,"div",0),2&t&&i.xc("ngIf",e.visible)},encapsulation:2}),t})(),vb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-group-main-component"]],decls:3,vars:0,template:function(t,e){1&t&&(i.Zb(0,"nitro-group-info-component"),i.Zb(1,"nitro-group-members-component"),i.Zb(2,"nitro-group-manager-component"))},directives:[$v,_b,Sb],encapsulation:2}),t})();var bb=s("owLk"),Ib=s("Y1Bc");let Rb=(()=>{class t{constructor(t,e){this._notificationService=t,this._ngZone=e,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._messages&&this.unregisterMessages(),this._messages=[new bb.a(this.onUserInfoEvent.bind(this))];for(const t of this._messages)_.a.instance.communication.registerMessageEvent(t)}unregisterMessages(){if(this._messages&&this._messages.length)for(const t of this._messages)_.a.instance.communication.removeMessageEvent(t)}load(t){_.a.instance.communication.connection.send(new Ib.a(t))}onUserInfoEvent(t){if(!t)return;const e=t.getParser();e&&e.data&&this._ngZone.run(()=>this._currentUserInfo=e.data)}get currentUserInfo(){return this._currentUserInfo}}return t.\u0275fac=function(e){return new(e||t)(i.kc(ss),i.kc(i.H))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})();function Tb(t,e){if(1&t&&(i.dc(0,"span",17),i.Vc(1),i.cc()),2&t){const t=i.qc(2);i.Kb(1),i.Wc(t.selectedUser.username)}}function Ob(t,e){if(1&t){const t=i.ec();i.dc(0,"div",4),i.dc(1,"div",5),i.dc(2,"p",6),i.Vc(3,"Mod Tools"),i.cc(),i.Zb(4,"div",7),i.cc(),i.dc(5,"div",8),i.dc(6,"button",9),i.nc("click",function(){return i.Kc(t),i.qc().openRoomTool()}),i.Zb(7,"div",10),i.dc(8,"p",11),i.Vc(9,"Room tool for this room"),i.cc(),i.cc(),i.dc(10,"button",9),i.nc("click",function(){return i.Kc(t),i.qc().openChatlogTool()}),i.Zb(11,"div",12),i.dc(12,"p",11),i.Vc(13,"Chatlog for this room"),i.cc(),i.cc(),i.dc(14,"button",9),i.nc("click",function(){return i.Kc(t),i.qc().selectUser()}),i.Zb(15,"div",13),i.dc(16,"p",11),i.Vc(17,"User info: "),i.Tc(18,Tb,2,1,"span",14),i.cc(),i.cc(),i.dc(19,"button",15),i.nc("click",function(){return i.Kc(t),i.qc().toggleReportsTool()}),i.Zb(20,"div",16),i.dc(21,"p",11),i.Vc(22,"Ticket browser"),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.xc("topCenter",!1),i.Kb(6),i.xc("disabled",!t.hasRoomInfo()),i.Kb(4),i.xc("disabled",!t.hasRoomInfo()),i.Kb(4),i.xc("disabled",!t.selectedUser),i.Kb(4),i.xc("ngIf",t.selectedUser)}}function yb(t,e){1&t&&i.Zb(0,"nitro-mod-tool-room-component")}function Cb(t,e){1&t&&i.Zb(0,"nitro-mod-tool-room-chatlogs-component")}function Ab(t,e){if(1&t&&i.Zb(0,"nitro-mod-tool-user-component",18),2&t){const t=i.qc();i.xc("user",t.clickedUser)}}function Mb(t,e){if(1&t&&i.Zb(0,"nitro-mod-tool-mod-action-user-component",18),2&t){const t=i.qc();i.xc("user",t.clickedUser)}}function wb(t,e){if(1&t&&i.Zb(0,"nitro-mod-tool-user-visited-rooms-component",18),2&t){const t=i.qc();i.xc("user",t.clickedUser)}}function Db(t,e){if(1&t&&i.Zb(0,"nitro-mod-tool-user-send-message-component",18),2&t){const t=i.qc();i.xc("user",t.clickedUser)}}function Nb(t,e){if(1&t&&i.Zb(0,"nitro-mod-tool-user-chatlogs-component",18),2&t){const t=i.qc();i.xc("user",t.clickedUser)}}let Ub=(()=>{class t{constructor(t,e,s,i){this._settingsService=t,this._modToolService=e,this._modToolsUserService=s,this._ngZone=i,this.visible=!1,this.roomToolVisible=!1,this.chatlogToolVisible=!1,this.userToolVisible=!1,this.reportsToolVisible=!1,this.clickedUser=null}ngOnInit(){this._modToolService.component=this}ngOnDestroy(){this._modToolService.component=null}toggleRoomTool(){this.roomToolVisible=!this.roomToolVisible}openRoomTool(){this._modToolService.openRoomTool()}openChatlogTool(){this._modToolService.openChatlogTool()}selectUser(){this.clickedUser=this.selectedUser,this._modToolsUserService.load(this.selectedUser.id),this.userToolVisible=!0}toggleReportsTool(){this.reportsToolVisible=!this.reportsToolVisible}hasRoomInfo(){return!!this._modToolService.currentRoom}get users(){return this._modToolService.users}get selectedUser(){return this._modToolService.selectedUser}get showModActionOnUser(){return this._modToolService.showModActionOnUser}get showVisitedRoomsForUser(){return this._modToolService.showVisitedRoomsForUser}get showSendUserMessage(){return this._modToolService.showSendUserMessage}get showSendUserChatlogs(){return this._modToolService.showSendUserChatlogs}get showRoomChatlogs(){return this._modToolService.showRoomChatLogs}get showRoomTool(){return this._modToolService.showRoomTools}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(m),i.Yb(ii),i.Yb(Rb),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-mod-tool-main-component"]],inputs:{visible:"visible"},decls:9,vars:9,consts:[["id","modtools",3,"bringToTop","draggable","topCenter",4,"ngIf"],[4,"ngIf"],[3,"user",4,"ngIf"],[3,"visible","visibleChange"],["id","modtools",3,"bringToTop","draggable","topCenter"],["id","modtoolsdrag",1,"drag-handler"],[1,"mt-baslik"],[1,"old-kapat"],[1,"modtools-body"],[1,"mt-menu",3,"disabled","click"],[1,"mtico",2,"background-image","url(/assets/images/modtools/room.png)"],[1,"mt-menutxt"],[1,"mtico",2,"background-image","url(/assets/images/modtools/chat.png)"],[1,"mtico",2,"background-image","url(/assets/images/modtools/user.png)"],["class","username",4,"ngIf"],[1,"mt-menu",3,"click"],[1,"mtico",2,"background-image","url(/assets/images/modtools/ticket.png)"],[1,"username"],[3,"user"]],template:function(t,e){1&t&&(i.Tc(0,Ob,23,5,"div",0),i.Tc(1,yb,1,0,"nitro-mod-tool-room-component",1),i.Tc(2,Cb,1,0,"nitro-mod-tool-room-chatlogs-component",1),i.Tc(3,Ab,1,1,"nitro-mod-tool-user-component",2),i.dc(4,"nitro-mod-tool-reports-component",3),i.nc("visibleChange",function(t){return e.reportsToolVisible=t}),i.cc(),i.Tc(5,Mb,1,1,"nitro-mod-tool-mod-action-user-component",2),i.Tc(6,wb,1,1,"nitro-mod-tool-user-visited-rooms-component",2),i.Tc(7,Db,1,1,"nitro-mod-tool-user-send-message-component",2),i.Tc(8,Nb,1,1,"nitro-mod-tool-user-chatlogs-component",2)),2&t&&(i.xc("ngIf",e.visible),i.Kb(1),i.xc("ngIf",e.showRoomTool),i.Kb(1),i.xc("ngIf",e.showRoomChatlogs),i.Kb(1),i.xc("ngIf",e.userToolVisible),i.Kb(1),i.xc("visible",e.reportsToolVisible),i.Kb(1),i.xc("ngIf",e.showModActionOnUser),i.Kb(1),i.xc("ngIf",e.showVisitedRoomsForUser),i.Kb(1),i.xc("ngIf",e.showSendUserMessage),i.Kb(1),i.xc("ngIf",e.showSendUserChatlogs))},encapsulation:2}),t})(),xb=(()=>{class t{constructor(t){this.sessionService=t,this._background=_.a.instance.core.configuration.interpolate(_.a.instance.getConfiguration("hotelview.images").background),this._backgroundColour=_.a.instance.getConfiguration("hotelview.images")["background.colour"],this._sun=_.a.instance.core.configuration.interpolate(_.a.instance.getConfiguration("hotelview.images").sun),this._drape=_.a.instance.core.configuration.interpolate(_.a.instance.getConfiguration("hotelview.images").drape),this._left=_.a.instance.core.configuration.interpolate(_.a.instance.getConfiguration("hotelview.images").left),this._right=_.a.instance.core.configuration.interpolate(_.a.instance.getConfiguration("hotelview.images").right),this._rightRepeat=_.a.instance.core.configuration.interpolate(_.a.instance.getConfiguration("hotelview.images")["right.repeat"])}get figure(){return this.sessionService.figure}get background(){return this._background||null}get backgroundColour(){return this._backgroundColour||null}get sun(){return this._sun||null}get drape(){return this._drape||null}get left(){return this._left||null}get right(){return this._right||null}get rightRepeat(){return this._rightRepeat||null}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Vi))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-hotelview-component"]],decls:29,vars:3,consts:[[1,"hotel-bosluk",2,"background-image","url(/assets/images/hotelview/background_gradient_habbohistory.png)"],[1,"habbo-drape"],["image-placeholder","",3,"src"],[1,"hotel-view-haber-box"],[1,"view-haber"],[1,"hv-haber-gorsel"],["src","./assets/images/reception/spromo1.png"],[1,"hv-haber-baslik"],[1,"hv-haber-aciklama"],["href","https://aerohabbo.es/tutorial.html","target","_blank"],[1,"view-buton"],[1,"vb-text"],[1,"hw-haber-ex2"],["href","https://your_link","target","_blank"],[1,"bosluk-sol"],["nitro-avatar-image","",1,"hotelview_habbo-avatar",3,"figure","direction"],["src","/assets/images/hotelview/reception_backdrop_left_rev.png"],[1,"bosluk-sag",2,"background-image","url(/assets/images/hotelview/habbo15_background_right.png)"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Zb(2,"img",2),i.cc(),i.dc(3,"div",3),i.dc(4,"div",4),i.dc(5,"div",5),i.Zb(6,"img",6),i.cc(),i.dc(7,"div",7),i.Vc(8,"Tutorial: \xbfNo sabes jugar?"),i.cc(),i.dc(9,"div",8),i.Vc(10," Si no sabes jugar sigue todos los pasos aqu\xed y aprende todo lo que debes saber. "),i.cc(),i.dc(11,"a",9),i.dc(12,"div",10),i.dc(13,"p",11),i.Vc(14,"Aprender a Jugar"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(15,"div",12),i.dc(16,"div",4),i.dc(17,"div",7),i.Vc(18,"\xdanete a nuestro Discord"),i.cc(),i.dc(19,"div",8),i.Vc(20," Mantente informado de todo lo que pasa en AeroHabbo. "),i.cc(),i.dc(21,"a",13),i.dc(22,"div",10),i.dc(23,"p",11),i.Vc(24,"Unirme Ahora"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(25,"div",14),i.Zb(26,"div",15),i.Zb(27,"img",16),i.cc(),i.Zb(28,"div",17),i.cc()),2&t&&(i.Kb(2),i.xc("src",e.drape,i.Mc),i.Kb(24),i.xc("figure",e.figure)("direction",2))},directives:[ha,_a],encapsulation:2}),t})();function Lb(t,e){1&t&&i.Zb(0,"nitro-hotelview-component")}let Pb=(()=>{class t{constructor(t,e,s){this._notificationService=t,this._settingsService=e,this._ngZone=s,this.roomComponent=null,this._landingViewVisible=!0,this.onRoomEngineEvent=this.onRoomEngineEvent.bind(this),this.onInterstitialEvent=this.onInterstitialEvent.bind(this),this.onRoomEngineObjectEvent=this.onRoomEngineObjectEvent.bind(this),this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.onRoomErrorEvent=this.onRoomErrorEvent.bind(this),_.a.instance.addLinkEventTracker(this)}ngOnInit(){this._ngZone.runOutsideAngular(()=>{_.a.instance.roomEngine.events&&(_.a.instance.roomEngine.events.addEventListener(d.a.INITIALIZED,this.onRoomEngineEvent),_.a.instance.roomEngine.events.addEventListener(d.a.DISPOSED,this.onRoomEngineEvent),_.a.instance.roomEngine.events.addEventListener(d.a.ENGINE_INITIALIZED,this.onInterstitialEvent),_.a.instance.roomEngine.events.addEventListener(d.a.OBJECTS_INITIALIZED,this.onInterstitialEvent),_.a.instance.roomEngine.events.addEventListener(d.a.NORMAL_MODE,this.onInterstitialEvent),_.a.instance.roomEngine.events.addEventListener(d.a.GAME_MODE,this.onInterstitialEvent),_.a.instance.roomEngine.events.addEventListener(T.ROOM_ZOOM,this.onRoomEngineEvent),_.a.instance.roomEngine.events.addEventListener(I.a.ROOM_BACKGROUND_COLOR,this.onRoomEngineEvent),_.a.instance.roomEngine.events.addEventListener(E.a.ROOM_COLOR,this.onRoomEngineEvent),_.a.instance.roomEngine.events.addEventListener(S.a.ROOM_COLOR,this.onRoomEngineEvent),_.a.instance.roomEngine.events.addEventListener(v.a.SELECTED,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.addEventListener(v.a.DESELECTED,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.addEventListener(v.a.ADDED,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.addEventListener(v.a.REMOVED,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.addEventListener(v.a.PLACED,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.addEventListener(v.a.REQUEST_MOVE,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.addEventListener(v.a.REQUEST_ROTATE,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.addEventListener(v.a.MOUSE_ENTER,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.addEventListener(v.a.MOUSE_LEAVE,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.addEventListener(b.a.OPEN_WIDGET,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.addEventListener(b.a.CLOSE_WIDGET,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.addEventListener(b.a.REQUEST_INTERNAL_LINK,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.addEventListener(b.a.REQUEST_ROOM_LINK,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.addEventListener(b.a.REQUEST_TROPHY,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.addEventListener(b.a.REQUEST_CREDITFURNI,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.addEventListener(R.a.OPEN_FURNI_CONTEXT_MENU,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.addEventListener(b.a.REQUEST_STICKIE,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.addEventListener(b.a.REQUEST_DIMMER,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.addEventListener(b.a.REQUEST_BACKGROUND_COLOR,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.addEventListener(b.a.REQUEST_FRIEND_FURNITURE_ENGRAVING,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.addEventListener(b.a.REQUEST_MANNEQUIN,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.addEventListener(b.a.REQUEST_PRESENT,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.addEventListener(b.a.REQUEST_HIGH_SCORE_DISPLAY,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.addEventListener(b.a.REQUEST_HIDE_HIGH_SCORE_DISPLAY,this.onRoomEngineObjectEvent)),_.a.instance.roomSessionManager.events&&(_.a.instance.roomSessionManager.events.addEventListener(w.a.CREATED,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.addEventListener(w.a.STARTED,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.addEventListener(w.a.ROOM_DATA,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.addEventListener(w.a.ENDED,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.addEventListener(O.a.CHAT_EVENT,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.addEventListener(O.a.FLOOD_EVENT,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.addEventListener(y.a.RSDE_DANCE,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.addEventListener(U.a.RSUBE_BADGES,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.addEventListener(A.a.DOORBELL,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.addEventListener(A.a.RSDE_REJECTED,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.addEventListener(A.a.RSDE_ACCEPTED,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.addEventListener(C.a.RSDPE_PRESETS,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.addEventListener(D.a.RSFRE_FRIEND_REQUEST,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.addEventListener(N.a.RSPE_PRESENT_OPENED,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.addEventListener(M.a.RSEME_KICKED,this.onRoomErrorEvent),_.a.instance.roomSessionManager.events.addEventListener(M.a.RSEME_PETS_FORBIDDEN_IN_HOTEL,this.onRoomErrorEvent),_.a.instance.roomSessionManager.events.addEventListener(M.a.RSEME_PETS_FORBIDDEN_IN_FLAT,this.onRoomErrorEvent),_.a.instance.roomSessionManager.events.addEventListener(M.a.RSEME_MAX_PETS,this.onRoomErrorEvent),_.a.instance.roomSessionManager.events.addEventListener(M.a.RSEME_MAX_NUMBER_OF_OWN_PETS,this.onRoomErrorEvent),_.a.instance.roomSessionManager.events.addEventListener(M.a.RSEME_NO_FREE_TILES_FOR_PET,this.onRoomErrorEvent),_.a.instance.roomSessionManager.events.addEventListener(M.a.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET,this.onRoomErrorEvent),_.a.instance.roomSessionManager.events.addEventListener(M.a.RSEME_BOTS_FORBIDDEN_IN_HOTEL,this.onRoomErrorEvent),_.a.instance.roomSessionManager.events.addEventListener(M.a.RSEME_BOTS_FORBIDDEN_IN_FLAT,this.onRoomErrorEvent),_.a.instance.roomSessionManager.events.addEventListener(M.a.RSEME_BOT_LIMIT_REACHED,this.onRoomErrorEvent),_.a.instance.roomSessionManager.events.addEventListener(M.a.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT,this.onRoomErrorEvent),_.a.instance.roomSessionManager.events.addEventListener(M.a.RSEME_BOT_NAME_NOT_ACCEPTED,this.onRoomErrorEvent))})}ngOnDestroy(){this._ngZone.runOutsideAngular(()=>{_.a.instance.roomEngine.events&&(_.a.instance.roomEngine.events.removeEventListener(d.a.INITIALIZED,this.onRoomEngineEvent),_.a.instance.roomEngine.events.removeEventListener(d.a.DISPOSED,this.onRoomEngineEvent),_.a.instance.roomEngine.events.removeEventListener(d.a.ENGINE_INITIALIZED,this.onInterstitialEvent),_.a.instance.roomEngine.events.removeEventListener(d.a.OBJECTS_INITIALIZED,this.onInterstitialEvent),_.a.instance.roomEngine.events.removeEventListener(d.a.NORMAL_MODE,this.onInterstitialEvent),_.a.instance.roomEngine.events.removeEventListener(d.a.GAME_MODE,this.onInterstitialEvent),_.a.instance.roomEngine.events.removeEventListener(T.ROOM_ZOOM,this.onRoomEngineEvent),_.a.instance.roomEngine.events.removeEventListener(I.a.ROOM_BACKGROUND_COLOR,this.onRoomEngineEvent),_.a.instance.roomEngine.events.removeEventListener(E.a.ROOM_COLOR,this.onRoomEngineEvent),_.a.instance.roomEngine.events.removeEventListener(S.a.ROOM_COLOR,this.onRoomEngineEvent),_.a.instance.roomEngine.events.removeEventListener(v.a.SELECTED,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.removeEventListener(v.a.DESELECTED,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.removeEventListener(v.a.ADDED,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.removeEventListener(v.a.REMOVED,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.removeEventListener(v.a.PLACED,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.removeEventListener(v.a.REQUEST_MOVE,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.removeEventListener(v.a.REQUEST_ROTATE,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.removeEventListener(v.a.MOUSE_ENTER,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.removeEventListener(v.a.MOUSE_LEAVE,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.removeEventListener(b.a.OPEN_WIDGET,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.removeEventListener(b.a.CLOSE_WIDGET,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.removeEventListener(b.a.REQUEST_INTERNAL_LINK,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.removeEventListener(b.a.REQUEST_ROOM_LINK,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.removeEventListener(b.a.REQUEST_TROPHY,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.removeEventListener(b.a.REQUEST_CREDITFURNI,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.removeEventListener(R.a.OPEN_FURNI_CONTEXT_MENU,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.removeEventListener(b.a.REQUEST_STICKIE,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.removeEventListener(b.a.REQUEST_DIMMER,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.removeEventListener(b.a.REQUEST_BACKGROUND_COLOR,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.removeEventListener(b.a.REQUEST_FRIEND_FURNITURE_ENGRAVING,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.removeEventListener(b.a.REQUEST_PRESENT,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.removeEventListener(b.a.REQUEST_HIGH_SCORE_DISPLAY,this.onRoomEngineObjectEvent),_.a.instance.roomEngine.events.removeEventListener(b.a.REQUEST_HIDE_HIGH_SCORE_DISPLAY,this.onRoomEngineObjectEvent)),_.a.instance.roomSessionManager.events&&(_.a.instance.roomSessionManager.events.removeEventListener(w.a.CREATED,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.removeEventListener(w.a.STARTED,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.removeEventListener(w.a.ROOM_DATA,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.removeEventListener(w.a.ENDED,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.removeEventListener(O.a.CHAT_EVENT,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.removeEventListener(y.a.RSDE_DANCE,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.removeEventListener(U.a.RSUBE_BADGES,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.removeEventListener(A.a.DOORBELL,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.removeEventListener(A.a.RSDE_REJECTED,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.removeEventListener(A.a.RSDE_ACCEPTED,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.removeEventListener(C.a.RSDPE_PRESETS,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.removeEventListener(D.a.RSFRE_FRIEND_REQUEST,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.removeEventListener(N.a.RSPE_PRESENT_OPENED,this.onRoomSessionEvent),_.a.instance.roomSessionManager.events.removeEventListener(M.a.RSEME_KICKED,this.onRoomErrorEvent),_.a.instance.roomSessionManager.events.removeEventListener(M.a.RSEME_PETS_FORBIDDEN_IN_HOTEL,this.onRoomErrorEvent),_.a.instance.roomSessionManager.events.removeEventListener(M.a.RSEME_PETS_FORBIDDEN_IN_FLAT,this.onRoomErrorEvent),_.a.instance.roomSessionManager.events.removeEventListener(M.a.RSEME_MAX_PETS,this.onRoomErrorEvent),_.a.instance.roomSessionManager.events.removeEventListener(M.a.RSEME_MAX_NUMBER_OF_OWN_PETS,this.onRoomErrorEvent),_.a.instance.roomSessionManager.events.removeEventListener(M.a.RSEME_NO_FREE_TILES_FOR_PET,this.onRoomErrorEvent),_.a.instance.roomSessionManager.events.removeEventListener(M.a.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET,this.onRoomErrorEvent),_.a.instance.roomSessionManager.events.removeEventListener(M.a.RSEME_BOTS_FORBIDDEN_IN_HOTEL,this.onRoomErrorEvent),_.a.instance.roomSessionManager.events.removeEventListener(M.a.RSEME_BOTS_FORBIDDEN_IN_FLAT,this.onRoomErrorEvent),_.a.instance.roomSessionManager.events.removeEventListener(M.a.RSEME_BOT_LIMIT_REACHED,this.onRoomErrorEvent),_.a.instance.roomSessionManager.events.removeEventListener(M.a.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT,this.onRoomErrorEvent),_.a.instance.roomSessionManager.events.removeEventListener(M.a.RSEME_BOT_NAME_NOT_ACCEPTED,this.onRoomErrorEvent))}),_.a.instance.removeLinkEventTracker(this)}ngAfterContentInit(){_.a.instance.communication.connection.onReady()}onRoomEngineEvent(t){if(!t)return;if(P.isRoomPreviewerId(t.roomId))return;const e=_.a.instance.roomSessionManager.getSession(t.roomId);if(e)switch(t.type){case d.a.INITIALIZED:return void(this.roomComponent&&(this.roomComponent.prepareRoom(e),_.a.instance.roomEngine.setActiveRoomId(t.roomId),this.roomComponent.createWidget(x.a.CHAT_WIDGET,vl),this.roomComponent.createWidget(x.a.INFOSTAND,wh),this.roomComponent.createWidget(x.a.LOCATION_WIDGET,null),this.roomComponent.createWidget(x.a.INTERNAL_LINK,null),this.roomComponent.createWidget(x.a.ROOM_LINK,null),this.roomComponent.createWidget(x.a.CUSTOM_STACK_HEIGHT,Ca),this.roomComponent.createWidget(x.a.ROOM_DIMMER,La),this.roomComponent.createWidget(x.a.FURNI_STICKIE_WIDGET,xc),this.roomComponent.createWidget(x.a.DOORBELL,Uh),this.roomComponent.createWidget(x.a.FURNI_TROPHY_WIDGET,Pc),this.roomComponent.createWidget(x.a.FURNI_CREDIT_WIDGET,Ra),this.roomComponent.createWidget(x.a.FURNITURE_CONTEXT_MENU,ba),this.roomComponent.createWidget(x.a.ROOM_BACKGROUND_COLOR,ra),this.roomComponent.createWidget(x.a.FRIEND_FURNI_CONFIRM,Fa),this.roomComponent.createWidget(x.a.FRIEND_FURNI_ENGRAVING,Wa),this.roomComponent.createWidget(x.a.ROOM_TOOLS,Tl),this.roomComponent.createWidget(x.a.MANNEQUIN,Ac),this.roomComponent.createWidget(x.a.FURNI_PRESENT_WIDGET,cc),this.roomComponent.createWidget(x.a.FRIEND_REQUEST,$r),this.roomComponent.createWidget(x.a.HIGH_SCORE_DISPLAY,pc),this.roomComponent.roomSession.isSpectator||(this.roomComponent.createWidget(x.a.CHAT_INPUT_WIDGET,wr),this.roomComponent.createWidget(x.a.AVATAR_INFO,Rr),this.roomComponent.createWidget(x.a.FURNI_CHOOSER,Hr),this.roomComponent.createWidget(x.a.USER_CHOOSER,qr))));case d.a.DISPOSED:return void(this.roomComponent&&this.roomComponent.endRoom());case T.ROOM_ZOOM:{const e=t;let s=e.level<1?.5:1<<Math.floor(e.level)-1;return(e.forceFlip||e.asDelta)&&(s=e.level),void(this.roomComponent&&_.a.instance.roomEngine.setRoomInstanceRenderingCanvasScale(this.roomComponent.roomSession.roomId,this.roomComponent.getFirstCanvasId(),s,null,null,!1,e.asDelta))}case E.a.ROOM_COLOR:if(this.roomComponent){const e=t;e._Str_11464?this.roomComponent.setRoomColorizerColor(16711680,255):this.roomComponent.setRoomColorizerColor(e.color,e._Str_5123)}return;case S.a.ROOM_COLOR:return void(this.roomComponent&&this.roomComponent._Str_2485(t));case I.a.ROOM_BACKGROUND_COLOR:if(this.roomComponent){const e=t;e.enable?this.roomComponent.setRoomBackgroundColor(e.hue,e.saturation,e.lightness):this.roomComponent.setRoomBackgroundColor(0,0,0)}return}}onInterstitialEvent(t){t&&(t.type!==d.a.GAME_MODE&&t.type!==d.a.NORMAL_MODE||this.roomComponent&&this.roomComponent.onRoomEngineEvent(t))}onRoomEngineObjectEvent(t){this.roomComponent&&this.roomComponent.onRoomEngineObjectEvent(t)}onRoomErrorEvent(t){if(!t)return;let e,s="${error.title}";switch(t.type){case M.a.RSEME_MAX_PETS:e="${room.error.max_pets}";break;case M.a.RSEME_MAX_NUMBER_OF_OWN_PETS:e="${room.error.max_own_pets}";break;case M.a.RSEME_KICKED:e="${room.error.kicked}",s="${generic.alert.title}";break;case M.a.RSEME_PETS_FORBIDDEN_IN_HOTEL:e="${room.error.pets.forbidden_in_hotel}";break;case M.a.RSEME_PETS_FORBIDDEN_IN_FLAT:e="${room.error.pets.forbidden_in_flat}";break;case M.a.RSEME_NO_FREE_TILES_FOR_PET:e="${room.error.pets.no_free_tiles}";break;case M.a.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET:e="${room.error.pets.selected_tile_not_free}";break;case M.a.RSEME_BOTS_FORBIDDEN_IN_HOTEL:e="${room.error.bots.forbidden_in_hotel}";break;case M.a.RSEME_BOTS_FORBIDDEN_IN_FLAT:e="${room.error.bots.forbidden_in_flat}";break;case M.a.RSEME_BOT_LIMIT_REACHED:e="${room.error.max_bots}";break;case M.a.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT:e="${room.error.bots.selected_tile_not_free}";break;case M.a.RSEME_BOT_NAME_NOT_ACCEPTED:e="${room.error.bots.name.not.accepted}";break;default:return}this._notificationService.alert(e,s)}onRoomSessionEvent(t){if(t)switch(t.type){case w.a.CREATED:return this._ngZone.run(()=>{this._landingViewVisible=!1}),void _.a.instance.roomSessionManager.startSession(t.session);case w.a.STARTED:case w.a.ROOM_DATA:return;case w.a.ENDED:return this.roomComponent&&this.roomComponent.endRoom(),void this._ngZone.run(()=>{this._landingViewVisible=t.openLandingView});default:return void(this.roomComponent&&this.roomComponent.processEvent(t))}}linkReceived(t){const e=t.split("/");if(!(e.length<2))switch(e[1]){case"open":if(e.length>2)switch(e[2]){case"credits":break;default:L.a.openHabblet(e[2])}return}}get eventUrlPrefix(){return"habblet"}get landingViewVisible(){return this._landingViewVisible}get avatarEditorVisible(){return this._settingsService.avatarEditorVisible}get catalogVisible(){return this._settingsService.catalogVisible}get navigatorVisible(){return this._settingsService.navigatorVisible}get inventoryVisible(){return this._settingsService.inventoryVisible}get friendListVisible(){return this._settingsService.friendListVisible}get achievementsVisible(){return this._settingsService.achievementsVisible}get chatHistoryVisible(){return this._settingsService.chatHistoryVisible}get modToolVisible(){return _.a.instance.sessionDataManager.isModerator}get userSettingsVisible(){return this._settingsService.userSettingsVisible}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(ss),i.Yb(m),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-main-component"]],viewQuery:function(t,e){if(1&t&&i.bd($i,1),2&t){let t;i.Gc(t=i.oc())&&(e.roomComponent=t.first)}},decls:24,vars:12,consts:[[1,"nitro-main-component"],[1,"nitro-right-side"],[1,"d-flex","flex-column"],[3,"visible"],[4,"ngIf"],[3,"isInRoom"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Zb(1,"nitro-alert-center-component"),i.dc(2,"div",1),i.dc(3,"div",2),i.Zb(4,"nitro-purse-main-component"),i.Zb(5,"nitro-group-room-info-component"),i.Zb(6,"nitro-notification-center-component"),i.cc(),i.cc(),i.Zb(7,"nitro-achievements-main-component",3),i.Zb(8,"nitro-call-for-help-main-component"),i.Zb(9,"nitro-pedia-main-component"),i.Zb(10,"nitro-avatar-editor-main-component",3),i.Tc(11,Lb,1,0,"nitro-hotelview-component",4),i.Zb(12,"nitro-toolbar-component",5),i.Zb(13,"nitro-friendlist-main-component",3),i.Zb(14,"nitro-catalog-main-component",3),i.Zb(15,"nitro-navigator-main-component",3),i.Zb(16,"nitro-inventory-main-component",3),i.Zb(17,"nitro-user-profile-component"),i.Zb(18,"nitro-chat-history-component",3),i.Zb(19,"nitro-user-settings-component",3),i.Zb(20,"nitro-wired-main-component"),i.Zb(21,"nitro-group-main-component"),i.Zb(22,"nitro-mod-tool-main-component",3),i.Zb(23,"nitro-room-component"),i.cc()),2&t&&(i.Kb(2),i.xc("@inOutAnimation",void 0),i.Kb(5),i.xc("visible",e.achievementsVisible),i.Kb(3),i.xc("visible",e.avatarEditorVisible),i.Kb(1),i.xc("ngIf",e.landingViewVisible),i.Kb(1),i.xc("isInRoom",!e.landingViewVisible),i.Kb(1),i.xc("visible",e.friendListVisible),i.Kb(1),i.xc("visible",e.catalogVisible),i.Kb(1),i.xc("visible",e.navigatorVisible),i.Kb(1),i.xc("visible",e.inventoryVisible),i.Kb(2),i.xc("visible",e.chatHistoryVisible),i.Kb(1),i.xc("visible",e.userSettingsVisible),i.Kb(3),i.xc("visible",e.modToolVisible))},directives:[Kl,su,Yu,r_,N_,L_,B_,rd,p.n,Md,Pd,dm,Wm,_f,Bf,$f,lE,Bv,vb,Ub,$i,xb],encapsulation:2,data:{animation:[Object(f.j)("inOutAnimation",[Object(f.i)(":enter",[Object(f.h)({top:"-100%"}),Object(f.e)("1s ease-out",Object(f.h)({top:0}))])])]}}),t})();function Fb(t,e){if(1&t&&(i.dc(0,"div",10),i.Vc(1),i.cc()),2&t){const t=i.qc(2);i.Kb(1),i.Wc(t.message)}}function kb(t,e){1&t&&(i.dc(0,"div",12),i.dc(1,"div",13),i.Zb(2,"div",14),i.cc(),i.dc(3,"div",15),i.Vc(4,"%"),i.cc(),i.cc())}function Vb(t,e){if(1&t&&(i.dc(0,"div",3),i.dc(1,"div",4),i.dc(2,"div",5),i.dc(3,"div",6),i.Zb(4,"div",7),i.Zb(5,"img",8),i.cc(),i.Tc(6,Fb,2,1,"div",9),i.Zb(7,"div",10),i.Tc(8,kb,5,0,"div",11),i.cc(),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(6),i.xc("ngIf",t.message&&t.message.length),i.Kb(2),i.xc("ngIf",!t.isError)}}function Bb(t,e){1&t&&i.Zb(0,"nitro-main-component")}let Wb=(()=>{class t{constructor(t,e){this._settingsService=t,this._ngZone=e,this.message="Getting Ready",this.percentage=0,this.hideProgress=!0,this.isLocalizationReady=!1,this.isAvatarRenderReady=!1,this.isError=!1,this._isReady=!1,this.onNitroEvent=this.onNitroEvent.bind(this)}ngOnInit(){this._ngZone.runOutsideAngular(()=>{if(!NitroConfig)throw new Error("NitroConfig is not defined!");(class{static isWebGLAvailable(){return g.utils.isWebGLSupported()}}).isWebGLAvailable()?(_.a.instance||_.a.bootstrap(),_.a.instance.events.addEventListener(h.a.CONNECTION_HANDSHAKING,this.onNitroEvent),_.a.instance.events.addEventListener(h.a.CONNECTION_HANDSHAKE_FAILED,this.onNitroEvent),_.a.instance.events.addEventListener(h.a.CONNECTION_AUTHENTICATED,this.onNitroEvent),_.a.instance.events.addEventListener(h.a.CONNECTION_ERROR,this.onNitroEvent),_.a.instance.events.addEventListener(h.a.CONNECTION_CLOSED,this.onNitroEvent),_.a.instance.roomEngine.events.addEventListener(d.a.ENGINE_INITIALIZED,this.onNitroEvent),_.a.instance.localization.events.addEventListener(u.a.LOADED,this.onNitroEvent),_.a.instance.core.configuration.events.addEventListener(o.a.LOADED,this.onNitroEvent),_.a.instance.core.configuration.events.addEventListener(o.a.FAILED,this.onNitroEvent),_.a.instance.core.configuration.init(),this._connectionTimeout=setTimeout(this.onConnectionTimeout,15e3)):this.onNitroEvent(new c.a(_.a.WEBGL_UNAVAILABLE))})}ngOnDestroy(){this._ngZone.runOutsideAngular(()=>{_.a.instance.events.removeEventListener(h.a.CONNECTION_HANDSHAKING,this.onNitroEvent),_.a.instance.events.removeEventListener(h.a.CONNECTION_HANDSHAKE_FAILED,this.onNitroEvent),_.a.instance.events.removeEventListener(h.a.CONNECTION_AUTHENTICATED,this.onNitroEvent),_.a.instance.events.removeEventListener(h.a.CONNECTION_ERROR,this.onNitroEvent),_.a.instance.events.removeEventListener(h.a.CONNECTION_CLOSED,this.onNitroEvent),_.a.instance.localization.events.removeEventListener(u.a.LOADED,this.onNitroEvent),_.a.instance.core.configuration.events.removeEventListener(o.a.LOADED,this.onNitroEvent),_.a.instance.core.configuration.events.removeEventListener(o.a.FAILED,this.onNitroEvent),clearTimeout(this._connectionTimeout)})}getPreloadAssetUrls(){const t=[],e=_.a.instance.getConfiguration("preload.assets.urls");if(e&&e.length)for(const s of e)t.push(_.a.instance.core.configuration.interpolate(s));return t}onNitroEvent(t){if(t)switch(t.type){case o.a.LOADED:return void _.a.instance.localization.init();case o.a.FAILED:return void this._ngZone.run(()=>{this.isError=!0,this.message="Configuration Failed"});case _.a.WEBGL_UNAVAILABLE:return void this._ngZone.run(()=>{this.isError=!0,this.message="WebGL Required"});case _.a.WEBGL_CONTEXT_LOST:return this._ngZone.run(()=>{this.isError=!0,this.message="WebGL Context Lost - Reloading"}),void setTimeout(()=>location.reload(),1500);case h.a.CONNECTION_HANDSHAKING:return clearTimeout(this._connectionTimeout),void(this._connectionTimeout=null);case h.a.CONNECTION_HANDSHAKE_FAILED:return void this._ngZone.run(()=>{this.isError=!0,this.message="Handshake Failed"});case h.a.CONNECTION_AUTHENTICATED:return this._ngZone.run(()=>{this.message="Finishing Up"}),_.a.instance.init(),clearTimeout(this._connectionTimeout),void(this._connectionTimeout=null);case h.a.CONNECTION_ERROR:return void this._ngZone.run(()=>{this.isError=!0,this.message="Connection Error"});case h.a.CONNECTION_CLOSED:return _.a.instance.roomEngine&&_.a.instance.roomEngine.dispose(),this._ngZone.run(()=>{this.isError=!0,this.message="Connection Closed"}),void l.a.call("disconnect",-1,"client.init.handshake.fail");case d.a.ENGINE_INITIALIZED:return void this._ngZone.run(()=>this._isReady=!0);case u.a.LOADED:return void _.a.instance.core.asset.downloadAssets(this.getPreloadAssetUrls(),t=>{t?(this._ngZone.run(()=>{this.message="Connecting"}),_.a.instance.communication.init()):this._ngZone.run(()=>{this.isError=!0,this.message="Assets Failed"})})}}onConnectionTimeout(){l.a.call("logDebug","TcpAuth control socket security error")}get isReady(){return this._isReady}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(m),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["app-root"]],decls:3,vars:2,consts:[["id","nitro"],["id","habbo-loading",4,"ngIf"],[4,"ngIf"],["id","habbo-loading"],[1,"loading-component"],[1,"loading-view"],[1,"loading-bg"],[1,"loading-habbo_logo"],["src","",1,"loading-room_bg"],["class","loading-text",4,"ngIf"],[1,"loading-text"],["class","loading-progress-container",4,"ngIf"],[1,"loading-progress-container"],[1,"loading-bar"],[1,"bar"],["id","percent"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Tc(1,Vb,9,2,"div",1),i.Tc(2,Bb,1,0,"nitro-main-component",2),i.cc()),2&t&&(i.Kb(1),i.xc("ngIf",!e.isReady),i.Kb(1),i.xc("ngIf",e.isReady&&!e.isError))},directives:[p.n,Pb],encapsulation:2}),t})();a(document).ready(function(){var t=a(".loading-room_bg");t.attr("src","../assets/images/loading/room-picture/"+Math.floor(16*Math.random())+".png"),setInterval(function(){var e=Math.floor(16*Math.random());t.attr("src","../assets/images/loading/room-picture/"+e+".png")},2400)});var Kb=s("dbUT"),Gb=s("eaoH"),Hb=s("oOf3"),jb=s("5eHb");const zb={suppressScrollX:!0};let Yb=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[{provide:hc.a,useValue:zb},Gs,Kf],imports:[[n.a,r.a,p.b,rr.h,rr.s,jb.a.forRoot(),Mu.e,Mu.j,Mu.h,Hb.a,sa.a,hc.c,Kb.a.forRoot(),Gb.a],p.b,rr.h,rr.s,jb.a,Mu.e,Mu.j,Mu.h,Hb.a,sa.a,hc.c,Kb.a,Gb.a]}),t})(),qb=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[u_],imports:[[Yb]]}),t})();const Zb=["nitro-avatar-model-viewer-component",""],Xb=function(t){return{active:t}},Qb=function(t){return{selected:t}};function Jb(t,e){if(1&t){const t=i.ec();i.dc(0,"div",3),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc(2).selectCategory(s.name)}),i.Zb(1,"i",4),i.cc()}if(2&t){const t=e.$implicit,s=i.qc(2);i.xc("ngClass",i.Bc(5,Xb,s.activeCategory===t)),i.Kb(1),i.Nb("icon ",t.name,"-icon"),i.xc("ngClass",i.Bc(7,Qb,s.activeCategory===t))}}function $b(t,e){if(1&t&&(i.bc(0),i.Tc(1,Jb,2,9,"div",2),i.ac()),2&t){const t=i.qc();i.Kb(1),i.xc("ngForOf",t.categories.getValues())}}function tI(t,e){if(1&t){const t=i.ec();i.bc(0),i.dc(1,"div",5),i.nc("click",function(){return i.Kc(t),i.qc().selectGender("M")}),i.Zb(2,"i",6),i.cc(),i.dc(3,"p",7),i.Vc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"div",8),i.nc("click",function(){return i.Kc(t),i.qc().selectGender("F")}),i.Zb(7,"i",9),i.cc(),i.dc(8,"p",7),i.Vc(9),i.rc(10,"translate"),i.cc(),i.ac()}if(2&t){const t=i.qc();i.Kb(1),i.xc("ngClass",i.Bc(10,Xb,"M"===t.gender)),i.Kb(1),i.xc("ngClass",i.Bc(12,Qb,"M"===t.gender)),i.Kb(2),i.Wc(i.sc(5,6,"register.gender.male")),i.Kb(2),i.xc("ngClass",i.Bc(14,Xb,"F"===t.gender)),i.Kb(1),i.xc("ngClass",i.Bc(16,Qb,"F"===t.gender)),i.Kb(2),i.Wc(i.sc(10,8,"register.gender.female"))}}const eI=function(t,e){return{"":t,"flex-grow-1":e}};function sI(t,e){if(1&t&&(i.dc(0,"div",4),i.Zb(1,"div",13),i.cc()),2&t){const t=i.qc(2);i.xc("ngClass",i.Cc(6,eI,t.maxPaletteCount>=2,t.maxPaletteCount<=1)),i.Kb(1),i.xc("model",t.model)("category",t.activeCategory)("paletteSet",t.activeCategory.getPalette(0))("paletteIndex",0)("maxPaletteCount",t.maxPaletteCount)}}function iI(t,e){if(1&t&&(i.dc(0,"div"),i.Zb(1,"div",13),i.cc()),2&t){const t=i.qc(2);i.Kb(1),i.xc("model",t.model)("category",t.activeCategory)("paletteSet",t.activeCategory.getPalette(1))("paletteIndex",1)("maxPaletteCount",t.maxPaletteCount)}}function nI(t,e){if(1&t&&(i.bc(0),i.dc(1,"div",10),i.Zb(2,"div",11),i.cc(),i.dc(3,"div"),i.Tc(4,sI,2,9,"div",12),i.Tc(5,iI,2,5,"div",1),i.cc(),i.ac()),2&t){const t=i.qc();i.Kb(2),i.xc("model",t.model)("category",t.activeCategory)("partSet",t.activeCategory.parts),i.Kb(2),i.xc("ngIf",t.maxPaletteCount>=1),i.Kb(1),i.xc("ngIf",2===t.maxPaletteCount)}}let rI=(()=>{class t{constructor(t){this._avatarEditorService=t,this.model=null,this.gender=null}ngOnChanges(t){this.prepareModel()}prepareModel(){this.model&&(this.model.setViewer(this),this.model.init(),this._activeCategory=null,this.selectFirstCategory())}selectFirstCategory(){if(this.model)for(const t of this.model.categories.getKeys())if(t)return void this.selectCategory(t)}selectCategory(t){if(!this.model||!t)return;const e=this.model.categories.getValue(t);if(e){e.init(),this._activeCategory=e;for(const t of this._activeCategory.parts)if(t&&t.isSelected){this.model.maxPaletteCount=t.colorLayerCount;break}}}selectGender(t){this.model&&t&&this._avatarEditorService.component&&(this._avatarEditorService.component.gender=t)}get categories(){return this.model.categories}get activeCategory(){return this._activeCategory}get canSetGender(){return this.model&&this.model.canSetGender}get maxPaletteCount(){return this.model&&this.model.maxPaletteCount||1}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(vr))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-avatar-model-viewer-component",""]],inputs:{model:"model",gender:"gender"},features:[i.Ib],attrs:Zb,decls:4,vars:3,consts:[[1,"builder_viewport-menu"],[4,"ngIf"],["class","bvm-icon",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"bvm-icon",3,"ngClass","click"],[3,"ngClass"],["id","male-facebody",1,"bvm-icon",3,"ngClass","click"],[1,"icon","male-icon",3,"ngClass"],[1,"avatareditor-bvm-name"],["id","female-facebody",1,"bvm-icon",3,"ngClass","click"],[1,"icon","female-icon",3,"ngClass"],[1,"d-flex"],["nitro-avatar-set-viewer-component","",1,"w-100",3,"model","category","partSet"],[3,"ngClass",4,"ngIf"],["nitro-avatar-palette-viewer-component","",3,"model","category","paletteSet","paletteIndex","maxPaletteCount"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Tc(1,$b,2,1,"ng-container",1),i.Tc(2,tI,11,18,"ng-container",1),i.cc(),i.Tc(3,nI,6,5,"ng-container",1)),2&t&&(i.Kb(1),i.xc("ngIf",e.categories.length>1),i.Kb(1),i.xc("ngIf",e.canSetGender),i.Kb(1),i.xc("ngIf",e.activeCategory))},encapsulation:2}),t})();const aI=["nitro-avatar-palette-viewer-component",""],oI=function(t){return{"color-object-active":t}},cI=function(t){return{"background-color":t}};function hI(t,e){if(1&t){const t=i.ec();i.dc(0,"div",4),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().selectPalette(s)}),i.cc()}if(2&t){const t=e.$implicit;i.xc("ngClass",i.Bc(2,oI,t.isSelected))("ngStyle",i.Bc(4,cI,t.color))}}const lI=function(t,e){return{"corelotest-g6":t,corelotest:e}};let uI=(()=>{class t{constructor(){this.model=null,this.category=null,this.paletteSet=[],this.paletteIndex=-1,this.maxPaletteCount=1}ngOnChanges(t){t.category&&this.perfectScrollBar&&this.perfectScrollBar.directiveRef&&this.perfectScrollBar.directiveRef.scrollToTop()}selectPalette(t){if(!(this.model&&this.category&&this.paletteSet&&t))return;if(!t||!this.model)return;const e=this.paletteSet.indexOf(t);-1!==e&&this.model.selectColor(this.category.name,e,this.paletteIndex)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-avatar-palette-viewer-component",""]],viewQuery:function(t,e){if(1&t&&i.bd(hc.b,1),2&t){let t;i.Gc(t=i.oc())&&(e.perfectScrollBar=t.first)}},inputs:{model:"model",category:"category",paletteSet:"paletteSet",paletteIndex:"paletteIndex",maxPaletteCount:"maxPaletteCount"},features:[i.Ib],attrs:aI,decls:4,vars:5,consts:[[1,"corelotest",3,"ngClass"],["id","clothes-color"],[1,"ccolor-max-width"],["class","color-object",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[1,"color-object",3,"ngClass","ngStyle","click"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"div",2),i.Tc(3,hI,1,6,"div",3),i.cc(),i.cc(),i.cc()),2&t&&(i.xc("ngClass",i.Cc(2,lI,e.maxPaletteCount>=2,e.maxPaletteCount<=1)),i.Kb(3),i.xc("ngForOf",e.paletteSet))},directives:[p.l,p.m,p.o],encapsulation:2}),t})();const _I=["nitro-avatar-set-viewer-component",""];function dI(t,e){1&t&&i.Zb(0,"i",5)}const gI=function(t){return{"clothes-object-active":t}},mI=function(t){return{"background-image":t}};function pI(t,e){if(1&t){const t=i.ec();i.dc(0,"div",2),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().selectPart(s)}),i.dc(1,"div",3),i.Tc(2,dI,1,0,"i",4),i.cc(),i.cc()}if(2&t){const t=e.$implicit;i.xc("ngClass",i.Bc(3,gI,t.isSelected)),i.Kb(1),i.xc("ngStyle",t.imageUrl&&i.Bc(5,mI,"url("+t.imageUrl+")")),i.Kb(1),i.xc("ngIf",t.isClear)}}let fI=(()=>{class t{constructor(){this.model=null,this.category=null,this.partSet=[]}ngOnChanges(t){t.category&&this.perfectScrollBar&&this.perfectScrollBar.directiveRef&&this.perfectScrollBar.directiveRef.scrollToTop()}selectPart(t){if(!(this.model&&this.category&&this.partSet&&t))return;const e=this.partSet.indexOf(t);-1!==e&&this.model.selectPart(this.category.name,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-avatar-set-viewer-component",""]],viewQuery:function(t,e){if(1&t&&i.bd(hc.b,1),2&t){let t;i.Gc(t=i.oc())&&(e.perfectScrollBar=t.first)}},inputs:{model:"model",category:"category",partSet:"partSet"},features:[i.Ib],attrs:_I,decls:2,vars:1,consts:[["id","clothes-box"],["class","clothes-object",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"clothes-object",3,"ngClass","click"],[1,"corelo-view-generic-position",3,"ngStyle"],["class","i icon clear-icon",4,"ngIf"],[1,"i","icon","clear-icon"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Tc(1,pI,3,7,"div",1),i.cc()),2&t&&(i.Kb(1),i.xc("ngForOf",e.partSet))},directives:[p.m,p.l,p.o,p.n],encapsulation:2}),t})();const EI=["nitro-avatar-wardrobe-component",""];function SI(t,e){if(1&t){const t=i.ec();i.dc(0,"div",3),i.dc(1,"div",4),i.nc("click",function(){i.Kc(t);const s=e.index;return i.qc().updateLook(s+1)}),i.cc(),i.dc(2,"div",5),i.nc("click",function(){i.Kc(t);const s=e.index;return i.qc().loadLook(s+1)}),i.cc(),i.dc(3,"div",6),i.Zb(4,"div",7),i.cc(),i.cc()}if(2&t){const t=e.index,s=i.qc();i.Kb(4),i.xc("figure",s.getLook(t+1))("direction",4)}}let vI=(()=>{class t{constructor(t){this._avatarEditorService=t,this.maxServerPage=1,this.maxClientPage=2,this.looksPerClientPage=10,this.figureData=null,this._currentServerPage=1,this._currentClientPage=1,this._maxLoadedServerPage=1,this._looks=new Map,this._avatarEditorService.wardrobeComponent=this,this._requestLooks(this._currentServerPage)}previousPage(){1!==this._currentClientPage&&this._currentClientPage--}nextPage(){if(this._currentClientPage!==this.maxClientPage&&(this._currentClientPage++,(this._currentClientPage-1)%2==0&&this._currentServerPage<this.maxServerPage)){if(this._currentServerPage++,this._currentServerPage<this._maxLoadedServerPage)return;this._maxLoadedServerPage=this._currentServerPage,this._requestLooks(this._currentServerPage)}}getLook(t){const e=this.getRealIndex(t);return this._looks.has(e)?this._looks.get(e)[0]:null}setLook(t,e,s){this._looks.set(t,[e,s])}updateLook(t){const e=this.getRealIndex(t);this._looks.set(e,[this._avatarEditorService.currentEditorLook,this._avatarEditorService.currentEditorGender]),this._avatarEditorService.setWardrobeSlot(e)}loadLook(t){const e=this.getRealIndex(t);if(!this._looks.has(e))return;const s=this._looks.get(e);this._avatarEditorService.loadAvatarInEditor(s[0],s[1])}counter(){return new Array(this.looksPerClientPage)}getRealIndex(t){return t+(this._currentClientPage-1)*this.looksPerClientPage}_requestLooks(t){this._avatarEditorService.requestWardrobePage(t)}get currentPage(){return this._currentClientPage}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(vr))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-avatar-wardrobe-component",""]],inputs:{figureData:"figureData"},attrs:EI,decls:5,vars:4,consts:[[1,"wardrobe-desc"],[1,"wardrobe-bg"],["class","wardrobe-processing-center",4,"ngFor","ngForOf"],[1,"wardrobe-processing-center"],[1,"put-in-wardrobe",3,"click"],[1,"use-the-outfit",3,"click"],[1,"wardrobe-user-clothing-box","nitro-avatar-image"],["nitro-avatar-image","","scale","0-5",1,"wardrobe-avatar",3,"figure","direction"]],template:function(t,e){1&t&&(i.dc(0,"p",0),i.Vc(1),i.rc(2,"translate"),i.cc(),i.dc(3,"div",1),i.Tc(4,SI,5,2,"div",2),i.cc()),2&t&&(i.Kb(1),i.Wc(i.sc(2,2,"avatareditor.wardrobe.title")),i.Kb(3),i.xc("ngForOf",e.counter()))},directives:[p.m,_a],pipes:[ln],encapsulation:2}),t})(),bI=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[vr],imports:[[Yb]]}),t})();i.Nc(rd,[p.n,Tr,Lr,p.m,p.l,_a,rI,vI],[ln]),i.Nc(rI,[p.n,p.m,p.l,fI,uI],[ln]);let II=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[x_],imports:[[Yb]]}),t})(),RI=(()=>{class t{constructor(t,e){this._catalogService=t,this._ngZone=e}hide(){this._catalogService.component&&this._catalogService.component.setInsufficientFunds(!1)}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Qo),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-catalog-confirm-purchase-insufficient-funds"]],decls:20,vars:12,consts:[["dragHandle","#mobibuy-hatadrag","id","mobibuy-hata",3,"bringToTop","draggable"],["id","mobibuy-hatadrag"],[1,"mbh-baslik"],[1,"old-kapat",3,"click"],[1,"mobibuy-hata-box"],[1,"mbuy-hata-text-box"],[1,"mbuyh-text"],[1,"mobi-buy-iptal-et",3,"click"],[1,"mobi-buy-onayla"],[1,"mb-islem-onayla-box",3,"click"],[1,"mb-tamam-text"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",3),i.nc("click",function(){return e.hide()}),i.cc(),i.cc(),i.dc(6,"div",4),i.dc(7,"div",5),i.dc(8,"p",6),i.Vc(9),i.rc(10,"translate"),i.cc(),i.cc(),i.dc(11,"div",7),i.nc("click",function(){return e.hide()}),i.dc(12,"u"),i.Vc(13),i.rc(14,"translate"),i.cc(),i.cc(),i.dc(15,"div",8),i.dc(16,"div",9),i.nc("click",function(){return e.hide()}),i.dc(17,"p",10),i.Vc(18),i.rc(19,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(i.sc(4,4,"catalog.alert.notenough.title")),i.Kb(6),i.Wc(i.sc(10,6,"catalog.alert.notenough.credits.description")),i.Kb(4),i.Wc(i.sc(14,8,"catalog.purchase_confirmation.cancel")),i.Kb(5),i.Wc(i.sc(19,10,"generic.ok")))},directives:[Tr,Lr],pipes:[ln],encapsulation:2}),t})();const TI=["imageElement"];function OI(t,e){if(1&t&&(i.dc(0,"p",22),i.Vc(1),i.cc()),2&t){const t=i.qc();i.Kb(1),i.Xc("x",t.quantity," adet")}}function yI(t,e){if(1&t&&(i.dc(0,"div",12),i.dc(1,"p",23),i.Vc(2),i.cc(),i.dc(3,"div",24),i.Zb(4,"i",25),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(2),i.Wc(t.costCredits)}}function CI(t,e){1&t&&(i.dc(0,"p",26),i.Vc(1,"+"),i.cc())}function AI(t,e){if(1&t&&(i.dc(0,"p",23),i.Vc(1),i.cc()),2&t){const t=i.qc();i.Kb(1),i.Xc("",t.costPoints," ")}}function MI(t,e){if(1&t&&(i.dc(0,"div",24),i.Zb(1,"i"),i.cc()),2&t){const t=i.qc();i.Kb(1),i.Nb("icon icon-currencybig-",t.pointsType,"")}}const wI=function(t){return{"background-image":t}};let DI=(()=>{class t{constructor(t,e){this._catalogService=t,this._ngZone=e,this.page=null,this.offer=null,this.giftOffer=null,this.quantity=1,this.extra=null,this.completed=!1,this._imageUrl=""}ngOnChanges(t){const e=t.offer.currentValue;e&&t.offer.previousValue!==e&&this.refresh()}hide(){this._catalogService.component&&this._catalogService.component.hidePurchaseConfirmation()}refresh(){this.refreshImage()}refreshImage(){this._ngZone.runOutsideAngular(()=>{this._imageUrl="";const t=this._catalogService.component&&this._catalogService.component.roomPreviewer;if(!t)return;const e=t.getRoomPreviewObject();if(e){const t=e.visualization.getImage(16711680,-1),s=Jo.a.generateImage(t);s&&(this._imageUrl=s.src)}})}purchase(){this.giftOffer?this._catalogService.component&&this._catalogService.component.makeGiftConfiguratorVisible():this._catalogService.purchase(this.page,this.offer,this.quantity,this.extra)}completePurchase(){this._ngZone.runOutsideAngular(()=>{const t=new HTMLImageElement;t.className="toolbar-icon-animation",t.src=this._imageUrl,t.style.visibility="hidden",this.imageElement&&this.imageElement.nativeElement.appendChild(t);const e=t.getBoundingClientRect(),s=new ad.a(t,e.x,e.y);s.iconName=ol.a.INVENTORY,_.a.instance.roomEngine.events.dispatchEvent(s)})}get costCredits(){return this.offer.priceCredits*this.quantity}get costPoints(){return this.offer.priceActivityPoints*this.quantity}get pointsType(){return this.offer.priceActivityPointsType}get imageUrl(){return this._imageUrl}getOfferTitle(){const t=this.offer.localizationId,e=_.a.instance.sessionDataManager.getProductData(t);return e?e.name:t}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Qo),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-catalog-confirm-purchase-component"]],viewQuery:function(t,e){if(1&t&&i.bd(TI,1),2&t){let t;i.Gc(t=i.oc())&&(e.imageElement=t.first)}},inputs:{page:"page",offer:"offer",giftOffer:"giftOffer",quantity:"quantity",extra:"extra",completed:"completed"},features:[i.Ib],decls:31,vars:21,consts:[["dragHandle","#mobibuy-basarilidrag","id","mobibuy-basarili",3,"bringToTop","draggable"],["id","mobibuy-basarilidrag"],[1,"mbb-baslik"],[1,"old-kapat",3,"click"],[1,"mobibuy-basarili-box"],[1,"mbb-mobi_onizleme",3,"ngStyle"],["imageElement",""],[1,"mbb-mobi_adi","offer-name"],["class","mbb-mobi_adet offer-quantity",4,"ngIf"],[1,"mbb-fiyat-text"],[1,"mbb-fiyat-box"],["class","mdb-fbox",4,"ngIf"],[1,"mdb-fbox"],["class","plusprice",4,"ngIf"],["class","hc-fiyat-text",4,"ngIf"],["class","mobi-fiyat-birimico",4,"ngIf"],[1,"mobi-buy-iptal-et",3,"click"],[1,"mbb-islem-iptal-box"],[1,"mbb-iptal-text"],[1,"mobi-buy-onayla",3,"click"],[1,"mbb-islem-onayla-box"],[1,"mbb-tamam-text"],[1,"mbb-mobi_adet","offer-quantity"],[1,"hc-fiyat-text"],[1,"mobi-fiyat-birimico"],[1,"icon","icon-currencybig-cc"],[1,"plusprice"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",3),i.nc("click",function(){return e.hide()}),i.cc(),i.cc(),i.dc(6,"div",4),i.Zb(7,"div",5,6),i.dc(9,"p",7),i.Vc(10),i.cc(),i.Tc(11,OI,2,1,"p",8),i.dc(12,"p",9),i.Vc(13),i.rc(14,"translate"),i.cc(),i.dc(15,"div",10),i.Tc(16,yI,5,1,"div",11),i.dc(17,"div",12),i.Tc(18,CI,2,0,"p",13),i.Tc(19,AI,2,1,"p",14),i.Tc(20,MI,2,3,"div",15),i.cc(),i.cc(),i.dc(21,"div",16),i.nc("click",function(){return e.hide()}),i.dc(22,"div",17),i.dc(23,"p",18),i.Vc(24),i.rc(25,"translate"),i.cc(),i.cc(),i.cc(),i.dc(26,"div",19),i.nc("click",function(){return e.purchase()}),i.dc(27,"div",20),i.dc(28,"p",21),i.Vc(29),i.rc(30,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(i.sc(4,11,null!=e.giftOffer?"catalog.purchase_confirmation.gift.title":"catalog.purchase_confirmation.title")),i.Kb(4),i.xc("ngStyle",i.Bc(19,wI,"url("+e.imageUrl+")")),i.Kb(3),i.Wc(e.offer.localizationId),i.Kb(1),i.xc("ngIf",e.quantity),i.Kb(2),i.Wc(i.sc(14,13,"targeted.offer.price.label")),i.Kb(3),i.xc("ngIf",e.costCredits),i.Kb(2),i.xc("ngIf",e.costCredits&&e.costPoints),i.Kb(1),i.xc("ngIf",e.costPoints),i.Kb(1),i.xc("ngIf",e.costPoints),i.Kb(4),i.Wc(i.sc(25,15,"catalog.purchase_confirmation.cancel")),i.Kb(5),i.Wc(i.sc(30,17,null!=e.giftOffer?"catalog.purchase_confirmation.gift":"catalog.purchase_confirmation.buy")))},directives:[Tr,Lr,p.o,p.n],pipes:[ln],encapsulation:2}),t})();function NI(t,e){if(1&t&&(i.dc(0,"div",12),i.dc(1,"p",23),i.Vc(2),i.cc(),i.dc(3,"div",15),i.Zb(4,"i",24),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(2),i.Wc(t.subscription.priceCredits)}}function UI(t,e){if(1&t&&(i.dc(0,"p",23),i.Vc(1),i.cc()),2&t){const t=i.qc();i.Kb(1),i.Xc("",t.subscription.priceActivityPoints," ")}}let xI=(()=>{class t{constructor(t,e){this._catalogService=t,this._ngZone=e,this.subscription=null}getSubscriptionText(){let t=_.a.instance.localization.getValue("catalog.vip.buy.confirm.end_date");return t=t.replace("%month%",this.subscription.month.toString()),t=t.replace("%day%",this.subscription.day.toString()),t=t.replace("%year%",this.subscription.year.toString()),t}getSubscriptionHeader(){const t=this._catalogService.purse,e=0==this.subscription.months?"days":"months",s=_.a.instance.localization.getValue("catalog.vip.buy.confirm."+(t.clubDays>0||t.clubPeriods>0?"extension.":"subscription.")+e),i=0==this.subscription.months?this.subscription.extraDays:this.subscription.months;return s.replace("%NUM_"+e.toUpperCase()+"%",i.toString())}getCurrencyUrl(t){return _.a.instance.getConfiguration("currency.asset.icon.url").replace("%type%",t.toString())}hide(){this._catalogService.component&&this._catalogService.component.hidePurchaseConfirmation()}purchase(){this._catalogService.purchaseById(this._catalogService.activePage.pageId,this.subscription.offerId,1)}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Qo),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-catalog-confirm-vip-subscription-component"]],inputs:{subscription:"subscription"},decls:34,vars:16,consts:[["dragHandle","#mobibuy-basarilidrag","id","mobibuy-basarili",3,"bringToTop","draggable"],["id","mobibuy-basarilidrag"],[1,"mbb-baslik"],[1,"old-kapat",3,"click"],[1,"mobibuy-basarili-box"],[1,"mbb-mobi_onizleme",2,"display","flex","flex-direction","column","justify-content","center","align-items","center"],[1,"icon","icon-catalogue-hc_big"],[1,"mbb-mobi_adi",2,"padding-top","30px"],[1,"mbb-mobi_adi",2,"padding-top","0px"],[1,"mbb-fiyat-text"],[1,"mbb-fiyat-box"],["class","mdb-fbox",4,"ngIf"],[1,"mdb-fbox"],[1,"plusprice"],["class","hc-fiyat-text",4,"ngIf"],[1,"mobi-fiyat-birimico"],[1,"icon","icon-currencybig-5"],[1,"mobi-buy-iptal-et",3,"click"],[1,"mbb-islem-iptal-box"],[1,"mbb-iptal-text"],[1,"mobi-buy-onayla",3,"click"],[1,"mbb-islem-onayla-box"],[1,"mbb-tamam-text"],[1,"hc-fiyat-text"],[1,"icon","icon-currencybig-cc"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",3),i.nc("click",function(){return e.hide()}),i.cc(),i.cc(),i.dc(6,"div",4),i.dc(7,"div",5),i.Zb(8,"i",6),i.cc(),i.dc(9,"p",7),i.Vc(10),i.cc(),i.dc(11,"p",8),i.Vc(12),i.cc(),i.dc(13,"p",9),i.Vc(14),i.rc(15,"translate"),i.cc(),i.dc(16,"div",10),i.Tc(17,NI,5,1,"div",11),i.dc(18,"div",12),i.dc(19,"p",13),i.Vc(20,"+"),i.cc(),i.Tc(21,UI,2,1,"p",14),i.dc(22,"div",15),i.Zb(23,"i",16),i.cc(),i.cc(),i.cc(),i.dc(24,"div",17),i.nc("click",function(){return e.hide()}),i.dc(25,"div",18),i.dc(26,"p",19),i.Vc(27),i.rc(28,"translate"),i.cc(),i.cc(),i.cc(),i.dc(29,"div",20),i.nc("click",function(){return e.purchase()}),i.dc(30,"div",21),i.dc(31,"p",22),i.Vc(32),i.rc(33,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(i.sc(4,8,"catalog.club.buy.confirm")),i.Kb(7),i.Wc(e.getSubscriptionHeader()),i.Kb(2),i.Wc(e.getSubscriptionText()),i.Kb(2),i.Wc(i.sc(15,10,"targeted.offer.price.label")),i.Kb(3),i.xc("ngIf",e.subscription.priceCredits),i.Kb(4),i.xc("ngIf",e.subscription.priceActivityPoints),i.Kb(6),i.Wc(i.sc(28,12,"catalog.purchase_confirmation.cancel")),i.Kb(5),i.Wc(i.sc(33,14,"catalog.club.buy.subscribe")))},directives:[Tr,Lr,p.n],pipes:[ln],encapsulation:2}),t})();function LI(t,e){if(1&t&&i.Zb(0,"div",37),2&t){const t=i.qc();i.xc("headOnly",!0)("direction",2)("figure",t.habboFace)}}function PI(t,e){1&t&&i.Zb(0,"div",38)}function FI(t,e){if(1&t&&(i.dc(0,"p",39),i.Vc(1),i.Zb(2,"i",40),i.cc()),2&t){const t=i.qc();i.Kb(1),i.Xc("",t.priceText," ")}}const kI=function(t){return{backgroundColor:t,height:""}};function VI(t,e){if(1&t){const t=i.ec();i.dc(0,"div",41),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().selectTypeId(s)}),i.cc()}if(2&t){const t=e.$implicit,s=i.qc();i.xc("disabled",!s.hasColors)("ngStyle",i.Bc(2,kI,s.getColor(t)))}}function BI(t,e){if(1&t){const t=i.ec();i.dc(0,"div",42),i.dc(1,"div",43),i.dc(2,"div",44),i.dc(3,"p",45),i.Vc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"div",3),i.nc("click",function(){return i.Kc(t),i.qc().hideUsernameDialog()}),i.cc(),i.cc(),i.dc(7,"div",46),i.Zb(8,"div",47),i.dc(9,"div",48),i.dc(10,"p",49),i.Vc(11),i.rc(12,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc()}2&t&&(i.Kb(4),i.Wc(i.sc(5,2,"catalog.gift_wrapping.receiver_not_found.title")),i.Kb(7),i.Wc(i.sc(12,4,"catalog.gift_wrapping.receiver_not_found.info")))}const WI=function(t){return{"is-unavailable":t}};let KI=(()=>{class t{constructor(t,e){this._catalogService=t,this._ngZone=e,this.visible=!1,this.showUsernameErrorDialog=!1,this.receiverName="",this.message="",this.showFace=!0,this.habboFace="",this.hasColors=!1,this.boxSpriteId=-1,this.extras="",this._stuffColors=new Map,t.giftConfiguratorComponent=this;const s=this._catalogService.giftWrapperConfiguration,i=s.defaultStuffTypes;if(i.length>0){const t=Math.floor(Math.random()*i.length);this._defaultStuffType=i[t]}this._stuffTypes=s.stuffTypes,this._boxTypes=s.boxTypes,this._boxTypes.push(this._defaultStuffType),this._ribbonTypes=s.ribbonTypes,this._boxPrice=s.price,this._selectedTypeId=this._stuffTypes[2],this._ribbonIndex=this._ribbonTypes[0],this._boxIndex=0,this.updateIndexesAndSetUI(),this.loadColors()}get colors(){return this._stuffTypes}handleButton(t){switch(t){case"previous_box":this._boxIndex--,this.updateIndexesAndSetUI();break;case"next_box":this._boxIndex++,this.updateIndexesAndSetUI();break;case"previous_ribbon":this._ribbonIndex--,this.updateIndexesAndSetUI();break;case"next_ribbon":this._ribbonIndex++,this.updateIndexesAndSetUI();break;case"give_gift":this.giveGift()}}changeCheckbox(t){this.updateIndexesAndSetUI()}get isDefaultBox(){return this._isDefaultBox()}hide(){this._catalogService.component&&this._catalogService.component.hidePurchaseConfirmation()}getColor(t){return"#"+this._stuffColors.get(t).toString(16)}typeHasColors(t){return this._stuffColors.has(t)}selectTypeId(t){this._selectedTypeId=t,this.updateIndexesAndSetUI()}hideUsernameDialog(){this.showUsernameErrorDialog=!1}showUsernameNotFoundDialog(){this._ngZone.run(()=>this.showUsernameErrorDialog=!0)}loadColors(){for(const t of this._stuffTypes){const e=_.a.instance.sessionDataManager.getFloorItemData(t);e&&e.colors&&e.colors.length>0&&this._stuffColors.set(t,e.colors[0])}}updateIndexesAndSetUI(){this._ribbonIndex<0&&(this._ribbonIndex=this._ribbonTypes.length-1),this._ribbonIndex>this._ribbonTypes.length-1&&(this._ribbonIndex=0),this._boxIndex<0&&(this._boxIndex=this._boxTypes.length-1),this._boxIndex>this._boxTypes.length-1&&(this._boxIndex=0);const t=this._boxTypes[this._boxIndex];8==t&&(this._ribbonIndex=10,this._ribbonIndex>this._ribbonTypes.length-1&&(this._ribbonIndex=0));let e=(1e3*t+this._ribbonTypes[this._ribbonIndex]).toString(),s=this._selectedTypeId;this._isDefaultBox()?(this.setHasColors(!1),s=this._defaultStuffType,e=""):8==t?this.setHasColors(!1):(this.setHasColors(!0),t>=3&&t<=6&&this.setHasColors(!1)),this.extras=e,this.boxSpriteId=s,this.setBoxTitles(),this.habboFace=_.a.instance.sessionDataManager.figure}setHasColors(t){this.hasColors=t}setBoxTitles(){const t=this._isDefaultBox(),e=t?"catalog.gift_wrapping_new.freeprice":"catalog.gift_wrapping_new.price",s="catalog.gift_wrapping_new.ribbon."+this._ribbonIndex;this.boxText=_.a.instance.localization.getValue(t?"catalog.gift_wrapping_new.box.default":"catalog.gift_wrapping_new.box."+this._boxTypes[this._boxIndex]),this.priceText=_.a.instance.localization.getValueWithParameter(e,"price",this._boxPrice.toString()),this.ribbonText=_.a.instance.localization.getValue(s)}giveGift(){if(!this.receiverName||0==this.receiverName.trim().length)return;const t=this.receiverName,e=this.message,s=this._isDefaultBox();this._catalogService.purchaseGiftOffer(this._catalogService.component.activePage,this._catalogService.component.activeOffer,this._catalogService.component.purchaseOfferExtra,t,e,s?this._defaultStuffType:this._selectedTypeId,s?0:this._boxTypes[this._boxIndex],s?0:this._ribbonTypes[this._ribbonIndex],this.showFace)}_isDefaultBox(){return this._boxTypes[this._boxIndex]==this._defaultStuffType}ngOnDestroy(){this._catalogService.giftConfiguratorComponent=null}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Qo),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-catalog-customize-gift-component"]],inputs:{visible:"visible"},decls:54,vars:36,consts:[[1,"hediyegonder","nitro-catalog-customize-gift-component",3,"bringToTop","draggable"],[1,"drag-handler","hediyegonder-header"],[1,"hediyegonder-hood"],[1,"old-kapat",3,"click"],[1,"hediyegonder-body"],[1,"hg-inputbox"],[1,"hediye-gonderilen-user",3,"ngModel","placeholder","ngModelChange"],[1,"hediyekart-mesajyaz"],["nitro-avatar-image","","class","hediyegonderen-avatar",3,"headOnly","direction","figure",4,"ngIf"],["class","ingognito",4,"ngIf"],[1,"hediyemesaj-text",3,"ngModel","ngModelChange"],[1,"rs-select_container2",2,"margin-top","10px","width","100%"],[1,"rs-sctxt"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"checkmarkrs2"],[1,"hediye-kutu-select"],["nitro-furniture-image","",1,"hediye-kutu-box",3,"type","spriteId","extras"],[1,"kutu-secim"],["type","button",1,"kutu-left",3,"click"],[1,"fas","fa-caret-left",2,"margin-left","-2px"],["type","button",1,"kutu-right",3,"click"],[1,"fas","fa-caret-right"],[1,"kutu-info-text"],[1,"kutu-adi"],["class","kutu-extraprice",4,"ngIf"],[1,"kurdele-secim"],["type","button",1,"kutu-left",3,"disabled","click"],["type","button",1,"kutu-right",3,"disabled","click"],[1,"kurdele-adi",3,"ngClass"],[1,"renk-sec-text"],[1,"renk-secim-button-box"],["class","renk-kutu",3,"disabled","ngStyle","click",4,"ngFor","ngForOf"],[1,"mobi-buy-iptal-et",3,"click"],[1,"mobi-buy-onayla"],[1,"mb-islem-onayla-box",3,"click"],[1,"mb-tamam-text"],["class","koyu-tamekran",4,"ngIf"],["nitro-avatar-image","",1,"hediyegonderen-avatar",3,"headOnly","direction","figure"],[1,"ingognito"],[1,"kutu-extraprice"],[1,"icon","icon-currency--1","scale-0-75",2,"margin","1px","float","right"],[1,"renk-kutu",3,"disabled","ngStyle","click"],[1,"koyu-tamekran"],["id","corelo-ha"],["id","coreloha-drag"],[1,"cha-baslik"],[1,"chabox"],[1,"frankbaba"],[1,"cha-text-box"],[1,"cha-text"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",3),i.nc("click",function(){return e.hide()}),i.cc(),i.cc(),i.dc(6,"div",4),i.dc(7,"div",5),i.dc(8,"input",6),i.nc("ngModelChange",function(t){return e.receiverName=t}),i.rc(9,"translate"),i.cc(),i.cc(),i.dc(10,"div",7),i.Tc(11,LI,1,3,"div",8),i.Tc(12,PI,1,0,"div",9),i.dc(13,"textarea",10),i.nc("ngModelChange",function(t){return e.message=t}),i.cc(),i.cc(),i.dc(14,"label",11),i.dc(15,"p",12),i.Vc(16),i.rc(17,"translate"),i.cc(),i.dc(18,"input",13),i.nc("ngModelChange",function(t){return e.showFace=t})("change",function(t){return e.changeCheckbox(t)}),i.cc(),i.Zb(19,"span",14),i.cc(),i.dc(20,"div",15),i.Zb(21,"div",16),i.dc(22,"div",17),i.dc(23,"button",18),i.nc("click",function(){return e.handleButton("previous_box")}),i.Zb(24,"i",19),i.cc(),i.dc(25,"button",20),i.nc("click",function(){return e.handleButton("next_box")}),i.Zb(26,"i",21),i.cc(),i.dc(27,"div",22),i.dc(28,"p",23),i.Vc(29),i.cc(),i.Tc(30,FI,3,1,"p",24),i.cc(),i.cc(),i.dc(31,"div",25),i.dc(32,"button",26),i.nc("click",function(){return e.handleButton("previous_ribbon")}),i.Zb(33,"i",19),i.cc(),i.dc(34,"button",27),i.nc("click",function(){return e.handleButton("next_ribbon")}),i.Zb(35,"i",21),i.cc(),i.dc(36,"div",22),i.dc(37,"p",28),i.Vc(38),i.cc(),i.cc(),i.cc(),i.dc(39,"p",29),i.Vc(40),i.rc(41,"translate"),i.cc(),i.dc(42,"div",30),i.Tc(43,VI,1,4,"div",31),i.cc(),i.cc(),i.dc(44,"div",32),i.nc("click",function(){return e.handleButton("close")}),i.dc(45,"u"),i.Vc(46),i.rc(47,"translate"),i.cc(),i.cc(),i.dc(48,"div",33),i.dc(49,"div",34),i.nc("click",function(){return e.handleButton("give_gift")}),i.dc(50,"p",35),i.Vc(51),i.rc(52,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.Tc(53,BI,13,6,"div",36)),2&t&&(i.Kb(3),i.Wc(i.sc(4,22,"catalog.gift_wrapping.title")),i.Kb(5),i.yc("placeholder",i.sc(9,24,"catalog.gift_wrapping.receiver")),i.xc("ngModel",e.receiverName),i.Kb(3),i.xc("ngIf",e.showFace),i.Kb(1),i.xc("ngIf",!e.showFace),i.Kb(1),i.xc("ngModel",e.message),i.Kb(3),i.Wc(i.sc(17,26,"catalog.gift_wrapping.show_face.title")),i.Kb(2),i.xc("ngModel",e.showFace),i.Kb(3),i.xc("type","s")("spriteId",e.boxSpriteId)("extras",e.extras),i.Kb(8),i.Wc(e.boxText),i.Kb(1),i.xc("ngIf",e.priceText&&e.priceText.length>0),i.Kb(2),i.xc("disabled",e.isDefaultBox),i.Kb(2),i.xc("disabled",e.isDefaultBox),i.Kb(3),i.xc("ngClass",i.Bc(34,WI,e.isDefaultBox)),i.Kb(1),i.Wc(e.ribbonText),i.Kb(2),i.Wc(i.sc(41,28,"catalog.gift_wrapping.pick_color")),i.Kb(3),i.xc("ngForOf",e.colors),i.Kb(3),i.Wc(i.sc(47,30,"catalog.purchase_confirmation.cancel")),i.Kb(5),i.Wc(i.sc(52,32,"catalog.gift_wrapping.give_gift")),i.Kb(2),i.xc("ngIf",e.showUsernameErrorDialog))},directives:[Tr,Lr,rr.b,rr.l,rr.n,p.n,rr.a,ec,p.l,p.m,_a,p.o],pipes:[ln],encapsulation:2}),t})();function GI(t,e){if(1&t&&i.Zb(0,"nitro-catalog-navigation-item-component",3),2&t){const t=i.qc().$implicit;i.xc("catalogPage",t)}}function HI(t,e){if(1&t&&(i.bc(0),i.Tc(1,GI,1,1,"nitro-catalog-navigation-item-component",2),i.ac()),2&t){const t=e.$implicit;i.Kb(1),i.xc("ngIf",t.visible)}}let jI=(()=>{class t{constructor(t){this._catalogService=t,this.catalogPage=null}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Qo))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-catalog-navigation-set-component"]],inputs:{catalogPage:"catalogPage"},decls:2,vars:1,consts:[[1,"list-grouptest","list-group-flush"],[4,"ngFor","ngForOf"],[3,"catalogPage",4,"ngIf"],[3,"catalogPage"]],template:function(t,e){1&t&&(i.dc(0,"ul",0),i.Tc(1,HI,2,1,"ng-container",1),i.cc()),2&t&&(i.Kb(1),i.xc("ngForOf",e.catalogPage.children))},encapsulation:2}),t})();const zI=function(t,e){return{"list-menu-ac":t,"list-menu-kapat":e}};function YI(t,e){if(1&t&&i.Zb(0,"div",8),2&t){const t=i.qc();i.xc("ngClass",i.Cc(1,zI,!t.isToggled,t.isToggled))}}function qI(t,e){if(1&t&&i.Zb(0,"nitro-catalog-navigation-set-component",9),2&t){const t=i.qc();i.xc("catalogPage",t.catalogPage)}}const ZI=function(t){return{ctlgmenuactive:t}};let XI=(()=>{class t{constructor(t){this._catalogService=t,this.catalogPage=null}selectPage(){this.isActive&&this._catalogService.manuallyCollapsePage(this.catalogPage),this._catalogService.component&&this._catalogService.component.selectPage(this.catalogPage)}get activePage(){return this._catalogService.activePage}get activePageData(){return this._catalogService.activePageData}get isDescendant(){return this._catalogService.isDescendant(this.catalogPage,this.activePageData)}get isActive(){return this.catalogPage.pageId===(this.activePage&&this.activePage.pageId)||this.isDescendant}get isCollapsed(){return this._catalogService.manuallyCollapsed.indexOf(this.catalogPage)>=0}get isToggled(){return!this.isCollapsed&&!!this.isActive}get iconUrl(){return _.a.instance.getConfiguration("catalog.asset.icon.url").replace("%name%",(this.catalogPage.icon||0).toString())}get isInSearchView(){return this._catalogService.searchResults instanceof fo}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Qo))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-catalog-navigation-item-component"]],inputs:{catalogPage:"catalogPage"},decls:9,vars:7,consts:[[1,"nav-item"],[1,"cmenu-box","corelo-listitem",3,"ngClass","click"],[1,"menulist-pagebox"],[1,"list-menu-ico"],[1,"icon",3,"src"],[1,"list-menu-pagename"],["class","list-menu-ac",3,"ngClass",4,"ngIf"],[3,"catalogPage",4,"ngIf"],[1,"list-menu-ac",3,"ngClass"],[3,"catalogPage"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"li",1),i.nc("click",function(){return e.selectPage()}),i.dc(2,"div",2),i.dc(3,"div",3),i.Zb(4,"img",4),i.cc(),i.dc(5,"p",5),i.Vc(6),i.cc(),i.Tc(7,YI,1,4,"div",6),i.cc(),i.cc(),i.Tc(8,qI,1,1,"nitro-catalog-navigation-set-component",7),i.cc()),2&t&&(i.Kb(1),i.xc("ngClass",i.Bc(5,ZI,e.isActive)),i.Kb(3),i.xc("src",e.iconUrl,i.Mc),i.Kb(2),i.Wc(e.catalogPage.localization),i.Kb(1),i.xc("ngIf",!e.isInSearchView&&e.catalogPage.children&&e.catalogPage.children.length),i.Kb(1),i.xc("ngIf",!e.isInSearchView&&e.isToggled&&e.catalogPage.children&&e.catalogPage.children.length>0))},directives:[p.l,p.n,jI],encapsulation:2}),t})();const QI=["nitro-catalog-navigation-component",""];let JI=(()=>{class t{constructor(t){this._catalogService=t,this.searchControl=new rr.d}ngOnInit(){this.subscribe()}ngOnDestroy(){this.unsubscribe()}subscribe(){this.unsubscribe(),this._subscription=this.searchControl.valueChanges.pipe(Object(Ai.a)(),Object(Ci.a)(500)).subscribe(t=>this.search(t))}unsubscribe(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}search(t){if(!t||!t.length)return void this._catalogService.clearSearchResults();t=t.toLocaleLowerCase();const e=_.a.instance.sessionDataManager.getAllFurnitureData(this);if(!e)return;const s=[];for(const i of e){const e=this._catalogService.getOfferPages(i.purchaseOfferId),n=this._catalogService.getOfferPages(i.rentOfferId);if((e||n)&&-1!==[i.className,i.name,i.description].join(" ").toLocaleLowerCase().indexOf(t)&&(s.push(i),200===s.length))break}this._catalogService.component.handleSearchResults(s)}loadFurnitureData(){}get hasSearchResults(){return this._catalogService.activePage instanceof qo}get catalogPage(){return this._catalogService.component&&this._catalogService.component.activeTab||null}get searchResults(){return this._catalogService.searchResults}clearResults(){this._catalogService.clearSearchResults(),this.searchControl.setValue("")}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Qo))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-catalog-navigation-component",""]],attrs:QI,decls:6,vars:5,consts:[[1,"ara-bgbox"],["type","text",1,"catalog-ara",3,"placeholder","formControl"],[1,"catalog-menubox"],[1,"ctlg_menu-liste"],[3,"catalogPage"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Zb(1,"input",1),i.rc(2,"translate"),i.cc(),i.dc(3,"div",2),i.dc(4,"div",3),i.Zb(5,"nitro-catalog-navigation-set-component",4),i.cc(),i.cc()),2&t&&(i.Kb(1),i.yc("placeholder",i.sc(2,3,"catalog.search")),i.xc("formControl",e.searchControl),i.Kb(4),i.xc("catalogPage",e.searchResults||e.catalogPage))},directives:[rr.b,rr.l,rr.e,jI],pipes:[ln],encapsulation:2}),t})();const $I=["nitro-catalog-purchase-component",""];function tR(t,e){if(1&t){const t=i.ec();i.dc(0,"div",10),i.dc(1,"p",11),i.Vc(2),i.rc(3,"translate"),i.cc(),i.dc(4,"input",12),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().quantity=e}),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(2),i.Wc(i.sc(3,3,"catalog.bundlewidget.quantity")),i.Kb(2),i.xc("ngModel",t.quantity)("max",t.maxQuantity)}}function eR(t,e){if(1&t&&(i.dc(0,"div",13),i.dc(1,"p",14),i.Vc(2,"+"),i.cc(),i.dc(3,"p",15),i.Vc(4),i.cc(),i.dc(5,"div",16),i.Zb(6,"i"),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(4),i.Wc(t.costPoints),i.Kb(2),i.Nb("icon icon-currencybig-",t.pointsType,"")}}function sR(t,e){if(1&t&&(i.dc(0,"div",17),i.dc(1,"p",18),i.Vc(2),i.cc(),i.Zb(3,"div",19),i.cc()),2&t){const t=i.qc();i.Kb(2),i.Wc(t.costCredits)}}const iR=function(t,e){return{"flex-column":t,"justify-content-between":e}},nR=function(t){return[t]};let rR=(()=>{class t{constructor(t){this._catalogService=t,this.activePage=null,this.activeOffer=null,this.quantityEnabled=!1,this.vertical=!1,this.quantity=1,this.forcedExtra=null}ngOnChanges(t){if(!t.activeOffer)return;const e=t.activeOffer.currentValue;e&&e!==t.activeOffer.previousValue&&this.resetOffer()}resetOffer(){this.quantity=1}purchase(t=!1){this._catalogService.component&&this._catalogService.component.confirmPurchase(this.activePage,this.activeOffer,this.quantity,this.extra,t)}increase(){this.quantity>=this.maxQuantity||this.quantity++}decrease(){this.quantity--,this.quantity<1&&(this.quantity=1)}get costCredits(){return this.activeOffer.priceCredits*this.quantity}get costPoints(){return this.activeOffer.priceActivityPoints*this.quantity}get pointsType(){return this.activeOffer.priceActivityPointsType}get extra(){return this.forcedExtra?this.forcedExtra:this.activeOffer.products[0]&&this.activeOffer.products[0].extraParam}get maxQuantity(){return 99}get isGiftable(){return this.activeOffer.giftable}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Qo))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-catalog-purchase-component",""]],inputs:{activePage:"activePage",activeOffer:"activeOffer",quantityEnabled:"quantityEnabled",vertical:"vertical",forcedExtra:"forcedExtra"},features:[i.Ib],attrs:$I,decls:16,vars:22,consts:[[1,"mobi-purchase-box",3,"ngClass"],["class","mobi-adet-box",4,"ngIf"],[1,"mobi-altfiyat-box",3,"ngClass"],[1,"mobifiyat-text"],["class","mdb-fbox_bottom mobi-fiyat-dia",4,"ngIf"],["class","mdb-fbox_bottom mobi-fiyat-cc",4,"ngIf"],[1,"mobi-hediye-box",3,"click"],[1,"mobigift-text"],[1,"mobi-buy-box",3,"ngClass","click"],[1,"mobibuy-text"],[1,"mobi-adet-box"],[1,"mobiadet-text"],["type","number","min","1",1,"mobiadet",3,"ngModel","max","ngModelChange"],[1,"mdb-fbox_bottom","mobi-fiyat-dia"],[1,"plusprice"],[1,"mobi-mapfbox-fiyat-text"],[1,"mobi-fiyat-birimico",2,"margin-left","3px"],[1,"mdb-fbox_bottom","mobi-fiyat-cc"],[1,"mobi-mapfbox-fiyat-text",2,"padding-right","5px"],[1,"mobi-fiyat-birimico",2,"background-image","url(/assets/images/catalog/bigcc.png)","height","20px","margin-top","3px","margin-left","11px","margin-right","2px"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Tc(1,tR,5,5,"div",1),i.dc(2,"div",2),i.dc(3,"p",3),i.Vc(4),i.rc(5,"translate"),i.cc(),i.Tc(6,eR,7,4,"div",4),i.Tc(7,sR,4,1,"div",5),i.cc(),i.dc(8,"div",6),i.nc("click",function(){return e.purchase(!0)}),i.dc(9,"p",7),i.Vc(10),i.rc(11,"translate"),i.cc(),i.cc(),i.dc(12,"div",8),i.nc("click",function(){return e.purchase()}),i.dc(13,"p",9),i.Vc(14),i.rc(15,"translate"),i.cc(),i.cc(),i.cc()),2&t&&(i.xc("ngClass",i.Cc(15,iR,e.vertical,e.quantityEnabled)),i.Kb(1),i.xc("ngIf",e.quantityEnabled),i.Kb(1),i.xc("ngClass",i.Bc(18,nR,"")),i.Kb(2),i.Wc(i.sc(5,9,"catalog.bundlewidget.price")),i.Kb(2),i.xc("ngIf",e.costPoints),i.Kb(1),i.xc("ngIf",e.costCredits),i.Kb(3),i.Wc(i.sc(11,11,"catalog.purchase_confirmation.gift")),i.Kb(2),i.xc("ngClass",i.Bc(20,nR,e.vertical?"flex-column":"")),i.Kb(2),i.Wc(i.sc(15,13,"buy")))},directives:[p.l,p.n,rr.p,rr.b,rr.l,rr.n],pipes:[ln],encapsulation:2}),t})(),aR=(()=>{class t{constructor(t){this._catalogService=t,this.localization=null,this.voucherCode=""}ngOnInit(){}redeem(){this._catalogService.redeemVoucher(this.voucherCode),this.voucherCode=""}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Qo))},t.\u0275cmp=i.Sb({type:t,selectors:[["redeem-voucher-component"]],inputs:{localization:"localization"},decls:8,vars:5,consts:[[1,"fiskodu_box"],[1,"fiskodu-aciklama"],[1,"fis-kod",3,"ngModel","ngModelChange"],[1,"fis-bozdur_box",3,"click"],[1,"fbozdur-butontext"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"p",1),i.Vc(2),i.cc(),i.dc(3,"input",2),i.nc("ngModelChange",function(t){return e.voucherCode=t}),i.cc(),i.dc(4,"div",3),i.nc("click",function(){return e.redeem()}),i.dc(5,"p",4),i.Vc(6),i.rc(7,"translate"),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Wc(e.localization.texts[1]),i.Kb(1),i.xc("ngModel",e.voucherCode),i.Kb(3),i.Wc(i.sc(7,3,"redeem")))},directives:[rr.b,rr.l,rr.n],pipes:[ln],encapsulation:2}),t})();const oR=["previewImage"],cR=["nitro-room-preview-component",""];let hR=(()=>{class t{constructor(t,e){this._elementRef=t,this.ngZone=e,this.roomPreviewer=null,this.width=1,this.height=1,this.model=null,this.wallHeight=-1,this.modelScale=!0,this.renderingCanvas=null,this.displayObject=null,this.imageUrl=null,this.isRunning=!1,this.onClick=this.onClick.bind(this)}ngOnChanges(t){if(t.model){const e=t.model.previousValue,s=t.model.currentValue;s&&s!==e&&this.updateModel()}if(t.wallHeight){const e=t.wallHeight.previousValue,s=t.wallHeight.currentValue;s&&s!==e&&this.updateModel()}}ngOnDestroy(){this.stop()}ngAfterViewInit(){if(this.roomPreviewer){if(1===this.width&&(this.width=Math.trunc(this.previewImageElement.offsetWidth)),1===this.height&&(this.height=Math.trunc(this.previewImageElement.offsetHeight)),this.previewImageElement.style.minWidth=this.width+"px",this.previewImageElement.style.minHeight=this.height+"px",this.roomPreviewer){let t=document.defaultView.getComputedStyle(this.previewImageElement,null).backgroundColor;t=Y.a.rgbStringToHex(t),t=t.replace("#","0x"),this.roomPreviewer.backgroundColor=parseInt(t,16),this.model&&this.updateModel(),this.displayObject=this.roomPreviewer.getRoomCanvas(this.width,this.height),this.renderingCanvas=this.roomPreviewer.getRenderingCanvas()}this.start()}}start(){this.isRunning||(this.ngZone.runOutsideAngular(()=>{this.previewImageElement.addEventListener("click",this.onClick),_.a.instance.ticker.add(this.update,this)}),this.isRunning=!0)}stop(){this.isRunning&&(this.ngZone.runOutsideAngular(()=>{this.previewImageElement.removeEventListener("click",this.onClick),_.a.instance.ticker.remove(this.update,this)}),this.isRunning=!1)}update(t){if(this.roomPreviewer&&this.renderingCanvas&&this.displayObject&&(this.roomPreviewer.updatePreviewRoomView(),this.renderingCanvas.canvasUpdated)){const t=_.a.instance.renderer.extract.base64(this.displayObject);this.previewImageElement.style.backgroundImage=`url(${t})`}}onClick(t){t&&this.isRunning&&this.roomPreviewer&&(t.shiftKey?this.roomPreviewer.changeRoomObjectDirection():this.roomPreviewer.changeRoomObjectState())}updateModel(){this.roomPreviewer&&this.roomPreviewer.updatePreviewModel(this.model,this.wallHeight,this.modelScale)}get previewImageElement(){return this.previewImage&&this.previewImage.nativeElement||null}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.p),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-room-preview-component",""]],viewQuery:function(t,e){if(1&t&&i.bd(oR,1),2&t){let t;i.Gc(t=i.oc())&&(e.previewImage=t.first)}},inputs:{roomPreviewer:"roomPreviewer",width:"width",height:"height",model:"model",wallHeight:"wallHeight",modelScale:"modelScale"},features:[i.Ib],attrs:cR,decls:2,vars:0,consts:[[1,"room-preview-image"],["previewImage",""]],template:function(t,e){1&t&&i.Zb(0,"div",0,1)},encapsulation:2}),t})(),lR=(()=>{class t{constructor(t){this.elementRef=t,this.figure="",this.gender="M",this.headOnly=!1,this.direction=0,this.scale=1,this.asBackground=!1,this._avatarImageCache=new Bs.a,this.avatarUrl=null,this.disposed=!1,this.needsUpdate=!0}ngOnInit(){this.needsUpdate&&this.buildAvatar()}ngOnChanges(t){const e=t.figure;e&&e.previousValue!==e.currentValue&&(this.needsUpdate=!0);const s=t.gender;s&&s.previousValue!==s.currentValue&&(this.needsUpdate=!0);const i=t.headOnly;i&&i.previousValue!==i.currentValue&&(this.needsUpdate=!0);const n=t.direction;n&&n.previousValue!==n.currentValue&&(this.needsUpdate=!0),this.needsUpdate&&this.buildAvatar()}dispose(){}resetFigure(t){this._avatarImageCache.remove(this.getAvatarBuildString()),this.buildAvatar()}buildAvatar(){this.needsUpdate=!1;const t=this.getUserImageUrl();if(!t||!t.length)return;const e=this.elementRef.nativeElement;if(e)if(this.asBackground)e.style.backgroundImage=`url(${t})`,e.style.backgroundPositionY="-31px";else{const s=e.getElementsByClassName("avatar-image");let i=s.length;for(;i<0;)s[i].remove(),i--;const n=document.createElement("img");n.className="avatar-image scale-"+this.scale,n.src=t}}getUserImageUrl(){const t=this.getAvatarBuildString();let e=this._avatarImageCache.getValue(t);if(!e){const s=_.a.instance.avatar.createAvatarImage(this.figure,Rt.a.LARGE,this.gender,this,null);if(s){let t=Tt.a.FULL;this.headOnly&&(t=Tt.a.HEAD),s.setDirection(t,this.direction);const i=s.getCroppedImage(t);i&&(e=i.src),s.dispose()}e&&e.length&&this.putInCache(t,e)}return e}putInCache(e,s){this._avatarImageCache.length===t.MAX_CACHE_SIZE&&this._avatarImageCache.remove(this._avatarImageCache.getKey(0)),this._avatarImageCache.add(e,s)}getAvatarBuildString(){return`${this.figure}:${this.gender}:${this.direction}:${this.headOnly}`}}return t.MAX_CACHE_SIZE=10,t.\u0275fac=function(e){return new(e||t)(i.Yb(i.p))},t.\u0275dir=i.Tb({type:t,selectors:[["","avatar-image",""]],inputs:{figure:"figure",gender:"gender",headOnly:"headOnly",direction:"direction",scale:"scale",asBackground:"asBackground"},features:[i.Ib]}),t})(),uR=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[Qo],imports:[[Yb]]}),t})();i.Nc(Po,[p.n,ha,hR,p.m,p.l,p.o,rR],[Qc,ln]),i.Nc(Hd,[p.n,p.o,aR],[]),i.Nc(Hg,[p.n,ha,hR,p.m,p.l,lR,rR],[]),i.Nc(Ig,[p.n,hR,p.l,p.m,p.o,rR],[ln]),i.Nc(sg,[p.n,ha,Gc,hR,p.m,p.l,p.o,rr.t,rr.l,rr.n,rr.o,rr.v,rR],[ln]),i.Nc(dm,[p.n,Tr,Lr,p.m,p.l,p.o,JI,DI,xI,RI,KI],[ln]),i.Nc(jI,[p.m,p.n,XI],[]),i.Nc(zo,[p.n,ha,hR,p.m,p.o,rR],[]);let _R=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[js],imports:[[Yb]]}),t})();var dR=s("4k6Q");const gR=["nitro-friendlist-friends-list-component",""];function mR(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"div",3),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().selectThread(s)}),i.Zb(3,"div",4),i.dc(4,"p",5),i.Vc(5),i.cc(),i.dc(6,"p",6),i.Vc(7,"Start a chat with"),i.cc(),i.cc(),i.dc(8,"div",7),i.dc(9,"div",8),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().removeFriend(s)}),i.cc(),i.dc(10,"div",9),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().openFriendProfile(s)}),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=e.$implicit;i.Kb(5),i.Wc(t.name)}}let pR=(()=>{class t{constructor(t,e){this._friendListService=t,this._ngZone=e,this.threadSelector=null,this.onlineOnly=!1}selectThread(t){if(!t)return;const e=this._friendListService.getMessageThread(t.id);e&&this.threadSelector&&this.threadSelector(e)}removeFriend(t){t&&(_.a.instance.communication.connection.send(new dR.a(t.id)),this._friendListService.friends.delete(t.id))}openFriendProfile(t){t&&_.a.instance.communication.connection.send(new yu.a(t.id))}get friends(){const t=Array.from(this._friendListService.friends.values());return this.onlineOnly?t.filter(t=>t.online):t}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Hs),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-friendlist-friends-list-component",""]],inputs:{threadSelector:"threadSelector",onlineOnly:"onlineOnly"},attrs:gR,decls:1,vars:1,consts:[["class","fbuttonbox",4,"ngFor","ngForOf"],[1,"fbuttonbox"],[1,"fb-username-box"],[1,"username-ad",3,"click"],[1,"kullanicionline"],[1,"message-kullaniciad"],[1,"startchatdesc"],[1,"kullanicibuton"],[1,"kullanici-action-button","sil",3,"click"],[1,"kullanici-action-button","profil",3,"click"]],template:function(t,e){1&t&&i.Tc(0,mR,11,1,"div",0),2&t&&i.xc("ngForOf",e.friends)},directives:[p.m],encapsulation:2}),t})();const fR=["nitro-friendlist-requests-list-component",""];function ER(t,e){if(1&t){const t=i.ec();i.bc(0),i.dc(1,"div",3),i.dc(2,"div",4),i.dc(3,"div",5),i.nc("click",function(){i.Kc(t);const e=i.qc(2);return e.selectThread(e.friend)}),i.Zb(4,"div",6),i.dc(5,"p",7),i.Vc(6),i.cc(),i.dc(7,"p",8),i.Vc(8,"Sent you a friend request"),i.cc(),i.cc(),i.dc(9,"div",9),i.dc(10,"div",10),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc(2).declineRequest(s.value)}),i.cc(),i.dc(11,"div",11),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc(2).acceptRequest(s.value)}),i.cc(),i.cc(),i.cc(),i.cc(),i.ac()}if(2&t){const t=e.$implicit;i.Kb(6),i.Xc("(",t.value.requesterName,")")}}function SR(t,e){if(1&t){const t=i.ec();i.bc(0),i.dc(1,"button",1),i.nc("click",function(){return i.Kc(t),i.qc().declineAllRequests()}),i.Vc(2),i.rc(3,"translate"),i.cc(),i.Tc(4,ER,12,1,"ng-container",2),i.rc(5,"keyvalue"),i.ac()}if(2&t){const t=i.qc();i.Kb(2),i.Wc(i.sc(3,2,"friendbar.requests.discard")),i.Kb(2),i.xc("ngForOf",i.sc(5,4,t.requests))}}let vR=(()=>{class t{constructor(t){this._friendListService=t}acceptRequest(t){t&&this._friendListService.acceptFriendRequest(t)}declineRequest(t){t&&this._friendListService.removeFriendRequest(t)}declineAllRequests(){this._friendListService.removeAllFriendRequests()}get requests(){return this._friendListService.requests}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Hs))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-friendlist-requests-list-component",""]],attrs:fR,decls:1,vars:1,consts:[[4,"ngIf"],["type","button",1,"all-reddet",3,"click"],[4,"ngFor","ngForOf"],[1,"fbuttonbox"],[1,"fb-username-box"],[1,"username-ad",3,"click"],[1,"kullanicionline"],[1,"message-kullaniciad"],[1,"startchatdesc"],[1,"kullanicibuton"],[1,"kullanici-action-button","sil",3,"click"],[1,"kullanici-action-button","onay",3,"click"]],template:function(t,e){1&t&&i.Tc(0,SR,6,6,"ng-container",0),2&t&&i.xc("ngIf",e.requests.size>0)},directives:[p.n,p.m],pipes:[ln,p.h],encapsulation:2}),t})();const bR=["nitro-friendlist-friends-viewer-component",""];function IR(t,e){if(1&t&&(i.dc(0,"div",11),i.Vc(1),i.cc()),2&t){const t=i.qc();i.Kb(1),i.Wc(t.totalFriendRequests)}}function RR(t,e){if(1&t&&i.Zb(0,"div",12),2&t){const t=i.qc();i.xc("threadSelector",t.threadSelector)("onlineOnly",t.onlineOnly)}}function TR(t,e){1&t&&i.Zb(0,"div",13)}const OR=function(t){return{"friendsbutton-active":t}};let yR=(()=>{class t{constructor(t,e){this._friendListService=t,this._ngZone=e,this.threadSelector=null,this._requestsShowing=!1,this._friendsShowing=!0,this._onlineOnly=!0}showOnlineFriends(){this.showFriends(),this._onlineOnly=!0}showFriends(){this._requestsShowing=!1,this._friendsShowing=!0,this._onlineOnly=!1}showRequests(){this._requestsShowing=!0,this._friendsShowing=!1,this._onlineOnly=!1}get requestsShowing(){return this._requestsShowing}get friendsShowing(){return this._friendsShowing}get onlineOnly(){return this._onlineOnly}get totalFriendRequests(){return this._friendListService.requests.size}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Hs),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-friendlist-friends-viewer-component",""]],inputs:{threadSelector:"threadSelector"},attrs:bR,decls:23,vars:24,consts:[[1,"friendsbuttongrup"],[1,"friendsbutton",3,"ngClass","click"],[1,"fbuttontxt"],["class","bildirim",4,"ngIf"],[1,"friendsbutton","fbsearch"],[1,"fbuttontxt","fbsearchcolor"],[1,"friendsbuttongrup-hr"],[1,"d-flex","w-100"],[1,"fbutton-list"],["nitro-friendlist-friends-list-component","","class","fb-buttonbox",3,"threadSelector","onlineOnly",4,"ngIf"],["nitro-friendlist-requests-list-component","","class","fb-buttonbox",4,"ngIf"],[1,"bildirim"],["nitro-friendlist-friends-list-component","",1,"fb-buttonbox",3,"threadSelector","onlineOnly"],["nitro-friendlist-requests-list-component","",1,"fb-buttonbox"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.nc("click",function(){return e.showOnlineFriends()}),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.cc(),i.dc(5,"div",1),i.nc("click",function(){return e.showFriends()}),i.dc(6,"p",2),i.Vc(7),i.rc(8,"translate"),i.cc(),i.cc(),i.dc(9,"div",1),i.nc("click",function(){return e.showRequests()}),i.dc(10,"p",2),i.Vc(11),i.rc(12,"translate"),i.cc(),i.Tc(13,IR,2,1,"div",3),i.cc(),i.dc(14,"div",4),i.dc(15,"p",5),i.Vc(16),i.rc(17,"translate"),i.cc(),i.cc(),i.cc(),i.Zb(18,"div",6),i.dc(19,"div",7),i.dc(20,"div",8),i.Tc(21,RR,1,2,"div",9),i.Tc(22,TR,1,0,"div",10),i.cc(),i.cc()),2&t&&(i.Kb(1),i.xc("ngClass",i.Bc(18,OR,e.friendsShowing&&e.onlineOnly)),i.Kb(2),i.Wc(i.sc(4,10,"friendlist.online")),i.Kb(2),i.xc("ngClass",i.Bc(20,OR,e.friendsShowing&&!e.onlineOnly)),i.Kb(2),i.Wc(i.sc(8,12,"friendlist.friends.all")),i.Kb(2),i.xc("ngClass",i.Bc(22,OR,e.requestsShowing)),i.Kb(2),i.Wc(i.sc(12,14,"friendbar.requests.title")),i.Kb(2),i.xc("ngIf",e.totalFriendRequests>0),i.Kb(3),i.Wc(i.sc(17,16,"generic.search")),i.Kb(5),i.xc("ngIf",e.friendsShowing),i.Kb(1),i.xc("ngIf",e.requestsShowing))},directives:[p.l,p.n,pR,vR],pipes:[ln],encapsulation:2}),t})();const CR=["nitro-friendlist-thread-list-component",""],AR=function(t){return{"active-chat-menu-box-active":t}};function MR(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().selectThread(s)}),i.dc(1,"div",2),i.Zb(2,"img",3),i.Zb(3,"div",4),i.cc(),i.dc(4,"div",5),i.Vc(5),i.cc(),i.cc()}if(2&t){const t=e.$implicit,s=i.qc();i.xc("ngClass",i.Bc(2,AR,s.currentThread===t)),i.Kb(5),i.Wc(t.participant.name)}}let wR=(()=>{class t{constructor(t,e){this._friendListService=t,this._ngZone=e,this.currentThread=null,this.threadSelector=null}selectThread(t){t&&this.threadSelector&&this.threadSelector(t)}get threads(){const t=Array.from(this._friendListService.threads.values());return t.sort((t,e)=>e.lastUpdated-t.lastUpdated),t}}return t.THREAD_SELECTED="FLTLC_THREAD_SELECTED",t.\u0275fac=function(e){return new(e||t)(i.Yb(Hs),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-friendlist-thread-list-component",""]],inputs:{currentThread:"currentThread",threadSelector:"threadSelector"},attrs:CR,decls:1,vars:1,consts:[["class","active-chat-menu-box",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"active-chat-menu-box",3,"ngClass","click"],[1,"drcmsg-activechat_user-avatar"],["src","https://www.habbo.com/habbo-imaging/avatarimage?figure=hd-180-1.ch-255-66.lg-280-110.sh-305-62.ha-1012-110.hr-828-61&action=std&gesture=std&direction=2&head_direction=2&size=s&headonly=1&img_format=png",1,"drcmsg-uavatar-position"],[1,"user-onof-status","online"],[1,"drcmsg-username"]],template:function(t,e){1&t&&i.Tc(0,MR,6,4,"div",0),2&t&&i.xc("ngForOf",e.threads)},directives:[p.m,p.l],encapsulation:2}),t})();var DR=s("3E0/"),NR=s("Fcb+"),UR=s("jNJ0"),xR=s("FV0X"),LR=s("/52j");const PR=["threadScroller"],FR=["nitro-friendlist-thread-viewer-component",""];function kR(t,e){if(1&t){const t=i.ec();i.dc(0,"div",25),i.nc("click",function(){return i.Kc(t),i.qc().followParticipant()}),i.cc()}}function VR(t,e){if(1&t){const t=i.ec();i.dc(0,"div",26),i.nc("click",function(){i.Kc(t);const s=e.index;return i.qc().changeRelation(s)}),i.dc(1,"p",27),i.Vc(2),i.cc(),i.cc()}if(2&t){const t=e.$implicit;i.Kb(2),i.Wc(t)}}const BR=function(t){return[t]};function WR(t,e){if(1&t&&(i.dc(0,"div",6),i.dc(1,"div",28),i.dc(2,"div",29),i.Vc(3," username "),i.cc(),i.dc(4,"div",30),i.Vc(5," message-time"),i.cc(),i.cc(),i.Zb(6,"div",6),i.dc(7,"div",31),i.Vc(8),i.cc(),i.cc()),2&t){const t=e.$implicit,s=i.qc();i.xc("ngClass",i.Bc(7,BR,t.senderId===s.participant.id?"chat-message-box":"gonderilen-chat-message-box")),i.Kb(1),i.xc("ngClass",i.Bc(9,BR,t.senderId===s.participant.id?"sendmsg-user-information":"gonderilen-sendmsg-user-information")),i.Kb(1),i.xc("ngClass",i.Bc(11,BR,t.senderId===s.participant.id?"sendmsg-username":"gonderilen-sendmsg-username")),i.Kb(2),i.xc("ngClass",i.Bc(13,BR,t.senderId===s.participant.id?"message-time":"gonderilen-message-time")),i.Kb(2),i.xc("ngClass",i.Bc(15,BR,t.senderId===s.participant.id?"leftok":"rightok")),i.Kb(1),i.xc("ngClass",i.Bc(17,BR,t.senderId===s.participant.id?"sendmsg-chat-box":"gonderilen-sendmsg-chat-box")),i.Kb(1),i.Xc(" ",t.message,"")}}let KR=(()=>{class t{constructor(t,e,s){this._friendListService=t,this._settingsService=e,this._ngZone=s,this.thread=null,this._subscription=null}ngOnChanges(t){const e=t.thread.previousValue,s=t.thread.currentValue;s&&s!==e?this.prepareThread():s||s===e||this.unsubscribe()}ngOnDestroy(){this.unsubscribe()}ngAfterViewInit(){this.scrollToBottom()}unsubscribe(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}prepareThread(){this.unsubscribe(),this._subscription=this.thread.emitter.asObservable().pipe(Object(DR.a)(1)).subscribe(t=>{switch(t){case Vs.MESSAGE_RECEIVED:return void this.messageReceived()}})}messageReceived(){this.scrollToBottom()}sendMessage(t){t&&t.length&&(this._ngZone.run(()=>{this.thread.insertChat(_.a.instance.sessionDataManager.userId,t,0,null),this.thread.setRead()}),_.a.instance.communication.connection.send(new UR.a(this.participant.id,t)))}changeRelation(t){this.participant&&-1!==LR.a.RELATIONSHIP_TYPES.indexOf(t)&&_.a.instance.communication.connection.send(new xR.a(this.participant.id,t))}followParticipant(){this.participant&&(this._settingsService.toggleFriendList(),_.a.instance.communication.connection.send(new NR.a(this.participant.id)))}onKeyDownEvent(t){if(!t)return;const e=t.target;if(e)switch(t.key){case"Enter":return this.sendMessage(e.value),void(e.value="")}}scrollToBottom(){this.threadScroller&&this.threadScroller.directiveRef.scrollToBottom(0,200)}get participant(){return this.thread.participant}get chats(){return this.thread.chats}get relations(){return LR.a.RELATIONSHIP_NAMES}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Hs),i.Yb(m),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-friendlist-thread-viewer-component",""]],viewQuery:function(t,e){if(1&t&&i.bd(PR,1),2&t){let t;i.Gc(t=i.oc())&&(e.threadScroller=t.first)}},inputs:{thread:"thread"},features:[i.Ib],attrs:FR,decls:34,vars:21,consts:[[1,"messenger-chat-box"],[1,"chatted-user"],[1,"message-user-info"],[1,"avatar-box"],["nitro-avatar-image","",1,"drcmsg-uavatar-position",2,"margin","-39px -31px",3,"headOnly","figure","direction"],[1,"messenger-info_chated-username"],[3,"ngClass"],[1,"messenger-info_chated-user-status"],[1,"message-action"],["class","goroom-user",3,"click",4,"ngIf"],[1,"user-ticket","disabled"],[1,"uticket_txt"],["ngbDropdown","",1,"user-ticket"],["ngbDropdownToggle",""],["ngbDropdownMenu","",1,"user-friendship-status"],["class","fs-box","ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],[1,"fs-bottom"],[1,"messenger-chat"],[1,"all-message-list"],["threadScroller",""],[3,"ngClass",4,"ngFor","ngForOf"],[1,"write-message"],["placeholder","Aa..",1,"send-message",3,"keydown.enter"],[1,"send-button"],[1,"send-txt"],[1,"goroom-user",3,"click"],["ngbDropdownItem","",1,"fs-box",3,"click"],[1,"activity-fs-txt"],[1,"sendmsg-user-information",3,"ngClass"],[1,"sendmsg-username",3,"ngClass"],[1,"message-time",3,"ngClass"],[1,"sendmsg-chat-box",3,"ngClass"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"div",2),i.dc(3,"div",3),i.Zb(4,"div",4),i.cc(),i.dc(5,"div",5),i.Vc(6),i.Zb(7,"div",6),i.cc(),i.dc(8,"div",7),i.Vc(9),i.cc(),i.cc(),i.dc(10,"div",8),i.Tc(11,kR,1,0,"div",9),i.dc(12,"div",10),i.dc(13,"p",11),i.Vc(14),i.rc(15,"translate"),i.cc(),i.cc(),i.dc(16,"div",12),i.dc(17,"div",13),i.dc(18,"p",11),i.Vc(19),i.rc(20,"translate"),i.cc(),i.cc(),i.dc(21,"div",14),i.Tc(22,VR,3,1,"div",15),i.Zb(23,"div",16),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(24,"div",17),i.dc(25,"div",18,19),i.Tc(27,WR,9,19,"div",20),i.cc(),i.cc(),i.dc(28,"div",21),i.dc(29,"input",22),i.nc("keydown.enter",function(t){return e.onKeyDownEvent(t)}),i.cc(),i.dc(30,"div",23),i.dc(31,"p",24),i.Vc(32),i.rc(33,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(4),i.xc("headOnly",1)("figure",e.thread.participant.figure)("direction",2),i.Kb(2),i.Xc(" ",e.participant.name," "),i.Kb(1),i.xc("ngClass",i.Bc(19,BR,e.participant.online?"chatonline":"chatoffline")),i.Kb(2),i.Wc(e.participant.motto),i.Kb(2),i.xc("ngIf",e.participant.online),i.Kb(3),i.Wc(i.sc(15,13,"guide.help.common.report.link")),i.Kb(5),i.Yc("",i.sc(20,15,"extendedprofile.relstatus")," ",e.relations[e.thread.participant.relationshipStatus],""),i.Kb(3),i.xc("ngForOf",e.relations),i.Kb(5),i.xc("ngForOf",e.chats),i.Kb(5),i.Wc(i.sc(33,17,"connection.password.reminder")))},directives:[_a,p.l,p.n,Mu.b,Mu.f,Mu.d,p.m,Mu.c],pipes:[ln],encapsulation:2}),t})(),GR=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[Hs],imports:[[Yb]]}),t})();i.Nc(Pd,[p.n,Tr,Lr,p.l,wR,yR,KR],[ln]);const HR=["nitro-group-image-selector-component",""],jR=function(t){return{gactive:t}};function zR(t,e){if(1&t){const t=i.ec();i.dc(0,"button",7),i.nc("click",function(){return i.Kc(t),i.qc().selectPart(0)}),i.Zb(1,"img",8),i.cc()}if(2&t){const t=i.qc();i.xc("ngClass",i.Bc(1,jR,0===t.part.key))}}function YR(t,e){if(1&t){const t=i.ec();i.dc(0,"button",7),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().selectPart(s.key)}),i.Zb(1,"nitro-badge",9),i.cc()}if(2&t){const t=e.$implicit,s=i.qc();i.xc("ngClass",i.Bc(3,jR,s.part.key===t.key)),i.Kb(1),i.xc("badge",s.getBadgeCode(t.key))("isGroup",!0)}}let qR=(()=>{class t{constructor(){this.onSelect=new i.r}getBadgeCode(t){return(this.part.isBase?"b":"s")+(t<100?"0":"")+(t<10?"0":"")+t+(this.part.color<10?"0"+this.part.color:this.part.color)+4}selectPart(t){this.onSelect.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-group-image-selector-component",""]],inputs:{items:"items",part:"part"},outputs:{onSelect:"onSelect"},attrs:HR,decls:10,vars:7,consts:[[1,"groupbadge_position-head-text"],[1,"grouptext-5"],[1,"group-image-secimi"],[1,"groupwhitebg"],[1,"group-image-list"],["class","groupimage",3,"ngClass","click",4,"ngIf"],["class","groupimage",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"groupimage",3,"ngClass","click"],["src","/assets/images/avatareditor/cross.png"],[3,"badge","isGroup"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"p",1),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc(),i.dc(4,"div",2),i.dc(5,"div",3),i.dc(6,"div",4),i.Tc(7,zR,2,3,"button",5),i.Tc(8,YR,2,5,"button",6),i.rc(9,"keyvalue"),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Wc(i.sc(3,3,"group.edit.badge.pick.symbol")),i.Kb(5),i.xc("ngIf",!e.part.isBase),i.Kb(1),i.xc("ngForOf",i.sc(9,5,e.items)))},directives:[p.n,p.m,p.l,Gc],pipes:[ln,p.h],encapsulation:2}),t})();function ZR(t,e){if(1&t&&i.Zb(0,"nitro-badge",9),2&t){const t=i.qc().$implicit;i.xc("badge",t.value.code)("isGroup",!0)}}function XR(t,e){1&t&&i.Zb(0,"i",27)}const QR=function(t){return{display:t}};function JR(t,e){if(1&t){const t=i.ec();i.dc(0,"button",28),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().$implicit.value.position=s}),i.cc()}if(2&t){const t=e.$implicit,s=i.qc().$implicit;i.xc("ngStyle",i.Bc(2,QR,s.value.isBase?"none":"block"))("ngClass",s.value.position===t?"positionselect-act":"positionselect")}}const $R=function(t){return{backgroundColor:t}};function tT(t,e){if(1&t){const t=i.ec();i.dc(0,"button",29),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().$implicit.value.color=s.key}),i.cc()}if(2&t){const t=e.$implicit,s=i.qc().$implicit;i.Pc(i.Bc(3,$R,"#"+t.value)),i.xc("ngClass",s.value.color===t.key?"colorselect-box_active":"colorselect-box")}}function eT(t,e){if(1&t){const t=i.ec();i.dc(0,"div",14),i.dc(1,"div",15),i.dc(2,"p",16),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"p",17),i.Vc(6),i.rc(7,"translate"),i.cc(),i.dc(8,"p",18),i.Vc(9),i.rc(10,"translate"),i.cc(),i.cc(),i.dc(11,"div",19),i.dc(12,"button",20),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc(2).openPartSelector(s.value)}),i.Tc(13,ZR,1,2,"nitro-badge",21),i.Tc(14,XR,1,0,"i",22),i.cc(),i.dc(15,"div",23),i.Tc(16,JR,1,4,"button",24),i.cc(),i.dc(17,"div",25),i.Tc(18,tT,1,5,"button",26),i.rc(19,"keyvalue"),i.cc(),i.cc(),i.cc()}if(2&t){const t=e.$implicit,s=i.qc(2);i.Kb(3),i.Wc(i.sc(4,7,"group.edit.badge.symbol")),i.Kb(3),i.Wc(i.sc(7,9,"group.edit.badge.position")),i.Kb(3),i.Wc(i.sc(10,11,"group.edit.badge.colors")),i.Kb(4),i.xc("ngIf",t.value.code),i.Kb(1),i.xc("ngIf",!t.value.code),i.Kb(2),i.xc("ngForOf",s.positions),i.Kb(2),i.xc("ngForOf",i.sc(19,13,s.badgePartColors))}}function sT(t,e){if(1&t&&(i.dc(0,"div"),i.Tc(1,eT,20,15,"div",13),i.rc(2,"keyvalue"),i.cc()),2&t){const t=i.qc();i.Kb(1),i.xc("ngForOf",i.sc(2,1,t.groupSettings.badgeParts))}}function iT(t,e){if(1&t){const t=i.ec();i.dc(0,"div",30),i.nc("onSelect",function(e){return i.Kc(t),i.qc().onPartSelected(e)}),i.cc()}if(2&t){const t=i.qc();i.xc("items",t.badgePartBeingSelected&&t.badgePartBeingSelected.isBase?t.badgeBases:t.badgeSymbols)("part",t.badgePartBeingSelected)}}let nT=(()=>{class t{constructor(t){this._groupsService=t,this._clear()}_clear(){this._badgeBases=new Map,this._badgeSymbols=new Map,this._badgePartColors=new Map,this._badgePartBeingSelected=null,this._selectorVisible=!1,this._positions=[];for(let t=0;t<9;t++)this._positions.push(t)}ngOnInit(){this._clear(),this.loadBadgeData()}loadBadgeData(){this._badgeBases=this._groupsService.badgeBases,this._badgeSymbols=this._groupsService.badgeSymbols,this._badgePartColors=this._groupsService.badgePartColors,this.setDefaultValues&&(this.groupSettings.getBadgePart(0).key=this._badgeSymbols.keys().next().value,this.groupSettings.setPartsColor(this._badgeSymbols.keys().next().value))}openPartSelector(t){this._badgePartBeingSelected=t,this._selectorVisible=!0}onPartSelected(t){this._badgePartBeingSelected.key=t,this._badgePartBeingSelected=null,this._selectorVisible=!1}get badgePartBeingSelected(){return this._badgePartBeingSelected}get selectorVisible(){return this._selectorVisible}get positions(){return this._positions}get badgeBases(){return this._badgeBases}get badgeSymbols(){return this._badgeSymbols}get badgePartColors(){return this._badgePartColors}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Bu))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-group-creator-tab-badge-component"]],inputs:{groupSettings:"groupSettings",setDefaultValues:"setDefaultValues"},outputs:{groupSettings:"groupSettings"},decls:19,vars:13,consts:[[1,"groupcreate-headerinfo"],["src","/assets/images/guilds/group_UI_badge.png",1,"grupcreate-img"],[1,"grup-bilgi-metinler"],[1,"grupcreate-baslik"],[1,"grupcreate-aciklama"],[1,"groupcreate-bodybox"],[1,"groupinfo-left"],[1,"grouptext-1"],[1,"group-badge-box"],[3,"badge","isGroup"],[1,"groupinfo-right"],[4,"ngIf"],["nitro-group-image-selector-component","",3,"items","part","onSelect",4,"ngIf"],["class","dxx",4,"ngFor","ngForOf"],[1,"dxx"],[1,"groupbadge_position-head-text"],[1,"grouptext-2"],[1,"grouptext-3"],[1,"grouptext-4"],[1,"group-badge-design"],[1,"group-badge-select",3,"click"],[3,"badge","isGroup",4,"ngIf"],["class","ekle",4,"ngIf"],[1,"group-position-select"],["class","positionselect",3,"ngStyle","ngClass","click",4,"ngFor","ngForOf"],[1,"group-badge-color-select"],["class","colorselect-box",3,"style","ngClass","click",4,"ngFor","ngForOf"],[1,"ekle"],[1,"positionselect",3,"ngStyle","ngClass","click"],[1,"colorselect-box",3,"ngClass","click"],["nitro-group-image-selector-component","",3,"items","part","onSelect"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Zb(1,"img",1),i.dc(2,"div",2),i.dc(3,"p",3),i.Vc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"p",4),i.Vc(7),i.rc(8,"translate"),i.cc(),i.cc(),i.cc(),i.dc(9,"div",5),i.dc(10,"div",6),i.dc(11,"p",7),i.Vc(12),i.rc(13,"translate"),i.cc(),i.dc(14,"div",8),i.Zb(15,"nitro-badge",9),i.cc(),i.cc(),i.dc(16,"div",10),i.Tc(17,sT,3,3,"div",11),i.Tc(18,iT,1,2,"div",12),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Wc(i.sc(5,7,"group.create.stepcaption.2")),i.Kb(3),i.Wc(i.sc(8,9,"group.create.stepdesc.2")),i.Kb(5),i.Wc(i.sc(13,11,"group.edit.badge.badge")),i.Kb(3),i.xc("badge",e.groupSettings.currentBadgeCode)("isGroup",!0),i.Kb(2),i.xc("ngIf",!e.selectorVisible),i.Kb(1),i.xc("ngIf",e.selectorVisible))},directives:[Gc,p.n,p.m,p.o,p.l,qR],pipes:[ln,p.h],encapsulation:2}),t})();const rT=function(t){return{backgroundColor:t}};function aT(t,e){if(1&t){const t=i.ec();i.dc(0,"button",19),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().groupSettings.colorA=s.key}),i.cc()}2&t&&i.Pc(i.Bc(2,rT,"#"+e.$implicit.value))}function oT(t,e){if(1&t){const t=i.ec();i.dc(0,"button",19),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().groupSettings.colorB=s.key}),i.cc()}2&t&&i.Pc(i.Bc(2,rT,"#"+e.$implicit.value))}let cT=(()=>{class t{constructor(t){this._groupsService=t}ngOnInit(){this.loadColorsData()}loadColorsData(){this._groupColorsA=this._groupsService.groupColorsA,this._groupColorsB=this._groupsService.groupColorsB,this.setDefaultValues&&(this.groupSettings.colorA=this._groupColorsA.keys().next().value,this.groupSettings.colorB=this._groupColorsB.keys().next().value)}get groupColorsA(){return this._groupColorsA}get groupColorsB(){return this._groupColorsB}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Bu))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-group-creator-tab-colors-component"]],inputs:{groupSettings:"groupSettings",setDefaultValues:"setDefaultValues"},outputs:{groupSettings:"groupSettings"},decls:33,vars:29,consts:[[1,"groupcreate-headerinfo"],["src","/assets/images/guilds/group_UI_colors.png",1,"grupcreate-img"],[1,"grup-bilgi-metinler"],[1,"grupcreate-baslik"],[1,"grupcreate-aciklama"],[1,"groupcreate-bodybox"],[1,"groupinfo-left"],[1,"grouptext-1"],[1,"group-color-view-box"],[1,"secilenrenk"],[1,"groupinfo-right"],[1,"groupcolor_position-head-text"],[1,"grouptext-6"],[1,"grouptext-7"],[1,"group-color1-design"],[1,"group-color-select"],["class","colorselect-box",3,"style","click",4,"ngFor","ngForOf"],[1,"group-color2-design"],[1,"group-color-select2"],[1,"colorselect-box",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Zb(1,"img",1),i.dc(2,"div",2),i.dc(3,"p",3),i.Vc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"p",4),i.Vc(7),i.rc(8,"translate"),i.cc(),i.cc(),i.cc(),i.dc(9,"div",5),i.dc(10,"div",6),i.dc(11,"p",7),i.Vc(12),i.rc(13,"translate"),i.cc(),i.dc(14,"div",8),i.Zb(15,"button",9),i.Zb(16,"button",9),i.cc(),i.cc(),i.dc(17,"div",10),i.dc(18,"div",11),i.dc(19,"p",12),i.Vc(20),i.rc(21,"translate"),i.cc(),i.dc(22,"p",13),i.Vc(23),i.rc(24,"translate"),i.cc(),i.cc(),i.dc(25,"div",14),i.dc(26,"div",15),i.Tc(27,aT,1,4,"button",16),i.rc(28,"keyvalue"),i.cc(),i.cc(),i.dc(29,"div",17),i.dc(30,"div",18),i.Tc(31,oT,1,4,"button",16),i.rc(32,"keyvalue"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Wc(i.sc(5,11,"group.create.stepcaption.3")),i.Kb(3),i.Wc(i.sc(8,13,"group.create.stepdesc.3")),i.Kb(5),i.Wc(i.sc(13,15,"group.edit.color.guild.color")),i.Kb(3),i.Pc(i.Bc(25,rT,"#"+e.groupColorsA.get(e.groupSettings.colorA))),i.Kb(1),i.Pc(i.Bc(27,rT,"#"+e.groupColorsB.get(e.groupSettings.colorB))),i.Kb(4),i.Wc(i.sc(21,17,"group.edit.color.primary.color")),i.Kb(3),i.Wc(i.sc(24,19,"group.edit.color.secondary.color")),i.Kb(4),i.xc("ngForOf",i.sc(28,21,e.groupColorsA)),i.Kb(4),i.xc("ngForOf",i.sc(32,23,e.groupColorsB)))},directives:[p.m],pipes:[ln,p.h],encapsulation:2}),t})();const hT=function(t){return{backgroundColor:t}};let lT=(()=>{class t{constructor(t){this._groupsService=t}ngOnInit(){this.loadColorsData()}loadColorsData(){this._groupColorsA=this._groupsService.groupColorsA,this._groupColorsB=this._groupsService.groupColorsB}get groupColorsA(){return this._groupColorsA}get groupColorsB(){return this._groupColorsB}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Bu))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-group-creator-tab-confirmation-component"]],inputs:{groupSettings:"groupSettings",groupCost:"groupCost"},decls:34,vars:32,consts:[[1,"groupcreate-headerinfo"],["src","/assets/images/guilds/group_UI_ready.png",1,"grupcreate-img"],[1,"grup-bilgi-metinler"],[1,"grupcreate-baslik"],[1,"grupcreate-aciklama"],[1,"groupcreate-bodybox"],[1,"groupinfo-left"],[1,"grouptext-1"],[1,"group-badge-box"],[3,"badge","isGroup"],[1,"group-color-view-box"],[1,"secilenrenk"],[1,"groupinfo-right"],[1,"group-create-name"],[1,"group-create-desc"],[1,"group-create-desc",3,"innerHtml"],[1,"group-fiyat"],["src","/assets/images/guilds/gcreate_icon_credit.png",2,"margin","7px 7px","float","left"],[1,"group-fiyat-text"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Zb(1,"img",1),i.dc(2,"div",2),i.dc(3,"p",3),i.Vc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"p",4),i.Vc(7),i.rc(8,"translate"),i.cc(),i.cc(),i.cc(),i.dc(9,"div",5),i.dc(10,"div",6),i.dc(11,"p",7),i.Vc(12),i.rc(13,"translate"),i.cc(),i.dc(14,"div",8),i.Zb(15,"nitro-badge",9),i.cc(),i.dc(16,"p",7),i.Vc(17),i.rc(18,"translate"),i.cc(),i.dc(19,"div",10),i.Zb(20,"button",11),i.Zb(21,"button",11),i.cc(),i.cc(),i.cc(),i.dc(22,"div",12),i.dc(23,"p",13),i.Vc(24),i.cc(),i.dc(25,"p",14),i.Vc(26),i.cc(),i.Zb(27,"p",15),i.rc(28,"translate"),i.dc(29,"div",16),i.Zb(30,"img",17),i.dc(31,"p",18),i.Vc(32),i.rc(33,"translate"),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Wc(i.sc(5,14,"group.create.stepcaption.4")),i.Kb(3),i.Wc(i.sc(8,16,"group.create.stepdesc.4")),i.Kb(5),i.Wc(i.sc(13,18,"group.create.confirm.guildbadge")),i.Kb(3),i.xc("badge",e.groupSettings.currentBadgeCode)("isGroup",!0),i.Kb(2),i.Wc(i.sc(18,20,"group.create.confirm.guildcolors")),i.Kb(3),i.Pc(i.Bc(28,hT,"#"+e.groupColorsA.get(e.groupSettings.colorA))),i.Kb(1),i.Pc(i.Bc(30,hT,"#"+e.groupColorsB.get(e.groupSettings.colorB))),i.Kb(3),i.Wc(e.groupSettings.name),i.Kb(2),i.Wc(e.groupSettings.description),i.Kb(1),i.xc("innerHtml",i.sc(28,22,"group.create.confirm.info"),i.Lc),i.Kb(5),i.Wc(i.uc(33,24,"group.create.confirm.buyinfo","amount",e.groupCost)))},directives:[Gc],pipes:[ln],encapsulation:2}),t})();function uT(t,e){1&t&&(i.dc(0,"small",18),i.Vc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Wc(i.sc(2,1,"group.edit.error.no.name.or.room.selected")))}function _T(t,e){if(1&t&&(i.dc(0,"option",19),i.Vc(1),i.cc()),2&t){const t=e.$implicit;i.xc("value",t.key),i.Kb(1),i.Wc(t.value)}}const dT=function(t){return{"is-invalid":t}};let gT=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-group-creator-tab-info-component"]],inputs:{groupSettings:"groupSettings",showNameError:"showNameError",showDescriptionError:"showDescriptionError",showRoomError:"showRoomError",availableRooms:"availableRooms"},outputs:{groupSettings:"groupSettings"},decls:36,vars:40,consts:[[1,"groupcreate-headerinfo"],["src","/assets/images/guilds/group_UI_identity.png",1,"grupcreate-img"],[1,"grup-bilgi-metinler"],[1,"grupcreate-baslik"],[1,"grupcreate-aciklama"],[1,"groupcreate-bodybox"],[1,"groupinfo-left"],[1,"groupinfo-right"],["class","form-text text-muted invalid-feedback mb-3",4,"ngIf"],[1,"groupcreate-bodytext"],[1,"groupname",3,"ngClass","ngModel","ngModelChange"],[1,"groupdesc",3,"ngClass","ngModel","ngModelChange"],[1,"groupcreate-bodytext",2,"padding-top","5px"],[1,"group-roomselect",3,"ngClass","ngModel","ngModelChange"],["selected","","disabled","","value","0"],[3,"value",4,"ngFor","ngForOf"],[1,"groupcreate-bodytext-description"],[1,"groupcreate-bodytext-underline"],[1,"form-text","text-muted","invalid-feedback","mb-3"],[3,"value"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Zb(1,"img",1),i.dc(2,"div",2),i.dc(3,"p",3),i.Vc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"p",4),i.Vc(7),i.rc(8,"translate"),i.cc(),i.cc(),i.cc(),i.dc(9,"div",5),i.Zb(10,"div",6),i.dc(11,"div",7),i.Tc(12,uT,3,3,"small",8),i.dc(13,"p",9),i.Vc(14),i.rc(15,"translate"),i.cc(),i.dc(16,"input",10),i.nc("ngModelChange",function(t){return e.groupSettings.name=t}),i.cc(),i.dc(17,"p",9),i.Vc(18),i.rc(19,"translate"),i.cc(),i.dc(20,"textarea",11),i.nc("ngModelChange",function(t){return e.groupSettings.description=t}),i.cc(),i.dc(21,"p",12),i.Vc(22),i.rc(23,"translate"),i.cc(),i.dc(24,"select",13),i.nc("ngModelChange",function(t){return e.groupSettings.roomId=t}),i.dc(25,"option",14),i.Vc(26),i.rc(27,"translate"),i.cc(),i.Tc(28,_T,2,2,"option",15),i.rc(29,"keyvalue"),i.cc(),i.dc(30,"p",16),i.Vc(31),i.rc(32,"translate"),i.cc(),i.dc(33,"p",17),i.Vc(34),i.rc(35,"translate"),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Wc(i.sc(5,16,"group.create.stepcaption.1")),i.Kb(3),i.Wc(i.sc(8,18,"group.create.stepdesc.1")),i.Kb(5),i.xc("ngIf",e.showNameError||e.showRoomError),i.Kb(2),i.Wc(i.sc(15,20,"group.edit.name")),i.Kb(2),i.xc("ngClass",i.Bc(34,dT,e.showNameError))("ngModel",e.groupSettings.name),i.Kb(2),i.Wc(i.sc(19,22,"group.edit.desc")),i.Kb(2),i.xc("ngClass",i.Bc(36,dT,e.showDescriptionError))("ngModel",e.groupSettings.description),i.Kb(2),i.Wc(i.sc(23,24,"group.edit.base")),i.Kb(2),i.xc("ngClass",i.Bc(38,dT,e.showRoomError))("ngModel",e.groupSettings.roomId),i.Kb(2),i.Wc(i.sc(27,26,"group.edit.base.select.room")),i.Kb(2),i.xc("ngForOf",i.sc(29,28,e.availableRooms)),i.Kb(3),i.Wc(i.sc(32,30,"group.edit.base.warning")),i.Kb(3),i.Wc(i.sc(35,32,"group.createroom")))},directives:[p.n,rr.b,p.l,rr.l,rr.n,rr.t,rr.o,rr.v,p.m],pipes:[ln,p.h],encapsulation:2}),t})();const mT=function(t){return{"is-invalid":t}};let pT=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-group-manager-tab-info-component"]],inputs:{groupSettings:"groupSettings",showNameError:"showNameError",showDescriptionError:"showDescriptionError"},outputs:{groupSettings:"groupSettings"},decls:24,vars:23,consts:[[1,"groupcreate-headerinfo"],["src","/assets/images/guilds/group_UI_identity.png",1,"grupcreate-img"],[1,"grup-bilgi-metinler"],[1,"grupcreate-baslik"],[1,"grupcreate-aciklama"],[1,"groupcreate-bodybox"],[1,"groupinfo-left"],[1,"grouptext-1"],[1,"group-badge-box"],[1,"groupinfo-right"],[1,"groupcreate-bodytext"],[1,"groupname",3,"ngClass","ngModel","ngModelChange"],[1,"groupdesc",3,"ngClass","ngModel","ngModelChange"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Zb(1,"img",1),i.dc(2,"div",2),i.dc(3,"p",3),i.Vc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"p",4),i.Vc(7),i.rc(8,"translate"),i.cc(),i.cc(),i.cc(),i.dc(9,"div",5),i.dc(10,"div",6),i.dc(11,"p",7),i.Vc(12),i.rc(13,"translate"),i.cc(),i.Zb(14,"div",8),i.cc(),i.dc(15,"div",9),i.dc(16,"p",10),i.Vc(17),i.rc(18,"translate"),i.cc(),i.dc(19,"input",11),i.nc("ngModelChange",function(t){return e.groupSettings.name=t}),i.cc(),i.dc(20,"p",10),i.Vc(21),i.rc(22,"translate"),i.cc(),i.dc(23,"textarea",12),i.nc("ngModelChange",function(t){return e.groupSettings.description=t}),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Wc(i.sc(5,9,"group.create.stepcaption.1")),i.Kb(3),i.Wc(i.sc(8,11,"group.create.stepdesc.1")),i.Kb(5),i.Wc(i.sc(13,13,"group.edit.badge.badge")),i.Kb(5),i.Wc(i.sc(18,15,"group.edit.name")),i.Kb(2),i.xc("ngClass",i.Bc(19,mT,e.showNameError))("ngModel",e.groupSettings.name),i.Kb(2),i.Wc(i.sc(22,17,"group.edit.desc")),i.Kb(2),i.xc("ngClass",i.Bc(21,mT,e.showDescriptionError))("ngModel",e.groupSettings.description))},directives:[rr.b,p.l,rr.l,rr.n],pipes:[ln],encapsulation:2}),t})(),fT=(()=>{class t{constructor(){this._groupSettings=null,this._state="0",this._canMembersDecorate=!1}get groupSettings(){return this._groupSettings}set groupSettings(t){this._groupSettings=t,this._state=this.groupSettings.state.toString(),this._canMembersDecorate=this.groupSettings.canMembersDecorate}get state(){return this._state}set state(t){this._state=t,this._groupSettings.state=parseInt(t)}get canMembersDecorate(){return this._canMembersDecorate}set canMembersDecorate(t){this._canMembersDecorate=t,this._groupSettings.canMembersDecorate=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-group-manager-tab-preferences-component"]],inputs:{groupSettings:"groupSettings"},decls:58,vars:37,consts:[[1,"groupcreate-headerinfo"],["src","/assets/images/guilds/group_UI_ready.png",1,"grupcreate-img"],[1,"grup-bilgi-metinler"],[1,"grupcreate-baslik"],[1,"grupcreate-aciklama"],[1,"groupcreate-bodybox"],[1,"groupinfo-left"],[1,"grouptext-8"],[1,"group-tipi-box"],[1,"gtype-secenek"],[1,"gedit-select_container-radio"],["type","radio","name","state","id","radioState0","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],["for","radioState0",1,"form-check-label"],["src","/assets/images/guilds/grouptype_icon_0.png",1,"gruptypeico"],["id","passwordHelpBlock",1,"gruptypedesc"],["type","radio","name","state","id","radioState1","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["for","radioState1",1,"form-check-label"],["src","/assets/images/guilds/grouptype_icon_1.png",1,"gruptypeico"],["type","radio","name","state","id","radioState2","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["for","radioState2",1,"form-check-label"],["src","/assets/images/guilds/grouptype_icon_2.png",1,"gruptypeico"],[1,"groupinfo-right2"],[1,"group-tipi-box2"],[1,"ge-select_container"],[1,"getxt"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"checkmarkge"],[1,"gruptypedesc2"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Zb(1,"img",1),i.dc(2,"div",2),i.dc(3,"p",3),i.Vc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"p",4),i.Vc(7),i.rc(8,"translate"),i.cc(),i.cc(),i.cc(),i.dc(9,"div",5),i.dc(10,"div",6),i.dc(11,"p",7),i.Vc(12,"Emblema"),i.cc(),i.dc(13,"div",8),i.dc(14,"div",9),i.dc(15,"div",10),i.dc(16,"input",11),i.nc("ngModelChange",function(t){return e.state=t}),i.cc(),i.dc(17,"label",12),i.Vc(18),i.rc(19,"translate"),i.cc(),i.cc(),i.Zb(20,"img",13),i.dc(21,"p",14),i.Vc(22),i.rc(23,"translate"),i.cc(),i.cc(),i.dc(24,"div",9),i.dc(25,"div",10),i.dc(26,"input",15),i.nc("ngModelChange",function(t){return e.state=t}),i.cc(),i.dc(27,"label",16),i.Vc(28),i.rc(29,"translate"),i.cc(),i.cc(),i.Zb(30,"img",17),i.dc(31,"p",14),i.Vc(32),i.rc(33,"translate"),i.cc(),i.cc(),i.dc(34,"div",9),i.dc(35,"div",10),i.dc(36,"input",18),i.nc("ngModelChange",function(t){return e.state=t}),i.cc(),i.dc(37,"label",19),i.Vc(38),i.rc(39,"translate"),i.cc(),i.cc(),i.Zb(40,"img",20),i.dc(41,"p",14),i.Vc(42),i.rc(43,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(44,"div",21),i.dc(45,"p",7),i.Vc(46),i.rc(47,"translate"),i.cc(),i.dc(48,"div",22),i.dc(49,"label",23),i.dc(50,"p",24),i.Vc(51),i.rc(52,"translate"),i.cc(),i.dc(53,"input",25),i.nc("ngModelChange",function(t){return e.canMembersDecorate=t}),i.cc(),i.Zb(54,"span",26),i.cc(),i.dc(55,"p",27),i.Vc(56),i.rc(57,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Wc(i.sc(5,15,"group.edit.tabcaption.5")),i.Kb(3),i.Wc(i.sc(8,17,"group.edit.tab.5")),i.Kb(9),i.xc("ngModel",e.state),i.Kb(2),i.Wc(i.sc(19,19,"group.edit.settings.type.regular.label")),i.Kb(4),i.Wc(i.sc(23,21,"group.edit.settings.type.regular.help")),i.Kb(4),i.xc("ngModel",e.state),i.Kb(2),i.Wc(i.sc(29,23,"group.edit.settings.type.exclusive.label")),i.Kb(4),i.Wc(i.sc(33,25,"group.edit.settings.type.exclusive.help")),i.Kb(4),i.xc("ngModel",e.state),i.Kb(2),i.Wc(i.sc(39,27,"group.edit.settings.type.private.label")),i.Kb(4),i.Wc(i.sc(43,29,"group.edit.settings.type.private.help")),i.Kb(4),i.Wc(i.sc(47,31,"group.edit.settings.rights.caption")),i.Kb(5),i.Wc(i.sc(52,33,"group.edit.settings.rights.members.label")),i.Kb(2),i.xc("ngModel",e.canMembersDecorate),i.Kb(3),i.Wc(i.sc(57,35,"group.edit.settings.rights.members.help")))},directives:[rr.q,rr.b,rr.l,rr.n,rr.a],pipes:[ln],encapsulation:2}),t})(),ET=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[Bu],imports:[[Yb]]}),t})();i.Nc(Vu,[Tr,Lr,p.n,gT,nT,cT,lT],[ln]),i.Nc(Sb,[p.n,Lr,Tr,p.l,pT,nT,cT,fT],[ln]);let ST=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[P_],imports:[[]]}),t})(),vT=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},imports:[[Yb]]}),t})();var bT=s("LWqD");class IT{constructor(t,e){this._inventoryService=t,this._ngZone=e}get canPlace(){return!!this._inventoryService.roomSession}get tradeRunning(){return this._inventoryService.controller.tradeService.running}attemptItemPlacement(){this.canPlace&&!this.tradeRunning&&this._ngZone.runOutsideAngular(()=>this._inventoryService.controller.furnitureService.attemptItemPlacement())}attemptBotPlacement(){this.canPlace&&!this.tradeRunning&&this._ngZone.runOutsideAngular(()=>this._inventoryService.controller.botService.attemptBotPlacement())}attemptPetPlacement(){this.canPlace&&!this.tradeRunning&&this._ngZone.runOutsideAngular(()=>this._inventoryService.controller.petService.attemptPetPlacement())}}let RT=(()=>{class t{constructor(t){this.elementRef=t,this.badge="",this.isGroup=!1,this.asBackground=!1,this.needsUpdate=!0}ngOnInit(){this.needsUpdate&&this.buildBadge()}ngOnChanges(t){const e=t.badge;e&&e.previousValue!==e.currentValue&&(this.needsUpdate=!0);const s=t.isGroup;s&&s.previousValue!==s.currentValue&&(this.needsUpdate=!0),this.needsUpdate&&this.buildBadge()}buildBadge(){this.needsUpdate=!1;const t=this.badgeUrl;if(!t||!t.length)return;const e=this.elementRef.nativeElement;if(e)if(this.asBackground)e.style.backgroundImage=`url(${t})`;else{const s=e.getElementsByClassName("badge-image");let i=s.length;for(;i<0;)s[i].remove(),i--;const n=document.createElement("img");n.className="badge-image",n.src=t}}get badgeUrl(){return this.isGroup?_.a.instance.getConfiguration("badge.asset.group.url").replace("%badgedata%",this.badge):_.a.instance.getConfiguration("badge.asset.url").replace("%badgename%",this.badge)}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.p))},t.\u0275dir=i.Tb({type:t,selectors:[["","badge-image",""]],inputs:{badge:"badge",isGroup:"isGroup",asBackground:"asBackground"},features:[i.Ib]}),t})();const TT=["nitro-inventory-badges-component",""];function OT(t,e){1&t&&(i.dc(0,"div",5),i.Zb(1,"div",6),i.dc(2,"div",7),i.dc(3,"p",8),i.Vc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"p",9),i.Vc(7),i.rc(8,"translate"),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Wc(i.sc(5,2,"inventory.empty.title")),i.Kb(3),i.Wc(i.sc(8,4,"inventory.empty.desc")))}const yT=function(t){return{envtactive:t}};function CT(t,e){if(1&t){const t=i.ec();i.dc(0,"div",18),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc(2).selectBadge(s)}),i.Zb(1,"button",19),i.cc()}if(2&t){const t=e.$implicit,s=i.qc(2);i.xc("ngClass",i.Bc(3,yT,s.selectedBadge===t)),i.Kb(1),i.xc("badge",t)("asBackground",!0)}}function AT(t,e){if(1&t){const t=i.ec();i.dc(0,"div",18),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc(2).selectBadge(s)}),i.Zb(1,"button",19),i.cc()}if(2&t){const t=e.$implicit,s=i.qc(2);i.xc("ngClass",i.Bc(3,yT,s.selectedBadge===t)),i.Kb(1),i.xc("badge",t)("asBackground",!0)}}function MT(t,e){if(1&t){const t=i.ec();i.dc(0,"div"),i.dc(1,"div",20),i.Zb(2,"nitro-badge",21),i.cc(),i.dc(3,"div",22),i.Vc(4),i.cc(),i.dc(5,"div",23),i.Vc(6),i.rc(7,"translate"),i.cc(),i.dc(8,"button",24),i.nc("click",function(){return i.Kc(t),i.qc(2).wearBadge()}),i.dc(9,"p",25),i.Vc(10),i.rc(11,"translate"),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc(2);i.Kb(2),i.xc("badge",t.selectedBadge)("isGroup",!1),i.Kb(2),i.Wc(t.selectedBadgeName),i.Kb(2),i.Wc(i.sc(7,6,"inventory.badges.defaultdescription")),i.Kb(2),i.xc("disabled",t.badgeButtonDisabled),i.Kb(2),i.Wc(i.sc(11,8,t.isWearingBadge(t.selectedBadge)?"inventory.badges.clearbadge":"inventory.badges.wearbadge"))}}function wT(t,e){if(1&t&&(i.bc(0),i.dc(1,"div",10),i.Tc(2,CT,2,5,"div",11),i.cc(),i.dc(3,"div",12),i.dc(4,"p",13),i.Vc(5),i.rc(6,"translate"),i.cc(),i.dc(7,"div",14),i.Tc(8,AT,2,5,"div",11),i.cc(),i.cc(),i.dc(9,"div",15),i.Tc(10,MT,12,10,"div",4),i.cc(),i.dc(11,"div",16),i.dc(12,"p",17),i.Vc(13),i.rc(14,"translate"),i.cc(),i.cc(),i.ac()),2&t){const t=i.qc();i.Kb(2),i.xc("ngForOf",t.badges),i.Kb(3),i.Wc(i.sc(6,5,"inventory.badges.activebadges")),i.Kb(3),i.xc("ngForOf",t.activeBadges),i.Kb(2),i.xc("ngIf",t.selectedBadge),i.Kb(3),i.Wc(i.uc(14,7,"achievements_score_description","score",t.achievementsScore))}}let DT=(()=>{class t extends IT{constructor(t,e,s,i){super(s,i),this._notificationService=t,this._achievementService=e,this._inventoryService=s,this._ngZone=i,this.selectedBadge=null}ngOnInit(){this._inventoryService.badgesController=this,this._inventoryService.controller.botService.isInitalized&&this.selectExistingGroupOrDefault(),this.prepareInventory()}ngOnDestroy(){this._inventoryService.controller.setAllBadgesSeen(),this._inventoryService.badgesController=null}prepareInventory(){!this._inventoryService.controller.badgeService.isInitalized||this._inventoryService.controller.badgeService.needsUpdate?this._inventoryService.controller.badgeService.requestLoad():this.selectExistingGroupOrDefault()}selectExistingGroupOrDefault(){this.selectedBadge&&this.badges.indexOf(this.selectedBadge)>-1?this.selectBadge(this.selectedBadge):this.selectFirstBadge()}selectFirstBadge(){let t=null;for(const e of this.badges)if(t){t=e;break}this.selectBadge(t)}selectBadge(t){this.selectedBadge!==t&&(this.selectedBadge=t)}wearBadge(){const t=this.selectedBadge;if(!t)return;this._inventoryService.controller.badgeService.wearOrClearBadge(t);const e=new bT.a;for(const s of this.activeBadges)e.addActivatedBadge(s);_.a.instance.communication.connection.send(e)}isWearingBadge(t){return this._inventoryService.controller.badgeService.isWearingBadge(t)}get hasBadgeItems(){return this.badges&&this.badges.length>0}get badges(){return this._inventoryService.controller.badgeService.badges}get activeBadges(){return this._inventoryService.controller.badgeService.activeBadges}get selectedBadgeName(){return this.selectedBadge&&_.a.instance.localization.getBadgeName(this.selectedBadge)||null}get badgeButtonDisabled(){const t=this._inventoryService.controller.badgeService.badgeLimitReached();return(!this.selectedBadge||!this.isWearingBadge(this.selectedBadge))&&t}get achievementsScore(){return this._achievementService.achievementScore}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(ss),i.Yb(u_),i.Yb(Sa),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-inventory-badges-component",""]],features:[i.Hb],attrs:TT,decls:5,vars:2,consts:[["id","envanter-badge"],[1,"envanter-badge_options","disabled"],[1,"envanter_mobi-search"],["class","envanterbos",4,"ngIf"],[4,"ngIf"],[1,"envanterbos"],[1,"envantersolimg"],[1,"envantersagaciklama"],[1,"ebos-hood"],[1,"ebos-desc"],[1,"envanter_badge-list"],["class","item-detail-box-badge",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"used-badges"],[1,"usedb_text"],[1,"used-badges-list-box"],[1,"rozet-info-box"],[1,"basari-puan-info-box"],[1,"basari-puan-text"],[1,"item-detail-box-badge",3,"ngClass","click"],["type","button","badge-image","",1,"ion",3,"badge","asBackground"],[1,"secilen-rozet-box"],[3,"badge","isGroup"],[1,"secilen-rozet-adi"],[1,"secilen-rozet-genel-aciklama"],["type","button",1,"use_badge-box",3,"disabled","click"],[1,"info_badge-text"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Zb(2,"input",2),i.cc(),i.Tc(3,OT,9,6,"div",3),i.Tc(4,wT,15,11,"ng-container",4),i.cc()),2&t&&(i.Kb(3),i.xc("ngIf",!e.hasBadgeItems),i.Kb(1),i.xc("ngIf",e.hasBadgeItems))},directives:[p.n,p.m,p.l,RT,Gc],pipes:[ln],encapsulation:2}),t})();const NT=["nitro-inventory-bots-component",""];function UT(t,e){1&t&&(i.dc(0,"div",3),i.Zb(1,"div",4),i.dc(2,"div",5),i.dc(3,"p",6),i.Vc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"p",7),i.Vc(7),i.rc(8,"translate"),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Wc(i.sc(5,2,"inventory.empty.title")),i.Kb(3),i.Wc(i.sc(8,4,"inventory.empty.desc")))}const xT=function(t,e){return{envtactive:t,yeni:e}};function LT(t,e){if(1&t){const t=i.ec();i.dc(0,"div",11),i.nc("mousedown",function(){i.Kc(t);const s=e.$implicit;return i.qc(2).onMouseDown(s)})("mouseout",function(){i.Kc(t);const s=e.$implicit;return i.qc(2).onMouseOut(s)}),i.Zb(1,"button",12),i.cc()}if(2&t){const t=e.$implicit,s=i.qc(2);i.xc("ngClass",i.Cc(6,xT,s.selectedItem===t,t.isUnseen)),i.Kb(1),i.xc("scale",4)("figure",t.botData.figure)("direction",3)("headOnly",!0)("asBackground",!0)}}function PT(t,e){if(1&t){const t=i.ec();i.dc(0,"button",17),i.nc("click",function(){return i.Kc(t),i.qc(3).attemptBotPlacement()}),i.dc(1,"p",18),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()}2&t&&(i.Kb(2),i.Wc(i.sc(3,1,"inventory.furni.placetoroom")))}function FT(t,e){if(1&t&&(i.dc(0,"div",13),i.dc(1,"p",14),i.Vc(2),i.cc(),i.Zb(3,"div",15),i.Tc(4,PT,4,3,"button",16),i.cc()),2&t){const t=i.qc(2);i.Kb(2),i.Wc(t.selectedItem.botData.name),i.Kb(1),i.xc("roomPreviewer",t.roomPreviewer)("height",140),i.Kb(1),i.xc("ngIf",!t.tradeRunning&&t.canPlace)}}function kT(t,e){if(1&t&&(i.bc(0),i.dc(1,"div",8),i.Tc(2,LT,2,9,"div",9),i.cc(),i.Tc(3,FT,5,4,"div",10),i.ac()),2&t){const t=i.qc();i.Kb(2),i.xc("ngForOf",t.botItems)("ngForTrackBy",t.trackByType),i.Kb(1),i.xc("ngIf",t.selectedItem)}}let VT=(()=>{class t extends IT{constructor(t,e,s){super(e,s),this._notificationService=t,this._inventoryService=e,this._ngZone=s,this.roomPreviewer=null,this.selectedItem=null,this.mouseDown=!1}ngOnInit(){this._inventoryService.botsController=this,this._inventoryService.controller.botService.isInitalized&&this.selectExistingGroupOrDefault(),this.prepareInventory()}ngOnDestroy(){this._inventoryService.controller.setAllBotsSeen(),this._inventoryService.botsController=null}prepareInventory(){!this._inventoryService.controller.botService.isInitalized||this._inventoryService.controller.botService.needsUpdate?this._inventoryService.controller.botService.requestLoad():this.selectExistingGroupOrDefault()}selectExistingGroupOrDefault(){this.selectedItem&&this.botItems.indexOf(this.selectedItem)>-1?this.selectBotItem(this.selectedItem):this.selectFirstBot()}selectFirstBot(){let t=null;for(const e of this.botItems)if(e){t=e;break}this.selectBotItem(t)}selectBotItem(t){if(this.selectedItem!==t)if(this._inventoryService.controller.botService.unselectAllBotItems(),this.selectedItem=t,this.selectedItem){this.selectedItem.selected=!0,this.selectedItem.isUnseen&&(this.selectedItem.isUnseen=!1);const t=this.selectedItem.botData;if(!t)return;this._ngZone.runOutsideAngular(()=>{if(this.roomPreviewer){let e=_.a.instance.roomEngine.getRoomInstanceVariable(_.a.instance.roomEngine.activeRoomId,K.a.ROOM_WALL_TYPE),s=_.a.instance.roomEngine.getRoomInstanceVariable(_.a.instance.roomEngine.activeRoomId,K.a.ROOM_FLOOR_TYPE),i=_.a.instance.roomEngine.getRoomInstanceVariable(_.a.instance.roomEngine.activeRoomId,K.a.ROOM_LANDSCAPE_TYPE);e=e&&e.length?e:"101",s=s&&s.length?s:"101",i=i&&i.length?i:"1.1",this.roomPreviewer.reset(!1),this.roomPreviewer.updateRoomWallsAndFloorVisibility(!1,!0),this.roomPreviewer.updateObjectRoom(s,e,i),this.roomPreviewer.addAvatarIntoRoom(t.figure,0)}})}else this._ngZone.runOutsideAngular(()=>this.roomPreviewer&&this.roomPreviewer.reset(!1))}onMouseDown(t){t&&(this.selectBotItem(t),this.mouseDown=!0)}onMouseUp(){this.mouseDown=!1}onMouseOut(t){this.mouseDown&&this.selectedItem===t&&this.attemptBotPlacement()}trackByType(t,e){return e.id}get botItems(){return this._inventoryService.controller.botService.bots}get hasBotItems(){return!!this.botItems.length}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(ss),i.Yb(Sa),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-inventory-bots-component",""]],inputs:{roomPreviewer:"roomPreviewer"},features:[i.Hb],attrs:NT,decls:3,vars:2,consts:[["id","envanter-bot",3,"mouseup"],["class","envanterbos",4,"ngIf"],[4,"ngIf"],[1,"envanterbos"],[1,"envantersolimg"],[1,"envantersagaciklama"],[1,"ebos-hood"],[1,"ebos-desc"],[1,"envanter_bot-list"],["class","item-detail-box-badge",3,"ngClass","mousedown","mouseout",4,"ngFor","ngForOf","ngForTrackBy"],["class","item-container",4,"ngIf"],[1,"item-detail-box-badge",3,"ngClass","mousedown","mouseout"],["type","button","avatar-image","",1,"ion","bot-avatar",3,"scale","figure","direction","headOnly","asBackground"],[1,"item-container"],[1,"envanter-bot_items_name"],["nitro-room-preview-component","",1,"room-bot-furni-preview",2,"z-index","1","position","relative",3,"roomPreviewer","height"],["type","button","class","place-it-the-room",3,"click",4,"ngIf"],["type","button",1,"place-it-the-room",3,"click"],[1,"place-text"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.nc("mouseup",function(){return e.onMouseUp()}),i.Tc(1,UT,9,6,"div",1),i.Tc(2,kT,4,3,"ng-container",2),i.cc()),2&t&&(i.Kb(1),i.xc("ngIf",!e.hasBotItems),i.Kb(1),i.xc("ngIf",e.hasBotItems))},directives:[p.n,p.m,p.l,lR,hR],pipes:[ln],encapsulation:2}),t})();const BT=["nitro-inventory-furniture-component",""];function WT(t,e){1&t&&(i.dc(0,"div",3),i.Zb(1,"div",4),i.dc(2,"div",5),i.dc(3,"p",6),i.Vc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"p",7),i.Vc(7),i.rc(8,"translate"),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Wc(i.sc(5,2,"inventory.empty.title")),i.Kb(3),i.Wc(i.sc(8,4,"inventory.empty.desc")))}function KT(t,e){if(1&t&&(i.Zb(0,"div",26),i.rc(1,"uniqueNumber")),2&t){const t=i.qc().$implicit;i.xc("innerHtml",i.sc(1,1,t.stuffData.uniqueNumber),i.Lc)}}const GT=function(t,e,s){return{"item-detail-box-active":t,yeni:e,unique:s}},HT=function(t){return{opacity:t}},jT=function(t){return{"background-image":t}};function zT(t,e){if(1&t){const t=i.ec();i.dc(0,"div",21),i.nc("mousedown",function(){i.Kc(t);const s=e.$implicit;return i.qc(2).onMouseDown(s)})("mouseout",function(){i.Kc(t);const s=e.$implicit;return i.qc(2).onMouseOut(s)}),i.Zb(1,"div",22),i.dc(2,"div",23),i.dc(3,"p",24),i.Vc(4),i.cc(),i.cc(),i.Tc(5,KT,2,3,"div",25),i.cc()}if(2&t){const t=e.$implicit,s=i.qc(2);i.xc("ngClass",i.Dc(5,GT,s.selectedGroup===t,t.hasUnseenItems,t.stuffData.uniqueNumber))("ngStyle",i.Bc(9,HT,t.getUnlockedCount()?"1":"0.5")),i.Kb(1),i.xc("ngStyle",i.Bc(11,jT,"url("+s.getIconUrl(t)+")")),i.Kb(3),i.Xc("x",t.getUnlockedCount(),""),i.Kb(1),i.xc("ngIf",t.stuffData.uniqueNumber)}}function YT(t,e){if(1&t){const t=i.ec();i.dc(0,"div",34),i.nc("click",function(){i.Kc(t);const e=i.qc().$implicit;return i.qc(),i.Hc(1).setCurrent(e.value)}),i.Vc(1),i.cc()}if(2&t){const t=i.qc().$implicit;i.Kb(1),i.Xc(" ",t.label,"")}}function qT(t,e){if(1&t&&(i.dc(0,"div",35),i.Vc(1),i.cc()),2&t){const t=i.qc().$implicit;i.Kb(1),i.Wc(t.label)}}function ZT(t,e){if(1&t&&(i.dc(0,"li",31),i.Tc(1,YT,2,1,"div",32),i.Tc(2,qT,2,1,"div",33),i.cc()),2&t){const t=e.$implicit;i.qc();const s=i.Hc(1);i.Qb("active",s.getCurrent()===t.value),i.Kb(1),i.xc("ngIf",s.getCurrent()!==t.value),i.Kb(1),i.xc("ngIf",s.getCurrent()===t.value)}}function XT(t,e){if(1&t){const t=i.ec();i.dc(0,"pagination-template",27,28),i.nc("pageChange",function(e){return i.Kc(t),i.qc(2).paginateConfig.currentPage=e}),i.dc(2,"ul",29),i.Tc(3,ZT,3,4,"li",30),i.cc(),i.cc()}if(2&t){const t=i.Hc(1),e=i.qc(2);i.xc("id",e.paginateConfig.id)("maxSize",11),i.Kb(3),i.xc("ngForOf",t.pages)}}function QT(t,e){if(1&t&&(i.dc(0,"div",36),i.Zb(1,"div",37),i.rc(2,"uniqueNumber"),i.Zb(3,"div",37),i.rc(4,"uniqueNumber"),i.cc()),2&t){const t=i.qc(2);i.Kb(1),i.xc("innerHTML",i.sc(2,2,t.selectedGroup.stuffData.uniqueNumber),i.Lc),i.Kb(2),i.xc("innerHTML",i.sc(4,4,t.selectedGroup.stuffData.uniqueSeries),i.Lc)}}function JT(t,e){if(1&t){const t=i.ec();i.dc(0,"div",42),i.nc("click",function(){return i.Kc(t),i.qc(3).attemptItemPlacement()}),i.dc(1,"p",43),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()}2&t&&(i.Kb(2),i.Wc(i.sc(3,1,"inventory.furni.placetoroom")))}const $T=function(t){return{disabled:t}};function tO(t,e){if(1&t){const t=i.ec();i.dc(0,"div",44),i.nc("click",function(){return i.Kc(t),i.qc(3).attemptItemOffer()}),i.dc(1,"p",43),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()}if(2&t){const t=i.qc(3);i.xc("ngClass",i.Bc(4,$T,!t.selectedGroup.getUnlockedCount())),i.Kb(2),i.Wc(i.sc(3,2,"inventory.trading.offer"))}}function eO(t,e){if(1&t&&(i.dc(0,"div",38),i.dc(1,"p",39),i.Vc(2),i.cc(),i.Tc(3,JT,4,3,"div",40),i.Tc(4,tO,4,6,"div",41),i.cc()),2&t){const t=i.qc(2);i.Kb(2),i.Wc(t.selectedGroup.name),i.Kb(1),i.xc("ngIf",!t.tradeRunning&&t.canPlace),i.Kb(1),i.xc("ngIf",t.tradeRunning)}}function sO(t,e){if(1&t){const t=i.ec();i.bc(0),i.dc(1,"div",8),i.dc(2,"input",9),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().search=e}),i.cc(),i.dc(3,"select",10),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().searchType=e}),i.dc(4,"option",11),i.Vc(5),i.rc(6,"translate"),i.cc(),i.dc(7,"option",11),i.Vc(8),i.rc(9,"translate"),i.cc(),i.dc(10,"option",11),i.Vc(11),i.rc(12,"translate"),i.cc(),i.cc(),i.cc(),i.dc(13,"div",12),i.Tc(14,zT,6,13,"div",13),i.rc(15,"paginate"),i.cc(),i.Tc(16,XT,4,3,"pagination-template",14),i.dc(17,"div",15),i.Tc(18,QT,5,6,"div",16),i.dc(19,"div",17),i.Zb(20,"div",18),i.Zb(21,"div",19),i.cc(),i.Tc(22,eO,5,3,"div",20),i.cc(),i.ac()}if(2&t){const t=i.qc();i.Kb(2),i.xc("ngModel",t.search),i.Kb(1),i.xc("ngModel",t.searchType),i.Kb(1),i.xc("value",""),i.Kb(1),i.Wc(i.sc(6,15,"inventory.filter.option.everything")),i.Kb(2),i.xc("value","s"),i.Kb(1),i.Wc(i.sc(9,17,"inventory.furni.tab.floor")),i.Kb(2),i.xc("value","i"),i.Kb(1),i.Wc(i.sc(12,19,"inventory.furni.tab.wall")),i.Kb(3),i.xc("ngForOf",t.groupItems)("ngForTrackBy",i.tc(15,21,t.trackByType,t.paginateConfig)),i.Kb(2),i.xc("ngIf",t.groupItems.length>t.paginateConfig.itemsPerPage),i.Kb(2),i.xc("ngIf",t.selectedGroup&&t.selectedGroup.stuffData.uniqueNumber),i.Kb(1),i.xc("roomPreviewer",t.roomPreviewer)("height",140),i.Kb(3),i.xc("ngIf",t.selectedGroup)}}let iO=(()=>{class t extends IT{constructor(t,e,s){super(e,s),this._notificationService=t,this._inventoryService=e,this._ngZone=s,this.roomPreviewer=null,this.selectedGroup=null,this.mouseDown=!1,this._filteredItems=[],this._subscription=null,this._hasGroupItems=!1}ngOnInit(){this._inventoryService.controller.furnitureService.isInitalized&&this.selectExistingGroupOrDefault(),this._inventoryService.furniController=this,this._subscription=this._inventoryService.events.subscribe(t=>{switch(t){case Jm.INVENTORY_UPDATED:return void this.refreshInventory()}}),this.prepareInventory()}ngOnDestroy(){this._inventoryService.controller.setAllFurnitureSeen(),this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._inventoryService.furniController=null}refreshInventory(){let t=this._inventoryService.controller.furnitureService.groupItems;if(t.length&&(this._hasGroupItems=!0),this.search&&this.search.length||this.searchType&&this.searchType.length){const e=this.search.toLocaleLowerCase();t=t.filter(t=>{let s=!0;return this.searchType&&1===this.searchType.length&&("s"===this.searchType?s=!t.isWallItem:"i"===this.searchType&&(s=t.isWallItem)),e&&e.length&&(s=t.name.toLocaleLowerCase().includes(e)),s})}this._filteredItems=t}prepareInventory(){!this._inventoryService.controller.furnitureService.isInitalized||this._inventoryService.controller.furnitureService.needsUpdate?this._inventoryService.controller.furnitureService.requestLoad():(this.refreshInventory(),this.selectExistingGroupOrDefault())}selectExistingGroupOrDefault(){this.selectedGroup&&this.groupItems.indexOf(this.selectedGroup)>-1?this.selectGroup(this.selectedGroup):this.selectFirstGroup()}selectFirstGroup(){let t=null;for(const e of this.groupItems)if(e&&!e.locked){t=e;break}this.selectGroup(t)}selectGroup(t){if(this.selectedGroup!==t)if(this._inventoryService.controller.furnitureService.unselectAllGroupItems(),this.selectedGroup=t,this.selectedGroup){this.selectedGroup.selected=!0,this.selectedGroup.hasUnseenItems&&(this.selectedGroup.hasUnseenItems=!1);const e=this.selectedGroup.getLastItem();if(!e)return;this._ngZone.runOutsideAngular(()=>{if(this.roomPreviewer){let s=_.a.instance.roomEngine.getRoomInstanceVariable(_.a.instance.roomEngine.activeRoomId,K.a.ROOM_WALL_TYPE),i=_.a.instance.roomEngine.getRoomInstanceVariable(_.a.instance.roomEngine.activeRoomId,K.a.ROOM_FLOOR_TYPE),n=_.a.instance.roomEngine.getRoomInstanceVariable(_.a.instance.roomEngine.activeRoomId,K.a.ROOM_LANDSCAPE_TYPE);s=s&&s.length?s:"101",i=i&&i.length?i:"101",n=n&&n.length?n:"1.1",this.roomPreviewer.reset(!1),this.roomPreviewer.updateObjectRoom(i,s,n),e.category===Ka._Str_3639||e.category===Ka._Str_3683||e.category===Ka._Str_3432?(this.roomPreviewer.updateRoomWallsAndFloorVisibility(!0,!0),i=e.category===Ka._Str_3683?this.selectedGroup.stuffData.getLegacyString():i,s=e.category===Ka._Str_3639?this.selectedGroup.stuffData.getLegacyString():s,n=e.category===Ka._Str_3432?this.selectedGroup.stuffData.getLegacyString():n,this.roomPreviewer.updateObjectRoom(i,s,n)):t.isWallItem?(this.roomPreviewer.updateRoomWallsAndFloorVisibility(!0,!0),this.roomPreviewer.addWallItemIntoRoom(this.selectedGroup.type,new Z.a(90),e.stuffData.getLegacyString())):(this.roomPreviewer.updateRoomWallsAndFloorVisibility(!1,!0),this.roomPreviewer.addFurnitureIntoRoom(this.selectedGroup.type,new Z.a(90),this.selectedGroup.stuffData,e.extra.toString()))}})}else this._ngZone.runOutsideAngular(()=>this.roomPreviewer&&this.roomPreviewer.reset(!1))}onMouseDown(t){t&&(this.selectGroup(t),this.mouseDown=!0)}onMouseUp(){this.mouseDown=!1}onMouseOut(t){this.mouseDown&&this.selectedGroup===t&&this.attemptItemPlacement()}attemptItemOffer(t=1){if(!this.selectedGroup||!this.tradeRunning)return;const e=this.selectedGroup;if(!e)return;const s=e.getTradeItems(t);if(!s||!s.length)return;let i=null;const n=[];for(const r of s)n.push(r.id),i||(i=r);i&&this.tradeRunning&&(this._inventoryService.controller.tradeService.getOwnTradingItemIds().length+n.length<=1500?this._inventoryService.controller.tradeService.offerItems(n,i.isWallItem,i.type,i.category,i.isGroupable,i.stuffData):this._notificationService.alert("${trading.items.too_many_items.desc}","${trading.items.too_many_items.title}"))}getIconUrl(t){return t&&t.iconUrl||null}trackByType(t,e){return e.type}get groupItems(){return this._filteredItems}get paginateConfig(){return{id:"custom",itemsPerPage:5,currentPage:1}}get search(){return this._inventoryService.controller.furnitureService.search}set search(t){this._inventoryService.controller.furnitureService.search=t,this.refreshInventory()}get searchType(){return this._inventoryService.controller.furnitureService.searchType}set searchType(t){this._inventoryService.controller.furnitureService.searchType=t,this.refreshInventory()}get hasGroupItems(){return this._hasGroupItems}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(ss),i.Yb(Sa),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-inventory-furniture-component",""]],inputs:{roomPreviewer:"roomPreviewer"},features:[i.Hb],attrs:BT,decls:3,vars:2,consts:[["id","envanter-mobi",3,"mouseup"],["class","envanterbos",4,"ngIf"],[4,"ngIf"],[1,"envanterbos"],[1,"envantersolimg"],[1,"envantersagaciklama"],[1,"ebos-hood"],[1,"ebos-desc"],[1,"envanter-options"],[1,"envanter_mobi-search",3,"ngModel","ngModelChange"],[1,"envanter_select-kategori",3,"ngModel","ngModelChange"],[3,"value"],[1,"envanter_mobi-list"],["class","item-detail-box",3,"ngClass","ngStyle","mousedown","mouseout",4,"ngFor","ngForOf","ngForTrackBy"],[3,"id","maxSize","pageChange",4,"ngIf"],[1,"item-container"],["class","unique-counter-compact",4,"ngIf"],["nitro-room-preview-component","",1,"room-furni-preview",2,"position","relative","z-index","1",3,"roomPreviewer","height"],[1,"cannot-traded"],[1,"is-traded",2,"display","none"],["class","inv-mobiinfobox",4,"ngIf"],[1,"item-detail-box",3,"ngClass","ngStyle","mousedown","mouseout"],[1,"inv-mobiview",3,"ngStyle"],[1,"items-part-number"],[1,"ipn-text"],["class","unique-counter",3,"innerHtml",4,"ngIf"],[1,"unique-counter",3,"innerHtml"],[3,"id","maxSize","pageChange"],["p","paginationApi"],[1,"pagination","pagination-sm","custom-pagination"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"page-item"],["class","page-link",3,"click",4,"ngIf"],["class","page-link",4,"ngIf"],[1,"page-link",3,"click"],[1,"page-link"],[1,"unique-counter-compact"],[3,"innerHTML"],[1,"inv-mobiinfobox"],[1,"envanter-items_name"],["class","place-it-the-room",3,"click",4,"ngIf"],["class","place-it-the-room",3,"ngClass","click",4,"ngIf"],[1,"place-it-the-room",3,"click"],[1,"place-text"],[1,"place-it-the-room",3,"ngClass","click"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.nc("mouseup",function(){return e.onMouseUp()}),i.Tc(1,WT,9,6,"div",1),i.Tc(2,sO,23,24,"ng-container",2),i.cc()),2&t&&(i.Kb(1),i.xc("ngIf",!e.hasGroupItems),i.Kb(1),i.xc("ngIf",e.hasGroupItems))},directives:[p.n,rr.b,rr.l,rr.n,rr.t,rr.o,rr.v,p.m,hR,p.l,p.o,Hb.c],pipes:[ln,Hb.b,Qc],encapsulation:2}),t})(),nO=(()=>{class t{constructor(t,e){this._elementRef=t,this._ngZone=e,this.petFigureData=null,this.headOnly=!1,this.direction=0,this.scale=1,this.asBackground=!1,this._petImageCache=new Bs.a,this.petUrl=null,this.disposed=!1,this.needsUpdate=!0}ngOnInit(){this.needsUpdate&&this.buildImage()}ngOnChanges(t){const e=t.petFigureData;e&&e.previousValue!==e.currentValue&&(this.needsUpdate=!0);const s=t.headOnly;s&&s.previousValue!==s.currentValue&&(this.needsUpdate=!0);const i=t.direction;i&&i.previousValue!==i.currentValue&&(this.needsUpdate=!0),this.needsUpdate&&this.buildImage()}dispose(){}buildImage(){this.needsUpdate=!1;const t=this.getPetImageUrl();if(!t||!t.length)return;const e=this._elementRef.nativeElement;if(e)if(this.asBackground)e.style.backgroundImage=`url(${t})`;else{const s=e.getElementsByClassName("pet-image");let i=s.length;for(;i<0;)s[i].remove(),i--;const n=document.createElement("img");n.className="pet-image scale-"+this.scale,n.src=t}}getPetImageUrl(){const t=this.getPetBuildString();let e=this._petImageCache.getValue(t);if(e&&e.length)return e;let s=null;return this._ngZone.runOutsideAngular(()=>{if(s=_.a.instance.roomEngine.getRoomObjectPetImage(this.petFigureData.typeId,this.petFigureData.paletteId,this.petFigureData.color,new Z.a(45*this.direction),64,this,!1,0,this.petFigureData.customParts,"std"),s){const t=s.getImage();t&&(e=t.src)}}),e?(this.putInCache(t,e),e):null}imageReady(t,e,s){let i=null;s?i=s.src:e&&(i=Jo.a.generateImageUrl(e)),i&&i.length&&this.putInCache(this.getPetBuildString(),i),this.buildImage()}imageFailed(t){}putInCache(e,s){this._petImageCache.length===t.MAX_CACHE_SIZE&&this._petImageCache.remove(this._petImageCache.getKey(0)),this._petImageCache.remove(e),this._petImageCache.add(e,s)}getPetBuildString(){return`${this.petFigureData}:${this.headOnly}:${this.direction}`}}return t.MAX_CACHE_SIZE=10,t.\u0275fac=function(e){return new(e||t)(i.Yb(i.p),i.Yb(i.H))},t.\u0275dir=i.Tb({type:t,selectors:[["","pet-image",""]],inputs:{petFigureData:"petFigureData",headOnly:"headOnly",direction:"direction",scale:"scale",asBackground:"asBackground"},features:[i.Ib]}),t})();const rO=["nitro-inventory-pets-component",""];function aO(t,e){1&t&&(i.dc(0,"div",3),i.Zb(1,"div",4),i.dc(2,"div",5),i.dc(3,"p",6),i.Vc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"p",7),i.Vc(7),i.rc(8,"translate"),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Wc(i.sc(5,2,"inventory.empty.title")),i.Kb(3),i.Wc(i.sc(8,4,"inventory.empty.desc")))}const oO=function(t,e){return{envtactive:t,yeni:e}};function cO(t,e){if(1&t){const t=i.ec();i.dc(0,"div",11),i.nc("mousedown",function(){i.Kc(t);const s=e.$implicit;return i.qc(2).onMouseDown(s)})("mouseout",function(){i.Kc(t);const s=e.$implicit;return i.qc(2).onMouseOut(s)}),i.Zb(1,"button",12),i.cc()}if(2&t){const t=e.$implicit,s=i.qc(2);i.xc("ngClass",i.Cc(5,oO,s.selectedItem===t,t.isUnseen)),i.Kb(1),i.xc("petFigureData",t.petData.figureData)("direction",2)("headOnly",!0)("asBackground",!0)}}function hO(t,e){if(1&t){const t=i.ec();i.dc(0,"button",17),i.nc("click",function(){return i.Kc(t),i.qc(3).attemptPetPlacement()}),i.dc(1,"p",18),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()}2&t&&(i.Kb(2),i.Wc(i.sc(3,1,"inventory.furni.placetoroom")))}function lO(t,e){if(1&t&&(i.dc(0,"div",13),i.dc(1,"p",14),i.Vc(2),i.cc(),i.Zb(3,"div",15),i.Tc(4,hO,4,3,"button",16),i.cc()),2&t){const t=i.qc(2);i.Kb(2),i.Wc(t.selectedItem.petData.name),i.Kb(1),i.xc("roomPreviewer",t.roomPreviewer)("height",140),i.Kb(1),i.xc("ngIf",!t.tradeRunning&&t.canPlace)}}function uO(t,e){if(1&t&&(i.bc(0),i.dc(1,"div",8),i.Tc(2,cO,2,8,"div",9),i.cc(),i.Tc(3,lO,5,4,"div",10),i.ac()),2&t){const t=i.qc();i.Kb(2),i.xc("ngForOf",t.petItems)("ngForTrackBy",t.trackByType),i.Kb(1),i.xc("ngIf",t.selectedItem)}}let _O=(()=>{class t extends IT{constructor(t,e,s){super(e,s),this._notificationService=t,this._inventoryService=e,this._ngZone=s,this.roomPreviewer=null,this.selectedItem=null,this.mouseDown=!1}ngOnInit(){this._inventoryService.petsController=this,this._inventoryService.controller.petService.isInitalized&&this.selectExistingGroupOrDefault(),this.prepareInventory()}ngOnDestroy(){this._inventoryService.controller.setAllPetsSeen(),this._inventoryService.petsController=null}prepareInventory(){!this._inventoryService.controller.petService.isInitalized||this._inventoryService.controller.petService.needsUpdate?this._inventoryService.controller.petService.requestLoad():this.selectExistingGroupOrDefault()}selectExistingGroupOrDefault(){this.selectedItem&&this.petItems.indexOf(this.selectedItem)>-1?this.selectPetItem(this.selectedItem):this.selectFirstPet()}selectFirstPet(){let t=null;for(const e of this.petItems)if(e){t=e;break}this.selectPetItem(t)}selectPetItem(t){if(this.selectedItem!==t)if(this._inventoryService.controller.petService.unselectAllPetItems(),this.selectedItem=t,this.selectedItem){this.selectedItem.selected=!0,this.selectedItem.isUnseen&&(this.selectedItem.isUnseen=!1);const t=this.selectedItem.petData;if(!t)return;this._ngZone.runOutsideAngular(()=>{if(this.roomPreviewer){let e=_.a.instance.roomEngine.getRoomInstanceVariable(_.a.instance.roomEngine.activeRoomId,K.a.ROOM_WALL_TYPE),s=_.a.instance.roomEngine.getRoomInstanceVariable(_.a.instance.roomEngine.activeRoomId,K.a.ROOM_FLOOR_TYPE),i=_.a.instance.roomEngine.getRoomInstanceVariable(_.a.instance.roomEngine.activeRoomId,K.a.ROOM_LANDSCAPE_TYPE);e=e&&e.length?e:"101",s=s&&s.length?s:"101",i=i&&i.length?i:"1.1",this.roomPreviewer.reset(!1),this.roomPreviewer.updateRoomWallsAndFloorVisibility(!1,!0),this.roomPreviewer.updateObjectRoom(s,e,i),this.roomPreviewer.addPetIntoRoom(t.figureData.figuredata)}})}else this._ngZone.runOutsideAngular(()=>this.roomPreviewer&&this.roomPreviewer.reset(!1))}onMouseDown(t){t&&(this.selectPetItem(t),this.mouseDown=!0)}onMouseUp(){this.mouseDown=!1}onMouseOut(t){this.mouseDown&&this.selectedItem===t&&this.attemptPetPlacement()}trackByType(t,e){return e.id}get petItems(){return this._inventoryService.controller.petService.pets}get hasPetItems(){return!!this.petItems.length}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(ss),i.Yb(Sa),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-inventory-pets-component",""]],inputs:{roomPreviewer:"roomPreviewer"},features:[i.Hb],attrs:rO,decls:3,vars:2,consts:[["id","envanter-bot",3,"mouseup"],["class","envanterbos",4,"ngIf"],[4,"ngIf"],[1,"envanterbos"],[1,"envantersolimg"],[1,"envantersagaciklama"],[1,"ebos-hood"],[1,"ebos-desc"],[1,"envanter_bot-list"],["class","item-detail-box-badge",3,"ngClass","mousedown","mouseout",4,"ngFor","ngForOf","ngForTrackBy"],["class","item-container",4,"ngIf"],[1,"item-detail-box-badge",3,"ngClass","mousedown","mouseout"],["type","button","pet-image","",1,"ion","bot-avatar",3,"petFigureData","direction","headOnly","asBackground"],[1,"item-container"],[1,"envanter-bot_items_name"],["nitro-room-preview-component","",1,"room-bot-furni-preview",2,"z-index","1","position","relative",3,"roomPreviewer","height"],["type","button","class","place-it-the-room",3,"click",4,"ngIf"],["type","button",1,"place-it-the-room",3,"click"],[1,"place-text"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.nc("mouseup",function(){return e.onMouseUp()}),i.Tc(1,aO,9,6,"div",1),i.Tc(2,uO,4,3,"ng-container",2),i.cc()),2&t&&(i.Kb(1),i.xc("ngIf",!e.hasPetItems),i.Kb(1),i.xc("ngIf",e.hasPetItems))},directives:[p.n,p.m,p.l,nO,hR],pipes:[ln],encapsulation:2}),t})(),dO=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[dp,np,Jm,Sa,lp,$p],imports:[[Yb]]}),t})();i.Nc(_f,[p.n,Tr,Lr,p.l,VT,_O,iO,DT,Jp],[ln]);var gO=s("GFvZ"),mO=s("gegF"),pO=s("dEqu");function fO(t,e){if(1&t){const t=i.ec();i.dc(0,"div",21),i.nc("click",function(){return i.Kc(t),i.qc().handleButton("settings")}),i.Zb(1,"div",22),i.dc(2,"p",23),i.Vc(3),i.rc(4,"translate"),i.cc(),i.cc()}2&t&&(i.Kb(3),i.Wc(i.sc(4,1,"navigator.room.popup.info.room.settings")))}function EO(t,e){if(1&t){const t=i.ec();i.dc(0,"div",24),i.nc("click",function(){return i.Kc(t),i.qc().handleButton("filter")}),i.Zb(1,"div",25),i.dc(2,"p",23),i.Vc(3),i.rc(4,"translate"),i.cc(),i.cc()}2&t&&(i.Kb(3),i.Wc(i.sc(4,1,"navigator.roomsettings.roomfilter")))}function SO(t,e){if(1&t){const t=i.ec();i.dc(0,"div",21),i.nc("click",function(){return i.Kc(t),i.qc().handleButton("floor-plan")}),i.Zb(1,"div",26),i.dc(2,"p",23),i.Vc(3),i.rc(4,"translate"),i.cc(),i.cc()}2&t&&(i.Kb(3),i.Wc(i.sc(4,1,"open.floor.plan.editor")))}function vO(t,e){if(1&t){const t=i.ec();i.dc(0,"div",21),i.nc("click",function(){return i.Kc(t),i.qc().handleButton("staff-pick")}),i.Zb(1,"div",27),i.dc(2,"p",23),i.Vc(3),i.rc(4,"translate"),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.sc(4,1,t.staffPickVisible?"navigator.staffpicks.unpick":"navigator.staffpicks.pick"))}}function bO(t,e){if(1&t){const t=i.ec();i.dc(0,"div",21),i.nc("click",function(){return i.Kc(t),i.qc().handleButton("room-mute")}),i.dc(1,"p",23),i.Vc(2),i.rc(3,"translate"),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(2),i.Wc(i.sc(3,1,t.mutedVisible?"navigator.muteall_on":"navigator.muteall_off"))}}let IO=(()=>{class t{constructor(t,e){this._navigatorService=t,this._settingsService=e}hide(){this._navigatorService.roomInfoShowing=!1}handleButton(t){if(t)switch(t){case"settings":return void this.openRoomSettings();case"filter":return;case"floor-plan":return void(this._settingsService.floorPlanVisible=!0);case"staff-pick":return void this.staffPick();case"room-mute":this.muteRoom();break;case"report":return}}openRoomSettings(){_.a.instance.communication.connection.send(new dt.a(this.roomData.roomId))}staffPick(){this.roomData&&(this.roomData.roomPicker=!this.roomData.roomPicker,_.a.instance.communication.connection.send(new gO.a(this.roomData.roomId)))}muteRoom(){this.roomData&&(this.roomData.allInRoomMuted=!this.roomData.allInRoomMuted,_.a.instance.communication.connection.send(new mO.a))}get data(){return this._navigatorService.data}get roomData(){return this.data&&this.data.enteredGuestRoom||null}get roomName(){return this.roomData&&this.roomData.roomName||""}get ownerName(){return this.roomData&&this.roomData.ownerName||""}get showOwner(){return this.roomData&&this.roomData.showOwner}get ranking(){return this.roomData&&this.roomData.ranking||0}get roomSettingsVisible(){return!!this.roomData&&(this.data.currentRoomOwner||_.a.instance.sessionDataManager.securityLevel>=pO.a.MODERATOR)}get roomFilterVisible(){return!!this.roomData&&(this.data.currentRoomOwner||_.a.instance.sessionDataManager.securityLevel>=pO.a.MODERATOR)}get floorPlanVisible(){if(!this.roomData)return!1;const t=_.a.instance.roomSessionManager.getSession(this.roomData.roomId);return!!t&&t.controllerLevel>=H.a.ROOM_OWNER}get addStaffPickedVisible(){return!!this.roomData&&_.a.instance.sessionDataManager.securityLevel>=pO.a.COMMUNITY}get hoomRegionVisible(){return!!this.roomData&&this.roomData.showOwner}get staffPickVisible(){return!!this.roomData&&this.roomData.roomPicker}get canMuteVisible(){return!!this.roomData&&this.roomData.canMute}get mutedVisible(){return!!this.roomData&&this.roomData.allInRoomMuted}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(hl),i.Yb(m))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-navigator-room-info-component"]],decls:38,vars:23,consts:[["id","room-info",1,"nitro-navigator-room-info",3,"bringToTop","draggable"],["id","room-infodrag",1,"drag-handler"],[1,"ri-baslik"],[1,"old-kapat",3,"click"],[1,"ribox"],[1,"roomn-wfixed"],[1,"ritxt"],[1,"main-room-select"],[1,"ri-wfixed"],[1,"owtxt"],[1,"ri-userprofil"],[1,"owname"],[1,"scoretxt"],[1,"scrnumb"],[1,"ri-roomurl",2,"margin-top","15px"],[1,"ri-roomurlico"],[1,"ri-urltxt"],["class","ri-button",3,"click",4,"ngIf"],["class","ri-button disabled","disabled","",3,"click",4,"ngIf"],["disabled","",1,"ri-roomticket",3,"click"],[1,"ri-rtxt"],[1,"ri-button",3,"click"],[1,"roominfo-buttonico",2,"background-image","url('/assets/images/ayarico.png')"],[1,"ribt_txt"],["disabled","",1,"ri-button","disabled",3,"click"],[1,"roominfo-buttonico",2,"background-image","url('/assets/images/filtreico.png')"],[1,"roominfo-buttonico",2,"background-image","url('/assets/images/floorico.png')"],[1,"roominfo-buttonico",2,"background-image","url('/assets/images/staff.png')"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",3),i.nc("click",function(){return e.hide()}),i.cc(),i.cc(),i.dc(6,"div",4),i.dc(7,"div",5),i.dc(8,"p",6),i.Vc(9),i.cc(),i.cc(),i.Zb(10,"div",7),i.dc(11,"div",8),i.dc(12,"p",9),i.Vc(13),i.rc(14,"translate"),i.cc(),i.Zb(15,"div",10),i.dc(16,"p",11),i.Vc(17),i.cc(),i.cc(),i.dc(18,"div",8),i.dc(19,"p",12),i.Vc(20),i.rc(21,"translate"),i.cc(),i.dc(22,"p",13),i.Vc(23),i.cc(),i.cc(),i.dc(24,"div",14),i.Zb(25,"div",15),i.dc(26,"p",16),i.Vc(27),i.rc(28,"translate"),i.cc(),i.cc(),i.Tc(29,fO,5,3,"div",17),i.Tc(30,EO,5,3,"div",18),i.Tc(31,SO,5,3,"div",17),i.Tc(32,vO,5,3,"div",17),i.dc(33,"div",19),i.nc("click",function(){return e.handleButton("report")}),i.dc(34,"p",20),i.Vc(35),i.rc(36,"translate"),i.cc(),i.cc(),i.Tc(37,bO,4,3,"div",17),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(i.sc(4,13,"navigator.room.info.popup.title")),i.Kb(6),i.Wc(e.roomData.roomName),i.Kb(4),i.Wc(i.sc(14,15,"navigator.roomownercaption")),i.Kb(4),i.Wc(e.roomData.ownerName),i.Kb(3),i.Wc(i.sc(21,17,"navigator.roomrating")),i.Kb(3),i.Wc(e.roomData.ranking),i.Kb(4),i.Wc(i.sc(28,19,"navigator.embed.caption")),i.Kb(2),i.xc("ngIf",e.roomSettingsVisible),i.Kb(1),i.xc("ngIf",e.roomFilterVisible),i.Kb(1),i.xc("ngIf",e.floorPlanVisible),i.Kb(1),i.xc("ngIf",e.addStaffPickedVisible),i.Kb(3),i.Wc(i.sc(36,21,"help.emergency.main.report.room")),i.Kb(2),i.xc("ngIf",e.canMuteVisible))},directives:[Tr,Lr,p.n],pipes:[ln],encapsulation:2}),t})();var RO=s("6etz"),TO=s("yqT3"),OO=s("GlfS"),yO=s("nlEz"),CO=s("QZVO"),AO=s("0qJb"),MO=s("mHKk"),wO=s("Mixc"),DO=s("h5lc"),NO=s("Oh4I");class UO{constructor(t){this._ngZone=t,this.roomName=null,this.roomDescription=null,this.categoryId="0",this.userCount="0",this.tags=[],this.tradeState="0",this.allowWalkthrough=!1,this.lockState="0",this.password=null,this.confirmPassword=null,this.allowPets=!1,this.allowPetsEat=!1,this.usersWithRights=new Map,this.friendsWithoutRights=new Map,this.hideWalls=!1,this.wallThickness="0",this.floorThickness="0",this.chatBubbleMode="0",this.chatBubbleWeight="0",this.chatBubbleSpeed="0",this.chatFloodProtection="0",this.chatDistance=0,this.muteState="0",this.kickState="0",this.banState="0",this.bannedUsers=new Map,this.selectedUserToUnban=0}selectUserToUnban(t){this._ngZone.run(()=>{this.selectedUserToUnban=this.selectedUserToUnban===t?0:t})}get isValidPassword(){return"2"!==this.lockState||this.password&&this.password.length>0&&this.password===this.confirmPassword}get selectedUsernameToUnban(){return this.selectedUserToUnban>0?this.bannedUsers.get(this.selectedUserToUnban):null}}function xO(t,e){if(1&t&&(i.dc(0,"option",21),i.Vc(1),i.rc(2,"translate"),i.cc()),2&t){const t=e.$implicit;i.xc("value",t.id),i.Kb(1),i.Wc(i.sc(2,2,t.name))}}function LO(t,e){if(1&t&&(i.dc(0,"option",21),i.Vc(1),i.cc()),2&t){const t=e.$implicit;i.xc("value",t),i.Kb(1),i.Wc(t)}}function PO(t,e){if(1&t&&(i.dc(0,"option",21),i.Vc(1),i.rc(2,"translate"),i.cc()),2&t){const t=e.$implicit;i.xc("value",t.key),i.Kb(1),i.Wc(i.sc(2,2,t.value))}}let FO=(()=>{class t{constructor(){this.onSave=new i.r,this.onDeleteRoom=new i.r}save(){this.onSave.emit(this.roomSettings)}deleteRoom(){this.onDeleteRoom.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-navigator-roomsettings-tab-basic-component"]],inputs:{roomSettings:"roomSettings",categories:"categories",maxVisitors:"maxVisitors",tradeSettings:"tradeSettings"},outputs:{onSave:"onSave",onDeleteRoom:"onDeleteRoom"},decls:47,vars:38,consts:[["id","rsbasic-box"],[1,"rssettings_txt"],[1,"rs-room_name",3,"ngModel","ngModelChange","blur"],[1,"rssettings_txt","t2",2,"margin-bottom","-1px"],[1,"rs-room_desc",3,"ngModel","ngModelChange","blur"],[1,"rssettings_txt","t4",2,"margin-bottom","-1px"],["id","category-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"rssettings_txt","t5",2,"margin-bottom","-1px"],[1,"rssettings_txt","t8",2,"margin-bottom","-3px"],[1,"rs-label1"],[1,"rs-label2"],[1,"rs-select_container2",2,"margin-top","20px"],[1,"rs-sctxt"],["type","checkbox"],[1,"checkmarkrs2"],[1,"rs-select_container2",2,"margin-top","-5px"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"rs-room_delete"],[1,"rdeletetxt",3,"click"],["src","/assets/images/roomsettings/delete.png",1,"deletebtn"],[3,"value"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Vc(2),i.rc(3,"translate"),i.cc(),i.dc(4,"input",2),i.nc("ngModelChange",function(t){return e.roomSettings.roomName=t})("blur",function(){return e.save()}),i.cc(),i.dc(5,"div",3),i.Vc(6),i.rc(7,"translate"),i.cc(),i.dc(8,"textarea",4),i.nc("ngModelChange",function(t){return e.roomSettings.roomDescription=t})("blur",function(){return e.save()}),i.cc(),i.dc(9,"div",5),i.Vc(10),i.rc(11,"translate"),i.cc(),i.dc(12,"select",6),i.nc("ngModelChange",function(t){return e.roomSettings.categoryId=t})("ngModelChange",function(){return e.save()}),i.Tc(13,xO,3,4,"option",7),i.cc(),i.dc(14,"div",8),i.Vc(15),i.rc(16,"translate"),i.cc(),i.dc(17,"select",6),i.nc("ngModelChange",function(t){return e.roomSettings.userCount=t})("ngModelChange",function(){return e.save()}),i.Tc(18,LO,2,2,"option",7),i.cc(),i.dc(19,"div",8),i.Vc(20),i.rc(21,"translate"),i.cc(),i.dc(22,"select",6),i.nc("ngModelChange",function(t){return e.roomSettings.tradeState=t})("ngModelChange",function(){return e.save()}),i.Tc(23,PO,3,4,"option",7),i.rc(24,"keyvalue"),i.cc(),i.dc(25,"div",9),i.Vc(26),i.rc(27,"translate"),i.cc(),i.Zb(28,"input",10),i.Zb(29,"input",11),i.dc(30,"label",12),i.dc(31,"p",13),i.Vc(32),i.rc(33,"translate"),i.cc(),i.Zb(34,"input",14),i.Zb(35,"span",15),i.cc(),i.dc(36,"label",16),i.dc(37,"p",13),i.Vc(38),i.rc(39,"translate"),i.cc(),i.dc(40,"input",17),i.nc("ngModelChange",function(t){return e.roomSettings.allowWalkthrough=t})("ngModelChange",function(){return e.save()}),i.cc(),i.Zb(41,"span",15),i.cc(),i.dc(42,"div",18),i.dc(43,"p",19),i.nc("click",function(){return e.deleteRoom()}),i.Zb(44,"img",20),i.Vc(45),i.rc(46,"translate"),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Wc(i.sc(3,18,"navigator.roomname")),i.Kb(2),i.xc("ngModel",e.roomSettings.roomName),i.Kb(2),i.Wc(i.sc(7,20,"navigator.roomsettings.desc")),i.Kb(2),i.xc("ngModel",e.roomSettings.roomDescription),i.Kb(2),i.Wc(i.sc(11,22,"navigator.category")),i.Kb(2),i.xc("ngModel",e.roomSettings.categoryId),i.Kb(1),i.xc("ngForOf",e.categories),i.Kb(2),i.Wc(i.sc(16,24,"navigator.maxvisitors")),i.Kb(2),i.xc("ngModel",e.roomSettings.userCount),i.Kb(1),i.xc("ngForOf",e.maxVisitors),i.Kb(2),i.Wc(i.sc(21,26,"navigator.tradesettings")),i.Kb(2),i.xc("ngModel",e.roomSettings.tradeState),i.Kb(1),i.xc("ngForOf",i.sc(24,28,e.tradeSettings)),i.Kb(3),i.Wc(i.sc(27,30,"navigator.tags")),i.Kb(6),i.Wc(i.sc(33,32,"navigator.roomsettings.allow_dynamic_categories")),i.Kb(6),i.Wc(i.sc(39,34,"navigator.roomsettings.allow_walk_through")),i.Kb(2),i.xc("ngModel",e.roomSettings.allowWalkthrough),i.Kb(5),i.Wc(i.sc(46,36,"navigator.roomsettings.delete")))},directives:[rr.b,rr.l,rr.n,rr.t,p.m,rr.a,rr.o,rr.v],pipes:[ln,p.h],encapsulation:2}),t})();function kO(t,e){1&t&&(i.dc(0,"p",23),i.Vc(1),i.rc(2,"translate"),i.cc()),2&t&&(i.Kb(1),i.Wc(i.sc(2,1,"navigator.roomsettings.invalidconfirm")))}function VO(t,e){if(1&t){const t=i.ec();i.dc(0,"div"),i.dc(1,"div"),i.dc(2,"p",19),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",20),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().roomSettings.password=e})("blur",function(){return i.Kc(t),i.qc().save()}),i.cc(),i.cc(),i.dc(6,"div",21),i.dc(7,"p",19),i.Vc(8),i.rc(9,"translate"),i.cc(),i.dc(10,"input",20),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().roomSettings.confirmPassword=e})("blur",function(){return i.Kc(t),i.qc().save()}),i.cc(),i.Tc(11,kO,3,3,"p",22),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.sc(4,5,"navigator.roomsettings.password")),i.Kb(2),i.xc("ngModel",t.roomSettings.password),i.Kb(3),i.Wc(i.sc(9,7,"navigator.roomsettings.passwordconfirm")),i.Kb(2),i.xc("ngModel",t.roomSettings.confirmPassword),i.Kb(1),i.xc("ngIf",!t.roomSettings.isValidPassword)}}let BO=(()=>{class t{constructor(){this.onSave=new i.r}save(){this.onSave.emit(this.roomSettings)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-navigator-roomsettings-tab-access-component"]],inputs:{roomSettings:"roomSettings"},outputs:{onSave:"onSave"},decls:47,vars:37,consts:[["id","rsaccess-box",1,"custom-radios"],[1,"rssettings_txt"],[1,"rssettings_desc"],[1,"rssettings_txt",2,"margin-top","10px"],[1,"rs-select_container-radio",2,"margin-top","2px"],["type","radio","name","doormode","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label",2,"margin-top","0px","float","left"],["type","radio","name","doormode","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","doormode","value","3",1,"form-check-input",2,"margin-top","4px","float","left",3,"ngModel","ngModelChange"],["type","radio","name","doormode","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label","rs-sctxt"],[4,"ngIf"],[1,"sabitbox"],[1,"rssettings_txt",2,"margin-bottom","7px"],[1,"rs-select_container2"],[1,"rs-sctxt"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"checkmarkrs2"],[1,"rsithood"],["type","password","placeholder","*****",1,"rs-inputtxt",3,"ngModel","ngModelChange","blur"],[1,"form-group","mb-3"],["class","rsithood","style","color: red !important",4,"ngIf"],[1,"rsithood",2,"color","red !important"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Vc(2),i.rc(3,"translate"),i.cc(),i.dc(4,"div",2),i.Vc(5),i.rc(6,"translate"),i.cc(),i.dc(7,"div",3),i.Vc(8),i.rc(9,"translate"),i.cc(),i.dc(10,"div",4),i.dc(11,"input",5),i.nc("ngModelChange",function(t){return e.roomSettings.lockState=t})("ngModelChange",function(){return e.save()}),i.cc(),i.dc(12,"label",6),i.Vc(13),i.rc(14,"translate"),i.cc(),i.cc(),i.dc(15,"div",4),i.dc(16,"input",7),i.nc("ngModelChange",function(t){return e.roomSettings.lockState=t})("ngModelChange",function(){return e.save()}),i.cc(),i.dc(17,"label",8),i.Vc(18),i.rc(19,"translate"),i.cc(),i.cc(),i.dc(20,"div",4),i.dc(21,"input",9),i.nc("ngModelChange",function(t){return e.roomSettings.lockState=t})("ngModelChange",function(){return e.save()}),i.cc(),i.dc(22,"label",8),i.Vc(23),i.rc(24,"translate"),i.cc(),i.cc(),i.dc(25,"div",4),i.dc(26,"input",10),i.nc("ngModelChange",function(t){return e.roomSettings.lockState=t}),i.cc(),i.dc(27,"label",11),i.Vc(28),i.rc(29,"translate"),i.cc(),i.cc(),i.Tc(30,VO,12,9,"div",12),i.dc(31,"div",13),i.dc(32,"div",14),i.Vc(33),i.rc(34,"translate"),i.cc(),i.dc(35,"label",15),i.dc(36,"p",16),i.Vc(37),i.rc(38,"translate"),i.cc(),i.dc(39,"input",17),i.nc("ngModelChange",function(t){return e.roomSettings.allowPets=t})("ngModelChange",function(){return e.save()}),i.cc(),i.Zb(40,"span",18),i.cc(),i.dc(41,"label",15),i.dc(42,"p",16),i.Vc(43),i.rc(44,"translate"),i.cc(),i.dc(45,"input",17),i.nc("ngModelChange",function(t){return e.roomSettings.allowPetsEat=t})("ngModelChange",function(){return e.save()}),i.cc(),i.Zb(46,"span",18),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Wc(i.sc(3,17,"navigator.roomsettings.roomaccess.caption")),i.Kb(3),i.Wc(i.sc(6,19,"navigator.roomsettings.roomaccess.info")),i.Kb(3),i.Wc(i.sc(9,21,"navigator.roomsettings.doormode")),i.Kb(3),i.xc("ngModel",e.roomSettings.lockState),i.Kb(2),i.Wc(i.sc(14,23,"navigator.roomsettings.doormode.open")),i.Kb(3),i.xc("ngModel",e.roomSettings.lockState),i.Kb(2),i.Wc(i.sc(19,25,"navigator.roomsettings.doormode.doorbell")),i.Kb(3),i.xc("ngModel",e.roomSettings.lockState),i.Kb(2),i.Wc(i.sc(24,27,"navigator.roomsettings.doormode.invisible")),i.Kb(3),i.xc("ngModel",e.roomSettings.lockState),i.Kb(2),i.Wc(i.sc(29,29,"navigator.roomsettings.doormode.password")),i.Kb(2),i.xc("ngIf","2"==e.roomSettings.lockState),i.Kb(3),i.Wc(i.sc(34,31,"navigator.roomsettings.pets")),i.Kb(4),i.Wc(i.sc(38,33,"navigator.roomsettings.allowpets")),i.Kb(2),i.xc("ngModel",e.roomSettings.allowPets),i.Kb(4),i.Wc(i.sc(44,35,"navigator.roomsettings.allowfoodconsume")),i.Kb(2),i.xc("ngModel",e.roomSettings.allowPetsEat))},directives:[rr.q,rr.b,rr.l,rr.n,p.n,rr.a],pipes:[ln],encapsulation:2}),t})();function WO(t,e){if(1&t){const t=i.ec();i.dc(0,"div",16),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().takeRights(s.key)}),i.Zb(1,"div",17),i.dc(2,"p",18),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().openProfile(s.key)}),i.Vc(3),i.cc(),i.Zb(4,"div",19),i.cc()}if(2&t){const t=e.$implicit;i.Kb(3),i.Wc(t.value)}}function KO(t,e){if(1&t){const t=i.ec();i.dc(0,"div",16),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().giveRights(s.key)}),i.Zb(1,"div",20),i.Zb(2,"div",17),i.dc(3,"p",18),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().openProfile(s.key)}),i.Vc(4),i.cc(),i.cc()}if(2&t){const t=e.$implicit;i.Kb(4),i.Wc(t.value)}}const GO=function(){return["displayed","total"]},HO=function(t,e){return[t,e]};let jO=(()=>{class t{constructor(){this.onSave=new i.r,this.onGiveRights=new i.r,this.onTakeRights=new i.r,this.onOpenProfile=new i.r}save(){this.onSave.emit(this.roomSettings)}giveRights(t){this.onGiveRights.emit(t)}takeRights(t){this.onTakeRights.emit(t)}openProfile(t){this.onOpenProfile.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-navigator-roomsettings-tab-rights-component"]],inputs:{roomSettings:"roomSettings"},outputs:{onSave:"onSave",onGiveRights:"onGiveRights",onTakeRights:"onTakeRights",onOpenProfile:"onOpenProfile"},decls:27,vars:30,consts:[["id","rsrights-box"],[1,"rsrightsbg"],[1,"filter-box","disabled"],[1,"filtertxt"],[1,"filter_user"],[1,"rs-filter-left"],[1,"users-with-rights_txt"],[1,"users-with-rights_box"],[1,"users-with-rights-list"],["class","rs-filter-userbox",3,"click",4,"ngFor","ngForOf"],[1,"rs-clear-all"],[1,"rsclear_txt"],[1,"rs-filter-right"],[1,"friends-without-rights_txt"],[1,"friends-without-rights_box"],[1,"friends-without-rights-list"],[1,"rs-filter-userbox",3,"click"],[1,"rs-forumico"],[1,"rs-username",3,"click"],[1,"rs-remove_user"],[1,"rs-add_user"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"div",2),i.dc(3,"p",3),i.Vc(4),i.rc(5,"translate"),i.cc(),i.Zb(6,"input",4),i.cc(),i.dc(7,"div",5),i.dc(8,"p",6),i.Vc(9),i.rc(10,"translate"),i.cc(),i.dc(11,"div",7),i.dc(12,"div",8),i.Tc(13,WO,5,1,"div",9),i.rc(14,"keyvalue"),i.cc(),i.cc(),i.dc(15,"div",10),i.dc(16,"p",11),i.Vc(17),i.rc(18,"translate"),i.cc(),i.cc(),i.cc(),i.dc(19,"div",12),i.dc(20,"p",13),i.Vc(21),i.rc(22,"translate"),i.cc(),i.dc(23,"div",14),i.dc(24,"div",15),i.Tc(25,KO,5,1,"div",9),i.rc(26,"keyvalue"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Wc(i.sc(5,6,"navigator.flatctrls.filter")),i.Kb(5),i.Wc(i.uc(10,8,"navigator.flatctrls.userswithrights",i.Ac(22,GO),i.Cc(23,HO,e.roomSettings.usersWithRights.size.toString(),e.roomSettings.usersWithRights.size.toString()))),i.Kb(4),i.xc("ngForOf",i.sc(14,12,e.roomSettings.usersWithRights)),i.Kb(4),i.Wc(i.sc(18,14,"navigator.flatctrls.clear")),i.Kb(4),i.Wc(i.uc(22,16,"navigator.flatctrls.friends",i.Ac(26,GO),i.Cc(27,HO,e.roomSettings.friendsWithoutRights.size.toString(),e.roomSettings.friendsWithoutRights.size.toString()))),i.Kb(4),i.xc("ngForOf",i.sc(26,20,e.roomSettings.friendsWithoutRights)))},directives:[p.m],pipes:[ln,p.h],encapsulation:2}),t})(),zO=(()=>{class t{constructor(){this.onSave=new i.r}save(){this.onSave.emit(this.roomSettings)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-navigator-roomsettings-tab-vipchat-component"]],inputs:{roomSettings:"roomSettings"},outputs:{onSave:"onSave"},decls:89,vars:86,consts:[["id","rsvip-box"],[1,"rssettings_txt"],[1,"rssettings_desc"],[1,"rssettings_txt","t15",2,"margin-bottom","7px"],[1,"rs-select_container2",2,"margin-bottom","-2px"],[1,"rs-sctxt"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"checkmarkrs2"],["id","category-select",2,"margin-top","7px",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","-1"],["value","-2"],["id","category-select",2,"margin-top","5px",3,"ngModel","ngModelChange"],[1,"rssettings_txt","t15"],[1,"rssettings_desc",2,"float","left","padding-bottom","10px"],["id","category-select",2,"margin-top","-5px",3,"ngModel","ngModelChange"],["value","2"],["type","number","min","0",1,"chat-hearing-distance",3,"ngModel","ngModelChange","blur"],[1,"rssettings_desc","pf7"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Vc(2),i.rc(3,"translate"),i.cc(),i.dc(4,"div",2),i.Vc(5),i.rc(6,"translate"),i.cc(),i.dc(7,"div",3),i.Vc(8),i.rc(9,"translate"),i.cc(),i.dc(10,"label",4),i.dc(11,"p",5),i.Vc(12),i.rc(13,"translate"),i.cc(),i.dc(14,"input",6),i.nc("ngModelChange",function(t){return e.roomSettings.hideWalls=t})("ngModelChange",function(){return e.save()}),i.cc(),i.Zb(15,"span",7),i.cc(),i.dc(16,"select",8),i.nc("ngModelChange",function(t){return e.roomSettings.wallThickness=t})("ngModelChange",function(){return e.save()}),i.dc(17,"option",9),i.Vc(18),i.rc(19,"translate"),i.cc(),i.dc(20,"option",10),i.Vc(21),i.rc(22,"translate"),i.cc(),i.dc(23,"option",11),i.Vc(24),i.rc(25,"translate"),i.cc(),i.dc(26,"option",12),i.Vc(27),i.rc(28,"translate"),i.cc(),i.cc(),i.dc(29,"select",13),i.nc("ngModelChange",function(t){return e.roomSettings.floorThickness=t})("ngModelChange",function(){return e.save()}),i.dc(30,"option",9),i.Vc(31),i.rc(32,"translate"),i.cc(),i.dc(33,"option",10),i.Vc(34),i.rc(35,"translate"),i.cc(),i.dc(36,"option",11),i.Vc(37),i.rc(38,"translate"),i.cc(),i.dc(39,"option",12),i.Vc(40),i.rc(41,"translate"),i.cc(),i.cc(),i.dc(42,"div",14),i.Vc(43),i.rc(44,"translate"),i.cc(),i.dc(45,"div",15),i.Vc(46),i.rc(47,"translate"),i.cc(),i.dc(48,"select",16),i.nc("ngModelChange",function(t){return e.roomSettings.chatBubbleMode=t})("ngModelChange",function(){return e.save()}),i.dc(49,"option",9),i.Vc(50),i.rc(51,"translate"),i.cc(),i.dc(52,"option",10),i.Vc(53),i.rc(54,"translate"),i.cc(),i.cc(),i.dc(55,"select",13),i.nc("ngModelChange",function(t){return e.roomSettings.chatBubbleWeight=t})("ngModelChange",function(){return e.save()}),i.dc(56,"option",9),i.Vc(57),i.rc(58,"translate"),i.cc(),i.dc(59,"option",10),i.Vc(60),i.rc(61,"translate"),i.cc(),i.dc(62,"option",17),i.Vc(63),i.rc(64,"translate"),i.cc(),i.cc(),i.dc(65,"select",13),i.nc("ngModelChange",function(t){return e.roomSettings.chatBubbleSpeed=t})("ngModelChange",function(){return e.save()}),i.dc(66,"option",9),i.Vc(67),i.rc(68,"translate"),i.cc(),i.dc(69,"option",10),i.Vc(70),i.rc(71,"translate"),i.cc(),i.dc(72,"option",17),i.Vc(73),i.rc(74,"translate"),i.cc(),i.cc(),i.dc(75,"select",13),i.nc("ngModelChange",function(t){return e.roomSettings.chatFloodProtection=t})("ngModelChange",function(){return e.save()}),i.dc(76,"option",9),i.Vc(77),i.rc(78,"translate"),i.cc(),i.dc(79,"option",10),i.Vc(80),i.rc(81,"translate"),i.cc(),i.dc(82,"option",17),i.Vc(83),i.rc(84,"translate"),i.cc(),i.cc(),i.dc(85,"input",18),i.nc("ngModelChange",function(t){return e.roomSettings.chatDistance=t})("blur",function(){return e.save()}),i.cc(),i.dc(86,"div",19),i.Vc(87),i.rc(88,"translate"),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Wc(i.sc(3,34,"navigator.roomsettings.vip.caption")),i.Kb(3),i.Wc(i.sc(6,36,"navigator.roomsettings.vip.info")),i.Kb(3),i.Wc(i.sc(9,38,"navigator.roomsettings.vip_settings")),i.Kb(4),i.Wc(i.sc(13,40,"navigator.roomsettings.hide_walls")),i.Kb(2),i.xc("ngModel",e.roomSettings.hideWalls),i.Kb(2),i.xc("ngModel",e.roomSettings.wallThickness),i.Kb(2),i.Wc(i.sc(19,42,"navigator.roomsettings.wall_thickness.normal")),i.Kb(3),i.Wc(i.sc(22,44,"navigator.roomsettings.wall_thickness.thick")),i.Kb(3),i.Wc(i.sc(25,46,"navigator.roomsettings.wall_thickness.thin")),i.Kb(3),i.Wc(i.sc(28,48,"navigator.roomsettings.wall_thickness.thinnest")),i.Kb(2),i.xc("ngModel",e.roomSettings.floorThickness),i.Kb(2),i.Wc(i.sc(32,50,"navigator.roomsettings.floor_thickness.normal")),i.Kb(3),i.Wc(i.sc(35,52,"navigator.roomsettings.floor_thickness.thick")),i.Kb(3),i.Wc(i.sc(38,54,"navigator.roomsettings.floor_thickness.thin")),i.Kb(3),i.Wc(i.sc(41,56,"navigator.roomsettings.floor_thickness.thinnest")),i.Kb(3),i.Wc(i.sc(44,58,"navigator.roomsettings.chat_settings")),i.Kb(3),i.Wc(i.sc(47,60,"navigator.roomsettings.chat_settings.info")),i.Kb(2),i.xc("ngModel",e.roomSettings.chatBubbleMode),i.Kb(2),i.Wc(i.sc(51,62,"navigator.roomsettings.chat.mode.free.flow")),i.Kb(3),i.Wc(i.sc(54,64,"navigator.roomsettings.chat.mode.line.by.line")),i.Kb(2),i.xc("ngModel",e.roomSettings.chatBubbleWeight),i.Kb(2),i.Wc(i.sc(58,66,"navigator.roomsettings.chat.bubbles.width.normal")),i.Kb(3),i.Wc(i.sc(61,68,"navigator.roomsettings.chat.bubbles.width.thin")),i.Kb(3),i.Wc(i.sc(64,70,"navigator.roomsettings.chat.bubbles.width.wide")),i.Kb(2),i.xc("ngModel",e.roomSettings.chatBubbleSpeed),i.Kb(2),i.Wc(i.sc(68,72,"navigator.roomsettings.chat.speed.fast")),i.Kb(3),i.Wc(i.sc(71,74,"navigator.roomsettings.chat.speed.normal")),i.Kb(3),i.Wc(i.sc(74,76,"navigator.roomsettings.chat.speed.slow")),i.Kb(2),i.xc("ngModel",e.roomSettings.chatFloodProtection),i.Kb(2),i.Wc(i.sc(78,78,"navigator.roomsettings.chat.flood.loose")),i.Kb(3),i.Wc(i.sc(81,80,"navigator.roomsettings.chat.flood.normal")),i.Kb(3),i.Wc(i.sc(84,82,"navigator.roomsettings.chat.flood.strict")),i.Kb(2),i.xc("ngModel",e.roomSettings.chatDistance),i.Kb(2),i.Wc(i.sc(88,84,"navigator.roomsettings.chat_settings.hearing.distance")))},directives:[rr.a,rr.l,rr.n,rr.t,rr.o,rr.v,rr.p,rr.b],pipes:[ln],encapsulation:2}),t})();function YO(t,e){if(1&t){const t=i.ec();i.dc(0,"div",20),i.Zb(1,"div",21),i.dc(2,"p",22),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().openProfile(s.key)}),i.Vc(3),i.cc(),i.cc()}if(2&t){const t=e.$implicit;i.Kb(3),i.Wc(t.value)}}const qO=function(t){return{disabled:t}};let ZO=(()=>{class t{constructor(){this.onSave=new i.r,this.onUnban=new i.r,this.onOpenProfile=new i.r}save(){this.onSave.emit(this.roomSettings)}unban(){this.onUnban.emit()}openProfile(t){this.onOpenProfile.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-navigator-roomsettings-tab-mod-component"]],inputs:{roomSettings:"roomSettings"},outputs:{onSave:"onSave",onUnban:"onUnban",onOpenProfile:"onOpenProfile"},decls:61,vars:54,consts:[["id","rsmanage-box",1,"custom-radios"],[1,"rssettings_desc"],[1,"rssettings_txt","t15"],[1,"rs-select_container-radio2"],["type","radio","name","moderation_mute","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","moderation_mute","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","moderation_kick","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","moderation_kick","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","moderation_kick","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","moderation_ban","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","moderation_ban","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"banned-users-bg"],[1,"banned-users_box"],[1,"banned-users-list"],["class","rs-bannedu-userbox",4,"ngFor","ngForOf"],[1,"manage-bannedu-removeu"],[1,"manage-banned-user-txt"],[1,"mbu-remove-button",3,"ngClass","click"],[1,"mng-btn-text"],[1,"rs-bannedu-userbox"],[1,"rs-forumico"],[1,"rs-username",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Vc(2),i.rc(3,"translate"),i.cc(),i.dc(4,"div",2),i.Vc(5),i.rc(6,"translate"),i.cc(),i.dc(7,"div",3),i.dc(8,"input",4),i.nc("ngModelChange",function(t){return e.roomSettings.muteState=t})("ngModelChange",function(){return e.save()}),i.cc(),i.dc(9,"label",5),i.Vc(10),i.rc(11,"translate"),i.cc(),i.cc(),i.dc(12,"div",3),i.dc(13,"input",6),i.nc("ngModelChange",function(t){return e.roomSettings.muteState=t})("ngModelChange",function(){return e.save()}),i.cc(),i.dc(14,"label",5),i.Vc(15),i.rc(16,"translate"),i.cc(),i.cc(),i.dc(17,"div",2),i.Vc(18),i.rc(19,"translate"),i.cc(),i.dc(20,"div",3),i.dc(21,"input",7),i.nc("ngModelChange",function(t){return e.roomSettings.kickState=t})("ngModelChange",function(){return e.save()}),i.cc(),i.dc(22,"label",5),i.Vc(23),i.rc(24,"translate"),i.cc(),i.cc(),i.dc(25,"div",3),i.dc(26,"input",8),i.nc("ngModelChange",function(t){return e.roomSettings.kickState=t})("ngModelChange",function(){return e.save()}),i.cc(),i.dc(27,"label",5),i.Vc(28),i.rc(29,"translate"),i.cc(),i.cc(),i.dc(30,"div",3),i.dc(31,"input",9),i.nc("ngModelChange",function(t){return e.roomSettings.kickState=t})("ngModelChange",function(){return e.save()}),i.cc(),i.dc(32,"label",5),i.Vc(33),i.rc(34,"translate"),i.cc(),i.cc(),i.dc(35,"div",2),i.Vc(36),i.rc(37,"translate"),i.cc(),i.dc(38,"div",3),i.dc(39,"input",10),i.nc("ngModelChange",function(t){return e.roomSettings.banState=t})("ngModelChange",function(){return e.save()}),i.cc(),i.dc(40,"label",5),i.Vc(41),i.rc(42,"translate"),i.cc(),i.cc(),i.dc(43,"div",3),i.dc(44,"input",11),i.nc("ngModelChange",function(t){return e.roomSettings.banState=t})("ngModelChange",function(){return e.save()}),i.cc(),i.dc(45,"label",5),i.Vc(46),i.rc(47,"translate"),i.cc(),i.cc(),i.dc(48,"div",12),i.dc(49,"div",13),i.dc(50,"div",14),i.Tc(51,YO,4,1,"div",15),i.rc(52,"keyvalue"),i.cc(),i.cc(),i.dc(53,"div",16),i.dc(54,"p",17),i.Vc(55),i.rc(56,"translate"),i.cc(),i.dc(57,"div",18),i.nc("click",function(){return e.unban()}),i.dc(58,"p",19),i.Vc(59),i.rc(60,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(2),i.Wc(i.sc(3,24,"navigator.roomsettings.moderation.header")),i.Kb(3),i.Wc(i.sc(6,26,"navigator.roomsettings.moderation.mute.header")),i.Kb(3),i.xc("ngModel",e.roomSettings.muteState),i.Kb(2),i.Wc(i.sc(11,28,"navigator.roomsettings.moderation.none")),i.Kb(3),i.xc("ngModel",e.roomSettings.muteState),i.Kb(2),i.Wc(i.sc(16,30,"navigator.roomsettings.moderation.rights")),i.Kb(3),i.Wc(i.sc(19,32,"navigator.roomsettings.moderation.kick.header")),i.Kb(3),i.xc("ngModel",e.roomSettings.kickState),i.Kb(2),i.Wc(i.sc(24,34,"navigator.roomsettings.moderation.all")),i.Kb(3),i.xc("ngModel",e.roomSettings.kickState),i.Kb(2),i.Wc(i.sc(29,36,"navigator.roomsettings.moderation.rights")),i.Kb(3),i.xc("ngModel",e.roomSettings.kickState),i.Kb(2),i.Wc(i.sc(34,38,"navigator.roomsettings.moderation.none")),i.Kb(3),i.Wc(i.sc(37,40,"navigator.roomsettings.moderation.ban.header")),i.Kb(3),i.xc("ngModel",e.roomSettings.banState),i.Kb(2),i.Wc(i.sc(42,42,"navigator.roomsettings.moderation.none")),i.Kb(3),i.xc("ngModel",e.roomSettings.banState),i.Kb(2),i.Wc(i.sc(47,44,"navigator.roomsettings.moderation.rights")),i.Kb(5),i.xc("ngForOf",i.sc(52,46,e.roomSettings.bannedUsers)),i.Kb(4),i.Yc("",i.sc(56,48,"navigator.roomsettings.moderation.banned.users")," (",e.roomSettings.bannedUsers.size,")"),i.Kb(2),i.xc("ngClass",i.Bc(52,qO,0===e.roomSettings.selectedUserToUnban)),i.Kb(2),i.Yc("",i.sc(60,50,"navigator.roomsettings.moderation.unban")," ",e.roomSettings.selectedUsernameToUnban,""))},directives:[rr.q,rr.b,rr.l,rr.n,p.m,p.l],pipes:[ln,p.h],encapsulation:2}),t})();function XO(t,e){if(1&t){const t=i.ec();i.dc(0,"nitro-navigator-roomsettings-tab-basic-component",12),i.nc("onSave",function(e){return i.Kc(t),i.qc(2).onSave(e)})("onDeleteRoom",function(){return i.Kc(t),i.qc(2).onDeleteRoom()}),i.cc()}if(2&t){const t=i.qc(2);i.xc("roomSettings",t.roomSettings)("categories",t.categories)("maxVisitors",t.maxVisitors)("tradeSettings",t.tradeSettings)}}function QO(t,e){if(1&t){const t=i.ec();i.dc(0,"nitro-navigator-roomsettings-tab-access-component",13),i.nc("onSave",function(e){return i.Kc(t),i.qc(2).onSave(e)}),i.cc()}if(2&t){const t=i.qc(2);i.xc("roomSettings",t.roomSettings)}}function JO(t,e){if(1&t){const t=i.ec();i.dc(0,"nitro-navigator-roomsettings-tab-rights-component",14),i.nc("onSave",function(e){return i.Kc(t),i.qc(2).onSave(e)})("onGiveRights",function(e){return i.Kc(t),i.qc(2).onGiveRights(e)})("onTakeRights",function(e){return i.Kc(t),i.qc(2).onTakeRights(e)})("onOpenProfile",function(e){return i.Kc(t),i.qc(2).onOpenProfile(e)}),i.cc()}if(2&t){const t=i.qc(2);i.xc("roomSettings",t.roomSettings)}}function $O(t,e){if(1&t){const t=i.ec();i.dc(0,"nitro-navigator-roomsettings-tab-vipchat-component",13),i.nc("onSave",function(e){return i.Kc(t),i.qc(2).onSave(e)}),i.cc()}if(2&t){const t=i.qc(2);i.xc("roomSettings",t.roomSettings)}}function ty(t,e){if(1&t){const t=i.ec();i.dc(0,"nitro-navigator-roomsettings-tab-mod-component",15),i.nc("onSave",function(e){return i.Kc(t),i.qc(2).onSave(e)})("onUnban",function(e){return i.Kc(t),i.qc(2).onUnban(e)})("onOpenProfile",function(e){return i.Kc(t),i.qc(2).onOpenProfile(e)}),i.cc()}if(2&t){const t=i.qc(2);i.xc("roomSettings",t.roomSettings)}}const ey=function(t){return{"rstbutton-active":t}};function sy(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"p",3),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",4),i.nc("click",function(){return i.Kc(t),i.qc().hide()}),i.cc(),i.cc(),i.dc(6,"div",5),i.dc(7,"div",6),i.nc("click",function(){return i.Kc(t),i.qc().changeTab(1)}),i.Vc(8),i.rc(9,"translate"),i.cc(),i.dc(10,"div",6),i.nc("click",function(){return i.Kc(t),i.qc().changeTab(2)}),i.Vc(11),i.rc(12,"translate"),i.cc(),i.dc(13,"div",6),i.nc("click",function(){return i.Kc(t),i.qc().changeTab(3)}),i.Vc(14),i.rc(15,"translate"),i.cc(),i.dc(16,"div",6),i.nc("click",function(){return i.Kc(t),i.qc().changeTab(4)}),i.Vc(17),i.rc(18,"translate"),i.cc(),i.dc(19,"div",6),i.nc("click",function(){return i.Kc(t),i.qc().changeTab(5)}),i.Vc(20),i.rc(21,"translate"),i.cc(),i.cc(),i.dc(22,"div",7),i.Tc(23,XO,1,4,"nitro-navigator-roomsettings-tab-basic-component",8),i.Tc(24,QO,1,1,"nitro-navigator-roomsettings-tab-access-component",9),i.Tc(25,JO,1,1,"nitro-navigator-roomsettings-tab-rights-component",10),i.Tc(26,$O,1,1,"nitro-navigator-roomsettings-tab-vipchat-component",9),i.Tc(27,ty,1,1,"nitro-navigator-roomsettings-tab-mod-component",11),i.cc(),i.cc()}if(2&t){const t=i.qc();i.Kb(3),i.Wc(i.sc(4,16,"navigator.roomsettings")),i.Kb(4),i.xc("ngClass",i.Bc(28,ey,1===t.currentTab)),i.Kb(1),i.Wc(i.sc(9,18,"navigator.roomsettings.tab.1")),i.Kb(2),i.xc("ngClass",i.Bc(30,ey,2===t.currentTab)),i.Kb(1),i.Wc(i.sc(12,20,"navigator.roomsettings.tab.2")),i.Kb(2),i.xc("ngClass",i.Bc(32,ey,3===t.currentTab)),i.Kb(1),i.Wc(i.sc(15,22,"navigator.roomsettings.tab.3")),i.Kb(2),i.xc("ngClass",i.Bc(34,ey,4===t.currentTab)),i.Kb(1),i.Wc(i.sc(18,24,"navigator.roomsettings.tab.4")),i.Kb(2),i.xc("ngClass",i.Bc(36,ey,5===t.currentTab)),i.Kb(1),i.Wc(i.sc(21,26,"navigator.roomsettings.tab.5")),i.Kb(3),i.xc("ngIf",1===t.currentTab),i.Kb(1),i.xc("ngIf",2===t.currentTab),i.Kb(1),i.xc("ngIf",3===t.currentTab),i.Kb(1),i.xc("ngIf",4===t.currentTab),i.Kb(1),i.xc("ngIf",5===t.currentTab)}}let iy=(()=>{class t{constructor(t,e,s,i){this._navigatorService=t,this._friendListService=e,this._notificationService=s,this._ngZone=i,this._currentTab=1,this._messages=[],this._maxVisitors=[],this.onRoomSettingsEvent=this.onRoomSettingsEvent.bind(this),this.onRoomUsersWithRightsEvent=this.onRoomUsersWithRightsEvent.bind(this),this.onRoomBannedUsersEvent=this.onRoomBannedUsersEvent.bind(this),this.clear(),this.registerMessages()}clear(){this._currentTab=1,this.roomSettings=new UO(this._ngZone),this._roomId=0,this._oldRoomName=null,this._visible=!1}ngOnDestroy(){this.clear(),this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new TO.a(this.onRoomSettingsEvent),new OO.a(this.onRoomUsersWithRightsEvent),new RO.a(this.onRoomBannedUsersEvent)];for(const t of this._messages)_.a.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)_.a.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomSettingsEvent(t){if(!(t instanceof TO.a))return;const e=t.getParser();e&&(this.clear(),this._roomId=e.roomId,this._ngZone.run(()=>{this.roomSettings.roomName=e.name,this.roomSettings.roomDescription=e.description,this.roomSettings.categoryId=e.categoryId.toString(),this.roomSettings.userCount=e.userCount.toString(),this.roomSettings.tradeState=e.tradeMode.toString(),this.roomSettings.allowWalkthrough=e.allowWalkthrough,this.roomSettings.lockState=e.state.toString(),this.roomSettings.allowPets=e.allowPets,this.roomSettings.hideWalls=e.hideWalls,this.roomSettings.wallThickness=e.thicknessWall.toString(),this.roomSettings.floorThickness=e.thicknessFloor.toString(),this.roomSettings.chatBubbleMode=e.chatSettings.mode.toString(),this.roomSettings.chatBubbleWeight=e.chatSettings.weight.toString(),this.roomSettings.chatBubbleSpeed=e.chatSettings.speed.toString(),this.roomSettings.chatFloodProtection=e.chatSettings.protection.toString(),this.roomSettings.chatDistance=e.chatSettings.distance,this.roomSettings.muteState=e.moderationSettings.allowMute.toString(),this.roomSettings.kickState=e.moderationSettings.allowKick.toString(),this.roomSettings.banState=e.moderationSettings.allowBan.toString(),this._maxVisitors=this._navigatorService.getMaxVisitors(50),this._oldRoomName=e.name,this._oldLockState=e.state.toString(),this._visible=!0}),_.a.instance.communication.connection.send(new DO.a(this._roomId)),_.a.instance.communication.connection.send(new wO.a(this._roomId)))}onRoomUsersWithRightsEvent(t){if(!(t instanceof OO.a))return;const e=t.getParser();e&&(this.roomSettings.usersWithRights=new Map(e.users),this.getFriendsWithoutRights())}onRoomBannedUsersEvent(t){if(!(t instanceof RO.a))return;const e=t.getParser();e&&(this.roomSettings.bannedUsers=new Map(e.users))}getFriendsWithoutRights(){this._friendListService.friends.forEach((t,e)=>{this.roomSettings.usersWithRights.has(e)||this.roomSettings.friendsWithoutRights.set(e,t.name)})}changeTab(t){this._currentTab=t}onDeleteRoom(){const t=_.a.instance.localization.getValue("navigator.roomsettings.deleteroom.confirm.title"),e=_.a.instance.localization.getValueWithParameter("navigator.roomsettings.deleteroom.confirm.message","room_name","<b>"+this.roomSettings.roomName+"</b>"),s=[new wl("navigator.roomsettings.delete",()=>{_.a.instance.communication.connection.send(new yO.a(this._roomId)),this.hide()},["btn-danger"]),new wl("generic.close",()=>{},["btn-primary"])];this._notificationService.alertWithChoices(e,s,t)}onOpenProfile(t){}onGiveRights(t){this.roomSettings.friendsWithoutRights.has(t)&&(this._ngZone.run(()=>{this.roomSettings.usersWithRights.set(t,this.roomSettings.friendsWithoutRights.get(t)),this.roomSettings.friendsWithoutRights.delete(t)}),_.a.instance.communication.connection.send(new CO.a(t)))}onTakeRights(t){this.roomSettings.usersWithRights.has(t)&&(this._ngZone.run(()=>{this.roomSettings.friendsWithoutRights.set(t,this.roomSettings.usersWithRights.get(t)),this.roomSettings.usersWithRights.delete(t)}),_.a.instance.communication.connection.send(new AO.a(t)))}onUnban(){if(0===this.roomSettings.selectedUserToUnban)return;if(!this.roomSettings.bannedUsers.has(this.roomSettings.selectedUserToUnban))return;const t=this.roomSettings.selectedUserToUnban;this._ngZone.run(()=>{this.roomSettings.bannedUsers.delete(this.roomSettings.selectedUserToUnban),this.roomSettings.selectedUserToUnban=0}),_.a.instance.communication.connection.send(new MO.a(t,this._roomId))}hide(){this._visible=!1,this.clear()}onSave(t){this._ngZone.run(()=>{this.roomSettings=t});let e=t.lockState,s=t.password;t.isValidPassword?this._oldLockState=e:(e=this._oldLockState,s=null),t.roomName.length<1&&(t.roomName=this._oldRoomName),parseInt(t.userCount)<0&&(t.userCount="10");const i=new NO.a(this._roomId,t.roomName,t.roomDescription,parseInt(e),s,parseInt(t.userCount),parseInt(t.categoryId),t.tags.length,t.tags,parseInt(t.tradeState),t.allowPets,t.allowPetsEat,t.allowWalkthrough,t.hideWalls,parseInt(t.wallThickness),parseInt(t.floorThickness),parseInt(t.muteState),parseInt(t.kickState),parseInt(t.banState),parseInt(t.chatBubbleMode),parseInt(t.chatBubbleWeight),parseInt(t.chatBubbleSpeed),t.chatDistance,parseInt(t.chatFloodProtection));_.a.instance.communication.connection.send(i)}get currentTab(){return this._currentTab}get categories(){return this._navigatorService.categories}get maxVisitors(){return this._maxVisitors}get tradeSettings(){return this._navigatorService.tradeSettings}get visible(){return this._visible}get usersWithRights(){return this.roomSettings.usersWithRights}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(hl),i.Yb(Hs),i.Yb(ss),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-navigator-roomsettings-component"]],decls:1,vars:1,consts:[["dragHandle",".drag-handler","id","roomsettings",3,"bringToTop","draggable",4,"ngIf"],["dragHandle",".drag-handler","id","roomsettings",3,"bringToTop","draggable"],["id","roomsettingsdrag",1,"drag-handler"],[1,"rs-baslik"],[1,"old-kapat",3,"click"],[1,"rs-menu"],[1,"rsmenu-button",3,"ngClass","click"],[1,"rs-box"],[3,"roomSettings","categories","maxVisitors","tradeSettings","onSave","onDeleteRoom",4,"ngIf"],[3,"roomSettings","onSave",4,"ngIf"],[3,"roomSettings","onSave","onGiveRights","onTakeRights","onOpenProfile",4,"ngIf"],[3,"roomSettings","onSave","onUnban","onOpenProfile",4,"ngIf"],[3,"roomSettings","categories","maxVisitors","tradeSettings","onSave","onDeleteRoom"],[3,"roomSettings","onSave"],[3,"roomSettings","onSave","onGiveRights","onTakeRights","onOpenProfile"],[3,"roomSettings","onSave","onUnban","onOpenProfile"]],template:function(t,e){1&t&&i.Tc(0,sy,28,38,"div",0),2&t&&i.xc("ngIf",e.visible)},directives:[p.n,Tr,Lr,p.l,FO,BO,jO,zO,ZO],pipes:[ln],encapsulation:2}),t})();const ny=["nitro-navigator-search-component",""];function ry(t,e){if(1&t){const t=i.ec();i.dc(0,"button",9),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().changeFilter(s)}),i.Vc(1),i.rc(2,"translate"),i.cc()}if(2&t){const t=e.$implicit;i.Kb(1),i.Wc(i.sc(2,1,"navigator.filter."+t.name))}}let ay=(()=>{class t{constructor(t,e){this._formBuilder=t,this._navigatorService=e}ngOnInit(){this._form=this._formBuilder.group({search:[""]})}changeFilter(t){this._navigatorService.setCurrentFilter(t)}search(t){this._navigatorService.search(this.searchValue)}clearSearch(){}get form(){return this._form}get searchValue(){return this._navigatorService.lastSearch}set searchValue(t){this._navigatorService.lastSearch=t}get currentFilter(){return this._navigatorService.filter}get searchFilters(){return hl.SEARCH_FILTERS}get hasSearchResults(){return this._navigatorService.lastSearchResults&&this._navigatorService.lastSearchResults.length>0}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(rr.c),i.Yb(hl))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-navigator-search-component",""]],attrs:ny,decls:12,vars:8,consts:[[1,"nav-search"],["src","./assets/images/nav/nroom-filtre_ico.png",1,"nroom-filtre_ico"],["ngbDropdown",""],["ngbDropdownToggle","",1,"nroom-filtre",2,"outline","0","float","left","text-align","left"],["ngbDropdownMenu","",1,"asas"],["style","font-weight: 500 !important;font-size: 12px;font-family: 'Ubuntu';position: relative;float: left;height: 25px;margin-left: -17px;","class","dropdown-item","ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],["type","text",1,"nroom-search",3,"ngModel","placeholder","ngModelChange","keydown.enter"],[1,"icoText"],[1,"reloadSearch"],["ngbDropdownItem","",1,"dropdown-item",2,"font-weight","500 !important","font-size","12px","font-family","Ubuntu","position","relative","float","left","height","25px","margin-left","-17px",3,"click"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.Zb(1,"img",1),i.dc(2,"div",2),i.dc(3,"button",3),i.Vc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"div",4),i.Tc(7,ry,3,3,"button",5),i.cc(),i.cc(),i.dc(8,"input",6),i.nc("ngModelChange",function(t){return e.searchValue=t})("keydown.enter",function(t){return e.search(t)}),i.rc(9,"translate"),i.cc(),i.Zb(10,"div",7),i.Zb(11,"div",8),i.cc()),2&t&&(i.Kb(4),i.Wc(i.sc(5,4,"navigator.filter."+e.currentFilter.name)),i.Kb(3),i.xc("ngForOf",e.searchFilters),i.Kb(1),i.xc("ngModel",e.searchValue)("placeholder",i.sc(9,6,"navigator.filter.input.placeholder")))},directives:[Mu.b,Mu.f,Mu.d,p.m,rr.b,rr.l,rr.n,Mu.c],pipes:[ln],encapsulation:2}),t})(),oy=(()=>{class t{}return t.LIST=0,t.THUMBNAILS=1,t.FORCED_THUMBNAILS=2,t})();const cy=["nitro-navigator-search-result-item-component",""],hy=function(t){return{"background-image":t}};function ly(t,e){if(1&t&&(i.dc(0,"div",5),i.dc(1,"div",6),i.dc(2,"div",7),i.dc(3,"div",8),i.Zb(4,"img",9),i.dc(5,"p",10),i.Vc(6),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(7,"div",11),i.Vc(8),i.cc(),i.Zb(9,"img",12),i.cc()),2&t){const t=i.qc(),e=i.Hc(5);i.Kb(2),i.xc("ngStyle",t.thumbnail&&i.Bc(5,hy,"url("+t.thumbnail+")")),i.Kb(1),i.xc("ngClass",t.entryBg),i.Kb(3),i.Wc(t.room.userCount),i.Kb(2),i.Xc("",t.room.roomName," "),i.Kb(1),i.xc("ngbTooltip",e)}}function uy(t,e){1&t&&i.Zb(0,"img",21)}function _y(t,e){1&t&&i.Zb(0,"img",22)}function dy(t,e){1&t&&i.Zb(0,"img",23)}function gy(t,e){if(1&t&&(i.bc(0),i.Tc(1,uy,1,0,"img",18),i.Tc(2,_y,1,0,"img",19),i.Tc(3,dy,1,0,"img",20),i.ac()),2&t){const t=i.qc(2);i.Kb(1),i.xc("ngIf",t.isGroup),i.Kb(1),i.xc("ngIf",t.isDoorbell),i.Kb(1),i.xc("ngIf",t.isPassword)}}function my(t,e){if(1&t&&(i.dc(0,"div",13),i.dc(1,"div",14),i.Zb(2,"img",9),i.dc(3,"p",10),i.Vc(4),i.cc(),i.cc(),i.dc(5,"div",15),i.Vc(6),i.cc(),i.Zb(7,"img",16),i.Tc(8,gy,4,3,"ng-container",17),i.cc()),2&t){const t=i.qc(),e=i.Hc(5);i.Kb(1),i.xc("ngClass",t.entryBg),i.Kb(3),i.Wc(t.room.userCount),i.Kb(2),i.Wc(t.room.roomName),i.Kb(1),i.xc("ngbTooltip",e),i.Kb(1),i.xc("ngIf",0===t.displayMode)}}function py(t,e){if(1&t&&(i.dc(0,"div",31),i.Zb(1,"div",32),i.dc(2,"p",33),i.Vc(3),i.cc(),i.cc()),2&t){const t=i.qc(2);i.Kb(3),i.Wc(t.room.ownerName)}}function fy(t,e){if(1&t&&(i.dc(0,"div",24),i.dc(1,"div",25),i.Zb(2,"div",26),i.dc(3,"div",27),i.Vc(4),i.cc(),i.dc(5,"div",28),i.Vc(6),i.cc(),i.cc(),i.dc(7,"div",29),i.Tc(8,py,4,1,"div",30),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(2),i.xc("ngStyle",t.thumbnail&&i.Bc(4,hy,"url("+t.thumbnail+")")),i.Kb(2),i.Wc(t.room.roomName),i.Kb(2),i.Wc(t.room.description),i.Kb(2),i.xc("ngIf",null!=t.room.ownerName)}}const Ey=function(t){return{"":t}};let Sy=(()=>{class t{constructor(t,e){this._navigatorService=t,this._ngZone=e,this._thumbnailUrl=null,this._didRequestUrl=!1}visit(){if(this.room.ownerId!==_.a.instance.sessionDataManager.userId){if(0!==this.room.habboGroupId)return void this._navigatorService.goToPrivateRoom(this.room.roomId);switch(this.room.doorMode){case al.a.DOORBELL_STATE:return void this._navigatorService.openRoomDoorbell(this.room);case al.a.PASSWORD_STATE:return void this._navigatorService.openRoomPassword(this.room)}}this._navigatorService.goToRoom(this.room.roomId)}get isGroup(){return this.room&&this.room.habboGroupId>0}get isDoorbell(){return this.room&&this.room.doorMode===al.a.DOORBELL_STATE}get isPassword(){return this.room&&this.room.doorMode===al.a.PASSWORD_STATE}get thumbnail(){if(this._thumbnailUrl)return this._thumbnailUrl;if(!this.room||this._didRequestUrl)return null;let t=_.a.instance.core.configuration.getValue("thumbnails.url");t=t.replace("%thumbnail%",this.room.roomId.toString());const e=new XMLHttpRequest;return e.open("GET",t,!0),e.onreadystatechange=()=>{4===e.readyState&&200===e.status&&(this._thumbnailUrl=t)},e.send(),this._didRequestUrl=!0,null}get entryBg(){const t=this.room.userCount/this.room.maxUserCount*100;let e="roomGray";return t>=92?e="roomRed":t>=50?e="roomOrange":t>0&&(e="roomGreen"),e}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(hl),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-navigator-search-result-item-component",""]],inputs:{room:"room",displayMode:"displayMode"},attrs:cy,decls:6,vars:8,consts:[[3,"ngClass","click"],[3,"ngClass"],["class","big-room-box",4,"ngIf"],["class","small-room-box",4,"ngIf"],["roomInfoTooltip",""],[1,"big-room-box"],[1,"roomimg-nopicture"],[1,"oda-picture",3,"ngStyle"],[1,"room-aktifUser",3,"ngClass"],["src","./assets/images/nav/roomUser.png",1,"roomUser"],[1,"roomUser-number"],[1,"b_box-roomname"],["src","./assets/images/nav/roominfo.png","tooltipClass","search-result-item-tooltip","placement","right","container","body",1,"b_box-odainfo",3,"ngbTooltip"],[1,"small-room-box"],[1,"smallroombox-aktifUser",3,"ngClass"],[1,"small_box-roomname"],["src","./assets/images/nav/roominfo.png?0","tooltipClass","search-result-item-tooltip","placement","right","container","body",1,"b_box-odainfo",3,"ngbTooltip"],[4,"ngIf"],["class","there-is-group","src","./assets/images/nav/oda-grup.png",4,"ngIf"],["class","there-is-lock","src","./assets/images/nav/oda-kilit.png",4,"ngIf"],["class","there-is-lock","src","./assets/images/nav/sifre.png",4,"ngIf"],["src","./assets/images/nav/oda-grup.png",1,"there-is-group"],["src","./assets/images/nav/oda-kilit.png",1,"there-is-lock"],["src","./assets/images/nav/sifre.png",1,"there-is-lock"],[1,"roominfobg-container"],[1,"tooltip-headbg"],[1,"tooltip-odaimg",3,"ngStyle"],[1,"tooltip-roomname"],[1,"tooltip-roomdesc"],[1,"tooltip-bodybg"],["class","tooltip-roomown",4,"ngIf"],[1,"tooltip-roomown"],[1,"ri-userprofil"],[1,"tooltip-ownername"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.nc("click",function(){return e.visit()}),i.dc(1,"div",1),i.Tc(2,ly,10,7,"div",2),i.Tc(3,my,9,5,"div",3),i.cc(),i.Tc(4,fy,9,6,"ng-template",null,4,i.Uc),i.cc()),2&t&&(i.xc("ngClass",i.Bc(4,Ey,0===e.displayMode)),i.Kb(1),i.xc("ngClass",i.Bc(6,Ey,e.displayMode>=1)),i.Kb(1),i.xc("ngIf",e.displayMode>=1),i.Kb(1),i.xc("ngIf",0===e.displayMode))},directives:[p.l,p.n,p.o,Mu.i],encapsulation:2}),t})();const vy=["nitro-navigator-search-result-component",""];function by(t,e){if(1&t){const t=i.ec();i.dc(0,"div",8),i.nc("click",function(){return i.Kc(t),i.qc().toggleListMode()}),i.cc()}}function Iy(t,e){if(1&t){const t=i.ec();i.dc(0,"div",9),i.nc("click",function(){return i.Kc(t),i.qc().toggleListMode()}),i.cc()}}function Ry(t,e){if(1&t&&i.Zb(0,"div",13),2&t){const t=e.$implicit,s=i.qc(2);i.xc("room",t)("displayMode",s.displayMode)}}const Ty=function(t){return{"grid-1":t}};function Oy(t,e){if(1&t&&(i.dc(0,"div",10),i.dc(1,"div",11),i.Tc(2,Ry,1,2,"div",12),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(1),i.xc("ngClass",i.Bc(2,Ty,0===t.displayMode)),i.Kb(1),i.xc("ngForOf",t.result.rooms)}}const yy=function(t,e){return{"room-box-active":t,"room-box-notactive":e}};let Cy=(()=>{class t{ngOnInit(){this._displayMode=this.result.mode,this._isCollapsed=this.result.closed}toggleListMode(){this._displayMode!==oy.FORCED_THUMBNAILS&&(this._displayMode=this._displayMode!==oy.LIST?oy.LIST:oy.THUMBNAILS)}toggleCollapsed(){this._isCollapsed=!this._isCollapsed}get resultCode(){let t=this.result.code;return(!t||0==t.length)&&this.result.data&&this.result.data.length>0?this.result.data:(t=this.result.code.startsWith("${")?t.substr(2,t.length-3):"navigator.searchcode.title."+t,t)}get displayMode(){return this._displayMode}get isCollapsed(){return!this._isCollapsed}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["","nitro-navigator-search-result-component",""]],inputs:{result:"result"},attrs:vy,decls:10,vars:10,consts:[[1,"actvroom-box"],[1,"aroom_b-head"],[1,"room-box-active",3,"ngClass","click"],[1,"navhead-baslik"],[1,"room-navico_ex"],["class","room-navico4",3,"click",4,"ngIf"],["class","room-navico3",3,"click",4,"ngIf"],["class","navigator-grid-container position-relative",4,"ngIf"],[1,"room-navico4",3,"click"],[1,"room-navico3",3,"click"],[1,"navigator-grid-container","position-relative"],[3,"ngClass"],["nitro-navigator-search-result-item-component","",3,"room","displayMode",4,"ngFor","ngForOf"],["nitro-navigator-search-result-item-component","",3,"room","displayMode"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"div",2),i.nc("click",function(){return e.toggleCollapsed()}),i.cc(),i.dc(3,"p",3),i.Vc(4),i.rc(5,"translate"),i.cc(),i.Zb(6,"div",4),i.Tc(7,by,1,0,"div",5),i.Tc(8,Iy,1,0,"div",6),i.cc(),i.Tc(9,Oy,3,4,"div",7),i.cc()),2&t&&(i.Kb(2),i.xc("ngClass",i.Cc(7,yy,e.isCollapsed,!e.isCollapsed)),i.Kb(2),i.Wc(i.sc(5,5,e.resultCode)),i.Kb(3),i.xc("ngIf",2!==e.displayMode),i.Kb(1),i.xc("ngIf",2!==e.displayMode),i.Kb(1),i.xc("ngIf",e.isCollapsed&&e.result.rooms.length>0))},directives:[p.l,p.n,p.m,Sy],pipes:[ln],encapsulation:2}),t})(),Ay=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[hl],imports:[[Yb]]}),t})();i.Nc(Wm,[p.n,Tr,Lr,p.m,p.l,ay,Cy,IO,iy],[ln]);let My=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[ss],imports:[[Yb]]}),t})(),wy=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[ql],imports:[[Yb]]}),t})();const Dy=function(t,e){return{fontSize:t,letterSpacing:e}};let Ny=(()=>{class t{constructor(t,e){this._floorPlanService=t,this._ngZone=e,this._map=null,this._backupMap=null,this.fontSize="12",this.letterSpacing="3",this.mapChanged=!1}revert(){this._ngZone.run(()=>{this._map=this._backupMap})}save(){this._floorPlanService.floorMapSettings.heightMapString=this._map.split("\n").join("\r"),this._floorPlanService.save(this._floorPlanService.floorMapSettings)}close(){this._floorPlanService.showImportExport=!1}set map(t){this._map=t,this._backupMap||(this._backupMap=t.replace(/\r\n|\r|\n/g,"\r").toLowerCase()),this.mapChanged=this._map!==this._backupMap}get map(){return this._map}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(Fi),i.Yb(i.H))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-floorplan-import-export-component"]],inputs:{map:"map"},decls:16,vars:16,consts:[["id","corelo-export","dragHandle","#corelocmnd-drag",3,"bringToTop","draggable"],["id","corelocmnd-drag",1,"header-draggable"],[1,"ccmnd-baslik"],[1,"old-kapat",3,"click"],[1,"importbox"],["spellcheck","false",1,"karoinfo",2,"font-size","13px",3,"ngStyle","ngModel","ngModelChange"],[1,"fpe-close","imp-sag",3,"disabled","click"],[1,"fpe-buttontxt",2,"padding","5px 10px"],[1,"fpe-save","imp-sol",3,"disabled","click"],[1,"fpe-buttontxt",2,"color","white","padding","5px 10px"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",3),i.nc("click",function(){return e.close()}),i.cc(),i.cc(),i.dc(6,"div",4),i.dc(7,"textarea",5),i.nc("ngModelChange",function(t){return e.map=t}),i.cc(),i.cc(),i.dc(8,"button",6),i.nc("click",function(){return e.revert()}),i.dc(9,"p",7),i.Vc(10),i.rc(11,"translate"),i.cc(),i.cc(),i.dc(12,"button",8),i.nc("click",function(){return e.save()}),i.dc(13,"p",9),i.Vc(14),i.rc(15,"translate"),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(i.sc(4,7,"floor.plan.editor.import.export")),i.Kb(4),i.xc("ngStyle",i.Cc(13,Dy,e.fontSize+"px",e.letterSpacing+"px"))("ngModel",e.map),i.Kb(1),i.xc("disabled",!e.mapChanged),i.Kb(2),i.Wc(i.sc(11,9,"floor.plan.editor.revert.to.last.received.map")),i.Kb(2),i.xc("disabled",!e.mapChanged),i.Kb(2),i.Wc(i.sc(15,11,"floor.plan.editor.save")))},directives:[Tr,Lr,rr.b,p.o,rr.l,rr.n],pipes:[ln],encapsulation:2}),t})(),Uy=(()=>{class t{ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac}),t})(),xy=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[Fi,Uy],imports:[[Yb]]}),t})();i.Nc(Zi,[p.n,Tr,Lr,p.l,p.m,p.o,lR,rr.t,rr.l,rr.n,rr.o,rr.v,hR,Ny],[ln,p.h]);let Ly=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},imports:[[Yb,xy]]}),t})(),Py=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[],imports:[[Yb]]}),t})(),Fy=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[Ef],imports:[[Yb]]}),t})(),ky=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[rE],imports:[[Yb]]}),t})();const Vy=function(){return["count","limit"]},By=function(t,e){return[t,e]};function Wy(t,e){if(1&t&&(i.dc(0,"div",15),i.dc(1,"p",16),i.Vc(2),i.rc(3,"translate"),i.cc(),i.dc(4,"p",17),i.Vc(5),i.rc(6,"translate"),i.cc(),i.cc()),2&t){const t=i.qc();i.Kb(2),i.Wc(i.uc(3,2,"wiredfurni.pickfurnis.caption",i.Ac(8,Vy),i.Cc(9,By,t.furniSelectionCount,t.maximumFurniSelectionCount))),i.Kb(3),i.Wc(i.sc(6,6,"wiredfurni.pickfurnis.desc"))}}const Ky=["*"];let Gy=(()=>{class t{constructor(t){this._wiredService=t}save(){this._wiredService.component.save()}hide(){this._wiredService.component.close()}get furniName(){return this._wiredService.component.getFurniName()}get furniDescription(){return this._wiredService.component.getFurniDescription()}get requiresFurni(){return this._wiredService.component._Str_19885()}get furniSelectionCount(){return this._wiredService.component.furniSelectedIds.length}get maximumFurniSelectionCount(){return this._wiredService.component.maximumItemSelectionCount}get wiredType(){const t=this._wiredService.component._Str_19071();return t?t._Str_1196():""}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(us))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-wired-base-component"]],ngContentSelectors:Ky,decls:25,vars:14,consts:[[1,"wiredpanel",3,"bringToTop","draggable"],[1,"wpanel-top","drag-handler"],[1,"wpanel-hood"],[1,"wpanel-close",3,"click"],[1,"wpanel-middle"],[1,"wiredico"],[1,"wpanel-wired_name"],[1,"wired_hr"],["class","select-mobi-box",4,"ngIf"],[1,"wired-help"],[1,"wpanel-bottom"],[1,"wpanel-ready_button",3,"click"],[1,"wpanel-ready_button-text"],[1,"wpanel-close_button",3,"click"],[1,"wpanel-close_button-text"],[1,"select-mobi-box"],[1,"number-of-selected-mobi"],[1,"nosm-descripton"]],template:function(t,e){1&t&&(i.wc(),i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",3),i.nc("click",function(){return e.hide()}),i.cc(),i.cc(),i.dc(6,"div",4),i.Zb(7,"div",5),i.dc(8,"div",6),i.Vc(9),i.cc(),i.Zb(10,"div",7),i.vc(11),i.Tc(12,Wy,7,12,"div",8),i.dc(13,"div",9),i.Vc(14),i.rc(15,"translate"),i.cc(),i.cc(),i.dc(16,"div",10),i.dc(17,"div",11),i.nc("click",function(){return e.save()}),i.dc(18,"p",12),i.Vc(19),i.rc(20,"translate"),i.cc(),i.cc(),i.dc(21,"div",13),i.nc("click",function(){return e.hide()}),i.dc(22,"p",14),i.Vc(23),i.rc(24,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(3),i.Wc(i.sc(4,6,"wiredfurni.title")),i.Kb(6),i.Wc(e.furniName),i.Kb(3),i.xc("ngIf",e.requiresFurni),i.Kb(2),i.Wc(i.sc(15,8,"wiredfurni.help")),i.Kb(5),i.Wc(i.sc(20,10,"wiredfurni.ready")),i.Kb(4),i.Wc(i.sc(24,12,"cancel")))},directives:[Tr,Lr,p.n],pipes:[ln],encapsulation:2}),t})();const Hy=["*"];let jy=(()=>{class t{constructor(){this.delay=0,this.delayChange=new i.r,this.delayLocale=""}ngOnChanges(t){t.delay.currentValue!==t.delay.previousValue&&this.updateLocaleParameter()}onSliderChange(){this.delayChange.emit(this.delay)}decreaseDelay(){this.delay-=1,this.delay<t.DELAY_MINIMUM_VALUE&&(this.delay=t.DELAY_MINIMUM_VALUE),this.delayChange.emit(this.delay)}increaseDelay(){this.delay+=1,this.delay>t.DELAY_MAXIMUM_VALUE&&(this.delay=t.DELAY_MAXIMUM_VALUE),this.delayChange.emit(this.delay)}updateLocaleParameter(){this.delayLocale=_.a.instance.getLocalizationWithParameter("wiredfurni.params.delay","seconds",vE.getLocaleName(this.delay))}get delaySliderOptions(){return{floor:t.DELAY_MINIMUM_VALUE,ceil:t.DELAY_MAXIMUM_VALUE,step:t.DELAY_STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return t.DELAY_MINIMUM_VALUE=0,t.DELAY_MAXIMUM_VALUE=20,t.DELAY_STEPPER_VALUE=1,t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-wired-action-base-component"]],inputs:{delay:"delay"},outputs:{delayChange:"delayChange"},features:[i.Ib],ngContentSelectors:Hy,decls:9,vars:3,consts:[[1,"wiredrange-box"],[1,"wired-subheader"],[1,"wiredrange_box"],[1,"decrease-number",3,"click"],["name","delay",3,"options","value","valueChange"],[1,"increase-number",3,"click"]],template:function(t,e){1&t&&(i.wc(),i.dc(0,"nitro-wired-base-component"),i.vc(1),i.dc(2,"div",0),i.dc(3,"p",1),i.Vc(4),i.cc(),i.dc(5,"div",2),i.dc(6,"div",3),i.nc("click",function(){return e.decreaseDelay()}),i.cc(),i.dc(7,"ngx-slider",4),i.nc("valueChange",function(t){return e.delay=t})("valueChange",function(){return e.onSliderChange()}),i.cc(),i.dc(8,"div",5),i.nc("click",function(){return e.increaseDelay()}),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.Kb(4),i.Wc(e.delayLocale),i.Kb(3),i.xc("options",e.delaySliderOptions)("value",e.delay))},directives:[Gy,sa.b],encapsulation:2}),t})(),zy=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[us],imports:[[Yb,p.b]]}),t})();i.Nc(TE,[Gy,rr.t,rr.l,rr.n,rr.o,rr.v],[ln]),i.Nc(yE,[Gy],[]),i.Nc(AE,[Gy,rr.q,rr.b,rr.l,rr.n],[ln]),i.Nc(wE,[Gy,rr.b,rr.l,rr.n],[ln]),i.Nc(NE,[Gy],[]),i.Nc(xE,[Gy,rr.b,rr.l,rr.n],[ln]),i.Nc(PE,[Gy,rr.b,rr.l,rr.n],[ln]),i.Nc(kE,[Gy,rr.q,rr.b,rr.l,rr.n],[ln]),i.Nc(BE,[Gy],[]),i.Nc(KE,[Gy],[]),i.Nc(HE,[Gy,rr.q,rr.b,rr.l,rr.n],[ln]),i.Nc(zE,[Gy,rr.a,rr.l,rr.n],[ln]),i.Nc(qE,[Gy],[]),i.Nc(XE,[Gy,sa.b],[]),i.Nc(JE,[Gy,sa.b],[]),i.Nc(tS,[Gy,sa.b],[ln]),i.Nc(aS,[Gy,rr.q,rr.b,rr.l,rr.n,p.n],[ln]),i.Nc(cS,[Gy,rr.b,rr.l,rr.n,rr.q],[ln]),i.Nc(lS,[Gy],[]),i.Nc(_S,[Gy],[]),i.Nc(gS,[Gy,rr.b,rr.l,rr.n],[ln]),i.Nc(pS,[Gy,rr.b,rr.l,rr.n],[ln]),i.Nc(ES,[Gy],[]),i.Nc(vS,[Gy],[]),i.Nc(IS,[Gy],[]),i.Nc(TS,[Gy,sa.b],[ln]),i.Nc(yS,[Gy],[]),i.Nc(AS,[Gy,sa.b],[]),i.Nc(wS,[Gy,sa.b],[]),i.Nc(NS,[Gy,sa.b],[]),i.Nc(Lv,[jy],[]),i.Nc(Uv,[jy],[]),i.Nc(JS,[jy],[]),i.Nc(sv,[jy],[]),i.Nc(XS,[jy],[]),i.Nc(tv,[jy,rr.b,rr.l,rr.n],[ln]),i.Nc(BS,[jy,rr.b,rr.i,rr.l,rr.n,rr.t,rr.o,rr.v],[ln]),i.Nc(kS,[jy,rr.b,rr.i,rr.l,rr.n,rr.q],[ln]),i.Nc(Sv,[jy],[]),i.Nc(Mv,[jy],[]),i.Nc(fv,[jy,rr.b,rr.l,rr.n],[ln]),i.Nc(qS,[jy,rr.b,rr.i,rr.l,rr.n],[ln]),i.Nc(Dv,[jy,rr.a,rr.l,rr.n],[ln]),i.Nc(KS,[jy,rr.b,rr.i,rr.l,rr.n],[ln]),i.Nc(Cv,[jy,sa.b,rr.b,rr.l,rr.n],[ln]),i.Nc(PS,[jy,rr.b,rr.i,rr.l,rr.n,_a],[ln]),i.Nc(HS,[jy,rr.b,rr.i,rr.l,rr.n],[ln]),i.Nc(zS,[jy,rr.b,rr.i,rr.l,rr.n],[ln]),i.Nc(Rv,[jy,rr.q,rr.b,rr.l,rr.n],[ln]),i.Nc(Ov,[jy,rr.q,rr.b,rr.l,rr.n],[ln]),i.Nc(mv,[jy,rr.t,rr.l,rr.n,rr.o,rr.v],[ln]),i.Nc(dv,[jy,sa.b,rr.t,rr.l,rr.n,rr.o,rr.v],[ln]),i.Nc(uv,[jy,sa.b],[ln]),i.Nc(bv,[jy,sa.b,rr.q,rr.b,rr.l,rr.n],[ln]),i.Nc(hv,[jy,rr.a,rr.l,rr.n,p.n,sa.b,rr.t,rr.o,rr.v,rr.b,hc.b,p.m],[ln]);let Yy=(()=>{class t{constructor(){this.visible=!1,this.visibleChange=new i.r,this._logger=new yl.a(this.constructor.name)}ngOnInit(){}ngOnDestroy(){}hideTool(){this.visible=!1}getTranslatedForKey(t,e){const s="modtools.nitro."+t,i=_.a.instance.localization.getValue(s);return i!==s?i:e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],inputs:{visible:"visible"},outputs:{visibleChange:"visibleChange"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();function qy(t,e){1&t&&(i.dc(0,"table",9),i.dc(1,"thead"),i.dc(2,"tr"),i.dc(3,"th"),i.Vc(4,"Category"),i.cc(),i.dc(5,"th"),i.Vc(6,"Type"),i.cc(),i.dc(7,"th"),i.Vc(8,"Player"),i.cc(),i.dc(9,"th"),i.Vc(10,"Open"),i.cc(),i.cc(),i.cc(),i.Zb(11,"tbody"),i.cc())}function Zy(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"p",3),i.Vc(3,"Reports"),i.cc(),i.dc(4,"div",4),i.nc("click",function(){return i.Kc(t),i.qc().hideTool()}),i.cc(),i.cc(),i.dc(5,"div",5),i.dc(6,"div",6),i.dc(7,"button",7),i.nc("click",function(){return i.Kc(t),i.qc().setTab(0)}),i.Vc(8,"Open Issues"),i.cc(),i.dc(9,"button",7),i.nc("click",function(){return i.Kc(t),i.qc().setTab(1)}),i.Vc(10,"My Issues"),i.cc(),i.dc(11,"button",7),i.nc("click",function(){return i.Kc(t),i.qc().setTab(2)}),i.Vc(12,"Picked Issues"),i.cc(),i.cc(),i.Tc(13,qy,12,0,"table",8),i.cc(),i.cc()}if(2&t){const t=i.qc();i.xc("center",!1),i.Kb(13),i.xc("ngIf",0===t.tab)}}let Xy=(()=>{class t extends Yy{constructor(){super(),this._tab=0}ngOnInit(){}ngOnDestroy(){}get tab(){return this._tab}set tab(t){this._tab=t}setTab(t){this.tab=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-mod-tool-reports-component"]],features:[i.Hb],decls:1,vars:1,consts:[["dragHandle","#modt-reporthead","class","modtools-reportbox",3,"draggable","center",4,"ngIf"],["dragHandle","#modt-reporthead",1,"modtools-reportbox",3,"draggable","center"],["id","modt-reporthead"],[1,"oldhabbo-headhoodmt"],[1,"old-kapat",3,"click"],[1,"card-body"],[1,"btn-group","w-100"],[1,"btn","btn-sm","btn-secondary",3,"click"],["class","table table-striped",4,"ngIf"],[1,"table","table-striped"]],template:function(t,e){1&t&&i.Tc(0,Zy,14,2,"div",0),2&t&&i.xc("ngIf",e.visible)},directives:[p.n,Lr],encapsulation:2}),t})();var Qy=s("ZRgm");let Jy=(()=>{class t extends Yy{constructor(t,e){super(),this._modToolService=t,this._navigatorService=e}goToRoom(t){this._navigatorService.goToPrivateRoom(t)}openRoomTools(t){this._modToolService.openRoomTool(t)}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(ii),i.Yb(hl))},t.\u0275cmp=i.Sb({type:t,selectors:[["ng-component"]],features:[i.Hb],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();function $y(t,e){if(1&t&&(i.dc(0,"div",11),i.dc(1,"p",12),i.Vc(2),i.cc(),i.dc(3,"p",13),i.Vc(4),i.cc(),i.dc(5,"p",14),i.Vc(6),i.cc(),i.cc()),2&t){const t=e.$implicit;i.Kb(2),i.Wc(t.timestamp),i.Kb(2),i.Wc(t.userName),i.Kb(2),i.Wc(t.message)}}function tC(t,e){if(1&t){const t=i.ec();i.dc(0,"div"),i.dc(1,"div",6),i.dc(2,"p",7),i.Vc(3),i.cc(),i.dc(4,"div",8),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().openRoomTools(s.roomId)}),i.dc(5,"p",9),i.Vc(6,"Room information"),i.cc(),i.cc(),i.dc(7,"div",8),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().goToRoom(s.roomId)}),i.dc(8,"p",9),i.Vc(9,"Go to room"),i.cc(),i.cc(),i.cc(),i.Tc(10,$y,7,3,"div",10),i.cc()}if(2&t){const t=e.$implicit;i.Kb(3),i.Xc("Room: ",t.roomName,""),i.Kb(7),i.xc("ngForOf",t.chatlogs)}}let eC=(()=>{class t extends Jy{constructor(t,e,s){super(t,s),this._modToolService=t,this._modToolUserInfoService=e,this._navigatorService=s}get title(){return this._modToolService.currentRoomModData?"Room Chatlog: "+this._modToolService.currentRoomModData.name:""}getData(){return this._modToolService.userChatlogs&&this._modToolService.currentRoomModData?[new Qy.a(this._modToolService.currentRoomModData.name,this._modToolService.currentRoom.roomId,this._modToolService.userChatlogs)]:[]}close(){this._modToolService.showRoomChatLogs=!1}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(ii),i.Yb(Rb),i.Yb(hl))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-mod-tool-room-chatlogs-component"]],features:[i.Hb],decls:7,vars:3,consts:[["dragHandle","#modt-roomchatdrag","id","modt-roomchat",3,"draggable","center"],["id","modt-roomchatdrag"],[1,"oldhabbo-headhoodmt"],[1,"old-kapat",3,"click"],[1,"room-conversation-recordings-list"],[4,"ngFor","ngForOf"],[1,"roomchatlog-infobox"],[1,"rc-roomname"],[1,"rc-button",3,"click"],[1,"rcbutton-txt"],["class","talk-box",4,"ngFor","ngForOf"],[1,"talk-box"],[1,"message-clock"],[1,"user-who-sent-message"],[1,"message-sent"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.cc(),i.dc(4,"div",3),i.nc("click",function(){return e.close()}),i.cc(),i.cc(),i.dc(5,"div",4),i.Tc(6,tC,11,2,"div",5),i.cc(),i.cc()),2&t&&(i.xc("center",!1),i.Kb(3),i.Wc(e.title),i.Kb(3),i.xc("ngForOf",e.getData()))},directives:[Lr,p.m],encapsulation:2}),t})();var sC=s("SylX"),iC=s("AYkW");function nC(t,e){if(1&t&&(i.dc(0,"option",32),i.Vc(1),i.cc()),2&t){const t=e.$implicit;i.xc("value",e.index),i.Kb(1),i.Wc(t)}}function rC(t,e){if(1&t){const t=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"p",3),i.Vc(3,"Room Information"),i.cc(),i.dc(4,"div",4),i.nc("click",function(){return i.Kc(t),i.qc().close()}),i.cc(),i.cc(),i.dc(5,"div",5),i.dc(6,"div",6),i.dc(7,"p",7),i.Vc(8),i.cc(),i.dc(9,"p",8),i.Vc(10),i.cc(),i.cc(),i.dc(11,"div",9),i.dc(12,"div",10),i.dc(13,"div",11),i.dc(14,"p",12),i.Vc(15,"Owner:"),i.cc(),i.dc(16,"p",13),i.Vc(17),i.cc(),i.cc(),i.dc(18,"div",11),i.dc(19,"p",14),i.Vc(20,"Users inside:"),i.cc(),i.dc(21,"p",15),i.Vc(22),i.cc(),i.cc(),i.dc(23,"div",11),i.dc(24,"p",14),i.Vc(25,"Owner inside:"),i.cc(),i.dc(26,"p",15),i.Vc(27),i.cc(),i.cc(),i.dc(28,"div",11),i.dc(29,"p",14),i.Vc(30,"Activity?"),i.cc(),i.dc(31,"p",15),i.Vc(32,"no"),i.cc(),i.cc(),i.cc(),i.dc(33,"div",16),i.dc(34,"div",17),i.nc("click",function(){return i.Kc(t),i.qc().enterRoom()}),i.dc(35,"p",18),i.Vc(36,"Enter "),i.cc(),i.cc(),i.dc(37,"div",19),i.dc(38,"p",20),i.nc("click",function(){return i.Kc(t),i.qc().openChatlog()}),i.Vc(39,"View chat "),i.cc(),i.cc(),i.dc(40,"div",19),i.dc(41,"a",21),i.dc(42,"p",18),i.Vc(43,"Open HK"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(44,"div",22),i.dc(45,"label",23),i.dc(46,"p",24),i.Vc(47,"Get all users out of the room (paralyzes if there is an incident)"),i.cc(),i.dc(48,"input",25),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().kickUsers=e}),i.cc(),i.Zb(49,"span",26),i.cc(),i.dc(50,"label",23),i.dc(51,"p",27),i.Vc(52,"Put a doorbell in the room"),i.cc(),i.dc(53,"input",25),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().lockDoor=e}),i.cc(),i.Zb(54,"span",26),i.cc(),i.dc(55,"label",28),i.dc(56,"p",29),i.Vc(57,"Change the room name to (Inappropriate for Managers Management)."),i.cc(),i.dc(58,"input",25),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().changeTitle=e}),i.cc(),i.Zb(59,"span",26),i.cc(),i.cc(),i.dc(60,"textarea",30),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().message=e}),i.cc(),i.dc(61,"select",31),i.nc("ngModelChange",function(e){return i.Kc(t),i.qc().optionId=e})("change",function(){i.Kc(t);const e=i.qc();return e.selectMessage(e.optionId)}),i.dc(62,"option",32),i.Vc(63,"Select from messsage templates"),i.cc(),i.Tc(64,nC,2,2,"option",33),i.cc(),i.dc(65,"button",34),i.nc("click",function(){return i.Kc(t),i.qc().send()}),i.dc(66,"p",18),i.Vc(67,"Save"),i.cc(),i.cc(),i.cc(),i.cc()}if(2&t){const t=i.qc();i.xc("center",!1),i.Kb(8),i.Wc(t.room.name),i.Kb(2),i.Wc(t.room.description),i.Kb(7),i.Wc(t.room.ownerName),i.Kb(5),i.Wc(t.room.playerAmount+1),i.Kb(5),i.Wc(t.room.owner?"yes":"no"),i.Kb(21),i.xc("ngModel",t.kickUsers),i.Kb(5),i.xc("ngModel",t.lockDoor),i.Kb(5),i.xc("ngModel",t.changeTitle),i.Kb(2),i.xc("ngModel",t.message),i.Kb(1),i.xc("ngModel",t.optionId),i.Kb(1),i.xc("value",-1),i.Kb(2),i.xc("ngForOf",t.options),i.Kb(1),i.xc("disabled",!t.isInCurrentRoom())}}let aC=(()=>{class t extends Yy{constructor(t,e,s){super(),this._modToolService=t,this._navigatorService=e,this._notificationService=s,this.lockDoor=!1,this.changeTitle=!1,this.kickUsers=!1,this.optionId="-1",this.message=""}ngOnInit(){}ngOnDestroy(){}close(){this._modToolService.showRoomTools=!1}send(){0!=this.message.trim().length?(_.a.instance.communication.connection.send(new iC.a(1,this.message,"")),(this.kickUsers||this.changeTitle||this.lockDoor)&&_.a.instance.communication.connection.send(new sC.a(this.room.id,this.lockDoor?1:0,this.changeTitle?1:0,this.kickUsers?1:0)),this._modToolService.showRoomTools=!1):this._notificationService.alert("You must input a message to the user")}isInCurrentRoom(){return this._modToolService.currentRoom.roomId==this._modToolService.currentRoomModData.id}enterRoom(){this._navigatorService.goToPrivateRoom(this.room.id)}openChatlog(){_.a.instance.communication.connection.send(new ti.a(this.room.id)),this._modToolService.showRoomChatLogs=!0}get room(){return this._modToolService.currentRoomModData}get options(){return this._modToolService._Str_3325?this._modToolService._Str_3325._Str_18336:[]}selectMessage(t){if("-1"==t)return void(this.message="");const e=parseInt(t);this.message=this.options[e]}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(ii),i.Yb(hl),i.Yb(ss))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-mod-tool-room-component"]],features:[i.Hb],decls:1,vars:1,consts:[["dragHandle","#modt-roominfodrag","id","modt-roominfo",3,"draggable","center",4,"ngIf"],["dragHandle","#modt-roominfodrag","id","modt-roominfo",3,"draggable","center"],["id","modt-roominfodrag"],[1,"mtri-baslik"],[1,"old-kapat",3,"click"],[1,"modt-ribox"],[1,"ri-roomnamebox"],[1,"rirntxt"],[1,"rirdtxt"],[1,"ri-roominfobox"],[1,"ribleft"],[1,"rib-infobox"],[1,"rib-hood",2,"width","65px"],[1,"rib-reply",2,"text-decoration","underline"],[1,"rib-hood"],[1,"rib-reply"],[1,"ribright"],[1,"rib-button",3,"click"],[1,"ribbutton-txt"],[1,"rib-button"],[1,"ribbutton-txt",3,"click"],["href","/housekeeping/rooms/1","target","_blank"],[1,"rib-apply_action_to_room"],[1,"mt-select_container"],["for","kick-users",1,"mt-sctxt",2,"padding-top","0px"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"checkmarkmt"],["for","lock-room",1,"mt-sctxt"],[1,"mt-select_container",2,"margin-top","11px"],["for","change-title",1,"mt-sctxt",2,"padding-top","0px"],[1,"mt-room_warning_message",2,"margin-top","5px",3,"ngModel","ngModelChange"],["id","modt-select",2,"margin-top","-1px","float","left",3,"ngModel","ngModelChange","change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"rib-button2",2,"float","right",3,"disabled","click"]],template:function(t,e){1&t&&i.Tc(0,rC,68,14,"div",0),2&t&&i.xc("ngIf",e.room)},directives:[p.n,Lr,rr.a,rr.l,rr.n,rr.b,rr.t,rr.o,rr.v,p.m],encapsulation:2}),t})(),oC=(()=>{class t{constructor(t,e,s,i,n){this._actionId=t,this._name=e,this._actionType=s,this._sanctionTypeId=i,this._actionLengthHours=n}get actionId(){return this._actionId}get name(){return this._name}get actionType(){return this._actionType}get _Str_22995(){return this._sanctionTypeId}get _Str_25670(){return this._actionLengthHours}}return t.ALERT=1,t.MUTE=2,t.BAN=3,t.KICK=4,t.TRADE_LOCK=5,t.MESSAGE=6,t})();var cC=s("SbyL"),hC=s("DicI"),lC=s("KAV2"),uC=s("aBXB"),_C=s("vd+k"),dC=s("EEQp");function gC(t,e){if(1&t&&(i.dc(0,"option",6),i.Vc(1),i.cc()),2&t){const t=e.$implicit;i.xc("value",e.index),i.Kb(1),i.Wc(t)}}function mC(t,e){if(1&t&&(i.dc(0,"option",6),i.Vc(1),i.cc()),2&t){const t=e.$implicit;i.xc("value",e.index),i.Kb(1),i.Wc(t.name)}}let pC=(()=>{class t extends Yy{constructor(t,e){super(),this._modToolService=t,this._notifications=e,this.user=null,this.cfhType="-1",this.sanction="-1",this.message="",this._actions=[],this._actions=[new oC(1,"Alert",oC.ALERT,1,0),new oC(2,"Mute 1h",oC.MUTE,2,0),new oC(4,"Ban 7 days",oC.BAN,4,0),new oC(3,"Ban 18h",oC.BAN,3,0),new oC(5,"Ban 30 days (step 1)",oC.BAN,5,0),new oC(7,"Ban 30 days (step 2)",oC.BAN,7,0),new oC(6,"Ban 100 years",oC.BAN,6,0),new oC(106,"Ban avatar-only 100 years",oC.BAN,6,0),new oC(101,"Kick",oC.KICK,0,0),new oC(102,"Lock trade 1 week",oC.TRADE_LOCK,0,168),new oC(104,"Lock trade permanent",oC.TRADE_LOCK,0,876e3),new oC(105,"Message",oC.MESSAGE,0,0)]}ngOnInit(){}ngOnDestroy(){}sendSanction(){if("-1"==this.sanction)return void this._notifications.alert("Please select a sanction.");if("-1"==this.cfhType)return void this._notifications.alert("Please select a topic.");parseInt(this.cfhType);const t=this._actions[parseInt(this.sanction)];switch(t.actionType){case oC.ALERT:if(!this._modToolService._Str_3325._Str_18465)return void this._notifications.alert("You have insufficient permissions.");_.a.instance.communication.connection.send(new _C.a(this.user.id,this.message,parseInt(this.cfhType)));break;case oC.MUTE:_.a.instance.communication.connection.send(new dC.a(this.user.id,this.message,parseInt(this.cfhType)));break;case oC.BAN:if(!this._modToolService._Str_3325._Str_21242)return void this._notifications.alert("You have insufficient permissions.");_.a.instance.communication.connection.send(new cC.a(this.user.id,this.message,parseInt(this.cfhType),parseInt(this.sanction),106==t.actionId));break;case oC.KICK:if(!this._modToolService._Str_3325._Str_20397)return void this._notifications.alert("You have insufficient permissions.");_.a.instance.communication.connection.send(new hC.a(this.user.id,this.message,parseInt(this.cfhType)));break;case oC.TRADE_LOCK:_.a.instance.communication.connection.send(new lC.a(this.user.id,this.message,60*t._Str_25670,parseInt(this.cfhType)));break;case oC.MESSAGE:if(0==this.message.trim().length)return void this._notifications.alert("Please write a message to user.");_.a.instance.communication.connection.send(new uC.a(this.user.id,this.message,parseInt(this.cfhType)))}this._modToolService.showModActionOnUser=!1}close(){this._modToolService.showModActionOnUser=!1}get categories(){const t=this._modToolService.callForHelpCategories,e=[];for(const s of t)for(const t of s.topics)e.push(_.a.instance.localization.getValue("help.cfh.topic."+t.id));return e}get actions(){return this._actions}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(ii),i.Yb(ss))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-mod-tool-mod-action-user-component"]],inputs:{user:"user"},features:[i.Hb],decls:20,vars:9,consts:[["dragHandle","#modt-roominfodrag","id","modt-roominfo",3,"draggable","center"],["id","modt-roominfodrag"],[1,"mtri-baslik"],[1,"old-kapat",3,"click"],[1,"modt-ribox"],["id","modt-select",2,"margin-top","-1px","float","left",3,"ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"rirntxt"],[1,"mt-room_warning_message",3,"ngModel","ngModelChange"],[1,"rib-button2",2,"float","right",3,"click"],[1,"ribbutton-txt"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.cc(),i.dc(4,"div",3),i.nc("click",function(){return e.close()}),i.cc(),i.cc(),i.dc(5,"div",4),i.dc(6,"select",5),i.nc("ngModelChange",function(t){return e.cfhType=t}),i.dc(7,"option",6),i.Vc(8,"CFH Topic:"),i.cc(),i.Tc(9,gC,2,2,"option",7),i.cc(),i.dc(10,"select",5),i.nc("ngModelChange",function(t){return e.sanction=t}),i.dc(11,"option",6),i.Vc(12,"Sanction type:"),i.cc(),i.Tc(13,mC,2,2,"option",7),i.cc(),i.dc(14,"p",8),i.Vc(15,"Optional message type, overrides default"),i.cc(),i.dc(16,"textarea",9),i.nc("ngModelChange",function(t){return e.message=t}),i.cc(),i.dc(17,"button",10),i.nc("click",function(){return e.sendSanction()}),i.dc(18,"p",11),i.Vc(19,"Sanction"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.xc("center",!1),i.Kb(3),i.Xc("Mod Actions on ",e.user.username,""),i.Kb(3),i.xc("ngModel",e.cfhType),i.Kb(1),i.xc("value",-1),i.Kb(2),i.xc("ngForOf",e.categories),i.Kb(1),i.xc("ngModel",e.sanction),i.Kb(1),i.xc("value",-1),i.Kb(2),i.xc("ngForOf",e.actions),i.Kb(3),i.xc("ngModel",e.message))},directives:[Lr,rr.t,rr.l,rr.n,rr.o,rr.v,p.m,rr.b],encapsulation:2}),t})();function fC(t,e){if(1&t&&(i.dc(0,"div",11),i.dc(1,"p",12),i.Vc(2),i.cc(),i.dc(3,"p",13),i.Vc(4),i.cc(),i.dc(5,"p",14),i.Vc(6),i.cc(),i.cc()),2&t){const t=e.$implicit;i.Kb(2),i.Wc(t.timestamp),i.Kb(2),i.Wc(t.userName),i.Kb(2),i.Wc(t.message)}}function EC(t,e){if(1&t){const t=i.ec();i.dc(0,"div"),i.dc(1,"div",6),i.dc(2,"p",7),i.Vc(3),i.cc(),i.dc(4,"div",8),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().openRoomTools(s.roomId)}),i.dc(5,"p",9),i.Vc(6,"Room information"),i.cc(),i.cc(),i.dc(7,"div",8),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().goToRoom(s.roomId)}),i.dc(8,"p",9),i.Vc(9,"Go to room"),i.cc(),i.cc(),i.cc(),i.Tc(10,fC,7,3,"div",10),i.cc()}if(2&t){const t=e.$implicit;i.Kb(3),i.Xc("Room: ",t.roomName,""),i.Kb(7),i.xc("ngForOf",t.chatlogs)}}let SC=(()=>{class t extends Jy{constructor(t,e,s){super(t,s),this._modToolService=t,this._modToolUserInfoService=e,this._navigatorService=s}get title(){return this.user?"Chatlogs: "+this.user.username:""}getData(){return this._modToolService.roomVisits?this._modToolService.roomVisits:[]}close(){this._modToolService.showSendUserChatlogs=!1}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(ii),i.Yb(Rb),i.Yb(hl))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-mod-tool-user-chatlogs-component"]],inputs:{user:"user"},features:[i.Hb],decls:7,vars:3,consts:[["dragHandle","#modt-roomchatdrag","id","modt-roomchat",3,"draggable","center"],["id","modt-roomchatdrag"],[1,"oldhabbo-headhoodmt"],[1,"old-kapat",3,"click"],[1,"room-conversation-recordings-list"],[4,"ngFor","ngForOf"],[1,"roomchatlog-infobox"],[1,"rc-roomname"],[1,"rc-button",3,"click"],[1,"rcbutton-txt"],["class","talk-box",4,"ngFor","ngForOf"],[1,"talk-box"],[1,"message-clock"],[1,"user-who-sent-message"],[1,"message-sent"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.cc(),i.dc(4,"div",3),i.nc("click",function(){return e.close()}),i.cc(),i.cc(),i.dc(5,"div",4),i.Tc(6,EC,11,2,"div",5),i.cc(),i.cc()),2&t&&(i.xc("center",!1),i.Kb(3),i.Wc(e.title),i.Kb(3),i.xc("ngForOf",e.getData()))},directives:[Lr,p.m],encapsulation:2}),t})();function vC(t,e){if(1&t){const t=i.ec();i.dc(0,"div",6),i.dc(1,"p",7),i.Vc(2),i.cc(),i.dc(3,"p",8),i.Vc(4),i.cc(),i.dc(5,"button",9),i.nc("click",function(){i.Kc(t);const s=e.$implicit;return i.qc().goToRoom(s)}),i.dc(6,"p",10),i.Vc(7,"Enter"),i.cc(),i.cc(),i.cc()}if(2&t){const t=e.$implicit,s=i.qc();i.Kb(2),i.Wc(s.showTime(t)),i.Kb(2),i.Wc(t.roomName)}}let bC=(()=>{class t extends Yy{constructor(t,e,s){super(),this._modToolService=t,this._modToolUserInfoService=e,this._navigatorService=s,this.user=null}ngOnInit(){}ngOnDestroy(){}close(){this._modToolService.closeRoomVisitedTool()}get roomVisitedForUser(){return this._modToolService.roomUserVisitedData?this._modToolService.roomUserVisitedData.rooms:[]}showTime(t){const e=t._Str_25550;return this.prependZero(t._Str_22929)+":"+this.prependZero(e)}prependZero(t){return t<10?"0"+t:t.toString()}goToRoom(t){this._navigatorService.goToPrivateRoom(t.roomId)}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(ii),i.Yb(Rb),i.Yb(hl))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-mod-tool-user-visited-rooms-component"]],inputs:{user:"user"},features:[i.Hb],decls:8,vars:3,consts:[["dragHandle","#modt-roomchatdrag","id","modt-roomchat",3,"draggable","center"],["id","modt-roomchatdrag"],[1,"oldhabbo-headhoodmt"],[1,"old-kapat",3,"click"],[1,"room-conversation-recordings-list"],["class","talk-box","style","position: relative;",4,"ngFor","ngForOf"],[1,"talk-box",2,"position","relative"],[1,"odayagiris-saat"],[1,"roomnameamk"],["type","button",1,"odayagirbutton",3,"click"],[1,"odayagirbutton-txt"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.cc(),i.dc(4,"div",3),i.nc("click",function(){return e.close()}),i.cc(),i.cc(),i.dc(5,"div"),i.dc(6,"div",4),i.Tc(7,vC,8,2,"div",5),i.cc(),i.cc(),i.cc()),2&t&&(i.xc("center",!1),i.Kb(3),i.Xc("Room visits: ",e.user.username,""),i.Kb(4),i.xc("ngForOf",e.roomVisitedForUser))},directives:[Lr,p.m],encapsulation:2}),t})();function IC(t,e){if(1&t&&(i.dc(0,"option",7),i.Vc(1),i.cc()),2&t){const t=e.$implicit;i.xc("value",e.index),i.Kb(1),i.Wc(t)}}let RC=(()=>{class t extends Yy{constructor(t,e,s){super(),this._modToolService=t,this._modToolUserInfoService=e,this._notificationService=s,this.user=null,this.optionId="-1",this.message=""}ngOnInit(){}ngOnDestroy(){}close(){this._modToolService.showSendUserMessage=!1}get options(){return this._modToolService._Str_3325?this._modToolService._Str_3325._Str_15690:[]}selectMessage(t){if("-1"==t)return void(this.message="");const e=parseInt(t);this.message=this.options[e]}sendMessage(){0!=this.message.trim().length?(_.a.instance.communication.connection.send(new uC.a(this.user.id,this.message,-999)),this._modToolService.showSendUserMessage=!1):this._notificationService.alert("Please enter a message")}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(ii),i.Yb(Rb),i.Yb(ss))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-mod-tool-user-send-message-component"]],inputs:{user:"user"},features:[i.Hb],decls:14,vars:6,consts:[["dragHandle","#modt-roominfodrag","id","modt-roominfo",3,"draggable","center"],["id","modt-roominfodrag"],[1,"mtri-baslik"],[1,"old-kapat",3,"click"],[1,"modt-ribox"],[1,"mt-room_warning_message",3,"ngModel","ngModelChange"],["id","modt-select",2,"margin-top","-1px","float","left",3,"ngModel","ngModelChange","change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"rib-button2",2,"float","right",3,"click"],[1,"ribbutton-txt"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.cc(),i.dc(4,"div",3),i.nc("click",function(){return e.close()}),i.cc(),i.cc(),i.dc(5,"div",4),i.dc(6,"textarea",5),i.nc("ngModelChange",function(t){return e.message=t}),i.cc(),i.dc(7,"select",6),i.nc("ngModelChange",function(t){return e.optionId=t})("change",function(){return e.selectMessage(e.optionId)}),i.dc(8,"option",7),i.Vc(9,"Message :"),i.cc(),i.Tc(10,IC,2,2,"option",8),i.cc(),i.dc(11,"button",9),i.nc("click",function(){return e.sendMessage()}),i.dc(12,"p",10),i.Vc(13,"Send message"),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.xc("center",!1),i.Kb(3),i.Xc(" Message to: ",e.user.username,""),i.Kb(3),i.xc("ngModel",e.message),i.Kb(1),i.xc("ngModel",e.optionId),i.Kb(1),i.xc("value",-1),i.Kb(2),i.xc("ngForOf",e.options))},directives:[Lr,rr.b,rr.l,rr.n,rr.t,rr.o,rr.v,p.m],encapsulation:2}),t})();var TC=s("q5XJ"),OC=s("LRPw");function yC(t,e){if(1&t&&(i.dc(0,"div",11),i.dc(1,"p",12),i.Vc(2),i.cc(),i.dc(3,"p",13),i.Vc(4),i.cc(),i.cc()),2&t){const t=e.$implicit,s=i.qc();i.Kb(2),i.Wc(s.getTranslatedForKey(t.nameKey,t.nameKeyFallback)),i.Kb(2),i.Wc(t.value)}}let CC=(()=>{class t extends Yy{constructor(t,e){super(),this._modToolService=t,this._modToolUserInfoService=e,this.user=null}ngOnInit(){}ngOnDestroy(){}close(){this._modToolService.closeUserTool()}userData(){return this._modToolUserInfoService.currentUserInfo}get userProperties(){const e=this._modToolUserInfoService.currentUserInfo;return e?[{nameKey:"name",nameKeyFallback:"Name",value:e.userName},{nameKey:"cfhs",nameKeyFallback:"CFHs",value:e._Str_24656.toString()},{nameKey:"abusive_cfhs",nameKeyFallback:"Abusive CFHs",value:e._Str_22987.toString()},{nameKey:"cautions",nameKeyFallback:"Cautions",value:e._Str_16987.toString()},{nameKey:"bans",nameKeyFallback:"Bans",value:e._Str_20373.toString()},{nameKey:"last_sanction",nameKeyFallback:"Last sanction",value:e._Str_24447},{nameKey:"trade_locks",nameKeyFallback:"Trade locks",value:e._Str_24526.toString()},{nameKey:"lock_expires",nameKeyFallback:"Lock expires",value:e._Str_23969},{nameKey:"last_login",nameKeyFallback:"Last login",value:t._Str_12797(60*e._Str_23276)},{nameKey:"purchase",nameKeyFallback:"Purchases",value:e._Str_22786},{nameKey:"email",nameKeyFallback:"Email",value:e._Str_20219},{nameKey:"acc_bans",nameKeyFallback:"Banned Accs.",value:e._Str_22700.toString()},{nameKey:"registered",nameKeyFallback:"Registered",value:t._Str_12797(60*e._Str_24334)},{nameKey:"rank",nameKeyFallback:"Rank",value:e._Str_22262}]:[]}handleClick(t){switch(t){case"roomchat":this._modToolService.showSendUserChatlogs=!0,_.a.instance.communication.connection.send(new OC.a(this.user.id));break;case"send_message":this._modToolService.showSendUserMessage=!0;break;case"room_visits":this._modToolService.showVisitedRoomsForUser=!0,_.a.instance.communication.connection.send(new TC.a(this.user.id));break;case"mod_action":this._modToolService.showModActionOnUser=!0}}static _Str_12797(t){return t<120?t+" secs ago":t<7200?Math.round(t/60)+" mins ago":t<172800?Math.round(t/3600)+" hours ago":t<63072e3?Math.round(t/86400)+" days ago":Math.round(t/31536e3)+" years ago"}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(ii),i.Yb(Rb))},t.\u0275cmp=i.Sb({type:t,selectors:[["nitro-mod-tool-user-component"]],inputs:{user:"user"},features:[i.Hb],decls:22,vars:7,consts:[["dragHandle",".userinfomt-header",1,"userinfomt",3,"draggable","center"],[1,"userinfomt-header"],[1,"mtri-baslik"],[1,"old-kapat",3,"click"],[1,"userinfobox"],[1,"userinfo-detail"],[1,"uidetailleft"],["class","uidetail-infobox",4,"ngFor","ngForOf"],[1,"uidetailright"],["type","button",1,"uidetailbutton",3,"click"],[1,"ribbutton-txt"],[1,"uidetail-infobox"],[1,"uidtxt1"],[1,"uidtxt2"]],template:function(t,e){1&t&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"p",2),i.Vc(3),i.cc(),i.dc(4,"div",3),i.nc("click",function(){return e.close()}),i.cc(),i.cc(),i.dc(5,"div",4),i.dc(6,"div",5),i.dc(7,"div",6),i.Tc(8,yC,5,2,"div",7),i.cc(),i.dc(9,"div",8),i.dc(10,"button",9),i.nc("click",function(){return e.handleClick("roomchat")}),i.dc(11,"p",10),i.Vc(12),i.cc(),i.cc(),i.dc(13,"button",9),i.nc("click",function(){return e.handleClick("send_message")}),i.dc(14,"p",10),i.Vc(15),i.cc(),i.cc(),i.dc(16,"button",9),i.nc("click",function(){return e.handleClick("room_visits")}),i.dc(17,"p",10),i.Vc(18),i.cc(),i.cc(),i.dc(19,"button",9),i.nc("click",function(){return e.handleClick("mod_action")}),i.dc(20,"p",10),i.Vc(21),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.cc()),2&t&&(i.xc("center",!1),i.Kb(3),i.Wc(e.user.username),i.Kb(5),i.xc("ngForOf",e.userProperties),i.Kb(4),i.Wc(e.getTranslatedForKey("roomchat","Room Chat")),i.Kb(3),i.Wc(e.getTranslatedForKey("send_message","Send Message")),i.Kb(3),i.Wc(e.getTranslatedForKey("room_visits","Room Visits")),i.Kb(3),i.Wc(e.getTranslatedForKey("mod_action","Mod Action")))},directives:[Lr,p.m],encapsulation:2}),t})(),AC=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[ii,Rb],imports:[[Yb,n.a]]}),t})();i.Nc(Ub,[p.n,Tr,Lr,aC,eC,CC,Xy,pC,bC,RC,SC],[]);let MC=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},imports:[[Yb,qb,bI,II,uR,GR,ST,vT,dO,Ay,My,wy,Ly,Py,zy,AC,Fy,zy,_R,ET,ky]]}),t})(),wC=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[m]}),t})(),DC=(()=>{class t{}return t.\u0275mod=i.Wb({type:t}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},providers:[Vi]}),t})(),NC=(()=>{class t{}return t.\u0275mod=i.Wb({type:t,bootstrap:[Wb]}),t.\u0275inj=i.Vb({factory:function(e){return new(e||t)},imports:[[Yb,wC,DC,MC,n.a,r.a]]}),t})();Object(i.cb)(),n.c().bootstrapModule(NC).catch(t=>console.log(t))},zVPj:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._itemId=0,this._isExpired=!0,this._userId=0,this._delay=0,!0}parse(t){return!!t&&(this._itemId=parseInt(t.readString()),this._isExpired=t.readBoolean(),this._userId=t.readInt(),this._delay=t.readInt(),!0)}get itemId(){return this._itemId}get isExpired(){return this._isExpired}get userId(){return this._userId}get delay(){return this._delay}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},zWsf:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("5+UO");class n{flush(){return this._roomId=0,!0}parse(t){return!!t&&(this._roomId=t.readInt(),!0)}get roomId(){return this._roomId}}class r extends i.a{constructor(t){super(t,n)}getParser(){return this.parser}}},zeoL:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(t){this._data=[t]}getMessageArray(){return this._data}dispose(){}}},zn8P:function(t,e){function s(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}s.keys=function(){return[]},s.resolve=s,t.exports=s,s.id="zn8P"}},[[0,0,4]]]);