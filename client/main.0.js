(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},"02+m":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("wDsT"),s=n("7deb"),c=n("fXoL");let o=(()=>{class e extends r.a{get code(){return e.CODE}get requiresFurni(){return i.a._Str_4991}}return e.CODE=s.a.AVATAR_WALKS_ON_FURNI,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:1,vars:0,template:function(e,t){1&e&&c.Zb(0,"nitro-wired-base-component")},encapsulation:2}),e})();const a=c.fc(o)},"0DQ5":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("bwAN"),r=n("fXoL");let s=(()=>{class e{transform(e,t=null,n=null){return t&&Array.isArray(t)&&n&&Array.isArray(n)&&t.length===n.length?i.a.instance.getLocalizationWithParameters(e,t,n):t&&n?i.a.instance.getLocalizationWithParameter(e,t,n):i.a.instance.getLocalization(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Xb({name:"translate",type:e,pure:!0}),e})()},"0KUG":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("gKK4"),r=n("VFvI"),s=n("fXoL");let c=(()=>{class e extends i.a{constructor(){super(...arguments),this.allowedHanditemIds=["2","5","7","8","9","10","27"],this.handitemId="0"}get code(){return e.CODE}onEditStart(e){this.handitemId=e.intData.length>0&&this.allowedHanditemIds.includes(e.intData[0].toString())?e.intData[0].toString():"0"}readIntegerParamsFromForm(){return[parseInt(this.handitemId)]}get hasSpecialInputs(){return!0}}return e.CODE=r.a.ACTOR_HAS_HANDITEM,e.\u0275fac=function(t){return o(t||e)},e.\u0275cmp=s.Sb({type:e,selectors:[["ng-component"]],features:[s.Hb],decls:30,vars:36,consts:[[1,"form-group"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","0",3,"selected"],["value","2",3,"selected"],["value","5",3,"selected"],["value","7",3,"selected"],["value","8",3,"selected"],["value","9",3,"selected"],["value","10",3,"selected"],["value","27",3,"selected"]],template:function(e,t){1&e&&(s.dc(0,"nitro-wired-base-component"),s.dc(1,"div",0),s.dc(2,"label"),s.Wc(3),s.rc(4,"translate"),s.cc(),s.dc(5,"select",1),s.nc("ngModelChange",function(e){return t.handitemId=e}),s.dc(6,"option",2),s.Wc(7),s.rc(8,"translate"),s.cc(),s.dc(9,"option",3),s.Wc(10),s.rc(11,"translate"),s.cc(),s.dc(12,"option",4),s.Wc(13),s.rc(14,"translate"),s.cc(),s.dc(15,"option",5),s.Wc(16),s.rc(17,"translate"),s.cc(),s.dc(18,"option",6),s.Wc(19),s.rc(20,"translate"),s.cc(),s.dc(21,"option",7),s.Wc(22),s.rc(23,"translate"),s.cc(),s.dc(24,"option",8),s.Wc(25),s.rc(26,"translate"),s.cc(),s.dc(27,"option",9),s.Wc(28),s.rc(29,"translate"),s.cc(),s.cc(),s.cc(),s.cc()),2&e&&(s.Kb(3),s.Xc(s.sc(4,18,"wiredfurni.params.handitem")),s.Kb(2),s.yc("ngModel",t.handitemId),s.Kb(1),s.yc("selected","0"==t.handitemId),s.Kb(1),s.Xc(s.sc(8,20,"wiredfurni.tooltip.handitem")),s.Kb(2),s.yc("selected","2"==t.handitemId),s.Kb(1),s.Xc(s.sc(11,22,"handitem2")),s.Kb(2),s.yc("selected","5"==t.handitemId),s.Kb(1),s.Xc(s.sc(14,24,"handitem5")),s.Kb(2),s.yc("selected","7"==t.handitemId),s.Kb(1),s.Xc(s.sc(17,26,"handitem7")),s.Kb(2),s.yc("selected","8"==t.handitemId),s.Kb(1),s.Xc(s.sc(20,28,"handitem8")),s.Kb(2),s.yc("selected","9"==t.handitemId),s.Kb(1),s.Xc(s.sc(23,30,"handitem9")),s.Kb(2),s.yc("selected","10"==t.handitemId),s.Kb(1),s.Xc(s.sc(26,32,"handitem10")),s.Kb(2),s.yc("selected","27"==t.handitemId),s.Kb(1),s.Xc(s.sc(29,34,"handitem27")))},encapsulation:2}),e})();const o=s.fc(c)},"0c+i":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("gKK4"),s=n("VFvI"),c=n("fXoL");let o=(()=>{class e extends r.a{constructor(){super(...arguments),this.requireAll="0"}get code(){return e.CODE}get requiresFurni(){return i.a._Str_4873}onEditStart(e){this.requireAll=e.intData.length>0&&1===e.intData[0]?"1":"0"}readIntegerParamsFromForm(){return["1"===this.requireAll?1:0]}get hasSpecialInputs(){return!0}}return e.CODE=s.a.NOT_HAS_STACKED_FURNIS,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:13,vars:11,consts:[[1,"form-check"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.dc(0,"nitro-wired-base-component"),c.Wc(1),c.rc(2,"translate"),c.dc(3,"div",0),c.dc(4,"input",1),c.nc("ngModelChange",function(e){return t.requireAll=e}),c.cc(),c.dc(5,"label",2),c.Wc(6),c.rc(7,"translate"),c.cc(),c.cc(),c.dc(8,"div",0),c.dc(9,"input",3),c.nc("ngModelChange",function(e){return t.requireAll=e}),c.cc(),c.dc(10,"label",2),c.Wc(11),c.rc(12,"translate"),c.cc(),c.cc(),c.cc()),2&e&&(c.Kb(1),c.Yc(" ",c.sc(2,5,"wiredfurni.params.not_requireall")," "),c.Kb(3),c.yc("ngModel",t.requireAll),c.Kb(2),c.Xc(c.sc(7,7,"wiredfurni.params.not_requireall.0")),c.Kb(3),c.yc("ngModel",t.requireAll),c.Kb(2),c.Xc(c.sc(12,9,"wiredfurni.params.not_requireall.1")))},encapsulation:2}),e})();const a=c.fc(o)},"0kp3":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("wYOr"),r=n("MFnH"),s=n("rQ5G"),c=n("bwAN"),o=n("fXoL");let a=(()=>{class e{constructor(e){this.elementRef=e,this.figure="",this.gender="M",this.headOnly=!1,this.direction=0,this.scale=1,this.asBackground=!1,this._avatarImageCache=new i.a,this.avatarUrl=null,this.disposed=!1,this.needsUpdate=!0}ngOnInit(){this.needsUpdate&&this.buildAvatar()}ngOnChanges(e){const t=e.figure;t&&t.previousValue!==t.currentValue&&(this.needsUpdate=!0);const n=e.gender;n&&n.previousValue!==n.currentValue&&(this.needsUpdate=!0);const i=e.headOnly;i&&i.previousValue!==i.currentValue&&(this.needsUpdate=!0);const r=e.direction;r&&r.previousValue!==r.currentValue&&(this.needsUpdate=!0),this.needsUpdate&&this.buildAvatar()}dispose(){}resetFigure(e){this._avatarImageCache.remove(this.getAvatarBuildString()),this.buildAvatar()}buildAvatar(){this.needsUpdate=!1;const e=this.getUserImageUrl();if(!e||!e.length)return;const t=this.elementRef.nativeElement;if(t)if(this.asBackground)t.style.backgroundImage=`url(${e})`,t.style.backgroundPositionY="-31px";else{const n=t.getElementsByClassName("avatar-image");let i=n.length;for(;i<0;)n[i].remove(),i--;const r=document.createElement("img");r.className="avatar-image scale-"+this.scale,r.src=e}}getUserImageUrl(){const e=this.getAvatarBuildString();let t=this._avatarImageCache.getValue(e);if(!t){const n=c.a.instance.avatar.createAvatarImage(this.figure,r.a.LARGE,this.gender,this,null);if(n){let e=s.a.FULL;this.headOnly&&(e=s.a.HEAD),n.setDirection(e,this.direction);const i=n.getCroppedImage(e);i&&(t=i.src),n.dispose()}t&&t.length&&this.putInCache(e,t)}return t}putInCache(t,n){this._avatarImageCache.length===e.MAX_CACHE_SIZE&&this._avatarImageCache.remove(this._avatarImageCache.getKey(0)),this._avatarImageCache.add(t,n)}getAvatarBuildString(){return`${this.figure}:${this.gender}:${this.direction}:${this.headOnly}`}}return e.MAX_CACHE_SIZE=10,e.\u0275fac=function(t){return new(t||e)(o.Yb(o.p))},e.\u0275dir=o.Tb({type:e,selectors:[["","avatar-image",""]],inputs:{figure:"figure",gender:"gender",headOnly:"headOnly",direction:"direction",scale:"scale",asBackground:"asBackground"},features:[o.Ib]}),e})()},"1/Ir":function(e,t,n){"use strict";n.d(t,"a",function(){return k});var i=n("wnz0"),r=n("G79s"),s=n("KuiT"),c=n("5AKg"),o=n("3znA"),a=n("9qbr"),l=n("yeQ0"),d=n("3+UD"),u=n("N8xT"),h=n("9oQK"),g=n("tRbi"),m=n("bsi1"),f=n("a9VV"),p=n("luEC"),_=n("srke"),b=n("xDpK"),v=n("+YRd"),E=n("zx/P"),S=n("Sj99"),y=n("+NFE"),I=n("6gwF"),w=n("Q9qI"),C=n("ehc0"),R=n("slk0"),T=n("xQjK"),O=n("LvG+"),M=n("bwAN"),U=n("+FnT"),x=n("nrNS"),A=n("fXoL"),D=n("l1qq"),L=n("1kSV");let k=(()=>{class e{constructor(e,t,n){this._notificationService=e,this._modalService=t,this._ngZone=n,this._messages=[],this._badgeBases=new Map,this._badgeSymbols=new Map,this._badgePartColors=new Map,this._groupColorsA=new Map,this._groupColorsB=new Map,this._leavingGroupId=0,this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.registerMessages(),M.a.instance.addLinkEventTracker(this)}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),M.a.instance.roomSessionManager.events.addEventListener(U.a.ENDED,this.onRoomSessionEvent),this._messages=[new d.a(this.onRoomInfoEvent.bind(this)),new o.a(this.onGroupInformationEvent.bind(this)),new a.a(this.onGroupMembersEvent.bind(this)),new c.a(this.onGroupConfirmMemberRemoveEvent.bind(this)),new s.a(this.onGroupBuyDataEvent.bind(this)),new r.a(this.onGroupBadgePartsEvent.bind(this)),new i.a(this.onCatalogPurchaseEvent.bind(this)),new l.a(this.onGroupSettingsEvent.bind(this))];for(const e of this._messages)M.a.instance.communication.registerMessageEvent(e)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(M.a.instance.roomSessionManager.events.removeEventListener(U.a.ENDED,this.onRoomSessionEvent),this._messages&&this._messages.length){for(const e of this._messages)M.a.instance.communication.removeMessageEvent(e);this._messages=[]}})}onRoomSessionEvent(e){if(e)switch(e.type){case U.a.ENDED:return void this._ngZone.run(()=>{this._roomInfoComponent.clear()})}}onRoomInfoEvent(e){if(!e)return;const t=e.getParser();t&&(this._ngZone.run(()=>{this._roomInfoComponent.groupId=t.data.habboGroupId,this._roomInfoComponent.groupName=t.data.groupName,this._roomInfoComponent.groupBadgeCode=t.data.groupBadgeCode,this._roomInfoComponent.groupMember=t.isGroupMember}),M.a.instance.communication.connection.send(new b.a(t.data.habboGroupId,!1)))}onGroupInformationEvent(e){if(!e)return;const t=e.getParser();t&&((t.flag||t.id===this._groupInfoComponent.groupId)&&this._ngZone.run(()=>{this._groupInfoComponent.groupId=t.id,this._groupInfoComponent.groupName=t.title,this._groupInfoComponent.groupBadgeCode=t.badge,this._groupInfoComponent.groupDescription=t.description,this._groupInfoComponent.groupType=t.type,this._groupInfoComponent.groupMembershipType=t.membershipType,this._groupInfoComponent.groupCreationDate=t.createdAt,this._groupInfoComponent.groupOwnerName=t.ownerName,this._groupInfoComponent.groupMembersCount=t.membersCount,this._groupInfoComponent.groupMembershipRequestsCount=t.pendingRequestsCount,this._groupInfoComponent.groupHomeRoomId=t.roomId,this._groupInfoComponent.isOwner=t.isOwner}),this._roomInfoComponent.groupId===t.id&&this._ngZone.run(()=>{this._roomInfoComponent.groupType=t.type,this._roomInfoComponent.groupMembershipType=t.membershipType}))}onGroupMembersEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>{this._groupMembersComponent.groupId=t.groupId,this._groupMembersComponent.groupName=t.groupTitle,this._groupMembersComponent.groupBadgeCode=t.badge,this._groupMembersComponent.totalMembersCount=t.totalMembersCount,this._groupMembersComponent.result=t.result,this._groupMembersComponent.admin=t.admin,this._groupMembersComponent.pageSize=t.pageSize,this._groupMembersComponent.pageIndex=t.pageIndex,this._groupMembersComponent.level=t.level.toString()})}onGroupConfirmMemberRemoveEvent(e){if(!e)return;const t=e.getParser();if(!t)return;let n=[];if(t.userId===M.a.instance.sessionDataManager.userId)n=this._groupInfoComponent.confirmLeave();else{if(!this._groupMembersComponent.admin)return;n=this._groupMembersComponent.confirmRemove(t.userId,t.furnitureCount)}this._notificationService.alertWithChoices(n[1],n[2],n[0])}onGroupBuyDataEvent(e){if(!e)return;const t=e.getParser();if(t&&this._groupCreatorModal){const e=this._groupCreatorModal.componentInstance;e&&this._ngZone.run(()=>{e.groupCost=t.groupCost,e.availableRooms=t.availableRooms})}}onGroupBadgePartsEvent(e){if(!e)return;const t=e.getParser();t&&(this._badgeBases=t.bases,this._badgeSymbols=t.symbols,this._badgePartColors=t.partColors,this._groupColorsA=t.colorsA,this._groupColorsB=t.colorsB)}onCatalogPurchaseEvent(e){e&&e.getParser()&&this._ngZone.run(()=>{this.closeGroupCreator()})}onGroupSettingsEvent(e){if(!e)return;const t=e.getParser();t&&this._groupManagerComponent&&(this._groupManagerComponent.load(t),M.a.instance.communication.connection.send(new g.a))}linkReceived(e){const t=e.split("/");if(!(t.length<2))switch(t[1]){case"create":return void this.openGroupCreator();case"manage":if(!t[2])return;return void this.requestGroupSettings(parseInt(t[2]));case"info":if(!t[2])return;return void this.getInfo(parseInt(t[2]))}}getInfo(e){M.a.instance.communication.connection.send(new b.a(e,!0))}getMembers(e,t,n,i){M.a.instance.communication.connection.send(new E.a(e,t,n,i))}join(e){0===this._roomInfoComponent.groupType&&this._ngZone.run(()=>{this._roomInfoComponent.groupMember=!0}),M.a.instance.communication.connection.send(new v.a(e))}giveAdmin(e,t){M.a.instance.communication.connection.send(new u.a(e,t))}takeAdmin(e,t){M.a.instance.communication.connection.send(new h.a(e,t))}acceptMembership(e,t){M.a.instance.communication.connection.send(new S.a(e,t))}declineMembership(e,t){M.a.instance.communication.connection.send(new y.a(e,t))}removeMember(e,t){M.a.instance.communication.connection.send(new p.a(e,t))}deleteGroup(e){M.a.instance.communication.connection.send(new _.a(e))}openProfile(e){M.a.instance.communication.connection.send(new O.a(e))}save(e){M.a.instance.communication.connection.send(new C.a(e.id,e.name,e.description)),M.a.instance.communication.connection.send(new I.a(e.id,e.currentBadgeArray)),M.a.instance.communication.connection.send(new w.a(e.id,e.colorA,e.colorB)),M.a.instance.communication.connection.send(new R.a(e.id,e.state,e.canMembersDecorate?0:1))}buyGroup(e){M.a.instance.communication.connection.send(new m.a(e.name,e.description,parseInt(e.roomId),e.colorA,e.colorB,e.currentBadgeArray))}openGroupCreator(){this._groupCreatorModal||(this._groupCreatorModal=this._modalService.open(x.a,{backdrop:"static",centered:!0,keyboard:!1}),this._groupCreatorModal&&this._groupCreatorModal.result.then(()=>this._groupCreatorModal=null),M.a.instance.communication.connection.send(new f.a),M.a.instance.communication.connection.send(new g.a))}closeGroupCreator(){this._groupCreatorModal&&(this._groupCreatorModal.close(),this._groupCreatorModal=null)}requestGroupSettings(e){M.a.instance.communication.connection.send(new T.a(e))}get eventUrlPrefix(){return"groups"}set groupRoomInfoComponent(e){this._roomInfoComponent=e}set groupInfoComponent(e){this._groupInfoComponent=e}set groupMembersComponent(e){this._groupMembersComponent=e}set groupManagerComponent(e){this._groupManagerComponent=e}get badgeBases(){return this._badgeBases}get badgeSymbols(){return this._badgeSymbols}get badgePartColors(){return this._badgePartColors}get groupColorsA(){return this._groupColorsA}get groupColorsB(){return this._groupColorsB}}return e.\u0275fac=function(t){return new(t||e)(A.kc(D.a),A.kc(L.h),A.kc(A.H))},e.\u0275prov=A.Ub({token:e,factory:e.\u0275fac}),e})()},"2ERw":function(e,t,n){"use strict";n.d(t,"a",function(){return I});var i=n("POTh"),r=n("KtBb"),s=n("bwAN"),c=n("pE/2"),o=n("gTDx"),a=n("IqKQ"),l=n("fXoL"),d=n("rs/J"),u=n("WnqX"),h=n("j2zY");const g=["floorplanElement"],m=["floorplanPreviewer"],f=function(e){return{selected:e}},p=function(e){return{backgroundColor:e}};function _(e,t){if(1&e){const e=l.ec();l.dc(0,"button",40),l.nc("click",function(){l.Lc(e);const n=t.$implicit;return l.qc(2).selectHeight(n.key)}),l.cc()}if(2&e){const e=t.$implicit,n=l.qc(2);l.yc("ngClass",l.Cc(2,f,n.currentHeight===e.key))("ngStyle",l.Cc(4,p,n.getColor(e.value)))}}function b(e,t){if(1&e&&(l.dc(0,"div",22),l.dc(1,"div",41,42),l.Zb(3,"div",43),l.cc(),l.cc()),2&e){const e=l.qc(2);l.Kb(3),l.yc("roomPreviewer",e.roomPreviewer)("width",1e3)("height",1e3)("modelScale",!1)("model",e.currentModel)("wallHeight",e.wallHeight)}}const v=function(e){return{active:e}},E=function(e,t){return{"col-7":e,"col-12":t}};function S(e,t){if(1&e){const e=l.ec();l.dc(0,"div",2),l.dc(1,"div",3),l.dc(2,"h6",4),l.Wc(3),l.rc(4,"translate"),l.cc(),l.dc(5,"button",5),l.nc("click",function(){return l.Lc(e),l.qc().close()}),l.Zb(6,"i",6),l.cc(),l.cc(),l.dc(7,"div",7),l.dc(8,"div",8),l.dc(9,"div",9),l.dc(10,"div",10),l.Wc(11),l.rc(12,"translate"),l.cc(),l.dc(13,"div",11),l.dc(14,"button",12),l.nc("click",function(){return l.Lc(e),l.qc().changeAction("set")}),l.Zb(15,"i",13),l.cc(),l.dc(16,"button",12),l.nc("click",function(){return l.Lc(e),l.qc().changeAction("unset")}),l.Zb(17,"i",14),l.cc(),l.dc(18,"button",12),l.nc("click",function(){return l.Lc(e),l.qc().changeAction("up")}),l.Zb(19,"i",15),l.cc(),l.dc(20,"button",12),l.nc("click",function(){return l.Lc(e),l.qc().changeAction("down")}),l.Zb(21,"i",16),l.cc(),l.dc(22,"button",12),l.nc("click",function(){return l.Lc(e),l.qc().changeAction("door")}),l.Zb(23,"i",17),l.cc(),l.cc(),l.dc(24,"div",10),l.Wc(25),l.rc(26,"translate"),l.cc(),l.dc(27,"div",11),l.dc(28,"button",18),l.nc("click",function(){return l.Lc(e),l.qc().decrementHeight()}),l.Zb(29,"i",19),l.cc(),l.Uc(30,_,1,6,"button",20),l.rc(31,"keyvalue"),l.dc(32,"button",18),l.nc("click",function(){return l.Lc(e),l.qc().incrementHeight()}),l.Zb(33,"i",21),l.cc(),l.cc(),l.cc(),l.dc(34,"div",22),l.dc(35,"div",23),l.dc(36,"div",24),l.dc(37,"div",10),l.Wc(38),l.rc(39,"translate"),l.cc(),l.dc(40,"div",25),l.dc(41,"button",18),l.nc("click",function(){return l.Lc(e),l.qc().decrementDoorDirection()}),l.Zb(42,"i",19),l.cc(),l.Zb(43,"button",26),l.dc(44,"button",18),l.nc("click",function(){return l.Lc(e),l.qc().incrementDoorDirection()}),l.Zb(45,"i",21),l.cc(),l.cc(),l.cc(),l.dc(46,"div",24),l.dc(47,"div",10),l.Wc(48),l.rc(49,"translate"),l.cc(),l.dc(50,"div",25),l.dc(51,"button",18),l.nc("click",function(){return l.Lc(e),l.qc().decrementWallheight()}),l.Zb(52,"i",19),l.cc(),l.dc(53,"button",27),l.Wc(54),l.cc(),l.dc(55,"button",18),l.nc("click",function(){return l.Lc(e),l.qc().incrementWallheight()}),l.Zb(56,"i",21),l.cc(),l.cc(),l.cc(),l.cc(),l.dc(57,"div",10),l.Wc(58),l.rc(59,"translate"),l.cc(),l.dc(60,"div",23),l.dc(61,"div",24),l.dc(62,"select",28),l.nc("ngModelChange",function(t){return l.Lc(e),l.qc().thicknessWall=t}),l.dc(63,"option",29),l.Wc(64),l.rc(65,"translate"),l.cc(),l.dc(66,"option",29),l.Wc(67),l.rc(68,"translate"),l.cc(),l.dc(69,"option",29),l.Wc(70),l.rc(71,"translate"),l.cc(),l.dc(72,"option",29),l.Wc(73),l.rc(74,"translate"),l.cc(),l.cc(),l.cc(),l.dc(75,"div",24),l.dc(76,"select",28),l.nc("ngModelChange",function(t){return l.Lc(e),l.qc().thicknessFloor=t}),l.dc(77,"option",29),l.Wc(78),l.rc(79,"translate"),l.cc(),l.dc(80,"option",29),l.Wc(81),l.rc(82,"translate"),l.cc(),l.dc(83,"option",29),l.Wc(84),l.rc(85,"translate"),l.cc(),l.dc(86,"option",29),l.Wc(87),l.rc(88,"translate"),l.cc(),l.cc(),l.cc(),l.cc(),l.cc(),l.cc(),l.dc(89,"div",23),l.dc(90,"div",30),l.dc(91,"div",31),l.Wc(92),l.cc(),l.Zb(93,"div",32,33),l.cc(),l.Uc(95,b,4,6,"div",34),l.cc(),l.dc(96,"div",35),l.dc(97,"button",36),l.nc("click",function(){return l.Lc(e),l.qc().revertChanges()}),l.Wc(98),l.rc(99,"translate"),l.cc(),l.dc(100,"div",37),l.dc(101,"button",38),l.nc("click",function(){return l.Lc(e),l.qc().togglePreviewer()}),l.Wc(102),l.cc(),l.dc(103,"button",38),l.nc("click",function(){return l.Lc(e),l.qc().openImportExport()}),l.Wc(104),l.rc(105,"translate"),l.cc(),l.dc(106,"button",39),l.nc("click",function(){return l.Lc(e),l.qc().save()}),l.Wc(107),l.rc(108,"translate"),l.cc(),l.cc(),l.cc(),l.cc(),l.cc()}if(2&e){const e=l.qc();l.Kb(3),l.Xc(l.sc(4,45,"floor.plan.editor.title")),l.Kb(8),l.Xc(l.sc(12,47,"floor.plan.editor.draw.mode")),l.Kb(3),l.yc("ngClass",l.Cc(81,v,"set"===e.currentAction)),l.Kb(2),l.yc("ngClass",l.Cc(83,v,"unset"===e.currentAction)),l.Kb(2),l.yc("ngClass",l.Cc(85,v,"up"===e.currentAction)),l.Kb(2),l.yc("ngClass",l.Cc(87,v,"down"===e.currentAction)),l.Kb(2),l.yc("ngClass",l.Cc(89,v,"door"===e.currentAction)),l.Kb(3),l.Xc(l.sc(26,49,"floor.plan.editor.tile.height")),l.Kb(5),l.yc("ngForOf",l.sc(31,51,e.colorMap)),l.Kb(8),l.Xc(l.sc(39,53,"floor.plan.editor.enter.direction")),l.Kb(5),l.yc("headOnly",!0)("scale",4)("asBackground",!0)("figure",e.currentAvatarFigure)("direction",e.doorDirection),l.Kb(5),l.Xc(l.sc(49,55,"floor.editor.wall.height")),l.Kb(6),l.Xc(e.wallHeight),l.Kb(4),l.Xc(l.sc(59,57,"floor.plan.editor.room.options")),l.Kb(4),l.yc("ngModel",e.thicknessWall),l.Kb(1),l.yc("value",0),l.Kb(1),l.Xc(l.sc(65,59,"navigator.roomsettings.wall_thickness.thinnest")),l.Kb(2),l.yc("value",1),l.Kb(1),l.Xc(l.sc(68,61,"navigator.roomsettings.wall_thickness.thin")),l.Kb(2),l.yc("value",2),l.Kb(1),l.Xc(l.sc(71,63,"navigator.roomsettings.wall_thickness.normal")),l.Kb(2),l.yc("value",3),l.Kb(1),l.Xc(l.sc(74,65,"navigator.roomsettings.wall_thickness.thick")),l.Kb(3),l.yc("ngModel",e.thicknessFloor),l.Kb(1),l.yc("value",0),l.Kb(1),l.Xc(l.sc(79,67,"navigator.roomsettings.floor_thickness.thinnest")),l.Kb(2),l.yc("value",1),l.Kb(1),l.Xc(l.sc(82,69,"navigator.roomsettings.floor_thickness.thin")),l.Kb(2),l.yc("value",2),l.Kb(1),l.Xc(l.sc(85,71,"navigator.roomsettings.floor_thickness.normal")),l.Kb(2),l.yc("value",3),l.Kb(1),l.Xc(l.sc(88,73,"navigator.roomsettings.floor_thickness.thick")),l.Kb(3),l.yc("ngClass",l.Dc(91,E,e.showPreviewer,!e.showPreviewer)),l.Kb(2),l.Zc(" ",e.coloredTilesCount," / ",e.maxTilesCount," "),l.Kb(3),l.yc("ngIf",e.showPreviewer),l.Kb(2),l.yc("disabled",!e.ableToRevertChanges),l.Kb(1),l.Xc(l.sc(99,75,"floor.plan.editor.reload")),l.Kb(4),l.Xc(e.togglePreviewButton),l.Kb(2),l.Xc(l.sc(105,77,"floor.plan.editor.import.export")),l.Kb(3),l.Xc(l.sc(108,79,"floor.plan.editor.save"))}}function y(e,t){if(1&e&&l.Zb(0,"nitro-floorplan-import-export-component",44),2&e){const e=l.qc();l.yc("map",e.heightMap)}}window.PIXI=a;let I=(()=>{class e{constructor(e,t,n,i){this._ngZone=e,this.floorPlanService=t,this._settingsService=n,this._sessionService=i,this.visible=!1,this.showPreviewer=!1,this._previewerEventsSet=!1,this.floorPlanService.component=this,this._clear()}ngOnInit(){this._roomPreviewer=new c.a(s.a.instance.roomEngine,++c.a.PREVIEW_COUNTER),this._roomPreviewer.zoomOut(),this._roomPreviewer.zoomOut()}ngOnChanges(e){e.visible.currentValue?(s.a.instance.communication.connection.send(new r.a),s.a.instance.communication.connection.send(new i.a)):this._clear()}ngOnDestroy(){this._roomPreviewer&&(this._roomPreviewer.dispose(),this._roomPreviewer=null)}_clear(){this.floorPlanService.clear(),this._ngZone.runOutsideAngular(()=>{this._app&&(this._app.destroy(!0),this._app=null,this._tileMap.destroy(),this._tileMap=null)})}close(){this._settingsService.floorPlanVisible=!1,this.floorPlanService.showImportExport=!1}preview(e){const{doorX:t,doorY:n,doorDirection:i,thicknessWall:r,thicknessFloor:s}=this.floorPlanService.floorMapSettings;this.init(e,this.floorPlanService.blockedTilesMap,t,n,i,r,s)}render(){this._app&&this._app.stage.removeChildren(),this._ngZone.runOutsideAngular(()=>{}),this.floorPlanService.render()}init(e,t,n,i,r,s,c){this._clear(),this.floorPlanService.floorMapSettings.heightMapString=e,this.floorPlanService.floorMapSettings.doorX=n,this.floorPlanService.floorMapSettings.doorY=i,this.floorPlanService.floorMapSettings.doorDirection=r,this.floorPlanService.blockedTilesMap=t,this.floorPlanService.floorMapSettings.thicknessWall=s,this.floorPlanService.floorMapSettings.thicknessFloor=c,this._ngZone.run(()=>{this.floorPlanService.floorMapSettings.doorDirection=r}),this.floorPlanService.floorMapSettings.heightMap=this.floorPlanService.readTileMapString(e);const o=this.floorPlanService.tileSize,a=o*this.floorPlanService.floorMapSettings.heightMap.length+20,l=o*this.floorPlanService.floorMapSettings.heightMap.length/2+100;this.floorPlanService.originalMapSettings=this.floorPlanService.floorMapSettings,this._ngZone.runOutsideAngular(()=>{this._buildApp(a,l),this.floorPlanService.renderTileMap()})}_buildApp(e,t){if(!this._app){this._app=new a.Application({width:e,height:t,backgroundColor:2829099,antialias:!0,autoDensity:!0,resolution:1}),this._tileMap=new o.a,this._tileMap.interactive=!0,this._ngZone.runOutsideAngular(()=>this.floorPlanService.detectPoints()),this._app.stage.addChild(this._tileMap),this.floorplanElement.nativeElement.appendChild(this._app.view);let n={top:0,left:0,x:0,y:0};const i=this.floorplanElement.nativeElement,r=function(e){2===e.button&&(i.style.cursor="grabbing",i.style.userSelect="none",n={left:i.scrollLeft,top:i.scrollTop,x:e.clientX,y:e.clientY},i.addEventListener("mousemove",s),i.addEventListener("mouseup",c))},s=function(e){const t=e.clientX-n.x;i.scrollTop=n.top-(e.clientY-n.y),i.scrollLeft=n.left-t},c=function(){i.style.cursor="default",i.removeEventListener("mousemove",s),i.removeEventListener("mouseup",c)};i.addEventListener("mousedown",r),i.oncontextmenu=function(){return!1},this.setPreviewerEvents(),this.floorplanElement.nativeElement.scrollTo(e/3,0)}}setPreviewerEvents(){if(!this.showPreviewer||this._previewerEventsSet)return;const e=this.floorplanPreviewer.nativeElement;let t={top:0,left:0,x:0,y:0};const n=function(n){const i=n.clientX-t.x;e.scrollTop=t.top-(n.clientY-t.y),e.scrollLeft=t.left-i},i=function(){e.style.cursor="default",e.removeEventListener("mousemove",n),e.removeEventListener("mouseup",i)};e.addEventListener("mousedown",function(r){e.style.cursor="grabbing",e.style.userSelect="none",t={left:e.scrollLeft,top:e.scrollTop,x:r.clientX,y:r.clientY},e.addEventListener("mousemove",n),e.addEventListener("mouseup",i)}),e.oncontextmenu=function(){return!1},e.scrollTo(250,250),this._previewerEventsSet=!0}changeAction(e){this.floorPlanService.currentAction=e}selectHeight(e){this.floorPlanService.currentHeight=e,this.changeAction("set")}getColor(e){return e.replace("0x","#")}save(){this.floorPlanService.floorMapSettings.heightMapString=this.floorPlanService.generateTileMapString(),this.floorPlanService.save(this.floorPlanService.floorMapSettings)}decrementHeight(){this.floorPlanService.decrementHeight()}incrementHeight(){this.floorPlanService.incrementHeight()}decrementDoorDirection(){this.floorPlanService.decrementDoorDirection()}incrementDoorDirection(){this.floorPlanService.incrementDoorDirection()}decrementWallheight(){this.floorPlanService.decrementWallheight()}incrementWallheight(){this.floorPlanService.incrementWallheight()}openImportExport(){this.floorPlanService.showImportExport=!0}revertChanges(){this.floorPlanService.revertChanges()}toggleEditor(){this.minimize=!this.minimize}togglePreviewer(){this.showPreviewer=!this.showPreviewer,this.showPreviewer||(this._previewerEventsSet=!1),setTimeout(()=>{this.setPreviewerEvents()},200)}get colorMap(){return Object.keys(this.floorPlanService.colorMap).filter(e=>"x"!==e).reduce((e,t)=>(e[t]=this.floorPlanService.colorMap[t],e),{})}get currentAction(){return this.floorPlanService.currentAction}get currentHeight(){return this.floorPlanService.currentHeight}get coloredTilesCount(){return this.floorPlanService.coloredTilesCount}get maxTilesCount(){return this.floorPlanService.maxTilesCount}get roomPreviewer(){return this._roomPreviewer}get currentModel(){return this.floorPlanService.floorMapSettings.heightMapString}get doorDirection(){return this.floorPlanService.floorMapSettings.doorDirection}get wallHeight(){return 0==this.floorPlanService.wallHeight&&(this.floorPlanService.wallHeight=1),this.floorPlanService.wallHeight}get thicknessWall(){return this.floorPlanService.floorMapSettings.thicknessWall}set thicknessWall(e){this.floorPlanService.floorMapSettings.thicknessWall=e}get thicknessFloor(){return this.floorPlanService.floorMapSettings.thicknessFloor}set thicknessFloor(e){this.floorPlanService.floorMapSettings.thicknessFloor=e}get ableToRevertChanges(){return this.floorPlanService.changesMade}get tileMap(){return this._tileMap}get showImportExport(){return this.floorPlanService.showImportExport}get togglePreviewButton(){const e=this.showPreviewer?"Hide Preview":"Show Preview",t=s.a.instance.localization.getValue(this.showPreviewer?"nitro.floorplan.previewer.hide":"nitro.floorplan.previewer.show");return t==t?e:t}get currentAvatarFigure(){return this._sessionService.figure}get heightMap(){return this.floorPlanService.floorMapSettings.heightMapString}}return e.\u0275fac=function(t){return new(t||e)(l.Yb(l.H),l.Yb(d.a),l.Yb(u.a),l.Yb(h.a))},e.\u0275cmp=l.Sb({type:e,selectors:[["nitro-floorplan-main-component"]],viewQuery:function(e,t){if(1&e&&(l.cd(g,1),l.cd(m,1)),2&e){let e;l.Hc(e=l.oc())&&(t.floorplanElement=e.first),l.Hc(e=l.oc())&&(t.floorplanPreviewer=e.first)}},inputs:{visible:"visible"},features:[l.Ib],decls:2,vars:2,consts:[["class","card nitro-floorplan-editor-component",3,"bringToTop","draggable",4,"ngIf"],[3,"map",4,"ngIf"],[1,"card","nitro-floorplan-editor-component",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"row"],[1,"col-7"],[1,"mb-1"],[1,"btn-group","w-100","mb-3"],[1,"btn","btn-primary","btn-sm",3,"ngClass","click"],[1,"icon","icon-floorplaneditor-tile-set"],[1,"icon","icon-floorplaneditor-tile-unset"],[1,"icon","icon-floorplaneditor-tile-up"],[1,"icon","icon-floorplaneditor-tile-down"],[1,"icon","icon-floorplaneditor-door"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-chevron-left"],["class","btn btn-sm btn-primary floorplan-height-option",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[1,"fas","fa-chevron-right"],[1,"col-5"],[1,"row","mb-3"],[1,"col-6"],[1,"btn-group","w-100",2,"height","50px"],["avatar-image","",1,"btn","btn-primary","btn-sm","w-100","floorplan-door-button",3,"headOnly","scale","asBackground","figure","direction"],[1,"btn","btn-primary","btn-sm","w-100"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"value"],[3,"ngClass"],[1,"text-right"],[1,"editor-area"],["floorplanElement",""],["class","col-5",4,"ngIf"],[1,"d-flex","flex-row","justify-content-between","w-100"],[1,"btn","btn-secondary",3,"disabled","click"],[1,"btn-group"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-sm","btn-primary","floorplan-height-option",3,"ngClass","ngStyle","click"],[1,"editor-area",2,"text-align","center"],["floorplanPreviewer",""],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","width","height","modelScale","model","wallHeight"],[3,"map"]],template:function(e,t){1&e&&(l.Uc(0,S,109,94,"div",0),l.Uc(1,y,1,1,"nitro-floorplan-import-export-component",1)),2&e&&(l.yc("ngIf",t.visible),l.Kb(1),l.yc("ngIf",t.showImportExport))},encapsulation:2}),e})()},"3Cj0":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("PAYm"),r=n("GXae"),s=n("g+Z7"),c=n("AJw9"),o=n("3piU"),a=n("Vbhl"),l=n("bwAN"),d=n("fXoL");let u=(()=>{class e{constructor(e){this._ngZone=e,this._messages=[],this._volumeSystem=0,this._volumeFurni=0,this._volumeTrax=0,this._oldChat=!1,this._roomInvites=!1,this._cameraFollow=!0,this._flags=0,this._chatType=0,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),this._messages=[new i.a(this.onUserSettingsEvent.bind(this))];for(const e of this._messages)l.a.instance.communication.registerMessageEvent(e)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(this._messages&&this._messages.length){for(const e of this._messages)l.a.instance.communication.removeMessageEvent(e);this._messages=[]}})}onUserSettingsEvent(e){if(!e)return;const t=e.getParser();t&&(this._volumeSystem=t.volumeSystem/100,this._volumeFurni=t.volumeFurni/100,this._volumeTrax=t.volumeTrax/100,this._oldChat=t.oldChat,this._roomInvites=t.roomInvites,this._cameraFollow=t.cameraFollow,this._flags=t.flags,this._chatType=t.chatType,this.sendUpdateEvent())}sendSound(){l.a.instance.communication.connection.send(new o.a(Math.round(100*this._volumeSystem),Math.round(100*this._volumeFurni),Math.round(100*this._volumeTrax)))}sendUpdateEvent(){const e=new a.a(a.a.SETTINGS_UPDATED);e.volumeSystem=this._volumeSystem,e.volumeFurni=this._volumeFurni,e.volumeTrax=this._volumeTrax,e.oldChat=this._oldChat,e.roomInvites=this._roomInvites,e.cameraFollow=this._cameraFollow,e.flags=this._flags,e.chatType=this._chatType,l.a.instance.events.dispatchEvent(e)}_sendOldChat(){l.a.instance.communication.connection.send(new s.a(this._oldChat))}_sendRoomInvites(){l.a.instance.communication.connection.send(new c.a(this._roomInvites))}_sendCameraFollow(){l.a.instance.communication.connection.send(new r.a(this._cameraFollow))}get volumeSystem(){return this._volumeSystem}set volumeSystem(e){e>1&&(e=1),e<0&&(e=0),this._volumeSystem=e,this.sendUpdateEvent()}get volumeFurni(){return this._volumeFurni}set volumeFurni(e){e>1&&(e=1),e<0&&(e=0),this._volumeFurni=e,this.sendUpdateEvent()}get volumeTrax(){return this._volumeTrax}set volumeTrax(e){e>1&&(e=1),e<0&&(e=0),this._volumeTrax=e,this.sendUpdateEvent()}get oldChat(){return this._oldChat}set oldChat(e){this._oldChat=e,this._sendOldChat()}get roomInvites(){return this._roomInvites}set roomInvites(e){this._roomInvites=e,this._sendRoomInvites()}get cameraFollow(){return this._cameraFollow}set cameraFollow(e){this._cameraFollow=e,this._sendCameraFollow(),this.sendUpdateEvent()}get flags(){return this._flags}set flags(e){this._flags=e,this.sendUpdateEvent()}get chatType(){return this._chatType}set chatType(e){this._chatType=e,this.sendUpdateEvent()}}return e.\u0275fac=function(t){return new(t||e)(d.kc(d.H))},e.\u0275prov=d.Ub({token:e,factory:e.\u0275fac}),e})()},"3LRK":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("wYOr"),r=n("bwAN"),s=n("vmGm"),c=n("6QLa"),o=n("fXoL");let a=(()=>{class e{constructor(e,t){this._elementRef=e,this._ngZone=t,this.petFigureData=null,this.headOnly=!1,this.direction=0,this.scale=1,this.asBackground=!1,this._petImageCache=new i.a,this.petUrl=null,this.disposed=!1,this.needsUpdate=!0}ngOnInit(){this.needsUpdate&&this.buildImage()}ngOnChanges(e){const t=e.petFigureData;t&&t.previousValue!==t.currentValue&&(this.needsUpdate=!0);const n=e.headOnly;n&&n.previousValue!==n.currentValue&&(this.needsUpdate=!0);const i=e.direction;i&&i.previousValue!==i.currentValue&&(this.needsUpdate=!0),this.needsUpdate&&this.buildImage()}dispose(){}buildImage(){this.needsUpdate=!1;const e=this.getPetImageUrl();if(!e||!e.length)return;const t=this._elementRef.nativeElement;if(t)if(this.asBackground)t.style.backgroundImage=`url(${e})`;else{const n=t.getElementsByClassName("pet-image");let i=n.length;for(;i<0;)n[i].remove(),i--;const r=document.createElement("img");r.className="pet-image scale-"+this.scale,r.src=e}}getPetImageUrl(){const e=this.getPetBuildString();let t=this._petImageCache.getValue(e);if(t&&t.length)return t;let n=null;return this._ngZone.runOutsideAngular(()=>{if(n=r.a.instance.roomEngine.getRoomObjectPetImage(this.petFigureData.typeId,this.petFigureData.paletteId,this.petFigureData.color,new c.a(45*this.direction),64,this,this.headOnly,0,this.petFigureData.customParts,"std"),n){const e=n.getImage();e&&(t=e.src)}}),t?(this.putInCache(e,t),t):null}imageReady(e,t,n){let i=null;n?i=n.src:t&&(i=s.a.generateImageUrl(t)),i&&i.length&&this.putInCache(this.getPetBuildString(),i),this.buildImage()}imageFailed(e){}putInCache(t,n){this._petImageCache.length===e.MAX_CACHE_SIZE&&this._petImageCache.remove(this._petImageCache.getKey(0)),this._petImageCache.remove(t),this._petImageCache.add(t,n)}getPetBuildString(){return`${this.petFigureData}:${this.headOnly}:${this.direction}`}}return e.MAX_CACHE_SIZE=10,e.\u0275fac=function(t){return new(t||e)(o.Yb(o.p),o.Yb(o.H))},e.\u0275dir=o.Tb({type:e,selectors:[["","pet-image",""]],inputs:{petFigureData:"petFigureData",headOnly:"headOnly",direction:"direction",scale:"scale",asBackground:"asBackground"},features:[o.Ib]}),e})()},"3dBv":function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n("bwAN"),r=n("vmGm"),s=n("6QLa"),c=n("u0Tz"),o=n("fXoL"),a=n("ofXK"),l=n("YPdD");const d=["nitro-furniture-image",""];function u(e,t){if(1&e&&o.Zb(0,"img",1),2&e){const e=o.qc();o.yc("src",e.imageUrl,o.Nc)}}let h=(()=>{class e{constructor(e){this._ngZone=e,this.type="s",this.spriteId=-1,this.direction=0,this.extras="",this.imageUrl=null,this.needsUpdate=!0}ngOnInit(){this.needsUpdate&&this.buildImage()}ngOnChanges(e){const t=e.type;t&&t.previousValue!==t.currentValue&&(this.needsUpdate=!0);const n=e.spriteId;n&&n.previousValue!==n.currentValue&&(this.needsUpdate=!0);const i=e.direction;i&&i.previousValue!==i.currentValue&&(this.needsUpdate=!0);const r=e.extras;r&&r.previousValue!==r.currentValue&&(this.needsUpdate=!0),this.needsUpdate&&this.buildImage()}buildImage(){this._ngZone.runOutsideAngular(()=>{this.needsUpdate=!1;let e=null;switch(this.type.toLocaleLowerCase()){case c.a.FLOOR:e=i.a.instance.roomEngine.getFurnitureFloorImage(this.spriteId,new s.a(this.direction),64,this,0,this.extras);break;case c.a.WALL:e=i.a.instance.roomEngine.getFurnitureWallImage(this.spriteId,new s.a(this.direction),64,this,0,this.extras)}if(e){const t=e.getImage();t&&this._ngZone.run(()=>this.imageUrl=t.src)}})}imageReady(e,t,n){if(t)if(n)this._ngZone.run(()=>this.imageUrl=n.src);else if(t){const e=r.a.generateImageUrl(t);e&&this._ngZone.run(()=>this.imageUrl=e)}}imageFailed(e){}}return e.\u0275fac=function(t){return new(t||e)(o.Yb(o.H))},e.\u0275cmp=o.Sb({type:e,selectors:[["","nitro-furniture-image",""]],inputs:{type:"type",spriteId:"spriteId",direction:"direction",extras:"extras"},features:[o.Ib],attrs:d,decls:1,vars:1,consts:[["class","d-block","image-placeholder","",3,"src",4,"ngIf"],["image-placeholder","",1,"d-block",3,"src"]],template:function(e,t){1&e&&o.Uc(0,u,1,1,"img",0),2&e&&o.yc("ngIf",t.imageUrl)},directives:[a.n,l.a],encapsulation:2}),e})()},"3k08":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("bwAN"),r=n("rC5y"),s=n("VFvI"),c=n("5+Zn"),o=n("fXoL");let a=(()=>{class e extends r.a{get code(){return e.CODE}decrease(){this.time-=1,this.time<e.MINIMUM_VALUE&&(this.time=e.MINIMUM_VALUE)}increase(){this.time+=1,this.time>e.MAXIMUM_VALUE&&(this.time=e.MAXIMUM_VALUE)}updateLocaleParameter(){this.timeLocale=i.a.instance.getLocalizationWithParameter("wiredfurni.params.allowafter","seconds",c.a.getLocaleName(this.time))}get hasSpecialInputs(){return!0}get sliderOptions(){return{floor:e.MINIMUM_VALUE,ceil:e.MAXIMUM_VALUE,step:e.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return e.CODE=s.a.TIME_ELAPSED_MORE,e.\u0275fac=function(t){return l(t||e)},e.\u0275cmp=o.Sb({type:e,selectors:[["ng-component"]],features:[o.Hb],decls:9,vars:3,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","time",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(e,t){1&e&&(o.dc(0,"nitro-wired-base-component"),o.dc(1,"p",0),o.Wc(2),o.cc(),o.dc(3,"div",1),o.dc(4,"button",2),o.nc("click",function(){return t.decrease()}),o.Zb(5,"i",3),o.cc(),o.dc(6,"ngx-slider",4),o.nc("valueChange",function(e){return t.time=e})("valueChange",function(){return t.onSliderChange()}),o.cc(),o.dc(7,"button",2),o.nc("click",function(){return t.increase()}),o.Zb(8,"i",5),o.cc(),o.cc(),o.cc()),2&e&&(o.Kb(2),o.Xc(t.timeLocale),o.Kb(4),o.yc("options",t.sliderOptions)("value",t.time))},encapsulation:2}),e})();const l=o.fc(a)},"4ctn":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("xPcM"),s=n("vLqR"),c=n("fXoL");let o=(()=>{class e extends s.a{get code(){return e.CODE}onEditStart(t){const n=t.stringData.split(e.DELIMETER);this.botName=n.length>=1?n[0]:"",this.message=2==n.length?n[1]:"",this.mode=t.intData.length>0?t.intData[0].toString():"0",super.onEditStart(t)}get hasSpecialInputs(){return!0}get requiresFurni(){return i.a._Str_5431}readStringParamFromForm(){return this.botName+e.DELIMETER+this.message}readIntegerParamsFromForm(){return[Number.parseInt(this.mode)]}}return e.CODE=r.a.BOT_TALK_DIRECT_TO_AVTR,e.DELIMETER="\t",e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:21,vars:17,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","text","maxlength","64",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"form-check"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.dc(0,"nitro-wired-action-base-component",0),c.nc("delayChange",function(e){return t.delay=e}),c.dc(1,"div",1),c.dc(2,"label"),c.Wc(3),c.rc(4,"translate"),c.cc(),c.dc(5,"input",2),c.nc("ngModelChange",function(e){return t.botName=e}),c.cc(),c.cc(),c.dc(6,"div",1),c.dc(7,"label"),c.Wc(8),c.rc(9,"translate"),c.cc(),c.dc(10,"input",3),c.nc("ngModelChange",function(e){return t.message=e}),c.cc(),c.cc(),c.dc(11,"div",4),c.dc(12,"input",5),c.nc("ngModelChange",function(e){return t.mode=e}),c.cc(),c.dc(13,"label",6),c.Wc(14),c.rc(15,"translate"),c.cc(),c.cc(),c.dc(16,"div",4),c.dc(17,"input",7),c.nc("ngModelChange",function(e){return t.mode=e}),c.cc(),c.dc(18,"label",6),c.Wc(19),c.rc(20,"translate"),c.cc(),c.cc(),c.cc()),2&e&&(c.yc("delay",t.delay),c.Kb(3),c.Xc(c.sc(4,9,"wiredfurni.params.bot.name")),c.Kb(2),c.yc("ngModel",t.botName),c.Kb(3),c.Xc(c.sc(9,11,"wiredfurni.params.message")),c.Kb(2),c.yc("ngModel",t.message),c.Kb(2),c.yc("ngModel",t.mode),c.Kb(2),c.Xc(c.sc(15,13,"wiredfurni.params.whisper")),c.Kb(3),c.yc("ngModel",t.mode),c.Kb(2),c.Xc(c.sc(20,15,"wiredfurni.params.talk")))},encapsulation:2}),e})();const a=c.fc(o)},"5+Zn":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("fXoL"),s=n("G+4o"),c=n("3Pt+");let o=(()=>{class e{constructor(e,t){this._wiredService=e,this._formBuilder=t}get code(){return-1}get negativeCode(){return-1}get requiresFurni(){return i.a._Str_5431}get hasStateSnapshot(){return!1}readIntegerParamsFromForm(){return[]}readStringParamFromForm(){return""}onInitStart(){}onEditStart(e){}get hasSpecialInputs(){return!1}validate(){return null}static getLocaleName(e){const t=Math.floor(e/2);return e%2?(t+.5).toString():t.toString()}}return e.\u0275fac=function(t){return new(t||e)(r.Yb(s.a),r.Yb(c.c))},e.\u0275dir=r.Tb({type:e}),e})()},"6u8Q":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("xPcM"),r=n("vLqR"),s=n("fXoL");let c=(()=>{class e extends r.a{get code(){return e.CODE}onEditStart(e){this.team=(e.intData.length>0?e.intData[0]:1).toString(),super.onEditStart(e)}readIntegerParamsFromForm(){return[Number.parseInt(this.team)]}get hasSpecialInputs(){return!0}}return e.CODE=i.a.JOIN_TEAM,e.\u0275fac=function(t){return o(t||e)},e.\u0275cmp=s.Sb({type:e,selectors:[["ng-component"]],features:[s.Hb],decls:18,vars:21,consts:[[3,"delay","delayChange"],[1,"form-group"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","1",3,"selected"],["value","2",3,"selected"],["value","3",3,"selected"],["value","4",3,"selected"]],template:function(e,t){1&e&&(s.dc(0,"nitro-wired-action-base-component",0),s.nc("delayChange",function(e){return t.delay=e}),s.dc(1,"div",1),s.dc(2,"label"),s.Wc(3),s.rc(4,"translate"),s.cc(),s.dc(5,"select",2),s.nc("ngModelChange",function(e){return t.team=e}),s.dc(6,"option",3),s.Wc(7),s.rc(8,"translate"),s.cc(),s.dc(9,"option",4),s.Wc(10),s.rc(11,"translate"),s.cc(),s.dc(12,"option",5),s.Wc(13),s.rc(14,"translate"),s.cc(),s.dc(15,"option",6),s.Wc(16),s.rc(17,"translate"),s.cc(),s.cc(),s.cc(),s.cc()),2&e&&(s.yc("delay",t.delay),s.Kb(3),s.Xc(s.sc(4,11,"wiredfurni.params.team")),s.Kb(2),s.yc("ngModel",t.team),s.Kb(1),s.yc("selected","1"==t.team),s.Kb(1),s.Xc(s.sc(8,13,"wiredfurni.params.team.1")),s.Kb(2),s.yc("selected","2"==t.team),s.Kb(1),s.Xc(s.sc(11,15,"wiredfurni.params.team.2")),s.Kb(2),s.yc("selected","3"==t.team),s.Kb(1),s.Xc(s.sc(14,17,"wiredfurni.params.team.3")),s.Kb(2),s.yc("selected","4"==t.team),s.Kb(1),s.Xc(s.sc(17,19,"wiredfurni.params.team.4")))},encapsulation:2}),e})();const o=s.fc(c)},"7XZB":function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i=n("bwAN"),r=n("ygsp"),s=n("iMWE"),c=n("fXoL"),o=n("1/Ir"),a=n("l1qq");function l(e,t){if(1&e){const e=c.ec();c.dc(0,"nitro-group-manager-tab-info-component",18),c.nc("groupSettingsChange",function(t){return c.Lc(e),c.qc(2).groupSettings=t}),c.cc()}if(2&e){const e=c.qc(2);c.yc("groupSettings",e.groupSettings)("showNameError",e.showNameError)("showDescriptionError",e.showDescriptionError)}}function d(e,t){if(1&e){const e=c.ec();c.dc(0,"nitro-group-creator-tab-badge-component",19),c.nc("groupSettingsChange",function(t){return c.Lc(e),c.qc(2).groupSettings=t}),c.cc()}if(2&e){const e=c.qc(2);c.yc("groupSettings",e.groupSettings)("setDefaultValues",!1)}}function u(e,t){if(1&e){const e=c.ec();c.dc(0,"nitro-group-creator-tab-colors-component",19),c.nc("groupSettingsChange",function(t){return c.Lc(e),c.qc(2).groupSettings=t}),c.cc()}if(2&e){const e=c.qc(2);c.yc("groupSettings",e.groupSettings)("setDefaultValues",!1)}}function h(e,t){if(1&e){const e=c.ec();c.dc(0,"nitro-group-manager-tab-preferences-component",20),c.nc("groupSettingsChange",function(t){return c.Lc(e),c.qc(2).groupSettings=t}),c.cc()}if(2&e){const e=c.qc(2);c.yc("groupSettings",e.groupSettings)}}const g=function(e){return{active:e}};function m(e,t){if(1&e){const e=c.ec();c.dc(0,"div",1),c.dc(1,"div",2),c.dc(2,"div",3),c.dc(3,"h6",4),c.Wc(4),c.rc(5,"translate"),c.cc(),c.dc(6,"button",5),c.nc("click",function(){return c.Lc(e),c.qc().hide()}),c.Zb(7,"i",6),c.cc(),c.cc(),c.dc(8,"div",7),c.dc(9,"div",8),c.dc(10,"button",9),c.nc("click",function(){return c.Lc(e),c.qc().setTab(1)}),c.Wc(11),c.rc(12,"translate"),c.cc(),c.dc(13,"button",9),c.nc("click",function(){return c.Lc(e),c.qc().setTab(2)}),c.Wc(14),c.rc(15,"translate"),c.cc(),c.dc(16,"button",9),c.nc("click",function(){return c.Lc(e),c.qc().setTab(3)}),c.Wc(17),c.rc(18,"translate"),c.cc(),c.dc(19,"button",9),c.nc("click",function(){return c.Lc(e),c.qc().setTab(4)}),c.Wc(20),c.rc(21,"translate"),c.cc(),c.cc(),c.Uc(22,l,1,3,"nitro-group-manager-tab-info-component",10),c.Uc(23,d,1,2,"nitro-group-creator-tab-badge-component",11),c.Uc(24,u,1,2,"nitro-group-creator-tab-colors-component",11),c.Uc(25,h,1,1,"nitro-group-manager-tab-preferences-component",12),c.dc(26,"div",13),c.dc(27,"div",14),c.dc(28,"button",15),c.nc("click",function(){return c.Lc(e),c.qc().hide()}),c.Wc(29),c.rc(30,"translate"),c.cc(),c.dc(31,"button",16),c.nc("click",function(){return c.Lc(e),c.qc().delete()}),c.Wc(32),c.rc(33,"translate"),c.cc(),c.cc(),c.dc(34,"button",17),c.nc("click",function(){return c.Lc(e),c.qc().save()}),c.Wc(35),c.rc(36,"translate"),c.cc(),c.cc(),c.cc(),c.cc(),c.cc()}if(2&e){const e=c.qc();c.Kb(4),c.Xc(c.sc(5,16,"group.window.title")),c.Kb(6),c.yc("ngClass",c.Cc(32,g,1===e.currentTab)),c.Kb(1),c.Xc(c.sc(12,18,"group.edit.tab.1")),c.Kb(2),c.yc("ngClass",c.Cc(34,g,2===e.currentTab)),c.Kb(1),c.Xc(c.sc(15,20,"group.edit.tab.2")),c.Kb(2),c.yc("ngClass",c.Cc(36,g,3===e.currentTab)),c.Kb(1),c.Xc(c.sc(18,22,"group.edit.tab.3")),c.Kb(2),c.yc("ngClass",c.Cc(38,g,4===e.currentTab)),c.Kb(1),c.Xc(c.sc(21,24,"group.edit.tab.5")),c.Kb(2),c.yc("ngIf",1===e.currentTab),c.Kb(1),c.yc("ngIf",2===e.currentTab),c.Kb(1),c.yc("ngIf",3===e.currentTab),c.Kb(1),c.yc("ngIf",4===e.currentTab),c.Kb(4),c.Xc(c.sc(30,26,"generic.cancel")),c.Kb(3),c.Xc(c.sc(33,28,"group.delete")),c.Kb(3),c.Xc(c.sc(36,30,"save"))}}let f=(()=>{class e{constructor(e,t,n){this._groupService=e,this._notificationService=t,this._ngZone=n,this._groupService.groupManagerComponent=this,this._clear()}_clear(){this.groupSettings=new s.a,this.visible=!1,this._currentTab=1,this._showNameError=!1,this._showDescriptionError=!1}ngOnInit(){this._clear()}ngOnDestroy(){this._clear()}load(e){this._clear(),this._ngZone.run(()=>{this.groupSettings.id=e.id,this.groupSettings.name=e.title,this.groupSettings.description=e.description,this.groupSettings.roomId=e.roomId.toString(),this.groupSettings.badgeParts=e.badgeParts,this.groupSettings.colorA=e.colorA,this.groupSettings.colorB=e.colorB,this.groupSettings.state=e.state,this.groupSettings.canMembersDecorate=e.canMembersDecorate,this.visible=!0})}setTab(e){this._currentTab=e}hide(){this.visible=!1}save(){this._showNameError=0===this.groupSettings.name.length||this.groupSettings.name.length>29,this._showDescriptionError=this.groupSettings.description.length>254,this._showNameError||this._showDescriptionError?this._currentTab=1:this._groupService.save(this.groupSettings)}delete(){const e=i.a.instance.localization.getValue("group.deleteconfirm.title"),t=i.a.instance.localization.getValue("group.deleteconfirm.desc"),n=[new r.a("group.delete",()=>{this._groupService.deleteGroup(this.groupSettings.id),this.hide(),this._groupService.groupInfoComponent.clear()},["btn-danger"]),new r.a("generic.close",()=>{},["btn-primary"])];this._notificationService.alertWithChoices(t,n,e)}get currentTab(){return this._currentTab}get showNameError(){return this._showNameError}get showDescriptionError(){return this._showDescriptionError}}return e.\u0275fac=function(t){return new(t||e)(c.Yb(o.a),c.Yb(a.a),c.Yb(c.H))},e.\u0275cmp=c.Sb({type:e,selectors:[["nitro-group-manager-component"]],decls:1,vars:1,consts:[["class","nitro-group-manager-component","dragHandle",".drag-handler",3,"draggable","bringToTop",4,"ngIf"],["dragHandle",".drag-handler",1,"nitro-group-manager-component",3,"draggable","bringToTop"],[1,"card"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"btn-group","mb-3","w-100"],[1,"btn","btn-primary",3,"ngClass","click"],[3,"groupSettings","showNameError","showDescriptionError","groupSettingsChange",4,"ngIf"],[3,"groupSettings","setDefaultValues","groupSettingsChange",4,"ngIf"],[3,"groupSettings","groupSettingsChange",4,"ngIf"],[1,"d-flex","flex-row","justify-content-between"],[1,"btn-group"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-success",3,"click"],[3,"groupSettings","showNameError","showDescriptionError","groupSettingsChange"],[3,"groupSettings","setDefaultValues","groupSettingsChange"],[3,"groupSettings","groupSettingsChange"]],template:function(e,t){1&e&&c.Uc(0,m,37,40,"div",0),2&e&&c.yc("ngIf",t.visible)},encapsulation:2}),e})()},"7deb":function(e,t,n){"use strict";n.d(t,"a",function(){return i});let i=(()=>{class e{}return e.AVATAR_SAYS_SOMETHING=0,e.AVATAR_WALKS_ON_FURNI=1,e.AVATAR_WALKS_OFF_FURNI=2,e.TRIGGER_ONCE=3,e.TOGGLE_FURNI=4,e.TRIGGER_PERIODICALLY=6,e.AVATAR_ENTERS_ROOM=7,e.GAME_STARTS=8,e.GAME_ENDS=9,e.SCORE_ACHIEVED=10,e.COLLISION=11,e.TRIGGER_PERIODICALLY_LONG=12,e.BOT_REACHED_STUFF=13,e.BOT_REACHED_AVATAR=14,e})()},"7lPm":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("gKK4"),r=n("VFvI"),s=n("fXoL");let c=(()=>{class e extends i.a{constructor(){super(...arguments),this.team="1"}get code(){return e.CODE}get negativeCode(){return e.NEGATIVE_CODE}onEditStart(e){this.team=e.intData[0].toString()}readIntegerParamsFromForm(){return[Number.parseInt(this.team)]}get hasSpecialInputs(){return!0}}return e.CODE=r.a.ACTOR_IS_IN_TEAM,e.NEGATIVE_CODE=r.a.NOT_ACTOR_IN_TEAM,e.\u0275fac=function(t){return o(t||e)},e.\u0275cmp=s.Sb({type:e,selectors:[["ng-component"]],features:[s.Hb],decls:23,vars:19,consts:[[1,"form-check"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","radio","value","3",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","radio","value","4",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(s.dc(0,"nitro-wired-base-component"),s.Wc(1),s.rc(2,"translate"),s.dc(3,"div",0),s.dc(4,"input",1),s.nc("ngModelChange",function(e){return t.team=e}),s.cc(),s.dc(5,"label",2),s.Wc(6),s.rc(7,"translate"),s.cc(),s.cc(),s.dc(8,"div",0),s.dc(9,"input",3),s.nc("ngModelChange",function(e){return t.team=e}),s.cc(),s.dc(10,"label",2),s.Wc(11),s.rc(12,"translate"),s.cc(),s.cc(),s.dc(13,"div",0),s.dc(14,"input",4),s.nc("ngModelChange",function(e){return t.team=e}),s.cc(),s.dc(15,"label",2),s.Wc(16),s.rc(17,"translate"),s.cc(),s.cc(),s.dc(18,"div",0),s.dc(19,"input",5),s.nc("ngModelChange",function(e){return t.team=e}),s.cc(),s.dc(20,"label",2),s.Wc(21),s.rc(22,"translate"),s.cc(),s.cc(),s.cc()),2&e&&(s.Kb(1),s.Yc(" ",s.sc(2,9,"wiredfurni.params.team")," "),s.Kb(3),s.yc("ngModel",t.team),s.Kb(2),s.Xc(s.sc(7,11,"wiredfurni.params.team.1")),s.Kb(3),s.yc("ngModel",t.team),s.Kb(2),s.Xc(s.sc(12,13,"wiredfurni.params.team.2")),s.Kb(3),s.yc("ngModel",t.team),s.Kb(2),s.Xc(s.sc(17,15,"wiredfurni.params.team.3")),s.Kb(3),s.yc("ngModel",t.team),s.Kb(2),s.Xc(s.sc(22,17,"wiredfurni.params.team.4")))},encapsulation:2}),e})();const o=s.fc(c)},"8QJu":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("GJ6n"),r=n("xPcM"),s=n("fXoL");let c=(()=>{class e extends i.a{get code(){return e.CODE}onEditStart(e){this.team=(e.intData.length>2?e.intData[2]:1).toString(),super.onEditStart(e)}readIntegerParamsFromForm(){return[this.points,this.times,parseInt(this.team)]}}return e.CODE=r.a.GIVE_SCORE_TO_PREDEFINED_TEAM,e.\u0275fac=function(t){return o(t||e)},e.\u0275cmp=s.Sb({type:e,selectors:[["ng-component"]],features:[s.Hb],decls:36,vars:35,consts:[[3,"delay","delayChange"],[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","points",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"],["name","times",3,"options","value","valueChange"],[1,"form-group"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","1",3,"selected"],["value","2",3,"selected"],["value","3",3,"selected"],["value","4",3,"selected"]],template:function(e,t){1&e&&(s.dc(0,"nitro-wired-action-base-component",0),s.nc("delayChange",function(e){return t.delay=e}),s.dc(1,"p",1),s.Wc(2),s.rc(3,"translate"),s.cc(),s.dc(4,"div",2),s.dc(5,"button",3),s.nc("click",function(){return t.decreasePoints()}),s.Zb(6,"i",4),s.cc(),s.dc(7,"ngx-slider",5),s.nc("valueChange",function(e){return t.points=e}),s.cc(),s.dc(8,"button",3),s.nc("click",function(){return t.increasePoints()}),s.Zb(9,"i",6),s.cc(),s.cc(),s.dc(10,"p",1),s.Wc(11),s.rc(12,"translate"),s.cc(),s.dc(13,"div",2),s.dc(14,"button",3),s.nc("click",function(){return t.decreaseTimes()}),s.Zb(15,"i",4),s.cc(),s.dc(16,"ngx-slider",7),s.nc("valueChange",function(e){return t.times=e}),s.cc(),s.dc(17,"button",3),s.nc("click",function(){return t.increaseTimes()}),s.Zb(18,"i",6),s.cc(),s.cc(),s.dc(19,"div",8),s.dc(20,"label"),s.Wc(21),s.rc(22,"translate"),s.cc(),s.dc(23,"select",9),s.nc("ngModelChange",function(e){return t.team=e}),s.dc(24,"option",10),s.Wc(25),s.rc(26,"translate"),s.cc(),s.dc(27,"option",11),s.Wc(28),s.rc(29,"translate"),s.cc(),s.dc(30,"option",12),s.Wc(31),s.rc(32,"translate"),s.cc(),s.dc(33,"option",13),s.Wc(34),s.rc(35,"translate"),s.cc(),s.cc(),s.cc(),s.cc()),2&e&&(s.yc("delay",t.delay),s.Kb(2),s.Xc(s.uc(3,17,"wiredfurni.params.setpoints","points",t.points)),s.Kb(5),s.yc("options",t.pointsSliderOptions)("value",t.points),s.Kb(4),s.Xc(s.uc(12,21,"wiredfurni.params.settimesingame","times",t.times)),s.Kb(5),s.yc("options",t.timesSliderOptions)("value",t.times),s.Kb(5),s.Xc(s.sc(22,25,"wiredfurni.params.team")),s.Kb(2),s.yc("ngModel",t.team),s.Kb(1),s.yc("selected","1"==t.team),s.Kb(1),s.Xc(s.sc(26,27,"wiredfurni.params.team.1")),s.Kb(2),s.yc("selected","2"==t.team),s.Kb(1),s.Xc(s.sc(29,29,"wiredfurni.params.team.2")),s.Kb(2),s.yc("selected","3"==t.team),s.Kb(1),s.Xc(s.sc(32,31,"wiredfurni.params.team.3")),s.Kb(2),s.yc("selected","4"==t.team),s.Kb(1),s.Xc(s.sc(35,33,"wiredfurni.params.team.4")))},encapsulation:2}),e})();const o=s.fc(c)},"8W70":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("xPcM"),s=n("vLqR"),c=n("fXoL");let o=(()=>{class e extends s.a{get code(){return e.CODE}get requiresFurni(){return i.a._Str_5430}}return e.CODE=r.a.CHASE,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(e,t){1&e&&(c.dc(0,"nitro-wired-action-base-component",0),c.nc("delayChange",function(e){return t.delay=e}),c.cc()),2&e&&c.yc("delay",t.delay)},encapsulation:2}),e})();const a=c.fc(o)},"8c0Z":function(e,t,n){"use strict";n.d(t,"a",function(){return i});let i=(()=>{class e{constructor(){this._id=++e.ITEM_COUNTER,this._senderId=-1,this._senderName="",this._senderColor=0,this._senderImageUrl=null,this._content="",this._chatType=0,this._chatStyle=0,this._date=new Date}get id(){return this._id}get senderId(){return this._senderId}set senderId(e){this._senderId=e}get senderName(){return this._senderName}set senderName(e){this._senderName=e}get senderColorString(){return this._senderColor&&"#"+this._senderColor.toString(16).padStart(6,"0")||null}set senderColor(e){this._senderColor=e}get senderImageUrl(){return this._senderImageUrl}set senderImageUrl(e){this._senderImageUrl=e}get content(){return this._content}set content(e){this._content=e}get chatType(){return this._chatType}set chatType(e){this._chatType=e}get chatStyle(){return this._chatStyle}set chatStyle(e){this._chatStyle=e}get date(){return this._date}}return e.ITEM_COUNTER=0,e})()},AY3i:function(e,t,n){"use strict";n.d(t,"a",function(){return Te});var i=n("fXoL"),r=n("uAE8"),s=n("/y2x"),c=n("E/XJ"),o=n("yRQY"),a=n("EhcW"),l=n("cJOt"),d=n("bwAN"),u=n("ssUo"),h=n("7oGv"),g=n("IqKQ"),m=n("0ldw");class f extends g.Filter{constructor(e,t){super("\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec3 lineColor;\nuniform vec3 color;\nvoid main(void) {\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n    vec3 colorLine = lineColor * currentColor.a;\n    vec3 colorOverlay = color * currentColor.a;\n\n    if(currentColor.r == 0.0 && currentColor.g == 0.0 && currentColor.b == 0.0 && currentColor.a > 0.0) {\n        gl_FragColor = vec4(colorLine.r, colorLine.g, colorLine.b, currentColor.a);\n    } else if(currentColor.a > 0.0) {\n        gl_FragColor = vec4(colorOverlay.r, colorOverlay.g, colorOverlay.b, currentColor.a);\n    }\n}"),this.uniforms.lineColor=new Float32Array(3),this.uniforms.color=new Float32Array(3),this.lineColor=e,this.color=t}get lineColor(){return this._lineColor}set lineColor(e){const t=this.uniforms.lineColor;"number"==typeof e?(m.a.hex2rgb(e,t),this._lineColor=e):(t[0]=e[0],t[1]=e[1],t[2]=e[2],this._lineColor=m.a.rgb2hex(t))}get color(){return this._color}set color(e){const t=this.uniforms.color;"number"==typeof e?(m.a.hex2rgb(e,t),this._color=e):(t[0]=e[0],t[1]=e[1],t[2]=e[2],this._color=m.a.rgb2hex(t))}}class p{constructor(e){this._component=e;const t=new f([1,1,1],[.6,.6,.6]);this._selectionShader=t}show(e){this.applySelectionShader(this.getRoomObject(e))}hide(e){this.clearSelectionShader(this.getRoomObject(e))}clearSelectionShaderFromFurni(e){for(const t of e)this.clearSelectionShader(this.getRoomObject(t))}applySelectionShaderToFurni(e){for(const t of e)this.applySelectionShader(this.getRoomObject(t))}getRoomObject(e){return this._component?d.a.instance.roomEngine.getRoomObject(this._component.roomId,e,u.a.FLOOR):null}applySelectionShader(e){if(!e)return;const t=e.visualization;if(t)for(const n of t.sprites)n.blendMode!==g.BLEND_MODES.ADD&&(n.filters=[this._selectionShader])}clearSelectionShader(e){if(!e)return;const t=e.visualization;if(t)for(const n of t.sprites)n.filters=[]}}var _=n("vLqR"),b=n("0KUG"),v=n("dm2L"),E=n("7lPm"),S=n("DuWk"),y=n("kWRQ"),I=n("ZdPW"),w=n("GP5J"),C=n("0c+i"),R=n("g/Uk"),T=n("atjC"),O=n("zMPl"),M=n("S/W9"),U=n("luCG"),x=n("rC5y"),A=n("3k08"),D=n("Zq7N");class L{_Str_9781(e){switch(e){case y.a.CODE:case y.a.NEGATIVE_CODE:return y.a;case R.a.CODE:case R.a.NEGATIVE_CODE:return R.a;case M.a.CODE:case M.a.NEGATIVE_CODE:return M.a;case A.a.CODE:return A.a;case x.a.CODE:return x.a;case D.a.CODE:case D.a.NEGATIVE_CODE:return D.a;case E.a.CODE:case E.a.NEGATIVE_CODE:return E.a;case O.a.CODE:return O.a;case T.a.CODE:case T.a.NEGATIVE_CODE:return T.a;case U.a.CODE:case U.a.NEGATIVE_CODE:return U.a;case v.a.CODE:case v.a.NEGATIVE_CODE:return v.a;case I.a.CODE:case I.a.NEGATIVE_CODE:return I.a;case S.a.CODE:case S.a.NEGATIVE_CODE:return S.a;case C.a.CODE:return C.a;case w.a.CODE:return w.a;case b.a.CODE:return b.a}return null}_Str_15652(e){return this._Str_9781(e)}_Str_14545(e){return e instanceof r.a}_Str_1196(){return"condition"}}var k=n("E6+/"),P=n("EgWd"),N=n("CKbm"),W=n("02+m"),K=n("mRgt"),F=n("AY4R"),V=n("T7hV"),q=n("mR5C"),H=n("NWZ3"),B=n("LFPO"),G=n("p/Fp"),Z=n("lKxs"),X=n("oPv6"),j=n("UE3i");class Y{_Str_9781(e){switch(e){case P.a.CODE:return P.a;case W.a.CODE:return W.a;case N.a.CODE:return N.a;case Z.a.CODE:return Z.a;case G.a.CODE:return G.a;case j.a.CODE:return j.a;case k.a.CODE:return k.a;case H.a.CODE:return H.a;case q.a.CODE:return q.a;case B.a.CODE:return B.a;case V.a.CODE:return V.a;case X.a.CODE:return X.a;case F.a.CODE:return F.a;case K.a.CODE:return K.a}return null}_Str_15652(e){return this._Str_9781(e)}_Str_14545(e){return e instanceof s.a}_Str_1196(){return"trigger"}}var z=n("R7Po"),$=n("pnVP"),Q=n("YDkd"),J=n("Jh8m"),ee=n("4ctn"),te=n("wEng"),ne=n("qfqS"),ie=n("GeE8"),re=n("8W70"),se=n("MIuP"),ce=n("WyFn"),oe=n("Ifn1"),ae=n("8QJu"),le=n("GJ6n"),de=n("6u8Q"),ue=n("C7tP"),he=n("PNXX"),ge=n("k5mv"),me=n("plXl"),fe=n("rGzS"),pe=n("DWMI"),_e=n("T8aY"),be=n("S67I"),ve=n("HZCd"),Ee=n("mmPZ");class Se{_Str_9781(e){switch(e){case Ee.a.CODE:return Ee.a;case ve.a.CODE:return ve.a;case re.a.CODE:return re.a;case ce.a.CODE:return ce.a;case ie.a.CODE:return ie.a;case se.a.CODE:return se.a;case Q.a.CODE:return Q.a;case $.a.CODE:return $.a;case he.a.CODE:return he.a;case _e.a.CODE:return _e.a;case ue.a.CODE:return ue.a;case ne.a.CODE:return ne.a;case be.a.CODE:return be.a;case J.a.CODE:return J.a;case pe.a.CODE:return pe.a;case z.a.CODE:return z.a;case ee.a.CODE:return ee.a;case te.a.CODE:return te.a;case me.a.CODE:return me.a;case fe.a.CODE:return fe.a;case de.a.CODE:return de.a;case ae.a.CODE:return ae.a;case le.a.CODE:return le.a;case ge.a.CODE:return ge.a;case oe.a.CODE:return oe.a}return null}_Str_15652(e){return this._Str_9781(e)}_Str_14545(e){return e instanceof c.a}_Str_1196(){return"action"}}var ye=n("WnqX"),Ie=n("l1qq"),we=n("G+4o");const Ce=["inputsContainer"];function Re(e,t){}let Te=(()=>{class e{constructor(e,t,n,i,r){this._settingsService=e,this._notificationService=t,this._wiredService=n,this._componentFactoryResolver=i,this._ngZone=r,this._updated=null,this._lastComponent=null,this._furniSelectedIds=[]}ngOnInit(){this._wiredService.component=this,this._triggerConfs=new Y,this._actionTypes=new Se,this._conditionTypes=new L,this._selectionVisualizer=new p(this)}ngOnDestroy(){this._wiredService.component=null}setupTrigger(e){this._updated=e;const t=this._Str_3959();this._selectionVisualizer.clearSelectionShaderFromFurni(this._furniSelectedIds),this._furniSelectedIds=[...this._updated.selectedItems],t.onEditStart(this._updated),this._selectionVisualizer.applySelectionShaderToFurni(this._furniSelectedIds)}_Str_19071(){return this._updated instanceof s.a?this._triggerConfs:this._updated instanceof c.a?this._actionTypes:this._updated instanceof r.a?this._conditionTypes:null}_Str_3959(){const e=this._Str_19071()._Str_15652(this._updated.code);if(!e)return null;if(this._lastComponent&&this._lastComponent.instance instanceof e)return this._lastComponent.instance;this.inputsContainer.length&&this.inputsContainer.remove();const t=this._componentFactoryResolver.resolveComponentFactory(e);let n=null;return t&&(n=this.inputsContainer.createComponent(t)),this._lastComponent=n,n?(n.instance.onInitStart(),n.instance):null}close(){this.inputsContainer.length&&this.inputsContainer.remove(),this._selectionVisualizer.clearSelectionShaderFromFurni(this._furniSelectedIds),this._updated=null,this._lastComponent=null,this._furniSelectedIds=[]}save(){this.isOwnerOfFurniture(this._updated.id)?this.update():this._notificationService.alertWithConfirm("${wiredfurni.nonowner.change.confirm.body}","${wiredfurni.nonowner.change.confirm.title}",()=>{this.update()})}update(){const e=this._Str_3959().validate();e?this._notificationService.alert(e,"Update failed"):this._updated instanceof s.a?d.a.instance.communication.connection.send(new l.a(this._updated.id,this.readIntegerParams(),this.readStringParam(),this.readFurniSelectionIds(),this.readFurniSelectionCode())):this._updated instanceof c.a?d.a.instance.communication.connection.send(new o.a(this._updated.id,this.readIntegerParams(),this.readStringParam(),this.readFurniSelectionIds(),this.getActionDelay(),this.readFurniSelectionCode())):this._updated instanceof r.a&&d.a.instance.communication.connection.send(new a.a(this._updated.id,this.readIntegerParams(),this.readStringParam(),this.readFurniSelectionIds(),this.readFurniSelectionCode()))}getActionDelay(){const e=this._Str_3959();return e&&e instanceof _.a?e.delay:0}readIntegerParams(){const e=this._Str_3959();return e?e.readIntegerParamsFromForm():[]}readStringParam(){const e=this._Str_3959();return e?e.readStringParamFromForm():""}readFurniSelectionIds(){return[...this._furniSelectedIds]}readFurniSelectionCode(){if(!this._updated._Str_21824)return 0;const t=this._Str_3959();return!t||t.requiresFurni!==e._Str_4991&&t.requiresFurni!==e._Str_5430?0:this._updated._Str_6040}getFurniName(){const e=this._updated&&this._updated.spriteId||-1,t=d.a.instance.sessionDataManager.getFloorItemData(e);return t?t.name:"NAME: "+e}getFurniDescription(){const e=this._updated&&this._updated.spriteId||-1,t=d.a.instance.sessionDataManager.getFloorItemData(e);return t?t.description:"NAME: "+e}_Str_19885(){return this._Str_3959().requiresFurni!==e._Str_5431}toggleFurniSelected(e,t){if(!this._updated||!this._Str_19885())return;const n=this._furniSelectedIds.indexOf(e);n>=0?(this._furniSelectedIds.splice(n,1),this._selectionVisualizer.hide(e)):this._furniSelectedIds.length<this._updated.maximumItemSelectionCount&&(this._furniSelectedIds.push(e),this._selectionVisualizer.show(e)),d.a.instance.localization.registerParameter("wiredfurni.pickfurnis.caption","count",this._furniSelectedIds.length.toString())}isOwnerOfFurniture(e){const t=d.a.instance.roomEngine.getRoomObject(this._wiredService.roomId,e,u.a.FLOOR);return!!t&&t.model.getValue(h.a.FURNITURE_OWNER_ID)===d.a.instance.sessionDataManager.userId}get roomId(){return this._wiredService.roomId}get furniSelectedIds(){return this._furniSelectedIds}get maximumItemSelectionCount(){return this._updated.maximumItemSelectionCount}}return e._Str_5431=0,e._Str_4873=1,e._Str_4991=2,e._Str_5430=3,e.\u0275fac=function(t){return new(t||e)(i.Yb(ye.a),i.Yb(Ie.a),i.Yb(we.a),i.Yb(i.m),i.Yb(i.H))},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-wired-main-component"]],viewQuery:function(e,t){if(1&e&&i.cd(Ce,1,i.Z),2&e){let e;i.Hc(e=i.oc())&&(t.inputsContainer=e.first)}},decls:2,vars:0,consts:[["inputsContainer",""]],template:function(e,t){1&e&&i.Uc(0,Re,0,0,"ng-template",null,0,i.Vc)},encapsulation:2}),e})()},AY4R:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("wDsT"),s=n("7deb"),c=n("fXoL");let o=(()=>{class e extends r.a{constructor(){super(...arguments),this.keyword=""}get code(){return e.CODE}get requiresFurni(){return i.a._Str_4991}onEditStart(e){this.keyword=e.stringData}readStringParamFromForm(){return this.keyword}get hasSpecialInputs(){return!0}}return e.CODE=s.a.BOT_REACHED_STUFF,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:6,vars:4,consts:[[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.dc(0,"nitro-wired-base-component"),c.dc(1,"div",0),c.dc(2,"label"),c.Wc(3),c.rc(4,"translate"),c.cc(),c.dc(5,"input",1),c.nc("ngModelChange",function(e){return t.keyword=e}),c.cc(),c.cc(),c.cc()),2&e&&(c.Kb(3),c.Xc(c.sc(4,2,"wiredfurni.params.bot.name")),c.Kb(2),c.yc("ngModel",t.keyword))},encapsulation:2}),e})();const a=c.fc(o)},C7tP:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("bwAN"),r=n("xPcM"),s=n("vLqR"),c=n("fXoL");let o=(()=>{class e extends s.a{get code(){return e.CODE}get hasSpecialInputs(){return!0}readStringParamFromForm(){return this.message}onEditStart(e){this.message=e.stringData,super.onEditStart(e)}validate(){return this.message.length>100?i.a.instance.localization.getValue("wiredfurni.chatmsgtoolong",!1):null}}return e.CODE=r.a.KICK_FROM_ROOM,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:6,vars:5,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.dc(0,"nitro-wired-action-base-component",0),c.nc("delayChange",function(e){return t.delay=e}),c.dc(1,"div",1),c.dc(2,"label"),c.Wc(3),c.rc(4,"translate"),c.cc(),c.dc(5,"input",2),c.nc("ngModelChange",function(e){return t.message=e}),c.cc(),c.cc(),c.cc()),2&e&&(c.yc("delay",t.delay),c.Kb(3),c.Xc(c.sc(4,3,"wiredfurni.params.message")),c.Kb(2),c.yc("ngModel",t.message))},encapsulation:2}),e})();const a=c.fc(o)},CCgv:function(e,t,n){"use strict";n.d(t,"a",function(){return B});var i=n("QIiF"),r=n("Cum4"),s=n("/Pz4"),c=n("PKUS"),o=n("UaTn"),a=n("yWE+"),l=n("QaqC"),d=n("54+R"),u=n("1P0L"),h=n("vC8r"),g=n("tMU3"),m=n("ERsT"),f=n("Gw22"),p=n("j4RJ"),_=n("Vo1H"),b=n("OmiQ"),v=n("3+UD"),E=n("BGhM"),S=n("ctZz"),y=n("Mxz5"),I=n("MQXk"),w=n("8azw"),C=n("A7kE"),R=n("oVza"),T=n("H7KH"),O=n("N1N1"),M=n("0oRX"),U=n("R8D8"),x=n("Q5/h"),A=n("iY8a"),D=n("vlik"),L=n("6ZDM"),k=n("6lro"),P=n("2Fqd"),N=n("bwAN"),W=n("+FnT"),K=n("VzAs");class F{constructor(){this._enteredGuestRoom=null,this._staffPick=!1,this._createdRoomId=0,this._currentRoomId=0,this._currentRoomOwner=!1,this._canRate=!1}get enteredGuestRoom(){return this._enteredGuestRoom}set enteredGuestRoom(e){this._enteredGuestRoom=e}get staffPick(){return this._staffPick}set staffPick(e){this._staffPick=e}get createdRoomId(){return this._createdRoomId}set createdRoomId(e){this._createdRoomId=e}get currentRoomId(){return this._currentRoomId}set currentRoomId(e){this._currentRoomId=e}get currentRoomOwner(){return this._currentRoomOwner}set currentRoomOwner(e){this._currentRoomOwner=e}get canRate(){return this._canRate}set canRate(e){this._canRate=e}}var V=n("fXoL"),q=n("l1qq"),H=n("WnqX");let B=(()=>{class e{constructor(t,n,i){this._notificationService=t,this._settingsService=n,this._ngZone=i,this._roomInfoShowing=!1,this._messages=[],this._component=null,this._topLevelContexts=[],this._topLevelContext=null,this._categories=[],this._filter=e.SEARCH_FILTERS[0],this._lastSearchResults=[],this._lastSearch="",this._data=new F,this._tradeSettings=[],this._homeRoomId=-1,this._isSearching=!1,this._isLoaded=!1,this._isLoading=!1,this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.setTradeSettings(),this.registerMessages(),N.a.instance.addLinkEventTracker(this),P.a.available&&P.a.addCallback(K.a.OPENROOM,this.enterRoomWebRequest)}ngOnDestroy(){this.unregisterMessages(),N.a.instance.removeLinkEventTracker(this)}registerMessages(){this._ngZone.runOutsideAngular(()=>{N.a.instance.roomSessionManager.events.addEventListener(W.a.CREATED,this.onRoomSessionEvent),this._messages=[new w.a(this.onUserInfoEvent.bind(this)),new b.a(this.onRoomForwardEvent.bind(this)),new E.a(this.onRoomInfoOwnerEvent.bind(this)),new v.a(this.onRoomInfoEvent.bind(this)),new _.a(this.onRoomEnterErrorEvent.bind(this)),new I.a(this.onRoomCreatedEvent.bind(this)),new f.a(this.onRoomDoorbellEvent.bind(this)),new m.a(this.onRoomDoorbellAcceptedEvent.bind(this)),new S.a(this.onRoomScoreEvent.bind(this)),new y.a(this.onRoomSettingsUpdatedEvent.bind(this)),new i.a(this.onGenericErrorEvent.bind(this)),new p.a(this.onRoomDoorbellRejectedEvent.bind(this)),new r.a(this.onNavigatorCategoriesEvent.bind(this)),new s.a(this.onNavigatorCollapsedEvent.bind(this)),new c.a(this.onNavigatorEventCategoriesEvent.bind(this)),new a.a(this.onNavigatorLiftedEvent.bind(this)),new l.a(this.onNavigatorMetadataEvent.bind(this)),new d.a(this.onNavigatorOpenRoomCreatorEvent.bind(this)),new u.a(this.onNavigatorSearchesEvent.bind(this)),new h.a(this.onNavigatorSearchEvent.bind(this)),new g.a(this.onNavigatorSettingsEvent.bind(this)),new o.a(this.onNavigatorHomeRoomEvent.bind(this))];for(const e of this._messages)N.a.instance.communication.registerMessageEvent(e)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{N.a.instance.roomSessionManager.events.removeEventListener(W.a.CREATED,this.onRoomSessionEvent);for(const e of this._messages)N.a.instance.communication.removeMessageEvent(e);this._messages=[]})}onRoomSessionEvent(e){if(e)switch(e.type){case W.a.CREATED:return void this._ngZone.run(()=>this._settingsService.hideNavigator())}}onUserInfoEvent(e){e&&e.getParser()&&(N.a.instance.communication.connection.send(new T.a),N.a.instance.communication.connection.send(new U.a))}onRoomForwardEvent(e){if(!(e instanceof b.a))return;const t=e.getParser();t&&N.a.instance.communication.connection.send(new x.a(t.roomId,!1,!0))}onRoomInfoOwnerEvent(e){if(!(e instanceof E.a))return;const t=e.getParser();t&&(this._ngZone.run(()=>{this._data.currentRoomOwner=!1,this._data.currentRoomOwner=t.isOwner,this._data.currentRoomId=t.roomId}),N.a.instance.communication.connection.send(new x.a(t.roomId,!0,!1)),P.a.call("legacyTrack","navigator","private",[t.roomId]))}onRoomInfoEvent(e){if(!(e instanceof v.a))return;const t=e.getParser();t&&this._ngZone.run(()=>{if(t.roomEnter)this._data.enteredGuestRoom=t.data,this._data.staffPick=t.data.roomPicker,this._data.createdRoomId=0;else if(t.roomForward){if(t.data.ownerName!==N.a.instance.sessionDataManager.userName&&!t.isGroupMember)switch(t.data.doorMode){case D.a.DOORBELL_STATE:return void this.openRoomDoorbell(t.data);case D.a.PASSWORD_STATE:return void this.openRoomPassword(t.data)}this.goToRoom(t.data.roomId)}else this._data.enteredGuestRoom=t.data,this._data.staffPick=t.data.roomPicker})}onRoomEnterErrorEvent(e){if(!(e instanceof _.a))return;const t=e.getParser();if(!t)return;this._ngZone.run(()=>{switch(t.reason){case A.a.FULL_ERROR:this._notificationService.alert("${navigator.guestroomfull.text}","${navigator.guestroomfull.title}");break;case A.a.QUEUE_ERROR:this._notificationService.alert("${room.queue.error. "+t.parameter+"}","${room.queue.error.title}");break;case A.a.BANNED:this._notificationService.alert("${navigator.banned.text}","${navigator.banned.title}");break;default:this._notificationService.alert("${room.queue.error.title}","${room.queue.error.title}")}}),N.a.instance.communication.connection.send(new C.a);const n=new k.a(k.a.TOOLBAR_CLICK);n.iconName=L.a.HOTEL_VIEW,N.a.instance.roomEngine.events.dispatchEvent(n)}onRoomCreatedEvent(e){if(!e)return;const t=e.getParser();t&&(this._ngZone.run(()=>{this._data.createdRoomId=t.roomId,this._roomInfoShowing=!1}),this.goToRoom(t.roomId))}onRoomDoorbellEvent(e){if(!e)return;const t=e.getParser();t&&(t.userName&&0!==t.userName.length||this._ngZone.run(()=>this._component&&this._component.openRoomDoorbell(null,!0)))}onRoomDoorbellAcceptedEvent(e){if(!e)return;const t=e.getParser();t&&(t.userName&&0!==t.userName.length||this._ngZone.run(()=>this._component&&this._component.closeRoomDoorbell()))}onRoomScoreEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>this._data.canRate=t.canLike)}onRoomSettingsUpdatedEvent(e){if(!e)return;const t=e.getParser();t&&N.a.instance.communication.connection.send(new x.a(t.roomId,!1,!1))}onGenericErrorEvent(e){if(!e)return;const t=e.getParser();if(t)switch(t.errorCode){case-100002:this._ngZone.run(()=>this._component&&this._component.openRoomPassword(null,!0));break;case 4009:this._notificationService.alert("${navigator.alert.need.to.be.vip}","${generic.alert.title}");break;case 4010:this._notificationService.alert("${navigator.alert.invalid_room_name}","${generic.alert.title}");break;case 4011:this._notificationService.alert("${navigator.alert.cannot_perm_ban}","${generic.alert.title}");break;case 4013:this._notificationService.alert("${navigator.alert.room_in_maintenance}","${generic.alert.title}")}}onRoomDoorbellRejectedEvent(e){if(!e)return;const t=e.getParser();t&&(t.userName&&0!==t.userName.length||this._ngZone.run(()=>this._component&&this._component.openRoomDoorbell(null,!1,!0)))}onNavigatorCategoriesEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>this._categories=t.categories)}onNavigatorCollapsedEvent(e){e&&e.getParser()}onNavigatorEventCategoriesEvent(e){e&&e.getParser()}onNavigatorLiftedEvent(e){e&&e.getParser()}onNavigatorMetadataEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>{this._topLevelContexts=t.topLevelContexts,this._topLevelContexts.length>0&&this.setCurrentContext(this._topLevelContexts[0]),this.clearSearch()})}onNavigatorOpenRoomCreatorEvent(e){e&&e.getParser()&&this._component&&this._ngZone.run(()=>this._component.openRoomCreator())}onNavigatorSearchesEvent(e){e&&e.getParser()}onNavigatorSearchEvent(e){if(!e)return;const t=e.getParser();if(!t)return;const n=t.result;n&&this._ngZone.run(()=>{this.setCurrentContextByCode(n.code),this._lastSearchResults=n.results,this._isSearching=!1})}onNavigatorSettingsEvent(e){e&&e.getParser()}onNavigatorHomeRoomEvent(e){if(!e)return;const t=e.getParser();t&&(this._homeRoomId=t.homeRoomId)}getMaxVisitors(t){const n=[];let i=e.MAX_VISITOR_STEPPER;for(;i<=t;)n.push(i),i+=e.MAX_VISITOR_INCREMENTOR;return n}setTradeSettings(){this._tradeSettings=[],this._tradeSettings.push("${navigator.roomsettings.trade_not_allowed}","${navigator.roomsettings.trade_not_with_Controller}","${navigator.roomsettings.trade_allowed}")}goToRoom(e,t=null){N.a.instance.roomSessionManager.createSession(e,t)}goToPrivateRoom(e){N.a.instance.communication.connection.send(new x.a(e,!1,!0))}goToHomeRoom(){return!(this._homeRoomId<1||(this.goToRoom(this._homeRoomId),0))}getContextByCode(e){if(!e)return null;for(const t of this._topLevelContexts)if(t&&t.code===e)return t;return null}setCurrentContext(e,t=!0){e&&this._topLevelContext!==e&&(this._topLevelContext=e)}setCurrentContextByCode(e,t=!0){if(!e)return;const n=this.getContextByCode(e);n&&this.setCurrentContext(n,t)}setCurrentFilter(e){e&&this._filter!==e&&(this._filter=e)}search(t=null){if(!this._topLevelContext||this._isSearching)return;this._filter||this.setCurrentFilter(e.SEARCH_FILTERS[0]);const n=this._filter&&this._filter.query?this._filter.query+":":"";let i=t;null===i&&(i=this._lastSearch),this._lastSearch=i||"",this.sendSearch(this._topLevelContext.code,n+this._lastSearch)}clearSearch(){this.setCurrentFilter(e.SEARCH_FILTERS[0]),this._lastSearch=null,this.isLoaded&&this.search()}sendSearch(e,t){e&&(this._isSearching=!0,this._ngZone.runOutsideAngular(()=>N.a.instance.communication.connection.send(new M.a(e,t))))}loadNavigator(){this._ngZone.runOutsideAngular(()=>N.a.instance.communication.connection.send(new O.a)),this._isLoaded=!0}openRoomDoorbell(e){e&&this._component&&this._component.openRoomDoorbell(e)}openRoomPassword(e){e&&this._component&&this._component.openRoomPassword(e)}toggleRoomInfo(){this._roomInfoShowing=!this._roomInfoShowing}linkReceived(e){const t=e.split("/");if(!(t.length<2))switch(t[1]){case"goto":if(t.length>2)switch(t[2]){case"home":this.goToHomeRoom();break;default:{const e=parseInt(t[2]);e>0&&this.goToPrivateRoom(e)}}return}}enterRoomWebRequest(e,t=!1,n=null){N.a.instance.communication.connection.send(new R.a(e))}get eventUrlPrefix(){return"navigator"}get component(){return this._component}set component(e){this._component=e}get topLevelContexts(){return this._topLevelContexts}get topLevelContext(){return this._topLevelContext}get categories(){return this._categories}get filter(){return this._filter}get lastSearch(){return this._lastSearch}set lastSearch(e){this._lastSearch=e}get lastSearchResults(){return this._lastSearchResults}get isSearching(){return this._isSearching}get isLoaded(){return this._isLoaded}get isLoading(){return this._isLoading}get tradeSettings(){return this._tradeSettings}get data(){return this._data}get roomInfoShowing(){return this._roomInfoShowing}set roomInfoShowing(e){this._roomInfoShowing=e}}return e.SEARCH_FILTERS=[{name:"anything",query:null},{name:"room.name",query:"roomname"},{name:"owner",query:"owner"},{name:"tag",query:"tag"},{name:"group",query:"group"}],e.MAX_VISITOR_STEPPER=10,e.MAX_VISITOR_INCREMENTOR=5,e.\u0275fac=function(t){return new(t||e)(V.kc(q.a),V.kc(H.a),V.kc(V.H))},e.\u0275prov=V.Ub({token:e,factory:e.\u0275fac}),e})()},CKbm:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("wDsT"),s=n("7deb"),c=n("fXoL");let o=(()=>{class e extends r.a{get code(){return e.CODE}get requiresFurni(){return i.a._Str_4991}}return e.CODE=s.a.AVATAR_WALKS_OFF_FURNI,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:1,vars:0,template:function(e,t){1&e&&c.Zb(0,"nitro-wired-base-component")},encapsulation:2}),e})();const a=c.fc(o)},CU8w:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("bwAN"),r=n("fWLT"),s=n("fXoL");const c=function(e){return{"background-image":e}};function o(e,t){if(1&e&&(s.dc(0,"div",8),s.dc(1,"div",9),s.Wc(2),s.cc(),s.cc()),2&e){const e=s.qc();s.yc("ngStyle",s.Cc(2,c,"url("+e.getImagesUrl()+e.activePage.frontPageItems[0].itemPromoImage+")")),s.Kb(2),s.Xc(e.activePage.frontPageItems[0].itemName)}}function a(e,t){if(1&e&&(s.dc(0,"div",10),s.dc(1,"div",9),s.Wc(2),s.cc(),s.cc()),2&e){const e=s.qc();s.yc("ngStyle",s.Cc(2,c,"url("+e.getImagesUrl()+e.activePage.frontPageItems[1].itemPromoImage+")")),s.Kb(2),s.Xc(e.activePage.frontPageItems[1].itemName)}}function l(e,t){if(1&e&&(s.dc(0,"div",10),s.dc(1,"div",9),s.Wc(2),s.cc(),s.cc()),2&e){const e=s.qc();s.yc("ngStyle",s.Cc(2,c,"url("+e.getImagesUrl()+e.activePage.frontPageItems[2].itemPromoImage+")")),s.Kb(2),s.Xc(e.activePage.frontPageItems[2].itemName)}}function d(e,t){if(1&e&&(s.dc(0,"div",11),s.dc(1,"div",9),s.Wc(2),s.cc(),s.cc()),2&e){const e=s.qc();s.yc("ngStyle",s.Cc(2,c,"url("+e.getImagesUrl()+e.activePage.frontPageItems[3].itemPromoImage+")")),s.Kb(2),s.Xc(e.activePage.frontPageItems[3].itemName)}}let u=(()=>{class e extends r.a{getImagesUrl(){return i.a.instance.core.configuration.getValue("image.library.url")}}return e.CODE="frontpage4",e.\u0275fac=function(t){return h(t||e)},e.\u0275cmp=s.Sb({type:e,selectors:[["ng-component"]],features:[s.Hb],decls:9,vars:5,consts:[[1,"nitro-catalog-layout-frontpage4-component","row"],[1,"col-4"],["class","front-page-item tall",3,"ngStyle",4,"ngIf"],[1,"col-8"],[1,"d-flex","flex-column","w-100","mb-3"],["class","front-page-item wide mb-3",3,"ngStyle",4,"ngIf"],["class","front-page-item wide mb-0",3,"ngStyle",4,"ngIf"],[3,"localization"],[1,"front-page-item","tall",3,"ngStyle"],[1,"front-page-item-caption"],[1,"front-page-item","wide","mb-3",3,"ngStyle"],[1,"front-page-item","wide","mb-0",3,"ngStyle"]],template:function(e,t){1&e&&(s.dc(0,"div",0),s.dc(1,"div",1),s.Uc(2,o,3,4,"div",2),s.cc(),s.dc(3,"div",3),s.dc(4,"div",4),s.Uc(5,a,3,4,"div",5),s.Uc(6,l,3,4,"div",5),s.Uc(7,d,3,4,"div",6),s.cc(),s.Zb(8,"redeem-voucher-component",7),s.cc(),s.cc()),2&e&&(s.Kb(2),s.yc("ngIf",t.activePage.frontPageItems[0]),s.Kb(3),s.yc("ngIf",t.activePage.frontPageItems[1]),s.Kb(1),s.yc("ngIf",t.activePage.frontPageItems[2]),s.Kb(1),s.yc("ngIf",t.activePage.frontPageItems[3]),s.Kb(1),s.yc("localization",t.activePage.localization))},encapsulation:2}),e})();const h=s.fc(u)},Ci1R:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("fXoL");let r=(()=>{class e{constructor(e,t){this.elementRef=e,this.ngZone=t,this.target=null,this.bringToFront=this.bringToFront.bind(this)}ngAfterViewInit(){const e=this.elementRef.nativeElement;e&&(this.target=e,this.addTarget(),this.registerEvents(),this.bringToFront())}ngOnDestroy(){this.unregisterEvents(),this.removeTarget(),this.bringToFront()}addTarget(){this.target&&(e.TOP_TARGETS.indexOf(this.target)>=0||e.TOP_TARGETS.push(this.target))}removeTarget(){if(!this.target)return;const t=e.TOP_TARGETS.indexOf(this.target);-1!==t&&e.TOP_TARGETS.splice(t,1)}registerEvents(){this.ngZone.runOutsideAngular(()=>{this.target&&this.target.addEventListener("mousedown",this.bringToFront)})}unregisterEvents(){this.ngZone.runOutsideAngular(()=>{this.target&&this.target.removeEventListener("mousedown",this.bringToFront)})}bringToFront(t=null){this.moveTarget();let n=e.Z_INDEX_START;for(const i of e.TOP_TARGETS)i&&(n+=e.Z_INDEX_INCREASE,i.style.zIndex=n.toString())}moveTarget(){const t=e.TOP_TARGETS.indexOf(this.target);if(-1===t)return;const n=e.TOP_TARGETS.splice(t,1);e.TOP_TARGETS.push(...n)}isTopTarget(){if(!this.target)return!1;const t=e.TOP_TARGETS.indexOf(this.target);return!(-1===t||t<e.TOP_TARGETS.length-1)}}return e.TOP_TARGETS=[],e.Z_INDEX_START=400,e.Z_INDEX_INCREASE=1,e.\u0275fac=function(t){return new(t||e)(i.Yb(i.p),i.Yb(i.H))},e.\u0275dir=i.Tb({type:e,selectors:[["","bringToTop",""]],inputs:{bringToTop:"bringToTop"}}),e})()},DWMI:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("bwAN"),r=n("xPcM"),s=n("vLqR"),c=n("fXoL");let o=(()=>{class e extends s.a{constructor(){super(...arguments),this.length=0}get code(){return e.CODE}get hasSpecialInputs(){return!0}readStringParamFromForm(){return this.message}readIntegerParamsFromForm(){return[this.length]}onEditStart(e){this.message=e.stringData,this.length=e.intData.length>0?e.intData[0]:10,super.onEditStart(e)}validate(){return this.message.length>100?i.a.instance.localization.getValue("wiredfurni.chatmsgtoolong",!1):null}decreaseLength(){this.length-=1,this.length<e.LENGTH_MINIMUM_VALUE&&(this.length=e.LENGTH_MINIMUM_VALUE)}increaseLength(){this.length+=1,this.length>e.LENGTH_MAXIMUM_VALUE&&(this.length=e.LENGTH_MAXIMUM_VALUE)}get lengthSliderOptions(){return{floor:e.LENGTH_MINIMUM_VALUE,ceil:e.LENGTH_MAXIMUM_VALUE,step:e.LENGTH_STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return e.LENGTH_MINIMUM_VALUE=1,e.LENGTH_MAXIMUM_VALUE=10,e.LENGTH_STEPPER_VALUE=1,e.CODE=r.a.MUTE_USER,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:15,vars:12,consts:[[3,"delay","delayChange"],[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","length",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"],[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.dc(0,"nitro-wired-action-base-component",0),c.nc("delayChange",function(e){return t.delay=e}),c.dc(1,"p",1),c.Wc(2),c.rc(3,"translate"),c.cc(),c.dc(4,"div",2),c.dc(5,"button",3),c.nc("click",function(){return t.decreaseLength()}),c.Zb(6,"i",4),c.cc(),c.dc(7,"ngx-slider",5),c.nc("valueChange",function(e){return t.length=e}),c.cc(),c.dc(8,"button",3),c.nc("click",function(){return t.increaseLength()}),c.Zb(9,"i",6),c.cc(),c.cc(),c.dc(10,"div",7),c.dc(11,"label"),c.Wc(12),c.rc(13,"translate"),c.cc(),c.dc(14,"input",8),c.nc("ngModelChange",function(e){return t.message=e}),c.cc(),c.cc(),c.cc()),2&e&&(c.yc("delay",t.delay),c.Kb(2),c.Xc(c.uc(3,6,"wiredfurni.params.length.minutes","minutes",t.length)),c.Kb(5),c.yc("options",t.lengthSliderOptions)("value",t.length),c.Kb(5),c.Xc(c.sc(13,10,"wiredfurni.params.message")),c.Kb(2),c.yc("ngModel",t.message))},encapsulation:2}),e})();const a=c.fc(o)},DuWk:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("gKK4"),r=n("VFvI"),s=n("fXoL");let c=(()=>{class e extends i.a{get code(){return e.CODE}get negativeCode(){return e.NEGATIVE_CODE}readIntegerParamsFromForm(){const e=parseInt(this.effectId);return isNaN(e)?[]:[e]}onEditStart(e){this.effectId=e.stringData.length>0?e.stringData:"0"}get hasSpecialInputs(){return!0}}return e.CODE=r.a.ACTOR_IS_WEARING_EFFECT,e.NEGATIVE_CODE=r.a.NOT_ACTOR_WEARING_EFFECT,e.\u0275fac=function(t){return o(t||e)},e.\u0275cmp=s.Sb({type:e,selectors:[["ng-component"]],features:[s.Hb],decls:6,vars:4,consts:[[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(s.dc(0,"nitro-wired-base-component"),s.dc(1,"div",0),s.dc(2,"label"),s.Wc(3),s.rc(4,"translate"),s.cc(),s.dc(5,"input",1),s.nc("ngModelChange",function(e){return t.effectId=e}),s.cc(),s.cc(),s.cc()),2&e&&(s.Kb(3),s.Xc(s.sc(4,2,"wiredfurni.params.effectid")),s.Kb(2),s.yc("ngModel",t.effectId))},encapsulation:2}),e})();const o=s.fc(c)},"E6+/":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("wDsT"),r=n("7deb"),s=n("fXoL");function c(e,t){if(1&e){const e=s.ec();s.dc(0,"div",5),s.dc(1,"input",6),s.nc("ngModelChange",function(t){return s.Lc(e),s.qc().keyword=t}),s.cc(),s.cc()}if(2&e){const e=s.qc();s.Kb(1),s.yc("ngModel",e.keyword)}}let o=(()=>{class e extends i.a{constructor(){super(...arguments),this.keyword="",this.avatar="0"}get code(){return e.CODE}onEditStart(e){this.keyword=e.stringData||"",this.avatar=this.keyword.length>0?"1":"0"}readStringParamFromForm(){return"1"===this.avatar&&this.keyword.length>0?this.keyword:""}get hasSpecialInputs(){return!0}}return e.CODE=r.a.AVATAR_ENTERS_ROOM,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=s.Sb({type:e,selectors:[["ng-component"]],features:[s.Hb],decls:14,vars:12,consts:[[1,"form-check"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["class","form-group",4,"ngIf"],[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(s.dc(0,"nitro-wired-base-component"),s.Wc(1),s.rc(2,"translate"),s.dc(3,"div",0),s.dc(4,"input",1),s.nc("ngModelChange",function(e){return t.avatar=e}),s.cc(),s.dc(5,"label",2),s.Wc(6),s.rc(7,"translate"),s.cc(),s.cc(),s.dc(8,"div",0),s.dc(9,"input",3),s.nc("ngModelChange",function(e){return t.avatar=e}),s.cc(),s.dc(10,"label",2),s.Wc(11),s.rc(12,"translate"),s.cc(),s.cc(),s.Uc(13,c,2,1,"div",4),s.cc()),2&e&&(s.Kb(1),s.Yc(" ",s.sc(2,6,"wiredfurni.params.picktriggerer")," "),s.Kb(3),s.yc("ngModel",t.avatar),s.Kb(2),s.Xc(s.sc(7,8,"wiredfurni.params.anyavatar")),s.Kb(3),s.yc("ngModel",t.avatar),s.Kb(2),s.Xc(s.sc(12,10,"wiredfurni.params.certainavatar")),s.Kb(2),s.yc("ngIf","1"===t.avatar))},encapsulation:2}),e})();const a=s.fc(o)},EgWd:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("bwAN"),r=n("wDsT"),s=n("7deb"),c=n("fXoL");let o=(()=>{class e extends r.a{constructor(){super(...arguments),this.keyword="",this.avatar="0"}get code(){return e.CODE}onEditStart(e){this.keyword=e.stringData||"",this.avatar=e.intData.length>0&&1===e.intData[0]?"1":"0"}readIntegerParamsFromForm(){return["1"===this.avatar?1:0]}readStringParamFromForm(){return this.keyword}get hasSpecialInputs(){return!0}get username(){return i.a.instance.sessionDataManager.userName}}return e.CODE=s.a.AVATAR_SAYS_SOMETHING,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:17,vars:13,consts:[[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"form-check"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.dc(0,"nitro-wired-base-component"),c.dc(1,"div",0),c.dc(2,"label"),c.Wc(3),c.rc(4,"translate"),c.cc(),c.dc(5,"input",1),c.nc("ngModelChange",function(e){return t.keyword=e}),c.cc(),c.cc(),c.Wc(6),c.rc(7,"translate"),c.dc(8,"div",2),c.dc(9,"input",3),c.nc("ngModelChange",function(e){return t.avatar=e}),c.cc(),c.dc(10,"label",4),c.Wc(11),c.rc(12,"translate"),c.cc(),c.cc(),c.dc(13,"div",2),c.dc(14,"input",5),c.nc("ngModelChange",function(e){return t.avatar=e}),c.cc(),c.dc(15,"label",4),c.Wc(16),c.cc(),c.cc(),c.cc()),2&e&&(c.Kb(3),c.Xc(c.sc(4,7,"wiredfurni.params.whatissaid")),c.Kb(2),c.yc("ngModel",t.keyword),c.Kb(1),c.Yc(" ",c.sc(7,9,"wiredfurni.params.picktriggerer")," "),c.Kb(3),c.yc("ngModel",t.avatar),c.Kb(2),c.Xc(c.sc(12,11,"wiredfurni.params.anyavatar")),c.Kb(3),c.yc("ngModel",t.avatar),c.Kb(2),c.Xc(t.username))},encapsulation:2}),e})();const a=c.fc(o)},"G+4o":function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i=n("4L2r"),r=n("OF/F"),s=n("DnNh"),c=n("Oc0y"),o=n("ehET"),a=n("sTCW"),l=n("Y/pU"),d=n("gc2K"),u=n("bwAN"),h=n("+FnT"),g=n("fXoL"),m=n("WnqX");let f=(()=>{class e{constructor(e,t){this._settingsService=e,this._ngZone=t,this._messages=[],this._component=null,this._roomSession=null,this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomSessionManager.events.addEventListener(h.a.CREATED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(h.a.STARTED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.addEventListener(h.a.ENDED,this.onRoomSessionEvent),this._messages=[new r.a(this.onWiredFurniActionEvent.bind(this)),new s.a(this.onWiredFurniConditionEvent.bind(this)),new c.a(this.onWiredFurniTriggerEvent.bind(this)),new o.a(this.onWiredOpenEvent.bind(this)),new a.a(this.onWiredRewardResultMessageEvent.bind(this)),new l.a(this.onWiredSaveSuccessEvent.bind(this)),new d.a(this.onWiredValidationErrorEvent.bind(this)),new i.a(this.onDesktopViewEvent.bind(this))];for(const e of this._messages)u.a.instance.communication.registerMessageEvent(e)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{u.a.instance.roomSessionManager.events.removeEventListener(h.a.CREATED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(h.a.STARTED,this.onRoomSessionEvent),u.a.instance.roomSessionManager.events.removeEventListener(h.a.ENDED,this.onRoomSessionEvent);for(const e of this._messages)u.a.instance.communication.removeMessageEvent(e);this._messages=[]})}onRoomSessionEvent(e){if(e)switch(e.type){case h.a.CREATED:case h.a.STARTED:return void(this._roomSession=e.session);case h.a.ENDED:return this._roomSession=null,void this._ngZone.run(()=>this._component&&this._component.close())}}onWiredFurniActionEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>this._component.setupTrigger(t.definition))}onWiredFurniConditionEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>this._component.setupTrigger(t.definition))}onWiredFurniTriggerEvent(e){if(!e||!this._component)return;const t=e.getParser();t&&this._ngZone.run(()=>this._component.setupTrigger(t.definition))}onWiredOpenEvent(e){if(!e)return;const t=e.getParser();t&&console.log(t)}onWiredRewardResultMessageEvent(e){if(!e)return;const t=e.getParser();t&&console.log(t)}onWiredSaveSuccessEvent(e){e&&e.getParser()&&this._ngZone.run(()=>this._component&&this._component.close())}onWiredValidationErrorEvent(e){if(!e)return;const t=e.getParser();t&&console.log(t)}onDesktopViewEvent(e){e&&this._ngZone.run(()=>this._component&&this._component.close())}selectFurniture(e,t){const n=u.a.instance.roomEngine,i=n.getSelectedRoomObjectData(this.roomId);i&&i.id===-e?n.setPlacedRoomObjectData(this.roomId,null):this._component&&this._component.toggleFurniSelected(e,t)}get component(){return this._component}set component(e){this._component=e}get roomId(){return this._roomSession?this._roomSession.roomId:0}}return e.\u0275fac=function(t){return new(t||e)(g.kc(m.a),g.kc(g.H))},e.\u0275prov=g.Ub({token:e,factory:e.\u0275fac}),e})()},GJ6n:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("xPcM"),r=n("vLqR"),s=n("fXoL");let c=(()=>{class e extends r.a{constructor(){super(...arguments),this.points=1,this.times=1}get code(){return e.CODE}onEditStart(e){this.points=e.intData.length>0?e.intData[0]:1,this.times=e.intData.length>1?e.intData[1]:1,super.onEditStart(e)}readIntegerParamsFromForm(){return[this.points,this.times]}get hasSpecialInputs(){return!0}decreasePoints(){this.points-=1,this.points<e.MINIMUM_VALUE&&(this.points=e.MINIMUM_VALUE)}increasePoints(){this.points+=1,this.points>e.POINTS_MAXIMUM_VALUE&&(this.points=e.POINTS_MAXIMUM_VALUE)}decreaseTimes(){this.times-=1,this.times<e.MINIMUM_VALUE&&(this.times=e.MINIMUM_VALUE)}increaseTimes(){this.times+=1,this.times>e.TIMES_MAXIMUM_VALUE&&(this.times=e.TIMES_MAXIMUM_VALUE)}get pointsSliderOptions(){return{floor:e.MINIMUM_VALUE,ceil:e.POINTS_MAXIMUM_VALUE,step:e.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}get timesSliderOptions(){return{floor:e.MINIMUM_VALUE,ceil:e.TIMES_MAXIMUM_VALUE,step:e.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return e.MINIMUM_VALUE=1,e.STEPPER_VALUE=1,e.POINTS_MAXIMUM_VALUE=100,e.TIMES_MAXIMUM_VALUE=10,e.CODE=i.a.GIVE_SCORE,e.\u0275fac=function(t){return o(t||e)},e.\u0275cmp=s.Sb({type:e,selectors:[["ng-component"]],features:[s.Hb],decls:19,vars:15,consts:[[3,"delay","delayChange"],[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","points",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"],["name","times",3,"options","value","valueChange"]],template:function(e,t){1&e&&(s.dc(0,"nitro-wired-action-base-component",0),s.nc("delayChange",function(e){return t.delay=e}),s.dc(1,"p",1),s.Wc(2),s.rc(3,"translate"),s.cc(),s.dc(4,"div",2),s.dc(5,"button",3),s.nc("click",function(){return t.decreasePoints()}),s.Zb(6,"i",4),s.cc(),s.dc(7,"ngx-slider",5),s.nc("valueChange",function(e){return t.points=e}),s.cc(),s.dc(8,"button",3),s.nc("click",function(){return t.increasePoints()}),s.Zb(9,"i",6),s.cc(),s.cc(),s.dc(10,"p",1),s.Wc(11),s.rc(12,"translate"),s.cc(),s.dc(13,"div",2),s.dc(14,"button",3),s.nc("click",function(){return t.decreaseTimes()}),s.Zb(15,"i",4),s.cc(),s.dc(16,"ngx-slider",7),s.nc("valueChange",function(e){return t.times=e}),s.cc(),s.dc(17,"button",3),s.nc("click",function(){return t.increaseTimes()}),s.Zb(18,"i",6),s.cc(),s.cc(),s.cc()),2&e&&(s.yc("delay",t.delay),s.Kb(2),s.Xc(s.uc(3,7,"wiredfurni.params.setpoints","points",t.points)),s.Kb(5),s.yc("options",t.pointsSliderOptions)("value",t.points),s.Kb(4),s.Xc(s.uc(12,11,"wiredfurni.params.settimesingame","times",t.times)),s.Kb(5),s.yc("options",t.timesSliderOptions)("value",t.times))},encapsulation:2}),e})();const o=s.fc(c)},GP5J:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("gKK4"),r=n("VFvI"),s=n("fXoL");let c=(()=>{class e extends i.a{get code(){return e.CODE}test(){return e.CODE}readIntegerParamsFromForm(){const e=[],t=new Date(this.startDate).getTime();if(!isNaN(t)){e.push(t/1e3);const n=new Date(this.endDate).getTime();isNaN(n)||e.push(n/1e3)}return e}onEditStart(e){let t,n;t=e.intData.length>0?new Date(1e3*e.intData[0]):new Date(0),n=e.intData.length>1?new Date(1e3*e.intData[1]):new Date(0),this.startDate=this.dateToString(t),this.endDate=this.dateToString(n)}get hasSpecialInputs(){return!0}dateToString(e){return`${e.getFullYear()}/${("0"+(e.getMonth()+1)).slice(-2)}/${("0"+e.getDate()).slice(-2)} ${("0"+e.getHours()).slice(-2)}:${("0"+e.getMinutes()).slice(-2)}`}}return e.CODE=r.a.DATE_RANGE_ACTIVE,e.\u0275fac=function(t){return o(t||e)},e.\u0275cmp=s.Sb({type:e,selectors:[["ng-component"]],features:[s.Hb],decls:11,vars:8,consts:[[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(s.dc(0,"nitro-wired-base-component"),s.dc(1,"div",0),s.dc(2,"label"),s.Wc(3),s.rc(4,"translate"),s.cc(),s.dc(5,"input",1),s.nc("ngModelChange",function(e){return t.startDate=e}),s.cc(),s.cc(),s.dc(6,"div",0),s.dc(7,"label"),s.Wc(8),s.rc(9,"translate"),s.cc(),s.dc(10,"input",1),s.nc("ngModelChange",function(e){return t.endDate=e}),s.cc(),s.cc(),s.cc()),2&e&&(s.Kb(3),s.Xc(s.sc(4,4,"wiredfurni.params.startdate")),s.Kb(2),s.yc("ngModel",t.startDate),s.Kb(3),s.Xc(s.sc(9,6,"wiredfurni.params.enddate")),s.Kb(2),s.yc("ngModel",t.endDate))},encapsulation:2}),e})();const o=s.fc(c)},GeE8:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("xPcM"),s=n("vLqR"),c=n("fXoL");let o=(()=>{class e extends s.a{get code(){return e.CODE}get requiresFurni(){return i.a._Str_5430}}return e.CODE=r.a.CALL_ANOTHER_STACK,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(e,t){1&e&&(c.dc(0,"nitro-wired-action-base-component",0),c.nc("delayChange",function(e){return t.delay=e}),c.cc()),2&e&&c.yc("delay",t.delay)},encapsulation:2}),e})();const a=c.fc(o)},HZCd:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("xPcM"),s=n("vLqR"),c=n("fXoL");let o=(()=>{class e extends s.a{get code(){return e.CODE}get requiresFurni(){return i.a._Str_5430}}return e.CODE=r.a.TELEPORT,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(e,t){1&e&&(c.dc(0,"nitro-wired-action-base-component",0),c.nc("delayChange",function(e){return t.delay=e}),c.cc()),2&e&&c.yc("delay",t.delay)},encapsulation:2}),e})();const a=c.fc(o)},IURz:function(e,t,n){"use strict";n.d(t,"a",function(){return dd});var i=n("R0Ic"),r=n("bwAN"),s=n("VQvF"),c=n("mcg1"),o=n("saAv"),a=n("WS8Q"),l=n("APLN"),d=n("46lc"),u=n("Va1h"),h=n("vheO"),g=n("giPl"),m=n("GeHn"),f=n("X5LB"),p=n("tsQm"),_=n("T5Il"),b=n("+FnT"),v=n("KDD3"),E=n("dWLn"),S=n("0k8q"),y=n("tbVI"),I=n("VzAs"),w=n("h/cJ"),C=n("fXoL"),R=n("XzEk"),T=n("eZlu"),O=n("2Fqd"),M=n("ssUo"),U=n("Dkuz"),x=n("IdQr"),A=n("7oGv"),D=n("YqpA"),L=n("bt9U"),k=n("vrFQ"),P=n("b/x2"),N=n("0ldw"),W=n("+p94"),K=n("6QLa"),F=n("IqKQ"),V=n("mgdJ"),q=n("Vg+W");let H=(()=>{class e extends q.a{constructor(e,t){super(e),this._roomId=0,this._roomId=t}get roomId(){return this._roomId}}return e.RWREUE_GAME_MODE="RWREUE_GAME_MODE",e.RWREUE_NORMAL_MODE="RWREUE_NORMAL_MODE",e})(),B=(()=>{class e extends q.a{constructor(e,t,n,i){super(e),this._id=t,this._category=n,this._roomId=i}get id(){return this._id}get category(){return this._category}get roomId(){return this._roomId}}return e.OBJECT_SELECTED="RWROUE_OBJECT_SELECTED",e.OBJECT_DESELECTED="RWROUE_OBJECT_DESELECTED",e.USER_REMOVED="RWROUE_USER_REMOVED",e.FURNI_REMOVED="RWROUE_FURNI_REMOVED",e.FURNI_ADDED="RWROUE_FURNI_ADDED",e.USER_ADDED="RWROUE_USER_ADDED",e.OBJECT_ROLL_OVER="RWROUE_OBJECT_ROLL_OVER",e.OBJECT_ROLL_OUT="RWROUE_OBJECT_ROLL_OUT",e})(),G=(()=>{class e extends q.a{constructor(e,t=null,n=null,i=0){super(e),this._roomViewRectangle=t,this._positionDelta=n,this._scale=i}get roomViewRectangle(){return this._roomViewRectangle?this._roomViewRectangle.clone():null}get positionDelta(){return this._positionDelta?this._positionDelta.clone():null}get scale(){return this._scale}}return e.SIZE_CHANGED="RWRVUE_ROOM_VIEW_SIZE_CHANGED",e.SCALE_CHANGED="RWRVUE_ROOM_VIEW_SCALE_CHANGED",e.POSITION_CHANGED="RWRVUE_ROOM_VIEW_POSITION_CHANGED",e})();var Z=n("6lro"),X=n("xHiM"),j=n("S0aK");let Y=(()=>{class e extends q.a{constructor(t,n,i,r,s){super(e.RWAIE_AVATAR_INFO),this._userId=t,this._userName=n,this._Str_3021=i,this._Str_2775=r,this._Str_3947=s}get userId(){return this._userId}get userName(){return this._userName}get _Str_2908(){return this._Str_3021}get _Str_2707(){return this._Str_2775}get _Str_4330(){return this._Str_3947}}return e.RWAIE_AVATAR_INFO="RWAIE_AVATAR_INFO",e})(),z=(()=>{class e extends q.a{constructor(){super(e.RWUDUE_USER_DATA_UPDATED)}}return e.RWUDUE_USER_DATA_UPDATED="rwudue_user_data_updated",e})();var $=n("jQQ2");let Q=(()=>{class e extends $.a{constructor(t){super(e.RWCM_MESSAGE_AVATAR_EXPRESSION),this._animation=t}get animation(){return this._animation}}return e.RWCM_MESSAGE_AVATAR_EXPRESSION="RWCM_MESSAGE_AVATAR_EXPRESSION",e})(),J=(()=>{class e extends $.a{constructor(t){super(e.RWCPM_MESSAGE_CHANGE_POSTURE),this._posture=t}get posture(){return this._posture}}return e.RWCPM_MESSAGE_CHANGE_POSTURE="RWCPM_MESSAGE_CHANGE_POSTURE",e._Str_1553=0,e._Str_2016=1,e})(),ee=(()=>{class e extends $.a{constructor(t){super(e.RWCM_MESSAGE_DANCE),this._style=0,this._style=t}get style(){return this._style}}return e.RWCM_MESSAGE_DANCE="RWCM_MESSAGE_DANCE",e._Str_13814=0,e._Str_17699=[2,3,4],e})(),te=(()=>{class e extends $.a{constructor(e,t,n){super(e),this._id=t,this._category=n}get id(){return this._id}get category(){return this._category}}return e.GET_OBJECT_INFO="RWROM_GET_OBJECT_INFO",e.GET_OBJECT_NAME="RWROM_GET_OBJECT_NAME",e.SELECT_OBJECT="RWROM_SELECT_OBJECT",e.GET_OWN_CHARACTER_INFO="RWROM_GET_OWN_CHARACTER_INFO",e.GET_AVATAR_LIST="RWROM_GET_AVATAR_LIST",e})(),ne=(()=>{class e extends $.a{constructor(e,t=0){super(e),this._userId=t}get userId(){return this._userId}}return e.RWUAM_WHISPER_USER="RWUAM_WHISPER_USER",e.RWUAM_IGNORE_USER="RWUAM_IGNORE_USER",e.RWUAM_IGNORE_USER_BUBBLE="RWUAM_IGNORE_USER_BUBBLE",e.RWUAM_UNIGNORE_USER="RWUAM_UNIGNORE_USER",e.RWUAM_KICK_USER="RWUAM_KICK_USER",e.RWUAM_BAN_USER_HOUR="RWUAM_BAN_USER_HOUR",e.RWUAM_BAN_USER_DAY="RWUAM_BAN_USER_DAY",e.RWUAM_BAN_USER_PERM="RWUAM_BAN_USER_PERM",e.MUTE_USER_2MIN="RWUAM_MUTE_USER_2MIN",e.MUTE_USER_5MIN="RWUAM_MUTE_USER_5MIN",e.MUTE_USER_10MIN="RWUAM_MUTE_USER_10MIN",e.RWUAM_SEND_FRIEND_REQUEST="RWUAM_SEND_FRIEND_REQUEST",e.RWUAM_RESPECT_USER="RWUAM_RESPECT_USER",e.RWUAM_GIVE_RIGHTS="RWUAM_GIVE_RIGHTS",e.RWUAM_TAKE_RIGHTS="RWUAM_TAKE_RIGHTS",e.RWUAM_START_TRADING="RWUAM_START_TRADING",e.RWUAM_OPEN_HOME_PAGE="RWUAM_OPEN_HOME_PAGE",e.RWUAM_REPORT="RWUAM_REPORT",e.RWUAM_PICKUP_PET="RWUAM_PICKUP_PET",e.RWUAM_MOUNT_PET="RWUAM_MOUNT_PET",e.RWUAM_TOGGLE_PET_RIDING_PERMISSION="RWUAM_TOGGLE_PET_RIDING_PERMISSION",e.RWUAM_TOGGLE_PET_BREEDING_PERMISSION="RWUAM_TOGGLE_PET_BREEDING_PERMISSION",e.RWUAM_DISMOUNT_PET="RWUAM_DISMOUNT_PET",e.RWUAM_SADDLE_OFF="RWUAM_SADDLE_OFF",e.RWUAM_TRAIN_PET="RWUAM_TRAIN_PET",e.RWUAM_RESPECT_PET=" RWUAM_RESPECT_PET",e.RWUAM_TREAT_PET="RWUAM_TREAT_PET",e.RWUAM_REQUEST_PET_UPDATE="RWUAM_REQUEST_PET_UPDATE",e.RWUAM_START_NAME_CHANGE="RWUAM_START_NAME_CHANGE",e.RWUAM_PASS_CARRY_ITEM="RWUAM_PASS_CARRY_ITEM",e.RWUAM_DROP_CARRY_ITEM="RWUAM_DROP_CARRY_ITEM",e.RWUAM_GIVE_CARRY_ITEM_TO_PET="RWUAM_GIVE_CARRY_ITEM_TO_PET",e.RWUAM_GIVE_WATER_TO_PET="RWUAM_GIVE_WATER_TO_PET",e.RWUAM_GIVE_LIGHT_TO_PET="RWUAM_GIVE_LIGHT_TO_PET",e.RWUAM_REQUEST_BREED_PET="RWUAM_REQUEST_BREED_PET",e.RWUAM_HARVEST_PET="RWUAM_HARVEST_PET",e.RWUAM_REVIVE_PET="RWUAM_REVIVE_PET",e.RWUAM_COMPOST_PLANT="RWUAM_COMPOST_PLANT",e.RWUAM_GET_BOT_INFO="RWUAM_GET_BOT_INFO",e.RWUAM_REPORT_CFH_OTHER="RWUAM_REPORT_CFH_OTHER",e.RWUAM_AMBASSADOR_ALERT_USER="RWUAM_AMBASSADOR_ALERT_USER",e.RWUAM_AMBASSADOR_KICK_USER="RWUAM_AMBASSADOR_KICK_USER",e.AMBASSADOR_MUTE_USER_2MIN="RWUAM_AMBASSADOR_MUTE_2MIN",e.AMBASSADOR_MUTE_USER_10MIN="RWUAM_AMBASSADOR_MUTE_10MIN",e.AMBASSADOR_MUTE_USER_60MIN="RWUAM_AMBASSADOR_MUTE_60MIN",e.AMBASSADOR_MUTE_USER_18HOUR="RWUAM_AMBASSADOR_MUTE_18HOUR",e})();class ie{constructor(){this._container=null,this._container=null,this._widget=null,this._disposed=!1,this.onUserNameUpdateEvent=this.onUserNameUpdateEvent.bind(this),this.onNitroToolbarEvent=this.onNitroToolbarEvent.bind(this)}dispose(){this.disposed||(this.container=null,this._widget=null,this._disposed=!0)}update(){}processWidgetMessage(e){if(!e)return null;switch(e.type){case te.GET_OWN_CHARACTER_INFO:this.getOwnCharacterInfo();break;case ne.RWUAM_REQUEST_PET_UPDATE:this._widget.handlePetInfo=!1;break;case ee.RWCM_MESSAGE_DANCE:{const t=e;this._container&&this._container.roomSession&&this._container.roomSession.sendDanceMessage(t.style);break}case Q.RWCM_MESSAGE_AVATAR_EXPRESSION:{const t=e;this._container&&this._container.roomSession&&this._container.roomSession.sendExpressionMessage(t.animation._Str_6677);break}case J.RWCPM_MESSAGE_CHANGE_POSTURE:{const t=e;this._container&&this._container.roomSession&&this._container.roomSession.sendPostureMessage(t.posture);break}}return null}processEvent(e){if(e)switch(e.type){case X.a.USER_DATA_UPDATED:return void this._container.events.dispatchEvent(new z);case m.a.RSDE_DANCE:{const t=e;if(this._widget&&this._container&&this._container.roomSession&&this._container.roomSession.userDataManager){const e=this._container.roomSession.userDataManager.getUserData(this._container.sessionDataManager.userId);e&&e.roomIndex===t.roomIndex&&(this.widget.isDancing=0!==t.danceId)}return}}}getOwnCharacterInfo(){const e=this._container.sessionDataManager.userId,t=this._container.sessionDataManager.userName,n=this._container.roomSession.userDataManager.getUserData(e);n&&this._container.events.dispatchEvent(new Y(e,t,n.type,n.roomIndex,!1))}getObjectFurnitureData(e){if(!e)return null;const t=e.model.getValue(A.a.FURNITURE_TYPE_ID);return this._container.sessionDataManager.getFloorItemData(t)}getPetUserData(e){const t=this._container.roomSession.roomId,n=this._container.roomEngine.getTotalObjectsForManager(t,M.a.UNIT);let i=0;for(;i<n;){const n=this._container.roomEngine.getRoomObjectByIndex(t,i,M.a.UNIT),r=this._container.roomSession.userDataManager.getUserDataByIndex(n.id);if(r&&r.type===x.a.PET&&r.webID===e)return r;i++}return null}onUserNameUpdateEvent(e){this.widget.close()}onNitroToolbarEvent(e){switch(e.type){case Z.a.SELECT_OWN_AVATAR:return void this.getOwnCharacterInfo()}}get type(){return y.a.AVATAR_INFO}get messageTypes(){return[te.GET_OWN_CHARACTER_INFO,ee.RWCM_MESSAGE_DANCE,Q.RWCM_MESSAGE_AVATAR_EXPRESSION,J.RWCPM_MESSAGE_CHANGE_POSTURE,ne.RWUAM_REQUEST_PET_UPDATE]}get eventTypes(){return[X.a.USER_DATA_UPDATED,m.a.RSDE_DANCE]}get container(){return this._container}set container(e){this._container&&this._container.sessionDataManager&&this._container.sessionDataManager.events&&(this._container.sessionDataManager.events.removeEventListener(j.a.UNUE_NAME_UPDATED,this.onUserNameUpdateEvent),this._container.roomEngine.events.removeEventListener(Z.a.SELECT_OWN_AVATAR,this.onNitroToolbarEvent)),this._container=e,e&&this._container.sessionDataManager&&this._container.sessionDataManager.events&&(this._container.sessionDataManager.events.addEventListener(j.a.UNUE_NAME_UPDATED,this.onUserNameUpdateEvent),this._container.roomEngine.events.addEventListener(Z.a.SELECT_OWN_AVATAR,this.onNitroToolbarEvent))}get widget(){return this._widget}set widget(e){this._widget=e}get roomEngine(){return this._container&&this._container.roomEngine||null}get roomSession(){return this._container&&this._container.roomSession||null}get disposed(){return this._disposed}}var re=n("VZSW"),se=n("Sxtm"),ce=n("YSCX");let oe=(()=>{class e extends q.a{constructor(t){super(e.RWFCE_FLOOD_CONTROL),this._seconds=0,this._seconds=t}get seconds(){return this._seconds}}return e.RWFCE_FLOOD_CONTROL="RWFCE_FLOOD_CONTROL",e})(),ae=(()=>{class e extends $.a{constructor(e,t,n,i,r){super(e),this._text=t,this._chatType=n,this._recipientName=i,this._styleId=r}get text(){return this._text}get chatType(){return this._chatType}get recipientName(){return this._recipientName}get styleId(){return this._styleId}}return e.MESSAGE_CHAT="RWCM_MESSAGE_CHAT",e.CHAT_DEFAULT=0,e.CHAT_WHISPER=1,e.CHAT_SHOUT=2,e})(),le=(()=>{class e extends $.a{constructor(e,t,n,i){super(e),this._objectId=t,this._userName=n,this._roomId=i}get objectId(){return this._objectId}get userName(){return this._userName}get roomId(){return this._roomId}}return e.MESSAGE_SELECT_AVATAR="RWCSAM_MESSAGE_SELECT_AVATAR",e})(),de=(()=>{class e extends $.a{constructor(t){super(e.TYPING_STATUS),this._isTyping=t}get isTyping(){return this._isTyping}}return e.TYPING_STATUS="RWCTM_TYPING_STATUS",e})(),ue=(()=>{class e extends $.a{constructor(e){super(e)}}return e.RWRWM_USER_CHOOSER="RWRWM_USER_CHOOSER",e.RWRWM_FURNI_CHOOSER="RWRWM_FURNI_CHOOSER",e.RWRWM_ME_MENU="RWRWM_ME_MENU",e.RWRWM_EFFECTS="RWRWM_EFFECTS",e})();class he{constructor(){this._container=null,this._widget=null,this._disposed=!1}dispose(){this._disposed||(this._container=null,this._widget=null,this._disposed=!0)}update(){}processWidgetMessage(e){if(!e||this.disposed)return null;let t=null;switch(e.type){case de.TYPING_STATUS:this._container.roomSession.sendChatTypingMessage(e.isTyping);break;case ae.MESSAGE_CHAT:{const t=e;if(""===t.text)return null;let n=t.text;const i=t.text.split(" ");if(i.length>0){const e=i[0];let s="";if(i.length>1&&(s=i[1]),":"===e.charAt(0)&&"x"===s){const e=this._container.roomEngine.selectedAvatarId;if(e>-1){const i=this._container.roomSession.userDataManager.getUserDataByIndex(e);i&&(s=i.name,n=t.text.replace(" x"," "+i.name))}}switch(e.toLowerCase()){case":d":case";d":this._container.sessionDataManager.clubLevel===se.a._Str_2575&&this._container.roomSession.sendExpressionMessage(ce.a._Str_7336._Str_6677);break;case"o/":case"_o/":return this._container.roomSession.sendExpressionMessage(ce.a._Str_6268._Str_6677),null;case":kiss":if(this._container.sessionDataManager.clubLevel==se.a._Str_2575)return this._container.roomSession.sendExpressionMessage(ce.a._Str_5579._Str_6677),null;break;case":jump":if(this._container.sessionDataManager.clubLevel==se.a._Str_2575)return this._container.roomSession.sendExpressionMessage(ce.a._Str_16682._Str_6677),null;break;case":idle":return this._container.roomSession.sendExpressionMessage(ce.a._Str_6989._Str_6677),null;case"_b":return this._container.roomSession.sendExpressionMessage(ce.a._Str_6325._Str_6677),null;case":sign":return this._container.roomSession.sendSignMessage(parseInt(s)),null;case":iddqd":return this._container.roomEngine.events.dispatchEvent(new h.a(this._container.roomEngine.activeRoomId,-1,!0)),null;case":zoom":return this._container.roomEngine.events.dispatchEvent(new h.a(this._container.roomEngine.activeRoomId,parseInt(s),!1)),null;case":screenshot":return this._container.roomEngine.createRoomScreenshot(this._container.roomSession.roomId,this._container.getFirstCanvasId()),null;case":pickall":return this._container.notificationService.alertWithConfirm("${room.confirm.pick_all}","${generic.alert.title}",()=>{this._container.sessionDataManager.sendSpecialCommandMessage(":pickall")}),null;case":furni":return this._container.processWidgetMessage(new ue(ue.RWRWM_FURNI_CHOOSER)),null;case":chooser":return this._container.processWidgetMessage(new ue(ue.RWRWM_USER_CHOOSER)),null;case":floor":case":bcfloor":return this._container.roomSession.controllerLevel>=L.a.ROOM_OWNER&&(this._container.settingsService.floorPlanVisible=!0),null;case":client":case":nitro":case":billsonnn":return this._container.notificationService.alertWithScrollableMessages(['<div class="d-flex flex-column justify-content-center align-items-center"><div class="nitro-info-box"></div><b>Version: '+r.a.RELEASE_VERSION+'</b><br />This client is powered by Nitro HTML5<br /><br /><div class="d-flex"><a class="btn btn-primary" href="https://discord.gg/66UR68FPgy" target="_blank">Discord</a><a class="btn btn-primary" href="https://git.krews.org/nitro" target="_blank">Git</a></div><br /></div>'],"Nitro HTML5"),null;case":settings":return(this._container.roomSession.isRoomOwner||this._container.sessionDataManager.isModerator)&&r.a.instance.communication.connection.send(new re.a(this._container.roomSession.roomId)),null}}const s=t.styleId;if(this._container&&this._container.roomSession)switch(t.chatType){case ae.CHAT_DEFAULT:this._container.roomSession.sendChatMessage(n,s);break;case ae.CHAT_SHOUT:this._container.roomSession.sendShoutMessage(n,s);break;case ae.CHAT_WHISPER:this._container.roomSession.sendWhisperMessage(t.recipientName,n,s)}break}case le.MESSAGE_SELECT_AVATAR:t=e}return null}processEvent(e){if(e&&!this._disposed)switch(e.type){case g.a.FLOOD_EVENT:{const t=parseInt(e.message);return void this._container.events.dispatchEvent(new oe(t))}}}get type(){return y.a.CHAT_INPUT_WIDGET}get messageTypes(){return[de.TYPING_STATUS,ae.MESSAGE_CHAT,le.MESSAGE_SELECT_AVATAR]}get eventTypes(){return[g.a.FLOOD_EVENT]}get container(){return this._container}set container(e){this._container=e}get widget(){return this._widget}set widget(e){this._widget=e}get disposed(){return this._disposed}}var ge=n("ag9T"),me=n("MFnH"),fe=n("rQ5G"),pe=n("B8O3"),_e=n("PiXM"),be=n("aMkD"),ve=n("8c0Z");let Ee=(()=>{class e extends q.a{constructor(e,t,n,i,r,s,c,o,a,l,d,u,h=0,g=0,m=null){super(e),this._userId=t,this._text=n,this._chatType=h,this._userName=i,this._userCategory=r,this._userType=s,this._petType=c,this._links=m,this._userX=o,this._userY=a,this._userImage=l,this._userColor=d,this._roomId=u,this._styleId=g}get userId(){return this._userId}get text(){return this._text}get chatType(){return this._chatType}get userName(){return this._userName}get userCategory(){return this._userCategory}get userType(){return this._userType}get petType(){return this._petType}get links(){return this._links}get userX(){return this._userX}get userY(){return this._userY}get userImage(){return this._userImage}get userColor(){return this._userColor}get roomId(){return this._roomId}get styleId(){return this._styleId}}return e.RWCUE_EVENT_CHAT="RWCUE_EVENT_CHAT",e.CHAT_TYPE_SPEAK=0,e.CHAT_TYPE_WHISPER=1,e.CHAT_TYPE_SHOUT=2,e.CHAT_TYPE_RESPECT=3,e.CHAT_TYPE_PETRESPECT=4,e.CHAT_TYPE_NOTIFY=5,e.CHAT_TYPE_PETTREAT=6,e.CHAT_TYPE_PETREVIVE=7,e.CHAT_TYPE_PET_REBREED_FERTILIZE=8,e.CHAT_TYPE_PET_SPEED_FERTILIZE=9,e.CHAT_TYPE_BOT_SPEAK=10,e.CHAT_TYPE_BOT_SHOUT=11,e.CHAT_TYPE_BOT_WHISPER=12,e})();class Se{constructor(e){this._chatHistoryService=e,this._container=null,this._widget=null,this._connection=null,this._avatarColorCache=new Map,this._avatarImageCache=new Map,this._petImageCache=new Map,this._primaryCanvasScale=0,this._primaryCanvasOriginPos=null,this._tempScreenPosVector=new K.a,this._disposed=!1}dispose(){this._disposed||(this._container=null,this._widget=null,this._disposed=!0)}update(){this._Str_20006()}_Str_20006(){if(!(this._container&&this._container.roomSession&&this._container.roomEngine&&this._container.events))return;const e=this._container.getFirstCanvasId(),t=this._container.roomSession.roomId,n=this._container.roomEngine.getRoomInstanceRenderingCanvas(t,e);if(!n)return;const i=n.geometry;if(!i)return;let r=1;this._primaryCanvasScale>0&&(r=i.scale/this._primaryCanvasScale),this._primaryCanvasOriginPos||(this._tempScreenPosVector.x=0,this._tempScreenPosVector.y=0,this._tempScreenPosVector.z=0,this._primaryCanvasOriginPos=i.getScreenPoint(this._tempScreenPosVector),this._primaryCanvasScale=i.scale-10);let s="",c=null;this._tempScreenPosVector.x=0,this._tempScreenPosVector.y=0,this._tempScreenPosVector.z=0;const o=i.getScreenPoint(this._tempScreenPosVector);if(o){const n=this._container.roomEngine.getRoomInstanceRenderingCanvasOffset(t,e);if(n&&o.set(o.x+n.x,o.y+n.y),o.x!=this._primaryCanvasOriginPos.x||o.y!=this._primaryCanvasOriginPos.y){const e=be.a._Str_15193(o,be.a._Str_6038(this._primaryCanvasOriginPos,r));0==e.x&&0==e.y||(s=G.POSITION_CHANGED,c=new G(s,null,e),this._container.events.dispatchEvent(c)),this._primaryCanvasOriginPos=o}}i.scale!==this._primaryCanvasScale&&(s=G.SCALE_CHANGED,c=new G(s,null,null,i.scale),this._container.events.dispatchEvent(c),this._primaryCanvasScale=i.scale)}getBubbleLocation(e,t){const n=this._container.roomEngine.getRoomInstanceGeometry(e,this._container.getFirstCanvasId()),i=this._container.roomEngine.getRoomInstanceRenderingCanvasScale(e,this._container.getFirstCanvasId());let r=document.body.offsetWidth*i/2,s=document.body.offsetHeight*i/2;if(n&&t){const c=n.getScreenPoint(t);if(c){r+=c.x*i,s+=c.y*i;const t=this._container.roomEngine.getRoomInstanceRenderingCanvasOffset(e,this._container.getFirstCanvasId());t&&(r+=t.x,s+=t.y)}}return new F.Point(r,s)}processWidgetMessage(e){return null}processEvent(e){if(e&&!this._disposed)switch(e.type){case g.a.CHAT_EVENT:{const t=e,n=this._container.roomEngine.getRoomObject(t.session.roomId,t.objectId,M.a.UNIT);if(n&&this._container.roomEngine.getRoomInstanceGeometry(t.session.roomId,this._container.getFirstCanvasId())){this._Str_20006();const e=n.getLocation(),i=this.getBubbleLocation(t.session.roomId,e),s=this._container.roomSession.userDataManager.getUserDataByIndex(t.objectId);let c="",o=0,a=null;const l=t.chatType;let d=t.style,u=0,h=-1;if(s){u=s.type;const e=s.figure;switch(u){case x.a.PET:a=this.getPetImage(e,2,!0,64,n.model.getValue(A.a.FIGURE_POSTURE)),h=new pe.a(e).typeId;break;case x.a.USER:a=this.getUserImage(e);break;case x.a.RENTABLE_BOT:case x.a.BOT:d=_e.a.BOT}o=this._avatarColorCache.get(e),c=s.name}let m=t.message;switch(l){case g.a._Str_5821:m=r.a.instance.getLocalizationWithParameter("widgets.chatbubble.respect","username",c);break;case g.a._Str_6081:m=r.a.instance.getLocalizationWithParameter("widget.chatbubble.petrespect","petname",c);break;case g.a._Str_5958:m=r.a.instance.getLocalizationWithParameter("widget.chatbubble.pettreat","petname",c);break;case g.a._Str_8971:m=r.a.instance.getLocalizationWithParameters("widget.chatbubble.handitem",["username","handitem"],[c,r.a.instance.getLocalization("handitem"+t.extraParam)]);break;case g.a._Str_8909:{const e=(t.extraParam>0?Math.floor(t.extraParam/3600):0).toString(),n=(t.extraParam>0?Math.floor(t.extraParam%3600/60):0).toString(),i=(t.extraParam%60).toString();m=r.a.instance.getLocalizationWithParameters("widget.chatbubble.mutetime",["hours","minutes","seconds"],[e,n,i]);break}}const f=new ve.a;f.senderId=t.objectId,f.senderName=s.name+":",f.senderColor=o,a&&a.src&&(f.senderImageUrl=a.src),f.content=m,f.chatType=l,f.chatStyle=d,this._chatHistoryService.addItem(t.session.roomId,f),this._container&&this._container.events&&this._container.events.dispatchEvent(new Ee(Ee.RWCUE_EVENT_CHAT,s.roomIndex,m,c,M.a.UNIT,u,h,i.x,i.y,a,o,t.session.roomId,l,d,[]))}return}}}getUserImage(e){let t=this._avatarImageCache.get(e);return t||(t=this.setFigureImage(e)),t}setFigureImage(e){const t=this._container.avatarRenderManager.createAvatarImage(e,me.a.LARGE,null,this);if(!t)return;const n=t.getCroppedImage(fe.a.HEAD),i=t.getPartColor(ge.a.CHEST);return this._avatarColorCache.set(e,i&&i._Str_915||16777215),t.dispose(),this._avatarImageCache.set(e,n),n}getPetImage(e,t,n,i=64,s=null){let c=this._petImageCache.get(e+s);if(c)return c;const o=new pe.a(e),a=this._container.roomEngine.getRoomObjectPetImage(o.typeId,o.paletteId,o.color,new K.a(45*t),i,null,!1,0,o.customParts,s);return a&&(c=r.a.instance.renderer.extract.image(a.data),this._petImageCache.set(e+s,c)),c}resetFigure(e){this.setFigureImage(e)}get type(){return y.a.CHAT_WIDGET}get messageTypes(){return[]}get eventTypes(){return[g.a.CHAT_EVENT]}get container(){return this._container}set container(e){this._container=e}get widget(){return this._widget}set widget(e){this._widget=e}get connection(){return this._connection}set connection(e){this._connection=e}get disposed(){return this._disposed}}let ye=(()=>{class e extends q.a{constructor(e,t){super(e),this._userName="",this._userName=t}get userName(){return this._userName}}return e.RWDE_RINGING="RWDE_RINGING",e.REJECTED="RWDE_REJECTED",e.RWDE_ACCEPTED="RWDE_ACCEPTED",e})(),Ie=(()=>{class e extends $.a{constructor(t,n){super(e.RWLUIM_LET_USER_IN),this._userName=t,this._canEnter=n}get userName(){return this._userName}get _Str_23117(){return this._canEnter}}return e.RWLUIM_LET_USER_IN="RWLUIM_LET_USER_IN",e})();class we{constructor(){this._isDisposed=!1,this._container=null}dispose(){this._isDisposed=!0,this._container=null}processWidgetMessage(e){return e&&this._container&&e&&e.type==Ie.RWLUIM_LET_USER_IN?(this._container.roomSession.sendDoorbellApprovalMessage(e.userName,e._Str_23117),null):null}processEvent(e){if(!e)return;const t=e;if(t)switch(e.type){case p.a.RSDE_REJECTED:return void this._container.events.dispatchEvent(new ye(ye.REJECTED,t.userName));case p.a.DOORBELL:return void this._container.events.dispatchEvent(new ye(ye.RWDE_RINGING,t.userName));case p.a.RSDE_ACCEPTED:return void this._container.events.dispatchEvent(new ye(ye.RWDE_ACCEPTED,t.userName))}}update(){}get disposed(){return this._isDisposed}get type(){return y.a.DOORBELL}set container(e){this._container=e}get messageTypes(){return[Ie.RWLUIM_LET_USER_IN]}get eventTypes(){return[p.a.DOORBELL,p.a.RSDE_REJECTED,p.a.RSDE_ACCEPTED]}}var Ce=n("cOVT"),Re=n("Qcw/"),Te=n("g/NA"),Oe=n("yLaL");class Me{constructor(){this._container=null,this._disposed=!1,this._roomId=0,this._roomId=Math.floor(11*Math.random()),this.onLoveLockFurniFinishedEvent=this.onLoveLockFurniFinishedEvent.bind(this),this.onLoveLockFurniFriendConfirmedEvent=this.onLoveLockFurniFriendConfirmedEvent.bind(this),this.onLoveLockFurniStartEvent=this.onLoveLockFurniStartEvent.bind(this)}dispose(){for(const e of this._messages)this._container.connection.removeMessageEvent(e);this._messages=[],this._container=null,this._disposed=!0}processEvent(e){}processWidgetMessage(e){return null}_Str_17138(e,t){null==this._container||this._disposed||this._container.connection.send(new Oe.a(e,t))}update(){}get disposed(){return this._disposed}get type(){return""}get container(){return this._container}set container(e){if(this._container=e,this._container){this._messages=[new Te.a(this.onLoveLockFurniStartEvent),new Re.a(this.onLoveLockFurniFriendConfirmedEvent),new Ce.a(this.onLoveLockFurniFinishedEvent)];for(const t of this._messages)e.connection.addMessageEvent(t)}}onLoveLockFurniStartEvent(e){if(!this._widget||!e||!e.getParser())return;const t=e.getParser();this._widget.open(t.furniId,t.start)}onLoveLockFurniFinishedEvent(e){this._widget&&e&&e.getParser()&&e.getParser()}onLoveLockFurniFriendConfirmedEvent(e){}sendStart(e,t){this._container.connection.send(new Oe.a(e,t))}get messageTypes(){return[]}get eventTypes(){return[]}get widget(){return this._widget}set widget(e){this._widget=e}}var Ue=n("x46z");class xe{constructor(){this._isDisposed=!1,this._container=null,this._widget=null}get disposed(){return this._isDisposed}get type(){return y.a.FRIEND_FURNI_ENGRAVING}get container(){return this._container}set container(e){this._container=e}set widget(e){this._widget=e}dispose(){this._container=null,this._widget=null,this._isDisposed=!0}processEvent(e){if(this.disposed||null==e)return;let t=null;switch(e.type){case l.a.REQUEST_FRIEND_FURNITURE_ENGRAVING:if(t=e,t&&this._container.roomEngine&&this._widget){const e=this._container.roomEngine.getRoomObject(t.roomId,t.objectId,t.category);if(e){const t=e.model;if(t){const n=new Ue.a;n.initializeFromRoomObjectModel(t),this._widget.open(e.id,t.getValue(A.a.FURNITURE_FRIENDFURNI_ENGRAVING),n)}}}return}}processWidgetMessage(e){return null}get eventTypes(){return[l.a.REQUEST_FRIEND_FURNITURE_ENGRAVING]}get messageTypes(){return[]}update(){}}let Ae=(()=>{class e extends q.a{constructor(e,t,n=0,i=null){super(e),this._requestId=t,this._userId=n,this._userName=i}get requestId(){return this._requestId}get userId(){return this._userId}get userName(){return this._userName}}return e.RWFRUE_SHOW_FRIEND_REQUEST="RWFRUE_SHOW_FRIEND_REQUEST",e.RWFRUE_HIDE_FRIEND_REQUEST="RWFRUE_HIDE_FRIEND_REQUEST",e})(),De=(()=>{class e extends $.a{constructor(e,t=0){super(e),this._requestId=0,this._requestId=t}get _Str_2951(){return this._requestId}}return e.RWFRM_ACCEPT="RWFRM_ACCEPT",e.RWFRM_DECLINE="RWFRM_DECLINE",e})();class Le{constructor(){this._container=null,this._isDisposed=!1}dispose(){this._container=null,this._isDisposed=!0}processWidgetMessage(e){if(!e)return null;switch(e.type){case De.RWFRM_ACCEPT:if(!this._container.friendService)return null;this._container.friendService.acceptFriendRequestById(e._Str_2951);break;case De.RWFRM_DECLINE:if(!this._container.friendService)return null;this._container.friendService.removeFriendRequestById(e._Str_2951)}return null}processEvent(e){if(e)switch(e.type){case v.a.RSFRE_FRIEND_REQUEST:return void this._container.events.dispatchEvent(new Ae(Ae.RWFRUE_SHOW_FRIEND_REQUEST,e.requestId,e.userId,e.userName));case V.a.ACCEPTED:case V.a.DECLINED:return void this._container.events.dispatchEvent(new Ae(Ae.RWFRUE_HIDE_FRIEND_REQUEST,e.requestId))}}update(){}get disposed(){return this._isDisposed}get type(){return y.a.FRIEND_REQUEST}set container(e){this._container=e}get messageTypes(){return[De.RWFRM_ACCEPT,De.RWFRM_DECLINE]}get eventTypes(){return[v.a.RSFRE_FRIEND_REQUEST,V.a.ACCEPTED,V.a.DECLINED]}}function ke(e){let t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(n,i){return(n[e]<i[e]?-1:n[e]>i[e]?1:0)*t}}class Pe{constructor(e,t,n){this._id=e,this._category=t,this._name=n}get id(){return this._id}get category(){return this._category}get name(){return this._name}}let Ne=(()=>{class e extends q.a{constructor(e,t,n=!1){super(e),this._items=t.slice(),this._Str_10043=n}get items(){return this._items}get _Str_2799(){return this._Str_10043}}return e.RWCCE_USER_CHOOSER_CONTENT="RWCCE_USER_CHOOSER_CONTENT",e.RWCCE_FURNI_CHOOSER_CONTENT="RWCCE_FURNI_CHOOSER_CONTENT",e})();class We{constructor(){this._isDisposed=!1,this._container=null}dispose(){this._isDisposed=!0,this._container=null}processWidgetMessage(e){if(!e)return null;switch(e.type){case ue.RWRWM_FURNI_CHOOSER:this.processFurniChooser();break;case te.SELECT_OBJECT:this.selectFurni(e)}return null}selectFurni(e){null!=e&&(e.category!=M.a.WALL&&e.category!=M.a.FLOOR||this._container.roomEngine.selectRoomObject(this._container.roomSession.roomId,e.id,e.category))}processFurniChooser(){if(null==this._container||null==this._container.roomSession||null==this._container.roomEngine||null==this._container.roomSession.userDataManager)return;const e=this._container.roomSession.roomId,t=[];this.processFloorFurni(e,t),this.processWallFurni(e,t),t.sort(ke("name")),this._container.events.dispatchEvent(new Ne(Ne.RWCCE_FURNI_CHOOSER_CONTENT,t,!1))}processWallFurni(e,t){const n=this._container.roomEngine.getRoomObjectCount(e,M.a.WALL);for(let i=0;i<n;i++){const n=this._container.roomEngine.getRoomObjectByIndex(e,i,M.a.WALL);if(null==n)continue;const s=n.type;let c=null;if(s.startsWith("poster")){const e=Number.parseInt(s.replace("poster",""));c=r.a.instance.localization.getValue("poster_"+e+"_name")}else{const e=Number.parseInt(n.model.getValue(A.a.FURNITURE_TYPE_ID)),t=this._container.sessionDataManager.getWallItemData(e);c=null!=t&&t.name.length>0?t.name:s}t.push(new Pe(n.id,M.a.WALL,c))}}processFloorFurni(e,t){const n=this._container.roomEngine.getRoomObjectCount(e,M.a.FLOOR);for(let i=0;i<n;i++){const n=this._container.roomEngine.getRoomObjectByIndex(e,i,M.a.FLOOR);if(null==n)continue;const r=Number.parseInt(n.model.getValue(A.a.FURNITURE_TYPE_ID)),s=this._container.sessionDataManager.getFloorItemData(r);t.push(new Pe(n.id,M.a.FLOOR,null!=s?s.name:n.type))}}processEvent(e){}update(){}get disposed(){return this._isDisposed}get type(){return y.a.FURNI_CHOOSER}set container(e){this._container=e}get messageTypes(){return[ue.RWRWM_FURNI_CHOOSER,te.SELECT_OBJECT]}get eventTypes(){return[]}}class Ke{constructor(){this._isDisposed=!1,this._container=null,this._widget=null}dispose(){this._isDisposed=!0,this._container=null,this._widget=null}processWidgetMessage(e){return null}processEvent(e){switch(e.type){case l.a.REQUEST_BACKGROUND_COLOR:{if(!this.canOpenBackgroundToner())return;const t=this._container.roomEngine.getRoomObject(e.roomId,e.objectId,e.category),n=t.model,i=Number.parseInt(n.getValue(A.a.FURNITURE_ROOM_BACKGROUND_COLOR_HUE)),r=Number.parseInt(n.getValue(A.a.FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION)),s=Number.parseInt(n.getValue(A.a.FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS));this._widget.open(t.id,i,r,s)}}}canOpenBackgroundToner(){return this._container.roomSession.isRoomOwner||this._container.roomSession.controllerLevel>=L.a.GUEST||this._container.sessionDataManager.isGodMode}set widget(e){this._widget=e}get widget(){return this._widget}update(){}get disposed(){return this._isDisposed}get type(){return y.a.ROOM_BACKGROUND_COLOR}set container(e){this._container=e}get container(){return this._container}get messageTypes(){return[]}get eventTypes(){return[l.a.REQUEST_BACKGROUND_COLOR]}}let Fe=(()=>{class e extends $.a{constructor(e,t,n=-1){super(e),this._roomObjectId=0,this._petId=-1,this._roomObjectId=t,this._petId=n}get _Str_2713(){return this._roomObjectId}get _Str_2508(){return this._petId}}return e.RWUPM_PET_PRODUCT="RWUPM_PET_PRODUCT",e.MONSTERPLANT_SEED="RWUPM_MONSTERPLANT_SEED",e})();class Ve{constructor(){this._container=null,this._isDisposed=!1,this.handleMonsterSeedPlant=this.handleMonsterSeedPlant.bind(this),this.handlePurchasableClothing=this.handlePurchasableClothing.bind(this),this.handleMysterybox=this.handleMysterybox.bind(this),this.handleEffectBox=this.handleEffectBox.bind(this),this.handleMysteryTrophy=this.handleMysteryTrophy.bind(this)}dispose(){this._container=null,this._isDisposed=!0}processWidgetMessage(e){return null}processEvent(e){}update(){}get disposed(){return this._isDisposed}get type(){return y.a.FURNI_STICKIE_WIDGET}set container(e){this._container&&this._container.sessionDataManager&&this._container.sessionDataManager.events&&(this._container.roomEngine.events.removeEventListener(l.a.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,this.handleMonsterSeedPlant),this._container.roomEngine.events.removeEventListener(l.a.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,this.handlePurchasableClothing),this._container.roomEngine.events.removeEventListener(l.a.REQUEST_MYSTERYBOX_OPEN_DIALOG,this.handleMysterybox),this._container.roomEngine.events.removeEventListener(l.a.REQUEST_EFFECTBOX_OPEN_DIALOG,this.handleEffectBox),this._container.roomEngine.events.removeEventListener(l.a.REQUEST_MYSTERYTROPHY_OPEN_DIALOG,this.handleMysteryTrophy)),this._container=e,e&&this._container.sessionDataManager&&this._container.sessionDataManager.events&&(this._container.roomEngine.events.addEventListener(l.a.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,this.handleMonsterSeedPlant),this._container.roomEngine.events.addEventListener(l.a.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,this.handlePurchasableClothing),this._container.roomEngine.events.addEventListener(l.a.REQUEST_MYSTERYBOX_OPEN_DIALOG,this.handleMysterybox),this._container.roomEngine.events.addEventListener(l.a.REQUEST_EFFECTBOX_OPEN_DIALOG,this.handleEffectBox),this._container.roomEngine.events.addEventListener(l.a.REQUEST_MYSTERYTROPHY_OPEN_DIALOG,this.handleMysteryTrophy))}get container(){return this._container}getRoomObject(e){return this._container?this._container.roomEngine.getRoomObject(this._container.roomSession.roomId,e,M.a.FLOOR):null}getFurniData(e){if(!e)return null;const t=Number.parseInt(e.model.getValue(A.a.FURNITURE_TYPE_ID));return this._container.sessionDataManager.getFloorItemData(t)}handlePurchasableClothing(e){if(!this._widget)return;const t=this.getRoomObject(e.objectId);t&&this._container.isOwnerOfFurniture(t)&&this._widget._Str_24748(t)}handleMonsterSeedPlant(e){}handleMysterybox(e){}handleEffectBox(e){}handleMysteryTrophy(e){}get widget(){return this._widget}set widget(e){this._widget=e}get messageTypes(){return[Fe.MONSTERPLANT_SEED]}get eventTypes(){return[l.a.OPEN_FURNI_CONTEXT_MENU,l.a.CLOSE_FURNI_CONTEXT_MENU]}}var qe=n("pCav");let He=(()=>{class e extends q.a{constructor(e,t,n,i){super(e),this._value=i,this._objectId=n,this._furniType=t}get value(){return this._value}get objectId(){return this._objectId}get furniType(){return this._furniType}}return e.RWCFUE_CREDIT_FURNI_UPDATE="RWCFUE_CREDIT_FURNI_UPDATE",e})(),Be=(()=>{class e extends $.a{constructor(e,t){super(e),this._objectId=t}get objectId(){return this._objectId}}return e.RWFCRM_REDEEM="RWFCRM_REDEEM",e})(),Ge=(()=>{class e extends $.a{constructor(e,t,n,i){super(e),this._objectId=t,this._category=n,this._roomId=i}get objectId(){return this._objectId}get category(){return this._category}get roomId(){return this._roomId}}return e.REQUEST_CREDITFURNI="RWFWM_MESSAGE_REQUEST_CREDITFURNI",e.REQUEST_STICKIE="RWFWM_MESSAGE_REQUEST_STICKIE",e.REQUEST_PRESENT="RWFWM_MESSAGE_REQUEST_PRESENT",e.REQUEST_TROPHY="RWFWM_MESSAGE_REQUEST_TROPHY",e.REQUEST_TEASER="RWFWM_MESSAGE_REQUEST_TEASER",e.REQUEST_ECOTRONBOX="RWFWM_MESSAGE_REQUEST_ECOTRONBOX",e.REQUEST_DIMMER="RWFWM_MESSAGE_REQUEST_DIMMER",e.REQUEST_PLACEHOLDER="RWFWM_MESSAGE_REQUEST_PLACEHOLDER",e.REQUEST_CLOTHING_CHANGE="RWFWM_MESSAGE_REQUEST_CLOTHING_CHANGE",e.REQUEST_PLAYLIST_EDITOR="RWFWM_MESSAGE_REQUEST_PLAYLIST_EDITOR",e.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING="RWFWM_WIDGET_MESSAGE_REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING",e.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED="RWFWM_WIDGET_MESSAGE_REQUEST_ACHIEVEMENT_RESOLUTION_FAILED",e.REQUEST_BADGE_DISPLAY_ENGRAVING="RWFWM_WIDGET_MESSAGE_REQUEST_BADGE_DISPLAY_ENGRAVING",e})();class Ze{constructor(){this._container=null}dispose(){this._container=null}processWidgetMessage(e){if(!e||!this.container)return null;switch(e.type){case Ge.REQUEST_CREDITFURNI:{const t=e,n=this._container.roomEngine.getRoomObject(t.roomId,t.objectId,t.category);if(n&&this._container.isOwnerOfFurniture(n)){const e=n.model.getValue(A.a.FURNITURE_CREDIT_VALUE);this._container.events.dispatchEvent(new He(He.RWCFUE_CREDIT_FURNI_UPDATE,n.model.getValue(A.a.FURNITURE_TYPE_ID)+"_"+t.type+"_"+t.objectId,t.objectId,e))}break}case Be.RWFCRM_REDEEM:{const t=e;this.container.roomSession&&this.container.roomSession.connection.send(new qe.a(t.objectId));break}}return null}processEvent(e){}update(){}get disposed(){return!!this._container}get type(){return y.a.FURNI_CREDIT_WIDGET}get container(){return this._container}set container(e){this._container=e}get messageTypes(){return[Ge.REQUEST_CREDITFURNI,Be.RWFCRM_REDEEM]}get eventTypes(){return[]}}var Xe=n("u2gC");class je{constructor(){this._container=null,this._widget=null,this._lastFurniId=-1,this._messages=[]}dispose(){this.container=null,this._widget=null}processWidgetMessage(e){return null}processEvent(e){if(!e)return;let t=null;switch(e.type){case l.a.OPEN_WIDGET:if(t=e,t&&this._container.roomEngine&&this._widget){this._lastFurniId=t.objectId;const e=this._container.roomEngine.getRoomObject(t.roomId,t.objectId,t.category);e&&this.canManipulateRoomObject(e)&&this._widget.open(this._lastFurniId,e.getLocation().z)}return;case l.a.CLOSE_WIDGET:return t=e,void(t&&this._container.roomEngine&&this._widget&&this._lastFurniId===t.objectId&&this._widget.hide())}}update(){}get disposed(){return!!this._container}get type(){return y.a.CUSTOM_STACK_HEIGHT}get container(){return this._container}set container(e){if(e!==this._container&&this._container){for(const e of this._messages)this._container.connection.removeMessageEvent(e);this._messages=[]}if(this._container=e,this._container){this._messages=[new Xe.a(this.onFurnitureStackHeightEvent.bind(this))];for(const t of this._messages)e.connection.addMessageEvent(t)}}get messageTypes(){return[]}get eventTypes(){return[]}get widget(){return this._widget}set widget(e){this._widget=e}onFurnitureStackHeightEvent(e){if(!e)return;const t=e.getParser();t&&this._widget&&this.canManipulateRoomObject()&&this._widget.update(t.furniId,t.height)}canManipulateRoomObject(e=null){const t=this._container.roomSession.isRoomOwner,n=this._container.roomSession.controllerLevel>=L.a.GUEST,i=this._container.sessionDataManager.isModerator,r=e&&this._container.isOwnerOfFurniture(e);return t||i||n||r}}let Ye=(()=>{class e extends q.a{constructor(t,n,i,r,s){super(e.RWDSUE_DIMMER_STATE),this._state=t,this._presetId=n,this._effectId=i,this._color=r,this._brightness=s}get state(){return this._state}get _Str_14686(){return this._presetId}get _Str_6815(){return this._effectId}get color(){return this._color}get _Str_5123(){return this._brightness}}return e.RWDSUE_DIMMER_STATE="RWDSUE_DIMMER_STATE",e})();class ze{constructor(e,t,n,i){this._id=0,this._type=0,this._color=0,this._intensity=0,this._id=e,this._type=t,this._color=n,this._intensity=i}get id(){return this._id}get type(){return this._type}get color(){return this._color}get _Str_4272(){return this._intensity}}let $e=(()=>{class e extends q.a{constructor(e){super(e),this._selectedPresetId=0,this._presets=[]}get _Str_10888(){return this._presets.length}get presets(){return this._presets}get selectedPresetId(){return this._selectedPresetId}set selectedPresetId(e){this._selectedPresetId=e}setPresetValues(e,t,n,i){const r=new ze(e,t,n,i);this._presets[e-1]=r}getPresetNumber(e){return e<0||e>=this._presets.length?null:this._presets[e]}}return e.RWDUE_PRESETS="RWDUE_PRESETS",e.RWDUE_HIDE="RWDUE_HIDE",e})(),Qe=(()=>{class e extends $.a{constructor(){super(e.RWCDSM_CHANGE_STATE)}}return e.RWCDSM_CHANGE_STATE="RWCDSM_CHANGE_STATE",e})(),Je=(()=>{class e extends $.a{constructor(t,n,i){super(e.RWDPM_PREVIEW_DIMMER_PRESET),this._color=t,this._brightness=n,this._bgOnly=i}get color(){return this._color}get _Str_5123(){return this._brightness}get _Str_11464(){return this._bgOnly}}return e.RWDPM_PREVIEW_DIMMER_PRESET="RWDPM_PREVIEW_DIMMER_PRESET",e})(),et=(()=>{class e extends $.a{constructor(t,n,i,r,s){super(e.RWSDPM_SAVE_PRESET),this._presetNumber=t,this._effectTypeId=n,this._color=i,this._brightness=r,this._apply=s}get _Str_25037(){return this._presetNumber}get _Str_24446(){return this._effectTypeId}get color(){return this._color}get _Str_5123(){return this._brightness}get apply(){return this._apply}}return e.RWSDPM_SAVE_PRESET="RWSDPM_SAVE_PRESET",e})();class tt{constructor(){this._isDisposed=!1,this._container=null}dispose(){this._isDisposed=!0,this._container=null}processWidgetMessage(e){switch(e.type){case Ge.REQUEST_DIMMER:this.canOpenWidget()&&this._container.roomSession.requestMoodlightSettings();break;case et.RWSDPM_SAVE_PRESET:this.canOpenWidget()&&this._container.roomSession.updateMoodlightData(e._Str_25037,e._Str_24446,e.color,e._Str_5123,e.apply);break;case Qe.RWCDSM_CHANGE_STATE:this.canOpenWidget()&&this._container.roomSession.toggleMoodlightState();break;case Je.RWDPM_PREVIEW_DIMMER_PRESET:if(!e||!this._container.roomEngine)return null;this._container.roomEngine._Str_17804(this._container.roomSession.roomId,e.color,e._Str_5123,e._Str_11464)}return null}processEvent(e){switch(e.type){case f.a.RSDPE_PRESETS:{const t=e,n=new $e($e.RWDUE_PRESETS);n.selectedPresetId=t.selectedPresetId;let i=0;for(;i<t._Str_10888;){const e=t._Str_14989(i);e&&n.setPresetValues(e.id,e.type,e.color,e._Str_4272),i++}return void this._container.events.dispatchEvent(n)}case c.a.ROOM_COLOR:return void this._container.events.dispatchEvent(new Ye(e.state,e._Str_14686,e._Str_6815,e.color,e._Str_5123));case l.a.REMOVE_DIMMER:return void this._container.events.dispatchEvent(new $e($e.RWDUE_HIDE))}}update(){}canOpenWidget(){return this._container.roomSession.isRoomOwner||this._container.roomSession.controllerLevel>=L.a.GUEST||this._container.sessionDataManager.isModerator}get disposed(){return this._isDisposed}get type(){return y.a.ROOM_DIMMER}set container(e){this._container=e}get messageTypes(){return[Ge.REQUEST_DIMMER,et.RWSDPM_SAVE_PRESET,Qe.RWCDSM_CHANGE_STATE,Je.RWDPM_PREVIEW_DIMMER_PRESET]}get eventTypes(){return[f.a.RSDPE_PRESETS,c.a.ROOM_COLOR,l.a.REMOVE_DIMMER]}}var nt=n("Lyjs");class it{constructor(){this._container=null,this._widget=null,this._cachedRequest=null,this._isDisposed=!1}dispose(){this._isDisposed=!0,this._container=null,this._widget=null,this._cachedRequest=null}processWidgetMessage(e){return null}processEvent(e){if(!e||this.disposed)return;const t=e;switch(e.type){case l.a.REQUEST_HIGH_SCORE_DISPLAY:{const e=this._container.roomEngine.getRoomObject(t.roomId,t.objectId,t.category);if(e){const n=new nt.a;n.initializeFromRoomObjectModel(e.model),this._widget.open(t.objectId,t.roomId,n),this._cachedRequest=t}return}case l.a.REQUEST_HIDE_HIGH_SCORE_DISPLAY:return void(t.roomId===this._widget.roomId&&t.objectId===this._widget.objectId&&(this._widget.hide(),this._cachedRequest=null))}}update(){if(!this._cachedRequest||!this.widget.visible||this._widget.roomId!==this._cachedRequest.roomId||this._widget.objectId!==this._cachedRequest.objectId)return;const e=this._container.roomEngine.getRoomObjectScreenLocation(this._cachedRequest.roomId,this._cachedRequest.objectId,this._cachedRequest.category);e&&this._widget.updatePoint(e.x,e.y)}get disposed(){return this._isDisposed}get type(){return y.a.HIGH_SCORE_DISPLAY}set container(e){this._container=e}get messageTypes(){return[]}get eventTypes(){return[l.a.REQUEST_HIGH_SCORE_DISPLAY,l.a.REQUEST_HIDE_HIGH_SCORE_DISPLAY]}get widget(){return this._widget}set widget(e){this._widget=e}}let rt=(()=>{class e{constructor(){this._container=null}dispose(){this._container=null}processWidgetMessage(e){return null}processEvent(t){if(!t)return;let n=null;switch(t.type){case l.a.REQUEST_INTERNAL_LINK:if(n=t,n&&this._container.roomEngine){const t=this._container.roomEngine.getRoomObject(n.roomId,n.objectId,n.category);if(t&&t.model){let n=t.model.getValue(A.a.FURNITURE_DATA)[e.INTERNALLINK];if(n&&""!==n&&0!==n.length||(n=t.model.getValue(A.a.FURNITURE_INTERNAL_LINK)),!n||0===n.length)return;r.a.instance.createLinkEvent(n)}}return}}update(){}get disposed(){return!!this._container}get type(){return y.a.INTERNAL_LINK}get container(){return this._container}set container(e){this._container=e}get messageTypes(){return[]}get eventTypes(){return[l.a.REQUEST_INTERNAL_LINK]}}return e.INTERNALLINK="internalLink",e})();class st{constructor(){this._isDisposed=!1,this._container=null}dispose(){this._isDisposed=!0,this._container=null}processWidgetMessage(e){return null}processEvent(e){switch(e.type){case l.a.REQUEST_MANNEQUIN:{const t=this._container.roomEngine.getRoomObject(e.roomId,e.objectId,e.category);if(!t)return;const n=t.model,i=n.getValue(A.a.FURNITURE_MANNEQUIN_FIGURE),r=n.getValue(A.a.FURNITURE_MANNEQUIN_GENDER),s=n.getValue(A.a.FURNITURE_MANNEQUIN_NAME);return void(i&&r&&this._widget.open(t.id,i,r,s))}}}update(){}get widget(){return this._widget}set widget(e){this._widget=e}get disposed(){return this._isDisposed}get type(){return y.a.MANNEQUIN}set container(e){this._container=e}get container(){return this._container}get messageTypes(){return[]}get eventTypes(){return[l.a.REQUEST_MANNEQUIN]}}var ct=n("u0Tz");let ot=(()=>{class e extends q.a{constructor(e,t,n,i=!1,r=null,s=null,c=null){super(e),this._objectId=-1,this._classId=0,this._itemType="",this._giftMessage="",this._extra=null,this._placedItemId=-1,this._placedItemType="",this._objectId=t,this._giftMessage=n,this._extra=r,this._isController=i,this._purchaserName=s,this._purchaserFigure=c}get objectId(){return this._objectId}get classId(){return this._classId}set classId(e){this._classId=e}get itemType(){return this._itemType}set itemType(e){this._itemType=e}get giftMessage(){return this._giftMessage}get extra(){return this._extra}get isController(){return this._isController}get purchaserName(){return this._purchaserName}get purchaserFigure(){return this._purchaserFigure}get placedItemId(){return this._placedItemId}set placedItemId(e){this._placedItemId=e}get placedInRoom(){return this._placedInRoom}set placedInRoom(e){this._placedInRoom=e}get placedItemType(){return this._placedItemType}set placedItemType(e){this._placedItemType=e}}return e.RWPDUE_PACKAGEINFO="RWPDUE_PACKAGEINFO",e.RWPDUE_CONTENTS="RWPDUE_CONTENTS",e.RWPDUE_CONTENTS_CLUB="RWPDUE_CONTENTS_CLUB",e.RWPDUE_CONTENTS_FLOOR="RWPDUE_CONTENTS_FLOOR",e.RWPDUE_CONTENTS_LANDSCAPE="RWPDUE_CONTENTS_LANDSCAPE",e.RWPDUE_CONTENTS_WALLPAPER="RWPDUE_CONTENTS_WALLPAPER",e.RWPDUE_CONTENTS_IMAGE="RWPDUE_CONTENTS_IMAGE",e})(),at=(()=>{class e extends $.a{constructor(e,t){super(e),this._objectId=t}get objectId(){return this._objectId}}return e.RWPOM_OPEN_PRESENT="RWPOM_OPEN_PRESENT",e})(),lt=(()=>{class e{constructor(){this._name=null,this._objectId=-1,this._isDisposed=!1,this._container=null}dispose(){this._name=null,this._objectId=-1,this._container=null,this._isDisposed=!0}processWidgetMessage(e){if(!e)return null;switch(e.type){case Ge.REQUEST_PRESENT:{const t=e,n=this._container.roomEngine.getRoomObject(t.roomId,t.objectId,t.category);if(!n)return null;this._objectId=t.objectId;const i=n.model.getValue(A.a.FURNITURE_DATA)||"",r=n.model.getValue(A.a.FURNITURE_PURCHASER_NAME),s=n.model.getValue(A.a.FURNITURE_PURCHASER_FIGURE),c=(n.model.getValue(A.a.FURNITURE_TYPE_ID),n.model.getValue(A.a.FURNITURE_EXTRAS));this._container.events.dispatchEvent(new ot(ot.RWPDUE_PACKAGEINFO,t.objectId,i,this._container.isOwnerOfFurniture(n),c,r,s));break}case at.RWPOM_OPEN_PRESENT:{const t=e;if(t.objectId!==this._objectId)return null;this._container&&(this._container.roomSession.openGift(t.objectId),this._container.roomEngine.changeObjectModelData(this._container.roomEngine.activeRoomId,t.objectId,M.a.FLOOR,A.a.FURNITURE_DISABLE_PICKING_ANIMATION,1));break}}return null}processEvent(t){if(t&&this._container&&this._container.events)switch(t.type){case E.a.RSPE_PRESENT_OPENED:{const n=t;let i=null;n.itemType===ct.a.FLOOR?i=this._container.sessionDataManager.getFloorItemData(n.classId):n.itemType===ct.a.WALL&&(i=this._container.sessionDataManager.getWallItemData(n.classId));let s=!1;if(n.placedInRoom){const e=this._container.roomEngine.getRoomObject(this._container.roomSession.roomId,n.placedItemId,M.a.FLOOR);e&&(s=this._container.isOwnerOfFurniture(e))}let c=null;switch(n.itemType){case ct.a.WALL:if(i)switch(i.className){case e.LANDSCAPE:c=new ot(ot.RWPDUE_CONTENTS_LANDSCAPE,0,r.a.instance.localization.getValue("inventory.furni.item.landscape.name"),s);break;case e.WALLPAPER:c=new ot(ot.RWPDUE_CONTENTS_WALLPAPER,0,r.a.instance.localization.getValue("inventory.furni.item.wallpaper.name"),s);break;case e.POSTER:{const e=n.productCode;let t=null;0===e.indexOf("poster")&&(t=e.replace("poster",""));const r=this._container.sessionDataManager.getProductData(e);let o="";r?o=r.name:i&&(o=i.name),c=new ot(ot.RWPDUE_CONTENTS,0,o,s,t);break}default:c=new ot(ot.RWPDUE_CONTENTS,0,i.name||"",s)}break;case ct.a.HABBO_CLUB:c=new ot(ot.RWPDUE_CONTENTS_CLUB,0,r.a.instance.localization.getValue("widget.furni.present.hc"),!1);break;default:{const e=this._container.sessionDataManager.getFloorItemData(n.classId);let t="";e?t=e.name:i&&(t=i.name),c=new ot(ot.RWPDUE_CONTENTS,0,t,s);break}}c&&(c.classId=n.classId,c.itemType=n.itemType,c.placedItemId=n.placedItemId,c.placedInRoom=n.placedInRoom,c.placedItemType=n.placedItemType,this._container.events.dispatchEvent(c));break}}}update(){}get disposed(){return this._isDisposed}get type(){return y.a.FURNI_PRESENT_WIDGET}set container(e){this._container=e}get messageTypes(){return[Ge.REQUEST_PRESENT,at.RWPOM_OPEN_PRESENT]}get eventTypes(){return[E.a.RSPE_PRESENT_OPENED]}imageFailed(e){}imageReady(e,t,n){}}return e.FLOOR="floor",e.WALLPAPER="wallpaper",e.LANDSCAPE="landscape",e.POSTER="poster",e})();var dt=n("3+UD"),ut=n("Q5/h");let ht=(()=>{class e{constructor(){this._container=null,this._messages=[],this._link=null,this._roomIdToEnter=0,this._confirmDialog=null}dispose(){this.container=null,this._link=null,this._roomIdToEnter=0,this.closeConfirmDialog()}processWidgetMessage(e){return null}processEvent(t){if(!t)return;let n=null;switch(t.type){case l.a.REQUEST_ROOM_LINK:if(n=t,n&&this._container.roomEngine){const t=this._container.roomEngine.getRoomObject(n.roomId,n.objectId,n.category);if(t&&t.model){let n=t.model.getValue(A.a.FURNITURE_DATA)[e.INTERNALLINK];if(n&&""!==n&&0!==n.length||(n=t.model.getValue(A.a.FURNITURE_INTERNAL_LINK)),!n||0===n.length)return;this.closeConfirmDialog(),this._link=n,this._roomIdToEnter=parseInt(n,10),this._container&&this._container.connection&&this._container.connection.send(new ut.a(this._roomIdToEnter,!1,!1))}}return}}onRoomInfoEvent(e){if(!e)return;const t=e.getParser();if(!t)return;const n=t.data;if(!n)return;if(n.roomId!==this._roomIdToEnter)return;this._roomIdToEnter=0;const i=n.roomName,s=n.ownerName;let c=r.a.instance.getLocalization("room.link.confirmation.message");c&&c.indexOf("%%room_name%%")>-1&&(c=c.replace("%%room_name%%",i)),c&&c.indexOf("%%owner_name%%")>-1&&(c=c.replace("%%owner_name%%",s)),this.closeConfirmDialog(),this._container&&this._container.notificationService&&(this._confirmDialog=this._container.notificationService.alertWithConfirm(c,null,()=>{r.a.instance.createLinkEvent("navigator/goto/"+this._link)}))}closeConfirmDialog(){this._confirmDialog&&(this._confirmDialog.close(),this._confirmDialog=null)}update(){}get disposed(){return!!this._container}get type(){return y.a.ROOM_LINK}get container(){return this._container}set container(e){if(e!==this._container&&this._container){for(const e of this._messages)this._container.connection.removeMessageEvent(e);this._messages=[]}if(this._container=e,this._container){this._messages=[new dt.a(this.onRoomInfoEvent.bind(this))];for(const t of this._messages)e.connection.addMessageEvent(t)}}get messageTypes(){return[]}get eventTypes(){return[l.a.REQUEST_ROOM_LINK]}}return e.INTERNALLINK="internalLink",e})(),gt=(()=>{class e extends q.a{constructor(e,t,n,i,r,s){super(e),this._Str_2319=-1,this._Str_2319=t,this._Str_3796=n,this._text=i,this._Str_3062=r,this._controller=s}get _Str_1577(){return this._Str_2319}get _Str_1723(){return this._Str_3796}get text(){return this._text}get _Str_10471(){return this._Str_3062}get controller(){return this._controller}}return e.RWSDUE_STICKIE_DATA="RWSDUE_STICKIE_DATA",e})(),mt=(()=>{class e extends $.a{constructor(e,t,n="",i=""){super(e),this._objectId=t,this._text=n,this._colorHex=i}get objectId(){return this._objectId}get text(){return this._text}get colorHex(){return this._colorHex}}return e.SEND_UPDATE="RWSUM_STICKIE_SEND_UPDATE",e.SEND_DELETE="RWSUM_STICKIE_SEND_DELETE",e})();class ft{constructor(){this._container=null,this._isDisposed=!1}dispose(){this._container=null,this._isDisposed=!0}processWidgetMessage(e){if(!e)return null;switch(e.type){case Ge.REQUEST_STICKIE:{const t=e,n=this._container.roomEngine.getRoomObject(t.roomId,t.objectId,t.category);if(n){const e=n.model.getValue(A.a.FURNITURE_ITEMDATA);if(e.length<6)return null;let i=null,r=null;e.indexOf(" ")>0?(i=e.slice(0,e.indexOf(" ")),r=e.slice(e.indexOf(" ")+1,e.length)):i=e,this._container.events.dispatchEvent(new gt(gt.RWSDUE_STICKIE_DATA,t.objectId,n.type,r,i,this._container.roomSession.isRoomOwner||this._container.sessionDataManager.isModerator))}break}case mt.SEND_UPDATE:this._container.roomEngine.modifyRoomObjectData(e.objectId,M.a.WALL,e.colorHex,e.text);break;case mt.SEND_DELETE:this._container.roomEngine.deleteRoomObject(e.objectId,M.a.WALL)}return null}processEvent(e){}update(){}get disposed(){return this._isDisposed}get type(){return y.a.FURNI_STICKIE_WIDGET}set container(e){this._container=e}get messageTypes(){return[Ge.REQUEST_STICKIE,mt.SEND_DELETE,mt.SEND_UPDATE]}get eventTypes(){return[]}}let pt=(()=>{class e extends q.a{constructor(e,t,n,i,r,s){super(e),this._name=t,this._date=n,this._message=i,this._color=r,this._viewType=s}get name(){return this._name}get date(){return this._date}get message(){return this._message}get color(){return this._color}get viewType(){return this._viewType}}return e.TROPHY_DATA="RWTDUE_TROPHY_DATA",e})();class _t{constructor(){this._container=null}dispose(){this._container=null}processWidgetMessage(e){if(!e||!this.container)return null;switch(e.type){case Ge.REQUEST_TROPHY:{const t=this._container.roomEngine.getRoomObject(e.roomId,e.objectId,e.category);if(t){let e=t.model.getValue(A.a.FURNITURE_DATA),n=t.model.getValue(A.a.FURNITURE_EXTRAS);n||(n="0");const i=t.model.getValue(A.a.FURNITURE_COLOR),r=e.substring(0,e.indexOf("\t"));e=e.substring(r.length+1,e.length);const s=e.substring(0,e.indexOf("\t")),c=e.substr(s.length+1,e.length);this._container.events.dispatchEvent(new pt(pt.TROPHY_DATA,r,s,c,parseInt(i),parseInt(n)))}break}}return null}processEvent(e){}update(){}get disposed(){return!!this._container}get type(){return y.a.FURNI_TROPHY_WIDGET}get container(){return this._container}set container(e){this._container=e}get messageTypes(){return[Ge.REQUEST_TROPHY]}get eventTypes(){return[]}}n("qf3c");var bt=n("JXKJ"),vt=n("tN/i"),Et=n("bfiE"),St=n("XN1K"),yt=n("FmTr"),It=n("b1j+"),wt=n("xUDm"),Ct=n("wVNO");let Rt=(()=>{class e extends q.a{constructor(t,n,i,r,s){super(e.RWONE_TYPE),this._userId=t,this._category=n,this._userName=i,this._userType=r,this._roomIndex=s}get userId(){return this._userId}get category(){return this._category}get userName(){return this._userName}get userType(){return this._userType}get roomIndex(){return this._roomIndex}}return e.RWONE_TYPE="RWONE_TYPE",e})(),Tt=(()=>{class e extends q.a{constructor(t,n){super(e.RWWCIDE_CHAT_INPUT_CONTENT),this._Str_21134="",this._userName="",this._Str_21134=t,this._userName=n}get _Str_23621(){return this._Str_21134}get userName(){return this._userName}}return e.RWWCIDE_CHAT_INPUT_CONTENT="RWWCIDE_CHAT_INPUT_CONTENT",e.WHISPER="whisper",e.SHOUT="shout",e})(),Ot=(()=>{class e extends q.a{constructor(e){super(e),this._id=0,this._category=0,this._name="",this._description="",this._image=null,this._isWallItem=!1,this._isStickie=!1,this._isRoomOwner=!1,this._roomControllerLevel=0,this._isAnyRoomController=!1,this._expiration=-1,this._purchaseCatalogPageId=-1,this._purchaseOfferId=-1,this._extraParam="",this._isOwner=!1,this._stuffData=null,this._groupId=0,this._ownerId=0,this._ownerName="",this._usagePolicy=0,this._rentCatalogPageId=-1,this._rentOfferId=-1,this._purchaseCouldBeUsedForBuyout=!1,this._rentCouldBeUsedForBuyout=!1,this._availableForBuildersClub=!1}set id(e){this._id=e}get id(){return this._id}set category(e){this._category=e}get category(){return this._category}set name(e){this._name=e}get name(){return this._name}set description(e){this._description=e}get description(){return this._description}set image(e){this._image=e}get image(){return this._image}set isWallItem(e){this._isWallItem=e}get isWallItem(){return this._isWallItem}set isStickie(e){this._isStickie=e}get isStickie(){return this._isStickie}set isRoomOwner(e){this._isRoomOwner=e}get isRoomOwner(){return this._isRoomOwner}set roomControllerLevel(e){this._roomControllerLevel=e}get roomControllerLevel(){return this._roomControllerLevel}set isAnyRoomOwner(e){this._isAnyRoomController=e}get isAnyRoomOwner(){return this._isAnyRoomController}set expiration(e){this._expiration=e}get expiration(){return this._expiration}set purchaseOfferId(e){this._purchaseOfferId=e}get purchaseOfferId(){return this._purchaseOfferId}set extraParam(e){this._extraParam=e}get extraParam(){return this._extraParam}set isOwner(e){this._isOwner=e}get isOwner(){return this._isOwner}set stuffData(e){this._stuffData=e}get stuffData(){return this._stuffData}set groupId(e){this._groupId=e}get groupId(){return this._groupId}set ownerId(e){this._ownerId=e}get ownerId(){return this._ownerId}set ownerName(e){this._ownerName=e}get ownerName(){return this._ownerName}set usagePolicy(e){this._usagePolicy=e}get usagePolicy(){return this._usagePolicy}set rentOfferId(e){this._rentOfferId=e}get rentOfferId(){return this._rentOfferId}get purchaseCouldBeUsedForBuyout(){return this._purchaseCouldBeUsedForBuyout}set purchaseCouldBeUsedForBuyout(e){this._purchaseCouldBeUsedForBuyout=e}get rentCouldBeUsedForBuyout(){return this._rentCouldBeUsedForBuyout}set rentCouldBeUsedForBuyout(e){this._rentCouldBeUsedForBuyout=e}get availableForBuildersClub(){return this._availableForBuildersClub}set availableForBuildersClub(e){this._availableForBuildersClub=e}}return e.FURNI="RWFIUE_FURNI",e})(),Mt=(()=>{class e extends q.a{constructor(t,n,i,r,s,c,o,a,l,d){super(e.PET_INFO),this._Str_6689=t,this._Str_20932=n,this._name=i,this._id=r,this._petFigureData=s,this._Str_10121=c,this._ownerId=o,this._ownerName=a,this._Str_2775=l,this._unknownRarityLevel=d}get name(){return this._name}get petFigureData(){return this._petFigureData}get id(){return this._id}get _Str_4355(){return this._Str_6689}get _Str_14767(){return this._Str_20932}get _Str_5175(){return this._Str_10121}get ownerId(){return this._ownerId}get ownerName(){return this._ownerName}get _Str_2707(){return this._Str_2775}get unknownRarityLevel(){return this._unknownRarityLevel}get level(){return this._level}set level(e){this._level=e}get maximumLevel(){return this._maximumLevel}set maximumLevel(e){this._maximumLevel=e}get experience(){return this._experience}set experience(e){this._experience=e}get levelExperienceGoal(){return this._levelExperienceGoal}set levelExperienceGoal(e){this._levelExperienceGoal=e}get energy(){return this._energy}set energy(e){this._energy=e}get maximumEnergy(){return this._maximumEnergy}set maximumEnergy(e){this._maximumEnergy=e}get happyness(){return this._happyness}set happyness(e){this._happyness=e}get maximumHappyness(){return this._maximumHappyness}set maximumHappyness(e){this._maximumHappyness=e}get _Str_2985(){return this._Str_3973}set _Str_2985(e){this._Str_3973=e}get _Str_5114(){return this._Str_11149}set _Str_5114(e){this._Str_11149=e}get respect(){return this._respect}set respect(e){this._respect=e}get age(){return this._age}set age(e){this._age=e}get saddle(){return this._saddle}set saddle(e){this._saddle=e}get rider(){return this._rider}set rider(e){this._rider=e}get breedable(){return this._breedable}set breedable(e){this._breedable=e}get _Str_3307(){return this._Str_4460}set _Str_3307(e){this._Str_4460=e}get publiclyRideable(){return this._publiclyRideable}set publiclyRideable(e){this._publiclyRideable=e}get fullyGrown(){return this._fullyGrown}set fullyGrown(e){this._fullyGrown=e}get dead(){return this._dead}set dead(e){this._dead=e}get rarityLevel(){return this._rarityLevel}set rarityLevel(e){this._rarityLevel=e}get maximumTimeToLive(){return this._maximumTimeToLive}set maximumTimeToLive(e){this._maximumTimeToLive=e}get remainingTimeToLive(){return this._remainingTimeToLive}set remainingTimeToLive(e){this._remainingTimeToLive=e}get remainingGrowTime(){return this._remainingGrowTime}set remainingGrowTime(e){this._remainingGrowTime=e}get publiclyBreedable(){return this._publiclyBreedable}set publiclyBreedable(e){this._publiclyBreedable=e}}return e.PET_INFO="RWPIUE_PET_INFO",e})(),Ut=(()=>{class e extends q.a{constructor(){super(e.RENTABLE_BOT),this._name="",this._motto="",this._Str_4900=0,this._figure="",this._caryId=0,this._Str_5131=0,this._Str_4026=!1,this._Str_4028=!1,this._roomControllerLevel=0,this._badges=[]}set name(e){this._name=e}get name(){return this._name}set motto(e){this._motto=e}get motto(){return this._motto}set id(e){this._Str_4900=e}get id(){return this._Str_4900}set figure(e){this._figure=e}get figure(){return this._figure}set badges(e){this._badges=e}get badges(){return this._badges}get ownerId(){return this._ownerId}set ownerId(e){this._ownerId=e}get ownerName(){return this._ownerName}set ownerName(e){this._ownerName=e}set _Str_3246(e){this._Str_4026=e}get _Str_3246(){return this._Str_4026}set roomControllerLevel(e){this._roomControllerLevel=e}get roomControllerLevel(){return this._roomControllerLevel}set _Str_3529(e){this._Str_4028=e}get _Str_3529(){return this._Str_4028}set carryId(e){this._caryId=e}get carryId(){return this._caryId}set roomIndex(e){this._Str_5131=e}get roomIndex(){return this._Str_5131}get botSkills(){return this._Str_3986}set botSkills(e){this._Str_3986=e}}return e.RENTABLE_BOT="RWRBIUE_RENTABLE_BOT",e._Str_7492="RENTABLE_BOT",e})(),xt=(()=>{class e extends q.a{constructor(e){super(e),this._name="",this._motto="",this._Str_4900=0,this._xp=0,this._figure="",this._groupId=0,this._groupName="",this._Str_11289="",this._Str_5228=0,this._Str_5131=0,this._Str_8522=!1,this._realName="",this._Str_3947=!1,this._Str_4026=!1,this._Str_4028=!1,this._roomControllerLevel=0,this._canBeAskedForAFriend=!1,this._Str_9070=!1,this._Str_8457=!1,this._Str_8831=!1,this._Str_3437=0,this._Str_6028=!1,this._Str_6139=!1,this._Str_8973=!1,this._Str_8910=0,this._Str_8858=0,this._isFriend=!1,this._Str_4890=!1,this._badges=[]}set name(e){this._name=e}get name(){return this._name}set motto(e){this._motto=e}get motto(){return this._motto}set activityPoints(e){this._activityPoints=e}get activityPoints(){return this._activityPoints}set webID(e){this._Str_4900=e}get webID(){return this._Str_4900}set xp(e){this._xp=e}get xp(){return this._xp}set userType(e){this._Str_3021=e}get userType(){return this._Str_3021}set figure(e){this._figure=e}get figure(){return this._figure}set badges(e){this._badges=e}get badges(){return this._badges}set groupId(e){this._groupId=e}get groupId(){return this._groupId}set groupName(e){this._groupName=e}get groupName(){return this._groupName}set groupBadgeId(e){this._Str_11289=e}get groupBadgeId(){return this._Str_11289}set canBeAskedForAFriend(e){this._canBeAskedForAFriend=e}get canBeAskedForAFriend(){return this._canBeAskedForAFriend}set respectLeft(e){this._Str_3437=e}get respectLeft(){return this._Str_3437}set isIgnored(e){this._Str_6028=e}get isIgnored(){return this._Str_6028}set isRoomOwner(e){this._Str_4026=e}get isRoomOwner(){return this._Str_4026}set isGuildRoom(e){this._Str_6139=e}get isGuildRoom(){return this._Str_6139}set roomControllerLevel(e){this._roomControllerLevel=e}get roomControllerLevel(){return this._roomControllerLevel}set isModerator(e){this._Str_4028=e}get isModerator(){return this._Str_4028}set canTrade(e){this._Str_8973=e}get canTrade(){return this._Str_8973}set _Str_6622(e){this._Str_8910=e}get _Str_6622(){return this._Str_8910}set _Str_5990(e){this._Str_9070=e}get _Str_5990(){return this._Str_9070}set _Str_6701(e){this._Str_8457=e}get _Str_6701(){return this._Str_8457}get _Str_6394(){return this._Str_8831}set _Str_6394(e){this._Str_8831=e}set flatControl(e){this._Str_8858=e}get flatControl(){return this._Str_8858}set carryId(e){this._Str_5228=e}get carryId(){return this._Str_5228}set roomIndex(e){this._Str_5131=e}get roomIndex(){return this._Str_5131}set isSpectator(e){this._Str_8522=e}get isSpectator(){return this._Str_8522}set realName(e){this._realName=e}get realName(){return this._realName}set _Str_4330(e){this._Str_3947=e}get _Str_4330(){return this._Str_3947}get isFriend(){return this._isFriend}set isFriend(e){this._isFriend=e}get isAmbassador(){return this._Str_4890}set isAmbassador(e){this._Str_4890=e}}return e.OWN_USER="RWUIUE_OWN_USER",e.BOT="RWUIUE_BOT",e.PEER="RWUIUE_PEER",e._Str_18400=0,e._Str_14161=2,e._Str_13798=3,e._Str_7492="BOT",e})(),At=(()=>{class e extends $.a{constructor(t){super(e.RWVM_CHANGE_MOTTO_MESSAGE),this._motto=t}get motto(){return this._motto}}return e.RWVM_CHANGE_MOTTO_MESSAGE="RWVM_CHANGE_MOTTO_MESSAGE",e})(),Dt=(()=>{class e extends $.a{constructor(e,t,n,i=-1,r=null){super(e),this._furniId=t,this._furniCategory=n,this._offerId=i,this._objectData=r}get furniId(){return this._furniId}get furniCategory(){return this._furniCategory}get objectData(){return this._objectData}get _Str_2451(){return this._offerId}}return e.RWFUAM_ROTATE="RWFUAM_ROTATE",e.RWFAM_MOVE="RWFAM_MOVE",e.RWFAM_PICKUP="RWFAM_PICKUP",e.RWFAM_EJECT="RWFAM_EJECT",e.RWFAM_USE="RWFAM_USE",e.RWFAM_OPEN_WELCOME_GIFT="RWFAM_OPEN_WELCOME_GIFT",e.RWFAM_SAVE_STUFF_DATA="RWFAM_SAVE_STUFF_DATA",e})(),Lt=(()=>{class e{constructor(){this.container=null,this._widget=null,this._disposed=!1,this.onRoomSessionPetInfoUpdateEvent=this.onRoomSessionPetInfoUpdateEvent.bind(this)}dispose(){this.disposed||(this.container=null,this._disposed=!0)}update(){}processWidgetMessage(e){if(!e||!this._container)return null;let t=0,n=null;if(e instanceof ne&&(t=e.userId,n=[ne.RWUAM_REQUEST_PET_UPDATE,ne.RWUAM_RESPECT_PET,ne.RWUAM_PICKUP_PET,ne.RWUAM_MOUNT_PET,ne.RWUAM_TOGGLE_PET_RIDING_PERMISSION,ne.RWUAM_TOGGLE_PET_BREEDING_PERMISSION,ne.RWUAM_DISMOUNT_PET,ne.RWUAM_SADDLE_OFF,ne.RWUAM_GIVE_CARRY_ITEM_TO_PET,ne.RWUAM_GIVE_WATER_TO_PET,ne.RWUAM_GIVE_LIGHT_TO_PET,ne.RWUAM_TREAT_PET].indexOf(e.type)>=0?this._container.roomSession.userDataManager.getPetData(t):this._container.roomSession.userDataManager.getUserData(t),!n))return null;let i=0,r=0;switch(e instanceof Dt&&(i=e.furniId,r=e.furniCategory),e.type){case te.GET_OBJECT_INFO:return this.processObjectInfoMessage(e);case te.GET_OBJECT_NAME:return this.processObjectNameMessage(e);case ne.RWUAM_SEND_FRIEND_REQUEST:this._container.friendService.sendFriendRequest(t,n.name);break;case ne.RWUAM_RESPECT_USER:this._container.sessionDataManager.giveRespect(t);break;case ne.RWUAM_RESPECT_PET:this._container.sessionDataManager.givePetRespect(t);break;case ne.RWUAM_WHISPER_USER:this._container.events.dispatchEvent(new Tt(Tt.WHISPER,n.name));break;case ne.RWUAM_IGNORE_USER:this._container.sessionDataManager.ignoreUser(n.name);break;case ne.RWUAM_UNIGNORE_USER:this._container.sessionDataManager.unignoreUser(n.name);break;case ne.RWUAM_KICK_USER:this._container.roomSession.sendKickMessage(e.userId);break;case ne.RWUAM_BAN_USER_DAY:case ne.RWUAM_BAN_USER_HOUR:case ne.RWUAM_BAN_USER_PERM:this._container.roomSession.sendBanMessage(e.userId,e.type);break;case ne.MUTE_USER_2MIN:this._container.roomSession.sendMuteMessage(e.userId,2);break;case ne.MUTE_USER_5MIN:this._container.roomSession.sendMuteMessage(e.userId,5);break;case ne.MUTE_USER_10MIN:this._container.roomSession.sendMuteMessage(e.userId,10);break;case ne.RWUAM_GIVE_RIGHTS:this._container.roomSession.sendGiveRightsMessage(e.userId);break;case ne.RWUAM_TAKE_RIGHTS:this._container.roomSession.sendTakeRightsMessage(e.userId);break;case ne.RWUAM_START_TRADING:n&&this._widget.inventoryTrading.startTrade(n.roomIndex,n.name);break;case ne.RWUAM_PASS_CARRY_ITEM:this._container.connection.send(new Et.a(t));break;case ne.RWUAM_GIVE_CARRY_ITEM_TO_PET:case ne.RWUAM_GIVE_WATER_TO_PET:case ne.RWUAM_GIVE_LIGHT_TO_PET:case ne.RWUAM_TREAT_PET:break;case ne.RWUAM_DROP_CARRY_ITEM:this._container.connection.send(new vt.a);break;case Dt.RWFUAM_ROTATE:this._container.roomEngine.processRoomObjectOperation(i,r,U.a.OBJECT_ROTATE_POSITIVE);break;case Dt.RWFAM_MOVE:this._container.roomEngine.processRoomObjectOperation(i,r,U.a.OBJECT_MOVE);break;case Dt.RWFAM_PICKUP:this._container.roomEngine.processRoomObjectOperation(i,r,U.a.OBJECT_PICKUP);break;case Dt.RWFAM_EJECT:this._container.roomEngine.processRoomObjectOperation(i,r,U.a.OBJECT_EJECT);break;case Dt.RWFAM_USE:this._container.roomEngine.useRoomObject(i,r);break;case At.RWVM_CHANGE_MOTTO_MESSAGE:return void this._container.roomSession.sendMottoMessage(e.motto);case Dt.RWFAM_SAVE_STUFF_DATA:{const t=e.objectData;if(t){const e=new Map,n=t.split("\t");if(n)for(const t of n){const n=t.split("=",2);n&&2===n.length&&e.set(n[0],n[1])}this._container.roomEngine.processRoomObjectWallOperation(i,r,U.a.OBJECT_SAVE_STUFF_DATA,e),this._Str_23922(e),e.clear()}break}case ne.RWUAM_REQUEST_PET_UPDATE:this._container.roomSession&&this._container.roomSession.userDataManager&&this._container.roomSession.userDataManager.requestPetInfo(t);break;case ne.RWUAM_REPORT:case ne.RWUAM_REPORT_CFH_OTHER:break;case ne.RWUAM_AMBASSADOR_ALERT_USER:this._container.roomSession.sendAmbassadorAlertMessage(e.userId);break;case ne.RWUAM_AMBASSADOR_KICK_USER:this._container.roomSession.sendKickMessage(e.userId);break;case ne.AMBASSADOR_MUTE_USER_2MIN:this._container.roomSession.sendMuteMessage(e.userId,2);break;case ne.AMBASSADOR_MUTE_USER_10MIN:this._container.roomSession.sendMuteMessage(e.userId,10);break;case ne.AMBASSADOR_MUTE_USER_60MIN:this._container.roomSession.sendMuteMessage(e.userId,60);break;case ne.AMBASSADOR_MUTE_USER_18HOUR:this._container.roomSession.sendMuteMessage(e.userId,1080)}return null}processEvent(e){if(event)switch(e.type){case S.a.RSUBE_BADGES:return void this.widget.updateUserBadges(e.userId,e.badges)}}processObjectInfoMessage(e){const t=this._container.roomSession.roomId;switch(e.category){case M.a.FLOOR:case M.a.WALL:this._Str_23142(e,t);break;case M.a.UNIT:{if(!(this._container.roomSession&&this._container.sessionDataManager&&this._container.events&&this._container.roomEngine))return null;const n=this._container.roomSession.userDataManager.getUserDataByIndex(e.id);if(!n)return null;switch(n.type){case x.a.PET:this.selectPet(n.webID);break;case x.a.USER:this._Str_22722(t,e.id,e.category,n);break;case x.a.BOT:this._Str_22312(t,e.id,e.category,n);break;case x.a.RENTABLE_BOT:this._Str_23115(t,e.id,e.category,n)}break}}return null}processObjectNameMessage(e){const t=this._container.roomSession.roomId;let n=0,i=null,r=0,s=0;switch(e.category){case M.a.FLOOR:case M.a.WALL:{if(!this._container.events||!this._container.roomEngine)return null;const r=this._container.roomEngine.getRoomObject(t,e.id,e.category),c=r.type;if(0===c.indexOf("poster"))n=-1,i="${poster_"+parseInt(c.replace("poster",""))+"_name}",s=r.id;else{let t=null;const c=r.model.getValue(A.a.FURNITURE_TYPE_ID);if(e.category===M.a.FLOOR?t=this._container.sessionDataManager.getFloorItemData(c):e.category===M.a.WALL&&(t=this._container.sessionDataManager.getWallItemData(c)),!t)return null;n=t.id,i=t.name,s=r.id}break}case M.a.UNIT:{if(!this._container.roomSession||!this._container.roomSession.userDataManager)return null;const t=this._container.roomSession.userDataManager.getUserDataByIndex(e.id);if(!t)return null;n=t.webID,i=t.name,r=t.type,s=t.roomIndex;break}}return i&&this._container.events.dispatchEvent(new Rt(n,e.category,i,r,s)),null}_Str_23142(e,t){if(!this._container||!this._container.events||!this._container.roomEngine)return;if(e.id<0)return;const n=new Ot(Ot.FURNI);n.id=e.id,n.category=e.category;const i=this._container.roomEngine.getRoomObject(t,e.id,e.category);if(!i)return;const s=i.model;s.getValue(Ct.a.INFOSTAND_EXTRA_PARAM)&&(n.extraParam=s.getValue(Ct.a.INFOSTAND_EXTRA_PARAM));const c=s.getValue(A.a.FURNITURE_DATA_FORMAT),o=yt.a.getData(c);o.initializeFromRoomObjectModel(s),n.stuffData=o;const a=i.type;if(0===a.indexOf("poster")){const e=parseInt(a.replace("poster",""));n.name="${poster_"+e+"_name}",n.description="${poster_"+e+"_desc}"}else{const t=s.getValue(A.a.FURNITURE_TYPE_ID);let r=null;e.category===M.a.FLOOR?r=this._container.sessionDataManager.getFloorItemData(t):e.category==M.a.WALL&&(r=this._container.sessionDataManager.getWallItemData(t)),r&&(n.name=r.name,n.description=r.description,n.purchaseOfferId=r.purchaseOfferId,n.purchaseCouldBeUsedForBuyout=r.purchaseCouldBeUsedForBuyout,n.rentOfferId=r.rentOfferId,n.rentCouldBeUsedForBuyout=r.rentCouldBeUsedForBuyout,n.availableForBuildersClub=r.availableForBuildersClub,this._container.wiredService&&e.category===M.a.FLOOR&&this._container.wiredService.selectFurniture(i.id,r.name))}a.indexOf("post_it")>-1&&(n.isStickie=!0);const l=s.getValue(A.a.FURNITURE_EXPIRY_TIME),d=s.getValue(A.a.FURNITURE_EXPIRTY_TIMESTAMP);n.expiration=l<0?l:Math.max(0,l-(r.a.instance.time-d)/1e3);let u=this._container.roomEngine.getRoomObjectImage(t,e.id,e.category,new K.a(180),64,null);if((!u.data||u.data.width>140||u.data.height>200)&&(u=this._container.roomEngine.getRoomObjectImage(t,e.id,e.category,new K.a(180),1,null)),u&&u.data){const e=r.a.instance.renderer.extract.image(u.data);e&&(n.image=e)}n.isWallItem=e.category===M.a.WALL,n.isRoomOwner=this._container.roomSession.isRoomOwner,n.roomControllerLevel=this._container.roomSession.controllerLevel,n.isAnyRoomOwner=this._container.sessionDataManager.isModerator,n.ownerId=s.getValue(A.a.FURNITURE_OWNER_ID),n.ownerName=s.getValue(A.a.FURNITURE_OWNER_NAME),n.usagePolicy=s.getValue(A.a.FURNITURE_USAGE_POLICY);const h=s.getValue(A.a.FURNITURE_GUILD_CUSTOMIZED_GUILD_ID);0!==h&&(n.groupId=h),this._container.isOwnerOfFurniture(i)&&(n.isOwner=!0),this._container.events.dispatchEvent(n)}selectPet(e){this._container.roomSession.userDataManager.requestPetInfo(e)}_Str_22722(t,n,i,r){let s=xt.OWN_USER;r.webID!==this._container.sessionDataManager.userId&&(s=xt.PEER);const c=new xt(s);c.isSpectator=this._container.roomSession.isSpectator,c.name=r.name,c.motto=r.custom,e.ACTIVITY_POINTS_DISPLAY_ENABLED&&(c.activityPoints=r.activityPoints),c.webID=r.webID,c.roomIndex=n,c.userType=x.a.USER;const o=this._container.roomEngine.getRoomObject(t,n,i);if(o&&(c.carryId=o.model.getValue(A.a.FIGURE_CARRY_OBJECT)),s==xt.OWN_USER&&(c.realName=this._container.sessionDataManager.realName,c._Str_4330=this._container.sessionDataManager.canChangeName),c.isRoomOwner=this._container.roomSession.isRoomOwner,c.isGuildRoom=this._container.roomSession.isGuildRoom,c.roomControllerLevel=this._container.roomSession.controllerLevel,c.isModerator=this._container.sessionDataManager.isModerator,c.isAmbassador=this._container.sessionDataManager.isAmbassador,s===xt.PEER){c.canBeAskedForAFriend=this._container.friendService.canBeAskedForAFriend(r.webID);const e=this._container.friendService.getFriend(r.webID);if(e&&(c.realName=e.realName,c.isFriend=!0),o){const e=o.model.getValue(A.a.FIGURE_FLAT_CONTROL);null!==e&&(c.flatControl=e),c._Str_6394=this._Str_23100(c),c._Str_5990=this._Str_22729(c),c._Str_6701=this._Str_23573(c)}c.isIgnored=this._container.sessionDataManager.isUserIgnored(r.name),c.respectLeft=this._container.sessionDataManager.respectsLeft;const t=this._container.sessionDataManager.isSystemShutdown,n=this._container.roomSession.tradeMode;if(t)c.canTrade=!1;else switch(n){case It.a._Str_14475:{const e=c.flatControl!==L.a.NONE&&c.flatControl!==L.a.GUILD_MEMBER;c.canTrade=c.roomControllerLevel!==L.a.NONE&&c.roomControllerLevel!==L.a.GUILD_MEMBER||e;break}case It.a._Str_9173:c.canTrade=!0;break;default:c.canTrade=!1}c._Str_6622=xt._Str_18400,t&&(c._Str_6622=xt._Str_14161),n!==It.a._Str_9173&&(c._Str_6622=xt._Str_13798)}c.groupId=parseInt(r.guildId),c.groupName=r.groupName,c.badges=this._container.roomSession.userDataManager.getUserBadges(r.webID),c.figure=r.figure,this._container.events.dispatchEvent(c)}_Str_22312(e,t,n,i){const r=new xt(xt.BOT);r.name=i.name,r.motto=i.custom,r.webID=i.webID,r.roomIndex=t,r.userType=i.type;const s=this._container.roomEngine.getRoomObject(e,t,n);s&&(r.carryId=s.model.getValue(A.a.FIGURE_CARRY_OBJECT)),r.isRoomOwner=this._container.roomSession.isRoomOwner,r.isGuildRoom=this._container.roomSession.isGuildRoom,r.roomControllerLevel=this._container.roomSession.controllerLevel,r.isModerator=this._container.sessionDataManager.isModerator,r._Str_5990=this._container.roomSession.isRoomOwner,r.badges=[xt._Str_7492],r.figure=i.figure,this._container.events.dispatchEvent(r)}_Str_23115(e,t,n,i){const r=new Ut;r.name=i.name,r.motto=i.custom,r.id=i.webID,r.roomIndex=t,r.ownerId=i.ownerId,r.ownerName=i.ownerName,r.botSkills=i.botSkills;const s=this._container.roomEngine.getRoomObject(e,t,n);s&&(r.carryId=s.model.getValue(A.a.FIGURE_CARRY_OBJECT)),r._Str_3246=this._container.roomSession.isRoomOwner,r.roomControllerLevel=this._container.roomSession.controllerLevel,r._Str_3529=this._container.sessionDataManager.isModerator,r.badges=[xt._Str_7492],r.figure=i.figure,this._container.events.dispatchEvent(r)}_Str_9213(e){return e.isGuildRoom?e.roomControllerLevel>=L.a.GUILD_ADMIN:e.roomControllerLevel>=L.a.GUEST}_Str_23100(e){const t=(function(e,t){switch(t.allowMute){case St.a._Str_5047:return this._Str_9213(e);default:return e.roomControllerLevel>=L.a.ROOM_OWNER}}).bind(this);return this._Str_18027(e,t)}_Str_22729(e){const t=(function(e,t){switch(t.allowKick){case St.a._Str_11537:return!0;case St.a._Str_5047:return this._Str_9213(e);default:return e.roomControllerLevel>=L.a.ROOM_OWNER}}).bind(this);return this._Str_18027(e,t)}_Str_23573(e){const t=(function(e,t){switch(t.allowBan){case St.a._Str_5047:return this._Str_9213(e);default:return e.roomControllerLevel>=L.a.ROOM_OWNER}}).bind(this);return this._Str_18027(e,t)}_Str_18027(e,t){if(!this._container.roomSession._Str_7411)return!1;const n=this._container.roomSession.moderationSettings;let i=!1;return n&&(i=t(e,n)),i&&e.flatControl<L.a.ROOM_OWNER}_Str_23922(e){this._widget&&this._container.sessionDataManager.hasSecurity(5)&&this._container.connection.send(new bt.a(this._widget.furniData.id,e))}onRoomSessionPetInfoUpdateEvent(e){if(!e||!this._container||!this._container.events)return;const t=e._Str_24727;if(!t)return;const n=this._container.roomSession.userDataManager.getPetData(t.id);if(!n)return;const i=n.figure,r=new pe.a(i),s=this.getPetType(i),c=this.getPetBreed(i);const o=t.ownerId===this._container.sessionDataManager.userId,a=new Mt(s,c,n.name,t.id,r,o,t.ownerId,t.ownerName,n.roomIndex,t.rarityLevel);a.level=t.level,a.maximumLevel=t.maximumLevel,a.experience=t.experience,a.levelExperienceGoal=t.levelExperienceGoal,a.energy=t.energy,a.maximumEnergy=t.maximumEnergy,a.happyness=t.happyness,a.maximumHappyness=t.maximumHappyness,a.respect=t.respect,a._Str_2985=this._container.sessionDataManager.respectsPetLeft,a.age=t.age,a.saddle=t.saddle,a.rider=t.rider,a.breedable=t.breedable,a.fullyGrown=t.fullyGrown,a.dead=t.dead,a.rarityLevel=t.rarityLevel,a._Str_3307=t._Str_3307,a._Str_5114=!1,a.publiclyRideable=t.publiclyRideable,a.maximumTimeToLive=t.maximumTimeToLive,a.remainingTimeToLive=t.remainingTimeToLive,a.remainingGrowTime=t.remainingGrowTime,a.publiclyBreedable=t.publiclyBreedable;const l=this._container.roomSession;(o||l.isRoomOwner||this._container.sessionDataManager.isModerator||l.controllerLevel>=L.a.GUEST)&&(a._Str_5114=!0),this._container.events.dispatchEvent(a)}getPetType(e){return this.getPetFigurePart(e,0)}getPetBreed(e){return this.getPetFigurePart(e,1)}getPetFigurePart(e,t){if(!e||!e.length)return-1;const n=e.split(" ");return n.length>0?parseInt(n[t]):-1}get type(){return y.a.INFOSTAND}get messageTypes(){return[te.GET_OBJECT_INFO,te.GET_OBJECT_NAME,ne.RWUAM_SEND_FRIEND_REQUEST,ne.RWUAM_RESPECT_USER,ne.RWUAM_WHISPER_USER,ne.RWUAM_IGNORE_USER,ne.RWUAM_UNIGNORE_USER,ne.RWUAM_KICK_USER,ne.RWUAM_BAN_USER_DAY,ne.RWUAM_BAN_USER_HOUR,ne.RWUAM_BAN_USER_PERM,ne.MUTE_USER_2MIN,ne.MUTE_USER_5MIN,ne.MUTE_USER_10MIN,ne.RWUAM_GIVE_RIGHTS,ne.RWUAM_TAKE_RIGHTS,ne.RWUAM_START_TRADING,ne.RWUAM_OPEN_HOME_PAGE,ne.RWUAM_PASS_CARRY_ITEM,ne.RWUAM_GIVE_CARRY_ITEM_TO_PET,ne.RWUAM_DROP_CARRY_ITEM,Dt.RWFAM_MOVE,Dt.RWFUAM_ROTATE,Dt.RWFAM_EJECT,Dt.RWFAM_PICKUP,Dt.RWFAM_USE,Dt.RWFAM_SAVE_STUFF_DATA,ne.RWUAM_REPORT,ne.RWUAM_PICKUP_PET,ne.RWUAM_MOUNT_PET,ne.RWUAM_TOGGLE_PET_RIDING_PERMISSION,ne.RWUAM_TOGGLE_PET_BREEDING_PERMISSION,ne.RWUAM_DISMOUNT_PET,ne.RWUAM_SADDLE_OFF,ne.RWUAM_TRAIN_PET,ne.RWUAM_RESPECT_PET,ne.RWUAM_REQUEST_PET_UPDATE,At.RWVM_CHANGE_MOTTO_MESSAGE,ne.RWUAM_GIVE_LIGHT_TO_PET,ne.RWUAM_GIVE_WATER_TO_PET,ne.RWUAM_TREAT_PET,ne.RWUAM_REPORT_CFH_OTHER,ne.RWUAM_AMBASSADOR_ALERT_USER,ne.RWUAM_AMBASSADOR_KICK_USER,ne.AMBASSADOR_MUTE_USER_2MIN,ne.AMBASSADOR_MUTE_USER_10MIN,ne.AMBASSADOR_MUTE_USER_60MIN,ne.AMBASSADOR_MUTE_USER_18HOUR]}get eventTypes(){return[S.a.RSUBE_BADGES]}get container(){return this._container}set container(e){this._container&&this._container.roomSessionManager&&this._container.roomSessionManager.events.removeEventListener(wt.a.PET_INFO,this.onRoomSessionPetInfoUpdateEvent),this._container=e,this._container&&this._container.roomSessionManager&&this._container.roomSessionManager.events.addEventListener(wt.a.PET_INFO,this.onRoomSessionPetInfoUpdateEvent)}get widget(){return this._widget}set widget(e){this._widget=e}get disposed(){return this._disposed}}return e.ACTIVITY_POINTS_DISPLAY_ENABLED=!0,e})(),kt=(()=>{class e extends q.a{constructor(t,n,i){super(e.RWULUE_USER_LOCATION_UPDATE),this._userId=t,this._rectangle=n,this._Str_20775=i}get userId(){return this._userId}get rectangle(){return this._rectangle}get _Str_9337(){return this._Str_20775}}return e.RWULUE_USER_LOCATION_UPDATE="RWULUE_USER_LOCATION_UPDATE",e})(),Pt=(()=>{class e extends $.a{constructor(e,t,n){super(e),this._objectId=t,this._objectType=n}get _Str_1577(){return this._objectId}get _Str_1723(){return this._objectType}}return e.RWGOI_MESSAGE_GET_OBJECT_LOCATION="RWGOI_MESSAGE_GET_OBJECT_LOCATION",e.RWGOI_MESSAGE_GET_GAME_OBJECT_LOCATION="RWGOI_MESSAGE_GET_GAME_OBJECT_LOCATION",e})();class Nt{constructor(){this._disposed=!1,this._container=null}dispose(){this._disposed=!0,this._container=null}get disposed(){return this._disposed}get type(){return null}set container(e){this._container=e}get messageTypes(){return[Pt.RWGOI_MESSAGE_GET_OBJECT_LOCATION,Pt.RWGOI_MESSAGE_GET_GAME_OBJECT_LOCATION]}processWidgetMessage(e){if(!(e&&this._container&&e instanceof Pt))return null;const t=this._container.roomSession;switch(e.type){case Pt.RWGOI_MESSAGE_GET_OBJECT_LOCATION:{if(!t||!t.userDataManager)return null;const n=t.userDataManager.getDataByType(e._Str_1577,e._Str_1723);let i=null,r=null;if(n){i=this._container.roomEngine.getRoomObjectBoundingRectangle(t.roomId,n.roomIndex,M.a.UNIT,this._container.getFirstCanvasId()),r=this._container.roomEngine.getRoomObjectScreenLocation(t.roomId,n.roomIndex,M.a.UNIT,this._container.getFirstCanvasId());const e=this._container.getRoomViewRect();i&&r&&e&&(i.x+=e.x,i.y+=e.y,r.x+=e.x,r.y+=e.y)}return new kt(e._Str_1577,i,r)}}return null}get eventTypes(){return[]}processEvent(e){}update(){}}var Wt=n("poYt");let Kt=(()=>{class e extends $.a{constructor(){super(e.RWZTM_ZOOM_TOGGLE)}}return e.RWZTM_ZOOM_TOGGLE="RWZTM_ZOOM_TOGGLE",e})();class Ft{constructor(){this._zoomed=!1,this._communicationManager=r.a.instance.communication,this._container=null,this._widget=null,this._messages=[],this._disposed=!1,this.onRoomInfoEvent=this.onRoomInfoEvent.bind(this)}dispose(){if(!this._disposed){this._communicationManager=null,this._widget=null;for(const e of this._messages)this._container.connection.removeMessageEvent(e);this._container=null,this._messages=[],this._disposed=!0}}update(){}processWidgetMessage(e){return e instanceof Kt&&(this._container.roomEngine.events.dispatchEvent(new h.a(this._container.roomEngine.activeRoomId,this._zoomed?1:0,!1)),this._zoomed=!this._zoomed),null}processEvent(e){}onRoomInfoEvent(e){if(!e)return;const t=e.getParser();if(!t)return;const n=t.data;if(n&&t.roomEnter){this._widget.updateRoomInfo(n);const e=n.showOwner?r.a.instance.getLocalization("room.tool.room.owner.prefix")+" "+n.ownerName:r.a.instance.getLocalization("room.tool.public.room");this._widget.updateRoomTools(n.roomName,e,n.tags),this._widget.addVisitedRoom(n),this._widget.updateRoomCurrentIndex(n.roomId)}}rateRoom(){this._container&&this._container.connection.send(new Wt.a(1))}get disposed(){return this._disposed}get type(){return y.a.ROOM_TOOLS}get widget(){return this._widget}set widget(e){this._widget=e}get container(){return this._container}set container(e){if(this._container=e,this._container){this._messages=[new dt.a(this.onRoomInfoEvent)];for(const t of this._messages)e.connection.addMessageEvent(t)}}get messageTypes(){return[]}get eventTypes(){return[]}}class Vt{constructor(){this._isDisposed=!1,this._container=null}dispose(){this._isDisposed=!0,this.container=null}processWidgetMessage(e){if(!e)return null;switch(e.type){case ue.RWRWM_USER_CHOOSER:this.processUserChooser();break;case te.SELECT_OBJECT:this.selectUnit(e)}return null}selectUnit(e){null!=e&&e.category==M.a.UNIT&&this._container.roomEngine.selectRoomObject(this._container.roomSession.roomId,e.id,e.category)}processUserChooser(){if(null==this._container||null==this._container.roomSession||null==this._container.roomEngine||null==this._container.roomSession.userDataManager)return;const e=this._container.roomSession.roomId,t=M.a.UNIT,n=[],i=this._container.roomEngine.getRoomObjectCount(e,t);for(let r=0;r<i;r++){const i=this._container.roomEngine.getRoomObjectByIndex(e,r,t);if(null==i)continue;const s=this._container.roomSession.userDataManager.getUserDataByIndex(i.id);null!=s&&n.push(new Pe(s.roomIndex,t,s.name))}n.sort(ke("name")),this._container.events.dispatchEvent(new Ne(Ne.RWCCE_USER_CHOOSER_CONTENT,n))}processEvent(e){}update(){}get disposed(){return this._isDisposed}get type(){return y.a.USER_CHOOSER}set container(e){this._container=e}get messageTypes(){return[ue.RWRWM_USER_CHOOSER,te.SELECT_OBJECT]}get eventTypes(){return[]}}var qt=n("l1qq"),Ht=n("G+4o"),Bt=n("PVU2"),Gt=n("cSuP"),Zt=n("ZpLZ"),Xt=n("WnqX"),jt=n("2ERw");const Yt=["roomCanvas"],zt=["widgetContainer"];function $t(e,t){}let Qt=(()=>{class e{constructor(e,t,n,i,r,s,c,o){this._notificationService=e,this._wiredService=t,this._friendService=n,this._chatHistoryService=i,this._componentFactoryResolver=r,this._modToolsService=s,this._settingsService=c,this._ngZone=o,this._events=new R.a,this._handlers=[],this._widgets=new Map,this._widgetHandlerMessageMap=new Map,this._widgetHandlerEventMap=new Map,this._roomColorAdjustor=null,this._roomBackground=null,this._roomBackgroundColor=0,this._roomColorizerColor=0,this._roomScale=1,this._resizeTimer=null,this._didMouseMove=!1,this._lastClick=0,this._clickCount=0,this._lastMouseMove=0,this._isMouseMove=!1,this._scrollCount=0,this._lastScrollTime=0,this.processEvent=this.processEvent.bind(this)}ngOnDestroy(){this.endRoom(),this._events.dispose()}get floorPlanVisible(){return this._settingsService.floorPlanVisible}prepareRoom(e){if(!e)return;const t=this.getFirstCanvasId(),n=r.a.instance.roomEngine.getRoomInstanceDisplay(e.roomId,t,r.a.instance.width,r.a.instance.height,W.a.SCALE_ZOOMED_IN);if(!n)return;const i=r.a.instance.roomEngine.getRoomInstanceGeometry(e.roomId,t);if(i){let t=((r.a.instance.roomEngine.getRoomInstanceVariable(e.roomId,D.a.ROOM_MIN_X)||0)+(r.a.instance.roomEngine.getRoomInstanceVariable(e.roomId,D.a.ROOM_MAX_X)||0))/2,n=((r.a.instance.roomEngine.getRoomInstanceVariable(e.roomId,D.a.ROOM_MIN_Y)||0)+(r.a.instance.roomEngine.getRoomInstanceVariable(e.roomId,D.a.ROOM_MAX_Y)||0))/2;const s=20;t+=s-1,n+=s-1;const c=Math.sqrt(s*s+s*s)*Math.tan(30/180*Math.PI);i.location=new K.a(t,n,c)}const s=r.a.instance.stage;s&&(s.addChild(n),this._roomSession=e,this.insertCanvas(),this.onWindowResizeEvent(null),r.a.instance.ticker.add(this.update,this),this._friendService.events.addEventListener(V.a.ACCEPTED,this.processEvent),this._friendService.events.addEventListener(V.a.DECLINED,this.processEvent))}endRoom(){if(this._roomSession){this._friendService.events.removeEventListener(V.a.ACCEPTED,this.processEvent),this._friendService.events.removeEventListener(V.a.DECLINED,this.processEvent),r.a.instance.ticker.remove(this.update,this),this._resizeTimer&&(clearTimeout(this._resizeTimer),this._resizeTimer=null);for(const e of this._widgets.values())e&&(e.instance&&e.instance.dispose(),this._ngZone.run(()=>e.destroy()));for(const e of this._handlers)e&&e.dispose();this._roomColorAdjustor=null,this._roomBackground=null,this._roomBackgroundColor=0,this._roomColorizerColor=0,this._roomScale=1,e.COLOR_ADJUSTMENT.red=1,e.COLOR_ADJUSTMENT.green=1,e.COLOR_ADJUSTMENT.blue=1,this._handlers=[],this._widgets.clear(),this._widgetHandlerMessageMap.clear(),this._widgetHandlerEventMap.clear(),this._events.removeAllListeners(),this._roomSession=null,this.removeCanvas(),O.a.call("logDebug","Navigator: exiting room")}}insertCanvas(){const e=r.a.instance.renderer.view;e&&(e.onclick=this.onMouseEvent.bind(this),e.onmousemove=this.onMouseEvent.bind(this),e.onmousedown=this.onMouseEvent.bind(this),e.onmouseup=this.onMouseEvent.bind(this),e.ontouchstart=this.onTouchEvent.bind(this),e.ontouchmove=this.onTouchEvent.bind(this),e.ontouchend=this.onTouchEvent.bind(this),e.ontouchcancel=this.onTouchEvent.bind(this),window.onresize=this.onWindowResizeEvent.bind(this),window.onmousewheel=this.onWindowMouseWheelEvent.bind(this),this.roomCanvasReference.nativeElement.appendChild(e))}removeCanvas(){const e=r.a.instance.renderer.view;e&&(e.onclick=null,e.onmousemove=null,e.onmousedown=null,e.onmouseup=null,e.ontouchstart=null,e.ontouchmove=null,e.ontouchend=null,e.ontouchcancel=null,window.onresize=null,window.onmousewheel=null,e.parentElement&&e.parentElement.removeChild(e))}onMouseEvent(e){if(!e||!this._roomSession)return;const t=e.clientX,n=e.clientY;let i=e.type;switch(i===k.a.MOUSE_CLICK&&(this._lastClick&&(this._clickCount=1,this._lastClick>=Date.now()-300&&this._clickCount++),this._lastClick=Date.now(),2===this._clickCount&&(this._didMouseMove||(i=k.a.DOUBLE_CLICK),this._clickCount=0,this._lastClick=null)),i){case k.a.MOUSE_CLICK:case k.a.DOUBLE_CLICK:break;case k.a.MOUSE_MOVE:this._didMouseMove=!0;break;case k.a.MOUSE_DOWN:this._didMouseMove=!1;break;case k.a.MOUSE_UP:break;default:return}r.a.instance.roomEngine.setActiveRoomId(this._roomSession.roomId),r.a.instance.roomEngine.dispatchMouseEvent(this.getFirstCanvasId(),t,n,i,e.altKey,e.ctrlKey||e.metaKey,e.shiftKey,!1)}onTouchEvent(e){if(!e||!this._roomSession)return;let t=e.type;switch(t!==P.a.TOUCH_END||this._didMouseMove||(t=k.a.MOUSE_CLICK,this._lastClick&&(this._clickCount=1,this._lastClick>=Date.now()-300&&this._clickCount++),this._lastClick=Date.now(),2===this._clickCount&&(t=k.a.DOUBLE_CLICK,this._clickCount=0,this._lastClick=null)),t){case k.a.MOUSE_CLICK:case k.a.DOUBLE_CLICK:break;case P.a.TOUCH_START:t=k.a.MOUSE_DOWN,this._didMouseMove=!1;break;case P.a.TOUCH_MOVE:t=k.a.MOUSE_MOVE,this._didMouseMove=!0;break;default:return}let n=0,i=0;e.touches[0]?(n=e.touches[0].clientX,i=e.touches[0].clientY):e.changedTouches[0]&&(n=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY),r.a.instance.roomEngine.setActiveRoomId(this._roomSession.roomId),r.a.instance.roomEngine.dispatchMouseEvent(this.getFirstCanvasId(),n,i,t,e.altKey,e.ctrlKey||e.metaKey,e.shiftKey,!1)}onWindowResizeEvent(e){this._roomSession&&(this._resizeTimer&&clearTimeout(this._resizeTimer),this._resizeTimer=setTimeout(()=>{r.a.instance.renderer.resize(window.innerWidth,window.innerHeight),r.a.instance.roomEngine.initializeRoomInstanceRenderingCanvas(this._roomSession.roomId,this.getFirstCanvasId(),r.a.instance.width,r.a.instance.height),this._events.dispatchEvent(new G(G.SIZE_CHANGED,this.getRoomViewRect())),this.setRoomBackground(),r.a.instance.render()},1))}onWindowMouseWheelEvent(e){if(!e||!this._roomSession)return;if(e.target!==r.a.instance.renderer.view)return;const t=-1/40*(e.wheelDeltaY||e.deltaY)<0?1:-1;if(this._lastScrollTime&&(this._lastScrollTime<Date.now()-300&&(this._scrollCount=0),this._scrollCount++),this._lastScrollTime=Date.now(),15!==this._scrollCount)return;this._scrollCount=0,this._lastScrollTime=null;let n=this._roomScale;switch(t){case 1:n>=.5&&(n+=.5);break;case-1:n<=1?n=.5:n-=.5}this._roomScale=n,r.a.instance.roomEngine.events.dispatchEvent(new h.a(this._roomSession.roomId,n,!1))}update(){for(const e of this._widgets.values())e.instance.widgetHandler&&e.instance.widgetHandler.update()}createWidget(e,t){if(this._widgets.get(e))return;let n=null,i=!1;switch(e){case y.a.CHAT_WIDGET:{i=!0;const e=new Se(this._chatHistoryService);e.connection=r.a.instance.communication.connection,n=e;break}case y.a.CHAT_INPUT_WIDGET:i=!0,n=new he;break;case y.a.AVATAR_INFO:n=new ie;break;case y.a.INFOSTAND:n=new Lt;break;case y.a.LOCATION_WIDGET:n=new Nt;break;case y.a.INTERNAL_LINK:n=new rt;break;case y.a.ROOM_LINK:n=new ht;break;case y.a.ROOM_DIMMER:n=new tt;break;case y.a.CUSTOM_STACK_HEIGHT:n=new je;break;case y.a.FURNI_CHOOSER:n=new We;break;case y.a.USER_CHOOSER:n=new Vt;break;case y.a.FURNI_STICKIE_WIDGET:n=new ft;break;case y.a.DOORBELL:n=new we;break;case y.a.FURNI_TROPHY_WIDGET:n=new _t;break;case y.a.FURNI_CREDIT_WIDGET:n=new Ze;break;case y.a.FURNITURE_CONTEXT_MENU:n=new Ve;break;case y.a.MANNEQUIN:n=new st;break;case y.a.ROOM_BACKGROUND_COLOR:n=new Ke;break;case y.a.FRIEND_FURNI_CONFIRM:n=new Me;break;case y.a.FRIEND_FURNI_ENGRAVING:n=new xe;break;case y.a.ROOM_TOOLS:n=new Ft;break;case y.a.FURNI_PRESENT_WIDGET:n=new lt;break;case y.a.FRIEND_REQUEST:n=new Le;break;case y.a.HIGH_SCORE_DISPLAY:n=new it}if(n){const i=n.messageTypes;if(i&&i.length)for(const e of i){if(!e)continue;let t=this._widgetHandlerMessageMap.get(e);t||(t=[],this._widgetHandlerMessageMap.set(e,t)),t.push(n)}const r=n.eventTypes;if(r.push(l.a.OPEN_WIDGET,l.a.CLOSE_WIDGET),r&&r.length)for(const e of r){if(!e)continue;let t=this._widgetHandlerEventMap.get(e);t||(t=[],this._widgetHandlerEventMap.set(e,t)),t.push(n)}if(this._handlers.push(n),t){let i=null,r=null;if(this._ngZone.run(()=>{const e=this._componentFactoryResolver.resolveComponentFactory(t);i=this.widgetContainer.createComponent(e),r=i.instance}),!r)return;r.widgetHandler=n,r.messageListener=this,r.registerUpdateEvents(this._events),this._widgets.set(e,i)}n.container=this}i&&this._events.dispatchEvent(new G(G.SIZE_CHANGED,this.getRoomViewRect()))}processEvent(e){if(!e||!this._widgetHandlerEventMap)return;const t=this._widgetHandlerEventMap.get(e.type);if(!t)return;let n=!1;for(const i of t)i&&(n=!0,e.type!==l.a.OPEN_WIDGET&&e.type!==l.a.CLOSE_WIDGET||e instanceof l.a&&(n=i.type===e.widget),n&&i.processEvent(e))}processWidgetMessage(e){if(!e||!e.type)return null;const t=this._widgetHandlerMessageMap.get(e.type);if(!t||!t.length)return null;for(const n of t){if(!n)continue;const t=n.processWidgetMessage(e);if(t)return t}return null}onRoomEngineEvent(e){if(e)switch(e.type){case o.a.NORMAL_MODE:return void this._events.dispatchEvent(new H(H.RWREUE_NORMAL_MODE,e.roomId));case o.a.GAME_MODE:return void this._events.dispatchEvent(new H(H.RWREUE_GAME_MODE,e.roomId))}}onRoomEngineObjectEvent(e){if(!e)return;const t=e.objectId,n=e.category;let i=null;switch(e.type){case a.a.SELECTED:if(this.isFurnitureSelectionDisabled(e)||(i=new B(B.OBJECT_SELECTED,t,n,e.roomId)),n==M.a.UNIT){const e=this._roomSession.userDataManager.getUserDataByIndex(t);e&&e.type==x.a.USER&&this._modToolsService.selectUser(e.webID,e.name)}break;case a.a.DESELECTED:i=new B(B.OBJECT_DESELECTED,t,n,e.roomId);break;case a.a.ADDED:{let r=null;switch(n){case M.a.FLOOR:case M.a.WALL:r=B.FURNI_ADDED;break;case M.a.UNIT:r=B.USER_ADDED}r&&(i=new B(r,t,n,e.roomId));break}case a.a.REMOVED:{let r=null;switch(n){case M.a.FLOOR:case M.a.WALL:r=B.FURNI_REMOVED;break;case M.a.UNIT:r=B.USER_REMOVED}r&&(i=new B(r,t,n,e.roomId));break}case a.a.MOUSE_ENTER:i=new B(B.OBJECT_ROLL_OVER,t,n,e.roomId);break;case a.a.MOUSE_LEAVE:i=new B(B.OBJECT_ROLL_OUT,t,n,e.roomId);break;case a.a.REQUEST_MOVE:this.checkFurniManipulationRights(e.roomId,t,n)&&r.a.instance.roomEngine.processRoomObjectOperation(t,n,U.a.OBJECT_MOVE);break;case a.a.REQUEST_ROTATE:this.checkFurniManipulationRights(e.roomId,t,n)&&r.a.instance.roomEngine.processRoomObjectOperation(t,n,U.a.OBJECT_ROTATE_POSITIVE);break;case l.a.REQUEST_STICKIE:this.processWidgetMessage(new Ge(Ge.REQUEST_STICKIE,t,n,e.roomId));break;case l.a.REQUEST_TROPHY:this.processWidgetMessage(new Ge(Ge.REQUEST_TROPHY,t,n,e.roomId));break;case l.a.REQUEST_CREDITFURNI:this.processWidgetMessage(new Ge(Ge.REQUEST_CREDITFURNI,t,n,e.roomId));break;case l.a.REQUEST_DIMMER:this.processWidgetMessage(new Ge(Ge.REQUEST_DIMMER,t,n,e.roomId));break;case l.a.REQUEST_PRESENT:this.processWidgetMessage(new Ge(Ge.REQUEST_PRESENT,t,n,e.roomId));break;case l.a.OPEN_WIDGET:case l.a.CLOSE_WIDGET:case l.a.OPEN_FURNI_CONTEXT_MENU:case l.a.CLOSE_FURNI_CONTEXT_MENU:case l.a.REMOVE_DIMMER:case l.a.REQUEST_MANNEQUIN:case l.a.REQUEST_BACKGROUND_COLOR:case l.a.REQUEST_FRIEND_FURNITURE_ENGRAVING:case l.a.REQUEST_HIGH_SCORE_DISPLAY:case l.a.REQUEST_HIDE_HIGH_SCORE_DISPLAY:case l.a.REQUEST_INTERNAL_LINK:case l.a.REQUEST_ROOM_LINK:this.processEvent(e)}if(i){let e=!0;i instanceof B&&(e=!w.a.isRoomPreviewerId(i.roomId)),e&&this._events.dispatchEvent(i)}}isFurnitureSelectionDisabled(e){let t=!1;const n=r.a.instance.roomEngine.getRoomObject(e.roomId,e.objectId,e.category);return n&&1===n.model.getValue(A.a.FURNITURE_SELECTION_DISABLED)&&(t=!0,r.a.instance.sessionDataManager.isModerator&&(t=!1)),t}checkFurniManipulationRights(e,t,n){return this._roomSession.controllerLevel>=L.a.GUEST||r.a.instance.sessionDataManager.isModerator||this.isOwnerOfFurniture(r.a.instance.roomEngine.getRoomObject(e,t,n))}isOwnerOfFurniture(e){return!(!e||!e.model)&&r.a.instance.sessionDataManager.userId===e.model.getValue(A.a.FURNITURE_OWNER_ID)}_Str_2485(e){if(!e||!this._widgetHandlerEventMap)return;const t=this._widgetHandlerEventMap.get(e.type);if(t&&t.length){let n=!0;for(const i of t)(e.type===l.a.OPEN_WIDGET||l.a.CLOSE_WIDGET)&&e instanceof l.a&&(n=i.type===e.widget),n&&i.processEvent(e)}}getRoomBackground(){if(this._roomBackground)return this._roomBackground;const e=this.roomEngine.getRoomInstanceRenderingCanvas(this.roomSession.roomId,this.getFirstCanvasId());if(!e)return null;const t=e.master,n=new F.Sprite(F.Texture.WHITE);return t.addChildAt(n,0),this._roomBackground=n,this._roomBackground}getRoomColorizer(){if(this._roomColorAdjustor)return this._roomColorAdjustor;const t=this.roomEngine.getRoomInstanceRenderingCanvas(this.roomSession.roomId,this.getFirstCanvasId());if(!t)return null;const n=t.master;return n?(this._roomColorAdjustor=e.COLOR_ADJUSTMENT,n.filters=[this._roomColorAdjustor],this._roomColorAdjustor):null}setRoomBackgroundColor(e,t,n){this._roomBackgroundColor=N.a._Str_13949(((255&e)<<16)+((255&t)<<8)+(255&n));const i=this.getRoomBackground();i&&(e||t||n?(i.visible=!0,this.setRoomBackground()):i.visible=!1)}setRoomColorizerColor(e,t){this._roomColorizerColor=N.a._Str_13949((16776960&N.a._Str_22130(e))+t),this.setRoomColorizer()}setRoomBackground(){const e=this.getRoomBackground();e&&(e.tint=this._roomBackgroundColor,e.width=r.a.instance.width,e.height=r.a.instance.height)}setRoomColorizer(){const e=this.getRoomColorizer();if(!e)return;const t=this._roomColorizerColor>>8&255,n=255&this._roomColorizerColor;e.red=(this._roomColorizerColor>>16&255)/255,e.green=t/255,e.blue=n/255}getFirstCanvasId(){return 1}getRoomViewRect(){const e=this.roomCanvasReference.nativeElement.getBoundingClientRect();return new F.Rectangle(e.x||0,e.y||0,e.width||0,e.height||0)}get events(){return this._events}get connection(){return r.a.instance.communication.connection}get roomEngine(){return r.a.instance.roomEngine}get avatarRenderManager(){return r.a.instance.avatar}get roomSessionManager(){return r.a.instance.roomSessionManager}get sessionDataManager(){return r.a.instance.sessionDataManager}get roomSession(){return this._roomSession}get notificationService(){return this._notificationService}get wiredService(){return this._wiredService}get friendService(){return this._friendService}get settingsService(){return this._settingsService}}return e.COLOR_ADJUSTMENT=new T.a,e.\u0275fac=function(t){return new(t||e)(C.Yb(qt.a),C.Yb(Ht.a),C.Yb(Bt.a),C.Yb(Gt.a),C.Yb(C.m),C.Yb(Zt.a),C.Yb(Xt.a),C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-room-component"]],viewQuery:function(e,t){if(1&e&&(C.cd(Yt,1),C.cd(zt,1,C.Z)),2&e){let e;C.Hc(e=C.oc())&&(t.roomCanvasReference=e.first),C.Hc(e=C.oc())&&(t.widgetContainer=e.first)}},decls:6,vars:1,consts:[[1,"nitro-room-component"],[3,"visible"],[1,"room-view"],["roomCanvas",""],["widgetContainer",""]],template:function(e,t){1&e&&(C.dc(0,"div",0),C.Zb(1,"nitro-floorplan-main-component",1),C.Zb(2,"div",2,3),C.Uc(4,$t,0,0,"ng-template",null,4,C.Vc),C.cc()),2&e&&(C.Kb(1),C.yc("visible",t.floorPlanVisible))},directives:[jt.a],encapsulation:2}),e})();var Jt=n("HgpQ"),en=n("mros"),tn=n("cVcz"),nn=n("BUgV");class rn{constructor(){this._isIgnored=!1,this._canTrade=!1,this._canTradeReason=0,this._canBeKicked=!1,this._canBeBanned=!1,this._canBeMuted=!1,this._canBeAskedAsFriend=!1,this._amIOwner=!1,this._amIAnyRoomController=!1,this._respectLeft=0,this._isOwnUser=!1,this._allowNameChange=!1,this._isGuildRoom=!1,this._carryItemType=0,this._myRoomControllerLevel=0,this._targetRoomControllerLevel=0,this._isFriend=!1,this._isAmbassador=!1}get _Str_3655(){return this._isIgnored}set _Str_3655(e){this._isIgnored=e}get _Str_5751(){return this._canTrade}set _Str_5751(e){this._canTrade=e}get _Str_6622(){return this._canTradeReason}set _Str_6622(e){this._canTradeReason=e}get _Str_5990(){return this._canBeKicked}set _Str_5990(e){this._canBeKicked=e}get _Str_6701(){return this._canBeBanned}set _Str_6701(e){this._canBeBanned=e}get _Str_6394(){return this._canBeMuted}set _Str_6394(e){this._canBeMuted=e}get canBeAskedForAFriend(){return this._canBeAskedAsFriend}set canBeAskedForAFriend(e){this._canBeAskedAsFriend=e}get _Str_3246(){return this._amIOwner}set _Str_3246(e){this._amIOwner=e}get _Str_3529(){return this._amIAnyRoomController}set _Str_3529(e){this._amIAnyRoomController=e}get _Str_3577(){return this._respectLeft}set _Str_3577(e){this._respectLeft=e}get _Str_11453(){return this._isOwnUser}set _Str_11453(e){this._isOwnUser=e}get allowNameChange(){return this._allowNameChange}set allowNameChange(e){this._allowNameChange=e}get _Str_3672(){return this._isGuildRoom}set _Str_3672(e){this._isGuildRoom=e}get _Str_8826(){return this._carryItemType}set _Str_8826(e){this._carryItemType=e}get roomControllerLevel(){return this._myRoomControllerLevel}set roomControllerLevel(e){this._myRoomControllerLevel=e}get _Str_5599(){return this._targetRoomControllerLevel}set _Str_5599(e){this._targetRoomControllerLevel=e}get isFriend(){return this._isFriend}get _Str_4050(){return this._isAmbassador}populate(e){this._amIAnyRoomController=e.isModerator,this._myRoomControllerLevel=e.roomControllerLevel,this._amIOwner=e.isRoomOwner,this._canBeAskedAsFriend=e.canBeAskedForAFriend,this._canBeKicked=e._Str_5990,this._canBeBanned=e._Str_6701,this._canBeMuted=e._Str_6394,this._canTrade=e.canTrade,this._canTradeReason=e._Str_6622,this._isIgnored=e.isIgnored,this._respectLeft=e.respectLeft,this._isOwnUser=e.type===xt.OWN_USER,this._allowNameChange=e._Str_4330,this._isGuildRoom=e.isGuildRoom,this._targetRoomControllerLevel=e.flatControl,this._carryItemType=e.carryId,this._isFriend=e.isFriend,this._isAmbassador=e.isAmbassador}}class sn{constructor(){this.age=0,this.rarityLevel=0,this._Str_5114=!1,this.energy=0,this.maximumEnergy=0,this.experience=0,this.levelExperienceGoal=0,this.id=0,this._Str_5175=!1,this.level=0,this.maximumLevel=0,this.name="",this.happyness=0,this.maximumHappyness=0,this.ownerId=0,this.ownerName="",this._Str_14767=0,this.respect=0,this._Str_2985=0,this._Str_4355=0,this.saddle=!1,this.rider=!1,this.breedable=!1,this.fullyGrown=!1,this.dead=!1,this.publiclyRideable=0,this.maximumTimeToLive=0,this.remainingTimeToLive=0,this.remainingGrowTime=0,this.publiclyBreedable=!1,this._Str_3307=[]}populate(e){this.age=e.age,this.rarityLevel=e.rarityLevel,this._Str_5114=e._Str_5114,this.energy=e.energy,this.maximumEnergy=e.maximumEnergy,this.experience=e.experience,this.levelExperienceGoal=e.levelExperienceGoal,this.id=e.id,this._Str_5175=e._Str_5175,this.level=e.level,this.maximumLevel=e.maximumLevel,this.name=e.name,this.happyness=e.happyness,this.maximumHappyness=e.maximumHappyness,this.ownerId=e.ownerId,this.ownerName=e.ownerName,this._Str_14767=e._Str_14767,this.respect=e.respect,this._Str_2985=e._Str_2985,this._Str_4355=e._Str_4355,this.saddle=e.saddle,this.rider=e.rider,this.breedable=e.breedable,this.dead=e.dead,this.fullyGrown=e.fullyGrown,this._Str_3307=e._Str_3307,this.publiclyRideable=e.publiclyRideable,this.maximumTimeToLive=e.maximumTimeToLive,this.remainingTimeToLive=e.remainingTimeToLive,this.remainingGrowTime=e.remainingGrowTime,this.publiclyBreedable=e.publiclyBreedable}}class cn{constructor(){this._id=-1,this._isIgnored=!1,this._amIOwner=!1,this._amIAnyRoomController=!1,this._carryItemType=0}get id(){return this._id}set id(e){this._id=e}get _Str_2707(){return this._roomIndex}set _Str_2707(e){this._roomIndex=e}get _Str_3655(){return this._isIgnored}set _Str_3655(e){this._isIgnored=e}get _Str_3246(){return this._amIOwner}set _Str_3246(e){this._amIOwner=e}get _Str_3529(){return this._amIAnyRoomController}set _Str_3529(e){this._amIAnyRoomController=e}get _Str_8826(){return this._carryItemType}set _Str_8826(e){this._carryItemType=e}get _Str_2899(){return this._botSkills}set _Str_2899(e){this._botSkills=e}get _Str_10833(){return this._botSkillsWithCommands}set _Str_10833(e){this._botSkillsWithCommands=e}get name(){return this._name}populate(e){e.id!=this.id&&(this._botSkillsWithCommands=new Array(0)),this.id=e.id,this._Str_2707=e.roomIndex,this._Str_3246=e._Str_3246,this._Str_3529=e._Str_3529,this._Str_8826=e.carryId,this._Str_2899=e.botSkills,this._name=e.name}_Str_19891(e){this._botSkills=[];for(const t of e)this._Str_2899.push(t);this._botSkillsWithCommands=e.concat()}}var on=n("WaWB");let an=(()=>{class e{constructor(){this.parent=null,this.componentRef=null,this.activeView=null,this.stack=new on.a(e.LOCATION_STACK_SIZE),this.opacity=0,this.currentDeltaY=-1e6,this.willFade=!1,this.firstFadeStarted=!1,this.fadeAfterDelay=!0,this.fadeLength=500,this.fadeTime=0,this.fadeStartDelay=3e3,this.fadingOut=!1,this.fadeStartTimer=null}completeSetup(){this.firstFadeStarted=!1,this.fadeLength=75,this.fadingOut=!1,this.opacity=1,this.onTimerComplete=this.onTimerComplete.bind(this),this.fadeAfterDelay&&this.willFade&&(this.fadeStartTimer&&(clearTimeout(this.fadeStartTimer),this.fadeStartTimer=null),this.fadeStartTimer=setTimeout(this.onTimerComplete,this.fadeStartDelay))}ngOnDestroy(){this.fadeStartTimer&&(clearTimeout(this.fadeStartTimer),this.fadeStartTimer=null)}update(t,n,i){if(!t)return;if(this.fadingOut?(this.fadeTime=this.fadeTime+i,this.opacity=(1-this.fadeTime/this.fadeLength)*this.maximumOpacity):this.opacity=this.maximumOpacity,this.opacity<=0)return void this.parent.removeView(this.componentRef,!1);const s=this.getOffset(t);this.stack._Str_22775(n.y-t.top);let c=this.stack._Str_25797();c<this.currentDeltaY-e.BUBBLE_DROP_SPEED&&(c=this.currentDeltaY-e.BUBBLE_DROP_SPEED);const o=n.y-c;this.currentDeltaY=c;let a=Math.round(n.x-this.activeViewElement.offsetWidth/2),l=Math.round(o+s)-5;l<=0&&(l=e.SPACE_AROUND_EDGES),l>=r.a.instance.height-this.activeViewElement.offsetHeight&&(l=r.a.instance.height-this.activeViewElement.offsetHeight-e.SPACE_AROUND_EDGES),a>=r.a.instance.width-this.activeViewElement.offsetWidth&&(a=r.a.instance.width-this.activeViewElement.offsetWidth-e.SPACE_AROUND_EDGES),a<0&&(a=0+e.BUBBLE_DROP_SPEED),this.activeViewElement.style.left=a+"px",this.activeViewElement.style.top=l+"px",this.activeViewElement.style.opacity=this.opacity.toString()}hide(e){this.activeView&&(!this.firstFadeStarted&&e?(this.firstFadeStarted=!0,this.fadeStartTimer&&(clearTimeout(this.fadeStartTimer),this.fadeStartTimer=null),this.fadeStartTimer=setTimeout(this.onTimerComplete,this.fadeStartDelay)):this.parent.removeView(this.componentRef,!1))}onTimerComplete(){this.fadingOut=!0,this.hide(!0)}getOffset(e){let t=-this.activeViewElement.offsetHeight;return t-=4,t}get maximumOpacity(){return 1}get activeViewElement(){return this.activeView&&this.activeView.nativeElement||null}}return e.LOCATION_STACK_SIZE=25,e.BUBBLE_DROP_SPEED=3,e.SPACE_AROUND_EDGES=5,e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=C.Tb({type:e}),e})();class ln extends an{constructor(){super(...arguments),this.userId=-1,this.userName="",this.userType=-1,this.roomIndex=-1}static extendedSetup(e,t,n,i,r){e.userId=t,e.userName=n,e.userType=i,e.roomIndex=r,e.completeSetup()}getOffset(e){let t=-this.activeViewElement.offsetHeight;return this.userType===x.a.USER||this.userType===x.a.BOT||this.userType===x.a.RENTABLE_BOT?t+=e.height>50?25:0:t-=4,t}}var dn=n("ofXK"),un=n("0DQ5");const hn=["activeView"];function gn(e,t){if(1&e&&(C.dc(0,"div",5),C.dc(1,"p",6),C.Wc(2),C.cc(),C.cc()),2&e){const e=C.qc();C.Kb(2),C.Xc(e.userName)}}function mn(e,t){if(1&e){const e=C.ec();C.dc(0,"li",15),C.nc("click",function(){C.Lc(e);const t=C.qc(2).$implicit;return C.qc(4).processAction(t.name)}),C.Wc(1),C.rc(2,"translate"),C.cc()}if(2&e){const e=C.qc(2).$implicit,t=C.qc(4);C.Kb(1),C.Xc(C.uc(2,1,e.localization,"count",t.avatarData._Str_3577))}}function fn(e,t){if(1&e){const e=C.ec();C.dc(0,"li",15),C.nc("click",function(){C.Lc(e);const t=C.qc(2).$implicit;return C.qc(4).processAction(t.name)}),C.Wc(1),C.rc(2,"translate"),C.cc()}if(2&e){const e=C.qc(2).$implicit;C.Kb(1),C.Xc(C.sc(2,1,e.localization))}}function pn(e,t){if(1&e&&(C.bc(0,12),C.Uc(1,mn,3,5,"li",13),C.Uc(2,fn,3,3,"li",14),C.ac()),2&e){const e=C.qc().$implicit;C.yc("ngSwitch",e.name),C.Kb(1),C.yc("ngSwitchCase","respect")}}function _n(e,t){if(1&e&&(C.bc(0),C.Uc(1,pn,3,2,"ng-container",11),C.ac()),2&e){const e=t.$implicit;C.Kb(1),C.yc("ngIf",e.visible)}}function bn(e,t){if(1&e&&(C.dc(0,"ul",10),C.Uc(1,_n,2,1,"ng-container",8),C.cc()),2&e){const e=C.qc().$implicit;C.Kb(1),C.yc("ngForOf",e.items)}}function vn(e,t){if(1&e&&(C.bc(0),C.Uc(1,bn,2,1,"ul",9),C.ac()),2&e){const e=t.$implicit,n=C.qc(2);C.Kb(1),C.yc("ngIf",n.mode===e.mode)}}function En(e,t){if(1&e&&(C.dc(0,"div",7),C.Uc(1,vn,2,1,"ng-container",8),C.cc()),2&e){const e=C.qc();C.Kb(1),C.yc("ngForOf",e.menu)}}let Sn=(()=>{class e extends ln{constructor(e){super(),this._settingsService=e,this.avatarData=null,this.mode=0,this.menu=[]}static setup(e,t,n,i,r,s){e.avatarData=s,ln.extendedSetup(e,t,n,i,r),e.setupButtons()}setupButtons(){let t=!1;const n=this.widget.handler,i=n.container.roomEngine.getRoomObject(n.roomSession.roomId,n.container.roomSession.ownRoomIndex,M.a.UNIT);if(i){const e=i.model.getValue(A.a.FIGURE_CARRY_OBJECT);e>0&&e<999999&&(t=!0)}this.menu=[{mode:e.MODE_NORMAL,items:[{name:"friend",localization:"infostand.button.friend",visible:this.avatarData.canBeAskedForAFriend},{name:"trade",localization:"infostand.button.trade",visible:!0},{name:"whisper",localization:"infostand.button.whisper",visible:!0},{name:"respect",localization:"infostand.button.respect",visible:this.avatarData._Str_3577>0},{name:"ignore",localization:"infostand.button.ignore",visible:!this.avatarData._Str_3655},{name:"unignore",localization:"infostand.button.unignore",visible:this.avatarData._Str_3655},{name:"report",localization:"infostand.button.report",visible:!0},{name:"moderate",localization:"infostand.link.moderate",visible:this.moderateMenuHasContent()},{name:"ambassador",localization:"infostand.link.ambassador",visible:this.ambassadorMenuHasContent()},{name:"pass_handitem",localization:"avatar.widget.pass_hand_item",visible:t}]},{mode:e.MODE_MODERATE,items:[{name:"kick",localization:"infostand.button.kick",visible:!0},{name:"mute",localization:"infostand.button.mute",visible:!0},{name:"ban",localization:"infostand.button.ban",visible:!0},{name:"give_rights",localization:"infostand.button.giverights",visible:this.isShowGiveRights()},{name:"remove_rights",localization:"infostand.button.removerights",visible:this.isShowRemoveRights()},{name:"back",localization:"generic.back",visible:!0}]},{mode:e.MODE_MODERATE_BAN,items:[{name:"ban_hour",localization:"infostand.button.ban_hour",visible:!0},{name:"ban_day",localization:"infostand.button.ban_day",visible:!0},{name:"ban_perm",localization:"infostand.button.ban_perm",visible:!0},{name:"back_moderate",localization:"generic.back",visible:!0}]},{mode:e.MODE_MODERATE_MUTE,items:[{name:"mute_2min",localization:"infostand.button.mute_2min",visible:!0},{name:"mute_5min",localization:"infostand.button.mute_5min",visible:!0},{name:"mute_10min",localization:"infostand.button.mute_10min",visible:!0},{name:"back_moderate",localization:"generic.back",visible:!0}]},{mode:e.MODE_AMBASSADOR,items:[{name:"ambassador_alert",localization:"infostand.button.alert",visible:!0},{name:"ambassador_kick",localization:"infostand.button.kick",visible:!0},{name:"ambassador_mute",localization:"infostand.button.mute",visible:!0},{name:"back",localization:"generic.back",visible:!0}]},{mode:e.MODE_AMBASSADOR_MUTE,items:[{name:"ambassador_mute_2min",localization:"infostand.button.mute_2min",visible:!0},{name:"ambassador_mute_10min",localization:"infostand.button.mute_10min",visible:!0},{name:"ambassador_mute_60min",localization:"infostand.button.mute_60min",visible:!0},{name:"ambassador_mute_18hr",localization:"infostand.button.mute_18hr",visible:!0},{name:"back_ambassador",localization:"generic.back",visible:!0}]}]}processAction(t){let n=null,i=null,r=!0;if(t){switch(t){case"moderate":r=!1,this.setMode(e.MODE_MODERATE);break;case"ban":r=!1,this.setMode(e.MODE_MODERATE_BAN);break;case"mute":r=!1,this.setMode(e.MODE_MODERATE_MUTE);break;case"ambassador":r=!1,this.setMode(e.MODE_AMBASSADOR);break;case"ambassador_mute":r=!1,this.setMode(e.MODE_AMBASSADOR_MUTE);break;case"back_moderate":r=!1,this.setMode(e.MODE_MODERATE);break;case"back_ambassador":r=!1,this.setMode(e.MODE_AMBASSADOR);break;case"back":r=!1,this.setMode(e.MODE_NORMAL);break;case"whisper":n=ne.RWUAM_WHISPER_USER;break;case"friend":this.avatarData.canBeAskedForAFriend=!1,n=ne.RWUAM_SEND_FRIEND_REQUEST;break;case"respect":this.avatarData._Str_3577--,n=ne.RWUAM_RESPECT_USER,this.avatarData._Str_3577>0&&(r=!1);break;case"ignore":this.avatarData._Str_3655=!0,n=ne.RWUAM_IGNORE_USER;break;case"unignore":this.avatarData._Str_3655=!1,n=ne.RWUAM_UNIGNORE_USER;break;case"kick":n=ne.RWUAM_KICK_USER;break;case"ban_hour":n=ne.RWUAM_BAN_USER_HOUR;break;case"ban_day":n=ne.RWUAM_BAN_USER_DAY;break;case"perm_ban":n=ne.RWUAM_BAN_USER_PERM;break;case"mute_2min":n=ne.MUTE_USER_2MIN;break;case"mute_5min":n=ne.MUTE_USER_5MIN;break;case"mute_10min":n=ne.MUTE_USER_10MIN;break;case"give_rights":this.avatarData.roomControllerLevel=L.a.GUEST,n=ne.RWUAM_GIVE_RIGHTS;break;case"remove_rights":this.avatarData.roomControllerLevel=L.a.NONE,n=ne.RWUAM_TAKE_RIGHTS;break;case"trade":n=ne.RWUAM_START_TRADING;break;case"report":n=ne.RWUAM_REPORT_CFH_OTHER;break;case"pass_handitem":n=ne.RWUAM_PASS_CARRY_ITEM;break;case"ambassador_alert":n=ne.RWUAM_AMBASSADOR_ALERT_USER;break;case"ambassador_kick":n=ne.RWUAM_AMBASSADOR_KICK_USER;break;case"ambassador_mute_2min":n=ne.AMBASSADOR_MUTE_USER_2MIN;break;case"ambassador_mute_10min":n=ne.AMBASSADOR_MUTE_USER_10MIN;break;case"ambassador_mute_60min":n=ne.AMBASSADOR_MUTE_USER_60MIN;break;case"ambassador_mute_18hour":n=ne.AMBASSADOR_MUTE_USER_18HOUR}n&&(i=new ne(n,this.userId)),i&&this.parent.messageListener.processWidgetMessage(i)}r&&this.parent.removeView(this.componentRef,!1)}setMode(e){e!==this.mode&&(this.mode=e)}ambassadorMenuHasContent(){return this.avatarData._Str_4050}moderateMenuHasContent(){return this.avatarData._Str_5990||this.avatarData._Str_6701||this.avatarData._Str_6394||this.isShowGiveRights()||this.isShowRemoveRights()}isShowGiveRights(){return this.avatarData._Str_3246&&this.avatarData._Str_5599<L.a.GUEST&&!this.avatarData._Str_3672}isShowRemoveRights(){return this.avatarData._Str_3246&&this.avatarData._Str_5599===L.a.GUEST&&!this.avatarData._Str_3672}toggleVisibility(){this._settingsService.toggleUserContextVisible()}get visible(){return this._settingsService.userContextVisible}get widget(){return this.parent}}return e.MODE_NORMAL=0,e.MODE_MODERATE=1,e.MODE_MODERATE_BAN=2,e.MODE_MODERATE_MUTE=3,e.MODE_AMBASSADOR=4,e.MODE_AMBASSADOR_MUTE=5,e.\u0275fac=function(t){return new(t||e)(C.Yb(Xt.a))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-room-avatarinfo-avatar-component"]],viewQuery:function(e,t){if(1&e&&C.cd(hn,1),2&e){let e;C.Hc(e=C.oc())&&(t.activeView=e.first)}},features:[C.Hb],decls:5,vars:3,consts:[[1,"nitro-room-avatarinfo-component","context-menu","card","align-items-center"],["activeView",""],["class","drag-handler d-flex justify-content-center align-items-center p-1 px-2 w-100",4,"ngIf"],["class","d-flex flex-column mb-1 w-100",4,"ngIf"],[1,"fas","small","visibility-toggle","mb-1","w-100","text-center",3,"ngClass","click"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","p-1","px-2","w-100"],[1,"m-0"],[1,"d-flex","flex-column","mb-1","w-100"],[4,"ngFor","ngForOf"],["class","list-group list-group-flush",4,"ngIf"],[1,"list-group","list-group-flush"],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],["class","list-group-item",3,"click",4,"ngSwitchCase"],["class","list-group-item",3,"click",4,"ngSwitchDefault"],[1,"list-group-item",3,"click"]],template:function(e,t){1&e&&(C.dc(0,"div",0,1),C.Uc(2,gn,3,1,"div",2),C.Uc(3,En,2,1,"div",3),C.dc(4,"i",4),C.nc("click",function(){return t.toggleVisibility()}),C.cc(),C.cc()),2&e&&(C.Kb(2),C.yc("ngIf",t.visible),C.Kb(1),C.yc("ngIf",t.visible),C.Kb(1),C.yc("ngClass",t.visible?"fa-chevron-down":"fa-chevron-up m-2"))},directives:[dn.n,dn.l,dn.m,dn.p,dn.q,dn.r],pipes:[un.a],encapsulation:2}),e})();const yn=["activeView"];let In=(()=>{class e extends ln{static setup(e,t,n,i,r){e.willFade=!1,ln.extendedSetup(e,t,n,i,r)}stopDecorating(){this.widget.isDecorating=!1}get widget(){return this.parent}get maximumOpacity(){return.8}}return e.\u0275fac=function(t){return wn(t||e)},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-room-avatarinfo-decorate-component"]],viewQuery:function(e,t){if(1&e&&C.cd(yn,1),2&e){let e;C.Hc(e=C.oc())&&(t.activeView=e.first)}},features:[C.Hb],decls:7,vars:3,consts:[[1,"nitro-room-avatarinfo-component","context-menu","card","align-items-center"],["activeView",""],[1,"d-flex","flex-column","w-100","py-1"],[1,"list-group","list-group-flush"],[1,"list-group-item",3,"click"]],template:function(e,t){1&e&&(C.dc(0,"div",0,1),C.dc(2,"div",2),C.dc(3,"ul",3),C.dc(4,"li",4),C.nc("click",function(){return t.stopDecorating()}),C.Wc(5),C.rc(6,"translate"),C.cc(),C.cc(),C.cc(),C.cc()),2&e&&(C.Kb(5),C.Xc(C.sc(6,1,"widget.avatar.stop_decorating")))},pipes:[un.a],encapsulation:2}),e})();const wn=C.fc(In),Cn=["activeView"],Rn=function(){return["bg-success"]};let Tn=(()=>{class e extends ln{constructor(){super(...arguments),this.isFriend=!1}static setup(e,t,n,i,r,s=!1){e.willFade=s,ln.extendedSetup(e,t,n,i,r)}}return e.\u0275fac=function(t){return On(t||e)},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-room-avatarinfo-name-component"]],viewQuery:function(e,t){if(1&e&&C.cd(Cn,1),2&e){let e;C.Hc(e=C.oc())&&(t.activeView=e.first)}},features:[C.Hb],decls:5,vars:3,consts:[[1,"nitro-room-avatarinfo-component","context-menu","card","align-items-center",3,"ngClass"],["activeView",""],[1,"drag-handler","d-flex","justify-content-center","align-items-center","p-1","px-2","w-100"],[1,"m-0"]],template:function(e,t){1&e&&(C.dc(0,"div",0,1),C.dc(2,"div",2),C.dc(3,"p",3),C.Wc(4),C.cc(),C.cc(),C.cc()),2&e&&(C.yc("ngClass",t.isFriend&&C.Bc(2,Rn)),C.Kb(4),C.Xc(t.userName))},directives:[dn.l],encapsulation:2}),e})();const On=C.fc(Tn);var Mn=n("VLg1");const Un=["activeView"];function xn(e,t){if(1&e&&(C.dc(0,"div",5),C.dc(1,"p",6),C.Wc(2),C.cc(),C.cc()),2&e){const e=C.qc();C.Kb(2),C.Xc(e.userName)}}function An(e,t){if(1&e){const e=C.ec();C.dc(0,"li",13),C.nc("click",function(){C.Lc(e);const t=C.qc().$implicit;return C.qc(4).processAction(t.name)}),C.rc(1,"keepHtml"),C.rc(2,"translate"),C.cc()}if(2&e){const e=C.qc().$implicit;C.yc("innerHTML","11"===e.name||"12"===e.name||"13"===e.name||"14"===e.name||"15"===e.name?C.sc(1,1,e.localization):C.sc(2,3,e.localization),C.Mc)}}function Dn(e,t){if(1&e&&(C.bc(0),C.Uc(1,An,3,5,"li",12),C.ac()),2&e){const e=t.$implicit;C.Kb(1),C.yc("ngIf",e.visible)}}const Ln=function(e){return{"columns-3":e}};function kn(e,t){if(1&e&&(C.dc(0,"ul",11),C.Uc(1,Dn,2,1,"ng-container",8),C.cc()),2&e){const e=C.qc().$implicit;C.yc("ngClass",C.Cc(2,Ln,4===e.mode)),C.Kb(1),C.yc("ngForOf",e.items)}}function Pn(e,t){if(1&e&&(C.bc(0),C.Uc(1,kn,2,4,"ul",10),C.ac()),2&e){const e=t.$implicit,n=C.qc(2);C.Kb(1),C.yc("ngIf",n.mode===e.mode)}}function Nn(e,t){if(1&e){const e=C.ec();C.dc(0,"ul",14),C.dc(1,"li",15),C.nc("click",function(){return C.Lc(e),C.qc(2).processAction("back")}),C.Wc(2),C.rc(3,"translate"),C.cc(),C.cc()}2&e&&(C.Kb(2),C.Xc(C.sc(3,1,"generic.back")))}function Wn(e,t){if(1&e&&(C.dc(0,"div",7),C.Uc(1,Pn,2,1,"ng-container",8),C.Uc(2,Nn,4,3,"ul",9),C.cc()),2&e){const e=C.qc();C.Kb(1),C.yc("ngForOf",e.menu),C.Kb(1),C.yc("ngIf",4===e.mode)}}let Kn=(()=>{class e extends ln{constructor(e){super(),this._settingsService=e,this.avatarData=null,this.mode=0,this.menu=[]}static setup(t,n,i,r,s,c){t.avatarData=c,t.widget.isDancing&&t.widget.hasClub&&(t.mode=e.MODE_CLUB_DANCES),ln.extendedSetup(t,n,i,r,s),t.setupButtons()}setupButtons(){const t=this.widget._Str_25831;this.menu=[{mode:e.MODE_NORMAL,items:[{name:"decorate",localization:"widget.avatar.decorate",visible:this.widget.hasClub&&this.avatarData.roomControllerLevel>=L.a.GUEST||this.avatarData._Str_3246},{name:"change_looks",localization:"widget.memenu.myclothes",visible:!0},{name:"dance_menu",localization:"widget.memenu.dance",visible:this.widget.hasClub&&!t},{name:"dance",localization:"widget.memenu.dance",visible:!this.widget.isDancing&&!this.widget.hasClub&&!t},{name:"dance_stop",localization:"widget.memenu.dance.stop",visible:this.widget.isDancing&&!this.widget.hasClub&&!t},{name:"expressions",localization:"infostand.link.expressions",visible:!0},{name:"signs",localization:"infostand.show.signs",visible:!0},{name:"drop_hand_item",localization:"avatar.widget.drop_hand_item",visible:this.avatarData._Str_8826>0&&this.avatarData._Str_8826<999999}]},{mode:e.MODE_CLUB_DANCES,items:[{name:"dance_stop",localization:"widget.memenu.dance.stop",visible:this.widget.isDancing},{name:"dance_1",localization:"widget.memenu.dance1",visible:!0},{name:"dance_2",localization:"widget.memenu.dance2",visible:!0},{name:"dance_3",localization:"widget.memenu.dance3",visible:!0},{name:"dance_4",localization:"widget.memenu.dance4",visible:!0},{name:"back",localization:"generic.back",visible:!0}]},{mode:e.MODE_EXPRESSIONS,items:[{name:"sit",localization:"widget.memenu.sit",visible:this.widget.getOwnPosture===Jt.a.POSTURE_STAND},{name:"stand",localization:"widget.memenu.stand",visible:this.widget.getCanStandUp},{name:"wave",localization:"widget.memenu.wave",visible:!this.widget._Str_12708},{name:"laugh",localization:"widget.memenu.laugh",visible:!this.widget._Str_12708&&this.widget.hasVip},{name:"blow",localization:"widget.memenu.blow",visible:!this.widget._Str_12708&&this.widget.hasVip},{name:"idle",localization:"widget.memenu.idle",visible:!0},{name:"back",localization:"generic.back",visible:!0}]},{mode:e.MODE_SIGNS,items:[{name:"sign_1",localization:"1",visible:!0},{name:"sign_4",localization:"4",visible:!0},{name:"sign_7",localization:"7",visible:!0},{name:"sign_10",localization:"10",visible:!0},{name:"sign_0",localization:"0",visible:!0},{name:"sign_14",localization:'<i class="icon icon-sign-soccer"></i>',visible:!0},{name:"sign_2",localization:"2",visible:!0},{name:"sign_5",localization:"5",visible:!0},{name:"sign_8",localization:"8",visible:!0},{name:"sign_11",localization:'<i class="icon icon-sign-heart"></i>',visible:!0},{name:"sign_13",localization:'<i class="icon icon-sign-exclamation"></i>',visible:!0},{name:"sign_17",localization:'<i class="icon icon-sign-yellow"></i>',visible:!0},{name:"sign_3",localization:"3",visible:!0},{name:"sign_6",localization:"6",visible:!0},{name:"sign_9",localization:"9",visible:!0},{name:"sign_12",localization:'<i class="icon icon-sign-skull"></i>',visible:!0},{name:"sign_15",localization:'<i class="icon icon-sign-smile"></i>',visible:!0},{name:"sign_16",localization:'<i class="icon icon-sign-red"></i>',visible:!0}]}]}processAction(t){let n=null,i=!0;if(t){if(t.startsWith("sign_")){const e=parseInt(t.split("_")[1]);this.widget.useSign(e)}else switch(t){case"decorate":this.widget.hasClub&&(this.widget.isDecorating=!0);break;case"change_looks":this.widget.openAvatarEditor();break;case"expressions":i=!1,this.setMode(e.MODE_EXPRESSIONS);break;case"sit":n=new J(J._Str_2016);break;case"stand":n=new J(J._Str_1553);break;case"wave":n=new Q(ce.a._Str_6268);break;case"blow":n=new Q(ce.a._Str_5579);break;case"laugh":n=new Q(ce.a._Str_7336);break;case"idle":n=new Q(ce.a._Str_6989);break;case"dance_menu":i=!1,this.setMode(e.MODE_CLUB_DANCES);break;case"dance":n=new ee(1);break;case"dance_stop":n=new ee(0);break;case"dance_1":case"dance_2":case"dance_3":case"dance_4":n=new ee(parseInt(t.charAt(t.length-1)));break;case"signs":i=!1,this.setMode(e.MODE_SIGNS);break;case"back":case"more":i=!1,this.setMode(e.MODE_NORMAL);break;case"drop_hand_item":n=new ne(ne.RWUAM_DROP_CARRY_ITEM,this.userId)}n&&this.parent.messageListener.processWidgetMessage(n)}i&&this.parent.removeView(this.componentRef,!1)}setMode(e){e!==this.mode&&(this.mode=e)}toggleVisibility(){this._settingsService.toggleUserContextVisible()}get visible(){return this._settingsService.userContextVisible}get widget(){return this.parent}}return e.MODE_NORMAL=0,e.MODE_CLUB_DANCES=1,e.MODE_NAME_CHANGE=2,e.MODE_EXPRESSIONS=3,e.MODE_SIGNS=4,e.MODE_CHANGE_LOOKS=5,e.\u0275fac=function(t){return new(t||e)(C.Yb(Xt.a))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-room-avatarinfo-ownavatar-component"]],viewQuery:function(e,t){if(1&e&&C.cd(Un,1),2&e){let e;C.Hc(e=C.oc())&&(t.activeView=e.first)}},features:[C.Hb],decls:5,vars:4,consts:[[1,"nitro-room-avatarinfo-component","context-menu","card","align-items-center",3,"ngClass"],["activeView",""],["class","drag-handler d-flex justify-content-center align-items-center p-1 px-2 w-100",4,"ngIf"],["class","d-flex flex-column mb-1 w-100",4,"ngIf"],[1,"fas","small","visibility-toggle","mb-1","w-100","text-center",3,"ngClass","click"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","p-1","px-2","w-100"],[1,"m-0","text-truncate"],[1,"d-flex","flex-column","mb-1","w-100"],[4,"ngFor","ngForOf"],["class","list-group list-group-flush",4,"ngIf"],["class","list-group list-group-flush",3,"ngClass",4,"ngIf"],[1,"list-group","list-group-flush",3,"ngClass"],["class","list-group-item",3,"innerHTML","click",4,"ngIf"],[1,"list-group-item",3,"innerHTML","click"],[1,"list-group","list-group-flush"],[1,"list-group-item",3,"click"]],template:function(e,t){1&e&&(C.dc(0,"div",0,1),C.Uc(2,xn,3,1,"div",2),C.Uc(3,Wn,3,2,"div",3),C.dc(4,"i",4),C.nc("click",function(){return t.toggleVisibility()}),C.cc(),C.cc()),2&e&&(C.yc("ngClass",t.visible?"":"has-hidden"),C.Kb(2),C.yc("ngIf",t.visible),C.Kb(1),C.yc("ngIf",t.visible),C.Kb(1),C.yc("ngClass",t.visible?"fa-chevron-down":"fa-chevron-up m-2"))},directives:[dn.l,dn.n,dn.m],pipes:[Mn.a,un.a],encapsulation:2}),e})();const Fn=["activeView"];function Vn(e,t){if(1&e&&(C.dc(0,"div",5),C.dc(1,"p",6),C.Wc(2),C.cc(),C.cc()),2&e){const e=C.qc();C.Kb(2),C.Xc(e.userName)}}function qn(e,t){if(1&e){const e=C.ec();C.dc(0,"li",15),C.nc("click",function(){C.Lc(e);const t=C.qc(2).$implicit;return C.qc(4).processAction(t.name)}),C.Wc(1),C.rc(2,"translate"),C.cc()}if(2&e){const e=C.qc(2).$implicit,t=C.qc(4);C.Kb(1),C.Xc(C.uc(2,1,e.localization,"count",t.avatarData._Str_3577))}}function Hn(e,t){if(1&e){const e=C.ec();C.dc(0,"li",15),C.nc("click",function(){C.Lc(e);const t=C.qc(2).$implicit;return C.qc(4).processAction(t.name)}),C.Wc(1),C.rc(2,"translate"),C.cc()}if(2&e){const e=C.qc(2).$implicit;C.Kb(1),C.Xc(C.sc(2,1,e.localization))}}function Bn(e,t){if(1&e&&(C.bc(0,12),C.Uc(1,qn,3,5,"li",13),C.Uc(2,Hn,3,3,"li",14),C.ac()),2&e){const e=C.qc().$implicit;C.yc("ngSwitch",e.name),C.Kb(1),C.yc("ngSwitchCase","respect")}}function Gn(e,t){if(1&e&&(C.bc(0),C.Uc(1,Bn,3,2,"ng-container",11),C.ac()),2&e){const e=t.$implicit;C.Kb(1),C.yc("ngIf",e.visible)}}function Zn(e,t){if(1&e&&(C.dc(0,"ul",10),C.Uc(1,Gn,2,1,"ng-container",8),C.cc()),2&e){const e=C.qc().$implicit;C.Kb(1),C.yc("ngForOf",e.items)}}function Xn(e,t){if(1&e&&(C.bc(0),C.Uc(1,Zn,2,1,"ul",9),C.ac()),2&e){const e=t.$implicit,n=C.qc(2);C.Kb(1),C.yc("ngIf",n.mode===e.mode)}}function jn(e,t){if(1&e&&(C.dc(0,"div",7),C.Uc(1,Xn,2,1,"ng-container",8),C.cc()),2&e){const e=C.qc();C.Kb(1),C.yc("ngForOf",e.menu)}}let Yn=(()=>{class e extends ln{constructor(e){super(),this._settingsService=e,this.avatarData=null,this.mode=0,this.menu=[]}static setup(e,t,n,i,r,s){e.avatarData=s,ln.extendedSetup(e,t,n,i,r),e.setupButtons()}setupButtons(){let t=!1;const n=this.widget.handler,i=n.container.roomEngine.getRoomObject(n.roomSession.roomId,n.container.roomSession.ownRoomIndex,M.a.UNIT);if(i){const e=i.model.getValue(A.a.FIGURE_CARRY_OBJECT);e>0&&e<999999&&(t=!0)}this.menu=[{mode:e.MODE_NORMAL,items:[{name:"test",localization:"infostand.button.test",visible:!0}]}]}processAction(e){let t=!0;if(e)switch(e){case"moderate":t=!1}t&&this.parent.removeView(this.componentRef,!1)}toggleVisibility(){this._settingsService.toggleUserContextVisible()}get visible(){return this._settingsService.userContextVisible}get widget(){return this.parent}}return e.MODE_NORMAL=0,e.\u0275fac=function(t){return new(t||e)(C.Yb(Xt.a))},e.\u0275cmp=C.Sb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&C.cd(Fn,1),2&e){let e;C.Hc(e=C.oc())&&(t.activeView=e.first)}},features:[C.Hb],decls:5,vars:3,consts:[[1,"nitro-room-avatarinfo-component","context-menu","card","align-items-center"],["activeView",""],["class","drag-handler d-flex justify-content-center align-items-center p-1 px-2 w-100",4,"ngIf"],["class","d-flex flex-column mb-1 w-100",4,"ngIf"],[1,"fas","small","visibility-toggle","mb-1","w-100","text-center",3,"ngClass","click"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","p-1","px-2","w-100"],[1,"m-0"],[1,"d-flex","flex-column","mb-1","w-100"],[4,"ngFor","ngForOf"],["class","list-group list-group-flush",4,"ngIf"],[1,"list-group","list-group-flush"],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],["class","list-group-item",3,"click",4,"ngSwitchCase"],["class","list-group-item",3,"click",4,"ngSwitchDefault"],[1,"list-group-item",3,"click"]],template:function(e,t){1&e&&(C.dc(0,"div",0,1),C.Uc(2,Vn,3,1,"div",2),C.Uc(3,jn,2,1,"div",3),C.dc(4,"i",4),C.nc("click",function(){return t.toggleVisibility()}),C.cc(),C.cc()),2&e&&(C.Kb(2),C.yc("ngIf",t.visible),C.Kb(1),C.yc("ngIf",t.visible),C.Kb(1),C.yc("ngClass",t.visible?"fa-chevron-down":"fa-chevron-up m-2"))},directives:[dn.n,dn.l,dn.m,dn.p,dn.q,dn.r],pipes:[un.a],encapsulation:2}),e})();const zn=["activeView"];function $n(e,t){if(1&e&&(C.dc(0,"div",5),C.dc(1,"p",6),C.Wc(2),C.cc(),C.cc()),2&e){const e=C.qc();C.Kb(2),C.Xc(e.userName)}}function Qn(e,t){if(1&e){const e=C.ec();C.dc(0,"li",15),C.nc("click",function(){C.Lc(e);const t=C.qc(2).$implicit;return C.qc(4).processAction(t.name)}),C.Wc(1),C.rc(2,"translate"),C.cc()}if(2&e){const e=C.qc(2).$implicit,t=C.qc(4);C.Kb(1),C.Xc(C.uc(2,1,e.localization,"count",t.avatarData._Str_3577))}}function Jn(e,t){if(1&e){const e=C.ec();C.dc(0,"li",15),C.nc("click",function(){C.Lc(e);const t=C.qc(2).$implicit;return C.qc(4).processAction(t.name)}),C.Wc(1),C.rc(2,"translate"),C.cc()}if(2&e){const e=C.qc(2).$implicit;C.Kb(1),C.Xc(C.sc(2,1,e.localization))}}function ei(e,t){if(1&e&&(C.bc(0,12),C.Uc(1,Qn,3,5,"li",13),C.Uc(2,Jn,3,3,"li",14),C.ac()),2&e){const e=C.qc().$implicit;C.yc("ngSwitch",e.name),C.Kb(1),C.yc("ngSwitchCase","respect")}}function ti(e,t){if(1&e&&(C.bc(0),C.Uc(1,ei,3,2,"ng-container",11),C.ac()),2&e){const e=t.$implicit;C.Kb(1),C.yc("ngIf",e.visible)}}function ni(e,t){if(1&e&&(C.dc(0,"ul",10),C.Uc(1,ti,2,1,"ng-container",8),C.cc()),2&e){const e=C.qc().$implicit;C.Kb(1),C.yc("ngForOf",e.items)}}function ii(e,t){if(1&e&&(C.bc(0),C.Uc(1,ni,2,1,"ul",9),C.ac()),2&e){const e=t.$implicit,n=C.qc(2);C.Kb(1),C.yc("ngIf",n.mode===e.mode)}}function ri(e,t){if(1&e&&(C.dc(0,"div",7),C.Uc(1,ii,2,1,"ng-container",8),C.cc()),2&e){const e=C.qc();C.Kb(1),C.yc("ngForOf",e.menu)}}let si=(()=>{class e extends ln{constructor(e){super(),this._settingsService=e,this.avatarData=null,this.mode=0,this.menu=[]}static setup(e,t,n,i,r,s){e.avatarData=s,ln.extendedSetup(e,t,n,i,r),e.setupButtons()}setupButtons(){let t=!1;const n=this.widget.handler,i=n.container.roomEngine.getRoomObject(n.roomSession.roomId,n.container.roomSession.ownRoomIndex,M.a.UNIT);if(i){const e=i.model.getValue(A.a.FIGURE_CARRY_OBJECT);e>0&&e<999999&&(t=!0)}this.menu=[{mode:e.MODE_NORMAL,items:[{name:"test",localization:"infostand.button.test",visible:!0}]}]}processAction(e){let t=!0;if(e)switch(e){case"moderate":t=!1}t&&this.parent.removeView(this.componentRef,!1)}toggleVisibility(){this._settingsService.toggleUserContextVisible()}get visible(){return this._settingsService.userContextVisible}get widget(){return this.parent}}return e.MODE_NORMAL=0,e.\u0275fac=function(t){return new(t||e)(C.Yb(Xt.a))},e.\u0275cmp=C.Sb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&C.cd(zn,1),2&e){let e;C.Hc(e=C.oc())&&(t.activeView=e.first)}},features:[C.Hb],decls:5,vars:3,consts:[[1,"nitro-room-avatarinfo-component","context-menu","card","align-items-center"],["activeView",""],["class","drag-handler d-flex justify-content-center align-items-center p-1 px-2 w-100",4,"ngIf"],["class","d-flex flex-column mb-1 w-100",4,"ngIf"],[1,"fas","small","visibility-toggle","mb-1","w-100","text-center",3,"ngClass","click"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","p-1","px-2","w-100"],[1,"m-0"],[1,"d-flex","flex-column","mb-1","w-100"],[4,"ngFor","ngForOf"],["class","list-group list-group-flush",4,"ngIf"],[1,"list-group","list-group-flush"],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],["class","list-group-item",3,"click",4,"ngSwitchCase"],["class","list-group-item",3,"click",4,"ngSwitchDefault"],[1,"list-group-item",3,"click"]],template:function(e,t){1&e&&(C.dc(0,"div",0,1),C.Uc(2,$n,3,1,"div",2),C.Uc(3,ri,2,1,"div",3),C.dc(4,"i",4),C.nc("click",function(){return t.toggleVisibility()}),C.cc(),C.cc()),2&e&&(C.Kb(2),C.yc("ngIf",t.visible),C.Kb(1),C.yc("ngIf",t.visible),C.Kb(1),C.yc("ngClass",t.visible?"fa-chevron-down":"fa-chevron-up m-2"))},directives:[dn.n,dn.l,dn.m,dn.p,dn.q,dn.r],pipes:[un.a],encapsulation:2}),e})();var ci=n("xKjb"),oi=n("I57J"),ai=n("mikS"),li=n("n5ff");let di=(()=>{class e{}return e._Str_19584=0,e.DRESS_UP=1,e.SETUP_CHAT=2,e.RANDOM_WALK=3,e.DANCE=4,e.CHANGE_BOT_NAME=5,e._Str_20280=6,e._Str_18934=7,e._Str_14917=8,e.CHANGE_BOT_MOTTO=9,e.NUX_TAKE_TOUR=10,e._Str_17261=12,e._Str_18173=14,e.DONATE_TO_USER=24,e.DONATE_TO_ALL=25,e})();var ui=n("3Pt+");const hi=["activeView"];function gi(e,t){if(1&e&&(C.dc(0,"div",5),C.dc(1,"p",6),C.Wc(2),C.cc(),C.cc()),2&e){const e=C.qc();C.Kb(2),C.Xc(e.userName)}}function mi(e,t){if(1&e){const e=C.ec();C.dc(0,"li",15),C.nc("click",function(){C.Lc(e);const t=C.qc(2).$implicit;return C.qc(4).processAction(t.name)}),C.Wc(1),C.rc(2,"translate"),C.cc()}if(2&e){const e=C.qc(2).$implicit,t=C.qc(4);C.Kb(1),C.Xc(C.uc(2,1,e.localization,"count",t.avatarData._Str_3577))}}function fi(e,t){if(1&e){const e=C.ec();C.dc(0,"li",15),C.nc("click",function(){C.Lc(e);const t=C.qc(2).$implicit;return C.qc(4).processAction(t.name)}),C.Wc(1),C.rc(2,"translate"),C.cc()}if(2&e){const e=C.qc(2).$implicit;C.Kb(1),C.Xc(C.sc(2,1,e.localization))}}function pi(e,t){if(1&e&&(C.bc(0,8),C.Uc(1,mi,3,5,"li",13),C.Uc(2,fi,3,3,"li",14),C.ac()),2&e){const e=C.qc().$implicit;C.yc("ngSwitch",e.name),C.Kb(1),C.yc("ngSwitchCase","respect")}}function _i(e,t){if(1&e&&(C.bc(0),C.Uc(1,pi,3,2,"ng-container",12),C.ac()),2&e){const e=t.$implicit;C.Kb(1),C.yc("ngIf",e.visible)}}function bi(e,t){if(1&e&&(C.bc(0),C.dc(1,"ul",11),C.Uc(2,_i,2,1,"ng-container",10),C.cc(),C.ac()),2&e){const e=t.$implicit;C.Kb(2),C.yc("ngForOf",e.items)}}function vi(e,t){if(1&e&&(C.bc(0),C.Uc(1,bi,3,1,"ng-container",10),C.ac()),2&e){const e=C.qc(2);C.Kb(1),C.yc("ngForOf",e.menu)}}function Ei(e,t){if(1&e){const e=C.ec();C.bc(0),C.dc(1,"div",16),C.dc(2,"p",17),C.Wc(3),C.rc(4,"translate"),C.cc(),C.dc(5,"input",18),C.nc("ngModelChange",function(t){return C.Lc(e),C.qc(2).newName=t}),C.cc(),C.dc(6,"div",19),C.dc(7,"button",20),C.nc("click",function(){return C.Lc(e),C.qc(2).processAction("")}),C.Wc(8),C.rc(9,"translate"),C.cc(),C.dc(10,"button",21),C.nc("click",function(){return C.Lc(e),C.qc(2).processAction("save_bot_name")}),C.Wc(11),C.rc(12,"translate"),C.cc(),C.cc(),C.cc(),C.ac()}if(2&e){const e=C.qc(2);C.Kb(3),C.Xc(C.sc(4,4,"bot.skill.name.configuration.new.name")),C.Kb(2),C.yc("ngModel",e.newName),C.Kb(3),C.Xc(C.sc(9,6,"cancel")),C.Kb(3),C.Xc(C.sc(12,8,"save"))}}function Si(e,t){if(1&e){const e=C.ec();C.bc(0),C.dc(1,"div",16),C.dc(2,"p",17),C.Wc(3),C.rc(4,"translate"),C.cc(),C.dc(5,"input",18),C.nc("ngModelChange",function(t){return C.Lc(e),C.qc(2).newMotto=t}),C.cc(),C.dc(6,"div",19),C.dc(7,"button",20),C.nc("click",function(){return C.Lc(e),C.qc(2).processAction("")}),C.Wc(8),C.rc(9,"translate"),C.cc(),C.dc(10,"button",21),C.nc("click",function(){return C.Lc(e),C.qc(2).processAction("save_bot_motto")}),C.Wc(11),C.rc(12,"translate"),C.cc(),C.cc(),C.cc(),C.ac()}if(2&e){const e=C.qc(2);C.Kb(3),C.Xc(C.sc(4,4,"bot.skill.name.configuration.new.motto")),C.Kb(2),C.yc("ngModel",e.newMotto),C.Kb(3),C.Xc(C.sc(9,6,"cancel")),C.Kb(3),C.Xc(C.sc(12,8,"save"))}}function yi(e,t){if(1&e){const e=C.ec();C.bc(0),C.dc(1,"div",16),C.dc(2,"div",22),C.dc(3,"p",17),C.Wc(4),C.rc(5,"translate"),C.cc(),C.dc(6,"textarea",23),C.nc("ngModelChange",function(t){return C.Lc(e),C.qc(2).newText=t}),C.rc(7,"translate"),C.cc(),C.cc(),C.dc(8,"div",24),C.dc(9,"p",25),C.Wc(10),C.rc(11,"translate"),C.cc(),C.dc(12,"div",26),C.dc(13,"input",27),C.nc("click",function(){C.Lc(e);const t=C.qc(2);return t.automaticChat=!t.automaticChat}),C.cc(),C.cc(),C.cc(),C.dc(14,"div",24),C.dc(15,"p",25),C.Wc(16),C.rc(17,"translate"),C.cc(),C.dc(18,"div",26),C.dc(19,"input",27),C.nc("click",function(){C.Lc(e);const t=C.qc(2);return t.mixSentences=!t.mixSentences}),C.cc(),C.cc(),C.cc(),C.dc(20,"div",24),C.dc(21,"p",25),C.Wc(22),C.rc(23,"translate"),C.cc(),C.dc(24,"div",26),C.dc(25,"input",28),C.nc("ngModelChange",function(t){return C.Lc(e),C.qc(2).chatDelay=t}),C.cc(),C.cc(),C.cc(),C.dc(26,"div",29),C.dc(27,"button",20),C.nc("click",function(){return C.Lc(e),C.qc(2).processAction("")}),C.Wc(28),C.rc(29,"translate"),C.cc(),C.dc(30,"button",21),C.nc("click",function(){return C.Lc(e),C.qc(2).processAction("save_bot_motto")}),C.Wc(31),C.rc(32,"translate"),C.cc(),C.cc(),C.cc(),C.ac()}if(2&e){const e=C.qc(2);C.Kb(4),C.Xc(C.sc(5,11,"bot.skill.chatter.configuration.chat.text")),C.Kb(2),C.yc("placeholder",C.sc(7,13,"bot.skill.chatter.configuration.text.placeholder"))("ngModel",e.newText),C.Kb(4),C.Xc(C.sc(11,15,"bot.skill.chatter.configuration.automatic.chat")),C.Kb(3),C.yc("checked",e.automaticChat),C.Kb(3),C.Xc(C.sc(17,17,"bot.skill.chatter.configuration.markov")),C.Kb(3),C.yc("checked",e.mixSentences),C.Kb(3),C.Xc(C.sc(23,19,"bot.skill.chatter.configuration.chat.delay")),C.Kb(3),C.yc("ngModel",e.chatDelay),C.Kb(3),C.Xc(C.sc(29,21,"cancel")),C.Kb(3),C.Xc(C.sc(32,23,"save"))}}function Ii(e,t){if(1&e&&(C.dc(0,"div",7),C.bc(1,8),C.Uc(2,vi,2,1,"ng-container",9),C.Uc(3,Ei,13,10,"ng-container",9),C.Uc(4,Si,13,10,"ng-container",9),C.Uc(5,yi,33,25,"ng-container",9),C.ac(),C.cc()),2&e){const e=C.qc();C.Kb(1),C.yc("ngSwitch",e.mode),C.Kb(1),C.yc("ngSwitchCase",0),C.Kb(1),C.yc("ngSwitchCase",1),C.Kb(1),C.yc("ngSwitchCase",2),C.Kb(1),C.yc("ngSwitchCase",3)}}let wi=(()=>{class e extends ln{constructor(e,t){super(),this._settingsService=e,this._ngZone=t,this._messageListener=null,this.avatarData=null,this.mode=0,this.menu=[],this.newName="",this.newMotto="",this.newText="",this.automaticChat=!1,this.mixSentences=!1,this.chatDelay=5}static setup(e,t,n,i,r,s){e.avatarData=s,ln.extendedSetup(e,t,n,i,r),e.setupButtons()}ngOnDestroy(){this._messageListener&&(r.a.instance.communication.connection.removeMessageEvent(this._messageListener),this._messageListener=null)}requestBotCommandConfiguration(e){this._messageListener||(this._messageListener=new ci.a(this.onBotCommandConfigurationEvent.bind(this)),r.a.instance.communication.connection.addMessageEvent(this._messageListener)),r.a.instance.communication.connection.send(new oi.a(this.userId,e))}onBotCommandConfigurationEvent(e){if(!e)return;const t=e.getParser();t&&t.botId===this.userId&&this._ngZone.run(()=>{switch(t.commandId){case di.CHANGE_BOT_NAME:return void(this.newName=t.data);case di.CHANGE_BOT_MOTTO:return void(this.newMotto=t.data);case di.SETUP_CHAT:{const e=t.data,n=e.split(-1===e.indexOf(";#;")?";":";#;");return void(3!==n.length&&4!==n.length||(this.newText=n[0],this.automaticChat="true"===n[1].toLowerCase()||"1"===n[1],this.chatDelay=parseInt(n[2]),this.mixSentences=!!n[3]&&("true"===n[3].toLowerCase()||"1"===n[3])))}}})}setupButtons(){const t=this.avatarData._Str_3246||this.avatarData._Str_3529;this.menu=[{mode:e.MODE_NORMAL,items:[{name:"donate_to_all",localization:"avatar.widget.donate_to_all",visible:this.avatarData._Str_2899.indexOf(di.DONATE_TO_ALL)>=0&&t},{name:"donate_to_user",localization:"avatar.widget.donate_to_user",visible:this.avatarData._Str_2899.indexOf(di.DONATE_TO_USER)>=0&&t},{name:"change_bot_name",localization:"avatar.widget.change_bot_name",visible:this.avatarData._Str_2899.indexOf(di.CHANGE_BOT_NAME)>=0&&t},{name:"change_bot_motto",localization:"avatar.widget.change_bot_motto",visible:this.avatarData._Str_2899.indexOf(di.CHANGE_BOT_MOTTO)>=0&&t},{name:"dress_up",localization:"avatar.widget.dress_up",visible:this.avatarData._Str_2899.indexOf(di.DRESS_UP)>=0&&t},{name:"random_walk",localization:"avatar.widget.random_walk",visible:this.avatarData._Str_2899.indexOf(di.RANDOM_WALK)>=0&&t},{name:"setup_chat",localization:"avatar.widget.setup_chat",visible:this.avatarData._Str_2899.indexOf(di.SETUP_CHAT)>=0&&t},{name:"dance",localization:"avatar.widget.dance",visible:this.avatarData._Str_2899.indexOf(di.DANCE)>=0&&t},{name:"pick",localization:"avatar.widget.pick_up",visible:-1===this.avatarData._Str_2899.indexOf(di._Str_17261)&&t}]}]}processAction(t){let n=!0;if(t)switch(t){case"donate_to_all":this.widget.handler.container.connection.send(new li.a(this.avatarData.id,di.DONATE_TO_ALL,""));break;case"donate_to_user":this.widget.handler.container.connection.send(new li.a(this.avatarData.id,di.DONATE_TO_USER,""));break;case"change_bot_name":this.requestBotCommandConfiguration(di.CHANGE_BOT_NAME),n=!1,this.setMode(e.MODE_CHANGE_NAME);break;case"save_bot_name":this.widget.handler.container.connection.send(new li.a(this.avatarData.id,di.CHANGE_BOT_NAME,this.newName));break;case"change_bot_motto":this.requestBotCommandConfiguration(di.CHANGE_BOT_MOTTO),n=!1,this.setMode(e.MODE_CHANGE_MOTTO);break;case"save_bot_motto":this.widget.handler.container.connection.send(new li.a(this.avatarData.id,di.CHANGE_BOT_MOTTO,this.newMotto));break;case"dress_up":this.widget.handler.container.connection.send(new li.a(this.avatarData.id,di.DRESS_UP,""));break;case"random_walk":this.widget.handler.container.connection.send(new li.a(this.avatarData.id,di.RANDOM_WALK,""));break;case"setup_chat":this.requestBotCommandConfiguration(di.SETUP_CHAT),n=!1,this.setMode(e.MODE_CHANGE_SPEECH);break;case"dance":this.widget.handler.container.connection.send(new li.a(this.avatarData.id,di.DANCE,""));break;case"nux_take_tour":r.a.instance.createLinkEvent("help/tour"),this.widget.handler.container.connection.send(new li.a(this.avatarData.id,di.NUX_TAKE_TOUR,""));break;case"pick":this.widget.handler.container.connection.send(new ai.a(this.avatarData.id))}n&&this.parent.removeView(this.componentRef,!1)}setMode(e){e!==this.mode&&(this.mode=e)}toggleVisibility(){this._settingsService.toggleUserContextVisible()}get visible(){return this._settingsService.userContextVisible}get widget(){return this.parent}}return e.MODE_NORMAL=0,e.MODE_CHANGE_NAME=1,e.MODE_CHANGE_MOTTO=2,e.MODE_CHANGE_SPEECH=3,e.\u0275fac=function(t){return new(t||e)(C.Yb(Xt.a),C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&C.cd(hi,1),2&e){let e;C.Hc(e=C.oc())&&(t.activeView=e.first)}},features:[C.Hb],decls:5,vars:3,consts:[[1,"nitro-room-avatarinfo-component","context-menu","card","align-items-center"],["activeView",""],["class","drag-handler d-flex justify-content-center align-items-center p-1 px-2 w-100",4,"ngIf"],["class","d-flex flex-column mb-1 w-100",4,"ngIf"],[1,"fas","small","visibility-toggle","mb-1","w-100","text-center",3,"ngClass","click"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","p-1","px-2","w-100"],[1,"m-0"],[1,"d-flex","flex-column","mb-1","w-100"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngFor","ngForOf"],[1,"list-group","list-group-flush"],[3,"ngSwitch",4,"ngIf"],["class","list-group-item",3,"click",4,"ngSwitchCase"],["class","list-group-item",3,"click",4,"ngSwitchDefault"],[1,"list-group-item",3,"click"],[1,"px-2"],[1,"mb-1"],["type","text",1,"form-control","form-control-sm","mb-2",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-between","align-items-center"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"d-flex","flex-column"],[1,"form-control","form-control-sm","mb-2",3,"placeholder","ngModel","ngModelChange"],[1,"d-flex","flex-row"],[1,"col","m-0","p-0"],[1,"col-3","m-0","p-0"],["type","checkbox",1,"form-check-input","m-0",3,"checked","click"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"d-flex","flex-row","justify-content-between","mt-1"]],template:function(e,t){1&e&&(C.dc(0,"div",0,1),C.Uc(2,gi,3,1,"div",2),C.Uc(3,Ii,6,5,"div",3),C.dc(4,"i",4),C.nc("click",function(){return t.toggleVisibility()}),C.cc(),C.cc()),2&e&&(C.Kb(2),C.yc("ngIf",t.visible),C.Kb(1),C.yc("ngIf",t.visible),C.Kb(1),C.yc("ngClass",t.visible?"fa-chevron-down":"fa-chevron-up m-2"))},directives:[dn.n,dn.l,dn.p,dn.q,dn.m,dn.r,ui.b,ui.l,ui.n],pipes:[un.a],encapsulation:2}),e})();var Ci=n("N1S/");const Ri=["contextsContainer"];function Ti(e,t){}let Oi=(()=>{class e extends tn.a{constructor(e,t,n,i,r){super(),this._avatarEditorService=e,this._settingsService=t,this._friendListService=n,this._componentFactoryResolver=i,this._ngZone=r,this.view=null,this.cachedNameView=null,this.cachedOwnAvatarMenuView=null,this.cachedAvatarMenuView=null,this.cachedDecorateModeView=null,this.cachedRentableBotMenuView=null,this.cachedPetMenuView=null,this.cachedOwnPetMenuView=null,this.cachedNameBubbles=new Map,this.lastRollOverId=-1,this.userInfoData=new rn,this.petInfoData=new sn,this.rentableBotInfoData=new cn,this.isDancing=!1,this.handlePetInfo=!0,this._isInitialized=!1,this._isRoomEnteredOwnAvatarHighlight=!1,this._isGameMode=!1,this._isUpdating=!1,this._Str_2557=this._Str_2557.bind(this),this.onRoomEngineObjectEvent=this.onRoomEngineObjectEvent.bind(this)}ngOnDestroy(){r.a.instance.ticker.remove(this.update,this)}registerUpdateEvents(e){e&&(r.a.instance.roomEngine.events.addEventListener(a.a.ADDED,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.addEventListener(a.a.REMOVED,this.onRoomEngineObjectEvent),e.addEventListener(Y.RWAIE_AVATAR_INFO,this._Str_2557),e.addEventListener(Rt.RWONE_TYPE,this._Str_2557),e.addEventListener(xt.OWN_USER,this._Str_2557),e.addEventListener(xt.PEER,this._Str_2557),e.addEventListener(z.RWUDUE_USER_DATA_UPDATED,this._Str_2557),e.addEventListener(B.USER_REMOVED,this._Str_2557),e.addEventListener(Ot.FURNI,this._Str_2557),e.addEventListener(xt.BOT,this._Str_2557),e.addEventListener(Ut.RENTABLE_BOT,this._Str_2557),e.addEventListener(Mt.PET_INFO,this._Str_2557),e.addEventListener(B.OBJECT_SELECTED,this._Str_2557),e.addEventListener(B.OBJECT_DESELECTED,this._Str_2557),e.addEventListener(B.OBJECT_ROLL_OVER,this._Str_2557),e.addEventListener(B.OBJECT_ROLL_OUT,this._Str_2557),e.addEventListener(H.RWREUE_NORMAL_MODE,this._Str_2557),e.addEventListener(H.RWREUE_GAME_MODE,this._Str_2557),super.registerUpdateEvents(e))}unregisterUpdateEvents(e){e&&(r.a.instance.roomEngine.events.removeEventListener(a.a.ADDED,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.removeEventListener(a.a.REMOVED,this.onRoomEngineObjectEvent),e.removeEventListener(Y.RWAIE_AVATAR_INFO,this._Str_2557),e.removeEventListener(Rt.RWONE_TYPE,this._Str_2557),e.removeEventListener(xt.OWN_USER,this._Str_2557),e.removeEventListener(xt.PEER,this._Str_2557),e.removeEventListener(z.RWUDUE_USER_DATA_UPDATED,this._Str_2557),e.removeEventListener(B.USER_REMOVED,this._Str_2557),e.removeEventListener(Ot.FURNI,this._Str_2557),e.removeEventListener(xt.BOT,this._Str_2557),e.removeEventListener(Ut.RENTABLE_BOT,this._Str_2557),e.removeEventListener(Mt.PET_INFO,this._Str_2557),e.removeEventListener(B.OBJECT_SELECTED,this._Str_2557),e.removeEventListener(B.OBJECT_DESELECTED,this._Str_2557),e.removeEventListener(B.OBJECT_ROLL_OVER,this._Str_2557),e.removeEventListener(B.OBJECT_ROLL_OUT,this._Str_2557),e.removeEventListener(H.RWREUE_NORMAL_MODE,this._Str_2557),e.removeEventListener(H.RWREUE_GAME_MODE,this._Str_2557),super.unregisterUpdateEvents(e))}onRoomEngineObjectEvent(e){switch(e.type){case a.a.ADDED:{if(e.category!==M.a.UNIT)return;const t=this.handler.roomSession.userDataManager.getUserDataByIndex(e.objectId);if(!t)return;if(-1==this._friendListService.getFriendNames().indexOf(t.name))return;return void this.showFriendNameBubble(t,e.objectId)}case a.a.REMOVED:if(e.category===M.a.UNIT)for(const t of this.cachedNameBubbles.values())t.instance.roomIndex===e.objectId&&this.removeView(t,!1);return}}showFriendNameBubble(e,t){if(!e)return;if(this.cachedNameBubbles.has(e.name))return;const n=this.createView(Tn);n.instance.isFriend=!0,this._ngZone.run(()=>Tn.setup(n.instance,e.webID,e.name,x.a.USER,t,!0)),this.cachedNameBubbles.set(e.name,n),this.toggleUpdateReceiver()}_Str_2557(e){const t=this.view&&this.view.instance||null;switch(e.type){case Y.RWAIE_AVATAR_INFO:{const t=e;this._isRoomEnteredOwnAvatarHighlight=!this._isInitialized&&this.handler.container.roomSession&&t._Str_2707===this.handler.container.roomSession.ownRoomIndex,this._Str_12674(t.userId,t.userName,t._Str_2908,t._Str_2707,t._Str_4330,null),this._isInitialized=!0;break}case Rt.RWONE_TYPE:{const t=e;t.category===M.a.UNIT&&this._Str_12674(t.userId,t.userName,t.userType,t.roomIndex,!1,null);break}case xt.OWN_USER:case xt.PEER:{const t=e;this.userInfoData.populate(t),this._Str_12674(t.webID,t.name,t.userType,t.roomIndex,!1,t.isSpectator?null:this.userInfoData);break}case Mt.PET_INFO:if(this.handlePetInfo){const t=e;this.petInfoData.populate(t),this._Str_24751(t.id,t.name,t._Str_2707,this.petInfoData)}break;case Ut.RENTABLE_BOT:{const t=e;this.rentableBotInfoData||(this.rentableBotInfoData=new cn),this.rentableBotInfoData.populate(t);const n=this.handler.container.roomSessionManager.getSession(0);if(!n)return;const i=n.userDataManager.getRentableBotData(t.id);if(!i)return;this.rentableBotInfoData&&i.botSkills&&this.rentableBotInfoData._Str_19891(i.botSkills),this._Str_16991(t.id,t.name,t.roomIndex,this.rentableBotInfoData);break}case z.RWUDUE_USER_DATA_UPDATED:this._isInitialized||this._Str_25716();break;case B.USER_REMOVED:{const n=e;t&&t.roomIndex===n.id&&this.removeView(this.view,!1);for(const e of this.cachedNameBubbles.values())if(e.instance.roomIndex==n.id){this.removeView(e,!1);break}break}case Ot.FURNI:this.view&&this.removeView(this.view,!1);break;case B.OBJECT_SELECTED:e.category===M.a.UNIT&&(this.handlePetInfo=!0);break;case B.OBJECT_DESELECTED:this.view&&this.removeView(this.view,!1);break;case B.OBJECT_ROLL_OVER:{if(this._isRoomEnteredOwnAvatarHighlight)return;const n=e;t&&(t instanceof Sn||t instanceof Kn||t instanceof wi||t instanceof Yn)||(this.lastRollOverId=n.id,this.messageListener.processWidgetMessage(new te(te.GET_OBJECT_NAME,n.id,n.category)));break}case B.OBJECT_ROLL_OUT:{if(this._isRoomEnteredOwnAvatarHighlight)return;const n=e;t&&(t instanceof Sn||t instanceof Kn||t instanceof wi||t instanceof Yn)||n.id===this.lastRollOverId&&(this.removeView(this.view,!1),this.lastRollOverId=-1);break}case H.RWREUE_NORMAL_MODE:this._isGameMode=!1;break;case H.RWREUE_GAME_MODE:this._isGameMode=!0}this.toggleUpdateReceiver()}_Str_12674(e,t,n,i,r,s){const c=!!s;let o=this.view&&this.view.instance;if(c&&o&&(o instanceof Sn||o instanceof Kn||o instanceof si||o instanceof Yn||o instanceof wi||(this.removeView(this.view,!1),o=null)),o&&o.userId===e&&o.userName===t&&o.userType===n&&o.roomIndex===i)o&&(o instanceof Sn||o instanceof Kn)&&o.userId===e&&this.removeView(this.view,!1);else if(this.view&&this.removeView(this.view,!1),!this._isGameMode)if(c)if(s._Str_11453){if(this.isDecorating)return;if(nn.a.isRunning())return;this.cachedOwnAvatarMenuView||(this.cachedOwnAvatarMenuView=this.createView(Kn)),this.view=this.cachedOwnAvatarMenuView,this._ngZone.run(()=>Kn.setup(this.view.instance,e,t,n,i,s))}else{this.cachedAvatarMenuView||(this.cachedAvatarMenuView=this.createView(Sn)),this.view=this.cachedAvatarMenuView,this._ngZone.run(()=>Sn.setup(this.view.instance,e,t,n,i,s));for(const t of this.cachedNameBubbles.values())if(t.instance.userId===e){this.removeView(t,!1);break}}else this.handler.roomEngine.isDecorating||(this.cachedNameView||(this.cachedNameView=this.createView(Tn)),this.view=this.cachedNameView,this._ngZone.run(()=>{this._ngZone.run(this.handler.container.sessionDataManager.userId===e?()=>Tn.setup(this.view.instance,e,t,n,i):()=>Tn.setup(this.view.instance,e,t,n,i,!0))}))}_Str_16991(e,t,n,i){const r=!!i;let s=this.view&&this.view.instance;r&&s&&(s instanceof Sn||s instanceof Kn||s instanceof wi||s instanceof si||s instanceof Yn||(this.removeView(this.view,!1),s=null)),s&&s.userId===e&&s.userName===t&&s.userType===x.a.RENTABLE_BOT&&s.roomIndex===n?s&&s instanceof wi&&s.userId===e&&this.removeView(this.view,!1):(this.view&&this.removeView(this.view,!1),this._isGameMode||r&&(this.cachedRentableBotMenuView||(this.cachedRentableBotMenuView=this.createView(wi)),this.view=this.cachedRentableBotMenuView,this._ngZone.run(()=>wi.setup(this.view.instance,e,t,x.a.RENTABLE_BOT,n,i))))}_Str_24751(e,t,n,i){const r=!!i;let s=this.view&&this.view.instance;r&&s&&(s instanceof Sn||s instanceof Kn||s instanceof si||s instanceof Yn||s instanceof wi||(this.removeView(this.view,!1),s=null)),s&&s.userId===e&&s.userName===t&&s.userType===x.a.PET&&s.roomIndex===n?s&&(s instanceof Sn||s instanceof Kn)&&s.userId===e&&this.removeView(this.view,!1):(this.view&&this.removeView(this.view,!1),this._isGameMode||r&&(i._Str_5175?(this.cachedOwnPetMenuView||(this.cachedOwnPetMenuView=this.createView(Yn)),this.view=this.cachedOwnPetMenuView,this._ngZone.run(()=>Yn.setup(this.view.instance,e,t,x.a.PET,n,i))):(this.cachedPetMenuView||(this.cachedPetMenuView=this.createView(si)),this.view=this.cachedPetMenuView,this._ngZone.run(()=>si.setup(this.view.instance,e,t,x.a.PET,n,i)))))}createView(e){if(!e)return null;let t=null,n=null;return this._ngZone.run(()=>{const i=this._componentFactoryResolver.resolveComponentFactory(e);t=this.contextsContainer.createComponent(i),n=t.instance}),n&&t?(n.parent=this,n.componentRef=t,t):null}close(){this.removeView(this.view,!1)}removeView(e,t){if(this._isRoomEnteredOwnAvatarHighlight=!1,!e)return;const n=this.contextsContainer.indexOf(e.hostView);-1!==n&&(this.cachedNameView=null,this.cachedOwnAvatarMenuView=null,this.cachedAvatarMenuView=null,this.cachedRentableBotMenuView=null,this.cachedPetMenuView=null,this.cachedOwnPetMenuView=null,e===this.view&&(this.view=null),e instanceof Tn&&(this.cachedNameBubbles.delete(e.instance.userName),this.toggleUpdateReceiver()),this._ngZone.run(()=>this.contextsContainer.remove(n)))}toggleUpdateReceiver(){if(this.view||this.cachedNameBubbles.size>0||this.cachedDecorateModeView){if(this._isUpdating)return;r.a.instance.ticker.add(this.update,this),this._isUpdating=!0}else r.a.instance.ticker.remove(this.update,this),this._isUpdating=!1}update(e){if(this.view){const t=this.view.instance,n=this.messageListener.processWidgetMessage(new Pt(Pt.RWGOI_MESSAGE_GET_OBJECT_LOCATION,t.userId,t.userType));n&&t.update(n.rectangle,n._Str_9337,e)}if(this.cachedDecorateModeView){const t=this.cachedDecorateModeView.instance,n=this.messageListener.processWidgetMessage(new Pt(Pt.RWGOI_MESSAGE_GET_OBJECT_LOCATION,t.userId,t.userType));n&&t.update(n.rectangle,n._Str_9337,e)}for(const t of this.cachedNameBubbles.values()){if(!t)continue;const n=t.instance,i=this.messageListener.processWidgetMessage(new Pt(Pt.RWGOI_MESSAGE_GET_OBJECT_LOCATION,n.userId,n.userType));i&&n.update(i.rectangle,i._Str_9337,e)}}getOwnRoomObject(){const e=this.handler.container.sessionDataManager.userId,t=this.handler.roomEngine.activeRoomId,n=M.a.UNIT,i=this.handler.roomEngine.getTotalObjectsForManager(t,n);let r=0;for(;r<i;){const i=this.handler.roomEngine.getRoomObjectByIndex(t,r,n);if(i){const t=this.handler.roomSession.userDataManager.getUserDataByIndex(i.id);if(t&&t.webID===e)return i}r++}return null}_Str_25716(){this.messageListener.processWidgetMessage(new te(te.GET_OWN_CHARACTER_INFO,0,0))}openAvatarEditor(){this._avatarEditorService.loadOwnAvatarInEditor(),this._settingsService.showAvatarEditor()}useSign(e){this.widgetHandler.container.roomSession.sendSignMessage(e)}get getOwnPosture(){const e=this.getOwnRoomObject();if(e){const t=e.model;if(t)return t.getValue(A.a.FIGURE_POSTURE)}return Jt.a.POSTURE_STAND}get getCanStandUp(){const e=this.getOwnRoomObject();if(e){const t=e.model;if(t)return t.getValue(A.a.FIGURE_CAN_STAND_UP)}return!1}get _Str_12708(){const t=this.getOwnRoomObject();if(t){const n=t.model;if(n){const t=n.getValue(A.a.FIGURE_EFFECT);return t===e._Str_18968||t===e._Str_16970||t===e._Str_18857}}return!1}get _Str_25831(){const t=this.getOwnRoomObject();if(t){const n=t.model;if(n)return n.getValue(A.a.FIGURE_EFFECT)===e._Str_17951}return!1}get handler(){return this.widgetHandler}get isDecorating(){return this.handler.roomSession.isDecorating}set isDecorating(e){if(this.handler.roomSession.isDecorating=e,e){this.cachedDecorateModeView||(this.cachedDecorateModeView=this.createView(In));const e=this.handler.roomSession.ownRoomIndex;In.setup(this.cachedDecorateModeView.instance,this.handler.container.sessionDataManager.userId,this.handler.container.sessionDataManager.userName,en.a.getTypeNumber(en.a.USER),e)}else this.cachedDecorateModeView&&(this.removeView(this.cachedDecorateModeView,!1),this.cachedDecorateModeView=null)}get hasClub(){return this.handler.container.sessionDataManager.clubLevel>=se.a._Str_2964}get hasVip(){return this.handler.container.sessionDataManager.clubLevel>=se.a._Str_2575}}return e._Str_17951=77,e._Str_18968=29,e._Str_16970=30,e._Str_18857=185,e._Str_18641=5e3,e.\u0275fac=function(t){return new(t||e)(C.Yb(Ci.a),C.Yb(Xt.a),C.Yb(Bt.a),C.Yb(C.m),C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-room-avatarinfo-component"]],viewQuery:function(e,t){if(1&e&&C.cd(Ri,1,C.Z),2&e){let e;C.Hc(e=C.oc())&&(t.contextsContainer=e.first)}},features:[C.Hb],decls:3,vars:0,consts:[[1,"nitro-room-avatarinfo-component"],["contextsContainer",""]],template:function(e,t){1&e&&(C.dc(0,"div",0),C.Uc(1,Ti,0,0,"ng-template",null,1,C.Vc),C.cc())},encapsulation:2}),e})();var Mi=n("Ci1R");const Ui=function(e){return[e]};function xi(e,t){if(1&e){const e=C.ec();C.dc(0,"div",6),C.dc(1,"div",7),C.dc(2,"div",8),C.dc(3,"div",9),C.nc("click",function(){C.Lc(e);const n=t.$implicit;return C.qc().selectStyle(n)}),C.Wc(4,"\xa0"),C.cc(),C.cc(),C.cc(),C.cc()}if(2&e){const e=t.$implicit,n=C.qc();C.Kb(1),C.yc("ngClass",C.Cc(4,Ui,n.lastSelectedId===e?"bg-primary":"bg-secondary")),C.Kb(2),C.Nb("chat-bubble bubble-",e," w-100")}}const Ai=function(e){return{active:e}};let Di=(()=>{class e{constructor(e,t){this.changeDetector=e,this.ngZone=t,this.styleSelected=new C.r,this.showStyles=!1,this.lastSelectedId=0,this.styleIds=[]}ngOnInit(){this.lastSelectedId=r.a.instance.sessionDataManager.chatStyle;const e=r.a.instance.getConfiguration("chat.styles");for(const t of e)t&&(t.minRank>0?r.a.instance.sessionDataManager.hasSecurity(t.minRank)&&this.styleIds.push(t.styleId):t.isSystemStyle&&r.a.instance.sessionDataManager.hasSecurity(L.a.MODERATOR)?this.styleIds.push(t.styleId):r.a.instance.getConfiguration("chat.styles.disabled").indexOf(t.styleId)>=0||(t.isHcOnly&&r.a.instance.sessionDataManager.clubLevel>=se.a._Str_2964||t.isAmbassadorOnly&&r.a.instance.sessionDataManager.isAmbassador?this.styleIds.push(t.styleId):t.isHcOnly||t.isAmbassadorOnly||this.styleIds.push(t.styleId)))}ngOnDestroy(){this.hideSelector()}showSelector(){this.showStyles=!0}hideSelector(){this.showStyles=!1}toggleSelector(){this.showStyles?this.hideSelector():this.showSelector()}selectStyle(e){this.lastSelectedId=e,this.styleSelected.emit(e),this.hideSelector()}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(C.j),C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-room-chatinput-styleselector-component"]],outputs:{styleSelected:"styleSelected"},decls:6,vars:4,consts:[[1,"nitro-room-chatinput-styleselector-component"],[1,"icon","chatstyles-icon",3,"click"],[1,"nitro-chatstyle-selector","card","p-3",3,"bringToTop","ngClass"],[1,"grid-container","w-100"],[1,"grid-items","grid-3"],["class","d-flex flex-column item-detail justify-content-center align-items-center",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center"],[1,"d-flex","detail-info","rounded","justify-content-center","align-items-center",3,"ngClass"],[1,"bubble-container"],[3,"click"]],template:function(e,t){1&e&&(C.dc(0,"div",0),C.dc(1,"i",1),C.nc("click",function(){return t.toggleSelector()}),C.cc(),C.dc(2,"div",2),C.dc(3,"div",3),C.dc(4,"div",4),C.Uc(5,xi,5,6,"div",5),C.cc(),C.cc(),C.cc(),C.cc()),2&e&&(C.Kb(2),C.yc("ngClass",C.Cc(2,Ai,t.showStyles)),C.Kb(3),C.yc("ngForOf",t.styleIds))},directives:[Mi.a,dn.l,dn.m],encapsulation:2}),e})();const Li=["chatInputView"];let ki=(()=>{class e extends tn.a{constructor(e){super(),this._ngZone=e,this.selectedUsername="",this.floodBlocked=!1,this.floodBlockedSeconds=0,this.lastContent="",this.isTyping=!1,this.typingStartedSent=!1,this.typingTimer=null,this.idleTimer=null,this.floodTimer=null,this.floodInterval=null,this.currentStyle=-1,this.needsStyleUpdate=!1,this._chatModeIdWhisper=null,this._chatModeIdShout=null,this._chatModeIdSpeak=null,this._maxChatLength=0,this.onKeyDownEvent=this.onKeyDownEvent.bind(this),this.onInputMouseDownEvent=this.onInputMouseDownEvent.bind(this),this.onInputChangeEvent=this.onInputChangeEvent.bind(this),this.onRoomWidgetRoomObjectUpdateEvent=this.onRoomWidgetRoomObjectUpdateEvent.bind(this),this.onRoomWidgetUpdateInfostandUserEvent=this.onRoomWidgetUpdateInfostandUserEvent.bind(this),this.onRoomWidgetChatInputContentUpdateEvent=this.onRoomWidgetChatInputContentUpdateEvent.bind(this),this.onRoomWidgetFloodControlEvent=this.onRoomWidgetFloodControlEvent.bind(this)}ngOnInit(){this._chatModeIdWhisper=r.a.instance.getLocalization("widgets.chatinput.mode.whisper"),this._chatModeIdShout=r.a.instance.getLocalization("widgets.chatinput.mode.shout"),this._chatModeIdSpeak=r.a.instance.getLocalization("widgets.chatinput.mode.speak"),this._maxChatLength=r.a.instance.getConfiguration("chat.input.maxlength",100),this.currentStyle=r.a.instance.sessionDataManager.chatStyle}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{document.body.addEventListener("keydown",this.onKeyDownEvent),this.inputView&&(this.inputView.addEventListener("mousedown",this.onInputMouseDownEvent),this.inputView.addEventListener("input",this.onInputChangeEvent))})}ngOnDestroy(){this._ngZone.runOutsideAngular(()=>{document.body.removeEventListener("keydown",this.onKeyDownEvent),this.inputView&&(this.inputView.removeEventListener("mousedown",this.onInputMouseDownEvent),this.inputView.removeEventListener("input",this.onInputChangeEvent))}),this.resetTypingTimer(),this.resetIdleTimer(),this.resetFloodInterval()}registerUpdateEvents(e){e&&(e.addEventListener(B.OBJECT_DESELECTED,this.onRoomWidgetRoomObjectUpdateEvent),e.addEventListener(xt.PEER,this.onRoomWidgetUpdateInfostandUserEvent),e.addEventListener(Tt.RWWCIDE_CHAT_INPUT_CONTENT,this.onRoomWidgetChatInputContentUpdateEvent),e.addEventListener(oe.RWFCE_FLOOD_CONTROL,this.onRoomWidgetFloodControlEvent),super.registerUpdateEvents(e))}unregisterUpdateEvents(e){e&&(e.removeEventListener(B.OBJECT_DESELECTED,this.onRoomWidgetRoomObjectUpdateEvent),e.removeEventListener(xt.PEER,this.onRoomWidgetUpdateInfostandUserEvent),e.removeEventListener(Tt.RWWCIDE_CHAT_INPUT_CONTENT,this.onRoomWidgetChatInputContentUpdateEvent),e.removeEventListener(oe.RWFCE_FLOOD_CONTROL,this.onRoomWidgetFloodControlEvent))}onRoomWidgetRoomObjectUpdateEvent(e){this.selectedUsername=""}onRoomWidgetUpdateInfostandUserEvent(e){e&&(this.selectedUsername=e.name)}onRoomWidgetChatInputContentUpdateEvent(e){if(e)switch(e._Str_23621){case Tt.WHISPER:{const t=r.a.instance.getLocalization("widgets.chatinput.mode.whisper");return void this.changeInputValue(t+" "+e.userName+" ")}case Tt.SHOUT:return}}onRoomWidgetFloodControlEvent(e){e&&this._ngZone.run(()=>{this.floodBlocked=!0,this.floodBlockedSeconds=e.seconds,this.changeInputValue(r.a.instance.getLocalizationWithParameter("chat.input.alert.flood","time",this.floodBlockedSeconds.toString())),this.startFloodInterval()})}decreaseFloodBlockSeconds(){if(!this.floodBlockedSeconds)return this.resetFloodInterval(),this.floodBlocked=!1,void this.changeInputValue("");this.floodBlockedSeconds=this.floodBlockedSeconds-1,this.changeInputValue(r.a.instance.getLocalizationWithParameter("chat.input.alert.flood","time",this.floodBlockedSeconds.toString()))}sendChat(e,t,n="",i=0){!this.floodBlocked&&this.messageListener&&(this.changeInputValue(""),this.messageListener.processWidgetMessage(new ae(ae.MESSAGE_CHAT,e,t,n,i)))}changeInputValue(e){const t=this.chatInputView&&this.chatInputView.nativeElement||null;t&&(t.parentElement.dataset.value=t.value=e)}onKeyDownEvent(e){if(!e)return;if(this.anotherInputHasFocus())return;document.activeElement!==(this.chatInputView&&this.chatInputView.nativeElement)&&this.setInputFocus();const t=e.shiftKey;switch(e.keyCode){case 32:return void this.checkSpecialKeywordForInput();case 13:return void this.sendChatFromInputField(t);case 8:if(this.inputView){const e=this.inputView.value.split(" ");e[0]===this._chatModeIdWhisper&&3===e.length&&""===e[2]&&(this.changeInputValue(""),this.lastContent="")}return;default:return}}onInputMouseDownEvent(e){this.setInputFocus()}onInputChangeEvent(e){const t=e.target;if(!t)return;const n=t.value;n.length?(this.lastContent=n,this.isTyping||(this.isTyping=!0,this.startTypingTimer()),this.startIdleTimer()):(this.isTyping=!1,this.startTypingTimer())}onStyleSelected(e){e!==this.currentStyle&&(this.currentStyle=e,this.needsStyleUpdate=!0)}sendChatFromInputField(e=!1){if(!this.inputView||""===this.inputView.value)return;let t=e?ae.CHAT_SHOUT:ae.CHAT_DEFAULT,n=this.inputView.value;const i=n.split(" ");let s="",c="";switch(i[0]){case this._chatModeIdWhisper:t=ae.CHAT_WHISPER,s=i[1],c=this._chatModeIdWhisper+" "+s+" ",i.shift(),i.shift();break;case this._chatModeIdShout:t=ae.CHAT_SHOUT,i.shift();break;case this._chatModeIdSpeak:t=ae.CHAT_DEFAULT,i.shift()}n=i.join(" "),this.typingTimer&&this.resetTypingTimer(),this.idleTimer&&this.resetIdleTimer(),n.length<=this._maxChatLength&&(this.needsStyleUpdate&&(r.a.instance.sessionDataManager.sendChatStyleUpdate(this.currentStyle),this.needsStyleUpdate=!1),this.sendChat(n,t,s,this.currentStyle)),this.isTyping=!1,this.typingStartedSent&&this.sendTypingMessage(),this.typingStartedSent=!1,this.changeInputValue(c),this.lastContent=c}sendTypingMessage(){!this.floodBlocked&&this.messageListener&&this.messageListener.processWidgetMessage(new de(this.isTyping))}anotherInputHasFocus(){const e=document.activeElement;return!(!e||this.chatInputView&&this.chatInputView.nativeElement&&this.chatInputView.nativeElement===e||!(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement))}setInputFocus(){const e=this.chatInputView&&this.chatInputView.nativeElement;e&&(e.focus(),e.setSelectionRange(2*e.value.length,2*e.value.length))}checkSpecialKeywordForInput(){const e=this.chatInputView&&this.chatInputView.nativeElement||null;e&&""!==e.value&&e.value===this._chatModeIdWhisper&&0!==this.selectedUsername.length&&this.changeInputValue(`${e.value} ${this.selectedUsername}`)}startIdleTimer(){this.resetIdleTimer(),this.idleTimer=setTimeout(this.onIdleTimerComplete.bind(this),1e4)}resetIdleTimer(){this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null)}onIdleTimerComplete(){this.isTyping&&(this.typingStartedSent=!1),this.isTyping=!1,this.sendTypingMessage()}startTypingTimer(){this.resetTypingTimer(),this.typingTimer=setTimeout(this.onTypingTimerComplete.bind(this),1e3)}resetTypingTimer(){this.typingTimer&&(clearTimeout(this.typingTimer),this.typingTimer=null)}onTypingTimerComplete(){this.isTyping&&(this.typingStartedSent=!0),this.sendTypingMessage()}startFloodInterval(){this.resetFloodInterval(),this.floodInterval=setInterval(this.decreaseFloodBlockSeconds.bind(this),1e3)}resetFloodInterval(){this.floodInterval&&(clearInterval(this.floodInterval),this.floodInterval=null)}get inputMaxLength(){return this._maxChatLength}get inputView(){return this.chatInputView&&this.chatInputView.nativeElement||null}get handler(){return this.widgetHandler}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-room-chatinput-component"]],viewQuery:function(e,t){if(1&e&&C.cd(Li,1),2&e){let e;C.Hc(e=C.oc())&&(t.chatInputView=e.first)}},features:[C.Hb],decls:7,vars:5,consts:[[1,"nitro-room-chatinput-component"],[1,"chatinput-container"],[1,"input-sizer"],["type","text",1,"chat-input",3,"placeholder","disabled","maxLength","input"],["chatInputView",""],[3,"styleSelected"]],template:function(e,t){if(1&e){const e=C.ec();C.dc(0,"div",0),C.dc(1,"div",1),C.dc(2,"div",2),C.dc(3,"input",3,4),C.nc("input",function(){C.Lc(e);const t=C.Ic(4);return t.parentElement.dataset.value=t.value}),C.rc(5,"translate"),C.cc(),C.cc(),C.cc(),C.dc(6,"nitro-room-chatinput-styleselector-component",5),C.nc("styleSelected",function(e){return t.onStyleSelected(e)}),C.cc(),C.cc()}2&e&&(C.Kb(3),C.zc("placeholder",C.sc(5,3,"widgets.chatinput.default")),C.yc("disabled",t.floodBlocked)("maxLength",t.inputMaxLength))},directives:[Di],pipes:[un.a],encapsulation:2}),e})();var Pi=n("sXB4"),Ni=n("Kdsb");let Wi=(()=>{class e{transform(e,t){return e?t?e.filter(e=>e.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())):e:[]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=C.Xb({name:"roomObjectItemSearch",type:e,pure:!0}),e})();function Ki(e,t){if(1&e&&(C.dc(0,"p",13),C.Wc(1),C.cc()),2&e){const e=C.qc().$implicit;C.Kb(1),C.Xc(e.id)}}function Fi(e,t){if(1&e){const e=C.ec();C.dc(0,"li",12),C.nc("click",function(){C.Lc(e);const n=t.$implicit,i=t.index;return C.qc(2).selectItem(n,i)}),C.dc(1,"p",13),C.Wc(2),C.cc(),C.Uc(3,Ki,2,1,"p",14),C.cc()}if(2&e){const e=t.$implicit,n=t.index,i=C.qc(2);C.yc("ngClass",i.selectedItemIndex==n?"selected":""),C.Kb(2),C.Xc(e.name),C.Kb(1),C.yc("ngIf","widget.chooser.furni.title"===i.title)}}function Vi(e,t){if(1&e){const e=C.ec();C.dc(0,"div",1),C.dc(1,"div",2),C.dc(2,"h6",3),C.Wc(3),C.rc(4,"translate"),C.cc(),C.dc(5,"button",4),C.nc("click",function(){return C.Lc(e),C.qc().hide()}),C.Zb(6,"i",5),C.cc(),C.cc(),C.dc(7,"div",6),C.dc(8,"input",7),C.nc("ngModelChange",function(t){return C.Lc(e),C.qc().searchValue=t}),C.rc(9,"translate"),C.cc(),C.cc(),C.dc(10,"div",8),C.dc(11,"perfect-scrollbar",9),C.dc(12,"ul",10),C.Uc(13,Fi,4,3,"li",11),C.rc(14,"roomObjectItemSearch"),C.cc(),C.cc(),C.cc(),C.cc()}if(2&e){const e=C.qc();C.Kb(3),C.Xc(C.sc(4,4,e.title)),C.Kb(5),C.zc("placeholder",C.sc(9,6,"generic.search")),C.yc("ngModel",e.searchValue),C.Kb(5),C.yc("ngForOf",C.tc(14,8,e.items,e.searchValue))}}let qi=(()=>{class e extends tn.a{constructor(e){super(),this._ngZone=e,this._visible=!1,this._items=[],this._title=null,this._timeout=null,this._selectedItemIndex=-1}ngOnDestroy(){this.clearTimeout()}hide(){this._visible=!1}selectItem(e,t){e&&this.items&&this.items.length&&(this._selectedItemIndex=t,this._ngZone.runOutsideAngular(()=>this.messageListener.processWidgetMessage(new te(te.SELECT_OBJECT,e.id,e.category))))}clearTimeout(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null)}get visible(){return this._visible}set visible(e){this._visible=e}get title(){return this._title}set title(e){this._title=e}get items(){return this._items}set items(e){this._items=e}get selectedItemIndex(){return this._selectedItemIndex}get searchValue(){return this._searchValue}set searchValue(e){this._selectedItemIndex=-1,this._searchValue=e}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-room-chooser-base-component"]],features:[C.Hb],decls:1,vars:1,consts:[["class","nitro-chooser-component card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-chooser-component","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","px-3","pt-3","input-group"],["type","text",1,"form-control","form-control-sm","chooser-search",3,"ngModel","placeholder","ngModelChange"],[1,"d-flex","p-3"],[2,"min-height","180px","max-height","180px","height","180px"],[1,"list-group"],["class","d-flex justify-content-between align-items-center bg-secondary rounded mb-1 px-2 py-1 chooser-item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","bg-secondary","rounded","mb-1","px-2","py-1","chooser-item",3,"ngClass","click"],[1,"mb-0"],["class","mb-0",4,"ngIf"]],template:function(e,t){1&e&&C.Uc(0,Vi,15,11,"div",0),2&e&&C.yc("ngIf",t.visible)},directives:[dn.n,Mi.a,Pi.a,ui.b,ui.l,ui.n,Ni.b,dn.m,dn.l],pipes:[un.a,Wi],encapsulation:2}),e})();function Hi(e,t){if(1&e&&(C.dc(0,"p",13),C.Wc(1),C.cc()),2&e){const e=C.qc().$implicit;C.Kb(1),C.Xc(e.id)}}function Bi(e,t){if(1&e){const e=C.ec();C.dc(0,"li",12),C.nc("click",function(){C.Lc(e);const n=t.$implicit,i=t.index;return C.qc(2).selectItem(n,i)}),C.dc(1,"p",13),C.Wc(2),C.cc(),C.Uc(3,Hi,2,1,"p",14),C.cc()}if(2&e){const e=t.$implicit,n=t.index,i=C.qc(2);C.yc("ngClass",i.selectedItemIndex==n?"selected":""),C.Kb(2),C.Xc(e.name),C.Kb(1),C.yc("ngIf","widget.chooser.furni.title"===i.title)}}function Gi(e,t){if(1&e){const e=C.ec();C.dc(0,"div",1),C.dc(1,"div",2),C.dc(2,"h6",3),C.Wc(3),C.rc(4,"translate"),C.cc(),C.dc(5,"button",4),C.nc("click",function(){return C.Lc(e),C.qc().hide()}),C.Zb(6,"i",5),C.cc(),C.cc(),C.dc(7,"div",6),C.dc(8,"input",7),C.nc("ngModelChange",function(t){return C.Lc(e),C.qc().searchValue=t}),C.rc(9,"translate"),C.cc(),C.cc(),C.dc(10,"div",8),C.dc(11,"perfect-scrollbar",9),C.dc(12,"ul",10),C.Uc(13,Bi,4,3,"li",11),C.rc(14,"roomObjectItemSearch"),C.cc(),C.cc(),C.cc(),C.cc()}if(2&e){const e=C.qc();C.Kb(3),C.Xc(C.sc(4,4,e.title)),C.Kb(5),C.zc("placeholder",C.sc(9,6,"generic.search")),C.yc("ngModel",e.searchValue),C.Kb(5),C.yc("ngForOf",C.tc(14,8,e.items,e.searchValue))}}let Zi=(()=>{class e extends qi{constructor(e){super(e),this._ngZone=e,this._title="widget.chooser.furni.title",this.onRoomWidgetChooserContentEvent=this.onRoomWidgetChooserContentEvent.bind(this),this.onRoomWidgetRoomObjectUpdateEvent=this.onRoomWidgetRoomObjectUpdateEvent.bind(this)}registerUpdateEvents(e){e&&(e.addEventListener(Ne.RWCCE_FURNI_CHOOSER_CONTENT,this.onRoomWidgetChooserContentEvent),e.addEventListener(B.FURNI_ADDED,this.onRoomWidgetRoomObjectUpdateEvent),e.addEventListener(B.FURNI_REMOVED,this.onRoomWidgetRoomObjectUpdateEvent),super.registerUpdateEvents(e))}unregisterUpdateEvents(e){e&&(e.removeEventListener(Ne.RWCCE_FURNI_CHOOSER_CONTENT,this.onRoomWidgetChooserContentEvent),e.removeEventListener(B.FURNI_ADDED,this.onRoomWidgetRoomObjectUpdateEvent),e.removeEventListener(B.FURNI_REMOVED,this.onRoomWidgetRoomObjectUpdateEvent),super.unregisterUpdateEvents(e))}onRoomWidgetChooserContentEvent(e){e&&this._ngZone.run(()=>{this._items=e.items,this.visible=!0})}onRoomWidgetRoomObjectUpdateEvent(e){e&&this.visible&&(this.clearTimeout(),this._timeout=setTimeout(()=>{this.messageListener.processWidgetMessage(new ue(ue.RWRWM_FURNI_CHOOSER))},100))}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-room-chooser-furni"]],features:[C.Hb],decls:1,vars:1,consts:[["class","nitro-chooser-component card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-chooser-component","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","px-3","pt-3","input-group"],["type","text",1,"form-control","form-control-sm","chooser-search",3,"ngModel","placeholder","ngModelChange"],[1,"d-flex","p-3"],[2,"min-height","180px","max-height","180px","height","180px"],[1,"list-group"],["class","d-flex justify-content-between align-items-center bg-secondary rounded mb-1 px-2 py-1 chooser-item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","bg-secondary","rounded","mb-1","px-2","py-1","chooser-item",3,"ngClass","click"],[1,"mb-0"],["class","mb-0",4,"ngIf"]],template:function(e,t){1&e&&C.Uc(0,Gi,15,11,"div",0),2&e&&C.yc("ngIf",t.visible)},directives:[dn.n,Mi.a,Pi.a,ui.b,ui.l,ui.n,Ni.b,dn.m,dn.l],pipes:[un.a,Wi],encapsulation:2}),e})();function Xi(e,t){if(1&e&&(C.dc(0,"p",13),C.Wc(1),C.cc()),2&e){const e=C.qc().$implicit;C.Kb(1),C.Xc(e.id)}}function ji(e,t){if(1&e){const e=C.ec();C.dc(0,"li",12),C.nc("click",function(){C.Lc(e);const n=t.$implicit,i=t.index;return C.qc(2).selectItem(n,i)}),C.dc(1,"p",13),C.Wc(2),C.cc(),C.Uc(3,Xi,2,1,"p",14),C.cc()}if(2&e){const e=t.$implicit,n=t.index,i=C.qc(2);C.yc("ngClass",i.selectedItemIndex==n?"selected":""),C.Kb(2),C.Xc(e.name),C.Kb(1),C.yc("ngIf","widget.chooser.furni.title"===i.title)}}function Yi(e,t){if(1&e){const e=C.ec();C.dc(0,"div",1),C.dc(1,"div",2),C.dc(2,"h6",3),C.Wc(3),C.rc(4,"translate"),C.cc(),C.dc(5,"button",4),C.nc("click",function(){return C.Lc(e),C.qc().hide()}),C.Zb(6,"i",5),C.cc(),C.cc(),C.dc(7,"div",6),C.dc(8,"input",7),C.nc("ngModelChange",function(t){return C.Lc(e),C.qc().searchValue=t}),C.rc(9,"translate"),C.cc(),C.cc(),C.dc(10,"div",8),C.dc(11,"perfect-scrollbar",9),C.dc(12,"ul",10),C.Uc(13,ji,4,3,"li",11),C.rc(14,"roomObjectItemSearch"),C.cc(),C.cc(),C.cc(),C.cc()}if(2&e){const e=C.qc();C.Kb(3),C.Xc(C.sc(4,4,e.title)),C.Kb(5),C.zc("placeholder",C.sc(9,6,"generic.search")),C.yc("ngModel",e.searchValue),C.Kb(5),C.yc("ngForOf",C.tc(14,8,e.items,e.searchValue))}}let zi=(()=>{class e extends qi{constructor(e){super(e),this._ngZone=e,this.title="widget.chooser.user.title",this.onRoomWidgetChooserContentEvent=this.onRoomWidgetChooserContentEvent.bind(this),this.onRoomWidgetRoomObjectUpdateEvent=this.onRoomWidgetRoomObjectUpdateEvent.bind(this)}registerUpdateEvents(e){null!=e&&(e.addEventListener(Ne.RWCCE_USER_CHOOSER_CONTENT,this.onRoomWidgetChooserContentEvent),e.addEventListener(B.USER_REMOVED,this.onRoomWidgetRoomObjectUpdateEvent.bind(this)),e.addEventListener(B.USER_ADDED,this.onRoomWidgetRoomObjectUpdateEvent.bind(this)),super.registerUpdateEvents(e))}unregisterUpdateEvents(e){null!=e&&(e.removeEventListener(Ne.RWCCE_USER_CHOOSER_CONTENT,this.onRoomWidgetChooserContentEvent),e.removeEventListener(B.USER_REMOVED,this.onRoomWidgetRoomObjectUpdateEvent.bind(this)),e.removeEventListener(B.USER_ADDED,this.onRoomWidgetRoomObjectUpdateEvent.bind(this)),super.unregisterUpdateEvents(e))}onRoomWidgetChooserContentEvent(e){e&&this._ngZone.run(()=>{this._items=e.items,this.visible=!0})}onRoomWidgetRoomObjectUpdateEvent(e){this.visible&&(this.clearTimeout(),this._timeout=setTimeout(()=>{this.messageListener.processWidgetMessage(new ue(ue.RWRWM_USER_CHOOSER))},100))}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-room-chooser-user"]],features:[C.Hb],decls:1,vars:1,consts:[["class","nitro-chooser-component card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-chooser-component","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","px-3","pt-3","input-group"],["type","text",1,"form-control","form-control-sm","chooser-search",3,"ngModel","placeholder","ngModelChange"],[1,"d-flex","p-3"],[2,"min-height","180px","max-height","180px","height","180px"],[1,"list-group"],["class","d-flex justify-content-between align-items-center bg-secondary rounded mb-1 px-2 py-1 chooser-item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","bg-secondary","rounded","mb-1","px-2","py-1","chooser-item",3,"ngClass","click"],[1,"mb-0"],["class","mb-0",4,"ngIf"]],template:function(e,t){1&e&&C.Uc(0,Yi,15,11,"div",0),2&e&&C.yc("ngIf",t.visible)},directives:[dn.n,Mi.a,Pi.a,ui.b,ui.l,ui.n,Ni.b,dn.m,dn.l],pipes:[un.a,Wi],encapsulation:2}),e})();const $i=["activeView"];let Qi=(()=>{class e{constructor(){this.parent=null,this.requestId=0,this.userId=0,this.userName=""}update(e,t){if(!e)return void this.hide();let n=Math.round(e.left+e.width/2-this.activeViewElement.offsetWidth/2),i=Math.round(e.top-this.activeViewElement.offsetHeight+10);i<=0&&(i=an.SPACE_AROUND_EDGES),i>=r.a.instance.height-this.activeViewElement.offsetHeight&&(i=r.a.instance.height-this.activeViewElement.offsetHeight-an.SPACE_AROUND_EDGES),n>=r.a.instance.width-this.activeViewElement.offsetWidth&&(n=r.a.instance.width-this.activeViewElement.offsetWidth-an.SPACE_AROUND_EDGES),this.activeViewElement.style.left=n+"px",this.activeViewElement.style.top=i+"px"}hide(){this.parent&&this.parent.removeFriendRequest(this.requestId)}acceptFriendRequest(){this.parent&&this.parent.acceptFriendRequest(this.requestId)}declineFriendRequest(){this.parent&&this.parent.declineFriendRequest(this.requestId)}get activeViewElement(){return this.activeView&&this.activeView.nativeElement||null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=C.Sb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&C.cd($i,1),2&e){let e;C.Hc(e=C.oc())&&(t.activeView=e.first)}},decls:15,vars:11,consts:[[1,"nitro-widget-friendrequest-dialog","context-menu","card","align-items-center","p-2"],["activeView",""],[1,"drag-handler","d-flex","justify-content-between","align-items-center","mb-1","w-100",2,"font-size","14px"],[1,"m-0","text-wrap","w-100",2,"max-width","95%"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","justify-content-between","align-items-center","w-100"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["type","button",1,"btn","btn-sm","btn-success",3,"click"]],template:function(e,t){1&e&&(C.dc(0,"div",0,1),C.dc(2,"div",2),C.dc(3,"p",3),C.Wc(4),C.rc(5,"translate"),C.cc(),C.dc(6,"button",4),C.nc("click",function(){return t.hide()}),C.Zb(7,"i",5),C.cc(),C.cc(),C.dc(8,"div",6),C.dc(9,"button",7),C.nc("click",function(){return t.declineFriendRequest()}),C.Wc(10),C.rc(11,"translate"),C.cc(),C.dc(12,"button",8),C.nc("click",function(){return t.acceptFriendRequest()}),C.Wc(13),C.rc(14,"translate"),C.cc(),C.cc(),C.cc()),2&e&&(C.Kb(4),C.Xc(C.uc(5,3,"widget.friendrequest.from","username",t.userName)),C.Kb(6),C.Xc(C.sc(11,7,"widget.friendrequest.decline")),C.Kb(3),C.Xc(C.sc(14,9,"widget.friendrequest.accept")))},pipes:[un.a],encapsulation:2}),e})();const Ji=["contextsContainer"];function er(e,t){}let tr=(()=>{class e extends tn.a{constructor(e,t){super(),this._componentFactoryResolver=e,this._ngZone=t,this.cachedFriendRequestDialogs=new Map,this.onRoomWidgetFriendRequestUpdateEvent=this.onRoomWidgetFriendRequestUpdateEvent.bind(this)}ngOnDestroy(){r.a.instance.ticker.remove(this.update,this)}registerUpdateEvents(e){e&&(e.addEventListener(Ae.RWFRUE_SHOW_FRIEND_REQUEST,this.onRoomWidgetFriendRequestUpdateEvent),e.addEventListener(Ae.RWFRUE_HIDE_FRIEND_REQUEST,this.onRoomWidgetFriendRequestUpdateEvent),super.registerUpdateEvents(e))}unregisterUpdateEvents(e){e&&(e.removeEventListener(Ae.RWFRUE_SHOW_FRIEND_REQUEST,this.onRoomWidgetFriendRequestUpdateEvent),e.removeEventListener(Ae.RWFRUE_HIDE_FRIEND_REQUEST,this.onRoomWidgetFriendRequestUpdateEvent),super.unregisterUpdateEvents(e))}onRoomWidgetFriendRequestUpdateEvent(e){if(e){switch(e.type){case Ae.RWFRUE_SHOW_FRIEND_REQUEST:this.createFriendRequest(e.requestId,e.userId,e.userName);break;case Ae.RWFRUE_HIDE_FRIEND_REQUEST:this.removeFriendRequest(e.requestId)}this.toggleUpdateReceiver()}}createFriendRequest(e,t,n){const i=this.createView(Qi);i&&(i.instance.requestId=e,i.instance.userId=t,i.instance.userName=n,this.cachedFriendRequestDialogs.set(i.instance,i))}removeFriendRequest(e){for(const t of this.cachedFriendRequestDialogs.values()){if(!t)continue;const n=t.instance;if(n&&n.requestId===e)return void this.removeView(t)}}toggleUpdateReceiver(){this.cachedFriendRequestDialogs&&this.cachedFriendRequestDialogs.size?r.a.instance.ticker.add(this.update,this):r.a.instance.ticker.remove(this.update,this)}createView(e){if(!e)return null;let t=null,n=null;return this._ngZone.run(()=>{const i=this._componentFactoryResolver.resolveComponentFactory(e);t=this.contextsContainer.createComponent(i),n=t.instance}),n&&t?(n.parent=this,t):null}removeView(e){if(!e)return;const t=this.contextsContainer.indexOf(e.hostView);-1!==t&&(this.cachedFriendRequestDialogs.delete(e.instance),this.toggleUpdateReceiver(),this._ngZone.run(()=>this.contextsContainer.remove(t)))}update(e){for(const t of this.cachedFriendRequestDialogs.values()){if(!t)continue;const e=t.instance,n=this.messageListener.processWidgetMessage(new Pt(Pt.RWGOI_MESSAGE_GET_OBJECT_LOCATION,e.userId,x.a.USER));n&&e.update(n.rectangle,n._Str_9337)}}acceptFriendRequest(e){this.messageListener&&(this.messageListener.processWidgetMessage(new De(De.RWFRM_ACCEPT,e)),this.removeFriendRequest(e))}declineFriendRequest(e){this.messageListener&&(this.messageListener.processWidgetMessage(new De(De.RWFRM_DECLINE,e)),this.removeFriendRequest(e))}get handler(){return this.widgetHandler}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(C.m),C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-room-friendrequest-component"]],viewQuery:function(e,t){if(1&e&&C.cd(Ji,1,C.Z),2&e){let e;C.Hc(e=C.oc())&&(t.contextsContainer=e.first)}},features:[C.Hb],decls:3,vars:0,consts:[[1,"nitro-widget-friendrequest"],["contextsContainer",""]],template:function(e,t){1&e&&(C.dc(0,"div",0),C.Uc(1,er,0,0,"ng-template",null,1,C.Vc),C.cc())},encapsulation:2}),e})();var nr=n("xgCK"),ir=n("dI4H"),rr=n("eaoH");function sr(e,t){if(1&e){const e=C.ec();C.dc(0,"div",1),C.dc(1,"div",2),C.dc(2,"h6",3),C.Wc(3),C.rc(4,"translate"),C.cc(),C.dc(5,"div",4),C.nc("click",function(){return C.Lc(e),C.qc().hide()}),C.Zb(6,"i",5),C.cc(),C.cc(),C.dc(7,"div",6),C.dc(8,"div",7),C.dc(9,"color-chrome",8),C.nc("onChangeComplete",function(t){return C.Lc(e),C.qc().handleChangeComplete(t)}),C.cc(),C.cc(),C.dc(10,"div",9),C.dc(11,"button",10),C.nc("click",function(){return C.Lc(e),C.qc().handleButton("apply")}),C.Wc(12),C.rc(13,"translate"),C.cc(),C.dc(14,"button",10),C.nc("click",function(){return C.Lc(e),C.qc().handleButton("on_off")}),C.Wc(15),C.rc(16,"translate"),C.cc(),C.cc(),C.cc(),C.cc()}if(2&e){const e=C.qc();C.Kb(3),C.Xc(C.sc(4,5,"widget.backgroundcolor.title")),C.Kb(6),C.yc("color",e.hsl)("disableAlpha",!0),C.Kb(3),C.Xc(C.sc(13,7,"widget.backgroundcolor.button.apply")),C.Kb(3),C.Xc(C.sc(16,9,"widget.backgroundcolor.button.on"))}}let cr=(()=>{class e extends tn.a{constructor(e){super(),this._ngZone=e,this._furniId=-1,this._visible=!1,this.saturation=0,this.hue=0,this.lightness=0,this.hsl={h:0,s:0,l:0}}open(e,t,n,i){this._ngZone.run(()=>{this._furniId=e,this._visible=!0,this.hue=Math.max(t,0),this.saturation=Math.max(n,0),this.lightness=Math.max(i,0),this.hsl={h:this.hue/255*360,s:this.saturation/255,l:this.lightness/255}})}hide(){this._visible=!1,this._furniId=-1}handleChangeComplete(e){if(!e)return;const t=N.a._Str_22130(parseInt(e.color.hex.replace("#",""),16));this.hue=t>>16&255,this.saturation=t>>8&255,this.lightness=255&t}handleButton(e){switch(e){case"apply":this.handler.container.connection.send(new ir.a(this._furniId,this.hue,this.saturation,this.lightness));break;case"on_off":this.handler.container.connection.send(new nr.a(this._furniId))}}get handler(){return this.widgetHandler}get visible(){return this._visible}get delaySliderOptions(){return{floor:0,ceil:255,step:1,hidePointerLabels:!0,hideLimitLabels:!0}}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-room-furniture-backgroundcolor-component"]],features:[C.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-dimmer card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-dimmer","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","align-items-center","justify-content-between","pt-3","px-3","w-100"],[1,"m-0"],[1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"d-flex","justify-content-center","align-items-center"],[3,"color","disableAlpha","onChangeComplete"],[1,"d-flex","justify-content-between","align-items-center","mt-2"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(e,t){1&e&&C.Uc(0,sr,17,11,"div",0),2&e&&C.yc("ngIf",t.visible)},directives:[dn.n,Mi.a,Pi.a,rr.a],pipes:[un.a],encapsulation:2}),e})();var or=n("nyZ2"),ar=n("Zmf8"),lr=n("ylpd"),dr=n("mjBu");function ur(e,t){if(1&e){const e=C.ec();C.dc(0,"div",1),C.dc(1,"div",2),C.dc(2,"h6",3),C.Wc(3),C.rc(4,"translate"),C.cc(),C.dc(5,"button",4),C.nc("click",function(){return C.Lc(e),C.qc().hide()}),C.Zb(6,"i",5),C.cc(),C.cc(),C.dc(7,"div",6),C.dc(8,"div",7),C.Zb(9,"div",8),C.cc(),C.dc(10,"div",9),C.dc(11,"p"),C.Wc(12),C.rc(13,"translate"),C.cc(),C.dc(14,"p"),C.Wc(15),C.rc(16,"translate"),C.cc(),C.cc(),C.cc(),C.dc(17,"div",10),C.dc(18,"button",11),C.nc("click",function(){return C.Lc(e),C.qc().handleButton("cancel")}),C.Wc(19),C.rc(20,"translate"),C.cc(),C.dc(21,"button",12),C.nc("click",function(){return C.Lc(e),C.qc().handleButton("use")}),C.Wc(22),C.rc(23,"translate"),C.cc(),C.cc(),C.cc()}if(2&e){const e=C.qc();C.Kb(3),C.Xc(C.sc(4,7,"useproduct.widget.title.bind_clothing")),C.Kb(6),C.yc("figure",e.newFigureString)("direction",2),C.Kb(3),C.Xc(C.sc(13,9,"useproduct.widget.text.bind_clothing")),C.Kb(3),C.Xc(C.sc(16,11,"useproduct.widget.info.bind_clothing")),C.Kb(4),C.Xc(C.sc(20,13,"useproduct.widget.cancel")),C.Kb(3),C.Xc(C.sc(23,15,"useproduct.widget.bind_clothing"))}}let hr=(()=>{class e{constructor(){this.contextWidget=null,this.objectId=null,this.visible=!1,this._furniData=null,this._requestObjectId=-1,this.caption=null}hide(){this.contextWidget&&this.contextWidget.closeClothing()}open(e){if(!this.contextWidget)return;const t=this.contextWidget.handler.container.roomEngine.getRoomObject(this.contextWidget.handler.container.roomSession.roomId,e,M.a.FLOOR);if(!t)return;this._furniData=this.contextWidget.handler.getFurniData(t),this._requestObjectId=t.id;let n=-1;const i=[],r=this.contextWidget.handler.container.sessionDataManager.gender;switch(this._furniData.specialType){case lr.a.FIGURE_PURCHASABLE_SET:{n=0;const e=this._furniData.customParams.split(",");for(let t=0;t<e.length;t++){const n=Number.parseInt(e[t]);this.contextWidget.handler.container.avatarRenderManager.isValidFigureSetForGender(n,r)&&i.push(n)}}}this.newFigureString=this.contextWidget.handler.container.avatarRenderManager.getFigureStringWithFigureIds(this.contextWidget.handler.container.sessionDataManager.figure,r,i),this.contextWidget.inventoryService.hasBoundFigureSetFurniture(this.newFigureString)?this.contextWidget.handler.container.connection.send(new ar.a(r,this.newFigureString)):this.showWindow(n)}handleButton(e){switch(e){case"cancel":this.hide();break;case"use":{const e=this.contextWidget.handler.container.sessionDataManager.gender;this.contextWidget.handler.container.connection.send(new or.a(this._requestObjectId)),this.contextWidget.handler.container.connection.send(new ar.a(e,this.newFigureString)),this.hide()}}}showWindow(e){this.caption=r.a.instance.localization.getValueWithParameter("useproduct.widget.text.bind_clothing","productName",this._furniData.name),this.visible=!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=C.Sb({type:e,selectors:[["ng-component"]],inputs:{contextWidget:"contextWidget",objectId:"objectId"},decls:1,vars:1,consts:[["class","nitro-furniture-purchasable-clothing card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-purchasable-clothing","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-3"],[1,"col-4","d-flex","align-items-center","justify-content-center"],["nitro-avatar-image","",1,"bg-secondary","rounded",3,"figure","direction"],[1,"col-8","d-flex","flex-column","align-items-center","justify-content-center"],[1,"d-flex","justify-content-between","align-items-center","p-3"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-success",3,"click"]],template:function(e,t){1&e&&C.Uc(0,ur,24,17,"div",0),2&e&&C.yc("ngIf",t.visible)},directives:[dn.n,Mi.a,Pi.a,dr.a],pipes:[un.a],encapsulation:2}),e})();var gr=n("cC5F");const mr=["purchaseClothing"];let fr=(()=>{class e extends tn.a{constructor(e,t,n){super(),this._ngZone=e,this._resolver=t,this.inventoryService=n,this._visible=!1,this._selectedObject=null}registerUpdateEvents(e){e&&super.registerUpdateEvents(e)}unregisterUpdateEvents(e){e&&super.unregisterUpdateEvents(e)}_Str_24748(e){this._selectedObject=e,this._ngZone.run(()=>{this.purchaseClothingContainer.clear();const t=this._resolver.resolveComponentFactory(hr);this._purchaseClothingContainerRef=this.purchaseClothingContainer.createComponent(t),this._purchaseClothingContainerRef.instance.contextWidget=this,this._purchaseClothingContainerRef.instance.open(e.id)})}closeClothing(){this._ngZone.run(()=>this.purchaseClothingContainer.clear())}hide(){this._visible=!1}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(e){this._visible=e}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(C.H),C.Yb(C.m),C.Yb(gr.a))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-room-furniture-context-menu-component"]],viewQuery:function(e,t){if(1&e&&C.cd(mr,1,C.Z),2&e){let e;C.Hc(e=C.oc())&&(t.purchaseClothingContainer=e.first)}},features:[C.Hb],decls:2,vars:0,consts:[["purchaseClothing",""]],template:function(e,t){1&e&&C.Zb(0,"template",null,0)},encapsulation:2}),e})();function pr(e,t){if(1&e){const e=C.ec();C.dc(0,"div",1),C.dc(1,"div",2),C.dc(2,"h6",3),C.Wc(3),C.rc(4,"translate"),C.cc(),C.dc(5,"button",4),C.nc("click",function(){return C.Lc(e),C.qc().hide()}),C.Zb(6,"i",5),C.cc(),C.cc(),C.dc(7,"div",6),C.dc(8,"p"),C.Wc(9),C.rc(10,"translate"),C.cc(),C.dc(11,"div",7),C.dc(12,"button",8),C.nc("click",function(){return C.Lc(e),C.qc().hide()}),C.Wc(13),C.rc(14,"translate"),C.cc(),C.dc(15,"button",9),C.nc("click",function(){return C.Lc(e),C.qc().sendRedeem()}),C.Wc(16),C.rc(17,"translate"),C.cc(),C.cc(),C.cc(),C.cc()}if(2&e){const e=C.qc();C.Kb(3),C.Xc(C.sc(4,4,"catalog.redeem.dialog.title")),C.Kb(6),C.Xc(C.uc(10,6,"widgets.furniture.credit.redeem.value","value",e.value)),C.Kb(4),C.Xc(C.sc(14,10,"generic.cancel")),C.Kb(3),C.Xc(C.sc(17,12,"catalog.redeem.dialog.button.exchange"))}}let _r=(()=>{class e extends tn.a{constructor(e){super(),this._ngZone=e,this._objectId=-1,this._value="0",this._visible=!1,this.onRoomWidgetCreditFurniUpdateEvent=this.onRoomWidgetCreditFurniUpdateEvent.bind(this)}registerUpdateEvents(e){e&&(e.addEventListener(He.RWCFUE_CREDIT_FURNI_UPDATE,this.onRoomWidgetCreditFurniUpdateEvent),super.registerUpdateEvents(e))}unregisterUpdateEvents(e){e&&(e.removeEventListener(He.RWCFUE_CREDIT_FURNI_UPDATE,this.onRoomWidgetCreditFurniUpdateEvent),super.unregisterUpdateEvents(e))}onRoomWidgetCreditFurniUpdateEvent(e){e&&(this._objectId=e.objectId,this._ngZone.run(()=>{this._value=e.value.toString(),this._visible=!0}))}sendRedeem(){-1!==this._objectId&&(this.messageListener.processWidgetMessage(new Be(Be.RWFCRM_REDEEM,this._objectId)),this.hide())}hide(){this._visible=!1}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(e){this._visible=e}get value(){return this._value}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-room-furniture-credit-compontent"]],features:[C.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-credit card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-credit","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"d-flex","justify-content-between"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"click"]],template:function(e,t){1&e&&C.Uc(0,pr,18,14,"div",0),2&e&&C.yc("ngIf",t.visible)},directives:[dn.n,Mi.a,Pi.a],pipes:[un.a],encapsulation:2}),e})();var br=n("pcz9");function vr(e,t){if(1&e){const e=C.ec();C.dc(0,"div",1),C.dc(1,"div",2),C.dc(2,"h6",3),C.Wc(3),C.rc(4,"translate"),C.cc(),C.dc(5,"button",4),C.nc("click",function(){return C.Lc(e),C.qc().hide()}),C.Zb(6,"i",5),C.cc(),C.cc(),C.dc(7,"div",6),C.dc(8,"p",7),C.Wc(9),C.rc(10,"translate"),C.cc(),C.dc(11,"div",8),C.dc(12,"input",9),C.nc("input",function(t){return C.Lc(e),C.qc().slideToHeight(t.target.value)}),C.cc(),C.dc(13,"input",10),C.nc("ngModelChange",function(t){return C.Lc(e),C.qc().height=t}),C.cc(),C.cc(),C.dc(14,"div",11),C.dc(15,"button",12),C.nc("click",function(){return C.Lc(e),C.qc().placeAboveStack()}),C.Wc(16),C.rc(17,"translate"),C.cc(),C.dc(18,"button",12),C.nc("click",function(){return C.Lc(e),C.qc().placeAtFloor()}),C.Wc(19),C.rc(20,"translate"),C.cc(),C.cc(),C.cc(),C.cc()}if(2&e){const e=C.qc();C.Kb(3),C.Xc(C.sc(4,10,"widget.custom.stack.height.title")),C.Kb(6),C.Xc(C.sc(10,12,"widget.custom.stack.height.text")),C.Kb(3),C.zc("value",e.height),C.yc("min",e.minHeight)("max",e.maxHeight),C.Kb(1),C.yc("ngModel",e.height)("min",e.minHeight)("max",e.maxHeight),C.Kb(3),C.Xc(C.sc(17,14,"furniture.above.stack")),C.Kb(3),C.Xc(C.sc(20,16,"furniture.floor.level"))}}let Er=(()=>{class e extends tn.a{constructor(e){super(),this._ngZone=e,this._visible=!1,this._furniId=-1,this._height=0,this._saveTimeout=null}open(e,t){this._ngZone.run(()=>{this._furniId=e,this._height=t,this._visible=!0,this.setHeight(t,!0)})}update(e,t){this._ngZone.run(()=>this._furniId===e&&this.setHeight(t,!0))}hide(){this._visible=!1,this._furniId=-1,this._height=0}setHeight(t,n=!1){t=Math.abs(t),n||t>e.MAX_HEIGHT&&(t=e.MAX_HEIGHT),this._height=parseFloat(t.toFixed(2)),n||this.scheduleUpdate(100*this._height)}scheduleUpdate(e){this._saveTimeout&&(clearTimeout(this._saveTimeout),this._saveTimeout=null),this._saveTimeout=setTimeout(()=>this.sendUpdate(e),5)}sendUpdate(e){this.widgetHandler.container.connection.send(new br.a(this._furniId,~~e))}placeAboveStack(){this.sendUpdate(-100)}placeAtFloor(){this.sendUpdate(0)}slideToHeight(e){this.height=e}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(e){this._visible=e}get furniId(){return this._furniId}get height(){return this._height}set height(e){this.setHeight(e,!1)}get minHeight(){return 0}get maxHeight(){return e.MAX_HEIGHT}}return e.MAX_HEIGHT=40,e.MAX_RANGE_HEIGHT=10,e.STEP_VALUE=.01,e.\u0275fac=function(t){return new(t||e)(C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-room-furniture-customstackheight-component"]],features:[C.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-customstackheight card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-customstackheight","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"text-justify","mb-2"],[1,"d-flex","justify-content-center","align-items-center","mb-2"],["type","range",1,"custom-range","ml-1",3,"value","min","max","input"],["name","heightInput","type","number",1,"form-control","form-control-sm",3,"ngModel","min","max","ngModelChange"],[1,"d-flex","justify-content-between","align-items-center"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(e,t){1&e&&C.Uc(0,vr,21,18,"div",0),2&e&&C.yc("ngIf",t.visible)},directives:[dn.n,Mi.a,Pi.a,ui.p,ui.b,ui.l,ui.n],pipes:[un.a],encapsulation:2}),e})();var Sr=n("mgaL");function yr(e,t){if(1&e){const e=C.ec();C.dc(0,"button",21),C.nc("click",function(){C.Lc(e);const n=t.index;return C.qc(3).selectPreset(n+1)}),C.Wc(1),C.rc(2,"translate"),C.cc()}if(2&e){const e=t.index;C.Kb(1),C.Xc(C.sc(2,1,"widget.dimmer.tab."+(e+1)))}}const Ir=function(e){return{"color-selected":e}},wr=function(e){return{"background-color":e}};function Cr(e,t){if(1&e){const e=C.ec();C.dc(0,"button",22),C.nc("click",function(){C.Lc(e);const n=t.$implicit;return C.qc(3).selectColor(n)}),C.cc()}if(2&e){const e=t.$implicit,n=t.index,i=C.qc(3);C.yc("ngClass",C.Cc(2,Ir,i.getSelectedPreset().color==e))("ngStyle",C.Cc(4,wr,i.htmlColors[n]))}}function Rr(e,t){if(1&e){const e=C.ec();C.bc(0),C.dc(1,"div",9),C.Uc(2,yr,3,3,"button",10),C.cc(),C.dc(3,"div",11),C.dc(4,"div",12),C.Uc(5,Cr,1,6,"button",13),C.cc(),C.dc(6,"div",14),C.dc(7,"ngx-slider",15),C.nc("valueChange",function(){return C.Lc(e),C.qc(2).onSliderChange()})("valueChange",function(t){return C.Lc(e),C.qc(2).getSelectedPreset().intensity=t}),C.cc(),C.cc(),C.cc(),C.dc(8,"div",16),C.dc(9,"div",17),C.dc(10,"input",18),C.nc("change",function(t){return C.Lc(e),C.qc(2).changeCheckbox(t)}),C.cc(),C.dc(11,"label",19),C.Wc(12),C.rc(13,"translate"),C.cc(),C.cc(),C.cc(),C.dc(14,"div",9),C.dc(15,"button",20),C.nc("click",function(){return C.Lc(e),C.qc(2).handleButton("on_off")}),C.Wc(16),C.rc(17,"translate"),C.cc(),C.dc(18,"button",20),C.nc("click",function(){return C.Lc(e),C.qc(2).handleButton("apply")}),C.Wc(19),C.rc(20,"translate"),C.cc(),C.cc(),C.ac()}if(2&e){const e=C.qc(2);C.Kb(2),C.yc("ngForOf",e.presets),C.Kb(3),C.yc("ngForOf",e.availableColors),C.Kb(2),C.yc("options",e.delaySliderOptions)("value",e.getSelectedPreset().intensity),C.Kb(3),C.yc("ngModel",e.getSelectedPreset().backgroundOnly),C.Kb(2),C.Xc(C.sc(13,8,"widget.dimmer.type.checkbox")),C.Kb(4),C.Xc(C.sc(17,10,e.isOn?"widget.dimmer.button.off":"widget.dimmer.button.on")),C.Kb(3),C.Xc(C.sc(20,12,"widget.dimmer.button.apply"))}}function Tr(e,t){if(1&e){const e=C.ec();C.bc(0),C.Wc(1),C.rc(2,"translate"),C.dc(3,"button",23),C.nc("click",function(){return C.Lc(e),C.qc(2).handleButton("on_off")}),C.Wc(4),C.rc(5,"translate"),C.cc(),C.ac()}if(2&e){const e=C.qc(2);C.Kb(1),C.Yc(" ",C.sc(2,2,"widget.dimmer.info.off")," "),C.Kb(3),C.Xc(C.sc(5,4,e.isOn?"widget.dimmer.button.off":"widget.dimmer.button.on"))}}function Or(e,t){if(1&e){const e=C.ec();C.dc(0,"div",1),C.dc(1,"div",2),C.dc(2,"h6",3),C.Wc(3),C.rc(4,"translate"),C.cc(),C.dc(5,"div",4),C.nc("click",function(){return C.Lc(e),C.qc().hide()}),C.Zb(6,"i",5),C.cc(),C.cc(),C.dc(7,"div",6),C.dc(8,"div",7),C.Uc(9,Rr,21,14,"ng-container",8),C.Uc(10,Tr,6,6,"ng-container",8),C.cc(),C.cc(),C.cc()}if(2&e){const e=C.qc();C.Kb(3),C.Xc(C.sc(4,3,"widget.dimmer.title")),C.Kb(6),C.yc("ngIf",e.isOn),C.Kb(1),C.yc("ngIf",!e.isOn)}}let Mr=(()=>{class e extends tn.a{constructor(e){super(),this._ngZone=e,this._visible=!1,this._dimmerState=0,this._effectId=0,this._color=16777215,this._brightness=255,this.presets=[],this.selectedPresetId=0,this.isOn=!1,this.availableColors=[7665141,21495,15161822,15353138,15923281,8581961,0],this.htmlColors=["#74F5F5","#0053F7","#E759DE","#EA4532","#F2F851","#82F349","#000000"],this.onDimmerPresetsEvent=this.onDimmerPresetsEvent.bind(this),this.onDimmerStateEvent=this.onDimmerStateEvent.bind(this)}registerUpdateEvents(e){e&&(e.addEventListener($e.RWDUE_PRESETS,this.onDimmerPresetsEvent),e.addEventListener(Ye.RWDSUE_DIMMER_STATE,this.onDimmerStateEvent),super.registerUpdateEvents(e))}unregisterUpdateEvents(e){e&&(e.removeEventListener($e.RWDUE_PRESETS,this.onDimmerPresetsEvent),e.removeEventListener(Ye.RWDSUE_DIMMER_STATE,this.onDimmerStateEvent),super.unregisterUpdateEvents(e))}getSelectedPreset(){return this.presets[this.selectedPresetId-1]}selectPreset(e){this.selectedPresetId=e}selectColor(e){this.getSelectedPreset().color=e,this.previewSettings()}onDimmerPresetsEvent(e){this.presets=e.presets.map(e=>({color:e.color,id:e.id,intensity:e._Str_4272,backgroundOnly:2==e.type})),this.selectedPresetId=e.selectedPresetId,this._ngZone.run(()=>{this._visible=!0})}onDimmerStateEvent(e){this._ngZone.run(()=>{this.isOn=1==e.state,this._effectId=e._Str_6815,this._color=e.color,this._brightness=e._Str_5123}),this.messageListener.processWidgetMessage(new Je(this._color,this._brightness,2===this._effectId))}get handler(){return this.widgetHandler}hide(){this._visible=!1}get visible(){return this._visible&&this.selectedPresetId>0&&this.presets.length>0}set visible(e){this._visible=e}onSliderChange(){this.previewSettings()}changeCheckbox(e){this.getSelectedPreset().backgroundOnly=e.target.checked,this.previewSettings()}previewSettings(){if(!this.messageListener)return;const e=this.getSelectedPreset();this.messageListener.processWidgetMessage(new Je(e.color,e.intensity,e.backgroundOnly))}handleButton(e){switch(e){case"on_off":this.toggleState();break;case"apply":this.apply()}}toggleState(){this.messageListener&&this.messageListener.processWidgetMessage(new Qe)}apply(){if(!this.isOn||!this.messageListener||null==this.presets||0==this.presets.length)return;const e=this.getSelectedPreset();e&&this.messageListener.processWidgetMessage(new et(e.id,e.backgroundOnly?2:1,e.color,e.intensity,!0))}get delaySliderOptions(){return{floor:75,ceil:255,step:1,hidePointerLabels:!0,hideLimitLabels:!0}}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-room-furniture-dimmer-component"]],features:[C.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-dimmer card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-dimmer","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","align-items-center","justify-content-between","pt-3","px-3","w-100"],[1,"m-0"],[1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"dimmer-inner","bg-secondary","p-2"],[4,"ngIf"],[1,"d-flex","flex-row","justify-content-between"],["type","button","class","btn btn-sm btn-primary w-100",3,"click",4,"ngFor","ngForOf"],[1,"py-2"],[1,"d-flex","flex-row","dimmer-colour-list"],["type","button","class","btn btn-sm dimmer-colour py-3",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[1,"custom-slider"],[3,"options","value","valueChange"],[1,"d-block","mb-1"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","change"],[1,"form-check-label"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],["type","button",1,"btn","btn-sm","btn-primary","w-100",3,"click"],["type","button",1,"btn","btn-sm","dimmer-colour","py-3",3,"ngClass","ngStyle","click"],["type","button",1,"btn","btn-primary","btn-sm","w-100",3,"click"]],template:function(e,t){1&e&&C.Uc(0,Or,11,5,"div",0),2&e&&C.yc("ngIf",t.visible)},directives:[dn.n,Mi.a,Pi.a,dn.m,Sr.b,ui.a,ui.l,ui.n,dn.l,dn.o],pipes:[un.a],encapsulation:2}),e})();function Ur(e,t){if(1&e){const e=C.ec();C.dc(0,"div",1),C.dc(1,"div",2),C.dc(2,"h6",3),C.Wc(3),C.rc(4,"translate"),C.cc(),C.dc(5,"button",4),C.nc("click",function(){return C.Lc(e),C.qc().hide()}),C.Zb(6,"i",5),C.cc(),C.cc(),C.dc(7,"div",6),C.dc(8,"div",7),C.dc(9,"p"),C.Wc(10),C.rc(11,"translate"),C.cc(),C.cc(),C.cc(),C.dc(12,"div",8),C.dc(13,"button",9),C.nc("click",function(){return C.Lc(e),C.qc().handleButton("cancel")}),C.Wc(14),C.rc(15,"translate"),C.cc(),C.dc(16,"button",10),C.nc("click",function(){return C.Lc(e),C.qc().handleButton("confirm")}),C.Wc(17),C.rc(18,"translate"),C.cc(),C.cc(),C.cc()}2&e&&(C.Kb(3),C.Xc(C.sc(4,4,"friend.furniture.confirm.lock.caption")),C.Kb(7),C.Xc(C.sc(11,6,"friend.furniture.confirm.lock.subtitle")),C.Kb(4),C.Xc(C.sc(15,8,"friend.furniture.confirm.lock.button.cancel")),C.Kb(3),C.Xc(C.sc(18,10,"friend.furniture.confirm.lock.button.confirm")))}let xr=(()=>{class e extends tn.a{constructor(e){super(),this._ngZone=e,this._visible=!1,this._furniId=-1}open(e,t){this._visible&&-1!=this._furniId&&this.sendStart(this._furniId,!1),this._ngZone.run(()=>{this._furniId=e,this._visible=!0})}handleButton(e){switch(e){case"confirm":this.sendStart(this._furniId,!0),this.hide();break;case"cancel":this.sendStart(this._furniId,!1),this.hide()}}sendStart(e,t){r.a.instance.communication.connection.send(new Oe.a(e,t))}hide(){this._visible=!1,this._furniId=-1}get visible(){return this._visible}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["ng-component"]],features:[C.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-purchasable-clothing card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-purchasable-clothing","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-6"],[1,"col-4","d-flex","align-items-center","justify-content-center"],[1,"d-flex","justify-content-between","align-items-center","p-3"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-success",3,"click"]],template:function(e,t){1&e&&C.Uc(0,Ur,19,12,"div",0),2&e&&C.yc("ngIf",t.visible)},directives:[dn.n,Mi.a,Pi.a],pipes:[un.a],encapsulation:2}),e})();var Ar=n("RVQL");const Dr=function(e){return{backgroundImage:e}};function Lr(e,t){if(1&e){const e=C.ec();C.dc(0,"div",1),C.dc(1,"div",2),C.dc(2,"div",3),C.nc("click",function(){return C.Lc(e),C.qc().hide()}),C.cc(),C.dc(3,"div",4),C.dc(4,"div",5),C.Zb(5,"div",6),C.cc(),C.dc(6,"div",5),C.Zb(7,"div",6),C.cc(),C.cc(),C.dc(8,"p",7),C.Wc(9),C.rc(10,"translate"),C.cc(),C.dc(11,"p",8),C.Wc(12),C.cc(),C.cc(),C.cc()}if(2&e){const e=C.qc();C.yc("ngStyle",C.Cc(11,Dr,"url("+e.image+")")),C.Kb(5),C.yc("figure",e.firstFigure)("direction",2),C.Kb(2),C.yc("figure",e.secondFigure)("direction",4),C.Kb(2),C.Xc(C.sc(10,9,"lovelock.engraving.caption")),C.Kb(3),C.ad("",e.firstName," | ",e.secondName," | ",e.engravedDate,"")}}let kr=(()=>{class e extends tn.a{constructor(e){super(),this._ngZone=e,this.engravingView=null,this.visible=!1,this.firstFigure=null,this.firstName=null,this.secondFigure=null,this.secondName=null,this.engravedDate=null}open(e,t,n){switch(t){case Ar.a._Str_13451:this.engravingView="engraving";break;case Ar.a._Str_17498:case Ar.a._Str_18746:break;case Ar.a._Str_15230:this.engravingView="wildwest";break;case Ar.a._Str_15778:this.engravingView="hween14"}this.engravingView&&this._ngZone.run(()=>{this.firstName=n.getValue(1),this.secondName=n.getValue(2),this.firstFigure=n.getValue(3),this.secondFigure=n.getValue(4),this.engravedDate=n.getValue(5),this.visible=!0})}hide(){this.visible=!1}get image(){return r.a.instance.getConfiguration("furni.extras.url").toString().replace("%image%","loveLock_"+this.engravingView)}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["ng-component"]],features:[C.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-friends-engraving",3,"bringToTop","draggable","ngStyle",4,"ngIf"],[1,"nitro-furniture-friends-engraving",3,"bringToTop","draggable","ngStyle"],[1,"drag-handler","d-flex","flex-column","small","h-100"],[1,"friend-close","position-absolute",3,"click"],[1,"row","justify-content-center"],[1,"col-2","d-flex","justify-content-center"],["nitro-avatar-image","",3,"figure","direction"],[1,"w-100","text-center"],[1,"w-100","text-center","mt-auto"]],template:function(e,t){1&e&&C.Uc(0,Lr,13,13,"div",0),2&e&&C.yc("ngIf",t.visible)},directives:[dn.n,Mi.a,Pi.a,dn.o,dr.a],pipes:[un.a],encapsulation:2}),e})();var Pr=n("Mdne"),Nr=n("ywHV"),Wr=n("3dBv");function Kr(e,t){if(1&e&&C.Zb(0,"div",17),2&e){const e=C.qc(3);C.yc("headOnly",!0)("figure",e.figure)("direction",2)}}function Fr(e,t){1&e&&C.Zb(0,"div",18)}function Vr(e,t){if(1&e){const e=C.ec();C.bc(0),C.dc(1,"div",9),C.dc(2,"div",10),C.Uc(3,Kr,1,3,"div",11),C.Uc(4,Fr,1,0,"div",12),C.cc(),C.dc(5,"div",13),C.dc(6,"p",14),C.Wc(7),C.cc(),C.cc(),C.cc(),C.dc(8,"div",15),C.dc(9,"button",16),C.nc("click",function(){return C.Lc(e),C.qc(2).handleButton("accept")}),C.Wc(10),C.rc(11,"translate"),C.cc(),C.cc(),C.ac()}if(2&e){const e=C.qc(2);C.Kb(3),C.yc("ngIf",!e.isAnonymousGift),C.Kb(1),C.yc("ngIf",e.isAnonymousGift),C.Kb(3),C.Xc(e.text),C.Kb(3),C.Xc(C.sc(11,4,"widget.furni.present.open_gift"))}}function qr(e,t){if(1&e){const e=C.ec();C.dc(0,"button",16),C.nc("click",function(){return C.Lc(e),C.qc(3).handleButton("furni_place_in_room")}),C.Wc(1),C.rc(2,"translate"),C.cc()}2&e&&(C.Kb(1),C.Xc(C.sc(2,1,"widget.furni.present.place_in_room")))}function Hr(e,t){if(1&e){const e=C.ec();C.bc(0),C.dc(1,"div",9),C.dc(2,"div",10),C.Zb(3,"div",19),C.cc(),C.dc(4,"div",13),C.dc(5,"p",14),C.Wc(6),C.cc(),C.cc(),C.cc(),C.dc(7,"div",15),C.Uc(8,qr,3,3,"button",20),C.dc(9,"button",16),C.nc("click",function(){return C.Lc(e),C.qc(2).handleButton("furni_place_in_inventory")}),C.Wc(10),C.rc(11,"translate"),C.cc(),C.cc(),C.ac()}if(2&e){const e=C.qc(2);C.Kb(3),C.yc("type",e.type)("spriteId",e.spriteId)("extras",e.extras),C.Kb(3),C.Xc(e.text),C.Kb(2),C.yc("ngIf",!e.isWallItem),C.Kb(2),C.Xc(C.sc(11,6,"widget.furni.present.put_in_inventory"))}}function Br(e,t){if(1&e){const e=C.ec();C.dc(0,"div",1),C.dc(1,"div",2),C.dc(2,"h6",3),C.Wc(3),C.rc(4,"translate"),C.cc(),C.dc(5,"div",4),C.nc("click",function(){return C.Lc(e),C.qc().hide()}),C.Zb(6,"i",5),C.cc(),C.cc(),C.dc(7,"div",6),C.bc(8,7),C.Uc(9,Vr,12,6,"ng-container",8),C.Uc(10,Hr,12,8,"ng-container",8),C.ac(),C.cc(),C.cc()}if(2&e){const e=C.qc();C.Kb(3),C.Xc(C.uc(4,4,e.getGiftTitle(),"name",e.senderName)),C.Kb(5),C.yc("ngSwitch",e.currentView),C.Kb(1),C.yc("ngSwitchCase","open_present"),C.Kb(1),C.yc("ngSwitchCase","present_opened")}}let Gr=(()=>{class e extends tn.a{constructor(e,t,n){super(),this._ngZone=e,this._catalogService=t,this._inventoryService=n,this._lastEvent=null,this._needsOpen=!1,this._currentView="",this._type=null,this._spriteId=-1,this._extras=null,this._text=null,this._isWallItem=!1,this._visible=!1,this.onObjectUpdate=this.onObjectUpdate.bind(this),this.onFurniRemoved=this.onFurniRemoved.bind(this)}registerUpdateEvents(e){e&&(e.addEventListener(ot.RWPDUE_PACKAGEINFO,this.onObjectUpdate),e.addEventListener(ot.RWPDUE_CONTENTS,this.onObjectUpdate),e.addEventListener(ot.RWPDUE_CONTENTS_FLOOR,this.onObjectUpdate),e.addEventListener(ot.RWPDUE_CONTENTS_LANDSCAPE,this.onObjectUpdate),e.addEventListener(ot.RWPDUE_CONTENTS_WALLPAPER,this.onObjectUpdate),e.addEventListener(B.FURNI_REMOVED,this.onFurniRemoved),super.registerUpdateEvents(e))}unregisterUpdateEvents(e){e&&(e.removeEventListener(ot.RWPDUE_PACKAGEINFO,this.onObjectUpdate),e.removeEventListener(ot.RWPDUE_CONTENTS,this.onObjectUpdate),e.removeEventListener(ot.RWPDUE_CONTENTS_FLOOR,this.onObjectUpdate),e.removeEventListener(ot.RWPDUE_CONTENTS_LANDSCAPE,this.onObjectUpdate),e.removeEventListener(ot.RWPDUE_CONTENTS_WALLPAPER,this.onObjectUpdate),e.removeEventListener(B.FURNI_REMOVED,this.onFurniRemoved),super.unregisterUpdateEvents(e))}onObjectUpdate(e){e&&(this.reset(),this._ngZone.run(()=>{switch(this._lastEvent=e,e.type){case ot.RWPDUE_PACKAGEINFO:this.showOpeningPresent();break;case ot.RWPDUE_CONTENTS:case ot.RWPDUE_CONTENTS_FLOOR:case ot.RWPDUE_CONTENTS_LANDSCAPE:case ot.RWPDUE_CONTENTS_WALLPAPER:case ot.RWPDUE_CONTENTS_CLUB:this._type=e.itemType,this._spriteId=e.classId,this._isWallItem="i"===e.itemType,this.showOpenPresent()}}))}onFurniRemoved(e){this._lastEvent&&this._lastEvent.objectId===e.id&&this.hide()}hide(){this._visible=!1,this.reset()}reset(){this._type=null,this._spriteId=-1,this._extras=null,this._text=null,this._isWallItem=!1,this._lastEvent=null,this._currentView=null}showOpeningPresent(){!this._lastEvent||this._lastEvent.objectId<0||(this._text=this._lastEvent.giftMessage||"",this._currentView="open_present",this._visible=!0)}showOpenPresent(){!this._lastEvent||this._lastEvent.objectId<0||(this._text=r.a.instance.localization.getValueWithParameter("widget.furni.present.message_opened","product",this._lastEvent.giftMessage),this.isSpacesFurniture()&&(this._text=r.a.instance.localization.getValueWithParameter("widget.furni.present.spaces.message_opened","product",this._lastEvent.giftMessage)),this._currentView="present_opened",this._visible=!0)}isSpacesFurniture(){if(!this._lastEvent||this._lastEvent.itemType!==ct.a.WALL)return!1;const t=r.a.instance.sessionDataManager.getWallItemData(this._lastEvent.classId);if(!t)return!1;const n=t.className;return n==e.FLOOR||n==e.LANDSCAPE||n==e.WALLPAPER}handleButton(e){if(e)switch(e){case"accept":this.acceptAndOpenPresent();break;case"return":break;case"furni_place_in_room":this.placeItemInRoom();break;case"furni_place_in_inventory":this.hide()}}acceptAndOpenPresent(){this.messageListener.processWidgetMessage(new at(at.RWPOM_OPEN_PRESENT,this._lastEvent.objectId)),this.hide()}placeItemInRoom(){const e=this._lastEvent&&this._lastEvent.placedItemId;if(e>0&&(!this._lastEvent||!this._lastEvent.placedInRoom))switch(this._lastEvent&&this._lastEvent.placedItemType){case ct.a.FLOOR:{const t=this._inventoryService.controller.furnitureService.getFurnitureItem(-e);this.canMoveItem(t);break}case ct.a.WALL:{const t=this._inventoryService.controller.furnitureService.getFurnitureItem(e);this.canMoveItem(t);break}}this.hide()}canMoveItem(e){if(!e)return!1;let t=!0;return t=e.category!=Pr.a._Str_3683&&e.category!=Pr.a._Str_3639&&e.category!=Pr.a._Str_3432&&this._inventoryService.controller.furnitureService.startRoomObjectPlacementWithoutRequest(e),t}getGiftTitle(){return this.isAnonymousGift?"widget.furni.present.window.title":"widget.furni.present.window.title_from"}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(e){this._visible=e}get currentView(){return this._currentView}get figure(){return this._lastEvent.purchaserFigure}get senderText(){return this._lastEvent.giftMessage}get senderName(){return this._lastEvent.purchaserName}get type(){return this._type}get spriteId(){return this._spriteId}get extras(){return this._extras}get text(){return this._text}get isWallItem(){return this._isWallItem}get isAnonymousGift(){return!this.senderName||0==this.senderName.length}}return e.FLOOR="floor",e.WALLPAPER="wallpaper",e.LANDSCAPE="landscape",e.\u0275fac=function(t){return new(t||e)(C.Yb(C.H),C.Yb(Nr.a),C.Yb(gr.a))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-room-furniture-gift-opening-component"]],features:[C.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-gift-opening card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-gift-opening","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","align-items-center","justify-content-between","pt-3","px-3","w-100"],[1,"m-0"],[1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"row"],[1,"col-5"],["class","d-flex justify-content-center align-items-center bg-secondary rounded h-100 overflow-hidden p-3","nitro-avatar-image","",3,"headOnly","figure","direction",4,"ngIf"],["class","d-flex justify-content-center align-items-center bg-secondary rounded h-100 overflow-hidden p-3",4,"ngIf"],[1,"col-7","d-flex","justify-content-center","align-items-center"],[1,"h5","m-0","p-0"],[1,"d-flex","align-items-center","mt-2","btn-group"],["type","button",1,"btn","btn-secondary",3,"click"],["nitro-avatar-image","",1,"d-flex","justify-content-center","align-items-center","bg-secondary","rounded","h-100","overflow-hidden","p-3",3,"headOnly","figure","direction"],[1,"d-flex","justify-content-center","align-items-center","bg-secondary","rounded","h-100","overflow-hidden","p-3"],["nitro-furniture-image","",1,"d-flex","justify-content-center","align-items-center","bg-secondary","rounded","h-100","overflow-hidden","p-3",3,"type","spriteId","extras"],["type","button","class","btn btn-secondary",3,"click",4,"ngIf"]],template:function(e,t){1&e&&C.Uc(0,Br,11,8,"div",0),2&e&&C.yc("ngIf",t.visible)},directives:[dn.n,Mi.a,Pi.a,dn.p,dn.q,dr.a,Wr.a],pipes:[un.a],encapsulation:2}),e})();const Zr=["activeView"];function Xr(e,t){if(1&e&&(C.dc(0,"div"),C.Wc(1),C.cc()),2&e){const e=t.$implicit;C.Kb(1),C.Xc(e)}}function jr(e,t){if(1&e&&(C.dc(0,"tr"),C.dc(1,"td"),C.Wc(2),C.cc(),C.dc(3,"td"),C.Uc(4,Xr,2,1,"div",13),C.cc(),C.dc(5,"td"),C.Wc(6),C.cc(),C.cc()),2&e){const e=t.$implicit,n=t.index;C.Kb(2),C.Xc(n+1),C.Kb(2),C.yc("ngForOf",e.users),C.Kb(2),C.Xc(e.score)}}function Yr(e,t){if(1&e&&(C.dc(0,"div",6),C.dc(1,"div",7),C.dc(2,"p",8),C.Wc(3),C.cc(),C.cc(),C.dc(4,"div",9),C.dc(5,"perfect-scrollbar",10),C.dc(6,"table",11),C.dc(7,"thead"),C.dc(8,"tr",12),C.dc(9,"th"),C.Wc(10,"#"),C.cc(),C.dc(11,"th"),C.Wc(12),C.rc(13,"translate"),C.cc(),C.dc(14,"th"),C.Wc(15),C.rc(16,"translate"),C.cc(),C.cc(),C.cc(),C.dc(17,"tbody"),C.Uc(18,jr,7,3,"tr",13),C.cc(),C.cc(),C.cc(),C.dc(19,"div",14),C.Wc(20),C.rc(21,"translate"),C.cc(),C.cc(),C.cc()),2&e){const e=C.qc(2);C.Kb(3),C.Xc(e.title),C.Kb(9),C.Xc(C.sc(13,5,"high.score.display.users.header")),C.Kb(3),C.Xc(C.sc(16,7,"high.score.display.score.header")),C.Kb(3),C.yc("ngForOf",e.entries),C.Kb(2),C.Xc(C.sc(21,9,"high.score.display.congratulations.footer"))}}const zr=function(e,t){return{top:e,left:t}},$r=function(e,t){return{"pb-1":e,"py-1":t}},Qr=function(e,t){return{"fa-chevron-up":e,"fa-chevron-down":t}};function Jr(e,t){if(1&e){const e=C.ec();C.dc(0,"div",1,2),C.Uc(2,Yr,22,11,"div",3),C.dc(3,"div",4),C.dc(4,"i",5),C.nc("click",function(){return C.Lc(e),C.qc().toggle()}),C.cc(),C.cc(),C.cc()}if(2&e){const e=C.qc();C.yc("ngStyle",C.Dc(4,zr,e.topValue+"px",e.leftValue+"px")),C.Kb(2),C.yc("ngIf",!e.toggled),C.Kb(1),C.yc("ngClass",C.Dc(7,$r,!e.toggled,e.toggled)),C.Kb(1),C.yc("ngClass",C.Dc(10,Qr,e.toggled,!e.toggled))}}let es=(()=>{class e extends tn.a{constructor(e){super(),this._ngZone=e,this.view=null,this._visible=!1,this._toggled=!1,this._objectId=-1,this._roomId=-1,this._stuffData=null,this.topValue=0,this.leftValue=0,this.scoreTypes=["perteam","mostwins","classic"],this.clearTypes=["alltime","daily","weekly","monthly"]}open(e,t,n){this._ngZone.run(()=>{this._objectId=e,this._roomId=t,this._stuffData=n,this._visible=!0})}updatePoint(e,t){this._visible&&this._ngZone.run(()=>{const n=this.view&&this.view.nativeElement||null;n&&(this.leftValue=e-n.offsetWidth/2,this.topValue=t-(n.offsetHeight+60))})}openProfile(e){r.a.instance.createLinkEvent("profile/name/"+e)}toggle(){this._ngZone.run(()=>{this._toggled=!this._toggled})}hide(){this._ngZone.run(()=>{this._visible=!1,this._objectId=-1,this._roomId=-1,this._stuffData=null})}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(e){this._visible=e}get toggled(){return this._toggled}get objectId(){return this._objectId}get roomId(){return this._roomId}get entries(){return this._stuffData?this._stuffData.entries:[]}get clearTypeCode(){return this._stuffData?"high.score.display.cleartype."+this.clearTypes[this._stuffData.clearType]:null}get scoreTypeCode(){return this._stuffData?"high.score.display.scoretype."+this.scoreTypes[this._stuffData.scoreType]:null}get title(){if(!this.scoreTypeCode||!this.clearTypeCode)return null;const e=r.a.instance.getLocalization(this.scoreTypeCode),t=r.a.instance.getLocalization(this.clearTypeCode);return r.a.instance.getLocalizationWithParameters("high.score.display.caption",["scoretype","cleartype"],[e,t])}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-room-furniture-highscore-component"]],viewQuery:function(e,t){if(1&e&&C.cd(Zr,1),2&e){let e;C.Hc(e=C.oc())&&(t.view=e.first)}},features:[C.Hb],decls:1,vars:1,consts:[["class","nitro-widget-highscore context-menu card align-items-center",3,"ngStyle",4,"ngIf"],[1,"nitro-widget-highscore","context-menu","card","align-items-center",3,"ngStyle"],["activeView",""],["class","p-2","style","padding-bottom: 0px !important",4,"ngIf"],[1,"text-center=","px-2",3,"ngClass"],[1,"fas",3,"ngClass","click"],[1,"p-2",2,"padding-bottom","0px !important"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","mb-1",2,"font-size","14px"],[1,"m-0","text-wrap","text-center","w-100"],[1,"w-100"],[2,"min-height","255px","max-height","255px","height","255px","width","282px"],[1,"table","table-sm"],[2,"position","sticky"],[4,"ngFor","ngForOf"],[1,"mt-2","text-center"]],template:function(e,t){1&e&&C.Uc(0,Jr,5,13,"div",0),2&e&&C.yc("ngIf",t.visible)},directives:[dn.n,dn.o,dn.l,Ni.b,dn.m],pipes:[un.a],encapsulation:2}),e})();var ts=n("uvOT"),ns=n("Ops4"),is=n("i3QO");function rs(e,t){1&e&&(C.dc(0,"div",14),C.Wc(1,"\xa0"),C.cc())}function ss(e,t){if(1&e){const e=C.ec();C.dc(0,"div",15),C.Wc(1),C.rc(2,"translate"),C.dc(3,"button",16),C.nc("click",function(){return C.Lc(e),C.qc(2).handleButton("close")}),C.Wc(4),C.rc(5,"translate"),C.cc(),C.Zb(6,"br"),C.cc()}2&e&&(C.Kb(1),C.Yc(" ",C.sc(2,2,"mannequin.widget.wronggender")," "),C.Kb(3),C.Xc(C.sc(5,4,"generic.ok")))}function cs(e,t){if(1&e){const e=C.ec();C.dc(0,"div",15),C.Wc(1),C.rc(2,"translate"),C.dc(3,"button",16),C.nc("click",function(){return C.Lc(e),C.qc(2).handleButton("close")}),C.Wc(4),C.rc(5,"translate"),C.cc(),C.Zb(6,"br"),C.cc()}2&e&&(C.Kb(1),C.Yc(" ",C.sc(2,2,"mannequin.widget.clubnotification")," "),C.Kb(3),C.Xc(C.sc(5,4,"generic.ok")))}function os(e,t){if(1&e){const e=C.ec();C.dc(0,"div",15),C.dc(1,"i"),C.Wc(2),C.cc(),C.Zb(3,"br"),C.Zb(4,"br"),C.Wc(5),C.rc(6,"translate"),C.dc(7,"button",16),C.nc("click",function(){return C.Lc(e),C.qc(2).handleButton("wear")}),C.Wc(8),C.rc(9,"translate"),C.cc(),C.Zb(10,"br"),C.cc()}if(2&e){const e=C.qc(2);C.Kb(2),C.Xc(e.outfitName),C.Kb(3),C.Yc(" ",C.sc(6,3,"mannequin.widget.weartext")," "),C.Kb(3),C.Xc(C.sc(9,5,"mannequin.widget.wear"))}}function as(e,t){if(1&e){const e=C.ec();C.dc(0,"div",15),C.dc(1,"input",17),C.nc("ngModelChange",function(t){return C.Lc(e),C.qc(2).outfitName=t})("keyup.enter",function(){return C.Lc(e),C.qc(2).saveName()}),C.cc(),C.Zb(2,"br"),C.dc(3,"button",18),C.nc("click",function(){return C.Lc(e),C.qc(2).handleButton("re_style")}),C.Wc(4),C.rc(5,"translate"),C.cc(),C.dc(6,"button",18),C.nc("click",function(){return C.Lc(e),C.qc(2).handleButton("wear")}),C.Wc(7),C.rc(8,"translate"),C.cc(),C.Zb(9,"br"),C.cc()}if(2&e){const e=C.qc(2);C.Kb(1),C.yc("ngModel",e.outfitName),C.Kb(3),C.Xc(C.sc(5,3,"mannequin.widget.style")),C.Kb(3),C.Xc(C.sc(8,5,"mannequin.widget.wear"))}}function ls(e,t){if(1&e){const e=C.ec();C.dc(0,"div",15),C.Wc(1),C.rc(2,"translate"),C.Zb(3,"br"),C.dc(4,"button",19),C.nc("click",function(){return C.Lc(e),C.qc(2).handleButton("save_outfit")}),C.Wc(5),C.rc(6,"translate"),C.cc(),C.dc(7,"button",19),C.nc("click",function(){return C.Lc(e),C.qc(2).handleButton("main")}),C.Wc(8),C.rc(9,"translate"),C.cc(),C.Zb(10,"br"),C.cc()}2&e&&(C.Kb(1),C.Yc(" ",C.sc(2,3,"mannequin.widget.savetext"),""),C.Kb(4),C.Xc(C.sc(6,5,"mannequin.widget.save")),C.Kb(3),C.Xc(C.sc(9,7,"mannequin.widget.back")))}function ds(e,t){if(1&e&&(C.dc(0,"div",20),C.Wc(1),C.cc()),2&e){const e=C.qc(2);C.Kb(1),C.Yc(" ",e.view," ")}}function us(e,t){if(1&e){const e=C.ec();C.dc(0,"div",1),C.dc(1,"div",2),C.dc(2,"h6",3),C.Wc(3),C.rc(4,"translate"),C.cc(),C.dc(5,"div",4),C.nc("click",function(){return C.Lc(e),C.qc().hide()}),C.Zb(6,"i",5),C.cc(),C.cc(),C.dc(7,"div",6),C.dc(8,"div",7),C.dc(9,"div",8),C.dc(10,"div",9),C.Wc(11,"\xa0"),C.cc(),C.Uc(12,rs,2,0,"div",10),C.cc(),C.cc(),C.bc(13,11),C.Uc(14,ss,7,6,"div",12),C.Uc(15,cs,7,6,"div",12),C.Uc(16,os,11,7,"div",12),C.Uc(17,as,10,7,"div",12),C.Uc(18,ls,11,9,"div",12),C.Uc(19,ds,2,1,"div",13),C.ac(),C.cc(),C.cc()}if(2&e){const e=C.qc();C.Kb(3),C.Xc(C.sc(4,10,"mannequin.widget.title")),C.Kb(7),C.yc("direction",2)("figure",e.figure),C.Kb(2),C.yc("ngIf",e.hasHabboClub),C.Kb(1),C.yc("ngSwitch",e.view),C.Kb(1),C.yc("ngSwitchCase","wrong-gender"),C.Kb(1),C.yc("ngSwitchCase","no-club"),C.Kb(1),C.yc("ngSwitchCase","peer-main"),C.Kb(1),C.yc("ngSwitchCase","main"),C.Kb(1),C.yc("ngSwitchCase","save")}}let hs=(()=>{class e extends tn.a{constructor(e){super(),this._ngZone=e,this._visible=!1,this.hasHabboClub=!1}open(t,n,i,s){this._furniId=t,this._figure=n,this._gender=i,this.outfitName=s;const c=this.handler.container.roomSession,o=this.handler.container.sessionDataManager,a=c.isRoomOwner||c.controllerLevel>=L.a.GUEST||o.isGodMode,l=r.a.instance.avatar,d=l.createFigureContainer(n);this._mannequinClubLevel=l.getFigureClubLevel(d,i,e.parts);const u=this.getViewType(a,o.gender,o.clubLevel,i,this._mannequinClubLevel);this.setView(u)}get handler(){return this.widgetHandler}hide(){this._visible=!1}get visible(){return this._visible}set visible(e){this._visible=e}getViewType(t,n,i,r,s){return t?e.EditorView:n.toLowerCase()!=r.toLowerCase()?e.WrongGender:i<s?e.WrongClubLevel:e.UseMannequin}setView(t){const n=this.handler.container.avatarRenderManager;this._view=this.createView(t);let i=null;switch(t){case e.PreviewAndSave:case e.WrongClubLevel:case e.WrongGender:i=n.createFigureContainer(this._figure),this.removeSectionsFromAvatar(i),this._renderedFigure=i._Str_1008();break;case e.UseMannequin:this._renderedFigure=this.mergeFigures(this._figure);break;case e.EditorView:i=n.createFigureContainer(this._figure),this.removeSectionsFromAvatar(i),this._renderedFigure=i._Str_1008()}this.showOrHideHabboClubLevel(this._mannequinClubLevel),this._ngZone.run(()=>{this._visible=!0})}saveName(){this.changeOutfitName()}removeSectionsFromAvatar(t){for(const n of t._Str_1016())-1==e.parts.indexOf(n)&&t._Str_923(n);t._Str_830(e._Str_10597[0],e._Str_10597[1],e._Str_10597[2])}mergeFigures(t){const n=new ts.a(this.widgetHandler.container.sessionDataManager.figure),i=new ts.a(t);for(const r of e.parts)n._Str_923(r);for(const e of i._Str_1016())n._Str_830(e,i.getPartSetId(e),i._Str_815(e));return n._Str_1008()}createView(t){switch(t){case e.EditorView:return"main";case e.PreviewAndSave:return"save";case e.UseMannequin:return"peer-main";case e.WrongClubLevel:return"no-club";case e.WrongGender:return"wrong-gender"}return""}showOrHideHabboClubLevel(e){switch(e){case se.a._Str_3159:this.hasHabboClub=!1;break;case se.a._Str_2964:case se.a._Str_2575:this.hasHabboClub=!0}}handleButton(t){switch(t){case"wear":this.wearOutfit();break;case"re_style":this.changeOutfitName(),this.setView(e.PreviewAndSave);break;case"save_outfit":this.handler.container.connection.send(new ns.a(this._furniId)),this._visible=!1;break;case"main":this.setView(e.EditorView);break;case"close":this._visible=!1}}wearOutfit(){const t=this.widgetHandler.container.sessionDataManager;t.clubLevel<this._mannequinClubLevel?this.setView(e.WrongClubLevel):t.gender.toLowerCase()==this._gender.toLowerCase()?(this.handler.container.connection.send(new nr.a(this._furniId)),this._visible=!1):this.setView(e.WrongGender)}changeOutfitName(){this.handler.container.connection.send(new is.a(this._furniId,this.outfitName))}get figure(){return this._renderedFigure}get view(){return this._view}}return e.EditorView=0,e.PreviewAndSave=1,e.UseMannequin=2,e.WrongClubLevel=3,e.WrongGender=4,e.parts=[ge.a.CHEST_ACCESSORY,ge.a.COAT_CHEST,ge.a.CHEST,ge.a.LEGS,ge.a.SHOES,ge.a.WAIST_ACCESSORY],e._Str_9071=0,e._Str_8000=1,e._Str_8218=2,e._Str_10597=["hd",99999,[99998]],e.\u0275fac=function(t){return new(t||e)(C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-room-furniture-mannequin-component"]],features:[C.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-mannequin card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-mannequin","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","align-items-center","justify-content-between","pt-3","px-3","w-100"],[1,"m-0"],[1,"close",3,"click"],[1,"fas","fa-times"],[1,"row"],[1,"col-4"],[1,"mannequin-background"],["nitro-avatar-image","",1,"mannequin-figure",3,"direction","figure"],["class","hc-icon",4,"ngIf"],[3,"ngSwitch"],["class","col-8",4,"ngSwitchCase"],["class","list-group-item",4,"ngSwitchDefault"],[1,"hc-icon"],[1,"col-8"],["type","button",1,"btn","btn-primary",3,"click"],["type","text",3,"ngModel","ngModelChange","keyup.enter"],["type","button",1,"btn","btn-primary",2,"width","177px","margin-top","10px",3,"click"],["type","button",1,"btn","btn-primary",2,"margin-top","10px",3,"click"],[1,"list-group-item"]],template:function(e,t){1&e&&C.Uc(0,us,20,12,"div",0),2&e&&C.yc("ngIf",t.visible)},directives:[dn.n,Mi.a,Pi.a,dr.a,dn.p,dn.q,dn.r,ui.b,ui.l,ui.n],pipes:[un.a],encapsulation:2}),e})();const gs=function(e){return{"background-color":e}};function ms(e,t){if(1&e){const e=C.ec();C.dc(0,"button",12),C.nc("click",function(){C.Lc(e);const n=t.$implicit;return C.qc(3).processAction(n)}),C.cc()}2&e&&C.yc("ngStyle",C.Cc(1,gs,"#"+t.$implicit))}function fs(e,t){if(1&e){const e=C.ec();C.dc(0,"div",8),C.dc(1,"button",9),C.nc("click",function(){return C.Lc(e),C.qc(2).processAction("delete")}),C.Zb(2,"i",10),C.cc(),C.Uc(3,ms,1,3,"button",11),C.cc()}if(2&e){const e=C.qc(2);C.Kb(3),C.yc("ngForOf",e.AVAILABLE_COLORS)}}const ps=function(e,t){return{"background-color":e,color:t}};function _s(e,t){if(1&e){const e=C.ec();C.dc(0,"div",1),C.dc(1,"div",2),C.Uc(2,fs,4,1,"div",3),C.dc(3,"button",4),C.nc("click",function(){return C.Lc(e),C.qc().hide()}),C.Zb(4,"i",5),C.cc(),C.cc(),C.dc(5,"div",6),C.dc(6,"textarea",7),C.nc("ngModelChange",function(t){return C.Lc(e),C.qc().text=t}),C.Wc(7),C.cc(),C.cc(),C.cc()}if(2&e){const e=C.qc();C.yc("ngStyle",C.Dc(5,ps,"#"+e.colorHex,e.colorHex)),C.Kb(2),C.yc("ngIf",e.isController),C.Kb(4),C.yc("disabled",!e.isController)("ngModel",e.text),C.Kb(1),C.Xc(e.text)}}let bs=(()=>{class e extends tn.a{constructor(e){super(),this._ngZone=e,this.AVAILABLE_COLORS=["9CCEFF","FF9CFF","9CFF9C","FFFF33"],this._objectId=-1,this._colorHex=null,this._text=null,this._isController=!1,this._visible=!1,this.onRoomWidgetStickieDataUpdateEvent=this.onRoomWidgetStickieDataUpdateEvent.bind(this)}dispose(){this.updateStickie(),super.dispose()}registerUpdateEvents(e){e&&(e.addEventListener(gt.RWSDUE_STICKIE_DATA,this.onRoomWidgetStickieDataUpdateEvent),super.registerUpdateEvents(e))}unregisterUpdateEvents(e){e&&(e.removeEventListener(gt.RWSDUE_STICKIE_DATA,this.onRoomWidgetStickieDataUpdateEvent),super.unregisterUpdateEvents(e))}onRoomWidgetStickieDataUpdateEvent(e){e&&this._ngZone.run(()=>{this._objectId=e._Str_1577,this._colorHex=e._Str_10471,this._text=e.text,this._isController=e.controller,this._visible=!0})}processAction(e){if(e&&""!==e){if(this.AVAILABLE_COLORS.indexOf(e)>=0)return this._colorHex=e,void this.updateStickie();switch(e){case"delete":return void this.deleteStickie()}}}hide(){this.updateStickie(),this._objectId=-1,this._colorHex=null,this._text=null,this._isController=!1,this._visible=!1}updateStickie(){-1!==this._objectId&&this.messageListener.processWidgetMessage(new mt(mt.SEND_UPDATE,this._objectId,this._text,this._colorHex))}deleteStickie(){-1!==this._objectId&&(this.messageListener.processWidgetMessage(new mt(mt.SEND_DELETE,this._objectId)),this.hide())}get visible(){return this._visible}set visible(e){this._visible=e}get handler(){return this.widgetHandler}get objectId(){return this._objectId}get colorHex(){return this._colorHex}get text(){return this._text}set text(e){this._text=e}get isController(){return this._isController}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-room-furniture-sticky"]],features:[C.Hb],decls:1,vars:1,consts:[["class","nitro-furniture-stickie",3,"bringToTop","draggable","ngStyle",4,"ngIf"],[1,"nitro-furniture-stickie",3,"bringToTop","draggable","ngStyle"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","py-1","px-2"],["class"," d-flex align-items-center",4,"ngIf"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","p-1"],["name","sticky-text","rows","11","maxlength","500",1,"sticky-text",3,"disabled","ngModel","ngModelChange"],[1,"d-flex","align-items-center"],["type","button",1,"sticky-trash","mr-2",3,"click"],[1,"fas","fa-trash-alt"],["type","button","class","sticky-button rounded p-2 mr-2",3,"ngStyle","click",4,"ngFor","ngForOf"],["type","button",1,"sticky-button","rounded","p-2","mr-2",3,"ngStyle","click"]],template:function(e,t){1&e&&C.Uc(0,_s,8,8,"div",0),2&e&&C.yc("ngIf",t.visible)},directives:[dn.n,Mi.a,Pi.a,dn.o,ui.b,ui.i,ui.l,ui.n,dn.m],encapsulation:2}),e})();function vs(e,t){if(1&e){const e=C.ec();C.dc(0,"div",1),C.dc(1,"div",2),C.dc(2,"h6",3),C.Wc(3),C.rc(4,"translate"),C.cc(),C.dc(5,"button",4),C.nc("click",function(){return C.Lc(e),C.qc().hide()}),C.Zb(6,"i",5),C.cc(),C.cc(),C.dc(7,"div",6),C.dc(8,"p",7),C.Wc(9),C.cc(),C.dc(10,"div",8),C.Zb(11,"hr",9),C.dc(12,"div",10),C.dc(13,"p",11),C.Wc(14),C.cc(),C.dc(15,"p",11),C.Wc(16),C.cc(),C.cc(),C.cc(),C.cc(),C.cc()}if(2&e){const e=C.qc();C.Nb("nitro-furniture-trophy card trophy-",e.color,""),C.Kb(3),C.Xc(C.sc(4,7,"widget.furni.trophy.title")),C.Kb(6),C.Xc(e.message),C.Kb(5),C.Xc(e.ownerName),C.Kb(2),C.Xc(e.date)}}let Es=(()=>{class e extends tn.a{constructor(e){super(),this._ngZone=e,this._visible=!1,this._color=null,this._ownerName=null,this._date=null,this._message=null,this._viewType=null,this.onRoomWidgetTrophyUpdateEvent=this.onRoomWidgetTrophyUpdateEvent.bind(this)}registerUpdateEvents(e){e&&(e.addEventListener(pt.TROPHY_DATA,this.onRoomWidgetTrophyUpdateEvent),super.registerUpdateEvents(e))}unregisterUpdateEvents(e){e&&(e.removeEventListener(pt.TROPHY_DATA,this.onRoomWidgetTrophyUpdateEvent),super.unregisterUpdateEvents(e))}onRoomWidgetTrophyUpdateEvent(e){e&&this._ngZone.run(()=>{this._visible=!0,this._color=e.color-1,this._ownerName=e.name,this._date=e.date,this._message=e.message,this._viewType=e.viewType,(this._color<0||this._color>2)&&(this._color=0)})}hide(){this._visible=!1}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(e){this._visible=e}get color(){return this._color}get ownerName(){return this._ownerName}get date(){return this._date}get message(){return this._message}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-room-furniture-trophy-compontent"]],features:[C.Hb],decls:1,vars:1,consts:[["noMemory","true",3,"bringToTop","draggable","class",4,"ngIf"],["noMemory","true",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3","d-flex","flex-column"],[1,"p-0","trophy-message"],[1,"mt-auto"],[1,"mb-1"],[1,"d-flex","justify-content-between","align-items-center"],[1,"p-0","mb-0"]],template:function(e,t){1&e&&C.Uc(0,vs,17,9,"div",0),2&e&&C.yc("ngIf",t.visible)},directives:[dn.n,Mi.a,Pi.a],pipes:[un.a],encapsulation:2}),e})();class Ss{constructor(){this._id=0,this._category=0,this._name="",this._description="",this._imageUrl="",this._purchaseOfferId=-1,this._extraParam="",this._stuffData=null,this._ownerId=0,this._ownerName="",this._rentOfferId=-1,this._availableForBuildersClub=!1}get id(){return this._id}set id(e){this._id=e}get category(){return this._category}set category(e){this._category=e}get name(){return this._name}set name(e){this._name=e}get description(){return this._description}set description(e){this._description=e}get imageUrl(){return this._imageUrl}set imageUrl(e){this._imageUrl=e}get purchaseOfferId(){return this._purchaseOfferId}set purchaseOfferId(e){this._purchaseOfferId=e}get extraParam(){return this._extraParam}set extraParam(e){this._extraParam=e}get stuffData(){return this._stuffData}set stuffData(e){this._stuffData=e}set groupId(e){this._groupId=e}get groupId(){return this._groupId}get ownerId(){return this._ownerId}set ownerId(e){this._ownerId=e}get ownerName(){return this._ownerName}set ownerName(e){this._ownerName=e}get rentOfferId(){return this._rentOfferId}set rentOfferId(e){this._rentOfferId=e}get availableForBuildersClub(){return this._availableForBuildersClub}set availableForBuildersClub(e){this._availableForBuildersClub=e}populate(e){this.id=e.id,this.category=e.category,this.name=e.name,this.description=e.description,this.imageUrl=e.image&&e.image.src||null,this.purchaseOfferId=e.purchaseOfferId,this.extraParam=e.extraParam,this.stuffData=e.stuffData,this.groupId=e.groupId,this.ownerName=e.ownerName,this.ownerId=e.ownerId,this.rentOfferId=e.rentOfferId,this.availableForBuildersClub=e.availableForBuildersClub}}class ys{constructor(){this._name="",this._petId=-1}get name(){return this._name}get id(){return this._petId}get type(){return this._type}get race(){return this._race}get petFigureData(){return this._petFigureData}get _Str_5175(){return this._isOwnPet}get _Str_2481(){return this._ownerId}get ownerName(){return this._ownerName}get _Str_5114(){return this._canRemovePet}get age(){return this._age}get unknownRarityLevel(){return this._breedId}get _Str_3307(){return this._skillTresholds}get publiclyRideable(){return this._accessRights}get level(){return this._level}get _Str_4276(){return this._levelMax}get experience(){return this._experience}get _Str_4095(){return this._experienceMax}get energy(){return this._energy}get _Str_3966(){return this._energyMax}get happyness(){return this._nutrition}get _Str_4448(){return this._nutritionMax}get _Str_6943(){return this._petRespect}get _Str_2707(){return this._roomIndex}get rarityLevel(){return this._rarityLevel}get maximumTimeToLive(){return this._maxWellBeingSeconds}get remainingTimeToLive(){return this._remainingWellBeingSeconds}get remainingGrowTime(){return this._remainingGrowingSeconds}get publiclyBreedable(){return this._hasBreedingPermission}populate(e){this._name=e.name,this._petId=e.id,this._type=e._Str_4355,this._race=e._Str_14767,this._petFigureData=e.petFigureData,this._isOwnPet=e._Str_5175,this._ownerId=e.ownerId,this._ownerName=e.ownerName,this._canRemovePet=e._Str_5114,this._level=e.level,this._levelMax=e.maximumLevel,this._experience=e.experience,this._experienceMax=e.levelExperienceGoal,this._energy=e.energy,this._energyMax=e.maximumEnergy,this._nutrition=e.happyness,this._nutritionMax=e.maximumHappyness,this._petRespect=e.respect,this._roomIndex=e._Str_2707,this._age=e.age,this._breedId=e.unknownRarityLevel,this._skillTresholds=e._Str_3307,this._accessRights=e.publiclyRideable,this._maxWellBeingSeconds=e.maximumTimeToLive,this._remainingWellBeingSeconds=e.remainingTimeToLive,this._remainingGrowingSeconds=e.remainingGrowTime,this._rarityLevel=e.rarityLevel,this._hasBreedingPermission=e.publiclyBreedable}}class Is{constructor(){this._id=0,this._name="",this._figure="",this._motto="",this._badges=[],this._carryItem=0,this._roomIndex=-1,this._ownerId=-1,this._ownerName="",this._amIOwner=!1,this._amIAnyRoomController=!1,this._botSkills=[]}get id(){return this._id}set id(e){this._id=e}get name(){return this._name}set name(e){this._name=e}get figure(){return this._figure}set figure(e){this._figure=e}get motto(){return this._motto}set motto(e){this._motto=e}get badges(){return this._badges.slice()}set badges(e){this._badges=e}get carryItem(){return this._carryItem}set carryItem(e){this._carryItem=e}get roomIndex(){return this._roomIndex}set roomIndex(e){this._roomIndex=e}get ownerId(){return this._ownerId}set ownerId(e){this._ownerId=e}get ownerName(){return this._ownerName}set ownerName(e){this._ownerName=e}get amIOwner(){return this._amIOwner}set amIOwner(e){this._amIOwner=e}get amIAnyRoomController(){return this._amIAnyRoomController}set amIAnyRoomController(e){this._amIAnyRoomController=e}get botSkills(){return this._botSkills.slice()}set botSkills(e){this._botSkills=e}populate(e){this.id=e.id,this.name=e.name,this.figure=e.figure,this.motto=e.motto,this.badges=e.badges,this.carryItem=e.carryId,this.roomIndex=e.roomIndex,this.ownerId=e.ownerId,this.ownerName=e.ownerName,this.amIOwner=e._Str_3246,this.amIAnyRoomController=e._Str_3529,this.botSkills=e.botSkills}}class ws{constructor(){this._id=0,this._name="",this._figure="",this._motto="",this._badges=[],this._groupId=0,this._groupName="",this._groupBadgeId="",this._activityPoints=0,this._respectLeft=0,this._petRespectLeft=0,this._carryItem=0,this._roomIndex=-1,this._type=""}get id(){return this._id}set id(e){this._id=e}get name(){return this._name}set name(e){this._name=e}get figure(){return this._figure}set figure(e){this._figure=e}get motto(){return this._motto}set motto(e){this._motto=e}get badges(){return this._badges.slice()}set badges(e){this._badges=e}get groupId(){return this._groupId}set groupId(e){this._groupId=e}get groupName(){return this._groupName}set groupName(e){this._groupName=e}get groupBadgeId(){return this._groupBadgeId}set groupBadgeId(e){this._groupBadgeId=e}get activityPoints(){return this._activityPoints}set activityPoints(e){this._activityPoints=e}get respectLeft(){return this._respectLeft}set respectLeft(e){this._respectLeft=e}get petRespectLeft(){return this._petRespectLeft}set petRespectLeft(e){this._petRespectLeft=e}get carryItem(){return this._carryItem}set carryItem(e){this._carryItem=e}get roomIndex(){return this._roomIndex}set roomIndex(e){this._roomIndex=e}get type(){return this._type}set type(e){this._type=e}getIsBot(){return this.type===xt.BOT}populate(e){this.id=e.webID,this.name=e.name,this.figure=e.figure,this.motto=e.motto,this.badges=e.badges,this.groupId=e.groupId,this.groupName=e.groupName,this.groupBadgeId=e.groupBadgeId,this.activityPoints=e.activityPoints,this.respectLeft=e.respectLeft,this.petRespectLeft=0,this.carryItem=e.carryId,this.roomIndex=e.roomIndex,this.type=e.type}}let Cs=(()=>{class e{}return e.USER=1,e.BOT=2,e.RENTABLE_BOT=3,e.PET=4,e.FURNI=5,e})();class Rs{constructor(){this.widget=null}hide(){this.widget.close()}update(e){}get type(){return-1}}var Ts=n("0kp3"),Os=n("f/8j");function Ms(e,t){if(1&e&&C.Zb(0,"nitro-badge",17),2&e){const e=C.qc().$implicit;C.yc("badge",e)}}function Us(e,t){if(1&e&&(C.dc(0,"div",15),C.Uc(1,Ms,1,1,"nitro-badge",16),C.cc()),2&e){const e=t.$implicit;C.Kb(1),C.yc("ngIf",""!==e)}}function xs(e,t){if(1&e&&(C.dc(0,"div",18),C.dc(1,"span",19),C.Wc(2),C.cc(),C.cc()),2&e){const e=C.qc();C.Kb(2),C.Xc(e.userData.motto)}}function As(e,t){if(1&e&&(C.dc(0,"p",20),C.Wc(1),C.cc()),2&e){const e=C.qc();C.Kb(1),C.Xc(e.carryText)}}let Ds=(()=>{class e extends Rs{constructor(){super(...arguments),this.userData=null,this.carryText=""}update(e){e&&e.carryId>0&&(this.carryText=r.a.instance.getLocalizationWithParameter("infostand.text.handitem","item",r.a.instance.getLocalization("handitem"+e.carryId)))}get type(){return Cs.BOT}}return e.\u0275fac=function(t){return Ls(t||e)},e.\u0275cmp=C.Sb({type:e,selectors:[["ng-component"]],features:[C.Hb],decls:17,vars:7,consts:[[1,"nitro-infostand","card"],[1,"d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3","w-100"],[1,"d-flex","flex-nowrap"],[1,"body-image","bot","overflow-hidden"],["avatar-image","",1,"avatar-image",3,"figure","direction","asBackground"],[1,"flex-grow-1"],[1,"badge-container"],["class","badge-item",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","mt-2"],["class","motto-container",4,"ngIf"],["class","badge badge-secondary mb-0",4,"ngIf"],[1,"badge-item"],[3,"badge",4,"ngIf"],[3,"badge"],[1,"motto-container"],[1,"motto"],[1,"badge","badge-secondary","mb-0"]],template:function(e,t){1&e&&(C.dc(0,"div",0),C.dc(1,"div",1),C.dc(2,"h6",2),C.Wc(3),C.cc(),C.dc(4,"button",3),C.nc("click",function(){return t.hide()}),C.Zb(5,"i",4),C.cc(),C.cc(),C.dc(6,"div",5),C.dc(7,"div",6),C.dc(8,"div",7),C.Zb(9,"div",8),C.cc(),C.dc(10,"div",9),C.dc(11,"div",10),C.Uc(12,Us,2,1,"div",11),C.cc(),C.cc(),C.cc(),C.dc(13,"div",12),C.Uc(14,xs,3,1,"div",13),C.dc(15,"div",12),C.Uc(16,As,2,1,"p",14),C.cc(),C.cc(),C.cc(),C.cc()),2&e&&(C.Kb(3),C.Xc(t.userData.name),C.Kb(6),C.yc("figure",t.userData.figure)("direction",4)("asBackground",!0),C.Kb(3),C.yc("ngForOf",t.userData.badges),C.Kb(2),C.yc("ngIf",""!==t.userData.motto),C.Kb(2),C.yc("ngIf",t.userData.carryItem>0))},directives:[Ts.a,dn.m,dn.n,Os.a],encapsulation:2}),e})();const Ls=C.fc(Ds);var ks=n("WCqR"),Ps=n("YPdD"),Ns=n("L0LC");function Ws(e,t){if(1&e&&(C.dc(0,"div",19),C.Zb(1,"div",20),C.rc(2,"uniqueNumber"),C.Zb(3,"div",20),C.rc(4,"uniqueNumber"),C.cc()),2&e){const e=C.qc();C.Kb(1),C.yc("innerHTML",C.sc(2,2,e.furniData.stuffData.uniqueNumber),C.Mc),C.Kb(2),C.yc("innerHTML",C.sc(4,4,e.furniData.stuffData.uniqueSeries),C.Mc)}}function Ks(e,t){if(1&e&&C.Zb(0,"img",21),2&e){const e=C.qc();C.yc("src",e.furniData.imageUrl,C.Nc)}}const Fs=function(){return["hits","target"]},Vs=function(e,t){return[e,t]};function qs(e,t){if(1&e&&(C.dc(0,"p",12),C.Wc(1),C.rc(2,"translate"),C.cc()),2&e){const e=C.qc();C.Kb(1),C.Xc(C.uc(2,1,"infostand.crackable_furni.hits_remaining",C.Bc(5,Fs),C.Dc(6,Vs,e.crackableHits,e.crackableTarget)))}}function Hs(e,t){if(1&e){const e=C.ec();C.dc(0,"div",22),C.nc("click",function(){return C.Lc(e),C.qc().openFurniGroupInfo()}),C.Zb(1,"nitro-badge",23),C.cc()}if(2&e){const e=C.qc();C.Kb(1),C.yc("badge",e.getStuffDataAsStringDataType.getValue(2))("isGroup",!0)}}function Bs(e,t){if(1&e){const e=C.ec();C.bc(0),C.dc(1,"p",26),C.Wc(2),C.cc(),C.dc(3,"input",27),C.nc("ngModelChange",function(n){C.Lc(e);const i=t.index;return C.qc(2).furniSettingsValues[i]=n}),C.cc(),C.ac()}if(2&e){const e=t.index,n=C.qc(2);C.Kb(2),C.Xc(n.furniSettingsKeys[e]),C.Kb(1),C.yc("ngModel",n.furniSettingsValues[e])}}function Gs(e,t){if(1&e&&(C.dc(0,"div",24),C.Uc(1,Bs,4,2,"ng-container",25),C.cc()),2&e){const e=C.qc();C.Kb(1),C.yc("ngForOf",e.furniSettingsKeys)}}function Zs(e,t){if(1&e){const e=C.ec();C.dc(0,"button",28),C.nc("click",function(){return C.Lc(e),C.qc().processButtonAction("move")}),C.Wc(1),C.rc(2,"translate"),C.cc()}2&e&&(C.Kb(1),C.Xc(C.sc(2,1,"infostand.button.move")))}function Xs(e,t){if(1&e){const e=C.ec();C.dc(0,"button",28),C.nc("click",function(){return C.Lc(e),C.qc().processButtonAction("rotate")}),C.Wc(1),C.rc(2,"translate"),C.cc()}2&e&&(C.Kb(1),C.Xc(C.sc(2,1,"infostand.button.rotate")))}function js(e,t){if(1&e){const e=C.ec();C.dc(0,"button",28),C.nc("click",function(){return C.Lc(e),C.qc().processButtonAction("pickup")}),C.Wc(1),C.rc(2,"translate"),C.cc()}if(2&e){const e=C.qc();C.Kb(1),C.Xc(C.sc(2,1,1===e.pickupMode?"infostand.button.eject":"infostand.button.pickup"))}}function Ys(e,t){if(1&e){const e=C.ec();C.dc(0,"button",28),C.nc("click",function(){return C.Lc(e),C.qc().processButtonAction("use")}),C.Wc(1),C.rc(2,"translate"),C.cc()}2&e&&(C.Kb(1),C.Xc(C.sc(2,1,"infostand.button.use")))}function zs(e,t){if(1&e){const e=C.ec();C.dc(0,"button",29),C.nc("click",function(){return C.Lc(e),C.qc().processButtonAction("save_branding_configuration")}),C.Wc(1),C.rc(2,"translate"),C.cc()}2&e&&(C.Kb(1),C.Xc(C.sc(2,1,"save")))}let $s=(()=>{class e extends Rs{constructor(){super(...arguments),this.furniData=null,this.pickupMode=0,this.canMove=!1,this.canRotate=!1,this.canUse=!1,this.furniSettingsKeys=[],this.furniSettingsValues=[],this.isCrackable=!1,this.crackableHits=0,this.crackableTarget=0}update(e){this.furniSettingsKeys=[],this.furniSettingsValues=[],this.isCrackable=!1,this.crackableHits=0,this.crackableTarget=0;let t=!1,n=!1,i=!1,r=!1;const s=e.roomControllerLevel>=L.a.GUEST;if((s||e.isOwner||e.isRoomOwner||e.isAnyRoomOwner)&&(t=!0,n=!e.isWallItem,e.roomControllerLevel>=L.a.MODERATOR&&(r=!0)),(e.usagePolicy===ks.a._Str_18353||e.usagePolicy===ks.a._Str_18194&&s||e.extraParam===Ct.a.JUKEBOX&&s||e.extraParam==Ct.a.USABLE_PRODUCT&&s)&&(i=!0),e.extraParam){if(e.extraParam===Ct.a.CRACKABLE_FURNI){const t=e.stuffData;i=!0,this.isCrackable=!0,this.crackableHits=t.hits,this.crackableTarget=t.target}if(r){const t=e.extraParam.substr(Ct.a.BRANDING_OPTIONS.length);if(t){const e=t.split("\t");for(const t of e){const e=t.split("=");e&&2===e.length&&(this.furniSettingsKeys.push(e[0]),this.furniSettingsValues.push(e[1]))}}}}this.canMove=t,this.canRotate=n,this.canUse=i,this.togglePickupButton(e)}togglePickupButton(t){t&&(this.pickupMode=e.PICKUP_MODE_NONE,t.isOwner||t.isAnyRoomOwner?this.pickupMode=e.PICKUP_MODE_FULL:(t.isRoomOwner||t.roomControllerLevel>=L.a.GUILD_ADMIN)&&(this.pickupMode=e.PICKUP_MODE_EJECT),t.isStickie&&(this.pickupMode=e.PICKUP_MODE_NONE))}processButtonAction(t){if(!t||""===t)return;let n=null,i=null;switch(t){case"move":n=Dt.RWFAM_MOVE;break;case"rotate":n=Dt.RWFUAM_ROTATE;break;case"pickup":n=this.pickupMode===e.PICKUP_MODE_FULL?Dt.RWFAM_PICKUP:Dt.RWFAM_EJECT;break;case"use":n=Dt.RWFAM_USE;break;case"save_branding_configuration":n=Dt.RWFAM_SAVE_STUFF_DATA,i=this.getSettingsAsString()}n&&this.widget.messageListener.processWidgetMessage(new Dt(n,this.furniData.id,this.furniData.category,this.furniData.purchaseOfferId,i))}getSettingsAsString(){if(!this.furniSettingsKeys.length||!this.furniSettingsValues.length)return"";let e="",t=0;for(;t<this.furniSettingsKeys.length;)e=e+(this.furniSettingsKeys[t]+"=")+this.furniSettingsValues[t]+"\t",t++;return e}openFurniGroupInfo(){this.furniData.groupId&&r.a.instance.createLinkEvent("groups/info/"+this.furniData.groupId)}get getStuffDataAsStringDataType(){return this.furniData?this.furniData.stuffData:null}get type(){return Cs.FURNI}}return e.PICKUP_MODE_NONE=0,e.PICKUP_MODE_EJECT=1,e.PICKUP_MODE_FULL=2,e.\u0275fac=function(t){return Qs(t||e)},e.\u0275cmp=C.Sb({type:e,selectors:[["ng-component"]],features:[C.Hb],decls:28,vars:21,consts:[[1,"d-flex","flex-column","align-items-end"],[1,"nitro-infostand","card"],[1,"d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3","w-100"],[1,"w-100",2,"min-height","50px"],["class","unique-counter-compact",4,"ngIf"],["class","d-block mx-auto","image-placeholder","",3,"src",4,"ngIf"],[1,"d-flex","flex-column","mt-2"],[1,"badge","badge-secondary","mb-0","text-wrap"],[1,"badge","badge-secondary","mt-2","mb-0","text-wrap"],["class","badge badge-secondary mt-2 mb-0 text-wrap",4,"ngIf"],["class","badge badge-secondary mt-2 mb-0",3,"click",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"button-container","btn-group","mt-2"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"unique-counter-compact"],[3,"innerHTML"],["image-placeholder","",1,"d-block","mx-auto",3,"src"],[1,"badge","badge-secondary","mt-2","mb-0",3,"click"],[3,"badge","isGroup"],[1,"mt-3"],[4,"ngFor","ngForOf"],[1,"badge","badge-secondary","mb-2"],["type","text",1,"form-control","rounded","mb-2",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(C.dc(0,"div",0),C.dc(1,"div",1),C.dc(2,"div",2),C.dc(3,"h6",3),C.Wc(4),C.rc(5,"translate"),C.cc(),C.dc(6,"button",4),C.nc("click",function(){return t.hide()}),C.Zb(7,"i",5),C.cc(),C.cc(),C.dc(8,"div",6),C.dc(9,"div",7),C.Uc(10,Ws,5,6,"div",8),C.Uc(11,Ks,1,1,"img",9),C.cc(),C.dc(12,"div",10),C.dc(13,"p",11),C.Wc(14),C.rc(15,"translate"),C.cc(),C.dc(16,"p",12),C.Wc(17),C.rc(18,"translate"),C.cc(),C.Uc(19,qs,3,9,"p",13),C.Uc(20,Hs,2,2,"div",14),C.cc(),C.Uc(21,Gs,2,1,"div",15),C.cc(),C.cc(),C.dc(22,"div",16),C.Uc(23,Zs,3,3,"button",17),C.Uc(24,Xs,3,3,"button",17),C.Uc(25,js,3,3,"button",17),C.Uc(26,Ys,3,3,"button",17),C.Uc(27,zs,3,3,"button",18),C.cc(),C.cc()),2&e&&(C.Kb(4),C.Xc(C.sc(5,13,t.furniData.name)),C.Kb(6),C.yc("ngIf",t.furniData.stuffData.isUnique),C.Kb(1),C.yc("ngIf",t.furniData.imageUrl),C.Kb(3),C.Xc(C.sc(15,15,t.furniData.description)),C.Kb(3),C.Xc(C.uc(18,17,"furni.owner","name",t.furniData.ownerName)),C.Kb(2),C.yc("ngIf",t.isCrackable),C.Kb(1),C.yc("ngIf",t.furniData.groupId),C.Kb(1),C.yc("ngIf",t.furniSettingsKeys.length&&t.furniSettingsValues.length&&t.furniSettingsKeys.length===t.furniSettingsValues.length),C.Kb(2),C.yc("ngIf",t.canMove),C.Kb(1),C.yc("ngIf",t.canRotate),C.Kb(1),C.yc("ngIf",0!==t.pickupMode),C.Kb(1),C.yc("ngIf",t.canUse),C.Kb(1),C.yc("ngIf",t.furniSettingsKeys.length&&t.furniSettingsValues.length&&t.furniSettingsKeys.length===t.furniSettingsValues.length))},directives:[dn.n,Ps.a,Os.a,dn.m,ui.b,ui.l,ui.n],pipes:[un.a,Ns.a],encapsulation:2}),e})();const Qs=C.fc($s);var Js=n("3LRK");let ec=(()=>{class e extends Rs{processButtonAction(e){}get type(){return Cs.PET}}return e.\u0275fac=function(t){return tc(t||e)},e.\u0275cmp=C.Sb({type:e,selectors:[["ng-component"]],features:[C.Hb],decls:20,vars:15,consts:[[1,"d-flex","flex-column","align-items-end"],[1,"nitro-infostand","card"],[1,"d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3","w-100"],[1,"d-flex","col-5","justify-content-center","align-items-center","bg-secondary","rounded","overflow-hidden"],["pet-image","",1,"pet-image",3,"petFigureData","direction","asBackground"],[1,"button-container","btn-group","mt-2"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(C.dc(0,"div",0),C.dc(1,"div",1),C.dc(2,"div",2),C.dc(3,"h6",3),C.Wc(4),C.cc(),C.dc(5,"button",4),C.nc("click",function(){return t.hide()}),C.Zb(6,"i",5),C.cc(),C.cc(),C.dc(7,"div",6),C.dc(8,"div",7),C.Zb(9,"div",8),C.cc(),C.cc(),C.cc(),C.dc(10,"div",9),C.dc(11,"button",10),C.nc("click",function(){return t.processButtonAction("buyfood")}),C.Wc(12),C.rc(13,"translate"),C.cc(),C.dc(14,"button",10),C.nc("click",function(){return t.processButtonAction("respect")}),C.Wc(15),C.rc(16,"translate"),C.cc(),C.dc(17,"button",10),C.nc("click",function(){return t.processButtonAction("kick")}),C.Wc(18),C.rc(19,"translate"),C.cc(),C.cc(),C.cc()),2&e&&(C.Kb(4),C.Xc(t.petData.name),C.Kb(5),C.yc("petFigureData",t.petData.petFigureData)("direction",2)("asBackground",!0),C.Kb(3),C.Xc(C.sc(13,7,"infostand.button.buyfood")),C.Kb(3),C.Xc(C.uc(16,9,"infostand.button.petrespect","count","0")),C.Kb(3),C.Xc(C.sc(19,13,"infostand.button.kick")))},directives:[Js.a],pipes:[un.a],encapsulation:2}),e})();const tc=C.fc(ec);function nc(e,t){if(1&e&&C.Zb(0,"nitro-badge",18),2&e){const e=C.qc().$implicit;C.yc("badge",e)}}function ic(e,t){if(1&e&&(C.dc(0,"div",16),C.Uc(1,nc,1,1,"nitro-badge",17),C.cc()),2&e){const e=t.$implicit;C.Kb(1),C.yc("ngIf",""!==e)}}function rc(e,t){if(1&e&&(C.dc(0,"div",19),C.dc(1,"span",20),C.Wc(2),C.cc(),C.cc()),2&e){const e=C.qc();C.Kb(2),C.Xc(e.botData.motto)}}function sc(e,t){if(1&e&&(C.dc(0,"p",21),C.Wc(1),C.cc()),2&e){const e=C.qc();C.Kb(1),C.Xc(e.ownerText)}}function cc(e,t){if(1&e&&(C.dc(0,"p",21),C.Wc(1),C.cc()),2&e){const e=C.qc();C.Kb(1),C.Xc(e.carryText)}}let oc=(()=>{class e extends Rs{constructor(){super(...arguments),this.botData=null,this.ownerText="",this.carryText=""}update(e){e&&(this.ownerText=r.a.instance.getLocalizationWithParameter("infostand.text.botowner","name",this.botData.ownerName),e.carryId>0&&(this.carryText=r.a.instance.getLocalizationWithParameter("infostand.text.handitem","item",r.a.instance.getLocalization("handitem"+e.carryId))))}get type(){return Cs.RENTABLE_BOT}pickup(){this.hide(),r.a.instance.communication.connection.send(new ai.a(this.botData.id))}}return e.\u0275fac=function(t){return ac(t||e)},e.\u0275cmp=C.Sb({type:e,selectors:[["ng-component"]],features:[C.Hb],decls:18,vars:8,consts:[[1,"nitro-infostand","card"],[1,"d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3","w-100"],[1,"d-flex","flex-nowrap"],[1,"body-image","bot","overflow-hidden"],["avatar-image","",1,"avatar-image",3,"figure","direction","asBackground"],[1,"flex-grow-1"],[1,"badge-container"],["class","badge-item",4,"ngFor","ngForOf"],[1,"d-flex","mt-2"],["class","motto-container",4,"ngIf"],[1,"d-flex","flex-column","mt-2"],["class","badge badge-secondary mb-0",4,"ngIf"],[1,"badge-item"],[3,"badge",4,"ngIf"],[3,"badge"],[1,"motto-container"],[1,"motto"],[1,"badge","badge-secondary","mb-0"]],template:function(e,t){1&e&&(C.dc(0,"div",0),C.dc(1,"div",1),C.dc(2,"h6",2),C.Wc(3),C.cc(),C.dc(4,"button",3),C.nc("click",function(){return t.hide()}),C.Zb(5,"i",4),C.cc(),C.cc(),C.dc(6,"div",5),C.dc(7,"div",6),C.dc(8,"div",7),C.Zb(9,"div",8),C.cc(),C.dc(10,"div",9),C.dc(11,"div",10),C.Uc(12,ic,2,1,"div",11),C.cc(),C.cc(),C.cc(),C.dc(13,"div",12),C.Uc(14,rc,3,1,"div",13),C.cc(),C.dc(15,"div",14),C.Uc(16,sc,2,1,"p",15),C.Uc(17,cc,2,1,"p",15),C.cc(),C.cc(),C.cc()),2&e&&(C.Kb(3),C.Xc(t.botData.name),C.Kb(6),C.yc("figure",t.botData.figure)("direction",4)("asBackground",!0),C.Kb(3),C.yc("ngForOf",t.botData.badges),C.Kb(2),C.yc("ngIf",""!==t.botData.motto),C.Kb(2),C.yc("ngIf",t.botData.ownerId>0),C.Kb(1),C.yc("ngIf",t.botData.carryItem>0))},directives:[Ts.a,dn.m,dn.n,Os.a],encapsulation:2}),e})();const ac=C.fc(oc);function lc(e,t){if(1&e&&C.Zb(0,"nitro-badge",21),2&e){const e=C.qc().$implicit;C.yc("badge",e)}}function dc(e,t){if(1&e&&(C.dc(0,"div",19),C.Uc(1,lc,1,1,"nitro-badge",20),C.cc()),2&e){const e=t.$implicit;C.Kb(1),C.yc("ngIf",""!==e)}}function uc(e,t){if(1&e){const e=C.ec();C.dc(0,"div",22),C.Zb(1,"i",23),C.dc(2,"textarea",24),C.nc("ngModelChange",function(t){return C.Lc(e),C.qc().userData.motto=t})("keyup",function(t){return C.Lc(e),C.qc().resizeTextArea(t)})("keydown.enter",function(t){return C.Lc(e),C.qc().saveMotto(t)}),C.rc(3,"translate"),C.cc(),C.cc()}if(2&e){const e=C.qc();C.Kb(2),C.zc("placeholder",C.sc(3,2,"infostand.motto.change")),C.yc("ngModel",e.userData.motto)}}function hc(e,t){if(1&e&&(C.dc(0,"div",22),C.dc(1,"span",25),C.Wc(2),C.cc(),C.cc()),2&e){const e=C.qc();C.Kb(2),C.Xc(e.userData.motto)}}function gc(e,t){if(1&e&&(C.dc(0,"p",26),C.Wc(1),C.cc()),2&e){const e=C.qc();C.Kb(1),C.Xc(e.carryText)}}let mc=(()=>{class e extends Rs{constructor(){super(...arguments),this.userData=null,this.carryText=""}update(e){e&&e.carryId>0&&(this.carryText=r.a.instance.getLocalizationWithParameter("infostand.text.handitem","item",r.a.instance.getLocalization("handitem"+e.carryId)))}resizeTextArea(e){if(!e)return;const t=e.target;t&&(t.style.height="0px",t.style.height=t.scrollHeight+"px")}saveMotto(e){this.userData.motto.length>38||(e.target.blur(),this.widget.messageListener.processWidgetMessage(new At(this.userData.motto)))}visitProfile(){r.a.instance.createLinkEvent("profile/goto/"+this.userData.id)}get isOwnProfile(){return this.userData.type===xt.OWN_USER}get type(){return Cs.USER}}return e.\u0275fac=function(t){return fc(t||e)},e.\u0275cmp=C.Sb({type:e,selectors:[["ng-component"]],features:[C.Hb],decls:23,vars:12,consts:[[1,"nitro-infostand","card"],[1,"d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],[1,"badge","badge-secondary","badge-sm",3,"click"],[1,"fas","fa-user"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3","w-100"],[1,"d-flex","flex-nowrap"],[1,"body-image","overflow-hidden"],["avatar-image","",1,"avatar-image",3,"figure","direction","asBackground"],[1,"flex-grow-1"],[1,"badge-container"],["class","badge-item",4,"ngFor","ngForOf"],[1,"d-flex","mt-2"],["class","motto-container",4,"ngIf"],[1,"d-flex","flex-column","mt-2"],[1,"badge","badge-secondary","mb-0"],["class","badge badge-secondary mt-2 mb-0",4,"ngIf"],[1,"badge-item"],[3,"badge",4,"ngIf"],[3,"badge"],[1,"motto-container"],[1,"icon","pencil-icon"],["maxlength","38","wrap","soft","rows","1",1,"motto-input",3,"ngModel","placeholder","ngModelChange","keyup","keydown.enter"],[1,"motto"],[1,"badge","badge-secondary","mt-2","mb-0"]],template:function(e,t){1&e&&(C.dc(0,"div",0),C.dc(1,"div",1),C.dc(2,"h6",2),C.dc(3,"div",3),C.nc("click",function(){return t.visitProfile()}),C.Zb(4,"i",4),C.cc(),C.Wc(5),C.cc(),C.dc(6,"button",5),C.nc("click",function(){return t.hide()}),C.Zb(7,"i",6),C.cc(),C.cc(),C.dc(8,"div",7),C.dc(9,"div",8),C.dc(10,"div",9),C.Zb(11,"div",10),C.cc(),C.dc(12,"div",11),C.dc(13,"div",12),C.Uc(14,dc,2,1,"div",13),C.cc(),C.cc(),C.cc(),C.dc(15,"div",14),C.Uc(16,uc,4,4,"div",15),C.Uc(17,hc,3,1,"div",15),C.cc(),C.dc(18,"div",16),C.dc(19,"p",17),C.Wc(20),C.rc(21,"translate"),C.cc(),C.Uc(22,gc,2,1,"p",18),C.cc(),C.cc(),C.cc()),2&e&&(C.Kb(5),C.Yc(" ",t.userData.name," "),C.Kb(6),C.yc("figure",t.userData.figure)("direction",4)("asBackground",!0),C.Kb(3),C.yc("ngForOf",t.userData.badges),C.Kb(2),C.yc("ngIf",t.isOwnProfile),C.Kb(1),C.yc("ngIf",!t.isOwnProfile),C.Kb(3),C.Zc("",C.sc(21,10,"extendedprofile.achievementscore")," ",t.userData.activityPoints,""),C.Kb(2),C.yc("ngIf",t.userData.carryItem>0))},directives:[Ts.a,dn.m,dn.n,Os.a,ui.b,ui.i,ui.l,ui.n],pipes:[un.a],encapsulation:2}),e})();const fc=C.fc(mc),pc=["infostandsContainer"];let _c=(()=>{class e extends tn.a{constructor(e,t,n){super(),this._inventoryService=e,this._componentFactoryResolver=t,this._ngZone=n,this._lastComponent=null,this._furniData=new Ss,this._userData=new ws,this._petData=new ys,this._botData=new Is,this.objectSelectedHandler=this.objectSelectedHandler.bind(this),this.objectDeselectedHandler=this.objectDeselectedHandler.bind(this),this.objectRemovedHandler=this.objectRemovedHandler.bind(this),this.userInfostandUpdateHandler=this.userInfostandUpdateHandler.bind(this),this.botInfostandUpdateHandler=this.botInfostandUpdateHandler.bind(this),this.furniInfostandUpdateHandler=this.furniInfostandUpdateHandler.bind(this),this.rentableBotInfostandUpdateHandler=this.rentableBotInfostandUpdateHandler.bind(this),this.petInfostandUpdateHandler=this.petInfostandUpdateHandler.bind(this)}registerUpdateEvents(e){e&&(e.addEventListener(B.OBJECT_SELECTED,this.objectSelectedHandler),e.addEventListener(B.OBJECT_DESELECTED,this.objectDeselectedHandler),e.addEventListener(B.USER_REMOVED,this.objectRemovedHandler),e.addEventListener(B.FURNI_REMOVED,this.objectRemovedHandler),e.addEventListener(xt.OWN_USER,this.userInfostandUpdateHandler),e.addEventListener(xt.PEER,this.userInfostandUpdateHandler),e.addEventListener(xt.BOT,this.botInfostandUpdateHandler),e.addEventListener(Ot.FURNI,this.furniInfostandUpdateHandler),e.addEventListener(Ut.RENTABLE_BOT,this.rentableBotInfostandUpdateHandler),e.addEventListener(Mt.PET_INFO,this.petInfostandUpdateHandler),super.registerUpdateEvents(e))}unregisterUpdateEvents(e){e&&(e.removeEventListener(B.OBJECT_SELECTED,this.objectSelectedHandler),e.removeEventListener(B.OBJECT_DESELECTED,this.objectDeselectedHandler),e.removeEventListener(B.USER_REMOVED,this.objectRemovedHandler),e.removeEventListener(B.FURNI_REMOVED,this.objectRemovedHandler),e.removeEventListener(xt.OWN_USER,this.userInfostandUpdateHandler),e.removeEventListener(xt.PEER,this.userInfostandUpdateHandler),e.removeEventListener(xt.BOT,this.botInfostandUpdateHandler),e.removeEventListener(Ot.FURNI,this.furniInfostandUpdateHandler),e.removeEventListener(Ut.RENTABLE_BOT,this.rentableBotInfostandUpdateHandler),e.removeEventListener(Mt.PET_INFO,this.petInfostandUpdateHandler),super.unregisterUpdateEvents(e))}close(){this.infostandsContainer.length&&this.infostandsContainer.remove(),this._lastComponent=null}objectSelectedHandler(e){this.messageListener.processWidgetMessage(new te(te.GET_OBJECT_INFO,e.id,e.category))}objectDeselectedHandler(e){this._ngZone.run(()=>this.close())}objectRemovedHandler(e){let t=!1;const n=this._lastComponent&&this._lastComponent.instance.type||-1;if(-1===n&&(t=!0),n>0)switch(e.type){case B.FURNI_REMOVED:n===Cs.FURNI&&e.id===this._furniData.id&&(t=!0);break;case B.USER_REMOVED:(n===Cs.USER&&e.id===this._userData.id||n===Cs.PET&&e.id===this._petData._Str_2707||n===Cs.BOT&&e.id===this._userData.id||n===Cs.RENTABLE_BOT&&e.id===this._botData.id)&&(t=!0)}t&&this._ngZone.run(()=>this.close())}userInfostandUpdateHandler(e){e&&this._ngZone.run(()=>{this._userData.populate(e);const t=this.getInfoStand(e);t&&(t.userData=this._userData,t.update(e))})}botInfostandUpdateHandler(e){e&&this._ngZone.run(()=>{this._userData.populate(e);const t=this.getInfoStand(e);t&&(t.userData=this._userData,t.update(e))})}furniInfostandUpdateHandler(e){e&&this._ngZone.run(()=>{this._furniData.populate(e);const t=this.getInfoStand(e);t&&(t.furniData=this._furniData,t.update(e))})}rentableBotInfostandUpdateHandler(e){e&&this._ngZone.run(()=>{this._botData.populate(e);const t=this.getInfoStand(e);t&&(t.botData=this._botData,t.update(e))})}petInfostandUpdateHandler(e){e&&this._ngZone.run(()=>{this._petData.populate(e);const t=this.getInfoStand(e);t&&(t.petData=this._petData,t.update(e))})}updateUserBadges(e,t){e===this._userData.id&&(this._userData.getIsBot()||this._ngZone.run(()=>this._userData.badges=t))}getInfoStand(e){const t=this.getInfoStandComponentType(e);if(!t)return null;if(this._lastComponent&&this._lastComponent.instance instanceof t)return this._lastComponent.instance;this.infostandsContainer.length&&this.infostandsContainer.remove();const n=this._componentFactoryResolver.resolveComponentFactory(t);let i=null;return n&&(i=this.infostandsContainer.createComponent(n)),this._lastComponent=i,i?(i.instance.widget=this,i.instance):null}get furniData(){return this._furniData}getInfoStandComponentType(e){if(!e)return null;switch(e.type){case xt.BOT:return Ds;case Ot.FURNI:return $s;case Mt.PET_INFO:return ec;case Ut.RENTABLE_BOT:return oc;case xt.OWN_USER:case xt.PEER:return mc}return null}get handler(){return this.widgetHandler}get inventoryTrading(){return this._inventoryService.controller.tradeService}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(gr.a),C.Yb(C.m),C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&C.cd(pc,1,C.Z),2&e){let e;C.Hc(e=C.oc())&&(t.infostandsContainer=e.first)}},features:[C.Hb],decls:3,vars:0,consts:[[1,"nitro-room-infostand-component"],["infostandsContainer",""]],template:function(e,t){1&e&&(C.dc(0,"div",0),C.Zb(1,"div",null,1),C.cc())},encapsulation:2}),e})();function bc(e,t){if(1&e){const e=C.ec();C.bc(0),C.dc(1,"div",9),C.dc(2,"button",10),C.Wc(3),C.cc(),C.dc(4,"button",11),C.nc("click",function(){C.Lc(e);const n=t.$implicit;return C.qc(2).accept(n)}),C.Zb(5,"i",12),C.cc(),C.dc(6,"button",13),C.nc("click",function(){C.Lc(e);const n=t.$implicit;return C.qc(2).deny(n)}),C.Zb(7,"i",5),C.cc(),C.cc(),C.ac()}if(2&e){const e=t.$implicit;C.Kb(3),C.Xc(e)}}function vc(e,t){if(1&e){const e=C.ec();C.dc(0,"div",1),C.dc(1,"div",2),C.dc(2,"h6",3),C.Wc(3),C.rc(4,"translate"),C.cc(),C.dc(5,"button",4),C.nc("click",function(){return C.Lc(e),C.qc().hide()}),C.Zb(6,"i",5),C.cc(),C.cc(),C.dc(7,"div",6),C.dc(8,"perfect-scrollbar",7),C.Uc(9,bc,8,1,"ng-container",8),C.cc(),C.cc(),C.cc()}if(2&e){const e=C.qc();C.Kb(3),C.Xc(C.sc(4,2,"widgets.doorbell.title")),C.Kb(6),C.yc("ngForOf",e.users)}}let Ec=(()=>{class e extends tn.a{constructor(e){super(),this._ngZone=e,this._visible=!1,this._users=[],this.onRoomRinging=this.onRoomRinging.bind(this),this.onRoomAcceptedAndRejected=this.onRoomAcceptedAndRejected.bind(this)}registerUpdateEvents(e){e&&(e.addEventListener(ye.RWDE_RINGING,this.onRoomRinging),e.addEventListener(ye.REJECTED,this.onRoomAcceptedAndRejected),e.addEventListener(ye.RWDE_ACCEPTED,this.onRoomAcceptedAndRejected),super.registerUpdateEvents(e))}unregisterUpdateEvents(e){e&&(e.removeEventListener(ye.RWDE_RINGING,this.onRoomRinging),e.removeEventListener(ye.REJECTED,this.onRoomAcceptedAndRejected),e.removeEventListener(ye.RWDE_ACCEPTED,this.onRoomAcceptedAndRejected),super.unregisterUpdateEvents(e))}onRoomRinging(e){e&&this._ngZone.run(()=>this.addUser(e.userName))}onRoomAcceptedAndRejected(e){e&&this._ngZone.run(()=>this.removeUser(e.userName))}addUser(e){this._users.indexOf(e)>=0||(this._users.length>=50?this.deny(e):(this._visible=!0,this._users.push(e)))}removeUser(e){const t=this._users.indexOf(e);-1!==t&&(this._users.splice(t,1),this._users.length||(this._visible=!1))}deny(e){this.messageListener.processWidgetMessage(new Ie(e,!1)),this.removeUser(e)}accept(e){this.messageListener.processWidgetMessage(new Ie(e,!0)),this.removeUser(e)}hide(){this._visible=!1}get visible(){return this._visible}get users(){return this._users}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-room-doorbell-component"]],features:[C.Hb],decls:1,vars:1,consts:[["class","nitro-room-doorbell card","noMemory","true",3,"bringToTop","draggable",4,"ngIf"],["noMemory","true",1,"nitro-room-doorbell","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"position-relative","w-100",2,"min-height","200px","max-height","200px","height","200px"],[4,"ngFor","ngForOf"],[1,"btn-group","w-100","mb-1"],["type","button",1,"btn","btn-secondary","w-100"],["type","button",1,"btn","btn-success",3,"click"],[1,"fas","fa-check"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&C.Uc(0,vc,10,4,"div",0),2&e&&C.yc("ngIf",t.visible)},directives:[dn.n,Mi.a,Pi.a,Ni.b,dn.m],pipes:[un.a],encapsulation:2}),e})();var Sc=n("jhN1"),yc=n("ieH7");let Ic=(()=>{class e{constructor(e,t){this._sanitizer=e,this._emojiPipe=t,this._allowedColors=new Map,this._allowedColors.set("r","red"),this._allowedColors.set("b","blue"),this._allowedColors.set("g","green"),this._allowedColors.set("y","yellow"),this._allowedColors.set("w","white"),this._allowedColors.set("o","orange"),this._allowedColors.set("c","cyan"),this._allowedColors.set("br","brown"),this._allowedColors.set("pr","purple"),this._allowedColors.set("pk","pink"),this._allowedColors.set("red","red"),this._allowedColors.set("blue","blue"),this._allowedColors.set("green","green"),this._allowedColors.set("yellow","yellow"),this._allowedColors.set("white","white"),this._allowedColors.set("orange","orange"),this._allowedColors.set("cyan","cyan"),this._allowedColors.set("brown","brown"),this._allowedColors.set("purple","purple"),this._allowedColors.set("pink","pink")}transform(e){let t="";if(e=e.replace(/<[^>]*>/g,""),(e=this._emojiPipe.transform(e)).startsWith("@")&&e.indexOf("@",1)>-1){let n=null;for(;null!==(n=/@[a-zA-Z]+@/g.exec(e));){const i=n[0].toString(),r=i.substr(1,i.length-2),s=e.replace(i,"");t=this._allowedColors.has(r)?'<span style="color: '+this._allowedColors.get(r)+'">'+s+"</span>":s;break}}else t=e;return this._sanitizer.bypassSecurityTrustHtml(t)}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(Sc.b),C.Yb(yc.a))},e.\u0275pipe=C.Xb({name:"roomChatFormatter",type:e,pure:!1}),e})();const wc=["chatContainer"],Cc=function(e){return{"background-color":e}};function Rc(e,t){if(1&e&&C.Zb(0,"div",10),2&e){const e=C.qc();C.yc("ngStyle",C.Cc(1,Cc,e.senderColorString))}}const Tc=function(e){return{"background-image":e,transform:"scale(1)",top:"-53px"}},Oc=function(e){return{"background-image":e}};function Mc(e,t){if(1&e&&C.Zb(0,"div",11),2&e){const e=C.qc();C.yc("ngStyle",e.petType>=0?C.Cc(1,Tc,"url("+e.senderImageUrl+")"):C.Cc(3,Oc,"url("+e.senderImageUrl+")"))}}let Uc=(()=>{class e{update(e){this.chatType=e.chatType,this.chatStyle=e.styleId,this.senderId=e.userId,this.senderName=e.userName,this.senderCategory=e.userCategory,this.message=e.text,this.messageLinks=e.links,this.senderX=e.userX,this.senderImageUrl=e.userImage&&e.userImage.src||null,this.senderColor=e.userColor,this.senderColorString=this.senderColor&&"#"+this.senderColor.toString(16).padStart(6,"0")||null,this.roomId=e.roomId,this.userType=e.userType,this.petType=e.petType}ready(){this.makeVisible(),this.chatContainerElement&&(this.chatContainerElement.style.minWidth=this.width+"px")}makeVisible(){this.chatContainerElement&&(this.chatContainerElement.style.visibility="visible")}getX(){return this.x}setX(e){this.chatContainerElement&&(this.x=e,this.chatContainerElement.style.left=e+"px")}getY(){return this.y}setY(e){this.chatContainerElement&&(this.y=e,this.chatContainerElement.style.top=e+"px")}selectUser(){r.a.instance.roomEngine.selectRoomObject(this.roomId,this.senderId,this.senderCategory)}get width(){return this.chatContainerElement&&this.chatContainerElement.clientWidth||0}get height(){return this.chatContainerElement&&this.chatContainerElement.clientHeight||0}get chatContainerElement(){return this.chatContainer&&this.chatContainer.nativeElement||null}get decoratedUsername(){return this.senderName+":"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=C.Sb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&C.cd(wc,1),2&e){let e;C.Hc(e=C.oc())&&(t.chatContainer=e.first)}},inputs:{id:"id"},decls:11,vars:10,consts:[[1,"bubble-container"],["chatContainer",""],["class","user-container-bg",3,"ngStyle",4,"ngIf"],[3,"click"],[1,"user-container"],["class","user-image",3,"ngStyle",4,"ngIf"],[1,"chat-content"],[1,"username","mr-1",3,"innerHTML"],[1,"message",3,"innerHTML"],[1,"pointer"],[1,"user-container-bg",3,"ngStyle"],[1,"user-image",3,"ngStyle"]],template:function(e,t){1&e&&(C.dc(0,"div",0,1),C.Uc(2,Rc,1,3,"div",2),C.dc(3,"div",3),C.nc("click",function(){return t.selectUser()}),C.dc(4,"div",4),C.Uc(5,Mc,1,5,"div",5),C.cc(),C.dc(6,"div",6),C.Zb(7,"b",7),C.Zb(8,"span",8),C.rc(9,"roomChatFormatter"),C.cc(),C.Zb(10,"div",9),C.cc(),C.cc()),2&e&&(C.Kb(2),C.yc("ngIf",0===t.chatStyle),C.Kb(1),C.Ob("chat-bubble bubble-",t.chatStyle," type-",t.chatType,""),C.Kb(2),C.yc("ngIf",t.senderImageUrl),C.Kb(2),C.yc("innerHTML",t.decoratedUsername,C.Mc),C.Kb(1),C.yc("innerHTML",C.sc(9,8,t.message),C.Mc))},directives:[dn.n,dn.o],pipes:[Ic],encapsulation:2}),e})();const xc=["chatView"],Ac=["chatContainer"];function Dc(e,t){}let Lc=(()=>{class e extends tn.a{constructor(t,n){super(),this.ngZone=t,this.componentFactoryResolver=n,this.timerId=++e.TIMER_TRACKER,this.cameraOffset=new F.Point,this.chats=[],this.tempChats=[],this.pendingChats=[],this.processingChats=!1,this._skipNextMove=!1,this.onChatMessage=this.onChatMessage.bind(this),this.onRoomViewUpdate=this.onRoomViewUpdate.bind(this)}ngOnInit(){r.a.instance.addWorkerEventTracker(this),this.ngZone.runOutsideAngular(()=>{r.a.instance.sendWorkerEvent({type:"CREATE_INTERVAL",time:5e3,timerId:this.timerId,response:{type:"MOVE_CHATS"}})})}ngOnDestroy(){this.ngZone.runOutsideAngular(()=>{r.a.instance.sendWorkerEvent({type:"REMOVE_INTERVAL",timerId:this.timerId})}),r.a.instance.removeWorkerEventTracker(this)}registerUpdateEvents(e){e&&(e.addEventListener(Ee.RWCUE_EVENT_CHAT,this.onChatMessage),e.addEventListener(G.SIZE_CHANGED,this.onRoomViewUpdate),e.addEventListener(G.POSITION_CHANGED,this.onRoomViewUpdate),e.addEventListener(G.SCALE_CHANGED,this.onRoomViewUpdate),super.registerUpdateEvents(e))}unregisterUpdateEvents(e){e&&(e.removeEventListener(Ee.RWCUE_EVENT_CHAT,this.onChatMessage),e.removeEventListener(G.SIZE_CHANGED,this.onRoomViewUpdate),e.removeEventListener(G.POSITION_CHANGED,this.onRoomViewUpdate),e.removeEventListener(G.SCALE_CHANGED,this.onRoomViewUpdate))}updateChatViewForDimensions(e,t){const n=this.chatViewElement;if(!n)return;const i=r.a.instance.getConfiguration("chat.viewer.height.percentage",.4);n.style.height=t*i+"px"}onChatMessage(e){!e||nn.a.isRunning()&&e.chatType!==Ee.CHAT_TYPE_WHISPER||(this.pendingChats.push(e),this.processPendingChats())}onRoomViewUpdate(e){e.positionDelta&&(this.cameraOffset.x=this.cameraOffset.x+e.positionDelta.x,this.cameraOffset.y=this.cameraOffset.y+e.positionDelta.y,this.resetAllChatLocations()),e.roomViewRectangle&&this.updateChatViewForDimensions(e.roomViewRectangle.width,e.roomViewRectangle.height)}processPendingChats(e=!1){if(!e&&this.processingChats)return;this.processingChats=!0;const t=this.pendingChats.shift();if(!t)return void(this.processingChats=!1);let n=null,i=null;this.ngZone.run(()=>{const e=this.componentFactoryResolver.resolveComponentFactory(Uc);n=this.chatContainer.createComponent(e),i=n.instance,i&&(i.id=this.getFreeItemId(),i.update(t))}),this.addChat(n),this._skipNextMove=!0}getFreeItemId(){return"chat_item_"+e.CHAT_COUNTER}addChat(t){if(!t)return;const n=t.instance;n.senderX=n.senderX-this.cameraOffset.x,n.setY(this.chatViewElement.offsetHeight-n.height),this.resetChatItemLocation(t),this.makeRoomForChat(t),this.chats.push(t),n.ready(),e.CHAT_COUNTER++,this.processPendingChats(!0)}hideChat(e){if(!e)return;const t=this.chats.indexOf(e);t>=0&&this.chats.splice(t,1);const n=this.chatContainer.indexOf(e.hostView);n>=0&&this.chatContainer.remove(n)}moveChatUp(e,t=0){if(!e)return;const n=e.instance;let i=n.height;t&&(i=t),n.setY(n.getY()-i),n.getY()<-2*n.height&&this.hideChat(e)}moveAllChatsUp(){if(this._skipNextMove)return void(this._skipNextMove=!1);let e=this.chats.length-1;for(;e>=0;)this.moveChatUp(this.chats[e],15),e--}makeRoomForChat(e){if(!e)return;const t=e.instance,n=this.chats[this.chats.length-1],i=n&&n.instance;if(!i)return;const r=i.getY()+i.height-1,s=t.height+1,c=this.chatViewElement.offsetHeight-r;if(c<s)for(const o of this.chats)this.moveChatUp(o,s-c)}resetAllChatLocations(){let e=this.chats.length-1;for(;e>=0;){const t=this.chats[e];t&&this.resetChatItemLocation(t),e--}}resetChatItemLocation(e){const t=e.instance;let n=t.senderX+this.cameraOffset.x;n-=t.width/2,t.setX(n)}workerMessageReceived(e){if(e)switch(e.type){case"MOVE_CHATS":return void this.moveAllChatsUp()}}get chatViewElement(){return this.chatViewReference&&this.chatViewReference.nativeElement||null}get handler(){return this.widgetHandler}}return e.TIMER_TRACKER=0,e.CHAT_COUNTER=0,e.\u0275fac=function(t){return new(t||e)(C.Yb(C.H),C.Yb(C.m))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-room-chat-component"]],viewQuery:function(e,t){if(1&e&&(C.cd(xc,1),C.cd(Ac,1,C.Z)),2&e){let e;C.Hc(e=C.oc())&&(t.chatViewReference=e.first),C.Hc(e=C.oc())&&(t.chatContainer=e.first)}},features:[C.Hb],decls:4,vars:0,consts:[[1,"nitro-room-chat-component"],["chatView",""],["chatContainer",""]],template:function(e,t){1&e&&(C.dc(0,"div",0,1),C.Uc(2,Dc,0,0,"ng-template",null,2,C.Vc),C.cc())},encapsulation:2}),e})();var kc=n("CCgv");function Pc(e,t){if(1&e&&(C.dc(0,"div",22),C.Wc(1),C.cc()),2&e){const e=t.$implicit;C.Kb(1),C.Yc("#",e,"")}}function Nc(e,t){if(1&e&&(C.dc(0,"div",20),C.Uc(1,Pc,2,1,"div",21),C.cc()),2&e){const e=C.qc(2);C.Kb(1),C.yc("ngForOf",e.tags)}}function Wc(e,t){if(1&e){const e=C.ec();C.dc(0,"button",3),C.nc("click",function(){return C.Lc(e),C.qc(2).likeRoom()}),C.Zb(1,"i",23),C.cc()}}const Kc=function(e){return[e]};function Fc(e,t){if(1&e){const e=C.ec();C.dc(0,"div",6),C.dc(1,"div",7),C.dc(2,"p",8),C.Wc(3),C.cc(),C.dc(4,"p",9),C.Wc(5),C.cc(),C.Uc(6,Nc,2,1,"div",10),C.dc(7,"div",11),C.dc(8,"div",12),C.dc(9,"button",3),C.nc("click",function(){return C.Lc(e),C.qc().toggleRoomTools()}),C.Zb(10,"i",13),C.cc(),C.dc(11,"button",3),C.nc("click",function(){return C.Lc(e),C.qc().toggleZoom()}),C.Zb(12,"i",4),C.cc(),C.Uc(13,Wc,2,0,"button",14),C.dc(14,"button",3),C.nc("click",function(){return C.Lc(e),C.qc().toggleChatHistory()}),C.Zb(15,"i",15),C.cc(),C.cc(),C.dc(16,"div",16),C.dc(17,"button",17),C.nc("click",function(){return C.Lc(e),C.qc().goInDirection(-1)}),C.Zb(18,"i",18),C.cc(),C.dc(19,"button",17),C.nc("click",function(){return C.Lc(e),C.qc().goInDirection(1)}),C.Zb(20,"i",19),C.cc(),C.cc(),C.cc(),C.cc(),C.cc()}if(2&e){const e=C.qc();C.yc("@inOutAnimation",void 0),C.Kb(3),C.Xc(e.roomName),C.Kb(2),C.Xc(e.ownerName),C.Kb(1),C.yc("ngIf",e.tags.length),C.Kb(6),C.yc("ngClass",C.Cc(8,Kc,e.zoomed?"fa-search-minus":"fa-search-plus")),C.Kb(1),C.yc("ngIf",e.canRate),C.Kb(4),C.yc("disabled",!e.hasDirection(-1)),C.Kb(2),C.yc("disabled",!e.hasDirection(1))}}let Vc=(()=>{class e extends tn.a{constructor(e,t,n,i){super(),this._componentFactoryResolver=e,this._ngZone=t,this._settingsService=n,this._navigatorService=i,this._lastRoomId=-1,this._roomData=null,this._currentRoomIndex=-1,this._roomName="",this._ownerName="",this._tags=[],this._zoomed=!0,this._roomOptionsVisible=!1,this._roomToolsVisible=!1,this._roomOptionsTimeout=null}ngOnDestroy(){this._navigatorService.roomInfoShowing=!1,this.stopRoomOptionsTimeout()}updateRoomInfo(t){t&&this._ngZone.run(()=>{for(const n of e.VISITED_ROOMS)n.roomId===t.roomId&&(n.roomName=t.roomName)})}updateRoomTools(e,t,n){this._ngZone.run(()=>{this._roomName=e,this._ownerName=t,this._tags=n,this.showRoomOptions()})}addVisitedRoom(t){this._ngZone.run(()=>{for(const n of e.VISITED_ROOMS)if(n&&n.roomId===t.roomId)return;e.VISITED_ROOMS.push(t),e.VISITED_ROOMS.length>e.MAX_VISIT_HISTORY&&e.VISITED_ROOMS.shift(),this._currentRoomIndex=e.VISITED_ROOMS.length-1})}updateRoomCurrentIndex(t){this._ngZone.run(()=>{let n=0;for(;n<e.VISITED_ROOMS.length;){const i=e.VISITED_ROOMS[n];if(i&&i.roomId===t)return void(this._currentRoomIndex=n);n++}})}likeRoom(){this.handler.rateRoom()}hasDirection(t){const n=this._currentRoomIndex+t;return n>=0&&n<e.VISITED_ROOMS.length}goInDirection(t){const n=this._currentRoomIndex+t;if(n<0||n>e.VISITED_ROOMS.length-1)return;const i=e.VISITED_ROOMS[n];i&&this._navigatorService.goToPrivateRoom(i.roomId)}toggleChatHistory(){this._settingsService.toggleChatHistory()}toggleZoom(){this.widgetHandler.processWidgetMessage(new Kt),this._zoomed=!this._zoomed}toggleRoomOptions(){this._roomOptionsVisible=!this._roomOptionsVisible,this._roomOptionsVisible&&this.showRoomOptions(!1)}showRoomOptions(e=!0){this._roomOptionsVisible=!0,this.stopRoomOptionsTimeout(),e&&(this._roomOptionsTimeout=setTimeout(()=>{this.stopRoomOptionsTimeout(),this._roomOptionsVisible=!1},5e3))}stopRoomOptionsTimeout(){this._roomOptionsTimeout&&(clearTimeout(this._roomOptionsTimeout),this._roomOptionsTimeout=null)}toggleRoomTools(){this._navigatorService.toggleRoomInfo()}get handler(){return this.widgetHandler}get roomName(){return this._roomName}get ownerName(){return this._ownerName}get tags(){return this._tags}get zoomed(){return this._zoomed}get roomOptionsVisible(){return this._roomOptionsVisible}get roomToolsVisible(){return this._roomToolsVisible}set roomToolsVisible(e){this._roomToolsVisible=e}get roomData(){return this._roomData}get canRate(){return this._navigatorService.data.canRate}}return e.VISITED_ROOMS=[],e.MAX_VISIT_HISTORY=10,e.\u0275fac=function(t){return new(t||e)(C.Yb(C.m),C.Yb(C.H),C.Yb(Xt.a),C.Yb(kc.a))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-room-tools-component"]],features:[C.Hb],decls:6,vars:4,consts:[[1,"nitro-room-tools"],[1,"row","m-0","p-0"],[1,"d-flex","align-items-end"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas",3,"ngClass"],["class","card ml-2",4,"ngIf"],[1,"card","ml-2"],[1,"d-flex","flex-column","p-3"],[1,"h5","text-truncate",2,"max-width","80%"],[1,"h6","room-owner","m-0"],["class","d-block mt-2",4,"ngIf"],[1,"d-flex","mt-2"],[1,"btn-group"],[1,"fas","fa-cog"],["type","button","class","btn btn-sm btn-secondary",3,"click",4,"ngIf"],[1,"fas","fa-comment-alt"],[1,"btn-group","ml-2"],["type","button",1,"btn","btn-sm","btn-secondary",3,"disabled","click"],[1,"fas","fa-arrow-left"],[1,"fas","fa-arrow-right"],[1,"d-block","mt-2"],["class","badge badge-secondary badge-sm mr-2",4,"ngFor","ngForOf"],[1,"badge","badge-secondary","badge-sm","mr-2"],[1,"fas","fa-heart"]],template:function(e,t){1&e&&(C.dc(0,"div",0),C.dc(1,"div",1),C.dc(2,"div",2),C.dc(3,"button",3),C.nc("click",function(){return t.toggleRoomOptions()}),C.Zb(4,"i",4),C.cc(),C.cc(),C.Uc(5,Fc,21,10,"div",5),C.cc(),C.cc()),2&e&&(C.Kb(4),C.yc("ngClass",C.Cc(2,Kc,t.roomOptionsVisible?"fa-chevron-left":"fa-chevron-right")),C.Kb(1),C.yc("ngIf",t.roomOptionsVisible))},directives:[dn.l,dn.n,dn.m],encapsulation:2,data:{animation:[Object(i.j)("inOutAnimation",[Object(i.i)(":enter",[Object(i.h)({transform:"translateX(-50%)"}),Object(i.e)(".1s ease-in",Object(i.h)({transform:"translateX(0%)"}))]),Object(i.i)(":leave",[Object(i.h)({transform:"translateX(0%)"}),Object(i.e)(".1s ease-out",Object(i.h)({transform:"translateX(-50%)"}))])])]}}),e})();var qc=n("jl72"),Hc=n("ygsp"),Bc=n("jzQx");let Gc=(()=>{class e extends qc.a{constructor(){super(...arguments),this.callback=null}confirm(){if(this.callback)try{this.callback()}catch(e){Bc.a.log(e)}this.close()}}return e.\u0275fac=function(t){return Zc(t||e)},e.\u0275cmp=C.Sb({type:e,selectors:[["ng-component"]],features:[C.Hb],decls:13,vars:8,consts:[["noMemory","true","center","true",1,"nitro-alert","d-flex","flex-column","bg-primary","border","border-black","shadow","rounded",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","px-3","pt-3"],[1,"m-0"],[1,"d-flex","flex-column","p-3"],[1,"d-flex","flex-column",3,"innerHTML"],[1,"d-flex","align-items-center","justify-content-center","mt-3"],["type","button",1,"btn","btn-link","mr-1",3,"click"],["type","button",1,"btn","btn-success",3,"click"]],template:function(e,t){1&e&&(C.dc(0,"div",0),C.dc(1,"div",1),C.dc(2,"h6",2),C.Wc(3),C.cc(),C.cc(),C.dc(4,"div",3),C.Zb(5,"div",4),C.dc(6,"div",5),C.dc(7,"button",6),C.nc("click",function(){return t.close()}),C.Wc(8),C.rc(9,"translate"),C.cc(),C.dc(10,"button",7),C.nc("click",function(){return t.confirm()}),C.Wc(11),C.rc(12,"translate"),C.cc(),C.cc(),C.cc(),C.cc()),2&e&&(C.Kb(3),C.Xc(t.title),C.Kb(2),C.yc("innerHTML",t.message,C.Mc),C.Kb(3),C.Xc(C.sc(9,4,"generic.cancel")),C.Kb(3),C.Xc(C.sc(12,6,"generic.ok")))},directives:[Mi.a,Pi.a],pipes:[un.a],encapsulation:2}),e})();const Zc=C.fc(Gc);function Xc(e,t){if(1&e){const e=C.ec();C.dc(0,"button",9),C.nc("click",function(){return C.Lc(e),C.qc().openLink()}),C.Wc(1),C.rc(2,"translate"),C.cc()}2&e&&(C.Kb(1),C.Xc(C.sc(2,1,"mod.alert.link")))}let jc=(()=>{class e extends qc.a{constructor(){super(...arguments),this.link=""}openLink(){window.open(this.link,"_blank")}get hasLink(){return this.link.length>0}}return e.\u0275fac=function(t){return Yc(t||e)},e.\u0275cmp=C.Sb({type:e,selectors:[["ng-component"]],features:[C.Hb],decls:12,vars:6,consts:[["noMemory","true","center","true",1,"nitro-alert","d-flex","flex-column","bg-primary","border","border-black","shadow","rounded",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","px-3","pt-3"],[1,"m-0"],[1,"d-flex","flex-column","p-3"],[1,"position-relative","w-100",2,"min-height","65px","max-height","275px"],[1,"d-block",3,"innerHTML"],[1,"d-flex","align-items-center","justify-content-center","mt-3"],["type","button","class","btn btn-link mr-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-link","mr-1",3,"click"]],template:function(e,t){1&e&&(C.dc(0,"div",0),C.dc(1,"div",1),C.dc(2,"h6",2),C.Wc(3),C.cc(),C.cc(),C.dc(4,"div",3),C.dc(5,"perfect-scrollbar",4),C.Zb(6,"div",5),C.cc(),C.dc(7,"div",6),C.Uc(8,Xc,3,3,"button",7),C.dc(9,"button",8),C.nc("click",function(){return t.close()}),C.Wc(10),C.rc(11,"translate"),C.cc(),C.cc(),C.cc(),C.cc()),2&e&&(C.Kb(3),C.Xc(t.title),C.Kb(3),C.yc("innerHTML",t.message,C.Mc),C.Kb(2),C.yc("ngIf",t.hasLink),C.Kb(2),C.Xc(C.sc(11,4,"generic.close")))},directives:[Mi.a,Pi.a,Ni.b,dn.n],pipes:[un.a],encapsulation:2}),e})();const Yc=C.fc(jc);function zc(e,t){if(1&e&&(C.bc(0),C.Zb(1,"div",8),C.ac()),2&e){const e=t.$implicit;C.Kb(1),C.yc("innerHTML",e,C.Mc)}}let $c=(()=>{class e extends qc.a{constructor(){super(...arguments),this.messages=[]}}return e.\u0275fac=function(t){return Qc(t||e)},e.\u0275cmp=C.Sb({type:e,selectors:[["ng-component"]],features:[C.Hb],decls:11,vars:5,consts:[["noMemory","true","center","true",1,"nitro-alert","multiple-messages","d-flex","flex-column","bg-primary","border","border-black","shadow","rounded",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","px-3","pt-3"],[1,"m-0"],[1,"d-flex","flex-column","p-3"],[1,"position-relative","w-100",2,"min-height","65px","max-height","275px"],[4,"ngFor","ngForOf"],[1,"d-flex","flex-column","align-items-center","justify-content-center","mt-3"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"d-block",3,"innerHTML"]],template:function(e,t){1&e&&(C.dc(0,"div",0),C.dc(1,"div",1),C.dc(2,"h6",2),C.Wc(3),C.cc(),C.cc(),C.dc(4,"div",3),C.dc(5,"perfect-scrollbar",4),C.Uc(6,zc,2,1,"ng-container",5),C.cc(),C.dc(7,"div",6),C.dc(8,"button",7),C.nc("click",function(){return t.close()}),C.Wc(9),C.rc(10,"translate"),C.cc(),C.cc(),C.cc(),C.cc()),2&e&&(C.Kb(3),C.Xc(t.title),C.Kb(3),C.yc("ngForOf",t.messages),C.Kb(3),C.Xc(C.sc(10,3,"generic.close")))},directives:[Mi.a,Pi.a,Ni.b,dn.m],pipes:[un.a],encapsulation:2}),e})();const Qc=C.fc($c),Jc=["alertsContainer"];function eo(e,t){}function to(e,t){}let no=(()=>{class e{constructor(e,t,n){this._notificationService=e,this._componentFactoryResolver=t,this._ngZone=n,this._alerts=new Map}ngOnInit(){this._notificationService.alertCenter=this}ngOnDestroy(){this.closeAllAlerts(),this._notificationService.alertCenter=null}alert(e,t=null){return this.buildAlert(qc.a,e,t)}alertWithLink(e,t=null,n=null){const i=this.buildAlert(jc,e,n);return i?(i.link=t,i):null}alertWithConfirm(e,t=null,n=null){const i=this.buildAlert(Gc,e,t);return i?(i.callback=n,i):null}alertWithChoices(e,t,n=null){let i=null;return this._ngZone.run(()=>{i=this.createAlertComponent(Hc.b),n?n.startsWith("${")&&(n=r.a.instance.getLocalization(n)):n=r.a.instance.getLocalization("${mod.alert.title}"),e&&(e.startsWith("${")&&(e=r.a.instance.getLocalization(e)),e=e.replace(/\r\n|\r|\n/g,"<br />")),i.title=n,i.message=e,i.choices=t}),i||null}alertWithScrollableMessages(e,t=null){const n=this.buildAlert($c,null,t);if(!n)return;const i=[];for(const r of e)r&&i.push(r.replace(/\r\n|\r|\n/g,"<br />"));return n.messages=i,n}buildAlert(e,t,n=null){let i=null;return this._ngZone.run(()=>{i=this.createAlertComponent(e),n?n.startsWith("${")&&(n=r.a.instance.getLocalization(n)):n=r.a.instance.getLocalization("${mod.alert.title}"),t&&(t.startsWith("${")&&(t=r.a.instance.getLocalization(t)),t=t.replace(/\r\n|\r|\n/g,"<br />")),i.title=n,i.message=t}),i||null}createAlertComponent(e){if(!e)return null;let t=null;const n=this._componentFactoryResolver.resolveComponentFactory(e);let i=null;return n&&(i=this.alertsContainer.createComponent(n),this._alerts.set(i.instance,i)),t=i.instance,t}closeAlert(e){if(!e)return;const t=this._alerts.get(e);t&&(this._alerts.delete(e),this.removeAlertView(t.hostView))}closeAllAlerts(){for(const e of this._alerts.keys())this.closeAlert(e)}removeAlertView(e){if(!e)return;const t=this.alertsContainer.indexOf(e);-1!==t&&this.alertsContainer.remove(t)}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(qt.a),C.Yb(C.m),C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-alert-center-component"]],viewQuery:function(e,t){if(1&e&&C.cd(Jc,1,C.Z),2&e){let e;C.Hc(e=C.oc())&&(t.alertsContainer=e.first)}},decls:5,vars:0,consts:[[1,"d-flex","flex-column-reverse"],["notificationsContainer",""],["alertsContainer",""]],template:function(e,t){1&e&&(C.dc(0,"div",0),C.Uc(1,eo,0,0,"ng-template",null,1,C.Vc),C.cc(),C.Uc(3,to,0,0,"ng-template",null,2,C.Vc))},encapsulation:2}),e})();var io=n("bpj7"),ro=n("KeNc"),so=n("vGKG");let co=(()=>{class e{transform(e,t){if(isNaN(e))return 0;if(null===e)return 0;if(0===e)return 0;let n=Math.abs(e);const i=Math.pow(10,1),r=e<0;let s="";const c=[{key:"Q",value:Math.pow(10,15)},{key:"T",value:Math.pow(10,12)},{key:"B",value:Math.pow(10,9)},{key:"M",value:Math.pow(10,6)},{key:"K",value:1e3}];for(let o=0;o<c.length;o++){let e=n/c[o].value;if(e=Math.round(e*i)/i,e>=1){n=e,s=c[o].key;break}}return(r?"-":"")+n+s}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=C.Xb({name:"shortNumber",type:e,pure:!0}),e})();const oo=function(e,t,n){return{"bg-pink":e,"bg-warning":t,"bg-skyBlue":n}};function ao(e,t){if(1&e&&(C.dc(0,"div",4),C.dc(1,"div",5),C.Wc(2),C.rc(3,"shortNumber"),C.cc(),C.dc(4,"div",9),C.Zb(5,"div",7),C.cc(),C.cc()),2&e){const e=C.qc().$implicit;C.Kb(2),C.Yc(" ",C.sc(3,3,e.value),""),C.Kb(2),C.yc("ngClass",C.Ec(5,oo,0==e.key,-1==e.key,5==e.key)),C.Kb(1),C.yc("type",e.key)}}function lo(e,t){if(1&e&&(C.bc(0),C.Uc(1,ao,6,9,"div",8),C.ac()),2&e){const e=t.$implicit,n=C.qc();C.Kb(1),C.yc("ngIf",n.isVisible(e.key))}}let uo=(()=>{class e{constructor(e){this._purseService=e}ngOnInit(){this._purseService.requestUpdate()}isVisible(e){return-1!==this._purseService.visibleCurrencies.indexOf(e)}getCurrencyUrl(e){return r.a.instance.getConfiguration("currency.asset.icon.url").replace("%type%",e)}get currencies(){return this._purseService.currencies}get hcDay(){if(!this._purseService.hcSub)return;const e=io.a.shortFormat(60*this._purseService.hcSub.totalSeconds);return this._purseService.hcSub.totalSeconds?e:r.a.instance.localization.getValue("purse.clubdays.zero.amount.text")}get isReady(){return this._purseService.isReady}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(ro.a))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-purse-main-component"]],decls:10,vars:5,consts:[[1,"nitro-purse-component","float-right"],[1,"position-relative","mb-1"],[1,"row","px-0","mx-0"],[4,"ngFor","ngForOf"],[1,"col","item-detail","btn","btn-primary","rounded","d-flex","nohover"],[1,"d-flex","flex-grow-1","align-items-center","justify-content-end","detail-value"],[1,"detail-icon","bg-orange"],["nitro-currency-icon","",1,"w-100","h-100",3,"type"],["class","col item-detail btn btn-primary rounded d-flex nohover",4,"ngIf"],[1,"detail-icon","bg-secondary",3,"ngClass"]],template:function(e,t){1&e&&(C.dc(0,"div",0),C.dc(1,"div",1),C.dc(2,"div",2),C.Uc(3,lo,2,1,"ng-container",3),C.rc(4,"keyvalue"),C.dc(5,"div",4),C.dc(6,"div",5),C.Wc(7),C.cc(),C.dc(8,"div",6),C.Zb(9,"div",7),C.cc(),C.cc(),C.cc(),C.cc(),C.cc()),2&e&&(C.Kb(3),C.yc("ngForOf",C.sc(4,3,t.currencies)),C.Kb(4),C.Yc(" ",t.hcDay," "),C.Kb(2),C.yc("type","hc"))},directives:[dn.m,so.a,dn.n,dn.l],pipes:[dn.h,co],encapsulation:2}),e})();var ho=n("1/Ir");function go(e,t){if(1&e){const e=C.ec();C.dc(0,"button",15),C.nc("click",function(){return C.Lc(e),C.qc(3).join()}),C.Wc(1),C.rc(2,"translate"),C.cc()}2&e&&(C.Kb(1),C.Xc(C.sc(2,1,"group.join")))}function mo(e,t){if(1&e){const e=C.ec();C.dc(0,"button",15),C.nc("click",function(){return C.Lc(e),C.qc(4).join()}),C.Wc(1),C.rc(2,"translate"),C.cc()}2&e&&(C.Kb(1),C.Xc(C.sc(2,1,"group.requestmembership")))}function fo(e,t){1&e&&(C.dc(0,"button",17),C.Wc(1),C.rc(2,"translate"),C.cc()),2&e&&(C.Kb(1),C.Xc(C.sc(2,1,"group.membershippending")))}function po(e,t){if(1&e&&(C.dc(0,"div"),C.Uc(1,mo,3,3,"button",13),C.Uc(2,fo,3,3,"button",16),C.cc()),2&e){const e=C.qc(3);C.Kb(1),C.yc("ngIf",0===e.groupMembershipType),C.Kb(1),C.yc("ngIf",2===e.groupMembershipType)}}function _o(e,t){if(1&e){const e=C.ec();C.dc(0,"div",10),C.dc(1,"div",4),C.nc("click",function(){return C.Lc(e),C.qc(2).openInfo()}),C.Zb(2,"nitro-badge",11),C.dc(3,"div",12),C.Wc(4),C.cc(),C.cc(),C.Uc(5,go,3,3,"button",13),C.Uc(6,po,3,2,"div",14),C.cc()}if(2&e){const e=C.qc(2);C.Kb(2),C.yc("badge",e.groupBadgeCode)("isGroup",!0),C.Kb(2),C.Xc(e.groupName),C.Kb(1),C.yc("ngIf",0===e.groupType&&0===e.groupMembershipType),C.Kb(1),C.yc("ngIf",1===e.groupType)}}function bo(e,t){if(1&e){const e=C.ec();C.dc(0,"div",1),C.dc(1,"div",2),C.dc(2,"div",3),C.dc(3,"div",4),C.nc("click",function(){return C.Lc(e),C.qc().toggleOpen()}),C.dc(4,"div",5),C.Zb(5,"i",6),C.Wc(6),C.rc(7,"translate"),C.cc(),C.dc(8,"div",7),C.Zb(9,"i",8),C.cc(),C.cc(),C.Uc(10,_o,7,5,"div",9),C.cc(),C.cc(),C.cc()}if(2&e){const e=C.qc();C.Kb(6),C.Xc(C.sc(7,3,"group.homeroominfo.title")),C.Kb(3),C.yc("ngClass",e.open?"fa-chevron-down":"fa-chevron-left"),C.Kb(1),C.yc("ngIf",e.open)}}let vo=(()=>{class e{constructor(e){this._groupService=e,this._groupService.groupRoomInfoComponent=this,this._open=!1,this.clear()}clear(){this._groupId=0,this._groupName=null,this._groupBadgeCode=null,this._groupType=-1,this._groupMembershipType=-1,this._groupMember=!1}toggleOpen(){this._open=!this._open}join(){this._groupId&&0===this._groupMembershipType&&this._groupService.join(this.groupId)}openInfo(){this._groupService.getInfo(this._groupId)}get visible(){return this._groupId>0}get open(){return this._open}get groupId(){return this._groupId}set groupId(e){this._groupId=e}get groupName(){return this._groupName}set groupName(e){this._groupName=e}get groupBadgeCode(){return this._groupBadgeCode}set groupBadgeCode(e){this._groupBadgeCode=e}get groupType(){return this._groupType}set groupType(e){this._groupType=e}get groupMembershipType(){return this._groupMembershipType}set groupMembershipType(e){this._groupMembershipType=e}get isGroupMember(){return this._groupMember}set groupMember(e){this._groupMember=e}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(ho.a))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-group-room-info-component"]],decls:1,vars:1,consts:[["class","nitro-group-room-info-component mb-2 float-right",4,"ngIf"],[1,"nitro-group-room-info-component","mb-2","float-right"],[1,"card","w-100"],[1,"d-flex","flex-column","p-2","w-100"],[1,"d-flex","flex-row","justify-content-between","w-100",3,"click"],[1,"w-100"],[1,"fas","fa-users","mr-2"],[1,"toggler"],[1,"fas",3,"ngClass"],["class","d-flex flex-column w-100 mt-2",4,"ngIf"],[1,"d-flex","flex-column","w-100","mt-2"],[1,"mr-2",3,"badge","isGroup"],[1,"group-name","w-100"],["class","btn btn-success btn-block btn-sm mt-2",3,"click",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-success","btn-block","btn-sm","mt-2",3,"click"],["class","btn btn-primary disabled btn-block btn-sm mt-2","disabled","",4,"ngIf"],["disabled","",1,"btn","btn-primary","disabled","btn-block","btn-sm","mt-2"]],template:function(e,t){1&e&&C.Uc(0,bo,11,5,"div",0),2&e&&C.yc("ngIf",t.visible)},directives:[dn.n,dn.l,Os.a],pipes:[un.a],encapsulation:2}),e})(),Eo=(()=>{class e{constructor(e){this._notificationService=e,this.type=null,this.parameters=null,this.removing=!1}hide(){this.removing=!0,setTimeout(()=>this.close(),300)}close(){this._notificationService.closeNotification(this)}interpolate(e,t=null){t||(t=new RegExp(/%(.*?)%/g));const n=e.match(t);if(n&&n.length)for(const i of n){const t=this.parameters.get(this.removeInterpolateKey(i));t&&(e=e.replace(i,t))}return e}removeInterpolateKey(e){return e.replace(/%/g,"")}getDefaultImage(){const e=this.notificationLocaleKey+".image";let t=r.a.instance.getLocalization(e)||null;return t===e?(t=r.a.instance.getConfiguration("image.library.notifications.url"),t=t.replace("%image%",this.type),t):(t&&t.length&&(t=this.interpolate(t),t=r.a.instance.core.configuration.interpolate(t)),t)}getDefaultLinkTitle(){let e=r.a.instance.getLocalization(this.notificationLocaleKey+".linkTitle")||null;return e&&e.length&&(e=this.interpolate(e)),e}getDefaultLinkUrl(){let e=r.a.instance.getLocalization(this.notificationLocaleKey+".linkUrl")||null;return e&&e.length&&(e=this.interpolate(e)),e}getDefaultMessage(){let e=r.a.instance.getLocalization(this.notificationLocaleKey+".message")||null;return e&&e.length&&(e=this.interpolate(e)),e}getDefaultTitle(){let e=r.a.instance.getLocalization(this.notificationLocaleKey+".title")||null;return e&&e.length&&(e=this.interpolate(e)),e}get notificationLocaleKey(){return"notification."+this.type}get timeout(){return 0}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(qt.a))},e.\u0275cmp=C.Sb({type:e,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();const So=function(e){return{"background-image":e}};function yo(e,t){if(1&e&&C.Zb(0,"div",3),2&e){const e=C.qc();C.yc("ngStyle",C.Cc(1,So,"url("+e.getDefaultImage()+")"))}}let Io=(()=>{class e extends Eo{clickNotification(){this.visitUrl(),this.hide()}visitUrl(){const e=this.getDefaultLinkUrl();if(!e||!e.length)return;const t=e.split(":");!t||t.length<2||("event"===t[0]?r.a.instance.createLinkEvent(t[1]):window.open(e,"_blank"))}getDefaultImage(){let e=this.parameters.get("image")||null;return e?(e=r.a.instance.core.configuration.interpolate(e),e):super.getDefaultImage()}getDefaultLinkTitle(){let e=this.parameters.get("linkTitle")||null;return e?(e=r.a.instance.getLocalization(e),e):super.getDefaultLinkTitle()}getDefaultLinkUrl(){return this.parameters.get("linkUrl")||super.getDefaultLinkUrl()}getDefaultMessage(){let e=this.parameters.get("message")||null;return e?(e=r.a.instance.getLocalization(e),e):super.getDefaultMessage()}getDefaultTitle(){let e=this.parameters.get("title")||null;return e?(e=r.a.instance.getLocalization(e),e):super.getDefaultTitle()}get timeout(){return 5e3}}return e.\u0275fac=function(t){return wo(t||e)},e.\u0275cmp=C.Sb({type:e,selectors:[["ng-component"]],features:[C.Hb],decls:3,vars:4,consts:[[1,"d-flex","justify-content-center","align-items-center","nitro-notification-bubble","bg-primary","rounded","border","border-black","shadow",3,"click"],[1,"bubble-message","text-center","w-100","mb-0",3,"innerHTML"],["class","bubble-image bg-secondary rounded",3,"ngStyle",4,"ngIf"],[1,"bubble-image","bg-secondary","rounded",3,"ngStyle"]],template:function(e,t){1&e&&(C.dc(0,"div",0),C.nc("click",function(){return t.clickNotification()}),C.Zb(1,"p",1),C.Uc(2,yo,1,3,"div",2),C.cc()),2&e&&(C.Qb("removing",t.removing),C.Kb(1),C.yc("innerHTML",t.getDefaultMessage(),C.Mc),C.Kb(1),C.yc("ngIf",t.getDefaultImage()))},directives:[dn.n,dn.o],encapsulation:2}),e})();const wo=C.fc(Io),Co=function(e){return{"background-image":e}};function Ro(e,t){if(1&e&&C.Zb(0,"div",7),2&e){const e=C.qc();C.yc("ngStyle",C.Cc(1,Co,"url("+e.getDefaultImage()+")"))}}let To=(()=>{class e extends Io{get timeout(){return 0}}return e.\u0275fac=function(t){return Oo(t||e)},e.\u0275cmp=C.Sb({type:e,selectors:[["ng-component"]],features:[C.Hb],decls:10,vars:8,consts:[[1,"d-flex","flex-column","justify-content-center","align-items-center","nitro-notification-bubble","bubble-event","bg-primary","rounded","border","shadow"],[1,"d-flex","w-100"],[1,"bubble-message","text-center","w-100","mb-0",3,"innerHTML"],["class","bubble-image bg-secondary rounded",3,"ngStyle",4,"ngIf"],[1,"d-flex","btn-group","w-100","mt-2"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["type","button",1,"btn","btn-sm","btn-success",3,"click"],[1,"bubble-image","bg-secondary","rounded",3,"ngStyle"]],template:function(e,t){1&e&&(C.dc(0,"div",0),C.dc(1,"div",1),C.Zb(2,"p",2),C.Uc(3,Ro,1,3,"div",3),C.cc(),C.dc(4,"div",4),C.dc(5,"button",5),C.nc("click",function(){return t.hide()}),C.Wc(6),C.rc(7,"translate"),C.cc(),C.dc(8,"button",6),C.nc("click",function(){return t.clickNotification()}),C.Wc(9),C.cc(),C.cc(),C.cc()),2&e&&(C.Qb("removing",t.removing),C.Kb(2),C.yc("innerHTML",t.getDefaultMessage(),C.Mc),C.Kb(1),C.yc("ngIf",t.getDefaultImage()),C.Kb(3),C.Xc(C.sc(7,6,"alert.close.button")),C.Kb(3),C.Xc(t.getDefaultLinkTitle()))},directives:[dn.n,dn.o],pipes:[un.a],encapsulation:2}),e})();const Oo=C.fc(To),Mo=["notificationsContainer"];function Uo(e,t){}let xo=(()=>{class e{constructor(e,t,n){this._notificationService=e,this._componentFactoryResolver=t,this._ngZone=n,this._notifications=new Map}ngOnInit(){this._notificationService.notificationCenter=this}ngOnDestroy(){this.closeAllNotifications(),this._notificationService.notificationCenter=null}displayNotification(e,t){let n=null;switch(e){case"hotel.event":n=To;break;default:n=Io}const i=this.buildNotification(n);return i?(i.type=e,i.parameters=t,i.timeout>0&&setTimeout(()=>i&&i.hide(),i.timeout),i):null}buildNotification(e){let t=null;return this._ngZone.run(()=>{t=this.createNotificationComponent(e)}),t||null}createNotificationComponent(e){if(!e)return null;let t=null;const n=this._componentFactoryResolver.resolveComponentFactory(e);let i=null;return n&&(i=this.notificationsContainer.createComponent(n),this._notifications.set(i.instance,i)),t=i.instance,t}closeNotification(e){if(!e)return;const t=this._notifications.get(e);t&&(this._notifications.delete(e),this.removeNotificationView(t.hostView))}closeAllNotifications(){for(const e of this._notifications.keys())this.closeNotification(e)}removeNotificationView(e){if(!e)return;const t=this.notificationsContainer.indexOf(e);-1!==t&&this.notificationsContainer.remove(t)}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(qt.a),C.Yb(C.m),C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-notification-center-component"]],viewQuery:function(e,t){if(1&e&&C.cd(Mo,1,C.Z),2&e){let e;C.Hc(e=C.oc())&&(t.notificationsContainer=e.first)}},decls:3,vars:0,consts:[[1,"d-flex","flex-column-reverse"],["notificationsContainer",""]],template:function(e,t){1&e&&(C.dc(0,"div",0),C.Uc(1,Uo,0,0,"ng-template",null,1,C.Vc),C.cc())},encapsulation:2}),e})();var Ao=n("OD84");const Do=["progressBar"],Lo=["nitro-achievements-category-list-component",""];function ko(e,t){if(1&e&&(C.dc(0,"div",13),C.Wc(1),C.cc()),2&e){const e=C.qc().$implicit,t=C.qc();C.Kb(1),C.Xc(t.getUnseenCount(e))}}const Po=function(e){return[e]},No=function(e){return{"background-image":e}};function Wo(e,t){if(1&e){const e=C.ec();C.dc(0,"div",9),C.nc("click",function(){C.Lc(e);const n=t.$implicit;return C.qc().selectCategory(n)}),C.dc(1,"div",10),C.Uc(2,ko,2,1,"div",11),C.dc(3,"div",12),C.Wc(4),C.cc(),C.cc(),C.cc()}if(2&e){const e=t.$implicit,n=C.qc();C.Kb(1),C.yc("ngClass",C.Cc(4,Po,n.selectedCategory===e?"bg-primary":"bg-secondary"))("ngStyle",C.Cc(6,No,"url("+n.getCategoryImage(e.name,e.achievements)+")")),C.Kb(1),C.yc("ngIf",n.getUnseenCount(e)),C.Kb(2),C.Xc(n.getCategoryProgress(e.achievements))}}const Ko=function(e){return{width:e}};let Fo=(()=>{class e{constructor(e,t,n){this._settingsService=e,this._achivementsService=t,this._ngZone=n,this.visible=!1}selectCategory(e){this._achivementsService.selectedCategory=e}getProgressNumbers(){let e=0,t=0;for(const n of this.categories)if(n)for(const i of n.achievements)i&&(e+=i._Str_7518?i.level:i.level-1,t+=i.totalLevels);return[e,t]}getProgressPercentageString(){const[e,t]=this.getProgressNumbers();return Math.trunc(e/t*100)+"%"}getProgressString(){const[e,t]=this.getProgressNumbers();return e+"/"+t}getCategoryImage(e,t,n=!1){if(n)return r.a.instance.getConfiguration("achievements.images.url",r.a.instance.core.configuration.getValue("image.library.url")+`quests/achcategory_${e}.png`).toString().replace("%image%",e);let i=0;for(const r of t)i+=r._Str_7518?r.level:r.level-1;const s=i>0?"active":"inactive";return r.a.instance.getConfiguration("achievements.images.url",r.a.instance.core.configuration.getValue("image.library.url")+`quests/achcategory_${e}_${s}.png`).toString().replace("%image%",`achcategory_${e}_${s}`)}getCategoryProgress(e){let t=0,n=0;for(const i of e)i&&(i._Str_7518&&(t=t+1+i.level),n+=i.totalLevels);return t+"/"+n}getUnseenCount(e){let t=0;if(e)for(const n of e.achievements)n&&(t+=n.unseen);return t}get categories(){return this._achivementsService.categories}get selectedCategory(){return this._achivementsService.selectedCategory}get achievementScore(){return this._achivementsService.achievementScore}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(Xt.a),C.Yb(Ao.a),C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["","nitro-achievements-category-list-component",""]],viewQuery:function(e,t){if(1&e&&C.cd(Do,1),2&e){let e;C.Hc(e=C.oc())&&(t.progressBar=e.first)}},inputs:{visible:"visible"},attrs:Lo,decls:12,vars:10,consts:[[1,"grid-container","achievement-category-container","w-100","mb-2"],[1,"grid-items","grid-3"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","w-100"],[1,"achievement-progress-bar","bg-secondary","rounded","p-1","position-relative"],[1,"achievement-progress-bar-inner","bg-success","rounded","py-3",3,"ngStyle"],[1,"achievement-progress-bar-content","text-center","d-flex","justify-content-center"],[1,"align-self-center"],[1,"text-center","bg-secondary","rounded","px-2","mt-2"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],[1,"detail-info","has-image","rounded",3,"ngClass","ngStyle"],["class","position-absolute btn btn-sm btn-primary px-1 py-0 rounded count",4,"ngIf"],[1,"achievement-progress"],[1,"position-absolute","btn","btn-sm","btn-primary","px-1","py-0","rounded","count"]],template:function(e,t){1&e&&(C.dc(0,"div",0),C.dc(1,"div",1),C.Uc(2,Wo,5,8,"div",2),C.cc(),C.cc(),C.dc(3,"div",3),C.dc(4,"div",4),C.Zb(5,"div",5),C.dc(6,"div",6),C.dc(7,"span",7),C.Wc(8),C.cc(),C.cc(),C.cc(),C.dc(9,"div",8),C.Wc(10),C.rc(11,"translate"),C.cc(),C.cc()),2&e&&(C.Kb(2),C.yc("ngForOf",t.categories),C.Kb(3),C.yc("ngStyle",C.Cc(8,Ko,t.getProgressPercentageString())),C.Kb(3),C.Xc(t.getProgressString()),C.Kb(2),C.Xc(C.uc(11,4,"achievements.categories.score","score",t.achievementScore)))},directives:[dn.m,dn.o,dn.l,dn.n],pipes:[un.a],encapsulation:2}),e})();class Vo{constructor(e){this.badgeId=e,this._base="",this._level=1,this.parseText()}parseText(){let e=this.badgeId.length-1;for(;e>0&&this.isNumber(this.badgeId.charAt(e));)e--;this._base=this.badgeId.substr(0,e+1);const t=this.badgeId.substr(e+1,this.badgeId.length);t&&""!=t&&(this._level=Number.parseInt(t))}isNumber(e){const t=e.charCodeAt(0);return t>=49&&t<=57}set level(e){this._level=Math.max(1,e)}get level(){return this._level}get getBadgeId(){return this._base+this._level}get base(){return this._base}}const qo=["nitro-achievements-category-component",""];function Ho(e,t){if(1&e&&(C.dc(0,"div",8),C.Wc(1),C.cc()),2&e){const e=C.qc().$implicit;C.Kb(1),C.Xc(e.count)}}const Bo=function(e,t){return[e,t]},Go=function(e){return{"background-image":e}};function Zo(e,t){if(1&e){const e=C.ec();C.dc(0,"div",5),C.nc("click",function(){C.Lc(e);const n=t.$implicit;return C.qc().selectAchievement(n)}),C.dc(1,"div",6),C.Uc(2,Ho,2,1,"div",7),C.cc(),C.cc()}if(2&e){const e=t.$implicit,n=C.qc();C.Kb(1),C.yc("ngClass",C.Dc(3,Bo,n.selectedAchievement===e?"bg-primary":"bg-secondary",e&&e._Str_10438?"":"greyscale"))("ngStyle",C.Cc(6,Go,"url("+n.getBadgeImageUrl(e)+")")),C.Kb(1),C.yc("ngIf",e.count)}}function Xo(e,t){if(1&e&&(C.dc(0,"span",19),C.Wc(1),C.rc(2,"translate"),C.dc(3,"b"),C.Wc(4),C.cc(),C.Zb(5,"img",20),C.cc()),2&e){const e=C.qc(2);C.Kb(1),C.Yc("",C.sc(2,3,"achievements.details.reward")," "),C.Kb(3),C.Xc(e.selectedAchievement.rewardAmount),C.Kb(1),C.yc("src",e.getCurrencyUrl(e.selectedAchievement.rewardType),C.Nc)}}const jo=function(e){return{width:e}};function Yo(e,t){if(1&e&&(C.dc(0,"div",21),C.Zb(1,"div",22),C.dc(2,"div",23),C.dc(3,"span",24),C.Wc(4),C.cc(),C.cc(),C.cc()),2&e){const e=C.qc(2);C.Kb(1),C.yc("ngStyle",C.Cc(2,jo,e.getProgress(e.selectedAchievement))),C.Kb(3),C.Xc(e.getProgress(e.selectedAchievement,!0))}}const zo=function(e){return[e]};function $o(e,t){if(1&e&&(C.dc(0,"div",9),C.dc(1,"div",10),C.dc(2,"div",11),C.Zb(3,"img",12),C.cc(),C.dc(4,"span",13),C.Wc(5),C.cc(),C.cc(),C.dc(6,"div",14),C.dc(7,"span",15),C.Wc(8),C.cc(),C.dc(9,"span",16),C.Wc(10),C.cc(),C.Uc(11,Xo,6,5,"span",17),C.Uc(12,Yo,5,4,"div",18),C.cc(),C.cc()),2&e){const e=C.qc();C.Kb(3),C.yc("ngClass",C.Cc(7,zo,e.selectedAchievement._Str_10438?"":"greyscale"))("src",e.getBadgeImageUrl(e.selectedAchievement),C.Nc),C.Kb(2),C.Xc(e.getBadgeLevelString(e.selectedAchievement)),C.Kb(3),C.Xc(e.getBadgeText(e.selectedAchievement)),C.Kb(2),C.Xc(e.getBadgeText(e.selectedAchievement,!0)),C.Kb(1),C.yc("ngIf",!e.selectedAchievement._Str_7518),C.Kb(1),C.yc("ngIf",!e.selectedAchievement._Str_7518)}}let Qo=(()=>{class e{constructor(e){this._achivementsService=e,this.category=null,this._selectedAchievement=null}ngOnChanges(e){const t=e.category.currentValue;t&&t!==e.category.previousValue&&(this._selectedAchievement=null)}selectAchievement(e){e.unseen=0,this._selectedAchievement=e}getAchievedBadgeId(e){return e._Str_7518?e.badgeId:r.a.instance.localization.getBadgeBaseAndLevel(e.badgeId)}getBadgeText(e,t=!1){const n=this.getAchievedBadgeId(e),i=new Vo(n);let r;return r=this.getText(t?["badge_desc_"+n,"badge_desc_"+i.base]:["badge_name_"+n,"badge_name_"+i.base]),r.replace("%roman%",this.getRomanNumeral(i.level)).replace("%limit%",e._Str_24142.toString())}getText(e){let t="",n=0;for(;n<e.length;){const i=e[n];if(t=r.a.instance.getLocalization(i),t!==i)return t;n++}return""}getProgress(e,t=!1){if(e)return t?e.progress+"/"+e.toNextProgress:Math.trunc(e.progress/e.toNextProgress*100)+"%"}getBadgeLevelString(e){if(!e)return;let t=r.a.instance.getLocalization("achievements.details.level");return t=t.replace("%level%",Math.max(1,e.level-1).toString()),t=t.replace("%limit%",e.totalLevels.toString()),t}getRomanNumeral(e){return r.a.instance.localization.getRomanNumeral(e)}getBadgeImageUrl(e){let t=e.badgeId;return e.totalLevels>1&&(t=t.replace(/[0-9]/g,""),t+=e.level-1>0?e.level-1:e.level),r.a.instance.sessionDataManager.getBadgeUrl(t)}getCurrencyUrl(e){return r.a.instance.getConfiguration("currency.asset.icon.url").replace("%type%",e.toString())}get selectedAchievement(){return this._selectedAchievement}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(Ao.a))},e.\u0275cmp=C.Sb({type:e,selectors:[["","nitro-achievements-category-component",""]],inputs:{category:"category"},features:[C.Ib],attrs:qo,decls:7,vars:5,consts:[[1,"text-center","bg-secondary","rounded","px-2","mb-2"],[1,"grid-container","w-100","mb-2",2,"min-height","156px","max-height","156px","height","156px"],[1,"grid-items","grid-5"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],["class","bg-secondary mb-auto w-100 p-1 rounded d-flex flex-row",4,"ngIf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],[1,"detail-info","has-image","rounded",3,"ngClass","ngStyle"],["class","position-absolute btn btn-sm btn-danger px-1 py-0 rounded count",4,"ngIf"],[1,"position-absolute","btn","btn-sm","btn-danger","px-1","py-0","rounded","count"],[1,"bg-secondary","mb-auto","w-100","p-1","rounded","d-flex","flex-row"],[1,"text-center"],[1,"badge_preview","flex-shrink-0","justify-content-center","d-flex"],["image-placeholder","",1,"badge_preview_image","align-self-center",3,"ngClass","src"],[1,"font-weight-bolder","text-center","small"],[1,"badge_info","w-100","small"],[1,"mb-1","font-weight-bolder"],[1,"mb-1","d-block",2,"min-height","42px"],["class","mb-1 d-block",4,"ngIf"],["class","achievement-progress-bar bg-primary rounded p-1 position-relative",4,"ngIf"],[1,"mb-1","d-block"],["image-placeholder","",1,"pl-1",3,"src"],[1,"achievement-progress-bar","bg-primary","rounded","p-1","position-relative"],[1,"achievement-progress-bar-inner","bg-success","rounded","py-3",3,"ngStyle"],[1,"achievement-progress-bar-content","text-center","d-flex","justify-content-center"],[1,"align-self-center"]],template:function(e,t){1&e&&(C.dc(0,"div",0),C.Wc(1),C.rc(2,"translate"),C.cc(),C.dc(3,"perfect-scrollbar",1),C.dc(4,"div",2),C.Uc(5,Zo,3,8,"div",3),C.cc(),C.cc(),C.Uc(6,$o,13,9,"div",4)),2&e&&(C.Kb(1),C.Xc(C.sc(2,3,"quests."+t.category.name+".name")),C.Kb(4),C.yc("ngForOf",t.category.achievements),C.Kb(1),C.yc("ngIf",t.selectedAchievement))},directives:[Ni.b,dn.m,dn.n,dn.l,dn.o,Ps.a],pipes:[un.a],encapsulation:2}),e})();function Jo(e,t){if(1&e&&C.Zb(0,"div",9),2&e){const e=C.qc(2);C.yc("category",e.selectedCategory)}}function ea(e,t){if(1&e){const e=C.ec();C.dc(0,"div",1),C.dc(1,"div",2),C.dc(2,"h6",3),C.Wc(3),C.rc(4,"translate"),C.cc(),C.dc(5,"button",4),C.nc("click",function(){return C.Lc(e),C.qc().hide()}),C.Zb(6,"i",5),C.cc(),C.cc(),C.dc(7,"div",6),C.Zb(8,"div",7),C.Uc(9,Jo,1,1,"div",8),C.cc(),C.cc()}if(2&e){const e=C.qc();C.Kb(3),C.Xc(C.sc(4,2,"inventory.achievements")),C.Kb(6),C.yc("ngIf",e.selectedCategory)}}let ta=(()=>{class e{constructor(e,t,n){this._settingsService=e,this._achivementsService=t,this._ngZone=n,this.visible=!1}ngOnChanges(e){const t=e.visible.currentValue;t&&t!==(e.visible.previousValue||!1)&&this.prepareAchievements()}prepareAchievements(){this._achivementsService.isInitalized||this._achivementsService.loadAchievements()}hide(){this._settingsService.hideAchievements()}get selectedCategory(){return this._achivementsService.selectedCategory}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(Xt.a),C.Yb(Ao.a),C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-achievements-main-component"]],inputs:{visible:"visible"},features:[C.Ib],decls:1,vars:1,consts:[["class","nitro-achievements card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-achievements","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-3"],["nitro-achievements-category-list-component","",1,"col-6","d-flex","flex-column"],["class","col-6 d-flex flex-column","nitro-achievements-category-component","",3,"category",4,"ngIf"],["nitro-achievements-category-component","",1,"col-6","d-flex","flex-column",3,"category"]],template:function(e,t){1&e&&C.Uc(0,ea,10,4,"div",0),2&e&&C.yc("ngIf",t.visible)},directives:[dn.n,Mi.a,Pi.a,Fo,Qo],pipes:[un.a],encapsulation:2}),e})();var na=n("VXVv");let ia=(()=>{class e{constructor(e,t){this._callForHelpService=e,this._ngZone=t}ngOnInit(){this._callForHelpService.component=this}ngOnDestroy(){this._callForHelpService.component=null}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(na.a),C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-call-for-help-main-component"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();var ra=n("jf0f");let sa=(()=>{class e{constructor(e){this._habbopediaService=e,this.url=""}close(){this._habbopediaService.closePage(this)}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(ra.a))},e.\u0275cmp=C.Sb({type:e,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();const ca=["pagesContainer"];function oa(e,t){}let aa=(()=>{class e{constructor(e,t,n){this._habbopediaService=e,this._componentFactoryResolver=t,this._ngZone=n,this._pages=new Map}ngOnInit(){this._habbopediaService.component=this,r.a.instance.addLinkEventTracker(this)}ngOnDestroy(){r.a.instance.removeLinkEventTracker(this),this._habbopediaService.component=null}openPage(e){this.buildPage(sa,e)}buildPage(e,t){const n=this.createComponent(e);return n?(n.url=t,n):null}createComponent(e){if(!e)return null;const t=this._componentFactoryResolver.resolveComponentFactory(e);let n=null;return t&&(n=this.pagesContainer.createComponent(t),this._pages.set(n.instance,n)),n.instance}close(e){if(!e)return;const t=this._pages.get(e);t&&(this._pages.delete(e),this.removeView(t.hostView))}closeAll(){for(const e of this._pages.keys())this.close(e)}removeView(e){if(!e)return;const t=this.pagesContainer.indexOf(e);-1!==t&&this.pagesContainer.remove(t)}linkReceived(e){const t=e.split("/");t.length<2||(t.shift(),this.openPage(t.join("/")))}get eventUrlPrefix(){return"habbopages/"}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(ra.a),C.Yb(C.m),C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-pedia-main-component"]],viewQuery:function(e,t){if(1&e&&C.cd(ca,1,C.Z),2&e){let e;C.Hc(e=C.oc())&&(t.pagesContainer=e.first)}},decls:2,vars:0,consts:[["pagesContainer",""]],template:function(e,t){1&e&&C.Uc(0,oa,0,0,"ng-template",null,0,C.Vc)},encapsulation:2}),e})();var la=n("OMsP"),da=n("EVdn"),ua=n("A7kE"),ha=n("tD+c"),ga=n("6ZDM"),ma=n("wme0"),fa=n("bL7b"),pa=n("4vVX"),_a=n("A9CM"),ba=n("IK0V"),va=n("WyzG"),Ea=n("Ys4F"),Sa=n("rubn"),ya=n("j2zY");function Ia(e,t){if(1&e){const e=C.ec();C.dc(0,"div",1),C.dc(1,"ul",2),C.dc(2,"li",3),C.nc("click",function(){return C.Lc(e),C.qc().toggleAvatarEditor()}),C.Zb(3,"i",4),C.dc(4,"span"),C.Wc(5),C.rc(6,"translate"),C.cc(),C.cc(),C.dc(7,"li",3),C.nc("click",function(){return C.Lc(e),C.qc().toggleAchievements()}),C.Zb(8,"i",5),C.dc(9,"span"),C.Wc(10),C.rc(11,"translate"),C.cc(),C.cc(),C.dc(12,"li",3),C.nc("click",function(){return C.Lc(e),C.qc().toggleNavigator()}),C.Zb(13,"i",6),C.dc(14,"span"),C.Wc(15),C.rc(16,"translate"),C.cc(),C.cc(),C.dc(17,"li",3),C.nc("click",function(){return C.Lc(e),C.qc().toggleUserSettings()}),C.Zb(18,"i",7),C.dc(19,"span"),C.Wc(20),C.rc(21,"translate"),C.cc(),C.cc(),C.cc(),C.cc()}2&e&&(C.yc("@inOutAnimation",void 0),C.Kb(5),C.Xc(C.sc(6,5,"widget.memenu.editavatar")),C.Kb(5),C.Xc(C.sc(11,7,"widget.memenu.achievements")),C.Kb(5),C.Xc(C.sc(16,9,"widget.memenu.myrooms")),C.Kb(5),C.Xc(C.sc(21,11,"toolbar.icon.tooltip.settings")))}let wa=(()=>{class e{constructor(e,t,n,i,r){this._avatarEditorService=e,this.settingsService=t,this.navigatorService=n,this._achievementService=i,this._ngZone=r}ngOnInit(){}ngOnDestroy(){}get isVisible(){return this.settingsService.meMenuVisible||!1}toggleAvatarEditor(){this._avatarEditorService.loadOwnAvatarInEditor(),this.settingsService.toggleAvatarEditor()}toggleAchievements(){this.settingsService.toggleAchievements()}toggleNavigator(){this.settingsService.toggleNavigator(),this.navigatorService.setCurrentContextByCode("myworld_view")}toggleUserSettings(){this.settingsService.toggleUserSettings()}get unseenAchievementsCount(){return this._achievementService.unseenCount}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(Ci.a),C.Yb(Xt.a),C.Yb(kc.a),C.Yb(Ao.a),C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-toolbar-me-menu-component"]],decls:1,vars:1,consts:[["class","card bg-secondary nitro-toolbar-me-menu",4,"ngIf"],[1,"card","bg-secondary","nitro-toolbar-me-menu"],[1,"list-group","list-group-horizontal","p-1"],[1,"d-flex","flex-column","list-group-item",3,"click"],[1,"icon","icon-me-clothing","d-block"],[1,"icon","icon-me-achievements","d-block"],[1,"icon","icon-me-rooms","d-block"],[1,"icon","icon-me-settings","d-block"]],template:function(e,t){1&e&&C.Uc(0,Ia,22,13,"div",0),2&e&&C.yc("ngIf",t.isVisible)},directives:[dn.n],pipes:[un.a],encapsulation:2,data:{animation:[Object(i.j)("inOutAnimation",[Object(i.i)(":enter",[Object(i.h)({bottom:10,opacity:0}),Object(i.e)(".3s ease-out",Object(i.h)({bottom:77,opacity:1}))]),Object(i.i)(":leave",[Object(i.h)({bottom:77,opacity:1}),Object(i.e)(".3s ease-in",Object(i.h)({bottom:10,opacity:0}))])])]}}),e})();const Ca=["navigationList"],Ra=["listeitem"];function Ta(e,t){if(1&e&&(C.dc(0,"div",27),C.Wc(1),C.cc()),2&e){const e=C.qc();C.Kb(1),C.Xc(e.unseenAchievementsCount)}}function Oa(e,t){if(1&e){const e=C.ec();C.dc(0,"li",9),C.nc("click",function(){return C.Lc(e),C.qc().clickIcon("hotel_view")}),C.Zb(1,"i",28),C.cc()}}function Ma(e,t){if(1&e){const e=C.ec();C.dc(0,"li",9),C.nc("click",function(){return C.Lc(e),C.qc().clickIcon("home_room")}),C.Zb(1,"i",29),C.cc()}}function Ua(e,t){if(1&e&&(C.dc(0,"div",30),C.Wc(1),C.cc()),2&e){const e=C.qc();C.Kb(1),C.Xc(e.unseenInventoryCount)}}function xa(e,t){if(1&e&&(C.dc(0,"div",30),C.Wc(1),C.cc()),2&e){const e=C.qc();C.Kb(1),C.Xc(e.unseenFriendListCount)}}function Aa(e,t){if(1&e){const e=C.ec();C.dc(0,"div",31),C.nc("click",function(){C.Lc(e);const n=t.$implicit;return C.qc().toggleFriendOptions(n.id)}),C.Zb(1,"img",32),C.dc(2,"p",24),C.Wc(3),C.cc(),C.dc(4,"div",33),C.dc(5,"div",34),C.nc("click",function(){C.Lc(e);const n=t.$implicit;return C.qc().openFriendChat(n.id)}),C.cc(),C.dc(6,"div",35),C.nc("click",function(){C.Lc(e);const n=t.$implicit;return C.qc().followFriend(n.id)}),C.cc(),C.dc(7,"div",36),C.nc("click",function(){C.Lc(e);const n=t.$implicit;return C.qc().openFriendsProfilePage(n.id)}),C.cc(),C.cc(),C.cc()}if(2&e){const e=t.$implicit;C.Ac("id","friends_",e.id,""),C.Kb(1),C.Ac("src","https://www.habbo.com/habbo-imaging/avatarimage?figure=",e.figure,"&action=std&gesture=std&direction=2&head_direction=2&size=n&headonly=1&img_format=png",C.Nc),C.Kb(2),C.Xc(e.name),C.Kb(1),C.Ac("id","friendOptions_",e.id,"")}}let Da=(()=>{class e{constructor(e,t,n,i,r,s,c,o){this._inventoryService=e,this._navigatorService=t,this._friendListService=n,this._achievementService=i,this.sessionService=r,this.settingsService=s,this._modToolsService=c,this.ngZone=o,this.isInRoom=!1,this.acac="friend-box-kapali",this.acikMi=!1,this.currentOpenedFriendOptions=0,this.onNitroToolbarEvent=this.onNitroToolbarEvent.bind(this)}ngAfterContentInit(){da(".online-friends-box").click(function(){"70px"==da(this).css("height")?da(this).css({height:"",bottom:""}):(da(".online-friends-box").css({height:"",bottom:""}),da(this).css({height:"70px",bottom:"30px"}))})}ngOnInit(){this.ngZone.runOutsideAngular(()=>{r.a.instance.roomEngine.events.addEventListener(Z.a.TOOLBAR_CLICK,this.onNitroToolbarEvent),r.a.instance.roomEngine.events.addEventListener(ma.a.ANIMATE_ICON,this.onNitroToolbarEvent)});const e=document.querySelector(".bottombar-friends-list");da(".friends-right-box").click(function(){console.log("xx"),e.scrollLeft+=144}),da(".friends-left-box").click(function(){console.log("xx"),e.scrollLeft-=144});let t=0;da(".bri-slide-box").click(function(){t++,t%2==0?(da(this).css({height:"172px",top:"0px","background-image":'url("/assets/images/bottombar/bri-close.png")'}),da(".bri-room-options").css("display","block"),da(".bri-room-name_and_owner-box").css("display","block")):(da(this).css({height:"108px",top:"0px","background-image":'url("/assets/images/bottombar/bri-open.png")'}),da(".bri-room-options").css("display","none"),da(".bri-room-name_and_owner-box").css("display","none"))}),da(".bottom-right-ufalt").click(function(){t++,t%2==0?(da(this).css({"background-image":'url("/assets/images/bottombar/sag-kapat.png")'}),da(".bottombar-friends-list-box").css("display","block")):(da(this).css({"background-image":'url("/assets/images/bottombar/sag-ac.png")'}),da(".bottombar-friends-list-box").css("display","none"))}),da(document).ready(function(){var e=da(".newMessage");e.attr("style","background-image: url(/assets/images/bottombar/"+Math.floor(3*Math.random())+".png)"),setInterval(function(){var t=Math.floor(3*Math.random());e.attr("style","background-image: url(/assets/images/bottombar/"+t+".png)")},1e3)})}ngOnDestroy(){this.ngZone.runOutsideAngular(()=>{r.a.instance.roomEngine.events.removeEventListener(Z.a.TOOLBAR_CLICK,this.onNitroToolbarEvent),r.a.instance.roomEngine.events.removeEventListener(ma.a.ANIMATE_ICON,this.onNitroToolbarEvent)})}onNitroToolbarEvent(e){if(e)switch(e.type){case Z.a.TOOLBAR_CLICK:return void this.clickIcon(e.iconName);case ma.a.ANIMATE_ICON:return void this.animateToIcon(e.iconName,e.image,e.x,e.y)}}clickIcon(e){if(e&&""!==e)switch(e){case ga.a.HOTEL_VIEW:return void this.visitDesktop();case ga.a.HOME_ROOM:return void this.visitHomeRoom();case ga.a.NAVIGATOR:return void this.toggleNavigator();case ga.a.CATALOG:return void this.toggleCatalog();case ga.a.INVENTORY:return void this.toggleInventory();case ga.a.FRIEND_LIST:return void this.toggleFriendList();case ga.a.ME_MENU:return this.toggleMeMenu(),void r.a.instance.roomEngine.events.dispatchEvent(new Z.a(Z.a.SELECT_OWN_AVATAR))}}animateToIcon(e,t,n,i){if(!e||!t||!this.navigationListElement)return;if(""===(e=this.getIconName(e)))return;const r=this.navigationListElement.getElementsByClassName(e)[0];if(r){t.className="toolbar-icon-animation",t.style.visibility="visible",t.style.left=n+"px",t.style.top=i+"px",document.body.append(t);const s=r.getBoundingClientRect(),c=t.getBoundingClientRect(),o=c.x-s.x,a=c.y-s.y,l=Math.sqrt(o*o+a*a),d=500-Math.abs(1/l*100*500*.5),u=20,h=`ToolbarBouncing[${e}]`;va.a._Str_19320(h)||(va.a._Str_4598(new Ea.a(new Sa.a(d+8),new pa.a(r,400,12))).tag=h);const g=new Ea.a(new _a.a(new ba.a(t,d,s.x-c.x+u,s.y-c.y,100,1),1),new fa.a(t));va.a._Str_4598(g)}}getIconName(e){switch(e){case ga.a.HOTEL_VIEW:return"icon-hotelview";case ga.a.NAVIGATOR:return"icon-navigator";case ga.a.CATALOG:return"icon-catalog";case ga.a.INVENTORY:return"icon-inventory";default:return""}}toggleCatalog(){this.settingsService.toggleCatalog()}toggleInventory(){this.settingsService.toggleInventory()}toggleFriendList(){this.settingsService.toggleFriendList(),document.getElementById("newMessageArrivedIcon").classList.remove("newMessage")}toggleNavigator(){this.settingsService.toggleNavigator()}toggleMeMenu(){this.settingsService.toggleMeMenu()}visitDesktop(){r.a.instance.roomSessionManager.getSession(-1)&&(r.a.instance.communication.connection.send(new ua.a),r.a.instance.roomSessionManager.removeSession(-1))}visitHomeRoom(){this._navigatorService.goToHomeRoom()}get figure(){return this.sessionService.figure}get navigationListElement(){return this.navigationList&&this.navigationList.nativeElement||null}get unseenInventoryCount(){return this._inventoryService.unseenCount}get unseenFriendListCount(){return this._friendListService.notificationCount}get unseenAchievementsCount(){return this._achievementService.unseenCount}yukselt(){0==this.acikMi?(this.acac="friends-box-acik",this.acikMi=!0):(this.acac="friends-box-kapali",this.acikMi=!1)}get friends(){return Array.from(this._friendListService.friends.values()).filter(e=>e.online)}openFriendsProfilePage(e){r.a.instance.createLinkEvent("profile/goto/"+e)}followFriend(e){r.a.instance.communication.connection.send(new ha.a(e))}toggleFriendOptions(e){0!=this.currentOpenedFriendOptions&&this.currentOpenedFriendOptions!==e&&(document.getElementById("friends_"+this.currentOpenedFriendOptions).style.height="40px",document.getElementById("friends_"+this.currentOpenedFriendOptions).style.bottom=""),this.currentOpenedFriendOptions===e?(document.getElementById("friends_"+e).style.height="",document.getElementById("friends_"+e).style.bottom="",this.currentOpenedFriendOptions=0):(document.getElementById("friends_"+e).style.height="70px",document.getElementById("friends_"+e).style.bottom="30px",this.currentOpenedFriendOptions=e)}openFriendChat(e){const t=this._friendListService.getMessageThread(e);this.settingsService.showFriendList(),t&&this._friendListService.component.selectThread(t)}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(gr.a),C.Yb(kc.a),C.Yb(Bt.a),C.Yb(Ao.a),C.Yb(ya.a),C.Yb(Xt.a),C.Yb(Zt.a),C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-toolbar-component"]],viewQuery:function(e,t){if(1&e&&(C.cd(Ca,1),C.cd(Ra,1)),2&e){let e;C.Hc(e=C.oc())&&(t.navigationList=e.first),C.Hc(e=C.oc())&&(t.div=e.first)}},inputs:{isInRoom:"isInRoom"},decls:35,vars:14,consts:[[1,"nitro-toolbar-component"],[1,"corelo-toolbar"],[1,"list-group","list-group-horizontal","p-1",2,"margin-top","-5px"],["navigationList",""],[1,"corelo-toolbar_avatar",3,"click"],["nitro-avatar-image","",1,"ctb-aposition",3,"figure","headOnly","direction"],["class","position-absolute bg-danger px-1 py-0 rounded shadow count","style","top: -40px;left: 42px;font-size: 11px;",4,"ngIf"],["class","list-group-item",3,"click",4,"ngIf"],[1,"corelo-hr"],[1,"list-group-item",3,"click"],[1,"icon","icon-rooms"],[1,"icon","icon-catalog"],[1,"icon","icon-inventory"],["class","position-absolute bg-danger px-1 py-0 rounded shadow count",4,"ngIf"],[1,"icon","icon-friendall"],[1,"nitro-toolbar-component-right"],[1,"bottombar-friends-list-box"],[1,"friends-left-box"],[1,"fas","fa-chevron-left"],[1,"bottombar-friends-list"],[1,"bottom-fl-content"],["class","add-friends-box",3,"id","click",4,"ngFor","ngForOf"],[1,"add-friends-box"],["src","./assets/images/toolbar/icons/addfriends.png",1,"add-avatar-head"],[1,"onfriends-username"],[1,"friends-right-box"],[1,"fas","fa-chevron-right"],[1,"position-absolute","bg-danger","px-1","py-0","rounded","shadow","count",2,"top","-40px","left","42px","font-size","11px"],[1,"icon","icon-hotelview","icon-nitro-light"],[1,"icon","icon-house"],[1,"position-absolute","bg-danger","px-1","py-0","rounded","shadow","count"],[1,"add-friends-box",3,"id","click"],[1,"onfriends-avatar-head",3,"src"],[1,"bottombar-user-options",3,"id"],[1,"buopt-chatico",3,"click"],[1,"buopt-goroomico",3,"click"],[1,"buopt-profileico",3,"click"]],template:function(e,t){1&e&&(C.dc(0,"div",0),C.dc(1,"div",1),C.dc(2,"ul",2,3),C.dc(4,"div",4),C.nc("click",function(){return t.clickIcon("me_menu")}),C.Zb(5,"div",5),C.Uc(6,Ta,2,1,"div",6),C.cc(),C.Uc(7,Oa,2,0,"li",7),C.Uc(8,Ma,2,0,"li",7),C.Zb(9,"div",8),C.dc(10,"li",9),C.nc("click",function(){return t.clickIcon("navigator")}),C.Zb(11,"i",10),C.cc(),C.dc(12,"li",9),C.nc("click",function(){return t.clickIcon("catalog")}),C.Zb(13,"i",11),C.cc(),C.dc(14,"li",9),C.nc("click",function(){return t.clickIcon("inventory")}),C.Zb(15,"i",12),C.Uc(16,Ua,2,1,"div",13),C.cc(),C.dc(17,"li",9),C.nc("click",function(){return t.clickIcon("friendlist")}),C.Zb(18,"i",14),C.Uc(19,xa,2,1,"div",13),C.cc(),C.cc(),C.Zb(20,"nitro-toolbar-me-menu-component"),C.cc(),C.cc(),C.dc(21,"div",15),C.dc(22,"div",16),C.dc(23,"div",17),C.Zb(24,"i",18),C.cc(),C.dc(25,"div",19),C.dc(26,"div",20),C.Uc(27,Aa,8,4,"div",21),C.dc(28,"div",22),C.Zb(29,"img",23),C.dc(30,"p",24),C.Wc(31),C.rc(32,"translate"),C.cc(),C.cc(),C.cc(),C.cc(),C.dc(33,"div",25),C.Zb(34,"i",26),C.cc(),C.cc(),C.cc()),2&e&&(C.yc("@inOutAnimation",void 0),C.Kb(5),C.yc("figure",t.figure)("headOnly",!1)("direction",2),C.Kb(1),C.yc("ngIf",t.unseenAchievementsCount),C.Kb(1),C.yc("ngIf",t.isInRoom),C.Kb(1),C.yc("ngIf",!t.isInRoom),C.Kb(8),C.yc("ngIf",t.unseenInventoryCount),C.Kb(3),C.yc("ngIf",t.unseenFriendListCount),C.Kb(2),C.yc("@inOutAnimation",void 0),C.Kb(6),C.yc("ngForOf",t.friends),C.Kb(4),C.Xc(C.sc(32,12,"friend.bar.find.title")))},directives:[dr.a,dn.n,wa,dn.m],pipes:[un.a],encapsulation:2,data:{animation:[Object(i.j)("inOutAnimation",[Object(i.i)(":enter",[Object(i.h)({bottom:"-100%"}),Object(i.e)("1s ease-out",Object(i.h)({bottom:10}))])])]}}),e})();var La=n("zbtH"),ka=n("uL4p"),Pa=n("sqfu"),Na=n("ppP4"),Wa=n("LvG+"),Ka=n("wdG1");let Fa=(()=>{class e{constructor(e){this.changeDetector=e,this._time=0,this._timer=null,this.updateTime=this.updateTime.bind(this)}ngOnDestroy(){this.clearInterval()}transform(e){return this._time=e,this.setupInterval(),io.a.format(Date.now()-this._time)}clearInterval(){this._timer&&(clearInterval(this._timer),this._timer=null)}setupInterval(){this._timer||(this._timer=setInterval(this.updateTime,3e4))}updateTime(){this.changeDetector.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(C.mc())},e.\u0275pipe=C.Xb({name:"timeAgo",type:e,pure:!0}),e})();function Va(e,t){1&e&&(C.dc(0,"button",53),C.Zb(1,"i",54),C.cc())}function qa(e,t){if(1&e&&(C.dc(0,"div",56),C.Zb(1,"nitro-badge",57),C.cc()),2&e){const e=t.$implicit;C.Kb(1),C.yc("badge",e)}}function Ha(e,t){if(1&e&&(C.dc(0,"div",9),C.Uc(1,qa,2,1,"div",55),C.cc()),2&e){const e=C.qc(2);C.Kb(1),C.yc("ngForOf",e.userBadges)}}const Ba=function(e){return{active:e}};function Ga(e,t){if(1&e){const e=C.ec();C.dc(0,"div",60),C.nc("click",function(){C.Lc(e);const n=t.$implicit;return C.qc(3).selectGroup(n.id)}),C.Zb(1,"nitro-badge",61),C.cc()}if(2&e){const e=t.$implicit,n=C.qc(3);C.yc("ngClass",C.Cc(3,Ba,n.selectedGroup&&n.selectedGroup.id===e.id)),C.Kb(1),C.yc("badge",e.badge)("isGroup",!0)}}function Za(e,t){if(1&e&&(C.bc(0),C.dc(1,"perfect-scrollbar",58),C.dc(2,"div",59),C.Uc(3,Ga,2,5,"div",51),C.cc(),C.cc(),C.ac()),2&e){const e=C.qc(2);C.Kb(3),C.yc("ngForOf",e.userProfile.groups)}}function Xa(e,t){if(1&e&&C.Zb(0,"div",69),2&e){const e=C.qc(3);C.yc("headOnly",!0)("figure",e.currentRandomHeartRelationship.figure)("direction",4)}}function ja(e,t){if(1&e&&C.Zb(0,"div",69),2&e){const e=C.qc(3);C.yc("headOnly",!0)("figure",e.currentRandomSmileRelationship.figure)("direction",4)}}function Ya(e,t){if(1&e&&C.Zb(0,"div",69),2&e){const e=C.qc(3);C.yc("headOnly",!0)("figure",e.currentRandomBobbaRelationship.figure)("direction",4)}}function za(e,t){if(1&e){const e=C.ec();C.bc(0),C.dc(1,"div",62),C.Wc(2),C.rc(3,"translate"),C.cc(),C.dc(4,"div",39),C.nc("click",function(){C.Lc(e);const t=C.qc(2);return t.openRelationshipProfile(t.currentRandomHeartRelationship)}),C.dc(5,"div",63),C.Zb(6,"i",64),C.cc(),C.dc(7,"div",65),C.Uc(8,Xa,1,3,"div",43),C.dc(9,"div",44),C.Wc(10),C.rc(11,"translate"),C.cc(),C.dc(12,"div",45),C.Wc(13),C.rc(14,"translate"),C.cc(),C.cc(),C.cc(),C.dc(15,"div",39),C.nc("click",function(){C.Lc(e);const t=C.qc(2);return t.openRelationshipProfile(t.currentRandomSmileRelationship)}),C.dc(16,"div",63),C.Zb(17,"i",66),C.cc(),C.dc(18,"div",65),C.Uc(19,ja,1,3,"div",43),C.dc(20,"div",44),C.Wc(21),C.rc(22,"translate"),C.cc(),C.dc(23,"div",45),C.Wc(24),C.rc(25,"translate"),C.cc(),C.cc(),C.cc(),C.dc(26,"div",39),C.nc("click",function(){C.Lc(e);const t=C.qc(2);return t.openRelationshipProfile(t.currentRandomBobbaRelationship)}),C.dc(27,"div",63),C.Zb(28,"i",67),C.cc(),C.dc(29,"div",68),C.Uc(30,Ya,1,3,"div",43),C.dc(31,"div",44),C.Wc(32),C.rc(33,"translate"),C.cc(),C.dc(34,"div",45),C.Wc(35),C.rc(36,"translate"),C.cc(),C.cc(),C.cc(),C.ac()}if(2&e){const e=C.qc(2);C.Kb(2),C.Xc(C.sc(3,10,"extendedprofile.relstatus")),C.Kb(6),C.yc("ngIf",e.currentRandomHeartRelationship),C.Kb(2),C.Yc(" ",e.currentRandomHeartRelationship?e.currentRandomHeartRelationship.username:C.sc(11,12,"extendedprofile.no.friends.in.this.category")," "),C.Kb(3),C.Yc(" ",e.heartRelationships.length>1?C.uc(14,14,"extendedprofile.relstatus.others.heart","count",e.heartRelationships.length-1):""," "),C.Kb(6),C.yc("ngIf",e.currentRandomSmileRelationship),C.Kb(2),C.Yc(" ",e.currentRandomSmileRelationship?e.currentRandomSmileRelationship.username:C.sc(22,18,"extendedprofile.no.friends.in.this.category")," "),C.Kb(3),C.Yc(" ",e.smileRelationships.length>1?C.uc(25,20,"extendedprofile.relstatus.others.smile","count",e.smileRelationships.length-1):""," "),C.Kb(6),C.yc("ngIf",e.currentRandomBobbaRelationship),C.Kb(2),C.Yc(" ",e.currentRandomBobbaRelationship?e.currentRandomBobbaRelationship.username:C.sc(33,24,"extendedprofile.no.friends.in.this.category")," "),C.Kb(3),C.Yc(" ",e.bobbaRelationships.length>1?C.uc(36,26,"extendedprofile.relstatus.others.bobba","count",e.bobbaRelationships.length-1):""," ")}}function $a(e,t){1&e&&(C.dc(0,"div",70),C.Zb(1,"i",71),C.Wc(2),C.rc(3,"translate"),C.cc()),2&e&&(C.Kb(2),C.Yc(" ",C.sc(3,1,"extendedprofile.me")," "))}function Qa(e,t){if(1&e&&C.Zb(0,"div",69),2&e){const e=C.qc(2);C.yc("headOnly",!0)("figure",e.currentRandomHeartRelationship.figure)("direction",4)}}function Ja(e,t){if(1&e&&C.Zb(0,"div",69),2&e){const e=C.qc(2);C.yc("headOnly",!0)("figure",e.currentRandomSmileRelationship.figure)("direction",4)}}function el(e,t){if(1&e&&C.Zb(0,"div",69),2&e){const e=C.qc(2);C.yc("headOnly",!0)("figure",e.currentRandomBobbaRelationship.figure)("direction",4)}}function tl(e,t){if(1&e){const e=C.ec();C.dc(0,"div",60),C.nc("click",function(){C.Lc(e);const n=t.$implicit;return C.qc(2).selectGroup(n.id)}),C.Zb(1,"nitro-badge",61),C.cc()}if(2&e){const e=t.$implicit,n=C.qc(2);C.yc("ngClass",C.Cc(3,Ba,n.selectedGroup&&n.selectedGroup.id===e.id)),C.Kb(1),C.yc("badge",e.badge)("isGroup",!0)}}function nl(e,t){1&e&&(C.dc(0,"button",84),C.Wc(1),C.rc(2,"translate"),C.cc()),2&e&&(C.Kb(1),C.Xc(C.sc(2,1,"group.join")))}function il(e,t){1&e&&(C.dc(0,"button",84),C.Wc(1),C.rc(2,"translate"),C.cc()),2&e&&(C.Kb(1),C.Xc(C.sc(2,1,"group.requestmembership")))}function rl(e,t){1&e&&(C.dc(0,"button",86),C.Wc(1),C.rc(2,"translate"),C.cc()),2&e&&(C.Kb(1),C.Xc(C.sc(2,1,"group.membershippending")))}function sl(e,t){if(1&e&&(C.dc(0,"div"),C.Uc(1,il,3,3,"button",83),C.Uc(2,rl,3,3,"button",85),C.cc()),2&e){const e=C.qc(4);C.Kb(1),C.yc("ngIf",0===e.selectedGroup.membershipType),C.Kb(1),C.yc("ngIf",2===e.selectedGroup.membershipType)}}function cl(e,t){if(1&e&&(C.dc(0,"div"),C.Uc(1,nl,3,3,"button",83),C.Uc(2,sl,3,2,"div",26),C.cc()),2&e){const e=C.qc(3);C.Kb(1),C.yc("ngIf",0===e.selectedGroup.type),C.Kb(1),C.yc("ngIf",1===e.selectedGroup.type)}}function ol(e,t){1&e&&(C.dc(0,"button",87),C.Wc(1),C.rc(2,"translate"),C.cc()),2&e&&(C.Kb(1),C.Xc(C.sc(2,1,"group.leave")))}const al=function(){return["date","owner"]},ll=function(e,t){return[e,t]},dl=function(e,t){return["group.created",null,null,e,t]};function ul(e,t){if(1&e&&(C.dc(0,"div"),C.dc(1,"div",72),C.dc(2,"div",73),C.dc(3,"div",74),C.Zb(4,"i",36),C.Wc(5),C.cc(),C.dc(6,"div",75),C.Wc(7),C.rc(8,"translate"),C.cc(),C.dc(9,"div",76),C.Wc(10),C.cc(),C.cc(),C.dc(11,"div",77),C.dc(12,"div",78),C.Zb(13,"nitro-badge",61),C.cc(),C.dc(14,"div",79),C.Zb(15,"i",80),C.Wc(16),C.cc(),C.cc(),C.cc(),C.dc(17,"div",81),C.Uc(18,cl,3,2,"div",26),C.Uc(19,ol,3,3,"button",82),C.cc(),C.cc()),2&e){const e=C.qc(2);C.Kb(4),C.yc("ngClass","icon-group-type-"+e.selectedGroup.type),C.Kb(1),C.Yc(" ",e.selectedGroup.title," "),C.Kb(2),C.Xc(C.vc(8,9,C.Dc(19,dl,C.Bc(15,al),C.Dc(16,ll,e.selectedGroup.createdAt,e.selectedGroup.ownerName)))),C.Kb(3),C.Xc(e.selectedGroup.description),C.Kb(3),C.yc("badge",e.selectedGroup.badge)("isGroup",!0),C.Kb(3),C.Yc(" ",e.selectedGroup.membersCount,""),C.Kb(2),C.yc("ngIf",1!==e.selectedGroup.membershipType),C.Kb(1),C.yc("ngIf",1===e.selectedGroup.membershipType)}}const hl=function(e){return[e]};function gl(e,t){if(1&e){const e=C.ec();C.dc(0,"div",1),C.dc(1,"div",2),C.dc(2,"h6",3),C.Wc(3),C.rc(4,"translate"),C.cc(),C.dc(5,"button",4),C.nc("click",function(){return C.Lc(e),C.qc().hide()}),C.Zb(6,"i",5),C.cc(),C.cc(),C.dc(7,"div",6),C.dc(8,"div",7),C.dc(9,"div",8),C.dc(10,"div",9),C.dc(11,"div",10),C.Wc(12),C.cc(),C.Uc(13,Va,2,0,"button",11),C.cc(),C.dc(14,"div",12),C.dc(15,"div",13),C.Zb(16,"div",14),C.cc(),C.dc(17,"div",15),C.dc(18,"div",16),C.Wc(19),C.cc(),C.dc(20,"div",17),C.Zb(21,"div",18),C.rc(22,"translate"),C.Zb(23,"div",18),C.rc(24,"translate"),C.dc(25,"div",19),C.Wc(26),C.rc(27,"translate"),C.cc(),C.cc(),C.cc(),C.cc(),C.cc(),C.dc(28,"div",20),C.dc(29,"div",21),C.dc(30,"div",22),C.nc("click",function(){return C.Lc(e),C.qc().selectTab(0)}),C.Wc(31),C.rc(32,"translate"),C.cc(),C.dc(33,"div",23),C.nc("click",function(){return C.Lc(e),C.qc().selectTab(1)}),C.Wc(34),C.rc(35,"translate"),C.cc(),C.dc(36,"div",23),C.nc("click",function(){return C.Lc(e),C.qc().selectTab(2)}),C.Wc(37),C.rc(38,"translate"),C.cc(),C.cc(),C.dc(39,"div",24),C.Uc(40,Ha,2,1,"div",25),C.Uc(41,Za,4,1,"ng-container",26),C.Uc(42,za,37,30,"ng-container",26),C.cc(),C.cc(),C.cc(),C.cc(),C.dc(43,"div",27),C.dc(44,"div",7),C.dc(45,"div",8),C.dc(46,"div",28),C.dc(47,"div",29),C.Zb(48,"div",30),C.cc(),C.dc(49,"div",31),C.dc(50,"div",32),C.Wc(51),C.cc(),C.dc(52,"div",33),C.Wc(53),C.cc(),C.Zb(54,"div",34),C.rc(55,"translate"),C.Zb(56,"div",34),C.rc(57,"translate"),C.rc(58,"timeAgo"),C.Zb(59,"div",34),C.rc(60,"translate"),C.dc(61,"div"),C.dc(62,"div",35),C.Zb(63,"i",36),C.cc(),C.Uc(64,$a,4,3,"div",37),C.cc(),C.cc(),C.cc(),C.Zb(65,"div",38),C.cc(),C.dc(66,"div",8),C.Zb(67,"div",34),C.rc(68,"translate"),C.dc(69,"div",32),C.Wc(70),C.rc(71,"translate"),C.cc(),C.dc(72,"div",39),C.nc("click",function(){C.Lc(e);const t=C.qc();return t.openRelationshipProfile(t.currentRandomHeartRelationship)}),C.dc(73,"div",40),C.Zb(74,"i",41),C.cc(),C.dc(75,"div",42),C.Uc(76,Qa,1,3,"div",43),C.dc(77,"div",44),C.Wc(78),C.rc(79,"translate"),C.cc(),C.dc(80,"div",45),C.Wc(81),C.rc(82,"translate"),C.cc(),C.cc(),C.cc(),C.dc(83,"div",39),C.nc("click",function(){C.Lc(e);const t=C.qc();return t.openRelationshipProfile(t.currentRandomSmileRelationship)}),C.dc(84,"div",40),C.Zb(85,"i",46),C.cc(),C.dc(86,"div",42),C.Uc(87,Ja,1,3,"div",43),C.dc(88,"div",44),C.Wc(89),C.rc(90,"translate"),C.cc(),C.dc(91,"div",45),C.Wc(92),C.rc(93,"translate"),C.cc(),C.cc(),C.cc(),C.dc(94,"div",39),C.nc("click",function(){C.Lc(e);const t=C.qc();return t.openRelationshipProfile(t.currentRandomBobbaRelationship)}),C.dc(95,"div",40),C.Zb(96,"i",47),C.cc(),C.dc(97,"div",42),C.Uc(98,el,1,3,"div",43),C.dc(99,"div",44),C.Wc(100),C.rc(101,"translate"),C.cc(),C.dc(102,"div",45),C.Wc(103),C.rc(104,"translate"),C.cc(),C.cc(),C.cc(),C.cc(),C.cc(),C.Zb(105,"hr"),C.dc(106,"div",7),C.dc(107,"div",48),C.Zb(108,"div",34),C.rc(109,"translate"),C.dc(110,"perfect-scrollbar",49),C.dc(111,"div",50),C.Uc(112,tl,2,5,"div",51),C.cc(),C.cc(),C.cc(),C.dc(113,"div",52),C.Uc(114,ul,20,22,"div",26),C.cc(),C.cc(),C.cc(),C.cc()}if(2&e){const e=C.qc();C.Kb(3),C.Xc(C.sc(4,45,"extendedprofile.caption")),C.Kb(8),C.yc("ngClass",C.Cc(105,hl,e.isMe||e.isFriend?"rounded":"rounded-left")),C.Kb(1),C.Xc(e.userProfile.username),C.Kb(1),C.yc("ngIf",!e.isMe&&!e.isFriend),C.Kb(3),C.yc("figure",e.userProfile.figure)("direction",2),C.Kb(3),C.Xc(e.userProfile.motto),C.Kb(2),C.yc("innerHTML",C.uc(22,47,"extendedprofile.created","created",e.userProfile.registration),C.Mc),C.Kb(2),C.yc("innerHTML",C.uc(24,51,"extendedprofile.last.login","lastlogin",e.userProfile.lastVisit),C.Mc),C.Kb(3),C.Zc(" ",C.sc(27,55,"extendedprofile.achievementscore")," ",e.userProfile.achievementPoints," "),C.Kb(4),C.yc("ngClass",C.Cc(107,hl,0==e.tabId?"bg-emperor":"bg-secondary")),C.Kb(1),C.Yc(" ",C.sc(32,57,"inventory.badges.inactivebadges")," "),C.Kb(2),C.yc("ngClass",C.Cc(109,hl,1==e.tabId?"bg-emperor":"bg-secondary")),C.Kb(1),C.Zc(" ",C.sc(35,59,"avatar.profile.groups")," ",e.userProfile.groups.length," "),C.Kb(2),C.yc("ngClass",C.Cc(111,hl,2==e.tabId?"bg-emperor":"bg-secondary")),C.Kb(1),C.Zc(" ",C.sc(38,61,"friendlist.friends"),": ",e.userProfile.friendsCount," "),C.Kb(3),C.yc("ngIf",0==e.tabId),C.Kb(1),C.yc("ngIf",1==e.tabId),C.Kb(1),C.yc("ngIf",2==e.tabId),C.Kb(6),C.yc("figure",e.userProfile.figure)("direction",2),C.Kb(3),C.Xc(e.userProfile.username),C.Kb(2),C.Xc(e.userProfile.motto),C.Kb(1),C.yc("innerHTML",C.uc(55,63,"extendedprofile.created","created",e.userProfile.registration),C.Mc),C.Kb(2),C.yc("innerHTML",C.uc(57,67,"extendedprofile.last.login","lastlogin",C.sc(58,71,e.userProfile.lastVisit)),C.Mc),C.Kb(3),C.yc("innerHTML",C.uc(60,73,"extendedprofile.activitypoints","activitypoints",e.userProfile.achievementPoints),C.Mc),C.Kb(4),C.yc("ngClass",e.userProfile.isOnline?"icon-online":"icon-offline"),C.Kb(1),C.yc("ngIf",e.isMe),C.Kb(3),C.yc("innerHTML",C.uc(68,77,"extendedprofile.friends.count","count",e.userProfile.friendsCount),C.Mc),C.Kb(3),C.Xc(C.sc(71,81,"extendedprofile.relstatus")),C.Kb(6),C.yc("ngIf",e.currentRandomHeartRelationship),C.Kb(2),C.Yc(" ",e.currentRandomHeartRelationship?e.currentRandomHeartRelationship.username:C.sc(79,83,"extendedprofile.no.friends.in.this.category")," "),C.Kb(3),C.Yc(" ",e.heartRelationships.length>1?C.uc(82,85,"extendedprofile.relstatus.others.heart","count",e.heartRelationships.length-1):""," "),C.Kb(6),C.yc("ngIf",e.currentRandomSmileRelationship),C.Kb(2),C.Yc(" ",e.currentRandomSmileRelationship?e.currentRandomSmileRelationship.username:C.sc(90,89,"extendedprofile.no.friends.in.this.category")," "),C.Kb(3),C.Yc(" ",e.smileRelationships.length>1?C.uc(93,91,"extendedprofile.relstatus.others.smile","count",e.smileRelationships.length-1):""," "),C.Kb(6),C.yc("ngIf",e.currentRandomBobbaRelationship),C.Kb(2),C.Yc(" ",e.currentRandomBobbaRelationship?e.currentRandomBobbaRelationship.username:C.sc(101,95,"extendedprofile.no.friends.in.this.category")," "),C.Kb(3),C.Yc(" ",e.bobbaRelationships.length>1?C.uc(104,97,"extendedprofile.relstatus.others.bobba","count",e.bobbaRelationships.length-1):""," "),C.Kb(5),C.yc("innerHTML",C.uc(109,101,"extendedprofile.groups.count","count",e.userProfile.groups.length),C.Mc),C.Kb(4),C.yc("ngForOf",e.userProfile.groups),C.Kb(2),C.yc("ngIf",e.selectedGroup)}}let ml=(()=>{class e{constructor(e,t,n){this._userProfileService=e,this._sessionService=t,this._settingsService=n,this._currentRandomHeartRelationship=null,this._currentRandomSmileRelationship=null,this._currentRandomBobbaRelationship=null,this._tabId=0}ngOnInit(){this._userProfileService.component=this}ngOnDestroy(){this._userProfileService.component=null}hide(){this._settingsService.hideUserProfile()}openRelationshipProfile(e){e&&r.a.instance.communication.connection.send(new Wa.a(e.userId))}getRandomRelationships(){this._currentRandomHeartRelationship=this.heartRelationships[Math.floor(Math.random()*this.heartRelationships.length)],this._currentRandomSmileRelationship=this.smileRelationships[Math.floor(Math.random()*this.smileRelationships.length)],this._currentRandomBobbaRelationship=this.bobbaRelationships[Math.floor(Math.random()*this.bobbaRelationships.length)]}selectGroup(e){this._userProfileService.selectGroup(e)}selectTab(e){this._tabId=e}get visible(){return this._settingsService.userProfileVisible}get userProfile(){return this._userProfileService.userLoadedProfile}get userBadges(){return this._userProfileService.userBadges}get isMe(){return!!this.userProfile&&this._sessionService.userId===this.userProfile.id}get isFriend(){return!!this.userProfile&&this.userProfile.isMyFriend}get heartRelationships(){return this._userProfileService.heartRelationships}get currentRandomHeartRelationship(){return this._currentRandomHeartRelationship}get smileRelationships(){return this._userProfileService.smileRelationships}get currentRandomSmileRelationship(){return this._currentRandomSmileRelationship}get bobbaRelationships(){return this._userProfileService.bobbaRelationships}get currentRandomBobbaRelationship(){return this._currentRandomBobbaRelationship}get selectedGroup(){return this._userProfileService.selectedGroup}get tabId(){return this._tabId}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(Ka.a),C.Yb(ya.a),C.Yb(Xt.a))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-user-profile-component"]],decls:1,vars:1,consts:[["class","card nitro-user-profile-component",3,"bringToTop","draggable",4,"ngIf"],[1,"card","nitro-user-profile-component",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3","header-draggable"],[1,"mb-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"row"],[1,"col-6"],[1,"d-flex","flex-row"],[1,"bg-emperor","w-100","mb-1","font-bold","text-center",3,"ngClass"],["class","btn btn-sm btn-success rounded-right mb-1 px-2 py-0",4,"ngIf"],[1,"row","mx-0"],[1,"profile-avatar-container","col-3","px-0","mx-0"],["nitro-avatar-image","",1,"avatar-img","bg-emperor","rounded-left",3,"figure","direction"],[1,"col-9","px-0","mx-0","bg-emperor","profile-user-right","p-2"],[1,"profile-user-motto","font-italic","small"],[1,"mt-auto","small"],[1,"p-1","bg-primary","rounded","mb-1",3,"innerHTML"],[1,"p-1","bg-primary","rounded"],[1,"col-6","d-flex","flex-column"],[1,"d-flex","flex-row","small"],[1,"rounded-top","p-1","mr-1",3,"ngClass","click"],[1,"rounded-top","bg-secondary","p-1","mr-1",3,"ngClass","click"],[1,"bg-emperor","profile-info-bg","p-1"],["class","d-flex flex-row",4,"ngIf"],[4,"ngIf"],[1,"d-none"],[1,"profile-upper-container"],[1,"profile-avatar-container"],["nitro-avatar-image","",1,"avatar-img",3,"figure","direction"],[1,"profile-info-container"],[1,"font-weight-bold"],[1,"profile-info-motto","font-italic"],[3,"innerHTML"],[2,"float","left"],[1,"icon",3,"ngClass"],["class","its-me",4,"ngIf"],[1,"badges-container"],[1,"profile-relationship",3,"click"],[1,"icon-container"],[1,"icon","icon-relationship-heart"],[1,"profile-relationship-information"],["class","relationship-avatar","nitro-avatar-image","",3,"headOnly","figure","direction",4,"ngIf"],[1,"profile-relationship-name"],[1,"profile-relationship-extra"],[1,"icon","icon-relationship-smile"],[1,"icon","icon-relationship-bobba"],[1,"col-3"],[1,"grid-container","position-relative","w-100",2,"min-height","160px","max-height","160px"],[1,"grid-items","grid-1"],["class","item-detail",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-9"],[1,"btn","btn-sm","btn-success","rounded-right","mb-1","px-2","py-0"],[1,"fas","fa-user-plus"],["class","bg-primary p-1 rounded user-profile-badge",4,"ngFor","ngForOf"],[1,"bg-primary","p-1","rounded","user-profile-badge"],[1,"h-100","d-flex","justify-content-center",3,"badge"],[1,"d-flex","flex-column","w-100",2,"min-height","160px","height","160px","max-height","160px"],[1,"bg-primary","w-100","rounded","mb-1"],[1,"item-detail",3,"ngClass","click"],[3,"badge","isGroup"],[1,"font-weight-bold","small"],[1,"icon-container","mr-1"],[1,"fas","fa-heart","text-pink"],[1,"profile-relationship-information","bg-primary","rounded","w-100","mb-1","p-1"],[1,"fas","fa-smile","text-warning"],[1,"fas","fa-skull","text-black"],[1,"profile-relationship-information","bg-primary","rounded","w-100","p-1"],["nitro-avatar-image","",1,"relationship-avatar",3,"headOnly","figure","direction"],[1,"its-me"],[1,"icon","icon-check"],[1,"group-detail"],[1,"left-side"],[1,"group-title","font-weight-bold"],[1,"group-created-at"],[1,"group-description"],[1,"right-side"],[1,"group-badge"],[1,"group-members"],[1,"icon","icon-group-members"],[1,"group-membership-action"],["class","btn btn-danger btn-block",4,"ngIf"],["class","btn btn-primary btn-block",4,"ngIf"],[1,"btn","btn-primary","btn-block"],["class","btn btn-primary disabled btn-block",4,"ngIf"],[1,"btn","btn-primary","disabled","btn-block"],[1,"btn","btn-danger","btn-block"]],template:function(e,t){1&e&&C.Uc(0,gl,115,113,"div",0),2&e&&C.yc("ngIf",t.visible)},directives:[dn.n,Mi.a,Pi.a,dn.l,dr.a,Ni.b,dn.m,Os.a],pipes:[un.a,Fa],encapsulation:2}),e})();const fl=["historyScroller"],pl=function(e){return{"background-color":e}};function _l(e,t){if(1&e&&C.Zb(0,"div",23),2&e){const e=C.qc(2).$implicit;C.yc("ngStyle",C.Cc(1,pl,e.senderColorString))}}const bl=function(e){return{"background-image":e}};function vl(e,t){if(1&e&&C.Zb(0,"div",24),2&e){const e=C.qc(2).$implicit;C.yc("ngStyle",C.Cc(1,bl,"url("+e.senderImageUrl+")"))}}function El(e,t){if(1&e){const e=C.ec();C.dc(0,"div",16),C.nc("click",function(){C.Lc(e);const t=C.qc().$implicit;return C.qc(2).selectUser(t.senderId)}),C.Uc(1,_l,1,3,"div",17),C.dc(2,"div"),C.dc(3,"div",18),C.Uc(4,vl,1,3,"div",19),C.cc(),C.dc(5,"div",20),C.Zb(6,"b",21),C.Zb(7,"span",22),C.rc(8,"roomChatFormatter"),C.cc(),C.cc(),C.cc()}if(2&e){const e=C.qc().$implicit;C.Kb(1),C.yc("ngIf",0===e.chatStyle),C.Kb(1),C.Ob("chat-bubble bubble-",e.chatStyle," type-",e.chatType,""),C.Kb(2),C.yc("ngIf",e.senderImageUrl),C.Kb(2),C.yc("innerHTML",e.senderName,C.Mc),C.Kb(1),C.yc("innerHTML",C.sc(8,8,e.content),C.Mc)}}function Sl(e,t){if(1&e&&(C.dc(0,"div",25),C.Wc(1),C.cc()),2&e){const e=C.qc().$implicit;C.Kb(1),C.Xc(e.content)}}function yl(e,t){if(1&e&&(C.bc(0),C.dc(1,"div",10),C.dc(2,"div",11),C.dc(3,"div",12),C.Wc(4),C.rc(5,"date"),C.cc(),C.cc(),C.dc(6,"div",13),C.Uc(7,El,9,10,"div",14),C.Uc(8,Sl,2,1,"div",15),C.cc(),C.cc(),C.ac()),2&e){const e=t.$implicit;C.Kb(4),C.Xc(C.tc(5,3,e.date,"HH:mm:ss")),C.Kb(3),C.yc("ngIf",-1!==e.senderId),C.Kb(1),C.yc("ngIf",-1===e.senderId)}}function Il(e,t){if(1&e){const e=C.ec();C.dc(0,"div",1),C.dc(1,"div",2),C.dc(2,"h6",3),C.Wc(3),C.rc(4,"translate"),C.cc(),C.dc(5,"button",4),C.nc("click",function(){return C.Lc(e),C.qc().hide()}),C.Zb(6,"i",5),C.cc(),C.cc(),C.dc(7,"perfect-scrollbar",6,7),C.dc(9,"div",8),C.Uc(10,yl,9,6,"ng-container",9),C.cc(),C.cc(),C.cc()}if(2&e){const e=C.qc();C.yc("topCenter",!1)("center",!1)("noMemory",!0),C.Kb(3),C.Xc(C.sc(4,6,"room.chathistory.button.text")),C.Kb(7),C.yc("ngForOf",e.historyItems)("ngForTrackBy",e.trackById)}}let wl=(()=>{class e{constructor(e,t){this._settingsService=e,this._chatHistoryService=t}ngOnChanges(e){const t=e.visible.currentValue;t&&t!==e.visible.previousValue&&setTimeout(()=>this.scrollToBottom(),1)}hide(){this._settingsService.hideChatHistory()}selectUser(e){e&&r.a.instance.roomEngine.selectRoomObject(r.a.instance.roomEngine.activeRoomId,e,M.a.UNIT)}trackById(e,t){return t.id}scrollToBottom(){this.historyScroller&&this.historyScroller.directiveRef.scrollToBottom(0)}get historyItems(){return this._chatHistoryService.historyItems}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(Xt.a),C.Yb(Gt.a))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-chat-history-component"]],viewQuery:function(e,t){if(1&e&&C.cd(fl,1),2&e){let e;C.Hc(e=C.oc())&&(t.historyScroller=e.first)}},inputs:{visible:"visible"},features:[C.Ib],decls:1,vars:1,consts:[["class","card nitro-chat-history-component",3,"bringToTop","draggable","topCenter","center","noMemory",4,"ngIf"],[1,"card","nitro-chat-history-component",3,"bringToTop","draggable","topCenter","center","noMemory"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"position-relative","w-100","h-100","mb-1"],["historyScroller",""],[1,"d-flex","flex-column","pt-3","px-3"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"row","mb-2"],[1,"d-flex","col-3","justify-content-end","align-items-center"],[1,"badge","badge-secondary","badge-sm"],[1,"d-flex","col-9","align-items-center","pl-0"],["class","bubble-container",3,"click",4,"ngIf"],["class","badge badge-success badge-sm",4,"ngIf"],[1,"bubble-container",3,"click"],["class","user-container-bg",3,"ngStyle",4,"ngIf"],[1,"user-container"],["class","user-image",3,"ngStyle",4,"ngIf"],[1,"chat-content"],[1,"username-container","mr-1",3,"innerHTML"],[1,"message",3,"innerHTML"],[1,"user-container-bg",3,"ngStyle"],[1,"user-image",3,"ngStyle"],[1,"badge","badge-success","badge-sm"]],template:function(e,t){1&e&&C.Uc(0,Il,11,8,"div",0),2&e&&C.yc("ngIf",t.visible)},directives:[dn.n,Mi.a,Pi.a,Ni.b,dn.m,dn.o],pipes:[un.a,dn.d,Ic],encapsulation:2}),e})();var Cl=n("3Cj0");const Rl=function(e){return{"text-muted":e}},Tl=function(e,t){return{"fa-volume-mute":e,"fa-volume-down":t}};function Ol(e,t){if(1&e){const e=C.ec();C.dc(0,"div",1),C.dc(1,"div",2),C.dc(2,"h6",3),C.Wc(3),C.rc(4,"translate"),C.cc(),C.dc(5,"button",4),C.nc("click",function(){return C.Lc(e),C.qc().hide()}),C.Zb(6,"i",5),C.cc(),C.cc(),C.dc(7,"div",6),C.dc(8,"div",7),C.dc(9,"input",8),C.nc("ngModelChange",function(t){return C.Lc(e),C.qc().oldChat=t}),C.cc(),C.dc(10,"label",9),C.Wc(11),C.rc(12,"translate"),C.cc(),C.cc(),C.dc(13,"div",7),C.dc(14,"input",10),C.nc("ngModelChange",function(t){return C.Lc(e),C.qc().roomInvites=t}),C.cc(),C.dc(15,"label",11),C.Wc(16),C.rc(17,"translate"),C.cc(),C.cc(),C.dc(18,"div",7),C.dc(19,"input",12),C.nc("ngModelChange",function(t){return C.Lc(e),C.qc().cameraFollow=t}),C.cc(),C.dc(20,"label",13),C.Wc(21),C.rc(22,"translate"),C.cc(),C.cc(),C.dc(23,"div",14),C.Wc(24),C.rc(25,"translate"),C.cc(),C.dc(26,"div",15),C.dc(27,"label",16),C.Wc(28),C.rc(29,"translate"),C.cc(),C.dc(30,"div",17),C.dc(31,"div",18),C.Zb(32,"i",19),C.cc(),C.dc(33,"div",20),C.dc(34,"input",21),C.nc("ngModelChange",function(t){return C.Lc(e),C.qc().volumeSystem=t})("mouseup",function(){return C.Lc(e),C.qc().saveSound()}),C.cc(),C.cc(),C.dc(35,"div",18),C.Zb(36,"i",22),C.cc(),C.cc(),C.cc(),C.dc(37,"div",15),C.dc(38,"label",23),C.Wc(39),C.rc(40,"translate"),C.cc(),C.dc(41,"div",17),C.dc(42,"div",18),C.Zb(43,"i",19),C.cc(),C.dc(44,"div",20),C.dc(45,"input",24),C.nc("ngModelChange",function(t){return C.Lc(e),C.qc().volumeFurni=t})("mouseup",function(){return C.Lc(e),C.qc().saveSound()}),C.cc(),C.cc(),C.dc(46,"div",18),C.Zb(47,"i",22),C.cc(),C.cc(),C.cc(),C.dc(48,"div"),C.dc(49,"label",25),C.Wc(50),C.rc(51,"translate"),C.cc(),C.dc(52,"div",17),C.dc(53,"div",18),C.Zb(54,"i",19),C.cc(),C.dc(55,"div",20),C.dc(56,"input",26),C.nc("ngModelChange",function(t){return C.Lc(e),C.qc().volumeTrax=t})("mouseup",function(){return C.Lc(e),C.qc().saveSound()}),C.cc(),C.cc(),C.dc(57,"div",18),C.Zb(58,"i",22),C.cc(),C.cc(),C.cc(),C.cc(),C.cc()}if(2&e){const e=C.qc();C.Kb(3),C.Xc(C.sc(4,23,"widget.memenu.settings.title")),C.Kb(6),C.yc("ngModel",e.oldChat),C.Kb(2),C.Yc(" ",C.sc(12,25,"memenu.settings.chat.prefer.old.chat")," "),C.Kb(3),C.yc("ngModel",e.roomInvites),C.Kb(2),C.Yc(" ",C.sc(17,27,"memenu.settings.other.ignore.room.invites")," "),C.Kb(3),C.yc("ngModel",e.cameraFollow),C.Kb(2),C.Yc(" ",C.sc(22,29,"memenu.settings.other.disable.room.camera.follow")," "),C.Kb(3),C.Xc(C.sc(25,31,"widget.memenu.settings.volume")),C.Kb(4),C.Xc(C.sc(29,33,"widget.memenu.settings.volume.ui")),C.Kb(3),C.yc("ngClass",C.Cc(39,Rl,e.volumeSystem>=50)),C.Kb(1),C.yc("ngClass",C.Dc(41,Tl,0===e.volumeSystem,e.volumeSystem>0)),C.Kb(2),C.yc("ngModel",e.volumeSystem),C.Kb(1),C.yc("ngClass",C.Cc(44,Rl,e.volumeSystem<50)),C.Kb(4),C.Xc(C.sc(40,35,"widget.memenu.settings.volume.furni")),C.Kb(3),C.yc("ngClass",C.Cc(46,Rl,e.volumeFurni>=50)),C.Kb(1),C.yc("ngClass",C.Dc(48,Tl,0===e.volumeFurni,e.volumeFurni>0)),C.Kb(2),C.yc("ngModel",e.volumeFurni),C.Kb(1),C.yc("ngClass",C.Cc(51,Rl,e.volumeFurni<50)),C.Kb(4),C.Xc(C.sc(51,37,"widget.memenu.settings.volume.trax")),C.Kb(3),C.yc("ngClass",C.Cc(53,Rl,e.volumeTrax>=50)),C.Kb(1),C.yc("ngClass",C.Dc(55,Tl,0===e.volumeTrax,e.volumeTrax>0)),C.Kb(2),C.yc("ngModel",e.volumeTrax),C.Kb(1),C.yc("ngClass",C.Cc(58,Rl,e.volumeTrax<50))}}let Ml=(()=>{class e{constructor(e,t){this._userSettingsService=e,this._settingsService=t,this.visible=!1}hide(){this._settingsService.hideUserSettings()}saveSound(){this._userSettingsService.sendSound()}get volumeSystem(){return 100*this._userSettingsService.volumeSystem}set volumeSystem(e){this._userSettingsService.volumeSystem=e/100}get volumeFurni(){return 100*this._userSettingsService.volumeFurni}set volumeFurni(e){this._userSettingsService.volumeFurni=e/100}get volumeTrax(){return 100*this._userSettingsService.volumeTrax}set volumeTrax(e){this._userSettingsService.volumeTrax=e/100}get oldChat(){return this._userSettingsService.oldChat}set oldChat(e){this._userSettingsService.oldChat=e}get roomInvites(){return this._userSettingsService.roomInvites}set roomInvites(e){this._userSettingsService.roomInvites=e}get cameraFollow(){return this._userSettingsService.cameraFollow}set cameraFollow(e){this._userSettingsService.cameraFollow=e}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(Cl.a),C.Yb(Xt.a))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-user-settings-component"]],inputs:{visible:"visible"},decls:1,vars:1,consts:[["class","nitro-user-settings-component card position-absolute",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-user-settings-component","card","position-absolute",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"form-check"],["type","checkbox","id","oldChat",1,"form-check-input",3,"ngModel","ngModelChange"],["for","oldChat",1,"form-check-label"],["type","checkbox","id","roomInvites",1,"form-check-input",3,"ngModel","ngModelChange"],["for","roomInvites",1,"form-check-label"],["type","checkbox","id","cameraFollow",1,"form-check-input",3,"ngModel","ngModelChange"],["for","cameraFollow",1,"form-check-label"],[1,"mt-3","mb-2"],[1,"mb-2"],["for","volumeSystem"],[1,"d-flex","flex-row"],[3,"ngClass"],[1,"fas",3,"ngClass"],[1,"w-100","ml-2","mr-2"],["type","range","min","0","max","100","step","1","id","volumeSystem",1,"custom-range",3,"ngModel","ngModelChange","mouseup"],[1,"fas","fa-volume-up"],["for","volumeFurni"],["type","range","min","0","max","100","step","1","id","volumeFurni",1,"custom-range",3,"ngModel","ngModelChange","mouseup"],["for","volumeTrax"],["type","range","min","0","max","100","step","1","id","volumeTrax",1,"custom-range",3,"ngModel","ngModelChange","mouseup"]],template:function(e,t){1&e&&C.Uc(0,Ol,59,60,"div",0),2&e&&C.yc("ngIf",t.visible)},directives:[dn.n,Mi.a,Pi.a,ui.a,ui.l,ui.n,dn.l,ui.r,ui.b],pipes:[un.a],encapsulation:2}),e})();var Ul=n("AY3i"),xl=n("l8Dq");function Al(e,t){if(1&e){const e=C.ec();C.dc(0,"div",23),C.nc("click",function(){return C.Lc(e),C.qc(2).getMembers(!0)}),C.Wc(1),C.rc(2,"translate"),C.cc()}if(2&e){const e=C.qc(2);C.Kb(1),C.Xc(C.uc(2,1,"group.members.pendingmembers","count",e.groupMembershipRequestsCount))}}function Dl(e,t){if(1&e){const e=C.ec();C.dc(0,"button",24),C.nc("click",function(){return C.Lc(e),C.qc(2).manage()}),C.Wc(1),C.rc(2,"translate"),C.cc()}2&e&&(C.Kb(1),C.Xc(C.sc(2,1,"group.manage")))}function Ll(e,t){if(1&e){const e=C.ec();C.dc(0,"button",25),C.nc("click",function(){return C.Lc(e),C.qc(2).leave()}),C.Wc(1),C.rc(2,"translate"),C.cc()}if(2&e){const e=C.qc(2);C.yc("disabled",e.isOwner),C.Kb(1),C.Xc(C.sc(2,2,"group.leave"))}}function kl(e,t){if(1&e){const e=C.ec();C.dc(0,"button",26),C.nc("click",function(){return C.Lc(e),C.qc(2).join()}),C.Wc(1),C.rc(2,"translate"),C.cc()}2&e&&(C.Kb(1),C.Xc(C.sc(2,1,"group.join")))}function Pl(e,t){if(1&e){const e=C.ec();C.dc(0,"button",26),C.nc("click",function(){return C.Lc(e),C.qc(3).join()}),C.Wc(1),C.rc(2,"translate"),C.cc()}2&e&&(C.Kb(1),C.Xc(C.sc(2,1,"group.requestmembership")))}function Nl(e,t){1&e&&(C.dc(0,"button",28),C.Wc(1),C.rc(2,"translate"),C.cc()),2&e&&(C.Kb(1),C.Xc(C.sc(2,1,"group.membershippending")))}function Wl(e,t){if(1&e&&(C.dc(0,"div"),C.Uc(1,Pl,3,3,"button",21),C.Uc(2,Nl,3,3,"button",27),C.cc()),2&e){const e=C.qc(2);C.Kb(1),C.yc("ngIf",0===e.groupMembershipType),C.Kb(1),C.yc("ngIf",2===e.groupMembershipType)}}const Kl=function(e,t,n){return{"fa-user-plus":e,"fa-key":t,"fa-ban":n}},Fl=function(){return["date","owner"]},Vl=function(e,t){return[e,t]};function ql(e,t){if(1&e){const e=C.ec();C.dc(0,"div",1),C.dc(1,"div",2),C.dc(2,"div",3),C.dc(3,"h6",4),C.Wc(4),C.rc(5,"translate"),C.cc(),C.dc(6,"button",5),C.nc("click",function(){return C.Lc(e),C.qc().clear()}),C.Zb(7,"i",6),C.cc(),C.cc(),C.dc(8,"div",7),C.dc(9,"div",8),C.dc(10,"div",9),C.Zb(11,"nitro-badge",10),C.dc(12,"div",11),C.nc("click",function(){return C.Lc(e),C.qc().getMembers(!1)}),C.Wc(13),C.rc(14,"translate"),C.cc(),C.Uc(15,Al,3,5,"div",12),C.cc(),C.dc(16,"div",13),C.dc(17,"div"),C.Zb(18,"i",14),C.Wc(19),C.cc(),C.dc(20,"div",15),C.Wc(21),C.rc(22,"translate"),C.cc(),C.dc(23,"div",16),C.Wc(24),C.cc(),C.dc(25,"button",17),C.nc("click",function(){return C.Lc(e),C.qc().goToHomeRoom()}),C.Wc(26),C.rc(27,"translate"),C.cc(),C.Uc(28,Dl,3,3,"button",18),C.cc(),C.cc(),C.dc(29,"div",19),C.Uc(30,Ll,3,4,"button",20),C.Uc(31,kl,3,3,"button",21),C.Uc(32,Wl,3,2,"div",22),C.cc(),C.cc(),C.cc(),C.cc()}if(2&e){const e=C.qc();C.Kb(4),C.Xc(C.sc(5,14,"group.window.title")),C.Kb(7),C.yc("badge",e.groupBadgeCode)("isGroup",!0),C.Kb(2),C.Xc(C.uc(14,16,"group.members.members","count",e.groupMembersCount)),C.Kb(2),C.yc("ngIf",e.groupMembershipRequestsCount>0),C.Kb(3),C.yc("ngClass",C.Ec(26,Kl,0===e.groupType,1===e.groupType,2===e.groupType)),C.Kb(1),C.Xc(e.groupName),C.Kb(2),C.Xc(C.uc(22,20,"group.created",C.Bc(30,Fl),C.Dc(31,Vl,e.groupCreationDate,e.groupOwnerName))),C.Kb(3),C.Xc(e.groupDescription),C.Kb(2),C.Xc(C.sc(27,24,"group.linktobase")),C.Kb(2),C.yc("ngIf",e.isOwner),C.Kb(2),C.yc("ngIf",1===e.groupMembershipType),C.Kb(1),C.yc("ngIf",0===e.groupType&&0===e.groupMembershipType),C.Kb(1),C.yc("ngIf",1===e.groupType)}}let Hl=(()=>{class e{constructor(e,t,n){this._ngZone=e,this._navigatorService=t,this._groupService=n,this._groupService.groupInfoComponent=this,this.clear()}clear(){this._ngZone.run(()=>{this._groupId=0,this._groupName=null,this._groupBadgeCode=null,this._groupDescription=null,this._groupType=-1,this._groupMembershipType=-1,this._groupCreationDate=null,this._groupOwnerName=null,this._groupMembersCount=0,this._groupMembershipRequestsCount=0,this._groupHomeRoomId=0,this._isOwner=!1})}goToHomeRoom(){this._navigatorService.goToRoom(this._groupHomeRoomId)}manage(){r.a.instance.createLinkEvent("groups/manage/"+this.groupId)}getMembers(e){this._groupService.getMembers(this._groupId,0,null,e?2:0)}join(){this.groupId&&0===this._groupMembershipType&&this._groupService.join(this.groupId)}leave(){this.groupId&&1===this._groupMembershipType&&!this.isOwner&&this._groupService.removeMember(this.groupId,r.a.instance.sessionDataManager.userId)}confirmLeave(){return[r.a.instance.localization.getValue("group.leaveconfirm.title"),r.a.instance.localization.getValue("group.leaveconfirm.desc"),[new Hc.a("group.leave",()=>{r.a.instance.communication.connection.send(new xl.a(this.groupId,r.a.instance.sessionDataManager.userId))},["btn-danger"]),new Hc.a("generic.close",()=>{},["btn-primary"])]]}get visible(){return this._groupId>0}get groupId(){return this._groupId}set groupId(e){this._groupId=e}get groupName(){return this._groupName}set groupName(e){this._groupName=e}get groupBadgeCode(){return this._groupBadgeCode}set groupBadgeCode(e){this._groupBadgeCode=e}get groupDescription(){return this._groupDescription}set groupDescription(e){this._groupDescription=e}get groupType(){return this._groupType}set groupType(e){this._groupType=e}get groupMembershipType(){return this._groupMembershipType}set groupMembershipType(e){this._groupMembershipType=e}get groupCreationDate(){return this._groupCreationDate}set groupCreationDate(e){this._groupCreationDate=e}get groupOwnerName(){return this._groupOwnerName}set groupOwnerName(e){this._groupOwnerName=e}get groupMembersCount(){return this._groupMembersCount}set groupMembersCount(e){this._groupMembersCount=e}get groupMembershipRequestsCount(){return this._groupMembershipRequestsCount}set groupMembershipRequestsCount(e){this._groupMembershipRequestsCount=e}get groupHomeRoomId(){return this._groupHomeRoomId}set groupHomeRoomId(e){this._groupHomeRoomId=e}get isOwner(){return this._isOwner}set isOwner(e){this._isOwner=e}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(C.H),C.Yb(kc.a),C.Yb(ho.a))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-group-info-component"]],decls:1,vars:1,consts:[["class","nitro-group-info-component","dragHandle",".drag-handler",3,"bringToTop","draggable",4,"ngIf"],["dragHandle",".drag-handler",1,"nitro-group-info-component",3,"bringToTop","draggable"],[1,"card"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"d-flex","flex-row","justify-content-between","w-100","mb-2"],[1,"mr-3"],[3,"badge","isGroup"],[1,"group-members-count","mt-3","text-center",3,"click"],["class","group-members-count mt-1 text-center",3,"click",4,"ngIf"],[1,"w-100"],[1,"fas","mr-2",3,"ngClass"],[1,"small","mb-2"],[1,"small","mb-3"],[1,"btn","btn-primary","btn-sm","mt-1",3,"click"],["class","btn btn-primary btn-sm mt-2",3,"click",4,"ngIf"],[1,"mt-3"],["class","btn btn-danger btn-block",3,"disabled","click",4,"ngIf"],["class","btn btn-success btn-block",3,"click",4,"ngIf"],[4,"ngIf"],[1,"group-members-count","mt-1","text-center",3,"click"],[1,"btn","btn-primary","btn-sm","mt-2",3,"click"],[1,"btn","btn-danger","btn-block",3,"disabled","click"],[1,"btn","btn-success","btn-block",3,"click"],["class","btn btn-primary disabled btn-block","disabled","",4,"ngIf"],["disabled","",1,"btn","btn-primary","disabled","btn-block"]],template:function(e,t){1&e&&C.Uc(0,ql,33,34,"div",0),2&e&&C.yc("ngIf",t.visible)},directives:[dn.n,Mi.a,Pi.a,Os.a,dn.l],pipes:[un.a],encapsulation:2}),e})();function Bl(e,t){1&e&&(C.dc(0,"option",25),C.Wc(1),C.rc(2,"translate"),C.cc()),2&e&&(C.Kb(1),C.Xc(C.sc(2,1,"group.members.search.pending")))}function Gl(e,t){if(1&e&&C.Zb(0,"i",33),2&e){const e=C.qc().$implicit,t=C.qc(2);C.yc("ngClass",t.getRankIcon(e.rank))}}function Zl(e,t){if(1&e){const e=C.ec();C.dc(0,"div",34),C.nc("click",function(){C.Lc(e);const t=C.qc().$implicit;return C.qc(2).removeOrDeclineMember(t.id,t.rank)}),C.Zb(1,"i",6),C.cc()}}function Xl(e,t){1&e&&(C.dc(0,"button",35),C.Wc(1),C.rc(2,"translate"),C.cc()),2&e&&(C.Kb(1),C.Xc(C.sc(2,1,"group.members.owner")))}function jl(e,t){if(1&e){const e=C.ec();C.dc(0,"span",34),C.nc("click",function(){C.Lc(e);const t=C.qc(2).$implicit;return C.qc(2).takeAdmin(t.id)}),C.Wc(1),C.rc(2,"translate"),C.cc()}2&e&&(C.Kb(1),C.Xc(C.sc(2,1,"group.members.removerights")))}function Yl(e,t){if(1&e){const e=C.ec();C.dc(0,"span",34),C.nc("click",function(){C.Lc(e);const t=C.qc(2).$implicit;return C.qc(2).giveAdmin(t.id)}),C.Wc(1),C.rc(2,"translate"),C.cc()}2&e&&(C.Kb(1),C.Xc(C.sc(2,1,"group.members.giverights")))}function zl(e,t){if(1&e){const e=C.ec();C.dc(0,"span",34),C.nc("click",function(){C.Lc(e);const t=C.qc(2).$implicit;return C.qc(2).acceptMembership(t.id)}),C.Wc(1),C.rc(2,"translate"),C.cc()}2&e&&(C.Kb(1),C.Xc(C.sc(2,1,"group.members.accept")))}function $l(e,t){if(1&e&&(C.dc(0,"button",35),C.Uc(1,jl,3,3,"span",31),C.Uc(2,Yl,3,3,"span",31),C.Uc(3,zl,3,3,"span",31),C.cc()),2&e){const e=C.qc().$implicit;C.Kb(1),C.yc("ngIf",1===e.rank),C.Kb(1),C.yc("ngIf",2===e.rank),C.Kb(1),C.yc("ngIf",3===e.rank)}}function Ql(e,t){if(1&e){const e=C.ec();C.dc(0,"div",26),C.dc(1,"div",27),C.dc(2,"div",28),C.dc(3,"div",29),C.nc("click",function(){C.Lc(e);const n=t.$implicit;return C.qc(2).openProfile(n.id)}),C.Uc(4,Gl,1,1,"i",30),C.Wc(5),C.cc(),C.Uc(6,Zl,2,0,"div",31),C.cc(),C.Uc(7,Xl,3,3,"button",32),C.Uc(8,$l,4,3,"button",32),C.cc(),C.cc()}if(2&e){const e=t.$implicit,n=C.qc(2);C.Kb(4),C.yc("ngIf",e.rank<3),C.Kb(1),C.Xc(e.name),C.Kb(1),C.yc("ngIf",n.admin&&e.rank>0),C.Kb(1),C.yc("ngIf",0===e.rank),C.Kb(1),C.yc("ngIf",n.admin&&e.id!==n.myId&&0!==e.rank)}}const Jl=function(){return["amount","page","totalPages"]},ed=function(e,t,n){return[e,t,n]};function td(e,t){if(1&e){const e=C.ec();C.dc(0,"div",1),C.dc(1,"div",2),C.dc(2,"div",3),C.dc(3,"h6",4),C.Wc(4),C.rc(5,"translate"),C.cc(),C.dc(6,"button",5),C.nc("click",function(){return C.Lc(e),C.qc().clear()}),C.Zb(7,"i",6),C.cc(),C.cc(),C.dc(8,"div",7),C.dc(9,"div",8),C.dc(10,"div",9),C.Zb(11,"nitro-badge",10),C.cc(),C.dc(12,"div",11),C.dc(13,"input",12),C.nc("ngModelChange",function(t){return C.Lc(e),C.qc().query=t})("keyup.enter",function(){return C.Lc(e),C.qc().searchMembers()}),C.rc(14,"translate"),C.cc(),C.dc(15,"select",13),C.nc("ngModelChange",function(t){return C.Lc(e),C.qc().level=t})("ngModelChange",function(){return C.Lc(e),C.qc().searchMembers()}),C.dc(16,"option",14),C.Wc(17),C.rc(18,"translate"),C.cc(),C.dc(19,"option",15),C.Wc(20),C.rc(21,"translate"),C.cc(),C.Uc(22,Bl,3,3,"option",16),C.cc(),C.cc(),C.cc(),C.dc(23,"div",17),C.dc(24,"div",18),C.Uc(25,Ql,9,5,"div",19),C.cc(),C.cc(),C.dc(26,"div",20),C.dc(27,"button",21),C.nc("click",function(){return C.Lc(e),C.qc().previousPage()}),C.Zb(28,"i",22),C.cc(),C.dc(29,"div",23),C.Wc(30),C.rc(31,"translate"),C.cc(),C.dc(32,"button",21),C.nc("click",function(){return C.Lc(e),C.qc().nextPage()}),C.Zb(33,"i",24),C.cc(),C.cc(),C.cc(),C.cc(),C.cc()}if(2&e){const e=C.qc();C.Kb(4),C.Xc(C.uc(5,13,"group.members.title","groupName",e.groupName)),C.Kb(7),C.yc("badge",e.groupBadgeCode)("isGroup",!0),C.Kb(2),C.yc("placeholder",C.sc(14,17,"group.members.searchinfo"))("ngModel",e.query),C.Kb(2),C.yc("ngModel",e.level),C.Kb(2),C.Xc(C.sc(18,19,"group.members.search.all")),C.Kb(3),C.Xc(C.sc(21,21,"group.members.search.admins")),C.Kb(2),C.yc("ngIf",e.admin),C.Kb(3),C.yc("ngForOf",e.result),C.Kb(2),C.yc("disabled",0===e.pageIndex),C.Kb(3),C.Xc(C.uc(31,23,"group.members.pageinfo",C.Bc(27,Jl),C.Ec(28,ed,e.totalMembersCount,e.pageIndex+1,e.totalPages))),C.Kb(2),C.yc("disabled",e.pageIndex+1===e.totalPages)}}let nd=(()=>{class e{constructor(e,t){this._ngZone=e,this._groupService=t,this._groupService.groupMembersComponent=this,this.clear()}clear(){this._ngZone.run(()=>{this._groupId=0,this._groupName=null,this._groupBadgeCode=null,this._totalMembersCount=0,this._result=[],this._admin=!1,this._pageSize=1,this._pageIndex=0,this.level="0",this.query=null})}getMembers(){this._groupService.getMembers(this._groupId,this._pageIndex,this.query,parseInt(this.level))}searchMembers(){this._ngZone.run(()=>{this._pageSize=1,this._pageIndex=0,this._totalMembersCount=0}),this.getMembers()}nextPage(){this._pageIndex+1!==this.totalPages&&(this._pageIndex++,this.getMembers())}previousPage(){0!==this._pageIndex&&(this._pageIndex--,this.getMembers())}giveAdmin(e){this._groupId&&this._admin&&(this._groupService.giveAdmin(this._groupId,e),this.getMembers())}takeAdmin(e){this._groupId&&this._admin&&(this._groupService.takeAdmin(this._groupId,e),this.getMembers())}acceptMembership(e){this._groupId&&this._admin&&(this._groupService.acceptMembership(this._groupId,e),this.getMembers())}removeOrDeclineMember(e,t){this._groupId&&this._admin&&(3===t?this._groupService.declineMembership(this._groupId,e):(this._groupService.removeMember(this._groupId,e),this.getMembers()))}confirmRemove(e,t){const n=r.a.instance.localization.getValue("group.kickconfirm.title");let i=null;return i=t?r.a.instance.localization.getValueWithParameters("group.kickconfirm.desc",["user","amount"],["<b>"+e+"</b>","<b>"+t+"</b>"]):r.a.instance.localization.getValueWithParameter("group.kickconfirm_nofurni.desc","user","<b>"+e+"</b>"),[n,i,[new Hc.a("group.kickconfirm.title",()=>{r.a.instance.communication.connection.send(new xl.a(this.groupId,e)),this.getMembers()},["btn-danger"]),new Hc.a("generic.close",()=>{},["btn-primary"])]]}openProfile(e){this._groupService.openProfile(e)}getRankIcon(e){return 0===e?"fas fa-crown":1===e?"fas fa-star":"far fa-star"}get visible(){return this._groupId>0}get groupId(){return this._groupId}set groupId(e){this._groupId=e}get groupName(){return this._groupName}set groupName(e){this._groupName=e}get groupBadgeCode(){return this._groupBadgeCode}set groupBadgeCode(e){this._groupBadgeCode=e}get totalMembersCount(){return this._totalMembersCount}set totalMembersCount(e){this._totalMembersCount=e}get result(){return this._result}set result(e){this._result=e}get admin(){return this._admin}set admin(e){this._admin=e}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=e}get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=e}get totalPages(){return Math.ceil(this._totalMembersCount/this._pageSize)}get myId(){return r.a.instance.sessionDataManager.userId}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(C.H),C.Yb(ho.a))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-group-members-component"]],decls:1,vars:1,consts:[["class","nitro-group-members-component","dragHandle",".drag-handler",3,"bringToTop","draggable",4,"ngIf"],["dragHandle",".drag-handler",1,"nitro-group-members-component",3,"bringToTop","draggable"],[1,"card"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"d-flex","flex-row","justify-content-between","w-100","mb-2"],[1,"mr-3"],[3,"badge","isGroup"],[1,"w-100"],["type","text",1,"form-control","form-control-sm","mb-1",3,"placeholder","ngModel","ngModelChange","keyup.enter"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","2",4,"ngIf"],[1,"grid-container","mt-3"],[1,"grid-items","grid-3"],["class","d-flex flex-row justify-content-between item-detail",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","justify-content-between","mt-3"],[1,"btn","btn-primary","btn-sm",3,"disabled","click"],[1,"fas","fa-chevron-left"],[1,"text-center","w-100","pagination-counter"],[1,"fas","fa-chevron-right"],["value","2"],[1,"d-flex","flex-row","justify-content-between","item-detail"],[1,"bg-emperor","w-100","p-2","rounded"],[1,"d-flex","flex-row","justify-content-between"],[1,"w-100",3,"click"],["class","mr-2",3,"ngClass",4,"ngIf"],[3,"click",4,"ngIf"],["class","btn btn-primary btn-sm w-100 mt-1",4,"ngIf"],[1,"mr-2",3,"ngClass"],[3,"click"],[1,"btn","btn-primary","btn-sm","w-100","mt-1"]],template:function(e,t){1&e&&C.Uc(0,td,34,32,"div",0),2&e&&C.yc("ngIf",t.visible)},directives:[dn.n,Mi.a,Pi.a,Os.a,ui.b,ui.l,ui.n,ui.t,ui.o,ui.v,dn.m,dn.l],pipes:[un.a],encapsulation:2}),e})();var id=n("7XZB");let rd=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-group-main-component"]],decls:3,vars:0,template:function(e,t){1&e&&(C.Zb(0,"nitro-group-info-component"),C.Zb(1,"nitro-group-members-component"),C.Zb(2,"nitro-group-manager-component"))},directives:[Hl,nd,id.a],encapsulation:2}),e})();var sd=n("UIgM");const cd=function(e){return{background:e}},od=function(e){return{backgroundImage:e}};let ad=(()=>{class e{constructor(e){this.sessionService=e,this._background=r.a.instance.core.configuration.interpolate(r.a.instance.getConfiguration("hotelview.images").background),this._backgroundColour=r.a.instance.getConfiguration("hotelview.images")["background.colour"],this._sun=r.a.instance.core.configuration.interpolate(r.a.instance.getConfiguration("hotelview.images").sun),this._drape=r.a.instance.core.configuration.interpolate(r.a.instance.getConfiguration("hotelview.images").drape),this._left=r.a.instance.core.configuration.interpolate(r.a.instance.getConfiguration("hotelview.images").left),this._right=r.a.instance.core.configuration.interpolate(r.a.instance.getConfiguration("hotelview.images").right),this._rightRepeat=r.a.instance.core.configuration.interpolate(r.a.instance.getConfiguration("hotelview.images")["right.repeat"])}get figure(){return this.sessionService.figure}get background(){return this._background||null}get backgroundColour(){return this._backgroundColour||null}get sun(){return this._sun||null}get drape(){return this._drape||null}get left(){return this._left||null}get right(){return this._right||null}get rightRepeat(){return this._rightRepeat||null}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(ya.a))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-hotelview-component"]],decls:7,vars:11,consts:[[1,"nitro-hotelview-component",3,"ngStyle"],[1,"background","position-absolute",3,"ngStyle"],["image-placeholder","",1,"sun","position-absolute",3,"src"],["image-placeholder","",1,"drape","position-absolute",3,"src"],["image-placeholder","",1,"left","position-absolute",3,"src"],["image-placeholder","",1,"rightRepeat","position-absolute",3,"src"],["image-placeholder","",1,"right","position-absolute",3,"src"]],template:function(e,t){1&e&&(C.dc(0,"div",0),C.Zb(1,"div",1),C.Zb(2,"img",2),C.Zb(3,"img",3),C.Zb(4,"img",4),C.Zb(5,"img",5),C.Zb(6,"img",6),C.cc()),2&e&&(C.yc("ngStyle",C.Cc(7,cd,t.backgroundColour)),C.Kb(1),C.yc("ngStyle",C.Cc(9,od,"url("+t.background+")")),C.Kb(1),C.yc("src",t.sun,C.Nc),C.Kb(1),C.yc("src",t.drape,C.Nc),C.Kb(1),C.yc("src",t.left,C.Nc),C.Kb(1),C.yc("src",t.rightRepeat,C.Nc),C.Kb(1),C.yc("src",t.right,C.Nc))},directives:[dn.o,Ps.a],encapsulation:2}),e})();function ld(e,t){1&e&&C.Zb(0,"nitro-hotelview-component")}let dd=(()=>{class e{constructor(e,t,n){this._notificationService=e,this._settingsService=t,this._ngZone=n,this.roomComponent=null,this._landingViewVisible=!0,this.onRoomEngineEvent=this.onRoomEngineEvent.bind(this),this.onInterstitialEvent=this.onInterstitialEvent.bind(this),this.onRoomEngineObjectEvent=this.onRoomEngineObjectEvent.bind(this),this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.onRoomErrorEvent=this.onRoomErrorEvent.bind(this),r.a.instance.addLinkEventTracker(this)}ngOnInit(){this._ngZone.runOutsideAngular(()=>{r.a.instance.roomEngine.events&&(r.a.instance.roomEngine.events.addEventListener(o.a.INITIALIZED,this.onRoomEngineEvent),r.a.instance.roomEngine.events.addEventListener(o.a.DISPOSED,this.onRoomEngineEvent),r.a.instance.roomEngine.events.addEventListener(o.a.ENGINE_INITIALIZED,this.onInterstitialEvent),r.a.instance.roomEngine.events.addEventListener(o.a.OBJECTS_INITIALIZED,this.onInterstitialEvent),r.a.instance.roomEngine.events.addEventListener(o.a.NORMAL_MODE,this.onInterstitialEvent),r.a.instance.roomEngine.events.addEventListener(o.a.GAME_MODE,this.onInterstitialEvent),r.a.instance.roomEngine.events.addEventListener(h.a.ROOM_ZOOM,this.onRoomEngineEvent),r.a.instance.roomEngine.events.addEventListener(d.a.ROOM_BACKGROUND_COLOR,this.onRoomEngineEvent),r.a.instance.roomEngine.events.addEventListener(s.a.ROOM_COLOR,this.onRoomEngineEvent),r.a.instance.roomEngine.events.addEventListener(c.a.ROOM_COLOR,this.onRoomEngineEvent),r.a.instance.roomEngine.events.addEventListener(a.a.SELECTED,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.addEventListener(a.a.DESELECTED,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.addEventListener(a.a.ADDED,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.addEventListener(a.a.REMOVED,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.addEventListener(a.a.PLACED,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.addEventListener(a.a.REQUEST_MOVE,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.addEventListener(a.a.REQUEST_ROTATE,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.addEventListener(a.a.MOUSE_ENTER,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.addEventListener(a.a.MOUSE_LEAVE,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.addEventListener(l.a.OPEN_WIDGET,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.addEventListener(l.a.CLOSE_WIDGET,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.addEventListener(l.a.REQUEST_INTERNAL_LINK,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.addEventListener(l.a.REQUEST_ROOM_LINK,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.addEventListener(l.a.REQUEST_TROPHY,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.addEventListener(l.a.REQUEST_CREDITFURNI,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.addEventListener(u.a.OPEN_FURNI_CONTEXT_MENU,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.addEventListener(l.a.REQUEST_STICKIE,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.addEventListener(l.a.REQUEST_DIMMER,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.addEventListener(l.a.REQUEST_BACKGROUND_COLOR,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.addEventListener(l.a.REQUEST_FRIEND_FURNITURE_ENGRAVING,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.addEventListener(l.a.REQUEST_MANNEQUIN,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.addEventListener(l.a.REQUEST_PRESENT,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.addEventListener(l.a.REQUEST_HIGH_SCORE_DISPLAY,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.addEventListener(l.a.REQUEST_HIDE_HIGH_SCORE_DISPLAY,this.onRoomEngineObjectEvent)),r.a.instance.roomSessionManager.events&&(r.a.instance.roomSessionManager.events.addEventListener(b.a.CREATED,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.addEventListener(b.a.STARTED,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.addEventListener(b.a.ROOM_DATA,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.addEventListener(b.a.ENDED,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.addEventListener(g.a.CHAT_EVENT,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.addEventListener(g.a.FLOOD_EVENT,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.addEventListener(m.a.RSDE_DANCE,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.addEventListener(S.a.RSUBE_BADGES,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.addEventListener(p.a.DOORBELL,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.addEventListener(p.a.RSDE_REJECTED,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.addEventListener(p.a.RSDE_ACCEPTED,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.addEventListener(f.a.RSDPE_PRESETS,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.addEventListener(v.a.RSFRE_FRIEND_REQUEST,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.addEventListener(E.a.RSPE_PRESENT_OPENED,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.addEventListener(_.a.RSEME_KICKED,this.onRoomErrorEvent),r.a.instance.roomSessionManager.events.addEventListener(_.a.RSEME_PETS_FORBIDDEN_IN_HOTEL,this.onRoomErrorEvent),r.a.instance.roomSessionManager.events.addEventListener(_.a.RSEME_PETS_FORBIDDEN_IN_FLAT,this.onRoomErrorEvent),r.a.instance.roomSessionManager.events.addEventListener(_.a.RSEME_MAX_PETS,this.onRoomErrorEvent),r.a.instance.roomSessionManager.events.addEventListener(_.a.RSEME_MAX_NUMBER_OF_OWN_PETS,this.onRoomErrorEvent),r.a.instance.roomSessionManager.events.addEventListener(_.a.RSEME_NO_FREE_TILES_FOR_PET,this.onRoomErrorEvent),r.a.instance.roomSessionManager.events.addEventListener(_.a.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET,this.onRoomErrorEvent),r.a.instance.roomSessionManager.events.addEventListener(_.a.RSEME_BOTS_FORBIDDEN_IN_HOTEL,this.onRoomErrorEvent),r.a.instance.roomSessionManager.events.addEventListener(_.a.RSEME_BOTS_FORBIDDEN_IN_FLAT,this.onRoomErrorEvent),r.a.instance.roomSessionManager.events.addEventListener(_.a.RSEME_BOT_LIMIT_REACHED,this.onRoomErrorEvent),r.a.instance.roomSessionManager.events.addEventListener(_.a.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT,this.onRoomErrorEvent),r.a.instance.roomSessionManager.events.addEventListener(_.a.RSEME_BOT_NAME_NOT_ACCEPTED,this.onRoomErrorEvent))})}ngOnDestroy(){this._ngZone.runOutsideAngular(()=>{r.a.instance.roomEngine.events&&(r.a.instance.roomEngine.events.removeEventListener(o.a.INITIALIZED,this.onRoomEngineEvent),r.a.instance.roomEngine.events.removeEventListener(o.a.DISPOSED,this.onRoomEngineEvent),r.a.instance.roomEngine.events.removeEventListener(o.a.ENGINE_INITIALIZED,this.onInterstitialEvent),r.a.instance.roomEngine.events.removeEventListener(o.a.OBJECTS_INITIALIZED,this.onInterstitialEvent),r.a.instance.roomEngine.events.removeEventListener(o.a.NORMAL_MODE,this.onInterstitialEvent),r.a.instance.roomEngine.events.removeEventListener(o.a.GAME_MODE,this.onInterstitialEvent),r.a.instance.roomEngine.events.removeEventListener(h.a.ROOM_ZOOM,this.onRoomEngineEvent),r.a.instance.roomEngine.events.removeEventListener(d.a.ROOM_BACKGROUND_COLOR,this.onRoomEngineEvent),r.a.instance.roomEngine.events.removeEventListener(s.a.ROOM_COLOR,this.onRoomEngineEvent),r.a.instance.roomEngine.events.removeEventListener(c.a.ROOM_COLOR,this.onRoomEngineEvent),r.a.instance.roomEngine.events.removeEventListener(a.a.SELECTED,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.removeEventListener(a.a.DESELECTED,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.removeEventListener(a.a.ADDED,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.removeEventListener(a.a.REMOVED,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.removeEventListener(a.a.PLACED,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.removeEventListener(a.a.REQUEST_MOVE,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.removeEventListener(a.a.REQUEST_ROTATE,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.removeEventListener(a.a.MOUSE_ENTER,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.removeEventListener(a.a.MOUSE_LEAVE,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.removeEventListener(l.a.OPEN_WIDGET,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.removeEventListener(l.a.CLOSE_WIDGET,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.removeEventListener(l.a.REQUEST_INTERNAL_LINK,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.removeEventListener(l.a.REQUEST_ROOM_LINK,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.removeEventListener(l.a.REQUEST_TROPHY,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.removeEventListener(l.a.REQUEST_CREDITFURNI,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.removeEventListener(u.a.OPEN_FURNI_CONTEXT_MENU,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.removeEventListener(l.a.REQUEST_STICKIE,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.removeEventListener(l.a.REQUEST_DIMMER,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.removeEventListener(l.a.REQUEST_BACKGROUND_COLOR,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.removeEventListener(l.a.REQUEST_FRIEND_FURNITURE_ENGRAVING,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.removeEventListener(l.a.REQUEST_PRESENT,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.removeEventListener(l.a.REQUEST_HIGH_SCORE_DISPLAY,this.onRoomEngineObjectEvent),r.a.instance.roomEngine.events.removeEventListener(l.a.REQUEST_HIDE_HIGH_SCORE_DISPLAY,this.onRoomEngineObjectEvent)),r.a.instance.roomSessionManager.events&&(r.a.instance.roomSessionManager.events.removeEventListener(b.a.CREATED,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.removeEventListener(b.a.STARTED,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.removeEventListener(b.a.ROOM_DATA,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.removeEventListener(b.a.ENDED,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.removeEventListener(g.a.CHAT_EVENT,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.removeEventListener(m.a.RSDE_DANCE,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.removeEventListener(S.a.RSUBE_BADGES,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.removeEventListener(p.a.DOORBELL,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.removeEventListener(p.a.RSDE_REJECTED,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.removeEventListener(p.a.RSDE_ACCEPTED,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.removeEventListener(f.a.RSDPE_PRESETS,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.removeEventListener(v.a.RSFRE_FRIEND_REQUEST,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.removeEventListener(E.a.RSPE_PRESENT_OPENED,this.onRoomSessionEvent),r.a.instance.roomSessionManager.events.removeEventListener(_.a.RSEME_KICKED,this.onRoomErrorEvent),r.a.instance.roomSessionManager.events.removeEventListener(_.a.RSEME_PETS_FORBIDDEN_IN_HOTEL,this.onRoomErrorEvent),r.a.instance.roomSessionManager.events.removeEventListener(_.a.RSEME_PETS_FORBIDDEN_IN_FLAT,this.onRoomErrorEvent),r.a.instance.roomSessionManager.events.removeEventListener(_.a.RSEME_MAX_PETS,this.onRoomErrorEvent),r.a.instance.roomSessionManager.events.removeEventListener(_.a.RSEME_MAX_NUMBER_OF_OWN_PETS,this.onRoomErrorEvent),r.a.instance.roomSessionManager.events.removeEventListener(_.a.RSEME_NO_FREE_TILES_FOR_PET,this.onRoomErrorEvent),r.a.instance.roomSessionManager.events.removeEventListener(_.a.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET,this.onRoomErrorEvent),r.a.instance.roomSessionManager.events.removeEventListener(_.a.RSEME_BOTS_FORBIDDEN_IN_HOTEL,this.onRoomErrorEvent),r.a.instance.roomSessionManager.events.removeEventListener(_.a.RSEME_BOTS_FORBIDDEN_IN_FLAT,this.onRoomErrorEvent),r.a.instance.roomSessionManager.events.removeEventListener(_.a.RSEME_BOT_LIMIT_REACHED,this.onRoomErrorEvent),r.a.instance.roomSessionManager.events.removeEventListener(_.a.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT,this.onRoomErrorEvent),r.a.instance.roomSessionManager.events.removeEventListener(_.a.RSEME_BOT_NAME_NOT_ACCEPTED,this.onRoomErrorEvent))}),r.a.instance.removeLinkEventTracker(this)}ngAfterContentInit(){r.a.instance.communication.connection.onReady()}onRoomEngineEvent(e){if(!e)return;if(w.a.isRoomPreviewerId(e.roomId))return;const t=r.a.instance.roomSessionManager.getSession(e.roomId);if(t)switch(e.type){case o.a.INITIALIZED:return void(this.roomComponent&&(this.roomComponent.prepareRoom(t),r.a.instance.roomEngine.setActiveRoomId(e.roomId),this.roomComponent.createWidget(y.a.CHAT_WIDGET,Lc),this.roomComponent.createWidget(y.a.INFOSTAND,_c),this.roomComponent.createWidget(y.a.LOCATION_WIDGET,null),this.roomComponent.createWidget(y.a.INTERNAL_LINK,null),this.roomComponent.createWidget(y.a.ROOM_LINK,null),this.roomComponent.createWidget(y.a.CUSTOM_STACK_HEIGHT,Er),this.roomComponent.createWidget(y.a.ROOM_DIMMER,Mr),this.roomComponent.createWidget(y.a.FURNI_STICKIE_WIDGET,bs),this.roomComponent.createWidget(y.a.DOORBELL,Ec),this.roomComponent.createWidget(y.a.FURNI_TROPHY_WIDGET,Es),this.roomComponent.createWidget(y.a.FURNI_CREDIT_WIDGET,_r),this.roomComponent.createWidget(y.a.FURNITURE_CONTEXT_MENU,fr),this.roomComponent.createWidget(y.a.ROOM_BACKGROUND_COLOR,cr),this.roomComponent.createWidget(y.a.FRIEND_FURNI_CONFIRM,xr),this.roomComponent.createWidget(y.a.FRIEND_FURNI_ENGRAVING,kr),this.roomComponent.createWidget(y.a.ROOM_TOOLS,Vc),this.roomComponent.createWidget(y.a.MANNEQUIN,hs),this.roomComponent.createWidget(y.a.FURNI_PRESENT_WIDGET,Gr),this.roomComponent.createWidget(y.a.FRIEND_REQUEST,tr),this.roomComponent.createWidget(y.a.HIGH_SCORE_DISPLAY,es),this.roomComponent.roomSession.isSpectator||(this.roomComponent.createWidget(y.a.CHAT_INPUT_WIDGET,ki),this.roomComponent.createWidget(y.a.AVATAR_INFO,Oi),this.roomComponent.createWidget(y.a.FURNI_CHOOSER,Zi),this.roomComponent.createWidget(y.a.USER_CHOOSER,zi))));case o.a.DISPOSED:return void(this.roomComponent&&this.roomComponent.endRoom());case h.a.ROOM_ZOOM:{const t=e;let n=t.level<1?.5:1<<Math.floor(t.level)-1;return(t.forceFlip||t.asDelta)&&(n=t.level),void(this.roomComponent&&r.a.instance.roomEngine.setRoomInstanceRenderingCanvasScale(this.roomComponent.roomSession.roomId,this.roomComponent.getFirstCanvasId(),n,null,null,!1,t.asDelta))}case s.a.ROOM_COLOR:if(this.roomComponent){const t=e;t._Str_11464?this.roomComponent.setRoomColorizerColor(16711680,255):this.roomComponent.setRoomColorizerColor(t.color,t._Str_5123)}return;case c.a.ROOM_COLOR:return void(this.roomComponent&&this.roomComponent._Str_2485(e));case d.a.ROOM_BACKGROUND_COLOR:if(this.roomComponent){const t=e;t.enable?this.roomComponent.setRoomBackgroundColor(t.hue,t.saturation,t.lightness):this.roomComponent.setRoomBackgroundColor(0,0,0)}return}}onInterstitialEvent(e){e&&(e.type!==o.a.GAME_MODE&&e.type!==o.a.NORMAL_MODE||this.roomComponent&&this.roomComponent.onRoomEngineEvent(e))}onRoomEngineObjectEvent(e){this.roomComponent&&this.roomComponent.onRoomEngineObjectEvent(e)}onRoomErrorEvent(e){if(!e)return;let t,n="${error.title}";switch(e.type){case _.a.RSEME_MAX_PETS:t="${room.error.max_pets}";break;case _.a.RSEME_MAX_NUMBER_OF_OWN_PETS:t="${room.error.max_own_pets}";break;case _.a.RSEME_KICKED:t="${room.error.kicked}",n="${generic.alert.title}";break;case _.a.RSEME_PETS_FORBIDDEN_IN_HOTEL:t="${room.error.pets.forbidden_in_hotel}";break;case _.a.RSEME_PETS_FORBIDDEN_IN_FLAT:t="${room.error.pets.forbidden_in_flat}";break;case _.a.RSEME_NO_FREE_TILES_FOR_PET:t="${room.error.pets.no_free_tiles}";break;case _.a.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET:t="${room.error.pets.selected_tile_not_free}";break;case _.a.RSEME_BOTS_FORBIDDEN_IN_HOTEL:t="${room.error.bots.forbidden_in_hotel}";break;case _.a.RSEME_BOTS_FORBIDDEN_IN_FLAT:t="${room.error.bots.forbidden_in_flat}";break;case _.a.RSEME_BOT_LIMIT_REACHED:t="${room.error.max_bots}";break;case _.a.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT:t="${room.error.bots.selected_tile_not_free}";break;case _.a.RSEME_BOT_NAME_NOT_ACCEPTED:t="${room.error.bots.name.not.accepted}";break;default:return}this._notificationService.alert(t,n)}onRoomSessionEvent(e){if(e)switch(e.type){case b.a.CREATED:return this._ngZone.run(()=>{this._landingViewVisible=!1}),void r.a.instance.roomSessionManager.startSession(e.session);case b.a.STARTED:case b.a.ROOM_DATA:return;case b.a.ENDED:return this.roomComponent&&this.roomComponent.endRoom(),void this._ngZone.run(()=>{this._landingViewVisible=e.openLandingView});default:return void(this.roomComponent&&this.roomComponent.processEvent(e))}}linkReceived(e){const t=e.split("/");if(!(t.length<2))switch(t[1]){case"open":if(t.length>2)switch(t[2]){case"credits":break;default:I.a.openHabblet(t[2])}return}}get eventUrlPrefix(){return"habblet"}get landingViewVisible(){return this._landingViewVisible}get avatarEditorVisible(){return this._settingsService.avatarEditorVisible}get catalogVisible(){return this._settingsService.catalogVisible}get navigatorVisible(){return this._settingsService.navigatorVisible}get inventoryVisible(){return this._settingsService.inventoryVisible}get friendListVisible(){return this._settingsService.friendListVisible}get achievementsVisible(){return this._settingsService.achievementsVisible}get chatHistoryVisible(){return this._settingsService.chatHistoryVisible}get modToolVisible(){return r.a.instance.sessionDataManager.isModerator}get userSettingsVisible(){return this._settingsService.userSettingsVisible}}return e.\u0275fac=function(t){return new(t||e)(C.Yb(qt.a),C.Yb(Xt.a),C.Yb(C.H))},e.\u0275cmp=C.Sb({type:e,selectors:[["nitro-main-component"]],viewQuery:function(e,t){if(1&e&&C.cd(Qt,1),2&e){let e;C.Hc(e=C.oc())&&(t.roomComponent=e.first)}},decls:24,vars:12,consts:[[1,"nitro-main-component"],[1,"nitro-right-side"],[1,"d-flex","flex-column"],[3,"visible"],[4,"ngIf"],[3,"isInRoom"]],template:function(e,t){1&e&&(C.dc(0,"div",0),C.Zb(1,"nitro-alert-center-component"),C.dc(2,"div",1),C.dc(3,"div",2),C.Zb(4,"nitro-purse-main-component"),C.Zb(5,"nitro-group-room-info-component"),C.Zb(6,"nitro-notification-center-component"),C.cc(),C.cc(),C.Zb(7,"nitro-achievements-main-component",3),C.Zb(8,"nitro-call-for-help-main-component"),C.Zb(9,"nitro-pedia-main-component"),C.Zb(10,"nitro-avatar-editor-main-component",3),C.Uc(11,ld,1,0,"nitro-hotelview-component",4),C.Zb(12,"nitro-toolbar-component",5),C.Zb(13,"nitro-friendlist-main-component",3),C.Zb(14,"nitro-catalog-main-component",3),C.Zb(15,"nitro-navigator-main-component",3),C.Zb(16,"nitro-inventory-main-component",3),C.Zb(17,"nitro-user-profile-component"),C.Zb(18,"nitro-chat-history-component",3),C.Zb(19,"nitro-user-settings-component",3),C.Zb(20,"nitro-wired-main-component"),C.Zb(21,"nitro-group-main-component"),C.Zb(22,"nitro-mod-tool-main-component",3),C.Zb(23,"nitro-room-component"),C.cc()),2&e&&(C.Kb(2),C.yc("@inOutAnimation",void 0),C.Kb(5),C.yc("visible",t.achievementsVisible),C.Kb(3),C.yc("visible",t.avatarEditorVisible),C.Kb(1),C.yc("ngIf",t.landingViewVisible),C.Kb(1),C.yc("isInRoom",!t.landingViewVisible),C.Kb(1),C.yc("visible",t.friendListVisible),C.Kb(1),C.yc("visible",t.catalogVisible),C.Kb(1),C.yc("visible",t.navigatorVisible),C.Kb(1),C.yc("visible",t.inventoryVisible),C.Kb(2),C.yc("visible",t.chatHistoryVisible),C.Kb(1),C.yc("visible",t.userSettingsVisible),C.Kb(3),C.yc("visible",t.modToolVisible))},directives:[no,uo,vo,xo,ta,ia,aa,la.a,dn.n,Da,La.a,ka.a,Pa.a,Na.a,ml,wl,Ml,Ul.a,rd,sd.a,Qt,ad],encapsulation:2,data:{animation:[Object(i.j)("inOutAnimation",[Object(i.i)(":enter",[Object(i.h)({top:"-100%"}),Object(i.e)("1s ease-out",Object(i.h)({top:0}))])])]}}),e})()},Ifn1:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("xPcM"),r=n("vLqR"),s=n("fXoL");function c(e,t){if(1&e){const e=s.ec();s.dc(0,"div",16),s.dc(1,"button",17),s.nc("click",function(){return s.Lc(e),s.qc().decreaseLimit()}),s.Zb(2,"i",18),s.cc(),s.dc(3,"ngx-slider",19),s.nc("valueChange",function(t){return s.Lc(e),s.qc().rewardsLimit=t}),s.cc(),s.dc(4,"button",17),s.nc("click",function(){return s.Lc(e),s.qc().increaseLimit()}),s.Zb(5,"i",20),s.cc(),s.cc()}if(2&e){const e=s.qc();s.Kb(3),s.yc("options",e.limitSliderOptions)("value",e.rewardsLimit)}}function o(e,t){if(1&e){const e=s.ec();s.dc(0,"div",21),s.dc(1,"label"),s.Wc(2,"Interval value"),s.cc(),s.dc(3,"input",22),s.nc("ngModelChange",function(t){return s.Lc(e),s.qc().limitationInterval=t}),s.cc(),s.cc()}if(2&e){const e=s.qc();s.Kb(3),s.yc("ngModel",e.limitationInterval)}}function a(e,t){1&e&&(s.dc(0,"td"),s.dc(1,"small"),s.Wc(2,"Probability"),s.cc(),s.cc())}function l(e,t){if(1&e){const e=s.ec();s.dc(0,"td"),s.dc(1,"input",22),s.nc("ngModelChange",function(t){s.Lc(e);const n=s.qc().index;return s.qc().rewardRows[n].probability=t}),s.cc(),s.cc()}if(2&e){const e=s.qc().index,t=s.qc();s.Kb(1),s.yc("ngModel",t.rewardRows[e].probability)}}function d(e,t){if(1&e){const e=s.ec();s.dc(0,"tr"),s.dc(1,"td"),s.dc(2,"input",23),s.nc("ngModelChange",function(n){s.Lc(e);const i=t.index;return s.qc().rewardRows[i].badge=n}),s.cc(),s.cc(),s.dc(3,"td"),s.dc(4,"input",22),s.nc("ngModelChange",function(n){s.Lc(e);const i=t.index;return s.qc().rewardRows[i].itemCode=n}),s.cc(),s.cc(),s.Uc(5,l,2,1,"td",12),s.cc()}if(2&e){const e=t.index,n=s.qc();s.Kb(2),s.yc("ngModel",n.rewardRows[e].badge),s.Kb(2),s.yc("ngModel",n.rewardRows[e].itemCode),s.Kb(1),s.yc("ngIf",0==n.uniqueRewards)}}let u=(()=>{class e extends r.a{constructor(){super(...arguments),this.SETTING_ONCE="0",this.SETTING_N_MINS="3",this.SETTING_N_HOURS="2",this.SETTING_N_DAYS="1",this.limitationInterval="1",this.uniqueRewards=!1,this.rewardRows=[]}get code(){return e.CODE}onEditStart(e){if(this.rewardTime=(e.intData.length>0?e.intData[0]:0).toString(),this.uniqueRewards=e.intData.length>1&&1==e.intData[1],this.rewardsLimit=e.intData.length>2?e.intData[2]:0,this.limitationInterval=e.intData.length>3?e.intData[3].toString():"",this.limitEnabled=this.limitationInterval.length>0,e.stringData.length>0&&e.stringData.includes(";")&&e.stringData.split(";").forEach(e=>{if(e.length>0&&e.includes(",")){const t=e.split(",");3==t.length&&this.rewardRows.push({badge:"0"==t[0],itemCode:t[1],probability:t[2]})}}),this.rewardRows.length<4)for(let t=this.rewardRows.length;t<4;t++)this.rewardRows.push({badge:!1,itemCode:"",probability:""});super.onEditStart(e)}readIntegerParamsFromForm(){return[Number.parseInt(this.rewardTime),this.uniqueRewards?1:0,this.rewardsLimit,Number.parseInt(this.limitationInterval)]}readStringParamFromForm(){let e="";for(let t=0;t<this.rewardRows.length;t++){const n=this.rewardRows[t];if(""==n.itemCode)continue;const i=n.probability.toString();e=e+(""==e?"":";")+[n.badge?0:1,n.itemCode,i.length>0?i:0].join(",")}return e}decreaseLimit(){this.rewardsLimit-=1,this.rewardsLimit<e.LIMIT_MINIMUM_VALUE&&(this.rewardsLimit=e.LIMIT_MINIMUM_VALUE)}increaseLimit(){this.rewardsLimit+=1,this.rewardsLimit>e.LIMIT_MAXIMUM_VALUE&&(this.rewardsLimit=e.LIMIT_MAXIMUM_VALUE)}increaseRewardsCount(){this.rewardRows.push({badge:!1,itemCode:"",probability:""})}get limitSliderOptions(){return{floor:e.LIMIT_MINIMUM_VALUE,ceil:e.LIMIT_MAXIMUM_VALUE,step:e.LIMIT_STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}get hasIntervalValue(){return this.rewardTime==this.SETTING_N_DAYS||this.rewardTime==this.SETTING_N_HOURS||this.rewardTime==this.SETTING_N_MINS}validate(){let e=0;if(this.limitationInterval.trim().length>0&&isNaN(Number.parseInt(this.limitationInterval)))return"The interval value has to be a number.";for(let t=0;t<this.rewardRows.length;t++){const n=this.rewardRows[t];if(0!=n.itemCode.trim().length||0!=n.probability.trim().length){if(n.itemCode.includes(","))return"Product/badge codes must not contain ',' characters.";if(n.itemCode.includes(";"))return"Product/badge codes must not contain ';' characters.";if(n.itemCode.length>100)return"Product/badge codes cannot contain more than 100 characters.";if(""==n.itemCode)return"Remember to define product/badge codes for all rewards (fill all fields or leave all fields empty).";if(!this.uniqueRewards){if(""==n.probability)return"Remember to define probabilities for all rewards (fill all fields or leave all fields empty).";const t=Number.parseInt(n.probability);if(isNaN(t))return"Make sure all probabilities are numbers.";if(t<1||t>100)return"Make sure all probabilities are numbers between 1 and 100.";e+=t}}}return e>100?`The sum of probabilities cannot exceed 100. You now have ${e}.`:null}}return e.LIMIT_MINIMUM_VALUE=1,e.LIMIT_MAXIMUM_VALUE=1e3,e.LIMIT_STEPPER_VALUE=1,e.CODE=i.a.GIVE_REWARD,e.\u0275fac=function(t){return h(t||e)},e.\u0275cmp=s.Sb({type:e,selectors:[["ng-component"]],features:[s.Hb],decls:40,vars:23,consts:[[3,"delay","delayChange"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["class","d-flex align-items-center justify-content-center my-2 custom-slider mb-2",4,"ngIf"],[1,"form-group"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"value","selected"],["class","form-group mb-2",4,"ngIf"],[1,"w-100","text-center","mb-2"],[1,"form-row","mb-2"],[2,"min-height","200px","max-height","200px"],[4,"ngIf"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary","btn-sm","mb-2",3,"click"],[1,"fas","fa-plus"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider","mb-2"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","limit",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"],[1,"form-group","mb-2"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","checkbox",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(s.dc(0,"nitro-wired-action-base-component",0),s.nc("delayChange",function(e){return t.delay=e}),s.dc(1,"div",1),s.dc(2,"input",2),s.nc("ngModelChange",function(e){return t.limitEnabled=e}),s.cc(),s.dc(3,"label",3),s.Wc(4),s.rc(5,"translate"),s.cc(),s.cc(),s.Uc(6,c,6,2,"div",4),s.dc(7,"div",5),s.dc(8,"label"),s.Wc(9,"How often can a user be rewarded"),s.cc(),s.dc(10,"select",6),s.nc("ngModelChange",function(e){return t.rewardTime=e}),s.dc(11,"option",7),s.Wc(12,"Once"),s.cc(),s.dc(13,"option",7),s.Wc(14,"1/n minutes"),s.cc(),s.dc(15,"option",7),s.Wc(16,"1/n hours"),s.cc(),s.dc(17,"option",7),s.Wc(18,"1/n days"),s.cc(),s.cc(),s.cc(),s.Uc(19,o,4,1,"div",8),s.dc(20,"div",1),s.dc(21,"input",2),s.nc("ngModelChange",function(e){return t.uniqueRewards=e}),s.cc(),s.dc(22,"label",3),s.Wc(23,"Unique Rewards"),s.cc(),s.cc(),s.dc(24,"p",9),s.Wc(25,"If checked each reward will be given once to each user. This will disable the probabilities option."),s.cc(),s.dc(26,"div",10),s.dc(27,"perfect-scrollbar",11),s.dc(28,"table"),s.dc(29,"tr"),s.dc(30,"td"),s.dc(31,"small"),s.Wc(32,"Badge"),s.cc(),s.cc(),s.dc(33,"td"),s.dc(34,"small"),s.Wc(35,"Item code"),s.cc(),s.cc(),s.Uc(36,a,3,0,"td",12),s.cc(),s.Uc(37,d,6,3,"tr",13),s.cc(),s.cc(),s.cc(),s.dc(38,"button",14),s.nc("click",function(){return t.increaseRewardsCount()}),s.Zb(39,"i",15),s.cc(),s.cc()),2&e&&(s.yc("delay",t.delay),s.Kb(2),s.yc("ngModel",t.limitEnabled),s.Kb(2),s.Xc(s.uc(5,19,"wiredfurni.params.prizelimit","amount",t.rewardsLimit>0?t.rewardsLimit:"")),s.Kb(2),s.yc("ngIf",t.limitEnabled),s.Kb(4),s.Qb("mb-2",!t.hasIntervalValue),s.yc("ngModel",t.rewardTime),s.Kb(1),s.yc("value",t.SETTING_ONCE)("selected",t.rewardTime==t.SETTING_ONCE),s.Kb(2),s.yc("value",t.SETTING_N_MINS)("selected",t.rewardTime==t.SETTING_N_MINS),s.Kb(2),s.yc("value",t.SETTING_N_HOURS)("selected",t.rewardTime==t.SETTING_N_HOURS),s.Kb(2),s.yc("value",t.SETTING_N_DAYS)("selected",t.rewardTime==t.SETTING_N_DAYS),s.Kb(2),s.yc("ngIf",t.hasIntervalValue),s.Kb(2),s.yc("ngModel",t.uniqueRewards),s.Kb(15),s.yc("ngIf",0==t.uniqueRewards),s.Kb(1),s.yc("ngForOf",t.rewardRows))},encapsulation:2}),e})();const h=s.fc(u)},Jh8m:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("xPcM"),s=n("vLqR"),c=n("fXoL");let o=(()=>{class e extends s.a{get code(){return e.CODE}onEditStart(e){this.botName=e.stringData,super.onEditStart(e)}readStringParamFromForm(){return this.botName}get hasSpecialInputs(){return!0}get requiresFurni(){return i.a._Str_4873}}return e.CODE=r.a.BOT_MOVE,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:6,vars:5,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.dc(0,"nitro-wired-action-base-component",0),c.nc("delayChange",function(e){return t.delay=e}),c.dc(1,"div",1),c.dc(2,"label"),c.Wc(3),c.rc(4,"translate"),c.cc(),c.dc(5,"input",2),c.nc("ngModelChange",function(e){return t.botName=e}),c.cc(),c.cc(),c.cc()),2&e&&(c.yc("delay",t.delay),c.Kb(3),c.Xc(c.sc(4,3,"wiredfurni.params.bot.name")),c.Kb(2),c.yc("ngModel",t.botName))},encapsulation:2}),e})();const a=c.fc(o)},KeNc:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n("kWz/"),r=n("zl5l"),s=n("DU1q"),c=n("JeyI"),o=n("7bZ9"),a=n("bwAN"),l=n("fXoL");let d=(()=>{class e{constructor(e){this._ngZone=e,this._isReady=!1,this._messages=[],this._currencies=new Map,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),this._messages=[new i.a(this.onUserCreditsEvent.bind(this)),new r.a(this.onUserCurrencyEvent.bind(this)),new s.a(this.onUserCurrencyUpdateEvent.bind(this)),new c.a(this.onUserSubscriptionEvent.bind(this))];for(const e of this._messages)a.a.instance.communication.registerMessageEvent(e)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(this._messages&&this._messages.length){for(const e of this._messages)a.a.instance.communication.removeMessageEvent(e);this._messages=[]}})}requestUpdate(){a.a.instance.communication.connection.send(new o.a)}onUserCreditsEvent(e){if(!e)return;const t=e.getParser();this._isReady=!0,this._ngZone.run(()=>this.setCurrency(-1,parseFloat(t.credits)))}onUserCurrencyEvent(e){if(!e)return;const t=e.getParser();this._ngZone.run(()=>{for(const[e,n]of t.currencies)this.setCurrency(e,n)})}onUserCurrencyUpdateEvent(e){if(!e)return;const t=e.getParser();this._ngZone.run(()=>this.setCurrency(t.type,t.amount))}onUserSubscriptionEvent(e){if(!e)return;const t=e.getParser();if(t)switch(t.name){case"habbo_club":return void(this._habboClubSubscription=t);default:return}}setCurrency(e,t){this._currencies.set(e,t)}get currencies(){return this._currencies}get visibleCurrencies(){return a.a.instance.getConfiguration("system.currency.types",[])}get hcSub(){return this._habboClubSubscription}get isReady(){return this._isReady}}return e.\u0275fac=function(t){return new(t||e)(l.kc(l.H))},e.\u0275prov=l.Ub({token:e,factory:e.\u0275fac}),e})()},L0LC:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("fXoL");let r=(()=>{class e{transform(e){const t=e.toString().split("");let n="";for(let i=0;i<t.length;i++)n=n+'<i class="unique-number n-'+t[i]+'"></i>';return n}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Xb({name:"uniqueNumber",type:e,pure:!0}),e})()},LFPO:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("wDsT"),r=n("7deb"),s=n("fXoL");let c=(()=>{class e extends i.a{constructor(){super(...arguments),this.score=0}get code(){return e.CODE}onEditStart(e){this.score=e.intData[0]||0}readIntegerParamsFromForm(){return[this.score]}decrease(){this.score-=1,this.score<e.MINIMUM_VALUE&&(this.score=e.MINIMUM_VALUE)}increase(){this.score+=1,this.score>e.MAXIMUM_VALUE&&(this.score=e.MAXIMUM_VALUE)}get hasSpecialInputs(){return!0}get sliderOptions(){return{floor:e.MINIMUM_VALUE,ceil:e.MAXIMUM_VALUE,step:e.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return e.MINIMUM_VALUE=1,e.MAXIMUM_VALUE=1e3,e.STEPPER_VALUE=1,e.CODE=r.a.SCORE_ACHIEVED,e.\u0275fac=function(t){return o(t||e)},e.\u0275cmp=s.Sb({type:e,selectors:[["ng-component"]],features:[s.Hb],decls:10,vars:7,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","time",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(e,t){1&e&&(s.dc(0,"nitro-wired-base-component"),s.dc(1,"p",0),s.Wc(2),s.rc(3,"translate"),s.cc(),s.dc(4,"div",1),s.dc(5,"button",2),s.nc("click",function(){return t.decrease()}),s.Zb(6,"i",3),s.cc(),s.dc(7,"ngx-slider",4),s.nc("valueChange",function(e){return t.score=e}),s.cc(),s.dc(8,"button",2),s.nc("click",function(){return t.increase()}),s.Zb(9,"i",5),s.cc(),s.cc(),s.cc()),2&e&&(s.Kb(2),s.Xc(s.uc(3,3,"wiredfurni.params.setscore","points",t.score)),s.Kb(5),s.yc("options",t.sliderOptions)("value",t.score))},encapsulation:2}),e})();const o=s.fc(c)},M0E0:function(e,t,n){"use strict";n.d(t,"a",function(){return i});let i=(()=>{class e{}return e.CALL_FOR_HELP="call_for_help",e.CATALOG_PURCHASE="catalog_purchase",e.CATALOG_DUCKETS="catalog_duckets",e.MESSAGE_SENT="console_message_sent",e.MESSAGE_RECEIVED="console_new_message",e.GUIDE_INVITATION="guide_received_invitation",e.GUIDE_REQUEST="guide_help_requested",e.CAMERA_SHUTTER="camera_shutter",e})()},M1bJ:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("fXoL"),r=n("XB1t");let s=(()=>{class e{constructor(e){this._participant=e,this._chats=[],this._lastUpdated=new Date,this._unread=!1,this._emitter=new i.r}insertChat(t,n,i=0,s=null,c=0){const o=new r.a(t,n,i,s,c);return this._chats.push(o),this._lastUpdated=new Date,this._unread=!0,this._emitter.emit(e.MESSAGE_RECEIVED),o}setRead(){this._unread=!1}get participant(){return this._participant}get chats(){return this._chats}get lastUpdated(){return this._lastUpdated}get unread(){return this._unread}get emitter(){return this._emitter}}return e.MESSAGE_RECEIVED="MT_MESSAGE_RECEIVED",e})()},MIuP:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("bwAN"),r=n("xPcM"),s=n("vLqR"),c=n("fXoL");let o=(()=>{class e extends s.a{get code(){return e.CODE}get hasSpecialInputs(){return!0}readStringParamFromForm(){return this.message}onEditStart(e){this.message=e.stringData,super.onEditStart(e)}validate(){return this.message.length>100?i.a.instance.localization.getValue("wiredfurni.chatmsgtoolong",!1):null}}return e.CODE=r.a.CHAT,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:6,vars:5,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.dc(0,"nitro-wired-action-base-component",0),c.nc("delayChange",function(e){return t.delay=e}),c.dc(1,"div",1),c.dc(2,"label"),c.Wc(3),c.rc(4,"translate"),c.cc(),c.dc(5,"input",2),c.nc("ngModelChange",function(e){return t.message=e}),c.cc(),c.cc(),c.cc()),2&e&&(c.yc("delay",t.delay),c.Kb(3),c.Xc(c.sc(4,3,"wiredfurni.params.message")),c.Kb(2),c.yc("ngModel",t.message))},encapsulation:2}),e})();const a=c.fc(o)},Mdne:function(e,t,n){"use strict";n.d(t,"a",function(){return i});let i=(()=>{class e{}return e.DEFAULT=1,e._Str_3639=2,e._Str_3683=3,e._Str_3432=4,e._Str_12351=5,e._Str_5186=6,e._Str_21911=7,e._Str_9125=8,e._Str_5922=9,e._Str_18231=10,e._Str_4255=11,e._Str_19933=12,e._Str_7696=13,e._Str_7297=14,e._Str_7954=15,e._Str_6096=16,e._Str_12454=17,e._Str_19144=18,e.MONSTERPLANT_SEED=19,e._Str_6915=20,e._Str_8726=21,e._Str_9449=22,e._Str_12534=23,e})()},"N1S/":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n("Q8A/"),r=n("8RTS"),s=n("usDR"),c=n("bwAN"),o=n("fXoL"),a=n("l1qq"),l=n("WnqX");let d=(()=>{class e{constructor(e,t,n){this._notificationService=e,this._settingsService=t,this._ngZone=n,this._component=null,this._wardrobeComponent=null,this._messages=[],this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new i.a(this.onUserWardrobePageEvent.bind(this))];for(const e of this._messages)c.a.instance.communication.registerMessageEvent(e)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const e of this._messages)c.a.instance.communication.removeMessageEvent(e);this._messages=[]})}onUserWardrobePageEvent(e){if(!this._wardrobeComponent)return;if(!e)return;const t=e.getParser();t&&t.looks.forEach((e,t)=>{this._ngZone.run(()=>{this._wardrobeComponent.setLook(t,e[0],e[1])})})}loadOwnAvatarInEditor(){if(!this._component)return;const e=c.a.instance.sessionDataManager;this._component.loadAvatarInEditor(e.figure,e.gender,e.clubLevel)}loadAvatarInEditor(e,t){this._component&&this._component.loadAvatarInEditor(e,t,c.a.instance.sessionDataManager.clubLevel)}requestWardrobePage(e){c.a.instance.communication.connection.send(new r.a(e))}setWardrobeSlot(e){c.a.instance.communication.connection.send(new s.a(e,this.currentEditorLook,this.currentEditorGender))}get component(){return this._component}set component(e){this._component=e}set wardrobeComponent(e){this._wardrobeComponent=e}get currentEditorLook(){return this._component.figureData.view.figureString}get currentEditorGender(){return this._component.figureData.gender}}return e.\u0275fac=function(t){return new(t||e)(o.kc(a.a),o.kc(l.a),o.kc(o.H))},e.\u0275prov=o.Ub({token:e,factory:e.\u0275fac}),e})()},NWZ3:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("wDsT"),r=n("7deb"),s=n("fXoL");let c=(()=>{class e extends i.a{get code(){return e.CODE}}return e.CODE=r.a.GAME_STARTS,e.\u0275fac=function(t){return o(t||e)},e.\u0275cmp=s.Sb({type:e,selectors:[["ng-component"]],features:[s.Hb],decls:1,vars:0,template:function(e,t){1&e&&s.Zb(0,"nitro-wired-base-component")},encapsulation:2}),e})();const o=s.fc(c)},OD84:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("hOKa"),r=n("vjx4"),s=n("Ovag"),c=n("0gET"),o=n("bwAN");class a{constructor(e){this._name=e,this._achievements=[]}get name(){return this._name}set name(e){this._name=e}get achievements(){return this._achievements}set achievements(e){this._achievements=e}}var l=n("fXoL"),d=n("WnqX");let u=(()=>{class e{constructor(e,t){this._settingsService=e,this._ngZone=t,this._messages=[],this._categories=[],this._selectedCategory=null,this._achievementScore=0,this._isInitalized=!1,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new r.a(this.onAchievementsMessageEvent.bind(this)),new s.a(this.onAchievementsScoreEvent.bind(this)),new i.a(this.onAchievementEvent.bind(this))];for(const e of this._messages)o.a.instance.communication.registerMessageEvent(e)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const e of this._messages)o.a.instance.communication.removeMessageEvent(e);this._messages=[]})}onAchievementsScoreEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>this._achievementScore=t.score)}onAchievementsMessageEvent(e){if(!e)return;const t=e.getParser();if(!t)return;const n=[];for(const i of t.achievements){if(!i)continue;let e=null;for(const t of n)if(t&&t.name===i.category){e=t;break}e||(e=new a(i.category),n.push(e)),e.achievements.push(i)}this._ngZone.run(()=>{this._categories=n,this._selectedCategory=this._categories[0],this._isInitalized=!0})}onAchievementEvent(e){if(!e)return;const t=e.getParser();if(!t)return;const n=t.achievement;n&&this._ngZone.run(()=>{for(const e of this._categories){if(!e||e.name!==n.category)continue;let t=!1;for(const i of e.achievements)if(i&&i.achievementId===n.achievementId){t=!0,i.progress!==n.progress&&(i.reset(n),this.isIgnoredAchievement(i)||this._selectedCategory!==e&&i.unseen++);break}if(t)break}})}isIgnoredAchievement(e){if(!e)return!1;const t=o.a.instance.getConfiguration("achievements.unseen.ignored"),n=e.badgeId.replace(/[0-9]/g,"");return t.indexOf(n)>=0}loadAchievements(){o.a.instance.communication.connection.send(new c.a)}get categories(){return this._categories}get selectedCategory(){return this._selectedCategory}set selectedCategory(e){this._selectedCategory=e}get achievementScore(){return this._achievementScore}get isInitalized(){return this._isInitalized}get unseenCount(){let e=0;for(const t of this._categories)if(t)for(const n of t.achievements)n&&(e+=n.unseen);return e}}return e.\u0275fac=function(t){return new(t||e)(l.kc(d.a),l.kc(l.H))},e.\u0275prov=l.Ub({token:e,factory:e.\u0275fac}),e})()},OMsP:function(e,t,n){"use strict";n.d(t,"a",function(){return D});var i=n("wYOr"),r=n("/GXw"),s=n("Cchi"),c=n("Lb+T"),o=n("Zmf8"),a=n("bwAN"),l=n("0ldw");class d{constructor(e,t,n=!1){this._model=e,this._partColor=t,this._isSelected=!1,this._isDisabledForWearing=n,this._Str_22595()}dispose(){this._model=null,this._partColor=null}get isSelected(){return this._isSelected}set isSelected(e){this._isSelected=e}_Str_22595(){this._isHC=!!this._partColor&&this._partColor.clubLevel>0}get _Str_3420(){return this._partColor}get color(){return l.a.int2rgb(this._partColor._Str_915)}get _Str_14863(){return this._isDisabledForWearing}get isHC(){return this._isHC}}var u=n("ag9T"),h=n("vmGm"),g=n("IqKQ");let m=(()=>{class e{constructor(e,t,n,i=!0,r=!1){if(this._renderManager=a.a.instance.avatar,this._model=e,this._partSet=t,this._colors=n,this._useColors=i,this._isDisabledForWearing=r,this._thumbContainer=null,this._imageUrl=null,this._maxColorIndex=0,this._isValidFigure=!1,this._isSelected=!1,this._isHC=!1,this._isSellable=!1,this._isClear=!1,this._disposed=!1,this._isInitalized=!1,t){const e=t._Str_806;for(const t of e)this._maxColorIndex=Math.max(this._maxColorIndex,t._Str_827)}}init(){this._isInitalized||(this._isInitalized=!0,this.update())}dispose(){this._disposed||(this._renderManager=null,this._model=null,this._partSet=null,this._colors=null,this._imageUrl=null,this._disposed=!0,this._isInitalized=!1,this._thumbContainer&&(this._thumbContainer.destroy(),this._thumbContainer=null))}update(){this.updateThumbVisualization()}analyzeFigure(){if(!(this._renderManager&&this._model&&this.partSet&&this.partSet._Str_806&&this.partSet._Str_806.length))return!1;const e=this._renderManager.createFigureContainer(this.partSet.type+"-"+this.partSet.id);return this._renderManager.isFigureContainerReady(e)?(this._isValidFigure=!0,!0):(this._renderManager.downloadAvatarFigure(e,this),!1)}renderThumb(){if(!this._renderManager||!this.partSet||!this._model)return null;if(!this._isValidFigure&&!this.analyzeFigure())return null;const t=this.partSet._Str_806.concat().sort(this.sortByDrawOrder),n=new g.Container;for(const i of t){if(!i)continue;let t=null,r=0,s=!1;for(;!s&&r<e.THUMB_DIRECTIONS.length;)t=this._renderManager.getAssetByName(c.a.H+"_"+c.a.STD+"_"+i.type+"_"+i.id+"_"+e.THUMB_DIRECTIONS[r]+"_"+c.a._Str_2028),t&&t.texture?s=!0:r++;if(!s)continue;const o=t.offsetX,a=t.offsetY;let l=null;if(this._useColors&&i._Str_827>0){const e=this._colors[i._Str_827-1];e&&(l=e)}const d=new g.Sprite(t.texture);d.position.set(o,a),l&&(d.tint=l._Str_915),n.addChild(d)}return n}updateThumbVisualization(){if(!this._isInitalized)return;let e=this._thumbContainer;e||(e=this.renderThumb()),e&&(this._partSet?(this._isHC=this._partSet.clubLevel>0,this._isSellable=this._partSet._Str_651):(this._isHC=!1,this._isSellable=!1),this._isDisabledForWearing&&this.setAlpha(e,.2),this._imageUrl=h.a.generateImageUrl(e))}setAlpha(e,t){return e.alpha=t,e}sortByDrawOrder(t,n){const i=e.DRAW_ORDER.indexOf(t.type),r=e.DRAW_ORDER.indexOf(n.type);return i<r?-1:i>r?1:t.index<n.index?-1:t.index>n.index?1:0}resetFigure(e){this.analyzeFigure()&&this.update()}get disposed(){return this._disposed}get id(){return this._partSet?this._partSet.id:-1}get partSet(){return this._partSet}set colors(e){this._colors=e,this.update()}get isDisabledForWearing(){return this._isDisabledForWearing}set iconImage(e){this._thumbContainer=e,this.update()}get imageUrl(){return this._imageUrl}get colorLayerCount(){return this._maxColorIndex}get isSelected(){return this._isSelected}set isSelected(e){this._isSelected=e}get isHC(){return this._isHC}get isSellable(){return this._isSellable}get isClear(){return this._isClear}set isClear(e){this._isClear=e}}return e.THUMB_DIRECTIONS=[2,6,0,4,3,1],e.DRAW_ORDER=[u.a.LEFT_HAND_ITEM,u.a.LEFT_HAND,u.a.LEFT_SLEEVE,u.a.LEFT_COAT_SLEEVE,u.a.BODY,u.a.SHOES,u.a.LEGS,u.a.CHEST,u.a.CHEST_ACCESSORY,u.a.COAT_CHEST,u.a.CHEST_PRINT,u.a.WAIST_ACCESSORY,u.a.RIGHT_HAND,u.a.RIGHT_SLEEVE,u.a.RIGHT_COAT_SLEEVE,u.a.HEAD,u.a.FACE,u.a.EYES,u.a.HAIR,u.a.HAIR_BIG,u.a.FACE_ACCESSORY,u.a.EYE_ACCESSORY,u.a.HEAD_ACCESSORY,u.a.HEAD_ACCESSORY_EXTRA,u.a.RIGHT_HAND_ITEM],e})();class f{constructor(e,t,n){this.MAX_PALETTES=2,this._selectedPartIndex=-1,this._name=e,this._parts=t,this._palettes=n,this._selectedPartIndex=-1}static defaultColorId(e,t){if(!e||!e.length)return-1;let n=0;for(;n<e.length;){const i=e[n];if(i._Str_3420&&i._Str_3420.clubLevel<=t)return i._Str_3420.id;n++}return-1}init(){for(const e of this._parts)e&&e.init()}dispose(){if(this._parts){for(const e of this._parts)e.dispose();this._parts=null}if(this._palettes){for(const e of this._palettes)if(e)for(const t of e)t.dispose();this._palettes=null}this._selectedPartIndex=-1,this._paletteIndexes=null}selectPartId(e){if(!this._parts)return;let t=0;for(;t<this._parts.length;){if(this._parts[t].id===e)return void this.selectPartIndex(t);t++}}selectColorIds(e){if(!e||!this._palettes)return;this._paletteIndexes=new Array(e.length);let t=0;for(;t<this._palettes.length;){const n=this.getPalette(t);if(n){let i=0;if(e.length>t)i=e[t];else{const e=n[0];e&&e._Str_3420&&(i=e._Str_3420.id)}let r=0;for(;r<n.length;){const e=n[r];e._Str_3420.id===i?(this._paletteIndexes[t]=r,e.isSelected=!0):e.isSelected=!1,r++}}t++}this.updatePartColors()}selectPartIndex(e){if(!this._parts)return null;if(this._selectedPartIndex>=0&&this._parts.length>this._selectedPartIndex){const e=this._parts[this._selectedPartIndex];e&&(e.isSelected=!1)}if(this._parts.length>e){const t=this._parts[e];if(t)return t.isSelected=!0,this._selectedPartIndex=e,t}return null}selectColorIndex(e,t){const n=this.getPalette(t);if(!n)return null;if(n.length<=e)return null;this.deselectColorIndex(this._paletteIndexes[t],t),this._paletteIndexes[t]=e;const i=n[e];return i?(i.isSelected=!0,this.updatePartColors(),i):null}getCurrentColorIndex(e){return this._paletteIndexes[e]}deselectColorIndex(e,t){const n=this.getPalette(t);if(!n)return;if(n.length<=e)return;const i=n[e];i&&(i.isSelected=!1)}getSelectedColorIds(){if(!this._paletteIndexes||!this._paletteIndexes.length)return null;if(!this._palettes||!this._palettes.length)return null;const e=this._palettes[0];if(!e||!e.length)return null;const t=e[0];if(!t||!t._Str_3420)return null;const n=t._Str_3420.id,i=[];let r=0;for(;r<this._paletteIndexes.length;){const e=this._palettes[r];if(e&&!(e.length<=r))if(e.length>this._paletteIndexes[r]){const t=e[this._paletteIndexes[r]];i.push(t&&t._Str_3420?t._Str_3420.id:n)}else i.push(n);r++}const s=this.getCurrentPart();return s?i.slice(0,Math.max(s.colorLayerCount,1)):null}getSelectedColors(){const e=[];let t=0;for(;t<this._paletteIndexes.length;){const n=this.getSelectedColor(t);e.push(n?n._Str_3420:null),t++}return e}getSelectedColor(e){const t=this.getPalette(e);return!t||t.length<=this._paletteIndexes[e]?null:t[this._paletteIndexes[e]]}getSelectedColorId(e){const t=this.getSelectedColor(e);return t&&t._Str_3420?t._Str_3420.id:0}get parts(){return this._parts}getPalette(e){return!this._paletteIndexes||!this._palettes||this._palettes.length<=e?null:this._palettes[e]}getCurrentPart(){return this._parts[this._selectedPartIndex]}updatePartColors(){const e=this.getSelectedColors();for(const t of this._parts)t&&(t.colors=e)}hasClubSelectionsOverLevel(e){let t=!1;const n=this.getSelectedColors();if(n){let i=0;for(;i<n.length;){const r=n[i];r&&r.clubLevel>e&&(t=!0),i++}}let i=!1;const r=this.getCurrentPart();if(r&&r.partSet){const t=r.partSet;t&&t.clubLevel>e&&(i=!0)}return t||i}hasInvalidSelectedItems(e){const t=this.getCurrentPart();if(!t)return!1;const n=t.partSet;return n&&n._Str_651?!e.hasFigureSetId(n.id):void 0}stripClubItemsOverLevel(e){const t=this.getCurrentPart();if(t&&t.partSet&&t.partSet.clubLevel>e){const e=this.selectPartIndex(0);return e&&!e.partSet&&this.selectPartIndex(1),!0}return!1}stripClubColorsOverLevel(e){const t=[],n=this.getSelectedColors();let i=!1;const r=this.getPalette(0),s=f.defaultColorId(r,e);if(-1===s)return!1;let c=0;for(;c<n.length;){const r=n[c];r?r.clubLevel>e?(t.push(s),i=!0):t.push(r.id):(t.push(s),i=!0),c++}return i&&this.selectColorIds(t),i}get name(){return this._name}get selectedPartIndex(){return this._selectedPartIndex}}var p=n("MFnH"),_=n("rQ5G");class b{constructor(e){this._editor=e,this._isInitalized=!1,this._maxPaletteCount=0}dispose(){this._categories=null,this._editor=null,this._disposed=!0}get disposed(){return this._disposed}init(){this._categories||(this._categories=new i.a)}reset(){if(this._isInitalized=!1,this._categories)for(const e of this._categories.getValues())e&&e.dispose();this._categories=new i.a,this._viewer&&this._viewer.prepareModel()}setViewer(e){this._viewer=e}addCategory(e){let t=this._categories.getValue(e);t||(t=this._editor._Str_24037(this,e),t&&(this._categories.add(e,t),this.updateSelectionsFromFigure(e)))}updateSelectionsFromFigure(e){if(!this._categories||!this._editor||!this._editor.figureData)return;const t=this._categories.getValue(e);if(!t)return;const n=this._editor.figureData.getPartSetId(e);let i=this._editor.figureData.getColourIds(e);i||(i=[]),t.selectPartId(n),t.selectColorIds(i)}hasClubSelectionsOverLevel(e){if(!this._categories)return!1;for(const t of this._categories.getValues())if(t&&t.hasClubSelectionsOverLevel(e))return!0;return!1}hasInvalidSelectedItems(e){if(!this._categories)return!1;for(const t of this._categories.getValues())if(t&&t.hasInvalidSelectedItems(e))return!0;return!1}_Str_15298(e){if(!this._categories)return!1;let t=!1;for(const n of this._categories.getKeys()){const i=this._categories.getValue(n);if(!i)continue;let r=!1;if(i.stripClubItemsOverLevel(e)&&(r=!0),i.stripClubColorsOverLevel(e)&&(r=!0),r){const e=i.getCurrentPart();e&&this._editor&&this._editor.figureData&&i&&this._editor.figureData.savePartData(n,e.id,i.getSelectedColorIds(),!0),t=!0}}return t}_Str_8360(){if(!this._categories)return!1;for(const e of this._categories.getKeys())this._categories.getValue(e);return!1}selectPart(e,t){const n=this._categories.getValue(e);if(!n)return;const i=n.selectedPartIndex;n.selectPartIndex(t);const r=n.getCurrentPart();if(r){if(r.isDisabledForWearing)return n.selectPartIndex(i),void this._editor.openHabboClubAdWindow();this._maxPaletteCount=r.colorLayerCount,this._editor&&this._editor.figureData&&this._editor.figureData.savePartData(e,r.id,n.getSelectedColorIds(),!0)}}selectColor(e,t,n){const i=this._categories.getValue(e);if(!i)return;const r=i.getCurrentColorIndex(n);if(i.selectColorIndex(t,n),this._editor&&this._editor.figureData){if(i.getSelectedColor(n)._Str_14863)return i.selectColorIndex(r,n),void this._editor.openHabboClubAdWindow();this._editor.figureData.savePartSetColourId(e,i.getSelectedColorIds(),!0)}}get controller(){return this._editor}getCategoryData(e){return this._isInitalized||this.init(),this._categories?this._categories.getValue(e):null}get categories(){return this._categories}get canSetGender(){return!1}get maxPaletteCount(){return this._maxPaletteCount}set maxPaletteCount(e){this._maxPaletteCount=e}get name(){return null}}class v extends b{constructor(){super(...arguments),this._imageCallBackHandled=!1}init(){super.init(),this.addCategory(c.a.FACE),this._isInitalized=!0}selectColor(e,t,n){super.selectColor(e,t,n),this.updateSelectionsFromFigure(c.a.FACE)}updateSelectionsFromFigure(e){if(!this._categories||!this._editor||!this._editor.figureData)return;const t=this._categories.getValue(e);if(!t)return;const n=this._editor.figureData.getPartSetId(e);let i=this._editor.figureData.getColourIds(e);i||(i=[]),t.selectPartId(n),t.selectColorIds(i);for(const r of t.parts){const e=this.controller.figureData.getFigureStringWithFace(r.id),t=a.a.instance.avatar.createAvatarImage(e,p.a.LARGE,null,this),n=t.getImageAsSprite(_.a.HEAD);n&&(n.y=10,r.iconImage=n,setTimeout(()=>t.dispose(),0))}}resetFigure(e){this._imageCallBackHandled||(this._imageCallBackHandled=!0,this.updateSelectionsFromFigure(c.a.FACE))}get canSetGender(){return!0}get name(){return s.a.GENERIC}}class E extends b{init(){super.init(),this.addCategory(c.a.HR),this.addCategory(c.a.HA),this.addCategory(c.a.HE),this.addCategory(c.a.EA),this.addCategory(c.a.FA),this._isInitalized=!0}get name(){return s.a.HEAD}}class S extends b{init(){super.init(),this.addCategory(c.a.LG),this.addCategory(c.a.SH),this.addCategory(c.a.WA),this._isInitalized=!0}get name(){return s.a.LEGS}}class y extends b{init(){super.init(),this.addCategory(c.a.CH),this.addCategory(c.a.CHEST_PRINTS),this.addCategory(c.a.CC),this.addCategory(c.a.CHEST_ACCESSORIES),this._isInitalized=!0}get name(){return s.a.TORSO}}var I=n("fXoL"),w=n("cC5F"),C=n("WnqX"),R=n("N1S/");const T=function(e){return{active:e}};function O(e,t){if(1&e){const e=I.ec();I.dc(0,"button",13),I.nc("click",function(){I.Lc(e);const n=t.$implicit;return I.qc(2).selectCategory(n.name)}),I.Wc(1),I.rc(2,"translate"),I.cc()}if(2&e){const e=t.$implicit,n=I.qc(2);I.yc("ngClass",I.Cc(4,T,n.activeCategory===e)),I.Kb(1),I.Xc(I.sc(2,2,"avatareditor.category."+e.name))}}function M(e,t){if(1&e&&I.Zb(0,"div",14),2&e){const e=I.qc(2);I.yc("model",e.activeCategory)("gender",e.gender)}}function U(e,t){if(1&e){const e=I.ec();I.dc(0,"div",15),I.dc(1,"div",16),I.Zb(2,"div",17),I.Zb(3,"div",18),I.Zb(4,"div",19),I.dc(5,"div",20),I.dc(6,"i",21),I.nc("click",function(){I.Lc(e);const t=I.qc(2);return t.rotateAvatar(t.figureData.direction+1)}),I.cc(),I.dc(7,"i",22),I.nc("click",function(){I.Lc(e);const t=I.qc(2);return t.rotateAvatar(t.figureData.direction-1)}),I.cc(),I.cc(),I.cc(),I.dc(8,"div",23),I.dc(9,"button",24),I.nc("click",function(){return I.Lc(e),I.qc(2).resetFigure()}),I.Zb(10,"i",25),I.cc(),I.dc(11,"button",24),I.nc("click",function(){return I.Lc(e),I.qc(2).clearFigure()}),I.Zb(12,"i",26),I.cc(),I.cc(),I.dc(13,"button",27),I.nc("click",function(){return I.Lc(e),I.qc(2).saveFigure()}),I.Wc(14),I.rc(15,"translate"),I.cc(),I.cc()}if(2&e){const e=I.qc(2);I.Kb(4),I.yc("figure",e.figureData.view.figureString)("direction",e.figureData.direction)("scale",2),I.Kb(10),I.Xc(I.sc(15,4,"avatareditor.save"))}}function x(e,t){if(1&e&&I.Zb(0,"div",28),2&e){const e=I.qc(2);I.yc("figureData",e.figureData)}}function A(e,t){if(1&e){const e=I.ec();I.dc(0,"div",1),I.dc(1,"div",2),I.dc(2,"h6",3),I.Wc(3),I.rc(4,"translate"),I.cc(),I.dc(5,"button",4),I.nc("click",function(){return I.Lc(e),I.qc().hide()}),I.Zb(6,"i",5),I.cc(),I.cc(),I.dc(7,"div",6),I.dc(8,"div",7),I.dc(9,"div",8),I.Uc(10,O,3,6,"button",9),I.cc(),I.Uc(11,M,1,2,"div",10),I.cc(),I.Uc(12,U,16,6,"div",11),I.Uc(13,x,1,1,"div",12),I.cc(),I.cc()}if(2&e){const e=I.qc();I.Kb(3),I.Xc(I.sc(4,5,"avatareditor.title")),I.Kb(7),I.yc("ngForOf",e.categories.getValues()),I.Kb(1),I.yc("ngIf",e.activeCategory),I.Kb(1),I.yc("ngIf",e.figureData),I.Kb(1),I.yc("ngIf",e.figureData)}}let D=(()=>{class e{constructor(e,t,n){this._inventoryService=e,this._settingsService=t,this._avatarEditorService=n,this.visible=!1}ngOnInit(){this._avatarEditorService.component=this,this._figureStructureData=a.a.instance.avatar.structureData,this._categories=new i.a,this._figures=new Map,this._gender=c.a.M,this._clubMemberLevel=0,this._lastSavedFigure="",this._lastSavedGender=c.a.M;const t=new c.a,n=new c.a;t.loadAvatarData(e._Str_18590,c.a.M),n.loadAvatarData(e._Str_18820,c.a.F),this._figures.set(c.a.M,t),this._figures.set(c.a.F,n),this._categories.add(s.a.GENERIC,new v(this)),this._categories.add(s.a.HEAD,new E(this)),this._categories.add(s.a.TORSO,new y(this)),this._categories.add(s.a.LEGS,new S(this)),this.selectFirstCategory()}ngOnDestroy(){this._avatarEditorService.component=null}hide(){this._settingsService.hideAvatarEditor()}selectFirstCategory(){const e=this._categories.getWithIndex(0);e&&this.selectCategory(e.name)}selectCategory(e){if(!e)return;const t=this._categories.getValue(e);t&&(this._aciveCategory=t)}loadAvatarInEditor(e,t,n,i=!0){switch(t){case c.a.M:case"m":case"M":t=c.a.M;break;case c.a.F:case"f":case"F":t=c.a.F;break;default:t=c.a.M}let r=!1;this._clubMemberLevel=n;const s=this._figures.get(t);if(s){if(e!==s.getFigureString()&&(r=!0),t!==this._gender&&(this._gender=t,r=!0),s.loadAvatarData(e,t),r)for(const e of this._categories.getValues())e&&e.reset();i&&(this._lastSavedFigure=e,this._lastSavedGender=this._gender)}}_Str_24037(t,n){if(!t||!n)return null;const i=[],r=[];let s=0;for(;s<e._Str_6331;)r.push([]),s++;const o=this._Str_20100(n);if(!o)return null;const l=this._Str_783(o._Str_734);if(!l)return null;let u=this.figureData.getColourIds(n);u||(u=[]);const h=new Array(u.length),g=this._Str_24175;for(const a of l.colors.values())if(a.isSelectable&&(g||this.clubMemberLevel>=a.clubLevel)){let i=0;for(;i<e._Str_6331;){const e=new d(t,a,this.clubMemberLevel<a.clubLevel);r[i].push(e),i++}if(n!==c.a.FACE){let e=0;for(;e<u.length;)a.id===u[e]&&(h[e]=a),e++}}let p=0,_=[];if(g?(p=2,_=a.a.instance.avatar._Str_838(this.gender,p)):_=a.a.instance.avatar._Str_838(this.gender,this.clubMemberLevel),-1==_.indexOf(n)){const e=new m(t,null,null,!1);e.isClear=!0,i.push(e)}const b=n!==c.a.FACE,v=o._Str_710;let E=v.length-1;for(;E>=0;){const e=v.getWithIndex(E);let n=!1;if((e.gender===c.a.U||e.gender==this.gender)&&(n=!0),e._Str_608&&n&&(g||this.clubMemberLevel>=e.clubLevel)){const n=this.clubMemberLevel<e.clubLevel;let r=!0;if(e._Str_651&&(r=this._inventoryService&&this._inventoryService.hasFigureSetId(e.id)),r){const r=new m(t,e,h,b,n);i.push(r)}}E--}for(i.sort(this._Str_25757?this._Str_25189:this._Str_23935),s=0;s<e._Str_6331;)r[s].sort(this._Str_23625),s++;return new f(n,i,r)}openHabboClubAdWindow(){}_Str_20100(e){return this._figureStructureData?this._figureStructureData._Str_740(e):null}_Str_783(e){return this._figureStructureData?this._figureStructureData._Str_783(e):null}_Str_25189(e,t){const n=e.partSet?e.partSet.clubLevel:9999999999,i=t.partSet?t.partSet.clubLevel:9999999999,r=!!e.partSet&&e.partSet._Str_651,s=!!t.partSet&&t.partSet._Str_651;return r&&!s?1:s&&!r||n>i?-1:n<i?1:e.partSet.id>t.partSet.id?-1:e.partSet.id<t.partSet.id?1:0}_Str_23935(e,t){const n=e.partSet?e.partSet.clubLevel:-1,i=t.partSet?t.partSet.clubLevel:-1,r=!!e.partSet&&e.partSet._Str_651,s=!!t.partSet&&t.partSet._Str_651;return r&&!s?1:s&&!r||n<i?-1:n>i?1:e.partSet.id<t.partSet.id?-1:e.partSet.id>t.partSet.id?1:0}_Str_23625(e,t){const n=e._Str_3420?e._Str_3420.clubLevel:-1,i=t._Str_3420?t._Str_3420.clubLevel:-1;return n<i?-1:n>i?1:e._Str_3420.index<t._Str_3420.index?-1:e._Str_3420.index>t._Str_3420.index?1:0}rotateAvatar(e){let t=e;t<r.a.MIN_DIRECTION&&(t=r.a.MAX_DIRECTION+(t+1)),t>r.a.MAX_DIRECTION&&(t-=r.a.MAX_DIRECTION+1),this.figureData.direction=t}saveFigure(){const e=this.figureData;e&&(this._lastSavedFigure=e.getFigureString(),this._lastSavedGender=e.gender,a.a.instance.communication.connection.send(new o.a(e.gender,this._lastSavedFigure)),this.hide())}clearFigure(){const e=this.figureData;e&&this.loadAvatarInEditor(e.getFigureStringWithFace(0,!1),e.gender,this._clubMemberLevel,!1)}resetFigure(){this.loadAvatarInEditor(this._lastSavedFigure,this._gender,this._clubMemberLevel)}get _Str_25757(){return a.a.instance.getConfiguration("avatareditor.show.clubitems.first",!0)}get _Str_24175(){return a.a.instance.getConfiguration("avatareditor.show.clubitems.dimmed",!0)}get clubMemberLevel(){return this._clubMemberLevel?this._clubMemberLevel:a.a.instance.sessionDataManager.clubLevel}set clubMemberLevel(e){this._clubMemberLevel=e}get figureStructureData(){return this._figureStructureData}get figureData(){return this._figures.get(this._gender)}get gender(){return this._gender}set gender(e){if(this._gender!==e){switch(e){case c.a.M:case"m":case"M":e=c.a.M;break;case c.a.F:case"f":case"F":e=c.a.F;break;default:e=c.a.M}this._gender=e;for(const e of this._categories.getValues())e.reset();this.selectFirstCategory()}}get categories(){return this._categories}get activeCategory(){return this._aciveCategory}}return e._Str_18590="hr-100.hd-180-7.ch-215-66.lg-270-79.sh-305-62.ha-1002-70.wa-2007",e._Str_18820="hr-515-33.hd-600-1.ch-635-70.lg-716-66-62.sh-735-68",e._Str_6331=2,e.\u0275fac=function(t){return new(t||e)(I.Yb(w.a),I.Yb(C.a),I.Yb(R.a))},e.\u0275cmp=I.Sb({type:e,selectors:[["nitro-avatar-editor-main-component"]],inputs:{visible:"visible"},decls:1,vars:1,consts:[["class","nitro-avatar-editor card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-avatar-editor","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-3"],[1,"col","d-flex","flex-column"],[1,"btn-group"],["type","button","class","btn btn-secondary",3,"ngClass","click",4,"ngFor","ngForOf"],["class","d-flex flex-column","nitro-avatar-model-viewer-component","",3,"model","gender",4,"ngIf"],["class","col-4 d-flex flex-column",4,"ngIf"],["nitro-avatar-wardrobe-component","","class","col-12 nitro-avatar-wardrobe-component mt-1",3,"figureData",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"ngClass","click"],["nitro-avatar-model-viewer-component","",1,"d-flex","flex-column",3,"model","gender"],[1,"col-4","d-flex","flex-column"],[1,"d-flex","position-relative","flex-grow-1","justify-content-center"],[1,"avatar-spotlight","position-absolute"],[1,"avatar-shadow","position-absolute"],["nitro-avatar-image","",1,"d-flex","justify-content-center","position-absolute","w-100","h-100","avatar-container",3,"figure","direction","scale"],[1,"arrow-container"],[1,"icon","arrow-left-icon",3,"click"],[1,"icon","arrow-right-icon",3,"click"],[1,"btn-group","mb-1"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-undo"],[1,"fas","fa-trash"],["type","button",1,"btn","btn-sm","btn-success","mb-1",3,"click"],["nitro-avatar-wardrobe-component","",1,"col-12","nitro-avatar-wardrobe-component","mt-1",3,"figureData"]],template:function(e,t){1&e&&I.Uc(0,A,14,7,"div",0),2&e&&I.yc("ngIf",t.visible)},encapsulation:2}),e})()},PNXX:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("xPcM"),r=n("vLqR"),s=n("fXoL");let c=(()=>{class e extends r.a{get code(){return e.CODE}}return e.CODE=i.a.LEAVE_TEAM,e.\u0275fac=function(t){return o(t||e)},e.\u0275cmp=s.Sb({type:e,selectors:[["ng-component"]],features:[s.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(e,t){1&e&&(s.dc(0,"nitro-wired-action-base-component",0),s.nc("delayChange",function(e){return t.delay=e}),s.cc()),2&e&&s.yc("delay",t.delay)},encapsulation:2}),e})();const o=s.fc(c)},PVU2:function(e,t,n){"use strict";n.d(t,"a",function(){return P});var i=n("XzEk"),r=n("rjOb"),s=n("YRhl"),c=n("aLVs"),o=n("XDiC"),a=n("HuQ0"),l=n("AXSY"),d=n("ZCo3"),u=n("ekZn"),h=n("uQWJ"),g=n("gBDi"),m=n("uUI+"),f=n("EV8M"),p=n("qN6h"),_=n("F0yb"),b=n("+ciu"),v=n("VzEK"),E=n("5sHc"),S=n("GBA3"),y=n("uReE"),I=n("s1oy"),w=n("/pOP"),C=n("bwAN"),R=n("M0E0"),T=n("XB1t");class O{constructor(){this._id=-1,this._name=null,this._gender=0,this._online=!1,this._followingAllowed=!1,this._figure=null,this._categoryId=0,this._motto=null,this._realName=null,this._lastAccess=null,this._persistedMessageUser=!1,this._vipMember=!1,this._pocketHabboUser=!1,this._relationshipStatus=-1,this._unread=0}populate(e){return!!e&&(this._id=e.id,this._name=e.name,this._gender=e.gender,this._online=e.online,this._followingAllowed=e.followingAllowed,this._figure=e.figure,this._categoryId=e.categoryId,this._motto=e.motto,this._realName=e.realName,this._lastAccess=e.lastAccess,this._persistedMessageUser=e.persistedMessageUser,this._vipMember=e.vipMember,this._pocketHabboUser=e.pocketHabboUser,this._relationshipStatus=e.relationshipStatus,!0)}get id(){return this._id}set id(e){this._id=e}get name(){return this._name}set name(e){this._name=e}get gender(){return this._gender}set gender(e){this._gender=e}get online(){return this._online}set online(e){this._online=e}get followingAllowed(){return this._followingAllowed}set followingAllowed(e){this._followingAllowed=e}get figure(){return this._figure}set figure(e){this._figure=e}get categoryId(){return this._categoryId}set categoryId(e){this._categoryId=e}get motto(){return this._motto}set motto(e){this._motto=e}get lastAccess(){return this._lastAccess}set lastAccess(e){this._lastAccess=e}get realName(){return this._realName}set realName(e){this._realName=e}get persistedMessageUser(){return this._persistedMessageUser}set persistedMessageUser(e){this._persistedMessageUser=e}get vipMember(){return this._vipMember}set vipMember(e){this._vipMember=e}get pocketHabboUser(){return this._pocketHabboUser}set pocketHabboUser(e){this._pocketHabboUser=e}get relationshipStatus(){return this._relationshipStatus}set relationshipStatus(e){this._relationshipStatus=e}get unread(){return this._unread}set unread(e){this._unread=e}}class M{populate(e){return!!e&&(this._requestId=e.requestId,this._requesterName=e.requesterName,this._figureString=e.figureString,this._requesterUserId=e.requesterUserId,!0)}get requestId(){return this._requestId}get requesterName(){return this._requesterName}get requesterUserId(){return this._requesterUserId}get figureString(){return this._figureString}}var U=n("M1bJ"),x=n("mgdJ");class A{constructor(){this._sentRequests=new Map}getResult(e){for(const t of this._friends)if(t.avatarId===e)return t;for(const t of this._others)if(t.avatarId===e)return t;return null}searchReceived(e,t){this._friends=e,this._others=t}setFriendRequestSent(e){this._sentRequests[e]=!0}isRequestFriend(e){return this._sentRequests[e]}get friends(){return this._friends}get others(){return this._others}}var D=n("fXoL"),L=n("l1qq"),k=n("b0LC");let P=(()=>{class e{constructor(e,t,n){this._notificationService=e,this._soundService=t,this._ngZone=n,this._friendListReady=!1,this._component=null,this._events=new i.a,this._friends=new Map,this._requests=new Map,this._threads=new Map,this._userFriendLimit=0,this._normalFriendLimit=0,this._extendedFriendLimit=0,this._avatarSearchResults=new A,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages&&this.unregisterMessages(),this._messages=[new r.a(this.onAcceptFriendResultEvent.bind(this)),new s.a(this.onFindFriendsProcessResultEvent.bind(this)),new c.a(this.onFollowFriendFailedEvent.bind(this)),new o.a(this.onFriendListFragmentEvent.bind(this)),new a.a(this.onFriendListUpdateEvent.bind(this)),new l.a(this.onFriendNotificationEvent.bind(this)),new d.a(this.onFriendRequestsEvent.bind(this)),new u.a(this.onHabboSearchResultEvent.bind(this)),new h.a(this.onInstantMessageErrorEvent.bind(this)),new g.a(this.onMessageErrorEvent.bind(this)),new m.a(this.onMessengerInitEvent.bind(this)),new f.a(this.onMiniMailNewMessageEvent.bind(this)),new p.a(this.onMiniMailUnreadCountEvent.bind(this)),new _.a(this.onNewConsoleMessageEvent.bind(this)),new b.a(this.onNewFriendRequestEvent.bind(this)),new v.a(this.onRoomInviteErrorEvent.bind(this)),new E.a(this.onRoomInviteEvent.bind(this))];for(const e of this._messages)C.a.instance.communication.registerMessageEvent(e)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(this._messages&&this._messages.length)for(const e of this._messages)C.a.instance.communication.removeMessageEvent(e);this._messages=null})}onAcceptFriendResultEvent(e){if(!e)return;const t=e.getParser();t&&console.log(t)}onFindFriendsProcessResultEvent(e){if(!e)return;const t=e.getParser();t&&console.log(t)}onFollowFriendFailedEvent(e){if(!e)return;const t=e.getParser();t&&console.log(t)}onFriendListFragmentEvent(e){if(!e)return;const t=e.getParser();t&&(this._friendListReady=!1,this._ngZone.run(()=>{for(const e of t.fragment)this.updateFriend(e);t.fragmentNumber+1===t.totalFragments&&(this._friendListReady=!0)}))}onFriendListUpdateEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>{for(const e of t.addedFriends)this.updateFriend(e);for(const e of t.updatedFriends)this.updateFriend(e);for(const e of t.removedFriendIds)this.removeFriend(e)})}onFriendNotificationEvent(e){if(!e)return;const t=e.getParser();t&&console.log(t)}onFriendRequestsEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>{for(const e of t.requests)this.updateFriendRequest(e)})}onHabboSearchResultEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>{this._avatarSearchResults.searchReceived(t.friends,t.others)})}onInstantMessageErrorEvent(e){if(!e)return;const t=e.getParser();t&&console.log(t)}onMessageErrorEvent(e){if(!e)return;const t=e.getParser();if(!t)return;let n="";switch(t.errorCode){case 1:n="${friendlist.error.friendlistownlimit}";break;case 2:n="${friendlist.error.friendlistlimitofrequester}";break;case 3:n="${friendlist.error.friend_requests_disabled}";break;case 4:n="${friendlist.error.requestnotfound}";break;default:n=`Received messenger error: msg: ${t.clientMessageId}, errorCode: ${t.errorCode}`}this._ngZone.run(()=>this._notificationService.alert(n,"${friendlist.alert.title}"))}onMessengerInitEvent(e){if(!e)return;const t=e.getParser();t&&(this._ngZone.run(()=>{this._userFriendLimit=t.userFriendLimit,this._normalFriendLimit=t.normalFriendLimit,this._extendedFriendLimit=t.extendedFriendLimit}),this.requestFriendRequests())}onMiniMailNewMessageEvent(e){e&&e.getParser()}onMiniMailUnreadCountEvent(e){e&&e.getParser()}onNewConsoleMessageEvent(e){if(!e)return;const t=e.getParser();if(!t)return;const n=this.getMessageThread(t.senderId);n&&(this._ngZone.run(()=>{n.insertChat(t.senderId,t.messageText,t.secondsSinceSent,t.extraData),this._component&&this._component.currentThread===n&&n.setRead()}),this._soundService.playInternalSample(R.a.MESSAGE_RECEIVED))}onNewFriendRequestEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>this.updateFriendRequest(t.request))}onRoomInviteErrorEvent(e){if(!e)return;const t=e.getParser();t&&console.log(t)}onRoomInviteEvent(e){if(!e)return;const t=e.getParser();if(!t)return;const n=this.getMessageThread(t.senderId);n&&this._ngZone.run(()=>{n.insertChat(t.senderId,t.messageText,0,null,T.a.ROOM_INVITE),this._component&&this._component.currentThread===n&&n.setRead()})}getFriend(e){return this._friends.get(e)||null}updateFriend(e){if(!e)return;let t=this._friends.get(e.id);t||(t=new O,this._friends.set(e.id,t)),t.populate(e)}removeFriend(e){this._friends.delete(e)}updateFriendRequest(e){if(!e)return;let t=this._requests.get(e.requestId);t||(t=new M,this._requests.set(e.requestId,t)),t.populate(e)}acceptFriendRequest(e){this._requests.delete(e.requestId),this._events.dispatchEvent(new x.a(x.a.ACCEPTED,e.requestId)),C.a.instance.communication.connection.send(new S.a(e.requestId))}acceptFriendRequestById(e){this.acceptFriendRequest(this._requests.get(e))}removeFriendRequest(e){this._requests.delete(e.requestId),this._events.dispatchEvent(new x.a(x.a.DECLINED,e.requestId)),C.a.instance.communication.connection.send(new y.a(!1,e.requestId))}removeFriendRequestById(e){this.removeFriendRequest(this._requests.get(e))}removeAllFriendRequests(){for(const e of this._requests.values())e&&this._events.dispatchEvent(new x.a(x.a.DECLINED,e.requestId));this._requests.clear(),C.a.instance.communication.connection.send(new y.a(!0))}getMessageThread(e){let t=this._threads.get(e);if(!t){const n=this.getFriend(e);if(!n)return;t=new U.a(n),this._threads.set(e,t),this._soundService.playInternalSample(R.a.MESSAGE_SENT)}return t}requestFriendRequests(){C.a.instance.communication.connection.send(new I.a)}canBeAskedForAFriend(e){return!this._friends.get(e)}sendFriendRequest(e,t){this._friends.get(e)||C.a.instance.communication.connection.send(new w.a(t))}getFriendNames(){const e=[];for(const t of this._friends.values())e.push(t.name);return e}get events(){return this._events}get component(){return this._component}set component(e){this._component=e}get friends(){return this._friends}get requests(){return this._requests}get threads(){return this._threads}get unreadCount(){let e=0;for(const t of this._threads.values())t&&t.unread&&e++;return e}get notificationCount(){return this.requests.size+this.unreadCount}get avatarSearchResults(){return this._avatarSearchResults}}return e.\u0275fac=function(t){return new(t||e)(D.kc(L.a),D.kc(k.a),D.kc(D.H))},e.\u0275prov=D.Ub({token:e,factory:e.\u0275fac}),e})()},R1Ze:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("20c0"),r=n("kR3W"),s=n("bwAN"),c=n("fXoL"),o=n("l1qq");let a=(()=>{class e{constructor(e,t){this._notificationService=e,this._ngZone=t,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._messages&&this.unregisterMessages(),this._messages=[new i.a(this.onUserInfoEvent.bind(this))];for(const e of this._messages)s.a.instance.communication.registerMessageEvent(e)}unregisterMessages(){if(this._messages&&this._messages.length)for(const e of this._messages)s.a.instance.communication.removeMessageEvent(e)}load(e){s.a.instance.communication.connection.send(new r.a(e))}onUserInfoEvent(e){if(!e)return;const t=e.getParser();t&&t.data&&this._ngZone.run(()=>this._currentUserInfo=t.data)}get currentUserInfo(){return this._currentUserInfo}}return e.\u0275fac=function(t){return new(t||e)(c.kc(o.a),c.kc(c.H))},e.\u0275prov=c.Ub({token:e,factory:e.\u0275fac}),e})()},R7Po:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("bwAN"),r=n("AY3i"),s=n("xPcM"),c=n("vLqR"),o=n("fXoL");let a=(()=>{class e extends c.a{constructor(){super(...arguments),this.defaultFigure="hd-180-1.ch-210-66.lg-270-82.sh-290-81"}get code(){return e.CODE}onEditStart(t){const n=t.stringData.split(e.DELIMETER);n.length>0&&(this.botName=n[0]),n.length>1&&(this.figure=n[1].length>0?n[1]:this.defaultFigure),super.onEditStart(t)}readStringParamFromForm(){return this.botName+e.DELIMETER+this.figure}get hasSpecialInputs(){return!0}get requiresFurni(){return r.a._Str_5431}copyLook(){this.figure=i.a.instance.sessionDataManager.figure}}return e.CODE=s.a.BOT_CHANGE_FIGURE,e.DELIMETER="\t",e.\u0275fac=function(t){return l(t||e)},e.\u0275cmp=o.Sb({type:e,selectors:[["ng-component"]],features:[o.Hb],decls:13,vars:10,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"row","mb-1"],[1,"col-md-6"],["nitro-avatar-image","",3,"figure","direction"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"]],template:function(e,t){1&e&&(o.dc(0,"nitro-wired-action-base-component",0),o.nc("delayChange",function(e){return t.delay=e}),o.dc(1,"div",1),o.dc(2,"label"),o.Wc(3),o.rc(4,"translate"),o.cc(),o.dc(5,"input",2),o.nc("ngModelChange",function(e){return t.botName=e}),o.cc(),o.cc(),o.dc(6,"div",3),o.dc(7,"div",4),o.Zb(8,"div",5),o.cc(),o.dc(9,"div",4),o.dc(10,"button",6),o.nc("click",function(){return t.copyLook()}),o.Wc(11),o.rc(12,"translate"),o.cc(),o.cc(),o.cc(),o.cc()),2&e&&(o.yc("delay",t.delay),o.Kb(3),o.Xc(o.sc(4,6,"wiredfurni.params.bot.name")),o.Kb(2),o.yc("ngModel",t.botName),o.Kb(3),o.yc("figure",t.figure)("direction",2),o.Kb(3),o.Xc(o.sc(12,8,"wiredfurni.params.capture.figure")))},encapsulation:2}),e})();const l=o.fc(a)},"S/W9":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("gKK4"),s=n("VFvI"),c=n("fXoL");let o=(()=>{class e extends r.a{get code(){return e.CODE}get negativeCode(){return e.NEGATIVE_CODE}get requiresFurni(){return i.a._Str_4873}get hasStateSnapshot(){return!0}onEditStart(e){this.state=e.getBoolean(0),this.direction=e.getBoolean(1),this.position=e.getBoolean(2)}readIntegerParamsFromForm(){return[this.state?1:0,this.direction?1:0,this.position?1:0]}get hasSpecialInputs(){return!0}}return e.CODE=s.a.STATES_MATCH,e.NEGATIVE_CODE=s.a.NOT_STATES_MATCH,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:18,vars:15,consts:[[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"]],template:function(e,t){1&e&&(c.dc(0,"nitro-wired-base-component"),c.Wc(1),c.rc(2,"translate"),c.dc(3,"div",0),c.dc(4,"input",1),c.nc("ngModelChange",function(e){return t.state=e}),c.cc(),c.dc(5,"label",2),c.Wc(6),c.rc(7,"translate"),c.cc(),c.cc(),c.dc(8,"div",0),c.dc(9,"input",1),c.nc("ngModelChange",function(e){return t.direction=e}),c.cc(),c.dc(10,"label",2),c.Wc(11),c.rc(12,"translate"),c.cc(),c.cc(),c.dc(13,"div",0),c.dc(14,"input",1),c.nc("ngModelChange",function(e){return t.position=e}),c.cc(),c.dc(15,"label",2),c.Wc(16),c.rc(17,"translate"),c.cc(),c.cc(),c.cc()),2&e&&(c.Kb(1),c.Yc(" ",c.sc(2,7,"wiredfurni.params.conditions")," "),c.Kb(3),c.yc("ngModel",t.state),c.Kb(2),c.Xc(c.sc(7,9,"wiredfurni.params.condition.state")),c.Kb(3),c.yc("ngModel",t.direction),c.Kb(2),c.Xc(c.sc(12,11,"wiredfurni.params.condition.direction")),c.Kb(3),c.yc("ngModel",t.position),c.Kb(2),c.Xc(c.sc(17,13,"wiredfurni.params.condition.position")))},encapsulation:2}),e})();const a=c.fc(o)},S67I:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("xPcM"),s=n("vLqR"),c=n("fXoL");let o=(()=>{class e extends s.a{get code(){return e.CODE}onEditStart(e){this.state=e.getBoolean(0),this.direction=e.getBoolean(1),this.position=e.getBoolean(2),super.onEditStart(e)}readIntegerParamsFromForm(){return[this.state?1:0,this.direction?1:0,this.position?1:0]}get requiresFurni(){return i.a._Str_4873}get hasStateSnapshot(){return!0}}return e.CODE=r.a.SET_FURNI_STATE,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:18,vars:16,consts:[[3,"delay","delayChange"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"]],template:function(e,t){1&e&&(c.dc(0,"nitro-wired-action-base-component",0),c.nc("delayChange",function(e){return t.delay=e}),c.Wc(1),c.rc(2,"translate"),c.dc(3,"div",1),c.dc(4,"input",2),c.nc("ngModelChange",function(e){return t.state=e}),c.cc(),c.dc(5,"label",3),c.Wc(6),c.rc(7,"translate"),c.cc(),c.cc(),c.dc(8,"div",1),c.dc(9,"input",2),c.nc("ngModelChange",function(e){return t.direction=e}),c.cc(),c.dc(10,"label",3),c.Wc(11),c.rc(12,"translate"),c.cc(),c.cc(),c.dc(13,"div",1),c.dc(14,"input",2),c.nc("ngModelChange",function(e){return t.position=e}),c.cc(),c.dc(15,"label",3),c.Wc(16),c.rc(17,"translate"),c.cc(),c.cc(),c.cc()),2&e&&(c.yc("delay",t.delay),c.Kb(1),c.Yc(" ",c.sc(2,8,"wiredfurni.params.conditions")," "),c.Kb(3),c.yc("ngModel",t.state),c.Kb(2),c.Xc(c.sc(7,10,"wiredfurni.params.condition.state")),c.Kb(3),c.yc("ngModel",t.direction),c.Kb(2),c.Xc(c.sc(12,12,"wiredfurni.params.condition.direction")),c.Kb(3),c.yc("ngModel",t.position),c.Kb(2),c.Xc(c.sc(17,14,"wiredfurni.params.condition.position")))},encapsulation:2}),e})();const a=c.fc(o)},Sy1n:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return v});var i=n("QC7l"),r=n("uv4+"),s=n("ryYR"),c=n("2Fqd"),o=n("nz6o"),a=n("bwAN"),l=n("saAv"),d=n("JoxF"),u=n("fXoL"),h=n("WnqX"),g=n("ofXK"),m=n("IURz");function f(e,t){if(1&e&&(u.dc(0,"div",7),u.Wc(1),u.cc()),2&e){const e=u.qc(2);u.Kb(1),u.Xc(e.message)}}function p(e,t){1&e&&(u.dc(0,"div",8),u.Zb(1,"div"),u.Zb(2,"div"),u.Zb(3,"div"),u.Zb(4,"div"),u.cc())}function _(e,t){if(1&e&&(u.dc(0,"div",3),u.Zb(1,"div",4),u.Uc(2,f,2,1,"div",5),u.Uc(3,p,5,0,"div",6),u.cc()),2&e){const e=u.qc();u.Kb(2),u.yc("ngIf",e.message&&e.message.length),u.Kb(1),u.yc("ngIf",!e.isError)}}function b(e,t){1&e&&u.Zb(0,"nitro-main-component")}let v=(()=>{class t{constructor(e,t){this._settingsService=e,this._ngZone=t,this.message="Getting Ready",this.percentage=0,this.hideProgress=!0,this.isLocalizationReady=!1,this.isAvatarRenderReady=!1,this.isError=!1,this._isReady=!1,this.onNitroEvent=this.onNitroEvent.bind(this)}ngOnInit(){this._ngZone.runOutsideAngular(()=>{if(!NitroConfig)throw new Error("NitroConfig is not defined!");d.a.isWebGLAvailable()?(a.a.instance||a.a.bootstrap(),a.a.instance.setWorker(new Worker(e,void 0)),a.a.instance.events.addEventListener(s.a.CONNECTION_HANDSHAKING,this.onNitroEvent),a.a.instance.events.addEventListener(s.a.CONNECTION_HANDSHAKE_FAILED,this.onNitroEvent),a.a.instance.events.addEventListener(s.a.CONNECTION_AUTHENTICATED,this.onNitroEvent),a.a.instance.events.addEventListener(s.a.CONNECTION_ERROR,this.onNitroEvent),a.a.instance.events.addEventListener(s.a.CONNECTION_CLOSED,this.onNitroEvent),a.a.instance.roomEngine.events.addEventListener(l.a.ENGINE_INITIALIZED,this.onNitroEvent),a.a.instance.localization.events.addEventListener(o.a.LOADED,this.onNitroEvent),a.a.instance.core.configuration.events.addEventListener(i.a.LOADED,this.onNitroEvent),a.a.instance.core.configuration.events.addEventListener(i.a.FAILED,this.onNitroEvent),a.a.instance.core.configuration.init(),this._connectionTimeout=setTimeout(this.onConnectionTimeout,15e3)):this.onNitroEvent(new r.a(a.a.WEBGL_UNAVAILABLE))})}ngOnDestroy(){this._ngZone.runOutsideAngular(()=>{a.a.instance.events.removeEventListener(s.a.CONNECTION_HANDSHAKING,this.onNitroEvent),a.a.instance.events.removeEventListener(s.a.CONNECTION_HANDSHAKE_FAILED,this.onNitroEvent),a.a.instance.events.removeEventListener(s.a.CONNECTION_AUTHENTICATED,this.onNitroEvent),a.a.instance.events.removeEventListener(s.a.CONNECTION_ERROR,this.onNitroEvent),a.a.instance.events.removeEventListener(s.a.CONNECTION_CLOSED,this.onNitroEvent),a.a.instance.localization.events.removeEventListener(o.a.LOADED,this.onNitroEvent),a.a.instance.core.configuration.events.removeEventListener(i.a.LOADED,this.onNitroEvent),a.a.instance.core.configuration.events.removeEventListener(i.a.FAILED,this.onNitroEvent),clearTimeout(this._connectionTimeout)})}getPreloadAssetUrls(){const e=[],t=a.a.instance.getConfiguration("preload.assets.urls");if(t&&t.length)for(const n of t)e.push(a.a.instance.core.configuration.interpolate(n));return e}onNitroEvent(e){if(e)switch(e.type){case i.a.LOADED:return void a.a.instance.localization.init();case i.a.FAILED:return void this._ngZone.run(()=>{this.isError=!0,this.message="Configuration Failed"});case a.a.WEBGL_UNAVAILABLE:return void this._ngZone.run(()=>{this.isError=!0,this.message="WebGL Required"});case a.a.WEBGL_CONTEXT_LOST:return this._ngZone.run(()=>{this.isError=!0,this.message="WebGL Context Lost - Reloading"}),void setTimeout(()=>location.reload(),1500);case s.a.CONNECTION_HANDSHAKING:return clearTimeout(this._connectionTimeout),void(this._connectionTimeout=null);case s.a.CONNECTION_HANDSHAKE_FAILED:return void this._ngZone.run(()=>{this.isError=!0,this.message="Handshake Failed"});case s.a.CONNECTION_AUTHENTICATED:return this._ngZone.run(()=>{this.message="Finishing Up"}),a.a.instance.init(),clearTimeout(this._connectionTimeout),void(this._connectionTimeout=null);case s.a.CONNECTION_ERROR:return void this._ngZone.run(()=>{this.isError=!0,this.message="Connection Error"});case s.a.CONNECTION_CLOSED:return a.a.instance.roomEngine&&a.a.instance.roomEngine.dispose(),this._ngZone.run(()=>{this.isError=!0,this.message="Connection Closed"}),void c.a.call("disconnect",-1,"client.init.handshake.fail");case l.a.ENGINE_INITIALIZED:return void this._ngZone.run(()=>this._isReady=!0);case o.a.LOADED:return void a.a.instance.core.asset.downloadAssets(this.getPreloadAssetUrls(),e=>{e?(this._ngZone.run(()=>{this.message="Connecting"}),a.a.instance.communication.init()):this._ngZone.run(()=>{this.isError=!0,this.message="Assets Failed"})})}}onConnectionTimeout(){c.a.call("logDebug","TcpAuth control socket security error")}get isReady(){return this._isReady}}return t.\u0275fac=function(e){return new(e||t)(u.Yb(h.a),u.Yb(u.H))},t.\u0275cmp=u.Sb({type:t,selectors:[["app-root"]],decls:3,vars:2,consts:[["id","nitro"],["class","d-flex flex-column justify-content-center align-items-center w-100 h-100",4,"ngIf"],[4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100"],[1,"logo","mb-4"],["class","h4 m-0",4,"ngIf"],["class","lds-ellipsis",4,"ngIf"],[1,"h4","m-0"],[1,"lds-ellipsis"]],template:function(e,t){1&e&&(u.dc(0,"div",0),u.Uc(1,_,4,2,"div",1),u.Uc(2,b,1,0,"nitro-main-component",2),u.cc()),2&e&&(u.Kb(1),u.yc("ngIf",!t.isReady||t.isError),u.Kb(1),u.yc("ngIf",t.isReady&&!t.isError))},directives:[g.n,m.a],encapsulation:2}),t})()}).call(this,n("YqC9"))},T7hV:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("wDsT"),r=n("7deb"),s=n("fXoL");let c=(()=>{class e extends i.a{get code(){return e.CODE}}return e.CODE=r.a.COLLISION,e.\u0275fac=function(t){return o(t||e)},e.\u0275cmp=s.Sb({type:e,selectors:[["ng-component"]],features:[s.Hb],decls:1,vars:0,template:function(e,t){1&e&&s.Zb(0,"nitro-wired-base-component")},encapsulation:2}),e})();const o=s.fc(c)},T8aY:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("xPcM"),r=n("vLqR"),s=n("fXoL");let c=(()=>{class e extends r.a{get code(){return e.CODE}}return e.CODE=i.a.RESET,e.\u0275fac=function(t){return o(t||e)},e.\u0275cmp=s.Sb({type:e,selectors:[["ng-component"]],features:[s.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(e,t){1&e&&(s.dc(0,"nitro-wired-action-base-component",0),s.nc("delayChange",function(e){return t.delay=e}),s.cc()),2&e&&s.yc("delay",t.delay)},encapsulation:2}),e})();const o=s.fc(c)},UE3i:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("lKxs"),r=n("7deb"),s=n("fXoL");let c=(()=>{class e extends i.a{get code(){return e.CODE}increase(){this.time+=1,this.time>e.MAXIMUM_VALUE&&(this.time=e.MAXIMUM_VALUE)}get sliderOptions(){return{floor:e.MINIMUM_VALUE,ceil:e.MAXIMUM_VALUE,step:e.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return e.MAXIMUM_VALUE=120,e.CODE=r.a.TRIGGER_PERIODICALLY,e.\u0275fac=function(t){return o(t||e)},e.\u0275cmp=s.Sb({type:e,selectors:[["ng-component"]],features:[s.Hb],decls:9,vars:3,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","time",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(e,t){1&e&&(s.dc(0,"nitro-wired-base-component"),s.dc(1,"p",0),s.Wc(2),s.cc(),s.dc(3,"div",1),s.dc(4,"button",2),s.nc("click",function(){return t.decrease()}),s.Zb(5,"i",3),s.cc(),s.dc(6,"ngx-slider",4),s.nc("valueChange",function(e){return t.time=e})("valueChange",function(){return t.onSliderChange()}),s.cc(),s.dc(7,"button",2),s.nc("click",function(){return t.increase()}),s.Zb(8,"i",5),s.cc(),s.cc(),s.cc()),2&e&&(s.Kb(2),s.Xc(t.timeLocale),s.Kb(4),s.yc("options",t.sliderOptions)("value",t.time))},encapsulation:2}),e})();const o=s.fc(c)},UIgM:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n("fXoL"),r=n("WnqX"),s=n("ZpLZ"),c=n("R1Ze");function o(e,t){if(1&e&&(i.dc(0,"span",16),i.Wc(1),i.cc()),2&e){const e=i.qc(2);i.Kb(1),i.Xc(e.selectedUser.username)}}function a(e,t){1&e&&i.Zb(0,"nitro-mod-tool-room-component")}function l(e,t){1&e&&i.Zb(0,"nitro-mod-tool-room-chatlogs-component")}function d(e,t){if(1&e&&i.Zb(0,"nitro-mod-tool-user-component",17),2&e){const e=i.qc(2);i.yc("user",e.clickedUser)}}function u(e,t){if(1&e&&i.Zb(0,"nitro-mod-tool-mod-action-user-component",17),2&e){const e=i.qc(2);i.yc("user",e.clickedUser)}}function h(e,t){if(1&e&&i.Zb(0,"nitro-mod-tool-user-visited-rooms-component",17),2&e){const e=i.qc(2);i.yc("user",e.clickedUser)}}function g(e,t){if(1&e&&i.Zb(0,"nitro-mod-tool-user-send-message-component",17),2&e){const e=i.qc(2);i.yc("user",e.clickedUser)}}function m(e,t){if(1&e&&i.Zb(0,"nitro-mod-tool-user-chatlogs-component",17),2&e){const e=i.qc(2);i.yc("user",e.clickedUser)}}function f(e,t){if(1&e){const e=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"h6",3),i.Wc(3,"Mod tools"),i.cc(),i.cc(),i.dc(4,"div",4),i.dc(5,"div",5),i.dc(6,"button",6),i.nc("click",function(){return i.Lc(e),i.qc().openRoomTool()}),i.Zb(7,"i",7),i.Wc(8," Room Tool "),i.cc(),i.dc(9,"button",6),i.nc("click",function(){return i.Lc(e),i.qc().openChatlogTool()}),i.Zb(10,"i",8),i.Wc(11," Chatlog Tool "),i.cc(),i.dc(12,"button",6),i.nc("click",function(){return i.Lc(e),i.qc().selectUser()}),i.Zb(13,"i",9),i.Wc(14," User: "),i.Uc(15,o,2,1,"span",10),i.cc(),i.dc(16,"button",11),i.nc("click",function(){return i.Lc(e),i.qc().toggleReportsTool()}),i.Zb(17,"i",12),i.Wc(18," Reports Tool "),i.cc(),i.cc(),i.cc(),i.Uc(19,a,1,0,"nitro-mod-tool-room-component",13),i.Uc(20,l,1,0,"nitro-mod-tool-room-chatlogs-component",13),i.Uc(21,d,1,1,"nitro-mod-tool-user-component",14),i.dc(22,"nitro-mod-tool-reports-component",15),i.nc("visibleChange",function(t){return i.Lc(e),i.qc().reportsToolVisible=t}),i.cc(),i.Uc(23,u,1,1,"nitro-mod-tool-mod-action-user-component",14),i.Uc(24,h,1,1,"nitro-mod-tool-user-visited-rooms-component",14),i.Uc(25,g,1,1,"nitro-mod-tool-user-send-message-component",14),i.Uc(26,m,1,1,"nitro-mod-tool-user-chatlogs-component",14),i.cc()}if(2&e){const e=i.qc();i.yc("topCenter",!1),i.Kb(6),i.yc("disabled",!e.hasRoomInfo()),i.Kb(3),i.yc("disabled",!e.hasRoomInfo()),i.Kb(3),i.yc("disabled",!e.selectedUser),i.Kb(3),i.yc("ngIf",e.selectedUser),i.Kb(4),i.yc("ngIf",e.showRoomTool),i.Kb(1),i.yc("ngIf",e.showRoomChatlogs),i.Kb(1),i.yc("ngIf",e.userToolVisible),i.Kb(1),i.yc("visible",e.reportsToolVisible),i.Kb(1),i.yc("ngIf",e.showModActionOnUser),i.Kb(1),i.yc("ngIf",e.showVisitedRoomsForUser),i.Kb(1),i.yc("ngIf",e.showSendUserMessage),i.Kb(1),i.yc("ngIf",e.showSendUserChatlogs)}}let p=(()=>{class e{constructor(e,t,n,i){this._settingsService=e,this._modToolService=t,this._modToolsUserService=n,this._ngZone=i,this.visible=!1,this.roomToolVisible=!1,this.chatlogToolVisible=!1,this.userToolVisible=!1,this.reportsToolVisible=!1,this.clickedUser=null}ngOnInit(){this._modToolService.component=this}ngOnDestroy(){this._modToolService.component=null}toggleRoomTool(){this.roomToolVisible=!this.roomToolVisible}openRoomTool(){this._modToolService.openRoomTool()}openChatlogTool(){this._modToolService.openChatlogTool()}selectUser(){this.clickedUser=this.selectedUser,this._modToolsUserService.load(this.selectedUser.id),this.userToolVisible=!0}toggleReportsTool(){this.reportsToolVisible=!this.reportsToolVisible}hasRoomInfo(){return!!this._modToolService.currentRoom}get users(){return this._modToolService.users}get selectedUser(){return this._modToolService.selectedUser}get showModActionOnUser(){return this._modToolService.showModActionOnUser}get showVisitedRoomsForUser(){return this._modToolService.showVisitedRoomsForUser}get showSendUserMessage(){return this._modToolService.showSendUserMessage}get showSendUserChatlogs(){return this._modToolService.showSendUserChatlogs}get showRoomChatlogs(){return this._modToolService.showRoomChatLogs}get showRoomTool(){return this._modToolService.showRoomTools}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(r.a),i.Yb(s.a),i.Yb(c.a),i.Yb(i.H))},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-mod-tool-main-component"]],inputs:{visible:"visible"},decls:1,vars:1,consts:[["class","nitro-mod-tool-component card",3,"bringToTop","draggable","topCenter",4,"ngIf"],[1,"nitro-mod-tool-component","card",3,"bringToTop","draggable","topCenter"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],[1,"d-flex","flex-column","p-3"],[1,"btn-group","btn-group-vertical","w-100"],[1,"btn","btn-sm","btn-secondary",3,"disabled","click"],[1,"icon","modtool-room-icon","mr-1"],[1,"icon","modtool-chatlog-icon","mr-1"],[1,"icon","modtool-user-icon","mr-1"],["class","username",4,"ngIf"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"icon","modtool-reports-icon","mr-1"],[4,"ngIf"],[3,"user",4,"ngIf"],[3,"visible","visibleChange"],[1,"username"],[3,"user"]],template:function(e,t){1&e&&i.Uc(0,f,27,13,"div",0),2&e&&i.yc("ngIf",t.visible)},encapsulation:2}),e})()},VFvI:function(e,t,n){"use strict";n.d(t,"a",function(){return i});let i=(()=>{class e{}return e.STATES_MATCH=0,e.FURNIS_HAVE_AVATARS=1,e.TRIGGERER_IS_ON_FURNI=2,e.TIME_ELAPSED_MORE=3,e.TIME_ELAPSED_LESS=4,e.USER_COUNT_IN=5,e.ACTOR_IS_IN_TEAM=6,e.HAS_STACKED_FURNIS=7,e.STUFF_TYPE_MATCHES=8,e.STUFFS_IN_FORMATION=9,e.ACTOR_IS_GROUP_MEMBER=10,e.ACTOR_IS_WEARING_BADGE=11,e.ACTOR_IS_WEARING_EFFECT=12,e.NOT_STATES_MATCH=13,e.FURNI_NOT_HAVE_HABBO=14,e.NOT_ACTOR_ON_FURNI=15,e.NOT_USER_COUNT_IN=16,e.NOT_ACTOR_IN_TEAM=17,e.NOT_HAS_STACKED_FURNIS=18,e.NOT_FURNI_IS_OF_TYPE=19,e.NOT_STUFFS_IN_FORMATION=20,e.NOT_ACTOR_IN_GROUP=21,e.NOT_ACTOR_WEARS_BADGE=22,e.NOT_ACTOR_WEARING_EFFECT=23,e.DATE_RANGE_ACTIVE=24,e.ACTOR_HAS_HANDITEM=25,e})()},VLg1:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("fXoL"),r=n("jhN1");let s=(()=>{class e{constructor(e){this._sanitizer=e}transform(e){return this._sanitizer.bypassSecurityTrustHtml(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(r.b))},e.\u0275pipe=i.Xb({name:"keepHtml",type:e,pure:!1}),e})()},VWsa:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("833I"),r=n("NxQS"),s=n("bwAN"),c=n("sIeP"),o=n("fXoL"),a=n("cC5F");let l=(()=>{class e{constructor(e,t){this._inventoryService=e,this._ngZone=t,this._messages=[],this._badges=[],this._badgesInUse=[],this._isInitialized=!1,this._needsUpdate=!1,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new i.a(this.onBadgesListEvent.bind(this))];for(const e of this._messages)s.a.instance.communication.registerMessageEvent(e)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const e of this._messages)s.a.instance.communication.removeMessageEvent(e);this._messages=[]})}onBadgesListEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>{this._badgesInUse=[],this._badges=[];const e=t.getAllBadgeCodes(),n=t.getActiveBadgeCodes();for(const t of e)-1===n.indexOf(t)?this._badges.push(t):this._badgesInUse.push(t);this._isInitialized=!0,this._inventoryService.badgesController&&this._inventoryService.badgesController.selectExistingGroupOrDefault()})}setAllBadgesSeen(){this._inventoryService.unseenTracker._Str_8813(c.a.BADGE),this._inventoryService.updateUnseenCount()}isWearingBadge(e){return this._badgesInUse.indexOf(e)>=0}badgeLimitReached(){return 5===this._badgesInUse.length}wearOrClearBadge(e){const t=this._badgesInUse.indexOf(e);if(-1===t){this._badgesInUse.push(e);const t=this._badges.indexOf(e);t>=0&&this._badges.splice(t,1)}else this._badgesInUse.splice(t,1),-1===this._badges.indexOf(e)&&this._badges.push(e)}requestLoad(){this._needsUpdate=!1,s.a.instance.communication.connection.send(new r.a)}get controller(){return this._inventoryService.controller}get isInitalized(){return this._isInitialized}get needsUpdate(){return this._needsUpdate}get badges(){return this._badges}get activeBadges(){return this._badgesInUse}}return e.\u0275fac=function(t){return new(t||e)(o.kc(a.a),o.kc(o.H))},e.\u0275prov=o.Ub({token:e,factory:e.\u0275fac}),e})()},VXVv:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("qQec"),r=n("bwAN"),s=n("fXoL"),c=n("l1qq");let o=(()=>{class e{constructor(e,t){this._notificationService=e,this._ngZone=t,this._component=null,this.registerMessages()}static getReasonAsString(e){switch(e){case 1:return"useless";case 2:return"abusive";default:return"resolved"}}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._messages&&this.unregisterMessages(),this._messages=[new i.a(this.onCallForHelpResultMessageEvent.bind(this))];for(const e of this._messages)r.a.instance.communication.registerMessageEvent(e)}unregisterMessages(){if(this._messages&&this._messages.length)for(const e of this._messages)r.a.instance.communication.removeMessageEvent(e)}onCallForHelpResultMessageEvent(t){if(!t)return;const n=t.getParser();if(!n)return;let i=n.messageText;""===i&&(i=r.a.instance.getLocalization("${help.cfh.closed."+e.getReasonAsString(n.resultType)+"}")),this._ngZone.run(()=>this._notificationService.alert(i,"${mod.alert.title}"))}get component(){return this._component}set component(e){this._component=e}}return e.\u0275fac=function(t){return new(t||e)(s.kc(c.a),s.kc(s.H))},e.\u0275prov=s.Ub({token:e,factory:e.\u0275fac}),e})()},WnqX:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("fXoL");let r=(()=>{class e{constructor(e){this._ngZone=e,this._isReady=!1,this._avatarEditorVisible=!1,this._navigatorVisible=!1,this._catalogVisible=!1,this._inventoryVisible=!1,this._friendlistVisible=!1,this._userProfileVisible=!1,this._achievementsVisible=!1,this._meMenuVisible=!1,this._chatHistoryVisible=!1,this._userSettingsVisible=!1,this._floorPlanVisible=!1,this._userContextVisible=!0}showAvatarEditor(){this._avatarEditorVisible=!0}hideAvatarEditor(){this._avatarEditorVisible=!1}showNavigator(){this._navigatorVisible=!0}hideNavigator(){this._navigatorVisible=!1}toggleAvatarEditor(){this._avatarEditorVisible=!this._avatarEditorVisible}toggleNavigator(){this._navigatorVisible=!this._navigatorVisible}showCatalog(){this._catalogVisible=!0}hideCatalog(){this._catalogVisible=!1}toggleCatalog(){this._catalogVisible=!this._catalogVisible}showInventory(){this._inventoryVisible=!0}hideInventory(){this._inventoryVisible=!1}toggleInventory(){this._inventoryVisible=!this._inventoryVisible}showFriendList(){this._friendlistVisible=!0}hideFriendList(){this._friendlistVisible=!1}toggleFriendList(){this._friendlistVisible=!this._friendlistVisible}showUserProfile(){this._userProfileVisible=!0}hideUserProfile(){this._userProfileVisible=!1}toggleUserProfile(){this._userProfileVisible=!this._userProfileVisible}showAchievements(){this._achievementsVisible=!0}hideAchievements(){this._achievementsVisible=!1}toggleAchievements(){this._achievementsVisible=!this._achievementsVisible}showMeMenu(){this._meMenuVisible=!0}hideMeMenu(){this._meMenuVisible=!1}toggleMeMenu(){this._meMenuVisible=!this._meMenuVisible}showChatHistory(){this._chatHistoryVisible=!0}hideChatHistory(){this._chatHistoryVisible=!1}toggleChatHistory(){this._chatHistoryVisible=!this._chatHistoryVisible}showUserSettings(){this._userSettingsVisible=!0}hideUserSettings(){this._userSettingsVisible=!1}toggleUserSettings(){this._userSettingsVisible=!this._userSettingsVisible}toggleUserContextVisible(){this._userContextVisible=!this._userContextVisible}get avatarEditorVisible(){return this._avatarEditorVisible}get navigatorVisible(){return this._navigatorVisible}get catalogVisible(){return this._catalogVisible}get inventoryVisible(){return this._inventoryVisible}get friendListVisible(){return this._friendlistVisible}get userProfileVisible(){return this._userProfileVisible}get achievementsVisible(){return this._achievementsVisible}get meMenuVisible(){return this._meMenuVisible}get chatHistoryVisible(){return this._chatHistoryVisible}get userSettingsVisible(){return this._userSettingsVisible}get userContextVisible(){return this._userContextVisible}set isReady(e){this._isReady=e}get isReady(){return this._isReady}set floorPlanVisible(e){this._ngZone.run(()=>this._floorPlanVisible=e)}get floorPlanVisible(){return this._floorPlanVisible}}return e.\u0275fac=function(t){return new(t||e)(i.kc(i.H))},e.\u0275prov=i.Ub({token:e,factory:e.\u0275fac}),e})()},WyFn:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("xPcM"),s=n("vLqR"),c=n("fXoL");let o=(()=>{class e extends s.a{get code(){return e.CODE}get requiresFurni(){return i.a._Str_5430}}return e.CODE=r.a.FLEE,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(e,t){1&e&&(c.dc(0,"nitro-wired-action-base-component",0),c.nc("delayChange",function(e){return t.delay=e}),c.cc()),2&e&&c.yc("delay",t.delay)},encapsulation:2}),e})();const a=c.fc(o)},XB1t:function(e,t,n){"use strict";n.d(t,"a",function(){return i});let i=(()=>{class e{constructor(e,t,n=0,i=null,r=0){this._type=r,this._senderId=e,this._message=t,this._secondsSinceSent=n,this._extraData=i,this._date=new Date}get type(){return this._type}get senderId(){return this._senderId}get message(){return this._message}get secondsSinceSent(){return this._secondsSinceSent}get extraData(){return this._extraData}get date(){return this._date}}return e.CHAT=0,e.ROOM_INVITE=1,e.STATUS_NOTIFICATION=2,e})()},YDkd:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("xPcM"),r=n("vLqR"),s=n("fXoL");let c=(()=>{class e extends r.a{constructor(){super(...arguments),this.allowedHanditemIds=["2","5","7","8","9","10","27"],this.handitemId="0"}get code(){return e.CODE}onEditStart(e){this.botName=e.stringData,this.handitemId=e.intData.length>0&&this.allowedHanditemIds.includes(e.intData[0].toString())?e.intData[0].toString():"0",super.onEditStart(e)}readStringParamFromForm(){return this.botName}readIntegerParamsFromForm(){return[Number.parseInt(this.handitemId)]}get hasSpecialInputs(){return!0}}return e.CODE=i.a.BOT_GIVE_HAND_ITEM,e.\u0275fac=function(t){return o(t||e)},e.\u0275cmp=s.Sb({type:e,selectors:[["ng-component"]],features:[s.Hb],decls:35,vars:41,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","0",3,"selected"],["value","2",3,"selected"],["value","5",3,"selected"],["value","7",3,"selected"],["value","8",3,"selected"],["value","9",3,"selected"],["value","10",3,"selected"],["value","27",3,"selected"]],template:function(e,t){1&e&&(s.dc(0,"nitro-wired-action-base-component",0),s.nc("delayChange",function(e){return t.delay=e}),s.dc(1,"div",1),s.dc(2,"label"),s.Wc(3),s.rc(4,"translate"),s.cc(),s.dc(5,"input",2),s.nc("ngModelChange",function(e){return t.botName=e}),s.cc(),s.cc(),s.dc(6,"div",1),s.dc(7,"label"),s.Wc(8),s.rc(9,"translate"),s.cc(),s.dc(10,"select",3),s.nc("ngModelChange",function(e){return t.handitemId=e}),s.dc(11,"option",4),s.Wc(12),s.rc(13,"translate"),s.cc(),s.dc(14,"option",5),s.Wc(15),s.rc(16,"translate"),s.cc(),s.dc(17,"option",6),s.Wc(18),s.rc(19,"translate"),s.cc(),s.dc(20,"option",7),s.Wc(21),s.rc(22,"translate"),s.cc(),s.dc(23,"option",8),s.Wc(24),s.rc(25,"translate"),s.cc(),s.dc(26,"option",9),s.Wc(27),s.rc(28,"translate"),s.cc(),s.dc(29,"option",10),s.Wc(30),s.rc(31,"translate"),s.cc(),s.dc(32,"option",11),s.Wc(33),s.rc(34,"translate"),s.cc(),s.cc(),s.cc(),s.cc()),2&e&&(s.yc("delay",t.delay),s.Kb(3),s.Xc(s.sc(4,21,"wiredfurni.params.bot.name")),s.Kb(2),s.yc("ngModel",t.botName),s.Kb(3),s.Xc(s.sc(9,23,"wiredfurni.params.handitem")),s.Kb(2),s.yc("ngModel",t.handitemId),s.Kb(1),s.yc("selected","0"==t.handitemId),s.Kb(1),s.Xc(s.sc(13,25,"wiredfurni.tooltip.handitem")),s.Kb(2),s.yc("selected","2"==t.handitemId),s.Kb(1),s.Xc(s.sc(16,27,"handitem2")),s.Kb(2),s.yc("selected","5"==t.handitemId),s.Kb(1),s.Xc(s.sc(19,29,"handitem5")),s.Kb(2),s.yc("selected","7"==t.handitemId),s.Kb(1),s.Xc(s.sc(22,31,"handitem7")),s.Kb(2),s.yc("selected","8"==t.handitemId),s.Kb(1),s.Xc(s.sc(25,33,"handitem8")),s.Kb(2),s.yc("selected","9"==t.handitemId),s.Kb(1),s.Xc(s.sc(28,35,"handitem9")),s.Kb(2),s.yc("selected","10"==t.handitemId),s.Kb(1),s.Xc(s.sc(31,37,"handitem10")),s.Kb(2),s.yc("selected","27"==t.handitemId),s.Kb(1),s.Xc(s.sc(34,39,"handitem27")))},encapsulation:2}),e})();const o=s.fc(c)},YPdD:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("fXoL");let r=(()=>{class e{constructor(e){this.elementRef=e}ngOnInit(){const e=this.elementRef.nativeElement;e&&(e.onerror=()=>{e.src="",e.onerror=null})}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(i.p))},e.\u0275dir=i.Tb({type:e,selectors:[["","image-placeholder",""]]}),e})()},YqC9:function(e,t,n){e.exports=n.p+"0.dbf0b84ab72f5c4e27d3.worker.js"},ZdPW:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("gKK4"),r=n("VFvI"),s=n("fXoL");let c=(()=>{class e extends i.a{get code(){return e.CODE}get negativeCode(){return e.NEGATIVE_CODE}readStringParamFromForm(){return this.botName}onEditStart(e){this.botName=e.stringData}get hasSpecialInputs(){return!0}}return e.CODE=r.a.ACTOR_IS_WEARING_BADGE,e.NEGATIVE_CODE=r.a.NOT_ACTOR_WEARS_BADGE,e.\u0275fac=function(t){return o(t||e)},e.\u0275cmp=s.Sb({type:e,selectors:[["ng-component"]],features:[s.Hb],decls:6,vars:4,consts:[[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(s.dc(0,"nitro-wired-base-component"),s.dc(1,"div",0),s.dc(2,"label"),s.Wc(3),s.rc(4,"translate"),s.cc(),s.dc(5,"input",1),s.nc("ngModelChange",function(e){return t.botName=e}),s.cc(),s.cc(),s.cc()),2&e&&(s.Kb(3),s.Xc(s.sc(4,2,"wiredfurni.params.badgecode")),s.Kb(2),s.yc("ngModel",t.botName))},encapsulation:2}),e})();const o=s.fc(c)},ZpLZ:function(e,t,n){"use strict";n.d(t,"a",function(){return _});var i=n("gvw1"),r=n("/EaP"),s=n("chmt"),c=n("QU2r"),o=n("wyiH"),a=n("MVEU"),l=n("BGhM"),d=n("8azw"),u=n("U3Io"),h=n("jesJ"),g=n("bwAN");class m{constructor(e,t,n=null,i=null){this._id=e,this._username=t,this._figure=n,this._gender=i}get id(){return this._id}get username(){return this._username}get figure(){return this._figure}get gender(){return this._gender}}var f=n("fXoL"),p=n("l1qq");let _=(()=>{class e{constructor(e,t){this._notificationService=e,this._ngZone=t,this._users=[],this._currentSelectedUser=null,this._showModActionOnUser=!1,this._showVisitedRoomsForUser=!1,this._showSendUserMessage=!1,this._showSendUserChatlogs=!1,this._showRoomTools=!1,this._showRoomChatLogs=!1,this._Str_20687=null,this._component=null,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._messages&&this.unregisterMessages(),this._messages=[new o.a(this.onRoomInfoEvent.bind(this)),new d.a(this.onUserInfoEvent.bind(this)),new a.a(this.onModtoolUserChatlogEvent.bind(this)),new c.a(this.onModtoolRoomChatlogEvent.bind(this)),new i.a(this.onModToolsCFHCategoriesEvent.bind(this)),new r.a(this.onModtoolsMainEvent.bind(this)),new s.a(this.onRoomsReceivedForUserEvent.bind(this)),new l.a(this.onRoomInfoOwnerEvent.bind(this))];for(const e of this._messages)g.a.instance.communication.registerMessageEvent(e)}unregisterMessages(){if(this._messages&&this._messages.length)for(const e of this._messages)g.a.instance.communication.removeMessageEvent(e)}get component(){return this._component}set component(e){this._component=e}onModtoolsMainEvent(e){if(!e)return;const t=e.getParser();t&&(this._Str_20687=t.data)}onRoomInfoOwnerEvent(e){if(!e)return;const t=e.getParser();t&&(this._currentRoomInfo=t)}onRoomsReceivedForUserEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>this._userRoomVisitedData=t.data)}onModToolsCFHCategoriesEvent(e){if(!e)return;const t=e.getParser();t&&(this._callForHelpCategories=t.callForHelpCategories)}onRoomInfoEvent(e){if(!g.a.instance.sessionDataManager.isModerator)return;if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>{this._modToolRoomInfo=t})}onUserInfoEvent(e){const t=e.getParser().userInfo;this._ngZone.run(()=>{this._users.push(new m(t.userId,t.username))})}onModtoolUserChatlogEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>{this._roomVisits=t.roomVisits})}onModtoolRoomChatlogEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>{this._userChatlogs=t.chatlogs})}openRoomTool(e=null){this._currentRoomInfo&&(this._modToolRoomInfo=null,g.a.instance.communication.connection.send(new h.a(e||this._currentRoomInfo.roomId)),this._showRoomTools=!0)}openChatlogTool(){this._modToolRoomInfo=null,g.a.instance.communication.connection.send(new h.a(this._currentRoomInfo.roomId)),g.a.instance.communication.connection.send(new u.a(this._currentRoomInfo.roomId)),this.showRoomChatLogs=!0}closeUserTool(){this._component&&(this._component.userToolVisible=!1)}closeRoomVisitedTool(){this._showVisitedRoomsForUser=!1}get users(){return this._users}get roomVisits(){return this._roomVisits}get userChatlogs(){return this._userChatlogs}selectUser(e,t,n=null,i=null){this._currentSelectedUser=new m(e,t,n,i)}get selectedUser(){return this._currentSelectedUser}get showModActionOnUser(){return this._showModActionOnUser}set showModActionOnUser(e){this._showModActionOnUser=e}get showVisitedRoomsForUser(){return this._showVisitedRoomsForUser}set showVisitedRoomsForUser(e){this._showVisitedRoomsForUser=e}get showSendUserMessage(){return this._showSendUserMessage}set showSendUserMessage(e){this._showSendUserMessage=e}get showSendUserChatlogs(){return this._showSendUserChatlogs}set showSendUserChatlogs(e){this._showSendUserChatlogs=e}get showRoomTools(){return this._showRoomTools}set showRoomTools(e){this._showRoomTools=e}get showRoomChatLogs(){return this._showRoomChatLogs}set showRoomChatLogs(e){this._showRoomChatLogs=e}get callForHelpCategories(){return this._callForHelpCategories}get _Str_3325(){return this._Str_20687}get roomUserVisitedData(){return this._userRoomVisitedData}get currentRoom(){return this._currentRoomInfo}get currentRoomModData(){return this._modToolRoomInfo}}return e.\u0275fac=function(t){return new(t||e)(f.kc(p.a),f.kc(f.H))},e.\u0275prov=f.Ub({token:e,factory:e.\u0275fac}),e})()},Zq7N:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("gKK4"),r=n("VFvI"),s=n("fXoL");let c=(()=>{class e extends i.a{constructor(){super(...arguments),this.minUsers=0,this.maxUsers=0}get code(){return e.CODE}get negativeCode(){return e.NEGATIVE_CODE}onEditStart(e){this.minUsers=e.intData[0]||1,this.maxUsers=e.intData[1]||50}readIntegerParamsFromForm(){return[this.minUsers,this.maxUsers]}decreaseMin(){this.minUsers-=1,this.minUsers<e.MINIMUM_VALUE&&(this.minUsers=e.MINIMUM_VALUE)}decreaseMax(){this.maxUsers-=1,this.maxUsers<e.MINIMUM_VALUE&&(this.maxUsers=e.MINIMUM_VALUE)}increaseMin(){this.minUsers+=1,this.minUsers>e.MAXIMUM_VALUE&&(this.minUsers=e.MAXIMUM_VALUE)}increaseMax(){this.maxUsers+=1,this.maxUsers>e.MAXIMUM_VALUE&&(this.maxUsers=e.MAXIMUM_VALUE)}get hasSpecialInputs(){return!0}get sliderOptions(){return{floor:e.MINIMUM_VALUE,ceil:e.MAXIMUM_VALUE,step:e.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return e.CODE=r.a.USER_COUNT_IN,e.NEGATIVE_CODE=r.a.NOT_USER_COUNT_IN,e.MINIMUM_VALUE=1,e.MAXIMUM_VALUE=50,e.STEPPER_VALUE=1,e.\u0275fac=function(t){return o(t||e)},e.\u0275cmp=s.Sb({type:e,selectors:[["ng-component"]],features:[s.Hb],decls:19,vars:14,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","minUsers",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"],["name","maxUsers",3,"options","value","valueChange"]],template:function(e,t){1&e&&(s.dc(0,"nitro-wired-base-component"),s.dc(1,"p",0),s.Wc(2),s.rc(3,"translate"),s.cc(),s.dc(4,"div",1),s.dc(5,"button",2),s.nc("click",function(){return t.decreaseMin()}),s.Zb(6,"i",3),s.cc(),s.dc(7,"ngx-slider",4),s.nc("valueChange",function(e){return t.minUsers=e}),s.cc(),s.dc(8,"button",2),s.nc("click",function(){return t.increaseMin()}),s.Zb(9,"i",5),s.cc(),s.cc(),s.dc(10,"p",0),s.Wc(11),s.rc(12,"translate"),s.cc(),s.dc(13,"div",1),s.dc(14,"button",2),s.nc("click",function(){return t.decreaseMax()}),s.Zb(15,"i",3),s.cc(),s.dc(16,"ngx-slider",6),s.nc("valueChange",function(e){return t.maxUsers=e}),s.cc(),s.dc(17,"button",2),s.nc("click",function(){return t.increaseMax()}),s.Zb(18,"i",5),s.cc(),s.cc(),s.cc()),2&e&&(s.Kb(2),s.Xc(s.uc(3,6,"wiredfurni.params.usercountmin","value",t.minUsers)),s.Kb(5),s.yc("options",t.sliderOptions)("value",t.minUsers),s.Kb(4),s.Xc(s.uc(12,10,"wiredfurni.params.usercountmax","value",t.maxUsers)),s.Kb(5),s.yc("options",t.sliderOptions)("value",t.maxUsers))},encapsulation:2}),e})();const o=s.fc(c)},afcZ:function(e,t,n){"use strict";n.d(t,"a",function(){return _});var i=n("wYOr"),r=n("Mkk5"),s=n("cPk/"),c=n("zo8S"),o=n("4DCE"),a=n("HtHr"),l=n("Fpj+"),d=n("Y5Jj"),u=n("fDNK"),h=n("I56y"),g=n("7psG"),m=n("bwAN"),f=n("fXoL"),p=n("l1qq");let _=(()=>{class e{constructor(e,t){this._ngZone=e,this._notificationService=t,this._totalOffersFound=0,this._creditsWaiting=0,this._lastSearchRequest=null,this._activeOfferToBuy=null,this._messages=[],this.registerMessages(),this._lastOwnOffers=new i.a}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new o.a(this.onMarketplaceOwnItemsEvent.bind(this)),new s.a(this.onMarketplaceCancelItemEvent.bind(this)),new c.a(this.onMarketplaceOffersReceivedEvent.bind(this)),new r.a(this.onMarketplaceAfterOrderStatusEvent.bind(this))];for(const e of this._messages)m.a.instance.communication.registerMessageEvent(e)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const e of this._messages)m.a.instance.communication.removeMessageEvent(e);this._messages=[]})}ngOnDestroy(){this.unregisterMessages()}onMarketplaceOwnItemsEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>{this._creditsWaiting=t.creditsWaiting;for(const e of t.offers){const t=new g.a(e.offerId,e.furniId,e.furniType,e.extraData,e.stuffData,e.price,e.status,e._Str_3925);t._Str_5853=e._Str_5853,this._lastOwnOffers.add(e.offerId,t)}})}onMarketplaceAfterOrderStatusEvent(e){if(!e)return;const t=e.getParser();if(t)if(1==t.result&&this._lastSearchRequest)this.requestOffers(this._lastSearchRequest);else{if(2==t.result){const e=t._Str_7501,n=[];for(const t of this._offerOnMarket)t.offerId!=e&&n.push(t);return this._ngZone.run(()=>this._offerOnMarket=n),void this._notificationService.alert(m.a.instance.localization.getValue("catalog.marketplace.not_available_header"),m.a.instance.localization.getValue("catalog.marketplace.not_available_title"))}3==t.result&&this._lastSearchRequest?this.requestOffers(this._lastSearchRequest):4!=t.result||this._notificationService.alert(m.a.instance.localization.getValue("catalog.alert.notenough.credits.description"),m.a.instance.localization.getValue("catalog.alert.notenough.title"))}}onMarketplaceOffersReceivedEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>{this._totalOffersFound=t.totalItemsFound,this._offerOnMarket=t.offers})}onMarketplaceCancelItemEvent(e){if(!e)return;const t=e.getParser();t&&(t.success?this._ngZone.run(()=>{this._lastOwnOffers.remove(t.offerId)}):this._notificationService.alert(m.a.instance.localization.getValue("catalog.marketplace.cancel_failed"),m.a.instance.localization.getValue("catalog.marketplace.operation_failed.topic")))}requestOwnItem(){m.a.instance.communication.connection.send(new u.a)}get lastOwnOffers(){return this._lastOwnOffers}get publicOffers(){return this._offerOnMarket}get totalOffersFound(){return this._totalOffersFound}get creditsWaiting(){return this._creditsWaiting}redeemExpiredMarketPlaceOffer(e){m.a.instance.communication.connection.send(new h.a(e))}redeemCredits(){const t=[];for(const n of this._lastOwnOffers.getValues())n.status===e._Str_8295&&t.push(n.offerId);for(const e of t)this._lastOwnOffers.remove(e);m.a.instance.communication.connection.send(new l.a)}requestOffers(e){this._lastSearchRequest=e,m.a.instance.communication.connection.send(new d.a(e.minPrice,e.maxPrice,e.query,e.type))}buyOffer(e){this._activeOfferToBuy=e}get currentMarketplaceOfferToBuy(){return this._activeOfferToBuy}buyMarketplaceOffer(e){this._activeOfferToBuy=null,m.a.instance.communication.connection.send(new a.a(e))}}return e._Str_20923=1,e._Str_15376=1,e._Str_8295=2,e._Str_6495=3,e.\u0275fac=function(t){return new(t||e)(f.kc(f.H),f.kc(p.a))},e.\u0275prov=f.Ub({token:e,factory:e.\u0275fac}),e})()},atjC:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("gKK4"),s=n("VFvI"),c=n("fXoL");let o=(()=>{class e extends r.a{get code(){return e.CODE}get negativeCode(){return e.NEGATIVE_CODE}get requiresFurni(){return i.a._Str_4991}}return e.CODE=s.a.STUFF_TYPE_MATCHES,e.NEGATIVE_CODE=s.a.NOT_FURNI_IS_OF_TYPE,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:1,vars:0,template:function(e,t){1&e&&c.Zb(0,"nitro-wired-base-component")},encapsulation:2}),e})();const a=c.fc(o)},ay9g:function(e,t,n){"use strict";n.d(t,"a",function(){return M});var i=n("jdlI"),r=n("ZSWV"),s=n("/XCM"),c=n("38fl"),o=n("wkRf"),a=n("Q5M+"),l=n("W4ab"),d=n("DHFe"),u=n("YzLM"),h=n("SXMc"),g=n("tf6c"),m=n("FlOi"),f=n("29CQ"),p=n("uvcT"),_=n("bwAN"),b=n("Vm8J"),v=n("WS8Q"),E=n("ssUo"),S=n("Mdne"),y=n("nJ5u"),I=n("wYOr");let w=(()=>{class e{constructor(e,t,n,i,r){this._Str_18094=1,this._Str_18535=.2,this._type=e,this._category=t,this._roomEngine=n,this._stuffData=i,this._extra=r,this._isWallItem=!1,this._iconUrl=null,this._name=null,this._description=null,this._locked=!1,this._selected=!1,this._hasUnseenItems=!1,this._items=new I.a}prepareGroup(){this.setIcon(),this.setName(),this.setDescription()}dispose(){}getItemByIndex(e){return this._items.getWithIndex(e)}getItemById(e){return this._items.getValue(e)}getTradeItems(e){const t=[],n=this.getLastItem();if(!n)return t;let i=0,r=0;for(;r<this._items.length&&!(i>=e);){const e=this.getItemByIndex(r);!e.locked&&e.isTradable&&e.type===n.type&&(t.push(e),i++),r++}return t}push(e,t=!1){const n=this._items.getValue(e.id);n?n.locked=!1:this._items.add(e.id,e),1===this._items.length&&this.prepareGroup()}pop(){let e=null;return this._items.length>0&&(e=this._items.getWithIndex(this._items.length-1),this._items.remove(e.id)),e}remove(e){const t=this._items.getValue(e);return t?(this._items.remove(e),t):null}getTotalCount(){if(this._category===S.a._Str_12351){let e=0,t=0;for(;t<this._items.length;){const n=this._items.getWithIndex(t);e+=parseInt(n.stuffData.getLegacyString()),t++}return e}return this._items.length}getUnlockedCount(){if(this.category===S.a._Str_12351)return this.getTotalCount();let e=0,t=0;for(;t<this._items.length;)this._items.getWithIndex(t).locked||e++,t++;return e}getLastItem(){return this._items.length?this._items.getWithIndex(this._items.length-1):null}unlockAllItems(){if(this._items.length)for(const e of this._items.getValues())e&&e.locked&&(e.locked=!1)}lockItemIds(e){for(const t of this._items.getValues()){const n=e.indexOf(t.ref)>=0;t.locked!==n&&(t.locked=n)}}setName(){const e=this.getLastItem();if(!e)return void(this._name="");let t="";switch(this._category){case S.a._Str_5186:t="poster_"+e.stuffData.getLegacyString()+"_name";break;case S.a._Str_9125:return void(this._name="SONG_NAME");default:t=this.isWallItem?"wallItem.name."+e.type:"roomItem.name."+e.type}this._name=_.a.instance.getLocalization(t)}setDescription(){this._description=""}setIcon(){if(this._iconUrl)return;let e=null;e=this.isWallItem?this._roomEngine.getFurnitureWallIconUrl(this._type,this._stuffData.getLegacyString()):this._roomEngine.getFurnitureFloorIconUrl(this._type),e&&(this._iconUrl=e)}get type(){return this._type}get category(){return this._category}get stuffData(){return this._stuffData}get extra(){return this._extra}get iconUrl(){return this._iconUrl}get name(){return this._name}get description(){return this._description}get hasUnseenItems(){return this._hasUnseenItems}set hasUnseenItems(e){this._hasUnseenItems=e}get locked(){return this._locked}set locked(e){this._locked=e}get selected(){return this._selected}set selected(e){this._selected=e}get isWallItem(){const e=this.getItemByIndex(0);return!!e&&e.isWallItem}get isGroupable(){const e=this.getItemByIndex(0);return!!e&&e.isGroupable}get isSellable(){const e=this.getItemByIndex(0);return!!e&&e.sellable}get items(){return this._items}}return e.INVENTORY_THUMB_XML="inventory_thumb_xml",e._Str_4072=13421772,e._Str_4169=10275685,e})();var C=n("sIeP"),R=n("fXoL"),T=n("cC5F"),O=n("l1qq");let M=(()=>{class e{constructor(e,t,n){this._inventoryService=e,this._notificationService=t,this._ngZone=n,this._messages=[],this._furniMsgFragments=null,this._groupItems=[],this._search="",this._searchType="",this._itemIdInFurniPlacing=-1,this._isObjectMoverRequested=!1,this._isInitialized=!1,this._needsUpdate=!1,this.onRoomEngineObjectPlacedEvent=this.onRoomEngineObjectPlacedEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{_.a.instance.roomEngine.events.addEventListener(v.a.PLACED,this.onRoomEngineObjectPlacedEvent),this._messages=[new s.a(this.onFurnitureListAddOrUpdateEvent.bind(this)),new c.a(this.onFurnitureListEvent.bind(this)),new o.a(this.onFurnitureListInvalidateEvent.bind(this)),new a.a(this.onFurnitureListRemovedEvent.bind(this)),new l.a(this.onFurniturePostItPlacedEvent.bind(this)),new u.a(this.onMarketplaceSellEvent.bind(this)),new i.a(this.onMarketplaceConfigEvent.bind(this)),new r.a(this.onMarketplaceItemStatsEvent.bind(this)),new d.a(this.onMarketplaceItemPostedEvent.bind(this))];for(const e of this._messages)_.a.instance.communication.registerMessageEvent(e);_.a.instance.communication.connection.send(new g.a)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{_.a.instance.roomEngine.events.removeEventListener(v.a.PLACED,this.onRoomEngineObjectPlacedEvent);for(const e of this._messages)_.a.instance.communication.removeMessageEvent(e);this._messages=[]})}onRoomEngineObjectPlacedEvent(e){e&&this._isObjectMoverRequested&&e.type===v.a.PLACED&&(this._isObjectMoverRequested=!1,e._Str_4057||this._ngZone.run(()=>this._inventoryService.showWindow()))}onFurnitureListAddOrUpdateEvent(e){if(!e)return;const t=e.getParser();if(!t)return;const n=t.items;this._ngZone.run(()=>{for(const e of n){const t=this.getGroupItemForFurnitureId(e.itemId);if(t){const n=t.getItemById(e.itemId);n&&(n.update(e),t.hasUnseenItems=!0)}else{const t=new y.a(e);this.addFurnitureItem(t,!1)}}})}onFurnitureListEvent(e){if(!e)return;const t=e.getParser();if(!t)return;this._furniMsgFragments||(this._furniMsgFragments=new Array(t.totalFragments));const n=new Map([...t.fragment]),i=this.mergeFragments(n,t.totalFragments,t.fragmentNumber,this._furniMsgFragments);i&&(this._ngZone.run(()=>this.processFragment(i)),this._furniMsgFragments=null)}onFurnitureListInvalidateEvent(e){e&&e.getParser()&&(this._inventoryService.furnitureVisible?this.requestLoad():this._needsUpdate=!0)}onFurnitureListRemovedEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>{this.removeItemById(t.itemId)&&this.setAllFurnitureSeen()})}onFurniturePostItPlacedEvent(e){e&&e.getParser()}onMarketplaceItemPostedEvent(e){if(!e)return;const t=e.getParser();if(!t)return;let n=null;n=1==t.result?"inventory.marketplace.result.title.success":"inventory.marketplace.result.title.failure",n=_.a.instance.localization.getValue(n);const i=_.a.instance.localization.getValue("inventory.marketplace.result."+t.result);this._notificationService.alert(i,n)}onMarketplaceItemStatsEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>this._marketPlaceItemStats=t)}onMarketplaceConfigEvent(e){if(!e)return;const t=e.getParser();t&&(this._marketPlaceConfig=t)}onMarketplaceSellEvent(e){if(!e)return;const t=e.getParser();if(t){switch(t._Str_3278){case 2:return void this._notificationService.alert(this.getTranslation("inventory.marketplace.no_trading_privilege.info"),this.getTranslation("inventory.marketplace.no_trading_privilege.title"));case 3:return void this._notificationService.alert(this.getTranslation("inventory.marketplace.no_trading_pass.info"),this.getTranslation("inventory.marketplace.no_trading_pass.title"));case 5:return;case 6:return void this._notificationService.alert(this.getTranslation("inventory.marketplace.trading_lock.info"),this.getTranslation("inventory.marketplace.trading_lock.title"))}this._ngZone.run(()=>this._inventoryService.marketPlaceOfferVisible=!0)}}getTranslation(e){return _.a.instance.localization.getValue(e)}mergeFragments(e,t,n,i){if(1===t)return e;i[n]=e;for(const s of i)if(!s)return null;const r=new Map;for(const s of i){for(const[e,t]of s)r.set(e,t);s.clear()}return i=null,r}processFragment(t){const n=this.getAllItemIds(),i=[],r=[];for(const e of t.keys())-1===n.indexOf(e)&&i.push(e);for(const e of n)t.get(e)||r.push(e);const s=0===n.length;for(const e of r)this.removeItemById(e);for(const e of i){const n=t.get(e);if(!n)continue;const i=new y.a(n);this.addFurnitureItem(i,!0)}s||i.length&&this._inventoryService.updateItemLocking(),i.length&&this._inventoryService.furniController&&(this._inventoryService.furniController.paginateConfig.currentPage=1),this._isInitialized=!0,this._inventoryService.events.next(e.INVENTORY_UPDATED),this._inventoryService.furniController&&this._inventoryService.furniController.selectExistingGroupOrDefault()}getAllItemIds(){const e=[];for(const t of this._groupItems){let n=t.getTotalCount();t.category===S.a._Str_12351&&(n=1);let i=0;for(;i<n;)e.push(t.getItemByIndex(i).id),i++}return e}getFurnitureItem(e){for(const t of this._groupItems){if(!t)continue;const n=t.getItemById(e);if(n)return n}return null}addFurnitureItem(e,t){let n=null;n=e.isGroupable?this.addGroupableFurnitureItem(e,t):this.addSingleFurnitureItem(e,t),t||(n.hasUnseenItems=!0)}addSingleFurnitureItem(e,t){const n=[];for(const s of this._groupItems)s.type===e.type&&n.push(s);for(const s of n)if(s.getItemById(e.id))return s;const i=this.isFurnitureUnseen(e),r=this.createGroupItem(e.type,e.category,e.stuffData,e.extra,t);return r.push(e,i),i?(r.hasUnseenItems=!0,this.unshiftGroupitem(r)):this.pushGroupItem(r),r}addGroupableFurnitureItem(e,t){let n=null;for(const r of this._groupItems)if(r.type===e.type&&r.isWallItem==e.isWallItem&&r.isGroupable)if(e.category===S.a._Str_5186){if(r.stuffData.getLegacyString()===e.stuffData.getLegacyString()){n=r;break}}else{if(e.category!==S.a._Str_12454){n=r;break}if(e.stuffData.compare(r.stuffData)){n=r;break}}const i=this.isFurnitureUnseen(e);return n?(n.push(e,i),i&&(n.hasUnseenItems=!0,this.removeAndUnshiftGroupitem(n)),n):(n=this.createGroupItem(e.type,e.category,e.stuffData,e.extra,t),n.push(e,i),i?(n.hasUnseenItems=!0,this.unshiftGroupitem(n)):this.pushGroupItem(n),n)}createGroupItem(e,t,n,i=NaN,r=!1){return new w(e,t,_.a.instance.roomEngine,n,i)}removeItemById(e){let t=0;for(;t<this._groupItems.length;){const n=this._groupItems[t],i=n.remove(e);if(i)return this._itemIdInFurniPlacing===i.ref&&(this.cancelRoomObjectPlacement(),this.attemptItemPlacement()||this._inventoryService.showWindow()),n.getTotalCount()<=0&&(this._groupItems.splice(t,1),n.dispose()),n;t++}return null}isFurnitureUnseen(e){let t=0;return t=e.rentable?C.a.RENTABLE:C.a.FURNI,this._inventoryService.unseenTracker._Str_3613(t,e.id)}setAllFurnitureSeen(){this._inventoryService.unseenTracker._Str_8813(C.a.FURNI);for(const e of this._groupItems)e.hasUnseenItems&&(e.hasUnseenItems=!1);this._inventoryService.updateUnseenCount()}offerOnMarketplace(){const e=this.getSelectedGroup();if(!e)return;const t=e.getItemByIndex(0);t&&t.sellable&&(this._offerOnMarketPlaceItem=t,_.a.instance.communication.connection.send(new f.a),_.a.instance.communication.connection.send(new h.a(-1,t.type)))}attemptItemPlacement(e=!1){const t=this.getSelectedGroup();if(!t)return!1;if(!t.getUnlockedCount())return!1;const n=t.getLastItem();if(!n)return!1;if(n.category===S.a._Str_3683||n.category===S.a._Str_3639||n.category===S.a._Str_3432){if(e)return!1;_.a.instance.communication.connection.send(new p.a(n.id))}else this._inventoryService.hideWindow(),this.startRoomObjectPlacement(n);return!0}startRoomObjectPlacementWithoutRequest(e){let t=0,n=!1;return t=e.isWallItem?E.a.WALL:E.a.FLOOR,n=e.category===S.a._Str_5186?_.a.instance.roomEngine.processRoomObjectPlacement(b.a.INVENTORY,e.id,t,e.type,e.stuffData.getLegacyString()):_.a.instance.roomEngine.processRoomObjectPlacement(b.a.INVENTORY,e.id,t,e.type,e.extra.toString(),e.stuffData),n}startRoomObjectPlacement(e){let t=0,n=!1;t=e.isWallItem?E.a.WALL:E.a.FLOOR,n=e.category===S.a._Str_5186?_.a.instance.roomEngine.processRoomObjectPlacement(b.a.INVENTORY,e.id,t,e.type,e.stuffData.getLegacyString()):_.a.instance.roomEngine.processRoomObjectPlacement(b.a.INVENTORY,e.id,t,e.type,e.extra.toString(),e.stuffData),n&&(this._itemIdInFurniPlacing=e.ref,this.setObjectMoverRequested(!0))}cancelRoomObjectPlacement(){this._itemIdInFurniPlacing>-1&&(_.a.instance.roomEngine.cancelRoomObjectPlacement(),this.setObjectMoverRequested(!1),this._itemIdInFurniPlacing=-1)}getGroupItemForFurnitureId(e){for(const t of this._groupItems)if(t.getItemById(e))return t;return null}getSelectedGroup(){for(const e of this._groupItems)if(e&&e.selected)return e;return null}unshiftGroupitem(e){this._groupItems.unshift(e)}pushGroupItem(e){this._groupItems.push(e)}removeGroupItem(e){const t=this._groupItems.indexOf(e);t>-1&&this._groupItems.splice(t,1)}removeAndUnshiftGroupitem(e){this.removeGroupItem(e),this.unshiftGroupitem(e)}unlockAllItems(){for(const e of this._groupItems)e.unlockAllItems()}unselectAllGroupItems(){for(const e of this._groupItems)e.selected=!1}requestLoad(){this._needsUpdate=!1,_.a.instance.communication.connection.send(new m.a)}setObjectMoverRequested(e){this._isObjectMoverRequested!==e&&this._ngZone.run(()=>this._isObjectMoverRequested=e)}get controller(){return this._inventoryService.controller}get isInitalized(){return this._isInitialized}get needsUpdate(){return this._needsUpdate}get groupItems(){return this._groupItems}get isObjectMoverRequested(){return this._isObjectMoverRequested}get search(){return this._search}set search(e){this._search=e}get searchType(){return this._searchType}set searchType(e){this._searchType=e}get offerOnMarketPlaceItem(){return this._offerOnMarketPlaceItem}get marketPlaceConfig(){return this._marketPlaceConfig}get marketPlaceItemStats(){return this._marketPlaceItemStats}set marketPlaceItemStats(e){this._marketPlaceItemStats=e}}return e.INVENTORY_UPDATED="IFS_INVENTORY_UPDATED",e.SELECT_FIRST_GROUP="IFS_SELECT_FIRST_GROUP",e.SELECT_EXISTING_GROUP_DEFAULT="IFS_SELECT_EXISTING_GROUP_DEFAULT",e.\u0275fac=function(t){return new(t||e)(R.kc(T.a),R.kc(O.a),R.kc(R.H))},e.\u0275prov=R.Ub({token:e,factory:e.\u0275fac}),e})()},b0LC:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n("wYOr"),r=n("Vbhl"),s=n("bwAN"),c=n("saAv"),o=n("WS8Q"),a=n("uiRB"),l=n("fXoL");let d=(()=>{class e{constructor(e){this._ngZone=e,this._volumeSystem=0,this._volumeFurni=0,this._volumeTrax=0,this._internalSamples=new i.a,this._externalSamples=new i.a,this._furniSoundObjects=new i.a,this.onRoomEngineSamplePlaybackEvent=this.onRoomEngineSamplePlaybackEvent.bind(this),this.onRoomEngineObjectRemovedEvent=this.onRoomEngineObjectRemovedEvent.bind(this),this.onRoomEngineDisposedEvent=this.onRoomEngineDisposedEvent.bind(this),this.onNitroSettingsEvent=this.onNitroSettingsEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{s.a.instance.roomEngine.events.addEventListener(a.a.PLAY_SAMPLE,this.onRoomEngineSamplePlaybackEvent),s.a.instance.roomEngine.events.addEventListener(o.a.REMOVED,this.onRoomEngineObjectRemovedEvent),s.a.instance.roomEngine.events.addEventListener(c.a.DISPOSED,this.onRoomEngineDisposedEvent),s.a.instance.events.addEventListener(r.a.SETTINGS_UPDATED,this.onNitroSettingsEvent)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{s.a.instance.roomEngine.events.removeEventListener(a.a.PLAY_SAMPLE,this.onRoomEngineSamplePlaybackEvent),s.a.instance.roomEngine.events.removeEventListener(o.a.REMOVED,this.onRoomEngineObjectRemovedEvent),s.a.instance.roomEngine.events.addEventListener(c.a.DISPOSED,this.onRoomEngineDisposedEvent),s.a.instance.events.removeEventListener(r.a.SETTINGS_UPDATED,this.onNitroSettingsEvent)})}onRoomEngineSamplePlaybackEvent(e){e&&this.playFurniSample(e.objectId,e.sampleId,this._volumeFurni,e.pitch)}onRoomEngineObjectRemovedEvent(e){e&&this.killFurniAudio(e.objectId)}onRoomEngineDisposedEvent(e){e&&this._furniSoundObjects.getKeys().forEach(e=>{this.killFurniAudio(e)})}onNitroSettingsEvent(e){if(!e)return;const t=e.volumeFurni!==this._volumeFurni;this._volumeSystem=e.volumeSystem,this._volumeFurni=e.volumeFurni,this._volumeTrax=e.volumeTrax,t&&this.updateFurniSoundObjectsVolume()}playInternalSample(e){this._internalSamples.hasKey(e)||this._internalSamples.add(e,new Audio("assets/sounds/"+e+".mp3")),this.generateAudio(this._internalSamples.getValue(e),this._volumeSystem).play()}playFurniSample(e,t,n,i=1){if(!this._externalSamples.hasKey(t)){const e=s.a.instance.getConfiguration("external.samples.url");this._externalSamples.add(t,new Audio(e.replace("%sample%",t.toString())))}this.killFurniAudio(e);const r=this.generateAudio(this._externalSamples.getValue(t),n,i);this._furniSoundObjects.add(e,r),r.play()}generateAudio(e,t,n=1){const i=e.cloneNode();return i.volume=t,i}killFurniAudio(e){this._furniSoundObjects.hasKey(e)&&(this._furniSoundObjects.getValue(e).pause(),this._furniSoundObjects.remove(e))}updateFurniSoundObjectsVolume(){this._furniSoundObjects.getKeys().forEach(e=>{this._furniSoundObjects.getValue(e).volume=this._volumeFurni})}}return e.\u0275fac=function(t){return new(t||e)(l.kc(l.H))},e.\u0275prov=l.Ub({token:e,factory:e.\u0275fac}),e})()},cC5F:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("fXoL"),r=n("Ch3E"),s=n("bwAN"),c=n("+FnT"),o=n("sIeP"),a=n("s3Uu");class l{constructor(e,t){this._communication=e,this._inventoryService=t,this._unseenItems=[],this._messages=[],this.registerMessages()}dispose(){this.unregisterMessages(),this._communication=null,this._unseenItems=null}registerMessages(){this.unregisterMessages(),this._messages=[new a.a(this.onUnseenItemsEvent.bind(this))];for(const e of this._messages)this._communication.registerMessageEvent(e)}unregisterMessages(){for(const e of this._messages)this._communication.removeMessageEvent(e);this._messages=[]}_Str_8813(e){return!!this._Str_5621(e)&&(delete this._unseenItems[e],this._Str_20981(e),!0)}_Str_18075(e,t){if(!this._Str_5621(e))return!1;const n=this._unseenItems[e];for(const i of t)n.splice(n.indexOf(i),1);return this._Str_23994(e,t),!0}_Str_17159(e){return!this._Str_5621(e)&&(delete this._unseenItems[e],this._Str_20981(e),!0)}_Str_3613(e,t){return!!this._unseenItems[e]&&this._unseenItems[e].indexOf(t)>=0}_Str_16745(e,t){if(!this._unseenItems[e])return!1;const n=this._unseenItems[e],i=n.indexOf(t);return-1!==i&&(n.splice(i,1),!0)}_Str_11239(e){return this._unseenItems?this._unseenItems[e]:[]}_Str_5621(e){return this._unseenItems[e]?this._unseenItems[e].length:0}onUnseenItemsEvent(e){if(!e)return;const t=e.getParser();if(t){for(const e of t.categories){const n=t.getItemsByCategory(e);this._Str_18112(e,n)}this._inventoryService.updateUnseenCount()}}_Str_18112(e,t){if(!t)return;let n=this._unseenItems[e];n||(n=[],this._unseenItems[e]=n);for(const i of t)-1===n.indexOf(i)&&n.push(i)}_Str_20981(e){}_Str_23994(e,t){}}var d=n("WnqX");let u=(()=>{class e{constructor(e,t){this._settingsService=e,this._ngZone=t,this._messages=[],this._events=null,this._botsController=null,this._badgesController=null,this._furniController=null,this._controller=null,this._petsController=null,this._tradeController=null,this._roomSession=null,this._unseenCount=0,this._botsVisible=!1,this._furnitureVisible=!0,this._badgesVisible=!1,this._petsVisible=!1,this._tradingVisible=!1,this._marketPlaceOfferVisible=!1,this._figureSetIds=[],this._boundFurnitureNames=[],this._events=new i.r,this._unseenTracker=new l(s.a.instance.communication,this),this._unseenCounts=new Map,this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages(),this._unseenTracker&&(this._unseenTracker.dispose(),this._unseenTracker=null)}registerMessages(){this._ngZone.runOutsideAngular(()=>{s.a.instance.roomSessionManager.events.addEventListener(c.a.STARTED,this.onRoomSessionEvent),s.a.instance.roomSessionManager.events.addEventListener(c.a.ENDED,this.onRoomSessionEvent),this._messages=[new r.a(this.onFigureSetIdsMessageEvent.bind(this))];for(const e of this._messages)s.a.instance.communication.registerMessageEvent(e)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{s.a.instance.roomSessionManager.events.removeEventListener(c.a.STARTED,this.onRoomSessionEvent),s.a.instance.roomSessionManager.events.removeEventListener(c.a.ENDED,this.onRoomSessionEvent);for(const e of this._messages)s.a.instance.communication.removeMessageEvent(e);this._messages=[]})}onRoomSessionEvent(e){if(e)switch(e.type){case c.a.STARTED:return void(this._roomSession=e.session);case c.a.ENDED:return this._roomSession=null,void this._ngZone.run(()=>this.hideWindow())}}onFigureSetIdsMessageEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>{this._figureSetIds=t.figureSetIds,this._boundFurnitureNames=t.boundsFurnitureNames})}updateUnseenCount(){setTimeout(()=>{this._ngZone.run(()=>{let e=0;const t=this._unseenTracker._Str_5621(o.a.FURNI);e+=t;const n=this._unseenTracker._Str_5621(o.a.BOT);e+=n;const i=this._unseenTracker._Str_5621(o.a.PET);e+=i;const r=this._unseenTracker._Str_5621(o.a.BADGE);e+=r,this._unseenCounts.set(o.a.FURNI,t),this._unseenCounts.set(o.a.BOT,n),this._unseenCounts.set(o.a.BADGE,r),this._unseenCounts.set(o.a.PET,i),this._unseenCount=e})},1)}updateItemLocking(){this.controller&&this.controller.updateItemLocking()}showWindow(){this._settingsService.showInventory()}hideWindow(){this.furniController&&(this.furniController.mouseDown=!1),this._settingsService.hideInventory()}hasFigureSetId(e){return this._figureSetIds.indexOf(e)>-1}hasBoundFigureSetFurniture(e){return this._boundFurnitureNames.indexOf(e)>-1}hideAllControllers(){this.furnitureVisible=!1,this.botsVisible=!1,this.petsVisible=!1,this.badgesVisible=!1}get events(){return this._events}get botsController(){return this._botsController}set botsController(e){this._botsController=e}set badgesController(e){this._badgesController=e}get furniController(){return this._furniController}set furniController(e){this._furniController=e}get controller(){return this._controller}set controller(e){this._controller=e}get petsController(){return this._petsController}set petsController(e){this._petsController=e}get tradeController(){return this._tradeController}set tradeController(e){this._tradeController=e}get unseenTracker(){return this._unseenTracker}get roomSession(){return this._roomSession}get furniUnseenCount(){return this._unseenCounts.get(o.a.FURNI)}get botUnseenCount(){return this._unseenCounts.get(o.a.BOT)}get petUnseenCount(){return this._unseenCounts.get(o.a.PET)}get badgeUnseenCount(){return this._unseenCounts.get(o.a.BADGE)}get unseenCount(){return this._unseenCount}get botsVisible(){return this._botsVisible}set botsVisible(e){this._botsVisible=e}get furnitureVisible(){return this._furnitureVisible}set furnitureVisible(e){this._furnitureVisible=e}get badgesVisible(){return this._badgesVisible}set badgesVisible(e){this._badgesVisible=e}get petsVisible(){return this._petsVisible}set petsVisible(e){this._petsVisible=e}get tradingVisible(){return this._tradingVisible}set tradingVisible(e){this._tradingVisible=e}get marketPlaceOfferVisible(){return this._marketPlaceOfferVisible}set marketPlaceOfferVisible(e){this._marketPlaceOfferVisible=e}get figureSetIds(){return this._figureSetIds}get boundFurnitureNames(){return this._boundFurnitureNames}}return e.\u0275fac=function(t){return new(t||e)(i.kc(d.a),i.kc(i.H))},e.\u0275prov=i.Ub({token:e,factory:e.\u0275fac}),e})()},cEnG:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n("djwq"),r=n("w9ZJ"),s=n("fXoL");function c(e,t){if(1&e&&s.Zb(0,"img",9),2&e){const e=s.qc(2);s.yc("src",e.getImage(1),s.Nc)}}function o(e,t){if(1&e&&(s.dc(0,"div",7),s.Uc(1,c,1,1,"img",8),s.cc()),2&e){const e=s.qc();s.Kb(1),s.yc("ngIf",e.getImage(1))}}function a(e,t){if(1&e&&s.Zb(0,"div",14),2&e){const e=s.qc(2);s.yc("roomPreviewer",e.roomPreviewer)("width",364)("height",182)}}function l(e,t){if(1&e&&(s.dc(0,"div",15),s.Zb(1,"img",9),s.cc()),2&e){const e=s.qc(2);s.Kb(1),s.yc("src",e.offerImage(e.activeOffer),s.Nc)}}function d(e,t){if(1&e&&(s.dc(0,"div",10),s.dc(1,"div",11),s.Wc(2),s.cc(),s.Uc(3,a,1,3,"div",12),s.Uc(4,l,2,1,"div",13),s.cc()),2&e){const e=s.qc();s.Kb(2),s.Xc(e.offerName(e.activeOffer)),s.Kb(1),s.yc("ngIf",e.roomPreviewerVisible),s.Kb(1),s.yc("ngIf",!e.roomPreviewerVisible)}}const u=function(e){return{"background-image":e}};function h(e,t){if(1&e){const e=s.ec();s.dc(0,"div",16),s.nc("click",function(){s.Lc(e);const n=t.$implicit;return s.qc().requestOfferData(n)}),s.Zb(1,"button",17),s.cc()}if(2&e){const e=t.$implicit,n=s.qc();s.Kb(1),s.yc("ngStyle",s.Cc(1,u,"url("+n.searchItemImage(e)+")"))}}function g(e,t){if(1&e&&s.Zb(0,"div",18),2&e){const e=s.qc();s.yc("activePage",e.activePage)("activeOffer",e.activeOffer)("quantityEnabled",e.activeOffer.bundlePurchaseAllowed)}}let m=(()=>{class e extends i.a{requestOfferData(e){this._catalogService.requestOfferData(e.purchaseOfferId)}searchItemImage(e){return e?this._catalogService.getFurnitureDataIconUrl(e):null}get searchItems(){return this._catalogService.activePage instanceof r.a?this._catalogService.activePage.furni:[]}}return e.CODE="search_results",e.\u0275fac=function(t){return f(t||e)},e.\u0275cmp=s.Sb({type:e,selectors:[["ng-component"]],features:[s.Hb],decls:7,vars:4,consts:[[1,"d-flex","flex-column","w-100","h-100"],["class","d-flex flex-column justify-content-center align-items-center w-100 h-100 mb-2",4,"ngIf"],["class","position-relative d-flex flex-column justify-content-center align-items-center w-100 h-100 mb-2",4,"ngIf"],[1,"grid-container","w-100",2,"min-height","209px","max-height","209px","height","209px"],[1,"grid-items","grid-6"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],["class","d-flex align-items-center flex-grow-1 w-100 mt-1","nitro-catalog-purchase-component","",3,"activePage","activeOffer","quantityEnabled",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","mb-2"],["image-placeholder","",3,"src",4,"ngIf"],["image-placeholder","",3,"src"],[1,"position-relative","d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","mb-2"],[1,"position-absolute","bg-secondary","rounded","text-center","m-2","p-2","t-0","l-0",2,"z-index","1"],["class","room-preview","nitro-room-preview-component","",3,"roomPreviewer","width","height",4,"ngIf"],["class","d-flex justify-content-center align-items-center h-100 w-100",4,"ngIf"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","width","height"],[1,"d-flex","justify-content-center","align-items-center","h-100","w-100"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image",3,"ngStyle"],["nitro-catalog-purchase-component","",1,"d-flex","align-items-center","flex-grow-1","w-100","mt-1",3,"activePage","activeOffer","quantityEnabled"]],template:function(e,t){1&e&&(s.dc(0,"div",0),s.Uc(1,o,2,1,"div",1),s.Uc(2,d,5,3,"div",2),s.dc(3,"perfect-scrollbar",3),s.dc(4,"div",4),s.Uc(5,h,2,3,"div",5),s.cc(),s.cc(),s.Uc(6,g,1,3,"div",6),s.cc()),2&e&&(s.Kb(1),s.yc("ngIf",!t.activeOffer),s.Kb(1),s.yc("ngIf",t.activeOffer),s.Kb(3),s.yc("ngForOf",t.searchItems),s.Kb(1),s.yc("ngIf",t.activeOffer))},encapsulation:2}),e})();const f=s.fc(m)},cSuP:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("wYOr"),r=n("3+UD"),s=n("bwAN"),c=n("8c0Z"),o=n("fXoL");let a=(()=>{class e{constructor(e){this._ngZone=e,this._lastRoomId=-1,this._maxHistoryItems=100,this._historyItems=[],this._maxHistoryItems=s.a.instance.getConfiguration("chat.history.max.items",100),this._queuedItems=new i.a,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),this._messages=[new r.a(this.onRoomInfoEvent.bind(this))];for(const e of this._messages)s.a.instance.communication.registerMessageEvent(e)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(this._messages&&this._messages.length){for(const e of this._messages)s.a.instance.communication.removeMessageEvent(e);this._messages=[]}})}onRoomInfoEvent(e){if(!e)return;const t=e.getParser();if(!t)return;const n=t.data;this._lastRoomId!==n.roomId&&this._ngZone.run(()=>{this._lastRoomId=n.roomId;const e=new c.a;e.content=t.data.roomName+"",this.addItem(this._lastRoomId,e),this.processQueue(this._lastRoomId)})}addItem(e,t){t&&this._ngZone.run(()=>{if(e===this._lastRoomId)this._historyItems.length>=this._maxHistoryItems&&this._historyItems.shift(),this._historyItems.push(t);else{const n=this.getQueuedSet(e);n&&n.push(t)}})}getQueuedSet(e){let t=this._queuedItems.getValue(e);return t||(t=[],this._queuedItems.add(e,t)),t}processQueue(e){const t=this._queuedItems.getValue(e);if(t){for(const n of t)n&&this.addItem(e,n);this._queuedItems.remove(e)}}get historyItems(){return this._historyItems}}return e.MESSAGE_RECEIVED="CHS_MESSAGE_RECEIVED",e.\u0275fac=function(t){return new(t||e)(o.kc(o.H))},e.\u0275prov=o.Ub({token:e,factory:e.\u0275fac}),e})()},dUWl:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n("djwq"),r=n("fXoL");function s(e,t){if(1&e&&r.Zb(0,"img",9),2&e){const e=r.qc(2);r.yc("src",e.getImage(1),r.Nc)}}function c(e,t){if(1&e&&(r.dc(0,"div",7),r.Uc(1,s,1,1,"img",8),r.cc()),2&e){const e=r.qc();r.Kb(1),r.yc("ngIf",e.getImage(1))}}function o(e,t){if(1&e&&r.Zb(0,"div",14),2&e){const e=r.qc(2);r.yc("roomPreviewer",e.roomPreviewer)("width",366)("height",180)}}function a(e,t){if(1&e&&(r.dc(0,"div",15),r.Zb(1,"img",9),r.cc()),2&e){const e=r.qc(2);r.Kb(1),r.yc("src",e.offerImage(e.activeOffer),r.Nc)}}function l(e,t){if(1&e&&(r.dc(0,"div",10),r.dc(1,"div",11),r.Wc(2),r.cc(),r.Uc(3,o,1,3,"div",12),r.Uc(4,a,2,1,"div",13),r.cc()),2&e){const e=r.qc();r.Kb(2),r.Xc(e.offerName(e.activeOffer)),r.Kb(1),r.yc("ngIf",e.roomPreviewerVisible),r.Kb(1),r.yc("ngIf",!e.roomPreviewerVisible)}}const d=function(e){return{active:e}};function u(e,t){if(1&e){const e=r.ec();r.dc(0,"div",16),r.nc("click",function(){r.Lc(e);const n=t.$implicit;return r.qc().selectOffer(n)}),r.Zb(1,"button",17),r.cc()}if(2&e){const e=t.$implicit,n=r.qc();r.Kb(1),r.yc("ngClass",r.Cc(6,d,n.activeOffer===e))("scale",4)("figure",e&&e.products[0]&&e.products[0].extraParam)("direction",3)("headOnly",!0)("asBackground",!0)}}function h(e,t){if(1&e&&r.Zb(0,"div",18),2&e){const e=r.qc();r.yc("activePage",e.activePage)("activeOffer",e.activeOffer)("quantityEnabled",e.activeOffer.bundlePurchaseAllowed)}}let g=(()=>{class e extends i.a{}return e.CODE="bots",e.\u0275fac=function(t){return m(t||e)},e.\u0275cmp=r.Sb({type:e,selectors:[["ng-component"]],features:[r.Hb],decls:7,vars:4,consts:[[1,"d-flex","flex-column","w-100","h-100"],["class","d-flex flex-column justify-content-center align-items-center w-100 h-100 mb-2",4,"ngIf"],["class","position-relative d-flex flex-column justify-content-center align-items-center w-100 mb-2",4,"ngIf"],[1,"grid-container","w-100",2,"min-height","209px","max-height","209px","height","209px"],[1,"grid-items","grid-6"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],["class","d-flex align-items-end flex-grow-1 w-100 mt-1","nitro-catalog-purchase-component","",3,"activePage","activeOffer","quantityEnabled",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","mb-2"],["image-placeholder","",3,"src",4,"ngIf"],["image-placeholder","",3,"src"],[1,"position-relative","d-flex","flex-column","justify-content-center","align-items-center","w-100","mb-2"],[1,"position-absolute","bg-secondary","rounded","text-center","m-2","p-2","t-0","l-0",2,"z-index","1"],["class","room-preview","nitro-room-preview-component","",3,"roomPreviewer","width","height",4,"ngIf"],["class","d-flex justify-content-center align-items-center h-100 w-100",4,"ngIf"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","width","height"],[1,"d-flex","justify-content-center","align-items-center","h-100","w-100"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button","avatar-image","",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image",3,"ngClass","scale","figure","direction","headOnly","asBackground"],["nitro-catalog-purchase-component","",1,"d-flex","align-items-end","flex-grow-1","w-100","mt-1",3,"activePage","activeOffer","quantityEnabled"]],template:function(e,t){1&e&&(r.dc(0,"div",0),r.Uc(1,c,2,1,"div",1),r.Uc(2,l,5,3,"div",2),r.dc(3,"perfect-scrollbar",3),r.dc(4,"div",4),r.Uc(5,u,2,8,"div",5),r.cc(),r.cc(),r.Uc(6,h,1,3,"div",6),r.cc()),2&e&&(r.Kb(1),r.yc("ngIf",!t.activeOffer),r.Kb(1),r.yc("ngIf",t.activeOffer),r.Kb(3),r.yc("ngForOf",t.offers),r.Kb(1),r.yc("ngIf",t.activeOffer))},encapsulation:2}),e})();const m=r.fc(g)},djwq:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var i=n("fWLT"),r=n("u0Tz"),s=n("fXoL");function c(e,t){if(1&e&&s.Zb(0,"img",9),2&e){const e=s.qc(2);s.yc("src",e.getImage(1),s.Nc)}}function o(e,t){if(1&e&&(s.dc(0,"div",7),s.Uc(1,c,1,1,"img",8),s.cc()),2&e){const e=s.qc();s.Kb(1),s.yc("ngIf",e.getImage(1))}}function a(e,t){if(1&e&&(s.dc(0,"div",15),s.dc(1,"div"),s.Zb(2,"div",16),s.rc(3,"uniqueNumber"),s.Wc(4),s.rc(5,"translate"),s.cc(),s.dc(6,"div"),s.Zb(7,"div",16),s.rc(8,"uniqueNumber"),s.Wc(9),s.rc(10,"translate"),s.cc(),s.cc()),2&e){const e=s.qc(2);s.Kb(2),s.yc("innerHtml",s.sc(3,4,e.activeOffer.products[0].uniqueLimitedItemsLeft),s.Mc),s.Kb(2),s.Yc(" ",s.sc(5,6,"unique.items.left")," "),s.Kb(3),s.yc("innerHtml",s.sc(8,8,e.activeOffer.products[0].uniqueLimitedSeriesSize),s.Mc),s.Kb(2),s.Yc(" ",s.sc(10,10,"unique.items.number.sold")," ")}}function l(e,t){if(1&e&&s.Zb(0,"div",17),2&e){const e=s.qc(2);s.yc("roomPreviewer",e.roomPreviewer)("width",366)("height",180)}}function d(e,t){if(1&e&&(s.dc(0,"div",18),s.Zb(1,"img",9),s.cc()),2&e){const e=s.qc(2);s.Kb(1),s.yc("src",e.offerImage(e.activeOffer),s.Nc)}}function u(e,t){if(1&e&&(s.dc(0,"div",10),s.dc(1,"div",11),s.Wc(2),s.cc(),s.Uc(3,a,11,12,"div",12),s.Uc(4,l,1,3,"div",13),s.Uc(5,d,2,1,"div",14),s.cc()),2&e){const e=s.qc();s.Kb(2),s.Xc(e.offerName(e.activeOffer)),s.Kb(1),s.yc("ngIf",e.activeOffer.products[0].uniqueLimitedItem),s.Kb(1),s.yc("ngIf",e.roomPreviewerVisible),s.Kb(1),s.yc("ngIf",!e.roomPreviewerVisible)}}function h(e,t){if(1&e&&(s.dc(0,"div",25),s.Wc(1),s.cc()),2&e){const e=s.qc(2).$implicit,t=s.qc();s.Kb(1),s.Xc(t.offerCount(e))}}function g(e,t){if(1&e&&(s.Zb(0,"div",26),s.rc(1,"uniqueNumber")),2&e){const e=s.qc(2).$implicit;s.yc("innerHtml",s.sc(1,1,e.products[0].uniqueLimitedSeriesSize),s.Mc)}}const m=function(e,t,n){return{active:e,unique:t,"sold-out":n}},f=function(e){return{"background-image":e}};function p(e,t){if(1&e){const e=s.ec();s.dc(0,"div",20),s.nc("click",function(){s.Lc(e);const t=s.qc().$implicit;return s.qc().selectOffer(t)}),s.dc(1,"button",21),s.Zb(2,"div",22),s.Uc(3,h,2,1,"div",23),s.Uc(4,g,2,3,"div",24),s.cc(),s.cc()}if(2&e){const e=s.qc().$implicit,t=s.qc();s.Kb(1),s.yc("ngClass",s.Ec(4,m,t.activeOffer===e,e.products[0].uniqueLimitedItem,e.products[0].uniqueLimitedItem&&!e.products[0].uniqueLimitedItemsLeft)),s.Kb(1),s.yc("ngStyle",s.Cc(8,f,"url("+t.offerImage(e)+")")),s.Kb(1),s.yc("ngIf",t.offerCount(e)>1),s.Kb(1),s.yc("ngIf",e.products[0].uniqueLimitedItem)}}function _(e,t){if(1&e&&(s.bc(0),s.Uc(1,p,5,10,"div",19),s.ac()),2&e){const e=t.$implicit;s.Kb(1),s.yc("ngIf",e.products[0])}}function b(e,t){if(1&e&&s.Zb(0,"div",27),2&e){const e=s.qc();s.yc("activePage",e.activePage)("activeOffer",e.activeOffer)("quantityEnabled",e.activeOffer.bundlePurchaseAllowed)}}let v=(()=>{class e extends i.a{selectOffer(e){if(!e)return;const t=e.products[0];t&&(this.roomPreviewerVisible=-1==[r.a.BADGE].indexOf(t.productType),this._catalogService.component&&this._catalogService.component.selectOffer(e))}offerCount(e){if(!this.hasMultipleProducts(e)){const t=this.getFirstProduct(e);if(t)return t.productCount}return 1}}return e.CODE="default_3x3",e.\u0275fac=function(t){return E(t||e)},e.\u0275cmp=s.Sb({type:e,selectors:[["ng-component"]],features:[s.Hb],decls:7,vars:4,consts:[[1,"d-flex","flex-column","w-100","h-100"],["class","d-flex flex-column justify-content-center align-items-center w-100 h-100 mb-2",4,"ngIf"],["class","position-relative d-flex flex-column justify-content-center align-items-center w-100 mb-2",4,"ngIf"],[1,"grid-container","w-100",2,"min-height","209px","max-height","209px","height","209px"],[1,"grid-items","grid-6"],[4,"ngFor","ngForOf"],["class","d-flex align-items-end flex-grow-1 w-100 mt-1","nitro-catalog-purchase-component","",3,"activePage","activeOffer","quantityEnabled",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","mb-2"],["image-placeholder","",3,"src",4,"ngIf"],["image-placeholder","",3,"src"],[1,"position-relative","d-flex","flex-column","justify-content-center","align-items-center","w-100","mb-2"],[1,"position-absolute","bg-secondary","rounded","text-center","m-2","p-2","t-0","l-0",2,"z-index","1"],["class","unique-counter-complete position-absolute","style","z-index:1;",4,"ngIf"],["class","room-preview","nitro-room-preview-component","",3,"roomPreviewer","width","height",4,"ngIf"],["class","d-flex justify-content-center align-items-center h-100 w-100",4,"ngIf"],[1,"unique-counter-complete","position-absolute",2,"z-index","1"],[3,"innerHtml"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","width","height"],[1,"d-flex","justify-content-center","align-items-center","h-100","w-100"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngIf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info",3,"ngClass"],[1,"position-absolute","detail-info","has-image",3,"ngStyle"],["class","position-absolute bg-danger px-1 py-0 rounded shadow count",4,"ngIf"],["class","position-absolute unique-counter",3,"innerHtml",4,"ngIf"],[1,"position-absolute","bg-danger","px-1","py-0","rounded","shadow","count"],[1,"position-absolute","unique-counter",3,"innerHtml"],["nitro-catalog-purchase-component","",1,"d-flex","align-items-end","flex-grow-1","w-100","mt-1",3,"activePage","activeOffer","quantityEnabled"]],template:function(e,t){1&e&&(s.dc(0,"div",0),s.Uc(1,o,2,1,"div",1),s.Uc(2,u,6,4,"div",2),s.dc(3,"perfect-scrollbar",3),s.dc(4,"div",4),s.Uc(5,_,2,1,"ng-container",5),s.cc(),s.cc(),s.Uc(6,b,1,3,"div",6),s.cc()),2&e&&(s.Kb(1),s.yc("ngIf",!t.activeOffer),s.Kb(1),s.yc("ngIf",t.activeOffer&&t.activeOffer.products[0]),s.Kb(3),s.yc("ngForOf",t.offers),s.Kb(1),s.yc("ngIf",t.activeOffer))},encapsulation:2}),e})();const E=s.fc(v)},dm2L:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("gKK4"),r=n("VFvI"),s=n("fXoL");let c=(()=>{class e extends i.a{get code(){return e.CODE}get negativeCode(){return e.NEGATIVE_CODE}}return e.CODE=r.a.ACTOR_IS_GROUP_MEMBER,e.NEGATIVE_CODE=r.a.NOT_ACTOR_IN_GROUP,e.\u0275fac=function(t){return o(t||e)},e.\u0275cmp=s.Sb({type:e,selectors:[["ng-component"]],features:[s.Hb],decls:1,vars:0,template:function(e,t){1&e&&s.Zb(0,"nitro-wired-base-component")},encapsulation:2}),e})();const o=s.fc(c)},"f/8j":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("bwAN"),r=n("fXoL"),s=n("YPdD");let c=(()=>{class e{constructor(){this.badge="",this.isGroup=!1,this.hover=!0}get badgeUrl(){return this.isGroup?i.a.instance.getConfiguration("badge.asset.group.url").replace("%badgedata%",this.badge):i.a.instance.getConfiguration("badge.asset.url").replace("%badgename%",this.badge)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Sb({type:e,selectors:[["nitro-badge"]],inputs:{badge:"badge",isGroup:"isGroup",hover:"hover"},decls:1,vars:1,consts:[["image-placeholder","",3,"src"]],template:function(e,t){1&e&&r.Zb(0,"img",0),2&e&&r.yc("src",t.badgeUrl,r.Nc)},directives:[s.a],encapsulation:2}),e})()},fWLT:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("bwAN"),r=n("NGds"),s=n("fXoL"),c=n("ywHV"),o=n("afcZ");let a=(()=>{class e{constructor(e,t,n){this._catalogService=e,this._marketService=t,this._ngZone=n,this.activePage=null,this.roomPreviewerVisible=!0}getText(e=0){let t=this.activePage.localization.texts[e]||"";return t&&t.length&&(t=t.replace(/\r\n|\r|\n/g,"<br />")),t||""}getImage(e=0){const t=this.activePage.localization.images&&this.activePage.localization.images[e];if(!t||!t.length)return null;let n=i.a.instance.getConfiguration("catalog.asset.image.url");return n=n.replace("%name%",t),n}getCurrencyUrl(e){return i.a.instance.getConfiguration("currency.asset.icon.url").replace("%type%",e.toString())}getProductFurniData(e){return e?this._catalogService.getFurnitureDataForProductOffer(e):null}offerImage(e){if(!e)return"";const t=e.products[0];if(!t)return"";switch(t.productType.toUpperCase()){case r.a.BADGE:return i.a.instance.sessionDataManager.getBadgeUrl(t.extraParam);case r.a.FLOOR:return i.a.instance.roomEngine.getFurnitureFloorIconUrl(t.furniClassId);case r.a.WALL:return i.a.instance.roomEngine.getFurnitureWallIconUrl(t.furniClassId,t.extraParam)}return""}hasMultipleProducts(e){return e.products.length>1}offerName(e){const t=this._catalogService.getProductDataForLocalization(e.localizationId);return t?t.name:e.localizationId}getFirstProduct(e){return e&&e.products[0]||null}get headerText(){return this._catalogService.catalogRoot.localization||null}get offers(){return this._catalogService.activePage.offers}get activeOffer(){return this._catalogService.component&&this._catalogService.component.activeOffer||null}get roomPreviewer(){return this._catalogService.component&&this._catalogService.component.roomPreviewer||null}}return e.\u0275fac=function(t){return new(t||e)(s.Yb(c.a),s.Yb(o.a),s.Yb(s.H))},e.\u0275dir=s.Tb({type:e}),e})()},fzgV:function(e,t,n){"use strict";n.d(t,"a",function(){return E});var i=n("bwAN"),r=n("x46z"),s=n("fWLT"),c=n("u0Tz"),o=n("fXoL"),a=n("ywHV"),l=n("afcZ");function d(e,t){if(1&e&&o.Zb(0,"img",14),2&e){const e=o.qc(2);o.yc("src",e.getImage(1),o.Nc)}}function u(e,t){if(1&e&&(o.dc(0,"div",12),o.Uc(1,d,1,1,"img",13),o.cc()),2&e){const e=o.qc();o.Kb(1),o.yc("ngIf",e.getImage(1))}}function h(e,t){if(1&e&&(o.dc(0,"div",15),o.Zb(1,"nitro-badge",16),o.dc(2,"div",17),o.Wc(3),o.cc(),o.Zb(4,"div",18),o.cc()),2&e){const e=o.qc();o.Kb(1),o.yc("badge",e.selectedGroup.badge)("isGroup",!0),o.Kb(2),o.Xc(e.offerName(e.activeOffer)),o.Kb(1),o.yc("roomPreviewer",e.roomPreviewer)("width",364)("height",182)}}function g(e,t){if(1&e&&(o.dc(0,"option",19),o.Wc(1),o.cc()),2&e){const e=t.$implicit;o.yc("value",e.id),o.Kb(1),o.Xc(e.title)}}function m(e,t){if(1&e&&(o.dc(0,"div",24),o.Wc(1),o.cc()),2&e){const e=o.qc().$implicit,t=o.qc();o.Kb(1),o.Xc(t.offerCount(e))}}const f=function(e){return{active:e}},p=function(e){return{"background-image":e}};function _(e,t){if(1&e){const e=o.ec();o.dc(0,"div",20),o.nc("click",function(){o.Lc(e);const n=t.$implicit;return o.qc().selectOffer(n)}),o.dc(1,"button",21),o.Zb(2,"div",22),o.Uc(3,m,2,1,"div",23),o.cc(),o.cc()}if(2&e){const e=t.$implicit,n=o.qc();o.Kb(1),o.yc("ngClass",o.Cc(3,f,n.activeOffer===e)),o.Kb(1),o.yc("ngStyle",o.Cc(5,p,"url("+n.offerImage(e)+")")),o.Kb(1),o.yc("ngIf",n.offerCount(e)>1)}}function b(e,t){if(1&e&&o.Zb(0,"div",25),2&e){const e=o.qc();o.yc("activePage",e.activePage)("activeOffer",e.activeOffer)("quantityEnabled",e.activeOffer.bundlePurchaseAllowed)("forcedExtra",e.selectedGroupId)}}const v=function(e){return{backgroundColor:e}};let E=(()=>{class e extends s.a{constructor(e,t,n){super(e,t,n),this._catalogService=e,this._marketService=t,this._ngZone=n,this._groups=[],this._selectedGroupId=null,this._selectedGroup=null,this._lastOfferSelected=null,e.registerGroupFurniTemplate(this)}ngOnInit(){this._catalogService.requestGroups()}ngOnDestroy(){this._catalogService.component.previewStuffData=null}selectOffer(e){if(!e)return void this._catalogService.component.selectOffer(null);this._lastOfferSelected=e;const t=[];t.push("0"),t.push(this.selectedGroupId),t.push(this._selectedGroup.badge),t.push(this.selectedGroupColorA),t.push(this.selectedGroupColorB);const n=new r.a;n.setValue(t),this._catalogService.component&&(this._catalogService.component.previewStuffData=n,this._catalogService.component.selectOffer(e))}getFirstProduct(e){return e&&e.products[0]||null}hasMultipleProducts(e){return e.products.length>1}offerName(e){let t="";const n=this.getFirstProduct(e);if(n)switch(n.productType){case c.a.FLOOR:t="roomItem.name."+n.furniClassId;break;case c.a.WALL:t="wallItem.name."+n.furniClassId}return""===t?t:i.a.instance.getLocalization(t)}getProductFurniData(e){return e?this._catalogService.getFurnitureDataForProductOffer(e):null}offerImage(e){if(!e)return"";const t=e.products[0];if(!t)return"";const n=this.getProductFurniData(t);if(!n)return"";switch(t.productType){case c.a.FLOOR:case c.a.WALL:return this._catalogService.getFurnitureDataIconUrl(n)}return""}offerCount(e){if(!this.hasMultipleProducts(e)){const t=this.getFirstProduct(e);if(t)return t.productCount}return 1}get groups(){return this._groups}set groups(e){this._groups=e,e.length>0&&this._ngZone.run(()=>{this.selectedGroupId=e[0].id.toString()})}get selectedGroup(){return this._selectedGroup}get selectedGroupId(){return this._selectedGroupId}set selectedGroupId(e){this._selectedGroupId=e,this._selectedGroup=this.groups.filter(t=>t.id.toString()===e)[0],this.selectOffer(null),this.selectOffer(this._lastOfferSelected)}get selectedGroupColorA(){return this._selectedGroup?this._selectedGroup.colorA:"fff"}get selectedGroupColorB(){return this._selectedGroup?this._selectedGroup.colorB:"fff"}}return e.CODE="guild_custom_furni",e.\u0275fac=function(t){return new(t||e)(o.Yb(a.a),o.Yb(l.a),o.Yb(o.H))},e.\u0275cmp=o.Sb({type:e,selectors:[["ng-component"]],features:[o.Hb],decls:13,vars:12,consts:[[1,"d-flex","flex-column","w-100","h-100"],["class","d-flex flex-column justify-content-center align-items-center w-100 h-100 mb-2",4,"ngIf"],["class","position-relative mb-2",4,"ngIf"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"btn","btn-primary",3,"ngStyle"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"grid-container","w-100",2,"min-height","156px","max-height","156px","height","156px"],[1,"grid-items","grid-6"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],["class","d-flex align-items-center mt-2 flex-grow-1 w-100","nitro-catalog-purchase-component","",3,"activePage","activeOffer","quantityEnabled","forcedExtra",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","mb-2"],["image-placeholder","",3,"src",4,"ngIf"],["image-placeholder","",3,"src"],[1,"position-relative","mb-2"],[1,"position-absolute",2,"right","10px","z-index","1",3,"badge","isGroup"],[1,"position-absolute","bg-secondary","rounded","text-center","px-2",2,"z-index","1"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","width","height"],[3,"value"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info",3,"ngClass"],[1,"position-absolute","detail-info","has-image",3,"ngStyle"],["class","position-absolute bg-danger px-1 py-0 rounded shadow count",4,"ngIf"],[1,"position-absolute","bg-danger","px-1","py-0","rounded","shadow","count"],["nitro-catalog-purchase-component","",1,"d-flex","align-items-center","mt-2","flex-grow-1","w-100",3,"activePage","activeOffer","quantityEnabled","forcedExtra"]],template:function(e,t){1&e&&(o.dc(0,"div",0),o.Uc(1,u,2,1,"div",1),o.Uc(2,h,5,6,"div",2),o.dc(3,"div",3),o.dc(4,"div",4),o.Zb(5,"button",5),o.Zb(6,"button",5),o.cc(),o.dc(7,"select",6),o.nc("ngModelChange",function(e){return t.selectedGroupId=e}),o.Uc(8,g,2,2,"option",7),o.cc(),o.cc(),o.dc(9,"perfect-scrollbar",8),o.dc(10,"div",9),o.Uc(11,_,4,7,"div",10),o.cc(),o.cc(),o.Uc(12,b,1,4,"div",11),o.cc()),2&e&&(o.Kb(1),o.yc("ngIf",!t.activeOffer),o.Kb(1),o.yc("ngIf",t.activeOffer),o.Kb(3),o.yc("ngStyle",o.Cc(8,v,"#"+t.selectedGroupColorA)),o.Kb(1),o.yc("ngStyle",o.Cc(10,v,"#"+t.selectedGroupColorB)),o.Kb(1),o.yc("ngModel",t.selectedGroupId),o.Kb(1),o.yc("ngForOf",t.groups),o.Kb(3),o.yc("ngForOf",t.offers),o.Kb(1),o.yc("ngIf",t.activeOffer))},encapsulation:2}),e})()},"g/Uk":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("gKK4"),s=n("VFvI"),c=n("fXoL");let o=(()=>{class e extends r.a{get code(){return e.CODE}get negativeCode(){return e.NEGATIVE_CODE}get requiresFurni(){return i.a._Str_4873}}return e.CODE=s.a.FURNIS_HAVE_AVATARS,e.NEGATIVE_CODE=s.a.FURNI_NOT_HAVE_HABBO,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:1,vars:0,template:function(e,t){1&e&&c.Zb(0,"nitro-wired-base-component")},encapsulation:2}),e})();const a=c.fc(o)},gKK4:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("5+Zn");class r extends i.a{}},gxVE:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n("bwAN"),r=n("u0Tz"),s=n("djwq"),c=n("fXoL");function o(e,t){if(1&e&&c.Zb(0,"img",9),2&e){const e=c.qc();c.yc("src",e.getImage(1),c.Nc)}}function a(e,t){if(1&e&&(c.dc(0,"div",10),c.Zb(1,"div",11),c.Zb(2,"div",12),c.cc()),2&e){const e=c.qc();c.Kb(1),c.yc("roomPreviewer",e.roomPreviewer)("width",243)("height",240),c.Kb(1),c.yc("vertical",!0)("activePage",e.activePage)("activeOffer",e.activeOffer)}}function l(e,t){if(1&e&&(c.dc(0,"div",16),c.Wc(1),c.cc()),2&e){const e=c.qc().$implicit,t=c.qc();c.Kb(1),c.Xc(t.offerCount(e))}}const d=function(e){return{active:e}},u=function(e){return{"background-image":e}};function h(e,t){if(1&e){const e=c.ec();c.dc(0,"div",13),c.nc("click",function(){c.Lc(e);const n=t.$implicit;return c.qc().selectOffer(n)}),c.dc(1,"button",14),c.Uc(2,l,2,1,"div",15),c.cc(),c.cc()}if(2&e){const e=t.$implicit,n=c.qc();c.Kb(1),c.yc("ngClass",c.Cc(3,d,n.activeOffer===e))("ngStyle",c.Cc(5,u,"url("+n.offerImage(e)+")")),c.Kb(1),c.yc("ngIf",n.offerCount(e)>1)}}let g=(()=>{class e extends s.a{constructor(){super(...arguments),this._groupNames=["wallpaper","floor","landscape"],this._groups=[],this._activeGroupIndex=-1}ngOnInit(){this.sortOffers(),this.selectFirstSpace()}sortOffers(){for(const e of this.offers){if(!e)continue;const t=this.getFirstProduct(e);if(t&&(t.productType===r.a.WALL||t.productType===r.a.FLOOR)){const n=this.getProductFurniData(t);if(n){const t=n.className,i=this._groupNames.indexOf(t);for(-1===i&&this._groupNames.push(t);this._groups.length<this._groupNames.length;)this._groups.push([]);switch(t){case"floor":case"wallpaper":case"landscape":this._groups[i].push(e)}}}}this.switchCategory("walls")}switchCategory(e){let t=-1;switch(e){case"walls":t=0;break;case"floor":t=1;break;case"landscape":t=2}this._activeGroupIndex=t}selectFirstSpace(){if(-1===this._activeGroupIndex)return;const e=this._groups[this.activeGroupIndex];e&&e.length&&this.selectOffer(e[0])}offerName(e){let t="";const n=this.getFirstProduct(e);if(n)switch(n.productType){case r.a.FLOOR:t="roomItem.name."+n.furniClassId;break;case r.a.WALL:t="wallItem.name."+n.furniClassId}return""===t?t:i.a.instance.getLocalization(t)}offerImage(e){if(!e)return"";const t=e.products[0];if(!t)return"";const n=this.getProductFurniData(t);if(!n)return"";const s=i.a.instance.getConfiguration("catalog.asset.url");let c="";switch(t.productType){case r.a.WALL:switch(n.className){case"floor":c=["th",n.className,t.extraParam].join("_");break;case"wallpaper":c=["th","wall",t.extraParam].join("_");break;case"landscape":c=["th",n.className,t.extraParam.replace(".","_"),"001"].join("_")}break;default:return super.offerImage(e)}return s+"/"+c+".png"}get groups(){return this._groups}get activeGroupIndex(){return this._activeGroupIndex}}return e.CODE="spaces_new",e.\u0275fac=function(t){return m(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:17,vars:21,consts:[[1,"d-flex","flex-column","w-100","h-100","nitro-catalog-layout-spaces-component"],[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","mb-2"],["image-placeholder","",3,"src",4,"ngIf"],["class","d-flex position-relative w-100 h-100",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-cente","btn-group","mt-2"],["type","button",1,"btn","btn-primary","btn-sm",3,"ngClass","click"],[1,"grid-container","w-100",2,"min-height","209px","max-height","209px","height","209px"],[1,"grid-items","grid-6"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],["image-placeholder","",3,"src"],[1,"d-flex","position-relative","w-100","h-100"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","width","height"],["nitro-catalog-purchase-component","",1,"d-flex","flex-grow-1","ml-2",3,"vertical","activePage","activeOffer"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image",3,"ngClass","ngStyle"],["class","position-absolute bg-danger px-1 py-0 rounded shadow count",4,"ngIf"],[1,"position-absolute","bg-danger","px-1","py-0","rounded","shadow","count"]],template:function(e,t){1&e&&(c.dc(0,"div",0),c.dc(1,"div",1),c.Uc(2,o,1,1,"img",2),c.Uc(3,a,3,6,"div",3),c.dc(4,"div",4),c.dc(5,"button",5),c.nc("click",function(){return t.switchCategory("walls")}),c.Wc(6),c.rc(7,"translate"),c.cc(),c.dc(8,"button",5),c.nc("click",function(){return t.switchCategory("floor")}),c.Wc(9),c.rc(10,"translate"),c.cc(),c.dc(11,"button",5),c.nc("click",function(){return t.switchCategory("landscape")}),c.Wc(12),c.rc(13,"translate"),c.cc(),c.cc(),c.cc(),c.dc(14,"perfect-scrollbar",6),c.dc(15,"div",7),c.Uc(16,h,3,7,"div",8),c.cc(),c.cc(),c.cc()),2&e&&(c.Kb(2),c.yc("ngIf",!t.activeOffer&&t.getImage(1)),c.Kb(1),c.yc("ngIf",t.activeOffer),c.Kb(2),c.yc("ngClass",c.Cc(15,d,0===t.activeGroupIndex)),c.Kb(1),c.Xc(c.sc(7,9,"catalog.spaces.tab.walls")),c.Kb(2),c.yc("ngClass",c.Cc(17,d,1===t.activeGroupIndex)),c.Kb(1),c.Xc(c.sc(10,11,"catalog.spaces.tab.floors")),c.Kb(2),c.yc("ngClass",c.Cc(19,d,2===t.activeGroupIndex)),c.Kb(1),c.Xc(c.sc(13,13,"catalog.spaces.tab.views")),c.Kb(4),c.yc("ngForOf",t.groups[t.activeGroupIndex]))},encapsulation:2}),e})();const m=c.fc(g)},hJ6O:function(e,t,n){"use strict";n.d(t,"a",function(){return _});var i=n("wYOr"),r=n("0T66"),s=n("eOr9"),c=n("zLx7"),o=n("j1tQ"),a=n("bwAN"),l=n("Vm8J"),d=n("WS8Q"),u=n("ssUo"),h=n("IdQr");class g{constructor(e){this._botData=e,this._selected=!1,this._isUnseen=!1}get id(){return this._botData.id}get botData(){return this._botData}get selected(){return this._selected}set selected(e){this._selected=e}get isUnseen(){return this._isUnseen}set isUnseen(e){this._isUnseen=e}}var m=n("sIeP"),f=n("fXoL"),p=n("cC5F");let _=(()=>{class e{constructor(e,t){this._inventoryService=e,this._ngZone=t,this._messages=[],this._bots=new i.a,this._botIdInBotPlacing=-1,this._isObjectMoverRequested=!1,this._isInitialized=!1,this._needsUpdate=!1,this.onRoomEngineObjectPlacedEvent=this.onRoomEngineObjectPlacedEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{a.a.instance.roomEngine.events.addEventListener(d.a.PLACED,this.onRoomEngineObjectPlacedEvent),this._messages=[new s.a(this.onBotInventoryMessageEvent.bind(this)),new c.a(this.onBotRemovedFromInventoryEvent.bind(this)),new r.a(this.onBotAddedToInventoryEvent.bind(this))];for(const e of this._messages)a.a.instance.communication.registerMessageEvent(e)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{a.a.instance.roomEngine.events.removeEventListener(d.a.PLACED,this.onRoomEngineObjectPlacedEvent);for(const e of this._messages)a.a.instance.communication.removeMessageEvent(e);this._messages=[]})}onRoomEngineObjectPlacedEvent(e){e&&this._isObjectMoverRequested&&e.type===d.a.PLACED&&(this._isObjectMoverRequested=!1,e._Str_4057||this._ngZone.run(()=>this._inventoryService.showWindow()))}onBotInventoryMessageEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>{for(const e of t.items.values())this.addSingleBotItem(e);this._isInitialized=!0,this._inventoryService.botsController&&this._inventoryService.botsController.selectExistingGroupOrDefault()})}onBotRemovedFromInventoryEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>this.removeItemById(t.itemId))}onBotAddedToInventoryEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>{const e=this.addSingleBotItem(t.item);e&&(e.isUnseen=!0)})}getAllItemIds(){const e=[];for(const t of this._bots.getValues())e.push(t.id);return e}getBotItem(e){return this._bots.getValue(e)||null}addSingleBotItem(e){this._bots||(this._bots=new i.a);const t=new g(e);return this.isBotUnseen(e)?(t.isUnseen=!0,this.unshiftBotItem(t)):this.pushBotItem(t),t}removeItemById(e){if(!this._bots.length)return null;const t=this._bots.remove(e);return t?(this._botIdInBotPlacing===t.id&&(this.cancelRoomObjectPlacement(),this._inventoryService.showWindow()),t):null}isBotUnseen(e){return this._inventoryService.unseenTracker._Str_3613(m.a.BOT,e.id)}setAllBotsSeen(){this._inventoryService.unseenTracker._Str_8813(m.a.BOT);for(const e of this._bots.getValues())e.isUnseen&&(e.isUnseen=!1);this._inventoryService.updateUnseenCount()}attemptBotPlacement(e=!1){const t=this.getSelectedBot();if(!t)return!1;const n=t.botData;if(!n)return!1;const i=a.a.instance.roomSessionManager.getSession(1);return!(!i||!i.isRoomOwner||(this._inventoryService.hideWindow(),this.startRoomObjectPlacement(n),0))}startRoomObjectPlacement(e){a.a.instance.roomEngine.processRoomObjectPlacement(l.a.INVENTORY,-e.id,u.a.UNIT,h.a.RENTABLE_BOT,e.figure)&&(this._botIdInBotPlacing=e.id,this.setObjectMoverRequested(!0))}cancelRoomObjectPlacement(){this._botIdInBotPlacing>-1&&(a.a.instance.roomEngine.cancelRoomObjectPlacement(),this.setObjectMoverRequested(!1),this._botIdInBotPlacing=-1)}getSelectedBot(){for(const e of this._bots.getValues())if(e&&e.selected)return e;return null}unshiftBotItem(e){this._bots.unshift(e.id,e)}pushBotItem(e){this._bots.add(e.id,e)}removeBotItem(e){this._bots.remove(e.id)}removeAndUnshiftGroupitem(e){this.removeBotItem(e),this.unshiftBotItem(e)}unselectAllBotItems(){for(const e of this._bots.getValues())e.selected=!1}requestLoad(){this._needsUpdate=!1,a.a.instance.communication.connection.send(new o.a)}setObjectMoverRequested(e){this._isObjectMoverRequested!==e&&this._ngZone.run(()=>this._isObjectMoverRequested=e)}get controller(){return this._inventoryService.controller}get isInitalized(){return this._isInitialized}get needsUpdate(){return this._needsUpdate}get bots(){return this._bots.getValues()}get isObjectMoverRequested(){return this._isObjectMoverRequested}}return e.INVENTORY_UPDATED="IBS_INVENTORY_UPDATED",e.SELECT_FIRST_GROUP="IBS_SELECT_FIRST_GROUP",e.SELECT_EXISTING_GROUP_DEFAULT="IBS_SELECT_EXISTING_GROUP_DEFAULT",e.\u0275fac=function(t){return new(t||e)(f.kc(p.a),f.kc(f.H))},e.\u0275prov=f.Ub({token:e,factory:e.\u0275fac}),e})()},iMWE:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("IaJN");class r{constructor(){this._id=0,this._name="",this._description="",this._roomId="0",this._badgeParts=new Map,this._colorA=0,this.colorB=0,this._state=0,this._canMembersDecorate=!1,this._badgeParts.set(0,new i.a(!0)),this._badgeParts.set(1,new i.a(!1)),this._badgeParts.set(2,new i.a(!1)),this._badgeParts.set(3,new i.a(!1)),this._badgeParts.set(4,new i.a(!1))}getBadgePart(e){return this._badgeParts.get(e)}setPartsColor(e){this._badgeParts.forEach(t=>{t.color=e})}get id(){return this._id}set id(e){this._id=e}get name(){return this._name}set name(e){this._name=e}get description(){return this._description}set description(e){this._description=e}get roomId(){return this._roomId}set roomId(e){this._roomId=e}get badgeParts(){return this._badgeParts}set badgeParts(e){this._badgeParts=e}get colorA(){return this._colorA}set colorA(e){this._colorA=e}get colorB(){return this._colorB}set colorB(e){this._colorB=e}get currentBadgeCode(){let e="";return this._badgeParts.forEach(t=>{t.code&&(e+=t.code)}),e}get currentBadgeArray(){const e=[];return this._badgeParts.forEach(t=>{t.code&&(e.push(t.key),e.push(t.color),e.push(t.position))}),e}get state(){return this._state}set state(e){this._state=e}get canMembersDecorate(){return this._canMembersDecorate}set canMembersDecorate(e){this._canMembersDecorate=e}}},ieH7:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("te8b"),r=n("fXoL"),s=n("jhN1");let c=(()=>{class e{constructor(e){this._sanitizer=e}transform(e){return i.shortnameToUnicode(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Yb(s.b))},e.\u0275pipe=r.Xb({name:"nitroEmoji",type:e,pure:!1}),e})()},isOV:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n("kk8R"),r=n("aTzN"),s=n("IyW6"),c=n("ICuV"),o=n("bwAN"),a=n("Vm8J"),l=n("WS8Q"),d=n("ssUo"),u=n("IdQr");class h{constructor(e){this._petData=e,this._selected=!1,this._isUnseen=!1}get id(){return this._petData.id}get petData(){return this._petData}get selected(){return this._selected}set selected(e){this._selected=e}get isUnseen(){return this._isUnseen}set isUnseen(e){this._isUnseen=e}}var g=n("sIeP"),m=n("fXoL"),f=n("cC5F");let p=(()=>{class e{constructor(e,t){this._inventoryService=e,this._ngZone=t,this._messages=[],this._petMsgFragments=null,this._pets=[],this._petIdInPetPlacing=-1,this._isObjectMoverRequested=!1,this._isInitialized=!1,this._needsUpdate=!1,this.onRoomEngineObjectPlacedEvent=this.onRoomEngineObjectPlacedEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{o.a.instance.roomEngine.events.addEventListener(l.a.PLACED,this.onRoomEngineObjectPlacedEvent),this._messages=[new r.a(this.onPetsReceivedEvent.bind(this)),new i.a(this.onPetAddedEvent.bind(this)),new s.a(this.onPetRemovedEvent.bind(this))];for(const e of this._messages)o.a.instance.communication.registerMessageEvent(e)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{o.a.instance.roomEngine.events.removeEventListener(l.a.PLACED,this.onRoomEngineObjectPlacedEvent);for(const e of this._messages)o.a.instance.communication.removeMessageEvent(e);this._messages=[]})}onRoomEngineObjectPlacedEvent(e){e&&this._isObjectMoverRequested&&e.type===l.a.PLACED&&(this._isObjectMoverRequested=!1,e._Str_4057||this._ngZone.run(()=>this._inventoryService.showWindow()))}onPetsReceivedEvent(e){if(!e)return;const t=e.getParser();if(!t)return;this._petMsgFragments||(this._petMsgFragments=new Array(t.totalFragments));const n=new Map([...t.fragment]),i=this.mergeFragments(n,t.totalFragments,t.fragmentNumber,this._petMsgFragments);i&&this._ngZone.run(()=>this.processFragment(i))}onPetRemovedEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>{this.removeItemById(t.petId)&&this.setAllPetsSeen()})}onPetAddedEvent(e){if(!e)return;const t=e.getParser();if(!t)return;const n=t.pet;this._ngZone.run(()=>{const e=this.getPetItem(n.id);e?e.isUnseen=!0:this.addSinglePetItem(n)})}mergeFragments(e,t,n,i){if(1===t)return e;i[n]=e;for(const s of i)if(!s)return null;const r=new Map;for(const s of i){for(const[e,t]of s)r.set(e,t);s.clear()}return i=null,r}processFragment(t){const n=this.getAllItemIds(),i=[],r=[];for(const e of t.keys())-1===n.indexOf(e)&&i.push(e);for(const e of n)t.get(e)||r.push(e);const s=0===n.length;for(const e of r)this.removeItemById(e);for(const e of i){const n=t.get(e);n&&this.addSinglePetItem(n)}s||i.length&&this._inventoryService.updateItemLocking(),this._isInitialized=!0,this._inventoryService.events.next(e.INVENTORY_UPDATED),this._inventoryService.petsController&&this._inventoryService.petsController.selectExistingGroupOrDefault()}getAllItemIds(){const e=[];for(const t of this._pets)e.push(t.id);return e}getPetItem(e){for(const t of this._pets)if(t&&t.id===e)return t;return null}addSinglePetItem(e){const t=new h(e);return this.isPetUnseen(e)?(t.isUnseen=!0,this.unshiftPetItem(t)):this.pushPetItem(t),t}removeItemById(e){let t=0;for(;t<this._pets.length;){const n=this._pets[t];if(n&&n.id===e)return this._petIdInPetPlacing===n.id&&(this.cancelRoomObjectPlacement(),this._inventoryService.showWindow()),this._pets.splice(t,1),n;t++}return null}isPetUnseen(e){return this._inventoryService.unseenTracker._Str_3613(g.a.PET,e.id)}setAllPetsSeen(){this._inventoryService.unseenTracker._Str_8813(g.a.PET);for(const e of this._pets)e.isUnseen&&(e.isUnseen=!1);this._inventoryService.updateUnseenCount()}attemptPetPlacement(e=!1){const t=this.getSelectedPet();if(!t)return!1;const n=t.petData;if(!n)return!1;const i=o.a.instance.roomSessionManager.getSession(1);return!(!i||!i.isRoomOwner&&!i.allowPets||(this._inventoryService.hideWindow(),this.startRoomObjectPlacement(n),0))}startRoomObjectPlacement(e){o.a.instance.roomEngine.processRoomObjectPlacement(a.a.INVENTORY,-e.id,d.a.UNIT,u.a.PET,e.figureData.figuredata)&&(this._petIdInPetPlacing=e.id,this.setObjectMoverRequested(!0))}cancelRoomObjectPlacement(){this._petIdInPetPlacing>-1&&(o.a.instance.roomEngine.cancelRoomObjectPlacement(),this.setObjectMoverRequested(!1),this._petIdInPetPlacing=-1)}getSelectedPet(){for(const e of this._pets)if(e&&e.selected)return e;return null}unshiftPetItem(e){this._pets.unshift(e)}pushPetItem(e){this._pets.push(e)}removePetItem(e){const t=this._pets.indexOf(e);t>-1&&this._pets.splice(t,1)}removeAndUnshiftGroupitem(e){this.removePetItem(e),this.unshiftPetItem(e)}unselectAllPetItems(){for(const e of this._pets)e.selected=!1}requestLoad(){this._needsUpdate=!1,o.a.instance.communication.connection.send(new c.a)}setObjectMoverRequested(e){this._isObjectMoverRequested!==e&&this._ngZone.run(()=>this._isObjectMoverRequested=e)}get controller(){return this._inventoryService.controller}get isInitalized(){return this._isInitialized}get needsUpdate(){return this._needsUpdate}get pets(){return this._pets}get isObjectMoverRequested(){return this._isObjectMoverRequested}}return e.INVENTORY_UPDATED="IPS_INVENTORY_UPDATED",e.SELECT_FIRST_GROUP="IPS_SELECT_FIRST_GROUP",e.SELECT_EXISTING_GROUP_DEFAULT="IPS_SELECT_EXISTING_GROUP_DEFAULT",e.\u0275fac=function(t){return new(t||e)(m.kc(f.a),m.kc(m.H))},e.\u0275prov=m.Ub({token:e,factory:e.\u0275fac}),e})()},j2zY:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("j+dD"),r=n("8azw"),s=n("bwAN"),c=n("fXoL");let o=(()=>{class e{constructor(e){this._ngZone=e,this._userId=-1,this._userName=null,this._figure=null,this._gender=null,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new r.a(this.onUserInfoEvent.bind(this)),new i.a(this.onUserFigureEvent.bind(this))];for(const e of this._messages)s.a.instance.communication.registerMessageEvent(e)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const e of this._messages)s.a.instance.communication.removeMessageEvent(e);this._messages=[]})}onUserInfoEvent(e){if(!e)return;const t=e.getParser();if(!t)return;const n=t.userInfo;this._ngZone.run(()=>{this._userId=n.userId,this._userName=n.username,this._figure=n.figure,this._gender=n.gender})}onUserFigureEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>{this._figure=t.figure,this._gender=t.gender})}get userId(){return this._userId}get userName(){return this._userName}get figure(){return this._figure}get gender(){return this._gender}}return e.\u0275fac=function(t){return new(t||e)(c.kc(c.H))},e.\u0275prov=c.Ub({token:e,factory:e.\u0275fac}),e})()},jf0f:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("fXoL");let r=(()=>{class e{openPage(e){}closePage(e){e&&this._component&&this._component.close(e)}closeAll(){this._component&&this._component.closeAll()}get component(){return this._component}set component(e){this._component=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Ub({token:e,factory:e.\u0275fac}),e})()},jl72:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("fXoL"),r=n("l1qq"),s=n("Ci1R"),c=n("sXB4"),o=n("Kdsb"),a=n("0DQ5");let l=(()=>{class e{constructor(e){this._notificationService=e,this.title="",this.message="",this.choices=[]}close(){this._notificationService.closeAlert(this)}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(r.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["ng-component"]],decls:11,vars:5,consts:[["noMemory","true","center","true",1,"nitro-alert","d-flex","flex-column","bg-primary","border","border-black","shadow","rounded",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","px-3","pt-3"],[1,"m-0"],[1,"d-flex","flex-column","p-3"],[1,"position-relative","w-100",2,"min-height","65px","max-height","275px"],[1,"d-block",3,"innerHTML"],[1,"d-flex","flex-column","align-items-center","justify-content-center","mt-3"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"h6",2),i.Wc(3),i.cc(),i.cc(),i.dc(4,"div",3),i.dc(5,"perfect-scrollbar",4),i.Zb(6,"div",5),i.cc(),i.dc(7,"div",6),i.dc(8,"button",7),i.nc("click",function(){return t.close()}),i.Wc(9),i.rc(10,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&e&&(i.Kb(3),i.Xc(t.title),i.Kb(3),i.yc("innerHTML",t.message,i.Mc),i.Kb(3),i.Xc(i.sc(10,3,"generic.close")))},directives:[s.a,c.a,o.b],pipes:[a.a],encapsulation:2}),e})()},k5mv:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("xPcM"),s=n("vLqR"),c=n("fXoL");let o=(()=>{class e extends s.a{get code(){return e.CODE}onEditStart(e){this.movement=(e.intData.length>0?e.intData[0]:0).toString(),this.spacing=e.intData.length>1?e.intData[1]:1,super.onEditStart(e)}readIntegerParamsFromForm(){return[Number.parseInt(this.movement),this.spacing]}get hasSpecialInputs(){return!0}get requiresFurni(){return i.a._Str_4991}decreaseSpacing(){this.spacing-=1,this.spacing<e.SPACING_MINIMUM_VALUE&&(this.spacing=e.SPACING_MINIMUM_VALUE)}increaseSpacing(){this.spacing+=1,this.spacing>e.SPACING_MAXIMUM_VALUE&&(this.spacing=e.SPACING_MAXIMUM_VALUE)}get spacingSliderOptions(){return{floor:e.SPACING_MINIMUM_VALUE,ceil:e.SPACING_MAXIMUM_VALUE,step:e.SPACING_STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return e.SPACING_MINIMUM_VALUE=1,e.SPACING_MAXIMUM_VALUE=5,e.SPACING_STEPPER_VALUE=1,e.CODE=r.a.MOVE_FURNI_TO,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:29,vars:15,consts:[[3,"delay","delayChange"],[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","spacing",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"],[1,"form-row","mb-2"],[1,"form-check"],["type","radio","name","movement","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[1,"icon","icon-ne"],["type","radio","name","movement","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-se"],["type","radio","name","movement","value","4",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-sw"],["type","radio","name","movement","value","6",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-nw"]],template:function(e,t){1&e&&(c.dc(0,"nitro-wired-action-base-component",0),c.nc("delayChange",function(e){return t.delay=e}),c.dc(1,"p",1),c.Wc(2),c.rc(3,"translate"),c.cc(),c.dc(4,"div",2),c.dc(5,"button",3),c.nc("click",function(){return t.decreaseSpacing()}),c.Zb(6,"i",4),c.cc(),c.dc(7,"ngx-slider",5),c.nc("valueChange",function(e){return t.spacing=e}),c.cc(),c.dc(8,"button",3),c.nc("click",function(){return t.increaseSpacing()}),c.Zb(9,"i",6),c.cc(),c.cc(),c.Wc(10),c.rc(11,"translate"),c.dc(12,"div",7),c.dc(13,"div",8),c.dc(14,"input",9),c.nc("ngModelChange",function(e){return t.movement=e}),c.cc(),c.dc(15,"label",10),c.Zb(16,"i",11),c.cc(),c.cc(),c.dc(17,"div",8),c.dc(18,"input",12),c.nc("ngModelChange",function(e){return t.movement=e}),c.cc(),c.dc(19,"label",10),c.Zb(20,"i",13),c.cc(),c.cc(),c.dc(21,"div",8),c.dc(22,"input",14),c.nc("ngModelChange",function(e){return t.movement=e}),c.cc(),c.dc(23,"label",10),c.Zb(24,"i",15),c.cc(),c.cc(),c.dc(25,"div",8),c.dc(26,"input",16),c.nc("ngModelChange",function(e){return t.movement=e}),c.cc(),c.dc(27,"label",10),c.Zb(28,"i",17),c.cc(),c.cc(),c.cc(),c.cc()),2&e&&(c.yc("delay",t.delay),c.Kb(2),c.Xc(c.uc(3,9,"wiredfurni.params.emptytiles","tiles",t.spacing)),c.Kb(5),c.yc("options",t.spacingSliderOptions)("value",t.spacing),c.Kb(3),c.Yc(" ",c.sc(11,13,"wiredfurni.params.startdir")," "),c.Kb(4),c.yc("ngModel",t.movement),c.Kb(4),c.yc("ngModel",t.movement),c.Kb(4),c.yc("ngModel",t.movement),c.Kb(4),c.yc("ngModel",t.movement))},encapsulation:2}),e})();const a=c.fc(o)},kWRQ:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("gKK4"),s=n("VFvI"),c=n("fXoL");let o=(()=>{class e extends r.a{get code(){return e.CODE}get negativeCode(){return e.NEGATIVE_CODE}get requiresFurni(){return i.a._Str_4873}}return e.CODE=s.a.TRIGGERER_IS_ON_FURNI,e.NEGATIVE_CODE=s.a.NOT_ACTOR_ON_FURNI,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:1,vars:0,template:function(e,t){1&e&&c.Zb(0,"nitro-wired-base-component")},encapsulation:2}),e})();const a=c.fc(o)},l1qq:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n("qtEr"),r=n("adYE"),s=n("BBqD"),c=n("nPRl"),o=n("HpA7"),a=n("bwAN"),l=n("fXoL");let d=(()=>{class e{constructor(e){this._ngZone=e,this._alertCenter=null,this._notificationCenter=null,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages&&this.unregisterMessages(),this._messages=[new r.a(this.onHabboBroadcastMessageEvent.bind(this)),new i.a(this.onModeratorMessageEvent.bind(this)),new c.a(this.onMOTDNotificationEvent.bind(this)),new o.a(this.onNotificationDialogMessageEvent.bind(this)),new s.a(this.onHotelWillShutdownEvent.bind(this))];for(const e of this._messages)a.a.instance.communication.registerMessageEvent(e)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const e of this._messages)a.a.instance.communication.removeMessageEvent(e);this._messages=[]})}onHabboBroadcastMessageEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>this.alert(t.message))}onNotificationDialogMessageEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>this.displayNotification(t.type,t.parameters))}onModeratorMessageEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>this.alertWithLink(t.message,t.link))}onMOTDNotificationEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>this.alertWithScrollableMessages(t.messages))}onHotelWillShutdownEvent(e){if(!e)return;const t=e.getParser();if(!t)return;const n=a.a.instance.localization.getValueWithParameter("opening.hours.shutdown","m",t.minutes.toString());this._ngZone.run(()=>this.alert(n))}alert(e,t=null){return this._alertCenter?this._alertCenter.alert(e,t):null}alertWithLink(e,t,n=null){return this._alertCenter?this._alertCenter.alertWithLink(e,t,n):null}alertWithConfirm(e,t=null,n=null){return this._alertCenter?this._alertCenter.alertWithConfirm(e,t,n):null}alertWithChoices(e,t,n=null){return this._alertCenter?this._alertCenter.alertWithChoices(e,t,n):null}alertWithScrollableMessages(e,t=null){return this._alertCenter?this._alertCenter.alertWithScrollableMessages(e,t):null}displayNotification(e,t){return this._notificationCenter?this._notificationCenter.displayNotification(e,t):null}closeAlert(e){e&&this._alertCenter&&this._alertCenter.closeAlert(e)}closeNotification(e){e&&this._notificationCenter&&this._notificationCenter.closeNotification(e)}closeAll(){this._alertCenter&&(this._alertCenter.closeAllAlerts(),this._notificationCenter.closeAllNotifications())}get alertCenter(){return this._alertCenter}set alertCenter(e){this._alertCenter=e}get notificationCenter(){return this._notificationCenter}set notificationCenter(e){this._notificationCenter=e}}return e.\u0275fac=function(t){return new(t||e)(l.kc(l.H))},e.\u0275prov=l.Ub({token:e,factory:e.\u0275fac}),e})()},lKxs:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("bwAN"),r=n("wDsT"),s=n("7deb"),c=n("5+Zn"),o=n("fXoL");let a=(()=>{class e extends r.a{constructor(){super(...arguments),this.time=0,this.timeLocale=""}get code(){return e.CODE}onEditStart(e){this.time=e.intData[0]||1,this.updateLocaleParameter()}readIntegerParamsFromForm(){return[this.time]}onSliderChange(){this.updateLocaleParameter()}decrease(){this.time-=1,this.time<e.MINIMUM_VALUE&&(this.time=e.MINIMUM_VALUE)}increase(){this.time+=1,this.time>e.MAXIMUM_VALUE&&(this.time=e.MAXIMUM_VALUE)}updateLocaleParameter(){this.timeLocale=i.a.instance.getLocalizationWithParameter("wiredfurni.params.settime","seconds",c.a.getLocaleName(this.time))}get hasSpecialInputs(){return!0}get sliderOptions(){return{floor:e.MINIMUM_VALUE,ceil:e.MAXIMUM_VALUE,step:e.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return e.MINIMUM_VALUE=1,e.MAXIMUM_VALUE=1200,e.STEPPER_VALUE=1,e.CODE=s.a.TRIGGER_ONCE,e.\u0275fac=function(t){return l(t||e)},e.\u0275cmp=o.Sb({type:e,selectors:[["ng-component"]],features:[o.Hb],decls:9,vars:3,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","time",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(e,t){1&e&&(o.dc(0,"nitro-wired-base-component"),o.dc(1,"p",0),o.Wc(2),o.cc(),o.dc(3,"div",1),o.dc(4,"button",2),o.nc("click",function(){return t.decrease()}),o.Zb(5,"i",3),o.cc(),o.dc(6,"ngx-slider",4),o.nc("valueChange",function(e){return t.time=e})("valueChange",function(){return t.onSliderChange()}),o.cc(),o.dc(7,"button",2),o.nc("click",function(){return t.increase()}),o.Zb(8,"i",5),o.cc(),o.cc(),o.cc()),2&e&&(o.Kb(2),o.Xc(t.timeLocale),o.Kb(4),o.yc("options",t.sliderOptions)("value",t.time))},encapsulation:2}),e})();const l=o.fc(a)},luCG:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("gKK4"),s=n("VFvI"),c=n("fXoL");let o=(()=>{class e extends r.a{get code(){return e.CODE}get negativeCode(){return e.NEGATIVE_CODE}get requiresFurni(){return i.a._Str_4873}onInit(){}onEditStart(e){}get hasSpecialInputs(){return!0}}return e.CODE=s.a.STUFFS_IN_FORMATION,e.NEGATIVE_CODE=s.a.NOT_STUFFS_IN_FORMATION,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:2,vars:0,template:function(e,t){1&e&&(c.dc(0,"nitro-wired-base-component"),c.Wc(1,"STUFFS_IN_FORMATION"),c.cc())},encapsulation:2}),e})();const a=c.fc(o)},mR5C:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("wDsT"),r=n("7deb"),s=n("fXoL");let c=(()=>{class e extends i.a{get code(){return e.CODE}}return e.CODE=r.a.GAME_ENDS,e.\u0275fac=function(t){return o(t||e)},e.\u0275cmp=s.Sb({type:e,selectors:[["ng-component"]],features:[s.Hb],decls:1,vars:0,template:function(e,t){1&e&&s.Zb(0,"nitro-wired-base-component")},encapsulation:2}),e})();const o=s.fc(c)},mRgt:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("wDsT"),s=n("7deb"),c=n("fXoL");let o=(()=>{class e extends r.a{constructor(){super(...arguments),this.keyword=""}get code(){return e.CODE}get requiresFurni(){return i.a._Str_5431}onEditStart(e){this.keyword=e.stringData}readStringParamFromForm(){return this.keyword}get hasSpecialInputs(){return!0}}return e.CODE=s.a.BOT_REACHED_AVATAR,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:6,vars:4,consts:[[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.dc(0,"nitro-wired-base-component"),c.dc(1,"div",0),c.dc(2,"label"),c.Wc(3),c.rc(4,"translate"),c.cc(),c.dc(5,"input",1),c.nc("ngModelChange",function(e){return t.keyword=e}),c.cc(),c.cc(),c.cc()),2&e&&(c.Kb(3),c.Xc(c.sc(4,2,"wiredfurni.params.bot.name")),c.Kb(2),c.yc("ngModel",t.keyword))},encapsulation:2}),e})();const a=c.fc(o)},mgdJ:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("uv4+");let r=(()=>{class e extends i.a{constructor(e,t){super(e),this._requestId=t}get requestId(){return this._requestId}}return e.ACCEPTED="FRE_ACCEPTED",e.DECLINED="FRE_DECLINED",e})()},mjBu:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n("wYOr"),r=n("MFnH"),s=n("rQ5G"),c=n("bwAN"),o=n("fXoL"),a=n("ofXK"),l=n("YPdD");const d=["nitro-avatar-image",""];function u(e,t){if(1&e&&o.Zb(0,"img",1),2&e){const e=o.qc();o.Nb("avatar-image scale-",e.scale,""),o.yc("src",e.avatarUrl,o.Nc)}}let h=(()=>{class e{constructor(e){this._ngZone=e,this.figure="",this.gender="M",this.headOnly=!1,this.direction=0,this.scale=1,this._avatarImageCache=new i.a,this.avatarUrl=null,this.disposed=!1,this.needsUpdate=!0}ngOnInit(){this.needsUpdate&&this.buildAvatar()}ngOnDestroy(){this.dispose()}ngOnChanges(e){const t=e.figure;t&&t.previousValue!==t.currentValue&&(this.needsUpdate=!0);const n=e.gender;n&&n.previousValue!==n.currentValue&&(this.needsUpdate=!0);const i=e.headOnly;i&&i.previousValue!==i.currentValue&&(this.needsUpdate=!0);const r=e.direction;r&&r.previousValue!==r.currentValue&&(this.needsUpdate=!0),this.needsUpdate&&this.buildAvatar()}dispose(){}resetFigure(e){this._avatarImageCache.remove(this.getAvatarBuildString()),this.buildAvatar()}buildAvatar(){this._ngZone.runOutsideAngular(()=>{this.needsUpdate=!1;const e=this.getUserImageUrl();e&&this._ngZone.run(()=>this.avatarUrl=e)})}getUserImageUrl(){const e=this.getAvatarBuildString();let t=this._avatarImageCache.getValue(e);if(!t){const n=c.a.instance.avatar.createAvatarImage(this.figure,r.a.LARGE,this.gender,this,null);if(n){let e=s.a.FULL;this.headOnly&&(e=s.a.HEAD),n.setDirection(e,this.direction);const i=n.getCroppedImage(e);i&&(t=i.src),n.dispose()}t&&this.putInCache(e,t)}return t}putInCache(t,n){this._avatarImageCache.length===e.MAX_CACHE_SIZE&&this._avatarImageCache.remove(this._avatarImageCache.getKey(0)),this._avatarImageCache.add(t,n)}getAvatarBuildString(){return`${this.figure}:${this.gender}:${this.direction}:${this.headOnly}`}}return e.MAX_CACHE_SIZE=10,e.\u0275fac=function(t){return new(t||e)(o.Yb(o.H))},e.\u0275cmp=o.Sb({type:e,selectors:[["","nitro-avatar-image",""]],inputs:{figure:"figure",gender:"gender",headOnly:"headOnly",direction:"direction",scale:"scale"},features:[o.Ib],attrs:d,decls:1,vars:1,consts:[["image-placeholder","",3,"class","src",4,"ngIf"],["image-placeholder","",3,"src"]],template:function(e,t){1&e&&o.Uc(0,u,1,4,"img",0),2&e&&o.yc("ngIf",t.avatarUrl)},directives:[a.n,l.a],encapsulation:2}),e})()},mmPZ:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("xPcM"),s=n("vLqR"),c=n("fXoL");let o=(()=>{class e extends s.a{get code(){return e.CODE}get requiresFurni(){return i.a._Str_5430}}return e.CODE=r.a.TOGGLE_FURNI_STATE,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(e,t){1&e&&(c.dc(0,"nitro-wired-action-base-component",0),c.nc("delayChange",function(e){return t.delay=e}),c.cc()),2&e&&c.yc("delay",t.delay)},encapsulation:2}),e})();const a=c.fc(o)},nJ5u:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("bwAN");class r{constructor(e){this._locked=!1,this._id=e.itemId,this._type=e.spriteId,this._ref=e.ref,this._category=e.category,this._groupable=e.isGroupable&&!e.rentable,this._tradeable=e.tradable,this._recyclable=e.isRecycleable,this._sellable=e.sellable,this._stuffData=e.stuffData,this._extra=e._Str_2794,this._secondsToExpiration=e.secondsToExpiration,this._expirationTimeStamp=e._Str_10616,this._hasRentPeriodStarted=e.hasRentPeriodStarted,this._creationDay=e._Str_8932,this._creationMonth=e._Str_9050,this._creationYear=e._Str_9408,this._slotId=e.slotId,this._songId=e._Str_3951,this._flatId=e.flatId,this._isRented=e.rentable,this._isWallItem=e.isWallItem}get rentable(){return this._isRented}get id(){return this._id}get ref(){return this._ref}get category(){return this._category}get type(){return this._type}get stuffData(){return this._stuffData}set stuffData(e){this._stuffData=e}get extra(){return this._extra}get _Str_16260(){return this._recyclable}get isTradable(){return this._tradeable}get isGroupable(){return this._groupable}get sellable(){return this._sellable}get secondsToExpiration(){if(-1===this._secondsToExpiration)return-1;let e=-1;return this._hasRentPeriodStarted?(e=this._secondsToExpiration-(i.a.instance.time-this._expirationTimeStamp)/1e3,e<0&&(e=0)):e=this._secondsToExpiration,e}get _Str_8932(){return this._creationDay}get _Str_9050(){return this._creationMonth}get _Str_9408(){return this._creationYear}get slotId(){return this._slotId}get _Str_3951(){return this._songId}get locked(){return this._locked}set locked(e){this._locked=e}get flatId(){return this._flatId}get isWallItem(){return this._isWallItem}get hasRentPeriodStarted(){return this._hasRentPeriodStarted}get _Str_10616(){return this._expirationTimeStamp}update(e){this._type=e.spriteId,this._ref=e.ref,this._category=e.category,this._groupable=e.isGroupable&&!e.rentable,this._tradeable=e.tradable,this._recyclable=e.isRecycleable,this._sellable=e.sellable,this._stuffData=e.stuffData,this._extra=e._Str_2794,this._secondsToExpiration=e.secondsToExpiration,this._expirationTimeStamp=e._Str_10616,this._hasRentPeriodStarted=e.hasRentPeriodStarted,this._creationDay=e._Str_8932,this._creationMonth=e._Str_9050,this._creationYear=e._Str_9408,this._slotId=e.slotId,this._songId=e._Str_3951,this._flatId=e.flatId,this._isRented=e.rentable,this._isWallItem=e.isWallItem}}},nrNS:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n("iMWE"),r=n("fXoL"),s=n("1/Ir"),c=n("1kSV");const o=["nitro-group-creator-component",""];function a(e,t){if(1&e){const e=r.ec();r.dc(0,"nitro-group-creator-tab-info-component",16),r.nc("groupSettingsChange",function(t){return r.Lc(e),r.qc().groupSettings=t}),r.cc()}if(2&e){const e=r.qc();r.yc("groupSettings",e.groupSettings)("showNameError",e.showNameError)("showDescriptionError",e.showDescriptionError)("showRoomError",e.showRoomError)("availableRooms",e.availableRooms)}}function l(e,t){if(1&e){const e=r.ec();r.dc(0,"nitro-group-creator-tab-badge-component",17),r.nc("groupSettingsChange",function(t){return r.Lc(e),r.qc().groupSettings=t}),r.cc()}if(2&e){const e=r.qc();r.yc("groupSettings",e.groupSettings)("setDefaultValues",!0)}}function d(e,t){if(1&e){const e=r.ec();r.dc(0,"nitro-group-creator-tab-colors-component",17),r.nc("groupSettingsChange",function(t){return r.Lc(e),r.qc().groupSettings=t}),r.cc()}if(2&e){const e=r.qc();r.yc("groupSettings",e.groupSettings)("setDefaultValues",!0)}}function u(e,t){if(1&e&&r.Zb(0,"nitro-group-creator-tab-confirmation-component",18),2&e){const e=r.qc();r.yc("groupSettings",e.groupSettings)("groupCost",e.groupCost)}}function h(e,t){if(1&e){const e=r.ec();r.dc(0,"button",19),r.nc("click",function(){return r.Lc(e),r.qc().hide()}),r.Wc(1),r.rc(2,"translate"),r.cc()}2&e&&(r.Kb(1),r.Xc(r.sc(2,1,"generic.cancel")))}function g(e,t){if(1&e){const e=r.ec();r.dc(0,"button",20),r.nc("click",function(){return r.Lc(e),r.qc().previousStep()}),r.Wc(1),r.rc(2,"translate"),r.cc()}2&e&&(r.Kb(1),r.Xc(r.sc(2,1,"group.create.previousstep")))}function m(e,t){if(1&e){const e=r.ec();r.dc(0,"button",20),r.nc("click",function(){return r.Lc(e),r.qc().nextStep()}),r.Wc(1),r.rc(2,"translate"),r.cc()}2&e&&(r.Kb(1),r.Xc(r.sc(2,1,"group.create.nextstep")))}function f(e,t){if(1&e){const e=r.ec();r.dc(0,"button",21),r.nc("click",function(){return r.Lc(e),r.qc().buyGroup()}),r.Wc(1),r.rc(2,"translate"),r.cc()}2&e&&(r.Kb(1),r.Xc(r.sc(2,1,"group.create.confirm.buy")))}let p=(()=>{class e{constructor(e,t){this._groupsService=e,this._activeModal=t,this._clear()}_clear(){this.groupSettings=new i.a,this._currentStep=1,this._showNameError=!1,this._showDescriptionError=!1,this._showRoomError=!1,this._availableRooms=new Map,this._groupCost=0}ngOnInit(){this._clear()}ngOnDestroy(){this._clear()}previousStep(){1!==this._currentStep&&this._currentStep--}nextStep(){4!==this._currentStep&&(1===this._currentStep&&(this._showNameError=0===this.groupSettings.name.length||this.groupSettings.name.length>29,this._showDescriptionError=this.groupSettings.description.length>254,this._showRoomError="0"===this.groupSettings.roomId,this._showNameError||this._showDescriptionError||this._showRoomError)||this._currentStep++)}hide(){this._activeModal.close()}buyGroup(){this._groupsService.buyGroup(this.groupSettings)}get currentStep(){return this._currentStep}get showNameError(){return this._showNameError}get showDescriptionError(){return this._showDescriptionError}get showRoomError(){return this._showRoomError}get availableRooms(){return this._availableRooms}set availableRooms(e){this._availableRooms=e}get groupCost(){return this._groupCost}set groupCost(e){this._groupCost=e}}return e.\u0275fac=function(t){return new(t||e)(r.Yb(s.a),r.Yb(c.a))},e.\u0275cmp=r.Sb({type:e,selectors:[["","nitro-group-creator-component",""]],attrs:o,decls:30,vars:27,consts:[[1,"nitro-group-creator-component"],[1,"d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"btn-group","mb-3","w-100"],[1,"btn","btn-primary",3,"disabled"],[1,"btn","btn-success",3,"disabled"],[3,"groupSettings","showNameError","showDescriptionError","showRoomError","availableRooms","groupSettingsChange",4,"ngIf"],[3,"groupSettings","setDefaultValues","groupSettingsChange",4,"ngIf"],[3,"groupSettings","groupCost",4,"ngIf"],[1,"d-flex","flex-row","justify-content-between"],["class","btn btn-secondary",3,"click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-success",3,"click",4,"ngIf"],[3,"groupSettings","showNameError","showDescriptionError","showRoomError","availableRooms","groupSettingsChange"],[3,"groupSettings","setDefaultValues","groupSettingsChange"],[3,"groupSettings","groupCost"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"click"]],template:function(e,t){1&e&&(r.dc(0,"div",0),r.dc(1,"div",1),r.dc(2,"h6",2),r.Wc(3),r.rc(4,"translate"),r.cc(),r.dc(5,"button",3),r.nc("click",function(){return t.hide()}),r.Zb(6,"i",4),r.cc(),r.cc(),r.dc(7,"div",5),r.dc(8,"div",6),r.dc(9,"button",7),r.Wc(10),r.rc(11,"translate"),r.cc(),r.dc(12,"button",7),r.Wc(13),r.rc(14,"translate"),r.cc(),r.dc(15,"button",7),r.Wc(16),r.rc(17,"translate"),r.cc(),r.dc(18,"button",8),r.Wc(19),r.rc(20,"translate"),r.cc(),r.cc(),r.Uc(21,a,1,5,"nitro-group-creator-tab-info-component",9),r.Uc(22,l,1,2,"nitro-group-creator-tab-badge-component",10),r.Uc(23,d,1,2,"nitro-group-creator-tab-colors-component",10),r.Uc(24,u,1,2,"nitro-group-creator-tab-confirmation-component",11),r.dc(25,"div",12),r.Uc(26,h,3,3,"button",13),r.Uc(27,g,3,3,"button",14),r.Uc(28,m,3,3,"button",14),r.Uc(29,f,3,3,"button",15),r.cc(),r.cc(),r.cc()),2&e&&(r.Kb(3),r.Xc(r.sc(4,17,"group.window.title")),r.Kb(6),r.yc("disabled",1!==t.currentStep),r.Kb(1),r.Xc(r.sc(11,19,"group.create.steplabel.1")),r.Kb(2),r.yc("disabled",2!==t.currentStep),r.Kb(1),r.Xc(r.sc(14,21,"group.create.steplabel.2")),r.Kb(2),r.yc("disabled",3!==t.currentStep),r.Kb(1),r.Xc(r.sc(17,23,"group.create.steplabel.3")),r.Kb(2),r.yc("disabled",4!==t.currentStep),r.Kb(1),r.Xc(r.sc(20,25,"group.create.steplabel.4")),r.Kb(2),r.yc("ngIf",1===t.currentStep),r.Kb(1),r.yc("ngIf",2===t.currentStep),r.Kb(1),r.yc("ngIf",3===t.currentStep),r.Kb(1),r.yc("ngIf",4===t.currentStep),r.Kb(2),r.yc("ngIf",1===t.currentStep),r.Kb(1),r.yc("ngIf",t.currentStep>1),r.Kb(1),r.yc("ngIf",t.currentStep<4),r.Kb(1),r.yc("ngIf",4===t.currentStep))},encapsulation:2}),e})()},oPv6:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("bwAN"),r=n("bpj7"),s=n("UE3i"),c=n("7deb"),o=n("fXoL");let a=(()=>{class e extends s.a{get code(){return e.CODE}updateLocaleParameter(){this.timeLocale=i.a.instance.getLocalizationWithParameter("wiredfurni.params.setlongtime","time",r.a.format(5*this.time))}}return e.CODE=c.a.TRIGGER_PERIODICALLY_LONG,e.\u0275fac=function(t){return l(t||e)},e.\u0275cmp=o.Sb({type:e,selectors:[["ng-component"]],features:[o.Hb],decls:9,vars:3,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","time",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(e,t){1&e&&(o.dc(0,"nitro-wired-base-component"),o.dc(1,"p",0),o.Wc(2),o.cc(),o.dc(3,"div",1),o.dc(4,"button",2),o.nc("click",function(){return t.decrease()}),o.Zb(5,"i",3),o.cc(),o.dc(6,"ngx-slider",4),o.nc("valueChange",function(e){return t.time=e})("valueChange",function(){return t.onSliderChange()}),o.cc(),o.dc(7,"button",2),o.nc("click",function(){return t.increase()}),o.Zb(8,"i",5),o.cc(),o.cc(),o.cc()),2&e&&(o.Kb(2),o.Xc(t.timeLocale),o.Kb(4),o.yc("options",t.sliderOptions)("value",t.time))},encapsulation:2}),e})();const l=o.fc(a)},"p/Fp":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("wDsT"),s=n("7deb"),c=n("fXoL");let o=(()=>{class e extends r.a{get code(){return e.CODE}get requiresFurni(){return i.a._Str_4991}}return e.CODE=s.a.TOGGLE_FURNI,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:1,vars:0,template:function(e,t){1&e&&c.Zb(0,"nitro-wired-base-component")},encapsulation:2}),e})();const a=c.fc(o)},plXl:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("xPcM"),s=n("vLqR"),c=n("fXoL");let o=(()=>{class e extends s.a{get code(){return e.CODE}onEditStart(e){this.movement=(e.intData.length>0?e.intData[0]:0).toString(),this.rotation=(e.intData.length>1?e.intData[1]:0).toString(),super.onEditStart(e)}readIntegerParamsFromForm(){return[Number.parseInt(this.movement),Number.parseInt(this.rotation)]}get hasSpecialInputs(){return!0}get requiresFurni(){return i.a._Str_5430}}return e.CODE=r.a.MOVE_FURNI,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:62,vars:34,consts:[[3,"delay","delayChange"],[1,"form-row"],[1,"form-check"],["type","radio","name","movement","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[1,"form-row","mb-2"],["type","radio","name","movement","value","4",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-ne"],["type","radio","name","movement","value","5",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-se"],["type","radio","name","movement","value","6",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-sw"],["type","radio","name","movement","value","7",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-mv-7"],["type","radio","name","movement","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-mv-2"],["type","radio","name","movement","value","3",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-mv-3"],["type","radio","name","movement","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-mv-1"],["type","radio","name","rotation","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-rot-1"],["type","radio","name","rotation","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-rot-2"],["type","radio","name","rotation","value","3",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.dc(0,"nitro-wired-action-base-component",0),c.nc("delayChange",function(e){return t.delay=e}),c.Wc(1),c.rc(2,"translate"),c.dc(3,"div",1),c.dc(4,"div",2),c.dc(5,"input",3),c.nc("ngModelChange",function(e){return t.movement=e}),c.cc(),c.dc(6,"label",4),c.Wc(7),c.rc(8,"translate"),c.cc(),c.cc(),c.cc(),c.dc(9,"div",5),c.dc(10,"div",2),c.dc(11,"input",6),c.nc("ngModelChange",function(e){return t.movement=e}),c.cc(),c.dc(12,"label",4),c.Zb(13,"i",7),c.cc(),c.cc(),c.dc(14,"div",2),c.dc(15,"input",8),c.nc("ngModelChange",function(e){return t.movement=e}),c.cc(),c.dc(16,"label",4),c.Zb(17,"i",9),c.cc(),c.cc(),c.dc(18,"div",2),c.dc(19,"input",10),c.nc("ngModelChange",function(e){return t.movement=e}),c.cc(),c.dc(20,"label",4),c.Zb(21,"i",11),c.cc(),c.cc(),c.dc(22,"div",2),c.dc(23,"input",12),c.nc("ngModelChange",function(e){return t.movement=e}),c.cc(),c.dc(24,"label",4),c.Zb(25,"i",13),c.cc(),c.cc(),c.dc(26,"div",2),c.dc(27,"input",14),c.nc("ngModelChange",function(e){return t.movement=e}),c.cc(),c.dc(28,"label",4),c.Zb(29,"i",15),c.cc(),c.cc(),c.dc(30,"div",2),c.dc(31,"input",16),c.nc("ngModelChange",function(e){return t.movement=e}),c.cc(),c.dc(32,"label",4),c.Zb(33,"i",17),c.cc(),c.cc(),c.dc(34,"div",2),c.dc(35,"input",18),c.nc("ngModelChange",function(e){return t.movement=e}),c.cc(),c.dc(36,"label",4),c.Zb(37,"i",19),c.cc(),c.cc(),c.cc(),c.Wc(38),c.rc(39,"translate"),c.dc(40,"div",2),c.dc(41,"input",20),c.nc("ngModelChange",function(e){return t.rotation=e}),c.cc(),c.dc(42,"label",4),c.Wc(43),c.rc(44,"translate"),c.cc(),c.cc(),c.dc(45,"div",2),c.dc(46,"input",21),c.nc("ngModelChange",function(e){return t.rotation=e}),c.cc(),c.dc(47,"label",4),c.Zb(48,"i",22),c.Wc(49),c.rc(50,"translate"),c.cc(),c.cc(),c.dc(51,"div",2),c.dc(52,"input",23),c.nc("ngModelChange",function(e){return t.rotation=e}),c.cc(),c.dc(53,"label",4),c.Zb(54,"i",24),c.Wc(55),c.rc(56,"translate"),c.cc(),c.cc(),c.dc(57,"div",2),c.dc(58,"input",25),c.nc("ngModelChange",function(e){return t.rotation=e}),c.cc(),c.dc(59,"label",4),c.Wc(60),c.rc(61,"translate"),c.cc(),c.cc(),c.cc()),2&e&&(c.yc("delay",t.delay),c.Kb(1),c.Yc(" ",c.sc(2,20,"wiredfurni.params.movefurni")," "),c.Kb(4),c.yc("ngModel",t.movement),c.Kb(2),c.Xc(c.sc(8,22,"wiredfurni.params.movefurni.0")),c.Kb(4),c.yc("ngModel",t.movement),c.Kb(4),c.yc("ngModel",t.movement),c.Kb(4),c.yc("ngModel",t.movement),c.Kb(4),c.yc("ngModel",t.movement),c.Kb(4),c.yc("ngModel",t.movement),c.Kb(4),c.yc("ngModel",t.movement),c.Kb(4),c.yc("ngModel",t.movement),c.Kb(3),c.Yc(" ",c.sc(39,24,"wiredfurni.params.rotatefurni")," "),c.Kb(3),c.yc("ngModel",t.rotation),c.Kb(2),c.Xc(c.sc(44,26,"wiredfurni.params.rotatefurni.0")),c.Kb(3),c.yc("ngModel",t.rotation),c.Kb(3),c.Yc(" ",c.sc(50,28,"wiredfurni.params.rotatefurni.1"),""),c.Kb(3),c.yc("ngModel",t.rotation),c.Kb(3),c.Yc(" ",c.sc(56,30,"wiredfurni.params.rotatefurni.2"),""),c.Kb(3),c.yc("ngModel",t.rotation),c.Kb(2),c.Xc(c.sc(61,32,"wiredfurni.params.rotatefurni.3")))},encapsulation:2}),e})();const a=c.fc(o)},pnVP:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("xPcM"),r=n("vLqR"),s=n("fXoL");let c=(()=>{class e extends r.a{constructor(){super(...arguments),this.followMode="0"}get code(){return e.CODE}onEditStart(e){this.botName=e.stringData,this.followMode=e.intData.length>0?e.intData[0].toString():"0",super.onEditStart(e)}readStringParamFromForm(){return this.botName}readIntegerParamsFromForm(){return[Number.parseInt(this.followMode)]}get hasSpecialInputs(){return!0}}return e.CODE=i.a.BOT_FOLLOW_AVATAR,e.\u0275fac=function(t){return o(t||e)},e.\u0275cmp=s.Sb({type:e,selectors:[["ng-component"]],features:[s.Hb],decls:16,vars:13,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"form-check"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(s.dc(0,"nitro-wired-action-base-component",0),s.nc("delayChange",function(e){return t.delay=e}),s.dc(1,"div",1),s.dc(2,"label"),s.Wc(3),s.rc(4,"translate"),s.cc(),s.dc(5,"input",2),s.nc("ngModelChange",function(e){return t.botName=e}),s.cc(),s.cc(),s.dc(6,"div",3),s.dc(7,"input",4),s.nc("ngModelChange",function(e){return t.followMode=e}),s.cc(),s.dc(8,"label",5),s.Wc(9),s.rc(10,"translate"),s.cc(),s.cc(),s.dc(11,"div",3),s.dc(12,"input",6),s.nc("ngModelChange",function(e){return t.followMode=e}),s.cc(),s.dc(13,"label",5),s.Wc(14),s.rc(15,"translate"),s.cc(),s.cc(),s.cc()),2&e&&(s.yc("delay",t.delay),s.Kb(3),s.Xc(s.sc(4,7,"wiredfurni.params.bot.name")),s.Kb(2),s.yc("ngModel",t.botName),s.Kb(2),s.yc("ngModel",t.followMode),s.Kb(2),s.Xc(s.sc(10,9,"wiredfurni.params.start.following")),s.Kb(3),s.yc("ngModel",t.followMode),s.Kb(2),s.Xc(s.sc(15,11,"wiredfurni.params.stop.following")))},encapsulation:2}),e})();const o=s.fc(c)},ppP4:function(e,t,n){"use strict";n.d(t,"a",function(){return w});var i=n("bwAN"),r=n("pE/2"),s=n("fXoL"),c=n("WnqX"),o=n("cC5F"),a=n("ay9g"),l=n("hJ6O"),d=n("isOV"),u=n("VWsa"),h=n("rYk/");function g(e,t){if(1&e&&(s.dc(0,"div",16),s.Wc(1),s.cc()),2&e){const e=s.qc(2);s.Kb(1),s.Xc(e.furniUnseenCount)}}function m(e,t){if(1&e&&(s.dc(0,"div",16),s.Wc(1),s.cc()),2&e){const e=s.qc(2);s.Kb(1),s.Xc(e.botUnseenCount)}}function f(e,t){if(1&e&&(s.dc(0,"div",16),s.Wc(1),s.cc()),2&e){const e=s.qc(2);s.Kb(1),s.Xc(e.petUnseenCount)}}function p(e,t){if(1&e&&(s.dc(0,"div",16),s.Wc(1),s.cc()),2&e){const e=s.qc(2);s.Kb(1),s.Xc(e.badgeUnseenCount)}}function _(e,t){if(1&e&&s.Zb(0,"div",17),2&e){const e=s.qc(2);s.yc("roomPreviewer",e.roomPreviewer)}}function b(e,t){if(1&e&&s.Zb(0,"div",18),2&e){const e=s.qc(2);s.yc("roomPreviewer",e.roomPreviewer)}}function v(e,t){if(1&e&&s.Zb(0,"div",19),2&e){const e=s.qc(2);s.yc("roomPreviewer",e.roomPreviewer)}}function E(e,t){1&e&&s.Zb(0,"div",20)}function S(e,t){1&e&&s.Zb(0,"div",21)}const y=function(e){return{active:e}};function I(e,t){if(1&e){const e=s.ec();s.dc(0,"div",2),s.dc(1,"div",3),s.dc(2,"h6",4),s.Wc(3),s.rc(4,"translate"),s.cc(),s.dc(5,"button",5),s.nc("click",function(){return s.Lc(e),s.qc().hide()}),s.Zb(6,"i",6),s.cc(),s.cc(),s.dc(7,"div",7),s.dc(8,"div",8),s.dc(9,"button",9),s.nc("click",function(){return s.Lc(e),s.qc().showFurniture()}),s.Wc(10),s.rc(11,"translate"),s.Uc(12,g,2,1,"div",10),s.cc(),s.dc(13,"button",9),s.nc("click",function(){return s.Lc(e),s.qc().showBots()}),s.Wc(14),s.rc(15,"translate"),s.Uc(16,m,2,1,"div",10),s.cc(),s.dc(17,"button",9),s.nc("click",function(){return s.Lc(e),s.qc().showPets()}),s.Wc(18),s.rc(19,"translate"),s.Uc(20,f,2,1,"div",10),s.cc(),s.dc(21,"button",9),s.nc("click",function(){return s.Lc(e),s.qc().showBadges()}),s.Wc(22),s.rc(23,"translate"),s.Uc(24,p,2,1,"div",10),s.cc(),s.cc(),s.Uc(25,_,1,1,"div",11),s.Uc(26,b,1,1,"div",12),s.Uc(27,v,1,1,"div",13),s.Uc(28,E,1,0,"div",14),s.Uc(29,S,1,0,"div",15),s.cc(),s.cc()}if(2&e){const e=s.qc();s.Kb(3),s.Xc(s.sc(4,18,"inventory.title")),s.Kb(6),s.yc("ngClass",s.Cc(28,y,e.furnitureVisible||e.tradingVisible)),s.Kb(1),s.Xc(s.sc(11,20,"inventory.furni")),s.Kb(2),s.yc("ngIf",e.furniUnseenCount),s.Kb(1),s.yc("ngClass",s.Cc(30,y,e.botsVisible)),s.Kb(1),s.Xc(s.sc(15,22,"inventory.bots")),s.Kb(2),s.yc("ngIf",e.botUnseenCount),s.Kb(1),s.yc("ngClass",s.Cc(32,y,e.petsVisible)),s.Kb(1),s.Xc(s.sc(19,24,"inventory.furni.tab.pets")),s.Kb(2),s.yc("ngIf",e.petUnseenCount),s.Kb(1),s.yc("ngClass",s.Cc(34,y,e.badgesVisible)),s.Kb(1),s.Xc(s.sc(23,26,"inventory.badges")),s.Kb(2),s.yc("ngIf",e.badgeUnseenCount),s.Kb(1),s.yc("ngIf",e.botsVisible),s.Kb(1),s.yc("ngIf",e.petsVisible),s.Kb(1),s.yc("ngIf",e.furnitureVisible),s.Kb(1),s.yc("ngIf",e.badgesVisible),s.Kb(1),s.yc("ngIf",e.tradingVisible)}}let w=(()=>{class e{constructor(e,t,n,i,r,s,c){this._settingsService=e,this._inventoryService=t,this._inventoryFurnitureService=n,this._inventoryBotService=i,this._inventoryPetService=r,this._inventoryBadgeService=s,this._inventoryTradingService=c,this.visible=!1,this._roomPreviewer=null}ngOnInit(){this._roomPreviewer||(this._roomPreviewer=new r.a(i.a.instance.roomEngine,++r.a.PREVIEW_COUNTER)),this._inventoryService.controller=this}ngOnDestroy(){this._roomPreviewer&&this._roomPreviewer.dispose(),this._inventoryService.controller=null}ngOnChanges(e){const t=e.visible.currentValue;t!==e.visible.previousValue&&(t||this._inventoryTradingService.close())}hide(){this._inventoryService.hideWindow()}showFurniture(){this._inventoryService.furnitureVisible=!0,this._inventoryService.botsVisible=!1,this._inventoryService.petsVisible=!1,this._inventoryService.badgesVisible=!1}showBots(){this._inventoryService.furnitureVisible=!1,this._inventoryService.botsVisible=!0,this._inventoryService.petsVisible=!1,this._inventoryService.badgesVisible=!1}showPets(){this._inventoryService.furnitureVisible=!1,this._inventoryService.botsVisible=!1,this._inventoryService.petsVisible=!0,this._inventoryService.badgesVisible=!1}showBadges(){this._inventoryService.furnitureVisible=!1,this._inventoryService.botsVisible=!1,this._inventoryService.petsVisible=!1,this._inventoryService.badgesVisible=!0}updateItemLocking(){const e=[];if(e.push(...this._inventoryTradingService.getOwnTradingItemIds()),e.length)for(const t of this._inventoryFurnitureService.groupItems)t.lockItemIds(e);else this._inventoryFurnitureService.unlockAllItems()}setAllFurnitureSeen(){this._inventoryFurnitureService.setAllFurnitureSeen()}setAllBotsSeen(){this._inventoryBotService.setAllBotsSeen()}setAllPetsSeen(){this._inventoryPetService.setAllPetsSeen()}setAllBadgesSeen(){this._inventoryBadgeService.setAllBadgesSeen()}get roomPreviewer(){return this._roomPreviewer}get furnitureVisible(){return this._inventoryService.furnitureVisible}get badgesVisible(){return this._inventoryService.badgesVisible}get tradingVisible(){return this._inventoryService.tradingVisible}get marketPlaceOfferVisible(){return this._inventoryService.marketPlaceOfferVisible}get offerForMarketplace(){return this.furnitureService.offerOnMarketPlaceItem}get offerStatsIsCorrect(){return this.offerForMarketplace&&this._inventoryFurnitureService.marketPlaceItemStats&&this.offerForMarketplace.type===this._inventoryFurnitureService.marketPlaceItemStats._Str_8798}get botsVisible(){return this._inventoryService.botsVisible}get petsVisible(){return this._inventoryService.petsVisible}get furnitureService(){return this._inventoryFurnitureService}get botService(){return this._inventoryBotService}get petService(){return this._inventoryPetService}get badgeService(){return this._inventoryBadgeService}get tradeService(){return this._inventoryTradingService}get furniUnseenCount(){return this._inventoryService.furniUnseenCount}get botUnseenCount(){return this._inventoryService.botUnseenCount}get petUnseenCount(){return this._inventoryService.petUnseenCount}get badgeUnseenCount(){return this._inventoryService.badgeUnseenCount}}return e.\u0275fac=function(t){return new(t||e)(s.Yb(c.a),s.Yb(o.a),s.Yb(a.a),s.Yb(l.a),s.Yb(d.a),s.Yb(u.a),s.Yb(h.a))},e.\u0275cmp=s.Sb({type:e,selectors:[["nitro-inventory-main-component"]],inputs:{visible:"visible"},features:[s.Ib],decls:2,vars:3,consts:[["class","nitro-inventory card",3,"bringToTop","draggable",4,"ngIf"],["nitro-inventory-offer-marketplace-component","",3,"showMainWindow","item"],[1,"nitro-inventory","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"btn-group","w-100","mb-2"],["type","button",1,"btn","btn-secondary",3,"ngClass","click"],["class","bg-danger px-1 py-0 rounded notification-count ml-1",4,"ngIf"],["nitro-inventory-bots-component","",3,"roomPreviewer",4,"ngIf"],["nitro-inventory-pets-component","",3,"roomPreviewer",4,"ngIf"],["nitro-inventory-furniture-component","",3,"roomPreviewer",4,"ngIf"],["nitro-inventory-badges-component","",4,"ngIf"],["nitro-inventory-trading-component","",4,"ngIf"],[1,"bg-danger","px-1","py-0","rounded","notification-count","ml-1"],["nitro-inventory-bots-component","",3,"roomPreviewer"],["nitro-inventory-pets-component","",3,"roomPreviewer"],["nitro-inventory-furniture-component","",3,"roomPreviewer"],["nitro-inventory-badges-component",""],["nitro-inventory-trading-component",""]],template:function(e,t){1&e&&(s.Uc(0,I,30,36,"div",0),s.Zb(1,"div",1)),2&e&&(s.yc("ngIf",t.visible),s.Kb(1),s.yc("showMainWindow",t.marketPlaceOfferVisible&&t.offerForMarketplace&&t.offerStatsIsCorrect)("item",t.offerForMarketplace))},encapsulation:2}),e})()},qfqS:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("xPcM"),s=n("vLqR"),c=n("fXoL");let o=(()=>{class e extends s.a{get code(){return e.CODE}onEditStart(e){this.botName=e.stringData,super.onEditStart(e)}readStringParamFromForm(){return this.botName}get hasSpecialInputs(){return!0}get requiresFurni(){return i.a._Str_4873}}return e.CODE=r.a.BOT_TELEPORT,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:6,vars:5,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.dc(0,"nitro-wired-action-base-component",0),c.nc("delayChange",function(e){return t.delay=e}),c.dc(1,"div",1),c.dc(2,"label"),c.Wc(3),c.rc(4,"translate"),c.cc(),c.dc(5,"input",2),c.nc("ngModelChange",function(e){return t.botName=e}),c.cc(),c.cc(),c.cc()),2&e&&(c.yc("delay",t.delay),c.Kb(3),c.Xc(c.sc(4,3,"wiredfurni.params.bot.name")),c.Kb(2),c.yc("ngModel",t.botName))},encapsulation:2}),e})();const a=c.fc(o)},rC5y:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("bwAN"),r=n("gKK4"),s=n("VFvI"),c=n("5+Zn"),o=n("fXoL");let a=(()=>{class e extends r.a{constructor(){super(...arguments),this.time=0,this.timeLocale=""}get code(){return e.CODE}onEditStart(e){this.time=e.intData[0]||1,this.updateLocaleParameter()}readIntegerParamsFromForm(){return[this.time]}onSliderChange(){this.updateLocaleParameter()}decrease(){this.time-=1,this.time<e.MINIMUM_VALUE&&(this.time=e.MINIMUM_VALUE)}increase(){this.time+=1,this.time>e.MAXIMUM_VALUE&&(this.time=e.MAXIMUM_VALUE)}updateLocaleParameter(){this.timeLocale=i.a.instance.getLocalizationWithParameter("wiredfurni.params.allowbefore","seconds",c.a.getLocaleName(this.time))}get hasSpecialInputs(){return!0}get sliderOptions(){return{floor:e.MINIMUM_VALUE,ceil:e.MAXIMUM_VALUE,step:e.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return e.CODE=s.a.TIME_ELAPSED_LESS,e.MINIMUM_VALUE=1,e.MAXIMUM_VALUE=1200,e.STEPPER_VALUE=1,e.\u0275fac=function(t){return l(t||e)},e.\u0275cmp=o.Sb({type:e,selectors:[["ng-component"]],features:[o.Hb],decls:9,vars:3,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","time",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(e,t){1&e&&(o.dc(0,"nitro-wired-base-component"),o.dc(1,"p",0),o.Wc(2),o.cc(),o.dc(3,"div",1),o.dc(4,"button",2),o.nc("click",function(){return t.decrease()}),o.Zb(5,"i",3),o.cc(),o.dc(6,"ngx-slider",4),o.nc("valueChange",function(e){return t.time=e})("valueChange",function(){return t.onSliderChange()}),o.cc(),o.dc(7,"button",2),o.nc("click",function(){return t.increase()}),o.Zb(8,"i",5),o.cc(),o.cc(),o.cc()),2&e&&(o.Kb(2),o.Xc(t.timeLocale),o.Kb(4),o.yc("options",t.sliderOptions)("value",t.time))},encapsulation:2}),e})();const l=o.fc(a)},rGzS:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("xPcM"),s=n("vLqR"),c=n("fXoL");let o=(()=>{class e extends s.a{get code(){return e.CODE}onEditStart(e){this.movement=(e.intData.length>0?e.intData[0]:0).toString(),this.rotation=(e.intData.length>1?e.intData[1]:0).toString(),super.onEditStart(e)}readIntegerParamsFromForm(){return[Number.parseInt(this.movement),Number.parseInt(this.rotation)]}get hasSpecialInputs(){return!0}get requiresFurni(){return i.a._Str_5430}}return e.CODE=r.a.MOVE_TO_DIRECTION,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:57,vars:39,consts:[[3,"delay","delayChange"],[1,"form-row","mb-2"],[1,"form-check"],["type","radio","name","movement","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[1,"icon","icon-ne"],["type","radio","name","movement","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-se"],["type","radio","name","movement","value","4",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-sw"],["type","radio","name","movement","value","6",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-nw"],["type","radio","name","rotation","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","3",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","4",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","5",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","6",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.dc(0,"nitro-wired-action-base-component",0),c.nc("delayChange",function(e){return t.delay=e}),c.Wc(1),c.rc(2,"translate"),c.dc(3,"div",1),c.dc(4,"div",2),c.dc(5,"input",3),c.nc("ngModelChange",function(e){return t.movement=e}),c.cc(),c.dc(6,"label",4),c.Zb(7,"i",5),c.cc(),c.cc(),c.dc(8,"div",2),c.dc(9,"input",6),c.nc("ngModelChange",function(e){return t.movement=e}),c.cc(),c.dc(10,"label",4),c.Zb(11,"i",7),c.cc(),c.cc(),c.dc(12,"div",2),c.dc(13,"input",8),c.nc("ngModelChange",function(e){return t.movement=e}),c.cc(),c.dc(14,"label",4),c.Zb(15,"i",9),c.cc(),c.cc(),c.dc(16,"div",2),c.dc(17,"input",10),c.nc("ngModelChange",function(e){return t.movement=e}),c.cc(),c.dc(18,"label",4),c.Zb(19,"i",11),c.cc(),c.cc(),c.cc(),c.Wc(20),c.rc(21,"translate"),c.dc(22,"div",2),c.dc(23,"input",12),c.nc("ngModelChange",function(e){return t.rotation=e}),c.cc(),c.dc(24,"label",4),c.Wc(25),c.rc(26,"translate"),c.cc(),c.cc(),c.dc(27,"div",2),c.dc(28,"input",13),c.nc("ngModelChange",function(e){return t.rotation=e}),c.cc(),c.dc(29,"label",4),c.Wc(30),c.rc(31,"translate"),c.cc(),c.cc(),c.dc(32,"div",2),c.dc(33,"input",14),c.nc("ngModelChange",function(e){return t.rotation=e}),c.cc(),c.dc(34,"label",4),c.Wc(35),c.rc(36,"translate"),c.cc(),c.cc(),c.dc(37,"div",2),c.dc(38,"input",15),c.nc("ngModelChange",function(e){return t.rotation=e}),c.cc(),c.dc(39,"label",4),c.Wc(40),c.rc(41,"translate"),c.cc(),c.cc(),c.dc(42,"div",2),c.dc(43,"input",16),c.nc("ngModelChange",function(e){return t.rotation=e}),c.cc(),c.dc(44,"label",4),c.Wc(45),c.rc(46,"translate"),c.cc(),c.cc(),c.dc(47,"div",2),c.dc(48,"input",17),c.nc("ngModelChange",function(e){return t.rotation=e}),c.cc(),c.dc(49,"label",4),c.Wc(50),c.rc(51,"translate"),c.cc(),c.cc(),c.dc(52,"div",2),c.dc(53,"input",18),c.nc("ngModelChange",function(e){return t.rotation=e}),c.cc(),c.dc(54,"label",4),c.Wc(55),c.rc(56,"translate"),c.cc(),c.cc(),c.cc()),2&e&&(c.yc("delay",t.delay),c.Kb(1),c.Yc(" ",c.sc(2,21,"wiredfurni.params.startdir")," "),c.Kb(4),c.yc("ngModel",t.movement),c.Kb(4),c.yc("ngModel",t.movement),c.Kb(4),c.yc("ngModel",t.movement),c.Kb(4),c.yc("ngModel",t.movement),c.Kb(3),c.Yc(" ",c.sc(21,23,"wiredfurni.params.turn")," "),c.Kb(3),c.yc("ngModel",t.rotation),c.Kb(2),c.Xc(c.sc(26,25,"wiredfurni.params.turn.0")),c.Kb(3),c.yc("ngModel",t.rotation),c.Kb(2),c.Xc(c.sc(31,27,"wiredfurni.params.turn.1")),c.Kb(3),c.yc("ngModel",t.rotation),c.Kb(2),c.Xc(c.sc(36,29,"wiredfurni.params.turn.2")),c.Kb(3),c.yc("ngModel",t.rotation),c.Kb(2),c.Xc(c.sc(41,31,"wiredfurni.params.turn.3")),c.Kb(3),c.yc("ngModel",t.rotation),c.Kb(2),c.Xc(c.sc(46,33,"wiredfurni.params.turn.4")),c.Kb(3),c.yc("ngModel",t.rotation),c.Kb(2),c.Xc(c.sc(51,35,"wiredfurni.params.turn.5")),c.Kb(3),c.yc("ngModel",t.rotation),c.Kb(2),c.Xc(c.sc(56,37,"wiredfurni.params.turn.6")))},encapsulation:2}),e})();const a=c.fc(o)},"rYk/":function(e,t,n){"use strict";n.d(t,"a",function(){return D});var i=n("wYOr"),r=n("WwzQ"),s=n("VGQi"),c=n("g5xB"),o=n("AIOl"),a=n("gPkL"),l=n("2/Bp"),d=n("q27h"),u=n("sjc/"),h=n("N7kh"),g=n("UM0G"),m=n("xRk6"),f=n("q/Au"),p=n("4u4s"),_=n("8OVy"),b=n("KR1Y"),v=n("/akQ"),E=n("STOr"),S=n("tlPn"),y=n("Ort7"),I=n("HVZZ"),w=n("P9SG"),C=n("bwAN"),R=n("x46z"),T=n("wvSN"),O=n("Mdne"),M=n("nJ5u"),U=n("fXoL"),x=n("l1qq"),A=n("cC5F");let D=(()=>{class e{constructor(e,t,n){this._notificationService=e,this._inventoryService=t,this._ngZone=n,this._messages=[],this._state=0,this._running=!1,this._ownUserIndex=-1,this._ownUserName="",this._ownUserNumItems=0,this._ownUserNumCredits=0,this._ownUserAccepts=!1,this._ownUserCanTrade=!1,this._otherUserIndex=-1,this._otherUserName="",this._otherUserNumItems=0,this._otherUserNumCredits=0,this._otherUserAccepts=!1,this._otherUserCanTrade=!1,this._offeredItemIds=[],this.registerMessages()}static _Str_16998(e,t){let n=e.toString();const i=t;if(!(t instanceof R.a))return n;let r=1;for(;r<5;)n=n+","+i.getValue(r),r++;return n}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new r.a(this.onTradingAcceptEvent.bind(this)),new s.a(this.onTradingCloseEvent.bind(this)),new c.a(this.onTradingCompletedEvent.bind(this)),new o.a(this.onTradingConfirmationEvent.bind(this)),new a.a(this.onTradingListItemEvent.bind(this)),new l.a(this.onTradingNotOpenEvent.bind(this)),new d.a(this.onTradingOpenEvent.bind(this)),new u.a(this.onTradingOpenFailedEvent.bind(this)),new h.a(this.onTradingOtherNotAllowedEvent.bind(this)),new g.a(this.onTradingYouAreNotAllowedEvent.bind(this))];for(const e of this._messages)C.a.instance.communication.registerMessageEvent(e)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const e of this._messages)C.a.instance.communication.removeMessageEvent(e);this._messages=[]})}onTradingAcceptEvent(e){e&&e.getParser()&&this._ngZone.run(()=>{e._Str_4963===this._ownUserIndex?this._ownUserAccepts=e._Str_15794:this._otherUserAccepts=e._Str_15794})}tradingNotificationMessage(e){switch(e){case T.a.ALERT_SCAM:return void this._notificationService.alert("${inventory.trading.warning.other_not_offering}","${inventory.trading.notification.title}");case T.a.ALERT_OTHER_CANCELLED:return void this._notificationService.alert("${inventory.trading.info.closed}","${inventory.trading.notification.title}");case T.a.ALERT_ALREADY_OPEN:return void this._notificationService.alert("${inventory.trading.info.already_open}","${inventory.trading.notification.title}")}}onTradingCloseEvent(e){if(!e)return;const t=e.getParser();t&&this._running&&this._ngZone.run(()=>{t.reason===I.a._Str_16410?this._notificationService.alert("${inventory.trading.notification.caption}, ${inventory.trading.notification.commiterror.info}","${inventory.trading.notification.title}"):t._Str_4963!==this._ownUserIndex&&this.tradingNotificationMessage(T.a.ALERT_OTHER_CANCELLED),this.close()})}onTradingCompletedEvent(t){t&&t.getParser()&&this._ngZone.run(()=>this.state=e.TRADING_STATE_COMPLETED)}onTradingConfirmationEvent(t){t&&t.getParser()&&this._ngZone.run(()=>this.state=e.TRADING_STATE_COUNTDOWN)}onTradingListItemEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>{const e=new i.a,n=new i.a;this.parseItems(t._Str_17841,e),this.parseItems(t._Str_17465,n),this.updateTrade(t,e,n)})}onTradingNotOpenEvent(e){}onTradingOpenEvent(e){if(!e)return;const t=e.getParser();if(!t)return;const n=C.a.instance.sessionDataManager,i=this._inventoryService.roomSession;if(!n||!i)return;let r=t._Str_4963;const s=i.userDataManager.getUserData(r);if(!s)return;let c=s.name,o=t._Str_16764,a=t._Str_17613;const l=i.userDataManager.getUserData(a);if(!l)return;let d=l.name,u=t._Str_13374;if(a===n.userId){const e=r,t=c,n=o;r=a,c=d,o=u,a=e,d=t,u=n}this._ngZone.run(()=>{this._inventoryService.hideAllControllers(),this._inventoryService.showWindow(),this._inventoryService.furnitureVisible=!0,this._inventoryService.tradingVisible=!0,this._Str_23457(r,c,o,a,d,u)})}onTradingOpenFailedEvent(e){if(!e)return;const t=e.getParser();t&&(t.reason!==w.a._Str_18150&&t.reason!==w.a._Str_18383||this._ngZone.run(()=>{this.tradingNotificationMessage(T.a.ALERT_ALREADY_OPEN)}))}onTradingOtherNotAllowedEvent(e){e&&this._ngZone.run(()=>{this._notificationService.alert("${inventory.trading.warning.others_account_disabled}","${inventory.trading.notification.title}")})}onTradingYouAreNotAllowedEvent(e){e&&this._ngZone.run(()=>{this._notificationService.alert("${inventory.trading.warning.own_account_disabled}","${inventory.trading.notification.title}")})}close(){this._running&&(this._state!==e.TRADING_STATE_READY&&this._state!==e.TRADING_STATE_COMPLETED&&(this.sendTradingCloseComposer(),this.state=e.TRADING_STATE_CANCELLED),this._inventoryService.controller.furnitureService.unlockAllItems(),this.state=e.TRADING_STATE_READY,this._running=!1,this._inventoryService.tradingVisible=!1)}startTrade(e,t){this.controller&&(this.controller.furnitureService.isInitalized||this.controller.furnitureService.requestLoad(),this.sendTradingOpenComposer(e))}_Str_23457(t,n,r,s,c,o){this._ownUserIndex=t,this._ownUserName=n,this._ownUserItems=new i.a,this._ownUserAccepts=!1,this._ownUserCanTrade=r,this._otherUserIndex=s,this._otherUserName=c,this._otherUserItems=new i.a,this._otherUserAccepts=!1,this._otherUserCanTrade=o,this._running=!0,this.state=e.TRADING_STATE_RUNNING}parseItems(e,t){if(!this.controller)return;const n=e.length;let i=0;for(;i<n;){const n=e[i];if(n){const e=n.spriteId,i=n.category;let r=n.furniType+e;n.isGroupable&&!this.isExternalImage(e)||(r="itemid"+n.itemId),n.category===O.a._Str_5186?r=n.itemId+"poster"+n.stuffData.getLegacyString():n.category===O.a._Str_12454&&(r="");let s=n.isGroupable&&!this.isExternalImage(n.spriteId)?t.getValue(r):null;s||(s=this.controller.furnitureService.createGroupItem(e,i,n.stuffData),t.add(r,s)),s.push(new M.a(n))}i++}}isExternalImage(e){const t=C.a.instance.sessionDataManager.getWallItemData(e);return t&&t.isExternalImage}updateTrade(e,t,n){this._ownUserItems&&this._ownUserItems.reset(),this._otherUserItems&&this._otherUserItems.reset(),e._Str_15162===this._ownUserIndex?(this._ownUserItems=t,this._ownUserNumItems=e._Str_14946,this._ownUserNumCredits=e._Str_15709,this._otherUserItems=n,this._otherUserNumItems=e._Str_13801,this._otherUserNumCredits=e._Str_9138):(this._ownUserItems=n,this._ownUserNumItems=e._Str_13801,this._ownUserNumCredits=e._Str_9138,this._otherUserItems=t,this._otherUserNumItems=e._Str_14946,this._otherUserNumCredits=e._Str_15709),this._ownUserAccepts=!1,this._otherUserAccepts=!1,this._inventoryService.updateItemLocking()}offerItems(e,t,n,i,r,s){if(!r&&e.length)C.a.instance.communication.connection.send(new b.a(e.pop()));else{const c=[];for(const o of e)this.canTradeItem(t,n,i,r,s)&&c.push(o);c.length&&C.a.instance.communication.connection.send(1===c.length?new b.a(c.pop()):new v.a(...c))}}canTradeItem(t,n,i,r,s){if(this._ownUserAccepts)return!1;if(null==this._ownUserItems)return!1;if(this._ownUserItems.length<e.MAX_ITEMS_TO_TRADE)return!0;if(!r)return!1;let c=n.toString();return c=i===O.a._Str_5186?c+"poster"+s.getLegacyString():i===O.a._Str_12454?e._Str_16998(n,s):(t?"I":"S")+c,!!this._ownUserItems.getValue(c)}removeItem(e){const t=this._ownUserItems.getWithIndex(e);if(!t)return;const n=t.getLastItem();n&&C.a.instance.communication.connection.send(new E.a(n.id))}getOwnTradingItemIds(){const e=[];if(!this._ownUserItems||!this._ownUserItems.length)return e;for(const t of this._ownUserItems.getValues()){let n=0;for(;n<t.getTotalCount();){const i=t.getItemByIndex(n);i&&e.push(i.ref),n++}}return e}onTimerFinished(){this._state===e.TRADING_STATE_COUNTDOWN&&(this.state=e.TRADING_STATE_CONFIRMING)}sendTradingAcceptComposer(){C.a.instance.communication.connection.send(new m.a)}sendTradingUnacceptComposer(){C.a.instance.communication.connection.send(new y.a)}sendTradingConfirmComposer(){this.state=e.TRADING_STATE_CONFIRMED,C.a.instance.communication.connection.send(new _.a)}sendTradingCloseComposer(){C.a.instance.communication.connection.send(new p.a)}sendTradingCancelComposer(){C.a.instance.communication.connection.send(new f.a)}sendTradingOpenComposer(e){C.a.instance.communication.connection.send(new S.a(e))}get controller(){return this._inventoryService.controller}get state(){return this._state}set state(t){if(this._state===t)return;let n=!1;switch(this._state){case e.TRADING_STATE_READY:t!==e.TRADING_STATE_RUNNING&&t!==e.TRADING_STATE_COMPLETED||(this._state=t,n=!0);break;case e.TRADING_STATE_RUNNING:t===e.TRADING_STATE_COUNTDOWN?(this._state=t,n=!0,this._inventoryService.tradeController.startTimer()):t===e.TRADING_STATE_CANCELLED&&(this._state=t,n=!0);break;case e.TRADING_STATE_COUNTDOWN:(t===e.TRADING_STATE_CONFIRMING||t===e.TRADING_STATE_CANCELLED||t===e.TRADING_STATE_RUNNING)&&(this._state=t,n=!0);break;case e.TRADING_STATE_CONFIRMING:t===e.TRADING_STATE_CONFIRMED?(this._state=t,n=!0):(t===e.TRADING_STATE_COMPLETED||t===e.TRADING_STATE_CANCELLED)&&(this._state=t,n=!0,this.close());break;case e.TRADING_STATE_CONFIRMED:(t===e.TRADING_STATE_COMPLETED||t===e.TRADING_STATE_CANCELLED)&&(this._state=t,n=!0,this.close());break;case e.TRADING_STATE_COMPLETED:t===e.TRADING_STATE_READY&&(this._state=t,n=!0);break;case e.TRADING_STATE_CANCELLED:(t===e.TRADING_STATE_READY||t===e.TRADING_STATE_RUNNING)&&(this._state=t,n=!0)}}get running(){return this._running}get ownUserName(){return this._ownUserName}get ownUserItems(){return this._ownUserItems}get ownUserNumItems(){return this._ownUserNumItems}get ownUserNumCredits(){return this._ownUserNumCredits}get ownUserAccepts(){return this._ownUserAccepts}get ownUserCanTrade(){return this._ownUserCanTrade}get otherUserName(){return this._otherUserName}get otherUserItems(){return this._otherUserItems}get otherUserNumItems(){return this._otherUserNumItems}get otherUserNumCredits(){return this._otherUserNumCredits}get otherUserAccepts(){return this._otherUserAccepts}get otherUserCanTrade(){return this._otherUserCanTrade}}return e.MAX_ITEMS_TO_TRADE=9,e.TRADING_STATE_READY=0,e.TRADING_STATE_RUNNING=1,e.TRADING_STATE_COUNTDOWN=2,e.TRADING_STATE_CONFIRMING=3,e.TRADING_STATE_CONFIRMED=4,e.TRADING_STATE_COMPLETED=5,e.TRADING_STATE_CANCELLED=6,e.\u0275fac=function(t){return new(t||e)(U.kc(x.a),U.kc(A.a),U.kc(U.H))},e.\u0275prov=U.Ub({token:e,factory:e.\u0275fac}),e})()},"rs/J":function(e,t,n){"use strict";n.d(t,"a",function(){return y});var i=n("J/x1"),r=n("zihW"),s=n("vXBv"),c=n("TC9S"),o=n("jrrc"),a=n("POTh"),l=n("KtBb"),d=n("ytpW"),u=n("bwAN"),h=n("bt9U"),g=n("gTDx"),m=n("IqKQ"),f=n("XNiG"),p=n("Kj3r"),_=n("/uUt");class b{constructor(){this.heightMap=[],this.heightMapString=null,this.doorX=0,this.doorY=0,this.doorDirection=0,this.thicknessWall=0,this.thicknessFloor=0}}class v{constructor(e,t){this.height=e,this.blocked=t}}var E=n("fXoL"),S=n("WnqX");let y=(()=>{class e{constructor(e,t){this._ngZone=e,this._settingsService=t,this._maxFloorLength=64,this._tileSize=32,this._colorMap={x:"0x101010",0:"0x0065ff",1:"0x0091ff",2:"0x00bcff",3:"0x00e8ff",4:"0x00ffea",5:"0x00ffbf",6:"0x00ff93",7:"0x00ff68",8:"0x00ff3d",9:"0x19ff00",a:"0x44ff00",b:"0x70ff00",c:"0x9bff00",d:"0xf2ff00",e:"0xffe000",f:"0xffb500",g:"0xff8900",h:"0xff5e00",i:"0xff3200",j:"0xff0700",k:"0xff0023",l:"0xff007a",m:"0xff00a5",n:"0xff00d1",o:"0xff00fc",p:"0xd600ff",q:"0xaa00ff"},this._heightScheme="x0123456789abcdefghijklmnopq",this._updates=0,this._showImportExport=!1,this._lastUsedTile={x:-1,y:-1},this.preveiwerUpdate=new f.a,this.component=null,this._messages=[],this._model=null,this._doorX=0,this._doorY=0,this._doorDirection=0,this._blockedTilesMap=[],this._thicknessWall=0,this._thicknessFloor=0,this._doorSettingsReceived=!1,this._blockedTilesMapReceived=!1,this._RoomThicknessReceived=!1,this._changesMade=!1,this.registerMessages(),this.loader=new m.Loader,this.loader.add("atlas","assets/images/floorplaneditor/tiles.json"),this.loader.load(),this.preveiwerUpdate.pipe(Object(p.a)(500),Object(_.a)()).subscribe(e=>{this._updatePreviewer()})}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),this._messages=[new c.a(this.onRoomModelEvent.bind(this)),new s.a(this.onRoomDoorEvent.bind(this)),new r.a(this.onRoomBlockedTilesEvent.bind(this)),new o.a(this.onRoomThicknessEvent.bind(this)),new i.a(this.onRoomRightsEvent.bind(this))];for(const e of this._messages)u.a.instance.communication.registerMessageEvent(e)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(this._messages&&this._messages.length){for(const e of this._messages)u.a.instance.communication.removeMessageEvent(e);this._messages=[]}})}onRoomRightsEvent(e){if(!this._settingsService.floorPlanVisible)return;if(!(e instanceof i.a))return;const t=e.getParser();t&&this._ngZone.run(()=>{this._settingsService.floorPlanVisible=t.controllerLevel>=h.a.ROOM_OWNER})}onRoomModelEvent(e){if(!e)return;const t=e.getParser();t&&(this._model=t.model,this._wallHeight=t.wallHeight+1,u.a.instance.communication.connection.send(new l.a),u.a.instance.communication.connection.send(new a.a),this.tryEmit())}onRoomDoorEvent(e){if(!e)return;const t=e.getParser();t&&(this._doorX=t.x,this._doorY=t.y,this._doorDirection=t.direction,this._doorSettingsReceived=!0,this.tryEmit())}onRoomBlockedTilesEvent(e){if(!e)return;const t=e.getParser();t&&(this._blockedTilesMap=t.blockedTilesMap,this._blockedTilesMapReceived=!0,this.tryEmit())}onRoomThicknessEvent(e){if(!e)return;const t=e.getParser();t&&(this._thicknessFloor=this.convertSettingnToNumber(t.thicknessFloor),this._thicknessWall=this.convertSettingnToNumber(t.thicknessWall),this._RoomThicknessReceived=!0,this.tryEmit())}onRoomEngineDisposedEvent(e){e&&this.component&&this.component.close()}reset(){this._model=null,this._doorSettingsReceived=!1,this._blockedTilesMapReceived=!1}tryEmit(){this.component&&this.component.visible&&this._model&&this._doorSettingsReceived&&this._blockedTilesMapReceived&&this._ngZone.run(()=>this.component.init(this._model,this._blockedTilesMap,this._doorX,this._doorY,this._doorDirection,this._thicknessWall,this._thicknessFloor))}render(){this.tryEmit()}save(e){u.a.instance.communication.connection.send(new d.a(e.heightMapString,e.doorX,e.doorY,e.doorDirection,this.convertNumbersForSaving(e.thicknessWall),this.convertNumbersForSaving(e.thicknessFloor),this._wallHeight-1)),this.reset()}convertNumbersForSaving(e){switch(e=parseInt(e.toString())){case 0:return-2;case 1:return-1;case 3:return 1;default:return 0}}clear(){this._floorMapSettings=new b,this.__originalFloorMapSettings=new b,this._highestX=0,this._highestY=0,this._coloredTilesCount=0,this._isHolding=!1,this._blockedTilesMap=[],this._changesMade=!1,this._currentAction="set",this._currentHeight=this._heightScheme[1]}generateTileMapString(){if("x"===this.floorMapSettings.heightMap[this._highestY][this._highestX].height){this._highestX=-1,this._highestY=-1;for(let e=this._maxFloorLength-1;e>=0;e--)if(this.floorMapSettings.heightMap[e])for(let t=this._maxFloorLength-1;t>=0;t--)this.floorMapSettings.heightMap[e][t]&&"x"!==this.floorMapSettings.heightMap[e][t].height&&(t>this._highestX&&(this._highestX=t),e>this._highestY&&(this._highestY=e))}const e=[];for(let t=0;t<=this._highestY;t++){const n=[];for(let e=0;e<=this._highestX;e++)n[e]=this.floorMapSettings.heightMap[t][e].height;e[t]=n.join("")}return e.join("\r")}readTileMapString(e){let t=e.split("\r");const n=[];let i=0,r=0;for(;i<t.length;){if(0===t[i].length){i--,t=t.splice(i,1);continue}const e=t[i].split("");for(n[i]=[],r=0;r<e.length;)n[i][r]=new v(e[r],this._blockedTilesMap[i]&&this._blockedTilesMap[i][r]),r++;for(;r<this._maxFloorLength;)n[i][r]=new v("x",!1),r++;i++}for(;i<this._maxFloorLength;){for(n[i]=[],r=0;r<this._maxFloorLength;)n[i][r]=new v("x",!1),r++;i++}return this._highestY=t.length-1,this._highestX=t[this._highestY].length-1,n}convertSettingnToNumber(e){switch(e){case.25:return 0;case.5:return 1;case 2:return 3;default:return 2}}renderTileMap(){this.component.tileMap.clear();let t=0;for(let n=0;n<this.floorMapSettings.heightMap.length;n++)for(let i=0;i<this.floorMapSettings.heightMap[n].length;i++){const r=this.floorMapSettings.heightMap[n][i];let s=!1;i===this.floorMapSettings.doorX&&n===this.floorMapSettings.doorY&&(s=!0);let c=r.height;r.blocked&&(c=e.TILE_BLOCKED),s&&(c=e.TILE_DOOR),"x"!==c&&t++;const o=i*this._tileSize/2-n*this._tileSize/2,a=i*this._tileSize/4+n*this._tileSize/4;this._ngZone.runOutsideAngular(()=>{this.component.tileMap.addFrame(c+".png",o+1024,a,null,null,null,null,1,n,i)})}this._ngZone.run(()=>this._coloredTilesCount=t),this._updates++,this.preveiwerUpdate.next(this._updates.toString())}_updatePreviewer(){this._ngZone.run(()=>this.floorMapSettings.heightMapString=this.generateTileMapString())}_handleTileClick(e,t){const n=this.floorMapSettings.heightMap[t][e],i=this._heightScheme.indexOf(n.height);let r=0;switch(this._currentAction){case"door":return void("x"!=n.height&&(this.floorMapSettings.doorX=e,this.floorMapSettings.doorY=t,this._changesMade=!0,this.renderTileMap()));case"up":r=i+1;break;case"down":r=i-1;break;case"set":r=this._heightScheme.indexOf(this._currentHeight);break;case"unset":r=0}if(-1===r)return;if(i===r)return;r>0&&(e>this.highestX&&(this.highestX=e),t>this.highestY&&(this.highestY=t));const s=this._heightScheme[r];s&&(n.blocked||(this.floorMapSettings.heightMap[t][e].height=s,this._changesMade=!0,this.renderTileMap()))}revertChanges(){this._ngZone.runOutsideAngular(()=>{this._floorMapSettings=JSON.parse(JSON.stringify(this.__originalFloorMapSettings)),this.renderTileMap()}),this._changesMade=!1}set floorMapSettings(e){this._floorMapSettings=e}get floorMapSettings(){return this._floorMapSettings}set originalMapSettings(e){this.__originalFloorMapSettings=JSON.parse(JSON.stringify(e))}get originalMapSettings(){return this.__originalFloorMapSettings}get highestY(){return this._highestY}set highestY(e){this._highestY=e}get highestX(){return this._highestX}set highestX(e){this._highestX=e}get maxTilesCount(){return this._maxFloorLength*this._maxFloorLength}decrementDoorDirection(){0===this.floorMapSettings.doorDirection?this.floorMapSettings.doorDirection=7:this.floorMapSettings.doorDirection--}incrementDoorDirection(){7===this.floorMapSettings.doorDirection?this.floorMapSettings.doorDirection=0:this.floorMapSettings.doorDirection++}decrementWallheight(){1===this.wallHeight?this.wallHeight=16:this.wallHeight--}incrementWallheight(){16===this.wallHeight?this.wallHeight=1:this.wallHeight++}get coloredTilesCount(){return this._coloredTilesCount}get tileSize(){return this._tileSize}get currentAction(){return this._currentAction}set currentAction(e){this._currentAction=e}get currentHeight(){return this._currentHeight}set currentHeight(e){this._currentHeight=e}get colorMap(){return this._colorMap}get blockedTilesMap(){return this._blockedTilesMap}set blockedTilesMap(e){this._blockedTilesMap=e}decrementHeight(){const e=this._heightScheme.indexOf(this.currentHeight);1!==e&&this.selectHeight(this._heightScheme[e-1])}selectHeight(e){this.currentHeight=e,this.currentAction="set"}incrementHeight(){const e=this._heightScheme.indexOf(this.currentHeight);e!==this._heightScheme.length-1&&this.selectHeight(this._heightScheme[e+1])}get changesMade(){return this._changesMade}get wallHeight(){return this._wallHeight}set wallHeight(e){this._wallHeight=e}detectPoints(){const e=this.component.tileMap,t=new m.Point;e.containsPoint=n=>(e.worldTransform.applyInverse(n,t),this.tileHitDettection(e,t,!1)),e.on("pointerup",()=>{this._isHolding=!1}),e.on("pointerout",()=>{this._isHolding=!1}),e.on("pointerdown",t=>{t.data.originalEvent instanceof PointerEvent&&2!==t.data.originalEvent.button&&this.tileHitDettection(e,t.data.global,!0)}),e.on("click",t=>{t.data.originalEvent instanceof PointerEvent&&2!==t.data.originalEvent.button&&this.tileHitDettection(e,t.data.global,!0,!0)})}tileHitDettection(e,t,n,i=!1){const r=e.children[0].pointsBuf,s=g.b,c=r.length;n&&(this._isHolding=!0);for(let o=0;o<c;o+=s){const e=r.slice(o,o+s),n=e[4],c=e[5],a=Math.floor(t.x),l=Math.floor(t.y),d=e[3]+c/2;if(Math.abs(a-(e[2]+n/2)-2)/(.5*n)+Math.abs(l-d-2)/(.5*c)<=1){if(this._isHolding){const t=e[13],n=e[14];i?this._handleTileClick(n,t):this._lastUsedTile.x==n&&this._lastUsedTile.y==t||(this._lastUsedTile={x:n,y:t},this._handleTileClick(n,t))}return!0}}return!1}get showImportExport(){return this._showImportExport}set showImportExport(e){this._showImportExport=e}}return e.TILE_BLOCKED="r_blocked",e.TILE_DOOR="r_door",e.\u0275fac=function(t){return new(t||e)(E.kc(E.H),E.kc(S.a))},e.\u0275prov=E.Ub({token:e,factory:e.\u0275fac}),e})()},sIeP:function(e,t,n){"use strict";n.d(t,"a",function(){return i});let i=(()=>{class e{}return e.FURNI=1,e.RENTABLE=2,e.PET=3,e.BADGE=4,e.BOT=5,e.GAMES=6,e._Str_12463=[e.FURNI,e.RENTABLE,e.PET,e.BADGE,e.BOT],e})()},sXB4:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("XNiG"),r=n("xgIS"),s=n("eIep"),c=n("lJxs"),o=n("1G5W"),a=n("fXoL");let l=(()=>{class e{constructor(e,t,n){this._viewContainerRef=e,this._elementRef=t,this._ngZone=n,this.dragHandle=".drag-handler",this.center=!1,this.topCenter=!0,this.noMemory=!1,this._name=null,this._target=null,this._handle=null,this._isDragging=!1,this._delta={x:0,y:0},this._offset={x:0,y:0},this._destroy=new i.a}ngAfterViewInit(){this._name=this._viewContainerRef._hostTNode.classesWithoutHost;const t=this._elementRef.nativeElement;if(!t)return;this._handle=this.dragHandle?t.querySelector(this.dragHandle):t,this._target=this.dragTarget?t.querySelector(this.dragTarget):t,this._handle&&(this._handle.classList.add("header-draggable"),this._handle.parentElement.classList.add("header-draggable")),this.topCenter&&(t.style.top="50px",t.style.left=`calc(50vw - ${t.offsetWidth/2}px)`),this.center&&(t.style.top=`calc(50vh - ${t.offsetHeight/2}px)`,t.style.left=`calc(50vw - ${t.offsetWidth/2}px)`);const n=e.POS_MEMORY.get(this._name);n&&(this._offset.x=n.offset.x,this._offset.y=n.offset.y,this.translate()),this.setupEvents()}ngOnDestroy(){this._destroy.next(),this._handle&&(this._handle.classList.remove("header-draggable"),this._handle.parentElement.classList.remove("header-draggable"))}setupEvents(){this._ngZone.runOutsideAngular(()=>{const t=Object(r.a)(this._handle,"mousedown"),n=Object(r.a)(document,"mousemove"),i=Object(r.a)(document,"mouseup");t.pipe(Object(s.a)(e=>{const t=e.clientX,r=e.clientY;return n.pipe(Object(c.a)(e=>{e.preventDefault(),this._delta={x:e.clientX-t,y:e.clientY-r}}),Object(o.a)(i))}),Object(o.a)(this._destroy)).subscribe(()=>{this._isDragging=!0,0===this._delta.x&&0===this._delta.y||this.translate()}),i.pipe(Object(o.a)(this._destroy)),i.subscribe(()=>{if(!this._isDragging)return;this._isDragging=!1,this._offset.x+=this._delta.x,this._offset.y+=this._delta.y,this._delta={x:0,y:0};const t=this._target.offsetLeft+this._offset.x,n=this._target.offsetTop+this._offset.y;n<e.BOUNDS_THRESHOLD_TOP?this._offset.y=-this._target.offsetTop:n+this._handle.offsetHeight>=document.body.offsetHeight-e.BOUNDS_THRESHOLD_TOP&&(this._offset.y=document.body.offsetHeight-this._target.offsetHeight-this._target.offsetTop),t+this._target.offsetWidth<e.BOUNDS_THRESHOLD_LEFT?this._offset.x=-this._target.offsetLeft:t>=document.body.offsetWidth-e.BOUNDS_THRESHOLD_LEFT&&(this._offset.x=document.body.offsetWidth-this._target.offsetWidth-this._target.offsetLeft),this.translate(),this.noMemory||e.POS_MEMORY.set(this._name,{offset:{x:this._offset.x+0,y:this._offset.y+0}})})})}translate(){this._target.style.transform=`translate(${this._offset.x+this._delta.x}px, ${this._offset.y+this._delta.y}px)`}}return e.POS_MEMORY=new Map,e.BOUNDS_THRESHOLD_TOP=0,e.BOUNDS_THRESHOLD_LEFT=0,e.\u0275fac=function(t){return new(t||e)(a.Yb(a.Z),a.Yb(a.p),a.Yb(a.H))},e.\u0275dir=a.Tb({type:e,selectors:[["","draggable",""]],inputs:{dragHandle:"dragHandle",dragTarget:"dragTarget",center:"center",topCenter:"topCenter",noMemory:"noMemory"}}),e})()},sqfu:function(e,t,n){"use strict";n.d(t,"a",function(){return q});var i=n("bwAN"),r=n("3Pt+"),s=n("MQXk"),c=n("sB06"),o=n("Sxtm");class a{constructor(e,t,n){this._level=e,this._tileSize=t,this._name=n}get level(){return this._level}get tileSize(){return this._tileSize}get name(){return this._name}}var l=n("fXoL"),d=n("CCgv"),u=n("1kSV"),h=n("Kdsb"),g=n("ofXK"),m=n("0DQ5");const f=["nitro-navigator-room-creator-component",""],p=function(e){return{active:e}},_=function(e){return{"background-image":e}};function b(e,t){if(1&e){const e=l.ec();l.dc(0,"div",21),l.nc("click",function(){l.Lc(e);const n=t.$implicit;return l.qc().setRoomLayout(n.name)}),l.dc(1,"button",22),l.dc(2,"div",23),l.Wc(3),l.rc(4,"translate"),l.cc(),l.cc(),l.cc()}if(2&e){const e=t.$implicit,n=l.qc();l.Kb(1),l.yc("ngClass",l.Cc(6,p,n.roomLayoutControl.value===e.name))("ngStyle",l.Cc(8,_,"url("+n.getRoomLayoutImageUrl(e.name)+")")),l.Kb(2),l.Zc("",e.tileSize," ",l.sc(4,4,"navigator.createroom.tilesize"),"")}}function v(e,t){if(1&e&&(l.dc(0,"option",24),l.Wc(1),l.rc(2,"translate"),l.cc()),2&e){const e=t.$implicit;l.yc("value",e.id),l.Kb(1),l.Xc(l.sc(2,2,e.name))}}function E(e,t){if(1&e&&(l.dc(0,"option",24),l.Wc(1),l.cc()),2&e){const e=t.$implicit;l.yc("value",e),l.Kb(1),l.Xc(e)}}function S(e,t){if(1&e&&(l.dc(0,"option",24),l.Wc(1),l.rc(2,"translate"),l.cc()),2&e){const e=t.$implicit;l.yc("value",e.key),l.Kb(1),l.Xc(l.sc(2,2,e.value))}}let y=(()=>{class e{constructor(e,t,n){this._navigatorService=e,this._activeModal=t,this._formBuilder=n,this._layouts=[],this._maxVisitors=[],this._tradeSettings=[],this._roomCreateListener=null}ngOnInit(){this.setRoomLayouts(),this.setMaxVisitors(50),this.setTradeSettings(),this.createForm(),this._roomCreateListener=new s.a(this.onRoomCreatedEvent.bind(this)),i.a.instance.communication.registerMessageEvent(this._roomCreateListener)}ngOnDestroy(){i.a.instance.communication.removeMessageEvent(this._roomCreateListener)}onRoomCreatedEvent(e){this.hide()}createForm(){let e=0;const t=this.categories[0];t&&(e=t.id),this._form=this._formBuilder.group({roomName:["",r.u.required],roomDesc:[""],roomLayout:[this.layouts[0].name,r.u.required],roomCategory:[e.toString(),r.u.required],roomVisitors:[this.maxVisitors[0].toString(),r.u.required],roomTrade:["0",r.u.required]})}submit(){if(!this.form.valid)return;const e=this.roomNameControl.value,t=this.roomDescControl.value,n="model_"+this.roomLayoutControl.value,r=parseInt(this.roomCategoryControl.value),s=parseInt(this.roomVisitorsControl.value),o=parseInt(this.roomTradeControl.value);e&&""!==e&&i.a.instance.communication.connection.send(new c.a(e,t,n,r,s,o))}hide(){this._activeModal.close()}setRoomLayouts(){this._layouts=[new a(o.a._Str_3159,104,"a"),new a(o.a._Str_3159,94,"b"),new a(o.a._Str_3159,36,"c"),new a(o.a._Str_3159,84,"d"),new a(o.a._Str_3159,80,"e"),new a(o.a._Str_3159,80,"f"),new a(o.a._Str_3159,416,"i"),new a(o.a._Str_3159,320,"j"),new a(o.a._Str_3159,448,"k"),new a(o.a._Str_3159,352,"l"),new a(o.a._Str_3159,384,"m"),new a(o.a._Str_3159,372,"n"),new a(o.a._Str_2964,80,"g"),new a(o.a._Str_2964,74,"h"),new a(o.a._Str_2964,416,"o"),new a(o.a._Str_2964,352,"p"),new a(o.a._Str_2964,304,"q"),new a(o.a._Str_2964,336,"r"),new a(o.a._Str_2964,748,"u"),new a(o.a._Str_2964,438,"v"),new a(o.a._Str_2575,540,"t"),new a(o.a._Str_2575,512,"w"),new a(o.a._Str_2575,396,"x"),new a(o.a._Str_2575,440,"y"),new a(o.a._Str_2575,456,"z"),new a(o.a._Str_2575,208,"0"),new a(o.a._Str_2575,1009,"1"),new a(o.a._Str_2575,1044,"2"),new a(o.a._Str_2575,183,"3"),new a(o.a._Str_2575,254,"4"),new a(o.a._Str_2575,1024,"5"),new a(o.a._Str_2575,801,"6"),new a(o.a._Str_2575,354,"7"),new a(o.a._Str_2575,888,"8"),new a(o.a._Str_2575,926,"9")]}setMaxVisitors(t){this._maxVisitors=[];let n=e.MAX_VISITOR_STEPPER;for(;n<=t;)this._maxVisitors.push(n),n+=e.MAX_VISITOR_INCREMENTOR}setTradeSettings(){this._tradeSettings=[],this._tradeSettings.push("${navigator.roomsettings.trade_not_allowed}","${navigator.roomsettings.trade_not_with_Controller}","${navigator.roomsettings.trade_allowed}")}setRoomLayout(e){const t=this.roomLayoutControl;t&&t.setValue(e)}getRoomLayoutImageUrl(e){let t=i.a.instance.getConfiguration("images.url");return t+=`/navigator/models/model_${e}.png`,t}get form(){return this._form}get categories(){return this._navigatorService.categories}get layouts(){return this._layouts}get maxVisitors(){return this._maxVisitors}get tradeSettings(){return this._tradeSettings}get roomNameControl(){return this._form.controls.roomName}get roomDescControl(){return this._form.controls.roomDesc}get roomLayoutControl(){return this._form.controls.roomLayout}get roomCategoryControl(){return this._form.controls.roomCategory}get roomVisitorsControl(){return this._form.controls.roomVisitors}get roomTradeControl(){return this._form.controls.roomTrade}get isLoading(){return!1}}return e.MAX_VISITOR_STEPPER=10,e.MAX_VISITOR_INCREMENTOR=5,e.\u0275fac=function(t){return new(t||e)(l.Yb(d.a),l.Yb(u.a),l.Yb(r.c))},e.\u0275cmp=l.Sb({type:e,selectors:[["","nitro-navigator-room-creator-component",""]],attrs:f,decls:49,vars:32,consts:[[1,"d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","row","p-3"],[1,"col-7"],[1,"grid-container",2,"height","479px","min-height","479px","max-height","479px"],[1,"grid-items","grid-2"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"col-5"],[3,"formGroup"],[1,"form-group"],["type","text","formControlName","roomName",1,"form-control","form-control-sm"],["formControlName","roomDesc",1,"form-control","form-control-sm"],["formControlName","roomCategory",1,"form-control","form-control-sm"],[3,"value",4,"ngFor","ngForOf"],["formControlName","roomVisitors",1,"form-control","form-control-sm"],["formControlName","roomTrade",1,"form-control","form-control-sm"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-success",3,"disabled","click"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button",1,"btn","btn-secondary","align-items-end","detail-info","has-image",3,"ngClass","ngStyle"],[1,"badge","badge-primary"],[3,"value"]],template:function(e,t){1&e&&(l.dc(0,"div",0),l.dc(1,"h6",1),l.Wc(2),l.rc(3,"translate"),l.cc(),l.dc(4,"button",2),l.nc("click",function(){return t.hide()}),l.Zb(5,"i",3),l.cc(),l.cc(),l.dc(6,"div",4),l.dc(7,"div",5),l.dc(8,"perfect-scrollbar",6),l.dc(9,"div",7),l.Uc(10,b,5,10,"div",8),l.cc(),l.cc(),l.cc(),l.dc(11,"div",9),l.dc(12,"form",10),l.dc(13,"div",11),l.dc(14,"label"),l.Wc(15),l.rc(16,"translate"),l.cc(),l.Zb(17,"input",12),l.cc(),l.dc(18,"div",11),l.dc(19,"label"),l.Wc(20),l.rc(21,"translate"),l.cc(),l.Zb(22,"textarea",13),l.cc(),l.dc(23,"div",11),l.dc(24,"label"),l.Wc(25),l.rc(26,"translate"),l.cc(),l.dc(27,"select",14),l.Uc(28,v,3,4,"option",15),l.cc(),l.cc(),l.dc(29,"div",11),l.dc(30,"label"),l.Wc(31),l.rc(32,"translate"),l.cc(),l.dc(33,"select",16),l.Uc(34,E,2,2,"option",15),l.cc(),l.cc(),l.dc(35,"div",11),l.dc(36,"label"),l.Wc(37),l.rc(38,"translate"),l.cc(),l.dc(39,"select",17),l.Uc(40,S,3,4,"option",15),l.rc(41,"keyvalue"),l.cc(),l.cc(),l.cc(),l.dc(42,"div",18),l.dc(43,"button",19),l.nc("click",function(){return t.submit()}),l.Wc(44),l.rc(45,"translate"),l.cc(),l.dc(46,"button",20),l.nc("click",function(){return t.hide()}),l.Wc(47),l.rc(48,"translate"),l.cc(),l.cc(),l.cc(),l.cc()),2&e&&(l.Kb(2),l.Xc(l.sc(3,14,"navigator.createroom.title")),l.Kb(8),l.yc("ngForOf",t.layouts),l.Kb(2),l.yc("formGroup",t.form),l.Kb(3),l.Xc(l.sc(16,16,"navigator.createroom.roomnameinfo")),l.Kb(5),l.Xc(l.sc(21,18,"navigator.createroom.roomdescinfo")),l.Kb(5),l.Xc(l.sc(26,20,"navigator.category")),l.Kb(3),l.yc("ngForOf",t.categories),l.Kb(3),l.Xc(l.sc(32,22,"navigator.maxvisitors")),l.Kb(3),l.yc("ngForOf",t.maxVisitors),l.Kb(3),l.Xc(l.sc(38,24,"navigator.tradesettings")),l.Kb(3),l.yc("ngForOf",l.sc(41,26,t.tradeSettings)),l.Kb(3),l.yc("disabled",t.form.pristine||t.form.invalid),l.Kb(1),l.Xc(l.sc(45,28,"navigator.createroom.create")),l.Kb(3),l.Xc(l.sc(48,30,"generic.cancel")))},directives:[h.b,g.m,r.w,r.m,r.g,r.b,r.l,r.f,r.t,g.l,g.o,r.o,r.v],pipes:[m.a,g.h],encapsulation:2}),e})();var I=n("A7kE");const w=["nitro-navigator-room-doorbell-component",""];function C(e,t){1&e&&(l.dc(0,"span"),l.Wc(1),l.rc(2,"translate"),l.cc()),2&e&&(l.Kb(1),l.Xc(l.sc(2,1,"navigator.doorbell.info")))}function R(e,t){1&e&&(l.dc(0,"span"),l.Wc(1),l.rc(2,"translate"),l.cc()),2&e&&(l.Kb(1),l.Xc(l.sc(2,1,"navigator.doorbell.waiting")))}function T(e,t){1&e&&(l.dc(0,"span"),l.Wc(1),l.rc(2,"translate"),l.cc()),2&e&&(l.Kb(1),l.Xc(l.sc(2,1,"navigator.doorbell.no.answer")))}function O(e,t){if(1&e){const e=l.ec();l.dc(0,"button",10),l.nc("click",function(){return l.Lc(e),l.qc().ring()}),l.Wc(1),l.rc(2,"translate"),l.cc()}2&e&&(l.Kb(1),l.Xc(l.sc(2,1,"navigator.doorbell.button.ring")))}let M=(()=>{class e{constructor(e,t){this._navigatorService=e,this._activeModal=t,this.room=null,this.isWaiting=!1,this.noAnswer=!1}ring(){!this.room||this.isWaiting||this.noAnswer||(this._navigatorService.goToRoom(this.room.roomId),this.hide())}close(){this._navigatorService.component.closeRoomDoorbell(),this.isWaiting&&i.a.instance.communication.connection.send(new I.a)}hide(){this._activeModal.close()}}return e.\u0275fac=function(t){return new(t||e)(l.Yb(d.a),l.Yb(u.a))},e.\u0275cmp=l.Sb({type:e,selectors:[["","nitro-navigator-room-doorbell-component",""]],inputs:{room:"room",isWaiting:"isWaiting",noAnswer:"noAnswer"},attrs:w,decls:18,vars:10,consts:[[1,"modal-header"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"row"],[1,"col-12"],[4,"ngIf"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(l.dc(0,"div",0),l.Wc(1),l.rc(2,"translate"),l.dc(3,"button",1),l.nc("click",function(){return t.close()}),l.Zb(4,"i",2),l.cc(),l.cc(),l.dc(5,"div",3),l.dc(6,"div",4),l.dc(7,"div",5),l.Uc(8,C,3,3,"span",6),l.Uc(9,R,3,3,"span",6),l.Uc(10,T,3,3,"span",6),l.cc(),l.cc(),l.dc(11,"div",4),l.dc(12,"div",5),l.dc(13,"div",7),l.dc(14,"button",8),l.nc("click",function(){return t.close()}),l.Wc(15),l.rc(16,"translate"),l.cc(),l.Uc(17,O,3,3,"button",9),l.cc(),l.cc(),l.cc(),l.cc()),2&e&&(l.Kb(1),l.Yc(" ",l.sc(2,6,"navigator.doorbell.title")," "),l.Kb(7),l.yc("ngIf",!t.isWaiting&&!t.noAnswer),l.Kb(1),l.yc("ngIf",t.isWaiting&&!t.noAnswer),l.Kb(1),l.yc("ngIf",t.noAnswer),l.Kb(5),l.Xc(l.sc(16,8,"generic.cancel")),l.Kb(2),l.yc("ngIf",!t.isWaiting&&!t.noAnswer))},directives:[g.n],pipes:[m.a],encapsulation:2}),e})();const U=["nitro-navigator-room-password-component",""];function x(e,t){if(1&e&&(l.dc(0,"div",12),l.Wc(1),l.cc()),2&e){const e=l.qc();l.Kb(1),l.Xc(e.room.roomName)}}function A(e,t){1&e&&(l.dc(0,"div"),l.Wc(1),l.rc(2,"translate"),l.cc()),2&e&&(l.Kb(1),l.Xc(l.sc(2,1,"navigator.password.info")))}function D(e,t){1&e&&(l.dc(0,"div"),l.Wc(1),l.rc(2,"translate"),l.cc()),2&e&&(l.Kb(1),l.Xc(l.sc(2,1,"navigator.password.retryinfo")))}let L=(()=>{class e{constructor(e,t){this._navigatorService=e,this._activeModal=t,this.room=null,this.isWrongPassword=!1,this.password=""}tryPassword(){this.room&&this.password&&(this._navigatorService.goToRoom(this.room.roomId,this.password),this.hide())}close(){this._navigatorService.component.closeRoomPassword()}hide(){this._activeModal.close()}}return e.\u0275fac=function(t){return new(t||e)(l.Yb(d.a),l.Yb(u.a))},e.\u0275cmp=l.Sb({type:e,selectors:[["","nitro-navigator-room-password-component",""]],inputs:{room:"room",isWrongPassword:"isWrongPassword"},attrs:U,decls:25,vars:16,consts:[[1,"modal-header"],["type","button",1,"close",3,"click"],[1,"modal-body"],[1,"row"],[1,"col-12"],["class","font-weight-bold",4,"ngIf"],[4,"ngIf"],[1,"form-group"],["autocomplete","new-password","type","password","placeholder","*****",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"font-weight-bold"]],template:function(e,t){1&e&&(l.dc(0,"div",0),l.Wc(1),l.rc(2,"translate"),l.dc(3,"button",1),l.nc("click",function(){return t.close()}),l.cc(),l.cc(),l.dc(4,"div",2),l.dc(5,"div",3),l.dc(6,"div",4),l.Uc(7,x,2,1,"div",5),l.Uc(8,A,3,3,"div",6),l.Uc(9,D,3,3,"div",6),l.Zb(10,"br"),l.dc(11,"div",7),l.dc(12,"label"),l.Wc(13),l.rc(14,"translate"),l.cc(),l.dc(15,"input",8),l.nc("ngModelChange",function(e){return t.password=e}),l.cc(),l.cc(),l.cc(),l.cc(),l.dc(16,"div",3),l.dc(17,"div",4),l.dc(18,"div",9),l.dc(19,"button",10),l.nc("click",function(){return t.close()}),l.Wc(20),l.rc(21,"translate"),l.cc(),l.dc(22,"button",11),l.nc("click",function(){return t.tryPassword()}),l.Wc(23),l.rc(24,"translate"),l.cc(),l.cc(),l.cc(),l.cc(),l.cc()),2&e&&(l.Kb(1),l.Yc(" ",l.sc(2,8,"navigator.password.title")," "),l.Kb(6),l.yc("ngIf",t.room),l.Kb(1),l.yc("ngIf",!t.isWrongPassword),l.Kb(1),l.yc("ngIf",t.isWrongPassword),l.Kb(4),l.Xc(l.sc(14,10,"navigator.password.enter")),l.Kb(2),l.yc("ngModel",t.password),l.Kb(5),l.Xc(l.sc(21,12,"generic.cancel")),l.Kb(3),l.Xc(l.sc(24,14,"navigator.password.button.try")))},directives:[g.n,r.b,r.l,r.n],pipes:[m.a],encapsulation:2}),e})();var k=n("WnqX");const P=function(e){return{active:e}};function N(e,t){if(1&e){const e=l.ec();l.dc(0,"button",16),l.nc("click",function(){l.Lc(e);const n=t.$implicit;return l.qc(2).setCurrentContext(n)}),l.Wc(1),l.rc(2,"translate"),l.cc()}if(2&e){const e=t.$implicit,n=l.qc(2);l.yc("ngClass",l.Cc(4,P,n.topLevelContext===e)),l.Kb(1),l.Xc(l.sc(2,2,"navigator.toplevelview."+e.code))}}function W(e,t){1&e&&l.Zb(0,"div",17),2&e&&l.yc("result",t.$implicit)}function K(e,t){1&e&&l.Zb(0,"div",18)}function F(e,t){if(1&e){const e=l.ec();l.dc(0,"div",2),l.dc(1,"div",3),l.dc(2,"h6",4),l.Wc(3),l.rc(4,"translate"),l.cc(),l.dc(5,"button",5),l.nc("click",function(){return l.Lc(e),l.qc().hide()}),l.Zb(6,"i",6),l.cc(),l.cc(),l.dc(7,"div",7),l.dc(8,"div",8),l.Uc(9,N,3,6,"button",9),l.dc(10,"button",10),l.nc("click",function(){return l.Lc(e),l.qc().openRoomCreator()}),l.Zb(11,"i",11),l.cc(),l.cc(),l.Zb(12,"div",12),l.dc(13,"perfect-scrollbar",13),l.Uc(14,W,1,1,"div",14),l.cc(),l.Uc(15,K,1,0,"div",15),l.cc(),l.cc()}if(2&e){const e=l.qc();l.Kb(3),l.Xc(l.sc(4,4,e.isLoading?"navigator.title.is.busy":"navigator.title")),l.Kb(6),l.yc("ngForOf",e.topLevelContexts),l.Kb(5),l.yc("ngForOf",e.lastSearchResults),l.Kb(1),l.yc("ngIf",e.sliderVisible)}}function V(e,t){1&e&&l.Zb(0,"nitro-navigator-room-info-component")}let q=(()=>{class e{constructor(e,t,n){this._settingsService=e,this._navigatorService=t,this._modalService=n,this.visible=!1}ngOnInit(){this._navigatorService.component=this}ngOnChanges(e){const t=e.visible.currentValue;t&&t!==e.visible.previousValue&&this.prepareNavigator()}ngOnDestroy(){this._roomCreatorModal&&this._roomCreatorModal.close(),this._navigatorService.component=null}prepareNavigator(){this._navigatorService.isLoaded?this._navigatorService.search():this._navigatorService.loadNavigator()}setCurrentContext(e){this._navigatorService.setCurrentContext(e),this._navigatorService.clearSearch()}hide(){this._settingsService.hideNavigator()}openRoomCreator(){this._roomCreatorModal||(this._roomCreatorModal=this._modalService.open(y,{backdrop:"static",size:"lg",centered:!0,keyboard:!1}),this._roomCreatorModal&&this._roomCreatorModal.result.then(()=>this._roomCreatorModal=null))}openRoomDoorbell(e,t=!1,n=!1){this._roomPasswordModal&&this._roomPasswordModal.close(),e||(e=this._lastRoom),this._lastRoom=e;let i=this._roomDoorbellModal;if(i||(i=this._roomDoorbellModal=this._modalService.open(M,{backdrop:"static",size:"sm",centered:!0,keyboard:!1}),i.result.then(()=>this._roomDoorbellModal=null)),this._roomDoorbellModal=i,this._roomDoorbellModal){const r=i.componentInstance;r&&(r.room=e,r.isWaiting=t,r.noAnswer=n)}}closeRoomDoorbell(){this._roomDoorbellModal&&(this._roomDoorbellModal.close(),this._lastRoom=null)}openRoomPassword(e,t=!1){this._roomDoorbellModal&&this._roomDoorbellModal.close(),e||(e=this._lastRoom),this._lastRoom=e;let n=this._roomPasswordModal;if(n||(n=this._roomPasswordModal=this._modalService.open(L,{backdrop:"static",size:"sm",centered:!0,keyboard:!1}),n.result.then(()=>this._roomPasswordModal=null)),this._roomPasswordModal=n,this._roomPasswordModal){const i=n.componentInstance;if(!i)return;i.room=e,i.isWrongPassword=t}}closeRoomPassword(){this._roomPasswordModal&&(this._roomPasswordModal.close(),this._lastRoom=null)}get topLevelContext(){return this._navigatorService&&this._navigatorService.topLevelContext||null}get topLevelContexts(){return this._navigatorService&&this._navigatorService.topLevelContexts||null}get lastSearchResults(){return this._navigatorService.lastSearchResults}get isLoading(){return this._navigatorService&&(this._navigatorService.isLoading||this._navigatorService.isSearching)}get sliderVisible(){return i.a.instance.core.configuration.getValue("navigator.slider.enabled")}get roomInfoShowing(){return this._navigatorService.roomInfoShowing}}return e.\u0275fac=function(t){return new(t||e)(l.Yb(k.a),l.Yb(d.a),l.Yb(u.h))},e.\u0275cmp=l.Sb({type:e,selectors:[["nitro-navigator-main-component"]],inputs:{visible:"visible"},features:[l.Ib],decls:3,vars:2,consts:[["class","nitro-navigator card",3,"bringToTop","draggable",4,"ngIf"],[4,"ngIf"],[1,"nitro-navigator","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"btn-group","w-100","mb-2"],["type","button","class","btn btn-secondary",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-plus"],["nitro-navigator-search-component",""],[1,"results-container","position-relative","w-100","pr-1",2,"min-height","350px","max-height","350px","height","350px"],["class","mb-1","nitro-navigator-search-result-component","","style","    width: 100%;\n            float: left;",3,"result",4,"ngFor","ngForOf"],["nitro-navigator-slider-component","",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"ngClass","click"],["nitro-navigator-search-result-component","",1,"mb-1",2,"width","100%","float","left",3,"result"],["nitro-navigator-slider-component",""]],template:function(e,t){1&e&&(l.Uc(0,F,16,6,"div",0),l.Uc(1,V,1,0,"nitro-navigator-room-info-component",1),l.Zb(2,"nitro-navigator-roomsettings-component")),2&e&&(l.yc("ngIf",t.visible),l.Kb(1),l.yc("ngIf",t.roomInfoShowing))},encapsulation:2}),e})()},u0Tz:function(e,t,n){"use strict";n.d(t,"a",function(){return i});let i=(()=>{class e{}return e.WALL="i",e.FLOOR="s",e.EFFECT="e",e.HABBO_CLUB="h",e.BADGE="b",e.GAME_TOKEN="GAME_TOKEN",e.PET="p",e.ROBOT="r",e})()},uL4p:function(e,t,n){"use strict";n.d(t,"a",function(){return it});var i=n("fXoL"),r=n("bwAN"),s=n("pE/2"),c=n("6QLa"),o=n("djwq"),a=n("fWLT");let l=(()=>{class e extends a.a{}return e.CODE="frontpage_featured",e.\u0275fac=function(t){return d(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["ng-component"]],features:[i.Hb],decls:2,vars:0,consts:[[1,"nitro-catalog-layout-frontpagefeatured-component"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.Wc(1," frontpage\n"),i.cc())},encapsulation:2}),e})();const d=i.fc(l);var u=n("CU8w"),h=n("fzgV"),g=n("YPdD"),m=n("0DQ5");let f=(()=>{class e extends a.a{openGroupCreator(){r.a.instance.createLinkEvent("groups/create")}}return e.CODE="guild_frontpage",e.\u0275fac=function(t){return p(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["ng-component"]],features:[i.Hb],decls:9,vars:7,consts:[[1,"nitro-catalog-layout-guildfrontpage-component"],[1,"mb-2",3,"innerHtml"],[1,"small","mb-2",3,"innerHtml"],[1,"small","mb-3",3,"innerHtml"],[1,"text-center"],[1,"btn","btn-primary","mb-3",3,"click"],["image-placeholder","",3,"src"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.Zb(1,"div",1),i.Zb(2,"div",2),i.Zb(3,"div",3),i.dc(4,"div",4),i.dc(5,"button",5),i.nc("click",function(){return t.openGroupCreator()}),i.Wc(6),i.rc(7,"translate"),i.cc(),i.Zb(8,"img",6),i.cc(),i.cc()),2&e&&(i.Kb(1),i.yc("innerHtml",t.getText(2),i.Mc),i.Kb(1),i.yc("innerHtml",t.getText(0),i.Mc),i.Kb(1),i.yc("innerHtml",t.getText(1),i.Mc),i.Kb(3),i.Xc(i.sc(7,5,"catalog.start.guild.purchase.button")),i.Kb(2),i.yc("src",t.getImage(1),i.Nc))},directives:[g.a],pipes:[m.a],encapsulation:2}),e})();const p=i.fc(f);let _=(()=>{class e extends a.a{}return e.CODE="pets",e.\u0275fac=function(t){return b(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["ng-component"]],features:[i.Hb],decls:1,vars:0,consts:[[1,"d-flex","flex-column","w-100","h-100","card","nitro-catalog-layout-pets2-component"]],template:function(e,t){1&e&&i.Zb(0,"div",0)},encapsulation:2}),e})();const b=i.fc(_);var v=n("Kdsb");let E=(()=>{class e extends a.a{}return e.CODE="pets2",e.\u0275fac=function(t){return S(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["ng-component"]],features:[i.Hb],decls:10,vars:4,consts:[[1,"d-flex","flex-column","w-100","h-100","card","nitro-catalog-layout-pets3-component","small","p-1"],[1,"position-relative","w-100",2,"min-height","422px","max-height","422px","height","422px"],[1,"overflow-hidden","d-flex","flex-column",2,"min-height","422px"],[1,"row","m-3"],[1,"col-sm-3","overflow-hidden","d-flex","justify-content-center","px-1"],["image-placeholder","",1,"align-self-center",3,"src"],[1,"col-sm","d-flex","justify-content-center","px-2"],[1,"align-self-center",3,"innerHtml"],[1,"mx-3",3,"innerHtml"],[1,"mx-3","mt-auto","mb-3",3,"innerHtml"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"perfect-scrollbar",1),i.dc(2,"div",2),i.dc(3,"div",3),i.dc(4,"div",4),i.Zb(5,"img",5),i.cc(),i.dc(6,"div",6),i.Zb(7,"h6",7),i.cc(),i.cc(),i.Zb(8,"div",8),i.Zb(9,"span",9),i.cc(),i.cc(),i.cc()),2&e&&(i.Kb(5),i.yc("src",t.getImage(1),i.Nc),i.Kb(2),i.yc("innerHtml",t.getText(1),i.Mc),i.Kb(1),i.yc("innerHtml",t.getText(2),i.Mc),i.Kb(1),i.yc("innerHtml",t.getText(3),i.Mc))},directives:[v.b,g.a],encapsulation:2}),e})();const S=i.fc(E);let y=(()=>{class e extends a.a{}return e.CODE="pets3",e.\u0275fac=function(t){return I(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["ng-component"]],features:[i.Hb],decls:11,vars:4,consts:[[1,"nitro-catalog-layout-pets3-component","d-flex","flex-column","w-100","h-100"],[1,"position-relative","w-100",2,"min-height","422px","max-height","422px","height","422px"],[1,"d-flex","flex-column"],[1,"d-flex","mb-2"],[1,"d-flex","justify-content-center","align-items-center"],["image-placeholder","",3,"src"],[1,"d-flex","justify-content-center","align-items-center","flex-grow-1"],[1,"h5","m-0",3,"innerHtml"],[1,"h6","m-0","mb-2",3,"innerHtml"],[1,"h6","m-0",3,"innerHtml"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"perfect-scrollbar",1),i.dc(2,"div",2),i.dc(3,"div",3),i.dc(4,"div",4),i.Zb(5,"img",5),i.cc(),i.dc(6,"div",6),i.Zb(7,"p",7),i.cc(),i.cc(),i.Zb(8,"p",8),i.dc(9,"p",9),i.Wc(10,"sdfgsdfgsdfg"),i.cc(),i.cc(),i.cc(),i.cc()),2&e&&(i.Kb(5),i.yc("src",t.getImage(1),i.Nc),i.Kb(2),i.yc("innerHtml",t.getText(1),i.Mc),i.Kb(1),i.yc("innerHtml",t.getText(2),i.Mc),i.Kb(1),i.yc("innerHtml",t.getText(3),i.Mc))},directives:[v.b,g.a],encapsulation:2}),e})();const I=i.fc(y);var w=n("gxVE"),C=n("wYOr"),R=n("vmGm"),T=n("ofXK"),O=n("3Pt+");function M(e,t){1&e&&i.Zb(0,"p",17),2&e&&i.yc("innerHtml",t.$implicit,i.Mc)}function U(e,t){if(1&e&&(i.dc(0,"b"),i.Wc(1),i.Zb(2,"img",18),i.cc()),2&e){const e=i.qc();i.Kb(1),i.Yc("",e.currentTrophyOffer.priceCredits," "),i.Kb(1),i.yc("src",e.getCurrencyUrl(-1),i.Nc)}}function x(e,t){if(1&e&&(i.dc(0,"b"),i.Wc(1),i.Zb(2,"img",18),i.cc()),2&e){const e=i.qc();i.Kb(1),i.Yc(" + ",e.currentTrophyOffer.priceActivityPoints," "),i.Kb(1),i.yc("src",e.getCurrencyUrl(e.currentTrophyOffer.priceActivityPointsType),i.Nc)}}let A=(()=>{class e extends a.a{constructor(){super(...arguments),this.textPages=[],this._allTrophyOffers=new C.a,this.currentTrophyOffer=null,this._imageUrl=null,this._currentTrophy=null,this._availableColorsForCurrentTrophy=null,this._currentTrophyIndex=0,this._orderOfColors=["g","s","b"],this.enteredText=""}ngOnInit(){const e=this.activePage.offers;if(this.textPages=this.activePage.localization.texts.filter(e=>e&&e.length>0),e&&e.length)for(const t of e){if(!t)continue;const e=this.getTrophyNameWithoutColors(t.localizationId),n=this.getTrophyColorCharacter(t.localizationId);let i=this._allTrophyOffers.getValue(e);i||(i=new C.a,this._allTrophyOffers.add(e,i)),i.add(n,t)}this.selectOfferByIndex(this._currentTrophyIndex)}selectOfferByIndex(e){const t=this._allTrophyOffers.getWithIndex(this._currentTrophyIndex);t&&this.selectOffer(t)}selectOffer(e){if(!e)return;let t=null;const n=[];this._orderOfColors.map(i=>{const r=e.getValue(i);r&&n.push(i),t||(t=r)}),t||(t=e.getWithIndex(0)),t&&(this._currentTrophyColor=this.getTrophyColorCharacter(t.localizationId)),this._availableColorsForCurrentTrophy=n,this.selectTrophyColor(t)}selectTrophyColor(e){if(!e)return;this.currentTrophyOffer=e;const t=e.products[0];if(!t)return;const n=r.a.instance.roomEngine.getFurnitureFloorImage(t.furniClassId,new c.a(2,0,0),64,this,0,t.extraParam);if(n){const e=n.getImage();e&&(this._imageUrl=e.src)}this._currentTrophy=t}handleTrophyColor(e){if(this._availableColorsForCurrentTrophy.indexOf(e)<0)return;const t=this._allTrophyOffers.getWithIndex(this._currentTrophyIndex).getValue(e);t&&(this._currentTrophyColor=e,this.selectTrophyColor(t))}getActiveClass(e){return this._availableColorsForCurrentTrophy.indexOf(e)>=0&&this._currentTrophyColor==e?"selected":""}imageReady(e,t,n){if(t){const e=R.a.generateImageUrl(t);e&&this._ngZone.run(()=>this._imageUrl=e)}}handleButton(e){switch(e){case"next":this._allTrophyOffers.length-1==this._currentTrophyIndex?this._currentTrophyIndex=0:this._currentTrophyIndex++;break;case"previous":0==this._currentTrophyIndex?this._currentTrophyIndex=this._allTrophyOffers.length-1:this._currentTrophyIndex--}this.selectOfferByIndex(this._currentTrophyIndex)}imageFailed(e){}hasMultipleOffers(){return this._allTrophyOffers&&this._allTrophyOffers.length>0}trophyHasColor(e){return this._availableColorsForCurrentTrophy.indexOf(e)>-1}getTrophyNameWithoutColors(e){const t=this.getTrophyColorCharacter(e);return t.length>0?e.slice(0,e.length-1-t.length):e}getTrophyColorCharacter(e){if(-1!=e.indexOf("prizetrophy_2011_"))return"";const t=e.lastIndexOf("_")+1;if(t<=0)return"";const n=e.substr(t);return n.length>1||"g"!=n&&"s"!=n&&"b"!=n?"":n}buyCurrentItem(){this._catalogService.component&&this._catalogService.component.confirmPurchase(this.activePage,this.currentTrophyOffer,1,this.enteredText)}getText(){return""}get imageUrl(){return this._imageUrl}}return e.CODE="trophies",e.\u0275fac=function(t){return D(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["ng-component"]],features:[i.Hb],decls:26,vars:15,consts:[[1,"w-100","h-100","nitro-catalog-layout-trophies-component"],[1,"d-flex","flex-column"],["class","small",3,"innerHtml",4,"ngFor","ngForOf"],[1,"w-100","bg-secondary","rounded","nitro-catalog-layout-trophies-selector","row","mx-0","py-2","mb-2"],[1,"col-sm","d-flex","flex-row","justify-content-end"],["type","button",1,"btn","btn-sm","btn-secondary","align-self-end",3,"click"],[1,"col-sm","d-flex","flex-row","justify-content-center"],["image-placeholder","",1,"align-self-center",3,"src"],[1,"col-sm","d-flex","flex-row"],[1,"d-flex","flex-row","nitro-catalog-layout-trophies-types","mb-2"],["type","button",3,"ngClass","disabled","click"],["autofocus","","name","trophie","maxlength","300",1,"w-100","bg-secondary","rounded","mb-2",3,"ngModel","ngModelChange"],[1,"d-flex","flex-row","justify-content-between","px-2","py-1","bg-emperor","rounded","mt-auto"],[1,"align-self-center"],[4,"ngIf"],[1,"d-flex","flex-row"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"small",3,"innerHtml"],["image-placeholder","",1,"pl-1",3,"src"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Uc(2,M,1,1,"p",2),i.dc(3,"div",3),i.dc(4,"div",4),i.dc(5,"button",5),i.nc("click",function(){return t.handleButton("previous")}),i.Wc(6,"Previous"),i.cc(),i.cc(),i.dc(7,"div",6),i.Zb(8,"img",7),i.cc(),i.dc(9,"div",8),i.dc(10,"button",5),i.nc("click",function(){return t.handleButton("next")}),i.Wc(11,"Next"),i.cc(),i.cc(),i.cc(),i.dc(12,"div",9),i.dc(13,"button",10),i.nc("click",function(){return t.handleTrophyColor("g")}),i.cc(),i.dc(14,"button",10),i.nc("click",function(){return t.handleTrophyColor("s")}),i.cc(),i.dc(15,"button",10),i.nc("click",function(){return t.handleTrophyColor("b")}),i.cc(),i.cc(),i.dc(16,"textarea",11),i.nc("ngModelChange",function(e){return t.enteredText=e}),i.Wc(17),i.cc(),i.dc(18,"div",12),i.dc(19,"div",13),i.Uc(20,U,3,2,"b",14),i.Uc(21,x,3,2,"b",14),i.cc(),i.dc(22,"div",15),i.dc(23,"button",16),i.nc("click",function(){return t.buyCurrentItem()}),i.Wc(24),i.rc(25,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc()),2&e&&(i.Kb(2),i.yc("ngForOf",t.textPages),i.Kb(6),i.yc("src",t.imageUrl,i.Nc),i.Kb(5),i.yc("ngClass","btn btn-sm color-gold p-0 w-100 rounded mr-2 "+t.getActiveClass("g"))("disabled",!t.trophyHasColor("g")),i.Kb(1),i.yc("ngClass","btn btn-sm color-silver p-0 w-100 rounded mr-2 "+t.getActiveClass("s"))("disabled",!t.trophyHasColor("s")),i.Kb(1),i.yc("ngClass","btn btn-sm color-bronze p-0 w-100 rounded mr-2 "+t.getActiveClass("b"))("disabled",!t.trophyHasColor("b")),i.Kb(1),i.yc("ngModel",t.enteredText),i.Kb(1),i.Xc(t.enteredText),i.Kb(3),i.yc("ngIf",t.currentTrophyOffer.priceCredits),i.Kb(1),i.yc("ngIf",t.currentTrophyOffer.priceActivityPoints),i.Kb(3),i.Xc(i.sc(25,13,"buy")))},directives:[T.m,g.a,T.l,O.b,O.i,O.l,O.n,T.n],pipes:[m.a],encapsulation:2}),e})();const D=i.fc(A);let L=(()=>{class e extends a.a{}return e.CODE="UNSUPPORTED",e.\u0275fac=function(t){return k(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["ng-component"]],features:[i.Hb],decls:2,vars:0,consts:[[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","nitro-catalog-layout-unsupported-component"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.Wc(1," This layout is not yet implemented\n"),i.cc())},encapsulation:2}),e})();const k=i.fc(L);var P=n("ywHV"),N=n("afcZ");function W(e,t){if(1&e&&i.Zb(0,"img",8),2&e){const e=i.qc();i.yc("src",e.getImage(1),i.Nc)}}function K(e,t){if(1&e&&(i.dc(0,"div",17),i.Zb(1,"i",18),i.dc(2,"span"),i.Wc(3),i.cc(),i.cc()),2&e){const e=i.qc().$implicit,t=i.qc();i.Kb(3),i.Xc(t.getOfferText(e))}}function F(e,t){if(1&e&&(i.dc(0,"b"),i.Wc(1),i.Zb(2,"img",19),i.cc()),2&e){const e=i.qc().$implicit,t=i.qc();i.Kb(1),i.Yc("",e.priceCredits," "),i.Kb(1),i.yc("src",t.getCurrencyUrl(-1),i.Nc)}}function V(e,t){if(1&e&&(i.dc(0,"b"),i.Wc(1),i.Zb(2,"img",19),i.cc()),2&e){const e=i.qc().$implicit,t=i.qc();i.Kb(1),i.Yc(" + ",e.priceActivityPoints," "),i.Kb(1),i.yc("src",t.getCurrencyUrl(e.priceActivityPointsType),i.Nc)}}function q(e,t){if(1&e&&(i.dc(0,"b"),i.Wc(1),i.Zb(2,"img",19),i.cc()),2&e){const e=i.qc().$implicit,t=i.qc();i.Kb(1),i.Yc("",e.priceActivityPoints," "),i.Kb(1),i.yc("src",t.getCurrencyUrl(e.priceActivityPointsType),i.Nc)}}function H(e,t){if(1&e){const e=i.ec();i.dc(0,"button",20),i.nc("click",function(){i.Lc(e);const t=i.qc().$implicit;return i.qc().buyVip(t)}),i.Wc(1),i.rc(2,"translate"),i.cc()}2&e&&(i.Kb(1),i.Xc(i.sc(2,1,"catalog.purchase_confirmation.gift")))}function B(e,t){if(1&e){const e=i.ec();i.bc(0),i.dc(1,"div",9),i.Uc(2,K,4,1,"div",10),i.dc(3,"div",11),i.dc(4,"div",12),i.Uc(5,F,3,2,"b",13),i.Uc(6,V,3,2,"b",13),i.Uc(7,q,3,2,"b",13),i.cc(),i.dc(8,"div",14),i.Uc(9,H,3,3,"button",15),i.dc(10,"button",16),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().buyVip(n)}),i.Wc(11),i.rc(12,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.ac()}if(2&e){const e=t.$implicit;i.Kb(2),i.yc("ngIf",e.productCode),i.Kb(3),i.yc("ngIf",e.priceCredits),i.Kb(1),i.yc("ngIf",e.priceActivityPoints&&e.priceCredits),i.Kb(1),i.yc("ngIf",e.priceActivityPoints&&!e.priceCredits),i.Kb(2),i.yc("ngIf",e.giftable),i.Kb(2),i.Xc(i.sc(12,6,"buy"))}}let G=(()=>{class e extends a.a{constructor(e,t,n){super(e,t,n),this._catalogService=e,this._marketService=t,this._ngZone=n,this.vipOffers=[],e.registerVipBuyTemplate(this),e.requestOffers(6)}setOffers(e){this._ngZone.run(()=>{this.vipOffers=e.reverse()})}getPurseContent(){const e=this._catalogService.purse;return r.a.instance.localization.getValueWithParameter("catalog.vip.extend.info","days",(31*e.clubPeriods+e.clubDays).toString())}buyVip(e){this._catalogService.component&&this._catalogService.component.confirmVipSubscription(e)}getOfferText(e){return e.months>0?r.a.instance.getLocalizationWithParameter("catalog.vip.item.header.months","num_months",e.months.toString()):r.a.instance.getLocalizationWithParameter("catalog.vip.item.header.days","num_days",e.extraDays.toString())}}return e.CODE="vip_buy",e.\u0275fac=function(t){return new(t||e)(i.Yb(P.a),i.Yb(N.a),i.Yb(i.H))},e.\u0275cmp=i.Sb({type:e,selectors:[["ng-component"]],features:[i.Hb],decls:11,vars:6,consts:[[1,"w-100","h-100","nitro-catalog-layout-default-component"],[1,"row"],[1,"col-5"],["image-placeholder","",3,"src",4,"ngIf"],[1,"col-7"],[1,"small",3,"innerHtml"],[1,"col-12","mt-1"],[4,"ngFor","ngForOf"],["image-placeholder","",3,"src"],[1,"bg-secondary","rounded","mb-2","p-1"],["class","bg-primary rounded p-1 w-100 mb-1 d-flex flex-row",4,"ngIf"],[1,"d-flex","flex-row","justify-content-between","px-2","py-1"],[1,"align-self-center"],[4,"ngIf"],[1,"d-flex","flex-row"],["type","button","class","btn btn-success btn-sm mr-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"bg-primary","rounded","p-1","w-100","mb-1","d-flex","flex-row"],[1,"icon","icon-catalogue-hc_small","mr-2","d-block","align-self-center"],["image-placeholder","",1,"pl-1",3,"src"],["type","button",1,"btn","btn-success","btn-sm","mr-1",3,"click"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"div",2),i.Uc(3,W,1,1,"img",3),i.cc(),i.dc(4,"div",4),i.dc(5,"h6"),i.Wc(6),i.rc(7,"translate"),i.cc(),i.Zb(8,"p",5),i.cc(),i.dc(9,"div",6),i.Uc(10,B,13,8,"ng-container",7),i.cc(),i.cc(),i.cc()),2&e&&(i.Kb(3),i.yc("ngIf",!t.activeOffer&&t.getImage(1)),i.Kb(3),i.Xc(i.sc(7,4,"catalog.vip.extend.title")),i.Kb(2),i.yc("innerHtml",t.getPurseContent(),i.Mc),i.Kb(2),i.yc("ngForOf",t.vipOffers))},directives:[T.n,T.m,g.a],pipes:[m.a],encapsulation:2}),e})();var Z=n("dUWl"),X=n("cEnG"),j=n("lZXN"),Y=n("Ci1R"),z=n("sXB4");function $(e,t){if(1&e){const e=i.ec();i.dc(0,"div",13),i.dc(1,"span",9),i.Wc(2),i.rc(3,"translate"),i.cc(),i.dc(4,"button",14),i.nc("click",function(){i.Lc(e);const t=i.qc().$implicit;return i.qc(2).selectOffer(t)}),i.Wc(5),i.rc(6,"translate"),i.cc(),i.cc()}2&e&&(i.Kb(2),i.Xc(i.sc(3,2,"catalog.club_gift.selectable")),i.Kb(3),i.Xc(i.sc(6,4,"catalog.club_gift.select")))}function Q(e,t){if(1&e&&(i.dc(0,"div",9),i.Wc(1),i.cc()),2&e){const e=i.qc().$implicit,t=i.qc(2);i.Kb(1),i.Yc(" ",t.nonAvailableText(e.offerId)," ")}}const J=function(e){return{"background-image":e}};function ee(e,t){if(1&e&&(i.dc(0,"div",7),i.Zb(1,"div",8),i.dc(2,"div",9),i.dc(3,"p",10),i.Wc(4),i.cc(),i.Uc(5,$,7,6,"div",11),i.Uc(6,Q,2,1,"div",12),i.cc(),i.cc()),2&e){const e=t.$implicit,n=i.qc(2);i.Kb(1),i.yc("ngStyle",i.Cc(4,J,"url("+n.offerImage(e)+")")),i.Kb(3),i.Xc(n.getProductFurniData(e.products[0]).name),i.Kb(1),i.yc("ngIf",n.getAvailability(e.offerId)),i.Kb(1),i.yc("ngIf",!n.getAvailability(e.offerId))}}function te(e,t){if(1&e&&(i.dc(0,"div",2),i.dc(1,"p",3),i.Wc(2),i.cc(),i.dc(3,"perfect-scrollbar",4),i.Uc(4,ee,7,6,"div",5),i.cc(),i.dc(5,"p",6),i.Wc(6),i.cc(),i.cc()),2&e){const e=i.qc();i.Kb(2),i.Xc(e.giftsAvailable),i.Kb(2),i.yc("ngForOf",e.gifts),i.Kb(2),i.Xc(e.pastClubDays)}}function ne(e,t){if(1&e){const e=i.ec();i.dc(0,"div",15),i.dc(1,"div",16),i.dc(2,"h6",17),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",18),i.nc("click",function(){return i.Lc(e),i.qc().hidePopup()}),i.Zb(6,"i",19),i.cc(),i.cc(),i.dc(7,"div",20),i.dc(8,"div",21),i.Zb(9,"div",22),i.cc(),i.dc(10,"div",23),i.dc(11,"div",24),i.Wc(12),i.cc(),i.cc(),i.cc(),i.dc(13,"div",25),i.dc(14,"div",26),i.dc(15,"button",27),i.nc("click",function(){return i.Lc(e),i.qc().confirmGift()}),i.Wc(16),i.rc(17,"translate"),i.cc(),i.dc(18,"button",28),i.nc("click",function(){return i.Lc(e),i.qc().hidePopup()}),i.Wc(19),i.rc(20,"translate"),i.cc(),i.cc(),i.cc(),i.cc()}if(2&e){const e=i.qc();i.Kb(3),i.Xc(i.sc(4,5,"catalog.club_gift.confirm")),i.Kb(6),i.yc("ngStyle",i.Cc(11,J,"url("+e.getGiftImage()+")")),i.Kb(3),i.Xc(e.giftName()),i.Kb(4),i.Xc(i.sc(17,7,"catalog.club_gift.select")),i.Kb(3),i.Xc(i.sc(20,9,"cancel"))}}let ie=(()=>{class e extends a.a{constructor(){super(...arguments),this.showPopup=!1,this.vipOffers=[],this._currentSelectedVipOffer=null}get visible(){return null!==this._catalogService.clubGiftsParser}hidePopup(){this.showPopup=!1}getAvailability(e){return this._catalogService.clubGiftsParser.getOfferExtraData(e).isSelectable&&this._catalogService.clubGiftsParser.giftsAvailable>0}get gifts(){return this.visible?this._catalogService.clubGiftsParser.offers:[]}get direction(){return new c.a(90)}selectOffer(e){this._currentSelectedVipOffer=e,this.showPopup=!0}getGiftImage(){return this.offerImage(this._currentSelectedVipOffer)}giftName(){return this.getProductFurniData(this._currentSelectedVipOffer.products[0]).name}confirmGift(){r.a.instance.communication.connection.send(new j.a(this._currentSelectedVipOffer.localizationId)),this._catalogService.clubGiftsParser.giftsAvailable--,this.showPopup=!1}get pastClubDays(){const e=this._catalogService.purse.pastClubDays,t=e>31?"catalog.club_gift.past_club.long":"catalog.club_gift.past_club",n=Math.floor(e%31),i=Math.floor(e/31);let s=r.a.instance.localization.getValue(t);return s=s.replace("%days%",n.toString()),s=s.replace("%months%",i.toString()),s}nonAvailableText(e){const t=this._catalogService.clubGiftsParser.getOfferExtraData(e),n=t.availableInDays-this._catalogService.purse.pastClubDays;if(n<=0)return"";let i="";i=t._Str_12313?"catalog.club_gift.vip_missing":"catalog.club_gift.club_missing",n>31&&(i+=".long");const s=n%31,c=n/31;let o=r.a.instance.localization.getValue(i);return o=o.replace("%days%",s.toString()),o=o.replace("%months%",c.toString()),o}get giftsAvailable(){if(!this.visible)return"";const e=this._catalogService.clubGiftsParser;return e.giftsAvailable>0?r.a.instance.localization.getValueWithParameter("catalog.club_gift.available","amount",e.giftsAvailable.toString()):e.daysUntilNextGift>0?r.a.instance.localization.getValueWithParameter("catalog.club_gift.days_until_next","days",e.daysUntilNextGift.toString()):this._catalogService.hasClubDays()?r.a.instance.localization.getValue("catalog.club_gift.not_available"):r.a.instance.localization.getValue("catalog.club_gift.no_club")}}return e.CODE="club_gifts",e.\u0275fac=function(t){return re(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["ng-component"]],features:[i.Hb],decls:2,vars:2,consts:[["class","w-100 h-100 nitro-catalog-layout-vip-gifts-component px-1",4,"ngIf"],["class","nitro-catalog-confirm-purchase-component card",3,"bringToTop","draggable",4,"ngIf"],[1,"w-100","h-100","nitro-catalog-layout-vip-gifts-component","px-1"],[1,"text-center","w-100"],[2,"min-height","450px","max-height","450px","height","450px"],["class","gift-item rounded bg-secondary mb-2 d-flex flex-row p-1",4,"ngFor","ngForOf"],[1,"w-100","text-center","p-0","m-0"],[1,"gift-item","rounded","bg-secondary","mb-2","d-flex","flex-row","p-1"],[1,"gift-image","align-self-center","mr-2","flex-shrink-0",3,"ngStyle"],[1,"w-100"],[1,"mb-0","pb-0","d-block"],["class","w-100 d-flex flex-row justify-content-between",4,"ngIf"],["class","w-100",4,"ngIf"],[1,"w-100","d-flex","flex-row","justify-content-between"],["type","button",1,"btn","btn-sm","btn-primary","align-self-center",3,"click"],[1,"nitro-catalog-confirm-purchase-component","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-3"],[1,"col-6","d-flex","flex-column"],[1,"product-preview","bg-secondary","rounded",3,"ngStyle"],[1,"col-6","d-flex","flex-column","align-items-center","justify-content-center"],[1,"offer-name"],[1,"row","align-items-end","pt-0","px-3","pb-3"],[1,"col","btn-group"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(i.Uc(0,te,7,3,"div",0),i.Uc(1,ne,21,13,"div",1)),2&e&&(i.yc("ngIf",t.visible),i.Kb(1),i.yc("ngIf",t.showPopup))},directives:[T.n,v.b,T.m,T.o,Y.a,z.a],pipes:[m.a],encapsulation:2}),e})();const re=i.fc(ie);var se=n("fDNK"),ce=n("L0LC");function oe(e,t){if(1&e){const e=i.ec();i.dc(0,"button",4),i.nc("click",function(){return i.Lc(e),i.qc().redeemCredits()}),i.Wc(1),i.rc(2,"translate"),i.cc()}2&e&&(i.Kb(1),i.Xc(i.sc(2,1,"catalog.marketplace.offer.redeem")))}function ae(e,t){if(1&e&&(i.Zb(0,"div",20),i.rc(1,"uniqueNumber")),2&e){const e=i.qc().$implicit;i.yc("innerHtml",i.sc(1,1,e.stuffData.uniqueSeries),i.Mc)}}function le(e,t){if(1&e&&(i.dc(0,"div",21),i.dc(1,"div",22),i.Wc(2),i.cc(),i.cc()),2&e){const e=i.qc().$implicit,t=i.qc(2);i.Kb(2),i.Xc(t.offerTime(e))}}function de(e,t){if(1&e&&(i.dc(0,"div",23),i.dc(1,"div",22),i.Wc(2),i.cc(),i.cc()),2&e){const e=i.qc().$implicit,t=i.qc(2);i.Kb(2),i.Xc(t.offerExpiredText(e))}}function ue(e,t){if(1&e){const e=i.ec();i.dc(0,"button",24),i.nc("click",function(){i.Lc(e);const t=i.qc().$implicit;return i.qc(2).takeBack(t)}),i.Wc(1),i.rc(2,"translate"),i.cc()}2&e&&(i.Kb(1),i.Xc(i.sc(2,1,"catalog.marketplace.offer.pick")))}function he(e,t){if(1&e&&(i.dc(0,"div",25),i.Wc(1),i.cc()),2&e){const e=i.qc().$implicit,t=i.qc(2);i.Kb(1),i.Xc(t.offerSoldText(e))}}const ge=function(e){return{unique:e}},me=function(e){return{"background-image":e}};function fe(e,t){if(1&e&&(i.dc(0,"div",7),i.dc(1,"div",8),i.dc(2,"div",9),i.Zb(3,"div",10),i.Uc(4,ae,2,3,"div",11),i.cc(),i.dc(5,"div",12),i.dc(6,"div"),i.Wc(7),i.cc(),i.dc(8,"div",13),i.Wc(9),i.cc(),i.cc(),i.cc(),i.dc(10,"div",14),i.Wc(11),i.cc(),i.dc(12,"div",15),i.Uc(13,le,3,1,"div",16),i.Uc(14,de,3,1,"div",17),i.Uc(15,ue,3,3,"button",18),i.cc(),i.Uc(16,he,2,1,"div",19),i.cc()),2&e){const e=t.$implicit,n=i.qc(2);i.Kb(2),i.yc("ngClass",i.Cc(10,ge,e.isUniqueLimitedItem)),i.Kb(1),i.yc("ngStyle",i.Cc(12,me,"url("+n.imageUrlOffer(e)+")")),i.Kb(1),i.yc("ngIf",e.isUniqueLimitedItem),i.Kb(3),i.Xc(n.getMarketplaceOfferTitle(e)),i.Kb(2),i.Xc(n.getMarketplacePrice(e)),i.Kb(2),i.Xc(n.getMarketplaceOfferDescription(e)),i.Kb(2),i.yc("ngIf",n.offerIsOnGoing(e)),i.Kb(1),i.yc("ngIf",n.offerIsExpired(e)),i.Kb(1),i.yc("ngIf",n.canTakeBack(e)),i.Kb(1),i.yc("ngIf",n.offerIsSold(e))}}function pe(e,t){if(1&e&&(i.dc(0,"div"),i.dc(1,"perfect-scrollbar",5),i.Uc(2,fe,17,14,"div",6),i.cc(),i.cc()),2&e){const e=i.qc();i.Kb(2),i.yc("ngForOf",e.ownOffers)}}let _e=(()=>{class e extends a.a{constructor(){super(...arguments),this.redeemButtonActive=!1}ngOnInit(){r.a.instance.communication.connection.send(new se.a)}get statusText(){const e=this._marketService.lastOwnOffers,t=r.a.instance.localization.getValue("catalog.marketplace.no_items");return e&&0!==e.length?r.a.instance.localization.getValueWithParameter("catalog.marketplace.items_found","count",e.length.toString()):t}get topText(){const e=this._marketService.lastOwnOffers,t=r.a.instance.localization.getValue("catalog.marketplace.redeem.no_sold_items");if(!e||0===e.length)return t;let n=0;for(const i of e.getValues())i.status==N.a._Str_8295&&n++;if(n>0){const e=this._marketService.creditsWaiting;return this.redeemButtonActive=!0,r.a.instance.localization.getValueWithParameters("catalog.marketplace.redeem.get_credits",["count","credits"],[n.toString(),e.toString()])}return t}imageUrlOffer(e){if(!e)return"";switch(e.furniType){case 1:return r.a.instance.roomEngine.getFurnitureFloorIconUrl(e.furniId);case 2:return r.a.instance.roomEngine.getFurnitureWallIconUrl(e.furniId,e.extraData)}return""}getMarketplaceOfferTitle(e){return e?r.a.instance.localization.getValue(2==e.furniType?"wallItem.name."+e.furniId:"roomItem.name."+e.furniId):""}getMarketplaceOfferDescription(e){return e?r.a.instance.localization.getValue(2==e.furniType?"wallItem.desc."+e.furniId:"roomItem.desc."+e.furniId):""}getMarketplacePrice(e){return e?r.a.instance.localization.getValueWithParameter("catalog.marketplace.offer.price_own_item","price",e.price.toString()):""}offerIsOnGoing(e){return!!e&&e.status===N.a._Str_15376}offerIsSold(e){return!!e&&e.status===N.a._Str_8295}offerIsExpired(e){return!!e&&e.status===N.a._Str_6495}canTakeBack(e){if(!e)return!1;const t=this.offerIsSold(e),n=this.offerIsExpired(e);return!t||n}offerExpiredText(e){return e?r.a.instance.localization.getValue("catalog.marketplace.offer.expired"):""}takeBack(e){e&&this._marketService.redeemExpiredMarketPlaceOffer(e.offerId)}offerSoldText(e){return e?r.a.instance.localization.getValue("catalog.marketplace.offer.sold"):""}offerTime(e){if(!e)return"";const t=Math.max(1,e._Str_5853),n=Math.floor(t/60);let i=t-60*n+" "+r.a.instance.localization.getValue("catalog.marketplace.offer.minutes");return n>0&&(i=n+" "+r.a.instance.localization.getValue("catalog.marketplace.offer.hours")+" "+i),r.a.instance.localization.getValueWithParameter("catalog.marketplace.offer.time_left","time",i)}redeemCredits(){this.redeemButtonActive=!1,this._marketService.redeemCredits()}get hasOwnOffersOnMarketplace(){return!(!this._marketService.lastOwnOffers||0===this._marketService.lastOwnOffers.length)}get ownOffers(){return this._marketService.lastOwnOffers.getValues()}}return e.CODE="marketplace_own_items",e.\u0275fac=function(t){return be(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["ng-component"]],features:[i.Hb],decls:6,vars:4,consts:[[1,"w-100","h-100","px-1","nitro-catalog-layout-marketplace-own-items-component"],[1,"badge","badge-secondary","badge-sm","text-wrap","mb-2"],["type","button","class","btn btn-block btn-success btn-sm mb-2",3,"click",4,"ngIf"],[4,"ngIf"],["type","button",1,"btn","btn-block","btn-success","btn-sm","mb-2",3,"click"],[2,"height","381px","min-height","381px","max-height","381px"],["class","rounded bg-secondary mb-2 p-2",4,"ngFor","ngForOf"],[1,"rounded","bg-secondary","mb-2","p-2"],[1,"d-flex","flex-row","mb-1"],[1,"position-relative","align-self-center","align-items-end","mr-2","flex-shrink-0",2,"width","36px","height","36px",3,"ngClass"],[1,"position-absolute","w-100","h-100",2,"background-repeat","no-repeat","background-position","center",3,"ngStyle"],["class","position-absolute unique-counter","style","bottom:0px;",3,"innerHtml",4,"ngIf"],[1,"align-self-center"],[1,"small"],[1,"badge","badge-primary","badge-sm","text-wrap","w-100","mb-1"],[1,"d-flex","flex-row"],["class","badge badge-primary badge-sm text-wrap w-100 d-flex",4,"ngIf"],["class","badge badge-danger badge-sm text-wrap w-100 d-flex",4,"ngIf"],["class","btn btn-primary btn-sm ml-2","style","white-space: nowrap;",3,"click",4,"ngIf"],["class","badge badge-success badge-sm text-wrap w-100",4,"ngIf"],[1,"position-absolute","unique-counter",2,"bottom","0px",3,"innerHtml"],[1,"badge","badge-primary","badge-sm","text-wrap","w-100","d-flex"],[1,"align-self-center","w-100"],[1,"badge","badge-danger","badge-sm","text-wrap","w-100","d-flex"],[1,"btn","btn-primary","btn-sm","ml-2",2,"white-space","nowrap",3,"click"],[1,"badge","badge-success","badge-sm","text-wrap","w-100"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Wc(2),i.cc(),i.Uc(3,oe,3,3,"button",2),i.Wc(4),i.Uc(5,pe,3,1,"div",3),i.cc()),2&e&&(i.Kb(2),i.Xc(t.topText),i.Kb(1),i.yc("ngIf",t.redeemButtonActive),i.Kb(1),i.Yc(" ",t.statusText," "),i.Kb(1),i.yc("ngIf",t.hasOwnOffersOnMarketplace))},directives:[T.n,v.b,T.m,T.l,T.o],pipes:[m.a,ce.a],encapsulation:2}),e})();const be=i.fc(_e),ve=["nitro-marketplace-sub-activity",""];function Ee(e,t){if(1&e&&(i.dc(0,"option",4),i.Wc(1),i.cc()),2&e){const e=t.$implicit,n=i.qc();i.yc("selected",e.value==n.sortType)("value",e.value),i.Kb(1),i.Xc(e.name)}}let Se=(()=>{class e{constructor(){this.sortChanged=new i.r,this.sortType=0}getFilters(){const e=[];for(const t of this.sortTypes){const n=this.translateKey("catalog.marketplace.sort."+t);e.push({name:n,value:t})}return e}ngOnInit(){this.sortType=this.sortTypes[0]}translateKey(e){return r.a.instance.localization.getValue(e)}onOptionSelect(e){const t=parseInt(e.target.value);this.sortType=t,this.sortChanged.emit(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-marketplace-sub-activity",""]],inputs:{sortTypes:"sortTypes"},outputs:{sortChanged:"sortChanged"},attrs:ve,decls:6,vars:4,consts:[[1,"d-flex","flex-row"],[1,"mr-2","align-self-center",2,"white-space","nowrap"],[1,"form-control","form-control-sm",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],[3,"selected","value"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Wc(2),i.rc(3,"translate"),i.cc(),i.dc(4,"select",2),i.nc("change",function(e){return t.onOptionSelect(e)}),i.Uc(5,Ee,2,3,"option",3),i.cc(),i.cc()),2&e&&(i.Kb(2),i.Xc(i.sc(3,2,"catalog.marketplace.sort_order")),i.Kb(3),i.yc("ngForOf",t.getFilters()))},directives:[T.m,O.o,O.v],pipes:[m.a],encapsulation:2}),e})();const ye=["nitro-marketplace-sub-advanced",""];function Ie(e,t){if(1&e&&(i.dc(0,"option",12),i.Wc(1),i.cc()),2&e){const e=t.$implicit,n=i.qc();i.yc("selected",e.value==n.sortType)("value",e.value),i.Kb(1),i.Xc(e.name)}}let we=(()=>{class e{constructor(){this.sortType=0,this.searchQuery="",this.searchPriceBetweenStart=null,this.searchPriceBetweenEnd=null,this.onSearch=new i.r}getFilters(){const e=[];for(const t of this.sortTypes){const n=this.translateKey("catalog.marketplace.sort."+t);e.push({name:n,value:t})}return e}ngOnInit(){this.sortType=this.sortTypes[0]}translateKey(e){return r.a.instance.localization.getValue(e)}onOptionSelect(e){const t=parseInt(e.target.value);this.sortType=t}search(){this.onSearch.emit({minPrice:this.searchPriceBetweenStart,maxPrice:this.searchPriceBetweenEnd,query:this.searchQuery,type:this.sortType})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-marketplace-sub-advanced",""]],inputs:{sortTypes:"sortTypes"},outputs:{onSearch:"onSearch"},attrs:ye,decls:20,vars:13,consts:[[1,"row","mb-1"],[1,"col-7"],["type","text",1,"form-control","form-control-sm","mb-1",3,"ngModel","placeholder","ngModelChange"],[1,"col-5"],[1,"mt-2"],[1,"row","mb-2"],[1,"form-control","form-control-sm","w-100",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],[1,"input-group"],["type","number","placeholder","0",1,"form-control","form-control-sm","mb-1",3,"ngModel","ngModelChange"],["type","number","placeholder","0",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"btn","btn-secondary","btn-block","btn-sm",3,"click"],[3,"selected","value"]],template:function(e,t){1&e&&(i.dc(0,"div"),i.dc(1,"div",0),i.dc(2,"div",1),i.dc(3,"input",2),i.nc("ngModelChange",function(e){return t.searchQuery=e}),i.rc(4,"translate"),i.cc(),i.cc(),i.dc(5,"div",3),i.dc(6,"div",4),i.Wc(7),i.rc(8,"translate"),i.cc(),i.cc(),i.cc(),i.dc(9,"div",5),i.dc(10,"div",1),i.dc(11,"select",6),i.nc("change",function(e){return t.onOptionSelect(e)}),i.Uc(12,Ie,2,3,"option",7),i.cc(),i.cc(),i.dc(13,"div",3),i.dc(14,"div",8),i.dc(15,"input",9),i.nc("ngModelChange",function(e){return t.searchPriceBetweenStart=e}),i.cc(),i.dc(16,"input",10),i.nc("ngModelChange",function(e){return t.searchPriceBetweenEnd=e}),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(17,"button",11),i.nc("click",function(){return t.search()}),i.Wc(18),i.rc(19,"translate"),i.cc(),i.cc()),2&e&&(i.Kb(3),i.yc("ngModel",t.searchQuery)("placeholder",i.sc(4,7,"catalog.marketplace.search_name")),i.Kb(4),i.Xc(i.sc(8,9,"catalog.marketplace.search_price")),i.Kb(5),i.yc("ngForOf",t.getFilters()),i.Kb(3),i.yc("ngModel",t.searchPriceBetweenStart),i.Kb(1),i.yc("ngModel",t.searchPriceBetweenEnd),i.Kb(2),i.Xc(i.sc(19,11,"generic.search")))},directives:[O.b,O.l,O.n,T.m,O.p,O.o,O.v],pipes:[m.a],encapsulation:2}),e})();var Ce=n("l1qq"),Re=n("KeNc");const Te=["nitro-marketplace-offer",""];function Oe(e,t){if(1&e&&(i.Zb(0,"div",12),i.rc(1,"uniqueNumber")),2&e){const e=i.qc();i.yc("innerHtml",i.sc(1,1,e.offer.stuffData.uniqueNumber),i.Mc)}}const Me=function(e){return{unique:e}},Ue=function(e){return{"background-image":e}};let xe=(()=>{class e{constructor(e,t,n,i){this._marketplaceService=e,this._notificationService=t,this._ngZone=n,this._purseService=i}get imageUrlOffer(){if(!this.offer)return"";switch(this.offer.furniType){case 1:return r.a.instance.roomEngine.getFurnitureFloorIconUrl(this.offer.furniId);case 2:return r.a.instance.roomEngine.getFurnitureWallIconUrl(this.offer.furniId,this.offer.extraData)}return""}get marketplaceOfferTitle(){return this.offer?r.a.instance.localization.getValue(2==this.offer.furniType?"wallItem.name."+this.offer.furniId:"roomItem.name."+this.offer.furniId):""}get marketplaceOfferDescription(){if(!this.offer)return"";const e=this.offer;return r.a.instance.localization.getValue(2==e.furniType?"wallItem.desc."+e.furniId:"roomItem.desc."+e.furniId)}get marketplacePrice(){return this.offer?r.a.instance.localization.getValueWithParameter("catalog.marketplace.offer.price_own_item","price",this.offer.price.toString()):""}get averagePrice(){const e=this.offer.price,t=this.offer._Str_3925,n=0!=t?t.toString():" - ";return r.a.instance.localization.getValueWithParameters("catalog.marketplace.offer.price_public_item",["price","average"],[e.toString(),n])}get offerCount(){return r.a.instance.localization.getValueWithParameter("catalog.marketplace.offer_count","count",this.offer._Str_4121.toString())}get description(){return this.offer?r.a.instance.localization.getValue(2==this.offer.furniType?"wallItem.desc."+this.offer.furniId:"roomItem.desc."+this.offer.furniId):""}buy(){this._purseService.currencies.get(-1)<this.offer.price?this._notificationService.alert(r.a.instance.localization.getValue("catalog.alert.notenough.credits.description"),r.a.instance.localization.getValue("catalog.alert.notenough.title")):this._ngZone.run(()=>this._marketplaceService.buyOffer(this.offer))}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(N.a),i.Yb(Ce.a),i.Yb(i.H),i.Yb(Re.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-marketplace-offer",""]],inputs:{offer:"offer"},attrs:Te,decls:19,vars:14,consts:[[1,"rounded","bg-secondary","mb-2","p-2"],[1,"d-flex","flex-row","mb-1"],[1,"position-relative","align-self-center","align-items-end","mr-2","flex-shrink-0",2,"width","36px","height","36px",3,"ngClass"],[1,"position-absolute","w-100","h-100",2,"background-repeat","no-repeat","background-position","center",3,"ngStyle"],["class","position-absolute unique-counter","style","bottom:0px;",3,"innerHtml",4,"ngIf"],[1,"align-self-center"],[1,"small"],[1,"badge","badge-primary","badge-sm","text-wrap","w-100","mb-1"],[1,"d-flex","flex-row"],[1,"badge","badge-primary","badge-sm","text-wrap","w-100","d-flex"],[1,"align-self-center","w-100"],[1,"btn","btn-primary","btn-sm","ml-2","w-100",2,"white-space","nowrap",3,"click"],[1,"position-absolute","unique-counter",2,"bottom","0px",3,"innerHtml"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"div",2),i.Zb(3,"div",3),i.Uc(4,Oe,2,3,"div",4),i.cc(),i.dc(5,"div",5),i.dc(6,"div"),i.Wc(7),i.cc(),i.dc(8,"div",6),i.Wc(9),i.cc(),i.cc(),i.cc(),i.dc(10,"div",7),i.Wc(11),i.cc(),i.dc(12,"div",8),i.dc(13,"div",9),i.dc(14,"div",10),i.Wc(15),i.cc(),i.cc(),i.dc(16,"button",11),i.nc("click",function(){return t.buy()}),i.Wc(17),i.rc(18,"translate"),i.cc(),i.cc(),i.cc()),2&e&&(i.Kb(2),i.yc("ngClass",i.Cc(10,Me,t.offer.isUniqueLimitedItem)),i.Kb(1),i.yc("ngStyle",i.Cc(12,Ue,"url("+t.imageUrlOffer+")")),i.Kb(1),i.yc("ngIf",t.offer.isUniqueLimitedItem),i.Kb(3),i.Xc(t.marketplaceOfferTitle),i.Kb(2),i.Xc(t.averagePrice),i.Kb(2),i.Xc(t.description),i.Kb(4),i.Xc(t.offerCount),i.Kb(2),i.Xc(i.sc(18,8,"buy")))},directives:[T.l,T.o,T.n],pipes:[m.a,ce.a],encapsulation:2}),e})();function Ae(e,t){if(1&e){const e=i.ec();i.dc(0,"div",6),i.nc("sortChanged",function(t){return i.Lc(e),i.qc().onSortChanged(t)}),i.cc()}if(2&e){const e=i.qc();i.yc("sortTypes",e.SORT_TYPES_ACTIVITY)}}function De(e,t){if(1&e){const e=i.ec();i.dc(0,"div",6),i.nc("sortChanged",function(t){return i.Lc(e),i.qc().onSortChanged(t)}),i.cc()}if(2&e){const e=i.qc();i.yc("sortTypes",e.SORT_TYPES_VALUE)}}function Le(e,t){if(1&e){const e=i.ec();i.dc(0,"div",7),i.nc("onSearch",function(t){return i.Lc(e),i.qc().onSearch(t)}),i.cc()}if(2&e){const e=i.qc();i.yc("sortTypes",e.SORT_TYPES_ADVANCED)}}function ke(e,t){1&e&&i.Zb(0,"div",11),2&e&&i.yc("offer",t.$implicit)}const Pe=function(e,t){return{"view-big":e,"view-short":t}};function Ne(e,t){if(1&e&&(i.dc(0,"div"),i.dc(1,"div",8),i.Wc(2),i.cc(),i.dc(3,"perfect-scrollbar",9),i.Uc(4,ke,1,1,"div",10),i.cc(),i.cc()),2&e){const e=i.qc();i.Kb(2),i.Xc(e.foundText),i.Kb(1),i.yc("ngClass",i.Dc(3,Pe,"activity"===e.view||"value"===e.view,"advanced"===e.view)),i.Kb(1),i.yc("ngForOf",e.marketOffers)}}const We=function(e){return{active:e}};let Ke=(()=>{class e extends a.a{constructor(){super(...arguments),this.SORT_TYPES_VALUE=[1,2],this.SORT_TYPES_ACTIVITY=[3,4,5,6],this.SORT_TYPES_ADVANCED=[1,2,3,4,5,6],this.view="activity",this.sortType=3}ngOnInit(){this.searchOffers()}selectView(e){this.view=e;let t=!1;switch(e){case"activity":this.sortType=this.SORT_TYPES_ACTIVITY[0],t=!0;break;case"value":this.sortType=this.SORT_TYPES_VALUE[0],t=!0;break;case"advanced":this.sortType=this.SORT_TYPES_ADVANCED[0]}t&&this.onSearch({minPrice:-1,maxPrice:-1,query:"",type:this.sortType})}onSortChanged(e){this._ngZone.run(()=>this.sortType=e),this.searchOffers()}onSearch(e){const t=0!=e.maxPrice&&e.maxPrice?e.maxPrice:-1;e.minPrice=0!=e.minPrice&&e.minPrice?e.minPrice:-1,e.maxPrice=t,this._marketService.requestOffers(e)}searchOffers(){this._marketService.requestOffers({minPrice:-1,maxPrice:-1,query:"",type:this.sortType})}get marketOffers(){return this._marketService.publicOffers}get totalOffersFound(){return this._marketService.totalOffersFound}get foundText(){return r.a.instance.localization.getValueWithParameter("catalog.marketplace.items_found","count",this.totalOffersFound.toString())}get hasOffers(){return this.marketOffers&&this.marketOffers.length>0}}return e.CODE="marketplace",e.\u0275fac=function(t){return Fe(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["ng-component"]],features:[i.Hb],decls:15,vars:22,consts:[[1,"w-100","h-100","px-1","nitro-catalog-layout-marketplace-own-items-component"],[1,"btn-group","w-100","mb-3"],["type","button",1,"btn","btn-secondary",3,"ngClass","click"],["class","mb-2","nitro-marketplace-sub-activity","",3,"sortTypes","sortChanged",4,"ngIf"],["class","mb-2","nitro-marketplace-sub-advanced","",3,"sortTypes","onSearch",4,"ngIf"],[4,"ngIf"],["nitro-marketplace-sub-activity","",1,"mb-2",3,"sortTypes","sortChanged"],["nitro-marketplace-sub-advanced","",1,"mb-2",3,"sortTypes","onSearch"],[1,"mb-1"],[3,"ngClass"],["nitro-marketplace-offer","",3,"offer",4,"ngFor","ngForOf"],["nitro-marketplace-offer","",3,"offer"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"button",2),i.nc("click",function(){return t.selectView("activity")}),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",2),i.nc("click",function(){return t.selectView("value")}),i.Wc(6),i.rc(7,"translate"),i.cc(),i.dc(8,"button",2),i.nc("click",function(){return t.selectView("advanced")}),i.Wc(9),i.rc(10,"translate"),i.cc(),i.cc(),i.Uc(11,Ae,1,1,"div",3),i.Uc(12,De,1,1,"div",3),i.Uc(13,Le,1,1,"div",4),i.Uc(14,Ne,5,6,"div",5),i.cc()),2&e&&(i.Kb(2),i.yc("ngClass",i.Cc(16,We,"activity"===t.view)),i.Kb(1),i.Xc(i.sc(4,10,"catalog.marketplace.search_by_activity")),i.Kb(2),i.yc("ngClass",i.Cc(18,We,"value"===t.view)),i.Kb(1),i.Xc(i.sc(7,12,"catalog.marketplace.search_by_value")),i.Kb(2),i.yc("ngClass",i.Cc(20,We,"advanced"===t.view)),i.Kb(1),i.Xc(i.sc(10,14,"catalog.marketplace.search_advanced")),i.Kb(2),i.yc("ngIf","activity"===t.view),i.Kb(1),i.yc("ngIf","value"===t.view),i.Kb(1),i.yc("ngIf","advanced"===t.view),i.Kb(1),i.yc("ngIf",t.hasOffers))},directives:[T.l,T.n,Se,we,v.b,T.m,xe],pipes:[m.a],styles:[".view-big[_ngcontent-%COMP%]{height:373px;min-height:373px;max-height:373px}.view-short[_ngcontent-%COMP%]{height:291px;min-height:291px;max-height:291px}"]}),e})();const Fe=i.fc(Ke);class Ve{getLayoutForType(e){switch(e){case l.CODE:return l;case u.a.CODE:return u.a;case Z.a.CODE:return Z.a;case _.CODE:return _;case E.CODE:return E;case y.CODE:return y;case w.a.CODE:return w.a;case o.a.CODE:return o.a;case G.CODE:return G;case f.CODE:return f;case h.a.CODE:return h.a;case A.CODE:return A;case X.a.CODE:return X.a;case ie.CODE:return ie;case _e.CODE:return _e;case Ke.CODE:return Ke;default:return L}}}var qe=n("ylpd"),He=n("u0Tz"),Be=n("WnqX");const Ge=["layoutsContainer"],Ze=function(e){return{active:e}};function Xe(e,t){if(1&e){const e=i.ec();i.bc(0),i.dc(1,"button",18),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc(3).selectTab(n)}),i.Wc(2),i.cc(),i.ac()}if(2&e){const e=t.$implicit,n=i.qc(3);i.Kb(1),i.yc("ngClass",i.Cc(2,Ze,n.activeTab===e)),i.Kb(1),i.Xc(e.localization)}}function je(e,t){if(1&e&&(i.dc(0,"div",15),i.dc(1,"div",16),i.Uc(2,Xe,3,4,"ng-container",17),i.cc(),i.cc()),2&e){const e=i.qc(2);i.Kb(2),i.yc("ngForOf",e.catalogRoot.children)}}function Ye(e,t){1&e&&i.Zb(0,"div",19)}function ze(e,t){}function $e(e,t){if(1&e){const e=i.ec();i.dc(0,"div",5),i.dc(1,"div",6),i.dc(2,"h6",7),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",8),i.nc("click",function(){return i.Lc(e),i.qc().hide()}),i.Zb(6,"i",9),i.cc(),i.cc(),i.Uc(7,je,3,1,"div",10),i.dc(8,"div",11),i.Uc(9,Ye,1,0,"div",12),i.dc(10,"div",13),i.Uc(11,ze,0,0,"ng-template",null,14,i.Vc),i.cc(),i.cc(),i.cc()}if(2&e){const e=i.qc();i.Kb(3),i.Xc(i.sc(4,3,"catalog.title")),i.Kb(4),i.yc("ngIf",e.catalogRoot&&e.catalogRoot.children.length>0),i.Kb(2),i.yc("ngIf",e.activeTab&&e.activeTab.children.length>0)}}function Qe(e,t){if(1&e&&i.Zb(0,"nitro-catalog-confirm-marketplace-purchase-component",20),2&e){const e=i.qc();i.yc("offer",e.currentMarketplaceOfferToBuy)}}function Je(e,t){if(1&e&&i.Zb(0,"nitro-catalog-confirm-purchase-component",21),2&e){const e=i.qc();i.yc("giftOffer",e.giftOffer)("page",e.purchaseOfferPage)("offer",e.purchaseOffer)("quantity",e.purchaseOfferQuantity)("extra",e.purchaseOfferExtra)("completed",e.purchaseCompleted)}}function et(e,t){if(1&e&&i.Zb(0,"nitro-catalog-confirm-vip-subscription-component",22),2&e){const e=i.qc();i.yc("subscription",e.purchaseVipSubscription)}}function tt(e,t){1&e&&i.Zb(0,"nitro-catalog-confirm-purchase-insufficient-funds")}function nt(e,t){1&e&&i.Zb(0,"nitro-catalog-customize-gift-component")}let it=(()=>{class e{constructor(e,t,n,i,r,s,c){this._settingsService=e,this._notificationService=t,this._catalogService=n,this._marketplaceService=i,this._componentFactoryResolver=r,this._purseService=s,this._ngZone=c,this.visible=!1,this._roomPreviewer=null,this._previewStuffData=null,this._lastComponent=null,this._layoutFactory=null,this._activeTab=null,this._activeOffer=null,this._purchaseOfferPage=null,this._purchaseOffer=null,this._purchaseGiftOffer=null,this._purchaseVipSubscription=null,this._purchaseOfferQuantity=1,this._purchaseOfferExtra=null,this._purchaseCompleted=!1,this._showInsufficientFunds=!1,this._showGiftConfigurator=!1,n.requestClubGifts()}ngOnInit(){this._catalogService.component=this,this._layoutFactory=new Ve,this._roomPreviewer||(this._roomPreviewer=new s.a(r.a.instance.roomEngine,++s.a.PREVIEW_COUNTER))}ngOnChanges(e){const t=e.visible.currentValue;t!==e.visible.previousValue&&(t?this.prepareCatalog():this.removeLastComponent())}ngOnDestroy(){this._roomPreviewer&&this._roomPreviewer.dispose(),this.reset(),this._catalogService.component=null,this._layoutFactory=null}reset(){this.removeLastComponent(),this._activeTab=null,this._activeOffer=null,this.hidePurchaseConfirmation()}hide(){this._settingsService.hideCatalog(),this._catalogService.clearSearchResults()}hidePurchaseConfirmation(){this._purchaseOfferPage=null,this._purchaseOffer=null,this._purchaseOfferQuantity=1,this._purchaseOfferExtra=null,this._purchaseVipSubscription=null,this._purchaseGiftOffer=null,this._showGiftConfigurator=!1}prepareCatalog(){this._catalogService.catalogRoot?setTimeout(()=>{this._activeTab?this._catalogService.activePage?this.setupLayout():this.selectFirstPage(this._activeTab):this.selectFirstTab()},0):this._catalogService.setupCatalog(P.a.MODE_NORMAL)}setupLayout(){const e=this._catalogService.activePage;if(!e)return;const t=this._layoutFactory.getLayoutForType(e.layoutCode);t?(this.createComponent(t),this._lastComponent&&(this._lastComponent.instance.activePage=e),this.selectOffer(null)):this.removeLastComponent()}createComponent(e){if(!e||!this.layoutsContainer)return;this.removeLastComponent();const t=this._componentFactoryResolver.resolveComponentFactory(e);let n=null;t&&(n=this.layoutsContainer.createComponent(t)),this._lastComponent=n}removeLastComponent(){this.layoutsContainer&&this.layoutsContainer.remove(),this._lastComponent=null,this._activeOffer=null}selectTab(e){e&&(this._activeTab=e,this.selectFirstPage(e))}reselectCurrentTab(){this.selectFirstPage(this._activeTab)}selectPage(e){e&&this._catalogService.requestPage(e)}selectFirstPage(e,t=!1){e&&this.selectPage(t||!e.children.length?e:e.children&&e.children[0])}selectFirstTab(){if(!this.catalogRoot)return;const e=this.catalogRoot.children&&this.catalogRoot.children[0];e&&this.selectTab(e)}selectOffer(e){if(this._activeOffer=e,this._activeOffer){const e=this._activeOffer.products[0];if(!e)return;if(!this._roomPreviewer)return;const t=this._catalogService.getFurnitureDataForProductOffer(e);if(!t&&e.productType!==He.a.ROBOT)return;this._ngZone.runOutsideAngular(()=>{switch(e.productType){case He.a.ROBOT:{this._roomPreviewer.updateObjectRoom("default","default","default");const t=r.a.instance.avatar.getFigureStringWithFigureIds(e.extraParam,"m",[]);this._roomPreviewer.addAvatarIntoRoom(t,0)}break;case He.a.FLOOR:if(this._roomPreviewer.updateObjectRoom("default","default","default"),t.specialType===qe.a.FIGURE_PURCHASABLE_SET){const e=[],n=t.customParams.split(",");for(const t of n){const n=parseInt(t);r.a.instance.avatar.isValidFigureSetForGender(n,r.a.instance.sessionDataManager.gender)&&e.push(n)}const i=r.a.instance.avatar.getFigureStringWithFigureIds(r.a.instance.sessionDataManager.figure,r.a.instance.sessionDataManager.gender,e);this._roomPreviewer.addAvatarIntoRoom(i,0)}else this._roomPreviewer.addFurnitureIntoRoom(e.furniClassId,new c.a(90),this._previewStuffData);return;case He.a.WALL:switch(t.className){case"floor":this._roomPreviewer.reset(!1),this._roomPreviewer.updateObjectRoom(e.extraParam);break;case"wallpaper":this._roomPreviewer.reset(!1),this._roomPreviewer.updateObjectRoom(null,e.extraParam);break;case"landscape":this._roomPreviewer.reset(!1),this._roomPreviewer.updateObjectRoom(null,null,e.extraParam);break;default:return this._roomPreviewer.updateObjectRoom("default","default","default"),void this._roomPreviewer.addWallItemIntoRoom(e.furniClassId,new c.a(90),e.extraParam)}return}})}else this._ngZone.runOutsideAngular(()=>this._roomPreviewer&&this._roomPreviewer.reset(!1))}hasSufficientFunds(e,t,n,i=1){if(!this._purseService)return!1;const r=this._purseService.currencies,s=r.get(-1),c=r.get(t);return!(s<e*i||c<n*i)}confirmPurchase(e,t,n=1,i=null,r=!1){this.hasSufficientFunds(t.priceCredits,t.priceActivityPointsType,t.priceActivityPoints,n)?(this._purchaseOfferPage=e,this._purchaseOffer=t,this._purchaseOfferQuantity=n,this._purchaseOfferExtra=i,r&&(this._purchaseGiftOffer=t)):this.setInsufficientFunds(!0)}confirmVipSubscription(e){this.hasSufficientFunds(e.priceCredits,e.priceActivityPointsType,e.priceActivityPoints,1)?this._purchaseVipSubscription=e:this.setInsufficientFunds(!0)}get previewStuffData(){return this._previewStuffData}set previewStuffData(e){this._previewStuffData=e}get roomPreviewer(){return this._roomPreviewer}get catalogRoot(){return this._catalogService.catalogRoot}get activeTab(){return this._activeTab}get activeOffer(){return this._activeOffer}get activePage(){return this._catalogService.activePage}get activePageData(){return this._catalogService.activePageData}get purchaseOfferPage(){return this._purchaseOfferPage}get purchaseOffer(){return this._purchaseOffer}get currentMarketplaceOfferToBuy(){return this._marketplaceService.currentMarketplaceOfferToBuy}get giftOffer(){return this._purchaseGiftOffer}get showGiftConfigurator(){return this._showGiftConfigurator}makeGiftConfiguratorVisible(){this._showGiftConfigurator=!0}get purchaseOfferQuantity(){return this._purchaseOfferQuantity}get purchaseOfferExtra(){return this._purchaseOfferExtra}get purchaseCompleted(){return this._purchaseCompleted}get purchaseVipSubscription(){return this._purchaseVipSubscription}setInsufficientFunds(e){this._showInsufficientFunds=e}get showInsufficientFunds(){return this._showInsufficientFunds}handleSearchResults(e){this._catalogService.setSearchPage(e),this.setupLayout()}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(Be.a),i.Yb(Ce.a),i.Yb(P.a),i.Yb(N.a),i.Yb(i.m),i.Yb(Re.a),i.Yb(i.H))},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-catalog-main-component"]],viewQuery:function(e,t){if(1&e&&i.cd(Ge,1,i.Z),2&e){let e;i.Hc(e=i.oc())&&(t.layoutsContainer=e.first)}},inputs:{visible:"visible"},features:[i.Ib],decls:6,vars:6,consts:[["class","nitro-catalog card",3,"bringToTop","draggable",4,"ngIf"],[3,"offer",4,"ngIf"],[3,"giftOffer","page","offer","quantity","extra","completed",4,"ngIf"],[3,"subscription",4,"ngIf"],[4,"ngIf"],[1,"nitro-catalog","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],["class","d-flex px-3 pt-3",4,"ngIf"],[1,"row","p-3"],["nitro-catalog-navigation-component","","class","col-4",4,"ngIf"],[1,"col"],["layoutsContainer",""],[1,"d-flex","px-3","pt-3"],[1,"btn-group","w-100"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-secondary","btn-sm",3,"ngClass","click"],["nitro-catalog-navigation-component","",1,"col-4"],[3,"offer"],[3,"giftOffer","page","offer","quantity","extra","completed"],[3,"subscription"]],template:function(e,t){1&e&&(i.Uc(0,$e,13,5,"div",0),i.Uc(1,Qe,1,1,"nitro-catalog-confirm-marketplace-purchase-component",1),i.Uc(2,Je,1,6,"nitro-catalog-confirm-purchase-component",2),i.Uc(3,et,1,1,"nitro-catalog-confirm-vip-subscription-component",3),i.Uc(4,tt,1,0,"nitro-catalog-confirm-purchase-insufficient-funds",4),i.Uc(5,nt,1,0,"nitro-catalog-customize-gift-component",4)),2&e&&(i.yc("ngIf",t.visible),i.Kb(1),i.yc("ngIf",t.currentMarketplaceOfferToBuy),i.Kb(1),i.yc("ngIf",(null!==t.purchaseOffer||null!==t.giftOffer)&&!t.showGiftConfigurator),i.Kb(1),i.yc("ngIf",null!==t.purchaseVipSubscription),i.Kb(1),i.yc("ngIf",t.showInsufficientFunds),i.Kb(1),i.yc("ngIf",null!==t.giftOffer&&t.showGiftConfigurator))},encapsulation:2}),e})()},vGKG:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("bwAN"),r=n("fXoL"),s=n("ofXK");const c=["nitro-currency-icon",""],o=function(e){return{"background-image":e}};let a=(()=>{class e{constructor(){this.type=null}get iconUrl(){if(null===this.type)return null;let e=i.a.instance.getConfiguration("currency.asset.icon.url","");return e=e.replace("%type%",this.type.toString()),`url('${e}')`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Sb({type:e,selectors:[["","nitro-currency-icon",""]],inputs:{type:"type"},attrs:c,decls:1,vars:3,consts:[[1,"nitro-currency-icon",3,"ngStyle"]],template:function(e,t){1&e&&r.Zb(0,"div",0),2&e&&r.yc("ngStyle",r.Cc(1,o,t.iconUrl))},directives:[s.o],encapsulation:2}),e})()},vLqR:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("5+Zn");class r extends i.a{constructor(){super(...arguments),this.delay=0}onEditStart(e){this.delay=e.delayInPulses}}},w9ZJ:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("cEnG");class r{constructor(e){this._furni=null,this._offer=null,this._furni=e}get searchOffer(){return this._offer}selectSearchResult(e,t){t&&(this._offer=t.offer)}get acceptSeasonCurrencyAsCredits(){return!1}get catalogType(){return i.a.CODE}get frontPageItems(){return[]}get layoutCode(){return i.a.CODE}get localization(){return{images:[],texts:[]}}get offerId(){return null}get offers(){return[]}get furni(){return this._furni}get pageId(){return-1}}},wDsT:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("5+Zn");class r extends i.a{}},wEng:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("xPcM"),s=n("vLqR"),c=n("fXoL");let o=(()=>{class e extends s.a{get code(){return e.CODE}onEditStart(t){const n=t.stringData.split(e.DELIMETER);this.botName=n.length>=1?n[0]:"",this.message=2==n.length?n[1]:"",this.mode=t.intData.length>0?t.intData[0].toString():"0",super.onEditStart(t)}get hasSpecialInputs(){return!0}get requiresFurni(){return i.a._Str_5431}readStringParamFromForm(){return this.botName+e.DELIMETER+this.message}readIntegerParamsFromForm(){return[Number.parseInt(this.mode)]}}return e.CODE=r.a.BOT_TALK,e.DELIMETER="\t",e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:21,vars:17,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","text","maxlength","64",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"form-check"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.dc(0,"nitro-wired-action-base-component",0),c.nc("delayChange",function(e){return t.delay=e}),c.dc(1,"div",1),c.dc(2,"label"),c.Wc(3),c.rc(4,"translate"),c.cc(),c.dc(5,"input",2),c.nc("ngModelChange",function(e){return t.botName=e}),c.cc(),c.cc(),c.dc(6,"div",1),c.dc(7,"label"),c.Wc(8),c.rc(9,"translate"),c.cc(),c.dc(10,"input",3),c.nc("ngModelChange",function(e){return t.message=e}),c.cc(),c.cc(),c.dc(11,"div",4),c.dc(12,"input",5),c.nc("ngModelChange",function(e){return t.mode=e}),c.cc(),c.dc(13,"label",6),c.Wc(14),c.rc(15,"translate"),c.cc(),c.cc(),c.dc(16,"div",4),c.dc(17,"input",7),c.nc("ngModelChange",function(e){return t.mode=e}),c.cc(),c.dc(18,"label",6),c.Wc(19),c.rc(20,"translate"),c.cc(),c.cc(),c.cc()),2&e&&(c.yc("delay",t.delay),c.Kb(3),c.Xc(c.sc(4,9,"wiredfurni.params.bot.name")),c.Kb(2),c.yc("ngModel",t.botName),c.Kb(3),c.Xc(c.sc(9,11,"wiredfurni.params.message")),c.Kb(2),c.yc("ngModel",t.message),c.Kb(2),c.yc("ngModel",t.mode),c.Kb(2),c.Xc(c.sc(15,13,"wiredfurni.params.talk")),c.Kb(3),c.yc("ngModel",t.mode),c.Kb(2),c.Xc(c.sc(20,15,"wiredfurni.params.shout")))},encapsulation:2}),e})();const a=c.fc(o)},wdG1:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i=n("3znA"),r=n("AdbZ"),s=n("fGqN"),c=n("uYQm"),o=n("xDpK"),a=n("J5mx"),l=n("LvG+"),d=n("X/VW"),u=n("bwAN"),h=n("WS8Q"),g=n("fXoL"),m=n("WnqX");let f=(()=>{class e{constructor(e,t){this._ngZone=e,this._settingsService=t,this.onRoomEngineObjectEvent=this.onRoomEngineObjectEvent.bind(this),this.flush(),this.registerMessages(),u.a.instance.addLinkEventTracker(this)}ngOnDestroy(){u.a.instance.removeLinkEventTracker(this),this.unregisterMessages()}flush(){this._userLoadedProfile=null,this._userBadges=[],this._heartRelationships=[],this._smileRelationships=[],this._bobbaRelationships=[],this._selectedGroup=null}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),u.a.instance.roomEngine.events.addEventListener(h.a.SELECTED,this.onRoomEngineObjectEvent),this._messages=[new s.a(this.onUserProfileEvent.bind(this)),new r.a(this.onUserCurrentBadgesEvent.bind(this)),new c.a(this.onUserRelationshipsEvent.bind(this)),new i.a(this.onGroupInformationEvent.bind(this))];for(const e of this._messages)u.a.instance.communication.registerMessageEvent(e)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(u.a.instance.roomEngine.events.removeEventListener(h.a.SELECTED,this.onRoomEngineObjectEvent),this._messages&&this._messages.length)for(const e of this._messages)u.a.instance.communication.removeMessageEvent(e);this._messages=[]})}onRoomEngineObjectEvent(e){if(e)switch(e.type){case h.a.SELECTED:return}}onUserProfileEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>{this.flush(),this._userLoadedProfile=t,u.a.instance.communication.connection.send(new a.a(this._userLoadedProfile.id)),u.a.instance.communication.connection.send(new d.a(this._userLoadedProfile.id)),t.groups.length>0&&u.a.instance.communication.connection.send(new o.a(this._userLoadedProfile.groups[0].id,!1)),this._settingsService.showUserProfile()})}onUserCurrentBadgesEvent(e){if(!e||!this._userLoadedProfile)return;const t=e.getParser();t&&t.userId===this._userLoadedProfile.id&&this._ngZone.run(()=>this._userBadges=t.badges)}onUserRelationshipsEvent(e){if(!e||!this._userLoadedProfile)return;const t=e.getParser();t&&t.id===this._userLoadedProfile.id&&this._ngZone.run(()=>{this._heartRelationships=t.hearts,this._smileRelationships=t.smiles,this._bobbaRelationships=t.bobbas,this._component&&this._component.getRandomRelationships()})}onGroupInformationEvent(e){if(!e)return;const t=e.getParser();t&&(this._selectedGroup&&t.id!==this._selectedGroup.id||this._ngZone.run(()=>this._selectedGroup=t))}selectGroup(e){u.a.instance.communication.connection.send(new o.a(e,!1))}loadUserProfile(e){u.a.instance.communication.connection.send(new l.a(e))}linkReceived(e){const t=e.split("/");if(!(t.length<2))switch(t[1]){case"goto":if(t.length>2){const e=parseInt(t[2]);e>0&&this.loadUserProfile(e)}return}}get eventUrlPrefix(){return"profile"}set component(e){this._component=e}get userLoadedProfile(){return this._userLoadedProfile}get userBadges(){return this._userBadges}get heartRelationships(){return this._heartRelationships}get smileRelationships(){return this._smileRelationships}get bobbaRelationships(){return this._bobbaRelationships}get selectedGroup(){return this._selectedGroup}}return e.\u0275fac=function(t){return new(t||e)(g.kc(g.H),g.kc(m.a))},e.\u0275prov=g.Ub({token:e,factory:e.\u0275fac}),e})()},wvSN:function(e,t,n){"use strict";n.d(t,"a",function(){return U});var i=n("rYk/"),r=n("fXoL"),s=n("l1qq"),c=n("cC5F"),o=n("ofXK"),a=n("0DQ5"),l=n("L0LC");const d=["nitro-inventory-trading-component",""];function u(e,t){if(1&e&&(r.dc(0,"div",23),r.Wc(1),r.cc()),2&e){const e=r.qc(2).index,t=r.qc();r.Kb(1),r.Xc(t.ownUserItems[e].getUnlockedCount())}}function h(e,t){if(1&e&&(r.Zb(0,"div",24),r.rc(1,"uniqueNumber")),2&e){const e=r.qc(2).index,t=r.qc();r.yc("innerHtml",r.sc(1,1,t.ownUserItems[e].stuffData.uniqueNumber),r.Mc)}}const g=function(e){return{unique:e}},m=function(e){return{"background-image":e}};function f(e,t){if(1&e&&(r.dc(0,"button",19),r.Zb(1,"div",20),r.Uc(2,u,2,1,"div",21),r.Uc(3,h,2,3,"div",22),r.cc()),2&e){const e=r.qc().index,t=r.qc();r.yc("ngClass",r.Cc(4,g,t.ownUserItems[e].stuffData.uniqueNumber)),r.Kb(1),r.yc("ngStyle",r.Cc(6,m,"url("+t.getIconUrl(t.ownUserItems[e])+")")),r.Kb(1),r.yc("ngIf",!t.ownUserItems[e].stuffData.uniqueNumber),r.Kb(1),r.yc("ngIf",t.ownUserItems[e].stuffData.uniqueNumber)}}function p(e,t){1&e&&r.Zb(0,"button",25)}function _(e,t){if(1&e){const e=r.ec();r.dc(0,"div",16),r.nc("click",function(){r.Lc(e);const n=t.index;return r.qc().removeItem(n)}),r.Uc(1,f,4,8,"button",17),r.Uc(2,p,1,0,"button",18),r.cc()}if(2&e){const e=t.index,n=r.qc();r.Kb(1),r.yc("ngIf",n.ownUserItems[e]),r.Kb(1),r.yc("ngIf",!n.ownUserItems[e])}}function b(e,t){if(1&e&&(r.dc(0,"div",23),r.Wc(1),r.cc()),2&e){const e=r.qc(2).index,t=r.qc();r.Kb(1),r.Xc(t.otherUserItems[e].getUnlockedCount())}}function v(e,t){if(1&e&&(r.Zb(0,"div",24),r.rc(1,"uniqueNumber")),2&e){const e=r.qc(2).index,t=r.qc();r.yc("innerHtml",r.sc(1,1,t.otherUserItems[e].stuffData.uniqueNumber),r.Mc)}}function E(e,t){if(1&e&&(r.dc(0,"button",19),r.Zb(1,"div",20),r.Uc(2,b,2,1,"div",21),r.Uc(3,v,2,3,"div",22),r.cc()),2&e){const e=r.qc().index,t=r.qc();r.yc("ngClass",r.Cc(4,g,t.otherUserItems[e].stuffData.uniqueNumber)),r.Kb(1),r.yc("ngStyle",r.Cc(6,m,"url("+t.getIconUrl(t.otherUserItems[e])+")")),r.Kb(1),r.yc("ngIf",!t.otherUserItems[e].stuffData.uniqueNumber),r.Kb(1),r.yc("ngIf",t.otherUserItems[e].stuffData.uniqueNumber)}}function S(e,t){1&e&&r.Zb(0,"button",25)}function y(e,t){if(1&e){const e=r.ec();r.dc(0,"div",16),r.nc("click",function(){r.Lc(e);const n=t.index;return r.qc().removeItem(n)}),r.Uc(1,E,4,8,"button",17),r.Uc(2,S,1,0,"button",18),r.cc()}if(2&e){const e=t.index,n=r.qc();r.Kb(1),r.yc("ngIf",n.otherUserItems[e]),r.Kb(1),r.yc("ngIf",!n.otherUserItems[e])}}function I(e,t){if(1&e){const e=r.ec();r.dc(0,"button",26),r.nc("click",function(){return r.Lc(e),r.qc().progressTrade()}),r.Wc(1),r.rc(2,"translate"),r.cc()}if(2&e){const e=r.qc();r.yc("disabled",!e.ownUserNumItems&&!e.otherUserNumItems),r.Kb(1),r.Xc(r.sc(2,2,"inventory.trading.accept"))}}function w(e,t){if(1&e){const e=r.ec();r.dc(0,"button",26),r.nc("click",function(){return r.Lc(e),r.qc().progressTrade()}),r.Wc(1),r.rc(2,"translate"),r.cc()}if(2&e){const e=r.qc();r.yc("disabled",!e.ownUserNumItems&&!e.otherUserNumItems),r.Kb(1),r.Xc(r.sc(2,2,e.ownUserAccepts?"inventory.trading.modify":"inventory.trading.accept"))}}function C(e,t){if(1&e&&(r.dc(0,"button",27),r.Wc(1),r.rc(2,"translate"),r.cc()),2&e){const e=r.qc();r.Kb(1),r.Xc(r.uc(2,1,"inventory.trading.countdown","counter",e.timerTick))}}function R(e,t){if(1&e){const e=r.ec();r.dc(0,"button",28),r.nc("click",function(){return r.Lc(e),r.qc().progressTrade()}),r.Wc(1),r.rc(2,"translate"),r.cc()}2&e&&(r.Kb(1),r.Xc(r.sc(2,1,"inventory.trading.confirm")))}function T(e,t){1&e&&(r.dc(0,"button",27),r.Wc(1),r.rc(2,"translate"),r.cc()),2&e&&(r.Kb(1),r.Xc(r.sc(2,1,"inventory.trading.info.waiting")))}function O(e,t){1&e&&(r.dc(0,"button",27),r.Wc(1),r.rc(2,"translate"),r.cc()),2&e&&(r.Kb(1),r.Xc(r.sc(2,1,"inventory.trading.accept")))}const M=function(e,t){return{"trade-unlocked-icon":e,"trade-locked-icon":t}};let U=(()=>{class e{constructor(e,t,n){this._notificationService=e,this._inventoryService=t,this._ngZone=n,this.indexs=[0,1,2,3,4,5,6,7,8],this._timerTick=3}ngOnInit(){this._inventoryService.tradeController=this}ngOnDestroy(){this._inventoryService.tradeController=null}startTimer(){this._timer&&(clearInterval(this._timer),this._timer=null),this._timerTick=3,this._timer=setInterval(this.progressTimer.bind(this),1e3)}resetTimer(){this._timer&&clearInterval(this._timer),this._timerTick=-1}progressTimer(){-1!==this._timerTick?(this._timerTick--,0===this._timerTick&&this._inventoryService.controller.tradeService.onTimerFinished()):this.resetTimer()}getIconUrl(e){return e&&e.iconUrl||null}removeItem(e){this._inventoryService.controller.tradeService.removeItem(e)}progressTrade(){switch(this._inventoryService.controller.tradeService.state){case i.a.TRADING_STATE_RUNNING:this.otherUserItems.length||this.ownUserAccepts||this._notificationService.alert("${inventory.trading.warning.other_not_offering}"),this.ownUserAccepts?this._inventoryService.controller.tradeService.sendTradingUnacceptComposer():this._inventoryService.controller.tradeService.sendTradingAcceptComposer();break;case i.a.TRADING_STATE_CONFIRMING:this._inventoryService.controller.tradeService.sendTradingConfirmComposer()}}cancelTrade(){switch(this._inventoryService.controller.tradeService.state){case i.a.TRADING_STATE_RUNNING:this._inventoryService.controller.tradeService.sendTradingCloseComposer();break;case i.a.TRADING_STATE_CONFIRMING:this._inventoryService.controller.tradeService.sendTradingCancelComposer()}}get timerTick(){return this._timerTick}get state(){return this._inventoryService.controller.tradeService.state}get ownUserName(){return this._inventoryService.controller.tradeService.ownUserName}get ownUserItems(){return this._inventoryService.controller.tradeService.ownUserItems.getValues()}get ownUserNumItems(){return this._inventoryService.controller.tradeService.ownUserNumItems}get ownUserNumCredits(){return this._inventoryService.controller.tradeService.ownUserNumCredits}get ownUserAccepts(){return this._inventoryService.controller.tradeService.ownUserAccepts}get otherUserName(){return this._inventoryService.controller.tradeService.otherUserName}get otherUserItems(){return this._inventoryService.controller.tradeService.otherUserItems.getValues()}get otherUserNumItems(){return this._inventoryService.controller.tradeService.otherUserNumItems}get otherUserNumCredits(){return this._inventoryService.controller.tradeService.otherUserNumCredits}get otherUserAccepts(){return this._inventoryService.controller.tradeService.otherUserAccepts}}return e.COLOR_LOCKED=4284532064,e.COLOR_UNLOCKED=2577770,e.ALERT_SCAM=0,e.ALERT_OTHER_CANCELLED=1,e.ALERT_ALREADY_OPEN=2,e.\u0275fac=function(t){return new(t||e)(r.Yb(s.a),r.Yb(c.a),r.Yb(r.H))},e.\u0275cmp=r.Sb({type:e,selectors:[["","nitro-inventory-trading-component",""]],attrs:d,decls:40,vars:28,consts:[[1,"row","mt-3"],[1,"d-flex","flex-column","col-6"],[1,"badge","badge-secondary","w-100","p-1","mb-1"],[1,"d-flex","mb-1"],[1,"grid-container","position-relative"],[1,"grid-items","grid-3"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"d-flex"],[1,"icon","w-100",3,"ngClass"],[1,"d-flex","justify-content-center","align-items-center","badge","badge-secondary","w-100","p-1","m-1"],[1,"d-flex","col-12","justify-content-between"],[3,"ngSwitch"],["type","button","class","btn btn-secondary",3,"disabled","click",4,"ngSwitchCase"],["type","button","class","btn btn-secondary","disabled","",4,"ngSwitchCase"],["type","button","class","btn btn-secondary",3,"click",4,"ngSwitchCase"],["type","button",1,"btn","btn-danger",3,"click"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button","class","position-relative btn btn-secondary align-items-end detail-info",3,"ngClass",4,"ngIf"],["type","button","class","position-relative btn btn-secondary align-items-end detail-info has-image",4,"ngIf"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info",3,"ngClass"],[1,"position-absolute","detail-info","has-image",3,"ngStyle"],["class","position-absolute btn btn-sm btn-primary px-1 py-0 rounded count",4,"ngIf"],["class","position-absolute unique-counter",3,"innerHtml",4,"ngIf"],[1,"position-absolute","btn","btn-sm","btn-primary","px-1","py-0","rounded","count"],[1,"position-absolute","unique-counter",3,"innerHtml"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image"],["type","button",1,"btn","btn-secondary",3,"disabled","click"],["type","button","disabled","",1,"btn","btn-secondary"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(e,t){1&e&&(r.dc(0,"div",0),r.dc(1,"div",1),r.dc(2,"div",2),r.Wc(3),r.rc(4,"translate"),r.cc(),r.dc(5,"div",3),r.dc(6,"div",4),r.dc(7,"div",5),r.Uc(8,_,3,2,"div",6),r.cc(),r.cc(),r.cc(),r.dc(9,"div",7),r.Zb(10,"i",8),r.dc(11,"div",9),r.Wc(12),r.cc(),r.dc(13,"div",9),r.Wc(14),r.cc(),r.cc(),r.cc(),r.dc(15,"div",1),r.dc(16,"div",2),r.Wc(17),r.cc(),r.dc(18,"div",3),r.dc(19,"div",4),r.dc(20,"div",5),r.Uc(21,y,3,2,"div",6),r.cc(),r.cc(),r.cc(),r.dc(22,"div",7),r.Zb(23,"i",8),r.dc(24,"div",9),r.Wc(25),r.cc(),r.dc(26,"div",9),r.Wc(27),r.cc(),r.cc(),r.cc(),r.cc(),r.dc(28,"div",0),r.dc(29,"div",10),r.bc(30,11),r.Uc(31,I,3,4,"button",12),r.Uc(32,w,3,4,"button",12),r.Uc(33,C,3,5,"button",13),r.Uc(34,R,3,3,"button",14),r.Uc(35,T,3,3,"button",13),r.Uc(36,O,3,3,"button",13),r.ac(),r.dc(37,"button",15),r.nc("click",function(){return t.cancelTrade()}),r.Wc(38),r.rc(39,"translate"),r.cc(),r.cc(),r.cc()),2&e&&(r.Kb(3),r.Xc(r.sc(4,18,"inventory.trading.you")),r.Kb(5),r.yc("ngForOf",t.indexs),r.Kb(2),r.yc("ngClass",r.Dc(22,M,!t.ownUserAccepts,t.ownUserAccepts)),r.Kb(2),r.Yc("",t.ownUserNumItems," items"),r.Kb(2),r.Yc("",t.ownUserNumCredits," credits"),r.Kb(3),r.Xc(t.otherUserName),r.Kb(4),r.yc("ngForOf",t.indexs),r.Kb(2),r.yc("ngClass",r.Dc(25,M,!t.otherUserAccepts,t.otherUserAccepts)),r.Kb(2),r.Yc("",t.otherUserNumItems," items"),r.Kb(2),r.Yc("",t.otherUserNumCredits," credits"),r.Kb(3),r.yc("ngSwitch",t.state),r.Kb(1),r.yc("ngSwitchCase",0),r.Kb(1),r.yc("ngSwitchCase",1),r.Kb(1),r.yc("ngSwitchCase",2),r.Kb(1),r.yc("ngSwitchCase",3),r.Kb(1),r.yc("ngSwitchCase",4),r.Kb(1),r.yc("ngSwitchCase",5),r.Kb(2),r.Xc(r.sc(39,20,"generic.cancel")))},directives:[o.m,o.l,o.p,o.q,o.n,o.o],pipes:[a.a,l.a],encapsulation:2}),e})()},xPcM:function(e,t,n){"use strict";n.d(t,"a",function(){return i});let i=(()=>{class e{}return e.TOGGLE_FURNI_STATE=0,e.RESET=1,e.SET_FURNI_STATE=3,e.MOVE_FURNI=4,e.GIVE_SCORE=6,e.CHAT=7,e.TELEPORT=8,e.JOIN_TEAM=9,e.LEAVE_TEAM=10,e.CHASE=11,e.FLEE=12,e.MOVE_TO_DIRECTION=13,e.GIVE_SCORE_TO_PREDEFINED_TEAM=14,e.TOGGLE_TO_RANDOM_STATE=15,e.MOVE_FURNI_TO=16,e.GIVE_REWARD=17,e.CALL_ANOTHER_STACK=18,e.KICK_FROM_ROOM=19,e.MUTE_USER=20,e.BOT_TELEPORT=21,e.BOT_MOVE=22,e.BOT_TALK=23,e.BOT_GIVE_HAND_ITEM=24,e.BOT_FOLLOW_AVATAR=25,e.BOT_CHANGE_FIGURE=26,e.BOT_TALK_DIRECT_TO_AVTR=27,e})()},ygsp:function(e,t,n){"use strict";n.d(t,"b",function(){return h}),n.d(t,"a",function(){return m});var i=n("jzQx"),r=n("jl72"),s=n("fXoL"),c=n("Ci1R"),o=n("sXB4"),a=n("ofXK"),l=n("VLg1"),d=n("0DQ5");function u(e,t){if(1&e){const e=s.ec();s.dc(0,"button",6),s.nc("click",function(){s.Lc(e);const n=t.index;return s.qc().choose(n)}),s.Wc(1),s.rc(2,"translate"),s.cc()}if(2&e){const e=t.$implicit;s.yc("ngClass",e.classes),s.Kb(1),s.Xc(s.sc(2,2,e.localizationKey))}}let h=(()=>{class e extends r.a{constructor(){super(...arguments),this.callback=null,this.choices=[]}choose(e){try{this.choices[e].callback()}catch(t){i.a.log(t)}this.close()}}return e.\u0275fac=function(t){return g(t||e)},e.\u0275cmp=s.Sb({type:e,selectors:[["ng-component"]],features:[s.Hb],decls:8,vars:5,consts:[["dragHandle",".card-header","noMemory","true","center","true",1,"card","nitro-alert","nitro-alert-generic-component",3,"bringToTop","draggable"],[1,"card-header","text-center"],[1,"card-body"],[1,"mb-3",3,"innerHTML"],[1,"btn-group","w-100"],["type","button","class","btn w-100",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"btn","w-100",3,"ngClass","click"]],template:function(e,t){1&e&&(s.dc(0,"div",0),s.dc(1,"div",1),s.Wc(2),s.cc(),s.dc(3,"div",2),s.Zb(4,"div",3),s.rc(5,"keepHtml"),s.dc(6,"div",4),s.Uc(7,u,3,4,"button",5),s.cc(),s.cc(),s.cc()),2&e&&(s.Kb(2),s.Yc(" ",t.title," "),s.Kb(2),s.yc("innerHTML",s.sc(5,3,t.message),s.Mc),s.Kb(3),s.yc("ngForOf",t.choices))},directives:[c.a,o.a,a.m,a.l],pipes:[l.a,d.a],encapsulation:2}),e})();const g=s.fc(h);class m{constructor(e,t,n=[]){this._localizationKey=e,this._callback=t,this._classes=n}get localizationKey(){return this._localizationKey}get callback(){return this._callback}get classes(){return this._classes}}},ylpd:function(e,t,n){"use strict";n.d(t,"a",function(){return i});let i=(()=>{class e{}return e.DEFAULT=1,e.WALL_PAPER=2,e.FLOOR=3,e.LANDSCAPE=4,e.POST_IT=5,e.POSTER=6,e.SOUND_SET=7,e.TRAX_SONG=8,e.PRESENT=9,e.ECOTRON_BOX=10,e.TROPHY=11,e.CREDIT_FURNI=12,e.PET_SHAMPOO=13,e.PET_CUSTOM_PART=14,e.PET_CUSTOM_PART_SHAMPOO=15,e.PET_SADDLE=16,e.GUILD_FURNI=17,e.GAME_FURNI=18,e.MONSTERPLANT_SEED=19,e.MONSTERPLANT_REVIVAL=20,e.MONSTERPLANT_REBREED=21,e.MONSTERPLANT_FERTILIZE=22,e.FIGURE_PURCHASABLE_SET=23,e})()},ywHV:function(e,t,n){"use strict";n.d(t,"a",function(){return H});var i=n("wYOr"),r=n("VfYU"),s=n("dILE"),c=n("pzlI"),o=n("kXo0"),a=n("S3d8"),l=n("5fGs"),d=n("ReRT"),u=n("1nTM"),h=n("wnz0"),g=n("6Xys"),m=n("MKin"),f=n("J6Lb"),p=n("ERz6"),_=n("K0fx"),b=n("NJRV"),v=n("udkx"),E=n("JeyI"),S=n("/Khx"),y=n("MyXM"),I=n("ZaDA"),w=n("0Ucc"),C=n("pKTu"),R=n("ND/x"),T=n("h2sW"),O=n("ERiI"),M=n("UKnz"),U=n("IZE1"),x=n("TeCb"),A=n("Mzsi"),D=n("bwAN"),L=n("NGds"),k=n("M0E0"),P=n("w9ZJ");class N{constructor(e){if(this._isEnabled=!1,this._price=null,this._stuffTypes=null,this._boxTypes=null,this._ribbonTypes=null,this._defaultStuffTypes=null,!e)return;const t=e.getParser();t&&(this._isEnabled=t.isEnabled,this._price=t.price,this._boxTypes=t.boxTypes,this._ribbonTypes=t.ribbonTypes,this._stuffTypes=t.giftWrappers,this._defaultStuffTypes=t.giftFurnis)}get isEnabled(){return this._isEnabled}get price(){return this._price}get stuffTypes(){return this._stuffTypes}get boxTypes(){return this._boxTypes}get ribbonTypes(){return this._ribbonTypes}get defaultStuffTypes(){return this._defaultStuffTypes}}class W{}var K=n("fXoL"),F=n("WnqX"),V=n("l1qq"),q=n("b0LC");let H=(()=>{class e{constructor(e,t,n,i){this._settingsService=e,this._notificationService=t,this._soundService=n,this._ngZone=i,this._messages=[],this._component=null,this._giftConfiguratorComponent=null,this._catalogMode=-1,this._catalogRoot=null,this._activePage=null,this._clubGiftsParser=null,this._activePageData=null,this._manuallyCollapsed=[],this._isLoading=!1,this._purse=new W,this._clubOffers=[],this._vipTemplate=null,this._groupFurniTemplate=null,this._loaded=!1,this._giftWrappingConfiguration=null,this._offersToRoots=null,this.registerMessages()}ngOnDestroy(){this.unregisterMessages(),this._vipTemplate=null,this._groupFurniTemplate=null}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new r.a(this.onCatalogClubEvent.bind(this)),new l.a(this.onCatalogModeEvent.bind(this)),new d.a(this.onCatalogPageEvent.bind(this)),new u.a(this.onCatalogPagesEvent.bind(this)),new h.a(this.onCatalogPurchaseEvent.bind(this)),new g.a(this.onCatalogPurchaseFailedEvent.bind(this)),new m.a(this.onCatalogPurchaseUnavailableEvent.bind(this)),new _.a(this.onCatalogSearchEvent.bind(this)),new b.a(this.onCatalogSoldOutEvent.bind(this)),new v.a(this.onCatalogUpdatedEvent.bind(this)),new a.a(this.onCatalogGroupsEvent.bind(this)),new E.a(this.onUserSubscriptionEvent.bind(this)),new E.a(this.onUserSubscriptionEvent.bind(this)),new c.a(this.onGiftConfigurationEvent.bind(this)),new o.a(this.onGiftUsernameUnavailableEvent.bind(this)),new s.a(this.onCatalogClubGiftsEvent.bind(this)),new f.a(this.onCatalogRedeemVoucherError.bind(this)),new p.a(this.onCatalogRedeemVoucherOk.bind(this))];for(const e of this._messages)D.a.instance.communication.registerMessageEvent(e);D.a.instance.communication.connection.send(new R.a)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const e of this._messages)D.a.instance.communication.removeMessageEvent(e);this._messages=[]})}onCatalogClubEvent(e){if(!e||!e.getParser()||!this._vipTemplate)return;const t=e.getParser().offers;this._clubOffers=t,this._vipTemplate.setOffers(t)}onCatalogClubGiftsEvent(e){if(!e)return;const t=e.getParser();t&&(this._clubGiftsParser=t)}registerVipBuyTemplate(e){this._vipTemplate=e}registerGroupFurniTemplate(e){this._groupFurniTemplate=e}onGiftConfigurationEvent(e){this._giftWrappingConfiguration=new N(e)}onGiftUsernameUnavailableEvent(e){this._giftConfiguratorComponent&&this._giftConfiguratorComponent.showUsernameNotFoundDialog()}onCatalogModeEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>this._catalogMode=t.mode)}onCatalogPageEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>{this._activePage=t,this._component&&this._component.setupLayout(),this._isLoading=!1})}onCatalogPagesEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>{this._catalogRoot=t.root,this.setOffersToNodes(this._catalogRoot),this._isLoading=!1,this._component&&this._component.selectFirstTab()})}onCatalogPurchaseEvent(e){e&&e.getParser()&&(this._ngZone.run(()=>this._component&&this._component.hidePurchaseConfirmation()),this._soundService.playInternalSample(k.a.CATALOG_PURCHASE))}onCatalogPurchaseFailedEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>{this._notificationService.alert("${catalog.alert.purchaseerror.description."+t.code+"}","${catalog.alert.purchaseerror.title}"),this._component&&this._component.hidePurchaseConfirmation()})}onCatalogPurchaseUnavailableEvent(e){e&&e.getParser()}onCatalogSearchEvent(e){if(!(this._activePage instanceof P.a))return;if(!e)return;const t=e.getParser();t&&t.offer&&this._ngZone.run(()=>this._component&&this._component.selectOffer(t.offer))}onCatalogSoldOutEvent(e){e&&e.getParser()&&this._ngZone.run(()=>{this._notificationService.alert("${catalog.alert.limited_edition_sold_out.message}","${catalog.alert.limited_edition_sold_out.title}"),this._component&&this._component.hidePurchaseConfirmation()})}onCatalogGroupsEvent(e){if(!e)return;const t=e.getParser();t&&this._ngZone.run(()=>{this._groupFurniTemplate.groups=t.groups})}onUserSubscriptionEvent(e){if(!e)return;const t=e.getParser();t&&(this._purse.clubDays=Math.max(0,t.days),this._purse.clubPeriods=Math.max(0,t.months),this._purse.isVip=t.isVip,this._purse.pastClubDays=t.pastVIPDays,this._purse.Str_14389=t.years==A.a._Str_14729,this._purse.minutesUntilExpiration=t.totalSeconds)}onCatalogUpdatedEvent(e){e&&e.getParser()&&this._ngZone.run(()=>{this._isLoading=!1,this._catalogMode=-1,this._catalogRoot=null,this._activePage=null,this._activePageData=null,this._component&&this._component.reset(),this._settingsService.catalogVisible&&(this._component.hide(),this._notificationService.alert("${catalog.alert.published.description}","${catalog.alert.published.title}"))})}onCatalogRedeemVoucherError(e){if(!e)return;const t=e.getParser();t&&this._settingsService.catalogVisible&&this._notificationService.alert("${catalog.alert.voucherredeem.error.description."+t.errorCode+"}","${catalog.alert.voucherredeem.error.title}")}onCatalogRedeemVoucherOk(e){e&&e.getParser()&&this._settingsService.catalogVisible&&this._notificationService.alert("${catalog.alert.voucherredeem.ok.description}","${catalog.alert.voucherredeem.ok.title}")}setupCatalog(e){e&&(this._isLoading=!0,this._catalogRoot=null,this._activePage=null,this._activePageData=null,this._component&&this._component.reset(),D.a.instance.communication.connection.send(new y.a(e)))}requestGroups(){D.a.instance.communication.connection.send(new S.a)}requestPage(t){t&&this.canSelectPage(t)&&(this._activePageData=t,-1!==t.pageId&&(this._isLoading=!0,this.requestPageData(t.pageId,-1,e.MODE_NORMAL)))}requestPageData(e,t,n){D.a.instance.communication.connection.send(new I.a(e,t,n))}isDescendant(e,t){if(!e||!t)return!1;if(e===t)return!0;if(e.children.length)for(const n of e.children)if(n){if(n===t)return!0;if(this.isDescendant(n,t))return!0}return!1}getFurnitureDataForProductOffer(e){if(!e)return null;let t=null;switch(e.productType.toUpperCase()){case L.a.FLOOR:t=D.a.instance.sessionDataManager.getFloorItemData(e.furniClassId);break;case L.a.WALL:t=D.a.instance.sessionDataManager.getWallItemData(e.furniClassId)}return t}getProductDataForLocalization(e){return e?D.a.instance.sessionDataManager.getProductData(e):null}getFurnitureDataIconUrl(e){if(!e)return null;const t=D.a.instance.roomEngine.roomContentLoader.getAssetUrls(e.className,e.colorIndex.toString(),!0);return t&&t[0]||null}purchase(e,t,n,i=null){e&&t&&n&&this.purchaseById(e.pageId,t.offerId,n,i)}purchaseGiftOffer(e,t,n,i,r,s,c,o,a){D.a.instance.communication.connection.send(new C.a(e.pageId,t.offerId,n,i,r,s,c,o,a))}purchaseById(e,t,n,i=null){e&&t&&n&&D.a.instance.communication.connection.send(new w.a(e,t,i,n))}requestOffers(e){D.a.instance.communication.connection.send(new O.a(e))}requestClubGifts(){D.a.instance.communication.connection.send(new T.a)}redeemVoucher(e){e&&0!==e.trim().length&&D.a.instance.communication.connection.send(new U.a(e))}manuallyCollapsePage(e){const t=this._manuallyCollapsed.indexOf(e);-1===t?this._manuallyCollapsed.push(e):this._manuallyCollapsed.splice(t,1)}canSelectPage(e){return!(!e||!e.visible)}get component(){return this._component}set component(e){this._component=e}set giftConfiguratorComponent(e){this._giftConfiguratorComponent=e}get catalogMode(){return this._catalogMode}get catalogRoot(){return this._catalogRoot}get activePage(){return this._activePage}get activePageData(){return this._activePageData}get manuallyCollapsed(){return this._manuallyCollapsed}get purse(){return this._purse}get vipOffers(){return this._clubOffers}get giftWrapperConfiguration(){return this._giftWrappingConfiguration}getOfferPages(e){if(!this._catalogRoot||!this._offersToRoots)return null;const t=this._offersToRoots.getValue(e);if(!t||!t.length)return null;const n=[];for(const i of t)i&&i.visible&&n.push(i);return n.length?n:null}setOffersToNodes(e){if(e){if(this._offersToRoots||(this._offersToRoots=new i.a),e.offerIds&&e.offerIds.length)for(const t of e.offerIds){let n=this._offersToRoots.getValue(t);n||(n=[],this._offersToRoots.add(t,n)),n.indexOf(e)>=0||n.push(e)}if(e.children&&e.children.length)for(const t of e.children)t&&this.setOffersToNodes(t)}}setSearchPage(e){const t=new i.a;for(const n of e){const e=[this.getOfferPages(n.purchaseOfferId),this.getOfferPages(n.rentOfferId)];for(const n of e)if(n&&n.length>0)for(const e of n)t.hasKey(e.pageId)||t.add(e.pageId,e)}this._searchResultsPages=new x.a(t.getValues()),this._activePage=new P.a(e)}requestOfferData(e){D.a.instance.communication.connection.send(new M.a(e))}get clubGiftsParser(){return this._clubGiftsParser}hasClubDays(){return!!this._purse&&this._purse.clubDays>0}get searchResults(){return this._searchResultsPages}clearSearchResults(){this._searchResultsPages=null,this.component&&this.component.reselectCurrentTab()}}return e.MODE_NORMAL="NORMAL",e.\u0275fac=function(t){return new(t||e)(K.kc(F.a),K.kc(V.a),K.kc(q.a),K.kc(K.H))},e.\u0275prov=K.Ub({token:e,factory:e.\u0275fac}),e})()},zMPl:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("AY3i"),r=n("gKK4"),s=n("VFvI"),c=n("fXoL");let o=(()=>{class e extends r.a{constructor(){super(...arguments),this.requireAll="0"}get code(){return e.CODE}get requiresFurni(){return i.a._Str_4873}onEditStart(e){this.requireAll=e.intData.length>0&&1===e.intData[0]?"1":"0"}readIntegerParamsFromForm(){return["1"===this.requireAll?1:0]}get hasSpecialInputs(){return!0}}return e.CODE=s.a.HAS_STACKED_FURNIS,e.\u0275fac=function(t){return a(t||e)},e.\u0275cmp=c.Sb({type:e,selectors:[["ng-component"]],features:[c.Hb],decls:13,vars:11,consts:[[1,"form-check"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.dc(0,"nitro-wired-base-component"),c.Wc(1),c.rc(2,"translate"),c.dc(3,"div",0),c.dc(4,"input",1),c.nc("ngModelChange",function(e){return t.requireAll=e}),c.cc(),c.dc(5,"label",2),c.Wc(6),c.rc(7,"translate"),c.cc(),c.cc(),c.dc(8,"div",0),c.dc(9,"input",3),c.nc("ngModelChange",function(e){return t.requireAll=e}),c.cc(),c.dc(10,"label",2),c.Wc(11),c.rc(12,"translate"),c.cc(),c.cc(),c.cc()),2&e&&(c.Kb(1),c.Yc(" ",c.sc(2,5,"wiredfurni.params.requireall")," "),c.Kb(3),c.yc("ngModel",t.requireAll),c.Kb(2),c.Xc(c.sc(7,7,"wiredfurni.params.requireall.0")),c.Kb(3),c.yc("ngModel",t.requireAll),c.Kb(2),c.Xc(c.sc(12,9,"wiredfurni.params.requireall.1")))},encapsulation:2}),e})();const a=c.fc(o)},zUnb:function(e,t,n){"use strict";n.r(t);var i=n("fXoL");n("LbVS");var r=n("jhN1"),s=n("R1ws"),c=n("Sy1n"),o=n("mgaL"),a=n("ofXK"),l=n("3Pt+"),d=n("1kSV"),u=n("dbUT"),h=n("eaoH"),g=n("oOf3"),m=n("Kdsb"),f=n("5eHb"),p=n("ieH7"),_=n("b0LC");const b={suppressScrollX:!0};let v=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},providers:[{provide:m.a,useValue:b},_.a,p.a],imports:[[r.a,s.a,a.b,l.h,l.s,f.a.forRoot(),d.f,d.l,d.i,g.a,o.a,m.c,u.b.forRoot(),h.b,d.j],a.b,l.h,l.s,f.a,d.f,d.l,d.i,g.a,o.a,m.c,u.b,h.b,d.j,r.a]}),e})();var E=n("OD84");let S=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},providers:[E.a],imports:[[v]]}),e})();var y=n("OMsP"),I=n("N1S/");const w=["nitro-avatar-model-viewer-component",""],C=function(e){return{active:e}},R=function(e){return{selected:e}};function T(e,t){if(1&e){const e=i.ec();i.dc(0,"button",3),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc(2).selectCategory(n.name)}),i.Zb(1,"i",4),i.cc()}if(2&e){const e=t.$implicit,n=i.qc(2);i.yc("ngClass",i.Cc(5,C,n.activeCategory===e)),i.Kb(1),i.Nb("icon ",e.name,"-icon"),i.yc("ngClass",i.Cc(7,R,n.activeCategory===e))}}function O(e,t){if(1&e&&(i.bc(0),i.Uc(1,T,2,9,"button",2),i.ac()),2&e){const e=i.qc();i.Kb(1),i.yc("ngForOf",e.categories.getValues())}}function M(e,t){if(1&e){const e=i.ec();i.bc(0),i.dc(1,"button",3),i.nc("click",function(){return i.Lc(e),i.qc().selectGender("M")}),i.Zb(2,"i",5),i.cc(),i.dc(3,"button",3),i.nc("click",function(){return i.Lc(e),i.qc().selectGender("F")}),i.Zb(4,"i",6),i.cc(),i.ac()}if(2&e){const e=i.qc();i.Kb(1),i.yc("ngClass",i.Cc(4,C,"M"===e.gender)),i.Kb(1),i.yc("ngClass",i.Cc(6,R,"M"===e.gender)),i.Kb(1),i.yc("ngClass",i.Cc(8,C,"F"===e.gender)),i.Kb(1),i.yc("ngClass",i.Cc(10,R,"F"===e.gender))}}const U=function(e,t){return{"col-6 pr-1":e,"flex-grow-1":t}};function x(e,t){if(1&e&&(i.dc(0,"div",12),i.Zb(1,"div",13),i.cc()),2&e){const e=i.qc(2);i.yc("ngClass",i.Dc(6,U,e.maxPaletteCount>=2,e.maxPaletteCount<=1)),i.Kb(1),i.yc("model",e.model)("category",e.activeCategory)("paletteSet",e.activeCategory.getPalette(0))("paletteIndex",0)("maxPaletteCount",e.maxPaletteCount)}}function A(e,t){if(1&e&&(i.dc(0,"div",14),i.Zb(1,"div",13),i.cc()),2&e){const e=i.qc(2);i.Kb(1),i.yc("model",e.model)("category",e.activeCategory)("paletteSet",e.activeCategory.getPalette(1))("paletteIndex",1)("maxPaletteCount",e.maxPaletteCount)}}function D(e,t){if(1&e&&(i.bc(0),i.dc(1,"div",7),i.Zb(2,"div",8),i.cc(),i.dc(3,"div",9),i.Uc(4,x,2,9,"div",10),i.Uc(5,A,2,5,"div",11),i.cc(),i.ac()),2&e){const e=i.qc();i.Kb(2),i.yc("model",e.model)("category",e.activeCategory)("partSet",e.activeCategory.parts),i.Kb(2),i.yc("ngIf",e.maxPaletteCount>=1),i.Kb(1),i.yc("ngIf",2===e.maxPaletteCount)}}let L=(()=>{class e{constructor(e){this._avatarEditorService=e,this.model=null,this.gender=null}ngOnChanges(e){this.prepareModel()}prepareModel(){this.model&&(this.model.setViewer(this),this.model.init(),this._activeCategory=null,this.selectFirstCategory())}selectFirstCategory(){if(this.model)for(const e of this.model.categories.getKeys())if(e)return void this.selectCategory(e)}selectCategory(e){if(!this.model||!e)return;const t=this.model.categories.getValue(e);if(t){t.init(),this._activeCategory=t;for(const e of this._activeCategory.parts)if(e&&e.isSelected){this.model.maxPaletteCount=e.colorLayerCount;break}}}selectGender(e){this.model&&e&&this._avatarEditorService.component&&(this._avatarEditorService.component.gender=e)}get categories(){return this.model.categories}get activeCategory(){return this._activeCategory}get canSetGender(){return this.model&&this.model.canSetGender}get maxPaletteCount(){return this.model&&this.model.maxPaletteCount||1}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(I.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-avatar-model-viewer-component",""]],inputs:{model:"model",gender:"gender"},features:[i.Ib],attrs:w,decls:4,vars:3,consts:[[1,"btn-group","w-100","my-1",2,"min-height","45px"],[4,"ngIf"],["type","button","class","btn btn-secondary d-flex justify-content-center align-items-center",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-secondary","d-flex","justify-content-center","align-items-center",3,"ngClass","click"],[3,"ngClass"],[1,"icon","male-icon",3,"ngClass"],[1,"icon","female-icon",3,"ngClass"],[1,"d-flex"],["nitro-avatar-set-viewer-component","",1,"w-100",3,"model","category","partSet"],[1,"d-flex","no-gutters","mt-1"],["class","d-flex flex-column",3,"ngClass",4,"ngIf"],["class","d-flex col-6 pl-1 flex-column",4,"ngIf"],[1,"d-flex","flex-column",3,"ngClass"],["nitro-avatar-palette-viewer-component","",3,"model","category","paletteSet","paletteIndex","maxPaletteCount"],[1,"d-flex","col-6","pl-1","flex-column"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.Uc(1,O,2,1,"ng-container",1),i.Uc(2,M,5,12,"ng-container",1),i.cc(),i.Uc(3,D,6,5,"ng-container",1)),2&e&&(i.Kb(1),i.yc("ngIf",t.categories.length>1),i.Kb(1),i.yc("ngIf",t.canSetGender),i.Kb(1),i.yc("ngIf",t.activeCategory))},encapsulation:2}),e})();const k=["nitro-avatar-palette-viewer-component",""],P=function(e){return{active:e}},N=function(e){return{"background-color":e}};function W(e,t){if(1&e){const e=i.ec();i.dc(0,"div",3),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().selectPalette(n)}),i.Zb(1,"button",4),i.cc()}if(2&e){const e=t.$implicit;i.Kb(1),i.yc("ngClass",i.Cc(2,P,e.isSelected))("ngStyle",i.Cc(4,N,e.color))}}const K=function(e,t){return{"grid-6":e,"grid-12":t}};let F=(()=>{class e{constructor(){this.model=null,this.category=null,this.paletteSet=[],this.paletteIndex=-1,this.maxPaletteCount=1}ngOnChanges(e){e.category&&this.perfectScrollBar&&this.perfectScrollBar.directiveRef&&this.perfectScrollBar.directiveRef.scrollToTop()}selectPalette(e){if(!(this.model&&this.category&&this.paletteSet&&e))return;if(!e||!this.model)return;const t=this.paletteSet.indexOf(e);-1!==t&&this.model.selectColor(this.category.name,t,this.paletteIndex)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-avatar-palette-viewer-component",""]],viewQuery:function(e,t){if(1&e&&i.cd(m.b,1),2&e){let e;i.Hc(e=i.oc())&&(t.perfectScrollBar=e.first)}},inputs:{model:"model",category:"category",paletteSet:"paletteSet",paletteIndex:"paletteIndex",maxPaletteCount:"maxPaletteCount"},features:[i.Ib],attrs:k,decls:3,vars:5,consts:[[1,"grid-container","palette-grid",2,"min-height","84px","max-height","84px","height","84px"],[1,"grid-items",3,"ngClass"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button",1,"btn","btn-primary","detail-info",3,"ngClass","ngStyle"]],template:function(e,t){1&e&&(i.dc(0,"perfect-scrollbar",0),i.dc(1,"div",1),i.Uc(2,W,2,6,"div",2),i.cc(),i.cc()),2&e&&(i.Kb(1),i.yc("ngClass",i.Dc(2,K,t.maxPaletteCount>=2,t.maxPaletteCount<=1)),i.Kb(1),i.yc("ngForOf",t.paletteSet))},directives:[m.b,a.l,a.m,a.o],encapsulation:2}),e})();const V=["nitro-avatar-set-viewer-component",""];function q(e,t){1&e&&i.Zb(0,"i",6)}const H=function(e){return{active:e}},B=function(e){return{"background-image":e}};function G(e,t){if(1&e){const e=i.ec();i.dc(0,"div",3),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().selectPart(n)}),i.dc(1,"button",4),i.Uc(2,q,1,0,"i",5),i.cc(),i.cc()}if(2&e){const e=t.$implicit;i.Kb(1),i.yc("ngClass",i.Cc(3,H,e.isSelected))("ngStyle",e.imageUrl&&i.Cc(5,B,"url("+e.imageUrl+")")),i.Kb(1),i.yc("ngIf",e.isClear)}}let Z=(()=>{class e{constructor(){this.model=null,this.category=null,this.partSet=[]}ngOnChanges(e){e.category&&this.perfectScrollBar&&this.perfectScrollBar.directiveRef&&this.perfectScrollBar.directiveRef.scrollToTop()}selectPart(e){if(!(this.model&&this.category&&this.partSet&&e))return;const t=this.partSet.indexOf(e);-1!==t&&this.model.selectPart(this.category.name,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-avatar-set-viewer-component",""]],viewQuery:function(e,t){if(1&e&&i.cd(m.b,1),2&e){let e;i.Hc(e=i.oc())&&(t.perfectScrollBar=e.first)}},inputs:{model:"model",category:"category",partSet:"partSet"},features:[i.Ib],attrs:V,decls:3,vars:1,consts:[[1,"grid-container",2,"min-height","158px","max-height","158px","height","158px"],[1,"grid-items","grid-6"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button",1,"btn","btn-secondary","detail-info","has-image",3,"ngClass","ngStyle"],["class","fas fa-times h5 m-0",4,"ngIf"],[1,"fas","fa-times","h5","m-0"]],template:function(e,t){1&e&&(i.dc(0,"perfect-scrollbar",0),i.dc(1,"div",1),i.Uc(2,G,3,7,"div",2),i.cc(),i.cc()),2&e&&(i.Kb(2),i.yc("ngForOf",t.partSet))},directives:[m.b,a.m,a.l,a.o,a.n],encapsulation:2}),e})();var X=n("mjBu");const j=["nitro-avatar-wardrobe-component",""];function Y(e,t){if(1&e){const e=i.ec();i.dc(0,"div",6),i.dc(1,"div",7),i.dc(2,"button",8),i.nc("click",function(){i.Lc(e);const n=t.index;return i.qc().updateLook(n+1)}),i.Zb(3,"i",5),i.cc(),i.dc(4,"button",8),i.nc("click",function(){i.Lc(e);const n=t.index;return i.qc().loadLook(n+1)}),i.Zb(5,"i",3),i.cc(),i.cc(),i.dc(6,"button",9),i.Zb(7,"div",10),i.cc(),i.cc()}if(2&e){const e=t.index,n=i.qc();i.Kb(7),i.yc("figure",n.getLook(e+1))("direction",4)}}let z=(()=>{class e{constructor(e){this._avatarEditorService=e,this.maxServerPage=1,this.maxClientPage=2,this.looksPerClientPage=5,this.figureData=null,this._currentServerPage=1,this._currentClientPage=1,this._maxLoadedServerPage=1,this._looks=new Map,this._avatarEditorService.wardrobeComponent=this,this._requestLooks(this._currentServerPage)}previousPage(){1!==this._currentClientPage&&this._currentClientPage--}nextPage(){if(this._currentClientPage!==this.maxClientPage&&(this._currentClientPage++,(this._currentClientPage-1)%2==0&&this._currentServerPage<this.maxServerPage)){if(this._currentServerPage++,this._currentServerPage<this._maxLoadedServerPage)return;this._maxLoadedServerPage=this._currentServerPage,this._requestLooks(this._currentServerPage)}}getLook(e){const t=this.getRealIndex(e);return this._looks.has(t)?this._looks.get(t)[0]:null}setLook(e,t,n){this._looks.set(e,[t,n])}updateLook(e){const t=this.getRealIndex(e);this._looks.set(t,[this._avatarEditorService.currentEditorLook,this._avatarEditorService.currentEditorGender]),this._avatarEditorService.setWardrobeSlot(t)}loadLook(e){const t=this.getRealIndex(e);if(!this._looks.has(t))return;const n=this._looks.get(t);this._avatarEditorService.loadAvatarInEditor(n[0],n[1])}counter(){return new Array(this.looksPerClientPage)}getRealIndex(e){return e+(this._currentClientPage-1)*this.looksPerClientPage}_requestLooks(e){this._avatarEditorService.requestWardrobePage(e)}get currentPage(){return this._currentClientPage}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(I.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-avatar-wardrobe-component",""]],inputs:{figureData:"figureData"},attrs:j,decls:8,vars:3,consts:[[1,"d-flex","flex-row","justify-content-between"],[1,"d-flex"],[1,"btn","btn-secondary","btn-sm","h-100",3,"disabled","click"],[1,"fas","fa-chevron-left"],["class","d-flex flex-row",4,"ngFor","ngForOf"],[1,"fas","fa-chevron-right"],[1,"d-flex","flex-row"],[1,"d-flex","flex-column"],[1,"btn","btn-secondary","btn-sm","h-100",3,"click"],[1,"btn","btn-secondary","btn-sm"],["nitro-avatar-image","",1,"d-flex","justify-content-center","nitro-avatar-image",3,"figure","direction"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"button",2),i.nc("click",function(){return t.previousPage()}),i.Zb(3,"i",3),i.cc(),i.cc(),i.Uc(4,Y,8,2,"div",4),i.dc(5,"div",1),i.dc(6,"button",2),i.nc("click",function(){return t.nextPage()}),i.Zb(7,"i",5),i.cc(),i.cc(),i.cc()),2&e&&(i.Kb(2),i.yc("disabled",1===t.currentPage),i.Kb(2),i.yc("ngForOf",t.counter()),i.Kb(2),i.yc("disabled",t.currentPage===t.maxClientPage))},directives:[a.m,X.a],encapsulation:2}),e})();var $=n("Ci1R"),Q=n("sXB4"),J=n("0DQ5");let ee=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},providers:[I.a],imports:[[v]]}),e})();i.Oc(y.a,[a.n,$.a,Q.a,a.m,a.l,L,X.a,z],[J.a]),i.Oc(L,[a.n,a.m,a.l,Z,F],[]);var te=n("VXVv");let ne=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},providers:[te.a],imports:[[v]]}),e})();var ie=n("ywHV");let re=(()=>{class e{constructor(e,t){this._catalogService=e,this._ngZone=t}hide(){this._catalogService.component&&this._catalogService.component.setInsufficientFunds(!1)}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(ie.a),i.Yb(i.H))},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-catalog-confirm-purchase-insufficient-funds"]],decls:16,vars:10,consts:[["dragHandle",".card-header",1,"card","nitro-catalog-confirm-purchase-component",3,"bringToTop","draggable","center"],[1,"card-header"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","card-body"],[1,"d-flex","flex-grow-1","flex-column","justify-content-center","p-2"],[1,"card-footer"],[1,"d-flex","justify-space-between","button-container","btn-group"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Wc(2),i.rc(3,"translate"),i.dc(4,"button",2),i.nc("click",function(){return t.hide()}),i.Zb(5,"i",3),i.cc(),i.cc(),i.dc(6,"div",4),i.dc(7,"div",5),i.dc(8,"p"),i.Wc(9),i.rc(10,"translate"),i.cc(),i.cc(),i.cc(),i.dc(11,"div",6),i.dc(12,"div",7),i.dc(13,"button",8),i.nc("click",function(){return t.hide()}),i.Wc(14),i.rc(15,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&e&&(i.yc("center",!0),i.Kb(2),i.Yc(" ",i.sc(3,4,"catalog.alert.notenough.title")," "),i.Kb(7),i.Xc(i.sc(10,6,"catalog.alert.notenough.credits.description")),i.Kb(5),i.Xc(i.sc(15,8,"catalog.purchase_confirmation.cancel")))},directives:[$.a,Q.a],pipes:[J.a],encapsulation:2}),e})();var se=n("6ZDM"),ce=n("wme0"),oe=n("bwAN"),ae=n("vmGm"),le=n("vGKG");const de=["imageElement"];function ue(e,t){if(1&e&&(i.dc(0,"div",19),i.Wc(1),i.cc()),2&e){const e=i.qc();i.Kb(1),i.Yc("X ",e.quantity,"")}}function he(e,t){if(1&e&&(i.dc(0,"div",20),i.Zb(1,"div",21),i.Wc(2),i.cc()),2&e){const e=i.qc();i.Kb(1),i.yc("type",-1),i.Kb(1),i.Yc(" ",e.costCredits," ")}}function ge(e,t){1&e&&(i.dc(0,"p",22),i.Wc(1,"+"),i.cc())}function me(e,t){if(1&e&&(i.dc(0,"div",20),i.Zb(1,"div",21),i.Wc(2),i.cc()),2&e){const e=i.qc();i.Kb(1),i.yc("type",e.pointsType),i.Kb(1),i.Yc(" ",e.costPoints," ")}}const fe=function(e){return{"background-image":e}};let pe=(()=>{class e{constructor(e,t){this._catalogService=e,this._ngZone=t,this.page=null,this.offer=null,this.giftOffer=null,this.quantity=1,this.extra=null,this.completed=!1,this._imageUrl=""}ngOnChanges(e){const t=e.offer.currentValue;t&&e.offer.previousValue!==t&&this.refresh()}hide(){this._catalogService.component&&this._catalogService.component.hidePurchaseConfirmation()}refresh(){this.refreshImage()}refreshImage(){this._ngZone.runOutsideAngular(()=>{this._imageUrl="";const e=this._catalogService.component&&this._catalogService.component.roomPreviewer;if(!e)return;const t=e.getRoomPreviewObject();if(t){const e=t.visualization.getImage(16711680,-1),n=ae.a.generateImage(e);n&&(this._imageUrl=n.src)}})}purchase(){this.giftOffer?this._catalogService.component&&this._catalogService.component.makeGiftConfiguratorVisible():this._catalogService.purchase(this.page,this.offer,this.quantity,this.extra)}completePurchase(){this._ngZone.runOutsideAngular(()=>{const e=new HTMLImageElement;e.className="toolbar-icon-animation",e.src=this._imageUrl,e.style.visibility="hidden",this.imageElement&&this.imageElement.nativeElement.appendChild(e);const t=e.getBoundingClientRect(),n=new ce.a(e,t.x,t.y);n.iconName=se.a.INVENTORY,oe.a.instance.roomEngine.events.dispatchEvent(n)})}get costCredits(){return this.offer.priceCredits*this.quantity}get costPoints(){return this.offer.priceActivityPoints*this.quantity}get pointsType(){return this.offer.priceActivityPointsType}get imageUrl(){return this._imageUrl}getOfferTitle(){const e=this.offer.localizationId,t=oe.a.instance.sessionDataManager.getProductData(e);return t?t.name:e}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(ie.a),i.Yb(i.H))},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-catalog-confirm-purchase-component"]],viewQuery:function(e,t){if(1&e&&i.cd(de,1),2&e){let e;i.Hc(e=i.oc())&&(t.imageElement=e.first)}},inputs:{page:"page",offer:"offer",giftOffer:"giftOffer",quantity:"quantity",extra:"extra",completed:"completed"},features:[i.Ib],decls:27,vars:18,consts:[[1,"nitro-catalog-confirm-purchase-component","card",3,"bringToTop","draggable","center"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-3"],[1,"col-6","d-flex","flex-column"],[1,"product-preview","bg-secondary","rounded",3,"ngStyle"],["imageElement",""],[1,"col-6","d-flex","flex-column","align-items-center","justify-content-center"],[1,"offer-name"],["class","offer-quantity",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-center","bg-secondary","rounded","w-100"],["class","d-flex align-items-center mb-0",4,"ngIf"],["class","mx-2 mb-0",4,"ngIf"],[1,"row","align-items-end","pt-0","px-3","pb-3"],[1,"col","btn-group"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[1,"offer-quantity"],[1,"d-flex","align-items-center","mb-0"],["nitro-currency-icon","",1,"mr-1",2,"width","20px","height","20px",3,"type"],[1,"mx-2","mb-0"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"h6",2),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",3),i.nc("click",function(){return t.hide()}),i.Zb(6,"i",4),i.cc(),i.cc(),i.dc(7,"div",5),i.dc(8,"div",6),i.Zb(9,"div",7,8),i.cc(),i.dc(11,"div",9),i.dc(12,"div",10),i.Wc(13),i.cc(),i.Uc(14,ue,2,1,"div",11),i.dc(15,"div",12),i.Uc(16,he,3,2,"div",13),i.Uc(17,ge,2,0,"p",14),i.Uc(18,me,3,2,"div",13),i.cc(),i.cc(),i.cc(),i.dc(19,"div",15),i.dc(20,"div",16),i.dc(21,"button",17),i.nc("click",function(){return t.hide()}),i.Wc(22),i.rc(23,"translate"),i.cc(),i.dc(24,"button",18),i.nc("click",function(){return t.purchase()}),i.Wc(25),i.rc(26,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&e&&(i.yc("center",!0),i.Kb(3),i.Xc(i.sc(4,10,null!=t.giftOffer?"catalog.purchase_confirmation.gift.title":"catalog.purchase_confirmation.title")),i.Kb(6),i.yc("ngStyle",i.Cc(16,fe,"url("+t.imageUrl+")")),i.Kb(4),i.Xc(t.getOfferTitle()),i.Kb(1),i.yc("ngIf",t.quantity),i.Kb(2),i.yc("ngIf",t.costCredits),i.Kb(1),i.yc("ngIf",t.costCredits&&t.costPoints),i.Kb(1),i.yc("ngIf",t.costPoints),i.Kb(4),i.Xc(i.sc(23,12,"catalog.purchase_confirmation.cancel")),i.Kb(3),i.Xc(i.sc(26,14,null!=t.giftOffer?"catalog.purchase_confirmation.gift":"catalog.purchase_confirmation.buy")))},directives:[$.a,Q.a,a.o,a.n,le.a],pipes:[J.a],encapsulation:2}),e})();var _e=n("YPdD");function be(e,t){if(1&e&&(i.dc(0,"p",13),i.Wc(1),i.Zb(2,"img",14),i.cc()),2&e){const e=i.qc();i.Kb(1),i.Yc("",e.subscription.priceCredits," "),i.Kb(1),i.yc("src",e.getCurrencyUrl(-1),i.Nc)}}function ve(e,t){if(1&e&&(i.dc(0,"p",13),i.Wc(1),i.Zb(2,"img",15),i.cc()),2&e){const e=i.qc();i.Kb(1),i.Yc(" + ",e.subscription.priceActivityPoints," "),i.Kb(1),i.yc("src",e.getCurrencyUrl(e.subscription.priceActivityPointsType),i.Nc)}}let Ee=(()=>{class e{constructor(e,t){this._catalogService=e,this._ngZone=t,this.subscription=null}getSubscriptionText(){let e=oe.a.instance.localization.getValue("catalog.vip.buy.confirm.end_date");return e=e.replace("%month%",this.subscription.month.toString()),e=e.replace("%day%",this.subscription.day.toString()),e=e.replace("%year%",this.subscription.year.toString()),e}getSubscriptionHeader(){const e=this._catalogService.purse,t=0==this.subscription.months?"days":"months",n=oe.a.instance.localization.getValue("catalog.vip.buy.confirm."+(e.clubDays>0||e.clubPeriods>0?"extension.":"subscription.")+t),i=0==this.subscription.months?this.subscription.extraDays:this.subscription.months;return n.replace("%NUM_"+t.toUpperCase()+"%",i.toString())}getCurrencyUrl(e){return oe.a.instance.getConfiguration("currency.asset.icon.url").replace("%type%",e.toString())}hide(){this._catalogService.component&&this._catalogService.component.hidePurchaseConfirmation()}purchase(){this._catalogService.purchaseById(this._catalogService.activePage.pageId,this.subscription.offerId,1)}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(ie.a),i.Yb(i.H))},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-catalog-confirm-vip-subscription-component"]],inputs:{subscription:"subscription"},decls:24,vars:14,consts:[["dragHandle",".card-header",1,"card","nitro-catalog-confirm-vip-subscription-component",3,"bringToTop","draggable","center"],[1,"card-header"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","card-body","flex-row"],[1,"icon","icon-catalogue-hc_big"],[1,"ml-3"],[1,"d-flex","align-items-center","justify-content-center","bg-secondary","rounded","p-1"],["class","mb-0",4,"ngIf"],[1,"card-footer"],[1,"d-flex","justify-space-between","button-container","btn-group"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[1,"mb-0"],["image-placeholder","",1,"px-1",3,"src"],["image-placeholder","",1,"pl-1",3,"src"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Wc(2),i.rc(3,"translate"),i.dc(4,"button",2),i.nc("click",function(){return t.hide()}),i.Zb(5,"i",3),i.cc(),i.cc(),i.dc(6,"div",4),i.Zb(7,"i",5),i.dc(8,"div",6),i.dc(9,"h6"),i.Wc(10),i.cc(),i.dc(11,"p"),i.Wc(12),i.cc(),i.dc(13,"div",7),i.Uc(14,be,3,2,"p",8),i.Uc(15,ve,3,2,"p",8),i.cc(),i.cc(),i.cc(),i.dc(16,"div",9),i.dc(17,"div",10),i.dc(18,"button",11),i.nc("click",function(){return t.hide()}),i.Wc(19),i.rc(20,"translate"),i.cc(),i.dc(21,"button",12),i.nc("click",function(){return t.purchase()}),i.Wc(22),i.rc(23,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&e&&(i.yc("center",!0),i.Kb(2),i.Yc(" ",i.sc(3,8,"catalog.club.buy.confirm")," "),i.Kb(8),i.Xc(t.getSubscriptionHeader()),i.Kb(2),i.Xc(t.getSubscriptionText()),i.Kb(2),i.yc("ngIf",t.subscription.priceCredits),i.Kb(1),i.yc("ngIf",t.subscription.priceActivityPoints),i.Kb(4),i.Xc(i.sc(20,10,"catalog.purchase_confirmation.cancel")),i.Kb(3),i.Xc(i.sc(23,12,"catalog.club.buy.subscribe")))},directives:[$.a,Q.a,a.n,_e.a],pipes:[J.a],encapsulation:2}),e})();var Se=n("3dBv");function ye(e,t){if(1&e&&i.Zb(0,"div",32),2&e){const e=i.qc();i.yc("headOnly",!0)("direction",2)("figure",e.habboFace)}}function Ie(e,t){1&e&&i.Zb(0,"div",33)}function we(e,t){if(1&e&&(i.dc(0,"span"),i.Wc(1),i.cc()),2&e){const e=i.qc();i.Kb(1),i.Xc(e.priceText)}}const Ce=function(e){return{backgroundColor:e,height:"40px"}};function Re(e,t){if(1&e){const e=i.ec();i.dc(0,"button",34),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().selectTypeId(n)}),i.cc()}if(2&e){const e=t.$implicit,n=i.qc();i.yc("disabled",!n.hasColors)("ngStyle",i.Cc(2,Ce,n.getColor(e)))}}function Te(e,t){if(1&e){const e=i.ec();i.dc(0,"div",35),i.dc(1,"div",1),i.dc(2,"h6",2),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",3),i.nc("click",function(){return i.Lc(e),i.qc().hideUsernameDialog()}),i.Zb(6,"i",4),i.cc(),i.cc(),i.dc(7,"div",36),i.dc(8,"p"),i.Wc(9),i.rc(10,"translate"),i.cc(),i.cc(),i.dc(11,"div",37),i.dc(12,"div",38),i.dc(13,"button",39),i.nc("click",function(){return i.Lc(e),i.qc().hideUsernameDialog()}),i.Wc(14),i.rc(15,"translate"),i.cc(),i.cc(),i.cc(),i.cc()}2&e&&(i.Kb(3),i.Xc(i.sc(4,3,"catalog.gift_wrapping.receiver_not_found.title")),i.Kb(6),i.Xc(i.sc(10,5,"catalog.gift_wrapping.receiver_not_found.info")),i.Kb(5),i.Xc(i.sc(15,7,"generic.ok")))}const Oe=function(e){return{"is-unavailable":e}};let Me=(()=>{class e{constructor(e,t){this._catalogService=e,this._ngZone=t,this.visible=!1,this.showUsernameErrorDialog=!1,this.receiverName="",this.message="",this.showFace=!0,this.habboFace="",this.hasColors=!1,this.boxSpriteId=-1,this.extras="",this._stuffColors=new Map,e.giftConfiguratorComponent=this;const n=this._catalogService.giftWrapperConfiguration,i=n.defaultStuffTypes;if(i.length>0){const e=Math.floor(Math.random()*i.length);this._defaultStuffType=i[e]}this._stuffTypes=n.stuffTypes,this._boxTypes=n.boxTypes,this._boxTypes.push(this._defaultStuffType),this._ribbonTypes=n.ribbonTypes,this._boxPrice=n.price,this._selectedTypeId=this._stuffTypes[2],this._ribbonIndex=this._ribbonTypes[0],this._boxIndex=0,this.updateIndexesAndSetUI(),this.loadColors()}get colors(){return this._stuffTypes}handleButton(e){switch(e){case"previous_box":this._boxIndex--,this.updateIndexesAndSetUI();break;case"next_box":this._boxIndex++,this.updateIndexesAndSetUI();break;case"previous_ribbon":this._ribbonIndex--,this.updateIndexesAndSetUI();break;case"next_ribbon":this._ribbonIndex++,this.updateIndexesAndSetUI();break;case"give_gift":this.giveGift()}}changeCheckbox(e){this.updateIndexesAndSetUI()}get isDefaultBox(){return this._isDefaultBox()}hide(){this._catalogService.component&&this._catalogService.component.hidePurchaseConfirmation()}getColor(e){return"#"+this._stuffColors.get(e).toString(16)}typeHasColors(e){return this._stuffColors.has(e)}selectTypeId(e){this._selectedTypeId=e,this.updateIndexesAndSetUI()}hideUsernameDialog(){this.showUsernameErrorDialog=!1}showUsernameNotFoundDialog(){this._ngZone.run(()=>this.showUsernameErrorDialog=!0)}loadColors(){for(const e of this._stuffTypes){const t=oe.a.instance.sessionDataManager.getFloorItemData(e);t&&t.colors&&t.colors.length>0&&this._stuffColors.set(e,t.colors[0])}}updateIndexesAndSetUI(){this._ribbonIndex<0&&(this._ribbonIndex=this._ribbonTypes.length-1),this._ribbonIndex>this._ribbonTypes.length-1&&(this._ribbonIndex=0),this._boxIndex<0&&(this._boxIndex=this._boxTypes.length-1),this._boxIndex>this._boxTypes.length-1&&(this._boxIndex=0);const e=this._boxTypes[this._boxIndex];8==e&&(this._ribbonIndex=10,this._ribbonIndex>this._ribbonTypes.length-1&&(this._ribbonIndex=0));let t=(1e3*e+this._ribbonTypes[this._ribbonIndex]).toString(),n=this._selectedTypeId;this._isDefaultBox()?(this.setHasColors(!1),n=this._defaultStuffType,t=""):8==e?this.setHasColors(!1):(this.setHasColors(!0),e>=3&&e<=6&&this.setHasColors(!1)),this.extras=t,this.boxSpriteId=n,this.setBoxTitles(),this.habboFace=oe.a.instance.sessionDataManager.figure}setHasColors(e){this.hasColors=e}setBoxTitles(){const e=this._isDefaultBox(),t=e?"catalog.gift_wrapping_new.freeprice":"catalog.gift_wrapping_new.price",n="catalog.gift_wrapping_new.ribbon."+this._ribbonIndex;this.boxText=oe.a.instance.localization.getValue(e?"catalog.gift_wrapping_new.box.default":"catalog.gift_wrapping_new.box."+this._boxTypes[this._boxIndex]),this.priceText=oe.a.instance.localization.getValueWithParameter(t,"price",this._boxPrice.toString()),this.ribbonText=oe.a.instance.localization.getValue(n)}giveGift(){if(!this.receiverName||0==this.receiverName.trim().length)return;const e=this.receiverName,t=this.message,n=this._isDefaultBox();this._catalogService.purchaseGiftOffer(this._catalogService.component.activePage,this._catalogService.component.activeOffer,this._catalogService.component.purchaseOfferExtra,e,t,n?this._defaultStuffType:this._selectedTypeId,n?0:this._boxTypes[this._boxIndex],n?0:this._ribbonTypes[this._ribbonIndex],this.showFace)}_isDefaultBox(){return this._boxTypes[this._boxIndex]==this._defaultStuffType}ngOnDestroy(){this._catalogService.giftConfiguratorComponent=null}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(ie.a),i.Yb(i.H))},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-catalog-customize-gift-component"]],inputs:{visible:"visible"},decls:56,vars:37,consts:[[1,"nitro-catalog-customize-gift-component","card",3,"bringToTop","draggable","center"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],["type","text",1,"form-control","form-control-sm",3,"ngModel","placeholder","ngModelChange"],[1,"d-flex","mt-2"],["nitro-avatar-image","",3,"headOnly","direction","figure",4,"ngIf"],["class","ingognito",4,"ngIf"],[1,"d-flex","flex-grow-1"],[1,"form-control","w-200",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-center","align-items-center","mt-2"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"d-flex","justify-content-center","mt-2"],["nitro-furniture-image","",1,"d-flex","justify-content-center","align-items-center","bg-secondary","rounded",2,"width","100px","height","100px",3,"type","spriteId","extras"],[1,"d-flex","flex-column","flex-grow-1","ml-2"],[1,"d-flex","align-items-center"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-chevron-left"],[1,"fas","fa-chevron-right"],[1,"d-flex","flex-column","ml-2"],[4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"disabled","click"],[3,"ngClass"],[1,"d-flex","flex-column","mt-2"],[1,"btn-group","w-100"],["class","btn btn-sm btn-primary",3,"disabled","ngStyle","click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-success",3,"click"],["class","nitro-catalog-customize-gift-component card",3,"bringToTop","draggable",4,"ngIf"],["nitro-avatar-image","",3,"headOnly","direction","figure"],[1,"ingognito"],[1,"btn","btn-sm","btn-primary",3,"disabled","ngStyle","click"],[1,"nitro-catalog-customize-gift-component","card",3,"bringToTop","draggable"],[1,"row","p-3"],[1,"row","align-items-end","pt-0","px-3","pb-3"],[1,"col","btn-group"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"h6",2),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",3),i.nc("click",function(){return t.hide()}),i.Zb(6,"i",4),i.cc(),i.cc(),i.dc(7,"div",5),i.dc(8,"input",6),i.nc("ngModelChange",function(e){return t.receiverName=e}),i.rc(9,"translate"),i.cc(),i.dc(10,"div",7),i.Uc(11,ye,1,3,"div",8),i.Uc(12,Ie,1,0,"div",9),i.dc(13,"div",10),i.dc(14,"textarea",11),i.nc("ngModelChange",function(e){return t.message=e}),i.cc(),i.cc(),i.cc(),i.dc(15,"div",12),i.dc(16,"div",13),i.dc(17,"input",14),i.nc("ngModelChange",function(e){return t.showFace=e})("change",function(e){return t.changeCheckbox(e)}),i.cc(),i.dc(18,"label",15),i.Wc(19),i.rc(20,"translate"),i.cc(),i.cc(),i.cc(),i.dc(21,"div",16),i.Zb(22,"div",17),i.dc(23,"div",18),i.dc(24,"div",19),i.dc(25,"button",20),i.nc("click",function(){return t.handleButton("previous_box")}),i.Zb(26,"i",21),i.cc(),i.dc(27,"button",20),i.nc("click",function(){return t.handleButton("next_box")}),i.Zb(28,"i",22),i.cc(),i.dc(29,"div",23),i.dc(30,"span"),i.Wc(31),i.cc(),i.Uc(32,we,2,1,"span",24),i.cc(),i.cc(),i.dc(33,"div",19),i.dc(34,"button",25),i.nc("click",function(){return t.handleButton("previous_ribbon")}),i.Zb(35,"i",21),i.cc(),i.dc(36,"button",25),i.nc("click",function(){return t.handleButton("next_ribbon")}),i.Zb(37,"i",22),i.cc(),i.dc(38,"div",23),i.dc(39,"span",26),i.Wc(40),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(41,"div",27),i.dc(42,"span"),i.Wc(43),i.rc(44,"translate"),i.cc(),i.dc(45,"div",28),i.Uc(46,Re,1,4,"button",29),i.cc(),i.cc(),i.dc(47,"div",7),i.dc(48,"div",28),i.dc(49,"button",20),i.nc("click",function(){return t.hide()}),i.Wc(50),i.rc(51,"translate"),i.cc(),i.dc(52,"button",30),i.nc("click",function(){return t.handleButton("give_gift")}),i.Wc(53),i.rc(54,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.Uc(55,Te,16,9,"div",31)),2&e&&(i.yc("center",!0),i.Kb(3),i.Xc(i.sc(4,23,"catalog.gift_wrapping.title")),i.Kb(5),i.zc("placeholder",i.sc(9,25,"catalog.gift_wrapping.receiver")),i.yc("ngModel",t.receiverName),i.Kb(3),i.yc("ngIf",t.showFace),i.Kb(1),i.yc("ngIf",!t.showFace),i.Kb(2),i.yc("ngModel",t.message),i.Kb(3),i.yc("ngModel",t.showFace),i.Kb(2),i.Xc(i.sc(20,27,"catalog.gift_wrapping.show_face.title")),i.Kb(3),i.yc("type","s")("spriteId",t.boxSpriteId)("extras",t.extras),i.Kb(9),i.Xc(t.boxText),i.Kb(1),i.yc("ngIf",t.priceText&&t.priceText.length>0),i.Kb(2),i.yc("disabled",t.isDefaultBox),i.Kb(2),i.yc("disabled",t.isDefaultBox),i.Kb(3),i.yc("ngClass",i.Cc(35,Oe,t.isDefaultBox)),i.Kb(1),i.Xc(t.ribbonText),i.Kb(3),i.Xc(i.sc(44,29,"catalog.gift_wrapping.pick_color")),i.Kb(3),i.yc("ngForOf",t.colors),i.Kb(4),i.Xc(i.sc(51,31,"catalog.purchase_confirmation.cancel")),i.Kb(3),i.Xc(i.sc(54,33,"catalog.gift_wrapping.give_gift")),i.Kb(2),i.yc("ngIf",t.showUsernameErrorDialog))},directives:[$.a,Q.a,l.b,l.l,l.n,a.n,l.a,Se.a,a.l,a.m,X.a,a.o],pipes:[J.a],encapsulation:2}),e})();var Ue=n("dUWl"),xe=n("djwq"),Ae=n("CU8w"),De=n("fzgV"),Le=n("cEnG"),ke=n("gxVE"),Pe=n("uL4p"),Ne=n("TeCb");function We(e,t){if(1&e&&i.Zb(0,"nitro-catalog-navigation-item-component",3),2&e){const e=i.qc().$implicit;i.yc("catalogPage",e)}}function Ke(e,t){if(1&e&&(i.bc(0),i.Uc(1,We,1,1,"nitro-catalog-navigation-item-component",2),i.ac()),2&e){const e=t.$implicit;i.Kb(1),i.yc("ngIf",e.visible)}}let Fe=(()=>{class e{constructor(e){this._catalogService=e,this.catalogPage=null}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(ie.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-catalog-navigation-set-component"]],inputs:{catalogPage:"catalogPage"},decls:2,vars:1,consts:[[1,"list-group","list-group-flush"],[4,"ngFor","ngForOf"],[3,"catalogPage",4,"ngIf"],[3,"catalogPage"]],template:function(e,t){1&e&&(i.dc(0,"ul",0),i.Uc(1,Ke,2,1,"ng-container",1),i.cc()),2&e&&(i.Kb(1),i.yc("ngForOf",t.catalogPage.children))},encapsulation:2}),e})();const Ve=function(e,t){return{"fa-sort-down":e,"fa-sort-up":t}};function qe(e,t){if(1&e&&i.Zb(0,"i",8),2&e){const e=i.qc();i.yc("ngClass",i.Dc(1,Ve,!e.isToggled,e.isToggled))}}function He(e,t){if(1&e&&i.Zb(0,"nitro-catalog-navigation-set-component",9),2&e){const e=i.qc();i.yc("catalogPage",e.catalogPage)}}const Be=function(e){return{"bg-dark":e}};let Ge=(()=>{class e{constructor(e){this._catalogService=e,this.catalogPage=null}selectPage(){this.isActive&&this._catalogService.manuallyCollapsePage(this.catalogPage),this._catalogService.component&&this._catalogService.component.selectPage(this.catalogPage)}get activePage(){return this._catalogService.activePage}get activePageData(){return this._catalogService.activePageData}get isDescendant(){return this._catalogService.isDescendant(this.catalogPage,this.activePageData)}get isActive(){return this.catalogPage.pageId===(this.activePage&&this.activePage.pageId)||this.isDescendant}get isCollapsed(){return this._catalogService.manuallyCollapsed.indexOf(this.catalogPage)>=0}get isToggled(){return!this.isCollapsed&&!!this.isActive}get iconUrl(){return oe.a.instance.getConfiguration("catalog.asset.icon.url").replace("%name%",(this.catalogPage.icon||0).toString())}get isInSearchView(){return this._catalogService.searchResults instanceof Ne.a}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(ie.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-catalog-navigation-item-component"]],inputs:{catalogPage:"catalogPage"},decls:9,vars:7,consts:[[1,"nav-item"],[1,"d-flex","list-group-item","align-items-center","bg-secondary","rounded","mb-1","overflow-hidden",3,"ngClass","click"],[1,"d-flex","flex-grow-1"],[1,"icon-container"],[1,"icon",3,"src"],[1,"flex-grow-1","mb-0","w-100","text-nowrap"],["class","fas",3,"ngClass",4,"ngIf"],[3,"catalogPage",4,"ngIf"],[1,"fas",3,"ngClass"],[3,"catalogPage"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"li",1),i.nc("click",function(){return t.selectPage()}),i.dc(2,"div",2),i.dc(3,"div",3),i.Zb(4,"img",4),i.cc(),i.dc(5,"p",5),i.Wc(6),i.cc(),i.cc(),i.Uc(7,qe,1,4,"i",6),i.cc(),i.Uc(8,He,1,1,"nitro-catalog-navigation-set-component",7),i.cc()),2&e&&(i.Kb(1),i.yc("ngClass",i.Cc(5,Be,t.isActive)),i.Kb(3),i.yc("src",t.iconUrl,i.Nc),i.Kb(2),i.Xc(t.catalogPage.localization),i.Kb(1),i.yc("ngIf",!t.isInSearchView&&t.catalogPage.children&&t.catalogPage.children.length),i.Kb(1),i.yc("ngIf",!t.isInSearchView&&t.isToggled&&t.catalogPage.children&&t.catalogPage.children.length>0))},directives:[a.l,a.n,Fe],encapsulation:2}),e})();var Ze=n("/uUt"),Xe=n("Kj3r"),je=n("w9ZJ");const Ye=["nitro-catalog-navigation-component",""];function ze(e,t){if(1&e){const e=i.ec();i.dc(0,"i",6),i.nc("click",function(){return i.Lc(e),i.qc().clearResults()}),i.cc()}}let $e=(()=>{class e{constructor(e){this._catalogService=e,this.searchControl=new l.d}ngOnInit(){this.subscribe()}ngOnDestroy(){this.unsubscribe()}subscribe(){this.unsubscribe(),this._subscription=this.searchControl.valueChanges.pipe(Object(Ze.a)(),Object(Xe.a)(500)).subscribe(e=>this.search(e))}unsubscribe(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}search(e){if(!e||!e.length)return void this._catalogService.clearSearchResults();e=e.toLocaleLowerCase();const t=oe.a.instance.sessionDataManager.getAllFurnitureData(this);if(!t)return;const n=[];for(const i of t){const t=this._catalogService.getOfferPages(i.purchaseOfferId),r=this._catalogService.getOfferPages(i.rentOfferId);if((t||r)&&-1!==[i.className,i.name,i.description].join(" ").toLocaleLowerCase().indexOf(e)&&(n.push(i),200===n.length))break}this._catalogService.component.handleSearchResults(n)}loadFurnitureData(){}get hasSearchResults(){return this._catalogService.activePage instanceof je.a}get catalogPage(){return this._catalogService.component&&this._catalogService.component.activeTab||null}get searchResults(){return this._catalogService.searchResults}clearResults(){this._catalogService.clearSearchResults(),this.searchControl.setValue("")}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(ie.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-catalog-navigation-component",""]],attrs:Ye,decls:7,vars:6,consts:[[1,"nitro-catalog-navigation-component","overflow-hidden"],[1,"btn-group","rounded","bg-secondary","mb-1","w-100"],["type","text",1,"form-control","form-control-sm","bg-secondary","rounded","border-0","shadow-none","text-white",3,"placeholder","formControl"],["class","d-flex justify-content-center align-items-center mr-2 fas fa-times-circle",3,"click",4,"ngIf"],[2,"min-height","463px","max-height","463px","height","463px"],[3,"catalogPage"],[1,"d-flex","justify-content-center","align-items-center","mr-2","fas","fa-times-circle",3,"click"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Zb(2,"input",2),i.rc(3,"translate"),i.Uc(4,ze,1,0,"i",3),i.cc(),i.dc(5,"perfect-scrollbar",4),i.Zb(6,"nitro-catalog-navigation-set-component",5),i.cc(),i.cc()),2&e&&(i.Kb(2),i.zc("placeholder",i.sc(3,4,"catalog.search")),i.yc("formControl",t.searchControl),i.Kb(2),i.yc("ngIf",t.searchControl.value),i.Kb(2),i.yc("catalogPage",t.searchResults||t.catalogPage))},directives:[l.b,l.l,l.e,a.n,m.b,Fe],pipes:[J.a],encapsulation:2}),e})();const Qe=["nitro-catalog-purchase-component",""];function Je(e,t){if(1&e){const e=i.ec();i.dc(0,"div",12),i.dc(1,"p",13),i.Wc(2),i.rc(3,"translate"),i.cc(),i.dc(4,"div",14),i.dc(5,"div",15),i.dc(6,"button",16),i.nc("click",function(){return i.Lc(e),i.qc(2).decrease()}),i.Zb(7,"i",17),i.cc(),i.cc(),i.dc(8,"input",18),i.nc("ngModelChange",function(t){return i.Lc(e),i.qc(2).quantity=t}),i.cc(),i.dc(9,"div",19),i.dc(10,"button",16),i.nc("click",function(){return i.Lc(e),i.qc(2).increase()}),i.Zb(11,"i",20),i.cc(),i.cc(),i.cc(),i.cc()}if(2&e){const e=i.qc(2);i.Kb(2),i.Xc(i.sc(3,3,"catalog.bundlewidget.quantity")),i.Kb(6),i.yc("ngModel",e.quantity)("max",e.maxQuantity)}}function et(e,t){if(1&e&&(i.dc(0,"div",21),i.Zb(1,"div",22),i.Wc(2),i.cc()),2&e){const e=i.qc(2);i.Kb(1),i.yc("type",-1),i.Kb(1),i.Yc(" ",e.costCredits," ")}}function tt(e,t){1&e&&(i.dc(0,"div",23),i.Wc(1,"+"),i.cc())}function nt(e,t){if(1&e&&(i.dc(0,"div",21),i.Zb(1,"div",22),i.Wc(2),i.cc()),2&e){const e=i.qc(2);i.Kb(1),i.yc("type",e.pointsType),i.Kb(1),i.Yc(" ",e.costPoints," ")}}function it(e,t){if(1&e){const e=i.ec();i.dc(0,"button",24),i.nc("click",function(){return i.Lc(e),i.qc(2).purchase(!0)}),i.Wc(1),i.rc(2,"translate"),i.cc()}2&e&&(i.Kb(1),i.Xc(i.sc(2,1,"catalog.purchase_confirmation.gift")))}const rt=function(e,t){return{"flex-column h-100 ":e,"justify-content-between":t}},st=function(e){return[e]},ct=function(e){return{"justify-content-end":e}};function ot(e,t){if(1&e){const e=i.ec();i.dc(0,"div",1),i.Uc(1,Je,12,5,"div",2),i.dc(2,"div",3),i.dc(3,"div",4),i.dc(4,"p",5),i.Wc(5),i.rc(6,"translate"),i.cc(),i.dc(7,"div",6),i.Uc(8,et,3,2,"div",7),i.Uc(9,tt,2,0,"div",8),i.Uc(10,nt,3,2,"div",7),i.cc(),i.cc(),i.dc(11,"div",9),i.dc(12,"button",10),i.nc("click",function(){return i.Lc(e),i.qc().purchase()}),i.Wc(13),i.rc(14,"translate"),i.cc(),i.Uc(15,it,3,3,"button",11),i.cc(),i.cc(),i.cc()}if(2&e){const e=i.qc();i.yc("ngClass",i.Dc(15,rt,e.vertical,e.quantityEnabled)),i.Kb(1),i.yc("ngIf",e.quantityEnabled),i.Kb(1),i.yc("ngClass",i.Cc(18,st,e.vertical||e.quantityEnabled?"flex-column justify-content-end h-100":"justify-content-between w-100")),i.Kb(1),i.yc("ngClass",i.Cc(20,ct,e.vertical)),i.Kb(2),i.Xc(i.sc(6,11,"catalog.bundlewidget.price")),i.Kb(3),i.yc("ngIf",e.costCredits),i.Kb(1),i.yc("ngIf",e.costCredits&&e.costPoints),i.Kb(1),i.yc("ngIf",e.costPoints),i.Kb(1),i.yc("ngClass",i.Cc(22,st,e.vertical?"flex-column":"")),i.Kb(2),i.Xc(i.sc(14,13,"buy")),i.Kb(2),i.yc("ngIf",e.isGiftable)}}let at=(()=>{class e{constructor(e){this._catalogService=e,this.activePage=null,this.activeOffer=null,this.quantityEnabled=!1,this.vertical=!1,this.quantity=1,this.forcedExtra=null}ngOnChanges(e){if(!e.activeOffer)return;const t=e.activeOffer.currentValue;t&&t!==e.activeOffer.previousValue&&this.resetOffer()}resetOffer(){this.quantity=1}purchase(e=!1){this._catalogService.component&&this._catalogService.component.confirmPurchase(this.activePage,this.activeOffer,this.quantity,this.extra,e)}increase(){this.quantity>=this.maxQuantity||this.quantity++}decrease(){this.quantity--,this.quantity<1&&(this.quantity=1)}get costCredits(){return this.activeOffer.priceCredits*this.quantity}get costPoints(){return this.activeOffer.priceActivityPoints*this.quantity}get pointsType(){return this.activeOffer.priceActivityPointsType}get extra(){return this.forcedExtra?this.forcedExtra:this.activeOffer.products[0]&&this.activeOffer.products[0].extraParam}get maxQuantity(){return 99}get isGiftable(){return this.activeOffer.giftable}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(ie.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-catalog-purchase-component",""]],inputs:{activePage:"activePage",activeOffer:"activeOffer",quantityEnabled:"quantityEnabled",vertical:"vertical",forcedExtra:"forcedExtra"},features:[i.Ib],attrs:Qe,decls:1,vars:1,consts:[["class","d-flex w-100",3,"ngClass",4,"ngIf"],[1,"d-flex","w-100",3,"ngClass"],["class","d-flex flex-column justify-content-end mr-3 quantity-area",4,"ngIf"],[1,"d-flex",3,"ngClass"],[1,"d-flex","flex-column","justify-content-center","align-items-end","price-area",3,"ngClass"],[1,"mb-0"],[1,"d-flex","mb-1"],["class","d-flex align-items-center mb-0",4,"ngIf"],["class","mx-2 mb-0",4,"ngIf"],[1,"d-flex","btn-group",3,"ngClass"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],["type","button","class","btn btn-secondary btn-sm",3,"click",4,"ngIf"],[1,"d-flex","flex-column","justify-content-end","mr-3","quantity-area"],[1,"mb-1"],[1,"d-flex","input-group"],[1,"input-group-prepend"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["type","number","min","1",1,"form-control","form-control-sm",3,"ngModel","max","ngModelChange"],[1,"input-group-append"],[1,"fas","fa-arrow-right"],[1,"d-flex","align-items-center","mb-0"],["nitro-currency-icon","",1,"mr-1",2,"width","20px","height","20px",3,"type"],[1,"mx-2","mb-0"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(e,t){1&e&&i.Uc(0,ot,16,24,"div",0),2&e&&i.yc("ngIf",!t.activeOffer.products[0].uniqueLimitedItem||t.activeOffer.products[0].uniqueLimitedItemsLeft>0)},directives:[a.n,a.l,l.p,l.b,l.l,l.n,le.a],pipes:[J.a],encapsulation:2}),e})(),lt=(()=>{class e{constructor(e){this._catalogService=e,this.localization=null,this.voucherCode=""}ngOnInit(){}redeem(){this._catalogService.redeemVoucher(this.voucherCode),this.voucherCode=""}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(ie.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["redeem-voucher-component"]],inputs:{localization:"localization"},decls:7,vars:5,consts:[[1,"d-flex","flex-column","justify-content-center"],[1,"input-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","placeholder","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"input",2),i.nc("ngModelChange",function(e){return t.voucherCode=e}),i.cc(),i.dc(3,"div",3),i.dc(4,"button",4),i.nc("click",function(){return t.redeem()}),i.Wc(5),i.rc(6,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&e&&(i.Kb(2),i.zc("placeholder",t.localization.texts[1]),i.yc("ngModel",t.voucherCode),i.Kb(3),i.Xc(i.sc(6,3,"redeem")))},directives:[l.b,l.l,l.n],pipes:[J.a],encapsulation:2}),e})();var dt=n("afcZ"),ut=n("6QLa"),ht=n("ay9g"),gt=n("L0LC");const mt=["imageElement"];function ft(e,t){if(1&e&&(i.dc(0,"div",21),i.Zb(1,"div",22),i.rc(2,"uniqueNumber"),i.Zb(3,"div",22),i.rc(4,"uniqueNumber"),i.cc()),2&e){const e=i.qc();i.Kb(1),i.yc("innerHTML",i.sc(2,2,e.offer.stuffData.uniqueNumber),i.Mc),i.Kb(2),i.yc("innerHTML",i.sc(4,4,e.offer.stuffData.uniqueSeries),i.Mc)}}const pt=function(e){return{"background-image":e}};let _t=(()=>{class e{constructor(e,t,n,i){this._catalogService=e,this._marketplaceService=t,this._inventoryFurniService=n,this._ngZone=i,this._imageUrl=""}ngOnChanges(e){const t=e.offer.currentValue;t&&e.offer.previousValue!==t&&this.refresh()}hide(){this._marketplaceService.buyOffer(null)}refresh(){this.refreshImage()}refreshImage(){this._ngZone.runOutsideAngular(()=>{var e,t;this._imageUrl="";const n=this.offer;let i;if(i=1===this.offer.furniType?oe.a.instance.roomEngine.getFurnitureFloorImage(n.furniId,new ut.a(90,0,0),64,this,4293848814,null===(e=this.offer.extraData)||void 0===e?void 0:e.toString()):oe.a.instance.roomEngine.getFurnitureWallImage(n.furniType,new ut.a(90,0,0),64,this,4293848814,null===(t=this.offer.extraData)||void 0===t?void 0:t.toString()),i){const e=i.getImage();e&&this._ngZone.run(()=>this._imageUrl=e.src)}})}purchase(){}completePurchase(){this._ngZone.runOutsideAngular(()=>{const e=new HTMLImageElement;e.className="toolbar-icon-animation",e.src=this._imageUrl,e.style.visibility="hidden",this.imageElement&&this.imageElement.nativeElement.appendChild(e);const t=e.getBoundingClientRect(),n=new ce.a(e,t.x,t.y);n.iconName=se.a.INVENTORY,oe.a.instance.roomEngine.events.dispatchEvent(n)})}imageReady(e,t,n){if(t)if(n)this._ngZone.run(()=>this._imageUrl=n.src);else if(t){const e=ae.a.generateImageUrl(t);e&&this._ngZone.run(()=>this._imageUrl=e)}}get costCredits(){return this.offer.price}imageFailed(e){}get imageUrl(){return this._imageUrl}getFurniTitle(){const e=this.offer;return oe.a.instance.localization.getValue(2==e.furniType?"wallItem.name."+e.furniId:"roomItem.name."+e.furniId)}getFurniDescription(){const e=this.offer;return oe.a.instance.localization.getValue(2==e.furniType?"wallItem.desc."+e.furniId:"roomItem.desc."+e.furniId)}getAveragePrice(){let e=oe.a.instance.localization.getValue("catalog.marketplace.offer_details.average_price");const t=0==this.offer._Str_3925?" - ":this.offer._Str_3925.toString();return e=e.replace("%days%",this._inventoryFurniService.marketPlaceConfig.displayTime.toString()),e=e.replace("%average%",t),e}getOfferCount(){return oe.a.instance.localization.getValueWithParameter("catalog.marketplace.offer_details.offer_count","count",this.offer._Str_4121.toString())}buy(){this._marketplaceService.buyMarketplaceOffer(this.offer.offerId)}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(ie.a),i.Yb(dt.a),i.Yb(ht.a),i.Yb(i.H))},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-catalog-confirm-marketplace-purchase-component"]],viewQuery:function(e,t){if(1&e&&i.cd(mt,1),2&e){let e;i.Hc(e=i.oc())&&(t.imageElement=e.first)}},inputs:{offer:"offer"},features:[i.Ib],decls:35,vars:20,consts:[[1,"nitro-inventory-offer-marketplace-component","card",3,"bringToTop","draggable","center"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"d-flex","flex-row","mb-3"],[1,"position-relative","bg-secondary","rounded"],["class","unique-counter-compact","style","right: 0px;",4,"ngIf"],[1,"product-preview","bg-secondary",3,"ngStyle"],["imageElement",""],[1,"ml-2","align-self-center"],[1,"badge","badge-secondary","badge-sm","text-wrap"],[1,"badge","badge-secondary","d-flex","align-items-center","justify-content-center","text-wrap","mb-2","w-100"],["nitro-currency-icon","",1,"mr-1",2,"width","20px","height","20px",3,"type"],[1,"badge","badge-secondary","badge-sm","text-wrap","mr-2","w-100"],[1,"badge","badge-secondary","badge-sm","text-wrap","w-100","d-flex"],[1,"align-self-center","w-100"],[1,"btn-group","w-100"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"unique-counter-compact",2,"right","0px"],[3,"innerHTML"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"h6",2),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",3),i.nc("click",function(){return t.hide()}),i.Zb(6,"i",4),i.cc(),i.cc(),i.dc(7,"div",5),i.dc(8,"div",6),i.dc(9,"div",7),i.Uc(10,ft,5,6,"div",8),i.Zb(11,"div",9,10),i.cc(),i.dc(13,"div",11),i.dc(14,"div"),i.Wc(15),i.cc(),i.dc(16,"div",12),i.Wc(17),i.cc(),i.cc(),i.cc(),i.dc(18,"div",13),i.Zb(19,"div",14),i.dc(20,"div"),i.Wc(21),i.cc(),i.cc(),i.dc(22,"div",6),i.dc(23,"div",15),i.Wc(24),i.cc(),i.dc(25,"div",16),i.dc(26,"div",17),i.Wc(27),i.cc(),i.cc(),i.cc(),i.dc(28,"div",18),i.dc(29,"button",19),i.nc("click",function(){return t.buy()}),i.Wc(30),i.rc(31,"translate"),i.cc(),i.dc(32,"button",20),i.nc("click",function(){return t.hide()}),i.Wc(33),i.rc(34,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&e&&(i.yc("center",!0),i.Kb(3),i.Xc(i.sc(4,12,"catalog.marketplace.confirm_title")),i.Kb(7),i.yc("ngIf",t.offer&&t.offer.stuffData.uniqueNumber),i.Kb(1),i.yc("ngStyle",i.Cc(18,pt,"url("+t.imageUrl+")")),i.Kb(4),i.Xc(t.getFurniTitle()),i.Kb(2),i.Xc(t.getFurniDescription()),i.Kb(2),i.yc("type",-1),i.Kb(2),i.Xc(t.costCredits),i.Kb(3),i.Yc(" ",t.getAveragePrice()," "),i.Kb(3),i.Xc(t.getOfferCount()),i.Kb(3),i.Xc(i.sc(31,14,"catalog.purchase_confirmation.buy")),i.Kb(3),i.Xc(i.sc(34,16,"catalog.purchase_confirmation.cancel")))},directives:[$.a,Q.a,a.n,a.o,le.a],pipes:[J.a,gt.a],encapsulation:2}),e})();var bt=n("0ldw");const vt=["previewImage"],Et=["nitro-room-preview-component",""];let St=(()=>{class e{constructor(e,t){this._elementRef=e,this.ngZone=t,this.roomPreviewer=null,this.width=1,this.height=1,this.model=null,this.wallHeight=-1,this.modelScale=!0,this.renderingCanvas=null,this.displayObject=null,this.imageUrl=null,this.isRunning=!1,this.onClick=this.onClick.bind(this)}ngOnChanges(e){if(e.model){const t=e.model.previousValue,n=e.model.currentValue;n&&n!==t&&this.updateModel()}if(e.wallHeight){const t=e.wallHeight.previousValue,n=e.wallHeight.currentValue;n&&n!==t&&this.updateModel()}}ngOnDestroy(){this.stop()}ngAfterViewInit(){if(this.roomPreviewer){if(1===this.width&&(this.width=Math.trunc(this.previewImageElement.offsetWidth)),1===this.height&&(this.height=Math.trunc(this.previewImageElement.offsetHeight)),this.previewImageElement.style.minWidth=this.width+"px",this.previewImageElement.style.minHeight=this.height+"px",this.roomPreviewer){let e=document.defaultView.getComputedStyle(this.previewImageElement,null).backgroundColor;e=bt.a.rgbStringToHex(e),e=e.replace("#","0x"),this.roomPreviewer.backgroundColor=parseInt(e,16),this.model&&this.updateModel(),this.displayObject=this.roomPreviewer.getRoomCanvas(this.width,this.height),this.renderingCanvas=this.roomPreviewer.getRenderingCanvas()}this.start()}}start(){this.isRunning||(this.ngZone.runOutsideAngular(()=>{this.previewImageElement.addEventListener("click",this.onClick),oe.a.instance.ticker.add(this.update,this)}),this.isRunning=!0)}stop(){this.isRunning&&(this.ngZone.runOutsideAngular(()=>{this.previewImageElement.removeEventListener("click",this.onClick),oe.a.instance.ticker.remove(this.update,this)}),this.isRunning=!1)}update(e){if(this.roomPreviewer&&this.renderingCanvas&&this.displayObject&&(this.roomPreviewer.updatePreviewRoomView(),this.renderingCanvas.canvasUpdated)){const e=oe.a.instance.renderer.extract.base64(this.displayObject);this.previewImageElement.style.backgroundImage=`url(${e})`}}onClick(e){e&&this.isRunning&&this.roomPreviewer&&(e.shiftKey?this.roomPreviewer.changeRoomObjectDirection():this.roomPreviewer.changeRoomObjectState())}updateModel(){this.roomPreviewer&&this.roomPreviewer.updatePreviewModel(this.model,this.wallHeight,this.modelScale)}get previewImageElement(){return this.previewImage&&this.previewImage.nativeElement||null}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(i.p),i.Yb(i.H))},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-room-preview-component",""]],viewQuery:function(e,t){if(1&e&&i.cd(vt,1),2&e){let e;i.Hc(e=i.oc())&&(t.previewImage=e.first)}},inputs:{roomPreviewer:"roomPreviewer",width:"width",height:"height",model:"model",wallHeight:"wallHeight",modelScale:"modelScale"},features:[i.Ib],attrs:Et,decls:2,vars:0,consts:[[1,"room-preview-image"],["previewImage",""]],template:function(e,t){1&e&&i.Zb(0,"div",0,1)},encapsulation:2}),e})();var yt=n("0kp3"),It=n("f/8j");let wt=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},providers:[ie.a,dt.a],imports:[[v]]}),e})();i.Oc(xe.a,[a.n,_e.a,St,m.b,a.m,a.l,a.o,at],[gt.a,J.a]),i.Oc(Ae.a,[a.n,a.o,lt],[]),i.Oc(Ue.a,[a.n,_e.a,St,m.b,a.m,yt.a,a.l,at],[]),i.Oc(ke.a,[a.n,_e.a,St,at,a.l,m.b,a.m,a.o],[J.a]),i.Oc(De.a,[a.n,_e.a,It.a,St,a.o,l.t,l.l,l.n,a.m,l.o,l.v,m.b,a.l,at],[]),i.Oc(Pe.a,[a.n,$.a,Q.a,a.m,a.l,$e,_t,pe,Ee,re,Me],[J.a]),i.Oc(Fe,[a.m,a.n,Ge],[]),i.Oc(Le.a,[a.n,_e.a,St,m.b,a.m,a.o,at],[]);var Ct=n("cSuP");let Rt=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},providers:[Ct.a],imports:[[v]]}),e})();var Tt=n("PVU2"),Ot=n("cKlz"),Mt=n("LvG+");const Ut=["nitro-friendlist-friends-list-component",""];function xt(e,t){if(1&e){const e=i.ec();i.dc(0,"div",1),i.dc(1,"button",2),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().selectThread(n)}),i.Wc(2),i.cc(),i.dc(3,"button",3),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().openFriendProfile(n)}),i.Zb(4,"i",4),i.cc(),i.dc(5,"button",5),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().removeFriend(n)}),i.Zb(6,"i",6),i.cc(),i.cc()}if(2&e){const e=t.$implicit;i.Kb(2),i.Xc(e.name)}}let At=(()=>{class e{constructor(e,t){this._friendListService=e,this._ngZone=t,this.threadSelector=null,this.onlineOnly=!1}selectThread(e){if(!e)return;const t=this._friendListService.getMessageThread(e.id);t&&this.threadSelector&&this.threadSelector(t)}removeFriend(e){e&&(oe.a.instance.communication.connection.send(new Ot.a(e.id)),this._friendListService.friends.delete(e.id))}openFriendProfile(e){e&&oe.a.instance.communication.connection.send(new Mt.a(e.id))}get friends(){const e=Array.from(this._friendListService.friends.values());return this.onlineOnly?e.filter(e=>e.online):e}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(Tt.a),i.Yb(i.H))},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-friendlist-friends-list-component",""]],inputs:{threadSelector:"threadSelector",onlineOnly:"onlineOnly"},attrs:Ut,decls:1,vars:1,consts:[["class","btn-group w-100 mb-1",4,"ngFor","ngForOf"],[1,"btn-group","w-100","mb-1"],["type","button",1,"btn","btn-secondary","w-100",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-id-card"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fas","fa-times"]],template:function(e,t){1&e&&i.Uc(0,xt,7,1,"div",0),2&e&&i.yc("ngForOf",t.friends)},directives:[a.m],encapsulation:2}),e})();const Dt=["nitro-friendlist-requests-list-component",""];function Lt(e,t){if(1&e){const e=i.ec();i.bc(0),i.dc(1,"div",3),i.dc(2,"button",4),i.Wc(3),i.cc(),i.dc(4,"button",5),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc(2).acceptRequest(n.value)}),i.Zb(5,"i",6),i.cc(),i.dc(6,"button",7),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc(2).declineRequest(n.value)}),i.Zb(7,"i",8),i.cc(),i.cc(),i.ac()}if(2&e){const e=t.$implicit;i.Kb(3),i.Xc(e.value.requesterName)}}function kt(e,t){if(1&e){const e=i.ec();i.bc(0),i.dc(1,"button",1),i.nc("click",function(){return i.Lc(e),i.qc().declineAllRequests()}),i.Wc(2),i.rc(3,"translate"),i.cc(),i.Uc(4,Lt,8,1,"ng-container",2),i.rc(5,"keyvalue"),i.ac()}if(2&e){const e=i.qc();i.Kb(2),i.Xc(i.sc(3,2,"friendbar.requests.discard")),i.Kb(2),i.yc("ngForOf",i.sc(5,4,e.requests))}}let Pt=(()=>{class e{constructor(e){this._friendListService=e}acceptRequest(e){e&&this._friendListService.acceptFriendRequest(e)}declineRequest(e){e&&this._friendListService.removeFriendRequest(e)}declineAllRequests(){this._friendListService.removeAllFriendRequests()}get requests(){return this._friendListService.requests}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(Tt.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-friendlist-requests-list-component",""]],attrs:Dt,decls:1,vars:1,consts:[[4,"ngIf"],["type","button",1,"btn","btn-danger","mb-1","w-100",3,"click"],[4,"ngFor","ngForOf"],[1,"btn-group","w-100","mb-1"],["type","button",1,"btn","btn-primary","w-100"],["type","button",1,"btn","btn-success",3,"click"],[1,"fas","fa-check"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fas","fa-times"]],template:function(e,t){1&e&&i.Uc(0,kt,6,6,"ng-container",0),2&e&&i.yc("ngIf",t.requests.size>0)},directives:[a.n,a.m],pipes:[J.a,a.h],encapsulation:2}),e})();var Nt=n("vGto");const Wt=["nitro-friendlist-search-component",""];function Kt(e,t){if(1&e){const e=i.ec();i.dc(0,"div",9),i.dc(1,"button",10),i.Wc(2),i.cc(),i.dc(3,"button",11),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().openProfile(n)}),i.Zb(4,"i",12),i.cc(),i.dc(5,"button",13),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().removeFriend(n)}),i.Zb(6,"i",14),i.cc(),i.cc()}if(2&e){const e=t.$implicit;i.Kb(2),i.Xc(e.avatarName)}}function Ft(e,t){1&e&&(i.dc(0,"p"),i.Wc(1),i.rc(2,"translate"),i.cc()),2&e&&(i.Kb(1),i.Yc(" ",i.sc(2,1,"friendlist.search.nofriendsfound"),""))}function Vt(e,t){if(1&e){const e=i.ec();i.dc(0,"div",9),i.dc(1,"button",10),i.Wc(2),i.cc(),i.dc(3,"button",11),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().openProfile(n)}),i.Zb(4,"i",12),i.cc(),i.dc(5,"button",15),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().sendFriendRequest(n)}),i.Zb(6,"i",16),i.cc(),i.cc()}if(2&e){const e=t.$implicit,n=i.qc();i.Kb(2),i.Xc(e.avatarName),i.Kb(3),i.yc("disabled",!n.isFriendRequestAllowed(e.avatarId))}}function qt(e,t){1&e&&(i.dc(0,"p"),i.Wc(1),i.rc(2,"translate"),i.cc()),2&e&&(i.Kb(1),i.Yc(" ",i.sc(2,1,"friendlist.search.noothersfound"),""))}let Ht=(()=>{class e{constructor(e){this._friendListService=e,this.friendsCollapsed=!0,this.othersCollapsed=!0}searchAvatar(){0!==this.searchQuery.trim().length&&oe.a.instance.communication.connection.send(new Nt.a(this.searchQuery))}removeFriend(e){e&&(oe.a.instance.communication.connection.send(new Ot.a(e.avatarId)),this._friendListService.friends.delete(e.avatarId))}openProfile(e){e&&oe.a.instance.communication.connection.send(new Mt.a(e.avatarId))}sendFriendRequest(e){this._friendListService.avatarSearchResults.setFriendRequestSent(e.avatarId),this._friendListService.sendFriendRequest(e.avatarId,e.avatarName)}isFriendRequestAllowed(e){return!this._friendListService.avatarSearchResults.isRequestFriend(e)}get searchQuery(){return this._searchQuery}set searchQuery(e){this._searchQuery=e}get friends(){return this._friendListService.avatarSearchResults.friends}get others(){return this._friendListService.avatarSearchResults.others}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(Tt.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-friendlist-search-component",""]],attrs:Wt,decls:17,vars:22,consts:[[1,"text-center",2,"margin","5px"],["type","text",3,"ngModel","keydown.enter","ngModelChange"],["type","button",1,"btn","btn-success","btn-sm",2,"display","inline-block","margin-left","5px",3,"click"],["type","button","aria-controls","collapseFriends",1,"btn","btn-primary","w-100",3,"click"],["id","collapseFriends",3,"ngbCollapse","ngbCollapseChange"],["class","btn-group w-100 mb-1",4,"ngFor","ngForOf"],[4,"ngIf"],["type","button","aria-controls","collapseOthers",1,"btn","btn-primary","w-100",3,"click"],["id","collapseOthers",3,"ngbCollapse","ngbCollapseChange"],[1,"btn-group","w-100","mb-1"],["type","button",1,"btn","btn-secondary","w-100"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-id-card"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fas","fa-times"],["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"fas","fa-plus"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"input",1),i.nc("keydown.enter",function(){return t.searchAvatar()})("ngModelChange",function(e){return t.searchQuery=e}),i.cc(),i.dc(2,"button",2),i.nc("click",function(){return t.searchAvatar()}),i.Wc(3),i.rc(4,"translate"),i.cc(),i.cc(),i.dc(5,"button",3),i.nc("click",function(){return t.friendsCollapsed=!t.friendsCollapsed}),i.Wc(6),i.rc(7,"translate"),i.cc(),i.dc(8,"div",4),i.nc("ngbCollapseChange",function(e){return t.friendsCollapsed=e}),i.Uc(9,Kt,7,1,"div",5),i.Uc(10,Ft,3,3,"p",6),i.cc(),i.dc(11,"button",7),i.nc("click",function(){return t.othersCollapsed=!t.othersCollapsed}),i.Wc(12),i.rc(13,"translate"),i.cc(),i.dc(14,"div",8),i.nc("ngbCollapseChange",function(e){return t.othersCollapsed=e}),i.Uc(15,Vt,7,2,"div",5),i.Uc(16,qt,3,3,"p",6),i.cc()),2&e&&(i.Kb(1),i.yc("ngModel",t.searchQuery),i.Kb(2),i.Xc(i.sc(4,12,"generic.search")),i.Kb(2),i.Lb("aria-expanded",!t.friendsCollapsed),i.Kb(1),i.Yc(" ",i.uc(7,14,"friendlist.search.friendscaption","cnt",t.friends?t.friends.length.toString():"0"),"\n"),i.Kb(2),i.yc("ngbCollapse",t.friendsCollapsed),i.Kb(1),i.yc("ngForOf",t.friends),i.Kb(1),i.yc("ngIf",0===(null==t.friends?null:t.friends.length)),i.Kb(1),i.Lb("aria-expanded",!t.othersCollapsed),i.Kb(1),i.Yc(" ",i.uc(13,18,"friendlist.search.otherscaption","cnt",t.others?t.others.length.toString():"0"),"\n"),i.Kb(2),i.yc("ngbCollapse",t.othersCollapsed),i.Kb(1),i.yc("ngForOf",t.others),i.Kb(1),i.yc("ngIf",0===(null==t.others?null:t.others.length)))},directives:[l.b,l.l,l.n,d.b,a.m,a.n],pipes:[J.a],encapsulation:2}),e})();const Bt=["nitro-friendlist-friends-viewer-component",""];function Gt(e,t){if(1&e&&(i.dc(0,"span",9),i.Wc(1),i.cc()),2&e){const e=i.qc();i.Kb(1),i.Xc(e.totalFriendRequests)}}function Zt(e,t){if(1&e&&i.Zb(0,"div",10),2&e){const e=i.qc();i.yc("threadSelector",e.threadSelector)("onlineOnly",e.onlineOnly)}}function Xt(e,t){1&e&&i.Zb(0,"div",11)}function jt(e,t){1&e&&i.Zb(0,"div",12)}const Yt=function(e){return{active:e}};let zt=(()=>{class e{constructor(e,t){this._friendListService=e,this._ngZone=t,this.threadSelector=null,this._requestsShowing=!1,this._friendsShowing=!0,this._onlineOnly=!0,this._searchShowing=!1}showOnlineFriends(){this.showFriends(),this._onlineOnly=!0}showFriends(){this._requestsShowing=!1,this._searchShowing=!1,this._friendsShowing=!0,this._onlineOnly=!1}showRequests(){this._requestsShowing=!0,this._friendsShowing=!1,this._onlineOnly=!1,this._searchShowing=!1}showSearch(){this._searchShowing=!0,this._friendsShowing=!1,this._requestsShowing=!1,this._onlineOnly=!1}get requestsShowing(){return this._requestsShowing}get friendsShowing(){return this._friendsShowing}get onlineOnly(){return this._onlineOnly}get searchShowing(){return this._searchShowing}get totalFriendRequests(){return this._friendListService.requests.size}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(Tt.a),i.Yb(i.H))},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-friendlist-friends-viewer-component",""]],inputs:{threadSelector:"threadSelector"},attrs:Bt,decls:19,vars:28,consts:[[1,"btn-group","w-100","mb-1"],["type","button",1,"btn","btn-secondary",3,"ngClass","click"],["class","badge badge-danger ml-1","style","font-size:12px;",4,"ngIf"],["type","button",1,"btn","btn-success",3,"ngClass","click"],[1,"d-flex","w-100"],[1,"position-relative","w-100",2,"min-height","350px","max-height","350px","height","350px"],["nitro-friendlist-friends-list-component","","class","w-100",3,"threadSelector","onlineOnly",4,"ngIf"],["nitro-friendlist-requests-list-component","","class","w-100",4,"ngIf"],["nitro-friendlist-search-component","","class","w-100",4,"ngIf"],[1,"badge","badge-danger","ml-1",2,"font-size","12px"],["nitro-friendlist-friends-list-component","",1,"w-100",3,"threadSelector","onlineOnly"],["nitro-friendlist-requests-list-component","",1,"w-100"],["nitro-friendlist-search-component","",1,"w-100"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"button",1),i.nc("click",function(){return t.showOnlineFriends()}),i.Wc(2),i.rc(3,"translate"),i.cc(),i.dc(4,"button",1),i.nc("click",function(){return t.showFriends()}),i.Wc(5),i.rc(6,"translate"),i.cc(),i.dc(7,"button",1),i.nc("click",function(){return t.showRequests()}),i.Wc(8),i.rc(9,"translate"),i.Uc(10,Gt,2,1,"span",2),i.cc(),i.dc(11,"button",3),i.nc("click",function(){return t.showSearch()}),i.Wc(12),i.rc(13,"translate"),i.cc(),i.cc(),i.dc(14,"div",4),i.dc(15,"perfect-scrollbar",5),i.Uc(16,Zt,1,2,"div",6),i.Uc(17,Xt,1,0,"div",7),i.Uc(18,jt,1,0,"div",8),i.cc(),i.cc()),2&e&&(i.Kb(1),i.yc("ngClass",i.Cc(20,Yt,t.friendsShowing&&t.onlineOnly)),i.Kb(1),i.Xc(i.sc(3,12,"friendlist.online")),i.Kb(2),i.yc("ngClass",i.Cc(22,Yt,t.friendsShowing&&!t.onlineOnly)),i.Kb(1),i.Xc(i.sc(6,14,"friendlist.friends.all")),i.Kb(2),i.yc("ngClass",i.Cc(24,Yt,t.requestsShowing)),i.Kb(1),i.Xc(i.sc(9,16,"friendbar.requests.title")),i.Kb(2),i.yc("ngIf",t.totalFriendRequests>0),i.Kb(1),i.yc("ngClass",i.Cc(26,Yt,t.searchShowing)),i.Kb(1),i.Xc(i.sc(13,18,"generic.search")),i.Kb(4),i.yc("ngIf",t.friendsShowing),i.Kb(1),i.yc("ngIf",t.requestsShowing),i.Kb(1),i.yc("ngIf",t.searchShowing))},directives:[a.l,a.n,m.b,At,Pt,Ht],pipes:[J.a],encapsulation:2}),e})();var $t=n("zbtH");const Qt=["nitro-friendlist-thread-list-component",""],Jt=function(e){return{active:e}};function en(e,t){if(1&e){const e=i.ec();i.dc(0,"button",1),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().selectThread(n)}),i.Wc(1),i.cc()}if(2&e){const e=t.$implicit,n=i.qc();i.yc("ngClass",i.Cc(2,Jt,n.currentThread===e)),i.Kb(1),i.Xc(e.participant.name)}}let tn=(()=>{class e{constructor(e,t){this._friendListService=e,this._ngZone=t,this.currentThread=null,this.threadSelector=null}selectThread(e){e&&this.threadSelector&&this.threadSelector(e)}get threads(){const e=Array.from(this._friendListService.threads.values());return e.sort((e,t)=>t.lastUpdated-e.lastUpdated),e}}return e.THREAD_SELECTED="FLTLC_THREAD_SELECTED",e.\u0275fac=function(t){return new(t||e)(i.Yb(Tt.a),i.Yb(i.H))},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-friendlist-thread-list-component",""]],inputs:{currentThread:"currentThread",threadSelector:"threadSelector"},attrs:Qt,decls:1,vars:1,consts:[["type","button","class","btn btn-secondary w-100 mb-1",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-secondary","w-100","mb-1",3,"ngClass","click"]],template:function(e,t){1&e&&i.Uc(0,en,2,4,"button",0),2&e&&i.yc("ngForOf",t.threads)},directives:[a.m,a.l],encapsulation:2}),e})();var nn=n("tD+c"),rn=n("gs82"),sn=n("SKnt"),cn=n("iZKx"),on=n("3E0/"),an=n("M1bJ"),ln=n("WnqX");const dn=["threadScroller"],un=["nitro-friendlist-thread-viewer-component",""];function hn(e,t){if(1&e){const e=i.ec();i.dc(0,"div",19),i.nc("click",function(){return i.Lc(e),i.qc().followParticipant()}),i.Zb(1,"i",20),i.cc()}}function gn(e,t){if(1&e){const e=i.ec();i.dc(0,"button",21),i.nc("click",function(){i.Lc(e);const n=t.index;return i.qc().changeRelation(n)}),i.Wc(1),i.cc()}if(2&e){const e=t.$implicit;i.Kb(1),i.Xc(e)}}const mn=function(e){return[e]};function fn(e,t){if(1&e&&(i.dc(0,"div",22),i.dc(1,"div",23),i.Wc(2),i.cc(),i.cc()),2&e){const e=t.$implicit,n=i.qc();i.yc("ngClass",i.Cc(2,mn,e.senderId===n.participant.id?"thread-viewer-list-left":"thread-viewer-list-right")),i.Kb(2),i.Xc(e.message)}}let pn=(()=>{class e{constructor(e,t,n){this._friendListService=e,this._settingsService=t,this._ngZone=n,this.thread=null,this._subscription=null}ngOnChanges(e){const t=e.thread.previousValue,n=e.thread.currentValue;n&&n!==t?this.prepareThread():n||n===t||this.unsubscribe()}ngOnDestroy(){this.unsubscribe()}ngAfterViewInit(){this.scrollToBottom()}unsubscribe(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}prepareThread(){this.unsubscribe(),this._subscription=this.thread.emitter.asObservable().pipe(Object(on.a)(1)).subscribe(e=>{switch(e){case an.a.MESSAGE_RECEIVED:return void this.messageReceived()}})}messageReceived(){this.scrollToBottom()}sendMessage(e){e&&e.length&&(this._ngZone.run(()=>{this.thread.insertChat(oe.a.instance.sessionDataManager.userId,e,0,null),this.thread.setRead()}),oe.a.instance.communication.connection.send(new rn.a(this.participant.id,e)))}changeRelation(e){this.participant&&-1!==cn.a.RELATIONSHIP_TYPES.indexOf(e)&&oe.a.instance.communication.connection.send(new sn.a(this.participant.id,e))}followParticipant(){this.participant&&(this._settingsService.toggleFriendList(),oe.a.instance.communication.connection.send(new nn.a(this.participant.id)))}onKeyDownEvent(e){if(!e)return;const t=e.target;if(t)switch(e.key){case"Enter":return this.sendMessage(t.value),void(t.value="")}}scrollToBottom(){this.threadScroller&&this.threadScroller.directiveRef.scrollToBottom(0,200)}get participant(){return this.thread.participant}get chats(){return this.thread.chats}get relations(){return cn.a.RELATIONSHIP_NAMES}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(Tt.a),i.Yb(ln.a),i.Yb(i.H))},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-friendlist-thread-viewer-component",""]],viewQuery:function(e,t){if(1&e&&i.cd(dn,1),2&e){let e;i.Hc(e=i.oc())&&(t.threadScroller=e.first)}},inputs:{thread:"thread"},features:[i.Ib],attrs:un,decls:23,vars:12,consts:[[1,"nitro-friendlist-thread-viewer-component"],[1,"d-flex","flex-row","thread-viewer-user","mb-1","justify-content-between"],[1,"d-flex","flex-row"],["nitro-avatar-image","",1,"avatar-img",3,"headOnly","figure","direction"],[1,"thread-viewer-user-info"],[1,"ml-2","p-1","rounded-circle","align-self-center",3,"ngClass"],[1,"d-block","text-muted","small","text-truncate"],["ngbDropdown","",1,"input-group-prepend","align-self-center"],[1,"btn-group"],["class","btn btn-sm btn-dgreen align-self-center",3,"click",4,"ngIf"],["type","button","ngbDropdownToggle","",1,"btn","btn-primary","btn-sm"],["ngbDropdownMenu","",1,"dropdown-menu"],["class","dropdown-item small","ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],[1,"position-relative","w-100","my-1",2,"min-height","299px","max-height","299px","height","299px"],["threadScroller",""],[1,"thread-viewer-list"],["class","thread-viewer-list-item mb-1",3,"ngClass",4,"ngFor","ngForOf"],[1,"thread-viewer-input"],["type","text","maxLength","420",1,"thread-viewer-input","form-control",3,"keydown.enter"],[1,"btn","btn-sm","btn-dgreen","align-self-center",3,"click"],[1,"fas","fa-arrow-right"],["ngbDropdownItem","",1,"dropdown-item","small",3,"click"],[1,"thread-viewer-list-item","mb-1",3,"ngClass"],[1,"thread-viewer-list-item-message","p-2"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"div",2),i.Zb(3,"div",3),i.dc(4,"div",4),i.dc(5,"b",2),i.Wc(6),i.Zb(7,"div",5),i.cc(),i.dc(8,"span",6),i.Wc(9),i.cc(),i.cc(),i.cc(),i.dc(10,"div",7),i.dc(11,"div",8),i.Uc(12,hn,2,0,"div",9),i.dc(13,"button",10),i.Wc(14),i.cc(),i.dc(15,"div",11),i.Uc(16,gn,2,1,"button",12),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(17,"perfect-scrollbar",13,14),i.dc(19,"div",15),i.Uc(20,fn,3,4,"div",16),i.cc(),i.cc(),i.dc(21,"div",17),i.dc(22,"input",18),i.nc("keydown.enter",function(e){return t.onKeyDownEvent(e)}),i.cc(),i.cc(),i.cc()),2&e&&(i.Kb(3),i.yc("headOnly",1)("figure",t.thread.participant.figure)("direction",2),i.Kb(3),i.Xc(t.participant.name),i.Kb(1),i.yc("ngClass",i.Cc(10,mn,t.participant.online?"bg-success":"bg-danger")),i.Kb(2),i.Xc(t.participant.motto),i.Kb(3),i.yc("ngIf",t.participant.online),i.Kb(2),i.Xc(t.relations[t.thread.participant.relationshipStatus]),i.Kb(2),i.yc("ngForOf",t.relations),i.Kb(4),i.yc("ngForOf",t.chats))},directives:[X.a,a.l,d.c,a.n,d.g,d.e,a.m,m.b,d.d],encapsulation:2}),e})(),_n=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},providers:[Tt.a],imports:[[v]]}),e})();i.Oc($t.a,[a.n,$.a,Q.a,a.l,m.b,tn,zt,pn],[J.a]);var bn=n("nrNS"),vn=n("1/Ir");const En=["nitro-group-image-selector-component",""],Sn=function(e){return{active:e}};function yn(e,t){if(1&e){const e=i.ec();i.dc(0,"button",6),i.nc("click",function(){return i.Lc(e),i.qc().selectPart(0)}),i.Zb(1,"i",7),i.cc()}if(2&e){const e=i.qc();i.yc("ngClass",i.Cc(1,Sn,0===e.part.key))}}function In(e,t){if(1&e){const e=i.ec();i.dc(0,"button",6),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().selectPart(n.key)}),i.Zb(1,"nitro-badge",8),i.cc()}if(2&e){const e=t.$implicit,n=i.qc();i.yc("ngClass",i.Cc(3,Sn,n.part.key===e.key)),i.Kb(1),i.yc("badge",n.getBadgeCode(e.key))("isGroup",!0)}}let wn=(()=>{class e{constructor(){this.onSelect=new i.r}getBadgeCode(e){return(this.part.isBase?"b":"s")+(e<100?"0":"")+(e<10?"0":"")+e+(this.part.color<10?"0"+this.part.color:this.part.color)+4}selectPart(e){this.onSelect.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-group-image-selector-component",""]],inputs:{items:"items",part:"part"},outputs:{onSelect:"onSelect"},attrs:En,decls:7,vars:4,consts:[[1,"nitro-group-image-selector-component","mb-3"],[2,"min-height","414px","max-height","414px","height","414px"],[1,"grid-container"],[1,"grid-items","grid-8"],["class","item-detail btn btn-primary btn-sm p-0",3,"ngClass","click",4,"ngIf"],["class","item-detail btn btn-primary btn-sm p-0",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"item-detail","btn","btn-primary","btn-sm","p-0",3,"ngClass","click"],[1,"fas","fa-times"],[3,"badge","isGroup"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"perfect-scrollbar",1),i.dc(2,"div",2),i.dc(3,"div",3),i.Uc(4,yn,2,3,"button",4),i.Uc(5,In,2,5,"button",5),i.rc(6,"keyvalue"),i.cc(),i.cc(),i.cc(),i.cc()),2&e&&(i.Kb(4),i.yc("ngIf",!t.part.isBase),i.Kb(1),i.yc("ngForOf",i.sc(6,2,t.items)))},directives:[m.b,a.n,a.m,a.l,It.a],pipes:[a.h],encapsulation:2}),e})();function Cn(e,t){if(1&e&&i.Zb(0,"nitro-badge",4),2&e){const e=i.qc().$implicit;i.yc("badge",e.value.code)("isGroup",!0)}}function Rn(e,t){1&e&&i.Zb(0,"i",19)}function Tn(e,t){if(1&e){const e=i.ec();i.dc(0,"button",20),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().$implicit.value.position=n}),i.cc()}if(2&e){const e=t.$implicit,n=i.qc().$implicit;i.yc("ngClass",n.value.position===e?"btn-light":"btn-primary")}}const On=function(e){return{backgroundColor:e}};function Mn(e,t){if(1&e){const e=i.ec();i.dc(0,"button",21),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().$implicit.value.color=n.key}),i.cc()}2&e&&i.Qc(i.Cc(2,On,"#"+t.$implicit.value))}const Un=function(e){return{opacity:e}};function xn(e,t){if(1&e){const e=i.ec();i.dc(0,"div",9),i.dc(1,"button",10),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc(2).openPartSelector(n.value)}),i.Uc(2,Cn,1,2,"nitro-badge",11),i.Uc(3,Rn,1,0,"i",12),i.cc(),i.dc(4,"div",13),i.dc(5,"div",14),i.Uc(6,Tn,1,1,"button",15),i.cc(),i.cc(),i.dc(7,"div",16),i.dc(8,"div",17),i.Uc(9,Mn,1,4,"button",18),i.rc(10,"keyvalue"),i.cc(),i.cc(),i.cc()}if(2&e){const e=t.$implicit,n=i.qc(2);i.Kb(2),i.yc("ngIf",e.value.code),i.Kb(1),i.yc("ngIf",!e.value.code),i.Kb(1),i.yc("ngStyle",i.Cc(7,Un,e.value.isBase?0:1)),i.Kb(2),i.yc("ngForOf",n.positions),i.Kb(3),i.yc("ngForOf",i.sc(10,5,n.badgePartColors))}}function An(e,t){if(1&e&&(i.dc(0,"div"),i.Uc(1,xn,11,9,"div",8),i.rc(2,"keyvalue"),i.cc()),2&e){const e=i.qc();i.Kb(1),i.yc("ngForOf",i.sc(2,1,e.groupSettings.badgeParts))}}function Dn(e,t){if(1&e){const e=i.ec();i.dc(0,"div",22),i.nc("onSelect",function(t){return i.Lc(e),i.qc().onPartSelected(t)}),i.cc()}if(2&e){const e=i.qc();i.yc("items",e.badgePartBeingSelected&&e.badgePartBeingSelected.isBase?e.badgeBases:e.badgeSymbols)("part",e.badgePartBeingSelected)}}let Ln=(()=>{class e{constructor(e){this._groupsService=e,this._clear()}_clear(){this._badgeBases=new Map,this._badgeSymbols=new Map,this._badgePartColors=new Map,this._badgePartBeingSelected=null,this._selectorVisible=!1,this._positions=[];for(let e=0;e<9;e++)this._positions.push(e)}ngOnInit(){this._clear(),this.loadBadgeData()}loadBadgeData(){this._badgeBases=this._groupsService.badgeBases,this._badgeSymbols=this._groupsService.badgeSymbols,this._badgePartColors=this._groupsService.badgePartColors,this.setDefaultValues&&(this.groupSettings.getBadgePart(0).key=this._badgeSymbols.keys().next().value,this.groupSettings.setPartsColor(this._badgePartColors.keys().next().value))}openPartSelector(e){this._badgePartBeingSelected=e,this._selectorVisible=!0}onPartSelected(e){this._badgePartBeingSelected.key=e,this._badgePartBeingSelected=null,this._selectorVisible=!1}get badgePartBeingSelected(){return this._badgePartBeingSelected}get selectorVisible(){return this._selectorVisible}get positions(){return this._positions}get badgeBases(){return this._badgeBases}get badgeSymbols(){return this._badgeSymbols}get badgePartColors(){return this._badgePartColors}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(vn.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-group-creator-tab-badge-component"]],inputs:{groupSettings:"groupSettings",setDefaultValues:"setDefaultValues"},outputs:{groupSettings:"groupSettings"},decls:10,vars:7,consts:[[1,"mb-3"],[1,"row"],[1,"col-3"],[1,"btn","btn-primary",2,"width","120px","height","67px"],[3,"badge","isGroup"],[1,"col-9"],[4,"ngIf"],["nitro-group-image-selector-component","",3,"items","part","onSelect",4,"ngIf"],["class","d-flex flex-row justify-content-between mb-3",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","justify-content-between","mb-3"],[1,"btn","btn-primary",2,"width","120px","height","67px",3,"click"],[3,"badge","isGroup",4,"ngIf"],["class","fas fa-plus","style","width: 39px",4,"ngIf"],[1,"grid-container","ml-3",3,"ngStyle"],[1,"grid-items","grid-3","pb-1"],["class","item-detail btn btn-sm",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"grid-container","ml-3"],[1,"grid-items","grid-8","pb-1"],["class","item-detail btn btn-primary btn-sm",3,"style","click",4,"ngFor","ngForOf"],[1,"fas","fa-plus",2,"width","39px"],[1,"item-detail","btn","btn-sm",3,"ngClass","click"],[1,"item-detail","btn","btn-primary","btn-sm",3,"click"],["nitro-group-image-selector-component","",3,"items","part","onSelect"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.Wc(1),i.rc(2,"translate"),i.cc(),i.dc(3,"div",1),i.dc(4,"div",2),i.dc(5,"button",3),i.Zb(6,"nitro-badge",4),i.cc(),i.cc(),i.dc(7,"div",5),i.Uc(8,An,3,3,"div",6),i.Uc(9,Dn,1,2,"div",7),i.cc(),i.cc()),2&e&&(i.Kb(1),i.Xc(i.sc(2,5,"group.edit.badge.badge")),i.Kb(5),i.yc("badge",t.groupSettings.currentBadgeCode)("isGroup",!0),i.Kb(2),i.yc("ngIf",!t.selectorVisible),i.Kb(1),i.yc("ngIf",t.selectorVisible))},directives:[It.a,a.n,a.m,a.o,a.l,wn],pipes:[J.a,a.h],encapsulation:2}),e})();const kn=function(e){return{backgroundColor:e}};function Pn(e,t){if(1&e){const e=i.ec();i.dc(0,"button",10),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().groupSettings.colorA=n.key}),i.cc()}2&e&&i.Qc(i.Cc(2,kn,"#"+t.$implicit.value))}function Nn(e,t){if(1&e){const e=i.ec();i.dc(0,"button",10),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().groupSettings.colorB=n.key}),i.cc()}2&e&&i.Qc(i.Cc(2,kn,"#"+t.$implicit.value))}let Wn=(()=>{class e{constructor(e){this._groupsService=e}ngOnInit(){this.loadColorsData()}loadColorsData(){this._groupColorsA=this._groupsService.groupColorsA,this._groupColorsB=this._groupsService.groupColorsB,this.setDefaultValues&&(this.groupSettings.colorA=this._groupColorsA.keys().next().value,this.groupSettings.colorB=this._groupColorsB.keys().next().value)}get groupColorsA(){return this._groupColorsA}get groupColorsB(){return this._groupColorsB}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(vn.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-group-creator-tab-colors-component"]],inputs:{groupSettings:"groupSettings",setDefaultValues:"setDefaultValues"},outputs:{groupSettings:"groupSettings"},decls:27,vars:26,consts:[[1,"mb-3"],[1,"d-flex","justify-content-between","mb-3"],[1,"mr-3"],[1,"mb-1"],[1,"btn-group",2,"height","67px","width","110px"],[1,"btn","btn-primary","btn-lg"],[1,"grid-container"],[1,"grid-items","grid-9","pb-1"],["class","item-detail btn btn-primary btn-sm",3,"style","click",4,"ngFor","ngForOf"],[1,"grid-items","grid-6","pb-1"],[1,"item-detail","btn","btn-primary","btn-sm",3,"click"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.Wc(1),i.rc(2,"translate"),i.cc(),i.dc(3,"div",1),i.dc(4,"div",2),i.dc(5,"div",3),i.Wc(6),i.rc(7,"translate"),i.cc(),i.dc(8,"div",4),i.Zb(9,"button",5),i.Zb(10,"button",5),i.cc(),i.cc(),i.dc(11,"div",2),i.dc(12,"div",3),i.Wc(13),i.rc(14,"translate"),i.cc(),i.dc(15,"div",6),i.dc(16,"div",7),i.Uc(17,Pn,1,4,"button",8),i.rc(18,"keyvalue"),i.cc(),i.cc(),i.cc(),i.dc(19,"div"),i.dc(20,"div",3),i.Wc(21),i.rc(22,"translate"),i.cc(),i.dc(23,"div",6),i.dc(24,"div",9),i.Uc(25,Nn,1,4,"button",8),i.rc(26,"keyvalue"),i.cc(),i.cc(),i.cc(),i.cc()),2&e&&(i.Kb(1),i.Xc(i.sc(2,10,"group.create.stepcaption.3")),i.Kb(5),i.Xc(i.sc(7,12,"group.edit.color.guild.color")),i.Kb(3),i.Qc(i.Cc(22,kn,"#"+t.groupColorsA.get(t.groupSettings.colorA))),i.Kb(1),i.Qc(i.Cc(24,kn,"#"+t.groupColorsB.get(t.groupSettings.colorB))),i.Kb(3),i.Xc(i.sc(14,14,"group.edit.color.primary.color")),i.Kb(4),i.yc("ngForOf",i.sc(18,16,t.groupColorsA)),i.Kb(4),i.Xc(i.sc(22,18,"group.edit.color.secondary.color")),i.Kb(4),i.yc("ngForOf",i.sc(26,20,t.groupColorsB)))},directives:[a.m],pipes:[J.a,a.h],encapsulation:2}),e})();const Kn=function(e){return{backgroundColor:e}};let Fn=(()=>{class e{constructor(e){this._groupsService=e}ngOnInit(){this.loadColorsData()}loadColorsData(){this._groupColorsA=this._groupsService.groupColorsA,this._groupColorsB=this._groupsService.groupColorsB}get groupColorsA(){return this._groupColorsA}get groupColorsB(){return this._groupColorsB}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(vn.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-group-creator-tab-confirmation-component"]],inputs:{groupSettings:"groupSettings",groupCost:"groupCost"},decls:26,vars:29,consts:[[1,"mb-3"],[1,"row"],[1,"col-4"],[1,"mb-1"],[1,"btn","btn-primary","mb-3",2,"width","120px","height","67px"],[3,"badge","isGroup"],[1,"btn-group",2,"height","67px","width","120px"],[1,"btn","btn-primary","btn-lg"],[1,"col-8"],[1,"small","mb-3"],[1,"mb-2",3,"innerHtml"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.Wc(1),i.rc(2,"translate"),i.cc(),i.dc(3,"div",1),i.dc(4,"div",2),i.dc(5,"div",3),i.Wc(6),i.rc(7,"translate"),i.cc(),i.dc(8,"button",4),i.Zb(9,"nitro-badge",5),i.cc(),i.dc(10,"div",3),i.Wc(11),i.rc(12,"translate"),i.cc(),i.dc(13,"div",6),i.Zb(14,"button",7),i.Zb(15,"button",7),i.cc(),i.cc(),i.dc(16,"div",8),i.dc(17,"div"),i.Wc(18),i.cc(),i.dc(19,"div",9),i.Wc(20),i.cc(),i.Zb(21,"div",10),i.rc(22,"translate"),i.dc(23,"div"),i.Wc(24),i.rc(25,"translate"),i.cc(),i.cc(),i.cc()),2&e&&(i.Kb(1),i.Xc(i.sc(2,13,"group.create.stepcaption.4")),i.Kb(5),i.Xc(i.sc(7,15,"group.create.confirm.guildbadge")),i.Kb(3),i.yc("badge",t.groupSettings.currentBadgeCode)("isGroup",!0),i.Kb(2),i.Xc(i.sc(12,17,"group.create.confirm.guildcolors")),i.Kb(3),i.Qc(i.Cc(25,Kn,"#"+t.groupColorsA.get(t.groupSettings.colorA))),i.Kb(1),i.Qc(i.Cc(27,Kn,"#"+t.groupColorsB.get(t.groupSettings.colorB))),i.Kb(3),i.Xc(t.groupSettings.name),i.Kb(2),i.Xc(t.groupSettings.description),i.Kb(1),i.yc("innerHtml",i.sc(22,19,"group.create.confirm.info"),i.Mc),i.Kb(3),i.Xc(i.uc(25,21,"group.create.confirm.buyinfo","amount",t.groupCost)))},directives:[It.a],pipes:[J.a],encapsulation:2}),e})();function Vn(e,t){1&e&&(i.dc(0,"small",8),i.Wc(1),i.rc(2,"translate"),i.cc()),2&e&&(i.Kb(1),i.Xc(i.sc(2,1,"group.edit.error.no.name.or.room.selected")))}function qn(e,t){if(1&e&&(i.dc(0,"option",9),i.Wc(1),i.cc()),2&e){const e=t.$implicit;i.yc("value",e.key),i.Kb(1),i.Xc(e.value)}}const Hn=function(e){return{"is-invalid":e}};let Bn=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-group-creator-tab-info-component"]],inputs:{groupSettings:"groupSettings",showNameError:"showNameError",showDescriptionError:"showDescriptionError",showRoomError:"showRoomError",availableRooms:"availableRooms"},outputs:{groupSettings:"groupSettings"},decls:27,vars:34,consts:[[1,"mb-3"],["class","form-text text-muted invalid-feedback mb-3",4,"ngIf"],[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngClass","ngModel","ngModelChange"],[1,"form-control","form-control-sm",3,"ngClass","ngModel","ngModelChange"],["selected","","disabled","","value","0"],[3,"value",4,"ngFor","ngForOf"],[1,"form-text","text-muted"],[1,"form-text","text-muted","invalid-feedback","mb-3"],[3,"value"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.Wc(1),i.rc(2,"translate"),i.cc(),i.Uc(3,Vn,3,3,"small",1),i.dc(4,"div",2),i.dc(5,"label"),i.Wc(6),i.rc(7,"translate"),i.cc(),i.dc(8,"input",3),i.nc("ngModelChange",function(e){return t.groupSettings.name=e}),i.cc(),i.cc(),i.dc(9,"div",2),i.dc(10,"label"),i.Wc(11),i.rc(12,"translate"),i.cc(),i.dc(13,"textarea",4),i.nc("ngModelChange",function(e){return t.groupSettings.description=e}),i.cc(),i.cc(),i.dc(14,"div",2),i.dc(15,"label"),i.Wc(16),i.rc(17,"translate"),i.cc(),i.dc(18,"select",4),i.nc("ngModelChange",function(e){return t.groupSettings.roomId=e}),i.dc(19,"option",5),i.Wc(20),i.rc(21,"translate"),i.cc(),i.Uc(22,qn,2,2,"option",6),i.rc(23,"keyvalue"),i.cc(),i.dc(24,"small",7),i.Wc(25),i.rc(26,"translate"),i.cc(),i.cc()),2&e&&(i.Kb(1),i.Xc(i.sc(2,14,"group.edit.tabcaption.1")),i.Kb(2),i.yc("ngIf",t.showNameError||t.showRoomError),i.Kb(3),i.Xc(i.sc(7,16,"group.edit.name")),i.Kb(2),i.yc("ngClass",i.Cc(28,Hn,t.showNameError))("ngModel",t.groupSettings.name),i.Kb(3),i.Xc(i.sc(12,18,"group.edit.desc")),i.Kb(2),i.yc("ngClass",i.Cc(30,Hn,t.showDescriptionError))("ngModel",t.groupSettings.description),i.Kb(3),i.Xc(i.sc(17,20,"group.edit.base")),i.Kb(2),i.yc("ngClass",i.Cc(32,Hn,t.showRoomError))("ngModel",t.groupSettings.roomId),i.Kb(2),i.Xc(i.sc(21,22,"group.edit.base.select.room")),i.Kb(2),i.yc("ngForOf",i.sc(23,24,t.availableRooms)),i.Kb(3),i.Xc(i.sc(26,26,"group.edit.base.warning")))},directives:[a.n,l.b,a.l,l.l,l.n,l.t,l.o,l.v,a.m],pipes:[J.a,a.h],encapsulation:2}),e})();var Gn=n("7XZB");const Zn=function(e){return{"is-invalid":e}};let Xn=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-group-manager-tab-info-component"]],inputs:{groupSettings:"groupSettings",showNameError:"showNameError",showDescriptionError:"showDescriptionError"},outputs:{groupSettings:"groupSettings"},decls:13,vars:17,consts:[[1,"mb-3"],[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngClass","ngModel","ngModelChange"],[1,"form-control","form-control-sm",3,"ngClass","ngModel","ngModelChange"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.Wc(1),i.rc(2,"translate"),i.cc(),i.dc(3,"div",1),i.dc(4,"label"),i.Wc(5),i.rc(6,"translate"),i.cc(),i.dc(7,"input",2),i.nc("ngModelChange",function(e){return t.groupSettings.name=e}),i.cc(),i.cc(),i.dc(8,"div",1),i.dc(9,"label"),i.Wc(10),i.rc(11,"translate"),i.cc(),i.dc(12,"textarea",3),i.nc("ngModelChange",function(e){return t.groupSettings.description=e}),i.cc(),i.cc()),2&e&&(i.Kb(1),i.Xc(i.sc(2,7,"group.edit.tabcaption.1")),i.Kb(4),i.Xc(i.sc(6,9,"group.edit.name")),i.Kb(2),i.yc("ngClass",i.Cc(13,Zn,t.showNameError))("ngModel",t.groupSettings.name),i.Kb(3),i.Xc(i.sc(11,11,"group.edit.desc")),i.Kb(2),i.yc("ngClass",i.Cc(15,Zn,t.showDescriptionError))("ngModel",t.groupSettings.description))},directives:[l.b,a.l,l.l,l.n],pipes:[J.a],encapsulation:2}),e})(),jn=(()=>{class e{constructor(){this._groupSettings=null,this._state="0",this._canMembersDecorate=!1}get groupSettings(){return this._groupSettings}set groupSettings(e){this._groupSettings=e,this._state=this.groupSettings.state.toString(),this._canMembersDecorate=this.groupSettings.canMembersDecorate}get state(){return this._state}set state(e){this._state=e,this._groupSettings.state=parseInt(e)}get canMembersDecorate(){return this._canMembersDecorate}set canMembersDecorate(e){this._canMembersDecorate=e,this._groupSettings.canMembersDecorate=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-group-manager-tab-preferences-component"]],inputs:{groupSettings:"groupSettings"},decls:41,vars:34,consts:[[1,"mb-3"],[1,"mb-1"],[1,"form-check","mb-1"],["type","radio","name","state","id","radioState0","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],["for","radioState0",1,"form-check-label"],[1,"fas","fa-user-plus","mr-2"],["id","passwordHelpBlock",1,"form-text","text-muted"],["type","radio","name","state","id","radioState1","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["for","radioState1",1,"form-check-label"],[1,"fas","fa-key","mr-2"],[1,"form-check","mb-3"],["type","radio","name","state","id","radioState2","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["for","radioState2",1,"form-check-label"],[1,"fas","fa-ban","mr-2"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.Wc(1),i.rc(2,"translate"),i.cc(),i.dc(3,"div",1),i.Wc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"div",2),i.dc(7,"input",3),i.nc("ngModelChange",function(e){return t.state=e}),i.cc(),i.dc(8,"label",4),i.Zb(9,"i",5),i.Wc(10),i.rc(11,"translate"),i.cc(),i.dc(12,"small",6),i.Wc(13),i.rc(14,"translate"),i.cc(),i.cc(),i.dc(15,"div",2),i.dc(16,"input",7),i.nc("ngModelChange",function(e){return t.state=e}),i.cc(),i.dc(17,"label",8),i.Zb(18,"i",9),i.Wc(19),i.rc(20,"translate"),i.cc(),i.dc(21,"small",6),i.Wc(22),i.rc(23,"translate"),i.cc(),i.cc(),i.dc(24,"div",10),i.dc(25,"input",11),i.nc("ngModelChange",function(e){return t.state=e}),i.cc(),i.dc(26,"label",12),i.Zb(27,"i",13),i.Wc(28),i.rc(29,"translate"),i.cc(),i.dc(30,"small",6),i.Wc(31),i.rc(32,"translate"),i.cc(),i.cc(),i.dc(33,"div",1),i.Wc(34),i.rc(35,"translate"),i.cc(),i.dc(36,"div",10),i.dc(37,"input",14),i.nc("ngModelChange",function(e){return t.canMembersDecorate=e}),i.cc(),i.dc(38,"label",15),i.Wc(39),i.rc(40,"translate"),i.cc(),i.cc()),2&e&&(i.Kb(1),i.Xc(i.sc(2,14,"group.edit.tabcaption.5")),i.Kb(3),i.Xc(i.sc(5,16,"group.edit.settings.type.caption")),i.Kb(3),i.yc("ngModel",t.state),i.Kb(3),i.Yc("",i.sc(11,18,"group.edit.settings.type.regular.label")," "),i.Kb(3),i.Xc(i.sc(14,20,"group.edit.settings.type.regular.help")),i.Kb(3),i.yc("ngModel",t.state),i.Kb(3),i.Yc("",i.sc(20,22,"group.edit.settings.type.exclusive.label")," "),i.Kb(3),i.Xc(i.sc(23,24,"group.edit.settings.type.exclusive.help")),i.Kb(3),i.yc("ngModel",t.state),i.Kb(3),i.Yc("",i.sc(29,26,"group.edit.settings.type.private.label")," "),i.Kb(3),i.Xc(i.sc(32,28,"group.edit.settings.type.private.help")),i.Kb(3),i.Xc(i.sc(35,30,"group.edit.settings.rights.caption")),i.Kb(3),i.yc("ngModel",t.canMembersDecorate),i.Kb(2),i.Xc(i.sc(40,32,"group.edit.settings.rights.members.help")))},directives:[l.q,l.b,l.l,l.n,l.a],pipes:[J.a],encapsulation:2}),e})(),Yn=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},providers:[vn.a],imports:[[v]]}),e})();i.Oc(bn.a,[a.n,Bn,Ln,Wn,Fn],[J.a]),i.Oc(Gn.a,[a.n,Q.a,$.a,a.l,Xn,Ln,Wn,jn],[J.a]);var zn=n("jf0f");let $n=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},providers:[zn.a],imports:[[]]}),e})(),Qn=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},imports:[[v]]}),e})();var Jn=n("gBbo");class ei{constructor(e,t){this._inventoryService=e,this._ngZone=t}get canPlace(){return!!this._inventoryService.roomSession}get tradeRunning(){return this._inventoryService.controller.tradeService.running}offerOnMarketplace(){this._inventoryService.controller.furnitureService.offerOnMarketplace()}attemptItemPlacement(){this.canPlace&&!this.tradeRunning&&this._ngZone.runOutsideAngular(()=>this._inventoryService.controller.furnitureService.attemptItemPlacement())}attemptBotPlacement(){this.canPlace&&!this.tradeRunning&&this._ngZone.runOutsideAngular(()=>this._inventoryService.controller.botService.attemptBotPlacement())}attemptPetPlacement(){this.canPlace&&!this.tradeRunning&&this._ngZone.runOutsideAngular(()=>this._inventoryService.controller.petService.attemptPetPlacement())}}var ti=n("l1qq"),ni=n("cC5F");let ii=(()=>{class e{constructor(e){this.elementRef=e,this.badge="",this.isGroup=!1,this.asBackground=!1,this.needsUpdate=!0}ngOnInit(){this.needsUpdate&&this.buildBadge()}ngOnChanges(e){const t=e.badge;t&&t.previousValue!==t.currentValue&&(this.needsUpdate=!0);const n=e.isGroup;n&&n.previousValue!==n.currentValue&&(this.needsUpdate=!0),this.needsUpdate&&this.buildBadge()}buildBadge(){this.needsUpdate=!1;const e=this.badgeUrl;if(!e||!e.length)return;const t=this.elementRef.nativeElement;if(t)if(this.asBackground)t.style.backgroundImage=`url(${e})`;else{const n=t.getElementsByClassName("badge-image");let i=n.length;for(;i<0;)n[i].remove(),i--;const r=document.createElement("img");r.className="badge-image",r.src=e}}get badgeUrl(){return this.isGroup?oe.a.instance.getConfiguration("badge.asset.group.url").replace("%badgedata%",this.badge):oe.a.instance.getConfiguration("badge.asset.url").replace("%badgename%",this.badge)}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(i.p))},e.\u0275dir=i.Tb({type:e,selectors:[["","badge-image",""]],inputs:{badge:"badge",isGroup:"isGroup",asBackground:"asBackground"},features:[i.Ib]}),e})();const ri=["nitro-inventory-badges-component",""];function si(e,t){1&e&&(i.dc(0,"div",3),i.dc(1,"div",4),i.dc(2,"div",5),i.Zb(3,"div",6),i.cc(),i.dc(4,"div",7),i.dc(5,"b"),i.Wc(6),i.rc(7,"translate"),i.cc(),i.Zb(8,"br"),i.Wc(9),i.rc(10,"translate"),i.cc(),i.cc(),i.cc()),2&e&&(i.Kb(6),i.Xc(i.sc(7,2,"inventory.empty.title")),i.Kb(3),i.Yc(" ",i.sc(10,4,"inventory.effects.defaultdescription")," "))}const ci=function(e){return{active:e}};function oi(e,t){if(1&e){const e=i.ec();i.dc(0,"div",20),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc(2).selectBadge(n)}),i.Zb(1,"button",21),i.cc()}if(2&e){const e=t.$implicit,n=i.qc(2);i.Kb(1),i.yc("ngClass",i.Cc(3,ci,n.selectedBadge===e))("badge",e)("asBackground",!0)}}function ai(e,t){if(1&e){const e=i.ec();i.dc(0,"div",20),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc(2).selectBadge(n)}),i.Zb(1,"button",21),i.cc()}if(2&e){const e=t.$implicit,n=i.qc(2);i.Kb(1),i.yc("ngClass",i.Cc(3,ci,n.selectedBadge===e))("badge",e)("asBackground",!0)}}function li(e,t){if(1&e){const e=i.ec();i.dc(0,"div",17),i.dc(1,"div",18),i.dc(2,"div",22),i.dc(3,"div",23),i.Zb(4,"nitro-badge",24),i.dc(5,"div",25),i.dc(6,"p",26),i.Wc(7),i.cc(),i.cc(),i.cc(),i.dc(8,"div",27),i.dc(9,"button",28),i.nc("click",function(){return i.Lc(e),i.qc(2).wearBadge()}),i.Wc(10),i.rc(11,"translate"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc()}if(2&e){const e=i.qc(2);i.Kb(4),i.yc("badge",e.selectedBadge)("isGroup",!1),i.Kb(3),i.Xc(e.selectedBadgeName),i.Kb(2),i.yc("disabled",e.badgeButtonDisabled),i.Kb(1),i.Xc(i.sc(11,5,e.isWearingBadge(e.selectedBadge)?"inventory.badges.clearbadge":"inventory.badges.wearbadge"))}}function di(e,t){if(1&e&&(i.bc(0),i.dc(1,"div",8),i.dc(2,"perfect-scrollbar",9),i.dc(3,"div",10),i.Uc(4,oi,2,5,"div",11),i.cc(),i.cc(),i.cc(),i.dc(5,"div",12),i.dc(6,"p",13),i.Wc(7),i.rc(8,"translate"),i.cc(),i.dc(9,"div",14),i.dc(10,"div",15),i.Uc(11,ai,2,5,"div",11),i.cc(),i.cc(),i.cc(),i.Uc(12,li,12,7,"div",16),i.dc(13,"div",17),i.dc(14,"div",18),i.dc(15,"div",19),i.Wc(16),i.rc(17,"translate"),i.cc(),i.cc(),i.cc(),i.ac()),2&e){const e=i.qc();i.Kb(4),i.yc("ngForOf",e.badges),i.Kb(3),i.Xc(i.sc(8,5,"inventory.badges.activebadges")),i.Kb(4),i.yc("ngForOf",e.activeBadges),i.Kb(1),i.yc("ngIf",e.selectedBadge),i.Kb(4),i.Yc("",i.uc(17,7,"achievements_score_description","score",e.achievementsScore)," ")}}let ui=(()=>{class e extends ei{constructor(e,t,n,i){super(n,i),this._notificationService=e,this._achievementService=t,this._inventoryService=n,this._ngZone=i,this.selectedBadge=null}ngOnInit(){this._inventoryService.badgesController=this,this._inventoryService.controller.botService.isInitalized&&this.selectExistingGroupOrDefault(),this.prepareInventory()}ngOnDestroy(){this._inventoryService.controller.setAllBadgesSeen(),this._inventoryService.badgesController=null}prepareInventory(){!this._inventoryService.controller.badgeService.isInitalized||this._inventoryService.controller.badgeService.needsUpdate?this._inventoryService.controller.badgeService.requestLoad():this.selectExistingGroupOrDefault()}selectExistingGroupOrDefault(){this.selectedBadge&&this.badges.indexOf(this.selectedBadge)>-1?this.selectBadge(this.selectedBadge):this.selectFirstBadge()}selectFirstBadge(){let e=null;for(const t of this.badges)if(e){e=t;break}this.selectBadge(e)}selectBadge(e){this.selectedBadge!==e&&(this.selectedBadge=e)}wearBadge(){const e=this.selectedBadge;if(!e)return;this._inventoryService.controller.badgeService.wearOrClearBadge(e);const t=new Jn.a;for(const n of this.activeBadges)t.addActivatedBadge(n);oe.a.instance.communication.connection.send(t)}isWearingBadge(e){return this._inventoryService.controller.badgeService.isWearingBadge(e)}get hasBadgeItems(){return this.badges&&this.badges.length>0}get badges(){return this._inventoryService.controller.badgeService.badges}get activeBadges(){return this._inventoryService.controller.badgeService.activeBadges}get selectedBadgeName(){return this.selectedBadge&&oe.a.instance.localization.getBadgeName(this.selectedBadge)||null}get badgeButtonDisabled(){const e=this._inventoryService.controller.badgeService.badgeLimitReached();return(!this.selectedBadge||!this.isWearingBadge(this.selectedBadge))&&e}get achievementsScore(){return this._achievementService.achievementScore}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(ti.a),i.Yb(E.a),i.Yb(ni.a),i.Yb(i.H))},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-inventory-badges-component",""]],features:[i.Hb],attrs:ri,decls:3,vars:2,consts:[[1,"row","nitro-inventory-bots-component"],["class","col-12",4,"ngIf"],[4,"ngIf"],[1,"col-12"],[1,"row","pt-2"],[1,"col-4","d-flex","justify-content-center","align-items-center"],[1,"empty-image"],[1,"col-8","pt-3"],[1,"col-7","d-flex","flex-column",2,"z-index","1"],[1,"grid-container","w-100",2,"min-height","209px","max-height","209px","height","209px"],[1,"grid-items","grid-5"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"col-5","d-flex","flex-column"],[1,"mb-1"],[1,"grid-container","w-100"],[1,"grid-items","grid-3"],["class","row w-100 m-0 mt-2",4,"ngIf"],[1,"row","w-100","m-0","mt-2"],[1,"col"],[1,"d-flex","justify-content-center","align-items-center","bg-secondary","rounded","text-center","p-1"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button","badge-image","",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image",3,"ngClass","badge","asBackground"],[1,"d-flex","justify-content-between","align-items-center","bg-secondary","rounded","p-2"],[1,"d-flex","flex-grow-1"],[1,"d-flex","justify-content-center","align-items-center",2,"min-height","50px",3,"badge","isGroup"],[1,"d-flex","flex-column","justify-content-center","flex-grow-1","ml-2"],[1,"mb-0"],[1,"d-flex"],["type","button",1,"btn","btn-secondary",3,"disabled","click"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.Uc(1,si,11,6,"div",1),i.Uc(2,di,18,11,"ng-container",2),i.cc()),2&e&&(i.Kb(1),i.yc("ngIf",!t.hasBadgeItems),i.Kb(1),i.yc("ngIf",t.hasBadgeItems))},directives:[a.n,m.b,a.m,ii,a.l,It.a],pipes:[J.a],encapsulation:2}),e})();var hi=n("7oGv");const gi=["nitro-inventory-bots-component",""];function mi(e,t){1&e&&(i.dc(0,"div",3),i.dc(1,"div",4),i.dc(2,"div",5),i.Zb(3,"div",6),i.cc(),i.dc(4,"div",7),i.dc(5,"b"),i.Wc(6),i.rc(7,"translate"),i.cc(),i.Zb(8,"br"),i.Wc(9),i.rc(10,"translate"),i.cc(),i.cc(),i.cc()),2&e&&(i.Kb(6),i.Xc(i.sc(7,2,"inventory.empty.bots.title")),i.Kb(3),i.Yc(" ",i.sc(10,4,"inventory.empty.bots.desc")," "))}const fi=function(e,t){return{active:e,"bg-success":t}};function pi(e,t){if(1&e){const e=i.ec();i.dc(0,"div",15),i.nc("mousedown",function(){i.Lc(e);const n=t.$implicit;return i.qc(2).onMouseDown(n)})("mouseout",function(){i.Lc(e);const n=t.$implicit;return i.qc(2).onMouseOut(n)}),i.Zb(1,"button",16),i.cc()}if(2&e){const e=t.$implicit,n=i.qc(2);i.Kb(1),i.yc("ngClass",i.Dc(6,fi,n.selectedItem===e,e.isUnseen))("scale",4)("figure",e.botData.figure)("direction",3)("headOnly",!0)("asBackground",!0)}}function _i(e,t){if(1&e){const e=i.ec();i.dc(0,"button",21),i.nc("click",function(){return i.Lc(e),i.qc(3).attemptBotPlacement()}),i.Wc(1),i.rc(2,"translate"),i.cc()}2&e&&(i.Kb(1),i.Xc(i.sc(2,1,"inventory.furni.placetoroom")))}function bi(e,t){if(1&e&&(i.dc(0,"div",17),i.dc(1,"div",18),i.Wc(2),i.cc(),i.dc(3,"div",19),i.Uc(4,_i,3,3,"button",20),i.cc(),i.cc()),2&e){const e=i.qc(2);i.Kb(2),i.Xc(e.selectedItem.botData.name),i.Kb(2),i.yc("ngIf",!e.tradeRunning&&e.canPlace)}}function vi(e,t){if(1&e&&(i.bc(0),i.dc(1,"div",8),i.dc(2,"perfect-scrollbar",9),i.dc(3,"div",10),i.Uc(4,pi,2,9,"div",11),i.cc(),i.cc(),i.cc(),i.dc(5,"div",12),i.Zb(6,"div",13),i.Uc(7,bi,5,2,"div",14),i.cc(),i.ac()),2&e){const e=i.qc();i.Kb(4),i.yc("ngForOf",e.botItems)("ngForTrackBy",e.trackByType),i.Kb(2),i.yc("roomPreviewer",e.roomPreviewer)("height",140),i.Kb(1),i.yc("ngIf",e.selectedItem)}}let Ei=(()=>{class e extends ei{constructor(e,t,n){super(t,n),this._notificationService=e,this._inventoryService=t,this._ngZone=n,this.roomPreviewer=null,this.selectedItem=null,this.mouseDown=!1}ngOnInit(){this._inventoryService.botsController=this,this._inventoryService.controller.botService.isInitalized&&this.selectExistingGroupOrDefault(),this.prepareInventory()}ngOnDestroy(){this._inventoryService.controller.setAllBotsSeen(),this._inventoryService.botsController=null}prepareInventory(){!this._inventoryService.controller.botService.isInitalized||this._inventoryService.controller.botService.needsUpdate?this._inventoryService.controller.botService.requestLoad():this.selectExistingGroupOrDefault()}selectExistingGroupOrDefault(){this.selectedItem&&this.botItems.indexOf(this.selectedItem)>-1?this.selectBotItem(this.selectedItem):this.selectFirstBot()}selectFirstBot(){let e=null;for(const t of this.botItems)if(t){e=t;break}this.selectBotItem(e)}selectBotItem(e){if(this.selectedItem!==e)if(this._inventoryService.controller.botService.unselectAllBotItems(),this.selectedItem=e,this.selectedItem){this.selectedItem.selected=!0,this.selectedItem.isUnseen&&(this.selectedItem.isUnseen=!1);const e=this.selectedItem.botData;if(!e)return;this._ngZone.runOutsideAngular(()=>{if(this.roomPreviewer){let t=oe.a.instance.roomEngine.getRoomInstanceVariable(oe.a.instance.roomEngine.activeRoomId,hi.a.ROOM_WALL_TYPE),n=oe.a.instance.roomEngine.getRoomInstanceVariable(oe.a.instance.roomEngine.activeRoomId,hi.a.ROOM_FLOOR_TYPE),i=oe.a.instance.roomEngine.getRoomInstanceVariable(oe.a.instance.roomEngine.activeRoomId,hi.a.ROOM_LANDSCAPE_TYPE);t=t&&t.length?t:"101",n=n&&n.length?n:"101",i=i&&i.length?i:"1.1",this.roomPreviewer.reset(!1),this.roomPreviewer.updateRoomWallsAndFloorVisibility(!1,!0),this.roomPreviewer.updateObjectRoom(n,t,i),this.roomPreviewer.addAvatarIntoRoom(e.figure,0)}})}else this._ngZone.runOutsideAngular(()=>this.roomPreviewer&&this.roomPreviewer.reset(!1))}onMouseDown(e){e&&(this.selectBotItem(e),this.mouseDown=!0)}onMouseUp(){this.mouseDown=!1}onMouseOut(e){this.mouseDown&&this.selectedItem===e&&this.attemptBotPlacement()}trackByType(e,t){return t.id}get botItems(){return this._inventoryService.controller.botService.bots}get hasBotItems(){return!!this.botItems.length}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(ti.a),i.Yb(ni.a),i.Yb(i.H))},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-inventory-bots-component",""]],inputs:{roomPreviewer:"roomPreviewer"},features:[i.Hb],attrs:gi,decls:3,vars:2,consts:[[1,"row","nitro-inventory-bots-component",3,"mouseup"],["class","col-12",4,"ngIf"],[4,"ngIf"],[1,"col-12"],[1,"row","pt-2"],[1,"col-4","d-flex","justify-content-center","align-items-center"],[1,"empty-image"],[1,"col-8","pt-3"],[1,"col-7","d-flex","flex-column",2,"z-index","1"],[1,"grid-container","w-100",2,"min-height","209px","max-height","209px","height","209px"],[1,"grid-items","grid-5"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"mousedown","mouseout",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-5","d-flex","flex-column"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","height"],["class","d-flex flex-column flex-grow-1 justify-content-between","style","z-index: 1;",4,"ngIf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"mousedown","mouseout"],["type","button","avatar-image","",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image",3,"ngClass","scale","figure","direction","headOnly","asBackground"],[1,"d-flex","flex-column","flex-grow-1","justify-content-between",2,"z-index","1"],[1,"d-flex","justify-content-center","align-items-center","w-100","h-100"],[1,"btn-group-vertical","w-100"],["type","button","class","btn btn-secondary w-100",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary","w-100",3,"click"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.nc("mouseup",function(){return t.onMouseUp()}),i.Uc(1,mi,11,6,"div",1),i.Uc(2,vi,8,5,"ng-container",2),i.cc()),2&e&&(i.Kb(1),i.yc("ngIf",!t.hasBotItems),i.Kb(1),i.yc("ngIf",t.hasBotItems))},directives:[a.n,m.b,a.m,St,yt.a,a.l],pipes:[J.a],encapsulation:2}),e})();var Si=n("Mdne");const yi=["nitro-inventory-furniture-component",""];function Ii(e,t){1&e&&(i.dc(0,"div",3),i.dc(1,"div",4),i.dc(2,"div",5),i.Zb(3,"div",6),i.cc(),i.dc(4,"div",7),i.dc(5,"b"),i.Wc(6),i.rc(7,"translate"),i.cc(),i.Zb(8,"br"),i.Wc(9),i.rc(10,"translate"),i.cc(),i.cc(),i.cc()),2&e&&(i.Kb(6),i.Xc(i.sc(7,2,"inventory.empty.title")),i.Kb(3),i.Yc(" ",i.sc(10,4,"inventory.empty.desc")," "))}function wi(e,t){if(1&e&&(i.dc(0,"div",28),i.Wc(1),i.cc()),2&e){const e=i.qc().$implicit;i.Kb(1),i.Xc(e.getUnlockedCount())}}function Ci(e,t){if(1&e&&(i.Zb(0,"div",29),i.rc(1,"uniqueNumber")),2&e){const e=i.qc().$implicit;i.yc("innerHtml",i.sc(1,1,e.stuffData.uniqueNumber),i.Mc)}}const Ri=function(e){return{opacity:e}},Ti=function(e,t,n){return{active:e,"bg-success":t,unique:n}},Oi=function(e){return{"background-image":e}};function Mi(e,t){if(1&e){const e=i.ec();i.dc(0,"div",23),i.nc("mousedown",function(){i.Lc(e);const n=t.$implicit;return i.qc(2).onMouseDown(n)})("mouseout",function(){i.Lc(e);const n=t.$implicit;return i.qc(2).onMouseOut(n)}),i.dc(1,"button",24),i.Zb(2,"div",25),i.Uc(3,wi,2,1,"div",26),i.Uc(4,Ci,2,3,"div",27),i.cc(),i.cc()}if(2&e){const e=t.$implicit,n=i.qc(2);i.yc("ngStyle",i.Cc(5,Ri,e.getUnlockedCount()?"1":"0.5")),i.Kb(1),i.yc("ngClass",i.Ec(7,Ti,n.selectedGroup===e,e.hasUnseenItems,e.stuffData.uniqueNumber)),i.Kb(1),i.yc("ngStyle",i.Cc(11,Oi,"url("+n.getIconUrl(e)+")")),i.Kb(1),i.yc("ngIf",!e.stuffData.uniqueNumber),i.Kb(1),i.yc("ngIf",e.stuffData.uniqueNumber)}}function Ui(e,t){if(1&e){const e=i.ec();i.dc(0,"div",37),i.nc("click",function(){i.Lc(e);const t=i.qc().$implicit;return i.qc(),i.Ic(1).setCurrent(t.value)}),i.Wc(1),i.cc()}if(2&e){const e=i.qc().$implicit;i.Kb(1),i.Yc(" ",e.label,"")}}function xi(e,t){if(1&e&&(i.dc(0,"div",38),i.Wc(1),i.cc()),2&e){const e=i.qc().$implicit;i.Kb(1),i.Xc(e.label)}}function Ai(e,t){if(1&e&&(i.dc(0,"li",34),i.Uc(1,Ui,2,1,"div",35),i.Uc(2,xi,2,1,"div",36),i.cc()),2&e){const e=t.$implicit;i.qc();const n=i.Ic(1);i.Qb("active",n.getCurrent()===e.value),i.Kb(1),i.yc("ngIf",n.getCurrent()!==e.value),i.Kb(1),i.yc("ngIf",n.getCurrent()===e.value)}}function Di(e,t){if(1&e){const e=i.ec();i.dc(0,"pagination-template",30,31),i.nc("pageChange",function(t){return i.Lc(e),i.qc(2).paginateConfig.currentPage=t}),i.dc(2,"ul",32),i.Uc(3,Ai,3,4,"li",33),i.cc(),i.cc()}if(2&e){const e=i.Ic(1),t=i.qc(2);i.yc("id",t.paginateConfig.id)("maxSize",11),i.Kb(3),i.yc("ngForOf",e.pages)}}function Li(e,t){if(1&e&&(i.dc(0,"div",39),i.Zb(1,"div",40),i.rc(2,"uniqueNumber"),i.Zb(3,"div",40),i.rc(4,"uniqueNumber"),i.cc()),2&e){const e=i.qc(2);i.Kb(1),i.yc("innerHTML",i.sc(2,2,e.selectedGroup.stuffData.uniqueNumber),i.Mc),i.Kb(2),i.yc("innerHTML",i.sc(4,4,e.selectedGroup.stuffData.uniqueSeries),i.Mc)}}function ki(e,t){if(1&e){const e=i.ec();i.dc(0,"button",46),i.nc("click",function(){return i.Lc(e),i.qc(3).attemptItemPlacement()}),i.Wc(1),i.rc(2,"translate"),i.cc()}2&e&&(i.Kb(1),i.Xc(i.sc(2,1,"inventory.furni.placetoroom")))}function Pi(e,t){if(1&e){const e=i.ec();i.dc(0,"button",46),i.nc("click",function(){return i.Lc(e),i.qc(3).offerOnMarketplace()}),i.Wc(1),i.rc(2,"translate"),i.cc()}2&e&&(i.Kb(1),i.Xc(i.sc(2,1,"inventory.marketplace.sell")))}const Ni=function(e){return{disabled:e}};function Wi(e,t){if(1&e){const e=i.ec();i.dc(0,"button",47),i.nc("click",function(){return i.Lc(e),i.qc(3).attemptItemOffer()}),i.Wc(1),i.rc(2,"translate"),i.cc()}if(2&e){const e=i.qc(3);i.yc("ngClass",i.Cc(4,Ni,!e.selectedGroup.getUnlockedCount())),i.Kb(1),i.Xc(i.sc(2,2,"inventory.trading.offer"))}}function Ki(e,t){if(1&e&&(i.dc(0,"div",41),i.dc(1,"div",42),i.Wc(2),i.cc(),i.dc(3,"div",43),i.Uc(4,ki,3,3,"button",44),i.Uc(5,Pi,3,3,"button",44),i.Uc(6,Wi,3,6,"button",45),i.cc(),i.cc()),2&e){const e=i.qc(2);i.Kb(2),i.Xc(e.selectedGroup.name),i.Kb(2),i.yc("ngIf",!e.tradeRunning&&e.canPlace),i.Kb(1),i.yc("ngIf",e.selectedGroup.isSellable),i.Kb(1),i.yc("ngIf",e.tradeRunning)}}function Fi(e,t){if(1&e){const e=i.ec();i.bc(0),i.dc(1,"div",8),i.dc(2,"div",9),i.dc(3,"div",10),i.Zb(4,"i",11),i.cc(),i.dc(5,"input",12),i.nc("ngModelChange",function(t){return i.Lc(e),i.qc().search=t}),i.cc(),i.dc(6,"select",13),i.nc("ngModelChange",function(t){return i.Lc(e),i.qc().searchType=t}),i.dc(7,"option",14),i.Wc(8),i.rc(9,"translate"),i.cc(),i.dc(10,"option",14),i.Wc(11),i.rc(12,"translate"),i.cc(),i.dc(13,"option",14),i.Wc(14),i.rc(15,"translate"),i.cc(),i.cc(),i.cc(),i.dc(16,"perfect-scrollbar",15),i.dc(17,"div",16),i.Uc(18,Mi,5,13,"div",17),i.rc(19,"paginate"),i.cc(),i.cc(),i.Uc(20,Di,4,3,"pagination-template",18),i.cc(),i.dc(21,"div",19),i.Uc(22,Li,5,6,"div",20),i.Zb(23,"div",21),i.Uc(24,Ki,7,4,"div",22),i.cc(),i.ac()}if(2&e){const e=i.qc();i.Kb(5),i.yc("ngModel",e.search),i.Kb(1),i.yc("ngModel",e.searchType),i.Kb(1),i.yc("value",""),i.Kb(1),i.Xc(i.sc(9,15,"inventory.filter.option.everything")),i.Kb(2),i.yc("value","s"),i.Kb(1),i.Xc(i.sc(12,17,"inventory.furni.tab.floor")),i.Kb(2),i.yc("value","i"),i.Kb(1),i.Xc(i.sc(15,19,"inventory.furni.tab.wall")),i.Kb(4),i.yc("ngForOf",e.groupItems)("ngForTrackBy",i.tc(19,21,e.trackByType,e.paginateConfig)),i.Kb(2),i.yc("ngIf",e.groupItems.length>e.paginateConfig.itemsPerPage),i.Kb(2),i.yc("ngIf",e.selectedGroup&&e.selectedGroup.stuffData.uniqueNumber),i.Kb(1),i.yc("roomPreviewer",e.roomPreviewer)("height",140),i.Kb(1),i.yc("ngIf",e.selectedGroup)}}let Vi=(()=>{class e extends ei{constructor(e,t,n){super(t,n),this._notificationService=e,this._inventoryService=t,this._ngZone=n,this.roomPreviewer=null,this.selectedGroup=null,this.mouseDown=!1,this._filteredItems=[],this._subscription=null,this._hasGroupItems=!1}ngOnInit(){this._inventoryService.controller.furnitureService.isInitalized&&this.selectExistingGroupOrDefault(),this._inventoryService.furniController=this,this._subscription=this._inventoryService.events.subscribe(e=>{switch(e){case ht.a.INVENTORY_UPDATED:return void this.refreshInventory()}}),this.prepareInventory()}ngOnDestroy(){this._inventoryService.controller.setAllFurnitureSeen(),this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._inventoryService.furniController=null}refreshInventory(){let e=this._inventoryService.controller.furnitureService.groupItems;if(e.length&&(this._hasGroupItems=!0),this.search&&this.search.length||this.searchType&&this.searchType.length){const t=this.search.toLocaleLowerCase();e=e.filter(e=>{let n=!0;return this.searchType&&1===this.searchType.length&&("s"===this.searchType?n=!e.isWallItem:"i"===this.searchType&&(n=e.isWallItem)),t&&t.length&&(n=e.name.toLocaleLowerCase().includes(t)),n})}this._filteredItems=e}prepareInventory(){!this._inventoryService.controller.furnitureService.isInitalized||this._inventoryService.controller.furnitureService.needsUpdate?this._inventoryService.controller.furnitureService.requestLoad():(this.refreshInventory(),this.selectExistingGroupOrDefault())}selectExistingGroupOrDefault(){this.selectedGroup&&this.groupItems.indexOf(this.selectedGroup)>-1?this.selectGroup(this.selectedGroup):this.selectFirstGroup()}selectFirstGroup(){let e=null;for(const t of this.groupItems)if(t&&!t.locked){e=t;break}this.selectGroup(e)}selectGroup(e){if(this.selectedGroup!==e)if(this._inventoryService.controller.furnitureService.unselectAllGroupItems(),this.selectedGroup=e,this.selectedGroup){this.selectedGroup.selected=!0,this.selectedGroup.hasUnseenItems&&(this.selectedGroup.hasUnseenItems=!1);const t=this.selectedGroup.getLastItem();if(!t)return;this._ngZone.runOutsideAngular(()=>{if(this.roomPreviewer){let n=oe.a.instance.roomEngine.getRoomInstanceVariable(oe.a.instance.roomEngine.activeRoomId,hi.a.ROOM_WALL_TYPE),i=oe.a.instance.roomEngine.getRoomInstanceVariable(oe.a.instance.roomEngine.activeRoomId,hi.a.ROOM_FLOOR_TYPE),r=oe.a.instance.roomEngine.getRoomInstanceVariable(oe.a.instance.roomEngine.activeRoomId,hi.a.ROOM_LANDSCAPE_TYPE);n=n&&n.length?n:"101",i=i&&i.length?i:"101",r=r&&r.length?r:"1.1",this.roomPreviewer.reset(!1),this.roomPreviewer.updateObjectRoom(i,n,r),t.category===Si.a._Str_3639||t.category===Si.a._Str_3683||t.category===Si.a._Str_3432?(this.roomPreviewer.updateRoomWallsAndFloorVisibility(!0,!0),i=t.category===Si.a._Str_3683?this.selectedGroup.stuffData.getLegacyString():i,n=t.category===Si.a._Str_3639?this.selectedGroup.stuffData.getLegacyString():n,r=t.category===Si.a._Str_3432?this.selectedGroup.stuffData.getLegacyString():r,this.roomPreviewer.updateObjectRoom(i,n,r)):e.isWallItem?(this.roomPreviewer.updateRoomWallsAndFloorVisibility(!0,!0),this.roomPreviewer.addWallItemIntoRoom(this.selectedGroup.type,new ut.a(90),t.stuffData.getLegacyString())):(this.roomPreviewer.updateRoomWallsAndFloorVisibility(!1,!0),this.roomPreviewer.addFurnitureIntoRoom(this.selectedGroup.type,new ut.a(90),this.selectedGroup.stuffData,t.extra.toString()))}})}else this._ngZone.runOutsideAngular(()=>this.roomPreviewer&&this.roomPreviewer.reset(!1))}onMouseDown(e){e&&(this.selectGroup(e),this.mouseDown=!0)}onMouseUp(){this.mouseDown=!1}onMouseOut(e){this.mouseDown&&this.selectedGroup===e&&this.attemptItemPlacement()}attemptItemOffer(e=1){if(!this.selectedGroup||!this.tradeRunning)return;const t=this.selectedGroup;if(!t)return;const n=t.getTradeItems(e);if(!n||!n.length)return;let i=null;const r=[];for(const s of n)r.push(s.id),i||(i=s);i&&this.tradeRunning&&(this._inventoryService.controller.tradeService.getOwnTradingItemIds().length+r.length<=1500?this._inventoryService.controller.tradeService.offerItems(r,i.isWallItem,i.type,i.category,i.isGroupable,i.stuffData):this._notificationService.alert("${trading.items.too_many_items.desc}","${trading.items.too_many_items.title}"))}getIconUrl(e){return e&&e.iconUrl||null}trackByType(e,t){return t.type}get groupItems(){return this._filteredItems}get paginateConfig(){return{id:"custom",itemsPerPage:5,currentPage:1}}get search(){return this._inventoryService.controller.furnitureService.search}set search(e){this._inventoryService.controller.furnitureService.search=e,this.refreshInventory()}get searchType(){return this._inventoryService.controller.furnitureService.searchType}set searchType(e){this._inventoryService.controller.furnitureService.searchType=e,this.refreshInventory()}get hasGroupItems(){return this._hasGroupItems}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(ti.a),i.Yb(ni.a),i.Yb(i.H))},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-inventory-furniture-component",""]],inputs:{roomPreviewer:"roomPreviewer"},features:[i.Hb],attrs:yi,decls:3,vars:2,consts:[[1,"row","nitro-inventory-furni-component",3,"mouseup"],["class","col-12",4,"ngIf"],[4,"ngIf"],[1,"col-12"],[1,"row","pt-2"],[1,"col-4","d-flex","justify-content-center","align-items-center"],[1,"empty-image"],[1,"col-8","pt-3"],[1,"col-7","d-flex","flex-column",2,"z-index","1"],[1,"d-flex","mb-2"],[1,"d-flex","justify-content-center","align-items-center","bg-secondary","border","shadow","px-2"],[1,"fas","fa-search"],["type","text",1,"form-control","form-control-sm","flex-grow-1",3,"ngModel","ngModelChange"],[1,"form-control","form-control-sm","w-auto",3,"ngModel","ngModelChange"],[3,"value"],[1,"grid-container","w-100",2,"min-height","209px","max-height","209px","height","209px"],[1,"grid-items","grid-5"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"ngStyle","mousedown","mouseout",4,"ngFor","ngForOf","ngForTrackBy"],[3,"id","maxSize","pageChange",4,"ngIf"],[1,"col-5","d-flex","flex-column"],["class","unique-counter-compact",4,"ngIf"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","height"],["class","d-flex flex-column flex-grow-1 justify-content-between","style","z-index: 1;",4,"ngIf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"ngStyle","mousedown","mouseout"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info",3,"ngClass"],[1,"position-absolute","detail-info","has-image",3,"ngStyle"],["class","position-absolute btn btn-sm btn-primary px-1 py-0 rounded count",4,"ngIf"],["class","position-absolute unique-counter",3,"innerHtml",4,"ngIf"],[1,"position-absolute","btn","btn-sm","btn-primary","px-1","py-0","rounded","count"],[1,"position-absolute","unique-counter",3,"innerHtml"],[3,"id","maxSize","pageChange"],["p","paginationApi"],[1,"pagination","pagination-sm","custom-pagination"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"page-item"],["class","page-link",3,"click",4,"ngIf"],["class","page-link",4,"ngIf"],[1,"page-link",3,"click"],[1,"page-link"],[1,"unique-counter-compact"],[3,"innerHTML"],[1,"d-flex","flex-column","flex-grow-1","justify-content-between",2,"z-index","1"],[1,"d-flex","justify-content-center","align-items-center","w-100","h-100"],[1,"btn-group-vertical","w-100"],["type","button","class","btn btn-secondary w-100",3,"click",4,"ngIf"],["type","button","class","btn btn-secondary w-100",3,"ngClass","click",4,"ngIf"],["type","button",1,"btn","btn-secondary","w-100",3,"click"],["type","button",1,"btn","btn-secondary","w-100",3,"ngClass","click"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.nc("mouseup",function(){return t.onMouseUp()}),i.Uc(1,Ii,11,6,"div",1),i.Uc(2,Fi,25,24,"ng-container",2),i.cc()),2&e&&(i.Kb(1),i.yc("ngIf",!t.hasGroupItems),i.Kb(1),i.yc("ngIf",t.hasGroupItems))},directives:[a.n,l.b,l.l,l.n,l.t,l.o,l.v,m.b,a.m,St,a.o,a.l,g.c],pipes:[J.a,g.b,gt.a],encapsulation:2}),e})();var qi=n("ppP4"),Hi=n("3LRK");const Bi=["nitro-inventory-pets-component",""];function Gi(e,t){1&e&&(i.dc(0,"div",3),i.dc(1,"div",4),i.dc(2,"div",5),i.Zb(3,"div",6),i.cc(),i.dc(4,"div",7),i.dc(5,"b"),i.Wc(6),i.rc(7,"translate"),i.cc(),i.Zb(8,"br"),i.Wc(9),i.rc(10,"translate"),i.cc(),i.cc(),i.cc()),2&e&&(i.Kb(6),i.Xc(i.sc(7,2,"inventory.empty.pets.title")),i.Kb(3),i.Yc(" ",i.sc(10,4,"inventory.empty.pets.desc")," "))}const Zi=function(e,t){return{active:e,"bg-success":t}};function Xi(e,t){if(1&e){const e=i.ec();i.dc(0,"div",15),i.nc("mousedown",function(){i.Lc(e);const n=t.$implicit;return i.qc(2).onMouseDown(n)})("mouseout",function(){i.Lc(e);const n=t.$implicit;return i.qc(2).onMouseOut(n)}),i.Zb(1,"button",16),i.cc()}if(2&e){const e=t.$implicit,n=i.qc(2);i.Kb(1),i.yc("ngClass",i.Dc(5,Zi,n.selectedItem===e,e.isUnseen))("petFigureData",e.petData.figureData)("direction",2)("headOnly",!0)("asBackground",!0)}}function ji(e,t){if(1&e){const e=i.ec();i.dc(0,"button",21),i.nc("click",function(){return i.Lc(e),i.qc(3).attemptPetPlacement()}),i.Wc(1),i.rc(2,"translate"),i.cc()}2&e&&(i.Kb(1),i.Xc(i.sc(2,1,"inventory.furni.placetoroom")))}function Yi(e,t){if(1&e&&(i.dc(0,"div",17),i.dc(1,"div",18),i.Wc(2),i.cc(),i.dc(3,"div",19),i.Uc(4,ji,3,3,"button",20),i.cc(),i.cc()),2&e){const e=i.qc(2);i.Kb(2),i.Xc(e.selectedItem.petData.name),i.Kb(2),i.yc("ngIf",!e.tradeRunning&&e.canPlace)}}function zi(e,t){if(1&e&&(i.bc(0),i.dc(1,"div",8),i.dc(2,"perfect-scrollbar",9),i.dc(3,"div",10),i.Uc(4,Xi,2,8,"div",11),i.cc(),i.cc(),i.cc(),i.dc(5,"div",12),i.Zb(6,"div",13),i.Uc(7,Yi,5,2,"div",14),i.cc(),i.ac()),2&e){const e=i.qc();i.Kb(4),i.yc("ngForOf",e.petItems)("ngForTrackBy",e.trackByType),i.Kb(2),i.yc("roomPreviewer",e.roomPreviewer)("height",140),i.Kb(1),i.yc("ngIf",e.selectedItem)}}let $i=(()=>{class e extends ei{constructor(e,t,n){super(t,n),this._notificationService=e,this._inventoryService=t,this._ngZone=n,this.roomPreviewer=null,this.selectedItem=null,this.mouseDown=!1}ngOnInit(){this._inventoryService.petsController=this,this._inventoryService.controller.petService.isInitalized&&this.selectExistingGroupOrDefault(),this.prepareInventory()}ngOnDestroy(){this._inventoryService.controller.setAllPetsSeen(),this._inventoryService.petsController=null}prepareInventory(){!this._inventoryService.controller.petService.isInitalized||this._inventoryService.controller.petService.needsUpdate?this._inventoryService.controller.petService.requestLoad():this.selectExistingGroupOrDefault()}selectExistingGroupOrDefault(){this.selectedItem&&this.petItems.indexOf(this.selectedItem)>-1?this.selectPetItem(this.selectedItem):this.selectFirstPet()}selectFirstPet(){let e=null;for(const t of this.petItems)if(t){e=t;break}this.selectPetItem(e)}selectPetItem(e){if(this.selectedItem!==e)if(this._inventoryService.controller.petService.unselectAllPetItems(),this.selectedItem=e,this.selectedItem){this.selectedItem.selected=!0,this.selectedItem.isUnseen&&(this.selectedItem.isUnseen=!1);const e=this.selectedItem.petData;if(!e)return;this._ngZone.runOutsideAngular(()=>{if(this.roomPreviewer){let t=oe.a.instance.roomEngine.getRoomInstanceVariable(oe.a.instance.roomEngine.activeRoomId,hi.a.ROOM_WALL_TYPE),n=oe.a.instance.roomEngine.getRoomInstanceVariable(oe.a.instance.roomEngine.activeRoomId,hi.a.ROOM_FLOOR_TYPE),i=oe.a.instance.roomEngine.getRoomInstanceVariable(oe.a.instance.roomEngine.activeRoomId,hi.a.ROOM_LANDSCAPE_TYPE);t=t&&t.length?t:"101",n=n&&n.length?n:"101",i=i&&i.length?i:"1.1",this.roomPreviewer.reset(!1),this.roomPreviewer.updateRoomWallsAndFloorVisibility(!1,!0),this.roomPreviewer.updateObjectRoom(n,t,i),this.roomPreviewer.addPetIntoRoom(e.figureData.figuredata)}})}else this._ngZone.runOutsideAngular(()=>this.roomPreviewer&&this.roomPreviewer.reset(!1))}onMouseDown(e){e&&(this.selectPetItem(e),this.mouseDown=!0)}onMouseUp(){this.mouseDown=!1}onMouseOut(e){this.mouseDown&&this.selectedItem===e&&this.attemptPetPlacement()}trackByType(e,t){return t.id}get petItems(){return this._inventoryService.controller.petService.pets}get hasPetItems(){return!!this.petItems.length}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(ti.a),i.Yb(ni.a),i.Yb(i.H))},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-inventory-pets-component",""]],inputs:{roomPreviewer:"roomPreviewer"},features:[i.Hb],attrs:Bi,decls:3,vars:2,consts:[[1,"row","nitro-inventory-pets-component",3,"mouseup"],["class","col-12",4,"ngIf"],[4,"ngIf"],[1,"col-12"],[1,"row","pt-2"],[1,"col-4","d-flex","justify-content-center","align-items-center"],[1,"empty-image"],[1,"col-8","pt-3"],[1,"col-7","d-flex","flex-column",2,"z-index","1"],[1,"grid-container","w-100",2,"min-height","209px","max-height","209px","height","209px"],[1,"grid-items","grid-5"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"mousedown","mouseout",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-5","d-flex","flex-column"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","height"],["class","d-flex flex-column flex-grow-1 justify-content-between","style","z-index: 1;",4,"ngIf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"mousedown","mouseout"],["type","button","pet-image","",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image",3,"ngClass","petFigureData","direction","headOnly","asBackground"],[1,"d-flex","flex-column","flex-grow-1","justify-content-between",2,"z-index","1"],[1,"d-flex","justify-content-center","align-items-center","w-100","h-100"],[1,"btn-group-vertical","w-100"],["type","button","class","btn btn-secondary w-100",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary","w-100",3,"click"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.nc("mouseup",function(){return t.onMouseUp()}),i.Uc(1,Gi,11,6,"div",1),i.Uc(2,zi,8,5,"ng-container",2),i.cc()),2&e&&(i.Kb(1),i.yc("ngIf",!t.hasPetItems),i.Kb(1),i.yc("ngIf",t.hasPetItems))},directives:[a.n,m.b,a.m,St,Hi.a,a.l],pipes:[J.a],encapsulation:2}),e})();var Qi=n("wvSN"),Ji=n("VWsa"),er=n("hJ6O"),tr=n("isOV"),nr=n("rYk/"),ir=n("S3UV");const rr=["imageElement"],sr=["nitro-inventory-offer-marketplace-component",""];function cr(e,t){if(1&e&&(i.dc(0,"div",21),i.Zb(1,"div",22),i.rc(2,"uniqueNumber"),i.Zb(3,"div",22),i.rc(4,"uniqueNumber"),i.cc()),2&e){const e=i.qc(2);i.Kb(1),i.yc("innerHTML",i.sc(2,2,e.item.stuffData.uniqueNumber),i.Mc),i.Kb(2),i.yc("innerHTML",i.sc(4,4,e.item.stuffData.uniqueSeries),i.Mc)}}const or=function(e){return{"background-image":e}};function ar(e,t){if(1&e){const e=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"h6",3),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",4),i.nc("click",function(){return i.Lc(e),i.qc().hide()}),i.Zb(6,"i",5),i.cc(),i.cc(),i.dc(7,"div",6),i.dc(8,"div",7),i.dc(9,"div",8),i.Uc(10,cr,5,6,"div",9),i.Zb(11,"div",10,11),i.cc(),i.dc(13,"div",12),i.dc(14,"div"),i.Wc(15),i.cc(),i.dc(16,"div",13),i.Wc(17),i.cc(),i.cc(),i.cc(),i.dc(18,"div",7),i.dc(19,"div",14),i.Wc(20),i.rc(21,"translate"),i.cc(),i.dc(22,"input",15),i.nc("input",function(t){return i.Lc(e),i.qc().updateInterface(t)})("ngModelChange",function(t){return i.Lc(e),i.qc().askingPrice=t}),i.cc(),i.cc(),i.dc(23,"div",16),i.Wc(24),i.cc(),i.dc(25,"div",17),i.Wc(26),i.cc(),i.dc(27,"div",18),i.dc(28,"button",19),i.nc("click",function(){return i.Lc(e),i.qc().postOffer()}),i.Wc(29),i.rc(30,"translate"),i.cc(),i.dc(31,"button",20),i.nc("click",function(){return i.Lc(e),i.qc().hide()}),i.Wc(32),i.rc(33,"translate"),i.cc(),i.cc(),i.cc(),i.cc()}if(2&e){const e=i.qc();i.yc("center",!0),i.Kb(3),i.Xc(i.sc(4,14,"inventory.marketplace.make_offer.title")),i.Kb(7),i.yc("ngIf",e.item&&e.item.stuffData.uniqueNumber),i.Kb(1),i.yc("ngStyle",i.Cc(22,or,"url("+e.imageUrl+")")),i.Kb(4),i.Xc(e.getFurniTitle()),i.Kb(2),i.Xc(e.getFurniDescription()),i.Kb(3),i.Xc(i.sc(21,16,"inventory.marketplace.make_offer.price_request")),i.Kb(2),i.yc("ngModel",e.askingPrice),i.Kb(2),i.Yc(" ",e.getAveragePrice()," "),i.Kb(1),i.yc("ngClass",e.canPostItem?"badge-success":"badge-secondary"),i.Kb(1),i.Xc(e.creditsPrice()),i.Kb(2),i.yc("disabled",!e.canPostItem),i.Kb(1),i.Xc(i.sc(30,18,"inventory.marketplace.make_offer.post")),i.Kb(3),i.Xc(i.sc(33,20,"inventory.marketplace.no_credits.cancel"))}}function lr(e,t){if(1&e){const e=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"h6",3),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",4),i.nc("click",function(){return i.Lc(e),i.qc().closeConfirmDialog()}),i.Zb(6,"i",5),i.cc(),i.cc(),i.dc(7,"div",6),i.dc(8,"div",23),i.Wc(9),i.cc(),i.dc(10,"div",18),i.dc(11,"button",24),i.nc("click",function(){return i.Lc(e),i.qc().doPostOffer()}),i.Wc(12),i.rc(13,"translate"),i.cc(),i.dc(14,"button",20),i.nc("click",function(){return i.Lc(e),i.qc().closeConfirmDialog()}),i.Wc(15),i.rc(16,"translate"),i.cc(),i.cc(),i.cc(),i.cc()}if(2&e){const e=i.qc();i.yc("center",!0),i.Kb(3),i.Xc(i.sc(4,5,"inventory.marketplace.confirm_offer.title")),i.Kb(6),i.Xc(e.confirmationText()),i.Kb(3),i.Xc(i.sc(13,7,"inventory.marketplace.make_offer.post")),i.Kb(3),i.Xc(i.sc(16,9,"inventory.marketplace.confirm_offer.cancel"))}}let dr=(()=>{class e{constructor(e,t,n,i){this._catalogService=e,this._inventoryFurniService=t,this._inventoryService=n,this._ngZone=i,this.showMainWindow=!1,this.askingPrice=null,this.showConfirmDialog=!1,this._imageUrl="",this._text=null,this.canPostItem=!1}ngOnChanges(e){if(!e.item)return;const t=e.item.currentValue;t&&e.item.previousValue!==t&&this.refresh()}hide(){this.closeMainWindow()}refresh(){this.updateInterface(null),this.refreshImage()}refreshImage(){this._ngZone.runOutsideAngular(()=>{this._imageUrl="";const e=this.item;let t;if(t=this.item.isWallItem?oe.a.instance.roomEngine.getFurnitureWallImage(e.type,new ut.a(90,0,0),64,this,4293848814,this.item.extra.toString()):oe.a.instance.roomEngine.getFurnitureFloorImage(e.type,new ut.a(90,0,0),64,this,4293848814,this.item.extra.toString()),t){const e=t.getImage();e&&this._ngZone.run(()=>this._imageUrl=e.src)}})}purchase(){}completePurchase(){this._ngZone.runOutsideAngular(()=>{const e=new HTMLImageElement;e.className="toolbar-icon-animation",e.src=this._imageUrl,e.style.visibility="hidden",this.imageElement&&this.imageElement.nativeElement.appendChild(e);const t=e.getBoundingClientRect(),n=new ce.a(e,t.x,t.y);n.iconName=se.a.INVENTORY,oe.a.instance.roomEngine.events.dispatchEvent(n)})}get imageUrl(){return this._imageUrl}getFurniTitle(){const e=this.item;return oe.a.instance.localization.getValue(e.isWallItem?"wallItem.name."+e.type:"roomItem.name."+e.type)}getFurniDescription(){const e=this.item;return oe.a.instance.localization.getValue(e.isWallItem?"wallItem.desc."+e.type:"roomItem.desc."+e.type)}confirmationText(){const e=this.item,t=oe.a.instance.localization.getValue(e.isWallItem?"wallItem.name."+e.type:"roomItem.name."+e.type);return oe.a.instance.localization.getValueWithParameters("inventory.marketplace.confirm_offer.info",["furniname","price"],[t,this.askingPrice.toString()])}getAveragePrice(){let e=oe.a.instance.localization.getValue("inventory.marketplace.make_offer.average_price");const t=this._inventoryFurniService.marketPlaceConfig.commission;e=e.replace("%days%",this._inventoryFurniService.marketPlaceConfig.displayTime.toString());const n=this._inventoryFurniService.marketPlaceItemStats._Str_3925,i=0==n?" - ":n.toString();e=e.replace("%price%",i);const r=Math.floor(this._inventoryFurniService.marketPlaceItemStats._Str_3925/(1+.01*t)),s=0==r?" - ":r.toString();e=e.replace("%price_no_commission%",s);const c=this._inventoryFurniService.marketPlaceItemStats._Str_3925,o=0==c?" - ":c.toString();return e=e.replace("%average%",o),e}imageReady(e,t,n){if(t)if(n)this._ngZone.run(()=>this._imageUrl=n.src);else if(t){const e=ae.a.generateImageUrl(t);e&&this._ngZone.run(()=>this._imageUrl=e)}}updateInterface(e){var t;const n=this._inventoryFurniService.marketPlaceConfig;let i=e?parseInt(e.target.value):null!==(t=this.askingPrice)&&void 0!==t?t:0;const r=9999;i>r&&(this.askingPrice=r,i=r,e&&(e.target.value=r));const s=Math.max(Math.ceil(.01*n.commission*i),1),c=i+s;if(i<n.minimumPrice)this.canPostItem=!1,this._text=oe.a.instance.localization.getValueWithParameter("inventory.marketplace.make_offer.min_price","minprice",n.minimumPrice.toString());else{this.canPostItem=!0;let e=oe.a.instance.localization.getValue("inventory.marketplace.make_offer.final_price");e=e.replace("%commission%",s.toString()),e=e.replace("%finalprice%",c.toString()),this._text=e}oe.a.instance.localization.getValue("inventory.marketplace.make_offer.min_price")}closeMainWindow(){this.askingPrice=null,this.updateInterface(null),this._inventoryService.marketPlaceOfferVisible=!1,this._inventoryFurniService.marketPlaceItemStats=null}creditsPrice(){return this._text}imageFailed(e){}postOffer(){this._inventoryService.marketPlaceOfferVisible=!1,this.showConfirmDialog=!0}doPostOffer(){oe.a.instance.communication.connection.send(new ir.a(this.askingPrice,this.item.isWallItem?2:1,this.item.ref)),this.showConfirmDialog=!1,this.closeMainWindow()}closeConfirmDialog(){this.showConfirmDialog=!1}get offerTime(){return this._inventoryFurniService.marketPlaceConfig.offerTime}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(ie.a),i.Yb(ht.a),i.Yb(ni.a),i.Yb(i.H))},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-inventory-offer-marketplace-component",""]],viewQuery:function(e,t){if(1&e&&i.cd(rr,1),2&e){let e;i.Hc(e=i.oc())&&(t.imageElement=e.first)}},inputs:{item:"item",showMainWindow:"showMainWindow"},features:[i.Ib],attrs:sr,decls:2,vars:2,consts:[["class","nitro-inventory-offer-marketplace-component card",3,"bringToTop","draggable","center",4,"ngIf"],[1,"nitro-inventory-offer-marketplace-component","card",3,"bringToTop","draggable","center"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"d-flex","flex-row","mb-3"],[1,"position-relative","bg-secondary","rounded"],["class","unique-counter-compact","style","right: 0px;",4,"ngIf"],[1,"product-preview","bg-secondary",3,"ngStyle"],["imageElement",""],[1,"ml-2","align-self-center"],[1,"badge","badge-secondary","badge-sm","text-wrap"],[1,"align-self-center",2,"white-space","nowrap"],["type","number",1,"form-control","form-control-sm","w-100","ml-2",3,"ngModel","input","ngModelChange"],[1,"badge","badge-secondary","badge-sm","text-wrap","mb-2","w-100"],[1,"badge","badge-sm","text-wrap","mb-3","w-100",3,"ngClass"],[1,"btn-group","w-100"],["type","button",1,"btn","btn-success",3,"disabled","click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"unique-counter-compact",2,"right","0px"],[3,"innerHTML"],[1,"mb-3"],["type","button",1,"btn","btn-success",3,"click"]],template:function(e,t){1&e&&(i.Uc(0,ar,34,24,"div",0),i.Uc(1,lr,17,11,"div",0)),2&e&&(i.yc("ngIf",t.showMainWindow),i.Kb(1),i.yc("ngIf",t.showConfirmDialog))},directives:[a.n,$.a,Q.a,a.o,l.p,l.b,l.l,l.n,a.l],pipes:[J.a,gt.a],encapsulation:2}),e})(),ur=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},providers:[Ji.a,er.a,ht.a,ni.a,tr.a,nr.a],imports:[[v]]}),e})();i.Oc(qi.a,[a.n,$.a,Q.a,a.l,Ei,$i,Vi,ui,Qi.a,dr],[J.a]);var hr=n("sqfu"),gr=n("QPJW"),mr=n("VZSW"),fr=n("HXfU"),pr=n("bt9U"),_r=n("4qOg"),br=n("CCgv");function vr(e,t){if(1&e&&(i.dc(0,"p",9),i.Wc(1),i.rc(2,"translate"),i.cc()),2&e){const e=i.qc();i.Kb(1),i.Zc("",i.sc(2,2,"navigator.roomownercaption")," ",e.ownerName,"")}}function Er(e,t){if(1&e){const e=i.ec();i.dc(0,"button",17),i.nc("click",function(){return i.Lc(e),i.qc().handleButton("settings")}),i.Wc(1),i.rc(2,"translate"),i.cc()}2&e&&(i.Kb(1),i.Xc(i.sc(2,1,"navigator.room.popup.info.room.settings")))}function Sr(e,t){if(1&e){const e=i.ec();i.dc(0,"button",18),i.nc("click",function(){return i.Lc(e),i.qc().handleButton("filter")}),i.Wc(1),i.rc(2,"translate"),i.cc()}2&e&&(i.Kb(1),i.Xc(i.sc(2,1,"navigator.roomsettings.roomfilter")))}function yr(e,t){if(1&e){const e=i.ec();i.dc(0,"button",17),i.nc("click",function(){return i.Lc(e),i.qc().handleButton("floor-plan")}),i.Wc(1),i.rc(2,"translate"),i.cc()}2&e&&(i.Kb(1),i.Xc(i.sc(2,1,"open.floor.plan.editor")))}function Ir(e,t){if(1&e){const e=i.ec();i.dc(0,"button",19),i.nc("click",function(){return i.Lc(e),i.qc().handleButton("staff-pick")}),i.Wc(1),i.rc(2,"translate"),i.cc()}if(2&e){const e=i.qc();i.Kb(1),i.Xc(i.sc(2,1,e.staffPickVisible?"navigator.staffpicks.unpick":"navigator.staffpicks.pick"))}}function wr(e,t){if(1&e){const e=i.ec();i.dc(0,"button",17),i.nc("click",function(){return i.Lc(e),i.qc().handleButton("room-mute")}),i.Wc(1),i.rc(2,"translate"),i.cc()}if(2&e){const e=i.qc();i.Kb(1),i.Yc(" ",i.sc(2,1,e.mutedVisible?"navigator.muteall_on":"navigator.muteall_off"),"")}}let Cr=(()=>{class e{constructor(e,t){this._navigatorService=e,this._settingsService=t}hide(){this._navigatorService.roomInfoShowing=!1}handleButton(e){if(e)switch(e){case"settings":return void this.openRoomSettings();case"filter":return;case"floor-plan":return void(this._settingsService.floorPlanVisible=!0);case"staff-pick":return void this.staffPick();case"room-mute":this.muteRoom();break;case"report":return}}openRoomSettings(){oe.a.instance.communication.connection.send(new mr.a(this.roomData.roomId))}staffPick(){this.roomData&&(this.roomData.roomPicker=!this.roomData.roomPicker,oe.a.instance.communication.connection.send(new gr.a(this.roomData.roomId)))}muteRoom(){this.roomData&&(this.roomData.allInRoomMuted=!this.roomData.allInRoomMuted,oe.a.instance.communication.connection.send(new fr.a))}get data(){return this._navigatorService.data}get roomData(){return this.data&&this.data.enteredGuestRoom||null}get roomName(){return this.roomData&&this.roomData.roomName||""}get ownerName(){return this.roomData&&this.roomData.ownerName||""}get showOwner(){return this.roomData&&this.roomData.showOwner}get ranking(){return this.roomData&&this.roomData.ranking||0}get roomSettingsVisible(){return!!this.roomData&&(this.data.currentRoomOwner||oe.a.instance.sessionDataManager.securityLevel>=_r.a.MODERATOR)}get roomFilterVisible(){return!!this.roomData&&(this.data.currentRoomOwner||oe.a.instance.sessionDataManager.securityLevel>=_r.a.MODERATOR)}get floorPlanVisible(){if(!this.roomData)return!1;const e=oe.a.instance.roomSessionManager.getSession(this.roomData.roomId);return!!e&&e.controllerLevel>=pr.a.ROOM_OWNER}get addStaffPickedVisible(){return!!this.roomData&&oe.a.instance.sessionDataManager.securityLevel>=_r.a.COMMUNITY}get hoomRegionVisible(){return!!this.roomData&&this.roomData.showOwner}get staffPickVisible(){return!!this.roomData&&this.roomData.roomPicker}get canMuteVisible(){return!!this.roomData&&this.roomData.canMute}get mutedVisible(){return!!this.roomData&&this.roomData.allInRoomMuted}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(br.a),i.Yb(ln.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-navigator-room-info-component"]],decls:26,vars:17,consts:[[1,"nitro-navigator-room-info","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"d-flex","flex-column"],[1,"h5","m-0","text-break"],["class","h6 m-0",4,"ngIf"],[1,"h6","m-0"],[1,"room-thumbnail"],["src","","image-placeholder",""],[1,"btn-group-vertical","w-100","mt-2"],["type","button","class","btn btn-secondary mb-1",3,"click",4,"ngIf"],["type","button","class","btn btn-secondary mb-1","disabled","",3,"click",4,"ngIf"],["type","button","class","btn btn-secondary",3,"click",4,"ngIf"],["type","button","disabled","",1,"btn","btn-danger","mb-1",3,"click"],["type","button",1,"btn","btn-secondary","mb-1",3,"click"],["type","button","disabled","",1,"btn","btn-secondary","mb-1",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"h6",2),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",3),i.nc("click",function(){return t.hide()}),i.Zb(6,"i",4),i.cc(),i.cc(),i.dc(7,"div",5),i.dc(8,"div",6),i.dc(9,"p",7),i.Wc(10),i.cc(),i.Uc(11,vr,3,4,"p",8),i.dc(12,"p",9),i.Wc(13),i.rc(14,"translate"),i.cc(),i.cc(),i.dc(15,"div",10),i.Zb(16,"img",11),i.cc(),i.dc(17,"div",12),i.Uc(18,Er,3,3,"button",13),i.Uc(19,Sr,3,3,"button",14),i.Uc(20,yr,3,3,"button",13),i.Uc(21,Ir,3,3,"button",15),i.dc(22,"button",16),i.nc("click",function(){return t.handleButton("report")}),i.Wc(23),i.rc(24,"translate"),i.cc(),i.Uc(25,wr,3,3,"button",13),i.cc(),i.cc(),i.cc()),2&e&&(i.Kb(3),i.Xc(i.sc(4,11,"navigator.room.info.popup.title")),i.Kb(7),i.Xc(t.roomName),i.Kb(1),i.yc("ngIf",t.showOwner),i.Kb(2),i.Zc("",i.sc(14,13,"navigator.roomrating")," ",t.roomData.ranking,""),i.Kb(5),i.yc("ngIf",t.roomSettingsVisible),i.Kb(1),i.yc("ngIf",t.roomFilterVisible),i.Kb(1),i.yc("ngIf",t.floorPlanVisible),i.Kb(1),i.yc("ngIf",t.addStaffPickedVisible),i.Kb(2),i.Xc(i.sc(24,15,"help.emergency.main.report.room")),i.Kb(2),i.yc("ngIf",t.canMuteVisible))},directives:[$.a,Q.a,a.n,_e.a],pipes:[J.a],encapsulation:2}),e})();var Rr=n("PaIi"),Tr=n("Mqwb"),Or=n("OP/Z"),Mr=n("LnUi"),Ur=n("KgeL"),xr=n("9YP3"),Ar=n("ApS9"),Dr=n("a4Hx"),Lr=n("gJYn"),kr=n("LR4Z"),Pr=n("ygsp");class Nr{constructor(e){this._ngZone=e,this.roomName=null,this.roomDescription=null,this.categoryId="0",this.userCount="0",this.tags=[],this.tradeState="0",this.allowWalkthrough=!1,this.lockState="0",this.password=null,this.confirmPassword=null,this.allowPets=!1,this.allowPetsEat=!1,this.usersWithRights=new Map,this.friendsWithoutRights=new Map,this.hideWalls=!1,this.wallThickness="0",this.floorThickness="0",this.chatBubbleMode="0",this.chatBubbleWeight="0",this.chatBubbleSpeed="0",this.chatFloodProtection="0",this.chatDistance=0,this.muteState="0",this.kickState="0",this.banState="0",this.bannedUsers=new Map,this.selectedUserToUnban=0}selectUserToUnban(e){this._ngZone.run(()=>{this.selectedUserToUnban=this.selectedUserToUnban===e?0:e})}get isValidPassword(){return"2"!==this.lockState||this.password&&this.password.length>0&&this.password===this.confirmPassword}get selectedUsernameToUnban(){return this.selectedUserToUnban>0?this.bannedUsers.get(this.selectedUserToUnban):null}}function Wr(e,t){if(1&e&&(i.dc(0,"option",9),i.Wc(1),i.rc(2,"translate"),i.cc()),2&e){const e=t.$implicit;i.yc("value",e.id),i.Kb(1),i.Xc(i.sc(2,2,e.name))}}function Kr(e,t){if(1&e&&(i.dc(0,"option",9),i.Wc(1),i.cc()),2&e){const e=t.$implicit;i.yc("value",e),i.Kb(1),i.Xc(e)}}function Fr(e,t){if(1&e&&(i.dc(0,"option",9),i.Wc(1),i.rc(2,"translate"),i.cc()),2&e){const e=t.$implicit;i.yc("value",e.key),i.Kb(1),i.Xc(i.sc(2,2,e.value))}}let Vr=(()=>{class e{constructor(){this.onSave=new i.r,this.onDeleteRoom=new i.r}save(){this.onSave.emit(this.roomSettings)}deleteRoom(){this.onDeleteRoom.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-navigator-roomsettings-tab-basic-component"]],inputs:{roomSettings:"roomSettings",categories:"categories",maxVisitors:"maxVisitors",tradeSettings:"tradeSettings"},outputs:{onSave:"onSave",onDeleteRoom:"onDeleteRoom"},decls:37,vars:32,consts:[[1,"form-group","mb-2"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","blur"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","blur"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"form-check","mb-3"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[1,"btn","btn-danger","btn-block",3,"click"],[3,"value"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"label"),i.Wc(2),i.rc(3,"translate"),i.cc(),i.dc(4,"input",1),i.nc("ngModelChange",function(e){return t.roomSettings.roomName=e})("blur",function(){return t.save()}),i.cc(),i.cc(),i.dc(5,"div",0),i.dc(6,"label"),i.Wc(7),i.rc(8,"translate"),i.cc(),i.dc(9,"textarea",2),i.nc("ngModelChange",function(e){return t.roomSettings.roomDescription=e})("blur",function(){return t.save()}),i.cc(),i.cc(),i.dc(10,"div",0),i.dc(11,"label"),i.Wc(12),i.rc(13,"translate"),i.cc(),i.dc(14,"select",3),i.nc("ngModelChange",function(e){return t.roomSettings.categoryId=e})("ngModelChange",function(){return t.save()}),i.Uc(15,Wr,3,4,"option",4),i.cc(),i.cc(),i.dc(16,"div",0),i.dc(17,"label"),i.Wc(18),i.rc(19,"translate"),i.cc(),i.dc(20,"select",3),i.nc("ngModelChange",function(e){return t.roomSettings.userCount=e})("ngModelChange",function(){return t.save()}),i.Uc(21,Kr,2,2,"option",4),i.cc(),i.cc(),i.dc(22,"div",0),i.dc(23,"label"),i.Wc(24),i.rc(25,"translate"),i.cc(),i.dc(26,"select",3),i.nc("ngModelChange",function(e){return t.roomSettings.tradeState=e})("ngModelChange",function(){return t.save()}),i.Uc(27,Fr,3,4,"option",4),i.rc(28,"keyvalue"),i.cc(),i.cc(),i.dc(29,"div",5),i.dc(30,"input",6),i.nc("ngModelChange",function(e){return t.roomSettings.allowWalkthrough=e})("ngModelChange",function(){return t.save()}),i.cc(),i.dc(31,"label",7),i.Wc(32),i.rc(33,"translate"),i.cc(),i.cc(),i.dc(34,"button",8),i.nc("click",function(){return t.deleteRoom()}),i.Wc(35),i.rc(36,"translate"),i.cc()),2&e&&(i.Kb(2),i.Xc(i.sc(3,16,"navigator.roomname")),i.Kb(2),i.yc("ngModel",t.roomSettings.roomName),i.Kb(3),i.Xc(i.sc(8,18,"navigator.roomsettings.desc")),i.Kb(2),i.yc("ngModel",t.roomSettings.roomDescription),i.Kb(3),i.Xc(i.sc(13,20,"navigator.category")),i.Kb(2),i.yc("ngModel",t.roomSettings.categoryId),i.Kb(1),i.yc("ngForOf",t.categories),i.Kb(3),i.Xc(i.sc(19,22,"navigator.maxvisitors")),i.Kb(2),i.yc("ngModel",t.roomSettings.userCount),i.Kb(1),i.yc("ngForOf",t.maxVisitors),i.Kb(3),i.Xc(i.sc(25,24,"navigator.tradesettings")),i.Kb(2),i.yc("ngModel",t.roomSettings.tradeState),i.Kb(1),i.yc("ngForOf",i.sc(28,26,t.tradeSettings)),i.Kb(3),i.yc("ngModel",t.roomSettings.allowWalkthrough),i.Kb(2),i.Xc(i.sc(33,28,"navigator.roomsettings.allow_walk_through")),i.Kb(3),i.Xc(i.sc(36,30,"navigator.roomsettings.delete")))},directives:[l.b,l.l,l.n,l.t,a.m,l.a,l.o,l.v],pipes:[J.a,a.h],encapsulation:2}),e})();function qr(e,t){1&e&&(i.dc(0,"small",15),i.Wc(1),i.rc(2,"translate"),i.cc()),2&e&&(i.Kb(1),i.Yc(" ",i.sc(2,1,"navigator.roomsettings.invalidconfirm")," "))}function Hr(e,t){if(1&e){const e=i.ec();i.dc(0,"div"),i.dc(1,"div",11),i.dc(2,"label"),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"input",12),i.nc("ngModelChange",function(t){return i.Lc(e),i.qc().roomSettings.password=t})("blur",function(){return i.Lc(e),i.qc().save()}),i.cc(),i.cc(),i.dc(6,"div",13),i.dc(7,"label"),i.Wc(8),i.rc(9,"translate"),i.cc(),i.dc(10,"input",12),i.nc("ngModelChange",function(t){return i.Lc(e),i.qc().roomSettings.confirmPassword=t})("blur",function(){return i.Lc(e),i.qc().save()}),i.cc(),i.Uc(11,qr,3,3,"small",14),i.cc(),i.cc()}if(2&e){const e=i.qc();i.Kb(3),i.Xc(i.sc(4,5,"navigator.roomsettings.password")),i.Kb(2),i.yc("ngModel",e.roomSettings.password),i.Kb(3),i.Xc(i.sc(9,7,"navigator.roomsettings.passwordconfirm")),i.Kb(2),i.yc("ngModel",e.roomSettings.confirmPassword),i.Kb(1),i.yc("ngIf",!e.roomSettings.isValidPassword)}}let Br=(()=>{class e{constructor(){this.onSave=new i.r}save(){this.onSave.emit(this.roomSettings)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-navigator-roomsettings-tab-access-component"]],inputs:{roomSettings:"roomSettings"},outputs:{onSave:"onSave"},decls:43,vars:37,consts:[[1,"font-weight-bold"],[1,"mb-3"],[1,"form-check"],["type","radio","name","doormode","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","doormode","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","doormode","value","3",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check","mb-2"],["type","radio","name","doormode","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],[4,"ngIf"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-group","mb-2"],["type","password","placeholder","*****",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","blur"],[1,"form-group","mb-3"],["class","form-text text-muted font-weight-bold","style","color: red !important",4,"ngIf"],[1,"form-text","text-muted","font-weight-bold",2,"color","red !important"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.Wc(1),i.rc(2,"translate"),i.cc(),i.dc(3,"div",1),i.Wc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"div",0),i.Wc(7),i.rc(8,"translate"),i.cc(),i.dc(9,"div",2),i.dc(10,"input",3),i.nc("ngModelChange",function(e){return t.roomSettings.lockState=e})("ngModelChange",function(){return t.save()}),i.cc(),i.dc(11,"label",4),i.Wc(12),i.rc(13,"translate"),i.cc(),i.cc(),i.dc(14,"div",2),i.dc(15,"input",5),i.nc("ngModelChange",function(e){return t.roomSettings.lockState=e})("ngModelChange",function(){return t.save()}),i.cc(),i.dc(16,"label",4),i.Wc(17),i.rc(18,"translate"),i.cc(),i.cc(),i.dc(19,"div",2),i.dc(20,"input",6),i.nc("ngModelChange",function(e){return t.roomSettings.lockState=e})("ngModelChange",function(){return t.save()}),i.cc(),i.dc(21,"label",4),i.Wc(22),i.rc(23,"translate"),i.cc(),i.cc(),i.dc(24,"div",7),i.dc(25,"input",8),i.nc("ngModelChange",function(e){return t.roomSettings.lockState=e}),i.cc(),i.dc(26,"label",4),i.Wc(27),i.rc(28,"translate"),i.cc(),i.cc(),i.Uc(29,Hr,12,9,"div",9),i.dc(30,"div",0),i.Wc(31),i.rc(32,"translate"),i.cc(),i.dc(33,"div",7),i.dc(34,"input",10),i.nc("ngModelChange",function(e){return t.roomSettings.allowPets=e})("ngModelChange",function(){return t.save()}),i.cc(),i.dc(35,"label",4),i.Wc(36),i.rc(37,"translate"),i.cc(),i.cc(),i.dc(38,"div",2),i.dc(39,"input",10),i.nc("ngModelChange",function(e){return t.roomSettings.allowPetsEat=e})("ngModelChange",function(){return t.save()}),i.cc(),i.dc(40,"label",4),i.Wc(41),i.rc(42,"translate"),i.cc(),i.cc()),2&e&&(i.Kb(1),i.Xc(i.sc(2,17,"navigator.roomsettings.roomaccess.caption")),i.Kb(3),i.Xc(i.sc(5,19,"navigator.roomsettings.roomaccess.info")),i.Kb(3),i.Xc(i.sc(8,21,"navigator.roomsettings.doormode")),i.Kb(3),i.yc("ngModel",t.roomSettings.lockState),i.Kb(2),i.Xc(i.sc(13,23,"navigator.roomsettings.doormode.open")),i.Kb(3),i.yc("ngModel",t.roomSettings.lockState),i.Kb(2),i.Xc(i.sc(18,25,"navigator.roomsettings.doormode.doorbell")),i.Kb(3),i.yc("ngModel",t.roomSettings.lockState),i.Kb(2),i.Xc(i.sc(23,27,"navigator.roomsettings.doormode.invisible")),i.Kb(3),i.yc("ngModel",t.roomSettings.lockState),i.Kb(2),i.Xc(i.sc(28,29,"navigator.roomsettings.doormode.password")),i.Kb(2),i.yc("ngIf","2"==t.roomSettings.lockState),i.Kb(2),i.Xc(i.sc(32,31,"navigator.roomsettings.pets")),i.Kb(3),i.yc("ngModel",t.roomSettings.allowPets),i.Kb(2),i.Xc(i.sc(37,33,"navigator.roomsettings.allowpets")),i.Kb(3),i.yc("ngModel",t.roomSettings.allowPetsEat),i.Kb(2),i.Xc(i.sc(42,35,"navigator.roomsettings.allowfoodconsume")))},directives:[l.q,l.b,l.l,l.n,a.n,l.a],pipes:[J.a],encapsulation:2}),e})();function Gr(e,t){if(1&e){const e=i.ec();i.dc(0,"div",6),i.dc(1,"button",7),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().openProfile(n.key)}),i.Wc(2),i.cc(),i.dc(3,"button",8),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().takeRights(n.key)}),i.Zb(4,"i",9),i.cc(),i.cc()}if(2&e){const e=t.$implicit;i.Kb(2),i.Xc(e.value)}}function Zr(e,t){if(1&e){const e=i.ec();i.dc(0,"div",6),i.dc(1,"button",8),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().giveRights(n.key)}),i.Zb(2,"i",10),i.cc(),i.dc(3,"button",7),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().openProfile(n.key)}),i.Wc(4),i.cc(),i.cc()}if(2&e){const e=t.$implicit;i.Kb(4),i.Xc(e.value)}}const Xr=function(){return["displayed","total"]},jr=function(e,t){return[e,t]};let Yr=(()=>{class e{constructor(){this.onSave=new i.r,this.onGiveRights=new i.r,this.onTakeRights=new i.r,this.onOpenProfile=new i.r}save(){this.onSave.emit(this.roomSettings)}giveRights(e){this.onGiveRights.emit(e)}takeRights(e){this.onTakeRights.emit(e)}openProfile(e){this.onOpenProfile.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-navigator-roomsettings-tab-rights-component"]],inputs:{roomSettings:"roomSettings"},outputs:{onSave:"onSave",onGiveRights:"onGiveRights",onTakeRights:"onTakeRights",onOpenProfile:"onOpenProfile"},decls:18,vars:24,consts:[[1,"row"],[1,"col-6"],[1,"font-weight-bold","mb-2"],[1,"grid-container","position-relativ","mb-1",2,"min-height","400px","max-height","400px"],["class","btn-group mb-1 w-100",4,"ngFor","ngForOf"],[1,"grid-container","position-relative","mb-1",2,"min-height","400px","max-height","400px"],[1,"btn-group","mb-1","w-100"],[1,"btn","btn-primary","btn-sm","w-100",3,"click"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-chevron-right"],[1,"fas","fa-chevron-left"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"div",2),i.Wc(3),i.rc(4,"translate"),i.cc(),i.cc(),i.dc(5,"div",1),i.dc(6,"div",2),i.Wc(7),i.rc(8,"translate"),i.cc(),i.cc(),i.cc(),i.dc(9,"div",0),i.dc(10,"div",1),i.dc(11,"perfect-scrollbar",3),i.Uc(12,Gr,5,1,"div",4),i.rc(13,"keyvalue"),i.cc(),i.cc(),i.dc(14,"div",1),i.dc(15,"perfect-scrollbar",5),i.Uc(16,Zr,5,1,"div",4),i.rc(17,"keyvalue"),i.cc(),i.cc(),i.cc()),2&e&&(i.Kb(3),i.Xc(i.uc(4,4,"navigator.flatctrls.userswithrights",i.Bc(16,Xr),i.Dc(17,jr,t.roomSettings.usersWithRights.size.toString(),t.roomSettings.usersWithRights.size.toString()))),i.Kb(4),i.Xc(i.uc(8,8,"navigator.flatctrls.friends",i.Bc(20,Xr),i.Dc(21,jr,t.roomSettings.friendsWithoutRights.size.toString(),t.roomSettings.friendsWithoutRights.size.toString()))),i.Kb(5),i.yc("ngForOf",i.sc(13,12,t.roomSettings.usersWithRights)),i.Kb(4),i.yc("ngForOf",i.sc(17,14,t.roomSettings.friendsWithoutRights)))},directives:[m.b,a.m],pipes:[J.a,a.h],encapsulation:2}),e})(),zr=(()=>{class e{constructor(){this.onSave=new i.r}save(){this.onSave.emit(this.roomSettings)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-navigator-roomsettings-tab-vipchat-component"]],inputs:{roomSettings:"roomSettings"},outputs:{onSave:"onSave"},decls:88,vars:86,consts:[[1,"font-weight-bold"],[1,"mb-3"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[1,"form-control","form-control-sm","mb-3",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","-1"],["value","-2"],[1,"mb-2"],[1,"form-control","form-control-sm","mb-2",3,"ngModel","ngModelChange"],["value","2"],[1,"form-group","mb-0"],["type","number","min","0",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","blur"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.Wc(1),i.rc(2,"translate"),i.cc(),i.dc(3,"div",1),i.Wc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"div",0),i.Wc(7),i.rc(8,"translate"),i.cc(),i.dc(9,"div",2),i.dc(10,"input",3),i.nc("ngModelChange",function(e){return t.roomSettings.hideWalls=e})("ngModelChange",function(){return t.save()}),i.cc(),i.dc(11,"label",4),i.Wc(12),i.rc(13,"translate"),i.cc(),i.cc(),i.dc(14,"select",5),i.nc("ngModelChange",function(e){return t.roomSettings.wallThickness=e})("ngModelChange",function(){return t.save()}),i.dc(15,"option",6),i.Wc(16),i.rc(17,"translate"),i.cc(),i.dc(18,"option",7),i.Wc(19),i.rc(20,"translate"),i.cc(),i.dc(21,"option",8),i.Wc(22),i.rc(23,"translate"),i.cc(),i.dc(24,"option",9),i.Wc(25),i.rc(26,"translate"),i.cc(),i.cc(),i.dc(27,"select",5),i.nc("ngModelChange",function(e){return t.roomSettings.floorThickness=e})("ngModelChange",function(){return t.save()}),i.dc(28,"option",6),i.Wc(29),i.rc(30,"translate"),i.cc(),i.dc(31,"option",7),i.Wc(32),i.rc(33,"translate"),i.cc(),i.dc(34,"option",8),i.Wc(35),i.rc(36,"translate"),i.cc(),i.dc(37,"option",9),i.Wc(38),i.rc(39,"translate"),i.cc(),i.cc(),i.dc(40,"div",0),i.Wc(41),i.rc(42,"translate"),i.cc(),i.dc(43,"div",10),i.Wc(44),i.rc(45,"translate"),i.cc(),i.dc(46,"select",11),i.nc("ngModelChange",function(e){return t.roomSettings.chatBubbleMode=e})("ngModelChange",function(){return t.save()}),i.dc(47,"option",6),i.Wc(48),i.rc(49,"translate"),i.cc(),i.dc(50,"option",7),i.Wc(51),i.rc(52,"translate"),i.cc(),i.cc(),i.dc(53,"select",11),i.nc("ngModelChange",function(e){return t.roomSettings.chatBubbleWeight=e})("ngModelChange",function(){return t.save()}),i.dc(54,"option",6),i.Wc(55),i.rc(56,"translate"),i.cc(),i.dc(57,"option",7),i.Wc(58),i.rc(59,"translate"),i.cc(),i.dc(60,"option",12),i.Wc(61),i.rc(62,"translate"),i.cc(),i.cc(),i.dc(63,"select",11),i.nc("ngModelChange",function(e){return t.roomSettings.chatBubbleSpeed=e})("ngModelChange",function(){return t.save()}),i.dc(64,"option",6),i.Wc(65),i.rc(66,"translate"),i.cc(),i.dc(67,"option",7),i.Wc(68),i.rc(69,"translate"),i.cc(),i.dc(70,"option",12),i.Wc(71),i.rc(72,"translate"),i.cc(),i.cc(),i.dc(73,"select",11),i.nc("ngModelChange",function(e){return t.roomSettings.chatFloodProtection=e})("ngModelChange",function(){return t.save()}),i.dc(74,"option",6),i.Wc(75),i.rc(76,"translate"),i.cc(),i.dc(77,"option",7),i.Wc(78),i.rc(79,"translate"),i.cc(),i.dc(80,"option",12),i.Wc(81),i.rc(82,"translate"),i.cc(),i.cc(),i.dc(83,"div",13),i.dc(84,"label"),i.Wc(85),i.rc(86,"translate"),i.cc(),i.dc(87,"input",14),i.nc("ngModelChange",function(e){return t.roomSettings.chatDistance=e})("blur",function(){return t.save()}),i.cc(),i.cc()),2&e&&(i.Kb(1),i.Xc(i.sc(2,34,"navigator.roomsettings.vip.caption")),i.Kb(3),i.Xc(i.sc(5,36,"navigator.roomsettings.vip.info")),i.Kb(3),i.Xc(i.sc(8,38,"navigator.roomsettings.vip_settings")),i.Kb(3),i.yc("ngModel",t.roomSettings.hideWalls),i.Kb(2),i.Xc(i.sc(13,40,"navigator.roomsettings.hide_walls")),i.Kb(2),i.yc("ngModel",t.roomSettings.wallThickness),i.Kb(2),i.Xc(i.sc(17,42,"navigator.roomsettings.wall_thickness.normal")),i.Kb(3),i.Xc(i.sc(20,44,"navigator.roomsettings.wall_thickness.thick")),i.Kb(3),i.Xc(i.sc(23,46,"navigator.roomsettings.wall_thickness.thin")),i.Kb(3),i.Xc(i.sc(26,48,"navigator.roomsettings.wall_thickness.thinnest")),i.Kb(2),i.yc("ngModel",t.roomSettings.floorThickness),i.Kb(2),i.Xc(i.sc(30,50,"navigator.roomsettings.floor_thickness.normal")),i.Kb(3),i.Xc(i.sc(33,52,"navigator.roomsettings.floor_thickness.thick")),i.Kb(3),i.Xc(i.sc(36,54,"navigator.roomsettings.floor_thickness.thin")),i.Kb(3),i.Xc(i.sc(39,56,"navigator.roomsettings.floor_thickness.thinnest")),i.Kb(3),i.Xc(i.sc(42,58,"navigator.roomsettings.chat_settings")),i.Kb(3),i.Xc(i.sc(45,60,"navigator.roomsettings.chat_settings.info")),i.Kb(2),i.yc("ngModel",t.roomSettings.chatBubbleMode),i.Kb(2),i.Xc(i.sc(49,62,"navigator.roomsettings.chat.mode.free.flow")),i.Kb(3),i.Xc(i.sc(52,64,"navigator.roomsettings.chat.mode.line.by.line")),i.Kb(2),i.yc("ngModel",t.roomSettings.chatBubbleWeight),i.Kb(2),i.Xc(i.sc(56,66,"navigator.roomsettings.chat.bubbles.width.normal")),i.Kb(3),i.Xc(i.sc(59,68,"navigator.roomsettings.chat.bubbles.width.thin")),i.Kb(3),i.Xc(i.sc(62,70,"navigator.roomsettings.chat.bubbles.width.wide")),i.Kb(2),i.yc("ngModel",t.roomSettings.chatBubbleSpeed),i.Kb(2),i.Xc(i.sc(66,72,"navigator.roomsettings.chat.speed.fast")),i.Kb(3),i.Xc(i.sc(69,74,"navigator.roomsettings.chat.speed.normal")),i.Kb(3),i.Xc(i.sc(72,76,"navigator.roomsettings.chat.speed.slow")),i.Kb(2),i.yc("ngModel",t.roomSettings.chatFloodProtection),i.Kb(2),i.Xc(i.sc(76,78,"navigator.roomsettings.chat.flood.loose")),i.Kb(3),i.Xc(i.sc(79,80,"navigator.roomsettings.chat.flood.normal")),i.Kb(3),i.Xc(i.sc(82,82,"navigator.roomsettings.chat.flood.strict")),i.Kb(4),i.Xc(i.sc(86,84,"navigator.roomsettings.chat_settings.hearing.distance")),i.Kb(2),i.yc("ngModel",t.roomSettings.chatDistance))},directives:[l.a,l.l,l.n,l.t,l.o,l.v,l.p,l.b],pipes:[J.a],encapsulation:2}),e})();function $r(e,t){if(1&e){const e=i.ec();i.dc(0,"div",18),i.dc(1,"button",19),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().openProfile(n.key)}),i.Wc(2),i.cc(),i.dc(3,"button",20),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().roomSettings.selectUserToUnban(n.key)}),i.Zb(4,"i",21),i.cc(),i.cc()}if(2&e){const e=t.$implicit;i.Kb(2),i.Xc(e.value)}}const Qr=function(e){return{disabled:e}};let Jr=(()=>{class e{constructor(){this.onSave=new i.r,this.onUnban=new i.r,this.onOpenProfile=new i.r}save(){this.onSave.emit(this.roomSettings)}unban(){this.onUnban.emit()}openProfile(e){this.onOpenProfile.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-navigator-roomsettings-tab-mod-component"]],inputs:{roomSettings:"roomSettings"},outputs:{onSave:"onSave",onUnban:"onUnban",onOpenProfile:"onOpenProfile"},decls:59,vars:54,consts:[[1,"mb-3"],[1,"font-weight-bold"],[1,"form-check","form-check-inline"],["type","radio","name","moderation_mute","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","moderation_mute","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"font-weight-bold","mt-2"],["type","radio","name","moderation_kick","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","moderation_kick","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","moderation_kick","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","moderation_ban","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","moderation_ban","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"font-weight-bold","mt-3","mb-1"],[1,"row"],[1,"col-6"],[1,"grid-container","position-relativ","mb-1",2,"min-height","150px","max-height","150px"],["class","btn-group mb-1 w-100",4,"ngFor","ngForOf"],[1,"btn","btn-primary","btn-sm","w-100",3,"ngClass","click"],[1,"btn-group","mb-1","w-100"],[1,"btn","btn-primary","btn-sm","w-100",3,"click"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-chevron-right"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.Wc(1),i.rc(2,"translate"),i.cc(),i.dc(3,"div",1),i.Wc(4),i.rc(5,"translate"),i.cc(),i.dc(6,"div",2),i.dc(7,"input",3),i.nc("ngModelChange",function(e){return t.roomSettings.muteState=e})("ngModelChange",function(){return t.save()}),i.cc(),i.dc(8,"label",4),i.Wc(9),i.rc(10,"translate"),i.cc(),i.cc(),i.dc(11,"div",2),i.dc(12,"input",5),i.nc("ngModelChange",function(e){return t.roomSettings.muteState=e})("ngModelChange",function(){return t.save()}),i.cc(),i.dc(13,"label",4),i.Wc(14),i.rc(15,"translate"),i.cc(),i.cc(),i.dc(16,"div",6),i.Wc(17),i.rc(18,"translate"),i.cc(),i.dc(19,"div",2),i.dc(20,"input",7),i.nc("ngModelChange",function(e){return t.roomSettings.kickState=e})("ngModelChange",function(){return t.save()}),i.cc(),i.dc(21,"label",4),i.Wc(22),i.rc(23,"translate"),i.cc(),i.cc(),i.dc(24,"div",2),i.dc(25,"input",8),i.nc("ngModelChange",function(e){return t.roomSettings.kickState=e})("ngModelChange",function(){return t.save()}),i.cc(),i.dc(26,"label",4),i.Wc(27),i.rc(28,"translate"),i.cc(),i.cc(),i.dc(29,"div",2),i.dc(30,"input",9),i.nc("ngModelChange",function(e){return t.roomSettings.kickState=e})("ngModelChange",function(){return t.save()}),i.cc(),i.dc(31,"label",4),i.Wc(32),i.rc(33,"translate"),i.cc(),i.cc(),i.dc(34,"div",6),i.Wc(35),i.rc(36,"translate"),i.cc(),i.dc(37,"div",2),i.dc(38,"input",10),i.nc("ngModelChange",function(e){return t.roomSettings.banState=e})("ngModelChange",function(){return t.save()}),i.cc(),i.dc(39,"label",4),i.Wc(40),i.rc(41,"translate"),i.cc(),i.cc(),i.dc(42,"div",2),i.dc(43,"input",11),i.nc("ngModelChange",function(e){return t.roomSettings.banState=e})("ngModelChange",function(){return t.save()}),i.cc(),i.dc(44,"label",4),i.Wc(45),i.rc(46,"translate"),i.cc(),i.cc(),i.dc(47,"div",12),i.Wc(48),i.rc(49,"translate"),i.cc(),i.dc(50,"div",13),i.dc(51,"div",14),i.dc(52,"perfect-scrollbar",15),i.Uc(53,$r,5,1,"div",16),i.rc(54,"keyvalue"),i.cc(),i.cc(),i.dc(55,"div",14),i.dc(56,"button",17),i.nc("click",function(){return t.unban()}),i.Wc(57),i.rc(58,"translate"),i.cc(),i.cc(),i.cc()),2&e&&(i.Kb(1),i.Xc(i.sc(2,24,"navigator.roomsettings.moderation.header")),i.Kb(3),i.Xc(i.sc(5,26,"navigator.roomsettings.moderation.mute.header")),i.Kb(3),i.yc("ngModel",t.roomSettings.muteState),i.Kb(2),i.Xc(i.sc(10,28,"navigator.roomsettings.moderation.none")),i.Kb(3),i.yc("ngModel",t.roomSettings.muteState),i.Kb(2),i.Xc(i.sc(15,30,"navigator.roomsettings.moderation.rights")),i.Kb(3),i.Xc(i.sc(18,32,"navigator.roomsettings.moderation.kick.header")),i.Kb(3),i.yc("ngModel",t.roomSettings.kickState),i.Kb(2),i.Xc(i.sc(23,34,"navigator.roomsettings.moderation.all")),i.Kb(3),i.yc("ngModel",t.roomSettings.kickState),i.Kb(2),i.Xc(i.sc(28,36,"navigator.roomsettings.moderation.rights")),i.Kb(3),i.yc("ngModel",t.roomSettings.kickState),i.Kb(2),i.Xc(i.sc(33,38,"navigator.roomsettings.moderation.none")),i.Kb(3),i.Xc(i.sc(36,40,"navigator.roomsettings.moderation.ban.header")),i.Kb(3),i.yc("ngModel",t.roomSettings.banState),i.Kb(2),i.Xc(i.sc(41,42,"navigator.roomsettings.moderation.none")),i.Kb(3),i.yc("ngModel",t.roomSettings.banState),i.Kb(2),i.Xc(i.sc(46,44,"navigator.roomsettings.moderation.rights")),i.Kb(3),i.Zc("",i.sc(49,46,"navigator.roomsettings.moderation.banned.users")," (",t.roomSettings.bannedUsers.size,")"),i.Kb(5),i.yc("ngForOf",i.sc(54,48,t.roomSettings.bannedUsers)),i.Kb(3),i.yc("ngClass",i.Cc(52,Qr,0===t.roomSettings.selectedUserToUnban)),i.Kb(1),i.Zc("",i.sc(58,50,"navigator.roomsettings.moderation.unban")," ",t.roomSettings.selectedUsernameToUnban,""))},directives:[l.q,l.b,l.l,l.n,m.b,a.m,a.l],pipes:[J.a,a.h],encapsulation:2}),e})();function es(e,t){if(1&e){const e=i.ec();i.dc(0,"nitro-navigator-roomsettings-tab-basic-component",12),i.nc("onSave",function(t){return i.Lc(e),i.qc(2).onSave(t)})("onDeleteRoom",function(){return i.Lc(e),i.qc(2).onDeleteRoom()}),i.cc()}if(2&e){const e=i.qc(2);i.yc("roomSettings",e.roomSettings)("categories",e.categories)("maxVisitors",e.maxVisitors)("tradeSettings",e.tradeSettings)}}function ts(e,t){if(1&e){const e=i.ec();i.dc(0,"nitro-navigator-roomsettings-tab-access-component",13),i.nc("onSave",function(t){return i.Lc(e),i.qc(2).onSave(t)}),i.cc()}if(2&e){const e=i.qc(2);i.yc("roomSettings",e.roomSettings)}}function ns(e,t){if(1&e){const e=i.ec();i.dc(0,"nitro-navigator-roomsettings-tab-rights-component",14),i.nc("onSave",function(t){return i.Lc(e),i.qc(2).onSave(t)})("onGiveRights",function(t){return i.Lc(e),i.qc(2).onGiveRights(t)})("onTakeRights",function(t){return i.Lc(e),i.qc(2).onTakeRights(t)})("onOpenProfile",function(t){return i.Lc(e),i.qc(2).onOpenProfile(t)}),i.cc()}if(2&e){const e=i.qc(2);i.yc("roomSettings",e.roomSettings)}}function is(e,t){if(1&e){const e=i.ec();i.dc(0,"nitro-navigator-roomsettings-tab-vipchat-component",13),i.nc("onSave",function(t){return i.Lc(e),i.qc(2).onSave(t)}),i.cc()}if(2&e){const e=i.qc(2);i.yc("roomSettings",e.roomSettings)}}function rs(e,t){if(1&e){const e=i.ec();i.dc(0,"nitro-navigator-roomsettings-tab-mod-component",15),i.nc("onSave",function(t){return i.Lc(e),i.qc(2).onSave(t)})("onUnban",function(t){return i.Lc(e),i.qc(2).onUnban(t)})("onOpenProfile",function(t){return i.Lc(e),i.qc(2).onOpenProfile(t)}),i.cc()}if(2&e){const e=i.qc(2);i.yc("roomSettings",e.roomSettings)}}const ss=function(e){return{active:e}};function cs(e,t){if(1&e){const e=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.Wc(2),i.rc(3,"translate"),i.dc(4,"button",3),i.nc("click",function(){return i.Lc(e),i.qc().hide()}),i.Zb(5,"i",4),i.cc(),i.cc(),i.dc(6,"div",5),i.dc(7,"div",6),i.dc(8,"button",7),i.nc("click",function(){return i.Lc(e),i.qc().changeTab(1)}),i.Wc(9),i.rc(10,"translate"),i.cc(),i.dc(11,"button",7),i.nc("click",function(){return i.Lc(e),i.qc().changeTab(2)}),i.Wc(12),i.rc(13,"translate"),i.cc(),i.dc(14,"button",7),i.nc("click",function(){return i.Lc(e),i.qc().changeTab(3)}),i.Wc(15),i.rc(16,"translate"),i.cc(),i.dc(17,"button",7),i.nc("click",function(){return i.Lc(e),i.qc().changeTab(4)}),i.Wc(18),i.rc(19,"translate"),i.cc(),i.dc(20,"button",7),i.nc("click",function(){return i.Lc(e),i.qc().changeTab(5)}),i.Wc(21),i.rc(22,"translate"),i.cc(),i.cc(),i.Uc(23,es,1,4,"nitro-navigator-roomsettings-tab-basic-component",8),i.Uc(24,ts,1,1,"nitro-navigator-roomsettings-tab-access-component",9),i.Uc(25,ns,1,1,"nitro-navigator-roomsettings-tab-rights-component",10),i.Uc(26,is,1,1,"nitro-navigator-roomsettings-tab-vipchat-component",9),i.Uc(27,rs,1,1,"nitro-navigator-roomsettings-tab-mod-component",11),i.cc(),i.cc()}if(2&e){const e=i.qc();i.Kb(2),i.Yc(" ",i.sc(3,16,"navigator.roomsettings")," "),i.Kb(6),i.yc("ngClass",i.Cc(28,ss,1===e.currentTab)),i.Kb(1),i.Xc(i.sc(10,18,"navigator.roomsettings.tab.1")),i.Kb(2),i.yc("ngClass",i.Cc(30,ss,2===e.currentTab)),i.Kb(1),i.Xc(i.sc(13,20,"navigator.roomsettings.tab.2")),i.Kb(2),i.yc("ngClass",i.Cc(32,ss,3===e.currentTab)),i.Kb(1),i.Xc(i.sc(16,22,"navigator.roomsettings.tab.3")),i.Kb(2),i.yc("ngClass",i.Cc(34,ss,4===e.currentTab)),i.Kb(1),i.Xc(i.sc(19,24,"navigator.roomsettings.tab.4")),i.Kb(2),i.yc("ngClass",i.Cc(36,ss,5===e.currentTab)),i.Kb(1),i.Xc(i.sc(22,26,"navigator.roomsettings.tab.5")),i.Kb(2),i.yc("ngIf",1===e.currentTab),i.Kb(1),i.yc("ngIf",2===e.currentTab),i.Kb(1),i.yc("ngIf",3===e.currentTab),i.Kb(1),i.yc("ngIf",4===e.currentTab),i.Kb(1),i.yc("ngIf",5===e.currentTab)}}let os=(()=>{class e{constructor(e,t,n,i){this._navigatorService=e,this._friendListService=t,this._notificationService=n,this._ngZone=i,this._currentTab=1,this._messages=[],this._maxVisitors=[],this.onRoomSettingsEvent=this.onRoomSettingsEvent.bind(this),this.onRoomUsersWithRightsEvent=this.onRoomUsersWithRightsEvent.bind(this),this.onRoomBannedUsersEvent=this.onRoomBannedUsersEvent.bind(this),this.clear(),this.registerMessages()}clear(){this._currentTab=1,this.roomSettings=new Nr(this._ngZone),this._roomId=0,this._oldRoomName=null,this._visible=!1}ngOnDestroy(){this.clear(),this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new Tr.a(this.onRoomSettingsEvent),new Or.a(this.onRoomUsersWithRightsEvent),new Rr.a(this.onRoomBannedUsersEvent)];for(const e of this._messages)oe.a.instance.communication.registerMessageEvent(e)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const e of this._messages)oe.a.instance.communication.removeMessageEvent(e);this._messages=[]})}onRoomSettingsEvent(e){if(!(e instanceof Tr.a))return;const t=e.getParser();t&&(this.clear(),this._roomId=t.roomId,this._ngZone.run(()=>{this.roomSettings.roomName=t.name,this.roomSettings.roomDescription=t.description,this.roomSettings.categoryId=t.categoryId.toString(),this.roomSettings.userCount=t.userCount.toString(),this.roomSettings.tradeState=t.tradeMode.toString(),this.roomSettings.allowWalkthrough=t.allowWalkthrough,this.roomSettings.lockState=t.state.toString(),this.roomSettings.allowPets=t.allowPets,this.roomSettings.hideWalls=t.hideWalls,this.roomSettings.wallThickness=t.thicknessWall.toString(),this.roomSettings.floorThickness=t.thicknessFloor.toString(),this.roomSettings.chatBubbleMode=t.chatSettings.mode.toString(),this.roomSettings.chatBubbleWeight=t.chatSettings.weight.toString(),this.roomSettings.chatBubbleSpeed=t.chatSettings.speed.toString(),this.roomSettings.chatFloodProtection=t.chatSettings.protection.toString(),this.roomSettings.chatDistance=t.chatSettings.distance,this.roomSettings.muteState=t.moderationSettings.allowMute.toString(),this.roomSettings.kickState=t.moderationSettings.allowKick.toString(),this.roomSettings.banState=t.moderationSettings.allowBan.toString(),this._maxVisitors=this._navigatorService.getMaxVisitors(50),this._oldRoomName=t.name,this._oldLockState=t.state.toString(),this._visible=!0}),oe.a.instance.communication.connection.send(new Lr.a(this._roomId)),oe.a.instance.communication.connection.send(new Dr.a(this._roomId)))}onRoomUsersWithRightsEvent(e){if(!(e instanceof Or.a))return;const t=e.getParser();t&&(this.roomSettings.usersWithRights=new Map(t.users),this.getFriendsWithoutRights())}onRoomBannedUsersEvent(e){if(!(e instanceof Rr.a))return;const t=e.getParser();t&&(this.roomSettings.bannedUsers=new Map(t.users))}getFriendsWithoutRights(){this._friendListService.friends.forEach((e,t)=>{this.roomSettings.usersWithRights.has(t)||this.roomSettings.friendsWithoutRights.set(t,e.name)})}changeTab(e){this._currentTab=e}onDeleteRoom(){const e=oe.a.instance.localization.getValue("navigator.roomsettings.deleteroom.confirm.title"),t=oe.a.instance.localization.getValueWithParameter("navigator.roomsettings.deleteroom.confirm.message","room_name","<b>"+this.roomSettings.roomName+"</b>"),n=[new Pr.a("navigator.roomsettings.delete",()=>{oe.a.instance.communication.connection.send(new Mr.a(this._roomId)),this.hide()},["btn-danger"]),new Pr.a("generic.close",()=>{},["btn-primary"])];this._notificationService.alertWithChoices(t,n,e)}onOpenProfile(e){}onGiveRights(e){this.roomSettings.friendsWithoutRights.has(e)&&(this._ngZone.run(()=>{this.roomSettings.usersWithRights.set(e,this.roomSettings.friendsWithoutRights.get(e)),this.roomSettings.friendsWithoutRights.delete(e)}),oe.a.instance.communication.connection.send(new Ur.a(e)))}onTakeRights(e){this.roomSettings.usersWithRights.has(e)&&(this._ngZone.run(()=>{this.roomSettings.friendsWithoutRights.set(e,this.roomSettings.usersWithRights.get(e)),this.roomSettings.usersWithRights.delete(e)}),oe.a.instance.communication.connection.send(new xr.a(e)))}onUnban(){if(0===this.roomSettings.selectedUserToUnban)return;if(!this.roomSettings.bannedUsers.has(this.roomSettings.selectedUserToUnban))return;const e=this.roomSettings.selectedUserToUnban;this._ngZone.run(()=>{this.roomSettings.bannedUsers.delete(this.roomSettings.selectedUserToUnban),this.roomSettings.selectedUserToUnban=0}),oe.a.instance.communication.connection.send(new Ar.a(e,this._roomId))}hide(){this._visible=!1,this.clear()}onSave(e){this._ngZone.run(()=>{this.roomSettings=e});let t=e.lockState,n=e.password;e.isValidPassword?this._oldLockState=t:(t=this._oldLockState,n=null),e.roomName.length<1&&(e.roomName=this._oldRoomName),parseInt(e.userCount)<0&&(e.userCount="10");const i=new kr.a(this._roomId,e.roomName,e.roomDescription,parseInt(t),n,parseInt(e.userCount),parseInt(e.categoryId),e.tags.length,e.tags,parseInt(e.tradeState),e.allowPets,e.allowPetsEat,e.allowWalkthrough,e.hideWalls,parseInt(e.wallThickness),parseInt(e.floorThickness),parseInt(e.muteState),parseInt(e.kickState),parseInt(e.banState),parseInt(e.chatBubbleMode),parseInt(e.chatBubbleWeight),parseInt(e.chatBubbleSpeed),e.chatDistance,parseInt(e.chatFloodProtection));oe.a.instance.communication.connection.send(i)}get currentTab(){return this._currentTab}get categories(){return this._navigatorService.categories}get maxVisitors(){return this._maxVisitors}get tradeSettings(){return this._navigatorService.tradeSettings}get visible(){return this._visible}get usersWithRights(){return this.roomSettings.usersWithRights}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(br.a),i.Yb(Tt.a),i.Yb(ti.a),i.Yb(i.H))},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-navigator-roomsettings-component"]],decls:1,vars:1,consts:[["dragHandle",".card-header","class","card nitro-navigator-roomsettings-component",3,"bringToTop","draggable",4,"ngIf"],["dragHandle",".card-header",1,"card","nitro-navigator-roomsettings-component",3,"bringToTop","draggable"],[1,"card-header"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"btn-group","w-100","mb-3"],["type","button",1,"btn","btn-sm","btn-primary",3,"ngClass","click"],[3,"roomSettings","categories","maxVisitors","tradeSettings","onSave","onDeleteRoom",4,"ngIf"],[3,"roomSettings","onSave",4,"ngIf"],[3,"roomSettings","onSave","onGiveRights","onTakeRights","onOpenProfile",4,"ngIf"],[3,"roomSettings","onSave","onUnban","onOpenProfile",4,"ngIf"],[3,"roomSettings","categories","maxVisitors","tradeSettings","onSave","onDeleteRoom"],[3,"roomSettings","onSave"],[3,"roomSettings","onSave","onGiveRights","onTakeRights","onOpenProfile"],[3,"roomSettings","onSave","onUnban","onOpenProfile"]],template:function(e,t){1&e&&i.Uc(0,cs,28,38,"div",0),2&e&&i.yc("ngIf",t.visible)},directives:[a.n,$.a,Q.a,a.l,Vr,Br,Yr,zr,Jr],pipes:[J.a],encapsulation:2}),e})();const as=["nitro-navigator-search-component",""];function ls(e,t){if(1&e){const e=i.ec();i.dc(0,"button",6),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().changeFilter(n)}),i.Wc(1),i.rc(2,"translate"),i.cc()}if(2&e){const e=t.$implicit;i.Kb(1),i.Xc(i.sc(2,1,"navigator.filter."+e.name))}}let ds=(()=>{class e{constructor(e,t){this._formBuilder=e,this._navigatorService=t}ngOnInit(){this._form=this._formBuilder.group({search:[""]})}changeFilter(e){this._navigatorService.setCurrentFilter(e)}search(e){this._navigatorService.search(this.searchValue)}clearSearch(){}get form(){return this._form}get searchValue(){return this._navigatorService.lastSearch}set searchValue(e){this._navigatorService.lastSearch=e}get currentFilter(){return this._navigatorService.filter}get searchFilters(){return br.a.SEARCH_FILTERS}get hasSearchResults(){return this._navigatorService.lastSearchResults&&this._navigatorService.lastSearchResults.length>0}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(l.c),i.Yb(br.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-navigator-search-component",""]],attrs:as,decls:9,vars:8,consts:[[1,"input-group","mb-2"],["ngbDropdown","",1,"input-group-prepend"],["type","button","ngbDropdownToggle","",1,"btn","btn-secondary"],["ngbDropdownMenu","",1,"dropdown-menu"],["class","dropdown-item","ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],["type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange","keydown.enter"],["ngbDropdownItem","",1,"dropdown-item",3,"click"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"button",2),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"div",3),i.Uc(6,ls,3,3,"button",4),i.cc(),i.cc(),i.dc(7,"input",5),i.nc("ngModelChange",function(e){return t.searchValue=e})("keydown.enter",function(e){return t.search(e)}),i.rc(8,"translate"),i.cc(),i.cc()),2&e&&(i.Kb(3),i.Xc(i.sc(4,4,"navigator.filter."+t.currentFilter.name)),i.Kb(3),i.yc("ngForOf",t.searchFilters),i.Kb(1),i.yc("ngModel",t.searchValue)("placeholder",i.sc(8,6,"navigator.filter.input.placeholder")))},directives:[d.c,d.g,d.e,a.m,l.b,l.l,l.n,d.d],pipes:[J.a],encapsulation:2}),e})(),us=(()=>{class e{}return e.LIST=0,e.THUMBNAILS=1,e.FORCED_THUMBNAILS=2,e})();var hs=n("vlik");const gs=["nitro-navigator-search-result-item-component",""];function ms(e,t){1&e&&i.Zb(0,"i",16)}function fs(e,t){1&e&&i.Zb(0,"i",17)}function ps(e,t){1&e&&i.Zb(0,"i",18)}function _s(e,t){if(1&e&&(i.dc(0,"button",5),i.dc(1,"div",6),i.dc(2,"div",7),i.Zb(3,"i",8),i.Wc(4),i.cc(),i.dc(5,"div",9),i.dc(6,"span",10),i.Wc(7),i.cc(),i.cc(),i.cc(),i.dc(8,"div",11),i.Zb(9,"i",12),i.Uc(10,ms,1,0,"i",13),i.Uc(11,fs,1,0,"i",14),i.Uc(12,ps,1,0,"i",15),i.cc(),i.cc()),2&e){const e=i.qc(),t=i.Ic(5);i.Kb(2),i.yc("ngClass",e.entryBg),i.Kb(2),i.Xc(e.room.userCount),i.Kb(3),i.Xc(e.room.roomName),i.Kb(2),i.yc("ngbTooltip",t),i.Kb(1),i.yc("ngIf",e.isGroup),i.Kb(1),i.yc("ngIf",e.isDoorbell),i.Kb(1),i.yc("ngIf",e.isPassword)}}function bs(e,t){1&e&&i.Zb(0,"i",16)}function vs(e,t){1&e&&i.Zb(0,"i",17)}function Es(e,t){1&e&&i.Zb(0,"i",18)}const Ss=function(e){return{"background-image":e}};function ys(e,t){if(1&e&&(i.dc(0,"button",19),i.dc(1,"div",20),i.dc(2,"div",21),i.Zb(3,"i",8),i.dc(4,"p",22),i.Wc(5),i.cc(),i.cc(),i.cc(),i.dc(6,"div",23),i.dc(7,"div",24),i.Wc(8),i.cc(),i.dc(9,"div",25),i.Wc(10),i.cc(),i.dc(11,"div",26),i.Zb(12,"i",12),i.Uc(13,bs,1,0,"i",13),i.Uc(14,vs,1,0,"i",14),i.Uc(15,Es,1,0,"i",15),i.cc(),i.cc(),i.cc()),2&e){const e=i.qc(),t=i.Ic(5);i.Kb(1),i.yc("ngStyle",e.thumbnail&&i.Cc(9,Ss,"url("+e.thumbnail+")")),i.Kb(1),i.yc("ngClass",e.entryBg),i.Kb(3),i.Xc(e.room.userCount),i.Kb(3),i.Xc(e.room.roomName),i.Kb(2),i.Xc(e.room.description),i.Kb(2),i.yc("ngbTooltip",t),i.Kb(1),i.yc("ngIf",e.isGroup),i.Kb(1),i.yc("ngIf",e.isDoorbell),i.Kb(1),i.yc("ngIf",e.isPassword)}}function Is(e,t){if(1&e&&(i.dc(0,"span",28),i.Zb(1,"i",8),i.Wc(2),i.cc()),2&e){const e=i.qc(2);i.Kb(2),i.Xc(e.room.ownerName)}}function ws(e,t){if(1&e&&(i.dc(0,"div",27),i.dc(1,"span",28),i.Wc(2),i.cc(),i.dc(3,"span",29),i.Wc(4),i.cc(),i.Uc(5,Is,3,1,"span",30),i.cc()),2&e){const e=i.qc();i.Kb(2),i.Xc(e.room.roomName),i.Kb(2),i.Yc('"',e.room.description,'"'),i.Kb(1),i.yc("ngIf",null!=e.room.ownerName)}}const Cs=function(e){return{"":e}};let Rs=(()=>{class e{constructor(e,t){this._navigatorService=e,this._ngZone=t,this._thumbnailUrl=null,this._didRequestUrl=!1}visit(){if(this.room.ownerId!==oe.a.instance.sessionDataManager.userId){if(0!==this.room.habboGroupId)return void this._navigatorService.goToPrivateRoom(this.room.roomId);switch(this.room.doorMode){case hs.a.DOORBELL_STATE:return void this._navigatorService.openRoomDoorbell(this.room);case hs.a.PASSWORD_STATE:return void this._navigatorService.openRoomPassword(this.room)}}this._navigatorService.goToRoom(this.room.roomId)}get isGroup(){return this.room&&this.room.habboGroupId>0}get isDoorbell(){return this.room&&this.room.doorMode===hs.a.DOORBELL_STATE}get isPassword(){return this.room&&this.room.doorMode===hs.a.PASSWORD_STATE}get thumbnail(){if(this._thumbnailUrl)return this._thumbnailUrl;if(!this.room||this._didRequestUrl)return null;let e=oe.a.instance.core.configuration.getValue("thumbnails.url");e=e.replace("%thumbnail%",this.room.roomId.toString());const t=new XMLHttpRequest;return t.open("GET",e,!0),t.onreadystatechange=()=>{4===t.readyState&&200===t.status&&(this._thumbnailUrl=e)},t.send(),this._didRequestUrl=!0,null}get entryBg(){const e=this.room.userCount/this.room.maxUserCount*100;let t="koyuaq";return e>=92?t="badge-danger":e>=50?t="badge-warning text-white":e>0&&(t="badge-success"),t}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(br.a),i.Yb(i.H))},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-navigator-search-result-item-component",""]],inputs:{room:"room",displayMode:"displayMode"},attrs:gs,decls:6,vars:8,consts:[[3,"ngClass","click"],[3,"ngClass"],["type","button","class","btn btn-secondary btn-sm justify-content-between detail-info shuttle",4,"ngIf"],["type","button","class","btn btn-secondary btn-sm justify-content-between detail-info","style","min-width: 236px;min-height: 90px;max-width: 210px;max-height: 90px;float: left;margin: 3px 3px 0 0;",4,"ngIf"],["roomInfoTooltip",""],["type","button",1,"btn","btn-secondary","btn-sm","justify-content-between","detail-info","shuttle"],[1,"d-flex","justify-content-center","flex-grow-1","overflow-hidden"],[1,"d-flex","justify-content-center","align-items-center","badge","badge-secondary","text-center",3,"ngClass"],[1,"fas","fa-user","mr-1"],[1,"d-flex","flex-column","justify-content-center","align-items-start","flex-grow-1","px-2","overflow-hidden"],[1,"d-block","text-truncate",2,"max-width","95%"],[1,"d-flex","flex-row-reverse","align-items-center"],["tooltipClass","search-result-item-tooltip","placement","right","container","body",1,"fas","fa-info-circle",3,"ngbTooltip"],["class","fas fa-users mr-2",4,"ngIf"],["class","fas fa-lock mr-2",4,"ngIf"],["class","fas fa-key mr-2",4,"ngIf"],[1,"fas","fa-users","mr-2"],[1,"fas","fa-lock","mr-2"],[1,"fas","fa-key","mr-2"],["type","button",1,"btn","btn-secondary","btn-sm","justify-content-between","detail-info",2,"min-width","236px","min-height","90px","max-width","210px","max-height","90px","float","left","margin","3px 3px 0 0"],[1,"oda-goruntu",3,"ngStyle"],[1,"smallroombox-aktifUser",3,"ngClass"],[1,"oda-user-sayi"],[1,"oda-bilgileri"],[1,"oda-adi"],[1,"oda-aciklamasi"],[1,"d-flex","flex-row-reverse","align-items-center","bigoda-buton"],[1,"container"],[1,"d-block"],[1,"d-block","small","text-muted"],["class","d-block",4,"ngIf"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.nc("click",function(){return t.visit()}),i.dc(1,"div",1),i.Uc(2,_s,13,7,"button",2),i.Uc(3,ys,16,11,"button",3),i.cc(),i.Uc(4,ws,6,3,"ng-template",null,4,i.Vc),i.cc()),2&e&&(i.yc("ngClass",i.Cc(4,Cs,0===t.displayMode)),i.Kb(1),i.yc("ngClass",i.Cc(6,Cs,t.displayMode>=1)),i.Kb(1),i.yc("ngIf",0===t.displayMode),i.Kb(1),i.yc("ngIf",t.displayMode>=1))},directives:[a.l,a.n,d.k,a.o],encapsulation:2}),e})();const Ts=["nitro-navigator-search-result-component",""],Os=function(e,t){return{"fa-bars":e,"fa-th":t}};function Ms(e,t){if(1&e){const e=i.ec();i.dc(0,"h6",1),i.nc("click",function(){return i.Lc(e),i.qc().toggleListMode()}),i.Zb(1,"i",2),i.cc()}if(2&e){const e=i.qc();i.Kb(1),i.yc("ngClass",i.Dc(1,Os,1===e.displayMode,0===e.displayMode))}}function Us(e,t){if(1&e&&i.Zb(0,"div",8),2&e){const e=t.$implicit,n=i.qc(2);i.yc("room",e)("displayMode",n.displayMode)}}const xs=function(e){return{"grid-1":e}};function As(e,t){if(1&e&&(i.dc(0,"div",5),i.dc(1,"div",6),i.Uc(2,Us,1,2,"div",7),i.cc(),i.cc()),2&e){const e=i.qc();i.Kb(1),i.yc("ngClass",i.Cc(2,xs,0===e.displayMode)),i.Kb(1),i.yc("ngForOf",e.result.rooms)}}const Ds=function(e,t){return{"fa-minus":e,"fa-plus":t}};let Ls=(()=>{class e{ngOnInit(){this._displayMode=this.result.mode,this._isCollapsed=this.result.closed}toggleListMode(){this._displayMode!==us.FORCED_THUMBNAILS&&(this._displayMode=this._displayMode!==us.LIST?us.LIST:us.THUMBNAILS)}toggleCollapsed(){this._isCollapsed=!this._isCollapsed}get resultCode(){let e=this.result.code;return(!e||0==e.length)&&this.result.data&&this.result.data.length>0?this.result.data:(e=this.result.code.startsWith("${")?e.substr(2,e.length-3):"navigator.searchcode.title."+e,e)}get displayMode(){return this._displayMode}get isCollapsed(){return!this._isCollapsed}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-navigator-search-result-component",""]],inputs:{result:"result"},attrs:Ts,decls:7,vars:9,consts:[[1,"d-flex","justify-content-between","align-items-center","pt-2"],[1,"m-0",3,"click"],[1,"fas",3,"ngClass"],["class","m-0",3,"click",4,"ngIf"],["class","navigator-grid-container position-relative",4,"ngIf"],[1,"navigator-grid-container","position-relative"],[2,"width","100%","float","left",3,"ngClass"],["nitro-navigator-search-result-item-component","","style","    float: left;\n        width: 235px;",3,"room","displayMode",4,"ngFor","ngForOf"],["nitro-navigator-search-result-item-component","",2,"float","left","width","235px",3,"room","displayMode"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"h6",1),i.nc("click",function(){return t.toggleCollapsed()}),i.Zb(2,"i",2),i.Wc(3),i.rc(4,"translate"),i.cc(),i.Uc(5,Ms,2,4,"h6",3),i.cc(),i.Uc(6,As,3,4,"div",4)),2&e&&(i.Kb(2),i.yc("ngClass",i.Dc(6,Ds,t.isCollapsed,!t.isCollapsed)),i.Kb(1),i.Yc(" ",i.sc(4,4,t.resultCode)," "),i.Kb(2),i.yc("ngIf",2!==t.displayMode),i.Kb(1),i.yc("ngIf",t.isCollapsed&&t.result.rooms.length>0))},directives:[a.l,a.n,a.m,Rs],pipes:[J.a],encapsulation:2}),e})();const ks=["nitro-navigator-slider-component",""];function Ps(e,t){if(1&e){const e=i.ec();i.dc(0,"mdb-carousel-item"),i.dc(1,"div",3),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().visit(n.roomId)}),i.dc(2,"div",4),i.Wc(3),i.cc(),i.cc(),i.dc(4,"img",5),i.nc("click",function(){return t.$implicit.roomId}),i.cc(),i.cc()}if(2&e){const e=t.$implicit;i.Kb(1),i.Qc("background:url("+e.image+")"),i.Kb(2),i.Xc(e.title),i.Kb(1),i.yc("src",e.image,i.Nc)}}let Ns=(()=>{class e{constructor(e,t){this._navigatorService=e,this._ngZone=t}ngOnInit(){this._sliderContent=oe.a.instance.core.configuration.getValue("navigator.slider.content")}visit(e){this._navigatorService.goToPrivateRoom(e)}get sliderContent(){return this._sliderContent}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(br.a),i.Yb(i.H))},e.\u0275cmp=i.Sb({type:e,selectors:[["","nitro-navigator-slider-component",""]],attrs:ks,decls:3,vars:4,consts:[[1,"w-100","card","nitro-navigator-slider-component","mt-2","d-flex","flex-column"],[3,"isControls","animation"],[4,"ngFor","ngForOf"],[1,"nitro-navigator-slider-image-component","py-2","px-0","h-100",3,"click"],[1,"johnsshitblackbar","p-1","small"],["image-placeholder","",1,"d-block","w-100",3,"src","click"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"mdb-carousel",1),i.Uc(2,Ps,5,4,"mdb-carousel-item",2),i.cc(),i.cc()),2&e&&(i.Kb(1),i.yc("isControls",!1)("animation","slide")("isControls",!0),i.Kb(1),i.yc("ngForOf",t.sliderContent))},directives:[u.a,a.m,u.c,_e.a],encapsulation:2}),e})(),Ws=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},providers:[br.a],imports:[[v]]}),e})();i.Oc(hr.a,[a.n,$.a,Q.a,a.m,a.l,ds,m.b,Ls,Ns,Cr,os],[J.a]);let Ks=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},providers:[ti.a],imports:[[v]]}),e})();var Fs=n("KeNc");let Vs=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},providers:[Fs.a],imports:[[v]]}),e})();var qs=n("rs/J");const Hs=function(e,t){return{fontSize:e,letterSpacing:t}};let Bs=(()=>{class e{constructor(e,t){this._floorPlanService=e,this._ngZone=t,this._map=null,this._backupMap=null,this.fontSize="12",this.letterSpacing="3",this.mapChanged=!1}revert(){this._ngZone.run(()=>{this._map=this._backupMap})}save(){this._floorPlanService.floorMapSettings.heightMapString=this._map.split("\n").join("\r"),this._floorPlanService.save(this._floorPlanService.floorMapSettings)}close(){this._floorPlanService.showImportExport=!1}set map(e){this._map=e,this._backupMap||(this._backupMap=e.replace(/\r\n|\r|\n/g,"\r").toLowerCase()),this.mapChanged=this._map!==this._backupMap}get map(){return this._map}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(qs.a),i.Yb(i.H))},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-floorplan-import-export-component"]],inputs:{map:"map"},decls:15,vars:16,consts:[["dragHandle",".card-header",1,"card","nitro-floorplan-editor-import-export-component",3,"bringToTop","draggable"],[1,"card-header"],[1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],["spellcheck","false",1,"form-control","mb-3",2,"font-family","'Roboto Mono', monospace","height","350px",3,"ngStyle","ngModel","ngModelChange"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary",3,"disabled","click"],["type","button",1,"btn","btn-success",3,"disabled","click"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.Wc(2),i.rc(3,"translate"),i.dc(4,"div",2),i.nc("click",function(){return t.close()}),i.Zb(5,"i",3),i.cc(),i.cc(),i.dc(6,"div",4),i.dc(7,"textarea",5),i.nc("ngModelChange",function(e){return t.map=e}),i.cc(),i.dc(8,"div",6),i.dc(9,"button",7),i.nc("click",function(){return t.revert()}),i.Wc(10),i.rc(11,"translate"),i.cc(),i.dc(12,"button",8),i.nc("click",function(){return t.save()}),i.Wc(13),i.rc(14,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&e&&(i.Kb(2),i.Yc(" ",i.sc(3,7,"floor.plan.editor.import.export")," "),i.Kb(5),i.yc("ngStyle",i.Dc(13,Hs,t.fontSize+"px",t.letterSpacing+"px"))("ngModel",t.map),i.Kb(2),i.yc("disabled",!t.mapChanged),i.Kb(1),i.Xc(i.sc(11,9,"floor.plan.editor.revert.to.last.received.map")),i.Kb(2),i.yc("disabled",!t.mapChanged),i.Kb(1),i.Xc(i.sc(14,11,"floor.plan.editor.save")))},directives:[$.a,Q.a,l.b,a.o,l.l,l.n],pipes:[J.a],encapsulation:2}),e})();var Gs=n("2ERw");let Zs=(()=>{class e{ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Ub({token:e,factory:e.\u0275fac}),e})(),Xs=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},providers:[qs.a,Zs],imports:[[v]]}),e})();i.Oc(Gs.a,[a.n,$.a,Q.a,a.l,a.m,a.o,yt.a,l.t,l.l,l.n,l.o,l.v,St,Bs],[J.a,a.h]);let js=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},imports:[[v,Xs]]}),e})(),Ys=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},providers:[],imports:[[v]]}),e})();var zs=n("wdG1");let $s=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},providers:[zs.a],imports:[[v]]}),e})();var Qs=n("3Cj0");let Js=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},providers:[Qs.a],imports:[[v]]}),e})();var ec=n("5+Zn"),tc=n("G+4o");const nc=function(){return["count","limit"]},ic=function(e,t){return[e,t]};function rc(e,t){if(1&e&&(i.dc(0,"div",16),i.dc(1,"div",17),i.Wc(2),i.rc(3,"translate"),i.cc(),i.dc(4,"div",18),i.Wc(5),i.rc(6,"translate"),i.cc(),i.cc()),2&e){const e=i.qc();i.Kb(2),i.Xc(i.uc(3,2,"wiredfurni.pickfurnis.caption",i.Bc(8,nc),i.Dc(9,ic,e.furniSelectionCount,e.maximumFurniSelectionCount))),i.Kb(3),i.Xc(i.sc(6,6,"wiredfurni.pickfurnis.desc"))}}const sc=["*"];let cc=(()=>{class e{constructor(e){this._wiredService=e}save(){this._wiredService.component.save()}hide(){this._wiredService.component.close()}get furniName(){return this._wiredService.component.getFurniName()}get furniDescription(){return this._wiredService.component.getFurniDescription()}get requiresFurni(){return this._wiredService.component._Str_19885()}get furniSelectionCount(){return this._wiredService.component.furniSelectedIds.length}get maximumFurniSelectionCount(){return this._wiredService.component.maximumItemSelectionCount}get wiredType(){const e=this._wiredService.component._Str_19071();return e?e._Str_1196():""}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(tc.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-wired-base-component"]],ngContentSelectors:sc,decls:26,vars:15,consts:[[1,"card","nitro-wired-component",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","px-3","pt-3"],[1,"mr-2"],[1,"d-flex","justify-content-center","align-items-center","badge","badge-secondary","badge-sm"],[1,"d-flex","flex-grow-1","flex-column"],[1,"badge","badge-secondary","badge-sm","text-wrap","mb-2"],[1,"badge","badge-secondary","badge-sm","text-wrap"],[1,"d-flex","flex-column","p-3"],["class","mt-2",4,"ngIf"],[1,"btn-group","w-100","mt-2"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"mt-2"],[1,"badge","badge-secondary","badge-sm","text-wrap","text-center","w-100","mb-2"],[1,"badge","badge-secondary","badge-sm","text-wrap","text-center","w-100"]],template:function(e,t){1&e&&(i.xc(),i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"h6",2),i.Wc(3),i.rc(4,"translate"),i.cc(),i.dc(5,"button",3),i.nc("click",function(){return t.hide()}),i.Zb(6,"i",4),i.cc(),i.cc(),i.dc(7,"div",5),i.dc(8,"div",6),i.dc(9,"div",7),i.Zb(10,"i"),i.cc(),i.cc(),i.dc(11,"div",8),i.dc(12,"div",9),i.Wc(13),i.cc(),i.dc(14,"div",10),i.Wc(15),i.cc(),i.cc(),i.cc(),i.dc(16,"div",11),i.wc(17),i.Uc(18,rc,7,12,"div",12),i.dc(19,"div",13),i.dc(20,"button",14),i.nc("click",function(){return t.save()}),i.Wc(21),i.rc(22,"translate"),i.cc(),i.dc(23,"button",15),i.nc("click",function(){return t.hide()}),i.Wc(24),i.rc(25,"translate"),i.cc(),i.cc(),i.cc(),i.cc()),2&e&&(i.Kb(3),i.Xc(i.sc(4,9,"wiredfurni.title")),i.Kb(7),i.Nb("icon icon-wired-",t.wiredType,""),i.Kb(3),i.Xc(t.furniName),i.Kb(2),i.Xc(t.furniDescription),i.Kb(3),i.yc("ngIf",t.requiresFurni),i.Kb(3),i.Xc(i.sc(22,11,"wiredfurni.ready")),i.Kb(3),i.Xc(i.sc(25,13,"cancel")))},directives:[$.a,Q.a,a.n],pipes:[J.a],encapsulation:2}),e})();const oc=["*"];let ac=(()=>{class e{constructor(){this.delay=0,this.delayChange=new i.r,this.delayLocale=""}ngOnChanges(e){e.delay.currentValue!==e.delay.previousValue&&this.updateLocaleParameter()}onSliderChange(){this.delayChange.emit(this.delay)}decreaseDelay(){this.delay-=1,this.delay<e.DELAY_MINIMUM_VALUE&&(this.delay=e.DELAY_MINIMUM_VALUE),this.delayChange.emit(this.delay)}increaseDelay(){this.delay+=1,this.delay>e.DELAY_MAXIMUM_VALUE&&(this.delay=e.DELAY_MAXIMUM_VALUE),this.delayChange.emit(this.delay)}updateLocaleParameter(){this.delayLocale=oe.a.instance.getLocalizationWithParameter("wiredfurni.params.delay","seconds",ec.a.getLocaleName(this.delay))}get delaySliderOptions(){return{floor:e.DELAY_MINIMUM_VALUE,ceil:e.DELAY_MAXIMUM_VALUE,step:e.DELAY_STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return e.DELAY_MINIMUM_VALUE=0,e.DELAY_MAXIMUM_VALUE=20,e.DELAY_STEPPER_VALUE=1,e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-wired-action-base-component"]],inputs:{delay:"delay"},outputs:{delayChange:"delayChange"},features:[i.Ib],ngContentSelectors:oc,decls:10,vars:3,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","delay",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(e,t){1&e&&(i.xc(),i.dc(0,"nitro-wired-base-component"),i.wc(1),i.dc(2,"p",0),i.Wc(3),i.cc(),i.dc(4,"div",1),i.dc(5,"button",2),i.nc("click",function(){return t.decreaseDelay()}),i.Zb(6,"i",3),i.cc(),i.dc(7,"ngx-slider",4),i.nc("valueChange",function(e){return t.delay=e})("valueChange",function(){return t.onSliderChange()}),i.cc(),i.dc(8,"button",2),i.nc("click",function(){return t.increaseDelay()}),i.Zb(9,"i",5),i.cc(),i.cc(),i.cc()),2&e&&(i.Kb(3),i.Xc(t.delayLocale),i.Kb(4),i.yc("options",t.delaySliderOptions)("value",t.delay))},directives:[cc,o.b],encapsulation:2}),e})();var lc=n("R7Po"),dc=n("pnVP"),uc=n("YDkd"),hc=n("Jh8m"),gc=n("4ctn"),mc=n("wEng"),fc=n("qfqS"),pc=n("GeE8"),_c=n("8W70"),bc=n("MIuP"),vc=n("WyFn"),Ec=n("Ifn1"),Sc=n("8QJu"),yc=n("GJ6n"),Ic=n("6u8Q"),wc=n("C7tP"),Cc=n("PNXX"),Rc=n("k5mv"),Tc=n("plXl"),Oc=n("rGzS"),Mc=n("DWMI"),Uc=n("T8aY"),xc=n("S67I"),Ac=n("HZCd"),Dc=n("mmPZ"),Lc=n("0KUG"),kc=n("dm2L"),Pc=n("7lPm"),Nc=n("DuWk"),Wc=n("kWRQ"),Kc=n("ZdPW"),Fc=n("GP5J"),Vc=n("0c+i"),qc=n("g/Uk"),Hc=n("atjC"),Bc=n("zMPl"),Gc=n("S/W9"),Zc=n("luCG"),Xc=n("rC5y"),jc=n("3k08"),Yc=n("Zq7N"),zc=n("E6+/"),$c=n("EgWd"),Qc=n("CKbm"),Jc=n("02+m"),eo=n("mRgt"),to=n("AY4R"),no=n("T7hV"),io=n("mR5C"),ro=n("NWZ3"),so=n("LFPO"),co=n("p/Fp"),oo=n("lKxs"),ao=n("oPv6"),lo=n("UE3i");let uo=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},providers:[tc.a],imports:[[v,a.b]]}),e})();i.Oc(Lc.a,[cc,l.t,l.l,l.n,l.o,l.v],[J.a]),i.Oc(kc.a,[cc],[]),i.Oc(Pc.a,[cc,l.q,l.b,l.l,l.n],[J.a]),i.Oc(Nc.a,[cc,l.b,l.l,l.n],[J.a]),i.Oc(Wc.a,[cc],[]),i.Oc(Kc.a,[cc,l.b,l.l,l.n],[J.a]),i.Oc(Fc.a,[cc,l.b,l.l,l.n],[J.a]),i.Oc(Vc.a,[cc,l.q,l.b,l.l,l.n],[J.a]),i.Oc(qc.a,[cc],[]),i.Oc(Hc.a,[cc],[]),i.Oc(Bc.a,[cc,l.q,l.b,l.l,l.n],[J.a]),i.Oc(Gc.a,[cc,l.a,l.l,l.n],[J.a]),i.Oc(Zc.a,[cc],[]),i.Oc(Xc.a,[cc,o.b],[]),i.Oc(jc.a,[cc,o.b],[]),i.Oc(Yc.a,[cc,o.b],[J.a]),i.Oc(zc.a,[cc,l.q,l.b,l.l,l.n,a.n],[J.a]),i.Oc($c.a,[cc,l.b,l.l,l.n,l.q],[J.a]),i.Oc(Qc.a,[cc],[]),i.Oc(Jc.a,[cc],[]),i.Oc(eo.a,[cc,l.b,l.l,l.n],[J.a]),i.Oc(to.a,[cc,l.b,l.l,l.n],[J.a]),i.Oc(no.a,[cc],[]),i.Oc(io.a,[cc],[]),i.Oc(ro.a,[cc],[]),i.Oc(so.a,[cc,o.b],[J.a]),i.Oc(co.a,[cc],[]),i.Oc(oo.a,[cc,o.b],[]),i.Oc(lo.a,[cc,o.b],[]),i.Oc(ao.a,[cc,o.b],[]),i.Oc(Dc.a,[ac],[]),i.Oc(Ac.a,[ac],[]),i.Oc(_c.a,[ac],[]),i.Oc(vc.a,[ac],[]),i.Oc(pc.a,[ac],[]),i.Oc(bc.a,[ac,l.b,l.l,l.n],[J.a]),i.Oc(uc.a,[ac,l.b,l.i,l.l,l.n,l.t,l.o,l.v],[J.a]),i.Oc(dc.a,[ac,l.b,l.i,l.l,l.n,l.q],[J.a]),i.Oc(Cc.a,[ac],[]),i.Oc(Uc.a,[ac],[]),i.Oc(wc.a,[ac,l.b,l.l,l.n],[J.a]),i.Oc(fc.a,[ac,l.b,l.i,l.l,l.n],[J.a]),i.Oc(xc.a,[ac,l.a,l.l,l.n],[J.a]),i.Oc(hc.a,[ac,l.b,l.i,l.l,l.n],[J.a]),i.Oc(Mc.a,[ac,o.b,l.b,l.l,l.n],[J.a]),i.Oc(lc.a,[ac,l.b,l.i,l.l,l.n,X.a],[J.a]),i.Oc(gc.a,[ac,l.b,l.i,l.l,l.n,l.q],[J.a]),i.Oc(mc.a,[ac,l.b,l.i,l.l,l.n,l.q],[J.a]),i.Oc(Tc.a,[ac,l.q,l.b,l.l,l.n],[J.a]),i.Oc(Oc.a,[ac,l.q,l.b,l.l,l.n],[J.a]),i.Oc(Ic.a,[ac,l.t,l.l,l.n,l.o,l.v],[J.a]),i.Oc(Sc.a,[ac,o.b,l.t,l.l,l.n,l.o,l.v],[J.a]),i.Oc(yc.a,[ac,o.b],[J.a]),i.Oc(Rc.a,[ac,o.b,l.q,l.b,l.l,l.n],[J.a]),i.Oc(Ec.a,[ac,l.a,l.l,l.n,a.n,o.b,l.t,l.o,l.v,l.b,m.b,a.m],[J.a]);var ho=n("UIgM"),go=n("Cd78"),mo=n("U3Io"),fo=n("3tBG"),po=n("jzQx");let _o=(()=>{class e{constructor(){this.visible=!1,this.visibleChange=new i.r,this._logger=new po.a(this.constructor.name)}ngOnInit(){}ngOnDestroy(){}hideTool(){this.visible=!1}getTranslatedForKey(e,t){const n="modtools.nitro."+e,i=oe.a.instance.localization.getValue(n);return i!==n?i:t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["ng-component"]],inputs:{visible:"visible"},outputs:{visibleChange:"visibleChange"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();var bo=n("ZpLZ");function vo(e,t){if(1&e&&(i.dc(0,"option",26),i.Wc(1),i.cc()),2&e){const e=t.$implicit;i.yc("value",t.index),i.Kb(1),i.Xc(e)}}function Eo(e,t){if(1&e){const e=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"span"),i.Zb(3,"i",3),i.Wc(4," Room Tool "),i.cc(),i.dc(5,"button",4),i.nc("click",function(){return i.Lc(e),i.qc().close()}),i.Zb(6,"i",5),i.cc(),i.cc(),i.dc(7,"div",6),i.dc(8,"div",7),i.dc(9,"div",8),i.dc(10,"div",7),i.dc(11,"div",9),i.dc(12,"div",10),i.dc(13,"div",11),i.dc(14,"span",12),i.Wc(15,"Name:"),i.cc(),i.dc(16,"div"),i.Wc(17),i.cc(),i.cc(),i.dc(18,"div",11),i.dc(19,"span",12),i.Wc(20,"Description:"),i.cc(),i.dc(21,"div"),i.Wc(22),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(23,"div",7),i.dc(24,"div",9),i.dc(25,"div",10),i.dc(26,"div",11),i.dc(27,"span",12),i.Wc(28,"Owner:"),i.cc(),i.dc(29,"div"),i.Wc(30),i.cc(),i.cc(),i.dc(31,"div",11),i.dc(32,"span",12),i.Wc(33,"Players in room:"),i.cc(),i.dc(34,"div"),i.Wc(35),i.cc(),i.cc(),i.dc(36,"div",11),i.dc(37,"span",12),i.Wc(38,"Owner in room:"),i.cc(),i.dc(39,"div"),i.Wc(40),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(41,"div",9),i.dc(42,"div",13),i.dc(43,"div",11),i.dc(44,"button",14),i.nc("click",function(){return i.Lc(e),i.qc().enterRoom()}),i.Wc(45,"Enter "),i.cc(),i.cc(),i.dc(46,"div",11),i.dc(47,"button",14),i.nc("click",function(){return i.Lc(e),i.qc().openChatlog()}),i.Wc(48,"Chatlogs "),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(49,"div",7),i.dc(50,"div",9),i.dc(51,"div",15),i.dc(52,"div",16),i.dc(53,"div",17),i.dc(54,"input",18),i.nc("ngModelChange",function(t){return i.Lc(e),i.qc().changeTitle=t}),i.cc(),i.dc(55,"label",19),i.Wc(56,"Change title to inappropriate"),i.cc(),i.cc(),i.dc(57,"div",17),i.dc(58,"input",20),i.nc("ngModelChange",function(t){return i.Lc(e),i.qc().kickUsers=t}),i.cc(),i.dc(59,"label",21),i.Wc(60,"Kick users(stops event)"),i.cc(),i.cc(),i.dc(61,"div",17),i.dc(62,"input",22),i.nc("ngModelChange",function(t){return i.Lc(e),i.qc().lockDoor=t}),i.cc(),i.dc(63,"label",23),i.Wc(64,"Lock room"),i.cc(),i.cc(),i.dc(65,"div",17),i.dc(66,"div",24),i.dc(67,"select",25),i.nc("ngModelChange",function(t){return i.Lc(e),i.qc().optionId=t})("change",function(){i.Lc(e);const t=i.qc();return t.selectMessage(t.optionId)}),i.dc(68,"option",26),i.Wc(69,"Select from messsage templates"),i.cc(),i.Uc(70,vo,2,2,"option",27),i.cc(),i.cc(),i.dc(71,"div",24),i.dc(72,"textarea",28),i.nc("ngModelChange",function(t){return i.Lc(e),i.qc().message=t}),i.cc(),i.cc(),i.cc(),i.dc(73,"div",29),i.dc(74,"button",30),i.nc("click",function(){return i.Lc(e),i.qc().send()}),i.Wc(75," Send caution "),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.cc()}if(2&e){const e=i.qc();i.yc("center",!1),i.Kb(17),i.Xc(e.room.name),i.Kb(5),i.Xc(e.room.description),i.Kb(8),i.Xc(e.room.ownerName),i.Kb(5),i.Xc(e.room.playerAmount),i.Kb(5),i.Xc(e.room.owner?"yes":"no"),i.Kb(14),i.yc("ngModel",e.changeTitle),i.Kb(4),i.yc("ngModel",e.kickUsers),i.Kb(4),i.yc("ngModel",e.lockDoor),i.Kb(5),i.yc("ngModel",e.optionId),i.Kb(1),i.yc("value",-1),i.Kb(2),i.yc("ngForOf",e.options),i.Kb(2),i.yc("ngModel",e.message),i.Kb(2),i.yc("disabled",!e.isInCurrentRoom())}}let So=(()=>{class e extends _o{constructor(e,t,n){super(),this._modToolService=e,this._navigatorService=t,this._notificationService=n,this.lockDoor=!1,this.changeTitle=!1,this.kickUsers=!1,this.optionId="-1",this.message=""}ngOnInit(){}ngOnDestroy(){}close(){this._modToolService.showRoomTools=!1}send(){0!=this.message.trim().length?(oe.a.instance.communication.connection.send(new fo.a(1,this.message,"")),(this.kickUsers||this.changeTitle||this.lockDoor)&&oe.a.instance.communication.connection.send(new go.a(this.room.id,this.lockDoor?1:0,this.changeTitle?1:0,this.kickUsers?1:0)),this._modToolService.showRoomTools=!1):this._notificationService.alert("You must input a message to the user")}isInCurrentRoom(){return this._modToolService.currentRoom.roomId==this._modToolService.currentRoomModData.id}enterRoom(){this._navigatorService.goToPrivateRoom(this.room.id)}openChatlog(){oe.a.instance.communication.connection.send(new mo.a(this.room.id)),this._modToolService.showRoomChatLogs=!0}get room(){return this._modToolService.currentRoomModData}get options(){return this._modToolService._Str_3325?this._modToolService._Str_3325._Str_18336:[]}selectMessage(e){if("-1"==e)return void(this.message="");const t=parseInt(e);this.message=this.options[t]}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(bo.a),i.Yb(br.a),i.Yb(ti.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-mod-tool-room-component"]],features:[i.Hb],decls:1,vars:1,consts:[["dragHandle",".card-header","class","card room-tool-card",3,"draggable","center",4,"ngIf"],["dragHandle",".card-header",1,"card","room-tool-card",3,"draggable","center"],[1,"card-header"],[1,"icon","modtool-room-icon",2,"margin-right","5px"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body","pl-3","pr-3"],[1,"row"],[1,"col","pr-2"],[1,"col"],[1,"badge","badge-secondary","mb-1","d-flex","flex-column","justify-content-between","w-100"],[1,"d-flex","flex-row","justify-content-between"],[1,"font-weight-bold","mr-2"],[1,"mb-1","d-flex","flex-column","justify-content-between","w-100"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"badge","badge-secondary","mb-1"],[1,"btn-group","btn-group-vertical"],[1,"mb-1"],["id","change-title","type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],["for","change-title",1,"form-check-label"],["id","kick-users","type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],["for","kick-users",1,"form-check-label"],["id","lock-room","type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],["for","lock-room",1,"form-check-label"],[1,"form-group","mb-2"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"form-control",3,"ngModel","ngModelChange"],[1,"btn-group","w-100"],[1,"btn","btn-sm","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&i.Uc(0,Eo,76,14,"div",0),2&e&&i.yc("ngIf",t.room)},directives:[a.n,Q.a,l.a,l.l,l.n,l.t,l.o,l.v,a.m,l.b],encapsulation:2}),e})();var yo=n("aIK5"),Io=n("9Znu"),wo=n("R1Ze");function Co(e,t){if(1&e&&(i.dc(0,"tr"),i.dc(1,"th",12),i.Wc(2),i.cc(),i.dc(3,"td"),i.Wc(4),i.cc(),i.cc()),2&e){const e=t.$implicit,n=i.qc();i.Kb(2),i.Xc(n.getTranslatedForKey(e.nameKey,e.nameKeyFallback)),i.Kb(2),i.Xc(e.value)}}let Ro=(()=>{class e extends _o{constructor(e,t){super(),this._modToolService=e,this._modToolUserInfoService=t,this.user=null}ngOnInit(){}ngOnDestroy(){}close(){this._modToolService.closeUserTool()}userData(){return this._modToolUserInfoService.currentUserInfo}get userProperties(){const t=this._modToolUserInfoService.currentUserInfo;return t?[{nameKey:"name",nameKeyFallback:"Name",value:t.userName},{nameKey:"cfhs",nameKeyFallback:"CFHs",value:t._Str_24656.toString()},{nameKey:"abusive_cfhs",nameKeyFallback:"Abusive CFHs",value:t._Str_22987.toString()},{nameKey:"cautions",nameKeyFallback:"Cautions",value:t._Str_16987.toString()},{nameKey:"bans",nameKeyFallback:"Bans",value:t._Str_20373.toString()},{nameKey:"last_sanction",nameKeyFallback:"Last sanction",value:t._Str_24447},{nameKey:"trade_locks",nameKeyFallback:"Trade locks",value:t._Str_24526.toString()},{nameKey:"lock_expires",nameKeyFallback:"Lock expires",value:t._Str_23969},{nameKey:"last_login",nameKeyFallback:"Last login",value:e._Str_12797(60*t._Str_23276)},{nameKey:"purchase",nameKeyFallback:"Purchases",value:t._Str_22786},{nameKey:"email",nameKeyFallback:"Email",value:t._Str_20219},{nameKey:"acc_bans",nameKeyFallback:"Banned Accs.",value:t._Str_22700.toString()},{nameKey:"registered",nameKeyFallback:"Registered",value:e._Str_12797(60*t._Str_24334)},{nameKey:"rank",nameKeyFallback:"Rank",value:t._Str_22262}]:[]}handleClick(e){switch(e){case"roomchat":this._modToolService.showSendUserChatlogs=!0,oe.a.instance.communication.connection.send(new yo.a(this.user.id));break;case"send_message":this._modToolService.showSendUserMessage=!0;break;case"room_visits":this._modToolService.showVisitedRoomsForUser=!0,oe.a.instance.communication.connection.send(new Io.a(this.user.id));break;case"mod_action":this._modToolService.showModActionOnUser=!0}}static _Str_12797(e){return e<120?e+" secs ago":e<7200?Math.round(e/60)+" mins ago":e<172800?Math.round(e/3600)+" hours ago":e<63072e3?Math.round(e/86400)+" days ago":Math.round(e/31536e3)+" years ago"}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(bo.a),i.Yb(wo.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-mod-tool-user-component"]],inputs:{user:"user"},features:[i.Hb],decls:22,vars:7,consts:[["dragHandle",".card-header",1,"card","user-tool-card",3,"draggable","center"],[1,"card-header"],[1,"icon","modtool-user-icon",2,"margin-right","5px"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"row"],[1,"col-6"],[1,"d-flex","flex-column","table","table-striped","table-sm","table-text-small"],[4,"ngFor","ngForOf"],[1,"col-5","p-3"],["type","button",1,"btn","btn-sm","btn-primary","w-100",3,"click"],["scope","row"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"span"),i.Zb(3,"i",2),i.Wc(4),i.cc(),i.dc(5,"button",3),i.nc("click",function(){return t.close()}),i.Zb(6,"i",4),i.cc(),i.cc(),i.dc(7,"div",5),i.dc(8,"div",6),i.dc(9,"div",7),i.dc(10,"table",8),i.dc(11,"tbody"),i.Uc(12,Co,5,2,"tr",9),i.cc(),i.cc(),i.cc(),i.dc(13,"div",10),i.dc(14,"button",11),i.nc("click",function(){return t.handleClick("roomchat")}),i.Wc(15),i.cc(),i.dc(16,"button",11),i.nc("click",function(){return t.handleClick("send_message")}),i.Wc(17),i.cc(),i.dc(18,"button",11),i.nc("click",function(){return t.handleClick("room_visits")}),i.Wc(19),i.cc(),i.dc(20,"button",11),i.nc("click",function(){return t.handleClick("mod_action")}),i.Wc(21),i.cc(),i.cc(),i.cc(),i.cc(),i.cc()),2&e&&(i.yc("center",!1),i.Kb(4),i.Yc(" ",t.user.username," "),i.Kb(8),i.yc("ngForOf",t.userProperties),i.Kb(3),i.Xc(t.getTranslatedForKey("roomchat","Room Chat")),i.Kb(2),i.Xc(t.getTranslatedForKey("send_message","Send Message")),i.Kb(2),i.Xc(t.getTranslatedForKey("room_visits","Room Visits")),i.Kb(2),i.Xc(t.getTranslatedForKey("mod_action","Mod Action")))},directives:[Q.a,a.m],encapsulation:2}),e})();function To(e,t){1&e&&(i.dc(0,"table",10),i.dc(1,"thead"),i.dc(2,"tr"),i.dc(3,"th"),i.Wc(4,"Category"),i.cc(),i.dc(5,"th"),i.Wc(6,"Type"),i.cc(),i.dc(7,"th"),i.Wc(8,"Player"),i.cc(),i.dc(9,"th"),i.Wc(10,"Open"),i.cc(),i.cc(),i.cc(),i.Zb(11,"tbody"),i.cc())}function Oo(e,t){if(1&e){const e=i.ec();i.dc(0,"div",1),i.dc(1,"div",2),i.dc(2,"span"),i.Zb(3,"i",3),i.Wc(4," Reports "),i.cc(),i.dc(5,"button",4),i.nc("click",function(){return i.Lc(e),i.qc().hideTool()}),i.Zb(6,"i",5),i.cc(),i.cc(),i.dc(7,"div",6),i.dc(8,"div",7),i.dc(9,"button",8),i.nc("click",function(){return i.Lc(e),i.qc().setTab(0)}),i.Wc(10,"Open Issues"),i.cc(),i.dc(11,"button",8),i.nc("click",function(){return i.Lc(e),i.qc().setTab(1)}),i.Wc(12,"My Issues"),i.cc(),i.dc(13,"button",8),i.nc("click",function(){return i.Lc(e),i.qc().setTab(2)}),i.Wc(14,"Picked Issues"),i.cc(),i.cc(),i.Uc(15,To,12,0,"table",9),i.cc(),i.cc()}if(2&e){const e=i.qc();i.yc("center",!1),i.Kb(15),i.yc("ngIf",0===e.tab)}}let Mo=(()=>{class e extends _o{constructor(){super(),this._tab=0}ngOnInit(){}ngOnDestroy(){}get tab(){return this._tab}set tab(e){this._tab=e}setTab(e){this.tab=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-mod-tool-reports-component"]],features:[i.Hb],decls:1,vars:1,consts:[["dragHandle",".card-header","class","card reports-tool-card",3,"draggable","center",4,"ngIf"],["dragHandle",".card-header",1,"card","reports-tool-card",3,"draggable","center"],[1,"card-header"],[1,"icon","modtool-reports-icon",2,"margin-right","5px"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"btn-group","w-100"],[1,"btn","btn-sm","btn-secondary",3,"click"],["class","table table-striped",4,"ngIf"],[1,"table","table-striped"]],template:function(e,t){1&e&&i.Uc(0,Oo,16,2,"div",0),2&e&&i.yc("ngIf",t.visible)},directives:[a.n,Q.a],encapsulation:2}),e})();var Uo=n("2Clk"),xo=n("YfOc"),Ao=n("Ct+l"),Do=n("oCCT"),Lo=n("aUSd"),ko=n("Btht");let Po=(()=>{class e{constructor(e,t,n,i,r){this._actionId=e,this._name=t,this._actionType=n,this._sanctionTypeId=i,this._actionLengthHours=r}get actionId(){return this._actionId}get name(){return this._name}get actionType(){return this._actionType}get _Str_22995(){return this._sanctionTypeId}get _Str_25670(){return this._actionLengthHours}}return e.ALERT=1,e.MUTE=2,e.BAN=3,e.KICK=4,e.TRADE_LOCK=5,e.MESSAGE=6,e})();function No(e,t){if(1&e&&(i.dc(0,"option",8),i.Wc(1),i.cc()),2&e){const e=t.$implicit;i.yc("value",t.index),i.Kb(1),i.Xc(e)}}function Wo(e,t){if(1&e&&(i.dc(0,"option",8),i.Wc(1),i.cc()),2&e){const e=t.$implicit;i.yc("value",t.index),i.Kb(1),i.Xc(e.name)}}let Ko=(()=>{class e extends _o{constructor(e,t){super(),this._modToolService=e,this._notifications=t,this.user=null,this.cfhType="-1",this.sanction="-1",this.message="",this._actions=[],this._actions=[new Po(1,"Alert",Po.ALERT,1,0),new Po(2,"Mute 1h",Po.MUTE,2,0),new Po(4,"Ban 7 days",Po.BAN,4,0),new Po(3,"Ban 18h",Po.BAN,3,0),new Po(5,"Ban 30 days (step 1)",Po.BAN,5,0),new Po(7,"Ban 30 days (step 2)",Po.BAN,7,0),new Po(6,"Ban 100 years",Po.BAN,6,0),new Po(106,"Ban avatar-only 100 years",Po.BAN,6,0),new Po(101,"Kick",Po.KICK,0,0),new Po(102,"Lock trade 1 week",Po.TRADE_LOCK,0,168),new Po(104,"Lock trade permanent",Po.TRADE_LOCK,0,876e3),new Po(105,"Message",Po.MESSAGE,0,0)]}ngOnInit(){}ngOnDestroy(){}sendSanction(){if("-1"==this.sanction)return void this._notifications.alert("Please select a sanction.");if("-1"==this.cfhType)return void this._notifications.alert("Please select a topic.");parseInt(this.cfhType);const e=this._actions[parseInt(this.sanction)];switch(e.actionType){case Po.ALERT:if(!this._modToolService._Str_3325._Str_18465)return void this._notifications.alert("You have insufficient permissions.");oe.a.instance.communication.connection.send(new xo.a(this.user.id,this.message,parseInt(this.cfhType)));break;case Po.MUTE:oe.a.instance.communication.connection.send(new Lo.a(this.user.id,this.message,parseInt(this.cfhType)));break;case Po.BAN:if(!this._modToolService._Str_3325._Str_21242)return void this._notifications.alert("You have insufficient permissions.");oe.a.instance.communication.connection.send(new Ao.a(this.user.id,this.message,parseInt(this.cfhType),parseInt(this.sanction),106==e.actionId));break;case Po.KICK:if(!this._modToolService._Str_3325._Str_20397)return void this._notifications.alert("You have insufficient permissions.");oe.a.instance.communication.connection.send(new Do.a(this.user.id,this.message,parseInt(this.cfhType)));break;case Po.TRADE_LOCK:oe.a.instance.communication.connection.send(new ko.a(this.user.id,this.message,60*e._Str_25670,parseInt(this.cfhType)));break;case Po.MESSAGE:if(0==this.message.trim().length)return void this._notifications.alert("Please write a message to user.");oe.a.instance.communication.connection.send(new Uo.a(this.user.id,this.message,parseInt(this.cfhType)))}this._modToolService.showModActionOnUser=!1}close(){this._modToolService.showModActionOnUser=!1}get categories(){const e=this._modToolService.callForHelpCategories,t=[];for(const n of e)for(const e of n.topics)t.push(oe.a.instance.localization.getValue("help.cfh.topic."+e.id));return t}get actions(){return this._actions}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(bo.a),i.Yb(ti.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-mod-tool-mod-action-user-component"]],inputs:{user:"user"},features:[i.Hb],decls:25,vars:9,consts:[["dragHandle",".card-header",1,"card","room-tool-card",3,"draggable","center"],[1,"card-header"],[1,"icon","modtool-room-icon",2,"margin-right","5px"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"form-group","mb-2"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"span"),i.Zb(3,"i",2),i.Wc(4),i.cc(),i.dc(5,"button",3),i.nc("click",function(){return t.close()}),i.Zb(6,"i",4),i.cc(),i.cc(),i.dc(7,"div",5),i.dc(8,"div",6),i.dc(9,"select",7),i.nc("ngModelChange",function(e){return t.cfhType=e}),i.dc(10,"option",8),i.Wc(11,"CFH Topic:"),i.cc(),i.Uc(12,No,2,2,"option",9),i.cc(),i.cc(),i.dc(13,"div",6),i.dc(14,"select",7),i.nc("ngModelChange",function(e){return t.sanction=e}),i.dc(15,"option",8),i.Wc(16,"Sanction type:"),i.cc(),i.Uc(17,Wo,2,2,"option",9),i.cc(),i.cc(),i.dc(18,"div",6),i.dc(19,"label"),i.Wc(20,"Optional message type, overrides default"),i.cc(),i.dc(21,"textarea",10),i.nc("ngModelChange",function(e){return t.message=e}),i.cc(),i.cc(),i.dc(22,"div",6),i.dc(23,"button",11),i.nc("click",function(){return t.sendSanction()}),i.Wc(24,"Sanction"),i.cc(),i.cc(),i.cc(),i.cc()),2&e&&(i.yc("center",!1),i.Kb(4),i.Yc(" Mod Actions on ",t.user.username," "),i.Kb(5),i.yc("ngModel",t.cfhType),i.Kb(1),i.yc("value",-1),i.Kb(2),i.yc("ngForOf",t.categories),i.Kb(2),i.yc("ngModel",t.sanction),i.Kb(1),i.yc("value",-1),i.Kb(2),i.yc("ngForOf",t.actions),i.Kb(4),i.yc("ngModel",t.message))},directives:[Q.a,l.t,l.l,l.n,l.o,l.v,a.m,l.b],encapsulation:2}),e})();function Fo(e,t){if(1&e){const e=i.ec();i.dc(0,"div",8),i.dc(1,"div"),i.Wc(2),i.cc(),i.dc(3,"div",9),i.dc(4,"div",10),i.Wc(5),i.cc(),i.dc(6,"button",11),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().goToRoom(n)}),i.Wc(7,"Enter"),i.cc(),i.cc(),i.cc()}if(2&e){const e=t.$implicit,n=i.qc();i.Kb(2),i.Yc(" ",e.roomName," "),i.Kb(3),i.Xc(n.showTime(e))}}let Vo=(()=>{class e extends _o{constructor(e,t,n){super(),this._modToolService=e,this._modToolUserInfoService=t,this._navigatorService=n,this.user=null}ngOnInit(){}ngOnDestroy(){}close(){this._modToolService.closeRoomVisitedTool()}get roomVisitedForUser(){return this._modToolService.roomUserVisitedData?this._modToolService.roomUserVisitedData.rooms:[]}showTime(e){const t=e._Str_25550;return this.prependZero(e._Str_22929)+":"+this.prependZero(t)}prependZero(e){return e<10?"0"+e:e.toString()}goToRoom(e){this._navigatorService.goToPrivateRoom(e.roomId)}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(bo.a),i.Yb(wo.a),i.Yb(br.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-mod-tool-user-visited-rooms-component"]],inputs:{user:"user"},features:[i.Hb],decls:10,vars:3,consts:[["dragHandle",".card-header",1,"card","user-tool-card",3,"draggable","center"],[1,"card-header"],[1,"icon","modtool-user-icon",2,"margin-right","5px"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"position-relative","w-100",2,"min-height","200px","max-height","200px","height","200px"],["class","d-flex flex-row justify-content-between w-100",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","justify-content-between","w-100"],[1,"d-flex","flex-row"],[1,"mr-2"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"span"),i.Zb(3,"i",2),i.Wc(4),i.cc(),i.dc(5,"button",3),i.nc("click",function(){return t.close()}),i.Zb(6,"i",4),i.cc(),i.cc(),i.dc(7,"div",5),i.dc(8,"perfect-scrollbar",6),i.Uc(9,Fo,8,2,"div",7),i.cc(),i.cc(),i.cc()),2&e&&(i.yc("center",!1),i.Kb(4),i.Yc(" Room visits: ",t.user.username," "),i.Kb(5),i.yc("ngForOf",t.roomVisitedForUser))},directives:[Q.a,m.b,a.m],encapsulation:2}),e})();function qo(e,t){if(1&e&&(i.dc(0,"option",8),i.Wc(1),i.cc()),2&e){const e=t.$implicit;i.yc("value",t.index),i.Kb(1),i.Xc(e)}}let Ho=(()=>{class e extends _o{constructor(e,t,n){super(),this._modToolService=e,this._modToolUserInfoService=t,this._notificationService=n,this.user=null,this.optionId="-1",this.message=""}ngOnInit(){}ngOnDestroy(){}close(){this._modToolService.showSendUserMessage=!1}get options(){return this._modToolService._Str_3325?this._modToolService._Str_3325._Str_15690:[]}selectMessage(e){if("-1"==e)return void(this.message="");const t=parseInt(e);this.message=this.options[t]}sendMessage(){0!=this.message.trim().length?(oe.a.instance.communication.connection.send(new Uo.a(this.user.id,this.message,-999)),this._modToolService.showSendUserMessage=!1):this._notificationService.alert("Please enter a message")}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(bo.a),i.Yb(wo.a),i.Yb(ti.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-mod-tool-user-send-message-component"]],inputs:{user:"user"},features:[i.Hb],decls:18,vars:6,consts:[["dragHandle",".card-header",1,"card","user-tool-card",3,"draggable","center"],[1,"card-header"],[1,"icon","modtool-user-icon",2,"margin-right","5px"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"form-group","mb-2"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"span"),i.Zb(3,"i",2),i.Wc(4),i.cc(),i.dc(5,"button",3),i.nc("click",function(){return t.close()}),i.Zb(6,"i",4),i.cc(),i.cc(),i.dc(7,"div",5),i.dc(8,"div",6),i.dc(9,"select",7),i.nc("ngModelChange",function(e){return t.optionId=e})("change",function(){return t.selectMessage(t.optionId)}),i.dc(10,"option",8),i.Wc(11,"Message :"),i.cc(),i.Uc(12,qo,2,2,"option",9),i.cc(),i.cc(),i.dc(13,"div",6),i.dc(14,"textarea",10),i.nc("ngModelChange",function(e){return t.message=e}),i.cc(),i.cc(),i.dc(15,"div",6),i.dc(16,"button",11),i.nc("click",function(){return t.sendMessage()}),i.Wc(17,"Send message"),i.cc(),i.cc(),i.cc(),i.cc()),2&e&&(i.yc("center",!1),i.Kb(4),i.Yc(" Message to: ",t.user.username," "),i.Kb(5),i.yc("ngModel",t.optionId),i.Kb(1),i.yc("value",-1),i.Kb(2),i.yc("ngForOf",t.options),i.Kb(2),i.yc("ngModel",t.message))},directives:[Q.a,l.t,l.l,l.n,l.o,l.v,a.m,l.b],encapsulation:2}),e})(),Bo=(()=>{class e extends _o{constructor(e,t){super(),this._modToolService=e,this._navigatorService=t}goToRoom(e){this._navigatorService.goToPrivateRoom(e)}openRoomTools(e){this._modToolService.openRoomTool(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(bo.a),i.Yb(br.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["ng-component"]],features:[i.Hb],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();function Go(e,t){if(1&e&&(i.dc(0,"div",13),i.dc(1,"div",14),i.dc(2,"div",15),i.Wc(3),i.cc(),i.dc(4,"div"),i.Wc(5),i.cc(),i.cc(),i.dc(6,"div"),i.Wc(7),i.cc(),i.cc()),2&e){const e=t.$implicit;i.Kb(3),i.Xc(e.timestamp),i.Kb(2),i.Xc(e.userName),i.Kb(2),i.Xc(e.message)}}function Zo(e,t){if(1&e){const e=i.ec();i.dc(0,"div",8),i.dc(1,"div",9),i.dc(2,"div"),i.Wc(3),i.cc(),i.dc(4,"div",10),i.dc(5,"button",11),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().goToRoom(n.roomId)}),i.Wc(6,"View Room"),i.cc(),i.dc(7,"button",11),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().openRoomTools(n.roomId)}),i.Wc(8,"Room Tools"),i.cc(),i.cc(),i.cc(),i.Uc(9,Go,8,3,"div",12),i.cc()}if(2&e){const e=t.$implicit;i.Kb(3),i.Yc(" Room: ",e.roomName," "),i.Kb(6),i.yc("ngForOf",e.chatlogs)}}let Xo=(()=>{class e extends Bo{constructor(e,t,n){super(e,n),this._modToolService=e,this._modToolUserInfoService=t,this._navigatorService=n}get title(){return this.user?"Chatlogs: "+this.user.username:""}getData(){return this._modToolService.roomVisits?this._modToolService.roomVisits:[]}close(){this._modToolService.showSendUserChatlogs=!1}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(bo.a),i.Yb(wo.a),i.Yb(br.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-mod-tool-user-chatlogs-component"]],inputs:{user:"user"},features:[i.Hb],decls:10,vars:3,consts:[["dragHandle",".card-header",1,"card","user-tool-card-chatlogs",3,"draggable","center"],[1,"card-header"],[1,"icon","modtool-user-icon",2,"margin-right","5px"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"position-relative","w-100",2,"min-height","200px","max-height","200px","height","200px"],["class","d-flex flex-column justify-content-between w-100",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","justify-content-between","w-100"],[1,"d-flex","bg-secondary","flex-row","justify-content-between","w-100"],[1,"d-flex","flex-row"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["class","d-flex flex-row justify-content-between w-100",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","justify-content-between","w-100"],[1,"d-flex","flex-row","mr-2"],[1,"mr-2"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"span"),i.Zb(3,"i",2),i.Wc(4),i.cc(),i.dc(5,"button",3),i.nc("click",function(){return t.close()}),i.Zb(6,"i",4),i.cc(),i.cc(),i.dc(7,"div",5),i.dc(8,"perfect-scrollbar",6),i.Uc(9,Zo,10,2,"div",7),i.cc(),i.cc(),i.cc()),2&e&&(i.yc("center",!1),i.Kb(4),i.Yc(" ",t.title," "),i.Kb(5),i.yc("ngForOf",t.getData()))},directives:[Q.a,m.b,a.m],encapsulation:2}),e})();var jo=n("LiRz");function Yo(e,t){if(1&e&&(i.dc(0,"div",13),i.dc(1,"div",14),i.dc(2,"div",15),i.Wc(3),i.cc(),i.dc(4,"div"),i.Wc(5),i.cc(),i.cc(),i.dc(6,"div"),i.Wc(7),i.cc(),i.cc()),2&e){const e=t.$implicit;i.Kb(3),i.Xc(e.timestamp),i.Kb(2),i.Xc(e.userName),i.Kb(2),i.Xc(e.message)}}function zo(e,t){if(1&e){const e=i.ec();i.dc(0,"div",8),i.dc(1,"div",9),i.dc(2,"div"),i.Wc(3),i.cc(),i.dc(4,"div",10),i.dc(5,"button",11),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().goToRoom(n.roomId)}),i.Wc(6,"View Room"),i.cc(),i.dc(7,"button",11),i.nc("click",function(){i.Lc(e);const n=t.$implicit;return i.qc().openRoomTools(n.roomId)}),i.Wc(8,"Room Tools"),i.cc(),i.cc(),i.cc(),i.Uc(9,Yo,8,3,"div",12),i.cc()}if(2&e){const e=t.$implicit;i.Kb(3),i.Yc(" Room: ",e.roomName," "),i.Kb(6),i.yc("ngForOf",e.chatlogs)}}let $o=(()=>{class e extends Bo{constructor(e,t,n){super(e,n),this._modToolService=e,this._modToolUserInfoService=t,this._navigatorService=n}get title(){return this._modToolService.currentRoomModData?"Room Chatlog: "+this._modToolService.currentRoomModData.name:""}getData(){return this._modToolService.userChatlogs&&this._modToolService.currentRoomModData?[new jo.a(this._modToolService.currentRoomModData.name,this._modToolService.currentRoom.roomId,this._modToolService.userChatlogs)]:[]}close(){this._modToolService.showRoomChatLogs=!1}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(bo.a),i.Yb(wo.a),i.Yb(br.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["nitro-mod-tool-room-chatlogs-component"]],features:[i.Hb],decls:10,vars:3,consts:[["dragHandle",".card-header",1,"card","user-tool-card-chatlogs",3,"draggable","center"],[1,"card-header"],[1,"icon","modtool-user-icon",2,"margin-right","5px"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"position-relative","w-100",2,"min-height","200px","max-height","200px","height","200px"],["class","d-flex flex-column justify-content-between w-100",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","justify-content-between","w-100"],[1,"d-flex","bg-secondary","flex-row","justify-content-between","w-100"],[1,"d-flex","flex-row"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["class","d-flex flex-row justify-content-between w-100",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","justify-content-between","w-100"],[1,"d-flex","flex-row","mr-2"],[1,"mr-2"]],template:function(e,t){1&e&&(i.dc(0,"div",0),i.dc(1,"div",1),i.dc(2,"span"),i.Zb(3,"i",2),i.Wc(4),i.cc(),i.dc(5,"button",3),i.nc("click",function(){return t.close()}),i.Zb(6,"i",4),i.cc(),i.cc(),i.dc(7,"div",5),i.dc(8,"perfect-scrollbar",6),i.Uc(9,zo,10,2,"div",7),i.cc(),i.cc(),i.cc()),2&e&&(i.yc("center",!1),i.Kb(4),i.Yc(" ",t.title," "),i.Kb(5),i.yc("ngForOf",t.getData()))},directives:[Q.a,m.b,a.m],encapsulation:2}),e})(),Qo=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},providers:[bo.a,wo.a],imports:[[v,r.a]]}),e})();i.Oc(ho.a,[a.n,$.a,Q.a,So,$o,Ro,Mo,Ko,Vo,Ho,Xo],[]);let Jo=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},imports:[[v,S,ee,ne,wt,_n,$n,Qn,ur,Ws,Ks,Vs,js,Ys,uo,Qo,$s,uo,Rt,Yn,Js]]}),e})(),ea=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},providers:[ln.a]}),e})();var ta=n("j2zY");let na=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},providers:[ta.a]}),e})(),ia=(()=>{class e{}return e.\u0275mod=i.Wb({type:e,bootstrap:[c.a]}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},imports:[[v,ea,na,Jo,r.a,s.a]]}),e})();Object(i.cb)(),r.c().bootstrapModule(ia).catch(e=>console.log(e))},zbtH:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n("gEeP"),r=n("bwAN"),s=n("fXoL"),c=n("WnqX"),o=n("PVU2");function a(e,t){if(1&e&&(s.dc(0,"span",17),s.Wc(1),s.cc()),2&e){const e=s.qc(2);s.Kb(1),s.Xc(e.totalFriendRequests)}}function l(e,t){if(1&e&&s.Zb(0,"div",18),2&e){const e=s.qc(2);s.yc("threadSelector",e.selectThread)}}function d(e,t){if(1&e&&s.Zb(0,"div",19),2&e){const e=s.qc(2);s.yc("thread",e.currentThread)}}const u=function(e){return{active:e}};function h(e,t){if(1&e){const e=s.ec();s.dc(0,"div",1),s.dc(1,"div",2),s.dc(2,"h6",3),s.Wc(3),s.rc(4,"translate"),s.cc(),s.dc(5,"button",4),s.nc("click",function(){return s.Lc(e),s.qc().hide()}),s.Zb(6,"i",5),s.cc(),s.cc(),s.dc(7,"div",6),s.dc(8,"div",7),s.dc(9,"button",8),s.nc("click",function(){return s.Lc(e),s.qc().displayFriends()}),s.Wc(10),s.rc(11,"translate"),s.Uc(12,a,2,1,"span",9),s.cc(),s.dc(13,"h6",10),s.dc(14,"span",11),s.Wc(15),s.rc(16,"translate"),s.cc(),s.cc(),s.dc(17,"perfect-scrollbar",12),s.Zb(18,"div",13),s.cc(),s.cc(),s.dc(19,"div",14),s.Uc(20,l,1,1,"div",15),s.Uc(21,d,1,1,"div",16),s.cc(),s.cc(),s.cc()}if(2&e){const e=s.qc();s.Kb(3),s.Xc(s.sc(4,9,"messenger.title")),s.Kb(6),s.yc("ngClass",s.Cc(15,u,e.friendsVisible)),s.Kb(1),s.Yc(" ",s.sc(11,11,"friendlist.friends"),""),s.Kb(2),s.yc("ngIf",e.totalFriendRequests>0),s.Kb(3),s.Xc(s.sc(16,13,"toolbar.icon.label.messenger")),s.Kb(3),s.yc("currentThread",e.currentThread)("threadSelector",e.selectThread),s.Kb(2),s.yc("ngIf",e.friendsVisible),s.Kb(1),s.yc("ngIf",e.currentThread)}}let g=(()=>{class e{constructor(e,t,n){this._settingsService=e,this._friendListService=t,this._ngZone=n,this.visible=!1,this._friendsVisible=!0,this._currentThread=null,this.selectThread=this.selectThread.bind(this)}ngOnInit(){this._friendListService.component=this,r.a.instance.communication.connection.send(new i.a)}ngOnChanges(e){const t=e.visible.currentValue;t||t===e.visible.previousValue||this.selectThread(null)}ngOnDestroy(){this._friendListService.component=null}hide(){this._settingsService.hideFriendList()}displayFriends(){this._friendsVisible=!0,this._currentThread=null}selectThread(e){if(e)return this._friendsVisible=!1,this._currentThread=e,void e.setRead();this._friendsVisible=!0,this._currentThread=null}get currentThread(){return this._currentThread}get friendsVisible(){return this._friendsVisible&&!this._currentThread}get totalFriendRequests(){return this._friendListService.requests.size}}return e.\u0275fac=function(t){return new(t||e)(s.Yb(c.a),s.Yb(o.a),s.Yb(s.H))},e.\u0275cmp=s.Sb({type:e,selectors:[["nitro-friendlist-main-component"]],inputs:{visible:"visible"},features:[s.Ib],decls:1,vars:1,consts:[["class","nitro-friendlist card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-friendlist","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-3"],[1,"col-4","d-flex","flex-column"],[1,"btn","btn-secondary","w-100","mb-1",3,"ngClass","click"],["class","badge badge-danger ml-1","style","font-size:12px;",4,"ngIf"],[1,"mt-2","mb-1"],[1,"badge","text-uppercase"],[1,"position-relative","w-100",2,"min-height","320px","max-height","320px","height","320px"],["nitro-friendlist-thread-list-component","",3,"currentThread","threadSelector"],[1,"col","d-flex","flex-column"],["nitro-friendlist-friends-viewer-component","",3,"threadSelector",4,"ngIf"],["nitro-friendlist-thread-viewer-component","",3,"thread",4,"ngIf"],[1,"badge","badge-danger","ml-1",2,"font-size","12px"],["nitro-friendlist-friends-viewer-component","",3,"threadSelector"],["nitro-friendlist-thread-viewer-component","",3,"thread"]],template:function(e,t){1&e&&s.Uc(0,h,22,17,"div",0),2&e&&s.yc("ngIf",t.visible)},encapsulation:2}),e})()},zn8P:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0,4]]]);